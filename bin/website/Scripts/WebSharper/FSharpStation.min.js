(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW;a=window;b=a.FSSGlobal=a.FSSGlobal||{};c=b.Useful=b.Useful||{};d=c.Async=c.Async||{};e=c.KeyVal=c.KeyVal||{};f=c.String=c.String||{};g=c.Option=c.Option||{};h=a.WebSharper;i=h&&h.Obj;j=c.ExceptionThrown=c.ExceptionThrown||{};k=c.ErrOptionIsNone=c.ErrOptionIsNone||{};l=c.ErrSimple=c.ErrSimple||{};m=c.Result=c.Result||{};n=m.ropBuilder=m.ropBuilder||{};o=c.ResultS=c.ResultS||{};p=c.Wrap=c.Wrap||{};q=p.Builder=p.Builder||{};r=c.Mailbox=c.Mailbox||{};s=c.Dict=c.Dict||{};t=c.ResetableMemoize=c.ResetableMemoize||{};u=c.PreproDirective=c.PreproDirective||{};v=b.FsStationShared=b.FsStationShared||{};w=v.CodeSnippetId=v.CodeSnippetId||{};x=v.CodeSnippet=v.CodeSnippet||{};y=v.FSMessage=v.FSMessage||{};z=v.FSSeverity=v.FSSeverity||{};A=b.WSMessagingBroker=b.WSMessagingBroker||{};B=A.Address=A.Address||{};C=A.BrokerRequest=A.BrokerRequest||{};D=A.MessageType=A.MessageType||{};E=A.BrokerMessage=A.BrokerMessage||{};F=A.Replier=A.Replier||{};G=A.MessageGeneric=A.MessageGeneric||{};H=A.ClientTypeFSharp=A.ClientTypeFSharp||{};I=A.ClientTypeFSStation=A.ClientTypeFSStation||{};J=A.ClientTypeJScript=A.ClientTypeJScript||{};K=A.ErrBroker=A.ErrBroker||{};L=A.WSMessagingClient=A.WSMessagingClient||{};M=A.FsStationClientErr=A.FsStationClientErr||{};N=A.FStationMessaging=A.FStationMessaging||{};O=b.FSAutoCompleteIntermediary=b.FSAutoCompleteIntermediary||{};P=O.CommTypes=O.CommTypes||{};Q=P.ResponseError=P.ResponseError||{};R=P.Location=P.Location||{};S=P.CompletionResponse=P.CompletionResponse||{};T=P.OverloadDescription=P.OverloadDescription||{};U=P.OverloadParameter=P.OverloadParameter||{};V=P.Overload=P.Overload||{};W=P.Parameter=P.Parameter||{};X=P.SignatureData=P.SignatureData||{};Y=P.MethodResponse=P.MethodResponse||{};Z=P.SymbolUseRange=P.SymbolUseRange||{};_0=P.SymbolUseResponse=P.SymbolUseResponse||{};_1=P.HelpTextResponse=P.HelpTextResponse||{};_2=P.CompilerLocationResponse=P.CompilerLocationResponse||{};_3=P.FSharpErrorInfo=P.FSharpErrorInfo||{};_4=P.ErrorResponse=P.ErrorResponse||{};_5=P.Colorization=P.Colorization||{};_6=P.Declaration=P.Declaration||{};_7=P.DeclarationResponse=P.DeclarationResponse||{};_8=P.OpenNamespace=P.OpenNamespace||{};_9=P.QualifySymbol=P.QualifySymbol||{};_=P.ResolveNamespaceResponse=P.ResolveNamespaceResponse||{};$=P.UnionCaseResponse=P.UnionCaseResponse||{};ba=P.ACMessage=P.ACMessage||{};bb=O.FSAutoCompleteIntermediaryClient=O.FSAutoCompleteIntermediaryClient||{};bc=b.FsEvaluator=b.FsEvaluator||{};bd=bc.Evaluator=bc.Evaluator||{};be=b.FsTranslator=b.FsTranslator||{};bf=b.HtmlNode=b.HtmlNode||{};bg=bf.Val=bf.Val||{};bh=bf.Var=bf.Var||{};bi=bf.ListModel=bf.ListModel||{};bj=bg.HelperType=bg.HelperType||{};bk=bg.valBuilder=bg.valBuilder||{};bl=bf.HtmlNode=bf.HtmlNode||{};bm=bf.LoadFiles=bf.LoadFiles||{};bn=b.Template=b.Template||{};bo=bn.Button=bn.Button||{};bp=bn.Input=bn.Input||{};bq=bn.Hoverable=bn.Hoverable||{};br=bn.Panel=bn.Panel||{};bs=bn.TextArea=bn.TextArea||{};bt=bn.CodeMirrorPos=bn.CodeMirrorPos||{};bu=bn.CodeMirrorEditor=bn.CodeMirrorEditor||{};bv=bn.CodeMirror=bn.CodeMirror||{};bw=bn.Hint=bn.Hint||{};bx=bn.HintResponse=bn.HintResponse||{};by=bn.HintOptions=bn.HintOptions||{};bz=bn.LintResponse=bn.LintResponse||{};bA=bn.SplitterBar=bn.SplitterBar||{};bB=bn.SectionType=bn.SectionType||{};bC=bn.Grid=bn.Grid||{};bD=bn.TabStrip=bn.TabStrip||{};bE=bn.MenuEntry=bn.MenuEntry||{};bF=bn.MenuNode=bn.MenuNode||{};bG=bn.Menu=bn.Menu||{};bH=bn.Action=bn.Action||{};bI=bn.GuiPart=bn.GuiPart||{};bJ=bn.HtmlNodeFable=bn.HtmlNodeFable||{};bK=bn.LayoutDescriptionFable=bn.LayoutDescriptionFable||{};bL=bn.GuiPartSourceId=bn.GuiPartSourceId||{};bM=bn.Layout=bn.Layout||{};bN=b.RunCode=b.RunCode||{};bO=bN.RunNode=bN.RunNode||{};bP=b.FSharpStation=b.FSharpStation||{};bQ=bP.FsGlobal=bP.FsGlobal||{};bR=bQ.Position=bQ.Position||{};bS=bQ.ErrCompiler=bQ.ErrCompiler||{};bT=bQ.KeyMapAutoComplete=bQ.KeyMapAutoComplete||{};bU=h&&h.UI;bV=bU&&bU.Var;bW=bQ.Property=bQ.Property||{};bX=bQ.PropValue=bQ.PropValue||{};bY=bQ.CodeSnippet=bQ.CodeSnippet||{};bZ=bP.FableModule=bP.FableModule||{};b0=bZ.Babel=bZ.Babel||{};b1=bZ.Fable=bZ.Fable||{};b2=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};b3=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};b4=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};b5=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};b6=a.GeneratedPrintf=a.GeneratedPrintf||{};b7=h&&h.Concurrency;b8=h&&h.Seq;b9=h&&h.Unchecked;b_=h&&h.Strings;b$=a.IntelliFactory;ca=b$&&b$.Runtime;cb=h&&h.Utils;cc=h&&h.Enumerator;cd=h&&h.Arrays;ce=a.console;cf=h&&h.Control;cg=cf&&cf.MailboxProcessor;ch=h&&h.Collections;ci=ch&&ch.Dictionary;cj=h&&h.CancellationTokenSource;ck=a.System;cl=ck&&ck.Guid;cm=h&&h.List;cn=h&&h.Option;co=a.JSON;cp=h&&h.TimeoutException;cq=h&&h.ClientSideJson;cr=cq&&cq.Provider;cs=h&&h.Owin;ct=cs&&cs.WebSocket;cu=ct&&ct.Client;cv=cu&&cu.WithEncoding;cw=ct&&ct.Endpoint;cx=a.location;cy=ch&&ch.Map;cz=ch&&ch.FSharpMap;cA=h&&h.Remoting;cB=cA&&cA.AjaxRemotingProvider;cC=h&&h.Slice;cD=bU&&bU.View;cE=bU&&bU.Doc;cF=h&&h.Operators;cG=bU&&bU.AttrModule;cH=bU&&bU.AttrProxy;cI=bU&&bU.Input;cJ=cI&&cI.Mouse;cK=ch&&ch.FSharpSet;cL=ch&&ch.BalancedTree;cM=h&&h.MatchFailureException;cN=a.Object;cO=a.Fable;cP=a.Babel;cQ=ch&&ch.HashSet;cR=h&&h.JavaScript;cS=cR&&cR.JSModule;cT=h&&h.Lazy;cU=a.jQuery;cV=a.Date;cW=bU&&bU.ListModel;d.sleepThen=function(cX,cY){var cZ;cZ=null;return b7.Delay(function(){return b7.Bind(b7.Sleep(cY),function(){cX();return b7.Zero();});});};d.bind=function(cX,cY){return b7.Bind(cY,cX);};d.apply=function(cX,cY){var cZ;cZ=null;return b7.Delay(function(){return b7.Bind(b7.StartChild(cX,null),function(c0){return b7.Bind(b7.StartChild(cY,null),function(c1){return b7.Bind(c0,function(c2){return b7.Bind(c1,function(c3){return b7.Return(c2(c3));});});});});});};d.retn=function(cX){return b7.Return(cX);};d.iter=function(cX,cY){var cZ;cZ=null;return b7.Delay(function(){return b7.Bind(cY,function(c0){cX(c0);return b7.Zero();});});};d.map=function(cX,cY){var cZ;cZ=null;return b7.Delay(function(){return b7.Bind(cY,function(c0){return b7.Return(cX(c0));});});};e.tryGetValue=function(cX,cY){return b8.tryPick(function(cZ){return b9.Equals(cZ.K,cX)?{$:1,$0:cZ.V}:null;},cY);};f.append=function(cX,cY){return cX+cY;};f.trim=function(cX){return b_.Trim(cX);};f.splitByChar=function(cX,cY){return b_.SplitChars(cY,[cX],0);};g.modify=function(cX){var cY;function cZ(c0){return c0==null?null:{$:1,$0:cX(c0.$0)};}cY=function(c0){return g.defaultValue(a.id,c0);};return function(c0){return cY(cZ(c0));};};g.apply=function(cX,cY){var cZ;return cX!=null&&cX.$==1&&(cY!=null&&cY.$==1&&(cZ=[cY.$0,cX.$0],true))?{$:1,$0:cZ[0](cZ[1])}:null;};g.iterFO=function(cX,cY){if(cX!=null&&cX.$==1)if(cY!=null&&cY.$==1)cY.$0(cX.$0);};g.iterF=function(cX,cY){if(cY!=null&&cY.$==1)cY.$0(cX);};g.call=function(cX,cY){return cY!=null&&cY.$==1?{$:1,$0:cY.$0(cX)}:null;};g.defaultWith=function(cX,cY){return cY==null?cX():cY.$0;};g.defaultValue=function(cX,cY){return cY==null?cX:cY.$0;};j=c.ExceptionThrown=ca.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cX){return function(cY){return cX(cb.prettyPrint(cY));};}(a.id))(this.exn);}},i,j);j.New=ca.Ctor(function(cX){this.exn=cX;},j);k=c.ErrOptionIsNone=ca.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return"Option is None";}},i,k);k.New=ca.Ctor(function(){},k);l=c.ErrSimple=ca.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.warning;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.msg;}},i,l);l.New=ca.Ctor(function(cX,cY){this.msg=cX;this.warning=cY;},l);n=m.ropBuilder=ca.Class({For:function(cX,cY){var cZ;cZ=this;return this.Using(cc.Get(cX),function(c0){return cZ.While(function(){return c0.MoveNext();},cZ.Delay(function(){return cY(c0.Current());}));});},Using:function(cX,cY){return this.TryFinally(function(){return cY(cX);},function(){if(!b9.Equals(cX,null))cX.Dispose();});},TryFinally:function(cX,cY){try{return this.ReturnFrom(cX());}finally{cY();}},TryWith:function(cX,cY){try{return this.ReturnFrom(cX());}catch(cZ){return cY(cZ);}},While:function(cX,cY){var cZ;cZ=this;return!cX()?this.Zero():this.Bind(cY(),function(){return cZ.While(cX,cY);});},Run:function(cX){return cX();},Combine:function(cX,cY){return m.combine(cX,cY);},Delay:a.id,Zero:function(){return m.succeed();},Bind:function(cX,cY){return m.bind(function(cZ){return m.tryCall(cY,cZ);},cX);},ReturnFrom:a.id,Return:function(cX){return m.succeed(cX);}},i,n);n.New=ca.Ctor(function(){},n);m.toResultS=function(cX){return{$:0,$0:cX.$0,$1:cd.map(function(cY){return new l.New(cY.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),cY.FSSGlobal_Useful_ErrMsg$get_IsWarning());},cX.$1)};};m.fromResultS=function(cX){return{$:0,$0:cX.$0,$1:cd.map(a.id,cX.$1)};};m.result2String=function(cX){return b_.concat("\n",[g.defaultValue("Failed: ",cX.$0)].concat(m.msgs2String(cX.$1)));};m.countMessages=function(cX){var cY,cZ,c0,c1,c2,c3,c4;if(b9.Equals(cX,[]))return"";else{c1=cd.filter(function(c5){return!c5.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cX);c2=cd.filter(function(c5){return c5.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cX);c3=cd.length(c1);c4=cd.length(c2);switch(c3===0?c4===0?0:c4===1?2:5:c3===1?c4===0?1:c4===1?3:(cY=[c3,c4],6):c4===0?4:(cY=[c3,c4],6)){case 0:c0=function(c5){return function(c6){return c5(cb.toSafe(c6));};}(a.id);break;case 1:c0=function(c5){return function(c6){return c5(cb.toSafe(c6));};}(a.id);break;case 2:c0=function(c5){return function(c6){return c5(cb.toSafe(c6));};}(a.id);break;case 3:c0=function(c5){return function(c6){return c5("1 error, 1 warning\n"+cb.toSafe(c6));};}(a.id);break;case 4:c0=((ca.Curried3(function(c5,c6,c7){return c5(a.String(c6)+" errors\n"+cb.toSafe(c7));}))(a.id))(c3);break;case 5:c0=((ca.Curried3(function(c5,c6,c7){return c5(a.String(c6)+" warnings\n"+cb.toSafe(c7));}))(a.id))(c4);break;case 6:c0=(((ca.Curried(function(c5,c6,c7,c8){return c5(a.String(c6)+" errors, "+a.String(c7)+" warnings\n"+cb.toSafe(c8));},4))(a.id))(cY[0]))(cY[1]);break;}return c0(m.getMessages(cX));}};m.getMessages=function(cX){return b_.concat("\n",m.msgs2String(cX));};m.msgs2String=function(cX){return cd.map(function(cY){return cY.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},cX);};m.seqCheck=function(cX){return b8.exists(function(cY){return m.Success(cY).$==1;},cX)?m.failWithMsgs(b8.pick(function(cY){var cZ;cZ=m.Success(cY);return cZ.$==1?{$:1,$0:cZ.$0}:null;},cX)):m.succeed(b8.map(function(cY){return cY.$0.$0;},cX));};m.withError=function(cX,cY){var cZ;cZ=cY.$1;return g.defaultWith(function(){return cX(cZ);},cY.$0);};m.ifError=function(cX,cY){return g.defaultValue(cX,cY.$0);};m.failIfTrue=function(cX,cY){return cY?m.fail(cX):m.succeed();};m.failIfFalse=function(cX,cY){return cY?m.succeed():m.fail(cX);};m.tryProtection=function(){return m.succeed();};m.toOptionMs=function(cX){return[cX.$0,cX.$1];};m.toOption=function(cX){return cX.$0;};m.fromOption=function(cX,cY){return cY!=null&&cY.$==1?m.succeed(cY.$0):m.fail(cX);};m.fromChoice=function(cX){return cX.$==1?m.fail(cX.$0):m.succeed(cX.$0);};m.result=function(){b2.$cctor();return b2.result;};m.tryCall=function(cX,cY){try{return cX(cY);}catch(cZ){return m.fail(m.failException(cZ));}};m.failException=function(cX){return new j.New(cX);};m.Success=function(cX){return cX.$0==null?{$:1,$0:cX.$1}:{$:0,$0:[cX.$0.$0,cX.$1]};};m.failSimpleWarning=function(cX){return m.fail(new l.New(cX,true));};m.failSimpleError=function(cX){return m.fail(new l.New(cX,false));};m.apply=function(cX,cY){var cZ,c0,c1,c2,c3;cZ=cX.$1;c0=cY.$1;c1=cX.$0;c2=cY.$0;return c1!=null&&c1.$==1&&(c2!=null&&c2.$==1&&(c3=[c1.$0,c2.$0],true))?{$:0,$0:{$:1,$0:c3[0](c3[1])},$1:cZ.concat(c0)}:{$:0,$0:null,$1:cZ.concat(c0)};};m.bind=function(cX,cY){var cZ,c0,c1;cZ=cY.$0;c0=cY.$1;return cZ==null?{$:0,$0:null,$1:c0}:(c1=cX(cZ.$0),{$:0,$0:c1.$0,$1:c0.concat(c1.$1)});};m.combine=function(cX,cY){var cZ;cZ=cX.$1;return g.defaultValue({$:0,$0:null,$1:cZ},cX.$0==null?null:{$:1,$0:m.mergeMsgs(cZ,cY())});};m.mergeMsgs=function(cX,cY){var cZ;cZ=m.mapMsgs(function(c0){return cX.concat(c0);},cY);return{$:0,$0:cZ[0],$1:cZ[1]};};m.getMsgs=function(cX){return cX.$1;};m.getOption=function(cX){return cX.$0;};m.mapMsgs=function(cX,cY){return[cY.$0,cX(cY.$1)];};m.mapMsg=function(cX,cY){return[cY.$0,cd.map(cX,cY.$1)];};m.mapErr=function(cX,cY){return{$:0,$0:cY.$0,$1:cd.map(cX,cY.$1)};};m.map=function(cX,cY){var cZ;return{$:0,$0:(cZ=cY.$0,cZ==null?null:{$:1,$0:cX(cZ.$0)}),$1:cY.$1};};m.failWithMsgs=function(cX){return{$:0,$0:null,$1:cX};};m.fail=function(cX){return{$:0,$0:null,$1:[cX]};};m.succeedWithMsgs=function(cX,cY){return{$:0,$0:{$:1,$0:cX},$1:cY};};m.succeedWithMsg=function(cX,cY){return{$:0,$0:{$:1,$0:cX},$1:[cY]};};m.succeed=function(cX){return{$:0,$0:{$:1,$0:cX},$1:[]};};o.toResult=function(){b2.$cctor();return b2.toResult;};o.fromResult=function(){b2.$cctor();return b2.fromResult;};p.StartAsTask=function(cX,cY,cZ){return b7.StartAsTask(p.getAsyncR(cX),cZ);};p.Start=function(cX,cY){b7.Start(p.getAsync(cX),cY);};q=p.Builder=ca.Class({For:function(cX,cY){var cZ;cZ=this;return this.Using(cc.Get(cX),function(c0){return cZ.While(function(){return c0.MoveNext();},cZ.Delay(function(){return cY(c0.Current());}));});},Using:function(cX,cY){return this.TryFinally(function(){return cY(cX);},function(){if(!b9.Equals(cX,null))cX.Dispose();});},TryFinally:function(cX,cY){var cZ;return{$:2,$0:(cZ=null,b7.Delay(function(){return b7.Bind(b7.Catch(p.toAsyncResult(cX())),function(c0){var c1,c2;cY();if(c0.$==1)throw c0.$0;else c2=c0.$0;return b7.Return(c2);});}))};},TryWith:function(cX,cY){var cZ;return{$:2,$0:(cZ=null,b7.Delay(function(){return b7.Bind(b7.Catch(p.toAsyncResult(cX())),function(c0){return b7.Return(c0.$==1?cY(c0.$0):c0.$0);});}))};},While:function(cX,cY){return p.whileLoop(cX,cY);},Combine:function(cX,cY){return p.combine(p.errOptionIsNone(),cX,cY);},Run:function(cX){return cX();},Delay:a.id,ReturnFrom:a.id,Return:function(cX){return{$:3,$0:cX};},Zero:function(){return{$:3,$0:null};},Bind:function(cX,cY){return p.bind(cY,{$:4,$0:cX});},Bind$1:function(cX,cY){return p.bind(cY,{$:0,$0:cX});},Bind$2:function(cX,cY){return p.bind(cY,{$:1,$0:cX});},Bind$3:function(cX,cY){return p.bind(cY,cX);}},i,q);q.New=ca.Ctor(function(){},q);p.runSynchronouslyS=function(cX,cY){var cZ;cZ=p.runSynchronouslyO(cX,cY);return cZ[0]==null?(function(c0){return function(c1){return c0("Failed!\n"+cb.toSafe(c1));};}(a.id))(cZ[1]):(((ca.Curried3(function(c0,c1,c2){return c0(a.String(c1)+"\n"+cb.toSafe(c2));}))(a.id))(cZ[0].$0))(cZ[1]);};p.runSynchronouslyO=function(cX,cY){return m.mapMsgs(cX?m.countMessages:m.getMessages,ce.log("runSynchronously should not be used in Javascript"));};p.getResult=function(cX,cY){if(cY.$==4){if(cY.$0==null)cX(m.fail(p.errOptionIsNone()));else cX(m.succeed(cY.$0.$0));}else if(cY.$==0)cX(cY.$0);else if(cY.$==1)b7.StartWithContinuations(cY.$0,function(cZ){cX(m.succeed(cZ));},function(cZ){cX(m.fail(m.failException(cZ)));},function(cZ){cX(m.fail(m.failException(cZ)));},null);else if(cY.$==2)b7.StartWithContinuations(cY.$0,cX,function(cZ){cX(m.fail(m.failException(cZ)));},function(cZ){cX(m.fail(m.failException(cZ)));},null);else cX(m.succeed(cY.$0));};p.wrapper=function(){b2.$cctor();return b2.wrapper;};p.wrap=function(){b2.$cctor();return b2.wrap;};p.whileLoop=function(cX,cY){return cX()?p.bind(function(){return p.whileLoop(cX,cY);},cY()):{$:3,$0:null};};p.combine=function(cX,cY,cZ){var c0,c1,c2,c3;switch(cY.$==4?cY.$0==null?4:0:cY.$==0?cY.$0.$0==null?(c0=cY.$0.$1,5):(c1=cY.$0.$1,!b9.Equals(c1,null)&&c1.length===0?0:(c0=cY.$0.$1,1)):cY.$==1?(c0=cY.$0,2):cY.$==2?(c0=cY.$0,3):0){case 0:return cZ();break;case 1:return p.addMsgs(cX,c0,cZ());break;case 2:return{$:2,$0:(c2=null,b7.Delay(function(){return b7.Bind(c0,function(){return b7.Bind(p.toAsyncResult(cZ()),function(c4){return b7.Return(c4);});});}))};break;case 3:return{$:2,$0:(c3=null,b7.Delay(function(){return b7.Bind(c0,function(c4){var c5,c6;c5=m.Success(c4);return c5.$==0?(c6=c5.$0[1],b7.Bind(p.toAsyncResult(cZ()),function(c7){return b7.Return(m.mergeMsgs(c6,c7));})):b7.Return(m.failWithMsgs(c5.$0));});}))};break;case 4:return{$:4,$0:null};break;case 5:return{$:0,$0:m.failWithMsgs(c0)};break;}};p.addMsgs=function(cX,cY,cZ){var c0,c1,c2;if(b9.Equals(cY,[]))return cZ;else switch(cZ.$==4?cZ.$0==null?1:(c0=cZ.$0.$0,0):cZ.$==0?(c0=cZ.$0,2):cZ.$==1?(c0=cZ.$0,3):cZ.$==2?(c0=cZ.$0,4):(c0=cZ.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(c0,cY)};break;case 1:return{$:0,$0:m.mergeMsgs(cY,m.fail(cX))};break;case 2:return{$:0,$0:m.mergeMsgs(cY,c0)};break;case 3:return{$:2,$0:(c1=null,b7.Delay(function(){return b7.Bind(c0,function(c3){return b7.Return(m.succeedWithMsgs(c3,cY));});}))};break;case 4:return{$:2,$0:(c2=null,b7.Delay(function(){return b7.Bind(c0,function(c3){return b7.Return(m.mergeMsgs(cY,c3));});}))};break;}};p.wrapper2Async=function(cX,cY){var cZ,c0,c1,c2;c0=p.tryCall(cX,cY);switch(c0.$==4?0:c0.$==0?1:c0.$==1?2:c0.$==2?3:0){case 0:return p.wb2arb([],c0);break;case 1:return p.wb2arb(c0.$0.$1,c0);break;case 2:c1=c0.$0;c2=null;return b7.Delay(function(){return b7.Bind(c1,function(c3){return b7.Return(m.succeed(c3));});});break;case 3:return c0.$0;break;}};p.start=function(cX,cY){p.startV(function(cZ){if(cZ[0]==null)cX("Failed!\n"+cZ[1]);else cX(cZ[1]);},cY);};p.startV=function(cX,cY){var cZ,c0,c1,c2;function c3(c6){return m.mapMsgs(m.getMessages,c6);}function c4(c6){return[null,c6];}function c5(c6){return[null,c6];}b7.StartWithContinuations(p.getAsyncR(cY),function(c6){return cX(c3(c6));},(cZ=(c0=function(c6){return function(c7){return c6(a.String(c7));};}(a.id),function(c6){return c4(c0(c6));}),function(c6){return cX(cZ(c6));}),(c1=(c2=function(c6){return function(c7){return c6(a.String(c7));};}(a.id),function(c6){return c5(c2(c6));}),function(c6){return cX(c1(c6));}),null);};p.toAsyncWithDefault=function(cX){return function(cY){return p.getAsyncWithDefault(cX,cY);};};p.toAsyncOptionMs=function(cX){return d.map(m.toOptionMs,p.getAsyncR(cX));};p.toAsyncOption=function(cX){return d.map(m.toOption,p.getAsyncR(cX));};p.toAsyncResult=function(cX){return p.getAsyncR(cX);};p.toAsync=function(cX){return p.getAsync(cX);};p.getAsync=function(cX){return p.getAsyncWithDefault(function(cY){throw a.Error(m.getMessages(cY));},cX);};p.getAsyncWithDefault=function(cX,cY){return d.map(function(cZ){return m.withError(cX,cZ);},p.getAsyncR(cY));};p.getAsyncR=function(cX){var cY,cZ;return cX.$==3?b7.Return(m.succeed(cX.$0)):cX.$==4?b7.Return(m.fromOption(p.errOptionIsNone(),cX.$0)):cX.$==0?b7.Return(cX.$0):cX.$==2?cX.$0:(cY=cX.$0,(cZ=null,b7.Delay(function(){return b7.Bind(cY,function(c0){return b7.Return(m.succeed(c0));});})));};p.map=function(cX){var cY;cY=function(cZ){return p.Return(cX(cZ));};return function(cZ){return p.bind(cY,cZ);};};p.Return=function(cX){return{$:3,$0:cX};};p.bind=function(cX,cY){var cZ,c0,c1,c2,c3,c4;switch(cY.$==4?cY.$0==null?1:(cZ=cY.$0.$0,0):cY.$==0?(c0=m.Success(cY.$0),c0.$==1?(cZ=c0.$0,2):(c1=c0.$0[1],!b9.Equals(c1,null)&&c1.length===0?(cZ=c0.$0[0],0):(cZ=[c0.$0[0],c0.$0[1]],3))):cY.$==1?(cZ=cY.$0,4):cY.$==2?(cZ=cY.$0,5):(cZ=cY.$0,0)){case 0:return p.tryCall(cX,cZ);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:m.failWithMsgs(cZ)};break;case 3:c2=cZ[1];return function(c5){var c6,c7,c8,c9,c_;switch(c5.$==4?c5.$0==null?1:(c6=c5.$0.$0,0):c5.$==0?(c7=m.Success(c5.$0),c7.$==1?(c6=c7.$0,4):(c8=c7.$0[1],!b9.Equals(c8,null)&&c8.length===0?(c6=c7.$0[0],2):(c6=[c7.$0[0],c7.$0[1]],3))):c5.$==1?(c6=c5.$0,5):c5.$==2?(c6=c5.$0,6):(c6=c5.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(c6,c2)};break;case 1:return{$:0,$0:m.failWithMsgs(c2.concat([p.errOptionIsNone()]))};break;case 2:return{$:0,$0:m.succeedWithMsgs(c6,c2)};break;case 3:return{$:0,$0:m.succeedWithMsgs(c6[0],c2.concat(c6[1]))};break;case 4:return{$:0,$0:m.failWithMsgs(c2.concat(c6))};break;case 5:return{$:2,$0:(c9=null,b7.Delay(function(){return b7.Bind(c6,function(c$){return b7.Return(m.succeedWithMsgs(c$,c2));});}))};break;case 6:return{$:2,$0:(c_=null,b7.Delay(function(){return b7.Bind(c6,function(c$){return b7.Return(m.mergeMsgs(c2,c$));});}))};break;}}(p.tryCall(cX,cZ[0]));break;case 4:return{$:2,$0:(c3=null,b7.Delay(function(){return b7.Bind(cZ,function(c5){return p.wb2arb([],p.tryCall(cX,c5));});}))};break;case 5:return{$:2,$0:(c4=null,b7.Delay(function(){return b7.Bind(cZ,function(c5){var c6,c7,c8;c6=m.Success(c5);return c6.$==1?(c7=c6.$0,c8=null,b7.Delay(function(){return b7.Return(m.failWithMsgs(c7));})):p.wb2arb(c6.$0[1],p.tryCall(cX,c6.$0[0]));});}))};break;}};p.tryCall=function(cX,cY){try{return cX(cY);}catch(cZ){return{$:0,$0:m.fail(m.failException(cZ))};}};p.wb2arb=function(cX,cY){var cZ,c0,c1,c2,c3,c4;switch(cY.$==2?(cZ=cY.$0,1):cY.$==0?(cZ=cY.$0,2):cY.$==3?(cZ=cY.$0,3):cY.$==4?cY.$0==null?4:(cZ=cY.$0.$0,3):(cZ=cY.$0,0)){case 0:c0=null;return b7.Delay(function(){return b7.Bind(cZ,function(c5){return b7.Return(m.succeedWithMsgs(c5,cX));});});break;case 1:c1=null;return b7.Delay(function(){return b7.Bind(cZ,function(c5){return b7.Return(m.mergeMsgs(cX,c5));});});break;case 2:c2=null;return b7.Delay(function(){return b7.Return(m.mergeMsgs(cX,cZ));});break;case 3:c3=null;return b7.Delay(function(){return b7.Return(m.succeedWithMsgs(cZ,cX));});break;case 4:c4=null;return b7.Delay(function(){return b7.Return(m.failWithMsgs(cX.concat([p.errOptionIsNone()])));});break;}};p.errOptionIsNone=function(){b2.$cctor();return b2.errOptionIsNone;};r.fold=function(cX,cY){return cg.Start(function(cZ){function c0(c1){var c2;c2=null;return b7.Delay(function(){return b7.TryWith(b7.Delay(function(){return b7.Bind(cZ.Receive(null),function(c3){return b7.Bind(cX(c1,c3),function(c4){return c0(c4);});});}),function(c3){((function(c4){return function(c5){return c4(cb.prettyPrint(c5));};}(function(c4){ce.log(c4);}))(c3));return c0(c1);});});}return c0(cY);},null);};r.call=function(cX){return r.iter(function(cY){var cZ,c0,c1;cZ=cY[0];c0=cY[1];c1=null;return b7.Delay(function(){return b7.Bind(cX(c0),function(c2){cZ(c2);return b7.Zero();});});});};r.iter=function(cX){return cg.Start(function(cY){var cZ;cZ=null;return b7.Delay(function(){return b7.While(function(){return true;},b7.Delay(function(){return b7.TryWith(b7.Delay(function(){return b7.Bind(cY.Receive(null),function(c0){return b7.Bind(cX(c0),function(){return b7.Return(null);});});}),function(c0){((function(c1){return function(c2){return c1(cb.prettyPrint(c2));};}(function(c1){ce.log(c1);}))(c0));return b7.Zero();});}));});},null);};s.add=function(cX,cY,cZ){if(cZ.ContainsKey(cX))cZ.set_Item(cX,cY);else cZ.Add(cX,cY);};t=c.ResetableMemoize=ca.Class({ClearCache:function(){this.cache.Clear();}},i,t);t.New=ca.Ctor(function(cX){this.f=cX;this.cache=new ci.New$5();},t);u.NoPrepo={$:11};u.PrepoEndIf={$:8};u.PrepoElse={$:7};c.asyncStartCancelling=function(){var cX;cX=null;return function(cY){var cZ;cX==null?void 0:cX.$0.Cancel$1();cZ=new cj.New();b7.Start(cY,{$:1,$0:cZ});cX={$:1,$0:cZ};};};c.separateDirectives=function(cX){var cY,cZ,c0,c1;function c2(c_){return c_[1];}function c3(c_){return c_.$==0?{$:1,$0:c_.$0}:null;}function c4(c_){return c_[1];}function c5(c_){return c_.$==1?{$:1,$0:c_.$0}:null;}function c6(c_){return c_[1];}function c7(c_){return c_.$==5?{$:1,$0:c_.$0}:null;}function c8(c_){return c_[1];}function c9(c_){return c_.$==4?{$:1,$0:c_.$0}:null;}cY=cd.ofSeq(b8.distinct(b8.choose(function(c_){return c3(c2(c_));},cX)));cZ=cd.ofSeq(b8.distinct(b8.choose(function(c_){return c5(c4(c_));},cX)));c0=cd.ofSeq(b8.distinct(b8.choose(function(c_){return c7(c6(c_));},cX)));c1=cd.ofSeq(b8.distinct(b8.choose(function(c_){return c9(c8(c_));},cX)));return[cd.ofSeq(b8.map(function(c_){return c_[0];},cX)),cY,cZ,c0,c1];};c.separatePrepros=function(cX,cY){var cZ;function c0(c3){return g.defaultValue(c3,b8.tryLast(b_.SplitStrings(b_.Trim(c3),["\""],1)));}function c1(c3){return g.defaultValue("",b8.tryHead(b_.SplitStrings(b_.Trim(c3),["#define "],1)));}function c2(c3){return"//"+c3;}cZ=cX?c2:a.id;return cd.map(function(c3){var c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de;c4=true;return c4&&b_.StartsWith(c3,"#define")?[c2(c3),{$:1,$0:c1(c3)}]:c4&&b_.StartsWith(c3,"#r")?[c2(c3),{$:0,$0:c0(c3)}]:c4&&b_.StartsWith(c3,"#load")?[c2(c3),{$:2,$0:c0(c3)}]:c4&&b_.StartsWith(c3,"#nowarn")?[c2(c3),{$:4,$0:c0(c3)}]:c4&&b_.StartsWith(c3,"# ")?[cZ(c3),{$:3,$0:c0(c3)}]:c4&&b_.StartsWith(c3,"#line")?[cZ(c3),{$:3,$0:c0(c3)}]:c4&&b_.StartsWith(c3,"#I")?[c2(c3),{$:5,$0:c0(c3)}]:c4&&b_.StartsWith(c3,"#if")?[c3,{$:6,$0:c3}]:c4&&b_.StartsWith(c3,"#else")?[c3,u.PrepoElse]:c4&&b_.StartsWith(c3,"#endif")?[c3,u.PrepoEndIf]:c4&&b_.StartsWith(c3,"#light")?[c3,{$:9,$0:false}]:c4&&b_.StartsWith(c3,"#")?[c2(c3),{$:10,$0:c3}]:[c3,u.NoPrepo];},cY);};c.mapPrint=function(cX){c.print(cX);return cX;};c.print=function(cX){((function(cY){return function(cZ){return cY(cb.prettyPrint(cZ));};}(function(cY){ce.log(cY);}))(cX));};c.printoutfn=function(cX,cY){return cY(function(cZ){return cX(cZ+"\n");});};c.dprintfn=function(cX){return cX(a.ignore);};c.__=function(cX,cY,cZ){return cX(cZ,cY);};c.swap=function(cX,cY,cZ){return cX(cZ,cY);};c.rexGuid=function(){b2.$cctor();return b2.rexGuid;};c.REGEX=function(cX,cY,cZ){var c0;if(cZ===null)return null;else try{c0=(new a.String(cZ)).match(new a.RegExp(cX,cY));return b9.Equals(c0,null)?null:!b9.Equals(c0,null)&&c0.length===0?null:{$:1,$0:c0};}catch(c1){return null;}};c.extract=function(cX,cY){var cZ;return b_.Substring(cY,0,(cZ=cY.length,b9.Compare(cX,cZ)===-1?cX:cZ));};w=v.CodeSnippetId=ca.Class({get_Text:function(){return a.String(this.$0);}},null,w);w.get_New=function(){return new w({$:0,$0:cl.NewGuid()});};x=v.CodeSnippet=ca.Class({SeparateCode:function(cX){var cY,cZ,c0,c1,c2,c3;function c4(c5,c6){return[b_.replicate(cZ," ")+c5,c6];}cY=!cX||this.properties.ContainsKey("NoLinePre");cZ=this.levelCode*2;c0=cZ===0?[a.id,""]:[function(c5){return cd.map(function(c6){return c4(c6[0],c6[1]);},c5);},(function(c5){return function(c6){return c5("("+a.String(c6)+")");};}(a.id))(cZ)];c1=c.separateDirectives(c0[0](c.separatePrepros(!cX,(cY?a.id:(c2=[(((ca.Curried3(function(c5,c6,c7){return c5("# 1 @\""+cb.toSafe(c6)+cb.toSafe(c7)+"\"");}))(a.id))(c0[1]))(this.get_NameSanitized())],function(c5){return c2.concat(c5);}))(b_.SplitChars(this.content,["\n"],0)))));c3=c1[0];return[[[this.get_NameSanitized(),cd.length(c3),cZ]],c3,c1[1],c1[2],c1[3],c1[4]];},UniquePredecessors:function(cX){return v.predsL(cX,cm.ofArray([this.id]));},get_NameSanitized:function(){return this.id.get_Text()+" "+v.sanitize(this.get_Name())+".fsx";},get_Name:function(){return v.snippetName(this.name,this.content);}},null,x);x.CodeFsx=function(cX,cY){return(x.CodeAndStarts(cX,cY))[0];};x.CodeAndStarts=function(cX,cY){var cZ;cZ=x.ReducedCode(cX,cY);return x.FinishCode(cX,cZ[0],cZ[1],cZ[2],cZ[3],cZ[4],cZ[5]);};x.FinishCode=function(cX,cY,cZ,c0,c1,c2,c3){var c4,c5;c4=b_.concat(" ",b8.map(function(c6){return"-d:"+c6;},b8.sort(c1)));c5=cm.ofSeq(b8.delay(function(){return b8.append(c4!==""?["////"+c4]:[],b8.delay(function(){return b8.append(b8.map(function(c6){return function(c7){return c6("#I @\""+cb.toSafe(c7)+"\"");};}(a.id),c2),b8.delay(function(){return b8.append(b8.map(function(c6){return function(c7){return c6("#r @\""+cb.toSafe(c7)+"\"");};}(a.id),c0),b8.delay(function(){return b8.append(cX&&!b8.isEmpty(c3)?["# 1 \"required for nowarns to work\""]:[],b8.delay(function(){return b8.map(function(c6){return function(c7){return c6("#nowarn \""+cb.toSafe(c7)+"\"");};}(a.id),c3);}));}));}));}));}));return[b_.concat("\n",b8.append(c5,cZ)),cd.ofSeq((b8.mapFold(function(c6,c7){var c8;c8=c7[1];return[[c7[0],[c7[2],c6,c6+c8]],c6+c8];},c5.get_Length(),cY))[0])];};x.ReducedCode=function(cX,cY){var cZ,c0;function c1(c2,c3,c4,c5,c6,c7){return function(c8){return x.AddSeps(c2,c3,c4,c5,c6,c7,c8[0],c8[1],c8[2],c8[3],c8[4],c8[5]);};}cZ=b8.reduce(function(c2,c3){return(function(c4){return c1(c4[0],c4[1],c4[2],c4[3],c4[4],c4[5]);}(c2))(c3);},(c0=b8.map(function(c2){return c2.SeparateCode(cX);},cY),b8.isEmpty(c0)?[[[],[],[],[],[],[]]]:c0));return[cZ[0],[b_.concat("\n",cZ[1])],cZ[2],cZ[3],cZ[4],cZ[5]];};x.AddSeps=function(cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8){return[cX.concat(c3),cY.concat(c4),cd.ofSeq(b8.distinct(b8.append(cZ,c5))),cd.ofSeq(b8.distinct(b8.append(c0,c6))),cd.ofSeq(b8.distinct(b8.append(c1,c7))),cd.ofSeq(b8.distinct(b8.append(c2,c8)))];};x.TryFindByKey=function(cX,cY){return b8.tryFind(function(cZ){return b9.Equals(cZ.id,cY);},cX);};x.New=function(cX,cY,cZ,c0,c1,c2,c3,c4,c5){return new x({name:cX,content:cY,parent:cZ,predecessors:c0,id:c1,expanded:c2,level:c3,levelCode:c4,properties:c5});};y.GetWholeFile={$:11};y.GetIdentification={$:0};z.FSInfor={$:2};z.FSWarning={$:1};z.FSError={$:0};v.predsL=function(cX,cY){var cZ,c0;cZ=cY;c0=cm.T.Empty;while(!(cZ.$==0))(function(){var c1,c2;return cZ.$==1?(c1=cZ.$1,(c2=cZ.$0,b8.contains(c2,c0)?void(cZ=c1):(cZ=cm.collect(a.id,cm.ofArray([c1,cm.collect(function(c3){return cm.append(cn.toList(c3.parent),c3.predecessors);},cn.toList(cX(c2)))])),void(c0=new cm.T({$:1,$0:c2,$1:c0}))))):null;}());return c0;};v.preds=function(cX,cY,cZ){var c0,c1;return cZ.$==1?(c0=cZ.$0,(c1=cm.collect(a.id,cm.ofArray([cZ.$1,cm.collect(function(c2){return cm.append(cn.toList(c2.parent),c2.predecessors);},cn.toList(cX(c0)))])),v.preds(cX,b8.contains(c0,cY)?cY:new cm.T({$:1,$0:c0,$1:cY}),c1))):cY;};v.sanitize=function(cX){var cY;cY=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return b_.Filter(function(cZ){return!cd.contains(cZ,cY);},cX);};v.snippetName=function(cX,cY){return cX!==""?cX:g.defaultValue("<empty>",b8.tryHead(b8.filter(function(cZ){return!(b_.StartsWith(cZ,"#")||b_.StartsWith(cZ,"[<")||b_.StartsWith(cZ,"//"));},b8.map(b_.Trim,b_.SplitChars(cY,["\n"],1)))));};B=A.Address=ca.Class({get_txt:function(){return this.$0;}},null,B);C.BRGetConnections={$:0};D.MsgRequestForEcho={$:5};D.MsgRequestForId={$:4};D.MsgFromBroker={$:3};D.MsgReply={$:2};D.MsgRequest={$:1};D.MsgInformation={$:0};E.BMReceiverCantReply={$:4};E.BMOnlyBrokerShouldUse={$:1};E.BMOk={$:0};F.Receiver={$:2};F.Broker={$:1};F.NoReply={$:0};G.New=function(cX,cY,cZ,c0,c1,c2,c3){return{from:cX,destination:cY,msgType:cZ,subtype:c0,id:c1,payload:c2,replier:c3};};H.FSharp={$:0};I.FSStation={$:0};J.JScript={$:0};K=A.ErrBroker=ca.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cX){return function(cY){return cX(b5.p(cY));};}(a.id))(this.bm);}},i,K);K.New=ca.Ctor(function(cX){this.bm=cX;},K);L=A.WSMessagingClient=ca.Class({sendMsg:function(cX){var cY,cZ;cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){return cX.replier.$===0?cZ.Bind$3(cY.sendAndForget(cX),function(){return cZ.Return("");}):cZ.ReturnFrom(cY.sendGetReply(cX));}));},getListeners:function(){var cX,cY;cX=this;cY=p.wrap();return cY.Run(cY.Delay(function(){var cZ,c0;return cY.Bind$3(cX.sendGetReply((cZ=A.MessageBrokerAddress(),(c0=co.stringify((b4.j$10())(C.BRGetConnections)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c0,F.NoReply)))),function(c1){return cY.Return((b3.j$10())(co.parse(c1)).$0);});}));},sendGetReply:function(cX){var cY,cZ;cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){return cZ.Bind$3(cY.sendAndReply(F.Receiver,cX),function(c0){var c1;return cZ.Bind$1((c1=c0.msgType,c1.$==2?m.succeed(c0.payload):c1.$==3?m.fail(new K.New((b3.j$11())(co.parse(c0.payload)))):m.fail(new K.New({$:5,$0:c0.msgType}))),function(c2){return cZ.Return(c2);});});}));},sendAndVerify:function(cX){var cY,cZ;cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){return cZ.Bind$3(cY.sendAndReply(F.Broker,cX),function(c0){var c1;return cZ.Bind$1(c0.msgType.$==3?(c1=(b3.j$11())(co.parse(c0.payload)),c1.$===0?m.succeed():m.fail(new K.New(c1))):m.fail(new K.New({$:5,$0:c0.msgType})),function(){return cZ.Return();});});}));},sendAndReply:function(cX,cY){var cZ,c0;cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){return c0.Bind$3(cZ.getServer(),function(c1){return c0.Bind$2(b7.FromContinuations(function(c2,c3,c4){var c5,c6;c5=cZ.waiting;c5.mailbox.AddLast({$:0,$0:cY.id,$1:[c2,c3,c4]});c5.resume();cZ.postR(c1,cX,cY);return cZ.wsTimeout>0?b7.Start((c6=null,b7.Delay(function(){return b7.Bind(b7.Sleep(cZ.wsTimeout),function(){var c7;c7=cZ.waiting;c7.mailbox.AddLast({$:2,$0:cY.id,$1:function(){return new cp.New$1((((ca.Curried3(function(c8,c9,c_){return c8("Did not receive reply in "+a.String(c9)+" seconds for Message: "+b6.p$23(c_));}))(a.id))(cZ.wsTimeout/1000>>0))(cY));}});c7.resume();return b7.Zero();});})),null):null;}),function(c2){return c0.Return(c2);});});}));},sendAndForget:function(cX){var cY,cZ;cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){return cZ.Bind$3(cY.getServer(),function(c0){cY.postR(c0,F.NoReply,cX);return cZ.Zero();});}));},postR:function(cX,cY,cZ){try{cX.FSSGlobal_WSMessagingBroker_IServer$Post(A.replier(cY,A.from(this.clientAddress,cZ)));}catch(c0){this.serverO=null;throw c0;}},getServer:function(){var cX,cY;cX=this;cY=p.wrap();return cY.Run(cY.Delay(function(){return cY.Bind$2(cX.checkServer.PostAndAsyncReply(function(cZ){return[cZ,null];},null),function(cZ){return cY.Bind$1(cZ,function(c0){return cY.Return(c0);});});}));},connectToWebSocketServer:function(){var cX,cY;cX=this;c.dprintfn(function(cZ){return cZ("in connectToWebSocketServer");});cY=null;return b7.Delay(function(){return b7.Bind(((cX.connectStateful(cX.wsEndPoint))(cX.clientId))(function(cZ){var c0;c0=null;return b7.Delay(function(){return b7.Return([0,function(c1){return function(c2){var c3;c3=null;return b7.Delay(function(){return b7.Combine(b7.TryWith(b7.Delay(function(){return c2.$==2?((c.printoutfn(cX.out,function(c4){return function(c5){return c4("WebSocket "+cb.toSafe(c5)+" connection open.");};}))(cX.clientId),cX.serverO={$:1,$0:cZ},b7.Zero()):c2.$==3?((c.printoutfn(cX.out,function(c4){return function(c5){return c4("WebSocket "+cb.toSafe(c5)+" connection closed.");};}))(cX.clientId),cX.close(),b7.Zero()):c2.$==1?((c.printoutfn(cX.out,function(c4){return function(c5){return c4("WebSocket "+cb.toSafe(c5)+" connection error!");};}))(cX.clientId),b7.Zero()):(cX.processMessage(c2.$0),b7.Zero());}),function(c4){(((ca.Curried3(function(c5,c6,c7){return c5("msg: "+b5.p$16(c6)+" \nexn:"+cb.prettyPrint(c7));}))(function(c5){ce.log(c5);}))(c2))(c4);return b7.Zero();}),b7.Delay(function(){return b7.Return(c1);}));});};}]);});}),function(){c.dprintfn(function(cZ){return cZ("connectToWebSocketServer with server");});return b7.Zero();});});},processMessage:function(cX){var cY,cZ,c0,c1,c2,c4;cZ=this;(c.dprintfn(function(c5){return function(c6){return c5(b6.p$23(c6));};}))(cX);c0=cX.msgType;function c3(c5){cZ.reply(c5);}switch(c0.$==2?0:c0.$==0?1:c0.$==1?2:c0.$==5?3:c0.$==4?4:0){case 0:this.processReply(cX);break;case 1:((c.printoutfn(this.out,ca.Curried3(function(c5,c6,c7){return c5("Information from '"+cb.toSafe(c6)+"': "+cb.toSafe(c7));})))(cX.from.get_txt()))(((cr.Id())())(co.parse(cX.payload)));break;case 2:c1=this.payloadProcessorO;c1!=null&&c1.$==1?p.Start((c2=cZ.mapPayloadWrap(c1.$0,cX),(p.map(function(c5){return c3(A.makeReply(c5));}))(c2)),null):cX.replier.$===2?null:null;break;case 3:cZ.reply(A.msgType(D.MsgInformation,A.mapPayload(a.id,cX)));break;case 4:cZ.reply(A.msgType(D.MsgInformation,(c4=A.makeReply(cX),G.New(c4.from,c4.destination,c4.msgType,c4.subtype,c4.id,co.stringify(((cr.Id())())(this.clientId)),c4.replier))));break;}},mapPayloadWrap:function(cX,cY){var cZ;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){return cZ.Bind$3(cX(cY.payload),function(c0){return cZ.Return(A.mapPayload(function(){return c0;},cY));});}));},processReply:function(cX){var cY;cY=this.waiting;cY.mailbox.AddLast({$:1,$0:cX.id,$1:cX});cY.resume();},close:function(){var cX;cX=this.serverO;cX==null?void 0:(cX.$0.FSSGlobal_WSMessagingBroker_IServer$Close(),this.serverO=null);},reply:function(cX){var cY;cY=this.serverO;cY==null?void 0:cY.$0.FSSGlobal_WSMessagingBroker_IServer$Post(A.destination(cX.from,A.from(this.clientAddress,cX)));},set_Out:function(cX){this.out=cX;},SendMsg:function(cX){return this.sendMsg(cX);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},i,L);L.New=ca.Ctor(function(cX,cY,cZ){L.New$1.call(this,ca.Curried3(function(c0,c1,c2){return d.map(a.ignore,cv.ConnectStateful(function(c3){return co.stringify((b4.j())(c3));},function(c3){return(b3.j())(co.parse(c3));},cw.CreateRemote((((ca.Curried3(function(c3,c4,c5){return c3("ws://"+cb.toSafe(c4)+"?ClientId="+cb.toSafe(c5));}))(a.id))(c0))(c1),{$:1,$0:ct.JsonEncoding.Readable}),function(c3){return c2({FSSGlobal_WSMessagingBroker_IServer$Post:function(c4){return c3.Post(c4);},FSSGlobal_WSMessagingBroker_IServer$Close:function(){return c3.get_Connection().close(1000);}});}));}),cX,cY,cZ);},L);L.New$1=ca.Ctor(function(cX,cY,cZ,c0){var c1,c2;c1=this;this.connectStateful=cX;this.clientId=cY;this.wsEndPoint=(c2=A.extractEndPoint()+"/ws",c0==null?c2:c0.$0);this.clientAddress=new B({$:0,$0:this.clientId});this.wsTimeout=cZ==null?60000:cZ.$0;this.out=function(c3){return function(c4){return c3(cb.toSafe(c4));};}(function(c3){ce.log(c3);});this.serverO=null;this.payloadProcessorO=null;this.waiting=A.waitingAgent(function(c3){((c.printoutfn(c1.out,ca.Curried3(function(c4,c5,c6){return c4("Reply from '"+cb.toSafe(c5)+"': "+cb.toSafe(c6));})))(c3.from.get_txt()))(c3.payload);});this.checkServer=r.call(function(){var c3;c3=null;return b7.Delay(function(){c.dprintfn(function(c4){return c4("getServer");});return b7.Combine(c1.serverO==null?(c.dprintfn(function(c4){return c4("getServer Connecting");}),b7.Bind(c1.connectToWebSocketServer(),function(){return b7.Bind(b7.Sleep(200),function(){return b7.Return(null);});})):b7.Zero(),b7.Delay(function(){var c4;return b7.Return((c4=c1.serverO,m.fromOption(new l.New("could not connect to Server",false),c4)));}));});});},L);M=A.FsStationClientErr=ca.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&this.$1.$==0;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(((ca.Curried3(function(cX,cY,cZ){return cX(b5.p$3(cY)+" "+cb.toSafe(cZ));}))(a.id))(this.$1))(this.$0):(function(cX){return function(cY){return cX(b5.p$4(cY));};}(a.id))(this);}},null,M);N=A.FStationMessaging=ca.Class({snippetResponse:function(cX){return cX.$==2?m.succeed(cX.$0):m.fail(new M({$:1,$0:a.String(cX)}));},snippetsResponse:function(cX){return cX.$==3?m.succeed(cX.$0):m.fail(new M({$:1,$0:a.String(cX)}));},stringResponse:function(cX){var cY,cZ;return cX.$==1&&((cZ=cX.$0,cZ!=null&&cZ.$==1)&&(cY=cX.$0.$0,true))?m.succeed(cY):m.fail(new M({$:1,$0:a.String(cX)}));},stringResponseR:function(cX){var cY,cZ;function c0(c1,c2){return new M({$:0,$0:c1,$1:c2});}return cX.$==4&&((cZ=cX.$0,cZ!=null&&cZ.$==1)&&(cY=[cX.$0.$0,cX.$1],true))?m.succeedWithMsgs(cY[0],cd.ofSeq(b8.map(function(c1){return c0(c1[0],c1[1]);},cY[1]))):m.fail(new M({$:1,$0:a.String(cX)}));},toId:function(){return new B({$:0,$0:this.fsIds});},get_MessagingClient:function(){return this.msgClient;},set_FSStationId:function(cX){this.fsIds=cX;},get_FSStationId:function(){return this.fsIds;},RunActionCall:function(cX,cY,cZ){var c0,c1,c2,c3,c4;function c5(c6){return c0.stringResponseR(c6);}c0=this;c1=this.toId();c2=this;c3={$:14,$0:cX,$1:cY,$2:cZ};c4=p.wrap();return c4.Run(c4.Delay(function(){var c6,c7;return c4.Bind$3((c6=c2.msgClient.sendGetReply((c7=co.stringify((b4.j$4())(c3)),G.New(new B({$:0,$0:""}),c1,D.MsgRequest,"",cl.NewGuid(),c7,F.NoReply))),(p.map(function(c8){return(b3.j$4())(co.parse(c8));}))(c6)),function(c8){return c4.Bind$1(c5(c8),function(c9){return c4.Return(c9);});});}));},RunSnippet:function(cX,cY){var cZ,c0,c1,c2,c3;function c4(c5){return cZ.stringResponseR(c5);}cZ=this;c0=this.toId();c1={$:13,$0:b_.SplitChars(cY,["/"],0),$1:cX};c2=this;c3=p.wrap();return c3.Run(c3.Delay(function(){var c5,c6;return c3.Bind$3((c5=c2.msgClient.sendGetReply((c6=co.stringify((b4.j$4())(c1)),G.New(new B({$:0,$0:""}),c0,D.MsgRequest,"",cl.NewGuid(),c6,F.NoReply))),(p.map(function(c7){return(b3.j$4())(co.parse(c7));}))(c5)),function(c7){return c3.Bind$1(c4(c7),function(c8){return c3.Return(c8);});});}));},GenericMessage:function(cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.stringResponse(c4);}cY=this;cZ=this.toId();c0=this;c1={$:1,$0:cX};c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c0.msgClient.sendGetReply((c5=co.stringify((b4.j$4())(c1)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(b3.j$4())(co.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},RequestWholeFile:function(){var cX,cY,cZ,c0,c1;function c2(c3){return cX.stringResponse(c3);}cX=this;cY=this.toId();cZ=this;c0=y.GetWholeFile;c1=p.wrap();return c1.Run(c1.Delay(function(){var c3,c4;return c1.Bind$3((c3=cZ.msgClient.sendGetReply((c4=co.stringify((b4.j$4())(c0)),G.New(new B({$:0,$0:""}),cY,D.MsgRequest,"",cl.NewGuid(),c4,F.NoReply))),(p.map(function(c5){return(b3.j$4())(co.parse(c5));}))(c3)),function(c5){return c1.Bind$1(c2(c5),function(c6){return c1.Return(c6);});});}));},RequestPredsById:function(cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.snippetsResponse(c4);}cY=this;cZ=this.toId();c0=this;c1={$:4,$0:cX};c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c0.msgClient.sendGetReply((c5=co.stringify((b4.j$4())(c1)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(b3.j$4())(co.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},RequestPreds:function(cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.snippetsResponse(c4);}cY=this;cZ=this.toId();c0={$:8,$0:b_.SplitChars(cX,["/"],0)};c1=this;c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c1.msgClient.sendGetReply((c5=co.stringify((b4.j$4())(c0)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(b3.j$4())(co.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},RequestJSCode:function(cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.stringResponseR(c4);}cY=this;cZ=this.toId();c0={$:10,$0:b_.SplitChars(cX,["/"],0)};c1=this;c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c1.msgClient.sendGetReply((c5=co.stringify((b4.j$4())(c0)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(b3.j$4())(co.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},RequestCode:function(cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.stringResponse(c4);}cY=this;cZ=this.toId();c0={$:7,$0:b_.SplitChars(cX,["/"],0)};c1=this;c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c1.msgClient.sendGetReply((c5=co.stringify((b4.j$4())(c0)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(b3.j$4())(co.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},RequestSnippet:function(cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.snippetResponse(c4);}cY=this;cZ=this.toId();c0={$:9,$0:b_.SplitChars(cX,["/"],0)};c1=this;c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c1.msgClient.sendGetReply((c5=co.stringify((b4.j$4())(c0)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cl.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(b3.j$4())(co.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},SendMessage:function(cX){var cY,cZ,c0;cY=this.toId();cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c1,c2;return c0.Bind$3((c1=cZ.msgClient.sendGetReply((c2=co.stringify((b4.j$4())(cX)),G.New(new B({$:0,$0:""}),cY,D.MsgRequest,"",cl.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b3.j$4())(co.parse(c3));}))(c1)),function(c3){return c0.Bind$1(m.succeed(c3),function(c4){return c0.Return(c4);});});}));},SendMessage$1:function(cX,cY){var cZ,c0;cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c1,c2;return c0.Bind$3((c1=cZ.msgClient.sendGetReply((c2=co.stringify((b4.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cl.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b3.j$4())(co.parse(c3));}))(c1)),function(c3){return c0.Bind$1(m.succeed(c3),function(c4){return c0.Return(c4);});});}));}},i,N);N.get_FSStationId_=function(){return"FSharpStation1523056942862";};N.New=ca.Ctor(function(cX,cY,cZ,c0){N.New$1.call(this,new L.New(cX,cZ,c0),cX,cY);},N);N.New$1=ca.Ctor(function(cX,cY,cZ){this.msgClient=cX;this.fsIds=g.defaultValue("FSharpStation1523056942862",cZ);},N);A.extractEndPoint=function(){return cd.get(b_.SplitChars(cx.href.substring(cx.href.indexOf("//")+2),["/"],0),0);};A.waitingAgent=function(cX){return r.fold(function(cY,cZ){var c0;c0=null;return b7.Delay(function(){var c1,c2,c3,c4,c5,c6,c7,c8,c9;return b7.Combine(cZ.$==1?(c1=cZ.$1,(g.defaultWith(function(){cX(c1);},(c2=cy.TryFind(cZ.$0,cY),c2==null?null:{$:1,$0:(c3=c2.$0,(c4=c3[0],(c3[1],c3[2],c4(c1))))})),b7.Zero())):cZ.$==2?(c5=cy.TryFind(cZ.$0,cY),c5==null?void 0:(c6=c5.$0,c6[0],c7=c6[1],c6[2],c7(cZ.$1())),b7.Zero()):cZ.$==3?(c8=cy.TryFind(cZ.$0,cY),c8==null?void 0:(c9=c8.$0,c9[0],c9[1],c9[2](cZ.$1())),b7.Zero()):b7.Zero(),b7.Delay(function(){var c_;return b7.Return((cZ.$==2?(c_=cZ.$0,true):cZ.$==3?(c_=cZ.$0,true):cZ.$==0?false:(c_=cZ.$0,true))?cY.Remove(c_):cY.Add(cZ.$0,cZ.$1));}));});},new cz.New([]));};A.makeReply=function(cX){return A.replier(F.NoReply,A.msgType(D.MsgReply,cX));};A.mapPayload=function(cX,cY){return G.New(cY.from,cY.destination,cY.msgType,cY.subtype,cY.id,cX(cY.payload),cY.replier);};A.msgId=function(cX,cY){return G.New(cY.from,cY.destination,cY.msgType,cY.subtype,cX,cY.payload,cY.replier);};A.replier=function(cX,cY){return G.New(cY.from,cY.destination,cY.msgType,cY.subtype,cY.id,cY.payload,cX);};A.subtype=function(cX,cY){return G.New(cY.from,cY.destination,cY.msgType,cX,cY.id,cY.payload,cY.replier);};A.msgType=function(cX,cY){return G.New(cY.from,cY.destination,cX,cY.subtype,cY.id,cY.payload,cY.replier);};A.destination=function(cX,cY){return G.New(cY.from,cX,cY.msgType,cY.subtype,cY.id,cY.payload,cY.replier);};A.from=function(cX,cY){return G.New(cX,cY.destination,cY.msgType,cY.subtype,cY.id,cY.payload,cY.replier);};A.MessageBrokerAddress=function(){b2.$cctor();return b2.MessageBrokerAddress;};A.MessageBrokerId=function(){b2.$cctor();return b2.MessageBrokerId;};Q.New=function(cX,cY){return{Code:cX,Message:cY};};R.New=function(cX,cY,cZ){return{File:cX,Line:cY,Column:cZ};};S.New=function(cX,cY,cZ,c0){return{Name:cX,ReplacementText:cY,Glyph:cZ,GlyphChar:c0};};T.New=function(cX,cY){return{Signature:cX,Comment:cY};};U.New=function(cX,cY,cZ,c0){return{Name:cX,CanonicalTypeTextForSorting:cY,Display:cZ,Description:c0};};V.New=function(cX,cY,cZ,c0){return{Tip:cX,TypeText:cY,Parameters:cZ,IsStaticArguments:c0};};W.New=function(cX,cY){return{Name:cX,Type:cY};};X.New=function(cX,cY){return{OutputType:cX,Parameters:cY};};Y.New=function(cX,cY,cZ){return{Name:cX,CurrentParameter:cY,Overloads:cZ};};Z.New=function(cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7){return{FileName:cX,StartLine:cY,StartColumn:cZ,EndLine:c0,EndColumn:c1,IsFromDefinition:c2,IsFromAttribute:c3,IsFromComputationExpression:c4,IsFromDispatchSlotImplementation:c5,IsFromPattern:c6,IsFromType:c7};};_0.New=function(cX,cY){return{Name:cX,Uses:cY};};_1.New=function(cX,cY){return{Name:cX,Overloads:cY};};_2.New=function(cX,cY,cZ){return{Fsc:cX,Fsi:cY,MSBuild:cZ};};_3.New=function(cX,cY,cZ,c0,c1,c2,c3){return{FileName:cX,StartLine:cY,EndLine:cZ,StartColumn:c0,EndColumn:c1,Message:c2,Subcategory:c3};};_4.New=function(cX,cY){return{File:cX,Errors:cY};};_5.New=function(cX){return{Kind:cX};};_6.New=function(cX,cY,cZ,c0,c1,c2,c3,c4){return{UniqueName:cX,Name:cY,Glyph:cZ,GlyphChar:c0,IsTopLevel:c1,File:c2,EnclosingEntity:c3,IsAbstract:c4};};_7.New=function(cX,cY){return{Declaration:cX,Nested:cY};};_8.New=function(cX,cY,cZ,c0,c1,c2){return{Namespace:cX,Name:cY,Type:cZ,Line:c0,Column:c1,MultipleNames:c2};};_9.New=function(cX,cY){return{Name:cX,Qualifier:cY};};_.New=function(cX,cY,cZ){return{Opens:cX,Qualifies:cY,Word:cZ};};$.New=function(cX){return{Text:cX};};ba.ACMIdentification={$:0};bb=O.FSAutoCompleteIntermediaryClient=ca.Class({info2Bool:function(cX){return cX.$==0&&cX.$0==="true";},errors2String:function(cX){return cX.$==7?b_.concat("\n",b8.map(function(cY){return((((((((ca.Curried(function(cZ,c0,c1,c2,c3,c4,c5,c6){return cZ("ErrFSharp \"F# "+cb.toSafe(c0)+".fsx ("+a.String(c1)+","+a.String(c2)+") - ("+a.String(c3)+","+a.String(c4)+") "+cb.toSafe(c5)+":"+cb.toSafe(c6)+"\"");},8))(a.id))(cY.FileName))(cY.StartLine))(cY.StartColumn))(cY.EndLine))(cY.EndColumn))(cY.Subcategory))(cY.Message);},cX.$0.Errors)):(function(cY){return function(cZ){return cY(b5.p$7(cZ));};}(a.id))(cX);},tip2String:function(cX){return cX.$==11?b_.concat("\n",b8.collect(function(cY){return cm.ofArray([cY.Signature,cY.Comment]);},b8.collect(a.id,cX.$0))):(function(cY){return function(cZ){return cY(b5.p$7(cZ));};}(a.id))(cX);},comp2Strings:function(cX){var cY;cY=this;return cX.$==3?cd.map(function(cZ){return[cZ.Name,cZ.ReplacementText,cZ.Glyph,cZ.GlyphChar];},cX.$0):cX.$==2?[]:cX.$==17?cd.collect(function(cZ){return cY.comp2Strings(cZ);},cX.$0):[[(function(cZ){return function(c0){return cZ(b5.p$7(c0));};}(a.id))(cX),"","ErrorMsg","E"]];},Async_map:function(cX,cY){var cZ;cZ=null;return b7.Delay(function(){return b7.Bind(cY,function(c0){return b7.Return(cX(c0));});});},FindDecl:function(cX,cY,cZ,c0){return this.Async_map(a.id,O.sendMessage({$:7,$0:cX,$1:cY,$2:cZ,$3:c0}));},FindDecl$1:function(cX,cY,cZ){return this.Async_map(a.id,O.sendMessage({$:6,$0:cX,$1:cY,$2:cZ}));},Complete:function(cX,cY,cZ,c0,c1){var c2;c2=this;return c2.Async_map(function(c3){return c2.comp2Strings(c3);},O.sendMessage({$:9,$0:cX,$1:cZ,$2:c0,$3:cY,$4:c1}));},Complete$1:function(cX,cY,cZ,c0){var c1;c1=this;return c1.Async_map(function(c2){return c1.comp2Strings(c2);},O.sendMessage({$:8,$0:cX,$1:cZ,$2:c0,$3:cY}));},ToolTip:function(cX,cY,cZ,c0){var c1;c1=this;return c1.Async_map(function(c2){return c1.tip2String(c2);},O.sendMessage({$:3,$0:cX,$1:cY,$2:cZ,$3:c0}));},ToolTip$1:function(cX,cY,cZ){var c0;c0=this;return c0.Async_map(function(c1){return c0.tip2String(c1);},O.sendMessage({$:2,$0:cX,$1:cY,$2:cZ}));},Parse:function(cX,cY){var cZ;cZ=this;return cZ.Async_map(function(c0){return cZ.errors2String(c0);},O.sendMessage({$:10,$0:cX,$1:cY,$2:[]}));},Parse$1:function(cX,cY,cZ){var c0;c0=this;return c0.Async_map(function(c1){return c0.errors2String(c1);},O.sendMessage({$:10,$0:cX,$1:cY,$2:cZ}));},MustParse:function(cX,cY){var cZ;cZ=this;return cZ.Async_map(function(c0){return cZ.info2Bool(c0);},O.sendMessage({$:11,$0:cX,$1:cY}));}},i,bb);bb.New=ca.Ctor(function(cX,cY){},bb);O.sendMessage=function(cX){var cY;cY=null;return b7.Delay(function(){return b7.Bind((new cB.New()).Async("FSharpStation:FSSGlobal.FSAutoCompleteIntermediary.sendMessageRpc:1124743568",[cX]),function(cZ){return b7.Return(cZ);});});};bd.extractConfig=function(cX){return b_.StartsWith(cX,"////-d:")?cC.string(cX,{$:1,$0:4},{$:1,$0:cX.indexOf("\n")-1}):"";};bc.abortFsiExe=function(){b7.Start((new cB.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.abortFsiExe:-829366048",[]),null);};bc.evaluateAR=function(cX,cY,cZ,c0){var c1;c1=null;return b7.Delay(function(){return b7.Bind((new cB.New()).Async("FSharpStation:FSSGlobal.FsEvaluator.evaluateAS:-1357873018",[cX,cY,cZ,c0]),function(c2){function c3(c4,c5){return new l.New(c4,c5);}return b7.Return({$:0,$0:c2[0],$1:cd.ofSeq(b8.map(function(c4){return c3(c4[0],c4[1]);},c2[1]))});});});};be.translateAR=function(cX,cY){var cZ;cZ=null;return b7.Delay(function(){return b7.Bind((new cB.New()).Async("FSharpStation:FSSGlobal.FsTranslator.translateAS:1220910711",[cX,cY]),function(c0){function c1(c2,c3){return new l.New(c2,c3);}return b7.Return({$:0,$0:c0[0],$1:cd.ofSeq(b8.map(function(c2){return c1(c2[0],c2[1]);},c0[1]))});});});};bg=bf.Val=ca.Class({get_ValTypeMember:function(){return 0;}},null,bg);bh.lensView=function(cX,cY,cZ,c0){var c1,c2,c3;c1=bh.freshId();c2=cD.Map2(function(c4){return cX(c4);},c0.get_View(),cZ);c3=new bV({Get:function(){return cX(c0.Get());},Set:function(c4){return c0.Update(function(c5){return cY(c5,c4);});},SetFinal:function(c4){return this.Set(c4);},Update:function(c4){return c0.Update(function(c5){return cY(c5,c4(cX(c5)));});},UpdateMaybe:function(c4){return c0.UpdateMaybe(function(c5){var c6;c6=c4(cX(c5));return c6==null?null:{$:1,$0:cY(c5,c6.$0)};});},get_View:function(){return c2;},get_Id:function(){return c1;}});bV.New.call(c3);return c3;};bh.Make=function(cX,cY,cZ){var c0,c1,c2,c3;c0=bh.freshId();c1=[cX];c2=cD.Map(function(c4){c1[0]=c4;return c4;},cY);c3=new bV({get_View:function(){return c2;},Get:function(){return c1[0];},Set:cZ,SetFinal:cZ,UpdateMaybe:function(c4){function c5(c6){if(c6==null);else cZ(c6.$0);}return cD.Get(function(c6){return c5(c4(c6));},c2);},Update:function(c4){return cD.Get(function(c5){return cZ(c4(c5));},c2);},get_Id:function(){return c0;}});bV.New.call(c3);return c3;};bh.freshId=function(){bh.set_counter(bh.counter()+1);return"varuid"+a.String(bh.counter());};bh.counter=function(){b2.$cctor();return b2.counter;};bh.set_counter=function(cX){b2.$cctor();b2.counter=cX;};bi.currentLens=function(cX,cY,cZ){return bi["currentLensUpd'"](cX,cY,function(c0){cZ.UpdateBy(function(){return cZ.TryFindByKey(cZ.key(c0))==null?null:{$:1,$0:c0};},cZ.key(c0));},cZ);};bi["currentLensUpd'"]=function(cX,cY,cZ,c0){return bh.Make(cX,cD.Map2(function(c1,c2){var c3;c3=c2==null?null:c0.TryFindByKey(c2.$0);return c3==null?cX:c3.$0;},c0.v,cY),cZ);};bi.currentLensUpd=function(cX,cY,cZ,c0){var c1;function c2(c4){return c0.TryFindByKey(c4);}function c3(c4){return c4==null?cX:c4.$0;}return bh.lensView((c1=function(c4){return c4==null?null:c2(c4.$0);},function(c4){return c3(c1(c4));}),function(c4,c5){var c6;c6=cZ(c5);c4==null?void 0:c6(c4.$0);return c4;},c0.v,cY);};bj.HelperType={$:0};bj.op_AmpGreater=function(cX,cY){return new bg({$:2,$0:cY});};bj.op_AmpGreater$1=function(cX,cY){return new bg({$:1,$0:cY});};bj.op_AmpGreater$2=function(cX,cY){return cY;};bj.op_AmpGreater$3=function(cX,cY){return cY;};bj.op_AmpGreater$4=function(cX,cY){return cY;};bj.op_AmpGreater$5=function(cX,cY){return cY;};bj.op_AmpGreater$6=function(cX,cY){return cY;};bj.op_AmpGreater$7=function(cX,cY){return cY;};bj.op_AmpGreater$8=function(cX,cY){return cY;};bj.op_AmpGreater$9=function(cX,cY){return new bg({$:0,$0:cY});};bj.op_AmpGreater$10=function(cX,cY){return new bg({$:0,$0:cY});};bj.op_AmpGreater$11=function(cX,cY){return new bg({$:0,$0:cY});};bj.op_AmpGreater$12=function(cX,cY){return new bg({$:0,$0:cY});};bj.op_AmpGreater$13=function(cX,cY){return new bg({$:0,$0:cY});};bj.op_AmpGreater$14=function(cX,cY){return new bg({$:0,$0:cY});};bk=bg.valBuilder=ca.Class({Delay:function(cX){return cX();},Zero:function(){return new bg({$:0,$0:null});},Bind:function(cX,cY){return bg.bind(cY,cX);},Bind$1:function(cX,cY){return bg.bind(cY,cX);},Bind$2:function(cX,cY){return bg.bind(cY,cX);},ReturnFrom:a.id,Return:function(cX){return new bg({$:0,$0:cX});}},i,bk);bk.New=ca.Ctor(function(){},bk);bg.fixitF=function(cX,cY){return cX(cY);};bg.valFlow=function(){b2.$cctor();return b2.valFlow;};bg.mapCached=function(cX,cY){return new bg({$:2,$0:cD.MapCached(cX,bg.toView(cY))});};bg.sink=function(cX,cY){cD.Sink(cX,bg.toView(bg.fixit(cY)));};bg.mapAsync=function(cX,cY){return new bg({$:2,$0:cD.MapAsync(cX,bg.toView(bg.fixit(cY)))});};bg.iter4=function(cX,cY,cZ,c0,c1){bg.iterV(a.ignore,bg.map4(cX,cY,cZ,c0,c1));};bg.iter3=function(cX,cY,cZ,c0){bg.iterV(a.ignore,bg.map3(cX,cY,cZ,c0));};bg.iter2=function(cX,cY,cZ){bg.iterV(a.ignore,bg.map2(cX,cY,cZ));};bg.apply=function(cX,cY){return bg.bindV(function(cZ){return bg.mapV(cZ,cX);},cY);};bg.map4=function(cX,cY,cZ,c0,c1){return bg.map4V(cX,bg.fixit(cY),bg.fixit(cZ),bg.fixit(c0),bg.fixit(c1));};bg.map3=function(cX,cY,cZ,c0){return bg.map3V(cX,bg.fixit(cY),bg.fixit(cZ),bg.fixit(c0));};bg.map2=function(cX,cY,cZ){return((bg.map2V(cX))(bg.fixit(cY)))(bg.fixit(cZ));};bg.map=function(cX,cY){return bg.mapV(cX,bg.fixit(cY));};bg.bind=function(cX,cY){return bg.bindV(cX,bg.fixit(cY));};bg.iter=function(cX,cY){bg.iterV(cX,bg.fixit(cY));};bg.toDoc=function(cX){return cE.EmbedView(bg.toView(bg.fixit(cX)));};bg.fixit=function(cX){return bg.fixitF(bg.toVal,cX);};bg.toVal=function(cX){return typeof cX=="string"?new bg({$:0,$0:cX}):typeof cX=="number"?new bg({$:0,$0:cX}):typeof cX=="boolean"?new bg({$:0,$0:cX}):cX instanceof cE?new bg({$:0,$0:cX}):cX instanceof bg?cX:cX instanceof bV?new bg({$:1,$0:cX}):"RSet"in cX?new bg({$:1,$0:cX}):typeof cX=="function"?new bg({$:2,$0:cX}):cX.get_ValTypeMember()===0?cX:cF.FailWith((function(cY){return function(cZ){return cY("Could not convert "+cb.prettyPrint(cZ));};}(a.id))(cX));};bg.attrV=function(cX,cY){return cY.$==2?cG.Dynamic(cX,cY.$0):cY.$==1?cG.Dynamic(cX,cY.$0.get_View()):cH.Create(cX,cY.$0);};bg.attrVO=function(cX,cY){var cZ,c0;return cY.$==2?(cZ=cY.$0,cG.DynamicPred(cX,cD.Map(function(c1){return c1!=null;},cZ),cD.Map(function(c1){return c1==null?"":c1.$0;},cZ))):cY.$==1?(c0=cY.$0,cG.DynamicPred(cX,cD.Map(function(c1){return c1!=null;},c0.get_View()),cD.Map(function(c1){return c1==null?"":c1.$0;},c0.get_View()))):cY.$0==null?cG.DynamicPred(cX,cD.Const(false),cD.Const("")):cH.Create(cX,cY.$0.$0);};bg.tagElt=function(cX,cY){return cY.$==2?cE.EmbedView(cD.Map(cX,cY.$0)):cY.$==1?cE.EmbedView(cD.Map(cX,cY.$0.get_View())):cX(cY.$0);};bg.tagDoc=function(cX,cY){return cY.$==2?cE.EmbedView(cD.Map(cX,cY.$0)):cY.$==1?cE.EmbedView(cD.Map(cX,cY.$0.get_View())):cX(cY.$0);};bg.map4V=function(cX,cY,cZ,c0,c1){var c2;c2=bg.map3V(cX,cY,cZ,c0);return((bg.map2V(function(c3){return function(c4){return c4(c3);};}))(c1))(c2);};bg.map3V=function(cX,cY,cZ,c0){var c1;c1=((bg.map2V(cX))(cY))(cZ);return((bg.map2V(function(c2){return function(c3){return c3(c2);};}))(c0))(c1);};bg.map2V=function(cX){function cY(c0,c1,c2){return(c0(c2))(c1);}function cZ(c0){var c1,c2;c1=(c2=function(c3){var c4;c4=cX(c3);return function(c5){return bg.mapV(c4,c5);};},function(c3){return cY(c2,c0,c3);});return function(c3){return bg.bindV(c1,c3);};}return(ca.Curried3(cY))(cZ);};bg.bindV=function(cX,cY){return cY.$==2?new bg({$:2,$0:cD.Bind(function(cZ){return bg.toView(cX(cZ));},cY.$0)}):cY.$==1?new bg({$:2,$0:cD.Bind(function(cZ){return bg.toView(cX(cZ));},cY.$0.get_View())}):cX(cY.$0);};bg.getAsync=function(cX){return cX.$==2?cD.GetAsync(cX.$0):cX.$==1?b7.Return(cX.$0.Get()):b7.Return(cX.$0);};bg.toView=function(cX){return cX.$==2?cX.$0:cX.$==1?cX.$0.get_View():cD.Const(cX.$0);};bg.iterV=function(cX,cY){if(cY.$==2)cD.Get(cX,cY.$0);else if(cY.$==1)cX(cY.$0.Get());else cX(cY.$0);};bg.mapV=function(cX,cY){return cY.$==2?new bg({$:2,$0:cD.Map(cX,cY.$0)}):cY.$==1?new bg({$:2,$0:cD.Map(cX,cY.$0.get_View())}):new bg({$:0,$0:cX(cY.$0)});};bl=bf.HtmlNode=ca.Class({Style:function(cX){return this.AddChildren([bf.style(cX)]);},AddClass:function(cX){return bf.addClass(cX,this);},InsertChildren:function(cX){return bf.insertChildren(cX,this);},AddChildren:function(cX){return bf.addChildren(cX,this);},get_toDoc:function(){var cX,cY,cZ;return this.$==3||this.$==6?cE.Empty():(cY=bf.chooseNode(this),(cZ=cE.Empty(),cY==null?cZ:cY.$0));}},null,bl);bl.HtmlEmpty=new bl({$:6});bl.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(11,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(10,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(9,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(8,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(7,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(6,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(5,cY,cX);};bl.op_MinusMinusMinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(4,cY,cX);};bl.op_MinusMinusMinusMinus=function(cX,cY){return bf.indent2Level(3,cY,cX);};bl.op_MinusMinus=function(cX,cY){return bf.indent2Level(2,cY,cX);};bl.op_Addition=function(cX,cY){return new cm.T({$:1,$0:cY,$1:cX});};bl.op_MinusMinusMinus=function(cX,cY){return cX.$==1?cX.$1.$==1?new cm.T({$:1,$0:cX.$1.$0.AddChildren([cX.$0.AddChildren([cY])]),$1:cX.$1.$1}):cm.ofArray([cX.$0.AddChildren([cY])]):cm.T.Empty;};bl.op_Subtraction=function(cX,cY){return cX.$==0?cm.T.Empty:new cm.T({$:1,$0:cX.$0.AddChildren([cY]),$1:cX.$1});};bm.LoadFilesAsyncOld=function(cX){function cY(cZ,c0){try{a.CIPHERSpaceLoadFiles(cX,cZ);}catch(c1){c0(c1);}}return b7.FromContinuations(function(cZ,c0,c1){return cY.apply(null,[cZ,c0,c1]);});};bm.LoadFilesAsync=function(cX){var cY;cY=null;return b7.Delay(function(){return b7.For(cX,function(cZ){return b7.Bind(bm.LoadFile(cZ),function(){return b7.Return(null);});});});};bm.LoadFile=function(cX){var cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$;function da(dc,dd){return b_.EndsWith(dd,dc)?{$:1,$0:null}:null;}function db(dc,dd){try{c_.onload=dc;a.document.head.appendChild(c_);}catch(de){dd(de);}}cY=(cZ=((c1=da(".js",cX),c1!=null&&c1.$==1)?!a.document.querySelector("script[src='"+cX+"']")||((c2=da(".fsx",cX),c2!=null&&c2.$==1)?!a.document.querySelector("script[src='"+cX+"']")||(c3=da(".fs",cX),c3!=null&&c3.$==1)&&!a.document.querySelector("script[src='"+cX+"']"):(c4=da(".fs",cX),c4!=null&&c4.$==1)&&!a.document.querySelector("script[src='"+cX+"']")):(c5=da(".fsx",cX),c5!=null&&c5.$==1)?!a.document.querySelector("script[src='"+cX+"']")||(c6=da(".fs",cX),c6!=null&&c6.$==1)&&!a.document.querySelector("script[src='"+cX+"']"):(c7=da(".fs",cX),c7!=null&&c7.$==1)&&!a.document.querySelector("script[src='"+cX+"']"))?{$:1,$0:bm.createScript(cX)}:(c8=da(".css",cX),c8!=null&&c8.$==1)?{$:1,$0:bm.createCss(cX)}:(c9=da(".html",cX),c9!=null&&c9.$==1)?{$:1,$0:bm.createHtml(cX)}:null,cZ==null?null:{$:1,$0:(c_=cZ.$0,b7.FromContinuations(function(dc,dd,de){return db.apply(null,[dc,dd,de]);}))});return cY==null?(c$=null,b7.Delay(function(){return b7.Return(null);})):cY.$0;};bm.createHtml=function(cX){var cY;cY=a.document.createElement("link");cY.setAttribute("rel","import");cY.setAttribute("type","text/html");cY.setAttribute("href",cX);return cY;};bm.createCss=function(cX){var cY;cY=a.document.createElement("link");cY.setAttribute("rel","stylesheet");cY.setAttribute("type","text/css");cY.setAttribute("href",cX);return cY;};bm.createScript=function(cX){var cY;cY=a.document.createElement("script");cY.setAttribute("type","text/javascript");cY.setAttribute("src",cX);return cY;};bf.findRootElement=function(cX){var cY;return!function(cZ){return cX.getRootNode(cZ);}?a.document.body:(cY=cX.getRootNode(),!cY.body?cY.firstChild:cY.body);};bf.createIFrame$3385$45=ca.Curried3(function(cX,cY,cZ){return cD.Get(function(c0){if(!c0)cX.Set(false);},cJ.get_MousePressed());});bf.createIFrame$3380$45=ca.Curried3(function(cX,cY,cZ){return cX.Set(true);});bf.createIFrame=function(cX){var cY;function cZ(c1,c2){return cY.Set(true);}function c0(c1,c2){return cD.Get(function(c3){if(!c3)cY.Set(false);},cJ.get_MousePressed());}cY=bV.Create$1(true);return bf.div([bf.style("position: relative; overflow: hidden; height: 100%; width: 100%;"),bf.iframe([bf.style("position: absolute; width:100%; height:100%;"),bf.frameborder("0"),new bl({$:8,$0:cG.OnAfterRender(cX)}),new bl({$:8,$0:cH.HandlerImpl("mouseleave",function(c1){return function(c2){return cZ(c1,c2);};})})]),bf.div([bf.style("position: absolute;"),bf.classIf("iframe-cover",bg.map(a.id,cY)),new bl({$:8,$0:cH.HandlerImpl("mouseenter",function(c1){return function(c2){return c0(c1,c2);};})})]),bf.styleH([bf.htmlText(".iframe-cover { top:0; left:0; right:0; bottom:0; background: blue; opacity: 0.04; z-index: 2; }")])]);};bf.bindHElem=function(cX,cY){return new bl({$:2,$0:bg.map(cX,bg.fixit(cY))});};bf.string2Styles=function(){b2.$cctor();return b2.string2Styles;};bf.style2pairs=function(cX){return cd.map(function(cY){return[b_.Trim(cd.get(cY,0)),b_.Trim(cd.get(cY,1))];},cd.filter(function(cY){return cd.length(cY)===2;},cd.map(function(cY){return b_.SplitChars(cY,[":"],0);},b_.SplitChars(cX,[";"],0))));};bf.classIf=function(cX,cY){return bf["class"](bg.map(function(cZ){return cZ?cX:"";},bg.fixit(cY)));};bf.css=function(cX){return bf.styleH([bf.htmlText(cX)]);};bf.style1=function(cX,cY){var cZ;return bf.style(bg.map((cZ=cX+":",function(c0){return cZ+c0;}),cY));};bf.placeholder=function(cX){return bf.htmlAttribute("placeholder",cX);};bf.style=function(cX){return bf.htmlAttribute("style",cX);};bf.draggable=function(cX){return bf.htmlAttribute("draggable",cX);};bf.spellcheck=function(cX){return bf.htmlAttribute("spellcheck",cX);};bf.frameborder=function(cX){return bf.htmlAttribute("frameborder",cX);};bf.Id=function(cX){return bf.htmlAttribute("id",cX);};bf.title=function(cX){return bf.htmlAttribute("title",cX);};bf.width=function(cX){return bf.htmlAttribute("width",cX);};bf.type=function(cX){return bf.htmlAttribute("type",cX);};bf["class"]=function(cX){return bf.htmlAttribute("class",cX);};bf.src=function(cX){return bf.htmlAttribute("src",cX);};bf.charset=function(cX){return bf.htmlAttribute("charset",cX);};bf.rel=function(cX){return bf.htmlAttribute("rel",cX);};bf.hrefO=function(cX){return bf.htmlAttributeO("href",cX);};bf.href=function(cX){return bf.htmlAttribute("href",cX);};bf.target=function(cX){return bf.htmlAttribute("target",cX);};bf.strong=function(cX){return bf.htmlElement("strong",cX);};bf.section=function(cX){return bf.htmlElement("section",cX);};bf.body=function(cX){return bf.htmlElement("body",cX);};bf.iframe=function(cX){return bf.htmlElement("iframe",cX);};bf.link=function(cX){return bf.htmlElement("link",cX);};bf.fieldset=function(cX){return bf.htmlElement("fieldset",cX);};bf.styleH=function(cX){return bf.htmlElement("style",cX);};bf.script=function(cX){return bf.htmlElement("script",cX);};bf.button=function(cX){return bf.htmlElement("button",cX);};bf.label=function(cX){return bf.htmlElement("label",cX);};bf.tbody=function(cX){return bf.htmlElement("tbody",cX);};bf.td=function(cX){return bf.htmlElement("td",cX);};bf.tr=function(cX){return bf.htmlElement("tr",cX);};bf.th=function(cX){return bf.htmlElement("th",cX);};bf.thead=function(cX){return bf.htmlElement("thead",cX);};bf.table=function(cX){return bf.htmlElement("table",cX);};bf.form=function(cX){return bf.htmlElement("form",cX);};bf.span=function(cX){return bf.htmlElement("span",cX);};bf.img=function(cX){return bf.htmlElement("img",cX);};bf.div=function(cX){return bf.htmlElement("div",cX);};bf.h6=function(cX){return bf.htmlElement("h6",cX);};bf.h5=function(cX){return bf.htmlElement("h5",cX);};bf.h4=function(cX){return bf.htmlElement("h4",cX);};bf.h3=function(cX){return bf.htmlElement("h3",cX);};bf.h2=function(cX){return bf.htmlElement("h2",cX);};bf.h1=function(cX){return bf.htmlElement("h1",cX);};bf.hr=function(cX){return bf.htmlElement("hr",cX);};bf.br=function(cX){return bf.htmlElement("br",cX);};bf.li=function(cX){return bf.htmlElement("li",cX);};bf.ul=function(cX){return bf.htmlElement("ul",cX);};bf.p=function(cX){return bf.htmlElement("p",cX);};bf.a=function(cX){return bf.htmlElement("a",cX);};bf.textV=function(cX){return bf.tag(cE.TextNode,cX);};bf._placeholder=function(cX){return bf.atr("placeholder",cX);};bf._style=function(cX){return bf.atr("style",cX);};bf._type=function(cX){return bf.atr("type",cX);};bf._class=function(cX){return bf.atr("class",cX);};bf.tag=function(cX,cY){return bg.tagDoc(cX,bg.fixit(cY));};bf.atr=function(cX,cY){return bg.attrV(cX,bg.fixit(cY));};bf.renderDoc=function(){b2.$cctor();return b2.renderDoc;};bf.op_BangBang=function(cX,cY){return cm.ofArray([cX(cY)]);};bf.endHtmlIndent=function(cX){var cY;cY=bf.finishO(cX);return cY==null?bf.htmlText("Malformed HTMLNode"):cY.$0;};bf.finishO=function(cX){return cX.$==1?cX.$1.$==1?bf.finishO(bf.out(cX)):{$:1,$0:cX.$0}:null;};bf.indent2Level=function(cX,cY,cZ){return cZ.get_Length()<cX?new cm.T({$:1,$0:cY,$1:cZ}):bf.indent2Level(cX,cY,bf.out(cZ));};bf.out=function(cX){return cX.$==1?cX.$1.$==1?new cm.T({$:1,$0:bf.addChildren([cX.$0],cX.$1.$0),$1:cX.$1.$1}):cm.ofArray([cX.$0]):cm.T.Empty;};bf.addClassIf=function(cX,cY){var cZ;cZ=bg.map(function(c0){return c0?cX:"";},bg.fixit(cY));return function(c0){return bf.addClass(cZ,c0);};};bf.addClass=function(cX,cY){return bf.addChildren(cm.ofArray([bf.htmlAttribute("class",cX)]),cY);};bf.insertChildren=function(cX,cY){function cZ(c0,c1){return[c0,b8.append(cX,c1)];}return bf.mapHtmlElement(function(c0){return function(c1){return cZ(c0,c1);};},cY);};bf.addChildren=function(cX,cY){function cZ(c0,c1){return[c0,b8.append(c1,cX)];}return bf.mapHtmlElement(function(c0){return function(c1){return cZ(c0,c1);};},cY);};bf.someElt=function(cX){return new bl({$:7,$0:cX});};bf.str=function(cX){return new bl({$:5,$0:bg.fixit(cX)});};bf.htmlText=function(cX){return new bl({$:5,$0:bg.fixit(cX)});};bf.htmlAttributeO=function(cX,cY){return new bl({$:4,$0:cX,$1:bg.fixit(cY)});};bf.htmlAttribute=function(cX,cY){return new bl({$:3,$0:cX,$1:bg.fixit(cY)});};bf.htmlElementF=function(cX,cY){return new bl({$:1,$0:cX,$1:cY});};bf.htmlElement=function(cX,cY){return new bl({$:0,$0:cX,$1:cY});};bf.mapHtmlElement=function(cX,cY){var cZ;return cY.$==0?(cZ=(cX(cY.$0))(cY.$1),new bl({$:0,$0:cZ[0],$1:cZ[1]})):cY.$==2?new bl({$:2,$0:bg.map(function(c0){return bf.mapHtmlElement(cX,c0);},cY.$0)}):cY;};bf.getAttrChildren=function(cX){var cY,cZ,c0;function c1(c2){var c3;return c2.$==3&&(c2.$0===cX&&(c3=[c2.$0,c2.$1],true))?{$:1,$0:c3[1]}:null;}cY=function(c2){return b8.tryPick(c1,c2);};cZ=(c0=new bg({$:0,$0:""}),function(c2){return c2==null?c0:c2.$0;});return function(c2){return cZ(cY(c2));};};bf.chooseNode=function(cX){var cY,cZ,c0,c1,c2;return cX.$==0?(cY=cX.$1,{$:1,$0:cE.Element(cX.$0,bf.getAttrsFromSeq(cY),b8.choose(bf.chooseNode,cY))}):cX.$==1?(cZ=cX.$1,{$:1,$0:(cX.$0(bf.getAttrsFromSeq(cZ)))(b8.choose(bf.chooseNode,cZ))}):cX.$==2?{$:1,$0:(c0=bg.toView(cX.$0),cE.BindView((c1=(c2=cE.Empty(),function(c3){return c3==null?c2:c3.$0;}),function(c3){return c1(bf.chooseNode(c3));}),c0))}:cX.$==5?{$:1,$0:bg.tagDoc(cE.TextNode,cX.$0)}:cX.$==7?{$:1,$0:cX.$0}:null;};bf.getAttrsFromSeq=function(cX){var cY;cY=b8.choose(bf.chooseAttr,cX);return b8.append(cm.choose(a.id,cm.ofArray([bf.groupAttr("class"," ",cX),bf.groupAttr("style","; ",cX)])),cY);};bf.groupAttr=function(cX,cY,cZ){var c0,c1;function c2(c3,c4){return bf.concat(cY,c3,c4);}c0=b8.choose(function(c3){return bf.chooseThisAttr(cX,c3);},cZ);return b8.isEmpty(c0)?null:{$:1,$0:bg.attrV(cX,(c1=(ca.Curried3(bg.map2))(function(c3){return function(c4){return c2(c3,c4);};}),b8.reduce(function(c3,c4){return(c1(c3))(c4);},c0)))};};bf.concat=function(cX,cY,cZ){return cY+cX+cZ;};bf.chooseThisAttr=function(cX,cY){var cZ;return cY.$==3&&(cY.$0===cX&&(cZ=[cY.$0,cY.$1],true))?{$:1,$0:cZ[1]}:null;};bf.chooseAttr=function(cX){var cY,cZ,c0,c1;return cX.$==3&&((cZ=cX.$0,cZ!=="class"&&cZ!=="style")&&(cY=[cX.$0,cX.$1],true))?{$:1,$0:bg.attrV(cY[0],cY[1])}:cX.$==4&&((c1=cX.$0,c1!=="class"&&c1!=="style")&&(c0=[cX.$0,cX.$1],true))?{$:1,$0:bg.attrVO(c0[0],c0[1])}:cX.$==8?{$:1,$0:cX.$0}:null;};bf.addClassX=function(cX,cY){var cZ;return b_.concat(" ",(cZ=new cK.New$1(cL.OfSeq(b_.SplitChars(cX,[" "],0))),new cK.New$1(cL.OfSeq(b8.append(new cK.New$1(cL.OfSeq(b_.SplitChars(cY,[" "],0))),cZ)))));};bo=bn.Button=ca.Class({OnClick:function(cX){return bo.New(this._class,this._type,this.style,this.text,cX,this.disabled,this.id);},Disabled:function(cX){return bo.New(this._class,this._type,this.style,this.text,this.onClick,bg.fixit(cX),this.id);},Text:function(cX){return bo.New(this._class,this._type,this.style,bg.fixit(cX),this.onClick,this.disabled,this.id);},Style:function(cX){return bo.New(this._class,this._type,bg.fixit(cX),this.text,this.onClick,this.disabled,this.id);},Type:function(cX){return bo.New(this._class,bg.fixit(cX),this.style,this.text,this.onClick,this.disabled,this.id);},Class:function(cX){return bo.New(bg.fixit(cX),this._type,this.style,this.text,this.onClick,this.disabled,this.id);},Id:function(cX){return bo.New(this._class,this._type,this.style,this.text,this.onClick,this.disabled,cX);},get_Render:function(){var cX,cY;return new bl({$:7,$0:(cX=bf.button([bf.type(this._type),bf["class"](this._class),bf.Id(this.id),bf.style(this.style),new bl({$:8,$0:(cY=cD.Const(""),cG.DynamicPred("disabled",bg.toView(this.disabled),cY))}),new bl({$:8,$0:cH.HandlerImpl("click",this.onClick)}),new bl({$:5,$0:this.text})]),(bf.renderDoc())(cX))});}},null,bo);bo.get_Render$3498$42=function(cX){return cX.onClick;};bo.New$1=function(cX){return bo.New(bg.fixit("btn"),bg.fixit("button"),bg.fixit(""),bg.fixit(cX),function(){return function(){return null;};},bg.fixit(false),"");};bo.New=function(cX,cY,cZ,c0,c1,c2,c3){return new bo({_class:cX,_type:cY,style:cZ,text:c0,onClick:c1,disabled:c2,id:c3});};bp=bn.Input=ca.Class({get_Var:function(){return this["var"];},Disabled:function(cX){return bp.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,bg.fixit(cX));},SetVar:function(cX){return bp.New(this._type,this._class,this.style,this.placeholder,this.id,cX,this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Suffix:function(cX){return bp.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,cX,this.content,this.prefixAdded,true,this.disabled);},Prefix:function(cX){return this.Prefix$1(bf.htmlText(cX));},Prefix$1:function(cX){return bp.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],cX,this.suffix,this.content,true,this.suffixAdded,this.disabled);},Content:function(cX){return bp.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,cX,this.prefixAdded,this.suffixAdded,this.disabled);},Id:function(cX){return bp.New(this._type,this._class,this.style,this.placeholder,cX,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Placeholder:function(cX){return bp.New(this._type,this._class,this.style,bg.fixit(cX),this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Style:function(cX){return bp.New(this._type,this._class,bg.fixit(cX),this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Type:function(cX){return bp.New(bg.fixit(cX),this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Class:function(cX){return bp.New(this._type,bg.fixit(cX),this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},get_Render:function(){var cX;function cY(cZ){return cZ.$==5?"input-group-addon":"input-group-btn";}cX=this;return bf.div(cm.ofSeq(b8.delay(function(){return b8.append(cX.prefixAdded||cX.suffixAdded?[bf["class"]("input-group")]:[],b8.delay(function(){return b8.append(cX.prefixAdded?[bf.span([bf["class"](cY(cX.prefix)),cX.prefix])]:[],b8.delay(function(){var cZ;return b8.append([new bl({$:7,$0:cE.Input(b8.append(cX.content,cm.ofArray([bf._type(cX._type),bf._class(cX._class),bf._style(cX.style),cH.Create("id",cX.id),(cZ=cD.Const(""),cG.DynamicPred("disabled",bg.toView(cX.disabled),cZ)),bf._placeholder(cX.placeholder)])),cX["var"])})],b8.delay(function(){return cX.suffixAdded?[bf.span([bf["class"](cY(cX.suffix)),cX.suffix])]:[];}));}));}));})));}},null,bp);bp.New$1=function(cX){return bp.New$3(bV.Lens(cX,function(cY){return cY==null?"":cY.$0;},function(cY,cZ){return cY==null?null:{$:1,$0:cZ};})).Disabled(bg.map(function(cY){return cY==null;},cX));};bp.New$2=function(cX){return bp.New$3(bV.Create$1(cX));};bp.New$3=function(cX){var cY;cY=bg.fixit("form-control");return bp.New(bg.fixit("text"),cY,bg.fixit(""),bg.fixit("Enter text:"),"",cX,bl.HtmlEmpty,bl.HtmlEmpty,cm.T.Empty,false,false,bg.fixit(false));};bp.New=function(cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8){return new bp({_type:cX,_class:cY,style:cZ,placeholder:c0,id:c1,"var":c2,prefix:c3,suffix:c4,content:c5,prefixAdded:c6,suffixAdded:c7,disabled:c8});};bq=bn.Hoverable=ca.Class({Content:function(cX){var cY;function cZ(c1,c2){return cY.hover.Set(true);}function c0(c1,c2){return cY.hover.Set(false);}cY=this;return cX.AddChildren([bf.classIf("hovering",this.hover),new bl({$:8,$0:cH.HandlerImpl("mouseenter",function(c1){return function(c2){return cZ(c1,c2);};})}),new bl({$:8,$0:cH.HandlerImpl("mouseleave",function(c1){return function(c2){return c0(c1,c2);};})})]);},Content$1:function(cX){var cY;function cZ(c1,c2){return cY.hover.Set(true);}function c0(c1,c2){return cY.hover.Set(false);}cY=this;return bf.div(b8.append(cX,cm.ofArray([bf.classIf("hovering",this.hover),new bl({$:8,$0:cH.HandlerImpl("mouseenter",function(c1){return function(c2){return cZ(c1,c2);};})}),new bl({$:8,$0:cH.HandlerImpl("mouseleave",function(c1){return function(c2){return c0(c1,c2);};})})])));}},null,bq);bq.get_Demo=function(){return bq.get_New().Content(bf.div([bf.style("flex-flow: column;")]));};bq.Content$3592$43=ca.Curried3(function(cX,cY,cZ){return cX.hover.Set(false);});bq.Content$3591$43=ca.Curried3(function(cX,cY,cZ){return cX.hover.Set(true);});bq.Content$3584$37=ca.Curried3(function(cX,cY,cZ){return cX.hover.Set(false);});bq.Content$3583$37=ca.Curried3(function(cX,cY,cZ){return cX.hover.Set(true);});bq.get_New=function(){return bq.New(bV.Create$1(false));};bq.New=function(cX){return new bq({hover:cX});};br=bn.Panel=ca.Class({Disabled:function(cX){return br.New(this._class,this._style,this.title,this.header,this.content,cX);},Content:function(cX){return br.New(this._class,this._style,this.title,this.header,cX,this.disabled);},Header:function(cX){return br.New(this._class,this._style,this.title,cX,this.content,this.disabled);},Title:function(cX){return br.New(this._class,this._style,bg.fixit(cX),this.header,this.content,this.disabled);},Style:function(cX){return br.New(this._class,bg.fixit(cX),this.title,this.header,this.content,this.disabled);},Class:function(cX){return br.New(bg.fixit(cX),this._style,this.title,this.header,this.content,this.disabled);},get_Render:function(){var cX;return bf.fieldset([new bl({$:8,$0:(cX=cD.Const(""),cG.DynamicPred("disabled",bg.toView(this.disabled),cX))}),bf.div([bf["class"](this._class),bf.div(b8.append([bf["class"]("panel-heading"),bf.label([bf["class"]("panel-title text-center"),bf.htmlText(this.title)])],this.header)),bf.div(b8.append([bf["class"]("panel-body"),bf.style(this._style)],this.content))])]);}},null,br);br.get_New=function(){return br.New(bg.fixit("panel panel-default shadow"),bg.fixit("text-align:center"),bg.fixit("Panel"),cm.ofArray([bf.htmlText("Some text")]),cm.ofArray([bf.htmlText("Some Content")]),bg.fixit(bV.Create$1(false)));};br.New=function(cX,cY,cZ,c0,c1,c2){return new br({_class:cX,_style:cY,title:cZ,header:c0,content:c1,disabled:c2});};bs=bn.TextArea=ca.Class({get_Var:function(){return this["var"];},Disabled:function(cX){return bs.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,this["var"],bg.fixit(cX));},SetVar:function(cX){return bs.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,cX,this.disabled);},Id:function(cX){return bs.New(this._class,this.placeholder,this.title,this.spellcheck,cX,this["var"],this.disabled);},Spellcheck:function(cX){return bs.New(this._class,this.placeholder,this.title,cX,this.id,this["var"],this.disabled);},Title:function(cX){return bs.New(this._class,this.placeholder,bg.fixit(cX),this.spellcheck,this.id,this["var"],this.disabled);},Placeholder:function(cX){return bs.New(this._class,bg.fixit(cX),this.title,this.spellcheck,this.id,this["var"],this.disabled);},Class:function(cX){return bs.New(bg.fixit(cX),this.placeholder,this.title,this.spellcheck,this.id,this["var"],this.disabled);},get_Render:function(){return this.RenderWith(cm.T.Empty);},RenderWith:function(cX){var cY,cZ;cY=this;return bf.div([bf.htmlElementF(function(c0){return function(){return cE.InputArea(c0,cY["var"]);};},cm.append(cm.ofArray([bf["class"](this._class),bf.Id(this.id),bf.spellcheck(bg.map(function(c0){return c0?"true":"false";},this.spellcheck)),bf.title(this.title),bf.style("height: 100%;  width: 100%; box-sizing: border-box; "),bf.placeholder(this.placeholder),new bl({$:8,$0:(cZ=cD.Const(""),cG.DynamicPred("disabled",bg.toView(this.disabled),cZ))})]),cX))]);}},null,bs);bs.New$1=function(cX){return bs.New$3(bV.Lens(cX,function(cY){return cY==null?"":cY.$0;},function(cY,cZ){return cY==null?null:{$:1,$0:cZ};})).Disabled(bg.map(function(cY){return cY==null;},cX));};bs.New$2=function(cX){return bs.New$3(bV.Create$1(cX));};bs.New$3=function(cX){return bs.New(bg.fixit("form-control"),bg.fixit("Enter text:"),bg.fixit(""),bg.fixit(false),"",cX,bg.fixit(false));};bs.New=function(cX,cY,cZ,c0,c1,c2,c3){return new bs({_class:cX,placeholder:cY,title:cZ,spellcheck:c0,id:c1,"var":c2,disabled:c3});};bt.New=function(cX,cY){return{line:cX,ch:cY};};bu=bn.CodeMirrorEditor=ca.Class({},i,bu);bu.New=ca.Ctor(function(){},bu);bv=bn.CodeMirror=ca.Class({get_Var:function(){return this["var"];},Disabled:function(cX){return bv.New(this._class,this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO,bg.fixit(cX));},OnRender:function(cX){return bv.New(this._class,this.style,this.id,this["var"],this.onChange,{$:1,$0:cX},this.editorO,this.disabled);},OnChange:function(cX){return bv.New(this._class,this.style,this.id,this["var"],cX,this.onRender,this.editorO,this.disabled);},Style:function(cX){return bv.New(this._class,bg.fixit(cX),this.id,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},SetVar:function(cX){return bv.New(this._class,this.style,this.id,cX,this.onChange,this.onRender,this.editorO,this.disabled);},Id:function(cX){return bv.New(this._class,this.style,cX,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},Class:function(cX){return bv.New(bg.fixit(cX),this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},get_Render:function(){var cX;cX=this;return bf.div([bf["class"](this._class),new bl({$:8,$0:cH.Create("id",this.id)}),bf.style("position: relative; height: 300px"),bf.style(this.style),bf.div([bf.style("height: 100%; width: 100%; position: absolute;"),new bl({$:8,$0:cG.OnAfterRender(function(cY){var cZ;b7.Start((cZ=null,b7.Delay(function(){return b7.Bind(bm.LoadFilesAsync(bn.codeMirrorIncludes()),function(){var c0,c1,c2,c3;c0=a.CodeMirror(cY,{theme:"rubyblue",lineNumbers:true,matchBrackets:true,gutters:["CodeMirror-lint-markers"],extraKeys:{Tab:function(c4){c4.replaceSelection("    ","end");},F11:function(c4){c4.setOption("fullScreen",!c4.getOption("fullScreen"));}}});cX.editorO={$:1,$0:c0};c1=cX.onRender;c1==null?void 0:c1.$0(c0);c2=[0];c3=[0];c0.on("changes",function(){var c4;c4=c0.getValue();cX["var"].Get()!==c4?(c2[0]=c2[0]+1,cX["var"].Set(c4),cX.onChange()):void 0;});cD.Sink(function(){if(c2[0]>c3[0])c3[0]=c2[0];else if(c0.getValue()!==cX["var"].Get()){c0.setValue(cX["var"].Get());c0.getDoc().clearHistory();}},cX["var"].get_View());bg.sink(function(c4){c0.setOption("readOnly",c4&&"nocursor");},cX.disabled);return b7.Zero();});})),null);})})]),bf.link([bf.href("/EPFileX/codemirror/content/editor.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/content/codemirror.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/display/fullscreen.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/dialog/dialog.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/hint/show-hint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/lint/lint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css(".CodeMirror { height: 100% }")]);}},null,bv);bv.New$1=function(cX){return bv.New$3(bV.Lens(cX,function(cY){return cY==null?"":cY.$0;},function(cY,cZ){return cY==null?null:{$:1,$0:cZ};})).Disabled(bg.map(function(cY){return cY==null;},cX));};bv.New$2=function(cX){return bv.New$3(bV.Create$1(cX));};bv.New$3=function(cX){return bv.New(bg.fixit(""),bg.fixit(""),"",cX,a.ignore,null,null,bg.fixit(false));};bv.New=function(cX,cY,cZ,c0,c1,c2,c3,c4){return new bv({_class:cX,style:cY,id:cZ,"var":c0,onChange:c1,onRender:c2,editorO:c3,disabled:c4});};bw.New=function(cX,cY,cZ){return{text:cX,displayText:cY,className:cZ};};bx.New=function(cX,cY,cZ){return{list:cX,from:cY,to:cZ};};by.New=function(cX,cY,cZ){return{hint:cX,completeSingle:cY,container:cZ};};bz.New=function(cX,cY,cZ,c0){return{message:cX,severity:cY,from:cZ,to:c0};};bA=bn.SplitterBar=ca.Class({Children:function(cX){return bA.New(this.value,this.min,this.max,this.vertical,this.node,cX,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_After:function(){return bA.New(this.value,this.min,this.max,this.vertical,this.node,this.children,true,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_Before:function(){return bA.New(this.value,this.min,this.max,this.vertical,this.node,this.children,false,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal:function(){return bA.New(this.value,this.min,this.max,bg.fixit(false),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical:function(){return bA.New(this.value,this.min,this.max,bg.fixit(true),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal$1:function(cX){return bA.New(this.value,this.min,this.max,bg.map(function(cY){return!cY;},bg.fixit(cX)),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical$1:function(cX){return bA.New(this.value,this.min,this.max,bg.fixit(cX),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Max:function(cX){return bA.New(this.value,this.min,bg.fixit(cX),this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Min:function(cX){return bA.New(this.value,bg.fixit(cX),this.max,this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Node:function(cX){return bA.New(this.value,this.min,this.max,this.vertical,cX,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Value:function(cX){this.value.Set(cX);return this;},get_Render:function(){var cX;function cY(c3){return cX.startVer?c3.clientX:c3.clientY;}function cZ(){var c3;c3=cX.domElem;return c3!=null&&c3.$==1?cX.startVer?cX.after?c3.$0.parentElement.getBoundingClientRect().width:-c3.$0.parentElement.getBoundingClientRect().width:cX.after?c3.$0.parentElement.getBoundingClientRect().height:-c3.$0.parentElement.getBoundingClientRect().height:100;}function c0(c3){cX.value.Set((cY(c3)-cX.start)*100/cX.size+cX.startP);}function c1(){if(cX.dragging){cX.dragging=false;a.removeEventListener("mousemove",c0,false);a.removeEventListener("mouseup",c1,false);}}function c2(c3,c4){return!cX.dragging?bg.iter(a.ignore,bg.map2(function(c5){return function(c6){cX.dragging=true;cX.startVer=c6;cX.startP=c5;cX.start=cY(c4);cX.size=cZ();a.addEventListener("mousemove",c0,false);a.addEventListener("mouseup",c1,false);return c4.preventDefault();};},cX.get_GetValue(),cX.vertical)):null;}cX=this;return this.node.AddChildren([bf["class"](bg.map(function(c3){return c3?"Vertical":"Horizontal";},this.vertical)),new bl({$:8,$0:cH.HandlerImpl("mousedown",function(c3){return function(c4){return c2(c3,c4);};})}),new bl({$:8,$0:cG.OnAfterRender(function(c3){cX.domElem={$:1,$0:c3};})}),bf.css("\n                    .Splitter.Vertical   { cursor: col-resize; background-color: #eef ; width : 5px ; margin-left:-7px; }\n                    .Splitter.Horizontal { cursor: row-resize; background-color: #eef ; height: 5px ; margin-top :-7px; }\n                ")]).AddChildren(this.children);},get_GetValue:function(){function cX(cZ,c0){return b9.Compare(cZ,c0)===-1?cZ:c0;}function cY(cZ,c0){return b9.Compare(cZ,c0)===1?cZ:c0;}return bg.map2(function(cZ){return function(c0){return cX(cZ,c0);};},this.max,bg.map2(function(cZ){return function(c0){return cY(cZ,c0);};},this.min,this.value));},get_Var:function(){return this.value;}},null,bA);bA.get_Render$3947$42=a.id;bA.New$1=function(cX){return bA.New$2(bV.Create$1(cX));};bA.New$2=function(cX){return bA.New(cX,bg.fixit(5),bg.fixit(95),bg.fixit(true),bf.div([bf["class"]("Splitter")]),cm.T.Empty,true,false,true,0,0,0,null);};bA.New=function(cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9){return new bA({value:cX,min:cY,max:cZ,vertical:c0,node:c1,children:c2,after:c3,dragging:c4,startVer:c5,startP:c6,start:c7,size:c8,domElem:c9});};bB.StFixedPerc={$:2};bB.StFixedPx={$:1};bB.StVariable={$:0};bC=bn.Grid=ca.Class({get_Render:function(){return bf.div(this.GridTemplate());},GridTemplate:function(){var cX;cX=this;return cm.ofSeq(b8.delay(function(){function cY(cZ,c0){return cZ!=null&&cZ.$==1?c0.AddChildren([bf.style((function(c1){return function(c2){return c1("grid-area: "+cb.toSafe(c2)+"; dispxlay: grid");};}(a.id))(cZ.$0))]):c0;}return b8.append(b8.map(function(cZ){return cY(cZ[0],cZ[1]);},cX.content),b8.delay(function(){function cZ(c0,c1){var c2;return c1.$==2?(c2=c1.$0,{$:1,$0:c2.get_Render().InsertChildren([bf.style1("grid-column",a.String(c0+(c2.after?2:1))),bf.style1("grid-row",(function(c3){return function(c4){return c3("1 / "+a.String(c4));};}(a.id))(cd.length(cX.rows)+1))])}):c1.$==1?null:null;}return b8.append(b8.choose(function(c0){return cZ(c0[0],c0[1]);},b8.indexed(cX.cols)),b8.delay(function(){function c0(c1,c2){var c3;return c2.$==2?(c3=c2.$0,{$:1,$0:c3.get_Render().InsertChildren([bf.style1("grid-row",a.String(c1+(c3.after?2:1))),bf.style1("grid-column",(function(c4){return function(c5){return c4("1 / "+a.String(c5));};}(a.id))(cd.length(cX.cols)+1))])}):c2.$==1?null:null;}return b8.append(b8.choose(function(c1){return c0(c1[0],c1[1]);},b8.indexed(cX.rows)),b8.delay(function(){return b8.append(cX.styles(),b8.delay(function(){return b8.append([bf.style((((ca.Curried3(function(c1,c2,c3){return c1("display: grid; grid-gap: "+c2.toFixed(6)+"px; padding: "+c3.toFixed(6)+"px; box-sizing: border-box");}))(a.id))(cX.gap))(cX.padding))],b8.delay(function(){return[new bl({$:8,$0:cG.OnAfterRender(function(c1){function c2(c4,c5){return!b9.Equals(c4.Get(),c5)?c4.Set(c5):null;}function c3(){var c4;c4=c1.getBoundingClientRect();c2(cX.widthHeight,[c4.width,c4.height]);}c3();bn.addResizeObserver(c3,c1);})})];}));}));}));}));}));}));},styles:function(){return cm.ofArray([bf.style1("grid-template-columns",this.style(this.cols,bg.map(function(cX){return cX[0];},this.widthHeight))),bf.style1("grid-template-rows",this.style(this.rows,bg.map(function(cX){return cX[1];},this.widthHeight)))]);},style:function(cX,cY){var cZ,c0,c1,c2;function c3(c6,c7){return function(c8){return c8.$==2?[bg.map2(function(c9){return function(c_){return c9+c_;};},c8.$0.get_GetValue(),c6),c7]:c8.$==1?c8.$0.$==1?[c6,bg.map2(function(c9){return function(c_){return c9+c_;};},c8.$0.$0,c7)]:[bg.map2(function(c9){return function(c_){return c9+c_;};},c8.$0.$0,c6),c7]:[c6,c7];};}function c4(c6){return bg.map2(function(c7){return function(c8){var c9,c_,c$;c9=(c_=c7*c8,(c$=0,b9.Compare(c$,c_)===1?c$:c_));return(function(da){return function(db){return da(db.toFixed(6)+"%");};}(a.id))(c9);};},c1,c6);}function c5(c6){return bg.map(function(c7){var c8,c9;c8=(c9=0,b9.Compare(c9,c7)===1?c9:c7);return(function(c_){return function(c$){return c_(c$.toFixed(6)+"px");};}(a.id))(c8);},c6);}cZ=this;return cd.length(cX)===0?new bg({$:0,$0:"100%"}):(c0=b8.fold(function(c6,c7){return(function(c8){return c3(c8[0],c8[1]);}(c6))(c7);},[new bg({$:0,$0:0}),new bg({$:0,$0:0})],cX),(c1=bg.map2(function(c6){return function(c7){return(c7-cZ.padding*2-cZ.gap*(cd.length(cX)-1)-c6)/(c7-cZ.padding*2);};},c0[1],cY),(c2=bg.map(function(c6){return 100-c6;},c0[0]),bg.map(function(c6){return b_.concat(" ",c6);},b8.foldBack(function(c6,c7){function c8(c9,c_){return new cm.T({$:1,$0:c_,$1:c9});}return bg.map2(function(c9){return function(c_){return c8(c9,c_);};},c7,c6.$==2?c4(c6.$0.get_GetValue()):c6.$==1?c6.$0.$==1?c5(c6.$0.$0):c4(c6.$0.$0):c4(c2));},cX,new bg({$:0,$0:cm.T.Empty}))))));},Children:function(cX){return this.changeSplitter(function(cY){return cY.Children(cX);});},Min:function(cX){return this.changeSplitter(function(cY){return cY.Min(cX);});},Max:function(cX){return this.changeSplitter(function(cY){return cY.Max(cX);});},get_Before:function(){return this.changeSplitter(function(cX){return cX.get_Before();});},changeSplitter:function(cX){var cY,cZ,c0,c1,c2,c3;cY=this;cZ=this.lastSplitter;cZ==null?void 0:(c0=cZ.$0,c1=c0[0],c0[1]?(c2=cd.get(cY.cols,c1),c2.$==2?cd.set(cY.cols,c1,{$:2,$0:cX(c2.$0)}):void 0):(c3=cd.get(cY.rows,c1),c3.$==2?cd.set(cY.rows,c1,{$:2,$0:cX(c3.$0)}):void 0));return this;},Gap:function(cX){return bC.New(this.padding,cX,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Padding:function(cX){return bC.New(cX,this.gap,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content:function(cX){return bC.New(this.padding,this.gap,this.content.concat([[null,cX]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content$1:function(cX,cY){return bC.New(this.padding,this.gap,this.content.concat([[{$:1,$0:cX},cY]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},RowAuto:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:0,$0:bA.New$1(cX).Horizontal()}]),this.widthHeight,this.lastSplitter);},RowVariable:function(cX){return this.NewSplitter$1(cX,false);},RowVariable$1:function(cX){return this.NewSplitter(cX,false);},RowVariable$2:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cX}]),this.widthHeight,this.lastSplitter);},RowFixed:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:0,$0:bg.fixit(cX)}}]),this.widthHeight,this.lastSplitter);},RowFixedPx:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:1,$0:bg.fixit(cX)}}]),this.widthHeight,this.lastSplitter);},ColAuto:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols.concat([{$:0,$0:bA.New$1(cX)}]),this.rows,this.widthHeight,this.lastSplitter);},ColVariable:function(cX){return this.NewSplitter$1(cX,true);},ColVariable$1:function(cX){return this.NewSplitter(cX,true);},ColVariable$2:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cX}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixed:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:0,$0:bg.fixit(cX)}}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixedPx:function(cX){return bC.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:1,$0:bg.fixit(cX)}}]),this.rows,this.widthHeight,this.lastSplitter);},NewSplitter:function(cX,cY){return this.NewSplitter$1(bV.Create$1(cX),cY);},NewSplitter$1:function(cX,cY){var cZ,c0,c1;cZ=bA.New$2(cX);return cY?(c0={$:1,$0:[cd.length(this.cols),cY]},bC.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cZ}]),this.rows,this.widthHeight,c0)):(c1={$:1,$0:[cd.length(this.rows),cY]},bC.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cZ.Horizontal()}]),this.widthHeight,c1));}},null,bC);bC.NewBisect=function(cX,cY,cZ,c0,c1,c2){var c3,c4,c5;c3=cZ?[cY.$==1?function(c6){return c6.ColFixedPx(c0);}:cY.$==2?function(c6){return c6.ColFixed(c0);}:function(c6){return c6.ColVariable(c0);},function(c6){return c6.ColAuto(50);},function(c6){return c6.Content(bf.style("grid-template-areas: 'one   two' "));}]:[cY.$==1?function(c6){return c6.RowFixedPx(c0);}:cY.$==2?function(c6){return c6.RowFixed(c0);}:function(c6){return c6.RowVariable(c0);},function(c6){return c6.RowAuto(50);},function(c6){return c6.Content(bf.style("grid-template-areas: 'one' 'two' "));}];c4=c3[0];c5=c3[1];return(cX?function(c6){return c5(c4(c6));}:function(c6){return c4(c5(c6));})(c3[2](bC.get_New().Content$1("one",c1).Content$1("two",c2).Padding(0)));};bC.get_New=function(){return bC.New(9,9,[],[],[],bV.Create$1([1000,100]),null);};bC.New=function(cX,cY,cZ,c0,c1,c2,c3){return new bC({padding:cX,gap:cY,content:cZ,cols:c0,rows:c1,widthHeight:c2,lastSplitter:c3});};bD=bn.TabStrip=ca.Class({get_Render:function(){var cX,cY,cZ,c0;function c1(c3,c4){return c4.preventDefault();}function c2(c3,c4){c4.preventDefault();return cX.reorder(cd.length(cX.tabs.Get()));}cX=this;cY=bf.bindHElem(function(c3){return bf.div(cm.ofSeq(b8.delay(function(){return b8.append([bf["class"]((((ca.Curried3(function(c4,c5,c6){return c4("tab-strip "+cb.toSafe(c5)+" "+cb.toSafe(c6));}))(a.id))(cX.top?"top":"bottom"))(cX.horizontal?"horizontal":"vertical"))],b8.delay(function(){return b8.collect(function(c4){var c5;function c6(c_,c$){return c$.preventDefault();}function c7(c_,c$){(bn.draggedTab())[0]={$:1,$0:[cX,c5]};}function c8(c_,c$){c$.preventDefault();c$.stopPropagation();return cX.reorder(c5);}function c9(c_,c$){return cX.selected.Set(c5);}c5=c4[0];return[bq.get_New().Content(bf.div([bf.htmlText(c4[1][1][0]),bf["class"](bg.map(function(c_){return"tab"+(c_===c5?" selected":"");},cX.selected)),bf.draggable("true"),new bl({$:8,$0:cH.HandlerImpl("dragover",function(c_){return function(c$){return c6(c_,c$);};})}),new bl({$:8,$0:cH.HandlerImpl("drag",function(c_){return function(c$){return c7(c_,c$);};})}),new bl({$:8,$0:cH.HandlerImpl("drop",function(c_){return function(c$){return c8(c_,c$);};})}),new bl({$:8,$0:cH.HandlerImpl("click",function(c_){return function(c$){return c9(c_,c$);};})})]))];},b8.indexed(c3));}));})));},this.tabs);bg.sink((cZ=this.id,function(c3){bn.setSelectedPanel(cZ,c3);}),this.get_Selected());c0=bf.bindHElem(function(c3){return bf.div(cm.ofSeq(b8.delay(function(){return b8.append([bf["class"]("tab-children")],b8.delay(function(){return b8.append([bf.Id(bn.uid2s(cX.id))],b8.delay(function(){function c4(c5,c6){return c6[1].AddChildren([bf.style(bg.map(function(c7){return b8.contains(c5,b8.map(function(c8){return c8[1];},cy.ToSeq(c7)))?"":"display : none";},bn.selectedPanels())),bf.Id(bn.uid2s(c5))]);}return b8.map(function(c5){return c4(c5[0],c5[1]);},c3);}));}));})));},this.tabs);return bf.div([bf["class"]("tab-panel"),this.top?cY:bl.HtmlEmpty,bf.div([c0,bf["class"]("tab-content")]),!this.top?cY:bl.HtmlEmpty,new bl({$:8,$0:cH.HandlerImpl("dragover",function(c3){return function(c4){return c1(c3,c4);};})}),new bl({$:8,$0:cH.HandlerImpl("drop",function(c3){return function(c4){return c2(c3,c4);};})}),bf.css("\n    \n    .tab-panel {\n     overflow  : hidden   ;\n     display   : flex     ;\n     flex-flow : column   ;\n     background: lightgray;\n    }\n    .tab-content {\n     flex      : 1 1     ;\n     overflow  : auto    ;\n     position  : relative;\n    }\n    .tab-children {\n     height    : 100%    ;\n     width     : 100%    ;\n     position  : absolute;\n     display   : grid    ;\n    }\n    .tab-strip {\n     padding   : 0pt     ;\n     flex      : 0 0     ;\n    }\n    .tab {\n     border     : 0.2pt solid transparent;\n     padding    : 0pt 4pt;\n     display    : inline-block;\n     font-family: sans-serif;\n     font-weight: 200;\n     font-size  : small;\n     color      : #666;\n     cursor     : pointer;\n    }\n    .top>.tab {\n     border-radius: 2pt 2pt 0pt 0pt;\n     border-bottom-width: 0pt;\n     vertical-align: bottom;\n    }\n    .bottom>.tab {\n     border-top-width: 0pt;\n     border-radius: 0pt 0pt 2pt 2pt;\n     vertical-align: top;\n    }\n    .horizontal>.tab:not(:first-child) {\n     border-left-width: 0pt;\n    }\n    .tab.hovering {\n     background: red;\n    }\n    .tab.selected {\n     background: white;\n     border-left-width: 0.2pt;\n     color: black;\n     font-weight: 500;\n     border-color: black;\n    }\n    .horizontal>.tab.selected {\n     border-left-width: 0.2pt;\n    }\n    ")]);},Select:function(cX){var cY,cZ;function c0(c1,c2){return b9.Equals(c2[0],cX)?(cY.selected.Set(c1),{$:1,$0:true}):null;}cY=this;cZ=b8.tryPick(function(c1){return c0(c1[0],c1[1]);},b8.indexed(this.tabs.Get()));return cZ==null?false:cZ.$0;},Select$1:function(cX){var cY,cZ;function c0(c1,c2){return c2[1][0]===cX?(cY.selected.Set(c1),{$:1,$0:true}):null;}cY=this;cZ=b8.tryPick(function(c1){return c0(c1[0],c1[1]);},b8.indexed(this.tabs.Get()));return cZ==null?false:cZ.$0;},Select$2:function(cX){this.selected.Set(cX);},get_Selected:function(){return bg.map2(function(cX){return function(cY){var cZ;cZ=b8.tryItem(cY,cX);return cZ==null?null:{$:1,$0:cZ.$0[0]};};},this.tabs,this.selected);},get_Vertical:function(){return bD.New(this.selected,this.tabs,this.top,false,this.id);},get_Horizontal:function(){return bD.New(this.selected,this.tabs,this.top,true,this.id);},SetTop:function(cX){return bD.New(this.selected,this.tabs,cX,this.horizontal,this.id);},get_Bottom:function(){return bD.New(this.selected,this.tabs,false,this.horizontal,this.id);},get_Top:function(){return bD.New(this.selected,this.tabs,true,this.horizontal,this.id);},reorder:function(cX){var cY,cZ,c0;c0=(bn.draggedTab())[0];if(c0!=null&&c0.$==1){if(!b9.Equals(c0.$0[0].id,this.id))this.moveTab(c0.$0[0],c0.$0[1],cX);else if(c0!=null&&c0.$==1){cY=c0.$0[1];this.tabs.Set(bn.reorderArray(this.tabs.Get(),cY,cX));cZ=this.selected.Get();this.selected.Set(cZ===cY?cX:cZ<cY&&cZ<cX||cZ>cY&&cZ>cX?cZ:cZ<cY?cZ+1:cZ-1);}else throw new cM.New("Compiled\\FSharpStation2\\FSharpStation.fs",4245,18);}else void 0;},moveTab:function(cX,cY,cZ){var c0,c1,c2,c3;c0=this.tabs.Get();c1=cX.tabs.Get();c2=cd.collect(a.id,[cC.array(c0,{$:1,$0:0},{$:1,$0:cZ-1}),[cd.get(c1,cY)],cC.array(c0,{$:1,$0:cZ},{$:1,$0:cd.length(c0)-1})]);c3=cd.collect(a.id,[cC.array(c1,{$:1,$0:0},{$:1,$0:cY-1}),cC.array(c1,{$:1,$0:cY+1},{$:1,$0:cd.length(c1)-1})]);cX.tabs.Set(c3);this.tabs.Set(c2);this.selected.Set(cZ);cX.selected.Get()>=cd.length(c3)?cX.selected.Set(0):void 0;bn.RaiseTabMoved(cX,this);}},null,bD);bD.get_Render$4316$42=ca.Curried3(function(cX,cY,cZ){cZ.preventDefault();return cX.reorder(cd.length(cX.tabs.Get()));});bD.get_Render$4315$42=ca.Curried3(function(cX,cY,cZ){return cZ.preventDefault();});bD.get_Render$4291$70=function(cX,cY){return function(){return function(){return cY.selected.Set(cX);};};};bD.get_Render$4290$70=function(cX,cY){return function(){return function(cZ){cZ.preventDefault();cZ.stopPropagation();return cY.reorder(cX);};};};bD.get_Render$4289$70=function(cX,cY){return function(){return function(){(bn.draggedTab())[0]={$:1,$0:[cX,cY]};};};};bD.get_Render$4288$70=ca.Curried3(function(cX,cY,cZ){return cZ.preventDefault();});bD.New$1=function(cX){return bD.New$2(bV.Create$1(cd.ofSeq(b8.map(function(cY){return[cl.NewGuid(),cY];},cX))));};bD.New$2=function(cX){return bD.New(bV.Create$1(0),cX,false,true,cl.NewGuid());};bD.New=function(cX,cY,cZ,c0,c1){return new bD({selected:cX,tabs:cY,top:cZ,horizontal:c0,id:c1});};bE=bn.MenuEntry=ca.Class({get_MenuNode:function(){return new bF({$:1,$0:this});},SubMenu:function(cX){return bE.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bG.New2(cX).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},SubMenu$1:function(cX){return bE.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bG.New$1(cX).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},Disabled:function(cX){return bE.New(this.text,this.ref,this.active,bg.fixit(cX),this.subMenu,this.toolTip,this.target,this.divider,this.onClick);},OnClick:function(cX){return bE.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,this.divider,{$:1,$0:cX});},get_Divider:function(){return bE.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,true,this.onClick);},Target:function(cX){return bE.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,{$:1,$0:cX},this.divider,this.onClick);},get_Render:function(){var cX,cY,cZ,c0,c1,c2,c3,c4,c5;return(this.divider?function(c6){return bf.addClass("divider",c6);}:a.id)((cX=(cY=(cZ=(c0=bn.entryTxt(this.text,(c1=this.target,c1==null?"":c1.$0),this.ref),(bf.addClassIf("active",this.active))(c0)),(bf.addClassIf("disabled",this.disabled))(cZ)),(c2=this.subMenu,(c2!=null&&c2.$==1?(c3=cm.ofArray([bf["class"]("dropdown"),c2.$0.get_Render()]),function(c6){return bf.addChildren(c3,c6);}):a.id)(cY))),(c4=this.onClick,(c4!=null&&c4.$==1?(c5=cm.ofArray([new bl({$:8,$0:cH.HandlerImpl("click",c4.$0)}),bf.style("cursor : pointer")]),function(c6){return bf.addChildren(c5,c6);}):a.id)(cX))));}},null,bE);bE.get_Render$4429$104=a.id;bE.New$1=function(cX,cY){var cZ;cZ=bE.New$2(cX);return bE.New(cZ.text,bg.map(function(c0){return{$:1,$0:c0};},cY),cZ.active,cZ.disabled,cZ.subMenu,cZ.toolTip,cZ.target,cZ.divider,cZ.onClick);};bE.New$2=function(cX){var cY,cZ;cY=bg.fixit(cX);cZ=bg.fixit(false);return bE.New(cY,new bg({$:0,$0:null}),cZ,bg.fixit(false),null,null,null,false,null);};bE.New=function(cX,cY,cZ,c0,c1,c2,c3,c4,c5){return new bE({text:cX,ref:cY,active:cZ,disabled:c0,subMenu:c1,toolTip:c2,target:c3,divider:c4,onClick:c5});};bF=bn.MenuNode=ca.Class({get_Render:function(){return this.$==1?this.$0.get_Render():this.$0;}},null,bF);bG=bn.Menu=ca.Class({get_Render:function(){var cX;cX=this;return(this.dropdown?bn.dropdown:bn.nav)(cm.ofSeq(b8.delay(function(){return b8.map(function(cY){return cY.get_Render();},cX.entries);})));},get_DropDown:function(){return bG.New(this.entries,true);}},null,bG);bG.New2=function(cX){return bG.New$1(b8.map(function(cY){return new bF({$:1,$0:cY});},cX));};bG.New$1=function(cX){return bG.New(cX,false);};bG.New=function(cX,cY){return new bG({entries:cX,dropdown:cY});};bH=bn.Action=ca.Class({get_Button:function(){var cX,cY,cZ;function c0(c1,c2){return null;}cX=(cY=(cZ=this.onClick,cZ==null?null:{$:1,$0:cZ.$0(this)}),cY==null?function(c1){return function(c2){return c0(c1,c2);};}:cY.$0);return bo.New(bg.map(function(c1){return c1?"btn btn-primary":"btn";},this.highlight),bg.fixit("button"),bg.fixit(""),this.text,cX,this.disabled,"");},get_MenuEntry:function(){var cX,cY;cX=(cY=this.onClick,cY==null?null:{$:1,$0:cY.$0(this)});return bE.New(this.text,new bg({$:0,$0:null}),this.highlight,this.disabled,null,this.toolTip,null,false,cX);},Highlight:function(cX){return bH.New(this.text,bg.fixit(cX),this.disabled,this.toolTip,this.onClick,this.parms);},Disabled:function(cX){return bH.New(this.text,this.highlight,bg.fixit(cX),this.toolTip,this.onClick,this.parms);},OnClick2:function(cX){return bH.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:cX},this.parms);},OnClick:function(cX){return bH.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:function(){return cX;}},this.parms);},Parms:function(cX){return bH.New(this.text,this.highlight,this.disabled,this.toolTip,this.onClick,{$:1,$0:cX});},Text:function(cX){return bH.New(bg.fixit(cX),this.highlight,bg.fixit(false),this.toolTip,this.onClick,this.parms);}},null,bH);bH.New$1=function(cX){return bH.New(bg.fixit(cX),bg.fixit(false),bg.fixit(false),null,null,null);};bH.New=function(cX,cY,cZ,c0,c1,c2){return new bH({text:cX,highlight:cY,disabled:cZ,toolTip:c0,onClick:c1,parms:c2});};bI=bn.GuiPart=ca.Class({GetHtmlNode:function(cX,cY){var cZ,c0,c1,c2,c3,c4;return this.$==1?[this.$0,a.ignore]:this.$==2?[this.$0.get_Button().get_Render(),a.ignore]:this.$==5?[cX.GetCallButton(this.$0,this.$1,this.$2),a.ignore]:this.$==4?(cZ=bD.New$1(b8.map(function(c5){return[c5,cX.GetNode(c5)];},this.$1)).SetTop(this.$0),(bn.addValue(cY,cZ,cX.tabStrips),[cZ.get_Render(),a.ignore])):this.$==3?(c0=this.$3,(c1=bV.Create$1(this.$6),(c2=bV.Create$1(this.$7),(c3=bV.Create$1(c0),(c4=[c0],[bC.NewBisect(this.$0,this.$1,this.$2,c3,cX.GetNode(this.$4),cX.GetNode(this.$5)).Min(c1).Max(c2).get_Render(),function(c5){var c6;if(c5.$==3){c6=c5.$3;c4[0]!==c6?(c4[0]=c6,c3.Set(c6)):void 0;c1.Set(c5.$6);c2.Set(c5.$7);}}]))))):[bl.HtmlEmpty,a.ignore];}},null,bI);bJ.New=function(cX,cY,cZ,c0,c1,c2,c3){return{HtmlElementF:cX,HtmlAttributeF:cY,HtmlAttributeOF:cZ,HtmlTextF:c0,HtmlEmptyF:c1,HtmlGuiPart:c2,HtmlGuiCall:c3};};bK.New=function(cX,cY,cZ,c0,c1){return{GuiRoot:cX,GuiTabStrip:cY,GuiSplit:cZ,GuiNode:c0,GuiCall:c1};};bL.get_New=function(){return{$:0,$0:cl.NewGuid()};};bM=bn.Layout=ca.Class({SelectTab:function(cX){b8.iter(function(cY){cY.Select$1(cX);},this.tabStrips.get_Values());},SetLayoutJson:function(cX,cY){var cZ,c2;function c0(c4){var c5,c6,c7,c8,c9,c_,c$;c5=bn.PHtmlElementF(c4);return c5!=null&&c5.$==1?{$:1,$0:new bl({$:0,$0:c5.$0[0],$1:b8.choose(c0,c5.$0[1])})}:(c6=bn.PHtmlAttributeF(c4),c6!=null&&c6.$==1?{$:1,$0:new bl({$:3,$0:c6.$0[0],$1:new bg({$:0,$0:c6.$0[1]})})}:(c7=bn.PHtmlAttributeOF(c4),c7!=null&&c7.$==1?{$:1,$0:new bl({$:4,$0:c7.$0[0],$1:new bg({$:0,$0:c7.$0[1]})})}:(c8=bn.PHtmlTextF(c4),c8!=null&&c8.$==1?{$:1,$0:new bl({$:5,$0:new bg({$:0,$0:c8.$0})})}:(c9=bn.PHtmlEmptyF(c4),c9!=null&&c9.$==1)?{$:1,$0:bl.HtmlEmpty}:(c_=bn.PHtmlGuiPart(c4),c_!=null&&c_.$==1?{$:1,$0:c2.GetNode(c_.$0)}:(c$=bn.PHtmlGuiCall(c4),c$!=null&&c$.$==1?{$:1,$0:c2.GetCallButton(c$.$0[0],c$.$0[1],c$.$0[2])}:null)))));}function c1(c4){var c5,c6,c7,c8,c9,c_;c5=bn.PGuiNode(c4);return c5!=null&&c5.$==1?{$:1,$0:new bI({$:1,$0:g.defaultValue(bl.HtmlEmpty,c0(c5.$0))})}:(c6=bn.PGuiRoot(c4),c6!=null&&c6.$==1?{$:1,$0:new bI({$:0,$0:c6.$0})}:(c7=bn.PGuiTabStrip(c4),c7!=null&&c7.$==1?{$:1,$0:(c8=c7.$0,new bI({$:4,$0:c8[0],$1:c8[1]}))}:(c9=bn.PGuiSplit(c4),c9!=null&&c9.$==1?{$:1,$0:new bI({$:3,$0:c9.$0[0],$1:bn.toSect(c9.$0[1]),$2:c9.$0[2],$3:c9.$0[3],$4:c9.$0[4],$5:c9.$0[5],$6:c9.$0[6],$7:c9.$0[7]})}:(c_=bn.PGuiCall(c4),c_!=null&&c_.$==1?{$:1,$0:new bI({$:5,$0:c_.$0[0],$1:c_.$0[1],$2:c_.$0[2]})}:null))));}c2=this;function c3(c4,c5){var c6;c6=c1(c5);return c6==null?null:{$:1,$0:[c4,{$:1,$0:c5},c6.$0]};}try{cZ=this.AddNewSteps(cX,cY===""?[]:cd.choose(function(c4){return c3(c4[0],c4[1]);},((cr.DecodeArray(cr.DecodeTuple([cr.Id(),b3.j$12])))())(co.parse(cY))));}catch(c4){cZ=(function(c5){return function(c6){return c5("Error: "+cb.prettyPrint(c6));};}(function(c5){ce.log(c5);}))(c4);}},AddNewSteps:function(cX,cY){var cZ;function c0(c2,c3,c4){var c5,c6;if(cZ.parts.ContainsKey(c2)){c5=cZ.parts.get_Item(c2);c6=c5[0];b9.Equals((c6.Get())[0],c3)?bg.iter(a.ignore,bg.apply(new bg({$:0,$0:c4}),c5[2])):c6.Set([c3,c4]);}else cZ.AddNode(c2,c3,c4);}function c1(c2,c3){return b8.last(c3);}cZ=this;cd.iter(function(c2){return c0(c2[0],c2[1],c2[2]);},cd.map(function(c2){return c1(c2[0],c2[1]);},cd.groupBy(function(c2){return a.id(c2[0],c2[1],c2[2]);},cX.concat(cY))));},get_Render:function(){function cX(cY){var cZ;cZ=cY.Get();return cZ[1].$==0?{$:1,$0:cZ[1].$0}:null;}return this.GetNode(g.defaultValue("main",b8.tryPick(function(cY){return cX(bn.t1of3.apply(null,cY));},this.parts.get_Values())));},GetNode:function(cX){var cY;cY=null;return this.parts.TryGetValue(cX,{get:function(){return cY;},set:function(cZ){cY=cZ;}})?bn.t2of3(cY[0],cY[1],cY[2]):this.AddNode(cX,bL.get_New(),new bI({$:1,$0:bf.div([bf.htmlText((function(cZ){return function(c0){return cZ("GuiPart "+cb.toSafe(c0)+" not found");};}(a.id))(cX))])}));},AddNode:function(cX,cY,cZ){var c0,c1,c2,c3;function c4(c5,c6){return c6.GetHtmlNode(c0,cX);}c0=this;c1=bV.Create$1([cY,cZ]);c2=bg.map(function(c5){return c4(c5[0],c5[1]);},c1);c3=new bl({$:2,$0:bg.map(function(c5){return c5[0];},c2)});this.parts.Add(cX,[c1,c3,bg.map(function(c5){return c5[1];},c2)]);return c3;},GetCallButton:function(cX,cY,cZ){var c0;c0=m.Success(this.GetGuiCallAction(cX,cY,cZ));return c0.$==1?bf.div([bf.htmlText(b_.concat(". ",m.msgs2String(c0.$0)))]):c0.$0[0].get_Button().get_Render();},GetGuiCallAction:function(cX,cY,cZ){var c0;return this.parts.ContainsKey(cY)?(c0=(this.parts.get_Item(cY))[0].Get(),c0[1].$==2?m.succeed(c0[1].$0.Text(cX).Parms(cd.map(a.id,cZ))):m.failSimpleError((function(c1){return function(c2){return c1("GuiPart "+cb.toSafe(c2)+" is not a GuiAction");};}(a.id))(cY))):m.failSimpleError((function(c1){return function(c2){return c1("GuiAction "+cb.toSafe(c2)+" not found");};}(a.id))(cY));}},null,bM);bM.New$1=function(cX){var cY;function cZ(c0,c1,c2){cY.AddNode(c0,c1,c2);}cY=bM.New(new ci.New$5(),new ci.New$5());b8.iter(function(c0){return cZ(c0[0],c0[1],c0[2]);},cX);return cY;};bM.AddGuids=function(cX){function cY(cZ,c0){return[cZ,c0.$==2?bL.get_New():c0.$==0?{$:2,$0:c0.$0}:c0.$==3?{$:4,$0:c0.$0,$1:c0.$1,$2:c0.$2,$3:c0.$4,$4:c0.$5}:c0.$==4?{$:3,$0:c0.$0,$1:c0.$1}:c0.$==5?{$:5,$0:c0.$0,$1:c0.$1,$2:c0.$2}:bL.get_New(),c0];}return cd.ofSeq(b8.map(function(cZ){return cY(cZ[0],cZ[1]);},cX));};bM.New=function(cX,cY){return new bM({parts:cX,tabStrips:cY});};bn.varVerSplitter=function(cX,cY,cZ,c0,c1){return new bI({$:3,$0:true,$1:bB.StVariable,$2:true,$3:cX,$4:cY,$5:cZ,$6:c0,$7:c1});};bn.varHorSplitter=function(cX,cY,cZ,c0,c1){return new bI({$:3,$0:true,$1:bB.StVariable,$2:false,$3:cX,$4:cY,$5:cZ,$6:c0,$7:c1});};bn.fixPcVerSplitter=function(cX,cY,cZ,c0){return new bI({$:3,$0:cX,$1:bB.StFixedPerc,$2:true,$3:cY,$4:cZ,$5:c0,$6:5,$7:95});};bn.fixPcHorSplitter=function(cX,cY,cZ,c0){return new bI({$:3,$0:cX,$1:bB.StFixedPerc,$2:false,$3:cY,$4:cZ,$5:c0,$6:5,$7:95});};bn.fixedVerSplitter=function(cX,cY,cZ,c0){return new bI({$:3,$0:cX,$1:bB.StFixedPx,$2:true,$3:cY,$4:cZ,$5:c0,$6:5,$7:95});};bn.fixedHorSplitter=function(cX,cY,cZ,c0){return new bI({$:3,$0:cX,$1:bB.StFixedPx,$2:false,$3:cY,$4:cZ,$5:c0,$6:5,$7:95});};bn.t3of3=function(cX,cY,cZ){return cZ;};bn.t2of3=function(cX,cY,cZ){return cY;};bn.t1of3=a.id;bn.toSect=function(cX){return cX==="StVariable"?bB.StVariable:cX==="StFixedPx"?bB.StFixedPx:bB.StFixedPerc;};bn.PGuiCall=function(cX){return cX.GuiCall;};bn.PGuiNode=function(cX){return cX.GuiNode;};bn.PGuiRoot=function(cX){return cX.GuiRoot;};bn.PGuiSplit=function(cX){return cX.GuiSplit;};bn.PGuiTabStrip=function(cX){return cX.GuiTabStrip;};bn.PHtmlGuiCall=function(cX){return cX.HtmlGuiCall;};bn.PHtmlGuiPart=function(cX){return cX.HtmlGuiPart;};bn.PHtmlEmptyF=function(cX){return cX.HtmlEmptyF;};bn.PHtmlTextF=function(cX){return cX.HtmlTextF;};bn.PHtmlAttributeOF=function(cX){return cX.HtmlAttributeOF;};bn.PHtmlAttributeF=function(cX){return cX.HtmlAttributeF;};bn.PHtmlElementF=function(cX){return cX.HtmlElementF;};bn.addValue=function(cX,cY,cZ){cZ.Remove(cX);cZ.Add(cX,cY);};bn.processLayoutSteps=function(cX,cY){var cZ,c0;return g.defaultValue(cY,(cZ=b8.tryHead(cX),cZ==null?null:{$:1,$0:(c0=cZ.$0,bn.processLayoutSteps(b8.skip(1,cX),cY.Add(c0[0],c0[1])))}));};bn.HtmlGuiCall=function(cX,cY,cZ){return new bI({$:5,$0:cX,$1:cY,$2:cZ});};bn.Do2=function(cX,cY,cZ,c0,c1){return cX(cZ,cY);};bn.Do=function(cX,cY,cZ,c0){return cX(cY);};bn.navbar=function(cX,cY,cZ){return bf.div([bf["class"]("navbar navbar-default"),bf.div([bf["class"]("container-fluid"),bf.div([bf["class"]("navbar-header"),bf.div([bf["class"]("navbar-brand"),cX])]),bf.div([bf["class"]("navbar-collapse collapse"),cY,bf.addClass("navbar-right",cZ)])])]);};bn.dropdown=function(cX){return bn.entries(cX,"dropdown-menu");};bn.nav=function(cX){return bn.entries(cX,"nav navbar-nav");};bn.entries=function(cX,cY){return bf.addClass(cY,bf.ul(cX));};bn.entryTxt=function(cX,cY,cZ){return bn.menuEntry(bn.refText(cX,cY,cZ));};bn.refText=function(cX,cY,cZ){return bf.bindHElem(function(c0){return c0===""?bl.HtmlEmpty:bn.refA(bf.htmlText(c0),c0,cZ);},cX);};bn.refA=function(cX,cY,cZ){return bf.a([cX,bf.hrefO(cZ),bf.target(cY)]);};bn.menuEntry=function(cX){return bf.li([cX]);};bn.RaiseTabMoved=function(cX,cY){var cZ;cZ=bn.TabMoved();cZ==null?void 0:cZ.$0([cX,cY]);};bn.TabMoved=function(){b2.$cctor();return b2.TabMoved;};bn.set_TabMoved=function(cX){b2.$cctor();b2.TabMoved=cX;};bn.setSelectedPanel=function(cX,cY){bn.selectedPanels().Set(cY==null?bn.selectedPanels().Get().Remove(cX):bn.selectedPanels().Get().Add(cX,cY.$0));};bn.selectedPanels=function(){b2.$cctor();return b2.selectedPanels;};bn.uid2s=function(cX){return"X"+b_.Replace(a.String(cX),"-","");};bn.draggedTab=function(){b2.$cctor();return b2.draggedTab;};bn.reorderArray=function(cX,cY,cZ){return cd.collect(a.id,cZ<cY?[cC.array(cX,{$:1,$0:0},{$:1,$0:cZ-1}),[cd.get(cX,cY)],cC.array(cX,{$:1,$0:cZ},{$:1,$0:cY-1}),cC.array(cX,{$:1,$0:cY+1},{$:1,$0:cd.length(cX)-1})]:[cC.array(cX,{$:1,$0:0},{$:1,$0:cY-1}),cC.array(cX,{$:1,$0:cY+1},{$:1,$0:cZ}),[cd.get(cX,cY)],cC.array(cX,{$:1,$0:cZ+1},{$:1,$0:cd.length(cX)-1})]);};bn.reorderList=function(cX,cY,cZ){return cZ<cY?cm.append(cX.GetSlice({$:1,$0:0},{$:1,$0:cZ-1}),cm.append(cm.ofArray([cX.get_Item(cY)]),cm.append(cX.GetSlice({$:1,$0:cZ},{$:1,$0:cY-1}),cX.GetSlice({$:1,$0:cY+1},{$:1,$0:cX.get_Length()-1})))):cm.append(cX.GetSlice({$:1,$0:0},{$:1,$0:cY-1}),cm.append(cX.GetSlice({$:1,$0:cY+1},{$:1,$0:cZ}),cm.append(cm.ofArray([cX.get_Item(cY)]),cX.GetSlice({$:1,$0:cZ+1},{$:1,$0:cX.get_Length()-1}))));};bn.addResizeObserver=function(cX,cY){var cZ,c0,c1,c2;try{cZ=!(!a.ResizeObserver);}catch(c3){cZ=false;}if(cZ){c0=new a.ResizeObserver(cX);bn.set_observers(new cm.T({$:1,$0:c0,$1:bn.observers()}));c0.observe(cY);}else{c1=bn.dimsChanged(cY);b7.Start((c2=null,b7.Delay(function(){return b7.While(function(){return cY.isConnected;},b7.Delay(function(){return b7.Bind(b7.Sleep(110),function(){return c1()?(cX(),b7.Zero()):b7.Zero();});}));})),null);}};bn.dimsChanged=function(cX){var cY;cY=[cX.getBoundingClientRect()];return function(){var cZ;cZ=cX.getBoundingClientRect();return b9.Equals(bn.domRect2Tuple(cY[0]),bn.domRect2Tuple(cZ))?false:(cY[0]=cZ,true);};};bn.domRect2Tuple=function(cX){return[cX.top,cX.left,cX.width,cX.height];};bn.observers=function(){b2.$cctor();return b2.observers;};bn.set_observers=function(cX){b2.$cctor();b2.observers=cX;};bn.setLint=function(cX,cY){cX.setOption("lint",{async:1,getAnnotations:ca.CreateFuncWithArgs(cY),container:bf.findRootElement(cX.getWrapperElement())});};bn.showHints=function(cX,cY,cZ,c0){var c1;c1=by.New(ca.CreateFuncWithArgs(cY),cZ,bf.findRootElement(cX.getWrapperElement()));c1.hint.async=1;cX.showHint(c1);};bn.cmPos=function(cX,cY){return bt.New(cX,cY);};bn.codeMirrorIncludes=function(){b2.$cctor();return b2.codeMirrorIncludes;};bn.hoverable=function(cX){return bq.get_New().Content(cX);};bO=bN.RunNode=ca.Class({createBaseNode:function(){var cX;cX=a.document.createElement("div");cX.setAttribute("id",this.nodeName);a.document.body.appendChild(cX);return cX;},createNode:function(){var cX;cX=a.document.createElement("div");cX.style="height: 100%; width: 100%;";return cX;},RunHtml:function(cX){this.RunDoc((bf.renderDoc())(cX));},RunDoc:function(cX){cE.Run(this.get_RunNode(),cX);},get_AddBootstrap:function(){var cX;cX=a.document.createElement("div");cX.innerHTML="<script src='http://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript' charset='UTF-8'></script>\n                <script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js' type='text/javascript' charset='UTF-8'></script>\n                <link type='text/css' rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>\n                <link type='text/css' rel='stylesheet' href='/EPFileX/css/main.css'>\n               ";this.runNode.parentElement.appendChild(cX);return this;},get_RunNode:function(){return this.runNode;}},i,bO);bO.New=ca.Ctor(function(cX,cY){bO.New$1.call(this,"TestNode",cX,cY);},bO);bO.New$1=ca.Ctor(function(cX,cY,cZ){var c0,c1,c2,c3,c4;this.nodeName=cX;c0=(c1=a.document.getElementById(this.nodeName),b9.Equals(c1,null)?this.createBaseNode():c1);this.runNode=!(cZ==null||cZ.$0)?c0:(c2=c0.shadowRoot,b9.Equals(c2,null)?(c3=this.createNode(),(c0.attachShadow({mode:"open"}).appendChild(c3),c4=this.createNode(),c3.appendChild(c4),c4)):c2.firstChild);cY==null||cY.$0?this.runNode.innerHTML="":void 0;},bO);bN.completeJS=function(cX){return"\n          CIPHERSpaceLoadFileGlobalFileRef = null;\n          CIPHERSpaceLoadFile = function (filename, callback) {\n              if (filename.slice(-3) == \".js\" || filename.slice(-4) == \".fsx\" || filename.slice(-3) == \".fs\") { //if filename is a external JavaScript file\n                  var fileRef = null;\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement('script')\n                      fileRef.setAttribute(\"type\", \"text/javascript\")\n                      fileRef.setAttribute(\"src\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-4) == \".css\") { //if filename is an external CSS file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"stylesheet\")\n                      fileRef.setAttribute(\"type\", \"text/css\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-5) == \".html\") { //if filename is an external HTML file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"import\")\n                      fileRef.setAttribute(\"type\", \"text/html\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              if (!!fileRef) {\n                  CIPHERSpaceLoadFileGlobalFileRef = fileRef;\n      \u0009\u0009\u0009fileRef.onload = function () { fileRef.onload = null;  callback(); }\n                  document.getElementsByTagName(\"head\")[0].appendChild(fileRef);\n              }\n          }\n          CIPHERSpaceLoadFiles = function (files, callback) {\n              var newCallback = callback\n              if (!!CIPHERSpaceLoadFileGlobalFileRef && !!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n                  var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n                  CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n                  newCallback = function () {\n                      callback();\n                      oldCallback();\n                  }\n              }\n              var i = 0;\n              loadNext = function () {\n                  if (i < files.length) {\n                      var file = files[i];\n                      i++;\n                      CIPHERSpaceLoadFile(file, loadNext);\n                  }\n                  else newCallback();\n              };\n              loadNext();\n      \u0009}\n          CIPHERSpaceLoadFiles(['https://code.jquery.com/jquery-3.1.1.min.js'], function() {}); \n      \u0009CIPHERSpaceLoadFilesDoAfter = function (callback) {\n      \u0009\u0009var newCallback = callback\n      \u0009\u0009if (!!CIPHERSpaceLoadFileGlobalFileRef) {\n      \u0009\u0009\u0009if (!!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n      \u0009\u0009\u0009\u0009var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n      \u0009\u0009\u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n      \u0009\u0009\u0009\u0009newCallback = function () {\n      \u0009\u0009\u0009\u0009\u0009oldCallback();\n      \u0009\u0009\u0009\u0009\u0009callback();\n      \u0009\u0009\u0009\u0009}\n      \u0009\u0009\u0009}\n      \u0009\u0009}\n      \u0009\u0009else CIPHERSpaceLoadFileGlobalFileRef = {};\n      \u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = newCallback;\n      \u0009}\n      \n      CIPHERSpaceLoadFilesDoAfter(function() { \n        if (typeof IntelliFactory !=='undefined')\n          IntelliFactory.Runtime.Start();\n        for (key in window) { \n          if (key.startsWith(\"StartupCode$\")) \n            try { window[key].$cctor(); } catch (e) {} \n        } \n      })\n      \n                       "+cX;};bR.NewBrowser={$:3};bR.Tab={$:2};bR.Right={$:1};bR.Below={$:0};bS=bQ.ErrCompiler=ca.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&!this.$1;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(function(cX){return function(cY){return cX(cb.toSafe(cY));};}(a.id))(this.$0):(function(cX){return function(cY){return cX(b5.p$5(cY));};}(a.id))(this);}},null,bS);bS["Could not open new browser, Popup blocker may be active"]=new bS({$:2});bS["Snippet Missing"]=new bS({$:1});bT.New=function(cX,cY,cZ,c0){return{F2:cX,LeftDoubleClick:cY,"Ctrl-Space":cZ,".":c0};};bW=bQ.Property=ca.Class({setV:function(cX){this.props.set_Item(this.key,cX);this.setDirty();},getV:function(){return this.props.get_Item(this.key);},setK:function(cX){this.props.Add(cX,this.props.get_Item(this.key));this.props.Remove(this.key);this.key=cX;this.setDirty();},getK:function(){return this.key;},Remove:function(){this.props.Remove(this.key);this.setDirty();},get_SetV:function(){var cX;cX=this;return function(cY){cX.setV(cY);};},get_GetV:function(){var cX;cX=this;return function(){return cX.getV();};},get_SetK:function(){var cX;cX=this;return function(cY){cX.setK(cY);};},get_GetK:function(){var cX;cX=this;return function(){return cX.getK();};},get_ValueVar:function(){return new bX.New(this);},get_KeyVar:function(){return this;},get_View:function(){return cD.Const(this.getK());},UpdateMaybe:function(cX){var cY;cY=cX(this.getK());cY==null?void 0:this.setK(cY.$0);},Update:function(cX){this.setK(cX(this.getK()));},Get:function(){return this.getK();},Set:function(cX){this.setK(cX);},SetFinal:function(cX){this.setK(cX);},get_Id:function(){return"?";}},bV,bW);bW.New=ca.Ctor(function(cX,cY,cZ){bV.New.call(this);this.setDirty=cX;this.props=cY;this.key=cZ;},bW);bX=bQ.PropValue=ca.Class({get_View:function(){return cD.Const(this.get());},UpdateMaybe:function(cX){var cY;cY=cX(this.get());cY==null?void 0:this.set(cY.$0);},Update:function(cX){this.set(cX(this.get()));},Get:function(){return this.get();},Set:function(cX){this.set(cX);},SetFinal:function(cX){this.set(cX);},get_Id:function(){return"?";}},bV,bX);bX.New=ca.Ctor(function(cX){bV.New.call(this);this.get=cX.get_GetV();this.set=cX.get_SetV();},bX);bQ["CodeSnippet.propValue"]=function(cX,cY){var cZ,c0;return cX.properties.ContainsKey(cY)?{$:1,$0:cX.properties.get_Item(cY)}:(cZ=(c0=cX.parent,c0==null?null:bY.FetchO(c0.$0)),cZ==null?null:bQ["CodeSnippet.propValue"](cZ.$0,cY));};bY.FetchByPathO=function(cX){function cY(c0,c1){return b8.tryHead(b8.filter(function(c2){return c2.get_Name()===c1;},c0));}function cZ(c0,c1){var c2,c3,c4,c5;c2=(c3=b8.tryHead(c1),c3==null?null:cY(c0,c3.$0));return b8.length(c1)<=1?c2:c2==null?null:(c4=c2.$0,(c5=b8.tail(c1),cZ(b8.filter(function(c6){return b9.Equals(c6.parent,{$:1,$0:c4.id});},(bQ.codeSnippets())["var"].Get()),c5)));}return cZ(b8.filter(function(c0){return c0.parent==null;},(bQ.codeSnippets())["var"].Get()),cX);};bQ["CodeSnippet.IsDescendantOf"]=function(cX,cY){function cZ(c0){var c1,c2,c3;c1=c0.parent;return c1!=null&&c1.$==1&&(c2=c1.$0,b9.Equals(c2,cY)||g.defaultValue(false,(c3=bY.FetchO(c2),c3==null?null:{$:1,$0:cZ(c3.$0)})));}return cZ(cX);};bQ["CodeSnippet.GetCodeFsx"]=function(cX,cY){return(bQ["CodeSnippet.GetCodeAndStarts"](cX,cY))[0];};bQ["CodeSnippet.GetCodeAndStarts"]=function(cX,cY){return x.CodeAndStarts(cY,bQ["CodeSnippet.Predecessors"](cX));};bQ["CodeSnippet.Predecessors"]=function(cX,cY){var cZ;cZ=cd.ofSeq(cX.UniquePredecessors(bY.FetchO));return cd.ofSeq(b8.map(bQ["CodeSnippet.get_PrepareSnippet"],b8.filter(function(c0){return cd.contains(c0.id,cZ);},(bQ.codeSnippets())["var"].Get())));};bQ["CodeSnippet.get_PrepareSnippet"]=function(cX,cY){var cZ;cZ=bQ["CodeSnippet.get_Levels"](cX);return x.New(cX.name,b_.Replace(b_.Replace(cX.content,"##"+"FSHARPSTATION_ID"+"##",bQ.fsIds()),"##"+"FSHARPSTATION_ENDPOINT"+"##",a.location.href),cX.parent,cX.predecessors,cX.id,cX.expanded,cZ[0],cZ[1],cX.properties);};bQ["CodeSnippet.get_Levels"]=function(cX,cY){function cZ(c0,c1){return function(c2){var c3,c4,c5;return g.defaultValue([c0,c1],(c3=(c4=c2.parent,c4==null?null:bY.FetchO(c4.$0)),(c5=cZ(c0+1,c1+(c2.properties.ContainsKey("NoIndent")?0:1)),c3==null?null:{$:1,$0:c5(c3.$0)})));};}return(function(c0){return cZ(c0[0],c0[1]);}([0,0]))(cX);};bY.New=function(cX,cY,cZ,c0,c1,c2){var c3,c4,c5,c6,c7;c3=x.New(cY,c2,cZ,c0,w.get_New(),true,0,0,new ci.New$5());c4=bQ.codeSnippets().get_Length();c4===0?bQ.codeSnippets().Append(c3):cX===0?(c5=b8.append([c3],(bQ.codeSnippets())["var"].Get()),bQ.codeSnippets().Set(c5)):cX<c4?(c6=(c7=cd.splitAt(cX,cd.ofSeq((bQ.codeSnippets())["var"].Get())),c7[0].concat([c3].concat(c7[1]))),bQ.codeSnippets().Set(c6)):bQ.codeSnippets().Append(c3);return c3;};bY.New$1=function(cX,cY,cZ,c0,c1){return bY.New(bQ.codeSnippets().get_Length(),cX,cY,cZ,c0,c1);};bY.New$2=function(cX){return bY.New$1("",null,cm.T.Empty,cm.T.Empty,cX);};bY.New$3=function(cX,cY){return bY.New$1("",{$:1,$0:cX},cm.T.Empty,cm.T.Empty,cY);};bY.New$4=function(cX,cY,cZ){return bY.New$1("",{$:1,$0:cX},cY,cm.T.Empty,cZ);};bY.New$5=function(cX,cY){return bY.New$1("",null,cX,cm.T.Empty,cY);};bY.FetchL=function(cX){return cn.toList(bY.FetchO(cX));};bY.FetchO=function(cX){return bQ.codeSnippets().TryFindByKey(cX);};bY.PickIO=function(cX){function cY(cZ,c0){return b9.Equals(c0.id,cX);}return bQ.tryPickI(function(cZ){return cY(cZ[0],cZ[1]);},(bQ.codeSnippets())["var"].Get());};bQ.tryPickI=function(cX,cY){return b8.tryHead(b8.filter(cX,b8.indexed(cY)));};bQ.fsIds=function(){b2.$cctor();return b2.fsIds;};bQ.codeSnippets=function(){b2.$cctor();return b2.codeSnippets;};b0=bZ.Babel=ca.Class({},i,b0);b0.New=ca.Ctor(function(){},b0);b1=bZ.Fable=ca.Class({},i,b1);b1.New=ca.Ctor(function(){},b1);bZ.fableTranslate=function(cX){var cY;cY=p.wrapper();return cY.Run(cY.Delay(function(){var cZ;bZ.loadReferences().f();return cY.Bind$2((cZ=null,b7.Delay(function(){return b7.While(function(){return cN.getOwnPropertyNames(a.metadata).length<cd.length(bZ.references());},b7.Delay(function(){return b7.Bind(b7.Sleep(200),function(){return b7.Return(null);});}));})),function(){var c0,c1,c2,c3,c4;c0=bZ.getChecker().f();c1=cO.makeCompiler([["Microsoft.FSharp.Core.ExtraTopLevelOperators.PrintFormatLine","FSSGlobal.FSharpStation.FableModule.ToConsole($0)"]]);c2="stdin.fsx";c3=co.parse(cO.convertToJson(cO.compileAst(c1,cO.parseFSharpProject(c0,c1,c2,cX),c2)));c4=cN.create(null);c4.plugins=[a.babelPlugins.transformMacroExpressions,a.babelPlugins.removeUnneededNulls,"transform-es2015-modules-amd"];c4.presets=[];c4.filename=c2;c4.babelrc=false;return cY.Return(b_.Replace(b_.Replace(cP.transformFromAst(c3,null,c4).code,"define([","require(["),"\"use strict\";","\"use strict\"; try { exports = exports || {}; } catch (err) {}"));});}));};bZ.ToConsole=function(cX){ce.log(cX);return cX.cont(bZ.addOutMsg());};bZ.addOutMsg=function(){b2.$cctor();return b2.addOutMsg;};bZ.set_addOutMsg=function(cX){b2.$cctor();b2.addOutMsg=cX;};bZ.getChecker=function(){b2.$cctor();return b2.getChecker;};bZ.loadReferences=function(){b2.$cctor();return b2.loadReferences;};bZ.references=function(){b2.$cctor();return b2.references;};bP.FSharpStationClient$6433$173=a.id;bP.FSharpStationClient$6432$173=a.id;bP.FSharpStationClient$6122$68=function(cX,cY,cZ){return function(){return function(){cX.Add("","1");cY();return cZ.Set(null);};};};bP.FSharpStationClient$6119$68=function(cX,cY){return function(){return function(){cX.Remove();return cY.Set(null);};};};bP.FSharpStationClient$5970$44=ca.Curried3(function(cX,cY,cZ){return cX();});bP.FSharpStationClient$5964$39=function(cX,cY){return function(){return function(){return cX(cY.editorO.$0);};};};bP.FSharpStationClient$5665$61=ca.Curried3(function(cX,cY,cZ){cY.value="";});bP.FSharpStationClient$5664$61=ca.Curried3(function(cX,cY,cZ){return cX(cY);});bP.FSharpStationClient$5546$48=ca.Curried3(function(cX,cY,cZ){cX[0]=cY.scrollTop;});bP.FSharpStationClient$5523$57=function(cX,cY,cZ){return function(){return function(){return bg.iter(cX(cY),cZ);};};};bP.FSharpStationClient$5519$58=function(cX,cY){return function(){return function(){return cY.Set(cX.id);};};};bP.FSharpStationClient$5511$57=function(cX,cY,cZ){return function(){return function(){return cX?cY(cZ):null;};};};bP.FSharpStationClient$5507$50=function(cX,cY,cZ){return function(){return function(c0){c0.preventDefault();return(cX(cY.id))(cZ[0]);};};};bP.FSharpStationClient$5506$50=function(cX,cY){return function(){return function(){cX[0]=cY.id;};};};bP.FSharpStationClient$5505$50=ca.Curried3(function(cX,cY,cZ){return cZ.preventDefault();});bP.FSharpStationClient=function(cX){var cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW;function eX(gR,gS,gT,gU){return gS(gU)==null?bV.Lens(cY,function(){return gR;},function(){return"";}):gT(gU);}function eY(){c2.Set(null);}function eZ(gR){function gS(gU){return gU.get_Name();}function gT(gU,gV){return x.New(gV,gU.content,gU.parent,gU.predecessors,gU.id,gU.expanded,gU.level,gU.levelCode,gU.properties);}return eX("",function(gU){return bQ.codeSnippets().TryFindByKey(gU);},function(gU){return bQ.codeSnippets().LensInto(gS,gT,gU);},gR);}function e0(gR){function gS(gU){return gU.content;}function gT(gU,gV){return x.New(gU.name,gV,gU.parent,gU.predecessors,gU.id,gU.expanded,gU.level,gU.levelCode,gU.properties);}return eX("",function(gU){return bQ.codeSnippets().TryFindByKey(gU);},function(gU){return bQ.codeSnippets().LensInto(gS,gT,gU);},gR);}function e1(gR){var gS;gS=bQ["CodeSnippet.propValue"](gR,"CSS");return gS==null?null:{$:1,$0:a.id(gS.$0)};}function e2(gR){return g.defaultValue("",gR);}function e3(gR){var gS;gS=bQ["CodeSnippet.propValue"](gR,"CSSLink");return gS==null?null:{$:1,$0:a.id(gS.$0)};}function e4(gR){return g.defaultValue("",gR);}function e5(gR){var gS;gS=bQ["CodeSnippet.propValue"](gR,"Mode");return gS==null?null:{$:1,$0:a.id(gS.$0)};}function e6(gR){return g.defaultValue("fsharp",gR);}function e7(gR){var gS;gS=bQ["CodeSnippet.propValue"](gR,"Theme");return gS==null?null:{$:1,$0:a.id(gS.$0)};}function e8(gR){return g.defaultValue("",gR);}function e9(gR){var gS;gS=bQ["CodeSnippet.propValue"](gR,"Layout");return gS==null?null:{$:1,$0:a.id(gS.$0)};}function e_(gR){return g.defaultValue("",gR);}function e$(gR){var gS;gS=bQ["CodeSnippet.propValue"](gR,"LayoutJS");return gS==null?null:{$:1,$0:a.id(gS.$0)};}function fa(gR){return g.defaultValue("",gR);}function fb(gR){var gS,gT,gU,gV;function gW(gY){var gZ;gZ=bQ["CodeSnippet.propValue"](gY,gR);return gZ==null?null:{$:1,$0:a.id(gZ.$0)};}function gX(gY){return g.defaultValue("",gY);}gS=bg.map((gT=(gU=function(gY){return gY==null?null:gW(gY.$0);},function(gY){return gU(bY.FetchO(gY));}),function(gY){return gX(gT(gY));}),cZ);gV=[bV.Create$1(null)];cD.Sink(function(gY){if(!b9.Equals(gV[0].Get(),gY))gV[0].Set(gY);},bg.toView(gS));return new bg({$:1,$0:gV[0]});}function fc(gR,gS){return gS===""?gR:gS!=="0";}function fd(){dK=false;dL.Set(true);}function fe(){dE=null;fd();}function ff(){fe();dF.ClearCache();eY();}function fg(){dF.ClearCache();dL.Set(false);dE=null;}function fh(gR,gS){var gT,gU,gV;return!gS?null:(gT=(gU=gR.Get(),(gV=a.String(gS),gU===null?gV:gU===""?gV:gV===null?gU:gV===""?gU:gU+"\n"+gV)),gT!==gR.Get()?gR.Set(gT):null);}function fi(gR){dJ.Set(gR);}function fj(gR){fh(dJ,gR);}function fk(gR){fh(dI,gR);}function fl(){var gR;gR=bY.FetchO(cZ.Get());gR==null?void 0:dG.Set(bQ["CodeSnippet.GetCodeFsx"](gR.$0,true));}function fm(gR,gS){var gT,gU,gV,gW,gX,gY,gZ,g0;function g1(g2){function g3(g4,g5){return b9.Equals(g5.id,g2);}return function(g4){return bQ.tryPickI(function(g5){return g3(g5[0],g5[1]);},g4);};}gT=cd.partition(function(g2){return b9.Equals(g2.id,gS)||bQ["CodeSnippet.IsDescendantOf"](g2,gS);},cd.ofSeq((bQ.codeSnippets())["var"].Get()));gU=gT[1];gV=gT[0];gW=(g1(gS))(gV);gX=(g1(gR))(gU);gW!=null&&gW.$==1?gX!=null&&gX.$==1?(gY=gX.$0[0],gZ=gX.$0[1],g0=cd.collect(a.id,[cC.array(gU,{$:1,$0:0},{$:1,$0:gY-1}),gV,cC.array(gU,{$:1,$0:gY},null)]),bQ.codeSnippets().Set(g0),bQ.codeSnippets().UpdateBy(function(g2){return{$:1,$0:x.New(g2.name,g2.content,gZ.parent,g2.predecessors,g2.id,g2.expanded,g2.level,g2.levelCode,g2.properties)};},gW.$0[1].id)):void 0:void 0;return ff();}function fn(){var gR,gS,gT,gU;gR=bY.PickIO(cZ.Get());gR==null?void 0:(gS=gR.$0,gT=gS[0],gU=gS[1],function(gV,gW){var gX;while(true){if(gW<0)return null;else if(gV((gX=(bQ.codeSnippets())["var"].Get(),(function(gY){return function(gZ){return b8.nth(gY,gZ);};}(gW))(gX))))return null;else gW=gW-1;}}(function(gV){return b9.Equals(gV.parent,gU.parent)&&(bQ.codeSnippets().UpdateBy(function(gW){return{$:1,$0:x.New(gW.name,gW.content,{$:1,$0:gV.id},gW.predecessors,gW.id,gW.expanded,gW.level,gW.levelCode,gW.properties)};},gU.id),true);},gT-1),ff());}function fo(){var gR,gS,gT,gU,gV;gR=bY.FetchO(cZ.Get());gR==null?void 0:(gS=gR.$0,gT=(gU=(gV=gS.parent,gV==null?null:bY.FetchO(gV.$0)),gU==null?null:gU.$0.parent),bQ.codeSnippets().UpdateBy(function(gW){return{$:1,$0:x.New(gW.name,gW.content,gT,gW.predecessors,gW.id,gW.expanded,gW.level,gW.levelCode,gW.properties)};},gS.id),ff());}function fp(gR){var gS;gS=p.wrapper();return gS.Run(gS.Delay(function(){return gS.Bind$1(m.fromOption(bS["Snippet Missing"],gR),function(gT){var gU;dJ.Set("Compiling to JavaScript...");dH.Set("");gU=bQ["CodeSnippet.GetCodeFsx"](gT,true);dG.Set(gU);return gS.Bind$2(be.translateAR(gU,false),function(gV){return gS.Bind$1(gV,function(gW){var gX;gX=bN.completeJS(gW);dH.Set(gX);fj("Compiled!");return gS.Return(gX);});});});}));}function fq(gR){var gS;gS=a.open.apply(a,[gR]);return b9.Equals(gS,null)?m.fail(bS["Could not open new browser, Popup blocker may be active"]):m.succeed(gS);}function fr(gR,gS){try{return gR["eval"].apply(gR,[gS]);}catch(gT){((function(gU){return function(gV){return gU(cb.prettyPrint(gV));};}(function(gU){ce.log(gU);}))(gT));return(function(gU){return function(gV){return gU(cb.prettyPrint(gV));};}(a.id))(gT);}}function fs(gR){try{gR.focus.apply(gR,[]);}catch(gS){((function(gT){return function(gU){return gT(cb.prettyPrint(gU));};}(function(gT){ce.log(gT);}))(gS));}}function ft(gR,gS){var gT;gT=p.wrapper();return gT.Run(gT.Delay(function(){return gT.Bind$1(m.tryProtection(),function(){return gT.Bind$1(fq(gR),function(gU){fs(gU);return gT.Bind$2(b7.Sleep(800),function(){return gT.Return(fr(gU,gS));});});});}));}function fu(){return b7.FromContinuations(function(gR,gS){var gT;try{gT=bf.createIFrame(gR);return(new bO.New(null,null)).RunHtml(gT);}catch(gU){return gS(gU);}});}function fv(gR){var gS;gS=p.wrapper();return gS.Run(gS.Delay(function(){return gS.Bind$1(m.tryProtection(),function(){return gS.Bind$2(fu(),function(gT){var gU;gU=gT.contentWindow;gU.document.body.style.margin="0px";return gS.Return(fr(gU,gR));});});}));}function fw(gR,gS,gT){var gU;gU=p.wrapper();return gU.Run(gU.Delay(function(){return gU.Bind$3(fp(gT),function(gV){dJ.Set("Running JavaScript...");return gU.Bind$3(gS.$==3?ft(gR,gV):fv(gV),function(gW){fj(gW);fj("Done!");return gU.Return([gS,gW]);});});}));}function fx(){return bY.FetchO(cZ.Get());}function fy(gR){var gS;gS=p.wrapper();return gS.Run(gS.Delay(function(){dG.Set(gR);return gS.Bind$2(bc.evaluateAR(bQ.fsIds(),a.location.href,true,gR),function(gT){return gS.Bind$1(gT,function(){return gS.Return("");});});}));}function fz(gR){var gS;gS=p.wrapper();return gS.Run(gS.Delay(function(){return gS.Bind$1(m.fromOption(bS["Snippet Missing"],gR),function(gT){return gS.Bind$3(fy(bQ["CodeSnippet.GetCodeFsx"](gT,true)),function(gU){return gS.Bind$2((new cB.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.addPresence:1381500690",[(function(gV){return function(gW){return gV(b5.p$6(gW));};}(a.id))(gT.id),"ok"]),function(){return gS.Return(gU);});});});}));}function fA(gR,gS,gT){var gU;gU=p.wrapper();return gU.Run(gU.Delay(function(){dJ.Set(gR);return gU.Bind$3(gT(),function(gV){fj(gV);fj(gS);return gU.Return(gV);});}));}function fB(gR){return fA("Evaluating F# code...","",function(){return fz(gR);});}function fC(gR){return fA("Evaluating F# code...","",function(){return fy(gR);});}function fD(gR){var gS;gS=p.wrapper();return gS.Run(gS.Delay(function(){dG.Set(gR);return gS.Bind$3(bZ.fableTranslate(gR),function(gT){dH.Set(gT);a["eval"](gT);return gS.Return("");});}));}function fE(gR){var gS;gS=p.wrapper();return gS.Run(gS.Delay(function(){return gS.Bind$1(m.fromOption(bS["Snippet Missing"],gR),function(gT){return gS.ReturnFrom(fD(bQ["CodeSnippet.GetCodeFsx"](gT,false)));});}));}function fF(gR){return fA("Running Fable...","Done!",function(){return fE(gR);});}function fG(gR){return fA("Running Fable...","Done!",function(){return fD(gR);});}function fH(gR){var gS;gS=fx();return(dN(gR))(gS);}function fI(gR,gS){return g.defaultValue(false,gS==null?null:{$:1,$0:cm.contains(gR,gS.$0.predecessors)});}function fJ(gR,gS){return gS.Contains(gR);}function fK(gR,gS){var gT,gU,gV,gW;return gS==null?null:(gT=gS.$0,b9.Equals(gT,gR)||fJ(gT.id,new cQ.New$2(gR.UniquePredecessors(bY.FetchO)))?null:(gU=(cm.contains(gR.id,gT.predecessors)?(gV=(gW=gR.id,function(gX){return!b9.Equals(gW,gX);}),function(gX){return cm.filter(gV,gX);}):function(gX){return new cm.T({$:1,$0:gR.id,$1:gX});})(gT.predecessors),(bQ.codeSnippets().UpdateBy(function(gX){return{$:1,$0:x.New(gX.name,gX.content,gX.parent,gU,gX.id,gX.expanded,gX.level,gX.levelCode,gX.properties)};},gT.id),ff())));}function fL(gR){bQ.codeSnippets().UpdateBy(function(gS){return{$:1,$0:x.New(gS.name,gS.content,gS.parent,gS.predecessors,gS.id,!gS.expanded,gS.level,gS.levelCode,gS.properties)};},gR.id);eY();}function fM(gR,gS,gT){var gU,gV,gW,gX;function gY(g4,g5){return g5.preventDefault();}function gZ(g4,g5){dM[0]=gT.id;}function g0(g4,g5){g5.preventDefault();return fm(gT.id,dM[0]);}function g1(g4,g5){return gR?fL(gT):null;}function g2(g4,g5){return cZ.Set(gT.id);}function g3(g4,g5){return bg.iter(function(g6){return fK(gT,g6);},c3);}return bq.get_New().Content$1([bf["class"]("code-editor-list-tile"),bf.classIf("selected",bg.map((gU=gT.id,function(g4){return b9.Equals(gU,g4);}),cZ)),bf.classIf("direct-predecessor",bg.map((gV=gT.id,function(g4){return fI(gV,g4);}),c3)),bf.classIf("indirect-predecessor",bg.map((gW=gT.id,function(g4){return fJ(gW,g4);}),dP)),bf.draggable("true"),new bl({$:8,$0:cH.HandlerImpl("dragover",function(g4){return function(g5){return gY(g4,g5);};})}),new bl({$:8,$0:cH.HandlerImpl("drag",function(g4){return function(g5){return gZ(g4,g5);};})}),new bl({$:8,$0:cH.HandlerImpl("drop",function(g4){return function(g5){return g0(g4,g5);};})}),bf.span([bf["class"]("node"),bf.classIf("parent",gR),bf.classIf("expanded",gS),new bl({$:8,$0:cH.HandlerImpl("click",function(g4){return function(g5){return g1(g4,g5);};})}),bf.title(gR?gS?"collapse":"expand":""),bf.htmlText(gR?gS?"-":"+":"")]),bf.div([bf["class"]("code-editor-list-text"),bf.style1("text-indent",(gX=(bQ["CodeSnippet.get_Levels"](gT))[0],(function(g4){return function(g5){return g4(a.String(g5)+"em");};}(a.id))(gX))),bf.style("white-space: pre"),bf.htmlText(bg.map2(function(g4){return function(g5){return v.snippetName(g4,g5);};},eZ(gT.id),e0(gT.id))),new bl({$:8,$0:cH.HandlerImpl("click",function(g4){return function(g5){return g2(g4,g5);};})})]),bf.span([bf["class"]("predecessor"),bf.title("toggle predecessor"),new bl({$:8,$0:cH.HandlerImpl("click",function(g4){return function(g5){return g3(g4,g5);};})}),bf.htmlText("X")])]);}function fN(gR,gS){return!gS?gR:gS;}function fO(gR){return new w({$:0,$0:!gR?"00000000-0000-0000-0000-000000000000":gR.Item});}function fP(gR){return!gR?null:{$:1,$0:fO(gR)};}function fQ(gR){var gS;function gT(gV,gW){gS.Add(gV,gW);}function gU(gV,gW){return[gV,gW];}gS=new ci.New$5();return!gR?gS:(b8.iter(function(gV){return gT(gV[0],gV[1]);},cd.map(function(gV){return gU(gV[0],gV[1]);},cS.GetFields(gR))),gS);}function fR(gR){var gS;try{gS=co.parse(gR);((function(gT){return function(gU){return gT(cb.prettyPrint(gU));};}(function(gT){ce.log(gT);}))(gS.length));return cd.choose(function(gT){return!gT?null:{$:1,$0:x.New(fN("",gT.name),fN("",gT.content),fP(gT.parent),cm.ofSeq(cd.map(fO,fN([],gT.predecessors))),fO(gT.id),fN(false,gT.expanded),fN(0,gT.level),fN(0,gT.levelCode),fQ(gT.properties))};},gS);}catch(gT){return[];}}function fS(){var gR,gS,gT,gU;function gV(gW,gX){var gY;return g.defaultValue(gX,(gY=b8.tryItem(gX,(bQ.codeSnippets())["var"].Get()),gY==null?null:{$:1,$0:(bQ["CodeSnippet.get_Levels"](gY.$0))[0]<=gW?gX:gV(gW,gX+1)}));}cZ.Set(g.defaultWith(function(){return bY.New$2("");},(gR=bY.PickIO(cZ.Get()),gR==null?null:{$:1,$0:(gS=gR.$0,(gT=gS[0],(gU=gS[1],bY.New(gV((bQ["CodeSnippet.get_Levels"](gU))[0],gT+1),"",gU.parent,cm.T.Empty,cm.T.Empty,""))))})).id);fe();eY();}function fT(){var gR,gS;gR=bY.FetchO(cZ.Get());gR==null?void 0:(gS=gR.$0,a.confirm((function(gT){return function(gU){return gT("Do you want to delete "+cb.toSafe(gU)+"?");};}(a.id))(gS.get_Name()))?(cZ.Set(w.get_New()),bQ.codeSnippets().Remove(gS),fe(),eY()):void 0);}function fU(gR){return b8.last(b_.SplitChars(gR,["/","\\"],0));}function fV(gR,gS){var gT,gU;gT=gR.files;return gT.length>0?(gU=new a.FileReader(),(gU.onload=function(gV){return gS(gV.target.result);},gU.readAsText(gT.item(0)))):null;}function fW(gR){var gS;try{gS=fR(gR);bQ.codeSnippets().Set(gS);fg();eY();}catch(gT){a.alert(a.String(gT));}}function fX(gR){if(!dL.Get()||a.confirm("Changes have not been saved, do you really want to load?"))fV(bf.findRootElement(gR).querySelector("#"+dS),fW);}function fY(){var gR,gS,gT,gU;gR=(gS=cd.ofSeq((bQ.codeSnippets())["var"].Get()),co.stringify(((cr.EncodeArray(b4.j$7))())(gS)));gT=(gU=fU(dR.Get()),gU===""?"snippets.fsjson":gU);a.saveAs(new a.Blob([gR],{type:"text/plain;charset=utf-8"}),gT);fg();}function fZ(gR,gS){return fX(gR);}function f0(gR,gS){gR.value="";}function f1(gR,gS){return bf.findRootElement(gR).querySelector("#"+dS).click();}function f2(){return dX==="a"?"b":"a";}function f3(gR){return gR+dW;}function f4(gR,gS){var gT,gU,gV,gW,gX,gY,gZ,g0,g1,g2;gT=dE!=null&&dE.$==1&&((gV=dE.$0[0],(gW=dE.$0[1],b9.Equals(gV,gR.id)&&b9.Equals(gW,gS)))&&(gU=[dE.$0[1],dE.$0[0],dE.$0[2]],true))?[gU[2],bQ["CodeSnippet.get_PrepareSnippet"](gR)]:(gX=bQ["CodeSnippet.Predecessors"](gR),(gY=cd.length(gX)===1?null:{$:1,$0:x.ReducedCode(gS,cC.array(gX,{$:1,$0:0},{$:1,$0:cd.length(gX)-2}))},(gZ=cd.get(gX,cd.length(gX)-1),(dE={$:1,$0:[gZ.id,gS,gY]},[gY,gZ]))));g0=x.ReducedCode(gS,[gT[1]]);g1=g.defaultValue(g0,(g2=gT[0],g2==null?null:{$:1,$0:(function(g3){var g4,g5,g6,g7,g8,g9;g4=g3[0];g5=g3[1];g6=g3[2];g7=g3[3];g8=g3[4];g9=g3[5];return function(g_){return x.AddSeps(g4,g5,g6,g7,g8,g9,g_[0],g_[1],g_[2],g_[3],g_[4],g_[5]);};}(g2.$0))(g0)}));return x.FinishCode(gS,g1[0],g1[1],g1[2],g1[3],g1[4],g1[5]);}function f5(gR,gS){var gT;gT=null;return b7.Delay(function(){var gU,gV,gW,gX;gU=bY.FetchO(cZ.Get());return gU!=null&&gU.$==1?(gV=f4(gU.$0,false),(gW=gV[1],(gX=gV[0],gX!==d1||dZ===d0&&gS?b7.Combine(b7.TryFinally(b7.Delay(function(){var gY;dK=false;dZ=dZ+1;gY=f2();((function(gZ){return function(g0){return gZ("Parsing "+cb.toSafe(g0));};}(function(gZ){ce.log(gZ);}))(gY));return b7.Combine(!gR?(dI.Set("Parsing..."),b7.Zero()):b7.Zero(),b7.Delay(function(){d1=gX;return b7.Bind(dV.Parse$1(f3(gY),gX,gW),function(gZ){dX=gY;return b7.Combine(!gR?(dI.Set("Parsed!"),fk(gZ),b7.Zero()):b7.Zero(),b7.Delay(function(){dK=true;((function(g0){return function(g1){return g0("Parse result= "+cb.prettyPrint(g1));};}(function(g0){ce.log(g0);}))(gZ!==""));return b7.Zero();}));});}));}),function(){d0=d0+1;}),b7.Delay(function(){return dZ===d0?b7.Bind(f5(gR,false),function(){return b7.Return(null);}):b7.Zero();})):b7.Zero()))):b7.Zero();});}function f6(gR){return f5(gR,true);}function f7(gR){var gS;gS=null;return b7.Delay(function(){return!dK?b7.Return(true):b7.Bind(dV.MustParse(f3(dX),gR.get_NameSanitized()),function(gT){return b7.Return(gT);});});}function f8(gR){var gS;gS=null;return b7.Delay(function(){return b7.Bind(dY,function(gT){var gU;return gT?b7.Zero():(gU=bY.FetchO(cZ.Get()),gU!=null&&gU.$==1?b7.Bind(f7(gU.$0),function(gV){return gV?b7.Bind(f6(gR),function(){return b7.Return(null);}):b7.Zero();}):b7.Zero());});});}function f9(gR,gS){var gT,gU;gT=c.REGEX("([a-zA-Z_]\\w*)$","g",b_.Substring(gR,0,gS));return gT!=null&&gT.$==1?(gU=gT.$0,!b9.Equals(gU,null)&&gU.length===1)?cd.get(gT.$0,0):"":"";}function f_(gR,gS){var gT,gU;gT=c.REGEX("^([a-zA-Z_]\\w*)","g",gR.substring(gS));return gT!=null&&gT.$==1?(gU=gT.$0,!b9.Equals(gU,null)&&gU.length===1)?cd.get(gT.$0,0):"":"";}function f$(gR){var gS;b7.Start((gS=null,b7.Delay(function(){return b7.Bind(dY,function(gT){var gU,gV;return gT?b7.Zero():(gU=bY.FetchO(cZ.Get()),gU!=null&&gU.$==1?(gV=gU.$0,b7.Bind(f8(false),function(){var gW,gX,gY,gZ,g0;gW=gR.getCursor();gX=gR.getLine(gW.line);gY=b_.length(f9(gX,gW.ch));gZ=b_.length(f_(gX,gW.ch));g0=gY===0&&gZ===0?2:gZ;return b7.Bind(dV.ToolTip(f3(dX),gW.line+1,gW.ch+1,gV.get_NameSanitized()),function(g1){var g2;fk(((((g2=(ca.Curried(function(g3,g4,g5,g6,g7){return g3("InfoFSharp \""+cb.toSafe(g4)+" "+("("+cb.prettyPrint(g5[0])+", "+cb.prettyPrint(g5[1])+")")+" - "+("("+cb.prettyPrint(g6[0])+", "+cb.prettyPrint(g6[1])+")")+" "+cb.toSafe(g7)+" \"");},5))(a.id),function(g3){var g4;g4=g2(g3);return function(g5){var g6;g6=g4([g5[0],g5[1]]);return function(g7){return g6([g7[0],g7[1]]);};};})(gV.get_NameSanitized()))([gW.line+1,gW.ch-gY+1]))([gW.line+1,gW.ch+g0+1]))(b_.Replace(g1,"\"","''")));return b7.Zero();});})):b7.Zero());});})),null);}function ga(gR,gS,gT,gU){var gV;b7.Start((gV=null,b7.Delay(function(){var gW,gX;gW=bY.FetchO(cZ.Get());return gW!=null&&gW.$==1?(gX=gW.$0,(function(gY){return gY("calling parseIfMustThen");}(function(gY){ce.log(gY);}),b7.Bind(f8(false),function(){var gY;function gZ(g0,g1,g2,g3,g4,g5,g6,g7,g8){var g9;return b_.StartsWith(g0,gX.id.get_Text())||g0===v.sanitize(gX.name)?(g9=a.Number(g1)>0?a.Number(g1):0,{$:1,$0:bz.New(g8,b_.StartsWith(g6.toUpperCase(),"ERR")?"error":b_.StartsWith(g6.toUpperCase(),"INFO")?"info":"warning",bn.cmPos(g2-1,g3-1-g9),bn.cmPos(g4-1,g5-1-g9))}):null;}gS(cd.choose(function(g0){return gZ(g0[0],g0[1],g0[2],g0[3],g0[4],g0[5],g0[6],g0[7],g0[8]);},cd.choose(function(g0){var g1,g2,g3,g4,g5,g6,g7,g8;return(g2=c.REGEX(d3,"",g0),g2!=null&&g2.$==1&&((g3=g2.$0,!b9.Equals(g3,null)&&g3.length===13)&&(g1=[cd.get(g2.$0,8),cd.get(g2.$0,5),cd.get(g2.$0,7),cd.get(g2.$0,2),cd.get(g2.$0,4),cd.get(g2.$0,11),cd.get(g2.$0,1),cd.get(g2.$0,10),cd.get(g2.$0,9)],true)))?{$:1,$0:[g1[1],g1[4],a.Number(g1[2]),a.Number(g1[0]),a.Number(g1[8]),a.Number(g1[7]),g1[6],g1[3],g1[5]]}:(g5=c.REGEX(d2,"",g0),g5!=null&&g5.$==1&&((g6=g5.$0,!b9.Equals(g6,null)&&g6.length===8)&&(g4=[cd.get(g5.$0,4),cd.get(g5.$0,2),cd.get(g5.$0,3),cd.get(g5.$0,1),cd.get(g5.$0,6),cd.get(g5.$0,5)],true)))?(g7=g4[0],(g8=g4[2],{$:1,$0:[g4[1],g4[3],a.Number(g8),a.Number(g7)-1,a.Number(g8),a.Number(g7),g4[5],"fsi",g4[4]]})):null;},(gY=c.REGEX(d4,"g",dI.Get()),gY!=null&&gY.$==1?gY.$0:[]))));return b7.Zero();}))):b7.Zero();})),null);}function gb(gR){ga.apply(null,gR);}function gc(gR){return gR==="C"?"class":gR==="Cn"?"Constant":gR==="D"?"delegate":gR==="E"?"enum":gR==="P"?"property":gR==="e"?"event":gR==="X"?"exception":gR==="F"?"field":gR==="I"?"interface":gR==="M"?"function":gR==="N"?"module":gR==="S"?"struct":gR==="T"?"type":gR==="V"?"Variable":gR;}function gd(gR,gS,gT){var gU;d5((gU=null,b7.Delay(function(){return b7.Bind(dY,function(gV){var gW,gX,gY,gZ;((function(g0){return function(g1){return g0("getHints (Complete) "+cb.prettyPrint(g1));};}(function(g0){ce.log(g0);}))(gV));return gV?b7.Zero():(gW=bY.FetchO(cZ.Get()),gW!=null&&gW.$==1?(gX=gR.getCursor(),(gY=gR.getLine(gX.line),(gZ=f9(gY,gX.ch),b7.Bind(dV.Complete(f3(dX),gY+"a",gX.line+1,gX.ch+1,gW.$0.get_NameSanitized()),function(g0){function g1(g2,g3,g4,g5){return bw.New(g3,(((ca.Curried3(function(g6,g7,g8){return g6(b_.PadRight(cb.toSafe(g7),40)+" "+b_.PadLeft(cb.toSafe(g8),20));}))(a.id))(g2))(gc(g5)),g4);}gS(bx.New(cd.map(function(g2){return g1(g2[0],g2[1],g2[2],g2[3]);},g0),bt.New(gX.line,gX.ch-gZ.length),gX));return b7.Zero();})))):b7.Zero());});})));}function ge(gR){var gS,gT,gU;gS=(gT=gR.parent,gT==null?null:bY.FetchO(gT.$0));gS==null?void 0:(gU=gS.$0,ge(gU),!gU.expanded?fL(gU):void 0);}function gf(gR,gS,gT){var gU;return b7.Start((gU=null,b7.Delay(function(){var gV;cZ.Set(gR);gV=bY.FetchO(gR);gV==null?void 0:ge(gV.$0);return b7.Bind(b7.Sleep(200),function(){var gW,gX;gW=d6.editorO;gW==null?void 0:(gX=gW.$0,gX.setCursor(gS-1,gT-1),gX.focus());return b7.Zero();});})),null);}function gg(gR){var gS,gT,gU,gV,gW;gS=c.REGEX("([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}).+?\\((\\d+)\\,\\s*(\\d+)\\)","",gR);gS!=null&&gS.$==1?(gT=gS.$0,!b9.Equals(gT,null)&&gT.length===4)?(gU=cd.get(gS.$0,3),gV=cd.get(gS.$0,1),gW=cd.get(gS.$0,2),gf(new w({$:0,$0:gV}),a.Number(gW),a.Number(gU))):void 0:void 0;}function gh(){var gR;b7.Start((gR=null,b7.Delay(function(){var gS,gT,gU,gV,gW;gS=bY.FetchO(cZ.Get());gT=d6.editorO;return(gT!=null&&gT.$==1?gS!=null&&gS.$==1?(gU=[gS.$0,gT.$0],false):true:true)?b7.Zero():(gV=gU[1],(gW=gV.getCursor(),(gV.getLine(gW.line),b7.Bind(dV.FindDecl(f3(dX),gW.line+1,gW.ch+1,gU[0].get_NameSanitized()),function(gX){var gY;return gX.$==9?(gY=gX.$0,(gg(((((((ca.Curried(function(gZ,g0,g1,g2,g3,g4){return gZ(cb.toSafe(g0)+" ("+a.String(g1)+", "+a.String(g2)+") - ("+a.String(g3)+", "+a.String(g4)+")");},6))(a.id))(gY.File))(gY.Line))(gY.Column))(gY.Line))(gY.Column)),b7.Zero())):gX.$==1?(a.alert((function(gZ){return function(g0){return gZ(b6.p(g0));};}(a.id))(gX.$0)),b7.Zero()):(a.alert((function(gZ){return function(g0){return gZ(b5.p$7(g0));};}(a.id))(gX)),b7.Zero());}))));})),null);}function gi(){var gR;gR=d6.editorO;gR==null?void 0:gR.$0.refresh();}function gj(gR){var gS;b7.Start((gS=null,b7.Delay(function(){return b7.Bind(b7.Sleep(gR),function(){gi();return b7.Zero();});})),null);}function gk(gR,gS){return f$(d6.editorO.$0);}function gl(gR,gS){return gh();}function gm(){dL.Set(true);}function gn(gR,gS){return new bW.New(gm,gR,gS);}function go(gR,gS,gT){return gn(gR,gS).get_ValueVar().Set(gT);}function gp(gR,gS){return bf.table(cm.ofSeq(b8.delay(function(){return b8.append([bf.thead([bf.th([bf.htmlText("Property"),bf.style("padding-right:10px")]),bf.th([bf.htmlText("Value")])])],b8.delay(function(){return b8.append(b8.map(function(gT){var gU;function gV(gW,gX){gU.Remove();return eb.Set(null);}gU=gn(gS,gT);return bf.tr([bf.td([bf.someElt(cE.Input([],gU.get_KeyVar()))]),bf.td([bf.someElt(cE.InputArea([bf.atr("style","height: 1.5em")],gU.get_ValueVar()))]),bn.hoverable(bf.td([bf.title("remove"),bf.style(" cursor: pointer "),bf.htmlText("x"),new bl({$:8,$0:cH.HandlerImpl("click",function(gW){return function(gX){return gV(gW,gX);};})})]))]);},b8.sort(gS.get_Keys())),b8.delay(function(){function gT(gU,gV){gS.Add("","1");gm();return eb.Set(null);}return[bf.tr([bn.hoverable(bf.td([bf.htmlText("Add..."),new bl({$:8,$0:cH.HandlerImpl("click",function(gU){return function(gV){return gT(gU,gV);};})})])),bf.td([bf.htmlText("")])])];}));}));})));}function gq(gR){function gS(gU){return gU.properties;}function gT(gU,gV){return x.New(gU.name,gU.content,gU.parent,gU.predecessors,gU.id,gU.expanded,gU.level,gU.levelCode,gV);}return eX(new ci.New$5(),function(gU){return bQ.codeSnippets().TryFindByKey(gU);},function(gU){return bQ.codeSnippets().LensInto(gS,gT,gU);},gR);}function gr(gR){return new bg({$:1,$0:gR});}function gs(gR,gS,gT,gU){var gV;return p.start(fj,(gV=gR(gS),(p.map(a.ignore))(gV)));}function gt(gR,gS,gT,gU){function gV(gW,gX){if(gW==null)fj("Failed!\n"+gX);else if(gW.$0[0].$==0){fj(gX);ed.Set(null);}else fj(gX);}return p.startV(function(gW){return gV(gW[0],gW[1]);},gR(gS));}function gu(gR,gS,gT){function gU(gV){return(gR(gT))(gV);}return ca.Curried(gs,2,[gU,gS]);}function gv(gR,gS,gT){function gU(gV){return(gR(gT))(gV);}return ca.Curried(gt,2,[gU,gS]);}function gw(gR){var gS,gT,gU;gS=gR.parms;return gS!=null&&gS.$==1&&((gU=gS.$0,!b9.Equals(gU,null)&&gU.length===1)&&(gT=cd.get(gS.$0,0),true))?bY.FetchByPathO(b_.SplitChars(gT,["/"],0)):fx();}function gx(gR,gS){var gT;gT=p.wrap();return gT.Run(gT.Delay(function(){return gT.Bind$2(bg.getAsync(gR.text),function(gU){var gV,gW,gX,gY,gZ,g0,g1,g2,g3,g5,g6,g7,g8,g9;function g4(g_){return g5==null?null:bQ["CodeSnippet.propValue"](g5.$0,g_);}fi(gU+"...");g5=fx();g6=gS?g.defaultValue("",(gW=g4("open"),gW==null?null:{$:1,$0:c.__(function(g_,g$){return g_+g$;},"\n",gW.$0)})):"";g7=cT.Create(function(){return g.defaultValue("${parm}() |> printfn \"%A\"",g4("action-template"));});g8=(g2=gR.parms,g2==null?null:{$:1,$0:cd.map(a.id,g2.$0)});switch(g8!=null&&g8.$==1?(g9=g8.$0,!b9.Equals(g9,null)&&g9.length===2?cd.get(g8.$0,0)==="Code"?(g3=cd.get(g8.$0,1),0):cd.get(g8.$0,0)==="Property"?(g3=cd.get(g8.$0,1),1):2:2):2){case 0:g1={$:1,$0:g3};break;case 1:g1=g4(g3);break;case 2:g1=null;break;}g0=g1==null?g4(gU):g1;gX=(gY=g.defaultWith(function(){return((cN.constructor("return function(parm) { return `"+g7.f()+"`}"))())(gU);},g0),b_.StartsWith(gY,"////")?gY:g6+gY);return g5!=null&&g5.$==1?gT.Bind$2((new cB.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.getPresence:1818471758",[bd.extractConfig(gX),(function(g_){return function(g$){return g_(b5.p$6(g$));};}(a.id))(g5.$0.id)]),function(g_){return b9.Equals(g_,{$:1,$0:"ok"})?gT.Return(gX):gT.Bind$3(fz(g5),function(){return gT.Return(gX);});}):gT.Return(gX);});}));}function gy(gR,gS){return p.bind(fC,gx(gR,true));}function gz(gR,gS){return p.bind(fG,gx(gR,false));}function gA(gR,gS){return fB(gw(gR));}function gB(gR,gS){return fF(gw(gR));}function gC(gR,gS){var gT;gT=gw(gR);return(dN(gS))(gT);}function gD(gR,gS){var gT;gT=p.wrapper();return gT.Run(gT.Delay(function(){return gT.Bind$1(m.tryProtection(),function(){var gU,gV,gW,gX,gY;return gT.Bind$1((gU=gR.parms,gU!=null&&gU.$==1&&((gW=gU.$0,!b9.Equals(gW,null)&&gW.length===3)&&(gV=[cd.get(gU.$0,1),cd.get(gU.$0,0),cd.get(gU.$0,2)],true))?(gX=gV[1],(g.defaultWith(function(){((function(gZ){return function(g0){return gZ("setSnippetProp snippet not found: "+cb.toSafe(g0));};}(function(gZ){ce.log(gZ);}))(gX));},(gY=bY.FetchByPathO(b_.SplitChars(gX,["/"],0)),gY==null?null:{$:1,$0:go(gY.$0.properties,gV[0],gV[2])})),m.succeed())):m.failSimpleError((function(gZ){return function(g0){return gZ("setSnippetProp wrong parms: "+b5.p$8(g0));};}(a.id))(gR.parms))),function(){return gT.Return();});});}));}function gE(gR,gS){var gT,gU,gV,gW,gX,gY;((function(gZ){return function(g0){return gZ("showOutText: "+b6.p$22(g0));};}(function(gZ){ce.log(gZ);}))(gR));gU=gR.parms;switch(gU!=null&&gU.$==1?(gV=gU.$0,!b9.Equals(gV,null)&&gV.length===1?(gT=cd.get(gU.$0,0),0):(gW=gU.$0,!b9.Equals(gW,null)&&gW.length===2?(cd.get(gU.$0,1),cd.get(gU.$0,0)===""?(gT=[cd.get(gU.$0,0),cd.get(gU.$0,1)],1):2):2)):2){case 0:return fi(gT);break;case 1:return fi(gT[1]);break;case 2:return gU!=null&&gU.$==1&&((gY=gU.$0,!b9.Equals(gY,null)&&gY.length===2)&&(cd.get(gU.$0,1),cd.get(gU.$0,0)==="+"&&(gX=[cd.get(gU.$0,0),cd.get(gU.$0,1)],true)))?fj(gX[1]):(function(gZ){return function(g0){return gZ("error: showOutText "+b6.p$22(g0));};}(function(gZ){ce.log(gZ);}))(gR);break;}}function gF(){return fH(c4.Get());}function gG(){var gR;gR=p.wrapper();return gR.Run(gR.Delay(function(){dE=null;return gR.Bind$2(f6(false),function(){return gR.Return();});}));}function gH(gR,gS){var gT,gU;function gV(gW,gX,gY){return gU>=gX&&gU<gY?{$:1,$0:gW}:null;}gT=gR.value;gU=gR.selectionStart;return gg(b8.pick(function(gW){return gV(gW[0],gW[1],gW[2]);},(b8.mapFold(function(gW,gX){return[[gX,gW,gW+gX.length+1],gW+gX.length+1];},0,b_.SplitChars(gT,["\n"],0)))[0]));}function gI(gR,gS){var gT;return b7.Start((gT=null,b7.Delay(function(){return b7.Bind(b7.Sleep(100),function(){gR.scrollTop=gR.scrollHeight;return b7.Zero();});})),null);}function gJ(gR,gS,gT){var gU;gU=m.result();return gU.Run(gU.Delay(function(){return gU.Bind(m.tryProtection(),function(){return gU.Bind(eR.GetGuiCallAction(gR,gS,gT),function(gV){var gW;gW=gV.onClick;gW==null?void 0:((gW.$0(gV))(null))(null);return gU.Zero();});});}));}function gK(gR){gj(1000);gj(2000);gj(3000);eR.SetLayoutJson(eL,gR);}function gL(gR){gj(1000);gj(2000);gj(3000);eR.AddNewSteps(eL,gR);}function gM(gR){return cd.ofSeq(b8.map(function(gS){return[gS.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gS.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gR));}function gN(gR){var gS;return{$:4,$0:(gS=gR.$0,gS==null?null:{$:1,$0:gS.$0[1]}),$1:cd.ofSeq(b8.map(function(gT){return[gT.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gT.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gR.$1))};}function gO(gR){var gS,gT;return{$:4,$0:(gS=function(gU){return function(gV){return gU(cb.prettyPrint(gV));};}(a.id),(gT=gR.$0,gT==null?null:{$:1,$0:gS(gT.$0)})),$1:cd.ofSeq(b8.map(function(gU){return[gU.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gU.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gR.$1))};}function gP(gR,gS){var gT;gT=null;return b7.Delay(function(){var gU,gV,gW,gX,gY,gZ,g0,g1,g2;return gS.$==2?b7.Return({$:1,$0:(gU=bY.FetchO(gS.$0),gU==null?null:{$:1,$0:gU.$0.content})}):gS.$==3?b7.Return({$:1,$0:(gV=bY.FetchO(gS.$0),gV==null?null:{$:1,$0:bQ["CodeSnippet.GetCodeFsx"](gV.$0,true)})}):gS.$==4?b7.Return({$:3,$0:g.defaultValue([],(gW=bY.FetchO(gS.$0),gW==null?null:{$:1,$0:bQ["CodeSnippet.Predecessors"](gW.$0)}))}):gS.$==5?b7.Return({$:2,$0:bY.FetchO(gS.$0)}):gS.$==6?b7.Return({$:1,$0:(gX=bY.FetchByPathO(gS.$0),gX==null?null:{$:1,$0:gX.$0.content})}):gS.$==7?b7.Return({$:1,$0:(gY=bY.FetchByPathO(gS.$0),gY==null?null:{$:1,$0:bQ["CodeSnippet.GetCodeFsx"](gY.$0,true)})}):gS.$==10?(gZ=bY.FetchByPathO(gS.$0),gZ==null?b7.Return({$:4,$0:null,$1:[["Snippet not found",z.FSError]]}):b7.Bind(be.translateAR(bQ["CodeSnippet.GetCodeFsx"](gZ.$0,true),false),function(g3){return b7.Return({$:4,$0:m.getOption(m.map(bN.completeJS,g3)),$1:gM(m.getMsgs(g3))});})):gS.$==8?b7.Return({$:3,$0:g.defaultValue([],(g0=bY.FetchByPathO(gS.$0),g0==null?null:{$:1,$0:bQ["CodeSnippet.Predecessors"](g0.$0)}))}):gS.$==9?b7.Return({$:2,$0:bY.FetchByPathO(gS.$0)}):gS.$==1?b7.Return({$:1,$0:{$:1,$0:"Message received: "+gS.$0}}):gS.$==0?b7.Return({$:0,$0:bQ.fsIds()}):gS.$==12?d.map(gN,p.getAsyncR(fw(gS.$1,bR.NewBrowser,bY.FetchO(gS.$0)))):gS.$==13?d.map(gN,p.getAsyncR(fw(gS.$1,bR.NewBrowser,bY.FetchByPathO(gS.$0)))):gS.$==14?(g1=gS.$0,b7.Return(gO(m.map(function(){return(function(g3){return function(g4){return g3("success: "+cb.toSafe(g4));};}(a.id))(g1);},gJ(g1,gS.$1,gS.$2))))):b7.Return({$:1,$0:{$:1,$0:(g2=cd.ofSeq((bQ.codeSnippets())["var"].Get()),co.stringify(((cr.EncodeArray(b4.j$7))())(g2)))}});});}function gQ(gR){!cm.contains(gR,eV.Get())?eV.Set(new cm.T({$:1,$0:gR,$1:eV.Get()})):void 0;gj(300);}cY=bV.Create$1("");cZ=bV.Create$1(w.get_New());c0="CodeEditor."+"currentCodeSnippetId";c1=a.localStorage.getItem(c0);c1!==null?cZ.Set((b3.j$7())(co.parse(c1))):void 0;bg.sink(function(gR){a.localStorage.setItem(c0,co.stringify((b4.j$5())(gR)));},cZ);c2=bV.Create$1();c3=bg.map2(function(gR){return function(){return bQ.codeSnippets().TryFindByKey(gR);};},cZ,c2);c4=bV.Create$1(bR.Below);c5="CodeEditor."+"position";c6=a.localStorage.getItem(c5);c6!==null?c4.Set((b3.j$8())(co.parse(c6))):void 0;bg.sink(function(gR){a.localStorage.setItem(c5,co.stringify((b4.j$6())(gR)));},c4);bg.map(function(gR){return gR.$==1;},c4);c7=bg.map(function(gR){return b9.Equals(bY.FetchO(gR),null);},cZ);c8=(c9=bg.map((c_=(c$=function(gR){return gR==null?null:e1(gR.$0);},function(gR){return c$(bY.FetchO(gR));}),function(gR){return e2(c_(gR));}),cZ),(da=[bV.Create$1(null)],(cD.Sink(function(gR){if(!b9.Equals(da[0].Get(),gR))da[0].Set(gR);},bg.toView(c9)),new bg({$:1,$0:da[0]}))));db=(dc=bg.map((dd=(de=function(gR){return gR==null?null:e3(gR.$0);},function(gR){return de(bY.FetchO(gR));}),function(gR){return e4(dd(gR));}),cZ),(df=[bV.Create$1(null)],(cD.Sink(function(gR){if(!b9.Equals(df[0].Get(),gR))df[0].Set(gR);},bg.toView(dc)),new bg({$:1,$0:df[0]}))));dg=(dh=bg.map((di=(dj=function(gR){return gR==null?null:e5(gR.$0);},function(gR){return dj(bY.FetchO(gR));}),function(gR){return e6(di(gR));}),cZ),(dk=[bV.Create$1(null)],(cD.Sink(function(gR){if(!b9.Equals(dk[0].Get(),gR))dk[0].Set(gR);},bg.toView(dh)),new bg({$:1,$0:dk[0]}))));dl=(dm=bg.map((dn=(_do=function(gR){return gR==null?null:e7(gR.$0);},function(gR){return _do(bY.FetchO(gR));}),function(gR){return e8(dn(gR));}),cZ),(dp=[bV.Create$1(null)],(cD.Sink(function(gR){if(!b9.Equals(dp[0].Get(),gR))dp[0].Set(gR);},bg.toView(dm)),new bg({$:1,$0:dp[0]}))));dq=(dr=bg.map((ds=(dt=function(gR){return gR==null?null:e9(gR.$0);},function(gR){return dt(bY.FetchO(gR));}),function(gR){return e_(ds(gR));}),cZ),(du=[bV.Create$1(null)],(cD.Sink(function(gR){if(!b9.Equals(du[0].Get(),gR))du[0].Set(gR);},bg.toView(dr)),new bg({$:1,$0:du[0]}))));dv=(dw=bg.map((dx=(dy=function(gR){return gR==null?null:e$(gR.$0);},function(gR){return dy(bY.FetchO(gR));}),function(gR){return fa(dx(gR));}),cZ),(dz=[bV.Create$1(null)],(cD.Sink(function(gR){if(!b9.Equals(dz[0].Get(),gR))dz[0].Set(gR);},bg.toView(dw)),new bg({$:1,$0:dz[0]}))));dA=bg.map(function(gR){return gR!=="0"&&gR!=="";},fb("DisableParse"));dB=bg.map2(function(gR){return function(gS){return fc(gR,gS);};},dA,fb("DisableFSI"));dC=bg.map2(function(gR){return function(gS){return fc(gR,gS);};},dA,fb("DisableFable"));dD=bg.map2(function(gR){return function(gS){return fc(gR,gS);};},dA,fb("DisableWebSharper"));dE=null;dF=new t.New(function(gR){var gS;gS=gR==null?null:{$:1,$0:new cQ.New$2(gR.$0.UniquePredecessors(bY.FetchO))};return g.defaultValue(new cQ.New$3(),gS);});dG=bV.Create$1("");dH=bV.Create$1("");dI=bV.Create$1("");dJ=bV.Create$1("");dK=false;dL=bV.Create$1(false);bg.sink(function(gR){a.onbeforeunload=gR?function(gS){gS.returnValue="Changes you made may not be saved.";}:null;},dL);dM=[w.get_New()];bZ.set_addOutMsg(fj);dN=(dO=a.location.origin+"/Main.html",(ca.Curried3(fw))(dO));dP=bg.map(function(gR){var gS,gT;gS=null;return dF.cache.TryGetValue(gR,{get:function(){return gS;},set:function(gU){gS=gU;}})?gS:(gT=dF.f(gR),(dF.cache.set_Item(gR,gT),gT));},c3);dQ=[0];dR=bV.Create$1("");bg.map(function(gR){return gR==="";},dR);dS="CodeEditorFileSel";dT=bp.New$3(bV.Lens(dR,fU,a.id)).Prefix$1(bf.label([bf["class"]("btn btn-primary"),bf.htmlText("Load File..."),bp.New$3(dR).Type("file").Style("display: none").Content([cH.HandlerImpl("change",function(gR){return function(gS){return fZ(gR,gS);};}),cH.HandlerImpl("click",function(gR){return function(gS){return f0(gR,gS);};})]).Id(dS).get_Render()]));cX!==""?b7.Start((dU=null,b7.Delay(function(){return b7.Bind(b7.Sleep(3000),function(){var gR;((function(gS){return function(gT){return gS("loading "+cb.toSafe(gT)+"...");};}(function(gS){ce.log(gS);}))(cX));gR=cU.getJSON(cX+"?t="+a.String(cV.now()));gR.done(function(){return fW(gR.responseText);});return b7.Zero();});})),null):void 0;dV=new bb.New("FSharpStation",{$:1,$0:a.location.href});dW=bQ.fsIds()+".fsx";dX="a";dY=cD.GetAsync(bg.toView(dA));dZ=0;d0=0;d1="";d2="\\((\\d+)\\) F# (.+).fsx\\((\\d+)\\,(\\d+)\\): (error|warning) ((.|\\b)+)";d3="(Err|Warning|Info)(FSharp|WebSharper)\\s+\"(\\((\\d+)\\) ?)?F?#? ?(.+?)(.fsx)? \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\) ((.|\\s)+?)"+"\"";d4=d2+"|"+d3;d5=c.asyncStartCancelling();d6=bv.New$3((d7=bg.toView(bg.fixit(cZ)),(d8=bV.Create$1(null),(d9=[null],(d_=[0],(d$=[0],(cD.Sink(function(){var gR,gS;gR=d9[0];gR==null?void 0:(gS=gR.$0,d_[0]>d$[0]?d$[0]=d_[0]:!b9.Equals(gS.Get(),d8.Get())?(d$[0]=d$[0]+1,gS.Set(d8.Get())):void 0);},d8.get_View()),cD.Sink(function(){var gR,gS;gR=d9[0];gR==null?void 0:(gS=gR.$0,d$[0]>d_[0]?d_[0]=d$[0]:!b9.Equals(gS.Get(),d8.Get())?(d_[0]=d_[0]+10,d8.Set(gS.Get())):void 0);},cD.Bind(function(gR){var gS;gS=e0(gR);d9[0]={$:1,$0:gS};d$[0]=d_[0]+100;d8.Set(gS.Get());return gS.get_View();},d7)),d8))))))).OnChange(function(){var gR;dE!=null&&dE.$==1&&(b9.Equals(dE.$0[0],cZ.Get())&&(gR=[dE.$0[0],dE.$0[2]],true))?fd():fe();}).OnRender(function(gR){var gS;function gT(gW){return gd(gW[0],gW[1],gW[2]);}function gU(gW){gR.replaceSelection(".","end");}function gV(gW){return gd(gW[0],gW[1],gW[2]);}gR.addKeyMap(bT.New(f$,f$,function(gW){bn.showHints(gR,gT,false,gW);},(gS=function(){bn.showHints(gR,gV,false,void 0);},function(gW){return gS(gU(gW));})));bn.setLint(gR,gb);bg.sink(function(gW){var gX;b7.Start((gX=null,b7.Delay(function(){gR.setOption("theme",gW);return b7.Bind(b7.Sleep(50),function(){gR.refresh();return b7.Zero();});})),null);},dl);bg.sink(function(gW){gR.setOption("mode",gW);},dg);}).Style("height: 100%");ea=d6.get_Render().AddChildren([new bl({$:8,$0:cH.HandlerImpl("dblclick",function(gR){return function(gS){return gk(gR,gS);};})}),bf.htmlElement("menu",[bf.type("context"),bf.Id("right-menu"),bf.htmlElement("menuitem",[bf.htmlAttribute("label","Goto Definition"),new bl({$:8,$0:cH.HandlerImpl("click",function(gR){return function(gS){return gl(gR,gS);};})})])]),bf.htmlAttribute("contextmenu","right-menu")]);bg.sink(function(){var gR;b7.Start((gR=null,b7.Delay(function(){var gS,gT;return!dK?b7.Zero():(gS=d6.editorO,gS!=null&&gS.$==1?(gT=bY.FetchO(cZ.Get()),gT!=null&&gT.$==1?(gS.$0.performLint(),b7.Zero()):b7.Zero()):b7.Zero());})),null);},dI);eb=bV.Create$1();ec=bf.div([new bl({$:2,$0:bg.map2(function(gR){return function(gS){return gp(gR,gS);};},eb,bg.bind(function(gR){return gr(gq(gR));},cZ))}),bf.css(" td.hovering { background: gray; } ")]);ed=bV.Create$1();ee=bH.New$1("Load...").OnClick(function(gR){return function(gS){return f1(gR,gS);};});ef=bH.New$1("Save as...").OnClick(ca.Curried(bn.Do,2,[fY,null])).Highlight(dL);eg=bH.New$1("Add Snippet").OnClick(ca.Curried(bn.Do,2,[fS,null]));eh=bH.New$1("Delete Snippet").OnClick(ca.Curried(bn.Do,2,[fT,null])).Disabled(c7);ei=bH.New$1("Indent In  >>").OnClick(ca.Curried(bn.Do,2,[fn,null])).Disabled(c7);ej=bH.New$1("Indent Out <<").OnClick(ca.Curried(bn.Do,2,[fo,null])).Disabled(c7);ek=bH.New$1("Get F# Code").OnClick(ca.Curried(bn.Do,2,[fl,null])).Disabled(dA);el=bH.New$1("actSetSnippetProp").OnClick2(function(gR){return gu(function(gS){return function(gT){return gD(gS,gT);};},null,gR);}).Disabled(dB);em=bH.New$1("Run FSI on Code").OnClick2(function(gR){return gu(function(gS){return function(gT){return gy(gS,gT);};},null,gR);}).Disabled(dB);en=bH.New$1("Run FSI").OnClick2(function(gR){return gu(function(gS){return function(gT){return gA(gS,gT);};},null,gR);}).Disabled(dB);eo=bH.New$1("Run Fable on Code").OnClick2(function(gR){return gu(function(gS){return function(gT){return gz(gS,gT);};},null,gR);}).Disabled(dC);ep=bH.New$1("Run Fable").OnClick2(function(gR){return gu(function(gS){return function(gT){return gB(gS,gT);};},null,gR);}).Disabled(dC);eq=bH.New$1("Run WebSharper in new tab").OnClick2((er=bR.NewBrowser,function(gR){return gu(function(gS){return function(gT){return gC(gS,gT);};},er,gR);})).Disabled(dD);es=bH.New$1("Run WebSharper in WS Result").OnClick2((et=bR.Below,function(gR){return gv(function(gS){return function(gT){return gC(gS,gT);};},et,gR);})).Disabled(dD);eu=bH.New$1("Run WebSharper in ...").OnClick(ca.Curried(gt,2,[gF,null])).Disabled(dD);ev=bH.New$1("Parse F#").OnClick(ca.Curried(gs,2,[gG,null])).Disabled(dA);ew=bH.New$1("Compile WebSharper").OnClick((ex=function(gR){return fp(fx(gR));},ca.Curried(gs,2,[ex,null]))).Disabled(dD);ey=bH.New$1("Find Definition").OnClick(ca.Curried(bn.Do,2,[gh,null])).Disabled(dA);ez=bH.New$1("Refresh CodeMirror").OnClick(ca.Curried(bn.Do,2,[gi,null]));eA=bH.New$1("Show Output text").OnClick2(ca.Curried(bn.Do2,3,[gE,null]));eB=bH.New$1("Abort FSI").OnClick(ca.Curried(bn.Do,2,[function(){bc.abortFsiExe();},null]));eC=bf.div([eg.get_Button().get_Render(),ej.get_Button().get_Render(),ei.get_Button().get_Render(),dT.get_Render().AddChildren([bf.style("grid-column: 4/6")]),en.get_Button().get_Render(),ep.get_Button().get_Render(),eu.get_Button().get_Render(),eh.get_Button().get_Render(),ey.get_Button().get_Render(),bf.span([]),ef.get_Button().get_Render(),bf.span([]),ek.get_Button().get_Render(),ev.get_Button().get_Render(),bf.someElt(cE.Select([cH.Create("id","Position")],function(gR){return gR.$==1?"Right":gR.$==2?"In Tab":gR.$==3?"New Browser":"Below";},cm.ofArray([bR.NewBrowser,bR.Below]),c4)),bf.style("\n                    overflow: hidden;\n                    display: grid;\n                    grid-template-columns: repeat(8, 12.1%);\n                    bxackground-color: #eee;\n                    padding : 5px;\n                    grid-gap: 5px;\n                ")]);eD=bG.New2([bE.New$2("File").SubMenu([ee.get_MenuEntry(),ef.get_MenuEntry()]),bE.New$2("Code").SubMenu([eg.get_MenuEntry(),eh.get_MenuEntry(),bE.New$2("").get_Divider(),ei.get_MenuEntry(),ej.get_MenuEntry(),bE.New$2("").get_Divider(),ey.get_MenuEntry(),bE.New$2("").get_Divider(),ek.get_MenuEntry(),bE.New$2("").get_Divider(),ez.get_MenuEntry()]),bE.New$2("Run").SubMenu([en.get_MenuEntry(),eB.get_MenuEntry(),bE.New$2("").get_Divider(),ep.get_MenuEntry(),bE.New$2("").get_Divider(),eq.get_MenuEntry(),es.get_MenuEntry(),bE.New$2("").get_Divider(),ev.get_MenuEntry(),ew.get_MenuEntry()])]);eE=bG.New2([bE.New$2("About").SubMenu([bE.New$1("Source @ GitHub","https://github.com/amieres/FSharpStation").Target("_blank")])]);eF=bn.navbar(bf.h1([bf.htmlText("F# Station"),bf.style("font-size: 48px; margin-top: -17px")]),eD.get_Render(),eE.get_Render());eG="CodeEditor."+"splitterV1";eH=bA.New$1(20).Children([bf.style("grid-row: 2 / 4")]).get_Var();eI=a.localStorage.getItem(eG);eI!==null?eH.Set(((cr.Id())())(co.parse(eI))):void 0;bg.sink(function(gR){a.localStorage.setItem(eG,co.stringify(((cr.Id())())(gR)));},eH);eJ=bf.bindHElem(function(gR){return bf.div(cm.ofSeq(b8.delay(function(){return b8.append([bf.style("overflow: auto")],b8.delay(function(){var gS;return b8.append(b8.choose(a.id,(gS=b8.indexed(gR),b8.mapFold(function(gT,gU){var gV,gW,gX,gY,gZ;gV=gU[1];return g.defaultValue(true,(gW=gV.parent,gW==null?null:{$:1,$0:gT.Contains(gW.$0)}))?(gX=g.defaultValue(false,(gY=b8.tryItem(gU[0]+1,bQ.codeSnippets()),gY==null?null:{$:1,$0:b9.Equals(gY.$0.parent,{$:1,$0:gV.id})})),(gZ=gX&&gV.expanded,[{$:1,$0:fM(gX,gZ,gV)},gZ?gT.Add(gV.id):gT])):[null,gT];},new cK.New(cm.T.Empty),gS))[0]),b8.delay(function(){function gT(gU,gV){dQ[0]=gU.scrollTop;}return b8.append([new bl({$:8,$0:cH.HandlerImpl("scroll",function(gU){return function(gV){return gT(gU,gV);};})})],b8.delay(function(){return[new bl({$:8,$0:cG.OnAfterRender(function(gU){gU.scrollTop=dQ[0];})})];}));}));}));})));},(eK=bQ.codeSnippets().v,cD.SnapshotOn((bQ.codeSnippets())["var"].Get(),c2.get_View(),eK)));eL=bM.AddGuids([["actLoadFile",new bI({$:2,$0:ee})],["actSaveFile",new bI({$:2,$0:ef})],["actAddSnippet",new bI({$:2,$0:eg})],["actDeleteSnippet",new bI({$:2,$0:eh})],["actIndentSnippet",new bI({$:2,$0:ei})],["actOutdentSnippet",new bI({$:2,$0:ej})],["actGetFsCode",new bI({$:2,$0:ek})],["actSetSnippetProp",new bI({$:2,$0:el})],["actEvalFsCode",new bI({$:2,$0:em})],["actEvalCode",new bI({$:2,$0:en})],["actRunFableFs",new bI({$:2,$0:eo})],["actRunFable",new bI({$:2,$0:ep})],["actRunWSNewTab",new bI({$:2,$0:eq})],["actRunWSHere",new bI({$:2,$0:es})],["actRunWSIn",new bI({$:2,$0:eu})],["actParseCode",new bI({$:2,$0:ev})],["actCompileWS",new bI({$:2,$0:ew})],["actFindDefinition",new bI({$:2,$0:ey})],["actOutText",new bI({$:2,$0:eA})],["Output",new bI({$:1,$0:bs.New$3(dJ).Placeholder("Output:").Title("Output").RenderWith(cm.ofArray([new bl({$:8,$0:cH.HandlerImpl("dblclick",function(gR){return function(gS){return gH(gR,gS);};})}),new bl({$:8,$0:cG.OnAfterRender(function(gR){bg.sink(function(gS){return gI(gR,gS);},dJ);})})]))})],["Parser",new bI({$:1,$0:bs.New$3(dI).Placeholder("Parser messages:").Title("Parser").RenderWith(cm.ofArray([new bl({$:8,$0:cH.HandlerImpl("dblclick",function(gR){return function(gS){return gH(gR,gS);};})})]))})],["JavaScript",new bI({$:1,$0:bs.New$3(dH).Placeholder("Javascript:").Title("JavaScript code generated").get_Render()})],["F# code",new bI({$:1,$0:bs.New$3(dG).Placeholder("F# code:").Title("F# code assembled").get_Render()})],["Properties",new bI({$:1,$0:ec})],["WS Result",new bI({$:1,$0:bf.div([bf.div([bf.Id("TestNode"),bf.style("background: white; height: 100%; width: 100%; ")])])})],["title",new bI({$:1,$0:bp.New$3((eM=bg.toView(bg.fixit(cZ)),(eN=bV.Create$1(null),(eO=[null],(eP=[0],(eQ=[0],(cD.Sink(function(){var gR,gS;gR=eO[0];gR==null?void 0:(gS=gR.$0,eP[0]>eQ[0]?eQ[0]=eP[0]:!b9.Equals(gS.Get(),eN.Get())?(eQ[0]=eQ[0]+1,gS.Set(eN.Get())):void 0);},eN.get_View()),cD.Sink(function(){var gR,gS;gR=eO[0];gR==null?void 0:(gS=gR.$0,eQ[0]>eP[0]?eP[0]=eQ[0]:!b9.Equals(gS.Get(),eN.Get())?(eP[0]=eP[0]+10,eN.Set(gS.Get())):void 0);},cD.Bind(function(gR){var gS;gS=eZ(gR);eO[0]={$:1,$0:gS};eQ[0]=eP[0]+100;eN.Set(gS.Get());return gS.get_View();},eM)),eN))))))).Prefix$1(bf.htmlText("name:")).get_Render()})],["code",new bI({$:1,$0:ea})],["snippets",new bI({$:1,$0:eJ})],["buttons",new bI({$:1,$0:eC})],["menu",new bI({$:1,$0:eF})],["messagesR",new bI({$:4,$0:true,$1:["Properties"]})],["messagesB1",new bI({$:4,$0:true,$1:["Output","JavaScript","F# code"]})],["messagesB2",new bI({$:4,$0:true,$1:["Parser","WS Result"]})],["messagesB",bn.varVerSplitter(55,"messagesB1","messagesB2",0,100)],["title_code",bn.fixedHorSplitter(true,34,"title","code")],["code_props",bn.varVerSplitter(85,"title_code","messagesR",25,100)],["code_buttons",bn.fixedHorSplitter(false,80,"code_props","buttons")],["snippets_code",bn.varVerSplitter(15,"snippets","code_buttons",5,95)],["main_messages",bn.varHorSplitter(82,"snippets_code","messagesB",35,100)],["extrabuttons",new bI({$:1,$0:bf.div([])})],["main_extra",bn.varVerSplitter(100,"main_messages","extrabuttons",20,100)],["main",bn.fixedHorSplitter(true,50,"menu","main_extra")]]);eR=bM.New$1(eL);a.addLayoutJson=gK;bg.sink(gK,dq);bg.sink(function(gR){if(gR==="")gL([]);else fr(a,gR);},dv);a.doFSharpStationGuiCall=function(gR){var gS,gT;gS=m.Success(gJ.apply(null,gR));gS.$==1?((gT=(ca.Curried3(function(gU,gV,gW){return gU("Error doGuiCall "+cb.printArray(cb.prettyPrint,gV)+": "+("("+cb.prettyPrint(gW[0])+", "+cb.prettyPrint(gW[1])+", "+cb.printArray(cb.prettyPrint,gW[2])+")"));}))(function(gU){ce.log(gU);}),function(gU){var gV;gV=gT(gU);return function(gW){gV([gW[0],gW[1],gW[2]]);};})(gS.$0))(gR):void 0;};a.setFSharpStationLayout=function(gR){var gS;gS=bY.FetchO(cZ.Get());gS==null?void 0:gL(gR.apply(null,[eR,gS.$0]));};eS=null;(new ci.New$5()).TryGetValue("",{get:function(){return eS;},set:function(gR){eS=gR;}})?void 0:void 0;br.get_New();eT=new L.New(bQ.fsIds(),null,null);b7.Start((eU=null,b7.Delay(function(){return b7.Bind(b7.Sleep(1000),function(){return b7.While(function(){return true;},b7.Delay(function(){return b7.TryWith(b7.Delay(function(){var gR,gS,gT,gU,gV;function gW(gZ){return gP("",gZ);}function gX(gZ){return{$:1,$0:gZ};}function gY(gZ){return(b3.j$9())(co.parse(gZ));}gR=function(gZ){return gX(gW(gZ));};eT.payloadProcessorO={$:1,$0:(gS=function(gZ){return gR(gY(gZ));},(gT=p.map(function(gZ){return co.stringify((b4.j$8())(gZ));}),function(gZ){return gT(gS(gZ));}))};p.Start(eT.sendAndForget(A.msgType(D.MsgInformation,(gU=A.MessageBrokerAddress(),(gV=co.stringify(((cr.Id())())("Registering Processor")),G.New(new B({$:0,$0:""}),gU,D.MsgRequest,"",cl.NewGuid(),gV,F.NoReply))))),null);return b7.Bind(b7.Sleep(60000),function(){return b7.Return(null);});}),function(gR){((function(gS){return function(gT){return gS(cb.toSafe(gT));};}(function(gS){ce.log(gS);}))(gR.message));return b7.Bind(b7.Sleep(1000),function(){return b7.Return(null);});});}));});})),null);bg.sink(function(){eR.SelectTab("Output");},dJ);bg.sink(function(){eR.SelectTab("WS Result");},ed);b7.Start(d.sleepThen(function(){eR.SelectTab("Parser");},1000),null);eV=bV.Create$1(cm.ofArray(["/EPFileX/css/main.css"]));bg.sink(gQ,db);bg.sink(function(gR){if(gR!=="")gQ((function(gS){return function(gT){return gS("/EPFileX/codemirror/content/theme/"+cb.toSafe(gT)+".css");};}(a.id))(gR));},dl);eW=bf.div([bf.style("height: 100vh; width: 100% "),eR.get_Render().Style("height: 100%; width: 100% "),bf.script([bf.src("/EPFileX/FileSaver/FileSaver.js"),bf.type("text/javascript")]),bf.script([bf.src("http://code.jquery.com/jquery-3.1.1.min.js"),bf.type("text/javascript")]),bf.script([bf.src("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"),bf.type("text/javascript")]),bf.link([bf.href("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css("\n      \n        body { margin: 0px }     \n             \n        div textarea {\n            font-family     : monospace;\n        }\n        .code-editor-list-tile {\n            white-space     : nowrap; \n            border-style    : solid none none;\n            border-color    : white;\n            border-width    : 1px;\n            background-color: #D8D8D8;\n            display         : flex;\n        }\n        .code-editor-list-text{\n            padding         : 1px 10px 1px 5px;\n            overflow        : hidden;\n            text-overflow   : ellipsis;\n            white-space     : nowrap;\n            flex            : 1;\n        }\n        \n        .code-editor-list-tile.direct-predecessor {\n            font-weight     : bold;\n        }\n        .code-editor-list-tile.indirect-predecessor {\n            color           : blue;\n        }\n        .code-editor-list-tile.selected {\n            background-color: #77F;\n            color           : white;\n        }\n        .code-editor-list-tile.hovering {\n            background      : lightgray;\n        }\n        .code-editor-list-tile.hovering.selected {\n            background      : blue;\n        }\n        .code-editor-list-tile>.predecessor {\n            font-weight     : bold;\n            border-style    : inset;\n            border-width    : 1px;\n            text-align      : center;\n            color           : transparent;\n        }\n        .code-editor-list-tile.direct-predecessor>.predecessor {\n            color           : blue;\n        }\n        \n        .CodeMirror { height: 100%; }\n        \n        .node {\n            background-color: white; \n            width           : 2ch; \n            color           : #A03; \n            font-weight     : bold; \n            text-align      : center;\n            font-family     : arial;\n        }\n        .Warning { text-decoration: underline lightblue } \n        .Error   { text-decoration: underline red       } \n        .body    { margin         : 0px                 }\n        "),bf.style(" \n                color      : #333;\n                font-size  : small;\n                font-family: monospace;\n                line-height: 1.2;\n                    "),new bl({$:2,$0:bg.map(function(gR){return bf.div(cm.ofSeq(b8.delay(function(){return b8.map(function(gS){return bf.link([bf.href(gS),bf.type("text/css"),bf.rel("stylesheet")]);},gR);})));},eV)}),bf.css(c8)]);return(bf.renderDoc())(eW);};b2.$cctor=function(){var cX,cY,cZ;b2.$cctor=a.ignore;function c0(c1,c2){return new bl({$:8,$0:cG.Style(c1,c2)});}b2.result=new n.New();b2.fromResult=m.toResultS;b2.toResult=m.fromResultS;b2.errOptionIsNone=new k.New();b2.wrap=new q.New();b2.wrapper=new q.New();b2.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";b2.MessageBrokerId="<MessageBroker>";b2.MessageBrokerAddress=new B({$:0,$0:A.MessageBrokerId()});b2.counter=1;b2.valFlow=new bk.New();b2.renderDoc=(cX=(cY=cE.Empty(),function(c1){return c1==null?cY:c1.$0;}),function(c1){return cX(bf.chooseNode(c1));});b2.string2Styles=(cZ=function(c1){return cd.map(function(c2){return c0(c2[0],c2[1]);},c1);},function(c1){return cZ(bf.style2pairs(c1));});b2.codeMirrorIncludes=["/EPFileX/codemirror/scripts/codemirror/codemirror.js","/EPFileX/codemirror/scripts/intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-compiler.js","/EPFileX/codemirror/scripts/codemirror/mode/none.js","/EPFileX/codemirror/scripts/codemirror/mode/fsharp.js","/EPFileX/codemirror/scripts/codemirror/mode/css.js","/EPFileX/codemirror/scripts/codemirror/mode/javascript.js","/EPFileX/codemirror/scripts/codemirror/mode/markdown.js","/EPFileX/codemirror/scripts/addon/search/searchcursor.js","/EPFileX/codemirror/scripts/addon/search/search.js","/EPFileX/codemirror/scripts/addon/search/jump-to-line.js","/EPFileX/codemirror/scripts/addon/dialog/dialog.js","/EPFileX/codemirror/scripts/addon/edit/matchbrackets.js","/EPFileX/codemirror/scripts/addon/selection/active-line.js","/EPFileX/codemirror/scripts/addon/display/fullscreen.js","/EPFileX/codemirror/scripts/addon/hint/show-hint.js","/EPFileX/codemirror/scripts/addon/lint/lint.js"];b2.observers=cm.T.Empty;b2.draggedTab=[null];b2.selectedPanels=bV.Create$1(new cz.New([]));b2.TabMoved=null;b2.codeSnippets=cW.Create(function(c1){return c1.id;},cm.T.Empty);b2.fsIds="FSharpStation"+a.String(cV.now());b2.references=["mscorlib.dll","System.dll","System.Core.dll","System.Data.dll","System.IO.dll","System.Xml.dll","System.Numerics.dll","FSharp.Core.sigdata","FSharp.Core.dll","Fable.Core.dll","Fable.Import.Browser.dll"];b2.loadReferences=cT.Create(function(){var c1;b7.Start((c1=null,b7.Delay(function(){return b7.Bind(bm.LoadFilesAsync(["https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.2/require.min.js"]),function(){var c2;c2=cN.create(null);c2.skipDataMain=1;c2.isBrowser=1;a.require.config(c2);b8.iter(function(c3){a.getFileBlob(c3,"metadata/"+c3);},bZ.references());return b7.Zero();});})),null);});b2.getChecker=cT.Create(function(){return cO.createChecker(function(c1){return a.metadata[c1];},cd.choose(function(c1){return c1.indexOf("sigdata")!=-1?null:{$:1,$0:b_.Replace(c1,".dll","")};},bZ.references()));});b2.addOutMsg=function(c1){ce.log(c1);};};b3.j$4=function(){return b3._v$4?b3._v$4:b3._v$4=(cr.DecodeUnion(void 0,"$",[[0,[["$0","Item",cr.Id(),0]]],[1,[["$0","Item",cr.Id(),1]]],[2,[["$0","Item",b3.j$6,1]]],[3,[["$0","Item",cr.DecodeArray(b3.j$6),0]]],[4,[["$0","Item1",cr.Id(),1],["$1","Item2",cr.DecodeArray(cr.DecodeTuple([cr.Id(),b3.j$5])),0]]]]))();};b3.j$6=function(){return b3._v$6?b3._v$6:b3._v$6=(cr.DecodeRecord(x,[["name",cr.Id(),0],["content",cr.Id(),0],["parent",b3.j$7,1],["predecessors",cr.DecodeList(b3.j$7),0],["id",b3.j$7,0],["expanded",cr.Id(),0],["level",cr.Id(),0],["levelCode",cr.Id(),0],["properties",cr.DecodeStringDictionary(cr.Id()),0]]))();};b3.j$7=function(){return b3._v$7?b3._v$7:b3._v$7=(cr.DecodeUnion(w,"$",[[0,[["$0","Item",cr.Id(),0]]]]))();};b3.j$5=function(){return b3._v$5?b3._v$5:b3._v$5=(cr.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};b4.j$4=function(){return b4._v$4?b4._v$4:b4._v$4=(cr.EncodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",cr.Id(),0]]],[2,[["$0","Item",b4.j$5,0]]],[3,[["$0","Item",b4.j$5,0]]],[4,[["$0","Item",b4.j$5,0]]],[5,[["$0","Item",b4.j$5,0]]],[6,[["$0","Item",cr.EncodeArray(cr.Id()),0]]],[7,[["$0","Item",cr.EncodeArray(cr.Id()),0]]],[8,[["$0","Item",cr.EncodeArray(cr.Id()),0]]],[9,[["$0","Item",cr.EncodeArray(cr.Id()),0]]],[10,[["$0","Item",cr.EncodeArray(cr.Id()),0]]],[11,[]],[12,[["$0","Item1",b4.j$5,0],["$1","Item2",cr.Id(),0]]],[13,[["$0","Item1",cr.EncodeArray(cr.Id()),0],["$1","Item2",cr.Id(),0]]],[14,[["$0","name",cr.Id(),0],["$1","action",cr.Id(),0],["$2","parms",cr.EncodeArray(cr.Id()),0]]]]))();};b4.j$5=function(){return b4._v$5?b4._v$5:b4._v$5=(cr.EncodeUnion(w,"$",[[0,[["$0","Item",cr.Id(),0]]]]))();};b5.p$1=function(cX){return"Address "+cb.prettyPrint(cX.$0);};b4.j$8=function(){return b4._v$8?b4._v$8:b4._v$8=(cr.EncodeUnion(void 0,"$",[[0,[["$0","Item",cr.Id(),0]]],[1,[["$0","Item",cr.Id(),1]]],[2,[["$0","Item",b4.j$7,1]]],[3,[["$0","Item",cr.EncodeArray(b4.j$7),0]]],[4,[["$0","Item1",cr.Id(),1],["$1","Item2",cr.EncodeArray(cr.EncodeTuple([cr.Id(),b4.j$9])),0]]]]))();};b4.j$9=function(){return b4._v$9?b4._v$9:b4._v$9=(cr.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};b3.j$9=function(){return b3._v$9?b3._v$9:b3._v$9=(cr.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",cr.Id(),0]]],[2,[["$0","Item",b3.j$7,0]]],[3,[["$0","Item",b3.j$7,0]]],[4,[["$0","Item",b3.j$7,0]]],[5,[["$0","Item",b3.j$7,0]]],[6,[["$0","Item",cr.DecodeArray(cr.Id()),0]]],[7,[["$0","Item",cr.DecodeArray(cr.Id()),0]]],[8,[["$0","Item",cr.DecodeArray(cr.Id()),0]]],[9,[["$0","Item",cr.DecodeArray(cr.Id()),0]]],[10,[["$0","Item",cr.DecodeArray(cr.Id()),0]]],[11,[]],[12,[["$0","Item1",b3.j$7,0],["$1","Item2",cr.Id(),0]]],[13,[["$0","Item1",cr.DecodeArray(cr.Id()),0],["$1","Item2",cr.Id(),0]]],[14,[["$0","name",cr.Id(),0],["$1","action",cr.Id(),0],["$2","parms",cr.DecodeArray(cr.Id()),0]]]]))();};b6.p$22=function(cX){return"{"+("text = "+b5.p$9(cX.text))+"; "+("highlight = "+b5.p$11(cX.highlight))+"; "+("disabled = "+b5.p$11(cX.disabled))+"; "+("toolTip = "+b5.p$13(cX.toolTip))+"; "+("onClick = "+b5.p$14(cX.onClick))+"; "+("parms = "+b5.p$8(cX.parms))+"}";};b5.p$14=function(cX){return cX==null?"null":"Some <fun>";};b5.p$13=function(cX){return cX==null?"null":"Some "+cb.prettyPrint(cX.$0);};b5.p$11=function(cX){return cX.$==2?"Dynamic "+b5.p$12(cX.$0):cX.$==1?"DynamicV "+cb.prettyPrint(cX.$0):"Constant "+cb.prettyPrint(cX.$0);};b5.p$12=function(cX){return"View <fun>";};b5.p$9=function(cX){return cX.$==2?"Dynamic "+b5.p$10(cX.$0):cX.$==1?"DynamicV "+cb.prettyPrint(cX.$0):"Constant "+cb.prettyPrint(cX.$0);};b5.p$10=function(cX){return"View <fun>";};b5.p$8=function(cX){return cX==null?"null":"Some "+cb.printArray(cb.prettyPrint,cX.$0);};b5.p$7=function(cX){return cX.$==17?"KMultiple "+cb.printArray(function(cY){return b5.p$7(cY);},cX.$0):cX.$==16?"KUnionCase "+b6.p$21(cX.$0):cX.$==15?"KNamespaces "+b6.p$18(cX.$0):cX.$==14?"KCompilerLocation "+b6.p$17(cX.$0):cX.$==13?"KSignatureData "+b6.p$15(cX.$0):cX.$==12?"KTypeSig "+cb.prettyPrint(cX.$0):cX.$==11?"KToolTip "+cb.printArray(function(cY){return cb.printArray(function(cZ){return b6.p$2(cZ);},cY);},cX.$0):cX.$==10?"KDeclarations "+cb.printArray(function(cY){return b6.p$13(cY);},cX.$0):cX.$==9?"KFindDecl "+b6.p$12(cX.$0):cX.$==8?"KColorizations "+cb.printList(function(cY){return b6.p$11(cY);},cX.$0):cX.$==7?"KErrors "+b6.p$9(cX.$0):cX.$==6?"KMethod "+b6.p$6(cX.$0):cX.$==5?"KHelp "+cb.prettyPrint(cX.$0):cX.$==4?"KSymbolUse "+b6.p$4(cX.$0):cX.$==3?"KCompletion "+cb.printArray(function(cY){return b6.p$3(cY);},cX.$0):cX.$==2?"KHelpText "+b6.p$1(cX.$0):cX.$==1?"KError "+b6.p(cX.$0):"KInfo "+cb.prettyPrint(cX.$0);};b6.p$21=function(cX){return"{"+("Text = "+cb.prettyPrint(cX.Text))+"}";};b6.p$18=function(cX){return"{"+("Opens = "+cb.printArray(function(cY){return b6.p$19(cY);},cX.Opens))+"; "+("Qualifies = "+cb.printArray(function(cY){return b6.p$20(cY);},cX.Qualifies))+"; "+("Word = "+cb.prettyPrint(cX.Word))+"}";};b6.p$20=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("Qualifier = "+cb.prettyPrint(cX.Qualifier))+"}";};b6.p$19=function(cX){return"{"+("Namespace = "+cb.prettyPrint(cX.Namespace))+"; "+("Name = "+cb.prettyPrint(cX.Name))+"; "+("Type = "+cb.prettyPrint(cX.Type))+"; "+("Line = "+cb.prettyPrint(cX.Line))+"; "+("Column = "+cb.prettyPrint(cX.Column))+"; "+("MultipleNames = "+cb.prettyPrint(cX.MultipleNames))+"}";};b6.p$17=function(cX){return"{"+("Fsc = "+cb.prettyPrint(cX.Fsc))+"; "+("Fsi = "+cb.prettyPrint(cX.Fsi))+"; "+("MSBuild = "+cb.prettyPrint(cX.MSBuild))+"}";};b6.p$15=function(cX){return"{"+("OutputType = "+cb.prettyPrint(cX.OutputType))+"; "+("Parameters = "+cb.printList(function(cY){return cb.printList(function(cZ){return b6.p$16(cZ);},cY);},cX.Parameters))+"}";};b6.p$16=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("Type = "+cb.prettyPrint(cX.Type))+"}";};b6.p$13=function(cX){return"{"+("Declaration = "+b6.p$14(cX.Declaration))+"; "+("Nested = "+cb.printArray(function(cY){return b6.p$14(cY);},cX.Nested))+"}";};b6.p$14=function(cX){return"{"+("UniqueName = "+cb.prettyPrint(cX.UniqueName))+"; "+("Name = "+cb.prettyPrint(cX.Name))+"; "+("Glyph = "+cb.prettyPrint(cX.Glyph))+"; "+("GlyphChar = "+cb.prettyPrint(cX.GlyphChar))+"; "+("IsTopLevel = "+cb.prettyPrint(cX.IsTopLevel))+"; "+("File = "+cb.prettyPrint(cX.File))+"; "+("EnclosingEntity = "+cb.prettyPrint(cX.EnclosingEntity))+"; "+("IsAbstract = "+cb.prettyPrint(cX.IsAbstract))+"}";};b6.p$12=function(cX){return"{"+("File = "+cb.prettyPrint(cX.File))+"; "+("Line = "+cb.prettyPrint(cX.Line))+"; "+("Column = "+cb.prettyPrint(cX.Column))+"}";};b6.p$11=function(cX){return"{"+("Kind = "+cb.prettyPrint(cX.Kind))+"}";};b6.p$9=function(cX){return"{"+("File = "+cb.prettyPrint(cX.File))+"; "+("Errors = "+cb.printArray(function(cY){return b6.p$10(cY);},cX.Errors))+"}";};b6.p$10=function(cX){return"{"+("FileName = "+cb.prettyPrint(cX.FileName))+"; "+("StartLine = "+cb.prettyPrint(cX.StartLine))+"; "+("EndLine = "+cb.prettyPrint(cX.EndLine))+"; "+("StartColumn = "+cb.prettyPrint(cX.StartColumn))+"; "+("EndColumn = "+cb.prettyPrint(cX.EndColumn))+"; "+("Message = "+cb.prettyPrint(cX.Message))+"; "+("Subcategory = "+cb.prettyPrint(cX.Subcategory))+"}";};b6.p$6=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("CurrentParameter = "+cb.prettyPrint(cX.CurrentParameter))+"; "+("Overloads = "+cb.printList(function(cY){return b6.p$7(cY);},cX.Overloads))+"}";};b6.p$7=function(cX){return"{"+("Tip = "+cb.printList(function(cY){return cb.printList(function(cZ){return b6.p$2(cZ);},cY);},cX.Tip))+"; "+("TypeText = "+cb.prettyPrint(cX.TypeText))+"; "+("Parameters = "+cb.printList(function(cY){return b6.p$8(cY);},cX.Parameters))+"; "+("IsStaticArguments = "+cb.prettyPrint(cX.IsStaticArguments))+"}";};b6.p$8=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("CanonicalTypeTextForSorting = "+cb.prettyPrint(cX.CanonicalTypeTextForSorting))+"; "+("Display = "+cb.prettyPrint(cX.Display))+"; "+("Description = "+cb.prettyPrint(cX.Description))+"}";};b6.p$4=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("Uses = "+cb.printList(function(cY){return b6.p$5(cY);},cX.Uses))+"}";};b6.p$5=function(cX){return"{"+("FileName = "+cb.prettyPrint(cX.FileName))+"; "+("StartLine = "+cb.prettyPrint(cX.StartLine))+"; "+("StartColumn = "+cb.prettyPrint(cX.StartColumn))+"; "+("EndLine = "+cb.prettyPrint(cX.EndLine))+"; "+("EndColumn = "+cb.prettyPrint(cX.EndColumn))+"; "+("IsFromDefinition = "+cb.prettyPrint(cX.IsFromDefinition))+"; "+("IsFromAttribute = "+cb.prettyPrint(cX.IsFromAttribute))+"; "+("IsFromComputationExpression = "+cb.prettyPrint(cX.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+cb.prettyPrint(cX.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+cb.prettyPrint(cX.IsFromPattern))+"; "+("IsFromType = "+cb.prettyPrint(cX.IsFromType))+"}";};b6.p$3=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("ReplacementText = "+cb.prettyPrint(cX.ReplacementText))+"; "+("Glyph = "+cb.prettyPrint(cX.Glyph))+"; "+("GlyphChar = "+cb.prettyPrint(cX.GlyphChar))+"}";};b6.p$1=function(cX){return"{"+("Name = "+cb.prettyPrint(cX.Name))+"; "+("Overloads = "+cb.printList(function(cY){return cb.printList(function(cZ){return b6.p$2(cZ);},cY);},cX.Overloads))+"}";};b6.p$2=function(cX){return"{"+("Signature = "+cb.prettyPrint(cX.Signature))+"; "+("Comment = "+cb.prettyPrint(cX.Comment))+"}";};b6.p=function(cX){return"{"+("Code = "+cb.prettyPrint(cX.Code))+"; "+("Message = "+cb.prettyPrint(cX.Message))+"}";};b4.j$7=function(){return b4._v$7?b4._v$7:b4._v$7=(cr.EncodeRecord(x,[["name",cr.Id(),0],["content",cr.Id(),0],["parent",b4.j$5,1],["predecessors",cr.EncodeList(b4.j$5),0],["id",b4.j$5,0],["expanded",cr.Id(),0],["level",cr.Id(),0],["levelCode",cr.Id(),0],["properties",cr.EncodeStringDictionary(cr.Id()),0]]))();};b5.p$6=function(cX){return"CodeSnippetId "+cb.prettyPrint(cX.$0);};b4.j$6=function(){return b4._v$6?b4._v$6:b4._v$6=(cr.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};b3.j$8=function(){return b3._v$8?b3._v$8:b3._v$8=(cr.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};b3.j$10=function(){return b3._v$10?b3._v$10:b3._v$10=(cr.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",cr.DecodeArray(cr.Id()),0]]]]))();};b4.j$10=function(){return b4._v$10?b4._v$10:b4._v$10=(cr.EncodeUnion(void 0,"type",[["BRGetConnections",[]]]))();};b3.j$11=function(){return b3._v$11?b3._v$11:b3._v$11=(cr.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",b3.j$1,0]]],["BMWebSocketError",[["$0","Item",cr.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",b3.j$2,0]]]]))();};b6.p$23=function(cX){return"{"+("from = "+b5.p$1(cX.from))+"; "+("destination = "+b5.p$1(cX.destination))+"; "+("msgType = "+b5.p$2(cX.msgType))+"; "+("subtype = "+cb.prettyPrint(cX.subtype))+"; "+("id = "+cb.prettyPrint(cX.id))+"; "+("payload = "+cb.prettyPrint(cX.payload))+"; "+("replier = "+b5.p$15(cX.replier))+"}";};b5.p$15=function(cX){return cX.$==2?"Receiver":cX.$==1?"Broker":"NoReply";};b5.p$16=function(cX){return cX.$==3?"Close":cX.$==2?"Open":cX.$==1?"Error":"Message "+b6.p$23(cX.$0);};b3.j$12=function(){return b3._v$12?b3._v$12:b3._v$12=(cr.DecodeRecord(void 0,[["GuiRoot",cr.Id(),1],["GuiTabStrip",cr.DecodeTuple([cr.Id(),cr.DecodeArray(cr.Id())]),1],["GuiSplit",cr.DecodeTuple([cr.Id(),cr.Id(),cr.Id(),cr.Id(),cr.Id(),cr.Id(),cr.Id(),cr.Id()]),1],["GuiNode",b3.j$13,1],["GuiCall",cr.DecodeTuple([cr.Id(),cr.Id(),cr.DecodeArray(cr.Id())]),1]]))();};b3.j$13=function(){return b3._v$13?b3._v$13:b3._v$13=(cr.DecodeRecord(void 0,[["HtmlElementF",cr.DecodeTuple([cr.Id(),cr.DecodeArray(b3.j$13)]),1],["HtmlAttributeF",cr.DecodeTuple([cr.Id(),cr.Id()]),1],["HtmlAttributeOF",cr.DecodeTuple([cr.Id(),b3.j$14]),1],["HtmlTextF",cr.Id(),1],["HtmlEmptyF",cr.Id(),1],["HtmlGuiPart",cr.Id(),1],["HtmlGuiCall",cr.DecodeTuple([cr.Id(),cr.Id(),cr.DecodeArray(cr.Id())]),1]]))();};b3.j$14=function(){return b3._v$14?b3._v$14:b3._v$14=(cr.DecodeUnion(void 0,"$",[null,[1,[["$0","Value",cr.Id(),0]]]]))();};b3.j$1=function(){return b3._v$1?b3._v$1:b3._v$1=(cr.DecodeUnion(B,"$",[[0,[["$0","address",cr.Id(),0]]]]))();};b3.j$2=function(){return b3._v$2?b3._v$2:b3._v$2=(cr.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};b3.j$3=function(){return b3._v$3?b3._v$3:b3._v$3=(cr.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};b3.j=function(){return b3._v?b3._v:b3._v=(cr.DecodeRecord(void 0,[["from",b3.j$1,0],["destination",b3.j$1,0],["msgType",b3.j$2,0],["subtype",cr.Id(),0],["id",cr.Id(),0],["payload",cr.Id(),0],["replier",b3.j$3,0]]))();};b4.j$1=function(){return b4._v$1?b4._v$1:b4._v$1=(cr.EncodeUnion(B,"$",[[0,[["$0","address",cr.Id(),0]]]]))();};b4.j$2=function(){return b4._v$2?b4._v$2:b4._v$2=(cr.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};b4.j$3=function(){return b4._v$3?b4._v$3:b4._v$3=(cr.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};b4.j=function(){return b4._v?b4._v:b4._v=(cr.EncodeRecord(void 0,[["from",b4.j$1,0],["destination",b4.j$1,0],["msgType",b4.j$2,0],["subtype",cr.Id(),0],["id",cr.Id(),0],["payload",cr.Id(),0],["replier",b4.j$3,0]]))();};b5.p$2=function(cX){return cX.$==5?"MsgRequestForEcho":cX.$==4?"MsgRequestForId":cX.$==3?"MsgFromBroker":cX.$==2?"MsgReply":cX.$==1?"MsgRequest":"MsgInformation";};b5.p=function(cX){return cX.$==5?"BMUnexpectedMsgType "+b5.p$2(cX.$0):cX.$==4?"BMReceiverCantReply":cX.$==3?"BMWebSocketError "+cb.prettyPrint(cX.$0):cX.$==2?"BMDestinationNotFound "+b5.p$1(cX.$0):cX.$==1?"BMOnlyBrokerShouldUse":"BMOk";};b5.p$3=function(cX){return cX.$==2?"FSInfor":cX.$==1?"FSWarning":"FSError";};b5.p$4=function(cX){return cX.$==1?"Snippet Not Found "+cb.prettyPrint(cX.$0):"FSMessage ("+cb.prettyPrint(cX.$0)+", "+b5.p$3(cX.$1)+")";};b5.p$5=function(cX){return cX.$==2?"Could not open new browser, Popup blocker may be active":cX.$==1?"Snippet Missing":"JsCompilerMsg ("+cb.prettyPrint(cX.$0)+", "+cb.prettyPrint(cX.$1)+")";};}());

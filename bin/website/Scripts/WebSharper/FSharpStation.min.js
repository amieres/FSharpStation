(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;a=window;b=a.FSSGlobal=a.FSSGlobal||{};c=b.Useful=b.Useful||{};d=c.Async=c.Async||{};e=c.KeyVal=c.KeyVal||{};f=c.String=c.String||{};g=c.Option=c.Option||{};h=a.WebSharper;i=h&&h.Obj;j=c.ExceptionThrown=c.ExceptionThrown||{};k=c.ErrOptionIsNone=c.ErrOptionIsNone||{};l=c.ErrSimple=c.ErrSimple||{};m=c.Result=c.Result||{};n=m.ropBuilder=m.ropBuilder||{};o=c.ResultS=c.ResultS||{};p=c.Wrap=c.Wrap||{};q=p.Builder=p.Builder||{};r=c.Mailbox=c.Mailbox||{};s=c.Dict=c.Dict||{};t=c.ResetableMemoize=c.ResetableMemoize||{};u=c.PreproDirective=c.PreproDirective||{};v=b.FsStationShared=b.FsStationShared||{};w=v.CodeSnippetId=v.CodeSnippetId||{};x=v.CodeSnippet=v.CodeSnippet||{};y=v.FSMessage=v.FSMessage||{};z=v.FSSeverity=v.FSSeverity||{};A=b.WSMessagingBroker=b.WSMessagingBroker||{};B=A.Address=A.Address||{};C=A.BrokerRequest=A.BrokerRequest||{};D=A.MessageType=A.MessageType||{};E=A.BrokerMessage=A.BrokerMessage||{};F=A.Replier=A.Replier||{};G=A.MessageGeneric=A.MessageGeneric||{};H=A.ClientTypeFSharp=A.ClientTypeFSharp||{};I=A.ClientTypeFSStation=A.ClientTypeFSStation||{};J=A.ClientTypeJScript=A.ClientTypeJScript||{};K=A.ErrBroker=A.ErrBroker||{};L=A.WSMessagingClient=A.WSMessagingClient||{};M=A.FsStationClientErr=A.FsStationClientErr||{};N=A.FStationMessaging=A.FStationMessaging||{};O=b.FSAutoCompleteIntermediary=b.FSAutoCompleteIntermediary||{};P=O.CommTypes=O.CommTypes||{};Q=P.ResponseError=P.ResponseError||{};R=P.Location=P.Location||{};S=P.CompletionResponse=P.CompletionResponse||{};T=P.OverloadDescription=P.OverloadDescription||{};U=P.OverloadParameter=P.OverloadParameter||{};V=P.Overload=P.Overload||{};W=P.Parameter=P.Parameter||{};X=P.SignatureData=P.SignatureData||{};Y=P.MethodResponse=P.MethodResponse||{};Z=P.SymbolUseRange=P.SymbolUseRange||{};_0=P.SymbolUseResponse=P.SymbolUseResponse||{};_1=P.HelpTextResponse=P.HelpTextResponse||{};_2=P.CompilerLocationResponse=P.CompilerLocationResponse||{};_3=P.FSharpErrorInfo=P.FSharpErrorInfo||{};_4=P.ErrorResponse=P.ErrorResponse||{};_5=P.Colorization=P.Colorization||{};_6=P.Declaration=P.Declaration||{};_7=P.DeclarationResponse=P.DeclarationResponse||{};_8=P.OpenNamespace=P.OpenNamespace||{};_9=P.QualifySymbol=P.QualifySymbol||{};_=P.ResolveNamespaceResponse=P.ResolveNamespaceResponse||{};$=P.UnionCaseResponse=P.UnionCaseResponse||{};ba=P.ACMessage=P.ACMessage||{};bb=O.FSAutoCompleteIntermediaryClient=O.FSAutoCompleteIntermediaryClient||{};bc=b.FsEvaluator=b.FsEvaluator||{};bd=bc.Evaluator=bc.Evaluator||{};be=b.FsTranslator=b.FsTranslator||{};bf=b.HtmlNode=b.HtmlNode||{};bg=bf.Val=bf.Val||{};bh=bg.HelperType=bg.HelperType||{};bi=bg.valBuilder=bg.valBuilder||{};bj=bf.HtmlNode=bf.HtmlNode||{};bk=b.Template=b.Template||{};bl=bk.Button=bk.Button||{};bm=bk.Input=bk.Input||{};bn=bk.Hoverable=bk.Hoverable||{};bo=bk.Panel=bk.Panel||{};bp=bk.TextArea=bk.TextArea||{};bq=bk.CodeMirrorPos=bk.CodeMirrorPos||{};br=bk.CodeMirrorEditor=bk.CodeMirrorEditor||{};bs=bk.CodeMirror=bk.CodeMirror||{};bt=bk.Hint=bk.Hint||{};bu=bk.HintResponse=bk.HintResponse||{};bv=bk.HintOptions=bk.HintOptions||{};bw=bk.LintResponse=bk.LintResponse||{};bx=bk.SplitterBar=bk.SplitterBar||{};by=bk.SectionType=bk.SectionType||{};bz=bk.Grid=bk.Grid||{};bA=bk.TabStrip=bk.TabStrip||{};bB=bk.MenuEntry=bk.MenuEntry||{};bC=bk.MenuNode=bk.MenuNode||{};bD=bk.Menu=bk.Menu||{};bE=bk.Action=bk.Action||{};bF=bk.GuiPart=bk.GuiPart||{};bG=bk.HtmlNodeFable=bk.HtmlNodeFable||{};bH=bk.LayoutDescriptionFable=bk.LayoutDescriptionFable||{};bI=bk.GuiPartSourceId=bk.GuiPartSourceId||{};bJ=bk.Layout=bk.Layout||{};bK=b.RunCode=b.RunCode||{};bL=bK.RunNode=bK.RunNode||{};bM=b.FSharpStation=b.FSharpStation||{};bN=bM.FsGlobal=bM.FsGlobal||{};bO=bN.Position=bN.Position||{};bP=bN.ErrCompiler=bN.ErrCompiler||{};bQ=bN.KeyMapAutoComplete=bN.KeyMapAutoComplete||{};bR=h&&h.UI;bS=bR&&bR.Var;bT=bN.Property=bN.Property||{};bU=bN.PropValue=bN.PropValue||{};bV=bN.CodeSnippet=bN.CodeSnippet||{};bW=bM.FableModule=bM.FableModule||{};bX=bW.Babel=bW.Babel||{};bY=bW.Fable=bW.Fable||{};bZ=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};b0=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};b1=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};b2=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};b3=a.GeneratedPrintf=a.GeneratedPrintf||{};b4=h&&h.Concurrency;b5=h&&h.Seq;b6=h&&h.Unchecked;b7=h&&h.Strings;b8=a.IntelliFactory;b9=b8&&b8.Runtime;b_=h&&h.Utils;b$=h&&h.Enumerator;ca=h&&h.Arrays;cb=a.console;cc=h&&h.Control;cd=cc&&cc.MailboxProcessor;ce=h&&h.Collections;cf=ce&&ce.Dictionary;cg=h&&h.CancellationTokenSource;ch=a.System;ci=ch&&ch.Guid;cj=h&&h.List;ck=h&&h.Option;cl=a.JSON;cm=h&&h.TimeoutException;cn=h&&h.Json;co=cn&&cn.Provider;cp=h&&h.Owin;cq=cp&&cp.WebSocket;cr=cq&&cq.Client;cs=cr&&cr.WithEncoding;ct=cq&&cq.Endpoint;cu=a.location;cv=ce&&ce.Map;cw=ce&&ce.FSharpMap;cx=h&&h.Remoting;cy=cx&&cx.AjaxRemotingProvider;cz=h&&h.Slice;cA=bR&&bR.View;cB=bR&&bR.Doc;cC=h&&h.Operators;cD=bR&&bR.AttrModule;cE=bR&&bR.AttrProxy;cF=bR&&bR.Input;cG=cF&&cF.Mouse;cH=ce&&ce.FSharpSet;cI=ce&&ce.BalancedTree;cJ=h&&h.MatchFailureException;cK=a.Object;cL=a.Fable;cM=a.Babel;cN=ce&&ce.HashSet;cO=h&&h.JavaScript;cP=cO&&cO.JSModule;cQ=h&&h.Lazy;cR=a.jQuery;cS=a.Date;cT=bR&&bR.ListModel;d.sleepThen=function(cU,cV){var cW;cW=null;return b4.Delay(function(){return b4.Bind(b4.Sleep(cV),function(){cU();return b4.Zero();});});};d.bind=function(cU,cV){return b4.Bind(cV,cU);};d.apply=function(cU,cV){var cW;cW=null;return b4.Delay(function(){return b4.Bind(b4.StartChild(cU,null),function(cX){return b4.Bind(b4.StartChild(cV,null),function(cY){return b4.Bind(cX,function(cZ){return b4.Bind(cY,function(c0){return b4.Return(cZ(c0));});});});});});};d.retn=function(cU){return b4.Return(cU);};d.iter=function(cU,cV){var cW;cW=null;return b4.Delay(function(){return b4.Bind(cV,function(cX){cU(cX);return b4.Zero();});});};d.map=function(cU,cV){var cW;cW=null;return b4.Delay(function(){return b4.Bind(cV,function(cX){return b4.Return(cU(cX));});});};e.tryGetValue=function(cU,cV){return b5.tryPick(function(cW){return b6.Equals(cW.K,cU)?{$:1,$0:cW.V}:null;},cV);};f.append=function(cU,cV){return cU+cV;};f.trim=function(cU){return b7.Trim(cU);};f.splitByChar=function(cU,cV){return b7.SplitChars(cV,[cU],0);};g.modify=function(cU){var cV;function cW(cX){return cX==null?null:{$:1,$0:cU(cX.$0)};}cV=function(cX){return g.defaultValue(a.id,cX);};return function(cX){return cV(cW(cX));};};g.apply=function(cU,cV){var cW;return cU!=null&&cU.$==1&&(cV!=null&&cV.$==1&&(cW=[cV.$0,cU.$0],true))?{$:1,$0:cW[0](cW[1])}:null;};g.iterFO=function(cU,cV){if(cU!=null&&cU.$==1)if(cV!=null&&cV.$==1)cV.$0(cU.$0);};g.iterF=function(cU,cV){if(cV!=null&&cV.$==1)cV.$0(cU);};g.call=function(cU,cV){return cV!=null&&cV.$==1?{$:1,$0:cV.$0(cU)}:null;};g.defaultWith=function(cU,cV){return cV==null?cU():cV.$0;};g.defaultValue=function(cU,cV){return cV==null?cU:cV.$0;};j=c.ExceptionThrown=b9.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cU){return function(cV){return cU(b_.prettyPrint(cV));};}(a.id))(this.exn);}},i,j);j.New=b9.Ctor(function(cU){this.exn=cU;},j);k=c.ErrOptionIsNone=b9.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return"Option is None";}},i,k);k.New=b9.Ctor(function(){},k);l=c.ErrSimple=b9.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.warning;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.msg;}},i,l);l.New=b9.Ctor(function(cU,cV){this.msg=cU;this.warning=cV;},l);n=m.ropBuilder=b9.Class({For:function(cU,cV){var cW;cW=this;return this.Using(b$.Get(cU),function(cX){return cW.While(function(){return cX.MoveNext();},cW.Delay(function(){return cV(cX.Current());}));});},Using:function(cU,cV){return this.TryFinally(function(){return cV(cU);},function(){if(!b6.Equals(cU,null))cU.Dispose();});},TryFinally:function(cU,cV){try{return this.ReturnFrom(cU());}finally{cV();}},TryWith:function(cU,cV){try{return this.ReturnFrom(cU());}catch(cW){return cV(cW);}},While:function(cU,cV){var cW;cW=this;return!cU()?this.Zero():this.Bind(cV(),function(){return cW.While(cU,cV);});},Run:function(cU){return cU();},Combine:function(cU,cV){return m.combine(cU,cV);},Delay:a.id,Zero:function(){return m.succeed();},Bind:function(cU,cV){return m.bind(function(cW){return m.tryCall(cV,cW);},cU);},ReturnFrom:a.id,Return:function(cU){return m.succeed(cU);}},i,n);n.New=b9.Ctor(function(){},n);m.toResultS=function(cU){return{$:0,$0:cU.$0,$1:ca.map(function(cV){return new l.New(cV.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),cV.FSSGlobal_Useful_ErrMsg$get_IsWarning());},cU.$1)};};m.fromResultS=function(cU){return{$:0,$0:cU.$0,$1:ca.map(a.id,cU.$1)};};m.result2String=function(cU){return b7.concat("\n",[g.defaultValue("Failed: ",cU.$0)].concat(m.msgs2String(cU.$1)));};m.countMessages=function(cU){var cV,cW,cX,cY,cZ,c0,c1;if(b6.Equals(cU,[]))return"";else{cY=ca.filter(function(c2){return!c2.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cU);cZ=ca.filter(function(c2){return c2.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cU);c0=ca.length(cY);c1=ca.length(cZ);switch(c0===0?c1===0?0:c1===1?2:5:c0===1?c1===0?1:c1===1?3:(cV=[c0,c1],6):c1===0?4:(cV=[c0,c1],6)){case 0:cX=function(c2){return function(c3){return c2(b_.toSafe(c3));};}(a.id);break;case 1:cX=function(c2){return function(c3){return c2(b_.toSafe(c3));};}(a.id);break;case 2:cX=function(c2){return function(c3){return c2(b_.toSafe(c3));};}(a.id);break;case 3:cX=function(c2){return function(c3){return c2("1 error, 1 warning\n"+b_.toSafe(c3));};}(a.id);break;case 4:cX=((b9.Curried3(function(c2,c3,c4){return c2(a.String(c3)+" errors\n"+b_.toSafe(c4));}))(a.id))(c0);break;case 5:cX=((b9.Curried3(function(c2,c3,c4){return c2(a.String(c3)+" warnings\n"+b_.toSafe(c4));}))(a.id))(c1);break;case 6:cX=(((b9.Curried(function(c2,c3,c4,c5){return c2(a.String(c3)+" errors, "+a.String(c4)+" warnings\n"+b_.toSafe(c5));},4))(a.id))(cV[0]))(cV[1]);break;}return cX(m.getMessages(cU));}};m.getMessages=function(cU){return b7.concat("\n",m.msgs2String(cU));};m.msgs2String=function(cU){return ca.map(function(cV){return cV.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},cU);};m.seqCheck=function(cU){return b5.exists(function(cV){return m.Success(cV).$==1;},cU)?m.failWithMsgs(b5.pick(function(cV){var cW;cW=m.Success(cV);return cW.$==1?{$:1,$0:cW.$0}:null;},cU)):m.succeed(b5.map(function(cV){return cV.$0.$0;},cU));};m.withError=function(cU,cV){var cW;cW=cV.$1;return g.defaultWith(function(){return cU(cW);},cV.$0);};m.ifError=function(cU,cV){return g.defaultValue(cU,cV.$0);};m.failIfTrue=function(cU,cV){return cV?m.fail(cU):m.succeed();};m.failIfFalse=function(cU,cV){return cV?m.succeed():m.fail(cU);};m.tryProtection=function(){return m.succeed();};m.toOptionMs=function(cU){return[cU.$0,cU.$1];};m.toOption=function(cU){return cU.$0;};m.fromOption=function(cU,cV){return cV!=null&&cV.$==1?m.succeed(cV.$0):m.fail(cU);};m.fromChoice=function(cU){return cU.$==1?m.fail(cU.$0):m.succeed(cU.$0);};m.result=function(){bZ.$cctor();return bZ.result;};m.tryCall=function(cU,cV){try{return cU(cV);}catch(cW){return m.fail(m.failException(cW));}};m.failException=function(cU){return new j.New(cU);};m.Success=function(cU){return cU.$0==null?{$:1,$0:cU.$1}:{$:0,$0:[cU.$0.$0,cU.$1]};};m.failSimpleWarning=function(cU){return m.fail(new l.New(cU,true));};m.failSimpleError=function(cU){return m.fail(new l.New(cU,false));};m.apply=function(cU,cV){var cW,cX,cY,cZ,c0;cW=cU.$1;cX=cV.$1;cY=cU.$0;cZ=cV.$0;return cY!=null&&cY.$==1&&(cZ!=null&&cZ.$==1&&(c0=[cY.$0,cZ.$0],true))?{$:0,$0:{$:1,$0:c0[0](c0[1])},$1:cW.concat(cX)}:{$:0,$0:null,$1:cW.concat(cX)};};m.bind=function(cU,cV){var cW,cX,cY;cW=cV.$0;cX=cV.$1;return cW==null?{$:0,$0:null,$1:cX}:(cY=cU(cW.$0),{$:0,$0:cY.$0,$1:cX.concat(cY.$1)});};m.combine=function(cU,cV){var cW;cW=cU.$1;return g.defaultValue({$:0,$0:null,$1:cW},cU.$0==null?null:{$:1,$0:m.mergeMsgs(cW,cV())});};m.mergeMsgs=function(cU,cV){var cW;cW=m.mapMsgs(function(cX){return cU.concat(cX);},cV);return{$:0,$0:cW[0],$1:cW[1]};};m.getMsgs=function(cU){return cU.$1;};m.getOption=function(cU){return cU.$0;};m.mapMsgs=function(cU,cV){return[cV.$0,cU(cV.$1)];};m.mapMsg=function(cU,cV){return[cV.$0,ca.map(cU,cV.$1)];};m.mapErr=function(cU,cV){return{$:0,$0:cV.$0,$1:ca.map(cU,cV.$1)};};m.map=function(cU,cV){var cW;return{$:0,$0:(cW=cV.$0,cW==null?null:{$:1,$0:cU(cW.$0)}),$1:cV.$1};};m.failWithMsgs=function(cU){return{$:0,$0:null,$1:cU};};m.fail=function(cU){return{$:0,$0:null,$1:[cU]};};m.succeedWithMsgs=function(cU,cV){return{$:0,$0:{$:1,$0:cU},$1:cV};};m.succeedWithMsg=function(cU,cV){return{$:0,$0:{$:1,$0:cU},$1:[cV]};};m.succeed=function(cU){return{$:0,$0:{$:1,$0:cU},$1:[]};};o.toResult=function(){bZ.$cctor();return bZ.toResult;};o.fromResult=function(){bZ.$cctor();return bZ.fromResult;};p.StartAsTask=function(cU,cV,cW){return b4.StartAsTask(p.getAsyncR(cU),cW);};p.Start=function(cU,cV){b4.Start(p.getAsync(cU),cV);};q=p.Builder=b9.Class({For:function(cU,cV){var cW;cW=this;return this.Using(b$.Get(cU),function(cX){return cW.While(function(){return cX.MoveNext();},cW.Delay(function(){return cV(cX.Current());}));});},Using:function(cU,cV){return this.TryFinally(function(){return cV(cU);},function(){if(!b6.Equals(cU,null))cU.Dispose();});},TryFinally:function(cU,cV){var cW;return{$:2,$0:(cW=null,b4.Delay(function(){return b4.Bind(b4.Catch(p.toAsyncResult(cU())),function(cX){var cY,cZ;cV();if(cX.$==1)throw cX.$0;else cZ=cX.$0;return b4.Return(cZ);});}))};},TryWith:function(cU,cV){var cW;return{$:2,$0:(cW=null,b4.Delay(function(){return b4.Bind(b4.Catch(p.toAsyncResult(cU())),function(cX){return b4.Return(cX.$==1?cV(cX.$0):cX.$0);});}))};},While:function(cU,cV){return p.whileLoop(cU,cV);},Combine:function(cU,cV){return p.combine(p.errOptionIsNone(),cU,cV);},Run:function(cU){return cU();},Delay:a.id,ReturnFrom:a.id,Return:function(cU){return{$:3,$0:cU};},Zero:function(){return{$:3,$0:null};},Bind:function(cU,cV){return p.bind(cV,{$:4,$0:cU});},Bind$1:function(cU,cV){return p.bind(cV,{$:0,$0:cU});},Bind$2:function(cU,cV){return p.bind(cV,{$:1,$0:cU});},Bind$3:function(cU,cV){return p.bind(cV,cU);}},i,q);q.New=b9.Ctor(function(){},q);p.runSynchronouslyS=function(cU,cV){var cW;cW=p.runSynchronouslyO(cU,cV);return cW[0]==null?(function(cX){return function(cY){return cX("Failed!\n"+b_.toSafe(cY));};}(a.id))(cW[1]):(((b9.Curried3(function(cX,cY,cZ){return cX(a.String(cY)+"\n"+b_.toSafe(cZ));}))(a.id))(cW[0].$0))(cW[1]);};p.runSynchronouslyO=function(cU,cV){return m.mapMsgs(cU?m.countMessages:m.getMessages,cb.log("runSynchronously should not be used in Javascript"));};p.getResult=function(cU,cV){if(cV.$==4){if(cV.$0==null)cU(m.fail(p.errOptionIsNone()));else cU(m.succeed(cV.$0.$0));}else if(cV.$==0)cU(cV.$0);else if(cV.$==1)b4.StartWithContinuations(cV.$0,function(cW){cU(m.succeed(cW));},function(cW){cU(m.fail(m.failException(cW)));},function(cW){cU(m.fail(m.failException(cW)));},null);else if(cV.$==2)b4.StartWithContinuations(cV.$0,cU,function(cW){cU(m.fail(m.failException(cW)));},function(cW){cU(m.fail(m.failException(cW)));},null);else cU(m.succeed(cV.$0));};p.wrapper=function(){bZ.$cctor();return bZ.wrapper;};p.wrap=function(){bZ.$cctor();return bZ.wrap;};p.whileLoop=function(cU,cV){return cU()?p.bind(function(){return p.whileLoop(cU,cV);},cV()):{$:3,$0:null};};p.combine=function(cU,cV,cW){var cX,cY,cZ,c0;switch(cV.$==4?cV.$0==null?4:0:cV.$==0?cV.$0.$0==null?(cX=cV.$0.$1,5):(cY=cV.$0.$1,cY&&ca.length(cY)===0?0:(cX=cV.$0.$1,1)):cV.$==1?(cX=cV.$0,2):cV.$==2?(cX=cV.$0,3):0){case 0:return cW();break;case 1:return p.addMsgs(cU,cX,cW());break;case 2:return{$:2,$0:(cZ=null,b4.Delay(function(){return b4.Bind(cX,function(){return b4.Bind(p.toAsyncResult(cW()),function(c1){return b4.Return(c1);});});}))};break;case 3:return{$:2,$0:(c0=null,b4.Delay(function(){return b4.Bind(cX,function(c1){var c2,c3;c2=m.Success(c1);return c2.$==0?(c3=c2.$0[1],b4.Bind(p.toAsyncResult(cW()),function(c4){return b4.Return(m.mergeMsgs(c3,c4));})):b4.Return(m.failWithMsgs(c2.$0));});}))};break;case 4:return{$:4,$0:null};break;case 5:return{$:0,$0:m.failWithMsgs(cX)};break;}};p.addMsgs=function(cU,cV,cW){var cX,cY,cZ;if(b6.Equals(cV,[]))return cW;else switch(cW.$==4?cW.$0==null?1:(cX=cW.$0.$0,0):cW.$==0?(cX=cW.$0,2):cW.$==1?(cX=cW.$0,3):cW.$==2?(cX=cW.$0,4):(cX=cW.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(cX,cV)};break;case 1:return{$:0,$0:m.mergeMsgs(cV,m.fail(cU))};break;case 2:return{$:0,$0:m.mergeMsgs(cV,cX)};break;case 3:return{$:2,$0:(cY=null,b4.Delay(function(){return b4.Bind(cX,function(c0){return b4.Return(m.succeedWithMsgs(c0,cV));});}))};break;case 4:return{$:2,$0:(cZ=null,b4.Delay(function(){return b4.Bind(cX,function(c0){return b4.Return(m.mergeMsgs(cV,c0));});}))};break;}};p.wrapper2Async=function(cU,cV){var cW,cX,cY,cZ;cX=p.tryCall(cU,cV);switch(cX.$==4?0:cX.$==0?1:cX.$==1?2:cX.$==2?3:0){case 0:return p.wb2arb([],cX);break;case 1:return p.wb2arb(cX.$0.$1,cX);break;case 2:cY=cX.$0;cZ=null;return b4.Delay(function(){return b4.Bind(cY,function(c0){return b4.Return(m.succeed(c0));});});break;case 3:return cX.$0;break;}};p.start=function(cU,cV){p.startV(function(cW){if(cW[0]==null)cU("Failed!\n"+cW[1]);else cU(cW[1]);},cV);};p.startV=function(cU,cV){var cW,cX,cY,cZ;function c0(c3){return m.mapMsgs(m.getMessages,c3);}function c1(c3){return[null,c3];}function c2(c3){return[null,c3];}b4.StartWithContinuations(p.getAsyncR(cV),function(c3){return cU(c0(c3));},(cW=(cX=function(c3){return function(c4){return c3(a.String(c4));};}(a.id),function(c3){return c1(cX(c3));}),function(c3){return cU(cW(c3));}),(cY=(cZ=function(c3){return function(c4){return c3(a.String(c4));};}(a.id),function(c3){return c2(cZ(c3));}),function(c3){return cU(cY(c3));}),null);};p.toAsyncWithDefault=function(cU){return function(cV){return p.getAsyncWithDefault(cU,cV);};};p.toAsyncOptionMs=function(cU){return d.map(m.toOptionMs,p.getAsyncR(cU));};p.toAsyncOption=function(cU){return d.map(m.toOption,p.getAsyncR(cU));};p.toAsyncResult=function(cU){return p.getAsyncR(cU);};p.toAsync=function(cU){return p.getAsync(cU);};p.getAsync=function(cU){return p.getAsyncWithDefault(function(cV){throw a.Error(m.getMessages(cV));},cU);};p.getAsyncWithDefault=function(cU,cV){return d.map(function(cW){return m.withError(cU,cW);},p.getAsyncR(cV));};p.getAsyncR=function(cU){var cV,cW;return cU.$==3?b4.Return(m.succeed(cU.$0)):cU.$==4?b4.Return(m.fromOption(p.errOptionIsNone(),cU.$0)):cU.$==0?b4.Return(cU.$0):cU.$==2?cU.$0:(cV=cU.$0,(cW=null,b4.Delay(function(){return b4.Bind(cV,function(cX){return b4.Return(m.succeed(cX));});})));};p.map=function(cU){var cV;cV=function(cW){return p.Return(cU(cW));};return function(cW){return p.bind(cV,cW);};};p.Return=function(cU){return{$:3,$0:cU};};p.bind=function(cU,cV){var cW,cX,cY,cZ,c0,c1;switch(cV.$==4?cV.$0==null?1:(cW=cV.$0.$0,0):cV.$==0?(cX=m.Success(cV.$0),cX.$==1?(cW=cX.$0,2):(cY=cX.$0[1],cY&&ca.length(cY)===0?(cW=cX.$0[0],0):(cW=[cX.$0[0],cX.$0[1]],3))):cV.$==1?(cW=cV.$0,4):cV.$==2?(cW=cV.$0,5):(cW=cV.$0,0)){case 0:return p.tryCall(cU,cW);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:m.failWithMsgs(cW)};break;case 3:cZ=cW[1];return function(c2){var c3,c4,c5,c6,c7;switch(c2.$==4?c2.$0==null?1:(c3=c2.$0.$0,0):c2.$==0?(c4=m.Success(c2.$0),c4.$==1?(c3=c4.$0,4):(c5=c4.$0[1],c5&&ca.length(c5)===0?(c3=c4.$0[0],2):(c3=[c4.$0[0],c4.$0[1]],3))):c2.$==1?(c3=c2.$0,5):c2.$==2?(c3=c2.$0,6):(c3=c2.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(c3,cZ)};break;case 1:return{$:0,$0:m.failWithMsgs(cZ.concat([p.errOptionIsNone()]))};break;case 2:return{$:0,$0:m.succeedWithMsgs(c3,cZ)};break;case 3:return{$:0,$0:m.succeedWithMsgs(c3[0],cZ.concat(c3[1]))};break;case 4:return{$:0,$0:m.failWithMsgs(cZ.concat(c3))};break;case 5:return{$:2,$0:(c6=null,b4.Delay(function(){return b4.Bind(c3,function(c8){return b4.Return(m.succeedWithMsgs(c8,cZ));});}))};break;case 6:return{$:2,$0:(c7=null,b4.Delay(function(){return b4.Bind(c3,function(c8){return b4.Return(m.mergeMsgs(cZ,c8));});}))};break;}}(p.tryCall(cU,cW[0]));break;case 4:return{$:2,$0:(c0=null,b4.Delay(function(){return b4.Bind(cW,function(c2){return p.wb2arb([],p.tryCall(cU,c2));});}))};break;case 5:return{$:2,$0:(c1=null,b4.Delay(function(){return b4.Bind(cW,function(c2){var c3,c4,c5;c3=m.Success(c2);return c3.$==1?(c4=c3.$0,c5=null,b4.Delay(function(){return b4.Return(m.failWithMsgs(c4));})):p.wb2arb(c3.$0[1],p.tryCall(cU,c3.$0[0]));});}))};break;}};p.tryCall=function(cU,cV){try{return cU(cV);}catch(cW){return{$:0,$0:m.fail(m.failException(cW))};}};p.wb2arb=function(cU,cV){var cW,cX,cY,cZ,c0,c1;switch(cV.$==2?(cW=cV.$0,1):cV.$==0?(cW=cV.$0,2):cV.$==3?(cW=cV.$0,3):cV.$==4?cV.$0==null?4:(cW=cV.$0.$0,3):(cW=cV.$0,0)){case 0:cX=null;return b4.Delay(function(){return b4.Bind(cW,function(c2){return b4.Return(m.succeedWithMsgs(c2,cU));});});break;case 1:cY=null;return b4.Delay(function(){return b4.Bind(cW,function(c2){return b4.Return(m.mergeMsgs(cU,c2));});});break;case 2:cZ=null;return b4.Delay(function(){return b4.Return(m.mergeMsgs(cU,cW));});break;case 3:c0=null;return b4.Delay(function(){return b4.Return(m.succeedWithMsgs(cW,cU));});break;case 4:c1=null;return b4.Delay(function(){return b4.Return(m.failWithMsgs(cU.concat([p.errOptionIsNone()])));});break;}};p.errOptionIsNone=function(){bZ.$cctor();return bZ.errOptionIsNone;};r.fold=function(cU,cV){return cd.Start(function(cW){function cX(cY){var cZ;cZ=null;return b4.Delay(function(){return b4.TryWith(b4.Delay(function(){return b4.Bind(cW.Receive(null),function(c0){return b4.Bind(cU(cY,c0),function(c1){return cX(c1);});});}),function(c0){((function(c1){return function(c2){return c1(b_.prettyPrint(c2));};}(function(c1){cb.log(c1);}))(c0));return cX(cY);});});}return cX(cV);},null);};r.call=function(cU){return r.iter(function(cV){var cW,cX,cY;cW=cV[0];cX=cV[1];cY=null;return b4.Delay(function(){return b4.Bind(cU(cX),function(cZ){cW(cZ);return b4.Zero();});});});};r.iter=function(cU){return cd.Start(function(cV){var cW;cW=null;return b4.Delay(function(){return b4.While(function(){return true;},b4.Delay(function(){return b4.TryWith(b4.Delay(function(){return b4.Bind(cV.Receive(null),function(cX){return b4.Bind(cU(cX),function(){return b4.Return(null);});});}),function(cX){((function(cY){return function(cZ){return cY(b_.prettyPrint(cZ));};}(function(cY){cb.log(cY);}))(cX));return b4.Zero();});}));});},null);};s.add=function(cU,cV,cW){if(cW.ContainsKey(cU))cW.set_Item(cU,cV);else cW.Add(cU,cV);};t=c.ResetableMemoize=b9.Class({ClearCache:function(){this.cache.Clear();}},i,t);t.New=b9.Ctor(function(cU){this.f=cU;this.cache=new cf.New$5();},t);u.NoPrepo={$:11};u.PrepoEndIf={$:8};u.PrepoElse={$:7};c.asyncStartCancelling=function(){var cU;cU=null;return function(cV){var cW;cU==null?void 0:cU.$0.Cancel$1();cW=new cg.New();b4.Start(cV,{$:1,$0:cW});cU={$:1,$0:cW};};};c.separateDirectives=function(cU){var cV,cW,cX,cY;function cZ(c7){return c7[1];}function c0(c7){return c7.$==0?{$:1,$0:c7.$0}:null;}function c1(c7){return c7[1];}function c2(c7){return c7.$==1?{$:1,$0:c7.$0}:null;}function c3(c7){return c7[1];}function c4(c7){return c7.$==5?{$:1,$0:c7.$0}:null;}function c5(c7){return c7[1];}function c6(c7){return c7.$==4?{$:1,$0:c7.$0}:null;}cV=ca.ofSeq(b5.distinct(b5.choose(function(c7){return c0(cZ(c7));},cU)));cW=ca.ofSeq(b5.distinct(b5.choose(function(c7){return c2(c1(c7));},cU)));cX=ca.ofSeq(b5.distinct(b5.choose(function(c7){return c4(c3(c7));},cU)));cY=ca.ofSeq(b5.distinct(b5.choose(function(c7){return c6(c5(c7));},cU)));return[ca.ofSeq(b5.map(function(c7){return c7[0];},cU)),cV,cW,cX,cY];};c.separatePrepros=function(cU,cV){var cW;function cX(c0){return g.defaultValue(c0,b5.tryLast(b7.SplitStrings(b7.Trim(c0),["\""],1)));}function cY(c0){return g.defaultValue("",b5.tryHead(b7.SplitStrings(b7.Trim(c0),["#define "],1)));}function cZ(c0){return"//"+c0;}cW=cU?cZ:a.id;return ca.map(function(c0){var c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db;c1=true;return c1&&b7.StartsWith(c0,"#define")?[cZ(c0),{$:1,$0:cY(c0)}]:c1&&b7.StartsWith(c0,"#r")?[cZ(c0),{$:0,$0:cX(c0)}]:c1&&b7.StartsWith(c0,"#load")?[cZ(c0),{$:2,$0:cX(c0)}]:c1&&b7.StartsWith(c0,"#nowarn")?[cZ(c0),{$:4,$0:cX(c0)}]:c1&&b7.StartsWith(c0,"# ")?[cW(c0),{$:3,$0:cX(c0)}]:c1&&b7.StartsWith(c0,"#line")?[cW(c0),{$:3,$0:cX(c0)}]:c1&&b7.StartsWith(c0,"#I")?[cZ(c0),{$:5,$0:cX(c0)}]:c1&&b7.StartsWith(c0,"#if")?[c0,{$:6,$0:c0}]:c1&&b7.StartsWith(c0,"#else")?[c0,u.PrepoElse]:c1&&b7.StartsWith(c0,"#endif")?[c0,u.PrepoEndIf]:c1&&b7.StartsWith(c0,"#light")?[c0,{$:9,$0:false}]:c1&&b7.StartsWith(c0,"#")?[cZ(c0),{$:10,$0:c0}]:[c0,u.NoPrepo];},cV);};c.mapPrint=function(cU){c.print(cU);return cU;};c.print=function(cU){((function(cV){return function(cW){return cV(b_.prettyPrint(cW));};}(function(cV){cb.log(cV);}))(cU));};c.printoutfn=function(cU,cV){return cV(function(cW){return cU(cW+"\n");});};c.dprintfn=function(cU){return cU(a.ignore);};c.__=function(cU,cV,cW){return cU(cW,cV);};c.swap=function(cU,cV,cW){return cU(cW,cV);};c.rexGuid=function(){bZ.$cctor();return bZ.rexGuid;};c.REGEX=function(cU,cV,cW){var cX;if(cW===null)return null;else try{cX=(new a.String(cW)).match(new a.RegExp(cU,cV));return b6.Equals(cX,null)?null:cX&&ca.length(cX)===0?null:{$:1,$0:cX};}catch(cY){return null;}};c.extract=function(cU,cV){var cW;return b7.Substring(cV,0,(cW=cV.length,b6.Compare(cU,cW)===-1?cU:cW));};w=v.CodeSnippetId=b9.Class({get_Text:function(){return a.String(this.$0);}},null,w);w.get_New=function(){return new w({$:0,$0:ci.NewGuid()});};x=v.CodeSnippet=b9.Class({SeparateCode:function(cU){var cV,cW,cX,cY,cZ,c0;function c1(c2,c3){return[b7.replicate(cW," ")+c2,c3];}cV=!cU||this.properties.ContainsKey("NoLinePre");cW=this.levelCode*2;cX=cW===0?[a.id,""]:[function(c2){return ca.map(function(c3){return c1(c3[0],c3[1]);},c2);},(function(c2){return function(c3){return c2("("+a.String(c3)+")");};}(a.id))(cW)];cY=c.separateDirectives(cX[0](c.separatePrepros(!cU,(cV?a.id:(cZ=[(((b9.Curried3(function(c2,c3,c4){return c2("# 1 @\""+b_.toSafe(c3)+b_.toSafe(c4)+"\"");}))(a.id))(cX[1]))(this.get_NameSanitized())],function(c2){return cZ.concat(c2);}))(b7.SplitChars(this.content,["\n"],0)))));c0=cY[0];return[[[this.get_NameSanitized(),ca.length(c0),cW]],c0,cY[1],cY[2],cY[3],cY[4]];},UniquePredecessors:function(cU){return v.predsL(cU,cj.ofArray([this.id]));},get_NameSanitized:function(){return this.id.get_Text()+" "+v.sanitize(this.get_Name())+".fsx";},get_Name:function(){return v.snippetName(this.name,this.content);}},null,x);x.CodeFsx=function(cU,cV){return(x.CodeAndStarts(cU,cV))[0];};x.CodeAndStarts=function(cU,cV){var cW;cW=x.ReducedCode(cU,cV);return x.FinishCode(cU,cW[0],cW[1],cW[2],cW[3],cW[4],cW[5]);};x.FinishCode=function(cU,cV,cW,cX,cY,cZ,c0){var c1,c2;c1=b7.concat(" ",b5.map(function(c3){return"-d:"+c3;},b5.sort(cY)));c2=cj.ofSeq(b5.delay(function(){return b5.append(c1!==""?["////"+c1]:[],b5.delay(function(){return b5.append(b5.map(function(c3){return function(c4){return c3("#I @\""+b_.toSafe(c4)+"\"");};}(a.id),cZ),b5.delay(function(){return b5.append(b5.map(function(c3){return function(c4){return c3("#r @\""+b_.toSafe(c4)+"\"");};}(a.id),cX),b5.delay(function(){return b5.append(cU&&!b5.isEmpty(c0)?["# 1 \"required for nowarns to work\""]:[],b5.delay(function(){return b5.map(function(c3){return function(c4){return c3("#nowarn \""+b_.toSafe(c4)+"\"");};}(a.id),c0);}));}));}));}));}));return[b7.concat("\n",b5.append(c2,cW)),ca.ofSeq((b5.mapFold(function(c3,c4){var c5;c5=c4[1];return[[c4[0],[c4[2],c3,c3+c5]],c3+c5];},c2.get_Length(),cV))[0])];};x.ReducedCode=function(cU,cV){var cW,cX;function cY(cZ,c0,c1,c2,c3,c4){return function(c5){return x.AddSeps(cZ,c0,c1,c2,c3,c4,c5[0],c5[1],c5[2],c5[3],c5[4],c5[5]);};}cW=b5.reduce(function(cZ,c0){return(function(c1){return cY(c1[0],c1[1],c1[2],c1[3],c1[4],c1[5]);}(cZ))(c0);},(cX=b5.map(function(cZ){return cZ.SeparateCode(cU);},cV),b5.isEmpty(cX)?[[[],[],[],[],[],[]]]:cX));return[cW[0],[b7.concat("\n",cW[1])],cW[2],cW[3],cW[4],cW[5]];};x.AddSeps=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5){return[cU.concat(c0),cV.concat(c1),ca.ofSeq(b5.distinct(b5.append(cW,c2))),ca.ofSeq(b5.distinct(b5.append(cX,c3))),ca.ofSeq(b5.distinct(b5.append(cY,c4))),ca.ofSeq(b5.distinct(b5.append(cZ,c5)))];};x.TryFindByKey=function(cU,cV){return b5.tryFind(function(cW){return b6.Equals(cW.id,cV);},cU);};x.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2){return new x({name:cU,content:cV,parent:cW,predecessors:cX,id:cY,expanded:cZ,level:c0,levelCode:c1,properties:c2});};y.GetWholeFile={$:11};y.GetIdentification={$:0};z.FSInfor={$:2};z.FSWarning={$:1};z.FSError={$:0};v.predsL=function(cU,cV){var cW,cX;cW=cV;cX=cj.T.Empty;while(!(cW.$==0))(function(){var cY,cZ;return cW.$==1?(cY=cW.$1,(cZ=cW.$0,b5.contains(cZ,cX)?void(cW=cY):(cW=cj.collect(a.id,cj.ofArray([cY,cj.collect(function(c0){return cj.append(ck.toList(c0.parent),c0.predecessors);},ck.toList(cU(cZ)))])),void(cX=new cj.T({$:1,$0:cZ,$1:cX}))))):null;}());return cX;};v.preds=function(cU,cV,cW){var cX,cY;return cW.$==1?(cX=cW.$0,(cY=cj.collect(a.id,cj.ofArray([cW.$1,cj.collect(function(cZ){return cj.append(ck.toList(cZ.parent),cZ.predecessors);},ck.toList(cU(cX)))])),v.preds(cU,b5.contains(cX,cV)?cV:new cj.T({$:1,$0:cX,$1:cV}),cY))):cV;};v.sanitize=function(cU){var cV;cV=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return b7.Filter(function(cW){return!ca.contains(cW,cV);},cU);};v.snippetName=function(cU,cV){return cU!==""?cU:g.defaultValue("<empty>",b5.tryHead(b5.filter(function(cW){return!(b7.StartsWith(cW,"#")||b7.StartsWith(cW,"[<")||b7.StartsWith(cW,"//"));},b5.map(b7.Trim,b7.SplitChars(cV,["\n"],1)))));};B=A.Address=b9.Class({get_txt:function(){return this.$0;}},null,B);C.BRGetConnections={$:0};D.MsgRequestForEcho={$:5};D.MsgRequestForId={$:4};D.MsgFromBroker={$:3};D.MsgReply={$:2};D.MsgRequest={$:1};D.MsgInformation={$:0};E.BMReceiverCantReply={$:4};E.BMOnlyBrokerShouldUse={$:1};E.BMOk={$:0};F.Receiver={$:2};F.Broker={$:1};F.NoReply={$:0};G.New=function(cU,cV,cW,cX,cY,cZ,c0){return{from:cU,destination:cV,msgType:cW,subtype:cX,id:cY,payload:cZ,replier:c0};};H.FSharp={$:0};I.FSStation={$:0};J.JScript={$:0};K=A.ErrBroker=b9.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cU){return function(cV){return cU(b2.p(cV));};}(a.id))(this.bm);}},i,K);K.New=b9.Ctor(function(cU){this.bm=cU;},K);L=A.WSMessagingClient=b9.Class({sendMsg:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cU.replier.$===0?cW.Bind$3(cV.sendAndForget(cU),function(){return cW.Return("");}):cW.ReturnFrom(cV.sendGetReply(cU));}));},getListeners:function(){var cU,cV;cU=this;cV=p.wrap();return cV.Run(cV.Delay(function(){var cW,cX;return cV.Bind$3(cU.sendGetReply((cW=A.MessageBrokerAddress(),(cX=cl.stringify((b1.j$10())(C.BRGetConnections)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),cX,F.NoReply)))),function(cY){return cV.Return((b0.j$10())(cl.parse(cY)).$0);});}));},sendGetReply:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cV.sendAndReply(F.Receiver,cU),function(cX){var cY;return cW.Bind$1((cY=cX.msgType,cY.$==2?m.succeed(cX.payload):cY.$==3?m.fail(new K.New((b0.j$11())(cl.parse(cX.payload)))):m.fail(new K.New({$:5,$0:cX.msgType}))),function(cZ){return cW.Return(cZ);});});}));},sendAndVerify:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cV.sendAndReply(F.Broker,cU),function(cX){var cY;return cW.Bind$1(cX.msgType.$==3?(cY=(b0.j$11())(cl.parse(cX.payload)),cY.$===0?m.succeed():m.fail(new K.New(cY))):m.fail(new K.New({$:5,$0:cX.msgType})),function(){return cW.Return();});});}));},sendAndReply:function(cU,cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){return cX.Bind$3(cW.getServer(),function(cY){return cX.Bind$2(b4.FromContinuations(function(cZ,c0,c1){var c2,c3;c2=cW.waiting;c2.mailbox.AddLast({$:0,$0:cV.id,$1:[cZ,c0,c1]});c2.resume();cW.postR(cY,cU,cV);return cW.wsTimeout>0?b4.Start((c3=null,b4.Delay(function(){return b4.Bind(b4.Sleep(cW.wsTimeout),function(){var c4;c4=cW.waiting;c4.mailbox.AddLast({$:2,$0:cV.id,$1:function(){return new cm.New$1((((b9.Curried3(function(c5,c6,c7){return c5("Did not receive reply in "+a.String(c6)+" seconds for Message: "+b3.p$23(c7));}))(a.id))(cW.wsTimeout/1000>>0))(cV));}});c4.resume();return b4.Zero();});})),null):null;}),function(cZ){return cX.Return(cZ);});});}));},sendAndForget:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cV.getServer(),function(cX){cV.postR(cX,F.NoReply,cU);return cW.Zero();});}));},postR:function(cU,cV,cW){try{cU.FSSGlobal_WSMessagingBroker_IServer$Post(A.replier(cV,A.from(this.clientAddress,cW)));}catch(cX){this.serverO=null;throw cX;}},getServer:function(){var cU,cV;cU=this;cV=p.wrap();return cV.Run(cV.Delay(function(){return cV.Bind$2(cU.checkServer.PostAndAsyncReply(function(cW){return[cW,null];},null),function(cW){return cV.Bind$1(cW,function(cX){return cV.Return(cX);});});}));},connectToWebSocketServer:function(){var cU,cV;cU=this;c.dprintfn(function(cW){return cW("in connectToWebSocketServer");});cV=null;return b4.Delay(function(){return b4.Bind(((cU.connectStateful(cU.wsEndPoint))(cU.clientId))(function(cW){var cX;cX=null;return b4.Delay(function(){return b4.Return([0,function(cY){return function(cZ){var c0;c0=null;return b4.Delay(function(){return b4.Combine(b4.TryWith(b4.Delay(function(){return cZ.$==2?((c.printoutfn(cU.out,function(c1){return function(c2){return c1("WebSocket "+b_.toSafe(c2)+" connection open.");};}))(cU.clientId),cU.serverO={$:1,$0:cW},b4.Zero()):cZ.$==3?((c.printoutfn(cU.out,function(c1){return function(c2){return c1("WebSocket "+b_.toSafe(c2)+" connection closed.");};}))(cU.clientId),cU.close(),b4.Zero()):cZ.$==1?((c.printoutfn(cU.out,function(c1){return function(c2){return c1("WebSocket "+b_.toSafe(c2)+" connection error!");};}))(cU.clientId),b4.Zero()):(cU.processMessage(cZ.$0),b4.Zero());}),function(c1){(((b9.Curried3(function(c2,c3,c4){return c2("msg: "+b2.p$16(c3)+" \nexn:"+b_.prettyPrint(c4));}))(function(c2){cb.log(c2);}))(cZ))(c1);return b4.Zero();}),b4.Delay(function(){return b4.Return(cY);}));});};}]);});}),function(){c.dprintfn(function(cW){return cW("connectToWebSocketServer with server");});return b4.Zero();});});},processMessage:function(cU){var cV,cW,cX,cY,cZ,c1;cW=this;(c.dprintfn(function(c2){return function(c3){return c2(b3.p$23(c3));};}))(cU);cX=cU.msgType;function c0(c2){cW.reply(c2);}switch(cX.$==2?0:cX.$==0?1:cX.$==1?2:cX.$==5?3:cX.$==4?4:0){case 0:this.processReply(cU);break;case 1:((c.printoutfn(this.out,b9.Curried3(function(c2,c3,c4){return c2("Information from '"+b_.toSafe(c3)+"': "+b_.toSafe(c4));})))(cU.from.get_txt()))(((co.Id())())(cl.parse(cU.payload)));break;case 2:cY=this.payloadProcessorO;cY!=null&&cY.$==1?p.Start((cZ=cW.mapPayloadWrap(cY.$0,cU),(p.map(function(c2){return c0(A.makeReply(c2));}))(cZ)),null):cU.replier.$===2?null:null;break;case 3:cW.reply(A.msgType(D.MsgInformation,A.mapPayload(a.id,cU)));break;case 4:cW.reply(A.msgType(D.MsgInformation,(c1=A.makeReply(cU),G.New(c1.from,c1.destination,c1.msgType,c1.subtype,c1.id,cl.stringify(((co.Id())())(this.clientId)),c1.replier))));break;}},mapPayloadWrap:function(cU,cV){var cW;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cU(cV.payload),function(cX){return cW.Return(A.mapPayload(function(){return cX;},cV));});}));},processReply:function(cU){var cV;cV=this.waiting;cV.mailbox.AddLast({$:1,$0:cU.id,$1:cU});cV.resume();},close:function(){var cU;cU=this.serverO;cU==null?void 0:(cU.$0.FSSGlobal_WSMessagingBroker_IServer$Close(),this.serverO=null);},reply:function(cU){var cV;cV=this.serverO;cV==null?void 0:cV.$0.FSSGlobal_WSMessagingBroker_IServer$Post(A.destination(cU.from,A.from(this.clientAddress,cU)));},set_Out:function(cU){this.out=cU;},SendMsg:function(cU){return this.sendMsg(cU);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},i,L);L.New=b9.Ctor(function(cU,cV,cW){L.New$1.call(this,b9.Curried3(function(cX,cY,cZ){return d.map(a.ignore,cs.ConnectStateful(function(c0){return cl.stringify((b1.j())(c0));},function(c0){return(b0.j())(cl.parse(c0));},ct.CreateRemote((((b9.Curried3(function(c0,c1,c2){return c0("ws://"+b_.toSafe(c1)+"?ClientId="+b_.toSafe(c2));}))(a.id))(cX))(cY),{$:1,$0:cq.JsonEncoding.Readable}),function(c0){return cZ({FSSGlobal_WSMessagingBroker_IServer$Post:function(c1){return c0.Post(c1);},FSSGlobal_WSMessagingBroker_IServer$Close:function(){return c0.get_Connection().close(1000);}});}));}),cU,cV,cW);},L);L.New$1=b9.Ctor(function(cU,cV,cW,cX){var cY,cZ;cY=this;this.connectStateful=cU;this.clientId=cV;this.wsEndPoint=(cZ=A.extractEndPoint()+"/ws",cX==null?cZ:cX.$0);this.clientAddress=new B({$:0,$0:this.clientId});this.wsTimeout=cW==null?60000:cW.$0;this.out=function(c0){return function(c1){return c0(b_.toSafe(c1));};}(function(c0){cb.log(c0);});this.serverO=null;this.payloadProcessorO=null;this.waiting=A.waitingAgent(function(c0){((c.printoutfn(cY.out,b9.Curried3(function(c1,c2,c3){return c1("Reply from '"+b_.toSafe(c2)+"': "+b_.toSafe(c3));})))(c0.from.get_txt()))(c0.payload);});this.checkServer=r.call(function(){var c0;c0=null;return b4.Delay(function(){c.dprintfn(function(c1){return c1("getServer");});return b4.Combine(cY.serverO==null?(c.dprintfn(function(c1){return c1("getServer Connecting");}),b4.Bind(cY.connectToWebSocketServer(),function(){return b4.Bind(b4.Sleep(200),function(){return b4.Return(null);});})):b4.Zero(),b4.Delay(function(){var c1;return b4.Return((c1=cY.serverO,m.fromOption(new l.New("could not connect to Server",false),c1)));}));});});},L);M=A.FsStationClientErr=b9.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&this.$1.$==0;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(((b9.Curried3(function(cU,cV,cW){return cU(b2.p$3(cV)+" "+b_.toSafe(cW));}))(a.id))(this.$1))(this.$0):(function(cU){return function(cV){return cU(b2.p$4(cV));};}(a.id))(this);}},null,M);N=A.FStationMessaging=b9.Class({snippetResponse:function(cU){return cU.$==2?m.succeed(cU.$0):m.fail(new M({$:1,$0:a.String(cU)}));},snippetsResponse:function(cU){return cU.$==3?m.succeed(cU.$0):m.fail(new M({$:1,$0:a.String(cU)}));},stringResponse:function(cU){var cV,cW;return cU.$==1&&((cW=cU.$0,cW!=null&&cW.$==1)&&(cV=cU.$0.$0,true))?m.succeed(cV):m.fail(new M({$:1,$0:a.String(cU)}));},stringResponseR:function(cU){var cV,cW;function cX(cY,cZ){return new M({$:0,$0:cY,$1:cZ});}return cU.$==4&&((cW=cU.$0,cW!=null&&cW.$==1)&&(cV=[cU.$0.$0,cU.$1],true))?m.succeedWithMsgs(cV[0],ca.ofSeq(b5.map(function(cY){return cX(cY[0],cY[1]);},cV[1]))):m.fail(new M({$:1,$0:a.String(cU)}));},toId:function(){return new B({$:0,$0:this.fsIds});},get_MessagingClient:function(){return this.msgClient;},set_FSStationId:function(cU){this.fsIds=cU;},get_FSStationId:function(){return this.fsIds;},RunActionCall:function(cU,cV,cW){var cX,cY,cZ,c0,c1;function c2(c3){return cX.stringResponseR(c3);}cX=this;cY=this.toId();cZ=this;c0={$:14,$0:cU,$1:cV,$2:cW};c1=p.wrap();return c1.Run(c1.Delay(function(){var c3,c4;return c1.Bind$3((c3=cZ.msgClient.sendGetReply((c4=cl.stringify((b1.j$4())(c0)),G.New(new B({$:0,$0:""}),cY,D.MsgRequest,"",ci.NewGuid(),c4,F.NoReply))),(p.map(function(c5){return(b0.j$4())(cl.parse(c5));}))(c3)),function(c5){return c1.Bind$1(c2(c5),function(c6){return c1.Return(c6);});});}));},RunSnippet:function(cU,cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.stringResponseR(c2);}cW=this;cX=this.toId();cY={$:13,$0:b7.SplitChars(cV,["/"],0),$1:cU};cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cZ.msgClient.sendGetReply((c3=cl.stringify((b1.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",ci.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(b0.j$4())(cl.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},GenericMessage:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponse(c1);}cV=this;cW=this.toId();cX=this;cY={$:1,$0:cU};cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cX.msgClient.sendGetReply((c2=cl.stringify((b1.j$4())(cY)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b0.j$4())(cl.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestWholeFile:function(){var cU,cV,cW,cX,cY;function cZ(c0){return cU.stringResponse(c0);}cU=this;cV=this.toId();cW=this;cX=y.GetWholeFile;cY=p.wrap();return cY.Run(cY.Delay(function(){var c0,c1;return cY.Bind$3((c0=cW.msgClient.sendGetReply((c1=cl.stringify((b1.j$4())(cX)),G.New(new B({$:0,$0:""}),cV,D.MsgRequest,"",ci.NewGuid(),c1,F.NoReply))),(p.map(function(c2){return(b0.j$4())(cl.parse(c2));}))(c0)),function(c2){return cY.Bind$1(cZ(c2),function(c3){return cY.Return(c3);});});}));},RequestPredsById:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.snippetsResponse(c1);}cV=this;cW=this.toId();cX=this;cY={$:4,$0:cU};cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cX.msgClient.sendGetReply((c2=cl.stringify((b1.j$4())(cY)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b0.j$4())(cl.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestPreds:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.snippetsResponse(c1);}cV=this;cW=this.toId();cX={$:8,$0:b7.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=cl.stringify((b1.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b0.j$4())(cl.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestJSCode:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponseR(c1);}cV=this;cW=this.toId();cX={$:10,$0:b7.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=cl.stringify((b1.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b0.j$4())(cl.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestCode:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponse(c1);}cV=this;cW=this.toId();cX={$:7,$0:b7.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=cl.stringify((b1.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b0.j$4())(cl.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestSnippet:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.snippetResponse(c1);}cV=this;cW=this.toId();cX={$:9,$0:b7.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=cl.stringify((b1.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",ci.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(b0.j$4())(cl.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},SendMessage:function(cU){var cV,cW,cX;cV=this.toId();cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){var cY,cZ;return cX.Bind$3((cY=cW.msgClient.sendGetReply((cZ=cl.stringify((b1.j$4())(cU)),G.New(new B({$:0,$0:""}),cV,D.MsgRequest,"",ci.NewGuid(),cZ,F.NoReply))),(p.map(function(c0){return(b0.j$4())(cl.parse(c0));}))(cY)),function(c0){return cX.Bind$1(m.succeed(c0),function(c1){return cX.Return(c1);});});}));},SendMessage$1:function(cU,cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){var cY,cZ;return cX.Bind$3((cY=cW.msgClient.sendGetReply((cZ=cl.stringify((b1.j$4())(cV)),G.New(new B({$:0,$0:""}),cU,D.MsgRequest,"",ci.NewGuid(),cZ,F.NoReply))),(p.map(function(c0){return(b0.j$4())(cl.parse(c0));}))(cY)),function(c0){return cX.Bind$1(m.succeed(c0),function(c1){return cX.Return(c1);});});}));}},i,N);N.get_FSStationId_=function(){return"FSharpStation1522010782884";};N.New=b9.Ctor(function(cU,cV,cW,cX){N.New$1.call(this,new L.New(cU,cW,cX),cU,cV);},N);N.New$1=b9.Ctor(function(cU,cV,cW){this.msgClient=cU;this.fsIds=g.defaultValue("FSharpStation1522010782884",cW);},N);A.extractEndPoint=function(){return ca.get(b7.SplitChars(cu.href.substring(cu.href.indexOf("//")+2),["/"],0),0);};A.waitingAgent=function(cU){return r.fold(function(cV,cW){var cX;cX=null;return b4.Delay(function(){var cY,cZ,c0,c1,c2,c3,c4,c5,c6;return b4.Combine(cW.$==1?(cY=cW.$1,(g.defaultWith(function(){cU(cY);},(cZ=cv.TryFind(cW.$0,cV),cZ==null?null:{$:1,$0:(c0=cZ.$0,(c1=c0[0],(c0[1],c0[2],c1(cY))))})),b4.Zero())):cW.$==2?(c2=cv.TryFind(cW.$0,cV),c2==null?void 0:(c3=c2.$0,c3[0],c4=c3[1],c3[2],c4(cW.$1())),b4.Zero()):cW.$==3?(c5=cv.TryFind(cW.$0,cV),c5==null?void 0:(c6=c5.$0,c6[0],c6[1],c6[2](cW.$1())),b4.Zero()):b4.Zero(),b4.Delay(function(){var c7;return b4.Return((cW.$==2?(c7=cW.$0,true):cW.$==3?(c7=cW.$0,true):cW.$==0?false:(c7=cW.$0,true))?cV.Remove(c7):cV.Add(cW.$0,cW.$1));}));});},new cw.New([]));};A.makeReply=function(cU){return A.replier(F.NoReply,A.msgType(D.MsgReply,cU));};A.mapPayload=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cV.subtype,cV.id,cU(cV.payload),cV.replier);};A.msgId=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cV.subtype,cU,cV.payload,cV.replier);};A.replier=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cV.subtype,cV.id,cV.payload,cU);};A.subtype=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cU,cV.id,cV.payload,cV.replier);};A.msgType=function(cU,cV){return G.New(cV.from,cV.destination,cU,cV.subtype,cV.id,cV.payload,cV.replier);};A.destination=function(cU,cV){return G.New(cV.from,cU,cV.msgType,cV.subtype,cV.id,cV.payload,cV.replier);};A.from=function(cU,cV){return G.New(cU,cV.destination,cV.msgType,cV.subtype,cV.id,cV.payload,cV.replier);};A.MessageBrokerAddress=function(){bZ.$cctor();return bZ.MessageBrokerAddress;};A.MessageBrokerId=function(){bZ.$cctor();return bZ.MessageBrokerId;};Q.New=function(cU,cV){return{Code:cU,Message:cV};};R.New=function(cU,cV,cW){return{File:cU,Line:cV,Column:cW};};S.New=function(cU,cV,cW,cX){return{Name:cU,ReplacementText:cV,Glyph:cW,GlyphChar:cX};};T.New=function(cU,cV){return{Signature:cU,Comment:cV};};U.New=function(cU,cV,cW,cX){return{Name:cU,CanonicalTypeTextForSorting:cV,Display:cW,Description:cX};};V.New=function(cU,cV,cW,cX){return{Tip:cU,TypeText:cV,Parameters:cW,IsStaticArguments:cX};};W.New=function(cU,cV){return{Name:cU,Type:cV};};X.New=function(cU,cV){return{OutputType:cU,Parameters:cV};};Y.New=function(cU,cV,cW){return{Name:cU,CurrentParameter:cV,Overloads:cW};};Z.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4){return{FileName:cU,StartLine:cV,StartColumn:cW,EndLine:cX,EndColumn:cY,IsFromDefinition:cZ,IsFromAttribute:c0,IsFromComputationExpression:c1,IsFromDispatchSlotImplementation:c2,IsFromPattern:c3,IsFromType:c4};};_0.New=function(cU,cV){return{Name:cU,Uses:cV};};_1.New=function(cU,cV){return{Name:cU,Overloads:cV};};_2.New=function(cU,cV,cW){return{Fsc:cU,Fsi:cV,MSBuild:cW};};_3.New=function(cU,cV,cW,cX,cY,cZ,c0){return{FileName:cU,StartLine:cV,EndLine:cW,StartColumn:cX,EndColumn:cY,Message:cZ,Subcategory:c0};};_4.New=function(cU,cV){return{File:cU,Errors:cV};};_5.New=function(cU){return{Kind:cU};};_6.New=function(cU,cV,cW,cX,cY,cZ,c0,c1){return{UniqueName:cU,Name:cV,Glyph:cW,GlyphChar:cX,IsTopLevel:cY,File:cZ,EnclosingEntity:c0,IsAbstract:c1};};_7.New=function(cU,cV){return{Declaration:cU,Nested:cV};};_8.New=function(cU,cV,cW,cX,cY,cZ){return{Namespace:cU,Name:cV,Type:cW,Line:cX,Column:cY,MultipleNames:cZ};};_9.New=function(cU,cV){return{Name:cU,Qualifier:cV};};_.New=function(cU,cV,cW){return{Opens:cU,Qualifies:cV,Word:cW};};$.New=function(cU){return{Text:cU};};ba.ACMIdentification={$:0};bb=O.FSAutoCompleteIntermediaryClient=b9.Class({info2Bool:function(cU){return cU.$==0&&cU.$0==="true";},errors2String:function(cU){return cU.$==7?b7.concat("\n",b5.map(function(cV){return((((((((b9.Curried(function(cW,cX,cY,cZ,c0,c1,c2,c3){return cW("ErrFSharp \"F# "+b_.toSafe(cX)+".fsx ("+a.String(cY)+","+a.String(cZ)+") - ("+a.String(c0)+","+a.String(c1)+") "+b_.toSafe(c2)+":"+b_.toSafe(c3)+"\"");},8))(a.id))(cV.FileName))(cV.StartLine))(cV.StartColumn))(cV.EndLine))(cV.EndColumn))(cV.Subcategory))(cV.Message);},cU.$0.Errors)):(function(cV){return function(cW){return cV(b2.p$7(cW));};}(a.id))(cU);},tip2String:function(cU){return cU.$==11?b7.concat("\n",b5.collect(function(cV){return cj.ofArray([cV.Signature,cV.Comment]);},b5.collect(a.id,cU.$0))):(function(cV){return function(cW){return cV(b2.p$7(cW));};}(a.id))(cU);},comp2Strings:function(cU){var cV;cV=this;return cU.$==3?ca.map(function(cW){return[cW.Name,cW.ReplacementText,cW.Glyph,cW.GlyphChar];},cU.$0):cU.$==2?[]:cU.$==17?ca.collect(function(cW){return cV.comp2Strings(cW);},cU.$0):[[(function(cW){return function(cX){return cW(b2.p$7(cX));};}(a.id))(cU),"","ErrorMsg","E"]];},Async_map:function(cU,cV){var cW;cW=null;return b4.Delay(function(){return b4.Bind(cV,function(cX){return b4.Return(cU(cX));});});},FindDecl:function(cU,cV,cW,cX){return this.Async_map(a.id,O.sendMessage({$:7,$0:cU,$1:cV,$2:cW,$3:cX}));},FindDecl$1:function(cU,cV,cW){return this.Async_map(a.id,O.sendMessage({$:6,$0:cU,$1:cV,$2:cW}));},Complete:function(cU,cV,cW,cX,cY){var cZ;cZ=this;return cZ.Async_map(function(c0){return cZ.comp2Strings(c0);},O.sendMessage({$:9,$0:cU,$1:cW,$2:cX,$3:cV,$4:cY}));},Complete$1:function(cU,cV,cW,cX){var cY;cY=this;return cY.Async_map(function(cZ){return cY.comp2Strings(cZ);},O.sendMessage({$:8,$0:cU,$1:cW,$2:cX,$3:cV}));},ToolTip:function(cU,cV,cW,cX){var cY;cY=this;return cY.Async_map(function(cZ){return cY.tip2String(cZ);},O.sendMessage({$:3,$0:cU,$1:cV,$2:cW,$3:cX}));},ToolTip$1:function(cU,cV,cW){var cX;cX=this;return cX.Async_map(function(cY){return cX.tip2String(cY);},O.sendMessage({$:2,$0:cU,$1:cV,$2:cW}));},Parse:function(cU,cV){var cW;cW=this;return cW.Async_map(function(cX){return cW.errors2String(cX);},O.sendMessage({$:10,$0:cU,$1:cV,$2:[]}));},Parse$1:function(cU,cV,cW){var cX;cX=this;return cX.Async_map(function(cY){return cX.errors2String(cY);},O.sendMessage({$:10,$0:cU,$1:cV,$2:cW}));},MustParse:function(cU,cV){var cW;cW=this;return cW.Async_map(function(cX){return cW.info2Bool(cX);},O.sendMessage({$:11,$0:cU,$1:cV}));}},i,bb);bb.New=b9.Ctor(function(cU,cV){},bb);O.sendMessage=function(cU){var cV;cV=null;return b4.Delay(function(){return b4.Bind((new cy.New()).Async("FSharpStation:FSSGlobal.FSAutoCompleteIntermediary.sendMessageRpc:1124743568",[cU]),function(cW){return b4.Return(cW);});});};bd.extractConfig=function(cU){return b7.StartsWith(cU,"////-d:")?cz.string(cU,{$:1,$0:4},{$:1,$0:cU.indexOf("\n")-1}):"";};bc.abortFsiExe=function(){b4.Start((new cy.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.abortFsiExe:-829366048",[]),null);};bc.evaluateAR=function(cU,cV,cW,cX){var cY;cY=null;return b4.Delay(function(){return b4.Bind((new cy.New()).Async("FSharpStation:FSSGlobal.FsEvaluator.evaluateAS:-156288114",[cU,cV,cW,cX]),function(cZ){function c0(c1,c2){return new l.New(c1,c2);}return b4.Return({$:0,$0:cZ[0],$1:ca.ofSeq(b5.map(function(c1){return c0(c1[0],c1[1]);},cZ[1]))});});});};be.translateAR=function(cU,cV){var cW;cW=null;return b4.Delay(function(){return b4.Bind((new cy.New()).Async("FSharpStation:FSSGlobal.FsTranslator.translateAS:608897894",[cU,cV]),function(cX){function cY(cZ,c0){return new l.New(cZ,c0);}return b4.Return({$:0,$0:cX[0],$1:ca.ofSeq(b5.map(function(cZ){return cY(cZ[0],cZ[1]);},cX[1]))});});});};bg=bf.Val=b9.Class({get_ValTypeMember:function(){return 0;}},null,bg);bh.HelperType={$:0};bh.op_AmpGreater=function(cU,cV){return new bg({$:2,$0:cV});};bh.op_AmpGreater$1=function(cU,cV){return new bg({$:1,$0:cV});};bh.op_AmpGreater$2=function(cU,cV){return cV;};bh.op_AmpGreater$3=function(cU,cV){return cV;};bh.op_AmpGreater$4=function(cU,cV){return cV;};bh.op_AmpGreater$5=function(cU,cV){return cV;};bh.op_AmpGreater$6=function(cU,cV){return cV;};bh.op_AmpGreater$7=function(cU,cV){return cV;};bh.op_AmpGreater$8=function(cU,cV){return cV;};bh.op_AmpGreater$9=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$10=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$11=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$12=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$13=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$14=function(cU,cV){return new bg({$:0,$0:cV});};bi=bg.valBuilder=b9.Class({Delay:function(cU){return cU();},Zero:function(){return new bg({$:0,$0:null});},Bind:function(cU,cV){return bg.bind(cV,cU);},Bind$1:function(cU,cV){return bg.bind(cV,cU);},Bind$2:function(cU,cV){return bg.bind(cV,cU);},ReturnFrom:a.id,Return:function(cU){return new bg({$:0,$0:cU});}},i,bi);bi.New=b9.Ctor(function(){},bi);bg.fixitF=function(cU,cV){return cU(cV);};bg.valFlow=function(){bZ.$cctor();return bZ.valFlow;};bg.mapCached=function(cU,cV){return new bg({$:2,$0:cA.MapCached(cU,bg.toView(cV))});};bg.sink=function(cU,cV){cA.Sink(cU,bg.toView(bg.fixit(cV)));};bg.mapAsync=function(cU,cV){return new bg({$:2,$0:cA.MapAsync(cU,bg.toView(bg.fixit(cV)))});};bg.iter4=function(cU,cV,cW,cX,cY){bg.iterV(a.ignore,bg.map4(cU,cV,cW,cX,cY));};bg.iter3=function(cU,cV,cW,cX){bg.iterV(a.ignore,bg.map3(cU,cV,cW,cX));};bg.iter2=function(cU,cV,cW){bg.iterV(a.ignore,bg.map2(cU,cV,cW));};bg.apply=function(cU,cV){return bg.bindV(function(cW){return bg.mapV(cW,cU);},cV);};bg.map4=function(cU,cV,cW,cX,cY){return bg.map4V(cU,bg.fixit(cV),bg.fixit(cW),bg.fixit(cX),bg.fixit(cY));};bg.map3=function(cU,cV,cW,cX){return bg.map3V(cU,bg.fixit(cV),bg.fixit(cW),bg.fixit(cX));};bg.map2=function(cU,cV,cW){return((bg.map2V(cU))(bg.fixit(cV)))(bg.fixit(cW));};bg.map=function(cU,cV){return bg.mapV(cU,bg.fixit(cV));};bg.bind=function(cU,cV){return bg.bindV(cU,bg.fixit(cV));};bg.iter=function(cU,cV){bg.iterV(cU,bg.fixit(cV));};bg.toDoc=function(cU){return cB.EmbedView(bg.toView(bg.fixit(cU)));};bg.fixit=function(cU){return bg.fixitF(bg.toVal,cU);};bg.toVal=function(cU){return typeof cU=="string"?new bg({$:0,$0:cU}):typeof cU=="number"?new bg({$:0,$0:cU}):typeof cU=="boolean"?new bg({$:0,$0:cU}):cU instanceof cB?new bg({$:0,$0:cU}):cU instanceof bg?cU:cU instanceof bS?new bg({$:1,$0:cU}):"RSet"in cU?new bg({$:1,$0:cU}):typeof cU=="function"?new bg({$:2,$0:cU}):cU.get_ValTypeMember()===0?cU:cC.FailWith((function(cV){return function(cW){return cV("Could not convert "+b_.prettyPrint(cW));};}(a.id))(cU));};bg.attrV=function(cU,cV){return cV.$==2?cD.Dynamic(cU,cV.$0):cV.$==1?cD.Dynamic(cU,cV.$0.get_View()):cE.Create(cU,cV.$0);};bg.attrVO=function(cU,cV){var cW,cX;return cV.$==2?(cW=cV.$0,cD.DynamicPred(cU,cA.Map(function(cY){return cY!=null;},cW),cA.Map(function(cY){return cY==null?"":cY.$0;},cW))):cV.$==1?(cX=cV.$0,cD.DynamicPred(cU,cA.Map(function(cY){return cY!=null;},cX.get_View()),cA.Map(function(cY){return cY==null?"":cY.$0;},cX.get_View()))):cV.$0==null?cD.DynamicPred(cU,cA.Const(false),cA.Const("")):cE.Create(cU,cV.$0.$0);};bg.tagElt=function(cU,cV){return cV.$==2?cB.EmbedView(cA.Map(cU,cV.$0)):cV.$==1?cB.EmbedView(cA.Map(cU,cV.$0.get_View())):cU(cV.$0);};bg.tagDoc=function(cU,cV){return cV.$==2?cB.EmbedView(cA.Map(cU,cV.$0)):cV.$==1?cB.EmbedView(cA.Map(cU,cV.$0.get_View())):cU(cV.$0);};bg.map4V=function(cU,cV,cW,cX,cY){var cZ;cZ=bg.map3V(cU,cV,cW,cX);return((bg.map2V(function(c0){return function(c1){return c1(c0);};}))(cY))(cZ);};bg.map3V=function(cU,cV,cW,cX){var cY;cY=((bg.map2V(cU))(cV))(cW);return((bg.map2V(function(cZ){return function(c0){return c0(cZ);};}))(cX))(cY);};bg.map2V=function(cU){function cV(cX,cY,cZ){return(cX(cZ))(cY);}function cW(cX){var cY,cZ;cY=(cZ=function(c0){var c1;c1=cU(c0);return function(c2){return bg.mapV(c1,c2);};},function(c0){return cV(cZ,cX,c0);});return function(c0){return bg.bindV(cY,c0);};}return(b9.Curried3(cV))(cW);};bg.bindV=function(cU,cV){return cV.$==2?new bg({$:2,$0:cA.Bind(function(cW){return bg.toView(cU(cW));},cV.$0)}):cV.$==1?new bg({$:2,$0:cA.Bind(function(cW){return bg.toView(cU(cW));},cV.$0.get_View())}):cU(cV.$0);};bg.getAsync=function(cU){return cU.$==2?cA.GetAsync(cU.$0):cU.$==1?b4.Return(cU.$0.Get()):b4.Return(cU.$0);};bg.toView=function(cU){return cU.$==2?cU.$0:cU.$==1?cU.$0.get_View():cA.Const(cU.$0);};bg.iterV=function(cU,cV){if(cV.$==2)cA.Get(cU,cV.$0);else if(cV.$==1)cU(cV.$0.Get());else cU(cV.$0);};bg.mapV=function(cU,cV){return cV.$==2?new bg({$:2,$0:cA.Map(cU,cV.$0)}):cV.$==1?new bg({$:2,$0:cA.Map(cU,cV.$0.get_View())}):new bg({$:0,$0:cU(cV.$0)});};bj=bf.HtmlNode=b9.Class({Style:function(cU){return this.AddChildren([bf.style(cU)]);},AddClass:function(cU){return bf.addClass(cU,this);},InsertChildren:function(cU){return bf.insertChildren(cU,this);},AddChildren:function(cU){return bf.addChildren(cU,this);},get_toDoc:function(){var cU,cV,cW;return this.$==3||this.$==6?cB.Empty():(cV=bf.chooseNode(this),(cW=cB.Empty(),cV==null?cW:cV.$0));}},null,bj);bj.HtmlEmpty=new bj({$:6});bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(11,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(10,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(9,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(8,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(7,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(6,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(5,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(4,cV,cU);};bj.op_MinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(3,cV,cU);};bj.op_MinusMinus=function(cU,cV){return bf.indent2Level(2,cV,cU);};bj.op_Addition=function(cU,cV){return new cj.T({$:1,$0:cV,$1:cU});};bj.op_MinusMinusMinus=function(cU,cV){return cU.$==1?cU.$1.$==1?new cj.T({$:1,$0:cU.$1.$0.AddChildren([cU.$0.AddChildren([cV])]),$1:cU.$1.$1}):cj.ofArray([cU.$0.AddChildren([cV])]):cj.T.Empty;};bj.op_Subtraction=function(cU,cV){return cU.$==0?cj.T.Empty:new cj.T({$:1,$0:cU.$0.AddChildren([cV]),$1:cU.$1});};bf.LoadFilesAsync=function(cU){function cV(cW,cX){try{a.CIPHERSpaceLoadFiles(cU,cW);}catch(cY){cX(cY);}}return b4.FromContinuations(function(cW,cX,cY){return cV.apply(null,[cW,cX,cY]);});};bf.findRootElement=function(cU){var cV;return!function(cW){return cU.getRootNode(cW);}?a.document.body:(cV=cU.getRootNode(),!cV.body?cV.firstChild:cV.body);};bf.createIFrame$3340$45=b9.Curried3(function(cU,cV,cW){return cA.Get(function(cX){if(!cX)cU.Set(false);},cG.get_MousePressed());});bf.createIFrame$3335$45=b9.Curried3(function(cU,cV,cW){return cU.Set(true);});bf.createIFrame=function(cU){var cV;function cW(cY,cZ){return cV.Set(true);}function cX(cY,cZ){return cA.Get(function(c0){if(!c0)cV.Set(false);},cG.get_MousePressed());}cV=bS.Create$1(true);return bf.div([bf.style("position: relative; overflow: hidden; height: 100%; width: 100%;"),bf.iframe([bf.style("position: absolute; width:100%; height:100%;"),bf.frameborder("0"),new bj({$:8,$0:cD.OnAfterRender(cU)}),new bj({$:8,$0:cE.HandlerImpl("mouseleave",function(cY){return function(cZ){return cW(cY,cZ);};})})]),bf.div([bf.style("position: absolute;"),bf.classIf("iframe-cover",bg.map(a.id,cV)),new bj({$:8,$0:cE.HandlerImpl("mouseenter",function(cY){return function(cZ){return cX(cY,cZ);};})})]),bf.styleH([bf.htmlText(".iframe-cover { top:0; left:0; right:0; bottom:0; background: blue; opacity: 0.04; z-index: 2; }")])]);};bf.bindHElem=function(cU,cV){return new bj({$:2,$0:bg.map(cU,bg.fixit(cV))});};bf.string2Styles=function(){bZ.$cctor();return bZ.string2Styles;};bf.style2pairs=function(cU){return ca.map(function(cV){return[b7.Trim(ca.get(cV,0)),b7.Trim(ca.get(cV,1))];},ca.filter(function(cV){return ca.length(cV)===2;},ca.map(function(cV){return b7.SplitChars(cV,[":"],0);},b7.SplitChars(cU,[";"],0))));};bf.xclass=function(cU){var cV,cW;return new bj({$:8,$0:(cV=bg.fixit(cU),cV.$==2?cD.DynamicClass("class_for_view_not_implemented",cV.$0,function(cX){return""!==cX;}):cV.$==1?(cW=cV.$0,cD.DynamicClass(cW.Get(),cW.get_View(),function(cX){return""!==cX;})):cD.Class(cV.$0))});};bf.classIf=function(cU,cV){return bf["class"](bg.map(function(cW){return cW?cU:"";},bg.fixit(cV)));};bf.css=function(cU){return bf.styleH([bf.htmlText(cU)]);};bf.style1=function(cU,cV){var cW;return bf.style(bg.map((cW=cU+":",function(cX){return cW+cX;}),cV));};bf.placeholder=function(cU){return bf.htmlAttribute("placeholder",cU);};bf.style=function(cU){return bf.htmlAttribute("style",cU);};bf.draggable=function(cU){return bf.htmlAttribute("draggable",cU);};bf.spellcheck=function(cU){return bf.htmlAttribute("spellcheck",cU);};bf.frameborder=function(cU){return bf.htmlAttribute("frameborder",cU);};bf.Id=function(cU){return bf.htmlAttribute("id",cU);};bf.title=function(cU){return bf.htmlAttribute("title",cU);};bf.width=function(cU){return bf.htmlAttribute("width",cU);};bf.type=function(cU){return bf.htmlAttribute("type",cU);};bf["class"]=function(cU){return bf.htmlAttribute("class",cU);};bf.src=function(cU){return bf.htmlAttribute("src",cU);};bf.charset=function(cU){return bf.htmlAttribute("charset",cU);};bf.rel=function(cU){return bf.htmlAttribute("rel",cU);};bf.hrefO=function(cU){return bf.htmlAttributeO("href",cU);};bf.href=function(cU){return bf.htmlAttribute("href",cU);};bf.target=function(cU){return bf.htmlAttribute("target",cU);};bf.strong=function(cU){return bf.htmlElement("strong",cU);};bf.section=function(cU){return bf.htmlElement("section",cU);};bf.body=function(cU){return bf.htmlElement("body",cU);};bf.iframe=function(cU){return bf.htmlElement("iframe",cU);};bf.link=function(cU){return bf.htmlElement("link",cU);};bf.fieldset=function(cU){return bf.htmlElement("fieldset",cU);};bf.styleH=function(cU){return bf.htmlElement("style",cU);};bf.script=function(cU){return bf.htmlElement("script",cU);};bf.button=function(cU){return bf.htmlElement("button",cU);};bf.label=function(cU){return bf.htmlElement("label",cU);};bf.tbody=function(cU){return bf.htmlElement("tbody",cU);};bf.td=function(cU){return bf.htmlElement("td",cU);};bf.tr=function(cU){return bf.htmlElement("tr",cU);};bf.th=function(cU){return bf.htmlElement("th",cU);};bf.thead=function(cU){return bf.htmlElement("thead",cU);};bf.table=function(cU){return bf.htmlElement("table",cU);};bf.form=function(cU){return bf.htmlElement("form",cU);};bf.span=function(cU){return bf.htmlElement("span",cU);};bf.img=function(cU){return bf.htmlElement("img",cU);};bf.div=function(cU){return bf.htmlElement("div",cU);};bf.h6=function(cU){return bf.htmlElement("h6",cU);};bf.h5=function(cU){return bf.htmlElement("h5",cU);};bf.h4=function(cU){return bf.htmlElement("h4",cU);};bf.h3=function(cU){return bf.htmlElement("h3",cU);};bf.h2=function(cU){return bf.htmlElement("h2",cU);};bf.h1=function(cU){return bf.htmlElement("h1",cU);};bf.hr=function(cU){return bf.htmlElement("hr",cU);};bf.br=function(cU){return bf.htmlElement("br",cU);};bf.li=function(cU){return bf.htmlElement("li",cU);};bf.ul=function(cU){return bf.htmlElement("ul",cU);};bf.p=function(cU){return bf.htmlElement("p",cU);};bf.a=function(cU){return bf.htmlElement("a",cU);};bf.textV=function(cU){return bf.tag(cB.TextNode,cU);};bf._placeholder=function(cU){return bf.atr("placeholder",cU);};bf._style=function(cU){return bf.atr("style",cU);};bf._type=function(cU){return bf.atr("type",cU);};bf._class=function(cU){return bf.atr("class",cU);};bf.tag=function(cU,cV){return bg.tagDoc(cU,bg.fixit(cV));};bf.atr=function(cU,cV){return bg.attrV(cU,bg.fixit(cV));};bf.renderDoc=function(){bZ.$cctor();return bZ.renderDoc;};bf.op_BangBang=function(cU,cV){return cj.ofArray([cU(cV)]);};bf.endHtmlIndent=function(cU){var cV;cV=bf.finishO(cU);return cV==null?bf.htmlText("Malformed HTMLNode"):cV.$0;};bf.finishO=function(cU){return cU.$==1?cU.$1.$==1?bf.finishO(bf.out(cU)):{$:1,$0:cU.$0}:null;};bf.indent2Level=function(cU,cV,cW){return cW.get_Length()<cU?new cj.T({$:1,$0:cV,$1:cW}):bf.indent2Level(cU,cV,bf.out(cW));};bf.out=function(cU){return cU.$==1?cU.$1.$==1?new cj.T({$:1,$0:bf.addChildren([cU.$0],cU.$1.$0),$1:cU.$1.$1}):cj.ofArray([cU.$0]):cj.T.Empty;};bf.addClassIf=function(cU,cV){var cW;cW=bg.map(function(cX){return cX?cU:"";},bg.fixit(cV));return function(cX){return bf.addClass(cW,cX);};};bf.addClass=function(cU,cV){return bf.addChildren(cj.ofArray([bf.htmlAttribute("class",cU)]),cV);};bf.insertChildren=function(cU,cV){function cW(cX,cY){return[cX,b5.append(cU,cY)];}return bf.mapHtmlElement(function(cX){return function(cY){return cW(cX,cY);};},cV);};bf.addChildren=function(cU,cV){function cW(cX,cY){return[cX,b5.append(cY,cU)];}return bf.mapHtmlElement(function(cX){return function(cY){return cW(cX,cY);};},cV);};bf.someElt=function(cU){return new bj({$:7,$0:cU});};bf.str=function(cU){return new bj({$:5,$0:bg.fixit(cU)});};bf.htmlText=function(cU){return new bj({$:5,$0:bg.fixit(cU)});};bf.htmlAttributeO=function(cU,cV){return new bj({$:4,$0:cU,$1:bg.fixit(cV)});};bf.htmlAttribute=function(cU,cV){return new bj({$:3,$0:cU,$1:bg.fixit(cV)});};bf.htmlElementF=function(cU,cV){return new bj({$:1,$0:cU,$1:cV});};bf.htmlElement=function(cU,cV){return new bj({$:0,$0:cU,$1:cV});};bf.mapHtmlElement=function(cU,cV){var cW;return cV.$==0?(cW=(cU(cV.$0))(cV.$1),new bj({$:0,$0:cW[0],$1:cW[1]})):cV.$==2?new bj({$:2,$0:bg.map(function(cX){return bf.mapHtmlElement(cU,cX);},cV.$0)}):cV;};bf.getAttrChildren=function(cU){var cV,cW,cX;function cY(cZ){var c0;return cZ.$==3&&(cZ.$0===cU&&(c0=[cZ.$0,cZ.$1],true))?{$:1,$0:c0[1]}:null;}cV=function(cZ){return b5.tryPick(cY,cZ);};cW=(cX=new bg({$:0,$0:""}),function(cZ){return cZ==null?cX:cZ.$0;});return function(cZ){return cW(cV(cZ));};};bf.chooseNode=function(cU){var cV,cW,cX,cY,cZ;return cU.$==0?(cV=cU.$1,{$:1,$0:cB.Element(cU.$0,bf.getAttrsFromSeq(cV),b5.choose(bf.chooseNode,cV))}):cU.$==1?(cW=cU.$1,{$:1,$0:(cU.$0(bf.getAttrsFromSeq(cW)))(b5.choose(bf.chooseNode,cW))}):cU.$==2?{$:1,$0:(cX=bg.toView(cU.$0),cB.BindView((cY=(cZ=cB.Empty(),function(c0){return c0==null?cZ:c0.$0;}),function(c0){return cY(bf.chooseNode(c0));}),cX))}:cU.$==5?{$:1,$0:bg.tagDoc(cB.TextNode,cU.$0)}:cU.$==7?{$:1,$0:cU.$0}:null;};bf.getAttrsFromSeq=function(cU){var cV;cV=b5.choose(bf.chooseAttr,cU);return b5.append(cj.choose(a.id,cj.ofArray([bf.groupAttr("class"," ",cU),bf.groupAttr("style","; ",cU)])),cV);};bf.groupAttr=function(cU,cV,cW){var cX,cY;function cZ(c0,c1){return bf.concat(cV,c0,c1);}cX=b5.choose(function(c0){return bf.chooseThisAttr(cU,c0);},cW);return b5.isEmpty(cX)?null:{$:1,$0:bg.attrV(cU,(cY=(b9.Curried3(bg.map2))(function(c0){return function(c1){return cZ(c0,c1);};}),b5.reduce(function(c0,c1){return(cY(c0))(c1);},cX)))};};bf.concat=function(cU,cV,cW){return cV+cU+cW;};bf.chooseThisAttr=function(cU,cV){var cW;return cV.$==3&&(cV.$0===cU&&(cW=[cV.$0,cV.$1],true))?{$:1,$0:cW[1]}:null;};bf.chooseAttr=function(cU){var cV,cW,cX,cY;return cU.$==3&&((cW=cU.$0,cW!=="class"&&cW!=="style")&&(cV=[cU.$0,cU.$1],true))?{$:1,$0:bg.attrV(cV[0],cV[1])}:cU.$==4&&((cY=cU.$0,cY!=="class"&&cY!=="style")&&(cX=[cU.$0,cU.$1],true))?{$:1,$0:bg.attrVO(cX[0],cX[1])}:cU.$==8?{$:1,$0:cU.$0}:null;};bf.addClassX=function(cU,cV){var cW;return b7.concat(" ",(cW=new cH.New$1(cI.OfSeq(b7.SplitChars(cU,[" "],0))),new cH.New$1(cI.OfSeq(b5.append(new cH.New$1(cI.OfSeq(b7.SplitChars(cV,[" "],0))),cW)))));};bl=bk.Button=b9.Class({OnClick:function(cU){return bl.New(this._class,this._type,this.style,this.text,cU,this.disabled,this.id);},Disabled:function(cU){return bl.New(this._class,this._type,this.style,this.text,this.onClick,bg.fixit(cU),this.id);},Text:function(cU){return bl.New(this._class,this._type,this.style,bg.fixit(cU),this.onClick,this.disabled,this.id);},Style:function(cU){return bl.New(this._class,this._type,bg.fixit(cU),this.text,this.onClick,this.disabled,this.id);},Type:function(cU){return bl.New(this._class,bg.fixit(cU),this.style,this.text,this.onClick,this.disabled,this.id);},Class:function(cU){return bl.New(bg.fixit(cU),this._type,this.style,this.text,this.onClick,this.disabled,this.id);},Id:function(cU){return bl.New(this._class,this._type,this.style,this.text,this.onClick,this.disabled,cU);},get_Render:function(){var cU,cV;return new bj({$:7,$0:(cU=bf.button([bf.type(this._type),bf["class"](this._class),bf.Id(this.id),bf.style(this.style),new bj({$:8,$0:(cV=cA.Const(""),cD.DynamicPred("disabled",bg.toView(this.disabled),cV))}),new bj({$:8,$0:cE.HandlerImpl("click",this.onClick)}),new bj({$:5,$0:this.text})]),(bf.renderDoc())(cU))});}},null,bl);bl.get_Render$3402$42=function(cU){return cU.onClick;};bl.New$1=function(cU){return bl.New(bg.fixit("btn"),bg.fixit("button"),bg.fixit(""),bg.fixit(cU),function(){return function(){return null;};},bg.fixit(false),"");};bl.New=function(cU,cV,cW,cX,cY,cZ,c0){return new bl({_class:cU,_type:cV,style:cW,text:cX,onClick:cY,disabled:cZ,id:c0});};bm=bk.Input=b9.Class({get_Var:function(){return this["var"];},Disabled:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,bg.fixit(cU));},SetVar:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,cU,this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Suffix:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,cU,this.content,this.prefixAdded,true,this.disabled);},Prefix:function(cU){return this.Prefix$1(bf.htmlText(cU));},Prefix$1:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],cU,this.suffix,this.content,true,this.suffixAdded,this.disabled);},Content:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,cU,this.prefixAdded,this.suffixAdded,this.disabled);},Id:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,cU,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Placeholder:function(cU){return bm.New(this._type,this._class,this.style,bg.fixit(cU),this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Style:function(cU){return bm.New(this._type,this._class,bg.fixit(cU),this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Type:function(cU){return bm.New(bg.fixit(cU),this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Class:function(cU){return bm.New(this._type,bg.fixit(cU),this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},get_Render:function(){var cU;function cV(cW){return cW.$==5?"input-group-addon":"input-group-btn";}cU=this;return bf.div(cj.ofSeq(b5.delay(function(){return b5.append(cU.prefixAdded||cU.suffixAdded?[bf["class"]("input-group")]:[],b5.delay(function(){return b5.append(cU.prefixAdded?[bf.span([bf["class"](cV(cU.prefix)),cU.prefix])]:[],b5.delay(function(){var cW;return b5.append([new bj({$:7,$0:cB.Input(b5.append(cU.content,cj.ofArray([bf._type(cU._type),bf._class(cU._class),bf._style(cU.style),cE.Create("id",cU.id),(cW=cA.Const(""),cD.DynamicPred("disabled",bg.toView(cU.disabled),cW)),bf._placeholder(cU.placeholder)])),cU["var"])})],b5.delay(function(){return cU.suffixAdded?[bf.span([bf["class"](cV(cU.suffix)),cU.suffix])]:[];}));}));}));})));}},null,bm);bm.New$1=function(cU){return bm.New$3(bS.Lens(cU,function(cV){return cV==null?"":cV.$0;},function(cV,cW){return cV==null?null:{$:1,$0:cW};})).Disabled(bg.map(function(cV){return cV==null;},cU));};bm.New$2=function(cU){return bm.New$3(bS.Create$1(cU));};bm.New$3=function(cU){var cV;cV=bg.fixit("form-control");return bm.New(bg.fixit("text"),cV,bg.fixit(""),bg.fixit("Enter text:"),"",cU,bj.HtmlEmpty,bj.HtmlEmpty,cj.T.Empty,false,false,bg.fixit(false));};bm.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5){return new bm({_type:cU,_class:cV,style:cW,placeholder:cX,id:cY,"var":cZ,prefix:c0,suffix:c1,content:c2,prefixAdded:c3,suffixAdded:c4,disabled:c5});};bn=bk.Hoverable=b9.Class({Content:function(cU){var cV;function cW(cY,cZ){return cV.hover.Set(true);}function cX(cY,cZ){return cV.hover.Set(false);}cV=this;return cU.AddChildren([bf.classIf("hovering",this.hover),new bj({$:8,$0:cE.HandlerImpl("mouseenter",function(cY){return function(cZ){return cW(cY,cZ);};})}),new bj({$:8,$0:cE.HandlerImpl("mouseleave",function(cY){return function(cZ){return cX(cY,cZ);};})})]);},Content$1:function(cU){var cV;function cW(cY,cZ){return cV.hover.Set(true);}function cX(cY,cZ){return cV.hover.Set(false);}cV=this;return bf.div(b5.append(cU,cj.ofArray([bf.classIf("hovering",this.hover),new bj({$:8,$0:cE.HandlerImpl("mouseenter",function(cY){return function(cZ){return cW(cY,cZ);};})}),new bj({$:8,$0:cE.HandlerImpl("mouseleave",function(cY){return function(cZ){return cX(cY,cZ);};})})])));}},null,bn);bn.get_Demo=function(){return bn.get_New().Content(bf.div([bf.style("flex-flow: column;")]));};bn.Content$3496$43=b9.Curried3(function(cU,cV,cW){return cU.hover.Set(false);});bn.Content$3495$43=b9.Curried3(function(cU,cV,cW){return cU.hover.Set(true);});bn.Content$3488$37=b9.Curried3(function(cU,cV,cW){return cU.hover.Set(false);});bn.Content$3487$37=b9.Curried3(function(cU,cV,cW){return cU.hover.Set(true);});bn.get_New=function(){return bn.New(bS.Create$1(false));};bn.New=function(cU){return new bn({hover:cU});};bo=bk.Panel=b9.Class({Disabled:function(cU){return bo.New(this._class,this._style,this.title,this.header,this.content,cU);},Content:function(cU){return bo.New(this._class,this._style,this.title,this.header,cU,this.disabled);},Header:function(cU){return bo.New(this._class,this._style,this.title,cU,this.content,this.disabled);},Title:function(cU){return bo.New(this._class,this._style,bg.fixit(cU),this.header,this.content,this.disabled);},Style:function(cU){return bo.New(this._class,bg.fixit(cU),this.title,this.header,this.content,this.disabled);},Class:function(cU){return bo.New(bg.fixit(cU),this._style,this.title,this.header,this.content,this.disabled);},get_Render:function(){var cU;return bf.fieldset([new bj({$:8,$0:(cU=cA.Const(""),cD.DynamicPred("disabled",bg.toView(this.disabled),cU))}),bf.div([bf["class"](this._class),bf.div(b5.append([bf["class"]("panel-heading"),bf.label([bf["class"]("panel-title text-center"),bf.htmlText(this.title)])],this.header)),bf.div(b5.append([bf["class"]("panel-body"),bf.style(this._style)],this.content))])]);}},null,bo);bo.get_New=function(){return bo.New(bg.fixit("panel panel-default shadow"),bg.fixit("text-align:center"),bg.fixit("Panel"),cj.ofArray([bf.htmlText("Some text")]),cj.ofArray([bf.htmlText("Some Content")]),bg.fixit(bS.Create$1(false)));};bo.New=function(cU,cV,cW,cX,cY,cZ){return new bo({_class:cU,_style:cV,title:cW,header:cX,content:cY,disabled:cZ});};bp=bk.TextArea=b9.Class({get_Var:function(){return this["var"];},Disabled:function(cU){return bp.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,this["var"],bg.fixit(cU));},SetVar:function(cU){return bp.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,cU,this.disabled);},Id:function(cU){return bp.New(this._class,this.placeholder,this.title,this.spellcheck,cU,this["var"],this.disabled);},Spellcheck:function(cU){return bp.New(this._class,this.placeholder,this.title,cU,this.id,this["var"],this.disabled);},Title:function(cU){return bp.New(this._class,this.placeholder,bg.fixit(cU),this.spellcheck,this.id,this["var"],this.disabled);},Placeholder:function(cU){return bp.New(this._class,bg.fixit(cU),this.title,this.spellcheck,this.id,this["var"],this.disabled);},Class:function(cU){return bp.New(bg.fixit(cU),this.placeholder,this.title,this.spellcheck,this.id,this["var"],this.disabled);},get_Render:function(){return this.RenderWith(cj.T.Empty);},RenderWith:function(cU){var cV,cW;cV=this;return bf.div([bf.htmlElementF(function(cX){return function(){return cB.InputArea(cX,cV["var"]);};},cj.append(cj.ofArray([bf["class"](this._class),bf.Id(this.id),bf.spellcheck(bg.map(function(cX){return cX?"true":"false";},this.spellcheck)),bf.title(this.title),bf.style("height: 100%;  width: 100%; box-sizing: border-box; "),bf.placeholder(this.placeholder),new bj({$:8,$0:(cW=cA.Const(""),cD.DynamicPred("disabled",bg.toView(this.disabled),cW))})]),cU))]);}},null,bp);bp.New$1=function(cU){return bp.New$3(bS.Lens(cU,function(cV){return cV==null?"":cV.$0;},function(cV,cW){return cV==null?null:{$:1,$0:cW};})).Disabled(bg.map(function(cV){return cV==null;},cU));};bp.New$2=function(cU){return bp.New$3(bS.Create$1(cU));};bp.New$3=function(cU){return bp.New(bg.fixit("form-control"),bg.fixit("Enter text:"),bg.fixit(""),bg.fixit(false),"",cU,bg.fixit(false));};bp.New=function(cU,cV,cW,cX,cY,cZ,c0){return new bp({_class:cU,placeholder:cV,title:cW,spellcheck:cX,id:cY,"var":cZ,disabled:c0});};bq.New=function(cU,cV){return{line:cU,ch:cV};};br=bk.CodeMirrorEditor=b9.Class({},i,br);br.New=b9.Ctor(function(){},br);bs=bk.CodeMirror=b9.Class({get_Var:function(){return this["var"];},Disabled:function(cU){return bs.New(this._class,this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO,bg.fixit(cU));},OnRender:function(cU){return bs.New(this._class,this.style,this.id,this["var"],this.onChange,{$:1,$0:cU},this.editorO,this.disabled);},OnChange:function(cU){return bs.New(this._class,this.style,this.id,this["var"],cU,this.onRender,this.editorO,this.disabled);},Style:function(cU){return bs.New(this._class,bg.fixit(cU),this.id,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},SetVar:function(cU){return bs.New(this._class,this.style,this.id,cU,this.onChange,this.onRender,this.editorO,this.disabled);},Id:function(cU){return bs.New(this._class,this.style,cU,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},Class:function(cU){return bs.New(bg.fixit(cU),this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},get_Render:function(){var cU;cU=this;return bf.div([bf["class"](this._class),new bj({$:8,$0:cE.Create("id",this.id)}),bf.style("position: relative; height: 300px"),bf.style(this.style),bf.div([bf.style("height: 100%; width: 100%; position: absolute;"),new bj({$:8,$0:cD.OnAfterRender(function(cV){a.CIPHERSpaceLoadFiles(bk.codeMirrorIncludes(),function(){var cW,cX,cY,cZ;cW=a.CodeMirror(cV,{theme:"rubyblue",lineNumbers:true,matchBrackets:true,gutters:["CodeMirror-lint-markers"],extraKeys:{Tab:function(c0){c0.replaceSelection("    ","end");},F11:function(c0){c0.setOption("fullScreen",!c0.getOption("fullScreen"));}}});cU.editorO={$:1,$0:cW};cX=cU.onRender;cX==null?void 0:cX.$0(cW);cY=[0];cZ=[0];cW.on("changes",function(){var c0;c0=cW.getValue();cU["var"].Get()!==c0?(cY[0]=cY[0]+1,cU["var"].Set(c0),cU.onChange()):void 0;});cA.Sink(function(){if(cY[0]>cZ[0])cZ[0]=cY[0];else if(cW.getValue()!==cU["var"].Get()){cW.setValue(cU["var"].Get());cW.getDoc().clearHistory();}},cU["var"].get_View());bg.sink(function(c0){cW.setOption("readOnly",c0&&"nocursor");},cU.disabled);});})})]),bf.link([bf.href("/EPFileX/codemirror/content/editor.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/content/codemirror.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/display/fullscreen.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/dialog/dialog.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/hint/show-hint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/lint/lint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css(".CodeMirror { height: 100% }")]);}},null,bs);bs.New$1=function(cU){return bs.New$3(bS.Lens(cU,function(cV){return cV==null?"":cV.$0;},function(cV,cW){return cV==null?null:{$:1,$0:cW};})).Disabled(bg.map(function(cV){return cV==null;},cU));};bs.New$2=function(cU){return bs.New$3(bS.Create$1(cU));};bs.New$3=function(cU){return bs.New(bg.fixit(""),bg.fixit(""),"",cU,a.ignore,null,null,bg.fixit(false));};bs.New=function(cU,cV,cW,cX,cY,cZ,c0,c1){return new bs({_class:cU,style:cV,id:cW,"var":cX,onChange:cY,onRender:cZ,editorO:c0,disabled:c1});};bt.New=function(cU,cV,cW){return{text:cU,displayText:cV,className:cW};};bu.New=function(cU,cV,cW){return{list:cU,from:cV,to:cW};};bv.New=function(cU,cV,cW){return{hint:cU,completeSingle:cV,container:cW};};bw.New=function(cU,cV,cW,cX){return{message:cU,severity:cV,from:cW,to:cX};};bx=bk.SplitterBar=b9.Class({Children:function(cU){return bx.New(this.value,this.min,this.max,this.vertical,this.node,cU,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_After:function(){return bx.New(this.value,this.min,this.max,this.vertical,this.node,this.children,true,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_Before:function(){return bx.New(this.value,this.min,this.max,this.vertical,this.node,this.children,false,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal:function(){return bx.New(this.value,this.min,this.max,bg.fixit(false),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical:function(){return bx.New(this.value,this.min,this.max,bg.fixit(true),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal$1:function(cU){return bx.New(this.value,this.min,this.max,bg.map(function(cV){return!cV;},bg.fixit(cU)),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical$1:function(cU){return bx.New(this.value,this.min,this.max,bg.fixit(cU),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Max:function(cU){return bx.New(this.value,this.min,bg.fixit(cU),this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Min:function(cU){return bx.New(this.value,bg.fixit(cU),this.max,this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Node:function(cU){return bx.New(this.value,this.min,this.max,this.vertical,cU,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Value:function(cU){this.value.Set(cU);return this;},get_Render:function(){var cU;function cV(c0){return cU.startVer?c0.clientX:c0.clientY;}function cW(){var c0;c0=cU.domElem;return c0!=null&&c0.$==1?cU.startVer?cU.after?c0.$0.parentElement.getBoundingClientRect().width:-c0.$0.parentElement.getBoundingClientRect().width:cU.after?c0.$0.parentElement.getBoundingClientRect().height:-c0.$0.parentElement.getBoundingClientRect().height:100;}function cX(c0){cU.value.Set((cV(c0)-cU.start)*100/cU.size+cU.startP);}function cY(){if(cU.dragging){cU.dragging=false;a.removeEventListener("mousemove",cX,false);a.removeEventListener("mouseup",cY,false);}}function cZ(c0,c1){return!cU.dragging?bg.iter(a.ignore,bg.map2(function(c2){return function(c3){cU.dragging=true;cU.startVer=c3;cU.startP=c2;cU.start=cV(c1);cU.size=cW();a.addEventListener("mousemove",cX,false);a.addEventListener("mouseup",cY,false);return c1.preventDefault();};},cU.get_GetValue(),cU.vertical)):null;}cU=this;return this.node.AddChildren([bf["class"](bg.map(function(c0){return c0?"Vertical":"Horizontal";},this.vertical)),new bj({$:8,$0:cE.HandlerImpl("mousedown",function(c0){return function(c1){return cZ(c0,c1);};})}),new bj({$:8,$0:cD.OnAfterRender(function(c0){cU.domElem={$:1,$0:c0};})}),bf.css("\n                    .Splitter.Vertical   { cursor: col-resize; background-color: #eef ; width : 5px ; margin-left:-7px; }\n                    .Splitter.Horizontal { cursor: row-resize; background-color: #eef ; height: 5px ; margin-top :-7px; }\n                ")]).AddChildren(this.children);},get_GetValue:function(){function cU(cW,cX){return b6.Compare(cW,cX)===-1?cW:cX;}function cV(cW,cX){return b6.Compare(cW,cX)===1?cW:cX;}return bg.map2(function(cW){return function(cX){return cU(cW,cX);};},this.max,bg.map2(function(cW){return function(cX){return cV(cW,cX);};},this.min,this.value));},get_Var:function(){return this.value;}},null,bx);bx.get_Render$3851$42=a.id;bx.New$1=function(cU){return bx.New$2(bS.Create$1(cU));};bx.New$2=function(cU){return bx.New(cU,bg.fixit(5),bg.fixit(95),bg.fixit(true),bf.div([bf["class"]("Splitter")]),cj.T.Empty,true,false,true,0,0,0,null);};bx.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6){return new bx({value:cU,min:cV,max:cW,vertical:cX,node:cY,children:cZ,after:c0,dragging:c1,startVer:c2,startP:c3,start:c4,size:c5,domElem:c6});};by.StFixedPerc={$:2};by.StFixedPx={$:1};by.StVariable={$:0};bz=bk.Grid=b9.Class({get_Render:function(){return bf.div(this.GridTemplate());},GridTemplate:function(){var cU;cU=this;return cj.ofSeq(b5.delay(function(){function cV(cW,cX){return cW!=null&&cW.$==1?cX.AddChildren([bf.style((function(cY){return function(cZ){return cY("grid-area: "+b_.toSafe(cZ)+"; dispxlay: grid");};}(a.id))(cW.$0))]):cX;}return b5.append(b5.map(function(cW){return cV(cW[0],cW[1]);},cU.content),b5.delay(function(){function cW(cX,cY){var cZ;return cY.$==2?(cZ=cY.$0,{$:1,$0:cZ.get_Render().InsertChildren([bf.style1("grid-column",a.String(cX+(cZ.after?2:1))),bf.style1("grid-row",(function(c0){return function(c1){return c0("1 / "+a.String(c1));};}(a.id))(ca.length(cU.rows)+1))])}):cY.$==1?null:null;}return b5.append(b5.choose(function(cX){return cW(cX[0],cX[1]);},b5.indexed(cU.cols)),b5.delay(function(){function cX(cY,cZ){var c0;return cZ.$==2?(c0=cZ.$0,{$:1,$0:c0.get_Render().InsertChildren([bf.style1("grid-row",a.String(cY+(c0.after?2:1))),bf.style1("grid-column",(function(c1){return function(c2){return c1("1 / "+a.String(c2));};}(a.id))(ca.length(cU.cols)+1))])}):cZ.$==1?null:null;}return b5.append(b5.choose(function(cY){return cX(cY[0],cY[1]);},b5.indexed(cU.rows)),b5.delay(function(){return b5.append(cU.styles(),b5.delay(function(){return b5.append([bf.style((((b9.Curried3(function(cY,cZ,c0){return cY("display: grid; grid-gap: "+cZ.toFixed(6)+"px; padding: "+c0.toFixed(6)+"px; box-sizing: border-box");}))(a.id))(cU.gap))(cU.padding))],b5.delay(function(){return[new bj({$:8,$0:cD.OnAfterRender(function(cY){function cZ(c1,c2){return!b6.Equals(c1.Get(),c2)?c1.Set(c2):null;}function c0(){var c1;c1=cY.getBoundingClientRect();cZ(cU.widthHeight,[c1.width,c1.height]);}c0();bk.addResizeObserver(c0,cY);})})];}));}));}));}));}));}));},styles:function(){return cj.ofArray([bf.style1("grid-template-columns",this.style(this.cols,bg.map(function(cU){return cU[0];},this.widthHeight))),bf.style1("grid-template-rows",this.style(this.rows,bg.map(function(cU){return cU[1];},this.widthHeight)))]);},style:function(cU,cV){var cW,cX,cY,cZ;function c0(c3,c4){return function(c5){return c5.$==2?[bg.map2(function(c6){return function(c7){return c6+c7;};},c5.$0.get_GetValue(),c3),c4]:c5.$==1?c5.$0.$==1?[c3,bg.map2(function(c6){return function(c7){return c6+c7;};},c5.$0.$0,c4)]:[bg.map2(function(c6){return function(c7){return c6+c7;};},c5.$0.$0,c3),c4]:[c3,c4];};}function c1(c3){return bg.map2(function(c4){return function(c5){var c6,c7,c8;c6=(c7=c4*c5,(c8=0,b6.Compare(c8,c7)===1?c8:c7));return(function(c9){return function(c_){return c9(c_.toFixed(6)+"%");};}(a.id))(c6);};},cY,c3);}function c2(c3){return bg.map(function(c4){var c5,c6;c5=(c6=0,b6.Compare(c6,c4)===1?c6:c4);return(function(c7){return function(c8){return c7(c8.toFixed(6)+"px");};}(a.id))(c5);},c3);}cW=this;return ca.length(cU)===0?new bg({$:0,$0:"100%"}):(cX=b5.fold(function(c3,c4){return(function(c5){return c0(c5[0],c5[1]);}(c3))(c4);},[new bg({$:0,$0:0}),new bg({$:0,$0:0})],cU),(cY=bg.map2(function(c3){return function(c4){return(c4-cW.padding*2-cW.gap*(ca.length(cU)-1)-c3)/(c4-cW.padding*2);};},cX[1],cV),(cZ=bg.map(function(c3){return 100-c3;},cX[0]),bg.map(function(c3){return b7.concat(" ",c3);},b5.foldBack(function(c3,c4){function c5(c6,c7){return new cj.T({$:1,$0:c7,$1:c6});}return bg.map2(function(c6){return function(c7){return c5(c6,c7);};},c4,c3.$==2?c1(c3.$0.get_GetValue()):c3.$==1?c3.$0.$==1?c2(c3.$0.$0):c1(c3.$0.$0):c1(cZ));},cU,new bg({$:0,$0:cj.T.Empty}))))));},Children:function(cU){return this.changeSplitter(function(cV){return cV.Children(cU);});},Min:function(cU){return this.changeSplitter(function(cV){return cV.Min(cU);});},Max:function(cU){return this.changeSplitter(function(cV){return cV.Max(cU);});},get_Before:function(){return this.changeSplitter(function(cU){return cU.get_Before();});},changeSplitter:function(cU){var cV,cW,cX,cY,cZ,c0;cV=this;cW=this.lastSplitter;cW==null?void 0:(cX=cW.$0,cY=cX[0],cX[1]?(cZ=ca.get(cV.cols,cY),cZ.$==2?ca.set(cV.cols,cY,{$:2,$0:cU(cZ.$0)}):void 0):(c0=ca.get(cV.rows,cY),c0.$==2?ca.set(cV.rows,cY,{$:2,$0:cU(c0.$0)}):void 0));return this;},Gap:function(cU){return bz.New(this.padding,cU,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Padding:function(cU){return bz.New(cU,this.gap,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content:function(cU){return bz.New(this.padding,this.gap,this.content.concat([[null,cU]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content$1:function(cU,cV){return bz.New(this.padding,this.gap,this.content.concat([[{$:1,$0:cU},cV]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},RowAuto:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:0,$0:bx.New$1(cU).Horizontal()}]),this.widthHeight,this.lastSplitter);},RowVariable:function(cU){return this.NewSplitter$1(cU,false);},RowVariable$1:function(cU){return this.NewSplitter(cU,false);},RowVariable$2:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cU}]),this.widthHeight,this.lastSplitter);},RowFixed:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:0,$0:bg.fixit(cU)}}]),this.widthHeight,this.lastSplitter);},RowFixedPx:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:1,$0:bg.fixit(cU)}}]),this.widthHeight,this.lastSplitter);},ColAuto:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:0,$0:bx.New$1(cU)}]),this.rows,this.widthHeight,this.lastSplitter);},ColVariable:function(cU){return this.NewSplitter$1(cU,true);},ColVariable$1:function(cU){return this.NewSplitter(cU,true);},ColVariable$2:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cU}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixed:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:0,$0:bg.fixit(cU)}}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixedPx:function(cU){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:1,$0:bg.fixit(cU)}}]),this.rows,this.widthHeight,this.lastSplitter);},NewSplitter:function(cU,cV){return this.NewSplitter$1(bS.Create$1(cU),cV);},NewSplitter$1:function(cU,cV){var cW,cX,cY;cW=bx.New$2(cU);return cV?(cX={$:1,$0:[ca.length(this.cols),cV]},bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cW}]),this.rows,this.widthHeight,cX)):(cY={$:1,$0:[ca.length(this.rows),cV]},bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cW.Horizontal()}]),this.widthHeight,cY));}},null,bz);bz.NewBisect=function(cU,cV,cW,cX,cY,cZ){var c0,c1,c2;c0=cW?[cV.$==1?function(c3){return c3.ColFixedPx(cX);}:cV.$==2?function(c3){return c3.ColFixed(cX);}:function(c3){return c3.ColVariable(cX);},function(c3){return c3.ColAuto(50);},function(c3){return c3.Content(bf.style("grid-template-areas: 'one   two' "));}]:[cV.$==1?function(c3){return c3.RowFixedPx(cX);}:cV.$==2?function(c3){return c3.RowFixed(cX);}:function(c3){return c3.RowVariable(cX);},function(c3){return c3.RowAuto(50);},function(c3){return c3.Content(bf.style("grid-template-areas: 'one' 'two' "));}];c1=c0[0];c2=c0[1];return(cU?function(c3){return c2(c1(c3));}:function(c3){return c1(c2(c3));})(c0[2](bz.get_New().Content$1("one",cY).Content$1("two",cZ).Padding(0)));};bz.get_New=function(){return bz.New(9,9,[],[],[],bS.Create$1([1000,100]),null);};bz.New=function(cU,cV,cW,cX,cY,cZ,c0){return new bz({padding:cU,gap:cV,content:cW,cols:cX,rows:cY,widthHeight:cZ,lastSplitter:c0});};bA=bk.TabStrip=b9.Class({get_Render:function(){var cU,cV,cW,cX;function cY(c0,c1){return c1.preventDefault();}function cZ(c0,c1){c1.preventDefault();return cU.reorder(ca.length(cU.tabs.Get()));}cU=this;cV=bf.bindHElem(function(c0){return bf.div(cj.ofSeq(b5.delay(function(){return b5.append([bf["class"]((((b9.Curried3(function(c1,c2,c3){return c1("tab-strip "+b_.toSafe(c2)+" "+b_.toSafe(c3));}))(a.id))(cU.top?"top":"bottom"))(cU.horizontal?"horizontal":"vertical"))],b5.delay(function(){return b5.collect(function(c1){var c2;function c3(c7,c8){return c8.preventDefault();}function c4(c7,c8){(bk.draggedTab())[0]={$:1,$0:[cU,c2]};}function c5(c7,c8){c8.preventDefault();c8.stopPropagation();return cU.reorder(c2);}function c6(c7,c8){return cU.selected.Set(c2);}c2=c1[0];return[bn.get_New().Content(bf.div([bf.htmlText(c1[1][1][0]),bf["class"](bg.map(function(c7){return"tab"+(c7===c2?" selected":"");},cU.selected)),bf.draggable("true"),new bj({$:8,$0:cE.HandlerImpl("dragover",function(c7){return function(c8){return c3(c7,c8);};})}),new bj({$:8,$0:cE.HandlerImpl("drag",function(c7){return function(c8){return c4(c7,c8);};})}),new bj({$:8,$0:cE.HandlerImpl("drop",function(c7){return function(c8){return c5(c7,c8);};})}),new bj({$:8,$0:cE.HandlerImpl("click",function(c7){return function(c8){return c6(c7,c8);};})})]))];},b5.indexed(c0));}));})));},this.tabs);bg.sink((cW=this.id,function(c0){bk.setSelectedPanel(cW,c0);}),this.get_Selected());cX=bf.bindHElem(function(c0){return bf.div(cj.ofSeq(b5.delay(function(){return b5.append([bf["class"]("tab-children")],b5.delay(function(){return b5.append([bf.Id(bk.uid2s(cU.id))],b5.delay(function(){function c1(c2,c3){return c3[1].AddChildren([bf.style(bg.map(function(c4){return b5.contains(c2,b5.map(function(c5){return c5[1];},cv.ToSeq(c4)))?"":"display : none";},bk.selectedPanels())),bf.Id(bk.uid2s(c2))]);}return b5.map(function(c2){return c1(c2[0],c2[1]);},c0);}));}));})));},this.tabs);return bf.div([bf["class"]("tab-panel"),this.top?cV:bj.HtmlEmpty,bf.div([cX,bf["class"]("tab-content")]),!this.top?cV:bj.HtmlEmpty,new bj({$:8,$0:cE.HandlerImpl("dragover",function(c0){return function(c1){return cY(c0,c1);};})}),new bj({$:8,$0:cE.HandlerImpl("drop",function(c0){return function(c1){return cZ(c0,c1);};})}),bf.css("\n    \n    .tab-panel {\n     overflow  : hidden   ;\n     display   : flex     ;\n     flex-flow : column   ;\n     background: lightgray;\n    }\n    .tab-content {\n     flex      : 1 1     ;\n     overflow  : auto    ;\n     position  : relative;\n    }\n    .tab-children {\n     height    : 100%    ;\n     width     : 100%    ;\n     position  : absolute;\n     display   : grid    ;\n    }\n    .tab-strip {\n     padding   : 0pt     ;\n     flex      : 0 0     ;\n    }\n    .tab {\n     border     : 0.2pt solid transparent;\n     padding    : 0pt 4pt;\n     display    : inline-block;\n     font-family: sans-serif;\n     font-weight: 200;\n     font-size  : small;\n     color      : #666;\n     cursor     : pointer;\n    }\n    .top>.tab {\n     border-radius: 2pt 2pt 0pt 0pt;\n     border-bottom-width: 0pt;\n     vertical-align: bottom;\n    }\n    .bottom>.tab {\n     border-top-width: 0pt;\n     border-radius: 0pt 0pt 2pt 2pt;\n     vertical-align: top;\n    }\n    .horizontal>.tab:not(:first-child) {\n     border-left-width: 0pt;\n    }\n    .tab.hovering {\n     background: red;\n    }\n    .tab.selected {\n     background: white;\n     border-left-width: 0.2pt;\n     color: black;\n     font-weight: 500;\n     border-color: black;\n    }\n    .horizontal>.tab.selected {\n     border-left-width: 0.2pt;\n    }\n    ")]);},Select:function(cU){var cV,cW;function cX(cY,cZ){return b6.Equals(cZ[0],cU)?(cV.selected.Set(cY),{$:1,$0:true}):null;}cV=this;cW=b5.tryPick(function(cY){return cX(cY[0],cY[1]);},b5.indexed(this.tabs.Get()));return cW==null?false:cW.$0;},Select$1:function(cU){var cV,cW;function cX(cY,cZ){return cZ[1][0]===cU?(cV.selected.Set(cY),{$:1,$0:true}):null;}cV=this;cW=b5.tryPick(function(cY){return cX(cY[0],cY[1]);},b5.indexed(this.tabs.Get()));return cW==null?false:cW.$0;},Select$2:function(cU){this.selected.Set(cU);},get_Selected:function(){return bg.map2(function(cU){return function(cV){var cW;cW=b5.tryItem(cV,cU);return cW==null?null:{$:1,$0:cW.$0[0]};};},this.tabs,this.selected);},get_Vertical:function(){return bA.New(this.selected,this.tabs,this.top,false,this.id);},get_Horizontal:function(){return bA.New(this.selected,this.tabs,this.top,true,this.id);},SetTop:function(cU){return bA.New(this.selected,this.tabs,cU,this.horizontal,this.id);},get_Bottom:function(){return bA.New(this.selected,this.tabs,false,this.horizontal,this.id);},get_Top:function(){return bA.New(this.selected,this.tabs,true,this.horizontal,this.id);},reorder:function(cU){var cV,cW,cX;cX=(bk.draggedTab())[0];if(cX!=null&&cX.$==1){if(!b6.Equals(cX.$0[0].id,this.id))this.moveTab(cX.$0[0],cX.$0[1],cU);else if(cX!=null&&cX.$==1){cV=cX.$0[1];this.tabs.Set(bk.reorderArray(this.tabs.Get(),cV,cU));cW=this.selected.Get();this.selected.Set(cW===cV?cU:cW<cV&&cW<cU||cW>cV&&cW>cU?cW:cW<cV?cW+1:cW-1);}else throw new cJ.New("Compiled\\FSharpStation2\\FSharpStation.fs",4149,18);}else void 0;},moveTab:function(cU,cV,cW){var cX,cY,cZ,c0;cX=this.tabs.Get();cY=cU.tabs.Get();cZ=ca.collect(a.id,[cz.array(cX,{$:1,$0:0},{$:1,$0:cW-1}),[ca.get(cY,cV)],cz.array(cX,{$:1,$0:cW},{$:1,$0:ca.length(cX)-1})]);c0=ca.collect(a.id,[cz.array(cY,{$:1,$0:0},{$:1,$0:cV-1}),cz.array(cY,{$:1,$0:cV+1},{$:1,$0:ca.length(cY)-1})]);cU.tabs.Set(c0);this.tabs.Set(cZ);this.selected.Set(cW);cU.selected.Get()>=ca.length(c0)?cU.selected.Set(0):void 0;bk.RaiseTabMoved(cU,this);}},null,bA);bA.get_Render$4220$42=b9.Curried3(function(cU,cV,cW){cW.preventDefault();return cU.reorder(ca.length(cU.tabs.Get()));});bA.get_Render$4219$42=b9.Curried3(function(cU,cV,cW){return cW.preventDefault();});bA.get_Render$4195$70=function(cU,cV){return function(){return function(){return cV.selected.Set(cU);};};};bA.get_Render$4194$70=function(cU,cV){return function(){return function(cW){cW.preventDefault();cW.stopPropagation();return cV.reorder(cU);};};};bA.get_Render$4193$70=function(cU,cV){return function(){return function(){(bk.draggedTab())[0]={$:1,$0:[cU,cV]};};};};bA.get_Render$4192$70=b9.Curried3(function(cU,cV,cW){return cW.preventDefault();});bA.New$1=function(cU){return bA.New$2(bS.Create$1(ca.ofSeq(b5.map(function(cV){return[ci.NewGuid(),cV];},cU))));};bA.New$2=function(cU){return bA.New(bS.Create$1(0),cU,false,true,ci.NewGuid());};bA.New=function(cU,cV,cW,cX,cY){return new bA({selected:cU,tabs:cV,top:cW,horizontal:cX,id:cY});};bB=bk.MenuEntry=b9.Class({get_MenuNode:function(){return new bC({$:1,$0:this});},SubMenu:function(cU){return bB.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bD.New2(cU).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},SubMenu$1:function(cU){return bB.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bD.New$1(cU).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},Disabled:function(cU){return bB.New(this.text,this.ref,this.active,bg.fixit(cU),this.subMenu,this.toolTip,this.target,this.divider,this.onClick);},OnClick:function(cU){return bB.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,this.divider,{$:1,$0:cU});},get_Divider:function(){return bB.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,true,this.onClick);},Target:function(cU){return bB.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,{$:1,$0:cU},this.divider,this.onClick);},get_Render:function(){var cU,cV,cW,cX,cY,cZ,c0,c1,c2;return(this.divider?function(c3){return bf.addClass("divider",c3);}:a.id)((cU=(cV=(cW=(cX=bk.entryTxt(this.text,(cY=this.target,cY==null?"":cY.$0),this.ref),(bf.addClassIf("active",this.active))(cX)),(bf.addClassIf("disabled",this.disabled))(cW)),(cZ=this.subMenu,(cZ!=null&&cZ.$==1?(c0=cj.ofArray([bf["class"]("dropdown"),cZ.$0.get_Render()]),function(c3){return bf.addChildren(c0,c3);}):a.id)(cV))),(c1=this.onClick,(c1!=null&&c1.$==1?(c2=cj.ofArray([new bj({$:8,$0:cE.HandlerImpl("click",c1.$0)}),bf.style("cursor : pointer")]),function(c3){return bf.addChildren(c2,c3);}):a.id)(cU))));}},null,bB);bB.get_Render$4333$104=a.id;bB.New$1=function(cU,cV){var cW;cW=bB.New$2(cU);return bB.New(cW.text,bg.map(function(cX){return{$:1,$0:cX};},cV),cW.active,cW.disabled,cW.subMenu,cW.toolTip,cW.target,cW.divider,cW.onClick);};bB.New$2=function(cU){var cV,cW;cV=bg.fixit(cU);cW=bg.fixit(false);return bB.New(cV,new bg({$:0,$0:null}),cW,bg.fixit(false),null,null,null,false,null);};bB.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2){return new bB({text:cU,ref:cV,active:cW,disabled:cX,subMenu:cY,toolTip:cZ,target:c0,divider:c1,onClick:c2});};bC=bk.MenuNode=b9.Class({get_Render:function(){return this.$==1?this.$0.get_Render():this.$0;}},null,bC);bD=bk.Menu=b9.Class({get_Render:function(){var cU;cU=this;return(this.dropdown?bk.dropdown:bk.nav)(cj.ofSeq(b5.delay(function(){return b5.map(function(cV){return cV.get_Render();},cU.entries);})));},get_DropDown:function(){return bD.New(this.entries,true);}},null,bD);bD.New2=function(cU){return bD.New$1(b5.map(function(cV){return new bC({$:1,$0:cV});},cU));};bD.New$1=function(cU){return bD.New(cU,false);};bD.New=function(cU,cV){return new bD({entries:cU,dropdown:cV});};bE=bk.Action=b9.Class({get_Button:function(){var cU,cV,cW;function cX(cY,cZ){return null;}cU=(cV=(cW=this.onClick,cW==null?null:{$:1,$0:cW.$0(this)}),cV==null?function(cY){return function(cZ){return cX(cY,cZ);};}:cV.$0);return bl.New(bg.map(function(cY){return cY?"btn btn-primary":"btn";},this.highlight),bg.fixit("button"),bg.fixit(""),this.text,cU,this.disabled,"");},get_MenuEntry:function(){var cU,cV;cU=(cV=this.onClick,cV==null?null:{$:1,$0:cV.$0(this)});return bB.New(this.text,new bg({$:0,$0:null}),this.highlight,this.disabled,null,this.toolTip,null,false,cU);},Highlight:function(cU){return bE.New(this.text,bg.fixit(cU),this.disabled,this.toolTip,this.onClick,this.parms);},Disabled:function(cU){return bE.New(this.text,this.highlight,bg.fixit(cU),this.toolTip,this.onClick,this.parms);},OnClick2:function(cU){return bE.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:cU},this.parms);},OnClick:function(cU){return bE.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:function(){return cU;}},this.parms);},Parms:function(cU){return bE.New(this.text,this.highlight,this.disabled,this.toolTip,this.onClick,{$:1,$0:cU});},Text:function(cU){return bE.New(bg.fixit(cU),this.highlight,bg.fixit(false),this.toolTip,this.onClick,this.parms);}},null,bE);bE.New$1=function(cU){return bE.New(bg.fixit(cU),bg.fixit(false),bg.fixit(false),null,null,null);};bE.New=function(cU,cV,cW,cX,cY,cZ){return new bE({text:cU,highlight:cV,disabled:cW,toolTip:cX,onClick:cY,parms:cZ});};bF=bk.GuiPart=b9.Class({GetHtmlNode:function(cU,cV){var cW,cX,cY,cZ,c0,c1;return this.$==1?[this.$0,a.ignore]:this.$==2?[this.$0.get_Button().get_Render(),a.ignore]:this.$==5?[cU.GetCallButton(this.$0,this.$1,this.$2),a.ignore]:this.$==4?(cW=bA.New$1(b5.map(function(c2){return[c2,cU.GetNode(c2)];},this.$1)).SetTop(this.$0),(bk.addValue(cV,cW,cU.tabStrips),[cW.get_Render(),a.ignore])):this.$==3?(cX=this.$3,(cY=bS.Create$1(this.$6),(cZ=bS.Create$1(this.$7),(c0=bS.Create$1(cX),(c1=[cX],[bz.NewBisect(this.$0,this.$1,this.$2,c0,cU.GetNode(this.$4),cU.GetNode(this.$5)).Min(cY).Max(cZ).get_Render(),function(c2){var c3;if(c2.$==3){c3=c2.$3;c1[0]!==c3?(c1[0]=c3,c0.Set(c3)):void 0;cY.Set(c2.$6);cZ.Set(c2.$7);}}]))))):[bj.HtmlEmpty,a.ignore];}},null,bF);bG.New=function(cU,cV,cW,cX,cY,cZ,c0){return{HtmlElementF:cU,HtmlAttributeF:cV,HtmlAttributeOF:cW,HtmlTextF:cX,HtmlEmptyF:cY,HtmlGuiPart:cZ,HtmlGuiCall:c0};};bH.New=function(cU,cV,cW,cX,cY){return{GuiRoot:cU,GuiTabStrip:cV,GuiSplit:cW,GuiNode:cX,GuiCall:cY};};bI.get_New=function(){return{$:0,$0:ci.NewGuid()};};bJ=bk.Layout=b9.Class({SelectTab:function(cU){b5.iter(function(cV){cV.Select$1(cU);},this.tabStrips.get_Values());},SetLayoutJson:function(cU,cV){var cW,cZ;function cX(c1){var c2,c3,c4,c5,c6,c7,c8;c2=bk.PHtmlElementF(c1);return c2!=null&&c2.$==1?{$:1,$0:new bj({$:0,$0:c2.$0[0],$1:b5.choose(cX,c2.$0[1])})}:(c3=bk.PHtmlAttributeF(c1),c3!=null&&c3.$==1?{$:1,$0:new bj({$:3,$0:c3.$0[0],$1:new bg({$:0,$0:c3.$0[1]})})}:(c4=bk.PHtmlAttributeOF(c1),c4!=null&&c4.$==1?{$:1,$0:new bj({$:4,$0:c4.$0[0],$1:new bg({$:0,$0:c4.$0[1]})})}:(c5=bk.PHtmlTextF(c1),c5!=null&&c5.$==1?{$:1,$0:new bj({$:5,$0:new bg({$:0,$0:c5.$0})})}:(c6=bk.PHtmlEmptyF(c1),c6!=null&&c6.$==1)?{$:1,$0:bj.HtmlEmpty}:(c7=bk.PHtmlGuiPart(c1),c7!=null&&c7.$==1?{$:1,$0:cZ.GetNode(c7.$0)}:(c8=bk.PHtmlGuiCall(c1),c8!=null&&c8.$==1?{$:1,$0:cZ.GetCallButton(c8.$0[0],c8.$0[1],c8.$0[2])}:null)))));}function cY(c1){var c2,c3,c4,c5,c6,c7;c2=bk.PGuiNode(c1);return c2!=null&&c2.$==1?{$:1,$0:new bF({$:1,$0:g.defaultValue(bj.HtmlEmpty,cX(c2.$0))})}:(c3=bk.PGuiRoot(c1),c3!=null&&c3.$==1?{$:1,$0:new bF({$:0,$0:c3.$0})}:(c4=bk.PGuiTabStrip(c1),c4!=null&&c4.$==1?{$:1,$0:(c5=c4.$0,new bF({$:4,$0:c5[0],$1:c5[1]}))}:(c6=bk.PGuiSplit(c1),c6!=null&&c6.$==1?{$:1,$0:new bF({$:3,$0:c6.$0[0],$1:bk.toSect(c6.$0[1]),$2:c6.$0[2],$3:c6.$0[3],$4:c6.$0[4],$5:c6.$0[5],$6:c6.$0[6],$7:c6.$0[7]})}:(c7=bk.PGuiCall(c1),c7!=null&&c7.$==1?{$:1,$0:new bF({$:5,$0:c7.$0[0],$1:c7.$0[1],$2:c7.$0[2]})}:null))));}cZ=this;function c0(c1,c2){var c3;c3=cY(c2);return c3==null?null:{$:1,$0:[c1,{$:1,$0:c2},c3.$0]};}try{cW=this.AddNewSteps(cU,cV===""?[]:ca.choose(function(c1){return c0(c1[0],c1[1]);},((co.DecodeArray(co.DecodeTuple([co.Id(),b0.j$12])))())(cl.parse(cV))));}catch(c1){cW=(function(c2){return function(c3){return c2("Error: "+b_.prettyPrint(c3));};}(function(c2){cb.log(c2);}))(c1);}},AddNewSteps:function(cU,cV){var cW;function cX(cZ,c0,c1){var c2,c3;if(cW.parts.ContainsKey(cZ)){c2=cW.parts.get_Item(cZ);c3=c2[0];b6.Equals((c3.Get())[0],c0)?bg.iter(a.ignore,bg.apply(new bg({$:0,$0:c1}),c2[2])):c3.Set([c0,c1]);}else cW.AddNode(cZ,c0,c1);}function cY(cZ,c0){return b5.last(c0);}cW=this;ca.iter(function(cZ){return cX(cZ[0],cZ[1],cZ[2]);},ca.map(function(cZ){return cY(cZ[0],cZ[1]);},ca.groupBy(function(cZ){return a.id(cZ[0],cZ[1],cZ[2]);},cU.concat(cV))));},get_Render:function(){function cU(cV){var cW;cW=cV.Get();return cW[1].$==0?{$:1,$0:cW[1].$0}:null;}return this.GetNode(g.defaultValue("main",b5.tryPick(function(cV){return cU(bk.t1of3.apply(null,cV));},this.parts.get_Values())));},GetNode:function(cU){var cV;cV=null;return this.parts.TryGetValue(cU,{get:function(){return cV;},set:function(cW){cV=cW;}})?bk.t2of3(cV[0],cV[1],cV[2]):this.AddNode(cU,bI.get_New(),new bF({$:1,$0:bf.div([bf.htmlText((function(cW){return function(cX){return cW("GuiPart "+b_.toSafe(cX)+" not found");};}(a.id))(cU))])}));},AddNode:function(cU,cV,cW){var cX,cY,cZ,c0;function c1(c2,c3){return c3.GetHtmlNode(cX,cU);}cX=this;cY=bS.Create$1([cV,cW]);cZ=bg.map(function(c2){return c1(c2[0],c2[1]);},cY);c0=new bj({$:2,$0:bg.map(function(c2){return c2[0];},cZ)});this.parts.Add(cU,[cY,c0,bg.map(function(c2){return c2[1];},cZ)]);return c0;},GetCallButton:function(cU,cV,cW){var cX;cX=m.Success(this.GetGuiCallAction(cU,cV,cW));return cX.$==1?bf.div([bf.htmlText(b7.concat(". ",m.msgs2String(cX.$0)))]):cX.$0[0].get_Button().get_Render();},GetGuiCallAction:function(cU,cV,cW){var cX;return this.parts.ContainsKey(cV)?(cX=(this.parts.get_Item(cV))[0].Get(),cX[1].$==2?m.succeed(cX[1].$0.Text(cU).Parms(ca.map(a.id,cW))):m.failSimpleError((function(cY){return function(cZ){return cY("GuiPart "+b_.toSafe(cZ)+" is not a GuiAction");};}(a.id))(cV))):m.failSimpleError((function(cY){return function(cZ){return cY("GuiAction "+b_.toSafe(cZ)+" not found");};}(a.id))(cV));}},null,bJ);bJ.New$1=function(cU){var cV;function cW(cX,cY,cZ){cV.AddNode(cX,cY,cZ);}cV=bJ.New(new cf.New$5(),new cf.New$5());b5.iter(function(cX){return cW(cX[0],cX[1],cX[2]);},cU);return cV;};bJ.AddGuids=function(cU){function cV(cW,cX){return[cW,cX.$==2?bI.get_New():cX.$==0?{$:2,$0:cX.$0}:cX.$==3?{$:4,$0:cX.$0,$1:cX.$1,$2:cX.$2,$3:cX.$4,$4:cX.$5}:cX.$==4?{$:3,$0:cX.$0,$1:cX.$1}:cX.$==5?{$:5,$0:cX.$0,$1:cX.$1,$2:cX.$2}:bI.get_New(),cX];}return ca.ofSeq(b5.map(function(cW){return cV(cW[0],cW[1]);},cU));};bJ.New=function(cU,cV){return new bJ({parts:cU,tabStrips:cV});};bk.varVerSplitter=function(cU,cV,cW,cX,cY){return new bF({$:3,$0:true,$1:by.StVariable,$2:true,$3:cU,$4:cV,$5:cW,$6:cX,$7:cY});};bk.varHorSplitter=function(cU,cV,cW,cX,cY){return new bF({$:3,$0:true,$1:by.StVariable,$2:false,$3:cU,$4:cV,$5:cW,$6:cX,$7:cY});};bk.fixPcVerSplitter=function(cU,cV,cW,cX){return new bF({$:3,$0:cU,$1:by.StFixedPerc,$2:true,$3:cV,$4:cW,$5:cX,$6:5,$7:95});};bk.fixPcHorSplitter=function(cU,cV,cW,cX){return new bF({$:3,$0:cU,$1:by.StFixedPerc,$2:false,$3:cV,$4:cW,$5:cX,$6:5,$7:95});};bk.fixedVerSplitter=function(cU,cV,cW,cX){return new bF({$:3,$0:cU,$1:by.StFixedPx,$2:true,$3:cV,$4:cW,$5:cX,$6:5,$7:95});};bk.fixedHorSplitter=function(cU,cV,cW,cX){return new bF({$:3,$0:cU,$1:by.StFixedPx,$2:false,$3:cV,$4:cW,$5:cX,$6:5,$7:95});};bk.t3of3=function(cU,cV,cW){return cW;};bk.t2of3=function(cU,cV,cW){return cV;};bk.t1of3=a.id;bk.toSect=function(cU){return cU==="StVariable"?by.StVariable:cU==="StFixedPx"?by.StFixedPx:by.StFixedPerc;};bk.PGuiCall=function(cU){return cU.GuiCall;};bk.PGuiNode=function(cU){return cU.GuiNode;};bk.PGuiRoot=function(cU){return cU.GuiRoot;};bk.PGuiSplit=function(cU){return cU.GuiSplit;};bk.PGuiTabStrip=function(cU){return cU.GuiTabStrip;};bk.PHtmlGuiCall=function(cU){return cU.HtmlGuiCall;};bk.PHtmlGuiPart=function(cU){return cU.HtmlGuiPart;};bk.PHtmlEmptyF=function(cU){return cU.HtmlEmptyF;};bk.PHtmlTextF=function(cU){return cU.HtmlTextF;};bk.PHtmlAttributeOF=function(cU){return cU.HtmlAttributeOF;};bk.PHtmlAttributeF=function(cU){return cU.HtmlAttributeF;};bk.PHtmlElementF=function(cU){return cU.HtmlElementF;};bk.addValue=function(cU,cV,cW){cW.Remove(cU);cW.Add(cU,cV);};bk.processLayoutSteps=function(cU,cV){var cW,cX;return g.defaultValue(cV,(cW=b5.tryHead(cU),cW==null?null:{$:1,$0:(cX=cW.$0,bk.processLayoutSteps(b5.skip(1,cU),cV.Add(cX[0],cX[1])))}));};bk.HtmlGuiCall=function(cU,cV,cW){return new bF({$:5,$0:cU,$1:cV,$2:cW});};bk.Do2=function(cU,cV,cW,cX,cY){return cU(cW,cV);};bk.Do=function(cU,cV,cW,cX){return cU(cV);};bk.navbar=function(cU,cV,cW){return bf.div([bf["class"]("navbar navbar-default"),bf.div([bf["class"]("container-fluid"),bf.div([bf["class"]("navbar-header"),bf.div([bf["class"]("navbar-brand"),cU])]),bf.div([bf["class"]("navbar-collapse collapse"),cV,bf.addClass("navbar-right",cW)])])]);};bk.dropdown=function(cU){return bk.entries(cU,"dropdown-menu");};bk.nav=function(cU){return bk.entries(cU,"nav navbar-nav");};bk.entries=function(cU,cV){return bf.addClass(cV,bf.ul(cU));};bk.entryTxt=function(cU,cV,cW){return bk.menuEntry(bk.refText(cU,cV,cW));};bk.refText=function(cU,cV,cW){return bf.bindHElem(function(cX){return cX===""?bj.HtmlEmpty:bk.refA(bf.htmlText(cX),cX,cW);},cU);};bk.refA=function(cU,cV,cW){return bf.a([cU,bf.hrefO(cW),bf.target(cV)]);};bk.menuEntry=function(cU){return bf.li([cU]);};bk.RaiseTabMoved=function(cU,cV){var cW;cW=bk.TabMoved();cW==null?void 0:cW.$0([cU,cV]);};bk.TabMoved=function(){bZ.$cctor();return bZ.TabMoved;};bk.set_TabMoved=function(cU){bZ.$cctor();bZ.TabMoved=cU;};bk.setSelectedPanel=function(cU,cV){bk.selectedPanels().Set(cV==null?bk.selectedPanels().Get().Remove(cU):bk.selectedPanels().Get().Add(cU,cV.$0));};bk.selectedPanels=function(){bZ.$cctor();return bZ.selectedPanels;};bk.uid2s=function(cU){return"X"+b7.Replace(a.String(cU),"-","");};bk.draggedTab=function(){bZ.$cctor();return bZ.draggedTab;};bk.reorderArray=function(cU,cV,cW){return ca.collect(a.id,cW<cV?[cz.array(cU,{$:1,$0:0},{$:1,$0:cW-1}),[ca.get(cU,cV)],cz.array(cU,{$:1,$0:cW},{$:1,$0:cV-1}),cz.array(cU,{$:1,$0:cV+1},{$:1,$0:ca.length(cU)-1})]:[cz.array(cU,{$:1,$0:0},{$:1,$0:cV-1}),cz.array(cU,{$:1,$0:cV+1},{$:1,$0:cW}),[ca.get(cU,cV)],cz.array(cU,{$:1,$0:cW+1},{$:1,$0:ca.length(cU)-1})]);};bk.reorderList=function(cU,cV,cW){return cW<cV?cj.append(cU.GetSlice({$:1,$0:0},{$:1,$0:cW-1}),cj.append(cj.ofArray([cU.get_Item(cV)]),cj.append(cU.GetSlice({$:1,$0:cW},{$:1,$0:cV-1}),cU.GetSlice({$:1,$0:cV+1},{$:1,$0:cU.get_Length()-1})))):cj.append(cU.GetSlice({$:1,$0:0},{$:1,$0:cV-1}),cj.append(cU.GetSlice({$:1,$0:cV+1},{$:1,$0:cW}),cj.append(cj.ofArray([cU.get_Item(cV)]),cU.GetSlice({$:1,$0:cW+1},{$:1,$0:cU.get_Length()-1}))));};bk.addResizeObserver=function(cU,cV){var cW,cX,cY,cZ;try{cW=!(!a.ResizeObserver);}catch(c0){cW=false;}if(cW){cX=new a.ResizeObserver(cU);bk.set_observers(new cj.T({$:1,$0:cX,$1:bk.observers()}));cX.observe(cV);}else{cY=bk.dimsChanged(cV);b4.Start((cZ=null,b4.Delay(function(){return b4.While(function(){return cV.isConnected;},b4.Delay(function(){return b4.Bind(b4.Sleep(110),function(){return cY()?(cU(),b4.Zero()):b4.Zero();});}));})),null);}};bk.dimsChanged=function(cU){var cV;cV=[cU.getBoundingClientRect()];return function(){var cW;cW=cU.getBoundingClientRect();return b6.Equals(bk.domRect2Tuple(cV[0]),bk.domRect2Tuple(cW))?false:(cV[0]=cW,true);};};bk.domRect2Tuple=function(cU){return[cU.top,cU.left,cU.width,cU.height];};bk.observers=function(){bZ.$cctor();return bZ.observers;};bk.set_observers=function(cU){bZ.$cctor();bZ.observers=cU;};bk.setLint=function(cU,cV){cU.setOption("lint",{async:1,getAnnotations:b9.CreateFuncWithArgs(cV),container:bf.findRootElement(cU.getWrapperElement())});};bk.showHints=function(cU,cV,cW,cX){bv.New(b9.CreateFuncWithArgs(cV),cW,bf.findRootElement(cU.getWrapperElement())).hint.async=1;cU.showHint(a.$v);};bk.cmPos=function(cU,cV){return bq.New(cU,cV);};bk.codeMirrorIncludes=function(){bZ.$cctor();return bZ.codeMirrorIncludes;};bk.hoverable=function(cU){return bn.get_New().Content(cU);};bL=bK.RunNode=b9.Class({createBaseNode:function(){var cU;cU=a.document.createElement("div");cU.setAttribute("id",this.nodeName);a.document.body.appendChild(cU);return cU;},createNode:function(){var cU;cU=a.document.createElement("div");cU.style="height: 100%; width: 100%;";return cU;},RunHtml:function(cU){this.RunDoc((bf.renderDoc())(cU));},RunDoc:function(cU){cB.Run(this.get_RunNode(),cU);},get_AddBootstrap:function(){var cU;cU=a.document.createElement("div");cU.innerHTML="<script src='http://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript' charset='UTF-8'></script>\n                <script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js' type='text/javascript' charset='UTF-8'></script>\n                <link type='text/css' rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>\n                <link type='text/css' rel='stylesheet' href='/EPFileX/css/main.css'>\n               ";this.runNode.parentElement.appendChild(cU);return this;},get_RunNode:function(){return this.runNode;}},i,bL);bL.New=b9.Ctor(function(cU,cV){bL.New$1.call(this,"TestNode",cU,cV);},bL);bL.New$1=b9.Ctor(function(cU,cV,cW){var cX,cY,cZ,c0,c1;this.nodeName=cU;cX=(cY=a.document.getElementById(this.nodeName),b6.Equals(cY,null)?this.createBaseNode():cY);this.runNode=!(cW==null||cW.$0)?cX:(cZ=cX.shadowRoot,b6.Equals(cZ,null)?(c0=this.createNode(),(cX.attachShadow({mode:"open"}).appendChild(c0),c1=this.createNode(),c0.appendChild(c1),c1)):cZ.firstChild);cV==null||cV.$0?this.runNode.innerHTML="":void 0;},bL);bK.completeJS=function(cU){return"\n          CIPHERSpaceLoadFileGlobalFileRef = null;\n          CIPHERSpaceLoadFile = function (filename, callback) {\n              if (filename.slice(-3) == \".js\" || filename.slice(-4) == \".fsx\" || filename.slice(-3) == \".fs\") { //if filename is a external JavaScript file\n                  var fileRef = null;\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement('script')\n                      fileRef.setAttribute(\"type\", \"text/javascript\")\n                      fileRef.setAttribute(\"src\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-4) == \".css\") { //if filename is an external CSS file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"stylesheet\")\n                      fileRef.setAttribute(\"type\", \"text/css\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-5) == \".html\") { //if filename is an external HTML file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"import\")\n                      fileRef.setAttribute(\"type\", \"text/html\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              if (!!fileRef) {\n                  CIPHERSpaceLoadFileGlobalFileRef = fileRef;\n      \u0009\u0009\u0009fileRef.onload = function () { fileRef.onload = null;  callback(); }\n                  document.getElementsByTagName(\"head\")[0].appendChild(fileRef);\n              }\n          }\n          CIPHERSpaceLoadFiles = function (files, callback) {\n              var newCallback = callback\n              if (!!CIPHERSpaceLoadFileGlobalFileRef && !!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n                  var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n                  CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n                  newCallback = function () {\n                      callback();\n                      oldCallback();\n                  }\n              }\n              var i = 0;\n              loadNext = function () {\n                  if (i < files.length) {\n                      var file = files[i];\n                      i++;\n                      CIPHERSpaceLoadFile(file, loadNext);\n                  }\n                  else newCallback();\n              };\n              loadNext();\n      \u0009}\n          CIPHERSpaceLoadFiles(['https://code.jquery.com/jquery-3.1.1.min.js'], function() {}); \n      \u0009CIPHERSpaceLoadFilesDoAfter = function (callback) {\n      \u0009\u0009var newCallback = callback\n      \u0009\u0009if (!!CIPHERSpaceLoadFileGlobalFileRef) {\n      \u0009\u0009\u0009if (!!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n      \u0009\u0009\u0009\u0009var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n      \u0009\u0009\u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n      \u0009\u0009\u0009\u0009newCallback = function () {\n      \u0009\u0009\u0009\u0009\u0009oldCallback();\n      \u0009\u0009\u0009\u0009\u0009callback();\n      \u0009\u0009\u0009\u0009}\n      \u0009\u0009\u0009}\n      \u0009\u0009}\n      \u0009\u0009else CIPHERSpaceLoadFileGlobalFileRef = {};\n      \u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = newCallback;\n      \u0009}\n      \n      CIPHERSpaceLoadFilesDoAfter(function() { \n        if (typeof IntelliFactory !=='undefined')\n          IntelliFactory.Runtime.Start();\n        for (key in window) { \n          if (key.startsWith(\"StartupCode$\")) \n            try { window[key].$cctor(); } catch (e) {} \n        } \n      })\n      \n                       "+cU;};bO.NewBrowser={$:3};bO.Tab={$:2};bO.Right={$:1};bO.Below={$:0};bP=bN.ErrCompiler=b9.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&!this.$1;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(function(cU){return function(cV){return cU(b_.toSafe(cV));};}(a.id))(this.$0):(function(cU){return function(cV){return cU(b2.p$5(cV));};}(a.id))(this);}},null,bP);bP["Could not open new browser, Popup blocker may be active"]=new bP({$:2});bP["Snippet Missing"]=new bP({$:1});bQ.New=function(cU,cV,cW,cX){return{F2:cU,LeftDoubleClick:cV,"Ctrl-Space":cW,".":cX};};bT=bN.Property=b9.Class({setV:function(cU){this.props.set_Item(this.key,cU);this.setDirty();},getV:function(){return this.props.get_Item(this.key);},setK:function(cU){this.props.Add(cU,this.props.get_Item(this.key));this.props.Remove(this.key);this.key=cU;this.setDirty();},getK:function(){return this.key;},Remove:function(){this.props.Remove(this.key);this.setDirty();},get_SetV:function(){var cU;cU=this;return function(cV){cU.setV(cV);};},get_GetV:function(){var cU;cU=this;return function(){return cU.getV();};},get_SetK:function(){var cU;cU=this;return function(cV){cU.setK(cV);};},get_GetK:function(){var cU;cU=this;return function(){return cU.getK();};},get_ValueVar:function(){return new bU.New(this);},get_KeyVar:function(){return this;},get_View:function(){return cA.Const(this.getK());},UpdateMaybe:function(cU){var cV;cV=cU(this.getK());cV==null?void 0:this.setK(cV.$0);},Update:function(cU){this.setK(cU(this.getK()));},Get:function(){return this.getK();},Set:function(cU){this.setK(cU);},SetFinal:function(cU){this.setK(cU);},get_Id:function(){return"?";}},bS,bT);bT.New=b9.Ctor(function(cU,cV,cW){bS.New.call(this);this.setDirty=cU;this.props=cV;this.key=cW;},bT);bU=bN.PropValue=b9.Class({get_View:function(){return cA.Const(this.get());},UpdateMaybe:function(cU){var cV;cV=cU(this.get());cV==null?void 0:this.set(cV.$0);},Update:function(cU){this.set(cU(this.get()));},Get:function(){return this.get();},Set:function(cU){this.set(cU);},SetFinal:function(cU){this.set(cU);},get_Id:function(){return"?";}},bS,bU);bU.New=b9.Ctor(function(cU){bS.New.call(this);this.get=cU.get_GetV();this.set=cU.get_SetV();},bU);bN["CodeSnippet.propValue"]=function(cU,cV){var cW,cX;return cU.properties.ContainsKey(cV)?{$:1,$0:cU.properties.get_Item(cV)}:(cW=(cX=cU.parent,cX==null?null:bV.FetchO(cX.$0)),cW==null?null:bN["CodeSnippet.propValue"](cW.$0,cV));};bV.FetchByPathO=function(cU){function cV(cX,cY){return b5.tryHead(b5.filter(function(cZ){return cZ.get_Name()===cY;},cX));}function cW(cX,cY){var cZ,c0,c1,c2;cZ=(c0=b5.tryHead(cY),c0==null?null:cV(cX,c0.$0));return b5.length(cY)<=1?cZ:cZ==null?null:(c1=cZ.$0,(c2=b5.tail(cY),cW(b5.filter(function(c3){return b6.Equals(c3.parent,{$:1,$0:c1.id});},(bN.codeSnippets())["var"].Get()),c2)));}return cW(b5.filter(function(cX){return cX.parent==null;},(bN.codeSnippets())["var"].Get()),cU);};bN["CodeSnippet.IsDescendantOf"]=function(cU,cV){function cW(cX){var cY,cZ,c0;cY=cX.parent;return cY!=null&&cY.$==1&&(cZ=cY.$0,b6.Equals(cZ,cV)||g.defaultValue(false,(c0=bV.FetchO(cZ),c0==null?null:{$:1,$0:cW(c0.$0)})));}return cW(cU);};bN["CodeSnippet.GetCodeFsx"]=function(cU,cV){return(bN["CodeSnippet.GetCodeAndStarts"](cU,cV))[0];};bN["CodeSnippet.GetCodeAndStarts"]=function(cU,cV){return x.CodeAndStarts(cV,bN["CodeSnippet.Predecessors"](cU));};bN["CodeSnippet.Predecessors"]=function(cU,cV){var cW;cW=ca.ofSeq(cU.UniquePredecessors(bV.FetchO));return ca.ofSeq(b5.map(bN["CodeSnippet.get_PrepareSnippet"],b5.filter(function(cX){return ca.contains(cX.id,cW);},(bN.codeSnippets())["var"].Get())));};bN["CodeSnippet.get_PrepareSnippet"]=function(cU,cV){var cW;cW=bN["CodeSnippet.get_Levels"](cU);return x.New(cU.name,b7.Replace(b7.Replace(cU.content,"##"+"FSHARPSTATION_ID"+"##",bN.fsIds()),"##"+"FSHARPSTATION_ENDPOINT"+"##",a.location.href),cU.parent,cU.predecessors,cU.id,cU.expanded,cW[0],cW[1],cU.properties);};bN["CodeSnippet.get_Levels"]=function(cU,cV){function cW(cX,cY){return function(cZ){var c0,c1,c2;return g.defaultValue([cX,cY],(c0=(c1=cZ.parent,c1==null?null:bV.FetchO(c1.$0)),(c2=cW(cX+1,cY+(cZ.properties.ContainsKey("NoIndent")?0:1)),c0==null?null:{$:1,$0:c2(c0.$0)})));};}return(function(cX){return cW(cX[0],cX[1]);}([0,0]))(cU);};bV.New=function(cU,cV,cW,cX,cY,cZ){var c0,c1,c2,c3,c4;c0=x.New(cV,cZ,cW,cX,w.get_New(),true,0,0,new cf.New$5());c1=bN.codeSnippets().get_Length();c1===0?bN.codeSnippets().Append(c0):cU===0?(c2=b5.append([c0],(bN.codeSnippets())["var"].Get()),bN.codeSnippets().Set(c2)):cU<c1?(c3=(c4=ca.splitAt(cU,ca.ofSeq((bN.codeSnippets())["var"].Get())),c4[0].concat([c0].concat(c4[1]))),bN.codeSnippets().Set(c3)):bN.codeSnippets().Append(c0);return c0;};bV.New$1=function(cU,cV,cW,cX,cY){return bV.New(bN.codeSnippets().get_Length(),cU,cV,cW,cX,cY);};bV.New$2=function(cU){return bV.New$1("",null,cj.T.Empty,cj.T.Empty,cU);};bV.New$3=function(cU,cV){return bV.New$1("",{$:1,$0:cU},cj.T.Empty,cj.T.Empty,cV);};bV.New$4=function(cU,cV,cW){return bV.New$1("",{$:1,$0:cU},cV,cj.T.Empty,cW);};bV.New$5=function(cU,cV){return bV.New$1("",null,cU,cj.T.Empty,cV);};bV.FetchL=function(cU){return ck.toList(bV.FetchO(cU));};bV.FetchO=function(cU){return bN.codeSnippets().TryFindByKey(cU);};bV.PickIO=function(cU){function cV(cW,cX){return b6.Equals(cX.id,cU);}return bN.tryPickI(function(cW){return cV(cW[0],cW[1]);},(bN.codeSnippets())["var"].Get());};bN.tryPickI=function(cU,cV){return b5.tryHead(b5.filter(cU,b5.indexed(cV)));};bN.fsIds=function(){bZ.$cctor();return bZ.fsIds;};bN.codeSnippets=function(){bZ.$cctor();return bZ.codeSnippets;};bX=bW.Babel=b9.Class({},i,bX);bX.New=b9.Ctor(function(){},bX);bY=bW.Fable=b9.Class({},i,bY);bY.New=b9.Ctor(function(){},bY);bW.fableTranslate=function(cU){var cV;cV=p.wrapper();return cV.Run(cV.Delay(function(){var cW;bW.loadReferences().f();return cV.Bind$2((cW=null,b4.Delay(function(){return b4.While(function(){return cK.getOwnPropertyNames(a.metadata).length<ca.length(bW.references());},b4.Delay(function(){return b4.Bind(b4.Sleep(200),function(){return b4.Return(null);});}));})),function(){var cX,cY,cZ,c0,c1;cX=bW.getChecker().f();cY=cL.makeCompiler([["Microsoft.FSharp.Core.ExtraTopLevelOperators.PrintFormatLine","FSSGlobal.FSharpStation.FableModule.ToConsole($0)"]]);cZ="stdin.fsx";c0=cl.parse(cL.convertToJson(cL.compileAst(cY,cL.parseFSharpProject(cX,cY,cZ,cU),cZ)));c1=cK.create(null);c1.plugins=[a.babelPlugins.transformMacroExpressions,a.babelPlugins.removeUnneededNulls,"transform-es2015-modules-amd"];c1.presets=[];c1.filename=cZ;c1.babelrc=false;return cV.Return(b7.Replace(b7.Replace(cM.transformFromAst(c0,null,c1).code,"define([","require(["),"\"use strict\";","\"use strict\"; try { exports = exports || {}; } catch (err) {}"));});}));};bW.ToConsole=function(cU){cb.log(cU);return cU.cont(bW.addOutMsg());};bW.addOutMsg=function(){bZ.$cctor();return bZ.addOutMsg;};bW.set_addOutMsg=function(cU){bZ.$cctor();bZ.addOutMsg=cU;};bW.getChecker=function(){bZ.$cctor();return bZ.getChecker;};bW.loadReferences=function(){bZ.$cctor();return bZ.loadReferences;};bW.references=function(){bZ.$cctor();return bZ.references;};bM.FSharpStationClient$6328$173=a.id;bM.FSharpStationClient$6327$173=a.id;bM.FSharpStationClient$6017$68=function(cU,cV,cW){return function(){return function(){cU.Add("","1");cV();return cW.Set(null);};};};bM.FSharpStationClient$6014$68=function(cU,cV){return function(){return function(){cU.Remove();return cV.Set(null);};};};bM.FSharpStationClient$5865$44=b9.Curried3(function(cU,cV,cW){return cU();});bM.FSharpStationClient$5859$39=function(cU,cV){return function(){return function(){return cU(cV.editorO.$0);};};};bM.FSharpStationClient$5569$61=b9.Curried3(function(cU,cV,cW){cV.value="";});bM.FSharpStationClient$5568$61=b9.Curried3(function(cU,cV,cW){return cU(cV);});bM.FSharpStationClient$5450$48=b9.Curried3(function(cU,cV,cW){cU[0]=cV.scrollTop;});bM.FSharpStationClient$5427$57=function(cU,cV,cW){return function(){return function(){return bg.iter(cU(cV),cW);};};};bM.FSharpStationClient$5423$58=function(cU,cV){return function(){return function(){return cV.Set(cU.id);};};};bM.FSharpStationClient$5415$57=function(cU,cV,cW){return function(){return function(){return cU?cV(cW):null;};};};bM.FSharpStationClient$5411$50=function(cU,cV,cW){return function(){return function(cX){cX.preventDefault();return(cU(cV.id))(cW[0]);};};};bM.FSharpStationClient$5410$50=function(cU,cV){return function(){return function(){cU[0]=cV.id;};};};bM.FSharpStationClient$5409$50=b9.Curried3(function(cU,cV,cW){return cW.preventDefault();});bM.FSharpStationClient=function(cU){var cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS;function eT(gM,gN,gO,gP){return gN(gP)==null?bS.Lens(cV,function(){return gM;},function(){return"";}):gO(gP);}function eU(){cZ.Set(null);}function eV(gM){function gN(gP){return gP.get_Name();}function gO(gP,gQ){return x.New(gQ,gP.content,gP.parent,gP.predecessors,gP.id,gP.expanded,gP.level,gP.levelCode,gP.properties);}return eT("",function(gP){return bN.codeSnippets().TryFindByKey(gP);},function(gP){return bN.codeSnippets().LensInto(gN,gO,gP);},gM);}function eW(gM){function gN(gP){return gP.content;}function gO(gP,gQ){return x.New(gP.name,gQ,gP.parent,gP.predecessors,gP.id,gP.expanded,gP.level,gP.levelCode,gP.properties);}return eT("",function(gP){return bN.codeSnippets().TryFindByKey(gP);},function(gP){return bN.codeSnippets().LensInto(gN,gO,gP);},gM);}function eX(gM){var gN;gN=bN["CodeSnippet.propValue"](gM,"CSS");return gN==null?null:{$:1,$0:a.id(gN.$0)};}function eY(gM){return g.defaultValue("",gM);}function eZ(gM){var gN;gN=bN["CodeSnippet.propValue"](gM,"CSSLink");return gN==null?null:{$:1,$0:a.id(gN.$0)};}function e0(gM){return g.defaultValue("",gM);}function e1(gM){var gN;gN=bN["CodeSnippet.propValue"](gM,"Mode");return gN==null?null:{$:1,$0:a.id(gN.$0)};}function e2(gM){return g.defaultValue("fsharp",gM);}function e3(gM){var gN;gN=bN["CodeSnippet.propValue"](gM,"Theme");return gN==null?null:{$:1,$0:a.id(gN.$0)};}function e4(gM){return g.defaultValue("",gM);}function e5(gM){var gN;gN=bN["CodeSnippet.propValue"](gM,"Layout");return gN==null?null:{$:1,$0:a.id(gN.$0)};}function e6(gM){return g.defaultValue("",gM);}function e7(gM){var gN;gN=bN["CodeSnippet.propValue"](gM,"LayoutJS");return gN==null?null:{$:1,$0:a.id(gN.$0)};}function e8(gM){return g.defaultValue("",gM);}function e9(gM){var gN,gO,gP,gQ;function gR(gT){var gU;gU=bN["CodeSnippet.propValue"](gT,gM);return gU==null?null:{$:1,$0:a.id(gU.$0)};}function gS(gT){return g.defaultValue("",gT);}gN=bg.map((gO=(gP=function(gT){return gT==null?null:gR(gT.$0);},function(gT){return gP(bV.FetchO(gT));}),function(gT){return gS(gO(gT));}),cW);gQ=[bS.Create$1(null)];cA.Sink(function(gT){if(!b6.Equals(gQ[0].Get(),gT))gQ[0].Set(gT);},bg.toView(gN));return new bg({$:1,$0:gQ[0]});}function e_(gM,gN){return gN===""?gM:gN!=="0";}function e$(){dH=false;dI.Set(true);}function fa(){dB=null;e$();}function fb(){fa();dC.ClearCache();eU();}function fc(){dC.ClearCache();dI.Set(false);dB=null;}function fd(gM,gN){var gO,gP,gQ;return!gN?null:(gO=(gP=gM.Get(),(gQ=a.String(gN),gP===null?gQ:gP===""?gQ:gQ===null?gP:gQ===""?gP:gP+"\n"+gQ)),gO!==gM.Get()?gM.Set(gO):null);}function fe(gM){dG.Set(gM);}function ff(gM){fd(dG,gM);}function fg(gM){fd(dF,gM);}function fh(){var gM;gM=bV.FetchO(cW.Get());gM==null?void 0:dD.Set(bN["CodeSnippet.GetCodeFsx"](gM.$0,true));}function fi(gM,gN){var gO,gP,gQ,gR,gS,gT,gU,gV;function gW(gX){function gY(gZ,g0){return b6.Equals(g0.id,gX);}return function(gZ){return bN.tryPickI(function(g0){return gY(g0[0],g0[1]);},gZ);};}gO=ca.partition(function(gX){return b6.Equals(gX.id,gN)||bN["CodeSnippet.IsDescendantOf"](gX,gN);},ca.ofSeq((bN.codeSnippets())["var"].Get()));gP=gO[1];gQ=gO[0];gR=(gW(gN))(gQ);gS=(gW(gM))(gP);gR!=null&&gR.$==1?gS!=null&&gS.$==1?(gT=gS.$0[0],gU=gS.$0[1],gV=ca.collect(a.id,[cz.array(gP,{$:1,$0:0},{$:1,$0:gT-1}),gQ,cz.array(gP,{$:1,$0:gT},null)]),bN.codeSnippets().Set(gV),bN.codeSnippets().UpdateBy(function(gX){return{$:1,$0:x.New(gX.name,gX.content,gU.parent,gX.predecessors,gX.id,gX.expanded,gX.level,gX.levelCode,gX.properties)};},gR.$0[1].id)):void 0:void 0;return fb();}function fj(){var gM,gN,gO,gP;gM=bV.PickIO(cW.Get());gM==null?void 0:(gN=gM.$0,gO=gN[0],gP=gN[1],function(gQ,gR){var gS;while(true){if(gR<0)return null;else if(gQ((gS=(bN.codeSnippets())["var"].Get(),(function(gT){return function(gU){return b5.nth(gT,gU);};}(gR))(gS))))return null;else gR=gR-1;}}(function(gQ){return b6.Equals(gQ.parent,gP.parent)&&(bN.codeSnippets().UpdateBy(function(gR){return{$:1,$0:x.New(gR.name,gR.content,{$:1,$0:gQ.id},gR.predecessors,gR.id,gR.expanded,gR.level,gR.levelCode,gR.properties)};},gP.id),true);},gO-1),fb());}function fk(){var gM,gN,gO,gP,gQ;gM=bV.FetchO(cW.Get());gM==null?void 0:(gN=gM.$0,gO=(gP=(gQ=gN.parent,gQ==null?null:bV.FetchO(gQ.$0)),gP==null?null:gP.$0.parent),bN.codeSnippets().UpdateBy(function(gR){return{$:1,$0:x.New(gR.name,gR.content,gO,gR.predecessors,gR.id,gR.expanded,gR.level,gR.levelCode,gR.properties)};},gN.id),fb());}function fl(gM){var gN;gN=p.wrapper();return gN.Run(gN.Delay(function(){return gN.Bind$1(m.fromOption(bP["Snippet Missing"],gM),function(gO){var gP;dG.Set("Compiling to JavaScript...");dE.Set("");gP=bN["CodeSnippet.GetCodeFsx"](gO,true);dD.Set(gP);return gN.Bind$2(be.translateAR(gP,false),function(gQ){return gN.Bind$1(gQ,function(gR){var gS;gS=bK.completeJS(gR);dE.Set(gS);ff("Compiled!");return gN.Return(gS);});});});}));}function fm(gM){var gN;gN=a.open.apply(a,[gM]);return b6.Equals(gN,null)?m.fail(bP["Could not open new browser, Popup blocker may be active"]):m.succeed(gN);}function fn(gM,gN){try{return gM["eval"].apply(gM,[gN]);}catch(gO){((function(gP){return function(gQ){return gP(b_.prettyPrint(gQ));};}(function(gP){cb.log(gP);}))(gO));return(function(gP){return function(gQ){return gP(b_.prettyPrint(gQ));};}(a.id))(gO);}}function fo(gM){try{gM.focus.apply(gM,[]);}catch(gN){((function(gO){return function(gP){return gO(b_.prettyPrint(gP));};}(function(gO){cb.log(gO);}))(gN));}}function fp(gM,gN){var gO;gO=p.wrapper();return gO.Run(gO.Delay(function(){return gO.Bind$1(m.tryProtection(),function(){return gO.Bind$1(fm(gM),function(gP){fo(gP);return gO.Bind$2(b4.Sleep(800),function(){return gO.Return(fn(gP,gN));});});});}));}function fq(){return b4.FromContinuations(function(gM,gN){var gO;try{gO=bf.createIFrame(gM);return(new bL.New(null,null)).RunHtml(gO);}catch(gP){return gN(gP);}});}function fr(gM){var gN;gN=p.wrapper();return gN.Run(gN.Delay(function(){return gN.Bind$1(m.tryProtection(),function(){return gN.Bind$2(fq(),function(gO){var gP;gP=gO.contentWindow;gP.document.body.style.margin="0px";return gN.Return(fn(gP,gM));});});}));}function fs(gM,gN,gO){var gP;gP=p.wrapper();return gP.Run(gP.Delay(function(){return gP.Bind$3(fl(gO),function(gQ){dG.Set("Running JavaScript...");return gP.Bind$3(gN.$==3?fp(gM,gQ):fr(gQ),function(gR){ff(gR);ff("Done!");return gP.Return([gN,gR]);});});}));}function ft(){return bV.FetchO(cW.Get());}function fu(gM){var gN;gN=p.wrapper();return gN.Run(gN.Delay(function(){dD.Set(gM);return gN.Bind$2(bc.evaluateAR(bN.fsIds(),a.location.href,true,gM),function(gO){return gN.Bind$1(gO,function(){return gN.Return("");});});}));}function fv(gM){var gN;gN=p.wrapper();return gN.Run(gN.Delay(function(){return gN.Bind$1(m.fromOption(bP["Snippet Missing"],gM),function(gO){return gN.Bind$3(fu(bN["CodeSnippet.GetCodeFsx"](gO,true)),function(gP){return gN.Bind$2((new cy.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.addPresence:-1250306105",[(function(gQ){return function(gR){return gQ(b2.p$6(gR));};}(a.id))(gO.id),"ok"]),function(){return gN.Return(gP);});});});}));}function fw(gM,gN,gO){var gP;gP=p.wrapper();return gP.Run(gP.Delay(function(){dG.Set(gM);return gP.Bind$3(gO(),function(gQ){ff(gQ);ff(gN);return gP.Return(gQ);});}));}function fx(gM){return fw("Evaluating F# code...","",function(){return fv(gM);});}function fy(gM){return fw("Evaluating F# code...","",function(){return fu(gM);});}function fz(gM){var gN;gN=p.wrapper();return gN.Run(gN.Delay(function(){dD.Set(gM);return gN.Bind$3(bW.fableTranslate(gM),function(gO){dE.Set(gO);a["eval"](gO);return gN.Return("");});}));}function fA(gM){var gN;gN=p.wrapper();return gN.Run(gN.Delay(function(){return gN.Bind$1(m.fromOption(bP["Snippet Missing"],gM),function(gO){return gN.ReturnFrom(fz(bN["CodeSnippet.GetCodeFsx"](gO,false)));});}));}function fB(gM){return fw("Running Fable...","Done!",function(){return fA(gM);});}function fC(gM){return fw("Running Fable...","Done!",function(){return fz(gM);});}function fD(gM){var gN;gN=ft();return(dK(gM))(gN);}function fE(gM,gN){return g.defaultValue(false,gN==null?null:{$:1,$0:cj.contains(gM,gN.$0.predecessors)});}function fF(gM,gN){return gN.Contains(gM);}function fG(gM,gN){var gO,gP,gQ,gR;return gN==null?null:(gO=gN.$0,b6.Equals(gO,gM)||fF(gO.id,new cN.New$2(gM.UniquePredecessors(bV.FetchO)))?null:(gP=(cj.contains(gM.id,gO.predecessors)?(gQ=(gR=gM.id,function(gS){return!b6.Equals(gR,gS);}),function(gS){return cj.filter(gQ,gS);}):function(gS){return new cj.T({$:1,$0:gM.id,$1:gS});})(gO.predecessors),(bN.codeSnippets().UpdateBy(function(gS){return{$:1,$0:x.New(gS.name,gS.content,gS.parent,gP,gS.id,gS.expanded,gS.level,gS.levelCode,gS.properties)};},gO.id),fb())));}function fH(gM){bN.codeSnippets().UpdateBy(function(gN){return{$:1,$0:x.New(gN.name,gN.content,gN.parent,gN.predecessors,gN.id,!gN.expanded,gN.level,gN.levelCode,gN.properties)};},gM.id);eU();}function fI(gM,gN,gO){var gP,gQ,gR,gS;function gT(gZ,g0){return g0.preventDefault();}function gU(gZ,g0){dJ[0]=gO.id;}function gV(gZ,g0){g0.preventDefault();return fi(gO.id,dJ[0]);}function gW(gZ,g0){return gM?fH(gO):null;}function gX(gZ,g0){return cW.Set(gO.id);}function gY(gZ,g0){return bg.iter(function(g1){return fG(gO,g1);},c0);}return bn.get_New().Content$1([bf["class"]("code-editor-list-tile"),bf.classIf("selected",bg.map((gP=gO.id,function(gZ){return b6.Equals(gP,gZ);}),cW)),bf.classIf("direct-predecessor",bg.map((gQ=gO.id,function(gZ){return fE(gQ,gZ);}),c0)),bf.classIf("indirect-predecessor",bg.map((gR=gO.id,function(gZ){return fF(gR,gZ);}),dM)),bf.draggable("true"),new bj({$:8,$0:cE.HandlerImpl("dragover",function(gZ){return function(g0){return gT(gZ,g0);};})}),new bj({$:8,$0:cE.HandlerImpl("drag",function(gZ){return function(g0){return gU(gZ,g0);};})}),new bj({$:8,$0:cE.HandlerImpl("drop",function(gZ){return function(g0){return gV(gZ,g0);};})}),bf.span([bf["class"]("node"),bf.classIf("parent",gM),bf.classIf("expanded",gN),new bj({$:8,$0:cE.HandlerImpl("click",function(gZ){return function(g0){return gW(gZ,g0);};})}),bf.title(gM?gN?"collapse":"expand":""),bf.htmlText(gM?gN?"-":"+":"")]),bf.div([bf["class"]("code-editor-list-text"),bf.style1("text-indent",(gS=(bN["CodeSnippet.get_Levels"](gO))[0],(function(gZ){return function(g0){return gZ(a.String(g0)+"em");};}(a.id))(gS))),bf.style("white-space: pre"),bf.htmlText(bg.map2(function(gZ){return function(g0){return v.snippetName(gZ,g0);};},eV(gO.id),eW(gO.id))),new bj({$:8,$0:cE.HandlerImpl("click",function(gZ){return function(g0){return gX(gZ,g0);};})})]),bf.span([bf["class"]("predecessor"),bf.title("toggle predecessor"),new bj({$:8,$0:cE.HandlerImpl("click",function(gZ){return function(g0){return gY(gZ,g0);};})}),bf.htmlText("X")])]);}function fJ(gM,gN){return!gN?gM:gN;}function fK(gM){return new w({$:0,$0:!gM?"00000000-0000-0000-0000-000000000000":gM.Item});}function fL(gM){return!gM?null:{$:1,$0:fK(gM)};}function fM(gM){var gN;function gO(gQ,gR){gN.Add(gQ,gR);}function gP(gQ,gR){return[gQ,gR];}gN=new cf.New$5();return!gM?gN:(b5.iter(function(gQ){return gO(gQ[0],gQ[1]);},ca.map(function(gQ){return gP(gQ[0],gQ[1]);},cP.GetFields(gM))),gN);}function fN(gM){var gN;try{gN=cl.parse(gM);((function(gO){return function(gP){return gO(b_.prettyPrint(gP));};}(function(gO){cb.log(gO);}))(gN.length));return ca.choose(function(gO){return!gO?null:{$:1,$0:x.New(fJ("",gO.name),fJ("",gO.content),fL(gO.parent),cj.ofSeq(ca.map(fK,fJ([],gO.predecessors))),fK(gO.id),fJ(false,gO.expanded),fJ(0,gO.level),fJ(0,gO.levelCode),fM(gO.properties))};},gN);}catch(gO){return[];}}function fO(){var gM,gN,gO,gP;function gQ(gR,gS){var gT;return g.defaultValue(gS,(gT=b5.tryItem(gS,(bN.codeSnippets())["var"].Get()),gT==null?null:{$:1,$0:(bN["CodeSnippet.get_Levels"](gT.$0))[0]<=gR?gS:gQ(gR,gS+1)}));}cW.Set(g.defaultWith(function(){return bV.New$2("");},(gM=bV.PickIO(cW.Get()),gM==null?null:{$:1,$0:(gN=gM.$0,(gO=gN[0],(gP=gN[1],bV.New(gQ((bN["CodeSnippet.get_Levels"](gP))[0],gO+1),"",gP.parent,cj.T.Empty,cj.T.Empty,""))))})).id);fa();eU();}function fP(){var gM,gN;gM=bV.FetchO(cW.Get());gM==null?void 0:(gN=gM.$0,a.confirm((function(gO){return function(gP){return gO("Do you want to delete "+b_.toSafe(gP)+"?");};}(a.id))(gN.get_Name()))?(cW.Set(w.get_New()),bN.codeSnippets().Remove(gN),fa(),eU()):void 0);}function fQ(gM){return b5.last(b7.SplitChars(gM,["/","\\"],0));}function fR(gM,gN){var gO,gP;gO=gM.files;return gO.length>0?(gP=new a.FileReader(),(gP.onload=function(gQ){return gN(gQ.target.result);},gP.readAsText(gO.item(0)))):null;}function fS(gM){var gN;try{gN=fN(gM);bN.codeSnippets().Set(gN);fc();eU();}catch(gO){a.alert(a.String(gO));}}function fT(gM){if(!dI.Get()||a.confirm("Changes have not been saved, do you really want to load?"))fR(bf.findRootElement(gM).querySelector("#"+dP),fS);}function fU(){var gM,gN,gO,gP;gM=(gN=ca.ofSeq((bN.codeSnippets())["var"].Get()),cl.stringify(((co.EncodeArray(b1.j$7))())(gN)));gO=(gP=fQ(dO.Get()),gP===""?"snippets.fsjson":gP);a.saveAs(new a.Blob([gM],{type:"text/plain;charset=utf-8"}),gO);fc();}function fV(gM,gN){return fT(gM);}function fW(gM,gN){gM.value="";}function fX(gM,gN){return bf.findRootElement(gM).querySelector("#"+dP).click();}function fY(){return dU==="a"?"b":"a";}function fZ(gM){return gM+dT;}function f0(gM,gN,gO){var gP,gQ,gR,gS,gT,gU,gV,gW,gX,gY;gP=dB!=null&&dB.$==1&&((gR=dB.$0[0],(gS=dB.$0[1],b6.Equals(gR,gN.id)&&b6.Equals(gS,gO)))&&(gQ=[dB.$0[1],dB.$0[0],dB.$0[2]],true))?(gM("Reparsing..."),[gQ[2],bN["CodeSnippet.get_PrepareSnippet"](gN)]):(gM("Parsing..."),gT=bN["CodeSnippet.Predecessors"](gN),gU=ca.length(gT)===1?null:{$:1,$0:x.ReducedCode(gO,cz.array(gT,{$:1,$0:0},{$:1,$0:ca.length(gT)-2}))},gV=ca.get(gT,ca.length(gT)-1),dB={$:1,$0:[gV.id,gO,gU]},[gU,gV]);gW=x.ReducedCode(gO,[gP[1]]);gX=g.defaultValue(gW,(gY=gP[0],gY==null?null:{$:1,$0:(function(gZ){var g0,g1,g2,g3,g4,g5;g0=gZ[0];g1=gZ[1];g2=gZ[2];g3=gZ[3];g4=gZ[4];g5=gZ[5];return function(g6){return x.AddSeps(g0,g1,g2,g3,g4,g5,g6[0],g6[1],g6[2],g6[3],g6[4],g6[5]);};}(gY.$0))(gW)}));return x.FinishCode(gO,gX[0],gX[1],gX[2],gX[3],gX[4],gX[5]);}function f1(gM){var gN;function gO(gP){if(!gM)dF.Set(gP);}gN=null;return b4.Delay(function(){var gP,gQ;gP=bV.FetchO(cW.Get());return gP!=null&&gP.$==1?(gQ=gP.$0,b4.TryFinally(b4.Delay(function(){var gR,gS;gR=f0(gO,gQ,false);gS=fY();((function(gT){return function(gU){return gT("Parsing "+b_.toSafe(gU));};}(function(gT){cb.log(gT);}))(gS));dH=false;return b4.Bind(dS.Parse$1(fZ(gS),gR[0],gR[1]),function(gT){((function(gU){return function(gV){return gU("Parse result= "+b_.prettyPrint(gV));};}(function(gU){cb.log(gU);}))(gT!==""));dU=gS;return b4.Combine(!gM?(fg(gT),fg("Parsed!"),b4.Zero()):b4.Zero(),b4.Delay(function(){dH=true;return b4.Zero();}));});}),function(){dX=false;})):b4.Zero();});}function f2(gM){var gN;gN=null;return b4.Delay(function(){return!dH?b4.Return(true):b4.Bind(dS.MustParse(fZ(dU),gM.get_NameSanitized()),function(gO){return b4.Return(gO);});});}function f3(gM){var gN;gN=null;return b4.Delay(function(){return b4.Bind(dV,function(gO){var gP;return gO?b4.Zero():(gP=bV.FetchO(cW.Get()),gP!=null&&gP.$==1?b4.Bind(f2(gP.$0),function(gQ){return gQ?b4.Bind(f1(gM),function(){return b4.Return(null);}):b4.Zero();}):b4.Zero());});});}function f4(gM,gN){var gO,gP;gO=c.REGEX("([a-zA-Z_]\\w*)$","g",b7.Substring(gM,0,gN));return gO!=null&&gO.$==1?(gP=gO.$0,gP&&ca.length(gP)===1)?ca.get(gO.$0,0):"":"";}function f5(gM,gN){var gO,gP;gO=c.REGEX("^([a-zA-Z_]\\w*)","g",gM.substring(gN));return gO!=null&&gO.$==1?(gP=gO.$0,gP&&ca.length(gP)===1)?ca.get(gO.$0,0):"":"";}function f6(gM){var gN;b4.Start((gN=null,b4.Delay(function(){return b4.Bind(dV,function(gO){var gP,gQ;return gO?b4.Zero():(gP=bV.FetchO(cW.Get()),gP!=null&&gP.$==1?(gQ=gP.$0,b4.Bind(f3(false),function(){var gR,gS,gT,gU,gV;gR=gM.getCursor();gS=gM.getLine(gR.line);gT=b7.length(f4(gS,gR.ch));gU=b7.length(f5(gS,gR.ch));gV=gT===0&&gU===0?2:gU;return b4.Bind(dS.ToolTip(fZ(dU),gR.line+1,gR.ch+1,gQ.get_NameSanitized()),function(gW){var gX;fg(((((gX=(b9.Curried(function(gY,gZ,g0,g1,g2){return gY("InfoFSharp \""+b_.toSafe(gZ)+" "+("("+b_.prettyPrint(g0[0])+", "+b_.prettyPrint(g0[1])+")")+" - "+("("+b_.prettyPrint(g1[0])+", "+b_.prettyPrint(g1[1])+")")+" "+b_.toSafe(g2)+" \"");},5))(a.id),function(gY){var gZ;gZ=gX(gY);return function(g0){var g1;g1=gZ([g0[0],g0[1]]);return function(g2){return g1([g2[0],g2[1]]);};};})(gQ.get_NameSanitized()))([gR.line+1,gR.ch-gT+1]))([gR.line+1,gR.ch+gV+1]))(b7.Replace(gW,"\"","''")));return b4.Zero();});})):b4.Zero());});})),null);}function f7(gM,gN,gO,gP){var gQ;b4.Start((gQ=null,b4.Delay(function(){var gR,gS;gR=bV.FetchO(cW.Get());return gR!=null&&gR.$==1?(gS=gR.$0,(function(gT){return gT("calling parseIfMustThen");}(function(gT){cb.log(gT);}),b4.Bind(f3(false),function(){var gT;function gU(gV,gW,gX,gY,gZ,g0,g1,g2,g3){var g4;return b7.StartsWith(gV,gS.id.get_Text())||gV===v.sanitize(gS.name)?(g4=a.Number(gW)>0?a.Number(gW):0,{$:1,$0:bw.New(g3,b7.StartsWith(g1.toUpperCase(),"ERR")?"error":b7.StartsWith(g1.toUpperCase(),"INFO")?"info":"warning",bk.cmPos(gX-1,gY-1-g4),bk.cmPos(gZ-1,g0-1-g4))}):null;}gN(ca.choose(function(gV){return gU(gV[0],gV[1],gV[2],gV[3],gV[4],gV[5],gV[6],gV[7],gV[8]);},ca.choose(function(gV){var gW,gX,gY,gZ,g0,g1,g2,g3;return(gX=c.REGEX(dZ,"",gV),gX!=null&&gX.$==1&&((gY=gX.$0,gY&&ca.length(gY)===13)&&(gW=[ca.get(gX.$0,8),ca.get(gX.$0,5),ca.get(gX.$0,7),ca.get(gX.$0,2),ca.get(gX.$0,4),ca.get(gX.$0,11),ca.get(gX.$0,1),ca.get(gX.$0,10),ca.get(gX.$0,9)],true)))?{$:1,$0:[gW[1],gW[4],a.Number(gW[2]),a.Number(gW[0]),a.Number(gW[8]),a.Number(gW[7]),gW[6],gW[3],gW[5]]}:(g0=c.REGEX(dY,"",gV),g0!=null&&g0.$==1&&((g1=g0.$0,g1&&ca.length(g1)===8)&&(gZ=[ca.get(g0.$0,4),ca.get(g0.$0,2),ca.get(g0.$0,3),ca.get(g0.$0,1),ca.get(g0.$0,6),ca.get(g0.$0,5)],true)))?(g2=gZ[0],(g3=gZ[2],{$:1,$0:[gZ[1],gZ[3],a.Number(g3),a.Number(g2)-1,a.Number(g3),a.Number(g2),gZ[5],"fsi",gZ[4]]})):null;},(gT=c.REGEX(d0,"g",dF.Get()),gT!=null&&gT.$==1?gT.$0:[]))));return b4.Zero();}))):b4.Zero();})),null);}function f8(gM){f7.apply(null,gM);}function f9(gM){return gM==="C"?"class":gM==="Cn"?"Constant":gM==="D"?"delegate":gM==="E"?"enum":gM==="P"?"property":gM==="e"?"event":gM==="X"?"exception":gM==="F"?"field":gM==="I"?"interface":gM==="M"?"function":gM==="N"?"module":gM==="S"?"struct":gM==="T"?"type":gM==="V"?"Variable":gM;}function f_(gM,gN,gO){var gP;d1((gP=null,b4.Delay(function(){return b4.Bind(dV,function(gQ){var gR,gS,gT,gU;return gQ?b4.Zero():(gR=bV.FetchO(cW.Get()),gR!=null&&gR.$==1?(gS=gM.getCursor(),(gT=gM.getLine(gS.line),(gU=f4(gT,gS.ch),b4.Bind(dS.Complete(fZ(dU),gT+"a",gS.line+1,gS.ch+1,gR.$0.get_NameSanitized()),function(gV){function gW(gX,gY,gZ,g0){return bt.New(gY,(((b9.Curried3(function(g1,g2,g3){return g1(b7.PadRight(b_.toSafe(g2),40)+" "+b7.PadLeft(b_.toSafe(g3),20));}))(a.id))(gX))(f9(g0)),gZ);}gN(bu.New(ca.map(function(gX){return gW(gX[0],gX[1],gX[2],gX[3]);},gV),bq.New(gS.line,gS.ch-gU.length),gS));return b4.Zero();})))):b4.Zero());});})));}function f$(gM){var gN,gO,gP;gN=(gO=gM.parent,gO==null?null:bV.FetchO(gO.$0));gN==null?void 0:(gP=gN.$0,f$(gP),!gP.expanded?fH(gP):void 0);}function ga(gM,gN,gO){var gP;return b4.Start((gP=null,b4.Delay(function(){var gQ;cW.Set(gM);gQ=bV.FetchO(gM);gQ==null?void 0:f$(gQ.$0);return b4.Bind(b4.Sleep(200),function(){var gR,gS;gR=d2.editorO;gR==null?void 0:(gS=gR.$0,gS.setCursor(gN-1,gO-1),gS.focus());return b4.Zero();});})),null);}function gb(gM){var gN,gO,gP,gQ,gR;gN=c.REGEX("([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}).+?\\((\\d+)\\,\\s*(\\d+)\\)","",gM);gN!=null&&gN.$==1?(gO=gN.$0,gO&&ca.length(gO)===4)?(gP=ca.get(gN.$0,3),gQ=ca.get(gN.$0,1),gR=ca.get(gN.$0,2),ga(new w({$:0,$0:gQ}),a.Number(gR),a.Number(gP))):void 0:void 0;}function gc(){var gM;b4.Start((gM=null,b4.Delay(function(){var gN,gO,gP,gQ,gR;gN=bV.FetchO(cW.Get());gO=d2.editorO;return(gO!=null&&gO.$==1?gN!=null&&gN.$==1?(gP=[gN.$0,gO.$0],false):true:true)?b4.Zero():(gQ=gP[1],(gR=gQ.getCursor(),(gQ.getLine(gR.line),b4.Bind(dS.FindDecl(fZ(dU),gR.line+1,gR.ch+1,gP[0].get_NameSanitized()),function(gS){var gT;return gS.$==9?(gT=gS.$0,(gb(((((((b9.Curried(function(gU,gV,gW,gX,gY,gZ){return gU(b_.toSafe(gV)+" ("+a.String(gW)+", "+a.String(gX)+") - ("+a.String(gY)+", "+a.String(gZ)+")");},6))(a.id))(gT.File))(gT.Line))(gT.Column))(gT.Line))(gT.Column)),b4.Zero())):gS.$==1?(a.alert((function(gU){return function(gV){return gU(b3.p(gV));};}(a.id))(gS.$0)),b4.Zero()):(a.alert((function(gU){return function(gV){return gU(b2.p$7(gV));};}(a.id))(gS)),b4.Zero());}))));})),null);}function gd(){var gM;gM=d2.editorO;gM==null?void 0:gM.$0.refresh();}function ge(gM){var gN;b4.Start((gN=null,b4.Delay(function(){return b4.Bind(b4.Sleep(gM),function(){gd();return b4.Zero();});})),null);}function gf(gM,gN){return f6(d2.editorO.$0);}function gg(gM,gN){return gc();}function gh(){dI.Set(true);}function gi(gM,gN){return new bT.New(gh,gM,gN);}function gj(gM,gN,gO){return gi(gM,gN).get_ValueVar().Set(gO);}function gk(gM,gN){return bf.table(cj.ofSeq(b5.delay(function(){return b5.append([bf.thead([bf.th([bf.htmlText("Property"),bf.style("padding-right:10px")]),bf.th([bf.htmlText("Value")])])],b5.delay(function(){return b5.append(b5.map(function(gO){var gP;function gQ(gR,gS){gP.Remove();return d9.Set(null);}gP=gi(gN,gO);return bf.tr([bf.td([bf.someElt(cB.Input([],gP.get_KeyVar()))]),bf.td([bf.someElt(cB.InputArea([bf.atr("style","height: 1.5em")],gP.get_ValueVar()))]),bk.hoverable(bf.td([bf.title("remove"),bf.style(" cursor: pointer "),bf.htmlText("x"),new bj({$:8,$0:cE.HandlerImpl("click",function(gR){return function(gS){return gQ(gR,gS);};})})]))]);},b5.sort(gN.get_Keys())),b5.delay(function(){function gO(gP,gQ){gN.Add("","1");gh();return d9.Set(null);}return[bf.tr([bk.hoverable(bf.td([bf.htmlText("Add..."),new bj({$:8,$0:cE.HandlerImpl("click",function(gP){return function(gQ){return gO(gP,gQ);};})})])),bf.td([bf.htmlText("")])])];}));}));})));}function gl(gM){function gN(gP){return gP.properties;}function gO(gP,gQ){return x.New(gP.name,gP.content,gP.parent,gP.predecessors,gP.id,gP.expanded,gP.level,gP.levelCode,gQ);}return eT(new cf.New$5(),function(gP){return bN.codeSnippets().TryFindByKey(gP);},function(gP){return bN.codeSnippets().LensInto(gN,gO,gP);},gM);}function gm(gM){return new bg({$:1,$0:gM});}function gn(gM,gN,gO,gP){var gQ;return p.start(ff,(gQ=gM(gN),(p.map(a.ignore))(gQ)));}function go(gM,gN,gO,gP){function gQ(gR,gS){if(gR==null)ff("Failed!\n"+gS);else if(gR.$0[0].$==0){ff(gS);d$.Set(null);}else ff(gS);}return p.startV(function(gR){return gQ(gR[0],gR[1]);},gM(gN));}function gp(gM,gN,gO){function gP(gQ){return(gM(gO))(gQ);}return b9.Curried(gn,2,[gP,gN]);}function gq(gM,gN,gO){function gP(gQ){return(gM(gO))(gQ);}return b9.Curried(go,2,[gP,gN]);}function gr(gM){var gN,gO,gP;gN=gM.parms;return gN!=null&&gN.$==1&&((gP=gN.$0,gP&&ca.length(gP)===1)&&(gO=ca.get(gN.$0,0),true))?bV.FetchByPathO(b7.SplitChars(gO,["/"],0)):ft();}function gs(gM,gN){var gO;gO=p.wrap();return gO.Run(gO.Delay(function(){return gO.Bind$2(bg.getAsync(gM.text),function(gP){var gQ,gR,gS,gT,gU,gV,gW,gX,gY,g0,g1,g2,g3,g4;function gZ(g5){return g0==null?null:bN["CodeSnippet.propValue"](g0.$0,g5);}fe(gP+"...");g0=ft();g1=gN?g.defaultValue("",(gR=gZ("open"),gR==null?null:{$:1,$0:c.__(function(g5,g6){return g5+g6;},"\n",gR.$0)})):"";g2=cQ.Create(function(){return g.defaultValue("${parm}() |> printfn \"%A\"",gZ("action-template"));});g3=(gX=gM.parms,gX==null?null:{$:1,$0:ca.map(a.id,gX.$0)});switch(g3!=null&&g3.$==1?(g4=g3.$0,g4&&ca.length(g4)===2?ca.get(g3.$0,0)==="Code"?(gY=ca.get(g3.$0,1),0):ca.get(g3.$0,0)==="Property"?(gY=ca.get(g3.$0,1),1):2:2):2){case 0:gW={$:1,$0:gY};break;case 1:gW=gZ(gY);break;case 2:gW=null;break;}gV=gW==null?gZ(gP):gW;gS=(gT=g.defaultWith(function(){return((cK.constructor("return function(parm) { return `"+g2.f()+"`}"))())(gP);},gV),b7.StartsWith(gT,"////")?gT:g1+gT);return g0!=null&&g0.$==1?gO.Bind$2((new cy.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.getPresence:-1568677081",[bd.extractConfig(gS),(function(g5){return function(g6){return g5(b2.p$6(g6));};}(a.id))(g0.$0.id)]),function(g5){return b6.Equals(g5,{$:1,$0:"ok"})?gO.Return(gS):gO.Bind$3(fv(g0),function(){return gO.Return(gS);});}):gO.Return(gS);});}));}function gt(gM,gN){return p.bind(fy,gs(gM,true));}function gu(gM,gN){return p.bind(fC,gs(gM,false));}function gv(gM,gN){return fx(gr(gM));}function gw(gM,gN){return fB(gr(gM));}function gx(gM,gN){var gO;gO=gr(gM);return(dK(gN))(gO);}function gy(gM,gN){var gO;gO=p.wrapper();return gO.Run(gO.Delay(function(){return gO.Bind$1(m.tryProtection(),function(){var gP,gQ,gR,gS,gT;return gO.Bind$1((gP=gM.parms,gP!=null&&gP.$==1&&((gR=gP.$0,gR&&ca.length(gR)===3)&&(gQ=[ca.get(gP.$0,1),ca.get(gP.$0,0),ca.get(gP.$0,2)],true))?(gS=gQ[1],(g.defaultWith(function(){((function(gU){return function(gV){return gU("setSnippetProp snippet not found: "+b_.toSafe(gV));};}(function(gU){cb.log(gU);}))(gS));},(gT=bV.FetchByPathO(b7.SplitChars(gS,["/"],0)),gT==null?null:{$:1,$0:gj(gT.$0.properties,gQ[0],gQ[2])})),m.succeed())):m.failSimpleError((function(gU){return function(gV){return gU("setSnippetProp wrong parms: "+b2.p$8(gV));};}(a.id))(gM.parms))),function(){return gO.Return();});});}));}function gz(gM,gN){var gO,gP,gQ,gR,gS,gT;((function(gU){return function(gV){return gU("showOutText: "+b3.p$22(gV));};}(function(gU){cb.log(gU);}))(gM));gP=gM.parms;switch(gP!=null&&gP.$==1?(gQ=gP.$0,gQ&&ca.length(gQ)===1?(gO=ca.get(gP.$0,0),0):(gR=gP.$0,gR&&ca.length(gR)===2?(ca.get(gP.$0,1),ca.get(gP.$0,0)===""?(gO=[ca.get(gP.$0,0),ca.get(gP.$0,1)],1):2):2)):2){case 0:return fe(gO);break;case 1:return fe(gO[1]);break;case 2:return gP!=null&&gP.$==1&&((gT=gP.$0,gT&&ca.length(gT)===2)&&(ca.get(gP.$0,1),ca.get(gP.$0,0)==="+"&&(gS=[ca.get(gP.$0,0),ca.get(gP.$0,1)],true)))?ff(gS[1]):(function(gU){return function(gV){return gU("error: showOutText "+b3.p$22(gV));};}(function(gU){cb.log(gU);}))(gM);break;}}function gA(){return fD(c1.Get());}function gB(){var gM;gM=p.wrapper();return gM.Run(gM.Delay(function(){dB=null;return gM.Bind$2(f1(false),function(){return gM.Return();});}));}function gC(gM,gN){var gO,gP;function gQ(gR,gS,gT){return gP>=gS&&gP<gT?{$:1,$0:gR}:null;}gO=gM.value;gP=gM.selectionStart;return gb(b5.pick(function(gR){return gQ(gR[0],gR[1],gR[2]);},(b5.mapFold(function(gR,gS){return[[gS,gR,gR+gS.length+1],gR+gS.length+1];},0,b7.SplitChars(gO,["\n"],0)))[0]));}function gD(gM,gN){var gO;return b4.Start((gO=null,b4.Delay(function(){return b4.Bind(b4.Sleep(100),function(){gM.scrollTop=gM.scrollHeight;return b4.Zero();});})),null);}function gE(gM,gN,gO){var gP;gP=m.result();return gP.Run(gP.Delay(function(){return gP.Bind(m.tryProtection(),function(){return gP.Bind(eN.GetGuiCallAction(gM,gN,gO),function(gQ){var gR;gR=gQ.onClick;gR==null?void 0:((gR.$0(gQ))(null))(null);return gP.Zero();});});}));}function gF(gM){ge(1000);ge(2000);ge(3000);eN.SetLayoutJson(eH,gM);}function gG(gM){ge(1000);ge(2000);ge(3000);eN.AddNewSteps(eH,gM);}function gH(gM){return ca.ofSeq(b5.map(function(gN){return[gN.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gN.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gM));}function gI(gM){var gN;return{$:4,$0:(gN=gM.$0,gN==null?null:{$:1,$0:gN.$0[1]}),$1:ca.ofSeq(b5.map(function(gO){return[gO.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gO.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gM.$1))};}function gJ(gM){var gN,gO;return{$:4,$0:(gN=function(gP){return function(gQ){return gP(b_.prettyPrint(gQ));};}(a.id),(gO=gM.$0,gO==null?null:{$:1,$0:gN(gO.$0)})),$1:ca.ofSeq(b5.map(function(gP){return[gP.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gP.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gM.$1))};}function gK(gM,gN){var gO;gO=null;return b4.Delay(function(){var gP,gQ,gR,gS,gT,gU,gV,gW,gX;return gN.$==2?b4.Return({$:1,$0:(gP=bV.FetchO(gN.$0),gP==null?null:{$:1,$0:gP.$0.content})}):gN.$==3?b4.Return({$:1,$0:(gQ=bV.FetchO(gN.$0),gQ==null?null:{$:1,$0:bN["CodeSnippet.GetCodeFsx"](gQ.$0,true)})}):gN.$==4?b4.Return({$:3,$0:g.defaultValue([],(gR=bV.FetchO(gN.$0),gR==null?null:{$:1,$0:bN["CodeSnippet.Predecessors"](gR.$0)}))}):gN.$==5?b4.Return({$:2,$0:bV.FetchO(gN.$0)}):gN.$==6?b4.Return({$:1,$0:(gS=bV.FetchByPathO(gN.$0),gS==null?null:{$:1,$0:gS.$0.content})}):gN.$==7?b4.Return({$:1,$0:(gT=bV.FetchByPathO(gN.$0),gT==null?null:{$:1,$0:bN["CodeSnippet.GetCodeFsx"](gT.$0,true)})}):gN.$==10?(gU=bV.FetchByPathO(gN.$0),gU==null?b4.Return({$:4,$0:null,$1:[["Snippet not found",z.FSError]]}):b4.Bind(be.translateAR(bN["CodeSnippet.GetCodeFsx"](gU.$0,true),false),function(gY){return b4.Return({$:4,$0:m.getOption(m.map(bK.completeJS,gY)),$1:gH(m.getMsgs(gY))});})):gN.$==8?b4.Return({$:3,$0:g.defaultValue([],(gV=bV.FetchByPathO(gN.$0),gV==null?null:{$:1,$0:bN["CodeSnippet.Predecessors"](gV.$0)}))}):gN.$==9?b4.Return({$:2,$0:bV.FetchByPathO(gN.$0)}):gN.$==1?b4.Return({$:1,$0:{$:1,$0:"Message received: "+gN.$0}}):gN.$==0?b4.Return({$:0,$0:bN.fsIds()}):gN.$==12?d.map(gI,p.getAsyncR(fs(gN.$1,bO.NewBrowser,bV.FetchO(gN.$0)))):gN.$==13?d.map(gI,p.getAsyncR(fs(gN.$1,bO.NewBrowser,bV.FetchByPathO(gN.$0)))):gN.$==14?(gW=gN.$0,b4.Return(gJ(m.map(function(){return(function(gY){return function(gZ){return gY("success: "+b_.toSafe(gZ));};}(a.id))(gW);},gE(gW,gN.$1,gN.$2))))):b4.Return({$:1,$0:{$:1,$0:(gX=ca.ofSeq((bN.codeSnippets())["var"].Get()),cl.stringify(((co.EncodeArray(b1.j$7))())(gX)))}});});}function gL(gM){!cj.contains(gM,eR.Get())?eR.Set(new cj.T({$:1,$0:gM,$1:eR.Get()})):void 0;ge(300);}cV=bS.Create$1("");cW=bS.Create$1(w.get_New());cX="CodeEditor."+"currentCodeSnippetId";cY=a.localStorage.getItem(cX);cY!==null?cW.Set((b0.j$7())(cl.parse(cY))):void 0;bg.sink(function(gM){a.localStorage.setItem(cX,cl.stringify((b1.j$5())(gM)));},cW);cZ=bS.Create$1();c0=bg.map2(function(gM){return function(){return bN.codeSnippets().TryFindByKey(gM);};},cW,cZ);c1=bS.Create$1(bO.Below);c2="CodeEditor."+"position";c3=a.localStorage.getItem(c2);c3!==null?c1.Set((b0.j$8())(cl.parse(c3))):void 0;bg.sink(function(gM){a.localStorage.setItem(c2,cl.stringify((b1.j$6())(gM)));},c1);bg.map(function(gM){return gM.$==1;},c1);c4=bg.map(function(gM){return b6.Equals(bV.FetchO(gM),null);},cW);c5=(c6=bg.map((c7=(c8=function(gM){return gM==null?null:eX(gM.$0);},function(gM){return c8(bV.FetchO(gM));}),function(gM){return eY(c7(gM));}),cW),(c9=[bS.Create$1(null)],(cA.Sink(function(gM){if(!b6.Equals(c9[0].Get(),gM))c9[0].Set(gM);},bg.toView(c6)),new bg({$:1,$0:c9[0]}))));c_=(c$=bg.map((da=(db=function(gM){return gM==null?null:eZ(gM.$0);},function(gM){return db(bV.FetchO(gM));}),function(gM){return e0(da(gM));}),cW),(dc=[bS.Create$1(null)],(cA.Sink(function(gM){if(!b6.Equals(dc[0].Get(),gM))dc[0].Set(gM);},bg.toView(c$)),new bg({$:1,$0:dc[0]}))));dd=(de=bg.map((df=(dg=function(gM){return gM==null?null:e1(gM.$0);},function(gM){return dg(bV.FetchO(gM));}),function(gM){return e2(df(gM));}),cW),(dh=[bS.Create$1(null)],(cA.Sink(function(gM){if(!b6.Equals(dh[0].Get(),gM))dh[0].Set(gM);},bg.toView(de)),new bg({$:1,$0:dh[0]}))));di=(dj=bg.map((dk=(dl=function(gM){return gM==null?null:e3(gM.$0);},function(gM){return dl(bV.FetchO(gM));}),function(gM){return e4(dk(gM));}),cW),(dm=[bS.Create$1(null)],(cA.Sink(function(gM){if(!b6.Equals(dm[0].Get(),gM))dm[0].Set(gM);},bg.toView(dj)),new bg({$:1,$0:dm[0]}))));dn=(_do=bg.map((dp=(dq=function(gM){return gM==null?null:e5(gM.$0);},function(gM){return dq(bV.FetchO(gM));}),function(gM){return e6(dp(gM));}),cW),(dr=[bS.Create$1(null)],(cA.Sink(function(gM){if(!b6.Equals(dr[0].Get(),gM))dr[0].Set(gM);},bg.toView(_do)),new bg({$:1,$0:dr[0]}))));ds=(dt=bg.map((du=(dv=function(gM){return gM==null?null:e7(gM.$0);},function(gM){return dv(bV.FetchO(gM));}),function(gM){return e8(du(gM));}),cW),(dw=[bS.Create$1(null)],(cA.Sink(function(gM){if(!b6.Equals(dw[0].Get(),gM))dw[0].Set(gM);},bg.toView(dt)),new bg({$:1,$0:dw[0]}))));dx=bg.map(function(gM){return gM!=="0"&&gM!=="";},e9("DisableParse"));dy=bg.map2(function(gM){return function(gN){return e_(gM,gN);};},dx,e9("DisableFSI"));dz=bg.map2(function(gM){return function(gN){return e_(gM,gN);};},dx,e9("DisableFable"));dA=bg.map2(function(gM){return function(gN){return e_(gM,gN);};},dx,e9("DisableWebSharper"));dB=null;dC=new t.New(function(gM){var gN;gN=gM==null?null:{$:1,$0:new cN.New$2(gM.$0.UniquePredecessors(bV.FetchO))};return g.defaultValue(new cN.New$3(),gN);});dD=bS.Create$1("");dE=bS.Create$1("");dF=bS.Create$1("");dG=bS.Create$1("");dH=false;dI=bS.Create$1(false);bg.sink(function(gM){a.onbeforeunload=gM?function(gN){gN.returnValue="Changes you made may not be saved.";}:null;},dI);dJ=[w.get_New()];bW.set_addOutMsg(ff);dK=(dL=a.location.origin+"/Main.html",(b9.Curried3(fs))(dL));dM=bg.map(function(gM){var gN,gO;gN=null;return dC.cache.TryGetValue(gM,{get:function(){return gN;},set:function(gP){gN=gP;}})?gN:(gO=dC.f(gM),(dC.cache.set_Item(gM,gO),gO));},c0);dN=[0];dO=bS.Create$1("");bg.map(function(gM){return gM==="";},dO);dP="CodeEditorFileSel";dQ=bm.New$3(bS.Lens(dO,fQ,a.id)).Prefix$1(bf.label([bf["class"]("btn btn-primary"),bf.htmlText("Load File..."),bm.New$3(dO).Type("file").Style("display: none").Content([cE.HandlerImpl("change",function(gM){return function(gN){return fV(gM,gN);};}),cE.HandlerImpl("click",function(gM){return function(gN){return fW(gM,gN);};})]).Id(dP).get_Render()]));cU!==""?b4.Start((dR=null,b4.Delay(function(){return b4.Bind(b4.Sleep(3000),function(){var gM;((function(gN){return function(gO){return gN("loading "+b_.toSafe(gO)+"...");};}(function(gN){cb.log(gN);}))(cU));gM=cR.getJSON(cU+"?t="+a.String(cS.now()));gM.done(function(){return fS(gM.responseText);});return b4.Zero();});})),null):void 0;dS=new bb.New("FSharpStation",{$:1,$0:a.location.href});dT=bN.fsIds()+".fsx";dU="a";dV=cA.GetAsync(bg.toView(dx));dW=1;dX=false;dY="\\((\\d+)\\) F# (.+).fsx\\((\\d+)\\,(\\d+)\\): (error|warning) ((.|\\b)+)";dZ="(Err|Warning|Info)(FSharp|WebSharper)\\s+\"(\\((\\d+)\\) ?)?F?#? ?(.+?)(.fsx)? \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\) ((.|\\s)+?)"+"\"";d0=dY+"|"+dZ;d1=c.asyncStartCancelling();d2=bs.New$3((d3=bg.toView(bg.fixit(cW)),(d4=bS.Create$1(null),(d5=[null],(d6=[0],(d7=[0],(cA.Sink(function(){var gM,gN;gM=d5[0];gM==null?void 0:(gN=gM.$0,d6[0]>d7[0]?d7[0]=d6[0]:!b6.Equals(gN.Get(),d4.Get())?(d7[0]=d7[0]+1,gN.Set(d4.Get())):void 0);},d4.get_View()),cA.Sink(function(){var gM,gN;gM=d5[0];gM==null?void 0:(gN=gM.$0,d7[0]>d6[0]?d6[0]=d7[0]:!b6.Equals(gN.Get(),d4.Get())?(d6[0]=d6[0]+10,d4.Set(gN.Get())):void 0);},cA.Bind(function(gM){var gN;gN=eW(gM);d5[0]={$:1,$0:gN};d7[0]=d6[0]+100;d4.Set(gN.Get());return gN.get_View();},d3)),d4))))))).OnChange(function(){var gM;dB!=null&&dB.$==1&&(b6.Equals(dB.$0[0],cW.Get())&&(gM=[dB.$0[0],dB.$0[2]],true))?e$():fa();}).OnRender(function(gM){var gN;function gO(gR){return f_(gR[0],gR[1],gR[2]);}function gP(gR){gM.replaceSelection(".","end");}function gQ(gR){return f_(gR[0],gR[1],gR[2]);}gM.addKeyMap(bQ.New(f6,f6,function(gR){bk.showHints(gM,gO,false,gR);},(gN=function(){bk.showHints(gM,gQ,false,void 0);},function(gR){return gN(gP(gR));})));bk.setLint(gM,f8);bg.sink(function(gR){var gS;b4.Start((gS=null,b4.Delay(function(){gM.setOption("theme",gR);return b4.Bind(b4.Sleep(50),function(){gM.refresh();return b4.Zero();});})),null);},di);bg.sink(function(gR){gM.setOption("mode",gR);},dd);}).Style("height: 100%");d8=d2.get_Render().AddChildren([new bj({$:8,$0:cE.HandlerImpl("dblclick",function(gM){return function(gN){return gf(gM,gN);};})}),bf.htmlElement("menu",[bf.type("context"),bf.Id("right-menu"),bf.htmlElement("menuitem",[bf.htmlAttribute("label","Goto Definition"),new bj({$:8,$0:cE.HandlerImpl("click",function(gM){return function(gN){return gg(gM,gN);};})})])]),bf.htmlAttribute("contextmenu","right-menu")]);bg.sink(function(){var gM;b4.Start((gM=null,b4.Delay(function(){var gN,gO;return!dH?b4.Zero():(gN=d2.editorO,gN!=null&&gN.$==1?(gO=bV.FetchO(cW.Get()),gO!=null&&gO.$==1?(gN.$0.performLint(),b4.Zero()):b4.Zero()):b4.Zero());})),null);},dF);d9=bS.Create$1();d_=bf.div([new bj({$:2,$0:bg.map2(function(gM){return function(gN){return gk(gM,gN);};},d9,bg.bind(function(gM){return gm(gl(gM));},cW))}),bf.css(" td.hovering { background: gray; } ")]);d$=bS.Create$1();ea=bE.New$1("Load...").OnClick(function(gM){return function(gN){return fX(gM,gN);};});eb=bE.New$1("Save as...").OnClick(b9.Curried(bk.Do,2,[fU,null])).Highlight(dI);ec=bE.New$1("Add Snippet").OnClick(b9.Curried(bk.Do,2,[fO,null]));ed=bE.New$1("Delete Snippet").OnClick(b9.Curried(bk.Do,2,[fP,null])).Disabled(c4);ee=bE.New$1("Indent In  >>").OnClick(b9.Curried(bk.Do,2,[fj,null])).Disabled(c4);ef=bE.New$1("Indent Out <<").OnClick(b9.Curried(bk.Do,2,[fk,null])).Disabled(c4);eg=bE.New$1("Get F# Code").OnClick(b9.Curried(bk.Do,2,[fh,null])).Disabled(dx);eh=bE.New$1("actSetSnippetProp").OnClick2(function(gM){return gp(function(gN){return function(gO){return gy(gN,gO);};},null,gM);}).Disabled(dy);ei=bE.New$1("Run FSI on Code").OnClick2(function(gM){return gp(function(gN){return function(gO){return gt(gN,gO);};},null,gM);}).Disabled(dy);ej=bE.New$1("Run FSI").OnClick2(function(gM){return gp(function(gN){return function(gO){return gv(gN,gO);};},null,gM);}).Disabled(dy);ek=bE.New$1("Run Fable on Code").OnClick2(function(gM){return gp(function(gN){return function(gO){return gu(gN,gO);};},null,gM);}).Disabled(dz);el=bE.New$1("Run Fable").OnClick2(function(gM){return gp(function(gN){return function(gO){return gw(gN,gO);};},null,gM);}).Disabled(dz);em=bE.New$1("Run WebSharper in new tab").OnClick2((en=bO.NewBrowser,function(gM){return gp(function(gN){return function(gO){return gx(gN,gO);};},en,gM);})).Disabled(dA);eo=bE.New$1("Run WebSharper in WS Result").OnClick2((ep=bO.Below,function(gM){return gq(function(gN){return function(gO){return gx(gN,gO);};},ep,gM);})).Disabled(dA);eq=bE.New$1("Run WebSharper in ...").OnClick(b9.Curried(go,2,[gA,null])).Disabled(dA);er=bE.New$1("Parse F#").OnClick(b9.Curried(gn,2,[gB,null])).Disabled(dx);es=bE.New$1("Compile WebSharper").OnClick((et=function(gM){return fl(ft(gM));},b9.Curried(gn,2,[et,null]))).Disabled(dA);eu=bE.New$1("Find Definition").OnClick(b9.Curried(bk.Do,2,[gc,null])).Disabled(dx);ev=bE.New$1("Refresh CodeMirror").OnClick(b9.Curried(bk.Do,2,[gd,null]));ew=bE.New$1("Show Output text").OnClick2(b9.Curried(bk.Do2,3,[gz,null]));ex=bE.New$1("Abort FSI").OnClick(b9.Curried(bk.Do,2,[function(){bc.abortFsiExe();},null]));ey=bf.div([ec.get_Button().get_Render(),ef.get_Button().get_Render(),ee.get_Button().get_Render(),dQ.get_Render().AddChildren([bf.style("grid-column: 4/6")]),ej.get_Button().get_Render(),el.get_Button().get_Render(),eq.get_Button().get_Render(),ed.get_Button().get_Render(),eu.get_Button().get_Render(),bf.span([]),eb.get_Button().get_Render(),bf.span([]),eg.get_Button().get_Render(),er.get_Button().get_Render(),bf.someElt(cB.Select([cE.Create("id","Position")],function(gM){return gM.$==1?"Right":gM.$==2?"In Tab":gM.$==3?"New Browser":"Below";},cj.ofArray([bO.NewBrowser,bO.Below]),c1)),bf.style("\n                    overflow: hidden;\n                    display: grid;\n                    grid-template-columns: repeat(8, 12.1%);\n                    bxackground-color: #eee;\n                    padding : 5px;\n                    grid-gap: 5px;\n                ")]);ez=bD.New2([bB.New$2("File").SubMenu([ea.get_MenuEntry(),eb.get_MenuEntry()]),bB.New$2("Code").SubMenu([ec.get_MenuEntry(),ed.get_MenuEntry(),bB.New$2("").get_Divider(),ee.get_MenuEntry(),ef.get_MenuEntry(),bB.New$2("").get_Divider(),eu.get_MenuEntry(),bB.New$2("").get_Divider(),eg.get_MenuEntry(),bB.New$2("").get_Divider(),ev.get_MenuEntry()]),bB.New$2("Run").SubMenu([ej.get_MenuEntry(),ex.get_MenuEntry(),bB.New$2("").get_Divider(),el.get_MenuEntry(),bB.New$2("").get_Divider(),em.get_MenuEntry(),eo.get_MenuEntry(),bB.New$2("").get_Divider(),er.get_MenuEntry(),es.get_MenuEntry()])]);eA=bD.New2([bB.New$2("About").SubMenu([bB.New$1("Source @ GitHub","https://github.com/amieres/FSharpStation").Target("_blank")])]);eB=bk.navbar(bf.h1([bf.htmlText("F# Station"),bf.style("font-size: 48px; margin-top: -17px")]),ez.get_Render(),eA.get_Render());eC="CodeEditor."+"splitterV1";eD=bx.New$1(20).Children([bf.style("grid-row: 2 / 4")]).get_Var();eE=a.localStorage.getItem(eC);eE!==null?eD.Set(((co.Id())())(cl.parse(eE))):void 0;bg.sink(function(gM){a.localStorage.setItem(eC,cl.stringify(((co.Id())())(gM)));},eD);eF=bf.bindHElem(function(gM){return bf.div(cj.ofSeq(b5.delay(function(){return b5.append([bf.style("overflow: auto")],b5.delay(function(){var gN;return b5.append(b5.choose(a.id,(gN=b5.indexed(gM),b5.mapFold(function(gO,gP){var gQ,gR,gS,gT,gU;gQ=gP[1];return g.defaultValue(true,(gR=gQ.parent,gR==null?null:{$:1,$0:gO.Contains(gR.$0)}))?(gS=g.defaultValue(false,(gT=b5.tryItem(gP[0]+1,bN.codeSnippets()),gT==null?null:{$:1,$0:b6.Equals(gT.$0.parent,{$:1,$0:gQ.id})})),(gU=gS&&gQ.expanded,[{$:1,$0:fI(gS,gU,gQ)},gU?gO.Add(gQ.id):gO])):[null,gO];},new cH.New(cj.T.Empty),gN))[0]),b5.delay(function(){function gO(gP,gQ){dN[0]=gP.scrollTop;}return b5.append([new bj({$:8,$0:cE.HandlerImpl("scroll",function(gP){return function(gQ){return gO(gP,gQ);};})})],b5.delay(function(){return[new bj({$:8,$0:cD.OnAfterRender(function(gP){gP.scrollTop=dN[0];})})];}));}));}));})));},(eG=bN.codeSnippets().v,cA.SnapshotOn((bN.codeSnippets())["var"].Get(),cZ.get_View(),eG)));eH=bJ.AddGuids([["actLoadFile",new bF({$:2,$0:ea})],["actSaveFile",new bF({$:2,$0:eb})],["actAddSnippet",new bF({$:2,$0:ec})],["actDeleteSnippet",new bF({$:2,$0:ed})],["actIndentSnippet",new bF({$:2,$0:ee})],["actOutdentSnippet",new bF({$:2,$0:ef})],["actGetFsCode",new bF({$:2,$0:eg})],["actSetSnippetProp",new bF({$:2,$0:eh})],["actEvalFsCode",new bF({$:2,$0:ei})],["actEvalCode",new bF({$:2,$0:ej})],["actRunFableFs",new bF({$:2,$0:ek})],["actRunFable",new bF({$:2,$0:el})],["actRunWSNewTab",new bF({$:2,$0:em})],["actRunWSHere",new bF({$:2,$0:eo})],["actRunWSIn",new bF({$:2,$0:eq})],["actParseCode",new bF({$:2,$0:er})],["actCompileWS",new bF({$:2,$0:es})],["actFindDefinition",new bF({$:2,$0:eu})],["actOutText",new bF({$:2,$0:ew})],["Output",new bF({$:1,$0:bp.New$3(dG).Placeholder("Output:").Title("Output").RenderWith(cj.ofArray([new bj({$:8,$0:cE.HandlerImpl("dblclick",function(gM){return function(gN){return gC(gM,gN);};})}),new bj({$:8,$0:cD.OnAfterRender(function(gM){bg.sink(function(gN){return gD(gM,gN);},dG);})})]))})],["Parser",new bF({$:1,$0:bp.New$3(dF).Placeholder("Parser messages:").Title("Parser").RenderWith(cj.ofArray([new bj({$:8,$0:cE.HandlerImpl("dblclick",function(gM){return function(gN){return gC(gM,gN);};})})]))})],["JavaScript",new bF({$:1,$0:bp.New$3(dE).Placeholder("Javascript:").Title("JavaScript code generated").get_Render()})],["F# code",new bF({$:1,$0:bp.New$3(dD).Placeholder("F# code:").Title("F# code assembled").get_Render()})],["Properties",new bF({$:1,$0:d_})],["WS Result",new bF({$:1,$0:bf.div([bf.div([bf.Id("TestNode"),bf.style("background: white; height: 100%; width: 100%; ")])])})],["title",new bF({$:1,$0:bm.New$3((eI=bg.toView(bg.fixit(cW)),(eJ=bS.Create$1(null),(eK=[null],(eL=[0],(eM=[0],(cA.Sink(function(){var gM,gN;gM=eK[0];gM==null?void 0:(gN=gM.$0,eL[0]>eM[0]?eM[0]=eL[0]:!b6.Equals(gN.Get(),eJ.Get())?(eM[0]=eM[0]+1,gN.Set(eJ.Get())):void 0);},eJ.get_View()),cA.Sink(function(){var gM,gN;gM=eK[0];gM==null?void 0:(gN=gM.$0,eM[0]>eL[0]?eL[0]=eM[0]:!b6.Equals(gN.Get(),eJ.Get())?(eL[0]=eL[0]+10,eJ.Set(gN.Get())):void 0);},cA.Bind(function(gM){var gN;gN=eV(gM);eK[0]={$:1,$0:gN};eM[0]=eL[0]+100;eJ.Set(gN.Get());return gN.get_View();},eI)),eJ))))))).Prefix$1(bf.htmlText("name:")).get_Render()})],["code",new bF({$:1,$0:d8})],["snippets",new bF({$:1,$0:eF})],["buttons",new bF({$:1,$0:ey})],["menu",new bF({$:1,$0:eB})],["messagesR",new bF({$:4,$0:true,$1:["Properties"]})],["messagesB1",new bF({$:4,$0:true,$1:["Output","JavaScript","F# code"]})],["messagesB2",new bF({$:4,$0:true,$1:["Parser","WS Result"]})],["messagesB",bk.varVerSplitter(55,"messagesB1","messagesB2",0,100)],["title_code",bk.fixedHorSplitter(true,34,"title","code")],["code_props",bk.varVerSplitter(85,"title_code","messagesR",25,100)],["code_buttons",bk.fixedHorSplitter(false,80,"code_props","buttons")],["snippets_code",bk.varVerSplitter(15,"snippets","code_buttons",5,95)],["main_messages",bk.varHorSplitter(82,"snippets_code","messagesB",35,100)],["extrabuttons",new bF({$:1,$0:bf.div([])})],["main_extra",bk.varVerSplitter(100,"main_messages","extrabuttons",20,100)],["main",bk.fixedHorSplitter(true,50,"menu","main_extra")]]);eN=bJ.New$1(eH);a.addLayoutJson=gF;bg.sink(gF,dn);bg.sink(function(gM){if(gM==="")gG([]);else fn(a,gM);},ds);a.doFSharpStationGuiCall=function(gM){var gN,gO;gN=m.Success(gE.apply(null,gM));gN.$==1?((gO=(b9.Curried3(function(gP,gQ,gR){return gP("Error doGuiCall "+b_.printArray(b_.prettyPrint,gQ)+": "+("("+b_.prettyPrint(gR[0])+", "+b_.prettyPrint(gR[1])+", "+b_.printArray(b_.prettyPrint,gR[2])+")"));}))(function(gP){cb.log(gP);}),function(gP){var gQ;gQ=gO(gP);return function(gR){gQ([gR[0],gR[1],gR[2]]);};})(gN.$0))(gM):void 0;};a.setFSharpStationLayout=function(gM){var gN;gN=bV.FetchO(cW.Get());gN==null?void 0:gG(gM.apply(null,[eN,gN.$0]));};eO=null;(new cf.New$5()).TryGetValue("",{get:function(){return eO;},set:function(gM){eO=gM;}})?void 0:void 0;bo.get_New();eP=new L.New(bN.fsIds(),null,null);b4.Start((eQ=null,b4.Delay(function(){return b4.Bind(b4.Sleep(1000),function(){return b4.While(function(){return true;},b4.Delay(function(){return b4.TryWith(b4.Delay(function(){var gM,gN,gO,gP,gQ;function gR(gU){return gK("",gU);}function gS(gU){return{$:1,$0:gU};}function gT(gU){return(b0.j$9())(cl.parse(gU));}gM=function(gU){return gS(gR(gU));};eP.payloadProcessorO={$:1,$0:(gN=function(gU){return gM(gT(gU));},(gO=p.map(function(gU){return cl.stringify((b1.j$8())(gU));}),function(gU){return gO(gN(gU));}))};p.Start(eP.sendAndForget(A.msgType(D.MsgInformation,(gP=A.MessageBrokerAddress(),(gQ=cl.stringify(((co.Id())())("Registering Processor")),G.New(new B({$:0,$0:""}),gP,D.MsgRequest,"",ci.NewGuid(),gQ,F.NoReply))))),null);return b4.Bind(b4.Sleep(60000),function(){return b4.Return(null);});}),function(gM){((function(gN){return function(gO){return gN(b_.toSafe(gO));};}(function(gN){cb.log(gN);}))(gM.message));return b4.Bind(b4.Sleep(1000),function(){return b4.Return(null);});});}));});})),null);bg.sink(function(){eN.SelectTab("Output");},dG);bg.sink(function(){eN.SelectTab("WS Result");},d$);b4.Start(d.sleepThen(function(){eN.SelectTab("Parser");},1000),null);eR=bS.Create$1(cj.ofArray(["/EPFileX/css/main.css"]));bg.sink(gL,c_);bg.sink(function(gM){if(gM!=="")gL((function(gN){return function(gO){return gN("/EPFileX/codemirror/content/theme/"+b_.toSafe(gO)+".css");};}(a.id))(gM));},di);eS=bf.div([bf.style("height: 100vh; width: 100% "),eN.get_Render().Style("height: 100%; width: 100% "),bf.script([bf.src("/EPFileX/FileSaver/FileSaver.js"),bf.type("text/javascript")]),bf.script([bf.src("http://code.jquery.com/jquery-3.1.1.min.js"),bf.type("text/javascript")]),bf.script([bf.src("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"),bf.type("text/javascript")]),bf.link([bf.href("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css("\n      \n        body { margin: 0px }     \n             \n        div textarea {\n            font-family     : monospace;\n        }\n        .code-editor-list-tile {\n            white-space     : nowrap; \n            border-style    : solid none none;\n            border-color    : white;\n            border-width    : 1px;\n            background-color: #D8D8D8;\n            display         : flex;\n        }\n        .code-editor-list-text{\n            padding         : 1px 10px 1px 5px;\n            overflow        : hidden;\n            text-overflow   : ellipsis;\n            white-space     : nowrap;\n            flex            : 1;\n        }\n        \n        .code-editor-list-tile.direct-predecessor {\n            font-weight     : bold;\n        }\n        .code-editor-list-tile.indirect-predecessor {\n            color           : blue;\n        }\n        .code-editor-list-tile.selected {\n            background-color: #77F;\n            color           : white;\n        }\n        .code-editor-list-tile.hovering {\n            background      : lightgray;\n        }\n        .code-editor-list-tile.hovering.selected {\n            background      : blue;\n        }\n        .code-editor-list-tile>.predecessor {\n            font-weight     : bold;\n            border-style    : inset;\n            border-width    : 1px;\n            text-align      : center;\n            color           : transparent;\n        }\n        .code-editor-list-tile.direct-predecessor>.predecessor {\n            color           : blue;\n        }\n        \n        .CodeMirror { height: 100%; }\n        \n        .node {\n            background-color: white; \n            width           : 2ch; \n            color           : #A03; \n            font-weight     : bold; \n            text-align      : center;\n            font-family     : arial;\n        }\n        .Warning { text-decoration: underline lightblue } \n        .Error   { text-decoration: underline red       } \n        .body    { margin         : 0px                 }\n        "),bf.style(" \n                color      : #333;\n                font-size  : small;\n                font-family: monospace;\n                line-height: 1.2;\n                    "),new bj({$:2,$0:bg.map(function(gM){return bf.div(cj.ofSeq(b5.delay(function(){return b5.map(function(gN){return bf.link([bf.href(gN),bf.type("text/css"),bf.rel("stylesheet")]);},gM);})));},eR)}),bf.css(c5)]);return(bf.renderDoc())(eS);};bZ.$cctor=function(){var cU,cV,cW;bZ.$cctor=a.ignore;function cX(cY,cZ){return new bj({$:8,$0:cD.Style(cY,cZ)});}bZ.result=new n.New();bZ.fromResult=m.toResultS;bZ.toResult=m.fromResultS;bZ.errOptionIsNone=new k.New();bZ.wrap=new q.New();bZ.wrapper=new q.New();bZ.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bZ.MessageBrokerId="<MessageBroker>";bZ.MessageBrokerAddress=new B({$:0,$0:A.MessageBrokerId()});bZ.valFlow=new bi.New();bZ.renderDoc=(cU=(cV=cB.Empty(),function(cY){return cY==null?cV:cY.$0;}),function(cY){return cU(bf.chooseNode(cY));});bZ.string2Styles=(cW=function(cY){return ca.map(function(cZ){return cX(cZ[0],cZ[1]);},cY);},function(cY){return cW(bf.style2pairs(cY));});bZ.codeMirrorIncludes=["/EPFileX/codemirror/scripts/codemirror/codemirror.js","/EPFileX/codemirror/scripts/intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-compiler.js","/EPFileX/codemirror/scripts/codemirror/mode/none.js","/EPFileX/codemirror/scripts/codemirror/mode/fsharp.js","/EPFileX/codemirror/scripts/codemirror/mode/css.js","/EPFileX/codemirror/scripts/codemirror/mode/javascript.js","/EPFileX/codemirror/scripts/codemirror/mode/markdown.js","/EPFileX/codemirror/scripts/addon/search/searchcursor.js","/EPFileX/codemirror/scripts/addon/search/search.js","/EPFileX/codemirror/scripts/addon/search/jump-to-line.js","/EPFileX/codemirror/scripts/addon/dialog/dialog.js","/EPFileX/codemirror/scripts/addon/edit/matchbrackets.js","/EPFileX/codemirror/scripts/addon/selection/active-line.js","/EPFileX/codemirror/scripts/addon/display/fullscreen.js","/EPFileX/codemirror/scripts/addon/hint/show-hint.js","/EPFileX/codemirror/scripts/addon/lint/lint.js"];bZ.observers=cj.T.Empty;bZ.draggedTab=[null];bZ.selectedPanels=bS.Create$1(new cw.New([]));bZ.TabMoved=null;bZ.codeSnippets=cT.Create(function(cY){return cY.id;},cj.T.Empty);bZ.fsIds="FSharpStation"+a.String(cS.now());bZ.references=["mscorlib.dll","System.dll","System.Core.dll","System.Data.dll","System.IO.dll","System.Xml.dll","System.Numerics.dll","FSharp.Core.sigdata","FSharp.Core.dll","Fable.Core.dll","Fable.Import.Browser.dll"];bZ.loadReferences=cQ.Create(function(){var cY;b4.Start((cY=null,b4.Delay(function(){return b4.Bind(bf.LoadFilesAsync(["https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.2/require.min.js"]),function(){var cZ;cZ=cK.create(null);cZ.skipDataMain=1;cZ.isBrowser=1;a.require.config(cZ);b5.iter(function(c0){a.getFileBlob(c0,"metadata/"+c0);},bW.references());return b4.Zero();});})),null);});bZ.getChecker=cQ.Create(function(){return cL.createChecker(function(cY){return a.metadata[cY];},ca.choose(function(cY){return cY.indexOf("sigdata")!=-1?null:{$:1,$0:b7.Replace(cY,".dll","")};},bW.references()));});bZ.addOutMsg=function(cY){cb.log(cY);};};b0.j$4=function(){return b0._v$4?b0._v$4:b0._v$4=(co.DecodeUnion(void 0,"$",[[0,[["$0","Item",co.Id(),0]]],[1,[["$0","Item",co.Id(),1]]],[2,[["$0","Item",b0.j$6,1]]],[3,[["$0","Item",co.DecodeArray(b0.j$6),0]]],[4,[["$0","Item1",co.Id(),1],["$1","Item2",co.DecodeArray(co.DecodeTuple([co.Id(),b0.j$5])),0]]]]))();};b0.j$6=function(){return b0._v$6?b0._v$6:b0._v$6=(co.DecodeRecord(x,[["name",co.Id(),0],["content",co.Id(),0],["parent",b0.j$7,1],["predecessors",co.DecodeList(b0.j$7),0],["id",b0.j$7,0],["expanded",co.Id(),0],["level",co.Id(),0],["levelCode",co.Id(),0],["properties",co.DecodeStringDictionary(co.Id()),0]]))();};b0.j$7=function(){return b0._v$7?b0._v$7:b0._v$7=(co.DecodeUnion(w,"$",[[0,[["$0","Item",co.Id(),0]]]]))();};b0.j$5=function(){return b0._v$5?b0._v$5:b0._v$5=(co.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};b1.j$4=function(){return b1._v$4?b1._v$4:b1._v$4=(co.EncodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",co.Id(),0]]],[2,[["$0","Item",b1.j$5,0]]],[3,[["$0","Item",b1.j$5,0]]],[4,[["$0","Item",b1.j$5,0]]],[5,[["$0","Item",b1.j$5,0]]],[6,[["$0","Item",co.EncodeArray(co.Id()),0]]],[7,[["$0","Item",co.EncodeArray(co.Id()),0]]],[8,[["$0","Item",co.EncodeArray(co.Id()),0]]],[9,[["$0","Item",co.EncodeArray(co.Id()),0]]],[10,[["$0","Item",co.EncodeArray(co.Id()),0]]],[11,[]],[12,[["$0","Item1",b1.j$5,0],["$1","Item2",co.Id(),0]]],[13,[["$0","Item1",co.EncodeArray(co.Id()),0],["$1","Item2",co.Id(),0]]],[14,[["$0","name",co.Id(),0],["$1","action",co.Id(),0],["$2","parms",co.EncodeArray(co.Id()),0]]]]))();};b1.j$5=function(){return b1._v$5?b1._v$5:b1._v$5=(co.EncodeUnion(w,"$",[[0,[["$0","Item",co.Id(),0]]]]))();};b2.p$1=function(cU){return"Address "+b_.prettyPrint(cU.$0);};b1.j$8=function(){return b1._v$8?b1._v$8:b1._v$8=(co.EncodeUnion(void 0,"$",[[0,[["$0","Item",co.Id(),0]]],[1,[["$0","Item",co.Id(),1]]],[2,[["$0","Item",b1.j$7,1]]],[3,[["$0","Item",co.EncodeArray(b1.j$7),0]]],[4,[["$0","Item1",co.Id(),1],["$1","Item2",co.EncodeArray(co.EncodeTuple([co.Id(),b1.j$9])),0]]]]))();};b1.j$9=function(){return b1._v$9?b1._v$9:b1._v$9=(co.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};b0.j$9=function(){return b0._v$9?b0._v$9:b0._v$9=(co.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",co.Id(),0]]],[2,[["$0","Item",b0.j$7,0]]],[3,[["$0","Item",b0.j$7,0]]],[4,[["$0","Item",b0.j$7,0]]],[5,[["$0","Item",b0.j$7,0]]],[6,[["$0","Item",co.DecodeArray(co.Id()),0]]],[7,[["$0","Item",co.DecodeArray(co.Id()),0]]],[8,[["$0","Item",co.DecodeArray(co.Id()),0]]],[9,[["$0","Item",co.DecodeArray(co.Id()),0]]],[10,[["$0","Item",co.DecodeArray(co.Id()),0]]],[11,[]],[12,[["$0","Item1",b0.j$7,0],["$1","Item2",co.Id(),0]]],[13,[["$0","Item1",co.DecodeArray(co.Id()),0],["$1","Item2",co.Id(),0]]],[14,[["$0","name",co.Id(),0],["$1","action",co.Id(),0],["$2","parms",co.DecodeArray(co.Id()),0]]]]))();};b3.p$22=function(cU){return"{"+("text = "+b2.p$9(cU.text))+"; "+("highlight = "+b2.p$11(cU.highlight))+"; "+("disabled = "+b2.p$11(cU.disabled))+"; "+("toolTip = "+b2.p$13(cU.toolTip))+"; "+("onClick = "+b2.p$14(cU.onClick))+"; "+("parms = "+b2.p$8(cU.parms))+"}";};b2.p$14=function(cU){return cU==null?"null":"Some <fun>";};b2.p$13=function(cU){return cU==null?"null":"Some "+b_.prettyPrint(cU.$0);};b2.p$11=function(cU){return cU.$==2?"Dynamic "+b2.p$12(cU.$0):cU.$==1?"DynamicV "+b_.prettyPrint(cU.$0):"Constant "+b_.prettyPrint(cU.$0);};b2.p$12=function(cU){return"View <fun>";};b2.p$9=function(cU){return cU.$==2?"Dynamic "+b2.p$10(cU.$0):cU.$==1?"DynamicV "+b_.prettyPrint(cU.$0):"Constant "+b_.prettyPrint(cU.$0);};b2.p$10=function(cU){return"View <fun>";};b2.p$8=function(cU){return cU==null?"null":"Some "+b_.printArray(b_.prettyPrint,cU.$0);};b2.p$7=function(cU){return cU.$==17?"KMultiple "+b_.printArray(function(cV){return b2.p$7(cV);},cU.$0):cU.$==16?"KUnionCase "+b3.p$21(cU.$0):cU.$==15?"KNamespaces "+b3.p$18(cU.$0):cU.$==14?"KCompilerLocation "+b3.p$17(cU.$0):cU.$==13?"KSignatureData "+b3.p$15(cU.$0):cU.$==12?"KTypeSig "+b_.prettyPrint(cU.$0):cU.$==11?"KToolTip "+b_.printArray(function(cV){return b_.printArray(function(cW){return b3.p$2(cW);},cV);},cU.$0):cU.$==10?"KDeclarations "+b_.printArray(function(cV){return b3.p$13(cV);},cU.$0):cU.$==9?"KFindDecl "+b3.p$12(cU.$0):cU.$==8?"KColorizations "+b_.printList(function(cV){return b3.p$11(cV);},cU.$0):cU.$==7?"KErrors "+b3.p$9(cU.$0):cU.$==6?"KMethod "+b3.p$6(cU.$0):cU.$==5?"KHelp "+b_.prettyPrint(cU.$0):cU.$==4?"KSymbolUse "+b3.p$4(cU.$0):cU.$==3?"KCompletion "+b_.printArray(function(cV){return b3.p$3(cV);},cU.$0):cU.$==2?"KHelpText "+b3.p$1(cU.$0):cU.$==1?"KError "+b3.p(cU.$0):"KInfo "+b_.prettyPrint(cU.$0);};b3.p$21=function(cU){return"{"+("Text = "+b_.prettyPrint(cU.Text))+"}";};b3.p$18=function(cU){return"{"+("Opens = "+b_.printArray(function(cV){return b3.p$19(cV);},cU.Opens))+"; "+("Qualifies = "+b_.printArray(function(cV){return b3.p$20(cV);},cU.Qualifies))+"; "+("Word = "+b_.prettyPrint(cU.Word))+"}";};b3.p$20=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("Qualifier = "+b_.prettyPrint(cU.Qualifier))+"}";};b3.p$19=function(cU){return"{"+("Namespace = "+b_.prettyPrint(cU.Namespace))+"; "+("Name = "+b_.prettyPrint(cU.Name))+"; "+("Type = "+b_.prettyPrint(cU.Type))+"; "+("Line = "+b_.prettyPrint(cU.Line))+"; "+("Column = "+b_.prettyPrint(cU.Column))+"; "+("MultipleNames = "+b_.prettyPrint(cU.MultipleNames))+"}";};b3.p$17=function(cU){return"{"+("Fsc = "+b_.prettyPrint(cU.Fsc))+"; "+("Fsi = "+b_.prettyPrint(cU.Fsi))+"; "+("MSBuild = "+b_.prettyPrint(cU.MSBuild))+"}";};b3.p$15=function(cU){return"{"+("OutputType = "+b_.prettyPrint(cU.OutputType))+"; "+("Parameters = "+b_.printList(function(cV){return b_.printList(function(cW){return b3.p$16(cW);},cV);},cU.Parameters))+"}";};b3.p$16=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("Type = "+b_.prettyPrint(cU.Type))+"}";};b3.p$13=function(cU){return"{"+("Declaration = "+b3.p$14(cU.Declaration))+"; "+("Nested = "+b_.printArray(function(cV){return b3.p$14(cV);},cU.Nested))+"}";};b3.p$14=function(cU){return"{"+("UniqueName = "+b_.prettyPrint(cU.UniqueName))+"; "+("Name = "+b_.prettyPrint(cU.Name))+"; "+("Glyph = "+b_.prettyPrint(cU.Glyph))+"; "+("GlyphChar = "+b_.prettyPrint(cU.GlyphChar))+"; "+("IsTopLevel = "+b_.prettyPrint(cU.IsTopLevel))+"; "+("File = "+b_.prettyPrint(cU.File))+"; "+("EnclosingEntity = "+b_.prettyPrint(cU.EnclosingEntity))+"; "+("IsAbstract = "+b_.prettyPrint(cU.IsAbstract))+"}";};b3.p$12=function(cU){return"{"+("File = "+b_.prettyPrint(cU.File))+"; "+("Line = "+b_.prettyPrint(cU.Line))+"; "+("Column = "+b_.prettyPrint(cU.Column))+"}";};b3.p$11=function(cU){return"{"+("Kind = "+b_.prettyPrint(cU.Kind))+"}";};b3.p$9=function(cU){return"{"+("File = "+b_.prettyPrint(cU.File))+"; "+("Errors = "+b_.printArray(function(cV){return b3.p$10(cV);},cU.Errors))+"}";};b3.p$10=function(cU){return"{"+("FileName = "+b_.prettyPrint(cU.FileName))+"; "+("StartLine = "+b_.prettyPrint(cU.StartLine))+"; "+("EndLine = "+b_.prettyPrint(cU.EndLine))+"; "+("StartColumn = "+b_.prettyPrint(cU.StartColumn))+"; "+("EndColumn = "+b_.prettyPrint(cU.EndColumn))+"; "+("Message = "+b_.prettyPrint(cU.Message))+"; "+("Subcategory = "+b_.prettyPrint(cU.Subcategory))+"}";};b3.p$6=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("CurrentParameter = "+b_.prettyPrint(cU.CurrentParameter))+"; "+("Overloads = "+b_.printList(function(cV){return b3.p$7(cV);},cU.Overloads))+"}";};b3.p$7=function(cU){return"{"+("Tip = "+b_.printList(function(cV){return b_.printList(function(cW){return b3.p$2(cW);},cV);},cU.Tip))+"; "+("TypeText = "+b_.prettyPrint(cU.TypeText))+"; "+("Parameters = "+b_.printList(function(cV){return b3.p$8(cV);},cU.Parameters))+"; "+("IsStaticArguments = "+b_.prettyPrint(cU.IsStaticArguments))+"}";};b3.p$8=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("CanonicalTypeTextForSorting = "+b_.prettyPrint(cU.CanonicalTypeTextForSorting))+"; "+("Display = "+b_.prettyPrint(cU.Display))+"; "+("Description = "+b_.prettyPrint(cU.Description))+"}";};b3.p$4=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("Uses = "+b_.printList(function(cV){return b3.p$5(cV);},cU.Uses))+"}";};b3.p$5=function(cU){return"{"+("FileName = "+b_.prettyPrint(cU.FileName))+"; "+("StartLine = "+b_.prettyPrint(cU.StartLine))+"; "+("StartColumn = "+b_.prettyPrint(cU.StartColumn))+"; "+("EndLine = "+b_.prettyPrint(cU.EndLine))+"; "+("EndColumn = "+b_.prettyPrint(cU.EndColumn))+"; "+("IsFromDefinition = "+b_.prettyPrint(cU.IsFromDefinition))+"; "+("IsFromAttribute = "+b_.prettyPrint(cU.IsFromAttribute))+"; "+("IsFromComputationExpression = "+b_.prettyPrint(cU.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+b_.prettyPrint(cU.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+b_.prettyPrint(cU.IsFromPattern))+"; "+("IsFromType = "+b_.prettyPrint(cU.IsFromType))+"}";};b3.p$3=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("ReplacementText = "+b_.prettyPrint(cU.ReplacementText))+"; "+("Glyph = "+b_.prettyPrint(cU.Glyph))+"; "+("GlyphChar = "+b_.prettyPrint(cU.GlyphChar))+"}";};b3.p$1=function(cU){return"{"+("Name = "+b_.prettyPrint(cU.Name))+"; "+("Overloads = "+b_.printList(function(cV){return b_.printList(function(cW){return b3.p$2(cW);},cV);},cU.Overloads))+"}";};b3.p$2=function(cU){return"{"+("Signature = "+b_.prettyPrint(cU.Signature))+"; "+("Comment = "+b_.prettyPrint(cU.Comment))+"}";};b3.p=function(cU){return"{"+("Code = "+b_.prettyPrint(cU.Code))+"; "+("Message = "+b_.prettyPrint(cU.Message))+"}";};b1.j$7=function(){return b1._v$7?b1._v$7:b1._v$7=(co.EncodeRecord(x,[["name",co.Id(),0],["content",co.Id(),0],["parent",b1.j$5,1],["predecessors",co.EncodeList(b1.j$5),0],["id",b1.j$5,0],["expanded",co.Id(),0],["level",co.Id(),0],["levelCode",co.Id(),0],["properties",co.EncodeStringDictionary(co.Id()),0]]))();};b2.p$6=function(cU){return"CodeSnippetId "+b_.prettyPrint(cU.$0);};b1.j$6=function(){return b1._v$6?b1._v$6:b1._v$6=(co.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};b0.j$8=function(){return b0._v$8?b0._v$8:b0._v$8=(co.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};b0.j$10=function(){return b0._v$10?b0._v$10:b0._v$10=(co.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",co.DecodeArray(co.Id()),0]]]]))();};b1.j$10=function(){return b1._v$10?b1._v$10:b1._v$10=(co.EncodeUnion(void 0,"type",[["BRGetConnections",[]]]))();};b0.j$11=function(){return b0._v$11?b0._v$11:b0._v$11=(co.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",b0.j$1,0]]],["BMWebSocketError",[["$0","Item",co.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",b0.j$2,0]]]]))();};b3.p$23=function(cU){return"{"+("from = "+b2.p$1(cU.from))+"; "+("destination = "+b2.p$1(cU.destination))+"; "+("msgType = "+b2.p$2(cU.msgType))+"; "+("subtype = "+b_.prettyPrint(cU.subtype))+"; "+("id = "+b_.prettyPrint(cU.id))+"; "+("payload = "+b_.prettyPrint(cU.payload))+"; "+("replier = "+b2.p$15(cU.replier))+"}";};b2.p$15=function(cU){return cU.$==2?"Receiver":cU.$==1?"Broker":"NoReply";};b2.p$16=function(cU){return cU.$==3?"Close":cU.$==2?"Open":cU.$==1?"Error":"Message "+b3.p$23(cU.$0);};b0.j$12=function(){return b0._v$12?b0._v$12:b0._v$12=(co.DecodeRecord(void 0,[["GuiRoot",co.Id(),1],["GuiTabStrip",co.DecodeTuple([co.Id(),co.DecodeArray(co.Id())]),1],["GuiSplit",co.DecodeTuple([co.Id(),co.Id(),co.Id(),co.Id(),co.Id(),co.Id(),co.Id(),co.Id()]),1],["GuiNode",b0.j$13,1],["GuiCall",co.DecodeTuple([co.Id(),co.Id(),co.DecodeArray(co.Id())]),1]]))();};b0.j$13=function(){return b0._v$13?b0._v$13:b0._v$13=(co.DecodeRecord(void 0,[["HtmlElementF",co.DecodeTuple([co.Id(),co.DecodeArray(b0.j$13)]),1],["HtmlAttributeF",co.DecodeTuple([co.Id(),co.Id()]),1],["HtmlAttributeOF",co.DecodeTuple([co.Id(),b0.j$14]),1],["HtmlTextF",co.Id(),1],["HtmlEmptyF",co.Id(),1],["HtmlGuiPart",co.Id(),1],["HtmlGuiCall",co.DecodeTuple([co.Id(),co.Id(),co.DecodeArray(co.Id())]),1]]))();};b0.j$14=function(){return b0._v$14?b0._v$14:b0._v$14=(co.DecodeUnion(void 0,"$",[null,[1,[["$0","Value",co.Id(),0]]]]))();};b0.j$1=function(){return b0._v$1?b0._v$1:b0._v$1=(co.DecodeUnion(B,"$",[[0,[["$0","address",co.Id(),0]]]]))();};b0.j$2=function(){return b0._v$2?b0._v$2:b0._v$2=(co.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};b0.j$3=function(){return b0._v$3?b0._v$3:b0._v$3=(co.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};b0.j=function(){return b0._v?b0._v:b0._v=(co.DecodeRecord(void 0,[["from",b0.j$1,0],["destination",b0.j$1,0],["msgType",b0.j$2,0],["subtype",co.Id(),0],["id",co.Id(),0],["payload",co.Id(),0],["replier",b0.j$3,0]]))();};b1.j$1=function(){return b1._v$1?b1._v$1:b1._v$1=(co.EncodeUnion(B,"$",[[0,[["$0","address",co.Id(),0]]]]))();};b1.j$2=function(){return b1._v$2?b1._v$2:b1._v$2=(co.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};b1.j$3=function(){return b1._v$3?b1._v$3:b1._v$3=(co.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};b1.j=function(){return b1._v?b1._v:b1._v=(co.EncodeRecord(void 0,[["from",b1.j$1,0],["destination",b1.j$1,0],["msgType",b1.j$2,0],["subtype",co.Id(),0],["id",co.Id(),0],["payload",co.Id(),0],["replier",b1.j$3,0]]))();};b2.p$2=function(cU){return cU.$==5?"MsgRequestForEcho":cU.$==4?"MsgRequestForId":cU.$==3?"MsgFromBroker":cU.$==2?"MsgReply":cU.$==1?"MsgRequest":"MsgInformation";};b2.p=function(cU){return cU.$==5?"BMUnexpectedMsgType "+b2.p$2(cU.$0):cU.$==4?"BMReceiverCantReply":cU.$==3?"BMWebSocketError "+b_.prettyPrint(cU.$0):cU.$==2?"BMDestinationNotFound "+b2.p$1(cU.$0):cU.$==1?"BMOnlyBrokerShouldUse":"BMOk";};b2.p$3=function(cU){return cU.$==2?"FSInfor":cU.$==1?"FSWarning":"FSError";};b2.p$4=function(cU){return cU.$==1?"Snippet Not Found "+b_.prettyPrint(cU.$0):"FSMessage ("+b_.prettyPrint(cU.$0)+", "+b2.p$3(cU.$1)+")";};b2.p$5=function(cU){return cU.$==2?"Could not open new browser, Popup blocker may be active":cU.$==1?"Snippet Missing":"JsCompilerMsg ("+b_.prettyPrint(cU.$0)+", "+b_.prettyPrint(cU.$1)+")";};}());

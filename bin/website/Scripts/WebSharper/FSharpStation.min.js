(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU;a=window;b=a.FSSGlobal=a.FSSGlobal||{};c=b.Useful=b.Useful||{};d=c.Async=c.Async||{};e=c.KeyVal=c.KeyVal||{};f=c.String=c.String||{};g=c.Option=c.Option||{};h=a.WebSharper;i=h&&h.Obj;j=c.ExceptionThrown=c.ExceptionThrown||{};k=c.ErrOptionIsNone=c.ErrOptionIsNone||{};l=c.ErrSimple=c.ErrSimple||{};m=c.Result=c.Result||{};n=m.ropBuilder=m.ropBuilder||{};o=c.ResultS=c.ResultS||{};p=c.Wrap=c.Wrap||{};q=p.Builder=p.Builder||{};r=c.Mailbox=c.Mailbox||{};s=c.Dict=c.Dict||{};t=c.ResetableMemoize=c.ResetableMemoize||{};u=c.PreproDirective=c.PreproDirective||{};v=b.FsStationShared=b.FsStationShared||{};w=v.CodeSnippetId=v.CodeSnippetId||{};x=v.CodeSnippet=v.CodeSnippet||{};y=v.FSMessage=v.FSMessage||{};z=v.FSSeverity=v.FSSeverity||{};A=b.WSMessagingBroker=b.WSMessagingBroker||{};B=A.Address=A.Address||{};C=A.BrokerRequest=A.BrokerRequest||{};D=A.MessageType=A.MessageType||{};E=A.BrokerMessage=A.BrokerMessage||{};F=A.Replier=A.Replier||{};G=A.MessageGeneric=A.MessageGeneric||{};H=A.ClientTypeFSharp=A.ClientTypeFSharp||{};I=A.ClientTypeFSStation=A.ClientTypeFSStation||{};J=A.ClientTypeJScript=A.ClientTypeJScript||{};K=A.ErrBroker=A.ErrBroker||{};L=A.WSMessagingClient=A.WSMessagingClient||{};M=A.FsStationClientErr=A.FsStationClientErr||{};N=A.FStationMessaging=A.FStationMessaging||{};O=b.FSAutoCompleteIntermediary=b.FSAutoCompleteIntermediary||{};P=O.CommTypes=O.CommTypes||{};Q=P.ResponseError=P.ResponseError||{};R=P.Location=P.Location||{};S=P.CompletionResponse=P.CompletionResponse||{};T=P.OverloadDescription=P.OverloadDescription||{};U=P.OverloadParameter=P.OverloadParameter||{};V=P.Overload=P.Overload||{};W=P.Parameter=P.Parameter||{};X=P.SignatureData=P.SignatureData||{};Y=P.MethodResponse=P.MethodResponse||{};Z=P.SymbolUseRange=P.SymbolUseRange||{};_0=P.SymbolUseResponse=P.SymbolUseResponse||{};_1=P.HelpTextResponse=P.HelpTextResponse||{};_2=P.CompilerLocationResponse=P.CompilerLocationResponse||{};_3=P.FSharpErrorInfo=P.FSharpErrorInfo||{};_4=P.ErrorResponse=P.ErrorResponse||{};_5=P.Colorization=P.Colorization||{};_6=P.Declaration=P.Declaration||{};_7=P.DeclarationResponse=P.DeclarationResponse||{};_8=P.OpenNamespace=P.OpenNamespace||{};_9=P.QualifySymbol=P.QualifySymbol||{};_=P.ResolveNamespaceResponse=P.ResolveNamespaceResponse||{};$=P.UnionCaseResponse=P.UnionCaseResponse||{};ba=P.ACMessage=P.ACMessage||{};bb=O.FSAutoCompleteIntermediaryClient=O.FSAutoCompleteIntermediaryClient||{};bc=b.FsEvaluator=b.FsEvaluator||{};bd=bc.Evaluator=bc.Evaluator||{};be=b.FsTranslator=b.FsTranslator||{};bf=b.HtmlNode=b.HtmlNode||{};bg=bf.Val=bf.Val||{};bh=bg.HelperType=bg.HelperType||{};bi=bg.valBuilder=bg.valBuilder||{};bj=bf.HtmlNode=bf.HtmlNode||{};bk=b.Template=b.Template||{};bl=bk.Button=bk.Button||{};bm=bk.Input=bk.Input||{};bn=bk.Hoverable=bk.Hoverable||{};bo=bk.Panel=bk.Panel||{};bp=bk.TextArea=bk.TextArea||{};bq=bk.CodeMirrorPos=bk.CodeMirrorPos||{};br=bk.CodeMirrorEditor=bk.CodeMirrorEditor||{};bs=bk.CodeMirror=bk.CodeMirror||{};bt=bk.Hint=bk.Hint||{};bu=bk.HintResponse=bk.HintResponse||{};bv=bk.HintOptions=bk.HintOptions||{};bw=bk.LintResponse=bk.LintResponse||{};bx=bk.SplitterBar=bk.SplitterBar||{};by=bk.SectionType=bk.SectionType||{};bz=bk.Grid=bk.Grid||{};bA=bk.TabStrip=bk.TabStrip||{};bB=bk.MenuEntry=bk.MenuEntry||{};bC=bk.MenuNode=bk.MenuNode||{};bD=bk.Menu=bk.Menu||{};bE=bk.Action=bk.Action||{};bF=bk.GuiPart=bk.GuiPart||{};bG=bk.HtmlNodeFable=bk.HtmlNodeFable||{};bH=bk.LayoutDescriptionFable=bk.LayoutDescriptionFable||{};bI=bk.GuiPartSourceId=bk.GuiPartSourceId||{};bJ=bk.Layout=bk.Layout||{};bK=b.RunCode=b.RunCode||{};bL=bK.RunNode=bK.RunNode||{};bM=b.FSharpStation=b.FSharpStation||{};bN=bM.FsGlobal=bM.FsGlobal||{};bO=bN.Position=bN.Position||{};bP=bN.ErrCompiler=bN.ErrCompiler||{};bQ=bN.KeyMapAutoComplete=bN.KeyMapAutoComplete||{};bR=bN.Property=bN.Property||{};bS=bN.PropValue=bN.PropValue||{};bT=bN.CodeSnippet=bN.CodeSnippet||{};bU=bM.FableModule=bM.FableModule||{};bV=bU.Babel=bU.Babel||{};bW=bU.Fable=bU.Fable||{};bX=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};bY=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};bZ=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};b0=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};b1=a.GeneratedPrintf=a.GeneratedPrintf||{};b2=h&&h.Concurrency;b3=h&&h.Seq;b4=h&&h.Unchecked;b5=h&&h.Strings;b6=a.IntelliFactory;b7=b6&&b6.Runtime;b8=h&&h.Utils;b9=h&&h.Enumerator;b_=h&&h.Arrays;b$=a.console;ca=h&&h.Control;cb=ca&&ca.MailboxProcessor;cc=h&&h.Collections;cd=cc&&cc.Dictionary;ce=h&&h.CancellationTokenSource;cf=a.System;cg=cf&&cf.Guid;ch=h&&h.List;ci=h&&h.Option;cj=a.JSON;ck=h&&h.TimeoutException;cl=h&&h.Json;cm=cl&&cl.Provider;cn=h&&h.Owin;co=cn&&cn.WebSocket;cp=co&&co.Client;cq=cp&&cp.WithEncoding;cr=co&&co.Endpoint;cs=a.location;ct=cc&&cc.Map;cu=cc&&cc.FSharpMap;cv=h&&h.Remoting;cw=cv&&cv.AjaxRemotingProvider;cx=h&&h.Slice;cy=h&&h.UI;cz=cy&&cy.Next;cA=cz&&cz.View;cB=cz&&cz.Doc;cC=h&&h.Operators;cD=cz&&cz.AttrModule;cE=cz&&cz.AttrProxy;cF=cz&&cz.Var;cG=cz&&cz.Input;cH=cG&&cG.Mouse;cI=cc&&cc.FSharpSet;cJ=cc&&cc.BalancedTree;cK=h&&h.MatchFailureException;cL=a.Object;cM=a.Fable;cN=a.Babel;cO=cc&&cc.HashSet;cP=h&&h.JavaScript;cQ=cP&&cP.JSModule;cR=h&&h.Lazy;cS=a.jQuery;cT=a.Date;cU=cz&&cz.ListModel;d.sleepThen=function(cV,cW){var cX;cX=null;return b2.Delay(function(){return b2.Bind(b2.Sleep(cW),function(){cV();return b2.Zero();});});};d.bind=function(cV,cW){return b2.Bind(cW,cV);};d.apply=function(cV,cW){var cX;cX=null;return b2.Delay(function(){return b2.Bind(b2.StartChild(cV,null),function(cY){return b2.Bind(b2.StartChild(cW,null),function(cZ){return b2.Bind(cY,function(c0){return b2.Bind(cZ,function(c1){return b2.Return(c0(c1));});});});});});};d.retn=function(cV){return b2.Return(cV);};d.iter=function(cV,cW){var cX;cX=null;return b2.Delay(function(){return b2.Bind(cW,function(cY){cV(cY);return b2.Zero();});});};d.map=function(cV,cW){var cX;cX=null;return b2.Delay(function(){return b2.Bind(cW,function(cY){return b2.Return(cV(cY));});});};e.tryGetValue=function(cV,cW){return b3.tryPick(function(cX){return b4.Equals(cX.K,cV)?{$:1,$0:cX.V}:null;},cW);};f.append=function(cV,cW){return cV+cW;};f.trim=function(cV){return b5.Trim(cV);};f.splitByChar=function(cV,cW){return b5.SplitChars(cW,[cV],0);};g.modify=function(cV){var cW;function cX(cY){return cY==null?null:{$:1,$0:cV(cY.$0)};}cW=function(cY){return g.defaultValue(a.id,cY);};return function(cY){return cW(cX(cY));};};g.apply=function(cV,cW){var cX;return cV!=null&&cV.$==1&&(cW!=null&&cW.$==1&&(cX=[cW.$0,cV.$0],true))?{$:1,$0:cX[0](cX[1])}:null;};g.iterFO=function(cV,cW){if(cV!=null&&cV.$==1)if(cW!=null&&cW.$==1)cW.$0(cV.$0);};g.iterF=function(cV,cW){if(cW!=null&&cW.$==1)cW.$0(cV);};g.call=function(cV,cW){return cW!=null&&cW.$==1?{$:1,$0:cW.$0(cV)}:null;};g.defaultWith=function(cV,cW){return cW==null?cV():cW.$0;};g.defaultValue=function(cV,cW){return cW==null?cV:cW.$0;};j=c.ExceptionThrown=b7.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cV){return function(cW){return cV(b8.prettyPrint(cW));};}(a.id))(this.exn);}},i,j);j.New=b7.Ctor(function(cV){this.exn=cV;},j);k=c.ErrOptionIsNone=b7.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return"Option is None";}},i,k);k.New=b7.Ctor(function(){},k);l=c.ErrSimple=b7.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.warning;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.msg;}},i,l);l.New=b7.Ctor(function(cV,cW){this.msg=cV;this.warning=cW;},l);n=m.ropBuilder=b7.Class({For:function(cV,cW){var cX;cX=this;return this.Using(b9.Get(cV),function(cY){return cX.While(function(){return cY.MoveNext();},cX.Delay(function(){return cW(cY.Current());}));});},Using:function(cV,cW){return this.TryFinally(function(){return cW(cV);},function(){if(!b4.Equals(cV,null))cV.Dispose();});},TryFinally:function(cV,cW){try{return this.ReturnFrom(cV());}finally{cW();}},TryWith:function(cV,cW){try{return this.ReturnFrom(cV());}catch(cX){return cW(cX);}},While:function(cV,cW){var cX;cX=this;return!cV()?this.Zero():this.Bind(cW(),function(){return cX.While(cV,cW);});},Run:function(cV){return cV();},Combine:function(cV,cW){return(m.combine(cV))(cW);},Delay:a.id,Zero:function(){return m.succeed();},Bind:function(cV,cW){return m.bind(function(cX){return m.tryCall(cW,cX);},cV);},ReturnFrom:a.id,Return:function(cV){return m.succeed(cV);}},i,n);n.New=b7.Ctor(function(){},n);m.toResultS=function(cV){return{$:0,$0:cV.$0,$1:b_.map(function(cW){return new l.New(cW.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),cW.FSSGlobal_Useful_ErrMsg$get_IsWarning());},cV.$1)};};m.fromResultS=function(cV){return{$:0,$0:cV.$0,$1:b_.map(a.id,cV.$1)};};m.result2String=function(cV){return b5.concat("\n",[g.defaultValue("Failed: ",cV.$0)].concat(m.msgs2String(cV.$1)));};m.countMessages=function(cV){var cW,cX,cY,cZ,c0,c1,c2;if(b4.Equals(cV,[]))return"";else{cZ=b_.filter(function(c3){return!c3.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cV);c0=b_.filter(function(c3){return c3.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cV);c1=b_.length(cZ);c2=b_.length(c0);switch(c1===0?c2===0?0:c2===1?2:5:c1===1?c2===0?1:c2===1?3:(cW=[c1,c2],6):c2===0?4:(cW=[c1,c2],6)){case 0:cY=function(c3){return function(c4){return c3(b8.toSafe(c4));};}(a.id);break;case 1:cY=function(c3){return function(c4){return c3(b8.toSafe(c4));};}(a.id);break;case 2:cY=function(c3){return function(c4){return c3(b8.toSafe(c4));};}(a.id);break;case 3:cY=function(c3){return function(c4){return c3("1 error, 1 warning\n"+b8.toSafe(c4));};}(a.id);break;case 4:cY=((b7.Curried3(function(c3,c4,c5){return c3(a.String(c4)+" errors\n"+b8.toSafe(c5));}))(a.id))(c1);break;case 5:cY=((b7.Curried3(function(c3,c4,c5){return c3(a.String(c4)+" warnings\n"+b8.toSafe(c5));}))(a.id))(c2);break;case 6:cY=(((b7.Curried(function(c3,c4,c5,c6){return c3(a.String(c4)+" errors, "+a.String(c5)+" warnings\n"+b8.toSafe(c6));},4))(a.id))(cW[0]))(cW[1]);break;}return cY(m.getMessages(cV));}};m.getMessages=function(cV){return b5.concat("\n",m.msgs2String(cV));};m.msgs2String=function(cV){return b_.map(function(cW){return cW.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},cV);};m.seqCheck=function(cV){return b3.exists(function(cW){return m.Success(cW).$==1;},cV)?m.failWithMsgs(b3.pick(function(cW){var cX;cX=m.Success(cW);return cX.$==1?{$:1,$0:cX.$0}:null;},cV)):m.succeed(b3.map(function(cW){return cW.$0.$0;},cV));};m.withError=function(cV,cW){var cX;cX=cW.$1;return g.defaultWith(function(){return cV(cX);},cW.$0);};m.ifError=function(cV,cW){return g.defaultValue(cV,cW.$0);};m.failIfTrue=function(cV,cW){return cW?m.fail(cV):m.succeed();};m.failIfFalse=function(cV,cW){return cW?m.succeed():m.fail(cV);};m.tryProtection=function(){return m.succeed();};m.toOptionMs=function(cV){return[cV.$0,cV.$1];};m.toOption=function(cV){return cV.$0;};m.fromOption=function(cV,cW){return cW!=null&&cW.$==1?m.succeed(cW.$0):m.fail(cV);};m.fromChoice=function(cV){return cV.$==1?m.fail(cV.$0):m.succeed(cV.$0);};m.result=function(){bX.$cctor();return bX.result;};m.tryCall=function(cV,cW){try{return cV(cW);}catch(cX){return m.fail(m.failException(cX));}};m.failException=function(cV){return new j.New(cV);};m.Success=function(cV){return cV.$0==null?{$:1,$0:cV.$1}:{$:0,$0:[cV.$0.$0,cV.$1]};};m.failSimpleWarning=function(cV){return m.fail(new l.New(cV,true));};m.failSimpleError=function(cV){return m.fail(new l.New(cV,false));};m.apply=function(cV,cW){var cX,cY,cZ,c0,c1;cX=cV.$1;cY=cW.$1;cZ=cV.$0;c0=cW.$0;return cZ!=null&&cZ.$==1&&(c0!=null&&c0.$==1&&(c1=[cZ.$0,c0.$0],true))?{$:0,$0:{$:1,$0:c1[0](c1[1])},$1:cX.concat(cY)}:{$:0,$0:null,$1:cX.concat(cY)};};m.bind=function(cV,cW){var cX,cY,cZ;cX=cW.$0;cY=cW.$1;return cX==null?{$:0,$0:null,$1:cY}:(cZ=cV(cX.$0),{$:0,$0:cZ.$0,$1:cY.concat(cZ.$1)});};m.combine=function(cV){var cW;cW=cV.$1;return function(cX){return m.mergeMsgs(cW,cX);};};m.mergeMsgs=function(cV,cW){var cX;cX=m.mapMsgs(function(cY){return cV.concat(cY);},cW);return{$:0,$0:cX[0],$1:cX[1]};};m.getMsgs=function(cV){return cV.$1;};m.getOption=function(cV){return cV.$0;};m.mapMsgs=function(cV,cW){return[cW.$0,cV(cW.$1)];};m.mapMsg=function(cV,cW){return[cW.$0,b_.map(cV,cW.$1)];};m.map=function(cV,cW){var cX;return{$:0,$0:(cX=cW.$0,cX==null?null:{$:1,$0:cV(cX.$0)}),$1:cW.$1};};m.failWithMsgs=function(cV){return{$:0,$0:null,$1:cV};};m.fail=function(cV){return{$:0,$0:null,$1:[cV]};};m.succeedWithMsgs=function(cV,cW){return{$:0,$0:{$:1,$0:cV},$1:cW};};m.succeedWithMsg=function(cV,cW){return{$:0,$0:{$:1,$0:cV},$1:[cW]};};m.succeed=function(cV){return{$:0,$0:{$:1,$0:cV},$1:[]};};o.toResult=function(){bX.$cctor();return bX.toResult;};o.fromResult=function(){bX.$cctor();return bX.fromResult;};p.StartAsTask=function(cV,cW,cX){return b2.StartAsTask(p.getAsyncR(cV),cX);};p.Start=function(cV,cW){b2.Start(p.getAsync(cV),cW);};q=p.Builder=b7.Class({For:function(cV,cW){var cX;cX=this;return this.Using(b9.Get(cV),function(cY){return cX.While(function(){return cY.MoveNext();},cX.Delay(function(){return cW(cY.Current());}));});},Using:function(cV,cW){return this.TryFinally(function(){return cW(cV);},function(){if(!b4.Equals(cV,null))cV.Dispose();});},TryFinally:function(cV,cW){var cX;return{$:2,$0:(cX=null,b2.Delay(function(){return b2.Bind(b2.Catch(p.toAsyncResult(cV())),function(cY){var cZ,c0;cW();if(cY.$==1)throw cY.$0;else c0=cY.$0;return b2.Return(c0);});}))};},TryWith:function(cV,cW){var cX;return{$:2,$0:(cX=null,b2.Delay(function(){return b2.Bind(b2.Catch(p.toAsyncResult(cV())),function(cY){return b2.Return(cY.$==1?cW(cY.$0):cY.$0);});}))};},While:function(cV,cW){return p.whileLoop(cV,cW);},Combine:function(cV,cW){return p.combine(p.errOptionIsNone(),cV,cW);},Run:function(cV){return cV();},Delay:a.id,ReturnFrom:a.id,Return:function(cV){return{$:3,$0:cV};},Zero:function(){return{$:3,$0:null};},Bind:function(cV,cW){return p.bind(cW,{$:4,$0:cV});},Bind$1:function(cV,cW){return p.bind(cW,{$:0,$0:cV});},Bind$2:function(cV,cW){return p.bind(cW,{$:1,$0:cV});},Bind$3:function(cV,cW){return p.bind(cW,cV);}},i,q);q.New=b7.Ctor(function(){},q);p.runSynchronouslyS=function(cV,cW){var cX;cX=p.runSynchronouslyO(cV,cW);return cX[0]==null?(function(cY){return function(cZ){return cY("Failed!\n"+b8.toSafe(cZ));};}(a.id))(cX[1]):(((b7.Curried3(function(cY,cZ,c0){return cY(a.String(cZ)+"\n"+b8.toSafe(c0));}))(a.id))(cX[0].$0))(cX[1]);};p.runSynchronouslyO=function(cV,cW){return m.mapMsgs(cV?m.countMessages:m.getMessages,b$.log("runSynchronously should not be used in Javascript"));};p.getResult=function(cV,cW){if(cW.$==4){if(cW.$0==null)cV(m.fail(p.errOptionIsNone()));else cV(m.succeed(cW.$0.$0));}else if(cW.$==0)cV(cW.$0);else if(cW.$==1)b2.StartWithContinuations(cW.$0,function(cX){cV(m.succeed(cX));},function(cX){cV(m.fail(m.failException(cX)));},function(cX){cV(m.fail(m.failException(cX)));},null);else if(cW.$==2)b2.StartWithContinuations(cW.$0,cV,function(cX){cV(m.fail(m.failException(cX)));},function(cX){cV(m.fail(m.failException(cX)));},null);else cV(m.succeed(cW.$0));};p.wrapper=function(){bX.$cctor();return bX.wrapper;};p.wrap=function(){bX.$cctor();return bX.wrap;};p.whileLoop=function(cV,cW){return cV()?p.bind(function(){return p.whileLoop(cV,cW);},cW()):{$:3,$0:null};};p.combine=function(cV,cW,cX){var cY,cZ,c0,c1;switch(cW.$==4?cW.$0==null?3:0:cW.$==0?(cZ=cW.$0.$1,cZ&&b_.length(cZ)===0?0:(cY=cW.$0.$1,4)):cW.$==1?(cY=cW.$0,1):cW.$==2?(cY=cW.$0,2):0){case 0:return cX();break;case 1:return{$:2,$0:(c0=null,b2.Delay(function(){return b2.Bind(cY,function(){return b2.Bind(p.toAsyncResult(cX()),function(c2){return b2.Return(c2);});});}))};break;case 2:return{$:2,$0:(c1=null,b2.Delay(function(){return b2.Bind(cY,function(c2){var c3,c4;c4=m.Success(c2);c4.$==0?c3=c4.$0[1]:c3=c4.$0;return b2.Bind(p.toAsyncResult(cX()),function(c5){return b2.Return(m.mergeMsgs(c3,c5));});});}))};break;case 3:return p.addMsgs(cV,[cV],cX());break;case 4:return p.addMsgs(cV,cY,cX());break;}};p.addMsgs=function(cV,cW,cX){var cY,cZ,c0;if(b4.Equals(cW,[]))return cX;else switch(cX.$==4?cX.$0==null?1:(cY=cX.$0.$0,0):cX.$==0?(cY=cX.$0,2):cX.$==1?(cY=cX.$0,3):cX.$==2?(cY=cX.$0,4):(cY=cX.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(cY,cW)};break;case 1:return{$:0,$0:m.mergeMsgs(cW,m.fail(cV))};break;case 2:return{$:0,$0:m.mergeMsgs(cW,cY)};break;case 3:return{$:2,$0:(cZ=null,b2.Delay(function(){return b2.Bind(cY,function(c1){return b2.Return(m.succeedWithMsgs(c1,cW));});}))};break;case 4:return{$:2,$0:(c0=null,b2.Delay(function(){return b2.Bind(cY,function(c1){return b2.Return(m.mergeMsgs(cW,c1));});}))};break;}};p.wrapper2Async=function(cV,cW){var cX,cY,cZ,c0;cY=p.tryCall(cV,cW);switch(cY.$==4?0:cY.$==0?1:cY.$==1?2:cY.$==2?3:0){case 0:return p.wb2arb([],cY);break;case 1:return p.wb2arb(cY.$0.$1,cY);break;case 2:cZ=cY.$0;c0=null;return b2.Delay(function(){return b2.Bind(cZ,function(c1){return b2.Return(m.succeed(c1));});});break;case 3:return cY.$0;break;}};p.start=function(cV,cW){p.startV(function(cX){if(cX[0]==null)cV("Failed!\n"+cX[1]);else cV(cX[1]);},cW);};p.startV=function(cV,cW){var cX,cY,cZ,c0;function c1(c4){return m.mapMsgs(m.getMessages,c4);}function c2(c4){return[null,c4];}function c3(c4){return[null,c4];}b2.StartWithContinuations(p.getAsyncR(cW),function(c4){return cV(c1(c4));},(cX=(cY=function(c4){return function(c5){return c4(a.String(c5));};}(a.id),function(c4){return c2(cY(c4));}),function(c4){return cV(cX(c4));}),(cZ=(c0=function(c4){return function(c5){return c4(a.String(c5));};}(a.id),function(c4){return c3(c0(c4));}),function(c4){return cV(cZ(c4));}),null);};p.toAsyncWithDefault=function(cV){return function(cW){return p.getAsyncWithDefault(cV,cW);};};p.toAsyncOptionMs=function(cV){return d.map(m.toOptionMs,p.getAsyncR(cV));};p.toAsyncOption=function(cV){return d.map(m.toOption,p.getAsyncR(cV));};p.toAsyncResult=function(cV){return p.getAsyncR(cV);};p.toAsync=function(cV){return p.getAsync(cV);};p.getAsync=function(cV){return p.getAsyncWithDefault(function(cW){throw a.Error(m.getMessages(cW));},cV);};p.getAsyncWithDefault=function(cV,cW){return d.map(function(cX){return m.withError(cV,cX);},p.getAsyncR(cW));};p.getAsyncR=function(cV){var cW,cX;return cV.$==3?b2.Return(m.succeed(cV.$0)):cV.$==4?b2.Return(m.fromOption(p.errOptionIsNone(),cV.$0)):cV.$==0?b2.Return(cV.$0):cV.$==2?cV.$0:(cW=cV.$0,(cX=null,b2.Delay(function(){return b2.Bind(cW,function(cY){return b2.Return(m.succeed(cY));});})));};p.map=function(cV){var cW;cW=function(cX){return p.Return(cV(cX));};return function(cX){return p.bind(cW,cX);};};p.Return=function(cV){return{$:3,$0:cV};};p.bind=function(cV,cW){var cX,cY,cZ,c0,c1,c2;switch(cW.$==4?cW.$0==null?1:(cX=cW.$0.$0,0):cW.$==0?(cY=m.Success(cW.$0),cY.$==1?(cX=cY.$0,2):(cZ=cY.$0[1],cZ&&b_.length(cZ)===0?(cX=cY.$0[0],0):(cX=[cY.$0[0],cY.$0[1]],3))):cW.$==1?(cX=cW.$0,4):cW.$==2?(cX=cW.$0,5):(cX=cW.$0,0)){case 0:return p.tryCall(cV,cX);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:m.failWithMsgs(cX)};break;case 3:c0=cX[1];return function(c3){var c4,c5,c6,c7,c8;switch(c3.$==4?c3.$0==null?1:(c4=c3.$0.$0,0):c3.$==0?(c5=m.Success(c3.$0),c5.$==1?(c4=c5.$0,4):(c6=c5.$0[1],c6&&b_.length(c6)===0?(c4=c5.$0[0],2):(c4=[c5.$0[0],c5.$0[1]],3))):c3.$==1?(c4=c3.$0,5):c3.$==2?(c4=c3.$0,6):(c4=c3.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(c4,c0)};break;case 1:return{$:0,$0:m.failWithMsgs(c0.concat([p.errOptionIsNone()]))};break;case 2:return{$:0,$0:m.succeedWithMsgs(c4,c0)};break;case 3:return{$:0,$0:m.succeedWithMsgs(c4[0],c0.concat(c4[1]))};break;case 4:return{$:0,$0:m.failWithMsgs(c0.concat(c4))};break;case 5:return{$:2,$0:(c7=null,b2.Delay(function(){return b2.Bind(c4,function(c9){return b2.Return(m.succeedWithMsgs(c9,c0));});}))};break;case 6:return{$:2,$0:(c8=null,b2.Delay(function(){return b2.Bind(c4,function(c9){return b2.Return(m.mergeMsgs(c0,c9));});}))};break;}}(p.tryCall(cV,cX[0]));break;case 4:return{$:2,$0:(c1=null,b2.Delay(function(){return b2.Bind(cX,function(c3){return p.wb2arb([],p.tryCall(cV,c3));});}))};break;case 5:return{$:2,$0:(c2=null,b2.Delay(function(){return b2.Bind(cX,function(c3){var c4,c5,c6;c4=m.Success(c3);return c4.$==1?(c5=c4.$0,c6=null,b2.Delay(function(){return b2.Return(m.failWithMsgs(c5));})):p.wb2arb(c4.$0[1],p.tryCall(cV,c4.$0[0]));});}))};break;}};p.tryCall=function(cV,cW){try{return cV(cW);}catch(cX){return{$:0,$0:m.fail(m.failException(cX))};}};p.wb2arb=function(cV,cW){var cX,cY,cZ,c0,c1,c2;switch(cW.$==2?(cX=cW.$0,1):cW.$==0?(cX=cW.$0,2):cW.$==3?(cX=cW.$0,3):cW.$==4?cW.$0==null?4:(cX=cW.$0.$0,3):(cX=cW.$0,0)){case 0:cY=null;return b2.Delay(function(){return b2.Bind(cX,function(c3){return b2.Return(m.succeedWithMsgs(c3,cV));});});break;case 1:cZ=null;return b2.Delay(function(){return b2.Bind(cX,function(c3){return b2.Return(m.mergeMsgs(cV,c3));});});break;case 2:c0=null;return b2.Delay(function(){return b2.Return(m.mergeMsgs(cV,cX));});break;case 3:c1=null;return b2.Delay(function(){return b2.Return(m.succeedWithMsgs(cX,cV));});break;case 4:c2=null;return b2.Delay(function(){return b2.Return(m.failWithMsgs(cV.concat([p.errOptionIsNone()])));});break;}};p.errOptionIsNone=function(){bX.$cctor();return bX.errOptionIsNone;};r.fold=function(cV,cW){return cb.Start(function(cX){function cY(cZ){var c0;c0=null;return b2.Delay(function(){return b2.TryWith(b2.Delay(function(){return b2.Bind(cX.Receive(null),function(c1){return b2.Bind(cV(cZ,c1),function(c2){return cY(c2);});});}),function(c1){((function(c2){return function(c3){return c2(b8.prettyPrint(c3));};}(function(c2){b$.log(c2);}))(c1));return cY(cZ);});});}return cY(cW);},null);};r.call=function(cV){return r.iter(function(cW){var cX,cY,cZ;cX=cW[0];cY=cW[1];cZ=null;return b2.Delay(function(){return b2.Bind(cV(cY),function(c0){cX(c0);return b2.Zero();});});});};r.iter=function(cV){return cb.Start(function(cW){var cX;cX=null;return b2.Delay(function(){return b2.While(function(){return true;},b2.Delay(function(){return b2.TryWith(b2.Delay(function(){return b2.Bind(cW.Receive(null),function(cY){return b2.Bind(cV(cY),function(){return b2.Return(null);});});}),function(cY){((function(cZ){return function(c0){return cZ(b8.prettyPrint(c0));};}(function(cZ){b$.log(cZ);}))(cY));return b2.Zero();});}));});},null);};s.add=function(cV,cW,cX){if(cX.ContainsKey(cV))cX.set_Item(cV,cW);else cX.Add(cV,cW);};t=c.ResetableMemoize=b7.Class({ClearCache:function(){this.cache.Clear();}},i,t);t.New=b7.Ctor(function(cV){this.f=cV;this.cache=new cd.New$5();},t);u.NoPrepo={$:11};u.PrepoEndIf={$:8};u.PrepoElse={$:7};c.asyncStartCancelling=function(){var cV;cV=null;return function(cW){var cX;cV==null?void 0:cV.$0.Cancel$1();cX=new ce.New();b2.Start(cW,{$:1,$0:cX});cV={$:1,$0:cX};};};c.separateDirectives=function(cV){var cW,cX,cY,cZ;function c0(c8){return c8[1];}function c1(c8){return c8.$==0?{$:1,$0:c8.$0}:null;}function c2(c8){return c8[1];}function c3(c8){return c8.$==1?{$:1,$0:c8.$0}:null;}function c4(c8){return c8[1];}function c5(c8){return c8.$==5?{$:1,$0:c8.$0}:null;}function c6(c8){return c8[1];}function c7(c8){return c8.$==4?{$:1,$0:c8.$0}:null;}cW=b_.ofSeq(b3.distinct(b3.choose(function(c8){return c1(c0(c8));},cV)));cX=b_.ofSeq(b3.distinct(b3.choose(function(c8){return c3(c2(c8));},cV)));cY=b_.ofSeq(b3.distinct(b3.choose(function(c8){return c5(c4(c8));},cV)));cZ=b_.ofSeq(b3.distinct(b3.choose(function(c8){return c7(c6(c8));},cV)));return[b_.ofSeq(b3.map(function(c8){return c8[0];},cV)),cW,cX,cY,cZ];};c.separatePrepros=function(cV,cW){var cX;function cY(c1){return g.defaultValue(c1,b3.tryLast(b5.SplitStrings(b5.Trim(c1),["\""],1)));}function cZ(c1){return g.defaultValue("",b3.tryHead(b5.SplitStrings(b5.Trim(c1),["#define "],1)));}function c0(c1){return"//"+c1;}cX=cV?c0:a.id;return b_.map(function(c1){var c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc;c2=true;return c2&&b5.StartsWith(c1,"#define")?[c0(c1),{$:1,$0:cZ(c1)}]:c2&&b5.StartsWith(c1,"#r")?[c0(c1),{$:0,$0:cY(c1)}]:c2&&b5.StartsWith(c1,"#load")?[c0(c1),{$:2,$0:cY(c1)}]:c2&&b5.StartsWith(c1,"#nowarn")?[c0(c1),{$:4,$0:cY(c1)}]:c2&&b5.StartsWith(c1,"# ")?[cX(c1),{$:3,$0:cY(c1)}]:c2&&b5.StartsWith(c1,"#line")?[cX(c1),{$:3,$0:cY(c1)}]:c2&&b5.StartsWith(c1,"#I")?[c0(c1),{$:5,$0:cY(c1)}]:c2&&b5.StartsWith(c1,"#if")?[c1,{$:6,$0:c1}]:c2&&b5.StartsWith(c1,"#else")?[c1,u.PrepoElse]:c2&&b5.StartsWith(c1,"#endif")?[c1,u.PrepoEndIf]:c2&&b5.StartsWith(c1,"#light")?[c1,{$:9,$0:false}]:c2&&b5.StartsWith(c1,"#")?[c0(c1),{$:10,$0:c1}]:[c1,u.NoPrepo];},cW);};c.mapPrint=function(cV){((function(cW){return function(cX){return cW(b8.prettyPrint(cX));};}(function(cW){b$.log(cW);}))(cV));return cV;};c.printoutfn=function(cV,cW){return cW(function(cX){return cV(cX+"\n");});};c.dprintfn=function(cV){return cV(a.ignore);};c.__=function(cV,cW,cX){return cV(cX,cW);};c.swap=function(cV,cW,cX){return cV(cX,cW);};c.rexGuid=function(){bX.$cctor();return bX.rexGuid;};c.REGEX=function(cV,cW,cX){var cY;if(cX===null)return null;else try{cY=(new a.String(cX)).match(new a.RegExp(cV,cW));return b4.Equals(cY,null)?null:cY&&b_.length(cY)===0?null:{$:1,$0:cY};}catch(cZ){return null;}};c.extract=function(cV,cW){var cX;return b5.Substring(cW,0,(cX=cW.length,b4.Compare(cV,cX)===-1?cV:cX));};w=v.CodeSnippetId=b7.Class({get_Text:function(){return a.String(this.$0);}},null,w);w.get_New=function(){return new w({$:0,$0:cg.NewGuid()});};x=v.CodeSnippet=b7.Class({SeparateCode:function(cV){var cW,cX,cY,cZ,c0,c1;function c2(c3,c4){return[b5.replicate(cX," ")+c3,c4];}cW=!cV||this.properties.ContainsKey("NoLinePre");cX=this.levelCode*2;cY=cX===0?[a.id,""]:[function(c3){return b_.map(function(c4){return c2(c4[0],c4[1]);},c3);},(function(c3){return function(c4){return c3("("+a.String(c4)+")");};}(a.id))(cX)];cZ=c.separateDirectives(cY[0](c.separatePrepros(!cV,(cW?a.id:(c0=[(((b7.Curried3(function(c3,c4,c5){return c3("# 1 @\""+b8.toSafe(c4)+b8.toSafe(c5)+"\"");}))(a.id))(cY[1]))(this.get_NameSanitized())],function(c3){return c0.concat(c3);}))(b5.SplitChars(this.content,["\n"],0)))));c1=cZ[0];return[[[this.get_NameSanitized(),b_.length(c1),cX]],c1,cZ[1],cZ[2],cZ[3],cZ[4]];},UniquePredecessors:function(cV){return v.predsL(cV,ch.ofArray([this.id]));},get_NameSanitized:function(){return this.id.get_Text()+" "+v.sanitize(this.get_Name())+".fsx";},get_Name:function(){return v.snippetName(this.name,this.content);}},null,x);x.CodeFsx=function(cV,cW){return(x.CodeAndStarts(cV,cW))[0];};x.CodeAndStarts=function(cV,cW){var cX;cX=x.ReducedCode(cV,cW);return x.FinishCode(cV,cX[0],cX[1],cX[2],cX[3],cX[4],cX[5]);};x.FinishCode=function(cV,cW,cX,cY,cZ,c0,c1){var c2,c3;c2=b5.concat(" ",b3.map(function(c4){return"-d:"+c4;},b3.sort(cZ)));c3=ch.ofSeq(b3.delay(function(){return b3.append(c2!==""?["////"+c2]:[],b3.delay(function(){return b3.append(b3.map(function(c4){return function(c5){return c4("#I @\""+b8.toSafe(c5)+"\"");};}(a.id),c0),b3.delay(function(){return b3.append(b3.map(function(c4){return function(c5){return c4("#r @\""+b8.toSafe(c5)+"\"");};}(a.id),cY),b3.delay(function(){return b3.append(cV&&!b3.isEmpty(c1)?["# 1 \"required for nowarns to work\""]:[],b3.delay(function(){return b3.map(function(c4){return function(c5){return c4("#nowarn \""+b8.toSafe(c5)+"\"");};}(a.id),c1);}));}));}));}));}));return[b5.concat("\n",b3.append(c3,cX)),b_.ofSeq((b3.mapFold(function(c4,c5){var c6;c6=c5[1];return[[c5[0],[c5[2],c4,c4+c6]],c4+c6];},c3.get_Length(),cW))[0])];};x.ReducedCode=function(cV,cW){var cX,cY;function cZ(c0,c1,c2,c3,c4,c5){return function(c6){return x.AddSeps(c0,c1,c2,c3,c4,c5,c6[0],c6[1],c6[2],c6[3],c6[4],c6[5]);};}cX=b3.reduce(function(c0,c1){return(function(c2){return cZ(c2[0],c2[1],c2[2],c2[3],c2[4],c2[5]);}(c0))(c1);},(cY=b3.map(function(c0){return c0.SeparateCode(cV);},cW),b3.isEmpty(cY)?[[[],[],[],[],[],[]]]:cY));return[cX[0],[b5.concat("\n",cX[1])],cX[2],cX[3],cX[4],cX[5]];};x.AddSeps=function(cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6){return[cV.concat(c1),cW.concat(c2),b_.ofSeq(b3.distinct(b3.append(cX,c3))),b_.ofSeq(b3.distinct(b3.append(cY,c4))),b_.ofSeq(b3.distinct(b3.append(cZ,c5))),b_.ofSeq(b3.distinct(b3.append(c0,c6)))];};x.TryFindByKey=function(cV,cW){return b3.tryFind(function(cX){return b4.Equals(cX.id,cW);},cV);};x.New=function(cV,cW,cX,cY,cZ,c0,c1,c2,c3){return new x({name:cV,content:cW,parent:cX,predecessors:cY,id:cZ,expanded:c0,level:c1,levelCode:c2,properties:c3});};y.GetWholeFile={$:11};y.GetIdentification={$:0};z.FSInfor={$:2};z.FSWarning={$:1};z.FSError={$:0};v.predsL=function(cV,cW){var cX,cY;cX=cW;cY=ch.T.Empty;while(!(cX.$==0))(function(){var cZ,c0;return cX.$==1?(cZ=cX.$1,(c0=cX.$0,b3.contains(c0,cY)?void(cX=cZ):(cX=ch.collect(a.id,ch.ofArray([cZ,ch.collect(function(c1){return ch.append(ci.toList(c1.parent),c1.predecessors);},ci.toList(cV(c0)))])),void(cY=new ch.T({$:1,$0:c0,$1:cY}))))):null;}());return cY;};v.preds=function(cV,cW,cX){var cY,cZ;return cX.$==1?(cY=cX.$0,(cZ=ch.collect(a.id,ch.ofArray([cX.$1,ch.collect(function(c0){return ch.append(ci.toList(c0.parent),c0.predecessors);},ci.toList(cV(cY)))])),v.preds(cV,b3.contains(cY,cW)?cW:new ch.T({$:1,$0:cY,$1:cW}),cZ))):cW;};v.sanitize=function(cV){var cW;cW=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return b5.Filter(function(cX){return!b_.contains(cX,cW);},cV);};v.snippetName=function(cV,cW){return cV!==""?cV:g.defaultValue("<empty>",b3.tryHead(b3.filter(function(cX){return!(b5.StartsWith(cX,"#")||b5.StartsWith(cX,"[<")||b5.StartsWith(cX,"//"));},b3.map(b5.Trim,b5.SplitChars(cW,["\n"],1)))));};B=A.Address=b7.Class({get_txt:function(){return this.$0;}},null,B);C.BRGetConnections={$:0};D.MsgRequestForEcho={$:5};D.MsgRequestForId={$:4};D.MsgFromBroker={$:3};D.MsgReply={$:2};D.MsgRequest={$:1};D.MsgInformation={$:0};E.BMReceiverCantReply={$:4};E.BMOnlyBrokerShouldUse={$:1};E.BMOk={$:0};F.Receiver={$:2};F.Broker={$:1};F.NoReply={$:0};G.New=function(cV,cW,cX,cY,cZ,c0,c1){return{from:cV,destination:cW,msgType:cX,subtype:cY,id:cZ,payload:c0,replier:c1};};H.FSharp={$:0};I.FSStation={$:0};J.JScript={$:0};K=A.ErrBroker=b7.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cV){return function(cW){return cV(b0.p(cW));};}(a.id))(this.bm);}},i,K);K.New=b7.Ctor(function(cV){this.bm=cV;},K);L=A.WSMessagingClient=b7.Class({sendMsg:function(cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){return cV.replier.$===0?cX.Bind$3(cW.sendAndForget(cV),function(){return cX.Return("");}):cX.ReturnFrom(cW.sendGetReply(cV));}));},getListeners:function(){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){var cX,cY;return cW.Bind$3(cV.sendGetReply((cX=A.MessageBrokerAddress(),(cY=cj.stringify((bZ.j$10())(C.BRGetConnections)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),cY,F.NoReply)))),function(cZ){return cW.Return((bY.j$10())(cj.parse(cZ)).$0);});}));},sendGetReply:function(cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){return cX.Bind$3(cW.sendAndReply(F.Receiver,cV),function(cY){var cZ;return cX.Bind$1((cZ=cY.msgType,cZ.$==2?m.succeed(cY.payload):cZ.$==3?m.fail(new K.New((bY.j$11())(cj.parse(cY.payload)))):m.fail(new K.New({$:5,$0:cY.msgType}))),function(c0){return cX.Return(c0);});});}));},sendAndVerify:function(cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){return cX.Bind$3(cW.sendAndReply(F.Broker,cV),function(cY){var cZ;return cX.Bind$1(cY.msgType.$==3?(cZ=(bY.j$11())(cj.parse(cY.payload)),cZ.$===0?m.succeed():m.fail(new K.New(cZ))):m.fail(new K.New({$:5,$0:cY.msgType})),function(){return cX.Return();});});}));},sendAndReply:function(cV,cW){var cX,cY;cX=this;cY=p.wrap();return cY.Run(cY.Delay(function(){return cY.Bind$3(cX.getServer(),function(cZ){return cY.Bind$2(b2.FromContinuations(function(c0,c1,c2){var c3,c4;c3=cX.waiting;c3.mailbox.AddLast({$:0,$0:cW.id,$1:[c0,c1,c2]});c3.resume();cX.postR(cZ,cV,cW);return cX.wsTimeout>0?b2.Start((c4=null,b2.Delay(function(){return b2.Bind(b2.Sleep(cX.wsTimeout),function(){var c5;c5=cX.waiting;c5.mailbox.AddLast({$:2,$0:cW.id,$1:function(){return new ck.New$1((((b7.Curried3(function(c6,c7,c8){return c6("Did not receive reply in "+a.String(c7)+" seconds for Message: "+b1.p$23(c8));}))(a.id))(cX.wsTimeout/1000>>0))(cW));}});c5.resume();return b2.Zero();});})),null):null;}),function(c0){return cY.Return(c0);});});}));},sendAndForget:function(cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){return cX.Bind$3(cW.getServer(),function(cY){cW.postR(cY,F.NoReply,cV);return cX.Zero();});}));},postR:function(cV,cW,cX){try{cV.FSSGlobal_WSMessagingBroker_IServer$Post(A.replier(cW,A.from(this.clientAddress,cX)));}catch(cY){this.serverO=null;throw cY;}},getServer:function(){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$2(cV.checkServer.PostAndAsyncReply(function(cX){return[cX,null];},null),function(cX){return cW.Bind$1(cX,function(cY){return cW.Return(cY);});});}));},connectToWebSocketServer:function(){var cV,cW;cV=this;c.dprintfn(function(cX){return cX("in connectToWebSocketServer");});cW=null;return b2.Delay(function(){return b2.Bind(((cV.connectStateful(cV.wsEndPoint))(cV.clientId))(function(cX){var cY;cY=null;return b2.Delay(function(){return b2.Return([0,function(cZ){return function(c0){var c1;c1=null;return b2.Delay(function(){return b2.Combine(b2.TryWith(b2.Delay(function(){return c0.$==2?((c.printoutfn(cV.out,function(c2){return function(c3){return c2("WebSocket "+b8.toSafe(c3)+" connection open.");};}))(cV.clientId),cV.serverO={$:1,$0:cX},b2.Zero()):c0.$==3?((c.printoutfn(cV.out,function(c2){return function(c3){return c2("WebSocket "+b8.toSafe(c3)+" connection closed.");};}))(cV.clientId),cV.close(),b2.Zero()):c0.$==1?((c.printoutfn(cV.out,function(c2){return function(c3){return c2("WebSocket "+b8.toSafe(c3)+" connection error!");};}))(cV.clientId),b2.Zero()):(cV.processMessage(c0.$0),b2.Zero());}),function(c2){(((b7.Curried3(function(c3,c4,c5){return c3("msg: "+b0.p$16(c4)+" \nexn:"+b8.prettyPrint(c5));}))(function(c3){b$.log(c3);}))(c0))(c2);return b2.Zero();}),b2.Delay(function(){return b2.Return(cZ);}));});};}]);});}),function(){c.dprintfn(function(cX){return cX("connectToWebSocketServer with server");});return b2.Zero();});});},processMessage:function(cV){var cW,cX,cY,cZ,c0,c2;cX=this;(c.dprintfn(function(c3){return function(c4){return c3(b1.p$23(c4));};}))(cV);cY=cV.msgType;function c1(c3){cX.reply(c3);}switch(cY.$==2?0:cY.$==0?1:cY.$==1?2:cY.$==5?3:cY.$==4?4:0){case 0:this.processReply(cV);break;case 1:((c.printoutfn(this.out,b7.Curried3(function(c3,c4,c5){return c3("Information from '"+b8.toSafe(c4)+"': "+b8.toSafe(c5));})))(cV.from.get_txt()))(((cm.Id())())(cj.parse(cV.payload)));break;case 2:cZ=this.payloadProcessorO;cZ!=null&&cZ.$==1?p.Start((c0=cX.mapPayloadWrap(cZ.$0,cV),(p.map(function(c3){return c1(A.makeReply(c3));}))(c0)),null):cV.replier.$===2?null:null;break;case 3:cX.reply(A.msgType(D.MsgInformation,A.mapPayload(a.id,cV)));break;case 4:cX.reply(A.msgType(D.MsgInformation,(c2=A.makeReply(cV),G.New(c2.from,c2.destination,c2.msgType,c2.subtype,c2.id,cj.stringify(((cm.Id())())(this.clientId)),c2.replier))));break;}},mapPayloadWrap:function(cV,cW){var cX;cX=p.wrap();return cX.Run(cX.Delay(function(){return cX.Bind$3(cV(cW.payload),function(cY){return cX.Return(A.mapPayload(function(){return cY;},cW));});}));},processReply:function(cV){var cW;cW=this.waiting;cW.mailbox.AddLast({$:1,$0:cV.id,$1:cV});cW.resume();},close:function(){var cV;cV=this.serverO;cV==null?void 0:(cV.$0.FSSGlobal_WSMessagingBroker_IServer$Close(),this.serverO=null);},reply:function(cV){var cW;cW=this.serverO;cW==null?void 0:cW.$0.FSSGlobal_WSMessagingBroker_IServer$Post(A.destination(cV.from,A.from(this.clientAddress,cV)));},set_Out:function(cV){this.out=cV;},SendMsg:function(cV){return this.sendMsg(cV);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},i,L);L.New=b7.Ctor(function(cV,cW,cX){L.New$1.call(this,b7.Curried3(function(cY,cZ,c0){return d.map(a.ignore,cq.ConnectStateful(function(c1){return cj.stringify((bZ.j())(c1));},function(c1){return(bY.j())(cj.parse(c1));},cr.CreateRemote((((b7.Curried3(function(c1,c2,c3){return c1("ws://"+b8.toSafe(c2)+"?ClientId="+b8.toSafe(c3));}))(a.id))(cY))(cZ),{$:1,$0:co.JsonEncoding.Readable}),function(c1){return c0({FSSGlobal_WSMessagingBroker_IServer$Post:function(c2){return c1.Post(c2);},FSSGlobal_WSMessagingBroker_IServer$Close:function(){return c1.get_Connection().close(1000);}});}));}),cV,cW,cX);},L);L.New$1=b7.Ctor(function(cV,cW,cX,cY){var cZ,c0;cZ=this;this.connectStateful=cV;this.clientId=cW;this.wsEndPoint=(c0=A.extractEndPoint()+"/ws",cY==null?c0:cY.$0);this.clientAddress=new B({$:0,$0:this.clientId});this.wsTimeout=cX==null?60000:cX.$0;this.out=function(c1){return function(c2){return c1(b8.toSafe(c2));};}(function(c1){b$.log(c1);});this.serverO=null;this.payloadProcessorO=null;this.waiting=A.waitingAgent(function(c1){((c.printoutfn(cZ.out,b7.Curried3(function(c2,c3,c4){return c2("Reply from '"+b8.toSafe(c3)+"': "+b8.toSafe(c4));})))(c1.from.get_txt()))(c1.payload);});this.checkServer=r.call(function(){var c1;c1=null;return b2.Delay(function(){c.dprintfn(function(c2){return c2("getServer");});return b2.Combine(cZ.serverO==null?(c.dprintfn(function(c2){return c2("getServer Connecting");}),b2.Bind(cZ.connectToWebSocketServer(),function(){return b2.Bind(b2.Sleep(200),function(){return b2.Return(null);});})):b2.Zero(),b2.Delay(function(){var c2;return b2.Return((c2=cZ.serverO,m.fromOption(new l.New("could not connect to Server",false),c2)));}));});});},L);M=A.FsStationClientErr=b7.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&this.$1.$==0;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(((b7.Curried3(function(cV,cW,cX){return cV(b0.p$3(cW)+" "+b8.toSafe(cX));}))(a.id))(this.$1))(this.$0):(function(cV){return function(cW){return cV(b0.p$4(cW));};}(a.id))(this);}},null,M);N=A.FStationMessaging=b7.Class({snippetResponse:function(cV){return cV.$==2?m.succeed(cV.$0):m.fail(new M({$:1,$0:a.String(cV)}));},snippetsResponse:function(cV){return cV.$==3?m.succeed(cV.$0):m.fail(new M({$:1,$0:a.String(cV)}));},stringResponse:function(cV){var cW,cX;return cV.$==1&&((cX=cV.$0,cX!=null&&cX.$==1)&&(cW=cV.$0.$0,true))?m.succeed(cW):m.fail(new M({$:1,$0:a.String(cV)}));},stringResponseR:function(cV){var cW,cX;function cY(cZ,c0){return new M({$:0,$0:cZ,$1:c0});}return cV.$==4&&((cX=cV.$0,cX!=null&&cX.$==1)&&(cW=[cV.$0.$0,cV.$1],true))?m.succeedWithMsgs(cW[0],b_.ofSeq(b3.map(function(cZ){return cY(cZ[0],cZ[1]);},cW[1]))):m.fail(new M({$:1,$0:a.String(cV)}));},toId:function(){return new B({$:0,$0:this.fsIds});},get_MessagingClient:function(){return this.msgClient;},set_FSStationId:function(cV){this.fsIds=cV;},get_FSStationId:function(){return this.fsIds;},RunActionCall:function(cV,cW,cX){var cY,cZ,c0,c1,c2;function c3(c4){return cY.stringResponseR(c4);}cY=this;cZ=this.toId();c0=this;c1={$:14,$0:cV,$1:cW,$2:cX};c2=p.wrap();return c2.Run(c2.Delay(function(){var c4,c5;return c2.Bind$3((c4=c0.msgClient.sendGetReply((c5=cj.stringify((bZ.j$4())(c1)),G.New(new B({$:0,$0:""}),cZ,D.MsgRequest,"",cg.NewGuid(),c5,F.NoReply))),(p.map(function(c6){return(bY.j$4())(cj.parse(c6));}))(c4)),function(c6){return c2.Bind$1(c3(c6),function(c7){return c2.Return(c7);});});}));},RunSnippet:function(cV,cW){var cX,cY,cZ,c0,c1;function c2(c3){return cX.stringResponseR(c3);}cX=this;cY=this.toId();cZ={$:13,$0:b5.SplitChars(cW,["/"],0),$1:cV};c0=this;c1=p.wrap();return c1.Run(c1.Delay(function(){var c3,c4;return c1.Bind$3((c3=c0.msgClient.sendGetReply((c4=cj.stringify((bZ.j$4())(cZ)),G.New(new B({$:0,$0:""}),cY,D.MsgRequest,"",cg.NewGuid(),c4,F.NoReply))),(p.map(function(c5){return(bY.j$4())(cj.parse(c5));}))(c3)),function(c5){return c1.Bind$1(c2(c5),function(c6){return c1.Return(c6);});});}));},GenericMessage:function(cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.stringResponse(c2);}cW=this;cX=this.toId();cY=this;cZ={$:1,$0:cV};c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cY.msgClient.sendGetReply((c3=cj.stringify((bZ.j$4())(cZ)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bY.j$4())(cj.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},RequestWholeFile:function(){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponse(c1);}cV=this;cW=this.toId();cX=this;cY=y.GetWholeFile;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cX.msgClient.sendGetReply((c2=cj.stringify((bZ.j$4())(cY)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bY.j$4())(cj.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestPredsById:function(cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.snippetsResponse(c2);}cW=this;cX=this.toId();cY=this;cZ={$:4,$0:cV};c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cY.msgClient.sendGetReply((c3=cj.stringify((bZ.j$4())(cZ)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bY.j$4())(cj.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},RequestPreds:function(cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.snippetsResponse(c2);}cW=this;cX=this.toId();cY={$:8,$0:b5.SplitChars(cV,["/"],0)};cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cZ.msgClient.sendGetReply((c3=cj.stringify((bZ.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bY.j$4())(cj.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},RequestJSCode:function(cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.stringResponseR(c2);}cW=this;cX=this.toId();cY={$:10,$0:b5.SplitChars(cV,["/"],0)};cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cZ.msgClient.sendGetReply((c3=cj.stringify((bZ.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bY.j$4())(cj.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},RequestCode:function(cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.stringResponse(c2);}cW=this;cX=this.toId();cY={$:7,$0:b5.SplitChars(cV,["/"],0)};cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cZ.msgClient.sendGetReply((c3=cj.stringify((bZ.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bY.j$4())(cj.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},RequestSnippet:function(cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.snippetResponse(c2);}cW=this;cX=this.toId();cY={$:9,$0:b5.SplitChars(cV,["/"],0)};cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cZ.msgClient.sendGetReply((c3=cj.stringify((bZ.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bY.j$4())(cj.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},SendMessage:function(cV){var cW,cX,cY;cW=this.toId();cX=this;cY=p.wrap();return cY.Run(cY.Delay(function(){var cZ,c0;return cY.Bind$3((cZ=cX.msgClient.sendGetReply((c0=cj.stringify((bZ.j$4())(cV)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c0,F.NoReply))),(p.map(function(c1){return(bY.j$4())(cj.parse(c1));}))(cZ)),function(c1){return cY.Bind$1(m.succeed(c1),function(c2){return cY.Return(c2);});});}));},SendMessage$1:function(cV,cW){var cX,cY;cX=this;cY=p.wrap();return cY.Run(cY.Delay(function(){var cZ,c0;return cY.Bind$3((cZ=cX.msgClient.sendGetReply((c0=cj.stringify((bZ.j$4())(cW)),G.New(new B({$:0,$0:""}),cV,D.MsgRequest,"",cg.NewGuid(),c0,F.NoReply))),(p.map(function(c1){return(bY.j$4())(cj.parse(c1));}))(cZ)),function(c1){return cY.Bind$1(m.succeed(c1),function(c2){return cY.Return(c2);});});}));}},i,N);N.get_FSStationId_=function(){return"FSharpStation1520945071083";};N.New=b7.Ctor(function(cV,cW,cX,cY){N.New$1.call(this,new L.New(cV,cX,cY),cV,cW);},N);N.New$1=b7.Ctor(function(cV,cW,cX){this.msgClient=cV;this.fsIds=g.defaultValue("FSharpStation1520945071083",cX);},N);A.extractEndPoint=function(){return b_.get(b5.SplitChars(cs.href.substring(cs.href.indexOf("//")+2),["/"],0),0);};A.waitingAgent=function(cV){return r.fold(function(cW,cX){var cY;cY=null;return b2.Delay(function(){var cZ,c0,c1,c2,c3,c4,c5,c6,c7;return b2.Combine(cX.$==1?(cZ=cX.$1,(g.defaultWith(function(){cV(cZ);},(c0=ct.TryFind(cX.$0,cW),c0==null?null:{$:1,$0:(c1=c0.$0,(c2=c1[0],(c1[1],c1[2],c2(cZ))))})),b2.Zero())):cX.$==2?(c3=ct.TryFind(cX.$0,cW),c3==null?void 0:(c4=c3.$0,c4[0],c5=c4[1],c4[2],c5(cX.$1())),b2.Zero()):cX.$==3?(c6=ct.TryFind(cX.$0,cW),c6==null?void 0:(c7=c6.$0,c7[0],c7[1],c7[2](cX.$1())),b2.Zero()):b2.Zero(),b2.Delay(function(){var c8;return b2.Return((cX.$==2?(c8=cX.$0,true):cX.$==3?(c8=cX.$0,true):cX.$==0?false:(c8=cX.$0,true))?cW.Remove(c8):cW.Add(cX.$0,cX.$1));}));});},new cu.New([]));};A.makeReply=function(cV){return A.replier(F.NoReply,A.msgType(D.MsgReply,cV));};A.mapPayload=function(cV,cW){return G.New(cW.from,cW.destination,cW.msgType,cW.subtype,cW.id,cV(cW.payload),cW.replier);};A.msgId=function(cV,cW){return G.New(cW.from,cW.destination,cW.msgType,cW.subtype,cV,cW.payload,cW.replier);};A.replier=function(cV,cW){return G.New(cW.from,cW.destination,cW.msgType,cW.subtype,cW.id,cW.payload,cV);};A.subtype=function(cV,cW){return G.New(cW.from,cW.destination,cW.msgType,cV,cW.id,cW.payload,cW.replier);};A.msgType=function(cV,cW){return G.New(cW.from,cW.destination,cV,cW.subtype,cW.id,cW.payload,cW.replier);};A.destination=function(cV,cW){return G.New(cW.from,cV,cW.msgType,cW.subtype,cW.id,cW.payload,cW.replier);};A.from=function(cV,cW){return G.New(cV,cW.destination,cW.msgType,cW.subtype,cW.id,cW.payload,cW.replier);};A.MessageBrokerAddress=function(){bX.$cctor();return bX.MessageBrokerAddress;};A.MessageBrokerId=function(){bX.$cctor();return bX.MessageBrokerId;};Q.New=function(cV,cW){return{Code:cV,Message:cW};};R.New=function(cV,cW,cX){return{File:cV,Line:cW,Column:cX};};S.New=function(cV,cW,cX,cY){return{Name:cV,ReplacementText:cW,Glyph:cX,GlyphChar:cY};};T.New=function(cV,cW){return{Signature:cV,Comment:cW};};U.New=function(cV,cW,cX,cY){return{Name:cV,CanonicalTypeTextForSorting:cW,Display:cX,Description:cY};};V.New=function(cV,cW,cX,cY){return{Tip:cV,TypeText:cW,Parameters:cX,IsStaticArguments:cY};};W.New=function(cV,cW){return{Name:cV,Type:cW};};X.New=function(cV,cW){return{OutputType:cV,Parameters:cW};};Y.New=function(cV,cW,cX){return{Name:cV,CurrentParameter:cW,Overloads:cX};};Z.New=function(cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5){return{FileName:cV,StartLine:cW,StartColumn:cX,EndLine:cY,EndColumn:cZ,IsFromDefinition:c0,IsFromAttribute:c1,IsFromComputationExpression:c2,IsFromDispatchSlotImplementation:c3,IsFromPattern:c4,IsFromType:c5};};_0.New=function(cV,cW){return{Name:cV,Uses:cW};};_1.New=function(cV,cW){return{Name:cV,Overloads:cW};};_2.New=function(cV,cW,cX){return{Fsc:cV,Fsi:cW,MSBuild:cX};};_3.New=function(cV,cW,cX,cY,cZ,c0,c1){return{FileName:cV,StartLine:cW,EndLine:cX,StartColumn:cY,EndColumn:cZ,Message:c0,Subcategory:c1};};_4.New=function(cV,cW){return{File:cV,Errors:cW};};_5.New=function(cV){return{Kind:cV};};_6.New=function(cV,cW,cX,cY,cZ,c0,c1,c2){return{UniqueName:cV,Name:cW,Glyph:cX,GlyphChar:cY,IsTopLevel:cZ,File:c0,EnclosingEntity:c1,IsAbstract:c2};};_7.New=function(cV,cW){return{Declaration:cV,Nested:cW};};_8.New=function(cV,cW,cX,cY,cZ,c0){return{Namespace:cV,Name:cW,Type:cX,Line:cY,Column:cZ,MultipleNames:c0};};_9.New=function(cV,cW){return{Name:cV,Qualifier:cW};};_.New=function(cV,cW,cX){return{Opens:cV,Qualifies:cW,Word:cX};};$.New=function(cV){return{Text:cV};};ba.ACMIdentification={$:0};bb=O.FSAutoCompleteIntermediaryClient=b7.Class({info2Bool:function(cV){return cV.$==0&&cV.$0==="true";},errors2String:function(cV){return cV.$==7?b5.concat("\n",b3.map(function(cW){return((((((((b7.Curried(function(cX,cY,cZ,c0,c1,c2,c3,c4){return cX("ErrFSharp \"F# "+b8.toSafe(cY)+".fsx ("+a.String(cZ)+","+a.String(c0)+") - ("+a.String(c1)+","+a.String(c2)+") "+b8.toSafe(c3)+":"+b8.toSafe(c4)+"\"");},8))(a.id))(cW.FileName))(cW.StartLine))(cW.StartColumn))(cW.EndLine))(cW.EndColumn))(cW.Subcategory))(cW.Message);},cV.$0.Errors)):(function(cW){return function(cX){return cW(b0.p$7(cX));};}(a.id))(cV);},tip2String:function(cV){return cV.$==11?b5.concat("\n",b3.collect(function(cW){return ch.ofArray([cW.Signature,cW.Comment]);},b3.collect(a.id,cV.$0))):(function(cW){return function(cX){return cW(b0.p$7(cX));};}(a.id))(cV);},comp2Strings:function(cV){var cW;cW=this;return cV.$==3?b_.map(function(cX){return[cX.Name,cX.ReplacementText,cX.Glyph,cX.GlyphChar];},cV.$0):cV.$==2?[]:cV.$==17?b_.collect(function(cX){return cW.comp2Strings(cX);},cV.$0):[[(function(cX){return function(cY){return cX(b0.p$7(cY));};}(a.id))(cV),"","ErrorMsg","E"]];},Async_map:function(cV,cW){var cX;cX=null;return b2.Delay(function(){return b2.Bind(cW,function(cY){return b2.Return(cV(cY));});});},FindDecl:function(cV,cW,cX,cY){return this.Async_map(a.id,O.sendMessage({$:7,$0:cV,$1:cW,$2:cX,$3:cY}));},FindDecl$1:function(cV,cW,cX){return this.Async_map(a.id,O.sendMessage({$:6,$0:cV,$1:cW,$2:cX}));},Complete:function(cV,cW,cX,cY,cZ){var c0;c0=this;return c0.Async_map(function(c1){return c0.comp2Strings(c1);},O.sendMessage({$:9,$0:cV,$1:cX,$2:cY,$3:cW,$4:cZ}));},Complete$1:function(cV,cW,cX,cY){var cZ;cZ=this;return cZ.Async_map(function(c0){return cZ.comp2Strings(c0);},O.sendMessage({$:8,$0:cV,$1:cX,$2:cY,$3:cW}));},ToolTip:function(cV,cW,cX,cY){var cZ;cZ=this;return cZ.Async_map(function(c0){return cZ.tip2String(c0);},O.sendMessage({$:3,$0:cV,$1:cW,$2:cX,$3:cY}));},ToolTip$1:function(cV,cW,cX){var cY;cY=this;return cY.Async_map(function(cZ){return cY.tip2String(cZ);},O.sendMessage({$:2,$0:cV,$1:cW,$2:cX}));},Parse:function(cV,cW){var cX;cX=this;return cX.Async_map(function(cY){return cX.errors2String(cY);},O.sendMessage({$:10,$0:cV,$1:cW,$2:[]}));},Parse$1:function(cV,cW,cX){var cY;cY=this;return cY.Async_map(function(cZ){return cY.errors2String(cZ);},O.sendMessage({$:10,$0:cV,$1:cW,$2:cX}));},MustParse:function(cV,cW){var cX;cX=this;return cX.Async_map(function(cY){return cX.info2Bool(cY);},O.sendMessage({$:11,$0:cV,$1:cW}));}},i,bb);bb.New=b7.Ctor(function(cV,cW){},bb);O.sendMessage=function(cV){var cW;cW=null;return b2.Delay(function(){return b2.Bind((new cw.New()).Async("FSharpStation:FSSGlobal.FSAutoCompleteIntermediary.sendMessageRpc:1124743568",[cV]),function(cX){return b2.Return(cX);});});};bd.extractConfig=function(cV){return b5.StartsWith(cV,"////-d:")?cx.string(cV,{$:1,$0:4},{$:1,$0:cV.indexOf("\n")-1}):"";};bc.abortFsiExe=function(){b2.Start((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.abortFsiExe:-829366048",[]),null);};bc.evaluateAR=function(cV,cW,cX,cY){var cZ;cZ=null;return b2.Delay(function(){return b2.Bind((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator.evaluateAS:-156288114",[cV,cW,cX,cY]),function(c0){function c1(c2,c3){return new l.New(c2,c3);}return b2.Return({$:0,$0:c0[0],$1:b_.ofSeq(b3.map(function(c2){return c1(c2[0],c2[1]);},c0[1]))});});});};be.translateAR=function(cV,cW){var cX;cX=null;return b2.Delay(function(){return b2.Bind((new cw.New()).Async("FSharpStation:FSSGlobal.FsTranslator.translateAS:608897894",[cV,cW]),function(cY){function cZ(c0,c1){return new l.New(c0,c1);}return b2.Return({$:0,$0:cY[0],$1:b_.ofSeq(b3.map(function(c0){return cZ(c0[0],c0[1]);},cY[1]))});});});};bg=bf.Val=b7.Class({get_ValTypeMember:function(){return 0;}},null,bg);bh.HelperType={$:0};bh.op_AmpGreater=function(cV,cW){return new bg({$:2,$0:cW});};bh.op_AmpGreater$1=function(cV,cW){return new bg({$:1,$0:cW});};bh.op_AmpGreater$2=function(cV,cW){return cW;};bh.op_AmpGreater$3=function(cV,cW){return cW;};bh.op_AmpGreater$4=function(cV,cW){return cW;};bh.op_AmpGreater$5=function(cV,cW){return cW;};bh.op_AmpGreater$6=function(cV,cW){return cW;};bh.op_AmpGreater$7=function(cV,cW){return cW;};bh.op_AmpGreater$8=function(cV,cW){return cW;};bh.op_AmpGreater$9=function(cV,cW){return new bg({$:0,$0:cW});};bh.op_AmpGreater$10=function(cV,cW){return new bg({$:0,$0:cW});};bh.op_AmpGreater$11=function(cV,cW){return new bg({$:0,$0:cW});};bh.op_AmpGreater$12=function(cV,cW){return new bg({$:0,$0:cW});};bh.op_AmpGreater$13=function(cV,cW){return new bg({$:0,$0:cW});};bh.op_AmpGreater$14=function(cV,cW){return new bg({$:0,$0:cW});};bi=bg.valBuilder=b7.Class({Delay:function(cV){return cV();},Zero:function(){return new bg({$:0,$0:null});},Bind:function(cV,cW){return bg.bind(cW,cV);},Bind$1:function(cV,cW){return bg.bind(cW,cV);},Bind$2:function(cV,cW){return bg.bind(cW,cV);},ReturnFrom:a.id,Return:function(cV){return new bg({$:0,$0:cV});}},i,bi);bi.New=b7.Ctor(function(){},bi);bg.fixitF=function(cV,cW){return cV(cW);};bg.valFlow=function(){bX.$cctor();return bX.valFlow;};bg.mapCached=function(cV,cW){return new bg({$:2,$0:cA.MapCached(cV,bg.toView(cW))});};bg.sink=function(cV,cW){cA.Sink(cV,bg.toView(bg.fixit(cW)));};bg.mapAsync=function(cV,cW){return new bg({$:2,$0:cA.MapAsync(cV,bg.toView(bg.fixit(cW)))});};bg.iter4=function(cV,cW,cX,cY,cZ){bg.iterV(a.ignore,bg.map4(cV,cW,cX,cY,cZ));};bg.iter3=function(cV,cW,cX,cY){bg.iterV(a.ignore,bg.map3(cV,cW,cX,cY));};bg.iter2=function(cV,cW,cX){bg.iterV(a.ignore,bg.map2(cV,cW,cX));};bg.apply=function(cV,cW){return bg.bindV(function(cX){return bg.mapV(cX,cV);},cW);};bg.map4=function(cV,cW,cX,cY,cZ){return bg.map4V(cV,bg.fixit(cW),bg.fixit(cX),bg.fixit(cY),bg.fixit(cZ));};bg.map3=function(cV,cW,cX,cY){return bg.map3V(cV,bg.fixit(cW),bg.fixit(cX),bg.fixit(cY));};bg.map2=function(cV,cW,cX){return((bg.map2V(cV))(bg.fixit(cW)))(bg.fixit(cX));};bg.map=function(cV,cW){return bg.mapV(cV,bg.fixit(cW));};bg.bind=function(cV,cW){return bg.bindV(cV,bg.fixit(cW));};bg.iter=function(cV,cW){bg.iterV(cV,bg.fixit(cW));};bg.toDoc=function(cV){return cB.EmbedView(bg.toView(bg.fixit(cV)));};bg.fixit=function(cV){return bg.fixitF(bg.toVal,cV);};bg.toVal=function(cV){return typeof cV=="string"?new bg({$:0,$0:cV}):typeof cV=="number"?new bg({$:0,$0:cV}):typeof cV=="boolean"?new bg({$:0,$0:cV}):cV instanceof cB?new bg({$:0,$0:cV}):cV instanceof bg?cV:cV instanceof cz.Var?new bg({$:1,$0:cV}):"RSet"in cV?new bg({$:1,$0:cV}):typeof cV=="function"?new bg({$:2,$0:cV}):cV.get_ValTypeMember()===0?cV:cC.FailWith((function(cW){return function(cX){return cW("Could not convert "+b8.prettyPrint(cX));};}(a.id))(cV));};bg.attrV=function(cV,cW){return cW.$==2?cD.Dynamic(cV,cW.$0):cW.$==1?cD.Dynamic(cV,cW.$0.RView()):cE.Create(cV,cW.$0);};bg.attrVO=function(cV,cW){var cX,cY;return cW.$==2?(cX=cW.$0,cD.DynamicPred(cV,cA.Map(function(cZ){return cZ!=null;},cX),cA.Map(function(cZ){return cZ==null?"":cZ.$0;},cX))):cW.$==1?(cY=cW.$0,cD.DynamicPred(cV,cA.Map(function(cZ){return cZ!=null;},cY.RView()),cA.Map(function(cZ){return cZ==null?"":cZ.$0;},cY.RView()))):cW.$0==null?cD.DynamicPred(cV,cA.Const(false),cA.Const("")):cE.Create(cV,cW.$0.$0);};bg.tagElt=function(cV,cW){return cW.$==2?cB.EmbedView(cA.Map(cV,cW.$0)):cW.$==1?cB.EmbedView(cA.Map(cV,cW.$0.RView())):cV(cW.$0);};bg.tagDoc=function(cV,cW){return cW.$==2?cB.EmbedView(cA.Map(cV,cW.$0)):cW.$==1?cB.EmbedView(cA.Map(cV,cW.$0.RView())):cV(cW.$0);};bg.map4V=function(cV,cW,cX,cY,cZ){var c0;c0=bg.map3V(cV,cW,cX,cY);return((bg.map2V(function(c1){return function(c2){return c2(c1);};}))(cZ))(c0);};bg.map3V=function(cV,cW,cX,cY){var cZ;cZ=((bg.map2V(cV))(cW))(cX);return((bg.map2V(function(c0){return function(c1){return c1(c0);};}))(cY))(cZ);};bg.map2V=function(cV){function cW(cY,cZ,c0){return(cY(c0))(cZ);}function cX(cY){var cZ,c0;cZ=(c0=function(c1){var c2;c2=cV(c1);return function(c3){return bg.mapV(c2,c3);};},function(c1){return cW(c0,cY,c1);});return function(c1){return bg.bindV(cZ,c1);};}return(b7.Curried3(cW))(cX);};bg.bindV=function(cV,cW){return cW.$==2?new bg({$:2,$0:cA.Bind(function(cX){return bg.toView(cV(cX));},cW.$0)}):cW.$==1?new bg({$:2,$0:cA.Bind(function(cX){return bg.toView(cV(cX));},cW.$0.RView())}):cV(cW.$0);};bg.getAsync=function(cV){return cV.$==2?cA.GetAsync(cV.$0):cV.$==1?b2.Return(cV.$0.RVal()):b2.Return(cV.$0);};bg.toView=function(cV){return cV.$==2?cV.$0:cV.$==1?cV.$0.RView():cA.Const(cV.$0);};bg.iterV=function(cV,cW){if(cW.$==2)cA.Get(cV,cW.$0);else if(cW.$==1)cV(cW.$0.RVal());else cV(cW.$0);};bg.mapV=function(cV,cW){return cW.$==2?new bg({$:2,$0:cA.Map(cV,cW.$0)}):cW.$==1?new bg({$:2,$0:cA.Map(cV,cW.$0.RView())}):new bg({$:0,$0:cV(cW.$0)});};bj=bf.HtmlNode=b7.Class({Style:function(cV){return this.AddChildren([bf.style(cV)]);},AddClass:function(cV){return bf.addClass(cV,this);},InsertChildren:function(cV){return bf.insertChildren(cV,this);},AddChildren:function(cV){return bf.addChildren(cV,this);},get_toDoc:function(){var cV,cW,cX;return this.$==3||this.$==6?cB.Empty():(cW=bf.chooseNode(this),(cX=cB.Empty(),cW==null?cX:cW.$0));}},null,bj);bj.HtmlEmpty=new bj({$:6});bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(11,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(10,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(9,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(8,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(7,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(6,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(5,cW,cV);};bj.op_MinusMinusMinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(4,cW,cV);};bj.op_MinusMinusMinusMinus=function(cV,cW){return bf.indent2Level(3,cW,cV);};bj.op_MinusMinus=function(cV,cW){return bf.indent2Level(2,cW,cV);};bj.op_Addition=function(cV,cW){return new ch.T({$:1,$0:cW,$1:cV});};bj.op_MinusMinusMinus=function(cV,cW){return cV.$==1?cV.$1.$==1?new ch.T({$:1,$0:cV.$1.$0.AddChildren([cV.$0.AddChildren([cW])]),$1:cV.$1.$1}):ch.ofArray([cV.$0.AddChildren([cW])]):ch.T.Empty;};bj.op_Subtraction=function(cV,cW){return cV.$==0?ch.T.Empty:new ch.T({$:1,$0:cV.$0.AddChildren([cW]),$1:cV.$1});};bf.LoadFilesAsync=function(cV){function cW(cX,cY){try{a.CIPHERSpaceLoadFiles(cV,cX);}catch(cZ){cY(cZ);}}return b2.FromContinuations(function(cX,cY,cZ){return cW.apply(null,[cX,cY,cZ]);});};bf.findRootElement=function(cV){var cW;return!function(cX){return cV.getRootNode(cX);}?a.document.body:(cW=cV.getRootNode(),!cW.body?cW.firstChild:cW.body);};bf.createIFrame=function(cV){var cW;cW=cF.Create$1(true);return bf.div([bf.style("position: relative; overflow: hidden; height: 100%; width: 100%;"),bf.iframe([bf.style("position: absolute; width:100%; height:100%;"),bf.frameborder("0"),new bj({$:8,$0:cD.OnAfterRender(cV)}),new bj({$:8,$0:cD.Handler("mouseleave",function(){return function(){return cF.Set(cW,true);};})})]),bf.div([bf.style("position: absolute;"),bf.classIf("iframe-cover",bg.map(a.id,cW)),new bj({$:8,$0:cD.Handler("mouseenter",function(){return function(){return cA.Get(function(cX){if(!cX)cF.Set(cW,false);},cH.get_MousePressed());};})})]),bf.styleH([bf.htmlText(".iframe-cover { top:0; left:0; right:0; bottom:0; background: blue; opacity: 0.04; z-index: 2; }")])]);};bf.bindHElem=function(cV,cW){return new bj({$:2,$0:bg.map(cV,bg.fixit(cW))});};bf.string2Styles=function(){bX.$cctor();return bX.string2Styles;};bf.style2pairs=function(cV){return b_.map(function(cW){return[b5.Trim(b_.get(cW,0)),b5.Trim(b_.get(cW,1))];},b_.filter(function(cW){return b_.length(cW)===2;},b_.map(function(cW){return b5.SplitChars(cW,[":"],0);},b5.SplitChars(cV,[";"],0))));};bf.xclass=function(cV){var cW,cX;return new bj({$:8,$0:(cW=bg.fixit(cV),cW.$==2?cD.DynamicClass("class_for_view_not_implemented",cW.$0,function(cY){return""!==cY;}):cW.$==1?(cX=cW.$0,cD.DynamicClass(cX.RVal(),cX.RView(),function(cY){return""!==cY;})):cD.Class(cW.$0))});};bf.classIf=function(cV,cW){return bf["class"](bg.map(function(cX){return cX?cV:"";},bg.fixit(cW)));};bf.css=function(cV){return bf.styleH([bf.htmlText(cV)]);};bf.style1=function(cV,cW){var cX;return bf.style(bg.map((cX=cV+":",function(cY){return cX+cY;}),cW));};bf.placeholder=function(cV){return bf.htmlAttribute("placeholder",cV);};bf.style=function(cV){return bf.htmlAttribute("style",cV);};bf.draggable=function(cV){return bf.htmlAttribute("draggable",cV);};bf.spellcheck=function(cV){return bf.htmlAttribute("spellcheck",cV);};bf.frameborder=function(cV){return bf.htmlAttribute("frameborder",cV);};bf.Id=function(cV){return bf.htmlAttribute("id",cV);};bf.title=function(cV){return bf.htmlAttribute("title",cV);};bf.width=function(cV){return bf.htmlAttribute("width",cV);};bf.type=function(cV){return bf.htmlAttribute("type",cV);};bf["class"]=function(cV){return bf.htmlAttribute("class",cV);};bf.src=function(cV){return bf.htmlAttribute("src",cV);};bf.charset=function(cV){return bf.htmlAttribute("charset",cV);};bf.rel=function(cV){return bf.htmlAttribute("rel",cV);};bf.hrefO=function(cV){return bf.htmlAttributeO("href",cV);};bf.href=function(cV){return bf.htmlAttribute("href",cV);};bf.target=function(cV){return bf.htmlAttribute("target",cV);};bf.strong=function(cV){return bf.htmlElement("strong",cV);};bf.section=function(cV){return bf.htmlElement("section",cV);};bf.body=function(cV){return bf.htmlElement("body",cV);};bf.iframe=function(cV){return bf.htmlElement("iframe",cV);};bf.link=function(cV){return bf.htmlElement("link",cV);};bf.fieldset=function(cV){return bf.htmlElement("fieldset",cV);};bf.styleH=function(cV){return bf.htmlElement("style",cV);};bf.script=function(cV){return bf.htmlElement("script",cV);};bf.button=function(cV){return bf.htmlElement("button",cV);};bf.label=function(cV){return bf.htmlElement("label",cV);};bf.tbody=function(cV){return bf.htmlElement("tbody",cV);};bf.td=function(cV){return bf.htmlElement("td",cV);};bf.tr=function(cV){return bf.htmlElement("tr",cV);};bf.th=function(cV){return bf.htmlElement("th",cV);};bf.thead=function(cV){return bf.htmlElement("thead",cV);};bf.table=function(cV){return bf.htmlElement("table",cV);};bf.form=function(cV){return bf.htmlElement("form",cV);};bf.span=function(cV){return bf.htmlElement("span",cV);};bf.img=function(cV){return bf.htmlElement("img",cV);};bf.div=function(cV){return bf.htmlElement("div",cV);};bf.h6=function(cV){return bf.htmlElement("h6",cV);};bf.h5=function(cV){return bf.htmlElement("h5",cV);};bf.h4=function(cV){return bf.htmlElement("h4",cV);};bf.h3=function(cV){return bf.htmlElement("h3",cV);};bf.h2=function(cV){return bf.htmlElement("h2",cV);};bf.h1=function(cV){return bf.htmlElement("h1",cV);};bf.hr=function(cV){return bf.htmlElement("hr",cV);};bf.br=function(cV){return bf.htmlElement("br",cV);};bf.li=function(cV){return bf.htmlElement("li",cV);};bf.ul=function(cV){return bf.htmlElement("ul",cV);};bf.p=function(cV){return bf.htmlElement("p",cV);};bf.a=function(cV){return bf.htmlElement("a",cV);};bf.textV=function(cV){return bf.tag(cB.TextNode,cV);};bf._placeholder=function(cV){return bf.atr("placeholder",cV);};bf._style=function(cV){return bf.atr("style",cV);};bf._type=function(cV){return bf.atr("type",cV);};bf._class=function(cV){return bf.atr("class",cV);};bf.tag=function(cV,cW){return bg.tagDoc(cV,bg.fixit(cW));};bf.atr=function(cV,cW){return bg.attrV(cV,bg.fixit(cW));};bf.renderDoc=function(){bX.$cctor();return bX.renderDoc;};bf.op_BangBang=function(cV,cW){return ch.ofArray([cV(cW)]);};bf.endHtmlIndent=function(cV){var cW;cW=bf.finishO(cV);return cW==null?bf.htmlText("Malformed HTMLNode"):cW.$0;};bf.finishO=function(cV){return cV.$==1?cV.$1.$==1?bf.finishO(bf.out(cV)):{$:1,$0:cV.$0}:null;};bf.indent2Level=function(cV,cW,cX){return cX.get_Length()<cV?new ch.T({$:1,$0:cW,$1:cX}):bf.indent2Level(cV,cW,bf.out(cX));};bf.out=function(cV){return cV.$==1?cV.$1.$==1?new ch.T({$:1,$0:bf.addChildren([cV.$0],cV.$1.$0),$1:cV.$1.$1}):ch.ofArray([cV.$0]):ch.T.Empty;};bf.addClassIf=function(cV,cW){var cX;cX=bg.map(function(cY){return cY?cV:"";},bg.fixit(cW));return function(cY){return bf.addClass(cX,cY);};};bf.addClass=function(cV,cW){return bf.addChildren(ch.ofArray([bf.htmlAttribute("class",cV)]),cW);};bf.insertChildren=function(cV,cW){function cX(cY,cZ){return[cY,b3.append(cV,cZ)];}return bf.mapHtmlElement(function(cY){return function(cZ){return cX(cY,cZ);};},cW);};bf.addChildren=function(cV,cW){function cX(cY,cZ){return[cY,b3.append(cZ,cV)];}return bf.mapHtmlElement(function(cY){return function(cZ){return cX(cY,cZ);};},cW);};bf.someElt=function(cV){return new bj({$:7,$0:cV});};bf.str=function(cV){return new bj({$:5,$0:bg.fixit(cV)});};bf.htmlText=function(cV){return new bj({$:5,$0:bg.fixit(cV)});};bf.htmlAttributeO=function(cV,cW){return new bj({$:4,$0:cV,$1:bg.fixit(cW)});};bf.htmlAttribute=function(cV,cW){return new bj({$:3,$0:cV,$1:bg.fixit(cW)});};bf.htmlElementF=function(cV,cW){return new bj({$:1,$0:cV,$1:cW});};bf.htmlElement=function(cV,cW){return new bj({$:0,$0:cV,$1:cW});};bf.mapHtmlElement=function(cV,cW){var cX;return cW.$==0?(cX=(cV(cW.$0))(cW.$1),new bj({$:0,$0:cX[0],$1:cX[1]})):cW.$==2?new bj({$:2,$0:bg.map(function(cY){return bf.mapHtmlElement(cV,cY);},cW.$0)}):cW;};bf.getAttrChildren=function(cV){var cW,cX,cY;function cZ(c0){var c1;return c0.$==3&&(c0.$0===cV&&(c1=[c0.$0,c0.$1],true))?{$:1,$0:c1[1]}:null;}cW=function(c0){return b3.tryPick(cZ,c0);};cX=(cY=new bg({$:0,$0:""}),function(c0){return c0==null?cY:c0.$0;});return function(c0){return cX(cW(c0));};};bf.chooseNode=function(cV){var cW,cX,cY,cZ,c0;return cV.$==0?(cW=cV.$1,{$:1,$0:cB.Element(cV.$0,bf.getAttrsFromSeq(cW),b3.choose(bf.chooseNode,cW))}):cV.$==1?(cX=cV.$1,{$:1,$0:(cV.$0(bf.getAttrsFromSeq(cX)))(b3.choose(bf.chooseNode,cX))}):cV.$==2?{$:1,$0:(cY=bg.toView(cV.$0),cB.BindView((cZ=(c0=cB.Empty(),function(c1){return c1==null?c0:c1.$0;}),function(c1){return cZ(bf.chooseNode(c1));}),cY))}:cV.$==5?{$:1,$0:bg.tagDoc(cB.TextNode,cV.$0)}:cV.$==7?{$:1,$0:cV.$0}:null;};bf.getAttrsFromSeq=function(cV){var cW;cW=b3.choose(bf.chooseAttr,cV);return b3.append(ch.choose(a.id,ch.ofArray([bf.groupAttr("class"," ",cV),bf.groupAttr("style","; ",cV)])),cW);};bf.groupAttr=function(cV,cW,cX){var cY,cZ;function c0(c1,c2){return bf.concat(cW,c1,c2);}cY=b3.choose(function(c1){return bf.chooseThisAttr(cV,c1);},cX);return b3.isEmpty(cY)?null:{$:1,$0:bg.attrV(cV,(cZ=(b7.Curried3(bg.map2))(function(c1){return function(c2){return c0(c1,c2);};}),b3.reduce(function(c1,c2){return(cZ(c1))(c2);},cY)))};};bf.concat=function(cV,cW,cX){return cW+cV+cX;};bf.chooseThisAttr=function(cV,cW){var cX;return cW.$==3&&(cW.$0===cV&&(cX=[cW.$0,cW.$1],true))?{$:1,$0:cX[1]}:null;};bf.chooseAttr=function(cV){var cW,cX,cY,cZ;return cV.$==3&&((cX=cV.$0,cX!=="class"&&cX!=="style")&&(cW=[cV.$0,cV.$1],true))?{$:1,$0:bg.attrV(cW[0],cW[1])}:cV.$==4&&((cZ=cV.$0,cZ!=="class"&&cZ!=="style")&&(cY=[cV.$0,cV.$1],true))?{$:1,$0:bg.attrVO(cY[0],cY[1])}:cV.$==8?{$:1,$0:cV.$0}:null;};bf.addClassX=function(cV,cW){var cX;return b5.concat(" ",(cX=new cI.New$1(cJ.OfSeq(b5.SplitChars(cV,[" "],0))),new cI.New$1(cJ.OfSeq(b3.append(new cI.New$1(cJ.OfSeq(b5.SplitChars(cW,[" "],0))),cX)))));};bl=bk.Button=b7.Class({OnClick:function(cV){return bl.New(this._class,this._type,this.style,this.text,cV,this.disabled,this.id);},Disabled:function(cV){return bl.New(this._class,this._type,this.style,this.text,this.onClick,bg.fixit(cV),this.id);},Text:function(cV){return bl.New(this._class,this._type,this.style,bg.fixit(cV),this.onClick,this.disabled,this.id);},Style:function(cV){return bl.New(this._class,this._type,bg.fixit(cV),this.text,this.onClick,this.disabled,this.id);},Type:function(cV){return bl.New(this._class,bg.fixit(cV),this.style,this.text,this.onClick,this.disabled,this.id);},Class:function(cV){return bl.New(bg.fixit(cV),this._type,this.style,this.text,this.onClick,this.disabled,this.id);},Id:function(cV){return bl.New(this._class,this._type,this.style,this.text,this.onClick,this.disabled,cV);},get_Render:function(){var cV,cW;return new bj({$:7,$0:(cV=bf.button([bf.type(this._type),bf["class"](this._class),bf.Id(this.id),bf.style(this.style),new bj({$:8,$0:(cW=cA.Const(""),cD.DynamicPred("disabled",bg.toView(this.disabled),cW))}),new bj({$:8,$0:cE.Handler("click",this.onClick)}),new bj({$:5,$0:this.text})]),(bf.renderDoc())(cV))});}},null,bl);bl.New$1=function(cV){return bl.New(bg.fixit("btn"),bg.fixit("button"),bg.fixit(""),bg.fixit(cV),function(){return function(){return null;};},bg.fixit(false),"");};bl.New=function(cV,cW,cX,cY,cZ,c0,c1){return new bl({_class:cV,_type:cW,style:cX,text:cY,onClick:cZ,disabled:c0,id:c1});};bm=bk.Input=b7.Class({get_Var:function(){return this["var"];},Disabled:function(cV){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,bg.fixit(cV));},SetVar:function(cV){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,cV,this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Suffix:function(cV){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,cV,this.content,this.prefixAdded,true,this.disabled);},Prefix:function(cV){return this.Prefix$1(bf.htmlText(cV));},Prefix$1:function(cV){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],cV,this.suffix,this.content,true,this.suffixAdded,this.disabled);},Content:function(cV){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,cV,this.prefixAdded,this.suffixAdded,this.disabled);},Id:function(cV){return bm.New(this._type,this._class,this.style,this.placeholder,cV,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Placeholder:function(cV){return bm.New(this._type,this._class,this.style,bg.fixit(cV),this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Style:function(cV){return bm.New(this._type,this._class,bg.fixit(cV),this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Type:function(cV){return bm.New(bg.fixit(cV),this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},Class:function(cV){return bm.New(this._type,bg.fixit(cV),this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded,this.disabled);},get_Render:function(){var cV;function cW(cX){return cX.$==5?"input-group-addon":"input-group-btn";}cV=this;return bf.div(ch.ofSeq(b3.delay(function(){return b3.append(cV.prefixAdded||cV.suffixAdded?[bf["class"]("input-group")]:[],b3.delay(function(){return b3.append(cV.prefixAdded?[bf.span([bf["class"](cW(cV.prefix)),cV.prefix])]:[],b3.delay(function(){var cX;return b3.append([new bj({$:7,$0:cB.Input(b3.append(cV.content,ch.ofArray([bf._type(cV._type),bf._class(cV._class),bf._style(cV.style),cE.Create("id",cV.id),(cX=cA.Const(""),cD.DynamicPred("disabled",bg.toView(cV.disabled),cX)),bf._placeholder(cV.placeholder)])),cV["var"])})],b3.delay(function(){return cV.suffixAdded?[bf.span([bf["class"](cW(cV.suffix)),cV.suffix])]:[];}));}));}));})));}},null,bm);bm.New$1=function(cV){return bm.New$3(cF.Lens(cV,function(cW){return cW==null?"":cW.$0;},function(cW,cX){return cW==null?null:{$:1,$0:cX};})).Disabled(bg.map(function(cW){return cW==null;},cV));};bm.New$2=function(cV){return bm.New$3(cF.Create$1(cV));};bm.New$3=function(cV){var cW;cW=bg.fixit("form-control");return bm.New(bg.fixit("text"),cW,bg.fixit(""),bg.fixit("Enter text:"),"",cV,bj.HtmlEmpty,bj.HtmlEmpty,ch.T.Empty,false,false,bg.fixit(false));};bm.New=function(cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6){return new bm({_type:cV,_class:cW,style:cX,placeholder:cY,id:cZ,"var":c0,prefix:c1,suffix:c2,content:c3,prefixAdded:c4,suffixAdded:c5,disabled:c6});};bn=bk.Hoverable=b7.Class({Content:function(cV){var cW;cW=this;return cV.AddChildren([bf.classIf("hovering",this.hover),new bj({$:8,$0:cD.Handler("mouseenter",function(){return function(){return cW.hover.set_RVal(true);};})}),new bj({$:8,$0:cD.Handler("mouseleave",function(){return function(){return cW.hover.set_RVal(false);};})})]);},Content$1:function(cV){var cW;cW=this;return bf.div(b3.append(cV,ch.ofArray([bf.classIf("hovering",this.hover),new bj({$:8,$0:cD.Handler("mouseenter",function(){return function(){return cW.hover.set_RVal(true);};})}),new bj({$:8,$0:cD.Handler("mouseleave",function(){return function(){return cW.hover.set_RVal(false);};})})])));}},null,bn);bn.get_Demo=function(){return bn.get_New().Content(bf.div([bf.style("flex-flow: column;")]));};bn.get_New=function(){return bn.New(cF.Create$1(false));};bn.New=function(cV){return new bn({hover:cV});};bo=bk.Panel=b7.Class({Disabled:function(cV){return bo.New(this._class,this._style,this.title,this.header,this.content,cV);},Content:function(cV){return bo.New(this._class,this._style,this.title,this.header,cV,this.disabled);},Header:function(cV){return bo.New(this._class,this._style,this.title,cV,this.content,this.disabled);},Title:function(cV){return bo.New(this._class,this._style,bg.fixit(cV),this.header,this.content,this.disabled);},Style:function(cV){return bo.New(this._class,bg.fixit(cV),this.title,this.header,this.content,this.disabled);},Class:function(cV){return bo.New(bg.fixit(cV),this._style,this.title,this.header,this.content,this.disabled);},get_Render:function(){var cV;return bf.fieldset([new bj({$:8,$0:(cV=cA.Const(""),cD.DynamicPred("disabled",bg.toView(this.disabled),cV))}),bf.div([bf["class"](this._class),bf.div(b3.append([bf["class"]("panel-heading"),bf.label([bf["class"]("panel-title text-center"),bf.htmlText(this.title)])],this.header)),bf.div(b3.append([bf["class"]("panel-body"),bf.style(this._style)],this.content))])]);}},null,bo);bo.get_New=function(){return bo.New(bg.fixit("panel panel-default shadow"),bg.fixit("text-align:center"),bg.fixit("Panel"),ch.ofArray([bf.htmlText("Some text")]),ch.ofArray([bf.htmlText("Some Content")]),bg.fixit(cF.Create$1(false)));};bo.New=function(cV,cW,cX,cY,cZ,c0){return new bo({_class:cV,_style:cW,title:cX,header:cY,content:cZ,disabled:c0});};bp=bk.TextArea=b7.Class({get_Var:function(){return this["var"];},Disabled:function(cV){return bp.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,this["var"],bg.fixit(cV));},SetVar:function(cV){return bp.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,cV,this.disabled);},Id:function(cV){return bp.New(this._class,this.placeholder,this.title,this.spellcheck,cV,this["var"],this.disabled);},Spellcheck:function(cV){return bp.New(this._class,this.placeholder,this.title,cV,this.id,this["var"],this.disabled);},Title:function(cV){return bp.New(this._class,this.placeholder,bg.fixit(cV),this.spellcheck,this.id,this["var"],this.disabled);},Placeholder:function(cV){return bp.New(this._class,bg.fixit(cV),this.title,this.spellcheck,this.id,this["var"],this.disabled);},Class:function(cV){return bp.New(bg.fixit(cV),this.placeholder,this.title,this.spellcheck,this.id,this["var"],this.disabled);},get_Render:function(){return this.RenderWith(ch.T.Empty);},RenderWith:function(cV){var cW,cX;cW=this;return bf.div([bf.htmlElementF(function(cY){return function(){return cB.InputArea(cY,cW["var"]);};},ch.append(ch.ofArray([bf["class"](this._class),bf.Id(this.id),bf.spellcheck(bg.map(function(cY){return cY?"true":"false";},this.spellcheck)),bf.title(this.title),bf.style("height: 100%;  width: 100%; box-sizing: border-box; "),bf.placeholder(this.placeholder),new bj({$:8,$0:(cX=cA.Const(""),cD.DynamicPred("disabled",bg.toView(this.disabled),cX))})]),cV))]);}},null,bp);bp.New$1=function(cV){return bp.New$3(cF.Lens(cV,function(cW){return cW==null?"":cW.$0;},function(cW,cX){return cW==null?null:{$:1,$0:cX};})).Disabled(bg.map(function(cW){return cW==null;},cV));};bp.New$2=function(cV){return bp.New$3(cF.Create$1(cV));};bp.New$3=function(cV){return bp.New(bg.fixit("form-control"),bg.fixit("Enter text:"),bg.fixit(""),bg.fixit(false),"",cV,bg.fixit(false));};bp.New=function(cV,cW,cX,cY,cZ,c0,c1){return new bp({_class:cV,placeholder:cW,title:cX,spellcheck:cY,id:cZ,"var":c0,disabled:c1});};bq.New=function(cV,cW){return{line:cV,ch:cW};};br=bk.CodeMirrorEditor=b7.Class({},i,br);br.New=b7.Ctor(function(){},br);bs=bk.CodeMirror=b7.Class({get_Var:function(){return this["var"];},Disabled:function(cV){return bs.New(this._class,this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO,bg.fixit(cV));},OnRender:function(cV){return bs.New(this._class,this.style,this.id,this["var"],this.onChange,{$:1,$0:cV},this.editorO,this.disabled);},OnChange:function(cV){return bs.New(this._class,this.style,this.id,this["var"],cV,this.onRender,this.editorO,this.disabled);},Style:function(cV){return bs.New(this._class,bg.fixit(cV),this.id,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},SetVar:function(cV){return bs.New(this._class,this.style,this.id,cV,this.onChange,this.onRender,this.editorO,this.disabled);},Id:function(cV){return bs.New(this._class,this.style,cV,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},Class:function(cV){return bs.New(bg.fixit(cV),this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO,this.disabled);},get_Render:function(){var cV;cV=this;return bf.div([bf["class"](this._class),new bj({$:8,$0:cE.Create("id",this.id)}),bf.style("position: relative; height: 300px"),bf.style(this.style),bf.div([bf.style("height: 100%; width: 100%; position: absolute;"),new bj({$:8,$0:cD.OnAfterRender(function(cW){a.CIPHERSpaceLoadFiles(bk.codeMirrorIncludes(),function(){var cX,cY,cZ,c0;cX=a.CodeMirror(cW,{theme:"rubyblue",lineNumbers:true,matchBrackets:true,gutters:["CodeMirror-lint-markers"],extraKeys:{Tab:function(c1){c1.replaceSelection("    ","end");},F11:function(c1){c1.setOption("fullScreen",!c1.getOption("fullScreen"));}}});cV.editorO={$:1,$0:cX};cY=cV.onRender;cY==null?void 0:cY.$0(cX);cZ=[0];c0=[0];cX.on("changes",function(){var c1;c1=cX.getValue();cV["var"].RVal()!==c1?(cZ[0]=cZ[0]+1,cV["var"].set_RVal(c1),cV.onChange()):void 0;});cA.Sink(function(){if(cZ[0]>c0[0])c0[0]=cZ[0];else if(cX.getValue()!==cV["var"].RVal()){cX.setValue(cV["var"].RVal());cX.getDoc().clearHistory();}},cV["var"].RView());bg.sink(function(c1){cX.setOption("readOnly",c1&&"nocursor");},cV.disabled);});})})]),bf.link([bf.href("/EPFileX/codemirror/content/editor.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/content/codemirror.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/display/fullscreen.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/dialog/dialog.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/hint/show-hint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/lint/lint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css(".CodeMirror { height: 100% }")]);}},null,bs);bs.New$1=function(cV){return bs.New$3(cF.Lens(cV,function(cW){return cW==null?"":cW.$0;},function(cW,cX){return cW==null?null:{$:1,$0:cX};})).Disabled(bg.map(function(cW){return cW==null;},cV));};bs.New$2=function(cV){return bs.New$3(cF.Create$1(cV));};bs.New$3=function(cV){return bs.New(bg.fixit(""),bg.fixit(""),"",cV,a.ignore,null,null,bg.fixit(false));};bs.New=function(cV,cW,cX,cY,cZ,c0,c1,c2){return new bs({_class:cV,style:cW,id:cX,"var":cY,onChange:cZ,onRender:c0,editorO:c1,disabled:c2});};bt.New=function(cV,cW,cX){return{text:cV,displayText:cW,className:cX};};bu.New=function(cV,cW,cX){return{list:cV,from:cW,to:cX};};bv.New=function(cV,cW,cX){return{hint:cV,completeSingle:cW,container:cX};};bw.New=function(cV,cW,cX,cY){return{message:cV,severity:cW,from:cX,to:cY};};bx=bk.SplitterBar=b7.Class({Children:function(cV){return bx.New(this.value,this.min,this.max,this.vertical,this.node,cV,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_After:function(){return bx.New(this.value,this.min,this.max,this.vertical,this.node,this.children,true,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_Before:function(){return bx.New(this.value,this.min,this.max,this.vertical,this.node,this.children,false,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal:function(){return bx.New(this.value,this.min,this.max,bg.fixit(false),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical:function(){return bx.New(this.value,this.min,this.max,bg.fixit(true),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal$1:function(cV){return bx.New(this.value,this.min,this.max,bg.map(function(cW){return!cW;},bg.fixit(cV)),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical$1:function(cV){return bx.New(this.value,this.min,this.max,bg.fixit(cV),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Max:function(cV){return bx.New(this.value,this.min,bg.fixit(cV),this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Min:function(cV){return bx.New(this.value,bg.fixit(cV),this.max,this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Node:function(cV){return bx.New(this.value,this.min,this.max,this.vertical,cV,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Value:function(cV){this.value.set_RVal(cV);return this;},get_Render:function(){var cV;function cW(c1){return cV.startVer?c1.clientX:c1.clientY;}function cX(){var c1;c1=cV.domElem;return c1!=null&&c1.$==1?cV.startVer?cV.after?c1.$0.parentElement.getBoundingClientRect().width:-c1.$0.parentElement.getBoundingClientRect().width:cV.after?c1.$0.parentElement.getBoundingClientRect().height:-c1.$0.parentElement.getBoundingClientRect().height:100;}function cY(c1){cV.value.set_RVal((cW(c1)-cV.start)*100/cV.size+cV.startP);}function cZ(){if(cV.dragging){cV.dragging=false;a.removeEventListener("mousemove",cY,false);a.removeEventListener("mouseup",cZ,false);}}function c0(c1,c2){return!cV.dragging?bg.iter(a.ignore,bg.map2(function(c3){return function(c4){cV.dragging=true;cV.startVer=c4;cV.startP=c3;cV.start=cW(c2);cV.size=cX();a.addEventListener("mousemove",cY,false);a.addEventListener("mouseup",cZ,false);return c2.preventDefault();};},cV.get_GetValue(),cV.vertical)):null;}cV=this;return this.node.AddChildren([bf["class"](bg.map(function(c1){return c1?"Vertical":"Horizontal";},this.vertical)),new bj({$:8,$0:cD.Handler("mousedown",function(c1){return function(c2){return c0(c1,c2);};})}),new bj({$:8,$0:cD.OnAfterRender(function(c1){cV.domElem={$:1,$0:c1};})}),bf.css("\n                    .Splitter.Vertical   { cursor: col-resize; background-color: #eef ; width : 5px ; margin-left:-7px; }\n                    .Splitter.Horizontal { cursor: row-resize; background-color: #eef ; height: 5px ; margin-top :-7px; }\n                ")]).AddChildren(this.children);},get_GetValue:function(){function cV(cX,cY){return b4.Compare(cX,cY)===-1?cX:cY;}function cW(cX,cY){return b4.Compare(cX,cY)===1?cX:cY;}return bg.map2(function(cX){return function(cY){return cV(cX,cY);};},this.max,bg.map2(function(cX){return function(cY){return cW(cX,cY);};},this.min,this.value));},get_Var:function(){return this.value;}},null,bx);bx.New$1=function(cV){return bx.New$2(cF.Create$1(cV));};bx.New$2=function(cV){return bx.New(cV,bg.fixit(5),bg.fixit(95),bg.fixit(true),bf.div([bf["class"]("Splitter")]),ch.T.Empty,true,false,true,0,0,0,null);};bx.New=function(cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7){return new bx({value:cV,min:cW,max:cX,vertical:cY,node:cZ,children:c0,after:c1,dragging:c2,startVer:c3,startP:c4,start:c5,size:c6,domElem:c7});};by.StFixedPerc={$:2};by.StFixedPx={$:1};by.StVariable={$:0};bz=bk.Grid=b7.Class({get_Render:function(){return bf.div(this.GridTemplate());},GridTemplate:function(){var cV;cV=this;return ch.ofSeq(b3.delay(function(){function cW(cX,cY){return cX!=null&&cX.$==1?cY.AddChildren([bf.style((function(cZ){return function(c0){return cZ("grid-area: "+b8.toSafe(c0)+"; dispxlay: grid");};}(a.id))(cX.$0))]):cY;}return b3.append(b3.map(function(cX){return cW(cX[0],cX[1]);},cV.content),b3.delay(function(){function cX(cY,cZ){var c0;return cZ.$==2?(c0=cZ.$0,{$:1,$0:c0.get_Render().InsertChildren([bf.style1("grid-column",a.String(cY+(c0.after?2:1))),bf.style1("grid-row",(function(c1){return function(c2){return c1("1 / "+a.String(c2));};}(a.id))(b_.length(cV.rows)+1))])}):cZ.$==1?null:null;}return b3.append(b3.choose(function(cY){return cX(cY[0],cY[1]);},b3.indexed(cV.cols)),b3.delay(function(){function cY(cZ,c0){var c1;return c0.$==2?(c1=c0.$0,{$:1,$0:c1.get_Render().InsertChildren([bf.style1("grid-row",a.String(cZ+(c1.after?2:1))),bf.style1("grid-column",(function(c2){return function(c3){return c2("1 / "+a.String(c3));};}(a.id))(b_.length(cV.cols)+1))])}):c0.$==1?null:null;}return b3.append(b3.choose(function(cZ){return cY(cZ[0],cZ[1]);},b3.indexed(cV.rows)),b3.delay(function(){return b3.append(cV.styles(),b3.delay(function(){return b3.append([bf.style((((b7.Curried3(function(cZ,c0,c1){return cZ("display: grid; grid-gap: "+c0.toFixed(6)+"px; padding: "+c1.toFixed(6)+"px; box-sizing: border-box");}))(a.id))(cV.gap))(cV.padding))],b3.delay(function(){return[new bj({$:8,$0:cD.OnAfterRender(function(cZ){function c0(c2,c3){return!b4.Equals(c2.RVal(),c3)?c2.set_RVal(c3):null;}function c1(){var c2;c2=cZ.getBoundingClientRect();c0(cV.widthHeight,[c2.width,c2.height]);}c1();bk.addResizeObserver(c1,cZ);})})];}));}));}));}));}));}));},styles:function(){return ch.ofArray([bf.style1("grid-template-columns",this.style(this.cols,bg.map(function(cV){return cV[0];},this.widthHeight))),bf.style1("grid-template-rows",this.style(this.rows,bg.map(function(cV){return cV[1];},this.widthHeight)))]);},style:function(cV,cW){var cX,cY,cZ,c0;function c1(c4,c5){return function(c6){return c6.$==2?[bg.map2(function(c7){return function(c8){return c7+c8;};},c6.$0.get_GetValue(),c4),c5]:c6.$==1?c6.$0.$==1?[c4,bg.map2(function(c7){return function(c8){return c7+c8;};},c6.$0.$0,c5)]:[bg.map2(function(c7){return function(c8){return c7+c8;};},c6.$0.$0,c4),c5]:[c4,c5];};}function c2(c4){return bg.map2(function(c5){return function(c6){var c7,c8,c9;c7=(c8=c5*c6,(c9=0,b4.Compare(c9,c8)===1?c9:c8));return(function(c_){return function(c$){return c_(c$.toFixed(6)+"%");};}(a.id))(c7);};},cZ,c4);}function c3(c4){return bg.map(function(c5){var c6,c7;c6=(c7=0,b4.Compare(c7,c5)===1?c7:c5);return(function(c8){return function(c9){return c8(c9.toFixed(6)+"px");};}(a.id))(c6);},c4);}cX=this;return b_.length(cV)===0?new bg({$:0,$0:"100%"}):(cY=b3.fold(function(c4,c5){return(function(c6){return c1(c6[0],c6[1]);}(c4))(c5);},[new bg({$:0,$0:0}),new bg({$:0,$0:0})],cV),(cZ=bg.map2(function(c4){return function(c5){return(c5-cX.padding*2-cX.gap*(b_.length(cV)-1)-c4)/(c5-cX.padding*2);};},cY[1],cW),(c0=bg.map(function(c4){return 100-c4;},cY[0]),bg.map(function(c4){return b5.concat(" ",c4);},b3.foldBack(function(c4,c5){function c6(c7,c8){return new ch.T({$:1,$0:c8,$1:c7});}return bg.map2(function(c7){return function(c8){return c6(c7,c8);};},c5,c4.$==2?c2(c4.$0.get_GetValue()):c4.$==1?c4.$0.$==1?c3(c4.$0.$0):c2(c4.$0.$0):c2(c0));},cV,new bg({$:0,$0:ch.T.Empty}))))));},Children:function(cV){return this.changeSplitter(function(cW){return cW.Children(cV);});},Min:function(cV){return this.changeSplitter(function(cW){return cW.Min(cV);});},Max:function(cV){return this.changeSplitter(function(cW){return cW.Max(cV);});},get_Before:function(){return this.changeSplitter(function(cV){return cV.get_Before();});},changeSplitter:function(cV){var cW,cX,cY,cZ,c0,c1;cW=this;cX=this.lastSplitter;cX==null?void 0:(cY=cX.$0,cZ=cY[0],cY[1]?(c0=b_.get(cW.cols,cZ),c0.$==2?b_.set(cW.cols,cZ,{$:2,$0:cV(c0.$0)}):void 0):(c1=b_.get(cW.rows,cZ),c1.$==2?b_.set(cW.rows,cZ,{$:2,$0:cV(c1.$0)}):void 0));return this;},Gap:function(cV){return bz.New(this.padding,cV,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Padding:function(cV){return bz.New(cV,this.gap,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content:function(cV){return bz.New(this.padding,this.gap,this.content.concat([[null,cV]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content$1:function(cV,cW){return bz.New(this.padding,this.gap,this.content.concat([[{$:1,$0:cV},cW]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},RowAuto:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:0,$0:bx.New$1(cV).Horizontal()}]),this.widthHeight,this.lastSplitter);},RowVariable:function(cV){return this.NewSplitter$1(cV,false);},RowVariable$1:function(cV){return this.NewSplitter(cV,false);},RowVariable$2:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cV}]),this.widthHeight,this.lastSplitter);},RowFixed:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:0,$0:bg.fixit(cV)}}]),this.widthHeight,this.lastSplitter);},RowFixedPx:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:1,$0:bg.fixit(cV)}}]),this.widthHeight,this.lastSplitter);},ColAuto:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:0,$0:bx.New$1(cV)}]),this.rows,this.widthHeight,this.lastSplitter);},ColVariable:function(cV){return this.NewSplitter$1(cV,true);},ColVariable$1:function(cV){return this.NewSplitter(cV,true);},ColVariable$2:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cV}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixed:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:0,$0:bg.fixit(cV)}}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixedPx:function(cV){return bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:1,$0:bg.fixit(cV)}}]),this.rows,this.widthHeight,this.lastSplitter);},NewSplitter:function(cV,cW){return this.NewSplitter$1(cF.Create$1(cV),cW);},NewSplitter$1:function(cV,cW){var cX,cY,cZ;cX=bx.New$2(cV);return cW?(cY={$:1,$0:[b_.length(this.cols),cW]},bz.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cX}]),this.rows,this.widthHeight,cY)):(cZ={$:1,$0:[b_.length(this.rows),cW]},bz.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cX.Horizontal()}]),this.widthHeight,cZ));}},null,bz);bz.NewBisect=function(cV,cW,cX,cY,cZ,c0){var c1,c2,c3;c1=cX?[cW.$==1?function(c4){return c4.ColFixedPx(cY);}:cW.$==2?function(c4){return c4.ColFixed(cY);}:function(c4){return c4.ColVariable(cY);},function(c4){return c4.ColAuto(50);},function(c4){return c4.Content(bf.style("grid-template-areas: 'one   two' "));}]:[cW.$==1?function(c4){return c4.RowFixedPx(cY);}:cW.$==2?function(c4){return c4.RowFixed(cY);}:function(c4){return c4.RowVariable(cY);},function(c4){return c4.RowAuto(50);},function(c4){return c4.Content(bf.style("grid-template-areas: 'one' 'two' "));}];c2=c1[0];c3=c1[1];return(cV?function(c4){return c3(c2(c4));}:function(c4){return c2(c3(c4));})(c1[2](bz.get_New().Content$1("one",cZ).Content$1("two",c0).Padding(0)));};bz.get_New=function(){return bz.New(9,9,[],[],[],cF.Create$1([1000,100]),null);};bz.New=function(cV,cW,cX,cY,cZ,c0,c1){return new bz({padding:cV,gap:cW,content:cX,cols:cY,rows:cZ,widthHeight:c0,lastSplitter:c1});};bA=bk.TabStrip=b7.Class({get_Render:function(){var cV,cW,cX,cY;cV=this;cW=bf.bindHElem(function(cZ){return bf.div(ch.ofSeq(b3.delay(function(){return b3.append([bf["class"]((((b7.Curried3(function(c0,c1,c2){return c0("tab-strip "+b8.toSafe(c1)+" "+b8.toSafe(c2));}))(a.id))(cV.top?"top":"bottom"))(cV.horizontal?"horizontal":"vertical"))],b3.delay(function(){return b3.collect(function(c0){var c1;c1=c0[0];return[bn.get_New().Content(bf.div([bf.htmlText(c0[1][1][0]),bf["class"](bg.map(function(c2){return"tab"+(c2===c1?" selected":"");},cV.selected)),bf.draggable("true"),new bj({$:8,$0:cD.Handler("dragover",function(){return function(c2){return c2.preventDefault();};})}),new bj({$:8,$0:cD.Handler("drag",function(){return function(){(bk.draggedTab())[0]={$:1,$0:[cV,c1]};};})}),new bj({$:8,$0:cD.Handler("drop",function(){return function(c2){c2.preventDefault();c2.stopPropagation();return cV.reorder(c1);};})}),new bj({$:8,$0:cD.Handler("click",function(){return function(){return cV.selected.set_RVal(c1);};})})]))];},b3.indexed(cZ));}));})));},this.tabs);bg.sink((cX=this.id,function(cZ){bk.setSelectedPanel(cX,cZ);}),this.get_Selected());cY=bf.bindHElem(function(cZ){return bf.div(ch.ofSeq(b3.delay(function(){return b3.append([bf["class"]("tab-children")],b3.delay(function(){return b3.append([bf.Id(bk.uid2s(cV.id))],b3.delay(function(){function c0(c1,c2){return c2[1].AddChildren([bf.style(bg.map(function(c3){return b3.contains(c1,b3.map(function(c4){return c4[1];},ct.ToSeq(c3)))?"":"display : none";},bk.selectedPanels())),bf.Id(bk.uid2s(c1))]);}return b3.map(function(c1){return c0(c1[0],c1[1]);},cZ);}));}));})));},this.tabs);return bf.div([bf["class"]("tab-panel"),this.top?cW:bj.HtmlEmpty,bf.div([cY,bf["class"]("tab-content")]),!this.top?cW:bj.HtmlEmpty,new bj({$:8,$0:cD.Handler("dragover",function(){return function(cZ){return cZ.preventDefault();};})}),new bj({$:8,$0:cD.Handler("drop",function(){return function(cZ){cZ.preventDefault();return cV.reorder(b_.length(cV.tabs.RVal()));};})}),bf.css("\n    \n    .tab-panel {\n     overflow  : hidden   ;\n     display   : flex     ;\n     flex-flow : column   ;\n     background: lightgray;\n    }\n    .tab-content {\n     flex      : 1 1     ;\n     overflow  : auto    ;\n     position  : relative;\n    }\n    .tab-children {\n     height    : 100%    ;\n     width     : 100%    ;\n     position  : absolute;\n     display   : grid    ;\n    }\n    .tab-strip {\n     padding   : 0pt     ;\n     flex      : 0 0     ;\n    }\n    .tab {\n     border     : 0.2pt solid transparent;\n     padding    : 0pt 4pt;\n     display    : inline-block;\n     font-family: sans-serif;\n     font-weight: 200;\n     font-size  : small;\n     color      : #666;\n     cursor     : pointer;\n    }\n    .top>.tab {\n     border-radius: 2pt 2pt 0pt 0pt;\n     border-bottom-width: 0pt;\n     vertical-align: bottom;\n    }\n    .bottom>.tab {\n     border-top-width: 0pt;\n     border-radius: 0pt 0pt 2pt 2pt;\n     vertical-align: top;\n    }\n    .horizontal>.tab:not(:first-child) {\n     border-left-width: 0pt;\n    }\n    .tab.hovering {\n     background: red;\n    }\n    .tab.selected {\n     background: white;\n     border-left-width: 0.2pt;\n     color: black;\n     font-weight: 500;\n     border-color: black;\n    }\n    .horizontal>.tab.selected {\n     border-left-width: 0.2pt;\n    }\n    ")]);},Select:function(cV){var cW,cX;function cY(cZ,c0){return b4.Equals(c0[0],cV)?(cW.selected.set_RVal(cZ),{$:1,$0:true}):null;}cW=this;cX=b3.tryPick(function(cZ){return cY(cZ[0],cZ[1]);},b3.indexed(this.tabs.RVal()));return cX==null?false:cX.$0;},Select$1:function(cV){var cW,cX;function cY(cZ,c0){return c0[1][0]===cV?(cW.selected.set_RVal(cZ),{$:1,$0:true}):null;}cW=this;cX=b3.tryPick(function(cZ){return cY(cZ[0],cZ[1]);},b3.indexed(this.tabs.RVal()));return cX==null?false:cX.$0;},Select$2:function(cV){this.selected.set_RVal(cV);},get_Selected:function(){return bg.map2(function(cV){return function(cW){var cX;cX=b3.tryItem(cW,cV);return cX==null?null:{$:1,$0:cX.$0[0]};};},this.tabs,this.selected);},get_Vertical:function(){return bA.New(this.selected,this.tabs,this.top,false,this.id);},get_Horizontal:function(){return bA.New(this.selected,this.tabs,this.top,true,this.id);},SetTop:function(cV){return bA.New(this.selected,this.tabs,cV,this.horizontal,this.id);},get_Bottom:function(){return bA.New(this.selected,this.tabs,false,this.horizontal,this.id);},get_Top:function(){return bA.New(this.selected,this.tabs,true,this.horizontal,this.id);},reorder:function(cV){var cW,cX,cY;cY=(bk.draggedTab())[0];if(cY!=null&&cY.$==1){if(!b4.Equals(cY.$0[0].id,this.id))this.moveTab(cY.$0[0],cY.$0[1],cV);else if(cY!=null&&cY.$==1){cW=cY.$0[1];this.tabs.set_RVal(bk.reorderArray(this.tabs.RVal(),cW,cV));cX=this.selected.RVal();this.selected.set_RVal(cX===cW?cV:cX<cW&&cX<cV||cX>cW&&cX>cV?cX:cX<cW?cX+1:cX-1);}else throw new cK.New("Compiled\\FSharpStation2\\FSharpStation.fs",4141,18);}else void 0;},moveTab:function(cV,cW,cX){var cY,cZ,c0,c1;cY=this.tabs.RVal();cZ=cV.tabs.RVal();c0=b_.collect(a.id,[cx.array(cY,{$:1,$0:0},{$:1,$0:cX-1}),[b_.get(cZ,cW)],cx.array(cY,{$:1,$0:cX},{$:1,$0:b_.length(cY)-1})]);c1=b_.collect(a.id,[cx.array(cZ,{$:1,$0:0},{$:1,$0:cW-1}),cx.array(cZ,{$:1,$0:cW+1},{$:1,$0:b_.length(cZ)-1})]);cV.tabs.set_RVal(c1);this.tabs.set_RVal(c0);this.selected.set_RVal(cX);cV.selected.RVal()>=b_.length(c1)?cV.selected.set_RVal(0):void 0;bk.RaiseTabMoved(cV,this);}},null,bA);bA.New$1=function(cV){return bA.New$2(cF.Create$1(b_.ofSeq(b3.map(function(cW){return[cg.NewGuid(),cW];},cV))));};bA.New$2=function(cV){return bA.New(cF.Create$1(0),cV,false,true,cg.NewGuid());};bA.New=function(cV,cW,cX,cY,cZ){return new bA({selected:cV,tabs:cW,top:cX,horizontal:cY,id:cZ});};bB=bk.MenuEntry=b7.Class({get_MenuNode:function(){return new bC({$:1,$0:this});},SubMenu:function(cV){return bB.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bD.New2(cV).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},SubMenu$1:function(cV){return bB.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bD.New$1(cV).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},Disabled:function(cV){return bB.New(this.text,this.ref,this.active,bg.fixit(cV),this.subMenu,this.toolTip,this.target,this.divider,this.onClick);},OnClick:function(cV){return bB.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,this.divider,{$:1,$0:cV});},get_Divider:function(){return bB.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,true,this.onClick);},Target:function(cV){return bB.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,{$:1,$0:cV},this.divider,this.onClick);},get_Render:function(){var cV,cW,cX,cY,cZ,c0,c1,c2,c3;return(this.divider?function(c4){return bf.addClass("divider",c4);}:a.id)((cV=(cW=(cX=(cY=bk.entryTxt(this.text,(cZ=this.target,cZ==null?"":cZ.$0),this.ref),(bf.addClassIf("active",this.active))(cY)),(bf.addClassIf("disabled",this.disabled))(cX)),(c0=this.subMenu,(c0!=null&&c0.$==1?(c1=ch.ofArray([bf["class"]("dropdown"),c0.$0.get_Render()]),function(c4){return bf.addChildren(c1,c4);}):a.id)(cW))),(c2=this.onClick,(c2!=null&&c2.$==1?(c3=ch.ofArray([new bj({$:8,$0:cE.Handler("click",c2.$0)}),bf.style("cursor : pointer")]),function(c4){return bf.addChildren(c3,c4);}):a.id)(cV))));}},null,bB);bB.New$1=function(cV,cW){var cX;cX=bB.New$2(cV);return bB.New(cX.text,bg.map(function(cY){return{$:1,$0:cY};},cW),cX.active,cX.disabled,cX.subMenu,cX.toolTip,cX.target,cX.divider,cX.onClick);};bB.New$2=function(cV){var cW,cX;cW=bg.fixit(cV);cX=bg.fixit(false);return bB.New(cW,new bg({$:0,$0:null}),cX,bg.fixit(false),null,null,null,false,null);};bB.New=function(cV,cW,cX,cY,cZ,c0,c1,c2,c3){return new bB({text:cV,ref:cW,active:cX,disabled:cY,subMenu:cZ,toolTip:c0,target:c1,divider:c2,onClick:c3});};bC=bk.MenuNode=b7.Class({get_Render:function(){return this.$==1?this.$0.get_Render():this.$0;}},null,bC);bD=bk.Menu=b7.Class({get_Render:function(){var cV;cV=this;return(this.dropdown?bk.dropdown:bk.nav)(ch.ofSeq(b3.delay(function(){return b3.map(function(cW){return cW.get_Render();},cV.entries);})));},get_DropDown:function(){return bD.New(this.entries,true);}},null,bD);bD.New2=function(cV){return bD.New$1(b3.map(function(cW){return new bC({$:1,$0:cW});},cV));};bD.New$1=function(cV){return bD.New(cV,false);};bD.New=function(cV,cW){return new bD({entries:cV,dropdown:cW});};bE=bk.Action=b7.Class({get_Button:function(){var cV,cW,cX;function cY(cZ,c0){return null;}cV=(cW=(cX=this.onClick,cX==null?null:{$:1,$0:cX.$0(this)}),cW==null?function(cZ){return function(c0){return cY(cZ,c0);};}:cW.$0);return bl.New(bg.map(function(cZ){return cZ?"btn btn-primary":"btn";},this.highlight),bg.fixit("button"),bg.fixit(""),this.text,cV,this.disabled,"");},get_MenuEntry:function(){var cV,cW;cV=(cW=this.onClick,cW==null?null:{$:1,$0:cW.$0(this)});return bB.New(this.text,new bg({$:0,$0:null}),this.highlight,this.disabled,null,this.toolTip,null,false,cV);},Highlight:function(cV){return bE.New(this.text,bg.fixit(cV),this.disabled,this.toolTip,this.onClick,this.parms);},Disabled:function(cV){return bE.New(this.text,this.highlight,bg.fixit(cV),this.toolTip,this.onClick,this.parms);},OnClick2:function(cV){return bE.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:cV},this.parms);},OnClick:function(cV){return bE.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:function(){return cV;}},this.parms);},Parms:function(cV){return bE.New(this.text,this.highlight,this.disabled,this.toolTip,this.onClick,{$:1,$0:cV});},Text:function(cV){return bE.New(bg.fixit(cV),this.highlight,bg.fixit(false),this.toolTip,this.onClick,this.parms);}},null,bE);bE.New$1=function(cV){return bE.New(bg.fixit(cV),bg.fixit(false),bg.fixit(false),null,null,null);};bE.New=function(cV,cW,cX,cY,cZ,c0){return new bE({text:cV,highlight:cW,disabled:cX,toolTip:cY,onClick:cZ,parms:c0});};bF=bk.GuiPart=b7.Class({GetHtmlNode:function(cV,cW){var cX,cY,cZ,c0,c1,c2;return this.$==1?[this.$0,a.ignore]:this.$==2?[this.$0.get_Button().get_Render(),a.ignore]:this.$==5?[cV.GetCallButton(this.$0,this.$1,this.$2),a.ignore]:this.$==4?(cX=bA.New$1(b3.map(function(c3){return[c3,cV.GetNode(c3)];},this.$1)).SetTop(this.$0),(bk.addValue(cW,cX,cV.tabStrips),[cX.get_Render(),a.ignore])):this.$==3?(cY=this.$3,(cZ=cF.Create$1(this.$6),(c0=cF.Create$1(this.$7),(c1=cF.Create$1(cY),(c2=[cY],[bz.NewBisect(this.$0,this.$1,this.$2,c1,cV.GetNode(this.$4),cV.GetNode(this.$5)).Min(cZ).Max(c0).get_Render(),function(c3){var c4;if(c3.$==3){c4=c3.$3;c2[0]!==c4?(c2[0]=c4,cF.Set(c1,c4)):void 0;cF.Set(cZ,c3.$6);cF.Set(c0,c3.$7);}}]))))):[bj.HtmlEmpty,a.ignore];}},null,bF);bG.New=function(cV,cW,cX,cY,cZ,c0,c1){return{HtmlElementF:cV,HtmlAttributeF:cW,HtmlAttributeOF:cX,HtmlTextF:cY,HtmlEmptyF:cZ,HtmlGuiPart:c0,HtmlGuiCall:c1};};bH.New=function(cV,cW,cX,cY,cZ){return{GuiRoot:cV,GuiTabStrip:cW,GuiSplit:cX,GuiNode:cY,GuiCall:cZ};};bI.get_New=function(){return{$:0,$0:cg.NewGuid()};};bJ=bk.Layout=b7.Class({SelectTab:function(cV){b3.iter(function(cW){cW.Select$1(cV);},this.tabStrips.get_Values());},SetLayoutJson:function(cV,cW){var cX,c0;function cY(c2){var c3,c4,c5,c6,c7,c8,c9;c3=bk.PHtmlElementF(c2);return c3!=null&&c3.$==1?{$:1,$0:new bj({$:0,$0:c3.$0[0],$1:b3.choose(cY,c3.$0[1])})}:(c4=bk.PHtmlAttributeF(c2),c4!=null&&c4.$==1?{$:1,$0:new bj({$:3,$0:c4.$0[0],$1:new bg({$:0,$0:c4.$0[1]})})}:(c5=bk.PHtmlAttributeOF(c2),c5!=null&&c5.$==1?{$:1,$0:new bj({$:4,$0:c5.$0[0],$1:new bg({$:0,$0:c5.$0[1]})})}:(c6=bk.PHtmlTextF(c2),c6!=null&&c6.$==1?{$:1,$0:new bj({$:5,$0:new bg({$:0,$0:c6.$0})})}:(c7=bk.PHtmlEmptyF(c2),c7!=null&&c7.$==1)?{$:1,$0:bj.HtmlEmpty}:(c8=bk.PHtmlGuiPart(c2),c8!=null&&c8.$==1?{$:1,$0:c0.GetNode(c8.$0)}:(c9=bk.PHtmlGuiCall(c2),c9!=null&&c9.$==1?{$:1,$0:c0.GetCallButton(c9.$0[0],c9.$0[1],c9.$0[2])}:null)))));}function cZ(c2){var c3,c4,c5,c6,c7,c8;c3=bk.PGuiNode(c2);return c3!=null&&c3.$==1?{$:1,$0:new bF({$:1,$0:g.defaultValue(bj.HtmlEmpty,cY(c3.$0))})}:(c4=bk.PGuiRoot(c2),c4!=null&&c4.$==1?{$:1,$0:new bF({$:0,$0:c4.$0})}:(c5=bk.PGuiTabStrip(c2),c5!=null&&c5.$==1?{$:1,$0:(c6=c5.$0,new bF({$:4,$0:c6[0],$1:c6[1]}))}:(c7=bk.PGuiSplit(c2),c7!=null&&c7.$==1?{$:1,$0:new bF({$:3,$0:c7.$0[0],$1:bk.toSect(c7.$0[1]),$2:c7.$0[2],$3:c7.$0[3],$4:c7.$0[4],$5:c7.$0[5],$6:c7.$0[6],$7:c7.$0[7]})}:(c8=bk.PGuiCall(c2),c8!=null&&c8.$==1?{$:1,$0:new bF({$:5,$0:c8.$0[0],$1:c8.$0[1],$2:c8.$0[2]})}:null))));}c0=this;function c1(c2,c3){var c4;c4=cZ(c3);return c4==null?null:{$:1,$0:[c2,{$:1,$0:c3},c4.$0]};}try{cX=this.AddNewSteps(cV,cW===""?[]:b_.choose(function(c2){return c1(c2[0],c2[1]);},((cm.DecodeArray(cm.DecodeTuple([cm.Id(),bY.j$12])))())(cj.parse(cW))));}catch(c2){cX=(function(c3){return function(c4){return c3("Error: "+b8.prettyPrint(c4));};}(function(c3){b$.log(c3);}))(c2);}},AddNewSteps:function(cV,cW){var cX;function cY(c0,c1,c2){var c3,c4;if(cX.parts.ContainsKey(c0)){c3=cX.parts.get_Item(c0);c4=c3[0];b4.Equals((c4.RVal())[0],c1)?bg.iter(a.ignore,bg.apply(new bg({$:0,$0:c2}),c3[2])):c4.set_RVal([c1,c2]);}else cX.AddNode(c0,c1,c2);}function cZ(c0,c1){return b3.last(c1);}cX=this;b_.iter(function(c0){return cY(c0[0],c0[1],c0[2]);},b_.map(function(c0){return cZ(c0[0],c0[1]);},b_.groupBy(function(c0){return a.id(c0[0],c0[1],c0[2]);},cV.concat(cW))));},get_Render:function(){function cV(cW){var cX;cX=cW.RVal();return cX[1].$==0?{$:1,$0:cX[1].$0}:null;}return this.GetNode(g.defaultValue("main",b3.tryPick(function(cW){return cV(bk.t1of3.apply(null,cW));},this.parts.get_Values())));},GetNode:function(cV){var cW;cW=null;return this.parts.TryGetValue(cV,{get:function(){return cW;},set:function(cX){cW=cX;}})?bk.t2of3(cW[0],cW[1],cW[2]):this.AddNode(cV,bI.get_New(),new bF({$:1,$0:bf.div([bf.htmlText((function(cX){return function(cY){return cX("GuiPart "+b8.toSafe(cY)+" not found");};}(a.id))(cV))])}));},AddNode:function(cV,cW,cX){var cY,cZ,c0,c1;function c2(c3,c4){return c4.GetHtmlNode(cY,cV);}cY=this;cZ=cF.Create$1([cW,cX]);c0=bg.map(function(c3){return c2(c3[0],c3[1]);},cZ);c1=new bj({$:2,$0:bg.map(function(c3){return c3[0];},c0)});this.parts.Add(cV,[cZ,c1,bg.map(function(c3){return c3[1];},c0)]);return c1;},GetCallButton:function(cV,cW,cX){var cY;cY=m.Success(this.GetGuiCallAction(cV,cW,cX));return cY.$==1?bf.div([bf.htmlText(b5.concat(". ",m.msgs2String(cY.$0)))]):cY.$0[0].get_Button().get_Render();},GetGuiCallAction:function(cV,cW,cX){var cY;return this.parts.ContainsKey(cW)?(cY=(this.parts.get_Item(cW))[0].RVal(),cY[1].$==2?m.succeed(cY[1].$0.Text(cV).Parms(b_.map(a.id,cX))):m.failSimpleError((function(cZ){return function(c0){return cZ("GuiPart "+b8.toSafe(c0)+" is not a GuiAction");};}(a.id))(cW))):m.failSimpleError((function(cZ){return function(c0){return cZ("GuiAction "+b8.toSafe(c0)+" not found");};}(a.id))(cW));}},null,bJ);bJ.New$1=function(cV){var cW;function cX(cY,cZ,c0){cW.AddNode(cY,cZ,c0);}cW=bJ.New(new cd.New$5(),new cd.New$5());b3.iter(function(cY){return cX(cY[0],cY[1],cY[2]);},cV);return cW;};bJ.AddGuids=function(cV){function cW(cX,cY){return[cX,cY.$==2?bI.get_New():cY.$==0?{$:2,$0:cY.$0}:cY.$==3?{$:4,$0:cY.$0,$1:cY.$1,$2:cY.$2,$3:cY.$4,$4:cY.$5}:cY.$==4?{$:3,$0:cY.$0,$1:cY.$1}:cY.$==5?{$:5,$0:cY.$0,$1:cY.$1,$2:cY.$2}:bI.get_New(),cY];}return b_.ofSeq(b3.map(function(cX){return cW(cX[0],cX[1]);},cV));};bJ.New=function(cV,cW){return new bJ({parts:cV,tabStrips:cW});};bk.varVerSplitter=function(cV,cW,cX,cY,cZ){return new bF({$:3,$0:true,$1:by.StVariable,$2:true,$3:cV,$4:cW,$5:cX,$6:cY,$7:cZ});};bk.varHorSplitter=function(cV,cW,cX,cY,cZ){return new bF({$:3,$0:true,$1:by.StVariable,$2:false,$3:cV,$4:cW,$5:cX,$6:cY,$7:cZ});};bk.fixPcVerSplitter=function(cV,cW,cX,cY){return new bF({$:3,$0:cV,$1:by.StFixedPerc,$2:true,$3:cW,$4:cX,$5:cY,$6:5,$7:95});};bk.fixPcHorSplitter=function(cV,cW,cX,cY){return new bF({$:3,$0:cV,$1:by.StFixedPerc,$2:false,$3:cW,$4:cX,$5:cY,$6:5,$7:95});};bk.fixedVerSplitter=function(cV,cW,cX,cY){return new bF({$:3,$0:cV,$1:by.StFixedPx,$2:true,$3:cW,$4:cX,$5:cY,$6:5,$7:95});};bk.fixedHorSplitter=function(cV,cW,cX,cY){return new bF({$:3,$0:cV,$1:by.StFixedPx,$2:false,$3:cW,$4:cX,$5:cY,$6:5,$7:95});};bk.t3of3=function(cV,cW,cX){return cX;};bk.t2of3=function(cV,cW,cX){return cW;};bk.t1of3=a.id;bk.toSect=function(cV){return cV==="StVariable"?by.StVariable:cV==="StFixedPx"?by.StFixedPx:by.StFixedPerc;};bk.PGuiCall=function(cV){return cV.GuiCall;};bk.PGuiNode=function(cV){return cV.GuiNode;};bk.PGuiRoot=function(cV){return cV.GuiRoot;};bk.PGuiSplit=function(cV){return cV.GuiSplit;};bk.PGuiTabStrip=function(cV){return cV.GuiTabStrip;};bk.PHtmlGuiCall=function(cV){return cV.HtmlGuiCall;};bk.PHtmlGuiPart=function(cV){return cV.HtmlGuiPart;};bk.PHtmlEmptyF=function(cV){return cV.HtmlEmptyF;};bk.PHtmlTextF=function(cV){return cV.HtmlTextF;};bk.PHtmlAttributeOF=function(cV){return cV.HtmlAttributeOF;};bk.PHtmlAttributeF=function(cV){return cV.HtmlAttributeF;};bk.PHtmlElementF=function(cV){return cV.HtmlElementF;};bk.addValue=function(cV,cW,cX){cX.Remove(cV);cX.Add(cV,cW);};bk.processLayoutSteps=function(cV,cW){var cX,cY;return g.defaultValue(cW,(cX=b3.tryHead(cV),cX==null?null:{$:1,$0:(cY=cX.$0,bk.processLayoutSteps(b3.skip(1,cV),cW.Add(cY[0],cY[1])))}));};bk.HtmlGuiCall=function(cV,cW,cX){return new bF({$:5,$0:cV,$1:cW,$2:cX});};bk.Do2=function(cV,cW,cX,cY,cZ){return cV(cX,cW);};bk.Do=function(cV,cW,cX,cY){return cV(cW);};bk.navbar=function(cV,cW,cX){return bf.div([bf["class"]("navbar navbar-default"),bf.div([bf["class"]("container-fluid"),bf.div([bf["class"]("navbar-header"),bf.div([bf["class"]("navbar-brand"),cV])]),bf.div([bf["class"]("navbar-collapse collapse"),cW,bf.addClass("navbar-right",cX)])])]);};bk.dropdown=function(cV){return bk.entries(cV,"dropdown-menu");};bk.nav=function(cV){return bk.entries(cV,"nav navbar-nav");};bk.entries=function(cV,cW){return bf.addClass(cW,bf.ul(cV));};bk.entryTxt=function(cV,cW,cX){return bk.menuEntry(bk.refText(cV,cW,cX));};bk.refText=function(cV,cW,cX){return bf.bindHElem(function(cY){return cY===""?bj.HtmlEmpty:bk.refA(bf.htmlText(cY),cY,cX);},cV);};bk.refA=function(cV,cW,cX){return bf.a([cV,bf.hrefO(cX),bf.target(cW)]);};bk.menuEntry=function(cV){return bf.li([cV]);};bk.RaiseTabMoved=function(cV,cW){var cX;cX=bk.TabMoved();cX==null?void 0:cX.$0([cV,cW]);};bk.TabMoved=function(){bX.$cctor();return bX.TabMoved;};bk.set_TabMoved=function(cV){bX.$cctor();bX.TabMoved=cV;};bk.setSelectedPanel=function(cV,cW){cF.Set(bk.selectedPanels(),cW==null?bk.selectedPanels().c.Remove(cV):bk.selectedPanels().c.Add(cV,cW.$0));};bk.selectedPanels=function(){bX.$cctor();return bX.selectedPanels;};bk.uid2s=function(cV){return"X"+b5.Replace(a.String(cV),"-","");};bk.draggedTab=function(){bX.$cctor();return bX.draggedTab;};bk.reorderArray=function(cV,cW,cX){return b_.collect(a.id,cX<cW?[cx.array(cV,{$:1,$0:0},{$:1,$0:cX-1}),[b_.get(cV,cW)],cx.array(cV,{$:1,$0:cX},{$:1,$0:cW-1}),cx.array(cV,{$:1,$0:cW+1},{$:1,$0:b_.length(cV)-1})]:[cx.array(cV,{$:1,$0:0},{$:1,$0:cW-1}),cx.array(cV,{$:1,$0:cW+1},{$:1,$0:cX}),[b_.get(cV,cW)],cx.array(cV,{$:1,$0:cX+1},{$:1,$0:b_.length(cV)-1})]);};bk.reorderList=function(cV,cW,cX){return cX<cW?ch.append(cV.GetSlice({$:1,$0:0},{$:1,$0:cX-1}),ch.append(ch.ofArray([cV.get_Item(cW)]),ch.append(cV.GetSlice({$:1,$0:cX},{$:1,$0:cW-1}),cV.GetSlice({$:1,$0:cW+1},{$:1,$0:cV.get_Length()-1})))):ch.append(cV.GetSlice({$:1,$0:0},{$:1,$0:cW-1}),ch.append(cV.GetSlice({$:1,$0:cW+1},{$:1,$0:cX}),ch.append(ch.ofArray([cV.get_Item(cW)]),cV.GetSlice({$:1,$0:cX+1},{$:1,$0:cV.get_Length()-1}))));};bk.addResizeObserver=function(cV,cW){var cX,cY,cZ,c0;try{cX=!(!a.ResizeObserver);}catch(c1){cX=false;}if(cX){cY=new a.ResizeObserver(cV);bk.set_observers(new ch.T({$:1,$0:cY,$1:bk.observers()}));cY.observe(cW);}else{cZ=bk.dimsChanged(cW);b2.Start((c0=null,b2.Delay(function(){return b2.While(function(){return cW.isConnected;},b2.Delay(function(){return b2.Bind(b2.Sleep(110),function(){return cZ()?(cV(),b2.Zero()):b2.Zero();});}));})),null);}};bk.dimsChanged=function(cV){var cW;cW=[cV.getBoundingClientRect()];return function(){var cX;cX=cV.getBoundingClientRect();return b4.Equals(bk.domRect2Tuple(cW[0]),bk.domRect2Tuple(cX))?false:(cW[0]=cX,true);};};bk.domRect2Tuple=function(cV){return[cV.top,cV.left,cV.width,cV.height];};bk.observers=function(){bX.$cctor();return bX.observers;};bk.set_observers=function(cV){bX.$cctor();bX.observers=cV;};bk.setLint=function(cV,cW){cV.setOption("lint",{async:1,getAnnotations:b7.CreateFuncWithArgs(cW),container:bf.findRootElement(cV.getWrapperElement())});};bk.showHints=function(cV,cW,cX,cY){var cZ;cZ=bv.New(b7.CreateFuncWithArgs(cW),cX,bf.findRootElement(cV.getWrapperElement()));cZ.hint.async=1;cV.showHint(cZ);};bk.cmPos=function(cV,cW){return bq.New(cV,cW);};bk.codeMirrorIncludes=function(){bX.$cctor();return bX.codeMirrorIncludes;};bk.hoverable=function(cV){return bn.get_New().Content(cV);};bL=bK.RunNode=b7.Class({createBaseNode:function(){var cV;cV=a.document.createElement("div");cV.setAttribute("id",this.nodeName);a.document.body.appendChild(cV);return cV;},createNode:function(){var cV;cV=a.document.createElement("div");cV.style="height: 100%; width: 100%;";return cV;},RunHtml:function(cV){this.RunDoc((bf.renderDoc())(cV));},RunDoc:function(cV){cB.Run(this.get_RunNode(),cV);},get_AddBootstrap:function(){var cV;cV=a.document.createElement("div");cV.innerHTML="<script src='http://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript' charset='UTF-8'></script>\n                <script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js' type='text/javascript' charset='UTF-8'></script>\n                <link type='text/css' rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>\n                <link type='text/css' rel='stylesheet' href='/EPFileX/css/main.css'>\n               ";this.runNode.parentElement.appendChild(cV);return this;},get_RunNode:function(){return this.runNode;}},i,bL);bL.New=b7.Ctor(function(cV,cW){bL.New$1.call(this,"TestNode",cV,cW);},bL);bL.New$1=b7.Ctor(function(cV,cW,cX){var cY,cZ,c0,c1,c2;this.nodeName=cV;cY=(cZ=a.document.getElementById(this.nodeName),b4.Equals(cZ,null)?this.createBaseNode():cZ);this.runNode=!(cX==null||cX.$0)?cY:(c0=cY.shadowRoot,b4.Equals(c0,null)?(c1=this.createNode(),(cY.attachShadow({mode:"open"}).appendChild(c1),c2=this.createNode(),c1.appendChild(c2),c2)):c0.firstChild);cW==null||cW.$0?this.runNode.innerHTML="":void 0;},bL);bK.completeJS=function(cV){return"\n          CIPHERSpaceLoadFileGlobalFileRef = null;\n          CIPHERSpaceLoadFile = function (filename, callback) {\n              if (filename.slice(-3) == \".js\" || filename.slice(-4) == \".fsx\" || filename.slice(-3) == \".fs\") { //if filename is a external JavaScript file\n                  var fileRef = null;\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement('script')\n                      fileRef.setAttribute(\"type\", \"text/javascript\")\n                      fileRef.setAttribute(\"src\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-4) == \".css\") { //if filename is an external CSS file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"stylesheet\")\n                      fileRef.setAttribute(\"type\", \"text/css\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-5) == \".html\") { //if filename is an external HTML file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"import\")\n                      fileRef.setAttribute(\"type\", \"text/html\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              if (!!fileRef) {\n                  CIPHERSpaceLoadFileGlobalFileRef = fileRef;\n      \u0009\u0009\u0009fileRef.onload = function () { fileRef.onload = null;  callback(); }\n                  document.getElementsByTagName(\"head\")[0].appendChild(fileRef);\n              }\n          }\n          CIPHERSpaceLoadFiles = function (files, callback) {\n              var newCallback = callback\n              if (!!CIPHERSpaceLoadFileGlobalFileRef && !!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n                  var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n                  CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n                  newCallback = function () {\n                      callback();\n                      oldCallback();\n                  }\n              }\n              var i = 0;\n              loadNext = function () {\n                  if (i < files.length) {\n                      var file = files[i];\n                      i++;\n                      CIPHERSpaceLoadFile(file, loadNext);\n                  }\n                  else newCallback();\n              };\n              loadNext();\n      \u0009}\n          CIPHERSpaceLoadFiles(['https://code.jquery.com/jquery-3.1.1.min.js'], function() {}); \n      \u0009CIPHERSpaceLoadFilesDoAfter = function (callback) {\n      \u0009\u0009var newCallback = callback\n      \u0009\u0009if (!!CIPHERSpaceLoadFileGlobalFileRef) {\n      \u0009\u0009\u0009if (!!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n      \u0009\u0009\u0009\u0009var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n      \u0009\u0009\u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n      \u0009\u0009\u0009\u0009newCallback = function () {\n      \u0009\u0009\u0009\u0009\u0009oldCallback();\n      \u0009\u0009\u0009\u0009\u0009callback();\n      \u0009\u0009\u0009\u0009}\n      \u0009\u0009\u0009}\n      \u0009\u0009}\n      \u0009\u0009else CIPHERSpaceLoadFileGlobalFileRef = {};\n      \u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = newCallback;\n      \u0009}\n      \n      CIPHERSpaceLoadFilesDoAfter(function() { \n        if (typeof IntelliFactory !=='undefined')\n          IntelliFactory.Runtime.Start();\n        for (key in window) { \n          if (key.startsWith(\"StartupCode$\")) \n            try { window[key].$cctor(); } catch (e) {} \n        } \n      })\n      \n                       "+cV;};bO.NewBrowser={$:3};bO.Tab={$:2};bO.Right={$:1};bO.Below={$:0};bP=bN.ErrCompiler=b7.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&!this.$1;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(function(cV){return function(cW){return cV(b8.toSafe(cW));};}(a.id))(this.$0):(function(cV){return function(cW){return cV(b0.p$5(cW));};}(a.id))(this);}},null,bP);bP["Could not open new browser, Popup blocker may be active"]=new bP({$:2});bP["Snippet Missing"]=new bP({$:1});bQ.New=function(cV,cW,cX,cY){return{F2:cV,LeftDoubleClick:cW,"Ctrl-Space":cX,".":cY};};bR=bN.Property=b7.Class({setV:function(cV){this.props.set_Item(this.key,cV);this.setDirty();},getV:function(){return this.props.get_Item(this.key);},setK:function(cV){this.props.Add(cV,this.props.get_Item(this.key));this.props.Remove(this.key);this.key=cV;this.setDirty();},getK:function(){return this.key;},Remove:function(){this.props.Remove(this.key);this.setDirty();},get_SetV:function(){var cV;cV=this;return function(cW){cV.setV(cW);};},get_GetV:function(){var cV;cV=this;return function(){return cV.getV();};},get_SetK:function(){var cV;cV=this;return function(cW){cV.setK(cW);};},get_GetK:function(){var cV;cV=this;return function(){return cV.getK();};},get_ValueVar:function(){return new bS.New(this);},get_KeyVar:function(){return this;},RView:function(){return cA.Const(this.getK());},RUpdM:function(cV){var cW;cW=cV(this.getK());cW==null?void 0:this.setK(cW.$0);},RUpd:function(cV){this.setK(cV(this.getK()));},RVal:function(){return this.getK();},RGet:function(){return this.getK();},set_RVal:function(cV){this.setK(cV);},RSet:function(cV){this.setK(cV);},RId:function(){return"?";}},i,bR);bR.New=b7.Ctor(function(cV,cW,cX){this.setDirty=cV;this.props=cW;this.key=cX;},bR);bS=bN.PropValue=b7.Class({RView:function(){return cA.Const(this.get());},RUpdM:function(cV){var cW;cW=cV(this.get());cW==null?void 0:this.set(cW.$0);},RUpd:function(cV){this.set(cV(this.get()));},RVal:function(){return this.get();},RGet:function(){return this.get();},set_RVal:function(cV){this.set(cV);},RSet:function(cV){this.set(cV);},RId:function(){return"?";}},i,bS);bS.New=b7.Ctor(function(cV){this.get=cV.get_GetV();this.set=cV.get_SetV();},bS);bN["CodeSnippet.propValue"]=function(cV,cW){var cX,cY;return cV.properties.ContainsKey(cW)?{$:1,$0:cV.properties.get_Item(cW)}:(cX=(cY=cV.parent,cY==null?null:bT.FetchO(cY.$0)),cX==null?null:bN["CodeSnippet.propValue"](cX.$0,cW));};bT.FetchByPathO=function(cV){function cW(cY,cZ){return b3.tryHead(b3.filter(function(c0){return c0.get_Name()===cZ;},cY));}function cX(cY,cZ){var c0,c1,c2,c3;c0=(c1=b3.tryHead(cZ),c1==null?null:cW(cY,c1.$0));return b3.length(cZ)<=1?c0:c0==null?null:(c2=c0.$0,(c3=b3.tail(cZ),cX(b3.filter(function(c4){return b4.Equals(c4.parent,{$:1,$0:c2.id});},(bN.codeSnippets())["var"].RVal()),c3)));}return cX(b3.filter(function(cY){return cY.parent==null;},(bN.codeSnippets())["var"].RVal()),cV);};bN["CodeSnippet.IsDescendantOf"]=function(cV,cW){function cX(cY){var cZ,c0,c1;cZ=cY.parent;return cZ!=null&&cZ.$==1&&(c0=cZ.$0,b4.Equals(c0,cW)||g.defaultValue(false,(c1=bT.FetchO(c0),c1==null?null:{$:1,$0:cX(c1.$0)})));}return cX(cV);};bN["CodeSnippet.GetCodeFsx"]=function(cV,cW){return(bN["CodeSnippet.GetCodeAndStarts"](cV,cW))[0];};bN["CodeSnippet.GetCodeAndStarts"]=function(cV,cW){return x.CodeAndStarts(cW,bN["CodeSnippet.Predecessors"](cV));};bN["CodeSnippet.Predecessors"]=function(cV,cW){var cX;cX=b_.ofSeq(cV.UniquePredecessors(bT.FetchO));return b_.ofSeq(b3.map(bN["CodeSnippet.get_PrepareSnippet"],b3.filter(function(cY){return b_.contains(cY.id,cX);},(bN.codeSnippets())["var"].RVal())));};bN["CodeSnippet.get_PrepareSnippet"]=function(cV,cW){var cX;cX=bN["CodeSnippet.get_Levels"](cV);return x.New(cV.name,b5.Replace(b5.Replace(cV.content,"##"+"FSHARPSTATION_ID"+"##",bN.fsIds()),"##"+"FSHARPSTATION_ENDPOINT"+"##",a.location.href),cV.parent,cV.predecessors,cV.id,cV.expanded,cX[0],cX[1],cV.properties);};bN["CodeSnippet.get_Levels"]=function(cV,cW){function cX(cY,cZ){return function(c0){var c1,c2,c3;return g.defaultValue([cY,cZ],(c1=(c2=c0.parent,c2==null?null:bT.FetchO(c2.$0)),(c3=cX(cY+1,cZ+(c0.properties.ContainsKey("NoIndent")?0:1)),c1==null?null:{$:1,$0:c3(c1.$0)})));};}return(function(cY){return cX(cY[0],cY[1]);}([0,0]))(cV);};bT.New=function(cV,cW,cX,cY,cZ,c0){var c1,c2,c3,c4,c5;c1=x.New(cW,c0,cX,cY,w.get_New(),true,0,0,new cd.New$5());c2=bN.codeSnippets().get_Length();c2===0?bN.codeSnippets().Append(c1):cV===0?(c3=b3.append([c1],(bN.codeSnippets())["var"].RVal()),bN.codeSnippets().Set(c3)):cV<c2?(c4=(c5=b_.splitAt(cV,b_.ofSeq((bN.codeSnippets())["var"].RVal())),c5[0].concat([c1].concat(c5[1]))),bN.codeSnippets().Set(c4)):bN.codeSnippets().Append(c1);return c1;};bT.New$1=function(cV,cW,cX,cY,cZ){return bT.New(bN.codeSnippets().get_Length(),cV,cW,cX,cY,cZ);};bT.New$2=function(cV){return bT.New$1("",null,ch.T.Empty,ch.T.Empty,cV);};bT.New$3=function(cV,cW){return bT.New$1("",{$:1,$0:cV},ch.T.Empty,ch.T.Empty,cW);};bT.New$4=function(cV,cW,cX){return bT.New$1("",{$:1,$0:cV},cW,ch.T.Empty,cX);};bT.New$5=function(cV,cW){return bT.New$1("",null,cV,ch.T.Empty,cW);};bT.FetchL=function(cV){return ci.toList(bT.FetchO(cV));};bT.FetchO=function(cV){return bN.codeSnippets().TryFindByKey(cV);};bT.PickIO=function(cV){function cW(cX,cY){return b4.Equals(cY.id,cV);}return bN.tryPickI(function(cX){return cW(cX[0],cX[1]);},(bN.codeSnippets())["var"].RVal());};bN.tryPickI=function(cV,cW){return b3.tryHead(b3.filter(cV,b3.indexed(cW)));};bN.fsIds=function(){bX.$cctor();return bX.fsIds;};bN.codeSnippets=function(){bX.$cctor();return bX.codeSnippets;};bV=bU.Babel=b7.Class({},i,bV);bV.New=b7.Ctor(function(){},bV);bW=bU.Fable=b7.Class({},i,bW);bW.New=b7.Ctor(function(){},bW);bU.fableTranslate=function(cV){var cW;cW=p.wrapper();return cW.Run(cW.Delay(function(){var cX;bU.loadReferences().f();return cW.Bind$2((cX=null,b2.Delay(function(){return b2.While(function(){return cL.getOwnPropertyNames(a.metadata).length<b_.length(bU.references());},b2.Delay(function(){return b2.Bind(b2.Sleep(200),function(){return b2.Return(null);});}));})),function(){var cY,cZ,c0,c1,c2;cY=bU.getChecker().f();cZ=cM.makeCompiler([["Microsoft.FSharp.Core.ExtraTopLevelOperators.PrintFormatLine","FSSGlobal.FSharpStation.FableModule.ToConsole($0)"]]);c0="stdin.fsx";c1=cj.parse(cM.convertToJson(cM.compileAst(cZ,cM.parseFSharpProject(cY,cZ,c0,cV),c0)));c2=cL.create(null);c2.plugins=[a.babelPlugins.transformMacroExpressions,a.babelPlugins.removeUnneededNulls,"transform-es2015-modules-amd"];c2.presets=[];c2.filename=c0;c2.babelrc=false;return cW.Return(b5.Replace(b5.Replace(cN.transformFromAst(c1,null,c2).code,"define([","require(["),"\"use strict\";","\"use strict\"; try { exports = exports || {}; } catch (err) {}"));});}));};bU.ToConsole=function(cV){b$.log(cV);return cV.cont(bU.addOutMsg());};bU.addOutMsg=function(){bX.$cctor();return bX.addOutMsg;};bU.set_addOutMsg=function(cV){bX.$cctor();bX.addOutMsg=cV;};bU.getChecker=function(){bX.$cctor();return bX.getChecker;};bU.loadReferences=function(){bX.$cctor();return bX.loadReferences;};bU.references=function(){bX.$cctor();return bX.references;};bM.FSharpStationClient=function(cV){var cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT;function eU(gJ,gK,gL,gM){return gK(gM)==null?cF.Lens(cW,function(){return gJ;},function(){return"";}):gL(gM);}function eV(){cF.Set(c0,null);}function eW(gJ){function gK(gM){return gM.get_Name();}function gL(gM,gN){return x.New(gN,gM.content,gM.parent,gM.predecessors,gM.id,gM.expanded,gM.level,gM.levelCode,gM.properties);}return eU("",function(gM){return bN.codeSnippets().TryFindByKey(gM);},function(gM){return bN.codeSnippets().LensInto(gK,gL,gM);},gJ);}function eX(gJ){function gK(gM){return gM.content;}function gL(gM,gN){return x.New(gM.name,gN,gM.parent,gM.predecessors,gM.id,gM.expanded,gM.level,gM.levelCode,gM.properties);}return eU("",function(gM){return bN.codeSnippets().TryFindByKey(gM);},function(gM){return bN.codeSnippets().LensInto(gK,gL,gM);},gJ);}function eY(gJ){var gK;gK=bN["CodeSnippet.propValue"](gJ,"CSS");return gK==null?null:{$:1,$0:a.id(gK.$0)};}function eZ(gJ){return g.defaultValue("",gJ);}function e0(gJ){var gK;gK=bN["CodeSnippet.propValue"](gJ,"CSSLink");return gK==null?null:{$:1,$0:a.id(gK.$0)};}function e1(gJ){return g.defaultValue("",gJ);}function e2(gJ){var gK;gK=bN["CodeSnippet.propValue"](gJ,"Mode");return gK==null?null:{$:1,$0:a.id(gK.$0)};}function e3(gJ){return g.defaultValue("fsharp",gJ);}function e4(gJ){var gK;gK=bN["CodeSnippet.propValue"](gJ,"Theme");return gK==null?null:{$:1,$0:a.id(gK.$0)};}function e5(gJ){return g.defaultValue("",gJ);}function e6(gJ){var gK;gK=bN["CodeSnippet.propValue"](gJ,"Layout");return gK==null?null:{$:1,$0:a.id(gK.$0)};}function e7(gJ){return g.defaultValue("",gJ);}function e8(gJ){var gK;gK=bN["CodeSnippet.propValue"](gJ,"LayoutJS");return gK==null?null:{$:1,$0:a.id(gK.$0)};}function e9(gJ){return g.defaultValue("",gJ);}function e_(gJ){var gK,gL,gM,gN;function gO(gQ){var gR;gR=bN["CodeSnippet.propValue"](gQ,gJ);return gR==null?null:{$:1,$0:a.id(gR.$0)};}function gP(gQ){return g.defaultValue("",gQ);}gK=bg.map((gL=(gM=function(gQ){return gQ==null?null:gO(gQ.$0);},function(gQ){return gM(bT.FetchO(gQ));}),function(gQ){return gP(gL(gQ));}),cX);gN=[cF.Create$1(null)];cA.Sink(function(gQ){if(!b4.Equals(gN[0].c,gQ))cF.Set(gN[0],gQ);},bg.toView(gK));return new bg({$:1,$0:gN[0]});}function e$(gJ,gK){return gK===""?gJ:gK!=="0";}function fa(){dI=false;cF.Set(dJ,true);}function fb(){dC=null;fa();}function fc(){fb();dD.ClearCache();eV();}function fd(){dD.ClearCache();cF.Set(dJ,false);dC=null;}function fe(gJ,gK){var gL,gM,gN;return!gK?null:(gL=(gM=gJ.RVal(),(gN=a.String(gK),gM===null?gN:gM===""?gN:gN===null?gM:gN===""?gM:gM+"\n"+gN)),gL!==gJ.RVal()?gJ.set_RVal(gL):null);}function ff(gJ){cF.Set(dH,gJ);}function fg(gJ){fe(dH,gJ);}function fh(gJ){fe(dG,gJ);}function fi(){var gJ;gJ=bT.FetchO(cX.c);gJ==null?void 0:cF.Set(dE,bN["CodeSnippet.GetCodeFsx"](gJ.$0,true));}function fj(gJ,gK){var gL,gM,gN,gO,gP,gQ,gR,gS;function gT(gU){function gV(gW,gX){return b4.Equals(gX.id,gU);}return function(gW){return bN.tryPickI(function(gX){return gV(gX[0],gX[1]);},gW);};}gL=b_.partition(function(gU){return b4.Equals(gU.id,gK)||bN["CodeSnippet.IsDescendantOf"](gU,gK);},b_.ofSeq((bN.codeSnippets())["var"].RVal()));gM=gL[1];gN=gL[0];gO=(gT(gK))(gN);gP=(gT(gJ))(gM);gO!=null&&gO.$==1?gP!=null&&gP.$==1?(gQ=gP.$0[0],gR=gP.$0[1],gS=b_.collect(a.id,[cx.array(gM,{$:1,$0:0},{$:1,$0:gQ-1}),gN,cx.array(gM,{$:1,$0:gQ},null)]),bN.codeSnippets().Set(gS),bN.codeSnippets().UpdateBy(function(gU){return{$:1,$0:x.New(gU.name,gU.content,gR.parent,gU.predecessors,gU.id,gU.expanded,gU.level,gU.levelCode,gU.properties)};},gO.$0[1].id)):void 0:void 0;return fc();}function fk(){var gJ,gK,gL,gM;gJ=bT.PickIO(cX.c);gJ==null?void 0:(gK=gJ.$0,gL=gK[0],gM=gK[1],function(gN,gO){var gP;while(true){if(gO<0)return null;else if(gN((gP=(bN.codeSnippets())["var"].RVal(),(function(gQ){return function(gR){return b3.nth(gQ,gR);};}(gO))(gP))))return null;else gO=gO-1;}}(function(gN){return b4.Equals(gN.parent,gM.parent)&&(bN.codeSnippets().UpdateBy(function(gO){return{$:1,$0:x.New(gO.name,gO.content,{$:1,$0:gN.id},gO.predecessors,gO.id,gO.expanded,gO.level,gO.levelCode,gO.properties)};},gM.id),true);},gL-1),fc());}function fl(){var gJ,gK,gL,gM,gN;gJ=bT.FetchO(cX.c);gJ==null?void 0:(gK=gJ.$0,gL=(gM=(gN=gK.parent,gN==null?null:bT.FetchO(gN.$0)),gM==null?null:gM.$0.parent),bN.codeSnippets().UpdateBy(function(gO){return{$:1,$0:x.New(gO.name,gO.content,gL,gO.predecessors,gO.id,gO.expanded,gO.level,gO.levelCode,gO.properties)};},gK.id),fc());}function fm(gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){return gK.Bind$1(m.fromOption(bP["Snippet Missing"],gJ),function(gL){var gM;cF.Set(dH,"Compiling to JavaScript...");cF.Set(dF,"");gM=bN["CodeSnippet.GetCodeFsx"](gL,true);cF.Set(dE,gM);return gK.Bind$2(be.translateAR(gM,false),function(gN){return gK.Bind$1(gN,function(gO){var gP;gP=bK.completeJS(gO);cF.Set(dF,gP);fg("Compiled!");return gK.Return(gP);});});});}));}function fn(gJ){var gK;gK=a.open.apply(a,[gJ]);return b4.Equals(gK,null)?m.fail(bP["Could not open new browser, Popup blocker may be active"]):m.succeed(gK);}function fo(gJ,gK){try{return gJ["eval"].apply(gJ,[gK]);}catch(gL){((function(gM){return function(gN){return gM(b8.prettyPrint(gN));};}(function(gM){b$.log(gM);}))(gL));return(function(gM){return function(gN){return gM(b8.prettyPrint(gN));};}(a.id))(gL);}}function fp(gJ){try{gJ.focus.apply(gJ,[]);}catch(gK){((function(gL){return function(gM){return gL(b8.prettyPrint(gM));};}(function(gL){b$.log(gL);}))(gK));}}function fq(gJ,gK){var gL;gL=p.wrapper();return gL.Run(gL.Delay(function(){return gL.Bind$1(m.tryProtection(),function(){return gL.Bind$1(fn(gJ),function(gM){fp(gM);return gL.Bind$2(b2.Sleep(800),function(){return gL.Return(fo(gM,gK));});});});}));}function fr(){return b2.FromContinuations(function(gJ,gK){var gL;try{gL=bf.createIFrame(gJ);return(new bL.New(null,null)).RunHtml(gL);}catch(gM){return gK(gM);}});}function fs(gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){return gK.Bind$1(m.tryProtection(),function(){return gK.Bind$2(fr(),function(gL){var gM;gM=gL.contentWindow;gM.document.body.style.margin="0px";return gK.Return(fo(gM,gJ));});});}));}function ft(gJ,gK,gL){var gM;gM=p.wrapper();return gM.Run(gM.Delay(function(){return gM.Bind$3(fm(gL),function(gN){cF.Set(dH,"Running JavaScript...");return gM.Bind$3(gK.$==3?fq(gJ,gN):fs(gN),function(gO){fg(gO);fg("Done!");return gM.Return([gK,gO]);});});}));}function fu(){return bT.FetchO(cX.c);}function fv(gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){cF.Set(dE,gJ);return gK.Bind$2(bc.evaluateAR(bN.fsIds(),a.location.href,true,gJ),function(gL){return gK.Bind$1(gL,function(){return gK.Return("");});});}));}function fw(gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){return gK.Bind$1(m.fromOption(bP["Snippet Missing"],gJ),function(gL){return gK.Bind$3(fv(bN["CodeSnippet.GetCodeFsx"](gL,true)),function(gM){return gK.Bind$2((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.addPresence:-1250306105",[(function(gN){return function(gO){return gN(b0.p$6(gO));};}(a.id))(gL.id),"ok"]),function(){return gK.Return(gM);});});});}));}function fx(gJ,gK,gL){var gM;gM=p.wrapper();return gM.Run(gM.Delay(function(){cF.Set(dH,gJ);return gM.Bind$3(gL(),function(gN){fg(gN);fg(gK);return gM.Return(gN);});}));}function fy(gJ){return fx("Evaluating F# code...","",function(){return fw(gJ);});}function fz(gJ){return fx("Evaluating F# code...","",function(){return fv(gJ);});}function fA(gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){cF.Set(dE,gJ);return gK.Bind$3(bU.fableTranslate(gJ),function(gL){cF.Set(dF,gL);a["eval"](gL);return gK.Return("");});}));}function fB(gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){return gK.Bind$1(m.fromOption(bP["Snippet Missing"],gJ),function(gL){return gK.ReturnFrom(fA(bN["CodeSnippet.GetCodeFsx"](gL,false)));});}));}function fC(gJ){return fx("Running Fable...","Done!",function(){return fB(gJ);});}function fD(gJ){return fx("Running Fable...","Done!",function(){return fA(gJ);});}function fE(gJ){var gK;gK=fu();return(dL(gJ))(gK);}function fF(gJ,gK){return g.defaultValue(false,gK==null?null:{$:1,$0:ch.contains(gJ,gK.$0.predecessors)});}function fG(gJ,gK){return gK.Contains(gJ);}function fH(gJ,gK){var gL,gM,gN,gO;return gK==null?null:(gL=gK.$0,b4.Equals(gL,gJ)||fG(gL.id,new cO.New$2(gJ.UniquePredecessors(bT.FetchO)))?null:(gM=(ch.contains(gJ.id,gL.predecessors)?(gN=(gO=gJ.id,function(gP){return!b4.Equals(gO,gP);}),function(gP){return ch.filter(gN,gP);}):function(gP){return new ch.T({$:1,$0:gJ.id,$1:gP});})(gL.predecessors),(bN.codeSnippets().UpdateBy(function(gP){return{$:1,$0:x.New(gP.name,gP.content,gP.parent,gM,gP.id,gP.expanded,gP.level,gP.levelCode,gP.properties)};},gL.id),fc())));}function fI(gJ){bN.codeSnippets().UpdateBy(function(gK){return{$:1,$0:x.New(gK.name,gK.content,gK.parent,gK.predecessors,gK.id,!gK.expanded,gK.level,gK.levelCode,gK.properties)};},gJ.id);eV();}function fJ(gJ,gK,gL){var gM,gN,gO,gP;return bn.get_New().Content$1([bf["class"]("code-editor-list-tile"),bf.classIf("selected",bg.map((gM=gL.id,function(gQ){return b4.Equals(gM,gQ);}),cX)),bf.classIf("direct-predecessor",bg.map((gN=gL.id,function(gQ){return fF(gN,gQ);}),c1)),bf.classIf("indirect-predecessor",bg.map((gO=gL.id,function(gQ){return fG(gO,gQ);}),dN)),bf.draggable("true"),new bj({$:8,$0:cD.Handler("dragover",function(){return function(gQ){return gQ.preventDefault();};})}),new bj({$:8,$0:cD.Handler("drag",function(){return function(){dK=gL.id;};})}),new bj({$:8,$0:cD.Handler("drop",function(){return function(gQ){gQ.preventDefault();return fj(gL.id,dK);};})}),bf.span([bf["class"]("node"),bf.classIf("parent",gJ),bf.classIf("expanded",gK),new bj({$:8,$0:cD.Handler("click",function(){return function(){return gJ?fI(gL):null;};})}),bf.title(gJ?gK?"collapse":"expand":""),bf.htmlText(gJ?gK?"-":"+":"")]),bf.div([bf["class"]("code-editor-list-text"),bf.style1("text-indent",(gP=(bN["CodeSnippet.get_Levels"](gL))[0],(function(gQ){return function(gR){return gQ(a.String(gR)+"em");};}(a.id))(gP))),bf.style("white-space: pre"),bf.htmlText(bg.map2(function(gQ){return function(gR){return v.snippetName(gQ,gR);};},eW(gL.id),eX(gL.id))),new bj({$:8,$0:cD.Handler("click",function(){return function(){return cF.Set(cX,gL.id);};})})]),bf.span([bf["class"]("predecessor"),bf.title("toggle predecessor"),new bj({$:8,$0:cD.Handler("click",function(){return function(){return bg.iter(function(gQ){return fH(gL,gQ);},c1);};})}),bf.htmlText("X")])]);}function fK(gJ,gK){return!gK?gJ:gK;}function fL(gJ){return new w({$:0,$0:!gJ?"00000000-0000-0000-0000-000000000000":gJ.Item});}function fM(gJ){return!gJ?null:{$:1,$0:fL(gJ)};}function fN(gJ){var gK;function gL(gN,gO){gK.Add(gN,gO);}function gM(gN,gO){return[gN,gO];}gK=new cd.New$5();return!gJ?gK:(b3.iter(function(gN){return gL(gN[0],gN[1]);},b_.map(function(gN){return gM(gN[0],gN[1]);},cQ.GetFields(gJ))),gK);}function fO(gJ){var gK;try{gK=cj.parse(gJ);((function(gL){return function(gM){return gL(b8.prettyPrint(gM));};}(function(gL){b$.log(gL);}))(gK.length));return b_.choose(function(gL){return!gL?null:{$:1,$0:x.New(fK("",gL.name),fK("",gL.content),fM(gL.parent),ch.ofSeq(b_.map(fL,fK([],gL.predecessors))),fL(gL.id),fK(false,gL.expanded),fK(0,gL.level),fK(0,gL.levelCode),fN(gL.properties))};},gK);}catch(gL){return[];}}function fP(){var gJ,gK,gL,gM;function gN(gO,gP){var gQ;return g.defaultValue(gP,(gQ=b3.tryItem(gP,(bN.codeSnippets())["var"].RVal()),gQ==null?null:{$:1,$0:(bN["CodeSnippet.get_Levels"](gQ.$0))[0]<=gO?gP:gN(gO,gP+1)}));}cF.Set(cX,g.defaultWith(function(){return bT.New$2("");},(gJ=bT.PickIO(cX.c),gJ==null?null:{$:1,$0:(gK=gJ.$0,(gL=gK[0],(gM=gK[1],bT.New(gN((bN["CodeSnippet.get_Levels"](gM))[0],gL+1),"",gM.parent,ch.T.Empty,ch.T.Empty,""))))})).id);fb();eV();}function fQ(){var gJ,gK;gJ=bT.FetchO(cX.c);gJ==null?void 0:(gK=gJ.$0,a.confirm((function(gL){return function(gM){return gL("Do you want to delete "+b8.toSafe(gM)+"?");};}(a.id))(gK.get_Name()))?(cF.Set(cX,w.get_New()),bN.codeSnippets().Remove(gK),fb(),eV()):void 0);}function fR(gJ){return b3.last(b5.SplitChars(gJ,["/","\\"],0));}function fS(gJ,gK){var gL,gM;gL=gJ.files;return gL.length>0?(gM=new a.FileReader(),(gM.onload=function(gN){return gK(gN.target.result);},gM.readAsText(gL.item(0)))):null;}function fT(gJ){var gK;try{gK=fO(gJ);bN.codeSnippets().Set(gK);fd();eV();}catch(gL){a.alert(a.String(gL));}}function fU(gJ){if(!dJ.c||a.confirm("Changes have not been saved, do you really want to load?"))fS(bf.findRootElement(gJ).querySelector("#"+dQ),fT);}function fV(){var gJ,gK,gL,gM;gJ=(gK=b_.ofSeq((bN.codeSnippets())["var"].RVal()),cj.stringify(((cm.EncodeArray(bZ.j$7))())(gK)));gL=(gM=fR(dP.c),gM===""?"snippets.fsjson":gM);a.saveAs(new a.Blob([gJ],{type:"text/plain;charset=utf-8"}),gL);fd();}function fW(gJ,gK){return bf.findRootElement(gJ).querySelector("#"+dQ).click();}function fX(){return dV==="a"?"b":"a";}function fY(gJ){return gJ+dU;}function fZ(gJ,gK,gL){var gM,gN,gO,gP,gQ,gR,gS,gT,gU,gV;gM=dC!=null&&dC.$==1&&((gO=dC.$0[0],(gP=dC.$0[1],b4.Equals(gO,gK.id)&&b4.Equals(gP,gL)))&&(gN=[dC.$0[1],dC.$0[0],dC.$0[2]],true))?(gJ("Reparsing..."),[gN[2],bN["CodeSnippet.get_PrepareSnippet"](gK)]):(gJ("Parsing..."),gQ=bN["CodeSnippet.Predecessors"](gK),gR=b_.length(gQ)===1?null:{$:1,$0:x.ReducedCode(gL,cx.array(gQ,{$:1,$0:0},{$:1,$0:b_.length(gQ)-2}))},gS=b_.get(gQ,b_.length(gQ)-1),dC={$:1,$0:[gS.id,gL,gR]},[gR,gS]);gT=x.ReducedCode(gL,[gM[1]]);gU=g.defaultValue(gT,(gV=gM[0],gV==null?null:{$:1,$0:(function(gW){var gX,gY,gZ,g0,g1,g2;gX=gW[0];gY=gW[1];gZ=gW[2];g0=gW[3];g1=gW[4];g2=gW[5];return function(g3){return x.AddSeps(gX,gY,gZ,g0,g1,g2,g3[0],g3[1],g3[2],g3[3],g3[4],g3[5]);};}(gV.$0))(gT)}));return x.FinishCode(gL,gU[0],gU[1],gU[2],gU[3],gU[4],gU[5]);}function f0(gJ){var gK;function gL(gM){if(!gJ)cF.Set(dG,gM);}gK=null;return b2.Delay(function(){var gM,gN;gM=bT.FetchO(cX.c);return gM!=null&&gM.$==1?(gN=gM.$0,b2.TryFinally(b2.Delay(function(){var gO,gP;gO=fZ(gL,gN,false);gP=fX();((function(gQ){return function(gR){return gQ("Parsing "+b8.toSafe(gR));};}(function(gQ){b$.log(gQ);}))(gP));dI=false;return b2.Bind(dT.Parse$1(fY(gP),gO[0],gO[1]),function(gQ){((function(gR){return function(gS){return gR("Parse result= "+b8.prettyPrint(gS));};}(function(gR){b$.log(gR);}))(gQ!==""));dV=gP;return b2.Combine(!gJ?(fh(gQ),fh("Parsed!"),b2.Zero()):b2.Zero(),b2.Delay(function(){dI=true;return b2.Zero();}));});}),function(){dY=false;})):b2.Zero();});}function f1(gJ){var gK;gK=null;return b2.Delay(function(){return!dI?b2.Return(true):b2.Bind(dT.MustParse(fY(dV),gJ.get_NameSanitized()),function(gL){return b2.Return(gL);});});}function f2(gJ){var gK;gK=null;return b2.Delay(function(){return b2.Bind(dW,function(gL){var gM;return gL?b2.Zero():(gM=bT.FetchO(cX.c),gM!=null&&gM.$==1?b2.Bind(f1(gM.$0),function(gN){return gN?b2.Bind(f0(gJ),function(){return b2.Return(null);}):b2.Zero();}):b2.Zero());});});}function f3(gJ,gK){var gL,gM;gL=c.REGEX("([a-zA-Z_]\\w*)$","g",b5.Substring(gJ,0,gK));return gL!=null&&gL.$==1?(gM=gL.$0,gM&&b_.length(gM)===1)?b_.get(gL.$0,0):"":"";}function f4(gJ,gK){var gL,gM;gL=c.REGEX("^([a-zA-Z_]\\w*)","g",gJ.substring(gK));return gL!=null&&gL.$==1?(gM=gL.$0,gM&&b_.length(gM)===1)?b_.get(gL.$0,0):"":"";}function f5(gJ){var gK;b2.Start((gK=null,b2.Delay(function(){return b2.Bind(dW,function(gL){var gM,gN;return gL?b2.Zero():(gM=bT.FetchO(cX.c),gM!=null&&gM.$==1?(gN=gM.$0,b2.Bind(f2(false),function(){var gO,gP,gQ,gR,gS;gO=gJ.getCursor();gP=gJ.getLine(gO.line);gQ=b5.length(f3(gP,gO.ch));gR=b5.length(f4(gP,gO.ch));gS=gQ===0&&gR===0?2:gR;return b2.Bind(dT.ToolTip(fY(dV),gO.line+1,gO.ch+1,gN.get_NameSanitized()),function(gT){var gU;fh(((((gU=(b7.Curried(function(gV,gW,gX,gY,gZ){return gV("InfoFSharp \""+b8.toSafe(gW)+" "+("("+b8.prettyPrint(gX[0])+", "+b8.prettyPrint(gX[1])+")")+" - "+("("+b8.prettyPrint(gY[0])+", "+b8.prettyPrint(gY[1])+")")+" "+b8.toSafe(gZ)+" \"");},5))(a.id),function(gV){var gW;gW=gU(gV);return function(gX){var gY;gY=gW([gX[0],gX[1]]);return function(gZ){return gY([gZ[0],gZ[1]]);};};})(gN.get_NameSanitized()))([gO.line+1,gO.ch-gQ+1]))([gO.line+1,gO.ch+gS+1]))(b5.Replace(gT,"\"","''")));return b2.Zero();});})):b2.Zero());});})),null);}function f6(gJ,gK,gL,gM){var gN;b2.Start((gN=null,b2.Delay(function(){var gO,gP;gO=bT.FetchO(cX.c);return gO!=null&&gO.$==1?(gP=gO.$0,(function(gQ){return gQ("calling parseIfMustThen");}(function(gQ){b$.log(gQ);}),b2.Bind(f2(false),function(){var gQ;function gR(gS,gT,gU,gV,gW,gX,gY,gZ,g0){var g1;return b5.StartsWith(gS,gP.id.get_Text())||gS===v.sanitize(gP.name)?(g1=a.Number(gT)>0?a.Number(gT):0,{$:1,$0:bw.New(g0,b5.StartsWith(gY.toUpperCase(),"ERR")?"error":b5.StartsWith(gY.toUpperCase(),"INFO")?"info":"warning",bk.cmPos(gU-1,gV-1-g1),bk.cmPos(gW-1,gX-1-g1))}):null;}gK(b_.choose(function(gS){return gR(gS[0],gS[1],gS[2],gS[3],gS[4],gS[5],gS[6],gS[7],gS[8]);},b_.choose(function(gS){var gT,gU,gV,gW,gX,gY,gZ,g0;return(gU=c.REGEX(d0,"",gS),gU!=null&&gU.$==1&&((gV=gU.$0,gV&&b_.length(gV)===13)&&(gT=[b_.get(gU.$0,8),b_.get(gU.$0,5),b_.get(gU.$0,7),b_.get(gU.$0,2),b_.get(gU.$0,4),b_.get(gU.$0,11),b_.get(gU.$0,1),b_.get(gU.$0,10),b_.get(gU.$0,9)],true)))?{$:1,$0:[gT[1],gT[4],a.Number(gT[2]),a.Number(gT[0]),a.Number(gT[8]),a.Number(gT[7]),gT[6],gT[3],gT[5]]}:(gX=c.REGEX(dZ,"",gS),gX!=null&&gX.$==1&&((gY=gX.$0,gY&&b_.length(gY)===8)&&(gW=[b_.get(gX.$0,4),b_.get(gX.$0,2),b_.get(gX.$0,3),b_.get(gX.$0,1),b_.get(gX.$0,6),b_.get(gX.$0,5)],true)))?(gZ=gW[0],(g0=gW[2],{$:1,$0:[gW[1],gW[3],a.Number(g0),a.Number(gZ)-1,a.Number(g0),a.Number(gZ),gW[5],"fsi",gW[4]]})):null;},(gQ=c.REGEX(d1,"g",dG.c),gQ!=null&&gQ.$==1?gQ.$0:[]))));return b2.Zero();}))):b2.Zero();})),null);}function f7(gJ){f6.apply(null,gJ);}function f8(gJ){return gJ==="C"?"class":gJ==="Cn"?"Constant":gJ==="D"?"delegate":gJ==="E"?"enum":gJ==="P"?"property":gJ==="e"?"event":gJ==="X"?"exception":gJ==="F"?"field":gJ==="I"?"interface":gJ==="M"?"function":gJ==="N"?"module":gJ==="S"?"struct":gJ==="T"?"type":gJ==="V"?"Variable":gJ;}function f9(gJ,gK,gL){var gM;d2((gM=null,b2.Delay(function(){return b2.Bind(dW,function(gN){var gO,gP,gQ,gR;return gN?b2.Zero():(gO=bT.FetchO(cX.c),gO!=null&&gO.$==1?(gP=gJ.getCursor(),(gQ=gJ.getLine(gP.line),(gR=f3(gQ,gP.ch),b2.Bind(dT.Complete(fY(dV),gQ+"a",gP.line+1,gP.ch+1,gO.$0.get_NameSanitized()),function(gS){function gT(gU,gV,gW,gX){return bt.New(gV,(((b7.Curried3(function(gY,gZ,g0){return gY(b5.PadRight(b8.toSafe(gZ),40)+" "+b5.PadLeft(b8.toSafe(g0),20));}))(a.id))(gU))(f8(gX)),gW);}gK(bu.New(b_.map(function(gU){return gT(gU[0],gU[1],gU[2],gU[3]);},gS),bq.New(gP.line,gP.ch-gR.length),gP));return b2.Zero();})))):b2.Zero());});})));}function f_(gJ){var gK,gL,gM;gK=(gL=gJ.parent,gL==null?null:bT.FetchO(gL.$0));gK==null?void 0:(gM=gK.$0,f_(gM),!gM.expanded?fI(gM):void 0);}function f$(gJ,gK,gL){var gM;return b2.Start((gM=null,b2.Delay(function(){var gN;cF.Set(cX,gJ);gN=bT.FetchO(gJ);gN==null?void 0:f_(gN.$0);return b2.Bind(b2.Sleep(200),function(){var gO,gP;gO=d3.editorO;gO==null?void 0:(gP=gO.$0,gP.setCursor(gK-1,gL-1),gP.focus());return b2.Zero();});})),null);}function ga(gJ){var gK,gL,gM,gN,gO;gK=c.REGEX("([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}).+?\\((\\d+)\\,\\s*(\\d+)\\)","",gJ);gK!=null&&gK.$==1?(gL=gK.$0,gL&&b_.length(gL)===4)?(gM=b_.get(gK.$0,3),gN=b_.get(gK.$0,1),gO=b_.get(gK.$0,2),f$(new w({$:0,$0:gN}),a.Number(gO),a.Number(gM))):void 0:void 0;}function gb(){var gJ;b2.Start((gJ=null,b2.Delay(function(){var gK,gL,gM,gN,gO;gK=bT.FetchO(cX.c);gL=d3.editorO;return(gL!=null&&gL.$==1?gK!=null&&gK.$==1?(gM=[gK.$0,gL.$0],false):true:true)?b2.Zero():(gN=gM[1],(gO=gN.getCursor(),(gN.getLine(gO.line),b2.Bind(dT.FindDecl(fY(dV),gO.line+1,gO.ch+1,gM[0].get_NameSanitized()),function(gP){var gQ;return gP.$==9?(gQ=gP.$0,(ga(((((((b7.Curried(function(gR,gS,gT,gU,gV,gW){return gR(b8.toSafe(gS)+" ("+a.String(gT)+", "+a.String(gU)+") - ("+a.String(gV)+", "+a.String(gW)+")");},6))(a.id))(gQ.File))(gQ.Line))(gQ.Column))(gQ.Line))(gQ.Column)),b2.Zero())):gP.$==1?(a.alert((function(gR){return function(gS){return gR(b1.p(gS));};}(a.id))(gP.$0)),b2.Zero()):(a.alert((function(gR){return function(gS){return gR(b0.p$7(gS));};}(a.id))(gP)),b2.Zero());}))));})),null);}function gc(){var gJ;gJ=d3.editorO;gJ==null?void 0:gJ.$0.refresh();}function gd(gJ){var gK;b2.Start((gK=null,b2.Delay(function(){return b2.Bind(b2.Sleep(gJ),function(){gc();return b2.Zero();});})),null);}function ge(){cF.Set(dJ,true);}function gf(gJ,gK){return new bR.New(ge,gJ,gK);}function gg(gJ,gK,gL){return gf(gJ,gK).get_ValueVar().RSet(gL);}function gh(gJ,gK){return bf.table(ch.ofSeq(b3.delay(function(){return b3.append([bf.thead([bf.th([bf.htmlText("Property"),bf.style("padding-right:10px")]),bf.th([bf.htmlText("Value")])])],b3.delay(function(){return b3.append(b3.map(function(gL){var gM;gM=gf(gK,gL);return bf.tr([bf.td([bf.someElt(cB.Input([],gM.get_KeyVar()))]),bf.td([bf.someElt(cB.InputArea([bf.atr("style","height: 1.5em")],gM.get_ValueVar()))]),bk.hoverable(bf.td([bf.title("remove"),bf.style(" cursor: pointer "),bf.htmlText("x"),new bj({$:8,$0:cD.Handler("click",function(){return function(){gM.Remove();return cF.Set(d_,null);};})})]))]);},b3.sort(gK.get_Keys())),b3.delay(function(){return[bf.tr([bk.hoverable(bf.td([bf.htmlText("Add..."),new bj({$:8,$0:cD.Handler("click",function(){return function(){gK.Add("","1");ge();return cF.Set(d_,null);};})})])),bf.td([bf.htmlText("")])])];}));}));})));}function gi(gJ){function gK(gM){return gM.properties;}function gL(gM,gN){return x.New(gM.name,gM.content,gM.parent,gM.predecessors,gM.id,gM.expanded,gM.level,gM.levelCode,gN);}return eU(new cd.New$5(),function(gM){return bN.codeSnippets().TryFindByKey(gM);},function(gM){return bN.codeSnippets().LensInto(gK,gL,gM);},gJ);}function gj(gJ){return new bg({$:1,$0:gJ});}function gk(gJ,gK,gL,gM){var gN;return p.start(fg,(gN=gJ(gK),(p.map(a.ignore))(gN)));}function gl(gJ,gK,gL,gM){function gN(gO,gP){if(gO==null)fg("Failed!\n"+gP);else if(gO.$0[0].$==0){fg(gP);cF.Set(ea,null);}else fg(gP);}return p.startV(function(gO){return gN(gO[0],gO[1]);},gJ(gK));}function gm(gJ,gK,gL){function gM(gN){return(gJ(gL))(gN);}return b7.Curried(gk,2,[gM,gK]);}function gn(gJ,gK,gL){function gM(gN){return(gJ(gL))(gN);}return b7.Curried(gl,2,[gM,gK]);}function go(gJ){var gK,gL,gM;gK=gJ.parms;return gK!=null&&gK.$==1&&((gM=gK.$0,gM&&b_.length(gM)===1)&&(gL=b_.get(gK.$0,0),true))?bT.FetchByPathO(b5.SplitChars(gL,["/"],0)):fu();}function gp(gJ,gK){var gL;gL=p.wrap();return gL.Run(gL.Delay(function(){return gL.Bind$2(bg.getAsync(gJ.text),function(gM){var gN,gO,gP,gQ,gR,gS,gT,gU,gV,gX,gY,gZ,g0,g1;function gW(g2){return gX==null?null:bN["CodeSnippet.propValue"](gX.$0,g2);}ff(gM+"...");gX=fu();gY=gK?g.defaultValue("",(gO=gW("open"),gO==null?null:{$:1,$0:c.__(function(g2,g3){return g2+g3;},"\n",gO.$0)})):"";gZ=cR.Create(function(){return g.defaultValue("${parm}() |> printfn \"%A\"",gW("action-template"));});g0=(gU=gJ.parms,gU==null?null:{$:1,$0:b_.map(a.id,gU.$0)});switch(g0!=null&&g0.$==1?(g1=g0.$0,g1&&b_.length(g1)===2?b_.get(g0.$0,0)==="Code"?(gV=b_.get(g0.$0,1),0):b_.get(g0.$0,0)==="Property"?(gV=b_.get(g0.$0,1),1):2:2):2){case 0:gT={$:1,$0:gV};break;case 1:gT=gW(gV);break;case 2:gT=null;break;}gS=gT==null?gW(gM):gT;gP=(gQ=g.defaultWith(function(){return((cL.constructor("return function(parm) { return `"+gZ.f()+"`}"))())(gM);},gS),b5.StartsWith(gQ,"////")?gQ:gY+gQ);return gX!=null&&gX.$==1?gL.Bind$2((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.getPresence:-1568677081",[bd.extractConfig(gP),(function(g2){return function(g3){return g2(b0.p$6(g3));};}(a.id))(gX.$0.id)]),function(g2){return b4.Equals(g2,{$:1,$0:"ok"})?gL.Return(gP):gL.Bind$3(fw(gX),function(){return gL.Return(gP);});}):gL.Return(gP);});}));}function gq(gJ,gK){return p.bind(fz,gp(gJ,true));}function gr(gJ,gK){return p.bind(fD,gp(gJ,false));}function gs(gJ,gK){return fy(go(gJ));}function gt(gJ,gK){return fC(go(gJ));}function gu(gJ,gK){var gL;gL=go(gJ);return(dL(gK))(gL);}function gv(gJ,gK){var gL;gL=p.wrapper();return gL.Run(gL.Delay(function(){return gL.Bind$1(m.tryProtection(),function(){var gM,gN,gO,gP,gQ;return gL.Bind$1((gM=gJ.parms,gM!=null&&gM.$==1&&((gO=gM.$0,gO&&b_.length(gO)===3)&&(gN=[b_.get(gM.$0,1),b_.get(gM.$0,0),b_.get(gM.$0,2)],true))?(gP=gN[1],(g.defaultWith(function(){((function(gR){return function(gS){return gR("setSnippetProp snippet not found: "+b8.toSafe(gS));};}(function(gR){b$.log(gR);}))(gP));},(gQ=bT.FetchByPathO(b5.SplitChars(gP,["/"],0)),gQ==null?null:{$:1,$0:gg(gQ.$0.properties,gN[0],gN[2])})),m.succeed())):m.failSimpleError((function(gR){return function(gS){return gR("setSnippetProp wrong parms: "+b0.p$8(gS));};}(a.id))(gJ.parms))),function(){return gL.Return();});});}));}function gw(gJ,gK){var gL,gM,gN,gO,gP,gQ;((function(gR){return function(gS){return gR("showOutText: "+b1.p$22(gS));};}(function(gR){b$.log(gR);}))(gJ));gM=gJ.parms;switch(gM!=null&&gM.$==1?(gN=gM.$0,gN&&b_.length(gN)===1?(gL=b_.get(gM.$0,0),0):(gO=gM.$0,gO&&b_.length(gO)===2?(b_.get(gM.$0,1),b_.get(gM.$0,0)===""?(gL=[b_.get(gM.$0,0),b_.get(gM.$0,1)],1):2):2)):2){case 0:return ff(gL);break;case 1:return ff(gL[1]);break;case 2:return gM!=null&&gM.$==1&&((gQ=gM.$0,gQ&&b_.length(gQ)===2)&&(b_.get(gM.$0,1),b_.get(gM.$0,0)==="+"&&(gP=[b_.get(gM.$0,0),b_.get(gM.$0,1)],true)))?fg(gP[1]):(function(gR){return function(gS){return gR("error: showOutText "+b1.p$22(gS));};}(function(gR){b$.log(gR);}))(gJ);break;}}function gx(){return fE(c2.c);}function gy(){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){dC=null;return gJ.Bind$2(f0(false),function(){return gJ.Return();});}));}function gz(gJ,gK){var gL,gM;function gN(gO,gP,gQ){return gM>=gP&&gM<gQ?{$:1,$0:gO}:null;}gL=gJ.value;gM=gJ.selectionStart;return ga(b3.pick(function(gO){return gN(gO[0],gO[1],gO[2]);},(b3.mapFold(function(gO,gP){return[[gP,gO,gO+gP.length+1],gO+gP.length+1];},0,b5.SplitChars(gL,["\n"],0)))[0]));}function gA(gJ,gK){var gL;return b2.Start((gL=null,b2.Delay(function(){return b2.Bind(b2.Sleep(100),function(){gJ.scrollTop=gJ.scrollHeight;return b2.Zero();});})),null);}function gB(gJ,gK,gL){var gM;gM=m.result();return gM.Run(gM.Delay(function(){return gM.Bind(m.tryProtection(),function(){return gM.Bind(eO.GetGuiCallAction(gJ,gK,gL),function(gN){var gO;gO=gN.onClick;gO==null?void 0:((gO.$0(gN))(null))(null);return gM.Zero();});});}));}function gC(gJ){gd(1000);gd(2000);gd(3000);eO.SetLayoutJson(eI,gJ);}function gD(gJ){gd(1000);gd(2000);gd(3000);eO.AddNewSteps(eI,gJ);}function gE(gJ){return b_.ofSeq(b3.map(function(gK){return[gK.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gK.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gJ));}function gF(gJ){var gK;return{$:4,$0:(gK=gJ.$0,gK==null?null:{$:1,$0:gK.$0[1]}),$1:b_.ofSeq(b3.map(function(gL){return[gL.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gL.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gJ.$1))};}function gG(gJ){var gK,gL;return{$:4,$0:(gK=function(gM){return function(gN){return gM(b8.prettyPrint(gN));};}(a.id),(gL=gJ.$0,gL==null?null:{$:1,$0:gK(gL.$0)})),$1:b_.ofSeq(b3.map(function(gM){return[gM.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gM.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gJ.$1))};}function gH(gJ,gK){var gL;gL=null;return b2.Delay(function(){var gM,gN,gO,gP,gQ,gR,gS,gT,gU;return gK.$==2?b2.Return({$:1,$0:(gM=bT.FetchO(gK.$0),gM==null?null:{$:1,$0:gM.$0.content})}):gK.$==3?b2.Return({$:1,$0:(gN=bT.FetchO(gK.$0),gN==null?null:{$:1,$0:bN["CodeSnippet.GetCodeFsx"](gN.$0,true)})}):gK.$==4?b2.Return({$:3,$0:g.defaultValue([],(gO=bT.FetchO(gK.$0),gO==null?null:{$:1,$0:bN["CodeSnippet.Predecessors"](gO.$0)}))}):gK.$==5?b2.Return({$:2,$0:bT.FetchO(gK.$0)}):gK.$==6?b2.Return({$:1,$0:(gP=bT.FetchByPathO(gK.$0),gP==null?null:{$:1,$0:gP.$0.content})}):gK.$==7?b2.Return({$:1,$0:(gQ=bT.FetchByPathO(gK.$0),gQ==null?null:{$:1,$0:bN["CodeSnippet.GetCodeFsx"](gQ.$0,true)})}):gK.$==10?(gR=bT.FetchByPathO(gK.$0),gR==null?b2.Return({$:4,$0:null,$1:[["Snippet not found",z.FSError]]}):b2.Bind(be.translateAR(bN["CodeSnippet.GetCodeFsx"](gR.$0,true),false),function(gV){return b2.Return({$:4,$0:m.getOption(m.map(bK.completeJS,gV)),$1:gE(m.getMsgs(gV))});})):gK.$==8?b2.Return({$:3,$0:g.defaultValue([],(gS=bT.FetchByPathO(gK.$0),gS==null?null:{$:1,$0:bN["CodeSnippet.Predecessors"](gS.$0)}))}):gK.$==9?b2.Return({$:2,$0:bT.FetchByPathO(gK.$0)}):gK.$==1?b2.Return({$:1,$0:{$:1,$0:"Message received: "+gK.$0}}):gK.$==0?b2.Return({$:0,$0:bN.fsIds()}):gK.$==12?d.map(gF,p.getAsyncR(ft(gK.$1,bO.NewBrowser,bT.FetchO(gK.$0)))):gK.$==13?d.map(gF,p.getAsyncR(ft(gK.$1,bO.NewBrowser,bT.FetchByPathO(gK.$0)))):gK.$==14?(gT=gK.$0,b2.Return(gG(m.map(function(){return(function(gV){return function(gW){return gV("success: "+b8.toSafe(gW));};}(a.id))(gT);},gB(gT,gK.$1,gK.$2))))):b2.Return({$:1,$0:{$:1,$0:(gU=b_.ofSeq((bN.codeSnippets())["var"].RVal()),cj.stringify(((cm.EncodeArray(bZ.j$7))())(gU)))}});});}function gI(gJ){!ch.contains(gJ,eS.c)?cF.Set(eS,new ch.T({$:1,$0:gJ,$1:eS.c})):void 0;gd(300);}cW=cF.Create$1("");cX=cF.Create$1(w.get_New());cY="CodeEditor."+"currentCodeSnippetId";cZ=a.localStorage.getItem(cY);cZ!==null?cX.set_RVal((bY.j$7())(cj.parse(cZ))):void 0;bg.sink(function(gJ){a.localStorage.setItem(cY,cj.stringify((bZ.j$5())(gJ)));},cX);c0=cF.Create$1();c1=bg.map2(function(gJ){return function(){return bN.codeSnippets().TryFindByKey(gJ);};},cX,c0);c2=cF.Create$1(bO.Below);c3="CodeEditor."+"position";c4=a.localStorage.getItem(c3);c4!==null?c2.set_RVal((bY.j$8())(cj.parse(c4))):void 0;bg.sink(function(gJ){a.localStorage.setItem(c3,cj.stringify((bZ.j$6())(gJ)));},c2);bg.map(function(gJ){return gJ.$==1;},c2);c5=bg.map(function(gJ){return b4.Equals(bT.FetchO(gJ),null);},cX);c6=(c7=bg.map((c8=(c9=function(gJ){return gJ==null?null:eY(gJ.$0);},function(gJ){return c9(bT.FetchO(gJ));}),function(gJ){return eZ(c8(gJ));}),cX),(c_=[cF.Create$1(null)],(cA.Sink(function(gJ){if(!b4.Equals(c_[0].c,gJ))cF.Set(c_[0],gJ);},bg.toView(c7)),new bg({$:1,$0:c_[0]}))));c$=(da=bg.map((db=(dc=function(gJ){return gJ==null?null:e0(gJ.$0);},function(gJ){return dc(bT.FetchO(gJ));}),function(gJ){return e1(db(gJ));}),cX),(dd=[cF.Create$1(null)],(cA.Sink(function(gJ){if(!b4.Equals(dd[0].c,gJ))cF.Set(dd[0],gJ);},bg.toView(da)),new bg({$:1,$0:dd[0]}))));de=(df=bg.map((dg=(dh=function(gJ){return gJ==null?null:e2(gJ.$0);},function(gJ){return dh(bT.FetchO(gJ));}),function(gJ){return e3(dg(gJ));}),cX),(di=[cF.Create$1(null)],(cA.Sink(function(gJ){if(!b4.Equals(di[0].c,gJ))cF.Set(di[0],gJ);},bg.toView(df)),new bg({$:1,$0:di[0]}))));dj=(dk=bg.map((dl=(dm=function(gJ){return gJ==null?null:e4(gJ.$0);},function(gJ){return dm(bT.FetchO(gJ));}),function(gJ){return e5(dl(gJ));}),cX),(dn=[cF.Create$1(null)],(cA.Sink(function(gJ){if(!b4.Equals(dn[0].c,gJ))cF.Set(dn[0],gJ);},bg.toView(dk)),new bg({$:1,$0:dn[0]}))));_do=(dp=bg.map((dq=(dr=function(gJ){return gJ==null?null:e6(gJ.$0);},function(gJ){return dr(bT.FetchO(gJ));}),function(gJ){return e7(dq(gJ));}),cX),(ds=[cF.Create$1(null)],(cA.Sink(function(gJ){if(!b4.Equals(ds[0].c,gJ))cF.Set(ds[0],gJ);},bg.toView(dp)),new bg({$:1,$0:ds[0]}))));dt=(du=bg.map((dv=(dw=function(gJ){return gJ==null?null:e8(gJ.$0);},function(gJ){return dw(bT.FetchO(gJ));}),function(gJ){return e9(dv(gJ));}),cX),(dx=[cF.Create$1(null)],(cA.Sink(function(gJ){if(!b4.Equals(dx[0].c,gJ))cF.Set(dx[0],gJ);},bg.toView(du)),new bg({$:1,$0:dx[0]}))));dy=bg.map(function(gJ){return gJ!=="0"&&gJ!=="";},e_("DisableParse"));dz=bg.map2(function(gJ){return function(gK){return e$(gJ,gK);};},dy,e_("DisableFSI"));dA=bg.map2(function(gJ){return function(gK){return e$(gJ,gK);};},dy,e_("DisableFable"));dB=bg.map2(function(gJ){return function(gK){return e$(gJ,gK);};},dy,e_("DisableWebSharper"));dC=null;dD=new t.New(function(gJ){var gK;gK=gJ==null?null:{$:1,$0:new cO.New$2(gJ.$0.UniquePredecessors(bT.FetchO))};return g.defaultValue(new cO.New$3(),gK);});dE=cF.Create$1("");dF=cF.Create$1("");dG=cF.Create$1("");dH=cF.Create$1("");dI=false;dJ=cF.Create$1(false);bg.sink(function(gJ){a.onbeforeunload=gJ?function(gK){gK.returnValue="Changes you made may not be saved.";}:null;},dJ);dK=w.get_New();bU.set_addOutMsg(fg);dL=(dM=a.location.origin+"/Main.html",(b7.Curried3(ft))(dM));dN=bg.map(function(gJ){var gK,gL;gK=null;return dD.cache.TryGetValue(gJ,{get:function(){return gK;},set:function(gM){gK=gM;}})?gK:(gL=dD.f(gJ),(dD.cache.set_Item(gJ,gL),gL));},c1);dO=0;dP=cF.Create$1("");bg.map(function(gJ){return gJ==="";},dP);dQ="CodeEditorFileSel";dR=bm.New$3(cF.Lens(dP,fR,a.id)).Prefix$1(bf.label([bf["class"]("btn btn-primary"),bf.htmlText("Load File..."),bm.New$3(dP).Type("file").Style("display: none").Content([cD.Handler("change",function(gJ){return function(){return fU(gJ);};}),cD.Handler("click",function(gJ){return function(){gJ.value="";};})]).Id(dQ).get_Render()]));cV!==""?b2.Start((dS=null,b2.Delay(function(){return b2.Bind(b2.Sleep(3000),function(){var gJ;((function(gK){return function(gL){return gK("loading "+b8.toSafe(gL)+"...");};}(function(gK){b$.log(gK);}))(cV));gJ=cS.getJSON(cV+"?t="+a.String(cT.now()));gJ.done(function(){return fT(gJ.responseText);});return b2.Zero();});})),null):void 0;dT=new bb.New("FSharpStation",{$:1,$0:a.location.href});dU=bN.fsIds()+".fsx";dV="a";dW=cA.GetAsync(bg.toView(dy));dX=1;dY=false;dZ="\\((\\d+)\\) F# (.+).fsx\\((\\d+)\\,(\\d+)\\): (error|warning) ((.|\\b)+)";d0="(Err|Warning|Info)(FSharp|WebSharper)\\s+\"(\\((\\d+)\\) ?)?F?#? ?(.+?)(.fsx)? \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\) ((.|\\s)+?)"+"\"";d1=dZ+"|"+d0;d2=c.asyncStartCancelling();d3=bs.New$3((d4=bg.toView(bg.fixit(cX)),(d5=cF.Create$1(null),(d6=[null],(d7=[0],(d8=[0],(cA.Sink(function(){var gJ,gK;gJ=d6[0];gJ==null?void 0:(gK=gJ.$0,d7[0]>d8[0]?d8[0]=d7[0]:!b4.Equals(gK.RVal(),d5.c)?(d8[0]=d8[0]+1,gK.set_RVal(d5.c)):void 0);},d5.v),cA.Sink(function(){var gJ,gK;gJ=d6[0];gJ==null?void 0:(gK=gJ.$0,d8[0]>d7[0]?d7[0]=d8[0]:!b4.Equals(gK.RVal(),d5.c)?(d7[0]=d7[0]+10,cF.Set(d5,gK.RVal())):void 0);},cA.Bind(function(gJ){var gK;gK=eX(gJ);d6[0]={$:1,$0:gK};d8[0]=d7[0]+100;cF.Set(d5,gK.RVal());return gK.RView();},d4)),d5))))))).OnChange(function(){var gJ;dC!=null&&dC.$==1&&(b4.Equals(dC.$0[0],cX.c)&&(gJ=[dC.$0[0],dC.$0[2]],true))?fa():fb();}).OnRender(function(gJ){var gK;function gL(gO){return f9(gO[0],gO[1],gO[2]);}function gM(gO){gJ.replaceSelection(".","end");}function gN(gO){return f9(gO[0],gO[1],gO[2]);}gJ.addKeyMap(bQ.New(f5,f5,function(gO){bk.showHints(gJ,gL,false,gO);},(gK=function(){bk.showHints(gJ,gN,false,void 0);},function(gO){return gK(gM(gO));})));bk.setLint(gJ,f7);bg.sink(function(gO){var gP;b2.Start((gP=null,b2.Delay(function(){gJ.setOption("theme",gO);return b2.Bind(b2.Sleep(50),function(){gJ.refresh();return b2.Zero();});})),null);},dj);bg.sink(function(gO){gJ.setOption("mode",gO);},de);}).Style("height: 100%");d9=d3.get_Render().AddChildren([new bj({$:8,$0:cD.Handler("dblclick",function(){return function(){return f5(d3.editorO.$0);};})}),bf.htmlElement("menu",[bf.type("context"),bf.Id("right-menu"),bf.htmlElement("menuitem",[bf.htmlAttribute("label","Goto Definition"),new bj({$:8,$0:cD.Handler("click",function(){return function(){return gb();};})})])]),bf.htmlAttribute("contextmenu","right-menu")]);bg.sink(function(){var gJ;b2.Start((gJ=null,b2.Delay(function(){var gK,gL;return!dI?b2.Zero():(gK=d3.editorO,gK!=null&&gK.$==1?(gL=bT.FetchO(cX.c),gL!=null&&gL.$==1?(gK.$0.performLint(),b2.Zero()):b2.Zero()):b2.Zero());})),null);},dG);d_=cF.Create$1();d$=bf.div([new bj({$:2,$0:bg.map2(function(gJ){return function(gK){return gh(gJ,gK);};},d_,bg.bind(function(gJ){return gj(gi(gJ));},cX))}),bf.css(" td.hovering { background: gray; } ")]);ea=cF.Create$1();eb=bE.New$1("Load...").OnClick(function(gJ){return function(gK){return fW(gJ,gK);};});ec=bE.New$1("Save as...").OnClick(b7.Curried(bk.Do,2,[fV,null])).Highlight(dJ);ed=bE.New$1("Add Snippet").OnClick(b7.Curried(bk.Do,2,[fP,null]));ee=bE.New$1("Delete Snippet").OnClick(b7.Curried(bk.Do,2,[fQ,null])).Disabled(c5);ef=bE.New$1("Indent In  >>").OnClick(b7.Curried(bk.Do,2,[fk,null])).Disabled(c5);eg=bE.New$1("Indent Out <<").OnClick(b7.Curried(bk.Do,2,[fl,null])).Disabled(c5);eh=bE.New$1("Get F# Code").OnClick(b7.Curried(bk.Do,2,[fi,null])).Disabled(dy);ei=bE.New$1("actSetSnippetProp").OnClick2(function(gJ){return gm(function(gK){return function(gL){return gv(gK,gL);};},null,gJ);}).Disabled(dz);ej=bE.New$1("Run FSI on Code").OnClick2(function(gJ){return gm(function(gK){return function(gL){return gq(gK,gL);};},null,gJ);}).Disabled(dz);ek=bE.New$1("Run FSI").OnClick2(function(gJ){return gm(function(gK){return function(gL){return gs(gK,gL);};},null,gJ);}).Disabled(dz);el=bE.New$1("Run Fable on Code").OnClick2(function(gJ){return gm(function(gK){return function(gL){return gr(gK,gL);};},null,gJ);}).Disabled(dA);em=bE.New$1("Run Fable").OnClick2(function(gJ){return gm(function(gK){return function(gL){return gt(gK,gL);};},null,gJ);}).Disabled(dA);en=bE.New$1("Run WebSharper in new tab").OnClick2((eo=bO.NewBrowser,function(gJ){return gm(function(gK){return function(gL){return gu(gK,gL);};},eo,gJ);})).Disabled(dB);ep=bE.New$1("Run WebSharper in WS Result").OnClick2((eq=bO.Below,function(gJ){return gn(function(gK){return function(gL){return gu(gK,gL);};},eq,gJ);})).Disabled(dB);er=bE.New$1("Run WebSharper in ...").OnClick(b7.Curried(gl,2,[gx,null])).Disabled(dB);es=bE.New$1("Parse F#").OnClick(b7.Curried(gk,2,[gy,null])).Disabled(dy);et=bE.New$1("Compile WebSharper").OnClick((eu=function(gJ){return fm(fu(gJ));},b7.Curried(gk,2,[eu,null]))).Disabled(dB);ev=bE.New$1("Find Definition").OnClick(b7.Curried(bk.Do,2,[gb,null])).Disabled(dy);ew=bE.New$1("Refresh CodeMirror").OnClick(b7.Curried(bk.Do,2,[gc,null]));ex=bE.New$1("Show Output text").OnClick2(b7.Curried(bk.Do2,3,[gw,null]));ey=bE.New$1("Abort FSI").OnClick(b7.Curried(bk.Do,2,[function(){bc.abortFsiExe();},null]));ez=bf.div([ed.get_Button().get_Render(),eg.get_Button().get_Render(),ef.get_Button().get_Render(),dR.get_Render().AddChildren([bf.style("grid-column: 4/6")]),ek.get_Button().get_Render(),em.get_Button().get_Render(),er.get_Button().get_Render(),ee.get_Button().get_Render(),ev.get_Button().get_Render(),bf.span([]),ec.get_Button().get_Render(),bf.span([]),eh.get_Button().get_Render(),es.get_Button().get_Render(),bf.someElt(cB.Select([cE.Create("id","Position")],function(gJ){return gJ.$==1?"Right":gJ.$==2?"In Tab":gJ.$==3?"New Browser":"Below";},ch.ofArray([bO.NewBrowser,bO.Below]),c2)),bf.style("\n                    overflow: hidden;\n                    display: grid;\n                    grid-template-columns: repeat(8, 12.1%);\n                    bxackground-color: #eee;\n                    padding : 5px;\n                    grid-gap: 5px;\n                ")]);eA=bD.New2([bB.New$2("File").SubMenu([eb.get_MenuEntry(),ec.get_MenuEntry()]),bB.New$2("Code").SubMenu([ed.get_MenuEntry(),ee.get_MenuEntry(),bB.New$2("").get_Divider(),ef.get_MenuEntry(),eg.get_MenuEntry(),bB.New$2("").get_Divider(),ev.get_MenuEntry(),bB.New$2("").get_Divider(),eh.get_MenuEntry(),bB.New$2("").get_Divider(),ew.get_MenuEntry()]),bB.New$2("Run").SubMenu([ek.get_MenuEntry(),ey.get_MenuEntry(),bB.New$2("").get_Divider(),em.get_MenuEntry(),bB.New$2("").get_Divider(),en.get_MenuEntry(),ep.get_MenuEntry(),bB.New$2("").get_Divider(),es.get_MenuEntry(),et.get_MenuEntry()])]);eB=bD.New2([bB.New$2("About").SubMenu([bB.New$1("Source @ GitHub","https://github.com/amieres/FSharpStation").Target("_blank")])]);eC=bk.navbar(bf.h1([bf.htmlText("F# Station"),bf.style("font-size: 48px; margin-top: -17px")]),eA.get_Render(),eB.get_Render());eD="CodeEditor."+"splitterV1";eE=bx.New$1(20).Children([bf.style("grid-row: 2 / 4")]).get_Var();eF=a.localStorage.getItem(eD);eF!==null?eE.set_RVal(((cm.Id())())(cj.parse(eF))):void 0;bg.sink(function(gJ){a.localStorage.setItem(eD,cj.stringify(((cm.Id())())(gJ)));},eE);eG=bf.bindHElem(function(gJ){return bf.div(ch.ofSeq(b3.delay(function(){return b3.append([bf.style("overflow: auto")],b3.delay(function(){var gK;return b3.append(b3.choose(a.id,(gK=b3.indexed(gJ),b3.mapFold(function(gL,gM){var gN,gO,gP,gQ,gR;gN=gM[1];return g.defaultValue(true,(gO=gN.parent,gO==null?null:{$:1,$0:gL.Contains(gO.$0)}))?(gP=g.defaultValue(false,(gQ=b3.tryItem(gM[0]+1,bN.codeSnippets()),gQ==null?null:{$:1,$0:b4.Equals(gQ.$0.parent,{$:1,$0:gN.id})})),(gR=gP&&gN.expanded,[{$:1,$0:fJ(gP,gR,gN)},gR?gL.Add(gN.id):gL])):[null,gL];},new cI.New(ch.T.Empty),gK))[0]),b3.delay(function(){return b3.append([new bj({$:8,$0:cD.Handler("scroll",function(gL){return function(){dO=gL.scrollTop;};})})],b3.delay(function(){return[new bj({$:8,$0:cD.OnAfterRender(function(gL){gL.scrollTop=dO;})})];}));}));}));})));},(eH=bN.codeSnippets().v,cA.SnapshotOn((bN.codeSnippets())["var"].RVal(),c0.v,eH)));eI=bJ.AddGuids([["actLoadFile",new bF({$:2,$0:eb})],["actSaveFile",new bF({$:2,$0:ec})],["actAddSnippet",new bF({$:2,$0:ed})],["actDeleteSnippet",new bF({$:2,$0:ee})],["actIndentSnippet",new bF({$:2,$0:ef})],["actOutdentSnippet",new bF({$:2,$0:eg})],["actGetFsCode",new bF({$:2,$0:eh})],["actSetSnippetProp",new bF({$:2,$0:ei})],["actEvalFsCode",new bF({$:2,$0:ej})],["actEvalCode",new bF({$:2,$0:ek})],["actRunFableFs",new bF({$:2,$0:el})],["actRunFable",new bF({$:2,$0:em})],["actRunWSNewTab",new bF({$:2,$0:en})],["actRunWSHere",new bF({$:2,$0:ep})],["actRunWSIn",new bF({$:2,$0:er})],["actParseCode",new bF({$:2,$0:es})],["actCompileWS",new bF({$:2,$0:et})],["actFindDefinition",new bF({$:2,$0:ev})],["actOutText",new bF({$:2,$0:ex})],["Output",new bF({$:1,$0:bp.New$3(dH).Placeholder("Output:").Title("Output").RenderWith(ch.ofArray([new bj({$:8,$0:cD.Handler("dblclick",function(gJ){return function(gK){return gz(gJ,gK);};})}),new bj({$:8,$0:cD.OnAfterRender(function(gJ){bg.sink(function(gK){return gA(gJ,gK);},dH);})})]))})],["Parser",new bF({$:1,$0:bp.New$3(dG).Placeholder("Parser messages:").Title("Parser").RenderWith(ch.ofArray([new bj({$:8,$0:cD.Handler("dblclick",function(gJ){return function(gK){return gz(gJ,gK);};})})]))})],["JavaScript",new bF({$:1,$0:bp.New$3(dF).Placeholder("Javascript:").Title("JavaScript code generated").get_Render()})],["F# code",new bF({$:1,$0:bp.New$3(dE).Placeholder("F# code:").Title("F# code assembled").get_Render()})],["Properties",new bF({$:1,$0:d$})],["WS Result",new bF({$:1,$0:bf.div([bf.div([bf.Id("TestNode"),bf.style("background: white; height: 100%; width: 100%; ")])])})],["title",new bF({$:1,$0:bm.New$3((eJ=bg.toView(bg.fixit(cX)),(eK=cF.Create$1(null),(eL=[null],(eM=[0],(eN=[0],(cA.Sink(function(){var gJ,gK;gJ=eL[0];gJ==null?void 0:(gK=gJ.$0,eM[0]>eN[0]?eN[0]=eM[0]:!b4.Equals(gK.RVal(),eK.c)?(eN[0]=eN[0]+1,gK.set_RVal(eK.c)):void 0);},eK.v),cA.Sink(function(){var gJ,gK;gJ=eL[0];gJ==null?void 0:(gK=gJ.$0,eN[0]>eM[0]?eM[0]=eN[0]:!b4.Equals(gK.RVal(),eK.c)?(eM[0]=eM[0]+10,cF.Set(eK,gK.RVal())):void 0);},cA.Bind(function(gJ){var gK;gK=eW(gJ);eL[0]={$:1,$0:gK};eN[0]=eM[0]+100;cF.Set(eK,gK.RVal());return gK.RView();},eJ)),eK))))))).Prefix$1(bf.htmlText("name:")).get_Render()})],["code",new bF({$:1,$0:d9})],["snippets",new bF({$:1,$0:eG})],["buttons",new bF({$:1,$0:ez})],["menu",new bF({$:1,$0:eC})],["messagesR",new bF({$:4,$0:true,$1:["Properties"]})],["messagesB1",new bF({$:4,$0:true,$1:["Output","JavaScript","F# code"]})],["messagesB2",new bF({$:4,$0:true,$1:["Parser","WS Result"]})],["messagesB",bk.varVerSplitter(55,"messagesB1","messagesB2",0,100)],["title_code",bk.fixedHorSplitter(true,34,"title","code")],["code_props",bk.varVerSplitter(85,"title_code","messagesR",25,100)],["code_buttons",bk.fixedHorSplitter(false,80,"code_props","buttons")],["snippets_code",bk.varVerSplitter(15,"snippets","code_buttons",5,95)],["main_messages",bk.varHorSplitter(82,"snippets_code","messagesB",35,100)],["extrabuttons",new bF({$:1,$0:bf.div([])})],["main_extra",bk.varVerSplitter(100,"main_messages","extrabuttons",20,100)],["main",bk.fixedHorSplitter(true,50,"menu","main_extra")]]);eO=bJ.New$1(eI);a.addLayoutJson=gC;bg.sink(gC,_do);bg.sink(function(gJ){if(gJ==="")gD([]);else fo(a,gJ);},dt);a.doFSharpStationGuiCall=function(gJ){var gK,gL;gK=m.Success(gB.apply(null,gJ));gK.$==1?((gL=(b7.Curried3(function(gM,gN,gO){return gM("Error doGuiCall "+b8.printArray(b8.prettyPrint,gN)+": "+("("+b8.prettyPrint(gO[0])+", "+b8.prettyPrint(gO[1])+", "+b8.printArray(b8.prettyPrint,gO[2])+")"));}))(function(gM){b$.log(gM);}),function(gM){var gN;gN=gL(gM);return function(gO){gN([gO[0],gO[1],gO[2]]);};})(gK.$0))(gJ):void 0;};a.setFSharpStationLayout=function(gJ){var gK;gK=bT.FetchO(cX.c);gK==null?void 0:gD(gJ.apply(null,[eO,gK.$0]));};eP=null;(new cd.New$5()).TryGetValue("",{get:function(){return eP;},set:function(gJ){eP=gJ;}})?void 0:void 0;bo.get_New();eQ=new L.New(bN.fsIds(),null,null);b2.Start((eR=null,b2.Delay(function(){return b2.Bind(b2.Sleep(1000),function(){return b2.While(function(){return true;},b2.Delay(function(){return b2.TryWith(b2.Delay(function(){var gJ,gK,gL,gM,gN;function gO(gR){return gH("",gR);}function gP(gR){return{$:1,$0:gR};}function gQ(gR){return(bY.j$9())(cj.parse(gR));}gJ=function(gR){return gP(gO(gR));};eQ.payloadProcessorO={$:1,$0:(gK=function(gR){return gJ(gQ(gR));},(gL=p.map(function(gR){return cj.stringify((bZ.j$8())(gR));}),function(gR){return gL(gK(gR));}))};p.Start(eQ.sendAndForget(A.msgType(D.MsgInformation,(gM=A.MessageBrokerAddress(),(gN=cj.stringify(((cm.Id())())("Registering Processor")),G.New(new B({$:0,$0:""}),gM,D.MsgRequest,"",cg.NewGuid(),gN,F.NoReply))))),null);return b2.Bind(b2.Sleep(60000),function(){return b2.Return(null);});}),function(gJ){((function(gK){return function(gL){return gK(b8.toSafe(gL));};}(function(gK){b$.log(gK);}))(gJ.message));return b2.Bind(b2.Sleep(1000),function(){return b2.Return(null);});});}));});})),null);bg.sink(function(){eO.SelectTab("Output");},dH);bg.sink(function(){eO.SelectTab("WS Result");},ea);b2.Start(d.sleepThen(function(){eO.SelectTab("Parser");},1000),null);eS=cF.Create$1(ch.ofArray(["/EPFileX/css/main.css"]));bg.sink(gI,c$);bg.sink(function(gJ){if(gJ!=="")gI((function(gK){return function(gL){return gK("/EPFileX/codemirror/content/theme/"+b8.toSafe(gL)+".css");};}(a.id))(gJ));},dj);eT=bf.div([bf.style("height: 100vh; width: 100% "),eO.get_Render().Style("height: 100%; width: 100% "),bf.script([bf.src("/EPFileX/FileSaver/FileSaver.js"),bf.type("text/javascript")]),bf.script([bf.src("http://code.jquery.com/jquery-3.1.1.min.js"),bf.type("text/javascript")]),bf.script([bf.src("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"),bf.type("text/javascript")]),bf.link([bf.href("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css("\n      \n        body { margin: 0px }     \n             \n        div textarea {\n            font-family     : monospace;\n        }\n        .code-editor-list-tile {\n            white-space     : nowrap; \n            border-style    : solid none none;\n            border-color    : white;\n            border-width    : 1px;\n            background-color: #D8D8D8;\n            display         : flex;\n        }\n        .code-editor-list-text{\n            padding         : 1px 10px 1px 5px;\n            overflow        : hidden;\n            text-overflow   : ellipsis;\n            white-space     : nowrap;\n            flex            : 1;\n        }\n        \n        .code-editor-list-tile.direct-predecessor {\n            font-weight     : bold;\n        }\n        .code-editor-list-tile.indirect-predecessor {\n            color           : blue;\n        }\n        .code-editor-list-tile.selected {\n            background-color: #77F;\n            color           : white;\n        }\n        .code-editor-list-tile.hovering {\n            background      : lightgray;\n        }\n        .code-editor-list-tile.hovering.selected {\n            background      : blue;\n        }\n        .code-editor-list-tile>.predecessor {\n            font-weight     : bold;\n            border-style    : inset;\n            border-width    : 1px;\n            text-align      : center;\n            color           : transparent;\n        }\n        .code-editor-list-tile.direct-predecessor>.predecessor {\n            color           : blue;\n        }\n        \n        .CodeMirror { height: 100%; }\n        \n        .node {\n            background-color: white; \n            width           : 2ch; \n            color           : #A03; \n            font-weight     : bold; \n            text-align      : center;\n            font-family     : arial;\n        }\n        .Warning { text-decoration: underline lightblue } \n        .Error   { text-decoration: underline red       } \n        .body    { margin         : 0px                 }\n        "),bf.style(" \n                color      : #333;\n                font-size  : small;\n                font-family: monospace;\n                line-height: 1.2;\n                    "),new bj({$:2,$0:bg.map(function(gJ){return bf.div(ch.ofSeq(b3.delay(function(){return b3.map(function(gK){return bf.link([bf.href(gK),bf.type("text/css"),bf.rel("stylesheet")]);},gJ);})));},eS)}),bf.css(c6)]);return(bf.renderDoc())(eT);};bX.$cctor=function(){var cV,cW,cX;bX.$cctor=a.ignore;function cY(cZ,c0){return new bj({$:8,$0:cD.Style(cZ,c0)});}bX.result=new n.New();bX.fromResult=m.toResultS;bX.toResult=m.fromResultS;bX.errOptionIsNone=new k.New();bX.wrap=new q.New();bX.wrapper=new q.New();bX.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bX.MessageBrokerId="<MessageBroker>";bX.MessageBrokerAddress=new B({$:0,$0:A.MessageBrokerId()});bX.valFlow=new bi.New();bX.renderDoc=(cV=(cW=cB.Empty(),function(cZ){return cZ==null?cW:cZ.$0;}),function(cZ){return cV(bf.chooseNode(cZ));});bX.string2Styles=(cX=function(cZ){return b_.map(function(c0){return cY(c0[0],c0[1]);},cZ);},function(cZ){return cX(bf.style2pairs(cZ));});bX.codeMirrorIncludes=["/EPFileX/codemirror/scripts/codemirror/codemirror.js","/EPFileX/codemirror/scripts/intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-compiler.js","/EPFileX/codemirror/scripts/codemirror/mode/none.js","/EPFileX/codemirror/scripts/codemirror/mode/fsharp.js","/EPFileX/codemirror/scripts/codemirror/mode/css.js","/EPFileX/codemirror/scripts/codemirror/mode/javascript.js","/EPFileX/codemirror/scripts/codemirror/mode/markdown.js","/EPFileX/codemirror/scripts/addon/search/searchcursor.js","/EPFileX/codemirror/scripts/addon/search/search.js","/EPFileX/codemirror/scripts/addon/search/jump-to-line.js","/EPFileX/codemirror/scripts/addon/dialog/dialog.js","/EPFileX/codemirror/scripts/addon/edit/matchbrackets.js","/EPFileX/codemirror/scripts/addon/selection/active-line.js","/EPFileX/codemirror/scripts/addon/display/fullscreen.js","/EPFileX/codemirror/scripts/addon/hint/show-hint.js","/EPFileX/codemirror/scripts/addon/lint/lint.js"];bX.observers=ch.T.Empty;bX.draggedTab=[null];bX.selectedPanels=cF.Create$1(new cu.New([]));bX.TabMoved=null;bX.codeSnippets=cU.Create(function(cZ){return cZ.id;},ch.T.Empty);bX.fsIds="FSharpStation"+a.String(cT.now());bX.references=["mscorlib.dll","System.dll","System.Core.dll","System.Data.dll","System.IO.dll","System.Xml.dll","System.Numerics.dll","FSharp.Core.sigdata","FSharp.Core.dll","Fable.Core.dll","Fable.Import.Browser.dll"];bX.loadReferences=cR.Create(function(){var cZ;b2.Start((cZ=null,b2.Delay(function(){return b2.Bind(bf.LoadFilesAsync(["https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.2/require.min.js"]),function(){var c0;c0=cL.create(null);c0.skipDataMain=1;c0.isBrowser=1;a.require.config(c0);b3.iter(function(c1){a.getFileBlob(c1,"metadata/"+c1);},bU.references());return b2.Zero();});})),null);});bX.getChecker=cR.Create(function(){return cM.createChecker(function(cZ){return a.metadata[cZ];},b_.choose(function(cZ){return cZ.indexOf("sigdata")!=-1?null:{$:1,$0:b5.Replace(cZ,".dll","")};},bU.references()));});bX.addOutMsg=function(cZ){b$.log(cZ);};};bY.j$4=function(){return bY._v$4?bY._v$4:bY._v$4=(cm.DecodeUnion(void 0,"$",[[0,[["$0","Item",cm.Id(),0]]],[1,[["$0","Item",cm.Id(),1]]],[2,[["$0","Item",bY.j$6,1]]],[3,[["$0","Item",cm.DecodeArray(bY.j$6),0]]],[4,[["$0","Item1",cm.Id(),1],["$1","Item2",cm.DecodeArray(cm.DecodeTuple([cm.Id(),bY.j$5])),0]]]]))();};bY.j$6=function(){return bY._v$6?bY._v$6:bY._v$6=(cm.DecodeRecord(x,[["name",cm.Id(),0],["content",cm.Id(),0],["parent",bY.j$7,1],["predecessors",cm.DecodeList(bY.j$7),0],["id",bY.j$7,0],["expanded",cm.Id(),0],["level",cm.Id(),0],["levelCode",cm.Id(),0],["properties",cm.DecodeStringDictionary(cm.Id()),0]]))();};bY.j$7=function(){return bY._v$7?bY._v$7:bY._v$7=(cm.DecodeUnion(w,"$",[[0,[["$0","Item",cm.Id(),0]]]]))();};bY.j$5=function(){return bY._v$5?bY._v$5:bY._v$5=(cm.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};bZ.j$4=function(){return bZ._v$4?bZ._v$4:bZ._v$4=(cm.EncodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",cm.Id(),0]]],[2,[["$0","Item",bZ.j$5,0]]],[3,[["$0","Item",bZ.j$5,0]]],[4,[["$0","Item",bZ.j$5,0]]],[5,[["$0","Item",bZ.j$5,0]]],[6,[["$0","Item",cm.EncodeArray(cm.Id()),0]]],[7,[["$0","Item",cm.EncodeArray(cm.Id()),0]]],[8,[["$0","Item",cm.EncodeArray(cm.Id()),0]]],[9,[["$0","Item",cm.EncodeArray(cm.Id()),0]]],[10,[["$0","Item",cm.EncodeArray(cm.Id()),0]]],[11,[]],[12,[["$0","Item1",bZ.j$5,0],["$1","Item2",cm.Id(),0]]],[13,[["$0","Item1",cm.EncodeArray(cm.Id()),0],["$1","Item2",cm.Id(),0]]],[14,[["$0","name",cm.Id(),0],["$1","action",cm.Id(),0],["$2","parms",cm.EncodeArray(cm.Id()),0]]]]))();};bZ.j$5=function(){return bZ._v$5?bZ._v$5:bZ._v$5=(cm.EncodeUnion(w,"$",[[0,[["$0","Item",cm.Id(),0]]]]))();};b0.p$1=function(cV){return"Address "+b8.prettyPrint(cV.$0);};bZ.j$8=function(){return bZ._v$8?bZ._v$8:bZ._v$8=(cm.EncodeUnion(void 0,"$",[[0,[["$0","Item",cm.Id(),0]]],[1,[["$0","Item",cm.Id(),1]]],[2,[["$0","Item",bZ.j$7,1]]],[3,[["$0","Item",cm.EncodeArray(bZ.j$7),0]]],[4,[["$0","Item1",cm.Id(),1],["$1","Item2",cm.EncodeArray(cm.EncodeTuple([cm.Id(),bZ.j$9])),0]]]]))();};bZ.j$9=function(){return bZ._v$9?bZ._v$9:bZ._v$9=(cm.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};bY.j$9=function(){return bY._v$9?bY._v$9:bY._v$9=(cm.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",cm.Id(),0]]],[2,[["$0","Item",bY.j$7,0]]],[3,[["$0","Item",bY.j$7,0]]],[4,[["$0","Item",bY.j$7,0]]],[5,[["$0","Item",bY.j$7,0]]],[6,[["$0","Item",cm.DecodeArray(cm.Id()),0]]],[7,[["$0","Item",cm.DecodeArray(cm.Id()),0]]],[8,[["$0","Item",cm.DecodeArray(cm.Id()),0]]],[9,[["$0","Item",cm.DecodeArray(cm.Id()),0]]],[10,[["$0","Item",cm.DecodeArray(cm.Id()),0]]],[11,[]],[12,[["$0","Item1",bY.j$7,0],["$1","Item2",cm.Id(),0]]],[13,[["$0","Item1",cm.DecodeArray(cm.Id()),0],["$1","Item2",cm.Id(),0]]],[14,[["$0","name",cm.Id(),0],["$1","action",cm.Id(),0],["$2","parms",cm.DecodeArray(cm.Id()),0]]]]))();};b1.p$22=function(cV){return"{"+("text = "+b0.p$9(cV.text))+"; "+("highlight = "+b0.p$11(cV.highlight))+"; "+("disabled = "+b0.p$11(cV.disabled))+"; "+("toolTip = "+b0.p$13(cV.toolTip))+"; "+("onClick = "+b0.p$14(cV.onClick))+"; "+("parms = "+b0.p$8(cV.parms))+"}";};b0.p$14=function(cV){return cV==null?"null":"Some <fun>";};b0.p$13=function(cV){return cV==null?"null":"Some "+b8.prettyPrint(cV.$0);};b0.p$11=function(cV){return cV.$==2?"Dynamic "+b0.p$12(cV.$0):cV.$==1?"DynamicV "+b8.prettyPrint(cV.$0):"Constant "+b8.prettyPrint(cV.$0);};b0.p$12=function(cV){return"V <fun>";};b0.p$9=function(cV){return cV.$==2?"Dynamic "+b0.p$10(cV.$0):cV.$==1?"DynamicV "+b8.prettyPrint(cV.$0):"Constant "+b8.prettyPrint(cV.$0);};b0.p$10=function(cV){return"V <fun>";};b0.p$8=function(cV){return cV==null?"null":"Some "+b8.printArray(b8.prettyPrint,cV.$0);};b0.p$7=function(cV){return cV.$==17?"KMultiple "+b8.printArray(function(cW){return b0.p$7(cW);},cV.$0):cV.$==16?"KUnionCase "+b1.p$21(cV.$0):cV.$==15?"KNamespaces "+b1.p$18(cV.$0):cV.$==14?"KCompilerLocation "+b1.p$17(cV.$0):cV.$==13?"KSignatureData "+b1.p$15(cV.$0):cV.$==12?"KTypeSig "+b8.prettyPrint(cV.$0):cV.$==11?"KToolTip "+b8.printArray(function(cW){return b8.printArray(function(cX){return b1.p$2(cX);},cW);},cV.$0):cV.$==10?"KDeclarations "+b8.printArray(function(cW){return b1.p$13(cW);},cV.$0):cV.$==9?"KFindDecl "+b1.p$12(cV.$0):cV.$==8?"KColorizations "+b8.printList(function(cW){return b1.p$11(cW);},cV.$0):cV.$==7?"KErrors "+b1.p$9(cV.$0):cV.$==6?"KMethod "+b1.p$6(cV.$0):cV.$==5?"KHelp "+b8.prettyPrint(cV.$0):cV.$==4?"KSymbolUse "+b1.p$4(cV.$0):cV.$==3?"KCompletion "+b8.printArray(function(cW){return b1.p$3(cW);},cV.$0):cV.$==2?"KHelpText "+b1.p$1(cV.$0):cV.$==1?"KError "+b1.p(cV.$0):"KInfo "+b8.prettyPrint(cV.$0);};b1.p$21=function(cV){return"{"+("Text = "+b8.prettyPrint(cV.Text))+"}";};b1.p$18=function(cV){return"{"+("Opens = "+b8.printArray(function(cW){return b1.p$19(cW);},cV.Opens))+"; "+("Qualifies = "+b8.printArray(function(cW){return b1.p$20(cW);},cV.Qualifies))+"; "+("Word = "+b8.prettyPrint(cV.Word))+"}";};b1.p$20=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("Qualifier = "+b8.prettyPrint(cV.Qualifier))+"}";};b1.p$19=function(cV){return"{"+("Namespace = "+b8.prettyPrint(cV.Namespace))+"; "+("Name = "+b8.prettyPrint(cV.Name))+"; "+("Type = "+b8.prettyPrint(cV.Type))+"; "+("Line = "+b8.prettyPrint(cV.Line))+"; "+("Column = "+b8.prettyPrint(cV.Column))+"; "+("MultipleNames = "+b8.prettyPrint(cV.MultipleNames))+"}";};b1.p$17=function(cV){return"{"+("Fsc = "+b8.prettyPrint(cV.Fsc))+"; "+("Fsi = "+b8.prettyPrint(cV.Fsi))+"; "+("MSBuild = "+b8.prettyPrint(cV.MSBuild))+"}";};b1.p$15=function(cV){return"{"+("OutputType = "+b8.prettyPrint(cV.OutputType))+"; "+("Parameters = "+b8.printList(function(cW){return b8.printList(function(cX){return b1.p$16(cX);},cW);},cV.Parameters))+"}";};b1.p$16=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("Type = "+b8.prettyPrint(cV.Type))+"}";};b1.p$13=function(cV){return"{"+("Declaration = "+b1.p$14(cV.Declaration))+"; "+("Nested = "+b8.printArray(function(cW){return b1.p$14(cW);},cV.Nested))+"}";};b1.p$14=function(cV){return"{"+("UniqueName = "+b8.prettyPrint(cV.UniqueName))+"; "+("Name = "+b8.prettyPrint(cV.Name))+"; "+("Glyph = "+b8.prettyPrint(cV.Glyph))+"; "+("GlyphChar = "+b8.prettyPrint(cV.GlyphChar))+"; "+("IsTopLevel = "+b8.prettyPrint(cV.IsTopLevel))+"; "+("File = "+b8.prettyPrint(cV.File))+"; "+("EnclosingEntity = "+b8.prettyPrint(cV.EnclosingEntity))+"; "+("IsAbstract = "+b8.prettyPrint(cV.IsAbstract))+"}";};b1.p$12=function(cV){return"{"+("File = "+b8.prettyPrint(cV.File))+"; "+("Line = "+b8.prettyPrint(cV.Line))+"; "+("Column = "+b8.prettyPrint(cV.Column))+"}";};b1.p$11=function(cV){return"{"+("Kind = "+b8.prettyPrint(cV.Kind))+"}";};b1.p$9=function(cV){return"{"+("File = "+b8.prettyPrint(cV.File))+"; "+("Errors = "+b8.printArray(function(cW){return b1.p$10(cW);},cV.Errors))+"}";};b1.p$10=function(cV){return"{"+("FileName = "+b8.prettyPrint(cV.FileName))+"; "+("StartLine = "+b8.prettyPrint(cV.StartLine))+"; "+("EndLine = "+b8.prettyPrint(cV.EndLine))+"; "+("StartColumn = "+b8.prettyPrint(cV.StartColumn))+"; "+("EndColumn = "+b8.prettyPrint(cV.EndColumn))+"; "+("Message = "+b8.prettyPrint(cV.Message))+"; "+("Subcategory = "+b8.prettyPrint(cV.Subcategory))+"}";};b1.p$6=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("CurrentParameter = "+b8.prettyPrint(cV.CurrentParameter))+"; "+("Overloads = "+b8.printList(function(cW){return b1.p$7(cW);},cV.Overloads))+"}";};b1.p$7=function(cV){return"{"+("Tip = "+b8.printList(function(cW){return b8.printList(function(cX){return b1.p$2(cX);},cW);},cV.Tip))+"; "+("TypeText = "+b8.prettyPrint(cV.TypeText))+"; "+("Parameters = "+b8.printList(function(cW){return b1.p$8(cW);},cV.Parameters))+"; "+("IsStaticArguments = "+b8.prettyPrint(cV.IsStaticArguments))+"}";};b1.p$8=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("CanonicalTypeTextForSorting = "+b8.prettyPrint(cV.CanonicalTypeTextForSorting))+"; "+("Display = "+b8.prettyPrint(cV.Display))+"; "+("Description = "+b8.prettyPrint(cV.Description))+"}";};b1.p$4=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("Uses = "+b8.printList(function(cW){return b1.p$5(cW);},cV.Uses))+"}";};b1.p$5=function(cV){return"{"+("FileName = "+b8.prettyPrint(cV.FileName))+"; "+("StartLine = "+b8.prettyPrint(cV.StartLine))+"; "+("StartColumn = "+b8.prettyPrint(cV.StartColumn))+"; "+("EndLine = "+b8.prettyPrint(cV.EndLine))+"; "+("EndColumn = "+b8.prettyPrint(cV.EndColumn))+"; "+("IsFromDefinition = "+b8.prettyPrint(cV.IsFromDefinition))+"; "+("IsFromAttribute = "+b8.prettyPrint(cV.IsFromAttribute))+"; "+("IsFromComputationExpression = "+b8.prettyPrint(cV.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+b8.prettyPrint(cV.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+b8.prettyPrint(cV.IsFromPattern))+"; "+("IsFromType = "+b8.prettyPrint(cV.IsFromType))+"}";};b1.p$3=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("ReplacementText = "+b8.prettyPrint(cV.ReplacementText))+"; "+("Glyph = "+b8.prettyPrint(cV.Glyph))+"; "+("GlyphChar = "+b8.prettyPrint(cV.GlyphChar))+"}";};b1.p$1=function(cV){return"{"+("Name = "+b8.prettyPrint(cV.Name))+"; "+("Overloads = "+b8.printList(function(cW){return b8.printList(function(cX){return b1.p$2(cX);},cW);},cV.Overloads))+"}";};b1.p$2=function(cV){return"{"+("Signature = "+b8.prettyPrint(cV.Signature))+"; "+("Comment = "+b8.prettyPrint(cV.Comment))+"}";};b1.p=function(cV){return"{"+("Code = "+b8.prettyPrint(cV.Code))+"; "+("Message = "+b8.prettyPrint(cV.Message))+"}";};bZ.j$7=function(){return bZ._v$7?bZ._v$7:bZ._v$7=(cm.EncodeRecord(x,[["name",cm.Id(),0],["content",cm.Id(),0],["parent",bZ.j$5,1],["predecessors",cm.EncodeList(bZ.j$5),0],["id",bZ.j$5,0],["expanded",cm.Id(),0],["level",cm.Id(),0],["levelCode",cm.Id(),0],["properties",cm.EncodeStringDictionary(cm.Id()),0]]))();};b0.p$6=function(cV){return"CodeSnippetId "+b8.prettyPrint(cV.$0);};bZ.j$6=function(){return bZ._v$6?bZ._v$6:bZ._v$6=(cm.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};bY.j$8=function(){return bY._v$8?bY._v$8:bY._v$8=(cm.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};bY.j$10=function(){return bY._v$10?bY._v$10:bY._v$10=(cm.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",cm.DecodeArray(cm.Id()),0]]]]))();};bZ.j$10=function(){return bZ._v$10?bZ._v$10:bZ._v$10=(cm.EncodeUnion(void 0,"type",[["BRGetConnections",[]]]))();};bY.j$11=function(){return bY._v$11?bY._v$11:bY._v$11=(cm.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",bY.j$1,0]]],["BMWebSocketError",[["$0","Item",cm.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",bY.j$2,0]]]]))();};b1.p$23=function(cV){return"{"+("from = "+b0.p$1(cV.from))+"; "+("destination = "+b0.p$1(cV.destination))+"; "+("msgType = "+b0.p$2(cV.msgType))+"; "+("subtype = "+b8.prettyPrint(cV.subtype))+"; "+("id = "+b8.prettyPrint(cV.id))+"; "+("payload = "+b8.prettyPrint(cV.payload))+"; "+("replier = "+b0.p$15(cV.replier))+"}";};b0.p$15=function(cV){return cV.$==2?"Receiver":cV.$==1?"Broker":"NoReply";};b0.p$16=function(cV){return cV.$==3?"Close":cV.$==2?"Open":cV.$==1?"Error":"Message "+b1.p$23(cV.$0);};bY.j$12=function(){return bY._v$12?bY._v$12:bY._v$12=(cm.DecodeRecord(void 0,[["GuiRoot",cm.Id(),1],["GuiTabStrip",cm.DecodeTuple([cm.Id(),cm.DecodeArray(cm.Id())]),1],["GuiSplit",cm.DecodeTuple([cm.Id(),cm.Id(),cm.Id(),cm.Id(),cm.Id(),cm.Id(),cm.Id(),cm.Id()]),1],["GuiNode",bY.j$13,1],["GuiCall",cm.DecodeTuple([cm.Id(),cm.Id(),cm.DecodeArray(cm.Id())]),1]]))();};bY.j$13=function(){return bY._v$13?bY._v$13:bY._v$13=(cm.DecodeRecord(void 0,[["HtmlElementF",cm.DecodeTuple([cm.Id(),cm.DecodeArray(bY.j$13)]),1],["HtmlAttributeF",cm.DecodeTuple([cm.Id(),cm.Id()]),1],["HtmlAttributeOF",cm.DecodeTuple([cm.Id(),bY.j$14]),1],["HtmlTextF",cm.Id(),1],["HtmlEmptyF",cm.Id(),1],["HtmlGuiPart",cm.Id(),1],["HtmlGuiCall",cm.DecodeTuple([cm.Id(),cm.Id(),cm.DecodeArray(cm.Id())]),1]]))();};bY.j$14=function(){return bY._v$14?bY._v$14:bY._v$14=(cm.DecodeUnion(void 0,"$",[null,[1,[["$0","Value",cm.Id(),0]]]]))();};bY.j$1=function(){return bY._v$1?bY._v$1:bY._v$1=(cm.DecodeUnion(B,"$",[[0,[["$0","address",cm.Id(),0]]]]))();};bY.j$2=function(){return bY._v$2?bY._v$2:bY._v$2=(cm.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};bY.j$3=function(){return bY._v$3?bY._v$3:bY._v$3=(cm.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};bY.j=function(){return bY._v?bY._v:bY._v=(cm.DecodeRecord(void 0,[["from",bY.j$1,0],["destination",bY.j$1,0],["msgType",bY.j$2,0],["subtype",cm.Id(),0],["id",cm.Id(),0],["payload",cm.Id(),0],["replier",bY.j$3,0]]))();};bZ.j$1=function(){return bZ._v$1?bZ._v$1:bZ._v$1=(cm.EncodeUnion(B,"$",[[0,[["$0","address",cm.Id(),0]]]]))();};bZ.j$2=function(){return bZ._v$2?bZ._v$2:bZ._v$2=(cm.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};bZ.j$3=function(){return bZ._v$3?bZ._v$3:bZ._v$3=(cm.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};bZ.j=function(){return bZ._v?bZ._v:bZ._v=(cm.EncodeRecord(void 0,[["from",bZ.j$1,0],["destination",bZ.j$1,0],["msgType",bZ.j$2,0],["subtype",cm.Id(),0],["id",cm.Id(),0],["payload",cm.Id(),0],["replier",bZ.j$3,0]]))();};b0.p$2=function(cV){return cV.$==5?"MsgRequestForEcho":cV.$==4?"MsgRequestForId":cV.$==3?"MsgFromBroker":cV.$==2?"MsgReply":cV.$==1?"MsgRequest":"MsgInformation";};b0.p=function(cV){return cV.$==5?"BMUnexpectedMsgType "+b0.p$2(cV.$0):cV.$==4?"BMReceiverCantReply":cV.$==3?"BMWebSocketError "+b8.prettyPrint(cV.$0):cV.$==2?"BMDestinationNotFound "+b0.p$1(cV.$0):cV.$==1?"BMOnlyBrokerShouldUse":"BMOk";};b0.p$3=function(cV){return cV.$==2?"FSInfor":cV.$==1?"FSWarning":"FSError";};b0.p$4=function(cV){return cV.$==1?"Snippet Not Found "+b8.prettyPrint(cV.$0):"FSMessage ("+b8.prettyPrint(cV.$0)+", "+b0.p$3(cV.$1)+")";};b0.p$5=function(cV){return cV.$==2?"Could not open new browser, Popup blocker may be active":cV.$==1?"Snippet Missing":"JsCompilerMsg ("+b8.prettyPrint(cV.$0)+", "+b8.prettyPrint(cV.$1)+")";};}());

(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;a=window;b=a.FSSGlobal=a.FSSGlobal||{};c=b.Useful=b.Useful||{};d=c.Async=c.Async||{};e=c.KeyVal=c.KeyVal||{};f=c.String=c.String||{};g=c.Option=c.Option||{};h=a.WebSharper;i=h&&h.Obj;j=c.ExceptionThrown=c.ExceptionThrown||{};k=c.ErrOptionIsNone=c.ErrOptionIsNone||{};l=c.ErrSimple=c.ErrSimple||{};m=c.Result=c.Result||{};n=m.ropBuilder=m.ropBuilder||{};o=c.ResultS=c.ResultS||{};p=c.Wrap=c.Wrap||{};q=p.Builder=p.Builder||{};r=c.Mailbox=c.Mailbox||{};s=c.Dict=c.Dict||{};t=c.ResetableMemoize=c.ResetableMemoize||{};u=c.PreproDirective=c.PreproDirective||{};v=b.FsStationShared=b.FsStationShared||{};w=v.CodeSnippetId=v.CodeSnippetId||{};x=v.CodeSnippet=v.CodeSnippet||{};y=v.FSMessage=v.FSMessage||{};z=v.FSSeverity=v.FSSeverity||{};A=b.WSMessagingBroker=b.WSMessagingBroker||{};B=A.Address=A.Address||{};C=A.BrokerRequest=A.BrokerRequest||{};D=A.MessageType=A.MessageType||{};E=A.BrokerMessage=A.BrokerMessage||{};F=A.Replier=A.Replier||{};G=A.MessageGeneric=A.MessageGeneric||{};H=A.ClientTypeFSharp=A.ClientTypeFSharp||{};I=A.ClientTypeFSStation=A.ClientTypeFSStation||{};J=A.ClientTypeJScript=A.ClientTypeJScript||{};K=A.ErrBroker=A.ErrBroker||{};L=A.WSMessagingClient=A.WSMessagingClient||{};M=A.FsStationClientErr=A.FsStationClientErr||{};N=A.FStationMessaging=A.FStationMessaging||{};O=b.FsEvaluator=b.FsEvaluator||{};P=O.Evaluator=O.Evaluator||{};Q=b.FsTranslator=b.FsTranslator||{};R=b.FSAutoCompleteIntermediary=b.FSAutoCompleteIntermediary||{};S=R.CommTypes=R.CommTypes||{};T=S.ResponseError=S.ResponseError||{};U=S.Location=S.Location||{};V=S.CompletionResponse=S.CompletionResponse||{};W=S.OverloadDescription=S.OverloadDescription||{};X=S.OverloadParameter=S.OverloadParameter||{};Y=S.Overload=S.Overload||{};Z=S.Parameter=S.Parameter||{};_0=S.SignatureData=S.SignatureData||{};_1=S.MethodResponse=S.MethodResponse||{};_2=S.SymbolUseRange=S.SymbolUseRange||{};_3=S.SymbolUseResponse=S.SymbolUseResponse||{};_4=S.HelpTextResponse=S.HelpTextResponse||{};_5=S.CompilerLocationResponse=S.CompilerLocationResponse||{};_6=S.FSharpErrorInfo=S.FSharpErrorInfo||{};_7=S.ErrorResponse=S.ErrorResponse||{};_8=S.Colorization=S.Colorization||{};_9=S.Declaration=S.Declaration||{};_=S.DeclarationResponse=S.DeclarationResponse||{};$=S.OpenNamespace=S.OpenNamespace||{};ba=S.QualifySymbol=S.QualifySymbol||{};bb=S.ResolveNamespaceResponse=S.ResolveNamespaceResponse||{};bc=S.UnionCaseResponse=S.UnionCaseResponse||{};bd=S.ACMessage=S.ACMessage||{};be=R.FSAutoCompleteIntermediaryClient=R.FSAutoCompleteIntermediaryClient||{};bf=b.HtmlNode=b.HtmlNode||{};bg=bf.Val=bf.Val||{};bh=bg.HelperType=bg.HelperType||{};bi=bg.valBuilder=bg.valBuilder||{};bj=bf.HtmlNode=bf.HtmlNode||{};bk=b.Template=b.Template||{};bl=bk.Button=bk.Button||{};bm=bk.Input=bk.Input||{};bn=bk.Hoverable=bk.Hoverable||{};bo=bk.TextArea=bk.TextArea||{};bp=bk.CodeMirrorPos=bk.CodeMirrorPos||{};bq=bk.CodeMirrorEditor=bk.CodeMirrorEditor||{};br=bk.CodeMirror=bk.CodeMirror||{};bs=bk.Hint=bk.Hint||{};bt=bk.HintResponse=bk.HintResponse||{};bu=bk.HintOptions=bk.HintOptions||{};bv=bk.LintResponse=bk.LintResponse||{};bw=bk.SplitterBar=bk.SplitterBar||{};bx=bk.SectionType=bk.SectionType||{};by=bk.Grid=bk.Grid||{};bz=bk.TabStrip=bk.TabStrip||{};bA=bk.MenuEntry=bk.MenuEntry||{};bB=bk.MenuNode=bk.MenuNode||{};bC=bk.Menu=bk.Menu||{};bD=bk.Action=bk.Action||{};bE=bk.GuiPart=bk.GuiPart||{};bF=bk.HtmlNodeFable=bk.HtmlNodeFable||{};bG=bk.LayoutDescriptionFable=bk.LayoutDescriptionFable||{};bH=bk.GuiPartSourceId=bk.GuiPartSourceId||{};bI=bk.Layout=bk.Layout||{};bJ=b.RunCode=b.RunCode||{};bK=bJ.RunNode=bJ.RunNode||{};bL=b.FSharpStation=b.FSharpStation||{};bM=bL.FsGlobal=bL.FsGlobal||{};bN=bM.Position=bM.Position||{};bO=bM.ErrCompiler=bM.ErrCompiler||{};bP=bM.KeyMapAutoComplete=bM.KeyMapAutoComplete||{};bQ=bM.Property=bM.Property||{};bR=bM.PropValue=bM.PropValue||{};bS=bM.CodeSnippet=bM.CodeSnippet||{};bT=bL.FableModule=bL.FableModule||{};bU=bT.Babel=bT.Babel||{};bV=bT.Fable=bT.Fable||{};bW=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};bX=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};bY=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};bZ=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};b0=a.GeneratedPrintf=a.GeneratedPrintf||{};b1=h&&h.Concurrency;b2=h&&h.Seq;b3=h&&h.Unchecked;b4=h&&h.Strings;b5=a.IntelliFactory;b6=b5&&b5.Runtime;b7=h&&h.Utils;b8=h&&h.Enumerator;b9=h&&h.List;b_=a.console;b$=h&&h.Control;ca=b$&&b$.MailboxProcessor;cb=h&&h.Collections;cc=cb&&cb.Dictionary;cd=h&&h.CancellationTokenSource;ce=h&&h.Arrays;cf=a.System;cg=cf&&cf.Guid;ch=h&&h.Option;ci=a.JSON;cj=h&&h.TimeoutException;ck=h&&h.Json;cl=ck&&ck.Provider;cm=h&&h.Owin;cn=cm&&cm.WebSocket;co=cn&&cn.Client;cp=co&&co.WithEncoding;cq=cn&&cn.Endpoint;cr=a.location;cs=cb&&cb.Map;ct=cb&&cb.FSharpMap;cu=h&&h.Slice;cv=h&&h.Remoting;cw=cv&&cv.AjaxRemotingProvider;cx=h&&h.UI;cy=cx&&cx.Next;cz=cy&&cy.View;cA=cy&&cy.Doc;cB=h&&h.Operators;cC=cy&&cy.AttrModule;cD=cy&&cy.AttrProxy;cE=cy&&cy.Var;cF=cy&&cy.Input;cG=cF&&cF.Mouse;cH=cb&&cb.FSharpSet;cI=cb&&cb.BalancedTree;cJ=h&&h.MatchFailureException;cK=a.Object;cL=a.Fable;cM=a.Babel;cN=cb&&cb.HashSet;cO=h&&h.JavaScript;cP=cO&&cO.JSModule;cQ=h&&h.Lazy;cR=a.jQuery;cS=a.Date;cT=cy&&cy.ListModel;d.sleepThen=function(cU,cV){var cW;cW=null;return b1.Delay(function(){return b1.Bind(b1.Sleep(cV),function(){cU();return b1.Zero();});});};d.bind=function(cU,cV){return b1.Bind(cV,cU);};d.apply=function(cU,cV){var cW;cW=null;return b1.Delay(function(){return b1.Bind(b1.StartChild(cU,null),function(cX){return b1.Bind(b1.StartChild(cV,null),function(cY){return b1.Bind(cX,function(cZ){return b1.Bind(cY,function(c0){return b1.Return(cZ(c0));});});});});});};d.retn=function(cU){return b1.Return(cU);};d.iter=function(cU,cV){var cW;cW=null;return b1.Delay(function(){return b1.Bind(cV,function(cX){cU(cX);return b1.Zero();});});};d.map=function(cU,cV){var cW;cW=null;return b1.Delay(function(){return b1.Bind(cV,function(cX){return b1.Return(cU(cX));});});};e.tryGetValue=function(cU,cV){return b2.tryPick(function(cW){return b3.Equals(cW.K,cU)?{$:1,$0:cW.V}:null;},cV);};f.append=function(cU,cV){return cU+cV;};f.trim=function(cU){return b4.Trim(cU);};f.splitByChar=function(cU,cV){return b4.SplitChars(cV,[cU],0);};g.modify=function(cU){var cV;function cW(cX){return cX==null?null:{$:1,$0:cU(cX.$0)};}cV=function(cX){return g.defaultValue(a.id,cX);};return function(cX){return cV(cW(cX));};};g.apply=function(cU,cV){var cW;return cU!=null&&cU.$==1&&(cV!=null&&cV.$==1&&(cW=[cV.$0,cU.$0],true))?{$:1,$0:cW[0](cW[1])}:null;};g.iterFO=function(cU,cV){if(cU!=null&&cU.$==1)if(cV!=null&&cV.$==1)cV.$0(cU.$0);};g.iterF=function(cU,cV){if(cV!=null&&cV.$==1)cV.$0(cU);};g.call=function(cU,cV){return cV!=null&&cV.$==1?{$:1,$0:cV.$0(cU)}:null;};g.defaultWith=function(cU,cV){return cV==null?cU():cV.$0;};g.defaultValue=function(cU,cV){return cV==null?cU:cV.$0;};j=c.ExceptionThrown=b6.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return(function(cU){return function(cV){return cU(b7.prettyPrint(cV));};}(a.id))(this.exn);}},i,j);j.New=b6.Ctor(function(cU){this.exn=cU;},j);k=c.ErrOptionIsNone=b6.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return"Option is None";}},i,k);k.New=b6.Ctor(function(){},k);l=c.ErrSimple=b6.Class({toString:function(){return this.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.warning;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.msg;}},i,l);l.New=b6.Ctor(function(cU,cV){this.msg=cU;this.warning=cV;},l);n=m.ropBuilder=b6.Class({For:function(cU,cV){var cW;cW=this;return this.Using(b8.Get(cU),function(cX){return cW.While(function(){return cX.MoveNext();},cW.Delay(function(){return cV(cX.Current());}));});},Using:function(cU,cV){return this.TryFinally(function(){return cV(cU);},function(){if(!b3.Equals(cU,null))cU.Dispose();});},TryFinally:function(cU,cV){try{return this.ReturnFrom(cU());}finally{cV();}},TryWith:function(cU,cV){try{return this.ReturnFrom(cU());}catch(cW){return cV(cW);}},While:function(cU,cV){var cW;cW=this;return!cU()?this.Zero():this.Bind(cV(),function(){return cW.While(cU,cV);});},Run:function(cU){return cU();},Combine:function(cU,cV){return(m.combine(cU))(cV);},Delay:a.id,Zero:function(){return m.succeed();},Bind:function(cU,cV){return m.bind(function(cW){return m.tryCall(cV,cW);},cU);},ReturnFrom:a.id,Return:function(cU){return m.succeed(cU);}},i,n);n.New=b6.Ctor(function(){},n);m.toResultS=function(cU){return{$:0,$0:cU.$0,$1:b9.map(function(cV){return new l.New(cV.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),cV.FSSGlobal_Useful_ErrMsg$get_IsWarning());},cU.$1)};};m.fromResultS=function(cU){return{$:0,$0:cU.$0,$1:b9.map(a.id,cU.$1)};};m.result2String=function(cU){return b4.concat("\n",b9.append(b9.ofArray([g.defaultValue("Failed: ",cU.$0)]),m.msgs2String(cU.$1)));};m.countMessages=function(cU){var cV,cW,cX,cY,cZ,c0,c1;if(cU.$===0)return"";else{cY=b9.filter(function(c2){return!c2.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cU);cZ=b9.filter(function(c2){return c2.FSSGlobal_Useful_ErrMsg$get_IsWarning();},cU);c0=cY.get_Length();c1=cZ.get_Length();switch(c0===0?c1===0?0:c1===1?2:5:c0===1?c1===0?1:c1===1?3:(cV=[c0,c1],6):c1===0?4:(cV=[c0,c1],6)){case 0:cX=function(c2){return function(c3){return c2(b7.toSafe(c3));};}(a.id);break;case 1:cX=function(c2){return function(c3){return c2(b7.toSafe(c3));};}(a.id);break;case 2:cX=function(c2){return function(c3){return c2(b7.toSafe(c3));};}(a.id);break;case 3:cX=function(c2){return function(c3){return c2("1 error, 1 warning\n"+b7.toSafe(c3));};}(a.id);break;case 4:cX=((b6.Curried3(function(c2,c3,c4){return c2(a.String(c3)+" errors\n"+b7.toSafe(c4));}))(a.id))(c0);break;case 5:cX=((b6.Curried3(function(c2,c3,c4){return c2(a.String(c3)+" warnings\n"+b7.toSafe(c4));}))(a.id))(c1);break;case 6:cX=(((b6.Curried(function(c2,c3,c4,c5){return c2(a.String(c3)+" errors, "+a.String(c4)+" warnings\n"+b7.toSafe(c5));},4))(a.id))(cV[0]))(cV[1]);break;}return cX(m.getMessages(cU));}};m.getMessages=function(cU){return b4.concat("\n",m.msgs2String(cU));};m.msgs2String=function(cU){return b9.map(function(cV){return cV.FSSGlobal_Useful_ErrMsg$get_ErrMsg();},cU);};m.seqCheck=function(cU){return b2.exists(function(cV){return m.Success(cV).$==1;},cU)?m.failWithMsgs(b2.pick(function(cV){var cW;cW=m.Success(cV);return cW.$==1?{$:1,$0:cW.$0}:null;},cU)):m.succeed(b2.map(function(cV){return cV.$0.$0;},cU));};m.withError=function(cU,cV){var cW;cW=cV.$1;return g.defaultWith(function(){return cU(cW);},cV.$0);};m.ifError=function(cU,cV){return g.defaultValue(cU,cV.$0);};m.failIfTrue=function(cU,cV){return cV?m.fail(cU):m.succeed();};m.failIfFalse=function(cU,cV){return cV?m.succeed():m.fail(cU);};m.tryProtection=function(){return m.succeed();};m.toOptionMs=function(cU){return[cU.$0,cU.$1];};m.toOption=function(cU){return cU.$0;};m.fromOption=function(cU,cV){return cV!=null&&cV.$==1?m.succeed(cV.$0):m.fail(cU);};m.fromChoice=function(cU){return cU.$==1?m.fail(cU.$0):m.succeed(cU.$0);};m.result=function(){bW.$cctor();return bW.result;};m.tryCall=function(cU,cV){try{return cU(cV);}catch(cW){return m.fail(m.failException(cW));}};m.failException=function(cU){return new j.New(cU);};m.Success=function(cU){return cU.$0==null?{$:1,$0:cU.$1}:{$:0,$0:[cU.$0.$0,cU.$1]};};m.failSimpleWarning=function(cU){return m.fail(new l.New(cU,true));};m.failSimpleError=function(cU){return m.fail(new l.New(cU,false));};m.apply=function(cU,cV){var cW,cX,cY,cZ,c0;cW=cU.$1;cX=cV.$1;cY=cU.$0;cZ=cV.$0;return cY!=null&&cY.$==1&&(cZ!=null&&cZ.$==1&&(c0=[cY.$0,cZ.$0],true))?{$:0,$0:{$:1,$0:c0[0](c0[1])},$1:b9.append(cW,cX)}:{$:0,$0:null,$1:b9.append(cW,cX)};};m.bind=function(cU,cV){var cW,cX,cY;cW=cV.$0;cX=cV.$1;return cW==null?{$:0,$0:null,$1:cX}:(cY=cU(cW.$0),{$:0,$0:cY.$0,$1:b9.append(cX,cY.$1)});};m.combine=function(cU){var cV;cV=cU.$1;return function(cW){return m.mergeMsgs(cV,cW);};};m.mergeMsgs=function(cU,cV){var cW;cW=m.mapMsgs(function(cX){return b9.append(cU,cX);},cV);return{$:0,$0:cW[0],$1:cW[1]};};m.getMsgs=function(cU){return cU.$1;};m.getOption=function(cU){return cU.$0;};m.mapMsgs=function(cU,cV){return[cV.$0,cU(cV.$1)];};m.mapMsg=function(cU,cV){return[cV.$0,b9.map(cU,cV.$1)];};m.map=function(cU,cV){var cW;return{$:0,$0:(cW=cV.$0,cW==null?null:{$:1,$0:cU(cW.$0)}),$1:cV.$1};};m.failWithMsgs=function(cU){return{$:0,$0:null,$1:cU};};m.fail=function(cU){return{$:0,$0:null,$1:b9.ofArray([cU])};};m.succeedWithMsgs=function(cU,cV){return{$:0,$0:{$:1,$0:cU},$1:cV};};m.succeedWithMsg=function(cU,cV){return{$:0,$0:{$:1,$0:cU},$1:b9.ofArray([cV])};};m.succeed=function(cU){return{$:0,$0:{$:1,$0:cU},$1:b9.T.Empty};};o.toResult=function(){bW.$cctor();return bW.toResult;};o.fromResult=function(){bW.$cctor();return bW.fromResult;};p.StartAsTask=function(cU,cV,cW){return b1.StartAsTask(p.getAsyncR(cU),cW);};p.Start=function(cU,cV){b1.Start(p.getAsync(cU),cV);};q=p.Builder=b6.Class({For:function(cU,cV){var cW;cW=this;return this.Using(b8.Get(cU),function(cX){return cW.While(function(){return cX.MoveNext();},cW.Delay(function(){return cV(cX.Current());}));});},Using:function(cU,cV){return this.TryFinally(function(){return cV(cU);},function(){if(!b3.Equals(cU,null))cU.Dispose();});},TryFinally:function(cU,cV){var cW;return{$:2,$0:(cW=null,b1.Delay(function(){return b1.Bind(b1.Catch(p.toAsyncResult(cU())),function(cX){var cY,cZ;cV();if(cX.$==1)throw cX.$0;else cZ=cX.$0;return b1.Return(cZ);});}))};},TryWith:function(cU,cV){var cW;return{$:2,$0:(cW=null,b1.Delay(function(){return b1.Bind(b1.Catch(p.toAsyncResult(cU())),function(cX){return b1.Return(cX.$==1?cV(cX.$0):cX.$0);});}))};},While:function(cU,cV){return p.whileLoop(cU,cV);},Combine:function(cU,cV){return p.combine(p.errOptionIsNone(),cU,cV);},Run:function(cU){return cU();},Delay:a.id,ReturnFrom:a.id,Return:function(cU){return{$:3,$0:cU};},Zero:function(){return{$:3,$0:null};},Bind:function(cU,cV){return p.bind(cV,{$:4,$0:cU});},Bind$1:function(cU,cV){return p.bind(cV,{$:0,$0:cU});},Bind$2:function(cU,cV){return p.bind(cV,{$:1,$0:cU});},Bind$3:function(cU,cV){return p.bind(cV,cU);}},i,q);q.New=b6.Ctor(function(){},q);p.runSynchronouslyS=function(cU,cV){var cW;cW=p.runSynchronouslyO(cU,cV);return cW[0]==null?(function(cX){return function(cY){return cX("Failed!\n"+b7.toSafe(cY));};}(a.id))(cW[1]):(((b6.Curried3(function(cX,cY,cZ){return cX(a.String(cY)+"\n"+b7.toSafe(cZ));}))(a.id))(cW[0].$0))(cW[1]);};p.runSynchronouslyO=function(cU,cV){return m.mapMsgs(cU?m.countMessages:m.getMessages,b_.log("runSynchronously should not be used in Javascript"));};p.getResult=function(cU,cV){if(cV.$==4){if(cV.$0==null)cU(m.fail(p.errOptionIsNone()));else cU(m.succeed(cV.$0.$0));}else if(cV.$==0)cU(cV.$0);else if(cV.$==1)b1.StartWithContinuations(cV.$0,function(cW){cU(m.succeed(cW));},function(cW){cU(m.fail(m.failException(cW)));},function(cW){cU(m.fail(m.failException(cW)));},null);else if(cV.$==2)b1.StartWithContinuations(cV.$0,cU,function(cW){cU(m.fail(m.failException(cW)));},function(cW){cU(m.fail(m.failException(cW)));},null);else cU(m.succeed(cV.$0));};p.wrapper=function(){bW.$cctor();return bW.wrapper;};p.wrap=function(){bW.$cctor();return bW.wrap;};p.whileLoop=function(cU,cV){return cU()?p.bind(function(){return p.whileLoop(cU,cV);},cV()):{$:3,$0:null};};p.combine=function(cU,cV,cW){var cX,cY,cZ,c0;switch(cV.$==4?cV.$0==null?3:0:cV.$==0?cV.$0.$1.$==0?0:(cX=cV.$0.$1,4):cV.$==1?(cX=cV.$0,1):cV.$==2?(cX=cV.$0,2):0){case 0:return cW();break;case 1:return{$:2,$0:(cY=null,b1.Delay(function(){return b1.Bind(cX,function(){return b1.Bind(p.toAsyncResult(cW()),function(c1){return b1.Return(c1);});});}))};break;case 2:return{$:2,$0:(cZ=null,b1.Delay(function(){return b1.Bind(cX,function(c1){var c2,c3;c3=m.Success(c1);c3.$==0?c2=c3.$0[1]:c2=c3.$0;return b1.Bind(p.toAsyncResult(cW()),function(c4){return b1.Return(m.mergeMsgs(c2,c4));});});}))};break;case 3:c0=cW();return p.addMsgs(cU,b9.ofArray([cU]),c0);break;case 4:return p.addMsgs(cU,cX,cW());break;}};p.addMsgs=function(cU,cV,cW){var cX,cY,cZ;if(cV.$===0)return cW;else switch(cW.$==4?cW.$0==null?1:(cX=cW.$0.$0,0):cW.$==0?(cX=cW.$0,2):cW.$==1?(cX=cW.$0,3):cW.$==2?(cX=cW.$0,4):(cX=cW.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(cX,cV)};break;case 1:return{$:0,$0:m.mergeMsgs(cV,m.fail(cU))};break;case 2:return{$:0,$0:m.mergeMsgs(cV,cX)};break;case 3:return{$:2,$0:(cY=null,b1.Delay(function(){return b1.Bind(cX,function(c0){return b1.Return(m.succeedWithMsgs(c0,cV));});}))};break;case 4:return{$:2,$0:(cZ=null,b1.Delay(function(){return b1.Bind(cX,function(c0){return b1.Return(m.mergeMsgs(cV,c0));});}))};break;}};p.wrapper2Async=function(cU,cV){var cW,cX,cY,cZ;cX=p.tryCall(cU,cV);switch(cX.$==4?0:cX.$==0?1:cX.$==1?2:cX.$==2?3:0){case 0:return p.wb2arb(b9.T.Empty,cX);break;case 1:return p.wb2arb(cX.$0.$1,cX);break;case 2:cY=cX.$0;cZ=null;return b1.Delay(function(){return b1.Bind(cY,function(c0){return b1.Return(m.succeed(c0));});});break;case 3:return cX.$0;break;}};p.start=function(cU,cV){p.startV(function(cW){if(cW[0]==null)cU("Failed!\n"+cW[1]);else cU(cW[1]);},cV);};p.startV=function(cU,cV){var cW,cX,cY,cZ;function c0(c3){return m.mapMsgs(m.getMessages,c3);}function c1(c3){return[null,c3];}function c2(c3){return[null,c3];}b1.StartWithContinuations(p.getAsyncR(cV),function(c3){return cU(c0(c3));},(cW=(cX=function(c3){return function(c4){return c3(b7.prettyPrint(c4));};}(a.id),function(c3){return c1(cX(c3));}),function(c3){return cU(cW(c3));}),(cY=(cZ=function(c3){return function(c4){return c3(b7.prettyPrint(c4));};}(a.id),function(c3){return c2(cZ(c3));}),function(c3){return cU(cY(c3));}),null);};p.toAsyncWithDefault=function(cU){return function(cV){return p.getAsyncWithDefault(cU,cV);};};p.toAsyncOptionMs=function(cU){return d.map(m.toOptionMs,p.getAsyncR(cU));};p.toAsyncOption=function(cU){return d.map(m.toOption,p.getAsyncR(cU));};p.toAsyncResult=function(cU){return p.getAsyncR(cU);};p.toAsync=function(cU){return p.getAsync(cU);};p.getAsync=function(cU){return p.getAsyncWithDefault(function(cV){throw a.Error(m.getMessages(cV));},cU);};p.getAsyncWithDefault=function(cU,cV){return d.map(function(cW){return m.withError(cU,cW);},p.getAsyncR(cV));};p.getAsyncR=function(cU){var cV,cW;return cU.$==3?b1.Return(m.succeed(cU.$0)):cU.$==4?b1.Return(m.fromOption(p.errOptionIsNone(),cU.$0)):cU.$==0?b1.Return(cU.$0):cU.$==2?cU.$0:(cV=cU.$0,(cW=null,b1.Delay(function(){return b1.Bind(cV,function(cX){return b1.Return(m.succeed(cX));});})));};p.map=function(cU){var cV;cV=function(cW){return p.Return(cU(cW));};return function(cW){return p.bind(cV,cW);};};p.Return=function(cU){return{$:3,$0:cU};};p.bind=function(cU,cV){var cW,cX,cY,cZ,c0;switch(cV.$==4?cV.$0==null?1:(cW=cV.$0.$0,0):cV.$==0?(cX=m.Success(cV.$0),cX.$==1?(cW=cX.$0,2):cX.$0[1].$==0?(cW=cX.$0[0],0):(cW=[cX.$0[0],cX.$0[1]],3)):cV.$==1?(cW=cV.$0,4):cV.$==2?(cW=cV.$0,5):(cW=cV.$0,0)){case 0:return p.tryCall(cU,cW);break;case 1:return{$:4,$0:null};break;case 2:return{$:0,$0:m.failWithMsgs(cW)};break;case 3:cY=cW[1];return function(c1){var c2,c3,c4,c5;switch(c1.$==4?c1.$0==null?1:(c2=c1.$0.$0,0):c1.$==0?(c3=m.Success(c1.$0),c3.$==1?(c2=c3.$0,4):c3.$0[1].$==0?(c2=c3.$0[0],2):(c2=[c3.$0[0],c3.$0[1]],3)):c1.$==1?(c2=c1.$0,5):c1.$==2?(c2=c1.$0,6):(c2=c1.$0,0)){case 0:return{$:0,$0:m.succeedWithMsgs(c2,cY)};break;case 1:return{$:0,$0:m.failWithMsgs(new b9.T({$:1,$0:p.errOptionIsNone(),$1:cY}))};break;case 2:return{$:0,$0:m.succeedWithMsgs(c2,cY)};break;case 3:return{$:0,$0:m.succeedWithMsgs(c2[0],b9.append(cY,c2[1]))};break;case 4:return{$:0,$0:m.failWithMsgs(b9.append(cY,c2))};break;case 5:return{$:2,$0:(c4=null,b1.Delay(function(){return b1.Bind(c2,function(c6){return b1.Return(m.succeedWithMsgs(c6,cY));});}))};break;case 6:return{$:2,$0:(c5=null,b1.Delay(function(){return b1.Bind(c2,function(c6){return b1.Return(m.mergeMsgs(cY,c6));});}))};break;}}(p.tryCall(cU,cW[0]));break;case 4:return{$:2,$0:(cZ=null,b1.Delay(function(){return b1.Bind(cW,function(c1){return p.wb2arb(b9.T.Empty,p.tryCall(cU,c1));});}))};break;case 5:return{$:2,$0:(c0=null,b1.Delay(function(){return b1.Bind(cW,function(c1){var c2,c3,c4;c2=m.Success(c1);return c2.$==1?(c3=c2.$0,c4=null,b1.Delay(function(){return b1.Return(m.failWithMsgs(c3));})):p.wb2arb(c2.$0[1],p.tryCall(cU,c2.$0[0]));});}))};break;}};p.tryCall=function(cU,cV){try{return cU(cV);}catch(cW){return{$:0,$0:m.fail(m.failException(cW))};}};p.wb2arb=function(cU,cV){var cW,cX,cY,cZ,c0,c1;switch(cV.$==2?(cW=cV.$0,1):cV.$==0?(cW=cV.$0,2):cV.$==3?(cW=cV.$0,3):cV.$==4?cV.$0==null?4:(cW=cV.$0.$0,3):(cW=cV.$0,0)){case 0:cX=null;return b1.Delay(function(){return b1.Bind(cW,function(c2){return b1.Return(m.succeedWithMsgs(c2,cU));});});break;case 1:cY=null;return b1.Delay(function(){return b1.Bind(cW,function(c2){return b1.Return(m.mergeMsgs(cU,c2));});});break;case 2:cZ=null;return b1.Delay(function(){return b1.Return(m.mergeMsgs(cU,cW));});break;case 3:c0=null;return b1.Delay(function(){return b1.Return(m.succeedWithMsgs(cW,cU));});break;case 4:c1=null;return b1.Delay(function(){return b1.Return(m.failWithMsgs(new b9.T({$:1,$0:p.errOptionIsNone(),$1:cU})));});break;}};p.errOptionIsNone=function(){bW.$cctor();return bW.errOptionIsNone;};r.fold=function(cU,cV){return ca.Start(function(cW){function cX(cY){var cZ;cZ=null;return b1.Delay(function(){return b1.TryWith(b1.Delay(function(){return b1.Bind(cW.Receive(null),function(c0){return b1.Bind(cU(cY,c0),function(c1){return cX(c1);});});}),function(c0){((function(c1){return function(c2){return c1(b7.prettyPrint(c2));};}(function(c1){b_.log(c1);}))(c0));return cX(cY);});});}return cX(cV);},null);};r.iter=function(cU){return ca.Start(function(cV){var cW;cW=null;return b1.Delay(function(){return b1.While(function(){return true;},b1.Delay(function(){return b1.TryWith(b1.Delay(function(){return b1.Bind(cV.Receive(null),function(cX){return b1.Bind(cU(cX),function(){return b1.Return(null);});});}),function(cX){((function(cY){return function(cZ){return cY(b7.prettyPrint(cZ));};}(function(cY){b_.log(cY);}))(cX));return b1.Zero();});}));});},null);};s.add=function(cU,cV,cW){if(cW.ContainsKey(cU))cW.set_Item(cU,cV);else cW.Add(cU,cV);};t=c.ResetableMemoize=b6.Class({ClearCache:function(){this.cache.Clear();}},i,t);t.New=b6.Ctor(function(cU){this.f=cU;this.cache=new cc.New$5();},t);u.NoPrepo={$:11};u.PrepoEndIf={$:8};u.PrepoElse={$:7};c.asyncStartCancelling=function(){var cU;cU=null;return function(cV){var cW;cU==null?void 0:cU.$0.Cancel$1();cW=new cd.New();b1.Start(cV,{$:1,$0:cW});cU={$:1,$0:cW};};};c.separateDirectives=function(cU){var cV,cW,cX,cY;function cZ(c7){return c7[1];}function c0(c7){return c7.$==0?{$:1,$0:c7.$0}:null;}function c1(c7){return c7[1];}function c2(c7){return c7.$==1?{$:1,$0:c7.$0}:null;}function c3(c7){return c7[1];}function c4(c7){return c7.$==5?{$:1,$0:c7.$0}:null;}function c5(c7){return c7[1];}function c6(c7){return c7.$==4?{$:1,$0:c7.$0}:null;}cV=ce.ofSeq(b2.distinct(b2.choose(function(c7){return c0(cZ(c7));},cU)));cW=ce.ofSeq(b2.distinct(b2.choose(function(c7){return c2(c1(c7));},cU)));cX=ce.ofSeq(b2.distinct(b2.choose(function(c7){return c4(c3(c7));},cU)));cY=ce.ofSeq(b2.distinct(b2.choose(function(c7){return c6(c5(c7));},cU)));return[ce.ofSeq(b2.map(function(c7){return c7[0];},cU)),cV,cW,cX,cY];};c.separatePrepros=function(cU,cV){var cW;function cX(c0){return g.defaultValue(c0,b2.tryLast(b4.SplitStrings(b4.Trim(c0),["\""],1)));}function cY(c0){return g.defaultValue("",b2.tryHead(b4.SplitStrings(b4.Trim(c0),["#define "],1)));}function cZ(c0){return"//"+c0;}cW=cU?cZ:a.id;return ce.map(function(c0){var c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db;c1=true;return c1&&b4.StartsWith(c0,"#define")?[cZ(c0),{$:1,$0:cY(c0)}]:c1&&b4.StartsWith(c0,"#r")?[cZ(c0),{$:0,$0:cX(c0)}]:c1&&b4.StartsWith(c0,"#load")?[cZ(c0),{$:2,$0:cX(c0)}]:c1&&b4.StartsWith(c0,"#nowarn")?[cZ(c0),{$:4,$0:cX(c0)}]:c1&&b4.StartsWith(c0,"# ")?[cW(c0),{$:3,$0:cX(c0)}]:c1&&b4.StartsWith(c0,"#line")?[cW(c0),{$:3,$0:cX(c0)}]:c1&&b4.StartsWith(c0,"#I")?[cZ(c0),{$:5,$0:cX(c0)}]:c1&&b4.StartsWith(c0,"#if")?[c0,{$:6,$0:c0}]:c1&&b4.StartsWith(c0,"#else")?[c0,u.PrepoElse]:c1&&b4.StartsWith(c0,"#endif")?[c0,u.PrepoEndIf]:c1&&b4.StartsWith(c0,"#light")?[c0,{$:9,$0:false}]:c1&&b4.StartsWith(c0,"#")?[cZ(c0),{$:10,$0:c0}]:[c0,u.NoPrepo];},cV);};c.printoutfn=function(cU,cV){return cV(function(cW){return cU(cW+"\n");});};c.dprintfn=function(cU){return cU(a.ignore);};c.__=function(cU,cV,cW){return cU(cW,cV);};c.swap=function(cU,cV,cW){return cU(cW,cV);};c.REGEX=function(cU,cV,cW){var cX;if(cW===null)return null;else try{cX=(new a.String(cW)).match(new a.RegExp(cU,cV));return b3.Equals(cX,null)?null:cX&&ce.length(cX)===0?null:{$:1,$0:cX};}catch(cY){return null;}};c.extract=function(cU,cV){var cW;return b4.Substring(cV,0,(cW=cV.length,b3.Compare(cU,cW)===-1?cU:cW));};w=v.CodeSnippetId=b6.Class({get_Text:function(){return a.String(this.$0);}},null,w);w.get_New=function(){return new w({$:0,$0:cg.NewGuid()});};x=v.CodeSnippet=b6.Class({SeparateCode:function(cU){var cV,cW,cX,cY,cZ,c0;function c1(c2,c3){return[b4.replicate(cW," ")+c2,c3];}cV=!cU||this.properties.ContainsKey("NoLinePre");cW=this.levelCode*2;cX=cW===0?[a.id,""]:[function(c2){return ce.map(function(c3){return c1(c3[0],c3[1]);},c2);},(function(c2){return function(c3){return c2("("+a.String(c3)+")");};}(a.id))(cW)];cY=c.separateDirectives(cX[0](c.separatePrepros(!cU,(cV?a.id:(cZ=[(((b6.Curried3(function(c2,c3,c4){return c2("# 1 @\""+b7.toSafe(c3)+b7.toSafe(c4)+"\"");}))(a.id))(cX[1]))(this.get_NameSanitized())],function(c2){return cZ.concat(c2);}))(b4.SplitChars(this.content,["\n"],0)))));c0=cY[0];return[[[this.get_NameSanitized(),ce.length(c0),cW]],c0,cY[1],cY[2],cY[3],cY[4]];},UniquePredecessors:function(cU){return v.predsL(cU,b9.ofArray([this.id]));},get_NameSanitized:function(){return this.id.get_Text()+" "+v.sanitize(this.get_Name())+".fsx";},get_Name:function(){return v.snippetName(this.name,this.content);}},null,x);x.CodeFsx=function(cU,cV){return(x.CodeAndStarts(cU,cV))[0];};x.CodeAndStarts=function(cU,cV){var cW;cW=x.ReducedCode(cU,cV);return x.FinishCode(cU,cW[0],cW[1],cW[2],cW[3],cW[4],cW[5]);};x.FinishCode=function(cU,cV,cW,cX,cY,cZ,c0){var c1,c2;c1=b4.concat(" ",b2.map(function(c3){return"-d:"+c3;},b2.sort(cY)));c2=b9.ofSeq(b2.delay(function(){return b2.append(c1!==""?["////"+c1]:[],b2.delay(function(){return b2.append(b2.map(function(c3){return function(c4){return c3("#I @\""+b7.toSafe(c4)+"\"");};}(a.id),cZ),b2.delay(function(){return b2.append(b2.map(function(c3){return function(c4){return c3("#r @\""+b7.toSafe(c4)+"\"");};}(a.id),cX),b2.delay(function(){return b2.append(cU&&!b2.isEmpty(c0)?["# 1 \"required for nowarns to work\""]:[],b2.delay(function(){return b2.map(function(c3){return function(c4){return c3("#nowarn \""+b7.toSafe(c4)+"\"");};}(a.id),c0);}));}));}));}));}));return[b4.concat("\n",b2.append(c2,cW)),ce.ofSeq((b2.mapFold(function(c3,c4){var c5;c5=c4[1];return[[c4[0],[c4[2],c3,c3+c5]],c3+c5];},c2.get_Length(),cV))[0])];};x.ReducedCode=function(cU,cV){var cW,cX;function cY(cZ,c0,c1,c2,c3,c4){return function(c5){return x.AddSeps(cZ,c0,c1,c2,c3,c4,c5[0],c5[1],c5[2],c5[3],c5[4],c5[5]);};}cW=b2.reduce(function(cZ,c0){return(function(c1){return cY(c1[0],c1[1],c1[2],c1[3],c1[4],c1[5]);}(cZ))(c0);},(cX=b2.map(function(cZ){return cZ.SeparateCode(cU);},cV),b2.isEmpty(cX)?[[[],[],[],[],[],[]]]:cX));return[cW[0],[b4.concat("\n",cW[1])],cW[2],cW[3],cW[4],cW[5]];};x.AddSeps=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5){return[cU.concat(c0),cV.concat(c1),ce.ofSeq(b2.distinct(b2.append(cW,c2))),ce.ofSeq(b2.distinct(b2.append(cX,c3))),ce.ofSeq(b2.distinct(b2.append(cY,c4))),ce.ofSeq(b2.distinct(b2.append(cZ,c5)))];};x.TryFindByKey=function(cU,cV){return b2.tryFind(function(cW){return b3.Equals(cW.id,cV);},cU);};x.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2){return new x({name:cU,content:cV,parent:cW,predecessors:cX,id:cY,expanded:cZ,level:c0,levelCode:c1,properties:c2});};y.GetWholeFile={$:11};y.GetIdentification={$:0};z.FSInfor={$:2};z.FSWarning={$:1};z.FSError={$:0};v.predsL=function(cU,cV){var cW,cX;cW=cV;cX=b9.T.Empty;while(!(cW.$==0))(function(){var cY,cZ;return cW.$==1?(cY=cW.$1,(cZ=cW.$0,b2.contains(cZ,cX)?void(cW=cY):(cW=b9.collect(a.id,b9.ofArray([cY,b9.collect(function(c0){return b9.append(ch.toList(c0.parent),c0.predecessors);},ch.toList(cU(cZ)))])),void(cX=new b9.T({$:1,$0:cZ,$1:cX}))))):null;}());return cX;};v.preds=function(cU,cV,cW){var cX,cY;return cW.$==1?(cX=cW.$0,(cY=b9.collect(a.id,b9.ofArray([cW.$1,b9.collect(function(cZ){return b9.append(ch.toList(cZ.parent),cZ.predecessors);},ch.toList(cU(cX)))])),v.preds(cU,b2.contains(cX,cV)?cV:new b9.T({$:1,$0:cX,$1:cV}),cY))):cV;};v.sanitize=function(cU){var cV;cV=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return b4.Filter(function(cW){return!ce.contains(cW,cV);},cU);};v.snippetName=function(cU,cV){return cU!==""?cU:g.defaultValue("<empty>",b2.tryHead(b2.filter(function(cW){return!(b4.StartsWith(cW,"#")||b4.StartsWith(cW,"[<")||b4.StartsWith(cW,"//"));},b2.map(b4.Trim,b4.SplitChars(cV,["\n"],1)))));};B=A.Address=b6.Class({get_txt:function(){return this.$0;}},null,B);C.BRGetConnections={$:0};D.MsgRequestForEcho={$:5};D.MsgRequestForId={$:4};D.MsgFromBroker={$:3};D.MsgReply={$:2};D.MsgRequest={$:1};D.MsgInformation={$:0};E.BMReceiverCantReply={$:4};E.BMOnlyBrokerShouldUse={$:1};E.BMOk={$:0};F.Receiver={$:2};F.Broker={$:1};F.NoReply={$:0};G.New=function(cU,cV,cW,cX,cY,cZ,c0){return{from:cU,destination:cV,msgType:cW,subtype:cX,id:cY,payload:cZ,replier:c0};};H.FSharp={$:0};I.FSStation={$:0};J.JScript={$:0};K=A.ErrBroker=b6.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return false;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return a.String(this.bm);}},i,K);K.New=b6.Ctor(function(cU){this.bm=cU;},K);L=A.WSMessagingClient=b6.Class({sendMsg:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cU.replier.$===0?cW.Bind$3(cV.sendAndForget(cU),function(){return cW.Return("");}):cW.ReturnFrom(cV.sendGetReply(cU));}));},getListeners:function(){var cU,cV;cU=this;cV=p.wrap();return cV.Run(cV.Delay(function(){var cW,cX;return cV.Bind$3(cU.sendGetReply((cW=A.MessageBrokerAddress(),(cX=ci.stringify((bY.j$10())(C.BRGetConnections)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),cX,F.NoReply)))),function(cY){return cV.Return((bX.j$10())(ci.parse(cY)).$0);});}));},sendGetReply:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cV.sendAndReply(F.Receiver,cU),function(cX){var cY;return cW.Bind$1((cY=cX.msgType,cY.$==2?m.succeed(cX.payload):cY.$==3?m.fail(new K.New((bX.j$11())(ci.parse(cX.payload)))):m.fail(new K.New({$:5,$0:cX.msgType}))),function(cZ){return cW.Return(cZ);});});}));},sendAndVerify:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cV.sendAndReply(F.Broker,cU),function(cX){var cY;return cW.Bind$1(cX.msgType.$==3?(cY=(bX.j$11())(ci.parse(cX.payload)),cY.$===0?m.succeed():m.fail(new K.New(cY))):m.fail(new K.New({$:5,$0:cX.msgType})),function(){return cW.Return();});});}));},sendAndReply:function(cU,cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){return cX.Bind$3(cW.getServer(),function(cY){return cX.Bind$2(b1.FromContinuations(function(cZ,c0,c1){var c2,c3;c2=cW.waiting;c2.mailbox.AddLast({$:0,$0:cV.id,$1:[cZ,c0,c1]});c2.resume();cW.postR(cY,cU,cV);return cW.wsTimeout>0?b1.Start((c3=null,b1.Delay(function(){return b1.Bind(b1.Sleep(cW.wsTimeout),function(){var c4;c4=cW.waiting;c4.mailbox.AddLast({$:2,$0:cV.id,$1:function(){return new cj.New$1((((b6.Curried3(function(c5,c6,c7){return c5("Did not receive reply in "+a.String(c6)+" seconds for Message: "+b0.p$23(c7));}))(a.id))(cW.wsTimeout/1000>>0))(cV));}});c4.resume();return b1.Zero();});})),null):null;}),function(cZ){return cX.Return(cZ);});});}));},sendAndForget:function(cU){var cV,cW;cV=this;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cV.getServer(),function(cX){cV.postR(cX,F.NoReply,cU);return cW.Zero();});}));},postR:function(cU,cV,cW){try{cU.FSSGlobal_WSMessagingBroker_IServer$Post(A.replier(cV,A.from(this.clientAddress,cW)));}catch(cX){this.serverO=null;throw cX;}},getServer:function(){var cU,cV;cU=this;cV=p.wrap();return cV.Run(cV.Delay(function(){c.dprintfn(function(cW){return cW("getServer");});return cV.Combine(cU.serverO==null?(c.dprintfn(function(cW){return cW("getServer Connecting");}),cV.Bind$2(cU.connectToWebSocketServer(),function(){return cV.Bind$2(b1.Sleep(200),function(){return cV.Return();});})):cV.Zero(),cV.Delay(function(){return cV.Bind(cU.serverO,function(cW){return cV.Return(cW);});}));}));},connectToWebSocketServer:function(){var cU,cV;cU=this;c.dprintfn(function(cW){return cW("in connectToWebSocketServer");});cV=null;return b1.Delay(function(){return b1.Bind(((cU.connectStateful(cU.wsEndPoint))(cU.clientId))(function(cW){var cX;cX=null;return b1.Delay(function(){return b1.Return([0,function(cY){return function(cZ){var c0;c0=null;return b1.Delay(function(){return b1.Combine(b1.TryWith(b1.Delay(function(){return cZ.$==2?((c.printoutfn(cU.out,function(c1){return function(c2){return c1("WebSocket "+b7.toSafe(c2)+" connection open.");};}))(cU.clientId),cU.serverO={$:1,$0:cW},b1.Zero()):cZ.$==3?((c.printoutfn(cU.out,function(c1){return function(c2){return c1("WebSocket "+b7.toSafe(c2)+" connection closed.");};}))(cU.clientId),cU.close(),b1.Zero()):cZ.$==1?((c.printoutfn(cU.out,function(c1){return function(c2){return c1("WebSocket "+b7.toSafe(c2)+" connection error!");};}))(cU.clientId),b1.Zero()):(cU.processMessage(cZ.$0),b1.Zero());}),function(c1){(((b6.Curried3(function(c2,c3,c4){return c2("msg: "+bZ.p$15(c3)+" \nexn:"+b7.prettyPrint(c4));}))(function(c2){b_.log(c2);}))(cZ))(c1);return b1.Zero();}),b1.Delay(function(){return b1.Return(cY);}));});};}]);});}),function(){c.dprintfn(function(cW){return cW("connectToWebSocketServer with server");});return b1.Zero();});});},processMessage:function(cU){var cV,cW,cX,cY,cZ,c1;cW=this;(c.dprintfn(function(c2){return function(c3){return c2(b0.p$23(c3));};}))(cU);cX=cU.msgType;function c0(c2){cW.reply(c2);}switch(cX.$==2?0:cX.$==0?1:cX.$==1?2:cX.$==5?3:cX.$==4?4:0){case 0:this.processReply(cU);break;case 1:((c.printoutfn(this.out,b6.Curried3(function(c2,c3,c4){return c2("Information from '"+b7.toSafe(c3)+"': "+b7.toSafe(c4));})))(cU.from.get_txt()))(((cl.Id())())(ci.parse(cU.payload)));break;case 2:cY=this.payloadProcessorO;cY!=null&&cY.$==1?p.Start((cZ=cW.mapPayloadWrap(cY.$0,cU),(p.map(function(c2){return c0(A.makeReply(c2));}))(cZ)),null):cU.replier.$===2?null:null;break;case 3:cW.reply(A.msgType(D.MsgInformation,A.mapPayload(a.id,cU)));break;case 4:cW.reply(A.msgType(D.MsgInformation,(c1=A.makeReply(cU),G.New(c1.from,c1.destination,c1.msgType,c1.subtype,c1.id,ci.stringify(((cl.Id())())(this.clientId)),c1.replier))));break;}},mapPayloadWrap:function(cU,cV){var cW;cW=p.wrap();return cW.Run(cW.Delay(function(){return cW.Bind$3(cU(cV.payload),function(cX){return cW.Return(A.mapPayload(function(){return cX;},cV));});}));},processReply:function(cU){var cV;cV=this.waiting;cV.mailbox.AddLast({$:1,$0:cU.id,$1:cU});cV.resume();},close:function(){var cU;cU=this.serverO;cU==null?void 0:(cU.$0.FSSGlobal_WSMessagingBroker_IServer$Close(),this.serverO=null);},reply:function(cU){var cV;cV=this.serverO;cV==null?void 0:cV.$0.FSSGlobal_WSMessagingBroker_IServer$Post(A.destination(cU.from,A.from(this.clientAddress,cU)));},set_Out:function(cU){this.out=cU;},SendMsg:function(cU){return this.sendMsg(cU);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},i,L);L.New=b6.Ctor(function(cU,cV,cW){L.New$1.call(this,b6.Curried3(function(cX,cY,cZ){return d.map(a.ignore,cp.ConnectStateful(function(c0){return ci.stringify((bY.j())(c0));},function(c0){return(bX.j())(ci.parse(c0));},cq.CreateRemote((((b6.Curried3(function(c0,c1,c2){return c0("ws://"+b7.toSafe(c1)+"?ClientId="+b7.toSafe(c2));}))(a.id))(cX))(cY),{$:1,$0:cn.JsonEncoding.Readable}),function(c0){return cZ({FSSGlobal_WSMessagingBroker_IServer$Post:function(c1){return c0.Post(c1);},FSSGlobal_WSMessagingBroker_IServer$Close:function(){return c0.get_Connection().close(1000);}});}));}),cU,cV,cW);},L);L.New$1=b6.Ctor(function(cU,cV,cW,cX){var cY,cZ;cY=this;this.connectStateful=cU;this.clientId=cV;this.wsEndPoint=(cZ=A.extractEndPoint()+"/ws",cX==null?cZ:cX.$0);this.clientAddress=new B({$:0,$0:this.clientId});this.wsTimeout=cW==null?60000:cW.$0;this.out=function(c0){return function(c1){return c0(b7.toSafe(c1));};}(function(c0){b_.log(c0);});this.serverO=null;this.payloadProcessorO=null;this.waiting=A.waitingAgent(function(c0){((c.printoutfn(cY.out,b6.Curried3(function(c1,c2,c3){return c1("Reply from '"+b7.toSafe(c2)+"': "+b7.toSafe(c3));})))(c0.from.get_txt()))(c0.payload);});},L);M=A.FsStationClientErr=b6.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&this.$1.$==0;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(((b6.Curried3(function(cU,cV,cW){return cU(bZ.p(cV)+" "+b7.toSafe(cW));}))(a.id))(this.$1))(this.$0):(function(cU){return function(cV){return cU(bZ.p$1(cV));};}(a.id))(this);}},null,M);N=A.FStationMessaging=b6.Class({snippetResponse:function(cU){return cU.$==2?m.succeed(cU.$0):m.fail(new M({$:1,$0:a.String(cU)}));},snippetsResponse:function(cU){return cU.$==3?m.succeed(cU.$0):m.fail(new M({$:1,$0:a.String(cU)}));},stringResponse:function(cU){var cV,cW;return cU.$==1&&((cW=cU.$0,cW!=null&&cW.$==1)&&(cV=cU.$0.$0,true))?m.succeed(cV):m.fail(new M({$:1,$0:a.String(cU)}));},stringResponseR:function(cU){var cV,cW;function cX(cY,cZ){return new M({$:0,$0:cY,$1:cZ});}return cU.$==4&&((cW=cU.$0,cW!=null&&cW.$==1)&&(cV=[cU.$0.$0,cU.$1],true))?m.succeedWithMsgs(cV[0],b9.ofSeq(b2.map(function(cY){return cX(cY[0],cY[1]);},cV[1]))):m.fail(new M({$:1,$0:a.String(cU)}));},toId:function(){return new B({$:0,$0:this.fsIds});},get_MessagingClient:function(){return this.msgClient;},set_FSStationId:function(cU){this.fsIds=cU;},get_FSStationId:function(){return this.fsIds;},RunActionCall:function(cU,cV,cW){var cX,cY,cZ,c0,c1;function c2(c3){return cX.stringResponseR(c3);}cX=this;cY=this.toId();cZ=this;c0={$:14,$0:cU,$1:cV,$2:cW};c1=p.wrap();return c1.Run(c1.Delay(function(){var c3,c4;return c1.Bind$3((c3=cZ.msgClient.sendGetReply((c4=ci.stringify((bY.j$4())(c0)),G.New(new B({$:0,$0:""}),cY,D.MsgRequest,"",cg.NewGuid(),c4,F.NoReply))),(p.map(function(c5){return(bX.j$4())(ci.parse(c5));}))(c3)),function(c5){return c1.Bind$1(c2(c5),function(c6){return c1.Return(c6);});});}));},RunSnippet:function(cU,cV){var cW,cX,cY,cZ,c0;function c1(c2){return cW.stringResponseR(c2);}cW=this;cX=this.toId();cY={$:13,$0:b4.SplitChars(cV,["/"],0),$1:cU};cZ=this;c0=p.wrap();return c0.Run(c0.Delay(function(){var c2,c3;return c0.Bind$3((c2=cZ.msgClient.sendGetReply((c3=ci.stringify((bY.j$4())(cY)),G.New(new B({$:0,$0:""}),cX,D.MsgRequest,"",cg.NewGuid(),c3,F.NoReply))),(p.map(function(c4){return(bX.j$4())(ci.parse(c4));}))(c2)),function(c4){return c0.Bind$1(c1(c4),function(c5){return c0.Return(c5);});});}));},GenericMessage:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponse(c1);}cV=this;cW=this.toId();cX=this;cY={$:1,$0:cU};cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cX.msgClient.sendGetReply((c2=ci.stringify((bY.j$4())(cY)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bX.j$4())(ci.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestWholeFile:function(){var cU,cV,cW,cX,cY;function cZ(c0){return cU.stringResponse(c0);}cU=this;cV=this.toId();cW=this;cX=y.GetWholeFile;cY=p.wrap();return cY.Run(cY.Delay(function(){var c0,c1;return cY.Bind$3((c0=cW.msgClient.sendGetReply((c1=ci.stringify((bY.j$4())(cX)),G.New(new B({$:0,$0:""}),cV,D.MsgRequest,"",cg.NewGuid(),c1,F.NoReply))),(p.map(function(c2){return(bX.j$4())(ci.parse(c2));}))(c0)),function(c2){return cY.Bind$1(cZ(c2),function(c3){return cY.Return(c3);});});}));},RequestPredsById:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.snippetsResponse(c1);}cV=this;cW=this.toId();cX=this;cY={$:4,$0:cU};cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cX.msgClient.sendGetReply((c2=ci.stringify((bY.j$4())(cY)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bX.j$4())(ci.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestPreds:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.snippetsResponse(c1);}cV=this;cW=this.toId();cX={$:8,$0:b4.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=ci.stringify((bY.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bX.j$4())(ci.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestJSCode:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponseR(c1);}cV=this;cW=this.toId();cX={$:10,$0:b4.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=ci.stringify((bY.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bX.j$4())(ci.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestCode:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.stringResponse(c1);}cV=this;cW=this.toId();cX={$:7,$0:b4.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=ci.stringify((bY.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bX.j$4())(ci.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},RequestSnippet:function(cU){var cV,cW,cX,cY,cZ;function c0(c1){return cV.snippetResponse(c1);}cV=this;cW=this.toId();cX={$:9,$0:b4.SplitChars(cU,["/"],0)};cY=this;cZ=p.wrap();return cZ.Run(cZ.Delay(function(){var c1,c2;return cZ.Bind$3((c1=cY.msgClient.sendGetReply((c2=ci.stringify((bY.j$4())(cX)),G.New(new B({$:0,$0:""}),cW,D.MsgRequest,"",cg.NewGuid(),c2,F.NoReply))),(p.map(function(c3){return(bX.j$4())(ci.parse(c3));}))(c1)),function(c3){return cZ.Bind$1(c0(c3),function(c4){return cZ.Return(c4);});});}));},SendMessage:function(cU){var cV,cW,cX;cV=this.toId();cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){var cY,cZ;return cX.Bind$3((cY=cW.msgClient.sendGetReply((cZ=ci.stringify((bY.j$4())(cU)),G.New(new B({$:0,$0:""}),cV,D.MsgRequest,"",cg.NewGuid(),cZ,F.NoReply))),(p.map(function(c0){return(bX.j$4())(ci.parse(c0));}))(cY)),function(c0){return cX.Bind$1(m.succeed(c0),function(c1){return cX.Return(c1);});});}));},SendMessage$1:function(cU,cV){var cW,cX;cW=this;cX=p.wrap();return cX.Run(cX.Delay(function(){var cY,cZ;return cX.Bind$3((cY=cW.msgClient.sendGetReply((cZ=ci.stringify((bY.j$4())(cV)),G.New(new B({$:0,$0:""}),cU,D.MsgRequest,"",cg.NewGuid(),cZ,F.NoReply))),(p.map(function(c0){return(bX.j$4())(ci.parse(c0));}))(cY)),function(c0){return cX.Bind$1(m.succeed(c0),function(c1){return cX.Return(c1);});});}));}},i,N);N.get_FSStationId_=function(){return"FSharpStation1519372239283";};N.New=b6.Ctor(function(cU,cV,cW,cX){N.New$1.call(this,new L.New(cU,cW,cX),cU,cV);},N);N.New$1=b6.Ctor(function(cU,cV,cW){this.msgClient=cU;this.fsIds=g.defaultValue("FSharpStation1519372239283",cW);},N);A.extractEndPoint=function(){return ce.get(b4.SplitChars(cr.href.substring(cr.href.indexOf("//")+2),["/"],0),0);};A.waitingAgent=function(cU){return r.fold(function(cV,cW){var cX;cX=null;return b1.Delay(function(){var cY,cZ,c0,c1,c2,c3,c4,c5,c6;return b1.Combine(cW.$==1?(cY=cW.$1,(g.defaultWith(function(){cU(cY);},(cZ=cs.TryFind(cW.$0,cV),cZ==null?null:{$:1,$0:(c0=cZ.$0,(c1=c0[0],(c0[1],c0[2],c1(cY))))})),b1.Zero())):cW.$==2?(c2=cs.TryFind(cW.$0,cV),c2==null?void 0:(c3=c2.$0,c3[0],c4=c3[1],c3[2],c4(cW.$1())),b1.Zero()):cW.$==3?(c5=cs.TryFind(cW.$0,cV),c5==null?void 0:(c6=c5.$0,c6[0],c6[1],c6[2](cW.$1())),b1.Zero()):b1.Zero(),b1.Delay(function(){var c7;return b1.Return((cW.$==2?(c7=cW.$0,true):cW.$==3?(c7=cW.$0,true):cW.$==0?false:(c7=cW.$0,true))?cV.Remove(c7):cV.Add(cW.$0,cW.$1));}));});},new ct.New([]));};A.makeReply=function(cU){return A.replier(F.NoReply,A.msgType(D.MsgReply,cU));};A.mapPayload=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cV.subtype,cV.id,cU(cV.payload),cV.replier);};A.msgId=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cV.subtype,cU,cV.payload,cV.replier);};A.replier=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cV.subtype,cV.id,cV.payload,cU);};A.subtype=function(cU,cV){return G.New(cV.from,cV.destination,cV.msgType,cU,cV.id,cV.payload,cV.replier);};A.msgType=function(cU,cV){return G.New(cV.from,cV.destination,cU,cV.subtype,cV.id,cV.payload,cV.replier);};A.destination=function(cU,cV){return G.New(cV.from,cU,cV.msgType,cV.subtype,cV.id,cV.payload,cV.replier);};A.from=function(cU,cV){return G.New(cU,cV.destination,cV.msgType,cV.subtype,cV.id,cV.payload,cV.replier);};A.MessageBrokerAddress=function(){bW.$cctor();return bW.MessageBrokerAddress;};A.MessageBrokerId=function(){bW.$cctor();return bW.MessageBrokerId;};P.extractConfig=function(cU){return b4.StartsWith(cU,"////-d:")?cu.string(cU,{$:1,$0:4},{$:1,$0:cU.indexOf("\n")-1}):"";};O.abortFsiExe=function(){b1.Start((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.abortFsiExe:-829366048",[]),null);};O.evaluateAR=function(cU,cV,cW,cX){var cY;cY=null;return b1.Delay(function(){return b1.Bind((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator.evaluateAS:-156288114",[cU,cV,cW,cX]),function(cZ){function c0(c1,c2){return new l.New(c1,c2);}return b1.Return({$:0,$0:cZ[0],$1:b9.ofSeq(b2.map(function(c1){return c0(c1[0],c1[1]);},cZ[1]))});});});};Q.translateAR=function(cU,cV){var cW;cW=null;return b1.Delay(function(){return b1.Bind((new cw.New()).Async("FSharpStation:FSSGlobal.FsTranslator.translateAS:608897894",[cU,cV]),function(cX){function cY(cZ,c0){return new l.New(cZ,c0);}return b1.Return({$:0,$0:cX[0],$1:b9.ofSeq(b2.map(function(cZ){return cY(cZ[0],cZ[1]);},cX[1]))});});});};T.New=function(cU,cV){return{Code:cU,Message:cV};};U.New=function(cU,cV,cW){return{File:cU,Line:cV,Column:cW};};V.New=function(cU,cV,cW,cX){return{Name:cU,ReplacementText:cV,Glyph:cW,GlyphChar:cX};};W.New=function(cU,cV){return{Signature:cU,Comment:cV};};X.New=function(cU,cV,cW,cX){return{Name:cU,CanonicalTypeTextForSorting:cV,Display:cW,Description:cX};};Y.New=function(cU,cV,cW,cX){return{Tip:cU,TypeText:cV,Parameters:cW,IsStaticArguments:cX};};Z.New=function(cU,cV){return{Name:cU,Type:cV};};_0.New=function(cU,cV){return{OutputType:cU,Parameters:cV};};_1.New=function(cU,cV,cW){return{Name:cU,CurrentParameter:cV,Overloads:cW};};_2.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4){return{FileName:cU,StartLine:cV,StartColumn:cW,EndLine:cX,EndColumn:cY,IsFromDefinition:cZ,IsFromAttribute:c0,IsFromComputationExpression:c1,IsFromDispatchSlotImplementation:c2,IsFromPattern:c3,IsFromType:c4};};_3.New=function(cU,cV){return{Name:cU,Uses:cV};};_4.New=function(cU,cV){return{Name:cU,Overloads:cV};};_5.New=function(cU,cV,cW){return{Fsc:cU,Fsi:cV,MSBuild:cW};};_6.New=function(cU,cV,cW,cX,cY,cZ,c0){return{FileName:cU,StartLine:cV,EndLine:cW,StartColumn:cX,EndColumn:cY,Message:cZ,Subcategory:c0};};_7.New=function(cU,cV){return{File:cU,Errors:cV};};_8.New=function(cU){return{Kind:cU};};_9.New=function(cU,cV,cW,cX,cY,cZ,c0,c1){return{UniqueName:cU,Name:cV,Glyph:cW,GlyphChar:cX,IsTopLevel:cY,File:cZ,EnclosingEntity:c0,IsAbstract:c1};};_.New=function(cU,cV){return{Declaration:cU,Nested:cV};};$.New=function(cU,cV,cW,cX,cY,cZ){return{Namespace:cU,Name:cV,Type:cW,Line:cX,Column:cY,MultipleNames:cZ};};ba.New=function(cU,cV){return{Name:cU,Qualifier:cV};};bb.New=function(cU,cV,cW){return{Opens:cU,Qualifies:cV,Word:cW};};bc.New=function(cU){return{Text:cU};};bd.ACMIdentification={$:0};be=R.FSAutoCompleteIntermediaryClient=b6.Class({info2Bool:function(cU){return cU.$==0&&cU.$0==="true";},errors2String:function(cU){return cU.$==7?b4.concat("\n",b2.map(function(cV){return((((((((b6.Curried(function(cW,cX,cY,cZ,c0,c1,c2,c3){return cW("ErrFSharp \"F# "+b7.toSafe(cX)+".fsx ("+a.String(cY)+","+a.String(cZ)+") - ("+a.String(c0)+","+a.String(c1)+") "+b7.toSafe(c2)+":"+b7.toSafe(c3)+"\"");},8))(a.id))(cV.FileName))(cV.StartLine))(cV.StartColumn))(cV.EndLine))(cV.EndColumn))(cV.Subcategory))(cV.Message);},cU.$0.Errors)):(function(cV){return function(cW){return cV(bZ.p$4(cW));};}(a.id))(cU);},tip2String:function(cU){return cU.$==11?b4.concat("\n",b2.collect(function(cV){return b9.ofArray([cV.Signature,cV.Comment]);},b2.collect(a.id,cU.$0))):(function(cV){return function(cW){return cV(bZ.p$4(cW));};}(a.id))(cU);},comp2Strings:function(cU){var cV;cV=this;return cU.$==3?ce.map(function(cW){return[cW.Name,cW.ReplacementText,cW.Glyph,cW.GlyphChar];},cU.$0):cU.$==2?[]:cU.$==17?ce.collect(function(cW){return cV.comp2Strings(cW);},cU.$0):[[(function(cW){return function(cX){return cW(bZ.p$4(cX));};}(a.id))(cU),"","ErrorMsg","E"]];},Async_map:function(cU,cV){var cW;cW=null;return b1.Delay(function(){return b1.Bind(cV,function(cX){return b1.Return(cU(cX));});});},FindDecl:function(cU,cV,cW,cX){return this.Async_map(a.id,R.sendMessage({$:7,$0:cU,$1:cV,$2:cW,$3:cX}));},FindDecl$1:function(cU,cV,cW){return this.Async_map(a.id,R.sendMessage({$:6,$0:cU,$1:cV,$2:cW}));},Complete:function(cU,cV,cW,cX,cY){var cZ;cZ=this;return cZ.Async_map(function(c0){return cZ.comp2Strings(c0);},R.sendMessage({$:9,$0:cU,$1:cW,$2:cX,$3:cV,$4:cY}));},Complete$1:function(cU,cV,cW,cX){var cY;cY=this;return cY.Async_map(function(cZ){return cY.comp2Strings(cZ);},R.sendMessage({$:8,$0:cU,$1:cW,$2:cX,$3:cV}));},ToolTip:function(cU,cV,cW,cX){var cY;cY=this;return cY.Async_map(function(cZ){return cY.tip2String(cZ);},R.sendMessage({$:3,$0:cU,$1:cV,$2:cW,$3:cX}));},ToolTip$1:function(cU,cV,cW){var cX;cX=this;return cX.Async_map(function(cY){return cX.tip2String(cY);},R.sendMessage({$:2,$0:cU,$1:cV,$2:cW}));},Parse:function(cU,cV){var cW;cW=this;return cW.Async_map(function(cX){return cW.errors2String(cX);},R.sendMessage({$:10,$0:cU,$1:cV,$2:[]}));},Parse$1:function(cU,cV,cW){var cX;cX=this;return cX.Async_map(function(cY){return cX.errors2String(cY);},R.sendMessage({$:10,$0:cU,$1:cV,$2:cW}));},MustParse:function(cU,cV){var cW;cW=this;return cW.Async_map(function(cX){return cW.info2Bool(cX);},R.sendMessage({$:11,$0:cU,$1:cV}));}},i,be);be.New=b6.Ctor(function(cU,cV){},be);R.sendMessage=function(cU){var cV;cV=null;return b1.Delay(function(){return b1.Bind((new cw.New()).Async("FSharpStation:FSSGlobal.FSAutoCompleteIntermediary.sendMessageRpc:1124743568",[cU]),function(cW){return b1.Return(cW);});});};bg=bf.Val=b6.Class({get_ValTypeMember:function(){return 0;}},null,bg);bh.HelperType={$:0};bh.op_AmpGreater=function(cU,cV){return new bg({$:2,$0:cV});};bh.op_AmpGreater$1=function(cU,cV){return new bg({$:1,$0:cV});};bh.op_AmpGreater$2=function(cU,cV){return cV;};bh.op_AmpGreater$3=function(cU,cV){return cV;};bh.op_AmpGreater$4=function(cU,cV){return cV;};bh.op_AmpGreater$5=function(cU,cV){return cV;};bh.op_AmpGreater$6=function(cU,cV){return cV;};bh.op_AmpGreater$7=function(cU,cV){return cV;};bh.op_AmpGreater$8=function(cU,cV){return cV;};bh.op_AmpGreater$9=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$10=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$11=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$12=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$13=function(cU,cV){return new bg({$:0,$0:cV});};bh.op_AmpGreater$14=function(cU,cV){return new bg({$:0,$0:cV});};bi=bg.valBuilder=b6.Class({Delay:function(cU){return cU();},Zero:function(){return new bg({$:0,$0:null});},Bind:function(cU,cV){return bg.bind(cV,cU);},Bind$1:function(cU,cV){return bg.bind(cV,cU);},Bind$2:function(cU,cV){return bg.bind(cV,cU);},ReturnFrom:a.id,Return:function(cU){return new bg({$:0,$0:cU});}},i,bi);bi.New=b6.Ctor(function(){},bi);bg.fixitF=function(cU,cV){return cU(cV);};bg.valFlow=function(){bW.$cctor();return bW.valFlow;};bg.mapCached=function(cU,cV){return new bg({$:2,$0:cz.MapCached(cU,bg.toView(cV))});};bg.sink=function(cU,cV){cz.Sink(cU,bg.toView(bg.fixit(cV)));};bg.mapAsync=function(cU,cV){return new bg({$:2,$0:cz.MapAsync(cU,bg.toView(bg.fixit(cV)))});};bg.iter4=function(cU,cV,cW,cX,cY){bg.iterV(a.ignore,bg.map4(cU,cV,cW,cX,cY));};bg.iter3=function(cU,cV,cW,cX){bg.iterV(a.ignore,bg.map3(cU,cV,cW,cX));};bg.iter2=function(cU,cV,cW){bg.iterV(a.ignore,bg.map2(cU,cV,cW));};bg.apply=function(cU,cV){return bg.bindV(function(cW){return bg.mapV(cW,cU);},cV);};bg.map4=function(cU,cV,cW,cX,cY){return bg.map4V(cU,bg.fixit(cV),bg.fixit(cW),bg.fixit(cX),bg.fixit(cY));};bg.map3=function(cU,cV,cW,cX){return bg.map3V(cU,bg.fixit(cV),bg.fixit(cW),bg.fixit(cX));};bg.map2=function(cU,cV,cW){return((bg.map2V(cU))(bg.fixit(cV)))(bg.fixit(cW));};bg.map=function(cU,cV){return bg.mapV(cU,bg.fixit(cV));};bg.bind=function(cU,cV){return bg.bindV(cU,bg.fixit(cV));};bg.iter=function(cU,cV){bg.iterV(cU,bg.fixit(cV));};bg.toDoc=function(cU){return cA.EmbedView(bg.toView(bg.fixit(cU)));};bg.fixit=function(cU){return bg.fixitF(bg.toVal,cU);};bg.toVal=function(cU){return typeof cU=="string"?new bg({$:0,$0:cU}):typeof cU=="number"?new bg({$:0,$0:cU}):typeof cU=="boolean"?new bg({$:0,$0:cU}):cU instanceof cA?new bg({$:0,$0:cU}):cU instanceof bg?cU:cU instanceof cy.Var?new bg({$:1,$0:cU}):"RSet"in cU?new bg({$:1,$0:cU}):typeof cU=="function"?new bg({$:2,$0:cU}):cU.get_ValTypeMember()===0?cU:cB.FailWith((function(cV){return function(cW){return cV("Could not convert "+b7.prettyPrint(cW));};}(a.id))(cU));};bg.attrV=function(cU,cV){return cV.$==2?cC.Dynamic(cU,cV.$0):cV.$==1?cC.Dynamic(cU,cV.$0.RView()):cD.Create(cU,cV.$0);};bg.attrVO=function(cU,cV){var cW,cX;return cV.$==2?(cW=cV.$0,cC.DynamicPred(cU,cz.Map(function(cY){return cY!=null;},cW),cz.Map(function(cY){return cY==null?"":cY.$0;},cW))):cV.$==1?(cX=cV.$0,cC.DynamicPred(cU,cz.Map(function(cY){return cY!=null;},cX.RView()),cz.Map(function(cY){return cY==null?"":cY.$0;},cX.RView()))):cV.$0==null?cC.DynamicPred(cU,cz.Const(false),cz.Const("")):cD.Create(cU,cV.$0.$0);};bg.tagElt=function(cU,cV){return cV.$==2?cA.EmbedView(cz.Map(cU,cV.$0)):cV.$==1?cA.EmbedView(cz.Map(cU,cV.$0.RView())):cU(cV.$0);};bg.tagDoc=function(cU,cV){return cV.$==2?cA.EmbedView(cz.Map(cU,cV.$0)):cV.$==1?cA.EmbedView(cz.Map(cU,cV.$0.RView())):cU(cV.$0);};bg.map4V=function(cU,cV,cW,cX,cY){var cZ;cZ=bg.map3V(cU,cV,cW,cX);return((bg.map2V(function(c0){return function(c1){return c1(c0);};}))(cY))(cZ);};bg.map3V=function(cU,cV,cW,cX){var cY;cY=((bg.map2V(cU))(cV))(cW);return((bg.map2V(function(cZ){return function(c0){return c0(cZ);};}))(cX))(cY);};bg.map2V=function(cU){function cV(cX,cY,cZ){return(cX(cZ))(cY);}function cW(cX){var cY,cZ;cY=(cZ=function(c0){var c1;c1=cU(c0);return function(c2){return bg.mapV(c1,c2);};},function(c0){return cV(cZ,cX,c0);});return function(c0){return bg.bindV(cY,c0);};}return(b6.Curried3(cV))(cW);};bg.bindV=function(cU,cV){return cV.$==2?new bg({$:2,$0:cz.Bind(function(cW){return bg.toView(cU(cW));},cV.$0)}):cV.$==1?new bg({$:2,$0:cz.Bind(function(cW){return bg.toView(cU(cW));},cV.$0.RView())}):cU(cV.$0);};bg.getAsync=function(cU){return cU.$==2?cz.GetAsync(cU.$0):cU.$==1?b1.Return(cU.$0.RVal()):b1.Return(cU.$0);};bg.toView=function(cU){return cU.$==2?cU.$0:cU.$==1?cU.$0.RView():cz.Const(cU.$0);};bg.iterV=function(cU,cV){if(cV.$==2)cz.Get(cU,cV.$0);else if(cV.$==1)cU(cV.$0.RVal());else cU(cV.$0);};bg.mapV=function(cU,cV){return cV.$==2?new bg({$:2,$0:cz.Map(cU,cV.$0)}):cV.$==1?new bg({$:2,$0:cz.Map(cU,cV.$0.RView())}):new bg({$:0,$0:cU(cV.$0)});};bj=bf.HtmlNode=b6.Class({Style:function(cU){return this.AddChildren([bf.style(cU)]);},AddClass:function(cU){return bf.addClass(cU,this);},InsertChildren:function(cU){return bf.insertChildren(cU,this);},AddChildren:function(cU){return bf.addChildren(cU,this);},get_toDoc:function(){var cU,cV,cW;return this.$==1||this.$==4?cA.Empty():(cV=bf.chooseNode(this),(cW=cA.Empty(),cV==null?cW:cV.$0));}},null,bj);bj.HtmlEmpty=new bj({$:4});bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(11,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(10,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(9,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(8,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(7,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(6,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(5,cV,cU);};bj.op_MinusMinusMinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(4,cV,cU);};bj.op_MinusMinusMinusMinus=function(cU,cV){return bf.indent2Level(3,cV,cU);};bj.op_MinusMinus=function(cU,cV){return bf.indent2Level(2,cV,cU);};bj.op_Addition=function(cU,cV){return new b9.T({$:1,$0:cV,$1:cU});};bj.op_MinusMinusMinus=function(cU,cV){return cU.$==1?cU.$1.$==1?new b9.T({$:1,$0:cU.$1.$0.AddChildren([cU.$0.AddChildren([cV])]),$1:cU.$1.$1}):b9.ofArray([cU.$0.AddChildren([cV])]):b9.T.Empty;};bj.op_Subtraction=function(cU,cV){return cU.$==0?b9.T.Empty:new b9.T({$:1,$0:cU.$0.AddChildren([cV]),$1:cU.$1});};bf.LoadFilesAsync=function(cU){function cV(cW,cX){try{a.CIPHERSpaceLoadFiles(cU,cW);}catch(cY){cX(cY);}}return b1.FromContinuations(function(cW,cX,cY){return cV.apply(null,[cW,cX,cY]);});};bf.findRootElement=function(cU){var cV;return!function(cW){return cU.getRootNode(cW);}?a.document.body:(cV=cU.getRootNode(),!cV.body?cV.firstChild:cV.body);};bf.createIFrame=function(cU){var cV;cV=cE.Create$1(true);return bf.div([bf.style("position: relative; overflow: hidden; height: 100%; width: 100%;"),bf.iframe([bf.style("position: absolute; width:100%; height:100%;"),bf.frameborder("0"),new bj({$:7,$0:cC.OnAfterRender(cU)}),new bj({$:7,$0:cC.Handler("mouseleave",function(){return function(){return cE.Set(cV,true);};})})]),bf.div([bf.style("position: absolute;"),bf.classIf("iframe-cover",bg.map(a.id,cV)),new bj({$:7,$0:cC.Handler("mouseenter",function(){return function(){return cz.Get(function(cW){if(!cW)cE.Set(cV,false);},cG.get_MousePressed());};})})]),bf.styleH([bf.htmlText(".iframe-cover { top:0; left:0; right:0; bottom:0; background: blue; opacity: 0.04; z-index: 2; }")])]);};bf.bindHElem=function(cU,cV){return new bj({$:5,$0:bg.map(cU,bg.fixit(cV))});};bf.string2Styles=function(){bW.$cctor();return bW.string2Styles;};bf.style2pairs=function(cU){return ce.map(function(cV){return[b4.Trim(ce.get(cV,0)),b4.Trim(ce.get(cV,1))];},ce.filter(function(cV){return ce.length(cV)===2;},ce.map(function(cV){return b4.SplitChars(cV,[":"],0);},b4.SplitChars(cU,[";"],0))));};bf.xclass=function(cU){var cV,cW;return new bj({$:7,$0:(cV=bg.fixit(cU),cV.$==2?cC.DynamicClass("class_for_view_not_implemented",cV.$0,function(cX){return""!==cX;}):cV.$==1?(cW=cV.$0,cC.DynamicClass(cW.RVal(),cW.RView(),function(cX){return""!==cX;})):cC.Class(cV.$0))});};bf.classIf=function(cU,cV){return bf["class"](bg.map(function(cW){return cW?cU:"";},bg.fixit(cV)));};bf.css=function(cU){return bf.styleH([bf.htmlText(cU)]);};bf.style1=function(cU,cV){var cW;return bf.style(bg.map((cW=cU+":",function(cX){return cW+cX;}),cV));};bf.style=function(cU){return bf.htmlAttribute("style",cU);};bf.draggable=function(cU){return bf.htmlAttribute("draggable",cU);};bf.spellcheck=function(cU){return bf.htmlAttribute("spellcheck",cU);};bf.frameborder=function(cU){return bf.htmlAttribute("frameborder",cU);};bf.Id=function(cU){return bf.htmlAttribute("id",cU);};bf.title=function(cU){return bf.htmlAttribute("title",cU);};bf.width=function(cU){return bf.htmlAttribute("width",cU);};bf.type=function(cU){return bf.htmlAttribute("type",cU);};bf["class"]=function(cU){return bf.htmlAttribute("class",cU);};bf.src=function(cU){return bf.htmlAttribute("src",cU);};bf.charset=function(cU){return bf.htmlAttribute("charset",cU);};bf.rel=function(cU){return bf.htmlAttribute("rel",cU);};bf.hrefO=function(cU){return bf.htmlAttributeO("href",cU);};bf.href=function(cU){return bf.htmlAttribute("href",cU);};bf.target=function(cU){return bf.htmlAttribute("target",cU);};bf.strong=function(cU){return bf.htmlElement("strong",cU);};bf.section=function(cU){return bf.htmlElement("section",cU);};bf.body=function(cU){return bf.htmlElement("body",cU);};bf.iframe=function(cU){return bf.htmlElement("iframe",cU);};bf.link=function(cU){return bf.htmlElement("link",cU);};bf.fieldset=function(cU){return bf.htmlElement("fieldset",cU);};bf.styleH=function(cU){return bf.htmlElement("style",cU);};bf.script=function(cU){return bf.htmlElement("script",cU);};bf.button=function(cU){return bf.htmlElement("button",cU);};bf.label=function(cU){return bf.htmlElement("label",cU);};bf.tbody=function(cU){return bf.htmlElement("tbody",cU);};bf.td=function(cU){return bf.htmlElement("td",cU);};bf.tr=function(cU){return bf.htmlElement("tr",cU);};bf.th=function(cU){return bf.htmlElement("th",cU);};bf.thead=function(cU){return bf.htmlElement("thead",cU);};bf.table=function(cU){return bf.htmlElement("table",cU);};bf.form=function(cU){return bf.htmlElement("form",cU);};bf.span=function(cU){return bf.htmlElement("span",cU);};bf.img=function(cU){return bf.htmlElement("img",cU);};bf.div=function(cU){return bf.htmlElement("div",cU);};bf.h6=function(cU){return bf.htmlElement("h6",cU);};bf.h5=function(cU){return bf.htmlElement("h5",cU);};bf.h4=function(cU){return bf.htmlElement("h4",cU);};bf.h3=function(cU){return bf.htmlElement("h3",cU);};bf.h2=function(cU){return bf.htmlElement("h2",cU);};bf.h1=function(cU){return bf.htmlElement("h1",cU);};bf.hr=function(cU){return bf.htmlElement("hr",cU);};bf.br=function(cU){return bf.htmlElement("br",cU);};bf.li=function(cU){return bf.htmlElement("li",cU);};bf.ul=function(cU){return bf.htmlElement("ul",cU);};bf.p=function(cU){return bf.htmlElement("p",cU);};bf.a=function(cU){return bf.htmlElement("a",cU);};bf.textV=function(cU){return bf.tag(cA.TextNode,cU);};bf._placeholder=function(cU){return bf.atr("placeholder",cU);};bf._style=function(cU){return bf.atr("style",cU);};bf._type=function(cU){return bf.atr("type",cU);};bf._class=function(cU){return bf.atr("class",cU);};bf.tag=function(cU,cV){return bg.tagDoc(cU,bg.fixit(cV));};bf.atr=function(cU,cV){return bg.attrV(cU,bg.fixit(cV));};bf.renderDoc=function(){bW.$cctor();return bW.renderDoc;};bf.op_BangBang=function(cU,cV){return b9.ofArray([cU(cV)]);};bf.endHtmlIndent=function(cU){var cV;cV=bf.finishO(cU);return cV==null?bf.htmlText("Malformed HTMLNode"):cV.$0;};bf.finishO=function(cU){return cU.$==1?cU.$1.$==1?bf.finishO(bf.out(cU)):{$:1,$0:cU.$0}:null;};bf.indent2Level=function(cU,cV,cW){return cW.get_Length()<cU?new b9.T({$:1,$0:cV,$1:cW}):bf.indent2Level(cU,cV,bf.out(cW));};bf.out=function(cU){return cU.$==1?cU.$1.$==1?new b9.T({$:1,$0:bf.addChildren([cU.$0],cU.$1.$0),$1:cU.$1.$1}):b9.ofArray([cU.$0]):b9.T.Empty;};bf.addClassIf=function(cU,cV){var cW;cW=bg.map(function(cX){return cX?cU:"";},bg.fixit(cV));return function(cX){return bf.addClass(cW,cX);};};bf.addClass=function(cU,cV){return bf.addChildren(b9.ofArray([bf.htmlAttribute("class",cU)]),cV);};bf.insertChildren=function(cU,cV){function cW(cX,cY){return[cX,b2.append(cU,cY)];}return bf.mapHtmlElement(function(cX){return function(cY){return cW(cX,cY);};},cV);};bf.addChildren=function(cU,cV){function cW(cX,cY){return[cX,b2.append(cY,cU)];}return bf.mapHtmlElement(function(cX){return function(cY){return cW(cX,cY);};},cV);};bf.someElt=function(cU){return new bj({$:6,$0:cU});};bf.str=function(cU){return new bj({$:3,$0:bg.fixit(cU)});};bf.htmlText=function(cU){return new bj({$:3,$0:bg.fixit(cU)});};bf.htmlAttributeO=function(cU,cV){return new bj({$:2,$0:cU,$1:bg.fixit(cV)});};bf.htmlAttribute=function(cU,cV){return new bj({$:1,$0:cU,$1:bg.fixit(cV)});};bf.htmlElement=function(cU,cV){return new bj({$:0,$0:cU,$1:cV});};bf.mapHtmlElement=function(cU,cV){var cW;return cV.$==0?(cW=(cU(cV.$0))(cV.$1),new bj({$:0,$0:cW[0],$1:cW[1]})):cV.$==5?new bj({$:5,$0:bg.map(function(cX){return bf.mapHtmlElement(cU,cX);},cV.$0)}):cV;};bf.getAttrChildren=function(cU){var cV,cW,cX;function cY(cZ){var c0;return cZ.$==1&&(cZ.$0===cU&&(c0=[cZ.$0,cZ.$1],true))?{$:1,$0:c0[1]}:null;}cV=function(cZ){return b2.tryPick(cY,cZ);};cW=(cX=new bg({$:0,$0:""}),function(cZ){return cZ==null?cX:cZ.$0;});return function(cZ){return cW(cV(cZ));};};bf.chooseNode=function(cU){var cV,cW,cX,cY;return cU.$==0?(cV=cU.$1,{$:1,$0:cA.Element(cU.$0,bf.getAttrsFromSeq(cV),b2.choose(bf.chooseNode,cV))}):cU.$==3?{$:1,$0:bg.tagDoc(cA.TextNode,cU.$0)}:cU.$==6?{$:1,$0:cU.$0}:cU.$==5?{$:1,$0:(cW=bg.toView(cU.$0),cA.BindView((cX=(cY=cA.Empty(),function(cZ){return cZ==null?cY:cZ.$0;}),function(cZ){return cX(bf.chooseNode(cZ));}),cW))}:null;};bf.getAttrsFromSeq=function(cU){var cV;cV=b2.choose(bf.chooseAttr,cU);return b2.append(b9.choose(a.id,b9.ofArray([bf.groupAttr("class"," ",cU),bf.groupAttr("style","; ",cU)])),cV);};bf.groupAttr=function(cU,cV,cW){var cX,cY;function cZ(c0,c1){return bf.concat(cV,c0,c1);}cX=b2.choose(function(c0){return bf.chooseThisAttr(cU,c0);},cW);return b2.isEmpty(cX)?null:{$:1,$0:bg.attrV(cU,(cY=(b6.Curried3(bg.map2))(function(c0){return function(c1){return cZ(c0,c1);};}),b2.reduce(function(c0,c1){return(cY(c0))(c1);},cX)))};};bf.concat=function(cU,cV,cW){return cV+cU+cW;};bf.chooseThisAttr=function(cU,cV){var cW;return cV.$==1&&(cV.$0===cU&&(cW=[cV.$0,cV.$1],true))?{$:1,$0:cW[1]}:null;};bf.chooseAttr=function(cU){var cV,cW,cX,cY;return cU.$==1&&((cW=cU.$0,cW!=="class"&&cW!=="style")&&(cV=[cU.$0,cU.$1],true))?{$:1,$0:bg.attrV(cV[0],cV[1])}:cU.$==2&&((cY=cU.$0,cY!=="class"&&cY!=="style")&&(cX=[cU.$0,cU.$1],true))?{$:1,$0:bg.attrVO(cX[0],cX[1])}:cU.$==7?{$:1,$0:cU.$0}:null;};bf.addClassX=function(cU,cV){var cW;return b4.concat(" ",(cW=new cH.New$1(cI.OfSeq(b4.SplitChars(cU,[" "],0))),new cH.New$1(cI.OfSeq(b2.append(new cH.New$1(cI.OfSeq(b4.SplitChars(cV,[" "],0))),cW)))));};bl=bk.Button=b6.Class({OnClick:function(cU){return bl.New(this._class,this._type,this.style,this.text,cU,this.disabled,this.id);},Disabled:function(cU){return bl.New(this._class,this._type,this.style,this.text,this.onClick,bg.fixit(cU),this.id);},Text:function(cU){return bl.New(this._class,this._type,this.style,bg.fixit(cU),this.onClick,this.disabled,this.id);},Style:function(cU){return bl.New(this._class,this._type,bg.fixit(cU),this.text,this.onClick,this.disabled,this.id);},Type:function(cU){return bl.New(this._class,bg.fixit(cU),this.style,this.text,this.onClick,this.disabled,this.id);},Class:function(cU){return bl.New(bg.fixit(cU),this._type,this.style,this.text,this.onClick,this.disabled,this.id);},Id:function(cU){return bl.New(this._class,this._type,this.style,this.text,this.onClick,this.disabled,cU);},get_Render:function(){var cU,cV;return new bj({$:6,$0:(cU=bf.button([bf.type(this._type),bf["class"](this._class),bf.Id(this.id),bf.style(this.style),new bj({$:7,$0:(cV=cz.Const(""),cC.DynamicPred("disabled",bg.toView(this.disabled),cV))}),new bj({$:7,$0:cD.Handler("click",this.onClick)}),new bj({$:3,$0:this.text})]),(bf.renderDoc())(cU))});}},null,bl);bl.New$1=function(cU){return bl.New(bg.fixit("btn"),bg.fixit("button"),bg.fixit(""),bg.fixit(cU),function(){return function(){return null;};},bg.fixit(false),"");};bl.New=function(cU,cV,cW,cX,cY,cZ,c0){return new bl({_class:cU,_type:cV,style:cW,text:cX,onClick:cY,disabled:cZ,id:c0});};bm=bk.Input=b6.Class({get_Var:function(){return this["var"];},SetVar:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,cU,this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded);},Suffix:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,cU,this.content,this.prefixAdded,true);},Prefix:function(cU){return this.Prefix$1(bf.htmlText(cU));},Prefix$1:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],cU,this.suffix,this.content,true,this.suffixAdded);},Content:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,cU,this.prefixAdded,this.suffixAdded);},Id:function(cU){return bm.New(this._type,this._class,this.style,this.placeholder,cU,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded);},Placeholder:function(cU){return bm.New(this._type,this._class,this.style,bg.fixit(cU),this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded);},Style:function(cU){return bm.New(this._type,this._class,bg.fixit(cU),this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded);},Type:function(cU){return bm.New(bg.fixit(cU),this._class,this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded);},Class:function(cU){return bm.New(this._type,bg.fixit(cU),this.style,this.placeholder,this.id,this["var"],this.prefix,this.suffix,this.content,this.prefixAdded,this.suffixAdded);},get_Render:function(){var cU;function cV(cW){return cW.$==3?"input-group-addon":"input-group-btn";}cU=this;return bf.div(b9.ofSeq(b2.delay(function(){return b2.append(cU.prefixAdded||cU.suffixAdded?[bf["class"]("input-group")]:[],b2.delay(function(){return b2.append(cU.prefixAdded?[bf.span([bf["class"](cV(cU.prefix)),cU.prefix])]:[],b2.delay(function(){return b2.append([new bj({$:6,$0:cA.Input(b2.append(cU.content,b9.ofArray([bf._type(cU._type),bf._class(cU._class),bf._style(cU.style),cD.Create("id",cU.id),bf._placeholder(cU.placeholder)])),cU["var"])})],b2.delay(function(){return cU.suffixAdded?[bf.span([bf["class"](cV(cU.suffix)),cU.suffix])]:[];}));}));}));})));}},null,bm);bm.New$1=function(cU){return bm.New$2(cE.Create$1(cU));};bm.New$2=function(cU){var cV;cV=bg.fixit("form-control");return bm.New(bg.fixit("text"),cV,bg.fixit(""),bg.fixit("Enter text:"),"",cU,bj.HtmlEmpty,bj.HtmlEmpty,b9.T.Empty,false,false);};bm.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4){return new bm({_type:cU,_class:cV,style:cW,placeholder:cX,id:cY,"var":cZ,prefix:c0,suffix:c1,content:c2,prefixAdded:c3,suffixAdded:c4});};bn=bk.Hoverable=b6.Class({Content:function(cU){var cV;cV=this;return cU.AddChildren([bf.classIf("hovering",this.hover),new bj({$:7,$0:cC.Handler("mouseenter",function(){return function(){return cV.hover.set_RVal(true);};})}),new bj({$:7,$0:cC.Handler("mouseleave",function(){return function(){return cV.hover.set_RVal(false);};})})]);},Content$1:function(cU){var cV;cV=this;return bf.div(b2.append(cU,b9.ofArray([bf.classIf("hovering",this.hover),new bj({$:7,$0:cC.Handler("mouseenter",function(){return function(){return cV.hover.set_RVal(true);};})}),new bj({$:7,$0:cC.Handler("mouseleave",function(){return function(){return cV.hover.set_RVal(false);};})})])));}},null,bn);bn.get_Demo=function(){return bn.get_New().Content(bf.div([bf.style("flex-flow: column;")]));};bn.get_New=function(){return bn.New(cE.Create$1(false));};bn.New=function(cU){return new bn({hover:cU});};bo=bk.TextArea=b6.Class({get_Var:function(){return this["var"];},SetVar:function(cU){return bo.New(this._class,this.placeholder,this.title,this.spellcheck,this.id,cU);},Id:function(cU){return bo.New(this._class,this.placeholder,this.title,this.spellcheck,cU,this["var"]);},Spellcheck:function(cU){return bo.New(this._class,this.placeholder,this.title,cU,this.id,this["var"]);},Title:function(cU){return bo.New(this._class,this.placeholder,bg.fixit(cU),this.spellcheck,this.id,this["var"]);},Placeholder:function(cU){return bo.New(this._class,bg.fixit(cU),this.title,this.spellcheck,this.id,this["var"]);},Class:function(cU){return bo.New(bg.fixit(cU),this.placeholder,this.title,this.spellcheck,this.id,this["var"]);},get_Render:function(){return this.RenderWith(b9.T.Empty);},RenderWith:function(cU){return bf.div([bf.someElt(cA.InputArea(b9.append(b9.ofArray([bf._class(this._class),cD.Create("id",this.id),bf.atr("spellcheck",bg.map(function(cV){return cV?"true":"false";},this.spellcheck)),bf.atr("title",this.title),bf.atr("style","height: 100%;  width: 100%; box-sizing: border-box; "),bf._placeholder(this.placeholder)]),cU),this["var"]))]);}},null,bo);bo.New$1=function(cU){return bo.New$2(cE.Create$1(cU));};bo.New$2=function(cU){return bo.New(bg.fixit("form-control"),bg.fixit("Enter text:"),bg.fixit(""),bg.fixit(false),"",cU);};bo.New=function(cU,cV,cW,cX,cY,cZ){return new bo({_class:cU,placeholder:cV,title:cW,spellcheck:cX,id:cY,"var":cZ});};bp.New=function(cU,cV){return{line:cU,ch:cV};};bq=bk.CodeMirrorEditor=b6.Class({},i,bq);bq.New=b6.Ctor(function(){},bq);br=bk.CodeMirror=b6.Class({get_Var:function(){return this["var"];},OnRender:function(cU){return br.New(this._class,this.style,this.id,this["var"],this.onChange,{$:1,$0:cU},this.editorO);},OnChange:function(cU){return br.New(this._class,this.style,this.id,this["var"],cU,this.onRender,this.editorO);},Style:function(cU){return br.New(this._class,bg.fixit(cU),this.id,this["var"],this.onChange,this.onRender,this.editorO);},SetVar:function(cU){return br.New(this._class,this.style,this.id,cU,this.onChange,this.onRender,this.editorO);},Id:function(cU){return br.New(this._class,this.style,cU,this["var"],this.onChange,this.onRender,this.editorO);},Class:function(cU){return br.New(bg.fixit(cU),this.style,this.id,this["var"],this.onChange,this.onRender,this.editorO);},get_Render:function(){var cU;cU=this;return bf.div([bf["class"](this._class),new bj({$:7,$0:cD.Create("id",this.id)}),bf.style("position: relative; height: 300px"),bf.style(this.style),bf.div([bf.style("height: 100%; width: 100%; position: absolute;"),new bj({$:7,$0:cC.OnAfterRender(function(cV){a.CIPHERSpaceLoadFiles(bk.codeMirrorIncludes(),function(){var cW,cX,cY,cZ;cW=a.CodeMirror(cV,{theme:"rubyblue",lineNumbers:true,matchBrackets:true,gutters:["CodeMirror-lint-markers"],extraKeys:{Tab:function(c0){c0.replaceSelection("    ","end");},F11:function(c0){c0.setOption("fullScreen",!c0.getOption("fullScreen"));}}});cU.editorO={$:1,$0:cW};cX=cU.onRender;cX==null?void 0:cX.$0(cW);cY=[0];cZ=[0];cW.on("changes",function(){var c0;c0=cW.getValue();cU["var"].RVal()!==c0?(cY[0]=cY[0]+1,cU["var"].set_RVal(c0),cU.onChange()):void 0;});cz.Sink(function(){if(cY[0]>cZ[0])cZ[0]=cY[0];else if(cW.getValue()!==cU["var"].RVal()){cW.setValue(cU["var"].RVal());cW.getDoc().clearHistory();}},cU["var"].RView());});})})]),bf.link([bf.href("/EPFileX/codemirror/content/editor.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/content/codemirror.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/display/fullscreen.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/dialog/dialog.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/hint/show-hint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.link([bf.href("/EPFileX/codemirror/scripts/addon/lint/lint.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css(".CodeMirror { height: 100% }")]);}},null,br);br.New$1=function(cU){return br.New$2(cE.Create$1(cU));};br.New$2=function(cU){return br.New(bg.fixit(""),bg.fixit(""),"",cU,a.ignore,null,null);};br.New=function(cU,cV,cW,cX,cY,cZ,c0){return new br({_class:cU,style:cV,id:cW,"var":cX,onChange:cY,onRender:cZ,editorO:c0});};bs.New=function(cU,cV,cW){return{text:cU,displayText:cV,className:cW};};bt.New=function(cU,cV,cW){return{list:cU,from:cV,to:cW};};bu.New=function(cU,cV,cW){return{hint:cU,completeSingle:cV,container:cW};};bv.New=function(cU,cV,cW,cX){return{message:cU,severity:cV,from:cW,to:cX};};bw=bk.SplitterBar=b6.Class({Children:function(cU){return bw.New(this.value,this.min,this.max,this.vertical,this.node,cU,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_After:function(){return bw.New(this.value,this.min,this.max,this.vertical,this.node,this.children,true,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},get_Before:function(){return bw.New(this.value,this.min,this.max,this.vertical,this.node,this.children,false,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal:function(){return bw.New(this.value,this.min,this.max,bg.fixit(false),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical:function(){return bw.New(this.value,this.min,this.max,bg.fixit(true),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Horizontal$1:function(cU){return bw.New(this.value,this.min,this.max,bg.map(function(cV){return!cV;},bg.fixit(cU)),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Vertical$1:function(cU){return bw.New(this.value,this.min,this.max,bg.fixit(cU),this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Max:function(cU){return bw.New(this.value,this.min,bg.fixit(cU),this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Min:function(cU){return bw.New(this.value,bg.fixit(cU),this.max,this.vertical,this.node,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Node:function(cU){return bw.New(this.value,this.min,this.max,this.vertical,cU,this.children,this.after,this.dragging,this.startVer,this.startP,this.start,this.size,this.domElem);},Value:function(cU){this.value.set_RVal(cU);return this;},get_Render:function(){var cU;function cV(c0){return cU.startVer?c0.clientX:c0.clientY;}function cW(){var c0;c0=cU.domElem;return c0!=null&&c0.$==1?cU.startVer?cU.after?c0.$0.parentElement.getBoundingClientRect().width:-c0.$0.parentElement.getBoundingClientRect().width:cU.after?c0.$0.parentElement.getBoundingClientRect().height:-c0.$0.parentElement.getBoundingClientRect().height:100;}function cX(c0){cU.value.set_RVal((cV(c0)-cU.start)*100/cU.size+cU.startP);}function cY(){if(cU.dragging){cU.dragging=false;a.removeEventListener("mousemove",cX,false);a.removeEventListener("mouseup",cY,false);}}function cZ(c0,c1){return!cU.dragging?bg.iter(a.ignore,bg.map2(function(c2){return function(c3){cU.dragging=true;cU.startVer=c3;cU.startP=c2;cU.start=cV(c1);cU.size=cW();a.addEventListener("mousemove",cX,false);a.addEventListener("mouseup",cY,false);return c1.preventDefault();};},cU.get_GetValue(),cU.vertical)):null;}cU=this;return this.node.AddChildren([bf["class"](bg.map(function(c0){return c0?"Vertical":"Horizontal";},this.vertical)),new bj({$:7,$0:cC.Handler("mousedown",function(c0){return function(c1){return cZ(c0,c1);};})}),new bj({$:7,$0:cC.OnAfterRender(function(c0){cU.domElem={$:1,$0:c0};})}),bf.css("\n                    .Splitter.Vertical   { cursor: col-resize; background-color: #eef ; width : 5px ; margin-left:-7px; }\n                    .Splitter.Horizontal { cursor: row-resize; background-color: #eef ; height: 5px ; margin-top :-7px; }\n                ")]).AddChildren(this.children);},get_GetValue:function(){function cU(cW,cX){return b3.Compare(cW,cX)===-1?cW:cX;}function cV(cW,cX){return b3.Compare(cW,cX)===1?cW:cX;}return bg.map2(function(cW){return function(cX){return cU(cW,cX);};},this.max,bg.map2(function(cW){return function(cX){return cV(cW,cX);};},this.min,this.value));},get_Var:function(){return this.value;}},null,bw);bw.New$1=function(cU){return bw.New$2(cE.Create$1(cU));};bw.New$2=function(cU){return bw.New(cU,bg.fixit(5),bg.fixit(95),bg.fixit(true),bf.div([bf["class"]("Splitter")]),b9.T.Empty,true,false,true,0,0,0,null);};bw.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6){return new bw({value:cU,min:cV,max:cW,vertical:cX,node:cY,children:cZ,after:c0,dragging:c1,startVer:c2,startP:c3,start:c4,size:c5,domElem:c6});};bx.StFixedPerc={$:2};bx.StFixedPx={$:1};bx.StVariable={$:0};by=bk.Grid=b6.Class({get_Render:function(){return bf.div(this.GridTemplate());},GridTemplate:function(){var cU;cU=this;return b9.ofSeq(b2.delay(function(){function cV(cW,cX){return cW!=null&&cW.$==1?cX.AddChildren([bf.style((function(cY){return function(cZ){return cY("grid-area: "+b7.toSafe(cZ)+"; dispxlay: grid");};}(a.id))(cW.$0))]):cX;}return b2.append(b2.map(function(cW){return cV(cW[0],cW[1]);},cU.content),b2.delay(function(){function cW(cX,cY){var cZ;return cY.$==2?(cZ=cY.$0,{$:1,$0:cZ.get_Render().InsertChildren([bf.style1("grid-column",a.String(cX+(cZ.after?2:1))),bf.style1("grid-row",(function(c0){return function(c1){return c0("1 / "+a.String(c1));};}(a.id))(ce.length(cU.rows)+1))])}):cY.$==1?null:null;}return b2.append(b2.choose(function(cX){return cW(cX[0],cX[1]);},b2.indexed(cU.cols)),b2.delay(function(){function cX(cY,cZ){var c0;return cZ.$==2?(c0=cZ.$0,{$:1,$0:c0.get_Render().InsertChildren([bf.style1("grid-row",a.String(cY+(c0.after?2:1))),bf.style1("grid-column",(function(c1){return function(c2){return c1("1 / "+a.String(c2));};}(a.id))(ce.length(cU.cols)+1))])}):cZ.$==1?null:null;}return b2.append(b2.choose(function(cY){return cX(cY[0],cY[1]);},b2.indexed(cU.rows)),b2.delay(function(){return b2.append(cU.styles(),b2.delay(function(){return b2.append([bf.style((((b6.Curried3(function(cY,cZ,c0){return cY("display: grid; grid-gap: "+cZ.toFixed(6)+"px; padding: "+c0.toFixed(6)+"px; box-sizing: border-box");}))(a.id))(cU.gap))(cU.padding))],b2.delay(function(){return[new bj({$:7,$0:cC.OnAfterRender(function(cY){function cZ(c1,c2){return!b3.Equals(c1.RVal(),c2)?c1.set_RVal(c2):null;}function c0(){var c1;c1=cY.getBoundingClientRect();cZ(cU.widthHeight,[c1.width,c1.height]);}c0();bk.addResizeObserver(c0,cY);})})];}));}));}));}));}));}));},styles:function(){return b9.ofArray([bf.style1("grid-template-columns",this.style(this.cols,bg.map(function(cU){return cU[0];},this.widthHeight))),bf.style1("grid-template-rows",this.style(this.rows,bg.map(function(cU){return cU[1];},this.widthHeight)))]);},style:function(cU,cV){var cW,cX,cY,cZ;function c0(c3,c4){return function(c5){return c5.$==2?[bg.map2(function(c6){return function(c7){return c6+c7;};},c5.$0.get_GetValue(),c3),c4]:c5.$==1?c5.$0.$==1?[c3,bg.map2(function(c6){return function(c7){return c6+c7;};},c5.$0.$0,c4)]:[bg.map2(function(c6){return function(c7){return c6+c7;};},c5.$0.$0,c3),c4]:[c3,c4];};}function c1(c3){return bg.map2(function(c4){return function(c5){var c6,c7,c8;c6=(c7=c4*c5,(c8=0,b3.Compare(c8,c7)===1?c8:c7));return(function(c9){return function(c_){return c9(c_.toFixed(6)+"%");};}(a.id))(c6);};},cY,c3);}function c2(c3){return bg.map(function(c4){var c5,c6;c5=(c6=0,b3.Compare(c6,c4)===1?c6:c4);return(function(c7){return function(c8){return c7(c8.toFixed(6)+"px");};}(a.id))(c5);},c3);}cW=this;return ce.length(cU)===0?new bg({$:0,$0:"100%"}):(cX=b2.fold(function(c3,c4){return(function(c5){return c0(c5[0],c5[1]);}(c3))(c4);},[new bg({$:0,$0:0}),new bg({$:0,$0:0})],cU),(cY=bg.map2(function(c3){return function(c4){return(c4-cW.padding*2-cW.gap*(ce.length(cU)-1)-c3)/(c4-cW.padding*2);};},cX[1],cV),(cZ=bg.map(function(c3){return 100-c3;},cX[0]),bg.map(function(c3){return b4.concat(" ",c3);},b2.foldBack(function(c3,c4){function c5(c6,c7){return new b9.T({$:1,$0:c7,$1:c6});}return bg.map2(function(c6){return function(c7){return c5(c6,c7);};},c4,c3.$==2?c1(c3.$0.get_GetValue()):c3.$==1?c3.$0.$==1?c2(c3.$0.$0):c1(c3.$0.$0):c1(cZ));},cU,new bg({$:0,$0:b9.T.Empty}))))));},Children:function(cU){return this.changeSplitter(function(cV){return cV.Children(cU);});},Min:function(cU){return this.changeSplitter(function(cV){return cV.Min(cU);});},Max:function(cU){return this.changeSplitter(function(cV){return cV.Max(cU);});},get_Before:function(){return this.changeSplitter(function(cU){return cU.get_Before();});},changeSplitter:function(cU){var cV,cW,cX,cY,cZ,c0;cV=this;cW=this.lastSplitter;cW==null?void 0:(cX=cW.$0,cY=cX[0],cX[1]?(cZ=ce.get(cV.cols,cY),cZ.$==2?ce.set(cV.cols,cY,{$:2,$0:cU(cZ.$0)}):void 0):(c0=ce.get(cV.rows,cY),c0.$==2?ce.set(cV.rows,cY,{$:2,$0:cU(c0.$0)}):void 0));return this;},Gap:function(cU){return by.New(this.padding,cU,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Padding:function(cU){return by.New(cU,this.gap,this.content,this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content:function(cU){return by.New(this.padding,this.gap,this.content.concat([[null,cU]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},Content$1:function(cU,cV){return by.New(this.padding,this.gap,this.content.concat([[{$:1,$0:cU},cV]]),this.cols,this.rows,this.widthHeight,this.lastSplitter);},RowAuto:function(cU){return by.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:0,$0:bw.New$1(cU).Horizontal()}]),this.widthHeight,this.lastSplitter);},RowVariable:function(cU){return this.NewSplitter$1(cU,false);},RowVariable$1:function(cU){return this.NewSplitter(cU,false);},RowVariable$2:function(cU){return by.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cU}]),this.widthHeight,this.lastSplitter);},RowFixed:function(cU){return by.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:0,$0:bg.fixit(cU)}}]),this.widthHeight,this.lastSplitter);},RowFixedPx:function(cU){return by.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:1,$0:{$:1,$0:bg.fixit(cU)}}]),this.widthHeight,this.lastSplitter);},ColAuto:function(cU){return by.New(this.padding,this.gap,this.content,this.cols.concat([{$:0,$0:bw.New$1(cU)}]),this.rows,this.widthHeight,this.lastSplitter);},ColVariable:function(cU){return this.NewSplitter$1(cU,true);},ColVariable$1:function(cU){return this.NewSplitter(cU,true);},ColVariable$2:function(cU){return by.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cU}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixed:function(cU){return by.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:0,$0:bg.fixit(cU)}}]),this.rows,this.widthHeight,this.lastSplitter);},ColFixedPx:function(cU){return by.New(this.padding,this.gap,this.content,this.cols.concat([{$:1,$0:{$:1,$0:bg.fixit(cU)}}]),this.rows,this.widthHeight,this.lastSplitter);},NewSplitter:function(cU,cV){return this.NewSplitter$1(cE.Create$1(cU),cV);},NewSplitter$1:function(cU,cV){var cW,cX,cY;cW=bw.New$2(cU);return cV?(cX={$:1,$0:[ce.length(this.cols),cV]},by.New(this.padding,this.gap,this.content,this.cols.concat([{$:2,$0:cW}]),this.rows,this.widthHeight,cX)):(cY={$:1,$0:[ce.length(this.rows),cV]},by.New(this.padding,this.gap,this.content,this.cols,this.rows.concat([{$:2,$0:cW.Horizontal()}]),this.widthHeight,cY));}},null,by);by.NewBisect=function(cU,cV,cW,cX,cY,cZ){var c0,c1,c2;c0=cW?[cV.$==1?function(c3){return c3.ColFixedPx(cX);}:cV.$==2?function(c3){return c3.ColFixed(cX);}:function(c3){return c3.ColVariable(cX);},function(c3){return c3.ColAuto(50);},function(c3){return c3.Content(bf.style("grid-template-areas: 'one   two' "));}]:[cV.$==1?function(c3){return c3.RowFixedPx(cX);}:cV.$==2?function(c3){return c3.RowFixed(cX);}:function(c3){return c3.RowVariable(cX);},function(c3){return c3.RowAuto(50);},function(c3){return c3.Content(bf.style("grid-template-areas: 'one' 'two' "));}];c1=c0[0];c2=c0[1];return(cU?function(c3){return c2(c1(c3));}:function(c3){return c1(c2(c3));})(c0[2](by.get_New().Content$1("one",cY).Content$1("two",cZ).Padding(0)));};by.get_New=function(){return by.New(9,9,[],[],[],cE.Create$1([1000,100]),null);};by.New=function(cU,cV,cW,cX,cY,cZ,c0){return new by({padding:cU,gap:cV,content:cW,cols:cX,rows:cY,widthHeight:cZ,lastSplitter:c0});};bz=bk.TabStrip=b6.Class({get_Render:function(){var cU,cV,cW,cX;cU=this;cV=bf.bindHElem(function(cY){return bf.div(b9.ofSeq(b2.delay(function(){return b2.append([bf["class"]((((b6.Curried3(function(cZ,c0,c1){return cZ("tab-strip "+b7.toSafe(c0)+" "+b7.toSafe(c1));}))(a.id))(cU.top?"top":"bottom"))(cU.horizontal?"horizontal":"vertical"))],b2.delay(function(){return b2.collect(function(cZ){var c0;c0=cZ[0];return[bn.get_New().Content(bf.div([bf.htmlText(cZ[1][1][0]),bf["class"](bg.map(function(c1){return"tab"+(c1===c0?" selected":"");},cU.selected)),bf.draggable("true"),new bj({$:7,$0:cC.Handler("dragover",function(){return function(c1){return c1.preventDefault();};})}),new bj({$:7,$0:cC.Handler("drag",function(){return function(){(bk.draggedTab())[0]={$:1,$0:[cU,c0]};};})}),new bj({$:7,$0:cC.Handler("drop",function(){return function(c1){c1.preventDefault();c1.stopPropagation();return cU.reorder(c0);};})}),new bj({$:7,$0:cC.Handler("click",function(){return function(){return cU.selected.set_RVal(c0);};})})]))];},b2.indexed(cY));}));})));},this.tabs);bg.sink((cW=this.id,function(cY){bk.setSelectedPanel(cW,cY);}),this.get_Selected());cX=bf.bindHElem(function(cY){return bf.div(b9.ofSeq(b2.delay(function(){return b2.append([bf["class"]("tab-children")],b2.delay(function(){return b2.append([bf.Id(bk.uid2s(cU.id))],b2.delay(function(){function cZ(c0,c1){return c1[1].AddChildren([bf.style(bg.map(function(c2){return b2.contains(c0,b2.map(function(c3){return c3[1];},cs.ToSeq(c2)))?"":"display : none";},bk.selectedPanels())),bf.Id(bk.uid2s(c0))]);}return b2.map(function(c0){return cZ(c0[0],c0[1]);},cY);}));}));})));},this.tabs);return bf.div([bf["class"]("tab-panel"),this.top?cV:bj.HtmlEmpty,bf.div([cX,bf["class"]("tab-content")]),!this.top?cV:bj.HtmlEmpty,new bj({$:7,$0:cC.Handler("dragover",function(){return function(cY){return cY.preventDefault();};})}),new bj({$:7,$0:cC.Handler("drop",function(){return function(cY){cY.preventDefault();return cU.reorder(ce.length(cU.tabs.RVal()));};})}),bf.css("\n    \n    .tab-panel {\n     overflow  : hidden   ;\n     display   : flex     ;\n     flex-flow : column   ;\n     background: lightgray;\n    }\n    .tab-content {\n     flex      : 1 1     ;\n     overflow  : auto    ;\n     position  : relative;\n    }\n    .tab-children {\n     height    : 100%    ;\n     width     : 100%    ;\n     position  : absolute;\n     display   : grid    ;\n    }\n    .tab-strip {\n     padding   : 0pt     ;\n     flex      : 0 0     ;\n    }\n    .tab {\n     border     : 0.2pt solid transparent;\n     padding    : 0pt 4pt;\n     display    : inline-block;\n     font-family: sans-serif;\n     font-weight: 200;\n     font-size  : small;\n     color      : #666;\n     cursor     : pointer;\n    }\n    .top>.tab {\n     border-radius: 2pt 2pt 0pt 0pt;\n     border-bottom-width: 0pt;\n     vertical-align: bottom;\n    }\n    .bottom>.tab {\n     border-top-width: 0pt;\n     border-radius: 0pt 0pt 2pt 2pt;\n     vertical-align: top;\n    }\n    .horizontal>.tab:not(:first-child) {\n     border-left-width: 0pt;\n    }\n    .tab.hovering {\n     background: red;\n    }\n    .tab.selected {\n     background: white;\n     border-left-width: 0.2pt;\n     color: black;\n     font-weight: 500;\n     border-color: black;\n    }\n    .horizontal>.tab.selected {\n     border-left-width: 0.2pt;\n    }\n    ")]);},Select:function(cU){var cV,cW;function cX(cY,cZ){return b3.Equals(cZ[0],cU)?(cV.selected.set_RVal(cY),{$:1,$0:true}):null;}cV=this;cW=b2.tryPick(function(cY){return cX(cY[0],cY[1]);},b2.indexed(this.tabs.RVal()));return cW==null?false:cW.$0;},Select$1:function(cU){var cV,cW;function cX(cY,cZ){return cZ[1][0]===cU?(cV.selected.set_RVal(cY),{$:1,$0:true}):null;}cV=this;cW=b2.tryPick(function(cY){return cX(cY[0],cY[1]);},b2.indexed(this.tabs.RVal()));return cW==null?false:cW.$0;},Select$2:function(cU){this.selected.set_RVal(cU);},get_Selected:function(){return bg.map2(function(cU){return function(cV){var cW;cW=b2.tryItem(cV,cU);return cW==null?null:{$:1,$0:cW.$0[0]};};},this.tabs,this.selected);},get_Vertical:function(){return bz.New(this.selected,this.tabs,this.top,false,this.id);},get_Horizontal:function(){return bz.New(this.selected,this.tabs,this.top,true,this.id);},SetTop:function(cU){return bz.New(this.selected,this.tabs,cU,this.horizontal,this.id);},get_Bottom:function(){return bz.New(this.selected,this.tabs,false,this.horizontal,this.id);},get_Top:function(){return bz.New(this.selected,this.tabs,true,this.horizontal,this.id);},reorder:function(cU){var cV,cW,cX;cX=(bk.draggedTab())[0];if(cX!=null&&cX.$==1){if(!b3.Equals(cX.$0[0].id,this.id))this.moveTab(cX.$0[0],cX.$0[1],cU);else if(cX!=null&&cX.$==1){cV=cX.$0[1];this.tabs.set_RVal(bk.reorderArray(this.tabs.RVal(),cV,cU));cW=this.selected.RVal();this.selected.set_RVal(cW===cV?cU:cW<cV&&cW<cU||cW>cV&&cW>cU?cW:cW<cV?cW+1:cW-1);}else throw new cJ.New("Compiled\\FSharpStation2\\FSharpStation.fs",3977,18);}else void 0;},moveTab:function(cU,cV,cW){var cX,cY,cZ,c0;cX=this.tabs.RVal();cY=cU.tabs.RVal();cZ=ce.collect(a.id,[cu.array(cX,{$:1,$0:0},{$:1,$0:cW-1}),[ce.get(cY,cV)],cu.array(cX,{$:1,$0:cW},{$:1,$0:ce.length(cX)-1})]);c0=ce.collect(a.id,[cu.array(cY,{$:1,$0:0},{$:1,$0:cV-1}),cu.array(cY,{$:1,$0:cV+1},{$:1,$0:ce.length(cY)-1})]);cU.tabs.set_RVal(c0);this.tabs.set_RVal(cZ);this.selected.set_RVal(cW);cU.selected.RVal()>=ce.length(c0)?cU.selected.set_RVal(0):void 0;bk.RaiseTabMoved(cU,this);}},null,bz);bz.New$1=function(cU){return bz.New$2(cE.Create$1(ce.ofSeq(b2.map(function(cV){return[cg.NewGuid(),cV];},cU))));};bz.New$2=function(cU){return bz.New(cE.Create$1(0),cU,false,true,cg.NewGuid());};bz.New=function(cU,cV,cW,cX,cY){return new bz({selected:cU,tabs:cV,top:cW,horizontal:cX,id:cY});};bA=bk.MenuEntry=b6.Class({get_MenuNode:function(){return new bB({$:1,$0:this});},SubMenu:function(cU){return bA.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bC.New2(cU).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},SubMenu$1:function(cU){return bA.New(this.text,this.ref,this.active,this.disabled,{$:1,$0:bC.New$1(cU).get_DropDown()},this.toolTip,this.target,this.divider,this.onClick);},Disabled:function(cU){return bA.New(this.text,this.ref,this.active,bg.fixit(cU),this.subMenu,this.toolTip,this.target,this.divider,this.onClick);},OnClick:function(cU){return bA.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,this.divider,{$:1,$0:cU});},get_Divider:function(){return bA.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,this.target,true,this.onClick);},Target:function(cU){return bA.New(this.text,this.ref,this.active,this.disabled,this.subMenu,this.toolTip,{$:1,$0:cU},this.divider,this.onClick);},get_Render:function(){var cU,cV,cW,cX,cY,cZ,c0,c1,c2;return(this.divider?function(c3){return bf.addClass("divider",c3);}:a.id)((cU=(cV=(cW=(cX=bk.entryTxt(this.text,(cY=this.target,cY==null?"":cY.$0),this.ref),(bf.addClassIf("active",this.active))(cX)),(bf.addClassIf("disabled",this.disabled))(cW)),(cZ=this.subMenu,(cZ!=null&&cZ.$==1?(c0=b9.ofArray([bf["class"]("dropdown"),cZ.$0.get_Render()]),function(c3){return bf.addChildren(c0,c3);}):a.id)(cV))),(c1=this.onClick,(c1!=null&&c1.$==1?(c2=b9.ofArray([new bj({$:7,$0:cD.Handler("click",c1.$0)}),bf.style("cursor : pointer")]),function(c3){return bf.addChildren(c2,c3);}):a.id)(cU))));}},null,bA);bA.New$1=function(cU,cV){var cW;cW=bA.New$2(cU);return bA.New(cW.text,bg.map(function(cX){return{$:1,$0:cX};},cV),cW.active,cW.disabled,cW.subMenu,cW.toolTip,cW.target,cW.divider,cW.onClick);};bA.New$2=function(cU){var cV,cW;cV=bg.fixit(cU);cW=bg.fixit(false);return bA.New(cV,new bg({$:0,$0:null}),cW,bg.fixit(false),null,null,null,false,null);};bA.New=function(cU,cV,cW,cX,cY,cZ,c0,c1,c2){return new bA({text:cU,ref:cV,active:cW,disabled:cX,subMenu:cY,toolTip:cZ,target:c0,divider:c1,onClick:c2});};bB=bk.MenuNode=b6.Class({get_Render:function(){return this.$==1?this.$0.get_Render():this.$0;}},null,bB);bC=bk.Menu=b6.Class({get_Render:function(){var cU;cU=this;return(this.dropdown?bk.dropdown:bk.nav)(b9.ofSeq(b2.delay(function(){return b2.map(function(cV){return cV.get_Render();},cU.entries);})));},get_DropDown:function(){return bC.New(this.entries,true);}},null,bC);bC.New2=function(cU){return bC.New$1(b2.map(function(cV){return new bB({$:1,$0:cV});},cU));};bC.New$1=function(cU){return bC.New(cU,false);};bC.New=function(cU,cV){return new bC({entries:cU,dropdown:cV});};bD=bk.Action=b6.Class({get_Button:function(){var cU,cV,cW;function cX(cY,cZ){return null;}cU=(cV=(cW=this.onClick,cW==null?null:{$:1,$0:cW.$0(this)}),cV==null?function(cY){return function(cZ){return cX(cY,cZ);};}:cV.$0);return bl.New(bg.map(function(cY){return cY?"btn btn-primary":"btn";},this.highlight),bg.fixit("button"),bg.fixit(""),this.text,cU,this.disabled,"");},get_MenuEntry:function(){var cU,cV;cU=(cV=this.onClick,cV==null?null:{$:1,$0:cV.$0(this)});return bA.New(this.text,new bg({$:0,$0:null}),this.highlight,this.disabled,null,this.toolTip,null,false,cU);},Highlight:function(cU){return bD.New(this.text,bg.fixit(cU),this.disabled,this.toolTip,this.onClick,this.parms);},Disabled:function(cU){return bD.New(this.text,this.highlight,bg.fixit(cU),this.toolTip,this.onClick,this.parms);},OnClick2:function(cU){return bD.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:cU},this.parms);},OnClick:function(cU){return bD.New(this.text,this.highlight,this.disabled,this.toolTip,{$:1,$0:function(){return cU;}},this.parms);},Parms:function(cU){return bD.New(this.text,this.highlight,this.disabled,this.toolTip,this.onClick,{$:1,$0:cU});},Text:function(cU){return bD.New(bg.fixit(cU),this.highlight,bg.fixit(false),this.toolTip,this.onClick,this.parms);}},null,bD);bD.New$1=function(cU){return bD.New(bg.fixit(cU),bg.fixit(false),bg.fixit(false),null,null,null);};bD.New=function(cU,cV,cW,cX,cY,cZ){return new bD({text:cU,highlight:cV,disabled:cW,toolTip:cX,onClick:cY,parms:cZ});};bE=bk.GuiPart=b6.Class({GetHtmlNode:function(cU,cV){var cW,cX,cY,cZ,c0,c1;return this.$==1?[this.$0,a.ignore]:this.$==2?[this.$0.get_Button().get_Render(),a.ignore]:this.$==5?[cU.GetCallButton(this.$0,this.$1,this.$2),a.ignore]:this.$==4?(cW=bz.New$1(b2.map(function(c2){return[c2,cU.GetNode(c2)];},this.$1)).SetTop(this.$0),(bk.addValue(cV,cW,cU.tabStrips),[cW.get_Render(),a.ignore])):this.$==3?(cX=this.$3,(cY=cE.Create$1(this.$6),(cZ=cE.Create$1(this.$7),(c0=cE.Create$1(cX),(c1=cX,[by.NewBisect(this.$0,this.$1,this.$2,c0,cU.GetNode(this.$4),cU.GetNode(this.$5)).Min(cY).Max(cZ).get_Render(),function(c2){var c3;if(c2.$==3){c3=c2.$3;c1!==c3?(c1=c3,cE.Set(c0,c3)):void 0;cE.Set(cY,c2.$6);cE.Set(cZ,c2.$7);}}]))))):[bj.HtmlEmpty,a.ignore];}},null,bE);bF.New=function(cU,cV,cW,cX,cY,cZ,c0){return{HtmlElementF:cU,HtmlAttributeF:cV,HtmlAttributeOF:cW,HtmlTextF:cX,HtmlEmptyF:cY,HtmlGuiPart:cZ,HtmlGuiCall:c0};};bG.New=function(cU,cV,cW,cX,cY){return{GuiRoot:cU,GuiTabStrip:cV,GuiSplit:cW,GuiNode:cX,GuiCall:cY};};bH.get_New=function(){return{$:0,$0:cg.NewGuid()};};bI=bk.Layout=b6.Class({SelectTab:function(cU){b2.iter(function(cV){cV.Select$1(cU);},this.tabStrips.get_Values());},SetLayoutJson:function(cU,cV){var cW,cZ;function cX(c1){var c2,c3,c4,c5,c6,c7,c8;c2=bk.PHtmlElementF(c1);return c2!=null&&c2.$==1?{$:1,$0:new bj({$:0,$0:c2.$0[0],$1:b2.choose(cX,c2.$0[1])})}:(c3=bk.PHtmlAttributeF(c1),c3!=null&&c3.$==1?{$:1,$0:new bj({$:1,$0:c3.$0[0],$1:new bg({$:0,$0:c3.$0[1]})})}:(c4=bk.PHtmlAttributeOF(c1),c4!=null&&c4.$==1?{$:1,$0:new bj({$:2,$0:c4.$0[0],$1:new bg({$:0,$0:c4.$0[1]})})}:(c5=bk.PHtmlTextF(c1),c5!=null&&c5.$==1?{$:1,$0:new bj({$:3,$0:new bg({$:0,$0:c5.$0})})}:(c6=bk.PHtmlEmptyF(c1),c6!=null&&c6.$==1)?{$:1,$0:bj.HtmlEmpty}:(c7=bk.PHtmlGuiPart(c1),c7!=null&&c7.$==1?{$:1,$0:cZ.GetNode(c7.$0)}:(c8=bk.PHtmlGuiCall(c1),c8!=null&&c8.$==1?{$:1,$0:cZ.GetCallButton(c8.$0[0],c8.$0[1],c8.$0[2])}:null)))));}function cY(c1){var c2,c3,c4,c5,c6,c7;c2=bk.PGuiNode(c1);return c2!=null&&c2.$==1?{$:1,$0:new bE({$:1,$0:g.defaultValue(bj.HtmlEmpty,cX(c2.$0))})}:(c3=bk.PGuiRoot(c1),c3!=null&&c3.$==1?{$:1,$0:new bE({$:0,$0:c3.$0})}:(c4=bk.PGuiTabStrip(c1),c4!=null&&c4.$==1?{$:1,$0:(c5=c4.$0,new bE({$:4,$0:c5[0],$1:c5[1]}))}:(c6=bk.PGuiSplit(c1),c6!=null&&c6.$==1?{$:1,$0:new bE({$:3,$0:c6.$0[0],$1:bk.toSect(c6.$0[1]),$2:c6.$0[2],$3:c6.$0[3],$4:c6.$0[4],$5:c6.$0[5],$6:c6.$0[6],$7:c6.$0[7]})}:(c7=bk.PGuiCall(c1),c7!=null&&c7.$==1?{$:1,$0:new bE({$:5,$0:c7.$0[0],$1:c7.$0[1],$2:c7.$0[2]})}:null))));}cZ=this;function c0(c1,c2){var c3;c3=cY(c2);return c3==null?null:{$:1,$0:[c1,{$:1,$0:c2},c3.$0]};}try{cW=this.AddNewSteps(cU,cV===""?[]:ce.choose(function(c1){return c0(c1[0],c1[1]);},((cl.DecodeArray(cl.DecodeTuple([cl.Id(),bX.j$12])))())(ci.parse(cV))));}catch(c1){cW=(function(c2){return function(c3){return c2("Error: "+b7.prettyPrint(c3));};}(function(c2){b_.log(c2);}))(c1);}},AddNewSteps:function(cU,cV){var cW;function cX(cZ,c0,c1){var c2,c3;if(cW.parts.ContainsKey(cZ)){c2=cW.parts.get_Item(cZ);c3=c2[0];b3.Equals((c3.RVal())[0],c0)?bg.iter(a.ignore,bg.apply(new bg({$:0,$0:c1}),c2[2])):c3.set_RVal([c0,c1]);}else cW.AddNode(cZ,c0,c1);}function cY(cZ,c0){return b2.last(c0);}cW=this;ce.iter(function(cZ){return cX(cZ[0],cZ[1],cZ[2]);},ce.map(function(cZ){return cY(cZ[0],cZ[1]);},ce.groupBy(function(cZ){return a.id(cZ[0],cZ[1],cZ[2]);},cU.concat(cV))));},get_Render:function(){function cU(cV){var cW;cW=cV.RVal();return cW[1].$==0?{$:1,$0:cW[1].$0}:null;}return this.GetNode(g.defaultValue("main",b2.tryPick(function(cV){return cU(bk.t1of3.apply(null,cV));},this.parts.get_Values())));},GetNode:function(cU){var cV;cV=null;return this.parts.TryGetValue(cU,{get:function(){return cV;},set:function(cW){cV=cW;}})?bk.t2of3(cV[0],cV[1],cV[2]):this.AddNode(cU,bH.get_New(),new bE({$:1,$0:bf.div([bf.htmlText((function(cW){return function(cX){return cW("GuiPart "+b7.toSafe(cX)+" not found");};}(a.id))(cU))])}));},AddNode:function(cU,cV,cW){var cX,cY,cZ,c0;function c1(c2,c3){return c3.GetHtmlNode(cX,cU);}cX=this;cY=cE.Create$1([cV,cW]);cZ=bg.map(function(c2){return c1(c2[0],c2[1]);},cY);c0=new bj({$:5,$0:bg.map(function(c2){return c2[0];},cZ)});this.parts.Add(cU,[cY,c0,bg.map(function(c2){return c2[1];},cZ)]);return c0;},GetCallButton:function(cU,cV,cW){var cX;cX=m.Success(this.GetGuiCallAction(cU,cV,cW));return cX.$==1?bf.div([bf.htmlText(b4.concat(". ",m.msgs2String(cX.$0)))]):cX.$0[0].get_Button().get_Render();},GetGuiCallAction:function(cU,cV,cW){var cX;return this.parts.ContainsKey(cV)?(cX=(this.parts.get_Item(cV))[0].RVal(),cX[1].$==2?m.succeed(cX[1].$0.Text(cU).Parms(ce.map(a.id,cW))):m.failSimpleError((function(cY){return function(cZ){return cY("GuiPart "+b7.toSafe(cZ)+" is not a GuiAction");};}(a.id))(cV))):m.failSimpleError((function(cY){return function(cZ){return cY("GuiAction "+b7.toSafe(cZ)+" not found");};}(a.id))(cV));}},null,bI);bI.New$1=function(cU){var cV;function cW(cX,cY,cZ){cV.AddNode(cX,cY,cZ);}cV=bI.New(new cc.New$5(),new cc.New$5());b2.iter(function(cX){return cW(cX[0],cX[1],cX[2]);},cU);return cV;};bI.AddGuids=function(cU){function cV(cW,cX){return[cW,cX.$==2?bH.get_New():cX.$==0?{$:2,$0:cX.$0}:cX.$==3?{$:4,$0:cX.$0,$1:cX.$1,$2:cX.$2,$3:cX.$4,$4:cX.$5}:cX.$==4?{$:3,$0:cX.$0,$1:cX.$1}:cX.$==5?{$:5,$0:cX.$0,$1:cX.$1,$2:cX.$2}:bH.get_New(),cX];}return ce.ofSeq(b2.map(function(cW){return cV(cW[0],cW[1]);},cU));};bI.New=function(cU,cV){return new bI({parts:cU,tabStrips:cV});};bk.varVerSplitter=function(cU,cV,cW,cX,cY){return new bE({$:3,$0:true,$1:bx.StVariable,$2:true,$3:cU,$4:cV,$5:cW,$6:cX,$7:cY});};bk.varHorSplitter=function(cU,cV,cW,cX,cY){return new bE({$:3,$0:true,$1:bx.StVariable,$2:false,$3:cU,$4:cV,$5:cW,$6:cX,$7:cY});};bk.fixedVerSplitter=function(cU,cV,cW,cX){return new bE({$:3,$0:cU,$1:bx.StFixedPx,$2:true,$3:cV,$4:cW,$5:cX,$6:5,$7:95});};bk.fixedHorSplitter=function(cU,cV,cW,cX){return new bE({$:3,$0:cU,$1:bx.StFixedPx,$2:false,$3:cV,$4:cW,$5:cX,$6:5,$7:95});};bk.t3of3=function(cU,cV,cW){return cW;};bk.t2of3=function(cU,cV,cW){return cV;};bk.t1of3=a.id;bk.toSect=function(cU){return cU==="StVariable"?bx.StVariable:cU==="StFixedPx"?bx.StFixedPx:bx.StFixedPerc;};bk.PGuiCall=function(cU){return cU.GuiCall;};bk.PGuiNode=function(cU){return cU.GuiNode;};bk.PGuiRoot=function(cU){return cU.GuiRoot;};bk.PGuiSplit=function(cU){return cU.GuiSplit;};bk.PGuiTabStrip=function(cU){return cU.GuiTabStrip;};bk.PHtmlGuiCall=function(cU){return cU.HtmlGuiCall;};bk.PHtmlGuiPart=function(cU){return cU.HtmlGuiPart;};bk.PHtmlEmptyF=function(cU){return cU.HtmlEmptyF;};bk.PHtmlTextF=function(cU){return cU.HtmlTextF;};bk.PHtmlAttributeOF=function(cU){return cU.HtmlAttributeOF;};bk.PHtmlAttributeF=function(cU){return cU.HtmlAttributeF;};bk.PHtmlElementF=function(cU){return cU.HtmlElementF;};bk.addValue=function(cU,cV,cW){cW.Remove(cU);cW.Add(cU,cV);};bk.processLayoutSteps=function(cU,cV){var cW,cX;return g.defaultValue(cV,(cW=b2.tryHead(cU),cW==null?null:{$:1,$0:(cX=cW.$0,bk.processLayoutSteps(b2.skip(1,cU),cV.Add(cX[0],cX[1])))}));};bk.HtmlGuiCall=function(cU,cV,cW){return new bE({$:5,$0:cU,$1:cV,$2:cW});};bk.Do2=function(cU,cV,cW,cX,cY){return cU(cW,cV);};bk.Do=function(cU,cV,cW,cX){return cU(cV);};bk.navbar=function(cU,cV,cW){return bf.div([bf["class"]("navbar navbar-default"),bf.div([bf["class"]("container-fluid"),bf.div([bf["class"]("navbar-header"),bf.div([bf["class"]("navbar-brand"),cU])]),bf.div([bf["class"]("navbar-collapse collapse"),cV,bf.addClass("navbar-right",cW)])])]);};bk.dropdown=function(cU){return bk.entries(cU,"dropdown-menu");};bk.nav=function(cU){return bk.entries(cU,"nav navbar-nav");};bk.entries=function(cU,cV){return bf.addClass(cV,bf.ul(cU));};bk.entryTxt=function(cU,cV,cW){return bk.menuEntry(bk.refText(cU,cV,cW));};bk.refText=function(cU,cV,cW){return bf.bindHElem(function(cX){return cX===""?bj.HtmlEmpty:bk.refA(bf.htmlText(cX),cX,cW);},cU);};bk.refA=function(cU,cV,cW){return bf.a([cU,bf.hrefO(cW),bf.target(cV)]);};bk.menuEntry=function(cU){return bf.li([cU]);};bk.RaiseTabMoved=function(cU,cV){var cW;cW=bk.TabMoved();cW==null?void 0:cW.$0([cU,cV]);};bk.TabMoved=function(){bW.$cctor();return bW.TabMoved;};bk.set_TabMoved=function(cU){bW.$cctor();bW.TabMoved=cU;};bk.setSelectedPanel=function(cU,cV){cE.Set(bk.selectedPanels(),cV==null?bk.selectedPanels().c.Remove(cU):bk.selectedPanels().c.Add(cU,cV.$0));};bk.selectedPanels=function(){bW.$cctor();return bW.selectedPanels;};bk.uid2s=function(cU){return"X"+b4.Replace(a.String(cU),"-","");};bk.draggedTab=function(){bW.$cctor();return bW.draggedTab;};bk.reorderArray=function(cU,cV,cW){return ce.collect(a.id,cW<cV?[cu.array(cU,{$:1,$0:0},{$:1,$0:cW-1}),[ce.get(cU,cV)],cu.array(cU,{$:1,$0:cW},{$:1,$0:cV-1}),cu.array(cU,{$:1,$0:cV+1},{$:1,$0:ce.length(cU)-1})]:[cu.array(cU,{$:1,$0:0},{$:1,$0:cV-1}),cu.array(cU,{$:1,$0:cV+1},{$:1,$0:cW}),[ce.get(cU,cV)],cu.array(cU,{$:1,$0:cW+1},{$:1,$0:ce.length(cU)-1})]);};bk.reorderList=function(cU,cV,cW){return cW<cV?b9.append(cU.GetSlice({$:1,$0:0},{$:1,$0:cW-1}),b9.append(b9.ofArray([cU.get_Item(cV)]),b9.append(cU.GetSlice({$:1,$0:cW},{$:1,$0:cV-1}),cU.GetSlice({$:1,$0:cV+1},{$:1,$0:cU.get_Length()-1})))):b9.append(cU.GetSlice({$:1,$0:0},{$:1,$0:cV-1}),b9.append(cU.GetSlice({$:1,$0:cV+1},{$:1,$0:cW}),b9.append(b9.ofArray([cU.get_Item(cV)]),cU.GetSlice({$:1,$0:cW+1},{$:1,$0:cU.get_Length()-1}))));};bk.addResizeObserver=function(cU,cV){var cW,cX,cY,cZ;try{cW=!(!a.ResizeObserver);}catch(c0){cW=false;}if(cW){cX=new a.ResizeObserver(cU);bk.set_observers(new b9.T({$:1,$0:cX,$1:bk.observers()}));cX.observe(cV);}else{cY=bk.dimsChanged(cV);b1.Start((cZ=null,b1.Delay(function(){return b1.While(function(){return cV.isConnected;},b1.Delay(function(){return b1.Bind(b1.Sleep(110),function(){return cY()?(cU(),b1.Zero()):b1.Zero();});}));})),null);}};bk.dimsChanged=function(cU){var cV;cV=cU.getBoundingClientRect();return function(){var cW;cW=cU.getBoundingClientRect();return b3.Equals(bk.domRect2Tuple(cV),bk.domRect2Tuple(cW))?false:(cV=cW,true);};};bk.domRect2Tuple=function(cU){return[cU.top,cU.left,cU.width,cU.height];};bk.observers=function(){bW.$cctor();return bW.observers;};bk.set_observers=function(cU){bW.$cctor();bW.observers=cU;};bk.setLint=function(cU,cV){cU.setOption("lint",{async:1,getAnnotations:b6.CreateFuncWithArgs(cV),container:bf.findRootElement(cU.getWrapperElement())});};bk.showHints=function(cU,cV,cW,cX){var cY;cY=bu.New(b6.CreateFuncWithArgs(cV),cW,bf.findRootElement(cU.getWrapperElement()));cY.hint.async=1;cU.showHint(cY);};bk.cmPos=function(cU,cV){return bp.New(cU,cV);};bk.codeMirrorIncludes=function(){bW.$cctor();return bW.codeMirrorIncludes;};bk.hoverable=function(cU){return bn.get_New().Content(cU);};bK=bJ.RunNode=b6.Class({createBaseNode:function(){var cU;cU=a.document.createElement("div");cU.setAttribute("id",this.nodeName);a.document.body.appendChild(cU);return cU;},createNode:function(){var cU;cU=a.document.createElement("div");cU.style="height: 100%; width: 100%;";return cU;},RunHtml:function(cU){this.RunDoc((bf.renderDoc())(cU));},RunDoc:function(cU){cA.Run(this.get_RunNode(),cU);},get_AddBootstrap:function(){var cU;cU=a.document.createElement("div");cU.innerHTML="<script src='http://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript' charset='UTF-8'></script>\n                <script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js' type='text/javascript' charset='UTF-8'></script>\n                <link type='text/css' rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>\n                <link type='text/css' rel='stylesheet' href='/EPFileX/css/main.css'>\n               ";this.runNode.parentElement.appendChild(cU);return this;},get_RunNode:function(){return this.runNode;}},i,bK);bK.New=b6.Ctor(function(cU,cV){bK.New$1.call(this,"TestNode",cU,cV);},bK);bK.New$1=b6.Ctor(function(cU,cV,cW){var cX,cY,cZ,c0,c1;this.nodeName=cU;cX=(cY=a.document.getElementById(this.nodeName),b3.Equals(cY,null)?this.createBaseNode():cY);this.runNode=!(cW==null||cW.$0)?cX:(cZ=cX.shadowRoot,b3.Equals(cZ,null)?(c0=this.createNode(),(cX.attachShadow({mode:"open"}).appendChild(c0),c1=this.createNode(),c0.appendChild(c1),c1)):cZ.firstChild);cV==null||cV.$0?this.runNode.innerHTML="":void 0;},bK);bJ.completeJS=function(cU){return"\n          CIPHERSpaceLoadFileGlobalFileRef = null;\n          CIPHERSpaceLoadFile = function (filename, callback) {\n              if (filename.slice(-3) == \".js\" || filename.slice(-4) == \".fsx\" || filename.slice(-3) == \".fs\") { //if filename is a external JavaScript file\n                  var fileRef = null;\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement('script')\n                      fileRef.setAttribute(\"type\", \"text/javascript\")\n                      fileRef.setAttribute(\"src\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-4) == \".css\") { //if filename is an external CSS file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"stylesheet\")\n                      fileRef.setAttribute(\"type\", \"text/css\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              else if (filename.slice(-5) == \".html\") { //if filename is an external HTML file\n                  var pre = document.querySelector('script[src=\"' + filename + '\"]')\n                  if (!pre) {\n                      fileRef = document.createElement(\"link\")\n                      fileRef.setAttribute(\"rel\", \"import\")\n                      fileRef.setAttribute(\"type\", \"text/html\")\n                      fileRef.setAttribute(\"href\", filename)\n                  }\n                  else callback();\n              }\n              if (!!fileRef) {\n                  CIPHERSpaceLoadFileGlobalFileRef = fileRef;\n      \u0009\u0009\u0009fileRef.onload = function () { fileRef.onload = null;  callback(); }\n                  document.getElementsByTagName(\"head\")[0].appendChild(fileRef);\n              }\n          }\n          CIPHERSpaceLoadFiles = function (files, callback) {\n              var newCallback = callback\n              if (!!CIPHERSpaceLoadFileGlobalFileRef && !!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n                  var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n                  CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n                  newCallback = function () {\n                      callback();\n                      oldCallback();\n                  }\n              }\n              var i = 0;\n              loadNext = function () {\n                  if (i < files.length) {\n                      var file = files[i];\n                      i++;\n                      CIPHERSpaceLoadFile(file, loadNext);\n                  }\n                  else newCallback();\n              };\n              loadNext();\n      \u0009}\n          CIPHERSpaceLoadFiles(['https://code.jquery.com/jquery-3.1.1.min.js'], function() {}); \n      \u0009CIPHERSpaceLoadFilesDoAfter = function (callback) {\n      \u0009\u0009var newCallback = callback\n      \u0009\u0009if (!!CIPHERSpaceLoadFileGlobalFileRef) {\n      \u0009\u0009\u0009if (!!(CIPHERSpaceLoadFileGlobalFileRef.onload)) {\n      \u0009\u0009\u0009\u0009var oldCallback = CIPHERSpaceLoadFileGlobalFileRef.onload;\n      \u0009\u0009\u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = null;\n      \u0009\u0009\u0009\u0009newCallback = function () {\n      \u0009\u0009\u0009\u0009\u0009oldCallback();\n      \u0009\u0009\u0009\u0009\u0009callback();\n      \u0009\u0009\u0009\u0009}\n      \u0009\u0009\u0009}\n      \u0009\u0009}\n      \u0009\u0009else CIPHERSpaceLoadFileGlobalFileRef = {};\n      \u0009\u0009CIPHERSpaceLoadFileGlobalFileRef.onload = newCallback;\n      \u0009}\n      \n      CIPHERSpaceLoadFilesDoAfter(function() { \n        if (typeof IntelliFactory !=='undefined')\n          IntelliFactory.Runtime.Start();\n        for (key in window) { \n          if (key.startsWith(\"StartupCode$\")) \n            try { window[key].$cctor(); } catch (e) {} \n        } \n      })\n      \n                       "+cU;};bN.NewBrowser={$:3};bN.Tab={$:2};bN.Right={$:1};bN.Below={$:0};bO=bM.ErrCompiler=b6.Class({FSSGlobal_Useful_ErrMsg$get_IsWarning:function(){return this.$==0&&!this.$1;},FSSGlobal_Useful_ErrMsg$get_ErrMsg:function(){return this.$==0?(function(cU){return function(cV){return cU(b7.toSafe(cV));};}(a.id))(this.$0):(function(cU){return function(cV){return cU(bZ.p$2(cV));};}(a.id))(this);}},null,bO);bO["Could not open new browser, Popup blocker may be active"]=new bO({$:2});bO["Snippet Missing"]=new bO({$:1});bP.New=function(cU,cV,cW,cX){return{F2:cU,LeftDoubleClick:cV,"Ctrl-Space":cW,".":cX};};bQ=bM.Property=b6.Class({setV:function(cU){this.props.set_Item(this.key,cU);this.setDirty();},getV:function(){return this.props.get_Item(this.key);},setK:function(cU){this.props.Add(cU,this.props.get_Item(this.key));this.props.Remove(this.key);this.key=cU;this.setDirty();},getK:function(){return this.key;},Remove:function(){this.props.Remove(this.key);this.setDirty();},get_SetV:function(){var cU;cU=this;return function(cV){cU.setV(cV);};},get_GetV:function(){var cU;cU=this;return function(){return cU.getV();};},get_SetK:function(){var cU;cU=this;return function(cV){cU.setK(cV);};},get_GetK:function(){var cU;cU=this;return function(){return cU.getK();};},get_ValueVar:function(){return new bR.New(this);},get_KeyVar:function(){return this;},RView:function(){return cz.Const(this.getK());},RUpdM:function(cU){var cV;cV=cU(this.getK());cV==null?void 0:this.setK(cV.$0);},RUpd:function(cU){this.setK(cU(this.getK()));},RVal:function(){return this.getK();},RGet:function(){return this.getK();},set_RVal:function(cU){this.setK(cU);},RSet:function(cU){this.setK(cU);},RId:function(){return"?";}},i,bQ);bQ.New=b6.Ctor(function(cU,cV,cW){this.setDirty=cU;this.props=cV;this.key=cW;},bQ);bR=bM.PropValue=b6.Class({RView:function(){return cz.Const(this.get());},RUpdM:function(cU){var cV;cV=cU(this.get());cV==null?void 0:this.set(cV.$0);},RUpd:function(cU){this.set(cU(this.get()));},RVal:function(){return this.get();},RGet:function(){return this.get();},set_RVal:function(cU){this.set(cU);},RSet:function(cU){this.set(cU);},RId:function(){return"?";}},i,bR);bR.New=b6.Ctor(function(cU){this.get=cU.get_GetV();this.set=cU.get_SetV();},bR);bM["CodeSnippet.propValue"]=function(cU,cV){var cW,cX;return cU.properties.ContainsKey(cV)?{$:1,$0:cU.properties.get_Item(cV)}:(cW=(cX=cU.parent,cX==null?null:bS.FetchO(cX.$0)),cW==null?null:bM["CodeSnippet.propValue"](cW.$0,cV));};bS.FetchByPathO=function(cU){function cV(cX,cY){return b2.tryHead(b2.filter(function(cZ){return cZ.get_Name()===cY;},cX));}function cW(cX,cY){var cZ,c0,c1,c2;cZ=(c0=b2.tryHead(cY),c0==null?null:cV(cX,c0.$0));return b2.length(cY)<=1?cZ:cZ==null?null:(c1=cZ.$0,(c2=b2.tail(cY),cW(b2.filter(function(c3){return b3.Equals(c3.parent,{$:1,$0:c1.id});},(bM.codeSnippets())["var"].RVal()),c2)));}return cW(b2.filter(function(cX){return cX.parent==null;},(bM.codeSnippets())["var"].RVal()),cU);};bM["CodeSnippet.IsDescendantOf"]=function(cU,cV){function cW(cX){var cY,cZ,c0;cY=cX.parent;return cY!=null&&cY.$==1&&(cZ=cY.$0,b3.Equals(cZ,cV)||g.defaultValue(false,(c0=bS.FetchO(cZ),c0==null?null:{$:1,$0:cW(c0.$0)})));}return cW(cU);};bM["CodeSnippet.GetCodeFsx"]=function(cU,cV){return(bM["CodeSnippet.GetCodeAndStarts"](cU,cV))[0];};bM["CodeSnippet.GetCodeAndStarts"]=function(cU,cV){return x.CodeAndStarts(cV,bM["CodeSnippet.Predecessors"](cU));};bM["CodeSnippet.Predecessors"]=function(cU,cV){var cW;cW=ce.ofSeq(cU.UniquePredecessors(bS.FetchO));return ce.ofSeq(b2.map(bM["CodeSnippet.get_PrepareSnippet"],b2.filter(function(cX){return ce.contains(cX.id,cW);},(bM.codeSnippets())["var"].RVal())));};bM["CodeSnippet.get_PrepareSnippet"]=function(cU,cV){var cW;cW=bM["CodeSnippet.get_Levels"](cU);return x.New(cU.name,b4.Replace(b4.Replace(cU.content,"##"+"FSHARPSTATION_ID"+"##",bM.fsIds()),"##"+"FSHARPSTATION_ENDPOINT"+"##",a.location.href),cU.parent,cU.predecessors,cU.id,cU.expanded,cW[0],cW[1],cU.properties);};bM["CodeSnippet.get_Levels"]=function(cU,cV){function cW(cX,cY){return function(cZ){var c0,c1,c2;return g.defaultValue([cX,cY],(c0=(c1=cZ.parent,c1==null?null:bS.FetchO(c1.$0)),(c2=cW(cX+1,cY+(cZ.properties.ContainsKey("NoIndent")?0:1)),c0==null?null:{$:1,$0:c2(c0.$0)})));};}return(function(cX){return cW(cX[0],cX[1]);}([0,0]))(cU);};bS.New=function(cU,cV,cW,cX,cY,cZ){var c0,c1,c2,c3,c4;c0=x.New(cV,cZ,cW,cX,w.get_New(),true,0,0,new cc.New$5());c1=bM.codeSnippets().get_Length();c1===0?bM.codeSnippets().Append(c0):cU===0?(c2=b2.append([c0],(bM.codeSnippets())["var"].RVal()),bM.codeSnippets().Set(c2)):cU<c1?(c3=(c4=ce.splitAt(cU,ce.ofSeq((bM.codeSnippets())["var"].RVal())),c4[0].concat([c0].concat(c4[1]))),bM.codeSnippets().Set(c3)):bM.codeSnippets().Append(c0);return c0;};bS.New$1=function(cU,cV,cW,cX,cY){return bS.New(bM.codeSnippets().get_Length(),cU,cV,cW,cX,cY);};bS.New$2=function(cU){return bS.New$1("",null,b9.T.Empty,b9.T.Empty,cU);};bS.New$3=function(cU,cV){return bS.New$1("",{$:1,$0:cU},b9.T.Empty,b9.T.Empty,cV);};bS.New$4=function(cU,cV,cW){return bS.New$1("",{$:1,$0:cU},cV,b9.T.Empty,cW);};bS.New$5=function(cU,cV){return bS.New$1("",null,cU,b9.T.Empty,cV);};bS.FetchL=function(cU){return ch.toList(bS.FetchO(cU));};bS.FetchO=function(cU){return bM.codeSnippets().TryFindByKey(cU);};bS.PickIO=function(cU){function cV(cW,cX){return b3.Equals(cX.id,cU);}return bM.tryPickI(function(cW){return cV(cW[0],cW[1]);},(bM.codeSnippets())["var"].RVal());};bM.tryPickI=function(cU,cV){return b2.tryHead(b2.filter(cU,b2.indexed(cV)));};bM.fsIds=function(){bW.$cctor();return bW.fsIds;};bM.codeSnippets=function(){bW.$cctor();return bW.codeSnippets;};bU=bT.Babel=b6.Class({},i,bU);bU.New=b6.Ctor(function(){},bU);bV=bT.Fable=b6.Class({},i,bV);bV.New=b6.Ctor(function(){},bV);bT.fableTranslate=function(cU){var cV;cV=p.wrapper();return cV.Run(cV.Delay(function(){var cW;bT.loadReferences().f();return cV.Bind$2((cW=null,b1.Delay(function(){return b1.While(function(){return cK.getOwnPropertyNames(a.metadata).length<ce.length(bT.references());},b1.Delay(function(){return b1.Bind(b1.Sleep(200),function(){return b1.Return(null);});}));})),function(){var cX,cY,cZ,c0,c1;cX=bT.getChecker().f();cY=cL.makeCompiler([["Microsoft.FSharp.Core.ExtraTopLevelOperators.PrintFormatLine","FSSGlobal.FSharpStation.FableModule.ToConsole($0)"]]);cZ="stdin.fsx";c0=ci.parse(cL.convertToJson(cL.compileAst(cY,cL.parseFSharpProject(cX,cY,cZ,cU),cZ)));c1=cK.create(null);c1.plugins=[a.babelPlugins.transformMacroExpressions,a.babelPlugins.removeUnneededNulls,"transform-es2015-modules-amd"];c1.presets=[];c1.filename=cZ;c1.babelrc=false;return cV.Return(b4.Replace(b4.Replace(cM.transformFromAst(c0,null,c1).code,"define([","require(["),"\"use strict\";","\"use strict\"; try { exports = exports || {}; } catch (err) {}"));});}));};bT.ToConsole=function(cU){b_.log(cU);return cU.cont(bT.addOutMsg());};bT.addOutMsg=function(){bW.$cctor();return bW.addOutMsg;};bT.set_addOutMsg=function(cU){bW.$cctor();bW.addOutMsg=cU;};bT.getChecker=function(){bW.$cctor();return bW.getChecker;};bT.loadReferences=function(){bW.$cctor();return bW.loadReferences;};bT.references=function(){bW.$cctor();return bW.references;};bL.FSharpStationClient=function(cU){var cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS;function eT(gI,gJ,gK,gL){return gJ(gL)==null?cE.Lens(cV,function(){return gI;},function(){return"";}):gK(gL);}function eU(){cE.Set(cZ,null);}function eV(gI){function gJ(gL){return gL.get_Name();}function gK(gL,gM){return x.New(gM,gL.content,gL.parent,gL.predecessors,gL.id,gL.expanded,gL.level,gL.levelCode,gL.properties);}return eT("",function(gL){return bM.codeSnippets().TryFindByKey(gL);},function(gL){return bM.codeSnippets().LensInto(gJ,gK,gL);},gI);}function eW(gI){function gJ(gL){return gL.content;}function gK(gL,gM){return x.New(gL.name,gM,gL.parent,gL.predecessors,gL.id,gL.expanded,gL.level,gL.levelCode,gL.properties);}return eT("",function(gL){return bM.codeSnippets().TryFindByKey(gL);},function(gL){return bM.codeSnippets().LensInto(gJ,gK,gL);},gI);}function eX(gI){var gJ;gJ=bM["CodeSnippet.propValue"](gI,"CSS");return gJ==null?null:{$:1,$0:a.id(gJ.$0)};}function eY(gI){return g.defaultValue("",gI);}function eZ(gI){var gJ;gJ=bM["CodeSnippet.propValue"](gI,"CSSLink");return gJ==null?null:{$:1,$0:a.id(gJ.$0)};}function e0(gI){return g.defaultValue("",gI);}function e1(gI){var gJ;gJ=bM["CodeSnippet.propValue"](gI,"Mode");return gJ==null?null:{$:1,$0:a.id(gJ.$0)};}function e2(gI){return g.defaultValue("fsharp",gI);}function e3(gI){var gJ;gJ=bM["CodeSnippet.propValue"](gI,"Theme");return gJ==null?null:{$:1,$0:a.id(gJ.$0)};}function e4(gI){return g.defaultValue("",gI);}function e5(gI){var gJ;gJ=bM["CodeSnippet.propValue"](gI,"Layout");return gJ==null?null:{$:1,$0:a.id(gJ.$0)};}function e6(gI){return g.defaultValue("",gI);}function e7(gI){var gJ;gJ=bM["CodeSnippet.propValue"](gI,"LayoutJS");return gJ==null?null:{$:1,$0:a.id(gJ.$0)};}function e8(gI){return g.defaultValue("",gI);}function e9(gI){var gJ,gK,gL,gM;function gN(gP){var gQ;gQ=bM["CodeSnippet.propValue"](gP,gI);return gQ==null?null:{$:1,$0:a.id(gQ.$0)};}function gO(gP){return g.defaultValue("",gP);}gJ=bg.map((gK=(gL=function(gP){return gP==null?null:gN(gP.$0);},function(gP){return gL(bS.FetchO(gP));}),function(gP){return gO(gK(gP));}),cW);gM=[cE.Create$1(null)];cz.Sink(function(gP){if(!b3.Equals(gM[0].c,gP))cE.Set(gM[0],gP);},bg.toView(gJ));return new bg({$:1,$0:gM[0]});}function e_(gI,gJ){return gJ===""?gI:gJ!=="0";}function e$(){dH=false;cE.Set(dI,true);}function fa(){dB=null;e$();}function fb(){fa();dC.ClearCache();eU();}function fc(){dC.ClearCache();cE.Set(dI,false);dB=null;}function fd(gI,gJ){var gK,gL,gM;return!gJ?null:(gK=(gL=gI.RVal(),(gM=a.String(gJ),gL===null?gM:gL===""?gM:gM===null?gL:gM===""?gL:gL+"\n"+gM)),gK!==gI.RVal()?gI.set_RVal(gK):null);}function fe(gI){cE.Set(dG,gI);}function ff(gI){fd(dG,gI);}function fg(gI){fd(dF,gI);}function fh(){var gI;gI=bS.FetchO(cW.c);gI==null?void 0:cE.Set(dD,bM["CodeSnippet.GetCodeFsx"](gI.$0,true));}function fi(gI,gJ){var gK,gL,gM,gN,gO,gP,gQ,gR;function gS(gT){function gU(gV,gW){return b3.Equals(gW.id,gT);}return function(gV){return bM.tryPickI(function(gW){return gU(gW[0],gW[1]);},gV);};}gK=ce.partition(function(gT){return b3.Equals(gT.id,gJ)||bM["CodeSnippet.IsDescendantOf"](gT,gJ);},ce.ofSeq((bM.codeSnippets())["var"].RVal()));gL=gK[1];gM=gK[0];gN=(gS(gJ))(gM);gO=(gS(gI))(gL);gN!=null&&gN.$==1?gO!=null&&gO.$==1?(gP=gO.$0[0],gQ=gO.$0[1],gR=ce.collect(a.id,[cu.array(gL,{$:1,$0:0},{$:1,$0:gP-1}),gM,cu.array(gL,{$:1,$0:gP},null)]),bM.codeSnippets().Set(gR),bM.codeSnippets().UpdateBy(function(gT){return{$:1,$0:x.New(gT.name,gT.content,gQ.parent,gT.predecessors,gT.id,gT.expanded,gT.level,gT.levelCode,gT.properties)};},gN.$0[1].id)):void 0:void 0;return fb();}function fj(){var gI,gJ,gK,gL;gI=bS.PickIO(cW.c);gI==null?void 0:(gJ=gI.$0,gK=gJ[0],gL=gJ[1],function(gM,gN){var gO;while(true){if(gN<0)return null;else if(gM((gO=(bM.codeSnippets())["var"].RVal(),(function(gP){return function(gQ){return b2.nth(gP,gQ);};}(gN))(gO))))return null;else gN=gN-1;}}(function(gM){return b3.Equals(gM.parent,gL.parent)&&(bM.codeSnippets().UpdateBy(function(gN){return{$:1,$0:x.New(gN.name,gN.content,{$:1,$0:gM.id},gN.predecessors,gN.id,gN.expanded,gN.level,gN.levelCode,gN.properties)};},gL.id),true);},gK-1),fb());}function fk(){var gI,gJ,gK,gL,gM;gI=bS.FetchO(cW.c);gI==null?void 0:(gJ=gI.$0,gK=(gL=(gM=gJ.parent,gM==null?null:bS.FetchO(gM.$0)),gL==null?null:gL.$0.parent),bM.codeSnippets().UpdateBy(function(gN){return{$:1,$0:x.New(gN.name,gN.content,gK,gN.predecessors,gN.id,gN.expanded,gN.level,gN.levelCode,gN.properties)};},gJ.id),fb());}function fl(gI){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){return gJ.Bind$1(m.fromOption(bO["Snippet Missing"],gI),function(gK){var gL;cE.Set(dG,"Compiling to JavaScript...");cE.Set(dE,"");gL=bM["CodeSnippet.GetCodeFsx"](gK,true);cE.Set(dD,gL);return gJ.Bind$2(Q.translateAR(gL,false),function(gM){return gJ.Bind$1(gM,function(gN){var gO;gO=bJ.completeJS(gN);cE.Set(dE,gO);ff("Compiled!");return gJ.Return(gO);});});});}));}function fm(gI){var gJ;gJ=a.open.apply(a,[gI]);return b3.Equals(gJ,null)?m.fail(bO["Could not open new browser, Popup blocker may be active"]):m.succeed(gJ);}function fn(gI,gJ){try{return gI["eval"].apply(gI,[gJ]);}catch(gK){((function(gL){return function(gM){return gL(b7.prettyPrint(gM));};}(function(gL){b_.log(gL);}))(gK));return(function(gL){return function(gM){return gL(b7.prettyPrint(gM));};}(a.id))(gK);}}function fo(gI){try{gI.focus.apply(gI,[]);}catch(gJ){((function(gK){return function(gL){return gK(b7.prettyPrint(gL));};}(function(gK){b_.log(gK);}))(gJ));}}function fp(gI,gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){return gK.Bind$1(m.tryProtection(),function(){return gK.Bind$1(fm(gI),function(gL){fo(gL);return gK.Bind$2(b1.Sleep(800),function(){return gK.Return(fn(gL,gJ));});});});}));}function fq(){return b1.FromContinuations(function(gI,gJ){var gK;try{gK=bf.createIFrame(gI);return(new bK.New(null,null)).RunHtml(gK);}catch(gL){return gJ(gL);}});}function fr(gI){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){return gJ.Bind$1(m.tryProtection(),function(){return gJ.Bind$2(fq(),function(gK){var gL;gL=gK.contentWindow;gL.document.body.style.margin="0px";return gJ.Return(fn(gL,gI));});});}));}function fs(gI,gJ,gK){var gL;gL=p.wrapper();return gL.Run(gL.Delay(function(){return gL.Bind$3(fl(gK),function(gM){cE.Set(dG,"Running JavaScript...");return gL.Bind$3(gJ.$==3?fp(gI,gM):fr(gM),function(gN){ff(gN);ff("Done!");return gL.Return([gJ,gN]);});});}));}function ft(){return bS.FetchO(cW.c);}function fu(gI){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){cE.Set(dD,gI);return gJ.Bind$2(O.evaluateAR(bM.fsIds(),a.location.href,true,gI),function(gK){return gJ.Bind$1(gK,function(){return gJ.Return("");});});}));}function fv(gI){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){return gJ.Bind$1(m.fromOption(bO["Snippet Missing"],gI),function(gK){return gJ.Bind$3(fu(bM["CodeSnippet.GetCodeFsx"](gK,true)),function(gL){return gJ.Bind$2((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.addPresence:-1250306105",[(function(gM){return function(gN){return gM(bZ.p$3(gN));};}(a.id))(gK.id),"ok"]),function(){return gJ.Return(gL);});});});}));}function fw(gI,gJ,gK){var gL;gL=p.wrapper();return gL.Run(gL.Delay(function(){cE.Set(dG,gI);return gL.Bind$3(gK(),function(gM){ff(gM);ff(gJ);return gL.Return(gM);});}));}function fx(gI){return fw("Evaluating F# code...","",function(){return fv(gI);});}function fy(gI){return fw("Evaluating F# code...","",function(){return fu(gI);});}function fz(gI){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){cE.Set(dD,gI);return gJ.Bind$3(bT.fableTranslate(gI),function(gK){cE.Set(dE,gK);a["eval"](gK);return gJ.Return("");});}));}function fA(gI){var gJ;gJ=p.wrapper();return gJ.Run(gJ.Delay(function(){return gJ.Bind$1(m.fromOption(bO["Snippet Missing"],gI),function(gK){return gJ.ReturnFrom(fz(bM["CodeSnippet.GetCodeFsx"](gK,false)));});}));}function fB(gI){return fw("Running Fable...","Done!",function(){return fA(gI);});}function fC(gI){return fw("Running Fable...","Done!",function(){return fz(gI);});}function fD(gI){var gJ;gJ=ft();return(dK(gI))(gJ);}function fE(gI,gJ){return g.defaultValue(false,gJ==null?null:{$:1,$0:b9.contains(gI,gJ.$0.predecessors)});}function fF(gI,gJ){return gJ.Contains(gI);}function fG(gI,gJ){var gK,gL,gM,gN;return gJ==null?null:(gK=gJ.$0,b3.Equals(gK,gI)||fF(gK.id,new cN.New$2(gI.UniquePredecessors(bS.FetchO)))?null:(gL=(b9.contains(gI.id,gK.predecessors)?(gM=(gN=gI.id,function(gO){return!b3.Equals(gN,gO);}),function(gO){return b9.filter(gM,gO);}):function(gO){return new b9.T({$:1,$0:gI.id,$1:gO});})(gK.predecessors),(bM.codeSnippets().UpdateBy(function(gO){return{$:1,$0:x.New(gO.name,gO.content,gO.parent,gL,gO.id,gO.expanded,gO.level,gO.levelCode,gO.properties)};},gK.id),fb())));}function fH(gI){bM.codeSnippets().UpdateBy(function(gJ){return{$:1,$0:x.New(gJ.name,gJ.content,gJ.parent,gJ.predecessors,gJ.id,!gJ.expanded,gJ.level,gJ.levelCode,gJ.properties)};},gI.id);eU();}function fI(gI,gJ,gK){var gL,gM,gN,gO;return bn.get_New().Content$1([bf["class"]("code-editor-list-tile"),bf.classIf("selected",bg.map((gL=gK.id,function(gP){return b3.Equals(gL,gP);}),cW)),bf.classIf("direct-predecessor",bg.map((gM=gK.id,function(gP){return fE(gM,gP);}),c0)),bf.classIf("indirect-predecessor",bg.map((gN=gK.id,function(gP){return fF(gN,gP);}),dM)),bf.draggable("true"),new bj({$:7,$0:cC.Handler("dragover",function(){return function(gP){return gP.preventDefault();};})}),new bj({$:7,$0:cC.Handler("drag",function(){return function(){dJ=gK.id;};})}),new bj({$:7,$0:cC.Handler("drop",function(){return function(gP){gP.preventDefault();return fi(gK.id,dJ);};})}),bf.span([bf["class"]("node"),bf.classIf("parent",gI),bf.classIf("expanded",gJ),new bj({$:7,$0:cC.Handler("click",function(){return function(){return gI?fH(gK):null;};})}),bf.title(gI?gJ?"collapse":"expand":""),bf.htmlText(gI?gJ?"-":"+":"")]),bf.div([bf["class"]("code-editor-list-text"),bf.style1("text-indent",(gO=(bM["CodeSnippet.get_Levels"](gK))[0],(function(gP){return function(gQ){return gP(a.String(gQ)+"em");};}(a.id))(gO))),bf.style("white-space: pre"),bf.htmlText(bg.map2(function(gP){return function(gQ){return v.snippetName(gP,gQ);};},eV(gK.id),eW(gK.id))),new bj({$:7,$0:cC.Handler("click",function(){return function(){return cE.Set(cW,gK.id);};})})]),bf.span([bf["class"]("predecessor"),bf.title("toggle predecessor"),new bj({$:7,$0:cC.Handler("click",function(){return function(){return bg.iter(function(gP){return fG(gK,gP);},c0);};})}),bf.htmlText("X")])]);}function fJ(gI,gJ){return!gJ?gI:gJ;}function fK(gI){return new w({$:0,$0:!gI?"00000000-0000-0000-0000-000000000000":gI.Item});}function fL(gI){return!gI?null:{$:1,$0:fK(gI)};}function fM(gI){var gJ;function gK(gM,gN){gJ.Add(gM,gN);}function gL(gM,gN){return[gM,gN];}gJ=new cc.New$5();return!gI?gJ:(b2.iter(function(gM){return gK(gM[0],gM[1]);},ce.map(function(gM){return gL(gM[0],gM[1]);},cP.GetFields(gI))),gJ);}function fN(gI){var gJ;try{gJ=ci.parse(gI);((function(gK){return function(gL){return gK(b7.prettyPrint(gL));};}(function(gK){b_.log(gK);}))(gJ.length));return ce.choose(function(gK){return!gK?null:{$:1,$0:x.New(fJ("",gK.name),fJ("",gK.content),fL(gK.parent),b9.ofSeq(ce.map(fK,fJ([],gK.predecessors))),fK(gK.id),fJ(false,gK.expanded),fJ(0,gK.level),fJ(0,gK.levelCode),fM(gK.properties))};},gJ);}catch(gK){return[];}}function fO(){var gI,gJ,gK,gL;function gM(gN,gO){var gP;return g.defaultValue(gO,(gP=b2.tryItem(gO,(bM.codeSnippets())["var"].RVal()),gP==null?null:{$:1,$0:(bM["CodeSnippet.get_Levels"](gP.$0))[0]<=gN?gO:gM(gN,gO+1)}));}cE.Set(cW,g.defaultWith(function(){return bS.New$2("");},(gI=bS.PickIO(cW.c),gI==null?null:{$:1,$0:(gJ=gI.$0,(gK=gJ[0],(gL=gJ[1],bS.New(gM((bM["CodeSnippet.get_Levels"](gL))[0],gK+1),"",gL.parent,b9.T.Empty,b9.T.Empty,""))))})).id);fa();eU();}function fP(){var gI,gJ;gI=bS.FetchO(cW.c);gI==null?void 0:(gJ=gI.$0,a.confirm((function(gK){return function(gL){return gK("Do you want to delete "+b7.toSafe(gL)+"?");};}(a.id))(gJ.get_Name()))?(cE.Set(cW,w.get_New()),bM.codeSnippets().Remove(gJ),fa(),eU()):void 0);}function fQ(gI){return b2.last(b4.SplitChars(gI,["/","\\"],0));}function fR(gI,gJ){var gK,gL;gK=gI.files;return gK.length>0?(gL=new a.FileReader(),(gL.onload=function(gM){return gJ(gM.target.result);},gL.readAsText(gK.item(0)))):null;}function fS(gI){var gJ;try{gJ=fN(gI);bM.codeSnippets().Set(gJ);fc();eU();}catch(gK){a.alert(a.String(gK));}}function fT(gI){if(!dI.c||a.confirm("Changes have not been saved, do you really want to load?"))fR(bf.findRootElement(gI).querySelector("#"+dP),fS);}function fU(){var gI,gJ,gK,gL;gI=(gJ=ce.ofSeq((bM.codeSnippets())["var"].RVal()),ci.stringify(((cl.EncodeArray(bY.j$7))())(gJ)));gK=(gL=fQ(dO.c),gL===""?"snippets.fsjson":gL);a.saveAs(new a.Blob([gI],{type:"text/plain;charset=utf-8"}),gK);fc();}function fV(gI,gJ){return bf.findRootElement(gI).querySelector("#"+dP).click();}function fW(){return dU==="a"?"b":"a";}function fX(gI){return gI+dT;}function fY(gI,gJ,gK){var gL,gM,gN,gO,gP,gQ,gR,gS,gT,gU;gL=dB!=null&&dB.$==1&&((gN=dB.$0[0],(gO=dB.$0[1],b3.Equals(gN,gJ.id)&&b3.Equals(gO,gK)))&&(gM=[dB.$0[1],dB.$0[0],dB.$0[2]],true))?(gI("Reparsing..."),[gM[2],bM["CodeSnippet.get_PrepareSnippet"](gJ)]):(gI("Parsing..."),gP=bM["CodeSnippet.Predecessors"](gJ),gQ=ce.length(gP)===1?null:{$:1,$0:x.ReducedCode(gK,cu.array(gP,{$:1,$0:0},{$:1,$0:ce.length(gP)-2}))},gR=ce.get(gP,ce.length(gP)-1),dB={$:1,$0:[gR.id,gK,gQ]},[gQ,gR]);gS=x.ReducedCode(gK,[gL[1]]);gT=g.defaultValue(gS,(gU=gL[0],gU==null?null:{$:1,$0:(function(gV){var gW,gX,gY,gZ,g0,g1;gW=gV[0];gX=gV[1];gY=gV[2];gZ=gV[3];g0=gV[4];g1=gV[5];return function(g2){return x.AddSeps(gW,gX,gY,gZ,g0,g1,g2[0],g2[1],g2[2],g2[3],g2[4],g2[5]);};}(gU.$0))(gS)}));return x.FinishCode(gK,gT[0],gT[1],gT[2],gT[3],gT[4],gT[5]);}function fZ(gI){var gJ;function gK(gL){if(!gI)cE.Set(dF,gL);}gJ=null;return b1.Delay(function(){var gL,gM;gL=bS.FetchO(cW.c);return gL!=null&&gL.$==1?(gM=gL.$0,b1.TryFinally(b1.Delay(function(){var gN,gO;gN=fY(gK,gM,false);gO=fW();((function(gP){return function(gQ){return gP("Parsing "+b7.toSafe(gQ));};}(function(gP){b_.log(gP);}))(gO));dH=false;return b1.Bind(dS.Parse$1(fX(gO),gN[0],gN[1]),function(gP){((function(gQ){return function(gR){return gQ("Parse result= "+b7.prettyPrint(gR));};}(function(gQ){b_.log(gQ);}))(gP!==""));dU=gO;return b1.Combine(!gI?(fg(gP),fg("Parsed!"),b1.Zero()):b1.Zero(),b1.Delay(function(){dH=true;return b1.Zero();}));});}),function(){dX=false;})):b1.Zero();});}function f0(gI){var gJ;gJ=null;return b1.Delay(function(){return!dH?b1.Return(true):b1.Bind(dS.MustParse(fX(dU),gI.get_NameSanitized()),function(gK){return b1.Return(gK);});});}function f1(gI){var gJ;gJ=null;return b1.Delay(function(){return b1.Bind(dV,function(gK){var gL;return gK?b1.Zero():(gL=bS.FetchO(cW.c),gL!=null&&gL.$==1?b1.Bind(f0(gL.$0),function(gM){return gM?b1.Bind(fZ(gI),function(){return b1.Return(null);}):b1.Zero();}):b1.Zero());});});}function f2(gI,gJ){var gK,gL;gK=c.REGEX("([a-zA-Z_]\\w*)$","g",b4.Substring(gI,0,gJ));return gK!=null&&gK.$==1?(gL=gK.$0,gL&&ce.length(gL)===1)?ce.get(gK.$0,0):"":"";}function f3(gI,gJ){var gK,gL;gK=c.REGEX("^([a-zA-Z_]\\w*)","g",gI.substring(gJ));return gK!=null&&gK.$==1?(gL=gK.$0,gL&&ce.length(gL)===1)?ce.get(gK.$0,0):"":"";}function f4(gI){var gJ;b1.Start((gJ=null,b1.Delay(function(){return b1.Bind(dV,function(gK){var gL,gM;return gK?b1.Zero():(gL=bS.FetchO(cW.c),gL!=null&&gL.$==1?(gM=gL.$0,b1.Bind(f1(false),function(){var gN,gO,gP,gQ,gR;gN=gI.getCursor();gO=gI.getLine(gN.line);gP=b4.length(f2(gO,gN.ch));gQ=b4.length(f3(gO,gN.ch));gR=gP===0&&gQ===0?2:gQ;return b1.Bind(dS.ToolTip(fX(dU),gN.line+1,gN.ch+1,gM.get_NameSanitized()),function(gS){var gT;fg(((((gT=(b6.Curried(function(gU,gV,gW,gX,gY){return gU("InfoFSharp \""+b7.toSafe(gV)+" "+("("+b7.prettyPrint(gW[0])+", "+b7.prettyPrint(gW[1])+")")+" - "+("("+b7.prettyPrint(gX[0])+", "+b7.prettyPrint(gX[1])+")")+" "+b7.toSafe(gY)+" \"");},5))(a.id),function(gU){var gV;gV=gT(gU);return function(gW){var gX;gX=gV([gW[0],gW[1]]);return function(gY){return gX([gY[0],gY[1]]);};};})(gM.get_NameSanitized()))([gN.line+1,gN.ch-gP+1]))([gN.line+1,gN.ch+gR+1]))(b4.Replace(gS,"\"","''")));return b1.Zero();});})):b1.Zero());});})),null);}function f5(gI,gJ,gK,gL){var gM;b1.Start((gM=null,b1.Delay(function(){var gN,gO;gN=bS.FetchO(cW.c);return gN!=null&&gN.$==1?(gO=gN.$0,(function(gP){return gP("calling parseIfMustThen");}(function(gP){b_.log(gP);}),b1.Bind(f1(false),function(){var gP;function gQ(gR,gS,gT,gU,gV,gW,gX,gY,gZ){var g0;return b4.StartsWith(gR,gO.id.get_Text())||gR===v.sanitize(gO.name)?(g0=a.Number(gS)>0?a.Number(gS):0,{$:1,$0:bv.New(gZ,b4.StartsWith(gX.toUpperCase(),"ERR")?"error":b4.StartsWith(gX.toUpperCase(),"INFO")?"info":"warning",bk.cmPos(gT-1,gU-1-g0),bk.cmPos(gV-1,gW-1-g0))}):null;}gJ(ce.choose(function(gR){return gQ(gR[0],gR[1],gR[2],gR[3],gR[4],gR[5],gR[6],gR[7],gR[8]);},ce.choose(function(gR){var gS,gT,gU,gV,gW,gX,gY,gZ;return(gT=c.REGEX(dZ,"",gR),gT!=null&&gT.$==1&&((gU=gT.$0,gU&&ce.length(gU)===13)&&(gS=[ce.get(gT.$0,8),ce.get(gT.$0,5),ce.get(gT.$0,7),ce.get(gT.$0,2),ce.get(gT.$0,4),ce.get(gT.$0,11),ce.get(gT.$0,1),ce.get(gT.$0,10),ce.get(gT.$0,9)],true)))?{$:1,$0:[gS[1],gS[4],a.Number(gS[2]),a.Number(gS[0]),a.Number(gS[8]),a.Number(gS[7]),gS[6],gS[3],gS[5]]}:(gW=c.REGEX(dY,"",gR),gW!=null&&gW.$==1&&((gX=gW.$0,gX&&ce.length(gX)===8)&&(gV=[ce.get(gW.$0,4),ce.get(gW.$0,2),ce.get(gW.$0,3),ce.get(gW.$0,1),ce.get(gW.$0,6),ce.get(gW.$0,5)],true)))?(gY=gV[0],(gZ=gV[2],{$:1,$0:[gV[1],gV[3],a.Number(gZ),a.Number(gY)-1,a.Number(gZ),a.Number(gY),gV[5],"fsi",gV[4]]})):null;},(gP=c.REGEX(d0,"g",dF.c),gP!=null&&gP.$==1?gP.$0:[]))));return b1.Zero();}))):b1.Zero();})),null);}function f6(gI){f5.apply(null,gI);}function f7(gI){return gI==="C"?"class":gI==="Cn"?"Constant":gI==="D"?"delegate":gI==="E"?"enum":gI==="P"?"property":gI==="e"?"event":gI==="X"?"exception":gI==="F"?"field":gI==="I"?"interface":gI==="M"?"function":gI==="N"?"module":gI==="S"?"struct":gI==="T"?"type":gI==="V"?"Variable":gI;}function f8(gI,gJ,gK){var gL;d1((gL=null,b1.Delay(function(){return b1.Bind(dV,function(gM){var gN,gO,gP,gQ;return gM?b1.Zero():(gN=bS.FetchO(cW.c),gN!=null&&gN.$==1?(gO=gI.getCursor(),(gP=gI.getLine(gO.line),(gQ=f2(gP,gO.ch),b1.Bind(dS.Complete(fX(dU),gP+"a",gO.line+1,gO.ch+1,gN.$0.get_NameSanitized()),function(gR){function gS(gT,gU,gV,gW){return bs.New(gU,(((b6.Curried3(function(gX,gY,gZ){return gX(b4.PadRight(b7.toSafe(gY),40)+" "+b4.PadLeft(b7.toSafe(gZ),20));}))(a.id))(gT))(f7(gW)),gV);}gJ(bt.New(ce.map(function(gT){return gS(gT[0],gT[1],gT[2],gT[3]);},gR),bp.New(gO.line,gO.ch-gQ.length),gO));return b1.Zero();})))):b1.Zero());});})));}function f9(gI){var gJ,gK,gL;gJ=(gK=gI.parent,gK==null?null:bS.FetchO(gK.$0));gJ==null?void 0:(gL=gJ.$0,f9(gL),!gL.expanded?fH(gL):void 0);}function f_(gI,gJ,gK){var gL;return b1.Start((gL=null,b1.Delay(function(){var gM;cE.Set(cW,gI);gM=bS.FetchO(gI);gM==null?void 0:f9(gM.$0);return b1.Bind(b1.Sleep(200),function(){var gN,gO;gN=d2.editorO;gN==null?void 0:(gO=gN.$0,gO.setCursor(gJ-1,gK-1),gO.focus());return b1.Zero();});})),null);}function f$(gI){var gJ,gK,gL,gM,gN;gJ=c.REGEX("([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}).+?\\((\\d+)\\,\\s*(\\d+)\\)","",gI);gJ!=null&&gJ.$==1?(gK=gJ.$0,gK&&ce.length(gK)===4)?(gL=ce.get(gJ.$0,3),gM=ce.get(gJ.$0,1),gN=ce.get(gJ.$0,2),f_(new w({$:0,$0:gM}),a.Number(gN),a.Number(gL))):void 0:void 0;}function ga(){var gI;b1.Start((gI=null,b1.Delay(function(){var gJ,gK,gL,gM,gN;gJ=bS.FetchO(cW.c);gK=d2.editorO;return(gK!=null&&gK.$==1?gJ!=null&&gJ.$==1?(gL=[gJ.$0,gK.$0],false):true:true)?b1.Zero():(gM=gL[1],(gN=gM.getCursor(),(gM.getLine(gN.line),b1.Bind(dS.FindDecl(fX(dU),gN.line+1,gN.ch+1,gL[0].get_NameSanitized()),function(gO){var gP;return gO.$==9?(gP=gO.$0,(f$(((((((b6.Curried(function(gQ,gR,gS,gT,gU,gV){return gQ(b7.toSafe(gR)+" ("+a.String(gS)+", "+a.String(gT)+") - ("+a.String(gU)+", "+a.String(gV)+")");},6))(a.id))(gP.File))(gP.Line))(gP.Column))(gP.Line))(gP.Column)),b1.Zero())):gO.$==1?(a.alert((function(gQ){return function(gR){return gQ(b0.p(gR));};}(a.id))(gO.$0)),b1.Zero()):(a.alert((function(gQ){return function(gR){return gQ(bZ.p$4(gR));};}(a.id))(gO)),b1.Zero());}))));})),null);}function gb(){var gI;gI=d2.editorO;gI==null?void 0:gI.$0.refresh();}function gc(gI){var gJ;b1.Start((gJ=null,b1.Delay(function(){return b1.Bind(b1.Sleep(gI),function(){gb();return b1.Zero();});})),null);}function gd(){cE.Set(dI,true);}function ge(gI,gJ){return new bQ.New(gd,gI,gJ);}function gf(gI,gJ,gK){return ge(gI,gJ).get_ValueVar().RSet(gK);}function gg(gI,gJ){return bf.table(b9.ofSeq(b2.delay(function(){return b2.append([bf.thead([bf.th([bf.htmlText("Property"),bf.style("padding-right:10px")]),bf.th([bf.htmlText("Value")])])],b2.delay(function(){return b2.append(b2.map(function(gK){var gL;gL=ge(gJ,gK);return bf.tr([bf.td([bf.someElt(cA.Input([],gL.get_KeyVar()))]),bf.td([bf.someElt(cA.InputArea([bf.atr("style","height: 1.5em")],gL.get_ValueVar()))]),bk.hoverable(bf.td([bf.title("remove"),bf.style(" cursor: pointer "),bf.htmlText("x"),new bj({$:7,$0:cC.Handler("click",function(){return function(){gL.Remove();return cE.Set(d9,null);};})})]))]);},b2.sort(gJ.get_Keys())),b2.delay(function(){return[bf.tr([bk.hoverable(bf.td([bf.htmlText("Add..."),new bj({$:7,$0:cC.Handler("click",function(){return function(){gJ.Add("","1");gd();return cE.Set(d9,null);};})})])),bf.td([bf.htmlText("")])])];}));}));})));}function gh(gI){function gJ(gL){return gL.properties;}function gK(gL,gM){return x.New(gL.name,gL.content,gL.parent,gL.predecessors,gL.id,gL.expanded,gL.level,gL.levelCode,gM);}return eT(new cc.New$5(),function(gL){return bM.codeSnippets().TryFindByKey(gL);},function(gL){return bM.codeSnippets().LensInto(gJ,gK,gL);},gI);}function gi(gI){return new bg({$:1,$0:gI});}function gj(gI,gJ,gK,gL){var gM;return p.start(ff,(gM=gI(gJ),(p.map(a.ignore))(gM)));}function gk(gI,gJ,gK,gL){function gM(gN,gO){if(gN==null)ff("Failed!\n"+gO);else if(gN.$0[0].$==0){ff(gO);cE.Set(d$,null);}else ff(gO);}return p.startV(function(gN){return gM(gN[0],gN[1]);},gI(gJ));}function gl(gI,gJ,gK){function gL(gM){return(gI(gK))(gM);}return b6.Curried(gj,2,[gL,gJ]);}function gm(gI,gJ,gK){function gL(gM){return(gI(gK))(gM);}return b6.Curried(gk,2,[gL,gJ]);}function gn(gI){var gJ,gK,gL;gJ=gI.parms;return gJ!=null&&gJ.$==1&&((gL=gJ.$0,gL&&ce.length(gL)===1)&&(gK=ce.get(gJ.$0,0),true))?bS.FetchByPathO(b4.SplitChars(gK,["/"],0)):ft();}function go(gI,gJ){var gK;gK=p.wrap();return gK.Run(gK.Delay(function(){return gK.Bind$2(bg.getAsync(gI.text),function(gL){var gM,gN,gO,gP,gQ,gR,gS,gT,gU,gW,gX,gY,gZ,g0;function gV(g1){return gW==null?null:bM["CodeSnippet.propValue"](gW.$0,g1);}fe(gL+"...");gW=ft();gX=gJ?g.defaultValue("",(gN=gV("open"),gN==null?null:{$:1,$0:c.__(function(g1,g2){return g1+g2;},"\n",gN.$0)})):"";gY=cQ.Create(function(){return g.defaultValue("${parm}() |> printfn \"%A\"",gV("action-template"));});gZ=(gT=gI.parms,gT==null?null:{$:1,$0:ce.map(a.id,gT.$0)});switch(gZ!=null&&gZ.$==1?(g0=gZ.$0,g0&&ce.length(g0)===2?ce.get(gZ.$0,0)==="Code"?(gU=ce.get(gZ.$0,1),0):ce.get(gZ.$0,0)==="Property"?(gU=ce.get(gZ.$0,1),1):2:2):2){case 0:gS={$:1,$0:gU};break;case 1:gS=gV(gU);break;case 2:gS=null;break;}gR=gS==null?gV(gL):gS;gO=(gP=g.defaultWith(function(){return((cK.constructor("return function(parm) { return `"+gY.f()+"`}"))())(gL);},gR),b4.StartsWith(gP,"////")?gP:gX+gP);return gW!=null&&gW.$==1?gK.Bind$2((new cw.New()).Async("FSharpStation:FSSGlobal.FsEvaluator+Evaluator.getPresence:-1568677081",[P.extractConfig(gO),(function(g1){return function(g2){return g1(bZ.p$3(g2));};}(a.id))(gW.$0.id)]),function(g1){return b3.Equals(g1,{$:1,$0:"ok"})?gK.Return(gO):gK.Bind$3(fv(gW),function(){return gK.Return(gO);});}):gK.Return(gO);});}));}function gp(gI,gJ){return p.bind(fy,go(gI,true));}function gq(gI,gJ){return p.bind(fC,go(gI,false));}function gr(gI,gJ){return fx(gn(gI));}function gs(gI,gJ){return fB(gn(gI));}function gt(gI,gJ){var gK;gK=gn(gI);return(dK(gJ))(gK);}function gu(gI,gJ){var gK;gK=p.wrapper();return gK.Run(gK.Delay(function(){return gK.Bind$1(m.tryProtection(),function(){var gL,gM,gN,gO,gP;return gK.Bind$1((gL=gI.parms,gL!=null&&gL.$==1&&((gN=gL.$0,gN&&ce.length(gN)===3)&&(gM=[ce.get(gL.$0,1),ce.get(gL.$0,0),ce.get(gL.$0,2)],true))?(gO=gM[1],(g.defaultWith(function(){((function(gQ){return function(gR){return gQ("setSnippetProp snippet not found: "+b7.toSafe(gR));};}(function(gQ){b_.log(gQ);}))(gO));},(gP=bS.FetchByPathO(b4.SplitChars(gO,["/"],0)),gP==null?null:{$:1,$0:gf(gP.$0.properties,gM[0],gM[2])})),m.succeed())):m.failSimpleError((function(gQ){return function(gR){return gQ("setSnippetProp wrong parms: "+bZ.p$5(gR));};}(a.id))(gI.parms))),function(){return gK.Return();});});}));}function gv(gI,gJ){var gK,gL,gM,gN,gO,gP;((function(gQ){return function(gR){return gQ("showOutText: "+b0.p$22(gR));};}(function(gQ){b_.log(gQ);}))(gI));gL=gI.parms;switch(gL!=null&&gL.$==1?(gM=gL.$0,gM&&ce.length(gM)===1?(gK=ce.get(gL.$0,0),0):(gN=gL.$0,gN&&ce.length(gN)===2?(ce.get(gL.$0,1),ce.get(gL.$0,0)===""?(gK=[ce.get(gL.$0,0),ce.get(gL.$0,1)],1):2):2)):2){case 0:return fe(gK);break;case 1:return fe(gK[1]);break;case 2:return gL!=null&&gL.$==1&&((gP=gL.$0,gP&&ce.length(gP)===2)&&(ce.get(gL.$0,1),ce.get(gL.$0,0)==="+"&&(gO=[ce.get(gL.$0,0),ce.get(gL.$0,1)],true)))?ff(gO[1]):(function(gQ){return function(gR){return gQ("error: showOutText "+b0.p$22(gR));};}(function(gQ){b_.log(gQ);}))(gI);break;}}function gw(){return fD(c1.c);}function gx(){var gI;gI=p.wrapper();return gI.Run(gI.Delay(function(){dB=null;return gI.Bind$2(fZ(false),function(){return gI.Return();});}));}function gy(gI,gJ){var gK,gL;function gM(gN,gO,gP){return gL>=gO&&gL<gP?{$:1,$0:gN}:null;}gK=gI.value;gL=gI.selectionStart;return f$(b2.pick(function(gN){return gM(gN[0],gN[1],gN[2]);},(b2.mapFold(function(gN,gO){return[[gO,gN,gN+gO.length+1],gN+gO.length+1];},0,b4.SplitChars(gK,["\n"],0)))[0]));}function gz(gI,gJ){var gK;return b1.Start((gK=null,b1.Delay(function(){return b1.Bind(b1.Sleep(100),function(){gI.scrollTop=gI.scrollHeight;return b1.Zero();});})),null);}function gA(gI,gJ,gK){var gL;gL=m.result();return gL.Run(gL.Delay(function(){return gL.Bind(m.tryProtection(),function(){return gL.Bind(eN.GetGuiCallAction(gI,gJ,gK),function(gM){var gN;gN=gM.onClick;gN==null?void 0:((gN.$0(gM))(null))(null);return gL.Zero();});});}));}function gB(gI){gc(1000);gc(2000);gc(3000);eN.SetLayoutJson(eH,gI);}function gC(gI){gc(1000);gc(2000);gc(3000);eN.AddNewSteps(eH,gI);}function gD(gI){return ce.ofSeq(b2.map(function(gJ){return[gJ.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gJ.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gI));}function gE(gI){var gJ;return{$:4,$0:(gJ=gI.$0,gJ==null?null:{$:1,$0:gJ.$0[1]}),$1:ce.ofSeq(b2.map(function(gK){return[gK.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gK.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gI.$1))};}function gF(gI){var gJ,gK;return{$:4,$0:(gJ=function(gL){return function(gM){return gL(b7.prettyPrint(gM));};}(a.id),(gK=gI.$0,gK==null?null:{$:1,$0:gJ(gK.$0)})),$1:ce.ofSeq(b2.map(function(gL){return[gL.FSSGlobal_Useful_ErrMsg$get_ErrMsg(),gL.FSSGlobal_Useful_ErrMsg$get_IsWarning()?z.FSWarning:z.FSError];},gI.$1))};}function gG(gI,gJ){var gK;gK=null;return b1.Delay(function(){var gL,gM,gN,gO,gP,gQ,gR,gS,gT;return gJ.$==2?b1.Return({$:1,$0:(gL=bS.FetchO(gJ.$0),gL==null?null:{$:1,$0:gL.$0.content})}):gJ.$==3?b1.Return({$:1,$0:(gM=bS.FetchO(gJ.$0),gM==null?null:{$:1,$0:bM["CodeSnippet.GetCodeFsx"](gM.$0,true)})}):gJ.$==4?b1.Return({$:3,$0:g.defaultValue([],(gN=bS.FetchO(gJ.$0),gN==null?null:{$:1,$0:bM["CodeSnippet.Predecessors"](gN.$0)}))}):gJ.$==5?b1.Return({$:2,$0:bS.FetchO(gJ.$0)}):gJ.$==6?b1.Return({$:1,$0:(gO=bS.FetchByPathO(gJ.$0),gO==null?null:{$:1,$0:gO.$0.content})}):gJ.$==7?b1.Return({$:1,$0:(gP=bS.FetchByPathO(gJ.$0),gP==null?null:{$:1,$0:bM["CodeSnippet.GetCodeFsx"](gP.$0,true)})}):gJ.$==10?(gQ=bS.FetchByPathO(gJ.$0),gQ==null?b1.Return({$:4,$0:null,$1:[["Snippet not found",z.FSError]]}):b1.Bind(Q.translateAR(bM["CodeSnippet.GetCodeFsx"](gQ.$0,true),false),function(gU){return b1.Return({$:4,$0:m.getOption(m.map(bJ.completeJS,gU)),$1:gD(m.getMsgs(gU))});})):gJ.$==8?b1.Return({$:3,$0:g.defaultValue([],(gR=bS.FetchByPathO(gJ.$0),gR==null?null:{$:1,$0:bM["CodeSnippet.Predecessors"](gR.$0)}))}):gJ.$==9?b1.Return({$:2,$0:bS.FetchByPathO(gJ.$0)}):gJ.$==1?b1.Return({$:1,$0:{$:1,$0:"Message received: "+gJ.$0}}):gJ.$==0?b1.Return({$:0,$0:bM.fsIds()}):gJ.$==12?d.map(gE,p.getAsyncR(fs(gJ.$1,bN.NewBrowser,bS.FetchO(gJ.$0)))):gJ.$==13?d.map(gE,p.getAsyncR(fs(gJ.$1,bN.NewBrowser,bS.FetchByPathO(gJ.$0)))):gJ.$==14?(gS=gJ.$0,b1.Return(gF(m.map(function(){return(function(gU){return function(gV){return gU("success: "+b7.toSafe(gV));};}(a.id))(gS);},gA(gS,gJ.$1,gJ.$2))))):b1.Return({$:1,$0:{$:1,$0:(gT=ce.ofSeq((bM.codeSnippets())["var"].RVal()),ci.stringify(((cl.EncodeArray(bY.j$7))())(gT)))}});});}function gH(gI){!b9.contains(gI,eR.c)?cE.Set(eR,new b9.T({$:1,$0:gI,$1:eR.c})):void 0;gc(300);}cV=cE.Create$1("");cW=cE.Create$1(w.get_New());cX="CodeEditor."+"currentCodeSnippetId";cY=a.localStorage.getItem(cX);cY!==null?cW.set_RVal((bX.j$7())(ci.parse(cY))):void 0;bg.sink(function(gI){a.localStorage.setItem(cX,ci.stringify((bY.j$5())(gI)));},cW);cZ=cE.Create$1();c0=bg.map2(function(gI){return function(){return bM.codeSnippets().TryFindByKey(gI);};},cW,cZ);c1=cE.Create$1(bN.Below);c2="CodeEditor."+"position";c3=a.localStorage.getItem(c2);c3!==null?c1.set_RVal((bX.j$8())(ci.parse(c3))):void 0;bg.sink(function(gI){a.localStorage.setItem(c2,ci.stringify((bY.j$6())(gI)));},c1);bg.map(function(gI){return gI.$==1;},c1);c4=bg.map(function(gI){return b3.Equals(bS.FetchO(gI),null);},cW);c5=(c6=bg.map((c7=(c8=function(gI){return gI==null?null:eX(gI.$0);},function(gI){return c8(bS.FetchO(gI));}),function(gI){return eY(c7(gI));}),cW),(c9=[cE.Create$1(null)],(cz.Sink(function(gI){if(!b3.Equals(c9[0].c,gI))cE.Set(c9[0],gI);},bg.toView(c6)),new bg({$:1,$0:c9[0]}))));c_=(c$=bg.map((da=(db=function(gI){return gI==null?null:eZ(gI.$0);},function(gI){return db(bS.FetchO(gI));}),function(gI){return e0(da(gI));}),cW),(dc=[cE.Create$1(null)],(cz.Sink(function(gI){if(!b3.Equals(dc[0].c,gI))cE.Set(dc[0],gI);},bg.toView(c$)),new bg({$:1,$0:dc[0]}))));dd=(de=bg.map((df=(dg=function(gI){return gI==null?null:e1(gI.$0);},function(gI){return dg(bS.FetchO(gI));}),function(gI){return e2(df(gI));}),cW),(dh=[cE.Create$1(null)],(cz.Sink(function(gI){if(!b3.Equals(dh[0].c,gI))cE.Set(dh[0],gI);},bg.toView(de)),new bg({$:1,$0:dh[0]}))));di=(dj=bg.map((dk=(dl=function(gI){return gI==null?null:e3(gI.$0);},function(gI){return dl(bS.FetchO(gI));}),function(gI){return e4(dk(gI));}),cW),(dm=[cE.Create$1(null)],(cz.Sink(function(gI){if(!b3.Equals(dm[0].c,gI))cE.Set(dm[0],gI);},bg.toView(dj)),new bg({$:1,$0:dm[0]}))));dn=(_do=bg.map((dp=(dq=function(gI){return gI==null?null:e5(gI.$0);},function(gI){return dq(bS.FetchO(gI));}),function(gI){return e6(dp(gI));}),cW),(dr=[cE.Create$1(null)],(cz.Sink(function(gI){if(!b3.Equals(dr[0].c,gI))cE.Set(dr[0],gI);},bg.toView(_do)),new bg({$:1,$0:dr[0]}))));ds=(dt=bg.map((du=(dv=function(gI){return gI==null?null:e7(gI.$0);},function(gI){return dv(bS.FetchO(gI));}),function(gI){return e8(du(gI));}),cW),(dw=[cE.Create$1(null)],(cz.Sink(function(gI){if(!b3.Equals(dw[0].c,gI))cE.Set(dw[0],gI);},bg.toView(dt)),new bg({$:1,$0:dw[0]}))));dx=bg.map(function(gI){return gI!=="0"&&gI!=="";},e9("DisableParse"));dy=bg.map2(function(gI){return function(gJ){return e_(gI,gJ);};},dx,e9("DisableFSI"));dz=bg.map2(function(gI){return function(gJ){return e_(gI,gJ);};},dx,e9("DisableFable"));dA=bg.map2(function(gI){return function(gJ){return e_(gI,gJ);};},dx,e9("DisableWebSharper"));dB=null;dC=new t.New(function(gI){var gJ;gJ=gI==null?null:{$:1,$0:new cN.New$2(gI.$0.UniquePredecessors(bS.FetchO))};return g.defaultValue(new cN.New$3(),gJ);});dD=cE.Create$1("");dE=cE.Create$1("");dF=cE.Create$1("");dG=cE.Create$1("");dH=false;dI=cE.Create$1(false);bg.sink(function(gI){a.onbeforeunload=gI?function(gJ){gJ.returnValue="Changes you made may not be saved.";}:null;},dI);dJ=w.get_New();bT.set_addOutMsg(ff);dK=(dL=a.location.origin+"/Main.html",(b6.Curried3(fs))(dL));dM=bg.map(function(gI){var gJ,gK;gJ=null;return dC.cache.TryGetValue(gI,{get:function(){return gJ;},set:function(gL){gJ=gL;}})?gJ:(gK=dC.f(gI),(dC.cache.set_Item(gI,gK),gK));},c0);dN=0;dO=cE.Create$1("");bg.map(function(gI){return gI==="";},dO);dP="CodeEditorFileSel";dQ=bm.New$2(cE.Lens(dO,fQ,a.id)).Prefix$1(bf.label([bf["class"]("btn btn-primary"),bf.htmlText("Load File..."),bm.New$2(dO).Type("file").Style("display: none").Content([cC.Handler("change",function(gI){return function(){return fT(gI);};}),cC.Handler("click",function(gI){return function(){gI.value="";};})]).Id(dP).get_Render()]));cU!==""?b1.Start((dR=null,b1.Delay(function(){return b1.Bind(b1.Sleep(3000),function(){var gI;((function(gJ){return function(gK){return gJ("loading "+b7.toSafe(gK)+"...");};}(function(gJ){b_.log(gJ);}))(cU));gI=cR.getJSON(cU+"?t="+a.String(cS.now()));gI.done(function(){return fS(gI.responseText);});return b1.Zero();});})),null):void 0;dS=new be.New("FSharpStation",{$:1,$0:a.location.href});dT=bM.fsIds()+".fsx";dU="a";dV=cz.GetAsync(bg.toView(dx));dW=1;dX=false;dY="\\((\\d+)\\) F# (.+).fsx\\((\\d+)\\,(\\d+)\\): (error|warning) ((.|\\b)+)";dZ="(Err|Warning|Info)(FSharp|WebSharper)\\s+\"(\\((\\d+)\\) ?)?F?#? ?(.+?)(.fsx)? \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\) ((.|\\s)+?)"+"\"";d0=dY+"|"+dZ;d1=c.asyncStartCancelling();d2=br.New$2((d3=bg.toView(bg.fixit(cW)),(d4=cE.Create$1(null),(d5=[null],(d6=[0],(d7=[0],(cz.Sink(function(){var gI,gJ;gI=d5[0];gI==null?void 0:(gJ=gI.$0,d6[0]>d7[0]?d7[0]=d6[0]:!b3.Equals(gJ.RVal(),d4.c)?(d7[0]=d7[0]+1,gJ.set_RVal(d4.c)):void 0);},d4.v),cz.Sink(function(){var gI,gJ;gI=d5[0];gI==null?void 0:(gJ=gI.$0,d7[0]>d6[0]?d6[0]=d7[0]:!b3.Equals(gJ.RVal(),d4.c)?(d6[0]=d6[0]+10,cE.Set(d4,gJ.RVal())):void 0);},cz.Bind(function(gI){var gJ;gJ=eW(gI);d5[0]={$:1,$0:gJ};d7[0]=d6[0]+100;cE.Set(d4,gJ.RVal());return gJ.RView();},d3)),d4))))))).OnChange(function(){var gI;dB!=null&&dB.$==1&&(b3.Equals(dB.$0[0],cW.c)&&(gI=[dB.$0[0],dB.$0[2]],true))?e$():fa();}).OnRender(function(gI){var gJ;function gK(gN){return f8(gN[0],gN[1],gN[2]);}function gL(gN){gI.replaceSelection(".","end");}function gM(gN){return f8(gN[0],gN[1],gN[2]);}gI.addKeyMap(bP.New(f4,f4,function(gN){bk.showHints(gI,gK,false,gN);},(gJ=function(){bk.showHints(gI,gM,false,void 0);},function(gN){return gJ(gL(gN));})));bk.setLint(gI,f6);bg.sink(function(gN){var gO;b1.Start((gO=null,b1.Delay(function(){gI.setOption("theme",gN);return b1.Bind(b1.Sleep(50),function(){gI.refresh();return b1.Zero();});})),null);},di);bg.sink(function(gN){gI.setOption("mode",gN);},dd);}).Style("height: 100%");d8=d2.get_Render().AddChildren([new bj({$:7,$0:cC.Handler("dblclick",function(){return function(){return f4(d2.editorO.$0);};})}),bf.htmlElement("menu",[bf.type("context"),bf.Id("right-menu"),bf.htmlElement("menuitem",[bf.htmlAttribute("label","Goto Definition"),new bj({$:7,$0:cC.Handler("click",function(){return function(){return ga();};})})])]),bf.htmlAttribute("contextmenu","right-menu")]);bg.sink(function(){var gI;b1.Start((gI=null,b1.Delay(function(){var gJ,gK;return!dH?b1.Zero():(gJ=d2.editorO,gJ!=null&&gJ.$==1?(gK=bS.FetchO(cW.c),gK!=null&&gK.$==1?(gJ.$0.performLint(),b1.Zero()):b1.Zero()):b1.Zero());})),null);},dF);d9=cE.Create$1();d_=bf.div([new bj({$:5,$0:bg.map2(function(gI){return function(gJ){return gg(gI,gJ);};},d9,bg.bind(function(gI){return gi(gh(gI));},cW))}),bf.css(" td.hovering { background: gray; } ")]);d$=cE.Create$1();ea=bD.New$1("Load...").OnClick(function(gI){return function(gJ){return fV(gI,gJ);};});eb=bD.New$1("Save as...").OnClick(b6.Curried(bk.Do,2,[fU,null])).Highlight(dI);ec=bD.New$1("Add Snippet").OnClick(b6.Curried(bk.Do,2,[fO,null]));ed=bD.New$1("Delete Snippet").OnClick(b6.Curried(bk.Do,2,[fP,null])).Disabled(c4);ee=bD.New$1("Indent In  >>").OnClick(b6.Curried(bk.Do,2,[fj,null])).Disabled(c4);ef=bD.New$1("Indent Out <<").OnClick(b6.Curried(bk.Do,2,[fk,null])).Disabled(c4);eg=bD.New$1("Get F# Code").OnClick(b6.Curried(bk.Do,2,[fh,null])).Disabled(dx);eh=bD.New$1("actSetSnippetProp").OnClick2(function(gI){return gl(function(gJ){return function(gK){return gu(gJ,gK);};},null,gI);}).Disabled(dy);ei=bD.New$1("Run FSI on Code").OnClick2(function(gI){return gl(function(gJ){return function(gK){return gp(gJ,gK);};},null,gI);}).Disabled(dy);ej=bD.New$1("Run FSI").OnClick2(function(gI){return gl(function(gJ){return function(gK){return gr(gJ,gK);};},null,gI);}).Disabled(dy);ek=bD.New$1("Run Fable on Code").OnClick2(function(gI){return gl(function(gJ){return function(gK){return gq(gJ,gK);};},null,gI);}).Disabled(dz);el=bD.New$1("Run Fable").OnClick2(function(gI){return gl(function(gJ){return function(gK){return gs(gJ,gK);};},null,gI);}).Disabled(dz);em=bD.New$1("Run WebSharper in new tab").OnClick2((en=bN.NewBrowser,function(gI){return gl(function(gJ){return function(gK){return gt(gJ,gK);};},en,gI);})).Disabled(dA);eo=bD.New$1("Run WebSharper in WS Result").OnClick2((ep=bN.Below,function(gI){return gm(function(gJ){return function(gK){return gt(gJ,gK);};},ep,gI);})).Disabled(dA);eq=bD.New$1("Run WebSharper in ...").OnClick(b6.Curried(gk,2,[gw,null])).Disabled(dA);er=bD.New$1("Parse F#").OnClick(b6.Curried(gj,2,[gx,null])).Disabled(dx);es=bD.New$1("Compile WebSharper").OnClick((et=function(gI){return fl(ft(gI));},b6.Curried(gj,2,[et,null]))).Disabled(dA);eu=bD.New$1("Find Definition").OnClick(b6.Curried(bk.Do,2,[ga,null])).Disabled(dx);ev=bD.New$1("Refresh CodeMirror").OnClick(b6.Curried(bk.Do,2,[gb,null]));ew=bD.New$1("Show Output text").OnClick2(b6.Curried(bk.Do2,3,[gv,null]));ex=bD.New$1("Abort FSI").OnClick(b6.Curried(bk.Do,2,[function(){O.abortFsiExe();},null]));ey=bf.div([ec.get_Button().get_Render(),ef.get_Button().get_Render(),ee.get_Button().get_Render(),dQ.get_Render().AddChildren([bf.style("grid-column: 4/6")]),ej.get_Button().get_Render(),el.get_Button().get_Render(),eq.get_Button().get_Render(),ed.get_Button().get_Render(),eu.get_Button().get_Render(),bf.span([]),eb.get_Button().get_Render(),bf.span([]),eg.get_Button().get_Render(),er.get_Button().get_Render(),bf.someElt(cA.Select([cD.Create("id","Position")],function(gI){return gI.$==1?"Right":gI.$==2?"In Tab":gI.$==3?"New Browser":"Below";},b9.ofArray([bN.NewBrowser,bN.Below]),c1)),bf.style("\n                    overflow: hidden;\n                    display: grid;\n                    grid-template-columns: repeat(8, 12.1%);\n                    bxackground-color: #eee;\n                    padding : 5px;\n                    grid-gap: 5px;\n                ")]);ez=bC.New2([bA.New$2("File").SubMenu([ea.get_MenuEntry(),eb.get_MenuEntry()]),bA.New$2("Code").SubMenu([ec.get_MenuEntry(),ed.get_MenuEntry(),bA.New$2("").get_Divider(),ee.get_MenuEntry(),ef.get_MenuEntry(),bA.New$2("").get_Divider(),eu.get_MenuEntry(),bA.New$2("").get_Divider(),eg.get_MenuEntry(),bA.New$2("").get_Divider(),ev.get_MenuEntry()]),bA.New$2("Run").SubMenu([ej.get_MenuEntry(),ex.get_MenuEntry(),bA.New$2("").get_Divider(),el.get_MenuEntry(),bA.New$2("").get_Divider(),em.get_MenuEntry(),eo.get_MenuEntry(),bA.New$2("").get_Divider(),er.get_MenuEntry(),es.get_MenuEntry()])]);eA=bC.New2([bA.New$2("About").SubMenu([bA.New$1("Source @ GitHub","https://github.com/amieres/FSharpStation").Target("_blank")])]);eB=bk.navbar(bf.h1([bf.htmlText("F# Station"),bf.style("font-size: 48px; margin-top: -17px")]),ez.get_Render(),eA.get_Render());eC="CodeEditor."+"splitterV1";eD=bw.New$1(20).Children([bf.style("grid-row: 2 / 4")]).get_Var();eE=a.localStorage.getItem(eC);eE!==null?eD.set_RVal(((cl.Id())())(ci.parse(eE))):void 0;bg.sink(function(gI){a.localStorage.setItem(eC,ci.stringify(((cl.Id())())(gI)));},eD);eF=bf.bindHElem(function(gI){return bf.div(b9.ofSeq(b2.delay(function(){return b2.append([bf.style("overflow: auto")],b2.delay(function(){var gJ;return b2.append(b2.choose(a.id,(gJ=b2.indexed(gI),b2.mapFold(function(gK,gL){var gM,gN,gO,gP,gQ;gM=gL[1];return g.defaultValue(true,(gN=gM.parent,gN==null?null:{$:1,$0:gK.Contains(gN.$0)}))?(gO=g.defaultValue(false,(gP=b2.tryItem(gL[0]+1,bM.codeSnippets()),gP==null?null:{$:1,$0:b3.Equals(gP.$0.parent,{$:1,$0:gM.id})})),(gQ=gO&&gM.expanded,[{$:1,$0:fI(gO,gQ,gM)},gQ?gK.Add(gM.id):gK])):[null,gK];},new cH.New(b9.T.Empty),gJ))[0]),b2.delay(function(){return b2.append([new bj({$:7,$0:cC.Handler("scroll",function(gK){return function(){dN=gK.scrollTop;};})})],b2.delay(function(){return[new bj({$:7,$0:cC.OnAfterRender(function(gK){gK.scrollTop=dN;})})];}));}));}));})));},(eG=bM.codeSnippets().v,cz.SnapshotOn((bM.codeSnippets())["var"].RVal(),cZ.v,eG)));eH=bI.AddGuids([["actLoadFile",new bE({$:2,$0:ea})],["actSaveFile",new bE({$:2,$0:eb})],["actAddSnippet",new bE({$:2,$0:ec})],["actDeleteSnippet",new bE({$:2,$0:ed})],["actIndentSnippet",new bE({$:2,$0:ee})],["actOutdentSnippet",new bE({$:2,$0:ef})],["actGetFsCode",new bE({$:2,$0:eg})],["actSetSnippetProp",new bE({$:2,$0:eh})],["actEvalFsCode",new bE({$:2,$0:ei})],["actEvalCode",new bE({$:2,$0:ej})],["actRunFableFs",new bE({$:2,$0:ek})],["actRunFable",new bE({$:2,$0:el})],["actRunWSNewTab",new bE({$:2,$0:em})],["actRunWSHere",new bE({$:2,$0:eo})],["actRunWSIn",new bE({$:2,$0:eq})],["actParseCode",new bE({$:2,$0:er})],["actCompileWS",new bE({$:2,$0:es})],["actFindDefinition",new bE({$:2,$0:eu})],["actOutText",new bE({$:2,$0:ew})],["Output",new bE({$:1,$0:bo.New$2(dG).Placeholder("Output:").Title("Output").RenderWith(b9.ofArray([cC.Handler("dblclick",function(gI){return function(gJ){return gy(gI,gJ);};}),cC.OnAfterRender(function(gI){bg.sink(function(gJ){return gz(gI,gJ);},dG);})]))})],["Parser",new bE({$:1,$0:bo.New$2(dF).Placeholder("Parser messages:").Title("Parser").RenderWith(b9.ofArray([cC.Handler("dblclick",function(gI){return function(gJ){return gy(gI,gJ);};})]))})],["JavaScript",new bE({$:1,$0:bo.New$2(dE).Placeholder("Javascript:").Title("JavaScript code generated").get_Render()})],["F# code",new bE({$:1,$0:bo.New$2(dD).Placeholder("F# code:").Title("F# code assembled").get_Render()})],["Properties",new bE({$:1,$0:d_})],["WS Result",new bE({$:1,$0:bf.div([bf.div([bf.Id("TestNode"),bf.style("background: white; height: 100%; width: 100%; ")])])})],["title",new bE({$:1,$0:bm.New$2((eI=bg.toView(bg.fixit(cW)),(eJ=cE.Create$1(null),(eK=[null],(eL=[0],(eM=[0],(cz.Sink(function(){var gI,gJ;gI=eK[0];gI==null?void 0:(gJ=gI.$0,eL[0]>eM[0]?eM[0]=eL[0]:!b3.Equals(gJ.RVal(),eJ.c)?(eM[0]=eM[0]+1,gJ.set_RVal(eJ.c)):void 0);},eJ.v),cz.Sink(function(){var gI,gJ;gI=eK[0];gI==null?void 0:(gJ=gI.$0,eM[0]>eL[0]?eL[0]=eM[0]:!b3.Equals(gJ.RVal(),eJ.c)?(eL[0]=eL[0]+10,cE.Set(eJ,gJ.RVal())):void 0);},cz.Bind(function(gI){var gJ;gJ=eV(gI);eK[0]={$:1,$0:gJ};eM[0]=eL[0]+100;cE.Set(eJ,gJ.RVal());return gJ.RView();},eI)),eJ))))))).Prefix$1(bf.htmlText("name:")).get_Render()})],["code",new bE({$:1,$0:d8})],["snippets",new bE({$:1,$0:eF})],["buttons",new bE({$:1,$0:ey})],["menu",new bE({$:1,$0:eB})],["messagesR",new bE({$:4,$0:true,$1:["Properties"]})],["messagesB1",new bE({$:4,$0:true,$1:["Output","JavaScript","F# code"]})],["messagesB2",new bE({$:4,$0:true,$1:["Parser","WS Result"]})],["messagesB",bk.varVerSplitter(55,"messagesB1","messagesB2",0,100)],["title_code",bk.fixedHorSplitter(true,34,"title","code")],["code_props",bk.varVerSplitter(85,"title_code","messagesR",25,100)],["code_buttons",bk.fixedHorSplitter(false,80,"code_props","buttons")],["snippets_code",bk.varVerSplitter(15,"snippets","code_buttons",5,95)],["main_messages",bk.varHorSplitter(82,"snippets_code","messagesB",35,100)],["extrabuttons",new bE({$:1,$0:bf.div([])})],["main_extra",bk.varVerSplitter(100,"main_messages","extrabuttons",20,100)],["main",bk.fixedHorSplitter(true,50,"menu","main_extra")]]);eN=bI.New$1(eH);a.addLayoutJson=gB;bg.sink(gB,dn);bg.sink(function(gI){if(gI==="")gC([]);else fn(a,gI);},ds);a.doFSharpStationGuiCall=function(gI){var gJ,gK;gJ=m.Success(gA.apply(null,gI));gJ.$==1?((gK=(b6.Curried3(function(gL,gM,gN){return gL("Error doGuiCall "+b7.printList(b7.prettyPrint,gM)+": "+("("+b7.prettyPrint(gN[0])+", "+b7.prettyPrint(gN[1])+", "+b7.printArray(b7.prettyPrint,gN[2])+")"));}))(function(gL){b_.log(gL);}),function(gL){var gM;gM=gK(gL);return function(gN){gM([gN[0],gN[1],gN[2]]);};})(gJ.$0))(gI):void 0;};a.setFSharpStationLayout=function(gI){var gJ;gJ=bS.FetchO(cW.c);gJ==null?void 0:gC(gI.apply(null,[eN,gJ.$0]));};eO=null;(new cc.New$5()).TryGetValue("",{get:function(){return eO;},set:function(gI){eO=gI;}})?void 0:void 0;eP=new L.New(bM.fsIds(),null,null);b1.Start((eQ=null,b1.Delay(function(){return b1.Bind(b1.Sleep(1000),function(){return b1.While(function(){return true;},b1.Delay(function(){return b1.TryWith(b1.Delay(function(){var gI,gJ,gK,gL,gM;function gN(gQ){return gG("",gQ);}function gO(gQ){return{$:1,$0:gQ};}function gP(gQ){return(bX.j$9())(ci.parse(gQ));}gI=function(gQ){return gO(gN(gQ));};eP.payloadProcessorO={$:1,$0:(gJ=function(gQ){return gI(gP(gQ));},(gK=p.map(function(gQ){return ci.stringify((bY.j$8())(gQ));}),function(gQ){return gK(gJ(gQ));}))};p.Start(eP.sendAndForget(A.msgType(D.MsgInformation,(gL=A.MessageBrokerAddress(),(gM=ci.stringify(((cl.Id())())("Registering Processor")),G.New(new B({$:0,$0:""}),gL,D.MsgRequest,"",cg.NewGuid(),gM,F.NoReply))))),null);return b1.Bind(b1.Sleep(60000),function(){return b1.Return(null);});}),function(gI){((function(gJ){return function(gK){return gJ(b7.toSafe(gK));};}(function(gJ){b_.log(gJ);}))(gI.message));return b1.Bind(b1.Sleep(1000),function(){return b1.Return(null);});});}));});})),null);bg.sink(function(){eN.SelectTab("Output");},dG);bg.sink(function(){eN.SelectTab("WS Result");},d$);b1.Start(d.sleepThen(function(){eN.SelectTab("Parser");},1000),null);eR=cE.Create$1(b9.ofArray(["/EPFileX/css/main.css"]));bg.sink(gH,c_);bg.sink(function(gI){if(gI!=="")gH((function(gJ){return function(gK){return gJ("/EPFileX/codemirror/content/theme/"+b7.toSafe(gK)+".css");};}(a.id))(gI));},di);eS=bf.div([bf.style("height: 100vh; width: 100% "),eN.get_Render().Style("height: 100%; width: 100% "),bf.script([bf.src("/EPFileX/FileSaver/FileSaver.js"),bf.type("text/javascript")]),bf.script([bf.src("http://code.jquery.com/jquery-3.1.1.min.js"),bf.type("text/javascript")]),bf.script([bf.src("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"),bf.type("text/javascript")]),bf.link([bf.href("http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"),bf.type("text/css"),bf.rel("stylesheet")]),bf.css("\n      \n        body { margin: 0px }     \n             \n        div textarea {\n            font-family     : monospace;\n        }\n        .code-editor-list-tile {\n            white-space     : nowrap; \n            border-style    : solid none none;\n            border-color    : white;\n            border-width    : 1px;\n            background-color: #D8D8D8;\n            display         : flex;\n        }\n        .code-editor-list-text{\n            padding         : 1px 10px 1px 5px;\n            overflow        : hidden;\n            text-overflow   : ellipsis;\n            white-space     : nowrap;\n            flex            : 1;\n        }\n        \n        .code-editor-list-tile.direct-predecessor {\n            font-weight     : bold;\n        }\n        .code-editor-list-tile.indirect-predecessor {\n            color           : blue;\n        }\n        .code-editor-list-tile.selected {\n            background-color: #77F;\n            color           : white;\n        }\n        .code-editor-list-tile.hovering {\n            background      : lightgray;\n        }\n        .code-editor-list-tile.hovering.selected {\n            background      : blue;\n        }\n        .code-editor-list-tile>.predecessor {\n            font-weight     : bold;\n            border-style    : inset;\n            border-width    : 1px;\n            text-align      : center;\n            color           : transparent;\n        }\n        .code-editor-list-tile.direct-predecessor>.predecessor {\n            color           : blue;\n        }\n        \n        .CodeMirror { height: 100%; }\n        \n        .node {\n            background-color: white; \n            width           : 2ch; \n            color           : #A03; \n            font-weight     : bold; \n            text-align      : center;\n            font-family     : arial;\n        }\n        .Warning { text-decoration: underline lightblue } \n        .Error   { text-decoration: underline red       } \n        .body    { margin         : 0px                 }\n        "),bf.style(" \n                color      : #333;\n                font-size  : small;\n                font-family: monospace;\n                line-height: 1.2;\n                    "),new bj({$:5,$0:bg.map(function(gI){return bf.div(b9.ofSeq(b2.delay(function(){return b2.map(function(gJ){return bf.link([bf.href(gJ),bf.type("text/css"),bf.rel("stylesheet")]);},gI);})));},eR)}),bf.css(c5)]);return(bf.renderDoc())(eS);};bW.$cctor=function(){var cU,cV,cW;bW.$cctor=a.ignore;function cX(cY,cZ){return new bj({$:7,$0:cC.Style(cY,cZ)});}bW.result=new n.New();bW.fromResult=m.toResultS;bW.toResult=m.fromResultS;bW.errOptionIsNone=new k.New();bW.wrap=new q.New();bW.wrapper=new q.New();bW.MessageBrokerId="<MessageBroker>";bW.MessageBrokerAddress=new B({$:0,$0:A.MessageBrokerId()});bW.valFlow=new bi.New();bW.renderDoc=(cU=(cV=cA.Empty(),function(cY){return cY==null?cV:cY.$0;}),function(cY){return cU(bf.chooseNode(cY));});bW.string2Styles=(cW=function(cY){return ce.map(function(cZ){return cX(cZ[0],cZ[1]);},cY);},function(cY){return cW(bf.style2pairs(cY));});bW.codeMirrorIncludes=["/EPFileX/codemirror/scripts/codemirror/codemirror.js","/EPFileX/codemirror/scripts/intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-compiler.js","/EPFileX/codemirror/scripts/codemirror/mode/none.js","/EPFileX/codemirror/scripts/codemirror/mode/fsharp.js","/EPFileX/codemirror/scripts/codemirror/mode/css.js","/EPFileX/codemirror/scripts/codemirror/mode/javascript.js","/EPFileX/codemirror/scripts/codemirror/mode/markdown.js","/EPFileX/codemirror/scripts/addon/search/searchcursor.js","/EPFileX/codemirror/scripts/addon/search/search.js","/EPFileX/codemirror/scripts/addon/search/jump-to-line.js","/EPFileX/codemirror/scripts/addon/dialog/dialog.js","/EPFileX/codemirror/scripts/addon/edit/matchbrackets.js","/EPFileX/codemirror/scripts/addon/selection/active-line.js","/EPFileX/codemirror/scripts/addon/display/fullscreen.js","/EPFileX/codemirror/scripts/addon/hint/show-hint.js","/EPFileX/codemirror/scripts/addon/lint/lint.js"];bW.observers=b9.T.Empty;bW.draggedTab=[null];bW.selectedPanels=cE.Create$1(new ct.New([]));bW.TabMoved=null;bW.codeSnippets=cT.Create(function(cY){return cY.id;},b9.T.Empty);bW.fsIds="FSharpStation"+a.String(cS.now());bW.references=["mscorlib.dll","System.dll","System.Core.dll","System.Data.dll","System.IO.dll","System.Xml.dll","System.Numerics.dll","FSharp.Core.sigdata","FSharp.Core.dll","Fable.Core.dll","Fable.Import.Browser.dll"];bW.loadReferences=cQ.Create(function(){var cY;b1.Start((cY=null,b1.Delay(function(){return b1.Bind(bf.LoadFilesAsync(["https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.2/require.min.js"]),function(){var cZ;cZ=cK.create(null);cZ.skipDataMain=1;cZ.isBrowser=1;a.require.config(cZ);b2.iter(function(c0){a.getFileBlob(c0,"metadata/"+c0);},bT.references());return b1.Zero();});})),null);});bW.getChecker=cQ.Create(function(){return cL.createChecker(function(cY){return a.metadata[cY];},ce.choose(function(cY){return cY.indexOf("sigdata")!=-1?null:{$:1,$0:b4.Replace(cY,".dll","")};},bT.references()));});bW.addOutMsg=function(cY){b_.log(cY);};};bX.j$4=function(){return bX._v$4?bX._v$4:bX._v$4=(cl.DecodeUnion(void 0,"$",[[0,[["$0","Item",cl.Id(),0]]],[1,[["$0","Item",cl.Id(),1]]],[2,[["$0","Item",bX.j$6,1]]],[3,[["$0","Item",cl.DecodeArray(bX.j$6),0]]],[4,[["$0","Item1",cl.Id(),1],["$1","Item2",cl.DecodeArray(cl.DecodeTuple([cl.Id(),bX.j$5])),0]]]]))();};bX.j$6=function(){return bX._v$6?bX._v$6:bX._v$6=(cl.DecodeRecord(x,[["name",cl.Id(),0],["content",cl.Id(),0],["parent",bX.j$7,1],["predecessors",cl.DecodeList(bX.j$7),0],["id",bX.j$7,0],["expanded",cl.Id(),0],["level",cl.Id(),0],["levelCode",cl.Id(),0],["properties",cl.DecodeStringDictionary(cl.Id()),0]]))();};bX.j$7=function(){return bX._v$7?bX._v$7:bX._v$7=(cl.DecodeUnion(w,"$",[[0,[["$0","Item",cl.Id(),0]]]]))();};bX.j$5=function(){return bX._v$5?bX._v$5:bX._v$5=(cl.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};bY.j$4=function(){return bY._v$4?bY._v$4:bY._v$4=(cl.EncodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",cl.Id(),0]]],[2,[["$0","Item",bY.j$5,0]]],[3,[["$0","Item",bY.j$5,0]]],[4,[["$0","Item",bY.j$5,0]]],[5,[["$0","Item",bY.j$5,0]]],[6,[["$0","Item",cl.EncodeArray(cl.Id()),0]]],[7,[["$0","Item",cl.EncodeArray(cl.Id()),0]]],[8,[["$0","Item",cl.EncodeArray(cl.Id()),0]]],[9,[["$0","Item",cl.EncodeArray(cl.Id()),0]]],[10,[["$0","Item",cl.EncodeArray(cl.Id()),0]]],[11,[]],[12,[["$0","Item1",bY.j$5,0],["$1","Item2",cl.Id(),0]]],[13,[["$0","Item1",cl.EncodeArray(cl.Id()),0],["$1","Item2",cl.Id(),0]]],[14,[["$0","name",cl.Id(),0],["$1","action",cl.Id(),0],["$2","parms",cl.EncodeArray(cl.Id()),0]]]]))();};bY.j$5=function(){return bY._v$5?bY._v$5:bY._v$5=(cl.EncodeUnion(w,"$",[[0,[["$0","Item",cl.Id(),0]]]]))();};bZ.p=function(cU){return cU.$==2?"FSInfor":cU.$==1?"FSWarning":"FSError";};bY.j$8=function(){return bY._v$8?bY._v$8:bY._v$8=(cl.EncodeUnion(void 0,"$",[[0,[["$0","Item",cl.Id(),0]]],[1,[["$0","Item",cl.Id(),1]]],[2,[["$0","Item",bY.j$7,1]]],[3,[["$0","Item",cl.EncodeArray(bY.j$7),0]]],[4,[["$0","Item1",cl.Id(),1],["$1","Item2",cl.EncodeArray(cl.EncodeTuple([cl.Id(),bY.j$9])),0]]]]))();};bY.j$9=function(){return bY._v$9?bY._v$9:bY._v$9=(cl.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]]]))();};bX.j$9=function(){return bX._v$9?bX._v$9:bX._v$9=(cl.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",cl.Id(),0]]],[2,[["$0","Item",bX.j$7,0]]],[3,[["$0","Item",bX.j$7,0]]],[4,[["$0","Item",bX.j$7,0]]],[5,[["$0","Item",bX.j$7,0]]],[6,[["$0","Item",cl.DecodeArray(cl.Id()),0]]],[7,[["$0","Item",cl.DecodeArray(cl.Id()),0]]],[8,[["$0","Item",cl.DecodeArray(cl.Id()),0]]],[9,[["$0","Item",cl.DecodeArray(cl.Id()),0]]],[10,[["$0","Item",cl.DecodeArray(cl.Id()),0]]],[11,[]],[12,[["$0","Item1",bX.j$7,0],["$1","Item2",cl.Id(),0]]],[13,[["$0","Item1",cl.DecodeArray(cl.Id()),0],["$1","Item2",cl.Id(),0]]],[14,[["$0","name",cl.Id(),0],["$1","action",cl.Id(),0],["$2","parms",cl.DecodeArray(cl.Id()),0]]]]))();};b0.p$22=function(cU){return"{"+("text = "+bZ.p$6(cU.text))+"; "+("highlight = "+bZ.p$8(cU.highlight))+"; "+("disabled = "+bZ.p$8(cU.disabled))+"; "+("toolTip = "+bZ.p$10(cU.toolTip))+"; "+("onClick = "+bZ.p$11(cU.onClick))+"; "+("parms = "+bZ.p$5(cU.parms))+"}";};bZ.p$11=function(cU){return cU==null?"null":"Some <fun>";};bZ.p$10=function(cU){return cU==null?"null":"Some "+b7.prettyPrint(cU.$0);};bZ.p$8=function(cU){return cU.$==2?"Dynamic "+bZ.p$9(cU.$0):cU.$==1?"DynamicV "+b7.prettyPrint(cU.$0):"Constant "+b7.prettyPrint(cU.$0);};bZ.p$9=function(cU){return"V <fun>";};bZ.p$6=function(cU){return cU.$==2?"Dynamic "+bZ.p$7(cU.$0):cU.$==1?"DynamicV "+b7.prettyPrint(cU.$0):"Constant "+b7.prettyPrint(cU.$0);};bZ.p$7=function(cU){return"V <fun>";};bZ.p$5=function(cU){return cU==null?"null":"Some "+b7.printArray(b7.prettyPrint,cU.$0);};bZ.p$4=function(cU){return cU.$==17?"KMultiple "+b7.printArray(function(cV){return bZ.p$4(cV);},cU.$0):cU.$==16?"KUnionCase "+b0.p$21(cU.$0):cU.$==15?"KNamespaces "+b0.p$18(cU.$0):cU.$==14?"KCompilerLocation "+b0.p$17(cU.$0):cU.$==13?"KSignatureData "+b0.p$15(cU.$0):cU.$==12?"KTypeSig "+b7.prettyPrint(cU.$0):cU.$==11?"KToolTip "+b7.printArray(function(cV){return b7.printArray(function(cW){return b0.p$2(cW);},cV);},cU.$0):cU.$==10?"KDeclarations "+b7.printArray(function(cV){return b0.p$13(cV);},cU.$0):cU.$==9?"KFindDecl "+b0.p$12(cU.$0):cU.$==8?"KColorizations "+b7.printList(function(cV){return b0.p$11(cV);},cU.$0):cU.$==7?"KErrors "+b0.p$9(cU.$0):cU.$==6?"KMethod "+b0.p$6(cU.$0):cU.$==5?"KHelp "+b7.prettyPrint(cU.$0):cU.$==4?"KSymbolUse "+b0.p$4(cU.$0):cU.$==3?"KCompletion "+b7.printArray(function(cV){return b0.p$3(cV);},cU.$0):cU.$==2?"KHelpText "+b0.p$1(cU.$0):cU.$==1?"KError "+b0.p(cU.$0):"KInfo "+b7.prettyPrint(cU.$0);};b0.p$21=function(cU){return"{"+("Text = "+b7.prettyPrint(cU.Text))+"}";};b0.p$18=function(cU){return"{"+("Opens = "+b7.printArray(function(cV){return b0.p$19(cV);},cU.Opens))+"; "+("Qualifies = "+b7.printArray(function(cV){return b0.p$20(cV);},cU.Qualifies))+"; "+("Word = "+b7.prettyPrint(cU.Word))+"}";};b0.p$20=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("Qualifier = "+b7.prettyPrint(cU.Qualifier))+"}";};b0.p$19=function(cU){return"{"+("Namespace = "+b7.prettyPrint(cU.Namespace))+"; "+("Name = "+b7.prettyPrint(cU.Name))+"; "+("Type = "+b7.prettyPrint(cU.Type))+"; "+("Line = "+b7.prettyPrint(cU.Line))+"; "+("Column = "+b7.prettyPrint(cU.Column))+"; "+("MultipleNames = "+b7.prettyPrint(cU.MultipleNames))+"}";};b0.p$17=function(cU){return"{"+("Fsc = "+b7.prettyPrint(cU.Fsc))+"; "+("Fsi = "+b7.prettyPrint(cU.Fsi))+"; "+("MSBuild = "+b7.prettyPrint(cU.MSBuild))+"}";};b0.p$15=function(cU){return"{"+("OutputType = "+b7.prettyPrint(cU.OutputType))+"; "+("Parameters = "+b7.printList(function(cV){return b7.printList(function(cW){return b0.p$16(cW);},cV);},cU.Parameters))+"}";};b0.p$16=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("Type = "+b7.prettyPrint(cU.Type))+"}";};b0.p$13=function(cU){return"{"+("Declaration = "+b0.p$14(cU.Declaration))+"; "+("Nested = "+b7.printArray(function(cV){return b0.p$14(cV);},cU.Nested))+"}";};b0.p$14=function(cU){return"{"+("UniqueName = "+b7.prettyPrint(cU.UniqueName))+"; "+("Name = "+b7.prettyPrint(cU.Name))+"; "+("Glyph = "+b7.prettyPrint(cU.Glyph))+"; "+("GlyphChar = "+b7.prettyPrint(cU.GlyphChar))+"; "+("IsTopLevel = "+b7.prettyPrint(cU.IsTopLevel))+"; "+("File = "+b7.prettyPrint(cU.File))+"; "+("EnclosingEntity = "+b7.prettyPrint(cU.EnclosingEntity))+"; "+("IsAbstract = "+b7.prettyPrint(cU.IsAbstract))+"}";};b0.p$12=function(cU){return"{"+("File = "+b7.prettyPrint(cU.File))+"; "+("Line = "+b7.prettyPrint(cU.Line))+"; "+("Column = "+b7.prettyPrint(cU.Column))+"}";};b0.p$11=function(cU){return"{"+("Kind = "+b7.prettyPrint(cU.Kind))+"}";};b0.p$9=function(cU){return"{"+("File = "+b7.prettyPrint(cU.File))+"; "+("Errors = "+b7.printArray(function(cV){return b0.p$10(cV);},cU.Errors))+"}";};b0.p$10=function(cU){return"{"+("FileName = "+b7.prettyPrint(cU.FileName))+"; "+("StartLine = "+b7.prettyPrint(cU.StartLine))+"; "+("EndLine = "+b7.prettyPrint(cU.EndLine))+"; "+("StartColumn = "+b7.prettyPrint(cU.StartColumn))+"; "+("EndColumn = "+b7.prettyPrint(cU.EndColumn))+"; "+("Message = "+b7.prettyPrint(cU.Message))+"; "+("Subcategory = "+b7.prettyPrint(cU.Subcategory))+"}";};b0.p$6=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("CurrentParameter = "+b7.prettyPrint(cU.CurrentParameter))+"; "+("Overloads = "+b7.printList(function(cV){return b0.p$7(cV);},cU.Overloads))+"}";};b0.p$7=function(cU){return"{"+("Tip = "+b7.printList(function(cV){return b7.printList(function(cW){return b0.p$2(cW);},cV);},cU.Tip))+"; "+("TypeText = "+b7.prettyPrint(cU.TypeText))+"; "+("Parameters = "+b7.printList(function(cV){return b0.p$8(cV);},cU.Parameters))+"; "+("IsStaticArguments = "+b7.prettyPrint(cU.IsStaticArguments))+"}";};b0.p$8=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("CanonicalTypeTextForSorting = "+b7.prettyPrint(cU.CanonicalTypeTextForSorting))+"; "+("Display = "+b7.prettyPrint(cU.Display))+"; "+("Description = "+b7.prettyPrint(cU.Description))+"}";};b0.p$4=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("Uses = "+b7.printList(function(cV){return b0.p$5(cV);},cU.Uses))+"}";};b0.p$5=function(cU){return"{"+("FileName = "+b7.prettyPrint(cU.FileName))+"; "+("StartLine = "+b7.prettyPrint(cU.StartLine))+"; "+("StartColumn = "+b7.prettyPrint(cU.StartColumn))+"; "+("EndLine = "+b7.prettyPrint(cU.EndLine))+"; "+("EndColumn = "+b7.prettyPrint(cU.EndColumn))+"; "+("IsFromDefinition = "+b7.prettyPrint(cU.IsFromDefinition))+"; "+("IsFromAttribute = "+b7.prettyPrint(cU.IsFromAttribute))+"; "+("IsFromComputationExpression = "+b7.prettyPrint(cU.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+b7.prettyPrint(cU.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+b7.prettyPrint(cU.IsFromPattern))+"; "+("IsFromType = "+b7.prettyPrint(cU.IsFromType))+"}";};b0.p$3=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("ReplacementText = "+b7.prettyPrint(cU.ReplacementText))+"; "+("Glyph = "+b7.prettyPrint(cU.Glyph))+"; "+("GlyphChar = "+b7.prettyPrint(cU.GlyphChar))+"}";};b0.p$1=function(cU){return"{"+("Name = "+b7.prettyPrint(cU.Name))+"; "+("Overloads = "+b7.printList(function(cV){return b7.printList(function(cW){return b0.p$2(cW);},cV);},cU.Overloads))+"}";};b0.p$2=function(cU){return"{"+("Signature = "+b7.prettyPrint(cU.Signature))+"; "+("Comment = "+b7.prettyPrint(cU.Comment))+"}";};b0.p=function(cU){return"{"+("Code = "+b7.prettyPrint(cU.Code))+"; "+("Message = "+b7.prettyPrint(cU.Message))+"}";};bY.j$7=function(){return bY._v$7?bY._v$7:bY._v$7=(cl.EncodeRecord(x,[["name",cl.Id(),0],["content",cl.Id(),0],["parent",bY.j$5,1],["predecessors",cl.EncodeList(bY.j$5),0],["id",bY.j$5,0],["expanded",cl.Id(),0],["level",cl.Id(),0],["levelCode",cl.Id(),0],["properties",cl.EncodeStringDictionary(cl.Id()),0]]))();};bZ.p$3=function(cU){return"CodeSnippetId "+b7.prettyPrint(cU.$0);};bY.j$6=function(){return bY._v$6?bY._v$6:bY._v$6=(cl.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};bX.j$8=function(){return bX._v$8?bX._v$8:bX._v$8=(cl.DecodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[]],[3,[]]]))();};bX.j$10=function(){return bX._v$10?bX._v$10:bX._v$10=(cl.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",cl.DecodeArray(cl.Id()),0]]]]))();};bY.j$10=function(){return bY._v$10?bY._v$10:bY._v$10=(cl.EncodeUnion(void 0,"type",[["BRGetConnections",[]]]))();};bX.j$11=function(){return bX._v$11?bX._v$11:bX._v$11=(cl.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",bX.j$1,0]]],["BMWebSocketError",[["$0","Item",cl.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",bX.j$2,0]]]]))();};bZ.p$14=function(cU){return cU.$==2?"Receiver":cU.$==1?"Broker":"NoReply";};bZ.p$13=function(cU){return cU.$==5?"MsgRequestForEcho":cU.$==4?"MsgRequestForId":cU.$==3?"MsgFromBroker":cU.$==2?"MsgReply":cU.$==1?"MsgRequest":"MsgInformation";};b0.p$23=function(cU){return"{"+("from = "+bZ.p$12(cU.from))+"; "+("destination = "+bZ.p$12(cU.destination))+"; "+("msgType = "+bZ.p$13(cU.msgType))+"; "+("subtype = "+b7.prettyPrint(cU.subtype))+"; "+("id = "+b7.prettyPrint(cU.id))+"; "+("payload = "+b7.prettyPrint(cU.payload))+"; "+("replier = "+bZ.p$14(cU.replier))+"}";};bZ.p$12=function(cU){return"Address "+b7.prettyPrint(cU.$0);};bZ.p$15=function(cU){return cU.$==3?"Close":cU.$==2?"Open":cU.$==1?"Error":"Message "+b0.p$23(cU.$0);};bX.j$12=function(){return bX._v$12?bX._v$12:bX._v$12=(cl.DecodeRecord(void 0,[["GuiRoot",cl.Id(),1],["GuiTabStrip",cl.DecodeTuple([cl.Id(),cl.DecodeArray(cl.Id())]),1],["GuiSplit",cl.DecodeTuple([cl.Id(),cl.Id(),cl.Id(),cl.Id(),cl.Id(),cl.Id(),cl.Id(),cl.Id()]),1],["GuiNode",bX.j$13,1],["GuiCall",cl.DecodeTuple([cl.Id(),cl.Id(),cl.DecodeArray(cl.Id())]),1]]))();};bX.j$13=function(){return bX._v$13?bX._v$13:bX._v$13=(cl.DecodeRecord(void 0,[["HtmlElementF",cl.DecodeTuple([cl.Id(),cl.DecodeArray(bX.j$13)]),1],["HtmlAttributeF",cl.DecodeTuple([cl.Id(),cl.Id()]),1],["HtmlAttributeOF",cl.DecodeTuple([cl.Id(),bX.j$14]),1],["HtmlTextF",cl.Id(),1],["HtmlEmptyF",cl.Id(),1],["HtmlGuiPart",cl.Id(),1],["HtmlGuiCall",cl.DecodeTuple([cl.Id(),cl.Id(),cl.DecodeArray(cl.Id())]),1]]))();};bX.j$14=function(){return bX._v$14?bX._v$14:bX._v$14=(cl.DecodeUnion(void 0,"$",[null,[1,[["$0","Value",cl.Id(),0]]]]))();};bX.j$1=function(){return bX._v$1?bX._v$1:bX._v$1=(cl.DecodeUnion(B,"$",[[0,[["$0","address",cl.Id(),0]]]]))();};bX.j$2=function(){return bX._v$2?bX._v$2:bX._v$2=(cl.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};bX.j$3=function(){return bX._v$3?bX._v$3:bX._v$3=(cl.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};bX.j=function(){return bX._v?bX._v:bX._v=(cl.DecodeRecord(void 0,[["from",bX.j$1,0],["destination",bX.j$1,0],["msgType",bX.j$2,0],["subtype",cl.Id(),0],["id",cl.Id(),0],["payload",cl.Id(),0],["replier",bX.j$3,0]]))();};bY.j$1=function(){return bY._v$1?bY._v$1:bY._v$1=(cl.EncodeUnion(B,"$",[[0,[["$0","address",cl.Id(),0]]]]))();};bY.j$2=function(){return bY._v$2?bY._v$2:bY._v$2=(cl.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};bY.j$3=function(){return bY._v$3?bY._v$3:bY._v$3=(cl.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};bY.j=function(){return bY._v?bY._v:bY._v=(cl.EncodeRecord(void 0,[["from",bY.j$1,0],["destination",bY.j$1,0],["msgType",bY.j$2,0],["subtype",cl.Id(),0],["id",cl.Id(),0],["payload",cl.Id(),0],["replier",bY.j$3,0]]))();};bZ.p$1=function(cU){return cU.$==1?"Snippet Not Found "+b7.prettyPrint(cU.$0):"FSMessage ("+b7.prettyPrint(cU.$0)+", "+bZ.p(cU.$1)+")";};bZ.p$2=function(cU){return cU.$==2?"Could not open new browser, Popup blocker may be active":cU.$==1?"Snippet Missing":"JsCompilerMsg ("+b7.prettyPrint(cU.$0)+", "+b7.prettyPrint(cU.$1)+")";};}());

(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx;a=window;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JSModule=c.JSModule||{};e=c.Pervasives=c.Pervasives||{};f=b.Json=b.Json||{};g=b.Obj=b.Obj||{};h=b.Remoting=b.Remoting||{};i=h.XhrProvider=h.XhrProvider||{};j=h.AjaxRemotingProvider=h.AjaxRemotingProvider||{};k=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};l=b.HtmlContentExtensions=b.HtmlContentExtensions||{};m=l.SingleNode=l.SingleNode||{};n=b.Activator=b.Activator||{};o=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};p=b.Collections=b.Collections||{};q=p.EqualityComparer=p.EqualityComparer||{};r=b.Comparers=b.Comparers||{};s=r.EquatableEqualityComparer=r.EquatableEqualityComparer||{};t=r.BaseEqualityComparer=r.BaseEqualityComparer||{};u=p.Comparer=p.Comparer||{};v=r.ComparableComparer=r.ComparableComparer||{};w=r.BaseComparer=r.BaseComparer||{};x=b.Operators=b.Operators||{};y=b.Nullable=b.Nullable||{};z=b.Utils=b.Utils||{};A=b.Concurrency=b.Concurrency||{};B=A.CT=A.CT||{};C=A.AsyncBody=A.AsyncBody||{};D=A.Scheduler=A.Scheduler||{};E=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};F=b.Enumerator=b.Enumerator||{};G=F.T=F.T||{};H=c.Optional=c.Optional||{};I=b.Arrays=b.Arrays||{};J=b.Seq=b.Seq||{};K=b.List=b.List||{};L=b.Arrays2D=b.Arrays2D||{};M=b.CancellationTokenSource=b.CancellationTokenSource||{};N=b.Char=b.Char||{};O=b.Util=b.Util||{};P=b.DateUtil=b.DateUtil||{};Q=b.DateTimeOffset=b.DateTimeOffset||{};R=b.Delegate=b.Delegate||{};S=p.DictionaryUtil=p.DictionaryUtil||{};T=p.KeyCollection=p.KeyCollection||{};U=p.ValueCollection=p.ValueCollection||{};V=p.Dictionary=p.Dictionary||{};W=b.MatchFailureException=b.MatchFailureException||{};X=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};Y=b.OperationCanceledException=b.OperationCanceledException||{};Z=b.ArgumentException=b.ArgumentException||{};_0=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_1=b.ArgumentNullException=b.ArgumentNullException||{};_2=b.InvalidOperationException=b.InvalidOperationException||{};_3=b.AggregateException=b.AggregateException||{};_4=b.TimeoutException=b.TimeoutException||{};_5=b.FormatException=b.FormatException||{};_6=b.OverflowException=b.OverflowException||{};_7=a.System=a.System||{};_8=_7.Guid=_7.Guid||{};_9=p.HashSetUtil=p.HashSetUtil||{};_=p.HashSet=p.HashSet||{};$=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};ba=$.LazyRecord=$.LazyRecord||{};bb=b.Lazy=b.Lazy||{};bc=K.T=K.T||{};bd=b.Slice=b.Slice||{};be=b.Option=b.Option||{};bf=b.Queue=b.Queue||{};bg=b.Random=b.Random||{};bh=b.Ref=b.Ref||{};bi=b.Result=b.Result||{};bj=b.Control=b.Control||{};bk=b.Stack=b.Stack||{};bl=b.Strings=b.Strings||{};bm=b.Task=b.Task||{};bn=b.Task1=b.Task1||{};bo=b.TaskCompletionSource=b.TaskCompletionSource||{};bp=b.Unchecked=b.Unchecked||{};bq=b.Numeric=b.Numeric||{};br=a.IntelliFactory;bs=br&&br.Runtime;bt=a.JSON;bu=a.String;bv=a.Date;bw=a.console;bx=a.Math;d.GetFieldValues=function(by){var bz,bA;bz=[];for(var bB in by)bz.push(by[bB]);return bz;};d.GetFieldNames=function(by){var bz,bA;bz=[];for(var bB in by)bz.push(bB);return bz;};d.GetFields=function(by){var bz,bA;bz=[];for(var bB in by)bz.push([bB,by[bB]]);return bz;};e.GetJS=function(by,bz){var bA,bB;bA=by;bB=F.Get(bz);try{while(bB.MoveNext())bA=bA[bB.Current()];}finally{if("Dispose"in bB)bB.Dispose();}return bA;};e.NewFromSeq=function(by){var bz,bA,bB;bz={};bA=F.Get(by);try{while(bA.MoveNext()){bB=bA.Current();bz[bB[0]]=bB[1];}}finally{if("Dispose"in bA)bA.Dispose();}return bz;};f.Activate=function(by){var bz,bB,bC,bD;function bA(bE){var bF,bG,bH,bI,bJ;if(bp.Equals(bE,null))return bE;else if(typeof bE=="object"){if(bE instanceof a.Array)return f.shallowMap(bA,bE);else{bF=f.shallowMap(bA,bE.$V);bG=bE.$T;if(bG===void 0)return bF;else{bH=I.get(bB,bG);if(bH===window.WebSharper.List.T)return K.ofArray(bF);else{bI=new(I.get(bB,bG))();for(var bK in bF)if(function(bL){bI[bL]=bF[bL];return false;}(bK))break;return bI;}}}}else return bE;}bB=by?by.$TYPES:void 0;if(bB===void 0)bz=by;else{for(bC=0,bD=I.length(bB)-1;bC<=bD;bC++)I.set(bB,bC,f.lookup(I.get(bB,bC)));bz=by.$DATA;}return bA(bz);};f.shallowMap=function(by,bz){var bA,bB;if(bz instanceof a.Array)return I.map(by,bz);else if(typeof bz=="object"){bA={};for(var bC in bz)if(function(bD){bA[bD]=by(bz[bD]);return false;}(bC))break;return bA;}else return bz;};f.lookup=function(by){var bz,bA,bB,bC,bD;bB=I.length(by);bz=window;bA=0;while(bA<bB){bC=I.get(by,bA);bD=bz[bC];!bp.Equals(typeof bD,void 0)?(bz=bD,bA=bA+1):x.FailWith("Invalid server reply. Failed to find type: "+bC);}return bz;};g=b.Obj=bs.Class({Equals:function(by){return this===by;},GetHashCode:function(){return -1;}},null,g);g.New=bs.Ctor(function(){},g);i=h.XhrProvider=bs.Class({Sync:function(by,bz,bA){var bB;bB=[null];h.ajax(false,by,bz,bA,function(bC){bB[0]=bC;},function(bC){throw bC;},function(){h.ajax(false,by,bz,bA,function(bC){bB[0]=bC;},function(bC){throw bC;},void 0);});return bB[0];},Async:function(by,bz,bA,bB,bC){h.ajax(true,by,bz,bA,bB,bC,function(){h.ajax(true,by,bz,bA,bB,bC,void 0);});}},g,i);i.New=bs.Ctor(function(){},i);j=h.AjaxRemotingProvider=bs.Class({get_EndPoint:function(){return h.EndPoint();},AsyncBase:function(by,bz){var bA,bB;bA=this;bB=null;return A.Delay(function(){var bC,bD;bC=h.makeHeaders(by);bD=h.makePayload(bz);return A.Bind(A.GetCT(),function(bE){return A.FromContinuations(function(bF,bG,bH){var bI,bJ,bK;function bL(bM){return bI[0]?(bI[0]=false,bH(new Y.New(bE))):null;}bI=[true];bJ=A.Register(bE,function(){bL();});bK=bA.get_EndPoint();return h.AjaxProvider().Async(bK,bC,bD,function(bM){if(bI[0]){bI[0]=false;bJ.Dispose();bF(f.Activate(bt.parse(bM)));}},function(bM){if(bI[0]){bI[0]=false;bJ.Dispose();bG(bM);}});});});});},Send:function(by,bz){A.Start(this.AsyncBase(by,bz),null);},Task:function(by,bz){return A.StartAsTask(this.AsyncBase(by,bz),null);},Async:function(by,bz){return this.AsyncBase(by,bz);},Sync:function(by,bz){var bA,bB,bC;return f.Activate(bt.parse((bA=this.get_EndPoint(),(bB=h.makeHeaders(by),(bC=h.makePayload(bz),h.AjaxProvider().Sync(bA,bB,bC))))));}},g,j);j.New=bs.Ctor(function(){},j);h.ajax=function(by,bz,bA,bB,bC,bD,bE){var bF,bG,bH;bF=new a.XMLHttpRequest();bG=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bF.open("POST",bz,by);if(by==true)bF.withCredentials=true;for(var bJ in bA)bF.setRequestHeader(bJ,bA[bJ]);if(bG)bF.setRequestHeader("x-csrftoken",bG);function bI(){var bK;if(bF.status==200)bC(bF.responseText);else if(bE&&bF.status==403&&bF.responseText=="CSRF")bE();else{bK="Response status is not 200: ";bD(new a.Error(bK+bF.status));}}if("onload"in bF)bF.onload=bF.onerror=bF.onabort=bI;else bF.onreadystatechange=function(){if(bF.readyState==4)bI();};bF.send(bB);};h.makePayload=function(by){return bt.stringify(by);};h.makeHeaders=function(by){return{"content-type":"application/json","x-websharper-rpc":by};};h.AjaxProvider=function(){k.$cctor();return k.AjaxProvider;};h.set_AjaxProvider=function(by){k.$cctor();k.AjaxProvider=by;};h.UseHttps=function(){try{return!bl.StartsWith(a.location.href,"https://")&&(h.set_EndPoint(bl.Replace(a.location.href,"http://","https://")),true);}catch(by){return false;}};h.EndPoint=function(){k.$cctor();return k.EndPoint;};h.set_EndPoint=function(by){k.$cctor();k.EndPoint=by;};k.$cctor=function(){k.$cctor=a.ignore;k.EndPoint="?";k.AjaxProvider=new i.New();};m=l.SingleNode=bs.Class({ReplaceInDom:function(by){this.node.parentNode.replaceChild(this.node,by);}},g,m);m.New=bs.Ctor(function(by){this.node=by;},m);n.hasDocumentAndJQuery=function(){return typeof a.document!=="undefined"&&typeof a.jQuery!=="undefined";};n.Activate=function(){var by;if(n.hasDocumentAndJQuery()){by=a.document.getElementById("websharper-data");by?a.jQuery(a.document).ready(function(){var bz;function bA(bB,bC){if("Body"in bC)bC.Body().ReplaceInDom(a.document.getElementById(bB));}bz=f.Activate(bt.parse(by.getAttribute("content")));I.iter(function(bB){return bA(bB[0],bB[1]);},d.GetFields(bz));return n.set_Instances(bz);}):void 0;}};n.Instances=function(){o.$cctor();return o.Instances;};n.set_Instances=function(by){o.$cctor();o.Instances=by;};n.META_ID=function(){o.$cctor();return o.META_ID;};o.$cctor=function(){o.$cctor=a.ignore;o.META_ID="websharper-data";o.Instances=null;};q=p.EqualityComparer=bs.Class({CGetHashCode0:function(by){return this.GetHashCode$1(by);},CEquals0:function(by,bz){return this.Equals$1(by,bz);},CGetHashCode:function(by){return this.GetHashCode$1(by);},CEquals:function(by,bz){return this.Equals$1(by,bz);}},g,q);q.New=bs.Ctor(function(){},q);s=r.EquatableEqualityComparer=bs.Class({GetHashCode$1:function(by){return bp.Hash(by);},Equals$1:function(by,bz){return by.EEquals(bz);}},q,s);s.New=bs.Ctor(function(){q.New.call(this);},s);t=r.BaseEqualityComparer=bs.Class({GetHashCode$1:function(by){return bp.Hash(by);},Equals$1:function(by,bz){return bp.Equals(by,bz);}},q,t);t.New=bs.Ctor(function(){q.New.call(this);},t);u=p.Comparer=bs.Class({Compare0:function(by,bz){return this.Compare$1(by,bz);},Compare:function(by,bz){return this.Compare$1(by,bz);}},g,u);u.New=bs.Ctor(function(){},u);v=r.ComparableComparer=bs.Class({Compare$1:function(by,bz){return by.CompareTo(bz);}},u,v);v.New=bs.Ctor(function(){u.New.call(this);},v);w=r.BaseComparer=bs.Class({Compare$1:function(by,bz){return bp.Compare(by,bz);}},u,w);w.New=bs.Ctor(function(){u.New.call(this);},w);x.charRange=function(by,bz){var bA,bB;bA=by.charCodeAt();bB=1+bz.charCodeAt()-bA;return bB<=0?[]:J.init(bB,function(bC){return bu.fromCharCode(bC+bA);});};y.op=function(by,bz,bA){return by==null||bz==null?null:bA(by,bz);};y.opL=function(by,bz,bA){return by==null?null:bA(by,bz);};y.opR=function(by,bz,bA){return bz==null?null:bA(by,bz);};y.cmp=function(by,bz,bA){return by==null||bz==null?false:bA(by,bz);};y.cmpE=function(by,bz,bA){return by==null?bz==null:bz==null?false:bA(by,bz);};y.cmpL=function(by,bz,bA){return by==null?false:bA(by,bz);};y.cmpR=function(by,bz,bA){return bz==null?false:bA(by,bz);};y.conv=function(by,bz){return by==null?null:bz(by);};z.prettyPrint=function(by){var bz,bA;function bB(bC,bD){return bC+" = "+z.prettyPrint(bD);}return by===null?"null":(bz=typeof by,bz=="string"?"\""+by+"\"":bz=="object"?by instanceof a.Array?"[|"+bl.concat("; ",I.map(z.prettyPrint,by))+"|]":(bA=bu(by),bA==="[object Object]"?"{"+bl.concat("; ",I.map(function(bC){return bB(bC[0],bC[1]);},d.GetFields(by)))+"}":bA):bu(by));};z.printArray2D=function(by,bz){return bz===null?"null":"[["+bl.concat("][",J.delay(function(){var bA;bA=bz.length?bz[0].length:0;return J.map(function(bB){return bl.concat("; ",J.delay(function(){return J.map(function(bC){return by(I.get2D(bz,bB,bC));},x.range(0,bA-1));}));},x.range(0,bz.length-1));}))+"]]";};z.printArray=function(by,bz){return bz===null?"null":"[|"+bl.concat("; ",I.map(by,bz))+"|]";};z.printList=function(by,bz){return"["+bl.concat("; ",J.map(by,bz))+"]";};z.padNumLeft=function(by,bz){var bA;bA=I.get(by,0);return bA===" "||bA==="+"||bA==="-"?bA+bl.PadLeftWith(by.substr(1),bz-1,"0"):bl.PadLeftWith(by,bz,"0");};z.spaceForPos=function(by,bz){return 0<=by?" "+bz:bz;};z.plusForPos=function(by,bz){return 0<=by?"+"+bz:bz;};z.toSafe=function(by){return by==null?"":by;};B.New=function(by,bz){return{c:by,r:bz};};C.New=function(by,bz){return{k:by,ct:bz};};D=A.Scheduler=bs.Class({tick:function(){var by,bz,bA;bz=this;bA=bv.now();by=true;while(by)if(this.robin.length===0){this.idle=true;by=false;}else{(this.robin.shift())();bv.now()-bA>40?(a.setTimeout(function(){bz.tick();},0),by=false):void 0;}},Fork:function(by){var bz;bz=this;this.robin.push(by);this.idle?(this.idle=false,a.setTimeout(function(){bz.tick();},0)):void 0;}},g,D);D.New=bs.Ctor(function(){this.idle=true;this.robin=[];},D);A.For=function(by,bz){return A.Using(F.Get(by),function(bA){return A.While(function(){return bA.MoveNext();},A.Delay(function(){return bz(bA.Current());}));});};A.While=function(by,bz){return by()?A.Bind(bz,function(){return A.While(by,bz);}):A.Return();};A.Using=function(by,bz){return A.TryFinally(bz(by),function(){by.Dispose();});};A.TryCancelled=function(by,bz){return function(bA){by(C.New(function(bB){if(bB.$==2){bz(bB.$0);bA.k(bB);}else bA.k(bB);},bA.ct));};};A.OnCancel=function(by){return function(bz){bz.k({$:0,$0:A.Register(bz.ct,by)});};};A.StartChild=function(by,bz){return function(bA){var bB,bC,bD,bE;bB=[true];bC=[null];bD=[];bE=bz!=null&&bz.$==1?{$:1,$0:a.setTimeout(function(){var bF;bB[0]=false;bF={$:1,$0:new _4.New()};while(bD.length>0)(bD.shift())(bF);},bz.$0)}:null;A.scheduler().Fork(function(){if(!bA.ct.c)by(C.New(function(bF){if(bB[0]){bC[0]={$:1,$0:bF};bE!=null&&bE.$==1?a.clearTimeout(bE.$0):void 0;while(bD.length>0)(bD.shift())(bF);}},bA.ct));});bA.k({$:0,$0:function(bF){var bG;if(bB[0]){bG=bC[0];bG==null?bD.push(bF.k):bF.k(bG.$0);}else bF.k({$:1,$0:new _4.New()});}});};};A.Parallel=function(by){var bz;bz=I.ofSeq(by);return I.length(bz)===0?A.Return([]):function(bA){var bB,bC,bD;function bE(bF,bG){var bH,bI;bI=bC[0];switch(bI===0?0:bI===1?bG.$==0?1:(bH=[bI,bG],3):bG.$==0?2:(bH=[bI,bG],3)){case 0:return null;break;case 1:I.set(bD,bF,bG.$0);bC[0]=0;return bA.k({$:0,$0:bD});break;case 2:I.set(bD,bF,bG.$0);{bC[0]=bI-1;return;}break;case 3:bC[0]=0;return bA.k(bH[1]);break;}}bB=bz.length;bC=[bB];bD=new a.Array(bB);I.iteri(function(bF,bG){return A.scheduler().Fork(function(){bG(C.New(function(bH){return bE(bF,bH);},bA.ct));});},bz);};};A.Sleep=function(by){return function(bz){var bA,bB;bA=void 0;bB=void 0;bA=a.setTimeout(function(){bB.Dispose();A.scheduler().Fork(function(){bz.k({$:0,$0:null});});},by);bB=A.Register(bz.ct,function(){a.clearTimeout(bA);A.scheduler().Fork(function(){A.cancel(bz);});});};};A.StartAsTask=function(by,bz){var bA;bA=new bo.New();A.StartWithContinuations(by,function(bB){bA.SetResult(bB);},function(bB){bA.SetException$1(bB);},function(){bA.SetCanceled();},bz);return bA.get_Task();};A.AwaitTask1=function(by){return A.FromContinuations(function(bz,bA,bB){by.get_Status()===0?by.Start():void 0;by.ContinueWith$1(function(bC){return bC.get_IsCanceled()?bB(new Y.New(A.noneCT())):bC.get_IsFaulted()?bA(bC.get_Exception()):bz(bC.get_Result());},A.noneCT());});};A.AwaitTask=function(by){return A.FromContinuations(function(bz,bA,bB){by.get_Status()===0?by.Start():void 0;by.ContinueWith$1(function(bC){return bC.get_IsCanceled()?bB(new Y.New(A.noneCT())):bC.get_IsFaulted()?bA(bC.get_Exception()):bz();},A.noneCT());});};A.AwaitEvent=function(by,bz){return function(bA){var bB,bC;bB=void 0;bC=void 0;bB=by.Subscribe(O.observer(function(bD){bB.Dispose();bC.Dispose();A.scheduler().Fork(function(){bA.k({$:0,$0:bD});});}));bC=A.Register(bA.ct,function(){if(bz!=null&&bz.$==1)bz.$0();else{bB.Dispose();A.scheduler().Fork(function(){A.cancel(bA);});}});};};A.StartImmediate=function(by,bz){var bA,bB;bA=(bB=(A.defCTS())[0],bz==null?bB:bz.$0);!bA.c?by(C.New(function(bC){if(bC.$==1)A.UncaughtAsyncError(bC.$0);},bA)):void 0;};A.Start=function(by,bz){var bA,bB;bA=(bB=(A.defCTS())[0],bz==null?bB:bz.$0);A.scheduler().Fork(function(){if(!bA.c)by(C.New(function(bC){if(bC.$==1)A.UncaughtAsyncError(bC.$0);},bA));});};A.UncaughtAsyncError=function(by){bw.log("WebSharper: Uncaught asynchronous exception",by);};A.StartWithContinuations=function(by,bz,bA,bB,bC){var bD,bE;bD=(bE=(A.defCTS())[0],bC==null?bE:bC.$0);!bD.c?by(C.New(function(bF){if(bF.$==1)bA(bF.$0);else if(bF.$==2)bB(bF.$0);else bz(bF.$0);},bD)):void 0;};A.FromContinuations=function(by){return function(bz){var bA;function bB(bC){if(bA[0])x.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bA[0]=true;A.scheduler().Fork(bC);}}bA=[false];by(function(bC){bB(function(){bz.k({$:0,$0:bC});});},function(bC){bB(function(){bz.k({$:1,$0:bC});});},function(bC){bB(function(){bz.k({$:2,$0:bC});});});};};A.GetCT=function(){E.$cctor();return E.GetCT;};A.Catch=function(by){return function(bz){try{by(C.New(function(bA){if(bA.$==0)bz.k({$:0,$0:{$:0,$0:bA.$0}});else if(bA.$==1)bz.k({$:0,$0:{$:1,$0:bA.$0}});else bz.k(bA);},bz.ct));}catch(bA){bz.k({$:0,$0:{$:1,$0:bA}});}};};A.TryWith=function(by,bz){return function(bA){by(C.New(function(bB){if(bB.$==0)bA.k({$:0,$0:bB.$0});else if(bB.$==1)try{(bz(bB.$0))(bA);}catch(bC){bA.k(bB);}else bA.k(bB);},bA.ct));};};A.TryFinally=function(by,bz){return function(bA){by(C.New(function(bB){try{bz();bA.k(bB);}catch(bC){bA.k({$:1,$0:bC});}},bA.ct));};};A.Delay=function(by){return function(bz){try{(by(null))(bz);}catch(bA){bz.k({$:1,$0:bA});}};};A.Combine=function(by,bz){return A.Bind(by,function(){return bz;});};A.Bind=function(by,bz){return A.checkCancel(function(bA){by(C.New(function(bB){var bC;if(bB.$==0){bC=bB.$0;A.scheduler().Fork(function(){try{(bz(bC))(bA);}catch(bD){bA.k({$:1,$0:bD});}});}else A.scheduler().Fork(function(){bA.k(bB);});},bA.ct));});};A.Zero=function(){E.$cctor();return E.Zero;};A.Return=function(by){return function(bz){bz.k({$:0,$0:by});};};A.checkCancel=function(by){return function(bz){if(bz.ct.c)A.cancel(bz);else by(bz);};};A.cancel=function(by){by.k({$:2,$0:new Y.New(by.ct)});};A.defCTS=function(){E.$cctor();return E.defCTS;};A.scheduler=function(){E.$cctor();return E.scheduler;};A.Register=function(by,bz){var bA;return by===A.noneCT()?{Dispose:function(){return null;}}:(bA=by.r.push(bz)-1,{Dispose:function(){return I.set(by.r,bA,a.ignore);}});};A.noneCT=function(){E.$cctor();return E.noneCT;};E.$cctor=function(){E.$cctor=a.ignore;E.noneCT=B.New(false,[]);E.scheduler=new D.New();E.defCTS=[new M.New()];E.Zero=A.Return();E.GetCT=function(by){by.k({$:0,$0:by.ct});};};G=F.T=bs.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},g,G);G.New=bs.Ctor(function(by,bz,bA,bB){this.s=by;this.c=bz;this.n=bA;this.d=bB;},G);F.Get0=function(by){return by instanceof a.Array?F.ArrayEnumerator(by):bp.Equals(typeof by,"string")?F.StringEnumerator(by):"GetEnumerator0"in by?by.GetEnumerator0():by.GetEnumerator();};F.Get=function(by){return by instanceof a.Array?F.ArrayEnumerator(by):bp.Equals(typeof by,"string")?F.StringEnumerator(by):by.GetEnumerator();};F.StringEnumerator=function(by){return new G.New(0,null,function(bz){var bA;bA=bz.s;return bA<by.length&&(bz.c=by[bA],bz.s=bA+1,true);},void 0);};F.ArrayEnumerator=function(by){return new G.New(0,null,function(bz){var bA;bA=bz.s;return bA<I.length(by)&&(bz.c=I.get(by,bA),bz.s=bA+1,true);},void 0);};H.Undefined={$:0};I.splitInto=function(by,bz){var bA,bB,bC,bD,bE,bF,bG,bH,bI;if(by<=0)x.FailWith("Count must be positive");bB=I.length(bz);if(bB===0)return[];else{bC=bp.Compare(by,bB)===-1?by:bB;bD=I.create(bC,null);bE=bB/bC>>0;bA=0;for(bF=0,bG=bB%bC-1;bF<=bG;bF++){bD[bF]=I.sub(bz,bA,bE+1);bA=bA+bE+1;}for(bH=bB%bC,bI=bC-1;bH<=bI;bH++){bD[bH]=I.sub(bz,bA,bE);bA=bA+bE;}return bD;}};I.contains=function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=I.length(bz);while(bA&&bB<bD)if(bp.Equals(bz[bB],by))bA=false;else bB=bB+1;return!bA;};I.tryFindBack=function(by,bz){var bA,bB,bC;bA=null;bB=bz.length-1;while(bB>=0&&bA==null){bC=bz[bB];by(bC)?bA={$:1,$0:bC}:void 0;bB=bB-1;}return bA;};I.tryFindIndexBack=function(by,bz){var bA,bB;bA=null;bB=bz.length-1;while(bB>=0&&bA==null){by(I.get(bz,bB))?bA={$:1,$0:bB}:void 0;bB=bB-1;}return bA;};I.mapFold=function(by,bz,bA){var bB,bC,bD,bE,bF;bC=new a.Array(bA.length);bB=bz;for(bD=0,bE=bA.length-1;bD<=bE;bD++){bF=by(bB,bA[bD]);bC[bD]=bF[0];bB=bF[1];}return[bC,bB];};I.mapFoldBack=function(by,bz,bA){var bB,bC,bD,bE,bF,bG,bH,bI;bD=new a.Array(bz.length);bB=bA;bE=bz.length;for(bF=1,bG=bE;bF<=bG;bF++){bH=bE-bF;bI=by(bz[bH],bB);bD[bH]=bI[0];bB=bI[1];}return[bD,bB];};I.mapInPlace=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)bz[bA]=by(bz[bA]);};I.mapiInPlace=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)bz[bA]=by(bA,bz[bA]);return bz;};I.sortInPlaceByDescending=function(by,bz){I.mapInPlace(function(bA){return bA[0];},I.mapiInPlace(function(bA,bB){return[bB,[by(bB),bA]];},bz).sort(function(bA,bB){return-bp.Compare(bA[1],bB[1]);}));};J.tryHead=function(by){var bz;bz=F.Get(by);try{return bz.MoveNext()?{$:1,$0:bz.Current()}:null;}finally{if("Dispose"in bz)bz.Dispose();}};J.tryItem=function(by,bz){var bA,bB,bC;if(by<0)return null;else{bA=0;bB=F.Get(bz);try{bC=true;while(bC&&bA<=by)if(bB.MoveNext())bA=bA+1;else bC=false;return bC?{$:1,$0:bB.Current()}:null;}finally{if("Dispose"in bB)bB.Dispose();}}};J.tryLast=function(by){var bz,bA;bz=F.Get(by);try{if(bz.MoveNext()){while(bz.MoveNext());bA={$:1,$0:bz.Current()};}else bA=null;return bA;}finally{if("Dispose"in bz)bz.Dispose();}};J.chunkBySize=function(by,bz){by<=0?x.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bA;bA=F.Get(bz);return new G.New(null,null,function(bB){var bC;if(bA.MoveNext()){bC=[bA.Current()];while(I.length(bC)<by&&bA.MoveNext())bC.push(bA.Current());bB.c=bC;return true;}else return false;},function(){bA.Dispose();});}};};I.countBy=function(by,bz){var bA,bB,bC,bD,bE;bA=new V.New$5();bB=[];for(bC=0,bD=I.length(bz)-1;bC<=bD;bC++){bE=by(bz[bC]);bA.ContainsKey(bE)?bA.set_Item(bE,bA.get_Item(bE)+1):(bB.push(bE),bA.Add(bE,1));}I.mapInPlace(function(bF){return[bF,bA.get_Item(bF)];},bB);return bB;};J.except=function(by,bz){return{GetEnumerator:function(){var bA,bB;bA=F.Get(bz);bB=new _.New$2(by);return new G.New(null,null,function(bC){var bD,bE;if(bA.MoveNext()){bD=bA.Current();bE=bB.Add(bD);while(!bE&&bA.MoveNext()){bD=bA.Current();bE=bB.Add(bD);}return bE&&(bC.c=bD,true);}else return false;},function(){bA.Dispose();});}};};K.skip=function(by,bz){var bA,bB,bC;bA=bz;for(bB=1,bC=by;bB<=bC;bB++)if(bA.$==0)x.FailWith("Input list too short.");else bA=bA.$1;return bA;};I.groupBy=function(by,bz){var bA,bB,bC,bD,bE,bF;bA=new V.New$5();bB=[];for(bC=0,bD=I.length(bz)-1;bC<=bD;bC++){bE=bz[bC];bF=by(bE);bA.ContainsKey(bF)?bA.get_Item(bF).push(bE):(bB.push(bF),bA.Add(bF,[bE]));}I.mapInPlace(function(bG){return[bG,bA.get_Item(bG)];},bB);return bB;};J.insufficient=function(){return x.FailWith("The input sequence has an insufficient number of elements.");};J.last=function(by){var bz,bA;bz=F.Get(by);try{if(!bz.MoveNext())bA=J.insufficient();else{while(bz.MoveNext());bA=bz.Current();}return bA;}finally{if("Dispose"in bz)bz.Dispose();}};J.contains=function(by,bz){var bA,bB;bA=F.Get(bz);try{bB=false;while(!bB&&bA.MoveNext())bB=bp.Equals(bA.Current(),by);return bB;}finally{if("Dispose"in bA)bA.Dispose();}};K.skipWhile=function(by,bz){var bA;bA=bz;while(!(bA.$==0)&&by(K.head(bA)))bA=K.tail(bA);return bA;};J.nonNegative=function(){return x.FailWith("The input must be non-negative.");};I.checkBounds=function(by,bz){if(bz<0||bz>=by.length)x.FailWith("Index was outside the bounds of the array.");};I.checkBounds2D=function(by,bz,bA){if(bz<0||bA<0||bz>=by.length||bA>=(by.length?by[0].length:0))throw new X.New();};I.checkRange=function(by,bz,bA){if(bA<0||bz<0||by.length<bz+bA)x.FailWith("Index was outside the bounds of the array.");};I.set=function(by,bz,bA){I.checkBounds(by,bz);by[bz]=bA;};I.get=function(by,bz){I.checkBounds(by,bz);return by[bz];};I.sub=function(by,bz,bA){I.checkRange(by,bz,bA);return by.slice(bz,bz+bA);};I.setSub=function(by,bz,bA,bB){var bC,bD;for(bC=0,bD=bA-1;bC<=bD;bC++)I.set(by,bz+bC,I.get(bB,bC));};I.get2D=function(by,bz,bA){I.checkBounds2D(by,bz,bA);return by[bz][bA];};I.set2D=function(by,bz,bA,bB){I.checkBounds2D(by,bz,bA);by[bz][bA]=bB;};I.zeroCreate2D=function(by,bz){var bA;bA=I.init(by,function(){return I.create(bz,null);});bA.dims=2;return bA;};I.sub2D=function(by,bz,bA,bB,bC){var bD,bE,bF,bG,bH,bI,bJ;bD=bB<0?0:bB;bE=bC<0?0:bC;bF=I.zeroCreate2D(bD,bE);for(bG=0,bH=bD-1;bG<=bH;bG++){for(bI=0,bJ=bE-1;bI<=bJ;bI++)I.set2D(bF,bG,bI,I.get2D(by,bz+bG,bA+bI));}return bF;};I.setSub2D=function(by,bz,bA,bB,bC,bD){var bE,bF,bG,bH;for(bE=0,bF=bB-1;bE<=bF;bE++){for(bG=0,bH=bC-1;bG<=bH;bG++)I.set2D(by,bz+bE,bA+bG,I.get2D(bD,bE,bG));}};I.length=function(by){return by.dims===2?by.length*by.length:by.length;};b.checkThis=function(by){return bp.Equals(by,null)?x.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):by;};I.binarySearch=function(by,bz,bA,bB){var bC,bD,bE,bF;bC=bA;bD=bB-1;if(bA<0)throw new _0.New("index","Non-negative number required.");else null;if(bB>I.length(by))throw new Z.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bB<bA)throw new _0.New("length","Non-negative number required.");else null;while(true)if(bC>bD)return~bC;else{bE=(bC+bD)/2>>0;bF=bz(I.get(by,bE));if(bC===bD)return bF===0?bC:bF>0?~(bC+1):~bC;else if(bF<=0)bD=bE;else bC=bE+1;}};I.binarySearchComparer=function(by){return by.CompareTo0?function(bz){return by.CompareTo0(bz);}:function(bz){if(bz.CompareTo0)return-bz.CompareTo0(by);else throw new _2.New$2("Failed to compare two elements in the array.",new Z.New$2("At least one object must implement IComparable."));};};I.sortInternal=function(by,bz,bA,bB,bC){function bD(bF,bG){var bH,bI,bJ,bK;bI=by[bG];bH=bF-1;for(bJ=bF,bK=bG-1;bJ<=bK;bJ++)if(bB(by[bJ],bI)<0){bH=bH+1;bC(bH,bJ);}bB(by[bG],by[bH+1])<0?bC(bH+1,bG):void 0;return bH+1;}function bE(bF,bG){var bH;return bF<bG?(bH=bD(bF,bG),(bE(bF,bH-1),bE(bH+1,bG))):null;}bE(bz,bz+bA-1);};I.sortSub=function(by,bz,bA,bB){I.sortInternal(by,bz,bA,bB,function(bC,bD){var bE;bE=by[bC];by[bC]=by[bD];by[bD]=bE;});};I.sortByKeys=function(by,bz,bA,bB,bC){I.sortInternal(by,bA,bB,bC,function(bD,bE){var bF,bG;bF=by[bD];by[bD]=by[bE];by[bE]=bF;bG=bz[bD];bz[bD]=bz[bE];bz[bE]=bG;});};I.clear=function(by,bz,bA){var bB,bC;if(by==null)throw new _1.New$1(by);else void 0;if(bz<0||bA<0||bz+bA>I.length(by))throw new X.New();else void 0;for(bB=bz,bC=bz+bA-1;bB<=bC;bB++)I.set(by,bB,typeof I.get(by,bB)=="number"?0:null);};I.constrainedCopy=function(by,bz,bA,bB,bC){if(by===bA&&bB<=bz+bC)I.blit(I.init(bC,function(bD){return I.get(by,bz+bD);}),0,bA,bB,bC);else I.blit(by,bz,bA,bB,bC);};I.findIndexBound=function(by,bz,bA,bB){var bC,bD;bC=bz+bA;bD=bz;if(by==null)throw new _1.New$1("array");else null;if(bB==null)throw new _1.New$1("match");else null;if(bz<0)throw new _0.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bA<0||bz+bA>I.length(by))throw new _0.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bD===bC)return -1;else if(bB(I.get(by,bD)))return bD;else bD=bD+1;};I.findLastIndexBound=function(by,bz,bA,bB){var bC;bC=bz+bA-1;if(by==null)throw new _1.New$1("array");else null;if(bB==null)throw new _1.New$1("match");else null;if(bz<0)throw new _0.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bA<0||bz+bA>I.length(by))throw new _0.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bC<bz)return -1;else if(bB(I.get(by,bC)))return bC;else bC=bC-1;};I.reverse=function(by,bz,bA){var bB;bB=I.sub(by,bz,bA).slice().reverse();I.blit(bB,0,by,bz,I.length(bB));};I.sum=function(by){var bz,bA;bz=0;bA=0;for(;bA<by.length;bA++)bz+=by[bA];return bz;};I.sumBy=function(by,bz){var bA,bB;bA=0;bB=0;for(;bB<bz.length;bB++)bA+=by(bz[bB]);return bA;};I.allPairs=function(by,bz){var bA,bB,bC,bD,bE,bF,bG;bA=by.length;bB=bz.length;bC=new a.Array(bA*bB);for(bD=0,bE=bA-1;bD<=bE;bD++){for(bF=0,bG=bB-1;bF<=bG;bF++)bC[bD*bB+bF]=[by[bD],bz[bF]];}return bC;};I.average=function(by){return a.Number(I.sum(by))/by.length;};I.averageBy=function(by,bz){return a.Number(I.sumBy(by,bz))/bz.length;};I.blit=function(by,bz,bA,bB,bC){var bD,bE;I.checkRange(by,bz,bC);I.checkRange(bA,bB,bC);for(bD=0,bE=bC-1;bD<=bE;bD++)bA[bB+bD]=by[bz+bD];};I.choose=function(by,bz){var bA,bB,bC,bD;bA=[];for(bB=0,bC=bz.length-1;bB<=bC;bB++){bD=by(bz[bB]);bD==null?void 0:bA.push(bD.$0);}return bA;};I.collect=function(by,bz){return a.Array.prototype.concat.apply([],I.map(by,bz));};I.concat=function(by){return a.Array.prototype.concat.apply([],I.ofSeq(by));};I.create=function(by,bz){var bA,bB,bC;bA=new a.Array(by);for(bB=0,bC=by-1;bB<=bC;bB++)bA[bB]=bz;return bA;};I.exists=function(by,bz){var bA,bB,bC,bD;bA=false;bB=0;bD=I.length(bz);while(!bA&&bB<bD)if(by(bz[bB]))bA=true;else bB=bB+1;return bA;};I.exists2=function(by,bz,bA){var bB,bC,bD,bE;I.checkLength(bz,bA);bB=false;bC=0;bE=I.length(bz);while(!bB&&bC<bE)if(by(bz[bC],bA[bC]))bB=true;else bC=bC+1;return bB;};I.fill=function(by,bz,bA,bB){var bC,bD;I.checkRange(by,bz,bA);for(bC=bz,bD=bz+bA-1;bC<=bD;bC++)by[bC]=bB;};I.filter=function(by,bz){var bA,bB,bC;bA=[];for(bB=0,bC=bz.length-1;bB<=bC;bB++)if(by(bz[bB]))bA.push(bz[bB]);return bA;};I.find=function(by,bz){var bA;bA=I.tryFind(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};I.findIndex=function(by,bz){var bA;bA=I.tryFindIndex(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};I.fold=function(by,bz,bA){var bB,bC,bD;bB=bz;for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB=by(bB,bA[bC]);return bB;};I.fold2=function(by,bz,bA,bB){var bC,bD,bE;I.checkLength(bA,bB);bC=bz;for(bD=0,bE=bA.length-1;bD<=bE;bD++)bC=by(bC,bA[bD],bB[bD]);return bC;};I.foldBack=function(by,bz,bA){var bB,bC,bD,bE,bF;bB=bA;bD=bz.length;for(bE=1,bF=bD;bE<=bF;bE++)bB=by(bz[bD-bE],bB);return bB;};I.foldBack2=function(by,bz,bA,bB){var bC,bD,bE,bF,bG;I.checkLength(bz,bA);bE=bz.length;bD=bB;for(bF=1,bG=bE;bF<=bG;bF++)bD=by(bz[bE-bF],bA[bE-bF],bD);return bD;};I.forall=function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=I.length(bz);while(bA&&bB<bD)if(by(bz[bB]))bB=bB+1;else bA=false;return bA;};I.forall2=function(by,bz,bA){var bB,bC,bD,bE;I.checkLength(bz,bA);bB=true;bC=0;bE=I.length(bz);while(bB&&bC<bE)if(by(bz[bC],bA[bC]))bC=bC+1;else bB=false;return bB;};I.init=function(by,bz){var bA,bB,bC;by<0?x.FailWith("Negative size given."):null;bA=new a.Array(by);for(bB=0,bC=by-1;bB<=bC;bB++)bA[bB]=bz(bB);return bA;};I.iter=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)by(bz[bA]);};I.iter2=function(by,bz,bA){var bB,bC;I.checkLength(bz,bA);for(bB=0,bC=bz.length-1;bB<=bC;bB++)by(bz[bB],bA[bB]);};I.iteri=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)by(bA,bz[bA]);};I.iteri2=function(by,bz,bA){var bB,bC;I.checkLength(bz,bA);for(bB=0,bC=bz.length-1;bB<=bC;bB++)by(bB,bz[bB],bA[bB]);};I.map=function(by,bz){var bA,bB,bC;bA=new a.Array(bz.length);for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[bB]=by(bz[bB]);return bA;};I.map2=function(by,bz,bA){var bB,bC,bD;I.checkLength(bz,bA);bB=new a.Array(bA.length);for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB[bC]=by(bz[bC],bA[bC]);return bB;};I.mapi=function(by,bz){var bA,bB,bC;bA=new a.Array(bz.length);for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[bB]=by(bB,bz[bB]);return bA;};I.mapi2=function(by,bz,bA){var bB,bC,bD;I.checkLength(bz,bA);bB=new a.Array(bz.length);for(bC=0,bD=bz.length-1;bC<=bD;bC++)bB[bC]=by(bC,bz[bC],bA[bC]);return bB;};I.max=function(by){var bz,bA,bB,bC;I.nonEmpty(by);bz=by[0];for(bA=1,bB=by.length-1;bA<=bB;bA++){bC=by[bA];bp.Compare(bC,bz)===1?bz=bC:void 0;}return bz;};I.maxBy=function(by,bz){var bA,bB,bC,bD,bE,bF;I.nonEmpty(bz);bA=bz[0];bB=by(bA);for(bC=1,bD=bz.length-1;bC<=bD;bC++){bE=bz[bC];bF=by(bE);bp.Compare(bF,bB)===1?(bA=bE,bB=bF):void 0;}return bA;};I.min=function(by){var bz,bA,bB,bC;I.nonEmpty(by);bz=by[0];for(bA=1,bB=by.length-1;bA<=bB;bA++){bC=by[bA];bp.Compare(bC,bz)===-1?bz=bC:void 0;}return bz;};I.minBy=function(by,bz){var bA,bB,bC,bD,bE,bF;I.nonEmpty(bz);bA=bz[0];bB=by(bA);for(bC=1,bD=bz.length-1;bC<=bD;bC++){bE=bz[bC];bF=by(bE);bp.Compare(bF,bB)===-1?(bA=bE,bB=bF):void 0;}return bA;};I.ofList=function(by){var bz,bA;bA=[];bz=by;while(!(bz.$==0)){bA.push(K.head(bz));bz=K.tail(bz);}return bA;};I.ofSeq=function(by){var bz,bA;if(by instanceof a.Array)return by.slice();else if(by instanceof bc)return I.ofList(by);else{bz=[];bA=F.Get(by);try{while(bA.MoveNext())bz.push(bA.Current());return bz;}finally{if("Dispose"in bA)bA.Dispose();}}};I.partition=function(by,bz){var bA,bB,bC,bD;bA=[];bB=[];for(bC=0,bD=bz.length-1;bC<=bD;bC++)if(by(bz[bC]))bA.push(bz[bC]);else bB.push(bz[bC]);return[bA,bB];};I.permute=function(by,bz){var bA,bB,bC;bA=new a.Array(bz.length);for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[by(bB)]=bz[bB];return bA;};I.pick=function(by,bz){var bA;bA=I.tryPick(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};I.reduce=function(by,bz){var bA,bB,bC;I.nonEmpty(bz);bA=bz[0];for(bB=1,bC=bz.length-1;bB<=bC;bB++)bA=by(bA,bz[bB]);return bA;};I.reduceBack=function(by,bz){var bA,bB,bC,bD,bE;I.nonEmpty(bz);bC=bz.length;bB=bz[bC-1];for(bD=2,bE=bC;bD<=bE;bD++)bB=by(bz[bC-bD],bB);return bB;};I.scan=function(by,bz,bA){var bB,bC,bD;bB=new a.Array(1+bA.length);bB[0]=bz;for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB[bC+1]=by(bB[bC],bA[bC]);return bB;};I.scanBack=function(by,bz,bA){var bB,bC,bD,bE;bB=bz.length;bC=new a.Array(1+bB);bC[bB]=bA;for(bD=0,bE=bB-1;bD<=bE;bD++)bC[bB-bD-1]=by(bz[bB-bD-1],bC[bB-bD]);return bC;};I.sort=function(by){return I.map(function(bz){return bz[0];},I.mapi(function(bz,bA){return[bA,bz];},by).sort(bp.Compare));};I.sortBy=function(by,bz){return I.map(function(bA){return bA[0];},I.mapi(function(bA,bB){return[bB,[by(bB),bA]];},bz).sort(function(bA,bB){return bp.Compare(bA[1],bB[1]);}));};I.sortInPlace=function(by){I.mapInPlace(function(bz){return bz[0];},I.mapiInPlace(function(bz,bA){return[bA,bz];},by).sort(bp.Compare));};I.sortInPlaceBy=function(by,bz){I.mapInPlace(function(bA){return bA[0];},I.mapiInPlace(function(bA,bB){return[bB,[by(bB),bA]];},bz).sort(function(bA,bB){return bp.Compare(bA[1],bB[1]);}));};I.sortInPlaceWith=function(by,bz){bz.sort(by);};I.sortWith=function(by,bz){return bz.slice().sort(by);};I.sortByDescending=function(by,bz){return I.map(function(bA){return bA[0];},I.mapi(function(bA,bB){return[bB,[by(bB),bA]];},bz).sort(function(bA,bB){return-bp.Compare(bA[1],bB[1]);}));};I.sortDescending=function(by){return I.map(function(bz){return bz[0];},I.mapi(function(bz,bA){return[bA,bz];},by).sort(function(bz,bA){return-bp.Compare(bz,bA);}));};I.tryFind=function(by,bz){var bA,bB;bA=null;bB=0;while(bB<bz.length&&bA==null){by(bz[bB])?bA={$:1,$0:bz[bB]}:void 0;bB=bB+1;}return bA;};I.tryFindIndex=function(by,bz){var bA,bB;bA=null;bB=0;while(bB<bz.length&&bA==null){by(bz[bB])?bA={$:1,$0:bB}:void 0;bB=bB+1;}return bA;};I.tryHead=function(by){return by.length===0?null:{$:1,$0:by[0]};};I.tryItem=function(by,bz){return bz.length<=by||by<0?null:{$:1,$0:bz[by]};};I.tryLast=function(by){var bz;bz=by.length;return bz===0?null:{$:1,$0:by[bz-1]};};I.tryPick=function(by,bz){var bA,bB,bC;bA=null;bB=0;while(bB<bz.length&&bA==null){bC=by(bz[bB]);bC!=null&&bC.$==1?bA=bC:void 0;bB=bB+1;}return bA;};I.unzip=function(by){var bz,bA,bB,bC,bD;bz=[];bA=[];for(bB=0,bC=by.length-1;bB<=bC;bB++){bD=by[bB];bz.push(bD[0]);bA.push(bD[1]);}return[bz,bA];};I.unzip3=function(by){var bz,bA,bB,bC,bD,bE;bz=[];bA=[];bB=[];for(bC=0,bD=by.length-1;bC<=bD;bC++){bE=by[bC];bz.push(bE[0]);bA.push(bE[1]);bB.push(bE[2]);}return[bz,bA,bB];};I.zip=function(by,bz){var bA,bB,bC;I.checkLength(by,bz);bA=I.create(by.length,null);for(bB=0,bC=by.length-1;bB<=bC;bB++)bA[bB]=[by[bB],bz[bB]];return bA;};I.zip3=function(by,bz,bA){var bB,bC,bD;I.checkLength(by,bz);I.checkLength(bz,bA);bB=I.create(by.length,null);for(bC=0,bD=by.length-1;bC<=bD;bC++)bB[bC]=[by[bC],bz[bC],bA[bC]];return bB;};I.chunkBySize=function(by,bz){return I.ofSeq(J.chunkBySize(by,bz));};I.compareWith=function(by,bz,bA){return J.compareWith(by,bz,bA);};I.distinct=function(by){return I.ofSeq(J.distinct(by));};I.distinctBy=function(by,bz){return I.ofSeq(J.distinctBy(by,bz));};I.except=function(by,bz){return I.ofSeq(J.except(by,bz));};I.findBack=function(by,bz){var bA;bA=I.tryFindBack(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};I.findIndexBack=function(by,bz){var bA;bA=I.tryFindIndexBack(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};I.head=function(by){I.nonEmpty(by);return by[0];};I.last=function(by){I.nonEmpty(by);return by[by.length-1];};I.map3=function(by,bz,bA,bB){var bC,bD,bE;I.checkLength(bz,bA);I.checkLength(bz,bB);bC=new a.Array(bB.length);for(bD=0,bE=bB.length-1;bD<=bE;bD++)bC[bD]=by(bz[bD],bA[bD],bB[bD]);return bC;};I.pairwise=function(by){return I.ofSeq(J.pairwise(by));};I.replicate=function(by,bz){return I.create(by,bz);};I.indexed=function(by){return I.mapi(function(bz,bA){return[bz,bA];},by);};I.skip=function(by,bz){return by<0?J.nonNegative():by>bz.length?J.insufficient():bz.slice(by);};I.skipWhile=function(by,bz){var bA,bB;bB=bz.length;bA=0;while(bA<bB&&by(bz[bA]))bA=bA+1;return bz.slice(bA);};I.tail=function(by){return I.skip(1,by);};I.take=function(by,bz){return by<0?J.nonNegative():by>bz.length?J.insufficient():bz.slice(0,by);};I.takeWhile=function(by,bz){var bA,bB;bB=bz.length;bA=0;while(bA<bB&&by(bz[bA]))bA=bA+1;return bz.slice(0,bA);};I.exactlyOne=function(by){return by.length===1?by[0]:x.FailWith("The input does not have precisely one element.");};I.unfold=function(by,bz){return I.ofSeq(J.unfold(by,bz));};I.windowed=function(by,bz){return I.ofSeq(J.windowed(by,bz));};I.splitAt=function(by,bz){return[I.take(by,bz),I.skip(by,bz)];};I.nonEmpty=function(by){if(by.length===0)x.FailWith("The input array was empty.");};I.checkLength=function(by,bz){if(by.length!==bz.length)x.FailWith("The arrays have different lengths.");};L.init=function(by,bz,bA){var bB,bC,bD,bE,bF;bB=I.zeroCreate2D(by,bz);for(bC=0,bD=by-1;bC<=bD;bC++){for(bE=0,bF=bz-1;bE<=bF;bE++)I.set2D(bB,bC,bE,bA(bC,bE));}return bB;};L.iter=function(by,bz){var bA,bB,bC,bD,bE,bF;bA=bz.length;bB=bz.length?bz[0].length:0;for(bC=0,bD=bA-1;bC<=bD;bC++){for(bE=0,bF=bB-1;bE<=bF;bE++)by(I.get2D(bz,bC,bE));}};L.iteri=function(by,bz){var bA,bB,bC,bD,bE,bF;bA=bz.length;bB=bz.length?bz[0].length:0;for(bC=0,bD=bA-1;bC<=bD;bC++){for(bE=0,bF=bB-1;bE<=bF;bE++)by(bC,bE,I.get2D(bz,bC,bE));}};L.map=function(by,bz){return L.init(bz.length,bz.length?bz[0].length:0,function(bA,bB){return by(I.get2D(bz,bA,bB));});};L.mapi=function(by,bz){return L.init(bz.length,bz.length?bz[0].length:0,function(bA,bB){return by(bA,bB,I.get2D(bz,bA,bB));});};L.copy=function(by){return L.init(by.length,by.length?by[0].length:0,function(bz,bA){return I.get2D(by,bz,bA);});};M=b.CancellationTokenSource=bs.Class({CancelAfter:function(by){var bz,bA;bz=this;!this.c?(bA=this.pending,bA==null?void 0:a.clearTimeout(bA.$0),this.pending={$:1,$0:a.setTimeout(function(){bz.Cancel$1();},by)}):void 0;},Cancel:function(by){if(!by)this.Cancel$1();else if(!this.c){this.c=true;I.iter(function(bz){bz();},this.r);}},Cancel$1:function(){var by;if(!this.c){this.c=true;by=I.choose(function(bz){try{bz();return null;}catch(bA){return{$:1,$0:bA};}},this.r);if(I.length(by)>0)throw new _3.New$3(by);else void 0;}}},g,M);M.CreateLinkedTokenSource=function(by,bz){return M.CreateLinkedTokenSource$1([by,bz]);};M.CreateLinkedTokenSource$1=function(by){var bz;bz=new M.New();I.iter(function(bA){function bB(bC){return bz.Cancel$1();}A.Register(bA,function(){bB();});},by);return bz;};M.New=bs.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},M);N.IsWhiteSpace=function(by){return by.match(new a.RegExp("\\s"))!==null;};N.Parse=function(by){return by.length===1?by:x.FailWith("String must be exactly one character long.");};N.IsUpper=function(by){return by>="A"&&by<="Z";};N.IsLower=function(by){return by>="a"&&by<="z";};N.IsLetterOrDigit=function(by){return N.IsLetter(by)||N.IsDigit(by);};N.IsLetter=function(by){return by>="A"&&by<="Z"||by>="a"&&by<="z";};N.IsDigit=function(by){return by>="0"&&by<="9";};N.IsControl=function(by){return by>="\u0000"&&by<="\u001f"||by>="\u0080"&&by<="\u009f";};N.GetNumericValue=function(by){return by>="0"&&by<="9"?by.charCodeAt()-"0".charCodeAt():-1;};O.observer=function(by){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:by};};P.LongTime=function(by){return(new bv(by)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};P.ShortTime=function(by){return(new bv(by)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};P.LongDate=function(by){return(new bv(by)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};P.Parse=function(by){var bz;bz=P.TryParse(by);return bz!=null&&bz.$==1?bz.$0:x.FailWith("Failed to parse date string.");};P.TryParse=function(by){var bz;bz=bv.parse(by);return a.isNaN(bz)?null:{$:1,$0:bz};};P.AddMonths=function(by,bz){var bA;bA=new bv(by);return(new bv(bA.getFullYear(),bA.getMonth()+bz,bA.getDate(),bA.getHours(),bA.getMinutes(),bA.getSeconds(),bA.getMilliseconds())).getTime();};P.AddYears=function(by,bz){var bA;bA=new bv(by);return(new bv(bA.getFullYear()+bz,bA.getMonth(),bA.getDate(),bA.getHours(),bA.getMinutes(),bA.getSeconds(),bA.getMilliseconds())).getTime();};P.TimePortion=function(by){var bz;bz=new bv(by);return(((24*0+bz.getHours())*60+bz.getMinutes())*60+bz.getSeconds())*1000+bz.getMilliseconds();};P.DatePortion=function(by){var bz;bz=new bv(by);return(new bv(bz.getFullYear(),bz.getMonth(),bz.getDate())).getTime();};Q.get_Now=function(){var by;by=new bv();return{d:by.getTime(),o:-by.getTimezoneOffset()};};Q.get_DateTime=function(by){return by.d;};R.InvocationList=function(by){return by.$Invokes||[by];};R.RemoveAll=function(by,bz){var bA;bA=R.InvocationList(by);I.length(R.InvocationList(bz))>1?x.FailWith("TODO: Remove multicast delegates"):void 0;return bs.CreateDelegate(I.filter(function(bB){return!bp.Equals(bB,bz);},bA));};R.Remove=function(by,bz){var bA,bB,bC,bD,bE,bF,bG;bC=R.InvocationList(by);if(I.length(R.InvocationList(bz))>1)x.FailWith("TODO: Remove multicast delegates");bD=[];bB=false;for(bE=I.length(bC)-1,bF=0;bE>=bF;bE--){bG=I.get(bC,bE);!bB&&bs.DelegateEqual(bG,bz)?bB=true:bD.unshift(bG);}return bs.CreateDelegate(bD);};R.DelegateTarget=function(by){var bz;return!by?null:"$Target"in by?by.$Target:"$Invokes"in by?(bz=by.$Invokes,(I.get(bz,I.length(bz)-1))[1]):null;};S.getHashCode=function(by,bz){return by.CGetHashCode(bz);};S.equals=function(by){return function(bz,bA){return by.CEquals(bz,bA);};};S.alreadyAdded=function(){return x.FailWith("An item with the same key has already been added.");};S.notPresent=function(){return x.FailWith("The given key was not present in the dictionary.");};T=p.KeyCollection=bs.Class({GetEnumerator$1:function(){return F.Get(J.map(function(by){return by.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},g,T);T.New=bs.Ctor(function(by){this.d=by;},T);U=p.ValueCollection=bs.Class({GetEnumerator$1:function(){return F.Get(J.map(function(by){return by.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},g,U);U.New=bs.Ctor(function(by){this.d=by;},U);V=p.Dictionary=bs.Class({remove:function(by){var bz,bA,bB,bC;bz=this;bA=this.hash(by);bB=this.data[bA];return bB&&(bC=I.filter(function(bD){return!bz.equals.apply(null,[(x.KeyValue(bD))[0],by]);},bB),I.length(bC)<bB.length&&(this.count=this.count-1,this.data[bA]=bC,true));},add:function(by,bz){var bA,bB,bC;bA=this;bB=this.hash(by);bC=this.data[bB];bC?(I.exists(function(bD){return bA.equals.apply(null,[(x.KeyValue(bD))[0],by]);},bC)?S.alreadyAdded():void 0,this.count=this.count+1,bC.push({K:by,V:bz})):(this.count=this.count+1,this.data[bB]=new a.Array({K:by,V:bz}));},set:function(by,bz){var bA,bB,bC,bD;bA=this;bB=this.hash(by);bC=this.data[bB];bC?(bD=I.tryFindIndex(function(bE){return bA.equals.apply(null,[(x.KeyValue(bE))[0],by]);},bC),bD==null?(this.count=this.count+1,bC.push({K:by,V:bz})):bC[bD.$0]={K:by,V:bz}):(this.count=this.count+1,this.data[bB]=new a.Array({K:by,V:bz}));},get:function(by){var bz,bA;bz=this;bA=this.data[this.hash(by)];return bA?I.pick(function(bB){var bC;bC=x.KeyValue(bB);return bz.equals.apply(null,[bC[0],by])?{$:1,$0:bC[1]}:null;},bA):S.notPresent();},get_Keys:function(){return new T.New(this);},get_Values:function(){return new U.New(this);},TryGetValue:function(by,bz){var bA,bB,bC;bA=this;bB=this.data[this.hash(by)];return bB&&(bC=I.tryPick(function(bD){var bE;bE=x.KeyValue(bD);return bA.equals.apply(null,[bE[0],by])?{$:1,$0:bE[1]}:null;},bB),bC!=null&&bC.$==1&&(bz.set(bC.$0),true));},Remove:function(by){return this.remove(by);},GetEnumerator$1:function(){return F.Get0(this);},set_Item:function(by,bz){this.set(by,bz);},get_Item:function(by){return this.get(by);},ContainsKey:function(by){var bz,bA;bz=this;bA=this.data[this.hash(by)];return bA&&I.exists(function(bB){return bz.equals.apply(null,[(x.KeyValue(bB))[0],by]);},bA);},Clear:function(){this.data=[];this.count=0;},Add:function(by,bz){this.add(by,bz);},GetEnumerator:function(){return F.Get0(this);},GetEnumerator0:function(){return F.Get0(I.concat(d.GetFieldValues(this.data)));}},g,V);V.New=bs.Ctor(function(by,bz){V.New$6.call(this,by,S.equals(bz),function(bA){return S.getHashCode(bz,bA);});},V);V.New$1=bs.Ctor(function(by){V.New$6.call(this,by,bp.Equals,bp.Hash);},V);V.New$2=bs.Ctor(function(by,bz){V.New$3.call(this,bz);},V);V.New$3=bs.Ctor(function(by){V.New$6.call(this,[],S.equals(by),function(bz){return S.getHashCode(by,bz);});},V);V.New$4=bs.Ctor(function(by){V.New$5.call(this);},V);V.New$5=bs.Ctor(function(){V.New$6.call(this,[],bp.Equals,bp.Hash);},V);V.New$6=bs.Ctor(function(by,bz,bA){var bB,bC;this.equals=bz;this.hash=bA;this.count=0;this.data=[];bB=F.Get(by);try{while(bB.MoveNext()){bC=bB.Current();this.set(bC.K,bC.V);}}finally{if("Dispose"in bB)bB.Dispose();}},V);W=b.MatchFailureException=bs.Class({},null,W);W.New=bs.Ctor(function(by,bz,bA){this.message=by+" at "+bu(bz)+":"+bu(bA);},W);X=b.IndexOutOfRangeException=bs.Class({},null,X);X.New=bs.Ctor(function(){X.New$1.call(this,"Index was outside the bounds of the array.");},X);X.New$1=bs.Ctor(function(by){this.message=by;},X);Y=b.OperationCanceledException=bs.Class({},null,Y);Y.New=bs.Ctor(function(by){Y.New$1.call(this,"The operation was canceled.",null,by);},Y);Y.New$1=bs.Ctor(function(by,bz,bA){this.message=by;this.inner=bz;this.ct=bA;},Y);Z=b.ArgumentException=bs.Class({},null,Z);Z.New=bs.Ctor(function(by,bz){Z.New$2.call(this,bz+"\nParameter name: "+by);},Z);Z.New$1=bs.Ctor(function(){Z.New$2.call(this,"Value does not fall within the expected range.");},Z);Z.New$2=bs.Ctor(function(by){this.message=by;},Z);_0=b.ArgumentOutOfRangeException=bs.Class({},null,_0);_0.New=bs.Ctor(function(by,bz){this.message=bz+"\nParameter name: "+by;},_0);_0.New$1=bs.Ctor(function(by){_0.New.call(this,by,"Specified argument was out of the range of valid values.");},_0);_0.New$2=bs.Ctor(function(){this.message="Specified argument was out of the range of valid values.";},_0);_1=b.ArgumentNullException=bs.Class({},null,_1);_1.New=bs.Ctor(function(by,bz){this.message=bz+"\nParameter name: "+by;},_1);_1.New$1=bs.Ctor(function(by){_1.New.call(this,by,"Value cannot be null.");},_1);_1.New$2=bs.Ctor(function(){this.message="Value cannot be null.";},_1);_2=b.InvalidOperationException=bs.Class({},null,_2);_2.New=bs.Ctor(function(by){_2.New$2.call(this,by,null);},_2);_2.New$1=bs.Ctor(function(){_2.New.call(this,"Operation is not valid due to the current state of the object.");},_2);_2.New$2=bs.Ctor(function(by,bz){this.message=by;this.inner=bz;},_2);_3=b.AggregateException=bs.Class({},null,_3);_3.New=bs.Ctor(function(by,bz){_3.New$4.call(this,by,[bz]);},_3);_3.New$1=bs.Ctor(function(by,bz){_3.New$4.call(this,by,I.ofSeq(bz));},_3);_3.New$2=bs.Ctor(function(by){_3.New$4.call(this,"One or more errors occurred.",I.ofSeq(by));},_3);_3.New$3=bs.Ctor(function(by){_3.New$4.call(this,"One or more errors occurred.",by);},_3);_3.New$4=bs.Ctor(function(by,bz){this.message=by;this.innerExceptions=bz;},_3);_4=b.TimeoutException=bs.Class({},null,_4);_4.New=bs.Ctor(function(){_4.New$1.call(this,"The operation has timed out.");},_4);_4.New$1=bs.Ctor(function(by){this.message=by;},_4);_5=b.FormatException=bs.Class({},null,_5);_5.New=bs.Ctor(function(){_5.New$1.call(this,"One of the identified items was in an invalid format.");},_5);_5.New$1=bs.Ctor(function(by){this.message=by;},_5);_6=b.OverflowException=bs.Class({},null,_6);_6.New=bs.Ctor(function(){_6.New$1.call(this,"Arithmetic operation resulted in an overflow.");},_6);_6.New$1=bs.Ctor(function(by){this.message=by;},_6);I.create2D=function(by){var bz;bz=I.ofSeq(J.map(I.ofSeq,by));bz.dims=2;return bz;};_8.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(by){var bz,bA;bz=bx.random()*16|0;bA=by=="x"?bz:bz&3|8;return bA.toString(16);});};_8.TryParseExact=function(by,bz,bA){try{bA.set(_8.ParseExact(by,bz));return true;}catch(bB){return false;}};_8.TryParse=function(by,bz){try{bz.set(_8.Parse(by));return true;}catch(bA){return false;}};_8.ParseExact=function(by,bz){var bA,bB,bC,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;function bD(bO){var bP,bQ,bR,bS;for(bP=0,bQ=35;bP<=bQ;bP++){bP===8||(bP===13||(bP===18||bP===23))?bO[bP]!=="-"?_8.ShapeError():void 0:(bS=bO[bP],!("0"<=bS&&bS<="9"||"a"<=bS&&bS<="f")?_8.ShapeError():void 0);}return bO;}bE=bz.toUpperCase();if(bE==="N"){bF=bl.Trim(by).toLowerCase();if(bF.length!==32)_8.ShapeError();for(bG=0,bH=31;bG<=bH;bG++){bI=bF[bG];!("0"<=bI&&bI<="9"||"a"<=bI&&bI<="f")?_8.ShapeError():void 0;}return bl.Substring(bF,0,8)+"-"+bl.Substring(bF,8,4)+"-"+bl.Substring(bF,12,4)+"-"+bl.Substring(bF,16,4)+"-"+bF.substring(20);}else if(bE==="D"){bA=bl.Trim(by).toLowerCase();bA.length!==36?_8.ShapeError():void 0;return bD(bA);}else if(bE==="B"){bB=bl.Trim(by).toLowerCase();bB.length!==38||bB[0]!=="{"||bB[17]!=="}"?_8.ShapeError():void 0;return bD(bl.Substring(bB,1,36));}else if(bE==="P"){bC=bl.Trim(by).toLowerCase();bC.length!==38||bC[0]!=="("||bC[17]!==")"?_8.ShapeError():void 0;return bD(bl.Substring(bC,1,36));}else if(bE==="X"){bJ=bl.Trim(by).toLowerCase();if(bJ.length!==68)_8.ShapeError();for(bK=0,bL=67;bK<=bL;bK++){switch(bK){case 26:case 0:if(bJ[bK]!=="{")_8.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bJ[bK]!=="0")_8.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bJ[bK]!=="x")_8.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bJ[bK]!==",")_8.ShapeError();break;case 67:case 66:if(bJ[bK]!=="{")_8.ShapeError();break;default:bN=bJ[bK];!("0"<=bN&&bN<="9"||"a"<=bN&&bN<="f")?_8.ShapeError():void 0;break;}}return bl.Substring(bJ,3,8)+"-"+bl.Substring(bJ,14,4)+"-"+bl.Substring(bJ,21,4)+"-"+bl.Substring(bJ,29,2)+bl.Substring(bJ,34,2)+"-"+bl.Substring(bJ,39,2)+bl.Substring(bJ,44,2)+bl.Substring(bJ,49,2)+bl.Substring(bJ,54,2)+bl.Substring(bJ,59,2)+bl.Substring(bJ,64,2);}else return _8.FormatError();};_8.Parse=function(by){var bz,bA,bB;try{return _8.ParseExact(by,"D");}catch(bC){try{bz=_8.ParseExact(by,"B");}catch(bD){try{bA=_8.ParseExact(by,"P");}catch(bE){try{bB=_8.ParseExact(by,"N");}catch(bF){bB=_8.ParseExact(by,"X");}bA=bB;}bz=bA;}return bz;}};_8.ToString=function(by,bz){var bA;bA=bz.toUpperCase();return bA==="N"?bl.Replace(by,"-",""):bA==="D"?by:bA==="B"?"{"+by+"}":bA==="P"?"("+by+")":bA==="X"?"{0x"+bl.Substring(by,0,8)+",0x"+bl.Substring(by,9,4)+",0x"+bl.Substring(by,14,4)+",{0x"+bl.Substring(by,19,2)+",0x"+bl.Substring(by,21,2)+",0x"+bl.Substring(by,24,2)+",0x"+bl.Substring(by,26,2)+",0x"+bl.Substring(by,28,2)+",0x"+bl.Substring(by,30,2)+",0x"+bl.Substring(by,32,2)+",0x"+bl.Substring(by,34,2)+"}}":_8.FormatError();};_8.ParseError=function(){throw new _5.New$1("Unrecognized Guid format.");};_8.ShapeError=function(){throw new _5.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_8.HexaError=function(){throw new _5.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};_8.FormatError=function(){throw new _5.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_9.concat=function(by){var bz,bA;bz=[];for(var bB in by)bz.push.apply(bz,by[bB]);return bz;};_=p.HashSet=bs.Class({add:function(by){var bz,bA;bz=this.hash(by);bA=this.data[bz];return bA==null?(this.data[bz]=[by],this.count=this.count+1,true):this.arrContains(by,bA)?false:(bA.push(by),this.count=this.count+1,true);},arrRemove:function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=bz.length;while(bA&&bB<bD)if(this.equals.apply(null,[bz[bB],by])){bz.splice.apply(bz,[bB,1]);bA=false;}else bB=bB+1;return!bA;},arrContains:function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=bz.length;while(bA&&bB<bD)if(this.equals.apply(null,[bz[bB],by]))bA=false;else bB=bB+1;return!bA;},UnionWith:function(by){var bz;bz=F.Get(by);try{while(bz.MoveNext())this.Add(bz.Current());}finally{if("Dispose"in bz)bz.Dispose();}},SymmetricExceptWith:function(by){var bz,bA;bz=F.Get(by);try{while(bz.MoveNext()){bA=bz.Current();this.Contains(bA)?this.Remove(bA):this.Add(bA);}}finally{if("Dispose"in bz)bz.Dispose();}},SetEquals:function(by){var bz;bz=new _.New$4(by,this.equals,this.hash);return this.get_Count()===bz.get_Count()&&this.IsSupersetOf(bz);},RemoveWhere:function(by){var bz,bA,bB,bC,bD;bA=_9.concat(this.data);bz=0;for(bB=0,bC=bA.length-1;bB<=bC;bB++){bD=bA[bB];by(bD)?this.Remove(bD)?bz=bz+1:void 0:void 0;}return bz;},Remove:function(by){var bz;bz=this.data[this.hash(by)];return bz==null?false:this.arrRemove(by,bz)&&(this.count=this.count-1,true);},Overlaps:function(by){var bz;bz=this;return J.exists(function(bA){return bz.Contains(bA);},by);},IsSupersetOf:function(by){var bz;bz=this;return J.forall(function(bA){return bz.Contains(bA);},by);},IsSubsetOf:function(by){var bz;bz=new _.New$4(by,this.equals,this.hash);return I.forall(function(bA){return bz.Contains(bA);},_9.concat(this.data));},IsProperSupersetOf:function(by){var bz;bz=I.ofSeq(by);return this.count>I.length(bz)&&this.IsSupersetOf(bz);},IsProperSubsetOf:function(by){var bz;bz=I.ofSeq(by);return this.count<I.length(bz)&&this.IsSubsetOf(bz);},IntersectWith:function(by){var bz,bA,bB,bC,bD;bz=new _.New$4(by,this.equals,this.hash);bA=_9.concat(this.data);for(bB=0,bC=bA.length-1;bB<=bC;bB++){bD=bA[bB];!bz.Contains(bD)?this.Remove(bD):void 0;}},ExceptWith:function(by){var bz;bz=F.Get(by);try{while(bz.MoveNext())this.Remove(bz.Current());}finally{if("Dispose"in bz)bz.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(by){var bz,bA,bB,bC;bz=0;bA=_9.concat(this.data);for(bB=0,bC=bA.length-1;bB<=bC;bB++)I.set(by,bB,bA[bB]);},Contains:function(by){var bz;bz=this.data[this.hash(by)];return bz==null?false:this.arrContains(by,bz);},Clear:function(){this.data=[];this.count=0;},Add:function(by){return this.add(by);},GetEnumerator:function(){return F.Get(_9.concat(this.data));},GetEnumerator0:function(){return F.Get(_9.concat(this.data));}},g,_);_.New=bs.Ctor(function(by,bz){_.New$4.call(this,by,S.equals(bz),function(bA){return S.getHashCode(bz,bA);});},_);_.New$1=bs.Ctor(function(by){_.New$4.call(this,[],S.equals(by),function(bz){return S.getHashCode(by,bz);});},_);_.New$2=bs.Ctor(function(by){_.New$4.call(this,by,bp.Equals,bp.Hash);},_);_.New$3=bs.Ctor(function(){_.New$4.call(this,[],bp.Equals,bp.Hash);},_);_.New$4=bs.Ctor(function(by,bz,bA){var bB;this.equals=bz;this.hash=bA;this.data=[];this.count=0;bB=F.Get(by);try{while(bB.MoveNext())this.add(bB.Current());}finally{if("Dispose"in bB)bB.Dispose();}},_);ba.New=function(by,bz,bA){return{c:by,v:bz,f:bA};};bb.Force=function(by){return by.f();};bb.CreateFromValue=function(by){return ba.New(true,by,bb.cachedLazy);};bb.Create=function(by){return ba.New(false,by,bb.forceLazy);};bb.forceLazy=function(){var by;by=this.v();this.c=true;this.v=by;this.f=bb.cachedLazy;return by;};bb.cachedLazy=function(){return this.v;};bc=K.T=bs.Class({GetSlice:function(by,bz){var bA;return by!=null&&by.$==1?bz!=null&&bz.$==1?(bA=by.$0,K.ofSeq(J.take(bz.$0-bA+1,K.skip(bA,this)))):K.skip(by.$0,this):bz!=null&&bz.$==1?K.ofSeq(J.take(bz.$0+1,this)):this;},get_Item:function(by){return J.nth(by,this);},get_Length:function(){return K.length(this);},GetEnumerator:function(){return new G.New(this,null,function(by){var bz;bz=by.s;return bz.$==0?false:(by.c=bz.$0,by.s=bz.$1,true);},void 0);},GetEnumerator0:function(){return F.Get(this);}},null,bc);bc.Empty=new bc({$:0});K.allPairs=function(by,bz){return K.ofArray(I.allPairs(I.ofList(by),I.ofList(bz)));};K.append=function(by,bz){var bA,bB,bC,bD,bE;if(by.$==0)return bz;else if(bz.$==0)return by;else{bD=new bc({$:1});bA=bD;bB=by;bC=true;while(bC){bA.$0=bB.$0;bB=bB.$1;bB.$==0?bC=false:bA=(bE=new bc({$:1}),bA.$1=bE,bE);}bA.$1=bz;return bD;}};K.choose=function(by,bz){return K.ofSeq(J.choose(by,bz));};K.collect=function(by,bz){return K.ofSeq(J.collect(by,bz));};K.concat=function(by){return K.ofSeq(J.concat(by));};K.exists=function(by,bz){var bA,bB;bA=false;bB=bz;while(!bA&&bB.$==1){bA=by(bB.$0);bB=bB.$1;}return bA;};K.exists2=function(by,bz,bA){var bB,bC,bD;bB=false;bC=bz;bD=bA;while(!bB&&bC.$==1&&bD.$==1){bB=by(bC.$0,bD.$0);bC=bC.$1;bD=bD.$1;}!bB&&(bC.$==1||bD.$==1)?K.badLengths():void 0;return bB;};K.filter=function(by,bz){return K.ofSeq(J.filter(by,bz));};K.fold2=function(by,bz,bA,bB){return I.fold2(by,bz,I.ofList(bA),I.ofList(bB));};K.foldBack=function(by,bz,bA){return I.foldBack(by,I.ofList(bz),bA);};K.foldBack2=function(by,bz,bA,bB){return I.foldBack2(by,I.ofList(bz),I.ofList(bA),bB);};K.forAll=function(by,bz){var bA,bB;bA=true;bB=bz;while(bA&&bB.$==1){bA=by(bB.$0);bB=bB.$1;}return bA;};K.forall2=function(by,bz,bA){var bB,bC,bD;bB=true;bC=bz;bD=bA;while(bB&&bC.$==1&&bD.$==1){bB=by(bC.$0,bD.$0);bC=bC.$1;bD=bD.$1;}bB&&(bC.$==1||bD.$==1)?K.badLengths():void 0;return bB;};K.head=function(by){return by.$==1?by.$0:K.listEmpty();};K.init=function(by,bz){return K.ofArray(I.init(by,bz));};K.iter=function(by,bz){var bA;bA=bz;while(bA.$==1){by(K.head(bA));bA=K.tail(bA);}};K.iter2=function(by,bz,bA){var bB,bC;bB=bz;bC=bA;while(bB.$==1){bC.$==0?K.badLengths():void 0;by(K.head(bB),K.head(bC));bB=K.tail(bB);bC=K.tail(bC);}bC.$==1?K.badLengths():void 0;};K.iteri=function(by,bz){var bA,bB;bA=bz;bB=0;while(bA.$==1){by(bB,K.head(bA));bA=K.tail(bA);bB=bB+1;}};K.iteri2=function(by,bz,bA){var bB,bC,bD;bB=bz;bC=bA;bD=0;while(bB.$==1){bC.$==0?K.badLengths():void 0;by(bD,K.head(bB),K.head(bC));bB=K.tail(bB);bC=K.tail(bC);bD=bD+1;}bC.$==1?K.badLengths():void 0;};K.length=function(by){var bz,bA;bz=by;bA=0;while(bz.$==1){bz=K.tail(bz);bA=bA+1;}return bA;};K.map=function(by,bz){var bA,bB,bC,bD,bE;if(bz.$==0)return bz;else{bD=new bc({$:1});bA=bD;bB=bz;bC=true;while(bC){bA.$0=by(bB.$0);bB=bB.$1;bB.$==0?bC=false:bA=(bE=new bc({$:1}),bA.$1=bE,bE);}bA.$1=bc.Empty;return bD;}};K.map2=function(by,bz,bA){var bB,bC,bD,bE,bF,bG;bB=bz.$==1&&bA.$==1;if(!bB)return bz.$==1||bA.$==1?K.badLengths():bz;else{bF=new bc({$:1});bC=bF;bD=bz;bE=bA;while(bB){bC.$0=by(bD.$0,bE.$0);bD=bD.$1;bE=bE.$1;bD.$==1&&bE.$==1?bC=(bG=new bc({$:1}),bC.$1=bG,bG):bB=false;}if(bD.$==1||bE.$==1)K.badLengths();bC.$1=bc.Empty;return bF;}};K.map3=function(by,bz,bA,bB){var bC,bD,bE,bF,bG,bH,bI;bC=bz.$==1&&bA.$==1&&bB.$==1;if(!bC)return bz.$==1||bA.$==1||bB.$==1?K.badLengths():bz;else{bH=new bc({$:1});bD=bH;bE=bz;bF=bA;bG=bB;while(bC){bD.$0=by(bE.$0,bF.$0,bG.$0);bE=bE.$1;bF=bF.$1;bG=bG.$1;bE.$==1&&bF.$==1&&bG.$==1?bD=(bI=new bc({$:1}),bD.$1=bI,bI):bC=false;}if(bE.$==1||bF.$==1||bG.$==1)K.badLengths();bD.$1=bc.Empty;return bH;}};K.mapi=function(by,bz){var bA,bB,bC,bD,bE,bF;if(bz.$==0)return bz;else{bE=new bc({$:1});bA=bE;bB=bz;bC=0;bD=true;while(bD){bA.$0=by(bC,bB.$0);bB=bB.$1;bB.$==0?bD=false:(bA=(bF=new bc({$:1}),bA.$1=bF,bF),bC=bC+1);}bA.$1=bc.Empty;return bE;}};K.mapi2=function(by,bz,bA){var bB,bC,bD,bE,bF,bG,bH;bB=bz.$==1&&bA.$==1;if(!bB)return bz.$==1||bA.$==1?K.badLengths():bz;else{bG=new bc({$:1});bC=bG;bD=bz;bE=bA;bF=0;while(bB){bC.$0=by(bF,bD.$0,bE.$0);bD=bD.$1;bE=bE.$1;bD.$==1&&bE.$==1?(bC=(bH=new bc({$:1}),bC.$1=bH,bH),bF=bF+1):bB=false;}if(bD.$==1||bE.$==1)K.badLengths();bC.$1=bc.Empty;return bG;}};K.max=function(by){var bz,bA,bB;K.nonEmpty(by);bz=by.$0;bA=by.$1;while(bA.$==1){bB=bA.$0;bp.Compare(bB,bz)===1?bz=bB:void 0;bA=bA.$1;}return bz;};K.maxBy=function(by,bz){var bA,bB,bC,bD,bE;K.nonEmpty(bz);bA=bz.$0;bB=by(bA);bC=bz.$1;while(bC.$==1){bD=bC.$0;bE=by(bD);bp.Compare(bE,bB)===1?(bA=bD,bB=bE):void 0;bC=bC.$1;}return bA;};K.min=function(by){var bz,bA,bB;K.nonEmpty(by);bz=by.$0;bA=by.$1;while(bA.$==1){bB=bA.$0;bp.Compare(bB,bz)===-1?bz=bB:void 0;bA=bA.$1;}return bz;};K.minBy=function(by,bz){var bA,bB,bC,bD,bE;K.nonEmpty(bz);bA=bz.$0;bB=by(bA);bC=bz.$1;while(bC.$==1){bD=bC.$0;bE=by(bD);bp.Compare(bE,bB)===-1?(bA=bD,bB=bE):void 0;bC=bC.$1;}return bA;};K.ofArray=function(by){var bz,bA,bB;bz=bc.Empty;for(bA=I.length(by)-1,bB=0;bA>=bB;bA--)bz=new bc({$:1,$0:I.get(by,bA),$1:bz});return bz;};K.ofSeq=function(by){var bz,bA,bB,bC,bD,bE;if(by instanceof bc)return by;else if(by instanceof a.Array)return K.ofArray(by);else{bz=F.Get(by);try{bB=bz.MoveNext();if(!bB)bA=bc.Empty;else{bD=new bc({$:1});bC=bD;while(bB){bC.$0=bz.Current();bz.MoveNext()?bC=(bE=new bc({$:1}),bC.$1=bE,bE):bB=false;}bC.$1=bc.Empty;bA=bD;}return bA;}finally{if("Dispose"in bz)bz.Dispose();}}};K.partition=function(by,bz){var bA;bA=I.partition(by,I.ofList(bz));return[K.ofArray(bA[0]),K.ofArray(bA[1])];};K.permute=function(by,bz){return K.ofArray(I.permute(by,I.ofList(bz)));};K.reduce=function(by,bz){var bA,bB;K.nonEmpty(bz);bA=bz.$0;bB=bz.$1;while(bB.$==1){bA=by(bA,bB.$0);bB=bB.$1;}return bA;};K.reduceBack=function(by,bz){return I.reduceBack(by,I.ofList(bz));};K.replicate=function(by,bz){return K.ofArray(I.create(by,bz));};K.rev=function(by){var bz,bA;bz=bc.Empty;bA=by;while(bA.$==1){bz=new bc({$:1,$0:bA.$0,$1:bz});bA=bA.$1;}return bz;};K.scan=function(by,bz,bA){return K.ofSeq(J.scan(by,bz,bA));};K.scanBack=function(by,bz,bA){return K.ofArray(I.scanBack(by,I.ofList(bz),bA));};K.sort=function(by){var bz;bz=I.ofList(by);I.sortInPlace(bz);return K.ofArray(bz);};K.sortBy=function(by,bz){var bA;bA=I.ofList(bz);I.sortInPlaceBy(by,bA);return K.ofArray(bA);};K.sortByDescending=function(by,bz){var bA;bA=I.ofList(bz);I.sortInPlaceByDescending(by,bA);return K.ofArray(bA);};K.sortDescending=function(by){var bz;bz=I.ofList(by);I.sortInPlaceByDescending(a.id,bz);return K.ofArray(bz);};K.sortWith=function(by,bz){var bA;bA=I.ofList(bz);I.sortInPlaceWith(by,bA);return K.ofArray(bA);};K.tail=function(by){return by.$==1?by.$1:K.listEmpty();};K.unzip=function(by){var bz,bA,bB,bC;bz=[];bA=[];bB=F.Get(by);try{while(bB.MoveNext()){bC=bB.Current();bz.push(bC[0]);bA.push(bC[1]);}}finally{if("Dispose"in bB)bB.Dispose();}return[K.ofArray(bz.slice(0)),K.ofArray(bA.slice(0))];};K.unzip3=function(by){var bz,bA,bB,bC,bD;bz=[];bA=[];bB=[];bC=F.Get(by);try{while(bC.MoveNext()){bD=bC.Current();bz.push(bD[0]);bA.push(bD[1]);bB.push(bD[2]);}}finally{if("Dispose"in bC)bC.Dispose();}return[K.ofArray(bz.slice(0)),K.ofArray(bA.slice(0)),K.ofArray(bB.slice(0))];};K.zip=function(by,bz){return K.map2(function(bA,bB){return[bA,bB];},by,bz);};K.zip3=function(by,bz,bA){return K.map3(function(bB,bC,bD){return[bB,bC,bD];},by,bz,bA);};K.chunkBySize=function(by,bz){return K.map(K.ofArray,K.ofSeq(J.chunkBySize(by,bz)));};K.compareWith=function(by,bz,bA){return J.compareWith(by,bz,bA);};K.countBy=function(by,bz){return K.ofArray(I.countBy(by,I.ofList(bz)));};K.distinct=function(by){return K.ofSeq(J.distinct(by));};K.distinctBy=function(by,bz){return K.ofSeq(J.distinctBy(by,bz));};K.splitInto=function(by,bz){return K.map(K.ofArray,K.ofArray(I.splitInto(by,I.ofList(bz))));};K.except=function(by,bz){return K.ofSeq(J.except(by,bz));};K.tryFindBack=function(by,bz){return I.tryFindBack(by,I.ofList(bz));};K.findBack=function(by,bz){var bA;bA=K.tryFindBack(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};K.findIndexBack=function(by,bz){var bA;bA=I.tryFindIndexBack(by,I.ofList(bz));return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};K.groupBy=function(by,bz){var bA;function bB(bC,bD){return[bC,K.ofArray(bD)];}bA=I.groupBy(by,I.ofList(bz));I.mapInPlace(function(bC){return bB(bC[0],bC[1]);},bA);return K.ofArray(bA);};K.last=function(by){var bz,bA;K.nonEmpty(by);bz=by;bA=bz.$1;while(bA.$==1){bz=bA;bA=bz.$1;}return bz.$0;};K.contains=function(by,bz){var bA,bB;bA=false;bB=bz;while(!bA&&bB.$==1){bA=bp.Equals(by,bB.$0);bB=bB.$1;}return bA;};K.mapFold=function(by,bz,bA){var bB;bB=I.mapFold(by,bz,I.ofList(bA));return[K.ofArray(bB[0]),bB[1]];};K.mapFoldBack=function(by,bz,bA){var bB;bB=I.mapFoldBack(by,I.ofList(bz),bA);return[K.ofArray(bB[0]),bB[1]];};K.pairwise=function(by){return K.ofSeq(J.pairwise(by));};K.indexed=function(by){return K.mapi(function(bz,bA){return[bz,bA];},by);};K.tryHead=function(by){return by.$==0?null:{$:1,$0:by.$0};};K.exactlyOne=function(by){var bz;return by.$==1&&(by.$1.$==0&&(bz=by.$0,true))?bz:x.FailWith("The input does not have precisely one element.");};K.unfold=function(by,bz){return K.ofSeq(J.unfold(by,bz));};K.windowed=function(by,bz){return K.ofSeq(J.map(K.ofArray,J.windowed(by,bz)));};K.splitAt=function(by,bz){return[K.ofSeq(J.take(by,bz)),K.skip(by,bz)];};K.nonEmpty=function(by){if(by.$==0)K.listEmpty();};K.listEmpty=function(){return x.FailWith("The input list was empty.");};K.badLengths=function(){return x.FailWith("The lists have different lengths.");};y.getOrValue=function(by,bz){return by==null?bz:by;};y.get=function(by){return by==null?x.FailWith("Nullable object must have a value."):by;};x.range=function(by,bz){var bA;bA=1+bz-by;return bA<=0?[]:J.init(bA,function(bB){return bB+by;});};x.step=function(by,bz,bA){var bB;bB=x.Sign(bz);return J.takeWhile(function(bC){return bB*(bA-bC)>=0;},J.initInfinite(function(bC){return by+bC*bz;}));};x.KeyValue=function(by){return[by.K,by.V];};x.Truncate=function(by){return by<0?bx.ceil(by):bx.floor(by);};x.Sign=function(by){return by===0?0:by<0?-1:1;};x.Pown=function(by,bz){function bA(bB){var bC;return bB===1?by:bB%2===0?(bC=bA(bB/2>>0),bC*bC):by*bA(bB-1);}return bA(bz);};x.InvalidArg=function(by,bz){throw new Z.New(by,bz);};x.InvalidOp=function(by){throw new _2.New(by);};x.FailWith=function(by){throw a.Error(by);};bd.string=function(by,bz,bA){return bz==null?bA!=null&&bA.$==1?by.slice(0,bA.$0+1):"":bA==null?by.slice(bz.$0):by.slice(bz.$0,bA.$0+1);};bd.array=function(by,bz,bA){return bz==null?bA!=null&&bA.$==1?by.slice(0,bA.$0+1):[]:bA==null?by.slice(bz.$0):by.slice(bz.$0,bA.$0+1);};bd.setArray=function(by,bz,bA,bB){var bC;bC=bz!=null&&bz.$==1?bz.$0:0;I.setSub(by,bC,(bA!=null&&bA.$==1?bA.$0:by.length-1)-bC+1,bB);};bd.array2D=function(by,bz,bA,bB,bC){var bD,bE;bD=bz!=null&&bz.$==1?bz.$0:0;bE=bB!=null&&bB.$==1?bB.$0:0;return I.sub2D(by,bD,bE,(bA!=null&&bA.$==1?bA.$0:by.length-1)-bD+1,(bC!=null&&bC.$==1?bC.$0:(by.length?by[0].length:0)-1)-bE+1);};bd.array2Dfix1=function(by,bz,bA,bB){var bC,bD,bE,bF,bG,bH;bC=bA!=null&&bA.$==1?bA.$0:0;bD=bB!=null&&bB.$==1?bB.$0:(by.length?by[0].length:0)-1;bE=bD-bC+1;bF=new a.Array(bE);for(bG=0,bH=bE-1;bG<=bH;bG++)I.set(bF,bG,I.get2D(by,bz,bC+bG));return bF;};bd.array2Dfix2=function(by,bz,bA,bB){var bC,bD,bE,bF,bG,bH;bC=bz!=null&&bz.$==1?bz.$0:0;bD=bA!=null&&bA.$==1?bA.$0:by.length-1;bE=bD-bC+1;bF=new a.Array(bE);for(bG=0,bH=bE-1;bG<=bH;bG++)I.set(bF,bG,I.get2D(by,bC+bG,bB));return bF;};bd.setArray2Dfix1=function(by,bz,bA,bB,bC){var bD,bE,bF,bG;bD=bA!=null&&bA.$==1?bA.$0:0;bE=bB!=null&&bB.$==1?bB.$0:(by.length?by[0].length:0)-1;for(bF=0,bG=bE-bD+1-1;bF<=bG;bF++)I.set2D(by,bz,bD+bF,I.get(bC,bF));};bd.setArray2Dfix2=function(by,bz,bA,bB,bC){var bD,bE,bF,bG;bD=bz!=null&&bz.$==1?bz.$0:0;bE=bA!=null&&bA.$==1?bA.$0:by.length-1;for(bF=0,bG=bE-bD+1-1;bF<=bG;bF++)I.set2D(by,bD+bF,bB,I.get(bC,bF));};bd.setArray2D=function(by,bz,bA,bB,bC,bD){var bE,bF;bE=bz!=null&&bz.$==1?bz.$0:0;bF=bB!=null&&bB.$==1?bB.$0:0;I.setSub2D(by,bE,bF,(bA!=null&&bA.$==1?bA.$0:by.length-1)-bE+1,(bC!=null&&bC.$==1?bC.$0:(by.length?by[0].length:0)-1)-bF+1,bD);};be.filter=function(by,bz){var bA;return bz!=null&&bz.$==1&&(by(bz.$0)&&(bA=bz.$0,true))?bz:null;};be.fold=function(by,bz,bA){return bA==null?bz:by(bz,bA.$0);};be.foldBack=function(by,bz,bA){return bz==null?bA:by(bz.$0,bA);};be.ofNullable=function(by){return by==null?null:{$:1,$0:y.get(by)};};be.ofObj=function(by){return by==null?null:{$:1,$0:by};};be.toArray=function(by){return by==null?[]:[by.$0];};be.toList=function(by){return by==null?bc.Empty:K.ofArray([by.$0]);};be.toNullable=function(by){return by!=null&&by.$==1?by.$0:null;};be.toObj=function(by){return by==null?null:by.$0;};bf.CopyTo=function(by,bz,bA){I.blit(by,0,bz,bA,I.length(by));};bf.Contains=function(by,bz){return J.exists(function(bA){return bp.Equals(bz,bA);},by);};bf.Clear=function(by){by.splice(0,I.length(by));};bg=b.Random=bs.Class({NextBytes:function(by){var bz,bA;for(bz=0,bA=I.length(by)-1;bz<=bA;bz++)I.set(by,bz,bx.floor(bx.random()*256));},Next:function(by,bz){return by>bz?x.FailWith("'minValue' cannot be greater than maxValue."):by+bx.floor(bx.random()*(bz-by));},Next$1:function(by){return by<0?x.FailWith("'maxValue' must be greater than zero."):bx.floor(bx.random()*by);},Next$2:function(){return bx.floor(bx.random()*2147483648);}},g,bg);bg.New=bs.Ctor(function(){},bg);bh.New=function(by){return[by];};bi.MapError=function(by,bz){return bz.$==1?{$:1,$0:by(bz.$0)}:{$:0,$0:bz.$0};};bi.Map=function(by,bz){return bz.$==1?{$:1,$0:bz.$0}:{$:0,$0:by(bz.$0)};};bi.Bind=function(by,bz){return bz.$==1?{$:1,$0:bz.$0}:by(bz.$0);};J.enumFinally=function(by,bz){return{GetEnumerator:function(){var bA;try{bA=F.Get(by);}catch(bB){bz();throw bB;}return new G.New(null,null,function(bC){return bA.MoveNext()&&(bC.c=bA.Current(),true);},function(){bA.Dispose();bz();});}};};J.enumUsing=function(by,bz){return{GetEnumerator:function(){var bA;try{bA=F.Get(bz(by));}catch(bB){by.Dispose();throw bB;}return new G.New(null,null,function(bC){return bA.MoveNext()&&(bC.c=bA.Current(),true);},function(){bA.Dispose();by.Dispose();});}};};J.enumWhile=function(by,bz){return{GetEnumerator:function(){return new G.New(null,null,function(bA){var bB;while(true){bB=bA.s;if(bp.Equals(bB,null)){if(by()){bA.s=F.Get(bz);bA=bA;}else return false;}else if(bB.MoveNext()){bA.c=bB.Current();return true;}else{bB.Dispose();bA.s=null;bA=bA;}}},function(bA){var bB;bB=bA.s;!bp.Equals(bB,null)?bB.Dispose():void 0;});}};};bj.createEvent=function(by,bz,bA){return{AddHandler:by,RemoveHandler:bz,Subscribe:function(bB){var bC;bC=bA(function(){return function(bD){return bB.OnNext(bD);};});by(bC);return{Dispose:function(){return bz(bC);}};}};};J.allPairs=function(by,bz){var bA;bA=J.cache(bz);return J.collect(function(bB){return J.map(function(bC){return[bB,bC];},bA);},by);};J.append=function(by,bz){return{GetEnumerator:function(){var bA,bB;bA=F.Get(by);bB=[true];return new G.New(bA,null,function(bC){var bD;return bC.s.MoveNext()?(bC.c=bC.s.Current(),true):(bD=bC.s,!bp.Equals(bD,null)?bD.Dispose():void 0,bC.s=null,bB[0]&&(bB[0]=false,bC.s=F.Get(bz),bC.s.MoveNext()?(bC.c=bC.s.Current(),true):(bC.s.Dispose(),bC.s=null,false)));},function(bC){var bD;bD=bC.s;!bp.Equals(bD,null)?bD.Dispose():void 0;});}};};J.average=function(by){var bz,bA;bz=J.fold(function(bB,bC){return(function(bD){var bE,bF;bE=bD[0];bF=bD[1];return function(bG){return[bE+1,bF+bG];};}(bB))(bC);},[0,0],by);bA=bz[0];return bA===0?J.seqEmpty():bz[1]/bA;};J.averageBy=function(by,bz){var bA,bB;bA=J.fold(function(bC,bD){return(function(bE){var bF,bG;bF=bE[0];bG=bE[1];return function(bH){return[bF+1,bG+by(bH)];};}(bC))(bD);},[0,0],bz);bB=bA[0];return bB===0?J.seqEmpty():bA[1]/bB;};J.cache=function(by){var bz,bA;bz=[];bA=[F.Get(by)];return{GetEnumerator:function(){return new G.New(0,null,function(bB){var bC;return bB.s<bz.length?(bB.c=bz[bB.s],bB.s=bB.s+1,true):(bC=bA[0],bp.Equals(bC,null)?false:bC.MoveNext()?(bB.s=bB.s+1,bB.c=bC.Current(),bz.push(bB.c),true):(bC.Dispose(),bA[0]=null,false));},void 0);}};};J.choose=function(by,bz){return J.collect(function(bA){var bB;bB=by(bA);return bB==null?bc.Empty:K.ofArray([bB.$0]);},bz);};J.collect=function(by,bz){return J.concat(J.map(by,bz));};J.compareWith=function(by,bz,bA){var bB,bC,bD,bE,bF;bB=F.Get(bz);try{bD=F.Get(bA);try{bE=0;bF=true;while(bF&&bE===0)if(bB.MoveNext())bE=bD.MoveNext()?by(bB.Current(),bD.Current()):1;else if(bD.MoveNext())bE=-1;else bF=false;bC=bE;}finally{if("Dispose"in bD)bD.Dispose();}return bC;}finally{if("Dispose"in bB)bB.Dispose();}};J.concat=function(by){return{GetEnumerator:function(){var bz;bz=F.Get(by);return new G.New(null,null,function(bA){var bB;while(true){bB=bA.s;if(bp.Equals(bB,null)){if(bz.MoveNext()){bA.s=F.Get(bz.Current());bA=bA;}else{bz.Dispose();return false;}}else if(bB.MoveNext()){bA.c=bB.Current();return true;}else{bA.Dispose();bA.s=null;bA=bA;}}},function(bA){var bB;bB=bA.s;!bp.Equals(bB,null)?bB.Dispose():void 0;!bp.Equals(bz,null)?bz.Dispose():void 0;});}};};J.countBy=function(by,bz){return J.delay(function(){return I.countBy(by,I.ofSeq(bz));});};J.delay=function(by){return{GetEnumerator:function(){return F.Get(by());}};};J.distinct=function(by){return J.distinctBy(a.id,by);};J.distinctBy=function(by,bz){return{GetEnumerator:function(){var bA,bB;bA=F.Get(bz);bB=new _.New$3();return new G.New(null,null,function(bC){var bD,bE;if(bA.MoveNext()){bD=bA.Current();bE=bB.Add(by(bD));while(!bE&&bA.MoveNext()){bD=bA.Current();bE=bB.Add(by(bD));}return bE&&(bC.c=bD,true);}else return false;},function(){bA.Dispose();});}};};J.splitInto=function(by,bz){by<=0?x.FailWith("Count must be positive"):void 0;return J.delay(function(){return I.splitInto(by,I.ofSeq(bz));});};J.exactlyOne=function(by){var bz,bA;bz=F.Get(by);try{return bz.MoveNext()?(bA=bz.Current(),bz.MoveNext()?x.InvalidOp("Sequence contains more than one element"):bA):x.InvalidOp("Sequence contains no elements");}finally{if("Dispose"in bz)bz.Dispose();}};J.exists=function(by,bz){var bA,bB;bA=F.Get(bz);try{bB=false;while(!bB&&bA.MoveNext())bB=by(bA.Current());return bB;}finally{if("Dispose"in bA)bA.Dispose();}};J.exists2=function(by,bz,bA){var bB,bC,bD,bE;bB=F.Get(bz);try{bD=F.Get(bA);try{bE=false;while(!bE&&bB.MoveNext()&&bD.MoveNext())bE=by(bB.Current(),bD.Current());bC=bE;}finally{if("Dispose"in bD)bD.Dispose();}return bC;}finally{if("Dispose"in bB)bB.Dispose();}};J.filter=function(by,bz){return{GetEnumerator:function(){var bA;bA=F.Get(bz);return new G.New(null,null,function(bB){var bC,bD,bE;bC=bA.MoveNext();bD=bA.Current();bE=false;while(bC)if(by(bD)){bB.c=bD;bE=true;bC=false;}else if(bA.MoveNext())bD=bA.Current();else bC=false;return bE;},function(){bA.Dispose();});}};};J.find=function(by,bz){var bA;bA=J.tryFind(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};J.findIndex=function(by,bz){var bA;bA=J.tryFindIndex(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};J.fold=function(by,bz,bA){var bB,bC;bB=bz;bC=F.Get(bA);try{while(bC.MoveNext())bB=by(bB,bC.Current());return bB;}finally{if("Dispose"in bC)bC.Dispose();}};J.forall=function(by,bz){return!J.exists(function(bA){return!by(bA);},bz);};J.forall2=function(by,bz,bA){return!J.exists2(function(bB,bC){return!by(bB,bC);},bz,bA);};J.groupBy=function(by,bz){return J.delay(function(){return I.groupBy(by,I.ofSeq(bz));});};J.head=function(by){var bz;bz=F.Get(by);try{return bz.MoveNext()?bz.Current():J.insufficient();}finally{if("Dispose"in bz)bz.Dispose();}};J.init=function(by,bz){return J.take(by,J.initInfinite(bz));};J.initInfinite=function(by){return{GetEnumerator:function(){return new G.New(0,null,function(bz){bz.c=by(bz.s);bz.s=bz.s+1;return true;},void 0);}};};J.isEmpty=function(by){var bz;bz=F.Get(by);try{return!bz.MoveNext();}finally{if("Dispose"in bz)bz.Dispose();}};J.iter=function(by,bz){var bA;bA=F.Get(bz);try{while(bA.MoveNext())by(bA.Current());}finally{if("Dispose"in bA)bA.Dispose();}};J.iter2=function(by,bz,bA){var bB,bC,bD;bB=F.Get(bz);try{bD=F.Get(bA);try{while(bB.MoveNext()&&bD.MoveNext())by(bB.Current(),bD.Current());bC=void 0;}finally{if("Dispose"in bD)bD.Dispose();}bC;}finally{if("Dispose"in bB)bB.Dispose();}};J.iteri=function(by,bz){var bA,bB;bA=0;bB=F.Get(bz);try{while(bB.MoveNext()){by(bA,bB.Current());bA=bA+1;}}finally{if("Dispose"in bB)bB.Dispose();}};J.length=function(by){var bz,bA;bz=0;bA=F.Get(by);try{while(bA.MoveNext())bz=bz+1;return bz;}finally{if("Dispose"in bA)bA.Dispose();}};J.map=function(by,bz){return{GetEnumerator:function(){var bA;bA=F.Get(bz);return new G.New(null,null,function(bB){return bA.MoveNext()&&(bB.c=by(bA.Current()),true);},function(){bA.Dispose();});}};};J.mapi=function(by,bz){return J.map2(by,J.initInfinite(a.id),bz);};J.map2=function(by,bz,bA){return{GetEnumerator:function(){var bB,bC;bB=F.Get(bz);bC=F.Get(bA);return new G.New(null,null,function(bD){return bB.MoveNext()&&bC.MoveNext()&&(bD.c=by(bB.Current(),bC.Current()),true);},function(){bB.Dispose();bC.Dispose();});}};};J.maxBy=function(by,bz){var bA,bB,bC,bD,bE;bA=F.Get(bz);try{if(!bA.MoveNext())J.seqEmpty();bB=bA.Current();bC=by(bB);while(bA.MoveNext()){bD=bA.Current();bE=by(bD);bp.Compare(bE,bC)===1?(bB=bD,bC=bE):void 0;}return bB;}finally{if("Dispose"in bA)bA.Dispose();}};J.minBy=function(by,bz){var bA,bB,bC,bD,bE;bA=F.Get(bz);try{if(!bA.MoveNext())J.seqEmpty();bB=bA.Current();bC=by(bB);while(bA.MoveNext()){bD=bA.Current();bE=by(bD);bp.Compare(bE,bC)===-1?(bB=bD,bC=bE):void 0;}return bB;}finally{if("Dispose"in bA)bA.Dispose();}};J.max=function(by){var bz,bA,bB;bz=F.Get(by);try{if(!bz.MoveNext())J.seqEmpty();bA=bz.Current();while(bz.MoveNext()){bB=bz.Current();bp.Compare(bB,bA)===1?bA=bB:void 0;}return bA;}finally{if("Dispose"in bz)bz.Dispose();}};J.min=function(by){var bz,bA,bB;bz=F.Get(by);try{if(!bz.MoveNext())J.seqEmpty();bA=bz.Current();while(bz.MoveNext()){bB=bz.Current();bp.Compare(bB,bA)===-1?bA=bB:void 0;}return bA;}finally{if("Dispose"in bz)bz.Dispose();}};J.nth=function(by,bz){var bA,bB;if(by<0)x.FailWith("negative index requested");bA=-1;bB=F.Get(bz);try{while(bA<by){!bB.MoveNext()?J.insufficient():void 0;bA=bA+1;}return bB.Current();}finally{if("Dispose"in bB)bB.Dispose();}};J.pairwise=function(by){return J.map(function(bz){return[I.get(bz,0),I.get(bz,1)];},J.windowed(2,by));};J.pick=function(by,bz){var bA;bA=J.tryPick(by,bz);return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};J.readOnly=function(by){return{GetEnumerator:function(){return F.Get(by);}};};J.reduce=function(by,bz){var bA,bB;bA=F.Get(bz);try{if(!bA.MoveNext())J.seqEmpty();bB=bA.Current();while(bA.MoveNext())bB=by(bB,bA.Current());return bB;}finally{if("Dispose"in bA)bA.Dispose();}};J.scan=function(by,bz,bA){return{GetEnumerator:function(){var bB;bB=F.Get(bA);return new G.New(false,null,function(bC){return bC.s?bB.MoveNext()&&(bC.c=by(bC.c,bB.Current()),true):(bC.c=bz,bC.s=true,true);},function(){bB.Dispose();});}};};J.skip=function(by,bz){return{GetEnumerator:function(){var bA;bA=F.Get(bz);return new G.New(true,null,function(bB){var bC,bD;if(bB.s){for(bC=1,bD=by;bC<=bD;bC++)if(!bA.MoveNext())J.insufficient();bB.s=false;}else null;return bA.MoveNext()&&(bB.c=bA.Current(),true);},function(){bA.Dispose();});}};};J.skipWhile=function(by,bz){return{GetEnumerator:function(){var bA;bA=F.Get(bz);return new G.New(true,null,function(bB){var bC,bD;if(bB.s){bC=true;bD=false;while(bC)if(bA.MoveNext()){if(!by(bA.Current()))bC=false;}else{bC=false;bD=true;}bB.s=false;return bD?false:(bB.c=bA.Current(),true);}else return bA.MoveNext()&&(bB.c=bA.Current(),true);},function(){bA.Dispose();});}};};J.sort=function(by){return J.sortBy(a.id,by);};J.sortBy=function(by,bz){return J.delay(function(){var bA;bA=I.ofSeq(bz);I.sortInPlaceBy(by,bA);return bA;});};J.sortByDescending=function(by,bz){return J.delay(function(){var bA;bA=I.ofSeq(bz);I.sortInPlaceByDescending(by,bA);return bA;});};J.sortDescending=function(by){return J.sortByDescending(a.id,by);};J.sum=function(by){return J.fold(function(bz,bA){return bz+bA;},0,by);};J.sumBy=function(by,bz){return J.fold(function(bA,bB){return bA+by(bB);},0,bz);};J.take=function(by,bz){by<0?J.nonNegative():void 0;return{GetEnumerator:function(){var bA;bA=[F.Get(bz)];return new G.New(0,null,function(bB){var bC;bB.s=bB.s+1;return bB.s>by?false:(bC=bA[0],bp.Equals(bC,null)?J.insufficient():bC.MoveNext()?(bB.c=bC.Current(),bB.s===by?(bC.Dispose(),bA[0]=null):void 0,true):(bC.Dispose(),bA[0]=null,J.insufficient()));},function(){var bB;bB=bA[0];!bp.Equals(bB,null)?bB.Dispose():void 0;});}};};J.takeWhile=function(by,bz){return J.delay(function(){return J.enumUsing(F.Get(bz),function(bA){return J.enumWhile(function(){return bA.MoveNext()&&by(bA.Current());},J.delay(function(){return[bA.Current()];}));});});};J.truncate=function(by,bz){return J.delay(function(){return J.enumUsing(F.Get(bz),function(bA){var bB;bB=[0];return J.enumWhile(function(){return bA.MoveNext()&&bB[0]<by;},J.delay(function(){bB[0]++;return[bA.Current()];}));});});};J.tryFind=function(by,bz){var bA,bB,bC;bA=F.Get(bz);try{bB=null;while(bB==null&&bA.MoveNext()){bC=bA.Current();by(bC)?bB={$:1,$0:bC}:void 0;}return bB;}finally{if("Dispose"in bA)bA.Dispose();}};J.findBack=function(by,bz){var bA;bA=I.tryFindBack(by,I.ofSeq(bz));return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};J.tryFindIndex=function(by,bz){var bA,bB,bC;bA=F.Get(bz);try{bB=true;bC=0;while(bB&&bA.MoveNext())if(by(bA.Current()))bB=false;else bC=bC+1;return bB?null:{$:1,$0:bC};}finally{if("Dispose"in bA)bA.Dispose();}};J.findIndexBack=function(by,bz){var bA;bA=I.tryFindIndexBack(by,I.ofSeq(bz));return bA==null?x.FailWith("KeyNotFoundException"):bA.$0;};J.tryPick=function(by,bz){var bA,bB;bA=F.Get(bz);try{bB=null;while(bp.Equals(bB,null)&&bA.MoveNext())bB=by(bA.Current());return bB;}finally{if("Dispose"in bA)bA.Dispose();}};J.unfold=function(by,bz){return{GetEnumerator:function(){return new G.New(bz,null,function(bA){var bB;bB=by(bA.s);return bB==null?false:(bA.c=bB.$0[0],bA.s=bB.$0[1],true);},void 0);}};};J.windowed=function(by,bz){by<=0?x.FailWith("The input must be positive."):void 0;return J.delay(function(){return J.enumUsing(F.Get(bz),function(bA){var bB;bB=[];return J.append(J.enumWhile(function(){return bB.length<by&&bA.MoveNext();},J.delay(function(){bB.push(bA.Current());return[];})),J.delay(function(){return bB.length===by?J.append([bB.slice(0)],J.delay(function(){return J.enumWhile(function(){return bA.MoveNext();},J.delay(function(){bB.shift();bB.push(bA.Current());return[bB.slice(0)];}));})):[];}));});});};J.zip=function(by,bz){return J.map2(function(bA,bB){return[bA,bB];},by,bz);};J.map3=function(by,bz,bA,bB){return{GetEnumerator:function(){var bC,bD,bE;bC=F.Get(bz);bD=F.Get(bA);bE=F.Get(bB);return new G.New(null,null,function(bF){return bC.MoveNext()&&bD.MoveNext()&&bE.MoveNext()&&(bF.c=by(bC.Current(),bD.Current(),bE.Current()),true);},function(){bC.Dispose();bD.Dispose();bE.Dispose();});}};};J.zip3=function(by,bz,bA){return J.map3(function(bB,bC,bD){return[bB,bC,bD];},by,bz,bA);};J.fold2=function(by,bz,bA,bB){return I.fold2(by,bz,I.ofSeq(bA),I.ofSeq(bB));};J.foldBack=function(by,bz,bA){return I.foldBack(by,I.ofSeq(bz),bA);};J.foldBack2=function(by,bz,bA,bB){return I.foldBack2(by,I.ofSeq(bz),I.ofSeq(bA),bB);};J.iteri2=function(by,bz,bA){var bB,bC,bD,bE;bB=0;bC=F.Get(bz);try{bE=F.Get(bA);try{while(bC.MoveNext()&&bE.MoveNext()){by(bB,bC.Current(),bE.Current());bB=bB+1;}bD=void 0;}finally{if("Dispose"in bE)bE.Dispose();}bD;}finally{if("Dispose"in bC)bC.Dispose();}};J.mapi2=function(by,bz,bA){return J.map3(by,J.initInfinite(a.id),bz,bA);};J.mapFold=function(by,bz,bA){return I.mapFold(by,bz,I.ofSeq(bA));};J.mapFoldBack=function(by,bz,bA){return I.mapFoldBack(by,I.ofSeq(bz),bA);};J.permute=function(by,bz){return J.delay(function(){return I.permute(by,I.ofSeq(bz));});};J.reduceBack=function(by,bz){return I.reduceBack(by,I.ofSeq(bz));};J.replicate=function(by,bz){by<0?J.nonNegative():void 0;return J.delay(function(){return J.map(function(){return bz;},x.range(0,by-1));});};J.rev=function(by){return J.delay(function(){return I.ofSeq(by).slice().reverse();});};J.scanBack=function(by,bz,bA){return J.delay(function(){return I.scanBack(by,I.ofSeq(bz),bA);});};J.indexed=function(by){return J.mapi(function(bz,bA){return[bz,bA];},by);};J.sortWith=function(by,bz){return J.delay(function(){var bA;bA=I.ofSeq(bz);I.sortInPlaceWith(by,bA);return bA;});};J.tail=function(by){return J.skip(1,by);};J.seqEmpty=function(){return x.FailWith("The input sequence was empty.");};bk.CopyTo=function(by,bz,bA){I.blit(bz,0,bz,bA,I.length(by));};bk.Contains=function(by,bz){return J.exists(function(bA){return bp.Equals(bz,bA);},by);};bk.Clear=function(by){by.splice(0,I.length(by));};bl.RegexEscape=function(by){return by.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bl.SplitWith=function(by,bz){return by.split(bz);};bl.Join=function(by,bz){return bz.join(by);};bl.TrimEndWS=function(by){return by.replace(new a.RegExp("\\s+$"),"");};bl.TrimStartWS=function(by){return by.replace(new a.RegExp("^\\s+"),"");};bl.Trim=function(by){return by.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bl.StartsWith=function(by,bz){return by.substring(0,bz.length)==bz;};bl.Substring=function(by,bz,bA){return by.substr(bz,bA);};bl.ReplaceOnce=function(by,bz,bA){return by.replace(bz,bA);};bl.Remove=function(by,bz,bA){return by.substring(0,bz)+by.substring(bz+bA);};bl.PadRightWith=function(by,bz,bA){return bz>by.length?by+a.Array(bz-by.length+1).join(bA):by;};bl.PadLeftWith=function(by,bz,bA){return bz>by.length?a.Array(bz-by.length+1).join(bA)+by:by;};bl.LastIndexOf=function(by,bz,bA){return by.lastIndexOf(bz,bA);};bl.IsNullOrWhiteSpace=function(by){return by==null||(new a.RegExp("^\\s*$")).test(by);};bl.IsNullOrEmpty=function(by){return by==null||by=="";};bl.Insert=function(by,bz,bA){return by.substring(0,bz-1)+bA+by.substring(bz);};bl.IndexOf=function(by,bz,bA){return by.indexOf(bz,bA);};bl.EndsWith=function(by,bz){return by.substring(by.length-bz.length)==bz;};bl.collect=function(by,bz){return I.init(bz.length,function(bA){return by(bz[bA]);}).join("");};bl.concat=function(by,bz){return I.ofSeq(bz).join(by);};bl.exists=function(by,bz){return J.exists(by,bl.protect(bz));};bl.forall=function(by,bz){return J.forall(by,bl.protect(bz));};bl.init=function(by,bz){return I.init(by,bz).join("");};bl.iter=function(by,bz){J.iter(by,bl.protect(bz));};bl.iteri=function(by,bz){J.iteri(by,bl.protect(bz));};bl.length=function(by){return bl.protect(by).length;};bl.map=function(by,bz){return bl.collect(by,bl.protect(bz));};bl.mapi=function(by,bz){return I.ofSeq(J.mapi(by,bz)).join("");};bl.replicate=function(by,bz){return I.create(by,bz).join("");};bl.protect=function(by){return by===null?"":by;};bl.SFormat=function(by,bz){return by.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bA,bB,bC){var bD,bE,bF;bD=bu(I.get(bz,+bB));return!bp.Equals(bC,void 0)?(bE=+bC,(bF=bx.abs(bE),bF>bD.length?bE>0?bl.PadLeft(bD,bF):bl.PadRight(bD,bF):bD)):bD;});};bl.Filter=function(by,bz){return I.ofSeq(J.choose(function(bA){return by(bA)?{$:1,$0:bA}:null;},bz)).join("");};bl.SplitStrings=function(by,bz,bA){return bl.Split(by,new a.RegExp(bl.concat("|",I.map(bl.RegexEscape,bz))),bA);};bl.SplitChars=function(by,bz,bA){return bl.Split(by,new a.RegExp("["+bl.RegexEscape(bz.join(""))+"]"),bA);};bl.Split=function(by,bz,bA){return bA===1?I.filter(function(bB){return bB!=="";},bl.SplitWith(by,bz)):bl.SplitWith(by,bz);};bl.TrimEnd=function(by,bz){var bA,bB;if(bp.Equals(bz,null)||bz.length==0)return bl.TrimEndWS(by);else{bA=by.length-1;bB=true;while(bA>=0&&bB)(function(){var bC;bC=by[bA];return I.exists(function(bD){return bC===bD;},bz)?void(bA=bA-1):void(bB=false);}());return bl.Substring(by,0,bA+1);}};bl.TrimStart=function(by,bz){var bA,bB;if(bp.Equals(bz,null)||bz.length==0)return bl.TrimStartWS(by);else{bA=0;bB=true;while(bA<by.length&&bB)(function(){var bC;bC=by[bA];return I.exists(function(bD){return bC===bD;},bz)?void(bA=bA+1):void(bB=false);}());return by.substring(bA);}};bl.ToCharArrayRange=function(by,bz,bA){return I.init(bA,function(bB){return by[bz+bB];});};bl.ToCharArray=function(by){return I.init(by.length,function(bz){return by[bz];});};bl.ReplaceChar=function(by,bz,bA){return bl.Replace(by,bz,bA);};bl.Replace=function(by,bz,bA){function bB(bC){var bD,bE,bF;bD=bC.indexOf(bz);return bD!==-1?(bE=bl.ReplaceOnce(bC,bz,bA),(bF=bD+bA.length,bl.Substring(bE,0,bD+bA.length)+bB(bE.substring(bF)))):bC;}return bB(by);};bl.PadRight=function(by,bz){return bl.PadRightWith(by,bz," ");};bl.PadLeft=function(by,bz){return bl.PadLeftWith(by,bz," ");};bl.CopyTo=function(by,bz,bA,bB,bC){I.blit(bl.ToCharArray(by),bz,bA,bB,bC);};bl.Compare=function(by,bz){return bp.Compare(by,bz);};bm=b.Task=bs.Class({Execute:function(){this.action();},Start:function(){var by;by=this;this.status===0?(this.status=2,A.scheduler().Fork(function(){var bz;by.status=3;try{by.Execute();by.status=5;}catch(bA){bA instanceof Y&&(bp.Equals(bA.ct,by.token)&&(bz=bA,true))?(bw.log("Task cancellation caught:",bz),by.exc=new _3.New$3([bz]),by.status=6):(bw.log("Task error caught:",bA),by.exc=new _3.New$3([bA]),by.status=7);}by.RunContinuations();})):x.InvalidOp("Task not in initial state");},StartContinuation:function(){var by;by=this;this.status===1?(this.status=2,A.scheduler().Fork(function(){if(by.status===2){by.status=3;try{by.Execute();by.status=5;}catch(bz){by.exc=new _3.New$3([bz]);by.status=7;}by.RunContinuations();}})):void 0;},ContinueWith:function(by,bz){var bA,bB;bA=this;bB=new bn.New$4(function(){return by(bA);},bz,1,null,void 0);this.get_IsCompleted()?bB.StartContinuation():this.continuations.push(bB);return bB;},ContinueWith$1:function(by,bz){var bA,bB;bA=this;bB=new bm.New$4(function(){return by(bA);},bz,1,null);this.get_IsCompleted()?bB.StartContinuation():this.continuations.push(bB);return bB;},RunContinuations:function(){var by,bz,bA;by=this.continuations;for(bz=0,bA=by.length-1;bz<=bA;bz++)I.get(by,bz).StartContinuation();},OnCompleted:function(by){if(this.get_IsCompleted())by();else{this.get_Status()===0?this.Start():void 0;this.ContinueWith$1(function(){return by();},A.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return this.status===7;},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},get_IsCanceled:function(){return this.status===6;},get_Exception:function(){return this.exc;}},g,bm);bm.Yield=function(){return new bm.New$3(function(){return null;});};bm.WhenAll=function(by){var bz,bA,bB,bC,bD,bE;bz=I.length(by);bA=[0];bB=new a.Array(bz);bC=new bo.New();for(bD=0,bE=bz-1;bD<=bE;bD++)(function(bF){I.get(by,bD).ContinueWith$1(function(bG){return bG.get_IsFaulted()?void bC.TrySetException$1(bG.get_Exception()):bG.get_IsCanceled()?void bC.TrySetCanceled$1():(bA[0]++,bB[bF]=bG.get_Result(),bA[0]===bz?bC.SetResult(bB):null);},A.noneCT());}(bD));return bC.get_Task();};bm.WhenAll$1=function(by){var bz,bA,bB,bC,bD;bz=I.length(by);bA=[0];bB=new bo.New();for(bC=0,bD=bz-1;bC<=bD;bC++)I.get(by,bC).ContinueWith$1(function(bE){return bE.get_IsFaulted()?void bB.TrySetException$1(bE.get_Exception()):bE.get_IsCanceled()?void bB.TrySetCanceled$1():(bA[0]++,bA[0]===bz?void bB.TrySetResult():null);},A.noneCT());return bB.get_Task();};bm.WhenAny=function(by){var bz,bA,bB;bz=new bo.New();for(bA=0,bB=by.length-1;bA<=bB;bA++)I.get(by,bA).ContinueWith(function(bC){bz.TrySetResult(bC);},A.noneCT());return bz.get_Task();};bm.WhenAny$1=function(by){var bz,bA,bB;bz=new bo.New();for(bA=0,bB=by.length-1;bA<=bB;bA++)I.get(by,bA).ContinueWith$1(function(bC){bz.TrySetResult(bC);},A.noneCT());return bz.get_Task();};bm.Delay=function(by,bz){return A.StartAsTask(A.Sleep(by),{$:1,$0:bz});};bm.Delay$1=function(by){return A.StartAsTask(A.Sleep(by),null);};bm.Run=function(by,bz){var bA;bA=by();return bz.c?bm.FromCanceled(bz):(bA.get_Status()===0?bA.Start():void 0,bA);};bm.Run$1=function(by,bz){var bA;bA=new bn.New$4(by,bz,0,null,void 0);bA.Start();return bA;};bm.Run$2=function(by,bz){var bA;bA=by();return bz.c?bm.FromCanceled$1(bz):(bA.get_Status()===0?bA.Start():void 0,bA);};bm.Run$3=function(by,bz){var bA;bA=new bm.New$4(by,bz,0,null);bA.Start();return bA;};bm.FromResult=function(by){return new bn.New$4(null,A.noneCT(),5,null,by);};bm.FromException=function(by){return new bn.New$4(null,A.noneCT(),7,new _3.New$3([by]),null);};bm.FromException$1=function(by){return new bm.New$4(null,A.noneCT(),7,new _3.New$3([by]));};bm.FromCanceled=function(by){return new bn.New$4(null,by,6,null,null);};bm.FromCanceled$1=function(by){return new bm.New$4(null,by,6,null);};bm.New=bs.Ctor(function(by,bz,bA){bm.New$4.call(this,function(){return by(bz);},bA,0,null);},bm);bm.New$1=bs.Ctor(function(by,bz){bm.New$4.call(this,function(){return by(bz);},A.noneCT(),0,null);},bm);bm.New$2=bs.Ctor(function(by,bz){bm.New$4.call(this,by,bz,0,null);},bm);bm.New$3=bs.Ctor(function(by){bm.New$4.call(this,by,A.noneCT(),0,null);},bm);bm.New$4=bs.Ctor(function(by,bz,bA,bB){this.action=by;this.token=bz;this.status=bA;this.continuations=[];this.exc=bB;},bm);bn=b.Task1=bs.Class({get_Result:function(){return this.result;},Execute:function(){this.result=this.func();}},bm,bn);bn.New=bs.Ctor(function(by,bz,bA){bn.New$4.call(this,function(){return by(bz);},bA,0,null,void 0);},bn);bn.New$1=bs.Ctor(function(by,bz){bn.New$4.call(this,function(){return by(bz);},A.noneCT(),0,null,void 0);},bn);bn.New$2=bs.Ctor(function(by,bz){bn.New$4.call(this,by,bz,0,null,void 0);},bn);bn.New$3=bs.Ctor(function(by){bn.New$4.call(this,by,A.noneCT(),0,null,void 0);},bn);bn.New$4=bs.Ctor(function(by,bz,bA,bB,bC){bm.New$4.call(this,null,bz,bA,bB);this.func=by;this.result=bC;},bn);bo=b.TaskCompletionSource=bs.Class({TrySetResult:function(by){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=by,this.task.RunContinuations(),true);},TrySetException:function(by){return this.TrySetException$1(new _3.New$2(by));},TrySetException$1:function(by){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _3.New$3([by]),this.task.RunContinuations(),true);},TrySetCanceled:function(by){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=by,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(by){this.task.get_IsCompleted()?x.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=by;this.task.RunContinuations();},SetException:function(by){this.SetException$1(new _3.New$2(by));},SetException$1:function(by){this.task.get_IsCompleted()?x.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _3.New$3([by]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?x.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},g,bo);bo.New=bs.Ctor(function(){this.task=new bn.New$4(null,A.noneCT(),1,null,void 0);},bo);bp.Hash=function(by){var bz;bz=typeof by;return bz=="function"?0:bz=="boolean"?by?1:0:bz=="number"?by:bz=="string"?bp.hashString(by):bz=="object"?by==null?0:by instanceof a.Array?bp.hashArray(by):bp.hashObject(by):0;};bp.hashObject=function(by){var bz,bA;if("GetHashCode"in by)return by.GetHashCode();else{bz=[0];for(var bB in by)if(function(bC){bz[0]=bp.hashMix(bp.hashMix(bz[0],bp.hashString(bC)),bp.Hash(by[bC]));return false;}(bB))break;return bz[0];}};bp.hashString=function(by){var bz,bA,bB;if(by===null)return 0;else{bz=5381;for(bA=0,bB=by.length-1;bA<=bB;bA++)bz=bp.hashMix(bz,by[bA].charCodeAt());return bz;}};bp.hashArray=function(by){var bz,bA,bB;bz=-34948909;for(bA=0,bB=I.length(by)-1;bA<=bB;bA++)bz=bp.hashMix(bz,bp.Hash(I.get(by,bA)));return bz;};bp.hashMix=function(by,bz){return(by<<5)+by+bz;};bp.Equals=function(by,bz){var bA,bB,bC,bD;if(by===bz)return true;else{bA=typeof by;if(bA=="object"){if(by===null||by===void 0||bz===null||bz===void 0)return false;else if("Equals"in by)return by.Equals(bz);else if(by instanceof a.Array&&bz instanceof a.Array)return bp.arrayEquals(by,bz);else if(by instanceof bv&&bz instanceof bv)return bp.dateEquals(by,bz);else{bB=[true];for(var bE in by)if(function(bF){bB[0]=!by.hasOwnProperty(bF)||bz.hasOwnProperty(bF)&&bp.Equals(by[bF],bz[bF]);return!bB[0];}(bE))break;if(bB[0]){for(var bF in bz)if(function(bG){bB[0]=!bz.hasOwnProperty(bG)||by.hasOwnProperty(bG);return!bB[0];}(bF))break;}return bB[0];}}else return bA=="function"&&("$Func"in by?by.$Func===bz.$Func&&by.$Target===bz.$Target:"$Invokes"in by&&"$Invokes"in bz&&bp.arrayEquals(by.$Invokes,bz.$Invokes));}};bp.dateEquals=function(by,bz){return by.getTime()===bz.getTime();};bp.arrayEquals=function(by,bz){var bA,bB;if(I.length(by)===I.length(bz)){bA=true;bB=0;while(bA&&bB<I.length(by)){!bp.Equals(I.get(by,bB),I.get(bz,bB))?bA=false:void 0;bB=bB+1;}return bA;}else return false;};bp.Compare=function(by,bz){var bA,bB,bC,bD,bE,bF;if(by===bz)return 0;else{bB=typeof by;switch(bB=="function"?1:bB=="boolean"?2:bB=="number"?2:bB=="string"?2:bB=="object"?3:0){case 0:return typeof bz=="undefined"?0:-1;break;case 1:return x.FailWith("Cannot compare function values.");break;case 2:return by<bz?-1:1;break;case 3:if(by===null)bC=-1;else if(bz===null)bC=1;else if("CompareTo"in by)bC=by.CompareTo(bz);else if("CompareTo0"in by)bC=by.CompareTo0(bz);else if(by instanceof a.Array&&bz instanceof a.Array)bC=bp.compareArrays(by,bz);else if(by instanceof bv&&bz instanceof bv)bC=bp.compareDates(by,bz);else{bD=[0];for(var bG in by)if(function(bH){return!by.hasOwnProperty(bH)?false:!bz.hasOwnProperty(bH)?(bD[0]=1,true):(bD[0]=bp.Compare(by[bH],bz[bH]),bD[0]!==0);}(bG))break;if(bD[0]===0){for(var bH in bz)if(function(bI){return!bz.hasOwnProperty(bI)?false:!by.hasOwnProperty(bI)&&(bD[0]=-1,true);}(bH))break;}bC=bD[0];}return bC;break;}}};bp.compareDates=function(by,bz){return bp.Compare(by.getTime(),bz.getTime());};bp.compareArrays=function(by,bz){var bA,bB;if(I.length(by)<I.length(bz))return -1;else if(I.length(by)>I.length(bz))return 1;else{bA=0;bB=0;while(bA===0&&bB<I.length(by)){bA=bp.Compare(I.get(by,bB),I.get(bz,bB));bB=bB+1;}return bA;}};bq.TryParseBool=function(by,bz){var bA;bA=by.toLowerCase();return bA==="true"?(bz.set(true),true):bA==="false"&&(bz.set(false),true);};bq.ParseBool=function(by){var bz;bz=by.toLowerCase();if(bz==="true")return true;else if(bz==="false")return false;else throw new _5.New$1("String was not recognized as a valid Boolean.");};bq.TryParse=function(by,bz,bA,bB){var bC,bD;bC=+by;bD=bC===bC-bC%1&&bC>=bz&&bC<=bA;bD?bB.set(bC):void 0;return bD;};bq.Parse=function(by,bz,bA,bB){var bC;bC=+by;if(bC!==bC-bC%1)throw new _5.New$1("Input string was not in a correct format.");else if(bC<bz||bC>bA)throw new _6.New$1(bB);else return bC;};bq.ParseByte=function(by){return bq.Parse(by,0,255,"Value was either too large or too small for an unsigned byte.");};bq.TryParseByte=function(by,bz){return bq.TryParse(by,0,255,bz);};bq.ParseSByte=function(by){return bq.Parse(by,-128,127,"Value was either too large or too small for a signed byte.");};bq.TryParseSByte=function(by,bz){return bq.TryParse(by,-128,127,bz);};bq.ParseInt16=function(by){return bq.Parse(by,-32768,32767,"Value was either too large or too small for an Int16.");};bq.TryParseInt16=function(by,bz){return bq.TryParse(by,-32768,32767,bz);};bq.ParseInt32=function(by){return bq.Parse(by,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bq.TryParseInt32=function(by,bz){return bq.TryParse(by,-2147483648,2147483647,bz);};bq.ParseUInt16=function(by){return bq.Parse(by,0,65535,"Value was either too large or too small for an UInt16.");};bq.TryParseUInt16=function(by,bz){return bq.TryParse(by,0,65535,bz);};bq.ParseUInt32=function(by){return bq.Parse(by,0,4294967295,"Value was either too large or too small for an UInt32.");};bq.TryParseUInt32=function(by,bz){return bq.TryParse(by,0,4294967295,bz);};bq.ParseInt64=function(by){return bq.Parse(by,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bq.TryParseInt64=function(by,bz){return bq.TryParse(by,-9223372036854775808,9223372036854775807,bz);};bq.ParseUInt64=function(by){return bq.Parse(by,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bq.TryParseUInt64=function(by,bz){return bq.TryParse(by,0,18446744073709551615,bz);};}());

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.UoM=c.UoM||{};e=d.Unsafe=d.Unsafe||{};f=d.UoM=d.UoM||{};g=c.StringId=c.StringId||{};h=c.GuidId=c.GuidId||{};i=c.Dict=c.Dict||{};j=c.ResultMessage=c.ResultMessage||{};k=c.ResultMessageHelpers=c.ResultMessageHelpers||{};l=c.Monads=c.Monads||{};m=l.Seq=l.Seq||{};n=l.Option=l.Option||{};o=l.Async=l.Async||{};p=l.State=l.State||{};q=a.WebSharper=a.WebSharper||{};r=q.Obj=q.Obj||{};s=p.CEBuilder=p.CEBuilder||{};t=p.Operators=p.Operators||{};u=l.Result=l.Result||{};v=u.Builder=u.Builder||{};w=u.Operators=u.Operators||{};x=u.BuilderP=u.BuilderP||{};y=l.Depend=l.Depend||{};z=y.DependBuilder=y.DependBuilder||{};A=y.Operators=y.Operators||{};B=l.ResultM=l.ResultM||{};C=B.Builder=B.Builder||{};D=B.Operators=B.Operators||{};E=l.ResultMAutoOpen=l.ResultMAutoOpen||{};F=l.AsyncResultM=l.AsyncResultM||{};G=F.AsyncResultMBuilder=F.AsyncResultMBuilder||{};H=F.Operators=F.Operators||{};I=l.AsyncResultMAutoOpen=l.AsyncResultMAutoOpen||{};J=c.String=c.String||{};K=c.ParseO=c.ParseO||{};L=c.Serializer=c.Serializer||{};M=L.JsonIntermediate=L.JsonIntermediate||{};N=c.Snippet=c.Snippet||{};O=c.SnippetModule=c.SnippetModule||{};P=c.SnippetSerialize=c.SnippetSerialize||{};Q=P.Model=P.Model||{};R=b.LibraryJS=b.LibraryJS||{};S=R.WebComponent=R.WebComponent||{};T=S.WcTabStrip=S.WcTabStrip||{};U=T.WcTabStripT=T.WcTabStripT||{};V=S.WcSplitter=S.WcSplitter||{};W=V.WcSplitterT=V.WcSplitterT||{};X=R.Monaco=R.Monaco||{};Y=X.Position=X.Position||{};Z=X.Range=X.Range||{};_0=X.Location=X.Location||{};_1=X.MarkDownString=X.MarkDownString||{};_2=X.MarkerData=X.MarkerData||{};_3=X.CompletionItem=X.CompletionItem||{};_4=X.Hover=X.Hover||{};_5=X.Editor=X.Editor||{};_6=X.MonacoConfig=X.MonacoConfig||{};_7=R.MonacoGenAdapter=R.MonacoGenAdapter||{};_8=_7.MonacoRT=_7.MonacoRT||{};_9=_7.CompletionItemProvider=_7.CompletionItemProvider||{};_=_7.HoverProvider=_7.HoverProvider||{};$=_7.DefinitionProvider=_7.DefinitionProvider||{};ba=R.AppFramework=R.AppFramework||{};bb=ba.PlugInVar=ba.PlugInVar||{};bc=ba.PlugInView=ba.PlugInView||{};bd=ba.PlugInDoc=ba.PlugInDoc||{};be=ba.PlugInAction=ba.PlugInAction||{};bf=ba.PlugInQuery=ba.PlugInQuery||{};bg=ba.PlugIn=ba.PlugIn||{};bh=ba.PlugInBuilder=ba.PlugInBuilder||{};bi=ba.Fun=ba.Fun||{};bj=ba.P=ba.P||{};bk=ba.Val=ba.Val||{};bl=ba.Extract0=ba.Extract0||{};bm=R.LayoutEngine=R.LayoutEngine||{};bn=R.LayoutEngineModule=R.LayoutEngineModule||{};bo=bn.Measures=bn.Measures||{};bp=bn.Syntax=bn.Syntax||{};bq=bp.RefType=bp.RefType||{};br=bn.Layout=bn.Layout||{};bs=b.TestingJS=b.TestingJS||{};bt=bs.StartAppFramework=bs.StartAppFramework||{};bu=bs.Util=bs.Util||{};bv=bs.AF=bs.AF||{};bw=bv.ListModelData=bv.ListModelData||{};bx=bs.LayoutEngine=bs.LayoutEngine||{};by=bs.ListModel=bs.ListModel||{};bz=bs.LM=bs.LM||{};bA=bs.LMX=bs.LMX||{};bB=bs.SnippetTemplates=bs.SnippetTemplates||{};bC=bs.NewLY=bs.NewLY||{};bD=bC.P=bC.P||{};bE=bs.DragDrop=bs.DragDrop||{};bF=bE.DragInfo=bE.DragInfo||{};bG=bs.SnippetsUI=bs.SnippetsUI||{};bH=bG.SnippetHierData=bG.SnippetHierData||{};bI=bG.SaveLoad=bG.SaveLoad||{};bJ=a.System=a.System||{};bK=bJ.Guid=bJ.Guid||{};bL=q.Operators=q.Operators||{};bM=q.Utils=q.Utils||{};bN=q.Arrays=q.Arrays||{};bO=q.Slice=q.Slice||{};bP=q.Unchecked=q.Unchecked||{};bQ=q.Collections=q.Collections||{};bR=bQ.Dictionary=bQ.Dictionary||{};bS=q.Seq=q.Seq||{};bT=q.Strings=q.Strings||{};bU=q.List=q.List||{};bV=q.Option=q.Option||{};bW=q.CancellationTokenSource=q.CancellationTokenSource||{};bX=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};bY=bU.T=bU.T||{};bZ=q.Result=q.Result||{};b0=q.Char=q.Char||{};b1=bQ.Set=bQ.Set||{};b2=bQ.FSharpSet=bQ.FSharpSet||{};b3=bQ.FSharpMap=bQ.FSharpMap||{};b4=q.UI=q.UI||{};b5=b4.HtmlModule=b4.HtmlModule||{};b6=b5.attr=b5.attr||{};b7=R.Hoverable=R.Hoverable||{};b8=b7.Hoverable=b7.Hoverable||{};b9=b4.View=b4.View||{};b_=b4.Var=b4.Var||{};b$=b4.Doc=b4.Doc||{};ca=q.Numeric=q.Numeric||{};cb=b4.Var$1=b4.Var$1||{};cc=q.JavaScript=q.JavaScript||{};cd=cc.Pervasives=cc.Pervasives||{};ce=a.EventTarget;cf=a.Node;cg=cc.JS=cc.JS||{};ch=a.Event;ci=a.UIEvent;cj=R.ResizeObserver=R.ResizeObserver||{};ck=R.GenEditor=R.GenEditor||{};cl=ck.Position=ck.Position||{};cm=R.PromiseM=R.PromiseM||{};cn=ck.GenEditor=ck.GenEditor||{};co=ck.GenEditorHook=ck.GenEditorHook||{};cp=b4.ListModel=b4.ListModel||{};cq=b4.Templating=b4.Templating||{};cr=cq.Runtime=cq.Runtime||{};cs=cr.Server=cr.Server||{};ct=cs.TemplateInstance=cs.TemplateInstance||{};cu=cs.ProviderBuilder=cs.ProviderBuilder||{};cv=cs.Handler=cs.Handler||{};cw=a.testing_Templates=a.testing_Templates||{};cx=a.GeneratedPrintf=a.GeneratedPrintf||{};cy=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};cz=cr.Client=cr.Client||{};cA=b4.AttrModule=b4.AttrModule||{};cB=q.Lazy=q.Lazy||{};cC=b4.AttrProxy=b4.AttrProxy||{};cD=a.Error;cE=q.MatchFailureException=q.MatchFailureException||{};cF=R.View=R.View||{};cG=R.ListModel=R.ListModel||{};cH=b4.ViewBuilder=b4.ViewBuilder||{};cI=a.FileReader;cJ=R.Serializer=R.Serializer||{};cK=R.AppFrameworkTemplate=R.AppFrameworkTemplate||{};cL=q.Concurrency=q.Concurrency||{};cM=a.Object;cN=q.Enumerator=q.Enumerator||{};cO=cN.T=cN.T||{};cP=bQ.DictionaryUtil=bQ.DictionaryUtil||{};cQ=q.AggregateException=q.AggregateException||{};cR=a.WindowOrWorkerGlobalScope;cS=bQ.BalancedTree=bQ.BalancedTree||{};cT=bQ.MapUtil=bQ.MapUtil||{};cU=cS.Tree=cS.Tree||{};cV=b4.Elt=b4.Elt||{};cW=b4.Snap=b4.Snap||{};cX=b4.DomUtility=b4.DomUtility||{};cY=b4.ConcreteVar=b4.ConcreteVar||{};cZ=b4.Client=b4.Client||{};c0=cZ.Templates=cZ.Templates||{};c1=b4.Abbrev=b4.Abbrev||{};c2=c1.Fresh=c1.Fresh||{};c3=bQ.List=bQ.List||{};c4=bQ.HashSet=bQ.HashSet||{};c5=b4.FromView=b4.FromView||{};c6=b4.Attrs=b4.Attrs||{};c7=q.LazyExtensionsProxy=q.LazyExtensionsProxy||{};c8=c7.LazyRecord=c7.LazyRecord||{};c9=b4.Array=b4.Array||{};c_=b4.Docs=b4.Docs||{};c$=bQ.Pair=bQ.Pair||{};da=c1.Async=c1.Async||{};db=b4.Storage=b4.Storage||{};dc=cL.AsyncBody=cL.AsyncBody||{};dd=cL.CT=cL.CT||{};de=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};df=q.DateUtil=q.DateUtil||{};dg=q.TimeoutException=q.TimeoutException||{};dh=b4.DocElemNode=b4.DocElemNode||{};di=a.CharacterData;dj=b4.CheckedInput=b4.CheckedInput||{};dk=b4.DynamicAttrNode=b4.DynamicAttrNode||{};dl=db.ArrayStorage=db.ArrayStorage||{};dm=cL.Scheduler=cL.Scheduler||{};dn=q.OperationCanceledException=q.OperationCanceledException||{};_do=b4.Updates=b4.Updates||{};dp=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};dq=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};dr=b4.An=b4.An||{};ds=cZ.Settings=cZ.Settings||{};dt=c1.Mailbox=c1.Mailbox||{};du=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};dv=cZ.Attrs=cZ.Attrs||{};dw=dv.Dyn=dv.Dyn||{};dx=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};dy=c0.Prepare=c0.Prepare||{};dz=bQ.KeyCollection=bQ.KeyCollection||{};dA=cZ.Docs=cZ.Docs||{};dB=dA.RunState=dA.RunState||{};dC=dA.NodeSet=dA.NodeSet||{};dD=b4.Anims=b4.Anims||{};dE=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};dF=bQ.HashSetUtil=bQ.HashSetUtil||{};dG=q.FormatException=q.FormatException||{};dH=q.Queue=q.Queue||{};dI=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};dJ=b4.AppendList=b4.AppendList||{};dK=b4.String=b4.String||{};dL=b4.Easing=b4.Easing||{};dM=c1.HashSet=c1.HashSet||{};dN=dA.DomNodes=dA.DomNodes||{};dO=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};dP=a.console;dQ=a.IntelliFactory;dR=dQ&&dQ.Runtime;dS=a.Date;dT=a.Reflect;dU=a.Math;dV=a.jQuery;dW=a.JSON;c.Error=function(dX){return{$:1,$0:dX};};c.print=function(dX){if(typeof dX=="string")((function(dY){return function(dZ){return dY(bM.toSafe(dZ));};}(function(dY){dP.log(dY);}))(dX));else((function(dY){return function(dZ){return dY(bM.prettyPrint(dZ));};}(function(dY){dP.log(dY);}))(dX));};c.delayed=function(dX,dY){var dZ;dZ=[null];return function(d0){var d1,d2;d1=dZ[0];d1==null?void 0:d1.$0.Cancel$1();dZ[0]={$:1,$0:new bW.New()};cL.Start((d2=null,cL.Delay(function(){return cL.Bind(cL.Sleep(dX),function(){dY(d0);return cL.Zero();});})),{$:1,$0:dZ[0].$0});};};c["String.Substring2"]=function(dX,dY,dZ){var d0,d1;while(true){if(dZ<=0)return"";else if(dY>=dX.length)return"";else if(dY<0){d0=dY;dY=0;dZ=dZ+d0;}else return bT.Substring(dX,dY,(d1=dX.length-dY,bP.Compare(dZ,d1)===-1?dZ:d1));}};c["String.Left"]=function(dX,dY){return dY<0?c["String.Substring2"](dX,0,dX.length+dY):c["String.Substring2"](dX,0,dY);};c["String.Right"]=function(dX,dY){var dZ,d0;return c["String.Substring2"](dX,(dZ=0,(d0=dX.length-dY,bP.Compare(dZ,d0)===1?dZ:d0)),dX.length);};c["String.get_toUnderscore"]=function(dX,dY){return bN.ofSeq(bS.collect(a.id,bS.mapi(function(dZ,d0){return dZ>0&&b0.IsUpper(d0)?bU.ofArray(["_",d0]):bU.ofArray([d0]);},dX))).join("");};e.cast=a.id;f.Tag$10=function(dX){return e.cast(dX);};f.Tag$9=function(dX){return e.cast(dX);};f.Tag$8=function(dX){return e.cast(dX);};f.Tag$7=function(dX){return e.cast(dX);};f.Tag$6=function(dX){return e.cast(dX);};f.Tag$5=function(dX){return e.cast(dX);};f.Tag$4=function(dX){return e.cast(dX);};f.Tag$3=function(dX){return e.cast(dX);};f.Tag$2=function(dX){return e.cast(dX);};f.Tag$1=function(dX){return e.cast(dX);};f.Tag=function(dX){return e.cast(dX);};f.Untag$10=function(dX){return e.cast(dX);};f.Untag$9=function(dX){return e.cast(dX);};f.Untag$8=function(dX){return e.cast(dX);};f.Untag$7=function(dX){return e.cast(dX);};f.Untag$6=function(dX){return e.cast(dX);};f.Untag$5=function(dX){return e.cast(dX);};f.Untag$4=function(dX){return e.cast(dX);};f.Untag$3=function(dX){return e.cast(dX);};f.Untag$2=function(dX){return e.cast(dX);};f.Untag$1=function(dX){return e.cast(dX);};f.Untag=function(dX){return e.cast(dX);};f.Cast$10=function(dX){return e.cast(dX);};f.Cast$9=function(dX){return e.cast(dX);};f.Cast$8=function(dX){return e.cast(dX);};f.Cast$7=function(dX){return e.cast(dX);};f.Cast$6=function(dX){return e.cast(dX);};f.Cast$5=function(dX){return e.cast(dX);};f.Cast$4=function(dX){return e.cast(dX);};f.Cast$3=function(dX){return e.cast(dX);};f.Cast$2=function(dX){return e.cast(dX);};f.Cast$1=function(dX){return e.cast(dX);};f.Cast=function(dX){return e.cast(dX);};g=c.StringId=dR.Class({get_Id:function(){return this.$0;}},null,g);h=c.GuidId=dR.Class({get_Id:function(){return this.$0;}},null,h);i.add=function(dX,dY,dZ){if(dZ.ContainsKey(dX))dZ.set_Item(dX,dY);else dZ.Add(dX,dY);};j=c.ResultMessage=dR.Class({toString:function(){return this.$==1?(function(dX){return function(dY){return dX("Error    : "+bM.toSafe(dY));};}(a.id))(this.$0):this.$==2?(function(dX){return function(dY){return dX("Warning  : "+bM.toSafe(dY));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(dX){return function(dY){return dX(a.String(dY));};}(a.id))(this.$0):this.$==5?(((dR.Curried3(function(dX,dY,dZ){return dX("Exception: "+bM.toSafe(dY)+", "+bM.toSafe(dZ));}))(a.id))(this.$0))(this.$1):this.$==6?bT.concat("\n",bS.map(a.String,bS.filter(function(dX){return dX.$!=0;},this.$0))):"";}},null,j);j.NoMsg=new j({$:0});k.errorMsgf=function(dX){return dX(function(dY){return new j({$:1,$0:dY});});};k.warningf=function(dX){return dX(function(dY){return new j({$:2,$0:dY});});};k.infof=function(dX){return dX(function(dY){return new j({$:3,$0:dY});});};j.noMsg=function(dX){return dX.$==0;};j.exclnoMsg=function(dX){function dY(dZ){return!dZ;}return bS.filter(function(dZ){return dY(j.noMsg(dZ));},dX);};j.bindMessage=function(dX,dY){return dY.$==4?dX(dY.$0):dY.$==1?new j({$:1,$0:dY.$0}):dY.$==3?new j({$:3,$0:dY.$0}):dY.$==2?new j({$:2,$0:dY.$0}):dY.$==5?new j({$:5,$0:dY.$0,$1:dY.$1}):dY.$==6?new j({$:6,$0:bN.map(function(dZ){return j.bindMessage(dX,dZ);},dY.$0)}):j.NoMsg;};j.freeMessageF=function(dX,dY){return j.bindMessage(dX,dY);};j.freeMessage=function(dX){var dY;function dZ(d0){return new j({$:1,$0:d0});}return j.freeMessageF((dY=function(d0){return function(d1){return d0(a.String(d1));};}(a.id),function(d0){return dZ(dY(d0));}),dX);};j.freeMessageW=function(dX){var dY;function dZ(d0){return new j({$:2,$0:d0});}return j.freeMessageF((dY=function(d0){return function(d1){return d0(a.String(d1));};}(a.id),function(d0){return dZ(dY(d0));}),dX);};j.freeMessageI=function(dX){var dY;function dZ(d0){return new j({$:3,$0:d0});}return j.freeMessageF((dY=function(d0){return function(d1){return d0(a.String(d1));};}(a.id),function(d0){return dZ(dY(d0));}),dX);};j.isInfoF=function(dX,dY){return dY.$==3||(dY.$==4?dX(dY.$0):dY.$==6&&bS.forall(function(dZ){return j.isInfoF(dX,dZ);},j.exclnoMsg(dY.$0)));};j.isInfo=function(dX){return j.isInfoF(function(){return false;},dX);};j.isInfoI=function(dX){return j.isInfoF(function(){return true;},dX);};j.isWarningOrInfoF=function(dX,dY){return dY.$==2||(dY.$==4?dX(dY.$0):dY.$==6&&bS.forall(function(dZ){return j.isWarningOrInfoF(dX,dZ)||j.isInfoF(dX,dZ);},j.exclnoMsg(dY.$0)));};j.isWarningOrInfo=function(dX){return j.isWarningOrInfoF(function(){return false;},dX);};j.isWarningOrInfoW=function(dX){return j.isWarningOrInfoF(function(){return true;},dX);};j.isFatalF=function(dX,dY){return dY.$==0?false:dY.$==3?false:dY.$==2?false:dY.$==4?dX(dY.$0):dY.$==6?bS.exists(function(dZ){return j.isFatalF(dX,dZ);},dY.$0):true;};j.isFatal=function(dX){return j.isFatalF(function(){return true;},dX);};j.isFatalW=function(dX){return j.isFatalF(function(){return false;},dX);};j.countF=function(dX,dY){function dZ(d0,d1,d2){return function(d3){return[d0+d3[0],d1+d3[1],d2+d3[2]];};}return dY.$==0?[0,0,0]:dY.$==3?[0,0,1]:dY.$==2?[0,1,0]:dY.$==4?dX(dY.$0):dY.$==6?bS.fold(function(d0,d1){return(function(d2){return dZ(d2[0],d2[1],d2[2]);}(d0))(d1);},[0,0,0],bS.map(function(d0){return j.countF(dX,d0);},j.exclnoMsg(dY.$0))):[1,0,0];};j.count=function(dX){return j.countF(function(){return[1,0,0];},dX);};j.countW=function(dX){return j.countF(function(){return[0,1,0];},dX);};j.countI=function(dX){return j.countF(function(){return[0,0,1];},dX);};j.addMsg=function(dX,dY){return dX.$==0?dY:dX.$==6?dY.$==0?dX:dY.$==6?new j({$:6,$0:dX.$0.concat(dY.$0)}):new j({$:6,$0:dX.$0.concat([dY])}):dY.$==0?dX:dY.$==6?new j({$:6,$0:[dX].concat(dY.$0)}):new j({$:6,$0:[dX,dY]});};j.reduceMsgs=function(dX){return bS.fold(j.addMsg,j.NoMsg,dX);};j.summaryF=function(dX,dY){var dZ,d0;d0=j.countF(dX,dY);switch(d0[0]===0?d0[1]===0?0:d0[1]===1?d0[2]===0?0:(dZ=d0[1],2):(dZ=d0[1],2):d0[0]===1?d0[1]===0?d0[2]===0?0:(dZ=d0[0],1):(dZ=[d0[0],d0[1]],3):d0[1]===0?(dZ=d0[0],1):(dZ=[d0[0],d0[1]],3)){case 0:return"";case 1:return(function(d1){return function(d2){return d1("Errors   : "+a.String(d2)+"\n");};}(a.id))(dZ);case 2:return(function(d1){return function(d2){return d1("Warnings : "+a.String(d2)+"\n");};}(a.id))(dZ);case 3:return(((dR.Curried3(function(d1,d2,d3){return d1("Errors   : "+a.String(d2)+", Warnings: "+a.String(d3)+"\n");}))(a.id))(dZ[0]))(dZ[1]);}};j.summarizedF=function(dX,dY){return bT.concat("\n",bS.filter(function(dZ){return""!==dZ;},bU.ofArray([a.String(dY),j.summaryF(dX,dY)])));};j.summarized=function(dX){return j.summarizedF(function(){return[1,0,0];},dX);};j.summarizedW=function(dX){return j.summarizedF(function(){return[0,1,0];},dX);};j.summarizedI=function(dX){return j.summarizedF(function(){return[0,0,1];},dX);};l.OkM$1=function(dX){return{$:0,$0:{$:1,$0:dX},$1:j.NoMsg};};l.OkMWithMsg=function(dX,dY){return{$:0,$0:{$:1,$0:dX},$1:dY};};l.ErrorM=function(dX){return{$:0,$0:null,$1:dX};};l.OkM=function(dX){return dX.$0==null?{$:1,$0:dX.$1}:{$:0,$0:[dX.$0.$0,dX.$1]};};m.rtn=function(){bX.$cctor();return bX.rtn;};m.insertO=function(dX){var dY;dY=dX==null?null:{$:1,$0:bS.map(function(dZ){return{$:1,$0:dZ};},dX.$0)};return dY==null?(m.rtn())(null):dY.$0;};m.insertR=function(dX){return dX.$==0?bS.map(function(dY){return{$:0,$0:dY};},dX.$0):(m.rtn())(c.Error(dX.$0));};m.absorbO=function(dX){return bS.choose(a.id,dX);};m.absorbR=function(dX){return bS.choose(function(dY){return dY.$==0?{$:1,$0:dY.$0}:null;},dX);};m.ofOption=function(dX){return dX==null?[]:[dX.$0];};n.rtn=function(dX){return{$:1,$0:dX};};n.iter=function(dX){function dY(d0){return d0==null?null:{$:1,$0:dX(d0.$0)};}function dZ(d0){if(d0==null);}return function(d0){return dZ(dY(d0));};};n.join=function(dX){return dX==null?null:dX.$0;};n.apply=function(dX,dY){var dZ;return dX!=null&&dX.$==1&&(dY!=null&&dY.$==1&&(dZ=[dX.$0,dY.$0],true))?{$:1,$0:dZ[0](dZ[1])}:null;};n.mapNone=function(dX,dY){return dY==null?dX():dY.$0;};n.bindNone=function(dX,dY){return dY!=null&&dY.$==1?{$:1,$0:dY.$0}:dX();};n.op_GreaterGreaterEquals=function(dX,dY){return dX==null?null:dY(dX.$0);};n.traverseSeq=function(dX,dY){var dZ;dZ=bN.foldBack(function(d0,d1){return n.op_GreaterGreaterEquals(dX(d0),function(d2){return n.op_GreaterGreaterEquals(d1,function(d3){return n.rtn(new bY({$:1,$0:d2,$1:d3}));});});},bN.ofSeq(dY),n.rtn(bY.Empty));return dZ==null?null:{$:1,$0:dZ.$0};};n.sequenceSeq=function(dX){return n.traverseSeq(a.id,dX);};n.insertR=function(dX){var dY;return dX.$==0?(dY=dX.$0,dY==null?null:{$:1,$0:{$:0,$0:dY.$0}}):n.rtn(c.Error(dX.$0));};n.absorbR=function(dX){var dY,dZ;return dX!=null&&dX.$==1&&(dZ=dX.$0,dZ.$==0&&(dY=dZ.$0,true))?{$:1,$0:dY}:null;};o.apply=function(dX,dY){var dZ;dZ=null;return cL.Delay(function(){return cL.Bind(cL.StartChild(dX,null),function(d0){return cL.Bind(cL.StartChild(dY,null),function(d1){return cL.Bind(d0,function(d2){return cL.Bind(d1,function(d3){return cL.Return(d2(d3));});});});});});};o.sleepThen=function(dX,dY){var dZ;dZ=null;return cL.Delay(function(){return cL.Bind(cL.Sleep(dY),function(){return cL.Return(dX());});});};o.op_GreaterGreaterEquals=function(dX,dY){return cL.Bind(dX,dY);};o.traverseSeq=function(dX,dY){function dZ(d0){return cL.Return(d0);}return cL.Bind(bN.foldBack(function(d0,d1){return o.op_GreaterGreaterEquals(dX(d0),function(d2){return o.op_GreaterGreaterEquals(d1,function(d3){return cL.Return(new bY({$:1,$0:d2,$1:d3}));});});},bN.ofSeq(dY),cL.Return(bY.Empty)),function(d0){return dZ(a.id(d0));});};o.sequenceSeq=function(dX){return o.traverseSeq(a.id,dX);};o.insertO=function(dX){var dY;function dZ(d1){return{$:1,$0:d1};}function d0(d1){return cL.Return(d1);}dY=dX==null?null:{$:1,$0:cL.Bind(dX.$0,function(d1){return d0(dZ(d1));})};return dY==null?cL.Return(null):dY.$0;};o.insertR=function(dX){function dY(d0){return{$:0,$0:d0};}function dZ(d0){return cL.Return(d0);}return dX.$==0?cL.Bind(dX.$0,function(d0){return dZ(dY(d0));}):cL.Return(c.Error(dX.$0));};p.rtn=function(dX,dY){return[dY,dX];};p.bind=function(dX,dY,dZ){var d0;d0=dY(dZ);return(dX(d0[1]))(d0[0]);};p.map=function(dX){var dY;dY=function(dZ){var d0;d0=dX(dZ);return function(d1){return p.rtn(d0,d1);};};return(dR.Curried3(p.bind))(dY);};p.state=function(){bX.$cctor();return bX.state;};r=q.Obj=dR.Class({Equals:function(dX){return this===dX;},GetHashCode:function(){return -1;}},null,r);r.New=dR.Ctor(function(){},r);s=p.CEBuilder=dR.Class({Bind:function(dX,dY){return function(dZ){return p.bind(dY,dX,dZ);};},Return:function(dX){return function(dY){return p.rtn(dX,dY);};},Delay:function(dX){return dX();}},r,s);s.New=dR.Ctor(function(){r.New.call(this);},s);t.op_GreaterGreaterEquals=function(dX,dY){return function(dZ){return p.bind(dY,dX,dZ);};};t.op_BarGreaterGreater=function(dX,dY){return(p.map(dY))(dX);};u.errorf=function(dX){return dX(c.Error);};u.rtn=function(dX){return{$:0,$0:dX};};u.join=function(dX){return bZ.Bind(a.id,dX);};u.flatten=function(dX){return bZ.Bind(a.id,dX);};u.toOption=function(dX){return dX.$==0?{$:1,$0:dX.$0}:null;};u.defaultWith=function(dX,dY){return dY.$==1?dX(dY.$0):dY.$0;};u.defaultValue=function(dX,dY){return dY.$==1?dX:dY.$0;};u.failIfTrue=function(dX,dY){return dY?c.Error(dX):{$:0,$0:null};};u.failIfFalse=function(dX,dY){return!dY?c.Error(dX):{$:0,$0:null};};u.iter=function(dX,dY,dZ){u.defaultWith(dX,bZ.Map(dY,dZ));};u.get=function(dX){return u.defaultWith(function(dY){return bL.FailWith(a.String(dY));},dX);};u.ofOption=function(dX,dY){var dZ;dZ=dY==null?null:{$:1,$0:{$:0,$0:dY.$0}};return dZ==null?function(d0){return c.Error(dX(d0));}():dZ.$0;};u.insertO=function(dX){var dY;dY=dX==null?null:{$:1,$0:bZ.Map(function(dZ){return{$:1,$0:dZ};},dX.$0)};return dY==null?{$:0,$0:null}:dY.$0;};u.absorbO=function(dX,dY){return bZ.Bind(function(dZ){return u.ofOption(dX,dZ);},dY);};u.op_GreaterGreaterEquals=function(dX,dY){return bZ.Bind(dY,dX);};u.traverseSeq=function(dX,dY){return bZ.Map(a.id,bN.foldBack(function(dZ,d0){return u.op_GreaterGreaterEquals(dX(dZ),function(d1){return u.op_GreaterGreaterEquals(d0,function(d2){return u.rtn(new bY({$:1,$0:d1,$1:d2}));});});},bN.ofSeq(dY),u.rtn(bY.Empty)));};u.sequenceSeq=function(dX){return u.traverseSeq(a.id,dX);};u.result=function(){bX.$cctor();return bX.result;};u.freeMessage=function(dX){return dX.$==1?c.Error(j.freeMessage(dX.$0)):{$:0,$0:dX.$0};};u.bindP=function(dX,dY){if(dY.$==1)return c.Error(dY.$0);else try{return dX(dY.$0);}catch(dZ){return c.Error(new j({$:5,$0:dZ.message,$1:dZ.stack}));}};u.mapP=function(dX,dY){return u.bindP(function(dZ){return u.rtn(dX(dZ));},dY);};u.iterP=function(dX,dY,dZ){u.defaultWith(dX,u.mapP(dY,dZ));};u.resultP=function(){bX.$cctor();return bX.resultP;};v=u.Builder=dR.Class({Return:function(dX){return u.rtn(dX);},ReturnFrom:a.id,Bind:function(dX,dY){return bZ.Bind(dY,dX);},Zero:function(){return u.rtn();},Delay:a.id,Combine:function(dX,dY){return bZ.Bind(dY,dX);},Run:function(dX){return bZ.Bind(dX,{$:0,$0:null});},TryWith:function(dX,dY){try{return dX();}catch(dZ){return dY(dZ);}},TryFinally:function(dX,dY){try{return dX();}finally{dY();}},Using:function(dX,dY){try{return dY(dX);}finally{dX.Dispose();}},While:function(dX,dY){function dZ(d0,d1){return d0()?bZ.Bind(function(){return dZ(d0,d1);},d1()):u.rtn();}return dZ(dX,dY);},For:function(dX,dY){var dZ;dZ=this;return this.Using(cN.Get(dX),function(d0){return dZ.While(function(){return d0.MoveNext();},dZ.Delay(function(){return dY(d0.Current());}));});}},r,v);v.New=dR.Ctor(function(){r.New.call(this);},v);w.op_BarGreaterGreater=function(dX,dY){return bZ.Map(dY,dX);};w.op_GreaterGreaterEquals=function(dX,dY){return bZ.Bind(dY,dX);};w.op_RightShift=function(dX,dY,dZ){return w.op_BarGreaterGreater(dX(dZ),dY);};w.op_GreaterEqualsGreater=function(dX,dY,dZ){return w.op_GreaterGreaterEquals(dX(dZ),dY);};w.rtn=function(dX){return u.rtn(dX);};w.result=function(){bX.$cctor();return bX.result$1;};x=u.BuilderP=dR.Class({Return:function(dX){return u.rtn(dX);},ReturnFrom:a.id,Bind:function(dX,dY){return bZ.Bind(dY,dX);},Zero:function(){return u.rtn();},Delay:a.id,Combine:function(dX,dY){return bZ.Bind(dY,dX);},Run:function(dX){return u.bindP(dX,{$:0,$0:null});},TryWith:function(dX,dY){try{return dX();}catch(dZ){return dY(dZ);}},TryFinally:function(dX,dY){try{return dX();}finally{dY();}},Using:function(dX,dY){try{return dY(dX);}finally{dX.Dispose();}},While:function(dX,dY){function dZ(d0,d1){return d0()?bZ.Bind(function(){return dZ(d0,d1);},d1()):u.rtn();}return dZ(dX,dY);},For:function(dX,dY){var dZ;dZ=this;return this.Using(cN.Get(dX),function(d0){return dZ.While(function(){return d0.MoveNext();},dZ.Delay(function(){return dY(d0.Current());}));});}},r,x);x.New=dR.Ctor(function(){r.New.call(this);},x);y.dependByName=function(dX,dY,dZ){return{$:0,$0:{$:1,$0:[dX,dY]},$1:function(d0){return{$:1,$0:dZ(d0)};}};};y.bind=function(dX,dY){function dZ(d0){var d1,d2;return d0.$==1?(d1=d0.$0,{$:0,$0:null,$1:function(){return dX(d1);}}):(d2=d0.$1,{$:0,$0:d0.$0,$1:function(d3){return dZ(d2(d3));}});}return dZ(dY);};y.rtn=function(dX){return{$:1,$0:dX};};y.map=function(dX){var dY;dY=function(dZ){return y.rtn(dX(dZ));};return function(dZ){return y.bind(dY,dZ);};};y.apply=function(dX,dY){return y.bind(function(dZ){return(y.map(dZ))(dY);},dX);};y.replacer=function(dX,dY){function dZ(d0){var d1,d2,d3,d4,d5,d6;function d7(d9){return d9[0];}function d8(d9){return d3===d9;}return d0.$==1?{$:1,$0:d0.$0}:(d1=d0.$0,d1!=null&&d1.$==1)?(d2=d0.$1,(d3=d0.$0.$0[0],(d4=(d5=bS.tryFind(function(d9){return d8(d7(d9));},dX),d5==null?null:{$:1,$0:{$:0,$0:{$:1,$0:[d3,d5.$0[1]]},$1:function(d9){return dZ(d2(d9));}}}),d4==null?{$:0,$0:{$:1,$0:[d3,d0.$0.$0[1]]},$1:function(d9){return dZ(d2(d9));}}:d4.$0))):{$:0,$0:null,$1:(d6=d0.$1,function(d9){return dZ(d6(d9));})};}return dZ(dY);};y.replacerDef=function(dX,dY){function dZ(d0){var d1,d2,d3,d4,d5,d6,d7;function d8(d9,d_){return d_[0]===d3;}return d0.$==1?{$:1,$0:d0.$0}:(d1=d0.$0,d1!=null&&d1.$==1)?(d2=d0.$1,(d3=d0.$0.$0[0],(d4=(d5=bS.tryFind(function(d9){return d8(d9[0],d9[1]);},dX),d5==null?null:{$:1,$0:(d6=d5.$0,{$:0,$0:{$:1,$0:[d6[0],d6[1][1]]},$1:function(d9){return dZ(d2(d9));}})}),d4==null?{$:0,$0:{$:1,$0:[d3,d0.$0.$0[1]]},$1:function(d9){return dZ(d2(d9));}}:d4.$0))):{$:0,$0:null,$1:(d7=d0.$1,function(d9){return dZ(d7(d9));})};}return dZ(dY);};y.resolver=function(dX,dY){function dZ(d0){var d1,d2,d3,d4,d5;function d6(d8){return d8[0];}function d7(d8){return d3===d8;}return d0.$==1?d0.$0:(d1=d0.$0,d1!=null&&d1.$==1)?(d2=d0.$1,(d3=d0.$0.$0[0],dZ((d4=(d5=bS.tryFind(function(d8){return d7(d6(d8));},dX),d5==null?null:{$:1,$0:d2(d5.$0[1])}),d4==null?d2(d0.$0.$0[1]):d4.$0)))):dZ(d0.$1(void 0));}return dZ(dY);};y.depend=function(){bX.$cctor();return bX.depend;};y.getDependencies=function(dX){return bU.rev(bU.filter(function(dY){return dY.$==0?dY.$0!=null:true;},function(dY,dZ){var d0,d1,d2,d3,d4;while(true){d1=new bY({$:1,$0:dZ,$1:dY});if(dZ.$==1)return d1;else if(d0=dZ.$0,d0!=null&&d0.$==1){d2=dZ.$1;d3=dZ.$0.$0[1];dY=d1;dZ=d2(d3);}else{d4=dZ.$1;dY=d1;dZ=d4(void 0);}}}(bY.Empty,dX)));};y.toString=function(dX){return bT.concat("\n",bS.sort(bS.distinct(bS.map(function(dY){var dZ,d0;return(dY.$==0?(d0=dY.$0,d0!=null&&d0.$==1)?(dZ=[dY.$1,dY.$0.$0[0],dY.$0.$0[1]],true):(dZ=dY,false):(dZ=dY,false))?(((dR.Curried3(function(d1,d2,d3){return d1(bT.PadRight(bM.toSafe(d2),50)+" "+bM.prettyPrint(d3));}))(a.id))(dZ[1]))(dZ[2]):a.String(dZ);},y.getDependencies(dX)))));};z=y.DependBuilder=dR.Class({Bind:function(dX,dY){return y.bind(dY,dX);},Return:function(dX){return y.rtn(dX);},Delay:function(dX){return dX();}},r,z);z.New=dR.Ctor(function(){r.New.call(this);},z);A.rtn=function(){bX.$cctor();return bX.rtn$1;};A.depend=function(){bX.$cctor();return bX.depend$1;};A.op_GreaterGreaterEquals=function(dX,dY){return y.bind(dY,dX);};A.op_BarGreaterGreater=function(dX,dY){return(y.map(dY))(dX);};A.op_BarMultiplyGreater=function(dX,dY){return y.apply(dY,(A.rtn())(dX));};A.op_GreaterEqualsMultiply=function(dX,dY){return y.apply(dY,dX);};A.op_LessMultiplyGreater=function(dX,dY){return y.apply(dX,dY);};A.op_GreaterMultiplyGreater=function(dX,dY){var dZ;dZ=A.depend();return dZ.Delay(function(){return dZ.Bind(dY,function(d0){return dZ.Return(function(d1){return d0(dX(d1));});});});};B.checkError=function(){return{$:0,$0:function(){return true;}};};B.checkErrorW=function(){return{$:0,$0:function(){return false;}};};B.rtn=function(dX){return l.OkM$1(dX);};B.rtnM=function(dX){return l.OkMWithMsg(null,dX);};B.rtnr=function(dX){return u.defaultWith(l.ErrorM,bZ.Map(l.OkM$1,dX));};B.freeMessage=function(dX){return dX.$==1?c.Error(j.freeMessage(dX.$0)):{$:0,$0:dX.$0};};B.toResult=function(dX){return dX.$0==null?c.Error(dX.$1):{$:0,$0:dX.$0.$0};};B.toResultD=function(dX){return dX.$0==null?c.Error(dX.$1):{$:0,$0:[dX.$0.$0,dX.$1]};};B.toOption=function(dX){return dX.$0;};B.defaultWith=function(dX,dY){return u.defaultWith(dX,B.toResult(dY));};B.defaultValue=function(dX,dY){return u.defaultValue(dX,B.toResult(dY));};B.map=function(dX,dY){var dZ;return{$:0,$0:(dZ=dY.$0,dZ==null?null:{$:1,$0:dX(dZ.$0)}),$1:dY.$1};};B.mapMessage=function(dX,dY){return{$:0,$0:dY.$0,$1:dX(dY.$1)};};B.bind=function(dX,dY){var dZ;return dY.$0==null?{$:0,$0:null,$1:dY.$1}:(dZ=dY.$1,B.mapMessage(function(d0){return j.addMsg(dZ,d0);},dX(dY.$0.$0)));};B.bindP=function(dX,dY){var dZ;if(dY.$0==null)return{$:0,$0:null,$1:dY.$1};else{dZ=dY.$1;try{return B.mapMessage(function(d0){return j.addMsg(dZ,d0);},dX(dY.$0.$0));}catch(d0){return l.ErrorM(new j({$:5,$0:d0.message,$1:d0.stack}));}}};B.bindM=function(dX,dY){return B.bindP(dX,B.rtnM(dY));};B.check=function(dX,dY){var dZ;return(dZ=dY.$0,dZ!=null&&dZ.$==1)?j.isFatalF(dX.$0,dY.$1)?l.ErrorM(dY.$1):dY:dY;};B.mapP=function(dX,dY){return B.bindP(function(dZ){return B.rtn(dX(dZ));},dY);};B.iter=function(dX,dY,dZ){var d0;d0=B.mapP(dY,dZ);d0.$0==null?dX(d0.$1):void 0;};B.get=function(dX){return B.defaultWith(function(dY){return bL.FailWith(a.String(dY));},dX);};B.ofOption=function(dX,dY){var dZ;dZ=dY==null?null:{$:1,$0:l.OkM$1(dY.$0)};return dZ==null?function(d0){return l.ErrorM(dX(d0));}():dZ.$0;};B.ofResult=function(dX){return B.rtnr(dX);};B.insertO=function(dX){var dY;dY=dX==null?null:{$:1,$0:B.map(function(dZ){return{$:1,$0:dZ};},dX.$0)};return dY==null?l.OkM$1(null):dY.$0;};B.absorbO=function(dX,dY){return B.bindP(function(dZ){return B.ofOption(dX,dZ);},dY);};B.addMsg=function(dX,dY){return B.mapMessage(function(dZ){return j.addMsg(dX,dZ);},dY);};B.failIfFatalMsgF=function(dX,dY){var dZ;dZ=l.OkM(dY);return dZ.$==0?j.isFatalF(dX,dZ.$0[1])?l.ErrorM(dZ.$0[1]):dY:dY;};B.failIfFatalMsg=function(dX){var dY;dY=l.OkM(dX);return dY.$==0?j.isFatal(dY.$0[1])?l.ErrorM(dY.$0[1]):dX:dX;};B.failIfFatalMsgW=function(dX){var dY;dY=l.OkM(dX);return dY.$==0?j.isFatalW(dY.$0[1])?l.ErrorM(dY.$0[1]):dX:dX;};B.op_GreaterGreaterEquals=function(dX,dY){return B.bind(dY,dX);};B.traverseSeq=function(dX,dY){return B.map(a.id,bN.foldBack(function(dZ,d0){return B.op_GreaterGreaterEquals(dX(dZ),function(d1){return B.op_GreaterGreaterEquals(d0,function(d2){return B.rtn(new bY({$:1,$0:d1,$1:d2}));});});},bN.ofSeq(dY),B.rtn(bY.Empty)));};B.sequenceSeq=function(dX){return B.traverseSeq(a.id,dX);};C=B.Builder=dR.Class({Return:function(dX){return B.rtn(dX);},ReturnFrom$2:a.id,ReturnFrom$1:a.id,ReturnFrom:function(dX){return B.rtnM(dX);},Bind$1:function(dX,dY){return B.bindP(dY,dX);},Bind:function(dX,dY){return B.bindM(dY,dX);},Zero:function(){return B.rtn();},Delay:a.id,Combine:function(dX,dY){return B.bind(dY,dX);},Run:function(dX){return B.bindP(dX,l.OkM$1());},TryWith:function(dX,dY){try{return dX();}catch(dZ){return dY(dZ);}},TryFinally:function(dX,dY){try{return dX();}finally{dY();}},Using:function(dX,dY){try{return dY(dX);}finally{dX.Dispose();}},While:function(dX,dY){function dZ(d0,d1){return d0()?B.bind(function(){return dZ(d0,d1);},d1()):B.rtn();}return dZ(dX,dY);},For:function(dX,dY){var dZ;dZ=this;return this.Using(cN.Get(dX),function(d0){return dZ.While(function(){return d0.MoveNext();},dZ.Delay(function(){return dY(d0.Current());}));});}},r,C);C.New=dR.Ctor(function(){r.New.call(this);},C);D.op_BarGreaterGreater=function(dX,dY){return B.mapP(dY,dX);};D.op_GreaterGreaterEquals=function(dX,dY){return B.bindP(dY,dX);};D.op_RightShift=function(dX,dY,dZ){return D.op_BarGreaterGreater(dX(dZ),dY);};D.op_GreaterEqualsGreater=function(dX,dY,dZ){return D.op_GreaterGreaterEquals(dX(dZ),dY);};D.rtn=function(dX){return B.rtn(dX);};E.resultM=function(){bX.$cctor();return bX.resultM;};F.mapError=function(dX,dY){function dZ(d1){return B.mapMessage(dX,d1);}function d0(d1){return cL.Return(d1);}return cL.Bind(dY,function(d1){return d0(dZ(d1));});};F.freeMessage=function(dX){function dY(dZ){return cL.Return(dZ);}return cL.Bind(dX,function(dZ){return dY(B.freeMessage(dZ));});};F.rtn=function(dX){return cL.Return(l.OkM$1(dX));};F.rtnr=function(dX){return cL.Return(B.rtnr(dX));};F.rtnR=function(dX){return cL.Return(dX);};F.rtnM=function(dX){return cL.Return(B.rtnM(dX));};F.rtnrA=function(dX){function dY(dZ){return cL.Return(dZ);}return cL.Bind(dX,function(dZ){return dY(B.ofResult(dZ));});};F.errorMsgf=function(dX){var dY;function dZ(d1){return new j({$:1,$0:d1});}function d0(d1){return cL.Return(d1);}return dX((dY=function(d1){return l.ErrorM(dZ(d1));},function(d1){return d0(dY(d1));}));};F.iterS=function(dX,dY,dZ){throw"iterS cannot be used in JavaScript!";};F.iterA=function(dX,dY,dZ){function d0(d2){B.iter(dX,dY,d2);}function d1(d2){return cL.Return(d2);}cL.Start(cL.Bind(dZ,function(d2){return d1(d0(d2));}),null);};F.iterpS=function(dX,dY){function dZ(d0){c.print(d0);}F.iterS(function(d0){return dZ(j.summarized(d0));},dX,dY);};F.iterpA=function(dX,dY){function dZ(d0){c.print(d0);}F.iterA(function(d0){return dZ(j.summarized(d0));},dX,dY);};F.bind=function(dX,dY){var dZ;dZ=null;return cL.Delay(function(){return cL.TryWith(cL.Delay(function(){return cL.Bind(dY,function(d0){var d1,d2;function d3(d5){return B.addMsg(d2,d5);}function d4(d5){return cL.Return(d5);}d1=l.OkM(d0);return d1.$==1?cL.Return(l.ErrorM(d1.$0)):(d2=d1.$0[1],cL.Bind(dX(d1.$0[0]),function(d5){return d4(d3(d5));}));});}),function(d0){return cL.Return(l.ErrorM(new j({$:5,$0:d0.message,$1:d0.stack})));});});};F.bindr=function(dX,dY){return F.bind(dX,F.rtnr(dY));};F.bindM=function(dX,dY){return F.bind(dX,F.rtnM(dY));};F.bindrA=function(dX,dY){return F.bind(dX,F.rtnrA(dY));};F.bindR=function(dX,dY){return F.bind(dX,F.rtnR(dY));};F.map=function(dX,dY){return F.bind(function(dZ){return F.rtn(dX(dZ));},dY);};F.whileLoop=function(dX,dY){return dX()?F.bind(function(){return F.whileLoop(dX,dY);},dY()):F.rtn();};F.op_GreaterGreaterEquals=function(dX,dY){return F.bind(dY,dX);};F.traverseSeq=function(dX,dY){return F.map(a.id,bN.foldBack(function(dZ,d0){return F.op_GreaterGreaterEquals(dX(dZ),function(d1){return F.op_GreaterGreaterEquals(d0,function(d2){return F.rtn(new bY({$:1,$0:d1,$1:d2}));});});},bN.ofSeq(dY),F.rtn(bY.Empty)));};F.sequenceSeq=function(dX){return F.traverseSeq(a.id,dX);};F.insertO=function(dX){var dY;dY=dX==null?null:{$:1,$0:F.map(function(dZ){return{$:1,$0:dZ};},dX.$0)};return dY==null?F.rtn(null):dY.$0;};F.insertR=function(dX){return dX.$==0?F.map(function(dY){return{$:0,$0:dY};},dX.$0):F.rtn(c.Error(dX.$0));};F.absorbR=function(dX){var dY;function dZ(d0){return cL.Return(d0);}return cL.Bind(dX,(dY=function(d0){return B.bindP(a.id,d0);},function(d0){return dZ(dY(d0));}));};F.absorbO=function(dX,dY){function dZ(d1){return B.absorbO(dX,d1);}function d0(d1){return cL.Return(d1);}return cL.Bind(dY,function(d1){return d0(dZ(d1));});};F.getResultM=function(dX){function dY(dZ){return cL.Return(dZ);}return cL.Bind(dX,function(dZ){return dY(l.OkM$1(dZ));});};G=F.AsyncResultMBuilder=dR.Class({ReturnFrom$4:a.id,ReturnFrom$3:function(dX){return F.rtnr(dX);},ReturnFrom$2:function(dX){return F.rtnM(dX);},ReturnFrom$1:function(dX){return F.rtnR(dX);},ReturnFrom:function(dX){return F.rtnrA(dX);},Return:function(dX){return F.rtn(dX);},Zero:function(){return F.rtn();},Bind$4:function(dX,dY){return F.bind(dY,dX);},Bind$3:function(dX,dY){return F.bindr(dY,dX);},Bind$2:function(dX,dY){return F.bindM(dY,dX);},Bind$1:function(dX,dY){return F.bindR(dY,dX);},Bind:function(dX,dY){return F.bindrA(dY,dX);},Combine$1:function(dX,dY){return F.bind(dY,dX);},Combine:function(dX,dY){return F.bind(dY,F.rtnR(dX));},Delay:a.id,Run:function(dX){return F.bind(dX,F.rtn());},TryWith:function(dX,dY){var dZ;dZ=null;return cL.Delay(function(){return cL.TryWith(cL.Delay(function(){return dX();}),function(d0){return dY(d0);});});},TryFinally:function(dX,dY){var dZ;dZ=null;return cL.Delay(function(){return cL.TryFinally(cL.Delay(function(){return dX();}),function(){dY();});});},Using:function(dX,dY){return cL.Using(dX,dY);},While:function(dX,dY){return F.whileLoop(dX,dY);},For:function(dX,dY){var dZ;dZ=this;return this.Using(cN.Get(dX),function(d0){return dZ.While(function(){return d0.MoveNext();},dZ.Delay(function(){return dY(d0.Current());}));});}},r,G);G.New=dR.Ctor(function(){r.New.call(this);},G);H.op_BarGreaterGreater=function(dX,dY){return F.map(dY,dX);};H.op_GreaterGreaterEquals=function(dX,dY){return F.bind(dY,dX);};H.op_GreaterMinusGreater=function(dX,dY,dZ){return H.op_BarGreaterGreater(dX(dZ),dY);};H.op_GreaterEqualsGreater=function(dX,dY,dZ){return H.op_GreaterGreaterEquals(dX(dZ),dY);};H.rtn=function(dX){return F.rtn(dX);};I.asyncResultM=function(){bX.$cctor();return bX.asyncResultM;};I["AsyncResultMBuilder.ReturnFrom"]=function(dX,dY){function dZ(d0){return cL.Return(d0);}return cL.Bind(dY,function(d0){return dZ(l.OkM$1(d0));});};I["AsyncResultMBuilder.Bind"]=function(dX,dY,dZ){function d0(d1){return cL.Return(d1);}return F.bind(dZ,cL.Bind(dY,function(d1){return d0(l.OkM$1(d1));}));};I["AsyncResultMBuilder.Combine"]=function(dX,dY,dZ){function d0(d1){return cL.Return(d1);}return F.bind(dZ,cL.Bind(dY,function(d1){return d0(l.OkM$1(d1));}));};J.splitByChar=function(dX,dY){return bT.SplitChars(dY,[dX],0);};J.splitInTwoO=function(dX,dY){var dZ;dZ=dY.indexOf(dX);return dZ===-1?null:{$:1,$0:[c["String.Left"](dY,dZ),dY.substring(dZ+dX.length)]};};J.delimitedO=function(dX,dY,dZ){var d0,d1,d2,d3,d4;d0=J.splitInTwoO(dX,dZ);return d0==null?null:(d1=d0.$0,(d2=d1[0],(d3=J.splitInTwoO(dY,d1[1]),d3==null?null:{$:1,$0:(d4=d3.$0,[d2,d4[0],d4[1]])})));};J.contains=function(dX,dY){return dY.indexOf(dX)!=-1;};J.trim=function(dX){return bT.Trim(dX);};J.append=function(dX,dY){return dX+dY;};J.skipFirstLine=function(dX){var dY;dY=dX.indexOf("\n");return dY<0?"":bO.string(dX,{$:1,$0:dY+1},null);};J.unindent=function(dX){var dY,dZ,d0,d1;dY=bT.SplitChars(dX,["\n"],0);dZ=(d0=bS.tryFindIndex(function(d2){return" "!==d2;},(d1=bS.tryFind(function(d2){return bT.Trim(d2)!=="";},dY),d1==null?"":d1.$0)),d0==null?0:d0.$0);return bS.filter(function(d2){return!bT.StartsWith(d2,"# 1 ");},bS.map(function(d2){return d2.length<=dZ?"":d2.substring(dZ);},dY));};J.indent=function(dX,dY){var dZ,d0;dZ=bT.SplitChars(dY,["\n"],0);return bS.map((d0=bT.replicate(dX," "),function(d1){return d0+d1;}),dZ);};J.unindentStr=function(){bX.$cctor();return bX.unindentStr;};J.indentStr=function(dX){function dY(d0){return J.indent(dX,d0);}function dZ(d0){return bT.concat("\n",d0);}return function(d0){return dZ(dY(d0));};};J.skipLastLine=function(){bX.$cctor();return bX.skipLastLine;};J.StartsWith=function(dX,dY){return bT.StartsWith(dY,dX)?{$:1,$0:bO.string(dY,{$:1,$0:dX.length},null)}:null;};J.EndsWith=function(dX,dY){return bT.EndsWith(dY,dX)?{$:1,$0:bO.string(dY,{$:1,$0:0},{$:1,$0:dY.length-dX.length-1})}:null;};J.thousands=function(dX){var dY,dZ,d0;dY=a.String(dX);dZ=dY.length%3;d0=dZ===0?3:dZ;return bT.concat(",",bU.ofSeq(bS.delay(function(){return bS.append([bO.string(dY,{$:1,$0:0},{$:1,$0:d0-1})],bS.delay(function(){return bS.map(function(d1){return bO.string(dY,{$:1,$0:d1*3+d0},{$:1,$0:d1*3+d0+2});},bL.range(0,((dY.length-d0)/3>>0)-1));}));})));};K.tryParseWith=function(dX){function dY(dZ,d0){return dZ?{$:1,$0:d0}:null;}return function(dZ){return dY.apply(null,dX(dZ));};};K.parseDateO2=function(){bX.$cctor();return bX.parseDateO2;};K.parseDateO=function(){bX.$cctor();return bX.parseDateO;};K.parseIntO=function(){bX.$cctor();return bX.parseIntO;};K.parseInt64O=function(){bX.$cctor();return bX.parseInt64O;};K.parseSingleO=function(){bX.$cctor();return bX.parseSingleO;};K.parseDoubleO=function(){bX.$cctor();return bX.parseDoubleO;};K.parseGuidO=function(){bX.$cctor();return bX.parseGuidO;};K.Date=function(){bX.$cctor();return bX["|Date|_|"];};K.Int=function(){bX.$cctor();return bX["|Int|_|"];};K.Int64=function(){bX.$cctor();return bX["|Int64|_|"];};K.Single=function(){bX.$cctor();return bX["|Single|_|"];};K.Double=function(){bX.$cctor();return bX["|Double|_|"];};K.Guid=function(){bX.$cctor();return bX["|Guid|_|"];};L.serialize=function(dX,dY,dZ){return[dX,dY][0](dZ);};L.Field=function(dX,dY){return dY.tryField(dX);};L.sprintA=function(dX){var dY;dY=bT.concat(", ",dX);return(function(dZ){return function(d0){return dZ("["+bM.toSafe(d0)+"]");};}(a.id))(dY);};L.toJsonString=function(dX){return bN.ofSeq(bS.delay(function(){return bS.append(["\""],bS.delay(function(){return bS.append(!bT.IsNullOrEmpty(dX)?bS.collect(function(dY){var dZ,d0;dZ=dX[dY];d0=dZ.charCodeAt();return d0>=0&&d0<=7||d0===11||d0>=14&&d0<=31?(function(d1){return function(d2){return d1("\\u"+bM.padNumLeft(d2.toString(16),4));};}(a.id))(d0):dZ==="\u0008"?"\\b":dZ==="\u0009"?"\\t":dZ==="\n"?"\\n":dZ==="\u000c"?"\\f":dZ==="\r"?"\\r":dZ==="\""?"\\\"":dZ==="\\"?"\\\\":[dZ];},bL.range(0,dX.length-1)):[],bS.delay(function(){return["\""];}));}));})).join("");};L.serString=function(){bX.$cctor();return bX.serString;};L.serFloat=function(){bX.$cctor();return bX.serFloat;};L.serInt=function(){bX.$cctor();return bX.serInt;};L.serInt64=function(){bX.$cctor();return bX.serInt64;};L.serBool=function(){bX.$cctor();return bX.serBool;};L.serDate=function(){bX.$cctor();return bX.serDate;};L.serField=function(dX,dY,dZ,d0,d1){var d2;function d3(d4){return{$:1,$0:d4};}return[dX,(d2=function(d4){return d0(dY(d4));},function(d4){return d3(d2(d4));}),function(d4){var d5,d6,d7;function d8(d_){return dZ(d_,d4);}function d9(d_){return d_==null?d4:d_.$0;}d5=(d6=(d7=function(d_){return d_==null?null:{$:1,$0:d8(d_.$0)};},function(d_){return d7(d1(d_));}),function(d_){return d_==null?null:d6(d_.$0);});return function(d_){return d9(d5(d_));};}];};L.serFieldO=function(dX,dY,dZ,d0,d1){function d2(d3){return d3==null?null:{$:1,$0:d0(d3.$0)};}return[dX,function(d3){return d2(dY(d3));},function(d3){var d4,d5;function d6(d8){return dZ(d8,d3);}function d7(d8){return d8==null?d3:d8.$0;}d4=(d5=function(d8){return d6(d1(d8));},function(d8){return d8==null?null:{$:1,$0:d5(d8.$0)};});return function(d8){return d7(d4(d8));};}];};L.serSeq=function(dX,dY){var dZ,d0,d1;dZ=[dX,dY];return[(d0=(d1=dZ[0],function(d2){return bS.map(d1,d2);}),function(d2){return L.sprintA(d0(d2));}),function(d2){var d3,d4,d5,d6;d3=(d4=d2.tryArray(),(d5=(d6=dZ[1],function(d7){return bN.choose(d6,d7);}),d4==null?null:{$:1,$0:d5(d4.$0)}));return d3==null?null:{$:1,$0:d3.$0};}];};L.serArr=function(dX,dY){var dZ,d0,d1;dZ=[dX,dY];return[(d0=(d1=dZ[0],function(d2){return bN.map(d1,d2);}),function(d2){return L.sprintA(d0(d2));}),function(d2){var d3,d4,d5;d3=d2.tryArray();d4=(d5=dZ[1],function(d6){return bN.choose(d5,d6);});return d3==null?null:{$:1,$0:d4(d3.$0)};}];};L.serLst=function(dX,dY){var dZ,d0,d1;dZ=[dX,dY];return[(d0=(d1=dZ[0],function(d2){return bU.map(d1,d2);}),function(d2){return L.sprintA(d0(d2));}),function(d2){var d3,d4,d5,d6;d3=(d4=d2.tryArray(),(d5=(d6=dZ[1],function(d7){return bN.choose(d6,d7);}),d4==null?null:{$:1,$0:d5(d4.$0)}));return d3==null?null:{$:1,$0:bU.ofSeq(d3.$0)};}];};L.serSet=function(dX,dY){var dZ,d0,d1;dZ=[dX,dY];return[(d0=(d1=dZ[0],function(d2){return new b2.New$1(cS.OfSeq(bS.map(d1,d2)));}),function(d2){return L.sprintA(d0(d2));}),function(d2){var d3,d4,d5,d6;d3=(d4=d2.tryArray(),(d5=(d6=dZ[1],function(d7){return bN.choose(d6,d7);}),d4==null?null:{$:1,$0:d5(d4.$0)}));return d3==null?null:{$:1,$0:new b2.New(d3.$0)};}];};L.serOpt=function(dX,dY){var dZ,d0,d1;function d2(d3){return d3==null?"null":d3.$0;}dZ=[dX,dY];return[(d0=(d1=dZ[0],function(d3){return d3==null?null:{$:1,$0:d1(d3.$0)};}),function(d3){return d2(d0(d3));}),function(d3){return{$:1,$0:d3.isNull()?null:dZ[1](d3)};}];};L.serDup=function(dX,dY){return[function(dZ){return(((dR.Curried3(function(d0,d1,d2){return d0("["+bM.toSafe(d1)+", "+bM.toSafe(d2)+"]");}))(a.id))(dX[0](dZ[0])))(dY[0](dZ[1]));},function(dZ){var d0,d1,d2,d3,d4,d5;d0=dZ.tryArray();return d0!=null&&d0.$==1&&((d2=d0.$0,!bP.Equals(d2,null)&&d2.length===2)&&(d1=[bN.get(d0.$0,0),bN.get(d0.$0,1)],true))?(d3=dX[1](d1[0]),(d4=dY[1](d1[1]),d3!=null&&d3.$==1&&(d4!=null&&d4.$==1&&(d5=[d3.$0,d4.$0],true))?{$:1,$0:[d5[0],d5[1]]}:null)):null;}];};L.serTrp=function(dX,dY,dZ){return[function(d0){return((((dR.Curried(function(d1,d2,d3,d4){return d1("["+bM.toSafe(d2)+", "+bM.toSafe(d3)+", "+bM.toSafe(d4)+"]");},4))(a.id))(dX[0](d0[0])))(dY[0](d0[1])))(dZ[0](d0[2]));},function(d0){var d1,d2,d3,d4,d5,d6,d7;d1=d0.tryArray();return d1!=null&&d1.$==1&&((d3=d1.$0,!bP.Equals(d3,null)&&d3.length===3)&&(d2=[bN.get(d1.$0,0),bN.get(d1.$0,1),bN.get(d1.$0,2)],true))?(d4=dX[1](d2[0]),(d5=dY[1](d2[1]),(d6=dZ[1](d2[2]),d4!=null&&d4.$==1&&(d5!=null&&d5.$==1&&(d6!=null&&d6.$==1&&(d7=[d4.$0,d5.$0,d6.$0],true)))?{$:1,$0:[d7[0],d7[1],d7[2]]}:null))):null;}];};L.serPair=function(dX,dY,dZ,d0){return L.serDup([dX,dY],[dZ,d0]);};L.serMap=function(dX,dY,dZ,d0){var d1,d2,d3,d4,d5,d6;function d7(d9){return[d9.K,d9.V];}function d8(d9){return new b3.New(d9);}d1=(d2=L.serDup([dX,dY],[dZ,d0]),L.serSeq(d2[0],d2[1]));return[(d3=function(d9){return bS.map(d7,d9);},(d4=d1[0],function(d9){return d4(d3(d9));})),(d5=d1[1],(d6=function(d9){return d9==null?null:{$:1,$0:d8(d9.$0)};},function(d9){return d6(d5(d9));}))];};L.serTypedRegisters=function(){bX.$cctor();return bX.serTypedRegisters;};L.map=function(dX,dY,dZ,d0){function d1(d2){return d2==null?null:{$:1,$0:dY(d2.$0)};}return[function(d2){return dZ(dX(d2));},function(d2){return d1(d0(d2));}];};L.mapO=function(dX,dY,dZ,d0){function d1(d2){return d2==null?null:dY(d2.$0);}return[function(d2){return dZ(dX(d2));},function(d2){return d1(d0(d2));}];};L.serC=function(dX,dY,dZ){return L.mapO(function(){return dZ;},function(d0){return bP.Equals(d0,dZ)?{$:1,$0:null}:null;},dX,dY);};L.serCn=function(dX,dY,dZ){return L.map(a.ignore,a.ignore,dX,dY);};L.serGuid=function(){bX.$cctor();return bX.serGuid;};M.New=function(dX,dY,dZ,d0,d1,d2,d3,d4,d5){return{tryFloat:dX,tryInt:dY,tryString:dZ,tryBool:d0,tryArray:d1,tryField:d2,isObject:d3,isNull:d4,toString:d5};};N.New=function(dX,dY,dZ,d0,d1,d2,d3){return{snpId:dX,snpName:dY,snpContent:dZ,snpParentIdO:d0,snpPredIds:d1,snpProperties:d2,snpModified:d3};};O.getNextModified=function(){return dS.now();};O.New=function(dX,dY,dZ){return N.New(f.Tag$4(bK.NewGuid()),dX,dY,dZ,new b2.New$1(null),[],O.getNextModified());};O.defaultSnippet=function(){bX.$cctor();return bX.defaultSnippet;};O.indirectPredecessorIds=function(dX,dY,dZ,d0){var d1;d1=new b2.New(bV.toArray(dZ));return function(d2,d3,d4){var d5,d6,d7,d8,d9,d_,d$,ea;while(true)if(d4.get_IsEmpty())return d2;else{d5=bS.head(d4);d6=d4.Remove(d5);d7=d3.Add(d5);d8=dX(d5);if(d8!=null&&d8.$==1){d9=d8.$0;d_=b2.op_Addition(new b2.New(bV.toArray(d9.snpParentIdO)),new b2.New(d9.snpPredIds));d$=b2.op_Addition(d2,d_);ea=b2.op_Addition(d6,b2.op_Subtraction(d_,d7));d2=d$;d3=d7;d4=ea;}else{d3=d7;d4=d6;}}}(d1,(new b2.New$1(null)).Add(dY),b2.op_Addition(d1,d0));};O.allPredecessors=function(dX,dY){var dZ;dZ=new b2.New(bV.toArray(dY.snpParentIdO));return function(d0,d1,d2){var d3,d4,d5,d6,d7,d8,d9,d_;while(true)if(d2.get_IsEmpty())return d0;else{d3=bS.head(d2);d4=d2.Remove(d3);d5=d1.Add(d3);d6=dX(d3);if(d6!=null&&d6.$==1){d7=d6.$0;d8=b2.op_Addition(new b2.New(bV.toArray(d7.snpParentIdO)),new b2.New(d7.snpPredIds));d9=d0.Add(d7);d_=b2.op_Addition(d4,b2.op_Subtraction(d8,d5));d0=d9;d1=d5;d2=d_;}else{d1=d5;d2=d4;}}}(new b2.New$1(null),(new b2.New$1(null)).Add(dY.snpId),b2.op_Addition(dZ,new b2.New(dY.snpPredIds)));};O.getLevel=function(dX,dY){var dZ,d0,d1,d2;dZ=0;d0=dY;while(true){d2=(d1=d0.snpParentIdO,d1==null?null:dX(d1.$0));if(d2!=null&&d2.$==1){dZ=dZ+1;d0=d2.$0;}else return dZ;}};O.hasChildren=function(dX,dY){var dZ,d0,d1,d2;dZ=dX();d0=bS.tryFindIndex(function(d3){return bP.Equals(d3.snpId,dY.snpId);},dZ);return d0!=null&&d0.$==1&&(d1=(d2=bS.tryItem(d0.$0+1,dZ),d2==null?null:{$:1,$0:bP.Equals(d2.$0.snpParentIdO,{$:1,$0:dY.snpId})}),d1==null?false:d1.$0);};P.serSnippetId=function(){bX.$cctor();return bX.serSnippetId;};P.serSnippet=function(){bX.$cctor();return bX.serSnippet;};P.getModel=function(dX,dY,dZ){return Q.New(bN.ofSeq(dX),dY,dZ);};P.serModel=function(){bX.$cctor();return bX.serModel;};Q.New=function(dX,dY,dZ){return{snippets:dX,modified:dY,collapsed:dZ};};S.defineWebComponent=function(dX,dY,dZ){try{dP.log("defineWebComponent: "+dX);cM.setPrototypeOf(dZ.prototype,self.HTMLElement.prototype);cM.setPrototypeOf(dZ,self.HTMLElement);cM.setPrototypeOf(dY.prototype,dZ.prototype);self.customElements.define(dX,dY);}catch(d0){(function(d1){return d1("Failed to define WebComponent. Not supported.");}(function(d1){dP.log(d1);}));}};T.css=function(){bX.$cctor();return bX.css;};T.tabStrip=function(dX,dY,dZ,d0,d1){var d2;d2=b$.Element("div",[cC.Create("class",(((dR.Curried3(function(d3,d4,d5){return d3("tab-strip "+bM.toSafe(d4)+" "+bM.toSafe(d5));}))(a.id))(dY?"top":"bottom"))(dZ?"horizontal":"vertical"))],bU.ofSeq(bS.delay(function(){return bS.collect(function(d3){var d4;d4=d3[0];return[b8.New$1().Content(b$.Element("div",[cA.Dynamic("class",b9.Map(function(d5){return"tab"+(d5===d4+1?" selected":"");},dX.get_View())),cC.Create("draggable","true"),cC.HandlerImpl("click",function(){return function(){return dX.Set(d4+1);};})],[b$.TextNode(d3[1][0])]))];},bS.indexed(d0));})));return b$.Element("div",[cC.Create("class","tab-panel")],bU.ofSeq(bS.delay(function(){return bS.append(dY?[d2]:[],bS.delay(function(){return bS.append([b$.Element("div",[cC.Create("class","tab-content")],[d1])],bS.delay(function(){return bS.append(!dY?[d2]:[],bS.delay(function(){return bS.append([b$.Element("style",bY.Empty,bU.ofArray([b$.TextNode(T.css())]))],bS.delay(function(){return[b$.Element("style",bY.Empty,bU.ofArray([b$.TextView(b9.Map(function(d3){return function(d4){return d3("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(d4)+")) { display: grid }\r\n                                           ");};}(a.id),dX.get_View()))]))];}));}));}));}));})));};T.init=function(){bX.$cctor();return bX.init;};U=T.WcTabStripT=dR.Class({connectedCallback:function(){var dX,dY,dZ,d0;function d1(){var d2,d3,d4;d3=!dY.hasAttribute("bottom");d4=bU.ofSeq(bS.delay(function(){return bS.collect(function(d5){var d6;d6=dY.childNodes[d5-1];return bP.Equals(d6.nodeType,cf.ELEMENT_NODE)?[[d6.hasAttribute("tabname")?d6.getAttribute("tabname"):(function(d7){return function(d8){return d7("Tab "+a.String(d8));};}(a.id))(d5),d6]]:[];},bL.range(1,dY.childNodes.length));}));while(d0.childNodes.length>0)d0.removeChild(d0.lastChild);d2=T.tabStrip(dX.selected,d3,true,d4,b$.Element("slot",bY.Empty,bY.Empty));c0.LoadLocalTemplates("");b$.Run(d0,d2);}dX=this;!this.added?(dY=this,dZ=dY.attachShadow({mode:"open"}),d0=self.document.createElement("div"),dZ.appendChild(d0),d1(),dY.addEventListener("DOMSubtreeModified",c.delayed(50,d1)),this.added=true):void 0;}},r,U);U.Constructor=function(){var dX,dY;dX=(dY=dT.construct(self.HTMLElement,[],this.__proto__.constructor),dY);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dX);return dX;};U.New=dR.Ctor(function(){r.New.call(this);this.added=false;this.selected=cb.Create$1(1);(function(dX){return dX("WcTabStripT initializer");}(function(dX){dP.log(dX);}));},U);V.set_layoutHorizontal=function(dX){bX.$cctor();bX.layoutHorizontal=dX;};V.layoutHorizontal=function(){bX.$cctor();return bX.layoutHorizontal;};V.set_layoutVertical=function(dX){bX.$cctor();bX.layoutVertical=dX;};V.layoutVertical=function(){bX.$cctor();return bX.layoutVertical;};V.init=function(dX,dY){var dZ;dZ=new W.New();V.set_layoutHorizontal(dX);V.set_layoutVertical(dY);S.defineWebComponent("wcomp-splitter",W.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};W=V.WcSplitterT=dR.Class({connectedCallback:function(){var dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;function eb(ej){var ek,el,em,en;ek=d4?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];el=a.parseFloat("0"+a.jQuery(ej.parentElement.parentElement).css(ek[0]));em=a.parseFloat("0"+a.jQuery(ej.parentElement.parentElement).css(ek[1]));d7.Set(a.parseFloat("0"+a.jQuery(ej.parentElement.parentElement).css(ek[2])));d6[0]=el+em;en=dX.getBoundingClientRect();return d4?d3?[en.width,en.height]:[-en.width,en.height]:d3?[en.height,en.width]:[-en.height,en.width];}function ec(ej){return d4?ej.clientX:ej.clientY;}function ed(ej){var ek,el;ek=(ec(ej)-d_[0])*100/d5[0][0]+d9[0];d2.Set((el=bP.Compare(d0,ek)===1?d0:ek,bP.Compare(d1,el)===-1?d1:el));}function ee(){if(d8[0]){d8[0]=false;self.removeEventListener("mousemove",ed,false);self.removeEventListener("mouseup",ee,false);}}function ef(ej){var ek,el;if(!d8[0]){d8[0]=true;d9[0]=d2.Get();d_[0]=ec(ej);d5[0]=(ek=(el=d$[0],el==null?null:{$:1,$0:eb(el.$0)}),ek==null?[100,500]:ek.$0);self.addEventListener("mousemove",ed,false);self.addEventListener("mouseup",ee,false);ej.preventDefault();}}function eg(ej,ek,el,em){return[(ej-ek-el)*em/100,(ej-ek-el)*(100-em)/100];}function eh(ej,ek){return(((((dR.Curried(function(el,em,en,eo,ep){return el(" "+em.toFixed(2)+"px "+en.toFixed(2)+"px ; "+bM.toSafe(eo)+" : "+ep.toFixed(2)+"px; ");},5))(a.id))(ej))(ek))(d4?"height":"width"))(d5[0][1]);}function ei(){var ej;ej=d$[0];(n.iter(function(ek){d5[0]=eb(ek);}))(ej);d2.Set(d2.Get());}if(!this.added){dX=this;dY=dX.attachShadow({mode:"open"});dZ=self.document.createElement("div");d0=dX.hasAttribute("min")?a.parseFloat(dX.getAttribute("min")):4;d1=dX.hasAttribute("max")?a.parseFloat(dX.getAttribute("max")):96;d2=cb.Create$1(dX.hasAttribute("value")?a.parseFloat(dX.getAttribute("value")):50);d3=!dX.hasAttribute("second");d4=dX.hasAttribute("vertical");d5=[[0,0]];d6=[0];d7=cb.Create$1(0);d8=[false];d9=[0];d_=[0];d$=[null];ea=(((((d4?V.layoutVertical():V.layoutHorizontal())(b9.Map(function(ej){var ek;ek=eg(d5[0][0],d7.Get(),d6[0],ej);return eh.apply(null,ek);},d2.get_View())))(function(){cj.addResizeObserver(ei,dX);ei();}))(function(ej){d$[0]={$:1,$0:ej};ei();}))(function(ej){ef(ej);}))(b9.Map(function(ej){return function(ek){return ej(bM.prettyPrint(ek)+"px");};}(a.id),d7.get_View()));c0.LoadLocalTemplates("");b$.Run(dZ,ea);dY.appendChild(dZ.firstChild);this.added=true;}}},r,W);W.Constructor=function(){var dX,dY;dX=(dY=dT.construct(self.HTMLElement,[],this.__proto__.constructor),dY);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dX);return dX;};W.New=dR.Ctor(function(){r.New.call(this);this.added=false;(function(dX){return dX("WcSplitterT initializer");}(function(dX){dP.log(dX);}));},W);X.newVar=function(dX){return _6.New(dX,a.ignore,null,null,b9.Const(false),null,null);};X.loader=function(){bX.$cctor();return bX.loader;};X.render=function(dX){var dY;return b$.Async((dY=null,cL.Delay(function(){return cL.Bind(X.loader(),function(){return cL.Return(b$.Element("div",[cC.OnAfterRenderImpl(function(dZ){var d0,d1;d0=(d1=dZ.parentElement,self.monaco.editor.create(d1,dX.options,dX.overrides));cj.addResizeObserver(function(){d0.layout();},dZ.parentElement);dZ.parentNode.removeChild(dZ);dX.editorO={$:1,$0:d0};(n.iter(function(d2){d2(d0);}))(dX.onRender);ck.bindVarEditor(function(d2){d0.onDidChangeModelContent(d2);},function(){return d0.getValue();},function(d2){d0.setValue(d2);},dX.onChange,dX["var"]);})],[]));});})));};X.setVar=function(dX,dY){return _6.New(dX,dY.onChange,dY.onRender,dY.editorO,dY.disabled,dY.options,dY.overrides);};X.onChange=function(dX,dY){return _6.New(dY["var"],dX,dY.onRender,dY.editorO,dY.disabled,dY.options,dY.overrides);};X.onRender=function(dX,dY){return _6.New(dY["var"],dY.onChange,{$:1,$0:dX},dY.editorO,dY.disabled,dY.options,dY.overrides);};X.disabled=function(dX,dY){return _6.New(dY["var"],dY.onChange,dY.onRender,dY.editorO,dX,dY.options,dY.overrides);};X["var"]=function(dX){return dX["var"];};X.newText=function(dX){return X.newVar(cb.Create$1(dX));};X.newVarO=function(dX){var dY;dY=X.newVar(cb.Lens(dX,function(dZ){return dZ==null?"":dZ.$0;},function(dZ,d0){return dZ==null?null:{$:1,$0:d0};}));return X.disabled(b9.Map(function(dZ){return dZ==null;},dX.get_View()),dY);};Y.New=function(dX,dY){return{column:dX,lineNumber:dY};};Z.New=function(dX,dY,dZ,d0){return{startColumn:dX,endColumn:dY,startLineNumber:dZ,endLineNumber:d0};};_0.New=function(dX,dY){return{range:dX,uri:dY};};_1.New=function(dX,dY){return{value:dX,isTrusted:dY};};_2.New=function(dX,dY,dZ,d0,d1,d2){return{startColumn:dX,endColumn:dY,startLineNumber:dZ,endLineNumber:d0,severity:d1,message:d2};};_3.New=function(dX,dY,dZ){return{kind:dX,label:dY,detail:dZ};};_4.New=function(dX,dY){return{contents:dX,range:dY};};_5=X.Editor=dR.Class({},r,_5);_5.New=dR.Ctor(function(){r.New.call(this);},_5);_6.New=function(dX,dY,dZ,d0,d1,d2,d3){return{"var":dX,onChange:dY,onRender:dZ,editorO:d0,disabled:d1,options:d2,overrides:d3};};_7.iterEditor=function(dX,dY){var dZ;dZ=dX.editorO;dZ!=null&&dZ.$==1?dY(dZ.$0):void 0;};_7.mapEditor=function(dX,dY){var dZ;dZ=dX.editorO;return dZ!=null&&dZ.$==1?{$:1,$0:dY(dZ.$0)}:null;};_7.bindEditor=function(dX,dY){var dZ;dZ=dX.editorO;return dZ!=null&&dZ.$==1?dY(dZ.$0):null;};_7.posGen2Ed=function(dX){return Y.New(dX.col,dX.line);};_7.posEd2Gen=function(dX){return cl.New(dX.lineNumber,dX.column);};_7.indexFromPos=function(dX,dY){var dZ;dZ=_7.mapEditor(dX,function(d0){return d0.getModel().getOffsetAt(_7.posGen2Ed(dY));});return dZ==null?-1:dZ.$0;};_7.posFromIndex=function(dX,dY){var dZ;dZ=_7.mapEditor(dX,function(d0){return _7.posEd2Gen(d0.getModel().getPositionAt(dY));});return dZ==null?cl.New(1,1):dZ.$0;};_7.convertGlyphChar=function(dX){return dX==="C"?6:dX==="E"?12:dX==="S"?11:dX==="I"?7:dX==="N"?8:dX==="M"?1:dX==="P"?9:dX==="F"?4:dX==="T"?6:dX==="K"?13:0;};_7.generateDoc=function(dX,dY,dZ){var d0;return b$.Async((d0=null,cL.Delay(function(){return cL.Bind(X.loader(),function(){return cL.Return(b$.Element("div",[cC.OnAfterRenderImpl(function(d1){var d2,d3;d2=(d3=d1.parentElement,self.monaco.editor.create(d3,dX.options,dX.overrides));cj.addResizeObserver(function(){d2.layout();},d1.parentElement);d1.parentNode.removeChild(d1);dX.editorO={$:1,$0:d2};dZ(d2);d2.onDidChangeModelContent(dX.onChange);(n.iter(function(d4){var d5;d5=new _.New(d4(dY));self.monaco.languages.registerHoverProvider("fsharp",d5);}))(dY.toolTip);(n.iter(function(d4){var d5;d5=new $.New(d4(dY));self.monaco.languages.registerDefinitionProvider("fsharp",d5);}))(dY.declaration);(n.iter(function(d4){var d5;d5=new _9.New(d4(dY));self.monaco.languages.registerCompletionItemProvider("fsharp",d5);}))(dY.autoCompletion);})],[]));});})));};_7.getUri=function(dX){var dY;dY=_7.mapEditor(dX,function(dZ){return a.String(dZ.getModel().uri);});return dY==null?"":dY.$0;};_7.setUri=function(dX,dY){_7.iterEditor(dX,function(dZ){dZ.getModel().uri=self.monaco.Uri.parse(dY);});};_7.getValue=function(dX){var dY;dY=_7.mapEditor(dX,function(dZ){return dZ.getValue();});return dY==null?"":dY.$0;};_7.setValue=function(dX,dY){_7.iterEditor(dX,function(dZ){dZ.setValue(dY);});};_7.getWordAt=function(dX,dY){return _7.bindEditor(dX,function(dZ){var d0;d0=dZ.getModel().getWordAtPosition(Y.New(dY.col,dY.line));return!d0?null:{$:1,$0:[d0.word,cl.New(dY.line,d0.startColumn)]};});};_7.getSelect=function(dX){var dY;dY=_7.mapEditor(dX,function(dZ){var d0;d0=dZ.getSelection();return dZ.getModel().getValueInRange(d0);});return dY==null?"":dY.$0;};_7.showAnnotations=function(dX,dY){_7.iterEditor(dX,function(dZ){var d0,d1;d0=bN.ofSeq(bS.map(function(d2){var d3;return _2.New(d2.startP.col,d2.endP.col,d2.startP.line,d2.endP.line,(d3=d2.severity,d3.$==0?8:d3.$==1?4:d3.$==3?1:2),d2.message);},dY));d1=dZ.getModel();self.monaco.editor.setModelMarkers(d1,"annotations",d0);});};_7.newHook=function(dX){function dY(dZ,d0){return _7.generateDoc(dX,dZ,d0);}return co.New(function(dZ){return function(d0){return dY(dZ,d0);};},function(){return _7.getValue(dX);},function(dZ){_7.setValue(dX,dZ);},a.ignore,function(dZ){_7.showAnnotations(dX,dZ);},function(dZ){return _7.posFromIndex(dX,dZ);},function(dZ){return _7.indexFromPos(dX,dZ);},function(dZ){return _7.getWordAt(dX,dZ);},function(){return _7.getSelect(dX);},function(){return _7.getUri(dX);},function(dZ){_7.setUri(dX,dZ);},function(dZ){dX.onChange=dZ;});};_7.newRT=function(dX,dY){return _8.New(null,a.ignore,dX,dY);};_7.newVar=function(dX,dY,dZ){return ck.newVar(_7.newHook(_7.newRT(dX,dY)),dZ);};_8.New=function(dX,dY,dZ,d0){return{editorO:dX,onChange:dY,options:dZ,overrides:d0};};_9=_7.CompletionItemProvider=dR.Class({provideCompletionItems:function(dX,dY,dZ,d0){var d1,d2;d1=this;return cm.ofAsyncResultM((d2=I.asyncResultM(),d2.Run(d2.Delay(function(){return I["AsyncResultMBuilder.Bind"](d2,d1.autoComplete(cl.New(dY.lineNumber,dY.column)),function(d3){return d2.Return(bN.map(function(d4){return _3.New(_7.convertGlyphChar(d4.kind),d4.label,d4.detail);},d3));});}))));},resolveCompletionItem:function(dX,dY){return _3.New(dX.kind,dX.label,"more details");}},r,_9);_9.New=dR.Ctor(function(dX){r.New.call(this);this.autoComplete=dX;},_9);_=_7.HoverProvider=dR.Class({provideHover:function(dX,dY,dZ){var d0,d1;d0=this;return cm.ofAsyncResultM((d1=I.asyncResultM(),d1.Run(d1.Delay(function(){return I["AsyncResultMBuilder.Bind"](d1,d0.toolTip(cl.New(dY.lineNumber,dY.column)),function(d2){return d2!=null&&d2.$==1?d1.Return(_4.New([_1.New(d2.$0,true)],null)):d1.Return(null);});}))));}},r,_);_.New=dR.Ctor(function(dX){r.New.call(this);this.toolTip=dX;},_);$=_7.DefinitionProvider=dR.Class({provideDefinition:function(dX,dY,dZ){var d0,d1;d0=this;return cm.ofAsyncResultM((d1=I.asyncResultM(),d1.Run(d1.Delay(function(){return I["AsyncResultMBuilder.Bind"](d1,d0.declaration(cl.New(dY.lineNumber,dY.column)),function(d2){var d3;return d2!=null&&d2.$==1?(d3=d2.$0[0],d1.Return(_0.New(Z.New(d3.col,d3.col,d3.line,d3.line),self.monaco.Uri.parse(d2.$0[1])))):d1.Return(null);});}))));}},r,$);$.New=dR.Ctor(function(dX){r.New.call(this);this.declaration=dX;},$);ba.plugIns=function(){bX.$cctor();return bX.plugIns;};ba.mainDocV=function(){bX.$cctor();return bX.mainDocV;};ba.TemplateFileName=function(){bX.$cctor();return bX.TemplateFileName;};ba.defaultPlugIn=function(){return bg.New(f.Tag$3(""),new cp.New$1(function(dX){return dX.varName;}),new cp.New$1(function(dX){return dX.viwName;}),new cp.New$1(function(dX){return dX.docName;}),new cp.New$1(function(dX){return dX.actName;}),new cp.New$1(function(dX){return dX.qryName;}));};ba.splitName=function(dX){function dY(d0){return J.splitByChar(".",d0);}function dZ(d0){return bN.length(d0)===1?[dX,f.Tag$3(bT.Trim(bN.get(d0,0)))]:[f.Tag$3(bT.Trim(bN.get(d0,0))),f.Tag$3(bT.Trim(bN.get(d0,1)))];}return function(d0){return dZ(dY(d0));};};ba.selectionPlugInO=function(){bX.$cctor();return bX.selectionPlugInO;};ba.currentPlugInW=function(){bX.$cctor();return bX.currentPlugInW;};ba.currentPlugInV=function(){bX.$cctor();return bX.currentPlugInV;};ba.renderPlugIns=function(){return b$.Flatten(ba.plugIns().MapLens(function(dX){var dY,dZ,d0,d1,d2;return(dY=(dZ=(d0=f.Untag$3(dX),cu.Make().WithHole({$:1,$0:"name",$1:d0})),dZ.WithHole(cv.EventQ2(dZ.k,"select",function(){return dZ.i;},function(){ba.selectionPlugInO().Set({$:1,$0:dX});}))).WithHole({$:2,$0:"selected",$1:b9.Map(function(d3){return bP.Equals(d3,{$:1,$0:dX})?"selected":"";},ba.selectionPlugInO().get_View())}),(d1=cv.CompleteHoles(dY.k,dY.h,[]),(d2=new ct.New(d1[1],cw.tile(d1[0])),(dY.i=d2,d2)))).get_Doc();}));};ba.renderVars=function(){function dX(dZ,d0){return[dZ.plgName,d0.varName];}function dY(dZ,d0){var d1,d2,d3,d4;return(d1=(d2=f.Untag$3(d0.varName),cu.Make().WithHole({$:1,$0:"name",$1:d2})).WithHole({$:8,$0:"value",$1:d0.varVar}),(d3=cv.CompleteHoles(d1.k,d1.h,[["value",0]]),(d4=new ct.New(d3[1],cw.namevalueinput(d3[0])),(d1.i=d4,d4)))).get_Doc();}return b$.ConvertBy(function(dZ){return dX(dZ[0],dZ[1]);},function(dZ){return dY(dZ[0],dZ[1]);},b9.Map(function(dZ){return bS.map(function(d0){return[dZ,d0];},dZ.plgVars);},ba.currentPlugInW()));};ba.renderViews=function(){function dX(dZ,d0){return[dZ.plgName,d0.viwName];}function dY(dZ,d0){var d1,d2,d3,d4;return(d1=(d2=f.Untag$3(d0.viwName),cu.Make().WithHole({$:1,$0:"name",$1:d2})).WithHole({$:2,$0:"value",$1:d0.viwView}),(d3=cv.CompleteHoles(d1.k,d1.h,[]),(d4=new ct.New(d3[1],cw.namevalue(d3[0])),(d1.i=d4,d4)))).get_Doc();}return b$.ConvertBy(function(dZ){return dX(dZ[0],dZ[1]);},function(dZ){return dY(dZ[0],dZ[1]);},b9.Map(function(dZ){return bS.map(function(d0){return[dZ,d0];},dZ.plgViews);},ba.currentPlugInW()));};ba.renderDocs=function(){function dX(dZ,d0){return[dZ.plgName,d0.docName];}function dY(dZ,d0){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;d1=(d2=d0.docDoc,d2.$==1?(d3=bT.concat(", ",bU.ofArray([d2.$1])),(function(eb){return function(ec){return eb("("+bM.toSafe(ec)+")");};}(a.id))(d3)):d2.$==2?(d4=bT.concat(", ",bU.ofArray([d2.$1,d2.$2])),(function(eb){return function(ec){return eb("("+bM.toSafe(ec)+")");};}(a.id))(d4)):d2.$==3?(d5=bT.concat(", ",bU.ofArray([d2.$1,d2.$2,d2.$3])),(function(eb){return function(ec){return eb("("+bM.toSafe(ec)+")");};}(a.id))(d5)):d2.$==4?(d6=bT.concat(", ",bU.ofArray([d2.$1,d2.$2,d2.$3,d2.$4])),(function(eb){return function(ec){return eb("("+bM.toSafe(ec)+")");};}(a.id))(d6)):d2.$==5?(d7=bT.concat(", ",bU.ofArray([d2.$1,d2.$2,d2.$3,d2.$4,d2.$5])),(function(eb){return function(ec){return eb("("+bM.toSafe(ec)+")");};}(a.id))(d7)):"");return(d8=(d9=(d_=f.Untag$3(d0.docName)+d1,cu.Make().WithHole({$:1,$0:"name",$1:d_})),d9.WithHole(cv.EventQ2(d9.k,"select",function(){return d9.i;},function(){b9.Get(function(eb){var ec;ec=f.Untag$3(eb.plgName)+"."+f.Untag$3(d0.docName);ba.mainDocV().Set(ec);},ba.currentPlugInW());}))),(d$=cv.CompleteHoles(d8.k,d8.h,[]),(ea=new ct.New(d$[1],cw.tile(d$[0])),(d8.i=ea,ea)))).get_Doc();}return b$.ConvertBy(function(dZ){return dX(dZ[0],dZ[1]);},function(dZ){return dY(dZ[0],dZ[1]);},b9.Map(function(dZ){return bS.map(function(d0){return[dZ,d0];},dZ.plgDocs);},ba.currentPlugInW()));};ba.callFunction=function(dX,dY,dZ){if(dZ.$==1)dZ.$0(dX);else if(dZ.$==2)(dZ.$0(dX))(dY);else dZ.$0();};ba.renderActions=function(){function dX(dZ,d0){return[dZ.plgName,d0.actName];}function dY(dZ,d0){var d1,d2,d3,d4;d1=(d2=d0.actFunction,d2.$==1?(d3=bT.concat(", ",bU.ofArray([d2.$1])),(function(d5){return function(d6){return d5("("+bM.toSafe(d6)+")");};}(a.id))(d3)):d2.$==2?(d4=bT.concat(", ",bU.ofArray([d2.$1,d2.$2])),(function(d5){return function(d6){return d5("("+bM.toSafe(d6)+")");};}(a.id))(d4)):"");return b$.EmbedView(b9.Map(function(d5){var d6,d7,d8,d9,d_,d$,ea,eb,ec,ed;return d5?(d6=(d7=(d8=f.Untag$3(d0.actName)+d1,cu.Make().WithHole({$:1,$0:"name",$1:d8})),d7.WithHole(cv.EventQ2(d7.k,"click",function(){return d7.i;},function(ee){ba.callFunction(ee,null,d0.actFunction);}))),(d9=cv.CompleteHoles(d6.k,d6.h,[]),(d_=new ct.New(d9[1],cw.action(d9[0])),(d6.i=d_,d_)))).get_Doc():(d$=(ea=(eb=f.Untag$3(d0.actName),cu.Make().WithHole({$:1,$0:"name",$1:eb})),ea.WithHole(cv.EventQ2(ea.k,"click",function(){return ea.i;},function(ee){ba.callFunction(ee,null,d0.actFunction);}))),(ec=cv.CompleteHoles(d$.k,d$.h,[]),(ed=new ct.New(ec[1],cw.actiondisabled(ec[0])),(d$.i=ed,ed)))).get_Doc();},d0.actEnabled));}return b$.ConvertBy(function(dZ){return dX(dZ[0],dZ[1]);},function(dZ){return dY(dZ[0],dZ[1]);},b9.Map(function(dZ){return bS.map(function(d0){return[dZ,d0];},dZ.plgActions);},ba.currentPlugInW()));};ba.renderQueries=function(){function dX(dZ,d0){return[dZ.plgName,d0.qryName];}function dY(dZ,d0){var d1,d2,d3,d4,d5;return(d1=(d2=(d3=f.Untag$3(d0.qryName),cu.Make().WithHole({$:1,$0:"name",$1:d3})),d2.WithHole(cv.EventQ2(d2.k,"select",function(){return d2.i;},function(){a.alert(d0.qryFunction(null));}))),(d4=cv.CompleteHoles(d1.k,d1.h,[]),(d5=new ct.New(d4[1],cw.tile(d4[0])),(d1.i=d5,d5)))).get_Doc();}return b$.ConvertBy(function(dZ){return dX(dZ[0],dZ[1]);},function(dZ){return dY(dZ[0],dZ[1]);},b9.Map(function(dZ){return bS.map(function(d0){return[dZ,d0];},dZ.plgQueries);},ba.currentPlugInW()));};ba.AppFwkClient=function(){bX.$cctor();return bX.AppFwkClient;};ba.getLazyDoc=function(dX){var dY;dY=dX.docDoc;return dY.$==0?dY.$0.f():b$.Element("div",[],[b$.TextNode((function(dZ){return function(d0){return dZ("Doc with parameters not allowed here: "+cx.p$1(d0));};}(a.id))(dX))]);};ba.getMainClientDoc=function(){var dX;return b$.EmbedView((dX=ba.plugIns().v,b9.Map2(function(dY,dZ){var d0,d1;d0=bS.tryPick(function(d2){var d3;d3=bS.tryFind(function(d4){return f.Untag$3(d2.plgName)===dY||f.Untag$3(d2.plgName)+"."+f.Untag$3(d4.docName)===dY;},d2.plgDocs);return d3==null?null:{$:1,$0:ba.getLazyDoc(d3.$0)};},dZ);d1=ba.AppFwkClient().f();return d0==null?d1:d0.$0;},ba.mainDocV().get_View(),dX)));};ba.mainDoc=function(){var dX,dY,dZ,d0,d1,d2;return(dX=(dY=ba.getMainClientDoc(),(dZ=(d0=ba.mainDocV().get_View(),cu.Make().WithHole({$:2,$0:"maindoc",$1:d0})),dZ.WithHole(cv.EventQ2(dZ.k,"goclient",function(){return dZ.i;},function(){ba.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:dY})),(d1=cv.CompleteHoles(dX.k,dX.h,[]),(d2=new ct.New(d1[1],cw.appframework(d1[0])),(dX.i=d2,d2)))).get_Doc();};ba.horizontal=function(dX,dY,dZ,d0,d1){var d2,d3,d4,d5;return(d2=(d3=cu.Make().WithHole({$:2,$0:"partsizes",$1:dX}).WithHole({$:7,$0:"afterrender",$1:dY}).WithHole({$:7,$0:"afterrendersp",$1:dZ}),d3.WithHole(cv.EventQ2(d3.k,"mousedown",function(){return d3.i;},function(d6){d0(d6.Event);}))).WithHole({$:2,$0:"gap",$1:d1}),(d4=cv.CompleteHoles(d2.k,d2.h,[]),(d5=new ct.New(d4[1],cw.wcompsplitterhor(d4[0])),(d2.i=d5,d5)))).get_Doc();};ba.vertical=function(dX,dY,dZ,d0,d1){var d2,d3,d4,d5;return(d2=(d3=cu.Make().WithHole({$:2,$0:"partsizes",$1:dX}).WithHole({$:7,$0:"afterrender",$1:dY}).WithHole({$:7,$0:"afterrendersp",$1:dZ}),d3.WithHole(cv.EventQ2(d3.k,"mousedown",function(){return d3.i;},function(d6){d0(d6.Event);}))).WithHole({$:2,$0:"gap",$1:d1}),(d4=cv.CompleteHoles(d2.k,d2.h,[]),(d5=new ct.New(d4[1],cw.wcompsplitterver(d4[0])),(d2.i=d5,d5)))).get_Doc();};ba.newVar=function(dX,dY){return bb.New(dX,dY);};ba.newViw=function(dX,dY){return bc.New(dX,dY);};ba.newDoc=function(dX,dY){return bd.New(dX,{$:0,$0:dY});};ba.newQry=function(dX,dY){return bf.New(dX,dY);};ba.newAct=function(dX,dY){return be.New(dX,{$:0,$0:dY},b9.Const(true));};ba.newActF=function(dX,dY){return be.New(dX,dY,b9.Const(true));};ba.newDocF=function(dX,dY){return bd.New(dX,dY);};ba.plugin=function(){bX.$cctor();return bX.plugin;};ba.tryGetPlugInW=function(dX){return ba.plugIns().TryFindByKeyAsView(dX);};ba.tryGetVarW=function(dX,dY){return b9.Bind(function(dZ){return dZ!=null&&dZ.$==1?dZ.$0.plgVars.TryFindByKeyAsView(dY):b9.Const(null);},ba.tryGetPlugInW(dX));};ba.tryGetViwW=function(dX,dY){return b9.Bind(function(dZ){return dZ!=null&&dZ.$==1?dZ.$0.plgViews.TryFindByKeyAsView(dY):b9.Const(null);},ba.tryGetPlugInW(dX));};ba.tryGetActW=function(dX,dY){return b9.Bind(function(dZ){return dZ!=null&&dZ.$==1?dZ.$0.plgActions.TryFindByKeyAsView(dY):b9.Const(null);},ba.tryGetPlugInW(dX));};ba.tryGetQryW=function(dX,dY){return b9.Bind(function(dZ){return dZ!=null&&dZ.$==1?dZ.$0.plgQueries.TryFindByKeyAsView(dY):b9.Const(null);},ba.tryGetPlugInW(dX));};ba.tryGetDocW=function(dX,dY){return b9.Bind(function(dZ){return dZ!=null&&dZ.$==1?dZ.$0.plgDocs.TryFindByKeyAsView(dY):b9.Const(null);},ba.tryGetPlugInW(dX));};ba.tryGetVoVW=function(dX,dY){return b9.Bind(function(dZ){return dZ==null?b9.Map(function(d0){return d0==null?null:{$:1,$0:new c5.New(d0.$0.viwView,a.ignore)};},ba.tryGetViwW(dX,dY)):b9.Const({$:1,$0:dZ.$0.varVar});},ba.tryGetVarW(dX,dY));};ba.tryGetWoWW=function(dX,dY){return b9.Bind(function(dZ){return dZ==null?b9.Bind(function(d0){return d0==null?b9.Const(null):b9.Map(function(d1){return{$:1,$0:d1};},d0.$0.varVar.get_View());},ba.tryGetVarW(dX,dY)):b9.Map(function(d0){return{$:1,$0:d0};},dZ.$0.viwView);},ba.tryGetViwW(dX,dY));};ba.tryGetPlugIn=function(dX){return ba.plugIns().TryFindByKey(dX);};ba.tryGetVar=function(dX,dY){var dZ;dZ=ba.tryGetPlugIn(dX);return dZ==null?null:dZ.$0.plgVars.TryFindByKey(dY);};ba.tryGetViw=function(dX,dY){var dZ;dZ=ba.tryGetPlugIn(dX);return dZ==null?null:dZ.$0.plgViews.TryFindByKey(dY);};ba.tryGetAct=function(dX,dY){var dZ;dZ=ba.tryGetPlugIn(dX);return dZ==null?null:dZ.$0.plgActions.TryFindByKey(dY);};ba.tryGetQry=function(dX,dY){var dZ;dZ=ba.tryGetPlugIn(dX);return dZ==null?null:dZ.$0.plgQueries.TryFindByKey(dY);};ba.tryGetDoc=function(dX,dY){var dZ;dZ=ba.tryGetPlugIn(dX);return dZ==null?null:dZ.$0.plgDocs.TryFindByKey(dY);};ba.tryGetVoV=function(dX,dY){var dZ,d0,d1;dZ=(d0=ba.tryGetVar(dX,dY),d0==null?null:{$:1,$0:{$:1,$0:d0.$0.varVar}});return dZ==null?(d1=ba.tryGetViw(dX,dY),d1==null?null:{$:1,$0:new c5.New(d1.$0.viwView,a.ignore)}):dZ.$0;};ba.tryGetWoW=function(dX,dY){var dZ,d0,d1;dZ=(d0=ba.tryGetViw(dX,dY),d0==null?null:{$:1,$0:{$:1,$0:d0.$0.viwView}});return dZ==null?(d1=ba.tryGetVar(dX,dY),d1==null?null:{$:1,$0:d1.$0.varVar.get_View()}):dZ.$0;};ba.getOneTextData=function(dX,dY,dZ,d0){var d1,d2,d3;d1=(ba.splitName(dX))(dY);d2=d1[0];d3=d1[1];return b9.Bind(function(d4){return d4==null?b9.Bind(function(d5){var d6;return d5==null?b9.Const({$:0,$0:((((dR.Curried(function(d7,d8,d9,d_){return d7(bM.toSafe(d8)+" @{Missing "+bM.toSafe(d9)+"}"+bM.toSafe(d_));},4))(a.id))(dZ))(dY))(d0)}):(d6=d5.$0,b9.Bind(function(d7){return d7.$==1?b9.Const({$:0,$0:(function(d8){return function(d9){return d8("Unexpected Action @{"+bM.toSafe(d9)+"}");};}(a.id))(f.Untag$3(d7.$0.actName))}):b9.Const({$:0,$0:dZ+d6+d7.$0});},ba.getTextData(dX,d0)));},ba.tryGetWoWW(d2,d3)):b9.Const({$:1,$0:d4.$0});},ba.tryGetActW(d2,d3));};ba.getTextData=function(dX,dY){var dZ,d0,d1,d2;dZ=(d0=J.delimitedO("@{","}",dY),d0==null?null:{$:1,$0:(d1=d0.$0,(d2=d1[0],ba.getOneTextData(dX,d1[1],d2,d1[2])))});return dZ==null?b9.Const({$:0,$0:dY}):dZ.$0;};ba.getAttrs=function(dX,dY){return bU.ofSeq(bS.delay(function(){return bS.append(bS.choose(function(dZ){var d0,d1,d2,d3;function d4(d5,d6){var d7;return d6.$==1?(d7=d6.$0,d5.addEventListener(bT.Trim(d3),function(d8){return ba.callFunction(d5,d8,d7.actFunction);},false)):d5.setAttribute(bT.Trim(d3),bT.Trim(d6.$0));}return!bP.Equals(dZ,null)&&dZ.length===2&&(d1=bN.get(dZ,1),bT.Trim(bN.get(dZ,0))!==""&&bT.Trim(d1)!=="")?(d2=bN.get(dZ,1),(d3=bN.get(dZ,0),{$:1,$0:cA.DynamicCustom(function(d5){return function(d6){return d4(d5,d6);};},ba.getTextData(dX,bT.Trim(d2)))})):null;},bS.map(function(dZ){return J.splitByChar("=",dZ);},J.splitByChar(";",dY))),bS.delay(function(){return bS.choose(function(dZ){var d0,d1,d2,d3,d4;return!bP.Equals(dZ,null)&&dZ.length===2&&(d1=bN.get(dZ,1),bT.Trim(bN.get(dZ,0))!==""&&bT.Trim(d1)!=="")?(d2=bN.get(dZ,1),(d3=bN.get(dZ,0),{$:1,$0:(d4=b9.Map(function(d5){return d5.$==1?(function(d6){return function(d7){return d6("@{"+bM.toSafe(d7)+"}");};}(a.id))(f.Untag$3(d5.$0.actName)):bT.Trim(d5.$0);},ba.getTextData(dX,bT.Trim(d2))),cA.DynamicStyle(bT.Trim(d3),d4))})):null;},bS.map(function(dZ){return J.splitByChar(":",dZ);},J.splitByChar(";",dY)));}));}));};ba.bindWrap=function(dX,dY){return bj.New(A.op_GreaterGreaterEquals(dY,function(dZ){return dX(dZ).r;}));};ba.unwrapBindWrap=function(dX,dY){return bj.New(A.op_BarGreaterGreater(dY.r,dX));};ba.add1=function(dX){return dX+1;};ba.a11V=function(){bX.$cctor();return bX.a11V;};ba.mainX=function(){bX.$cctor();return bX.mainX;};ba.baseView=function(){bX.$cctor();return bX.baseView;};ba.makeAViewDoc=function(dX){return b$.BindView(function(){return dX();},ba.baseView());};ba.makeAViewDocL=function(dX){return cB.Create(function(){return ba.makeAViewDoc(dX);});};ba.choiceToString=function(dX){return dX.$==1?(function(dY){return function(dZ){return dY("@{expecting string, got Action: "+bM.prettyPrint(dZ)+"}");};}(a.id))(dX.$0):dX.$0;};ba.valToStyle=function(dX,dY){return dY.$==0?cA.DynamicStyle(dX,b9.Map(ba.choiceToString,dY.$0)):dY.$0.$==0?cA.Style(dX,dY.$0.$0):(function(dZ){return function(d0){return dZ("Illegal reference "+cy.p$6(d0));};}(bL.FailWith))(dY);};ba.valToAttr=function(dX,dY){function dZ(d0,d1){var d2;return d1.$==1?(d2=d1.$0,d0.addEventListener(dX,function(d3){return ba.callFunction(d0,d3,d2.actFunction);},false)):d0.setAttribute(dX,bT.Trim(d1.$0));}return dY.$==0?cA.DynamicCustom(function(d0){return function(d1){return dZ(d0,d1);};},dY.$0):dY.$0.$==0?cC.Create(dX,dY.$0.$0):(function(d0){return function(d1){return d0("Illegal value "+cy.p$3(d1));};}(bL.FailWith))(dY);};ba.currentPlugInNameDef=function(){bX.$cctor();return bX.currentPlugInNameDef;};ba.currentPlugInNameD=function(){bX.$cctor();return bX.currentPlugInNameD;};ba.getDocD=function(){bX.$cctor();return bX.getDocD;};ba.getTextActViewD=function(){bX.$cctor();return bX.getTextActViewD;};ba.errDoc=function(dX){return b$.Element("div",[],[b$.TextNode(dX)]);};ba.errDocf=function(dX){return dX(ba.errDoc);};ba.run=function(dX,dY){var dZ,d0;dZ=(d0=A.depend(),d0.Delay(function(){return d0.Bind(ba.getDocD(),function(d1){return d0.Bind(ba.getTextActViewD(),function(d2){return d0.Return(y.resolver(bU.ofArray([["getDocFromReference",d1],["getTextActViewFromReference",d2],["currentPlugInName",dX]]),dY));});});}));return y.resolver(bU.ofArray([["currentPlugInName",dX]]),dZ);};ba.extractTextD=function(){bX.$cctor();return bX.extractTextD$1;};ba.extractDocD=function(){bX.$cctor();return bX.extractDocD$1;};ba.extractAtsD=function(){bX.$cctor();return bX.extractAtsD$1;};ba.extractAttD=function(){bX.$cctor();return bX.extractAttD;};ba.defPlugInName=function(){bX.$cctor();return bX.defPlugInName;};ba.runDef=function(dX){return ba.run(ba.defPlugInName(),dX);};ba.getParmRef=function(dX){var dY,dZ,d0,d1,d2;dY=(dZ=(d0=J.delimitedO("@{","}",dX),d0==null?null:{$:1,$0:(d1=d0.$0,(d1[0],d2=d1[1],d1[2],d2))}),dZ==null?dX:dZ.$0);return(ba.splitName(ba.defPlugInName()))(dY);};ba.depWithExtracts=function(dX){var dY;return ba.runDef((dY=y.depend(),dY.Delay(function(){return dY.Bind(ba.extractAtsD(),function(dZ){return dY.Bind(ba.extractDocD(),function(d0){return dY.Bind(ba.extractTextD(),function(d1){return dY.Return(dX(dZ,d0,d1));});});});})));};ba.docWithVar=function(dX,dY){var dZ,d0;function d1(d3){return d3==null?null:{$:1,$0:dX(d3.$0)};}function d2(){return ba.errDoc((function(d3){return function(d4){return d3("Var not found "+bM.toSafe(d4));};}(a.id))(dY));}return b$.BindView((dZ=function(d3){return d3==null?d2():d3.$0;},function(d3){return dZ(d1(d3));}),(d0=ba.getParmRef(dY),ba.tryGetVoVW(d0[0],d0[1])));};ba.inputFile=function(dX,dY,dZ){var d0,d1,d2,d3;d0=(d1=(d2=(ba.splitName(ba.defPlugInName()))(dZ),ba.tryGetAct(d2[0],d2[1])),d1==null?null:{$:1,$0:(d3=d1.$0,b$.Element("div",ba.getAttrs(ba.defPlugInName(),dX),[b$.Element("div",[cC.Create("class","input-group")],[b$.Element("span",[cC.Create("class","input-group-btn")],[b$.Element("label",[cC.Create("class","btn")],[b$.TextNode(dY),b$.Element("input",[cC.Create("class","form-control"),cC.Create("type","file"),cA.Style("display","none"),cC.HandlerImpl("click",function(d4){return function(){d4.value="";};}),cC.HandlerImpl("change",function(d4){return function(){return ba.callFunction(d4,null,d3.actFunction);};})],[])])])])]))});return d0==null?ba.errDoc((function(d4){return function(d5){return d4("Action not found "+bM.toSafe(d5));};}(a.id))(dZ)):d0.$0;};ba.inputLabel=function(){bX.$cctor();return bX.inputLabel;};ba.input=function(){bX.$cctor();return bX.input;};ba.textArea=function(){bX.$cctor();return bX.textArea;};ba.none=function(dX){return b$.Element("span",[],[]);};ba.htmlDoc=function(dX,dY){return b$.BindView(function(dZ){return dZ.$==1?ba.errDoc((function(d0){return function(d1){return d0("HtmlDoc: unexpected action "+cx.p(d1));};}(a.id))(dZ.$0)):b$.Verbatim(dZ.$0);},ba.getTextData(dX,dY));};ba.setVar=function(dX,dY){var dZ,d0;dZ=(d0=(ba.splitName(ba.defPlugInName()))(dX),ba.tryGetVar(d0[0],d0[1]));(n.iter(function(d1){d1.varVar.Set(dY);}))(dZ);};ba.trigAct=function(){bX.$cctor();return bX.trigAct;};ba.select=function(){bX.$cctor();return bX.select;};ba.getMainDoc=function(){bX.$cctor();return bX.getMainDoc;};ba.addPlugIn=function(dX){ba.plugIns().Append(dX);};ba.op_Dereference=function(dX){return bj.New((A.rtn())({$:1,$0:dX}));};bb.New=function(dX,dY){return{varName:dX,varVar:dY};};bc.New=function(dX,dY){return{viwName:dX,viwView:dY};};bd.New=function(dX,dY){return{docName:dX,docDoc:dY};};be.New=function(dX,dY,dZ){return{actName:dX,actFunction:dY,actEnabled:dZ};};bf.New=function(dX,dY){return{qryName:dX,qryFunction:dY};};bg.New=function(dX,dY,dZ,d0,d1,d2){return{plgName:dX,plgVars:dY,plgViews:dZ,plgDocs:d0,plgActions:d1,plgQueries:d2};};bh=ba.PlugInBuilder=dR.Class({Zero:function(){var dX;dX=ba.defaultPlugIn();return bg.New(f.Tag$3("Main"),dX.plgVars,dX.plgViews,dX.plgDocs,dX.plgActions,dX.plgQueries);},Yield:function(){return this.Zero();},For:function(dX,dY){var dZ;dZ=cN.Get(dX);while(dZ.MoveNext())dY(dZ.Current());},Name:function(dX,dY){return bg.New(f.Tag$3(dY),dX.plgVars,dX.plgViews,dX.plgDocs,dX.plgActions,dX.plgQueries);},AddVar:function(dX,dY,dZ){dX.plgVars.Append(ba.newVar(f.Tag$3(dY),dZ));return dX;},AddDoc:function(dX,dY,dZ){dX.plgDocs.Append(ba.newDoc(f.Tag$3(dY),dZ));return dX;},AddDoc2:function(dX,dY,dZ,d0,d1){dX.plgDocs.Append(ba.newDocF(f.Tag$3(dY),{$:2,$0:dZ,$1:d0,$2:d1}));return dX;},AddDoc3:function(dX,dY,dZ,d0,d1,d2){dX.plgDocs.Append(ba.newDocF(f.Tag$3(dY),{$:3,$0:dZ,$1:d0,$2:d1,$3:d2}));return dX;},AddDoc4:function(dX,dY,dZ,d0,d1,d2,d3){dX.plgDocs.Append(ba.newDocF(f.Tag$3(dY),{$:4,$0:dZ,$1:d0,$2:d1,$3:d2,$4:d3}));return dX;},AddDoc5:function(dX,dY,dZ,d0,d1,d2,d3,d4){dX.plgDocs.Append(ba.newDocF(f.Tag$3(dY),{$:5,$0:dZ,$1:d0,$2:d1,$3:d2,$4:d3,$5:d4}));return dX;},AddQry:function(dX,dY,dZ){dX.plgQueries.Append(ba.newQry(f.Tag$3(dY),dZ));return dX;},AddAct:function(dX,dY,dZ){dX.plgActions.Append(ba.newAct(f.Tag$3(dY),dZ));return dX;},AddAct1:function(dX,dY,dZ,d0){dX.plgActions.Append(ba.newActF(f.Tag$3(dY),{$:1,$0:dZ,$1:d0}));return dX;},AddAct2:function(dX,dY,dZ,d0,d1){dX.plgActions.Append(ba.newActF(f.Tag$3(dY),{$:2,$0:dZ,$1:d0,$2:d1}));return dX;},AddActO:function(dX,dY,dZ){dZ==null?void 0:dX.plgActions.Append(ba.newAct(f.Tag$3(dY),dZ.$0));return dX;},AddViw:function(dX,dY,dZ){dX.plgViews.Append(ba.newViw(f.Tag$3(dY),dZ));return dX;},Merge:function(dX,dY,dZ){dX.plgVars.AppendMany(bS.map(function(d0){return bb.New(f.Tag$3(dY+f.Untag$3(d0.varName)),d0.varVar);},dZ.plgVars));dX.plgViews.AppendMany(bS.map(function(d0){return bc.New(f.Tag$3(dY+f.Untag$3(d0.viwName)),d0.viwView);},dZ.plgViews));dX.plgDocs.AppendMany(bS.map(function(d0){return bd.New(f.Tag$3(dY+f.Untag$3(d0.docName)),d0.docDoc);},dZ.plgDocs));dX.plgActions.AppendMany(bS.map(function(d0){return be.New(f.Tag$3(dY+f.Untag$3(d0.actName)),d0.actFunction,d0.actEnabled);},dZ.plgActions));dX.plgQueries.AppendMany(bS.map(function(d0){return bf.New(f.Tag$3(dY+f.Untag$3(d0.qryName)),d0.qryFunction);},dZ.plgQueries));return dX;}},r,bh);bh.New=dR.Ctor(function(){r.New.call(this);},bh);bi.New=function(dX,dY){return{f:dX,p:dY};};bj.New=function(dX){return{r:dX};};bk.map=function(dX,dY){return dY.$==0?{$:0,$0:b9.Map(dX,dY.$0)}:{$:1,$0:dX(dY.$0)};};bk.toView=function(dX){return dX.$==0?dX.$0:b9.Const(dX.$0);};bk.addDoc=function(dX,dY){return dY.$==0?{$:1,$0:[b$.BindView(b$.Concat,dY.$0),dX]}:{$:1,$0:bS.append(dY.$0,[dX])};};bk.addAtt=function(dX,dY){return dY.$==0?function(dZ){return dZ("addAtt for VView not implemented");}(bL.FailWith):{$:1,$0:bS.append(dY.$0,[dX])};};bk.textDoc=function(dX){return dX.$==0?b$.TextView(dX.$0):b$.TextNode(dX.$0);};bk.textAtt=function(){bX.$cctor();return bX.textAtt;};bl.getDocFromReference=function(dX){return b$.TextNode((function(dY){return function(dZ){return dY("getDocFromReference not implemented: @{"+bM.toSafe(dZ)+"}");};}(a.id))(dX));};bl.getTextActViewFromReference=function(dX){return b9.Const({$:0,$0:(function(dY){return function(dZ){return dY("getTextActViewFromReference not implemented: @{"+bM.toSafe(dZ)+"}");};}(a.id))(dX)});};bl.getOneTextData=function(dX,dY,dZ){return(dX===""?a.id:function(d0){return new bY({$:1,$0:{$:0,$0:dX},$1:d0});})(new bY({$:1,$0:{$:1,$0:dY},$1:dZ===""?bY.Empty:bl.getTextData(dZ)}));};bl.getTextData=function(dX){var dY,dZ,d0;dY=(dZ=J.delimitedO("@{","}",dX),dZ==null?null:{$:1,$0:(d0=dZ.$0,bl.getOneTextData(d0[0],d0[1],d0[2]))});return dY==null?bU.ofArray([{$:0,$0:dX}]):dY.$0;};bl.getDocFromReferenceD=function(){bX.$cctor();return bX.getDocFromReferenceD;};bl.getTextActViewFromReferenceD=function(){bX.$cctor();return bX.getTextActViewFromReferenceD;};bl.getDocFromTextTypesD=function(){bX.$cctor();return bX.getDocFromTextTypesD;};bl.extractDocD=function(){bX.$cctor();return bX.extractDocD;};bl.getTextValFromSeqD=function(){bX.$cctor();return bX.getTextValFromSeqD;};bl.getTextValFromTextTypesD=function(){bX.$cctor();return bX.getTextValFromTextTypesD;};bl.getTextValD=function(){bX.$cctor();return bX.getTextValD;};bl.extractAtsD=function(){bX.$cctor();return bX.extractAtsD;};bl.extractTextD=function(){bX.$cctor();return bX.extractTextD;};bm.New=function(dX,dY){return{lytName:dX,lytDefinition:dY};};bn.S=function(dX){return dX.$==1?dX.$0:dX.$0;};bn.Identifier=function(dX){var dY,dZ,d0;return dX.$==1&&(dZ=R.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",dX.$0),dZ!=null&&dZ.$==1&&((d0=dZ.$0,!bP.Equals(d0,null)&&d0.length===1)&&(dY=bN.get(dZ.$0,0),true)))?{$:1,$0:dY}:null;};bn.I=function(dX){var dY;dY=bn.Identifier(dX);return dY!=null&&dY.$==1?{$:1,$0:dY.$0}:null;};bn.Vertical=function(dX){var dY,dZ,d0,d1,d2,d3;return dX.$==1&&(dX.$0==="vertical"&&(dY=dX.$0,true))?{$:0,$0:null}:dX.$==1&&(dX.$0==="horizontal"&&(dZ=dX.$0,true))?{$:1,$0:null}:dX.$==1&&(dX.$0==="layout"&&(d0=dX.$0,true))?{$:2,$0:null}:dX.$==1&&(dX.$0==="grid"&&(d1=dX.$0,true))?{$:3,$0:null}:dX.$==1&&(dX.$0==="template"&&(d2=dX.$0,true))?{$:4,$0:null}:(d3=bn.Identifier(dX),d3!=null&&d3.$==1?{$:5,$0:d3.$0}:{$:6,$0:null});};bn.PlugIn=function(dX){var dY,dZ,d0,d1,d2;return dX.$==1&&(dX.$0==="PlugIn"&&(dY=dX.$0,true))?{$:0,$0:null}:dX.$==1&&(dX.$0==="Button"&&(dZ=dX.$0,true))?{$:1,$0:null}:dX.$==1&&(dX.$0==="input"&&(d0=dX.$0,true))?{$:2,$0:null}:dX.$==1&&(dX.$0==="textarea"&&(d1=dX.$0,true))?{$:3,$0:null}:dX.$==1&&(dX.$0==="select"&&(d2=dX.$0,true))?{$:4,$0:null}:{$:5,$0:null};};bn.Var=function(dX){var dY,dZ,d0,d1,d2;return dX.$==1&&(dX.$0==="Var"&&(dY=dX.$0,true))?{$:0,$0:null}:dX.$==1&&(dX.$0==="Doc"&&(dZ=dX.$0,true))?{$:1,$0:null}:dX.$==1&&(dX.$0==="View"&&(d0=dX.$0,true))?{$:2,$0:null}:dX.$==1&&(dX.$0==="Concat"&&(d1=dX.$0,true))?{$:3,$0:null}:dX.$==1&&(dX.$0==="Action"&&(d2=dX.$0,true))?{$:4,$0:null}:{$:5,$0:null};};bn.Measures$1=function(dX){var dY,dZ,d0,d1,d2,d3,d4,d5,d6;return dX.$==1?(dY=J.splitByChar("-",dX.$0),!bP.Equals(dY,null)&&dY.length===1&&(d0=(K.Double())(bN.get(dY,0)),d0!=null&&d0.$==1&&(dZ=d0.$0,true))?{$:1,$0:new bo({$:0,$0:dZ,$1:true})}:!bP.Equals(dY,null)&&dY.length===2&&(bN.get(dY,0)===""&&(d2=(K.Double())(bN.get(dY,1)),d2!=null&&d2.$==1&&(d1=d2.$0,true)))?{$:1,$0:new bo({$:0,$0:d1,$1:false})}:!bP.Equals(dY,null)&&dY.length===3&&(d4=(K.Double())(bN.get(dY,0)),d4!=null&&d4.$==1&&(d5=(K.Double())(bN.get(dY,1)),d5!=null&&d5.$==1&&(d6=(K.Double())(bN.get(dY,2)),d6!=null&&d6.$==1&&(d3=[d6.$0,d4.$0,d5.$0],true))))?{$:1,$0:new bo({$:1,$0:d3[1],$1:d3[2],$2:d3[0]})}:null):null;};bn.fixedSplitter=function(dX,dY,dZ,d0,d1){var d2,d3,d4,d5,d6,d7,d8;d2=(((dZ?dR.Curried3(function(d9,d_,d$){return d9(d_.toFixed(6)+"px calc(100% - "+d$.toFixed(6)+"px)");}):dR.Curried3(function(d9,d_,d$){return d9("calc(100% - "+d_.toFixed(6)+"px) "+d$.toFixed(6)+"px");}))(a.id))(dY))(dY);return dX?(d3=cu.Make().WithHole({$:1,$0:"partsizes",$1:d2}).WithHole({$:0,$0:"first",$1:d0}).WithHole({$:0,$0:"second",$1:d1}),(d4=cv.CompleteHoles(d3.k,d3.h,[]),(d5=new ct.New(d4[1],cw.fixedsplitterver(d4[0])),(d3.i=d5,d5)))).get_Doc():(d6=cu.Make().WithHole({$:1,$0:"partsizes",$1:d2}).WithHole({$:0,$0:"first",$1:d0}).WithHole({$:0,$0:"second",$1:d1}),(d7=cv.CompleteHoles(d6.k,d6.h,[]),(d8=new ct.New(d7[1],cw.fixedsplitterhor(d7[0])),(d6.i=d8,d8)))).get_Doc();};bn.variableSplitter=function(dX,dY,dZ,d0,d1,d2){return b$.Element("wcomp-splitter",bU.ofSeq(bS.delay(function(){return bS.append(dX?[cC.Create("vertical","")]:[],bS.delay(function(){return bS.append([cC.Create("min",a.String(dY))],bS.delay(function(){return bS.append([cC.Create("value",a.String(dZ))],bS.delay(function(){return[cC.Create("max",a.String(d0))];}));}));}));})),bU.ofArray([d1,d2]));};bn.doubleQuote=function(dX){var dY,dZ,d0;switch(dX.$==1?dX.$0.$==1?bT.StartsWith(dX.$0.$0,"//")?(dY=dX.$0.$0,1):2:2:0){case 0:return bY.Empty;case 1:return bY.Empty;case 2:switch(dX.$==1?dX.$0.$==0?dX.$1.$==1?dX.$1.$0.$==0?dX.$1.$0.$0==="\""?dX.$1.$1.$==0?(d0=dX.$0.$0,1):dX.$1.$1.$0.$==0?(d0=[dX.$1.$1.$1,dX.$0.$0,dX.$1.$1.$0.$0],0):(d0=[dX.$0,dX.$1],2):(d0=[dX.$0,dX.$1],2):(d0=[dX.$0,dX.$1],2):(d0=[dX.$0,dX.$1],2):(d0=[dX.$0,dX.$1],2):3){case 0:dZ=bn.doubleQuote(new bY({$:1,$0:{$:0,$0:d0[1]+"\""+d0[2]},$1:d0[0]}));break;case 1:dZ=bU.ofArray([{$:0,$0:d0}]);break;case 2:dZ=new bY({$:1,$0:d0[0],$1:bn.doubleQuote(d0[1])});break;case 3:throw new cE.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\src\\testing.fs",3781,38);}return dZ;}};bn.splitTokens=function(dX){return bn.doubleQuote(bU.ofSeq(bS.collect(a.id,bS.mapi(function(dY,dZ){var d0;return dY%2===1?[{$:0,$0:dZ}]:dZ===""?[{$:0,$0:"\""}]:(d0=bT.Trim(dZ),d0===""?[]:bN.map(function(d1){return{$:1,$0:d1};},bT.SplitChars(d0,[" "],1)));},J.splitByChar("\"",dX)))));};bn.splitName=function(){bX.$cctor();return bX.splitName;};bn.getOneTextData=function(dX,dY,dZ,d0){var d1,d2,d3;d1=((bn.splitName())(dX))(dY);d2=d1[0];d3=d1[1];return b9.Bind(function(d4){return d4==null?b9.Bind(function(d5){var d6;return d5==null?b9.Const({$:0,$0:((((dR.Curried(function(d7,d8,d9,d_){return d7(bM.toSafe(d8)+" @{Missing "+bM.toSafe(d9)+"}"+bM.toSafe(d_));},4))(a.id))(dZ))(dY))(d0)}):(d6=d5.$0,b9.Bind(function(d7){return d7.$==1?b9.Const({$:0,$0:(function(d8){return function(d9){return d8("Unexpected Action @{"+bM.toSafe(d9)+"}");};}(a.id))(f.Untag$3(d7.$0.actName))}):b9.Const({$:0,$0:dZ+d6+d7.$0});},bn.getTextData(dX,d0)));},ba.tryGetWoWW(d2,d3)):b9.Const({$:1,$0:d4.$0});},ba.tryGetActW(d2,d3));};bn.getTextData=function(dX,dY){var dZ,d0,d1,d2;dZ=(d0=J.delimitedO("@{","}",dY),d0==null?null:{$:1,$0:(d1=d0.$0,(d2=d1[0],bn.getOneTextData(dX,d1[1],d2,d1[2])))});return dZ==null?b9.Const({$:0,$0:dY}):dZ.$0;};bn.getTextToken=function(dX,dY){return dY.$==0?bn.getTextData(dX,dY.$0):bn.getOneTextData(dX,dY.$0,"","");};bn.getAttrs=function(dX,dY){var dZ;dZ=bn.S(dY);return bU.ofSeq(bS.delay(function(){return bS.append(bS.choose(function(d0){var d1,d2,d3,d4;function d5(d6,d7){var d8;return d7.$==1?(d8=d7.$0,d6.addEventListener(bT.Trim(d4),function(d9){return ba.callFunction(d6,d9,d8.actFunction);},false)):d6.setAttribute(bT.Trim(d4),bT.Trim(d7.$0));}return!bP.Equals(d0,null)&&d0.length===2&&(d2=bN.get(d0,1),bT.Trim(bN.get(d0,0))!==""&&bT.Trim(d2)!=="")?(d3=bN.get(d0,1),(d4=bN.get(d0,0),{$:1,$0:cA.DynamicCustom(function(d6){return function(d7){return d5(d6,d7);};},bn.getTextData(dX,bT.Trim(d3)))})):null;},bS.map(function(d0){return J.splitByChar("=",d0);},J.splitByChar(";",dZ))),bS.delay(function(){return bS.choose(function(d0){var d1,d2,d3,d4,d5;return!bP.Equals(d0,null)&&d0.length===2&&(d2=bN.get(d0,1),bT.Trim(bN.get(d0,0))!==""&&bT.Trim(d2)!=="")?(d3=bN.get(d0,1),(d4=bN.get(d0,0),{$:1,$0:(d5=b9.Map(function(d6){return d6.$==1?(function(d7){return function(d8){return d7("@{"+bM.toSafe(d8)+"}");};}(a.id))(f.Untag$3(d6.$0.actName)):bT.Trim(d6.$0);},bn.getTextData(dX,bT.Trim(d3))),cA.DynamicStyle(bT.Trim(d4),d5))})):null;},bS.map(function(d0){return J.splitByChar(":",d0);},J.splitByChar(";",dZ)));}));}));};bn.getDocF=function(dX,dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_;d0=dY.docDoc;switch(d0.$==1?dX.$==1?(dZ=[d0.$0,bn.S(dX.$0),dX.$1],1):6:d0.$==2?dX.$==1?(d1=bn.S(dX.$0),dX.$1.$==1?(dZ=[d0.$0,d1,bn.S(dX.$1.$0),dX.$1.$1],2):6):6:d0.$==3?dX.$==1?(d2=bn.S(dX.$0),dX.$1.$==1?(d3=bn.S(dX.$1.$0),dX.$1.$1.$==1?(dZ=[d0.$0,d2,d3,bn.S(dX.$1.$1.$0),dX.$1.$1.$1],3):6):6):6:d0.$==4?dX.$==1?(d4=bn.S(dX.$0),dX.$1.$==1?(d5=bn.S(dX.$1.$0),dX.$1.$1.$==1?(d6=bn.S(dX.$1.$1.$0),dX.$1.$1.$1.$==1?(dZ=[d0.$0,d4,d5,d6,bn.S(dX.$1.$1.$1.$0),dX.$1.$1.$1.$1],4):6):6):6):6:d0.$==5?dX.$==1?(d7=bn.S(dX.$0),dX.$1.$==1?(d8=bn.S(dX.$1.$0),dX.$1.$1.$==1?(d9=bn.S(dX.$1.$1.$0),dX.$1.$1.$1.$==1?(d_=bn.S(dX.$1.$1.$1.$0),dX.$1.$1.$1.$1.$==1?(dZ=[d0.$0,d7,d8,d9,d_,bn.S(dX.$1.$1.$1.$1.$0),dX.$1.$1.$1.$1.$1],5):6):6):6):6):6:(dZ=[d0.$0,dX],0)){case 0:return[dZ[0].f(),dZ[1]];case 1:return[dZ[0](dZ[1]),dZ[2]];case 2:return[(dZ[0](dZ[1]))(dZ[2]),dZ[3]];case 3:return[((dZ[0](dZ[1]))(dZ[2]))(dZ[3]),dZ[4]];case 4:return[(((dZ[0](dZ[1]))(dZ[2]))(dZ[3]))(dZ[4]),dZ[5]];case 5:return[((((dZ[0](dZ[1]))(dZ[2]))(dZ[3]))(dZ[4]))(dZ[5]),dZ[6]];case 6:return[b$.Element("div",[],[b$.TextNode((((dR.Curried3(function(d$,ea,eb){return d$("Parameters do not coincide with definition "+cx.p$1(ea)+" - "+bM.printList(function(ec){return cy.p$10(ec);},eb));}))(a.id))(dY))(dX))]),bY.Empty];}};bn.getDocFinal=function(dX,dY){var dZ;dZ=bn.getDocF(dX,dY);return dZ[1].$==0?dZ[0]:ba.errDoc((((dR.Curried3(function(d0,d1,d2){return d0("Too many parameters "+cx.p$1(d1)+" "+bM.printList(function(d3){return cy.p$10(d3);},d2));}))(a.id))(dY))(dX));};bn.set_currentViewTriggger=function(dX){bX.$cctor();bX.currentViewTriggger=dX;};bn.currentViewTriggger=function(){bX.$cctor();return bX.currentViewTriggger;};bn.turnToView=function(dX){return b$.EmbedView(b9.Map(dX,bn.currentViewTriggger()));};bn.getADoc=function(dX,dY){var dZ,d0,d1,d2,d3;dZ=bn.Identifier(dY);return dZ!=null&&dZ.$==1?(d0=dZ.$0,(d1=((bn.splitName())(dX))(d0),(d2=d1[0],(d3=d1[1],b$.BindView(function(d4){return d4==null?b$.BindView(function(d5){var d6;return d5==null?ba.errDoc((d6=(function(d7){return function(d8){return d7("Missing doc: "+bM.toSafe(d8));};}(a.id))(d0),(c.print(d6),d6))):b$.TextNode(d5.$0);},ba.tryGetWoWW(d2,d3)):(bn.getDocF(bY.Empty,d4.$0))[0];},ba.tryGetDocW(d2,d3)))))):b$.TextView(b9.Map(function(d4){return d4.$==1?(function(d5){return function(d6){return d5("Unexpected action: "+bM.toSafe(d6));};}(a.id))(f.Untag$3(d4.$0.actName)):d4.$0;},bn.getTextData(dX,bn.S(dY))));};bn.getAllDocs=function(dX,dY){return dY.$==1?new bY({$:1,$0:bn.getADoc(dX,dY.$0),$1:bn.getAllDocs(dX,dY.$1)}):bY.Empty;};bn.getOneDoc=function(dX,dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_;return dY.$==1&&(d0=bn.Identifier(dY.$0),d0!=null&&d0.$==1&&(dZ=[d0.$0,dY.$1],true))?(d1=dZ[0],(d2=dZ[1],(d3=((bn.splitName())(dX))(d1),(d4=d3[0],(d5=d3[1],(d6=(d7=ba.tryGetDoc(d4,d5),d7==null?null:{$:1,$0:bn.getDocF(d2,d7.$0)}),d6==null?(d8=(d9=ba.tryGetWoW(d4,d5),d9==null?null:{$:1,$0:[b$.TextView(d9.$0),d2]}),d8==null?[ba.errDoc((d_=(function(d$){return function(ea){return d$("Missing doc: "+bM.toSafe(ea));};}(a.id))(d1),(c.print(d_),d_))),d2]:d8.$0):d6.$0)))))):dY.$==0?[b$.get_Empty(),bY.Empty]:[b$.TextView(b9.Map(function(d$){return d$.$==1?(function(ea){return function(eb){return ea("Unexpected action: "+bM.toSafe(eb));};}(a.id))(f.Untag$3(d$.$0.actName)):d$.$0;},bn.getTextData(dX,bn.S(dY.$0)))),dY.$1];};bn.getDocs_=function(dX,dY){var dZ;return dY.$==0?bY.Empty:(dZ=bn.getOneDoc(dX,dY),new bY({$:1,$0:dZ[0],$1:bn.getDocs_(dX,dZ[1])}));};bn.pairOfDocs=function(dX,dY){var dZ;dZ=b9.Map(function(d0){var d1;return d0.$==1&&(d0.$1.$==1&&(d0.$1.$1.$==0&&(d1=[d0.$0,d0.$1.$0],true)))?[d1[0],d1[1]]:[ba.errDoc((function(d2){return function(d3){return d2("splitter expects exactly 2 elements "+bM.printList(function(d4){return cy.p$10(d4);},d3));};}(a.id))(dY)),ba.errDoc("part 2")];},b9.Map(function(){return bn.getAllDocs(dX,dY);},bn.currentViewTriggger()));return[b$.EmbedView(b9.Map(function(d0){return d0[0];},dZ)),b$.EmbedView(b9.Map(function(d0){return d0[1];},dZ))];};bn.singleDoc=function(dX,dY){return b$.EmbedView(b9.Map(function(dZ){var d0;return dZ.$==1&&(dZ.$1.$==0&&(d0=dZ.$0,true))?d0:ba.errDoc((function(d1){return function(d2){return d1("expected exactly 1 element "+bM.printList(function(d3){return cy.p$10(d3);},d2));};}(a.id))(dY));},b9.Map(function(){return bn.getAllDocs(dX,dY);},bn.currentViewTriggger())));};bn.createSplitter=function(dX,dY,dZ,d0,d1){var d2;d2=bn.pairOfDocs(dX,d1);return d0.$==1?bn.variableSplitter(dZ,d0.$0,d0.$1,d0.$2,d2[0],d2[1]):bn.fixedSplitter(dZ,d0.$0,d0.$1,d2[0],d2[1]);};bn.createElement=function(dX,dY,dZ,d0,d1){return bn.turnToView(function(){var d2;d2=[b$.Concat(bn.getAllDocs(dX,d1))];return b$.Element(dZ,bn.getAttrs(dX,d0),d2);});};bn.createButton=function(dX,dY,dZ,d0,d1){var d2;d2=bn.S(d1);return bn.turnToView(function(){var d3,d4,d5,d6,d7;function d8(d9,d_){return ba.callFunction(null,null,d9.actFunction);}d3=(d4=(d5=(d6=((bn.splitName())(dX))(dZ),ba.tryGetAct(d6[0],d6[1])),d5==null?null:{$:1,$0:(d7=d5.$0,function(d9){return d8(d7,d9);})}),d4==null?a.ignore:d4.$0);return b$.Button(d2,bn.getAttrs(dX,d0),d3);});};bn.createInput=function(dX,dY,dZ,d0){return bn.turnToView(function(){var d1;return b$.BindView(function(d2){return d2==null?ba.errDoc((function(d3){return function(d4){return d3("Missing var: "+bM.toSafe(d4));};}(a.id))(dZ)):b$.Input(bn.getAttrs(dX,d0),d2.$0);},(d1=((bn.splitName())(dX))(dZ),ba.tryGetVoVW(d1[0],d1[1])));});};bn.createTextArea=function(dX,dY,dZ,d0){return bn.turnToView(function(){var d1;return b$.BindView(function(d2){return d2==null?ba.errDoc((function(d3){return function(d4){return d3("Missing var: "+bM.toSafe(d4));};}(a.id))(dZ)):b$.InputArea(bn.getAttrs(dX,d0),d2.$0);},(d1=((bn.splitName())(dX))(dZ),ba.tryGetVoVW(d1[0],d1[1])));});};bn.createDoc=function(dX,dY,dZ,d0){return bn.turnToView(function(){var d1,d2,d3;d1=(d2=(d3=((bn.splitName())(dX))(dZ),ba.tryGetDoc(d3[0],d3[1])),d2==null?null:{$:1,$0:bn.getDocFinal(d0,d2.$0)});return d1==null?ba.errDoc((function(d4){return function(d5){return d4("Missing doc: "+bM.toSafe(d5));};}(a.id))(dZ)):d1.$0;});};bn.createTemplate=function(dX,dY,dZ,d0,d1){return bn.turnToView(function(){var d2,d3,d4,d5,d6,d7;d4=bn.getAttrs(dX,d0);c0.LoadLocalTemplates("local");function d8(d_,d$){var ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek;ea=bn.S(d_);eb=bn.Identifier(d$);return eb!=null&&eb.$==1?(ec=eb.$0,ed=(ee=(ef=(eg=((bn.splitName())(dX))(ec),ba.tryGetDoc(eg[0],eg[1])),ef==null?null:{$:1,$0:{$:0,$0:ea.toLowerCase(),$1:(bn.getDocF(bY.Empty,ef.$0))[0]}}),ee==null?(eh=(ei=((bn.splitName())(dX))(ec),ba.tryGetVar(ei[0],ei[1])),eh==null?null:{$:1,$0:{$:8,$0:ea.toLowerCase(),$1:eh.$0.varVar}}):ee),ed==null?{$:0,$0:ea.toLowerCase(),$1:ba.errDoc((function(el){return function(em){return el("Missing element: "+bM.toSafe(em));};}(a.id))(ec))}:ed.$0):(ej=bn.S(d_),ek=bn.S(d$),{$:0,$0:ej.toLowerCase(),$1:ba.errDoc((function(el){return function(em){return el("Not implemented: "+bM.toSafe(em));};}(a.id))(ek))});}function d9(d_,d$){return d_%2===0;}try{d3={$:1,$0:(d5=(d6=bS.map(function(d_){return d8(d_[0],d_[1]);},bS.map(function(d_){return d_[1];},bS.filter(function(d_){return d9(d_[0],d_[1]);},bS.indexed(bS.pairwise(d1))))),(bS.isEmpty(d4)?a.id:(d7=[{$:3,$0:"attrs",$1:cC.Concat(d4)}],function(d_){return bS.append(d7,d_);}))(d6)),c0.NamedTemplate("local",{$:1,$0:dZ.toLowerCase()},d5))};}catch(d_){d3=null;}return d3==null?ba.errDoc((function(d$){return function(ea){return d$("Missing template: "+bM.toSafe(ea));};}(a.id))(dZ)):d3.$0;});};bn.getParamText=function(dX,dY,dZ){b9.Get(function(d0){if(d0.$==1)dZ(d0.$0);else dZ(d0.$0);},bn.getTextToken(dX,dY));};bn.createAction=function(dX,dY,dZ,d0){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec;d5=(d2=((bn.splitName())(dX))(dZ),ba.tryGetAct(d2[0],d2[1]));if(d5==null)d1=null;else{d6=d5.$0;if(d0.$===0)d3=d6.actFunction;else{d7=d6.actFunction;switch(d7.$==1?d0.$==1?d0.$1.$==0?(d4=[d7.$0,d0.$0],0):3:3:d7.$==2?d0.$==1?d0.$1.$==0?(d4=[d7.$0,d7.$2,d0.$0],2):d0.$1.$1.$==0?(d4=[d7.$0,d0.$0,d0.$1.$0],1):3:3:3){case 0:d3=(d8=d4[0],(d9=d4[1],{$:0,$0:function(){bn.getParamText(dX,d9,d8);}}));break;case 1:d3=(d_=d4[0],(d$=d4[1],(ea=d4[2],{$:0,$0:function(){bn.getParamText(dX,d$,function(ed){bn.getParamText(dX,ea,d_(ed));});}})));break;case 2:d3=(eb=d4[0],(ec=d4[2],{$:1,$0:function(ed){bn.getParamText(dX,ec,function(ee){(eb(ee))(ed);});},$1:d4[1]}));break;case 3:d3={$:0,$0:function(){((((dR.Curried(function(ed,ee,ef,eg){return ed("Parameters do not coincide for Action "+bM.toSafe(ee)+" "+bM.printList(function(eh){return cy.p$10(eh);},ef)+" "+cx.p(eg));},4))(function(ed){dP.log(ed);}))(dZ))(d0))(d6);}};break;}}d1={$:1,$0:d3};}return d1==null?{$:0,$0:function(){((function(ed){return function(ee){return ed("Action Not Found "+bM.toSafe(ee));};}(function(ed){dP.log(ed);}))(dZ));}}:d1.$0;};bn.createConcat=function(dX,dY,dZ){return bn.turnToView(function(){return b$.Concat(bn.getAllDocs(dX,dZ));});};bn.createVar=function(dX,dY,dZ){return cb.Create$1(dZ);};bn.findJSEntry=function(dX){return bS.fold(function(dY,dZ){var d0;return dY==null?null:(d0=dY.$0,!d0[dZ]?null:{$:1,$0:d0[dZ]});},{$:1,$0:a},J.splitByChar(".",dX));};bn.createView=function(dX,dY,dZ){return b9.Bind(function(){var d0;function d1(d2){return d2.$==1?(function(d3){return function(d4){return d3(cx.p(d4));};}(a.id))(d2.$0):d2.$0;}try{return b9.Map(function(d2){try{return!bP.Equals(d2,null)&&d2.length===0?"No JS function specified":!bP.Equals(d2,null)&&d2.length===1?a.String(a["eval"](bN.get(d2,0))):a.String(a["eval"](bN.get(d2,0)).apply(null,bO.array(d2,{$:1,$0:1},null)));}catch(d3){return d3.message;}},b9.Map((d0=function(d2){return bS.map(d1,d2);},function(d2){return bN.ofSeq(d0(d2));}),cF.traverseSeq(function(d2){return bn.getTextToken(dX,d2);},dZ)));}catch(d2){return b9.Const(d2.message);}},bn.currentViewTriggger());};bn.createSplitterM=function(){bX.$cctor();return bX.createSplitterM;};bn.createButtonM=function(){bX.$cctor();return bX.createButtonM;};bn.createInputM=function(){bX.$cctor();return bX.createInputM;};bn.createTextAreaM=function(){bX.$cctor();return bX.createTextAreaM;};bn.createElementM=function(){bX.$cctor();return bX.createElementM;};bn.createDocM=function(){bX.$cctor();return bX.createDocM;};bn.createTemplateM=function(){bX.$cctor();return bX.createTemplateM;};bn.createConcatM=function(){bX.$cctor();return bX.createConcatM;};bn.createVarM=function(){bX.$cctor();return bX.createVarM;};bn.createViewM=function(){bX.$cctor();return bX.createViewM;};bn.createActionM=function(){bX.$cctor();return bX.createActionM;};bn.entryDoc=function(dX,dY){return{$:1,$0:{$:2,$0:ba.newDoc(dX,cB.Create(function(){return dY;}))}};};bn.entryVar=function(dX,dY){return{$:1,$0:{$:0,$0:ba.newVar(dX,dY)}};};bn.entryView=function(dX,dY){return{$:1,$0:{$:1,$0:ba.newViw(dX,dY)}};};bn.entryAct=function(dX,dY){return{$:1,$0:{$:3,$0:ba.newActF(dX,dY)}};};bn.createEntryO=function(dX,dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE;try{dZ=bn.splitTokens(dY);return dZ.$==1&&(d1=bn.Identifier(dZ.$0),d1!=null&&d1.$==1&&(dZ.$1.$==1&&(bn.Vertical(dZ.$1.$0).$==0&&(dZ.$1.$1.$==1&&(d2=bn.Measures$1(dZ.$1.$1.$0),d2!=null&&d2.$==1&&(d0=[dZ.$1.$1.$1,d2.$0,d1.$0],true))))))?(d3=d0[2],bn.entryDoc(f.Tag$3(d3),(bn.createSplitterM())([dX,d3,true,d0[1],d0[0]]))):dZ.$==1&&(d5=bn.Identifier(dZ.$0),d5!=null&&d5.$==1&&(dZ.$1.$==1&&(bn.Vertical(dZ.$1.$0).$==1&&(dZ.$1.$1.$==1&&(d6=bn.Measures$1(dZ.$1.$1.$0),d6!=null&&d6.$==1&&(d4=[dZ.$1.$1.$1,d6.$0,d5.$0],true))))))?(d7=d4[2],bn.entryDoc(f.Tag$3(d7),(bn.createSplitterM())([dX,d7,false,d4[1],d4[0]]))):dZ.$==1&&(d9=bn.Identifier(dZ.$0),d9!=null&&d9.$==1&&(dZ.$1.$==1&&(bn.PlugIn(dZ.$1.$0).$==1&&(dZ.$1.$1.$==1&&(d_=bn.Identifier(dZ.$1.$1.$0),d_!=null&&d_.$==1&&(dZ.$1.$1.$1.$==1&&(dZ.$1.$1.$1.$1.$==1&&(dZ.$1.$1.$1.$1.$1.$==0&&(d8=[d_.$0,dZ.$1.$1.$1.$0,d9.$0,dZ.$1.$1.$1.$1.$0],true)))))))))?(d$=d8[2],bn.entryDoc(f.Tag$3(d$),(bn.createButtonM())([dX,d$,d8[0],d8[1],d8[3]]))):dZ.$==1&&(eb=bn.Identifier(dZ.$0),eb!=null&&eb.$==1&&(dZ.$1.$==1&&(bn.PlugIn(dZ.$1.$0).$==2&&(dZ.$1.$1.$==1&&(ec=bn.Identifier(dZ.$1.$1.$0),ec!=null&&ec.$==1&&(dZ.$1.$1.$1.$==1&&(dZ.$1.$1.$1.$1.$==0&&(ea=[dZ.$1.$1.$1.$0,eb.$0,ec.$0],true))))))))?(ed=ea[1],bn.entryDoc(f.Tag$3(ed),(bn.createInputM())([dX,ed,ea[2],ea[0]]))):dZ.$==1&&(ef=bn.Identifier(dZ.$0),ef!=null&&ef.$==1&&(dZ.$1.$==1&&(bn.PlugIn(dZ.$1.$0).$==3&&(dZ.$1.$1.$==1&&(eg=bn.Identifier(dZ.$1.$1.$0),eg!=null&&eg.$==1&&(dZ.$1.$1.$1.$==1&&(dZ.$1.$1.$1.$1.$==0&&(ee=[dZ.$1.$1.$1.$0,ef.$0,eg.$0],true))))))))?(eh=ee[1],bn.entryDoc(f.Tag$3(eh),(bn.createTextAreaM())([dX,eh,ee[2],ee[0]]))):dZ.$==1&&(ej=bn.Identifier(dZ.$0),ej!=null&&ej.$==1&&(dZ.$1.$==1&&(bn.Var(dZ.$1.$0).$==0&&(dZ.$1.$1.$==1&&(dZ.$1.$1.$1.$==0&&(ei=[ej.$0,bn.S(dZ.$1.$1.$0)],true))))))?(ek=ei[0],bn.entryVar(f.Tag$3(ek),(bn.createVarM())([dX,ek,ei[1]]))):dZ.$==1&&(em=bn.Identifier(dZ.$0),em!=null&&em.$==1&&(dZ.$1.$==1&&(bn.Var(dZ.$1.$0).$==1&&(dZ.$1.$1.$==1&&(el=[bn.S(dZ.$1.$1.$0),em.$0,dZ.$1.$1.$1],true)))))?(en=el[1],bn.entryDoc(f.Tag$3(en),(bn.createDocM())([dX,en,el[0],el[2]]))):dZ.$==1&&(ep=bn.Identifier(dZ.$0),ep!=null&&ep.$==1&&(dZ.$1.$==1&&(bn.Var(dZ.$1.$0).$==2&&(eo=[ep.$0,dZ.$1.$1],true))))?(eq=eo[0],bn.entryView(f.Tag$3(eq),(bn.createViewM())([dX,eq,eo[1]]))):dZ.$==1&&(es=bn.Identifier(dZ.$0),es!=null&&es.$==1&&(dZ.$1.$==1&&(bn.Vertical(dZ.$1.$0).$==4&&(dZ.$1.$1.$==1&&(dZ.$1.$1.$1.$==1&&(er=[dZ.$1.$1.$1.$0,dZ.$1.$1.$1.$1,es.$0,bn.S(dZ.$1.$1.$0)],true))))))?(et=er[2],bn.entryDoc(f.Tag$3(et),(bn.createTemplateM())([dX,et,er[3],er[0],er[1]]))):dZ.$==1&&(ev=bn.Identifier(dZ.$0),ev!=null&&ev.$==1&&(dZ.$1.$==1&&(bn.Var(dZ.$1.$0).$==3&&(eu=[dZ.$1.$1,ev.$0],true))))?(ew=eu[1],bn.entryDoc(f.Tag$3(ew),(bn.createConcatM())([dX,ew,eu[0]]))):dZ.$==1&&(ey=bn.Identifier(dZ.$0),ey!=null&&ey.$==1&&(dZ.$1.$==1&&(bn.Var(dZ.$1.$0).$==4&&(dZ.$1.$1.$==1&&(ez=bn.Identifier(dZ.$1.$1.$0),ez!=null&&ez.$==1&&(ex=[ez.$0,ey.$0,dZ.$1.$1.$1],true))))))?(eA=ex[1],bn.entryAct(f.Tag$3(eA),(bn.createActionM())([dX,eA,ex[0],ex[2]]))):dZ.$==1&&(eC=bn.Identifier(dZ.$0),eC!=null&&eC.$==1&&(dZ.$1.$==1&&(eD=bn.Vertical(dZ.$1.$0),eD.$==5&&(dZ.$1.$1.$==1&&(eB=[dZ.$1.$1.$0,dZ.$1.$1.$1,eD.$0,eC.$0],true)))))?(eE=eB[3],bn.entryDoc(f.Tag$3(eE),(bn.createElementM())([dX,eE,eB[2],eB[0],eB[1]]))):null;}catch(eF){return null;}};bn.getExtraLines=function(dX,dY){var dZ,d0,d1,d2;dZ=(d0=(d1=bS.tryFindIndex(function(d3){return bT.Trim(d3)!==""&&!dX(d3);},bS.skip(1,dY)),d1==null?null:{$:1,$0:1+d1.$0}),(d2=bN.length(dY),d0==null?d2:d0.$0));return[bO.array(dY,{$:1,$0:1},{$:1,$0:dZ-1}),bO.array(dY,{$:1,$0:dZ},null)];};bn.createLines=function(dX,dY,dZ,d0,d1,d2){var d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;d3=bT.replicate(dY,":");d4=":"+d3;d5=bS.tryHead(d2);return d5!=null&&d5.$==1?(d6=J.StartsWith(d3,bT.Trim(d5.$0)),d6!=null&&d6.$==1?(d7=d6.$0,(d8=bn.getExtraLines(function(eb){return bT.StartsWith(bT.Trim(eb),d4);},d2),(d9=(((dR.Curried3(function(eb,ec,ed){return eb("_"+bM.toSafe(ec)+"_"+a.String(ed));}))(a.id))(dX))(d1),(d_=bn.createLines(d9,dY+1,[],[],1,d8[0]),(d$=d_[1],(ea=d_[0],bn.createLines(dX,dY,bN.ofSeq(bS.delay(function(){return bS.append(dZ,bS.delay(function(){return[d9];}));})),bN.ofSeq(bS.delay(function(){return bS.append(d0,bS.delay(function(){return bS.append(d$,bS.delay(function(){return[d9+" "+d7+" "+bT.concat(" ",ea)];}));}));})),d1+1,d8[1]))))))):[dZ,d0]):[dZ,d0];};bn.processLines=function(dX,dY){function dZ(d0){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;d1=bS.tryHead(d0);return d1!=null&&d1.$==1?(d2=d1.$0,(d3=bn.splitTokens(d2),d3.$==1&&(d5=bn.Identifier(d3.$0),d5!=null&&d5.$==1&&(d3.$1.$==1&&(bn.Vertical(d3.$1.$0).$==2&&(d3.$1.$1.$==0&&(d4=d5.$0,true)))))?(d6=bn.getExtraLines(function(eb){return bT.StartsWith(bT.Trim(eb),"|");},d0),dZ((br.createLayoutDefinitions(d4,br.extractNodes(d6[0])))[1].concat(d6[1]))):d3.$==0?dZ(bO.array(d0,{$:1,$0:1},null)):(d7=bn.getExtraLines(function(eb){return bT.StartsWith(bT.Trim(eb),":");},d0),(d8=d7[1],(d9=d7[0],bN.length(d9)>0?(d_=bn.createLines(bS.nth(0,bT.SplitChars(d2,[" "],1)),1,[],[],1,d9),(d$=d_[0],(ea=d_[1],dZ(bN.ofSeq(bS.delay(function(){return bS.append(ea,bS.delay(function(){return bS.append([d2+" "+bT.concat(" ",d$)],bS.delay(function(){return d8;}));}));})))))):bN.ofSeq(bS.delay(function(){var eb;return bS.append((eb=dX(d2),eb!=null&&eb.$==1?[eb.$0]:[]),bS.delay(function(){return dZ(d8);}));}))))))):[];}return dZ(dY);};bn.processText=function(dX,dY){return bn.processLines(dX,bT.SplitChars(dY,["\n","\r"],1));};bn.parseEntries=function(dX,dY){return bn.processText(bp.createEntryO2(dX,new bR.New$5()),dY);};bn.createEntries=function(dX){function dY(dZ){return bn.createEntryO(dX,dZ);}return function(dZ){return bn.processText(dY,dZ);};};bn.getText=function(dX,dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7;dZ=bn.Identifier(dY);return dZ!=null&&dZ.$==1?(d0=dZ.$0,(d1=((bn.splitName())(dX))(d0),(d2=d1[0],(d3=d1[1],(d4=(d5=ba.tryGetViw(d2,d3),d5==null?null:{$:1,$0:b$.TextView(d5.$0.viwView)}),d4==null?(d6=(d7=ba.tryGetVar(d2,d3),d7==null?null:{$:1,$0:b$.TextView(d7.$0.varVar.get_View())}),d6==null?b$.TextNode(d0):d6.$0):d4.$0))))):b$.TextNode(bn.S(dY));};bn.getDocEntries=function(dX){function dY(dZ){return dZ[1];}return bS.map(function(dZ){return bS.last(dY(dZ));},bS.groupBy(function(dZ){return dZ.docName;},bS.choose(function(dZ){return dZ.$==2?{$:1,$0:dZ.$0}:null;},dX)));};bn.getVarEntries=function(dX){function dY(dZ){return dZ[1];}return bS.map(function(dZ){return bS.last(dY(dZ));},bS.groupBy(function(dZ){return dZ.varName;},bS.choose(function(dZ){return dZ.$==0?{$:1,$0:dZ.$0}:null;},dX)));};bn.getViewEntries=function(dX){function dY(dZ){return dZ[1];}return bS.map(function(dZ){return bS.last(dY(dZ));},bS.groupBy(function(dZ){return dZ.viwName;},bS.choose(function(dZ){return dZ.$==1?{$:1,$0:dZ.$0}:null;},dX)));};bn.getActionEntries=function(dX){function dY(dZ){return dZ[1];}return bS.map(function(dZ){return bS.last(dY(dZ));},bS.groupBy(function(dZ){return dZ.actName;},bS.choose(function(dZ){return dZ.$==3?{$:1,$0:dZ.$0}:null;},dX)));};bn.getQueryEntries=function(dX){function dY(dZ){return dZ[1];}return bS.map(function(dZ){return bS.last(dY(dZ));},bS.groupBy(function(dZ){return dZ.qryName;},bS.choose(function(dZ){return dZ.$==4?{$:1,$0:dZ.$0}:null;},dX)));};bn.inputFile=function(dX,dY,dZ,d0,d1){var d2,d3,d4,d5;d2=(d3=(d4=((bn.splitName())(dX))(d0),ba.tryGetAct(d4[0],d4[1])),d3==null?null:{$:1,$0:(d5=d3.$0,b$.Element("div",bn.getAttrs(dX,{$:0,$0:dY}),[b$.Element("div",[cC.Create("class","input-group")],[b$.Element("span",[cC.Create("class","input-group-btn")],[b$.Element("label",[cC.Create("class","btn")],[bn.getText(dX,{$:0,$0:dZ}),b$.Element("input",[cC.Create("class","form-control"),cC.Create("type","file"),cA.Style("display","none"),cC.HandlerImpl("click",function(d6){return function(){d6.value="";};}),cC.HandlerImpl("change",function(d6){return function(){return ba.callFunction(d6,null,d5.actFunction);};})],[])])]),d1!==""?bn.singleDoc(dX,bU.ofArray([{$:1,$0:d1}])):b$.get_Empty()])]))});return d2==null?ba.errDoc((function(d6){return function(d7){return d6("Action not found "+bM.toSafe(d7));};}(a.id))(d0)):d2.$0;};bn.inputLabel=function(dX,dY,dZ,d0){var d1,d2,d3;d1=(d2=(d3=((bn.splitName())(dX))(d0),ba.tryGetVar(d3[0],d3[1])),d2==null?null:{$:1,$0:b$.Element("div",bn.getAttrs(dX,{$:0,$0:dY}),[b$.Element("div",[cC.Create("class","input-group")],[b$.Element("span",[cC.Create("class","input-group-addon")],[bn.getText(dX,{$:0,$0:dZ})]),b$.Input([cC.Create("class","form-control")],d2.$0.varVar)])])});return d1==null?ba.errDoc((function(d4){return function(d5){return d4("Var not found "+bM.toSafe(d5));};}(a.id))(d0)):d1.$0;};bn.none=function(dX){return b$.Element("span",[],[]);};bn.htmlDoc=function(dX,dY){return b$.BindView(function(dZ){return dZ.$==1?ba.errDoc((function(d0){return function(d1){return d0("HtmlDoc: unexpected action "+cx.p(d1));};}(a.id))(dZ.$0)):b$.Verbatim(dZ.$0);},bn.getTextData(dX,dY));};bn.refreshEntries=function(dX,dY){var dZ,d0,d1,d2;dZ=(d0=ba.tryGetPlugIn(dX),d0==null?(d1=(d2=ba.defaultPlugIn(),bg.New(dX,d2.plgVars,d2.plgViews,d2.plgDocs,d2.plgActions,d2.plgQueries)),(ba.addPlugIn(d1),d1)):d0.$0);cG.refreshLM(dZ.plgVars,bN.ofSeq(bS.delay(function(){return bn.getVarEntries(dY);})));cG.refreshLM(dZ.plgViews,bN.ofSeq(bS.delay(function(){return bn.getViewEntries(dY);})));cG.refreshLM(dZ.plgActions,bN.ofSeq(bS.delay(function(){return bn.getActionEntries(dY);})));cG.refreshLM(dZ.plgQueries,bN.ofSeq(bS.delay(function(){return bn.getQueryEntries(dY);})));cG.refreshLM(dZ.plgDocs,bN.ofSeq(bS.delay(function(){return bS.append(bn.getDocEntries(dY),bS.delay(function(){return bS.append([ba.newDocF(f.Tag$3("InputFile"),{$:4,$0:dR.Curried(bn.inputFile,4,[dX]),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],bS.delay(function(){return bS.append([ba.newDocF(f.Tag$3("InputLabel"),{$:3,$0:dR.Curried(bn.inputLabel,3,[dX]),$1:"attrs",$2:"Label",$3:"Var"})],bS.delay(function(){return bS.append([ba.newDocF(f.Tag$3("HtmlDoc"),{$:1,$0:function(d3){return bn.htmlDoc(dX,d3);},$1:"html"})],bS.delay(function(){return[ba.newDocF(f.Tag$3("none"),{$:1,$0:bn.none,$1:"x"})];}));}));}));}));})));};bn.addLayout=function(dX){b9.Sink(function(dY){var dZ;bn.set_currentViewTriggger(b9.Map2(function(d0,d1){return d0+d1;},dX.lytDefinition.get_View(),ba.mainDocV().get_View()));bn.refreshEntries(dX.lytName,(dZ=(bn.createEntries(dX.lytName))(dY),bS.append(bU.ofArray([{$:0,$0:ba.newVar(f.Tag$3("Layout"),dX.lytDefinition)}]),dZ)));},dX.lytDefinition.get_View());};bn.newLyt=function(dX,dY){return bm.New(dX,cb.Create$1(dY));};bn.addNewLayout=function(dX,dY){var dZ,d0;bn.addLayout((dZ=(d0=!bP.Equals(dY,null)?dY:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(J.unindentStr())(d0)),bn.newLyt(!bP.Equals(dY,null)?dX:f.Tag$3("Lyt_"+bT.Replace(a.String(bK.NewGuid()),"-","")),dZ)));};bo=bn.Measures=dR.Class({toString:function(){return this.$==1?((((dR.Curried(function(dX,dY,dZ,d0){return dX(a.String(dY)+"-"+a.String(dZ)+"-"+a.String(d0));},4))(a.id))(bL.toInt(this.$0)))(bL.toInt(this.$1)))(bL.toInt(this.$2)):a.String(bL.toInt(this.$1?this.$0:-this.$0));}},null,bo);bp.pairOfDocs=function(dX,dY){var dZ;dZ=b9.Map(function(d0){var d1;return d0.$==1&&(d0.$1.$==1&&(d0.$1.$1.$==0&&(d1=[d0.$0,d0.$1.$0],true)))?[d1[0],d1[1]]:[ba.errDoc((function(d2){return function(d3){return d2("splitter expects exactly 2 elements "+bM.printList(function(d4){return cy.p$10(d4);},d3));};}(a.id))(dY)),ba.errDoc("part 2")];},b9.Map(function(){return bn.getAllDocs(dX,dY);},bn.currentViewTriggger()));return[b$.EmbedView(b9.Map(function(d0){return d0[0];},dZ)),b$.EmbedView(b9.Map(function(d0){return d0[1];},dZ))];};bp.entryDef=function(dX,dY){return{$:0,$0:dX,$1:dY};};bp.entryDoc=function(dX,dY){return{$:1,$0:bp.entryDef(dX,{$:0,$0:dY})};};bp.entryAct=function(dX,dY){return{$:1,$0:bp.entryDef(dX,{$:1,$0:dY})};};bp.entryView=function(dX,dY){return{$:1,$0:bp.entryDef(dX,{$:3,$0:dY})};};bp.entryVar=function(dX,dY){return{$:1,$0:bp.entryDef(dX,{$:2,$0:dY})};};bp.entryPlg=function(dX,dY){return{$:1,$0:bp.entryDef(dX,{$:4,$0:dY})};};bp.entryRef=function(dX,dY,dZ){return{$:1,$0:bp.entryDef(dX,{$:5,$0:[dY,dZ]})};};bp.R=function(dX){var dY,dZ,d0;dY=bn.Identifier(dX);return dY!=null&&dY.$==1?(dZ=bT.SplitChars(dY.$0,["."],0),!bP.Equals(dZ,null)&&dZ.length===1?{$:1,$0:{$:0,$0:bN.get(dZ,0)}}:!bP.Equals(dZ,null)&&dZ.length===2?(d0=bN.get(dZ,1),{$:1,$0:{$:1,$0:bN.get(dZ,0),$1:d0}}):null):null;};bp.createEntryO=function(dX,dY,dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY;function eZ(fg){var fh,fi;fh=bp.R(fg);return fh!=null&&fh.$==1?(fi=fh.$0,{$:1,$0:[dX(fi),fi]}):null;}function e0(fg){var fh,fi;return(fi=eZ(fg),fi!=null&&fi.$==1&&(fi.$0[0][0].$==0&&(fh=fi.$0[1],true)))?{$:1,$0:{$:0,$0:fh}}:null;}function e1(fg){var fh,fi;return(fi=eZ(fg),fi!=null&&fi.$==1&&(fi.$0[0][0].$==1&&(fh=fi.$0[1],true)))?{$:1,$0:{$:0,$0:fh}}:null;}function e2(fg){var fh,fi;return(fi=eZ(fg),fi!=null&&fi.$==1&&(fi.$0[0][0].$==2&&(fh=fi.$0[1],true)))?{$:1,$0:{$:0,$0:fh}}:null;}function e3(fg){var fh,fi;return(fi=eZ(fg),fi!=null&&fi.$==1&&(fi.$0[0][0].$==3&&(fh=fi.$0[1],true)))?{$:1,$0:{$:0,$0:fh}}:null;}function e4(fg){var fh,fi,fj;return(fi=eZ(fg),fi!=null&&fi.$==1&&(fi.$0[0][0].$==4&&((fj=fi.$0[0][1],fj!=null&&fj.$==1)&&(fi.$0[0][1].$0.$==5&&(fh=[fi.$0[0][1].$0.$0,fi.$0[1]],true)))))?{$:1,$0:fh[0]}:null;}function e5(fg){var fh,fi;return(fi=bp.R(fg),fi!=null&&fi.$==1&&(fi.$0.$==0&&(fh=fi.$0.$0,true)))?{$:1,$0:fh}:null;}function e6(fg){var fh,fi;return(fi=e5(fg),fi!=null&&fi.$==1&&(bT.StartsWith(fi.$0,"_")&&(fh=fi.$0,true)))?{$:1,$0:fh}:null;}function e7(fg){var fh,fi;fh=e1(fg);return fh!=null&&fh.$==1?{$:1,$0:{$:1,$0:fh.$0}}:(fi=e2(fg),fi!=null&&fi.$==1?{$:1,$0:{$:2,$0:fi.$0}}:null);}function e8(fg){var fh;fh=J.delimitedO("@{","}",fg);return fh!=null&&fh.$==1?{$:1,$0:[fh.$0[0],{$:1,$0:fh.$0[1]},fh.$0[2]]}:null;}function e9(fg){var fh,fi,fj,fk,fl,fm,fn,fo;return(fi=e8(fg),fi!=null&&fi.$==1&&(fj=e7(fi.$0[1]),fj!=null&&fj.$==1&&(fh=[fi.$0[2],fi.$0[0],fj.$0],true)))?(fk=fh[0],(fl=fh[1],(fm=fl===""?bU.ofArray([fh[2]]):bU.ofArray([{$:0,$0:fl},fh[2]]),fk===""?{$:1,$0:fm}:(fn=e9(fk),fn!=null&&fn.$==1?{$:1,$0:bU.append(fm,fn.$0)}:null)))):(fo=e8(fg),fo!=null&&fo.$==1)?null:{$:1,$0:bU.ofArray([{$:0,$0:fg}])};}function e_(fg){var fh,fi,fj;return(fi=e8(fg),fi!=null&&fi.$==1&&(fj=e3(fi.$0[1]),fj!=null&&fj.$==1&&(bT.Trim(fi.$0[0])===""&&bT.Trim(fi.$0[2])===""&&(fh=[fi.$0[2],fj.$0,fi.$0[0]],true))))?{$:1,$0:fh[1]}:null;}function e$(fg){var fh,fi;return fg.$==0&&(fi=e9(fg.$0),fi!=null&&fi.$==1&&(fh=fi.$0,true))?{$:1,$0:fh}:null;}function fa(fg){return fg.$==0?{$:1,$0:bN.ofSeq(bS.choose(function(fh){var fi,fj,fk,fl,fm,fn,fo,fp;fi=bT.SplitChars(bT.Trim(fh),["="],0);return!bP.Equals(fi,null)&&fi.length===2&&(fk=e_(bN.get(fi,1)),fk!=null&&fk.$==1&&(fj=[fk.$0,bN.get(fi,0)],true))?{$:1,$0:{$:2,$0:bT.Trim(fj[1]),$1:fj[0]}}:!bP.Equals(fi,null)&&fi.length===2&&(fm=e9(bN.get(fi,1)),fm!=null&&fm.$==1&&(fl=[bN.get(fi,0),fm.$0],true))?{$:1,$0:{$:1,$0:bT.Trim(fl[0]),$1:fl[1]}}:(fn=bT.SplitChars(bT.Trim(fh),[":"],0),!bP.Equals(fn,null)&&fn.length===2&&(fp=e9(bN.get(fn,1)),fp!=null&&fp.$==1&&(fo=[bN.get(fn,0),fp.$0],true))?{$:1,$0:{$:0,$0:bT.Trim(fo[0]),$1:fo[1]}}:(function(fq){return function(fr){return fq("Attributes should be like: \"name=val\" or \"name:val\" and separated by ';' : "+bM.toSafe(fr));};}(bL.FailWith))(fh));},bS.filter(function(fh){return bT.Trim(fh)!=="";},bT.SplitChars(bT.Trim(fg.$0),[";"],0))))}:null;}function fb(fg){var fh,fi,fj,fk,fl;fh=e$(fg);return fh!=null&&fh.$==1?{$:1,$0:{$:0,$0:fh.$0}}:(fi=e0(fg),fi!=null&&fi.$==1?{$:1,$0:{$:1,$0:fi.$0}}:(fj=e1(fg),fj!=null&&fj.$==1?{$:1,$0:{$:2,$0:fj.$0}}:(fk=e2(fg),fk!=null&&fk.$==1?{$:1,$0:{$:3,$0:fk.$0}}:(fl=e3(fg),fl!=null&&fl.$==1?{$:1,$0:{$:4,$0:fl.$0}}:null))));}function fc(fg){var fh,fi,fj;switch(fg.$==1?(fi=fb(fg.$0),fi!=null&&fi.$==1?(fj=fc(fg.$1),fj!=null&&fj.$==1?(fh=[fi.$0,fj.$0],1):2):2):0){case 0:return{$:1,$0:bY.Empty};case 1:return{$:1,$0:new bY({$:1,$0:fh[0],$1:fh[1]})};case 2:return null;}}function fd(fg){var fh,fi,fj,fk;fh=e$(fg);return fh!=null&&fh.$==1?{$:1,$0:{$:0,$0:fh.$0}}:(fi=e0(fg),fi!=null&&fi.$==1?{$:1,$0:{$:1,$0:fi.$0}}:(fj=e1(fg),fj!=null&&fj.$==1?{$:1,$0:{$:2,$0:fj.$0}}:(fk=e2(fg),fk!=null&&fk.$==1?{$:1,$0:{$:3,$0:fk.$0}}:null)));}function fe(fg){var fh,fi,fj;switch(fg.$==1?(fi=fd(fg.$0),fi!=null&&fi.$==1?(fj=fe(fg.$1),fj!=null&&fj.$==1?(fh=[fi.$0,fj.$0],1):2):2):0){case 0:return{$:1,$0:bY.Empty};case 1:return{$:1,$0:new bY({$:1,$0:fh[0],$1:fh[1]})};case 2:return null;}}function ff(fg){var fh,fi,fj;switch(fg.$==1?(fi=e4(fg.$0),fi!=null&&fi.$==1?(fj=ff(fg.$1),fj!=null&&fj.$==1?(fh=[fi.$0,fj.$0],1):2):2):0){case 0:return{$:1,$0:bY.Empty};case 1:return{$:1,$0:new bY({$:1,$0:fh[0],$1:fh[1]})};case 2:return null;}}d0=bn.splitTokens(dZ);return d0.$==1&&(d2=e5(d0.$0),d2!=null&&d2.$==1&&(d0.$1.$==1&&(bn.PlugIn(d0.$1.$0).$==0&&(d3=ff(d0.$1.$1),d3!=null&&d3.$==1&&(d1=[d3.$0,d2.$0],true)))))?bp.entryPlg(d1[1],{$:0,$0:new b3.New(d1[0])}):d0.$==1&&(d5=e6(d0.$0),d5!=null&&d5.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(d6=e5(d0.$1.$1.$0),d6!=null&&d6.$==1&&(d0.$1.$1.$1.$==0&&(d4=[d5.$0,d6.$0],true)))))))?bp.entryRef(d4[0],d4[1],bq.RDoc):d0.$==1&&(d8=e6(d0.$0),d8!=null&&d8.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==0&&(d0.$1.$1.$==1&&(d9=e5(d0.$1.$1.$0),d9!=null&&d9.$==1&&(d0.$1.$1.$1.$==0&&(d7=[d8.$0,d9.$0],true)))))))?bp.entryRef(d7[0],d7[1],bq.RVar):d0.$==1&&(d$=e6(d0.$0),d$!=null&&d$.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==2&&(d0.$1.$1.$==1&&(ea=e5(d0.$1.$1.$0),ea!=null&&ea.$==1&&(d0.$1.$1.$1.$==0&&(d_=[d$.$0,ea.$0],true)))))))?bp.entryRef(d_[0],d_[1],bq.RViw):d0.$==1&&(ec=e6(d0.$0),ec!=null&&ec.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==4&&(d0.$1.$1.$==1&&(ed=e5(d0.$1.$1.$0),ed!=null&&ed.$==1&&(d0.$1.$1.$1.$==0&&(eb=[ec.$0,ed.$0],true)))))))?bp.entryRef(eb[0],eb[1],bq.RAct):d0.$==1&&(ef=e5(d0.$0),ef!=null&&ef.$==1&&(d0.$1.$==1&&(bn.Vertical(d0.$1.$0).$==0&&(d0.$1.$1.$==1&&(eg=bn.Measures$1(d0.$1.$1.$0),eg!=null&&eg.$==1&&(d0.$1.$1.$1.$==1&&(eh=e0(d0.$1.$1.$1.$0),eh!=null&&eh.$==1&&(d0.$1.$1.$1.$1.$==1&&(ei=e0(d0.$1.$1.$1.$1.$0),ei!=null&&ei.$==1&&(d0.$1.$1.$1.$1.$1.$==0&&(ee=[eh.$0,eg.$0,ef.$0,ei.$0],true)))))))))))?bp.entryDoc(ee[2],{$:0,$0:{$:0,$0:true,$1:ee[1],$2:ee[0],$3:ee[3]}}):d0.$==1&&(ek=e5(d0.$0),ek!=null&&ek.$==1&&(d0.$1.$==1&&(bn.Vertical(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(el=bn.Measures$1(d0.$1.$1.$0),el!=null&&el.$==1&&(d0.$1.$1.$1.$==1&&(em=e0(d0.$1.$1.$1.$0),em!=null&&em.$==1&&(d0.$1.$1.$1.$1.$==1&&(en=e0(d0.$1.$1.$1.$1.$0),en!=null&&en.$==1&&(d0.$1.$1.$1.$1.$1.$==0&&(ej=[em.$0,el.$0,ek.$0,en.$0],true)))))))))))?bp.entryDoc(ej[2],{$:0,$0:{$:0,$0:false,$1:ej[1],$2:ej[0],$3:ej[3]}}):d0.$==1&&(ep=e5(d0.$0),ep!=null&&ep.$==1&&(d0.$1.$==1&&(bn.PlugIn(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(eq=e3(d0.$1.$1.$0),eq!=null&&eq.$==1&&(d0.$1.$1.$1.$==1&&(er=fa(d0.$1.$1.$1.$0),er!=null&&er.$==1&&(d0.$1.$1.$1.$1.$==1&&(es=e$(d0.$1.$1.$1.$1.$0),es!=null&&es.$==1&&(d0.$1.$1.$1.$1.$1.$==0&&(eo=[eq.$0,er.$0,ep.$0,es.$0],true)))))))))))?bp.entryDoc(eo[2],{$:1,$0:{$:0,$0:eo[0],$1:eo[1],$2:eo[3]}}):d0.$==1&&(eu=e5(d0.$0),eu!=null&&eu.$==1&&(d0.$1.$==1&&(bn.PlugIn(d0.$1.$0).$==2&&(d0.$1.$1.$==1&&(ev=e1(d0.$1.$1.$0),ev!=null&&ev.$==1&&(d0.$1.$1.$1.$==1&&(ew=fa(d0.$1.$1.$1.$0),ew!=null&&ew.$==1&&(d0.$1.$1.$1.$1.$==0&&(et=[ew.$0,eu.$0,ev.$0],true)))))))))?bp.entryDoc(et[1],{$:2,$0:{$:0,$0:et[2],$1:et[0]}}):d0.$==1&&(ey=e5(d0.$0),ey!=null&&ey.$==1&&(d0.$1.$==1&&(bn.PlugIn(d0.$1.$0).$==3&&(d0.$1.$1.$==1&&(ez=e1(d0.$1.$1.$0),ez!=null&&ez.$==1&&(d0.$1.$1.$1.$==1&&(eA=fa(d0.$1.$1.$1.$0),eA!=null&&eA.$==1&&(d0.$1.$1.$1.$1.$==0&&(ex=[eA.$0,ey.$0,ez.$0],true)))))))))?bp.entryDoc(ex[1],{$:3,$0:{$:0,$0:ex[2],$1:ex[0]}}):d0.$==1&&(eC=e5(d0.$0),eC!=null&&eC.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==0&&(d0.$1.$1.$==1&&(eD=(eF=e$(d0.$1.$1.$0),eF!=null&&eF.$==1&&(eF.$0.$==1&&(eF.$0.$0.$==0&&(eF.$0.$1.$==0&&(eE=eF.$0.$0.$0,true)))))?{$:1,$0:eE}:null,eD!=null&&eD.$==1&&(d0.$1.$1.$1.$==0&&(eB=[eC.$0,eD.$0],true)))))))?bp.entryVar(eB[0],{$:0,$0:bT.Trim(eB[1])}):d0.$==1&&(eH=e5(d0.$0),eH!=null&&eH.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(eI=e0(d0.$1.$1.$0),eI!=null&&eI.$==1&&(eJ=fc(d0.$1.$1.$1),eJ!=null&&eJ.$==1&&(eG=[eI.$0,eH.$0,eJ.$0],true)))))))?bp.entryDoc(eG[1],{$:4,$0:{$:0,$0:eG[0],$1:eG[2]}}):d0.$==1&&(eL=e5(d0.$0),eL!=null&&eL.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==2&&(eM=fc(d0.$1.$1),eM!=null&&eM.$==1&&(eK=[eL.$0,eM.$0],true)))))?bp.entryView(eK[0],{$:0,$0:eK[1]}):d0.$==1&&(eO=e5(d0.$0),eO!=null&&eO.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==3&&(eP=fe(d0.$1.$1),eP!=null&&eP.$==1&&(eN=[eO.$0,eP.$0],true)))))?bp.entryDoc(eN[0],{$:5,$0:{$:0,$0:eN[1]}}):d0.$==1&&(eR=e5(d0.$0),eR!=null&&eR.$==1&&(d0.$1.$==1&&(bn.Var(d0.$1.$0).$==4&&(d0.$1.$1.$==1&&(eS=e3(d0.$1.$1.$0),eS!=null&&eS.$==1&&(eT=fc(d0.$1.$1.$1),eT!=null&&eT.$==1&&(eQ=[eS.$0,eR.$0,eT.$0],true)))))))?bp.entryAct(eQ[1],{$:0,$0:eQ[0],$1:eQ[2]}):d0.$==1&&(eV=e5(d0.$0),eV!=null&&eV.$==1&&(d0.$1.$==1&&(eW=bn.Vertical(d0.$1.$0),eW.$==5&&(d0.$1.$1.$==1&&(eX=fa(d0.$1.$1.$0),eX!=null&&eX.$==1&&(eY=fe(d0.$1.$1.$1),eY!=null&&eY.$==1&&(eU=[eX.$0,eW.$0,eV.$0,eY.$0],true)))))))?bp.entryDoc(eU[2],{$:6,$0:{$:0,$0:eU[1],$1:eU[0],$2:eU[3]}}):null;};bp.createEntryO2=function(dX,dY){function dZ(d3,d4){dY.Add(d3,d4);return{$:1,$0:{$:0,$0:[d3,d4]}};}function d0(d3,d4){dY.Add(bS.head(bT.SplitChars(d4,[" ","\u0009"],1)),{$:0,$0:{$:6,$0:{$:0,$0:"div",$1:[],$2:bU.ofArray([{$:0,$0:bU.ofArray([{$:0,$0:d3}])}])}}});return{$:1,$0:{$:1,$0:d3}};}function d1(d3){try{return dY.get_Item(d3);}catch(d4){return(function(d5){return function(d6){return d5("Could not find reference to "+bM.toSafe(d6));};}(bL.FailWith))(d3);}}function d2(d3){var d4,d5,d6,d7,d8;if(d3.$==1){d6=d3.$1;d7=d3.$0;d8=d1(d7);if(d8.$==4)try{d4=d8.$0.$0.get_Item(d6);}catch(d9){d4=(((dR.Curried3(function(d_,d$,ea){return d_("Could not find reference to "+bM.toSafe(d$)+"."+bM.toSafe(ea));}))(bL.FailWith))(d7))(d6);}else d4=(function(d_){return function(d$){return d_("PlugIn not registered: "+cy.p(d$));};}(bL.FailWith))(d3);return[d4,null];}else{d5=d1(d3.$0);return[d5.$==1?bq.RAct:d5.$==2?bq.RVar:d5.$==3?bq.RViw:d5.$==5?bq.RPlg:d5.$==4?(function(d_){return function(d$){return d_("PlugIn should not be referenced by itself: "+cy.p(d$));};}(bL.FailWith))(d3):bq.RDoc,{$:1,$0:d5}];}}return function(d3){var d4;try{d4=bp.createEntryO(d2,dX,d3);return d4==null?d0((function(d5){return function(d6){return d5("Line not matched!: "+bM.toSafe(d6));};}(a.id))(d3),d3):dZ(d4.$0.$0,d4.$0.$1);}catch(d5){return d0(d5.message,d3);}};};bq.RDoc={$:0};bq.RVar={$:1};bq.RViw={$:2};bq.RAct={$:3};bq.RPlg={$:4};br.extractMeasuresO=function(dX){var dY,dZ,d0,d1,d2,d3,d4;dY=bT.SplitChars(dX,[" "],1);return!bP.Equals(dY,null)&&dY.length===1&&(d0=(K.Int())(bN.get(dY,0)),d0!=null&&d0.$==1&&(dZ=d0.$0,true))?{$:1,$0:new bo({$:0,$0:dU.abs(dZ),$1:dZ>=0})}:!bP.Equals(dY,null)&&dY.length===3&&(d2=(K.Int())(bN.get(dY,0)),d2!=null&&d2.$==1&&(d3=(K.Int())(bN.get(dY,1)),d3!=null&&d3.$==1&&(d4=(K.Int())(bN.get(dY,2)),d4!=null&&d4.$==1&&(d1=[d4.$0,d2.$0,d3.$0],true))))?{$:1,$0:new bo({$:1,$0:d1[1],$1:d1[2],$2:d1[0]})}:null;};br.horizontalSplit=function(dX){var dY,dZ,d0,d1,d2;function d3(d4,d5){var d6,d7,d8,d9;d6=R.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",d5);return d6!=null&&d6.$==1?{$:1,$0:[[d4,(d7=(d8=bS.tryItem(1,d6.$0),d8==null?null:br.extractMeasuresO(bT.Replace(bT.Replace(d8.$0,"^",""),"v","-"))),(d9=new bo({$:1,$0:5,$1:50,$2:95}),d7==null?d9:d7.$0))],d5.indexOf("-")]}:null;}dY=(dZ=bS.tryHead(bS.sortBy(function(d4){return d4[1];},bS.choose(function(d4){return d3(d4[0],d4[1]);},bS.indexed(dX)))),dZ==null?null:{$:1,$0:dZ.$0[0]});return dY==null?null:{$:1,$0:(d0=dY.$0,(d1=d0[0],(d2=d0[1],[bO.array(dX,null,{$:1,$0:d1-1}),bO.array(dX,{$:1,$0:d1+1},null),d2])))};};br.transpose=function(dX){var dY;dY=bS.max(bS.map(function(dZ){return dZ.length;},dX));return bN.ofSeq(bS.delay(function(){return bS.map(function(dZ){return bN.ofSeq(bS.delay(function(){return bS.map(function(d0){return d0.length>dZ?d0[dZ]:" ";},dX);})).join("");},bL.range(0,dY-1));}));};br.verticalSplit=function(dX){var dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7;function d8(d$,ea){var eb,ec,ed;return(ec=R.REGEX$1("^ *\\|+ *$","",ea),ec!=null&&ec.$==1&&(ed=ec.$0,!bP.Equals(ed,null)&&ed.length===1))?{$:1,$0:[d$,ea.indexOf("|")]}:null;}function d9(d$){return bP.Equals(null,d$);}function d_(d$){return bP.Equals(null,d$);}dY=br.transpose(dX);dZ=(d0=(d1=bS.tryHead(bS.sortBy(function(d$){return d$[1];},bS.choose(function(d$){return d8(d$[0],d$[1]);},bS.indexed(dY)))),d1==null?null:{$:1,$0:d1.$0[0]}),d0==null?null:{$:1,$0:(d2=d0.$0,[br.transpose(bO.array(dY,null,{$:1,$0:d2-1})),br.transpose(bO.array(dY,{$:1,$0:d2+1},null))])});return dZ==null?null:{$:1,$0:(d3=dZ.$0,(d4=d3[0],(d5=d3[1],[bN.filter(function(d$){return d9(br.extractMeasuresO(d$));},d4),bN.filter(function(d$){return d_(br.extractMeasuresO(d$));},d5),(d6=bS.tryHead(bS.delay(function(){return bS.append(bS.choose(br.extractMeasuresO,d4),bS.delay(function(){return bS.map(function(d$){return d$.$==0?d$.$1?new bo({$:0,$0:d$.$0,$1:false}):d$:d$;},bS.choose(br.extractMeasuresO,d5));}));})),(d7=new bo({$:1,$0:5,$1:50,$2:95}),d6==null?d7:d6.$0))])))};};br.cleanSpaces=function(dX){return bN.filter(function(dY){var dZ;return!(dZ=(K.Int())(dY),dZ!=null&&dZ.$==1);},bT.SplitStrings(bT.concat(" ",dX),[" "],1));};br.extractNodes=function(dX){var dY,dZ;function d0(d1,d2,d3,d4){var d5,d6,d7,d8,d9,d_;d5=br.extractNodes(d3);d6=br.extractNodes(d4);return(d5.$==0?(d8=d5.$0,!bP.Equals(d8,null)&&d8.length===0)?(d7=d6,true):d6.$==0?(d9=d6.$0,!bP.Equals(d9,null)&&d9.length===0)?(d7=d5,true):(d7=[d5,d6],false):(d7=[d5,d6],false):d6.$==0?(d_=d6.$0,!bP.Equals(d_,null)&&d_.length===0)?(d7=d5,true):(d7=[d5,d6],false):(d7=[d5,d6],false))?d7:{$:1,$0:{$:0,$0:d1,$1:d2,$2:d7[0],$3:d7[1]}};}dY=br.horizontalSplit(dX);return dY!=null&&dY.$==1?d0(false,dY.$0[2],dY.$0[0],dY.$0[1]):(dZ=br.verticalSplit(dX),dZ!=null&&dZ.$==1?d0(true,dZ.$0[2],dZ.$0[0],dZ.$0[1]):{$:0,$0:br.cleanSpaces(dX)});};br.createLayoutDefinitions=function(dX,dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8;return dY.$==1?(dZ=dY.$0.$0,(d0=dY.$0.$1,(d1=br.createLayoutDefinitions(dX+"_1",dY.$0.$2),(d2=d1[0],(d3=d1[1],(d4=br.createLayoutDefinitions(dX+"_2",dY.$0.$3),(d5=d4[0],(d6=d4[1],[dX,bN.ofSeq(bS.delay(function(){return bS.append([bT.concat(" ",bU.ofArray([dX,dZ?"vertical":"horizontal",a.String(d0),d2,d5]))],bS.delay(function(){return bS.append(d3,bS.delay(function(){return d6;}));}));}))])))))))):(d7=dY.$0,!bP.Equals(d7,null)&&d7.length===0)?["___",[]]:(d8=dY.$0,!bP.Equals(d8,null)&&d8.length===1)?[bN.get(dY.$0,0),[]]:[dX,[dX+" div \"\" "+bT.concat(" ",dY.$0)]];};bt.htmlD=function(){bX.$cctor();return bX.htmlD;};bt.startWithHtmlD=function(){bX.$cctor();return bX.startWithHtmlD;};bu.disabled=function(dX){return cA.DynamicPred("disabled",dX,b9.Const(""));};bu.inputLabel=function(dX,dY,dZ,d0){return b$.Element("div",dX,[b$.Element("div",[cC.Create("class","input-group")],[b$.Element("span",[cC.Create("class","input-group-addon")],[b$.TextNode(dZ)]),b$.Input([cC.Create("class","form-control"),bu.disabled(dY)],d0)])]);};bu.areaLabel=function(dX,dY,dZ,d0){return b$.Element("div",dX,[b$.Element("div",[cC.Create("class","input-group")],[b$.Element("span",[cC.Create("class","input-group-addon")],[b$.TextNode(dZ)]),b$.InputArea([cC.Create("class","form-control"),bu.disabled(dY)],cb.Lens(d0,a.id,function(d1,d2){return d2;}))])]);};bu.elemsUI=function(dX,dY){return b$.Element("div",[],[dX,b$.Button("New",[],dY)]);};bu.lensFloat2Str=function(dX){var dY;function dZ(d0){if(d0!=null&&d0.$==1)if(d0.$0!==dX.Get())dX.Set(d0.$0);}return new c5.New(b9.Map(function(d0){return(function(d1){return function(d2){return d1(bM.prettyPrint(d2));};}(a.id))(d0);},dX.get_View()),(dY=K.parseDoubleO(),function(d0){return dZ(dY(d0));}));};bu.textLine=function(dX){return b$.Element("div",[],[b$.TextView(dX)]);};bu.lensStrO=function(dX){return new c5.New(b9.Map(function(dY){return dY!=null&&dY.$==1?dY.$0:"";},dX.get_View()),function(dY){if(dY==="")dX.Set(null);else dX.Set({$:1,$0:dY});});};bu.mapVarO=function(dX,dY,dZ){return new c5.New(b9.Map(function(d0){return d0==null?null:{$:1,$0:dX(d0.$0)};},dZ.get_View()),function(d0){var d1;function d2(d4){return{$:1,$0:d4};}function d3(d4){dZ.Set(d4);}if(d0!=null&&d0.$==1){d1=dY(d0.$0);(n.iter(function(d4){return d3(d2(d4));}))(d1);}else dZ.Set(null);});};bu.selectorLens=function(dX,dY){function dZ(d0){return bu.mapVarO(dX,dY,d0);}return function(d0){return bu.lensStrO(dZ(d0));};};bu.selectorLensInt=function(dX){return(bu.selectorLens(a.String,K.parseIntO()))(dX);};bu.selectorLensGuid=function(dX){return(bu.selectorLens(a.String,K.parseGuidO()))(dX);};bu.selectorLensGuidId=function(dX){var dY,dZ;function d0(d1){return new h({$:0,$0:d1});}return(bu.selectorLens(function(d1){var d2;d2=d1.get_Id();return a.String(d2);},(dY=K.parseGuidO(),(dZ=function(d1){return d1==null?null:{$:1,$0:d0(d1.$0)};},function(d1){return dZ(dY(d1));}))))(dX);};bu.unselectorV=function(){bX.$cctor();return bX.unselectorV;};bu.simpleButton=function(dX,dY){function dZ(d0){}return b$.Button(dX,[],function(d0){return dZ(dY(d0));});};bu.newButton=function(dX){return bu.simpleButton("New",dX);};bu.orderedList=function(dX){return b$.Element("ol",[],[dX]);};bv.concatMainDocs=function(dX){return b$.Concat(bS.choose(function(dY){return dY.docDoc.$==0?{$:1,$0:dY.docDoc.$0.f()}:null;},bS.choose(function(dY){return bS.tryHead(dY.plgDocs);},dX)));};bw=bv.ListModelData=dR.Class({PlugIn:function(dX){var dY,dZ,d0;function d1(d2){}dY=this;dZ=ba.plugin();return dZ.AddAct(dZ.AddAct(dZ.AddVar(dZ.AddDoc(dZ.Yield(),"list",cB.Create(function(){return dY.doc;})),"sel",dX(this.selV)),"add",(d0=this.add,function(d2){return d1(d0(d2));})),"del",this.delCur);},get_CurrentW:function(){var dX,dY,dZ,d0,d1,d2;return b9.Map((dX=function(d3){return d3==null?null:a.id(d3.$0);},(dY=(dZ=this.def,function(d3){return d3==null?dZ:d3.$0;}),function(d3){return dY(dX(d3));})),b9.Bind((d0=(d1=(d2=this.elems,function(d3){return d2.TryFindByKeyAsView(d3);}),function(d3){return d3==null?null:{$:1,$0:d1(d3.$0)};}),function(d3){return cF.insertWO(d0(d3));}),this.selV.get_View()));},get_CurrentV:function(){var dX;dX=this;return new c5.New(this.get_CurrentW(),function(dY){var dZ;dZ=dX.selV.Get();dZ!=null&&dZ.$==1?dX.elems.ContainsKey(dZ.$0)?dX.elems.Append(dY):void 0:void 0;});}},null,bw);bw.New=function(dX,dY,dZ,d0,d1,d2){return new bw({elems:dX,doc:dY,selV:dZ,add:d0,delCur:d1,def:d2});};bx.addLayout0=function(dX){var dY;bn.addLayout(dX);dY=f.Untag$3(dX.lytName);ba.mainDocV().Set(dY);};by.MapLens=function(dX,dY,dZ){function d0(d2,d3){return dY(d2,dZ.Lens(d2));}function d1(d2,d3){return bN.filter(d3,d2);}return dX!=null&&dX.$==1?b9.MapSeqCachedViewBy(dZ.key,d0,(((dR.Curried3(b9.Map2))(d1))(dZ["var"].get_View()))(dX.$0)):b9.MapSeqCachedViewBy(dZ.key,d0,dZ["var"].get_View());};bz.getDocFor=function(dX,dY,dZ,d0,d1){var d2,d3,d4,d5,d6,d7;function d8(d$){var ea;return d$!=null&&d$.$==1&&(dX.ContainsKey(d$.$0)&&(ea=d$.$0,true))?{$:1,$0:ea}:null;}function d9(d$){if(!bP.Equals(d3.Get(),d$))d3.Set(d$);}function d_(d$,ea){d4.Set(null);return dX.RemoveByKey(d$);}d2=dX.key;d3=cb.Create$1(null);d4=new c5.New((d5=b9.get_Do(),b9.Bind(function(d$){var ea;return d$!=null&&d$.$==1?(ea=d$.$0,b9.Bind(function(eb){return!eb?b9.Const(null):b9.Const({$:1,$0:ea});},dX.ContainsKeyAsView(ea))):b9.Const(null);},d3.get_View())),function(d$){return d9(d8(d$));});d6=bw.New(dX,b$.get_Empty(),d4,function(){var d$;d$=dZ();dX.Append(d$);d4.Set({$:1,$0:d2(d$)});return d$;},function(){var d$;d$=d4.Get();(n.iter(function(ea){d_(ea,null);}))(d$);},dY);d7=d1(d6);return bw.New(d6.elems,b$.Convert(a.id,by.MapLens(d0,function(d$,ea){return(d7(b9.Const({$:1,$0:d$})))(ea);},dX)),d6.selV,d6.add,d6.delCur,d6.def);};bz.getDoc=function(dX,dY,dZ,d0,d1){return bz.getDocFor(cp.Create(dX,bY.Empty),dY,dZ,d0,d1);};bz.addElements=function(dX,dY){dX.elems.AppendMany(dY);};bA.addNewO=function(dX,dY,dZ){var d0;d0=dY;return function(){var d1;d1=[d0,dX()];d0=dZ(d0);return d1;};};bA.elemUI2=function(dX,dY,dZ,d0){function d1(d2,d3){return[d2,d3];}return dX(dY,dZ,cb.Lens(d0,function(d2){return d2[1];},function(d2,d3){return(function(d4){var d5;d5=d4[0];return function(d6){return d1(d5,d6);};}(d2))(d3);}));};bA.getDocInt=function(dX,dY,dZ){function d0(d1,d2,d3){return bA.elemUI2(dZ,d1,d2,d3);}return bz.getDoc(function(d1){return d1[0];},[-1,dX],bA.addNewO(dY,0,function(d1){return 1+d1;}),null,dR.Curried3(d0));};bA.getDocGuid=function(dX,dY,dZ){function d0(d1,d2,d3){return bA.elemUI2(dZ,d1,d2,d3);}return bz.getDoc(function(d1){return d1[0];},["00000000-0000-0000-0000-000000000000",dX],bA.addNewO(dY,bK.NewGuid(),function(){return bK.NewGuid();}),null,dR.Curried3(d0));};bA.getDocGuidId=function(dX,dY,dZ){var d0;function d1(d2,d3,d4){return bA.elemUI2(dZ,d2,d3,d4);}d0=bA.addNewO(dY,new h({$:0,$0:bK.NewGuid()}),function(){return new h({$:0,$0:bK.NewGuid()});});return bz.getDoc(function(d2){return d2[0];},[new h({$:0,$0:"00000000-0000-0000-0000-000000000000"}),dX],d0,null,dR.Curried3(d1));};bA.addElements=function(dX,dY){bS.iter(function(dZ){dX.elems.Append([(dX.add())[0],dZ]);},dY);};bB.html=function(){bX.$cctor();return bX.html$1;};bC.concat=function(dX,dY){return(((dR.Curried3(function(dZ,d0,d1){return dZ("Concat("+a.String(d0)+", "+d1.toFixed(6)+")");}))(a.id))(dX))(dY);};bC.aV=function(){bX.$cctor();return bX.aV;};bC.pa=function(){bX.$cctor();return bX.pa;};bC.pb=function(){bX.$cctor();return bX.pb;};bC.currentPlugInNameDef=function(){bX.$cctor();return bX.currentPlugInNameDef$1;};bC.currentPlugInNameD=function(){bX.$cctor();return bX.currentPlugInNameD$1;};bC.name=function(){bX.$cctor();return bX.name;};bC.checkName=function(dX){return dX===bO.string("World",{$:1,$0:0},{$:1,$0:dX.length-1})||dX.length<=1?"<---- Please enter your name":"";};bC.enterName=function(){bX.$cctor();return bX.enterName;};bC.now=function(){bX.$cctor();return bX.now;};bC.sayHello=function(){bX.$cctor();return bX.sayHello;};bC.aString=function(){bX.$cctor();return bX.aString;};bC.main0=function(){bX.$cctor();return bX.main0;};bC.main1=function(){bX.$cctor();return bX.main1;};bC.main=function(){bX.$cctor();return bX.main;};bC.main2=function(){bX.$cctor();return bX.main2;};bC.appFwk=function(){bX.$cctor();return bX.appFwk;};bC.split=function(){bX.$cctor();return bX.split;};bC.split2=function(){bX.$cctor();return bX.split2;};bC.callDocPFn=function(dX,dY){var dZ;dZ=bD.run(dX,dY);return ba.makeAViewDoc(function(){var d0;d0=dZ.f.$==0?dZ.p.$==1?{$:0,$0:b9.Apply(dZ.f.$0,b9.Const(dZ.p.$0))}:{$:0,$0:b9.Apply(dZ.f.$0,dZ.p.$0)}:dZ.p.$==0?{$:0,$0:b9.Apply(b9.Const(dZ.f.$0),dZ.p.$0)}:{$:1,$0:dZ.f.$0(dZ.p.$0)};return d0.$==0?b$.BindView(a.id,d0.$0):d0.$0;});};bC.pName=function(){bX.$cctor();return bX.pName;};bC.itemRefToTextType=function(dX){return dX.$==1?{$:1,$0:(((dR.Curried3(function(dY,dZ,d0){return dY(bM.toSafe(dZ)+"."+bM.toSafe(d0));}))(a.id))(dX.$0))(dX.$1)}:{$:1,$0:dX.$0};};bC.itemRefToString=function(dX){return dX.$==1?(((dR.Curried3(function(dY,dZ,d0){return dY(bM.toSafe(dZ)+"."+bM.toSafe(d0));}))(a.id))(dX.$0))(dX.$1):dX.$0;};bC.textValToTextType=function(dX){var dY;return(dX.$==1?(dY=dX.$0.$0,false):dX.$==2?(dY=dX.$0.$0,false):true)?{$:0,$0:dX.$0}:bC.itemRefToTextType(dY);};bC.ActRVs=function(dX){return bU.ofArray([{$:1,$0:{$:0,$0:dX.$0}}]);};bC.attrValToAttrD=function(){bX.$cctor();return bX.attrValToAttrD;};bC.nodeRefToDocD=function(){bX.$cctor();return bX.nodeRefToDocD;};bC.varRefToVarD=function(){bX.$cctor();return bX.varRefToVarD;};bC.getParamD=function(){bX.$cctor();return bX.getParamD;};bC.itemRefToAbsolute=function(dX){function dY(d0){return d0.$==1?[d0.$0,d0.$1]:[dX,d0.$0];}function dZ(d0,d1){return(((dR.Curried3(function(d2,d3,d4){return d2(bM.toSafe(d3)+"."+bM.toSafe(d4));}))(a.id))(d0))(d1);}return function(d0){return dZ.apply(null,dY(d0));};};bC.getParam2D=function(){bX.$cctor();return bX.getParam2D;};bC.getParamTextD=function(){bX.$cctor();return bX.getParamTextD;};bC.defVar=function(dX,dY,dZ){return cb.Create$1(dZ);};bC.defAction=function(dX,dY,dZ,d0){var d1,d2;d1=dZ.$0;return ba.run(dX,(d2=y.depend(),d2.Delay(function(){return d2.Bind(bC.currentPlugInNameD(),function(d3){return d2.Bind(bC.getParamTextD(),function(d4){var d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh;d9=bC.itemRefToString(d1);d_=(d6=(ba.splitName(d3))(d9),ba.tryGetAct(d6[0],d6[1]));if(d_==null)d5=null;else{d$=d_.$0;if(d0.$===0)d7=d$.actFunction;else{ea=d$.actFunction;switch(ea.$==1?d0.$==1?d0.$1.$==0?(d8=[ea.$0,d0.$0],0):3:3:ea.$==2?d0.$==1?d0.$1.$==0?(d8=[ea.$0,ea.$2,d0.$0],2):d0.$1.$1.$==0?(d8=[ea.$0,d0.$0,d0.$1.$0],1):3:3:3){case 0:d7=(eb=d8[0],(ec=d8[1],{$:0,$0:function(){(d4(ec))(eb);}}));break;case 1:d7=(ed=d8[0],(ee=d8[1],(ef=d8[2],{$:0,$0:function(){(d4(ee))(function(ei){(d4(ef))(ed(ei));});}})));break;case 2:d7=(eg=d8[0],(eh=d8[2],{$:1,$0:function(ei){(d4(eh))(function(ej){(eg(ej))(ei);});},$1:d8[1]}));break;case 3:d7={$:0,$0:function(){((((dR.Curried(function(ei,ej,ek,el){return ei("Parameters do not coincide for Action "+bM.toSafe(ej)+" "+bM.printList(function(em){return cy.p$11(em);},ek)+" "+cx.p(el));},4))(function(ei){dP.log(ei);}))(d9))(d0))(d$);}};break;}}d5={$:1,$0:d7};}return d2.Return(d5==null?{$:0,$0:function(){((function(ei){return function(ej){return ei("Action Not Found "+bM.toSafe(ej));};}(function(ei){dP.log(ei);}))(d9));}}:d5.$0);});});})));};bC.defViewJS=function(dX,dY,dZ){var d0;return ba.run(dX,(d0=y.depend(),d0.Delay(function(){return d0.Bind(bC.currentPlugInNameD(),function(){return d0.Bind(bC.getParamD(),function(d1){return d0.Return(b9.Bind(function(){try{return b9.Map(function(d2){try{return!bP.Equals(d2,null)&&d2.length===0?"No JS function specified":!bP.Equals(d2,null)&&d2.length===1?a.String(a["eval"](bN.get(d2,0))):a.String(a["eval"](bN.get(d2,0)).apply(null,bO.array(d2,{$:1,$0:1},null)));}catch(d3){return d3.message;}},b9.Map(bN.ofSeq,cF.traverseSeq(d1,dZ)));}catch(d2){return b9.Const(d2.message);}},ba.baseView()));});});})));};bC.defInput=function(dX,dY,dZ,d0){return cB.Create(function(){return ba.errDocf(function(d1){return d1("input deprecated use AF.Input");});});};bC.defTextArea=function(dX,dY,dZ,d0){return cB.Create(function(){return ba.errDocf(function(d1){return d1("TextArea deprecated use AF.TextArea");});});};bC.defElement=function(dX,dY,dZ,d0,d1){var d2;return ba.run(dX,(d2=y.depend(),d2.Delay(function(){return d2.Bind(bC.attrValToAttrD(),function(d3){return d2.Bind(bC.nodeRefToDocD(),function(d4){return d2.Return(ba.makeAViewDocL(function(){return b$.Element(dZ,bS.map(d3,d0),bS.map(d4,d1));}));});});})));};bC.defConcat=function(dX,dY,dZ){var d0;return ba.run(dX,(d0=y.depend(),d0.Delay(function(){return d0.Bind(bC.attrValToAttrD(),function(){return d0.Bind(bC.nodeRefToDocD(),function(d1){return d0.Return(ba.makeAViewDocL(function(){return b$.Concat(bS.map(d1,dZ));}));});});})));};bC.defDocF=function(dX,dY,dZ,d0){var d1,d2;d1=dZ.$0;return ba.run(dX,(d2=y.depend(),d2.Delay(function(){return d2.Bind(bC.currentPlugInNameD(),function(d3){return d2.Bind(bC.getParam2D(),function(d4){var d5,d6,d7,d8;function d9(d_,d$){var ea,eb;return d$.$==1?d_.$==1?(ea=d$.$0,(eb=d_.$0,{$:0,$0:cB.Create(function(){return eb(d4(ea));})})):d_.$==2?d9({$:1,$0:d_.$0(d4(d$.$0)),$1:d_.$2},d$.$1):d_.$==3?d9({$:2,$0:d_.$0(d4(d$.$0)),$1:d_.$2,$2:d_.$3},d$.$1):d_.$==4?d9({$:3,$0:d_.$0(d4(d$.$0)),$1:d_.$2,$2:d_.$3,$3:d_.$4},d$.$1):d_.$==5?d9({$:4,$0:d_.$0(d4(d$.$0)),$1:d_.$2,$2:d_.$3,$3:d_.$4,$4:d_.$5},d$.$1):{$:0,$0:d_.$0}:d_;}return d2.Return((d5=(d6=(d7=(d8=bC.itemRefToString(d1),((bn.splitName())(d3))(d8)),ba.tryGetDoc(d7[0],d7[1])),d6==null?null:{$:1,$0:d9(d6.$0.docDoc,d0)}),d5==null?{$:0,$0:cB.Create(function(){return ba.errDoc((function(d_){return function(d$){return d_("Missing doc: "+cy.p(d$));};}(a.id))(d1));})}:d5.$0));});});})));};bC.defButton=function(dX,dY,dZ,d0,d1){return cB.Create(function(){return ba.errDocf(function(d2){return d2("Button deprecated use button \"click=@{Action}\"");});});};bC.defSplitter=function(dX,dY,dZ,d0,d1,d2){var d3,d4,d5;d3=d1.$0;d4=d2.$0;return ba.run(dX,(d5=y.depend(),d5.Delay(function(){return d5.Bind(bl.getDocFromTextTypesD(),function(d6){return d5.Return(cB.Create(function(){function d7(d8){return ba.makeAViewDoc(function(){return d6(bU.ofArray([bC.itemRefToTextType(d8)]));});}return d0.$==1?bn.variableSplitter(dZ,d0.$0,d0.$1,d0.$2,d7(d3),d7(d4)):bn.fixedSplitter(dZ,d0.$0,d0.$1,d7(d3),d7(d4));}));});})));};bC.initVal=function(){bX.$cctor();return bX.initVal;};bC.defVarM0=function(){bX.$cctor();return bX.defVarM0;};bC.defVarM=function(dX,dY,dZ){var d0;d0=(bC.defVarM0())([dX,dY,bC.initVal()]);d0.Get()===bC.initVal()?d0.Set(dZ):void 0;return d0;};bC.defDocFM=function(){bX.$cctor();return bX.defDocFM;};bC.defActionM=function(){bX.$cctor();return bX.defActionM;};bC.defButtonM=function(){bX.$cctor();return bX.defButtonM;};bC.defInputM=function(){bX.$cctor();return bX.defInputM;};bC.defTextAreaM=function(){bX.$cctor();return bX.defTextAreaM;};bC.defElementM=function(){bX.$cctor();return bX.defElementM;};bC.defConcatM=function(){bX.$cctor();return bX.defConcatM;};bC.defViewJSM=function(){bX.$cctor();return bX.defViewJSM;};bC.defSplitterM=function(){bX.$cctor();return bX.defSplitterM;};bC.generateEntries=function(dX){function dY(dZ,d0){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_;return d0.$==2?{$:1,$0:{$:0,$0:(d1=bC.defVarM(dX,dZ,d0.$0.$0),ba.newVar(f.Tag$3(dZ),d1))}}:d0.$==0?d0.$0.$==1?{$:1,$0:{$:2,$0:(d2=(bC.defButtonM())([dX,dZ,d0.$0.$0.$0,d0.$0.$0.$1,d0.$0.$0.$2]),ba.newDoc(f.Tag$3(dZ),d2))}}:d0.$0.$==2?{$:1,$0:{$:2,$0:(d3=(bC.defInputM())([dX,dZ,d0.$0.$0.$0,d0.$0.$0.$1]),ba.newDoc(f.Tag$3(dZ),d3))}}:d0.$0.$==3?{$:1,$0:{$:2,$0:(d4=(bC.defTextAreaM())([dX,dZ,d0.$0.$0.$0,d0.$0.$0.$1]),ba.newDoc(f.Tag$3(dZ),d4))}}:d0.$0.$==5?{$:1,$0:{$:2,$0:(d5=(bC.defConcatM())([dX,dZ,d0.$0.$0.$0]),ba.newDoc(f.Tag$3(dZ),d5))}}:d0.$0.$==6?{$:1,$0:{$:2,$0:(d6=(bC.defElementM())([dX,dZ,d0.$0.$0.$0,d0.$0.$0.$1,d0.$0.$0.$2]),ba.newDoc(f.Tag$3(dZ),d6))}}:d0.$0.$==4?{$:1,$0:{$:2,$0:(d7=(bC.defDocFM())([dX,dZ,d0.$0.$0.$0,d0.$0.$0.$1]),ba.newDocF(f.Tag$3(dZ),d7))}}:{$:1,$0:{$:2,$0:(d8=(bC.defSplitterM())([dX,dZ,d0.$0.$0.$0,d0.$0.$0.$1,d0.$0.$0.$2,d0.$0.$0.$3]),ba.newDoc(f.Tag$3(dZ),d8))}}:d0.$==1?{$:1,$0:{$:3,$0:(d9=(bC.defActionM())([dX,dZ,d0.$0.$0,d0.$0.$1]),ba.newActF(f.Tag$3(dZ),d9))}}:d0.$==3?{$:1,$0:{$:1,$0:(d_=(bC.defViewJSM())([dX,dZ,d0.$0.$0]),ba.newViw(f.Tag$3(dZ),d_))}}:null;}return function(dZ){return bS.choose(function(d0){return dY(d0[0],d0[1]);},dZ);};};bC.parseNewLayout=function(dX){var dY,dZ,d0;function d1(d3){return bn.parseEntries(dX,d3);}function d2(d3){return d3.$==1?(c.print(d3.$0),null):{$:1,$0:d3.$0};}dY=(dZ=function(d3){return bS.choose(d2,d3);},function(d3){return dZ(d1(d3));});d0=bC.generateEntries(dX);return function(d3){return d0(dY(d3));};};bC.addLayout=function(dX){var dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7;function d8(ea){return ea.$==1?{$:1,$0:ea.$0}:null;}function d9(ea){return bT.concat("\n",ea);}function d_(ea){return ea.$==0?{$:1,$0:ea.$0}:null;}function d$(ea){return bS.append(d5,ea);}dY=b9.Map((dZ=dX.lytName,function(ea){return bn.parseEntries(dZ,ea);}),dX.lytDefinition.get_View());d0=b9.Map((d1=function(ea){return bS.choose(d8,ea);},function(ea){return d9(d1(ea));}),dY);d2=b9.Map((d3=function(ea){return bS.choose(d_,ea);},(d4=bC.generateEntries(dX.lytName),function(ea){return d4(d3(ea));})),dY);d5=bU.ofArray([{$:0,$0:ba.newVar(f.Tag$3("Layout"),dX.lytDefinition)},{$:1,$0:ba.newViw(f.Tag$3("ParseMsgs"),d0)}]);b9.Sink((d6=(d7=dX.lytName,function(ea){bn.refreshEntries(d7,ea);}),function(ea){return d6(d$(ea));}),d2);};bD.run=function(dX,dY){return ba.run(dX,dY.r);};bE.set_drag=function(dX){bX.$cctor();bX.drag=dX;};bE.drag=function(){bX.$cctor();return bX.drag;};bE.setDragNone=function(){bE.set_drag(bF.DragNone);};bE.setDragNode=function(dX){bE.set_drag({$:1,$0:dX});};bE.getDragNIdO=function(dX){var dY;return bE.drag().$==1&&(!bP.Equals(bE.drag().$0,dX)&&(dY=bE.drag().$0,true))?{$:1,$0:dY}:null;};bF.DragNone={$:0};bG.TemplateFileName=function(){bX.$cctor();return bX.TemplateFileName$1;};bG.snippetsLM=function(){bX.$cctor();return bX.snippetsLM;};bG.collapsedV=function(){bX.$cctor();return bX.collapsedV;};bG.codeSnippetIdV=function(){bX.$cctor();return bX.codeSnippetIdV;};bG.searchFor=function(){bX.$cctor();return bX.searchFor;};bG.allPredecessors=function(){bX.$cctor();return bX.allPredecessors;};bG.indPredIds=function(){bX.$cctor();return bX.indPredIds;};bG.allCodePredsW=function(){bX.$cctor();return bX.allCodePredsW;};bG.allCodePredIdsW=function(){bX.$cctor();return bX.allCodePredIdsW;};bG.shdDef=function(){bX.$cctor();return bX.shdDef;};bG.processHier=function(dX,dY){var dZ,d0,d1,d2,d3;d1=new bR.New$5();dZ=[];d0=0;d2=bS.indexed(dX);d3=cN.Get(d2);try{while(d3.MoveNext())(function(){var d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed;function ee(ef,eg){return bP.Equals(eg,d9);}d4=d3.Current();d5=d4[1][0];d6=d4[1][1];d7=d4[0];d8=d6!=null&&d6.$==1?(d9=d6.$0,(d_=bS.tryFind(function(ef){return ee(ef[0],ef[1]);},bS.indexed(dZ)),d_!=null&&d_.$==1?(d$=d_.$0[0],[d$+1,bO.array(dZ,{$:1,$0:0},{$:1,$0:d$}),null]):[0,[],{$:1,$0:(function(ef){return function(eg){return ef("Parent not found in path "+bM.prettyPrint(eg));};}(a.id))(d9)}])):[0,[],null];ea=d8[1];eb=d8[0];d1.Add(d5,bH.New(eb,d7,(ec=(ed=bS.tryItem(d7+1,dX),ed==null?null:{$:1,$0:bP.Equals({$:1,$0:d5},ed.$0[1])}),ec==null?false:ec.$0),d0>=eb,ea,d8[2]));dZ=ea.concat([d5]);return d0>=eb?void(d0=dY.Contains(d5)?eb:eb+1):null;}());}finally{if(typeof d3=="object"&&"Dispose"in d3)d3.Dispose();}return d1;};bG.snpIdParentsW=function(){bX.$cctor();return bX.snpIdParentsW;};bG.processHierW=function(){bX.$cctor();return bX.processHierW;};bG.docWrap=function(dX,dY){return(dX([]))([dY]);};bG.moveNode=function(dX,dY){b9.Get(function(dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;d0=(d1=null,dZ.TryGetValue(dX,{get:function(){return d1;},set:function(eb){d1=eb;}})?{$:1,$0:d1}:null);d2=(d3=null,dZ.TryGetValue(dY,{get:function(){return d3;},set:function(eb){d3=eb;}})?{$:1,$0:d3}:null);d4=bG.snippetsLM().TryFindByKey(dX);d5=bG.snippetsLM().TryFindByKey(dY);d0!=null&&d0.$==1?d2!=null&&d2.$==1?d4!=null&&d4.$==1?d5!=null&&d5.$==1?(d6=d0.$0,d7=d4.$0,d8=d2.$0,bS.contains(dX,d8.path)?void 0:(d9=bN.ofSeq((bG.snippetsLM())["var"].Get()),d_=function(eb){var ec,ed,ee;while(true){ed=bN.tryItem(eb+1,d9);if(ed!=null&&ed.$==1){ee=(ec=null,dZ.TryGetValue(ed.$0.snpId,{get:function(){return ec;},set:function(ef){ec=ef;}})?{$:1,$0:ec}:null);if(ee!=null&&ee.$==1){if(bS.contains(dX,ee.$0.path))eb=eb+1;else return eb;}else return eb;}else return eb;}}(d6.pos),d$=N.New(d7.snpId,d7.snpName,d7.snpContent,d5.$0.snpParentIdO,d7.snpPredIds,d7.snpProperties,d7.snpModified),ea=bN.concat(d6.pos<d8.pos?[bO.array(d9,{$:1,$0:0},{$:1,$0:d6.pos-1}),bO.array(d9,{$:1,$0:d_+1},{$:1,$0:d8.pos-1}),[d$],bO.array(d9,{$:1,$0:d6.pos+1},{$:1,$0:d_}),bO.array(d9,{$:1,$0:d8.pos},null)]:[bO.array(d9,{$:1,$0:0},{$:1,$0:d8.pos-1}),[d$],bO.array(d9,{$:1,$0:d6.pos+1},{$:1,$0:d_}),bO.array(d9,{$:1,$0:d8.pos},{$:1,$0:d6.pos-1}),bO.array(d9,{$:1,$0:d_+1},null)]),bG.snippetsLM().Set(ea))):void 0:void 0:void 0:void 0;},bG.processHierW());};bG.calcUI=function(dX,dY,dZ){var d0,d1,d2;d0=b9.Map(function(d3){return(bG.indPredIds())(d3);},(d1=b9.Apply(b9.Map2(function(d3,d4){return function(d5){return[d3.snpId,d4.snpParentIdO,d5.snpPredIds];};},dZ.get_CurrentV().get_View(),dZ.get_CurrentV().get_View()),dZ.get_CurrentV().get_View()),(d2=[cb.Create$1(null)],(b9.Sink(function(d3){if(!bP.Equals(d2[0].Get(),d3))d2[0].Set(d3);},d1),d2[0].get_View()))));return function(d3){return function(d4){var d5,d6,d7,d8,d9,d_,d$,ea,eb;b9.Map(function(ec){return ec==null;},d3);d5=b9.Map2(function(ec,ed){var ee,ef,eg;ee=(ef=ed.snpId,function(eh){var ei;ei=null;return eh.TryGetValue(ef,{get:function(){return ei;},set:function(ej){ei=ej;}})?{$:1,$0:ei}:null;}(ec));eg=bG.shdDef();return ee==null?eg:ee.$0;},bG.processHierW(),d4.get_View());return bG.docWrap(dX,(d6=(d7=(d8=(d9=(d_=(d$=cu.Make().WithHole({$:2,$0:"name",$1:b9.Map2(function(ec,ed){return(ec.errorO==null?a.id:function(ee){return function(ef){return ee("!"+bM.toSafe(ef));};}(a.id))(ed.snpName);},d5,d4.get_View())}).WithHole({$:2,$0:"selected",$1:b9.Map2(function(ec,ed){return bP.Equals(ec,ed)?"selected":"";},dZ.selV.get_View(),d3)}).WithHole({$:2,$0:"predecessor",$1:b9.Apply(b9.Apply(b9.Apply(b9.Map2(function(ec,ed){return dR.Curried3(function(ee,ef,eg){var eh;return ec!=null&&ec.$==1?(eh=ec.$0,(bS.contains(eh,ed.snpPredIds)?"direct-predecessor":bS.contains(eh,ee)?"indirect-predecessor":bS.contains(eh,ef)?"included-predecessor":"")+(bP.Equals(eg,ec)?" codeSnippet":"")):"";});},d3,dZ.get_CurrentV().get_View()),d0),bG.allCodePredIdsW()),bG.codeSnippetIdV().get_View())}),d$.WithHole(cv.EventQ2(d$.k,"select",function(){return d$.i;},function(){var ec;b9.Get((ec=dZ.selV,function(ed){ec.Set(ed);}),d3);}))).WithHole({$:2,$0:"indent",$1:b9.Map(function(ec){return a.String(1.5*ec.level);},d5)}).WithHole({$:2,$0:"parent",$1:b9.Apply(b9.Map2(function(ec,ed){return function(ee){return ec.hasChildren?ed.Contains(ee.snpId)?"collapsed":"expanded":"";};},d5,bG.collapsedV().get_View()),d4.get_View())}),d_.WithHole(cv.EventQ2(d_.k,"togglecollapse",function(){return d_.i;},function(){b9.Get(function(ec){var ed;if(ec.hasChildren){ed=((bG.collapsedV().Get().Contains(d4.Get().snpId)?function(ee){return function(ef){return ef.Remove(ee);};}:function(ee){return function(ef){return ef.Add(ee);};})(d4.Get().snpId))(bG.collapsedV().Get());bG.collapsedV().Set(ed);}},d5);}))),d9.WithHole(cv.EventQ2(d9.k,"drag",function(){return d9.i;},function(ec){b9.Get(function(ed){if(ed!=null&&ed.$==1){bE.setDragNode(ed.$0);ec.Event.stopPropagation();}},d3);}))),d8.WithHole(cv.EventQ2(d8.k,"dragover",function(){return d8.i;},function(ec){b9.Get(function(ed){if(ed!=null&&ed.$==1)if(bE.getDragNIdO(ed.$0)!=null)ec.Event.preventDefault();},d3);}))),d7.WithHole(cv.EventQ2(d7.k,"drop",function(){return d7.i;},function(ec){ec.Event.preventDefault();b9.Get(function(ed){var ee,ef;if(ed!=null&&ed.$==1){ee=ed.$0;ef=bE.getDragNIdO(ee);(n.iter(function(eg){bG.moveNode(eg,ee);}))(ef);}},d3);}))),(ea=cv.CompleteHoles(d6.k,d6.h,[]),(eb=new ct.New(ea[1],cw.snippet(ea[0])),(d6.i=eb,eb)))).get_Doc());};};};bG.search=function(){bX.$cctor();return bX.search;};bG.wrapNothing=function(dX){return b$.Concat;};bG.snippetList=function(){bX.$cctor();return bX.snippetList;};bG.currentSnippetV=function(){bX.$cctor();return bX.currentSnippetV;};bG.currentSnippetNameV=function(){bX.$cctor();return bX.currentSnippetNameV;};bG.currentSnippetContentV=function(){bX.$cctor();return bX.currentSnippetContentV;};bG.curSnp=function(){bX.$cctor();return bX.curSnp;};bG.selectorLensGuidId=function(dX){var dY;function dZ(d0){return d0==null?null:{$:1,$0:f.Tag$4(d0.$0)};}return(bu.selectorLens(a.String,(dY=K.parseGuidO(),function(d0){return dZ(dY(d0));})))(dX);};bG.monacoNew=function(dX){return ck.onRender(function(dY){var dZ;dZ=dY.editorO;(n.iter(function(d0){var d1;d1=d0.getModel();self.monaco.editor.setModelLanguage(d1,"fsharp");}))(dZ);self.monaco.editor.setTheme("vs-dark");},_7.newVar(function(){return{};},function(){return{};},dX));};bG.monaco=function(){bX.$cctor();return bX.monaco;};bG.addSnippet=function(){b9.Get(function(dX){var dY,dZ,d0,d1,d2,d3,d4;dY=bN.ofSeq((bG.snippetsLM())["var"].Get());dZ=bG.snippetList().add();d0=bG.currentSnippetV().Get().snpId;d1=(d2=null,dX.TryGetValue(d0,{get:function(){return d2;},set:function(d5){d2=d5;}})?{$:1,$0:d2}:null);d1!=null&&d1.$==1?(d3=function(d5){var d6,d7,d8;while(true){d7=bN.tryItem(d5+1,dY);if(d7!=null&&d7.$==1){d8=(d6=null,dX.TryGetValue(d7.$0.snpId,{get:function(){return d6;},set:function(d9){d6=d9;}})?{$:1,$0:d6}:null);if(d8!=null&&d8.$==1){if(bS.contains(d0,d8.$0.path))d5=d5+1;else return d5;}else return d5;}else return d5;}}(d1.$0.pos),d4=bN.concat([bO.array(dY,{$:1,$0:0},{$:1,$0:d3}),[N.New(dZ.snpId,dZ.snpName,dZ.snpContent,bG.currentSnippetV().Get().snpParentIdO,dZ.snpPredIds,dZ.snpProperties,dZ.snpModified)],bO.array(dY,{$:1,$0:d3+1},null)]),bG.snippetsLM().Set(d4)):void 0;},bG.processHierW());};bG.deleteSnippet=function(){b9.Get(function(dX){var dY,dZ,d0,d1,d2,d3,d4;dY=bG.currentSnippetV().Get().snpId;dZ=bG.currentSnippetV().Get().snpParentIdO;d0=(d1=null,dX.TryGetValue(dY,{get:function(){return d1;},set:function(d5){d1=d5;}})?{$:1,$0:d1}:null);d0!=null&&d0.$==1?(d2=d0.$0,d3=bN.ofSeq((bG.snippetsLM())["var"].Get()),function(d5){var d6,d7,d8,d9;while(true){d7=bN.tryItem(d5,d3);if(d7!=null&&d7.$==1){d8=d7.$0;if(bP.Equals(d8.snpParentIdO,{$:1,$0:dY})){bN.set(d3,d5,N.New(d8.snpId,d8.snpName,d8.snpContent,dZ,d8.snpPredIds,d8.snpProperties,d8.snpModified));d5=d5+1;}else{d9=(d6=null,dX.TryGetValue(d8.snpId,{get:function(){return d6;},set:function(d_){d6=d_;}})?{$:1,$0:d6}:null);if(d9!=null&&d9.$==1){if(bS.contains(dY,d9.$0.path))d5=d5+1;else return null;}else return null;}}else return null;}}(d2.pos+1),d4=bN.concat([bO.array(d3,{$:1,$0:0},{$:1,$0:d2.pos-1}),bO.array(d3,{$:1,$0:d2.pos+1},null)]),bG.snippetsLM().Set(d4)):void 0;},bG.processHierW());};bG.indentIn=function(){b9.Get(function(dX){var dY,dZ;dY=(dZ=bG.currentSnippetV().Get().snpId,function(d0){var d1;d1=null;return d0.TryGetValue(dZ,{get:function(){return d1;},set:function(d2){d1=d2;}})?{$:1,$0:d1}:null;}(dX));(n.iter(function(d0){var d1,d2;d1=bG.currentSnippetV().Get().snpParentIdO;d2=function(d3){var d4;while(true)if(d3===0)return null;else{d4=bS.nth(d3-1,(bG.snippetsLM())["var"].Get());if(bP.Equals({$:1,$0:d4.snpId},d1))return null;else if(bP.Equals(d4.snpParentIdO,d1))return{$:1,$0:d4.snpId};else d3=d3-1;}}(d0.pos);(n.iter(function(d3){cb.Lens(bG.currentSnippetV(),function(d4){return d4.snpParentIdO;},function(d4,d5){return N.New(d4.snpId,d4.snpName,d4.snpContent,d5,d4.snpPredIds,d4.snpProperties,d4.snpModified);}).Set({$:1,$0:d3});}))(d2);}))(dY);},bG.processHierW());};bG.indentOut=function(){b9.Get(function(dX){var dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;dY=bG.currentSnippetV().Get().snpId;dZ=(d0=null,dX.TryGetValue(dY,{get:function(){return d0;},set:function(d_){d0=d_;}})?{$:1,$0:d0}:null);d1=bG.currentSnippetV().Get().snpParentIdO;dZ!=null&&dZ.$==1?d1!=null&&d1.$==1?(d2=dZ.$0,d3=d1.$0,d4=bS.tryItem(bN.length(d2.path)-2,d2.path),!bP.Equals({$:1,$0:d3},d4)?(cb.Lens(bG.currentSnippetV(),function(d_){return d_.snpParentIdO;},function(d_,d$){return N.New(d_.snpId,d_.snpName,d_.snpContent,d$,d_.snpPredIds,d_.snpProperties,d_.snpModified);}).Set(d4),d5=bN.ofSeq((bG.snippetsLM())["var"].Get()),d6=function(d_,d$){var ea,eb,ec,ed;while(true){eb=bN.tryItem(d$+1,d5);if(eb!=null&&eb.$==1){ec=(ea=null,dX.TryGetValue(eb.$0.snpId,{get:function(){return ea;},set:function(ee){ea=ee;}})?{$:1,$0:ea}:null);if(ec!=null&&ec.$==1){ed=ec.$0;if(bS.contains(dY,ed.path)){d_=d$+1;d$=d$+1;}else if(bS.contains(d3,ed.path))d$=d$+1;else return{$:1,$0:[d_,d$]};}else return null;}else return null;}}(d2.pos,d2.pos),d6!=null&&d6.$==1?(d7=d6.$0[1],d8=d6.$0[0],d9=bN.concat([bO.array(d5,{$:1,$0:0},{$:1,$0:d2.pos-1}),bO.array(d5,{$:1,$0:d8+1},{$:1,$0:d7}),bO.array(d5,{$:1,$0:d2.pos},{$:1,$0:d8}),bO.array(d5,{$:1,$0:d7+1},null)]),bG.snippetsLM().Set(d9)):void 0):void 0):void 0:void 0;},bG.processHierW());};bG.parseW=function(){bX.$cctor();return bX.parseW;};bG.target2=function(){bX.$cctor();return bX.target2;};bG.parseNewLY=function(){var dX,dY;dX=bG.currentSnippetContentV().get_View();b9.Get((dY=bG.target2().lytDefinition,function(dZ){dY.Set(dZ);}),dX);};bG.main=function(){var dX;dX=bt.startWithHtmlD();(y.resolver(bU.ofArray([["AppFrameworkTemplate.html",cK.html()+bB.html()]]),dX))();};bH.New=function(dX,dY,dZ,d0,d1,d2){return{level:dX,pos:dY,hasChildren:dZ,visible:d0,path:d1,errorO:d2};};bI.loadTextFile=function(dX){var dY,dZ;dY=dX.files;dY.length>0?(dZ=new cI(),dZ.onload=function(d0){var d1,d2;try{d1=(d2=d0.target.result,(cJ.deserializeWithDefs((P.serModel())[0],(P.serModel())[1]))(d2));return(n.iter(function(d3){bG.snippetsLM().Set(d3.snippets);bG.collapsedV().Set(d3.collapsed);}))(d1);}catch(d3){a.alert(a.String(d3));return(function(d4){return function(d5){return d4(bM.prettyPrint(d5));};}(function(d4){dP.log(d4);}))(d3);}},dZ.readAsText(dY.item(0))):void 0;};bI.saveAs=function(){var dX;a.saveAs(new a.Blob([(dX=P.getModel((bG.snippetsLM())["var"].Get(),dS.now(),bG.collapsedV().Get()),(P.serModel())[0](dX))],{type:"text/plain;charset=utf-8"}),"noname.snippets");};bK.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(dX){var dY,dZ;dY=dU.random()*16|0;dZ=dX=="x"?dY:dY&3|8;return dZ.toString(16);});};bK.TryParse=function(dX,dY){try{dY.set(bK.Parse(dX));return true;}catch(dZ){return false;}};bK.Parse=function(dX){var dY,dZ,d0;try{return bK.ParseExact(dX,"D");}catch(d1){try{dY=bK.ParseExact(dX,"B");}catch(d2){try{dZ=bK.ParseExact(dX,"P");}catch(d3){try{d0=bK.ParseExact(dX,"N");}catch(d4){d0=bK.ParseExact(dX,"X");}dZ=d0;}dY=dZ;}return dY;}};bK.ParseExact=function(dX,dY){var dZ,d0,d1,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;function d2(eb){var ec,ed,ee,ef;for(ec=0,ed=35;ec<=ed;ec++){ec===8||(ec===13||(ec===18||ec===23))?eb[ec]!=="-"?bK.ShapeError():void 0:(ef=eb[ec],!("0"<=ef&&ef<="9"||"a"<=ef&&ef<="f")?bK.ShapeError():void 0);}return eb;}d3=dY.toUpperCase();if(d3==="N"){d4=bT.Trim(dX).toLowerCase();if(d4.length!==32)bK.ShapeError();for(d5=0,d6=31;d5<=d6;d5++){d7=d4[d5];!("0"<=d7&&d7<="9"||"a"<=d7&&d7<="f")?bK.ShapeError():void 0;}return bT.Substring(d4,0,8)+"-"+bT.Substring(d4,8,4)+"-"+bT.Substring(d4,12,4)+"-"+bT.Substring(d4,16,4)+"-"+d4.substring(20);}else if(d3==="D"){dZ=bT.Trim(dX).toLowerCase();dZ.length!==36?bK.ShapeError():void 0;return d2(dZ);}else if(d3==="B"){d0=bT.Trim(dX).toLowerCase();d0.length!==38||d0[0]!=="{"||d0[17]!=="}"?bK.ShapeError():void 0;return d2(bT.Substring(d0,1,36));}else if(d3==="P"){d1=bT.Trim(dX).toLowerCase();d1.length!==38||d1[0]!=="("||d1[17]!==")"?bK.ShapeError():void 0;return d2(bT.Substring(d1,1,36));}else if(d3==="X"){d8=bT.Trim(dX).toLowerCase();if(d8.length!==68)bK.ShapeError();for(d9=0,d_=67;d9<=d_;d9++){switch(d9){case 26:case 0:if(d8[d9]!=="{")bK.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(d8[d9]!=="0")bK.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(d8[d9]!=="x")bK.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(d8[d9]!==",")bK.ShapeError();break;case 67:case 66:if(d8[d9]!=="{")bK.ShapeError();break;default:ea=d8[d9];!("0"<=ea&&ea<="9"||"a"<=ea&&ea<="f")?bK.ShapeError():void 0;break;}}return bT.Substring(d8,3,8)+"-"+bT.Substring(d8,14,4)+"-"+bT.Substring(d8,21,4)+"-"+bT.Substring(d8,29,2)+bT.Substring(d8,34,2)+"-"+bT.Substring(d8,39,2)+bT.Substring(d8,44,2)+bT.Substring(d8,49,2)+bT.Substring(d8,54,2)+bT.Substring(d8,59,2)+bT.Substring(d8,64,2);}else return bK.FormatError();};bK.ShapeError=function(){throw new dG.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bK.FormatError=function(){throw new dG.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bL.FailWith=function(dX){throw new cD(dX);};bL.range=function(dX,dY){var dZ;dZ=1+dY-dX;return dZ<=0?[]:bS.init(dZ,function(d0){return d0+dX;});};bL.toInt=function(dX){var dY;dY=bL.toUInt(dX);return dY>=2147483648?dY-4294967296:dY;};bL.KeyValue=function(dX){return[dX.K,dX.V];};bL.toUInt=function(dX){return(dX<0?dU.ceil(dX):dU.floor(dX))>>>0;};bM.toSafe=function(dX){return dX==null?"":dX;};bM.prettyPrint=function(dX){var dY,dZ;function d0(d1,d2){return d1+" = "+bM.prettyPrint(d2);}return dX===null?"null":(dY=typeof dX,dY=="string"?"\""+dX+"\"":dY=="object"?dX instanceof a.Array?"[|"+bT.concat("; ",bN.map(bM.prettyPrint,dX))+"|]":(dZ=a.String(dX),dZ==="[object Object]"?"{"+bT.concat("; ",bN.map(function(d1){return d0(d1[0],d1[1]);},cg.GetFields(dX)))+"}":dZ):a.String(dX));};bM.padNumLeft=function(dX,dY){var dZ;dZ=bN.get(dX,0);return dZ===" "||dZ==="+"||dZ==="-"?dZ+bT.PadLeftWith(dX.substr(1),dY-1,"0"):bT.PadLeftWith(dX,dY,"0");};bM.printList=function(dX,dY){return"["+bT.concat("; ",bS.map(dX,dY))+"]";};bN.get=function(dX,dY){bN.checkBounds(dX,dY);return dX[dY];};bN.set=function(dX,dY,dZ){bN.checkBounds(dX,dY);dX[dY]=dZ;};bN.checkBounds=function(dX,dY){if(dY<0||dY>=dX.length)bL.FailWith("Index was outside the bounds of the array.");};bN.length=function(dX){return dX.dims===2?dX.length*dX.length:dX.length;};bO.string=function(dX,dY,dZ){return dY==null?dZ!=null&&dZ.$==1?dX.slice(0,dZ.$0+1):"":dZ==null?dX.slice(dY.$0):dX.slice(dY.$0,dZ.$0+1);};bO.array=function(dX,dY,dZ){return dY==null?dZ!=null&&dZ.$==1?dX.slice(0,dZ.$0+1):[]:dZ==null?dX.slice(dY.$0):dX.slice(dY.$0,dZ.$0+1);};bP.Equals=function(dX,dY){var dZ,d0,d1,d2;if(dX===dY)return true;else{dZ=typeof dX;if(dZ=="object"){if(dX===null||dX===void 0||dY===null||dY===void 0)return false;else if("Equals"in dX)return dX.Equals(dY);else if(dX instanceof a.Array&&dY instanceof a.Array)return bP.arrayEquals(dX,dY);else if(dX instanceof dS&&dY instanceof dS)return bP.dateEquals(dX,dY);else{d0=[true];for(var d3 in dX)if(function(d4){d0[0]=!dX.hasOwnProperty(d4)||dY.hasOwnProperty(d4)&&bP.Equals(dX[d4],dY[d4]);return!d0[0];}(d3))break;if(d0[0]){for(var d4 in dY)if(function(d5){d0[0]=!dY.hasOwnProperty(d5)||dX.hasOwnProperty(d5);return!d0[0];}(d4))break;}return d0[0];}}else return dZ=="function"&&("$Func"in dX?dX.$Func===dY.$Func&&dX.$Target===dY.$Target:"$Invokes"in dX&&"$Invokes"in dY&&bP.arrayEquals(dX.$Invokes,dY.$Invokes));}};bP.Compare=function(dX,dY){var dZ,d0,d1,d2,d3,d4;if(dX===dY)return 0;else{d0=typeof dX;switch(d0=="function"?1:d0=="boolean"?2:d0=="number"?2:d0=="string"?2:d0=="object"?3:0){case 0:return typeof dY=="undefined"?0:-1;case 1:return bL.FailWith("Cannot compare function values.");case 2:return dX<dY?-1:1;case 3:if(dX===null)d1=-1;else if(dY===null)d1=1;else if("CompareTo"in dX)d1=dX.CompareTo(dY);else if("CompareTo0"in dX)d1=dX.CompareTo0(dY);else if(dX instanceof a.Array&&dY instanceof a.Array)d1=bP.compareArrays(dX,dY);else if(dX instanceof dS&&dY instanceof dS)d1=bP.compareDates(dX,dY);else{d2=[0];for(var d5 in dX)if(function(d6){return!dX.hasOwnProperty(d6)?false:!dY.hasOwnProperty(d6)?(d2[0]=1,true):(d2[0]=bP.Compare(dX[d6],dY[d6]),d2[0]!==0);}(d5))break;if(d2[0]===0){for(var d6 in dY)if(function(d7){return!dY.hasOwnProperty(d7)?false:!dX.hasOwnProperty(d7)&&(d2[0]=-1,true);}(d6))break;}d1=d2[0];}return d1;}}};bP.arrayEquals=function(dX,dY){var dZ,d0;if(bN.length(dX)===bN.length(dY)){dZ=true;d0=0;while(dZ&&d0<bN.length(dX)){!bP.Equals(bN.get(dX,d0),bN.get(dY,d0))?dZ=false:void 0;d0=d0+1;}return dZ;}else return false;};bP.dateEquals=function(dX,dY){return dX.getTime()===dY.getTime();};bP.compareArrays=function(dX,dY){var dZ,d0;if(bN.length(dX)<bN.length(dY))return -1;else if(bN.length(dX)>bN.length(dY))return 1;else{dZ=0;d0=0;while(dZ===0&&d0<bN.length(dX)){dZ=bP.Compare(bN.get(dX,d0),bN.get(dY,d0));d0=d0+1;}return dZ;}};bP.compareDates=function(dX,dY){return bP.Compare(dX.getTime(),dY.getTime());};bP.Hash=function(dX){var dY;dY=typeof dX;return dY=="function"?0:dY=="boolean"?dX?1:0:dY=="number"?dX:dY=="string"?bP.hashString(dX):dY=="object"?dX==null?0:dX instanceof a.Array?bP.hashArray(dX):bP.hashObject(dX):0;};bP.hashString=function(dX){var dY,dZ,d0;if(dX===null)return 0;else{dY=5381;for(dZ=0,d0=dX.length-1;dZ<=d0;dZ++)dY=bP.hashMix(dY,dX[dZ].charCodeAt());return dY;}};bP.hashArray=function(dX){var dY,dZ,d0;dY=-34948909;for(dZ=0,d0=bN.length(dX)-1;dZ<=d0;dZ++)dY=bP.hashMix(dY,bP.Hash(bN.get(dX,dZ)));return dY;};bP.hashObject=function(dX){var dY,dZ;if("GetHashCode"in dX)return dX.GetHashCode();else{dY=[0];for(var d0 in dX)if(function(d1){dY[0]=bP.hashMix(bP.hashMix(dY[0],bP.hashString(d1)),bP.Hash(dX[d1]));return false;}(d0))break;return dY[0];}};bP.hashMix=function(dX,dY){return(dX<<5)+dX+dY;};bR=bQ.Dictionary=dR.Class({TryGetValue:function(dX,dY){var dZ,d0,d1;dZ=this;d0=this.data[this.hash(dX)];return d0==null?false:(d1=bN.tryPick(function(d2){var d3;d3=bL.KeyValue(d2);return dZ.equals.apply(null,[d3[0],dX])?{$:1,$0:d3[1]}:null;},d0),d1!=null&&d1.$==1&&(dY.set(d1.$0),true));},ContainsKey:function(dX){var dY,dZ;dY=this;dZ=this.data[this.hash(dX)];return dZ==null?false:bN.exists(function(d0){return dY.equals.apply(null,[(bL.KeyValue(d0))[0],dX]);},dZ);},set_Item:function(dX,dY){this.set(dX,dY);},Add:function(dX,dY){this.add(dX,dY);},Clear:function(){this.data=[];this.count=0;},get_Item:function(dX){return this.get(dX);},set:function(dX,dY){var dZ,d0,d1,d2;dZ=this;d0=this.hash(dX);d1=this.data[d0];d1==null?(this.count=this.count+1,this.data[d0]=new a.Array({K:dX,V:dY})):(d2=bN.tryFindIndex(function(d3){return dZ.equals.apply(null,[(bL.KeyValue(d3))[0],dX]);},d1),d2==null?(this.count=this.count+1,d1.push({K:dX,V:dY})):d1[d2.$0]={K:dX,V:dY});},add:function(dX,dY){var dZ,d0,d1;dZ=this;d0=this.hash(dX);d1=this.data[d0];d1==null?(this.count=this.count+1,this.data[d0]=new a.Array({K:dX,V:dY})):(bN.exists(function(d2){return dZ.equals.apply(null,[(bL.KeyValue(d2))[0],dX]);},d1)?cP.alreadyAdded():void 0,this.count=this.count+1,d1.push({K:dX,V:dY}));},get:function(dX){var dY,dZ;dY=this;dZ=this.data[this.hash(dX)];return dZ==null?cP.notPresent():bN.pick(function(d0){var d1;d1=bL.KeyValue(d0);return dY.equals.apply(null,[d1[0],dX])?{$:1,$0:d1[1]}:null;},dZ);},Remove:function(dX){return this.remove(dX);},get_Keys:function(){return new dz.New(this);},remove:function(dX){var dY,dZ,d0,d1;dY=this;dZ=this.hash(dX);d0=this.data[dZ];return d0==null?false:(d1=bN.filter(function(d2){return!dY.equals.apply(null,[(bL.KeyValue(d2))[0],dX]);},d0),bN.length(d1)<d0.length&&(this.count=this.count-1,this.data[dZ]=d1,true));},GetEnumerator:function(){return cN.Get0(this);},GetEnumerator0:function(){return cN.Get0(bN.concat(cg.GetFieldValues(this.data)));}},r,bR);bR.New$5=dR.Ctor(function(){bR.New$6.call(this,[],bP.Equals,bP.Hash);},bR);bR.New$6=dR.Ctor(function(dX,dY,dZ){var d0,d1;r.New.call(this);this.equals=dY;this.hash=dZ;this.count=0;this.data=[];d0=cN.Get(dX);try{while(d0.MoveNext()){d1=d0.Current();this.set(d1.K,d1.V);}}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}},bR);bS.filter=function(dX,dY){return{GetEnumerator:function(){var dZ;dZ=cN.Get(dY);return new cO.New(null,null,function(d0){var d1,d2,d3;d1=dZ.MoveNext();d2=dZ.Current();d3=false;while(d1)if(dX(d2)){d0.c=d2;d3=true;d1=false;}else if(dZ.MoveNext())d2=dZ.Current();else d1=false;return d3;},function(){dZ.Dispose();});}};};bS.map=function(dX,dY){return{GetEnumerator:function(){var dZ;dZ=cN.Get(dY);return new cO.New(null,null,function(d0){return dZ.MoveNext()&&(d0.c=dX(dZ.Current()),true);},function(){dZ.Dispose();});}};};bS.forall=function(dX,dY){return!bS.exists(function(dZ){return!dX(dZ);},dY);};bS.exists=function(dX,dY){var dZ,d0;dZ=cN.Get(dY);try{d0=false;while(!d0&&dZ.MoveNext())d0=dX(dZ.Current());return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bS.fold=function(dX,dY,dZ){var d0,d1;d0=dY;d1=cN.Get(dZ);try{while(d1.MoveNext())d0=dX(d0,d1.Current());return d0;}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}};bS.choose=function(dX,dY){return bS.collect(function(dZ){var d0;d0=dX(dZ);return d0==null?bY.Empty:bU.ofArray([d0.$0]);},dY);};bS.tryFind=function(dX,dY){var dZ,d0,d1;dZ=cN.Get(dY);try{d0=null;while(d0==null&&dZ.MoveNext()){d1=dZ.Current();dX(d1)?d0={$:1,$0:d1}:void 0;}return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bS.distinct=function(dX){return bS.distinctBy(a.id,dX);};bS.sort=function(dX){return bS.sortBy(a.id,dX);};bS.mapi=function(dX,dY){return bS.map2(dX,bS.initInfinite(a.id),dY);};bS.collect=function(dX,dY){return bS.concat(bS.map(dX,dY));};bS.tryFindIndex=function(dX,dY){var dZ,d0,d1;dZ=cN.Get(dY);try{d0=true;d1=0;while(d0&&dZ.MoveNext())if(dX(dZ.Current()))d0=false;else d1=d1+1;return d0?null:{$:1,$0:d1};}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bS.delay=function(dX){return{GetEnumerator:function(){return cN.Get(dX());}};};bS.append=function(dX,dY){return{GetEnumerator:function(){var dZ,d0;dZ=cN.Get(dX);d0=[true];return new cO.New(dZ,null,function(d1){var d2;return d1.s.MoveNext()?(d1.c=d1.s.Current(),true):(d2=d1.s,!bP.Equals(d2,null)?d2.Dispose():void 0,d1.s=null,d0[0]&&(d0[0]=false,d1.s=cN.Get(dY),d1.s.MoveNext()?(d1.c=d1.s.Current(),true):(d1.s.Dispose(),d1.s=null,false)));},function(d1){var d2;d2=d1.s;!bP.Equals(d2,null)?d2.Dispose():void 0;});}};};bS.head=function(dX){var dY;dY=cN.Get(dX);try{return dY.MoveNext()?dY.Current():bS.insufficient();}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}};bS.indexed=function(dX){return bS.mapi(function(dY,dZ){return[dY,dZ];},dX);};bS.tryPick=function(dX,dY){var dZ,d0;dZ=cN.Get(dY);try{d0=null;while(bP.Equals(d0,null)&&dZ.MoveNext())d0=dX(dZ.Current());return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bS.pairwise=function(dX){return bS.map(function(dY){return[bN.get(dY,0),bN.get(dY,1)];},bS.windowed(2,dX));};bS.isEmpty=function(dX){var dY;dY=cN.Get(dX);try{return!dY.MoveNext();}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}};bS.sortBy=function(dX,dY){return bS.delay(function(){var dZ;dZ=bN.ofSeq(dY);bN.sortInPlaceBy(dX,dZ);return dZ;});};bS.max=function(dX){var dY,dZ,d0;dY=cN.Get(dX);try{if(!dY.MoveNext())bS.seqEmpty();dZ=dY.Current();while(dY.MoveNext()){d0=dY.Current();bP.Compare(d0,dZ)===1?dZ=d0:void 0;}return dZ;}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}};bS.skip=function(dX,dY){return{GetEnumerator:function(){var dZ;dZ=cN.Get(dY);return new cO.New(true,null,function(d0){var d1,d2;if(d0.s){for(d1=1,d2=dX;d1<=d2;d1++)if(!dZ.MoveNext())bS.insufficient();d0.s=false;}else null;return dZ.MoveNext()&&(d0.c=dZ.Current(),true);},function(){dZ.Dispose();});}};};bS.groupBy=function(dX,dY){return bS.delay(function(){return bN.groupBy(dX,bN.ofSeq(dY));});};bS.iter=function(dX,dY){var dZ;dZ=cN.Get(dY);try{while(dZ.MoveNext())dX(dZ.Current());}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bS.distinctBy=function(dX,dY){return{GetEnumerator:function(){var dZ,d0;dZ=cN.Get(dY);d0=new c4.New$3();return new cO.New(null,null,function(d1){var d2,d3;if(dZ.MoveNext()){d2=dZ.Current();d3=d0.Add(dX(d2));while(!d3&&dZ.MoveNext()){d2=dZ.Current();d3=d0.Add(dX(d2));}return d3&&(d1.c=d2,true);}else return false;},function(){dZ.Dispose();});}};};bS.map2=function(dX,dY,dZ){return{GetEnumerator:function(){var d0,d1;d0=cN.Get(dY);d1=cN.Get(dZ);return new cO.New(null,null,function(d2){return d0.MoveNext()&&d1.MoveNext()&&(d2.c=dX(d0.Current(),d1.Current()),true);},function(){d0.Dispose();d1.Dispose();});}};};bS.initInfinite=function(dX){return{GetEnumerator:function(){return new cO.New(0,null,function(dY){dY.c=dX(dY.s);dY.s=dY.s+1;return true;},void 0);}};};bS.concat=function(dX){return{GetEnumerator:function(){var dY;dY=cN.Get(dX);return new cO.New(null,null,function(dZ){var d0;while(true){d0=dZ.s;if(bP.Equals(d0,null)){if(dY.MoveNext()){dZ.s=cN.Get(dY.Current());dZ=dZ;}else{dY.Dispose();return false;}}else if(d0.MoveNext()){dZ.c=d0.Current();return true;}else{dZ.Dispose();dZ.s=null;dZ=dZ;}}},function(dZ){var d0;d0=dZ.s;!bP.Equals(d0,null)?d0.Dispose():void 0;!bP.Equals(dY,null)?dY.Dispose():void 0;});}};};bS.init=function(dX,dY){return bS.take(dX,bS.initInfinite(dY));};bS.windowed=function(dX,dY){dX<=0?bL.FailWith("The input must be positive."):void 0;return bS.delay(function(){return bS.enumUsing(cN.Get(dY),function(dZ){var d0;d0=[];return bS.append(bS.enumWhile(function(){return d0.length<dX&&dZ.MoveNext();},bS.delay(function(){d0.push(dZ.Current());return[];})),bS.delay(function(){return d0.length===dX?bS.append([d0.slice(0)],bS.delay(function(){return bS.enumWhile(function(){return dZ.MoveNext();},bS.delay(function(){d0.shift();d0.push(dZ.Current());return[d0.slice(0)];}));})):[];}));});});};bS.seqEmpty=function(){return bL.FailWith("The input sequence was empty.");};bS.nth=function(dX,dY){var dZ,d0;if(dX<0)bL.FailWith("negative index requested");dZ=-1;d0=cN.Get(dY);try{while(dZ<dX){!d0.MoveNext()?bS.insufficient():void 0;dZ=dZ+1;}return d0.Current();}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bS.cache=function(dX){var dY,dZ;dY=[];dZ=[cN.Get(dX)];return{GetEnumerator:function(){return new cO.New(0,null,function(d0){var d1;return d0.s<dY.length?(d0.c=dY[d0.s],d0.s=d0.s+1,true):(d1=dZ[0],bP.Equals(d1,null)?false:d1.MoveNext()?(d0.s=d0.s+1,d0.c=d1.Current(),dY.push(d0.c),true):(d1.Dispose(),dZ[0]=null,false));},void 0);}};};bS.take=function(dX,dY){dX<0?bS.nonNegative():void 0;return{GetEnumerator:function(){var dZ;dZ=[cN.Get(dY)];return new cO.New(0,null,function(d0){var d1;d0.s=d0.s+1;return d0.s>dX?false:(d1=dZ[0],bP.Equals(d1,null)?bS.insufficient():d1.MoveNext()?(d0.c=d1.Current(),d0.s===dX?(d1.Dispose(),dZ[0]=null):void 0,true):(d1.Dispose(),dZ[0]=null,bS.insufficient()));},function(){var d0;d0=dZ[0];!bP.Equals(d0,null)?d0.Dispose():void 0;});}};};bS.compareWith=function(dX,dY,dZ){var d0,d1,d2,d3,d4;d0=cN.Get(dY);try{d2=cN.Get(dZ);try{d3=0;d4=true;while(d4&&d3===0)if(d0.MoveNext())d3=d2.MoveNext()?dX(d0.Current(),d2.Current()):1;else if(d2.MoveNext())d3=-1;else d4=false;d1=d3;}finally{if(typeof d2=="object"&&"Dispose"in d2)d2.Dispose();}return d1;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bS.forall2=function(dX,dY,dZ){return!bS.exists2(function(d0,d1){return!dX(d0,d1);},dY,dZ);};bS.unfold=function(dX,dY){return{GetEnumerator:function(){return new cO.New(dY,null,function(dZ){var d0;d0=dX(dZ.s);return d0==null?false:(dZ.c=d0.$0[0],dZ.s=d0.$0[1],true);},void 0);}};};bS.exists2=function(dX,dY,dZ){var d0,d1,d2,d3;d0=cN.Get(dY);try{d2=cN.Get(dZ);try{d3=false;while(!d3&&d0.MoveNext()&&d2.MoveNext())d3=dX(d0.Current(),d2.Current());d1=d3;}finally{if(typeof d2=="object"&&"Dispose"in d2)d2.Dispose();}return d1;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bS.findIndex=function(dX,dY){var dZ;dZ=bS.tryFindIndex(dX,dY);return dZ==null?bL.FailWith("KeyNotFoundException"):dZ.$0;};bT.concat=function(dX,dY){return bN.ofSeq(dY).join(dX);};bT.PadRight=function(dX,dY){return bT.PadRightWith(dX,dY," ");};bT.replicate=function(dX,dY){return bN.create(dX,dY).join("");};bT.PadLeft=function(dX,dY){return bT.PadLeftWith(dX,dY," ");};bT.PadRightWith=function(dX,dY,dZ){return dY>dX.length?dX+a.Array(dY-dX.length+1).join(dZ):dX;};bT.Substring=function(dX,dY,dZ){return dX.substr(dY,dZ);};bT.SplitChars=function(dX,dY,dZ){return bT.Split(dX,new a.RegExp("["+bT.RegexEscape(dY.join(""))+"]"),dZ);};bT.Trim=function(dX){return dX.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bT.StartsWith=function(dX,dY){return dX.substring(0,dY.length)==dY;};bT.EndsWith=function(dX,dY){return dX.substring(dX.length-dY.length)==dY;};bT.IsNullOrEmpty=function(dX){return dX==null||dX=="";};bT.PadLeftWith=function(dX,dY,dZ){return dY>dX.length?a.Array(dY-dX.length+1).join(dZ)+dX:dX;};bT.Replace=function(dX,dY,dZ){function d0(d1){var d2,d3,d4;d2=d1.indexOf(dY);return d2!==-1?(d3=bT.ReplaceOnce(d1,dY,dZ),(d4=d2+dZ.length,bT.Substring(d3,0,d2+dZ.length)+d0(d3.substring(d4)))):d1;}return d0(dX);};bT.SplitStrings=function(dX,dY,dZ){return bT.Split(dX,new a.RegExp(bT.concat("|",bN.map(bT.RegexEscape,dY))),dZ);};bT.Split=function(dX,dY,dZ){return dZ===1?bN.filter(function(d0){return d0!=="";},bT.SplitWith(dX,dY)):bT.SplitWith(dX,dY);};bT.RegexEscape=function(dX){return dX.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bT.ReplaceOnce=function(dX,dY,dZ){return dX.replace(dY,dZ);};bT.SplitWith=function(dX,dY){return dX.split(dY);};bT.forall=function(dX,dY){return bS.forall(dX,bT.protect(dY));};bT.protect=function(dX){return dX===null?"":dX;};bN.map=function(dX,dY){var dZ,d0,d1;dZ=new a.Array(dY.length);for(d0=0,d1=dY.length-1;d0<=d1;d0++)dZ[d0]=dX(dY[d0]);return dZ;};bN.foldBack=function(dX,dY,dZ){var d0,d1,d2,d3,d4;d0=dZ;d2=dY.length;for(d3=1,d4=d2;d3<=d4;d3++)d0=dX(dY[d2-d3],d0);return d0;};bN.head=function(dX){bN.nonEmpty(dX);return dX[0];};bN.choose=function(dX,dY){var dZ,d0,d1,d2;dZ=[];for(d0=0,d1=dY.length-1;d0<=d1;d0++){d2=dX(dY[d0]);d2==null?void 0:dZ.push(d2.$0);}return dZ;};bN.filter=function(dX,dY){var dZ,d0,d1;dZ=[];for(d0=0,d1=dY.length-1;d0<=d1;d0++)if(dX(dY[d0]))dZ.push(dY[d0]);return dZ;};bN.splitAt=function(dX,dY){return[bN.take(dX,dY),bN.skip(dX,dY)];};bN.findIndex=function(dX,dY){var dZ;dZ=bN.tryFindIndex(dX,dY);return dZ==null?bL.FailWith("KeyNotFoundException"):dZ.$0;};bN.concat=function(dX){return a.Array.prototype.concat.apply([],bN.ofSeq(dX));};bN.tryItem=function(dX,dY){return dY.length<=dX||dX<0?null:{$:1,$0:dY[dX]};};bN.tryPick=function(dX,dY){var dZ,d0,d1;dZ=null;d0=0;while(d0<dY.length&&dZ==null){d1=dX(dY[d0]);d1!=null&&d1.$==1?dZ=d1:void 0;d0=d0+1;}return dZ;};bN.exists=function(dX,dY){var dZ,d0,d1,d2;dZ=false;d0=0;d2=bN.length(dY);while(!dZ&&d0<d2)if(dX(dY[d0]))dZ=true;else d0=d0+1;return dZ;};bN.ofSeq=function(dX){var dY,dZ;if(dX instanceof a.Array)return dX.slice();else if(dX instanceof bY)return bN.ofList(dX);else{dY=[];dZ=cN.Get(dX);try{while(dZ.MoveNext())dY.push(dZ.Current());return dY;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}}};bN.create=function(dX,dY){var dZ,d0,d1;dZ=new a.Array(dX);for(d0=0,d1=dX-1;d0<=d1;d0++)dZ[d0]=dY;return dZ;};bN.nonEmpty=function(dX){if(dX.length===0)bL.FailWith("The input array was empty.");};bN.tryFindIndex=function(dX,dY){var dZ,d0;dZ=null;d0=0;while(d0<dY.length&&dZ==null){dX(dY[d0])?dZ={$:1,$0:d0}:void 0;d0=d0+1;}return dZ;};bN.tryFind=function(dX,dY){var dZ,d0;dZ=null;d0=0;while(d0<dY.length&&dZ==null){dX(dY[d0])?dZ={$:1,$0:dY[d0]}:void 0;d0=d0+1;}return dZ;};bN.sortInPlaceBy=function(dX,dY){bN.mapInPlace(function(dZ){return dZ[0];},bN.mapiInPlace(function(dZ,d0){return[d0,[dX(d0),dZ]];},dY).sort(function(dZ,d0){return bP.Compare(dZ[1],d0[1]);}));};bN.take=function(dX,dY){return dX<0?bS.nonNegative():dX>dY.length?bS.insufficient():dY.slice(0,dX);};bN.skip=function(dX,dY){return dX<0?bS.nonNegative():dX>dY.length?bS.insufficient():dY.slice(dX);};bN.ofList=function(dX){var dY,dZ;dZ=[];dY=dX;while(!(dY.$==0)){dZ.push(bU.head(dY));dY=bU.tail(dY);}return dZ;};bN.sortInPlace=function(dX){bN.mapInPlace(function(dY){return dY[0];},bN.mapiInPlace(function(dY,dZ){return[dZ,dY];},dX).sort(bP.Compare));};bN.pick=function(dX,dY){var dZ;dZ=bN.tryPick(dX,dY);return dZ==null?bL.FailWith("KeyNotFoundException"):dZ.$0;};bN.iter=function(dX,dY){var dZ,d0;for(dZ=0,d0=dY.length-1;dZ<=d0;dZ++)dX(dY[dZ]);};bN.find=function(dX,dY){var dZ;dZ=bN.tryFind(dX,dY);return dZ==null?bL.FailWith("KeyNotFoundException"):dZ.$0;};bN.forall=function(dX,dY){var dZ,d0,d1,d2;dZ=true;d0=0;d2=bN.length(dY);while(dZ&&d0<d2)if(dX(dY[d0]))d0=d0+1;else dZ=false;return dZ;};bN.init=function(dX,dY){var dZ,d0,d1;dX<0?bL.FailWith("Negative size given."):null;dZ=new a.Array(dX);for(d0=0,d1=dX-1;d0<=d1;d0++)dZ[d0]=dY(d0);return dZ;};bU.ofArray=function(dX){var dY,dZ,d0;dY=bY.Empty;for(dZ=bN.length(dX)-1,d0=0;dZ>=d0;dZ--)dY=new bY({$:1,$0:bN.get(dX,dZ),$1:dY});return dY;};bU.filter=function(dX,dY){return bU.ofSeq(bS.filter(dX,dY));};bU.rev=function(dX){var dY,dZ;dY=bY.Empty;dZ=dX;while(dZ.$==1){dY=new bY({$:1,$0:dZ.$0,$1:dY});dZ=dZ.$1;}return dY;};bU.map=function(dX,dY){var dZ,d0,d1,d2,d3;if(dY.$==0)return dY;else{d2=new bY({$:1});dZ=d2;d0=dY;d1=true;while(d1){dZ.$0=dX(d0.$0);d0=d0.$1;d0.$==0?d1=false:dZ=(d3=new bY({$:1}),dZ.$1=d3,d3);}dZ.$1=bY.Empty;return d2;}};bU.ofSeq=function(dX){var dY,dZ,d0,d1,d2,d3;if(dX instanceof bY)return dX;else if(dX instanceof a.Array)return bU.ofArray(dX);else{dY=cN.Get(dX);try{d0=dY.MoveNext();if(!d0)dZ=bY.Empty;else{d2=new bY({$:1});d1=d2;while(d0){d1.$0=dY.Current();dY.MoveNext()?d1=(d3=new bY({$:1}),d1.$1=d3,d3):d0=false;}d1.$1=bY.Empty;dZ=d2;}return dZ;}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}}};bU.append=function(dX,dY){var dZ,d0,d1,d2,d3;if(dX.$==0)return dY;else if(dY.$==0)return dX;else{d2=new bY({$:1});dZ=d2;d0=dX;d1=true;while(d1){dZ.$0=d0.$0;d0=d0.$1;d0.$==0?d1=false:dZ=(d3=new bY({$:1}),dZ.$1=d3,d3);}dZ.$1=dY;return d2;}};bU.foldBack=function(dX,dY,dZ){return bN.foldBack(dX,bN.ofList(dY),dZ);};bU.head=function(dX){return dX.$==1?dX.$0:bU.listEmpty();};bU.tail=function(dX){return dX.$==1?dX.$1:bU.listEmpty();};bU.listEmpty=function(){return bL.FailWith("The input list was empty.");};bV.toArray=function(dX){return dX==null?[]:[dX.$0];};bW=q.CancellationTokenSource=dR.Class({Cancel$1:function(){var dX;if(!this.c){this.c=true;dX=bN.choose(function(dY){try{dY();return null;}catch(dZ){return{$:1,$0:dZ};}},this.r);if(bN.length(dX)>0)throw new cQ.New$3(dX);else void 0;}}},r,bW);bW.New=dR.Ctor(function(){r.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bW);bX.$cctor=function(){var dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f0,f1,f2,f3,f4,f5,f6,f7,f8,f9,f_,f$,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm;bX.$cctor=a.ignore;function gn(hA){return bT.concat("\n",hA);}function go(hA){return J.splitByChar("\n",hA);}function gp(hA){var hB,hC;return bO.array(hA,{$:1,$0:0},{$:1,$0:(hB=0,(hC=bN.length(hA)-2,bP.Compare(hB,hC)===1?hB:hC))});}function gq(hA){return bT.concat("\n",hA);}function gr(hA){return hA+"T00:00:00";}function gs(hA){var hB;function hC(hE){return ba.plugIns().TryFindByKey(hE);}function hD(hE){return hE==null?ba.defaultPlugIn():hE.$0;}hB=function(hE){return hE==null?null:hC(hE.$0);};return function(hE){return hD(hB(hE));};}function gt(hA,hB){return function(hC){return function(hD){function hE(hF){return b$.Element("div",hA(hC),[b$.Element("div",[cC.Create("class","input-group")],[b$.Element("span",[cC.Create("class","input-group-addon")],[hB(hD)]),b$.Input([cC.Create("class","form-control")],hF)])]);}return function(hF){return ba.docWithVar(hE,hF);};};};}function gu(hA,hB){var hC,hD;hC=(hD=hA(hB),function(hE){return b$.Input(hD,hE);});return function(hE){return ba.docWithVar(hC,hE);};}function gv(hA,hB){var hC,hD;hC=(hD=hA(hB),function(hE){return b$.InputArea(hD,hE);});return function(hE){return ba.docWithVar(hC,hE);};}function gw(hA){var hB;hB=null;return eA.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gx(hA,hB){eA.set_Item(hA,hB);return hB;}function gy(hA,hB){var hC;hC=gw(hA);return hC==null?gx(hA,hB(hA)):hC.$0;}function gz(hA){var hB;hB=null;return eD.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gA(hA,hB){eD.set_Item(hA,hB);return hB;}function gB(hA,hB){var hC;hC=gz(hA);return hC==null?gA(hA,hB(hA)):hC.$0;}function gC(hA){var hB;hB=null;return eG.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gD(hA,hB){eG.set_Item(hA,hB);return hB;}function gE(hA,hB){var hC;hC=gC(hA);return hC==null?gD(hA,hB(hA)):hC.$0;}function gF(hA){var hB;hB=null;return eJ.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gG(hA,hB){eJ.set_Item(hA,hB);return hB;}function gH(hA,hB){var hC;hC=gF(hA);return hC==null?gG(hA,hB(hA)):hC.$0;}function gI(hA){var hB;hB=null;return eM.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gJ(hA,hB){eM.set_Item(hA,hB);return hB;}function gK(hA,hB){var hC;hC=gI(hA);return hC==null?gJ(hA,hB(hA)):hC.$0;}function gL(hA){var hB;hB=null;return eP.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gM(hA,hB){eP.set_Item(hA,hB);return hB;}function gN(hA,hB){var hC;hC=gL(hA);return hC==null?gM(hA,hB(hA)):hC.$0;}function gO(hA){var hB;hB=null;return eS.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gP(hA,hB){eS.set_Item(hA,hB);return hB;}function gQ(hA,hB){var hC;hC=gO(hA);return hC==null?gP(hA,hB(hA)):hC.$0;}function gR(hA){var hB;hB=null;return eV.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gS(hA,hB){eV.set_Item(hA,hB);return hB;}function gT(hA,hB){var hC;hC=gR(hA);return hC==null?gS(hA,hB(hA)):hC.$0;}function gU(hA){var hB;hB=null;return eY.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gV(hA,hB){eY.set_Item(hA,hB);return hB;}function gW(hA,hB){var hC;hC=gU(hA);return hC==null?gV(hA,hB(hA)):hC.$0;}function gX(hA){var hB;hB=null;return e1.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function gY(hA,hB){e1.set_Item(hA,hB);return hB;}function gZ(hA,hB){var hC;hC=gX(hA);return hC==null?gY(hA,hB(hA)):hC.$0;}function g0(hA){var hB;hB=null;return e4.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function g1(hA,hB){e4.set_Item(hA,hB);return hB;}function g2(hA,hB){var hC;hC=g0(hA);return hC==null?g1(hA,hB(hA)):hC.$0;}function g3(hA){var hB;hB=null;return fN.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function g4(hA,hB){fN.set_Item(hA,hB);return hB;}function g5(hA,hB){var hC;hC=g3(hA);return hC==null?g4(hA,hB(hA)):hC.$0;}function g6(hA){var hB;hB=null;return fQ.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function g7(hA,hB){fQ.set_Item(hA,hB);return hB;}function g8(hA,hB){var hC;hC=g6(hA);return hC==null?g7(hA,hB(hA)):hC.$0;}function g9(hA){var hB;hB=null;return fT.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function g_(hA,hB){fT.set_Item(hA,hB);return hB;}function g$(hA,hB){var hC;hC=g9(hA);return hC==null?g_(hA,hB(hA)):hC.$0;}function ha(hA){var hB;hB=null;return fW.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function hb(hA,hB){fW.set_Item(hA,hB);return hB;}function hc(hA,hB){var hC;hC=ha(hA);return hC==null?hb(hA,hB(hA)):hC.$0;}function hd(hA){var hB;hB=null;return fZ.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function he(hA,hB){fZ.set_Item(hA,hB);return hB;}function hf(hA,hB){var hC;hC=hd(hA);return hC==null?he(hA,hB(hA)):hC.$0;}function hg(hA){var hB;hB=null;return f2.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function hh(hA,hB){f2.set_Item(hA,hB);return hB;}function hi(hA,hB){var hC;hC=hg(hA);return hC==null?hh(hA,hB(hA)):hC.$0;}function hj(hA){var hB;hB=null;return f5.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function hk(hA,hB){f5.set_Item(hA,hB);return hB;}function hl(hA,hB){var hC;hC=hj(hA);return hC==null?hk(hA,hB(hA)):hC.$0;}function hm(hA){var hB;hB=null;return f8.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function hn(hA,hB){f8.set_Item(hA,hB);return hB;}function ho(hA,hB){var hC;hC=hm(hA);return hC==null?hn(hA,hB(hA)):hC.$0;}function hp(hA){var hB;hB=null;return f$.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function hq(hA,hB){f$.set_Item(hA,hB);return hB;}function hr(hA,hB){var hC;hC=hp(hA);return hC==null?hq(hA,hB(hA)):hC.$0;}function hs(hA){var hB;hB=null;return gc.TryGetValue(hA,{get:function(){return hB;},set:function(hC){hB=hC;}})?{$:1,$0:hB}:null;}function ht(hA,hB){gc.set_Item(hA,hB);return hB;}function hu(hA,hB){var hC;hC=hs(hA);return hC==null?ht(hA,hB(hA)):hC.$0;}function hv(hA){return bG.snippetsLM().TryFindByKey(hA);}function hw(hA){return bG.snippetsLM().TryFindByKey(hA);}function hx(hA){return bn.parseEntries("lytTarget",hA);}function hy(hA){return hA.$==1?{$:1,$0:hA.$0}:null;}function hz(hA){return bT.concat("\n",hA);}bX.rtn=function(hA){return[hA];};bX.state=new s.New();bX.result=new v.New();bX.result$1=u.result();bX.resultP=new x.New();bX.depend=new z.New();bX.rtn$1=y.rtn;bX.depend$1=y.depend();bX.resultM=new C.New();bX.asyncResultM=new G.New();bX.unindentStr=function(hA){return gn(J.unindent(hA));};bX.skipLastLine=(dX=function(hA){return gp(go(hA));},function(hA){return gq(dX(hA));});bX.parseDateO2=(dY=K.tryParseWith(function(hA){var hB,hC;hB=0;return[(hC=df.TryParse(hA),hC!=null&&hC.$==1&&(hB=hC.$0,true)),hB];}),function(hA){return dY(gr(hA));});bX.parseDateO=K.tryParseWith(function(hA){var hB,hC;hB=0;return[(hC=df.TryParse(hA),hC!=null&&hC.$==1&&(hB=hC.$0,true)),hB];});bX.parseIntO=K.tryParseWith(function(hA){var hB;hB=0;return[ca.TryParseInt32(hA,{get:function(){return hB;},set:function(hC){hB=hC;}}),hB];});bX.parseInt64O=K.tryParseWith(function(hA){var hB;hB=0;return[ca.TryParseInt64(hA,{get:function(){return hB;},set:function(hC){hB=hC;}}),hB];});bX.parseSingleO=K.tryParseWith(function(hA){var hB,hC;hB=0;return[(hC=a.Number(hA),a.isNaN(hC)?false:(hB=hC,true)),hB];});bX.parseDoubleO=K.tryParseWith(function(hA){var hB,hC;hB=0;return[(hC=a.Number(hA),a.isNaN(hC)?false:(hB=hC,true)),hB];});bX.parseGuidO=K.tryParseWith(function(hA){var hB;hB=null;return[bK.TryParse(hA,{get:function(){return hB;},set:function(hC){hB=hC;}}),hB];});bX["|Date|_|"]=K.parseDateO();bX["|Int|_|"]=K.parseIntO();bX["|Int64|_|"]=K.parseInt64O();bX["|Single|_|"]=K.parseSingleO();bX["|Double|_|"]=K.parseDoubleO();bX["|Guid|_|"]=K.parseGuidO();bX.serString=[L.toJsonString,function(hA){return hA.tryString();}];bX.serFloat=[function(hA){return(function(hB){return function(hC){return hB(bM.prettyPrint(hC));};}(a.id))(hA);},function(hA){return hA.tryFloat();}];bX.serInt=[function(hA){return(function(hB){return function(hC){return hB(bM.prettyPrint(hC));};}(a.id))(hA);},function(hA){var hB;hB=hA.tryInt();return hB==null?null:{$:1,$0:bL.toInt(hB.$0)};}];bX.serInt64=[a.String,function(hA){return hA.tryInt();}];bX.serBool=[function(hA){return(function(hB){return function(hC){return hB(bM.prettyPrint(hC));};}(a.id))(hA);},function(hA){return hA.tryBool();}];bX.serDate=[function(hA){return a.String(a.id(hA));},function(hA){var hB;hB=hA.tryInt();return hB==null?null:{$:1,$0:hB.$0};}];bX.serTypedRegisters=new bR.New$5();bX.serGuid=(dZ=L.serString(),L.mapO(a.String,K.parseGuidO(),dZ[0],dZ[1]));bX.defaultSnippet=N.New(f.Tag$4("00000000-0000-0000-0000-000000000000"),"","",null,new b2.New$1(null),[],(new dS(0)).getTime());bX.serSnippetId=(d0="SnippetId",[function(hA){var hB;hB=a.String(f.Untag$4(hA));return(((dR.Curried3(function(hC,hD,hE){return hC("{"+bM.prettyPrint(hD)+" :"+bM.prettyPrint(hE)+"}");}))(a.id))(d0))(hB);},function(hA){var hB,hC,hD,hE;hB=(hC=(hD=hA.tryField(d0),hD==null?null:hD.$0.tryString()),(hE=K.parseGuidO(),hC==null?null:hE(hC.$0)));return hB==null?null:{$:1,$0:f.Tag$4(hB.$0)};}]);bX.serSnippet=(d1=[(d2=P.serSnippetId(),L.serField("snpId",function(hA){return hA.snpId;},function(hA,hB){return N.New(hA,hB.snpName,hB.snpContent,hB.snpParentIdO,hB.snpPredIds,hB.snpProperties,hB.snpModified);},d2[0],d2[1])),(d3=L.serString(),L.serField("snpName",function(hA){return hA.snpName;},function(hA,hB){return N.New(hB.snpId,hA,hB.snpContent,hB.snpParentIdO,hB.snpPredIds,hB.snpProperties,hB.snpModified);},d3[0],d3[1])),(d4=L.serString(),L.serField("snpContent",function(hA){return hA.snpContent;},function(hA,hB){return N.New(hB.snpId,hB.snpName,hA,hB.snpParentIdO,hB.snpPredIds,hB.snpProperties,hB.snpModified);},d4[0],d4[1])),(d5=(d6=P.serSnippetId(),L.serOpt(d6[0],d6[1])),L.serField("snpParentIdO",function(hA){return hA.snpParentIdO;},function(hA,hB){return N.New(hB.snpId,hB.snpName,hB.snpContent,hA,hB.snpPredIds,hB.snpProperties,hB.snpModified);},d5[0],d5[1])),(d7=(d8=P.serSnippetId(),L.serSet(d8[0],d8[1])),L.serField("snpPredIds",function(hA){return hA.snpPredIds;},function(hA,hB){return N.New(hB.snpId,hB.snpName,hB.snpContent,hB.snpParentIdO,hA,hB.snpProperties,hB.snpModified);},d7[0],d7[1])),(d9=(d_=L.serDup(L.serString(),L.serString()),L.serArr(d_[0],d_[1])),L.serField("snpProperties",function(hA){return hA.snpProperties;},function(hA,hB){return N.New(hB.snpId,hB.snpName,hB.snpContent,hB.snpParentIdO,hB.snpPredIds,hA,hB.snpModified);},d9[0],d9[1])),(d$=L.serInt(),L.serFieldO("snpGeneration",function(){return null;},function(hA,hB){return hA!=null&&hA.$==1?N.New(hB.snpId,hB.snpName,hB.snpContent,hB.snpParentIdO,hB.snpPredIds,hB.snpProperties,(new dS(0)).getTime()+hA.$0*3600000):hB;},d$[0],d$[1])),(ea=L.serDate(),L.serField("snpModified",function(hA){return hA.snpModified;},function(hA,hB){return N.New(hB.snpId,hB.snpName,hB.snpContent,hB.snpParentIdO,hB.snpPredIds,hB.snpProperties,hA);},ea[0],ea[1]))],(eb=O.New("","",null),[function(hA){var hB;function hC(hD,hE,hF){var hG,hH;hG=hE(hA);hH=((dR.Curried3(function(hI,hJ,hK){return hI(bM.prettyPrint(hJ)+": "+bM.toSafe(hK));}))(a.id))(hD);return hG==null?null:{$:1,$0:hH(hG.$0)};}hB=bT.concat(", ",bS.choose(function(hD){return hC(hD[0],hD[1],hD[2]);},d1));return(function(hD){return function(hE){return hD("{"+bM.toSafe(hE)+"}");};}(a.id))(hB);},function(hA){return{$:1,$0:bS.fold(function(hB,hC){var hD;hD=hA.tryField(hC[0]);return(hC[2](hB))(hD);},eb,d1)};}]));bX.serModel=(ec=[(ed=(ee=P.serSnippet(),L.serArr(ee[0],ee[1])),L.serField("snippets",function(hA){return hA.snippets;},function(hA,hB){return Q.New(hA,hB.modified,hB.collapsed);},ed[0],ed[1])),(ef=L.serInt(),L.serFieldO("generation",function(){return null;},function(hA,hB){return hA!=null&&hA.$==1?Q.New(hB.snippets,(new dS(0)).getTime()+hA.$0*3600000,hB.collapsed):hB;},ef[0],ef[1])),(eg=L.serDate(),L.serField("modified",function(hA){return hA.modified;},function(hA,hB){return Q.New(hB.snippets,hA,hB.collapsed);},eg[0],eg[1])),(eh=(ei=P.serSnippetId(),L.serSet(ei[0],ei[1])),L.serField("collapsed",function(hA){return hA.collapsed;},function(hA,hB){return Q.New(hB.snippets,hB.modified,hA);},eh[0],eh[1]))],(ej=Q.New([],(new dS(0)).getTime(),new b2.New$1(null)),[function(hA){var hB;function hC(hD,hE,hF){var hG,hH;hG=hE(hA);hH=((dR.Curried3(function(hI,hJ,hK){return hI(bM.prettyPrint(hJ)+": "+bM.toSafe(hK));}))(a.id))(hD);return hG==null?null:{$:1,$0:hH(hG.$0)};}hB=bT.concat(", ",bS.choose(function(hD){return hC(hD[0],hD[1],hD[2]);},ec));return(function(hD){return function(hE){return hD("{"+bM.toSafe(hE)+"}");};}(a.id))(hB);},function(hA){return{$:1,$0:bS.fold(function(hB,hC){var hD;hD=hA.tryField(hC[0]);return(hC[2](hB))(hD);},ej,ec)};}]));bX.counter=1;bX.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bX.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";bX.observers=bY.Empty;bX.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";bX.init=cB.Create(function(){var hA;hA=new U.New();S.defineWebComponent("wcomp-tabstrip",U.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});bX.layoutHorizontal=dR.Curried(function(hA,hB,hC,hD,hE){return b$.get_Empty();},5);bX.layoutVertical=dR.Curried(function(hA,hB,hC,hD,hE){return b$.get_Empty();},5);bX.loader=(ek=null,cL.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cL.Bind(cL.FromContinuations(function(hA,hB){return self.require(["vs/editor/editor.main"],hA,hB);}),function(){return cL.Return(null);});}));bX.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"  type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 150px) 150px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"100\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <div>Docs:</div>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Views:</div>\r\n                                                                <div ws-hole=\"Views\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValue\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <span class=\"input-group-addon\">${Value}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Queries:</div>\r\n                                                                <div ws-hole=\"Queries\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Vars:</div>\r\n                                                                <div ws-hole=\"Vars\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValueInput\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <textarea class=\"form-control\" id=\"\" placeholder=\"Value...\" ws-var=\"Value\" spellcheck=\"false\">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                        <div style=\"\r\n                                            overflow: hidden;\r\n                                            display: grid;\r\n                                            grid-template-columns: 100%;\r\n                                            grid-template-rows: repeat(15, calc(100% / 15));\r\n                                            bxackground-color: #eee;\r\n                                            box-sizing: border-box;\r\n                                            padding : 5px;\r\n                                            grid-gap: 5px;\r\n                                            margin-right: 21px;\r\n                                       \"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\"         ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\"          >${Name}</button>\r\n                                            <button ws-template=\"ActionDisabled\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" disabled >${Name}</button>\r\n                                        </div>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        xtextarea {\r\n                           resize : none;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";bX.plugIns=new cp.New$1(function(hA){return hA.plgName;});bX.mainDocV=cb.Create$1("AppFramework.AppFwkClient");bX.TemplateFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\website\\AppFramework.html";bX.selectionPlugInO=cb.Create$1({$:1,$0:f.Tag$3("AppFramework")});bX.currentPlugInW=(el=ba.selectionPlugInO().get_View(),b9.Map2(function(hA,hB){return(gs(hA))(hB);},ba.plugIns().v,el));bX.currentPlugInV=new c5.New(ba.currentPlugInW(),function(hA){ba.plugIns().Append(hA);});bX.AppFwkClient=cB.Create(function(){var hA,hB,hC,hD,hE,hF,hG,hH,hI;return(hA=(hB=ba.renderQueries(),(hC=ba.renderActions(),(hD=ba.renderDocs(),(hE=ba.renderViews(),(hF=ba.renderVars(),(hG=ba.renderPlugIns(),cu.Make().WithHole({$:0,$0:"plugins",$1:hG})).WithHole({$:2,$0:"pluginname",$1:b9.Map(function(hJ){return f.Untag$3(hJ.plgName);},ba.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:hF})).WithHole({$:0,$0:"views",$1:hE})).WithHole({$:0,$0:"docs",$1:hD})).WithHole({$:0,$0:"actions",$1:hC})).WithHole({$:0,$0:"queries",$1:hB})),(hH=cv.CompleteHoles(hA.k,hA.h,[]),(hI=new ct.New(hH[1],cw.appfwkclient(hH[0])),(hA.i=hI,hI)))).get_Doc();});bX.plugin=new bh.New();bX.a11V=cb.Create$1(11);bX.mainX={$:0,$0:ba.a11V().get_View()};bX.baseView=ba.mainDocV().get_View();bX.textAtt=function(hA){return function(){return hA("textAtt not implemented");};}(bL.FailWith);bX.getDocFromReferenceD=y.dependByName("getDocFromReference",bl.getDocFromReference,a.id);bX.getTextActViewFromReferenceD=y.dependByName("getTextActViewFromReference",bl.getTextActViewFromReference,a.id);bX.getDocFromTextTypesD=(em=y.depend(),em.Delay(function(){return em.Bind(bl.getDocFromReferenceD(),function(hA){var hB;function hC(hE){return hE.$==1?hA(hE.$0):b$.TextNode(hE.$0);}function hD(hE){var hF;return(hE.$==1?hE.$1.$==0?(hF=hE.$0,true):(hF=hE,false):(hF=hE,false))?hF:b$.Concat(hF);}return em.Return((hB=function(hE){return bU.map(hC,hE);},function(hE){return hD(hB(hE));}));});}));bX.extractDocD=(en=y.depend(),en.Delay(function(){return en.Bind(bl.getDocFromTextTypesD(),function(hA){return en.Return(function(hB){return hA(bl.getTextData(hB));});});}));bX.getTextValFromSeqD=(eo=y.depend(),eo.Delay(function(){return eo.Bind(bl.getTextActViewFromReferenceD(),function(hA){var hB,hC,hD,hE;function hF(hJ){return hJ.$==1?b9.Map(ba.choiceToString,hA(hJ.$0)):b9.Const(hJ.$0);}function hG(hJ){return bT.concat("",hJ);}function hH(hJ){return{$:0,$0:hJ};}function hI(hJ){return{$:0,$0:hJ};}return eo.Return((hB=(hC=function(hJ){return cF.traverseListApp(hF,hJ);},(hD=(hE=b9.Const(function(hJ){return hH(hG(hJ));}),function(hJ){return b9.Apply(hE,hJ);}),function(hJ){return hD(hC(hJ));})),function(hJ){return hI(hB(hJ));}));});}));bX.getTextValFromTextTypesD=(ep=y.depend(),ep.Delay(function(){return ep.Bind(bl.getTextActViewFromReferenceD(),function(hA){return ep.Bind(bl.getTextValFromSeqD(),function(hB){return ep.Return(function(hC){var hD;switch(hC.$==1?hC.$0.$==1?hC.$1.$==0?(hD=hC.$0.$0,1):(hD=hC,2):hC.$1.$==0?(hD=hC.$0.$0,0):(hD=hC,2):(hD=hC,2)){case 0:return{$:1,$0:{$:0,$0:hD}};case 1:return{$:0,$0:hA(hD)};case 2:return hB(hD);}});});});}));bX.getTextValD=A.op_GreaterMultiplyGreater(bl.getTextData,bl.getTextValFromTextTypesD());bX.extractAtsD=(eq=y.depend(),eq.Delay(function(){return eq.Bind(bl.getTextValD(),function(hA){return eq.Return(function(hB){return bS.map(function(hC){var hD,hE,hF,hG;hD=bT.SplitChars(hC,[":"],0);return!bP.Equals(hD,null)&&hD.length===2?(hE=bN.get(hD,1),ba.valToStyle(bN.get(hD,0),hA(hE))):(hF=bN.map(bT.Trim,bT.SplitChars(hC,["="],0)),!bP.Equals(hF,null)&&hF.length===2?(hG=bN.get(hF,1),ba.valToAttr(bN.get(hF,0),hA(hG))):(function(hH){return function(hI){return hH("single reference attribute not implemented "+bM.toSafe(hI));};}(bL.FailWith))(hC));},bS.filter(function(hC){return""!==hC;},bS.map(bT.Trim,bT.SplitChars(hB,[";"],0))));});});}));bX.extractTextD=(er=y.depend(),er.Delay(function(){return er.Bind(bl.getTextValD(),function(hA){return er.Return(function(hB){return bk.toView(bk.map(ba.choiceToString,hA(hB)));});});}));bX.currentPlugInNameDef=f.Tag$3("NewLYx");bX.currentPlugInNameD=y.dependByName("currentPlugInName",ba.currentPlugInNameDef(),a.id);bX.getDocD=(es=y.depend(),es.Delay(function(){return es.Bind(ba.currentPlugInNameD(),function(hA){return es.Return(function(hB){var hC,hD,hE;hC=(ba.splitName(hA))(hB);hD=hC[0];hE=hC[1];return b$.BindView(function(hF){var hG;function hH(){return(function(hI){return function(hJ){return hI("Reference not found @{"+bM.toSafe(hJ)+"}");};}(a.id))(hB);}hG=hF==null?null:{$:1,$0:ba.getLazyDoc(hF.$0)};return hG==null?b$.TextView(b9.Map(function(hI){return hI==null?hH():hI.$0;},ba.tryGetWoWW(hD,hE))):hG.$0;},ba.tryGetDocW(hD,hE));});});}));bX.getTextActViewD=(et=y.depend(),et.Delay(function(){return et.Bind(ba.currentPlugInNameD(),function(hA){return et.Return(function(hB){var hC,hD,hE;hC=(ba.splitName(hA))(hB);hD=hC[0];hE=hC[1];return b9.Bind(function(hF){function hG(){return(function(hH){return function(hI){return hH("Text Reference not found @{"+bM.toSafe(hI)+"}");};}(a.id))(hB);}return hF==null?b9.Map(function(hH){return{$:0,$0:hH};},b9.Map(function(hH){return hH==null?hG():hH.$0;},ba.tryGetWoWW(hD,hE))):b9.Const({$:1,$0:hF.$0});},ba.tryGetActW(hD,hE));});});}));bX.extractTextD$1=bl.extractTextD();bX.extractDocD$1=bl.extractDocD();bX.extractAtsD$1=bl.extractAtsD();bX.extractAttD=(eu=A.depend(),eu.Delay(function(){return eu.Bind(ba.extractAtsD(),function(hA){return eu.Return(function(hB){return cC.Concat(hA(hB));});});}));bX.defPlugInName=f.Tag$3("AppFramework");bX.inputLabel=ba.depWithExtracts(function(hA,hB,hC){return gt.apply(null,[hA,hB,hC]);});bX.input=ba.depWithExtracts(function(hA){return function(hB){return gu(hA,hB);};});bX.textArea=ba.depWithExtracts(function(hA){return function(hB){return gv(hA,hB);};});bX.trigAct=ba.depWithExtracts(function(hA,hB,hC){return function(hD){return function(hE){var hF,hG;return b$.TextView(b9.Map(function(){var hH,hI;hH=(hI=ba.getParmRef(hE),ba.tryGetAct(hI[0],hI[1]));(n.iter(function(hJ){ba.callFunction(null,null,hJ.actFunction);}))(hH);return"";},(hF=hC(hD),(hG=[cb.Create$1(null)],(b9.Sink(function(hH){if(!bP.Equals(hG[0].Get(),hH))hG[0].Set(hH);},hF),hG[0].get_View())))));};};});bX.select=ba.depWithExtracts(function(hA,hB,hC){return dR.Curried3(function(hD,hE,hF){function hG(hH){var hI,hJ;hI=b9.Map(function(hK){return bU.ofSeq(bT.SplitChars(hK,[";"],0));},hC(hF));hJ=new c5.New(b9.Map2(function(hK,hL){return bS.contains(bT.Trim(hK),hL)?{$:1,$0:bT.Trim(hK)}:null;},hH.get_View(),hI),function(hK){var hL;if(hK!=null&&hK.$==1){hL=hK.$0;b9.Get(function(hM){if(bS.contains(hL,hM))hH.Set(hL);},hI);}else hH.Set("");});return b$.SelectDynOptional(hA(hD),hE,a.id,hI,hJ);}return function(hH){return ba.docWithVar(hG,hH);};});});ev=(ew=ba.plugin(),ew.AddAct(ew.AddDoc(ew.AddVar(ew.Name(ew.Yield(),"AppFramework"),"mainDocV",ba.mainDocV()),"AppFwkClient",ba.AppFwkClient()),"Hello",function(){self.alert("Hello!");}));ba.plugIns().Append(ev);ex=(ey=ba.plugin(),ey.AddQry(ey.AddAct(ey.AddAct2(ey.AddDoc3(ey.AddDoc3(ey.AddDoc4(ey.AddDoc2(ey.AddDoc2(ey.AddDoc2(ey.Name(ey.Yield(),"AF"),"TrigAction",ba.trigAct(),"Trigger","Action"),"Input",ba.input(),"Attrs","Var"),"TextArea",ba.textArea(),"Attrs","Var"),"Select",ba.select(),"Attrs","None","Vals","Var"),"InputFile",dR.Curried3(ba.inputFile),"Attrs","Label","Action"),"InputLabel",ba.inputLabel(),"Attrs","Label","Var"),"SetVar",function(hA){return function(hB){return ba.setVar(hA,hB);};},"Var","Value"),"Hello",function(){self.alert("Hello!");}),"getDocNames",function(){return bN.ofSeq(bS.collect(function(hA){return bS.map(function(hB){return f.Untag$3(hA.plgName)+"."+f.Untag$3(hB.docName);},hA.plgDocs);},(ba.plugIns())["var"].Get()));}));ba.plugIns().Append(ex);bX.getMainDoc=cB.Create(function(){V.init(dR.Curried(ba.horizontal,5),dR.Curried(ba.vertical,5));T.init().f();return ba.mainDoc();});bX.splitName=ba.splitName;bX.currentViewTriggger=ba.mainDocV().get_View();bX.createSplitterM=(ez=(eA=new bR.New$5(),[[gw,function(hA){return function(hB){return gy(hA,hB);};}],function(){eA.Clear();}]),(eB=ez[0][1],[function(hA){return(eB(hA))(function(hB){return bn.createSplitter(hB[0],hB[1],hB[2],hB[3],hB[4]);});},ez[1]]))[0];bX.createButtonM=(eC=(eD=new bR.New$5(),[[gz,function(hA){return function(hB){return gB(hA,hB);};}],function(){eD.Clear();}]),(eE=eC[0][1],[function(hA){return(eE(hA))(function(hB){return bn.createButton(hB[0],hB[1],hB[2],hB[3],hB[4]);});},eC[1]]))[0];bX.createInputM=(eF=(eG=new bR.New$5(),[[gC,function(hA){return function(hB){return gE(hA,hB);};}],function(){eG.Clear();}]),(eH=eF[0][1],[function(hA){return(eH(hA))(function(hB){return bn.createInput(hB[0],hB[1],hB[2],hB[3]);});},eF[1]]))[0];bX.createTextAreaM=(eI=(eJ=new bR.New$5(),[[gF,function(hA){return function(hB){return gH(hA,hB);};}],function(){eJ.Clear();}]),(eK=eI[0][1],[function(hA){return(eK(hA))(function(hB){return bn.createTextArea(hB[0],hB[1],hB[2],hB[3]);});},eI[1]]))[0];bX.createElementM=(eL=(eM=new bR.New$5(),[[gI,function(hA){return function(hB){return gK(hA,hB);};}],function(){eM.Clear();}]),(eN=eL[0][1],[function(hA){return(eN(hA))(function(hB){return bn.createElement(hB[0],hB[1],hB[2],hB[3],hB[4]);});},eL[1]]))[0];bX.createDocM=(eO=(eP=new bR.New$5(),[[gL,function(hA){return function(hB){return gN(hA,hB);};}],function(){eP.Clear();}]),(eQ=eO[0][1],[function(hA){return(eQ(hA))(function(hB){return bn.createDoc(hB[0],hB[1],hB[2],hB[3]);});},eO[1]]))[0];bX.createTemplateM=(eR=(eS=new bR.New$5(),[[gO,function(hA){return function(hB){return gQ(hA,hB);};}],function(){eS.Clear();}]),(eT=eR[0][1],[function(hA){return(eT(hA))(function(hB){return bn.createTemplate(hB[0],hB[1],hB[2],hB[3],hB[4]);});},eR[1]]))[0];bX.createConcatM=(eU=(eV=new bR.New$5(),[[gR,function(hA){return function(hB){return gT(hA,hB);};}],function(){eV.Clear();}]),(eW=eU[0][1],[function(hA){return(eW(hA))(function(hB){return bn.createConcat(hB[0],hB[1],hB[2]);});},eU[1]]))[0];bX.createVarM=(eX=(eY=new bR.New$5(),[[gU,function(hA){return function(hB){return gW(hA,hB);};}],function(){eY.Clear();}]),(eZ=eX[0][1],[function(hA){return(eZ(hA))(function(hB){return bn.createVar(hB[0],hB[1],hB[2]);});},eX[1]]))[0];bX.createViewM=(e0=(e1=new bR.New$5(),[[gX,function(hA){return function(hB){return gZ(hA,hB);};}],function(){e1.Clear();}]),(e2=e0[0][1],[function(hA){return(e2(hA))(function(hB){return bn.createView(hB[0],hB[1],hB[2]);});},e0[1]]))[0];bX.createActionM=(e3=(e4=new bR.New$5(),[[g0,function(hA){return function(hB){return g2(hA,hB);};}],function(){e4.Clear();}]),(e5=e3[0][1],[function(hA){return(e5(hA))(function(hB){return bn.createAction(hB[0],hB[1],hB[2],hB[3]);});},e3[1]]))[0];e6=ba.tryGetPlugIn(ba.defPlugInName());(n.iter(function(hA){hA.plgActions.Append(ba.newActF(f.Tag$3("AddLayout"),{$:2,$0:function(hB){return function(hC){return bn.addNewLayout(hB,hC);};},$1:"[Name]",$2:"[Layout]"}));}))(e6);bX.htmlD=y.dependByName("AppFrameworkTemplate.html",cK.html(),a.id);bX.startWithHtmlD=(e7=y.depend(),e7.Delay(function(){return e7.Bind(bt.htmlD(),function(hA){return e7.Return(function(){var hB,hC,hD;hB=self.document.createElement("div");self.document.body.appendChild(hB);hB.outerHTML=hA;hC=ba.getMainDoc().f();hD=self.document.body;c0.LoadLocalTemplates("");b$.RunAppend(hD,hC);});});}));bX.unselectorV=new c5.New(b9.Const(null),a.ignore);bX.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";bX.aV=cb.Create$1(4);bX.pa=bC.aV().get_View();bX.pb=6.2;bX.currentPlugInNameDef$1=f.Tag$3("NewLYx");bX.currentPlugInNameD$1=y.dependByName("currentPlugInName",bC.currentPlugInNameDef(),a.id);bX.name=cb.Create$1("World");bX.enterName=(e8=ba.op_Dereference(bC.checkName),(e9={$:0,$0:bC.name().get_View()},bj.New(A.op_BarGreaterGreater(e8.r,function(hA){return bi.New(hA,e9);}))));bX.now=(e_=ba.op_Dereference(function(){var hA;hA=new dS(dS.now());return hA.getFullYear()+"-"+("0"+(hA.getMonth()+1)).slice(-2)+"-"+("0"+hA.getDate()).slice(-2)+" "+("0"+hA.getHours()).slice(-2)+":"+("0"+hA.getMinutes()).slice(-2)+":"+("0"+hA.getSeconds()).slice(-2)+":"+("00"+hA.getMilliseconds()).slice(-3);}),(e$={$:0,$0:bC.name().get_View()},bj.New(A.op_BarGreaterGreater(e_.r,function(hA){return bi.New(hA,e$);}))));bX.sayHello=(fa=(fb=(fc=ba.op_Dereference(b$.Concat),ba.bindWrap(function(hA){var hB;hB={$:1,$0:[hA("Hello @{name}!")]};return bj.New(A.op_BarGreaterGreater(fc.r,function(hC){return bi.New(hC,hB);}));},ba.extractDocD())),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(bk.textDoc(hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)}),hB.p));},fb);},bC.enterName().r)),(fd=(fe=ba.op_Dereference(b$.Concat),ba.bindWrap(function(hA){var hB;hB={$:1,$0:[hA("How are you?")]};return bj.New(A.op_BarGreaterGreater(fe.r,function(hC){return bi.New(hC,hB);}));},ba.extractDocD())),(ff=(fg=ba.op_Dereference(b$.Concat),ba.bindWrap(function(hA){var hB;hB={$:1,$0:[ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;})]};return bj.New(A.op_BarGreaterGreater(fg.r,function(hC){return bi.New(hC,hB);}));},fa.r)),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;}),hB.p));},ff);},fd.r))));bX.aString=cb.Lens(bC.aV(),a.String,function(hA,hB){return bL.toInt(a.Number(hB));});bX.main0=(fh=(fi=ba.op_Dereference(function(hA){return function(hB){return bC.concat(hA,hB);};}),(fj={$:0,$0:bC.aV().get_View()},bj.New(A.op_BarGreaterGreater(fi.r,function(hA){return bi.New(hA,fj);})))),(fk={$:1,$0:3.2},bj.New(A.op_BarGreaterGreater(fh.r,function(hA){return bi.New(hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)},fk);}))));bX.main1=(fl=(fm=ba.op_Dereference((dR.Curried3(function(hA,hB,hC){return hA("result = "+bM.toSafe(hB)+" "+bM.toSafe(hC));}))(a.id)),ba.bindWrap(function(hA){var hB;hB=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return bj.New(A.op_BarGreaterGreater(fm.r,function(hC){return bi.New(hC,hB);}));},bC.main0().r)),(fn={$:1,$0:"main0"},bj.New(A.op_BarGreaterGreater(fl.r,function(hA){return bi.New(hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)},fn);}))));bX.main=(fo=(fp=(fq=(fr=(fs=(ft=(fu=(fv=(fw=(fx=ba.op_Dereference((dR.Curried3(b$.Element))("h3")),ba.bindWrap(function(hA){var hB;hB={$:1,$0:hA("color:@{name}; background:red; click=@{AppFramework.Hello}")};return bj.New(A.op_BarGreaterGreater(fx.r,function(hC){return bi.New(hC,hB);}));},ba.extractAtsD())),ba.bindWrap(function(hA){var hB;hB={$:1,$0:[hA("MAIN:")]};return bj.New(A.op_BarGreaterGreater(fw.r,function(hC){return bi.New(hC.f.$==0?hC.p.$==1?{$:0,$0:b9.Apply(hC.f.$0,b9.Const(hC.p.$0))}:{$:0,$0:b9.Apply(hC.f.$0,hC.p.$0)}:hC.p.$==0?{$:0,$0:b9.Apply(b9.Const(hC.f.$0),hC.p.$0)}:{$:1,$0:hC.f.$0(hC.p.$0)},hB);}));},ba.extractDocD())),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(bk.textDoc(hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)}),hB.p));},fv);},bC.main1().r)),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(bk.textDoc(hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)}),hB.p));},fu);},bC.main1().r)),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(hA(":"),hB.p));},ft);},ba.extractDocD())),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;}),hB.p));},fs);},bC.sayHello().r)),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(hA(":"),hB.p));},fr);},ba.extractDocD())),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(hA(" Ms >> "),hB.p));},fq);},ba.extractDocD())),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;}),hB.p));},fp);},bC.sayHello().r)),ba.bindWrap(function(hA){return ba.unwrapBindWrap(function(hB){return bi.New(hB.f,bk.addDoc(hA(" <<"),hB.p));},fo);},ba.extractDocD()));bX.main2=ba.makeAViewDoc(function(){return b$.Element("h4",[cA.Dynamic("style",b9.Map(function(hA){return"color:"+hA;},bC.name().get_View()))],[b$.TextNode("MAIN2:"),b$.TextView(bC.name().get_View())]);});bX.appFwk=(fy=(fz=ba.op_Dereference((dR.Curried3(b$.Element))("div")),ba.bindWrap(function(hA){var hB;hB={$:1,$0:hA("color:@{name}")};return bj.New(A.op_BarGreaterGreater(fz.r,function(hC){return bi.New(hC,hB);}));},ba.extractAtsD())),ba.bindWrap(function(hA){var hB;hB={$:1,$0:[hA("@{AppFramework.AppFwkClient}")]};return bj.New(A.op_BarGreaterGreater(fy.r,function(hC){return bi.New(hC.f.$==0?hC.p.$==1?{$:0,$0:b9.Apply(hC.f.$0,b9.Const(hC.p.$0))}:{$:0,$0:b9.Apply(hC.f.$0,hC.p.$0)}:hC.p.$==0?{$:0,$0:b9.Apply(b9.Const(hC.f.$0),hC.p.$0)}:{$:1,$0:hC.f.$0(hC.p.$0)},hB);}));},ba.extractDocD()));bX.split=(fA=(fB=ba.op_Dereference(dR.Curried(bn.variableSplitter,2,[false,0,50,100])),ba.bindWrap(function(hA){var hB;hB={$:1,$0:ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;})};return bj.New(A.op_BarGreaterGreater(fB.r,function(hC){return bi.New(hC,hB);}));},bC.appFwk().r)),ba.bindWrap(function(hA){var hB;hB={$:1,$0:ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;})};return bj.New(A.op_BarGreaterGreater(fA.r,function(hC){return bi.New(hC.f.$==0?hC.p.$==1?{$:0,$0:b9.Apply(hC.f.$0,b9.Const(hC.p.$0))}:{$:0,$0:b9.Apply(hC.f.$0,hC.p.$0)}:hC.p.$==0?{$:0,$0:b9.Apply(b9.Const(hC.f.$0),hC.p.$0)}:{$:1,$0:hC.f.$0(hC.p.$0)},hB);}));},bC.main().r));bX.split2=(fC=(fD=ba.op_Dereference(dR.Curried(bn.variableSplitter,2,[false,0,50,100])),ba.bindWrap(function(hA){var hB;hB={$:1,$0:ba.makeAViewDoc(function(){var hC;hC=hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)};return hC.$==0?b$.BindView(a.id,hC.$0):hC.$0;})};return bj.New(A.op_BarGreaterGreater(fD.r,function(hC){return bi.New(hC,hB);}));},bC.appFwk().r)),(fE={$:1,$0:bC.main2()},bj.New(A.op_BarGreaterGreater(fC.r,function(hA){return bi.New(hA.f.$==0?hA.p.$==1?{$:0,$0:b9.Apply(hA.f.$0,b9.Const(hA.p.$0))}:{$:0,$0:b9.Apply(hA.f.$0,hA.p.$0)}:hA.p.$==0?{$:0,$0:b9.Apply(b9.Const(hA.f.$0),hA.p.$0)}:{$:1,$0:hA.f.$0(hA.p.$0)},fE);}))));bX.pName=f.Tag$3("NewLY");ba.addPlugIn((fF=ba.plugin(),fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddVar(fF.AddVar(fF.Name(fF.Yield(),f.Untag$3(bC.pName())),"name",bC.name()),"a",bC.aString()),"split",cB.Create(function(){var hA;hA=bC.split();return bC.callDocPFn(bC.pName(),hA);})),"split2",cB.Create(function(){var hA;hA=bC.split2();return bC.callDocPFn(bC.pName(),hA);})),"main",cB.Create(function(){var hA;hA=bC.main();return bC.callDocPFn(bC.pName(),hA);})),"main2",cB.Create(bC.main2)),"sayHello",cB.Create(function(){var hA;hA=bC.sayHello();return bC.callDocPFn(bC.pName(),hA);})),"sayHello2",cB.Create(function(){var hA;hA=bC.sayHello();return bC.callDocPFn(bC.pName(),hA);}))));bX.attrValToAttrD=(fG=y.depend(),fG.Delay(function(){return fG.Bind(bl.getTextValFromTextTypesD(),function(hA){return fG.Bind(bl.getTextValD(),function(){function hB(hD){var hE,hF,hG;return(hD.$==2?(hE=[hD.$0,bC.ActRVs(hD.$1)],false):hD.$==1?(hE=[hD.$0,hD.$1],false):true)?(hF=hD.$0,[hD.$1,function(hH){return ba.valToStyle(hF,hH);}]):(hG=hE[0],[hE[1],function(hH){return ba.valToAttr(hG,hH);}]);}function hC(hD,hE){return hE(hA(bU.map(bC.textValToTextType,hD)));}return fG.Return(function(hD){return hC.apply(null,hB(hD));});});});}));bX.nodeRefToDocD=(fH=y.depend(),fH.Delay(function(){return fH.Bind(bl.getDocFromTextTypesD(),function(hA){return fH.Return(function(hB){var hC;return(hB.$==1?(hC=hB.$0.$0,false):hB.$==2?(hC=hB.$0.$0,false):hB.$==3?(hC=hB.$0.$0,false):true)?hA(bU.map(bC.textValToTextType,hB.$0)):hA(bU.ofArray([bC.itemRefToTextType(hC)]));});});}));bX.varRefToVarD=(fI=y.depend(),fI.Delay(function(){return fI.Bind(bC.currentPlugInNameD(),function(hA){return fI.Return(function(hB){var hC,hD,hE,hF;hC=bC.itemRefToString(hB.$0);hD=(hE=(hF=(ba.splitName(hA))(hC),ba.tryGetVar(hF[0],hF[1])),hE==null?null:{$:1,$0:hE.$0.varVar});return hD==null?new c5.New(b9.Const((function(hG){return function(hH){return hG("Could not find var "+bM.toSafe(hH));};}(a.id))(hC)),a.ignore):hD.$0;});});}));bX.getParamD=(fJ=y.depend(),fJ.Delay(function(){return fJ.Bind(bC.currentPlugInNameD(),function(hA){return fJ.Bind(bl.getTextValFromSeqD(),function(hB){return fJ.Return(function(hC){var hD,hE,hF,hG,hH,hI,hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU,hV,hW,hX,hY,hZ,h0;function h1(h9){return h9.docDoc;}function h2(){return(function(h9){return function(h_){return h9("missing ref Doc "+cy.p(h_));};}(a.id))(hF);}function h3(h9){return h9.varVar.get_View();}function h4(){return b9.Const((function(h9){return function(h_){return h9("missing ref Var "+cy.p(h_));};}(a.id))(hK));}function h5(h9){return h9.viwView;}function h6(){return b9.Const((function(h9){return function(h_){return h9("missing ref View "+cy.p(h_));};}(a.id))(hQ));}function h7(h9){return h9.actFunction;}function h8(){return(function(h9){return function(h_){return h9("missing ref Action "+cy.p(h_));};}(a.id))(hW);}hD=(hE=ba.splitName(hA),function(h9){return hE(bC.itemRefToString(h9));});return hC.$==1?(hF=hC.$0.$0,b9.Map((hG=(hH=function(h9){var h_;h_=h1(h9);return h_;},function(h9){return h9==null?null:{$:1,$0:hH(h9.$0)};}),(hI=function(h9){return h9==null?h2():h9.$0;},function(h9){return hI(hG(h9));})),(hJ=hD(hF),ba.tryGetDocW(hJ[0],hJ[1])))):hC.$==2?(hK=hC.$0.$0,b9.Bind((hL=(hM=(hN=function(h9){return b9.Map(a.id,h9);},function(h9){return hN(h3(h9));}),function(h9){return h9==null?null:{$:1,$0:hM(h9.$0)};}),(hO=function(h9){return h9==null?h4():h9.$0;},function(h9){return hO(hL(h9));})),(hP=hD(hK),ba.tryGetVarW(hP[0],hP[1])))):hC.$==3?(hQ=hC.$0.$0,b9.Bind((hR=(hS=(hT=function(h9){return b9.Map(a.id,h9);},function(h9){return hT(h5(h9));}),function(h9){return h9==null?null:{$:1,$0:hS(h9.$0)};}),(hU=function(h9){return h9==null?h6():h9.$0;},function(h9){return hU(hR(h9));})),(hV=hD(hQ),ba.tryGetViwW(hV[0],hV[1])))):hC.$==4?(hW=hC.$0.$0,b9.Map((hX=(hY=function(h9){var h_;h_=h7(h9);return h_;},function(h9){return h9==null?null:{$:1,$0:hY(h9.$0)};}),(hZ=function(h9){return h9==null?h8():h9.$0;},function(h9){return hZ(hX(h9));})),(h0=hD(hW),ba.tryGetActW(h0[0],h0[1])))):b9.Map(a.id,bk.toView(bk.map(ba.choiceToString,hB(bU.map(bC.textValToTextType,hC.$0)))));});});});}));bX.getParam2D=(fK=y.depend(),fK.Delay(function(){return fK.Bind(bC.currentPlugInNameD(),function(hA){return fK.Bind(bl.getTextValFromSeqD(),function(){return fK.Return(function(hB){var hC,hD,hE,hF;hC=(hD=bC.itemRefToAbsolute(f.Untag$3(hA)),(hE=function(hG){return function(hH){return hG("@{"+bM.toSafe(hH)+"}");};}(a.id),function(hG){return hE(hD(hG));}));return(hB.$==3?(hF=hB.$0.$0,false):hB.$==1?(hF=hB.$0.$0,false):hB.$==2?(hF=hB.$0.$0,false):hB.$==4?(hF=hB.$0.$0,false):true)?bT.concat("",bS.map(function(hG){var hH;return(hG.$==1?(hH=hG.$0.$0,false):hG.$==2?(hH=hG.$0.$0,false):true)?hG.$0:hC(hH);},hB.$0)):hC(hF);});});});}));bX.getParamTextD=(fL=y.depend(),fL.Delay(function(){return fL.Bind(bC.currentPlugInNameD(),function(hA){return fL.Bind(bl.getTextValFromSeqD(),function(hB){return fL.Return(function(hC){return function(hD){var hE,hF,hG,hH,hI,hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT;function hU(hY){return hY.docDoc;}function hV(hY){return hY.varVar.get_View();}function hW(hY){return hY.viwView;}function hX(hY){return hY.actFunction;}hE=(hF=ba.splitName(hA),function(hY){return hF(bC.itemRefToString(hY));});return hC.$==1?(hG=(hH=hE(hC.$0.$0),ba.tryGetDoc(hH[0],hH[1])),(n.iter((hI=function(hY){var hZ;hZ=hU(hY);return hZ;},function(hY){return hD(hI(hY));})))(hG)):hC.$==2?(hJ=(hK=hE(hC.$0.$0),ba.tryGetVar(hK[0],hK[1])),(n.iter((hL=(hM=function(hY){return hD(a.id(hY));},function(hY){b9.Get(hM,hY);}),function(hY){return hL(hV(hY));})))(hJ)):hC.$==3?(hN=(hO=hE(hC.$0.$0),ba.tryGetViw(hO[0],hO[1])),(n.iter((hP=(hQ=function(hY){return hD(a.id(hY));},function(hY){b9.Get(hQ,hY);}),function(hY){return hP(hW(hY));})))(hN)):hC.$==4?(hR=(hS=hE(hC.$0.$0),ba.tryGetAct(hS[0],hS[1])),(n.iter((hT=function(hY){var hZ;hZ=hX(hY);return hZ;},function(hY){return hD(hT(hY));})))(hR)):b9.Get(function(hY){return hD(a.id(hY));},bk.toView(bk.map(ba.choiceToString,hB(bU.map(bC.textValToTextType,hC.$0)))));};});});});}));bX.initVal="-<InitValue>-";bX.defVarM0=(fM=(fN=new bR.New$5(),[[g3,function(hA){return function(hB){return g5(hA,hB);};}],function(){fN.Clear();}]),(fO=fM[0][1],[function(hA){return(fO(hA))(function(hB){return bC.defVar(hB[0],hB[1],hB[2]);});},fM[1]]))[0];bX.defDocFM=(fP=(fQ=new bR.New$5(),[[g6,function(hA){return function(hB){return g8(hA,hB);};}],function(){fQ.Clear();}]),(fR=fP[0][1],[function(hA){return(fR(hA))(function(hB){return bC.defDocF(hB[0],hB[1],hB[2],hB[3]);});},fP[1]]))[0];bX.defActionM=(fS=(fT=new bR.New$5(),[[g9,function(hA){return function(hB){return g$(hA,hB);};}],function(){fT.Clear();}]),(fU=fS[0][1],[function(hA){return(fU(hA))(function(hB){return bC.defAction(hB[0],hB[1],hB[2],hB[3]);});},fS[1]]))[0];bX.defButtonM=(fV=(fW=new bR.New$5(),[[ha,function(hA){return function(hB){return hc(hA,hB);};}],function(){fW.Clear();}]),(fX=fV[0][1],[function(hA){return(fX(hA))(function(hB){return bC.defButton(hB[0],hB[1],hB[2],hB[3],hB[4]);});},fV[1]]))[0];bX.defInputM=(fY=(fZ=new bR.New$5(),[[hd,function(hA){return function(hB){return hf(hA,hB);};}],function(){fZ.Clear();}]),(f0=fY[0][1],[function(hA){return(f0(hA))(function(hB){return bC.defInput(hB[0],hB[1],hB[2],hB[3]);});},fY[1]]))[0];bX.defTextAreaM=(f1=(f2=new bR.New$5(),[[hg,function(hA){return function(hB){return hi(hA,hB);};}],function(){f2.Clear();}]),(f3=f1[0][1],[function(hA){return(f3(hA))(function(hB){return bC.defTextArea(hB[0],hB[1],hB[2],hB[3]);});},f1[1]]))[0];bX.defElementM=(f4=(f5=new bR.New$5(),[[hj,function(hA){return function(hB){return hl(hA,hB);};}],function(){f5.Clear();}]),(f6=f4[0][1],[function(hA){return(f6(hA))(function(hB){return bC.defElement(hB[0],hB[1],hB[2],hB[3],hB[4]);});},f4[1]]))[0];bX.defConcatM=(f7=(f8=new bR.New$5(),[[hm,function(hA){return function(hB){return ho(hA,hB);};}],function(){f8.Clear();}]),(f9=f7[0][1],[function(hA){return(f9(hA))(function(hB){return bC.defConcat(hB[0],hB[1],hB[2]);});},f7[1]]))[0];bX.defViewJSM=(f_=(f$=new bR.New$5(),[[hp,function(hA){return function(hB){return hr(hA,hB);};}],function(){f$.Clear();}]),(ga=f_[0][1],[function(hA){return(ga(hA))(function(hB){return bC.defViewJS(hB[0],hB[1],hB[2]);});},f_[1]]))[0];bX.defSplitterM=(gb=(gc=new bR.New$5(),[[hs,function(hA){return function(hB){return hu(hA,hB);};}],function(){gc.Clear();}]),(gd=gb[0][1],[function(hA){return(gd(hA))(function(hB){return bC.defSplitter(hB[0],hB[1],hB[2],hB[3],hB[4],hB[5]);});},gb[1]]))[0];bX.drag=bF.DragNone;bX.TemplateFileName$1="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\website\\Templates.html";bX.snippetsLM=cp.Create(function(hA){return hA.snpId;},bY.Empty);bX.collapsedV=cb.Create$1(new b2.New$1(null));bX.codeSnippetIdV=cb.Create$1(null);bX.searchFor=cb.Create$1("");bX.allPredecessors=function(hA){return O.allPredecessors(hv,hA);};bX.indPredIds=function(hA){return O.indirectPredecessorIds(hw,hA[0],hA[1],hA[2]);};bX.allCodePredsW=b9.Map(function(hA){var hB,hC;return hA!=null&&hA.$==1?(hB=hA.$0,(hC=bG.snippetsLM().TryFindByKey(hB),hC!=null&&hC.$==1?(bG.allPredecessors())(hC.$0):new b2.New$1(null))):new b2.New$1(null);},bG.codeSnippetIdV().get_View());bX.allCodePredIdsW=b9.Map(function(hA){return bS.map(function(hB){return hB.snpId;},hA);},bG.allCodePredsW());bX.shdDef=bH.New(0,0,false,true,[],null);bX.snpIdParentsW=(ge=b9.Map(function(hA){return bN.ofSeq(bS.map(function(hB){return[hB.snpId,hB.snpParentIdO];},hA));},bG.snippetsLM().v),(gf=[cb.Create$1(null)],(b9.Sink(function(hA){if(!bP.Equals(gf[0].Get(),hA))gf[0].Set(hA);},ge),gf[0].get_View())));bX.processHierW=(gg=b9.get_Do(),b9.Bind(function(hA){return b9.Bind(function(hB){return b9.Const(bG.processHier(hA,hB));},bG.collapsedV().get_View());},bG.snpIdParentsW()));bX.search=(gh=b9.get_Do(),b9.Bind(function(hA){function hB(hC){var hD,hE,hF;hD=(hE=(hF=hC.snpId,function(hG){var hH;hH=null;return hG.TryGetValue(hF,{get:function(){return hH;},set:function(hI){hH=hI;}})?{$:1,$0:hH}:null;}(hA)),hE==null?null:{$:1,$0:hE.$0.visible});return hD==null||hD.$0;}return b9.Bind(function(hC){return hC===""?b9.Const(hB):b9.Bind(function(hD){return b9.Bind(function(hE){return hC==="."?b9.Const(function(hF){return(bP.Equals(hE,{$:1,$0:hF.snpId})||bS.contains(hF.snpId,hD))&&hB(hF);}):b9.Const(function(hF){return hF.snpName.indexOf(hC)!=-1||hF.snpContent.indexOf(hC)!=-1;});},bG.codeSnippetIdV().get_View());},bG.allCodePredIdsW());},bG.searchFor().get_View());},bG.processHierW()));bX.snippetList=bz.getDocFor(bG.snippetsLM(),O.defaultSnippet(),function(){return O.New("","",null);},{$:1,$0:bG.search()},function(hA){return bG.calcUI(bG.wrapNothing,true,hA);});b9.Sink(function(hA){var hB;if(hA!=null&&hA.$==1){hB=hA.$0;b9.Get(function(hC){if(!bP.Equals(bG.codeSnippetIdV().Get(),{$:1,$0:hB}))if(!bS.contains(hB,hC))bG.codeSnippetIdV().Set({$:1,$0:hB});},bG.allCodePredIdsW());}},bG.snippetList().selV.get_View());bX.currentSnippetV=cb.Lens(bG.snippetList().get_CurrentV(),a.id,function(hA,hB){return hB;});bX.currentSnippetNameV=cb.Lens(bG.currentSnippetV(),function(hA){return hA.snpName;},function(hA,hB){return N.New(hA.snpId,hB,hA.snpContent,hA.snpParentIdO,hA.snpPredIds,hA.snpProperties,hA.snpModified);});bX.currentSnippetContentV=cb.Lens(bG.currentSnippetV(),function(hA){return hA.snpContent;},function(hA,hB){return N.New(hA.snpId,hA.snpName,hB,hA.snpParentIdO,hA.snpPredIds,hA.snpProperties,hA.snpModified);});bX.curSnp=(gi=ba.plugin(),gi.AddVar(gi.AddVar(gi.Yield(),"name",bG.currentSnippetNameV()),"content",bG.currentSnippetContentV()));bX.monaco=(gj=bG.monacoNew(cb.Lens(bG.currentSnippetV(),function(hA){return hA.snpContent;},function(hA,hB){return N.New(hA.snpId,hA.snpName,hB,hA.snpParentIdO,hA.snpPredIds,hA.snpProperties,hA.snpModified);})),cn.New(gj["var"],gj.disabled,b9.Const([]),gj.onChange,gj.onRender,null,null,null,gj.editorO,gj.editorHook));bX.parseW=b9.Map((gk=(gl=function(hA){return bS.choose(hy,hA);},function(hA){return gl(hx(hA));}),function(hA){return hz(gk(hA));}),bG.currentSnippetContentV().get_View());bX.target2=bn.newLyt(f.Tag$3("lytTarget2"),"");bC.addLayout(bG.target2());ba.addPlugIn((gm=ba.plugin(),gm.AddAct(gm.AddAct(gm.AddAct(gm.AddAct(gm.AddAct(gm.AddAct(gm.AddAct(gm.Merge(gm.Merge(gm.AddDoc(gm.AddViw(gm.AddVar(gm.Name(gm.Yield(),"Snippets"),"searchFor",bG.searchFor()),"parseOut",bG.parseW()),"editor",cB.Create(function(){return b$.Element("div",[],[ck.generateDoc(bG.monaco())]);})),"snippets_",bG.snippetList().PlugIn(bG.selectorLensGuidId)),"curSnp_",bG.curSnp()),"LoadSnippets",function(){bI.loadTextFile(self.document.getElementById("LoadSnippets").firstElementChild.firstElementChild.firstElementChild.firstElementChild);}),"SaveSnippets",function(){bI.saveAs();}),"IndentIn",function(){bG.indentIn();}),"IndentOut",function(){bG.indentOut();}),"AddSnippet",function(){bG.addSnippet();}),"DeleteSnippet",function(){bG.deleteSnippet();}),"ParseNewLY",function(){bG.parseNewLY();})));bx.addLayout0(bn.newLyt(f.Tag$3("lytTarget"),"\r\n            main horizontal 10-50-70 part1 part2\r\n            \r\n            part1 div \"\" \r\n            : h1 \"\" \"Demo123 \" message\r\n            :: div \"\" \"Message:\"\r\n            :: textarea message \"height:200px;width:500px\"\r\n            \r\n            part2 div \"\" lytTarget.Layout\r\n            \r\n            message Var \"Hello\"     \r\n                "));bx.addLayout0(bn.newLyt(f.Tag$3("SnippetsLyt"),"\r\n                    split horizontal 0-50-100 AppFramework.AppFwkClient main\r\n                    main vertical 0-25-100 list snippet\r\n                    SearchFor   Doc InputLabel \"\" \"Search\" Snippets.searchFor\r\n                    File        Doc InputFile  \"id=LoadSnippets\" \"Open File\" Snippets.LoadSnippets \"\"\r\n                    list div \"display: flex;flex-direction: column\" File\r\n                    : button \"click=@{Snippets.AddSnippet}\"    \"Add New Snippet\"\r\n                    : button \"click=@{Snippets.DeleteSnippet}\" \"Delete Snippet\"\r\n                    : button \"click=@{Snippets.IndentIn}\"      \"Indent in\"\r\n                    : button \"click=@{Snippets.IndentOut}\"     \"Indent out\"\r\n                    : div    \"\" SearchFor \r\n                    : div \"overflow:auto;width:100%;max-width:100%\" Snippets.snippets_list\r\n                    snippet div \"display: flex;flex-direction: column\"\r\n                    : div    \"\" Snippets.snippets_sel\r\n                    : Doc    InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n                    : div \"height:100%;class=relative\" Snippets.editor                \r\n                "));bC.addLayout(bn.newLyt(f.Tag$3("lytDemo"),"\r\n            AF PlugIn\r\n            : Doc InputLabel\r\n            : Doc Select\r\n            : Doc Input\r\n            : Doc TextArea\r\n            : Doc TrigAction\r\n            : Action SetVar\r\n            \r\n            Snippets PlugIn\r\n            : Var snippets_sel\r\n            : Var curSnp_content\r\n            : Var curSnp_name\r\n            : Var searchFor\r\n            : Action IndentOut\r\n            : Action IndentIn\r\n            : Doc snippets_list\r\n            : Action AddSnippet\r\n            : Action DeleteSnippet\r\n            : Action ParseNewLY\r\n            : Action LoadSnippets\r\n            : Action SaveSnippets\r\n            : Doc editor\r\n            \r\n            lytTarget2 PlugIn\r\n            : Var ParseMsgs\r\n            : Doc main \r\n            \r\n            editorDataSel Var \"\"\r\n            \r\n            target    View \"n => n.includes('main ')?n:'main Concat \"\" \"\"'\" Snippets.curSnp_content\r\n            \r\n            SetTarget Action AF.SetVar     \"lytTarget2.Layout\"        target\r\n            SetMain2  Action AF.SetVar     \"AppFramework.mainDocV\"    \"lytDemo.main2\"\r\n            SetMain   Action AF.SetVar     \"AppFramework.mainDocV\"    \"lytDemo.main\"\r\n            \r\n            Trigger   Doc    AF.TrigAction Snippets.snippets_sel \"lytDemo.SetTarget\"\r\n            \r\n            gotoMain  button \"click=@{SetMain};width:16px\" \"<<\"\r\n            gotoMain2 button \"click=@{SetMain2};width:16px\" \">>\"\r\n            \r\n            SearchFor   Doc AF.InputLabel \"\" \"Search\" Snippets.searchFor\r\n            \r\n            buttons ul \"\"\r\n            : div \"margin:3px\"\r\n            :: button \"click=@{Snippets.IndentOut};title=indent out\"     \"<--\"\r\n            :: button \"click=@{Snippets.IndentIn};title=indent in\"       \"--> \"\r\n            \r\n            File span \"class=input-group;margin:5px;id=LoadSnippets\"\r\n            : div \"class=input-group-btn\"\r\n            :: label \"class=btn btn-info\" \"Load File\"\r\n            ::: div \"\"\r\n            :::: input \"class=form-control;type=file;display: none;change=@{Snippets.LoadSnippets}\" \r\n            :: label \"class=btn btn-primary;click=@{Snippets.SaveSnippets}\" \"Save File\"\r\n            \r\n            list div \"display: flex;flex-direction: column\" gotoMain File\r\n            : div    \"margin:5px\" SearchFor \r\n            : Concat buttons\r\n            : div \"overflow:auto;width:100%;max-width:calc(100% - 10px)\" Snippets.snippets_list\r\n            : ul \"margin:3px\"\r\n            :: button \"click=@{Snippets.AddSnippet}   ;title=Add New Snippet\" \"+\"\r\n            :: button \"margin-left:20px;click=@{Snippets.DeleteSnippet};title=Delete  Snippet\" \"x\"\r\n            \r\n            snippet div \"display: flex;flex-direction: column;flex:1\" Trigger\r\n            : button \"click=@{SetTarget}\"  \"Apply\"\r\n            : button \"click=@{Snippets.ParseNewLY}\" \"Apply NewLY\"\r\n            : div    \"click=@{SetTarget}\" Snippets.snippets_sel\r\n            : Doc    AF.InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n            : Doc    AF.Select \"\" \"<Content>\" \"Values\" editorDataSel\r\n            : div \"height:100%;class=relative;flex:1\" Snippets.editor\r\n            : Doc    AF.TextArea \"height:7em\"   lytTarget2.ParseMsgs\r\n            \r\n            Left2 vertical 0-25-100 list snippet\r\n            main2 vertical 0-50-100 Left2 lytTarget2.main            \r\n                \r\n            Left div \"display:flex;flex-direction:column\" gotoMain2 snippet\r\n            main vertical 0-50-100 Left lytTarget2.main\r\n                "));ba.mainDocV().Set("lytDemo.main2");};bY=bU.T=dR.Class({get_Item:function(dX){return bS.nth(dX,this);},GetEnumerator:function(){return new cO.New(this,null,function(dX){var dY;dY=dX.s;return dY.$==0?false:(dX.c=dY.$0,dX.s=dY.$1,true);},void 0);},GetEnumerator0:function(){return cN.Get(this);}},null,bY);bY.Empty=new bY({$:0});bZ.Bind=function(dX,dY){return dY.$==1?{$:1,$0:dY.$0}:dX(dY.$0);};bZ.Map=function(dX,dY){return dY.$==1?{$:1,$0:dY.$0}:{$:0,$0:dX(dY.$0)};};b0.IsUpper=function(dX){return dX>="A"&&dX<="Z";};b0.IsWhiteSpace=function(dX){return dX.match(new a.RegExp("\\s"))!==null;};b1.Filter=function(dX,dY){var dZ;return new b2.New$1((dZ=bN.ofSeq(bS.filter(dX,dY)),cS.Build(dZ,0,dZ.length-1)));};b2=bQ.FSharpSet=dR.Class({get_IsEmpty:function(){return this.tree==null;},Remove:function(dX){return new b2.New$1(cS.Remove(dX,this.tree));},Add:function(dX){return new b2.New$1(cS.Add(dX,this.tree));},Contains:function(dX){return cS.Contains(dX,this.tree);},GetEnumerator$1:function(){return cN.Get(cS.Enumerate(false,this.tree));},Equals:function(dX){return this.get_Count()===dX.get_Count()&&bS.forall2(bP.Equals,this,dX);},get_Count:function(){var dX;dX=this.tree;return dX==null?0:dX.Count;},GetHashCode:function(){return -1741749453+bP.Hash(bN.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(dX){return bS.compareWith(bP.Compare,this,dX);},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,b2);b2.op_Addition=function(dX,dY){return new b2.New$1(cS.OfSeq(bS.append(dX,dY)));};b2.op_Subtraction=function(dX,dY){return b1.Filter(function(dZ){return!dY.Contains(dZ);},dX);};b2.New=dR.Ctor(function(dX){b2.New$1.call(this,cS.OfSeq(dX));},b2);b2.New$1=dR.Ctor(function(dX){r.New.call(this);this.tree=dX;},b2);b3=bQ.FSharpMap=dR.Class({get_Item:function(dX){var dY;dY=this.TryFind(dX);return dY==null?bL.FailWith("The given key was not present in the dictionary."):dY.$0;},TryFind:function(dX){var dY;dY=cS.TryFind(c$.New(dX,void 0),this.tree);return dY==null?null:{$:1,$0:dY.$0.Value};},GetEnumerator$1:function(){return cN.Get(bS.map(function(dX){return{K:dX.Key,V:dX.Value};},cS.Enumerate(false,this.tree)));},Equals:function(dX){return this.get_Count()===dX.get_Count()&&bS.forall2(bP.Equals,this,dX);},get_Count:function(){var dX;dX=this.tree;return dX==null?0:dX.Count;},GetHashCode:function(){return bP.Hash(bN.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(dX){return bS.compareWith(bP.Compare,this,dX);},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,b3);b3.New=dR.Ctor(function(dX){b3.New$1.call(this,cT.fromSeq(dX));},b3);b3.New$1=dR.Ctor(function(dX){r.New.call(this);this.tree=dX;},b3);b6=b5.attr=dR.Class({},r,b6);b8=b7.Hoverable=dR.Class({Content:function(dX){return dX.on("mouseenter",function(){return cX.AddClass(dX.elt,"hovering");}).on("mouseleave",function(){return cX.RemoveClass(dX.elt,"hovering");});}},null,b8);b8.New$1=function(){return b8.New(cb.Create$1(false));};b8.New=function(dX){return new b8({hover:dX});};b9.Map=function(dX,dY){return b9.CreateLazy(function(){return cW.Map(dX,dY());});};b9.Const=function(dX){var dY;dY=cW.New({$:0,$0:dX});return function(){return dY;};};b9.Get=function(dX,dY){var dZ;function d0(){cW.WhenRun(dY(),function(d1){if(!dZ[0]){dZ[0]=true;dX(d1);}},function(){if(!dZ[0])d0();});}dZ=[false];d0();};b9.Map2=function(dX,dY,dZ){return b9.CreateLazy(function(){return cW.Map2(dX,dY(),dZ());});};b9.Bind=function(dX,dY){return b9.Join(b9.Map(dX,dY));};b9.Apply=function(dX,dY){return b9.Map2(function(dZ,d0){return dZ(d0);},dX,dY);};b9.Sink=function(dX,dY){function dZ(){cW.WhenRun(dY(),dX,function(){cL.scheduler().Fork(dZ);});}cL.scheduler().Fork(dZ);};b9.MapSeqCachedViewBy=function(dX,dY,dZ){var d0;d0=[new bR.New$5()];return b9.Map(function(d1){var d2,d3,d4;d2=d0[0];d3=new bR.New$5();d4=c9.mapInPlace(function(d5){var d6,d7,d8;d6=dX(d5);d7=d2.ContainsKey(d6)?(d8=d2.get_Item(d6),(cb.Set(d8.r,d5),d8)):b9.ConvertSeqNode(function(d9){return dY(d6,d9);},d5);d3.set_Item(d6,d7);return d7.e;},bN.ofSeq(d1));d0[0]=d3;return d4;},dZ);};b9.get_Do=function(){return cH.B;};b9.CreateLazy=function(dX){var dY;dY={c:null,o:dX};return function(){var dZ,d0;dZ=dY.c;return dZ===null?(dZ=dY.o(),dY.c=dZ,(d0=dZ.s,d0!=null&&d0.$==0)?dY.o=null:cW.WhenObsoleteRun(dZ,function(){dY.c=null;}),dZ):dZ;};};b9.Join=function(dX){return b9.CreateLazy(function(){return cW.Join(dX());});};b9.ConvertSeqNode=function(dX,dY){var dZ,d0;dZ=cb.Create$1(dY);d0=dZ.get_View();return{e:dX(d0),r:dZ,w:d0};};b9.MapAsync=function(dX,dY){return b9.CreateLazy(function(){return cW.MapAsync(dX,dY());});};b9.MapSeqCachedBy=function(dX,dY,dZ){var d0;d0=[new bR.New$5()];return b9.Map(function(d1){var d2,d3,d4;d2=d0[0];d3=new bR.New$5();d4=c9.mapInPlace(function(d5){var d6,d7;d6=dX(d5);d7=d2.ContainsKey(d6)?d2.get_Item(d6):dY(d5);d3.set_Item(d6,d7);return d7;},bN.ofSeq(d1));d0[0]=d3;return d4;},dZ);};b9.TryGet=function(dX){return cW.TryGet(dX());};b9.Map2Unit=function(dX,dY){return b9.CreateLazy(function(){return cW.Map2Unit(dX(),dY());});};b9.MapSeqCached=function(dX,dY){return b9.MapSeqCachedBy(a.id,dX,dY);};b9.Map3=function(dX,dY,dZ,d0){return b9.CreateLazy(function(){return cW.Map3(dX,dY(),dZ(),d0());});};b9.Sequence=function(dX){return b9.CreateLazy(function(){return cW.Sequence(bS.map(function(dY){return dY();},dX));});};b_=b4.Var=dR.Class({},r,b_);b_.New=dR.Ctor(function(){r.New.call(this);},b_);b$=b4.Doc=dR.Class({},r,b$);b$.Element=function(dX,dY,dZ){var d0,d1;d0=cC.Concat(dY);d1=b$.Concat(dZ);return cV.New(cX.CreateElement(dX),d0,d1);};b$.Concat=function(dX){var dY;dY=c9.ofSeqNonCopying(dX);return c9.TreeReduce(b$.get_Empty(),b$.Append,dY);};b$.Verbatim=function(dX){var dY;return b$.Mk(c9.MapTreeReduce(function(dZ){return bP.Equals(dZ.nodeType,cf.TEXT_NODE)?{$:5,$0:dZ}:{$:1,$0:c_.CreateElemNode(dZ,c6.EmptyAttr(),null)};},null,function(dZ,d0){return{$:0,$0:dZ,$1:d0};},(dY=dV.parseHTML(dX),bP.Equals(dY,null)?[]:dY)),b9.Const());};b$.TextNode=function(dX){return b$.Mk({$:5,$0:cX.CreateText(dX)},b9.Const());};b$.get_Empty=function(){return b$.Mk(null,b9.Const());};b$.TextView=function(dX){var dY;dY=c_.CreateTextNode();return b$.Mk({$:4,$0:dY},b9.Map(function(dZ){c_.UpdateTextNode(dY,dZ);},dX));};b$.Run=function(dX,dY){c_.LinkElement(dX,dY.docNode);b$.RunInPlace(false,dX,dY);};b$.Async=function(dX){return b$.EmbedView(b9.MapAsync(a.id,b9.Const(dX)));};b$.ConvertBy=function(dX,dY,dZ){return b$.Flatten(b9.MapSeqCachedBy(dX,dY,dZ));};b$.EmbedView=function(dX){var dY;dY=c_.CreateEmbedNode();return b$.Mk({$:2,$0:dY},b9.Map(a.ignore,b9.Bind(function(dZ){c_.UpdateEmbedNode(dY,dZ.docNode);return dZ.updates;},dX)));};b$.BindView=function(dX,dY){return b$.EmbedView(b9.Map(dX,dY));};b$.Append=function(dX,dY){return b$.Mk({$:0,$0:dX.docNode,$1:dY.docNode},b9.Map2Unit(dX.updates,dY.updates));};b$.Mk=function(dX,dY){return new b$.New(dX,dY);};b$.Button=function(dX,dY,dZ){var d0;d0=cC.Concat(dY);return cV.New(b$.Clickable("button",dZ),d0,b$.TextNode(dX));};b$.Input=function(dX,dY){return b$.InputInternal("input",function(){return bS.append(dX,[cA.Value(dY)]);});};b$.InputArea=function(dX,dY){return b$.InputInternal("textarea",function(){return bS.append(dX,[cA.Value(dY)]);});};b$.Convert=function(dX,dY){return b$.Flatten(b9.MapSeqCached(dX,dY));};b$.SelectDynOptional=function(dX,dY,dZ,d0,d1){return b$.SelectDyn(dX,function(d2){return d2!=null&&d2.$==1?dZ(d2.$0):dY;},b9.Map(function(d2){return new bY({$:1,$0:null,$1:bU.map(function(d3){return{$:1,$0:d3};},d2)});},d0),d1);};b$.RunAppend=function(dX,dY){var dZ;dZ=self.document.createTextNode("");dX.appendChild(dZ);b$.RunBefore(dZ,dY);};b$.RunInPlace=function(dX,dY,dZ){var d0;d0=c_.CreateRunState(dY,dZ.docNode);b9.Sink(dr.get_UseAnimations()||ds.BatchUpdatesEnabled()?dt.StartProcessor(c_.PerformAnimatedUpdate(dX,d0,dZ.docNode)):function(){c_.PerformSyncUpdate(dX,d0,dZ.docNode);},dZ.updates);};b$.Flatten=function(dX){return b$.EmbedView(b9.Map(b$.Concat,dX));};b$.Clickable=function(dX,dY){var dZ;dZ=cX.CreateElement(dX);dZ.addEventListener("click",function(d0){d0.preventDefault();return dY();},false);return dZ;};b$.InputInternal=function(dX,dY){var dZ;dZ=cX.CreateElement(dX);return cV.New(dZ,cC.Concat(dY(dZ)),b$.get_Empty());};b$.SelectDyn=function(dX,dY,dZ,d0){return b$.SelectImpl(dX,dY,function(d1){function d2(d3,d4){return b$.Element("option",bU.ofArray([cC.Create("value",a.String(d3))]),bU.ofArray([b$.TextNode(dY(d4))]));}return b$.Convert(function(d3){return d2(d3[0],d3[1]);},b9.Map(function(d3){d1[0]=d3;return bS.mapi(function(d4,d5){return[d4,d5];},d3);},dZ));},d0);};b$.RunBefore=function(dX,dY){var dZ;dZ=self.document.createTextNode("");dX.parentNode.insertBefore(dZ,dX);b$.RunBetween(dZ,dX,dY);};b$.SelectImpl=function(dX,dY,dZ,d0){var d1,d2,d3,d4;function d5(d_){return d_.selectedIndex;}function d6(d_,d$){d_.selectedIndex=d$;}function d7(d_){var d$;d$=d5(d_);return d1[0].get_Item(d$);}function d8(d_){return bS.findIndex(function(d$){return bP.Equals(d_,d$);},d1[0]);}function d9(d_,d$){return d6(d_,d8(d$));}d1=[bY.Empty];d2=cX.CreateElement("select");d3=cA.DynamicCustom(function(d_){return function(d$){return d9(d_,d$);};},d0.get_View());d2.addEventListener("change",function(){d0.UpdateMaybe(function(d_){var d$;d$=d7(d2);return bP.Equals(d_,d$)?null:{$:1,$0:d$};});},false);return cV.New(d2,(d4=cC.Append(d3,cC.Concat(dX)),cC.Append(cA.OnAfterRender(function(d_){d9(d_,d0.Get());}),d4)),dZ(d1));};b$.RunBetween=function(dX,dY,dZ){var d0;c_.LinkPrevElement(dY,dZ.docNode);d0=c_.CreateDelimitedRunState(dX,dY,dZ.docNode);b9.Sink(dr.get_UseAnimations()||ds.BatchUpdatesEnabled()?dt.StartProcessor(c_.PerformAnimatedUpdate(false,d0,dZ.docNode)):function(){c_.PerformSyncUpdate(false,d0,dZ.docNode);},dZ.updates);};b$.New=dR.Ctor(function(dX,dY){r.New.call(this);this.docNode=dX;this.updates=dY;},b$);ca.TryParseInt32=function(dX,dY){return ca.TryParse(dX,-2147483648,2147483647,dY);};cb=b4.Var$1=dR.Class({},r,cb);cb.Create$1=function(dX){return new cY.New(false,cW.New({$:2,$0:dX,$1:[]}),dX);};cb.Lens=function(dX,dY,dZ){var d0,d1,d2;d0=c2.Id();d1=b9.Map(dY,dX.get_View());d2=new b_({Get:function(){return dY(dX.Get());},Set:function(d3){return dX.Update(function(d4){return dZ(d4,d3);});},SetFinal:function(d3){return this.Set(d3);},Update:function(d3){return dX.Update(function(d4){return dZ(d4,d3(dY(d4)));});},UpdateMaybe:function(d3){return dX.UpdateMaybe(function(d4){var d5;d5=d3(dY(d4));return d5==null?null:{$:1,$0:dZ(d4,d5.$0)};});},get_View:function(){return d1;},get_Id:function(){return d0;}});b_.New.call(d2);return d2;};cb.Set=function(dX,dY){dX.Set(dY);};cd.NewFromSeq=function(dX){var dY,dZ,d0;dY={};dZ=cN.Get(dX);try{while(dZ.MoveNext()){d0=dZ.Current();dY[d0[0]]=d0[1];}}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}return dY;};cg.GetFields=function(dX){var dY,dZ;dY=[];for(var d0 in dX)dY.push([d0,dX[d0]]);return dY;};cg.GetFieldValues=function(dX){var dY,dZ;dY=[];for(var d0 in dX)dY.push(dX[d0]);return dY;};cj.addResizeObserver=function(dX,dY){var dZ,d0,d1,d2;try{dZ=!(!a.ResizeObserver);}catch(d3){dZ=false;}if(dZ){d0=new a.ResizeObserver(dX);cj.set_observers(new bY({$:1,$0:d0,$1:cj.observers()}));d0.observe(dY);}else{d1=cj.dimsChanged(dY);cL.Start((d2=null,cL.Delay(function(){return cL.While(function(){return dY.isConnected;},cL.Delay(function(){return cL.Bind(cL.Sleep(110),function(){return d1()?(dX(),cL.Zero()):cL.Zero();});}));})),null);}};cj.set_observers=function(dX){bX.$cctor();bX.observers=dX;};cj.observers=function(){bX.$cctor();return bX.observers;};cj.dimsChanged=function(dX){var dY;dY=[dX.getBoundingClientRect()];return function(){var dZ;dZ=dX.getBoundingClientRect();return bP.Equals(cj.domRect2Tuple(dY[0]),cj.domRect2Tuple(dZ))?false:(dY[0]=dZ,true);};};cj.domRect2Tuple=function(dX){return[dX.top,dX.left,dX.width,dX.height];};b9=b4.View=dR.Class({},null,b9);ck.bindVarEditor=function(dX,dY,dZ,d0,d1){var d2,d3;d2=[0];d3=[0];dX(function(){var d4;d4=dY();!bP.Equals(d1.Get(),d4)?(d2[0]=d2[0]+1,d1.Set(d4),d0(d4)):void 0;});b9.Sink(function(){if(d2[0]>d3[0])d3[0]=d2[0];else if(!bP.Equals(dY(),d1.Get()))dZ(d1.Get());},d1.get_View());};ck.newVar=function(dX,dY){return cn.New(dY,b9.Const(false),b9.Const([]),null,a.ignore,null,null,null,null,dX);};ck.onRender=function(dX,dY){return cn.New(dY["var"],dY.disabled,dY.annotations,dY.onChange,dX,dY.autoCompletion,dY.toolTip,dY.declaration,dY.editorO,dY.editorHook);};ck.generateDoc=function(dX){var dY,dZ,d0;dY=(dZ=(d0=dX.onChange,d0==null?null:{$:1,$0:d0.$0(dX)}),dZ==null?a.ignore:dZ.$0);return(dX.editorHook.generateDoc(dX))(function(d1){dX.editorO={$:1,$0:d1};ck.bindVarEditor(dX.editorHook.hookOnChange,dX.editorHook.getValue,dX.editorHook.setValue,dY,dX["var"]);b9.Sink(dX.editorHook.showAnnotations,dX.annotations);b9.Sink(dX.editorHook.setDisabled,dX.disabled);dX.onRender(dX);});};cl.New=function(dX,dY){return{line:dX,col:dY};};cm.ofAsyncResultM=function(dX){return new a.Promise(function(dY,dZ){cL.StartWithContinuations(dX,function(d0){var d1;d1=l.OkM(d0);d1.$==1?dZ(j.summarized(d1.$0)):dY(d1.$0[0]);},function(d0){dZ(d0);},function(d0){dZ(d0);},null);});};cn.New=function(dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6){return{"var":dX,disabled:dY,annotations:dZ,onChange:d0,onRender:d1,autoCompletion:d2,toolTip:d3,declaration:d4,editorO:d5,editorHook:d6};};R.REGEX$1=function(dX,dY,dZ){var d0;return dZ===null?null:(d0=(new a.String(dZ)).match(new a.RegExp(dX,dY)),bP.Equals(d0,null)?null:!bP.Equals(d0,null)&&d0.length===0?null:{$:1,$0:d0});};co.New=function(dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8){return{generateDoc:dX,getValue:dY,setValue:dZ,setDisabled:d0,showAnnotations:d1,posFromIndex:d2,indexFromPos:d3,getWordAt:d4,getSelectionText:d5,getUri:d6,setUri:d7,hookOnChange:d8};};cp=b4.ListModel=dR.Class({AppendMany:function(dX){var dY,dZ;function d0(d1,d2){var d3,d4;d3=dY.key(d2);dY.ObsoleteKey(d3);d4=bN.tryFindIndex(function(d5){return bP.Equals(dY.key(d5),d3);},d1);return d4==null?(dZ.push(d2),d1):dY.storage.SSetAt(d4.$0,d2,d1);}dY=this;dZ=[];this["var"].Set(this.storage.SAppendMany(dZ,(((dR.Curried3(bS.fold))(d0))(this["var"].Get()))(dX)));},TryFindByKeyAsView:function(dX){var dY;dY=this;return function(){var dZ,d0,d1;dZ=(d0=null,[dY.it.TryGetValue(dX,{get:function(){return d0;},set:function(d2){d0=d2;}}),d0]);return dZ[0]?dZ[1]:(d1=cW.New({$:2,$0:dY.TryFindByKey(dX),$1:[]}),(dY.it.Add(dX,d1),d1));};},TryFindByKey:function(dX){var dY;dY=this;return bN.tryFind(function(dZ){return bP.Equals(dY.key(dZ),dX);},this["var"].Get());},ContainsKey:function(dX){var dY;dY=this;return bN.exists(function(dZ){return bP.Equals(dY.key(dZ),dX);},this["var"].Get());},Lens:function(dX){return this.LensInto(a.id,function(dY,dZ){return dZ;},dX);},RemoveByKey:function(dX){var dY;dY=this;this["var"].Set(this.storage.SRemoveIf(function(dZ){return bP.Equals(dY.key(dZ),dX);},this["var"].Get()));this.ObsoleteKey(dX);},ContainsKeyAsView:function(dX){var dY;function dZ(d0){return bP.Equals(dY.key(d0),dX);}dY=this;return b9.Map(function(d0){return bN.exists(dZ,d0);},this["var"].get_View());},Set:function(dX){this["var"].Set(this.storage.SSet(dX));this.ObsoleteAll();},Append:function(dX){var dY,dZ,d0,d1;dY=this;dZ=this["var"].Get();d0=this.key(dX);d1=bN.tryFindIndex(function(d2){return bP.Equals(dY.key(d2),d0);},dZ);d1!=null&&d1.$==1?this["var"].Set(this.storage.SSetAt(d1.$0,dX,dZ)):this["var"].Set(this.storage.SAppend(dX,dZ));this.ObsoleteKey(d0);},ObsoleteKey:function(dX){var dY,dZ;dY=(dZ=null,[this.it.TryGetValue(dX,{get:function(){return dZ;},set:function(d0){dZ=d0;}}),dZ]);dY[0]?(cW.Obsolete(dY[1]),this.it.Remove(dX)):void 0;},LensInto:function(dX,dY,dZ){return this["LensInto'"](dX,dY,dZ,b9.Map(dX,this.FindByKeyAsView(dZ)));},ObsoleteAll:function(){bS.iter(function(dX){cW.Obsolete(dX.V);},this.it);this.it.Clear();},"LensInto'":function(dX,dY,dZ,d0){var d1,d2,d3;d1=this;d2=c2.Id();d3=new b_({Get:function(){return dX(d1.FindByKey(dZ));},Set:function(d4){return d1.UpdateBy(function(d5){return{$:1,$0:dY(d5,d4)};},dZ);},SetFinal:function(d4){return this.Set(d4);},Update:function(d4){return d1.UpdateBy(function(d5){return{$:1,$0:dY(d5,d4(dX(d5)))};},dZ);},UpdateMaybe:function(d4){return d1.UpdateBy(function(d5){var d6;d6=d4(dX(d5));return d6==null?null:{$:1,$0:dY(d5,d6.$0)};},dZ);},get_View:function(){return d0;},get_Id:function(){return d2;}});b_.New.call(d3);return d3;},FindByKeyAsView:function(dX){return b9.Map(function(dY){return dY.$0;},this.TryFindByKeyAsView(dX));},MapLens:function(dX){var dY;dY=this;return b9.MapSeqCachedViewBy(dY.key,function(dZ,d0){return dX(dZ,dY["LensInto'"](a.id,function(d1,d2){return d2;},dZ,d0));},this["var"].get_View());},FindByKey:function(dX){var dY;dY=this;return bN.find(function(dZ){return bP.Equals(dY.key(dZ),dX);},this["var"].Get());},UpdateBy:function(dX,dY){var dZ,d0,d1,d2,d3;dZ=this;d0=this["var"].Get();d1=bN.tryFindIndex(function(d4){return bP.Equals(dZ.key(d4),dY);},d0);d1!=null&&d1.$==1?(d2=d1.$0,d3=dX(bN.get(d0,d2)),d3!=null&&d3.$==1?(this["var"].Set(this.storage.SSetAt(d2,d3.$0,d0)),this.ObsoleteKey(dY)):void 0):void 0;},GetEnumerator:function(){return cN.Get(this["var"].Get());},GetEnumerator0:function(){return cN.Get0(this["var"].Get());}},r,cp);cp.New$1=dR.Ctor(function(dX){cp.New$2.call(this,dX,[]);},cp);cp.New$2=dR.Ctor(function(dX,dY){var dZ;dZ=bN.ofSeq(dY);cp.New$3.call(this,dX,cb.Create$1(dZ),db.InMemory(dZ));},cp);cp.New$3=dR.Ctor(function(dX,dY,dZ){r.New.call(this);this.key=dX;this["var"]=dY;this.storage=dZ;this.v=b9.Map(function(d0){return d0.slice();},this["var"].get_View());this.it=new bR.New$5();},cp);cp.New=dR.Ctor(function(dX,dY){cp.New$3.call(this,dX,cb.Create$1(bN.ofSeq(bS.distinctBy(dX,dY.SInit()))),dY);},cp);ct=cs.TemplateInstance=dR.Class({get_Doc:function(){return this.doc;}},r,ct);ct.New=dR.Ctor(function(dX,dY){r.New.call(this);this.doc=dY;this.allVars=dX.$==0?dX.$0:bL.FailWith("Should not happen");},ct);cu=cs.ProviderBuilder=dR.Class({WithHole:function(dX){this.h.push(dX);return this;}},null,cu);cu.Make=function(){var dX;return cu.New(null,(dX=bK.NewGuid(),a.String(dX)),[]);};cu.New=function(dX,dY,dZ){return new cu({i:dX,k:dY,h:dZ});};cv.EventQ2=function(dX,dY,dZ,d0){return{$:5,$0:dY,$1:true,$2:function(d1){return function(d2){return d0({Vars:dZ(),Target:d1,Event:d2});};}};};cv.CompleteHoles=function(dX,dY,dZ){var d1,d2,d3,d4,d5,d6;function d0(d7,d8){var d9,d_,d$,ea;return d2.Contains(d7)?null:(d9=d8===0?(d_=cb.Create$1(""),[{$:8,$0:d7,$1:d_},d_]):d8===1?(d$=cb.Create$1(0),[{$:13,$0:d7,$1:d$},d$]):d8===2?(ea=cb.Create$1(false),[{$:9,$0:d7,$1:ea},ea]):bL.FailWith("Invalid value type"),(d1.set_Item(d7,d9[1]),{$:1,$0:d9[0]}));}d1=new bR.New$5();d2=new c4.New$3();d3=cN.Get(dY);try{while(d3.MoveNext()){d4=d3.Current();(d4.$==8?(d5=[d4.$0,cz.Box(d4.$1)],true):d4.$==11?(d5=[d4.$0,cz.Box(d4.$1)],true):d4.$==10?(d5=[d4.$0,cz.Box(d4.$1)],true):d4.$==13?(d5=[d4.$0,cz.Box(d4.$1)],true):d4.$==12?(d5=[d4.$0,cz.Box(d4.$1)],true):d4.$==9&&(d5=[d4.$0,cz.Box(d4.$1)],true))?(d6=d5[0],d2.Add(d6),d1.set_Item(d6,d5[1])):void 0;}}finally{if(typeof d3=="object"&&"Dispose"in d3)d3.Dispose();}return[bS.append(dY,bN.choose(function(d7){return d0(d7[0],d7[1]);},dZ)),{$:0,$0:d1}];};cw.tile=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"tile"},dX):void 0;};cw.namevalueinput=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},dX):void 0;};cw.namevalue=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"namevalue"},dX):void 0;};cw.action=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"action"},dX):void 0;};cw.actiondisabled=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},dX):void 0;};cx.p$1=function(dX){return"{"+("docName = "+bM.prettyPrint(dX.docName))+"; "+("docDoc = "+cy.p$9(dX.docDoc))+"}";};cw.appframework=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"appframework"},dX):void 0;};cw.wcompsplitterhor=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},dX):void 0;};cw.wcompsplitterver=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},dX):void 0;};cy.p$6=function(dX){return dX.$==1?"VConst "+cy.p$8(dX.$0):"VView "+cy.p$7(dX.$0);};cy.p$3=function(dX){return dX.$==1?"VConst "+cy.p$5(dX.$0):"VView "+cy.p$4(dX.$0);};cx.p=function(dX){return"{"+("actName = "+bM.prettyPrint(dX.actName))+"; "+("actFunction = "+cy.p$1(dX.actFunction))+"; "+("actEnabled = "+cy.p$2(dX.actEnabled))+"}";};cw.fixedsplitterver=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},dX):void 0;};cw.fixedsplitterhor=function(dX){c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},dX):void 0;};cy.p$10=function(dX){return dX.$==1?"UnQuoted "+bM.prettyPrint(dX.$0):"Quoted "+bM.prettyPrint(dX.$0);};cy.p=function(dX){return dX.$==1?"FullRef ("+bM.prettyPrint(dX.$0)+", "+bM.prettyPrint(dX.$1)+")":"LocalRef "+bM.prettyPrint(dX.$0);};cy.p$11=function(dX){return dX.$==4?"PrActRef "+cy.p$16(dX.$0):dX.$==3?"PrViwRef "+cy.p$14(dX.$0):dX.$==2?"PrVarRef "+cy.p$13(dX.$0):dX.$==1?"PrDocRef "+cy.p$15(dX.$0):"PrTextValL "+bM.printList(function(dY){return cy.p$12(dY);},dX.$0);};cw.snippet=function(dX){c0.LoadLocalTemplates("templates");return dX?c0.NamedTemplate("templates",{$:1,$0:"snippet"},dX):void 0;};cw.appfwkclient=function(dX){cw.fixedsplitterhor();cw.fixedsplitterver();c0.LoadLocalTemplates("appframework");return dX?c0.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},dX):void 0;};cy.p$9=function(dX){return dX.$==5?"FunDoc5 (<fun>, "+bM.prettyPrint(dX.$1)+", "+bM.prettyPrint(dX.$2)+", "+bM.prettyPrint(dX.$3)+", "+bM.prettyPrint(dX.$4)+", "+bM.prettyPrint(dX.$5)+")":dX.$==4?"FunDoc4 (<fun>, "+bM.prettyPrint(dX.$1)+", "+bM.prettyPrint(dX.$2)+", "+bM.prettyPrint(dX.$3)+", "+bM.prettyPrint(dX.$4)+")":dX.$==3?"FunDoc3 (<fun>, "+bM.prettyPrint(dX.$1)+", "+bM.prettyPrint(dX.$2)+", "+bM.prettyPrint(dX.$3)+")":dX.$==2?"FunDoc2 (<fun>, "+bM.prettyPrint(dX.$1)+", "+bM.prettyPrint(dX.$2)+")":dX.$==1?"FunDoc1 (<fun>, "+bM.prettyPrint(dX.$1)+")":"LazyDoc "+bM.prettyPrint(dX.$0);};cy.p$8=function(dX){return dX.$==1?"Choice2Of2 "+bM.prettyPrint(dX.$0):"Choice1Of2 "+bM.prettyPrint(dX.$0);};cy.p$7=function(dX){return"View <fun>";};cy.p$5=function(dX){return dX.$==1?"Choice2Of2 "+cx.p(dX.$0):"Choice1Of2 "+bM.prettyPrint(dX.$0);};cy.p$4=function(dX){return"View <fun>";};cy.p$1=function(dX){return dX.$==2?"FunAct2 (<fun>, "+bM.prettyPrint(dX.$1)+", "+bM.prettyPrint(dX.$2)+")":dX.$==1?"FunAct1 (<fun>, "+bM.prettyPrint(dX.$1)+")":"FunAct0 <fun>";};cy.p$2=function(dX){return"View <fun>";};cy.p$16=function(dX){return"ActRef "+cy.p(dX.$0);};cy.p$14=function(dX){return"ViwRef "+cy.p(dX.$0);};cy.p$13=function(dX){return"VarRef "+cy.p(dX.$0);};cy.p$15=function(dX){return"DocRef "+cy.p(dX.$0);};cy.p$12=function(dX){return dX.$==2?"TvViwRef "+cy.p$14(dX.$0):dX.$==1?"TvVarRef "+cy.p$13(dX.$0):"TvConst "+bM.prettyPrint(dX.$0);};cz.Box=a.id;cA.DynamicCustom=function(dX,dY){return c6.Dynamic(dY,dX);};cA.DynamicStyle=function(dX,dY){return c6.Dynamic(dY,function(dZ){return function(d0){return cX.SetStyle(dZ,dX,d0);};});};cA.Style=function(dX,dY){return c6.Static(function(dZ){cX.SetStyle(dZ,dX,dY);});};cA.Dynamic=function(dX,dY){return c6.Dynamic(dY,function(dZ){return function(d0){return cX.SetAttr(dZ,dX,d0);};});};cA.DynamicPred=function(dX,dY,dZ){function d0(d1,d2){return d2[0]?cX.SetAttr(d1,dX,d2[1]):cX.RemoveAttr(d1,dX);}return c6.Dynamic(b9.Map2(function(d1,d2){return[d1,d2];},dY,dZ),function(d1){return function(d2){return d0(d1,d2);};});};cA.Value=function(dX){function dY(dZ){return{$:1,$0:dZ};}return cA.CustomValue(dX,a.id,function(dZ){return dY(a.id(dZ));});};cA.CustomValue=function(dX,dY,dZ){return cA.CustomVar(dX,function(d0,d1){d0.value=dY(d1);},function(d0){return dZ(d0.value);});};cA.CustomVar=function(dX,dY,dZ){function d0(d2,d3){return dX.UpdateMaybe(function(d4){var d5,d6;d5=dZ(d2);return d5!=null&&d5.$==1&&(!bP.Equals(d5.$0,d4)&&(d6=[d5,d5.$0],true))?d6[0]:null;});}function d1(d2,d3){var d4,d5;d4=dZ(d2);return d4!=null&&d4.$==1&&(bP.Equals(d4.$0,d3)&&(d5=d4.$0,true))?null:dY(d2,d3);}return cC.Concat([cA.Handler("change",function(d2){return function(d3){return d0(d2,d3);};}),cA.Handler("input",function(d2){return function(d3){return d0(d2,d3);};}),cA.Handler("keypress",function(d2){return function(d3){return d0(d2,d3);};}),cA.DynamicCustom(function(d2){return function(d3){return d1(d2,d3);};},dX.get_View())]);};cA.Handler=function(dX,dY){return c6.Static(function(dZ){dZ.addEventListener(dX,function(d0){return(dY(dZ))(d0);},false);});};cA.OnAfterRender=function(dX){return new cC({$:4,$0:dX});};cA.Checked=function(dX){function dY(dZ,d0){return!bP.Equals(dX.Get(),dZ.checked)?dX.Set(dZ.checked):null;}return cC.Concat([cA.DynamicProp("checked",dX.get_View()),cA.Handler("change",function(dZ){return function(d0){return dY(dZ,d0);};})]);};cA.IntValue=function(dX){return cA.CustomVar(dX,function(dY,dZ){var d0;d0=dZ.get_Input();return dY.value!==d0?void(dY.value=d0):null;},function(dY){var dZ,d0,d1;dZ=dY.value;return{$:1,$0:dK.isBlank(dZ)?(dY.checkValidity?dY.checkValidity():true)?new dj({$:2,$0:dZ}):new dj({$:1,$0:dZ}):(d0=(d1=0,[ca.TryParseInt32(dZ,{get:function(){return d1;},set:function(d2){d1=d2;}}),d1]),d0[0]?new dj({$:0,$0:d0[1],$1:dZ}):new dj({$:1,$0:dZ}))};});};cA.IntValueUnchecked=function(dX){return cA.CustomValue(dX,a.String,function(dY){var dZ;return dK.isBlank(dY)?{$:1,$0:0}:(dZ=+dY,dZ!==dZ>>0?null:{$:1,$0:dZ});});};cA.FloatValue=function(dX){return cA.CustomVar(dX,function(dY,dZ){var d0;d0=dZ.get_Input();return dY.value!==d0?void(dY.value=d0):null;},function(dY){var dZ,d0;dZ=dY.value;return{$:1,$0:dK.isBlank(dZ)?(dY.checkValidity?dY.checkValidity():true)?new dj({$:2,$0:dZ}):new dj({$:1,$0:dZ}):(d0=+dZ,a.isNaN(d0)?new dj({$:1,$0:dZ}):new dj({$:0,$0:d0,$1:dZ}))};});};cA.FloatValueUnchecked=function(dX){return cA.CustomValue(dX,a.String,function(dY){var dZ;return dK.isBlank(dY)?{$:1,$0:0}:(dZ=+dY,a.isNaN(dZ)?null:{$:1,$0:dZ});});};cA.DynamicProp=function(dX,dY){return c6.Dynamic(dY,function(dZ){return function(d0){dZ[dX]=d0;};});};cB.Create=function(dX){return c8.New(false,dX,cB.forceLazy);};cB.forceLazy=function(){var dX;dX=this.v();this.c=true;this.v=dX;this.f=cB.cachedLazy;return dX;};cB.cachedLazy=function(){return this.v;};cC=b4.AttrProxy=dR.Class({},null,cC);cC.Create=function(dX,dY){return c6.Static(function(dZ){cX.SetAttr(dZ,dX,dY);});};cC.Concat=function(dX){var dY;dY=c9.ofSeqNonCopying(dX);return c9.TreeReduce(c6.EmptyAttr(),cC.Append,dY);};cC.HandlerImpl=function(dX,dY){return c6.Static(function(dZ){dZ.addEventListener(dX,function(d0){return(dY(dZ))(d0);},false);});};cC.OnAfterRenderImpl=function(dX){return new cC({$:4,$0:dX});};cC.Append=function(dX,dY){return c6.AppendTree(dX,dY);};cC.Handler=function(dX,dY){return cC.HandlerImpl(dX,dY);};cE=q.MatchFailureException=dR.Class({},cD,cE);cE.New=dR.Ctor(function(dX,dY,dZ){this.message=dX+" at "+a.String(dY)+":"+a.String(dZ);cM.setPrototypeOf(this,cE.prototype);},cE);cF.traverseSeq=function(dX,dY){return cF.map(a.id,bN.foldBack(function(dZ,d0){return cF.op_GreaterGreaterEquals(dX(dZ),function(d1){return cF.op_GreaterGreaterEquals(d0,function(d2){return cF.rtn(new bY({$:1,$0:d1,$1:d2}));});});},bN.ofSeq(dY),cF.rtn(bY.Empty)));};cF.insertWO=function(dX){return dX==null?b9.Const(null):b9.Map(function(dY){return{$:1,$0:dY};},dX.$0);};cF.traverseListApp=function(dX,dY){function dZ(d0,d1){return new bY({$:1,$0:d0,$1:d1});}return bU.foldBack(function(d0,d1){return cF.op_LessMultiplyGreater(cF.op_LessMultiplyGreater(cF.rtn(function(d2){return function(d3){return dZ(d2,d3);};}),dX(d0)),d1);},dY,cF.rtn(bY.Empty));};cF.rtn=function(dX){return b9.Const(dX);};cF.map=function(dX,dY){return b9.Map(dX,dY);};cF.op_GreaterGreaterEquals=function(dX,dY){return cF.bind(dY,dX);};cF.op_LessMultiplyGreater=function(dX,dY){return b9.Apply(dX,dY);};cF.bind=function(dX,dY){return b9.Bind(dX,dY);};cG.refreshLM=function(dX,dY){var dZ;dX.AppendMany(dY);dZ=new b2.New(bS.map(dX.key,dY));bS.iter(function(d0){if(!dZ.Contains(dX.key(d0)))dX.RemoveByKey(dX.key(d0));},bS.cache(dX));};cH.B={$:0};cp.Create=function(dX,dY){return cp.CreateWithStorage(dX,db.InMemory(bN.ofSeq(dY)));};cp.CreateWithStorage=function(dX,dY){return new cp.New(dX,dY);};cJ.deserializeWithDefs=function(dX,dY){return cJ.deserialize(function(){return{$:1,$0:0};},function(){return{$:1,$0:0};},function(){return{$:1,$0:""};},function(){return{$:1,$0:false};},function(){return{$:1,$0:[]};},dX,dY);};cJ.deserialize=function(dX,dY,dZ,d0,d1,d2,d3){var d4,d5;function d6(d8){return dW.parse(d8);}function d7(d8){return cJ.getJsonIntermediate(dX,dY,dZ,d0,d1,d8);}d4=function(d8){return d7(d6(d8));};d5=[d2,d3][1];return function(d8){return d5(d4(d8));};};cJ.getJsonIntermediate=function(dX,dY,dZ,d0,d1,d2){function d3(d4){return cJ.getJsonIntermediate(dX,dY,dZ,d0,d1,d4);}return M.New(function(){var d4;d4=!d2?null:typeof d2=="number"?{$:1,$0:d2}:null;return d4==null?dX():d4;},function(){var d4;d4=!d2?null:typeof d2=="number"?{$:1,$0:d2}:null;return d4==null?dY():d4;},function(){var d4;d4=!d2?null:typeof d2=="string"?{$:1,$0:d2}:null;return d4==null?dZ():d4;},function(){var d4;d4=!d2?null:typeof d2=="boolean"?{$:1,$0:d2}:null;return d4==null?d0():d4;},function(){var d4;d4=!d2?null:d2 instanceof a.Array?{$:1,$0:bN.map(d3,d2)}:null;return d4==null?d1(d3):d4;},function(d4){var d5;return!d2?null:(d5=d2[d4],bP.Equals(d5,null)?{$:1,$0:d3(null)}:!d5?null:{$:1,$0:d3(d5)});},function(){return bP.Equals(typeof d2,"object")&&!bP.Equals(d2,null);},function(){return bP.Equals(d2,null);},function(){return(function(d4){return function(d5){return d4(bM.prettyPrint(d5));};}(a.id))(d2);});};cK.html=function(){bX.$cctor();return bX.html;};cL.Delay=function(dX){return function(dY){try{(dX(null))(dY);}catch(dZ){dY.k({$:1,$0:dZ});}};};cL.Bind=function(dX,dY){return cL.checkCancel(function(dZ){dX(dc.New(function(d0){var d1;if(d0.$==0){d1=d0.$0;cL.scheduler().Fork(function(){try{(dY(d1))(dZ);}catch(d2){dZ.k({$:1,$0:d2});}});}else cL.scheduler().Fork(function(){dZ.k(d0);});},dZ.ct));});};cL.Return=function(dX){return function(dY){dY.k({$:0,$0:dX});};};cL.Start=function(dX,dY){var dZ,d0;dZ=(d0=(cL.defCTS())[0],dY==null?d0:dY.$0);cL.scheduler().Fork(function(){if(!dZ.c)dX(dc.New(function(d1){if(d1.$==1)cL.UncaughtAsyncError(d1.$0);},dZ));});};cL.Sleep=function(dX){return function(dY){var dZ,d0;dZ=void 0;d0=void 0;dZ=a.setTimeout(function(){d0.Dispose();cL.scheduler().Fork(function(){dY.k({$:0,$0:null});});},dX);d0=cL.Register(dY.ct,function(){a.clearTimeout(dZ);cL.scheduler().Fork(function(){cL.cancel(dY);});});};};cL.Zero=function(){de.$cctor();return de.Zero;};cL.StartChild=function(dX,dY){return function(dZ){var d0,d1,d2,d3;d0=[true];d1=[null];d2=[];d3=dY!=null&&dY.$==1?{$:1,$0:a.setTimeout(function(){var d4;d0[0]=false;d4={$:1,$0:new dg.New()};while(d2.length>0)(d2.shift())(d4);},dY.$0)}:null;cL.scheduler().Fork(function(){if(!dZ.ct.c)dX(dc.New(function(d4){if(d0[0]){d1[0]={$:1,$0:d4};d3!=null&&d3.$==1?a.clearTimeout(d3.$0):void 0;while(d2.length>0)(d2.shift())(d4);}},dZ.ct));});dZ.k({$:0,$0:function(d4){var d5;if(d0[0]){d5=d1[0];d5==null?d2.push(d4.k):d4.k(d5.$0);}else d4.k({$:1,$0:new dg.New()});}});};};cL.TryWith=function(dX,dY){return function(dZ){dX(dc.New(function(d0){if(d0.$==0)dZ.k({$:0,$0:d0.$0});else if(d0.$==1)try{(dY(d0.$0))(dZ);}catch(d1){dZ.k(d0);}else dZ.k(d0);},dZ.ct));};};cL.TryFinally=function(dX,dY){return function(dZ){dX(dc.New(function(d0){try{dY();dZ.k(d0);}catch(d1){dZ.k({$:1,$0:d1});}},dZ.ct));};};cL.Using=function(dX,dY){return cL.TryFinally(dY(dX),function(){dX.Dispose();});};cL.checkCancel=function(dX){return function(dY){if(dY.ct.c)cL.cancel(dY);else dX(dY);};};cL.defCTS=function(){de.$cctor();return de.defCTS;};cL.UncaughtAsyncError=function(dX){dP.log("WebSharper: Uncaught asynchronous exception",dX);};cL.Register=function(dX,dY){var dZ;return dX===cL.noneCT()?{Dispose:function(){return null;}}:(dZ=dX.r.push(dY)-1,{Dispose:function(){return bN.set(dX.r,dZ,a.ignore);}});};cL.cancel=function(dX){dX.k({$:2,$0:new dn.New(dX.ct)});};cL.FromContinuations=function(dX){return function(dY){var dZ;function d0(d1){if(dZ[0])bL.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{dZ[0]=true;cL.scheduler().Fork(d1);}}dZ=[false];dX(function(d1){d0(function(){dY.k({$:0,$0:d1});});},function(d1){d0(function(){dY.k({$:1,$0:d1});});},function(d1){d0(function(){dY.k({$:2,$0:d1});});});};};cL.While=function(dX,dY){return dX()?cL.Bind(dY,function(){return cL.While(dX,dY);}):cL.Return();};cL.StartWithContinuations=function(dX,dY,dZ,d0,d1){var d2,d3;d2=(d3=(cL.defCTS())[0],d1==null?d3:d1.$0);!d2.c?dX(dc.New(function(d4){if(d4.$==1)dZ(d4.$0);else if(d4.$==2)d0(d4.$0);else dY(d4.$0);},d2)):void 0;};cL.scheduler=function(){de.$cctor();return de.scheduler;};cL.noneCT=function(){de.$cctor();return de.noneCT;};cN.Get=function(dX){return dX instanceof a.Array?cN.ArrayEnumerator(dX):bP.Equals(typeof dX,"string")?cN.StringEnumerator(dX):dX.GetEnumerator();};cN.ArrayEnumerator=function(dX){return new cO.New(0,null,function(dY){var dZ;dZ=dY.s;return dZ<bN.length(dX)&&(dY.c=bN.get(dX,dZ),dY.s=dZ+1,true);},void 0);};cN.StringEnumerator=function(dX){return new cO.New(0,null,function(dY){var dZ;dZ=dY.s;return dZ<dX.length&&(dY.c=dX[dZ],dY.s=dZ+1,true);},void 0);};cN.Get0=function(dX){return dX instanceof a.Array?cN.ArrayEnumerator(dX):bP.Equals(typeof dX,"string")?cN.StringEnumerator(dX):"GetEnumerator0"in dX?dX.GetEnumerator0():dX.GetEnumerator();};cO=cN.T=dR.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},r,cO);cO.New=dR.Ctor(function(dX,dY,dZ,d0){r.New.call(this);this.s=dX;this.c=dY;this.n=dZ;this.d=d0;},cO);cP.alreadyAdded=function(){return bL.FailWith("An item with the same key has already been added.");};cP.notPresent=function(){return bL.FailWith("The given key was not present in the dictionary.");};cQ=q.AggregateException=dR.Class({},cD,cQ);cQ.New$3=dR.Ctor(function(dX){cQ.New$4.call(this,"One or more errors occurred.",dX);},cQ);cQ.New$4=dR.Ctor(function(dX,dY){this.message=dX;cM.setPrototypeOf(this,cQ.prototype);this.innerExceptions=dY;},cQ);ca.TryParseInt64=function(dX,dY){return ca.TryParse(dX,-9223372036854775808,9223372036854775807,dY);};cS.OfSeq=function(dX){var dY;dY=bN.ofSeq(bS.distinct(dX));bN.sortInPlace(dY);return cS.Build(dY,0,dY.length-1);};cS.Remove=function(dX,dY){var dZ,d0,d1,d2;dZ=cS.Lookup(dX,dY);d0=dZ[0];d1=dZ[1];return d0==null?dY:d0.Right==null?cS.Rebuild(d1,d0.Left):d0.Left==null?cS.Rebuild(d1,d0.Right):cS.Rebuild(d1,(d2=bN.ofSeq(bS.append(cS.Enumerate(false,d0.Left),cS.Enumerate(false,d0.Right))),cS.Build(d2,0,d2.length-1)));};cS.Add=function(dX,dY){return cS.Put(function(dZ,d0){return d0;},dX,dY);};cS.TryFind=function(dX,dY){var dZ;dZ=(cS.Lookup(dX,dY))[0];return dZ==null?null:{$:1,$0:dZ.Node};};cS.Contains=function(dX,dY){return!((cS.Lookup(dX,dY))[0]==null);};cS.Build=function(dX,dY,dZ){var d0,d1,d2;return dZ-dY+1<=0?null:(d0=(dY+dZ)/2>>0,(d1=cS.Build(dX,dY,d0-1),(d2=cS.Build(dX,d0+1,dZ),cS.Branch(bN.get(dX,d0),d1,d2))));};cS.Lookup=function(dX,dY){var dZ,d0,d1,d2;dZ=[];d0=dY;d1=true;while(d1)if(d0==null)d1=false;else{d2=bP.Compare(dX,d0.Node);d2===0?d1=false:d2===1?(dZ.unshift([true,d0.Node,d0.Left]),d0=d0.Right):(dZ.unshift([false,d0.Node,d0.Right]),d0=d0.Left);}return[d0,dZ];};cS.Rebuild=function(dX,dY){var dZ,d1,d2,d3,d4,d5,d6,d7,d8,d9;function d0(d_){return d_==null?0:d_.Height;}dZ=dY;for(d1=0,d2=bN.length(dX)-1;d1<=d2;d1++){dZ=(d3=bN.get(dX,d1),d3[0]?(d4=d3[1],(d5=d3[2],d0(dZ)>d0(d5)+1?d0(dZ.Left)===d0(dZ.Right)+1?(d6=dZ.Left,cS.Branch(d6.Node,cS.Branch(d4,d5,d6.Left),cS.Branch(dZ.Node,d6.Right,dZ.Right))):cS.Branch(dZ.Node,cS.Branch(d4,d5,dZ.Left),dZ.Right):cS.Branch(d4,d5,dZ))):(d7=d3[1],(d8=d3[2],d0(dZ)>d0(d8)+1?d0(dZ.Right)===d0(dZ.Left)+1?(d9=dZ.Right,cS.Branch(d9.Node,cS.Branch(dZ.Node,dZ.Left,d9.Left),cS.Branch(d7,d9.Right,d8))):cS.Branch(dZ.Node,dZ.Left,cS.Branch(d7,dZ.Right,d8)):cS.Branch(d7,dZ,d8))));}return dZ;};cS.Put=function(dX,dY,dZ){var d0,d1;d0=cS.Lookup(dY,dZ);d1=d0[0];return d1==null?cS.Rebuild(d0[1],cS.Branch(dY,null,null)):cS.Rebuild(d0[1],cS.Branch(dX(d1.Node,dY),d1.Left,d1.Right));};cS.Enumerate=function(dX,dY){function dZ(d0,d1){var d2;while(true)if(d0==null)return d1.$==1?{$:1,$0:[d1.$0[0],[d1.$0[1],d1.$1]]}:null;else if(dX){d2=d0;d0=d2.Right;d1=new bY({$:1,$0:[d2.Node,d2.Left],$1:d1});}else{d2=d0;d0=d2.Left;d1=new bY({$:1,$0:[d2.Node,d2.Right],$1:d1});}}return bS.unfold(function(d0){return dZ(d0[0],d0[1]);},[dY,bY.Empty]);};cS.Branch=function(dX,dY,dZ){var d0,d1;return cU.New(dX,dY,dZ,1+(d0=dY==null?0:dY.Height,(d1=dZ==null?0:dZ.Height,bP.Compare(d0,d1)===1?d0:d1)),1+(dY==null?0:dY.Count)+(dZ==null?0:dZ.Count));};cT.fromSeq=function(dX){var dY;dY=bN.ofSeq(bS.delay(function(){return bS.collect(function(dZ){return[c$.New(dZ[0],dZ[1])];},bS.distinctBy(function(dZ){return dZ[0];},dX));}));bN.sortInPlace(dY);return cS.Build(dY,0,dY.length-1);};cU.New=function(dX,dY,dZ,d0,d1){return{Node:dX,Left:dY,Right:dZ,Height:d0,Count:d1};};bS.insufficient=function(){return bL.FailWith("The input sequence has an insufficient number of elements.");};bS.tryItem=function(dX,dY){var dZ,d0,d1;if(dX<0)return null;else{dZ=0;d0=cN.Get(dY);try{d1=true;while(d1&&dZ<=dX)if(d0.MoveNext())dZ=dZ+1;else d1=false;return d1?{$:1,$0:d0.Current()}:null;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}}};bS.tryHead=function(dX){var dY;dY=cN.Get(dX);try{return dY.MoveNext()?{$:1,$0:dY.Current()}:null;}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}};bN.groupBy=function(dX,dY){var dZ,d0,d1,d2,d3,d4;dZ=new bR.New$5();d0=[];for(d1=0,d2=bN.length(dY)-1;d1<=d2;d1++){d3=dY[d1];d4=dX(d3);dZ.ContainsKey(d4)?dZ.get_Item(d4).push(d3):(d0.push(d4),dZ.Add(d4,[d3]));}bN.mapInPlace(function(d5){return[d5,dZ.get_Item(d5)];},d0);return d0;};bS.last=function(dX){var dY,dZ;dY=cN.Get(dX);try{if(!dY.MoveNext())dZ=bS.insufficient();else{while(dY.MoveNext());dZ=dY.Current();}return dZ;}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}};bS.contains=function(dX,dY){var dZ,d0;dZ=cN.Get(dY);try{d0=false;while(!d0&&dZ.MoveNext())d0=bP.Equals(dZ.Current(),dX);return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bN.mapiInPlace=function(dX,dY){var dZ,d0;for(dZ=0,d0=dY.length-1;dZ<=d0;dZ++)dY[dZ]=dX(dZ,dY[dZ]);return dY;};bN.mapInPlace=function(dX,dY){var dZ,d0;for(dZ=0,d0=dY.length-1;dZ<=d0;dZ++)dY[dZ]=dX(dY[dZ]);};bS.nonNegative=function(){return bL.FailWith("The input must be non-negative.");};cV=b4.Elt=dR.Class({on:function(dX,dY){var dZ;dZ=this;this.elt.addEventListener(dX,function(d0){return dY(dZ.elt,d0);},false);return this;}},b$,cV);cV.New=function(dX,dY,dZ){var d0,d1;d0=c_.CreateElemNode(dX,dY,dZ.docNode);d1=_do.Create(dZ.updates);return new cV.New$1({$:1,$0:d0},b9.Map2Unit(c6.Updates(d0.Attr),d1.v),dX,d1);};cV.TreeNode=function(dX,dY){var dZ,d0;function d1(d2){return d2[1];}dZ=_do.Create(dY);return new cV.New$1({$:6,$0:dX},b9.Map2Unit((d0=bN.map(function(d2){return c6.Updates(d1(d2));},dX.Attrs),c9.TreeReduce(b9.Const(),b9.Map2Unit,d0)),dZ.v),bN.get(dX.Els,0),dZ);};cV.New$1=dR.Ctor(function(dX,dY,dZ,d0){b$.New.call(this,dX,dY);this.docNode$1=dX;this.updates$1=dY;this.elt=dZ;this.rvUpdates=d0;},cV);cW.Map=function(dX,dY){var dZ,d0;dZ=dY.s;return dZ!=null&&dZ.$==0?cW.New({$:0,$0:dX(dZ.$0)}):(d0=cW.New({$:3,$0:[],$1:[]}),(cW.When(dY,function(d1){cW.MarkDone(d0,dY,dX(d1));},d0),d0));};cW.WhenRun=function(dX,dY,dZ){var d0;d0=dX.s;d0==null?dZ():d0!=null&&d0.$==2?(d0.$1.push(dZ),dY(d0.$0)):d0!=null&&d0.$==3?(d0.$0.push(dY),d0.$1.push(dZ)):dY(d0.$0);};cW.Map2=function(dX,dY,dZ){var d0,d1,d2;function d3(d4){var d5,d6,d7;if(!(d5=d2.s,d5!=null&&d5.$==0||d5!=null&&d5.$==2)){d6=cW.ValueAndForever(dY);d7=cW.ValueAndForever(dZ);d6!=null&&d6.$==1?d7!=null&&d7.$==1?d6.$0[1]&&d7.$0[1]?cW.MarkForever(d2,dX(d6.$0[0],d7.$0[0])):cW.MarkReady(d2,dX(d6.$0[0],d7.$0[0])):void 0:void 0;}}d0=dY.s;d1=dZ.s;return d0!=null&&d0.$==0?d1!=null&&d1.$==0?cW.New({$:0,$0:dX(d0.$0,d1.$0)}):cW.Map2Opt1(dX,d0.$0,dZ):d1!=null&&d1.$==0?cW.Map2Opt2(dX,d1.$0,dY):(d2=cW.New({$:3,$0:[],$1:[]}),(cW.When(dY,d3,d2),cW.When(dZ,d3,d2),d2));};cW.WhenObsoleteRun=function(dX,dY){var dZ;dZ=dX.s;dZ==null?dY():dZ!=null&&dZ.$==2?dZ.$1.push(dY):dZ!=null&&dZ.$==3?dZ.$1.push(dY):void 0;};cW.When=function(dX,dY,dZ){var d0;d0=dX.s;d0==null?cW.Obsolete(dZ):d0!=null&&d0.$==2?(cW.EnqueueSafe(d0.$1,dZ),dY(d0.$0)):d0!=null&&d0.$==3?(d0.$0.push(dY),cW.EnqueueSafe(d0.$1,dZ)):dY(d0.$0);};cW.MarkDone=function(dX,dY,dZ){var d0;if(d0=dY.s,d0!=null&&d0.$==0)cW.MarkForever(dX,dZ);else cW.MarkReady(dX,dZ);};cW.Map2Opt1=function(dX,dY,dZ){return cW.Map(function(d0){return dX(dY,d0);},dZ);};cW.Map2Opt2=function(dX,dY,dZ){return cW.Map(function(d0){return dX(d0,dY);},dZ);};cW.ValueAndForever=function(dX){var dY;dY=dX.s;return dY!=null&&dY.$==0?{$:1,$0:[dY.$0,true]}:dY!=null&&dY.$==2?{$:1,$0:[dY.$0,false]}:null;};cW.MarkForever=function(dX,dY){var dZ,d0,d1,d2;dZ=dX.s;if(dZ!=null&&dZ.$==3){dX.s={$:0,$0:dY};d0=dZ.$0;for(d1=0,d2=bN.length(d0)-1;d1<=d2;d1++)(bN.get(d0,d1))(dY);}else void 0;};cW.MarkReady=function(dX,dY){var dZ,d0,d1,d2;dZ=dX.s;if(dZ!=null&&dZ.$==3){dX.s={$:2,$0:dY,$1:dZ.$1};d0=dZ.$0;for(d1=0,d2=bN.length(d0)-1;d1<=d2;d1++)(bN.get(d0,d1))(dY);}else void 0;};cW.Join=function(dX){var dY;dY=cW.New({$:3,$0:[],$1:[]});cW.When(dX,function(dZ){var d0;d0=dZ();cW.When(d0,function(d1){var d2,d3;if((d2=d0.s,d2!=null&&d2.$==0)&&(d3=dX.s,d3!=null&&d3.$==0))cW.MarkForever(dY,d1);else cW.MarkReady(dY,d1);},dY);},dY);return dY;};cW.EnqueueSafe=function(dX,dY){var dZ,d0,d1,d2;dX.push(dY);if(dX.length%20===0){dZ=dX.slice(0);dH.Clear(dX);for(d0=0,d1=bN.length(dZ)-1;d0<=d1;d0++){d2=bN.get(dZ,d0);typeof d2=="object"?function(d3){if(d3.s)dX.push(d3);}(d2):function(d3){dX.push(d3);}(d2);}}else void 0;};cW.MapAsync=function(dX,dY){var dZ;dZ=cW.New({$:3,$0:[],$1:[]});cW.When(dY,function(d0){da.StartTo(dX(d0),function(d1){cW.MarkDone(dZ,dY,d1);});},dZ);return dZ;};cW.TryGet=function(dX){var dY,dZ;dY=dX.s;return(dY!=null&&dY.$==0?(dZ=dY.$0,true):dY!=null&&dY.$==2&&(dZ=dY.$0,true))?{$:1,$0:dZ}:null;};cW.Map2Unit=function(dX,dY){var dZ,d0,d1;function d2(){var d3,d4,d5;if(!(d3=d1.s,d3!=null&&d3.$==0||d3!=null&&d3.$==2)){d4=cW.ValueAndForever(dX);d5=cW.ValueAndForever(dY);d4!=null&&d4.$==1?d5!=null&&d5.$==1?d4.$0[1]&&d5.$0[1]?cW.MarkForever(d1,null):cW.MarkReady(d1,null):void 0:void 0;}}dZ=dX.s;d0=dY.s;return dZ!=null&&dZ.$==0?d0!=null&&d0.$==0?cW.New({$:0,$0:null}):dY:d0!=null&&d0.$==0?dX:(d1=cW.New({$:3,$0:[],$1:[]}),(cW.When(dX,d2,d1),cW.When(dY,d2,d1),d1));};cW.Copy=function(dX){var dY,dZ,d0;dY=dX.s;return dY==null?dX:dY!=null&&dY.$==2?(dZ=cW.New({$:2,$0:dY.$0,$1:[]}),(cW.WhenObsolete(dX,dZ),dZ)):dY!=null&&dY.$==3?(d0=cW.New({$:3,$0:[],$1:[]}),(cW.When(dX,function(d1){cW.MarkDone(d0,dX,d1);},d0),d0)):dX;};cW.WhenObsolete=function(dX,dY){var dZ;dZ=dX.s;dZ==null?cW.Obsolete(dY):dZ!=null&&dZ.$==2?cW.EnqueueSafe(dZ.$1,dY):dZ!=null&&dZ.$==3?cW.EnqueueSafe(dZ.$1,dY):void 0;};cW.Map3=function(dX,dY,dZ,d0){var d1,d2,d3,d4;function d5(d6){var d7,d8,d9,d_;if(!(d7=d4.s,d7!=null&&d7.$==0||d7!=null&&d7.$==2)){d8=cW.ValueAndForever(dY);d9=cW.ValueAndForever(dZ);d_=cW.ValueAndForever(d0);d8!=null&&d8.$==1?d9!=null&&d9.$==1?d_!=null&&d_.$==1?d8.$0[1]&&d9.$0[1]&&d_.$0[1]?cW.MarkForever(d4,dX(d8.$0[0],d9.$0[0],d_.$0[0])):cW.MarkReady(d4,dX(d8.$0[0],d9.$0[0],d_.$0[0])):void 0:void 0:void 0;}}d1=dY.s;d2=dZ.s;d3=d0.s;return d1!=null&&d1.$==0?d2!=null&&d2.$==0?d3!=null&&d3.$==0?cW.New({$:0,$0:dX(d1.$0,d2.$0,d3.$0)}):cW.Map3Opt1(dX,d1.$0,d2.$0,d0):d3!=null&&d3.$==0?cW.Map3Opt2(dX,d1.$0,d3.$0,dZ):cW.Map3Opt3(dX,d1.$0,dZ,d0):d2!=null&&d2.$==0?d3!=null&&d3.$==0?cW.Map3Opt4(dX,d2.$0,d3.$0,dY):cW.Map3Opt5(dX,d2.$0,dY,d0):d3!=null&&d3.$==0?cW.Map3Opt6(dX,d3.$0,dY,dZ):(d4=cW.New({$:3,$0:[],$1:[]}),(cW.When(dY,d5,d4),cW.When(dZ,d5,d4),cW.When(d0,d5,d4),d4));};cW.Sequence=function(dX){var dY,dZ,d0;function d1(d2){var d3;if(d0[0]===0){d3=bN.map(function(d4){var d5;d5=d4.s;return d5!=null&&d5.$==0?d5.$0:d5!=null&&d5.$==2?d5.$0:bL.FailWith("value not found by View.Sequence");},dY);bN.forall(function(d4){var d5;d5=d4.s;return d5!=null&&d5.$==0;},dY)?cW.MarkForever(dZ,d3):cW.MarkReady(dZ,d3);}else d0[0]--;}dY=bN.ofSeq(dX);return dY.length==0?cW.New({$:0,$0:[]}):(dZ=cW.New({$:3,$0:[],$1:[]}),(d0=[bN.length(dY)-1],(bN.iter(function(d2){cW.When(d2,d1,dZ);},dY),dZ)));};cW.Map3Opt1=function(dX,dY,dZ,d0){return cW.Map(function(d1){return dX(dY,dZ,d1);},d0);};cW.Map3Opt2=function(dX,dY,dZ,d0){return cW.Map(function(d1){return dX(dY,d1,dZ);},d0);};cW.Map3Opt3=function(dX,dY,dZ,d0){return cW.Map2(function(d1,d2){return dX(dY,d1,d2);},dZ,d0);};cW.Map3Opt4=function(dX,dY,dZ,d0){return cW.Map(function(d1){return dX(d1,dY,dZ);},d0);};cW.Map3Opt5=function(dX,dY,dZ,d0){return cW.Map2(function(d1,d2){return dX(d1,dY,d2);},dZ,d0);};cW.Map3Opt6=function(dX,dY,dZ,d0){return cW.Map2(function(d1,d2){return dX(d1,d2,dY);},dZ,d0);};cX.CreateElement=function(dX){return cX.Doc().createElement(dX);};cX.SetStyle=function(dX,dY,dZ){cX.SetProperty(dX.style,dY,dZ);};cX.SetAttr=function(dX,dY,dZ){dX.setAttribute(dY,dZ);};cX.CreateText=function(dX){return cX.Doc().createTextNode(dX);};cX.Doc=function(){dp.$cctor();return dp.Doc;};cX.SetProperty=function(dX,dY,dZ){return dX.setProperty(dY,dZ);};cX.RemoveAttr=function(dX,dY){dX.removeAttribute(dY);};cX.RemoveClass=function(dX,dY){var dZ;cX.setClass(dX,(dZ=cX.clsRE(dY),cX.getClass(dX).replace(dZ,function(d0,d1,d2){return d1===""||d2===""?"":" ";})));};cX.AddClass=function(dX,dY){var dZ;dZ=cX.getClass(dX);dZ===""?cX.setClass(dX,dY):!cX.clsRE(dY).test(dZ)?cX.setClass(dX,dZ+" "+dY):void 0;};cX.ChildrenArray=function(dX){var dY,dZ,d0;dY=[];for(dZ=0,d0=dX.childNodes.length-1;dZ<=d0;dZ++)dY.push(dX.childNodes[dZ]);return dY;};cX.setClass=function(dX,dY){if(dX instanceof a.SVGElement)dX.setAttribute("class",dY);else dX.className=dY;};cX.getClass=function(dX){return dX instanceof a.SVGElement?dX.getAttribute("class"):dX.className;};cX.clsRE=function(dX){return new a.RegExp("(\\s+|^)"+dX+"(?:\\s+"+dX+")*(\\s+|$)","g");};cX.IterSelector=function(dX,dY,dZ){var d0,d1,d2;d0=dX.querySelectorAll(dY);for(d1=0,d2=d0.length-1;d1<=d2;d1++)dZ(d0[d1]);};cX.InsertAt=function(dX,dY,dZ){var d0;if(!(dZ.parentNode===dX&&dY===(d0=dZ.nextSibling,bP.Equals(d0,null)?null:d0)))dX.insertBefore(dZ,dY);};cX.RemoveNode=function(dX,dY){if(dY.parentNode===dX)dX.removeChild(dY);};cY=b4.ConcreteVar=dR.Class({get_View:function(){return this.view;},Set:function(dX){if(this.isConst)(function(dY){return dY("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(dY){dP.log(dY);}));else{cW.Obsolete(this.snap);this.current=dX;this.snap=cW.New({$:2,$0:dX,$1:[]});}},Get:function(){return this.current;},Update:function(dX){this.Set(dX(this.Get()));},UpdateMaybe:function(dX){var dY;dY=dX(this.Get());dY!=null&&dY.$==1?this.Set(dY.$0):void 0;}},b_,cY);cY.New=dR.Ctor(function(dX,dY,dZ){var d0;d0=this;b_.New.call(this);this.isConst=dX;this.current=dZ;this.snap=dY;this.view=function(){return d0.snap;};this.id=c2.Int();},cY);c0.LoadLocalTemplates=function(dX){!c0.LocalTemplatesLoaded()?(c0.set_LocalTemplatesLoaded(true),c0.LoadNestedTemplates(self.document.body,"")):void 0;c0.LoadedTemplates().set_Item(dX,c0.LoadedTemplateFile(""));};c0.NamedTemplate=function(dX,dY,dZ){var d0,d1;d0=(d1=null,[c0.LoadedTemplateFile(dX).TryGetValue(dY==null?"":dY.$0,{get:function(){return d1;},set:function(d2){d1=d2;}}),d1]);return d0[0]?c0.ChildrenTemplate(d0[1].cloneNode(true),dZ):(dP.warn("Local template doesn't exist",dY),b$.get_Empty());};c0.LocalTemplatesLoaded=function(){dq.$cctor();return dq.LocalTemplatesLoaded;};c0.set_LocalTemplatesLoaded=function(dX){dq.$cctor();dq.LocalTemplatesLoaded=dX;};c0.LoadNestedTemplates=function(dX,dY){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;function dZ(ec){var ed,ee;if(!d0.ContainsKey(ec)){ed=(ee=null,[d1.TryGetValue(ec,{get:function(){return ee;},set:function(ef){ee=ef;}}),ee]);ed[0]?(eb.Add(ec),d1.Remove(ec),c0.PrepareTemplateStrict(dY,{$:1,$0:ec},ed[1][0],{$:1,$0:ed[1][1]},{$:1,$0:dZ})):dP.warn(eb.Contains(ec)?"Encountered loop when instantiating "+ec:"Local template does not exist: "+ec);}}d0=c0.LoadedTemplateFile(dY);d1=new bR.New$5();d2=dX.querySelectorAll("[ws-template]");for(d3=0,d4=d2.length-1;d3<=d4;d3++){d5=d2[d3];d6=d5.getAttribute("ws-template").toLowerCase();d5.removeAttribute("ws-template");d1.set_Item(d6,[[d5],c0.FakeRootSingle(d5)]);}d7=dX.querySelectorAll("[ws-children-template]");for(d8=0,d9=d7.length-1;d8<=d9;d8++){d_=d7[d8];d$=d_.getAttribute("ws-children-template").toLowerCase();d_.removeAttribute("ws-children-template");d1.set_Item(d$,(ea=cX.ChildrenArray(d_),[ea,c0.FakeRoot(ea)]));}eb=new c4.New$3();while(d1.count>0)dZ(bS.head(d1.get_Keys()));};c0.LoadedTemplates=function(){dq.$cctor();return dq.LoadedTemplates;};c0.LoadedTemplateFile=function(dX){var dY,dZ,d0;dY=(dZ=null,[c0.LoadedTemplates().TryGetValue(dX,{get:function(){return dZ;},set:function(d1){dZ=d1;}}),dZ]);return dY[0]?dY[1]:(d0=new bR.New$5(),(c0.LoadedTemplates().set_Item(dX,d0),d0));};c0.ChildrenTemplate=function(dX,dY){var dZ,d0,d1,d2,d3;dZ=c0.InlineTemplate(dX,dY);d0=dZ[1];d1=dZ[0];d2=d1.Els;return!bP.Equals(d2,null)&&d2.length===1&&(bN.get(d2,0)instanceof cf&&(bP.Equals(bN.get(d2,0).nodeType,cf.ELEMENT_NODE)&&(d3=bN.get(d2,0),true)))?cV.TreeNode(d1,d0):b$.Mk({$:6,$0:d1},d0);};c0.FakeRootSingle=function(dX){var dY,dZ,d0;dX.removeAttribute("ws-template");dY=dX.getAttribute("ws-replace");dY===null?void 0:(dX.removeAttribute("ws-replace"),dZ=dX.parentNode,bP.Equals(dZ,null)?void 0:(d0=self.document.createElement(dX.tagName),d0.setAttribute("ws-replace",dY),dZ.replaceChild(d0,dX)));return c0.FakeRoot([dX]);};c0.FakeRoot=function(dX){var dY,dZ,d0;dY=self.document.createElement("div");for(dZ=0,d0=dX.length-1;dZ<=d0;dZ++)dY.appendChild(bN.get(dX,dZ));return dY;};c0.PrepareTemplateStrict=function(dX,dY,dZ,d0,d1){var d2,d3;function d4(d9,d_){var d$,ea,eb,ec,ed,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez;function ee(eA){}while(true)switch(d9){case 0:if(d_!==null){d$=d_.nextSibling;if(bP.Equals(d_.nodeType,cf.TEXT_NODE))dy.convertTextNode(d_);else if(bP.Equals(d_.nodeType,cf.ELEMENT_NODE))d6(d_);d_=d$;}else return null;break;case 1:ef=bO.string(d_.nodeName,{$:1,$0:3},null).toLowerCase();eg=(ea=ef.indexOf("."),ea===-1?[dX,ef]:[bO.string(ef,null,{$:1,$0:ea-1}),bO.string(ef,{$:1,$0:ea+1},null)]);eh=eg[1];ei=eg[0];if(ei!==""&&!c0.LoadedTemplates().ContainsKey(ei))return dy.failNotLoaded(eh);else{if(ei===""&&d1!=null)d1.$0(eh);ej=c0.LoadedTemplates().get_Item(ei);if(!ej.ContainsKey(eh))return dy.failNotLoaded(eh);else{ek=ej.get_Item(eh);el=ek.cloneNode(true);em=new c4.New$3();en=new bR.New$5();eo=d_.attributes;for(ep=0,eq=eo.length-1;ep<=eq;ep++){er=eo.item(ep).name.toLowerCase();en.set_Item(er,(es=eo.item(ep).nodeValue,es===""?er:es.toLowerCase()));!em.Add(er)?dP.warn("Hole mapped twice",er):void 0;}for(et=0,eu=d_.childNodes.length-1;et<=eu;et++){ev=d_.childNodes[et];bP.Equals(ev.nodeType,cf.ELEMENT_NODE)?!em.Add(ev.nodeName.toLowerCase())?dP.warn("Hole filled twice",eh):void 0:void 0;}ew=d_.childNodes.length===1&&bP.Equals(d_.firstChild.nodeType,cf.TEXT_NODE);if(ew){ec=dy.fillTextHole(el,d_.firstChild.textContent,eh);((function(eA){return function(eB){if(eB!=null)eA(eB.$0);};}((ed=function(eA){return function(eB){return eA.Add(eB);};}(em),function(eA){return ee(ed(eA));})))(ec));}dy.removeHolesExcept(el,em);if(!ew){for(ex=0,ey=d_.childNodes.length-1;ex<=ey;ex++){ez=d_.childNodes[ex];bP.Equals(ez.nodeType,cf.ELEMENT_NODE)?ez.hasAttributes()?dy.fillInstanceAttrs(el,ez):d5(el,ez):void 0;}}dy.mapHoles(el,en);dy.fill(el,d_.parentNode,d_);d_.parentNode.removeChild(d_);return;}}break;}}function d5(d9,d_){var d$,eb,ec;function ea(ed,ee){var ef,eg,eh;if(eb==="title"&&d_.hasChildNodes()){ef=dV.parseHTML(d_.textContent);d_.removeChild(d_.firstChild);for(eg=0,eh=ef.length-1;eg<=eh;eg++)d_.appendChild(bN.get(ef,eg));}else null;d6(d_);return dy.fill(d_,ed,ee);}eb=d_.nodeName.toLowerCase();cX.IterSelector(d9,"[ws-attr-holes]",function(ed){var ee,ef,eg,eh,ei;ee=bT.SplitChars(ed.getAttribute("ws-attr-holes"),[" "],1);for(ef=0,eg=ee.length-1;ef<=eg;ef++){eh=bN.get(ee,ef);ed.setAttribute(eh,(ei=new a.RegExp("\\${"+eb+"}","ig"),ed.getAttribute(eh).replace(ei,d_.textContent)));}});ec=d9.querySelector("[ws-hole="+eb+"]");if(bP.Equals(ec,null)){d$=d9.querySelector("[ws-replace="+eb+"]");return bP.Equals(d$,null)?null:(ea(d$.parentNode,d$),void d$.parentNode.removeChild(d$));}else{while(ec.hasChildNodes())ec.removeChild(ec.lastChild);ec.removeAttribute("ws-hole");return ea(ec,null);}}function d6(d9){if(bT.StartsWith(d9.nodeName.toLowerCase(),"ws-"))d8(d9);else{dy.convertAttrs(d9);d7(d9.firstChild);}}function d7(d9){return d4(0,d9);}function d8(d9){return d4(1,d9);}d2=d0==null?c0.FakeRoot(dZ):d0.$0;d3=(dY==null?"":dY.$0).toLowerCase();c0.LoadedTemplateFile(dX).set_Item(d3,d2);bN.length(dZ)>0?(function(d9){var d_,d$,ea,eb;while(true){d_=d9.querySelector("[ws-template]");if(bP.Equals(d_,null)){d$=d9.querySelector("[ws-children-template]");if(bP.Equals(d$,null))return null;else{ea=d$.getAttribute("ws-children-template");d$.removeAttribute("ws-children-template");c0.PrepareTemplateStrict(dX,{$:1,$0:ea},cX.ChildrenArray(d$),null,null);d9=d9;}}else{eb=d_.getAttribute("ws-template");(c0.PrepareSingleTemplate(dX,{$:1,$0:eb},d_))(null);d9=d9;}}}(d2),d7(bN.get(dZ,0))):void 0;};c0.InlineTemplate=function(dX,dY){var dZ,d0,d1,d2,d5,d6,d7,d8,d9,d_,d$;function d3(ea,eb){var ec,ed,ee;ec=c6.Insert(ea,eb);d6.push(c6.Updates(ec));d7.push([ea,ec]);ed=dR.GetOptional(ec.OnAfterRender);return ed==null?null:(ee=ed.$0,void d8.push(function(){ee(ea);}));}function d4(ea){var eb,ec;eb=(ec=null,[d9.TryGetValue(ea,{get:function(){return ec;},set:function(ed){ec=ed;}}),ec]);return eb[0]?eb[1].$==0?{$:1,$0:eb[1].$1}:eb[1].$==1?{$:1,$0:b$.TextNode(eb[1].$1)}:eb[1].$==2?{$:1,$0:b$.TextView(eb[1].$1)}:eb[1].$==8?{$:1,$0:b$.TextView(eb[1].$1.get_View())}:eb[1].$==9?{$:1,$0:b$.TextView(b9.Map(a.String,eb[1].$1.get_View()))}:eb[1].$==10?{$:1,$0:b$.TextView(b9.Map(function(ed){return ed.get_Input();},eb[1].$1.get_View()))}:eb[1].$==11?{$:1,$0:b$.TextView(b9.Map(a.String,eb[1].$1.get_View()))}:eb[1].$==12?{$:1,$0:b$.TextView(b9.Map(function(ed){return ed.get_Input();},eb[1].$1.get_View()))}:eb[1].$==13?{$:1,$0:b$.TextView(b9.Map(a.String,eb[1].$1.get_View()))}:(dP.warn("Content hole filled with attribute data",ea),null):null;}d5=[];d6=[];d7=[];d8=[];d9=new bR.New$5();d_=cN.Get(dY);try{while(d_.MoveNext()){d$=d_.Current();d9.set_Item(d$.$0,d$);}}finally{if(typeof d_=="object"&&"Dispose"in d_)d_.Dispose();}dZ=cX.ChildrenArray(dX);cX.IterSelector(dX,"[ws-hole]",function(ea){var eb,ec,ed;ed=ea.getAttribute("ws-hole");ea.removeAttribute("ws-hole");while(ea.hasChildNodes())ea.removeChild(ea.lastChild);eb=d4(ed);eb!=null&&eb.$==1?(ec=eb.$0,c_.LinkElement(ea,ec.docNode),d5.push(dh.New(c6.Empty(ea),ec.docNode,null,ea,c2.Int(),null)),d6.push(ec.updates)):void 0;});cX.IterSelector(dX,"[ws-replace]",function(ea){var eb,ec,ed,ee,ef,eg;eb=d4(ea.getAttribute("ws-replace"));eb!=null&&eb.$==1?(ec=eb.$0,ed=ea.parentNode,ee=self.document.createTextNode(""),ed.replaceChild(ee,ea),ef=c_.InsertBeforeDelim(ee,ec.docNode),eg=bN.tryFindIndex(function(eh){return ea===eh;},dZ),eg==null?void 0:bN.set(dZ,eg.$0,ec.docNode),d5.push(dh.New(c6.Empty(ed),ec.docNode,{$:1,$0:[ef,ee]},ed,c2.Int(),null)),d6.push(ec.updates)):void 0;});cX.IterSelector(dX,"[ws-attr]",function(ea){var eb,ec,ed;eb=ea.getAttribute("ws-attr");ea.removeAttribute("ws-attr");ec=(ed=null,[d9.TryGetValue(eb,{get:function(){return ed;},set:function(ee){ed=ee;}}),ed]);ec[0]?ec[1].$==3?d3(ea,ec[1].$1):dP.warn("Attribute hole filled with non-attribute data",eb):void 0;});cX.IterSelector(dX,"[ws-on]",function(ea){d3(ea,cC.Concat(bN.choose(function(eb){var ec,ed,ee;ec=bT.SplitChars(eb,[":"],1);ed=(ee=null,[d9.TryGetValue(bN.get(ec,1),{get:function(){return ee;},set:function(ef){ee=ef;}}),ee]);return ed[0]?ed[1].$==4?{$:1,$0:cA.Handler(bN.get(ec,0),ed[1].$1)}:ed[1].$==5?{$:1,$0:cC.Handler(bN.get(ec,0),ed[1].$2)}:(dP.warn("Event hole on"+bN.get(ec,0)+" filled with non-event data",bN.get(ec,1)),null):null;},bT.SplitChars(ea.getAttribute("ws-on"),[" "],1))));ea.removeAttribute("ws-on");});cX.IterSelector(dX,"[ws-onafterrender]",function(ea){var eb,ec,ed;eb=ea.getAttribute("ws-onafterrender");ec=(ed=null,[d9.TryGetValue(eb,{get:function(){return ed;},set:function(ee){ed=ee;}}),ed]);ec[0]?ec[1].$==6?(ea.removeAttribute("ws-onafterrender"),d3(ea,cA.OnAfterRender(ec[1].$1))):ec[1].$==7?(ea.removeAttribute("ws-onafterrender"),d3(ea,cA.OnAfterRender(ec[1].$1))):dP.warn("onafterrender hole filled with non-onafterrender data",eb):void 0;});cX.IterSelector(dX,"[ws-var]",function(ea){var eb,ec,ed;eb=ea.getAttribute("ws-var");ea.removeAttribute("ws-var");ec=(ed=null,[d9.TryGetValue(eb,{get:function(){return ed;},set:function(ee){ed=ee;}}),ed]);ec[0]?ec[1].$==8?d3(ea,cA.Value(ec[1].$1)):ec[1].$==9?d3(ea,cA.Checked(ec[1].$1)):ec[1].$==10?d3(ea,cA.IntValue(ec[1].$1)):ec[1].$==11?d3(ea,cA.IntValueUnchecked(ec[1].$1)):ec[1].$==12?d3(ea,cA.FloatValue(ec[1].$1)):ec[1].$==13?d3(ea,cA.FloatValueUnchecked(ec[1].$1)):dP.warn("Var hole filled with non-Var data",eb):void 0;});cX.IterSelector(dX,"[ws-attr-holes]",function(ea){var eb,ec,ed,ee;eb=new a.RegExp(c0.TextHoleRE(),"g");ec=bT.SplitChars(ea.getAttribute("ws-attr-holes"),[" "],1);ea.removeAttribute("ws-attr-holes");for(ed=0,ee=ec.length-1;ed<=ee;ed++)(function(){var ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er;eo=bN.get(ec,ed);ep=ea.getAttribute(eo);ef=null;eg=0;eq=[];while(ef=eb.exec(ep),ef!==null){er=bO.string(ep,{$:1,$0:eg},{$:1,$0:eb.lastIndex-bN.get(ef,0).length-1});eg=eb.lastIndex;eq.push([er,bN.get(ef,1)]);}ei=bO.string(ep,{$:1,$0:eg},null);eb.lastIndex=0;ej=bN.foldBack(function(es,et){return(function(eu){var ev,ew;ev=eu[0];ew=eu[1];return function(ex){var ey,ez,eA,eB,eC;ey=ex[0];ez=ex[1];eA=(eB=(eC=null,[d9.TryGetValue(ew,{get:function(){return eC;},set:function(eD){eC=eD;}}),eC]),eB[0]?eB[1].$==1?{$:0,$0:eB[1].$1}:eB[1].$==2?{$:1,$0:eB[1].$1}:eB[1].$==8?{$:1,$0:eB[1].$1.get_View()}:eB[1].$==9?{$:1,$0:b9.Map(a.String,eB[1].$1.get_View())}:eB[1].$==10?{$:1,$0:b9.Map(function(eD){return eD.get_Input();},eB[1].$1.get_View())}:eB[1].$==11?{$:1,$0:b9.Map(a.String,eB[1].$1.get_View())}:eB[1].$==12?{$:1,$0:b9.Map(function(eD){return eD.get_Input();},eB[1].$1.get_View())}:eB[1].$==13?{$:1,$0:b9.Map(a.String,eB[1].$1.get_View())}:(dP.warn("Attribute value hole filled with non-text data",ew),{$:0,$0:""}):{$:0,$0:""});return eA.$==1?[ev,new bY({$:1,$0:ey===""?eA.$0:b9.Map(function(eD){return eD+ey;},eA.$0),$1:ez})]:[ev+eA.$0+ey,ez];};}(es))(et);},eq,[ei,bY.Empty]);return d3(ea,ej[1].$==1?ej[1].$1.$==1?ej[1].$1.$1.$==1?ej[1].$1.$1.$1.$==0?(ek=ej[0],cA.Dynamic(eo,b9.Map3(function(es,et,eu){return ek+es+et+eu;},ej[1].$0,ej[1].$1.$0,ej[1].$1.$1.$0))):(el=ej[0],cA.Dynamic(eo,b9.Map(function(es){return el+bT.concat("",es);},b9.Sequence(ej[1])))):(em=ej[0],cA.Dynamic(eo,b9.Map2(function(es,et){return em+es+et;},ej[1].$0,ej[1].$1.$0))):ej[0]===""?cA.Dynamic(eo,ej[1].$0):(en=ej[0],cA.Dynamic(eo,b9.Map(function(es){return en+es;},ej[1].$0))):cC.Create(eo,ej[0]));}());});return[dR.DeleteEmptyFields({Els:dZ,Dirty:true,Holes:d5,Attrs:d7,Render:(d0=d8.length==0?null:{$:1,$0:function(ea){bN.iter(function(eb){eb(ea);},d8);}},d0?d0.$0:void 0),El:(d1=!bP.Equals(dZ,null)&&dZ.length===1&&(bN.get(dZ,0)instanceof cf&&(bN.get(dZ,0)instanceof a.Element&&(d2=bN.get(dZ,0),true)))?{$:1,$0:d2}:null,d1?d1.$0:void 0)},["Render","El"]),c9.TreeReduce(b9.Const(),b9.Map2Unit,d6)];};c0.PrepareSingleTemplate=function(dX,dY,dZ){var d0,d1,d2;d0=c0.FakeRootSingle(dZ);d1=[dZ];d2={$:1,$0:d0};return function(d3){c0.PrepareTemplateStrict(dX,dY,d1,d2,d3);};};c0.TextHoleRE=function(){dq.$cctor();return dq.TextHoleRE;};c2.Id=function(){c2.set_counter(c2.counter()+1);return"uid"+a.String(c2.counter());};c2.Int=function(){c2.set_counter(c2.counter()+1);return c2.counter();};c2.set_counter=function(dX){du.$cctor();du.counter=dX;};c2.counter=function(){du.$cctor();return du.counter;};cW.Obsolete=function(dX){var dY,dZ,d0,d1,d2;dZ=dX.s;if(dZ==null||(dZ!=null&&dZ.$==2?(dY=dZ.$1,false):dZ!=null&&dZ.$==3?(dY=dZ.$1,false):true))void 0;else{dX.s=null;for(d0=0,d1=bN.length(dY)-1;d0<=d1;d0++){d2=bN.get(dY,d0);typeof d2=="object"?function(d3){cW.Obsolete(d3);}(d2):d2();}}};cW.New=function(dX){return{s:dX};};c3=bQ.List=dR.Class({GetEnumerator:function(){return cN.Get(this);},GetEnumerator0:function(){return cN.Get0(this);}},null,c3);c4=bQ.HashSet=dR.Class({Add:function(dX){return this.add(dX);},Contains:function(dX){var dY;dY=this.data[this.hash(dX)];return dY==null?false:this.arrContains(dX,dY);},add:function(dX){var dY,dZ;dY=this.hash(dX);dZ=this.data[dY];return dZ==null?(this.data[dY]=[dX],this.count=this.count+1,true):this.arrContains(dX,dZ)?false:(dZ.push(dX),this.count=this.count+1,true);},arrContains:function(dX,dY){var dZ,d0,d1,d2;dZ=true;d0=0;d2=dY.length;while(dZ&&d0<d2)if(this.equals.apply(null,[dY[d0],dX]))dZ=false;else d0=d0+1;return!dZ;},ExceptWith:function(dX){var dY;dY=cN.Get(dX);try{while(dY.MoveNext())this.Remove(dY.Current());}finally{if(typeof dY=="object"&&"Dispose"in dY)dY.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(dX){var dY,dZ,d0,d1;dY=0;dZ=dF.concat(this.data);for(d0=0,d1=dZ.length-1;d0<=d1;d0++)bN.set(dX,d0,dZ[d0]);},IntersectWith:function(dX){var dY,dZ,d0,d1,d2;dY=new c4.New$4(dX,this.equals,this.hash);dZ=dF.concat(this.data);for(d0=0,d1=dZ.length-1;d0<=d1;d0++){d2=dZ[d0];!dY.Contains(d2)?this.Remove(d2):void 0;}},Remove:function(dX){var dY;dY=this.data[this.hash(dX)];return dY==null?false:this.arrRemove(dX,dY)&&(this.count=this.count-1,true);},arrRemove:function(dX,dY){var dZ,d0,d1,d2;dZ=true;d0=0;d2=dY.length;while(dZ&&d0<d2)if(this.equals.apply(null,[dY[d0],dX])){dY.splice.apply(dY,[d0,1]);dZ=false;}else d0=d0+1;return!dZ;},GetEnumerator:function(){return cN.Get(dF.concat(this.data));},GetEnumerator0:function(){return cN.Get(dF.concat(this.data));}},r,c4);c4.New$3=dR.Ctor(function(){c4.New$4.call(this,[],bP.Equals,bP.Hash);},c4);c4.New$4=dR.Ctor(function(dX,dY,dZ){var d0;r.New.call(this);this.equals=dY;this.hash=dZ;this.data=[];this.count=0;d0=cN.Get(dX);try{while(d0.MoveNext())this.add(d0.Current());}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}},c4);c4.New$2=dR.Ctor(function(dX){c4.New$4.call(this,dX,bP.Equals,bP.Hash);},c4);c5=b4.FromView=dR.Class({get_View:function(){return this.view;},Set:function(dX){this.set(dX);},Get:function(){return this.current;},Update:function(dX){var dY;b9.Get((dY=this.set,function(dZ){return dY(dX(dZ));}),this.view);},UpdateMaybe:function(dX){var dY;dY=this;b9.Get(function(dZ){var d0;d0=dX(dZ);d0!=null&&d0.$==1?dY.set(d0.$0):void 0;},this.view);}},b_,c5);c5.New=dR.Ctor(function(dX,dY){var dZ,d0;dZ=this;b_.New.call(this);this.set=dY;this.id=c2.Int();this.current=(d0=b9.TryGet(dX),d0==null?null:d0.$0);this.view=b9.Map(function(d1){dZ.current=d1;return d1;},dX);},c5);c6.Dynamic=function(dX,dY){return new cC({$:1,$0:new dk.New(dX,dY)});};c6.Static=function(dX){return new cC({$:3,$0:dX});};c6.Insert=function(dX,dY){var dZ,d0,d1;function d2(d3){if(!(d3===null))if(d3!=null&&d3.$==1)dZ.push(d3.$0);else if(d3!=null&&d3.$==2){d2(d3.$0);d2(d3.$1);}else if(d3!=null&&d3.$==3)d3.$0(dX);else if(d3!=null&&d3.$==4)d0.push(d3.$0);}dZ=[];d0=[];d2(dY);d1=dZ.slice(0);return dw.New(dX,c6.Flags(dY),d1,d0.length===0?null:{$:1,$0:function(d3){bS.iter(function(d4){d4(d3);},d0);}});};c6.EmptyAttr=function(){dx.$cctor();return dx.EmptyAttr;};c6.AppendTree=function(dX,dY){var dZ;return dX===null?dY:dY===null?dX:(dZ=new cC({$:2,$0:dX,$1:dY}),(c6.SetFlags(dZ,c6.Flags(dX)|c6.Flags(dY)),dZ));};c6.Updates=function(dX){return c9.MapTreeReduce(function(dY){return dY.NChanged();},b9.Const(),b9.Map2Unit,dX.DynNodes);};c6.Flags=function(dX){return dX!==null&&dX.hasOwnProperty("flags")?dX.flags:0;};c6.SetFlags=function(dX,dY){dX.flags=dY;};c6.Empty=function(dX){return dw.New(dX,0,[],null);};c6.HasExitAnim=function(dX){var dY;dY=2;return(dX.DynFlags&dY)===dY;};c6.GetExitAnim=function(dX){return c6.GetAnim(dX,function(dY,dZ){return dY.NGetExitAnim(dZ);});};c6.HasEnterAnim=function(dX){var dY;dY=1;return(dX.DynFlags&dY)===dY;};c6.GetEnterAnim=function(dX){return c6.GetAnim(dX,function(dY,dZ){return dY.NGetEnterAnim(dZ);});};c6.HasChangeAnim=function(dX){var dY;dY=4;return(dX.DynFlags&dY)===dY;};c6.GetChangeAnim=function(dX){return c6.GetAnim(dX,function(dY,dZ){return dY.NGetChangeAnim(dZ);});};c6.GetAnim=function(dX,dY){return dr.Concat(bN.map(function(dZ){return dY(dZ,dX.DynElem);},dX.DynNodes));};c6.Sync=function(dX,dY){bN.iter(function(dZ){dZ.NSync(dX);},dY.DynNodes);};c8.New=function(dX,dY,dZ){return{c:dX,v:dY,f:dZ};};c9.ofSeqNonCopying=function(dX){var dY,dZ;if(dX instanceof a.Array)return dX;else if(dX instanceof bY)return bN.ofList(dX);else if(dX===null)return[];else{dY=[];dZ=cN.Get(dX);try{while(dZ.MoveNext())dY.push(dZ.Current());return dY;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}}};c9.TreeReduce=function(dX,dY,dZ){var d0;function d1(d2,d3){var d4,d5;return d3<=0?dX:d3===1&&(d2>=0&&d2<d0)?bN.get(dZ,d2):(d5=d3/2>>0,dY(d1(d2,d5),d1(d2+d5,d3-d5)));}d0=bN.length(dZ);return d1(0,d0);};c9.MapTreeReduce=function(dX,dY,dZ,d0){var d1;function d2(d3,d4){var d5,d6;return d4<=0?dY:d4===1&&(d3>=0&&d3<d1)?dX(bN.get(d0,d3)):(d6=d4/2>>0,dZ(d2(d3,d6),d2(d3+d6,d4-d6)));}d1=bN.length(d0);return d2(0,d1);};c9.mapInPlace=function(dX,dY){var dZ,d0;for(dZ=0,d0=dY.length-1;dZ<=d0;dZ++)dY[dZ]=dX(dY[dZ]);return dY;};c_.CreateElemNode=function(dX,dY,dZ){var d0;c_.LinkElement(dX,dZ);d0=c6.Insert(dX,dY);return dh.New(d0,dZ,null,dX,c2.Int(),dR.GetOptional(d0.OnAfterRender));};c_.CreateTextNode=function(){return{Text:cX.CreateText(""),Dirty:false,Value:""};};c_.UpdateTextNode=function(dX,dY){dX.Value=dY;dX.Dirty=true;};c_.LinkElement=function(dX,dY){c_.InsertDoc(dX,dY,null);};c_.CreateEmbedNode=function(){return{Current:null,Dirty:false};};c_.UpdateEmbedNode=function(dX,dY){dX.Current=dY;dX.Dirty=true;};c_.InsertDoc=function(dX,dY,dZ){var d0;return dY!=null&&dY.$==1?c_.InsertNode(dX,dY.$0.El,dZ):dY!=null&&dY.$==2?(d0=dY.$0,(d0.Dirty=false,c_.InsertDoc(dX,d0.Current,dZ))):dY==null?dZ:dY!=null&&dY.$==4?c_.InsertNode(dX,dY.$0.Text,dZ):dY!=null&&dY.$==5?c_.InsertNode(dX,dY.$0,dZ):dY!=null&&dY.$==6?bN.foldBack(function(d1,d2){return d1==null||d1.constructor===cM?c_.InsertDoc(dX,d1,d2):c_.InsertNode(dX,d1,d2);},dY.$0.Els,dZ):c_.InsertDoc(dX,dY.$0,c_.InsertDoc(dX,dY.$1,dZ));};c_.CreateRunState=function(dX,dY){return dB.New(dC.get_Empty(),c_.CreateElemNode(dX,c6.EmptyAttr(),dY));};c_.PerformAnimatedUpdate=function(dX,dY,dZ){var d0;return dr.get_UseAnimations()?(d0=null,cL.Delay(function(){var d1,d2,d3;d1=dC.FindAll(dZ);d2=c_.ComputeChangeAnim(dY,d1);d3=c_.ComputeEnterAnim(dY,d1);return cL.Bind(dr.Play(dr.Append(d2,c_.ComputeExitAnim(dY,d1))),function(){return cL.Bind(c_.SyncElemNodesNextFrame(dX,dY),function(){return cL.Bind(dr.Play(d3),function(){dY.PreviousNodes=d1;return cL.Return(null);});});});})):c_.SyncElemNodesNextFrame(dX,dY);};c_.PerformSyncUpdate=function(dX,dY,dZ){var d0;d0=dC.FindAll(dZ);c_.SyncElemNode(dX,dY.Top);dY.PreviousNodes=d0;};c_.InsertNode=function(dX,dY,dZ){cX.InsertAt(dX,dZ,dY);return dY;};c_.SyncElemNodesNextFrame=function(dX,dY){function dZ(d0){a.requestAnimationFrame(function(){c_.SyncElemNode(dX,dY.Top);d0();});}return ds.BatchUpdatesEnabled()?cL.FromContinuations(function(d0,d1,d2){return dZ.apply(null,[d0,d1,d2]);}):(c_.SyncElemNode(dX,dY.Top),cL.Return(null));};c_.ComputeExitAnim=function(dX,dY){return dr.Concat(bN.map(function(dZ){return c6.GetExitAnim(dZ.Attr);},dC.ToArray(dC.Except(dY,dC.Filter(function(dZ){return c6.HasExitAnim(dZ.Attr);},dX.PreviousNodes)))));};c_.ComputeEnterAnim=function(dX,dY){return dr.Concat(bN.map(function(dZ){return c6.GetEnterAnim(dZ.Attr);},dC.ToArray(dC.Except(dX.PreviousNodes,dC.Filter(function(dZ){return c6.HasEnterAnim(dZ.Attr);},dY)))));};c_.ComputeChangeAnim=function(dX,dY){var dZ;function d0(d1){return c6.HasChangeAnim(d1.Attr);}dZ=function(d1){return dC.Filter(d0,d1);};return dr.Concat(bN.map(function(d1){return c6.GetChangeAnim(d1.Attr);},dC.ToArray(dC.Intersect(dZ(dX.PreviousNodes),dZ(dY)))));};c_.SyncElemNode=function(dX,dY){!dX?c_.SyncElement(dY):void 0;c_.Sync(dY.Children);c_.AfterRender(dY);};c_.InsertBeforeDelim=function(dX,dY){var dZ,d0;dZ=dX.parentNode;d0=self.document.createTextNode("");dZ.insertBefore(d0,dX);c_.LinkPrevElement(dX,dY);return d0;};c_.LinkPrevElement=function(dX,dY){c_.InsertDoc(dX.parentNode,dY,dX);};c_.CreateDelimitedRunState=function(dX,dY,dZ){return dB.New(dC.get_Empty(),c_.CreateDelimitedElemNode(dX,dY,c6.EmptyAttr(),dZ));};c_.SyncElement=function(dX){function dY(dZ){function d0(d1){var d2,d3;return d1!=null&&d1.$==0?d0(d1.$0)||d0(d1.$1):d1!=null&&d1.$==2?(d2=d1.$0,d2.Dirty||d0(d2.Current)):d1!=null&&d1.$==6&&(d3=d1.$0,d3.Dirty||bN.exists(dY,d3.Holes));}return d0(dZ.Children);}c6.Sync(dX.El,dX.Attr);dY(dX)?c_.DoSyncElement(dX):void 0;};c_.Sync=function(dX){var dY,dZ;if(dX!=null&&dX.$==1)c_.SyncElemNode(false,dX.$0);else if(dX!=null&&dX.$==2)c_.Sync(dX.$0.Current);else if(dX==null);else if(dX!=null&&dX.$==5);else if(dX!=null&&dX.$==4){dY=dX.$0;dY.Dirty?(dY.Text.nodeValue=dY.Value,dY.Dirty=false):void 0;}else if(dX!=null&&dX.$==6){dZ=dX.$0;bN.iter(function(d0){c_.SyncElemNode(false,d0);},dZ.Holes);bN.iter(function(d0){c6.Sync(d0[0],d0[1]);},dZ.Attrs);c_.AfterRender(dZ);}else{c_.Sync(dX.$0);c_.Sync(dX.$1);}};c_.AfterRender=function(dX){var dY;dY=dR.GetOptional(dX.Render);dY!=null&&dY.$==1?(dY.$0(dX.El),dR.SetOptional(dX,"Render",null)):void 0;};c_.CreateDelimitedElemNode=function(dX,dY,dZ,d0){var d1,d2;d1=dX.parentNode;c_.LinkPrevElement(dY,d0);d2=c6.Insert(d1,dZ);return dh.New(d2,d0,{$:1,$0:[dX,dY]},d1,c2.Int(),dR.GetOptional(d2.OnAfterRender));};c_.DoSyncElement=function(dX){var dY,dZ,d0;function d1(d2,d3){var d4,d5;return d2!=null&&d2.$==1?d2.$0.El:d2!=null&&d2.$==2?(d4=d2.$0,d4.Dirty?(d4.Dirty=false,c_.InsertDoc(dY,d4.Current,d3)):d1(d4.Current,d3)):d2==null?d3:d2!=null&&d2.$==4?d2.$0.Text:d2!=null&&d2.$==5?d2.$0:d2!=null&&d2.$==6?(d5=d2.$0,(d5.Dirty?d5.Dirty=false:void 0,bN.foldBack(function(d6,d7){return d6==null||d6.constructor===cM?d1(d6,d7):d6;},d5.Els,d3))):d1(d2.$0,d1(d2.$1,d3));}dY=dX.El;dN.Iter((dZ=dX.El,function(d2){cX.RemoveNode(dZ,d2);}),dN.Except(dN.DocChildren(dX),dN.Children(dX.El,dR.GetOptional(dX.Delimiters))));d1(dX.Children,(d0=dR.GetOptional(dX.Delimiters),d0!=null&&d0.$==1?d0.$0[1]:null));};c$=bQ.Pair=dR.Class({Equals:function(dX){return bP.Equals(this.Key,dX.Key);},GetHashCode:function(){return bP.Hash(this.Key);},CompareTo0:function(dX){return bP.Compare(this.Key,dX.Key);}},null,c$);c$.New=function(dX,dY){return new c$({Key:dX,Value:dY});};da.StartTo=function(dX,dY){cL.StartWithContinuations(dX,dY,function(dZ){da.OnError(dZ);},a.ignore,null);};da.OnError=function(dX){return dP.log("WebSharper UI: Uncaught asynchronous exception",dX);};db.InMemory=function(dX){return new dl.New(dX);};dc.New=function(dX,dY){return{k:dX,ct:dY};};dd.New=function(dX,dY){return{c:dX,r:dY};};de.$cctor=function(){de.$cctor=a.ignore;de.noneCT=dd.New(false,[]);de.scheduler=new dm.New();de.defCTS=[new bW.New()];de.Zero=cL.Return();de.GetCT=function(dX){dX.k({$:0,$0:dX.ct});};};df.TryParse=function(dX){var dY;dY=dS.parse(dX);return a.isNaN(dY)?null:{$:1,$0:dY};};ca.TryParse=function(dX,dY,dZ,d0){var d1,d2;d1=+dX;d2=d1===d1-d1%1&&d1>=dY&&d1<=dZ;d2?d0.set(d1):void 0;return d2;};dg=q.TimeoutException=dR.Class({},cD,dg);dg.New=dR.Ctor(function(){dg.New$1.call(this,"The operation has timed out.");},dg);dg.New$1=dR.Ctor(function(dX){this.message=dX;cM.setPrototypeOf(this,dg.prototype);},dg);dh=b4.DocElemNode=dR.Class({Equals:function(dX){return this.ElKey===dX.ElKey;},GetHashCode:function(){return this.ElKey;}},null,dh);dh.New=function(dX,dY,dZ,d0,d1,d2){var d3;return new dh((d3={Attr:dX,Children:dY,El:d0,ElKey:d1},(dR.SetOptional(d3,"Delimiters",dZ),dR.SetOptional(d3,"Render",d2),d3)));};dj=b4.CheckedInput=dR.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,dj);dk=b4.DynamicAttrNode=dR.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(dX){return dr.get_Empty();},NGetEnterAnim:function(dX){return dr.get_Empty();},NGetChangeAnim:function(dX){return dr.get_Empty();},NSync:function(dX){if(this.dirty){(this.push(dX))(this.value);this.dirty=false;}}},r,dk);dk.New=dR.Ctor(function(dX,dY){var dZ;dZ=this;r.New.call(this);this.push=dY;this.value=void 0;this.dirty=false;this.updates=b9.Map(function(d0){dZ.value=d0;dZ.dirty=true;},dX);},dk);bS.enumUsing=function(dX,dY){return{GetEnumerator:function(){var dZ;try{dZ=cN.Get(dY(dX));}catch(d0){dX.Dispose();throw d0;}return new cO.New(null,null,function(d1){return dZ.MoveNext()&&(d1.c=dZ.Current(),true);},function(){dZ.Dispose();dX.Dispose();});}};};bS.enumWhile=function(dX,dY){return{GetEnumerator:function(){return new cO.New(null,null,function(dZ){var d0;while(true){d0=dZ.s;if(bP.Equals(d0,null)){if(dX()){dZ.s=cN.Get(dY);dZ=dZ;}else return false;}else if(d0.MoveNext()){dZ.c=d0.Current();return true;}else{d0.Dispose();dZ.s=null;dZ=dZ;}}},function(dZ){var d0;d0=dZ.s;!bP.Equals(d0,null)?d0.Dispose():void 0;});}};};dl=db.ArrayStorage=dR.Class({SAppendMany:function(dX,dY){var dZ;dZ=c9.ofSeqNonCopying(dX);dY.push.apply(dY,dZ);return dY;},SSetAt:function(dX,dY,dZ){bN.set(dZ,dX,dY);return dZ;},SRemoveIf:function(dX,dY){return bN.filter(function(dZ){return!dX(dZ);},dY);},SSet:function(dX){return bN.ofSeq(dX);},SAppend:function(dX,dY){dY.push(dX);return dY;},SInit:function(){return this.init;}},r,dl);dl.New=dR.Ctor(function(dX){r.New.call(this);this.init=dX;},dl);dm=cL.Scheduler=dR.Class({Fork:function(dX){var dY;dY=this;this.robin.push(dX);this.idle?(this.idle=false,a.setTimeout(function(){dY.tick();},0)):void 0;},tick:function(){var dX,dY,dZ;dY=this;dZ=dS.now();dX=true;while(dX)if(this.robin.length===0){this.idle=true;dX=false;}else{(this.robin.shift())();dS.now()-dZ>40?(a.setTimeout(function(){dY.tick();},0),dX=false):void 0;}}},r,dm);dm.New=dR.Ctor(function(){r.New.call(this);this.idle=true;this.robin=[];},dm);dn=q.OperationCanceledException=dR.Class({},cD,dn);dn.New=dR.Ctor(function(dX){dn.New$1.call(this,"The operation was canceled.",null,dX);},dn);dn.New$1=dR.Ctor(function(dX,dY,dZ){this.message=dX;this.inner=dY;cM.setPrototypeOf(this,dn.prototype);this.ct=dZ;},dn);_do=b4.Updates=dR.Class({},null,_do);_do.Create=function(dX){var dY;dY=null;dY=_do.New(dX,null,function(){var dZ;dZ=dY.s;return dZ===null?(dZ=cW.Copy(dY.c()),dY.s=dZ,cW.WhenObsoleteRun(dZ,function(){dY.s=null;}),dZ):dZ;});return dY;};_do.New=function(dX,dY,dZ){return new _do({c:dX,s:dY,v:dZ});};dp.$cctor=function(){dp.$cctor=a.ignore;dp.Doc=self.document;};dq.$cctor=function(){dq.$cctor=a.ignore;dq.LoadedTemplates=new bR.New$5();dq.LocalTemplatesLoaded=false;dq.TextHoleRE="\\${([^}]+)}";};dr.get_UseAnimations=function(){return dD.UseAnimations();};dr.Play=function(dX){var dY;dY=null;return cL.Delay(function(){return cL.Bind(dr.Run(a.ignore,dD.Actions(dX)),function(){dD.Finalize(dX);return cL.Return(null);});});};dr.Append=function(dX,dY){return{$:0,$0:dJ.Append(dX.$0,dY.$0)};};dr.Run=function(dX,dY){var dZ;function d0(d1){function d2(d3,d4){var d5;d5=d4-d3;dY.Compute(d5);dX();return d5<=dZ?void a.requestAnimationFrame(function(d6){d2(d3,d6);}):d1();}a.requestAnimationFrame(function(d3){d2(d3,d3);});}dZ=dY.Duration;return dZ===0?cL.Zero():cL.FromContinuations(function(d1,d2,d3){return d0.apply(null,[d1,d2,d3]);});};dr.Concat=function(dX){return{$:0,$0:dJ.Concat(bS.map(dD.List,dX))};};dr.get_Empty=function(){return{$:0,$0:dJ.Empty()};};ds.BatchUpdatesEnabled=function(){dE.$cctor();return dE.BatchUpdatesEnabled;};dt.StartProcessor=function(dX){var dY;function dZ(){var d0;d0=null;return cL.Delay(function(){return cL.Bind(dX,function(){var d1;d1=dY[0];return d1===1?(dY[0]=0,cL.Zero()):d1===2?(dY[0]=1,dZ()):cL.Zero();});});}dY=[0];return function(){var d0;d0=dY[0];d0===0?(dY[0]=1,cL.Start(dZ(),null)):d0===1?dY[0]=2:void 0;};};du.$cctor=function(){du.$cctor=a.ignore;du.counter=0;};dw.New=function(dX,dY,dZ,d0){var d1;d1={DynElem:dX,DynFlags:dY,DynNodes:dZ};dR.SetOptional(d1,"OnAfterRender",d0);return d1;};dx.$cctor=function(){dx.$cctor=a.ignore;dx.EmptyAttr=null;};dy.convertTextNode=function(dX){var dY,dZ,d0,d1,d2,d3;dY=null;dZ=0;d1=dX.textContent;d2=new a.RegExp(c0.TextHoleRE(),"g");while(dY=d2.exec(d1),dY!==null){dX.parentNode.insertBefore(self.document.createTextNode(bO.string(d1,{$:1,$0:dZ},{$:1,$0:d2.lastIndex-bN.get(dY,0).length-1})),dX);dZ=d2.lastIndex;d3=self.document.createElement("span");d3.setAttribute("ws-replace",bN.get(dY,1).toLowerCase());dX.parentNode.insertBefore(d3,dX);}d2.lastIndex=0;dX.textContent=bO.string(d1,{$:1,$0:dZ},null);};dy.failNotLoaded=function(dX){dP.warn("Instantiating non-loaded template",dX);};dy.fillTextHole=function(dX,dY,dZ){var d0;d0=dX.querySelector("[ws-replace]");return bP.Equals(d0,null)?(dP.warn("Filling non-existent text hole",dZ),null):(d0.parentNode.replaceChild(new a.Text(dY),d0),{$:1,$0:d0.getAttribute("ws-replace")});};dy.removeHolesExcept=function(dX,dY){function dZ(d0){cX.IterSelector(dX,"["+d0+"]",function(d1){if(!dY.Contains(d1.getAttribute(d0)))d1.removeAttribute(d0);});}dZ("ws-attr");dZ("ws-onafterrender");dZ("ws-var");cX.IterSelector(dX,"[ws-hole]",function(d0){if(!dY.Contains(d0.getAttribute("ws-hole"))){d0.removeAttribute("ws-hole");while(d0.hasChildNodes())d0.removeChild(d0.lastChild);}});cX.IterSelector(dX,"[ws-replace]",function(d0){if(!dY.Contains(d0.getAttribute("ws-replace")))d0.parentNode.removeChild(d0);});cX.IterSelector(dX,"[ws-on]",function(d0){d0.setAttribute("ws-on",bT.concat(" ",bN.filter(function(d1){return dY.Contains(bN.get(bT.SplitChars(d1,[":"],1),1));},bT.SplitChars(d0.getAttribute("ws-on"),[" "],1))));});cX.IterSelector(dX,"[ws-attr-holes]",function(d0){var d1,d2,d3,d4,d5;d1=bT.SplitChars(d0.getAttribute("ws-attr-holes"),[" "],1);for(d2=0,d3=d1.length-1;d2<=d3;d2++){d4=bN.get(d1,d2);d0.setAttribute(d4,(d5=new a.RegExp(c0.TextHoleRE(),"g"),d0.getAttribute(d4).replace(d5,function(d6,d7){return dY.Contains(d7)?d6:"";})));}});};dy.fillInstanceAttrs=function(dX,dY){var dZ,d0,d1,d2,d3;dy.convertAttrs(dY);dZ=dY.nodeName.toLowerCase();d0=dX.querySelector("[ws-attr="+dZ+"]");if(bP.Equals(d0,null))dP.warn("Filling non-existent attr hole",dZ);else{d0.removeAttribute("ws-attr");for(d1=0,d2=dY.attributes.length-1;d1<=d2;d1++){d3=dY.attributes.item(d1);d3.name==="class"&&d0.hasAttribute("class")?d0.setAttribute("class",d0.getAttribute("class")+" "+d3.nodeValue):d0.setAttribute(d3.name,d3.nodeValue);}}};dy.mapHoles=function(dX,dY){function dZ(d0){cX.IterSelector(dX,"["+d0+"]",function(d1){var d2,d3;d2=(d3=null,[dY.TryGetValue(d1.getAttribute(d0).toLowerCase(),{get:function(){return d3;},set:function(d4){d3=d4;}}),d3]);d2[0]?d1.setAttribute(d0,d2[1]):void 0;});}dZ("ws-hole");dZ("ws-replace");dZ("ws-attr");dZ("ws-onafterrender");dZ("ws-var");cX.IterSelector(dX,"[ws-on]",function(d0){d0.setAttribute("ws-on",bT.concat(" ",bN.map(function(d1){var d2,d3,d4;d2=bT.SplitChars(d1,[":"],1);d3=(d4=null,[dY.TryGetValue(bN.get(d2,1),{get:function(){return d4;},set:function(d5){d4=d5;}}),d4]);return d3[0]?bN.get(d2,0)+":"+d3[1]:d1;},bT.SplitChars(d0.getAttribute("ws-on"),[" "],1))));});cX.IterSelector(dX,"[ws-attr-holes]",function(d0){var d1,d2,d3;d1=bT.SplitChars(d0.getAttribute("ws-attr-holes"),[" "],1);for(d2=0,d3=d1.length-1;d2<=d3;d2++)(function(){var d4;function d5(d6,d7){var d8;d8=bL.KeyValue(d7);return d6.replace(new a.RegExp("\\${"+d8[0]+"}","ig"),"${"+d8[1]+"}");}d4=bN.get(d1,d2);return d0.setAttribute(d4,(((dR.Curried3(bS.fold))(d5))(d0.getAttribute(d4)))(dY));}());});};dy.fill=function(dX,dY,dZ){while(true)if(dX.hasChildNodes())dZ=dY.insertBefore(dX.lastChild,dZ);else return null;};dy.convertAttrs=function(dX){var dZ,d0,d1,d2,d3,d4,d5,d6;function dY(d7){var d8;d8=dX.getAttribute(d7);d8===null?void 0:dX.setAttribute(d7,d8.toLowerCase());}dZ=dX.attributes;d0=[];d1=[];d2=[];for(d3=0,d4=dZ.length-1;d3<=d4;d3++){d5=dZ.item(d3);bT.StartsWith(d5.nodeName,"ws-on")&&d5.nodeName!=="ws-onafterrender"&&d5.nodeName!=="ws-on"?(d0.push(d5.nodeName),d1.push(bO.string(d5.nodeName,{$:1,$0:"ws-on".length},null)+":"+d5.nodeValue.toLowerCase())):!bT.StartsWith(d5.nodeName,"ws-")&&(new a.RegExp(c0.TextHoleRE())).test(d5.nodeValue)?(d5.nodeValue=(d6=new a.RegExp(c0.TextHoleRE(),"g"),d5.nodeValue.replace(d6,function(d7,d8){return"${"+d8.toLowerCase()+"}";})),d2.push(d5.nodeName)):void 0;}!(d1.length==0)?dX.setAttribute("ws-on",bT.concat(" ",d1)):void 0;!(d2.length==0)?dX.setAttribute("ws-attr-holes",bT.concat(" ",d2)):void 0;dY("ws-hole");dY("ws-replace");dY("ws-attr");dY("ws-onafterrender");dY("ws-var");bN.iter(function(d7){dX.removeAttribute(d7);},d0);};dz=bQ.KeyCollection=dR.Class({GetEnumerator$1:function(){return cN.Get(bS.map(function(dX){return dX.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,dz);dz.New=dR.Ctor(function(dX){r.New.call(this);this.d=dX;},dz);dB.New=function(dX,dY){return{PreviousNodes:dX,Top:dY};};dC.get_Empty=function(){return{$:0,$0:new c4.New$3()};};dC.FindAll=function(dX){var dY;function dZ(d1){if(d1!=null&&d1.$==0){dZ(d1.$0);dZ(d1.$1);}else if(d1!=null&&d1.$==1)d0(d1.$0);else if(d1!=null&&d1.$==2)dZ(d1.$0.Current);else if(d1!=null&&d1.$==6)bN.iter(d0,d1.$0.Holes);}function d0(d1){dY.push(d1);dZ(d1.Children);}dY=[];dZ(dX);return{$:0,$0:new c4.New$2(dY)};};dC.Filter=function(dX,dY){return{$:0,$0:dM.Filter(dX,dY.$0)};};dC.Except=function(dX,dY){return{$:0,$0:dM.Except(dX.$0,dY.$0)};};dC.ToArray=function(dX){return dM.ToArray(dX.$0);};dC.Intersect=function(dX,dY){return{$:0,$0:dM.Intersect(dX.$0,dY.$0)};};dD.UseAnimations=function(){dI.$cctor();return dI.UseAnimations;};dD.Actions=function(dX){return dD.ConcatActions(bN.choose(function(dY){return dY.$==1?{$:1,$0:dY.$0}:null;},dJ.ToArray(dX.$0)));};dD.Finalize=function(dX){bN.iter(function(dY){if(dY.$==0)dY.$0();},dJ.ToArray(dX.$0));};dD.ConcatActions=function(dX){var dY,dZ,d0,d1;dY=c9.ofSeqNonCopying(dX);dZ=bN.length(dY);return dZ===0?dD.Const():dZ===1?bN.get(dY,0):(d0=bS.max(bS.map(function(d2){return d2.Duration;},dY)),(d1=bN.map(function(d2){return dD.Prolong(d0,d2);},dY),dD.Def(d0,function(d2){bN.iter(function(d3){d3.Compute(d2);},d1);})));};dD.List=function(dX){return dX.$0;};dD.Const=function(dX){return dD.Def(0,function(){return dX;});};dD.Def=function(dX,dY){return{Compute:dY,Duration:dX};};dD.Prolong=function(dX,dY){var dZ,d0,d1;dZ=dY.Compute;d0=dY.Duration;d1=cB.Create(function(){return dY.Compute(dY.Duration);});return{Compute:function(d2){return d2>=d0?d1.f():dZ(d2);},Duration:dX};};dE.$cctor=function(){dE.$cctor=a.ignore;dE.BatchUpdatesEnabled=true;};dF.concat=function(dX){var dY,dZ;dY=[];for(var d0 in dX)dY.push.apply(dY,dX[d0]);return dY;};dG=q.FormatException=dR.Class({},cD,dG);dG.New$1=dR.Ctor(function(dX){this.message=dX;cM.setPrototypeOf(this,dG.prototype);},dG);dH.Clear=function(dX){dX.splice(0,bN.length(dX));};dI.$cctor=function(){dI.$cctor=a.ignore;dI.CubicInOut=dL.Custom(function(dX){var dY;dY=dX*dX;return 3*dY-2*(dY*dX);});dI.UseAnimations=true;};dJ.Append=function(dX,dY){return dX.$==0?dY:dY.$==0?dX:{$:2,$0:dX,$1:dY};};dJ.ToArray=function(dX){var dY;function dZ(d0){if(d0.$==1)dY.push(d0.$0);else if(d0.$==2){dZ(d0.$0);dZ(d0.$1);}else if(d0.$==3)bN.iter(function(d1){dY.push(d1);},d0.$0);}dY=[];dZ(dX);return dY.slice(0);};dJ.Concat=function(dX){var dY;dY=c9.ofSeqNonCopying(dX);return c9.TreeReduce(dJ.Empty(),dJ.Append,dY);};dJ.Empty=function(){dO.$cctor();return dO.Empty;};dK.isBlank=function(dX){return bT.forall(b0.IsWhiteSpace,dX);};dL=b4.Easing=dR.Class({},r,dL);dL.Custom=function(dX){return new dL.New(dX);};dL.New=dR.Ctor(function(dX){r.New.call(this);this.transformTime=dX;},dL);dM.Filter=function(dX,dY){return new c4.New$2(bN.filter(dX,dM.ToArray(dY)));};dM.Except=function(dX,dY){var dZ;dZ=new c4.New$2(dM.ToArray(dY));dZ.ExceptWith(dM.ToArray(dX));return dZ;};dM.ToArray=function(dX){var dY;dY=bN.create(dX.get_Count(),void 0);dX.CopyTo(dY);return dY;};dM.Intersect=function(dX,dY){var dZ;dZ=new c4.New$2(dM.ToArray(dX));dZ.IntersectWith(dM.ToArray(dY));return dZ;};dN.Children=function(dX,dY){var dZ,d0,d1;if(dY!=null&&dY.$==1){d1=[];dZ=dY.$0[0].nextSibling;while(dZ!==dY.$0[1]){d1.push(dZ);dZ=dZ.nextSibling;}return{$:0,$0:d1};}else return{$:0,$0:bN.init(dX.childNodes.length,(d0=dX.childNodes,function(d2){return d0[d2];}))};};dN.Except=function(dX,dY){var dZ;dZ=dX.$0;return{$:0,$0:bN.filter(function(d0){return bN.forall(function(d1){return!(d0===d1);},dZ);},dY.$0)};};dN.Iter=function(dX,dY){bN.iter(dX,dY.$0);};dN.DocChildren=function(dX){var dY;function dZ(d0){if(d0!=null&&d0.$==2)dZ(d0.$0.Current);else if(d0!=null&&d0.$==1)dY.push(d0.$0.El);else if(d0==null);else if(d0!=null&&d0.$==5)dY.push(d0.$0);else if(d0!=null&&d0.$==4)dY.push(d0.$0.Text);else if(d0!=null&&d0.$==6)bN.iter(function(d1){if(d1==null||d1.constructor===cM)dZ(d1);else dY.push(d1);},d0.$0.Els);else{dZ(d0.$0);dZ(d0.$1);}}dY=[];dZ(dX.Children);return{$:0,$0:c9.ofSeqNonCopying(dY)};};dO.$cctor=function(){dO.$cctor=a.ignore;dO.Empty={$:0};};dR.OnLoad(function(){bG.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

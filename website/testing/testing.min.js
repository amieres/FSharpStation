function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.Monads=c.Monads||{};e=d.Result=d.Result||{};f=a.WebSharper=a.WebSharper||{};g=f.Obj=f.Obj||{};h=e.Builder=e.Builder||{};i=e.Operators=e.Operators||{};j=c.String=c.String||{};k=c.ParseO=c.ParseO||{};l=b.LibraryJS=b.LibraryJS||{};m=l.WebComponent=l.WebComponent||{};n=m.WcSplitter=m.WcSplitter||{};o=n.WcSplitterT=n.WcSplitterT||{};p=l.AppFramework2=l.AppFramework2||{};q=p.PlgInName=p.PlgInName||{};r=p.PlgVarName=p.PlgVarName||{};s=p.PlgDocName=p.PlgDocName||{};t=p.PlgViwName=p.PlgViwName||{};u=p.PlgActName=p.PlgActName||{};v=p.PlugInVar=p.PlugInVar||{};w=p.PlugInView=p.PlugInView||{};x=p.PlugInDoc=p.PlugInDoc||{};y=p.PlugInAction=p.PlugInAction||{};z=p.PlugIn=p.PlugIn||{};A=p.IdentType=p.IdentType||{};B=p.ParmTypeBasic=p.ParmTypeBasic||{};C=p.ParmType=p.ParmType||{};D=p.ParmDef=p.ParmDef||{};E=p.ParmVl=p.ParmVl||{};F=p.PlugInBuilder=p.PlugInBuilder||{};G=p.AF=p.AF||{};H=G.Client=G.Client||{};I=b.TestingJS=b.TestingJS||{};J=I.SnippetTemplates=I.SnippetTemplates||{};K=I.AppFramework2UI=I.AppFramework2UI||{};L=K.PlugInFuncs=K.PlugInFuncs||{};M=K.Direct=K.Direct||{};N=f.Operators=f.Operators||{};O=f.Utils=f.Utils||{};P=f.Arrays=f.Arrays||{};Q=f.Result=f.Result||{};R=f.Seq=f.Seq||{};S=f.List=f.List||{};T=S.T=S.T||{};U=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};V=f.Char=f.Char||{};W=f.Slice=f.Slice||{};X=f.Strings=f.Strings||{};Y=f.JavaScript=f.JavaScript||{};Z=Y.Pervasives=Y.Pervasives||{};_0=a.EventTarget;_1=a.Node;_2=Y.JS=Y.JS||{};_3=f.UI=f.UI||{};_4=_3.Var$1=_3.Var$1||{};_5=_3.Var=_3.Var||{};_6=a.Event;_7=a.UIEvent;_8=_3.View=_3.View||{};_9=l.ResizeObserver=l.ResizeObserver||{};_=_3.ListModel=_3.ListModel||{};$=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};ba=a.GeneratedPrintf=a.GeneratedPrintf||{};bb=_3.Doc=_3.Doc||{};bc=f.Collections=f.Collections||{};bd=bc.FSharpMap=bc.FSharpMap||{};be=_3.ViewBuilder=_3.ViewBuilder||{};bf=_3.HtmlModule=_3.HtmlModule||{};bg=bf.attr=bf.attr||{};bh=f.Unchecked=f.Unchecked||{};bi=_3.AttrModule=_3.AttrModule||{};bj=f.Lazy=f.Lazy||{};bk=_3.AttrProxy=_3.AttrProxy||{};bl=a.WindowOrWorkerGlobalScope;bm=l.AppFrameworkTemplate=l.AppFrameworkTemplate||{};bn=a.Object;bo=f.Enumerator=f.Enumerator||{};bp=f.Numeric=f.Numeric||{};bq=a.System=a.System||{};br=bq.Guid=bq.Guid||{};bs=bo.T=bo.T||{};bt=_3.ConcreteVar=_3.ConcreteVar||{};bu=_3.Snap=_3.Snap||{};bv=_3.Client=_3.Client||{};bw=bv.Templates=bv.Templates||{};bx=bc.Dictionary=bc.Dictionary||{};by=bc.Pair=bc.Pair||{};bz=_3.FromView=_3.FromView||{};bA=_3.DomUtility=_3.DomUtility||{};bB=_3.Array=_3.Array||{};bC=_3.Attrs=_3.Attrs||{};bD=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};bE=bD.LazyRecord=bD.LazyRecord||{};bF=bc.List=bc.List||{};bG=f.DateUtil=f.DateUtil||{};bH=_3.Abbrev=_3.Abbrev||{};bI=bH.Fresh=bH.Fresh||{};bJ=f.Concurrency=f.Concurrency||{};bK=_3.Docs=_3.Docs||{};bL=_3.DocElemNode=_3.DocElemNode||{};bM=a.CharacterData;bN=_3.Storage=_3.Storage||{};bO=_3.DynamicAttrNode=_3.DynamicAttrNode||{};bP=bc.BalancedTree=bc.BalancedTree||{};bQ=_3.Elt=_3.Elt||{};bR=bJ.AsyncBody=bJ.AsyncBody||{};bS=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bT=bJ.CT=bJ.CT||{};bU=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bV=bc.HashSet=bc.HashSet||{};bW=_3.An=_3.An||{};bX=bv.Settings=bv.Settings||{};bY=bH.Mailbox=bH.Mailbox||{};bZ=bv.Attrs=bv.Attrs||{};b0=bZ.Dyn=bZ.Dyn||{};b1=bN.ArrayStorage=bN.ArrayStorage||{};b2=bc.DictionaryUtil=bc.DictionaryUtil||{};b3=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};b4=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};b5=_3.Updates=_3.Updates||{};b6=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};b7=bJ.Scheduler=bJ.Scheduler||{};b8=a.Error;b9=f.OperationCanceledException=f.OperationCanceledException||{};b_=f.CancellationTokenSource=f.CancellationTokenSource||{};b$=bw.Prepare=bw.Prepare||{};ca=bc.KeyCollection=bc.KeyCollection||{};cb=bv.Docs=bv.Docs||{};cc=cb.RunState=cb.RunState||{};cd=cb.NodeSet=cb.NodeSet||{};ce=_3.Anims=_3.Anims||{};cf=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cg=_3.CheckedInput=_3.CheckedInput||{};ch=f.FormatException=f.FormatException||{};ci=f.Queue=f.Queue||{};cj=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};ck=_3.AppendList=_3.AppendList||{};cl=_3.String=_3.String||{};cm=_3.Easing=_3.Easing||{};cn=bH.HashSet=bH.HashSet||{};co=bc.HashSetUtil=bc.HashSetUtil||{};cp=cb.DomNodes=cb.DomNodes||{};cq=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cr=a.console;cs=a.IntelliFactory;ct=cs&&cs.Runtime;cu=a.Reflect;cv=a.jQuery;cw=a.Date;c.Error=function(cx){return{$:1,$0:cx};};c.print=function(cx){if(typeof cx=="string")((function(cy){return function(cz){return cy(O.toSafe(cz));};}(function(cy){cr.log(cy);}))(cx));else((function(cy){return function(cz){return cy(O.prettyPrint(cz));};}(function(cy){cr.log(cy);}))(cx));};c["String.Substring2"]=function(cx,cy,cz){var cA,cB;while(true){if(cz<=0)return"";else if(cy>=cx.length)return"";else if(cy<0){cA=cy;cy=0;cz=cz+cA;}else return X.Substring(cx,cy,(cB=cx.length-cy,bh.Compare(cz,cB)===-1?cz:cB));}};c["String.Left"]=function(cx,cy){return cy<0?c["String.Substring2"](cx,0,cx.length+cy):c["String.Substring2"](cx,0,cy);};c["String.Right"]=function(cx,cy){var cz,cA;return c["String.Substring2"](cx,(cz=0,(cA=cx.length-cy,bh.Compare(cz,cA)===1?cz:cA)),cx.length);};c["String.get_toUnderscore"]=function(cx,cy){return P.ofSeq(R.collect(a.id,R.mapi(function(cz,cA){return cz>0&&V.IsUpper(cA)?S.ofArray(["_",cA]):S.ofArray([cA]);},cx))).join("");};e.errorf=function(cx){return cx(c.Error);};e.rtn=function(cx){return{$:0,$0:cx};};e.join=function(cx){return Q.Bind(a.id,cx);};e.flatten=function(cx){return Q.Bind(a.id,cx);};e.toOption=function(cx){return cx.$==0?{$:1,$0:cx.$0}:null;};e.defaultWith=function(cx,cy){return cy.$==1?cx(cy.$0):cy.$0;};e.defaultValue=function(cx,cy){return cy.$==1?cx:cy.$0;};e.failIfTrue=function(cx,cy){return cy?c.Error(cx):{$:0,$0:null};};e.failIfFalse=function(cx,cy){return!cy?c.Error(cx):{$:0,$0:null};};e.iter=function(cx,cy,cz){e.defaultWith(cx,Q.Map(cy,cz));};e.get=function(cx){return e.defaultWith(function(cy){return N.FailWith(a.String(cy));},cx);};e.ofOption=function(cx,cy){var cz;cz=cy==null?null:{$:1,$0:{$:0,$0:cy.$0}};return cz==null?function(cA){return c.Error(cx(cA));}():cz.$0;};e.insertO=function(cx){var cy;cy=cx==null?null:{$:1,$0:Q.Map(function(cz){return{$:1,$0:cz};},cx.$0)};return cy==null?{$:0,$0:null}:cy.$0;};e.absorbO=function(cx,cy){return Q.Bind(function(cz){return e.ofOption(cx,cz);},cy);};e.op_GreaterGreaterEquals=function(cx,cy){return Q.Bind(cy,cx);};e.traverseSeq=function(cx,cy){return Q.Map(a.id,P.foldBack(function(cz,cA){return e.op_GreaterGreaterEquals(cx(cz),function(cB){return e.op_GreaterGreaterEquals(cA,function(cC){return e.rtn(new T({$:1,$0:cB,$1:cC}));});});},P.ofSeq(cy),e.rtn(T.Empty)));};e.sequenceSeq=function(cx){return e.traverseSeq(a.id,cx);};e.result=function(){U.$cctor();return U.result;};g=f.Obj=ct.Class({Equals:function(cx){return this===cx;},GetHashCode:function(){return -1;}},null,g);g.New=ct.Ctor(function(){},g);h=e.Builder=ct.Class({Return:function(cx){return e.rtn(cx);},ReturnFrom:a.id,Bind:function(cx,cy){return Q.Bind(cy,cx);},Zero:function(){return e.rtn();},Delay:a.id,Combine:function(cx,cy){return Q.Bind(cy,cx);},Run:function(cx){return Q.Bind(cx,{$:0,$0:null});},TryWith:function(cx,cy){try{return cx();}catch(cz){return cy(cz);}},TryFinally:function(cx,cy){try{return cx();}finally{cy();}},Using:function(cx,cy){try{return cy(cx);}finally{cx.Dispose();}},While:function(cx,cy){function cz(cA,cB){return cA()?Q.Bind(function(){return cz(cA,cB);},cB()):e.rtn();}return cz(cx,cy);},For:function(cx,cy){var cz;cz=this;return this.Using(bo.Get(cx),function(cA){return cz.While(function(){return cA.MoveNext();},cz.Delay(function(){return cy(cA.Current());}));});}},g,h);h.New=ct.Ctor(function(){g.New.call(this);},h);i.op_BarGreaterGreater=function(cx,cy){return Q.Map(cy,cx);};i.op_GreaterGreaterEquals=function(cx,cy){return Q.Bind(cy,cx);};i.op_RightShift=function(cx,cy,cz){return i.op_BarGreaterGreater(cx(cz),cy);};i.op_GreaterEqualsGreater=function(cx,cy,cz){return i.op_GreaterGreaterEquals(cx(cz),cy);};i.rtn=function(cx){return e.rtn(cx);};i.result=function(){U.$cctor();return U.result$1;};j.splitByChar=function(cx,cy){return X.SplitChars(cy,[cx],0);};j.splitInTwoO=function(cx,cy){var cz;cz=cy.indexOf(cx);return cz===-1?null:{$:1,$0:[c["String.Left"](cy,cz),cy.substring(cz+cx.length)]};};j.delimitedO=function(cx,cy,cz){var cA,cB,cC,cD,cE;cA=j.splitInTwoO(cx,cz);return cA==null?null:(cB=cA.$0,(cC=cB[0],(cD=j.splitInTwoO(cy,cB[1]),cD==null?null:{$:1,$0:(cE=cD.$0,[cC,cE[0],cE[1]])})));};j.contains=function(cx,cy){return cy.indexOf(cx)!=-1;};j.trim=function(cx){return X.Trim(cx);};j.left=function(cx,cy){return c["String.Left"](cy,cx);};j.right=function(cx,cy){return c["String.Right"](cy,cx);};j.append=function(cx,cy){return cx+cy;};j.skipFirstLine=function(cx){var cy;cy=cx.indexOf("\n");return cy<0?"":W.string(cx,{$:1,$0:cy+1},null);};j.unindent=function(cx){var cy,cz,cA,cB;cy=X.SplitChars(cx,["\n"],0);cz=(cA=R.tryFindIndex(function(cC){return" "!==cC;},(cB=R.tryFind(function(cC){return X.Trim(cC)!=="";},cy),cB==null?"":cB.$0)),cA==null?0:cA.$0);return R.filter(function(cC){return!X.StartsWith(cC,"# 1 ");},R.map(function(cC){return cC.length<=cz?"":cC.substring(cz);},cy));};j.indent=function(cx,cy){var cz,cA;cz=X.SplitChars(cy,["\n"],0);return R.map((cA=X.replicate(cx," "),function(cB){return cA+cB;}),cz);};j.unindentStr=function(){U.$cctor();return U.unindentStr;};j.indentStr=function(cx){function cy(cA){return j.indent(cx,cA);}function cz(cA){return X.concat("\n",cA);}return function(cA){return cz(cy(cA));};};j.skipLastLine=function(){U.$cctor();return U.skipLastLine;};j.StartsWith=function(cx,cy){return X.StartsWith(cy,cx)?{$:1,$0:W.string(cy,{$:1,$0:cx.length},null)}:null;};j.EndsWith=function(cx,cy){return X.EndsWith(cy,cx)?{$:1,$0:W.string(cy,{$:1,$0:0},{$:1,$0:cy.length-cx.length-1})}:null;};j.thousands=function(cx){var cy,cz,cA;cy=a.String(cx);cz=cy.length%3;cA=cz===0?3:cz;return X.concat(",",S.ofSeq(R.delay(function(){return R.append([W.string(cy,{$:1,$0:0},{$:1,$0:cA-1})],R.delay(function(){return R.map(function(cB){return W.string(cy,{$:1,$0:cB*3+cA},{$:1,$0:cB*3+cA+2});},N.range(0,((cy.length-cA)/3>>0)-1));}));})));};k.tryParseWith=function(cx){function cy(cz,cA){return cz?{$:1,$0:cA}:null;}return function(cz){return cy.apply(null,cx(cz));};};k.parseDateO2=function(){U.$cctor();return U.parseDateO2;};k.parseDateO=function(){U.$cctor();return U.parseDateO;};k.parseIntO=function(){U.$cctor();return U.parseIntO;};k.parseInt64O=function(){U.$cctor();return U.parseInt64O;};k.parseSingleO=function(){U.$cctor();return U.parseSingleO;};k.parseDoubleO=function(){U.$cctor();return U.parseDoubleO;};k.parseGuidO=function(){U.$cctor();return U.parseGuidO;};k.Date=function(){U.$cctor();return U["|Date|_|"];};k.Int=function(){U.$cctor();return U["|Int|_|"];};k.Int64=function(){U.$cctor();return U["|Int64|_|"];};k.Single=function(){U.$cctor();return U["|Single|_|"];};k.Double=function(){U.$cctor();return U["|Double|_|"];};k.Guid=function(){U.$cctor();return U["|Guid|_|"];};m.defineWebComponent=function(cx,cy,cz){try{cr.log("defineWebComponent: "+cx);bn.setPrototypeOf(cz.prototype,self.HTMLElement.prototype);bn.setPrototypeOf(cz,self.HTMLElement);bn.setPrototypeOf(cy.prototype,cz.prototype);self.customElements.define(cx,cy);}catch(cA){(function(cB){return cB("Failed to define WebComponent. Not supported.");}(function(cB){cr.log(cB);}));}};n.set_layoutHorizontal=function(cx){U.$cctor();U.layoutHorizontal=cx;};n.layoutHorizontal=function(){U.$cctor();return U.layoutHorizontal;};n.set_layoutVertical=function(cx){U.$cctor();U.layoutVertical=cx;};n.layoutVertical=function(){U.$cctor();return U.layoutVertical;};n.init=function(cx,cy){var cz;cz=new o.New();n.set_layoutHorizontal(cx);n.set_layoutVertical(cy);m.defineWebComponent("wcomp-splitter",o.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};o=n.WcSplitterT=ct.Class({connectedCallback:function(){var cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM;function cN(cV){var cW,cX,cY,cZ;cW=cE?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];cX=a.parseFloat("0"+a.jQuery(cV.parentElement.parentElement).css(cW[0]));cY=a.parseFloat("0"+a.jQuery(cV.parentElement.parentElement).css(cW[1]));cH.Set(a.parseFloat("0"+a.jQuery(cV.parentElement.parentElement).css(cW[2])));cG[0]=cX+cY;cZ=cx.getBoundingClientRect();return cE?cD?[cZ.width,cZ.height]:[-cZ.width,cZ.height]:cD?[cZ.height,cZ.width]:[-cZ.height,cZ.width];}function cO(cV){return cE?cV.clientX:cV.clientY;}function cP(cV){var cW,cX;cW=(cO(cV)-cK[0])*100/cF[0][0]+cJ[0];cC.Set((cX=bh.Compare(cA,cW)===1?cA:cW,bh.Compare(cB,cX)===-1?cB:cX));}function cQ(){if(cI[0]){cI[0]=false;self.removeEventListener("mousemove",cP,false);self.removeEventListener("mouseup",cQ,false);}}function cR(cV){var cW,cX;if(!cI[0]){cI[0]=true;cJ[0]=cC.Get();cK[0]=cO(cV);cF[0]=(cW=(cX=cL[0],cX==null?null:{$:1,$0:cN(cX.$0)}),cW==null?[100,500]:cW.$0);self.addEventListener("mousemove",cP,false);self.addEventListener("mouseup",cQ,false);cV.preventDefault();}}function cS(cV,cW,cX,cY){return[(cV-cW-cX)*cY/100,(cV-cW-cX)*(100-cY)/100];}function cT(cV,cW){return(((((ct.Curried(function(cX,cY,cZ,c0,c1){return cX(" "+cY.toFixed(2)+"px "+cZ.toFixed(2)+"px ; "+O.toSafe(c0)+" : "+c1.toFixed(2)+"px; ");},5))(a.id))(cV))(cW))(cE?"height":"width"))(cF[0][1]);}function cU(){var cV;cV=cL[0];cV==null?void 0:cF[0]=cN(cV.$0);cC.Set(cC.Get());}if(!this.added){cx=this;cy=cx.attachShadow({mode:"open"});cz=self.document.createElement("div");cA=cx.hasAttribute("min")?a.parseFloat(cx.getAttribute("min")):4;cB=cx.hasAttribute("max")?a.parseFloat(cx.getAttribute("max")):96;cC=_4.Create$1(cx.hasAttribute("value")?a.parseFloat(cx.getAttribute("value")):50);cD=!cx.hasAttribute("second");cE=cx.hasAttribute("vertical");cF=[[0,0]];cG=[0];cH=_4.Create$1(0);cI=[false];cJ=[0];cK=[0];cL=[null];cM=(((((cE?n.layoutVertical():n.layoutHorizontal())(_8.Map(function(cV){var cW;cW=cS(cF[0][0],cH.Get(),cG[0],cV);return cT.apply(null,cW);},cC.get_View())))(function(){_9.addResizeObserver(cU,cx);cU();}))(function(cV){cL[0]={$:1,$0:cV};cU();}))(function(cV){cR(cV);}))(_8.Map(function(cV){return function(cW){return cV(O.prettyPrint(cW)+"px");};}(a.id),cH.get_View()));bw.LoadLocalTemplates("");bb.Run(cz,cM);cy.appendChild(cz.firstChild);this.added=true;}}},g,o);o.Constructor=function(){var cx,cy;cx=(cy=cu.construct(self.HTMLElement,[],this.__proto__.constructor),cy);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(cx);return cx;};o.New=ct.Ctor(function(){g.New.call(this);this.added=false;(function(cx){return cx("WcSplitterT initializer");}(function(cx){cr.log(cx);}));},o);p.defaultPlugIn=function(){return z.New(new q({$:0,$0:""}),new _.New$1(function(cx){return cx.varName;}),new _.New$1(function(cx){return cx.viwName;}),new _.New$1(function(cx){return cx.docName;}),new _.New$1(function(cx){return cx.actName;}));};p.plugIns=function(){U.$cctor();return U.plugIns;};p.RefVar=function(cx,cy){var cz,cA;cz=(cA=_8.get_Do(),_8.Bind(function(cB){return cB!=null&&cB.$==1?_8.Bind(function(cC){return cC!=null&&cC.$==1?_8.Const({$:0,$0:cC.$0.varVar}):_8.Const((e.errorf(function(cD){return function(cE){return cD("<Var not found : "+("("+$.p$7(cE[0])+", "+$.p$8(cE[1])+")")+">");};}))([cx,cy]));},cB.$0.plgVars.TryFindByKeyAsView(cy)):_8.Const((e.errorf(function(cC){return function(cD){return cC("<PlugIn not found : "+("("+$.p$7(cD[0])+", "+$.p$8(cD[1])+")")+">");};}))([cx,cy]));},p.plugIns().TryFindByKeyAsView(cx)));return new bz.New(_8.Bind(function(cB){return cB.$==0?cB.$0.get_View():_8.Const(cB.$0);},cz),function(cB){function cC(cE){}function cD(cE){cE.Set(cB);}_8.Get(function(cE){e.iter(cC,cD,cE);},cz);});};p.RefViw=function(cx,cy){var cz;cz=_8.get_Do();return _8.Bind(function(cA){return cA!=null&&cA.$==1?_8.Bind(function(cB){return cB!=null&&cB.$==1?_8.Bind(function(cC){return _8.Const(cC);},cB.$0.viwView):_8.Const((function(cC){return function(cD){return cC("<View not found : "+("("+$.p$7(cD[0])+", "+$.p$9(cD[1])+")")+">");};}(a.id))([cx,cy]));},cA.$0.plgViews.TryFindByKeyAsView(cy)):_8.Const((function(cB){return function(cC){return cB("<PlugIn not found : "+("("+$.p$7(cC[0])+", "+$.p$9(cC[1])+")")+">");};}(a.id))([cx,cy]));},p.plugIns().TryFindByKeyAsView(cx));};p.errorDoc=function(cx){return bb.Element("div",[bk.Create("color","red")],[bb.TextNode(cx)]);};p.errorDocf=function(cx){return cx(p.errorDoc);};p.invokeFunDoc=function(cx){var cy;try{cy=cx.docDoc.f();return cy.$==1?cy.$0():cy.$==2?cy.$0(E.PvNone):cy.$==3?(cy.$0(E.PvNone))(E.PvNone):cy.$==4?((cy.$0(E.PvNone))(E.PvNone))(E.PvNone):cy.$==5?(((cy.$0(E.PvNone))(E.PvNone))(E.PvNone))(E.PvNone):cy.$==6?((((cy.$0(E.PvNone))(E.PvNone))(E.PvNone))(E.PvNone))(E.PvNone):cy.$==7?(((((cy.$0(E.PvNone))(E.PvNone))(E.PvNone))(E.PvNone))(E.PvNone))(E.PvNone):cy.$0;}catch(cz){return((p.errorDocf(ct.Curried3(function(cA,cB,cC){return cA("<Error creating Doc "+O.toSafe(cB)+": "+O.toSafe(cC)+">");})))(cx.docName.get_Id()))(cz.message);}};p.RefDoc=function(cx,cy){var cz;return bb.EmbedView((cz=_8.get_Do(),_8.Bind(function(cA){return cA!=null&&cA.$==1?_8.Bind(function(cB){return cB!=null&&cB.$==1?_8.Const(p.invokeFunDoc(cB.$0)):_8.Const((p.errorDocf(function(cC){return function(cD){return cC("<Doc not found : "+("("+$.p$7(cD[0])+", "+$.p$10(cD[1])+")")+">");};}))([cx,cy]));},cA.$0.plgDocs.TryFindByKeyAsView(cy)):_8.Const((p.errorDocf(function(cB){return function(cC){return cB("<PlugIn not found : "+("("+$.p$7(cC[0])+", "+$.p$10(cC[1])+")")+">");};}))([cx,cy]));},p.plugIns().TryFindByKeyAsView(cx))));};p.mainDocV=function(){U.$cctor();return U.mainDocV;};p.pvIdent=function(cx){return cx.$==6?cx.$0:(function(cy){return function(cz){return cy("Wrong parameter expecting Ident: "+$.p$6(cz));};}(N.FailWith))(cx);};p.pvDoc=function(cx){var cy,cz,cA,cB;switch(cx.$==6?0:cx.$==0?(cy=(cz=cx.$0,p.RefVar(cz[0],cz[1])),1):cx.$==4?(cy=cx.$0,1):cx.$==1?(cy=(cA=cx.$0,p.RefViw(cA[0],cA[1])),2):cx.$==5?(cy=cx.$0,2):cx.$==2?(cy=(cB=cx.$0,p.RefDoc(cB[0],cB[1])),3):cx.$==7?(cy=cx.$0,3):cx.$==15?4:5){case 0:return bb.TextNode(cx.$0);case 1:return bb.TextView(cy.get_View());case 2:return bb.TextView(cy);case 3:return cy;case 4:return bb.Concat(R.map(p.pvDoc,cx.$0));case 5:return(function(cC){return function(cD){return cC("Wrong parameter expecting Doc: "+$.p$6(cD));};}(N.FailWith))(cx);}};p.pvView=function(cx){var cy,cz,cA;switch(cx.$==6?0:cx.$==0?(cy=(cz=cx.$0,p.RefVar(cz[0],cz[1])),1):cx.$==4?(cy=cx.$0,1):cx.$==1?(cy=(cA=cx.$0,p.RefViw(cA[0],cA[1])),2):cx.$==5?(cy=cx.$0,2):3){case 0:return _8.Const(cx.$0);case 1:return cy.get_View();case 2:return cy;case 3:return(function(cB){return function(cC){return cB("Wrong parameter expecting View: "+$.p$6(cC));};}(N.FailWith))(cx);}};p.pvVar=function(cx){var cy,cz,cA;switch(cx.$==6?0:cx.$==0?(cy=(cz=cx.$0,p.RefVar(cz[0],cz[1])),1):cx.$==4?(cy=cx.$0,1):cx.$==1?(cy=(cA=cx.$0,p.RefViw(cA[0],cA[1])),2):cx.$==5?(cy=cx.$0,2):3){case 0:return new bz.New(_8.Const(cx.$0),a.ignore);case 1:return cy;case 2:return new bz.New(cy,a.ignore);case 3:return(function(cB){return function(cC){return cB("Wrong parameter expecting Var: "+$.p$6(cC));};}(N.FailWith))(cx);}};p.pvAct=function(cx){var cy,cz,cA;return cx.$==8?(cy=cx.$0,function(){return function(){return cy();};}):cx.$==9?(cz=cx.$0,function(){return cz;}):cx.$==10?(cA=cx.$0,function(cB){return function(cC){return(cA(cB))(cC);};}):((ct.Curried(function(cB,cC,cD,cE){return cB("Wrong parameter expecting Action: "+$.p$6(cC));},4))(N.FailWith))(cx);};p.pvObject=function(cx){return cx.$==13?cx.$0:(function(cy){return function(cz){return cy("Wrong parameter expecting Object: "+$.p$6(cz));};}(N.FailWith))(cx);};p.pvMapViews=function(cx){return cx.$==16?R.map(function(cy){return[cy.K,p.pvView(cy.V)];},cx.$0):(function(cy){return function(cz){return cy("Wrong parameter expecting Map: "+$.p$6(cz));};}(N.FailWith))(cx);};p.pvMapDocs=function(cx){return cx.$==16?R.map(function(cy){return[cy.K,p.pvDoc(cy.V)];},cx.$0):(function(cy){return function(cz){return cy("Wrong parameter expecting Map: "+$.p$6(cz));};}(N.FailWith))(cx);};p.pvMapVars=function(cx){return cx.$==16?R.map(function(cy){return[cy.K,p.pvVar(cy.V)];},cx.$0):(function(cy){return function(cz){return cy("Wrong parameter expecting Map: "+$.p$6(cz));};}(N.FailWith))(cx);};p.pvMapActions=function(cx){return cx.$==16?R.map(function(cy){return[cy.K,p.pvAct(cy.V)];},cx.$0):(function(cy){return function(cz){return cy("Wrong parameter expecting Map: "+$.p$6(cz));};}(N.FailWith))(cx);};p.getAttrs=function(cx){return S.ofSeq(R.delay(function(){return R.append(R.choose(function(cy){var cz,cA,cB,cC;function cD(cE,cF){try{return cE.setAttribute(X.Trim(cC),X.Trim(cF));}catch(cG){return(function(cH){return function(cI){return cH(O.prettyPrint(cI));};}(function(cH){cr.log(cH);}))(cG);}}return!bh.Equals(cy,null)&&cy.length===2&&(cA=P.get(cy,1),X.Trim(P.get(cy,0))!==""&&X.Trim(cA)!=="")?(cB=P.get(cy,1),(cC=P.get(cy,0),{$:1,$0:bi.DynamicCustom(function(cE){return function(cF){return cD(cE,cF);};},_8.Const(X.Trim(cB)))})):null;},R.map(function(cy){return j.splitByChar("=",cy);},j.splitByChar(";",cx))),R.delay(function(){return R.choose(function(cy){var cz,cA,cB,cC,cD;return!bh.Equals(cy,null)&&cy.length===2&&(cA=P.get(cy,1),X.Trim(P.get(cy,0))!==""&&X.Trim(cA)!=="")?(cB=P.get(cy,1),(cC=P.get(cy,0),{$:1,$0:(cD=_8.Const(X.Trim(cB)),bi.DynamicStyle(X.Trim(cC),cD))})):null;},R.map(function(cy){return j.splitByChar(":",cy);},j.splitByChar(";",cx)));}));}));};p.pvAttrs=function(cx){return cx.$==6?p.getAttrs(cx.$0):cx.$==14?T.Empty:(function(cy){return function(cz){return cy("Wrong parameter expecting Ident: "+$.p$6(cz));};}(N.FailWith))(cx);};p.pvDocs=function(cx){return cx.$==15?R.map(p.pvDoc,cx.$0):[p.pvDoc(cx)];};p.funDoc1=function(cx,cy,cz){return{$:2,$0:function(cA){return cx(cz(cA));},$1:cy};};p.funDoc2=function(cx,cy,cz,cA,cB){return{$:3,$0:function(cC){return function(cD){return cx(cz(cC),cB(cD));};},$1:cy,$2:cA};};p.funDoc3=function(cx,cy,cz,cA,cB,cC,cD){return{$:4,$0:ct.Curried3(function(cE,cF,cG){return cx(cz(cE),cB(cF),cD(cG));}),$1:cy,$2:cA,$3:cC};};p.funDoc4=function(cx,cy,cz,cA,cB,cC,cD,cE,cF){return{$:5,$0:ct.Curried(function(cG,cH,cI,cJ){return cx(cz(cG),cB(cH),cD(cI),cD(cJ));},4),$1:cy,$2:cA,$3:cC,$4:cE};};p.funDoc5=function(cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH){return{$:6,$0:ct.Curried(function(cI,cJ,cK,cL,cM){return cx(cz(cI),cB(cJ),cD(cK),cF(cL),cH(cM));},5),$1:cy,$2:cA,$3:cC,$4:cE,$5:cG};};p.funDoc6=function(cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ){return{$:7,$0:ct.Curried(function(cK,cL,cM,cN,cO,cP){return cx(cz(cK),cB(cL),cD(cM),cF(cN),cH(cO),cJ(cP));},6),$1:cy,$2:cA,$3:cC,$4:cE,$5:cG,$6:cI};};p.funAct1=function(cx,cy,cz){return{$:1,$0:function(cA){cx(cz(cA));},$1:cy};};p.funAct2=function(cx,cy,cz,cA,cB){return{$:2,$0:function(cC){return function(cD){return cx(cz(cC),cB(cD));};},$1:cy,$2:cA};};p.funAct3=function(cx,cy,cz,cA,cB,cC,cD){return{$:3,$0:ct.Curried3(function(cE,cF,cG){return cx(cz(cE),cB(cF),cD(cG));}),$1:cy,$2:cA,$3:cC};};p.funAct4=function(cx,cy,cz,cA,cB,cC,cD,cE,cF){return{$:4,$0:ct.Curried(function(cG,cH,cI,cJ){return cx(cz(cG),cB(cH),cD(cI),cD(cJ));},4),$1:cy,$2:cA,$3:cC,$4:cE};};p.funAct5=function(cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH){return{$:5,$0:ct.Curried(function(cI,cJ,cK,cL,cM){return cx(cz(cI),cB(cJ),cD(cK),cF(cL),cH(cM));},5),$1:cy,$2:cA,$3:cC,$4:cE,$5:cG};};p.funAct6=function(cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ){return{$:6,$0:ct.Curried(function(cK,cL,cM,cN,cO,cP){return cx(cz(cK),cB(cL),cD(cM),cF(cN),cH(cO),cJ(cP));},6),$1:cy,$2:cA,$3:cC,$4:cE,$5:cG,$6:cI};};p.ptIdent=function(cx,cy){return[new D({$:0,$0:cy,$1:new C({$:0,$0:new B({$:4,$0:cx})})}),p.pvIdent];};p.ptAttribs=function(cx){return[new D({$:0,$0:cx,$1:new C({$:2,$0:S.ofArray([B.ParmText,B.ParmAction])})}),p.pvAttrs];};p.ptDocs=function(cx){return[new D({$:0,$0:cx,$1:new C({$:3,$0:S.ofArray([B.ParmDoc])})}),p.pvDocs];};p.ptDoc=function(cx){return[new D({$:0,$0:cx,$1:new C({$:0,$0:B.ParmDoc})}),p.pvDoc];};p.ptText=function(cx){return[new D({$:0,$0:cx,$1:new C({$:0,$0:B.ParmText})}),p.pvView];};p.ptVar=function(cx){return[new D({$:0,$0:cx,$1:new C({$:0,$0:B.ParmVar})}),p.pvVar];};p.ptMapViews=function(cx){return[new D({$:0,$0:cx,$1:new C({$:2,$0:S.ofArray([B.ParmText])})}),p.pvMapViews];};p.ptMapDocs=function(cx){return[new D({$:0,$0:cx,$1:new C({$:2,$0:S.ofArray([B.ParmDoc])})}),p.pvMapDocs];};p.ptMapVars=function(cx){return[new D({$:0,$0:cx,$1:new C({$:2,$0:S.ofArray([B.ParmVar])})}),p.pvMapVars];};p.ptMapActions=function(cx){return[new D({$:0,$0:cx,$1:new C({$:2,$0:S.ofArray([B.ParmAction])})}),p.pvMapActions];};p.ptObject=function(cx){return[new D({$:0,$0:cx,$1:new C({$:0,$0:B.ParmObject})}),p.pvObject];};p.ptOpt=function(cx,cy){var cz,cA;function cB(cC,cD){return cD.$==14?null:{$:1,$0:cC(cD)};}cz=cx(cy);return cz[0].$1.$==0?[new D({$:0,$0:cz[0].$0,$1:new C({$:4,$0:cz[0].$1.$0})}),(cA=cz[1],function(cC){return cB(cA,cC);})]:(function(cC){return function(cD){return cC("Not implemented or Wrong parameter: "+O.prettyPrint(cD));};}(N.FailWith))(cy);};p.getDocFunc=function(cx,cy){var cz;cz=cy.plgDocs.TryFindByKey(new s({$:0,$0:cx}));return cz!=null&&cz.$==1?cz.$0.docDoc.f():(function(cA){return function(cB){return cA("docFunction not found "+O.toSafe(cB));};}(N.FailWith))(cx);};p.docFuncToF0=function(cx){var cy;return cx.$==0?(cy=cx.$0,function(){return cy;}):cx.$==1?cx.$0:((ct.Curried3(function(cz,cA,cB){return cz("expected docFunction with 0 parameters "+$.p$5(cA));}))(N.FailWith))(cx);};p.docFuncToF1=function(cx){return cx.$==2?cx.$0:((ct.Curried3(function(cy,cz,cA){return cy("expected docFunction with 1 parameters "+$.p$5(cz));}))(N.FailWith))(cx);};p.docFuncToF2=function(cx){return cx.$==3?cx.$0:((ct.Curried(function(cy,cz,cA,cB){return cy("expected docFunction with 2 parameters "+$.p$5(cz));},4))(N.FailWith))(cx);};p.docFuncToF3=function(cx){return cx.$==4?cx.$0:((ct.Curried(function(cy,cz,cA,cB,cC){return cy("expected docFunction with 3 parameters "+$.p$5(cz));},5))(N.FailWith))(cx);};p.docFuncToF4=function(cx){return cx.$==5?cx.$0:((ct.Curried(function(cy,cz,cA,cB,cC,cD){return cy("expected docFunction with 4 parameters "+$.p$5(cz));},6))(N.FailWith))(cx);};p.docFuncToF5=function(cx){return cx.$==6?cx.$0:((ct.Curried(function(cy,cz,cA,cB,cC,cD,cE){return cy("expected docFunction with 5 parameters "+$.p$5(cz));},7))(N.FailWith))(cx);};p.docFuncToF6=function(cx){return cx.$==7?cx.$0:((ct.Curried(function(cy,cz,cA,cB,cC,cD,cE,cF){return cy("expected docFunction with 6 parameters "+$.p$5(cz));},8))(N.FailWith))(cx);};p.getDocF0=function(cx,cy){return p.docFuncToF0(p.getDocFunc(cx,cy));};p.getDocF1=function(cx,cy){return p.docFuncToF1(p.getDocFunc(cx,cy));};p.getDocF2=function(cx,cy){return p.docFuncToF2(p.getDocFunc(cx,cy));};p.getDocF3=function(cx,cy){return p.docFuncToF3(p.getDocFunc(cx,cy));};p.getDocF4=function(cx,cy){return p.docFuncToF4(p.getDocFunc(cx,cy));};p.getDocF5=function(cx,cy){return p.docFuncToF5(p.getDocFunc(cx,cy));};p.getDocF6=function(cx,cy){return p.docFuncToF6(p.getDocFunc(cx,cy));};p.getMainClientDoc=function(){var cx;return bb.EmbedView((cx=p.plugIns().v,_8.Map2(function(cy){var cz;try{cz=X.SplitChars(cy,["."],0);return p.pvDoc({$:2,$0:[new q({$:0,$0:R.head(cz)}),new s({$:0,$0:R.last(cz)})]});}catch(cA){return bb.TextView(p.mainDocV().get_View());}},p.mainDocV().get_View(),cx)));};p.newVar=function(cx,cy){return v.New(cx,cy);};p.newViw=function(cx,cy){return w.New(cx,cy);};p.newDoc=function(cx,cy){return x.New(cx,bj.Create(function(){return{$:0,$0:cy.f()};}));};p.newDoc0=function(cx,cy){return x.New(cx,bj.Create(function(){return{$:1,$0:cy};}));};p.newAct=function(cx,cy){return y.New(cx,{$:0,$0:cy},_8.Const(true));};p.newActF=function(cx,cy){return y.New(cx,cy,_8.Const(true));};p.newDocL=function(cx,cy){return x.New(cx,cy);};p.newDocF=function(cx,cy){return x.New(cx,bj.Create(function(){return cy;}));};p.plugin=function(){U.$cctor();return U.plugin;};q=p.PlgInName=ct.Class({get_Id:function(){return this.$0;}},null,q);r=p.PlgVarName=ct.Class({get_Id:function(){return this.$0;}},null,r);s=p.PlgDocName=ct.Class({get_Id:function(){return this.$0;}},null,s);t=p.PlgViwName=ct.Class({get_Id:function(){return this.$0;}},null,t);u=p.PlgActName=ct.Class({get_Id:function(){return this.$0;}},null,u);v.New=function(cx,cy){return{varName:cx,varVar:cy};};w.New=function(cx,cy){return{viwName:cx,viwView:cy};};x.New=function(cx,cy){return{docName:cx,docDoc:cy};};y.New=function(cx,cy,cz){return{actName:cx,actFunction:cy,actEnabled:cz};};z.New=function(cx,cy,cz,cA,cB){return{plgName:cx,plgVars:cy,plgViews:cz,plgDocs:cA,plgActions:cB};};A=p.IdentType=ct.Class({toString:function(){var cx;cx=c["String.Substring2"]((function(cy){return function(cz){return cy($.p(cz));};}(a.id))(this),5,100);return(function(cy){return function(cz){return cy("id"+O.toSafe(cz));};}(a.id))(cx);}},null,A);A.IdentGeneric=new A({$:5});B=p.ParmTypeBasic=ct.Class({toString:function(){return this.$==1?"Var":this.$==2?"Doc":this.$==3?"Action":this.$==4?(function(cx){return function(cy){return cx(a.String(cy));};}(a.id))(this.$0):this.$==5?"obj":"Text";}},null,B);B.ParmText=new B({$:0});B.ParmAction=new B({$:3});B.ParmDoc=new B({$:2});B.ParmVar=new B({$:1});B.ParmObject=new B({$:5});C=p.ParmType=ct.Class({toString:function(){var cx,cy,cz;switch(this.$==0?(cx=this.$0,1):this.$==1?(cx=this.$0,2):this.$==3?(cx=this.$0,4):this.$==4?(cx=this.$0,5):this.$0.$==1?this.$0.$0.$==0?this.$0.$1.$==1?this.$0.$1.$0.$==3?this.$0.$1.$1.$==0?0:(cx=this.$0,3):(cx=this.$0,3):(cx=this.$0,3):(cx=this.$0,3):(cx=this.$0,3)){case 0:return"<Attrs>";case 1:return(function(cA){return function(cB){return cA(a.String(cB));};}(a.id))(cx);case 2:return C.ListToString(cx);case 3:cy=C.ListToString(cx);return(function(cA){return function(cB){return cA("\"<nm1>="+O.toSafe(cB)+";...\"");};}(a.id))(cy);case 4:cz=C.ListToString(cx);return(function(cA){return function(cB){return cA(O.toSafe(cB)+" ...");};}(a.id))(cz);case 5:return(function(cA){return function(cB){return cA("["+a.String(cB)+"]");};}(a.id))(cx);}}},null,C);C.ListToString=function(cx){return X.concat("|",R.map(function(cy){return function(cz){return cy(a.String(cz));};}(a.id),cx));};D=p.ParmDef=ct.Class({toString:function(){return(((ct.Curried3(function(cx,cy,cz){return cx(O.toSafe(cy)+":"+a.String(cz));}))(a.id))(this.$0))(this.$1);}},null,D);E.PvNone={$:14};F=p.PlugInBuilder=ct.Class({Zero:function(){var cx;cx=p.defaultPlugIn();return z.New(new q({$:0,$0:"Main"}),cx.plgVars,cx.plgViews,cx.plgDocs,cx.plgActions);},Yield:function(){return this.Zero();},For:function(cx,cy){var cz;cz=bo.Get(cx);try{while(cz.MoveNext())cy(cz.Current());}finally{cz.Dispose();}},Name:function(cx,cy){return z.New(new q({$:0,$0:cy}),cx.plgVars,cx.plgViews,cx.plgDocs,cx.plgActions);},AddViw:function(cx,cy,cz){cx.plgViews.Append(p.newViw(new t({$:0,$0:cy}),cz));return cx;},AddVar:function(cx,cy,cz){cx.plgVars.Append(p.newVar(new r({$:0,$0:cy}),cz));return cx;},AddDoc:function(cx,cy,cz){cx.plgDocs.Append(p.newDoc(new s({$:0,$0:cy}),cz));return cx;},AddDoc0:function(cx,cy,cz){cx.plgDocs.Append(p.newDoc0(new s({$:0,$0:cy}),cz));return cx;},AddDoc1:function(cx,cy,cz,cA,cB){cx.plgDocs.Append(p.newDocF(new s({$:0,$0:cy}),p.funDoc1(cz,cA[0],cA[1])));return cx;},AddDoc2:function(cx,cy,cz,cA,cB){cx.plgDocs.Append(p.newDocF(new s({$:0,$0:cy}),p.funDoc2(cz,cA[0],cA[1],cB[0],cB[1])));return cx;},AddDoc3:function(cx,cy,cz,cA,cB,cC){cx.plgDocs.Append(p.newDocF(new s({$:0,$0:cy}),p.funDoc3(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1])));return cx;},AddDoc4:function(cx,cy,cz,cA,cB,cC,cD){cx.plgDocs.Append(p.newDocF(new s({$:0,$0:cy}),p.funDoc4(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1],cD[0],cD[1])));return cx;},AddDoc5:function(cx,cy,cz,cA,cB,cC,cD,cE){cx.plgDocs.Append(p.newDocF(new s({$:0,$0:cy}),p.funDoc5(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1],cD[0],cD[1],cE[0],cE[1])));return cx;},AddDoc6:function(cx,cy,cz,cA,cB,cC,cD,cE,cF){cx.plgDocs.Append(p.newDocF(new s({$:0,$0:cy}),p.funDoc6(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1],cD[0],cD[1],cE[0],cE[1],cF[0],cF[1])));return cx;},AddAct:function(cx,cy,cz){cx.plgActions.Append(p.newAct(new u({$:0,$0:cy}),cz));return cx;},AddAct1:function(cx,cy,cz,cA,cB){cx.plgActions.Append(p.newActF(new u({$:0,$0:cy}),p.funAct1(cz,cA[0],cA[1])));return cx;},AddAct2:function(cx,cy,cz,cA,cB){cx.plgActions.Append(p.newActF(new u({$:0,$0:cy}),p.funAct2(cz,cA[0],cA[1],cB[0],cB[1])));return cx;},AddAct3:function(cx,cy,cz,cA,cB,cC){cx.plgActions.Append(p.newActF(new u({$:0,$0:cy}),p.funAct3(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1])));return cx;},AddAct4:function(cx,cy,cz,cA,cB,cC,cD){cx.plgActions.Append(p.newActF(new u({$:0,$0:cy}),p.funAct4(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1],cD[0],cD[1])));return cx;},AddAct5:function(cx,cy,cz,cA,cB,cC,cD,cE){cx.plgActions.Append(p.newActF(new u({$:0,$0:cy}),p.funAct5(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1],cD[0],cD[1],cE[0],cE[1])));return cx;},AddAct6:function(cx,cy,cz,cA,cB,cC,cD,cE,cF){cx.plgActions.Append(p.newActF(new u({$:0,$0:cy}),p.funAct6(cz,cA[0],cA[1],cB[0],cB[1],cC[0],cC[1],cD[0],cD[1],cE[0],cE[1],cF[0],cF[1])));return cx;},AddActO:function(cx,cy,cz){cz==null?void 0:cx.plgActions.Append(p.newAct(new u({$:0,$0:cy}),cz.$0));return cx;},Merge:function(cx,cy,cz){cx.plgVars.AppendMany(R.map(function(cA){return v.New(new r({$:0,$0:cy+cA.varName.get_Id()}),cA.varVar);},cz.plgVars));cx.plgViews.AppendMany(R.map(function(cA){return w.New(new t({$:0,$0:cy+cA.viwName.get_Id()}),cA.viwView);},cz.plgViews));cx.plgDocs.AppendMany(R.map(function(cA){return x.New(new s({$:0,$0:cy+cA.docName.get_Id()}),cA.docDoc);},cz.plgDocs));cx.plgActions.AppendMany(R.map(function(cA){return y.New(new u({$:0,$0:cy+cA.actName.get_Id()}),cA.actFunction,cA.actEnabled);},cz.plgActions));return cx;}},g,F);F.New=ct.Ctor(function(){g.New.call(this);},F);G.templateCreate0=function(cx,cy,cz,cA,cB,cC,cD){var cE,cF;try{bw.LoadLocalTemplates("local");cE=(R.isEmpty(cy)?a.id:(cF=[{$:3,$0:"attrs",$1:bk.Concat(cy)}],function(cG){return R.append(cF,cG);}))(R.delay(function(){function cG(cH,cI){return{$:8,$0:cH.toLowerCase(),$1:cI};}return R.append(R.map(function(cH){return cG(cH[0],cH[1]);},cB),R.delay(function(){function cH(cI,cJ){return{$:2,$0:cI.toLowerCase(),$1:cJ};}return R.append(R.map(function(cI){return cH(cI[0],cI[1]);},cz),R.delay(function(){function cI(cJ,cK){return{$:0,$0:cJ.toLowerCase(),$1:cK};}return R.append(R.map(function(cJ){return cI(cJ[0],cJ[1]);},cA),R.delay(function(){function cJ(cK,cL){return{$:4,$0:cK.toLowerCase(),$1:cL};}return R.append(R.map(function(cK){return cJ(cK[0],cK[1]);},cC),R.delay(function(){function cK(cL,cM){return{$:6,$0:cL.toLowerCase(),$1:cM};}return R.map(function(cL){return cK(cL[0],cL[1]);},cD);}));}));}));}));}));return bw.NamedTemplate("local",{$:1,$0:cx.toLowerCase()},cE);}catch(cG){return bb.TextNode(cG.message);}};G.templateCreate=function(cx,cy,cz,cA,cB,cC){return G.templateCreate0(cx,cy,cz,cA,cB,cC,[]);};G.splitterMouseDown=function(cx,cy,cz){var cA,cB,cC,cD,cE,cF,cG,cH;function cI(cM){return cB?cx?cM.getBoundingClientRect().width:-cM.getBoundingClientRect().width:cx?cM.getBoundingClientRect().height:-cM.getBoundingClientRect().height;}function cJ(cM){return cB?cM.clientX:cM.clientY;}function cK(cM){var cN,cO,cP,cQ,cR;cN=j.left(5,a.String((cO=(cP=(cJ(cM)-cF)*100/(cH-cG)+cC,(cQ=0,bh.Compare(cQ,cP)===1?cQ:cP)),(cR=100,bh.Compare(cR,cO)===-1?cR:cO))));cy.Get()!==cN?cy.Set(cN):void 0;}function cL(){self.removeEventListener("mousemove",cK,false);self.removeEventListener("mouseup",cL,false);}cA=cz.toElement;cB=cA.parentElement.hasAttribute("vertical");cC=(cD=(cE=cy.Get(),(k.parseDoubleO())(cE)),cD==null?0:cD.$0);cF=cJ(cz);cG=cI(cA);cH=cI(cA.parentElement);self.addEventListener("mousemove",cK,false);self.addEventListener("mouseup",cL,false);cz.preventDefault();};G.splitter=function(cx,cy,cz,cA,cB,cC){var cD,cE;cD=p.pvView(cB==null?{$:6,$0:"5px"}:{$:5,$0:cB.$0});cE=cC==null?_4.Create$1("50"):cC.$0;return G.templateCreate(cx,cy,[["gap",cD]],[["doc1",cz],["doc2",cA]],[["perc",cE]],[["MouseDown",function(){return function(cF){return G.splitterMouseDown(true,cE,cF);};}]]);};G.mainDoc=function(){return G.templateCreate("AppFramework",[],[["MainDoc",p.mainDocV().get_View()]],[["MainClient",p.getMainClientDoc()]],[],[["GoClient",function(){return function(){return p.mainDocV().Set("AF.Client");};}]]);};G.plug=function(){U.$cctor();return U.plug;};G.splitterTemplate=function(cx,cy,cz,cA,cB,cC){return G.templateCreate0(cx,[],[["PartSizes",cy],["Gap",cC]],[],[],[["MouseDown",function(){return cB;}]],[["AfterRender",cz],["AfterRenderSp",cA]]);};G.startWithHtml=function(cx){var cy,cz,cA;n.init(ct.Curried(G.splitterTemplate,5,["WCompSplitterHor"]),ct.Curried(G.splitterTemplate,5,["WCompSplitterVer"]));cy=self.document.createElement("div");self.document.body.appendChild(cy);cy.outerHTML=cx;cz=G.mainDoc();cA=self.document.body;bw.LoadLocalTemplates("");bb.RunAppend(cA,cz);};H.selectionPlugInO=function(){U.$cctor();return U.selectionPlugInO;};H.currentPlugInW=function(){U.$cctor();return U.currentPlugInW;};H.currentPlugInV=function(){U.$cctor();return U.currentPlugInV;};H.renderPlugIns=function(){return bb.Flatten(p.plugIns().MapLens(function(cx){return G.templateCreate("Tile",[],[["Name",_8.Const(cx.get_Id())],["Selected",_8.Map(function(cy){return bh.Equals(cy,{$:1,$0:cx})?"selected":"";},H.selectionPlugInO().get_View())]],[],[],[["Select",function(){return function(){return H.selectionPlugInO().Set({$:1,$0:cx});};}]]);}));};H.renderVars=function(){function cx(cz,cA){return[cz.plgName,cA.varName];}function cy(cz,cA){return G.templateCreate("NameValueInput",[],[["Name",_8.Const(cA.varName.get_Id())]],[],[["Value",cA.varVar]],[]);}return bb.ConvertBy(function(cz){return cx(cz[0],cz[1]);},function(cz){return cy(cz[0],cz[1]);},_8.Map(function(cz){return R.map(function(cA){return[cz,cA];},cz.plgVars);},H.currentPlugInW()));};H.renderViews=function(){function cx(cz,cA){return[cz.plgName,cA.viwName];}function cy(cz,cA){return G.templateCreate("NameValue",[],[["Name",_8.Const(cA.viwName.get_Id())],["Value",cA.viwView]],[],[],[]);}return bb.ConvertBy(function(cz){return cx(cz[0],cz[1]);},function(cz){return cy(cz[0],cz[1]);},_8.Map(function(cz){return R.map(function(cA){return[cz,cA];},cz.plgViews);},H.currentPlugInW()));};H.docParms=function(cx){var cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK;cy=cx.docDoc.f();return cy.$==1?"()":cy.$==2?(cz=X.concat(", ",(cA=S.ofArray([cy.$1]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cA))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cz)):cy.$==3?(cB=X.concat(", ",(cC=S.ofArray([cy.$1,cy.$2]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cC))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cB)):cy.$==4?(cD=X.concat(", ",(cE=S.ofArray([cy.$1,cy.$2,cy.$3]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cE))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cD)):cy.$==5?(cF=X.concat(", ",(cG=S.ofArray([cy.$1,cy.$2,cy.$3,cy.$4]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cG))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cF)):cy.$==6?(cH=X.concat(", ",(cI=S.ofArray([cy.$1,cy.$2,cy.$3,cy.$4,cy.$5]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cI))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cH)):cy.$==7?(cJ=X.concat(", ",(cK=S.ofArray([cy.$1,cy.$2,cy.$3,cy.$4,cy.$5,cy.$6]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cK))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cJ)):"";};H.renderDocs=function(){function cx(cz,cA){return[cz.plgName,cA.docName];}function cy(cz,cA){return G.templateCreate("Tile",[],[["Name",_8.Const(cA.docName.get_Id()+H.docParms(cA))]],[],[],[["Select",function(){return function(){return _8.Get(function(cB){var cC;cC=cB.plgName.get_Id()+"."+cA.docName.get_Id();p.mainDocV().Set(cC);},H.currentPlugInW());};}]]);}return bb.ConvertBy(function(cz){return cx(cz[0],cz[1]);},function(cz){return cy(cz[0],cz[1]);},_8.Bind(function(cz){function cA(cB){return[cz,cB];}return _8.Map(function(cB){return R.map(cA,cB);},cz.plgDocs.v);},H.currentPlugInW()));};H.actParms=function(cx){var cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK;cy=cx.actFunction;return cy.$==1?(cz=X.concat(", ",(cA=S.ofArray([cy.$1]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cA))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cz)):cy.$==2?(cB=X.concat(", ",(cC=S.ofArray([cy.$1,cy.$2]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cC))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cB)):cy.$==3?(cD=X.concat(", ",(cE=S.ofArray([cy.$1,cy.$2,cy.$3]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cE))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cD)):cy.$==4?(cF=X.concat(", ",(cG=S.ofArray([cy.$1,cy.$2,cy.$3,cy.$4]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cG))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cF)):cy.$==5?(cH=X.concat(", ",(cI=S.ofArray([cy.$1,cy.$2,cy.$3,cy.$4,cy.$5]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cI))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cH)):cy.$==6?(cJ=X.concat(", ",(cK=S.ofArray([cy.$1,cy.$2,cy.$3,cy.$4,cy.$5,cy.$6]),R.map(function(cL){return function(cM){return cL(a.String(cM));};}(a.id),cK))),(function(cL){return function(cM){return cL("("+O.toSafe(cM)+")");};}(a.id))(cJ)):"()";};H.callFunction=function(cx,cy,cz){if(cz.$==0)cz.$0();else if(cz.$==1)cz.$0(cy);else if(cz.$==2)(cz.$0(cx))(cy);else((function(cA){return function(cB){return cA("Cannot call too many parameters "+$.p$1(cB));};}(N.FailWith))(cz));};H.renderActions=function(){function cx(cz,cA){return[cz.plgName,cA.actName];}function cy(cz,cA){var cB;cB=H.actParms(cA);return G.templateCreate("Action",[bi.DynamicPred("disabled",_8.Map(function(cC){return!cC;},cA.actEnabled),_8.Const(""))],[["Name",_8.Const(cA.actName.get_Id()+cB)]],[],[],[["Click",function(){return function(cC){return H.callFunction({$:13,$0:null},{$:13,$0:cC},cA.actFunction);};}]]);}return bb.ConvertBy(function(cz){return cx(cz[0],cz[1]);},function(cz){return cy(cz[0],cz[1]);},_8.Map(function(cz){return R.map(function(cA){return[cz,cA];},cz.plgActions);},H.currentPlugInW()));};H.AppFwkClient=function(){return G.templateCreate("AppFwkClient",[],[["PlugInName",_8.Map(function(cx){return cx.plgName.get_Id();},H.currentPlugInW())]],[["PlugIns",H.renderPlugIns()],["Vars",H.renderVars()],["Views",H.renderViews()],["Docs",H.renderDocs()],["Actions",H.renderActions()]],[],[]);};J.html=function(){U.$cctor();return U.html$1;};K.txtToAttrs=function(){U.$cctor();return U.txtToAttrs;};K.percV=function(){U.$cctor();return U.percV;};K.gapV=function(){U.$cctor();return U.gapV;};K.main=function(){var cx,cy,cz,cA;cx=(cy=p.plugin(),cy.AddDoc0(cy.AddDoc0(cy.AddDoc0(cy.AddDoc0(cy.AddDoc0(cy.AddDoc0(cy.AddVar(cy.AddVar(cy.Name(cy.Yield(),"PlugInFuncs"),"perc",K.percV()),"gap",K.gapV()),"inpPer",L.inpPer),"inpGap",L.inpGap),"doc1",L.doc1),"doc2",L.doc2),"splitH",L.splitH),"splitV",L.splitV));p.plugIns().Append(cx);cz=(cA=p.plugin(),cA.AddDoc0(cA.AddDoc0(cA.AddDoc0(cA.AddDoc0(cA.AddDoc0(cA.AddDoc0(cA.AddVar(cA.AddVar(cA.Name(cA.Yield(),"Direct"),"perc",K.percV()),"gap",K.gapV()),"inpPer",M.inpPer),"inpGap",M.inpGap),"doc1",M.doc1),"doc2",M.doc2),"splitH",M.splitH),"splitV",M.splitV));p.plugIns().Append(cz);p.mainDocV().Set("Direct.splitV");G.startWithHtml(bm.html()+J.html());};L.inputDF=function(){U.$cctor();return U.inputDF;};L.elementDF=function(){U.$cctor();return U.elementDF;};L.splitterDF=function(){U.$cctor();return U.splitterDF;};L.inpPer=function(){return((L.inputDF())(E.PvNone))({$:4,$0:K.percV()});};L.inpGap=function(){return((L.inputDF())(E.PvNone))({$:4,$0:K.gapV()});};L.doc1=function(){return(((L.elementDF())({$:6,$0:"div"}))({$:6,$0:"height:100%; color:red ; background: lightblue"}))({$:15,$0:S.ofArray([{$:6,$0:"Perc: %"},{$:7,$0:L.inpPer()}])});};L.doc2=function(){return(((L.elementDF())({$:6,$0:"div"}))({$:6,$0:"height:100%; color:blue; background: pink"}))({$:15,$0:S.ofArray([{$:6,$0:"Gap: "},{$:7,$0:L.inpGap()}])});};L.splitH=function(){return((((((L.splitterDF())({$:6,$0:"HSplitter1"}))({$:6,$0:"height:100%"}))({$:7,$0:L.doc1()}))({$:7,$0:L.doc2()}))({$:4,$0:K.gapV()}))({$:4,$0:K.percV()});};L.splitV=function(){return((((((L.splitterDF())({$:6,$0:"VSplitter1"}))({$:6,$0:"height:100%"}))({$:6,$0:"Hello"}))({$:7,$0:L.splitH()}))({$:4,$0:K.gapV()}))({$:4,$0:K.percV()});};M.inpPer=function(){return bb.Input([],K.percV());};M.inpGap=function(){return bb.Input([],K.gapV());};M.doc1=function(){return bb.Element("div",(K.txtToAttrs())("height:100%; color:red ; background: lightblue"),[bb.TextNode("Perc: %"),M.inpPer()]);};M.doc2=function(){return bb.Element("div",(K.txtToAttrs())("height:100%; color:blue; background: pink"),[bb.TextNode("Gap: "),M.inpGap()]);};M.splitH=function(){return G.splitter("HSplitter1",(K.txtToAttrs())("height:100%"),M.doc1(),M.doc2(),{$:1,$0:K.gapV().get_View()},{$:1,$0:K.percV()});};M.splitV=function(){return G.splitter("VSplitter1",(K.txtToAttrs())("height:100%"),bb.TextNode("Hello"),M.splitH(),{$:1,$0:K.gapV().get_View()},{$:1,$0:K.percV()});};N.FailWith=function(cx){throw new b8(cx);};N.range=function(cx,cy){var cz;cz=1+cy-cx;return cz<=0?[]:R.init(cz,function(cA){return cA+cx;});};N.KeyValue=function(cx){return[cx.K,cx.V];};O.toSafe=function(cx){return cx==null?"":cx;};O.prettyPrint=function(cx){var cy,cz;function cA(cB,cC){return cB+" = "+O.prettyPrint(cC);}return cx===null?"null":(cy=typeof cx,cy=="string"?"\""+cx+"\"":cy=="object"?cx instanceof a.Array?"[|"+X.concat("; ",P.map(O.prettyPrint,cx))+"|]":(cz=a.String(cx),cz==="[object Object]"?"{"+X.concat("; ",P.map(function(cB){return cA(cB[0],cB[1]);},_2.GetFields(cx)))+"}":cz):a.String(cx));};O.printList=function(cx,cy){return"["+X.concat("; ",R.map(cx,cy))+"]";};P.get=function(cx,cy){P.checkBounds(cx,cy);return cx[cy];};P.checkBounds=function(cx,cy){if(cy<0||cy>=cx.length)N.FailWith("Index was outside the bounds of the array.");};P.length=function(cx){return cx.dims===2?cx.length*cx.length:cx.length;};P.set=function(cx,cy,cz){P.checkBounds(cx,cy);cx[cy]=cz;};Q.Bind=function(cx,cy){return cy.$==1?{$:1,$0:cy.$0}:cx(cy.$0);};Q.Map=function(cx,cy){return cy.$==1?{$:1,$0:cy.$0}:{$:0,$0:cx(cy.$0)};};P.foldBack=function(cx,cy,cz){var cA,cB,cC,cD,cE;cA=cz;cC=cy.length;for(cD=1,cE=cC;cD<=cE;cD++)cA=cx(cy[cC-cD],cA);return cA;};P.map=function(cx,cy){var cz,cA,cB;cz=new a.Array(cy.length);for(cA=0,cB=cy.length-1;cA<=cB;cA++)cz[cA]=cx(cy[cA]);return cz;};P.ofSeq=function(cx){var cy,cz;if(cx instanceof a.Array)return cx.slice();else if(cx instanceof T)return P.ofList(cx);else{cy=[];cz=bo.Get(cx);try{while(cz.MoveNext())cy.push(cz.Current());return cy;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}}};P.create=function(cx,cy){var cz,cA,cB;cz=new a.Array(cx);for(cA=0,cB=cx-1;cA<=cB;cA++)cz[cA]=cy;return cz;};P.tryFind=function(cx,cy){var cz,cA;cz=null;cA=0;while(cA<cy.length&&cz==null){cx(cy[cA])?cz={$:1,$0:cy[cA]}:void 0;cA=cA+1;}return cz;};P.tryFindIndex=function(cx,cy){var cz,cA;cz=null;cA=0;while(cA<cy.length&&cz==null){cx(cy[cA])?cz={$:1,$0:cA}:void 0;cA=cA+1;}return cz;};P.ofList=function(cx){var cy,cz;cz=[];cy=cx;while(!(cy.$==0)){cz.push(S.head(cy));cy=S.tail(cy);}return cz;};P.tryPick=function(cx,cy){var cz,cA,cB;cz=null;cA=0;while(cA<cy.length&&cz==null){cB=cx(cy[cA]);cB!=null&&cB.$==1?cz=cB:void 0;cA=cA+1;}return cz;};P.filter=function(cx,cy){var cz,cA,cB;cz=[];for(cA=0,cB=cy.length-1;cA<=cB;cA++)if(cx(cy[cA]))cz.push(cy[cA]);return cz;};P.exists=function(cx,cy){var cz,cA,cB,cC;cz=false;cA=0;cC=P.length(cy);while(!cz&&cA<cC)if(cx(cy[cA]))cz=true;else cA=cA+1;return cz;};P.concat=function(cx){return a.Array.prototype.concat.apply([],P.ofSeq(cx));};P.choose=function(cx,cy){var cz,cA,cB,cC;cz=[];for(cA=0,cB=cy.length-1;cA<=cB;cA++){cC=cx(cy[cA]);cC==null?void 0:cz.push(cC.$0);}return cz;};P.iter=function(cx,cy){var cz,cA;for(cz=0,cA=cy.length-1;cz<=cA;cz++)cx(cy[cz]);};P.pick=function(cx,cy){var cz;cz=P.tryPick(cx,cy);return cz==null?N.FailWith("KeyNotFoundException"):cz.$0;};P.forall=function(cx,cy){var cz,cA,cB,cC;cz=true;cA=0;cC=P.length(cy);while(cz&&cA<cC)if(cx(cy[cA]))cA=cA+1;else cz=false;return cz;};P.find=function(cx,cy){var cz;cz=P.tryFind(cx,cy);return cz==null?N.FailWith("KeyNotFoundException"):cz.$0;};P.init=function(cx,cy){var cz,cA,cB;cx<0?N.FailWith("Negative size given."):null;cz=new a.Array(cx);for(cA=0,cB=cx-1;cA<=cB;cA++)cz[cA]=cy(cA);return cz;};R.mapi=function(cx,cy){return R.map2(cx,R.initInfinite(a.id),cy);};R.collect=function(cx,cy){return R.concat(R.map(cx,cy));};R.tryFind=function(cx,cy){var cz,cA,cB;cz=bo.Get(cy);try{cA=null;while(cA==null&&cz.MoveNext()){cB=cz.Current();cx(cB)?cA={$:1,$0:cB}:void 0;}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};R.tryFindIndex=function(cx,cy){var cz,cA,cB;cz=bo.Get(cy);try{cA=true;cB=0;while(cA&&cz.MoveNext())if(cx(cz.Current()))cA=false;else cB=cB+1;return cA?null:{$:1,$0:cB};}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};R.map=function(cx,cy){return{GetEnumerator:function(){var cz;cz=bo.Get(cy);return new bs.New(null,null,function(cA){return cz.MoveNext()&&(cA.c=cx(cz.Current()),true);},function(){cz.Dispose();});}};};R.filter=function(cx,cy){return{GetEnumerator:function(){var cz;cz=bo.Get(cy);return new bs.New(null,null,function(cA){var cB,cC,cD;cB=cz.MoveNext();cC=cz.Current();cD=false;while(cB)if(cx(cC)){cA.c=cC;cD=true;cB=false;}else if(cz.MoveNext())cC=cz.Current();else cB=false;return cD;},function(){cz.Dispose();});}};};R.delay=function(cx){return{GetEnumerator:function(){return bo.Get(cx());}};};R.append=function(cx,cy){return{GetEnumerator:function(){var cz,cA;cz=bo.Get(cx);cA=[true];return new bs.New(cz,null,function(cB){var cC;return cB.s.MoveNext()?(cB.c=cB.s.Current(),true):(cC=cB.s,!bh.Equals(cC,null)?cC.Dispose():void 0,cB.s=null,cA[0]&&(cA[0]=false,cB.s=bo.Get(cy),cB.s.MoveNext()?(cB.c=cB.s.Current(),true):(cB.s.Dispose(),cB.s=null,false)));},function(cB){var cC;cC=cB.s;!bh.Equals(cC,null)?cC.Dispose():void 0;});}};};R.choose=function(cx,cy){return R.collect(function(cz){var cA;cA=cx(cz);return cA==null?T.Empty:S.ofArray([cA.$0]);},cy);};R.head=function(cx){var cy;cy=bo.Get(cx);try{return cy.MoveNext()?cy.Current():R.insufficient();}finally{if(typeof cy=="object"&&"Dispose"in cy)cy.Dispose();}};R.isEmpty=function(cx){var cy;cy=bo.Get(cx);try{return!cy.MoveNext();}finally{if(typeof cy=="object"&&"Dispose"in cy)cy.Dispose();}};R.map2=function(cx,cy,cz){return{GetEnumerator:function(){var cA,cB;cA=bo.Get(cy);cB=bo.Get(cz);return new bs.New(null,null,function(cC){return cA.MoveNext()&&cB.MoveNext()&&(cC.c=cx(cA.Current(),cB.Current()),true);},function(){cA.Dispose();cB.Dispose();});}};};R.initInfinite=function(cx){return{GetEnumerator:function(){return new bs.New(0,null,function(cy){cy.c=cx(cy.s);cy.s=cy.s+1;return true;},void 0);}};};R.concat=function(cx){return{GetEnumerator:function(){var cy;cy=bo.Get(cx);return new bs.New(null,null,function(cz){var cA;while(true){cA=cz.s;if(bh.Equals(cA,null)){if(cy.MoveNext()){cz.s=bo.Get(cy.Current());cz=cz;}else{cy.Dispose();return false;}}else if(cA.MoveNext()){cz.c=cA.Current();return true;}else{cz.Dispose();cz.s=null;cz=cz;}}},function(cz){var cA;cA=cz.s;!bh.Equals(cA,null)?cA.Dispose():void 0;!bh.Equals(cy,null)?cy.Dispose():void 0;});}};};R.init=function(cx,cy){return R.take(cx,R.initInfinite(cy));};R.fold=function(cx,cy,cz){var cA,cB;cA=cy;cB=bo.Get(cz);try{while(cB.MoveNext())cA=cx(cA,cB.Current());return cA;}finally{if(typeof cB=="object"&&"Dispose"in cB)cB.Dispose();}};R.take=function(cx,cy){cx<0?R.nonNegative():void 0;return{GetEnumerator:function(){var cz;cz=[bo.Get(cy)];return new bs.New(0,null,function(cA){var cB;cA.s=cA.s+1;return cA.s>cx?false:(cB=cz[0],bh.Equals(cB,null)?R.insufficient():cB.MoveNext()?(cA.c=cB.Current(),cA.s===cx?(cB.Dispose(),cz[0]=null):void 0,true):(cB.Dispose(),cz[0]=null,R.insufficient()));},function(){var cA;cA=cz[0];!bh.Equals(cA,null)?cA.Dispose():void 0;});}};};R.compareWith=function(cx,cy,cz){var cA,cB,cC,cD,cE;cA=bo.Get(cy);try{cC=bo.Get(cz);try{cD=0;cE=true;while(cE&&cD===0)if(cA.MoveNext())cD=cC.MoveNext()?cx(cA.Current(),cC.Current()):1;else if(cC.MoveNext())cD=-1;else cE=false;cB=cD;}finally{if(typeof cC=="object"&&"Dispose"in cC)cC.Dispose();}return cB;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};R.forall2=function(cx,cy,cz){return!R.exists2(function(cA,cB){return!cx(cA,cB);},cy,cz);};R.unfold=function(cx,cy){return{GetEnumerator:function(){return new bs.New(cy,null,function(cz){var cA;cA=cx(cz.s);return cA==null?false:(cz.c=cA.$0[0],cz.s=cA.$0[1],true);},void 0);}};};R.exists2=function(cx,cy,cz){var cA,cB,cC,cD;cA=bo.Get(cy);try{cC=bo.Get(cz);try{cD=false;while(!cD&&cA.MoveNext()&&cC.MoveNext())cD=cx(cA.Current(),cC.Current());cB=cD;}finally{if(typeof cC=="object"&&"Dispose"in cC)cC.Dispose();}return cB;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};R.iter=function(cx,cy){var cz;cz=bo.Get(cy);try{while(cz.MoveNext())cx(cz.Current());}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};R.max=function(cx){var cy,cz,cA;cy=bo.Get(cx);try{if(!cy.MoveNext())R.seqEmpty();cz=cy.Current();while(cy.MoveNext()){cA=cy.Current();bh.Compare(cA,cz)===1?cz=cA:void 0;}return cz;}finally{if(typeof cy=="object"&&"Dispose"in cy)cy.Dispose();}};R.forall=function(cx,cy){return!R.exists(function(cz){return!cx(cz);},cy);};R.seqEmpty=function(){return N.FailWith("The input sequence was empty.");};R.exists=function(cx,cy){var cz,cA;cz=bo.Get(cy);try{cA=false;while(!cA&&cz.MoveNext())cA=cx(cz.Current());return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};S.ofArray=function(cx){var cy,cz,cA;cy=T.Empty;for(cz=P.length(cx)-1,cA=0;cz>=cA;cz--)cy=new T({$:1,$0:P.get(cx,cz),$1:cy});return cy;};S.ofSeq=function(cx){var cy,cz,cA,cB,cC,cD;if(cx instanceof T)return cx;else if(cx instanceof a.Array)return S.ofArray(cx);else{cy=bo.Get(cx);try{cA=cy.MoveNext();if(!cA)cz=T.Empty;else{cC=new T({$:1});cB=cC;while(cA){cB.$0=cy.Current();cy.MoveNext()?cB=(cD=new T({$:1}),cB.$1=cD,cD):cA=false;}cB.$1=T.Empty;cz=cC;}return cz;}finally{if(typeof cy=="object"&&"Dispose"in cy)cy.Dispose();}}};S.head=function(cx){return cx.$==1?cx.$0:S.listEmpty();};S.tail=function(cx){return cx.$==1?cx.$1:S.listEmpty();};S.listEmpty=function(){return N.FailWith("The input list was empty.");};T=S.T=ct.Class({GetEnumerator:function(){return new bs.New(this,null,function(cx){var cy;cy=cx.s;return cy.$==0?false:(cx.c=cy.$0,cx.s=cy.$1,true);},void 0);},GetEnumerator0:function(){return bo.Get(this);}},null,T);T.Empty=new T({$:0});U.$cctor=function(){var cx,cy,cz,cA;U.$cctor=a.ignore;function cB(cH){return X.concat("\n",cH);}function cC(cH){return j.splitByChar("\n",cH);}function cD(cH){var cI,cJ;return W.array(cH,{$:1,$0:0},{$:1,$0:(cI=0,(cJ=P.length(cH)-2,bh.Compare(cI,cJ)===1?cI:cJ))});}function cE(cH){return X.concat("\n",cH);}function cF(cH){return cH+"T00:00:00";}function cG(cH){return{$:6,$0:cH};}U.result=new h.New();U.result$1=e.result();U.unindentStr=function(cH){return cB(j.unindent(cH));};U.skipLastLine=(cx=function(cH){return cD(cC(cH));},function(cH){return cE(cx(cH));});U.parseDateO2=(cy=k.tryParseWith(function(cH){var cI,cJ;cI=0;return[(cJ=bG.TryParse(cH),cJ!=null&&cJ.$==1&&(cI=cJ.$0,true)),cI];}),function(cH){return cy(cF(cH));});U.parseDateO=k.tryParseWith(function(cH){var cI,cJ;cI=0;return[(cJ=bG.TryParse(cH),cJ!=null&&cJ.$==1&&(cI=cJ.$0,true)),cI];});U.parseIntO=k.tryParseWith(function(cH){var cI;cI=0;return[bp.TryParseInt32(cH,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI];});U.parseInt64O=k.tryParseWith(function(cH){var cI;cI=0;return[bp.TryParseInt64(cH,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI];});U.parseSingleO=k.tryParseWith(function(cH){var cI,cJ;cI=0;return[(cJ=a.Number(cH),a.isNaN(cJ)?false:(cI=cJ,true)),cI];});U.parseDoubleO=k.tryParseWith(function(cH){var cI,cJ;cI=0;return[(cJ=a.Number(cH),a.isNaN(cJ)?false:(cI=cJ,true)),cI];});U.parseGuidO=k.tryParseWith(function(cH){var cI;cI=null;return[br.TryParse(cH,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI];});U["|Date|_|"]=k.parseDateO();U["|Int|_|"]=k.parseIntO();U["|Int64|_|"]=k.parseInt64O();U["|Single|_|"]=k.parseSingleO();U["|Double|_|"]=k.parseDoubleO();U["|Guid|_|"]=k.parseGuidO();U.observers=T.Empty;U.layoutHorizontal=ct.Curried(function(cH,cI,cJ,cK,cL){return bb.get_Empty();},5);U.layoutVertical=ct.Curried(function(cH,cI,cJ,cK,cL){return bb.get_Empty();},5);U.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link  href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"   type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <div ws-template=\"VSplitter1\" class=\"versplitter\" ws-attr=\"Attrs\" vertical>\r\n                    <div style=\"min-width :Calc((100% - ${gap}) *        ${perc}  / 100);max-width :Calc((100% - ${gap}) *        ${perc}  / 100)\">${doc1}</div>\r\n                    <div style=\"min-width :             ${gap}\" ws-onmousedown=\"MouseDown\" ></div>\r\n                    <div style=\"min-width :Calc((100% - ${gap}) * (100 - ${perc}) / 100);max-width :Calc((100% - ${gap}) * (100 - ${perc}) / 100)\">${doc2}</div>\r\n                </div>\r\n                <div ws-template=\"HSplitter1\" class=\"horsplitter\" ws-attr=\"Attrs\">\r\n                    <div style=\"min-height:Calc((100% - ${gap}) *        ${perc}  / 100);max-height:Calc((100% - ${gap}) *        ${perc}  / 100)\">${doc1}</div>\r\n                    <div style=\"min-height:             ${gap}\" ws-onmousedown=\"MouseDown\" ></div>\r\n                    <div style=\"min-height:Calc((100% - ${gap}) * (100 - ${perc}) / 100);max-height:Calc((100% - ${gap}) * (100 - ${perc}) / 100)\">${doc2}</div>\r\n                </div>\r\n                <style>\r\n                    .horsplitter                    { display: flex; flex-direction:column              } \r\n                    .horsplitter > div:nth-child(2) { background: #eef; cursor: row-resize; z-index:400 }\r\n                    .horsplitter > div              { overflow: hidden                                  }\r\n                    .versplitter                    { display: flex; flex-direction:row                 } \r\n                    .versplitter > div:nth-child(2) { background: #eef; cursor: col-resize; z-index:400 }\r\n                    .versplitter > div              { overflow: hidden                                  }\r\n                </style>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 2px) 2px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"80\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto; display:flex; flex-direction:column\">\r\n                                                            <div>\r\n                                                                <h3>Vars:</h3>\r\n                                                                <table style=\"overflow:auto;width:100%\" class=\"table table-condensed table-striped\">\r\n                                                                    <thead>\r\n                                                                        <th style=\"width: 10%  \">Name</th>\r\n                                                                        <th style=\"width: 90% \">Value</th>\r\n                                                                    </thead>\r\n                                                                    <tbody ws-hole=\"Vars\">\r\n                                                                    <tr ws-template=\"NameValueInput\" >\r\n                                                                        <td >${Name}:</td>\r\n                                                                        <td>\r\n                                                                        <textarea placeholder=\"Value...\" ws-var=\"Value\" style=\"resize:vertical; width:100%\" spellcheck=\"false\"></textarea>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Views:</h3>\r\n                                                                <table style=\"overflow:auto\" class=\"table table-condensed table-striped\" >\r\n                                                                    <thead>\r\n                                                                        <th style=\"width: 10%  \">Name</th>\r\n                                                                        <th style=\"width: 90% \">Value</th>\r\n                                                                    </thead>\r\n                                                                    <tbody ws-hole=\"Views\" >\r\n                                                                    <tr ws-template=\"NameValue\" class=\"\">\r\n                                                                        <td>${Name}:</td>\r\n                                                                        <td>${Value}</td>\r\n                                                                    </tr>\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Docs:</h3>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Queries:</h3>\r\n                                                                <table style=\"overflow:auto\" >\r\n                                                                    <tbody ws-hole=\"Queries\" >\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                        <div style=\"font-size:small; overflow: hidden; display: flex; flex-direction: column;\"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\" style=\"font-size:small\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" ws-attr=\"Attrs\" >${Name}</button>\r\n                                        </div>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        textarea {\r\n                           resize : vertical;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";U.plugIns=new _.New$1(function(cH){return cH.plgName;});U.mainDocV=_4.Create$1("AppFramework.AppFwkClient");U.plugin=new F.New();U.selectionPlugInO=_4.Create$1({$:1,$0:new q({$:0,$0:"AppFramework"})});U.currentPlugInW=_8.Map(function(cH){return cH==null?p.defaultPlugIn():cH.$0;},_8.Bind(function(cH){return cH==null?_8.Const({$:1,$0:p.defaultPlugIn()}):p.plugIns().TryFindByKeyAsView(cH.$0);},H.selectionPlugInO().get_View()));U.currentPlugInV=new bz.New(H.currentPlugInW(),function(cH){p.plugIns().Append(cH);});U.plug=(cz=p.plugin(),cz.AddAct2(cz.AddDoc6(cz.AddDoc6(cz.AddDoc2(cz.AddDoc3(cz.AddDoc0(cz.AddVar(cz.Name(cz.Yield(),"AF"),"MainDoc",p.mainDocV()),"Client",H.AppFwkClient),"element",bb.Element,p.ptIdent(A.IdentGeneric,"element"),p.ptAttribs("attrs"),p.ptDocs("docs")),"input",bb.Input,p.ptAttribs("attrs"),p.ptVar("var")),"splitter",G.splitter,p.ptIdent(A.IdentGeneric,"template"),p.ptAttribs("attrs"),p.ptDoc("doc1"),p.ptDoc("doc2"),p.ptOpt(p.ptText,"gap"),p.ptOpt(p.ptVar,"percentage")),"template",G.templateCreate,p.ptIdent(A.IdentGeneric,"template"),p.ptAttribs("attrs"),p.ptMapViews("texts"),p.ptMapDocs("docs"),p.ptMapVars("vars"),p.ptMapActions("actions")),"splitterMouseDown",function(cH,cI){return G.splitterMouseDown(true,cH,cI);},p.ptVar("perc"),p.ptObject("event")));cA=G.plug();p.plugIns().Append(cA);U.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";U.txtToAttrs=function(cH){return p.pvAttrs(cG(cH));};U.percV=_4.Create$1("50");U.gapV=_4.Create$1("5px");U.inputDF=p.getDocF2("input",G.plug());U.elementDF=p.getDocF3("element",G.plug());U.splitterDF=p.getDocF6("splitter",G.plug());};V.IsUpper=function(cx){return cx>="A"&&cx<="Z";};V.IsWhiteSpace=function(cx){return cx.match(new a.RegExp("\\s"))!==null;};W.string=function(cx,cy,cz){return cy==null?cz!=null&&cz.$==1?cx.slice(0,cz.$0+1):"":cz==null?cx.slice(cy.$0):cx.slice(cy.$0,cz.$0+1);};W.array=function(cx,cy,cz){return cy==null?cz!=null&&cz.$==1?cx.slice(0,cz.$0+1):[]:cz==null?cx.slice(cy.$0):cx.slice(cy.$0,cz.$0+1);};X.replicate=function(cx,cy){return P.create(cx,cy).join("");};X.concat=function(cx,cy){return P.ofSeq(cy).join(cx);};X.Substring=function(cx,cy,cz){return cx.substr(cy,cz);};X.SplitChars=function(cx,cy,cz){return X.Split(cx,new a.RegExp("["+X.RegexEscape(cy.join(""))+"]"),cz);};X.Trim=function(cx){return cx.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};X.StartsWith=function(cx,cy){return cx.substring(0,cy.length)==cy;};X.EndsWith=function(cx,cy){return cx.substring(cx.length-cy.length)==cy;};X.Split=function(cx,cy,cz){return cz===1?P.filter(function(cA){return cA!=="";},X.SplitWith(cx,cy)):X.SplitWith(cx,cy);};X.RegexEscape=function(cx){return cx.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};X.SplitWith=function(cx,cy){return cx.split(cy);};X.forall=function(cx,cy){return R.forall(cx,X.protect(cy));};X.protect=function(cx){return cx===null?"":cx;};Z.NewFromSeq=function(cx){var cy,cz,cA;cy={};cz=bo.Get(cx);try{while(cz.MoveNext()){cA=cz.Current();cy[cA[0]]=cA[1];}}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}return cy;};_2.GetFields=function(cx){var cy,cz;cy=[];for(var cA in cx)cy.push([cA,cx[cA]]);return cy;};_2.GetFieldValues=function(cx){var cy,cz;cy=[];for(var cA in cx)cy.push(cx[cA]);return cy;};_4=_3.Var$1=ct.Class({},g,_4);_4.Create$1=function(cx){return new bt.New(false,bu.New({$:2,$0:cx,$1:[]}),cx);};_4.Set=function(cx,cy){cx.Set(cy);};_5=_3.Var=ct.Class({},g,_5);_5.New=ct.Ctor(function(){g.New.call(this);},_5);_8.Map=function(cx,cy){return _8.CreateLazy(function(){return bu.Map(cx,cy());});};_8.get_Do=function(){return be.B;};_8.Get=function(cx,cy){var cz;function cA(){bu.WhenRun(cy(),function(cB){if(!cz[0]){cz[0]=true;cx(cB);}},function(){if(!cz[0])cA();});}cz=[false];cA();};_8.Bind=function(cx,cy){return _8.Join(_8.Map(cx,cy));};_8.Const=function(cx){var cy;cy=bu.New({$:0,$0:cx});return function(){return cy;};};_8.Map2=function(cx,cy,cz){return _8.CreateLazy(function(){return bu.Map2(cx,cy(),cz());});};_8.CreateLazy=function(cx){var cy;cy={c:null,o:cx};return function(){var cz,cA;cz=cy.c;return cz===null?(cz=cy.o(),cy.c=cz,(cA=cz.s,cA!=null&&cA.$==0)?cy.o=null:bu.WhenObsoleteRun(cz,function(){cy.c=null;}),cz):cz;};};_8.Join=function(cx){return _8.CreateLazy(function(){return bu.Join(cx());});};_8.TryGet=function(cx){return bu.TryGet(cx());};_8.Map2Unit=function(cx,cy){return _8.CreateLazy(function(){return bu.Map2Unit(cx(),cy());});};_8.MapSeqCachedBy=function(cx,cy,cz){var cA;cA=[new bx.New$5()];return _8.Map(function(cB){var cC,cD,cE;cC=cA[0];cD=new bx.New$5();cE=bB.mapInPlace(function(cF){var cG,cH;cG=cx(cF);cH=cC.ContainsKey(cG)?cC.get_Item(cG):cy(cF);cD.set_Item(cG,cH);return cH;},P.ofSeq(cB));cA[0]=cD;return cE;},cz);};_8.Sink=function(cx,cy){function cz(){bu.WhenRun(cy(),cx,function(){bJ.scheduler().Fork(cz);});}bJ.scheduler().Fork(cz);};_8.Map3=function(cx,cy,cz,cA){return _8.CreateLazy(function(){return bu.Map3(cx,cy(),cz(),cA());});};_8.Sequence=function(cx){return _8.CreateLazy(function(){return bu.Sequence(R.map(function(cy){return cy();},cx));});};_8.MapSeqCachedViewBy=function(cx,cy,cz){var cA;cA=[new bx.New$5()];return _8.Map(function(cB){var cC,cD,cE;cC=cA[0];cD=new bx.New$5();cE=bB.mapInPlace(function(cF){var cG,cH,cI;cG=cx(cF);cH=cC.ContainsKey(cG)?(cI=cC.get_Item(cG),(_4.Set(cI.r,cF),cI)):_8.ConvertSeqNode(function(cJ){return cy(cG,cJ);},cF);cD.set_Item(cG,cH);return cH.e;},P.ofSeq(cB));cA[0]=cD;return cE;},cz);};_8.ConvertSeqNode=function(cx,cy){var cz,cA;cz=_4.Create$1(cy);cA=cz.get_View();return{e:cx(cA),r:cz,w:cA};};_9.addResizeObserver=function(cx,cy){var cz,cA,cB,cC;try{cz=!(!a.ResizeObserver);}catch(cD){cz=false;}if(cz){cA=new a.ResizeObserver(cx);_9.set_observers(new T({$:1,$0:cA,$1:_9.observers()}));cA.observe(cy);}else{cB=_9.dimsChanged(cy);bJ.Start((cC=null,bJ.Delay(function(){return bJ.While(function(){return cy.isConnected;},bJ.Delay(function(){return bJ.Bind(bJ.Sleep(110),function(){return cB()?(cx(),bJ.Zero()):bJ.Zero();});}));})),null);}};_9.set_observers=function(cx){U.$cctor();U.observers=cx;};_9.observers=function(){U.$cctor();return U.observers;};_9.dimsChanged=function(cx){var cy;cy=[cx.getBoundingClientRect()];return function(){var cz;cz=cx.getBoundingClientRect();return bh.Equals(_9.domRect2Tuple(cy[0]),_9.domRect2Tuple(cz))?false:(cy[0]=cz,true);};};_9.domRect2Tuple=function(cx){return[cx.top,cx.left,cx.width,cx.height];};_8=_3.View=ct.Class({},null,_8);_=_3.ListModel=ct.Class({TryFindByKeyAsView:function(cx){var cy;cy=this;return function(){var cz,cA,cB;cz=(cA=null,[cy.it.TryGetValue(cx,{get:function(){return cA;},set:function(cC){cA=cC;}}),cA]);return cz[0]?cz[1]:(cB=bu.New({$:2,$0:cy.TryFindByKey(cx),$1:[]}),(cy.it.Add(cx,cB),cB));};},TryFindByKey:function(cx){var cy;cy=this;return P.tryFind(function(cz){return bh.Equals(cy.key(cz),cx);},this["var"].Get());},AppendMany:function(cx){var cy,cz;function cA(cB,cC){var cD,cE;cD=cy.key(cC);cy.ObsoleteKey(cD);cE=P.tryFindIndex(function(cF){return bh.Equals(cy.key(cF),cD);},cB);return cE==null?(cz.push(cC),cB):cy.storage.SSetAt(cE.$0,cC,cB);}cy=this;cz=[];this["var"].Set(this.storage.SAppendMany(cz,(((ct.Curried3(R.fold))(cA))(this["var"].Get()))(cx)));},Append:function(cx){var cy,cz,cA,cB;cy=this;cz=this["var"].Get();cA=this.key(cx);cB=P.tryFindIndex(function(cC){return bh.Equals(cy.key(cC),cA);},cz);cB!=null&&cB.$==1?this["var"].Set(this.storage.SSetAt(cB.$0,cx,cz)):this["var"].Set(this.storage.SAppend(cx,cz));this.ObsoleteKey(cA);},ObsoleteKey:function(cx){var cy,cz;cy=(cz=null,[this.it.TryGetValue(cx,{get:function(){return cz;},set:function(cA){cz=cA;}}),cz]);cy[0]?(bu.Obsolete(cy[1]),this.it.Remove(cx)):void 0;},MapLens:function(cx){var cy;cy=this;return _8.MapSeqCachedViewBy(cy.key,function(cz,cA){return cx(cz,cy["LensInto'"](a.id,function(cB,cC){return cC;},cz,cA));},this["var"].get_View());},"LensInto'":function(cx,cy,cz,cA){var cB,cC,cD;cB=this;cC=bI.Id();cD=new _5({Get:function(){return cx(cB.FindByKey(cz));},Set:function(cE){return cB.UpdateBy(function(cF){return{$:1,$0:cy(cF,cE)};},cz);},SetFinal:function(cE){return this.Set(cE);},Update:function(cE){return cB.UpdateBy(function(cF){return{$:1,$0:cy(cF,cE(cx(cF)))};},cz);},UpdateMaybe:function(cE){return cB.UpdateBy(function(cF){var cG;cG=cE(cx(cF));return cG==null?null:{$:1,$0:cy(cF,cG.$0)};},cz);},get_View:function(){return cA;},get_Id:function(){return cC;}});_5.New.call(cD);return cD;},FindByKey:function(cx){var cy;cy=this;return P.find(function(cz){return bh.Equals(cy.key(cz),cx);},this["var"].Get());},UpdateBy:function(cx,cy){var cz,cA,cB,cC,cD;cz=this;cA=this["var"].Get();cB=P.tryFindIndex(function(cE){return bh.Equals(cz.key(cE),cy);},cA);cB!=null&&cB.$==1?(cC=cB.$0,cD=cx(P.get(cA,cC)),cD!=null&&cD.$==1?(this["var"].Set(this.storage.SSetAt(cC,cD.$0,cA)),this.ObsoleteKey(cy)):void 0):void 0;},GetEnumerator:function(){return bo.Get(this["var"].Get());},GetEnumerator0:function(){return bo.Get0(this["var"].Get());}},g,_);_.New$1=ct.Ctor(function(cx){_.New$2.call(this,cx,[]);},_);_.New$2=ct.Ctor(function(cx,cy){var cz;cz=P.ofSeq(cy);_.New$3.call(this,cx,_4.Create$1(cz),bN.InMemory(cz));},_);_.New$3=ct.Ctor(function(cx,cy,cz){g.New.call(this);this.key=cx;this["var"]=cy;this.storage=cz;this.v=_8.Map(function(cA){return cA.slice();},this["var"].get_View());this.it=new bx.New$5();},_);$.p=function(cx){return cx.$==5?"IdentGeneric":cx.$==4?"IdentPlugIn":cx.$==3?"IdentAction":cx.$==2?"IdentDoc":cx.$==1?"IdentView":"IdentVar";};$.p$7=function(cx){return"PlgInName "+O.prettyPrint(cx.$0);};$.p$8=function(cx){return"PlgVarName "+O.prettyPrint(cx.$0);};$.p$9=function(cx){return"PlgViwName "+O.prettyPrint(cx.$0);};$.p$10=function(cx){return"PlgDocName "+O.prettyPrint(cx.$0);};$.p$6=function(cx){return cx.$==16?"PvMap "+O.prettyPrint(cx.$0):cx.$==15?"PvList "+O.printList(function(cy){return $.p$6(cy);},cx.$0):cx.$==14?"PvNone":cx.$==13?"PvObject "+O.prettyPrint(cx.$0):cx.$==12?"PvPlugIn "+ba.p$1(cx.$0):cx.$==11?"PvPlgAct "+ba.p(cx.$0):cx.$==10?"PvAction2 <fun>":cx.$==9?"PvAction1 <fun>":cx.$==8?"PvAction0 <fun>":cx.$==7?"PvDoc "+O.prettyPrint(cx.$0):cx.$==6?"PvText "+O.prettyPrint(cx.$0):cx.$==5?"PvView "+$.p$12(cx.$0):cx.$==4?"PvVar "+O.prettyPrint(cx.$0):cx.$==3?"PvActRef "+("("+$.p$7(cx.$0[0])+", "+$.p$11(cx.$0[1])+")"):cx.$==2?"PvDocRef "+("("+$.p$7(cx.$0[0])+", "+$.p$10(cx.$0[1])+")"):cx.$==1?"PvViwRef "+("("+$.p$7(cx.$0[0])+", "+$.p$9(cx.$0[1])+")"):"PvVarRef "+("("+$.p$7(cx.$0[0])+", "+$.p$8(cx.$0[1])+")");};$.p$5=function(cx){return cx.$==7?"FunDoc6 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+", "+$.p$2(cx.$4)+", "+$.p$2(cx.$5)+", "+$.p$2(cx.$6)+")":cx.$==6?"FunDoc5 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+", "+$.p$2(cx.$4)+", "+$.p$2(cx.$5)+")":cx.$==5?"FunDoc4 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+", "+$.p$2(cx.$4)+")":cx.$==4?"FunDoc3 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+")":cx.$==3?"FunDoc2 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+")":cx.$==2?"FunDoc1 (<fun>, "+$.p$2(cx.$1)+")":cx.$==1?"FunDoc0 <fun>":"JustDoc "+O.prettyPrint(cx.$0);};$.p$1=function(cx){return cx.$==6?"FunAct6 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+", "+$.p$2(cx.$4)+", "+$.p$2(cx.$5)+", "+$.p$2(cx.$6)+")":cx.$==5?"FunAct5 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+", "+$.p$2(cx.$4)+", "+$.p$2(cx.$5)+")":cx.$==4?"FunAct4 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+", "+$.p$2(cx.$4)+")":cx.$==3?"FunAct3 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+", "+$.p$2(cx.$3)+")":cx.$==2?"FunAct2 (<fun>, "+$.p$2(cx.$1)+", "+$.p$2(cx.$2)+")":cx.$==1?"FunAct1 (<fun>, "+$.p$2(cx.$1)+")":"FunAct0 <fun>";};ba.p$1=function(cx){return"{"+("plgName = "+$.p$7(cx.plgName))+"; "+("plgVars = "+O.prettyPrint(cx.plgVars))+"; "+("plgViews = "+O.prettyPrint(cx.plgViews))+"; "+("plgDocs = "+O.prettyPrint(cx.plgDocs))+"; "+("plgActions = "+O.prettyPrint(cx.plgActions))+"}";};ba.p=function(cx){return"{"+("actName = "+$.p$11(cx.actName))+"; "+("actFunction = "+$.p$1(cx.actFunction))+"; "+("actEnabled = "+$.p$13(cx.actEnabled))+"}";};$.p$12=function(cx){return"View <fun>";};$.p$11=function(cx){return"PlgActName "+O.prettyPrint(cx.$0);};$.p$2=function(cx){return"ParmDef ("+O.prettyPrint(cx.$0)+", "+$.p$3(cx.$1)+")";};$.p$13=function(cx){return"View <fun>";};$.p$3=function(cx){return cx.$==4?"ParmOptional "+$.p$4(cx.$0):cx.$==3?"ParmList "+O.printList(function(cy){return $.p$4(cy);},cx.$0):cx.$==2?"ParmMap "+O.printList(function(cy){return $.p$4(cy);},cx.$0):cx.$==1?"ParmOneOf "+O.printList(function(cy){return $.p$4(cy);},cx.$0):"ParmBasic "+$.p$4(cx.$0);};$.p$4=function(cx){return cx.$==5?"ParmObject":cx.$==4?"ParmIdent "+$.p(cx.$0):cx.$==3?"ParmAction":cx.$==2?"ParmDoc":cx.$==1?"ParmVar":"ParmText";};bb=_3.Doc=ct.Class({},g,bb);bb.TextNode=function(cx){return bb.Mk({$:5,$0:bA.CreateText(cx)},_8.Const());};bb.Concat=function(cx){var cy;cy=bB.ofSeqNonCopying(cx);return bB.TreeReduce(bb.get_Empty(),bb.Append,cy);};bb.get_Empty=function(){return bb.Mk(null,_8.Const());};bb.Element=function(cx,cy,cz){var cA,cB;cA=bk.Concat(cy);cB=bb.Concat(cz);return bQ.New(bA.CreateElement(cx),cA,cB);};bb.Run=function(cx,cy){bK.LinkElement(cx,cy.docNode);bb.RunInPlace(false,cx,cy);};bb.Mk=function(cx,cy){return new bb.New(cx,cy);};bb.EmbedView=function(cx){var cy;cy=bK.CreateEmbedNode();return bb.Mk({$:2,$0:cy},_8.Map(a.ignore,_8.Bind(function(cz){bK.UpdateEmbedNode(cy,cz.docNode);return cz.updates;},cx)));};bb.TextView=function(cx){var cy;cy=bK.CreateTextNode();return bb.Mk({$:4,$0:cy},_8.Map(function(cz){bK.UpdateTextNode(cy,cz);},cx));};bb.Append=function(cx,cy){return bb.Mk({$:0,$0:cx.docNode,$1:cy.docNode},_8.Map2Unit(cx.updates,cy.updates));};bb.ConvertBy=function(cx,cy,cz){return bb.Flatten(_8.MapSeqCachedBy(cx,cy,cz));};bb.RunAppend=function(cx,cy){var cz;cz=self.document.createTextNode("");cx.appendChild(cz);bb.RunBefore(cz,cy);};bb.Input=function(cx,cy){return bb.InputInternal("input",function(){return R.append(cx,[bi.Value(cy)]);});};bb.RunInPlace=function(cx,cy,cz){var cA;cA=bK.CreateRunState(cy,cz.docNode);_8.Sink(bW.get_UseAnimations()||bX.BatchUpdatesEnabled()?bY.StartProcessor(bK.PerformAnimatedUpdate(cx,cA,cz.docNode)):function(){bK.PerformSyncUpdate(cx,cA,cz.docNode);},cz.updates);};bb.Flatten=function(cx){return bb.EmbedView(_8.Map(bb.Concat,cx));};bb.RunBefore=function(cx,cy){var cz;cz=self.document.createTextNode("");cx.parentNode.insertBefore(cz,cx);bb.RunBetween(cz,cx,cy);};bb.InputInternal=function(cx,cy){var cz;cz=bA.CreateElement(cx);return bQ.New(cz,bk.Concat(cy(cz)),bb.get_Empty());};bb.RunBetween=function(cx,cy,cz){var cA;bK.LinkPrevElement(cy,cz.docNode);cA=bK.CreateDelimitedRunState(cx,cy,cz.docNode);_8.Sink(bW.get_UseAnimations()||bX.BatchUpdatesEnabled()?bY.StartProcessor(bK.PerformAnimatedUpdate(false,cA,cz.docNode)):function(){bK.PerformSyncUpdate(false,cA,cz.docNode);},cz.updates);};bb.New=ct.Ctor(function(cx,cy){g.New.call(this);this.docNode=cx;this.updates=cy;},bb);bd=bc.FSharpMap=ct.Class({GetEnumerator$1:function(){return bo.Get(R.map(function(cx){return{K:cx.Key,V:cx.Value};},bP.Enumerate(false,this.tree)));},Equals:function(cx){return this.get_Count()===cx.get_Count()&&R.forall2(bh.Equals,this,cx);},get_Count:function(){var cx;cx=this.tree;return cx==null?0:cx.Count;},GetHashCode:function(){return bh.Hash(P.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(cx){return R.compareWith(bh.Compare,this,cx);},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,bd);be.B={$:0};bg=bf.attr=ct.Class({},g,bg);bh.Equals=function(cx,cy){var cz,cA,cB,cC;if(cx===cy)return true;else{cz=typeof cx;if(cz=="object"){if(cx===null||cx===void 0||cy===null||cy===void 0)return false;else if("Equals"in cx)return cx.Equals(cy);else if(cx instanceof a.Array&&cy instanceof a.Array)return bh.arrayEquals(cx,cy);else if(cx instanceof a.Date&&cy instanceof a.Date)return bh.dateEquals(cx,cy);else{cA=[true];for(var cD in cx)if(function(cE){cA[0]=!cx.hasOwnProperty(cE)||cy.hasOwnProperty(cE)&&bh.Equals(cx[cE],cy[cE]);return!cA[0];}(cD))break;if(cA[0]){for(var cE in cy)if(function(cF){cA[0]=!cy.hasOwnProperty(cF)||cx.hasOwnProperty(cF);return!cA[0];}(cE))break;}return cA[0];}}else return cz=="function"&&("$Func"in cx?cx.$Func===cy.$Func&&cx.$Target===cy.$Target:"$Invokes"in cx&&"$Invokes"in cy&&bh.arrayEquals(cx.$Invokes,cy.$Invokes));}};bh.Compare=function(cx,cy){var cz,cA,cB,cC,cD,cE;if(cx===cy)return 0;else{cA=typeof cx;switch(cA=="function"?1:cA=="boolean"?2:cA=="number"?2:cA=="string"?2:cA=="object"?3:0){case 0:return typeof cy=="undefined"?0:-1;case 1:return N.FailWith("Cannot compare function values.");case 2:return cx<cy?-1:1;case 3:if(cx===null)cB=-1;else if(cy===null)cB=1;else if("CompareTo"in cx)cB=cx.CompareTo(cy);else if("CompareTo0"in cx)cB=cx.CompareTo0(cy);else if(cx instanceof a.Array&&cy instanceof a.Array)cB=bh.compareArrays(cx,cy);else if(cx instanceof a.Date&&cy instanceof a.Date)cB=bh.compareDates(cx,cy);else{cC=[0];for(var cF in cx)if(function(cG){return!cx.hasOwnProperty(cG)?false:!cy.hasOwnProperty(cG)?(cC[0]=1,true):(cC[0]=bh.Compare(cx[cG],cy[cG]),cC[0]!==0);}(cF))break;if(cC[0]===0){for(var cG in cy)if(function(cH){return!cy.hasOwnProperty(cH)?false:!cx.hasOwnProperty(cH)&&(cC[0]=-1,true);}(cG))break;}cB=cC[0];}return cB;}}};bh.arrayEquals=function(cx,cy){var cz,cA;if(P.length(cx)===P.length(cy)){cz=true;cA=0;while(cz&&cA<P.length(cx)){!bh.Equals(P.get(cx,cA),P.get(cy,cA))?cz=false:void 0;cA=cA+1;}return cz;}else return false;};bh.dateEquals=function(cx,cy){return cx.getTime()===cy.getTime();};bh.compareArrays=function(cx,cy){var cz,cA;if(P.length(cx)<P.length(cy))return -1;else if(P.length(cx)>P.length(cy))return 1;else{cz=0;cA=0;while(cz===0&&cA<P.length(cx)){cz=bh.Compare(P.get(cx,cA),P.get(cy,cA));cA=cA+1;}return cz;}};bh.compareDates=function(cx,cy){return bh.Compare(cx.getTime(),cy.getTime());};bh.Hash=function(cx){var cy;cy=typeof cx;return cy=="function"?0:cy=="boolean"?cx?1:0:cy=="number"?cx:cy=="string"?bh.hashString(cx):cy=="object"?cx==null?0:cx instanceof a.Array?bh.hashArray(cx):bh.hashObject(cx):0;};bh.hashString=function(cx){var cy,cz,cA;if(cx===null)return 0;else{cy=5381;for(cz=0,cA=cx.length-1;cz<=cA;cz++)cy=bh.hashMix(cy,cx[cz].charCodeAt());return cy;}};bh.hashArray=function(cx){var cy,cz,cA;cy=-34948909;for(cz=0,cA=P.length(cx)-1;cz<=cA;cz++)cy=bh.hashMix(cy,bh.Hash(P.get(cx,cz)));return cy;};bh.hashObject=function(cx){var cy,cz;if("GetHashCode"in cx)return cx.GetHashCode();else{cy=[0];for(var cA in cx)if(function(cB){cy[0]=bh.hashMix(bh.hashMix(cy[0],bh.hashString(cB)),bh.Hash(cx[cB]));return false;}(cA))break;return cy[0];}};bh.hashMix=function(cx,cy){return(cx<<5)+cx+cy;};bi.DynamicCustom=function(cx,cy){return bC.Dynamic(cy,cx);};bi.DynamicStyle=function(cx,cy){return bC.Dynamic(cy,function(cz){return function(cA){return bA.SetStyle(cz,cx,cA);};});};bi.DynamicPred=function(cx,cy,cz){function cA(cB,cC){return cC[0]?bA.SetAttr(cB,cx,cC[1]):bA.RemoveAttr(cB,cx);}return bC.Dynamic(_8.Map2(function(cB,cC){return[cB,cC];},cy,cz),function(cB){return function(cC){return cA(cB,cC);};});};bi.Value=function(cx){function cy(cz){return{$:1,$0:cz};}return bi.CustomValue(cx,a.id,function(cz){return cy(a.id(cz));});};bi.CustomValue=function(cx,cy,cz){return bi.CustomVar(cx,function(cA,cB){cA.value=cy(cB);},function(cA){return cz(cA.value);});};bi.Handler=function(cx,cy){return bC.Static(function(cz){cz.addEventListener(cx,function(cA){return(cy(cz))(cA);},false);});};bi.OnAfterRender=function(cx){return new bk({$:4,$0:cx});};bi.Checked=function(cx){function cy(cz,cA){return!bh.Equals(cx.Get(),cz.checked)?cx.Set(cz.checked):null;}return bk.Concat([bi.DynamicProp("checked",cx.get_View()),bi.Handler("change",function(cz){return function(cA){return cy(cz,cA);};})]);};bi.IntValue=function(cx){return bi.CustomVar(cx,function(cy,cz){var cA;cA=cz.get_Input();return cy.value!==cA?void(cy.value=cA):null;},function(cy){var cz,cA,cB;cz=cy.value;return{$:1,$0:cl.isBlank(cz)?(cy.checkValidity?cy.checkValidity():true)?new cg({$:2,$0:cz}):new cg({$:1,$0:cz}):(cA=(cB=0,[bp.TryParseInt32(cz,{get:function(){return cB;},set:function(cC){cB=cC;}}),cB]),cA[0]?new cg({$:0,$0:cA[1],$1:cz}):new cg({$:1,$0:cz}))};});};bi.IntValueUnchecked=function(cx){return bi.CustomValue(cx,a.String,function(cy){var cz;return cl.isBlank(cy)?{$:1,$0:0}:(cz=+cy,cz!==cz>>0?null:{$:1,$0:cz});});};bi.FloatValue=function(cx){return bi.CustomVar(cx,function(cy,cz){var cA;cA=cz.get_Input();return cy.value!==cA?void(cy.value=cA):null;},function(cy){var cz,cA;cz=cy.value;return{$:1,$0:cl.isBlank(cz)?(cy.checkValidity?cy.checkValidity():true)?new cg({$:2,$0:cz}):new cg({$:1,$0:cz}):(cA=+cz,a.isNaN(cA)?new cg({$:1,$0:cz}):new cg({$:0,$0:cA,$1:cz}))};});};bi.FloatValueUnchecked=function(cx){return bi.CustomValue(cx,a.String,function(cy){var cz;return cl.isBlank(cy)?{$:1,$0:0}:(cz=+cy,a.isNaN(cz)?null:{$:1,$0:cz});});};bi.Dynamic=function(cx,cy){return bC.Dynamic(cy,function(cz){return function(cA){return bA.SetAttr(cz,cx,cA);};});};bi.CustomVar=function(cx,cy,cz){function cA(cC,cD){return cx.UpdateMaybe(function(cE){var cF,cG;cF=cz(cC);return cF!=null&&cF.$==1&&(!bh.Equals(cF.$0,cE)&&(cG=[cF,cF.$0],true))?cG[0]:null;});}function cB(cC,cD){var cE,cF;cE=cz(cC);return cE!=null&&cE.$==1&&(bh.Equals(cE.$0,cD)&&(cF=cE.$0,true))?null:cy(cC,cD);}return bk.Concat([bi.Handler("change",function(cC){return function(cD){return cA(cC,cD);};}),bi.Handler("input",function(cC){return function(cD){return cA(cC,cD);};}),bi.Handler("keypress",function(cC){return function(cD){return cA(cC,cD);};}),bi.DynamicCustom(function(cC){return function(cD){return cB(cC,cD);};},cx.get_View())]);};bi.DynamicProp=function(cx,cy){return bC.Dynamic(cy,function(cz){return function(cA){cz[cx]=cA;};});};bj.Create=function(cx){return bE.New(false,cx,bj.forceLazy);};bj.forceLazy=function(){var cx;cx=this.v();this.c=true;this.v=cx;this.f=bj.cachedLazy;return cx;};bj.cachedLazy=function(){return this.v;};bk=_3.AttrProxy=ct.Class({},null,bk);bk.Concat=function(cx){var cy;cy=bB.ofSeqNonCopying(cx);return bB.TreeReduce(bC.EmptyAttr(),bk.Append,cy);};bk.Create=function(cx,cy){return bC.Static(function(cz){bA.SetAttr(cz,cx,cy);});};bk.Append=function(cx,cy){return bC.AppendTree(cx,cy);};bk.Handler=function(cx,cy){return bk.HandlerImpl(cx,cy);};bk.HandlerImpl=function(cx,cy){return bC.Static(function(cz){cz.addEventListener(cx,function(cA){return(cy(cz))(cA);},false);});};bm.html=function(){U.$cctor();return U.html;};bo.Get=function(cx){return cx instanceof a.Array?bo.ArrayEnumerator(cx):bh.Equals(typeof cx,"string")?bo.StringEnumerator(cx):cx.GetEnumerator();};bo.ArrayEnumerator=function(cx){return new bs.New(0,null,function(cy){var cz;cz=cy.s;return cz<P.length(cx)&&(cy.c=P.get(cx,cz),cy.s=cz+1,true);},void 0);};bo.StringEnumerator=function(cx){return new bs.New(0,null,function(cy){var cz;cz=cy.s;return cz<cx.length&&(cy.c=cx[cz],cy.s=cz+1,true);},void 0);};bo.Get0=function(cx){return cx instanceof a.Array?bo.ArrayEnumerator(cx):bh.Equals(typeof cx,"string")?bo.StringEnumerator(cx):"GetEnumerator0"in cx?cx.GetEnumerator0():cx.GetEnumerator();};bp.TryParseInt32=function(cx,cy){return bp.TryParse(cx,-2147483648,2147483647,cy);};bp.TryParseInt64=function(cx,cy){return bp.TryParse(cx,-9223372036854775808,9223372036854775807,cy);};br.TryParse=function(cx,cy){try{cy.set(br.Parse(cx));return true;}catch(cz){return false;}};br.Parse=function(cx){var cy,cz,cA;try{return br.ParseExact(cx,"D");}catch(cB){try{cy=br.ParseExact(cx,"B");}catch(cC){try{cz=br.ParseExact(cx,"P");}catch(cD){try{cA=br.ParseExact(cx,"N");}catch(cE){cA=br.ParseExact(cx,"X");}cz=cA;}cy=cz;}return cy;}};br.ParseExact=function(cx,cy){var cz,cA,cB,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM;function cC(cN){var cO,cP,cQ,cR;for(cO=0,cP=35;cO<=cP;cO++){cO===8||(cO===13||(cO===18||cO===23))?cN[cO]!=="-"?br.ShapeError():void 0:(cR=cN[cO],!("0"<=cR&&cR<="9"||"a"<=cR&&cR<="f")?br.ShapeError():void 0);}return cN;}cD=cy.toUpperCase();if(cD==="N"){cE=X.Trim(cx).toLowerCase();if(cE.length!==32)br.ShapeError();for(cF=0,cG=31;cF<=cG;cF++){cH=cE[cF];!("0"<=cH&&cH<="9"||"a"<=cH&&cH<="f")?br.ShapeError():void 0;}return X.Substring(cE,0,8)+"-"+X.Substring(cE,8,4)+"-"+X.Substring(cE,12,4)+"-"+X.Substring(cE,16,4)+"-"+cE.substring(20);}else if(cD==="D"){cz=X.Trim(cx).toLowerCase();cz.length!==36?br.ShapeError():void 0;return cC(cz);}else if(cD==="B"){cA=X.Trim(cx).toLowerCase();cA.length!==38||cA[0]!=="{"||cA[17]!=="}"?br.ShapeError():void 0;return cC(X.Substring(cA,1,36));}else if(cD==="P"){cB=X.Trim(cx).toLowerCase();cB.length!==38||cB[0]!=="("||cB[17]!==")"?br.ShapeError():void 0;return cC(X.Substring(cB,1,36));}else if(cD==="X"){cI=X.Trim(cx).toLowerCase();if(cI.length!==68)br.ShapeError();for(cJ=0,cK=67;cJ<=cK;cJ++){switch(cJ){case 26:case 0:if(cI[cJ]!=="{")br.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cI[cJ]!=="0")br.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cI[cJ]!=="x")br.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cI[cJ]!==",")br.ShapeError();break;case 67:case 66:if(cI[cJ]!=="{")br.ShapeError();break;default:cM=cI[cJ];!("0"<=cM&&cM<="9"||"a"<=cM&&cM<="f")?br.ShapeError():void 0;break;}}return X.Substring(cI,3,8)+"-"+X.Substring(cI,14,4)+"-"+X.Substring(cI,21,4)+"-"+X.Substring(cI,29,2)+X.Substring(cI,34,2)+"-"+X.Substring(cI,39,2)+X.Substring(cI,44,2)+X.Substring(cI,49,2)+X.Substring(cI,54,2)+X.Substring(cI,59,2)+X.Substring(cI,64,2);}else return br.FormatError();};br.ShapeError=function(){throw new ch.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};br.FormatError=function(){throw new ch.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bs=bo.T=ct.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,bs);bs.New=ct.Ctor(function(cx,cy,cz,cA){g.New.call(this);this.s=cx;this.c=cy;this.n=cz;this.d=cA;},bs);bt=_3.ConcreteVar=ct.Class({Set:function(cx){if(this.isConst)(function(cy){return cy("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cy){cr.log(cy);}));else{bu.Obsolete(this.snap);this.current=cx;this.snap=bu.New({$:2,$0:cx,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(cx){var cy;cy=cx(this.Get());cy!=null&&cy.$==1?this.Set(cy.$0):void 0;}},_5,bt);bt.New=ct.Ctor(function(cx,cy,cz){var cA;cA=this;_5.New.call(this);this.isConst=cx;this.current=cz;this.snap=cy;this.view=function(){return cA.snap;};this.id=bI.Int();},bt);bu.Map=function(cx,cy){var cz,cA;cz=cy.s;return cz!=null&&cz.$==0?bu.New({$:0,$0:cx(cz.$0)}):(cA=bu.New({$:3,$0:[],$1:[]}),(bu.When(cy,function(cB){bu.MarkDone(cA,cy,cx(cB));},cA),cA));};bu.WhenRun=function(cx,cy,cz){var cA;cA=cx.s;cA==null?cz():cA!=null&&cA.$==2?(cA.$1.push(cz),cy(cA.$0)):cA!=null&&cA.$==3?(cA.$0.push(cy),cA.$1.push(cz)):cy(cA.$0);};bu.Map2=function(cx,cy,cz){var cA,cB,cC;function cD(cE){var cF,cG,cH;if(!(cF=cC.s,cF!=null&&cF.$==0||cF!=null&&cF.$==2)){cG=bu.ValueAndForever(cy);cH=bu.ValueAndForever(cz);cG!=null&&cG.$==1?cH!=null&&cH.$==1?cG.$0[1]&&cH.$0[1]?bu.MarkForever(cC,cx(cG.$0[0],cH.$0[0])):bu.MarkReady(cC,cx(cG.$0[0],cH.$0[0])):void 0:void 0;}}cA=cy.s;cB=cz.s;return cA!=null&&cA.$==0?cB!=null&&cB.$==0?bu.New({$:0,$0:cx(cA.$0,cB.$0)}):bu.Map2Opt1(cx,cA.$0,cz):cB!=null&&cB.$==0?bu.Map2Opt2(cx,cB.$0,cy):(cC=bu.New({$:3,$0:[],$1:[]}),(bu.When(cy,cD,cC),bu.When(cz,cD,cC),cC));};bu.WhenObsoleteRun=function(cx,cy){var cz;cz=cx.s;cz==null?cy():cz!=null&&cz.$==2?cz.$1.push(cy):cz!=null&&cz.$==3?cz.$1.push(cy):void 0;};bu.When=function(cx,cy,cz){var cA;cA=cx.s;cA==null?bu.Obsolete(cz):cA!=null&&cA.$==2?(bu.EnqueueSafe(cA.$1,cz),cy(cA.$0)):cA!=null&&cA.$==3?(cA.$0.push(cy),bu.EnqueueSafe(cA.$1,cz)):cy(cA.$0);};bu.MarkDone=function(cx,cy,cz){var cA;if(cA=cy.s,cA!=null&&cA.$==0)bu.MarkForever(cx,cz);else bu.MarkReady(cx,cz);};bu.Join=function(cx){var cy;cy=bu.New({$:3,$0:[],$1:[]});bu.When(cx,function(cz){var cA;cA=cz();bu.When(cA,function(cB){var cC,cD;if((cC=cA.s,cC!=null&&cC.$==0)&&(cD=cx.s,cD!=null&&cD.$==0))bu.MarkForever(cy,cB);else bu.MarkReady(cy,cB);},cy);},cy);return cy;};bu.Map2Opt1=function(cx,cy,cz){return bu.Map(function(cA){return cx(cy,cA);},cz);};bu.Map2Opt2=function(cx,cy,cz){return bu.Map(function(cA){return cx(cA,cy);},cz);};bu.ValueAndForever=function(cx){var cy;cy=cx.s;return cy!=null&&cy.$==0?{$:1,$0:[cy.$0,true]}:cy!=null&&cy.$==2?{$:1,$0:[cy.$0,false]}:null;};bu.MarkForever=function(cx,cy){var cz,cA,cB,cC;cz=cx.s;if(cz!=null&&cz.$==3){cx.s={$:0,$0:cy};cA=cz.$0;for(cB=0,cC=P.length(cA)-1;cB<=cC;cB++)(P.get(cA,cB))(cy);}else void 0;};bu.MarkReady=function(cx,cy){var cz,cA,cB,cC;cz=cx.s;if(cz!=null&&cz.$==3){cx.s={$:2,$0:cy,$1:cz.$1};cA=cz.$0;for(cB=0,cC=P.length(cA)-1;cB<=cC;cB++)(P.get(cA,cB))(cy);}else void 0;};bu.EnqueueSafe=function(cx,cy){var cz,cA,cB,cC;cx.push(cy);if(cx.length%20===0){cz=cx.slice(0);ci.Clear(cx);for(cA=0,cB=P.length(cz)-1;cA<=cB;cA++){cC=P.get(cz,cA);typeof cC=="object"?function(cD){if(cD.s)cx.push(cD);}(cC):function(cD){cx.push(cD);}(cC);}}else void 0;};bu.TryGet=function(cx){var cy,cz;cy=cx.s;return(cy!=null&&cy.$==0?(cz=cy.$0,true):cy!=null&&cy.$==2&&(cz=cy.$0,true))?{$:1,$0:cz}:null;};bu.Map2Unit=function(cx,cy){var cz,cA,cB;function cC(){var cD,cE,cF;if(!(cD=cB.s,cD!=null&&cD.$==0||cD!=null&&cD.$==2)){cE=bu.ValueAndForever(cx);cF=bu.ValueAndForever(cy);cE!=null&&cE.$==1?cF!=null&&cF.$==1?cE.$0[1]&&cF.$0[1]?bu.MarkForever(cB,null):bu.MarkReady(cB,null):void 0:void 0;}}cz=cx.s;cA=cy.s;return cz!=null&&cz.$==0?cA!=null&&cA.$==0?bu.New({$:0,$0:null}):cy:cA!=null&&cA.$==0?cx:(cB=bu.New({$:3,$0:[],$1:[]}),(bu.When(cx,cC,cB),bu.When(cy,cC,cB),cB));};bu.Copy=function(cx){var cy,cz,cA;cy=cx.s;return cy==null?cx:cy!=null&&cy.$==2?(cz=bu.New({$:2,$0:cy.$0,$1:[]}),(bu.WhenObsolete(cx,cz),cz)):cy!=null&&cy.$==3?(cA=bu.New({$:3,$0:[],$1:[]}),(bu.When(cx,function(cB){bu.MarkDone(cA,cx,cB);},cA),cA)):cx;};bu.Map3=function(cx,cy,cz,cA){var cB,cC,cD,cE;function cF(cG){var cH,cI,cJ,cK;if(!(cH=cE.s,cH!=null&&cH.$==0||cH!=null&&cH.$==2)){cI=bu.ValueAndForever(cy);cJ=bu.ValueAndForever(cz);cK=bu.ValueAndForever(cA);cI!=null&&cI.$==1?cJ!=null&&cJ.$==1?cK!=null&&cK.$==1?cI.$0[1]&&cJ.$0[1]&&cK.$0[1]?bu.MarkForever(cE,cx(cI.$0[0],cJ.$0[0],cK.$0[0])):bu.MarkReady(cE,cx(cI.$0[0],cJ.$0[0],cK.$0[0])):void 0:void 0:void 0;}}cB=cy.s;cC=cz.s;cD=cA.s;return cB!=null&&cB.$==0?cC!=null&&cC.$==0?cD!=null&&cD.$==0?bu.New({$:0,$0:cx(cB.$0,cC.$0,cD.$0)}):bu.Map3Opt1(cx,cB.$0,cC.$0,cA):cD!=null&&cD.$==0?bu.Map3Opt2(cx,cB.$0,cD.$0,cz):bu.Map3Opt3(cx,cB.$0,cz,cA):cC!=null&&cC.$==0?cD!=null&&cD.$==0?bu.Map3Opt4(cx,cC.$0,cD.$0,cy):bu.Map3Opt5(cx,cC.$0,cy,cA):cD!=null&&cD.$==0?bu.Map3Opt6(cx,cD.$0,cy,cz):(cE=bu.New({$:3,$0:[],$1:[]}),(bu.When(cy,cF,cE),bu.When(cz,cF,cE),bu.When(cA,cF,cE),cE));};bu.Sequence=function(cx){var cy,cz,cA;function cB(cC){var cD;if(cA[0]===0){cD=P.map(function(cE){var cF;cF=cE.s;return cF!=null&&cF.$==0?cF.$0:cF!=null&&cF.$==2?cF.$0:N.FailWith("value not found by View.Sequence");},cy);P.forall(function(cE){var cF;cF=cE.s;return cF!=null&&cF.$==0;},cy)?bu.MarkForever(cz,cD):bu.MarkReady(cz,cD);}else cA[0]--;}cy=P.ofSeq(cx);return cy.length==0?bu.New({$:0,$0:[]}):(cz=bu.New({$:3,$0:[],$1:[]}),(cA=[P.length(cy)-1],(P.iter(function(cC){bu.When(cC,cB,cz);},cy),cz)));};bu.WhenObsolete=function(cx,cy){var cz;cz=cx.s;cz==null?bu.Obsolete(cy):cz!=null&&cz.$==2?bu.EnqueueSafe(cz.$1,cy):cz!=null&&cz.$==3?bu.EnqueueSafe(cz.$1,cy):void 0;};bu.Map3Opt1=function(cx,cy,cz,cA){return bu.Map(function(cB){return cx(cy,cz,cB);},cA);};bu.Map3Opt2=function(cx,cy,cz,cA){return bu.Map(function(cB){return cx(cy,cB,cz);},cA);};bu.Map3Opt3=function(cx,cy,cz,cA){return bu.Map2(function(cB,cC){return cx(cy,cB,cC);},cz,cA);};bu.Map3Opt4=function(cx,cy,cz,cA){return bu.Map(function(cB){return cx(cB,cy,cz);},cA);};bu.Map3Opt5=function(cx,cy,cz,cA){return bu.Map2(function(cB,cC){return cx(cB,cy,cC);},cz,cA);};bu.Map3Opt6=function(cx,cy,cz,cA){return bu.Map2(function(cB,cC){return cx(cB,cC,cy);},cz,cA);};bw.LoadLocalTemplates=function(cx){!bw.LocalTemplatesLoaded()?(bw.set_LocalTemplatesLoaded(true),bw.LoadNestedTemplates(self.document.body,"")):void 0;bw.LoadedTemplates().set_Item(cx,bw.LoadedTemplateFile(""));};bw.NamedTemplate=function(cx,cy,cz){var cA,cB;cA=(cB=null,[bw.LoadedTemplateFile(cx).TryGetValue(cy==null?"":cy.$0,{get:function(){return cB;},set:function(cC){cB=cC;}}),cB]);return cA[0]?bw.ChildrenTemplate(cA[1].cloneNode(true),cz):(cr.warn("Local template doesn't exist",cy),bb.get_Empty());};bw.LocalTemplatesLoaded=function(){bU.$cctor();return bU.LocalTemplatesLoaded;};bw.set_LocalTemplatesLoaded=function(cx){bU.$cctor();bU.LocalTemplatesLoaded=cx;};bw.LoadNestedTemplates=function(cx,cy){var cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;function cz(cO){var cP,cQ;if(!cA.ContainsKey(cO)){cP=(cQ=null,[cB.TryGetValue(cO,{get:function(){return cQ;},set:function(cR){cQ=cR;}}),cQ]);cP[0]?(cN.Add(cO),cB.Remove(cO),bw.PrepareTemplateStrict(cy,{$:1,$0:cO},cP[1][0],{$:1,$0:cP[1][1]},{$:1,$0:cz})):cr.warn(cN.Contains(cO)?"Encountered loop when instantiating "+cO:"Local template does not exist: "+cO);}}cA=bw.LoadedTemplateFile(cy);cB=new bx.New$5();cC=cx.querySelectorAll("[ws-template]");for(cD=0,cE=cC.length-1;cD<=cE;cD++){cF=cC[cD];cG=cF.getAttribute("ws-template").toLowerCase();cF.removeAttribute("ws-template");cB.set_Item(cG,[[cF],bw.FakeRootSingle(cF)]);}cH=cx.querySelectorAll("[ws-children-template]");for(cI=0,cJ=cH.length-1;cI<=cJ;cI++){cK=cH[cI];cL=cK.getAttribute("ws-children-template").toLowerCase();cK.removeAttribute("ws-children-template");cB.set_Item(cL,(cM=bA.ChildrenArray(cK),[cM,bw.FakeRoot(cM)]));}cN=new bV.New$3();while(cB.count>0)cz(R.head(cB.get_Keys()));};bw.LoadedTemplates=function(){bU.$cctor();return bU.LoadedTemplates;};bw.LoadedTemplateFile=function(cx){var cy,cz,cA;cy=(cz=null,[bw.LoadedTemplates().TryGetValue(cx,{get:function(){return cz;},set:function(cB){cz=cB;}}),cz]);return cy[0]?cy[1]:(cA=new bx.New$5(),(bw.LoadedTemplates().set_Item(cx,cA),cA));};bw.ChildrenTemplate=function(cx,cy){var cz,cA,cB,cC,cD;cz=bw.InlineTemplate(cx,cy);cA=cz[1];cB=cz[0];cC=cB.Els;return!bh.Equals(cC,null)&&cC.length===1&&(P.get(cC,0)instanceof _1&&(bh.Equals(P.get(cC,0).nodeType,_1.ELEMENT_NODE)&&(cD=P.get(cC,0),true)))?bQ.TreeNode(cB,cA):bb.Mk({$:6,$0:cB},cA);};bw.FakeRootSingle=function(cx){var cy,cz,cA;cx.removeAttribute("ws-template");cy=cx.getAttribute("ws-replace");cy===null?void 0:(cx.removeAttribute("ws-replace"),cz=cx.parentNode,bh.Equals(cz,null)?void 0:(cA=self.document.createElement(cx.tagName),cA.setAttribute("ws-replace",cy),cz.replaceChild(cA,cx)));return bw.FakeRoot([cx]);};bw.FakeRoot=function(cx){var cy,cz,cA;cy=self.document.createElement("div");for(cz=0,cA=cx.length-1;cz<=cA;cz++)cy.appendChild(P.get(cx,cz));return cy;};bw.PrepareTemplateStrict=function(cx,cy,cz,cA,cB){var cC,cD;function cE(cJ,cK){var cL,cM,cN,cO,cP,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$;function cQ(da){}while(true)switch(cJ){case 0:if(cK!==null){cL=cK.nextSibling;if(bh.Equals(cK.nodeType,_1.TEXT_NODE))b$.convertTextNode(cK);else if(bh.Equals(cK.nodeType,_1.ELEMENT_NODE))cG(cK);cK=cL;}else return null;break;case 1:cR=W.string(cK.nodeName,{$:1,$0:3},null).toLowerCase();cS=(cM=cR.indexOf("."),cM===-1?[cx,cR]:[W.string(cR,null,{$:1,$0:cM-1}),W.string(cR,{$:1,$0:cM+1},null)]);cT=cS[1];cU=cS[0];if(cU!==""&&!bw.LoadedTemplates().ContainsKey(cU))return b$.failNotLoaded(cT);else{if(cU===""&&cB!=null)cB.$0(cT);cV=bw.LoadedTemplates().get_Item(cU);if(!cV.ContainsKey(cT))return b$.failNotLoaded(cT);else{cW=cV.get_Item(cT);cX=cW.cloneNode(true);cY=new bV.New$3();cZ=new bx.New$5();c0=cK.attributes;for(c1=0,c2=c0.length-1;c1<=c2;c1++){c3=c0.item(c1).name.toLowerCase();cZ.set_Item(c3,(c4=c0.item(c1).nodeValue,c4===""?c3:c4.toLowerCase()));!cY.Add(c3)?cr.warn("Hole mapped twice",c3):void 0;}for(c5=0,c6=cK.childNodes.length-1;c5<=c6;c5++){c7=cK.childNodes[c5];bh.Equals(c7.nodeType,_1.ELEMENT_NODE)?!cY.Add(c7.nodeName.toLowerCase())?cr.warn("Hole filled twice",cT):void 0:void 0;}c8=cK.childNodes.length===1&&bh.Equals(cK.firstChild.nodeType,_1.TEXT_NODE);if(c8){cO=b$.fillTextHole(cX,cK.firstChild.textContent,cT);((function(da){return function(db){if(db!=null)da(db.$0);};}((cP=function(da){return function(db){return da.Add(db);};}(cY),function(da){return cQ(cP(da));})))(cO));}b$.removeHolesExcept(cX,cY);if(!c8){for(c9=0,c_=cK.childNodes.length-1;c9<=c_;c9++){c$=cK.childNodes[c9];bh.Equals(c$.nodeType,_1.ELEMENT_NODE)?c$.hasAttributes()?b$.fillInstanceAttrs(cX,c$):cF(cX,c$):void 0;}}b$.mapHoles(cX,cZ);b$.fill(cX,cK.parentNode,cK);cK.parentNode.removeChild(cK);return;}}break;}}function cF(cJ,cK){var cL,cN,cO;function cM(cP,cQ){var cR,cS,cT;if(cN==="title"&&cK.hasChildNodes()){cR=cv.parseHTML(cK.textContent);cK.removeChild(cK.firstChild);for(cS=0,cT=cR.length-1;cS<=cT;cS++)cK.appendChild(P.get(cR,cS));}else null;cG(cK);return b$.fill(cK,cP,cQ);}cN=cK.nodeName.toLowerCase();bA.IterSelector(cJ,"[ws-attr-holes]",function(cP){var cQ,cR,cS,cT,cU;cQ=X.SplitChars(cP.getAttribute("ws-attr-holes"),[" "],1);for(cR=0,cS=cQ.length-1;cR<=cS;cR++){cT=P.get(cQ,cR);cP.setAttribute(cT,(cU=new a.RegExp("\\${"+cN+"}","ig"),cP.getAttribute(cT).replace(cU,cK.textContent)));}});cO=cJ.querySelector("[ws-hole="+cN+"]");if(bh.Equals(cO,null)){cL=cJ.querySelector("[ws-replace="+cN+"]");return bh.Equals(cL,null)?null:(cM(cL.parentNode,cL),void cL.parentNode.removeChild(cL));}else{while(cO.hasChildNodes())cO.removeChild(cO.lastChild);cO.removeAttribute("ws-hole");return cM(cO,null);}}function cG(cJ){if(X.StartsWith(cJ.nodeName.toLowerCase(),"ws-"))cI(cJ);else{b$.convertAttrs(cJ);cH(cJ.firstChild);}}function cH(cJ){return cE(0,cJ);}function cI(cJ){return cE(1,cJ);}cC=cA==null?bw.FakeRoot(cz):cA.$0;cD=(cy==null?"":cy.$0).toLowerCase();bw.LoadedTemplateFile(cx).set_Item(cD,cC);P.length(cz)>0?(function(cJ){var cK,cL,cM,cN;while(true){cK=cJ.querySelector("[ws-template]");if(bh.Equals(cK,null)){cL=cJ.querySelector("[ws-children-template]");if(bh.Equals(cL,null))return null;else{cM=cL.getAttribute("ws-children-template");cL.removeAttribute("ws-children-template");bw.PrepareTemplateStrict(cx,{$:1,$0:cM},bA.ChildrenArray(cL),null,null);cJ=cJ;}}else{cN=cK.getAttribute("ws-template");(bw.PrepareSingleTemplate(cx,{$:1,$0:cN},cK))(null);cJ=cJ;}}}(cC),cH(P.get(cz,0))):void 0;};bw.InlineTemplate=function(cx,cy){var cz,cA,cB,cC,cF,cG,cH,cI,cJ,cK,cL;function cD(cM,cN){var cO,cP,cQ;cO=bC.Insert(cM,cN);cG.push(bC.Updates(cO));cH.push([cM,cO]);cP=ct.GetOptional(cO.OnAfterRender);return cP==null?null:(cQ=cP.$0,void cI.push(function(){cQ(cM);}));}function cE(cM){var cN,cO;cN=(cO=null,[cJ.TryGetValue(cM,{get:function(){return cO;},set:function(cP){cO=cP;}}),cO]);return cN[0]?cN[1].$==0?{$:1,$0:cN[1].$1}:cN[1].$==1?{$:1,$0:bb.TextNode(cN[1].$1)}:cN[1].$==2?{$:1,$0:bb.TextView(cN[1].$1)}:cN[1].$==8?{$:1,$0:bb.TextView(cN[1].$1.get_View())}:cN[1].$==9?{$:1,$0:bb.TextView(_8.Map(a.String,cN[1].$1.get_View()))}:cN[1].$==10?{$:1,$0:bb.TextView(_8.Map(function(cP){return cP.get_Input();},cN[1].$1.get_View()))}:cN[1].$==11?{$:1,$0:bb.TextView(_8.Map(a.String,cN[1].$1.get_View()))}:cN[1].$==12?{$:1,$0:bb.TextView(_8.Map(function(cP){return cP.get_Input();},cN[1].$1.get_View()))}:cN[1].$==13?{$:1,$0:bb.TextView(_8.Map(a.String,cN[1].$1.get_View()))}:(cr.warn("Content hole filled with attribute data",cM),null):null;}cF=[];cG=[];cH=[];cI=[];cJ=new bx.New$5();cK=bo.Get(cy);try{while(cK.MoveNext()){cL=cK.Current();cJ.set_Item(cL.$0,cL);}}finally{if(typeof cK=="object"&&"Dispose"in cK)cK.Dispose();}cz=bA.ChildrenArray(cx);bA.IterSelector(cx,"[ws-hole]",function(cM){var cN,cO,cP;cP=cM.getAttribute("ws-hole");cM.removeAttribute("ws-hole");while(cM.hasChildNodes())cM.removeChild(cM.lastChild);cN=cE(cP);cN!=null&&cN.$==1?(cO=cN.$0,bK.LinkElement(cM,cO.docNode),cF.push(bL.New(bC.Empty(cM),cO.docNode,null,cM,bI.Int(),null)),cG.push(cO.updates)):void 0;});bA.IterSelector(cx,"[ws-replace]",function(cM){var cN,cO,cP,cQ,cR,cS;cN=cE(cM.getAttribute("ws-replace"));cN!=null&&cN.$==1?(cO=cN.$0,cP=cM.parentNode,cQ=self.document.createTextNode(""),cP.replaceChild(cQ,cM),cR=bK.InsertBeforeDelim(cQ,cO.docNode),cS=P.tryFindIndex(function(cT){return cM===cT;},cz),cS==null?void 0:P.set(cz,cS.$0,cO.docNode),cF.push(bL.New(bC.Empty(cP),cO.docNode,{$:1,$0:[cR,cQ]},cP,bI.Int(),null)),cG.push(cO.updates)):void 0;});bA.IterSelector(cx,"[ws-attr]",function(cM){var cN,cO,cP;cN=cM.getAttribute("ws-attr");cM.removeAttribute("ws-attr");cO=(cP=null,[cJ.TryGetValue(cN,{get:function(){return cP;},set:function(cQ){cP=cQ;}}),cP]);cO[0]?cO[1].$==3?cD(cM,cO[1].$1):cr.warn("Attribute hole filled with non-attribute data",cN):void 0;});bA.IterSelector(cx,"[ws-on]",function(cM){cD(cM,bk.Concat(P.choose(function(cN){var cO,cP,cQ;cO=X.SplitChars(cN,[":"],1);cP=(cQ=null,[cJ.TryGetValue(P.get(cO,1),{get:function(){return cQ;},set:function(cR){cQ=cR;}}),cQ]);return cP[0]?cP[1].$==4?{$:1,$0:bi.Handler(P.get(cO,0),cP[1].$1)}:cP[1].$==5?{$:1,$0:bk.Handler(P.get(cO,0),cP[1].$2)}:(cr.warn("Event hole on"+P.get(cO,0)+" filled with non-event data",P.get(cO,1)),null):null;},X.SplitChars(cM.getAttribute("ws-on"),[" "],1))));cM.removeAttribute("ws-on");});bA.IterSelector(cx,"[ws-onafterrender]",function(cM){var cN,cO,cP;cN=cM.getAttribute("ws-onafterrender");cO=(cP=null,[cJ.TryGetValue(cN,{get:function(){return cP;},set:function(cQ){cP=cQ;}}),cP]);cO[0]?cO[1].$==6?(cM.removeAttribute("ws-onafterrender"),cD(cM,bi.OnAfterRender(cO[1].$1))):cO[1].$==7?(cM.removeAttribute("ws-onafterrender"),cD(cM,bi.OnAfterRender(cO[1].$1))):cr.warn("onafterrender hole filled with non-onafterrender data",cN):void 0;});bA.IterSelector(cx,"[ws-var]",function(cM){var cN,cO,cP;cN=cM.getAttribute("ws-var");cM.removeAttribute("ws-var");cO=(cP=null,[cJ.TryGetValue(cN,{get:function(){return cP;},set:function(cQ){cP=cQ;}}),cP]);cO[0]?cO[1].$==8?cD(cM,bi.Value(cO[1].$1)):cO[1].$==9?cD(cM,bi.Checked(cO[1].$1)):cO[1].$==10?cD(cM,bi.IntValue(cO[1].$1)):cO[1].$==11?cD(cM,bi.IntValueUnchecked(cO[1].$1)):cO[1].$==12?cD(cM,bi.FloatValue(cO[1].$1)):cO[1].$==13?cD(cM,bi.FloatValueUnchecked(cO[1].$1)):cr.warn("Var hole filled with non-Var data",cN):void 0;});bA.IterSelector(cx,"[ws-attr-holes]",function(cM){var cN,cO,cP,cQ;cN=new a.RegExp(bw.TextHoleRE(),"g");cO=X.SplitChars(cM.getAttribute("ws-attr-holes"),[" "],1);cM.removeAttribute("ws-attr-holes");for(cP=0,cQ=cO.length-1;cP<=cQ;cP++)(function(){var cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3;c0=P.get(cO,cP);c1=cM.getAttribute(c0);cR=null;cS=0;c2=[];while(cR=cN.exec(c1),cR!==null){c3=W.string(c1,{$:1,$0:cS},{$:1,$0:cN.lastIndex-P.get(cR,0).length-1});cS=cN.lastIndex;c2.push([c3,P.get(cR,1)]);}cU=W.string(c1,{$:1,$0:cS},null);cN.lastIndex=0;cV=P.foldBack(function(c4,c5){return(function(c6){var c7,c8;c7=c6[0];c8=c6[1];return function(c9){var c_,c$,da,db,dc;c_=c9[0];c$=c9[1];da=(db=(dc=null,[cJ.TryGetValue(c8,{get:function(){return dc;},set:function(dd){dc=dd;}}),dc]),db[0]?db[1].$==1?{$:0,$0:db[1].$1}:db[1].$==2?{$:1,$0:db[1].$1}:db[1].$==8?{$:1,$0:db[1].$1.get_View()}:db[1].$==9?{$:1,$0:_8.Map(a.String,db[1].$1.get_View())}:db[1].$==10?{$:1,$0:_8.Map(function(dd){return dd.get_Input();},db[1].$1.get_View())}:db[1].$==11?{$:1,$0:_8.Map(a.String,db[1].$1.get_View())}:db[1].$==12?{$:1,$0:_8.Map(function(dd){return dd.get_Input();},db[1].$1.get_View())}:db[1].$==13?{$:1,$0:_8.Map(a.String,db[1].$1.get_View())}:(cr.warn("Attribute value hole filled with non-text data",c8),{$:0,$0:""}):{$:0,$0:""});return da.$==1?[c7,new T({$:1,$0:c_===""?da.$0:_8.Map(function(dd){return dd+c_;},da.$0),$1:c$})]:[c7+da.$0+c_,c$];};}(c4))(c5);},c2,[cU,T.Empty]);return cD(cM,cV[1].$==1?cV[1].$1.$==1?cV[1].$1.$1.$==1?cV[1].$1.$1.$1.$==0?(cW=cV[0],bi.Dynamic(c0,_8.Map3(function(c4,c5,c6){return cW+c4+c5+c6;},cV[1].$0,cV[1].$1.$0,cV[1].$1.$1.$0))):(cX=cV[0],bi.Dynamic(c0,_8.Map(function(c4){return cX+X.concat("",c4);},_8.Sequence(cV[1])))):(cY=cV[0],bi.Dynamic(c0,_8.Map2(function(c4,c5){return cY+c4+c5;},cV[1].$0,cV[1].$1.$0))):cV[0]===""?bi.Dynamic(c0,cV[1].$0):(cZ=cV[0],bi.Dynamic(c0,_8.Map(function(c4){return cZ+c4;},cV[1].$0))):bk.Create(c0,cV[0]));}());});return[ct.DeleteEmptyFields({Els:cz,Dirty:true,Holes:cF,Attrs:cH,Render:(cA=cI.length==0?null:{$:1,$0:function(cM){P.iter(function(cN){cN(cM);},cI);}},cA?cA.$0:void 0),El:(cB=!bh.Equals(cz,null)&&cz.length===1&&(P.get(cz,0)instanceof _1&&(P.get(cz,0)instanceof a.Element&&(cC=P.get(cz,0),true)))?{$:1,$0:cC}:null,cB?cB.$0:void 0)},["Render","El"]),bB.TreeReduce(_8.Const(),_8.Map2Unit,cG)];};bw.PrepareSingleTemplate=function(cx,cy,cz){var cA,cB,cC;cA=bw.FakeRootSingle(cz);cB=[cz];cC={$:1,$0:cA};return function(cD){bw.PrepareTemplateStrict(cx,cy,cB,cC,cD);};};bw.TextHoleRE=function(){bU.$cctor();return bU.TextHoleRE;};bx=bc.Dictionary=ct.Class({TryGetValue:function(cx,cy){var cz,cA,cB;cz=this;cA=this.data[this.hash(cx)];return cA==null?false:(cB=P.tryPick(function(cC){var cD;cD=N.KeyValue(cC);return cz.equals.apply(null,[cD[0],cx])?{$:1,$0:cD[1]}:null;},cA),cB!=null&&cB.$==1&&(cy.set(cB.$0),true));},Add:function(cx,cy){this.add(cx,cy);},set_Item:function(cx,cy){this.set(cx,cy);},add:function(cx,cy){var cz,cA,cB;cz=this;cA=this.hash(cx);cB=this.data[cA];cB==null?(this.count=this.count+1,this.data[cA]=new a.Array({K:cx,V:cy})):(P.exists(function(cC){return cz.equals.apply(null,[(N.KeyValue(cC))[0],cx]);},cB)?b2.alreadyAdded():void 0,this.count=this.count+1,cB.push({K:cx,V:cy}));},Remove:function(cx){return this.remove(cx);},ContainsKey:function(cx){var cy,cz;cy=this;cz=this.data[this.hash(cx)];return cz==null?false:P.exists(function(cA){return cy.equals.apply(null,[(N.KeyValue(cA))[0],cx]);},cz);},get_Keys:function(){return new ca.New(this);},set:function(cx,cy){var cz,cA,cB,cC;cz=this;cA=this.hash(cx);cB=this.data[cA];cB==null?(this.count=this.count+1,this.data[cA]=new a.Array({K:cx,V:cy})):(cC=P.tryFindIndex(function(cD){return cz.equals.apply(null,[(N.KeyValue(cD))[0],cx]);},cB),cC==null?(this.count=this.count+1,cB.push({K:cx,V:cy})):cB[cC.$0]={K:cx,V:cy});},remove:function(cx){var cy,cz,cA,cB;cy=this;cz=this.hash(cx);cA=this.data[cz];return cA==null?false:(cB=P.filter(function(cC){return!cy.equals.apply(null,[(N.KeyValue(cC))[0],cx]);},cA),P.length(cB)<cA.length&&(this.count=this.count-1,this.data[cz]=cB,true));},get_Item:function(cx){return this.get(cx);},get:function(cx){var cy,cz;cy=this;cz=this.data[this.hash(cx)];return cz==null?b2.notPresent():P.pick(function(cA){var cB;cB=N.KeyValue(cA);return cy.equals.apply(null,[cB[0],cx])?{$:1,$0:cB[1]}:null;},cz);},GetEnumerator:function(){return bo.Get0(this);},GetEnumerator0:function(){return bo.Get0(P.concat(_2.GetFieldValues(this.data)));}},g,bx);bx.New$5=ct.Ctor(function(){bx.New$6.call(this,[],bh.Equals,bh.Hash);},bx);bx.New$6=ct.Ctor(function(cx,cy,cz){var cA,cB;g.New.call(this);this.equals=cy;this.hash=cz;this.count=0;this.data=[];cA=bo.Get(cx);try{while(cA.MoveNext()){cB=cA.Current();this.set(cB.K,cB.V);}}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}},bx);bu.Obsolete=function(cx){var cy,cz,cA,cB,cC;cz=cx.s;if(cz==null||(cz!=null&&cz.$==2?(cy=cz.$1,false):cz!=null&&cz.$==3?(cy=cz.$1,false):true))void 0;else{cx.s=null;for(cA=0,cB=P.length(cy)-1;cA<=cB;cA++){cC=P.get(cy,cA);typeof cC=="object"?function(cD){bu.Obsolete(cD);}(cC):cC();}}};bu.New=function(cx){return{s:cx};};by=bc.Pair=ct.Class({Equals:function(cx){return bh.Equals(this.Key,cx.Key);},GetHashCode:function(){return bh.Hash(this.Key);},CompareTo0:function(cx){return bh.Compare(this.Key,cx.Key);}},null,by);bz=_3.FromView=ct.Class({Set:function(cx){this.set(cx);},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(cx){var cy;cy=this;_8.Get(function(cz){var cA;cA=cx(cz);cA!=null&&cA.$==1?cy.set(cA.$0):void 0;},this.view);}},_5,bz);bz.New=ct.Ctor(function(cx,cy){var cz,cA;cz=this;_5.New.call(this);this.set=cy;this.id=bI.Int();this.current=(cA=_8.TryGet(cx),cA==null?null:cA.$0);this.view=_8.Map(function(cB){cz.current=cB;return cB;},cx);},bz);bA.CreateText=function(cx){return bA.Doc().createTextNode(cx);};bA.SetStyle=function(cx,cy,cz){bA.SetProperty(cx.style,cy,cz);};bA.SetAttr=function(cx,cy,cz){cx.setAttribute(cy,cz);};bA.RemoveAttr=function(cx,cy){cx.removeAttribute(cy);};bA.CreateElement=function(cx){return bA.Doc().createElement(cx);};bA.Doc=function(){b3.$cctor();return b3.Doc;};bA.SetProperty=function(cx,cy,cz){return cx.setProperty(cy,cz);};bA.ChildrenArray=function(cx){var cy,cz,cA;cy=[];for(cz=0,cA=cx.childNodes.length-1;cz<=cA;cz++)cy.push(cx.childNodes[cz]);return cy;};bA.IterSelector=function(cx,cy,cz){var cA,cB,cC;cA=cx.querySelectorAll(cy);for(cB=0,cC=cA.length-1;cB<=cC;cB++)cz(cA[cB]);};bA.InsertAt=function(cx,cy,cz){var cA;if(!(cz.parentNode===cx&&cy===(cA=cz.nextSibling,bh.Equals(cA,null)?null:cA)))cx.insertBefore(cz,cy);};bA.RemoveNode=function(cx,cy){if(cy.parentNode===cx)cx.removeChild(cy);};bB.ofSeqNonCopying=function(cx){var cy,cz;if(cx instanceof a.Array)return cx;else if(cx instanceof T)return P.ofList(cx);else if(cx===null)return[];else{cy=[];cz=bo.Get(cx);try{while(cz.MoveNext())cy.push(cz.Current());return cy;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}}};bB.TreeReduce=function(cx,cy,cz){var cA;function cB(cC,cD){var cE,cF;return cD<=0?cx:cD===1&&(cC>=0&&cC<cA)?P.get(cz,cC):(cF=cD/2>>0,cy(cB(cC,cF),cB(cC+cF,cD-cF)));}cA=P.length(cz);return cB(0,cA);};bB.mapInPlace=function(cx,cy){var cz,cA;for(cz=0,cA=cy.length-1;cz<=cA;cz++)cy[cz]=cx(cy[cz]);return cy;};bB.MapTreeReduce=function(cx,cy,cz,cA){var cB;function cC(cD,cE){var cF,cG;return cE<=0?cy:cE===1&&(cD>=0&&cD<cB)?cx(P.get(cA,cD)):(cG=cE/2>>0,cz(cC(cD,cG),cC(cD+cG,cE-cG)));}cB=P.length(cA);return cC(0,cB);};bC.Dynamic=function(cx,cy){return new bk({$:1,$0:new bO.New(cx,cy)});};bC.Static=function(cx){return new bk({$:3,$0:cx});};bC.AppendTree=function(cx,cy){var cz;return cx===null?cy:cy===null?cx:(cz=new bk({$:2,$0:cx,$1:cy}),(bC.SetFlags(cz,bC.Flags(cx)|bC.Flags(cy)),cz));};bC.EmptyAttr=function(){b4.$cctor();return b4.EmptyAttr;};bC.SetFlags=function(cx,cy){cx.flags=cy;};bC.Flags=function(cx){return cx!==null&&cx.hasOwnProperty("flags")?cx.flags:0;};bC.Updates=function(cx){return bB.MapTreeReduce(function(cy){return cy.NChanged();},_8.Const(),_8.Map2Unit,cx.DynNodes);};bC.Insert=function(cx,cy){var cz,cA,cB;function cC(cD){if(!(cD===null))if(cD!=null&&cD.$==1)cz.push(cD.$0);else if(cD!=null&&cD.$==2){cC(cD.$0);cC(cD.$1);}else if(cD!=null&&cD.$==3)cD.$0(cx);else if(cD!=null&&cD.$==4)cA.push(cD.$0);}cz=[];cA=[];cC(cy);cB=cz.slice(0);return b0.New(cx,bC.Flags(cy),cB,cA.length===0?null:{$:1,$0:function(cD){R.iter(function(cE){cE(cD);},cA);}});};bC.Empty=function(cx){return b0.New(cx,0,[],null);};bC.HasExitAnim=function(cx){var cy;cy=2;return(cx.DynFlags&cy)===cy;};bC.GetExitAnim=function(cx){return bC.GetAnim(cx,function(cy,cz){return cy.NGetExitAnim(cz);});};bC.HasEnterAnim=function(cx){var cy;cy=1;return(cx.DynFlags&cy)===cy;};bC.GetEnterAnim=function(cx){return bC.GetAnim(cx,function(cy,cz){return cy.NGetEnterAnim(cz);});};bC.HasChangeAnim=function(cx){var cy;cy=4;return(cx.DynFlags&cy)===cy;};bC.GetChangeAnim=function(cx){return bC.GetAnim(cx,function(cy,cz){return cy.NGetChangeAnim(cz);});};bC.GetAnim=function(cx,cy){return bW.Concat(P.map(function(cz){return cy(cz,cx.DynElem);},cx.DynNodes));};bC.Sync=function(cx,cy){P.iter(function(cz){cz.NSync(cx);},cy.DynNodes);};R.insufficient=function(){return N.FailWith("The input sequence has an insufficient number of elements.");};R.last=function(cx){var cy,cz;cy=bo.Get(cx);try{if(!cy.MoveNext())cz=R.insufficient();else{while(cy.MoveNext());cz=cy.Current();}return cz;}finally{if(typeof cy=="object"&&"Dispose"in cy)cy.Dispose();}};R.nonNegative=function(){return N.FailWith("The input must be non-negative.");};bE.New=function(cx,cy,cz){return{c:cx,v:cy,f:cz};};bF=bc.List=ct.Class({GetEnumerator:function(){return bo.Get(this);},GetEnumerator0:function(){return bo.Get0(this);}},null,bF);bG.TryParse=function(cx){var cy;cy=cw.parse(cx);return a.isNaN(cy)?null:{$:1,$0:cy};};bp.TryParse=function(cx,cy,cz,cA){var cB,cC;cB=+cx;cC=cB===cB-cB%1&&cB>=cy&&cB<=cz;cC?cA.set(cB):void 0;return cC;};bI.Int=function(){bI.set_counter(bI.counter()+1);return bI.counter();};bI.set_counter=function(cx){b6.$cctor();b6.counter=cx;};bI.counter=function(){b6.$cctor();return b6.counter;};bI.Id=function(){bI.set_counter(bI.counter()+1);return"uid"+a.String(bI.counter());};bJ.Delay=function(cx){return function(cy){try{(cx(null))(cy);}catch(cz){cy.k({$:1,$0:cz});}};};bJ.While=function(cx,cy){return cx()?bJ.Bind(cy,function(){return bJ.While(cx,cy);}):bJ.Return();};bJ.Bind=function(cx,cy){return bJ.checkCancel(function(cz){cx(bR.New(function(cA){var cB;if(cA.$==0){cB=cA.$0;bJ.scheduler().Fork(function(){try{(cy(cB))(cz);}catch(cC){cz.k({$:1,$0:cC});}});}else bJ.scheduler().Fork(function(){cz.k(cA);});},cz.ct));});};bJ.Sleep=function(cx){return function(cy){var cz,cA;cz=void 0;cA=void 0;cz=a.setTimeout(function(){cA.Dispose();bJ.scheduler().Fork(function(){cy.k({$:0,$0:null});});},cx);cA=bJ.Register(cy.ct,function(){a.clearTimeout(cz);bJ.scheduler().Fork(function(){bJ.cancel(cy);});});};};bJ.Zero=function(){bS.$cctor();return bS.Zero;};bJ.Start=function(cx,cy){var cz,cA;cz=(cA=(bJ.defCTS())[0],cy==null?cA:cy.$0);bJ.scheduler().Fork(function(){if(!cz.c)cx(bR.New(function(cB){if(cB.$==1)bJ.UncaughtAsyncError(cB.$0);},cz));});};bJ.Return=function(cx){return function(cy){cy.k({$:0,$0:cx});};};bJ.checkCancel=function(cx){return function(cy){if(cy.ct.c)bJ.cancel(cy);else cx(cy);};};bJ.Register=function(cx,cy){var cz;return cx===bJ.noneCT()?{Dispose:function(){return null;}}:(cz=cx.r.push(cy)-1,{Dispose:function(){return P.set(cx.r,cz,a.ignore);}});};bJ.cancel=function(cx){cx.k({$:2,$0:new b9.New(cx.ct)});};bJ.defCTS=function(){bS.$cctor();return bS.defCTS;};bJ.UncaughtAsyncError=function(cx){cr.log("WebSharper: Uncaught asynchronous exception",cx);};bJ.scheduler=function(){bS.$cctor();return bS.scheduler;};bJ.noneCT=function(){bS.$cctor();return bS.noneCT;};bJ.FromContinuations=function(cx){return function(cy){var cz;function cA(cB){if(cz[0])N.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cz[0]=true;bJ.scheduler().Fork(cB);}}cz=[false];cx(function(cB){cA(function(){cy.k({$:0,$0:cB});});},function(cB){cA(function(){cy.k({$:1,$0:cB});});},function(cB){cA(function(){cy.k({$:2,$0:cB});});});};};bK.LinkElement=function(cx,cy){bK.InsertDoc(cx,cy,null);};bK.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bK.UpdateEmbedNode=function(cx,cy){cx.Current=cy;cx.Dirty=true;};bK.CreateTextNode=function(){return{Text:bA.CreateText(""),Dirty:false,Value:""};};bK.UpdateTextNode=function(cx,cy){cx.Value=cy;cx.Dirty=true;};bK.InsertDoc=function(cx,cy,cz){var cA;return cy!=null&&cy.$==1?bK.InsertNode(cx,cy.$0.El,cz):cy!=null&&cy.$==2?(cA=cy.$0,(cA.Dirty=false,bK.InsertDoc(cx,cA.Current,cz))):cy==null?cz:cy!=null&&cy.$==4?bK.InsertNode(cx,cy.$0.Text,cz):cy!=null&&cy.$==5?bK.InsertNode(cx,cy.$0,cz):cy!=null&&cy.$==6?P.foldBack(function(cB,cC){return cB==null||cB.constructor===bn?bK.InsertDoc(cx,cB,cC):bK.InsertNode(cx,cB,cC);},cy.$0.Els,cz):bK.InsertDoc(cx,cy.$0,bK.InsertDoc(cx,cy.$1,cz));};bK.CreateRunState=function(cx,cy){return cc.New(cd.get_Empty(),bK.CreateElemNode(cx,bC.EmptyAttr(),cy));};bK.PerformAnimatedUpdate=function(cx,cy,cz){var cA;return bW.get_UseAnimations()?(cA=null,bJ.Delay(function(){var cB,cC,cD;cB=cd.FindAll(cz);cC=bK.ComputeChangeAnim(cy,cB);cD=bK.ComputeEnterAnim(cy,cB);return bJ.Bind(bW.Play(bW.Append(cC,bK.ComputeExitAnim(cy,cB))),function(){return bJ.Bind(bK.SyncElemNodesNextFrame(cx,cy),function(){return bJ.Bind(bW.Play(cD),function(){cy.PreviousNodes=cB;return bJ.Return(null);});});});})):bK.SyncElemNodesNextFrame(cx,cy);};bK.PerformSyncUpdate=function(cx,cy,cz){var cA;cA=cd.FindAll(cz);bK.SyncElemNode(cx,cy.Top);cy.PreviousNodes=cA;};bK.CreateElemNode=function(cx,cy,cz){var cA;bK.LinkElement(cx,cz);cA=bC.Insert(cx,cy);return bL.New(cA,cz,null,cx,bI.Int(),ct.GetOptional(cA.OnAfterRender));};bK.InsertNode=function(cx,cy,cz){bA.InsertAt(cx,cz,cy);return cy;};bK.SyncElemNodesNextFrame=function(cx,cy){function cz(cA){a.requestAnimationFrame(function(){bK.SyncElemNode(cx,cy.Top);cA();});}return bX.BatchUpdatesEnabled()?bJ.FromContinuations(function(cA,cB,cC){return cz.apply(null,[cA,cB,cC]);}):(bK.SyncElemNode(cx,cy.Top),bJ.Return(null));};bK.ComputeExitAnim=function(cx,cy){return bW.Concat(P.map(function(cz){return bC.GetExitAnim(cz.Attr);},cd.ToArray(cd.Except(cy,cd.Filter(function(cz){return bC.HasExitAnim(cz.Attr);},cx.PreviousNodes)))));};bK.ComputeEnterAnim=function(cx,cy){return bW.Concat(P.map(function(cz){return bC.GetEnterAnim(cz.Attr);},cd.ToArray(cd.Except(cx.PreviousNodes,cd.Filter(function(cz){return bC.HasEnterAnim(cz.Attr);},cy)))));};bK.ComputeChangeAnim=function(cx,cy){var cz;function cA(cB){return bC.HasChangeAnim(cB.Attr);}cz=function(cB){return cd.Filter(cA,cB);};return bW.Concat(P.map(function(cB){return bC.GetChangeAnim(cB.Attr);},cd.ToArray(cd.Intersect(cz(cx.PreviousNodes),cz(cy)))));};bK.SyncElemNode=function(cx,cy){!cx?bK.SyncElement(cy):void 0;bK.Sync(cy.Children);bK.AfterRender(cy);};bK.InsertBeforeDelim=function(cx,cy){var cz,cA;cz=cx.parentNode;cA=self.document.createTextNode("");cz.insertBefore(cA,cx);bK.LinkPrevElement(cx,cy);return cA;};bK.LinkPrevElement=function(cx,cy){bK.InsertDoc(cx.parentNode,cy,cx);};bK.CreateDelimitedRunState=function(cx,cy,cz){return cc.New(cd.get_Empty(),bK.CreateDelimitedElemNode(cx,cy,bC.EmptyAttr(),cz));};bK.SyncElement=function(cx){function cy(cz){function cA(cB){var cC,cD;return cB!=null&&cB.$==0?cA(cB.$0)||cA(cB.$1):cB!=null&&cB.$==2?(cC=cB.$0,cC.Dirty||cA(cC.Current)):cB!=null&&cB.$==6&&(cD=cB.$0,cD.Dirty||P.exists(cy,cD.Holes));}return cA(cz.Children);}bC.Sync(cx.El,cx.Attr);cy(cx)?bK.DoSyncElement(cx):void 0;};bK.Sync=function(cx){var cy,cz;if(cx!=null&&cx.$==1)bK.SyncElemNode(false,cx.$0);else if(cx!=null&&cx.$==2)bK.Sync(cx.$0.Current);else if(cx==null);else if(cx!=null&&cx.$==5);else if(cx!=null&&cx.$==4){cy=cx.$0;cy.Dirty?(cy.Text.nodeValue=cy.Value,cy.Dirty=false):void 0;}else if(cx!=null&&cx.$==6){cz=cx.$0;P.iter(function(cA){bK.SyncElemNode(false,cA);},cz.Holes);P.iter(function(cA){bC.Sync(cA[0],cA[1]);},cz.Attrs);bK.AfterRender(cz);}else{bK.Sync(cx.$0);bK.Sync(cx.$1);}};bK.AfterRender=function(cx){var cy;cy=ct.GetOptional(cx.Render);cy!=null&&cy.$==1?(cy.$0(cx.El),ct.SetOptional(cx,"Render",null)):void 0;};bK.CreateDelimitedElemNode=function(cx,cy,cz,cA){var cB,cC;cB=cx.parentNode;bK.LinkPrevElement(cy,cA);cC=bC.Insert(cB,cz);return bL.New(cC,cA,{$:1,$0:[cx,cy]},cB,bI.Int(),ct.GetOptional(cC.OnAfterRender));};bK.DoSyncElement=function(cx){var cy,cz,cA;function cB(cC,cD){var cE,cF;return cC!=null&&cC.$==1?cC.$0.El:cC!=null&&cC.$==2?(cE=cC.$0,cE.Dirty?(cE.Dirty=false,bK.InsertDoc(cy,cE.Current,cD)):cB(cE.Current,cD)):cC==null?cD:cC!=null&&cC.$==4?cC.$0.Text:cC!=null&&cC.$==5?cC.$0:cC!=null&&cC.$==6?(cF=cC.$0,(cF.Dirty?cF.Dirty=false:void 0,P.foldBack(function(cG,cH){return cG==null||cG.constructor===bn?cB(cG,cH):cG;},cF.Els,cD))):cB(cC.$0,cB(cC.$1,cD));}cy=cx.El;cp.Iter((cz=cx.El,function(cC){bA.RemoveNode(cz,cC);}),cp.Except(cp.DocChildren(cx),cp.Children(cx.El,ct.GetOptional(cx.Delimiters))));cB(cx.Children,(cA=ct.GetOptional(cx.Delimiters),cA!=null&&cA.$==1?cA.$0[1]:null));};bL=_3.DocElemNode=ct.Class({Equals:function(cx){return this.ElKey===cx.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bL);bL.New=function(cx,cy,cz,cA,cB,cC){var cD;return new bL((cD={Attr:cx,Children:cy,El:cA,ElKey:cB},(ct.SetOptional(cD,"Delimiters",cz),ct.SetOptional(cD,"Render",cC),cD)));};bN.InMemory=function(cx){return new b1.New(cx);};bO=_3.DynamicAttrNode=ct.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cx){return bW.get_Empty();},NGetEnterAnim:function(cx){return bW.get_Empty();},NGetChangeAnim:function(cx){return bW.get_Empty();},NSync:function(cx){if(this.dirty){(this.push(cx))(this.value);this.dirty=false;}}},g,bO);bO.New=ct.Ctor(function(cx,cy){var cz;cz=this;g.New.call(this);this.push=cy;this.value=void 0;this.dirty=false;this.updates=_8.Map(function(cA){cz.value=cA;cz.dirty=true;},cx);},bO);bP.Enumerate=function(cx,cy){function cz(cA,cB){var cC;while(true)if(cA==null)return cB.$==1?{$:1,$0:[cB.$0[0],[cB.$0[1],cB.$1]]}:null;else if(cx){cC=cA;cA=cC.Right;cB=new T({$:1,$0:[cC.Node,cC.Left],$1:cB});}else{cC=cA;cA=cC.Left;cB=new T({$:1,$0:[cC.Node,cC.Right],$1:cB});}}return R.unfold(function(cA){return cz(cA[0],cA[1]);},[cy,T.Empty]);};bQ=_3.Elt=ct.Class({},bb,bQ);bQ.New=function(cx,cy,cz){var cA,cB;cA=bK.CreateElemNode(cx,cy,cz.docNode);cB=b5.Create(cz.updates);return new bQ.New$1({$:1,$0:cA},_8.Map2Unit(bC.Updates(cA.Attr),cB.v),cx,cB);};bQ.TreeNode=function(cx,cy){var cz,cA;function cB(cC){return cC[1];}cz=b5.Create(cy);return new bQ.New$1({$:6,$0:cx},_8.Map2Unit((cA=P.map(function(cC){return bC.Updates(cB(cC));},cx.Attrs),bB.TreeReduce(_8.Const(),_8.Map2Unit,cA)),cz.v),P.get(cx.Els,0),cz);};bQ.New$1=ct.Ctor(function(cx,cy,cz,cA){bb.New.call(this,cx,cy);this.docNode$1=cx;this.updates$1=cy;this.elt=cz;this.rvUpdates=cA;},bQ);bR.New=function(cx,cy){return{k:cx,ct:cy};};bS.$cctor=function(){bS.$cctor=a.ignore;bS.noneCT=bT.New(false,[]);bS.scheduler=new b7.New();bS.defCTS=[new b_.New()];bS.Zero=bJ.Return();bS.GetCT=function(cx){cx.k({$:0,$0:cx.ct});};};bT.New=function(cx,cy){return{c:cx,r:cy};};bU.$cctor=function(){bU.$cctor=a.ignore;bU.LoadedTemplates=new bx.New$5();bU.LocalTemplatesLoaded=false;bU.TextHoleRE="\\${([^}]+)}";};bV=bc.HashSet=ct.Class({Add:function(cx){return this.add(cx);},Contains:function(cx){var cy;cy=this.data[this.hash(cx)];return cy==null?false:this.arrContains(cx,cy);},add:function(cx){var cy,cz;cy=this.hash(cx);cz=this.data[cy];return cz==null?(this.data[cy]=[cx],this.count=this.count+1,true):this.arrContains(cx,cz)?false:(cz.push(cx),this.count=this.count+1,true);},arrContains:function(cx,cy){var cz,cA,cB,cC;cz=true;cA=0;cC=cy.length;while(cz&&cA<cC)if(this.equals.apply(null,[cy[cA],cx]))cz=false;else cA=cA+1;return!cz;},ExceptWith:function(cx){var cy;cy=bo.Get(cx);try{while(cy.MoveNext())this.Remove(cy.Current());}finally{if(typeof cy=="object"&&"Dispose"in cy)cy.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cx){var cy,cz,cA,cB;cy=0;cz=co.concat(this.data);for(cA=0,cB=cz.length-1;cA<=cB;cA++)P.set(cx,cA,cz[cA]);},IntersectWith:function(cx){var cy,cz,cA,cB,cC;cy=new bV.New$4(cx,this.equals,this.hash);cz=co.concat(this.data);for(cA=0,cB=cz.length-1;cA<=cB;cA++){cC=cz[cA];!cy.Contains(cC)?this.Remove(cC):void 0;}},Remove:function(cx){var cy;cy=this.data[this.hash(cx)];return cy==null?false:this.arrRemove(cx,cy)&&(this.count=this.count-1,true);},arrRemove:function(cx,cy){var cz,cA,cB,cC;cz=true;cA=0;cC=cy.length;while(cz&&cA<cC)if(this.equals.apply(null,[cy[cA],cx])){cy.splice.apply(cy,[cA,1]);cz=false;}else cA=cA+1;return!cz;},GetEnumerator:function(){return bo.Get(co.concat(this.data));},GetEnumerator0:function(){return bo.Get(co.concat(this.data));}},g,bV);bV.New$3=ct.Ctor(function(){bV.New$4.call(this,[],bh.Equals,bh.Hash);},bV);bV.New$4=ct.Ctor(function(cx,cy,cz){var cA;g.New.call(this);this.equals=cy;this.hash=cz;this.data=[];this.count=0;cA=bo.Get(cx);try{while(cA.MoveNext())this.add(cA.Current());}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}},bV);bV.New$2=ct.Ctor(function(cx){bV.New$4.call(this,cx,bh.Equals,bh.Hash);},bV);bW.get_UseAnimations=function(){return ce.UseAnimations();};bW.Play=function(cx){var cy;cy=null;return bJ.Delay(function(){return bJ.Bind(bW.Run(a.ignore,ce.Actions(cx)),function(){ce.Finalize(cx);return bJ.Return(null);});});};bW.Append=function(cx,cy){return{$:0,$0:ck.Append(cx.$0,cy.$0)};};bW.Run=function(cx,cy){var cz;function cA(cB){function cC(cD,cE){var cF;cF=cE-cD;cy.Compute(cF);cx();return cF<=cz?void a.requestAnimationFrame(function(cG){cC(cD,cG);}):cB();}a.requestAnimationFrame(function(cD){cC(cD,cD);});}cz=cy.Duration;return cz===0?bJ.Zero():bJ.FromContinuations(function(cB,cC,cD){return cA.apply(null,[cB,cC,cD]);});};bW.Concat=function(cx){return{$:0,$0:ck.Concat(R.map(ce.List,cx))};};bW.get_Empty=function(){return{$:0,$0:ck.Empty()};};bX.BatchUpdatesEnabled=function(){cf.$cctor();return cf.BatchUpdatesEnabled;};bY.StartProcessor=function(cx){var cy;function cz(){var cA;cA=null;return bJ.Delay(function(){return bJ.Bind(cx,function(){var cB;cB=cy[0];return cB===1?(cy[0]=0,bJ.Zero()):cB===2?(cy[0]=1,cz()):bJ.Zero();});});}cy=[0];return function(){var cA;cA=cy[0];cA===0?(cy[0]=1,bJ.Start(cz(),null)):cA===1?cy[0]=2:void 0;};};b0.New=function(cx,cy,cz,cA){var cB;cB={DynElem:cx,DynFlags:cy,DynNodes:cz};ct.SetOptional(cB,"OnAfterRender",cA);return cB;};b1=bN.ArrayStorage=ct.Class({SAppendMany:function(cx,cy){var cz;cz=bB.ofSeqNonCopying(cx);cy.push.apply(cy,cz);return cy;},SSetAt:function(cx,cy,cz){P.set(cz,cx,cy);return cz;},SAppend:function(cx,cy){cy.push(cx);return cy;}},g,b1);b1.New=ct.Ctor(function(cx){g.New.call(this);this.init=cx;},b1);b2.alreadyAdded=function(){return N.FailWith("An item with the same key has already been added.");};b2.notPresent=function(){return N.FailWith("The given key was not present in the dictionary.");};b3.$cctor=function(){b3.$cctor=a.ignore;b3.Doc=self.document;};b4.$cctor=function(){b4.$cctor=a.ignore;b4.EmptyAttr=null;};b5=_3.Updates=ct.Class({},null,b5);b5.Create=function(cx){var cy;cy=null;cy=b5.New(cx,null,function(){var cz;cz=cy.s;return cz===null?(cz=bu.Copy(cy.c()),cy.s=cz,bu.WhenObsoleteRun(cz,function(){cy.s=null;}),cz):cz;});return cy;};b5.New=function(cx,cy,cz){return new b5({c:cx,s:cy,v:cz});};b6.$cctor=function(){b6.$cctor=a.ignore;b6.counter=0;};b7=bJ.Scheduler=ct.Class({Fork:function(cx){var cy;cy=this;this.robin.push(cx);this.idle?(this.idle=false,a.setTimeout(function(){cy.tick();},0)):void 0;},tick:function(){var cx,cy,cz;cy=this;cz=cw.now();cx=true;while(cx)if(this.robin.length===0){this.idle=true;cx=false;}else{(this.robin.shift())();cw.now()-cz>40?(a.setTimeout(function(){cy.tick();},0),cx=false):void 0;}}},g,b7);b7.New=ct.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},b7);b9=f.OperationCanceledException=ct.Class({},b8,b9);b9.New=ct.Ctor(function(cx){b9.New$1.call(this,"The operation was canceled.",null,cx);},b9);b9.New$1=ct.Ctor(function(cx,cy,cz){this.message=cx;this.inner=cy;bn.setPrototypeOf(this,b9.prototype);this.ct=cz;},b9);b_=f.CancellationTokenSource=ct.Class({},g,b_);b_.New=ct.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},b_);b$.convertTextNode=function(cx){var cy,cz,cA,cB,cC,cD;cy=null;cz=0;cB=cx.textContent;cC=new a.RegExp(bw.TextHoleRE(),"g");while(cy=cC.exec(cB),cy!==null){cx.parentNode.insertBefore(self.document.createTextNode(W.string(cB,{$:1,$0:cz},{$:1,$0:cC.lastIndex-P.get(cy,0).length-1})),cx);cz=cC.lastIndex;cD=self.document.createElement("span");cD.setAttribute("ws-replace",P.get(cy,1).toLowerCase());cx.parentNode.insertBefore(cD,cx);}cC.lastIndex=0;cx.textContent=W.string(cB,{$:1,$0:cz},null);};b$.failNotLoaded=function(cx){cr.warn("Instantiating non-loaded template",cx);};b$.fillTextHole=function(cx,cy,cz){var cA;cA=cx.querySelector("[ws-replace]");return bh.Equals(cA,null)?(cr.warn("Filling non-existent text hole",cz),null):(cA.parentNode.replaceChild(new a.Text(cy),cA),{$:1,$0:cA.getAttribute("ws-replace")});};b$.removeHolesExcept=function(cx,cy){function cz(cA){bA.IterSelector(cx,"["+cA+"]",function(cB){if(!cy.Contains(cB.getAttribute(cA)))cB.removeAttribute(cA);});}cz("ws-attr");cz("ws-onafterrender");cz("ws-var");bA.IterSelector(cx,"[ws-hole]",function(cA){if(!cy.Contains(cA.getAttribute("ws-hole"))){cA.removeAttribute("ws-hole");while(cA.hasChildNodes())cA.removeChild(cA.lastChild);}});bA.IterSelector(cx,"[ws-replace]",function(cA){if(!cy.Contains(cA.getAttribute("ws-replace")))cA.parentNode.removeChild(cA);});bA.IterSelector(cx,"[ws-on]",function(cA){cA.setAttribute("ws-on",X.concat(" ",P.filter(function(cB){return cy.Contains(P.get(X.SplitChars(cB,[":"],1),1));},X.SplitChars(cA.getAttribute("ws-on"),[" "],1))));});bA.IterSelector(cx,"[ws-attr-holes]",function(cA){var cB,cC,cD,cE,cF;cB=X.SplitChars(cA.getAttribute("ws-attr-holes"),[" "],1);for(cC=0,cD=cB.length-1;cC<=cD;cC++){cE=P.get(cB,cC);cA.setAttribute(cE,(cF=new a.RegExp(bw.TextHoleRE(),"g"),cA.getAttribute(cE).replace(cF,function(cG,cH){return cy.Contains(cH)?cG:"";})));}});};b$.fillInstanceAttrs=function(cx,cy){var cz,cA,cB,cC,cD;b$.convertAttrs(cy);cz=cy.nodeName.toLowerCase();cA=cx.querySelector("[ws-attr="+cz+"]");if(bh.Equals(cA,null))cr.warn("Filling non-existent attr hole",cz);else{cA.removeAttribute("ws-attr");for(cB=0,cC=cy.attributes.length-1;cB<=cC;cB++){cD=cy.attributes.item(cB);cD.name==="class"&&cA.hasAttribute("class")?cA.setAttribute("class",cA.getAttribute("class")+" "+cD.nodeValue):cA.setAttribute(cD.name,cD.nodeValue);}}};b$.mapHoles=function(cx,cy){function cz(cA){bA.IterSelector(cx,"["+cA+"]",function(cB){var cC,cD;cC=(cD=null,[cy.TryGetValue(cB.getAttribute(cA).toLowerCase(),{get:function(){return cD;},set:function(cE){cD=cE;}}),cD]);cC[0]?cB.setAttribute(cA,cC[1]):void 0;});}cz("ws-hole");cz("ws-replace");cz("ws-attr");cz("ws-onafterrender");cz("ws-var");bA.IterSelector(cx,"[ws-on]",function(cA){cA.setAttribute("ws-on",X.concat(" ",P.map(function(cB){var cC,cD,cE;cC=X.SplitChars(cB,[":"],1);cD=(cE=null,[cy.TryGetValue(P.get(cC,1),{get:function(){return cE;},set:function(cF){cE=cF;}}),cE]);return cD[0]?P.get(cC,0)+":"+cD[1]:cB;},X.SplitChars(cA.getAttribute("ws-on"),[" "],1))));});bA.IterSelector(cx,"[ws-attr-holes]",function(cA){var cB,cC,cD;cB=X.SplitChars(cA.getAttribute("ws-attr-holes"),[" "],1);for(cC=0,cD=cB.length-1;cC<=cD;cC++)(function(){var cE;function cF(cG,cH){var cI;cI=N.KeyValue(cH);return cG.replace(new a.RegExp("\\${"+cI[0]+"}","ig"),"${"+cI[1]+"}");}cE=P.get(cB,cC);return cA.setAttribute(cE,(((ct.Curried3(R.fold))(cF))(cA.getAttribute(cE)))(cy));}());});};b$.fill=function(cx,cy,cz){while(true)if(cx.hasChildNodes())cz=cy.insertBefore(cx.lastChild,cz);else return null;};b$.convertAttrs=function(cx){var cz,cA,cB,cC,cD,cE,cF,cG;function cy(cH){var cI;cI=cx.getAttribute(cH);cI===null?void 0:cx.setAttribute(cH,cI.toLowerCase());}cz=cx.attributes;cA=[];cB=[];cC=[];for(cD=0,cE=cz.length-1;cD<=cE;cD++){cF=cz.item(cD);X.StartsWith(cF.nodeName,"ws-on")&&cF.nodeName!=="ws-onafterrender"&&cF.nodeName!=="ws-on"?(cA.push(cF.nodeName),cB.push(W.string(cF.nodeName,{$:1,$0:"ws-on".length},null)+":"+cF.nodeValue.toLowerCase())):!X.StartsWith(cF.nodeName,"ws-")&&(new a.RegExp(bw.TextHoleRE())).test(cF.nodeValue)?(cF.nodeValue=(cG=new a.RegExp(bw.TextHoleRE(),"g"),cF.nodeValue.replace(cG,function(cH,cI){return"${"+cI.toLowerCase()+"}";})),cC.push(cF.nodeName)):void 0;}!(cB.length==0)?cx.setAttribute("ws-on",X.concat(" ",cB)):void 0;!(cC.length==0)?cx.setAttribute("ws-attr-holes",X.concat(" ",cC)):void 0;cy("ws-hole");cy("ws-replace");cy("ws-attr");cy("ws-onafterrender");cy("ws-var");P.iter(function(cH){cx.removeAttribute(cH);},cA);};ca=bc.KeyCollection=ct.Class({GetEnumerator$1:function(){return bo.Get(R.map(function(cx){return cx.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,ca);ca.New=ct.Ctor(function(cx){g.New.call(this);this.d=cx;},ca);cc.New=function(cx,cy){return{PreviousNodes:cx,Top:cy};};cd.get_Empty=function(){return{$:0,$0:new bV.New$3()};};cd.FindAll=function(cx){var cy;function cz(cB){if(cB!=null&&cB.$==0){cz(cB.$0);cz(cB.$1);}else if(cB!=null&&cB.$==1)cA(cB.$0);else if(cB!=null&&cB.$==2)cz(cB.$0.Current);else if(cB!=null&&cB.$==6)P.iter(cA,cB.$0.Holes);}function cA(cB){cy.push(cB);cz(cB.Children);}cy=[];cz(cx);return{$:0,$0:new bV.New$2(cy)};};cd.Filter=function(cx,cy){return{$:0,$0:cn.Filter(cx,cy.$0)};};cd.Except=function(cx,cy){return{$:0,$0:cn.Except(cx.$0,cy.$0)};};cd.ToArray=function(cx){return cn.ToArray(cx.$0);};cd.Intersect=function(cx,cy){return{$:0,$0:cn.Intersect(cx.$0,cy.$0)};};ce.UseAnimations=function(){cj.$cctor();return cj.UseAnimations;};ce.Actions=function(cx){return ce.ConcatActions(P.choose(function(cy){return cy.$==1?{$:1,$0:cy.$0}:null;},ck.ToArray(cx.$0)));};ce.Finalize=function(cx){P.iter(function(cy){if(cy.$==0)cy.$0();},ck.ToArray(cx.$0));};ce.ConcatActions=function(cx){var cy,cz,cA,cB;cy=bB.ofSeqNonCopying(cx);cz=P.length(cy);return cz===0?ce.Const():cz===1?P.get(cy,0):(cA=R.max(R.map(function(cC){return cC.Duration;},cy)),(cB=P.map(function(cC){return ce.Prolong(cA,cC);},cy),ce.Def(cA,function(cC){P.iter(function(cD){cD.Compute(cC);},cB);})));};ce.List=function(cx){return cx.$0;};ce.Const=function(cx){return ce.Def(0,function(){return cx;});};ce.Def=function(cx,cy){return{Compute:cy,Duration:cx};};ce.Prolong=function(cx,cy){var cz,cA,cB;cz=cy.Compute;cA=cy.Duration;cB=bj.Create(function(){return cy.Compute(cy.Duration);});return{Compute:function(cC){return cC>=cA?cB.f():cz(cC);},Duration:cx};};cf.$cctor=function(){cf.$cctor=a.ignore;cf.BatchUpdatesEnabled=true;};cg=_3.CheckedInput=ct.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cg);ch=f.FormatException=ct.Class({},b8,ch);ch.New$1=ct.Ctor(function(cx){this.message=cx;bn.setPrototypeOf(this,ch.prototype);},ch);ci.Clear=function(cx){cx.splice(0,P.length(cx));};cj.$cctor=function(){cj.$cctor=a.ignore;cj.CubicInOut=cm.Custom(function(cx){var cy;cy=cx*cx;return 3*cy-2*(cy*cx);});cj.UseAnimations=true;};ck.Append=function(cx,cy){return cx.$==0?cy:cy.$==0?cx:{$:2,$0:cx,$1:cy};};ck.ToArray=function(cx){var cy;function cz(cA){if(cA.$==1)cy.push(cA.$0);else if(cA.$==2){cz(cA.$0);cz(cA.$1);}else if(cA.$==3)P.iter(function(cB){cy.push(cB);},cA.$0);}cy=[];cz(cx);return cy.slice(0);};ck.Concat=function(cx){var cy;cy=bB.ofSeqNonCopying(cx);return bB.TreeReduce(ck.Empty(),ck.Append,cy);};ck.Empty=function(){cq.$cctor();return cq.Empty;};cl.isBlank=function(cx){return X.forall(V.IsWhiteSpace,cx);};cm=_3.Easing=ct.Class({},g,cm);cm.Custom=function(cx){return new cm.New(cx);};cm.New=ct.Ctor(function(cx){g.New.call(this);this.transformTime=cx;},cm);cn.Filter=function(cx,cy){return new bV.New$2(P.filter(cx,cn.ToArray(cy)));};cn.Except=function(cx,cy){var cz;cz=new bV.New$2(cn.ToArray(cy));cz.ExceptWith(cn.ToArray(cx));return cz;};cn.ToArray=function(cx){var cy;cy=P.create(cx.get_Count(),void 0);cx.CopyTo(cy);return cy;};cn.Intersect=function(cx,cy){var cz;cz=new bV.New$2(cn.ToArray(cx));cz.IntersectWith(cn.ToArray(cy));return cz;};co.concat=function(cx){var cy,cz;cy=[];for(var cA in cx)cy.push.apply(cy,cx[cA]);return cy;};cp.Children=function(cx,cy){var cz,cA,cB;if(cy!=null&&cy.$==1){cB=[];cz=cy.$0[0].nextSibling;while(cz!==cy.$0[1]){cB.push(cz);cz=cz.nextSibling;}return{$:0,$0:cB};}else return{$:0,$0:P.init(cx.childNodes.length,(cA=cx.childNodes,function(cC){return cA[cC];}))};};cp.Except=function(cx,cy){var cz;cz=cx.$0;return{$:0,$0:P.filter(function(cA){return P.forall(function(cB){return!(cA===cB);},cz);},cy.$0)};};cp.Iter=function(cx,cy){P.iter(cx,cy.$0);};cp.DocChildren=function(cx){var cy;function cz(cA){if(cA!=null&&cA.$==2)cz(cA.$0.Current);else if(cA!=null&&cA.$==1)cy.push(cA.$0.El);else if(cA==null);else if(cA!=null&&cA.$==5)cy.push(cA.$0);else if(cA!=null&&cA.$==4)cy.push(cA.$0.Text);else if(cA!=null&&cA.$==6)P.iter(function(cB){if(cB==null||cB.constructor===bn)cz(cB);else cy.push(cB);},cA.$0.Els);else{cz(cA.$0);cz(cA.$1);}}cy=[];cz(cx.Children);return{$:0,$0:bB.ofSeqNonCopying(cy)};};cq.$cctor=function(){cq.$cctor=a.ignore;cq.Empty={$:0};};ct.OnLoad(function(){K.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN;a=self;b=a.FsRoot=a.FsRoot||{};c=b.LibraryJS=b.LibraryJS||{};d=c.Monaco=c.Monaco||{};e=d.Position=d.Position||{};f=d.Range=d.Range||{};g=d.Location=d.Location||{};h=d.MarkDownString=d.MarkDownString||{};i=d.MarkerData=d.MarkerData||{};j=d.CompletionItem=d.CompletionItem||{};k=d.Hover=d.Hover||{};l=a.WebSharper=a.WebSharper||{};m=l.Obj=l.Obj||{};n=d.Editor=d.Editor||{};o=d.MonacoConfig=d.MonacoConfig||{};p=c.MonacoGenAdapter=c.MonacoGenAdapter||{};q=p.MonacoRT=p.MonacoRT||{};r=p.CompletionItemProvider=p.CompletionItemProvider||{};s=p.HoverProvider=p.HoverProvider||{};t=p.DefinitionProvider=p.DefinitionProvider||{};u=b.TestingJS=b.TestingJS||{};v=u.StartAppFramework=u.StartAppFramework||{};w=u.Util=u.Util||{};x=u.AF=u.AF||{};y=x.PlugInBuilder=x.PlugInBuilder||{};z=x.ListModelData=x.ListModelData||{};A=u.LayoutEngine=u.LayoutEngine||{};B=u.ListModel=u.ListModel||{};C=u.LM=u.LM||{};D=u.LMX=u.LMX||{};E=u.SnippetTemplates=u.SnippetTemplates||{};F=u.NewLY=u.NewLY||{};G=F.Fun=F.Fun||{};H=F.P=F.P||{};I=F.Val=F.Val||{};J=F.Extract0=F.Extract0||{};K=u.DragDrop=u.DragDrop||{};L=K.DragInfo=K.DragInfo||{};M=u.SnippetsUI=u.SnippetsUI||{};N=M.SnippetHierData=M.SnippetHierData||{};O=M.SaveLoad=M.SaveLoad||{};P=l.Numeric=l.Numeric||{};Q=l.UI=l.UI||{};R=Q.Var=Q.Var||{};S=Q.View=Q.View||{};T=l.Operators=l.Operators||{};U=l.Unchecked=l.Unchecked||{};V=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};W=a.EventTarget;X=c.ResizeObserver=c.ResizeObserver||{};Y=b.Library=b.Library||{};Z=Y.Monads=Y.Monads||{};_0=Z.Option=Z.Option||{};_1=c.GenEditor=c.GenEditor||{};_2=Q.Var$1=Q.Var$1||{};_3=l.Option=l.Option||{};_4=_1.Position=_1.Position||{};_5=Z.AsyncResultMAutoOpen=Z.AsyncResultMAutoOpen||{};_6=Z.AsyncResultM=Z.AsyncResultM||{};_7=_6.AsyncResultMBuilder=_6.AsyncResultMBuilder||{};_8=l.Arrays=l.Arrays||{};_9=c.PromiseM=c.PromiseM||{};_=_1.GenEditor=_1.GenEditor||{};$=l.Seq=l.Seq||{};ba=_1.GenEditorHook=_1.GenEditorHook||{};bb=Q.HtmlModule=Q.HtmlModule||{};bc=bb.attr=bb.attr||{};bd=Y.ParseO=Y.ParseO||{};be=l.Utils=l.Utils||{};bf=Y.GuidId=Y.GuidId||{};bg=c.AppFramework=c.AppFramework||{};bh=bg.PlugIn=bg.PlugIn||{};bi=Q.ListModel=Q.ListModel||{};bj=l.Lazy=l.Lazy||{};bk=c.LayoutEngineModule=c.LayoutEngineModule||{};bl=bg.PlugInVar=bg.PlugInVar||{};bm=bg.PlugInView=bg.PlugInView||{};bn=bg.PlugInDoc=bg.PlugInDoc||{};bo=bg.PlugInAction=bg.PlugInAction||{};bp=bg.PlugInQuery=bg.PlugInQuery||{};bq=Q.Doc=Q.Doc||{};br=c.View=c.View||{};bs=c.LayoutEngine=c.LayoutEngine||{};bt=Q.ViewBuilder=Q.ViewBuilder||{};bu=l.List=l.List||{};bv=bu.T=bu.T||{};bw=a.System=a.System||{};bx=bw.Guid=bw.Guid||{};by=Z.Depend=Z.Depend||{};bz=by.Operators=by.Operators||{};bA=Q.AttrModule=Q.AttrModule||{};bB=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};bC=a.testing_Templates=a.testing_Templates||{};bD=a.Node;bE=Q.AttrProxy=Q.AttrProxy||{};bF=Y.String=Y.String||{};bG=by.DependBuilder=by.DependBuilder||{};bH=l.Slice=l.Slice||{};bI=Y.UoM=Y.UoM||{};bJ=bI.UoM=bI.UoM||{};bK=l.Collections=l.Collections||{};bL=bK.Dictionary=bK.Dictionary||{};bM=bK.Set=bK.Set||{};bN=Y.Snippet=Y.Snippet||{};bO=Q.Templating=Q.Templating||{};bP=bO.Runtime=bO.Runtime||{};bQ=bP.Server=bP.Server||{};bR=bQ.TemplateInstance=bQ.TemplateInstance||{};bS=bQ.ProviderBuilder=bQ.ProviderBuilder||{};bT=bQ.Handler=bQ.Handler||{};bU=a.FileReader;bV=l.JavaScript=l.JavaScript||{};bW=bV.Pervasives=bV.Pervasives||{};bX=c.Serializer=c.Serializer||{};bY=Y.SnippetSerialize=Y.SnippetSerialize||{};bZ=bY.Model=bY.Model||{};b0=bV.JS=bV.JS||{};b1=c.AppFrameworkTemplate=c.AppFrameworkTemplate||{};b2=Q.Snap=Q.Snap||{};b3=Z.Result=Z.Result||{};b4=b3.Builder=b3.Builder||{};b5=b3.BuilderP=b3.BuilderP||{};b6=Z.ResultM=Z.ResultM||{};b7=b6.Builder=b6.Builder||{};b8=l.Strings=l.Strings||{};b9=Y.Serializer=Y.Serializer||{};b_=b9.JsonIntermediate=b9.JsonIntermediate||{};b$=Y.SnippetModule=Y.SnippetModule||{};ca=a.WindowOrWorkerGlobalScope;cb=bg.PlugInBuilder=bg.PlugInBuilder||{};cc=l.Concurrency=l.Concurrency||{};cd=Q.ConcreteVar=Q.ConcreteVar||{};ce=Q.Abbrev=Q.Abbrev||{};cf=ce.Fresh=ce.Fresh||{};cg=a.Object;ch=Y.ResultMessage=Y.ResultMessage||{};ci=l.Enumerator=l.Enumerator||{};cj=ci.T=ci.T||{};ck=Q.FromView=Q.FromView||{};cl=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};cm=l.LazyExtensionsProxy=l.LazyExtensionsProxy||{};cn=cm.LazyRecord=cm.LazyRecord||{};co=bK.List=bK.List||{};cp=Q.Array=Q.Array||{};cq=Q.Storage=Q.Storage||{};cr=Q.Attrs=Q.Attrs||{};cs=Q.DomUtility=Q.DomUtility||{};ct=bk.Syntax=bk.Syntax||{};cu=c.ListModel=c.ListModel||{};cv=bI.Unsafe=bI.Unsafe||{};cw=bK.DictionaryUtil=bK.DictionaryUtil||{};cx=bK.FSharpSet=bK.FSharpSet||{};cy=bK.HashSet=bK.HashSet||{};cz=bP.Client=bP.Client||{};cA=l.DateUtil=l.DateUtil||{};cB=bK.BalancedTree=bK.BalancedTree||{};cC=Q.Client=Q.Client||{};cD=cC.Templates=cC.Templates||{};cE=a.GeneratedPrintf=a.GeneratedPrintf||{};cF=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};cG=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};cH=ce.Async=ce.Async||{};cI=cc.AsyncBody=cc.AsyncBody||{};cJ=Z.State=Z.State||{};cK=cJ.CEBuilder=cJ.CEBuilder||{};cL=c.WebComponent=c.WebComponent||{};cM=cL.WcTabStrip=cL.WcTabStrip||{};cN=cM.WcTabStripT=cM.WcTabStripT||{};cO=cL.WcSplitter=cL.WcSplitter||{};cP=Q.DocElemNode=Q.DocElemNode||{};cQ=a.CharacterData;cR=cq.ArrayStorage=cq.ArrayStorage||{};cS=Q.Docs=Q.Docs||{};cT=Q.DynamicAttrNode=Q.DynamicAttrNode||{};cU=Q.Elt=Q.Elt||{};cV=bK.FSharpMap=bK.FSharpMap||{};cW=ct.RefType=ct.RefType||{};cX=cB.Tree=cB.Tree||{};cY=Q.CheckedInput=Q.CheckedInput||{};cZ=cc.CT=cc.CT||{};c0=cc.Scheduler=cc.Scheduler||{};c1=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};c2=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};c3=cO.WcSplitterT=cO.WcSplitterT||{};c4=cC.Attrs=cC.Attrs||{};c5=c4.Dyn=c4.Dyn||{};c6=Q.Updates=Q.Updates||{};c7=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};c8=bk.Layout=bk.Layout||{};c9=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};c_=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};c$=a.Error;da=l.OperationCanceledException=l.OperationCanceledException||{};db=l.CancellationTokenSource=l.CancellationTokenSource||{};dc=c.Hoverable=c.Hoverable||{};dd=dc.Hoverable=dc.Hoverable||{};de=a.Event;df=a.UIEvent;dg=bk.Measures=bk.Measures||{};dh=bK.MapUtil=bK.MapUtil||{};di=bK.Pair=bK.Pair||{};dj=bK.HashSetUtil=bK.HashSetUtil||{};dk=l.FormatException=l.FormatException||{};dl=cD.Prepare=cD.Prepare||{};dm=bK.KeyCollection=bK.KeyCollection||{};dn=Q.An=Q.An||{};_do=cC.Settings=cC.Settings||{};dp=ce.Mailbox=ce.Mailbox||{};dq=l.Queue=l.Queue||{};dr=l.AggregateException=l.AggregateException||{};ds=l.MatchFailureException=l.MatchFailureException||{};dt=cC.Docs=cC.Docs||{};du=dt.RunState=dt.RunState||{};dv=dt.NodeSet=dt.NodeSet||{};dw=Q.Anims=Q.Anims||{};dx=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};dy=Q.String=Q.String||{};dz=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};dA=Q.AppendList=Q.AppendList||{};dB=l.Char=l.Char||{};dC=Q.Easing=Q.Easing||{};dD=ce.HashSet=ce.HashSet||{};dE=dt.DomNodes=dt.DomNodes||{};dF=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};dG=a.IntelliFactory;dH=dG&&dG.Runtime;dI=a.console;dJ=a.Date;dK=a.Math;dL=a.jQuery;dM=a.JSON;dN=a.Reflect;d.newVar=function(dO){return o.New(dO,a.ignore,null,null,S.Const(false),null,null);};d.loader=function(){V.$cctor();return V.loader;};d.render=function(dO){var dP;return bq.Async((dP=null,cc.Delay(function(){return cc.Bind(d.loader(),function(){return cc.Return(bq.Element("div",[bE.OnAfterRenderImpl(function(dQ){var dR,dS;dR=(dS=dQ.parentElement,self.monaco.editor.create(dS,dO.options,dO.overrides));X.addResizeObserver$1(function(){dR.layout();},dQ.parentElement);dQ.parentNode.removeChild(dQ);dO.editorO={$:1,$0:dR};(_0.iter(function(dT){dT(dR);}))(dO.onRender);_1.bindVarEditor(function(dT){dR.onDidChangeModelContent(dT);},function(){return dR.getValue();},function(dT){dR.setValue(dT);},dO.onChange,dO["var"]);})],[]));});})));};d.setVar=function(dO,dP){return o.New(dO,dP.onChange,dP.onRender,dP.editorO,dP.disabled,dP.options,dP.overrides);};d.onChange=function(dO,dP){return o.New(dP["var"],dO,dP.onRender,dP.editorO,dP.disabled,dP.options,dP.overrides);};d.onRender=function(dO,dP){return o.New(dP["var"],dP.onChange,{$:1,$0:dO},dP.editorO,dP.disabled,dP.options,dP.overrides);};d.disabled=function(dO,dP){return o.New(dP["var"],dP.onChange,dP.onRender,dP.editorO,dO,dP.options,dP.overrides);};d["var"]=function(dO){return dO["var"];};d.newText=function(dO){return d.newVar(_2.Create$1(dO));};d.newVarO=function(dO){var dP;dP=d.newVar(_2.Lens(dO,function(dQ){return dQ==null?"":dQ.$0;},function(dQ,dR){return dQ==null?null:{$:1,$0:dR};}));return d.disabled(S.Map(function(dQ){return dQ==null;},dO.get_View()),dP);};e.New=function(dO,dP){return{column:dO,lineNumber:dP};};f.New=function(dO,dP,dQ,dR){return{startColumn:dO,endColumn:dP,startLineNumber:dQ,endLineNumber:dR};};g.New=function(dO,dP){return{range:dO,uri:dP};};h.New=function(dO,dP){return{value:dO,isTrusted:dP};};i.New=function(dO,dP,dQ,dR,dS,dT){return{startColumn:dO,endColumn:dP,startLineNumber:dQ,endLineNumber:dR,severity:dS,message:dT};};j.New=function(dO,dP,dQ){return{kind:dO,label:dP,detail:dQ};};k.New=function(dO,dP){return{contents:dO,range:dP};};m=l.Obj=dH.Class({Equals:function(dO){return this===dO;},GetHashCode:function(){return -1;}},null,m);m.New=dH.Ctor(function(){},m);n=d.Editor=dH.Class({},m,n);n.New=dH.Ctor(function(){m.New.call(this);},n);o.New=function(dO,dP,dQ,dR,dS,dT,dU){return{"var":dO,onChange:dP,onRender:dQ,editorO:dR,disabled:dS,options:dT,overrides:dU};};p.iterEditor=function(dO,dP){var dQ;dQ=dO.editorO;dQ!=null&&dQ.$==1?dP(dQ.$0):void 0;};p.mapEditor=function(dO,dP){var dQ;dQ=dO.editorO;return dQ!=null&&dQ.$==1?{$:1,$0:dP(dQ.$0)}:null;};p.bindEditor=function(dO,dP){var dQ;dQ=dO.editorO;return dQ!=null&&dQ.$==1?dP(dQ.$0):null;};p.posGen2Ed=function(dO){return e.New(dO.col,dO.line);};p.posEd2Gen=function(dO){return _4.New(dO.lineNumber,dO.column);};p.indexFromPos=function(dO,dP){var dQ;dQ=p.mapEditor(dO,function(dR){return dR.getModel().getOffsetAt(p.posGen2Ed(dP));});return dQ==null?-1:dQ.$0;};p.posFromIndex=function(dO,dP){var dQ;dQ=p.mapEditor(dO,function(dR){return p.posEd2Gen(dR.getModel().getPositionAt(dP));});return dQ==null?_4.New(1,1):dQ.$0;};p.convertGlyphChar=function(dO){return dO==="C"?6:dO==="E"?12:dO==="S"?11:dO==="I"?7:dO==="N"?8:dO==="M"?1:dO==="P"?9:dO==="F"?4:dO==="T"?6:dO==="K"?13:0;};p.generateDoc=function(dO,dP,dQ){var dR;return bq.Async((dR=null,cc.Delay(function(){return cc.Bind(d.loader(),function(){return cc.Return(bq.Element("div",[bE.OnAfterRenderImpl(function(dS){var dT,dU;dT=(dU=dS.parentElement,self.monaco.editor.create(dU,dO.options,dO.overrides));X.addResizeObserver$1(function(){dT.layout();},dS.parentElement);dS.parentNode.removeChild(dS);dO.editorO={$:1,$0:dT};dQ(dT);dT.onDidChangeModelContent(dO.onChange);(_0.iter(function(dV){var dW;dW=new s.New(dV(dP));self.monaco.languages.registerHoverProvider("fsharp",dW);}))(dP.toolTip);(_0.iter(function(dV){var dW;dW=new t.New(dV(dP));self.monaco.languages.registerDefinitionProvider("fsharp",dW);}))(dP.declaration);(_0.iter(function(dV){var dW;dW=new r.New(dV(dP));self.monaco.languages.registerCompletionItemProvider("fsharp",dW);}))(dP.autoCompletion);})],[]));});})));};p.getUri=function(dO){var dP;dP=p.mapEditor(dO,function(dQ){return a.String(dQ.getModel().uri);});return dP==null?"":dP.$0;};p.setUri=function(dO,dP){p.iterEditor(dO,function(dQ){dQ.getModel().uri=self.monaco.Uri.parse(dP);});};p.getValue=function(dO){var dP;dP=p.mapEditor(dO,function(dQ){return dQ.getValue();});return dP==null?"":dP.$0;};p.setValue=function(dO,dP){p.iterEditor(dO,function(dQ){dQ.setValue(dP);});};p.getWordAt=function(dO,dP){return p.bindEditor(dO,function(dQ){var dR;dR=dQ.getModel().getWordAtPosition(e.New(dP.col,dP.line));return!dR?null:{$:1,$0:[dR.word,_4.New(dP.line,dR.startColumn)]};});};p.getSelect=function(dO){var dP;dP=p.mapEditor(dO,function(dQ){var dR;dR=dQ.getSelection();return dQ.getModel().getValueInRange(dR);});return dP==null?"":dP.$0;};p.showAnnotations=function(dO,dP){p.iterEditor(dO,function(dQ){var dR,dS;dR=_8.ofSeq($.map(function(dT){var dU;return i.New(dT.startP.col,dT.endP.col,dT.startP.line,dT.endP.line,(dU=dT.severity,dU.$==0?8:dU.$==1?4:dU.$==3?1:2),dT.message);},dP));dS=dQ.getModel();self.monaco.editor.setModelMarkers(dS,"annotations",dR);});};p.newHook=function(dO){function dP(dQ,dR){return p.generateDoc(dO,dQ,dR);}return ba.New(function(dQ){return function(dR){return dP(dQ,dR);};},function(){return p.getValue(dO);},function(dQ){p.setValue(dO,dQ);},a.ignore,function(dQ){p.showAnnotations(dO,dQ);},function(dQ){return p.posFromIndex(dO,dQ);},function(dQ){return p.indexFromPos(dO,dQ);},function(dQ){return p.getWordAt(dO,dQ);},function(){return p.getSelect(dO);},function(){return p.getUri(dO);},function(dQ){p.setUri(dO,dQ);},function(dQ){dO.onChange=dQ;});};p.newRT=function(dO,dP){return q.New(null,a.ignore,dO,dP);};p.newVar=function(dO,dP,dQ){return _1.newVar(p.newHook(p.newRT(dO,dP)),dQ);};q.New=function(dO,dP,dQ,dR){return{editorO:dO,onChange:dP,options:dQ,overrides:dR};};r=p.CompletionItemProvider=dH.Class({provideCompletionItems:function(dO,dP,dQ,dR){var dS,dT;dS=this;return _9.ofAsyncResultM((dT=_5.asyncResultM(),dT.Run(dT.Delay(function(){return _5["AsyncResultMBuilder.Bind"](dT,dS.autoComplete(_4.New(dP.lineNumber,dP.column)),function(dU){return dT.Return(_8.map(function(dV){return j.New(p.convertGlyphChar(dV.kind),dV.label,dV.detail);},dU));});}))));},resolveCompletionItem:function(dO,dP){return j.New(dO.kind,dO.label,"more details");}},m,r);r.New=dH.Ctor(function(dO){m.New.call(this);this.autoComplete=dO;},r);s=p.HoverProvider=dH.Class({provideHover:function(dO,dP,dQ){var dR,dS;dR=this;return _9.ofAsyncResultM((dS=_5.asyncResultM(),dS.Run(dS.Delay(function(){return _5["AsyncResultMBuilder.Bind"](dS,dR.toolTip(_4.New(dP.lineNumber,dP.column)),function(dT){return dT!=null&&dT.$==1?dS.Return(k.New([h.New(dT.$0,true)],null)):dS.Return(null);});}))));}},m,s);s.New=dH.Ctor(function(dO){m.New.call(this);this.toolTip=dO;},s);t=p.DefinitionProvider=dH.Class({provideDefinition:function(dO,dP,dQ){var dR,dS;dR=this;return _9.ofAsyncResultM((dS=_5.asyncResultM(),dS.Run(dS.Delay(function(){return _5["AsyncResultMBuilder.Bind"](dS,dR.declaration(_4.New(dP.lineNumber,dP.column)),function(dT){var dU;return dT!=null&&dT.$==1?(dU=dT.$0[0],dS.Return(g.New(f.New(dU.col,dU.col,dU.line,dU.line),self.monaco.Uri.parse(dT.$0[1])))):dS.Return(null);});}))));}},m,t);t.New=dH.Ctor(function(dO){m.New.call(this);this.declaration=dO;},t);v.htmlD=function(){V.$cctor();return V.htmlD;};v.startWithHtmlD=function(){V.$cctor();return V.startWithHtmlD;};w.disabled=function(dO){return bA.DynamicPred("disabled",dO,S.Const(""));};w.inputLabel=function(dO,dP,dQ,dR){return bq.Element("div",dO,[bq.Element("div",[bE.Create("class","input-group")],[bq.Element("span",[bE.Create("class","input-group-addon")],[bq.TextNode(dQ)]),bq.Input([bE.Create("class","form-control"),w.disabled(dP)],dR)])]);};w.areaLabel=function(dO,dP,dQ,dR){return bq.Element("div",dO,[bq.Element("div",[bE.Create("class","input-group")],[bq.Element("span",[bE.Create("class","input-group-addon")],[bq.TextNode(dQ)]),bq.InputArea([bE.Create("class","form-control"),w.disabled(dP)],_2.Lens(dR,a.id,function(dS,dT){return dT;}))])]);};w.elemsUI=function(dO,dP){return bq.Element("div",[],[dO,bq.Button("New",[],dP)]);};w.lensFloat2Str=function(dO){var dP;function dQ(dR){if(dR!=null&&dR.$==1)if(dR.$0!==dO.Get())dO.Set(dR.$0);}return new ck.New(S.Map(function(dR){return(function(dS){return function(dT){return dS(be.prettyPrint(dT));};}(a.id))(dR);},dO.get_View()),(dP=bd.parseDoubleO(),function(dR){return dQ(dP(dR));}));};w.textLine=function(dO){return bq.Element("div",[],[bq.TextView(dO)]);};w.lensStrO=function(dO){return new ck.New(S.Map(function(dP){return dP!=null&&dP.$==1?dP.$0:"";},dO.get_View()),function(dP){if(dP==="")dO.Set(null);else dO.Set({$:1,$0:dP});});};w.mapVarO=function(dO,dP,dQ){return new ck.New(S.Map(function(dR){return dR==null?null:{$:1,$0:dO(dR.$0)};},dQ.get_View()),function(dR){var dS;function dT(dV){return{$:1,$0:dV};}function dU(dV){dQ.Set(dV);}if(dR!=null&&dR.$==1){dS=dP(dR.$0);(_0.iter(function(dV){return dU(dT(dV));}))(dS);}else dQ.Set(null);});};w.selectorLens=function(dO,dP){function dQ(dR){return w.mapVarO(dO,dP,dR);}return function(dR){return w.lensStrO(dQ(dR));};};w.selectorLensInt=function(dO){return(w.selectorLens(a.String,bd.parseIntO()))(dO);};w.selectorLensGuid=function(dO){return(w.selectorLens(a.String,bd.parseGuidO()))(dO);};w.selectorLensGuidId=function(dO){var dP,dQ;function dR(dS){return new bf({$:0,$0:dS});}return(w.selectorLens(function(dS){var dT;dT=dS.get_Id();return a.String(dT);},(dP=bd.parseGuidO(),(dQ=function(dS){return dS==null?null:{$:1,$0:dR(dS.$0)};},function(dS){return dQ(dP(dS));}))))(dO);};w.unselectorV=function(){V.$cctor();return V.unselectorV;};w.simpleButton=function(dO,dP){function dQ(dR){}return bq.Button(dO,[],function(dR){return dQ(dP(dR));});};w.newButton=function(dO){return w.simpleButton("New",dO);};w.orderedList=function(dO){return bq.Element("ol",[],[dO]);};x.plugin=function(){V.$cctor();return V.plugin;};x.addPlugIn2=function(dO){var dP;bg.addPlugIn(dO);dP=$.tryHead(dO.plgDocs);dP!=null&&dP.$==1?bg.mainDocV().Set(dO.plgName+"."+dP.$0.docName):void 0;};x.concatMainDocs=function(dO){return bq.Concat($.choose(function(dP){return dP.docDoc.$==0?{$:1,$0:dP.docDoc.$0.f()}:null;},$.choose(function(dP){return $.tryHead(dP.plgDocs);},dO)));};y=x.PlugInBuilder=dH.Class({Zero:function(){var dO;dO=bg.defaultPlugIn();return bh.New("Main",dO.plgVars,dO.plgViews,dO.plgDocs,dO.plgActions,dO.plgQueries);},Yield:function(){return this.Zero();},For:function(dO,dP){var dQ;dQ=ci.Get(dO);while(dQ.MoveNext())dP(dQ.Current());},Name:function(dO,dP){return bh.New(dP,dO.plgVars,dO.plgViews,dO.plgDocs,dO.plgActions,dO.plgQueries);},AddVar:function(dO,dP,dQ){dO.plgVars.Append(bg.newVar(dP,dQ));return dO;},AddDoc:function(dO,dP,dQ){dO.plgDocs.Append(bg.newDoc(dP,dQ));return dO;},AddDocF:function(dO,dP,dQ){dO.plgDocs.Append(bg.newDoc(dP,bj.Create(function(){return bk.turnToView(dQ);})));return dO;},AddAct:function(dO,dP,dQ){dO.plgActions.Append(bg.newAct(dP,dQ));return dO;},AddActO:function(dO,dP,dQ){dQ==null?void 0:dO.plgActions.Append(bg.newAct(dP,dQ.$0));return dO;},AddViw:function(dO,dP,dQ){dO.plgViews.Append(bg.newViw(dP,dQ));return dO;},Merge:function(dO,dP,dQ){dO.plgVars.AppendMany($.map(function(dR){return bl.New(dP+dR.varName,dR.varVar);},dQ.plgVars));dO.plgViews.AppendMany($.map(function(dR){return bm.New(dP+dR.viwName,dR.viwView);},dQ.plgViews));dO.plgDocs.AppendMany($.map(function(dR){return bn.New(dP+dR.docName,dR.docDoc);},dQ.plgDocs));dO.plgActions.AppendMany($.map(function(dR){return bo.New(dP+dR.actName,dR.actFunction,dR.actEnabled);},dQ.plgActions));dO.plgQueries.AppendMany($.map(function(dR){return bp.New(dP+dR.qryName,dR.qryFunction);},dQ.plgQueries));return dO;}},m,y);y.New=dH.Ctor(function(){m.New.call(this);},y);z=x.ListModelData=dH.Class({PlugIn:function(dO){var dP,dQ,dR;function dS(dT){}dP=this;dQ=x.plugin();return dQ.AddAct(dQ.AddAct(dQ.AddVar(dQ.AddDoc(dQ.Yield(),"list",bj.Create(function(){return dP.doc;})),"sel",dO(this.selV)),"add",(dR=this.add,function(dT){return dS(dR(dT));})),"del",this.delCur);},get_CurrentW:function(){var dO,dP,dQ,dR,dS,dT;return S.Map((dO=function(dU){return dU==null?null:a.id(dU.$0);},(dP=(dQ=this.def,function(dU){return dU==null?dQ:dU.$0;}),function(dU){return dP(dO(dU));})),S.Bind((dR=(dS=(dT=this.elems,function(dU){return dT.TryFindByKeyAsView(dU);}),function(dU){return dU==null?null:{$:1,$0:dS(dU.$0)};}),function(dU){return br.insertWO(dR(dU));}),this.selV.get_View()));},get_CurrentV:function(){var dO;dO=this;return new ck.New(this.get_CurrentW(),function(dP){var dQ;dQ=dO.selV.Get();dQ!=null&&dQ.$==1?dO.elems.ContainsKey(dQ.$0)?dO.elems.Append(dP):void 0:void 0;});}},null,z);z.New=function(dO,dP,dQ,dR,dS,dT){return new z({elems:dO,doc:dP,selV:dQ,add:dR,delCur:dS,def:dT});};A.addLayout0=function(dO){bk.addLayout(dO);bg.mainDocV().Set(dO.lytName);};B.MapLens=function(dO,dP,dQ){function dR(dT,dU){return dP(dT,dQ.Lens(dT));}function dS(dT,dU){return _8.filter(dU,dT);}return dO!=null&&dO.$==1?S.MapSeqCachedViewBy(dQ.key,dR,(((dH.Curried3(S.Map2))(dS))(dQ["var"].get_View()))(dO.$0)):S.MapSeqCachedViewBy(dQ.key,dR,dQ["var"].get_View());};C.getDocFor=function(dO,dP,dQ,dR,dS){var dT,dU,dV,dW,dX,dY;function dZ(d2){var d3;return d2!=null&&d2.$==1&&(dO.ContainsKey(d2.$0)&&(d3=d2.$0,true))?{$:1,$0:d3}:null;}function d0(d2){if(!U.Equals(dU.Get(),d2))dU.Set(d2);}function d1(d2,d3){dV.Set(null);return dO.RemoveByKey(d2);}dT=dO.key;dU=_2.Create$1(null);dV=new ck.New((dW=S.get_Do(),S.Bind(function(d2){var d3;return d2!=null&&d2.$==1?(d3=d2.$0,S.Bind(function(d4){return!d4?S.Const(null):S.Const({$:1,$0:d3});},dO.ContainsKeyAsView(d3))):S.Const(null);},dU.get_View())),function(d2){return d0(dZ(d2));});dX=z.New(dO,bq.get_Empty(),dV,function(){var d2;d2=dQ();dO.Append(d2);dV.Set({$:1,$0:dT(d2)});return d2;},function(){var d2;d2=dV.Get();(_0.iter(function(d3){d1(d3,null);}))(d2);},dP);dY=dS(dX);return z.New(dX.elems,bq.Convert(a.id,B.MapLens(dR,function(d2,d3){return(dY(S.Const({$:1,$0:d2})))(d3);},dO)),dX.selV,dX.add,dX.delCur,dX.def);};C.getDoc=function(dO,dP,dQ,dR,dS){return C.getDocFor(bi.Create(dO,bv.Empty),dP,dQ,dR,dS);};C.addElements=function(dO,dP){dO.elems.AppendMany(dP);};D.addNewO=function(dO,dP,dQ){var dR;dR=dP;return function(){var dS;dS=[dR,dO()];dR=dQ(dR);return dS;};};D.elemUI2=function(dO,dP,dQ,dR){function dS(dT,dU){return[dT,dU];}return dO(dP,dQ,_2.Lens(dR,function(dT){return dT[1];},function(dT,dU){return(function(dV){var dW;dW=dV[0];return function(dX){return dS(dW,dX);};}(dT))(dU);}));};D.getDocInt=function(dO,dP,dQ){function dR(dS,dT,dU){return D.elemUI2(dQ,dS,dT,dU);}return C.getDoc(function(dS){return dS[0];},[-1,dO],D.addNewO(dP,0,function(dS){return 1+dS;}),null,dH.Curried3(dR));};D.getDocGuid=function(dO,dP,dQ){function dR(dS,dT,dU){return D.elemUI2(dQ,dS,dT,dU);}return C.getDoc(function(dS){return dS[0];},["00000000-0000-0000-0000-000000000000",dO],D.addNewO(dP,bx.NewGuid(),function(){return bx.NewGuid();}),null,dH.Curried3(dR));};D.getDocGuidId=function(dO,dP,dQ){var dR;function dS(dT,dU,dV){return D.elemUI2(dQ,dT,dU,dV);}dR=D.addNewO(dP,new bf({$:0,$0:bx.NewGuid()}),function(){return new bf({$:0,$0:bx.NewGuid()});});return C.getDoc(function(dT){return dT[0];},[new bf({$:0,$0:"00000000-0000-0000-0000-000000000000"}),dO],dR,null,dH.Curried3(dS));};D.addElements=function(dO,dP){$.iter(function(dQ){dO.elems.Append([(dO.add())[0],dQ]);},dP);};E.html=function(){V.$cctor();return V.html$1;};F.bindWrap=function(dO,dP){return H.New(bz.op_GreaterGreaterEquals(dP,function(dQ){return dO(dQ).r;}));};F.unwrapBindWrap=function(dO,dP){return H.New(bz.op_BarGreaterGreater(dP.r,dO));};F.add1=function(dO){return dO+1;};F.a11V=function(){V.$cctor();return V.a11V;};F.mainX=function(){V.$cctor();return V.mainX;};F.toViewString=function(dO){return dO.$==1?(function(dP){return function(dQ){return dP("@{expecting string, got Action: "+be.prettyPrint(dQ)+"}");};}(a.id))(dO.$0):dO.$0;};F.valToStyle=function(dO,dP){return dP.$==0?bA.DynamicStyle(dO,S.Map(F.toViewString,dP.$0)):dP.$0.$==0?bA.Style(dO,dP.$0.$0):(function(dQ){return function(dR){return dQ("Illegal value "+bB.p$3(dR));};}(T.FailWith))(dP);};F.valToAttr=function(dO,dP){function dQ(dR,dS){var dT;return dS.$==1?(dT=dS.$0,dR.addEventListener(dO,function(dU){return bg.callFunction(dR,dU,dT.actFunction);},false)):dR.setAttribute(dO,b8.Trim(dS.$0));}return dP.$==0?bA.DynamicCustom(function(dR){return function(dS){return dQ(dR,dS);};},dP.$0):dP.$0.$==0?bE.Create(dO,dP.$0.$0):(function(dR){return function(dS){return dR("Illegal value "+bB.p(dS));};}(T.FailWith))(dP);};F.concat=function(dO,dP){return(((dH.Curried3(function(dQ,dR,dS){return dQ("Concat("+a.String(dR)+", "+dS.toFixed(6)+")");}))(a.id))(dO))(dP);};F.aV=function(){V.$cctor();return V.aV;};F.pa=function(){V.$cctor();return V.pa;};F.pb=function(){V.$cctor();return V.pb;};F.currentPlugInNameDef=function(){V.$cctor();return V.currentPlugInNameDef;};F.currentPlugInNameD=function(){V.$cctor();return V.currentPlugInNameD;};F.getDocD=function(){V.$cctor();return V.getDocD;};F.getTextActViewD=function(){V.$cctor();return V.getTextActViewD;};F.extractDocD=function(){V.$cctor();return V.extractDocD$1;};F.extractAtsD=function(){V.$cctor();return V.extractAtsD$1;};F.extractAttD=function(){V.$cctor();return V.extractAttD;};F.op_Dereference=function(dO){return H.New((bz.rtn())({$:1,$0:dO}));};F.run=function(dO,dP){var dQ,dR;dQ=(dR=bz.depend(),dR.Delay(function(){return dR.Bind(F.getDocD(),function(dS){return dR.Bind(F.getTextActViewD(),function(dT){return dR.Return(by.resolver(bu.ofArray([["getDocFromReference",dS],["getTextActViewFromReference",dT],["currentPlugInName",dO]]),dP));});});}));return by.resolver(bu.ofArray([["currentPlugInName",dO]]),dQ);};F.name=function(){V.$cctor();return V.name;};F.checkName=function(dO){return dO===bH.string("World",{$:1,$0:0},{$:1,$0:dO.length-1})||dO.length<=1?"<---- Please enter your name":"";};F.enterName=function(){V.$cctor();return V.enterName;};F.now=function(){V.$cctor();return V.now;};F.sayHello=function(){V.$cctor();return V.sayHello;};F.aString=function(){V.$cctor();return V.aString;};F.main0=function(){V.$cctor();return V.main0;};F.main1=function(){V.$cctor();return V.main1;};F.main=function(){V.$cctor();return V.main;};F.makeAViewDoc=function(dO){return bq.BindView(function(){return dO();},bg.mainDocV().get_View());};F.makeAViewDocL=function(dO){return bj.Create(function(){return F.makeAViewDoc(dO);});};F.main2=function(){V.$cctor();return V.main2;};F.appFwk=function(){V.$cctor();return V.appFwk;};F.split=function(){V.$cctor();return V.split;};F.split2=function(){V.$cctor();return V.split2;};F.callDocPFn=function(dO,dP){var dQ;dQ=H.run(dO,dP);return bq.BindView(function(){var dR;dR=dQ.f.$==0?dQ.p.$==1?{$:0,$0:S.Apply(dQ.f.$0,S.Const(dQ.p.$0))}:{$:0,$0:S.Apply(dQ.f.$0,dQ.p.$0)}:dQ.p.$==0?{$:0,$0:S.Apply(S.Const(dQ.f.$0),dQ.p.$0)}:{$:1,$0:dQ.f.$0(dQ.p.$0)};return dR.$==0?bq.BindView(a.id,dR.$0):dR.$0;},bg.mainDocV().get_View());};F.pName=function(){V.$cctor();return V.pName;};F.itemRefToTextType=function(dO){return dO.$==1?{$:1,$0:(((dH.Curried3(function(dP,dQ,dR){return dP(be.toSafe(dQ)+"."+be.toSafe(dR));}))(a.id))(dO.$0))(dO.$1)}:{$:1,$0:dO.$0};};F.textValToTextType=function(dO){var dP;return(dO.$==1?(dP=dO.$0.$0,false):dO.$==2?(dP=dO.$0.$0,false):true)?{$:0,$0:dO.$0}:F.itemRefToTextType(dP);};F.ActRVs=function(dO){return bu.ofArray([{$:1,$0:{$:0,$0:dO.$0}}]);};F.attrValToAttrD=function(){V.$cctor();return V.attrValToAttrD;};F.nodeRefToDocD=function(){V.$cctor();return V.nodeRefToDocD;};F.varRefToVarD=function(){V.$cctor();return V.varRefToVarD;};F.defVar=function(dO,dP,dQ){return _2.Create$1(dQ);};F.defInput=function(dO,dP,dQ,dR){var dS;return F.run(dO,(dS=by.depend(),dS.Delay(function(){return dS.Bind(F.attrValToAttrD(),function(dT){return dS.Bind(F.varRefToVarD(),function(dU){return dS.Return(bj.Create(function(){return bq.Input($.map(dT,dR),dU(dQ));}));});});})));};F.defTextArea=function(dO,dP,dQ,dR){var dS;return F.run(dO,(dS=by.depend(),dS.Delay(function(){return dS.Bind(F.attrValToAttrD(),function(dT){return dS.Bind(F.varRefToVarD(),function(dU){return dS.Return(bj.Create(function(){return bq.Input($.map(dT,dR),dU(dQ));}));});});})));};F.defElement=function(dO,dP,dQ,dR,dS){var dT;return F.run(dO,(dT=by.depend(),dT.Delay(function(){return dT.Bind(F.attrValToAttrD(),function(dU){return dT.Bind(F.nodeRefToDocD(),function(dV){return dT.Return(bj.Create(function(){return bq.Element(dQ,$.map(dU,dR),$.map(dV,dS));}));});});})));};F.defConcat=function(dO,dP,dQ){var dR;return F.run(dO,(dR=by.depend(),dR.Delay(function(){return dR.Bind(F.attrValToAttrD(),function(){return dR.Bind(F.nodeRefToDocD(),function(dS){return dR.Return(bj.Create(function(){return bq.Concat($.map(dS,dQ));}));});});})));};F.defButton=function(dO,dP,dQ,dR,dS){return F.defElement(dO,dP,"button",$.append([{$:2,$0:"click",$1:dQ}],dR),bu.ofArray([{$:0,$0:dS}]));};F.defVarM=function(){V.$cctor();return V.defVarM;};F.defButtonM=function(){V.$cctor();return V.defButtonM;};F.defInputM=function(){V.$cctor();return V.defInputM;};F.defTextAreaM=function(){V.$cctor();return V.defTextAreaM;};F.defElementM=function(){V.$cctor();return V.defElementM;};F.defConcatM=function(){V.$cctor();return V.defConcatM;};F.parseNewLayout=function(dO){var dP,dQ,dR,dS,dT,dU;function dV(dY){return bk.parseEntries(dO,dY);}function dW(dY){return dY.$==1?(Y.print(dY.$0),null):{$:1,$0:dY.$0};}function dX(dY,dZ){return dZ.$==2?{$:1,$0:{$:0,$0:bg.newVar(dY,(F.defVarM())([dO,dY,dZ.$0.$0]))}}:dZ.$==1?null:dZ.$==3?null:dZ.$==0?dZ.$0.$==4?null:dZ.$0.$==1?{$:1,$0:{$:2,$0:bg.newDoc(dY,(F.defButtonM())([dO,dY,dZ.$0.$0.$0,dZ.$0.$0.$1,dZ.$0.$0.$2]))}}:dZ.$0.$==2?{$:1,$0:{$:2,$0:bg.newDoc(dY,(F.defInputM())([dO,dY,dZ.$0.$0.$0,dZ.$0.$0.$1]))}}:dZ.$0.$==3?{$:1,$0:{$:2,$0:bg.newDoc(dY,(F.defTextAreaM())([dO,dY,dZ.$0.$0.$0,dZ.$0.$0.$1]))}}:dZ.$0.$==5?{$:1,$0:{$:2,$0:bg.newDoc(dY,(F.defConcatM())([dO,dY,dZ.$0.$0.$0]))}}:dZ.$0.$==6?{$:1,$0:{$:2,$0:bg.newDoc(dY,(F.defElementM())([dO,dY,dZ.$0.$0.$0,dZ.$0.$0.$1,dZ.$0.$0.$2]))}}:null:null;}dP=(dQ=(dR=function(dY){return $.choose(dW,dY);},function(dY){return dR(dV(dY));}),(dS=function(dY){return $.choose(function(dZ){return dX(dZ[0],dZ[1]);},dY);},function(dY){return dS(dQ(dY));}));dT=(dU=bJ.Untag$3(dO),function(dY){bk.refreshEntries(dU,dY);});return function(dY){return dT(dP(dY));};};G.New=function(dO,dP){return{f:dO,p:dP};};H.New=function(dO){return{r:dO};};I.map=function(dO,dP){return dP.$==0?{$:0,$0:S.Map(dO,dP.$0)}:{$:1,$0:dO(dP.$0)};};I.addDoc=function(dO,dP){return dP.$==0?{$:1,$0:[bq.BindView(bq.Concat,dP.$0),dO]}:{$:1,$0:$.append(dP.$0,[dO])};};I.addAtt=function(dO,dP){return dP.$==0?function(dQ){return dQ("addAtt for VView not implemented");}(T.FailWith):{$:1,$0:$.append(dP.$0,[dO])};};I.textDoc=function(dO){return dO.$==0?bq.TextView(dO.$0):bq.TextNode(dO.$0);};I.textAtt=function(){V.$cctor();return V.textAtt;};J.getDocFromReference=function(dO){return bq.TextNode((function(dP){return function(dQ){return dP("getDocFromReference not implemented: @{"+be.toSafe(dQ)+"}");};}(a.id))(dO));};J.getTextActViewFromReference=function(dO){return S.Const({$:0,$0:(function(dP){return function(dQ){return dP("getTextActViewFromReference not implemented: @{"+be.toSafe(dQ)+"}");};}(a.id))(dO)});};J.getOneTextData=function(dO,dP,dQ){return(dO===""?a.id:function(dR){return new bv({$:1,$0:{$:0,$0:dO},$1:dR});})(new bv({$:1,$0:{$:1,$0:dP},$1:dQ===""?bv.Empty:J.getTextData(dQ)}));};J.getTextData=function(dO){var dP,dQ,dR;dP=(dQ=bF.delimitedO("@{","}",dO),dQ==null?null:{$:1,$0:(dR=dQ.$0,J.getOneTextData(dR[0],dR[1],dR[2]))});return dP==null?bu.ofArray([{$:0,$0:dO}]):dP.$0;};J.getDocFromReferenceD=function(){V.$cctor();return V.getDocFromReferenceD;};J.getTextActViewFromReferenceD=function(){V.$cctor();return V.getTextActViewFromReferenceD;};J.getDocFromTextTypesD=function(){V.$cctor();return V.getDocFromTextTypesD;};J.extractDocD=function(){V.$cctor();return V.extractDocD;};J.getTextValFromSeqD=function(){V.$cctor();return V.getTextValFromSeqD;};J.getTextValFromTextTypesD=function(){V.$cctor();return V.getTextValFromTextTypesD;};J.getTextValD=function(){V.$cctor();return V.getTextValD;};J.extractAtsD=function(){V.$cctor();return V.extractAtsD;};H.run=function(dO,dP){return F.run(dO,dP.r);};K.set_drag=function(dO){V.$cctor();V.drag=dO;};K.drag=function(){V.$cctor();return V.drag;};K.setDragNone=function(){K.set_drag(L.DragNone);};K.setDragNode=function(dO){K.set_drag({$:1,$0:dO});};K.getDragNIdO=function(dO){var dP;return K.drag().$==1&&(!U.Equals(K.drag().$0,dO)&&(dP=K.drag().$0,true))?{$:1,$0:dP}:null;};L.DragNone={$:0};M.TemplateFileName=function(){V.$cctor();return V.TemplateFileName;};M.snippetsLM=function(){V.$cctor();return V.snippetsLM;};M.collapsedV=function(){V.$cctor();return V.collapsedV;};M.codeSnippetIdV=function(){V.$cctor();return V.codeSnippetIdV;};M.searchFor=function(){V.$cctor();return V.searchFor;};M.allPredecessors=function(){V.$cctor();return V.allPredecessors;};M.indPredIds=function(){V.$cctor();return V.indPredIds;};M.allCodePredsW=function(){V.$cctor();return V.allCodePredsW;};M.allCodePredIdsW=function(){V.$cctor();return V.allCodePredIdsW;};M.shdDef=function(){V.$cctor();return V.shdDef;};M.processHier=function(dO,dP){var dQ,dR,dS,dT,dU;dS=new bL.New$5();dQ=[];dR=0;dT=$.indexed(dO);dU=ci.Get(dT);try{while(dU.MoveNext())(function(){var dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6;function d7(d8,d9){return U.Equals(d9,d0);}dV=dU.Current();dW=dV[1][0];dX=dV[1][1];dY=dV[0];dZ=dX!=null&&dX.$==1?(d0=dX.$0,(d1=$.tryFind(function(d8){return d7(d8[0],d8[1]);},$.indexed(dQ)),d1!=null&&d1.$==1?(d2=d1.$0[0],[d2+1,bH.array(dQ,{$:1,$0:0},{$:1,$0:d2}),null]):[0,[],{$:1,$0:(function(d8){return function(d9){return d8("Parent not found in path "+be.prettyPrint(d9));};}(a.id))(d0)}])):[0,[],null];d3=dZ[1];d4=dZ[0];dS.Add(dW,N.New(d4,dY,(d5=(d6=$.tryItem(dY+1,dO),d6==null?null:{$:1,$0:U.Equals({$:1,$0:dW},d6.$0[1])}),d5==null?false:d5.$0),dR>=d4,d3,dZ[2]));dQ=d3.concat([dW]);return dR>=d4?void(dR=dP.Contains(dW)?d4:d4+1):null;}());}finally{if(typeof dU=="object"&&"Dispose"in dU)dU.Dispose();}return dS;};M.snpIdParentsW=function(){V.$cctor();return V.snpIdParentsW;};M.processHierW=function(){V.$cctor();return V.processHierW;};M.docWrap=function(dO,dP){return(dO([]))([dP]);};M.moveNode=function(dO,dP){S.Get(function(dQ){var dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;dR=(dS=null,dQ.TryGetValue(dO,{get:function(){return dS;},set:function(d4){dS=d4;}})?{$:1,$0:dS}:null);dT=(dU=null,dQ.TryGetValue(dP,{get:function(){return dU;},set:function(d4){dU=d4;}})?{$:1,$0:dU}:null);dV=M.snippetsLM().TryFindByKey(dO);dW=M.snippetsLM().TryFindByKey(dP);dR!=null&&dR.$==1?dT!=null&&dT.$==1?dV!=null&&dV.$==1?dW!=null&&dW.$==1?(dX=dR.$0,dY=dV.$0,dZ=dT.$0,$.contains(dO,dZ.path)?void 0:(d0=_8.ofSeq((M.snippetsLM())["var"].Get()),d1=function(d4){var d5,d6,d7;while(true){d6=_8.tryItem(d4+1,d0);if(d6!=null&&d6.$==1){d7=(d5=null,dQ.TryGetValue(d6.$0.snpId,{get:function(){return d5;},set:function(d8){d5=d8;}})?{$:1,$0:d5}:null);if(d7!=null&&d7.$==1){if($.contains(dO,d7.$0.path))d4=d4+1;else return d4;}else return d4;}else return d4;}}(dX.pos),d2=bN.New(dY.snpId,dY.snpName,dY.snpContent,dW.$0.snpParentIdO,dY.snpPredIds,dY.snpProperties,dY.snpModified),d3=_8.concat(dX.pos<dZ.pos?[bH.array(d0,{$:1,$0:0},{$:1,$0:dX.pos-1}),bH.array(d0,{$:1,$0:d1+1},{$:1,$0:dZ.pos-1}),[d2],bH.array(d0,{$:1,$0:dX.pos+1},{$:1,$0:d1}),bH.array(d0,{$:1,$0:dZ.pos},null)]:[bH.array(d0,{$:1,$0:0},{$:1,$0:dZ.pos-1}),[d2],bH.array(d0,{$:1,$0:dX.pos+1},{$:1,$0:d1}),bH.array(d0,{$:1,$0:dZ.pos},{$:1,$0:dX.pos-1}),bH.array(d0,{$:1,$0:d1+1},null)]),M.snippetsLM().Set(d3))):void 0:void 0:void 0:void 0;},M.processHierW());};M.calcUI=function(dO,dP,dQ){var dR,dS,dT;dR=S.Map(function(dU){return(M.indPredIds())(dU);},(dS=S.Apply(S.Map2(function(dU,dV){return function(dW){return[dU.snpId,dV.snpParentIdO,dW.snpPredIds];};},dQ.get_CurrentV().get_View(),dQ.get_CurrentV().get_View()),dQ.get_CurrentV().get_View()),(dT=[_2.Create$1(null)],(S.Sink(function(dU){if(!U.Equals(dT[0].Get(),dU))dT[0].Set(dU);},dS),dT[0].get_View()))));return function(dU){return function(dV){var dW,dX,dY,dZ,d0,d1,d2,d3,d4;S.Map(function(d5){return d5==null;},dU);dW=S.Map2(function(d5,d6){var d7,d8,d9;d7=(d8=d6.snpId,function(d_){var d$;d$=null;return d_.TryGetValue(d8,{get:function(){return d$;},set:function(ea){d$=ea;}})?{$:1,$0:d$}:null;}(d5));d9=M.shdDef();return d7==null?d9:d7.$0;},M.processHierW(),dV.get_View());return M.docWrap(dO,(dX=(dY=(dZ=(d0=(d1=(d2=bS.Make().WithHole({$:2,$0:"name",$1:S.Map2(function(d5,d6){return(d5.errorO==null?a.id:function(d7){return function(d8){return d7("!"+be.toSafe(d8));};}(a.id))(d6.snpName);},dW,dV.get_View())}).WithHole({$:2,$0:"selected",$1:S.Map2(function(d5,d6){return U.Equals(d5,d6)?"selected":"";},dQ.selV.get_View(),dU)}).WithHole({$:2,$0:"predecessor",$1:S.Apply(S.Apply(S.Apply(S.Map2(function(d5,d6){return dH.Curried3(function(d7,d8,d9){var d_;return d5!=null&&d5.$==1?(d_=d5.$0,($.contains(d_,d6.snpPredIds)?"direct-predecessor":$.contains(d_,d7)?"indirect-predecessor":$.contains(d_,d8)?"included-predecessor":"")+(U.Equals(d9,d5)?" codeSnippet":"")):"";});},dU,dQ.get_CurrentV().get_View()),dR),M.allCodePredIdsW()),M.codeSnippetIdV().get_View())}),d2.WithHole(bT.EventQ2(d2.k,"select",function(){return d2.i;},function(){var d5;S.Get((d5=dQ.selV,function(d6){d5.Set(d6);}),dU);}))).WithHole({$:2,$0:"indent",$1:S.Map(function(d5){return a.String(1.5*d5.level);},dW)}).WithHole({$:2,$0:"parent",$1:S.Apply(S.Map2(function(d5,d6){return function(d7){return d5.hasChildren?d6.Contains(d7.snpId)?"collapsed":"expanded":"";};},dW,M.collapsedV().get_View()),dV.get_View())}),d1.WithHole(bT.EventQ2(d1.k,"togglecollapse",function(){return d1.i;},function(){S.Get(function(d5){var d6;if(d5.hasChildren){d6=((M.collapsedV().Get().Contains(dV.Get().snpId)?function(d7){return function(d8){return d8.Remove(d7);};}:function(d7){return function(d8){return d8.Add(d7);};})(dV.Get().snpId))(M.collapsedV().Get());M.collapsedV().Set(d6);}},dW);}))),d0.WithHole(bT.EventQ2(d0.k,"drag",function(){return d0.i;},function(d5){S.Get(function(d6){if(d6!=null&&d6.$==1){K.setDragNode(d6.$0);d5.Event.stopPropagation();}},dU);}))),dZ.WithHole(bT.EventQ2(dZ.k,"dragover",function(){return dZ.i;},function(d5){S.Get(function(d6){if(d6!=null&&d6.$==1)if(K.getDragNIdO(d6.$0)!=null)d5.Event.preventDefault();},dU);}))),dY.WithHole(bT.EventQ2(dY.k,"drop",function(){return dY.i;},function(d5){d5.Event.preventDefault();S.Get(function(d6){var d7,d8;if(d6!=null&&d6.$==1){d7=d6.$0;d8=K.getDragNIdO(d7);(_0.iter(function(d9){M.moveNode(d9,d7);}))(d8);}},dU);}))),(d3=bT.CompleteHoles(dX.k,dX.h,[]),(d4=new bR.New(d3[1],bC.snippet(d3[0])),(dX.i=d4,d4)))).get_Doc());};};};M.search=function(){V.$cctor();return V.search;};M.wrapNothing=function(dO){return bq.Concat;};M.snippetList=function(){V.$cctor();return V.snippetList;};M.currentSnippetV=function(){V.$cctor();return V.currentSnippetV;};M.currentSnippetNameV=function(){V.$cctor();return V.currentSnippetNameV;};M.currentSnippetContentV=function(){V.$cctor();return V.currentSnippetContentV;};M.curSnp=function(){V.$cctor();return V.curSnp;};M.selectorLensGuidId=function(dO){var dP;function dQ(dR){return dR==null?null:{$:1,$0:bJ.Tag$4(dR.$0)};}return(w.selectorLens(a.String,(dP=bd.parseGuidO(),function(dR){return dQ(dP(dR));})))(dO);};M.monacoNew=function(dO){return _1.onRender(function(dP){var dQ;dQ=dP.editorO;(_0.iter(function(dR){var dS;dS=dR.getModel();self.monaco.editor.setModelLanguage(dS,"fsharp");}))(dQ);self.monaco.editor.setTheme("vs-dark");},p.newVar(function(){return{};},function(){return{};},dO));};M.monaco=function(){V.$cctor();return V.monaco;};M.addSnippet=function(){S.Get(function(dO){var dP,dQ,dR,dS,dT,dU,dV;dP=_8.ofSeq((M.snippetsLM())["var"].Get());dQ=M.snippetList().add();dR=M.currentSnippetV().Get().snpId;dS=(dT=null,dO.TryGetValue(dR,{get:function(){return dT;},set:function(dW){dT=dW;}})?{$:1,$0:dT}:null);dS!=null&&dS.$==1?(dU=function(dW){var dX,dY,dZ;while(true){dY=_8.tryItem(dW+1,dP);if(dY!=null&&dY.$==1){dZ=(dX=null,dO.TryGetValue(dY.$0.snpId,{get:function(){return dX;},set:function(d0){dX=d0;}})?{$:1,$0:dX}:null);if(dZ!=null&&dZ.$==1){if($.contains(dR,dZ.$0.path))dW=dW+1;else return dW;}else return dW;}else return dW;}}(dS.$0.pos),dV=_8.concat([bH.array(dP,{$:1,$0:0},{$:1,$0:dU}),[bN.New(dQ.snpId,dQ.snpName,dQ.snpContent,M.currentSnippetV().Get().snpParentIdO,dQ.snpPredIds,dQ.snpProperties,dQ.snpModified)],bH.array(dP,{$:1,$0:dU+1},null)]),M.snippetsLM().Set(dV)):void 0;},M.processHierW());};M.deleteSnippet=function(){S.Get(function(dO){var dP,dQ,dR,dS,dT,dU,dV;dP=M.currentSnippetV().Get().snpId;dQ=M.currentSnippetV().Get().snpParentIdO;dR=(dS=null,dO.TryGetValue(dP,{get:function(){return dS;},set:function(dW){dS=dW;}})?{$:1,$0:dS}:null);dR!=null&&dR.$==1?(dT=dR.$0,dU=_8.ofSeq((M.snippetsLM())["var"].Get()),function(dW){var dX,dY,dZ,d0;while(true){dY=_8.tryItem(dW,dU);if(dY!=null&&dY.$==1){dZ=dY.$0;if(U.Equals(dZ.snpParentIdO,{$:1,$0:dP})){_8.set(dU,dW,bN.New(dZ.snpId,dZ.snpName,dZ.snpContent,dQ,dZ.snpPredIds,dZ.snpProperties,dZ.snpModified));dW=dW+1;}else{d0=(dX=null,dO.TryGetValue(dZ.snpId,{get:function(){return dX;},set:function(d1){dX=d1;}})?{$:1,$0:dX}:null);if(d0!=null&&d0.$==1){if($.contains(dP,d0.$0.path))dW=dW+1;else return null;}else return null;}}else return null;}}(dT.pos+1),dV=_8.concat([bH.array(dU,{$:1,$0:0},{$:1,$0:dT.pos-1}),bH.array(dU,{$:1,$0:dT.pos+1},null)]),M.snippetsLM().Set(dV)):void 0;},M.processHierW());};M.indentIn=function(){S.Get(function(dO){var dP,dQ;dP=(dQ=M.currentSnippetV().Get().snpId,function(dR){var dS;dS=null;return dR.TryGetValue(dQ,{get:function(){return dS;},set:function(dT){dS=dT;}})?{$:1,$0:dS}:null;}(dO));(_0.iter(function(dR){var dS,dT;dS=M.currentSnippetV().Get().snpParentIdO;dT=function(dU){var dV;while(true)if(dU===0)return null;else{dV=$.nth(dU-1,(M.snippetsLM())["var"].Get());if(U.Equals({$:1,$0:dV.snpId},dS))return null;else if(U.Equals(dV.snpParentIdO,dS))return{$:1,$0:dV.snpId};else dU=dU-1;}}(dR.pos);(_0.iter(function(dU){_2.Lens(M.currentSnippetV(),function(dV){return dV.snpParentIdO;},function(dV,dW){return bN.New(dV.snpId,dV.snpName,dV.snpContent,dW,dV.snpPredIds,dV.snpProperties,dV.snpModified);}).Set({$:1,$0:dU});}))(dT);}))(dP);},M.processHierW());};M.indentOut=function(){S.Get(function(dO){var dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0;dP=M.currentSnippetV().Get().snpId;dQ=(dR=null,dO.TryGetValue(dP,{get:function(){return dR;},set:function(d1){dR=d1;}})?{$:1,$0:dR}:null);dS=M.currentSnippetV().Get().snpParentIdO;dQ!=null&&dQ.$==1?dS!=null&&dS.$==1?(dT=dQ.$0,dU=dS.$0,dV=$.tryItem(_8.length(dT.path)-2,dT.path),!U.Equals({$:1,$0:dU},dV)?(_2.Lens(M.currentSnippetV(),function(d1){return d1.snpParentIdO;},function(d1,d2){return bN.New(d1.snpId,d1.snpName,d1.snpContent,d2,d1.snpPredIds,d1.snpProperties,d1.snpModified);}).Set(dV),dW=_8.ofSeq((M.snippetsLM())["var"].Get()),dX=function(d1,d2){var d3,d4,d5,d6;while(true){d4=_8.tryItem(d2+1,dW);if(d4!=null&&d4.$==1){d5=(d3=null,dO.TryGetValue(d4.$0.snpId,{get:function(){return d3;},set:function(d7){d3=d7;}})?{$:1,$0:d3}:null);if(d5!=null&&d5.$==1){d6=d5.$0;if($.contains(dP,d6.path)){d1=d2+1;d2=d2+1;}else if($.contains(dU,d6.path))d2=d2+1;else return{$:1,$0:[d1,d2]};}else return null;}else return null;}}(dT.pos,dT.pos),dX!=null&&dX.$==1?(dY=dX.$0[1],dZ=dX.$0[0],d0=_8.concat([bH.array(dW,{$:1,$0:0},{$:1,$0:dT.pos-1}),bH.array(dW,{$:1,$0:dZ+1},{$:1,$0:dY}),bH.array(dW,{$:1,$0:dT.pos},{$:1,$0:dZ}),bH.array(dW,{$:1,$0:dY+1},null)]),M.snippetsLM().Set(d0)):void 0):void 0):void 0:void 0;},M.processHierW());};M.parseW=function(){V.$cctor();return V.parseW;};M.parseNewLY=function(){var dO;dO=M.currentSnippetContentV().get_View();S.Get(F.parseNewLayout(bJ.Tag$3("lytTarget2")),dO);};M.main=function(){var dO;dO=v.startWithHtmlD();(by.resolver(bu.ofArray([["AppFrameworkTemplate.html",b1.html()+E.html()]]),dO))();};N.New=function(dO,dP,dQ,dR,dS,dT){return{level:dO,pos:dP,hasChildren:dQ,visible:dR,path:dS,errorO:dT};};O.loadTextFile=function(dO){var dP,dQ;dP=dO.files;dP.length>0?(dQ=new bU(),dQ.onload=function(dR){var dS,dT;try{dS=(dT=dR.target.result,(bX.deserializeWithDefs((bY.serModel())[0],(bY.serModel())[1]))(dT));return(_0.iter(function(dU){M.snippetsLM().Set(dU.snippets);M.collapsedV().Set(dU.collapsed);}))(dS);}catch(dU){a.alert(a.String(dU));return(function(dV){return function(dW){return dV(be.prettyPrint(dW));};}(function(dV){dI.log(dV);}))(dU);}},dQ.readAsText(dP.item(0))):void 0;};O.saveAs=function(){var dO;a.saveAs(new a.Blob([(dO=bY.getModel((M.snippetsLM())["var"].Get(),dJ.now(),M.collapsedV().Get()),(bY.serModel())[0](dO))],{type:"text/plain;charset=utf-8"}),"noname.snippets");};P.TryParseInt32=function(dO,dP){return P.TryParse(dO,-2147483648,2147483647,dP);};R=Q.Var=dH.Class({},m,R);R.New=dH.Ctor(function(){m.New.call(this);},R);S=Q.View=dH.Class({},null,S);T.toInt=function(dO){var dP;dP=T.toUInt(dO);return dP>=2147483648?dP-4294967296:dP;};T.FailWith=function(dO){throw new c$(dO);};T.range=function(dO,dP){var dQ;dQ=1+dP-dO;return dQ<=0?[]:$.init(dQ,function(dR){return dR+dO;});};T.toUInt=function(dO){return(dO<0?dK.ceil(dO):dK.floor(dO))>>>0;};T.KeyValue=function(dO){return[dO.K,dO.V];};S.Const=function(dO){var dP;dP=b2.New({$:0,$0:dO});return function(){return dP;};};S.Map=function(dO,dP){return S.CreateLazy(function(){return b2.Map(dO,dP());});};S.Bind=function(dO,dP){return S.Join(S.Map(dO,dP));};S.Map2=function(dO,dP,dQ){return S.CreateLazy(function(){return b2.Map2(dO,dP(),dQ());});};S.MapSeqCachedViewBy=function(dO,dP,dQ){var dR;dR=[new bL.New$5()];return S.Map(function(dS){var dT,dU,dV;dT=dR[0];dU=new bL.New$5();dV=cp.mapInPlace(function(dW){var dX,dY,dZ;dX=dO(dW);dY=dT.ContainsKey(dX)?(dZ=dT.get_Item(dX),(_2.Set(dZ.r,dW),dZ)):S.ConvertSeqNode(function(d0){return dP(dX,d0);},dW);dU.set_Item(dX,dY);return dY.e;},_8.ofSeq(dS));dR[0]=dU;return dV;},dQ);};S.get_Do=function(){return bt.B;};S.Apply=function(dO,dP){return S.Map2(function(dQ,dR){return dQ(dR);},dO,dP);};S.Get=function(dO,dP){var dQ;function dR(){b2.WhenRun(dP(),function(dS){if(!dQ[0]){dQ[0]=true;dO(dS);}},function(){if(!dQ[0])dR();});}dQ=[false];dR();};S.Sink=function(dO,dP){function dQ(){b2.WhenRun(dP(),dO,function(){cc.scheduler().Fork(dQ);});}cc.scheduler().Fork(dQ);};S.CreateLazy=function(dO){var dP;dP={c:null,o:dO};return function(){var dQ,dR;dQ=dP.c;return dQ===null?(dQ=dP.o(),dP.c=dQ,(dR=dQ.s,dR!=null&&dR.$==0)?dP.o=null:b2.WhenObsoleteRun(dQ,function(){dP.c=null;}),dQ):dQ;};};S.Join=function(dO){return S.CreateLazy(function(){return b2.Join(dO());});};S.ConvertSeqNode=function(dO,dP){var dQ,dR;dQ=_2.Create$1(dP);dR=dQ.get_View();return{e:dO(dR),r:dQ,w:dR};};S.MapAsync=function(dO,dP){return S.CreateLazy(function(){return b2.MapAsync(dO,dP());});};S.TryGet=function(dO){return b2.TryGet(dO());};S.Map2Unit=function(dO,dP){return S.CreateLazy(function(){return b2.Map2Unit(dO(),dP());});};S.MapSeqCached=function(dO,dP){return S.MapSeqCachedBy(a.id,dO,dP);};S.MapSeqCachedBy=function(dO,dP,dQ){var dR;dR=[new bL.New$5()];return S.Map(function(dS){var dT,dU,dV;dT=dR[0];dU=new bL.New$5();dV=cp.mapInPlace(function(dW){var dX,dY;dX=dO(dW);dY=dT.ContainsKey(dX)?dT.get_Item(dX):dP(dW);dU.set_Item(dX,dY);return dY;},_8.ofSeq(dS));dR[0]=dU;return dV;},dQ);};S.Map3=function(dO,dP,dQ,dR){return S.CreateLazy(function(){return b2.Map3(dO,dP(),dQ(),dR());});};S.Sequence=function(dO){return S.CreateLazy(function(){return b2.Sequence($.map(function(dP){return dP();},dO));});};U.Equals=function(dO,dP){var dQ,dR,dS,dT;if(dO===dP)return true;else{dQ=typeof dO;if(dQ=="object"){if(dO===null||dO===void 0||dP===null||dP===void 0)return false;else if("Equals"in dO)return dO.Equals(dP);else if(dO instanceof a.Array&&dP instanceof a.Array)return U.arrayEquals(dO,dP);else if(dO instanceof dJ&&dP instanceof dJ)return U.dateEquals(dO,dP);else{dR=[true];for(var dU in dO)if(function(dV){dR[0]=!dO.hasOwnProperty(dV)||dP.hasOwnProperty(dV)&&U.Equals(dO[dV],dP[dV]);return!dR[0];}(dU))break;if(dR[0]){for(var dV in dP)if(function(dW){dR[0]=!dP.hasOwnProperty(dW)||dO.hasOwnProperty(dW);return!dR[0];}(dV))break;}return dR[0];}}else return dQ=="function"&&("$Func"in dO?dO.$Func===dP.$Func&&dO.$Target===dP.$Target:"$Invokes"in dO&&"$Invokes"in dP&&U.arrayEquals(dO.$Invokes,dP.$Invokes));}};U.arrayEquals=function(dO,dP){var dQ,dR;if(_8.length(dO)===_8.length(dP)){dQ=true;dR=0;while(dQ&&dR<_8.length(dO)){!U.Equals(_8.get(dO,dR),_8.get(dP,dR))?dQ=false:void 0;dR=dR+1;}return dQ;}else return false;};U.dateEquals=function(dO,dP){return dO.getTime()===dP.getTime();};U.Compare=function(dO,dP){var dQ,dR,dS,dT,dU,dV;if(dO===dP)return 0;else{dR=typeof dO;switch(dR=="function"?1:dR=="boolean"?2:dR=="number"?2:dR=="string"?2:dR=="object"?3:0){case 0:return typeof dP=="undefined"?0:-1;case 1:return T.FailWith("Cannot compare function values.");case 2:return dO<dP?-1:1;case 3:if(dO===null)dS=-1;else if(dP===null)dS=1;else if("CompareTo"in dO)dS=dO.CompareTo(dP);else if("CompareTo0"in dO)dS=dO.CompareTo0(dP);else if(dO instanceof a.Array&&dP instanceof a.Array)dS=U.compareArrays(dO,dP);else if(dO instanceof dJ&&dP instanceof dJ)dS=U.compareDates(dO,dP);else{dT=[0];for(var dW in dO)if(function(dX){return!dO.hasOwnProperty(dX)?false:!dP.hasOwnProperty(dX)?(dT[0]=1,true):(dT[0]=U.Compare(dO[dX],dP[dX]),dT[0]!==0);}(dW))break;if(dT[0]===0){for(var dX in dP)if(function(dY){return!dP.hasOwnProperty(dY)?false:!dO.hasOwnProperty(dY)&&(dT[0]=-1,true);}(dX))break;}dS=dT[0];}return dS;}}};U.Hash=function(dO){var dP;dP=typeof dO;return dP=="function"?0:dP=="boolean"?dO?1:0:dP=="number"?dO:dP=="string"?U.hashString(dO):dP=="object"?dO==null?0:dO instanceof a.Array?U.hashArray(dO):U.hashObject(dO):0;};U.compareArrays=function(dO,dP){var dQ,dR;if(_8.length(dO)<_8.length(dP))return -1;else if(_8.length(dO)>_8.length(dP))return 1;else{dQ=0;dR=0;while(dQ===0&&dR<_8.length(dO)){dQ=U.Compare(_8.get(dO,dR),_8.get(dP,dR));dR=dR+1;}return dQ;}};U.compareDates=function(dO,dP){return U.Compare(dO.getTime(),dP.getTime());};U.hashString=function(dO){var dP,dQ,dR;if(dO===null)return 0;else{dP=5381;for(dQ=0,dR=dO.length-1;dQ<=dR;dQ++)dP=U.hashMix(dP,dO[dQ].charCodeAt());return dP;}};U.hashArray=function(dO){var dP,dQ,dR;dP=-34948909;for(dQ=0,dR=_8.length(dO)-1;dQ<=dR;dQ++)dP=U.hashMix(dP,U.Hash(_8.get(dO,dQ)));return dP;};U.hashObject=function(dO){var dP,dQ;if("GetHashCode"in dO)return dO.GetHashCode();else{dP=[0];for(var dR in dO)if(function(dS){dP[0]=U.hashMix(U.hashMix(dP[0],U.hashString(dS)),U.Hash(dO[dS]));return false;}(dR))break;return dP[0];}};U.hashMix=function(dO,dP){return(dO<<5)+dO+dP;};V.$cctor=function(){var dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm;V.$cctor=a.ignore;function fn(fP){return b8.concat("\n",fP);}function fo(fP){return bF.splitByChar$1("\n",fP);}function fp(fP){var fQ,fR;return bH.array(fP,{$:1,$0:0},{$:1,$0:(fQ=0,(fR=_8.length(fP)-2,U.Compare(fQ,fR)===1?fQ:fR))});}function fq(fP){return b8.concat("\n",fP);}function fr(fP){return fP+"T00:00:00";}function fs(fP){var fQ;fQ=null;return eZ.TryGetValue(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}})?{$:1,$0:fQ}:null;}function ft(fP,fQ){eZ.set_Item(fP,fQ);return fQ;}function fu(fP,fQ){var fR;fR=fs(fP);return fR==null?ft(fP,fQ(fP)):fR.$0;}function fv(fP){var fQ;fQ=null;return e2.TryGetValue(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}})?{$:1,$0:fQ}:null;}function fw(fP,fQ){e2.set_Item(fP,fQ);return fQ;}function fx(fP,fQ){var fR;fR=fv(fP);return fR==null?fw(fP,fQ(fP)):fR.$0;}function fy(fP){var fQ;fQ=null;return e5.TryGetValue(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}})?{$:1,$0:fQ}:null;}function fz(fP,fQ){e5.set_Item(fP,fQ);return fQ;}function fA(fP,fQ){var fR;fR=fy(fP);return fR==null?fz(fP,fQ(fP)):fR.$0;}function fB(fP){var fQ;fQ=null;return e8.TryGetValue(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}})?{$:1,$0:fQ}:null;}function fC(fP,fQ){e8.set_Item(fP,fQ);return fQ;}function fD(fP,fQ){var fR;fR=fB(fP);return fR==null?fC(fP,fQ(fP)):fR.$0;}function fE(fP){var fQ;fQ=null;return e$.TryGetValue(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}})?{$:1,$0:fQ}:null;}function fF(fP,fQ){e$.set_Item(fP,fQ);return fQ;}function fG(fP,fQ){var fR;fR=fE(fP);return fR==null?fF(fP,fQ(fP)):fR.$0;}function fH(fP){var fQ;fQ=null;return fc.TryGetValue(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}})?{$:1,$0:fQ}:null;}function fI(fP,fQ){fc.set_Item(fP,fQ);return fQ;}function fJ(fP,fQ){var fR;fR=fH(fP);return fR==null?fI(fP,fQ(fP)):fR.$0;}function fK(fP){return M.snippetsLM().TryFindByKey(fP);}function fL(fP){return M.snippetsLM().TryFindByKey(fP);}function fM(fP){return bk.parseEntries("lytTarget",fP);}function fN(fP){return fP.$==1?{$:1,$0:fP.$0}:null;}function fO(fP){return b8.concat("\n",fP);}V.rtn=function(fP){return[fP];};V.result=new b4.New();V.result$1=b3.result();V.resultP=new b5.New();V.depend=new bG.New();V.rtn$1=by.rtn;V.depend$1=by.depend();V.resultM=new b7.New();V.asyncResultM=new _7.New();V.unindentStr=function(fP){return fn(bF.unindent$1(fP));};V.skipLastLine=(dO=function(fP){return fp(fo(fP));},function(fP){return fq(dO(fP));});V.parseDateO2=(dP=bd.tryParseWith$1(function(fP){var fQ,fR;fQ=0;return[(fR=cA.TryParse(fP),fR!=null&&fR.$==1&&(fQ=fR.$0,true)),fQ];}),function(fP){return dP(fr(fP));});V.parseDateO=bd.tryParseWith$1(function(fP){var fQ,fR;fQ=0;return[(fR=cA.TryParse(fP),fR!=null&&fR.$==1&&(fQ=fR.$0,true)),fQ];});V.parseIntO=bd.tryParseWith$1(function(fP){var fQ;fQ=0;return[P.TryParseInt32(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}}),fQ];});V.parseInt64O=bd.tryParseWith$1(function(fP){var fQ;fQ=0;return[P.TryParseInt64(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}}),fQ];});V.parseSingleO=bd.tryParseWith$1(function(fP){var fQ,fR;fQ=0;return[(fR=a.Number(fP),a.isNaN(fR)?false:(fQ=fR,true)),fQ];});V.parseDoubleO=bd.tryParseWith$1(function(fP){var fQ,fR;fQ=0;return[(fR=a.Number(fP),a.isNaN(fR)?false:(fQ=fR,true)),fQ];});V.parseGuidO=bd.tryParseWith$1(function(fP){var fQ;fQ=null;return[bx.TryParse(fP,{get:function(){return fQ;},set:function(fR){fQ=fR;}}),fQ];});V["|Date|_|"]=bd.parseDateO$1();V["|Int|_|"]=bd.parseIntO$1();V["|Int64|_|"]=bd.parseInt64O$1();V["|Single|_|"]=bd.parseSingleO$1();V["|Double|_|"]=bd.parseDoubleO$1();V["|Guid|_|"]=bd.parseGuidO$1();V.serString=[b9.toJsonString,function(fP){return fP.tryString();}];V.serFloat=[function(fP){return(function(fQ){return function(fR){return fQ(be.prettyPrint(fR));};}(a.id))(fP);},function(fP){return fP.tryFloat();}];V.serInt=[function(fP){return(function(fQ){return function(fR){return fQ(be.prettyPrint(fR));};}(a.id))(fP);},function(fP){var fQ;fQ=fP.tryInt();return fQ==null?null:{$:1,$0:T.toInt(fQ.$0)};}];V.serInt64=[a.String,function(fP){return fP.tryInt();}];V.serBool=[function(fP){return(function(fQ){return function(fR){return fQ(be.prettyPrint(fR));};}(a.id))(fP);},function(fP){return fP.tryBool();}];V.serDate=[function(fP){return a.String(a.id(fP));},function(fP){var fQ;fQ=fP.tryInt();return fQ==null?null:{$:1,$0:fQ.$0};}];V.serTypedRegisters=new bL.New$5();V.serGuid=(dQ=b9.serString(),b9.mapO(a.String,bd.parseGuidO$1(),dQ[0],dQ[1]));V.defaultSnippet=bN.New(bJ.Tag$4("00000000-0000-0000-0000-000000000000"),"","",null,new cx.New$1(null),[],(new dJ(0)).getTime());V.serSnippetId=(dR="SnippetId",[function(fP){var fQ;fQ=a.String(bJ.Untag$4(fP));return(((dH.Curried3(function(fR,fS,fT){return fR("{"+be.prettyPrint(fS)+" :"+be.prettyPrint(fT)+"}");}))(a.id))(dR))(fQ);},function(fP){var fQ,fR,fS,fT;fQ=(fR=(fS=fP.tryField(dR),fS==null?null:fS.$0.tryString()),(fT=bd.parseGuidO$1(),fR==null?null:fT(fR.$0)));return fQ==null?null:{$:1,$0:bJ.Tag$4(fQ.$0)};}]);V.serSnippet=(dS=[(dT=bY.serSnippetId(),b9.serField("snpId",function(fP){return fP.snpId;},function(fP,fQ){return bN.New(fP,fQ.snpName,fQ.snpContent,fQ.snpParentIdO,fQ.snpPredIds,fQ.snpProperties,fQ.snpModified);},dT[0],dT[1])),(dU=b9.serString(),b9.serField("snpName",function(fP){return fP.snpName;},function(fP,fQ){return bN.New(fQ.snpId,fP,fQ.snpContent,fQ.snpParentIdO,fQ.snpPredIds,fQ.snpProperties,fQ.snpModified);},dU[0],dU[1])),(dV=b9.serString(),b9.serField("snpContent",function(fP){return fP.snpContent;},function(fP,fQ){return bN.New(fQ.snpId,fQ.snpName,fP,fQ.snpParentIdO,fQ.snpPredIds,fQ.snpProperties,fQ.snpModified);},dV[0],dV[1])),(dW=(dX=bY.serSnippetId(),b9.serOpt(dX[0],dX[1])),b9.serField("snpParentIdO",function(fP){return fP.snpParentIdO;},function(fP,fQ){return bN.New(fQ.snpId,fQ.snpName,fQ.snpContent,fP,fQ.snpPredIds,fQ.snpProperties,fQ.snpModified);},dW[0],dW[1])),(dY=(dZ=bY.serSnippetId(),b9.serSet(dZ[0],dZ[1])),b9.serField("snpPredIds",function(fP){return fP.snpPredIds;},function(fP,fQ){return bN.New(fQ.snpId,fQ.snpName,fQ.snpContent,fQ.snpParentIdO,fP,fQ.snpProperties,fQ.snpModified);},dY[0],dY[1])),(d0=(d1=b9.serDup(b9.serString(),b9.serString()),b9.serArr(d1[0],d1[1])),b9.serField("snpProperties",function(fP){return fP.snpProperties;},function(fP,fQ){return bN.New(fQ.snpId,fQ.snpName,fQ.snpContent,fQ.snpParentIdO,fQ.snpPredIds,fP,fQ.snpModified);},d0[0],d0[1])),(d2=b9.serInt(),b9.serFieldO("snpGeneration",function(){return null;},function(fP,fQ){return fP!=null&&fP.$==1?bN.New(fQ.snpId,fQ.snpName,fQ.snpContent,fQ.snpParentIdO,fQ.snpPredIds,fQ.snpProperties,(new dJ(0)).getTime()+fP.$0*3600000):fQ;},d2[0],d2[1])),(d3=b9.serDate(),b9.serField("snpModified",function(fP){return fP.snpModified;},function(fP,fQ){return bN.New(fQ.snpId,fQ.snpName,fQ.snpContent,fQ.snpParentIdO,fQ.snpPredIds,fQ.snpProperties,fP);},d3[0],d3[1]))],(d4=b$.New("","",null),[function(fP){var fQ;function fR(fS,fT,fU){var fV,fW;fV=fT(fP);fW=((dH.Curried3(function(fX,fY,fZ){return fX(be.prettyPrint(fY)+": "+be.toSafe(fZ));}))(a.id))(fS);return fV==null?null:{$:1,$0:fW(fV.$0)};}fQ=b8.concat(", ",$.choose(function(fS){return fR(fS[0],fS[1],fS[2]);},dS));return(function(fS){return function(fT){return fS("{"+be.toSafe(fT)+"}");};}(a.id))(fQ);},function(fP){return{$:1,$0:$.fold(function(fQ,fR){var fS;fS=fP.tryField(fR[0]);return(fR[2](fQ))(fS);},d4,dS)};}]));V.serModel=(d5=[(d6=(d7=bY.serSnippet(),b9.serArr(d7[0],d7[1])),b9.serField("snippets",function(fP){return fP.snippets;},function(fP,fQ){return bZ.New(fP,fQ.modified,fQ.collapsed);},d6[0],d6[1])),(d8=b9.serInt(),b9.serFieldO("generation",function(){return null;},function(fP,fQ){return fP!=null&&fP.$==1?bZ.New(fQ.snippets,(new dJ(0)).getTime()+fP.$0*3600000,fQ.collapsed):fQ;},d8[0],d8[1])),(d9=b9.serDate(),b9.serField("modified",function(fP){return fP.modified;},function(fP,fQ){return bZ.New(fQ.snippets,fP,fQ.collapsed);},d9[0],d9[1])),(d_=(d$=bY.serSnippetId(),b9.serSet(d$[0],d$[1])),b9.serField("collapsed",function(fP){return fP.collapsed;},function(fP,fQ){return bZ.New(fQ.snippets,fQ.modified,fP);},d_[0],d_[1]))],(ea=bZ.New([],(new dJ(0)).getTime(),new cx.New$1(null)),[function(fP){var fQ;function fR(fS,fT,fU){var fV,fW;fV=fT(fP);fW=((dH.Curried3(function(fX,fY,fZ){return fX(be.prettyPrint(fY)+": "+be.toSafe(fZ));}))(a.id))(fS);return fV==null?null:{$:1,$0:fW(fV.$0)};}fQ=b8.concat(", ",$.choose(function(fS){return fR(fS[0],fS[1],fS[2]);},d5));return(function(fS){return function(fT){return fS("{"+be.toSafe(fT)+"}");};}(a.id))(fQ);},function(fP){return{$:1,$0:$.fold(function(fQ,fR){var fS;fS=fP.tryField(fR[0]);return(fR[2](fQ))(fS);},ea,d5)};}]));V.observers=bv.Empty;V.loader=(eb=null,cc.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cc.Bind(cc.FromContinuations(function(fP,fQ){return self.require(["vs/editor/editor.main"],fP,fQ);}),function(){return cc.Return(null);});}));V.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"  type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 150px) 150px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"100\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <div>Docs:</div>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Views:</div>\r\n                                                                <div ws-hole=\"Views\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValue\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <span class=\"input-group-addon\">${Value}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Queries:</div>\r\n                                                                <div ws-hole=\"Queries\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Vars:</div>\r\n                                                                <div ws-hole=\"Vars\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValueInput\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <textarea class=\"form-control\" id=\"\" placeholder=\"Value...\" ws-var=\"Value\" spellcheck=\"false\">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                        <div style=\"\r\n                                            overflow: hidden;\r\n                                            display: grid;\r\n                                            grid-template-columns: 100%;\r\n                                            grid-template-rows: repeat(15, calc(100% / 15));\r\n                                            bxackground-color: #eee;\r\n                                            box-sizing: border-box;\r\n                                            padding : 5px;\r\n                                            grid-gap: 5px;\r\n                                            margin-right: 21px;\r\n                                       \"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\"         ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\"          >${Name}</button>\r\n                                            <button ws-template=\"ActionDisabled\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" disabled >${Name}</button>\r\n                                        </div>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        xtextarea {\r\n                           resize : none;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";V.htmlD=by.dependByName("AppFrameworkTemplate.html",b1.html(),a.id);V.startWithHtmlD=(ec=by.depend(),ec.Delay(function(){return ec.Bind(v.htmlD(),function(fP){return ec.Return(function(){var fQ,fR,fS;fQ=self.document.createElement("div");self.document.body.appendChild(fQ);fQ.outerHTML=fP;fR=bg.getMainDoc().f();fS=self.document.body;cD.LoadLocalTemplates("");bq.RunAppend(fS,fR);});});}));V.unselectorV=new ck.New(S.Const(null),a.ignore);V.plugin=new y.New();V.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";V.a11V=_2.Create$1(11);V.mainX={$:0,$0:F.a11V().get_View()};V.textAtt=function(fP){return function(){return fP("textAtt not implemented");};}(T.FailWith);V.getDocFromReferenceD=by.dependByName("getDocFromReference",J.getDocFromReference,a.id);V.getTextActViewFromReferenceD=by.dependByName("getTextActViewFromReference",J.getTextActViewFromReference,a.id);V.getDocFromTextTypesD=(ed=by.depend(),ed.Delay(function(){return ed.Bind(J.getDocFromReferenceD(),function(fP){var fQ;function fR(fT){return fT.$==1?fP(fT.$0):bq.TextNode(fT.$0);}function fS(fT){var fU;return(fT.$==1?fT.$1.$==0?(fU=fT.$0,true):(fU=fT,false):(fU=fT,false))?fU:bq.Concat(fU);}return ed.Return((fQ=function(fT){return bu.map(fR,fT);},function(fT){return fS(fQ(fT));}));});}));V.extractDocD=(ee=by.depend(),ee.Delay(function(){return ee.Bind(J.getDocFromTextTypesD(),function(fP){return ee.Return(function(fQ){return fP(J.getTextData(fQ));});});}));V.getTextValFromSeqD=(ef=by.depend(),ef.Delay(function(){return ef.Bind(J.getTextActViewFromReferenceD(),function(fP){var fQ,fR,fS,fT;function fU(fY){return fY.$==1?S.Map(F.toViewString,fP(fY.$0)):S.Const(fY.$0);}function fV(fY){return b8.concat("",fY);}function fW(fY){return{$:0,$0:fY};}function fX(fY){return{$:0,$0:fY};}return ef.Return((fQ=(fR=function(fY){return br.traverseListApp(fU,fY);},(fS=(fT=S.Const(function(fY){return fW(fV(fY));}),function(fY){return S.Apply(fT,fY);}),function(fY){return fS(fR(fY));})),function(fY){return fX(fQ(fY));}));});}));V.getTextValFromTextTypesD=(eg=by.depend(),eg.Delay(function(){return eg.Bind(J.getTextActViewFromReferenceD(),function(fP){return eg.Bind(J.getTextValFromSeqD(),function(fQ){return eg.Return(function(fR){var fS;switch(fR.$==1?fR.$0.$==1?fR.$1.$==0?(fS=fR.$0.$0,1):(fS=fR,2):fR.$1.$==0?(fS=fR.$0.$0,0):(fS=fR,2):(fS=fR,2)){case 0:return{$:1,$0:{$:0,$0:fS}};case 1:return{$:0,$0:fP(fS)};case 2:return fQ(fS);}});});});}));V.getTextValD=bz.op_GreaterMultiplyGreater(J.getTextData,J.getTextValFromTextTypesD());V.extractAtsD=(eh=by.depend(),eh.Delay(function(){return eh.Bind(J.getTextValD(),function(fP){return eh.Return(function(fQ){return $.map(function(fR){var fS,fT,fU,fV;fS=b8.SplitChars(fR,[":"],0);return!U.Equals(fS,null)&&fS.length===2?(fT=_8.get(fS,1),F.valToStyle(_8.get(fS,0),fP(fT))):(fU=_8.map(b8.Trim,b8.SplitChars(fR,["="],0)),!U.Equals(fU,null)&&fU.length===2?(fV=_8.get(fU,1),F.valToAttr(_8.get(fU,0),fP(fV))):(function(fW){return function(fX){return fW("single reference attribute not implemented "+be.toSafe(fX));};}(T.FailWith))(fR));},$.filter(function(fR){return""!==fR;},$.map(b8.Trim,b8.SplitChars(fQ,[";"],0))));});});}));V.aV=_2.Create$1(4);V.pa=F.aV().get_View();V.pb=6.2;V.currentPlugInNameDef=bJ.Tag$3("NewLYx");V.currentPlugInNameD=by.dependByName("currentPlugInName",F.currentPlugInNameDef(),a.id);V.getDocD=(ei=by.depend(),ei.Delay(function(){return ei.Bind(F.currentPlugInNameD(),function(fP){return ei.Return(function(fQ){var fR,fS,fT;fR=(bg.splitName(bJ.Untag$3(fP)))(fQ);fS=fR[0];fT=fR[1];return bq.BindView(function(fU){var fV;function fW(){return(function(fX){return function(fY){return fX("Reference not found @{"+be.toSafe(fY)+"}");};}(a.id))(fQ);}fV=fU==null?null:{$:1,$0:bg.getLazyDoc(fU.$0)};return fV==null?bq.TextView(S.Map(function(fX){return fX==null?fW():fX.$0;},bg.tryGetWoWW(fS,fT))):fV.$0;},bg.tryGetDocW(fS,fT));});});}));V.getTextActViewD=(ej=by.depend(),ej.Delay(function(){return ej.Bind(F.currentPlugInNameD(),function(fP){return ej.Return(function(fQ){var fR,fS,fT;fR=(bg.splitName(bJ.Untag$3(fP)))(fQ);fS=fR[0];fT=fR[1];return S.Bind(function(fU){function fV(){return(function(fW){return function(fX){return fW("Text Reference not found @{"+be.toSafe(fX)+"}");};}(a.id))(fQ);}return fU==null?S.Map(function(fW){return{$:0,$0:fW};},S.Map(function(fW){return fW==null?fV():fW.$0;},bg.tryGetWoWW(fS,fT))):S.Const({$:1,$0:fU.$0});},bg.tryGetActW(fS,fT));});});}));V.extractDocD$1=J.extractDocD();V.extractAtsD$1=J.extractAtsD();V.extractAttD=(ek=bz.depend(),ek.Delay(function(){return ek.Bind(F.extractAtsD(),function(fP){return ek.Return(function(fQ){return bE.Concat(fP(fQ));});});}));V.name=_2.Create$1("World");V.enterName=(el=F.op_Dereference(F.checkName),(em={$:0,$0:F.name().get_View()},H.New(bz.op_BarGreaterGreater(el.r,function(fP){return G.New(fP,em);}))));V.now=(en=F.op_Dereference(function(){var fP;fP=new dJ(dJ.now());return fP.getFullYear()+"-"+("0"+(fP.getMonth()+1)).slice(-2)+"-"+("0"+fP.getDate()).slice(-2)+" "+("0"+fP.getHours()).slice(-2)+":"+("0"+fP.getMinutes()).slice(-2)+":"+("0"+fP.getSeconds()).slice(-2)+":"+("00"+fP.getMilliseconds()).slice(-3);}),(eo={$:0,$0:F.name().get_View()},H.New(bz.op_BarGreaterGreater(en.r,function(fP){return G.New(fP,eo);}))));V.sayHello=(ep=(eq=(er=F.op_Dereference(bq.Concat),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:[fP("Hello @{name}!")]};return H.New(bz.op_BarGreaterGreater(er.r,function(fR){return G.New(fR,fQ);}));},F.extractDocD())),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(I.textDoc(fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)}),fQ.p));},eq);},F.enterName().r)),(es=(et=F.op_Dereference(bq.Concat),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:[fP("How are you?")]};return H.New(bz.op_BarGreaterGreater(et.r,function(fR){return G.New(fR,fQ);}));},F.extractDocD())),(eu=(ev=F.op_Dereference(bq.Concat),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:[bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View())]};return H.New(bz.op_BarGreaterGreater(ev.r,function(fR){return G.New(fR,fQ);}));},ep.r)),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View()),fQ.p));},eu);},es.r))));V.aString=_2.Lens(F.aV(),a.String,function(fP,fQ){return T.toInt(a.Number(fQ));});V.main0=(ew=(ex=F.op_Dereference(function(fP){return function(fQ){return F.concat(fP,fQ);};}),(ey={$:0,$0:F.aV().get_View()},H.New(bz.op_BarGreaterGreater(ex.r,function(fP){return G.New(fP,ey);})))),(ez={$:1,$0:3.2},H.New(bz.op_BarGreaterGreater(ew.r,function(fP){return G.New(fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)},ez);}))));V.main1=(eA=(eB=F.op_Dereference((dH.Curried3(function(fP,fQ,fR){return fP("result = "+be.toSafe(fQ)+" "+be.toSafe(fR));}))(a.id)),F.bindWrap(function(fP){var fQ;fQ=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return H.New(bz.op_BarGreaterGreater(eB.r,function(fR){return G.New(fR,fQ);}));},F.main0().r)),(eC={$:1,$0:"main0"},H.New(bz.op_BarGreaterGreater(eA.r,function(fP){return G.New(fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)},eC);}))));V.main=(eD=(eE=(eF=(eG=(eH=(eI=(eJ=(eK=(eL=(eM=F.op_Dereference((dH.Curried3(bq.Element))("h3")),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:fP("color:@{name}; background:red; click=@{AppFramework.Hello}")};return H.New(bz.op_BarGreaterGreater(eM.r,function(fR){return G.New(fR,fQ);}));},F.extractAtsD())),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:[fP("MAIN:")]};return H.New(bz.op_BarGreaterGreater(eL.r,function(fR){return G.New(fR.f.$==0?fR.p.$==1?{$:0,$0:S.Apply(fR.f.$0,S.Const(fR.p.$0))}:{$:0,$0:S.Apply(fR.f.$0,fR.p.$0)}:fR.p.$==0?{$:0,$0:S.Apply(S.Const(fR.f.$0),fR.p.$0)}:{$:1,$0:fR.f.$0(fR.p.$0)},fQ);}));},F.extractDocD())),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(I.textDoc(fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)}),fQ.p));},eK);},F.main1().r)),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(I.textDoc(fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)}),fQ.p));},eJ);},F.main1().r)),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(fP(":"),fQ.p));},eI);},F.extractDocD())),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View()),fQ.p));},eH);},F.sayHello().r)),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(fP(":"),fQ.p));},eG);},F.extractDocD())),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(fP(" Más >> "),fQ.p));},eF);},F.extractDocD())),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View()),fQ.p));},eE);},F.sayHello().r)),F.bindWrap(function(fP){return F.unwrapBindWrap(function(fQ){return G.New(fQ.f,I.addDoc(fP(" <<"),fQ.p));},eD);},F.extractDocD()));V.main2=F.makeAViewDoc(function(){return bq.Element("h4",[bA.Dynamic("style",S.Map(function(fP){return"color:"+fP;},F.name().get_View()))],[bq.TextNode("MAIN2:"),bq.TextView(F.name().get_View())]);});V.appFwk=(eN=(eO=F.op_Dereference((dH.Curried3(bq.Element))("div")),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:fP("color:@{name}")};return H.New(bz.op_BarGreaterGreater(eO.r,function(fR){return G.New(fR,fQ);}));},F.extractAtsD())),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:[fP("@{AppFramework.AppFwkClient}")]};return H.New(bz.op_BarGreaterGreater(eN.r,function(fR){return G.New(fR.f.$==0?fR.p.$==1?{$:0,$0:S.Apply(fR.f.$0,S.Const(fR.p.$0))}:{$:0,$0:S.Apply(fR.f.$0,fR.p.$0)}:fR.p.$==0?{$:0,$0:S.Apply(S.Const(fR.f.$0),fR.p.$0)}:{$:1,$0:fR.f.$0(fR.p.$0)},fQ);}));},F.extractDocD()));V.split=(eP=(eQ=F.op_Dereference(dH.Curried(bk.variableSplitter,2,[false,0,50,100])),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View())};return H.New(bz.op_BarGreaterGreater(eQ.r,function(fR){return G.New(fR,fQ);}));},F.appFwk().r)),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View())};return H.New(bz.op_BarGreaterGreater(eP.r,function(fR){return G.New(fR.f.$==0?fR.p.$==1?{$:0,$0:S.Apply(fR.f.$0,S.Const(fR.p.$0))}:{$:0,$0:S.Apply(fR.f.$0,fR.p.$0)}:fR.p.$==0?{$:0,$0:S.Apply(S.Const(fR.f.$0),fR.p.$0)}:{$:1,$0:fR.f.$0(fR.p.$0)},fQ);}));},F.main().r));V.split2=(eR=(eS=F.op_Dereference(dH.Curried(bk.variableSplitter,2,[false,0,50,100])),F.bindWrap(function(fP){var fQ;fQ={$:1,$0:bq.BindView(function(){var fR;fR=fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)};return fR.$==0?bq.BindView(a.id,fR.$0):fR.$0;},bg.mainDocV().get_View())};return H.New(bz.op_BarGreaterGreater(eS.r,function(fR){return G.New(fR,fQ);}));},F.appFwk().r)),(eT={$:1,$0:F.main2()},H.New(bz.op_BarGreaterGreater(eR.r,function(fP){return G.New(fP.f.$==0?fP.p.$==1?{$:0,$0:S.Apply(fP.f.$0,S.Const(fP.p.$0))}:{$:0,$0:S.Apply(fP.f.$0,fP.p.$0)}:fP.p.$==0?{$:0,$0:S.Apply(S.Const(fP.f.$0),fP.p.$0)}:{$:1,$0:fP.f.$0(fP.p.$0)},eT);}))));V.pName=bJ.Tag$3("NewLY");bg.addPlugIn((eU=bg.plugin(),eU.AddDoc(eU.AddDoc(eU.AddDoc(eU.AddDoc(eU.AddDoc(eU.AddDoc(eU.AddVar(eU.AddVar(eU.Name(eU.Yield(),bJ.Untag$3(F.pName())),"name",F.name()),"a",F.aString()),"split",bj.Create(function(){var fP;fP=F.split();return F.callDocPFn(F.pName(),fP);})),"split2",bj.Create(function(){var fP;fP=F.split2();return F.callDocPFn(F.pName(),fP);})),"main",bj.Create(function(){var fP;fP=F.main();return F.callDocPFn(F.pName(),fP);})),"main2",bj.Create(F.main2)),"sayHello",bj.Create(function(){var fP;fP=F.sayHello();return F.callDocPFn(F.pName(),fP);})),"sayHello2",bj.Create(function(){var fP;fP=F.sayHello();return F.callDocPFn(F.pName(),fP);}))));V.attrValToAttrD=(eV=by.depend(),eV.Delay(function(){return eV.Bind(J.getTextValFromTextTypesD(),function(fP){return eV.Bind(J.getTextValD(),function(){function fQ(fS){var fT,fU,fV;return(fS.$==2?(fT=[fS.$0,F.ActRVs(fS.$1)],false):fS.$==1?(fT=[fS.$0,fS.$1],false):true)?(fU=fS.$0,[fS.$1,function(fW){return F.valToStyle(fU,fW);}]):(fV=fT[0],[fT[1],function(fW){return F.valToAttr(fV,fW);}]);}function fR(fS,fT){return fT(fP(bu.map(F.textValToTextType,fS)));}return eV.Return(function(fS){return fR.apply(null,fQ(fS));});});});}));V.nodeRefToDocD=(eW=by.depend(),eW.Delay(function(){return eW.Bind(J.getDocFromTextTypesD(),function(fP){return eW.Return(function(fQ){var fR;return(fQ.$==1?(fR=fQ.$0.$0,false):fQ.$==2?(fR=fQ.$0.$0,false):fQ.$==3?(fR=fQ.$0.$0,false):true)?fP(bu.map(F.textValToTextType,fQ.$0)):fP(bu.ofArray([F.itemRefToTextType(fR)]));});});}));V.varRefToVarD=(eX=by.depend(),eX.Delay(function(){return eX.Bind(F.currentPlugInNameD(),function(fP){return eX.Return(function(fQ){var fR,fS,fT,fU,fV;fR=F.itemRefToTextType(fQ.$0);fR.$==1?fS=fR.$0:fS=fR.$0;fT=(bg.splitName(bJ.Untag$3(fP)))(fS);fU=(fV=bg.tryGetVar(fT[0],fT[1]),fV==null?null:{$:1,$0:fV.$0.varVar});return fU==null?(function(fW){return function(fX){return fW("Could not find var "+be.toSafe(fX));};}(T.FailWith))(fS):fU.$0;});});}));V.defVarM=(eY=(eZ=new bL.New$5(),[[fs,function(fP){return function(fQ){return fu(fP,fQ);};}],function(){eZ.Clear();}]),(e0=eY[0][1],[function(fP){return(e0(fP))(function(fQ){return F.defVar(fQ[0],fQ[1],fQ[2]);});},eY[1]]))[0];V.defButtonM=(e1=(e2=new bL.New$5(),[[fv,function(fP){return function(fQ){return fx(fP,fQ);};}],function(){e2.Clear();}]),(e3=e1[0][1],[function(fP){return(e3(fP))(function(fQ){return F.defButton(fQ[0],fQ[1],fQ[2],fQ[3],fQ[4]);});},e1[1]]))[0];V.defInputM=(e4=(e5=new bL.New$5(),[[fy,function(fP){return function(fQ){return fA(fP,fQ);};}],function(){e5.Clear();}]),(e6=e4[0][1],[function(fP){return(e6(fP))(function(fQ){return F.defInput(fQ[0],fQ[1],fQ[2],fQ[3]);});},e4[1]]))[0];V.defTextAreaM=(e7=(e8=new bL.New$5(),[[fB,function(fP){return function(fQ){return fD(fP,fQ);};}],function(){e8.Clear();}]),(e9=e7[0][1],[function(fP){return(e9(fP))(function(fQ){return F.defTextArea(fQ[0],fQ[1],fQ[2],fQ[3]);});},e7[1]]))[0];V.defElementM=(e_=(e$=new bL.New$5(),[[fE,function(fP){return function(fQ){return fG(fP,fQ);};}],function(){e$.Clear();}]),(fa=e_[0][1],[function(fP){return(fa(fP))(function(fQ){return F.defElement(fQ[0],fQ[1],fQ[2],fQ[3],fQ[4]);});},e_[1]]))[0];V.defConcatM=(fb=(fc=new bL.New$5(),[[fH,function(fP){return function(fQ){return fJ(fP,fQ);};}],function(){fc.Clear();}]),(fd=fb[0][1],[function(fP){return(fd(fP))(function(fQ){return F.defConcat(fQ[0],fQ[1],fQ[2]);});},fb[1]]))[0];V.drag=L.DragNone;V.TemplateFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\website\\Templates.html";V.snippetsLM=bi.Create(function(fP){return fP.snpId;},bv.Empty);V.collapsedV=_2.Create$1(new cx.New$1(null));V.codeSnippetIdV=_2.Create$1(null);V.searchFor=_2.Create$1("");V.allPredecessors=function(fP){return b$.allPredecessors(fK,fP);};V.indPredIds=function(fP){return b$.indirectPredecessorIds(fL,fP[0],fP[1],fP[2]);};V.allCodePredsW=S.Map(function(fP){var fQ,fR;return fP!=null&&fP.$==1?(fQ=fP.$0,(fR=M.snippetsLM().TryFindByKey(fQ),fR!=null&&fR.$==1?(M.allPredecessors())(fR.$0):new cx.New$1(null))):new cx.New$1(null);},M.codeSnippetIdV().get_View());V.allCodePredIdsW=S.Map(function(fP){return $.map(function(fQ){return fQ.snpId;},fP);},M.allCodePredsW());V.shdDef=N.New(0,0,false,true,[],null);V.snpIdParentsW=(fe=S.Map(function(fP){return _8.ofSeq($.map(function(fQ){return[fQ.snpId,fQ.snpParentIdO];},fP));},M.snippetsLM().v),(ff=[_2.Create$1(null)],(S.Sink(function(fP){if(!U.Equals(ff[0].Get(),fP))ff[0].Set(fP);},fe),ff[0].get_View())));V.processHierW=(fg=S.get_Do(),S.Bind(function(fP){return S.Bind(function(fQ){return S.Const(M.processHier(fP,fQ));},M.collapsedV().get_View());},M.snpIdParentsW()));V.search=(fh=S.get_Do(),S.Bind(function(fP){function fQ(fR){var fS,fT,fU;fS=(fT=(fU=fR.snpId,function(fV){var fW;fW=null;return fV.TryGetValue(fU,{get:function(){return fW;},set:function(fX){fW=fX;}})?{$:1,$0:fW}:null;}(fP)),fT==null?null:{$:1,$0:fT.$0.visible});return fS==null||fS.$0;}return S.Bind(function(fR){return fR===""?S.Const(fQ):S.Bind(function(fS){return S.Bind(function(fT){return fR==="."?S.Const(function(fU){return(U.Equals(fT,{$:1,$0:fU.snpId})||$.contains(fU.snpId,fS))&&fQ(fU);}):S.Const(function(fU){return fU.snpName.indexOf(fR)!=-1||fU.snpContent.indexOf(fR)!=-1;});},M.codeSnippetIdV().get_View());},M.allCodePredIdsW());},M.searchFor().get_View());},M.processHierW()));V.snippetList=C.getDocFor(M.snippetsLM(),b$.defaultSnippet(),function(){return b$.New("","",null);},{$:1,$0:M.search()},function(fP){return M.calcUI(M.wrapNothing,true,fP);});S.Sink(function(fP){var fQ;if(fP!=null&&fP.$==1){fQ=fP.$0;S.Get(function(fR){if(!U.Equals(M.codeSnippetIdV().Get(),{$:1,$0:fQ}))if(!$.contains(fQ,fR))M.codeSnippetIdV().Set({$:1,$0:fQ});},M.allCodePredIdsW());}},M.snippetList().selV.get_View());V.currentSnippetV=_2.Lens(M.snippetList().get_CurrentV(),a.id,function(fP,fQ){return fQ;});V.currentSnippetNameV=_2.Lens(M.currentSnippetV(),function(fP){return fP.snpName;},function(fP,fQ){return bN.New(fP.snpId,fQ,fP.snpContent,fP.snpParentIdO,fP.snpPredIds,fP.snpProperties,fP.snpModified);});V.currentSnippetContentV=_2.Lens(M.currentSnippetV(),function(fP){return fP.snpContent;},function(fP,fQ){return bN.New(fP.snpId,fP.snpName,fQ,fP.snpParentIdO,fP.snpPredIds,fP.snpProperties,fP.snpModified);});V.curSnp=(fi=x.plugin(),fi.AddVar(fi.AddVar(fi.Yield(),"name",M.currentSnippetNameV()),"content",M.currentSnippetContentV()));V.monaco=(fj=M.monacoNew(_2.Lens(M.currentSnippetV(),function(fP){return fP.snpContent;},function(fP,fQ){return bN.New(fP.snpId,fP.snpName,fQ,fP.snpParentIdO,fP.snpPredIds,fP.snpProperties,fP.snpModified);})),_.New(fj["var"],fj.disabled,S.Const([]),fj.onChange,fj.onRender,null,null,null,fj.editorO,fj.editorHook));V.parseW=S.Map((fk=(fl=function(fP){return $.choose(fN,fP);},function(fP){return fl(fM(fP));}),function(fP){return fO(fk(fP));}),M.currentSnippetContentV().get_View());x.addPlugIn2((fm=bg.plugin(),fm.AddAct(fm.AddAct(fm.AddAct(fm.AddAct(fm.AddAct(fm.AddAct(fm.AddAct(fm.Merge(fm.Merge(fm.AddDoc(fm.AddViw(fm.AddVar(fm.Name(fm.Yield(),"Snippets"),"searchFor",M.searchFor()),"parseOut",M.parseW()),"editor",bj.Create(function(){return bq.Element("div",[],[_1.generateDoc(M.monaco())]);})),"snippets_",M.snippetList().PlugIn(M.selectorLensGuidId)),"curSnp_",M.curSnp()),"LoadSnippets",function(){O.loadTextFile(self.document.getElementById("LoadSnippets").firstElementChild.firstElementChild.firstElementChild.firstElementChild);}),"SaveSnippets",function(){O.saveAs();}),"IndentIn",function(){M.indentIn();}),"IndentOut",function(){M.indentOut();}),"AddSnippet",function(){M.addSnippet();}),"DeleteSnippet",function(){M.deleteSnippet();}),"ParseNewLY",function(){M.parseNewLY();})));A.addLayout0(bk.newLyt("lytTarget","\r\n            main horizontal 10-50-70 part1 part2\r\n            \r\n            part1 div \"\" \r\n            : h1 \"\" \"Demo123 \" message\r\n            :: div \"\" \"Message:\"\r\n            :: textarea message \"height:200px;width:500px\"\r\n            \r\n            part2 div \"\" lytTarget.Layout\r\n            \r\n            message Var \"Hello\"     \r\n                "));A.addLayout0(bk.newLyt("SnippetsLyt","\r\n                    split horizontal 0-50-100 AppFramework.AppFwkClient main\r\n                    main vertical 0-25-100 list snippet\r\n                    SearchFor   Doc InputLabel \"\" \"Search\" Snippets.searchFor\r\n                    File        Doc InputFile  \"id=LoadSnippets\" \"Open File\" Snippets.LoadSnippets \"\"\r\n                    list div \"display: flex;flex-direction: column\" File\r\n                    : button \"click=@{Snippets.AddSnippet}\"    \"Add New Snippet\"\r\n                    : button \"click=@{Snippets.DeleteSnippet}\" \"Delete Snippet\"\r\n                    : button \"click=@{Snippets.IndentIn}\"      \"Indent in\"\r\n                    : button \"click=@{Snippets.IndentOut}\"     \"Indent out\"\r\n                    : div    \"\" SearchFor \r\n                    : div \"overflow:auto;width:100%;max-width:100%\" Snippets.snippets_list\r\n                    snippet div \"display: flex;flex-direction: column\"\r\n                    : div    \"\" Snippets.snippets_sel\r\n                    : Doc    InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n                    : div \"height:100%;class=relative\" Snippets.editor                \r\n                "));A.addLayout0(bk.newLyt("lytDemo","\r\n            SetTarget Action AppFramework.SetVar     \"lytTarget.Layout\"         \"@{target}\" \r\n            SetMain2  Action AppFramework.SetVar     \"AppFramework.mainDocV\"    \"lytDemo.main2\"\r\n            SetMain   Action AppFramework.SetVar     \"AppFramework.mainDocV\"    \"lytDemo.main\"\r\n            \r\n            main2 vertical 0-50-100 Left2 lytTarget.main            \r\n            Left2 vertical 0-25-100 list snippet\r\n            gotoMain  button \"click=@{SetMain};width:16px\" \"<<\"\r\n            \r\n            main vertical 0-50-100 Left lytTarget.main\r\n            Left div \"display:flex;flex-direction:column\" gotoMain2 snippet\r\n            gotoMain2 button \"click=@{SetMain2};width:16px\" \">>\"\r\n            \r\n            list div \"display: flex;flex-direction: column\" gotoMain File\r\n            : div    \"margin:5px\" SearchFor \r\n            : Concat buttons\r\n            : div \"overflow:auto;width:100%;max-width:calc(100% - 10px)\" Snippets.snippets_list\r\n            : ul \"margin:3px\"\r\n            :: button \"click=@{Snippets.AddSnippet}   ;title=Add New Snippet\" \"+\"\r\n            :: button \"margin-left:20px;click=@{Snippets.DeleteSnippet};title=Delete  Snippet\" \"x\"\r\n            \r\n            snippet div \"display: flex;flex-direction: column;flex:1\" Trigger\r\n            : button \"click=@{SetTarget}\"  \"Apply\"\r\n            : button \"click=@{Snippets.ParseNewLY}\" \"Apply NewLY\"\r\n            : div    \"click=@{SetTarget}\" Snippets.snippets_sel\r\n            : Doc    InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n            : div \"height:100%;class=relative;flex:1\" Snippets.editor            \r\n            : textarea   Snippets.parseOut \"height:7em\"\r\n            \r\n            buttons ul \"\"\r\n            : div \"margin:3px\"\r\n            :: button \"click=@{Snippets.IndentOut};title=indent out\"     \"<--\"\r\n            :: button \"click=@{Snippets.IndentIn};title=indent in\"       \"--> \"\r\n            \r\n            SearchFor   Doc InputLabel \"\" \"Search\" Snippets.searchFor\r\n            \r\n            File span \"class=input-group;margin:5px;id=LoadSnippets\"\r\n            : div \"class=input-group-btn\"\r\n            :: label \"class=btn btn-info\" \"Load File\"\r\n            ::: div \"\"\r\n            :::: input \"class=form-control;type=file;display: none;change=@{Snippets.LoadSnippets}\" \r\n            :: label \"class=btn btn-primary;click=@{Snippets.SaveSnippets}\" \"Save File\"\r\n            \r\n            Trigger   Doc    AppFramework.TrigAction Snippets.snippets_sel lytDemo.SetTarget\r\n            target    View \"n => n.includes('main ')?n:'main Contact \"\" \"\"'\" Snippets.curSnp_content\r\n                "));};X.addResizeObserver$1=function(dO,dP){var dQ,dR,dS,dT;try{dQ=!(!a.ResizeObserver);}catch(dU){dQ=false;}if(dQ){dR=new a.ResizeObserver(dO);X.set_observers$1(new bv({$:1,$0:dR,$1:X.observers$1()}));dR.observe(dP);}else{dS=X.dimsChanged$1(dP);cc.Start((dT=null,cc.Delay(function(){return cc.While(function(){return dP.isConnected;},cc.Delay(function(){return cc.Bind(cc.Sleep(110),function(){return dS()?(dO(),cc.Zero()):cc.Zero();});}));})),null);}};X.set_observers$1=function(dO){V.$cctor();V.observers=dO;};X.observers$1=function(){V.$cctor();return V.observers;};X.dimsChanged$1=function(dO){var dP;dP=[dO.getBoundingClientRect()];return function(){var dQ;dQ=dO.getBoundingClientRect();return U.Equals(X.domRect2Tuple$1(dP[0]),X.domRect2Tuple$1(dQ))?false:(dP[0]=dQ,true);};};X.domRect2Tuple$1=function(dO){return[dO.top,dO.left,dO.width,dO.height];};_0.iter=function(dO){function dP(dR){return dR==null?null:{$:1,$0:dO(dR.$0)};}function dQ(dR){if(dR==null);}return function(dR){return dQ(dP(dR));};};_1.bindVarEditor=function(dO,dP,dQ,dR,dS){var dT,dU;dT=[0];dU=[0];dO(function(){var dV;dV=dP();!U.Equals(dS.Get(),dV)?(dT[0]=dT[0]+1,dS.Set(dV),dR(dV)):void 0;});S.Sink(function(){if(dT[0]>dU[0])dU[0]=dT[0];else if(!U.Equals(dP(),dS.Get()))dQ(dS.Get());},dS.get_View());};_1.newVar=function(dO,dP){return _.New(dP,S.Const(false),S.Const([]),null,a.ignore,null,null,null,null,dO);};_1.onRender=function(dO,dP){return _.New(dP["var"],dP.disabled,dP.annotations,dP.onChange,dO,dP.autoCompletion,dP.toolTip,dP.declaration,dP.editorO,dP.editorHook);};_1.generateDoc=function(dO){var dP,dQ,dR;dP=(dQ=(dR=dO.onChange,dR==null?null:{$:1,$0:dR.$0(dO)}),dQ==null?a.ignore:dQ.$0);return(dO.editorHook.generateDoc(dO))(function(dS){dO.editorO={$:1,$0:dS};_1.bindVarEditor(dO.editorHook.hookOnChange,dO.editorHook.getValue,dO.editorHook.setValue,dP,dO["var"]);S.Sink(dO.editorHook.showAnnotations,dO.annotations);S.Sink(dO.editorHook.setDisabled,dO.disabled);dO.onRender(dO);});};_2=Q.Var$1=dH.Class({},m,_2);_2.Create$1=function(dO){return new cd.New(false,b2.New({$:2,$0:dO,$1:[]}),dO);};_2.Lens=function(dO,dP,dQ){var dR,dS,dT;dR=cf.Id();dS=S.Map(dP,dO.get_View());dT=new R({Get:function(){return dP(dO.Get());},Set:function(dU){return dO.Update(function(dV){return dQ(dV,dU);});},SetFinal:function(dU){return this.Set(dU);},Update:function(dU){return dO.Update(function(dV){return dQ(dV,dU(dP(dV)));});},UpdateMaybe:function(dU){return dO.UpdateMaybe(function(dV){var dW;dW=dU(dP(dV));return dW==null?null:{$:1,$0:dQ(dV,dW.$0)};});},get_View:function(){return dS;},get_Id:function(){return dR;}});R.New.call(dT);return dT;};_2.Set=function(dO,dP){dO.Set(dP);};_3.toArray=function(dO){return dO==null?[]:[dO.$0];};_4.New=function(dO,dP){return{line:dO,col:dP};};_5.asyncResultM=function(){V.$cctor();return V.asyncResultM;};_5["AsyncResultMBuilder.Bind"]=function(dO,dP,dQ){function dR(dS){return cc.Return(dS);}return _6.bind(dQ,cc.Bind(dP,function(dS){return dR(Z.OkM$1(dS));}));};_7=_6.AsyncResultMBuilder=dH.Class({Run:function(dO){return _6.bind(dO,_6.rtn());},Delay:a.id,Return:function(dO){return _6.rtn(dO);}},m,_7);_7.New=dH.Ctor(function(){m.New.call(this);},_7);_8.map=function(dO,dP){var dQ,dR,dS;dQ=new a.Array(dP.length);for(dR=0,dS=dP.length-1;dR<=dS;dR++)dQ[dR]=dO(dP[dR]);return dQ;};_8.splitAt=function(dO,dP){return[_8.take(dO,dP),_8.skip(dO,dP)];};_8.findIndex=function(dO,dP){var dQ;dQ=_8.tryFindIndex(dO,dP);return dQ==null?T.FailWith("KeyNotFoundException"):dQ.$0;};_8.concat=function(dO){return a.Array.prototype.concat.apply([],_8.ofSeq(dO));};_8.tryItem=function(dO,dP){return dP.length<=dO||dO<0?null:{$:1,$0:dP[dO]};};_8.ofSeq=function(dO){var dP,dQ;if(dO instanceof a.Array)return dO.slice();else if(dO instanceof bv)return _8.ofList(dO);else{dP=[];dQ=ci.Get(dO);try{while(dQ.MoveNext())dP.push(dQ.Current());return dP;}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}}};_8.tryFindIndex=function(dO,dP){var dQ,dR;dQ=null;dR=0;while(dR<dP.length&&dQ==null){dO(dP[dR])?dQ={$:1,$0:dR}:void 0;dR=dR+1;}return dQ;};_8.exists=function(dO,dP){var dQ,dR,dS,dT;dQ=false;dR=0;dT=_8.length(dP);while(!dQ&&dR<dT)if(dO(dP[dR]))dQ=true;else dR=dR+1;return dQ;};_8.filter=function(dO,dP){var dQ,dR,dS;dQ=[];for(dR=0,dS=dP.length-1;dR<=dS;dR++)if(dO(dP[dR]))dQ.push(dP[dR]);return dQ;};_8.take=function(dO,dP){return dO<0?$.nonNegative():dO>dP.length?$.insufficient():dP.slice(0,dO);};_8.skip=function(dO,dP){return dO<0?$.nonNegative():dO>dP.length?$.insufficient():dP.slice(dO);};_8.tryFind=function(dO,dP){var dQ,dR;dQ=null;dR=0;while(dR<dP.length&&dQ==null){dO(dP[dR])?dQ={$:1,$0:dP[dR]}:void 0;dR=dR+1;}return dQ;};_8.choose=function(dO,dP){var dQ,dR,dS,dT;dQ=[];for(dR=0,dS=dP.length-1;dR<=dS;dR++){dT=dO(dP[dR]);dT==null?void 0:dQ.push(dT.$0);}return dQ;};_8.ofList=function(dO){var dP,dQ;dQ=[];dP=dO;while(!(dP.$==0)){dQ.push(bu.head(dP));dP=bu.tail(dP);}return dQ;};_8.tryPick=function(dO,dP){var dQ,dR,dS;dQ=null;dR=0;while(dR<dP.length&&dQ==null){dS=dO(dP[dR]);dS!=null&&dS.$==1?dQ=dS:void 0;dR=dR+1;}return dQ;};_8.foldBack=function(dO,dP,dQ){var dR,dS,dT,dU,dV;dR=dQ;dT=dP.length;for(dU=1,dV=dT;dU<=dV;dU++)dR=dO(dP[dT-dU],dR);return dR;};_8.pick=function(dO,dP){var dQ;dQ=_8.tryPick(dO,dP);return dQ==null?T.FailWith("KeyNotFoundException"):dQ.$0;};_8.sortInPlace=function(dO){_8.mapInPlace(function(dP){return dP[0];},_8.mapiInPlace(function(dP,dQ){return[dQ,dP];},dO).sort(U.Compare));};_8.find=function(dO,dP){var dQ;dQ=_8.tryFind(dO,dP);return dQ==null?T.FailWith("KeyNotFoundException"):dQ.$0;};_8.create=function(dO,dP){var dQ,dR,dS;dQ=new a.Array(dO);for(dR=0,dS=dO-1;dR<=dS;dR++)dQ[dR]=dP;return dQ;};_8.iter=function(dO,dP){var dQ,dR;for(dQ=0,dR=dP.length-1;dQ<=dR;dQ++)dO(dP[dQ]);};_8.sortInPlaceBy=function(dO,dP){_8.mapInPlace(function(dQ){return dQ[0];},_8.mapiInPlace(function(dQ,dR){return[dR,[dO(dR),dQ]];},dP).sort(function(dQ,dR){return U.Compare(dQ[1],dR[1]);}));};_8.forall=function(dO,dP){var dQ,dR,dS,dT;dQ=true;dR=0;dT=_8.length(dP);while(dQ&&dR<dT)if(dO(dP[dR]))dR=dR+1;else dQ=false;return dQ;};_8.init=function(dO,dP){var dQ,dR,dS;dO<0?T.FailWith("Negative size given."):null;dQ=new a.Array(dO);for(dR=0,dS=dO-1;dR<=dS;dR++)dQ[dR]=dP(dR);return dQ;};_9.ofAsyncResultM=function(dO){return new a.Promise(function(dP,dQ){cc.StartWithContinuations(dO,function(dR){var dS;dS=Z.OkM(dR);dS.$==1?dQ(ch.summarized(dS.$0)):dP(dS.$0[0]);},function(dR){dQ(dR);},function(dR){dQ(dR);},null);});};_.New=function(dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX){return{"var":dO,disabled:dP,annotations:dQ,onChange:dR,onRender:dS,autoCompletion:dT,toolTip:dU,declaration:dV,editorO:dW,editorHook:dX};};$.map=function(dO,dP){return{GetEnumerator:function(){var dQ;dQ=ci.Get(dP);return new cj.New(null,null,function(dR){return dQ.MoveNext()&&(dR.c=dO(dQ.Current()),true);},function(){dQ.Dispose();});}};};$.choose=function(dO,dP){return $.collect(function(dQ){var dR;dR=dO(dQ);return dR==null?bv.Empty:bu.ofArray([dR.$0]);},dP);};$.iter=function(dO,dP){var dQ;dQ=ci.Get(dP);try{while(dQ.MoveNext())dO(dQ.Current());}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}};$.append=function(dO,dP){return{GetEnumerator:function(){var dQ,dR;dQ=ci.Get(dO);dR=[true];return new cj.New(dQ,null,function(dS){var dT;return dS.s.MoveNext()?(dS.c=dS.s.Current(),true):(dT=dS.s,!U.Equals(dT,null)?dT.Dispose():void 0,dS.s=null,dR[0]&&(dR[0]=false,dS.s=ci.Get(dP),dS.s.MoveNext()?(dS.c=dS.s.Current(),true):(dS.s.Dispose(),dS.s=null,false)));},function(dS){var dT;dT=dS.s;!U.Equals(dT,null)?dT.Dispose():void 0;});}};};$.filter=function(dO,dP){return{GetEnumerator:function(){var dQ;dQ=ci.Get(dP);return new cj.New(null,null,function(dR){var dS,dT,dU;dS=dQ.MoveNext();dT=dQ.Current();dU=false;while(dS)if(dO(dT)){dR.c=dT;dU=true;dS=false;}else if(dQ.MoveNext())dT=dQ.Current();else dS=false;return dU;},function(){dQ.Dispose();});}};};$.collect=function(dO,dP){return $.concat($.map(dO,dP));};$.indexed=function(dO){return $.mapi(function(dP,dQ){return[dP,dQ];},dO);};$.tryFind=function(dO,dP){var dQ,dR,dS;dQ=ci.Get(dP);try{dR=null;while(dR==null&&dQ.MoveNext()){dS=dQ.Current();dO(dS)?dR={$:1,$0:dS}:void 0;}return dR;}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}};$.fold=function(dO,dP,dQ){var dR,dS;dR=dP;dS=ci.Get(dQ);try{while(dS.MoveNext())dR=dO(dR,dS.Current());return dR;}finally{if(typeof dS=="object"&&"Dispose"in dS)dS.Dispose();}};$.delay=function(dO){return{GetEnumerator:function(){return ci.Get(dO());}};};$.concat=function(dO){return{GetEnumerator:function(){var dP;dP=ci.Get(dO);return new cj.New(null,null,function(dQ){var dR;while(true){dR=dQ.s;if(U.Equals(dR,null)){if(dP.MoveNext()){dQ.s=ci.Get(dP.Current());dQ=dQ;}else{dP.Dispose();return false;}}else if(dR.MoveNext()){dQ.c=dR.Current();return true;}else{dQ.Dispose();dQ.s=null;dQ=dQ;}}},function(dQ){var dR;dR=dQ.s;!U.Equals(dR,null)?dR.Dispose():void 0;!U.Equals(dP,null)?dP.Dispose():void 0;});}};};$.mapi=function(dO,dP){return $.map2(dO,$.initInfinite(a.id),dP);};$.nth=function(dO,dP){var dQ,dR;if(dO<0)T.FailWith("negative index requested");dQ=-1;dR=ci.Get(dP);try{while(dQ<dO){!dR.MoveNext()?$.insufficient():void 0;dQ=dQ+1;}return dR.Current();}finally{if(typeof dR=="object"&&"Dispose"in dR)dR.Dispose();}};$.tryFindIndex=function(dO,dP){var dQ,dR,dS;dQ=ci.Get(dP);try{dR=true;dS=0;while(dR&&dQ.MoveNext())if(dO(dQ.Current()))dR=false;else dS=dS+1;return dR?null:{$:1,$0:dS};}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}};$.head=function(dO){var dP;dP=ci.Get(dO);try{return dP.MoveNext()?dP.Current():$.insufficient();}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}};$.cache=function(dO){var dP,dQ;dP=[];dQ=[ci.Get(dO)];return{GetEnumerator:function(){return new cj.New(0,null,function(dR){var dS;return dR.s<dP.length?(dR.c=dP[dR.s],dR.s=dR.s+1,true):(dS=dQ[0],U.Equals(dS,null)?false:dS.MoveNext()?(dR.s=dR.s+1,dR.c=dS.Current(),dP.push(dR.c),true):(dS.Dispose(),dQ[0]=null,false));},void 0);}};};$.groupBy=function(dO,dP){return $.delay(function(){return _8.groupBy(dO,_8.ofSeq(dP));});};$.map2=function(dO,dP,dQ){return{GetEnumerator:function(){var dR,dS;dR=ci.Get(dP);dS=ci.Get(dQ);return new cj.New(null,null,function(dT){return dR.MoveNext()&&dS.MoveNext()&&(dT.c=dO(dR.Current(),dS.Current()),true);},function(){dR.Dispose();dS.Dispose();});}};};$.initInfinite=function(dO){return{GetEnumerator:function(){return new cj.New(0,null,function(dP){dP.c=dO(dP.s);dP.s=dP.s+1;return true;},void 0);}};};$.init=function(dO,dP){return $.take(dO,$.initInfinite(dP));};$.pairwise=function(dO){return $.map(function(dP){return[_8.get(dP,0),_8.get(dP,1)];},$.windowed(2,dO));};$.isEmpty=function(dO){var dP;dP=ci.Get(dO);try{return!dP.MoveNext();}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}};$.distinctBy=function(dO,dP){return{GetEnumerator:function(){var dQ,dR;dQ=ci.Get(dP);dR=new cy.New$3();return new cj.New(null,null,function(dS){var dT,dU;if(dQ.MoveNext()){dT=dQ.Current();dU=dR.Add(dO(dT));while(!dU&&dQ.MoveNext()){dT=dQ.Current();dU=dR.Add(dO(dT));}return dU&&(dS.c=dT,true);}else return false;},function(){dQ.Dispose();});}};};$.forall2=function(dO,dP,dQ){return!$.exists2(function(dR,dS){return!dO(dR,dS);},dP,dQ);};$.take=function(dO,dP){dO<0?$.nonNegative():void 0;return{GetEnumerator:function(){var dQ;dQ=[ci.Get(dP)];return new cj.New(0,null,function(dR){var dS;dR.s=dR.s+1;return dR.s>dO?false:(dS=dQ[0],U.Equals(dS,null)?$.insufficient():dS.MoveNext()?(dR.c=dS.Current(),dR.s===dO?(dS.Dispose(),dQ[0]=null):void 0,true):(dS.Dispose(),dQ[0]=null,$.insufficient()));},function(){var dR;dR=dQ[0];!U.Equals(dR,null)?dR.Dispose():void 0;});}};};$.distinct=function(dO){return $.distinctBy(a.id,dO);};$.tryPick=function(dO,dP){var dQ,dR;dQ=ci.Get(dP);try{dR=null;while(U.Equals(dR,null)&&dQ.MoveNext())dR=dO(dQ.Current());return dR;}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}};$.windowed=function(dO,dP){dO<=0?T.FailWith("The input must be positive."):void 0;return $.delay(function(){return $.enumUsing(ci.Get(dP),function(dQ){var dR;dR=[];return $.append($.enumWhile(function(){return dR.length<dO&&dQ.MoveNext();},$.delay(function(){dR.push(dQ.Current());return[];})),$.delay(function(){return dR.length===dO?$.append([dR.slice(0)],$.delay(function(){return $.enumWhile(function(){return dQ.MoveNext();},$.delay(function(){dR.shift();dR.push(dQ.Current());return[dR.slice(0)];}));})):[];}));});});};$.skip=function(dO,dP){return{GetEnumerator:function(){var dQ;dQ=ci.Get(dP);return new cj.New(true,null,function(dR){var dS,dT;if(dR.s){for(dS=1,dT=dO;dS<=dT;dS++)if(!dQ.MoveNext())$.insufficient();dR.s=false;}else null;return dQ.MoveNext()&&(dR.c=dQ.Current(),true);},function(){dQ.Dispose();});}};};$.exists2=function(dO,dP,dQ){var dR,dS,dT,dU;dR=ci.Get(dP);try{dT=ci.Get(dQ);try{dU=false;while(!dU&&dR.MoveNext()&&dT.MoveNext())dU=dO(dR.Current(),dT.Current());dS=dU;}finally{if(typeof dT=="object"&&"Dispose"in dT)dT.Dispose();}return dS;}finally{if(typeof dR=="object"&&"Dispose"in dR)dR.Dispose();}};$.compareWith=function(dO,dP,dQ){var dR,dS,dT,dU,dV;dR=ci.Get(dP);try{dT=ci.Get(dQ);try{dU=0;dV=true;while(dV&&dU===0)if(dR.MoveNext())dU=dT.MoveNext()?dO(dR.Current(),dT.Current()):1;else if(dT.MoveNext())dU=-1;else dV=false;dS=dU;}finally{if(typeof dT=="object"&&"Dispose"in dT)dT.Dispose();}return dS;}finally{if(typeof dR=="object"&&"Dispose"in dR)dR.Dispose();}};$.sortBy=function(dO,dP){return $.delay(function(){var dQ;dQ=_8.ofSeq(dP);_8.sortInPlaceBy(dO,dQ);return dQ;});};$.unfold=function(dO,dP){return{GetEnumerator:function(){return new cj.New(dP,null,function(dQ){var dR;dR=dO(dQ.s);return dR==null?false:(dQ.c=dR.$0[0],dQ.s=dR.$0[1],true);},void 0);}};};$.max=function(dO){var dP,dQ,dR;dP=ci.Get(dO);try{if(!dP.MoveNext())$.seqEmpty();dQ=dP.Current();while(dP.MoveNext()){dR=dP.Current();U.Compare(dR,dQ)===1?dQ=dR:void 0;}return dQ;}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}};$.seqEmpty=function(){return T.FailWith("The input sequence was empty.");};$.forall=function(dO,dP){return!$.exists(function(dQ){return!dO(dQ);},dP);};$.exists=function(dO,dP){var dQ,dR;dQ=ci.Get(dP);try{dR=false;while(!dR&&dQ.MoveNext())dR=dO(dQ.Current());return dR;}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}};ba.New=function(dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ){return{generateDoc:dO,getValue:dP,setValue:dQ,setDisabled:dR,showAnnotations:dS,posFromIndex:dT,indexFromPos:dU,getWordAt:dV,getSelectionText:dW,getUri:dX,setUri:dY,hookOnChange:dZ};};bc=bb.attr=dH.Class({},m,bc);bd.parseDoubleO=function(){cl.$cctor();return cl.parseDoubleO;};bd.parseIntO=function(){cl.$cctor();return cl.parseIntO;};bd.parseGuidO=function(){cl.$cctor();return cl.parseGuidO;};bd.tryParseWith=function(dO){function dP(dQ,dR){return dQ?{$:1,$0:dR}:null;}return function(dQ){return dP.apply(null,dO(dQ));};};bd.parseDateO=function(){cl.$cctor();return cl.parseDateO;};bd.parseInt64O=function(){cl.$cctor();return cl.parseInt64O;};bd.parseSingleO=function(){cl.$cctor();return cl.parseSingleO;};bd.Double=function(){cl.$cctor();return cl["|Double|_|"];};bd.Int=function(){cl.$cctor();return cl["|Int|_|"];};be.prettyPrint=function(dO){var dP,dQ;function dR(dS,dT){return dS+" = "+be.prettyPrint(dT);}return dO===null?"null":(dP=typeof dO,dP=="string"?"\""+dO+"\"":dP=="object"?dO instanceof a.Array?"[|"+b8.concat("; ",_8.map(be.prettyPrint,dO))+"|]":(dQ=a.String(dO),dQ==="[object Object]"?"{"+b8.concat("; ",_8.map(function(dS){return dR(dS[0],dS[1]);},b0.GetFields(dO)))+"}":dQ):a.String(dO));};be.toSafe=function(dO){return dO==null?"":dO;};be.padNumLeft=function(dO,dP){var dQ;dQ=_8.get(dO,0);return dQ===" "||dQ==="+"||dQ==="-"?dQ+b8.PadLeftWith(dO.substr(1),dP-1,"0"):b8.PadLeftWith(dO,dP,"0");};be.printList=function(dO,dP){return"["+b8.concat("; ",$.map(dO,dP))+"]";};bf=Y.GuidId=dH.Class({get_Id:function(){return this.$0;}},null,bf);bg.defaultPlugIn=function(){return bh.New("",new bi.New$1(function(dO){return dO.varName;}),new bi.New$1(function(dO){return dO.viwName;}),new bi.New$1(function(dO){return dO.docName;}),new bi.New$1(function(dO){return dO.actName;}),new bi.New$1(function(dO){return dO.qryName;}));};bg.newVar=function(dO,dP){return bl.New(dO,dP);};bg.newDoc=function(dO,dP){return bn.New(dO,{$:0,$0:dP});};bg.newAct=function(dO,dP){return bo.New(dO,{$:0,$0:dP},S.Const(true));};bg.newViw=function(dO,dP){return bm.New(dO,dP);};bg.addPlugIn=function(dO){bg.plugIns().Append(dO);};bg.mainDocV=function(){cl.$cctor();return cl.mainDocV;};bg.callFunction=function(dO,dP,dQ){if(dQ.$==1)dQ.$0(dO);else if(dQ.$==2)(dQ.$0(dO))(dP);else dQ.$0();};bg.getMainDoc=function(){cl.$cctor();return cl.getMainDoc;};bg.splitName=function(dO){function dP(dR){return bF.splitByChar(".",dR);}function dQ(dR){return _8.length(dR)===1?[dO,_8.get(dR,0)]:[_8.get(dR,0),_8.get(dR,1)];}return function(dR){return dQ(dP(dR));};};bg.tryGetDocW=function(dO,dP){return S.Bind(function(dQ){return dQ!=null&&dQ.$==1?dQ.$0.plgDocs.TryFindByKeyAsView(dP):S.Const(null);},bg.tryGetPlugInW(dO));};bg.getLazyDoc=function(dO){var dP;dP=dO.docDoc;return dP.$==0?dP.$0.f():bq.Element("div",[],[bq.TextNode((function(dQ){return function(dR){return dQ("Doc with parameters not allowed here: "+cE.p$1(dR));};}(a.id))(dO))]);};bg.tryGetWoWW=function(dO,dP){return S.Bind(function(dQ){return dQ==null?S.Bind(function(dR){return dR==null?S.Const(null):S.Map(function(dS){return{$:1,$0:dS};},dR.$0.varVar.get_View());},bg.tryGetVarW(dO,dP)):S.Map(function(dR){return{$:1,$0:dR};},dQ.$0.viwView);},bg.tryGetViwW(dO,dP));};bg.tryGetActW=function(dO,dP){return S.Bind(function(dQ){return dQ!=null&&dQ.$==1?dQ.$0.plgActions.TryFindByKeyAsView(dP):S.Const(null);},bg.tryGetPlugInW(dO));};bg.plugin=function(){cl.$cctor();return cl.plugin;};bg.tryGetVar=function(dO,dP){var dQ;dQ=bg.tryGetPlugIn(dO);return dQ==null?null:dQ.$0.plgVars.TryFindByKey(dP);};bg.plugIns=function(){cl.$cctor();return cl.plugIns;};bg.tryGetPlugIn=function(dO){return bg.plugIns().TryFindByKey(dO);};bg.newDocF=function(dO,dP){return bn.New(dO,dP);};bg.tryGetPlugInW=function(dO){return bg.plugIns().TryFindByKeyAsView(dO);};bg.tryGetViwW=function(dO,dP){return S.Bind(function(dQ){return dQ!=null&&dQ.$==1?dQ.$0.plgViews.TryFindByKeyAsView(dP):S.Const(null);},bg.tryGetPlugInW(dO));};bg.tryGetVarW=function(dO,dP){return S.Bind(function(dQ){return dQ!=null&&dQ.$==1?dQ.$0.plgVars.TryFindByKeyAsView(dP):S.Const(null);},bg.tryGetPlugInW(dO));};bg.selectionPlugInO=function(){cl.$cctor();return cl.selectionPlugInO;};bg.currentPlugInW=function(){cl.$cctor();return cl.currentPlugInW;};bg.renderPlugIns=function(){return bq.Flatten(bg.plugIns().MapLens(function(dO){var dP,dQ,dR,dS;return(dP=(dQ=bS.Make().WithHole({$:1,$0:"name",$1:dO}),dQ.WithHole(bT.EventQ2(dQ.k,"select",function(){return dQ.i;},function(){bg.selectionPlugInO().Set({$:1,$0:dO});}))).WithHole({$:2,$0:"selected",$1:S.Map(function(dT){return U.Equals(dT,{$:1,$0:dO})?"selected":"";},bg.selectionPlugInO().get_View())}),(dR=bT.CompleteHoles(dP.k,dP.h,[]),(dS=new bR.New(dR[1],cF.tile(dR[0])),(dP.i=dS,dS)))).get_Doc();}));};bg.renderVars=function(){function dO(dQ,dR){return[dQ.plgName,dR.varName];}function dP(dQ,dR){var dS,dT,dU;return(dS=bS.Make().WithHole({$:1,$0:"name",$1:dR.varName}).WithHole({$:8,$0:"value",$1:dR.varVar}),(dT=bT.CompleteHoles(dS.k,dS.h,[["value",0]]),(dU=new bR.New(dT[1],cF.namevalueinput(dT[0])),(dS.i=dU,dU)))).get_Doc();}return bq.ConvertBy(function(dQ){return dO(dQ[0],dQ[1]);},function(dQ){return dP(dQ[0],dQ[1]);},S.Map(function(dQ){return $.map(function(dR){return[dQ,dR];},dQ.plgVars);},bg.currentPlugInW()));};bg.renderViews=function(){function dO(dQ,dR){return[dQ.plgName,dR.viwName];}function dP(dQ,dR){var dS,dT,dU;return(dS=bS.Make().WithHole({$:1,$0:"name",$1:dR.viwName}).WithHole({$:2,$0:"value",$1:dR.viwView}),(dT=bT.CompleteHoles(dS.k,dS.h,[]),(dU=new bR.New(dT[1],cF.namevalue(dT[0])),(dS.i=dU,dU)))).get_Doc();}return bq.ConvertBy(function(dQ){return dO(dQ[0],dQ[1]);},function(dQ){return dP(dQ[0],dQ[1]);},S.Map(function(dQ){return $.map(function(dR){return[dQ,dR];},dQ.plgViews);},bg.currentPlugInW()));};bg.renderDocs=function(){function dO(dQ,dR){return[dQ.plgName,dR.docName];}function dP(dQ,dR){var dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2;return(dS=(dT=(dU=dR.docName+(dV=dR.docDoc,dV.$==1?(dW=b8.concat(", ",bu.ofArray([dV.$1])),(function(d3){return function(d4){return d3("("+be.toSafe(d4)+")");};}(a.id))(dW)):dV.$==2?(dX=b8.concat(", ",bu.ofArray([dV.$1,dV.$2])),(function(d3){return function(d4){return d3("("+be.toSafe(d4)+")");};}(a.id))(dX)):dV.$==3?(dY=b8.concat(", ",bu.ofArray([dV.$1,dV.$2,dV.$3])),(function(d3){return function(d4){return d3("("+be.toSafe(d4)+")");};}(a.id))(dY)):dV.$==4?(dZ=b8.concat(", ",bu.ofArray([dV.$1,dV.$2,dV.$3,dV.$4])),(function(d3){return function(d4){return d3("("+be.toSafe(d4)+")");};}(a.id))(dZ)):dV.$==5?(d0=b8.concat(", ",bu.ofArray([dV.$1,dV.$2,dV.$3,dV.$4,dV.$5])),(function(d3){return function(d4){return d3("("+be.toSafe(d4)+")");};}(a.id))(d0)):""),bS.Make().WithHole({$:1,$0:"name",$1:dU})),dT.WithHole(bT.EventQ2(dT.k,"select",function(){return dT.i;},function(){S.Get(function(d3){bg.mainDocV().Set(d3.plgName+"."+dR.docName);},bg.currentPlugInW());}))),(d1=bT.CompleteHoles(dS.k,dS.h,[]),(d2=new bR.New(d1[1],cF.tile(d1[0])),(dS.i=d2,d2)))).get_Doc();}return bq.ConvertBy(function(dQ){return dO(dQ[0],dQ[1]);},function(dQ){return dP(dQ[0],dQ[1]);},S.Map(function(dQ){return $.map(function(dR){return[dQ,dR];},dQ.plgDocs);},bg.currentPlugInW()));};bg.renderActions=function(){function dO(dQ,dR){return[dQ.plgName,dR.actName];}function dP(dQ,dR){var dS,dT,dU,dV;dS=(dT=dR.actFunction,dT.$==1?(dU=b8.concat(", ",bu.ofArray([dT.$1])),(function(dW){return function(dX){return dW("("+be.toSafe(dX)+")");};}(a.id))(dU)):dT.$==2?(dV=b8.concat(", ",bu.ofArray([dT.$1,dT.$2])),(function(dW){return function(dX){return dW("("+be.toSafe(dX)+")");};}(a.id))(dV)):"");return bq.EmbedView(S.Map(function(dW){var dX,dY,dZ,d0,d1,d2,d3,d4;return dW?(dX=(dY=bS.Make().WithHole({$:1,$0:"name",$1:dR.actName+dS}),dY.WithHole(bT.EventQ2(dY.k,"click",function(){return dY.i;},function(d5){bg.callFunction(d5,null,dR.actFunction);}))),(dZ=bT.CompleteHoles(dX.k,dX.h,[]),(d0=new bR.New(dZ[1],cF.action(dZ[0])),(dX.i=d0,d0)))).get_Doc():(d1=(d2=bS.Make().WithHole({$:1,$0:"name",$1:dR.actName}),d2.WithHole(bT.EventQ2(d2.k,"click",function(){return d2.i;},function(d5){bg.callFunction(d5,null,dR.actFunction);}))),(d3=bT.CompleteHoles(d1.k,d1.h,[]),(d4=new bR.New(d3[1],cF.actiondisabled(d3[0])),(d1.i=d4,d4)))).get_Doc();},dR.actEnabled));}return bq.ConvertBy(function(dQ){return dO(dQ[0],dQ[1]);},function(dQ){return dP(dQ[0],dQ[1]);},S.Map(function(dQ){return $.map(function(dR){return[dQ,dR];},dQ.plgActions);},bg.currentPlugInW()));};bg.renderQueries=function(){function dO(dQ,dR){return[dQ.plgName,dR.qryName];}function dP(dQ,dR){var dS,dT,dU,dV;return(dS=(dT=bS.Make().WithHole({$:1,$0:"name",$1:dR.qryName}),dT.WithHole(bT.EventQ2(dT.k,"select",function(){return dT.i;},function(){a.alert(dR.qryFunction(null));}))),(dU=bT.CompleteHoles(dS.k,dS.h,[]),(dV=new bR.New(dU[1],cF.tile(dU[0])),(dS.i=dV,dV)))).get_Doc();}return bq.ConvertBy(function(dQ){return dO(dQ[0],dQ[1]);},function(dQ){return dP(dQ[0],dQ[1]);},S.Map(function(dQ){return $.map(function(dR){return[dQ,dR];},dQ.plgQueries);},bg.currentPlugInW()));};bg.AppFwkClient=function(){cl.$cctor();return cl.AppFwkClient;};bg.trigAct=function(dO,dP){var dQ,dR,dS;return bq.TextView(S.Map(function(dT){var dU,dV;return dT==null?"":(dU=(dV=(bg.splitName("AppFramework"))(dP),bg.tryGetAct(dV[0],dV[1])),dU==null?void 0:bg.callFunction(null,null,dU.$0.actFunction),"");},(dQ=(dR=(bg.splitName("AppFramework"))(dO),bg.tryGetWoWW(dR[0],dR[1])),(dS=[_2.Create$1(null)],(S.Sink(function(dT){if(!U.Equals(dS[0].Get(),dT))dS[0].Set(dT);},dQ),dS[0].get_View())))));};bg.inputFile=function(dO,dP,dQ){var dR,dS,dT,dU;dR=(dS=(dT=(bg.splitName("AppFramework"))(dQ),bg.tryGetAct(dT[0],dT[1])),dS==null?null:{$:1,$0:(dU=dS.$0,bq.Element("div",bg.getAttrs("AppFramework",dO),[bq.Element("div",[bE.Create("class","input-group")],[bq.Element("span",[bE.Create("class","input-group-btn")],[bq.Element("label",[bE.Create("class","btn")],[bq.TextNode(dP),bq.Element("input",[bE.Create("class","form-control"),bE.Create("type","file"),bA.Style("display","none"),bE.HandlerImpl("click",function(dV){return function(){dV.value="";};}),bE.HandlerImpl("change",function(dV){return function(){return bg.callFunction(dV,null,dU.actFunction);};})],[])])])])]))});return dR==null?bg.errDoc((function(dV){return function(dW){return dV("Action not found "+be.toSafe(dW));};}(a.id))(dQ)):dR.$0;};bg.inputLabel=function(dO,dP,dQ){var dR,dS,dT;dR=(dS=(dT=(bg.splitName("AppFramework"))(dQ),bg.tryGetVar(dT[0],dT[1])),dS==null?null:{$:1,$0:bq.Element("div",bg.getAttrs("AppFramework",dO),[bq.Element("div",[bE.Create("class","input-group")],[bq.Element("span",[bE.Create("class","input-group-addon")],[bq.TextNode(dP)]),bq.Input([bE.Create("class","form-control")],dS.$0.varVar)])])});return dR==null?bg.errDoc((function(dU){return function(dV){return dU("Var not found "+be.toSafe(dV));};}(a.id))(dQ)):dR.$0;};bg.setVar=function(dO,dP){var dQ,dR;dQ=(dR=(bg.splitName("AppFramework"))(dO),bg.tryGetVar(dR[0],dR[1]));dQ==null?void 0:dQ.$0.varVar.Set(dP);};bg.horizontal=function(dO,dP,dQ,dR,dS){var dT,dU,dV,dW;return(dT=(dU=bS.Make().WithHole({$:2,$0:"partsizes",$1:dO}).WithHole({$:7,$0:"afterrender",$1:dP}).WithHole({$:7,$0:"afterrendersp",$1:dQ}),dU.WithHole(bT.EventQ2(dU.k,"mousedown",function(){return dU.i;},function(dX){dR(dX.Event);}))).WithHole({$:2,$0:"gap",$1:dS}),(dV=bT.CompleteHoles(dT.k,dT.h,[]),(dW=new bR.New(dV[1],cF.wcompsplitterhor(dV[0])),(dT.i=dW,dW)))).get_Doc();};bg.vertical=function(dO,dP,dQ,dR,dS){var dT,dU,dV,dW;return(dT=(dU=bS.Make().WithHole({$:2,$0:"partsizes",$1:dO}).WithHole({$:7,$0:"afterrender",$1:dP}).WithHole({$:7,$0:"afterrendersp",$1:dQ}),dU.WithHole(bT.EventQ2(dU.k,"mousedown",function(){return dU.i;},function(dX){dR(dX.Event);}))).WithHole({$:2,$0:"gap",$1:dS}),(dV=bT.CompleteHoles(dT.k,dT.h,[]),(dW=new bR.New(dV[1],cF.wcompsplitterver(dV[0])),(dT.i=dW,dW)))).get_Doc();};bg.mainDoc=function(){var dO,dP,dQ,dR,dS,dT;return(dO=(dP=bg.getMainClientDoc(),(dQ=(dR=bg.mainDocV().get_View(),bS.Make().WithHole({$:2,$0:"maindoc",$1:dR})),dQ.WithHole(bT.EventQ2(dQ.k,"goclient",function(){return dQ.i;},function(){bg.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:dP})),(dS=bT.CompleteHoles(dO.k,dO.h,[]),(dT=new bR.New(dS[1],cF.appframework(dS[0])),(dO.i=dT,dT)))).get_Doc();};bg.newActF=function(dO,dP){return bo.New(dO,dP,S.Const(true));};bg.tryGetAct=function(dO,dP){var dQ;dQ=bg.tryGetPlugIn(dO);return dQ==null?null:dQ.$0.plgActions.TryFindByKey(dP);};bg.errDoc=function(dO){return bq.Element("div",[],[bq.TextNode(dO)]);};bg.getAttrs=function(dO,dP){return bu.ofSeq($.delay(function(){return $.append($.choose(function(dQ){var dR,dS,dT,dU;function dV(dW,dX){var dY;return dX.$==1?(dY=dX.$0,dW.addEventListener(b8.Trim(dU),function(dZ){return bg.callFunction(dW,dZ,dY.actFunction);},false)):dW.setAttribute(b8.Trim(dU),b8.Trim(dX.$0));}return!U.Equals(dQ,null)&&dQ.length===2&&(dS=_8.get(dQ,1),b8.Trim(_8.get(dQ,0))!==""&&b8.Trim(dS)!=="")?(dT=_8.get(dQ,1),(dU=_8.get(dQ,0),{$:1,$0:bA.DynamicCustom(function(dW){return function(dX){return dV(dW,dX);};},bg.getTextData(dO,b8.Trim(dT)))})):null;},$.map(function(dQ){return bF.splitByChar("=",dQ);},bF.splitByChar(";",dP))),$.delay(function(){return $.choose(function(dQ){var dR,dS,dT,dU,dV;return!U.Equals(dQ,null)&&dQ.length===2&&(dS=_8.get(dQ,1),b8.Trim(_8.get(dQ,0))!==""&&b8.Trim(dS)!=="")?(dT=_8.get(dQ,1),(dU=_8.get(dQ,0),{$:1,$0:(dV=S.Map(function(dW){return dW.$==1?(function(dX){return function(dY){return dX("@{"+be.toSafe(dY)+"}");};}(a.id))(dW.$0.actName):b8.Trim(dW.$0);},bg.getTextData(dO,b8.Trim(dT))),bA.DynamicStyle(b8.Trim(dU),dV))})):null;},$.map(function(dQ){return bF.splitByChar(":",dQ);},bF.splitByChar(";",dP)));}));}));};bg.newQry=function(dO,dP){return bp.New(dO,dP);};bg.getMainClientDoc=function(){var dO;return bq.EmbedView((dO=bg.plugIns().v,S.Map2(function(dP,dQ){var dR,dS;dR=$.tryPick(function(dT){var dU;dU=$.tryFind(function(dV){return dT.plgName===dP||dT.plgName+"."+dV.docName===dP;},dT.plgDocs);return dU==null?null:{$:1,$0:bg.getLazyDoc(dU.$0)};},dQ);dS=bg.AppFwkClient().f();return dR==null?dS:dR.$0;},bg.mainDocV().get_View(),dO)));};bg.tryGetVoVW=function(dO,dP){return S.Bind(function(dQ){return dQ==null?S.Map(function(dR){return dR==null?null:{$:1,$0:new ck.New(dR.$0.viwView,a.ignore)};},bg.tryGetViwW(dO,dP)):S.Const({$:1,$0:dQ.$0.varVar});},bg.tryGetVarW(dO,dP));};bg.tryGetDoc=function(dO,dP){var dQ;dQ=bg.tryGetPlugIn(dO);return dQ==null?null:dQ.$0.plgDocs.TryFindByKey(dP);};bg.tryGetViw=function(dO,dP){var dQ;dQ=bg.tryGetPlugIn(dO);return dQ==null?null:dQ.$0.plgViews.TryFindByKey(dP);};bg.getTextData=function(dO,dP){var dQ,dR,dS,dT;dQ=(dR=bF.delimitedO("@{","}",dP),dR==null?null:{$:1,$0:(dS=dR.$0,(dT=dS[0],bg.getOneTextData(dO,dS[1],dT,dS[2])))});return dQ==null?S.Const({$:0,$0:dP}):dQ.$0;};bg.getOneTextData=function(dO,dP,dQ,dR){var dS,dT,dU;dS=(bg.splitName(dO))(dP);dT=dS[0];dU=dS[1];return S.Bind(function(dV){return dV==null?S.Bind(function(dW){var dX;return dW==null?S.Const({$:0,$0:((((dH.Curried(function(dY,dZ,d0,d1){return dY(be.toSafe(dZ)+" @{Missing "+be.toSafe(d0)+"}"+be.toSafe(d1));},4))(a.id))(dQ))(dP))(dR)}):(dX=dW.$0,S.Bind(function(dY){return dY.$==1?S.Const({$:0,$0:(function(dZ){return function(d0){return dZ("Unexpected Action @{"+be.toSafe(d0)+"}");};}(a.id))(dY.$0.actName)}):S.Const({$:0,$0:dQ+dX+dY.$0});},bg.getTextData(dO,dR)));},bg.tryGetWoWW(dT,dU)):S.Const({$:1,$0:dV.$0});},bg.tryGetActW(dT,dU));};bh.New=function(dO,dP,dQ,dR,dS,dT){return{plgName:dO,plgVars:dP,plgViews:dQ,plgDocs:dR,plgActions:dS,plgQueries:dT};};bi=Q.ListModel=dH.Class({AppendMany:function(dO){var dP,dQ;function dR(dS,dT){var dU,dV;dU=dP.key(dT);dP.ObsoleteKey(dU);dV=_8.tryFindIndex(function(dW){return U.Equals(dP.key(dW),dU);},dS);return dV==null?(dQ.push(dT),dS):dP.storage.SSetAt(dV.$0,dT,dS);}dP=this;dQ=[];this["var"].Set(this.storage.SAppendMany(dQ,(((dH.Curried3($.fold))(dR))(this["var"].Get()))(dO)));},TryFindByKeyAsView:function(dO){var dP;dP=this;return function(){var dQ,dR,dS;dQ=(dR=null,[dP.it.TryGetValue(dO,{get:function(){return dR;},set:function(dT){dR=dT;}}),dR]);return dQ[0]?dQ[1]:(dS=b2.New({$:2,$0:dP.TryFindByKey(dO),$1:[]}),(dP.it.Add(dO,dS),dS));};},ContainsKey:function(dO){var dP;dP=this;return _8.exists(function(dQ){return U.Equals(dP.key(dQ),dO);},this["var"].Get());},Lens:function(dO){return this.LensInto(a.id,function(dP,dQ){return dQ;},dO);},RemoveByKey:function(dO){var dP;dP=this;this["var"].Set(this.storage.SRemoveIf(function(dQ){return U.Equals(dP.key(dQ),dO);},this["var"].Get()));this.ObsoleteKey(dO);},ContainsKeyAsView:function(dO){var dP;function dQ(dR){return U.Equals(dP.key(dR),dO);}dP=this;return S.Map(function(dR){return _8.exists(dQ,dR);},this["var"].get_View());},TryFindByKey:function(dO){var dP;dP=this;return _8.tryFind(function(dQ){return U.Equals(dP.key(dQ),dO);},this["var"].Get());},Set:function(dO){this["var"].Set(this.storage.SSet(dO));this.ObsoleteAll();},Append:function(dO){var dP,dQ,dR,dS;dP=this;dQ=this["var"].Get();dR=this.key(dO);dS=_8.tryFindIndex(function(dT){return U.Equals(dP.key(dT),dR);},dQ);dS!=null&&dS.$==1?this["var"].Set(this.storage.SSetAt(dS.$0,dO,dQ)):this["var"].Set(this.storage.SAppend(dO,dQ));this.ObsoleteKey(dR);},ObsoleteKey:function(dO){var dP,dQ;dP=(dQ=null,[this.it.TryGetValue(dO,{get:function(){return dQ;},set:function(dR){dQ=dR;}}),dQ]);dP[0]?(b2.Obsolete(dP[1]),this.it.Remove(dO)):void 0;},LensInto:function(dO,dP,dQ){return this["LensInto'"](dO,dP,dQ,S.Map(dO,this.FindByKeyAsView(dQ)));},ObsoleteAll:function(){$.iter(function(dO){b2.Obsolete(dO.V);},this.it);this.it.Clear();},"LensInto'":function(dO,dP,dQ,dR){var dS,dT,dU;dS=this;dT=cf.Id();dU=new R({Get:function(){return dO(dS.FindByKey(dQ));},Set:function(dV){return dS.UpdateBy(function(dW){return{$:1,$0:dP(dW,dV)};},dQ);},SetFinal:function(dV){return this.Set(dV);},Update:function(dV){return dS.UpdateBy(function(dW){return{$:1,$0:dP(dW,dV(dO(dW)))};},dQ);},UpdateMaybe:function(dV){return dS.UpdateBy(function(dW){var dX;dX=dV(dO(dW));return dX==null?null:{$:1,$0:dP(dW,dX.$0)};},dQ);},get_View:function(){return dR;},get_Id:function(){return dT;}});R.New.call(dU);return dU;},FindByKeyAsView:function(dO){return S.Map(function(dP){return dP.$0;},this.TryFindByKeyAsView(dO));},FindByKey:function(dO){var dP;dP=this;return _8.find(function(dQ){return U.Equals(dP.key(dQ),dO);},this["var"].Get());},UpdateBy:function(dO,dP){var dQ,dR,dS,dT,dU;dQ=this;dR=this["var"].Get();dS=_8.tryFindIndex(function(dV){return U.Equals(dQ.key(dV),dP);},dR);dS!=null&&dS.$==1?(dT=dS.$0,dU=dO(_8.get(dR,dT)),dU!=null&&dU.$==1?(this["var"].Set(this.storage.SSetAt(dT,dU.$0,dR)),this.ObsoleteKey(dP)):void 0):void 0;},MapLens:function(dO){var dP;dP=this;return S.MapSeqCachedViewBy(dP.key,function(dQ,dR){return dO(dQ,dP["LensInto'"](a.id,function(dS,dT){return dT;},dQ,dR));},this["var"].get_View());},GetEnumerator:function(){return ci.Get(this["var"].Get());},GetEnumerator0:function(){return ci.Get0(this["var"].Get());}},m,bi);bi.New$1=dH.Ctor(function(dO){bi.New$2.call(this,dO,[]);},bi);bi.New$2=dH.Ctor(function(dO,dP){var dQ;dQ=_8.ofSeq(dP);bi.New$3.call(this,dO,_2.Create$1(dQ),cq.InMemory(dQ));},bi);bi.New=dH.Ctor(function(dO,dP){bi.New$3.call(this,dO,_2.Create$1(_8.ofSeq($.distinctBy(dO,dP.SInit()))),dP);},bi);bi.New$3=dH.Ctor(function(dO,dP,dQ){m.New.call(this);this.key=dO;this["var"]=dP;this.storage=dQ;this.v=S.Map(function(dR){return dR.slice();},this["var"].get_View());this.it=new bL.New$5();},bi);bj.Create=function(dO){return cn.New(false,dO,bj.forceLazy);};bj.forceLazy=function(){var dO;dO=this.v();this.c=true;this.v=dO;this.f=bj.cachedLazy;return dO;};bj.cachedLazy=function(){return this.v;};bk.turnToView=function(dO){return bq.EmbedView(S.Map(dO,bk.currentViewTriggger()));};bk.addLayout=function(dO){S.Sink(function(dP){var dQ;bk.set_currentViewTriggger(S.Map2(function(dR,dS){return dR+dS;},dO.lytDefinition.get_View(),bg.mainDocV().get_View()));bk.refreshEntries(dO.lytName,(dQ=(bk.createEntries(dO.lytName))(dP),$.append(bu.ofArray([{$:0,$0:bg.newVar("Layout",dO.lytDefinition)}]),dQ)));},dO.lytDefinition.get_View());};bk.parseEntries=function(dO,dP){return bk.processText(ct.createEntryO2(dO,new bL.New$5()),dP);};bk.refreshEntries=function(dO,dP){var dQ,dR,dS,dT;dQ=(dR=bg.tryGetPlugIn(dO),dR==null?(dS=(dT=bg.defaultPlugIn(),bh.New(dO,dT.plgVars,dT.plgViews,dT.plgDocs,dT.plgActions,dT.plgQueries)),(bg.addPlugIn(dS),dS)):dR.$0);cu.refreshLM(dQ.plgVars,_8.ofSeq($.delay(function(){return bk.getVarEntries(dP);})));cu.refreshLM(dQ.plgViews,_8.ofSeq($.delay(function(){return bk.getViewEntries(dP);})));cu.refreshLM(dQ.plgActions,_8.ofSeq($.delay(function(){return bk.getActionEntries(dP);})));cu.refreshLM(dQ.plgQueries,_8.ofSeq($.delay(function(){return bk.getQueryEntries(dP);})));cu.refreshLM(dQ.plgDocs,_8.ofSeq($.delay(function(){return $.append(bk.getDocEntries(dP),$.delay(function(){return $.append([bg.newDocF("InputFile",{$:4,$0:dH.Curried(bk.inputFile,4,[dO]),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],$.delay(function(){return $.append([bg.newDocF("InputLabel",{$:3,$0:dH.Curried(bk.inputLabel,3,[dO]),$1:"attrs",$2:"Label",$3:"Var"})],$.delay(function(){return $.append([bg.newDocF("HtmlDoc",{$:1,$0:function(dU){return bk.htmlDoc(dO,dU);},$1:"html"})],$.delay(function(){return[bg.newDocF("none",{$:1,$0:bk.none,$1:"x"})];}));}));}));}));})));};bk.variableSplitter=function(dO,dP,dQ,dR,dS,dT){return bq.Element("wcomp-splitter",bu.ofSeq($.delay(function(){return $.append(dO?[bE.Create("vertical","")]:[],$.delay(function(){return $.append([bE.Create("min",a.String(dP))],$.delay(function(){return $.append([bE.Create("value",a.String(dQ))],$.delay(function(){return[bE.Create("max",a.String(dR))];}));}));}));})),bu.ofArray([dS,dT]));};bk.newLyt=function(dO,dP){return bs.New(dO,_2.Create$1(dP));};bk.currentViewTriggger=function(){cl.$cctor();return cl.currentViewTriggger;};bk.set_currentViewTriggger=function(dO){cl.$cctor();cl.currentViewTriggger=dO;};bk.createEntries=function(dO){function dP(dQ){return bk.createEntryO(dO,dQ);}return function(dQ){return bk.processText(dP,dQ);};};bk.processText=function(dO,dP){return bk.processLines(dO,b8.SplitChars(dP,["\n","\r"],1));};bk.getVarEntries=function(dO){function dP(dQ){return dQ[1];}return $.map(function(dQ){return $.last(dP(dQ));},$.groupBy(function(dQ){return dQ.varName;},$.choose(function(dQ){return dQ.$==0?{$:1,$0:dQ.$0}:null;},dO)));};bk.getViewEntries=function(dO){function dP(dQ){return dQ[1];}return $.map(function(dQ){return $.last(dP(dQ));},$.groupBy(function(dQ){return dQ.viwName;},$.choose(function(dQ){return dQ.$==1?{$:1,$0:dQ.$0}:null;},dO)));};bk.getActionEntries=function(dO){function dP(dQ){return dQ[1];}return $.map(function(dQ){return $.last(dP(dQ));},$.groupBy(function(dQ){return dQ.actName;},$.choose(function(dQ){return dQ.$==3?{$:1,$0:dQ.$0}:null;},dO)));};bk.getQueryEntries=function(dO){function dP(dQ){return dQ[1];}return $.map(function(dQ){return $.last(dP(dQ));},$.groupBy(function(dQ){return dQ.qryName;},$.choose(function(dQ){return dQ.$==4?{$:1,$0:dQ.$0}:null;},dO)));};bk.getDocEntries=function(dO){function dP(dQ){return dQ[1];}return $.map(function(dQ){return $.last(dP(dQ));},$.groupBy(function(dQ){return dQ.docName;},$.choose(function(dQ){return dQ.$==2?{$:1,$0:dQ.$0}:null;},dO)));};bk.inputFile=function(dO,dP,dQ,dR,dS){var dT,dU,dV,dW;dT=(dU=(dV=((bk.splitName())(dO))(dR),bg.tryGetAct(dV[0],dV[1])),dU==null?null:{$:1,$0:(dW=dU.$0,bq.Element("div",bk.getAttrs(dO,{$:0,$0:dP}),[bq.Element("div",[bE.Create("class","input-group")],[bq.Element("span",[bE.Create("class","input-group-btn")],[bq.Element("label",[bE.Create("class","btn")],[bk.getText(dO,{$:0,$0:dQ}),bq.Element("input",[bE.Create("class","form-control"),bE.Create("type","file"),bA.Style("display","none"),bE.HandlerImpl("click",function(dX){return function(){dX.value="";};}),bE.HandlerImpl("change",function(dX){return function(){return bg.callFunction(dX,null,dW.actFunction);};})],[])])]),dS!==""?bk.singleDoc(dO,bu.ofArray([{$:1,$0:dS}])):bq.get_Empty()])]))});return dT==null?bg.errDoc((function(dX){return function(dY){return dX("Action not found "+be.toSafe(dY));};}(a.id))(dR)):dT.$0;};bk.inputLabel=function(dO,dP,dQ,dR){var dS,dT,dU;dS=(dT=(dU=((bk.splitName())(dO))(dR),bg.tryGetVar(dU[0],dU[1])),dT==null?null:{$:1,$0:bq.Element("div",bk.getAttrs(dO,{$:0,$0:dP}),[bq.Element("div",[bE.Create("class","input-group")],[bq.Element("span",[bE.Create("class","input-group-addon")],[bk.getText(dO,{$:0,$0:dQ})]),bq.Input([bE.Create("class","form-control")],dT.$0.varVar)])])});return dS==null?bg.errDoc((function(dV){return function(dW){return dV("Var not found "+be.toSafe(dW));};}(a.id))(dR)):dS.$0;};bk.htmlDoc=function(dO,dP){return bq.BindView(function(dQ){return dQ.$==1?bg.errDoc((function(dR){return function(dS){return dR("HtmlDoc: unexpected action "+cE.p(dS));};}(a.id))(dQ.$0)):bq.Verbatim(dQ.$0);},bk.getTextData(dO,dP));};bk.none=function(dO){return bq.Element("span",[],[]);};bk.createSplitter=function(dO,dP,dQ,dR,dS){var dT;dT=bk.pairOfDocs(dO,dS);return dR.$==1?bk.variableSplitter(dQ,dR.$0,dR.$1,dR.$2,dT[0],dT[1]):bk.fixedSplitter(dQ,dR.$0,dR.$1,dT[0],dT[1]);};bk.createButton=function(dO,dP,dQ,dR,dS){var dT;dT=bk.S(dS);return bk.turnToView(function(){var dU,dV,dW,dX,dY;function dZ(d0,d1){return bg.callFunction(null,null,d0.actFunction);}dU=(dV=(dW=(dX=((bk.splitName())(dO))(dQ),bg.tryGetAct(dX[0],dX[1])),dW==null?null:{$:1,$0:(dY=dW.$0,function(d0){return dZ(dY,d0);})}),dV==null?a.ignore:dV.$0);return bq.Button(dT,bk.getAttrs(dO,dR),dU);});};bk.createInput=function(dO,dP,dQ,dR){return bk.turnToView(function(){var dS;return bq.BindView(function(dT){return dT==null?bg.errDoc((function(dU){return function(dV){return dU("Missing var: "+be.toSafe(dV));};}(a.id))(dQ)):bq.Input(bk.getAttrs(dO,dR),dT.$0);},(dS=((bk.splitName())(dO))(dQ),bg.tryGetVoVW(dS[0],dS[1])));});};bk.createTextArea=function(dO,dP,dQ,dR){return bk.turnToView(function(){var dS;return bq.BindView(function(dT){return dT==null?bg.errDoc((function(dU){return function(dV){return dU("Missing var: "+be.toSafe(dV));};}(a.id))(dQ)):bq.InputArea(bk.getAttrs(dO,dR),dT.$0);},(dS=((bk.splitName())(dO))(dQ),bg.tryGetVoVW(dS[0],dS[1])));});};bk.createElement=function(dO,dP,dQ,dR,dS){return bk.turnToView(function(){var dT;dT=[bq.Concat(bk.getAllDocs(dO,dS))];return bq.Element(dQ,bk.getAttrs(dO,dR),dT);});};bk.createDoc=function(dO,dP,dQ,dR){return bk.turnToView(function(){var dS,dT,dU;dS=(dT=(dU=((bk.splitName())(dO))(dQ),bg.tryGetDoc(dU[0],dU[1])),dT==null?null:{$:1,$0:bk.getDocFinal(dR,dT.$0)});return dS==null?bg.errDoc((function(dV){return function(dW){return dV("Missing doc: "+be.toSafe(dW));};}(a.id))(dQ)):dS.$0;});};bk.createTemplate=function(dO,dP,dQ,dR,dS){return bk.turnToView(function(){var dT,dU,dV,dW,dX,dY;dV=bk.getAttrs(dO,dR);cD.LoadLocalTemplates("local");function dZ(d1,d2){var d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;d3=bk.S(d1);d4=bk.Identifier(d2);return d4!=null&&d4.$==1?(d5=d4.$0,d6=(d7=(d8=(d9=((bk.splitName())(dO))(d5),bg.tryGetDoc(d9[0],d9[1])),d8==null?null:{$:1,$0:{$:0,$0:d3.toLowerCase(),$1:(bk.getDocF(bv.Empty,d8.$0))[0]}}),d7==null?(d_=(d$=((bk.splitName())(dO))(d5),bg.tryGetVar(d$[0],d$[1])),d_==null?null:{$:1,$0:{$:8,$0:d3.toLowerCase(),$1:d_.$0.varVar}}):d7),d6==null?{$:0,$0:d3.toLowerCase(),$1:bg.errDoc((function(ec){return function(ed){return ec("Missing element: "+be.toSafe(ed));};}(a.id))(d5))}:d6.$0):(ea=bk.S(d1),eb=bk.S(d2),{$:0,$0:ea.toLowerCase(),$1:bg.errDoc((function(ec){return function(ed){return ec("Not implemented: "+be.toSafe(ed));};}(a.id))(eb))});}function d0(d1,d2){return d1%2===0;}try{dU={$:1,$0:(dW=(dX=$.map(function(d1){return dZ(d1[0],d1[1]);},$.map(function(d1){return d1[1];},$.filter(function(d1){return d0(d1[0],d1[1]);},$.indexed($.pairwise(dS))))),($.isEmpty(dV)?a.id:(dY=[{$:3,$0:"attrs",$1:bE.Concat(dV)}],function(d1){return $.append(dY,d1);}))(dX)),cD.NamedTemplate("local",{$:1,$0:dQ.toLowerCase()},dW))};}catch(d1){dU=null;}return dU==null?bg.errDoc((function(d2){return function(d3){return d2("Missing template: "+be.toSafe(d3));};}(a.id))(dQ)):dU.$0;});};bk.createConcat=function(dO,dP,dQ){return bk.turnToView(function(){return bq.Concat(bk.getAllDocs(dO,dQ));});};bk.createVar=function(dO,dP,dQ){return _2.Create$1(dQ);};bk.createView=function(dO,dP,dQ){return S.Bind(function(){var dR;function dS(dT){return dT.$==1?(function(dU){return function(dV){return dU(cE.p(dV));};}(a.id))(dT.$0):dT.$0;}try{return S.Map(function(dT){try{return!U.Equals(dT,null)&&dT.length===0?"No JS function specified":!U.Equals(dT,null)&&dT.length===1?a.String(a["eval"](_8.get(dT,0))):a.String(a["eval"](_8.get(dT,0)).apply(null,bH.array(dT,{$:1,$0:1},null)));}catch(dU){return dU.message;}},S.Map((dR=function(dT){return $.map(dS,dT);},function(dT){return _8.ofSeq(dR(dT));}),br.traverseSeq(function(dT){return bk.getTextToken(dO,dT);},dQ)));}catch(dT){return S.Const(dT.message);}},bk.currentViewTriggger());};bk.createAction=function(dO,dP,dQ,dR){var dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5;dW=(dT=((bk.splitName())(dO))(dQ),bg.tryGetAct(dT[0],dT[1]));if(dW==null)dS=null;else{dX=dW.$0;if(dR.$===0)dU=dX.actFunction;else{dY=dX.actFunction;switch(dY.$==1?dR.$==1?dR.$1.$==0?(dV=[dY.$0,dR.$0],0):3:3:dY.$==2?dR.$==1?dR.$1.$==0?(dV=[dY.$0,dY.$2,dR.$0],2):dR.$1.$1.$==0?(dV=[dY.$0,dR.$0,dR.$1.$0],1):3:3:3){case 0:dU=(dZ=dV[0],(d0=dV[1],{$:0,$0:function(){bk.getParamText(dO,d0,dZ);}}));break;case 1:dU=(d1=dV[0],(d2=dV[1],(d3=dV[2],{$:0,$0:function(){bk.getParamText(dO,d2,function(d6){bk.getParamText(dO,d3,d1(d6));});}})));break;case 2:dU=(d4=dV[0],(d5=dV[2],{$:1,$0:function(d6){bk.getParamText(dO,d5,function(d7){(d4(d7))(d6);});},$1:dV[1]}));break;case 3:dU={$:0,$0:function(){((((dH.Curried(function(d6,d7,d8,d9){return d6("Parameters do not coincide for Action "+be.toSafe(d7)+" "+be.printList(function(d_){return cG.p$4(d_);},d8)+" "+cE.p(d9));},4))(function(d6){dI.log(d6);}))(dQ))(dR))(dX);}};break;}}dS={$:1,$0:dU};}return dS==null?{$:0,$0:function(){((function(d6){return function(d7){return d6("Action Not Found "+be.toSafe(d7));};}(function(d6){dI.log(d6);}))(dQ));}}:dS.$0;};bk.addNewLayout=function(dO,dP){var dQ,dR;bk.addLayout((dQ=(dR=!U.Equals(dP,null)?dP:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(bF.unindentStr())(dR)),bk.newLyt(!U.Equals(dP,null)?dO:"Lyt_"+b8.Replace(a.String(bx.NewGuid()),"-",""),dQ)));};bk.createEntryO=function(dO,dP){var dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev;try{dQ=bk.splitTokens(dP);return dQ.$==1&&(dS=bk.Identifier(dQ.$0),dS!=null&&dS.$==1&&(dQ.$1.$==1&&(bk.Vertical(dQ.$1.$0).$==0&&(dQ.$1.$1.$==1&&(dT=bk.Measures$1(dQ.$1.$1.$0),dT!=null&&dT.$==1&&(dR=[dQ.$1.$1.$1,dT.$0,dS.$0],true))))))?(dU=dR[2],bk.entryDoc(dU,(bk.createSplitterM())([dO,dU,true,dR[1],dR[0]]))):dQ.$==1&&(dW=bk.Identifier(dQ.$0),dW!=null&&dW.$==1&&(dQ.$1.$==1&&(bk.Vertical(dQ.$1.$0).$==1&&(dQ.$1.$1.$==1&&(dX=bk.Measures$1(dQ.$1.$1.$0),dX!=null&&dX.$==1&&(dV=[dQ.$1.$1.$1,dX.$0,dW.$0],true))))))?(dY=dV[2],bk.entryDoc(dY,(bk.createSplitterM())([dO,dY,false,dV[1],dV[0]]))):dQ.$==1&&(d0=bk.Identifier(dQ.$0),d0!=null&&d0.$==1&&(dQ.$1.$==1&&(bk.PlugIn(dQ.$1.$0).$==1&&(dQ.$1.$1.$==1&&(d1=bk.Identifier(dQ.$1.$1.$0),d1!=null&&d1.$==1&&(dQ.$1.$1.$1.$==1&&(dQ.$1.$1.$1.$1.$==1&&(dQ.$1.$1.$1.$1.$1.$==0&&(dZ=[d1.$0,dQ.$1.$1.$1.$0,d0.$0,dQ.$1.$1.$1.$1.$0],true)))))))))?(d2=dZ[2],bk.entryDoc(d2,(bk.createButtonM())([dO,d2,dZ[0],dZ[1],dZ[3]]))):dQ.$==1&&(d4=bk.Identifier(dQ.$0),d4!=null&&d4.$==1&&(dQ.$1.$==1&&(bk.PlugIn(dQ.$1.$0).$==2&&(dQ.$1.$1.$==1&&(d5=bk.Identifier(dQ.$1.$1.$0),d5!=null&&d5.$==1&&(dQ.$1.$1.$1.$==1&&(dQ.$1.$1.$1.$1.$==0&&(d3=[dQ.$1.$1.$1.$0,d4.$0,d5.$0],true))))))))?(d6=d3[1],bk.entryDoc(d6,(bk.createInputM())([dO,d6,d3[2],d3[0]]))):dQ.$==1&&(d8=bk.Identifier(dQ.$0),d8!=null&&d8.$==1&&(dQ.$1.$==1&&(bk.PlugIn(dQ.$1.$0).$==3&&(dQ.$1.$1.$==1&&(d9=bk.Identifier(dQ.$1.$1.$0),d9!=null&&d9.$==1&&(dQ.$1.$1.$1.$==1&&(dQ.$1.$1.$1.$1.$==0&&(d7=[dQ.$1.$1.$1.$0,d8.$0,d9.$0],true))))))))?(d_=d7[1],bk.entryDoc(d_,(bk.createTextAreaM())([dO,d_,d7[2],d7[0]]))):dQ.$==1&&(ea=bk.Identifier(dQ.$0),ea!=null&&ea.$==1&&(dQ.$1.$==1&&(bk.Var(dQ.$1.$0).$==0&&(dQ.$1.$1.$==1&&(dQ.$1.$1.$1.$==0&&(d$=[ea.$0,bk.S(dQ.$1.$1.$0)],true))))))?(eb=d$[0],bk.entryVar(eb,(bk.createVarM())([dO,eb,d$[1]]))):dQ.$==1&&(ed=bk.Identifier(dQ.$0),ed!=null&&ed.$==1&&(dQ.$1.$==1&&(bk.Var(dQ.$1.$0).$==1&&(dQ.$1.$1.$==1&&(ec=[bk.S(dQ.$1.$1.$0),ed.$0,dQ.$1.$1.$1],true)))))?(ee=ec[1],bk.entryDoc(ee,(bk.createDocM())([dO,ee,ec[0],ec[2]]))):dQ.$==1&&(eg=bk.Identifier(dQ.$0),eg!=null&&eg.$==1&&(dQ.$1.$==1&&(bk.Var(dQ.$1.$0).$==2&&(ef=[eg.$0,dQ.$1.$1],true))))?(eh=ef[0],bk.entryView(eh,(bk.createViewM())([dO,eh,ef[1]]))):dQ.$==1&&(ej=bk.Identifier(dQ.$0),ej!=null&&ej.$==1&&(dQ.$1.$==1&&(bk.Vertical(dQ.$1.$0).$==4&&(dQ.$1.$1.$==1&&(dQ.$1.$1.$1.$==1&&(ei=[dQ.$1.$1.$1.$0,dQ.$1.$1.$1.$1,ej.$0,bk.S(dQ.$1.$1.$0)],true))))))?(ek=ei[2],bk.entryDoc(ek,(bk.createTemplateM())([dO,ek,ei[3],ei[0],ei[1]]))):dQ.$==1&&(em=bk.Identifier(dQ.$0),em!=null&&em.$==1&&(dQ.$1.$==1&&(bk.Var(dQ.$1.$0).$==3&&(el=[dQ.$1.$1,em.$0],true))))?(en=el[1],bk.entryDoc(en,(bk.createConcatM())([dO,en,el[0]]))):dQ.$==1&&(ep=bk.Identifier(dQ.$0),ep!=null&&ep.$==1&&(dQ.$1.$==1&&(bk.Var(dQ.$1.$0).$==4&&(dQ.$1.$1.$==1&&(eq=bk.Identifier(dQ.$1.$1.$0),eq!=null&&eq.$==1&&(eo=[eq.$0,ep.$0,dQ.$1.$1.$1],true))))))?(er=eo[1],bk.entryAct(er,(bk.createActionM())([dO,er,eo[0],eo[2]]))):dQ.$==1&&(et=bk.Identifier(dQ.$0),et!=null&&et.$==1&&(dQ.$1.$==1&&(eu=bk.Vertical(dQ.$1.$0),eu.$==5&&(dQ.$1.$1.$==1&&(es=[dQ.$1.$1.$0,dQ.$1.$1.$1,eu.$0,et.$0],true)))))?(ev=es[3],bk.entryDoc(ev,(bk.createElementM())([dO,ev,es[2],es[0],es[1]]))):null;}catch(ew){return null;}};bk.processLines=function(dO,dP){function dQ(dR){var dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;dS=$.tryHead(dR);return dS!=null&&dS.$==1?(dT=dS.$0,(dU=bk.splitTokens(dT),dU.$==1&&(dW=bk.Identifier(dU.$0),dW!=null&&dW.$==1&&(dU.$1.$==1&&(bk.Vertical(dU.$1.$0).$==2&&(dU.$1.$1.$==0&&(dV=dW.$0,true)))))?(dX=bk.getExtraLines(function(d4){return b8.StartsWith(b8.Trim(d4),"|");},dR),dQ((c8.createLayoutDefinitions(dV,c8.extractNodes(dX[0])))[1].concat(dX[1]))):dU.$==0?dQ(bH.array(dR,{$:1,$0:1},null)):(dY=bk.getExtraLines(function(d4){return b8.StartsWith(b8.Trim(d4),":");},dR),(dZ=dY[1],(d0=dY[0],_8.length(d0)>0?(d1=bk.createLines($.nth(0,b8.SplitChars(dT,[" "],1)),1,[],[],1,d0),(d2=d1[0],(d3=d1[1],dQ(_8.ofSeq($.delay(function(){return $.append(d3,$.delay(function(){return $.append([dT+" "+b8.concat(" ",d2)],$.delay(function(){return dZ;}));}));})))))):_8.ofSeq($.delay(function(){var d4;return $.append((d4=dO(dT),d4!=null&&d4.$==1?[d4.$0]:[]),$.delay(function(){return dQ(dZ);}));}))))))):[];}return dQ(dP);};bk.splitName=function(){cl.$cctor();return cl.splitName;};bk.getAttrs=function(dO,dP){var dQ;dQ=bk.S(dP);return bu.ofSeq($.delay(function(){return $.append($.choose(function(dR){var dS,dT,dU,dV;function dW(dX,dY){var dZ;return dY.$==1?(dZ=dY.$0,dX.addEventListener(b8.Trim(dV),function(d0){return bg.callFunction(dX,d0,dZ.actFunction);},false)):dX.setAttribute(b8.Trim(dV),b8.Trim(dY.$0));}return!U.Equals(dR,null)&&dR.length===2&&(dT=_8.get(dR,1),b8.Trim(_8.get(dR,0))!==""&&b8.Trim(dT)!=="")?(dU=_8.get(dR,1),(dV=_8.get(dR,0),{$:1,$0:bA.DynamicCustom(function(dX){return function(dY){return dW(dX,dY);};},bk.getTextData(dO,b8.Trim(dU)))})):null;},$.map(function(dR){return bF.splitByChar("=",dR);},bF.splitByChar(";",dQ))),$.delay(function(){return $.choose(function(dR){var dS,dT,dU,dV,dW;return!U.Equals(dR,null)&&dR.length===2&&(dT=_8.get(dR,1),b8.Trim(_8.get(dR,0))!==""&&b8.Trim(dT)!=="")?(dU=_8.get(dR,1),(dV=_8.get(dR,0),{$:1,$0:(dW=S.Map(function(dX){return dX.$==1?(function(dY){return function(dZ){return dY("@{"+be.toSafe(dZ)+"}");};}(a.id))(dX.$0.actName):b8.Trim(dX.$0);},bk.getTextData(dO,b8.Trim(dU))),bA.DynamicStyle(b8.Trim(dV),dW))})):null;},$.map(function(dR){return bF.splitByChar(":",dR);},bF.splitByChar(";",dQ)));}));}));};bk.getText=function(dO,dP){var dQ,dR,dS,dT,dU,dV,dW,dX,dY;dQ=bk.Identifier(dP);return dQ!=null&&dQ.$==1?(dR=dQ.$0,(dS=((bk.splitName())(dO))(dR),(dT=dS[0],(dU=dS[1],(dV=(dW=bg.tryGetViw(dT,dU),dW==null?null:{$:1,$0:bq.TextView(dW.$0.viwView)}),dV==null?(dX=(dY=bg.tryGetVar(dT,dU),dY==null?null:{$:1,$0:bq.TextView(dY.$0.varVar.get_View())}),dX==null?bq.TextNode(dR):dX.$0):dV.$0))))):bq.TextNode(bk.S(dP));};bk.singleDoc=function(dO,dP){return bq.EmbedView(S.Map(function(dQ){var dR;return dQ.$==1&&(dQ.$1.$==0&&(dR=dQ.$0,true))?dR:bg.errDoc((function(dS){return function(dT){return dS("expected exactly 1 element "+be.printList(function(dU){return cG.p$4(dU);},dT));};}(a.id))(dP));},S.Map(function(){return bk.getAllDocs(dO,dP);},bk.currentViewTriggger())));};bk.getTextData=function(dO,dP){var dQ,dR,dS,dT;dQ=(dR=bF.delimitedO("@{","}",dP),dR==null?null:{$:1,$0:(dS=dR.$0,(dT=dS[0],bk.getOneTextData(dO,dS[1],dT,dS[2])))});return dQ==null?S.Const({$:0,$0:dP}):dQ.$0;};bk.pairOfDocs=function(dO,dP){var dQ;dQ=S.Map(function(dR){var dS;return dR.$==1&&(dR.$1.$==1&&(dR.$1.$1.$==0&&(dS=[dR.$0,dR.$1.$0],true)))?[dS[0],dS[1]]:[bg.errDoc((function(dT){return function(dU){return dT("splitter expects exactly 2 elements "+be.printList(function(dV){return cG.p$4(dV);},dU));};}(a.id))(dP)),bg.errDoc("part 2")];},S.Map(function(){return bk.getAllDocs(dO,dP);},bk.currentViewTriggger()));return[bq.EmbedView(S.Map(function(dR){return dR[0];},dQ)),bq.EmbedView(S.Map(function(dR){return dR[1];},dQ))];};bk.fixedSplitter=function(dO,dP,dQ,dR,dS){var dT,dU,dV,dW,dX,dY,dZ;dT=(((dQ?dH.Curried3(function(d0,d1,d2){return d0(d1.toFixed(6)+"px calc(100% - "+d2.toFixed(6)+"px)");}):dH.Curried3(function(d0,d1,d2){return d0("calc(100% - "+d1.toFixed(6)+"px) "+d2.toFixed(6)+"px");}))(a.id))(dP))(dP);return dO?(dU=bS.Make().WithHole({$:1,$0:"partsizes",$1:dT}).WithHole({$:0,$0:"first",$1:dR}).WithHole({$:0,$0:"second",$1:dS}),(dV=bT.CompleteHoles(dU.k,dU.h,[]),(dW=new bR.New(dV[1],cF.fixedsplitterver(dV[0])),(dU.i=dW,dW)))).get_Doc():(dX=bS.Make().WithHole({$:1,$0:"partsizes",$1:dT}).WithHole({$:0,$0:"first",$1:dR}).WithHole({$:0,$0:"second",$1:dS}),(dY=bT.CompleteHoles(dX.k,dX.h,[]),(dZ=new bR.New(dY[1],cF.fixedsplitterhor(dY[0])),(dX.i=dZ,dZ)))).get_Doc();};bk.S=function(dO){return dO.$==1?dO.$0:dO.$0;};bk.getAllDocs=function(dO,dP){return dP.$==1?new bv({$:1,$0:bk.getADoc(dO,dP.$0),$1:bk.getAllDocs(dO,dP.$1)}):bv.Empty;};bk.getDocFinal=function(dO,dP){var dQ;dQ=bk.getDocF(dO,dP);return dQ[1].$==0?dQ[0]:bg.errDoc((((dH.Curried3(function(dR,dS,dT){return dR("Too many parameters "+cE.p$1(dS)+" "+be.printList(function(dU){return cG.p$4(dU);},dT));}))(a.id))(dP))(dO));};bk.Identifier=function(dO){var dP,dQ,dR;return dO.$==1&&(dQ=c.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",dO.$0),dQ!=null&&dQ.$==1&&((dR=dQ.$0,!U.Equals(dR,null)&&dR.length===1)&&(dP=_8.get(dQ.$0,0),true)))?{$:1,$0:dP}:null;};bk.getDocF=function(dO,dP){var dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1;dR=dP.docDoc;switch(dR.$==1?dO.$==1?(dQ=[dR.$0,bk.S(dO.$0),dO.$1],1):6:dR.$==2?dO.$==1?(dS=bk.S(dO.$0),dO.$1.$==1?(dQ=[dR.$0,dS,bk.S(dO.$1.$0),dO.$1.$1],2):6):6:dR.$==3?dO.$==1?(dT=bk.S(dO.$0),dO.$1.$==1?(dU=bk.S(dO.$1.$0),dO.$1.$1.$==1?(dQ=[dR.$0,dT,dU,bk.S(dO.$1.$1.$0),dO.$1.$1.$1],3):6):6):6:dR.$==4?dO.$==1?(dV=bk.S(dO.$0),dO.$1.$==1?(dW=bk.S(dO.$1.$0),dO.$1.$1.$==1?(dX=bk.S(dO.$1.$1.$0),dO.$1.$1.$1.$==1?(dQ=[dR.$0,dV,dW,dX,bk.S(dO.$1.$1.$1.$0),dO.$1.$1.$1.$1],4):6):6):6):6:dR.$==5?dO.$==1?(dY=bk.S(dO.$0),dO.$1.$==1?(dZ=bk.S(dO.$1.$0),dO.$1.$1.$==1?(d0=bk.S(dO.$1.$1.$0),dO.$1.$1.$1.$==1?(d1=bk.S(dO.$1.$1.$1.$0),dO.$1.$1.$1.$1.$==1?(dQ=[dR.$0,dY,dZ,d0,d1,bk.S(dO.$1.$1.$1.$1.$0),dO.$1.$1.$1.$1.$1],5):6):6):6):6):6:(dQ=[dR.$0,dO],0)){case 0:return[dQ[0].f(),dQ[1]];case 1:return[dQ[0](dQ[1]),dQ[2]];case 2:return[(dQ[0](dQ[1]))(dQ[2]),dQ[3]];case 3:return[((dQ[0](dQ[1]))(dQ[2]))(dQ[3]),dQ[4]];case 4:return[(((dQ[0](dQ[1]))(dQ[2]))(dQ[3]))(dQ[4]),dQ[5]];case 5:return[((((dQ[0](dQ[1]))(dQ[2]))(dQ[3]))(dQ[4]))(dQ[5]),dQ[6]];case 6:return[bq.Element("div",[],[bq.TextNode((((dH.Curried3(function(d2,d3,d4){return d2("Parameters do not coincide with definition "+cE.p$1(d3)+" - "+be.printList(function(d5){return cG.p$4(d5);},d4));}))(a.id))(dP))(dO))]),bv.Empty];}};bk.getTextToken=function(dO,dP){return dP.$==0?bk.getTextData(dO,dP.$0):bk.getOneTextData(dO,dP.$0,"","");};bk.getParamText=function(dO,dP,dQ){S.Get(function(dR){if(dR.$==1)dQ(dR.$0);else dQ(dR.$0);},bk.getTextToken(dO,dP));};bk.splitTokens=function(dO){return bk.doubleQuote(bu.ofSeq($.collect(a.id,$.mapi(function(dP,dQ){var dR;return dP%2===1?[{$:0,$0:dQ}]:dQ===""?[{$:0,$0:"\""}]:(dR=b8.Trim(dQ),dR===""?[]:_8.map(function(dS){return{$:1,$0:dS};},b8.SplitChars(dR,[" "],1)));},bF.splitByChar("\"",dO)))));};bk.Measures$1=function(dO){var dP,dQ,dR,dS,dT,dU,dV,dW,dX;return dO.$==1?(dP=bF.splitByChar("-",dO.$0),!U.Equals(dP,null)&&dP.length===1&&(dR=(bd.Double())(_8.get(dP,0)),dR!=null&&dR.$==1&&(dQ=dR.$0,true))?{$:1,$0:new dg({$:0,$0:dQ,$1:true})}:!U.Equals(dP,null)&&dP.length===2&&(_8.get(dP,0)===""&&(dT=(bd.Double())(_8.get(dP,1)),dT!=null&&dT.$==1&&(dS=dT.$0,true)))?{$:1,$0:new dg({$:0,$0:dS,$1:false})}:!U.Equals(dP,null)&&dP.length===3&&(dV=(bd.Double())(_8.get(dP,0)),dV!=null&&dV.$==1&&(dW=(bd.Double())(_8.get(dP,1)),dW!=null&&dW.$==1&&(dX=(bd.Double())(_8.get(dP,2)),dX!=null&&dX.$==1&&(dU=[dX.$0,dV.$0,dW.$0],true))))?{$:1,$0:new dg({$:1,$0:dU[1],$1:dU[2],$2:dU[0]})}:null):null;};bk.Vertical=function(dO){var dP,dQ,dR,dS,dT,dU;return dO.$==1&&(dO.$0==="vertical"&&(dP=dO.$0,true))?{$:0,$0:null}:dO.$==1&&(dO.$0==="horizontal"&&(dQ=dO.$0,true))?{$:1,$0:null}:dO.$==1&&(dO.$0==="layout"&&(dR=dO.$0,true))?{$:2,$0:null}:dO.$==1&&(dO.$0==="grid"&&(dS=dO.$0,true))?{$:3,$0:null}:dO.$==1&&(dO.$0==="template"&&(dT=dO.$0,true))?{$:4,$0:null}:(dU=bk.Identifier(dO),dU!=null&&dU.$==1?{$:5,$0:dU.$0}:{$:6,$0:null});};bk.entryDoc=function(dO,dP){return{$:1,$0:{$:2,$0:bg.newDoc(dO,bj.Create(function(){return dP;}))}};};bk.createSplitterM=function(){cl.$cctor();return cl.createSplitterM;};bk.PlugIn=function(dO){var dP,dQ,dR,dS,dT;return dO.$==1&&(dO.$0==="PlugIn"&&(dP=dO.$0,true))?{$:0,$0:null}:dO.$==1&&(dO.$0==="Button"&&(dQ=dO.$0,true))?{$:1,$0:null}:dO.$==1&&(dO.$0==="input"&&(dR=dO.$0,true))?{$:2,$0:null}:dO.$==1&&(dO.$0==="textarea"&&(dS=dO.$0,true))?{$:3,$0:null}:dO.$==1&&(dO.$0==="select"&&(dT=dO.$0,true))?{$:4,$0:null}:{$:5,$0:null};};bk.createButtonM=function(){cl.$cctor();return cl.createButtonM;};bk.createInputM=function(){cl.$cctor();return cl.createInputM;};bk.createTextAreaM=function(){cl.$cctor();return cl.createTextAreaM;};bk.Var=function(dO){var dP,dQ,dR,dS,dT;return dO.$==1&&(dO.$0==="Var"&&(dP=dO.$0,true))?{$:0,$0:null}:dO.$==1&&(dO.$0==="Doc"&&(dQ=dO.$0,true))?{$:1,$0:null}:dO.$==1&&(dO.$0==="View"&&(dR=dO.$0,true))?{$:2,$0:null}:dO.$==1&&(dO.$0==="Concat"&&(dS=dO.$0,true))?{$:3,$0:null}:dO.$==1&&(dO.$0==="Action"&&(dT=dO.$0,true))?{$:4,$0:null}:{$:5,$0:null};};bk.entryVar=function(dO,dP){return{$:1,$0:{$:0,$0:bg.newVar(dO,dP)}};};bk.createVarM=function(){cl.$cctor();return cl.createVarM;};bk.createDocM=function(){cl.$cctor();return cl.createDocM;};bk.entryView=function(dO,dP){return{$:1,$0:{$:1,$0:bg.newViw(dO,dP)}};};bk.createViewM=function(){cl.$cctor();return cl.createViewM;};bk.createTemplateM=function(){cl.$cctor();return cl.createTemplateM;};bk.createConcatM=function(){cl.$cctor();return cl.createConcatM;};bk.entryAct=function(dO,dP){return{$:1,$0:{$:3,$0:bg.newActF(dO,dP)}};};bk.createActionM=function(){cl.$cctor();return cl.createActionM;};bk.createElementM=function(){cl.$cctor();return cl.createElementM;};bk.getExtraLines=function(dO,dP){var dQ,dR,dS,dT;dQ=(dR=(dS=$.tryFindIndex(function(dU){return b8.Trim(dU)!==""&&!dO(dU);},$.skip(1,dP)),dS==null?null:{$:1,$0:1+dS.$0}),(dT=_8.length(dP),dR==null?dT:dR.$0));return[bH.array(dP,{$:1,$0:1},{$:1,$0:dQ-1}),bH.array(dP,{$:1,$0:dQ},null)];};bk.createLines=function(dO,dP,dQ,dR,dS,dT){var dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;dU=b8.replicate(dP,":");dV=":"+dU;dW=$.tryHead(dT);return dW!=null&&dW.$==1?(dX=bF.StartsWith(dU,b8.Trim(dW.$0)),dX!=null&&dX.$==1?(dY=dX.$0,(dZ=bk.getExtraLines(function(d4){return b8.StartsWith(b8.Trim(d4),dV);},dT),(d0=(((dH.Curried3(function(d4,d5,d6){return d4("_"+be.toSafe(d5)+"_"+a.String(d6));}))(a.id))(dO))(dS),(d1=bk.createLines(d0,dP+1,[],[],1,dZ[0]),(d2=d1[1],(d3=d1[0],bk.createLines(dO,dP,_8.ofSeq($.delay(function(){return $.append(dQ,$.delay(function(){return[d0];}));})),_8.ofSeq($.delay(function(){return $.append(dR,$.delay(function(){return $.append(d2,$.delay(function(){return[d0+" "+dY+" "+b8.concat(" ",d3)];}));}));})),dS+1,dZ[1]))))))):[dQ,dR]):[dQ,dR];};bk.getOneTextData=function(dO,dP,dQ,dR){var dS,dT,dU;dS=((bk.splitName())(dO))(dP);dT=dS[0];dU=dS[1];return S.Bind(function(dV){return dV==null?S.Bind(function(dW){var dX;return dW==null?S.Const({$:0,$0:((((dH.Curried(function(dY,dZ,d0,d1){return dY(be.toSafe(dZ)+" @{Missing "+be.toSafe(d0)+"}"+be.toSafe(d1));},4))(a.id))(dQ))(dP))(dR)}):(dX=dW.$0,S.Bind(function(dY){return dY.$==1?S.Const({$:0,$0:(function(dZ){return function(d0){return dZ("Unexpected Action @{"+be.toSafe(d0)+"}");};}(a.id))(dY.$0.actName)}):S.Const({$:0,$0:dQ+dX+dY.$0});},bk.getTextData(dO,dR)));},bg.tryGetWoWW(dT,dU)):S.Const({$:1,$0:dV.$0});},bg.tryGetActW(dT,dU));};bk.getADoc=function(dO,dP){var dQ,dR,dS,dT,dU;dQ=bk.Identifier(dP);return dQ!=null&&dQ.$==1?(dR=dQ.$0,(dS=((bk.splitName())(dO))(dR),(dT=dS[0],(dU=dS[1],bq.BindView(function(dV){return dV==null?bq.BindView(function(dW){var dX;return dW==null?bg.errDoc((dX=(function(dY){return function(dZ){return dY("Missing doc: "+be.toSafe(dZ));};}(a.id))(dR),(Y.print(dX),dX))):bq.TextNode(dW.$0);},bg.tryGetWoWW(dT,dU)):(bk.getDocF(bv.Empty,dV.$0))[0];},bg.tryGetDocW(dT,dU)))))):bq.TextView(S.Map(function(dV){return dV.$==1?(function(dW){return function(dX){return dW("Unexpected action: "+be.toSafe(dX));};}(a.id))(dV.$0.actName):dV.$0;},bk.getTextData(dO,bk.S(dP))));};bk.doubleQuote=function(dO){var dP,dQ,dR;switch(dO.$==1?dO.$0.$==1?b8.StartsWith(dO.$0.$0,"//")?(dP=dO.$0.$0,1):2:2:0){case 0:return bv.Empty;case 1:return bv.Empty;case 2:switch(dO.$==1?dO.$0.$==0?dO.$1.$==1?dO.$1.$0.$==0?dO.$1.$0.$0==="\""?dO.$1.$1.$==0?(dR=dO.$0.$0,1):dO.$1.$1.$0.$==0?(dR=[dO.$1.$1.$1,dO.$0.$0,dO.$1.$1.$0.$0],0):(dR=[dO.$0,dO.$1],2):(dR=[dO.$0,dO.$1],2):(dR=[dO.$0,dO.$1],2):(dR=[dO.$0,dO.$1],2):(dR=[dO.$0,dO.$1],2):3){case 0:dQ=bk.doubleQuote(new bv({$:1,$0:{$:0,$0:dR[1]+"\""+dR[2]},$1:dR[0]}));break;case 1:dQ=bu.ofArray([{$:0,$0:dR}]);break;case 2:dQ=new bv({$:1,$0:dR[0],$1:bk.doubleQuote(dR[1])});break;case 3:throw new ds.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\src\\LayoutEngine.fs",1378,38);}return dQ;}};bl.New=function(dO,dP){return{varName:dO,varVar:dP};};bm.New=function(dO,dP){return{viwName:dO,viwView:dP};};bn.New=function(dO,dP){return{docName:dO,docDoc:dP};};bo.New=function(dO,dP,dQ){return{actName:dO,actFunction:dP,actEnabled:dQ};};bp.New=function(dO,dP){return{qryName:dO,qryFunction:dP};};bq=Q.Doc=dH.Class({},m,bq);bq.Concat=function(dO){var dP;dP=cp.ofSeqNonCopying(dO);return cp.TreeReduce(bq.get_Empty(),bq.Append,dP);};bq.get_Empty=function(){return bq.Mk(null,S.Const());};bq.Element=function(dO,dP,dQ){var dR,dS;dR=bE.Concat(dP);dS=bq.Concat(dQ);return cU.New(cs.CreateElement(dO),dR,dS);};bq.Async=function(dO){return bq.EmbedView(S.MapAsync(a.id,S.Const(dO)));};bq.TextNode=function(dO){return bq.Mk({$:5,$0:cs.CreateText(dO)},S.Const());};bq.Input=function(dO,dP){return bq.InputInternal("input",function(){return $.append(dO,[bA.Value(dP)]);});};bq.InputArea=function(dO,dP){return bq.InputInternal("textarea",function(){return $.append(dO,[bA.Value(dP)]);});};bq.Button=function(dO,dP,dQ){var dR;dR=bE.Concat(dP);return cU.New(bq.Clickable("button",dQ),dR,bq.TextNode(dO));};bq.Append=function(dO,dP){return bq.Mk({$:0,$0:dO.docNode,$1:dP.docNode},S.Map2Unit(dO.updates,dP.updates));};bq.Mk=function(dO,dP){return new bq.New(dO,dP);};bq.Convert=function(dO,dP){return bq.Flatten(S.MapSeqCached(dO,dP));};bq.BindView=function(dO,dP){return bq.EmbedView(S.Map(dO,dP));};bq.TextView=function(dO){var dP;dP=cS.CreateTextNode();return bq.Mk({$:4,$0:dP},S.Map(function(dQ){cS.UpdateTextNode(dP,dQ);},dO));};bq.RunAppend=function(dO,dP){var dQ;dQ=self.document.createTextNode("");dO.appendChild(dQ);bq.RunBefore(dQ,dP);};bq.EmbedView=function(dO){var dP;dP=cS.CreateEmbedNode();return bq.Mk({$:2,$0:dP},S.Map(a.ignore,S.Bind(function(dQ){cS.UpdateEmbedNode(dP,dQ.docNode);return dQ.updates;},dO)));};bq.InputInternal=function(dO,dP){var dQ;dQ=cs.CreateElement(dO);return cU.New(dQ,bE.Concat(dP(dQ)),bq.get_Empty());};bq.Clickable=function(dO,dP){var dQ;dQ=cs.CreateElement(dO);dQ.addEventListener("click",function(dR){dR.preventDefault();return dP();},false);return dQ;};bq.Flatten=function(dO){return bq.EmbedView(S.Map(bq.Concat,dO));};bq.Verbatim=function(dO){var dP;return bq.Mk(cp.MapTreeReduce(function(dQ){return U.Equals(dQ.nodeType,bD.TEXT_NODE)?{$:5,$0:dQ}:{$:1,$0:cS.CreateElemNode(dQ,cr.EmptyAttr(),null)};},null,function(dQ,dR){return{$:0,$0:dQ,$1:dR};},(dP=dL.parseHTML(dO),U.Equals(dP,null)?[]:dP)),S.Const());};bq.RunBefore=function(dO,dP){var dQ;dQ=self.document.createTextNode("");dO.parentNode.insertBefore(dQ,dO);bq.RunBetween(dQ,dO,dP);};bq.RunBetween=function(dO,dP,dQ){var dR;cS.LinkPrevElement(dP,dQ.docNode);dR=cS.CreateDelimitedRunState(dO,dP,dQ.docNode);S.Sink(dn.get_UseAnimations()||_do.BatchUpdatesEnabled()?dp.StartProcessor(cS.PerformAnimatedUpdate(false,dR,dQ.docNode)):function(){cS.PerformSyncUpdate(false,dR,dQ.docNode);},dQ.updates);};bq.Run=function(dO,dP){cS.LinkElement(dO,dP.docNode);bq.RunInPlace(false,dO,dP);};bq.ConvertBy=function(dO,dP,dQ){return bq.Flatten(S.MapSeqCachedBy(dO,dP,dQ));};bq.RunInPlace=function(dO,dP,dQ){var dR;dR=cS.CreateRunState(dP,dQ.docNode);S.Sink(dn.get_UseAnimations()||_do.BatchUpdatesEnabled()?dp.StartProcessor(cS.PerformAnimatedUpdate(dO,dR,dQ.docNode)):function(){cS.PerformSyncUpdate(dO,dR,dQ.docNode);},dQ.updates);};bq.New=dH.Ctor(function(dO,dP){m.New.call(this);this.docNode=dO;this.updates=dP;},bq);br.insertWO=function(dO){return dO==null?S.Const(null):S.Map(function(dP){return{$:1,$0:dP};},dO.$0);};br.traverseListApp=function(dO,dP){function dQ(dR,dS){return new bv({$:1,$0:dR,$1:dS});}return bu.foldBack(function(dR,dS){return br.op_LessMultiplyGreater(br.op_LessMultiplyGreater(br.rtn(function(dT){return function(dU){return dQ(dT,dU);};}),dO(dR)),dS);},dP,br.rtn(bv.Empty));};br.rtn=function(dO){return S.Const(dO);};br.op_LessMultiplyGreater=function(dO,dP){return S.Apply(dO,dP);};br.traverseSeq=function(dO,dP){return br.map(a.id,_8.foldBack(function(dQ,dR){return br.op_GreaterGreaterEquals(dO(dQ),function(dS){return br.op_GreaterGreaterEquals(dR,function(dT){return br.rtn(new bv({$:1,$0:dS,$1:dT}));});});},_8.ofSeq(dP),br.rtn(bv.Empty)));};br.map=function(dO,dP){return S.Map(dO,dP);};br.op_GreaterGreaterEquals=function(dO,dP){return br.bind(dP,dO);};br.bind=function(dO,dP){return S.Bind(dO,dP);};bs.New=function(dO,dP){return{lytName:dO,lytDefinition:dP};};bt.B={$:0};bi.Create=function(dO,dP){return bi.CreateWithStorage(dO,cq.InMemory(_8.ofSeq(dP)));};bi.CreateWithStorage=function(dO,dP){return new bi.New(dO,dP);};bv=bu.T=dH.Class({GetEnumerator:function(){return new cj.New(this,null,function(dO){var dP;dP=dO.s;return dP.$==0?false:(dO.c=dP.$0,dO.s=dP.$1,true);},void 0);},GetEnumerator0:function(){return ci.Get(this);}},null,bv);bv.Empty=new bv({$:0});bx.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(dO){var dP,dQ;dP=dK.random()*16|0;dQ=dO=="x"?dP:dP&3|8;return dQ.toString(16);});};bx.TryParse=function(dO,dP){try{dP.set(bx.Parse(dO));return true;}catch(dQ){return false;}};bx.Parse=function(dO){var dP,dQ,dR;try{return bx.ParseExact(dO,"D");}catch(dS){try{dP=bx.ParseExact(dO,"B");}catch(dT){try{dQ=bx.ParseExact(dO,"P");}catch(dU){try{dR=bx.ParseExact(dO,"N");}catch(dV){dR=bx.ParseExact(dO,"X");}dQ=dR;}dP=dQ;}return dP;}};bx.ParseExact=function(dO,dP){var dQ,dR,dS,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;function dT(d4){var d5,d6,d7,d8;for(d5=0,d6=35;d5<=d6;d5++){d5===8||(d5===13||(d5===18||d5===23))?d4[d5]!=="-"?bx.ShapeError():void 0:(d8=d4[d5],!("0"<=d8&&d8<="9"||"a"<=d8&&d8<="f")?bx.ShapeError():void 0);}return d4;}dU=dP.toUpperCase();if(dU==="N"){dV=b8.Trim(dO).toLowerCase();if(dV.length!==32)bx.ShapeError();for(dW=0,dX=31;dW<=dX;dW++){dY=dV[dW];!("0"<=dY&&dY<="9"||"a"<=dY&&dY<="f")?bx.ShapeError():void 0;}return b8.Substring(dV,0,8)+"-"+b8.Substring(dV,8,4)+"-"+b8.Substring(dV,12,4)+"-"+b8.Substring(dV,16,4)+"-"+dV.substring(20);}else if(dU==="D"){dQ=b8.Trim(dO).toLowerCase();dQ.length!==36?bx.ShapeError():void 0;return dT(dQ);}else if(dU==="B"){dR=b8.Trim(dO).toLowerCase();dR.length!==38||dR[0]!=="{"||dR[17]!=="}"?bx.ShapeError():void 0;return dT(b8.Substring(dR,1,36));}else if(dU==="P"){dS=b8.Trim(dO).toLowerCase();dS.length!==38||dS[0]!=="("||dS[17]!==")"?bx.ShapeError():void 0;return dT(b8.Substring(dS,1,36));}else if(dU==="X"){dZ=b8.Trim(dO).toLowerCase();if(dZ.length!==68)bx.ShapeError();for(d0=0,d1=67;d0<=d1;d0++){switch(d0){case 26:case 0:if(dZ[d0]!=="{")bx.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(dZ[d0]!=="0")bx.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(dZ[d0]!=="x")bx.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(dZ[d0]!==",")bx.ShapeError();break;case 67:case 66:if(dZ[d0]!=="{")bx.ShapeError();break;default:d3=dZ[d0];!("0"<=d3&&d3<="9"||"a"<=d3&&d3<="f")?bx.ShapeError():void 0;break;}}return b8.Substring(dZ,3,8)+"-"+b8.Substring(dZ,14,4)+"-"+b8.Substring(dZ,21,4)+"-"+b8.Substring(dZ,29,2)+b8.Substring(dZ,34,2)+"-"+b8.Substring(dZ,39,2)+b8.Substring(dZ,44,2)+b8.Substring(dZ,49,2)+b8.Substring(dZ,54,2)+b8.Substring(dZ,59,2)+b8.Substring(dZ,64,2);}else return bx.FormatError();};bx.ShapeError=function(){throw new dk.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bx.FormatError=function(){throw new dk.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bz.op_GreaterGreaterEquals=function(dO,dP){return by.bind(dP,dO);};bz.op_BarGreaterGreater=function(dO,dP){return(by.map(dP))(dO);};bz.rtn=function(){V.$cctor();return V.rtn$1;};bz.depend=function(){V.$cctor();return V.depend$1;};bz.op_GreaterMultiplyGreater=function(dO,dP){var dQ;dQ=bz.depend();return dQ.Delay(function(){return dQ.Bind(dP,function(dR){return dQ.Return(function(dS){return dR(dO(dS));});});});};bA.DynamicStyle=function(dO,dP){return cr.Dynamic(dP,function(dQ){return function(dR){return cs.SetStyle(dQ,dO,dR);};});};bA.Style=function(dO,dP){return cr.Static(function(dQ){cs.SetStyle(dQ,dO,dP);});};bA.DynamicCustom=function(dO,dP){return cr.Dynamic(dP,dO);};bA.DynamicPred=function(dO,dP,dQ){function dR(dS,dT){return dT[0]?cs.SetAttr(dS,dO,dT[1]):cs.RemoveAttr(dS,dO);}return cr.Dynamic(S.Map2(function(dS,dT){return[dS,dT];},dP,dQ),function(dS){return function(dT){return dR(dS,dT);};});};bA.Dynamic=function(dO,dP){return cr.Dynamic(dP,function(dQ){return function(dR){return cs.SetAttr(dQ,dO,dR);};});};bA.Value=function(dO){function dP(dQ){return{$:1,$0:dQ};}return bA.CustomValue(dO,a.id,function(dQ){return dP(a.id(dQ));});};bA.CustomValue=function(dO,dP,dQ){return bA.CustomVar(dO,function(dR,dS){dR.value=dP(dS);},function(dR){return dQ(dR.value);});};bA.CustomVar=function(dO,dP,dQ){function dR(dT,dU){return dO.UpdateMaybe(function(dV){var dW,dX;dW=dQ(dT);return dW!=null&&dW.$==1&&(!U.Equals(dW.$0,dV)&&(dX=[dW,dW.$0],true))?dX[0]:null;});}function dS(dT,dU){var dV,dW;dV=dQ(dT);return dV!=null&&dV.$==1&&(U.Equals(dV.$0,dU)&&(dW=dV.$0,true))?null:dP(dT,dU);}return bE.Concat([bA.Handler("change",function(dT){return function(dU){return dR(dT,dU);};}),bA.Handler("input",function(dT){return function(dU){return dR(dT,dU);};}),bA.Handler("keypress",function(dT){return function(dU){return dR(dT,dU);};}),bA.DynamicCustom(function(dT){return function(dU){return dS(dT,dU);};},dO.get_View())]);};bA.Handler=function(dO,dP){return cr.Static(function(dQ){dQ.addEventListener(dO,function(dR){return(dP(dQ))(dR);},false);});};bA.OnAfterRender=function(dO){return new bE({$:4,$0:dO});};bA.Checked=function(dO){function dP(dQ,dR){return!U.Equals(dO.Get(),dQ.checked)?dO.Set(dQ.checked):null;}return bE.Concat([bA.DynamicProp("checked",dO.get_View()),bA.Handler("change",function(dQ){return function(dR){return dP(dQ,dR);};})]);};bA.IntValue=function(dO){return bA.CustomVar(dO,function(dP,dQ){var dR;dR=dQ.get_Input();return dP.value!==dR?void(dP.value=dR):null;},function(dP){var dQ,dR,dS;dQ=dP.value;return{$:1,$0:dy.isBlank(dQ)?(dP.checkValidity?dP.checkValidity():true)?new cY({$:2,$0:dQ}):new cY({$:1,$0:dQ}):(dR=(dS=0,[P.TryParseInt32(dQ,{get:function(){return dS;},set:function(dT){dS=dT;}}),dS]),dR[0]?new cY({$:0,$0:dR[1],$1:dQ}):new cY({$:1,$0:dQ}))};});};bA.IntValueUnchecked=function(dO){return bA.CustomValue(dO,a.String,function(dP){var dQ;return dy.isBlank(dP)?{$:1,$0:0}:(dQ=+dP,dQ!==dQ>>0?null:{$:1,$0:dQ});});};bA.FloatValue=function(dO){return bA.CustomVar(dO,function(dP,dQ){var dR;dR=dQ.get_Input();return dP.value!==dR?void(dP.value=dR):null;},function(dP){var dQ,dR;dQ=dP.value;return{$:1,$0:dy.isBlank(dQ)?(dP.checkValidity?dP.checkValidity():true)?new cY({$:2,$0:dQ}):new cY({$:1,$0:dQ}):(dR=+dQ,a.isNaN(dR)?new cY({$:1,$0:dQ}):new cY({$:0,$0:dR,$1:dQ}))};});};bA.FloatValueUnchecked=function(dO){return bA.CustomValue(dO,a.String,function(dP){var dQ;return dy.isBlank(dP)?{$:1,$0:0}:(dQ=+dP,a.isNaN(dQ)?null:{$:1,$0:dQ});});};bA.DynamicProp=function(dO,dP){return cr.Dynamic(dP,function(dQ){return function(dR){dQ[dO]=dR;};});};bB.p$3=function(dO){return dO.$==1?"VConst "+bB.p$5(dO.$0):"VView "+bB.p$4(dO.$0);};bB.p=function(dO){return dO.$==1?"VConst "+bB.p$2(dO.$0):"VView "+bB.p$1(dO.$0);};bC.snippet=function(dO){cD.LoadLocalTemplates("templates");return dO?cD.NamedTemplate("templates",{$:1,$0:"snippet"},dO):void 0;};bB.p$5=function(dO){return dO.$==1?"Choice2Of2 "+be.prettyPrint(dO.$0):"Choice1Of2 "+be.prettyPrint(dO.$0);};bB.p$4=function(dO){return"View <fun>";};bB.p$2=function(dO){return dO.$==1?"Choice2Of2 "+cE.p(dO.$0):"Choice1Of2 "+be.prettyPrint(dO.$0);};bB.p$1=function(dO){return"View <fun>";};bE=Q.AttrProxy=dH.Class({},null,bE);bE.Create=function(dO,dP){return cr.Static(function(dQ){cs.SetAttr(dQ,dO,dP);});};bE.Concat=function(dO){var dP;dP=cp.ofSeqNonCopying(dO);return cp.TreeReduce(cr.EmptyAttr(),bE.Append,dP);};bE.OnAfterRenderImpl=function(dO){return new bE({$:4,$0:dO});};bE.Append=function(dO,dP){return cr.AppendTree(dO,dP);};bE.HandlerImpl=function(dO,dP){return cr.Static(function(dQ){dQ.addEventListener(dO,function(dR){return(dP(dQ))(dR);},false);});};bE.Handler=function(dO,dP){return bE.HandlerImpl(dO,dP);};bF.delimitedO=function(dO,dP,dQ){var dR,dS,dT,dU,dV;dR=bF.splitInTwoO(dO,dQ);return dR==null?null:(dS=dR.$0,(dT=dS[0],(dU=bF.splitInTwoO(dP,dS[1]),dU==null?null:{$:1,$0:(dV=dU.$0,[dT,dV[0],dV[1]])})));};bF.splitInTwoO=function(dO,dP){var dQ;dQ=dP.indexOf(dO);return dQ===-1?null:{$:1,$0:[Y["String.Left"](dP,dQ),dP.substring(dQ+dO.length)]};};bF.splitByChar=function(dO,dP){return b8.SplitChars(dP,[dO],0);};bF.unindent=function(dO){var dP,dQ,dR,dS;dP=b8.SplitChars(dO,["\n"],0);dQ=(dR=$.tryFindIndex(function(dT){return" "!==dT;},(dS=$.tryFind(function(dT){return b8.Trim(dT)!=="";},dP),dS==null?"":dS.$0)),dR==null?0:dR.$0);return $.filter(function(dT){return!b8.StartsWith(dT,"# 1 ");},$.map(function(dT){return dT.length<=dQ?"":dT.substring(dQ);},dP));};bF.unindentStr=function(){cl.$cctor();return cl.unindentStr;};bF.StartsWith=function(dO,dP){return b8.StartsWith(dP,dO)?{$:1,$0:bH.string(dP,{$:1,$0:dO.length},null)}:null;};bu.ofArray=function(dO){var dP,dQ,dR;dP=bv.Empty;for(dQ=_8.length(dO)-1,dR=0;dQ>=dR;dQ--)dP=new bv({$:1,$0:_8.get(dO,dQ),$1:dP});return dP;};bu.map=function(dO,dP){var dQ,dR,dS,dT,dU;if(dP.$==0)return dP;else{dT=new bv({$:1});dQ=dT;dR=dP;dS=true;while(dS){dQ.$0=dO(dR.$0);dR=dR.$1;dR.$==0?dS=false:dQ=(dU=new bv({$:1}),dQ.$1=dU,dU);}dQ.$1=bv.Empty;return dT;}};bu.foldBack=function(dO,dP,dQ){return _8.foldBack(dO,_8.ofList(dP),dQ);};bu.ofSeq=function(dO){var dP,dQ,dR,dS,dT,dU;if(dO instanceof bv)return dO;else if(dO instanceof a.Array)return bu.ofArray(dO);else{dP=ci.Get(dO);try{dR=dP.MoveNext();if(!dR)dQ=bv.Empty;else{dT=new bv({$:1});dS=dT;while(dR){dS.$0=dP.Current();dP.MoveNext()?dS=(dU=new bv({$:1}),dS.$1=dU,dU):dR=false;}dS.$1=bv.Empty;dQ=dT;}return dQ;}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}}};bu.head=function(dO){return dO.$==1?dO.$0:bu.listEmpty();};bu.tail=function(dO){return dO.$==1?dO.$1:bu.listEmpty();};bu.append=function(dO,dP){var dQ,dR,dS,dT,dU;if(dO.$==0)return dP;else if(dP.$==0)return dO;else{dT=new bv({$:1});dQ=dT;dR=dO;dS=true;while(dS){dQ.$0=dR.$0;dR=dR.$1;dR.$==0?dS=false:dQ=(dU=new bv({$:1}),dQ.$1=dU,dU);}dQ.$1=dP;return dT;}};bu.listEmpty=function(){return T.FailWith("The input list was empty.");};bG=by.DependBuilder=dH.Class({Delay:function(dO){return dO();},Bind:function(dO,dP){return by.bind(dP,dO);},Return:function(dO){return by.rtn(dO);}},m,bG);bG.New=dH.Ctor(function(){m.New.call(this);},bG);by.resolver=function(dO,dP){function dQ(dR){var dS,dT,dU,dV,dW;function dX(dZ){return dZ[0];}function dY(dZ){return dU===dZ;}return dR.$==1?dR.$0:(dS=dR.$0,dS!=null&&dS.$==1)?(dT=dR.$1,(dU=dR.$0.$0[0],dQ((dV=(dW=$.tryFind(function(dZ){return dY(dX(dZ));},dO),dW==null?null:{$:1,$0:dT(dW.$0[1])}),dV==null?dT(dR.$0.$0[1]):dV.$0)))):dQ(dR.$1(void 0));}return dQ(dP);};by.depend=function(){V.$cctor();return V.depend;};by.rtn=function(dO){return{$:1,$0:dO};};by.dependByName=function(dO,dP,dQ){return{$:0,$0:{$:1,$0:[dO,dP]},$1:function(dR){return{$:1,$0:dQ(dR)};}};};by.bind=function(dO,dP){function dQ(dR){var dS,dT;return dR.$==1?(dS=dR.$0,{$:0,$0:null,$1:function(){return dO(dS);}}):(dT=dR.$1,{$:0,$0:dR.$0,$1:function(dU){return dQ(dT(dU));}});}return dQ(dP);};by.map=function(dO){var dP;dP=function(dQ){return by.rtn(dO(dQ));};return function(dQ){return by.bind(dP,dQ);};};bH.string=function(dO,dP,dQ){return dP==null?dQ!=null&&dQ.$==1?dO.slice(0,dQ.$0+1):"":dQ==null?dO.slice(dP.$0):dO.slice(dP.$0,dQ.$0+1);};bH.array=function(dO,dP,dQ){return dP==null?dQ!=null&&dQ.$==1?dO.slice(0,dQ.$0+1):[]:dQ==null?dO.slice(dP.$0):dO.slice(dP.$0,dQ.$0+1);};Y.print=function(dO){if(typeof dO=="string")((function(dP){return function(dQ){return dP(be.toSafe(dQ));};}(function(dP){dI.log(dP);}))(dO));else((function(dP){return function(dQ){return dP(be.prettyPrint(dQ));};}(function(dP){dI.log(dP);}))(dO));};Y["String.Left"]=function(dO,dP){return dP<0?Y["String.Substring2"](dO,0,dO.length+dP):Y["String.Substring2"](dO,0,dP);};Y.delayed=function(dO,dP){var dQ;dQ=[null];return function(dR){var dS,dT;dS=dQ[0];dS==null?void 0:dS.$0.Cancel$1();dQ[0]={$:1,$0:new db.New()};cc.Start((dT=null,cc.Delay(function(){return cc.Bind(cc.Sleep(dO),function(){dP(dR);return cc.Zero();});})),{$:1,$0:dQ[0].$0});};};Y["String.Substring2"]=function(dO,dP,dQ){var dR,dS;while(true){if(dQ<=0)return"";else if(dP>=dO.length)return"";else if(dP<0){dR=dP;dP=0;dQ=dQ+dR;}else return b8.Substring(dO,dP,(dS=dO.length-dP,U.Compare(dQ,dS)===-1?dQ:dS));}};bJ.Untag$3=function(dO){return cv.cast(dO);};bJ.Tag$4=function(dO){return cv.cast(dO);};bJ.Tag$3=function(dO){return cv.cast(dO);};bJ.Untag$4=function(dO){return cv.cast(dO);};bL=bK.Dictionary=dH.Class({Add:function(dO,dP){this.add(dO,dP);},TryGetValue:function(dO,dP){var dQ,dR,dS;dQ=this;dR=this.data[this.hash(dO)];return dR==null?false:(dS=_8.tryPick(function(dT){var dU;dU=T.KeyValue(dT);return dQ.equals.apply(null,[dU[0],dO])?{$:1,$0:dU[1]}:null;},dR),dS!=null&&dS.$==1&&(dP.set(dS.$0),true));},ContainsKey:function(dO){var dP,dQ;dP=this;dQ=this.data[this.hash(dO)];return dQ==null?false:_8.exists(function(dR){return dP.equals.apply(null,[(T.KeyValue(dR))[0],dO]);},dQ);},get_Item:function(dO){return this.get(dO);},set_Item:function(dO,dP){this.set(dO,dP);},add:function(dO,dP){var dQ,dR,dS;dQ=this;dR=this.hash(dO);dS=this.data[dR];dS==null?(this.count=this.count+1,this.data[dR]=new a.Array({K:dO,V:dP})):(_8.exists(function(dT){return dQ.equals.apply(null,[(T.KeyValue(dT))[0],dO]);},dS)?cw.alreadyAdded():void 0,this.count=this.count+1,dS.push({K:dO,V:dP}));},Remove:function(dO){return this.remove(dO);},get:function(dO){var dP,dQ;dP=this;dQ=this.data[this.hash(dO)];return dQ==null?cw.notPresent():_8.pick(function(dR){var dS;dS=T.KeyValue(dR);return dP.equals.apply(null,[dS[0],dO])?{$:1,$0:dS[1]}:null;},dQ);},set:function(dO,dP){var dQ,dR,dS,dT;dQ=this;dR=this.hash(dO);dS=this.data[dR];dS==null?(this.count=this.count+1,this.data[dR]=new a.Array({K:dO,V:dP})):(dT=_8.tryFindIndex(function(dU){return dQ.equals.apply(null,[(T.KeyValue(dU))[0],dO]);},dS),dT==null?(this.count=this.count+1,dS.push({K:dO,V:dP})):dS[dT.$0]={K:dO,V:dP});},Clear:function(){this.data=[];this.count=0;},remove:function(dO){var dP,dQ,dR,dS;dP=this;dQ=this.hash(dO);dR=this.data[dQ];return dR==null?false:(dS=_8.filter(function(dT){return!dP.equals.apply(null,[(T.KeyValue(dT))[0],dO]);},dR),_8.length(dS)<dR.length&&(this.count=this.count-1,this.data[dQ]=dS,true));},get_Keys:function(){return new dm.New(this);},GetEnumerator:function(){return ci.Get0(this);},GetEnumerator0:function(){return ci.Get0(_8.concat(b0.GetFieldValues(this.data)));}},m,bL);bL.New$5=dH.Ctor(function(){bL.New$6.call(this,[],U.Equals,U.Hash);},bL);bL.New$6=dH.Ctor(function(dO,dP,dQ){var dR,dS;m.New.call(this);this.equals=dP;this.hash=dQ;this.count=0;this.data=[];dR=ci.Get(dO);try{while(dR.MoveNext()){dS=dR.Current();this.set(dS.K,dS.V);}}finally{if(typeof dR=="object"&&"Dispose"in dR)dR.Dispose();}},bL);bM.Filter=function(dO,dP){var dQ;return new cx.New$1((dQ=_8.ofSeq($.filter(dO,dP)),cB.Build(dQ,0,dQ.length-1)));};_8.set=function(dO,dP,dQ){_8.checkBounds(dO,dP);dO[dP]=dQ;};_8.get=function(dO,dP){_8.checkBounds(dO,dP);return dO[dP];};_8.checkBounds=function(dO,dP){if(dP<0||dP>=dO.length)T.FailWith("Index was outside the bounds of the array.");};_8.length=function(dO){return dO.dims===2?dO.length*dO.length:dO.length;};bN.New=function(dO,dP,dQ,dR,dS,dT,dU){return{snpId:dO,snpName:dP,snpContent:dQ,snpParentIdO:dR,snpPredIds:dS,snpProperties:dT,snpModified:dU};};bR=bQ.TemplateInstance=dH.Class({get_Doc:function(){return this.doc;}},m,bR);bR.New=dH.Ctor(function(dO,dP){m.New.call(this);this.doc=dP;this.allVars=dO.$==0?dO.$0:T.FailWith("Should not happen");},bR);bS=bQ.ProviderBuilder=dH.Class({WithHole:function(dO){this.h.push(dO);return this;}},null,bS);bS.Make=function(){var dO;return bS.New(null,(dO=bx.NewGuid(),a.String(dO)),[]);};bS.New=function(dO,dP,dQ){return new bS({i:dO,k:dP,h:dQ});};bT.EventQ2=function(dO,dP,dQ,dR){return{$:5,$0:dP,$1:true,$2:function(dS){return function(dT){return dR({Vars:dQ(),Target:dS,Event:dT});};}};};bT.CompleteHoles=function(dO,dP,dQ){var dS,dT,dU,dV,dW,dX;function dR(dY,dZ){var d0,d1,d2,d3;return dT.Contains(dY)?null:(d0=dZ===0?(d1=_2.Create$1(""),[{$:8,$0:dY,$1:d1},d1]):dZ===1?(d2=_2.Create$1(0),[{$:13,$0:dY,$1:d2},d2]):dZ===2?(d3=_2.Create$1(false),[{$:9,$0:dY,$1:d3},d3]):T.FailWith("Invalid value type"),(dS.set_Item(dY,d0[1]),{$:1,$0:d0[0]}));}dS=new bL.New$5();dT=new cy.New$3();dU=ci.Get(dP);try{while(dU.MoveNext()){dV=dU.Current();(dV.$==8?(dW=[dV.$0,cz.Box(dV.$1)],true):dV.$==11?(dW=[dV.$0,cz.Box(dV.$1)],true):dV.$==10?(dW=[dV.$0,cz.Box(dV.$1)],true):dV.$==13?(dW=[dV.$0,cz.Box(dV.$1)],true):dV.$==12?(dW=[dV.$0,cz.Box(dV.$1)],true):dV.$==9&&(dW=[dV.$0,cz.Box(dV.$1)],true))?(dX=dW[0],dT.Add(dX),dS.set_Item(dX,dW[1])):void 0;}}finally{if(typeof dU=="object"&&"Dispose"in dU)dU.Dispose();}return[$.append(dP,_8.choose(function(dY){return dR(dY[0],dY[1]);},dQ)),{$:0,$0:dS}];};bW.NewFromSeq=function(dO){var dP,dQ,dR;dP={};dQ=ci.Get(dO);try{while(dQ.MoveNext()){dR=dQ.Current();dP[dR[0]]=dR[1];}}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}return dP;};bX.deserializeWithDefs=function(dO,dP){return bX.deserialize(function(){return{$:1,$0:0};},function(){return{$:1,$0:0};},function(){return{$:1,$0:""};},function(){return{$:1,$0:false};},function(){return{$:1,$0:[]};},dO,dP);};bX.deserialize=function(dO,dP,dQ,dR,dS,dT,dU){var dV,dW;function dX(dZ){return dM.parse(dZ);}function dY(dZ){return bX.getJsonIntermediate(dO,dP,dQ,dR,dS,dZ);}dV=function(dZ){return dY(dX(dZ));};dW=[dT,dU][1];return function(dZ){return dW(dV(dZ));};};bX.getJsonIntermediate=function(dO,dP,dQ,dR,dS,dT){function dU(dV){return bX.getJsonIntermediate(dO,dP,dQ,dR,dS,dV);}return b_.New(function(){var dV;dV=!dT?null:typeof dT=="number"?{$:1,$0:dT}:null;return dV==null?dO():dV;},function(){var dV;dV=!dT?null:typeof dT=="number"?{$:1,$0:dT}:null;return dV==null?dP():dV;},function(){var dV;dV=!dT?null:typeof dT=="string"?{$:1,$0:dT}:null;return dV==null?dQ():dV;},function(){var dV;dV=!dT?null:typeof dT=="boolean"?{$:1,$0:dT}:null;return dV==null?dR():dV;},function(){var dV;dV=!dT?null:dT instanceof a.Array?{$:1,$0:_8.map(dU,dT)}:null;return dV==null?dS(dU):dV;},function(dV){var dW;return!dT?null:(dW=dT[dV],U.Equals(dW,null)?{$:1,$0:dU(null)}:!dW?null:{$:1,$0:dU(dW)});},function(){return U.Equals(typeof dT,"object")&&!U.Equals(dT,null);},function(){return U.Equals(dT,null);},function(){return(function(dV){return function(dW){return dV(be.prettyPrint(dW));};}(a.id))(dT);});};bY.serModel=function(){V.$cctor();return V.serModel;};bY.getModel=function(dO,dP,dQ){return bZ.New(_8.ofSeq(dO),dP,dQ);};bY.serSnippetId=function(){V.$cctor();return V.serSnippetId;};bY.serSnippet=function(){V.$cctor();return V.serSnippet;};bZ.New=function(dO,dP,dQ){return{snippets:dO,modified:dP,collapsed:dQ};};b0.GetFields=function(dO){var dP,dQ;dP=[];for(var dR in dO)dP.push([dR,dO[dR]]);return dP;};b0.GetFieldValues=function(dO){var dP,dQ;dP=[];for(var dR in dO)dP.push(dO[dR]);return dP;};b1.html=function(){V.$cctor();return V.html;};b2.Map=function(dO,dP){var dQ,dR;dQ=dP.s;return dQ!=null&&dQ.$==0?b2.New({$:0,$0:dO(dQ.$0)}):(dR=b2.New({$:3,$0:[],$1:[]}),(b2.When(dP,function(dS){b2.MarkDone(dR,dP,dO(dS));},dR),dR));};b2.Map2=function(dO,dP,dQ){var dR,dS,dT;function dU(dV){var dW,dX,dY;if(!(dW=dT.s,dW!=null&&dW.$==0||dW!=null&&dW.$==2)){dX=b2.ValueAndForever(dP);dY=b2.ValueAndForever(dQ);dX!=null&&dX.$==1?dY!=null&&dY.$==1?dX.$0[1]&&dY.$0[1]?b2.MarkForever(dT,dO(dX.$0[0],dY.$0[0])):b2.MarkReady(dT,dO(dX.$0[0],dY.$0[0])):void 0:void 0;}}dR=dP.s;dS=dQ.s;return dR!=null&&dR.$==0?dS!=null&&dS.$==0?b2.New({$:0,$0:dO(dR.$0,dS.$0)}):b2.Map2Opt1(dO,dR.$0,dQ):dS!=null&&dS.$==0?b2.Map2Opt2(dO,dS.$0,dP):(dT=b2.New({$:3,$0:[],$1:[]}),(b2.When(dP,dU,dT),b2.When(dQ,dU,dT),dT));};b2.WhenRun=function(dO,dP,dQ){var dR;dR=dO.s;dR==null?dQ():dR!=null&&dR.$==2?(dR.$1.push(dQ),dP(dR.$0)):dR!=null&&dR.$==3?(dR.$0.push(dP),dR.$1.push(dQ)):dP(dR.$0);};b2.WhenObsoleteRun=function(dO,dP){var dQ;dQ=dO.s;dQ==null?dP():dQ!=null&&dQ.$==2?dQ.$1.push(dP):dQ!=null&&dQ.$==3?dQ.$1.push(dP):void 0;};b2.When=function(dO,dP,dQ){var dR;dR=dO.s;dR==null?b2.Obsolete(dQ):dR!=null&&dR.$==2?(b2.EnqueueSafe(dR.$1,dQ),dP(dR.$0)):dR!=null&&dR.$==3?(dR.$0.push(dP),b2.EnqueueSafe(dR.$1,dQ)):dP(dR.$0);};b2.MarkDone=function(dO,dP,dQ){var dR;if(dR=dP.s,dR!=null&&dR.$==0)b2.MarkForever(dO,dQ);else b2.MarkReady(dO,dQ);};b2.Join=function(dO){var dP;dP=b2.New({$:3,$0:[],$1:[]});b2.When(dO,function(dQ){var dR;dR=dQ();b2.When(dR,function(dS){var dT,dU;if((dT=dR.s,dT!=null&&dT.$==0)&&(dU=dO.s,dU!=null&&dU.$==0))b2.MarkForever(dP,dS);else b2.MarkReady(dP,dS);},dP);},dP);return dP;};b2.Map2Opt1=function(dO,dP,dQ){return b2.Map(function(dR){return dO(dP,dR);},dQ);};b2.Map2Opt2=function(dO,dP,dQ){return b2.Map(function(dR){return dO(dR,dP);},dQ);};b2.ValueAndForever=function(dO){var dP;dP=dO.s;return dP!=null&&dP.$==0?{$:1,$0:[dP.$0,true]}:dP!=null&&dP.$==2?{$:1,$0:[dP.$0,false]}:null;};b2.MarkForever=function(dO,dP){var dQ,dR,dS,dT;dQ=dO.s;if(dQ!=null&&dQ.$==3){dO.s={$:0,$0:dP};dR=dQ.$0;for(dS=0,dT=_8.length(dR)-1;dS<=dT;dS++)(_8.get(dR,dS))(dP);}else void 0;};b2.MarkReady=function(dO,dP){var dQ,dR,dS,dT;dQ=dO.s;if(dQ!=null&&dQ.$==3){dO.s={$:2,$0:dP,$1:dQ.$1};dR=dQ.$0;for(dS=0,dT=_8.length(dR)-1;dS<=dT;dS++)(_8.get(dR,dS))(dP);}else void 0;};b2.MapAsync=function(dO,dP){var dQ;dQ=b2.New({$:3,$0:[],$1:[]});b2.When(dP,function(dR){cH.StartTo(dO(dR),function(dS){b2.MarkDone(dQ,dP,dS);});},dQ);return dQ;};b2.EnqueueSafe=function(dO,dP){var dQ,dR,dS,dT;dO.push(dP);if(dO.length%20===0){dQ=dO.slice(0);dq.Clear(dO);for(dR=0,dS=_8.length(dQ)-1;dR<=dS;dR++){dT=_8.get(dQ,dR);typeof dT=="object"?function(dU){if(dU.s)dO.push(dU);}(dT):function(dU){dO.push(dU);}(dT);}}else void 0;};b2.TryGet=function(dO){var dP,dQ;dP=dO.s;return(dP!=null&&dP.$==0?(dQ=dP.$0,true):dP!=null&&dP.$==2&&(dQ=dP.$0,true))?{$:1,$0:dQ}:null;};b2.Map2Unit=function(dO,dP){var dQ,dR,dS;function dT(){var dU,dV,dW;if(!(dU=dS.s,dU!=null&&dU.$==0||dU!=null&&dU.$==2)){dV=b2.ValueAndForever(dO);dW=b2.ValueAndForever(dP);dV!=null&&dV.$==1?dW!=null&&dW.$==1?dV.$0[1]&&dW.$0[1]?b2.MarkForever(dS,null):b2.MarkReady(dS,null):void 0:void 0;}}dQ=dO.s;dR=dP.s;return dQ!=null&&dQ.$==0?dR!=null&&dR.$==0?b2.New({$:0,$0:null}):dP:dR!=null&&dR.$==0?dO:(dS=b2.New({$:3,$0:[],$1:[]}),(b2.When(dO,dT,dS),b2.When(dP,dT,dS),dS));};b2.Copy=function(dO){var dP,dQ,dR;dP=dO.s;return dP==null?dO:dP!=null&&dP.$==2?(dQ=b2.New({$:2,$0:dP.$0,$1:[]}),(b2.WhenObsolete(dO,dQ),dQ)):dP!=null&&dP.$==3?(dR=b2.New({$:3,$0:[],$1:[]}),(b2.When(dO,function(dS){b2.MarkDone(dR,dO,dS);},dR),dR)):dO;};b2.WhenObsolete=function(dO,dP){var dQ;dQ=dO.s;dQ==null?b2.Obsolete(dP):dQ!=null&&dQ.$==2?b2.EnqueueSafe(dQ.$1,dP):dQ!=null&&dQ.$==3?b2.EnqueueSafe(dQ.$1,dP):void 0;};b2.Map3=function(dO,dP,dQ,dR){var dS,dT,dU,dV;function dW(dX){var dY,dZ,d0,d1;if(!(dY=dV.s,dY!=null&&dY.$==0||dY!=null&&dY.$==2)){dZ=b2.ValueAndForever(dP);d0=b2.ValueAndForever(dQ);d1=b2.ValueAndForever(dR);dZ!=null&&dZ.$==1?d0!=null&&d0.$==1?d1!=null&&d1.$==1?dZ.$0[1]&&d0.$0[1]&&d1.$0[1]?b2.MarkForever(dV,dO(dZ.$0[0],d0.$0[0],d1.$0[0])):b2.MarkReady(dV,dO(dZ.$0[0],d0.$0[0],d1.$0[0])):void 0:void 0:void 0;}}dS=dP.s;dT=dQ.s;dU=dR.s;return dS!=null&&dS.$==0?dT!=null&&dT.$==0?dU!=null&&dU.$==0?b2.New({$:0,$0:dO(dS.$0,dT.$0,dU.$0)}):b2.Map3Opt1(dO,dS.$0,dT.$0,dR):dU!=null&&dU.$==0?b2.Map3Opt2(dO,dS.$0,dU.$0,dQ):b2.Map3Opt3(dO,dS.$0,dQ,dR):dT!=null&&dT.$==0?dU!=null&&dU.$==0?b2.Map3Opt4(dO,dT.$0,dU.$0,dP):b2.Map3Opt5(dO,dT.$0,dP,dR):dU!=null&&dU.$==0?b2.Map3Opt6(dO,dU.$0,dP,dQ):(dV=b2.New({$:3,$0:[],$1:[]}),(b2.When(dP,dW,dV),b2.When(dQ,dW,dV),b2.When(dR,dW,dV),dV));};b2.Sequence=function(dO){var dP,dQ,dR;function dS(dT){var dU;if(dR[0]===0){dU=_8.map(function(dV){var dW;dW=dV.s;return dW!=null&&dW.$==0?dW.$0:dW!=null&&dW.$==2?dW.$0:T.FailWith("value not found by View.Sequence");},dP);_8.forall(function(dV){var dW;dW=dV.s;return dW!=null&&dW.$==0;},dP)?b2.MarkForever(dQ,dU):b2.MarkReady(dQ,dU);}else dR[0]--;}dP=_8.ofSeq(dO);return dP.length==0?b2.New({$:0,$0:[]}):(dQ=b2.New({$:3,$0:[],$1:[]}),(dR=[_8.length(dP)-1],(_8.iter(function(dT){b2.When(dT,dS,dQ);},dP),dQ)));};b2.Map3Opt1=function(dO,dP,dQ,dR){return b2.Map(function(dS){return dO(dP,dQ,dS);},dR);};b2.Map3Opt2=function(dO,dP,dQ,dR){return b2.Map(function(dS){return dO(dP,dS,dQ);},dR);};b2.Map3Opt3=function(dO,dP,dQ,dR){return b2.Map2(function(dS,dT){return dO(dP,dS,dT);},dQ,dR);};b2.Map3Opt4=function(dO,dP,dQ,dR){return b2.Map(function(dS){return dO(dS,dP,dQ);},dR);};b2.Map3Opt5=function(dO,dP,dQ,dR){return b2.Map2(function(dS,dT){return dO(dS,dP,dT);},dQ,dR);};b2.Map3Opt6=function(dO,dP,dQ,dR){return b2.Map2(function(dS,dT){return dO(dS,dT,dP);},dQ,dR);};b4=b3.Builder=dH.Class({},m,b4);b4.New=dH.Ctor(function(){m.New.call(this);},b4);b3.result=function(){V.$cctor();return V.result;};b5=b3.BuilderP=dH.Class({},m,b5);b5.New=dH.Ctor(function(){m.New.call(this);},b5);b7=b6.Builder=dH.Class({},m,b7);b7.New=dH.Ctor(function(){m.New.call(this);},b7);bF.unindent$1=function(dO){var dP,dQ,dR,dS;dP=b8.SplitChars(dO,["\n"],0);dQ=(dR=$.tryFindIndex(function(dT){return" "!==dT;},(dS=$.tryFind(function(dT){return b8.Trim(dT)!=="";},dP),dS==null?"":dS.$0)),dR==null?0:dR.$0);return $.filter(function(dT){return!b8.StartsWith(dT,"# 1 ");},$.map(function(dT){return dT.length<=dQ?"":dT.substring(dQ);},dP));};bF.splitByChar$1=function(dO,dP){return b8.SplitChars(dP,[dO],0);};b8.concat=function(dO,dP){return _8.ofSeq(dP).join(dO);};b8.Trim=function(dO){return dO.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};b8.SplitChars=function(dO,dP,dQ){return b8.Split(dO,new a.RegExp("["+b8.RegexEscape(dP.join(""))+"]"),dQ);};b8.StartsWith=function(dO,dP){return dO.substring(0,dP.length)==dP;};b8.IsNullOrEmpty=function(dO){return dO==null||dO=="";};b8.Split=function(dO,dP,dQ){return dQ===1?_8.filter(function(dR){return dR!=="";},b8.SplitWith(dO,dP)):b8.SplitWith(dO,dP);};b8.RegexEscape=function(dO){return dO.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};b8.PadLeftWith=function(dO,dP,dQ){return dP>dO.length?a.Array(dP-dO.length+1).join(dQ)+dO:dO;};b8.SplitWith=function(dO,dP){return dO.split(dP);};b8.Replace=function(dO,dP,dQ){function dR(dS){var dT,dU,dV;dT=dS.indexOf(dP);return dT!==-1?(dU=b8.ReplaceOnce(dS,dP,dQ),(dV=dT+dQ.length,b8.Substring(dU,0,dT+dQ.length)+dR(dU.substring(dV)))):dS;}return dR(dO);};b8.replicate=function(dO,dP){return _8.create(dO,dP).join("");};b8.Substring=function(dO,dP,dQ){return dO.substr(dP,dQ);};b8.ReplaceOnce=function(dO,dP,dQ){return dO.replace(dP,dQ);};b8.SplitStrings=function(dO,dP,dQ){return b8.Split(dO,new a.RegExp(b8.concat("|",_8.map(b8.RegexEscape,dP))),dQ);};b8.forall=function(dO,dP){return $.forall(dO,b8.protect(dP));};b8.protect=function(dO){return dO===null?"":dO;};bd.tryParseWith$1=function(dO){function dP(dQ,dR){return dQ?{$:1,$0:dR}:null;}return function(dQ){return dP.apply(null,dO(dQ));};};bd.parseDateO$1=function(){V.$cctor();return V.parseDateO;};bd.parseIntO$1=function(){V.$cctor();return V.parseIntO;};bd.parseInt64O$1=function(){V.$cctor();return V.parseInt64O;};bd.parseSingleO$1=function(){V.$cctor();return V.parseSingleO;};bd.parseDoubleO$1=function(){V.$cctor();return V.parseDoubleO;};bd.parseGuidO$1=function(){V.$cctor();return V.parseGuidO;};P.TryParseInt64=function(dO,dP){return P.TryParse(dO,-9223372036854775808,9223372036854775807,dP);};b9.toJsonString=function(dO){return _8.ofSeq($.delay(function(){return $.append(["\""],$.delay(function(){return $.append(!b8.IsNullOrEmpty(dO)?$.collect(function(dP){var dQ,dR;dQ=dO[dP];dR=dQ.charCodeAt();return dR>=0&&dR<=7||dR===11||dR>=14&&dR<=31?(function(dS){return function(dT){return dS("\\u"+be.padNumLeft(dT.toString(16),4));};}(a.id))(dR):dQ==="\u0008"?"\\b":dQ==="\u0009"?"\\t":dQ==="\n"?"\\n":dQ==="\u000c"?"\\f":dQ==="\r"?"\\r":dQ==="\""?"\\\"":dQ==="\\"?"\\\\":[dQ];},T.range(0,dO.length-1)):[],$.delay(function(){return["\""];}));}));})).join("");};b9.serString=function(){V.$cctor();return V.serString;};b9.mapO=function(dO,dP,dQ,dR){function dS(dT){return dT==null?null:dP(dT.$0);}return[function(dT){return dQ(dO(dT));},function(dT){return dS(dR(dT));}];};b9.serField=function(dO,dP,dQ,dR,dS){var dT;function dU(dV){return{$:1,$0:dV};}return[dO,(dT=function(dV){return dR(dP(dV));},function(dV){return dU(dT(dV));}),function(dV){var dW,dX,dY;function dZ(d1){return dQ(d1,dV);}function d0(d1){return d1==null?dV:d1.$0;}dW=(dX=(dY=function(d1){return d1==null?null:{$:1,$0:dZ(d1.$0)};},function(d1){return dY(dS(d1));}),function(d1){return d1==null?null:dX(d1.$0);});return function(d1){return d0(dW(d1));};}];};b9.serOpt=function(dO,dP){var dQ,dR,dS;function dT(dU){return dU==null?"null":dU.$0;}dQ=[dO,dP];return[(dR=(dS=dQ[0],function(dU){return dU==null?null:{$:1,$0:dS(dU.$0)};}),function(dU){return dT(dR(dU));}),function(dU){return{$:1,$0:dU.isNull()?null:dQ[1](dU)};}];};b9.serSet=function(dO,dP){var dQ,dR,dS;dQ=[dO,dP];return[(dR=(dS=dQ[0],function(dT){return new cx.New$1(cB.OfSeq($.map(dS,dT)));}),function(dT){return b9.sprintA(dR(dT));}),function(dT){var dU,dV,dW,dX;dU=(dV=dT.tryArray(),(dW=(dX=dQ[1],function(dY){return _8.choose(dX,dY);}),dV==null?null:{$:1,$0:dW(dV.$0)}));return dU==null?null:{$:1,$0:new cx.New(dU.$0)};}];};b9.serDup=function(dO,dP){return[function(dQ){return(((dH.Curried3(function(dR,dS,dT){return dR("["+be.toSafe(dS)+", "+be.toSafe(dT)+"]");}))(a.id))(dO[0](dQ[0])))(dP[0](dQ[1]));},function(dQ){var dR,dS,dT,dU,dV,dW;dR=dQ.tryArray();return dR!=null&&dR.$==1&&((dT=dR.$0,!U.Equals(dT,null)&&dT.length===2)&&(dS=[_8.get(dR.$0,0),_8.get(dR.$0,1)],true))?(dU=dO[1](dS[0]),(dV=dP[1](dS[1]),dU!=null&&dU.$==1&&(dV!=null&&dV.$==1&&(dW=[dU.$0,dV.$0],true))?{$:1,$0:[dW[0],dW[1]]}:null)):null;}];};b9.serArr=function(dO,dP){var dQ,dR,dS;dQ=[dO,dP];return[(dR=(dS=dQ[0],function(dT){return _8.map(dS,dT);}),function(dT){return b9.sprintA(dR(dT));}),function(dT){var dU,dV,dW;dU=dT.tryArray();dV=(dW=dQ[1],function(dX){return _8.choose(dW,dX);});return dU==null?null:{$:1,$0:dV(dU.$0)};}];};b9.serInt=function(){V.$cctor();return V.serInt;};b9.serFieldO=function(dO,dP,dQ,dR,dS){function dT(dU){return dU==null?null:{$:1,$0:dR(dU.$0)};}return[dO,function(dU){return dT(dP(dU));},function(dU){var dV,dW;function dX(dZ){return dQ(dZ,dU);}function dY(dZ){return dZ==null?dU:dZ.$0;}dV=(dW=function(dZ){return dX(dS(dZ));},function(dZ){return dZ==null?null:{$:1,$0:dW(dZ.$0)};});return function(dZ){return dY(dV(dZ));};}];};b9.serDate=function(){V.$cctor();return V.serDate;};b9.sprintA=function(dO){var dP;dP=b8.concat(", ",dO);return(function(dQ){return function(dR){return dQ("["+be.toSafe(dR)+"]");};}(a.id))(dP);};b_.New=function(dO,dP,dQ,dR,dS,dT,dU,dV,dW){return{tryFloat:dO,tryInt:dP,tryString:dQ,tryBool:dR,tryArray:dS,tryField:dT,isObject:dU,isNull:dV,toString:dW};};b$.New=function(dO,dP,dQ){return bN.New(bJ.Tag$4(bx.NewGuid()),dO,dP,dQ,new cx.New$1(null),[],b$.getNextModified());};b$.allPredecessors=function(dO,dP){var dQ;dQ=new cx.New(_3.toArray(dP.snpParentIdO));return function(dR,dS,dT){var dU,dV,dW,dX,dY,dZ,d0,d1;while(true)if(dT.get_IsEmpty())return dR;else{dU=$.head(dT);dV=dT.Remove(dU);dW=dS.Add(dU);dX=dO(dU);if(dX!=null&&dX.$==1){dY=dX.$0;dZ=cx.op_Addition(new cx.New(_3.toArray(dY.snpParentIdO)),new cx.New(dY.snpPredIds));d0=dR.Add(dY);d1=cx.op_Addition(dV,cx.op_Subtraction(dZ,dW));dR=d0;dS=dW;dT=d1;}else{dS=dW;dT=dV;}}}(new cx.New$1(null),(new cx.New$1(null)).Add(dP.snpId),cx.op_Addition(dQ,new cx.New(dP.snpPredIds)));};b$.indirectPredecessorIds=function(dO,dP,dQ,dR){var dS;dS=new cx.New(_3.toArray(dQ));return function(dT,dU,dV){var dW,dX,dY,dZ,d0,d1,d2,d3;while(true)if(dV.get_IsEmpty())return dT;else{dW=$.head(dV);dX=dV.Remove(dW);dY=dU.Add(dW);dZ=dO(dW);if(dZ!=null&&dZ.$==1){d0=dZ.$0;d1=cx.op_Addition(new cx.New(_3.toArray(d0.snpParentIdO)),new cx.New(d0.snpPredIds));d2=cx.op_Addition(dT,d1);d3=cx.op_Addition(dX,cx.op_Subtraction(d1,dY));dT=d2;dU=dY;dV=d3;}else{dU=dY;dV=dX;}}}(dS,(new cx.New$1(null)).Add(dP),cx.op_Addition(dS,dR));};b$.defaultSnippet=function(){V.$cctor();return V.defaultSnippet;};b$.getNextModified=function(){return dJ.now();};cb=bg.PlugInBuilder=dH.Class({AddDoc:function(dO,dP,dQ){dO.plgDocs.Append(bg.newDoc(dP,dQ));return dO;},AddVar:function(dO,dP,dQ){dO.plgVars.Append(bg.newVar(dP,dQ));return dO;},Name:function(dO,dP){return bh.New(dP,dO.plgVars,dO.plgViews,dO.plgDocs,dO.plgActions,dO.plgQueries);},Yield:function(){return this.Zero();},AddAct:function(dO,dP,dQ){dO.plgActions.Append(bg.newAct(dP,dQ));return dO;},Merge:function(dO,dP,dQ){dO.plgVars.AppendMany($.map(function(dR){return bl.New(dP+dR.varName,dR.varVar);},dQ.plgVars));dO.plgViews.AppendMany($.map(function(dR){return bm.New(dP+dR.viwName,dR.viwView);},dQ.plgViews));dO.plgDocs.AppendMany($.map(function(dR){return bn.New(dP+dR.docName,dR.docDoc);},dQ.plgDocs));dO.plgActions.AppendMany($.map(function(dR){return bo.New(dP+dR.actName,dR.actFunction,dR.actEnabled);},dQ.plgActions));dO.plgQueries.AppendMany($.map(function(dR){return bp.New(dP+dR.qryName,dR.qryFunction);},dQ.plgQueries));return dO;},AddViw:function(dO,dP,dQ){dO.plgViews.Append(bg.newViw(dP,dQ));return dO;},Zero:function(){var dO;dO=bg.defaultPlugIn();return bh.New("Main",dO.plgVars,dO.plgViews,dO.plgDocs,dO.plgActions,dO.plgQueries);},AddAct2:function(dO,dP,dQ,dR,dS){dO.plgActions.Append(bg.newActF(dP,{$:2,$0:dQ,$1:dR,$2:dS}));return dO;},AddDoc3:function(dO,dP,dQ,dR,dS,dT){dO.plgDocs.Append(bg.newDocF(dP,{$:3,$0:dQ,$1:dR,$2:dS,$3:dT}));return dO;},AddDoc2:function(dO,dP,dQ,dR,dS){dO.plgDocs.Append(bg.newDocF(dP,{$:2,$0:dQ,$1:dR,$2:dS}));return dO;},AddQry:function(dO,dP,dQ){dO.plgQueries.Append(bg.newQry(dP,dQ));return dO;}},m,cb);cb.New=dH.Ctor(function(){m.New.call(this);},cb);cc.Delay=function(dO){return function(dP){try{(dO(null))(dP);}catch(dQ){dP.k({$:1,$0:dQ});}};};cc.Bind=function(dO,dP){return cc.checkCancel(function(dQ){dO(cI.New(function(dR){var dS;if(dR.$==0){dS=dR.$0;cc.scheduler().Fork(function(){try{(dP(dS))(dQ);}catch(dT){dQ.k({$:1,$0:dT});}});}else cc.scheduler().Fork(function(){dQ.k(dR);});},dQ.ct));});};cc.Return=function(dO){return function(dP){dP.k({$:0,$0:dO});};};cc.FromContinuations=function(dO){return function(dP){var dQ;function dR(dS){if(dQ[0])T.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{dQ[0]=true;cc.scheduler().Fork(dS);}}dQ=[false];dO(function(dS){dR(function(){dP.k({$:0,$0:dS});});},function(dS){dR(function(){dP.k({$:1,$0:dS});});},function(dS){dR(function(){dP.k({$:2,$0:dS});});});};};cc.checkCancel=function(dO){return function(dP){if(dP.ct.c)cc.cancel(dP);else dO(dP);};};cc.While=function(dO,dP){return dO()?cc.Bind(dP,function(){return cc.While(dO,dP);}):cc.Return();};cc.Sleep=function(dO){return function(dP){var dQ,dR;dQ=void 0;dR=void 0;dQ=a.setTimeout(function(){dR.Dispose();cc.scheduler().Fork(function(){dP.k({$:0,$0:null});});},dO);dR=cc.Register(dP.ct,function(){a.clearTimeout(dQ);cc.scheduler().Fork(function(){cc.cancel(dP);});});};};cc.Zero=function(){c1.$cctor();return c1.Zero;};cc.Start=function(dO,dP){var dQ,dR;dQ=(dR=(cc.defCTS())[0],dP==null?dR:dP.$0);cc.scheduler().Fork(function(){if(!dQ.c)dO(cI.New(function(dS){if(dS.$==1)cc.UncaughtAsyncError(dS.$0);},dQ));});};cc.StartWithContinuations=function(dO,dP,dQ,dR,dS){var dT,dU;dT=(dU=(cc.defCTS())[0],dS==null?dU:dS.$0);!dT.c?dO(cI.New(function(dV){if(dV.$==1)dQ(dV.$0);else if(dV.$==2)dR(dV.$0);else dP(dV.$0);},dT)):void 0;};cc.cancel=function(dO){dO.k({$:2,$0:new da.New(dO.ct)});};cc.scheduler=function(){c1.$cctor();return c1.scheduler;};cc.Register=function(dO,dP){var dQ;return dO===cc.noneCT()?{Dispose:function(){return null;}}:(dQ=dO.r.push(dP)-1,{Dispose:function(){return _8.set(dO.r,dQ,a.ignore);}});};cc.defCTS=function(){c1.$cctor();return c1.defCTS;};cc.UncaughtAsyncError=function(dO){dI.log("WebSharper: Uncaught asynchronous exception",dO);};cc.TryWith=function(dO,dP){return function(dQ){dO(cI.New(function(dR){if(dR.$==0)dQ.k({$:0,$0:dR.$0});else if(dR.$==1)try{(dP(dR.$0))(dQ);}catch(dS){dQ.k(dR);}else dQ.k(dR);},dQ.ct));};};cc.noneCT=function(){c1.$cctor();return c1.noneCT;};cd=Q.ConcreteVar=dH.Class({get_View:function(){return this.view;},Set:function(dO){if(this.isConst)(function(dP){return dP("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(dP){dI.log(dP);}));else{b2.Obsolete(this.snap);this.current=dO;this.snap=b2.New({$:2,$0:dO,$1:[]});}},Get:function(){return this.current;},Update:function(dO){this.Set(dO(this.Get()));},UpdateMaybe:function(dO){var dP;dP=dO(this.Get());dP!=null&&dP.$==1?this.Set(dP.$0):void 0;}},R,cd);cd.New=dH.Ctor(function(dO,dP,dQ){var dR;dR=this;R.New.call(this);this.isConst=dO;this.current=dQ;this.snap=dP;this.view=function(){return dR.snap;};this.id=cf.Int();},cd);cf.Id=function(){cf.set_counter(cf.counter()+1);return"uid"+a.String(cf.counter());};cf.Int=function(){cf.set_counter(cf.counter()+1);return cf.counter();};cf.set_counter=function(dO){c2.$cctor();c2.counter=dO;};cf.counter=function(){c2.$cctor();return c2.counter;};_6.rtn=function(dO){return cc.Return(Z.OkM$1(dO));};_6.bind=function(dO,dP){var dQ;dQ=null;return cc.Delay(function(){return cc.TryWith(cc.Delay(function(){return cc.Bind(dP,function(dR){var dS,dT;function dU(dW){return b6.addMsg(dT,dW);}function dV(dW){return cc.Return(dW);}dS=Z.OkM(dR);return dS.$==1?cc.Return(Z.ErrorM(dS.$0)):(dT=dS.$0[1],cc.Bind(dO(dS.$0[0]),function(dW){return dV(dU(dW));}));});}),function(dR){return cc.Return(Z.ErrorM(new ch({$:5,$0:dR.message,$1:dR.stack})));});});};Z.OkM$1=function(dO){return{$:0,$0:{$:1,$0:dO},$1:ch.NoMsg};};Z.OkM=function(dO){return dO.$0==null?{$:1,$0:dO.$1}:{$:0,$0:[dO.$0.$0,dO.$1]};};Z.ErrorM=function(dO){return{$:0,$0:null,$1:dO};};ch.summarized=function(dO){return ch.summarizedF(function(){return[1,0,0];},dO);};ch.summarizedF=function(dO,dP){return b8.concat("\n",$.filter(function(dQ){return""!==dQ;},bu.ofArray([a.String(dP),ch.summaryF(dO,dP)])));};ch.addMsg=function(dO,dP){return dO.$==0?dP:dO.$==6?dP.$==0?dO:dP.$==6?new ch({$:6,$0:dO.$0.concat(dP.$0)}):new ch({$:6,$0:dO.$0.concat([dP])}):dP.$==0?dO:dP.$==6?new ch({$:6,$0:[dO].concat(dP.$0)}):new ch({$:6,$0:[dO,dP]});};ch.summaryF=function(dO,dP){var dQ,dR;dR=ch.countF(dO,dP);switch(dR[0]===0?dR[1]===0?0:dR[1]===1?dR[2]===0?0:(dQ=dR[1],2):(dQ=dR[1],2):dR[0]===1?dR[1]===0?dR[2]===0?0:(dQ=dR[0],1):(dQ=[dR[0],dR[1]],3):dR[1]===0?(dQ=dR[0],1):(dQ=[dR[0],dR[1]],3)){case 0:return"";case 1:return(function(dS){return function(dT){return dS("Errors   : "+a.String(dT)+"\n");};}(a.id))(dQ);case 2:return(function(dS){return function(dT){return dS("Warnings : "+a.String(dT)+"\n");};}(a.id))(dQ);case 3:return(((dH.Curried3(function(dS,dT,dU){return dS("Errors   : "+a.String(dT)+", Warnings: "+a.String(dU)+"\n");}))(a.id))(dQ[0]))(dQ[1]);}};ch.countF=function(dO,dP){function dQ(dR,dS,dT){return function(dU){return[dR+dU[0],dS+dU[1],dT+dU[2]];};}return dP.$==0?[0,0,0]:dP.$==3?[0,0,1]:dP.$==2?[0,1,0]:dP.$==4?dO(dP.$0):dP.$==6?$.fold(function(dR,dS){return(function(dT){return dQ(dT[0],dT[1],dT[2]);}(dR))(dS);},[0,0,0],$.map(function(dR){return ch.countF(dO,dR);},ch.exclnoMsg(dP.$0))):[1,0,0];};ch.exclnoMsg=function(dO){function dP(dQ){return!dQ;}return $.filter(function(dQ){return dP(ch.noMsg(dQ));},dO);};ch.noMsg=function(dO){return dO.$==0;};ci.Get=function(dO){return dO instanceof a.Array?ci.ArrayEnumerator(dO):U.Equals(typeof dO,"string")?ci.StringEnumerator(dO):dO.GetEnumerator();};ci.ArrayEnumerator=function(dO){return new cj.New(0,null,function(dP){var dQ;dQ=dP.s;return dQ<_8.length(dO)&&(dP.c=_8.get(dO,dQ),dP.s=dQ+1,true);},void 0);};ci.StringEnumerator=function(dO){return new cj.New(0,null,function(dP){var dQ;dQ=dP.s;return dQ<dO.length&&(dP.c=dO[dQ],dP.s=dQ+1,true);},void 0);};ci.Get0=function(dO){return dO instanceof a.Array?ci.ArrayEnumerator(dO):U.Equals(typeof dO,"string")?ci.StringEnumerator(dO):"GetEnumerator0"in dO?dO.GetEnumerator0():dO.GetEnumerator();};cj=ci.T=dH.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},m,cj);cj.New=dH.Ctor(function(dO,dP,dQ,dR){m.New.call(this);this.s=dO;this.c=dP;this.n=dQ;this.d=dR;},cj);ck=Q.FromView=dH.Class({get_View:function(){return this.view;},Set:function(dO){this.set(dO);},Get:function(){return this.current;},Update:function(dO){var dP;S.Get((dP=this.set,function(dQ){return dP(dO(dQ));}),this.view);},UpdateMaybe:function(dO){var dP;dP=this;S.Get(function(dQ){var dR;dR=dO(dQ);dR!=null&&dR.$==1?dP.set(dR.$0):void 0;},this.view);}},R,ck);ck.New=dH.Ctor(function(dO,dP){var dQ,dR;dQ=this;R.New.call(this);this.set=dP;this.id=cf.Int();this.current=(dR=S.TryGet(dO),dR==null?null:dR.$0);this.view=S.Map(function(dS){dQ.current=dS;return dS;},dO);},ck);cl.$cctor=function(){var dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq;cl.$cctor=a.ignore;function er(e4){return b8.concat("\n",e4);}function es(e4){return bF.splitByChar("\n",e4);}function et(e4){var e5,e6;return bH.array(e4,{$:1,$0:0},{$:1,$0:(e5=0,(e6=_8.length(e4)-2,U.Compare(e5,e6)===1?e5:e6))});}function eu(e4){return b8.concat("\n",e4);}function ev(e4){return e4+"T00:00:00";}function ew(e4){var e5;function e6(e8){return bg.plugIns().TryFindByKey(e8);}function e7(e8){return e8==null?bg.defaultPlugIn():e8.$0;}e5=function(e8){return e8==null?null:e6(e8.$0);};return function(e8){return e7(e5(e8));};}function ex(e4){var e5;e5=null;return dW.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function ey(e4,e5){dW.set_Item(e4,e5);return e5;}function ez(e4,e5){var e6;e6=ex(e4);return e6==null?ey(e4,e5(e4)):e6.$0;}function eA(e4){var e5;e5=null;return dZ.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eB(e4,e5){dZ.set_Item(e4,e5);return e5;}function eC(e4,e5){var e6;e6=eA(e4);return e6==null?eB(e4,e5(e4)):e6.$0;}function eD(e4){var e5;e5=null;return d2.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eE(e4,e5){d2.set_Item(e4,e5);return e5;}function eF(e4,e5){var e6;e6=eD(e4);return e6==null?eE(e4,e5(e4)):e6.$0;}function eG(e4){var e5;e5=null;return d5.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eH(e4,e5){d5.set_Item(e4,e5);return e5;}function eI(e4,e5){var e6;e6=eG(e4);return e6==null?eH(e4,e5(e4)):e6.$0;}function eJ(e4){var e5;e5=null;return d8.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eK(e4,e5){d8.set_Item(e4,e5);return e5;}function eL(e4,e5){var e6;e6=eJ(e4);return e6==null?eK(e4,e5(e4)):e6.$0;}function eM(e4){var e5;e5=null;return d$.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eN(e4,e5){d$.set_Item(e4,e5);return e5;}function eO(e4,e5){var e6;e6=eM(e4);return e6==null?eN(e4,e5(e4)):e6.$0;}function eP(e4){var e5;e5=null;return ec.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eQ(e4,e5){ec.set_Item(e4,e5);return e5;}function eR(e4,e5){var e6;e6=eP(e4);return e6==null?eQ(e4,e5(e4)):e6.$0;}function eS(e4){var e5;e5=null;return ef.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eT(e4,e5){ef.set_Item(e4,e5);return e5;}function eU(e4,e5){var e6;e6=eS(e4);return e6==null?eT(e4,e5(e4)):e6.$0;}function eV(e4){var e5;e5=null;return ei.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eW(e4,e5){ei.set_Item(e4,e5);return e5;}function eX(e4,e5){var e6;e6=eV(e4);return e6==null?eW(e4,e5(e4)):e6.$0;}function eY(e4){var e5;e5=null;return el.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function eZ(e4,e5){el.set_Item(e4,e5);return e5;}function e0(e4,e5){var e6;e6=eY(e4);return e6==null?eZ(e4,e5(e4)):e6.$0;}function e1(e4){var e5;e5=null;return eo.TryGetValue(e4,{get:function(){return e5;},set:function(e6){e5=e6;}})?{$:1,$0:e5}:null;}function e2(e4,e5){eo.set_Item(e4,e5);return e5;}function e3(e4,e5){var e6;e6=e1(e4);return e6==null?e2(e4,e5(e4)):e6.$0;}cl.state=new cK.New();cl.unindentStr=function(e4){return er(bF.unindent(e4));};cl.skipLastLine=(dO=function(e4){return et(es(e4));},function(e4){return eu(dO(e4));});cl.parseDateO2=(dP=bd.tryParseWith(function(e4){var e5,e6;e5=0;return[(e6=cA.TryParse(e4),e6!=null&&e6.$==1&&(e5=e6.$0,true)),e5];}),function(e4){return dP(ev(e4));});cl.parseDateO=bd.tryParseWith(function(e4){var e5,e6;e5=0;return[(e6=cA.TryParse(e4),e6!=null&&e6.$==1&&(e5=e6.$0,true)),e5];});cl.parseIntO=bd.tryParseWith(function(e4){var e5;e5=0;return[P.TryParseInt32(e4,{get:function(){return e5;},set:function(e6){e5=e6;}}),e5];});cl.parseInt64O=bd.tryParseWith(function(e4){var e5;e5=0;return[P.TryParseInt64(e4,{get:function(){return e5;},set:function(e6){e5=e6;}}),e5];});cl.parseSingleO=bd.tryParseWith(function(e4){var e5,e6;e5=0;return[(e6=a.Number(e4),a.isNaN(e6)?false:(e5=e6,true)),e5];});cl.parseDoubleO=bd.tryParseWith(function(e4){var e5,e6;e5=0;return[(e6=a.Number(e4),a.isNaN(e6)?false:(e5=e6,true)),e5];});cl.parseGuidO=bd.tryParseWith(function(e4){var e5;e5=null;return[bx.TryParse(e4,{get:function(){return e5;},set:function(e6){e5=e6;}}),e5];});cl["|Date|_|"]=bd.parseDateO();cl["|Int|_|"]=bd.parseIntO();cl["|Int64|_|"]=bd.parseInt64O();cl["|Single|_|"]=bd.parseSingleO();cl["|Double|_|"]=bd.parseDoubleO();cl["|Guid|_|"]=bd.parseGuidO();cl.counter=1;cl.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";cl.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";cl.observers=bv.Empty;cl.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";cl.init=bj.Create(function(){var e4;e4=new cN.New();cL.defineWebComponent("wcomp-tabstrip",cN.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});cl.layoutHorizontal=dH.Curried(function(e4,e5,e6,e7,e8){return bq.get_Empty();},5);cl.layoutVertical=dH.Curried(function(e4,e5,e6,e7,e8){return bq.get_Empty();},5);cl.plugIns=new bi.New$1(function(e4){return e4.plgName;});cl.mainDocV=_2.Create$1("AppFramework.AppFwkClient");cl.TemplateFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\website\\AppFramework.html";cl.selectionPlugInO=_2.Create$1({$:1,$0:"AppFramework"});cl.currentPlugInW=(dQ=bg.selectionPlugInO().get_View(),S.Map2(function(e4,e5){return(ew(e4))(e5);},bg.plugIns().v,dQ));cl.currentPlugInV=new ck.New(bg.currentPlugInW(),function(e4){bg.plugIns().Append(e4);});cl.AppFwkClient=bj.Create(function(){var e4,e5,e6,e7,e8,e9,e_,e$,fa;return(e4=(e5=bg.renderQueries(),(e6=bg.renderActions(),(e7=bg.renderDocs(),(e8=bg.renderViews(),(e9=bg.renderVars(),(e_=bg.renderPlugIns(),bS.Make().WithHole({$:0,$0:"plugins",$1:e_})).WithHole({$:2,$0:"pluginname",$1:S.Map(function(fb){return fb.plgName;},bg.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:e9})).WithHole({$:0,$0:"views",$1:e8})).WithHole({$:0,$0:"docs",$1:e7})).WithHole({$:0,$0:"actions",$1:e6})).WithHole({$:0,$0:"queries",$1:e5})),(e$=bT.CompleteHoles(e4.k,e4.h,[]),(fa=new bR.New(e$[1],cF.appfwkclient(e$[0])),(e4.i=fa,fa)))).get_Doc();});cl.plugin=new cb.New();dR=(dS=bg.plugin(),dS.AddAct(dS.AddAct2(dS.AddDoc3(dS.AddDoc3(dS.AddDoc2(dS.AddDoc(dS.AddVar(dS.Name(dS.Yield(),"AppFramework"),"mainDocV",bg.mainDocV()),"AppFwkClient",bg.AppFwkClient()),"TrigAction",function(e4){return function(e5){return bg.trigAct(e4,e5);};},"Trigger","Action"),"InputFile",dH.Curried3(bg.inputFile),"attrs","Label","Action"),"InputLabel",dH.Curried3(bg.inputLabel),"attrs","Label","Var"),"SetVar",function(e4){return function(e5){return bg.setVar(e4,e5);};},"Var","Value"),"Hello",function(){self.alert("Hello!");}));bg.plugIns().Append(dR);dT=(dU=bg.plugin(),dU.AddQry(dU.AddAct(dU.AddAct2(dU.AddDoc3(dU.AddDoc3(dU.AddDoc2(dU.Name(dU.Yield(),"AF"),"TrigAction",function(e4){return function(e5){return bg.trigAct(e4,e5);};},"Trigger","Action"),"InputFile",dH.Curried3(bg.inputFile),"attrs","Label","Action"),"InputLabel",dH.Curried3(bg.inputLabel),"attrs","Label","Var"),"SetVar",function(e4){return function(e5){return bg.setVar(e4,e5);};},"Var","Value"),"Hello",function(){self.alert("Hello!");}),"getDocNames",function(){return _8.ofSeq($.collect(function(e4){return $.map(function(e5){return e4.plgName+"."+e5.docName;},e4.plgDocs);},(bg.plugIns())["var"].Get()));}));bg.plugIns().Append(dT);cl.getMainDoc=bj.Create(function(){cO.init(dH.Curried(bg.horizontal,5),dH.Curried(bg.vertical,5));cM.init().f();return bg.mainDoc();});cl.splitName=bg.splitName;cl.currentViewTriggger=bg.mainDocV().get_View();cl.createSplitterM=(dV=(dW=new bL.New$5(),[[ex,function(e4){return function(e5){return ez(e4,e5);};}],function(){dW.Clear();}]),(dX=dV[0][1],[function(e4){return(dX(e4))(function(e5){return bk.createSplitter(e5[0],e5[1],e5[2],e5[3],e5[4]);});},dV[1]]))[0];cl.createButtonM=(dY=(dZ=new bL.New$5(),[[eA,function(e4){return function(e5){return eC(e4,e5);};}],function(){dZ.Clear();}]),(d0=dY[0][1],[function(e4){return(d0(e4))(function(e5){return bk.createButton(e5[0],e5[1],e5[2],e5[3],e5[4]);});},dY[1]]))[0];cl.createInputM=(d1=(d2=new bL.New$5(),[[eD,function(e4){return function(e5){return eF(e4,e5);};}],function(){d2.Clear();}]),(d3=d1[0][1],[function(e4){return(d3(e4))(function(e5){return bk.createInput(e5[0],e5[1],e5[2],e5[3]);});},d1[1]]))[0];cl.createTextAreaM=(d4=(d5=new bL.New$5(),[[eG,function(e4){return function(e5){return eI(e4,e5);};}],function(){d5.Clear();}]),(d6=d4[0][1],[function(e4){return(d6(e4))(function(e5){return bk.createTextArea(e5[0],e5[1],e5[2],e5[3]);});},d4[1]]))[0];cl.createElementM=(d7=(d8=new bL.New$5(),[[eJ,function(e4){return function(e5){return eL(e4,e5);};}],function(){d8.Clear();}]),(d9=d7[0][1],[function(e4){return(d9(e4))(function(e5){return bk.createElement(e5[0],e5[1],e5[2],e5[3],e5[4]);});},d7[1]]))[0];cl.createDocM=(d_=(d$=new bL.New$5(),[[eM,function(e4){return function(e5){return eO(e4,e5);};}],function(){d$.Clear();}]),(ea=d_[0][1],[function(e4){return(ea(e4))(function(e5){return bk.createDoc(e5[0],e5[1],e5[2],e5[3]);});},d_[1]]))[0];cl.createTemplateM=(eb=(ec=new bL.New$5(),[[eP,function(e4){return function(e5){return eR(e4,e5);};}],function(){ec.Clear();}]),(ed=eb[0][1],[function(e4){return(ed(e4))(function(e5){return bk.createTemplate(e5[0],e5[1],e5[2],e5[3],e5[4]);});},eb[1]]))[0];cl.createConcatM=(ee=(ef=new bL.New$5(),[[eS,function(e4){return function(e5){return eU(e4,e5);};}],function(){ef.Clear();}]),(eg=ee[0][1],[function(e4){return(eg(e4))(function(e5){return bk.createConcat(e5[0],e5[1],e5[2]);});},ee[1]]))[0];cl.createVarM=(eh=(ei=new bL.New$5(),[[eV,function(e4){return function(e5){return eX(e4,e5);};}],function(){ei.Clear();}]),(ej=eh[0][1],[function(e4){return(ej(e4))(function(e5){return bk.createVar(e5[0],e5[1],e5[2]);});},eh[1]]))[0];cl.createViewM=(ek=(el=new bL.New$5(),[[eY,function(e4){return function(e5){return e0(e4,e5);};}],function(){el.Clear();}]),(em=ek[0][1],[function(e4){return(em(e4))(function(e5){return bk.createView(e5[0],e5[1],e5[2]);});},ek[1]]))[0];cl.createActionM=(en=(eo=new bL.New$5(),[[e1,function(e4){return function(e5){return e3(e4,e5);};}],function(){eo.Clear();}]),(ep=en[0][1],[function(e4){return(ep(e4))(function(e5){return bk.createAction(e5[0],e5[1],e5[2],e5[3]);});},en[1]]))[0];eq=bg.tryGetPlugIn("AppFramework");eq==null?void 0:eq.$0.plgActions.Append(bg.newActF("AddLayout",{$:2,$0:function(e4){return function(e5){return bk.addNewLayout(e4,e5);};},$1:"[Name]",$2:"[Layout]"}));};cn.New=function(dO,dP,dQ){return{c:dO,v:dP,f:dQ};};co=bK.List=dH.Class({GetEnumerator:function(){return ci.Get(this);},GetEnumerator0:function(){return ci.Get0(this);}},null,co);$.tryHead=function(dO){var dP;dP=ci.Get(dO);try{return dP.MoveNext()?{$:1,$0:dP.Current()}:null;}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}};$.tryItem=function(dO,dP){var dQ,dR,dS;if(dO<0)return null;else{dQ=0;dR=ci.Get(dP);try{dS=true;while(dS&&dQ<=dO)if(dR.MoveNext())dQ=dQ+1;else dS=false;return dS?{$:1,$0:dR.Current()}:null;}finally{if(typeof dR=="object"&&"Dispose"in dR)dR.Dispose();}}};$.contains=function(dO,dP){var dQ,dR;dQ=ci.Get(dP);try{dR=false;while(!dR&&dQ.MoveNext())dR=U.Equals(dQ.Current(),dO);return dR;}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}};$.nonNegative=function(){return T.FailWith("The input must be non-negative.");};$.insufficient=function(){return T.FailWith("The input sequence has an insufficient number of elements.");};_8.groupBy=function(dO,dP){var dQ,dR,dS,dT,dU,dV;dQ=new bL.New$5();dR=[];for(dS=0,dT=_8.length(dP)-1;dS<=dT;dS++){dU=dP[dS];dV=dO(dU);dQ.ContainsKey(dV)?dQ.get_Item(dV).push(dU):(dR.push(dV),dQ.Add(dV,[dU]));}_8.mapInPlace(function(dW){return[dW,dQ.get_Item(dW)];},dR);return dR;};$.last=function(dO){var dP,dQ;dP=ci.Get(dO);try{if(!dP.MoveNext())dQ=$.insufficient();else{while(dP.MoveNext());dQ=dP.Current();}return dQ;}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}};_8.mapInPlace=function(dO,dP){var dQ,dR;for(dQ=0,dR=dP.length-1;dQ<=dR;dQ++)dP[dQ]=dO(dP[dQ]);};_8.mapiInPlace=function(dO,dP){var dQ,dR;for(dQ=0,dR=dP.length-1;dQ<=dR;dQ++)dP[dQ]=dO(dQ,dP[dQ]);return dP;};cp.ofSeqNonCopying=function(dO){var dP,dQ;if(dO instanceof a.Array)return dO;else if(dO instanceof bv)return _8.ofList(dO);else if(dO===null)return[];else{dP=[];dQ=ci.Get(dO);try{while(dQ.MoveNext())dP.push(dQ.Current());return dP;}finally{if(typeof dQ=="object"&&"Dispose"in dQ)dQ.Dispose();}}};cp.TreeReduce=function(dO,dP,dQ){var dR;function dS(dT,dU){var dV,dW;return dU<=0?dO:dU===1&&(dT>=0&&dT<dR)?_8.get(dQ,dT):(dW=dU/2>>0,dP(dS(dT,dW),dS(dT+dW,dU-dW)));}dR=_8.length(dQ);return dS(0,dR);};cp.mapInPlace=function(dO,dP){var dQ,dR;for(dQ=0,dR=dP.length-1;dQ<=dR;dQ++)dP[dQ]=dO(dP[dQ]);return dP;};cp.MapTreeReduce=function(dO,dP,dQ,dR){var dS;function dT(dU,dV){var dW,dX;return dV<=0?dP:dV===1&&(dU>=0&&dU<dS)?dO(_8.get(dR,dU)):(dX=dV/2>>0,dQ(dT(dU,dX),dT(dU+dX,dV-dX)));}dS=_8.length(dR);return dT(0,dS);};b2.Obsolete=function(dO){var dP,dQ,dR,dS,dT;dQ=dO.s;if(dQ==null||(dQ!=null&&dQ.$==2?(dP=dQ.$1,false):dQ!=null&&dQ.$==3?(dP=dQ.$1,false):true))void 0;else{dO.s=null;for(dR=0,dS=_8.length(dP)-1;dR<=dS;dR++){dT=_8.get(dP,dR);typeof dT=="object"?function(dU){b2.Obsolete(dU);}(dT):dT();}}};b2.New=function(dO){return{s:dO};};cq.InMemory=function(dO){return new cR.New(dO);};cr.Dynamic=function(dO,dP){return new bE({$:1,$0:new cT.New(dO,dP)});};cr.Static=function(dO){return new bE({$:3,$0:dO});};cr.AppendTree=function(dO,dP){var dQ;return dO===null?dP:dP===null?dO:(dQ=new bE({$:2,$0:dO,$1:dP}),(cr.SetFlags(dQ,cr.Flags(dO)|cr.Flags(dP)),dQ));};cr.EmptyAttr=function(){c_.$cctor();return c_.EmptyAttr;};cr.Updates=function(dO){return cp.MapTreeReduce(function(dP){return dP.NChanged();},S.Const(),S.Map2Unit,dO.DynNodes);};cr.SetFlags=function(dO,dP){dO.flags=dP;};cr.Flags=function(dO){return dO!==null&&dO.hasOwnProperty("flags")?dO.flags:0;};cr.Insert=function(dO,dP){var dQ,dR,dS;function dT(dU){if(!(dU===null))if(dU!=null&&dU.$==1)dQ.push(dU.$0);else if(dU!=null&&dU.$==2){dT(dU.$0);dT(dU.$1);}else if(dU!=null&&dU.$==3)dU.$0(dO);else if(dU!=null&&dU.$==4)dR.push(dU.$0);}dQ=[];dR=[];dT(dP);dS=dQ.slice(0);return c5.New(dO,cr.Flags(dP),dS,dR.length===0?null:{$:1,$0:function(dU){$.iter(function(dV){dV(dU);},dR);}});};cr.Empty=function(dO){return c5.New(dO,0,[],null);};cr.HasExitAnim=function(dO){var dP;dP=2;return(dO.DynFlags&dP)===dP;};cr.GetExitAnim=function(dO){return cr.GetAnim(dO,function(dP,dQ){return dP.NGetExitAnim(dQ);});};cr.HasEnterAnim=function(dO){var dP;dP=1;return(dO.DynFlags&dP)===dP;};cr.GetEnterAnim=function(dO){return cr.GetAnim(dO,function(dP,dQ){return dP.NGetEnterAnim(dQ);});};cr.HasChangeAnim=function(dO){var dP;dP=4;return(dO.DynFlags&dP)===dP;};cr.GetChangeAnim=function(dO){return cr.GetAnim(dO,function(dP,dQ){return dP.NGetChangeAnim(dQ);});};cr.GetAnim=function(dO,dP){return dn.Concat(_8.map(function(dQ){return dP(dQ,dO.DynElem);},dO.DynNodes));};cr.Sync=function(dO,dP){_8.iter(function(dQ){dQ.NSync(dO);},dP.DynNodes);};cs.SetStyle=function(dO,dP,dQ){cs.SetProperty(dO.style,dP,dQ);};cs.SetAttr=function(dO,dP,dQ){dO.setAttribute(dP,dQ);};cs.CreateElement=function(dO){return cs.Doc().createElement(dO);};cs.RemoveAttr=function(dO,dP){dO.removeAttribute(dP);};cs.CreateText=function(dO){return cs.Doc().createTextNode(dO);};cs.SetProperty=function(dO,dP,dQ){return dO.setProperty(dP,dQ);};cs.Doc=function(){c7.$cctor();return c7.Doc;};cs.ChildrenArray=function(dO){var dP,dQ,dR;dP=[];for(dQ=0,dR=dO.childNodes.length-1;dQ<=dR;dQ++)dP.push(dO.childNodes[dQ]);return dP;};cs.IterSelector=function(dO,dP,dQ){var dR,dS,dT;dR=dO.querySelectorAll(dP);for(dS=0,dT=dR.length-1;dS<=dT;dS++)dQ(dR[dS]);};cs.RemoveClass=function(dO,dP){var dQ;cs.setClass(dO,(dQ=cs.clsRE(dP),cs.getClass(dO).replace(dQ,function(dR,dS,dT){return dS===""||dT===""?"":" ";})));};cs.AddClass=function(dO,dP){var dQ;dQ=cs.getClass(dO);dQ===""?cs.setClass(dO,dP):!cs.clsRE(dP).test(dQ)?cs.setClass(dO,dQ+" "+dP):void 0;};cs.InsertAt=function(dO,dP,dQ){var dR;if(!(dQ.parentNode===dO&&dP===(dR=dQ.nextSibling,U.Equals(dR,null)?null:dR)))dO.insertBefore(dQ,dP);};cs.setClass=function(dO,dP){if(dO instanceof a.SVGElement)dO.setAttribute("class",dP);else dO.className=dP;};cs.getClass=function(dO){return dO instanceof a.SVGElement?dO.getAttribute("class"):dO.className;};cs.clsRE=function(dO){return new a.RegExp("(\\s+|^)"+dO+"(?:\\s+"+dO+")*(\\s+|$)","g");};cs.RemoveNode=function(dO,dP){if(dP.parentNode===dO)dO.removeChild(dP);};ct.createEntryO2=function(dO,dP){function dQ(dU,dV){dP.Add(dU,dV);return{$:1,$0:{$:0,$0:[dU,dV]}};}function dR(dU){return{$:1,$0:{$:1,$0:dU}};}function dS(dU){try{return dP.get_Item(dU);}catch(dV){return(function(dW){return function(dX){return dW("Could not find reference to "+be.toSafe(dX));};}(T.FailWith))(dU);}}function dT(dU){var dV,dW,dX,dY,dZ;if(dU.$==1){dX=dU.$1;dY=dU.$0;dZ=dS(dY);if(dZ.$==4)try{dV=dZ.$0.$0.get_Item(dX);}catch(d0){dV=(((dH.Curried3(function(d1,d2,d3){return d1("Could not find reference to "+be.toSafe(d2)+"."+be.toSafe(d3));}))(T.FailWith))(dY))(dX);}else dV=(function(d1){return function(d2){return d1("PlugIn not registered: "+cG.p$3(d2));};}(T.FailWith))(dU);return[dV,null];}else{dW=dS(dU.$0);return[dW.$==1?cW.RAct:dW.$==2?cW.RVar:dW.$==3?cW.RViw:dW.$==5?cW.RPlg:dW.$==4?(function(d1){return function(d2){return d1("PlugIn should not be referenced by itself: "+cG.p$3(d2));};}(T.FailWith))(dU):cW.RDoc,{$:1,$0:dW}];}}return function(dU){var dV;try{dV=ct.createEntryO(dT,dO,dU);return dV==null?dR((function(dW){return function(dX){return dW("Line not matched!: "+be.toSafe(dX));};}(a.id))(dU)):dQ(dV.$0.$0,dV.$0.$1);}catch(dW){return dR(dW.message);}};};ct.createEntryO=function(dO,dP,dQ){var dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;function eQ(e9){var e_,e$;e_=ct.R(e9);return e_!=null&&e_.$==1?(e$=e_.$0,{$:1,$0:[dO(e$),e$]}):null;}function eR(e9){var e_,e$;return(e$=eQ(e9),e$!=null&&e$.$==1&&(e$.$0[0][0].$==0&&(e_=e$.$0[1],true)))?{$:1,$0:{$:0,$0:e_}}:null;}function eS(e9){var e_,e$;return(e$=eQ(e9),e$!=null&&e$.$==1&&(e$.$0[0][0].$==1&&(e_=e$.$0[1],true)))?{$:1,$0:{$:0,$0:e_}}:null;}function eT(e9){var e_,e$;return(e$=eQ(e9),e$!=null&&e$.$==1&&(e$.$0[0][0].$==2&&(e_=e$.$0[1],true)))?{$:1,$0:{$:0,$0:e_}}:null;}function eU(e9){var e_,e$;return(e$=eQ(e9),e$!=null&&e$.$==1&&(e$.$0[0][0].$==3&&(e_=e$.$0[1],true)))?{$:1,$0:{$:0,$0:e_}}:null;}function eV(e9){var e_,e$,fa;return(e$=eQ(e9),e$!=null&&e$.$==1&&(e$.$0[0][0].$==4&&((fa=e$.$0[0][1],fa!=null&&fa.$==1)&&(e$.$0[0][1].$0.$==5&&(e_=[e$.$0[0][1].$0.$0,e$.$0[1]],true)))))?{$:1,$0:e_[0]}:null;}function eW(e9){var e_,e$;return(e$=ct.R(e9),e$!=null&&e$.$==1&&(e$.$0.$==0&&(e_=e$.$0.$0,true)))?{$:1,$0:e_}:null;}function eX(e9){var e_,e$;return(e$=eW(e9),e$!=null&&e$.$==1&&(b8.StartsWith(e$.$0,"_")&&(e_=e$.$0,true)))?{$:1,$0:e_}:null;}function eY(e9){var e_,e$;e_=eS(e9);return e_!=null&&e_.$==1?{$:1,$0:{$:1,$0:e_.$0}}:(e$=eT(e9),e$!=null&&e$.$==1?{$:1,$0:{$:2,$0:e$.$0}}:null);}function eZ(e9){var e_;e_=bF.delimitedO("@{","}",e9);return e_!=null&&e_.$==1?{$:1,$0:[e_.$0[0],{$:1,$0:e_.$0[1]},e_.$0[2]]}:null;}function e0(e9){var e_,e$,fa,fb,fc,fd,fe,ff;return(e$=eZ(e9),e$!=null&&e$.$==1&&(fa=eY(e$.$0[1]),fa!=null&&fa.$==1&&(e_=[e$.$0[2],e$.$0[0],fa.$0],true)))?(fb=e_[0],(fc=e_[1],(fd=fc===""?bu.ofArray([e_[2]]):bu.ofArray([{$:0,$0:fc},e_[2]]),fb===""?{$:1,$0:fd}:(fe=e0(fb),fe!=null&&fe.$==1?{$:1,$0:bu.append(fd,fe.$0)}:null)))):(ff=eZ(e9),ff!=null&&ff.$==1)?null:{$:1,$0:bu.ofArray([{$:0,$0:e9}])};}function e1(e9){var e_,e$,fa;return(e$=eZ(e9),e$!=null&&e$.$==1&&(fa=eU(e$.$0[1]),fa!=null&&fa.$==1&&(b8.Trim(e$.$0[0])===""&&b8.Trim(e$.$0[2])===""&&(e_=[e$.$0[2],fa.$0,e$.$0[0]],true))))?{$:1,$0:e_[1]}:null;}function e2(e9){var e_,e$;return e9.$==0&&(e$=e0(e9.$0),e$!=null&&e$.$==1&&(e_=e$.$0,true))?{$:1,$0:e_}:null;}function e3(e9){return e9.$==0?{$:1,$0:_8.ofSeq($.choose(function(e_){var e$,fa,fb,fc,fd,fe,ff,fg;e$=b8.SplitChars(b8.Trim(e_),["="],0);return!U.Equals(e$,null)&&e$.length===2&&(fb=e1(_8.get(e$,1)),fb!=null&&fb.$==1&&(fa=[fb.$0,_8.get(e$,0)],true))?{$:1,$0:{$:2,$0:b8.Trim(fa[1]),$1:fa[0]}}:!U.Equals(e$,null)&&e$.length===2&&(fd=e0(_8.get(e$,1)),fd!=null&&fd.$==1&&(fc=[_8.get(e$,0),fd.$0],true))?{$:1,$0:{$:1,$0:b8.Trim(fc[0]),$1:fc[1]}}:(fe=b8.SplitChars(b8.Trim(e_),[":"],0),!U.Equals(fe,null)&&fe.length===2&&(fg=e0(_8.get(fe,1)),fg!=null&&fg.$==1&&(ff=[_8.get(fe,0),fg.$0],true))?{$:1,$0:{$:0,$0:b8.Trim(ff[0]),$1:ff[1]}}:(function(fh){return function(fi){return fh("Attributes should be like: \"name=val\" or \"name:val\" and separated by ';' : "+be.toSafe(fi));};}(T.FailWith))(e_));},$.filter(function(e_){return b8.Trim(e_)!=="";},b8.SplitChars(b8.Trim(e9.$0),[";"],0))))}:null;}function e4(e9){var e_,e$,fa,fb,fc;e_=e2(e9);return e_!=null&&e_.$==1?{$:1,$0:{$:0,$0:e_.$0}}:(e$=eR(e9),e$!=null&&e$.$==1?{$:1,$0:{$:1,$0:e$.$0}}:(fa=eS(e9),fa!=null&&fa.$==1?{$:1,$0:{$:2,$0:fa.$0}}:(fb=eT(e9),fb!=null&&fb.$==1?{$:1,$0:{$:3,$0:fb.$0}}:(fc=eU(e9),fc!=null&&fc.$==1?{$:1,$0:{$:4,$0:fc.$0}}:null))));}function e5(e9){var e_,e$,fa;switch(e9.$==1?(e$=e4(e9.$0),e$!=null&&e$.$==1?(fa=e5(e9.$1),fa!=null&&fa.$==1?(e_=[e$.$0,fa.$0],1):2):2):0){case 0:return{$:1,$0:bv.Empty};case 1:return{$:1,$0:new bv({$:1,$0:e_[0],$1:e_[1]})};case 2:return null;}}function e6(e9){var e_,e$,fa,fb;e_=e2(e9);return e_!=null&&e_.$==1?{$:1,$0:{$:0,$0:e_.$0}}:(e$=eR(e9),e$!=null&&e$.$==1?{$:1,$0:{$:1,$0:e$.$0}}:(fa=eS(e9),fa!=null&&fa.$==1?{$:1,$0:{$:2,$0:fa.$0}}:(fb=eT(e9),fb!=null&&fb.$==1?{$:1,$0:{$:3,$0:fb.$0}}:null)));}function e7(e9){var e_,e$,fa;switch(e9.$==1?(e$=e6(e9.$0),e$!=null&&e$.$==1?(fa=e7(e9.$1),fa!=null&&fa.$==1?(e_=[e$.$0,fa.$0],1):2):2):0){case 0:return{$:1,$0:bv.Empty};case 1:return{$:1,$0:new bv({$:1,$0:e_[0],$1:e_[1]})};case 2:return null;}}function e8(e9){var e_,e$,fa;switch(e9.$==1?(e$=eV(e9.$0),e$!=null&&e$.$==1?(fa=e8(e9.$1),fa!=null&&fa.$==1?(e_=[e$.$0,fa.$0],1):2):2):0){case 0:return{$:1,$0:bv.Empty};case 1:return{$:1,$0:new bv({$:1,$0:e_[0],$1:e_[1]})};case 2:return null;}}dR=bk.splitTokens(dQ);return dR.$==1&&(dT=eW(dR.$0),dT!=null&&dT.$==1&&(dR.$1.$==1&&(bk.PlugIn(dR.$1.$0).$==0&&(dU=e8(dR.$1.$1),dU!=null&&dU.$==1&&(dS=[dU.$0,dT.$0],true)))))?ct.entryPlg(dS[1],{$:0,$0:new cV.New(dS[0])}):dR.$==1&&(dW=eX(dR.$0),dW!=null&&dW.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==1&&(dR.$1.$1.$==1&&(dX=eW(dR.$1.$1.$0),dX!=null&&dX.$==1&&(dR.$1.$1.$1.$==0&&(dV=[dW.$0,dX.$0],true)))))))?ct.entryRef(dV[0],dV[1],cW.RDoc):dR.$==1&&(dZ=eX(dR.$0),dZ!=null&&dZ.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==0&&(dR.$1.$1.$==1&&(d0=eW(dR.$1.$1.$0),d0!=null&&d0.$==1&&(dR.$1.$1.$1.$==0&&(dY=[dZ.$0,d0.$0],true)))))))?ct.entryRef(dY[0],dY[1],cW.RVar):dR.$==1&&(d2=eX(dR.$0),d2!=null&&d2.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==2&&(dR.$1.$1.$==1&&(d3=eW(dR.$1.$1.$0),d3!=null&&d3.$==1&&(dR.$1.$1.$1.$==0&&(d1=[d2.$0,d3.$0],true)))))))?ct.entryRef(d1[0],d1[1],cW.RViw):dR.$==1&&(d5=eX(dR.$0),d5!=null&&d5.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==4&&(dR.$1.$1.$==1&&(d6=eW(dR.$1.$1.$0),d6!=null&&d6.$==1&&(dR.$1.$1.$1.$==0&&(d4=[d5.$0,d6.$0],true)))))))?ct.entryRef(d4[0],d4[1],cW.RAct):dR.$==1&&(d8=eW(dR.$0),d8!=null&&d8.$==1&&(dR.$1.$==1&&(bk.Vertical(dR.$1.$0).$==0&&(dR.$1.$1.$==1&&(d9=bk.Measures$1(dR.$1.$1.$0),d9!=null&&d9.$==1&&(dR.$1.$1.$1.$==1&&(d_=eR(dR.$1.$1.$1.$0),d_!=null&&d_.$==1&&(dR.$1.$1.$1.$1.$==1&&(d$=eR(dR.$1.$1.$1.$1.$0),d$!=null&&d$.$==1&&(dR.$1.$1.$1.$1.$1.$==0&&(d7=[d_.$0,d9.$0,d8.$0,d$.$0],true)))))))))))?ct.entryDoc(d7[2],{$:0,$0:{$:0,$0:true,$1:d7[1],$2:d7[0],$3:d7[3]}}):dR.$==1&&(eb=eW(dR.$0),eb!=null&&eb.$==1&&(dR.$1.$==1&&(bk.Vertical(dR.$1.$0).$==1&&(dR.$1.$1.$==1&&(ec=bk.Measures$1(dR.$1.$1.$0),ec!=null&&ec.$==1&&(dR.$1.$1.$1.$==1&&(ed=eR(dR.$1.$1.$1.$0),ed!=null&&ed.$==1&&(dR.$1.$1.$1.$1.$==1&&(ee=eR(dR.$1.$1.$1.$1.$0),ee!=null&&ee.$==1&&(dR.$1.$1.$1.$1.$1.$==0&&(ea=[ed.$0,ec.$0,eb.$0,ee.$0],true)))))))))))?ct.entryDoc(ea[2],{$:0,$0:{$:0,$0:false,$1:ea[1],$2:ea[0],$3:ea[3]}}):dR.$==1&&(eg=eW(dR.$0),eg!=null&&eg.$==1&&(dR.$1.$==1&&(bk.PlugIn(dR.$1.$0).$==1&&(dR.$1.$1.$==1&&(eh=eU(dR.$1.$1.$0),eh!=null&&eh.$==1&&(dR.$1.$1.$1.$==1&&(ei=e3(dR.$1.$1.$1.$0),ei!=null&&ei.$==1&&(dR.$1.$1.$1.$1.$==1&&(ej=e2(dR.$1.$1.$1.$1.$0),ej!=null&&ej.$==1&&(dR.$1.$1.$1.$1.$1.$==0&&(ef=[eh.$0,ei.$0,eg.$0,ej.$0],true)))))))))))?ct.entryDoc(ef[2],{$:1,$0:{$:0,$0:ef[0],$1:ef[1],$2:ef[3]}}):dR.$==1&&(el=eW(dR.$0),el!=null&&el.$==1&&(dR.$1.$==1&&(bk.PlugIn(dR.$1.$0).$==2&&(dR.$1.$1.$==1&&(em=eS(dR.$1.$1.$0),em!=null&&em.$==1&&(dR.$1.$1.$1.$==1&&(en=e3(dR.$1.$1.$1.$0),en!=null&&en.$==1&&(dR.$1.$1.$1.$1.$==0&&(ek=[en.$0,el.$0,em.$0],true)))))))))?ct.entryDoc(ek[1],{$:2,$0:{$:0,$0:ek[2],$1:ek[0]}}):dR.$==1&&(ep=eW(dR.$0),ep!=null&&ep.$==1&&(dR.$1.$==1&&(bk.PlugIn(dR.$1.$0).$==3&&(dR.$1.$1.$==1&&(eq=eS(dR.$1.$1.$0),eq!=null&&eq.$==1&&(dR.$1.$1.$1.$==1&&(er=e3(dR.$1.$1.$1.$0),er!=null&&er.$==1&&(dR.$1.$1.$1.$1.$==0&&(eo=[er.$0,ep.$0,eq.$0],true)))))))))?ct.entryDoc(eo[1],{$:3,$0:{$:0,$0:eo[2],$1:eo[0]}}):dR.$==1&&(et=eW(dR.$0),et!=null&&et.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==0&&(dR.$1.$1.$==1&&(eu=(ew=e2(dR.$1.$1.$0),ew!=null&&ew.$==1&&(ew.$0.$==1&&(ew.$0.$0.$==0&&(ew.$0.$1.$==0&&(ev=ew.$0.$0.$0,true)))))?{$:1,$0:ev}:null,eu!=null&&eu.$==1&&(dR.$1.$1.$1.$==0&&(es=[et.$0,eu.$0],true)))))))?ct.entryVar(es[0],{$:0,$0:b8.Trim(es[1])}):dR.$==1&&(ey=eW(dR.$0),ey!=null&&ey.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==1&&(dR.$1.$1.$==1&&(ez=eR(dR.$1.$1.$0),ez!=null&&ez.$==1&&(eA=e5(dR.$1.$1.$1),eA!=null&&eA.$==1&&(ex=[ez.$0,ey.$0,eA.$0],true)))))))?ct.entryDoc(ex[1],{$:4,$0:{$:0,$0:ex[0],$1:ex[2]}}):dR.$==1&&(eC=eW(dR.$0),eC!=null&&eC.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==2&&(eD=e5(dR.$1.$1),eD!=null&&eD.$==1&&(eB=[eC.$0,eD.$0],true)))))?ct.entryView(eB[0],{$:0,$0:eB[1]}):dR.$==1&&(eF=eW(dR.$0),eF!=null&&eF.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==3&&(eG=e7(dR.$1.$1),eG!=null&&eG.$==1&&(eE=[eF.$0,eG.$0],true)))))?ct.entryDoc(eE[0],{$:5,$0:{$:0,$0:eE[1]}}):dR.$==1&&(eI=eW(dR.$0),eI!=null&&eI.$==1&&(dR.$1.$==1&&(bk.Var(dR.$1.$0).$==4&&(dR.$1.$1.$==1&&(eJ=eU(dR.$1.$1.$0),eJ!=null&&eJ.$==1&&(eK=e5(dR.$1.$1.$1),eK!=null&&eK.$==1&&(eH=[eJ.$0,eI.$0,eK.$0],true)))))))?ct.entryAct(eH[1],{$:0,$0:eH[0],$1:eH[2]}):dR.$==1&&(eM=eW(dR.$0),eM!=null&&eM.$==1&&(dR.$1.$==1&&(eN=bk.Vertical(dR.$1.$0),eN.$==5&&(dR.$1.$1.$==1&&(eO=e3(dR.$1.$1.$0),eO!=null&&eO.$==1&&(eP=e7(dR.$1.$1.$1),eP!=null&&eP.$==1&&(eL=[eO.$0,eN.$0,eM.$0,eP.$0],true)))))))?ct.entryDoc(eL[2],{$:6,$0:{$:0,$0:eL[1],$1:eL[0],$2:eL[3]}}):null;};ct.R=function(dO){var dP,dQ,dR;dP=bk.Identifier(dO);return dP!=null&&dP.$==1?(dQ=b8.SplitChars(dP.$0,["."],0),!U.Equals(dQ,null)&&dQ.length===1?{$:1,$0:{$:0,$0:_8.get(dQ,0)}}:!U.Equals(dQ,null)&&dQ.length===2?(dR=_8.get(dQ,1),{$:1,$0:{$:1,$0:_8.get(dQ,0),$1:dR}}):null):null;};ct.entryPlg=function(dO,dP){return{$:1,$0:ct.entryDef(dO,{$:4,$0:dP})};};ct.entryRef=function(dO,dP,dQ){return{$:1,$0:ct.entryDef(dO,{$:5,$0:[dP,dQ]})};};ct.entryDoc=function(dO,dP){return{$:1,$0:ct.entryDef(dO,{$:0,$0:dP})};};ct.entryVar=function(dO,dP){return{$:1,$0:ct.entryDef(dO,{$:2,$0:dP})};};ct.entryView=function(dO,dP){return{$:1,$0:ct.entryDef(dO,{$:3,$0:dP})};};ct.entryAct=function(dO,dP){return{$:1,$0:ct.entryDef(dO,{$:1,$0:dP})};};ct.entryDef=function(dO,dP){return{$:0,$0:dO,$1:dP};};cu.refreshLM=function(dO,dP){var dQ;dO.AppendMany(dP);dQ=new cx.New($.map(dO.key,dP));$.iter(function(dR){if(!dQ.Contains(dO.key(dR)))dO.RemoveByKey(dO.key(dR));},$.cache(dO));};cv.cast=a.id;cw.alreadyAdded=function(){return T.FailWith("An item with the same key has already been added.");};cw.notPresent=function(){return T.FailWith("The given key was not present in the dictionary.");};cx=bK.FSharpSet=dH.Class({Contains:function(dO){return cB.Contains(dO,this.tree);},Remove:function(dO){return new cx.New$1(cB.Remove(dO,this.tree));},Add:function(dO){return new cx.New$1(cB.Add(dO,this.tree));},GetEnumerator$1:function(){return ci.Get(cB.Enumerate(false,this.tree));},Equals:function(dO){return this.get_Count()===dO.get_Count()&&$.forall2(U.Equals,this,dO);},get_IsEmpty:function(){return this.tree==null;},get_Count:function(){var dO;dO=this.tree;return dO==null?0:dO.Count;},GetHashCode:function(){return -1741749453+U.Hash(_8.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();},CompareTo0:function(dO){return $.compareWith(U.Compare,this,dO);}},m,cx);cx.op_Addition=function(dO,dP){return new cx.New$1(cB.OfSeq($.append(dO,dP)));};cx.op_Subtraction=function(dO,dP){return bM.Filter(function(dQ){return!dP.Contains(dQ);},dO);};cx.New=dH.Ctor(function(dO){cx.New$1.call(this,cB.OfSeq(dO));},cx);cx.New$1=dH.Ctor(function(dO){m.New.call(this);this.tree=dO;},cx);cy=bK.HashSet=dH.Class({Add:function(dO){return this.add(dO);},Contains:function(dO){var dP;dP=this.data[this.hash(dO)];return dP==null?false:this.arrContains(dO,dP);},add:function(dO){var dP,dQ;dP=this.hash(dO);dQ=this.data[dP];return dQ==null?(this.data[dP]=[dO],this.count=this.count+1,true):this.arrContains(dO,dQ)?false:(dQ.push(dO),this.count=this.count+1,true);},arrContains:function(dO,dP){var dQ,dR,dS,dT;dQ=true;dR=0;dT=dP.length;while(dQ&&dR<dT)if(this.equals.apply(null,[dP[dR],dO]))dQ=false;else dR=dR+1;return!dQ;},ExceptWith:function(dO){var dP;dP=ci.Get(dO);try{while(dP.MoveNext())this.Remove(dP.Current());}finally{if(typeof dP=="object"&&"Dispose"in dP)dP.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(dO){var dP,dQ,dR,dS;dP=0;dQ=dj.concat(this.data);for(dR=0,dS=dQ.length-1;dR<=dS;dR++)_8.set(dO,dR,dQ[dR]);},IntersectWith:function(dO){var dP,dQ,dR,dS,dT;dP=new cy.New$4(dO,this.equals,this.hash);dQ=dj.concat(this.data);for(dR=0,dS=dQ.length-1;dR<=dS;dR++){dT=dQ[dR];!dP.Contains(dT)?this.Remove(dT):void 0;}},Remove:function(dO){var dP;dP=this.data[this.hash(dO)];return dP==null?false:this.arrRemove(dO,dP)&&(this.count=this.count-1,true);},arrRemove:function(dO,dP){var dQ,dR,dS,dT;dQ=true;dR=0;dT=dP.length;while(dQ&&dR<dT)if(this.equals.apply(null,[dP[dR],dO])){dP.splice.apply(dP,[dR,1]);dQ=false;}else dR=dR+1;return!dQ;},GetEnumerator:function(){return ci.Get(dj.concat(this.data));},GetEnumerator0:function(){return ci.Get(dj.concat(this.data));}},m,cy);cy.New$3=dH.Ctor(function(){cy.New$4.call(this,[],U.Equals,U.Hash);},cy);cy.New$4=dH.Ctor(function(dO,dP,dQ){var dR;m.New.call(this);this.equals=dP;this.hash=dQ;this.data=[];this.count=0;dR=ci.Get(dO);try{while(dR.MoveNext())this.add(dR.Current());}finally{if(typeof dR=="object"&&"Dispose"in dR)dR.Dispose();}},cy);cy.New$2=dH.Ctor(function(dO){cy.New$4.call(this,dO,U.Equals,U.Hash);},cy);cz.Box=a.id;cA.TryParse=function(dO){var dP;dP=dJ.parse(dO);return a.isNaN(dP)?null:{$:1,$0:dP};};P.TryParse=function(dO,dP,dQ,dR){var dS,dT;dS=+dO;dT=dS===dS-dS%1&&dS>=dP&&dS<=dQ;dT?dR.set(dS):void 0;return dT;};cB.Contains=function(dO,dP){return!((cB.Lookup(dO,dP))[0]==null);};cB.Remove=function(dO,dP){var dQ,dR,dS,dT;dQ=cB.Lookup(dO,dP);dR=dQ[0];dS=dQ[1];return dR==null?dP:dR.Right==null?cB.Rebuild(dS,dR.Left):dR.Left==null?cB.Rebuild(dS,dR.Right):cB.Rebuild(dS,(dT=_8.ofSeq($.append(cB.Enumerate(false,dR.Left),cB.Enumerate(false,dR.Right))),cB.Build(dT,0,dT.length-1)));};cB.Add=function(dO,dP){return cB.Put(function(dQ,dR){return dR;},dO,dP);};cB.OfSeq=function(dO){var dP;dP=_8.ofSeq($.distinct(dO));_8.sortInPlace(dP);return cB.Build(dP,0,dP.length-1);};cB.Lookup=function(dO,dP){var dQ,dR,dS,dT;dQ=[];dR=dP;dS=true;while(dS)if(dR==null)dS=false;else{dT=U.Compare(dO,dR.Node);dT===0?dS=false:dT===1?(dQ.unshift([true,dR.Node,dR.Left]),dR=dR.Right):(dQ.unshift([false,dR.Node,dR.Right]),dR=dR.Left);}return[dR,dQ];};cB.Rebuild=function(dO,dP){var dQ,dS,dT,dU,dV,dW,dX,dY,dZ,d0;function dR(d1){return d1==null?0:d1.Height;}dQ=dP;for(dS=0,dT=_8.length(dO)-1;dS<=dT;dS++){dQ=(dU=_8.get(dO,dS),dU[0]?(dV=dU[1],(dW=dU[2],dR(dQ)>dR(dW)+1?dR(dQ.Left)===dR(dQ.Right)+1?(dX=dQ.Left,cB.Branch(dX.Node,cB.Branch(dV,dW,dX.Left),cB.Branch(dQ.Node,dX.Right,dQ.Right))):cB.Branch(dQ.Node,cB.Branch(dV,dW,dQ.Left),dQ.Right):cB.Branch(dV,dW,dQ))):(dY=dU[1],(dZ=dU[2],dR(dQ)>dR(dZ)+1?dR(dQ.Right)===dR(dQ.Left)+1?(d0=dQ.Right,cB.Branch(d0.Node,cB.Branch(dQ.Node,dQ.Left,d0.Left),cB.Branch(dY,d0.Right,dZ))):cB.Branch(dQ.Node,dQ.Left,cB.Branch(dY,dQ.Right,dZ)):cB.Branch(dY,dQ,dZ))));}return dQ;};cB.Put=function(dO,dP,dQ){var dR,dS;dR=cB.Lookup(dP,dQ);dS=dR[0];return dS==null?cB.Rebuild(dR[1],cB.Branch(dP,null,null)):cB.Rebuild(dR[1],cB.Branch(dO(dS.Node,dP),dS.Left,dS.Right));};cB.TryFind=function(dO,dP){var dQ;dQ=(cB.Lookup(dO,dP))[0];return dQ==null?null:{$:1,$0:dQ.Node};};cB.Branch=function(dO,dP,dQ){var dR,dS;return cX.New(dO,dP,dQ,1+(dR=dP==null?0:dP.Height,(dS=dQ==null?0:dQ.Height,U.Compare(dR,dS)===1?dR:dS)),1+(dP==null?0:dP.Count)+(dQ==null?0:dQ.Count));};cB.Enumerate=function(dO,dP){function dQ(dR,dS){var dT;while(true)if(dR==null)return dS.$==1?{$:1,$0:[dS.$0[0],[dS.$0[1],dS.$1]]}:null;else if(dO){dT=dR;dR=dT.Right;dS=new bv({$:1,$0:[dT.Node,dT.Left],$1:dS});}else{dT=dR;dR=dT.Left;dS=new bv({$:1,$0:[dT.Node,dT.Right],$1:dS});}}return $.unfold(function(dR){return dQ(dR[0],dR[1]);},[dP,bv.Empty]);};cB.Build=function(dO,dP,dQ){var dR,dS,dT;return dQ-dP+1<=0?null:(dR=(dP+dQ)/2>>0,(dS=cB.Build(dO,dP,dR-1),(dT=cB.Build(dO,dR+1,dQ),cB.Branch(_8.get(dO,dR),dS,dT))));};cD.LoadLocalTemplates=function(dO){!cD.LocalTemplatesLoaded()?(cD.set_LocalTemplatesLoaded(true),cD.LoadNestedTemplates(self.document.body,"")):void 0;cD.LoadedTemplates().set_Item(dO,cD.LoadedTemplateFile(""));};cD.NamedTemplate=function(dO,dP,dQ){var dR,dS;dR=(dS=null,[cD.LoadedTemplateFile(dO).TryGetValue(dP==null?"":dP.$0,{get:function(){return dS;},set:function(dT){dS=dT;}}),dS]);return dR[0]?cD.ChildrenTemplate(dR[1].cloneNode(true),dQ):(dI.warn("Local template doesn't exist",dP),bq.get_Empty());};cD.LocalTemplatesLoaded=function(){c9.$cctor();return c9.LocalTemplatesLoaded;};cD.set_LocalTemplatesLoaded=function(dO){c9.$cctor();c9.LocalTemplatesLoaded=dO;};cD.LoadNestedTemplates=function(dO,dP){var dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4;function dQ(d5){var d6,d7;if(!dR.ContainsKey(d5)){d6=(d7=null,[dS.TryGetValue(d5,{get:function(){return d7;},set:function(d8){d7=d8;}}),d7]);d6[0]?(d4.Add(d5),dS.Remove(d5),cD.PrepareTemplateStrict(dP,{$:1,$0:d5},d6[1][0],{$:1,$0:d6[1][1]},{$:1,$0:dQ})):dI.warn(d4.Contains(d5)?"Encountered loop when instantiating "+d5:"Local template does not exist: "+d5);}}dR=cD.LoadedTemplateFile(dP);dS=new bL.New$5();dT=dO.querySelectorAll("[ws-template]");for(dU=0,dV=dT.length-1;dU<=dV;dU++){dW=dT[dU];dX=dW.getAttribute("ws-template").toLowerCase();dW.removeAttribute("ws-template");dS.set_Item(dX,[[dW],cD.FakeRootSingle(dW)]);}dY=dO.querySelectorAll("[ws-children-template]");for(dZ=0,d0=dY.length-1;dZ<=d0;dZ++){d1=dY[dZ];d2=d1.getAttribute("ws-children-template").toLowerCase();d1.removeAttribute("ws-children-template");dS.set_Item(d2,(d3=cs.ChildrenArray(d1),[d3,cD.FakeRoot(d3)]));}d4=new cy.New$3();while(dS.count>0)dQ($.head(dS.get_Keys()));};cD.LoadedTemplates=function(){c9.$cctor();return c9.LoadedTemplates;};cD.LoadedTemplateFile=function(dO){var dP,dQ,dR;dP=(dQ=null,[cD.LoadedTemplates().TryGetValue(dO,{get:function(){return dQ;},set:function(dS){dQ=dS;}}),dQ]);return dP[0]?dP[1]:(dR=new bL.New$5(),(cD.LoadedTemplates().set_Item(dO,dR),dR));};cD.ChildrenTemplate=function(dO,dP){var dQ,dR,dS,dT,dU;dQ=cD.InlineTemplate(dO,dP);dR=dQ[1];dS=dQ[0];dT=dS.Els;return!U.Equals(dT,null)&&dT.length===1&&(_8.get(dT,0)instanceof bD&&(U.Equals(_8.get(dT,0).nodeType,bD.ELEMENT_NODE)&&(dU=_8.get(dT,0),true)))?cU.TreeNode(dS,dR):bq.Mk({$:6,$0:dS},dR);};cD.FakeRootSingle=function(dO){var dP,dQ,dR;dO.removeAttribute("ws-template");dP=dO.getAttribute("ws-replace");dP===null?void 0:(dO.removeAttribute("ws-replace"),dQ=dO.parentNode,U.Equals(dQ,null)?void 0:(dR=self.document.createElement(dO.tagName),dR.setAttribute("ws-replace",dP),dQ.replaceChild(dR,dO)));return cD.FakeRoot([dO]);};cD.FakeRoot=function(dO){var dP,dQ,dR;dP=self.document.createElement("div");for(dQ=0,dR=dO.length-1;dQ<=dR;dQ++)dP.appendChild(_8.get(dO,dQ));return dP;};cD.PrepareTemplateStrict=function(dO,dP,dQ,dR,dS){var dT,dU;function dV(d0,d1){var d2,d3,d4,d5,d6,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq;function d7(er){}while(true)switch(d0){case 0:if(d1!==null){d2=d1.nextSibling;if(U.Equals(d1.nodeType,bD.TEXT_NODE))dl.convertTextNode(d1);else if(U.Equals(d1.nodeType,bD.ELEMENT_NODE))dX(d1);d1=d2;}else return null;break;case 1:d8=bH.string(d1.nodeName,{$:1,$0:3},null).toLowerCase();d9=(d3=d8.indexOf("."),d3===-1?[dO,d8]:[bH.string(d8,null,{$:1,$0:d3-1}),bH.string(d8,{$:1,$0:d3+1},null)]);d_=d9[1];d$=d9[0];if(d$!==""&&!cD.LoadedTemplates().ContainsKey(d$))return dl.failNotLoaded(d_);else{if(d$===""&&dS!=null)dS.$0(d_);ea=cD.LoadedTemplates().get_Item(d$);if(!ea.ContainsKey(d_))return dl.failNotLoaded(d_);else{eb=ea.get_Item(d_);ec=eb.cloneNode(true);ed=new cy.New$3();ee=new bL.New$5();ef=d1.attributes;for(eg=0,eh=ef.length-1;eg<=eh;eg++){ei=ef.item(eg).name.toLowerCase();ee.set_Item(ei,(ej=ef.item(eg).nodeValue,ej===""?ei:ej.toLowerCase()));!ed.Add(ei)?dI.warn("Hole mapped twice",ei):void 0;}for(ek=0,el=d1.childNodes.length-1;ek<=el;ek++){em=d1.childNodes[ek];U.Equals(em.nodeType,bD.ELEMENT_NODE)?!ed.Add(em.nodeName.toLowerCase())?dI.warn("Hole filled twice",d_):void 0:void 0;}en=d1.childNodes.length===1&&U.Equals(d1.firstChild.nodeType,bD.TEXT_NODE);if(en){d5=dl.fillTextHole(ec,d1.firstChild.textContent,d_);((function(er){return function(es){if(es!=null)er(es.$0);};}((d6=function(er){return function(es){return er.Add(es);};}(ed),function(er){return d7(d6(er));})))(d5));}dl.removeHolesExcept(ec,ed);if(!en){for(eo=0,ep=d1.childNodes.length-1;eo<=ep;eo++){eq=d1.childNodes[eo];U.Equals(eq.nodeType,bD.ELEMENT_NODE)?eq.hasAttributes()?dl.fillInstanceAttrs(ec,eq):dW(ec,eq):void 0;}}dl.mapHoles(ec,ee);dl.fill(ec,d1.parentNode,d1);d1.parentNode.removeChild(d1);return;}}break;}}function dW(d0,d1){var d2,d4,d5;function d3(d6,d7){var d8,d9,d_;if(d4==="title"&&d1.hasChildNodes()){d8=dL.parseHTML(d1.textContent);d1.removeChild(d1.firstChild);for(d9=0,d_=d8.length-1;d9<=d_;d9++)d1.appendChild(_8.get(d8,d9));}else null;dX(d1);return dl.fill(d1,d6,d7);}d4=d1.nodeName.toLowerCase();cs.IterSelector(d0,"[ws-attr-holes]",function(d6){var d7,d8,d9,d_,d$;d7=b8.SplitChars(d6.getAttribute("ws-attr-holes"),[" "],1);for(d8=0,d9=d7.length-1;d8<=d9;d8++){d_=_8.get(d7,d8);d6.setAttribute(d_,(d$=new a.RegExp("\\${"+d4+"}","ig"),d6.getAttribute(d_).replace(d$,d1.textContent)));}});d5=d0.querySelector("[ws-hole="+d4+"]");if(U.Equals(d5,null)){d2=d0.querySelector("[ws-replace="+d4+"]");return U.Equals(d2,null)?null:(d3(d2.parentNode,d2),void d2.parentNode.removeChild(d2));}else{while(d5.hasChildNodes())d5.removeChild(d5.lastChild);d5.removeAttribute("ws-hole");return d3(d5,null);}}function dX(d0){if(b8.StartsWith(d0.nodeName.toLowerCase(),"ws-"))dZ(d0);else{dl.convertAttrs(d0);dY(d0.firstChild);}}function dY(d0){return dV(0,d0);}function dZ(d0){return dV(1,d0);}dT=dR==null?cD.FakeRoot(dQ):dR.$0;dU=(dP==null?"":dP.$0).toLowerCase();cD.LoadedTemplateFile(dO).set_Item(dU,dT);_8.length(dQ)>0?(function(d0){var d1,d2,d3,d4;while(true){d1=d0.querySelector("[ws-template]");if(U.Equals(d1,null)){d2=d0.querySelector("[ws-children-template]");if(U.Equals(d2,null))return null;else{d3=d2.getAttribute("ws-children-template");d2.removeAttribute("ws-children-template");cD.PrepareTemplateStrict(dO,{$:1,$0:d3},cs.ChildrenArray(d2),null,null);d0=d0;}}else{d4=d1.getAttribute("ws-template");(cD.PrepareSingleTemplate(dO,{$:1,$0:d4},d1))(null);d0=d0;}}}(dT),dY(_8.get(dQ,0))):void 0;};cD.InlineTemplate=function(dO,dP){var dQ,dR,dS,dT,dW,dX,dY,dZ,d0,d1,d2;function dU(d3,d4){var d5,d6,d7;d5=cr.Insert(d3,d4);dX.push(cr.Updates(d5));dY.push([d3,d5]);d6=dH.GetOptional(d5.OnAfterRender);return d6==null?null:(d7=d6.$0,void dZ.push(function(){d7(d3);}));}function dV(d3){var d4,d5;d4=(d5=null,[d0.TryGetValue(d3,{get:function(){return d5;},set:function(d6){d5=d6;}}),d5]);return d4[0]?d4[1].$==0?{$:1,$0:d4[1].$1}:d4[1].$==1?{$:1,$0:bq.TextNode(d4[1].$1)}:d4[1].$==2?{$:1,$0:bq.TextView(d4[1].$1)}:d4[1].$==8?{$:1,$0:bq.TextView(d4[1].$1.get_View())}:d4[1].$==9?{$:1,$0:bq.TextView(S.Map(a.String,d4[1].$1.get_View()))}:d4[1].$==10?{$:1,$0:bq.TextView(S.Map(function(d6){return d6.get_Input();},d4[1].$1.get_View()))}:d4[1].$==11?{$:1,$0:bq.TextView(S.Map(a.String,d4[1].$1.get_View()))}:d4[1].$==12?{$:1,$0:bq.TextView(S.Map(function(d6){return d6.get_Input();},d4[1].$1.get_View()))}:d4[1].$==13?{$:1,$0:bq.TextView(S.Map(a.String,d4[1].$1.get_View()))}:(dI.warn("Content hole filled with attribute data",d3),null):null;}dW=[];dX=[];dY=[];dZ=[];d0=new bL.New$5();d1=ci.Get(dP);try{while(d1.MoveNext()){d2=d1.Current();d0.set_Item(d2.$0,d2);}}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}dQ=cs.ChildrenArray(dO);cs.IterSelector(dO,"[ws-hole]",function(d3){var d4,d5,d6;d6=d3.getAttribute("ws-hole");d3.removeAttribute("ws-hole");while(d3.hasChildNodes())d3.removeChild(d3.lastChild);d4=dV(d6);d4!=null&&d4.$==1?(d5=d4.$0,cS.LinkElement(d3,d5.docNode),dW.push(cP.New(cr.Empty(d3),d5.docNode,null,d3,cf.Int(),null)),dX.push(d5.updates)):void 0;});cs.IterSelector(dO,"[ws-replace]",function(d3){var d4,d5,d6,d7,d8,d9;d4=dV(d3.getAttribute("ws-replace"));d4!=null&&d4.$==1?(d5=d4.$0,d6=d3.parentNode,d7=self.document.createTextNode(""),d6.replaceChild(d7,d3),d8=cS.InsertBeforeDelim(d7,d5.docNode),d9=_8.tryFindIndex(function(d_){return d3===d_;},dQ),d9==null?void 0:_8.set(dQ,d9.$0,d5.docNode),dW.push(cP.New(cr.Empty(d6),d5.docNode,{$:1,$0:[d8,d7]},d6,cf.Int(),null)),dX.push(d5.updates)):void 0;});cs.IterSelector(dO,"[ws-attr]",function(d3){var d4,d5,d6;d4=d3.getAttribute("ws-attr");d3.removeAttribute("ws-attr");d5=(d6=null,[d0.TryGetValue(d4,{get:function(){return d6;},set:function(d7){d6=d7;}}),d6]);d5[0]?d5[1].$==3?dU(d3,d5[1].$1):dI.warn("Attribute hole filled with non-attribute data",d4):void 0;});cs.IterSelector(dO,"[ws-on]",function(d3){dU(d3,bE.Concat(_8.choose(function(d4){var d5,d6,d7;d5=b8.SplitChars(d4,[":"],1);d6=(d7=null,[d0.TryGetValue(_8.get(d5,1),{get:function(){return d7;},set:function(d8){d7=d8;}}),d7]);return d6[0]?d6[1].$==4?{$:1,$0:bA.Handler(_8.get(d5,0),d6[1].$1)}:d6[1].$==5?{$:1,$0:bE.Handler(_8.get(d5,0),d6[1].$2)}:(dI.warn("Event hole on"+_8.get(d5,0)+" filled with non-event data",_8.get(d5,1)),null):null;},b8.SplitChars(d3.getAttribute("ws-on"),[" "],1))));d3.removeAttribute("ws-on");});cs.IterSelector(dO,"[ws-onafterrender]",function(d3){var d4,d5,d6;d4=d3.getAttribute("ws-onafterrender");d5=(d6=null,[d0.TryGetValue(d4,{get:function(){return d6;},set:function(d7){d6=d7;}}),d6]);d5[0]?d5[1].$==6?(d3.removeAttribute("ws-onafterrender"),dU(d3,bA.OnAfterRender(d5[1].$1))):d5[1].$==7?(d3.removeAttribute("ws-onafterrender"),dU(d3,bA.OnAfterRender(d5[1].$1))):dI.warn("onafterrender hole filled with non-onafterrender data",d4):void 0;});cs.IterSelector(dO,"[ws-var]",function(d3){var d4,d5,d6;d4=d3.getAttribute("ws-var");d3.removeAttribute("ws-var");d5=(d6=null,[d0.TryGetValue(d4,{get:function(){return d6;},set:function(d7){d6=d7;}}),d6]);d5[0]?d5[1].$==8?dU(d3,bA.Value(d5[1].$1)):d5[1].$==9?dU(d3,bA.Checked(d5[1].$1)):d5[1].$==10?dU(d3,bA.IntValue(d5[1].$1)):d5[1].$==11?dU(d3,bA.IntValueUnchecked(d5[1].$1)):d5[1].$==12?dU(d3,bA.FloatValue(d5[1].$1)):d5[1].$==13?dU(d3,bA.FloatValueUnchecked(d5[1].$1)):dI.warn("Var hole filled with non-Var data",d4):void 0;});cs.IterSelector(dO,"[ws-attr-holes]",function(d3){var d4,d5,d6,d7;d4=new a.RegExp(cD.TextHoleRE(),"g");d5=b8.SplitChars(d3.getAttribute("ws-attr-holes"),[" "],1);d3.removeAttribute("ws-attr-holes");for(d6=0,d7=d5.length-1;d6<=d7;d6++)(function(){var d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei;ef=_8.get(d5,d6);eg=d3.getAttribute(ef);d8=null;d9=0;eh=[];while(d8=d4.exec(eg),d8!==null){ei=bH.string(eg,{$:1,$0:d9},{$:1,$0:d4.lastIndex-_8.get(d8,0).length-1});d9=d4.lastIndex;eh.push([ei,_8.get(d8,1)]);}d$=bH.string(eg,{$:1,$0:d9},null);d4.lastIndex=0;ea=_8.foldBack(function(ej,ek){return(function(el){var em,en;em=el[0];en=el[1];return function(eo){var ep,eq,er,es,et;ep=eo[0];eq=eo[1];er=(es=(et=null,[d0.TryGetValue(en,{get:function(){return et;},set:function(eu){et=eu;}}),et]),es[0]?es[1].$==1?{$:0,$0:es[1].$1}:es[1].$==2?{$:1,$0:es[1].$1}:es[1].$==8?{$:1,$0:es[1].$1.get_View()}:es[1].$==9?{$:1,$0:S.Map(a.String,es[1].$1.get_View())}:es[1].$==10?{$:1,$0:S.Map(function(eu){return eu.get_Input();},es[1].$1.get_View())}:es[1].$==11?{$:1,$0:S.Map(a.String,es[1].$1.get_View())}:es[1].$==12?{$:1,$0:S.Map(function(eu){return eu.get_Input();},es[1].$1.get_View())}:es[1].$==13?{$:1,$0:S.Map(a.String,es[1].$1.get_View())}:(dI.warn("Attribute value hole filled with non-text data",en),{$:0,$0:""}):{$:0,$0:""});return er.$==1?[em,new bv({$:1,$0:ep===""?er.$0:S.Map(function(eu){return eu+ep;},er.$0),$1:eq})]:[em+er.$0+ep,eq];};}(ej))(ek);},eh,[d$,bv.Empty]);return dU(d3,ea[1].$==1?ea[1].$1.$==1?ea[1].$1.$1.$==1?ea[1].$1.$1.$1.$==0?(eb=ea[0],bA.Dynamic(ef,S.Map3(function(ej,ek,el){return eb+ej+ek+el;},ea[1].$0,ea[1].$1.$0,ea[1].$1.$1.$0))):(ec=ea[0],bA.Dynamic(ef,S.Map(function(ej){return ec+b8.concat("",ej);},S.Sequence(ea[1])))):(ed=ea[0],bA.Dynamic(ef,S.Map2(function(ej,ek){return ed+ej+ek;},ea[1].$0,ea[1].$1.$0))):ea[0]===""?bA.Dynamic(ef,ea[1].$0):(ee=ea[0],bA.Dynamic(ef,S.Map(function(ej){return ee+ej;},ea[1].$0))):bE.Create(ef,ea[0]));}());});return[dH.DeleteEmptyFields({Els:dQ,Dirty:true,Holes:dW,Attrs:dY,Render:(dR=dZ.length==0?null:{$:1,$0:function(d3){_8.iter(function(d4){d4(d3);},dZ);}},dR?dR.$0:void 0),El:(dS=!U.Equals(dQ,null)&&dQ.length===1&&(_8.get(dQ,0)instanceof bD&&(_8.get(dQ,0)instanceof a.Element&&(dT=_8.get(dQ,0),true)))?{$:1,$0:dT}:null,dS?dS.$0:void 0)},["Render","El"]),cp.TreeReduce(S.Const(),S.Map2Unit,dX)];};cD.PrepareSingleTemplate=function(dO,dP,dQ){var dR,dS,dT;dR=cD.FakeRootSingle(dQ);dS=[dQ];dT={$:1,$0:dR};return function(dU){cD.PrepareTemplateStrict(dO,dP,dS,dT,dU);};};cD.TextHoleRE=function(){c9.$cctor();return c9.TextHoleRE;};cE.p$1=function(dO){return"{"+("docName = "+be.prettyPrint(dO.docName))+"; "+("docDoc = "+cG.p$2(dO.docDoc))+"}";};cF.appfwkclient=function(dO){cF.fixedsplitterhor();cF.fixedsplitterver();cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},dO):void 0;};cE.p=function(dO){return"{"+("actName = "+be.prettyPrint(dO.actName))+"; "+("actFunction = "+cG.p(dO.actFunction))+"; "+("actEnabled = "+cG.p$1(dO.actEnabled))+"}";};cG.p$3=function(dO){return dO.$==1?"FullRef ("+be.prettyPrint(dO.$0)+", "+be.prettyPrint(dO.$1)+")":"LocalRef "+be.prettyPrint(dO.$0);};cG.p$2=function(dO){return dO.$==5?"FunDoc5 (<fun>, "+be.prettyPrint(dO.$1)+", "+be.prettyPrint(dO.$2)+", "+be.prettyPrint(dO.$3)+", "+be.prettyPrint(dO.$4)+", "+be.prettyPrint(dO.$5)+")":dO.$==4?"FunDoc4 (<fun>, "+be.prettyPrint(dO.$1)+", "+be.prettyPrint(dO.$2)+", "+be.prettyPrint(dO.$3)+", "+be.prettyPrint(dO.$4)+")":dO.$==3?"FunDoc3 (<fun>, "+be.prettyPrint(dO.$1)+", "+be.prettyPrint(dO.$2)+", "+be.prettyPrint(dO.$3)+")":dO.$==2?"FunDoc2 (<fun>, "+be.prettyPrint(dO.$1)+", "+be.prettyPrint(dO.$2)+")":dO.$==1?"FunDoc1 (<fun>, "+be.prettyPrint(dO.$1)+")":"LazyDoc "+be.prettyPrint(dO.$0);};cF.tile=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"tile"},dO):void 0;};cF.namevalueinput=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},dO):void 0;};cF.namevalue=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"namevalue"},dO):void 0;};cF.action=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"action"},dO):void 0;};cF.actiondisabled=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},dO):void 0;};cF.fixedsplitterhor=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},dO):void 0;};cF.fixedsplitterver=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},dO):void 0;};cF.wcompsplitterhor=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},dO):void 0;};cF.wcompsplitterver=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},dO):void 0;};cF.appframework=function(dO){cD.LoadLocalTemplates("appframework");return dO?cD.NamedTemplate("appframework",{$:1,$0:"appframework"},dO):void 0;};cG.p$4=function(dO){return dO.$==1?"UnQuoted "+be.prettyPrint(dO.$0):"Quoted "+be.prettyPrint(dO.$0);};cG.p=function(dO){return dO.$==2?"FunAct2 (<fun>, "+be.prettyPrint(dO.$1)+", "+be.prettyPrint(dO.$2)+")":dO.$==1?"FunAct1 (<fun>, "+be.prettyPrint(dO.$1)+")":"FunAct0 <fun>";};cG.p$1=function(dO){return"View <fun>";};cH.StartTo=function(dO,dP){cc.StartWithContinuations(dO,dP,function(dQ){cH.OnError(dQ);},a.ignore,null);};cH.OnError=function(dO){return dI.log("WebSharper UI: Uncaught asynchronous exception",dO);};cI.New=function(dO,dP){return{k:dO,ct:dP};};b6.addMsg=function(dO,dP){return b6.mapMessage(function(dQ){return ch.addMsg(dO,dQ);},dP);};b6.mapMessage=function(dO,dP){return{$:0,$0:dP.$0,$1:dO(dP.$1)};};ch=Y.ResultMessage=dH.Class({toString:function(){return this.$==1?(function(dO){return function(dP){return dO("Error    : "+be.toSafe(dP));};}(a.id))(this.$0):this.$==2?(function(dO){return function(dP){return dO("Warning  : "+be.toSafe(dP));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(dO){return function(dP){return dO(a.String(dP));};}(a.id))(this.$0):this.$==5?(((dH.Curried3(function(dO,dP,dQ){return dO("Exception: "+be.toSafe(dP)+", "+be.toSafe(dQ));}))(a.id))(this.$0))(this.$1):this.$==6?b8.concat("\n",$.map(a.String,$.filter(function(dO){return dO.$!=0;},this.$0))):"";}},null,ch);ch.NoMsg=new ch({$:0});cK=cJ.CEBuilder=dH.Class({},m,cK);cK.New=dH.Ctor(function(){m.New.call(this);},cK);cN=cM.WcTabStripT=dH.Class({connectedCallback:function(){var dO,dP,dQ,dR;function dS(){var dT,dU,dV;dU=!dP.hasAttribute("bottom");dV=bu.ofSeq($.delay(function(){return $.collect(function(dW){var dX;dX=dP.childNodes[dW-1];return U.Equals(dX.nodeType,bD.ELEMENT_NODE)?[[dX.hasAttribute("tabname")?dX.getAttribute("tabname"):(function(dY){return function(dZ){return dY("Tab "+a.String(dZ));};}(a.id))(dW),dX]]:[];},T.range(1,dP.childNodes.length));}));while(dR.childNodes.length>0)dR.removeChild(dR.lastChild);dT=cM.tabStrip(dO.selected,dU,true,dV,bq.Element("slot",bv.Empty,bv.Empty));cD.LoadLocalTemplates("");bq.Run(dR,dT);}dO=this;!this.added?(dP=this,dQ=dP.attachShadow({mode:"open"}),dR=self.document.createElement("div"),dQ.appendChild(dR),dS(),dP.addEventListener("DOMSubtreeModified",Y.delayed(50,dS)),this.added=true):void 0;}},m,cN);cN.Constructor=function(){var dO,dP;dO=(dP=dN.construct(self.HTMLElement,[],this.__proto__.constructor),dP);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dO);return dO;};cN.New=dH.Ctor(function(){m.New.call(this);this.added=false;this.selected=_2.Create$1(1);(function(dO){return dO("WcTabStripT initializer");}(function(dO){dI.log(dO);}));},cN);cL.defineWebComponent=function(dO,dP,dQ){try{dI.log("defineWebComponent: "+dO);cg.setPrototypeOf(dQ.prototype,self.HTMLElement.prototype);cg.setPrototypeOf(dQ,self.HTMLElement);cg.setPrototypeOf(dP.prototype,dQ.prototype);self.customElements.define(dO,dP);}catch(dR){(function(dS){return dS("Failed to define WebComponent. Not supported.");}(function(dS){dI.log(dS);}));}};cO.init=function(dO,dP){var dQ;dQ=new c3.New();cO.set_layoutHorizontal(dO);cO.set_layoutVertical(dP);cL.defineWebComponent("wcomp-splitter",c3.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};cO.set_layoutHorizontal=function(dO){cl.$cctor();cl.layoutHorizontal=dO;};cO.set_layoutVertical=function(dO){cl.$cctor();cl.layoutVertical=dO;};cO.layoutVertical=function(){cl.$cctor();return cl.layoutVertical;};cO.layoutHorizontal=function(){cl.$cctor();return cl.layoutHorizontal;};cM.init=function(){cl.$cctor();return cl.init;};cM.tabStrip=function(dO,dP,dQ,dR,dS){var dT;dT=bq.Element("div",[bE.Create("class",(((dH.Curried3(function(dU,dV,dW){return dU("tab-strip "+be.toSafe(dV)+" "+be.toSafe(dW));}))(a.id))(dP?"top":"bottom"))(dQ?"horizontal":"vertical"))],bu.ofSeq($.delay(function(){return $.collect(function(dU){var dV;dV=dU[0];return[dd.New$1().Content(bq.Element("div",[bA.Dynamic("class",S.Map(function(dW){return"tab"+(dW===dV+1?" selected":"");},dO.get_View())),bE.Create("draggable","true"),bE.HandlerImpl("click",function(){return function(){return dO.Set(dV+1);};})],[bq.TextNode(dU[1][0])]))];},$.indexed(dR));})));return bq.Element("div",[bE.Create("class","tab-panel")],bu.ofSeq($.delay(function(){return $.append(dP?[dT]:[],$.delay(function(){return $.append([bq.Element("div",[bE.Create("class","tab-content")],[dS])],$.delay(function(){return $.append(!dP?[dT]:[],$.delay(function(){return $.append([bq.Element("style",bv.Empty,bu.ofArray([bq.TextNode(cM.css())]))],$.delay(function(){return[bq.Element("style",bv.Empty,bu.ofArray([bq.TextView(S.Map(function(dU){return function(dV){return dU("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(dV)+")) { display: grid }\r\n                                           ");};}(a.id),dO.get_View()))]))];}));}));}));}));})));};cM.css=function(){cl.$cctor();return cl.css;};cP=Q.DocElemNode=dH.Class({Equals:function(dO){return this.ElKey===dO.ElKey;},GetHashCode:function(){return this.ElKey;}},null,cP);cP.New=function(dO,dP,dQ,dR,dS,dT){var dU;return new cP((dU={Attr:dO,Children:dP,El:dR,ElKey:dS},(dH.SetOptional(dU,"Delimiters",dQ),dH.SetOptional(dU,"Render",dT),dU)));};cR=cq.ArrayStorage=dH.Class({SAppendMany:function(dO,dP){var dQ;dQ=cp.ofSeqNonCopying(dO);dP.push.apply(dP,dQ);return dP;},SSetAt:function(dO,dP,dQ){_8.set(dQ,dO,dP);return dQ;},SRemoveIf:function(dO,dP){return _8.filter(function(dQ){return!dO(dQ);},dP);},SSet:function(dO){return _8.ofSeq(dO);},SAppend:function(dO,dP){dP.push(dO);return dP;},SInit:function(){return this.init;}},m,cR);cR.New=dH.Ctor(function(dO){m.New.call(this);this.init=dO;},cR);cS.CreateTextNode=function(){return{Text:cs.CreateText(""),Dirty:false,Value:""};};cS.UpdateTextNode=function(dO,dP){dO.Value=dP;dO.Dirty=true;};cS.CreateEmbedNode=function(){return{Current:null,Dirty:false};};cS.UpdateEmbedNode=function(dO,dP){dO.Current=dP;dO.Dirty=true;};cS.CreateElemNode=function(dO,dP,dQ){var dR;cS.LinkElement(dO,dQ);dR=cr.Insert(dO,dP);return cP.New(dR,dQ,null,dO,cf.Int(),dH.GetOptional(dR.OnAfterRender));};cS.LinkElement=function(dO,dP){cS.InsertDoc(dO,dP,null);};cS.LinkPrevElement=function(dO,dP){cS.InsertDoc(dO.parentNode,dP,dO);};cS.CreateDelimitedRunState=function(dO,dP,dQ){return du.New(dv.get_Empty(),cS.CreateDelimitedElemNode(dO,dP,cr.EmptyAttr(),dQ));};cS.PerformAnimatedUpdate=function(dO,dP,dQ){var dR;return dn.get_UseAnimations()?(dR=null,cc.Delay(function(){var dS,dT,dU;dS=dv.FindAll(dQ);dT=cS.ComputeChangeAnim(dP,dS);dU=cS.ComputeEnterAnim(dP,dS);return cc.Bind(dn.Play(dn.Append(dT,cS.ComputeExitAnim(dP,dS))),function(){return cc.Bind(cS.SyncElemNodesNextFrame(dO,dP),function(){return cc.Bind(dn.Play(dU),function(){dP.PreviousNodes=dS;return cc.Return(null);});});});})):cS.SyncElemNodesNextFrame(dO,dP);};cS.PerformSyncUpdate=function(dO,dP,dQ){var dR;dR=dv.FindAll(dQ);cS.SyncElemNode(dO,dP.Top);dP.PreviousNodes=dR;};cS.InsertDoc=function(dO,dP,dQ){var dR;return dP!=null&&dP.$==1?cS.InsertNode(dO,dP.$0.El,dQ):dP!=null&&dP.$==2?(dR=dP.$0,(dR.Dirty=false,cS.InsertDoc(dO,dR.Current,dQ))):dP==null?dQ:dP!=null&&dP.$==4?cS.InsertNode(dO,dP.$0.Text,dQ):dP!=null&&dP.$==5?cS.InsertNode(dO,dP.$0,dQ):dP!=null&&dP.$==6?_8.foldBack(function(dS,dT){return dS==null||dS.constructor===cg?cS.InsertDoc(dO,dS,dT):cS.InsertNode(dO,dS,dT);},dP.$0.Els,dQ):cS.InsertDoc(dO,dP.$0,cS.InsertDoc(dO,dP.$1,dQ));};cS.InsertBeforeDelim=function(dO,dP){var dQ,dR;dQ=dO.parentNode;dR=self.document.createTextNode("");dQ.insertBefore(dR,dO);cS.LinkPrevElement(dO,dP);return dR;};cS.CreateDelimitedElemNode=function(dO,dP,dQ,dR){var dS,dT;dS=dO.parentNode;cS.LinkPrevElement(dP,dR);dT=cr.Insert(dS,dQ);return cP.New(dT,dR,{$:1,$0:[dO,dP]},dS,cf.Int(),dH.GetOptional(dT.OnAfterRender));};cS.SyncElemNodesNextFrame=function(dO,dP){function dQ(dR){a.requestAnimationFrame(function(){cS.SyncElemNode(dO,dP.Top);dR();});}return _do.BatchUpdatesEnabled()?cc.FromContinuations(function(dR,dS,dT){return dQ.apply(null,[dR,dS,dT]);}):(cS.SyncElemNode(dO,dP.Top),cc.Return(null));};cS.ComputeExitAnim=function(dO,dP){return dn.Concat(_8.map(function(dQ){return cr.GetExitAnim(dQ.Attr);},dv.ToArray(dv.Except(dP,dv.Filter(function(dQ){return cr.HasExitAnim(dQ.Attr);},dO.PreviousNodes)))));};cS.ComputeEnterAnim=function(dO,dP){return dn.Concat(_8.map(function(dQ){return cr.GetEnterAnim(dQ.Attr);},dv.ToArray(dv.Except(dO.PreviousNodes,dv.Filter(function(dQ){return cr.HasEnterAnim(dQ.Attr);},dP)))));};cS.ComputeChangeAnim=function(dO,dP){var dQ;function dR(dS){return cr.HasChangeAnim(dS.Attr);}dQ=function(dS){return dv.Filter(dR,dS);};return dn.Concat(_8.map(function(dS){return cr.GetChangeAnim(dS.Attr);},dv.ToArray(dv.Intersect(dQ(dO.PreviousNodes),dQ(dP)))));};cS.SyncElemNode=function(dO,dP){!dO?cS.SyncElement(dP):void 0;cS.Sync(dP.Children);cS.AfterRender(dP);};cS.CreateRunState=function(dO,dP){return du.New(dv.get_Empty(),cS.CreateElemNode(dO,cr.EmptyAttr(),dP));};cS.InsertNode=function(dO,dP,dQ){cs.InsertAt(dO,dQ,dP);return dP;};cS.SyncElement=function(dO){function dP(dQ){function dR(dS){var dT,dU;return dS!=null&&dS.$==0?dR(dS.$0)||dR(dS.$1):dS!=null&&dS.$==2?(dT=dS.$0,dT.Dirty||dR(dT.Current)):dS!=null&&dS.$==6&&(dU=dS.$0,dU.Dirty||_8.exists(dP,dU.Holes));}return dR(dQ.Children);}cr.Sync(dO.El,dO.Attr);dP(dO)?cS.DoSyncElement(dO):void 0;};cS.Sync=function(dO){var dP,dQ;if(dO!=null&&dO.$==1)cS.SyncElemNode(false,dO.$0);else if(dO!=null&&dO.$==2)cS.Sync(dO.$0.Current);else if(dO==null);else if(dO!=null&&dO.$==5);else if(dO!=null&&dO.$==4){dP=dO.$0;dP.Dirty?(dP.Text.nodeValue=dP.Value,dP.Dirty=false):void 0;}else if(dO!=null&&dO.$==6){dQ=dO.$0;_8.iter(function(dR){cS.SyncElemNode(false,dR);},dQ.Holes);_8.iter(function(dR){cr.Sync(dR[0],dR[1]);},dQ.Attrs);cS.AfterRender(dQ);}else{cS.Sync(dO.$0);cS.Sync(dO.$1);}};cS.AfterRender=function(dO){var dP;dP=dH.GetOptional(dO.Render);dP!=null&&dP.$==1?(dP.$0(dO.El),dH.SetOptional(dO,"Render",null)):void 0;};cS.DoSyncElement=function(dO){var dP,dQ,dR;function dS(dT,dU){var dV,dW;return dT!=null&&dT.$==1?dT.$0.El:dT!=null&&dT.$==2?(dV=dT.$0,dV.Dirty?(dV.Dirty=false,cS.InsertDoc(dP,dV.Current,dU)):dS(dV.Current,dU)):dT==null?dU:dT!=null&&dT.$==4?dT.$0.Text:dT!=null&&dT.$==5?dT.$0:dT!=null&&dT.$==6?(dW=dT.$0,(dW.Dirty?dW.Dirty=false:void 0,_8.foldBack(function(dX,dY){return dX==null||dX.constructor===cg?dS(dX,dY):dX;},dW.Els,dU))):dS(dT.$0,dS(dT.$1,dU));}dP=dO.El;dE.Iter((dQ=dO.El,function(dT){cs.RemoveNode(dQ,dT);}),dE.Except(dE.DocChildren(dO),dE.Children(dO.El,dH.GetOptional(dO.Delimiters))));dS(dO.Children,(dR=dH.GetOptional(dO.Delimiters),dR!=null&&dR.$==1?dR.$0[1]:null));};cT=Q.DynamicAttrNode=dH.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(dO){return dn.get_Empty();},NGetEnterAnim:function(dO){return dn.get_Empty();},NGetChangeAnim:function(dO){return dn.get_Empty();},NSync:function(dO){if(this.dirty){(this.push(dO))(this.value);this.dirty=false;}}},m,cT);cT.New=dH.Ctor(function(dO,dP){var dQ;dQ=this;m.New.call(this);this.push=dP;this.value=void 0;this.dirty=false;this.updates=S.Map(function(dR){dQ.value=dR;dQ.dirty=true;},dO);},cT);cU=Q.Elt=dH.Class({on:function(dO,dP){var dQ;dQ=this;this.elt.addEventListener(dO,function(dR){return dP(dQ.elt,dR);},false);return this;}},bq,cU);cU.New=function(dO,dP,dQ){var dR,dS;dR=cS.CreateElemNode(dO,dP,dQ.docNode);dS=c6.Create(dQ.updates);return new cU.New$1({$:1,$0:dR},S.Map2Unit(cr.Updates(dR.Attr),dS.v),dO,dS);};cU.TreeNode=function(dO,dP){var dQ,dR;function dS(dT){return dT[1];}dQ=c6.Create(dP);return new cU.New$1({$:6,$0:dO},S.Map2Unit((dR=_8.map(function(dT){return cr.Updates(dS(dT));},dO.Attrs),cp.TreeReduce(S.Const(),S.Map2Unit,dR)),dQ.v),_8.get(dO.Els,0),dQ);};cU.New$1=dH.Ctor(function(dO,dP,dQ,dR){bq.New.call(this,dO,dP);this.docNode$1=dO;this.updates$1=dP;this.elt=dQ;this.rvUpdates=dR;},cU);cV=bK.FSharpMap=dH.Class({get_Item:function(dO){var dP;dP=this.TryFind(dO);return dP==null?T.FailWith("The given key was not present in the dictionary."):dP.$0;},TryFind:function(dO){var dP;dP=cB.TryFind(di.New(dO,void 0),this.tree);return dP==null?null:{$:1,$0:dP.$0.Value};},Equals:function(dO){return this.get_Count()===dO.get_Count()&&$.forall2(U.Equals,this,dO);},GetEnumerator$1:function(){return ci.Get($.map(function(dO){return{K:dO.Key,V:dO.Value};},cB.Enumerate(false,this.tree)));},get_Count:function(){var dO;dO=this.tree;return dO==null?0:dO.Count;},GetHashCode:function(){return U.Hash(_8.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();},CompareTo0:function(dO){return $.compareWith(U.Compare,this,dO);}},m,cV);cV.New=dH.Ctor(function(dO){cV.New$1.call(this,dh.fromSeq(dO));},cV);cV.New$1=dH.Ctor(function(dO){m.New.call(this);this.tree=dO;},cV);cW.RAct={$:3};cW.RVar={$:1};cW.RViw={$:2};cW.RPlg={$:4};cW.RDoc={$:0};cX.New=function(dO,dP,dQ,dR,dS){return{Node:dO,Left:dP,Right:dQ,Height:dR,Count:dS};};cY=Q.CheckedInput=dH.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cY);cZ.New=function(dO,dP){return{c:dO,r:dP};};c0=cc.Scheduler=dH.Class({Fork:function(dO){var dP;dP=this;this.robin.push(dO);this.idle?(this.idle=false,a.setTimeout(function(){dP.tick();},0)):void 0;},tick:function(){var dO,dP,dQ;dP=this;dQ=dJ.now();dO=true;while(dO)if(this.robin.length===0){this.idle=true;dO=false;}else{(this.robin.shift())();dJ.now()-dQ>40?(a.setTimeout(function(){dP.tick();},0),dO=false):void 0;}}},m,c0);c0.New=dH.Ctor(function(){m.New.call(this);this.idle=true;this.robin=[];},c0);c1.$cctor=function(){c1.$cctor=a.ignore;c1.noneCT=cZ.New(false,[]);c1.scheduler=new c0.New();c1.defCTS=[new db.New()];c1.Zero=cc.Return();c1.GetCT=function(dO){dO.k({$:0,$0:dO.ct});};};c2.$cctor=function(){c2.$cctor=a.ignore;c2.counter=0;};c3=cO.WcSplitterT=dH.Class({connectedCallback:function(){var dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;function d4(ea){var eb,ec,ed,ee;eb=dV?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];ec=a.parseFloat("0"+dL(ea.parentElement.parentElement).css(eb[0]));ed=a.parseFloat("0"+dL(ea.parentElement.parentElement).css(eb[1]));dY.Set(a.parseFloat("0"+dL(ea.parentElement.parentElement).css(eb[2])));dX[0]=ec+ed;ee=dO.getBoundingClientRect();return dV?dU?[ee.width,ee.height]:[-ee.width,ee.height]:dU?[ee.height,ee.width]:[-ee.height,ee.width];}function d5(ea){return dV?ea.clientX:ea.clientY;}function d6(ea){var eb,ec;eb=(d5(ea)-d1[0])*100/dW[0][0]+d0[0];dT.Set((ec=U.Compare(dR,eb)===1?dR:eb,U.Compare(dS,ec)===-1?dS:ec));}function d7(){if(dZ[0]){dZ[0]=false;self.removeEventListener("mousemove",d6,false);self.removeEventListener("mouseup",d7,false);}}function d8(ea){var eb,ec;if(!dZ[0]){dZ[0]=true;d0[0]=dT.Get();d1[0]=d5(ea);dW[0]=(eb=(ec=d2[0],ec==null?null:{$:1,$0:d4(ec.$0)}),eb==null?[100,500]:eb.$0);self.addEventListener("mousemove",d6,false);self.addEventListener("mouseup",d7,false);ea.preventDefault();}}function d9(ea,eb,ec,ed){return[(ea-eb-ec)*ed/100,(ea-eb-ec)*(100-ed)/100];}function d_(ea,eb){return(((((dH.Curried(function(ec,ed,ee,ef,eg){return ec(" "+ed.toFixed(2)+"px "+ee.toFixed(2)+"px ; "+be.toSafe(ef)+" : "+eg.toFixed(2)+"px; ");},5))(a.id))(ea))(eb))(dV?"height":"width"))(dW[0][1]);}function d$(){var ea;ea=d2[0];ea==null?void 0:dW[0]=d4(ea.$0);dT.Set(dT.Get());}if(!this.added){dO=this;dP=dO.attachShadow({mode:"open"});dQ=self.document.createElement("div");dR=dO.hasAttribute("min")?a.parseFloat(dO.getAttribute("min")):4;dS=dO.hasAttribute("max")?a.parseFloat(dO.getAttribute("max")):96;dT=_2.Create$1(dO.hasAttribute("value")?a.parseFloat(dO.getAttribute("value")):50);dU=!dO.hasAttribute("second");dV=dO.hasAttribute("vertical");dW=[[0,0]];dX=[0];dY=_2.Create$1(0);dZ=[false];d0=[0];d1=[0];d2=[null];d3=(((((dV?cO.layoutVertical():cO.layoutHorizontal())(S.Map(function(ea){var eb;eb=d9(dW[0][0],dY.Get(),dX[0],ea);return d_.apply(null,eb);},dT.get_View())))(function(){X.addResizeObserver(d$,dO);d$();}))(function(ea){d2[0]={$:1,$0:ea};d$();}))(function(ea){d8(ea);}))(S.Map(function(ea){return function(eb){return ea(be.prettyPrint(eb)+"px");};}(a.id),dY.get_View()));cD.LoadLocalTemplates("");bq.Run(dQ,d3);dP.appendChild(dQ.firstChild);this.added=true;}}},m,c3);c3.Constructor=function(){var dO,dP;dO=(dP=dN.construct(self.HTMLElement,[],this.__proto__.constructor),dP);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dO);return dO;};c3.New=dH.Ctor(function(){m.New.call(this);this.added=false;(function(dO){return dO("WcSplitterT initializer");}(function(dO){dI.log(dO);}));},c3);c5.New=function(dO,dP,dQ,dR){var dS;dS={DynElem:dO,DynFlags:dP,DynNodes:dQ};dH.SetOptional(dS,"OnAfterRender",dR);return dS;};c6=Q.Updates=dH.Class({},null,c6);c6.Create=function(dO){var dP;dP=null;dP=c6.New(dO,null,function(){var dQ;dQ=dP.s;return dQ===null?(dQ=b2.Copy(dP.c()),dP.s=dQ,b2.WhenObsoleteRun(dQ,function(){dP.s=null;}),dQ):dQ;});return dP;};c6.New=function(dO,dP,dQ){return new c6({c:dO,s:dP,v:dQ});};c7.$cctor=function(){c7.$cctor=a.ignore;c7.Doc=self.document;};c8.extractNodes=function(dO){var dP,dQ;function dR(dS,dT,dU,dV){var dW,dX,dY,dZ,d0,d1;dW=c8.extractNodes(dU);dX=c8.extractNodes(dV);return(dW.$==0?(dZ=dW.$0,!U.Equals(dZ,null)&&dZ.length===0)?(dY=dX,true):dX.$==0?(d0=dX.$0,!U.Equals(d0,null)&&d0.length===0)?(dY=dW,true):(dY=[dW,dX],false):(dY=[dW,dX],false):dX.$==0?(d1=dX.$0,!U.Equals(d1,null)&&d1.length===0)?(dY=dW,true):(dY=[dW,dX],false):(dY=[dW,dX],false))?dY:{$:1,$0:{$:0,$0:dS,$1:dT,$2:dY[0],$3:dY[1]}};}dP=c8.horizontalSplit(dO);return dP!=null&&dP.$==1?dR(false,dP.$0[2],dP.$0[0],dP.$0[1]):(dQ=c8.verticalSplit(dO),dQ!=null&&dQ.$==1?dR(true,dQ.$0[2],dQ.$0[0],dQ.$0[1]):{$:0,$0:c8.cleanSpaces(dO)});};c8.createLayoutDefinitions=function(dO,dP){var dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ;return dP.$==1?(dQ=dP.$0.$0,(dR=dP.$0.$1,(dS=c8.createLayoutDefinitions(dO+"_1",dP.$0.$2),(dT=dS[0],(dU=dS[1],(dV=c8.createLayoutDefinitions(dO+"_2",dP.$0.$3),(dW=dV[0],(dX=dV[1],[dO,_8.ofSeq($.delay(function(){return $.append([b8.concat(" ",bu.ofArray([dO,dQ?"vertical":"horizontal",a.String(dR),dT,dW]))],$.delay(function(){return $.append(dU,$.delay(function(){return dX;}));}));}))])))))))):(dY=dP.$0,!U.Equals(dY,null)&&dY.length===0)?["___",[]]:(dZ=dP.$0,!U.Equals(dZ,null)&&dZ.length===1)?[_8.get(dP.$0,0),[]]:[dO,[dO+" div \"\" "+b8.concat(" ",dP.$0)]];};c8.horizontalSplit=function(dO){var dP,dQ,dR,dS,dT;function dU(dV,dW){var dX,dY,dZ,d0;dX=c.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",dW);return dX!=null&&dX.$==1?{$:1,$0:[[dV,(dY=(dZ=$.tryItem(1,dX.$0),dZ==null?null:c8.extractMeasuresO(b8.Replace(b8.Replace(dZ.$0,"^",""),"v","-"))),(d0=new dg({$:1,$0:5,$1:50,$2:95}),dY==null?d0:dY.$0))],dW.indexOf("-")]}:null;}dP=(dQ=$.tryHead($.sortBy(function(dV){return dV[1];},$.choose(function(dV){return dU(dV[0],dV[1]);},$.indexed(dO)))),dQ==null?null:{$:1,$0:dQ.$0[0]});return dP==null?null:{$:1,$0:(dR=dP.$0,(dS=dR[0],(dT=dR[1],[bH.array(dO,null,{$:1,$0:dS-1}),bH.array(dO,{$:1,$0:dS+1},null),dT])))};};c8.verticalSplit=function(dO){var dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY;function dZ(d2,d3){var d4,d5,d6;return(d5=c.REGEX$1("^ *\\|+ *$","",d3),d5!=null&&d5.$==1&&(d6=d5.$0,!U.Equals(d6,null)&&d6.length===1))?{$:1,$0:[d2,d3.indexOf("|")]}:null;}function d0(d2){return U.Equals(null,d2);}function d1(d2){return U.Equals(null,d2);}dP=c8.transpose(dO);dQ=(dR=(dS=$.tryHead($.sortBy(function(d2){return d2[1];},$.choose(function(d2){return dZ(d2[0],d2[1]);},$.indexed(dP)))),dS==null?null:{$:1,$0:dS.$0[0]}),dR==null?null:{$:1,$0:(dT=dR.$0,[c8.transpose(bH.array(dP,null,{$:1,$0:dT-1})),c8.transpose(bH.array(dP,{$:1,$0:dT+1},null))])});return dQ==null?null:{$:1,$0:(dU=dQ.$0,(dV=dU[0],(dW=dU[1],[_8.filter(function(d2){return d0(c8.extractMeasuresO(d2));},dV),_8.filter(function(d2){return d1(c8.extractMeasuresO(d2));},dW),(dX=$.tryHead($.delay(function(){return $.append($.choose(c8.extractMeasuresO,dV),$.delay(function(){return $.map(function(d2){return d2.$==0?d2.$1?new dg({$:0,$0:d2.$0,$1:false}):d2:d2;},$.choose(c8.extractMeasuresO,dW));}));})),(dY=new dg({$:1,$0:5,$1:50,$2:95}),dX==null?dY:dX.$0))])))};};c8.cleanSpaces=function(dO){return _8.filter(function(dP){var dQ;return!(dQ=(bd.Int())(dP),dQ!=null&&dQ.$==1);},b8.SplitStrings(b8.concat(" ",dO),[" "],1));};c8.extractMeasuresO=function(dO){var dP,dQ,dR,dS,dT,dU,dV;dP=b8.SplitChars(dO,[" "],1);return!U.Equals(dP,null)&&dP.length===1&&(dR=(bd.Int())(_8.get(dP,0)),dR!=null&&dR.$==1&&(dQ=dR.$0,true))?{$:1,$0:new dg({$:0,$0:dK.abs(dQ),$1:dQ>=0})}:!U.Equals(dP,null)&&dP.length===3&&(dT=(bd.Int())(_8.get(dP,0)),dT!=null&&dT.$==1&&(dU=(bd.Int())(_8.get(dP,1)),dU!=null&&dU.$==1&&(dV=(bd.Int())(_8.get(dP,2)),dV!=null&&dV.$==1&&(dS=[dV.$0,dT.$0,dU.$0],true))))?{$:1,$0:new dg({$:1,$0:dS[1],$1:dS[2],$2:dS[0]})}:null;};c8.transpose=function(dO){var dP;dP=$.max($.map(function(dQ){return dQ.length;},dO));return _8.ofSeq($.delay(function(){return $.map(function(dQ){return _8.ofSeq($.delay(function(){return $.map(function(dR){return dR.length>dQ?dR[dQ]:" ";},dO);})).join("");},T.range(0,dP-1));}));};c9.$cctor=function(){c9.$cctor=a.ignore;c9.LoadedTemplates=new bL.New$5();c9.LocalTemplatesLoaded=false;c9.TextHoleRE="\\${([^}]+)}";};c_.$cctor=function(){c_.$cctor=a.ignore;c_.EmptyAttr=null;};da=l.OperationCanceledException=dH.Class({},c$,da);da.New=dH.Ctor(function(dO){da.New$1.call(this,"The operation was canceled.",null,dO);},da);da.New$1=dH.Ctor(function(dO,dP,dQ){this.message=dO;this.inner=dP;cg.setPrototypeOf(this,da.prototype);this.ct=dQ;},da);db=l.CancellationTokenSource=dH.Class({Cancel$1:function(){var dO;if(!this.c){this.c=true;dO=_8.choose(function(dP){try{dP();return null;}catch(dQ){return{$:1,$0:dQ};}},this.r);if(_8.length(dO)>0)throw new dr.New$3(dO);else void 0;}}},m,db);db.New=dH.Ctor(function(){m.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},db);dd=dc.Hoverable=dH.Class({Content:function(dO){return dO.on("mouseenter",function(){return cs.AddClass(dO.elt,"hovering");}).on("mouseleave",function(){return cs.RemoveClass(dO.elt,"hovering");});}},null,dd);dd.New$1=function(){return dd.New(_2.Create$1(false));};dd.New=function(dO){return new dd({hover:dO});};X.addResizeObserver=function(dO,dP){var dQ,dR,dS,dT;try{dQ=!(!a.ResizeObserver);}catch(dU){dQ=false;}if(dQ){dR=new a.ResizeObserver(dO);X.set_observers(new bv({$:1,$0:dR,$1:X.observers()}));dR.observe(dP);}else{dS=X.dimsChanged(dP);cc.Start((dT=null,cc.Delay(function(){return cc.While(function(){return dP.isConnected;},cc.Delay(function(){return cc.Bind(cc.Sleep(110),function(){return dS()?(dO(),cc.Zero()):cc.Zero();});}));})),null);}};X.set_observers=function(dO){cl.$cctor();cl.observers=dO;};X.observers=function(){cl.$cctor();return cl.observers;};X.dimsChanged=function(dO){var dP;dP=[dO.getBoundingClientRect()];return function(){var dQ;dQ=dO.getBoundingClientRect();return U.Equals(X.domRect2Tuple(dP[0]),X.domRect2Tuple(dQ))?false:(dP[0]=dQ,true);};};X.domRect2Tuple=function(dO){return[dO.top,dO.left,dO.width,dO.height];};c.REGEX$1=function(dO,dP,dQ){var dR;return dQ===null?null:(dR=(new a.String(dQ)).match(new a.RegExp(dO,dP)),U.Equals(dR,null)?null:!U.Equals(dR,null)&&dR.length===0?null:{$:1,$0:dR});};dg=bk.Measures=dH.Class({toString:function(){return this.$==1?((((dH.Curried(function(dO,dP,dQ,dR){return dO(a.String(dP)+"-"+a.String(dQ)+"-"+a.String(dR));},4))(a.id))(T.toInt(this.$0)))(T.toInt(this.$1)))(T.toInt(this.$2)):a.String(T.toInt(this.$1?this.$0:-this.$0));}},null,dg);dh.fromSeq=function(dO){var dP;dP=_8.ofSeq($.delay(function(){return $.collect(function(dQ){return[di.New(dQ[0],dQ[1])];},$.distinctBy(function(dQ){return dQ[0];},dO));}));_8.sortInPlace(dP);return cB.Build(dP,0,dP.length-1);};di=bK.Pair=dH.Class({Equals:function(dO){return U.Equals(this.Key,dO.Key);},GetHashCode:function(){return U.Hash(this.Key);},CompareTo0:function(dO){return U.Compare(this.Key,dO.Key);}},null,di);di.New=function(dO,dP){return new di({Key:dO,Value:dP});};dj.concat=function(dO){var dP,dQ;dP=[];for(var dR in dO)dP.push.apply(dP,dO[dR]);return dP;};dk=l.FormatException=dH.Class({},c$,dk);dk.New$1=dH.Ctor(function(dO){this.message=dO;cg.setPrototypeOf(this,dk.prototype);},dk);dl.convertTextNode=function(dO){var dP,dQ,dR,dS,dT,dU;dP=null;dQ=0;dS=dO.textContent;dT=new a.RegExp(cD.TextHoleRE(),"g");while(dP=dT.exec(dS),dP!==null){dO.parentNode.insertBefore(self.document.createTextNode(bH.string(dS,{$:1,$0:dQ},{$:1,$0:dT.lastIndex-_8.get(dP,0).length-1})),dO);dQ=dT.lastIndex;dU=self.document.createElement("span");dU.setAttribute("ws-replace",_8.get(dP,1).toLowerCase());dO.parentNode.insertBefore(dU,dO);}dT.lastIndex=0;dO.textContent=bH.string(dS,{$:1,$0:dQ},null);};dl.failNotLoaded=function(dO){dI.warn("Instantiating non-loaded template",dO);};dl.fillTextHole=function(dO,dP,dQ){var dR;dR=dO.querySelector("[ws-replace]");return U.Equals(dR,null)?(dI.warn("Filling non-existent text hole",dQ),null):(dR.parentNode.replaceChild(new a.Text(dP),dR),{$:1,$0:dR.getAttribute("ws-replace")});};dl.removeHolesExcept=function(dO,dP){function dQ(dR){cs.IterSelector(dO,"["+dR+"]",function(dS){if(!dP.Contains(dS.getAttribute(dR)))dS.removeAttribute(dR);});}dQ("ws-attr");dQ("ws-onafterrender");dQ("ws-var");cs.IterSelector(dO,"[ws-hole]",function(dR){if(!dP.Contains(dR.getAttribute("ws-hole"))){dR.removeAttribute("ws-hole");while(dR.hasChildNodes())dR.removeChild(dR.lastChild);}});cs.IterSelector(dO,"[ws-replace]",function(dR){if(!dP.Contains(dR.getAttribute("ws-replace")))dR.parentNode.removeChild(dR);});cs.IterSelector(dO,"[ws-on]",function(dR){dR.setAttribute("ws-on",b8.concat(" ",_8.filter(function(dS){return dP.Contains(_8.get(b8.SplitChars(dS,[":"],1),1));},b8.SplitChars(dR.getAttribute("ws-on"),[" "],1))));});cs.IterSelector(dO,"[ws-attr-holes]",function(dR){var dS,dT,dU,dV,dW;dS=b8.SplitChars(dR.getAttribute("ws-attr-holes"),[" "],1);for(dT=0,dU=dS.length-1;dT<=dU;dT++){dV=_8.get(dS,dT);dR.setAttribute(dV,(dW=new a.RegExp(cD.TextHoleRE(),"g"),dR.getAttribute(dV).replace(dW,function(dX,dY){return dP.Contains(dY)?dX:"";})));}});};dl.fillInstanceAttrs=function(dO,dP){var dQ,dR,dS,dT,dU;dl.convertAttrs(dP);dQ=dP.nodeName.toLowerCase();dR=dO.querySelector("[ws-attr="+dQ+"]");if(U.Equals(dR,null))dI.warn("Filling non-existent attr hole",dQ);else{dR.removeAttribute("ws-attr");for(dS=0,dT=dP.attributes.length-1;dS<=dT;dS++){dU=dP.attributes.item(dS);dU.name==="class"&&dR.hasAttribute("class")?dR.setAttribute("class",dR.getAttribute("class")+" "+dU.nodeValue):dR.setAttribute(dU.name,dU.nodeValue);}}};dl.mapHoles=function(dO,dP){function dQ(dR){cs.IterSelector(dO,"["+dR+"]",function(dS){var dT,dU;dT=(dU=null,[dP.TryGetValue(dS.getAttribute(dR).toLowerCase(),{get:function(){return dU;},set:function(dV){dU=dV;}}),dU]);dT[0]?dS.setAttribute(dR,dT[1]):void 0;});}dQ("ws-hole");dQ("ws-replace");dQ("ws-attr");dQ("ws-onafterrender");dQ("ws-var");cs.IterSelector(dO,"[ws-on]",function(dR){dR.setAttribute("ws-on",b8.concat(" ",_8.map(function(dS){var dT,dU,dV;dT=b8.SplitChars(dS,[":"],1);dU=(dV=null,[dP.TryGetValue(_8.get(dT,1),{get:function(){return dV;},set:function(dW){dV=dW;}}),dV]);return dU[0]?_8.get(dT,0)+":"+dU[1]:dS;},b8.SplitChars(dR.getAttribute("ws-on"),[" "],1))));});cs.IterSelector(dO,"[ws-attr-holes]",function(dR){var dS,dT,dU;dS=b8.SplitChars(dR.getAttribute("ws-attr-holes"),[" "],1);for(dT=0,dU=dS.length-1;dT<=dU;dT++)(function(){var dV;function dW(dX,dY){var dZ;dZ=T.KeyValue(dY);return dX.replace(new a.RegExp("\\${"+dZ[0]+"}","ig"),"${"+dZ[1]+"}");}dV=_8.get(dS,dT);return dR.setAttribute(dV,(((dH.Curried3($.fold))(dW))(dR.getAttribute(dV)))(dP));}());});};dl.fill=function(dO,dP,dQ){while(true)if(dO.hasChildNodes())dQ=dP.insertBefore(dO.lastChild,dQ);else return null;};dl.convertAttrs=function(dO){var dQ,dR,dS,dT,dU,dV,dW,dX;function dP(dY){var dZ;dZ=dO.getAttribute(dY);dZ===null?void 0:dO.setAttribute(dY,dZ.toLowerCase());}dQ=dO.attributes;dR=[];dS=[];dT=[];for(dU=0,dV=dQ.length-1;dU<=dV;dU++){dW=dQ.item(dU);b8.StartsWith(dW.nodeName,"ws-on")&&dW.nodeName!=="ws-onafterrender"&&dW.nodeName!=="ws-on"?(dR.push(dW.nodeName),dS.push(bH.string(dW.nodeName,{$:1,$0:"ws-on".length},null)+":"+dW.nodeValue.toLowerCase())):!b8.StartsWith(dW.nodeName,"ws-")&&(new a.RegExp(cD.TextHoleRE())).test(dW.nodeValue)?(dW.nodeValue=(dX=new a.RegExp(cD.TextHoleRE(),"g"),dW.nodeValue.replace(dX,function(dY,dZ){return"${"+dZ.toLowerCase()+"}";})),dT.push(dW.nodeName)):void 0;}!(dS.length==0)?dO.setAttribute("ws-on",b8.concat(" ",dS)):void 0;!(dT.length==0)?dO.setAttribute("ws-attr-holes",b8.concat(" ",dT)):void 0;dP("ws-hole");dP("ws-replace");dP("ws-attr");dP("ws-onafterrender");dP("ws-var");_8.iter(function(dY){dO.removeAttribute(dY);},dR);};dm=bK.KeyCollection=dH.Class({GetEnumerator$1:function(){return ci.Get($.map(function(dO){return dO.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},m,dm);dm.New=dH.Ctor(function(dO){m.New.call(this);this.d=dO;},dm);dn.get_UseAnimations=function(){return dw.UseAnimations();};dn.Play=function(dO){var dP;dP=null;return cc.Delay(function(){return cc.Bind(dn.Run(a.ignore,dw.Actions(dO)),function(){dw.Finalize(dO);return cc.Return(null);});});};dn.Append=function(dO,dP){return{$:0,$0:dA.Append(dO.$0,dP.$0)};};dn.Run=function(dO,dP){var dQ;function dR(dS){function dT(dU,dV){var dW;dW=dV-dU;dP.Compute(dW);dO();return dW<=dQ?void a.requestAnimationFrame(function(dX){dT(dU,dX);}):dS();}a.requestAnimationFrame(function(dU){dT(dU,dU);});}dQ=dP.Duration;return dQ===0?cc.Zero():cc.FromContinuations(function(dS,dT,dU){return dR.apply(null,[dS,dT,dU]);});};dn.Concat=function(dO){return{$:0,$0:dA.Concat($.map(dw.List,dO))};};dn.get_Empty=function(){return{$:0,$0:dA.Empty()};};_do.BatchUpdatesEnabled=function(){dx.$cctor();return dx.BatchUpdatesEnabled;};dp.StartProcessor=function(dO){var dP;function dQ(){var dR;dR=null;return cc.Delay(function(){return cc.Bind(dO,function(){var dS;dS=dP[0];return dS===1?(dP[0]=0,cc.Zero()):dS===2?(dP[0]=1,dQ()):cc.Zero();});});}dP=[0];return function(){var dR;dR=dP[0];dR===0?(dP[0]=1,cc.Start(dQ(),null)):dR===1?dP[0]=2:void 0;};};dq.Clear=function(dO){dO.splice(0,_8.length(dO));};dr=l.AggregateException=dH.Class({},c$,dr);dr.New$3=dH.Ctor(function(dO){dr.New$4.call(this,"One or more errors occurred.",dO);},dr);dr.New$4=dH.Ctor(function(dO,dP){this.message=dO;cg.setPrototypeOf(this,dr.prototype);this.innerExceptions=dP;},dr);$.enumUsing=function(dO,dP){return{GetEnumerator:function(){var dQ;try{dQ=ci.Get(dP(dO));}catch(dR){dO.Dispose();throw dR;}return new cj.New(null,null,function(dS){return dQ.MoveNext()&&(dS.c=dQ.Current(),true);},function(){dQ.Dispose();dO.Dispose();});}};};$.enumWhile=function(dO,dP){return{GetEnumerator:function(){return new cj.New(null,null,function(dQ){var dR;while(true){dR=dQ.s;if(U.Equals(dR,null)){if(dO()){dQ.s=ci.Get(dP);dQ=dQ;}else return false;}else if(dR.MoveNext()){dQ.c=dR.Current();return true;}else{dR.Dispose();dQ.s=null;dQ=dQ;}}},function(dQ){var dR;dR=dQ.s;!U.Equals(dR,null)?dR.Dispose():void 0;});}};};ds=l.MatchFailureException=dH.Class({},c$,ds);ds.New=dH.Ctor(function(dO,dP,dQ){this.message=dO+" at "+a.String(dP)+":"+a.String(dQ);cg.setPrototypeOf(this,ds.prototype);},ds);du.New=function(dO,dP){return{PreviousNodes:dO,Top:dP};};dv.get_Empty=function(){return{$:0,$0:new cy.New$3()};};dv.FindAll=function(dO){var dP;function dQ(dS){if(dS!=null&&dS.$==0){dQ(dS.$0);dQ(dS.$1);}else if(dS!=null&&dS.$==1)dR(dS.$0);else if(dS!=null&&dS.$==2)dQ(dS.$0.Current);else if(dS!=null&&dS.$==6)_8.iter(dR,dS.$0.Holes);}function dR(dS){dP.push(dS);dQ(dS.Children);}dP=[];dQ(dO);return{$:0,$0:new cy.New$2(dP)};};dv.Filter=function(dO,dP){return{$:0,$0:dD.Filter(dO,dP.$0)};};dv.Except=function(dO,dP){return{$:0,$0:dD.Except(dO.$0,dP.$0)};};dv.ToArray=function(dO){return dD.ToArray(dO.$0);};dv.Intersect=function(dO,dP){return{$:0,$0:dD.Intersect(dO.$0,dP.$0)};};dw.UseAnimations=function(){dz.$cctor();return dz.UseAnimations;};dw.Actions=function(dO){return dw.ConcatActions(_8.choose(function(dP){return dP.$==1?{$:1,$0:dP.$0}:null;},dA.ToArray(dO.$0)));};dw.Finalize=function(dO){_8.iter(function(dP){if(dP.$==0)dP.$0();},dA.ToArray(dO.$0));};dw.ConcatActions=function(dO){var dP,dQ,dR,dS;dP=cp.ofSeqNonCopying(dO);dQ=_8.length(dP);return dQ===0?dw.Const():dQ===1?_8.get(dP,0):(dR=$.max($.map(function(dT){return dT.Duration;},dP)),(dS=_8.map(function(dT){return dw.Prolong(dR,dT);},dP),dw.Def(dR,function(dT){_8.iter(function(dU){dU.Compute(dT);},dS);})));};dw.List=function(dO){return dO.$0;};dw.Const=function(dO){return dw.Def(0,function(){return dO;});};dw.Def=function(dO,dP){return{Compute:dP,Duration:dO};};dw.Prolong=function(dO,dP){var dQ,dR,dS;dQ=dP.Compute;dR=dP.Duration;dS=bj.Create(function(){return dP.Compute(dP.Duration);});return{Compute:function(dT){return dT>=dR?dS.f():dQ(dT);},Duration:dO};};dx.$cctor=function(){dx.$cctor=a.ignore;dx.BatchUpdatesEnabled=true;};dy.isBlank=function(dO){return b8.forall(dB.IsWhiteSpace,dO);};dz.$cctor=function(){dz.$cctor=a.ignore;dz.CubicInOut=dC.Custom(function(dO){var dP;dP=dO*dO;return 3*dP-2*(dP*dO);});dz.UseAnimations=true;};dA.Append=function(dO,dP){return dO.$==0?dP:dP.$==0?dO:{$:2,$0:dO,$1:dP};};dA.ToArray=function(dO){var dP;function dQ(dR){if(dR.$==1)dP.push(dR.$0);else if(dR.$==2){dQ(dR.$0);dQ(dR.$1);}else if(dR.$==3)_8.iter(function(dS){dP.push(dS);},dR.$0);}dP=[];dQ(dO);return dP.slice(0);};dA.Concat=function(dO){var dP;dP=cp.ofSeqNonCopying(dO);return cp.TreeReduce(dA.Empty(),dA.Append,dP);};dA.Empty=function(){dF.$cctor();return dF.Empty;};dB.IsWhiteSpace=function(dO){return dO.match(new a.RegExp("\\s"))!==null;};dC=Q.Easing=dH.Class({},m,dC);dC.Custom=function(dO){return new dC.New(dO);};dC.New=dH.Ctor(function(dO){m.New.call(this);this.transformTime=dO;},dC);dD.Filter=function(dO,dP){return new cy.New$2(_8.filter(dO,dD.ToArray(dP)));};dD.Except=function(dO,dP){var dQ;dQ=new cy.New$2(dD.ToArray(dP));dQ.ExceptWith(dD.ToArray(dO));return dQ;};dD.ToArray=function(dO){var dP;dP=_8.create(dO.get_Count(),void 0);dO.CopyTo(dP);return dP;};dD.Intersect=function(dO,dP){var dQ;dQ=new cy.New$2(dD.ToArray(dO));dQ.IntersectWith(dD.ToArray(dP));return dQ;};dE.Children=function(dO,dP){var dQ,dR,dS;if(dP!=null&&dP.$==1){dS=[];dQ=dP.$0[0].nextSibling;while(dQ!==dP.$0[1]){dS.push(dQ);dQ=dQ.nextSibling;}return{$:0,$0:dS};}else return{$:0,$0:_8.init(dO.childNodes.length,(dR=dO.childNodes,function(dT){return dR[dT];}))};};dE.Except=function(dO,dP){var dQ;dQ=dO.$0;return{$:0,$0:_8.filter(function(dR){return _8.forall(function(dS){return!(dR===dS);},dQ);},dP.$0)};};dE.Iter=function(dO,dP){_8.iter(dO,dP.$0);};dE.DocChildren=function(dO){var dP;function dQ(dR){if(dR!=null&&dR.$==2)dQ(dR.$0.Current);else if(dR!=null&&dR.$==1)dP.push(dR.$0.El);else if(dR==null);else if(dR!=null&&dR.$==5)dP.push(dR.$0);else if(dR!=null&&dR.$==4)dP.push(dR.$0.Text);else if(dR!=null&&dR.$==6)_8.iter(function(dS){if(dS==null||dS.constructor===cg)dQ(dS);else dP.push(dS);},dR.$0.Els);else{dQ(dR.$0);dQ(dR.$1);}}dP=[];dQ(dO.Children);return{$:0,$0:cp.ofSeqNonCopying(dP)};};dF.$cctor=function(){dF.$cctor=a.ignore;dF.Empty={$:0};};dH.OnLoad(function(){M.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

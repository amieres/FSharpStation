function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.String=c.String||{};e=c.ParseO=c.ParseO||{};f=b.WasmLoader=b.WasmLoader||{};g=f.WasmStatus=f.WasmStatus||{};h=f.Remoting=f.Remoting||{};i=h.IMessagingO=h.IMessagingO||{};j=h.ReturnQueue=h.ReturnQueue||{};k=a.WebSharper=a.WebSharper||{};l=k.Obj=k.Obj||{};m=h.CustomXhrProvider=h.CustomXhrProvider||{};n=f.WWorker=f.WWorker||{};o=f.WasmLoad=f.WasmLoad||{};p=o.Require=o.Require||{};q=o.GlobalModule=o.GlobalModule||{};r=f.UI=f.UI||{};s=b.WSFrameworkTest=b.WSFrameworkTest||{};t=b.AssemblyData=b.AssemblyData||{};u=t.ModuleName=t.ModuleName||{};v=t.TypeName=t.TypeName||{};w=t.MethodName=t.MethodName||{};x=t.AssemblyName=t.AssemblyName||{};y=t.AssemblyRef=t.AssemblyRef||{};z=t.JSCode=t.JSCode||{};A=t.TypeRef=t.TypeRef||{};B=t.MethodDef=t.MethodDef||{};C=t.ModuleDef=t.ModuleDef||{};D=t.AssemblyDef=t.AssemblyDef||{};E=t.LoadAsm=t.LoadAsm||{};F=b.WSFramework=b.WSFramework||{};G=k.Operators=k.Operators||{};H=k.Utils=k.Utils||{};I=k.Arrays=k.Arrays||{};J=k.Slice=k.Slice||{};K=k.Seq=k.Seq||{};L=k.Strings=k.Strings||{};M=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};N=k.Char=k.Char||{};O=k.JavaScript=k.JavaScript||{};P=O.Pervasives=O.Pervasives||{};Q=k.Unchecked=k.Unchecked||{};R=k.Collections=k.Collections||{};S=R.Dictionary=R.Dictionary||{};T=k.Remoting=k.Remoting||{};U=a.Event;V=k.UI=k.UI||{};W=V.Var=V.Var||{};X=a.EventTarget;Y=O.JS=O.JS||{};Z=k.List=k.List||{};_0=b.LibraryJS=b.LibraryJS||{};_1=_0.Pojo=_0.Pojo||{};_2=a.XMLHttpRequestEventTarget;_3=a.ArrayBufferView;_4=b.WsTranslator=b.WsTranslator||{};_5=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};_6=a.GeneratedPrintf=a.GeneratedPrintf||{};_7=V.Doc=V.Doc||{};_8=T.AjaxRemotingProvider=T.AjaxRemotingProvider||{};_9=Z.T=Z.T||{};_=V.View=V.View||{};$=V.HtmlModule=V.HtmlModule||{};ba=$.attr=$.attr||{};bb=a.Node;bc=V.ListModel=V.ListModel||{};bd=a.FSharp=a.FSharp||{};be=bd.Data=bd.Data||{};bf=be.Runtime=be.Runtime||{};bg=bf.IO=bf.IO||{};bh=V.AttrModule=V.AttrModule||{};bi=V.ViewBuilder=V.ViewBuilder||{};bj=k.Enumerator=k.Enumerator||{};bk=bj.T=bj.T||{};bl=k.Numeric=k.Numeric||{};bm=a.System=a.System||{};bn=bm.Guid=bm.Guid||{};bo=V.Var$1=V.Var$1||{};bp=a.Object;bq=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};br=k.Concurrency=k.Concurrency||{};bs=a.StartupCode$WsTranslator$WsTranslator=a.StartupCode$WsTranslator$WsTranslator||{};bt=V.Array=V.Array||{};bu=V.Snap=V.Snap||{};bv=V.AttrProxy=V.AttrProxy||{};bw=V.Client=V.Client||{};bx=bw.Templates=bw.Templates||{};by=a.WindowOrWorkerGlobalScope;bz=k.Data=k.Data||{};bA=bz.TxtRuntime=bz.TxtRuntime||{};bB=bz.Pervasives=bz.Pervasives||{};bC=V.DomUtility=V.DomUtility||{};bD=k.DateUtil=k.DateUtil||{};bE=V.ConcreteVar=V.ConcreteVar||{};bF=R.DictionaryUtil=R.DictionaryUtil||{};bG=V.Storage=V.Storage||{};bH=T.XhrProvider=T.XhrProvider||{};bI=br.AsyncBody=br.AsyncBody||{};bJ=R.HashSet=R.HashSet||{};bK=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bL=br.CT=br.CT||{};bM=V.Attrs=V.Attrs||{};bN=V.Docs=V.Docs||{};bO=V.Elt=V.Elt||{};bP=V.Abbrev=V.Abbrev||{};bQ=bP.Fresh=bP.Fresh||{};bR=bG.ArrayStorage=bG.ArrayStorage||{};bS=V.DocElemNode=V.DocElemNode||{};bT=a.CharacterData;bU=br.Scheduler=br.Scheduler||{};bV=a.Error;bW=k.OperationCanceledException=k.OperationCanceledException||{};bX=k.CancellationTokenSource=k.CancellationTokenSource||{};bY=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bZ=V.An=V.An||{};b0=bw.Settings=bw.Settings||{};b1=bP.Mailbox=bP.Mailbox||{};b2=V.Updates=V.Updates||{};b3=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};b4=k.Json=k.Json||{};b5=bw.Attrs=bw.Attrs||{};b6=b5.Dyn=b5.Dyn||{};b7=bx.Prepare=bx.Prepare||{};b8=R.KeyCollection=R.KeyCollection||{};b9=bw.Docs=bw.Docs||{};b_=b9.RunState=b9.RunState||{};b$=b9.NodeSet=b9.NodeSet||{};ca=V.Anims=V.Anims||{};cb=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cc=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cd=k.FormatException=k.FormatException||{};ce=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};cf=k.Queue=k.Queue||{};cg=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};ch=V.AppendList=V.AppendList||{};ci=R.HashSetUtil=R.HashSetUtil||{};cj=V.Easing=V.Easing||{};ck=bP.HashSet=bP.HashSet||{};cl=V.DynamicAttrNode=V.DynamicAttrNode||{};cm=b9.DomNodes=b9.DomNodes||{};cn=k.Lazy=k.Lazy||{};co=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cp=k.LazyExtensionsProxy=k.LazyExtensionsProxy||{};cq=cp.LazyRecord=cp.LazyRecord||{};cr=a.console;cs=a.IntelliFactory;ct=cs&&cs.Runtime;cu=a.Date;cv=a.JSON;cw=a.jQuery;cx=a.Math;c.Error=function(cy){return{$:1,$0:cy};};c.print=function(cy){if(typeof cy=="string")((function(cz){return function(cA){return cz(H.toSafe(cA));};}(function(cz){cr.log(cz);}))(cy));else((function(cz){return function(cA){return cz(H.prettyPrint(cA));};}(function(cz){cr.log(cz);}))(cy));};c["String.Substring2"]=function(cy,cz,cA){var cB,cC;while(true){if(cA<=0)return"";else if(cz>=cy.length)return"";else if(cz<0){cB=cz;cz=0;cA=cA+cB;}else return L.Substring(cy,cz,(cC=cy.length-cz,Q.Compare(cA,cC)===-1?cA:cC));}};c["String.Left"]=function(cy,cz){return cz<0?c["String.Substring2"](cy,0,cy.length+cz):c["String.Substring2"](cy,0,cz);};c["String.Right"]=function(cy,cz){var cA,cB;return c["String.Substring2"](cy,(cA=0,(cB=cy.length-cz,Q.Compare(cA,cB)===1?cA:cB)),cy.length);};d.splitByChar=function(cy,cz){return L.SplitChars(cz,[cy],0);};d.splitInTwoO=function(cy,cz){var cA;cA=cz.indexOf(cy);return cA===-1?null:{$:1,$0:[c["String.Left"](cz,cA),cz.substring(cA+cy.length)]};};d.delimitedO=function(cy,cz,cA){var cB,cC,cD,cE,cF;cB=d.splitInTwoO(cy,cA);return cB==null?null:(cC=cB.$0,(cD=cC[0],(cE=d.splitInTwoO(cz,cC[1]),cE==null?null:{$:1,$0:(cF=cE.$0,[cD,cF[0],cF[1]])})));};d.contains=function(cy,cz){return cz.indexOf(cy)!=-1;};d.trim=function(cy){return L.Trim(cy);};d.left=function(cy,cz){return c["String.Left"](cz,cy);};d.right=function(cy,cz){return c["String.Right"](cz,cy);};d.append=function(cy,cz){return cy+cz;};d.skipFirstLine=function(cy){var cz;cz=cy.indexOf("\n");return cz<0?"":J.string(cy,{$:1,$0:cz+1},null);};d.unindent=function(cy){var cz,cA,cB,cC;cz=L.SplitChars(cy,["\n"],0);cA=(cB=K.tryFindIndex(function(cD){return" "!==cD;},(cC=K.tryFind(function(cD){return L.Trim(cD)!=="";},cz),cC==null?"":cC.$0)),cB==null?0:cB.$0);return K.filter(function(cD){return!L.StartsWith(cD,"# 1 ");},K.map(function(cD){return cD.length<=cA?"":cD.substring(cA);},cz));};d.indent=function(cy,cz){var cA,cB;cA=L.SplitChars(cz,["\n"],0);return K.map((cB=L.replicate(cy," "),function(cC){return cB+cC;}),cA);};d.unindentStr=function(){M.$cctor();return M.unindentStr;};d.indentStr=function(cy){function cz(cB){return d.indent(cy,cB);}function cA(cB){return L.concat("\n",cB);}return function(cB){return cA(cz(cB));};};d.skipLastLine=function(){M.$cctor();return M.skipLastLine;};d.StartsWith=function(cy,cz){return L.StartsWith(cz,cy)?{$:1,$0:J.string(cz,{$:1,$0:cy.length},null)}:null;};d.EndsWith=function(cy,cz){return L.EndsWith(cz,cy)?{$:1,$0:J.string(cz,{$:1,$0:0},{$:1,$0:cz.length-cy.length-1})}:null;};d.WhiteSpace=function(cy){function cz(cA){return!cA;}return K.exists(function(cA){return cz(N.IsWhiteSpace(cA));},cy)?null:{$:1,$0:null};};d.thousands=function(cy){var cz,cA,cB,cC;cz=(cA=cy<0?-cy:cy,a.String(cA));cB=cz.length%3;cC=cB===0?3:cB;return cy<0?"-"+L.concat(",",Z.ofSeq(K.delay(function(){return K.append([J.string(cz,{$:1,$0:0},{$:1,$0:cC-1})],K.delay(function(){return K.map(function(cD){return J.string(cz,{$:1,$0:cD*3+cC},{$:1,$0:cD*3+cC+2});},G.range(0,((cz.length-cC)/3>>0)-1));}));}))):L.concat(",",Z.ofSeq(K.delay(function(){return K.append([J.string(cz,{$:1,$0:0},{$:1,$0:cC-1})],K.delay(function(){return K.map(function(cD){return J.string(cz,{$:1,$0:cD*3+cC},{$:1,$0:cD*3+cC+2});},G.range(0,((cz.length-cC)/3>>0)-1));}));})));};e.tryParseWith=function(cy){function cz(cA,cB){return cA?{$:1,$0:cB}:null;}return function(cA){return cz.apply(null,cy(cA));};};e.parseDateO2=function(){M.$cctor();return M.parseDateO2;};e.parseDateO=function(){M.$cctor();return M.parseDateO;};e.parseIntO=function(){M.$cctor();return M.parseIntO;};e.parseInt64O=function(){M.$cctor();return M.parseInt64O;};e.parseSingleO=function(){M.$cctor();return M.parseSingleO;};e.parseDoubleO=function(){M.$cctor();return M.parseDoubleO;};e.parseGuidO=function(){M.$cctor();return M.parseGuidO;};e.Date=function(){M.$cctor();return M["|Date|_|"];};e.Int=function(){M.$cctor();return M["|Int|_|"];};e.Int64=function(){M.$cctor();return M["|Int64|_|"];};e.Single=function(){M.$cctor();return M["|Single|_|"];};e.Double=function(){M.$cctor();return M["|Double|_|"];};e.Guid=function(){M.$cctor();return M["|Guid|_|"];};f.wasmStatusV=function(){M.$cctor();return M.wasmStatusV;};f.printfn=function(cy){return cy(h.messaging().wprintfn);};g.WasmNotLoaded={$:0};g.WasmWorkerLoading={$:3};g.WasmLoading={$:1};g.WasmWorkerLoaded={$:4};g.WasmLoaded={$:2};h.getHeaderRpc=function(cy){return cy["x-websharper-rpc"];};h.originalProvider=function(){M.$cctor();return M.originalProvider;};h.returnValue0=function(cy,cz){var cA,cB,cC;cA=j.tryGet(cy);cA==null?void 0:(cB=cA.$0,cC=cB[0],cB[1],cC(cz));};h.returnExnExn=function(cy,cz){var cA,cB;cA=j.tryGet(cy);cA==null?void 0:(cB=cA.$0,cB[0],cB[1](cz));};h.returnExn0=function(cy,cz){h.returnExnExn(cy,new bV(cz));};h.set_messaging=function(cy){M.$cctor();M.messaging=cy;};h.messaging=function(){M.$cctor();return M.messaging;};h.callRunRpc=function(cy,cz){(h.messaging().runRpc(cy))(cz);};h.returnValue=function(cy,cz){h.messaging().returnValue([cy,cz]);};h.returnExn=function(cy,cz){h.messaging().returnExn([cy,cz]);};h.installProvider=function(){T.set_AjaxProvider(new m.New());};i.New=function(cy,cz,cA,cB){return{runRpc:cy,returnValue:cz,returnExn:cA,wprintfn:cB};};j.queues=function(){M.$cctor();return M.queues;};j.tryGetS=function(cy){return(e.tryParseWith(function(cz){var cA;cA=null;return[j.queues().TryGetValue(cz,{get:function(){return cA;},set:function(cB){cA=cB;}}),cA];}))(cy);};j.add=function(cy,cz){var cA,cB;cA=(cB=j.tryGetS(cy),cB==null?[cz]:(j.queues().Remove(cy),cB.$0.concat([cz])));j.queues().Add(cy,cA);};j.tryGet=function(cy){var cz,cA,cB,cC;cz=j.tryGetS(cy);return cz==null?null:(cA=cz.$0,(cB=K.tryHead(cA),cB!=null&&cB.$==1?(cC=J.array(cA,{$:1,$0:1},null),(j.queues().Remove(cy),j.queues().Add(cy,cC),{$:1,$0:cB.$0})):null));};l=k.Obj=ct.Class({Equals:function(cy){return this===cy;},GetHashCode:function(){return -1;}},null,l);l.New=ct.Ctor(function(){},l);m=h.CustomXhrProvider=ct.Class({Async:function(cy,cz,cA,cB,cC){var cD;br.Start((cD=null,br.Delay(function(){var cE;cE=h.getHeaderRpc(cz);j.add(cE,[cB,cC]);return br.TryWith(br.Delay(function(){h.callRunRpc(cE,cA);return br.Zero();}),function(cF){h.returnExnExn(cE,cF);return br.Zero();});})),null);}},l,m);m.New=ct.Ctor(function(){l.New.call(this);},m);n.set_workerO=function(cy){M.$cctor();M.workerO=cy;};n.workerO=function(){M.$cctor();return M.workerO;};n.receiveMessage=function(cy,cz){var cA;cA=cz.data;cA.$==1?(f.printfn(function(cB){return function(cC){return cB(H.toSafe(cC));};}))(cA.$0):cA.$==2?cy(cA.$0):h.callRunRpc(cA.$0,cA.$1);};n.fromWorker=function(cy){var cz,cA;cz=cy.data;cz.$==1?h.returnExn0(cz.$0,cz.$1):cz.$==2?(f.printfn(function(cB){return function(cC){return cB(H.toSafe(cC));};}))(cz.$0):cz.$==3?(cA=cz.$0,!Q.Equals(f.wasmStatusV().Get(),cA)?f.wasmStatusV().Set(cA):void 0):h.returnValue0(cz.$0,cz.$1);};n.terminate=function(){var cy;if(cy=n.workerO(),cy!=null&&cy.$==1){n.workerO().$0.terminate();n.set_workerO(null);f.printfn(function(cz){return cz("Worker terminated!");});f.wasmStatusV().Set(g.WasmNotLoaded);}else f.printfn(function(cz){return cz("Worker is not present");});};o.rootPath=function(){M.$cctor();return M.rootPath;};o.requireJsA=function(cy){return br.FromContinuations(function(cz){return a.requirejs(I.ofSeq(cy),cz);});};o.bindStaticMethod=function(cy,cz,cA){var cB;self[((((ct.Curried(function(cC,cD,cE,cF){return cC("WASM_"+H.toSafe(cD)+"_"+H.toSafe(cE)+"_"+H.toSafe(cF));},4))(a.id))(cy))(L.Replace(cz,".","_")))(cA)]=(cB=((((ct.Curried(function(cC,cD,cE,cF){return cC("["+H.toSafe(cD)+"]"+H.toSafe(cE)+":"+H.toSafe(cF));},4))(a.id))(cy))(cz))(cA),self.Module.mono_bind_static_method(cB));};o.bindWasm=function(){K.iter(function(cy){o.bindStaticMethod(cy[0],cy[1],cy[2]);},Z.ofArray([["WsTranslator","FsRoot.WsTranslator","runRpc"]]));};o.preloadFiles=function(cy){var cz,cA,cB,cC,cD,cE;self.Browser=_1.newPojo([["init",a.ignore],["asyncLoad",function(cF,cG,cH){var cI;cI=new self.XMLHttpRequest();cI.open("GET",cF,true);cI.responseType="arraybuffer";cI.onload=function(){return cI.status===200||cI.status===0&&!Q.Equals(cI.response,null)?cG(new a.Uint8Array(cI.response)):cH();};cI.onerror=function(){return cH();};return cI.send(null);}]]);self.Module.preloadPlugins=[];cz=K.cache(K.distinct(K.map(function(cF){return[L.concat("/",J.array(cF,null,{$:1,$0:I.length(cF)-2})),K.last(cF)];},K.map(function(cF){return I.map(L.Trim,cF);},K.map(function(cF){return L.SplitChars(L.Replace(cF,"\\","/"),["/"],0);},cy)))));K.iter(function(cF){try{self.FS.mkdir(cF);}catch(cG){null;}},K.distinct(K.map(function(cF){return cF[0];},cz)));cA=bj.Get(cz);try{while(cA.MoveNext()){cB=cA.Current();cC=cB[1];cD=cB[0];cE=L.Replace(o.rootPath()+cD+"/"+cC,"//","/");(f.printfn(function(cF){return function(cG){return cF("Preloading "+H.toSafe(cG));};}))(cE);self.FS.createPreloadedFile(cD,cC,cE,1,a.$op21);}}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};o.filesToPreload=function(cy){return Z.ofSeq(K.delay(function(){return K.append(_4.dlls(),K.delay(function(){return I.choose(function(cz){var cA;cA=d.StartsWith("-r:",cz);return cA!=null&&cA.$==1?{$:1,$0:cA.$0}:null;},L.SplitChars(cy,["\n"],0));}));}));};o.loadInThisThread=function(cy){var cz,cA,cB;cA=!self.document;cB=f.wasmStatusV().Get();switch(cA?cB.$==3?1:cB.$==1?2:cB.$==2?4:cB.$==0?6:0:cB.$==1?1:cB.$==3?3:cB.$==4?5:cB.$==0?6:0){case 0:null;break;case 1:f.printfn(function(cC){return cC("WASM is loading");});break;case 2:f.printfn(function(cC){return cC("WASM is loading in the main thread");});break;case 3:f.printfn(function(cC){return cC("WASM is loading in a WebWorker");});break;case 4:f.printfn(function(cC){return cC("WASM is loaded in the main thread");});break;case 5:f.printfn(function(cC){return cC("WASM is loaded in a WebWorker");});break;case 6:br.Start(br.FromContinuations(function(cC){var cD;function cE(){o.bindWasm();f.printfn(function(cF){return cF("WASM Initialized!");});f.wasmStatusV().Set(!self.document?g.WasmWorkerLoaded:g.WasmLoaded);cC();}return br.Start((cD=null,br.Delay(function(){f.printfn(function(cF){return cF("Loading WASM. Hold on, this will take a while...");});f.wasmStatusV().Set(!self.document?g.WasmWorkerLoading:g.WasmLoading);return br.Bind(br.Sleep(50),function(){return br.Combine(!(!self.document)?(h.installProvider(),br.Zero()):br.Zero(),br.Delay(function(){self.App=_1.newPojo([["init",cE]]);return br.Bind(o.requireJsA([o.rootPath()+"mono-config.js"]),function(){return br.Bind(o.requireJsA([o.rootPath()+"runtime.js"]),function(){var cF,cG;cF=f.printfn(function(cH){return function(cI){return cH(H.toSafe(cI));};});self.Module.print=cF;cG=f.printfn(function(cH){return function(cI){return cH(H.toSafe(cI));};});self.Module.printErr=cG;self.Module.preRun=[function(){o.preloadFiles(o.filesToPreload(cy));}];return br.Bind(o.requireJsA([o.rootPath()+"dotnet.js"]),function(){return br.Zero();});});});}));});})),null);}),null);break;}};o.loadWasmInWorker=function(cy){var cz;if(!self.document)f.printfn(function(cA){return cA("Already in a worker cannot load Wasm in another worker");});else if(f.wasmStatusV().Get().$!==0)(f.printfn(function(cA){return function(cB){return cA("Wasm is already "+_5.p(cB));};}))(f.wasmStatusV().Get());else{f.wasmStatusV().Set(g.WasmLoading);f.printfn(function(cA){return cA("Initiating WebWorker");});cz=new a.Worker(ct.ScriptPath("testing","testing.WasmWorker.js"));cz.postMessage({$:2,$0:cy});cz.onmessage=n.fromWorker;n.set_workerO({$:1,$0:cz});h.set_messaging(i.New(function(cA){return function(cB){return cz.postMessage({$:0,$0:cA,$1:cB});};},function(cA){h.returnValue0(cA[0],cA[1]);},function(cA){h.returnExn0(cA[0],cA[1]);},h.messaging().wprintfn));h.installProvider();}};p=o.Require=ct.Class({},l,p);p.New=ct.Ctor(function(){l.New.call(this);},p);q=o.GlobalModule=ct.Class({},l,q);q.New=ct.Ctor(function(){l.New.call(this);},q);r.detailsV=function(){M.$cctor();return M.detailsV;};r.fsErrsV=function(){M.$cctor();return M.fsErrsV;};r.wsErrsV=function(){M.$cctor();return M.wsErrsV;};r.wsWrnsV=function(){M.$cctor();return M.wsWrnsV;};r.codeV=function(){M.$cctor();return M.codeV;};r.optsV=function(){M.$cctor();return M.optsV;};r.clean=function(){r.detailsV().Set("");};r.callWasmA=function(cy,cz){var cA;br.Start((cA=null,br.Delay(function(){return br.Combine(f.wasmStatusV().Get().$===0?(o.loadWasmInWorker(r.optsV().Get()),br.Zero()):br.Zero(),br.Delay(function(){return br.Bind(br.Sleep(50),function(){return br.Combine(br.While(function(){var cB;cB=f.wasmStatusV().Get();return cB.$==2?false:cB.$!=4;},br.Delay(function(){f.printfn(function(cB){return cB("Waiting for WASM to load...");});return br.Bind(br.Sleep(2000),function(){return br.Return(null);});})),br.Delay(function(){return br.Bind(cy(cz),function(){return br.Return(null);});}));});}));})),null);};r.getParms=function(){return["WasmTest",I.filter(function(cy){return L.Trim(cy)!=="";},L.SplitChars("fsc.exe\n"+r.optsV().Get(),["\n"],0)),r.codeV().Get()];};r.showMessages=function(cy,cz,cA){return _7.BindView(function(cB){return I.length(cB)===0?_7.get_Empty():_7.Element("div",[],[_7.TextNode(cy),_7.Element("ol",[],[_7.Concat(K.map(function(cC){return _7.Element("li",[],[_7.TextNode(cz(cC))]);},cB))])]);},cA);};r.parseAndCheckProject=function(cy,cz,cA){var cB;cB=null;return br.Delay(function(){return br.Bind((new _8.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.parseAndCheckProjectRpc:-1474163089",[cy,cz,cA]),function(cC){var cD;r.fsErrsV().Set(I.ofSeq(cC[0]));r.wsErrsV().Set([]);r.wsWrnsV().Set([]);cD=(function(cE){return function(cF){return cE("("+H.prettyPrint(cF[0])+", "+H.printArray(H.prettyPrint,cF[1])+")");};}(a.id))([cC[2],cC[1]]);r.detailsV().Set(cD);return br.Zero();});});};r.translateToJs=function(cy,cz,cA){var cB;cB=null;return br.Delay(function(){return br.Bind((new _8.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.translateFsToJsRpc:957452724",[cy,cz,cA]),function(cC){var cD;cD=cC[1];r.fsErrsV().Set(cC[0]);return cD==null?(r.clean(),r.wsErrsV().Set([]),r.wsWrnsV().Set([]),br.Zero()):(r.detailsV().Set(cD.$0[0]),r.wsErrsV().Set(I.ofSeq(cD.$0[1])),r.wsWrnsV().Set(I.ofSeq(cD.$0[2])),br.Zero());});});};r.mainDoc=function(){var cy,cz;return _7.Element("div",[],[_7.Element("h1",[],[_7.TextNode("HELLO WASM!")]),_7.Element("h2",[],[_7.TextView(_.Map(function(cA){return(function(cB){return function(cC){return cB(_5.p(cC));};}(a.id))(cA);},f.wasmStatusV().get_View()))]),_7.Element("span",[],[_7.Button("Load as Worker",[],function(){o.loadWasmInWorker(r.optsV().Get());}),_7.Button("Load in Main thread",[],function(){o.loadInThisThread(r.optsV().Get());}),_7.Button("Terminate Worker",[],function(){n.terminate();})]),_7.Element("div",[],[_7.InputArea([],r.codeV()),_7.InputArea([],r.optsV())]),_7.Element("span",[],[_7.Button("Check",[],function(){r.callWasmA(function(cA){return r.parseAndCheckProject(cA[0],cA[1],cA[2]);},r.getParms());}),_7.Button("Translate",[],function(){r.clean();f.printfn(function(cA){return cA("Initiating translation:");});r.callWasmA(function(cA){return r.translateToJs(cA[0],cA[1],cA[2]);},r.getParms());}),_7.Button("Dir",[],function(){r.callWasmA(function(cA){return(new _8.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.dirRpc:-1181784350",[cA]);},"/");}),_7.Button("Clean",[],function(){r.clean();})]),r.showMessages("Fsc Messages",function(cA){return function(cB){return cA(H.prettyPrint(cB));};}(a.id),r.fsErrsV().get_View()),r.showMessages("Ws  Errors",(cy=function(cA){return function(cB){return cA("("+_5.p$1(cB[0])+", "+_5.p$2(cB[1])+")");};}(a.id),function(cA){return cy([cA[0],cA[1]]);}),r.wsErrsV().get_View()),r.showMessages("Ws  Warnings",(cz=function(cA){return function(cB){return cA("("+_5.p$1(cB[0])+", "+_5.p$3(cB[1])+")");};}(a.id),function(cA){return cz([cA[0],cA[1]]);}),r.wsWrnsV().get_View()),_7.Element("div",[bv.Create("style","font-family: monospace; white-space:pre")],[_7.TextView(r.detailsV().get_View())])]);};r.main=function(){var cy,cz;cy=r.mainDoc();cz=self.document.body;bx.LoadLocalTemplates("");_7.Run(cz,cy);};s.testVar=function(){M.$cctor();return M.testVar;};s.testVarInput=function(){return _7.Element("div",[],[_7.Input([],s.testVar())]);};s.testVarOut=function(){return _7.Element("div",[],[_7.TextView(s.testVar().get_View())]);};s.mainDoc=function(){return _7.Element("div",[],[_7.Element("h1",[],[_7.TextNode("Hello WSFramework")]),s.testVarInput(),s.testVarOut()]);};s.mainDocNameVar=function(){M.$cctor();return M.mainDocNameVar;};t["loadAssembly'"]=function(cy,cz,cA,cB){var cC;cC=null;return br.Delay(function(){return cy(cB)?br.Zero():br.Bind(cA(cB),function(cD){return br.Combine(br.For(cD.dependencies,function(cE){return br.Bind(t["loadAssembly'"](cy,cz,cA,cE),function(){return br.Return(null);});}),br.Delay(function(){cz(cD);return br.Zero();}));});});};t.assemblies=function(){M.$cctor();return M.assemblies;};t.isLoaded=function(cy){return t.assemblies().TryFind(function(cz){return Q.Equals(cz.self,cy);})!=null;};t.loadDef=function(cy){var cz;try{cz=Z.ofSeq((t.assemblies())["var"].Get());a["eval"]((((ct.Curried3(function(cA,cB,cC){return cA("console.log('loading "+H.toSafe(cB)+" ...');"+H.toSafe(cC));}))(a.id))(cy.name.get_Id()))(cy.javaScript.get_Id()));t.assemblies().Set(new _9({$:1,$0:cy,$1:cz}));}catch(cA){((function(cB){return function(cC){return cB(H.prettyPrint(cC));};}(function(cB){cr.log(cB);}))(cA));}};t.Folder=function(){M.$cctor();return M.Folder;};t.saveAssemblies=function(cy){t.assemblies().Set(cy);};t.loadAssembly=function(cy){var cz;cz=null;return br.Delay(function(){return br.Bind(t["loadAssembly'"](t.isLoaded,function(cA){t.loadDef(cA);},function(cA){return E.fetchAsmData(t.Folder(),cA);},cy),function(){var cA;cA=I.ofSeq((t.assemblies())["var"].Get());self.IntelliFactory.Runtime.Start();t.saveAssemblies(cA);return br.Zero();});});};t.loadTesting=function(){br.Start(t.loadAssembly(new y({$:0,$0:(function(cy){return function(cz){return cy("testing.asm?q="+H.prettyPrint(cz));};}(a.id))(cu.now())})),null);};t.alreadyLoaded=function(){return K.length((t.assemblies())["var"].Get())>0;};t.thisModuleV=function(){M.$cctor();return M.thisModuleV;};t.loadThisModule=function(){br.Start(t.loadAssembly(new y({$:0,$0:t.thisModuleV().Get()})),null);};t.nobr=function(){return bv.Create("style","white-space: nowrap");};t.click=function(cy){return bv.HandlerImpl("click",function(){return function(){return cy();};});};t.selectedAssembly=function(){M.$cctor();return M.selectedAssembly;};t.listAssembliesDoc=function(){var cy;function cz(cA,cB){return _7.Element("tr",[],[_7.Element("td",[t.click(function(){t.selectedAssembly().Set({$:1,$0:cA});})],[_7.TextView(_.Map(function(cC){return cC.name.get_Id();},cB))])]);}return _7.Element("table",[],[(cy=t.assemblies(),_7.ConvertSeqBy(cy.key,function(cA){return function(cB){return cz(cA,cB);};},cy["var"].get_View()))]);};t.selectedMethod=function(){M.$cctor();return M.selectedMethod;};t.methodRows=function(cy,cz,cA){return _7.Element("table",[bv.Create("style","font-family: monospace")],Z.ofSeq(K.delay(function(){return K.collect(function(cB){var cC;cC=K.filter(cy,cB.methods);return K.length(cC)>0?[_7.Element("tr",[],Z.ofSeq(K.delay(function(){return[_7.Element("td",[],Z.ofSeq(K.delay(function(){return K.append([_7.Element("b",[],[_7.TextNode(cB.name.get_Id2())])],K.delay(function(){return K.collect(function(cD){var cE;return[_7.Element("tr",[t.click(function(){t.selectedMethod().Set({$:1,$0:[cB.name,cD.name]});})],[_7.Element("td",[],[_7.TextNode(cD.name.get_Id())]),_7.Element("td",[],[_7.TextNode(cD.isField?"":(cE=L.concat(", ",K.map(function(cF){return cF.name.get_Id();},cD.parms)),(function(cF){return function(cG){return cF("("+H.toSafe(cG)+")");};}(a.id))(cE)))]),_7.Element("td",[t.nobr()],[_7.TextNode(cD.isField?":":" -> ")]),_7.Element("td",[],[_7.TextNode(cD.retType.name.get_Id())]),_7.Element("td",[],[cA(cB,cD)])])];},cC);}));})))];})))]:[];},cz.modules);})));};t.styleDoc=function(){return _7.Element("style",_9.Empty,Z.ofArray([_7.TextNode("\r\n                    .wsfmwk-alternate > * :nth-child(even) {background: #CCF}\r\n                    .wsfmwk-alternate > * :nth-child(odd ) {background: #CFC}\r\n                    .wsfmwk-alternate td { border: white ; border-style: solid ; border-width: thin}\r\n                    .wsfmwk-alternate tr { border: white ; border-style: solid ; border-width: thin}\r\n                ")]));};t.assemblyDoc=function(cy){var cz,cA;function cB(cG,cH){return _7.get_Empty();}function cC(cG,cH){if(cH.retType.name.get_Id()!=="Var<string>")return _7.get_Empty();else try{return _7.Input(_9.Empty,a["eval"]((((ct.Curried3(function(cI,cJ,cK){return cI(H.toSafe(cJ)+"."+H.toSafe(cK)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id())));}catch(cI){return _7.TextNode(cI.message);}}function cD(cG,cH){var cI,cJ;if(cH.retType.name.get_Id().indexOf("<")!=-1)return _7.get_Empty();else{try{cI=(cJ=a["eval"]((((ct.Curried3(function(cK,cL,cM){return cK(H.toSafe(cL)+"."+H.toSafe(cM)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id())),(function(cK){return function(cL){return cK(H.prettyPrint(cL));};}(a.id))(cJ));}catch(cK){cI=cK.message;}return _7.TextNode(cI);}}function cE(cG,cH){return _7.Concat([_7.Button("Show",[],function(){var cI,cJ;cI=(cJ=(((ct.Curried3(function(cK,cL,cM){return cK(H.toSafe(cL)+"."+H.toSafe(cM)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id()),(function(cK){return function(cL){return cK("WebSharper.UI.Doc.Concat(["+H.toSafe(cL)+"])");};}(a.id))(cJ));s.mainDocNameVar().Set(cI);}),_7.Button("Add",[],function(){var cI,cJ,cK;cI=s.mainDocNameVar().Get();cJ=(cK=(((ct.Curried3(function(cL,cM,cN){return cL(H.toSafe(cM)+"."+H.toSafe(cN)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id()),(((ct.Curried3(function(cL,cM,cN){return cL(H.toSafe(cM)+", "+H.toSafe(cN)+"])");}))(a.id))(J.string(cI,null,{$:1,$0:cI.length-3})))(cK));s.mainDocNameVar().Set(cJ);})]);}function cF(cG,cH){var cI;cI=cH[1];return[[cH[0],function(cJ){return cI(cJ)&&!cG(cJ);}],function(cJ){return cI(cJ)||cG(cJ);}];}cz=(cA=Z.ofArray([[function(cG){return function(cH){return cC(cG,cH);};},function(cG){return L.StartsWith(cG.retType.name.get_Id(),"Var<")&&cG.isField;}],[function(cG){return function(cH){return cB(cG,cH);};},function(cG){return L.StartsWith(cG.retType.name.get_Id(),"View<")&&cG.isField;}],[function(cG){return function(cH){return cD(cG,cH);};},function(cG){return cG.retType.name.get_Id()!=="Doc"&&cG.isField&&!(cG.retType.name.get_Id().indexOf("->")!=-1);}],[function(cG){return function(cH){return cE(cG,cH);};},function(cG){return cG.retType.name.get_Id()==="Doc"&&(cG.isField||K.isEmpty(cG.parms));}],[function(cG){return function(cH){return cB(cG,cH);};},function(){return true;}]]),(((ct.Curried3(K.mapFold))(cF))(function(){return false;}))(cA))[0];return _7.Concat([_7.Element("h3",[],[_7.TextNode(cy.name.get_Id())]),_7.Element("div",[bh.Class("wsfmwk-alternate")],Z.ofSeq(K.delay(function(){return K.collect(function(cG){var cH;cH=cG[0];return[t.methodRows(cG[1],cy,function(cI,cJ){return(cH(cI))(cJ);})];},cz);})))]);};t.currentAssembly=function(){var cy;return _7.BindView(a.id,(cy=_.get_Do(),_.Bind(function(cz){return cz!=null&&cz.$==1?_.Bind(function(cA){return cA!=null&&cA.$==1?_.Const(t.assemblyDoc(cA.$0)):_.Const(_7.get_Empty());},t.assemblies().TryFindByKeyAsView(cz.$0)):_.Const(_7.get_Empty());},t.selectedAssembly().get_View())));};t.assembliesDoc=function(){return _7.Concat([_7.Button("Load module:",[],function(){t.loadThisModule();}),_7.Input([],t.thisModuleV()),t.listAssembliesDoc(),t.currentAssembly(),t.styleDoc()]);};u=t.ModuleName=ct.Class({get_Id:function(){return this.$0;},get_Id2:function(){return L.Replace(this.get_Id(),"+",".");}},null,u);v=t.TypeName=ct.Class({get_Id:function(){return this.$0;}},null,v);w=t.MethodName=ct.Class({get_Id:function(){return this.$0;}},null,w);x=t.AssemblyName=ct.Class({get_Id:function(){return this.$0;}},null,x);y=t.AssemblyRef=ct.Class({get_Id:function(){return this.$0;}},null,y);z=t.JSCode=ct.Class({get_Id:function(){return this.$0;}},null,z);A.New=function(cy,cz){return{name:cy,asm:cz};};B.New=function(cy,cz,cA,cB){return{name:cy,retType:cz,parms:cA,isField:cB};};C.New=function(cy,cz){return{name:cy,methods:cz};};D.New=function(cy,cz,cA,cB,cC){return{name:cy,self:cz,modules:cA,dependencies:cB,javaScript:cC};};E.fetchAsmData=function(cy,cz){var cA,cB;cA=cz.$0;cB=null;return br.Delay(function(){return br.Bind(bA.AsyncMap(bg.asyncReadTextAtRuntime(false,"D:\\Abe\\CIPHERWorkspace\\FSharpStation\\src","","JSON","",cA.indexOf("/")!=-1?cA:cy+cA),function(cC){return Q.Equals(typeof cC,"string")?cv.parse(cC):cC;}),function(cC){var cD,cE,cF,cG,cH,cI,cJ,cK;return br.Return((cD=new x({$:0,$0:(cF=(cE="asName",cE in cC?{$:1,$0:cC[cE]}:null),cF==null?null:cF.$0)}),(cG=new y({$:0,$0:cA}),(cH=new z({$:0,$0:(cJ=(cI="js",cI in cC?{$:1,$0:cC[cI]}:null),cJ==null?null:cJ.$0)}),(cK=I.map(function(cL){return new y({$:0,$0:cL});},cC.dependencies),D.New(cD,cG,I.map(function(cL){var cM,cN;return C.New(new u({$:0,$0:(cN=(cM="moName",cM in cL?{$:1,$0:cL[cM]}:null),cN==null?null:cN.$0)}),I.map(function(cO){var cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1;cP=new w({$:0,$0:(cR=(cQ="meName",cQ in cO?{$:1,$0:cO[cQ]}:null),cR==null?null:cR.$0)});cS=(cT=(cU="isField",cU in cO?{$:1,$0:cO[cU]}:null),(cV=cT==null?null:{$:1,$0:1*cT.$0},cV==null?null:cV.$0))===1;return B.New(cP,A.New(new v({$:0,$0:(cY=(cW=cO.type,(cX="tName",cX in cW?{$:1,$0:cW[cX]}:null)),cY==null?null:cY.$0)}),new x({$:0,$0:(c1=(cZ=cO.type,(c0="asm",c0 in cZ?{$:1,$0:cZ[c0]}:null)),c1==null?null:c1.$0)})),I.map(function(c2){var c3,c4,c5,c6;return A.New(new v({$:0,$0:(c4=(c3="tName",c3 in c2?{$:1,$0:c2[c3]}:null),c4==null?null:c4.$0)}),new x({$:0,$0:(c6=(c5="asm",c5 in c2?{$:1,$0:c2[c5]}:null),c6==null?null:c6.$0)}));},cO.parms),cS);},cL.methods));},cC.modules),cK,cH))))));});});};F.mainDocNameVar=function(){M.$cctor();return M.mainDocNameVar$1;};F.mainDocVar=function(){M.$cctor();return M.mainDocVar;};F.mainDocInput=function(){return _7.Element("div",[],[_7.Input([bv.Create("style","width: 100%")],F.mainDocNameVar())]);};F.mainSubDoc=function(){M.$cctor();return M.mainSubDoc;};F.main=function(){var cy,cz;if(!(!self.document))if(t.alreadyLoaded()){cy=_7.Element("div",[],[F.mainDocInput(),t.assembliesDoc(),r.mainDoc(),_7.Element("div",[],[F.mainSubDoc()])]);cz=self.document.body;bx.LoadLocalTemplates("");_7.Run(cz,cy);}else t.loadTesting();};G.range=function(cy,cz){var cA;cA=1+cz-cy;return cA<=0?[]:K.init(cA,function(cB){return cB+cy;});};G.KeyValue=function(cy){return[cy.K,cy.V];};G.FailWith=function(cy){throw new bV(cy);};H.toSafe=function(cy){return cy==null?"":cy;};H.prettyPrint=function(cy){var cz,cA;function cB(cC,cD){return cC+" = "+H.prettyPrint(cD);}return cy===null?"null":(cz=typeof cy,cz=="string"?"\""+cy+"\"":cz=="object"?cy instanceof a.Array?"[|"+L.concat("; ",I.map(H.prettyPrint,cy))+"|]":(cA=a.String(cy),cA==="[object Object]"?"{"+L.concat("; ",I.map(function(cC){return cB(cC[0],cC[1]);},Y.GetFields(cy)))+"}":cA):a.String(cy));};H.printArray=function(cy,cz){return cz===null?"null":"[|"+L.concat("; ",I.map(cy,cz))+"|]";};H.printList=function(cy,cz){return"["+L.concat("; ",K.map(cy,cz))+"]";};I.get=function(cy,cz){I.checkBounds(cy,cz);return cy[cz];};I.length=function(cy){return cy.dims===2?cy.length*cy.length:cy.length;};I.checkBounds=function(cy,cz){if(cz<0||cz>=cy.length)G.FailWith("Index was outside the bounds of the array.");};I.set=function(cy,cz,cA){I.checkBounds(cy,cz);cy[cz]=cA;};J.string=function(cy,cz,cA){return cz==null?cA!=null&&cA.$==1?cy.slice(0,cA.$0+1):"":cA==null?cy.slice(cz.$0):cy.slice(cz.$0,cA.$0+1);};J.array=function(cy,cz,cA){return cz==null?cA!=null&&cA.$==1?cy.slice(0,cA.$0+1):[]:cA==null?cy.slice(cz.$0):cy.slice(cz.$0,cA.$0+1);};K.tryFind=function(cy,cz){var cA,cB,cC;cA=bj.Get(cz);try{cB=null;while(cB==null&&cA.MoveNext()){cC=cA.Current();cy(cC)?cB={$:1,$0:cC}:void 0;}return cB;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};K.tryFindIndex=function(cy,cz){var cA,cB,cC;cA=bj.Get(cz);try{cB=true;cC=0;while(cB&&cA.MoveNext())if(cy(cA.Current()))cB=false;else cC=cC+1;return cB?null:{$:1,$0:cC};}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};K.map=function(cy,cz){return{GetEnumerator:function(){var cA;cA=bj.Get(cz);return new bk.New(null,null,function(cB){return cA.MoveNext()&&(cB.c=cy(cA.Current()),true);},function(){cA.Dispose();});}};};K.filter=function(cy,cz){return{GetEnumerator:function(){var cA;cA=bj.Get(cz);return new bk.New(null,null,function(cB){var cC,cD,cE;cC=cA.MoveNext();cD=cA.Current();cE=false;while(cC)if(cy(cD)){cB.c=cD;cE=true;cC=false;}else if(cA.MoveNext())cD=cA.Current();else cC=false;return cE;},function(){cA.Dispose();});}};};K.exists=function(cy,cz){var cA,cB;cA=bj.Get(cz);try{cB=false;while(!cB&&cA.MoveNext())cB=cy(cA.Current());return cB;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};K.delay=function(cy){return{GetEnumerator:function(){return bj.Get(cy());}};};K.append=function(cy,cz){return{GetEnumerator:function(){var cA,cB;cA=bj.Get(cy);cB=[true];return new bk.New(cA,null,function(cC){var cD;return cC.s.MoveNext()?(cC.c=cC.s.Current(),true):(cD=cC.s,!Q.Equals(cD,null)?cD.Dispose():void 0,cC.s=null,cB[0]&&(cB[0]=false,cC.s=bj.Get(cz),cC.s.MoveNext()?(cC.c=cC.s.Current(),true):(cC.s.Dispose(),cC.s=null,false)));},function(cC){var cD;cD=cC.s;!Q.Equals(cD,null)?cD.Dispose():void 0;});}};};K.iter=function(cy,cz){var cA;cA=bj.Get(cz);try{while(cA.MoveNext())cy(cA.Current());}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};K.distinct=function(cy){return K.distinctBy(a.id,cy);};K.cache=function(cy){var cz,cA;cz=[];cA=[bj.Get(cy)];return{GetEnumerator:function(){return new bk.New(0,null,function(cB){var cC;return cB.s<cz.length?(cB.c=cz[cB.s],cB.s=cB.s+1,true):(cC=cA[0],Q.Equals(cC,null)?false:cC.MoveNext()?(cB.s=cB.s+1,cB.c=cC.Current(),cz.push(cB.c),true):(cC.Dispose(),cA[0]=null,false));},void 0);}};};K.length=function(cy){var cz,cA;cz=0;cA=bj.Get(cy);try{while(cA.MoveNext())cz=cz+1;return cz;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};K.collect=function(cy,cz){return K.concat(K.map(cy,cz));};K.mapFold=function(cy,cz,cA){return I.mapFold(cy,cz,I.ofSeq(cA));};K.isEmpty=function(cy){var cz;cz=bj.Get(cy);try{return!cz.MoveNext();}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};K.init=function(cy,cz){return K.take(cy,K.initInfinite(cz));};K.distinctBy=function(cy,cz){return{GetEnumerator:function(){var cA,cB;cA=bj.Get(cz);cB=new bJ.New$3();return new bk.New(null,null,function(cC){var cD,cE;if(cA.MoveNext()){cD=cA.Current();cE=cB.Add(cy(cD));while(!cE&&cA.MoveNext()){cD=cA.Current();cE=cB.Add(cy(cD));}return cE&&(cC.c=cD,true);}else return false;},function(){cA.Dispose();});}};};K.concat=function(cy){return{GetEnumerator:function(){var cz;cz=bj.Get(cy);return new bk.New(null,null,function(cA){var cB;while(true){cB=cA.s;if(Q.Equals(cB,null)){if(cz.MoveNext()){cA.s=bj.Get(cz.Current());cA=cA;}else{cz.Dispose();return false;}}else if(cB.MoveNext()){cA.c=cB.Current();return true;}else{cA.Dispose();cA.s=null;cA=cA;}}},function(cA){var cB;cB=cA.s;!Q.Equals(cB,null)?cB.Dispose():void 0;!Q.Equals(cz,null)?cz.Dispose():void 0;});}};};K.take=function(cy,cz){cy<0?K.nonNegative():void 0;return{GetEnumerator:function(){var cA;cA=[bj.Get(cz)];return new bk.New(0,null,function(cB){var cC;cB.s=cB.s+1;return cB.s>cy?false:(cC=cA[0],Q.Equals(cC,null)?K.insufficient():cC.MoveNext()?(cB.c=cC.Current(),cB.s===cy?(cC.Dispose(),cA[0]=null):void 0,true):(cC.Dispose(),cA[0]=null,K.insufficient()));},function(){var cB;cB=cA[0];!Q.Equals(cB,null)?cB.Dispose():void 0;});}};};K.initInfinite=function(cy){return{GetEnumerator:function(){return new bk.New(0,null,function(cz){cz.c=cy(cz.s);cz.s=cz.s+1;return true;},void 0);}};};K.head=function(cy){var cz;cz=bj.Get(cy);try{return cz.MoveNext()?cz.Current():K.insufficient();}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};K.fold=function(cy,cz,cA){var cB,cC;cB=cz;cC=bj.Get(cA);try{while(cC.MoveNext())cB=cy(cB,cC.Current());return cB;}finally{if(typeof cC=="object"&&"Dispose"in cC)cC.Dispose();}};K.max=function(cy){var cz,cA,cB;cz=bj.Get(cy);try{if(!cz.MoveNext())K.seqEmpty();cA=cz.Current();while(cz.MoveNext()){cB=cz.Current();Q.Compare(cB,cA)===1?cA=cB:void 0;}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};K.seqEmpty=function(){return G.FailWith("The input sequence was empty.");};L.replicate=function(cy,cz){return I.create(cy,cz).join("");};L.concat=function(cy,cz){return I.ofSeq(cz).join(cy);};L.Substring=function(cy,cz,cA){return cy.substr(cz,cA);};L.SplitChars=function(cy,cz,cA){return L.Split(cy,new a.RegExp("["+L.RegexEscape(cz.join(""))+"]"),cA);};L.Trim=function(cy){return cy.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};L.StartsWith=function(cy,cz){return cy.substring(0,cz.length)==cz;};L.EndsWith=function(cy,cz){return cy.substring(cy.length-cz.length)==cz;};L.Replace=function(cy,cz,cA){function cB(cC){var cD,cE,cF;cD=cC.indexOf(cz);return cD!==-1?(cE=L.ReplaceOnce(cC,cz,cA),(cF=cD+cA.length,L.Substring(cE,0,cD+cA.length)+cB(cE.substring(cF)))):cC;}return cB(cy);};L.Split=function(cy,cz,cA){return cA===1?I.filter(function(cB){return cB!=="";},L.SplitWith(cy,cz)):L.SplitWith(cy,cz);};L.RegexEscape=function(cy){return cy.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};L.ReplaceOnce=function(cy,cz,cA){return cy.replace(cz,cA);};L.SplitWith=function(cy,cz){return cy.split(cz);};L.ReplaceChar=function(cy,cz,cA){return L.Replace(cy,cz,cA);};M.$cctor=function(){var cy,cz;M.$cctor=a.ignore;function cA(cF){return L.concat("\n",cF);}function cB(cF){return d.splitByChar("\n",cF);}function cC(cF){var cG,cH;return J.array(cF,{$:1,$0:0},{$:1,$0:(cG=0,(cH=I.length(cF)-2,Q.Compare(cG,cH)===1?cG:cH))});}function cD(cF){return L.concat("\n",cF);}function cE(cF){return cF+"T00:00:00";}M.unindentStr=function(cF){return cA(d.unindent(cF));};M.skipLastLine=(cy=function(cF){return cC(cB(cF));},function(cF){return cD(cy(cF));});M.parseDateO2=(cz=e.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=bD.TryParse(cF),cH!=null&&cH.$==1&&(cG=cH.$0,true)),cG];}),function(cF){return cz(cE(cF));});M.parseDateO=e.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=bD.TryParse(cF),cH!=null&&cH.$==1&&(cG=cH.$0,true)),cG];});M.parseIntO=e.tryParseWith(function(cF){var cG;cG=0;return[bl.TryParseInt32(cF,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG];});M.parseInt64O=e.tryParseWith(function(cF){var cG;cG=0;return[bl.TryParseInt64(cF,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG];});M.parseSingleO=e.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=a.Number(cF),a.isNaN(cH)?false:(cG=cH,true)),cG];});M.parseDoubleO=e.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=a.Number(cF),a.isNaN(cH)?false:(cG=cH,true)),cG];});M.parseGuidO=e.tryParseWith(function(cF){var cG;cG=null;return[bn.TryParse(cF,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG];});M["|Date|_|"]=e.parseDateO();M["|Int|_|"]=e.parseIntO();M["|Int64|_|"]=e.parseInt64O();M["|Single|_|"]=e.parseSingleO();M["|Double|_|"]=e.parseDoubleO();M["|Guid|_|"]=e.parseGuidO();M.wasmStatusV=bo.Create$1(g.WasmNotLoaded);M.originalProvider=T.AjaxProvider();M.queues=new S.New$5();M.messaging=i.New(function(cF){return function(cG){return self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(cF,cG);};},function(cF){h.returnValue0(cF[0],cF[1]);},function(cF){h.returnExn0(cF[0],cF[1]);},function(cF){return function(cG){return cF("EARLY PRINTING!: "+H.toSafe(cG));};}(function(cF){cr.log(cF);}));M.workerO=null;M.rootPath="/WASM/publish/";M.detailsV=bo.Create$1("");M.fsErrsV=bo.Create$1([]);M.wsErrsV=bo.Create$1([]);M.wsWrnsV=bo.Create$1([]);M.codeV=bo.Create$1("\r\n    open WebSharper\r\n    open WebSharper.UI\r\n    open WebSharper.UI.Html\r\n    \r\n    let name = Var.Create \"World\"\r\n    \r\n    [< Inline \"'Hello inline '\" >]\r\n    let bDoc() = \"Hello\"\r\n    \r\n    let cDoc() = text name.V\r\n    \r\n    let aDoc() = \r\n        div [] [\r\n            text <| bDoc()\r\n            cDoc()\r\n        ]\r\n    \r\n            ");M.optsV=bo.Create$1(L.concat("\n",K.map(L.Trim,L.SplitChars("\r\n                                    /tmp/source.fsx\r\n                                    -o:source.exe\r\n                                    --simpleresolution\r\n                                    --nowarn:3186\r\n                                    --optimize-\r\n                                    --noframework\r\n                                    --fullpaths\r\n                                    --warn:3\r\n                                    --target:exe\r\n                                    -r:/dlls/WebSharper.Core.dll\r\n                                    -r:/dlls/WebSharper.UI.dll\r\n                                    -r:/dlls/WebSharper.Sitelets.dll\r\n                                    -r:/managed/FSharp.Core.dll\r\n                                    -r:/managed/mscorlib.dll\r\n                                    -r:/managed/netstandard.dll\r\n                                    -r:/managed/System.dll\r\n                                    -r:/managed/System.Core.dll\r\n                                    -r:/managed/System.IO.dll\r\n                                    -r:/managed/System.Runtime.dll\r\n                                    -r:/managed/System.Net.Http.dll\r\n                                    -r:/managed/System.Threading.dll\r\n                                    -r:/managed/System.Numerics.dll\r\n                                ",["\n"],0))));!(!self.document)?h.set_messaging(i.New(h.messaging().runRpc,h.messaging().returnValue,h.messaging().returnExn,function(cF){var cG;cr.log(cF);cG=r.detailsV().Get();r.detailsV().Set(cG+(cG===""?"":"\n")+cF);})):void 0;M.testVar=bo.Create$1("Hello WSFrameWork");M.mainDocNameVar=bo.Create$1("FsRoot.TestingJS.WSFrameworkTest.mainDoc()");M.assemblies=bc.Create(function(cF){return cF.name;},_9.Empty);M.Folder="/EPFileX/Assemblies/";M.thisModuleV=bo.Create$1("Covid.asm");M.selectedAssembly=bo.Create$1(null);M.selectedMethod=bo.Create$1(null);M.mainDocNameVar$1=s.mainDocNameVar();M.mainDocVar=bo.Create$1(_7.Element("h1",[],[_7.TextNode("mainDocVar not initialized")]));_.Sink(function(cF){var cG;try{cG=a["eval"](cF);cG instanceof _7?F.mainDocVar().Set(cG):typeof cG=="string"?F.mainDocVar().Set(_7.TextNode(cG)):cG instanceof W?F.mainDocVar().Set(_7.TextView(cG.get_View())):cG instanceof _?F.mainDocVar().Set(_7.TextView(cG)):cr.log("mainDocNameVar type mismatch: ",cG);}catch(cH){((function(cI){return function(cJ){return cI(H.prettyPrint(cJ));};}(function(cI){cr.log(cI);}))(cH));}},F.mainDocNameVar().get_View());M.mainSubDoc=_7.BindView(a.id,F.mainDocVar().get_View());};N.IsWhiteSpace=function(cy){return cy.match(new a.RegExp("\\s"))!==null;};P.NewFromSeq=function(cy){var cz,cA,cB;cz={};cA=bj.Get(cy);try{while(cA.MoveNext()){cB=cA.Current();cz[cB[0]]=cB[1];}}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}return cz;};Q.Equals=function(cy,cz){var cA,cB,cC,cD;if(cy===cz)return true;else{cA=typeof cy;if(cA=="object"){if(cy===null||cy===void 0||cz===null||cz===void 0)return false;else if("Equals"in cy)return cy.Equals(cz);else if(cy instanceof a.Array&&cz instanceof a.Array)return Q.arrayEquals(cy,cz);else if(cy instanceof cu&&cz instanceof cu)return Q.dateEquals(cy,cz);else{cB=[true];for(var cE in cy)if(function(cF){cB[0]=!cy.hasOwnProperty(cF)||cz.hasOwnProperty(cF)&&Q.Equals(cy[cF],cz[cF]);return!cB[0];}(cE))break;if(cB[0]){for(var cF in cz)if(function(cG){cB[0]=!cz.hasOwnProperty(cG)||cy.hasOwnProperty(cG);return!cB[0];}(cF))break;}return cB[0];}}else return cA=="function"&&("$Func"in cy?cy.$Func===cz.$Func&&cy.$Target===cz.$Target:"$Invokes"in cy&&"$Invokes"in cz&&Q.arrayEquals(cy.$Invokes,cz.$Invokes));}};Q.Compare=function(cy,cz){var cA,cB,cC,cD,cE,cF;if(cy===cz)return 0;else{cB=typeof cy;switch(cB=="function"?1:cB=="boolean"?2:cB=="number"?2:cB=="string"?2:cB=="object"?3:0){case 0:return typeof cz=="undefined"?0:-1;case 1:return G.FailWith("Cannot compare function values.");case 2:return cy<cz?-1:1;case 3:if(cy===null)cC=-1;else if(cz===null)cC=1;else if("CompareTo"in cy)cC=cy.CompareTo(cz);else if("CompareTo0"in cy)cC=cy.CompareTo0(cz);else if(cy instanceof a.Array&&cz instanceof a.Array)cC=Q.compareArrays(cy,cz);else if(cy instanceof cu&&cz instanceof cu)cC=Q.compareDates(cy,cz);else{cD=[0];for(var cG in cy)if(function(cH){return!cy.hasOwnProperty(cH)?false:!cz.hasOwnProperty(cH)?(cD[0]=1,true):(cD[0]=Q.Compare(cy[cH],cz[cH]),cD[0]!==0);}(cG))break;if(cD[0]===0){for(var cH in cz)if(function(cI){return!cz.hasOwnProperty(cI)?false:!cy.hasOwnProperty(cI)&&(cD[0]=-1,true);}(cH))break;}cC=cD[0];}return cC;}}};Q.arrayEquals=function(cy,cz){var cA,cB;if(I.length(cy)===I.length(cz)){cA=true;cB=0;while(cA&&cB<I.length(cy)){!Q.Equals(I.get(cy,cB),I.get(cz,cB))?cA=false:void 0;cB=cB+1;}return cA;}else return false;};Q.dateEquals=function(cy,cz){return cy.getTime()===cz.getTime();};Q.compareArrays=function(cy,cz){var cA,cB;if(I.length(cy)<I.length(cz))return -1;else if(I.length(cy)>I.length(cz))return 1;else{cA=0;cB=0;while(cA===0&&cB<I.length(cy)){cA=Q.Compare(I.get(cy,cB),I.get(cz,cB));cB=cB+1;}return cA;}};Q.compareDates=function(cy,cz){return Q.Compare(cy.getTime(),cz.getTime());};Q.Hash=function(cy){var cz;cz=typeof cy;return cz=="function"?0:cz=="boolean"?cy?1:0:cz=="number"?cy:cz=="string"?Q.hashString(cy):cz=="object"?cy==null?0:cy instanceof a.Array?Q.hashArray(cy):Q.hashObject(cy):0;};Q.hashString=function(cy){var cz,cA,cB;if(cy===null)return 0;else{cz=5381;for(cA=0,cB=cy.length-1;cA<=cB;cA++)cz=Q.hashMix(cz,cy[cA].charCodeAt());return cz;}};Q.hashArray=function(cy){var cz,cA,cB;cz=-34948909;for(cA=0,cB=I.length(cy)-1;cA<=cB;cA++)cz=Q.hashMix(cz,Q.Hash(I.get(cy,cA)));return cz;};Q.hashObject=function(cy){var cz,cA;if("GetHashCode"in cy)return cy.GetHashCode();else{cz=[0];for(var cB in cy)if(function(cC){cz[0]=Q.hashMix(Q.hashMix(cz[0],Q.hashString(cC)),Q.Hash(cy[cC]));return false;}(cB))break;return cz[0];}};Q.hashMix=function(cy,cz){return(cy<<5)+cy+cz;};S=R.Dictionary=ct.Class({TryGetValue:function(cy,cz){var cA,cB,cC;cA=this;cB=this.data[this.hash(cy)];return cB==null?false:(cC=I.tryPick(function(cD){var cE;cE=G.KeyValue(cD);return cA.equals.apply(null,[cE[0],cy])?{$:1,$0:cE[1]}:null;},cB),cC!=null&&cC.$==1&&(cz.set(cC.$0),true));},Add:function(cy,cz){this.add(cy,cz);},Remove:function(cy){return this.remove(cy);},add:function(cy,cz){var cA,cB,cC;cA=this;cB=this.hash(cy);cC=this.data[cB];cC==null?(this.count=this.count+1,this.data[cB]=new a.Array({K:cy,V:cz})):(I.exists(function(cD){return cA.equals.apply(null,[(G.KeyValue(cD))[0],cy]);},cC)?bF.alreadyAdded():void 0,this.count=this.count+1,cC.push({K:cy,V:cz}));},remove:function(cy){var cz,cA,cB,cC;cz=this;cA=this.hash(cy);cB=this.data[cA];return cB==null?false:(cC=I.filter(function(cD){return!cz.equals.apply(null,[(G.KeyValue(cD))[0],cy]);},cB),I.length(cC)<cB.length&&(this.count=this.count-1,this.data[cA]=cC,true));},set_Item:function(cy,cz){this.set(cy,cz);},Clear:function(){this.data=[];this.count=0;},set:function(cy,cz){var cA,cB,cC,cD;cA=this;cB=this.hash(cy);cC=this.data[cB];cC==null?(this.count=this.count+1,this.data[cB]=new a.Array({K:cy,V:cz})):(cD=I.tryFindIndex(function(cE){return cA.equals.apply(null,[(G.KeyValue(cE))[0],cy]);},cC),cD==null?(this.count=this.count+1,cC.push({K:cy,V:cz})):cC[cD.$0]={K:cy,V:cz});},ContainsKey:function(cy){var cz,cA;cz=this;cA=this.data[this.hash(cy)];return cA==null?false:I.exists(function(cB){return cz.equals.apply(null,[(G.KeyValue(cB))[0],cy]);},cA);},get_Keys:function(){return new b8.New(this);},get_Item:function(cy){return this.get(cy);},get:function(cy){var cz,cA;cz=this;cA=this.data[this.hash(cy)];return cA==null?bF.notPresent():I.pick(function(cB){var cC;cC=G.KeyValue(cB);return cz.equals.apply(null,[cC[0],cy])?{$:1,$0:cC[1]}:null;},cA);},GetEnumerator:function(){return bj.Get0(this);},GetEnumerator0:function(){return bj.Get0(I.concat(Y.GetFieldValues(this.data)));}},l,S);S.New$5=ct.Ctor(function(){S.New$6.call(this,[],Q.Equals,Q.Hash);},S);S.New$6=ct.Ctor(function(cy,cz,cA){var cB,cC;l.New.call(this);this.equals=cz;this.hash=cA;this.count=0;this.data=[];cB=bj.Get(cy);try{while(cB.MoveNext()){cC=cB.Current();this.set(cC.K,cC.V);}}finally{if(typeof cB=="object"&&"Dispose"in cB)cB.Dispose();}},S);I.map=function(cy,cz){var cA,cB,cC;cA=new a.Array(cz.length);for(cB=0,cC=cz.length-1;cB<=cC;cB++)cA[cB]=cy(cz[cB]);return cA;};I.choose=function(cy,cz){var cA,cB,cC,cD;cA=[];for(cB=0,cC=cz.length-1;cB<=cC;cB++){cD=cy(cz[cB]);cD==null?void 0:cA.push(cD.$0);}return cA;};I.filter=function(cy,cz){var cA,cB,cC;cA=[];for(cB=0,cC=cz.length-1;cB<=cC;cB++)if(cy(cz[cB]))cA.push(cz[cB]);return cA;};I.create=function(cy,cz){var cA,cB,cC;cA=new a.Array(cy);for(cB=0,cC=cy-1;cB<=cC;cB++)cA[cB]=cz;return cA;};I.tryPick=function(cy,cz){var cA,cB,cC;cA=null;cB=0;while(cB<cz.length&&cA==null){cC=cy(cz[cB]);cC!=null&&cC.$==1?cA=cC:void 0;cB=cB+1;}return cA;};I.ofSeq=function(cy){var cz,cA;if(cy instanceof a.Array)return cy.slice();else if(cy instanceof _9)return I.ofList(cy);else{cz=[];cA=bj.Get(cy);try{while(cA.MoveNext())cz.push(cA.Current());return cz;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}}};I.tryFind=function(cy,cz){var cA,cB;cA=null;cB=0;while(cB<cz.length&&cA==null){cy(cz[cB])?cA={$:1,$0:cz[cB]}:void 0;cB=cB+1;}return cA;};I.exists=function(cy,cz){var cA,cB,cC,cD;cA=false;cB=0;cD=I.length(cz);while(!cA&&cB<cD)if(cy(cz[cB]))cA=true;else cB=cB+1;return cA;};I.ofList=function(cy){var cz,cA;cA=[];cz=cy;while(!(cz.$==0)){cA.push(Z.head(cz));cz=Z.tail(cz);}return cA;};I.concat=function(cy){return a.Array.prototype.concat.apply([],I.ofSeq(cy));};I.tryFindIndex=function(cy,cz){var cA,cB;cA=null;cB=0;while(cB<cz.length&&cA==null){cy(cz[cB])?cA={$:1,$0:cB}:void 0;cB=cB+1;}return cA;};I.foldBack=function(cy,cz,cA){var cB,cC,cD,cE,cF;cB=cA;cD=cz.length;for(cE=1,cF=cD;cE<=cF;cE++)cB=cy(cz[cD-cE],cB);return cB;};I.iter=function(cy,cz){var cA,cB;for(cA=0,cB=cz.length-1;cA<=cB;cA++)cy(cz[cA]);};I.pick=function(cy,cz){var cA;cA=I.tryPick(cy,cz);return cA==null?G.FailWith("KeyNotFoundException"):cA.$0;};I.init=function(cy,cz){var cA,cB,cC;cy<0?G.FailWith("Negative size given."):null;cA=new a.Array(cy);for(cB=0,cC=cy-1;cB<=cC;cB++)cA[cB]=cz(cB);return cA;};I.forall=function(cy,cz){var cA,cB,cC,cD;cA=true;cB=0;cD=I.length(cz);while(cA&&cB<cD)if(cy(cz[cB]))cB=cB+1;else cA=false;return cA;};T.set_AjaxProvider=function(cy){bq.$cctor();bq.AjaxProvider=cy;};T.AjaxProvider=function(){bq.$cctor();return bq.AjaxProvider;};T.makePayload=function(cy){return cv.stringify(cy);};T.makeHeaders=function(cy){return{"content-type":"application/json","x-websharper-rpc":cy};};T.EndPoint=function(){bq.$cctor();return bq.EndPoint;};T.ajax=function(cy,cz,cA,cB,cC,cD,cE){var cF,cG,cH;cF=new a.XMLHttpRequest();cG=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");cF.open("POST",cz,cy);if(cy==true)cF.withCredentials=true;for(var cJ in cA)cF.setRequestHeader(cJ,cA[cJ]);if(cG)cF.setRequestHeader("x-csrftoken",cG);function cI(){var cK;if(cF.status==200)cC(cF.responseText);else if(cE&&cF.status==403&&cF.responseText=="CSRF")cE();else{cK="Response status is not 200: ";cD(new bV(cK+cF.status));}}if("onload"in cF)cF.onload=cF.onerror=cF.onabort=cI;else cF.onreadystatechange=function(){if(cF.readyState==4)cI();};cF.send(cB);};W=V.Var=ct.Class({},l,W);W.New=ct.Ctor(function(){l.New.call(this);},W);Y.GetFields=function(cy){var cz,cA;cz=[];for(var cB in cy)cz.push([cB,cy[cB]]);return cz;};Y.GetFieldValues=function(cy){var cz,cA;cz=[];for(var cB in cy)cz.push(cy[cB]);return cz;};Z.ofArray=function(cy){var cz,cA,cB;cz=_9.Empty;for(cA=I.length(cy)-1,cB=0;cA>=cB;cA--)cz=new _9({$:1,$0:I.get(cy,cA),$1:cz});return cz;};Z.ofSeq=function(cy){var cz,cA,cB,cC,cD,cE;if(cy instanceof _9)return cy;else if(cy instanceof a.Array)return Z.ofArray(cy);else{cz=bj.Get(cy);try{cB=cz.MoveNext();if(!cB)cA=_9.Empty;else{cD=new _9({$:1});cC=cD;while(cB){cC.$0=cz.Current();cz.MoveNext()?cC=(cE=new _9({$:1}),cC.$1=cE,cE):cB=false;}cC.$1=_9.Empty;cA=cD;}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}}};Z.head=function(cy){return cy.$==1?cy.$0:Z.listEmpty();};Z.tail=function(cy){return cy.$==1?cy.$1:Z.listEmpty();};Z.listEmpty=function(){return G.FailWith("The input list was empty.");};_1.newPojo=function(cy){var cz,cA;function cB(cD,cE){return function(cF){return _1.addProp(cD,cE,cF);};}function cC(cD){}cz={};K.iter((cA=function(cD){return(function(cE){return cB(cE[0],cE[1]);}(cD))(cz);},function(cD){return cC(cA(cD));}),cy);return cz;};_1.addProp=function(cy,cz,cA){cA[cy]=cz;return cA;};_4.dlls=function(){bs.$cctor();return bs.dlls;};_5.p=function(cy){return cy.$==4?"WasmWorkerLoaded":cy.$==3?"WasmWorkerLoading":cy.$==2?"WasmLoaded":cy.$==1?"WasmLoading":"WasmNotLoaded";};_5.p$1=function(cy){return cy==null?"null":"Some "+_6.p(cy.$0);};_5.p$2=function(cy){return cy.$==6?"FieldNotFound ("+H.prettyPrint(cy.$0)+", "+H.prettyPrint(cy.$1)+")":cy.$==5?"ConstructorNotFound ("+H.prettyPrint(cy.$0)+", "+H.prettyPrint(cy.$1)+", "+H.printList(H.prettyPrint,cy.$2)+")":cy.$==4?"MethodNameNotFound ("+H.prettyPrint(cy.$0)+", "+H.prettyPrint(cy.$1)+", "+H.printList(H.prettyPrint,cy.$2)+")":cy.$==3?"MethodNotFound ("+H.prettyPrint(cy.$0)+", "+H.prettyPrint(cy.$1)+", "+H.printList(H.prettyPrint,cy.$2)+")":cy.$==2?"TypeNotFound "+H.prettyPrint(cy.$0):cy.$==1?"NameConflict ("+H.prettyPrint(cy.$0)+", "+H.prettyPrint(cy.$1)+")":"SourceError "+H.prettyPrint(cy.$0);};_5.p$3=function(cy){return cy.$==1?"PublicProxy "+H.prettyPrint(cy.$0):"SourceWarning "+H.prettyPrint(cy.$0);};_6.p=function(cy){return"{"+("FileName = "+H.prettyPrint(cy.FileName))+"; "+("Start = "+("("+H.prettyPrint(cy.Start[0])+", "+H.prettyPrint(cy.Start[1])+")"))+"; "+("End = "+("("+H.prettyPrint(cy.End[0])+", "+H.prettyPrint(cy.End[1])+")"))+"}";};_7=V.Doc=ct.Class({},l,_7);_7.get_Empty=function(){return _7.Mk(null,_.Const());};_7.Concat=function(cy){var cz;cz=bt.ofSeqNonCopying(cy);return bt.TreeReduce(_7.get_Empty(),_7.Append,cz);};_7.Element=function(cy,cz,cA){var cB,cC;cB=bv.Concat(cz);cC=_7.Concat(cA);return bO.New(bC.CreateElement(cy),cB,cC);};_7.BindView=function(cy,cz){return _7.EmbedView(_.Map(cy,cz));};_7.Mk=function(cy,cz){return new _7.New(cy,cz);};_7.TextNode=function(cy){return _7.Mk({$:5,$0:bC.CreateText(cy)},_.Const());};_7.Append=function(cy,cz){return _7.Mk({$:0,$0:cy.docNode,$1:cz.docNode},_.Map2Unit(cy.updates,cz.updates));};_7.Button=function(cy,cz,cA){var cB;cB=bv.Concat(cz);return bO.New(_7.Clickable("button",cA),cB,_7.TextNode(cy));};_7.InputArea=function(cy,cz){return _7.InputInternal("textarea",function(){return K.append(cy,[bh.Value(cz)]);});};_7.TextView=function(cy){var cz;cz=bN.CreateTextNode();return _7.Mk({$:4,$0:cz},_.Map(function(cA){bN.UpdateTextNode(cz,cA);},cy));};_7.Run=function(cy,cz){bN.LinkElement(cy,cz.docNode);_7.RunInPlace(false,cy,cz);};_7.Input=function(cy,cz){return _7.InputInternal("input",function(){return K.append(cy,[bh.Value(cz)]);});};_7.EmbedView=function(cy){var cz;cz=bN.CreateEmbedNode();return _7.Mk({$:2,$0:cz},_.Map(a.ignore,_.Bind(function(cA){bN.UpdateEmbedNode(cz,cA.docNode);return cA.updates;},cy)));};_7.Clickable=function(cy,cz){var cA;cA=bC.CreateElement(cy);cA.addEventListener("click",function(cB){cB.preventDefault();return cz();},false);return cA;};_7.InputInternal=function(cy,cz){var cA;cA=bC.CreateElement(cy);return bO.New(cA,bv.Concat(cz(cA)),_7.get_Empty());};_7.RunInPlace=function(cy,cz,cA){var cB;cB=bN.CreateRunState(cz,cA.docNode);_.Sink(bZ.get_UseAnimations()||b0.BatchUpdatesEnabled()?b1.StartProcessor(bN.PerformAnimatedUpdate(cy,cB,cA.docNode)):function(){bN.PerformSyncUpdate(cy,cB,cA.docNode);},cA.updates);};_7.ConvertSeqBy=function(cy,cz,cA){return _7.Flatten(_.MapSeqCachedViewBy(cy,function(cB,cC){return(cz(cB))(cC);},cA));};_7.Flatten=function(cy){return _7.EmbedView(_.Map(_7.Concat,cy));};_7.New=ct.Ctor(function(cy,cz){l.New.call(this);this.docNode=cy;this.updates=cz;},_7);_8=T.AjaxRemotingProvider=ct.Class({AsyncBase:function(cy,cz){var cA,cB;cA=this;cB=null;return br.Delay(function(){var cC,cD;cC=T.makeHeaders(cy);cD=T.makePayload(cz);return br.Bind(br.GetCT(),function(cE){return br.FromContinuations(function(cF,cG,cH){var cI,cJ,cK;function cL(cM){return cI[0]?(cI[0]=false,cH(new bW.New(cE))):null;}cI=[true];cJ=br.Register(cE,function(){cL();});cK=cA.get_EndPoint();return T.AjaxProvider().Async(cK,cC,cD,function(cM){if(cI[0]){cI[0]=false;cJ.Dispose();cF(b4.Activate(cv.parse(cM)));}},function(cM){if(cI[0]){cI[0]=false;cJ.Dispose();cG(cM);}});});});});},get_EndPoint:function(){return T.EndPoint();},Async:function(cy,cz){return this.AsyncBase(cy,cz);}},l,_8);_8.New=ct.Ctor(function(){l.New.call(this);},_8);_9=Z.T=ct.Class({GetEnumerator:function(){return new bk.New(this,null,function(cy){var cz;cz=cy.s;return cz.$==0?false:(cy.c=cz.$0,cy.s=cz.$1,true);},void 0);},GetEnumerator0:function(){return bj.Get(this);}},null,_9);_9.Empty=new _9({$:0});_.Map=function(cy,cz){return _.CreateLazy(function(){return bu.Map(cy,cz());});};_.get_Do=function(){return bi.B;};_.Sink=function(cy,cz){function cA(){bu.WhenRun(cz(),cy,function(){br.scheduler().Fork(cA);});}br.scheduler().Fork(cA);};_.Const=function(cy){var cz;cz=bu.New({$:0,$0:cy});return function(){return cz;};};_.CreateLazy=function(cy){var cz;cz={c:null,o:cy};return function(){var cA,cB;cA=cz.c;return cA===null?(cA=cz.o(),cz.c=cA,(cB=cA.s,cB!=null&&cB.$==0)?cz.o=null:bu.WhenObsoleteRun(cA,function(){cz.c=null;}),cA):cA;};};_.Bind=function(cy,cz){return _.Join(_.Map(cy,cz));};_.Map2Unit=function(cy,cz){return _.CreateLazy(function(){return bu.Map2Unit(cy(),cz());});};_.Join=function(cy){return _.CreateLazy(function(){return bu.Join(cy());});};_.MapSeqCachedViewBy=function(cy,cz,cA){var cB;cB=[new S.New$5()];return _.Map(function(cC){var cD,cE,cF;cD=cB[0];cE=new S.New$5();cF=bt.mapInPlace(function(cG){var cH,cI,cJ;cH=cy(cG);cI=cD.ContainsKey(cH)?(cJ=cD.get_Item(cH),(bo.Set(cJ.r,cG),cJ)):_.ConvertSeqNode(function(cK){return cz(cH,cK);},cG);cE.set_Item(cH,cI);return cI.e;},I.ofSeq(cC));cB[0]=cE;return cF;},cA);};_.ConvertSeqNode=function(cy,cz){var cA,cB;cA=bo.Create$1(cz);cB=cA.get_View();return{e:cy(cB),r:cA,w:cB};};ba=$.attr=ct.Class({},l,ba);bc=V.ListModel=ct.Class({TryFind:function(cy){return I.tryFind(cy,this["var"].Get());},Set:function(cy){this["var"].Set(this.storage.SSet(cy));this.ObsoleteAll();},TryFindByKeyAsView:function(cy){var cz;cz=this;return function(){var cA,cB,cC;cA=(cB=null,[cz.it.TryGetValue(cy,{get:function(){return cB;},set:function(cD){cB=cD;}}),cB]);return cA[0]?cA[1]:(cC=bu.New({$:2,$0:cz.TryFindByKey(cy),$1:[]}),(cz.it.Add(cy,cC),cC));};},ObsoleteAll:function(){K.iter(function(cy){bu.Obsolete(cy.V);},this.it);this.it.Clear();},TryFindByKey:function(cy){var cz;cz=this;return I.tryFind(function(cA){return Q.Equals(cz.key(cA),cy);},this["var"].Get());},GetEnumerator:function(){return bj.Get(this["var"].Get());},GetEnumerator0:function(){return bj.Get0(this["var"].Get());}},l,bc);bc.New=ct.Ctor(function(cy,cz){bc.New$3.call(this,cy,bo.Create$1(I.ofSeq(K.distinctBy(cy,cz.SInit()))),cz);},bc);bc.New$3=ct.Ctor(function(cy,cz,cA){l.New.call(this);this.key=cy;this["var"]=cz;this.storage=cA;this.v=_.Map(function(cB){return cB.slice();},this["var"].get_View());this.it=new S.New$5();},bc);bg.asyncReadTextAtRuntime=function(cy,cz,cA,cB,cC,cD){function cE(cF,cG){var cH,cI,cJ,cK,cL;cH=(cI=cD.toLowerCase(),L.StartsWith(cI,"jsonp|")?[cD.substring(6),true]:L.StartsWith(cI,"json|")?[cD.substring(5),false]:[cD,false]);cJ=(cK={},cK.dataType="json",cK.success=function(cM){return cF(cM);},cK.error=function(cM,cN,cO){return cG(new bV(cO));},cK);cH[1]?(cL=bB.randomFunctionName(),cJ.dataType="jsonp",cJ.jsonp="prefix",cJ.jsonpCallback="jsonp"+cL):void 0;cw.ajax(cH[0],cJ);}return br.FromContinuations(function(cF,cG,cH){return cE.apply(null,[cF,cG,cH]);});};bh.Class=function(cy){return bh.ClassPred(cy,true);};bh.ClassPred=function(cy,cz){return bM.Static(function(cA){if(cz)bC.AddClass(cA,cy);else bC.RemoveClass(cA,cy);});};bh.Value=function(cy){function cz(cA){return{$:1,$0:cA};}return bh.CustomValue(cy,a.id,function(cA){return cz(a.id(cA));});};bh.CustomValue=function(cy,cz,cA){return bh.CustomVar(cy,function(cB,cC){cB.value=cz(cC);},function(cB){return cA(cB.value);});};bh.CustomVar=function(cy,cz,cA){function cB(cD,cE){return cy.UpdateMaybe(function(cF){var cG,cH;cG=cA(cD);return cG!=null&&cG.$==1&&(!Q.Equals(cG.$0,cF)&&(cH=[cG,cG.$0],true))?cH[0]:null;});}function cC(cD,cE){var cF,cG;cF=cA(cD);return cF!=null&&cF.$==1&&(Q.Equals(cF.$0,cE)&&(cG=cF.$0,true))?null:cz(cD,cE);}return bv.Concat([bh.Handler("change",function(cD){return function(cE){return cB(cD,cE);};}),bh.Handler("input",function(cD){return function(cE){return cB(cD,cE);};}),bh.Handler("keypress",function(cD){return function(cE){return cB(cD,cE);};}),bh.DynamicCustom(function(cD){return function(cE){return cC(cD,cE);};},cy.get_View())]);};bh.Handler=function(cy,cz){return bM.Static(function(cA){cA.addEventListener(cy,function(cB){return(cz(cA))(cB);},false);});};bh.DynamicCustom=function(cy,cz){return bM.Dynamic(cz,cy);};bi.B={$:0};bj.Get=function(cy){return cy instanceof a.Array?bj.ArrayEnumerator(cy):Q.Equals(typeof cy,"string")?bj.StringEnumerator(cy):cy.GetEnumerator();};bj.ArrayEnumerator=function(cy){return new bk.New(0,null,function(cz){var cA;cA=cz.s;return cA<I.length(cy)&&(cz.c=I.get(cy,cA),cz.s=cA+1,true);},void 0);};bj.StringEnumerator=function(cy){return new bk.New(0,null,function(cz){var cA;cA=cz.s;return cA<cy.length&&(cz.c=cy[cA],cz.s=cA+1,true);},void 0);};bj.Get0=function(cy){return cy instanceof a.Array?bj.ArrayEnumerator(cy):Q.Equals(typeof cy,"string")?bj.StringEnumerator(cy):"GetEnumerator0"in cy?cy.GetEnumerator0():cy.GetEnumerator();};bk=bj.T=ct.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},l,bk);bk.New=ct.Ctor(function(cy,cz,cA,cB){l.New.call(this);this.s=cy;this.c=cz;this.n=cA;this.d=cB;},bk);bl.TryParseInt32=function(cy,cz){return bl.TryParse(cy,-2147483648,2147483647,cz);};bl.TryParseInt64=function(cy,cz){return bl.TryParse(cy,-9223372036854775808,9223372036854775807,cz);};bn.TryParse=function(cy,cz){try{cz.set(bn.Parse(cy));return true;}catch(cA){return false;}};bn.Parse=function(cy){var cz,cA,cB;try{return bn.ParseExact(cy,"D");}catch(cC){try{cz=bn.ParseExact(cy,"B");}catch(cD){try{cA=bn.ParseExact(cy,"P");}catch(cE){try{cB=bn.ParseExact(cy,"N");}catch(cF){cB=bn.ParseExact(cy,"X");}cA=cB;}cz=cA;}return cz;}};bn.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cy){var cz,cA;cz=cx.random()*16|0;cA=cy=="x"?cz:cz&3|8;return cA.toString(16);});};bn.ParseExact=function(cy,cz){var cA,cB,cC,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;function cD(cO){var cP,cQ,cR,cS;for(cP=0,cQ=35;cP<=cQ;cP++){cP===8||(cP===13||(cP===18||cP===23))?cO[cP]!=="-"?bn.ShapeError():void 0:(cS=cO[cP],!("0"<=cS&&cS<="9"||"a"<=cS&&cS<="f")?bn.ShapeError():void 0);}return cO;}cE=cz.toUpperCase();if(cE==="N"){cF=L.Trim(cy).toLowerCase();if(cF.length!==32)bn.ShapeError();for(cG=0,cH=31;cG<=cH;cG++){cI=cF[cG];!("0"<=cI&&cI<="9"||"a"<=cI&&cI<="f")?bn.ShapeError():void 0;}return L.Substring(cF,0,8)+"-"+L.Substring(cF,8,4)+"-"+L.Substring(cF,12,4)+"-"+L.Substring(cF,16,4)+"-"+cF.substring(20);}else if(cE==="D"){cA=L.Trim(cy).toLowerCase();cA.length!==36?bn.ShapeError():void 0;return cD(cA);}else if(cE==="B"){cB=L.Trim(cy).toLowerCase();cB.length!==38||cB[0]!=="{"||cB[17]!=="}"?bn.ShapeError():void 0;return cD(L.Substring(cB,1,36));}else if(cE==="P"){cC=L.Trim(cy).toLowerCase();cC.length!==38||cC[0]!=="("||cC[17]!==")"?bn.ShapeError():void 0;return cD(L.Substring(cC,1,36));}else if(cE==="X"){cJ=L.Trim(cy).toLowerCase();if(cJ.length!==68)bn.ShapeError();for(cK=0,cL=67;cK<=cL;cK++){switch(cK){case 26:case 0:if(cJ[cK]!=="{")bn.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cJ[cK]!=="0")bn.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cJ[cK]!=="x")bn.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cJ[cK]!==",")bn.ShapeError();break;case 67:case 66:if(cJ[cK]!=="{")bn.ShapeError();break;default:cN=cJ[cK];!("0"<=cN&&cN<="9"||"a"<=cN&&cN<="f")?bn.ShapeError():void 0;break;}}return L.Substring(cJ,3,8)+"-"+L.Substring(cJ,14,4)+"-"+L.Substring(cJ,21,4)+"-"+L.Substring(cJ,29,2)+L.Substring(cJ,34,2)+"-"+L.Substring(cJ,39,2)+L.Substring(cJ,44,2)+L.Substring(cJ,49,2)+L.Substring(cJ,54,2)+L.Substring(cJ,59,2)+L.Substring(cJ,64,2);}else return bn.FormatError();};bn.ShapeError=function(){throw new cd.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bn.FormatError=function(){throw new cd.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bo=V.Var$1=ct.Class({},l,bo);bo.Create$1=function(cy){return new bE.New(false,bu.New({$:2,$0:cy,$1:[]}),cy);};bo.Set=function(cy,cz){cy.Set(cz);};bc.Create=function(cy,cz){return bc.CreateWithStorage(cy,bG.InMemory(I.ofSeq(cz)));};bc.CreateWithStorage=function(cy,cz){return new bc.New(cy,cz);};_=V.View=ct.Class({},null,_);K.tryHead=function(cy){var cz;cz=bj.Get(cy);try{return cz.MoveNext()?{$:1,$0:cz.Current()}:null;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};K.last=function(cy){var cz,cA;cz=bj.Get(cy);try{if(!cz.MoveNext())cA=K.insufficient();else{while(cz.MoveNext());cA=cz.Current();}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};I.mapFold=function(cy,cz,cA){var cB,cC,cD,cE,cF;cC=new a.Array(cA.length);cB=cz;for(cD=0,cE=cA.length-1;cD<=cE;cD++){cF=cy(cB,cA[cD]);cC[cD]=cF[0];cB=cF[1];}return[cC,cB];};K.insufficient=function(){return G.FailWith("The input sequence has an insufficient number of elements.");};K.nonNegative=function(){return G.FailWith("The input must be non-negative.");};bq.$cctor=function(){bq.$cctor=a.ignore;bq.EndPoint="?";bq.AjaxProvider=new bH.New();};br.FromContinuations=function(cy){return function(cz){var cA;function cB(cC){if(cA[0])G.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cA[0]=true;br.scheduler().Fork(cC);}}cA=[false];cy(function(cC){cB(function(){cz.k({$:0,$0:cC});});},function(cC){cB(function(){cz.k({$:1,$0:cC});});},function(cC){cB(function(){cz.k({$:2,$0:cC});});});};};br.Delay=function(cy){return function(cz){try{(cy(null))(cz);}catch(cA){cz.k({$:1,$0:cA});}};};br.Bind=function(cy,cz){return br.checkCancel(function(cA){cy(bI.New(function(cB){var cC;if(cB.$==0){cC=cB.$0;br.scheduler().Fork(function(){try{(cz(cC))(cA);}catch(cD){cA.k({$:1,$0:cD});}});}else br.scheduler().Fork(function(){cA.k(cB);});},cA.ct));});};br.Sleep=function(cy){return function(cz){var cA,cB;cA=void 0;cB=void 0;cA=a.setTimeout(function(){cB.Dispose();br.scheduler().Fork(function(){cz.k({$:0,$0:null});});},cy);cB=br.Register(cz.ct,function(){a.clearTimeout(cA);br.scheduler().Fork(function(){br.cancel(cz);});});};};br.Combine=function(cy,cz){return br.Bind(cy,function(){return cz;});};br.Zero=function(){bK.$cctor();return bK.Zero;};br.Start=function(cy,cz){var cA,cB;cA=(cB=(br.defCTS())[0],cz==null?cB:cz.$0);br.scheduler().Fork(function(){if(!cA.c)cy(bI.New(function(cC){if(cC.$==1)br.UncaughtAsyncError(cC.$0);},cA));});};br.While=function(cy,cz){return cy()?br.Bind(cz,function(){return br.While(cy,cz);}):br.Return();};br.Return=function(cy){return function(cz){cz.k({$:0,$0:cy});};};br.For=function(cy,cz){return br.Using(bj.Get(cy),function(cA){return br.While(function(){return cA.MoveNext();},br.Delay(function(){return cz(cA.Current());}));});};br.checkCancel=function(cy){return function(cz){if(cz.ct.c)br.cancel(cz);else cy(cz);};};br.Register=function(cy,cz){var cA;return cy===br.noneCT()?{Dispose:function(){return null;}}:(cA=cy.r.push(cz)-1,{Dispose:function(){return I.set(cy.r,cA,a.ignore);}});};br.cancel=function(cy){cy.k({$:2,$0:new bW.New(cy.ct)});};br.defCTS=function(){bK.$cctor();return bK.defCTS;};br.UncaughtAsyncError=function(cy){cr.log("WebSharper: Uncaught asynchronous exception",cy);};br.Using=function(cy,cz){return br.TryFinally(cz(cy),function(){cy.Dispose();});};br.scheduler=function(){bK.$cctor();return bK.scheduler;};br.noneCT=function(){bK.$cctor();return bK.noneCT;};br.TryFinally=function(cy,cz){return function(cA){cy(bI.New(function(cB){try{cz();cA.k(cB);}catch(cC){cA.k({$:1,$0:cC});}},cA.ct));};};br.GetCT=function(){bK.$cctor();return bK.GetCT;};br.TryWith=function(cy,cz){return function(cA){cy(bI.New(function(cB){if(cB.$==0)cA.k({$:0,$0:cB.$0});else if(cB.$==1)try{(cz(cB.$0))(cA);}catch(cC){cA.k(cB);}else cA.k(cB);},cA.ct));};};bs.$cctor=function(){bs.$cctor=a.ignore;bs.dlls=["/dlls/WebSharper.Main.dll","/dlls/WebSharper.Collections.dll","/dlls/WebSharper.Control.dll","/dlls/WebSharper.Web.dll","/dlls/WebSharper.Sitelets.dll","/dlls/WebSharper.UI.dll","/dlls/WebSharper.UI.Templating.Runtime.dll","/dlls/WebSharper.Data.dll"];};bt.ofSeqNonCopying=function(cy){var cz,cA;if(cy instanceof a.Array)return cy;else if(cy instanceof _9)return I.ofList(cy);else if(cy===null)return[];else{cz=[];cA=bj.Get(cy);try{while(cA.MoveNext())cz.push(cA.Current());return cz;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}}};bt.TreeReduce=function(cy,cz,cA){var cB;function cC(cD,cE){var cF,cG;return cE<=0?cy:cE===1&&(cD>=0&&cD<cB)?I.get(cA,cD):(cG=cE/2>>0,cz(cC(cD,cG),cC(cD+cG,cE-cG)));}cB=I.length(cA);return cC(0,cB);};bt.MapTreeReduce=function(cy,cz,cA,cB){var cC;function cD(cE,cF){var cG,cH;return cF<=0?cz:cF===1&&(cE>=0&&cE<cC)?cy(I.get(cB,cE)):(cH=cF/2>>0,cA(cD(cE,cH),cD(cE+cH,cF-cH)));}cC=I.length(cB);return cD(0,cC);};bt.mapInPlace=function(cy,cz){var cA,cB;for(cA=0,cB=cz.length-1;cA<=cB;cA++)cz[cA]=cy(cz[cA]);return cz;};bu.Map=function(cy,cz){var cA,cB;cA=cz.s;return cA!=null&&cA.$==0?bu.New({$:0,$0:cy(cA.$0)}):(cB=bu.New({$:3,$0:[],$1:[]}),(bu.When(cz,function(cC){bu.MarkDone(cB,cz,cy(cC));},cB),cB));};bu.WhenRun=function(cy,cz,cA){var cB;cB=cy.s;cB==null?cA():cB!=null&&cB.$==2?(cB.$1.push(cA),cz(cB.$0)):cB!=null&&cB.$==3?(cB.$0.push(cz),cB.$1.push(cA)):cz(cB.$0);};bu.WhenObsoleteRun=function(cy,cz){var cA;cA=cy.s;cA==null?cz():cA!=null&&cA.$==2?cA.$1.push(cz):cA!=null&&cA.$==3?cA.$1.push(cz):void 0;};bu.When=function(cy,cz,cA){var cB;cB=cy.s;cB==null?bu.Obsolete(cA):cB!=null&&cB.$==2?(bu.EnqueueSafe(cB.$1,cA),cz(cB.$0)):cB!=null&&cB.$==3?(cB.$0.push(cz),bu.EnqueueSafe(cB.$1,cA)):cz(cB.$0);};bu.MarkDone=function(cy,cz,cA){var cB;if(cB=cz.s,cB!=null&&cB.$==0)bu.MarkForever(cy,cA);else bu.MarkReady(cy,cA);};bu.Map2Unit=function(cy,cz){var cA,cB,cC;function cD(){var cE,cF,cG;if(!(cE=cC.s,cE!=null&&cE.$==0||cE!=null&&cE.$==2)){cF=bu.ValueAndForever(cy);cG=bu.ValueAndForever(cz);cF!=null&&cF.$==1?cG!=null&&cG.$==1?cF.$0[1]&&cG.$0[1]?bu.MarkForever(cC,null):bu.MarkReady(cC,null):void 0:void 0;}}cA=cy.s;cB=cz.s;return cA!=null&&cA.$==0?cB!=null&&cB.$==0?bu.New({$:0,$0:null}):cz:cB!=null&&cB.$==0?cy:(cC=bu.New({$:3,$0:[],$1:[]}),(bu.When(cy,cD,cC),bu.When(cz,cD,cC),cC));};bu.EnqueueSafe=function(cy,cz){var cA,cB,cC,cD;cy.push(cz);if(cy.length%20===0){cA=cy.slice(0);cf.Clear(cy);for(cB=0,cC=I.length(cA)-1;cB<=cC;cB++){cD=I.get(cA,cB);typeof cD=="object"?function(cE){if(cE.s)cy.push(cE);}(cD):function(cE){cy.push(cE);}(cD);}}else void 0;};bu.MarkForever=function(cy,cz){var cA,cB,cC,cD;cA=cy.s;if(cA!=null&&cA.$==3){cy.s={$:0,$0:cz};cB=cA.$0;for(cC=0,cD=I.length(cB)-1;cC<=cD;cC++)(I.get(cB,cC))(cz);}else void 0;};bu.MarkReady=function(cy,cz){var cA,cB,cC,cD;cA=cy.s;if(cA!=null&&cA.$==3){cy.s={$:2,$0:cz,$1:cA.$1};cB=cA.$0;for(cC=0,cD=I.length(cB)-1;cC<=cD;cC++)(I.get(cB,cC))(cz);}else void 0;};bu.Join=function(cy){var cz;cz=bu.New({$:3,$0:[],$1:[]});bu.When(cy,function(cA){var cB;cB=cA();bu.When(cB,function(cC){var cD,cE;if((cD=cB.s,cD!=null&&cD.$==0)&&(cE=cy.s,cE!=null&&cE.$==0))bu.MarkForever(cz,cC);else bu.MarkReady(cz,cC);},cz);},cz);return cz;};bu.ValueAndForever=function(cy){var cz;cz=cy.s;return cz!=null&&cz.$==0?{$:1,$0:[cz.$0,true]}:cz!=null&&cz.$==2?{$:1,$0:[cz.$0,false]}:null;};bu.Copy=function(cy){var cz,cA,cB;cz=cy.s;return cz==null?cy:cz!=null&&cz.$==2?(cA=bu.New({$:2,$0:cz.$0,$1:[]}),(bu.WhenObsolete(cy,cA),cA)):cz!=null&&cz.$==3?(cB=bu.New({$:3,$0:[],$1:[]}),(bu.When(cy,function(cC){bu.MarkDone(cB,cy,cC);},cB),cB)):cy;};bu.WhenObsolete=function(cy,cz){var cA;cA=cy.s;cA==null?bu.Obsolete(cz):cA!=null&&cA.$==2?bu.EnqueueSafe(cA.$1,cz):cA!=null&&cA.$==3?bu.EnqueueSafe(cA.$1,cz):void 0;};bv=V.AttrProxy=ct.Class({},null,bv);bv.Create=function(cy,cz){return bM.Static(function(cA){bC.SetAttr(cA,cy,cz);});};bv.HandlerImpl=function(cy,cz){return bM.Static(function(cA){cA.addEventListener(cy,function(cB){return(cz(cA))(cB);},false);});};bv.Concat=function(cy){var cz;cz=bt.ofSeqNonCopying(cy);return bt.TreeReduce(bM.EmptyAttr(),bv.Append,cz);};bv.Append=function(cy,cz){return bM.AppendTree(cy,cz);};bx.LoadLocalTemplates=function(cy){!bx.LocalTemplatesLoaded()?(bx.set_LocalTemplatesLoaded(true),bx.LoadNestedTemplates(self.document.body,"")):void 0;bx.LoadedTemplates().set_Item(cy,bx.LoadedTemplateFile(""));};bx.LocalTemplatesLoaded=function(){bY.$cctor();return bY.LocalTemplatesLoaded;};bx.set_LocalTemplatesLoaded=function(cy){bY.$cctor();bY.LocalTemplatesLoaded=cy;};bx.LoadNestedTemplates=function(cy,cz){var cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;function cA(cP){var cQ,cR;if(!cB.ContainsKey(cP)){cQ=(cR=null,[cC.TryGetValue(cP,{get:function(){return cR;},set:function(cS){cR=cS;}}),cR]);cQ[0]?(cO.Add(cP),cC.Remove(cP),bx.PrepareTemplateStrict(cz,{$:1,$0:cP},cQ[1][0],{$:1,$0:cQ[1][1]},{$:1,$0:cA})):cr.warn(cO.Contains(cP)?"Encountered loop when instantiating "+cP:"Local template does not exist: "+cP);}}cB=bx.LoadedTemplateFile(cz);cC=new S.New$5();cD=cy.querySelectorAll("[ws-template]");for(cE=0,cF=cD.length-1;cE<=cF;cE++){cG=cD[cE];cH=cG.getAttribute("ws-template").toLowerCase();cG.removeAttribute("ws-template");cC.set_Item(cH,[[cG],bx.FakeRootSingle(cG)]);}cI=cy.querySelectorAll("[ws-children-template]");for(cJ=0,cK=cI.length-1;cJ<=cK;cJ++){cL=cI[cJ];cM=cL.getAttribute("ws-children-template").toLowerCase();cL.removeAttribute("ws-children-template");cC.set_Item(cM,(cN=bC.ChildrenArray(cL),[cN,bx.FakeRoot(cN)]));}cO=new bJ.New$3();while(cC.count>0)cA(K.head(cC.get_Keys()));};bx.LoadedTemplates=function(){bY.$cctor();return bY.LoadedTemplates;};bx.LoadedTemplateFile=function(cy){var cz,cA,cB;cz=(cA=null,[bx.LoadedTemplates().TryGetValue(cy,{get:function(){return cA;},set:function(cC){cA=cC;}}),cA]);return cz[0]?cz[1]:(cB=new S.New$5(),(bx.LoadedTemplates().set_Item(cy,cB),cB));};bx.FakeRootSingle=function(cy){var cz,cA,cB;cy.removeAttribute("ws-template");cz=cy.getAttribute("ws-replace");cz===null?void 0:(cy.removeAttribute("ws-replace"),cA=cy.parentNode,Q.Equals(cA,null)?void 0:(cB=self.document.createElement(cy.tagName),cB.setAttribute("ws-replace",cz),cA.replaceChild(cB,cy)));return bx.FakeRoot([cy]);};bx.FakeRoot=function(cy){var cz,cA,cB;cz=self.document.createElement("div");for(cA=0,cB=cy.length-1;cA<=cB;cA++)cz.appendChild(I.get(cy,cA));return cz;};bx.PrepareTemplateStrict=function(cy,cz,cA,cB,cC){var cD,cE;function cF(cK,cL){var cM,cN,cO,cP,cQ,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da;function cR(db){}while(true)switch(cK){case 0:if(cL!==null){cM=cL.nextSibling;if(Q.Equals(cL.nodeType,bb.TEXT_NODE))b7.convertTextNode(cL);else if(Q.Equals(cL.nodeType,bb.ELEMENT_NODE))cH(cL);cL=cM;}else return null;break;case 1:cS=J.string(cL.nodeName,{$:1,$0:3},null).toLowerCase();cT=(cN=cS.indexOf("."),cN===-1?[cy,cS]:[J.string(cS,null,{$:1,$0:cN-1}),J.string(cS,{$:1,$0:cN+1},null)]);cU=cT[1];cV=cT[0];if(cV!==""&&!bx.LoadedTemplates().ContainsKey(cV))return b7.failNotLoaded(cU);else{if(cV===""&&cC!=null)cC.$0(cU);cW=bx.LoadedTemplates().get_Item(cV);if(!cW.ContainsKey(cU))return b7.failNotLoaded(cU);else{cX=cW.get_Item(cU);cY=cX.cloneNode(true);cZ=new bJ.New$3();c0=new S.New$5();c1=cL.attributes;for(c2=0,c3=c1.length-1;c2<=c3;c2++){c4=c1.item(c2).name.toLowerCase();c0.set_Item(c4,(c5=c1.item(c2).nodeValue,c5===""?c4:c5.toLowerCase()));!cZ.Add(c4)?cr.warn("Hole mapped twice",c4):void 0;}for(c6=0,c7=cL.childNodes.length-1;c6<=c7;c6++){c8=cL.childNodes[c6];Q.Equals(c8.nodeType,bb.ELEMENT_NODE)?!cZ.Add(c8.nodeName.toLowerCase())?cr.warn("Hole filled twice",cU):void 0:void 0;}c9=cL.childNodes.length===1&&Q.Equals(cL.firstChild.nodeType,bb.TEXT_NODE);if(c9){cP=b7.fillTextHole(cY,cL.firstChild.textContent,cU);((function(db){return function(dc){if(dc!=null)db(dc.$0);};}((cQ=function(db){return function(dc){return db.Add(dc);};}(cZ),function(db){return cR(cQ(db));})))(cP));}b7.removeHolesExcept(cY,cZ);if(!c9){for(c_=0,c$=cL.childNodes.length-1;c_<=c$;c_++){da=cL.childNodes[c_];Q.Equals(da.nodeType,bb.ELEMENT_NODE)?da.hasAttributes()?b7.fillInstanceAttrs(cY,da):cG(cY,da):void 0;}}b7.mapHoles(cY,c0);b7.fill(cY,cL.parentNode,cL);cL.parentNode.removeChild(cL);return;}}break;}}function cG(cK,cL){var cM,cO,cP;function cN(cQ,cR){var cS,cT,cU;if(cO==="title"&&cL.hasChildNodes()){cS=cw.parseHTML(cL.textContent);cL.removeChild(cL.firstChild);for(cT=0,cU=cS.length-1;cT<=cU;cT++)cL.appendChild(I.get(cS,cT));}else null;cH(cL);return b7.fill(cL,cQ,cR);}cO=cL.nodeName.toLowerCase();bC.IterSelector(cK,"[ws-attr-holes]",function(cQ){var cR,cS,cT,cU,cV;cR=L.SplitChars(cQ.getAttribute("ws-attr-holes"),[" "],1);for(cS=0,cT=cR.length-1;cS<=cT;cS++){cU=I.get(cR,cS);cQ.setAttribute(cU,(cV=new a.RegExp("\\${"+cO+"}","ig"),cQ.getAttribute(cU).replace(cV,cL.textContent)));}});cP=cK.querySelector("[ws-hole="+cO+"]");if(Q.Equals(cP,null)){cM=cK.querySelector("[ws-replace="+cO+"]");return Q.Equals(cM,null)?null:(cN(cM.parentNode,cM),void cM.parentNode.removeChild(cM));}else{while(cP.hasChildNodes())cP.removeChild(cP.lastChild);cP.removeAttribute("ws-hole");return cN(cP,null);}}function cH(cK){if(L.StartsWith(cK.nodeName.toLowerCase(),"ws-"))cJ(cK);else{b7.convertAttrs(cK);cI(cK.firstChild);}}function cI(cK){return cF(0,cK);}function cJ(cK){return cF(1,cK);}cD=cB==null?bx.FakeRoot(cA):cB.$0;cE=(cz==null?"":cz.$0).toLowerCase();bx.LoadedTemplateFile(cy).set_Item(cE,cD);I.length(cA)>0?(function(cK){var cL,cM,cN,cO;while(true){cL=cK.querySelector("[ws-template]");if(Q.Equals(cL,null)){cM=cK.querySelector("[ws-children-template]");if(Q.Equals(cM,null))return null;else{cN=cM.getAttribute("ws-children-template");cM.removeAttribute("ws-children-template");bx.PrepareTemplateStrict(cy,{$:1,$0:cN},bC.ChildrenArray(cM),null,null);cK=cK;}}else{cO=cL.getAttribute("ws-template");(bx.PrepareSingleTemplate(cy,{$:1,$0:cO},cL))(null);cK=cK;}}}(cD),cI(I.get(cA,0))):void 0;};bx.PrepareSingleTemplate=function(cy,cz,cA){var cB,cC,cD;cB=bx.FakeRootSingle(cA);cC=[cA];cD={$:1,$0:cB};return function(cE){bx.PrepareTemplateStrict(cy,cz,cC,cD,cE);};};bx.TextHoleRE=function(){bY.$cctor();return bY.TextHoleRE;};bA.AsyncMap=function(cy,cz){var cA;cA=null;return br.Delay(function(){return br.Bind(cy,function(cB){return br.Return(cz(cB));});});};bB.randomFunctionName=function(){var cy;return L.ReplaceChar((cy=bn.NewGuid(),a.String(cy)).toLowerCase(),"-","_");};bC.CreateElement=function(cy){return bC.Doc().createElement(cy);};bC.CreateText=function(cy){return bC.Doc().createTextNode(cy);};bC.SetAttr=function(cy,cz,cA){cy.setAttribute(cz,cA);};bC.Doc=function(){b3.$cctor();return b3.Doc;};bC.AddClass=function(cy,cz){var cA;cA=bC.getClass(cy);cA===""?bC.setClass(cy,cz):!bC.clsRE(cz).test(cA)?bC.setClass(cy,cA+" "+cz):void 0;};bC.RemoveClass=function(cy,cz){var cA;bC.setClass(cy,(cA=bC.clsRE(cz),bC.getClass(cy).replace(cA,function(cB,cC,cD){return cC===""||cD===""?"":" ";})));};bC.ChildrenArray=function(cy){var cz,cA,cB;cz=[];for(cA=0,cB=cy.childNodes.length-1;cA<=cB;cA++)cz.push(cy.childNodes[cA]);return cz;};bC.getClass=function(cy){return cy instanceof a.SVGElement?cy.getAttribute("class"):cy.className;};bC.setClass=function(cy,cz){if(cy instanceof a.SVGElement)cy.setAttribute("class",cz);else cy.className=cz;};bC.clsRE=function(cy){return new a.RegExp("(\\s+|^)"+cy+"(?:\\s+"+cy+")*(\\s+|$)","g");};bC.IterSelector=function(cy,cz,cA){var cB,cC,cD;cB=cy.querySelectorAll(cz);for(cC=0,cD=cB.length-1;cC<=cD;cC++)cA(cB[cC]);};bC.InsertAt=function(cy,cz,cA){var cB;if(!(cA.parentNode===cy&&cz===(cB=cA.nextSibling,Q.Equals(cB,null)?null:cB)))cy.insertBefore(cA,cz);};bC.RemoveNode=function(cy,cz){if(cz.parentNode===cy)cy.removeChild(cz);};bD.TryParse=function(cy){var cz;cz=cu.parse(cy);return a.isNaN(cz)?null:{$:1,$0:cz};};bl.TryParse=function(cy,cz,cA,cB){var cC,cD;cC=+cy;cD=cC===cC-cC%1&&cC>=cz&&cC<=cA;cD?cB.set(cC):void 0;return cD;};bE=V.ConcreteVar=ct.Class({Set:function(cy){if(this.isConst)(function(cz){return cz("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cz){cr.log(cz);}));else{bu.Obsolete(this.snap);this.current=cy;this.snap=bu.New({$:2,$0:cy,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(cy){var cz;cz=cy(this.Get());cz!=null&&cz.$==1?this.Set(cz.$0):void 0;}},W,bE);bE.New=ct.Ctor(function(cy,cz,cA){var cB;cB=this;W.New.call(this);this.isConst=cy;this.current=cA;this.snap=cz;this.view=function(){return cB.snap;};this.id=bQ.Int();},bE);bF.alreadyAdded=function(){return G.FailWith("An item with the same key has already been added.");};bF.notPresent=function(){return G.FailWith("The given key was not present in the dictionary.");};bG.InMemory=function(cy){return new bR.New(cy);};bH=T.XhrProvider=ct.Class({Async:function(cy,cz,cA,cB,cC){T.ajax(true,cy,cz,cA,cB,cC,function(){T.ajax(true,cy,cz,cA,cB,cC,void 0);});}},l,bH);bH.New=ct.Ctor(function(){l.New.call(this);},bH);bI.New=function(cy,cz){return{k:cy,ct:cz};};bJ=R.HashSet=ct.Class({Add:function(cy){return this.add(cy);},add:function(cy){var cz,cA;cz=this.hash(cy);cA=this.data[cz];return cA==null?(this.data[cz]=[cy],this.count=this.count+1,true):this.arrContains(cy,cA)?false:(cA.push(cy),this.count=this.count+1,true);},Contains:function(cy){var cz;cz=this.data[this.hash(cy)];return cz==null?false:this.arrContains(cy,cz);},arrContains:function(cy,cz){var cA,cB,cC,cD;cA=true;cB=0;cD=cz.length;while(cA&&cB<cD)if(this.equals.apply(null,[cz[cB],cy]))cA=false;else cB=cB+1;return!cA;},ExceptWith:function(cy){var cz;cz=bj.Get(cy);try{while(cz.MoveNext())this.Remove(cz.Current());}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cy){var cz,cA,cB,cC;cz=0;cA=ci.concat(this.data);for(cB=0,cC=cA.length-1;cB<=cC;cB++)I.set(cy,cB,cA[cB]);},IntersectWith:function(cy){var cz,cA,cB,cC,cD;cz=new bJ.New$4(cy,this.equals,this.hash);cA=ci.concat(this.data);for(cB=0,cC=cA.length-1;cB<=cC;cB++){cD=cA[cB];!cz.Contains(cD)?this.Remove(cD):void 0;}},Remove:function(cy){var cz;cz=this.data[this.hash(cy)];return cz==null?false:this.arrRemove(cy,cz)&&(this.count=this.count-1,true);},arrRemove:function(cy,cz){var cA,cB,cC,cD;cA=true;cB=0;cD=cz.length;while(cA&&cB<cD)if(this.equals.apply(null,[cz[cB],cy])){cz.splice.apply(cz,[cB,1]);cA=false;}else cB=cB+1;return!cA;},GetEnumerator:function(){return bj.Get(ci.concat(this.data));},GetEnumerator0:function(){return bj.Get(ci.concat(this.data));}},l,bJ);bJ.New$3=ct.Ctor(function(){bJ.New$4.call(this,[],Q.Equals,Q.Hash);},bJ);bJ.New$4=ct.Ctor(function(cy,cz,cA){var cB;l.New.call(this);this.equals=cz;this.hash=cA;this.data=[];this.count=0;cB=bj.Get(cy);try{while(cB.MoveNext())this.add(cB.Current());}finally{if(typeof cB=="object"&&"Dispose"in cB)cB.Dispose();}},bJ);bJ.New$2=ct.Ctor(function(cy){bJ.New$4.call(this,cy,Q.Equals,Q.Hash);},bJ);bK.$cctor=function(){bK.$cctor=a.ignore;bK.noneCT=bL.New(false,[]);bK.scheduler=new bU.New();bK.defCTS=[new bX.New()];bK.Zero=br.Return();bK.GetCT=function(cy){cy.k({$:0,$0:cy.ct});};};bL.New=function(cy,cz){return{c:cy,r:cz};};bu.Obsolete=function(cy){var cz,cA,cB,cC,cD;cA=cy.s;if(cA==null||(cA!=null&&cA.$==2?(cz=cA.$1,false):cA!=null&&cA.$==3?(cz=cA.$1,false):true))void 0;else{cy.s=null;for(cB=0,cC=I.length(cz)-1;cB<=cC;cB++){cD=I.get(cz,cB);typeof cD=="object"?function(cE){bu.Obsolete(cE);}(cD):cD();}}};bu.New=function(cy){return{s:cy};};bM.Static=function(cy){return new bv({$:3,$0:cy});};bM.Updates=function(cy){return bt.MapTreeReduce(function(cz){return cz.NChanged();},_.Const(),_.Map2Unit,cy.DynNodes);};bM.AppendTree=function(cy,cz){var cA;return cy===null?cz:cz===null?cy:(cA=new bv({$:2,$0:cy,$1:cz}),(bM.SetFlags(cA,bM.Flags(cy)|bM.Flags(cz)),cA));};bM.EmptyAttr=function(){cc.$cctor();return cc.EmptyAttr;};bM.Insert=function(cy,cz){var cA,cB,cC;function cD(cE){if(!(cE===null))if(cE!=null&&cE.$==1)cA.push(cE.$0);else if(cE!=null&&cE.$==2){cD(cE.$0);cD(cE.$1);}else if(cE!=null&&cE.$==3)cE.$0(cy);else if(cE!=null&&cE.$==4)cB.push(cE.$0);}cA=[];cB=[];cD(cz);cC=cA.slice(0);return b6.New(cy,bM.Flags(cz),cC,cB.length===0?null:{$:1,$0:function(cE){K.iter(function(cF){cF(cE);},cB);}});};bM.SetFlags=function(cy,cz){cy.flags=cz;};bM.Flags=function(cy){return cy!==null&&cy.hasOwnProperty("flags")?cy.flags:0;};bM.HasExitAnim=function(cy){var cz;cz=2;return(cy.DynFlags&cz)===cz;};bM.GetExitAnim=function(cy){return bM.GetAnim(cy,function(cz,cA){return cz.NGetExitAnim(cA);});};bM.HasEnterAnim=function(cy){var cz;cz=1;return(cy.DynFlags&cz)===cz;};bM.GetEnterAnim=function(cy){return bM.GetAnim(cy,function(cz,cA){return cz.NGetEnterAnim(cA);});};bM.HasChangeAnim=function(cy){var cz;cz=4;return(cy.DynFlags&cz)===cz;};bM.GetChangeAnim=function(cy){return bM.GetAnim(cy,function(cz,cA){return cz.NGetChangeAnim(cA);});};bM.Dynamic=function(cy,cz){return new bv({$:1,$0:new cl.New(cy,cz)});};bM.GetAnim=function(cy,cz){return bZ.Concat(I.map(function(cA){return cz(cA,cy.DynElem);},cy.DynNodes));};bM.Sync=function(cy,cz){I.iter(function(cA){cA.NSync(cy);},cz.DynNodes);};bN.CreateTextNode=function(){return{Text:bC.CreateText(""),Dirty:false,Value:""};};bN.UpdateTextNode=function(cy,cz){cy.Value=cz;cy.Dirty=true;};bN.LinkElement=function(cy,cz){bN.InsertDoc(cy,cz,null);};bN.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bN.UpdateEmbedNode=function(cy,cz){cy.Current=cz;cy.Dirty=true;};bN.InsertDoc=function(cy,cz,cA){var cB;return cz!=null&&cz.$==1?bN.InsertNode(cy,cz.$0.El,cA):cz!=null&&cz.$==2?(cB=cz.$0,(cB.Dirty=false,bN.InsertDoc(cy,cB.Current,cA))):cz==null?cA:cz!=null&&cz.$==4?bN.InsertNode(cy,cz.$0.Text,cA):cz!=null&&cz.$==5?bN.InsertNode(cy,cz.$0,cA):cz!=null&&cz.$==6?I.foldBack(function(cC,cD){return cC==null||cC.constructor===bp?bN.InsertDoc(cy,cC,cD):bN.InsertNode(cy,cC,cD);},cz.$0.Els,cA):bN.InsertDoc(cy,cz.$0,bN.InsertDoc(cy,cz.$1,cA));};bN.CreateRunState=function(cy,cz){return b_.New(b$.get_Empty(),bN.CreateElemNode(cy,bM.EmptyAttr(),cz));};bN.PerformAnimatedUpdate=function(cy,cz,cA){var cB;return bZ.get_UseAnimations()?(cB=null,br.Delay(function(){var cC,cD,cE;cC=b$.FindAll(cA);cD=bN.ComputeChangeAnim(cz,cC);cE=bN.ComputeEnterAnim(cz,cC);return br.Bind(bZ.Play(bZ.Append(cD,bN.ComputeExitAnim(cz,cC))),function(){return br.Bind(bN.SyncElemNodesNextFrame(cy,cz),function(){return br.Bind(bZ.Play(cE),function(){cz.PreviousNodes=cC;return br.Return(null);});});});})):bN.SyncElemNodesNextFrame(cy,cz);};bN.PerformSyncUpdate=function(cy,cz,cA){var cB;cB=b$.FindAll(cA);bN.SyncElemNode(cy,cz.Top);cz.PreviousNodes=cB;};bN.CreateElemNode=function(cy,cz,cA){var cB;bN.LinkElement(cy,cA);cB=bM.Insert(cy,cz);return bS.New(cB,cA,null,cy,bQ.Int(),ct.GetOptional(cB.OnAfterRender));};bN.InsertNode=function(cy,cz,cA){bC.InsertAt(cy,cA,cz);return cz;};bN.SyncElemNodesNextFrame=function(cy,cz){function cA(cB){a.requestAnimationFrame(function(){bN.SyncElemNode(cy,cz.Top);cB();});}return b0.BatchUpdatesEnabled()?br.FromContinuations(function(cB,cC,cD){return cA.apply(null,[cB,cC,cD]);}):(bN.SyncElemNode(cy,cz.Top),br.Return(null));};bN.ComputeExitAnim=function(cy,cz){return bZ.Concat(I.map(function(cA){return bM.GetExitAnim(cA.Attr);},b$.ToArray(b$.Except(cz,b$.Filter(function(cA){return bM.HasExitAnim(cA.Attr);},cy.PreviousNodes)))));};bN.ComputeEnterAnim=function(cy,cz){return bZ.Concat(I.map(function(cA){return bM.GetEnterAnim(cA.Attr);},b$.ToArray(b$.Except(cy.PreviousNodes,b$.Filter(function(cA){return bM.HasEnterAnim(cA.Attr);},cz)))));};bN.ComputeChangeAnim=function(cy,cz){var cA;function cB(cC){return bM.HasChangeAnim(cC.Attr);}cA=function(cC){return b$.Filter(cB,cC);};return bZ.Concat(I.map(function(cC){return bM.GetChangeAnim(cC.Attr);},b$.ToArray(b$.Intersect(cA(cy.PreviousNodes),cA(cz)))));};bN.SyncElemNode=function(cy,cz){!cy?bN.SyncElement(cz):void 0;bN.Sync(cz.Children);bN.AfterRender(cz);};bN.SyncElement=function(cy){function cz(cA){function cB(cC){var cD,cE;return cC!=null&&cC.$==0?cB(cC.$0)||cB(cC.$1):cC!=null&&cC.$==2?(cD=cC.$0,cD.Dirty||cB(cD.Current)):cC!=null&&cC.$==6&&(cE=cC.$0,cE.Dirty||I.exists(cz,cE.Holes));}return cB(cA.Children);}bM.Sync(cy.El,cy.Attr);cz(cy)?bN.DoSyncElement(cy):void 0;};bN.Sync=function(cy){var cz,cA;if(cy!=null&&cy.$==1)bN.SyncElemNode(false,cy.$0);else if(cy!=null&&cy.$==2)bN.Sync(cy.$0.Current);else if(cy==null);else if(cy!=null&&cy.$==5);else if(cy!=null&&cy.$==4){cz=cy.$0;cz.Dirty?(cz.Text.nodeValue=cz.Value,cz.Dirty=false):void 0;}else if(cy!=null&&cy.$==6){cA=cy.$0;I.iter(function(cB){bN.SyncElemNode(false,cB);},cA.Holes);I.iter(function(cB){bM.Sync(cB[0],cB[1]);},cA.Attrs);bN.AfterRender(cA);}else{bN.Sync(cy.$0);bN.Sync(cy.$1);}};bN.AfterRender=function(cy){var cz;cz=ct.GetOptional(cy.Render);cz!=null&&cz.$==1?(cz.$0(cy.El),ct.SetOptional(cy,"Render",null)):void 0;};bN.DoSyncElement=function(cy){var cz,cA,cB;function cC(cD,cE){var cF,cG;return cD!=null&&cD.$==1?cD.$0.El:cD!=null&&cD.$==2?(cF=cD.$0,cF.Dirty?(cF.Dirty=false,bN.InsertDoc(cz,cF.Current,cE)):cC(cF.Current,cE)):cD==null?cE:cD!=null&&cD.$==4?cD.$0.Text:cD!=null&&cD.$==5?cD.$0:cD!=null&&cD.$==6?(cG=cD.$0,(cG.Dirty?cG.Dirty=false:void 0,I.foldBack(function(cH,cI){return cH==null||cH.constructor===bp?cC(cH,cI):cH;},cG.Els,cE))):cC(cD.$0,cC(cD.$1,cE));}cz=cy.El;cm.Iter((cA=cy.El,function(cD){bC.RemoveNode(cA,cD);}),cm.Except(cm.DocChildren(cy),cm.Children(cy.El,ct.GetOptional(cy.Delimiters))));cC(cy.Children,(cB=ct.GetOptional(cy.Delimiters),cB!=null&&cB.$==1?cB.$0[1]:null));};bO=V.Elt=ct.Class({},_7,bO);bO.New=function(cy,cz,cA){var cB,cC;cB=bN.CreateElemNode(cy,cz,cA.docNode);cC=b2.Create(cA.updates);return new bO.New$1({$:1,$0:cB},_.Map2Unit(bM.Updates(cB.Attr),cC.v),cy,cC);};bO.New$1=ct.Ctor(function(cy,cz,cA,cB){_7.New.call(this,cy,cz);this.docNode$1=cy;this.updates$1=cz;this.elt=cA;this.rvUpdates=cB;},bO);bQ.Int=function(){bQ.set_counter(bQ.counter()+1);return bQ.counter();};bQ.set_counter=function(cy){ce.$cctor();ce.counter=cy;};bQ.counter=function(){ce.$cctor();return ce.counter;};bR=bG.ArrayStorage=ct.Class({SSet:function(cy){return I.ofSeq(cy);},SInit:function(){return this.init;}},l,bR);bR.New=ct.Ctor(function(cy){l.New.call(this);this.init=cy;},bR);bS=V.DocElemNode=ct.Class({Equals:function(cy){return this.ElKey===cy.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bS);bS.New=function(cy,cz,cA,cB,cC,cD){var cE;return new bS((cE={Attr:cy,Children:cz,El:cB,ElKey:cC},(ct.SetOptional(cE,"Delimiters",cA),ct.SetOptional(cE,"Render",cD),cE)));};bU=br.Scheduler=ct.Class({Fork:function(cy){var cz;cz=this;this.robin.push(cy);this.idle?(this.idle=false,a.setTimeout(function(){cz.tick();},0)):void 0;},tick:function(){var cy,cz,cA;cz=this;cA=cu.now();cy=true;while(cy)if(this.robin.length===0){this.idle=true;cy=false;}else{(this.robin.shift())();cu.now()-cA>40?(a.setTimeout(function(){cz.tick();},0),cy=false):void 0;}}},l,bU);bU.New=ct.Ctor(function(){l.New.call(this);this.idle=true;this.robin=[];},bU);bW=k.OperationCanceledException=ct.Class({},bV,bW);bW.New=ct.Ctor(function(cy){bW.New$1.call(this,"The operation was canceled.",null,cy);},bW);bW.New$1=ct.Ctor(function(cy,cz,cA){this.message=cy;this.inner=cz;bp.setPrototypeOf(this,bW.prototype);this.ct=cA;},bW);bX=k.CancellationTokenSource=ct.Class({},l,bX);bX.New=ct.Ctor(function(){l.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bX);bY.$cctor=function(){bY.$cctor=a.ignore;bY.LoadedTemplates=new S.New$5();bY.LocalTemplatesLoaded=false;bY.TextHoleRE="\\${([^}]+)}";};bZ.get_UseAnimations=function(){return ca.UseAnimations();};bZ.Play=function(cy){var cz;cz=null;return br.Delay(function(){return br.Bind(bZ.Run(a.ignore,ca.Actions(cy)),function(){ca.Finalize(cy);return br.Return(null);});});};bZ.Append=function(cy,cz){return{$:0,$0:ch.Append(cy.$0,cz.$0)};};bZ.Run=function(cy,cz){var cA;function cB(cC){function cD(cE,cF){var cG;cG=cF-cE;cz.Compute(cG);cy();return cG<=cA?void a.requestAnimationFrame(function(cH){cD(cE,cH);}):cC();}a.requestAnimationFrame(function(cE){cD(cE,cE);});}cA=cz.Duration;return cA===0?br.Zero():br.FromContinuations(function(cC,cD,cE){return cB.apply(null,[cC,cD,cE]);});};bZ.Concat=function(cy){return{$:0,$0:ch.Concat(K.map(ca.List,cy))};};bZ.get_Empty=function(){return{$:0,$0:ch.Empty()};};b0.BatchUpdatesEnabled=function(){cb.$cctor();return cb.BatchUpdatesEnabled;};b1.StartProcessor=function(cy){var cz;function cA(){var cB;cB=null;return br.Delay(function(){return br.Bind(cy,function(){var cC;cC=cz[0];return cC===1?(cz[0]=0,br.Zero()):cC===2?(cz[0]=1,cA()):br.Zero();});});}cz=[0];return function(){var cB;cB=cz[0];cB===0?(cz[0]=1,br.Start(cA(),null)):cB===1?cz[0]=2:void 0;};};b2=V.Updates=ct.Class({},null,b2);b2.Create=function(cy){var cz;cz=null;cz=b2.New(cy,null,function(){var cA;cA=cz.s;return cA===null?(cA=bu.Copy(cz.c()),cz.s=cA,bu.WhenObsoleteRun(cA,function(){cz.s=null;}),cA):cA;});return cz;};b2.New=function(cy,cz,cA){return new b2({c:cy,s:cz,v:cA});};b3.$cctor=function(){b3.$cctor=a.ignore;b3.Doc=self.document;};b4.Activate=function(cy){var cz,cB,cC,cD,cE,cF,cG;function cA(cH){var cI,cJ,cK,cL,cM;if(Q.Equals(cH,null))return cH;else if(typeof cH=="object"){if(cH instanceof a.Array)return b4.shallowMap(cA,cH);else{cI=b4.shallowMap(cA,cH.$V);cJ=cH.$T;if(cJ===void 0)return cI;else{cK=I.get(cB,cJ);if(cK===1)return Z.ofArray(cI);else if(cK===2)return self.WebSharper.Decimal.CreateDecimalBits(cI);else{cL=new(I.get(cB,cJ))();for(var cN in cI)if(function(cO){cL[cO]=cI[cO];return false;}(cN))break;return cL;}}}}else return cH;}cB=cy?cy.$TYPES:void 0;if(cB===void 0)cz=cy;else{for(cC=0,cD=I.length(cB)-1;cC<=cD;cC++){cG=I.get(cB,cC);switch(!Q.Equals(cG,null)&&cG.length===3?I.get(cG,0)==="WebSharper"?I.get(cG,1)==="List"?I.get(cG,2)==="T"?0:(cF=cG,2):(cF=cG,2):(cF=cG,2):!Q.Equals(cG,null)&&cG.length===2?I.get(cG,0)==="WebSharper"?I.get(cG,1)==="Decimal"?1:(cF=cG,2):(cF=cG,2):(cF=cG,2)){case 0:cE=1;break;case 1:cE=2;break;case 2:cE=b4.lookup(cF);break;}I.set(cB,cC,cE);}cz=cy.$DATA;}return cA(cz);};b4.shallowMap=function(cy,cz){var cA,cB;if(cz instanceof a.Array)return I.map(cy,cz);else if(typeof cz=="object"){cA={};for(var cC in cz)if(function(cD){cA[cD]=cy(cz[cD]);return false;}(cC))break;return cA;}else return cz;};b4.lookup=function(cy){var cz,cA,cB,cC,cD;cB=I.length(cy);cz=self;cA=0;while(cA<cB){cC=I.get(cy,cA);cD=cz[cC];!Q.Equals(typeof cD,void 0)?(cz=cD,cA=cA+1):G.FailWith("Invalid server reply. Failed to find type: "+cC);}return cz;};b6.New=function(cy,cz,cA,cB){var cC;cC={DynElem:cy,DynFlags:cz,DynNodes:cA};ct.SetOptional(cC,"OnAfterRender",cB);return cC;};b7.convertTextNode=function(cy){var cz,cA,cB,cC,cD,cE;cz=null;cA=0;cC=cy.textContent;cD=new a.RegExp(bx.TextHoleRE(),"g");while(cz=cD.exec(cC),cz!==null){cy.parentNode.insertBefore(self.document.createTextNode(J.string(cC,{$:1,$0:cA},{$:1,$0:cD.lastIndex-I.get(cz,0).length-1})),cy);cA=cD.lastIndex;cE=self.document.createElement("span");cE.setAttribute("ws-replace",I.get(cz,1).toLowerCase());cy.parentNode.insertBefore(cE,cy);}cD.lastIndex=0;cy.textContent=J.string(cC,{$:1,$0:cA},null);};b7.failNotLoaded=function(cy){cr.warn("Instantiating non-loaded template",cy);};b7.fillTextHole=function(cy,cz,cA){var cB;cB=cy.querySelector("[ws-replace]");return Q.Equals(cB,null)?(cr.warn("Filling non-existent text hole",cA),null):(cB.parentNode.replaceChild(new a.Text(cz),cB),{$:1,$0:cB.getAttribute("ws-replace")});};b7.removeHolesExcept=function(cy,cz){function cA(cB){bC.IterSelector(cy,"["+cB+"]",function(cC){if(!cz.Contains(cC.getAttribute(cB)))cC.removeAttribute(cB);});}cA("ws-attr");cA("ws-onafterrender");cA("ws-var");bC.IterSelector(cy,"[ws-hole]",function(cB){if(!cz.Contains(cB.getAttribute("ws-hole"))){cB.removeAttribute("ws-hole");while(cB.hasChildNodes())cB.removeChild(cB.lastChild);}});bC.IterSelector(cy,"[ws-replace]",function(cB){if(!cz.Contains(cB.getAttribute("ws-replace")))cB.parentNode.removeChild(cB);});bC.IterSelector(cy,"[ws-on]",function(cB){cB.setAttribute("ws-on",L.concat(" ",I.filter(function(cC){return cz.Contains(I.get(L.SplitChars(cC,[":"],1),1));},L.SplitChars(cB.getAttribute("ws-on"),[" "],1))));});bC.IterSelector(cy,"[ws-attr-holes]",function(cB){var cC,cD,cE,cF,cG;cC=L.SplitChars(cB.getAttribute("ws-attr-holes"),[" "],1);for(cD=0,cE=cC.length-1;cD<=cE;cD++){cF=I.get(cC,cD);cB.setAttribute(cF,(cG=new a.RegExp(bx.TextHoleRE(),"g"),cB.getAttribute(cF).replace(cG,function(cH,cI){return cz.Contains(cI)?cH:"";})));}});};b7.fillInstanceAttrs=function(cy,cz){var cA,cB,cC,cD,cE;b7.convertAttrs(cz);cA=cz.nodeName.toLowerCase();cB=cy.querySelector("[ws-attr="+cA+"]");if(Q.Equals(cB,null))cr.warn("Filling non-existent attr hole",cA);else{cB.removeAttribute("ws-attr");for(cC=0,cD=cz.attributes.length-1;cC<=cD;cC++){cE=cz.attributes.item(cC);cE.name==="class"&&cB.hasAttribute("class")?cB.setAttribute("class",cB.getAttribute("class")+" "+cE.nodeValue):cB.setAttribute(cE.name,cE.nodeValue);}}};b7.mapHoles=function(cy,cz){function cA(cB){bC.IterSelector(cy,"["+cB+"]",function(cC){var cD,cE;cD=(cE=null,[cz.TryGetValue(cC.getAttribute(cB).toLowerCase(),{get:function(){return cE;},set:function(cF){cE=cF;}}),cE]);cD[0]?cC.setAttribute(cB,cD[1]):void 0;});}cA("ws-hole");cA("ws-replace");cA("ws-attr");cA("ws-onafterrender");cA("ws-var");bC.IterSelector(cy,"[ws-on]",function(cB){cB.setAttribute("ws-on",L.concat(" ",I.map(function(cC){var cD,cE,cF;cD=L.SplitChars(cC,[":"],1);cE=(cF=null,[cz.TryGetValue(I.get(cD,1),{get:function(){return cF;},set:function(cG){cF=cG;}}),cF]);return cE[0]?I.get(cD,0)+":"+cE[1]:cC;},L.SplitChars(cB.getAttribute("ws-on"),[" "],1))));});bC.IterSelector(cy,"[ws-attr-holes]",function(cB){var cC,cD,cE;cC=L.SplitChars(cB.getAttribute("ws-attr-holes"),[" "],1);for(cD=0,cE=cC.length-1;cD<=cE;cD++)(function(){var cF;function cG(cH,cI){var cJ;cJ=G.KeyValue(cI);return cH.replace(new a.RegExp("\\${"+cJ[0]+"}","ig"),"${"+cJ[1]+"}");}cF=I.get(cC,cD);return cB.setAttribute(cF,(((ct.Curried3(K.fold))(cG))(cB.getAttribute(cF)))(cz));}());});};b7.fill=function(cy,cz,cA){while(true)if(cy.hasChildNodes())cA=cz.insertBefore(cy.lastChild,cA);else return null;};b7.convertAttrs=function(cy){var cA,cB,cC,cD,cE,cF,cG,cH;function cz(cI){var cJ;cJ=cy.getAttribute(cI);cJ===null?void 0:cy.setAttribute(cI,cJ.toLowerCase());}cA=cy.attributes;cB=[];cC=[];cD=[];for(cE=0,cF=cA.length-1;cE<=cF;cE++){cG=cA.item(cE);L.StartsWith(cG.nodeName,"ws-on")&&cG.nodeName!=="ws-onafterrender"&&cG.nodeName!=="ws-on"?(cB.push(cG.nodeName),cC.push(J.string(cG.nodeName,{$:1,$0:"ws-on".length},null)+":"+cG.nodeValue.toLowerCase())):!L.StartsWith(cG.nodeName,"ws-")&&(new a.RegExp(bx.TextHoleRE())).test(cG.nodeValue)?(cG.nodeValue=(cH=new a.RegExp(bx.TextHoleRE(),"g"),cG.nodeValue.replace(cH,function(cI,cJ){return"${"+cJ.toLowerCase()+"}";})),cD.push(cG.nodeName)):void 0;}!(cC.length==0)?cy.setAttribute("ws-on",L.concat(" ",cC)):void 0;!(cD.length==0)?cy.setAttribute("ws-attr-holes",L.concat(" ",cD)):void 0;cz("ws-hole");cz("ws-replace");cz("ws-attr");cz("ws-onafterrender");cz("ws-var");I.iter(function(cI){cy.removeAttribute(cI);},cB);};b8=R.KeyCollection=ct.Class({GetEnumerator$1:function(){return bj.Get(K.map(function(cy){return cy.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},l,b8);b8.New=ct.Ctor(function(cy){l.New.call(this);this.d=cy;},b8);b_.New=function(cy,cz){return{PreviousNodes:cy,Top:cz};};b$.get_Empty=function(){return{$:0,$0:new bJ.New$3()};};b$.FindAll=function(cy){var cz;function cA(cC){if(cC!=null&&cC.$==0){cA(cC.$0);cA(cC.$1);}else if(cC!=null&&cC.$==1)cB(cC.$0);else if(cC!=null&&cC.$==2)cA(cC.$0.Current);else if(cC!=null&&cC.$==6)I.iter(cB,cC.$0.Holes);}function cB(cC){cz.push(cC);cA(cC.Children);}cz=[];cA(cy);return{$:0,$0:new bJ.New$2(cz)};};b$.Filter=function(cy,cz){return{$:0,$0:ck.Filter(cy,cz.$0)};};b$.Except=function(cy,cz){return{$:0,$0:ck.Except(cy.$0,cz.$0)};};b$.ToArray=function(cy){return ck.ToArray(cy.$0);};b$.Intersect=function(cy,cz){return{$:0,$0:ck.Intersect(cy.$0,cz.$0)};};ca.UseAnimations=function(){cg.$cctor();return cg.UseAnimations;};ca.Actions=function(cy){return ca.ConcatActions(I.choose(function(cz){return cz.$==1?{$:1,$0:cz.$0}:null;},ch.ToArray(cy.$0)));};ca.Finalize=function(cy){I.iter(function(cz){if(cz.$==0)cz.$0();},ch.ToArray(cy.$0));};ca.ConcatActions=function(cy){var cz,cA,cB,cC;cz=bt.ofSeqNonCopying(cy);cA=I.length(cz);return cA===0?ca.Const():cA===1?I.get(cz,0):(cB=K.max(K.map(function(cD){return cD.Duration;},cz)),(cC=I.map(function(cD){return ca.Prolong(cB,cD);},cz),ca.Def(cB,function(cD){I.iter(function(cE){cE.Compute(cD);},cC);})));};ca.List=function(cy){return cy.$0;};ca.Const=function(cy){return ca.Def(0,function(){return cy;});};ca.Def=function(cy,cz){return{Compute:cz,Duration:cy};};ca.Prolong=function(cy,cz){var cA,cB,cC;cA=cz.Compute;cB=cz.Duration;cC=cn.Create(function(){return cz.Compute(cz.Duration);});return{Compute:function(cD){return cD>=cB?cC.f():cA(cD);},Duration:cy};};cb.$cctor=function(){cb.$cctor=a.ignore;cb.BatchUpdatesEnabled=true;};cc.$cctor=function(){cc.$cctor=a.ignore;cc.EmptyAttr=null;};cd=k.FormatException=ct.Class({},bV,cd);cd.New$1=ct.Ctor(function(cy){this.message=cy;bp.setPrototypeOf(this,cd.prototype);},cd);ce.$cctor=function(){ce.$cctor=a.ignore;ce.counter=0;};cf.Clear=function(cy){cy.splice(0,I.length(cy));};cg.$cctor=function(){cg.$cctor=a.ignore;cg.CubicInOut=cj.Custom(function(cy){var cz;cz=cy*cy;return 3*cz-2*(cz*cy);});cg.UseAnimations=true;};ch.Append=function(cy,cz){return cy.$==0?cz:cz.$==0?cy:{$:2,$0:cy,$1:cz};};ch.ToArray=function(cy){var cz;function cA(cB){if(cB.$==1)cz.push(cB.$0);else if(cB.$==2){cA(cB.$0);cA(cB.$1);}else if(cB.$==3)I.iter(function(cC){cz.push(cC);},cB.$0);}cz=[];cA(cy);return cz.slice(0);};ch.Concat=function(cy){var cz;cz=bt.ofSeqNonCopying(cy);return bt.TreeReduce(ch.Empty(),ch.Append,cz);};ch.Empty=function(){co.$cctor();return co.Empty;};ci.concat=function(cy){var cz,cA;cz=[];for(var cB in cy)cz.push.apply(cz,cy[cB]);return cz;};cj=V.Easing=ct.Class({},l,cj);cj.Custom=function(cy){return new cj.New(cy);};cj.New=ct.Ctor(function(cy){l.New.call(this);this.transformTime=cy;},cj);ck.Filter=function(cy,cz){return new bJ.New$2(I.filter(cy,ck.ToArray(cz)));};ck.Except=function(cy,cz){var cA;cA=new bJ.New$2(ck.ToArray(cz));cA.ExceptWith(ck.ToArray(cy));return cA;};ck.ToArray=function(cy){var cz;cz=I.create(cy.get_Count(),void 0);cy.CopyTo(cz);return cz;};ck.Intersect=function(cy,cz){var cA;cA=new bJ.New$2(ck.ToArray(cy));cA.IntersectWith(ck.ToArray(cz));return cA;};cl=V.DynamicAttrNode=ct.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cy){return bZ.get_Empty();},NGetEnterAnim:function(cy){return bZ.get_Empty();},NGetChangeAnim:function(cy){return bZ.get_Empty();},NSync:function(cy){if(this.dirty){(this.push(cy))(this.value);this.dirty=false;}}},l,cl);cl.New=ct.Ctor(function(cy,cz){var cA;cA=this;l.New.call(this);this.push=cz;this.value=void 0;this.dirty=false;this.updates=_.Map(function(cB){cA.value=cB;cA.dirty=true;},cy);},cl);cm.Children=function(cy,cz){var cA,cB,cC;if(cz!=null&&cz.$==1){cC=[];cA=cz.$0[0].nextSibling;while(cA!==cz.$0[1]){cC.push(cA);cA=cA.nextSibling;}return{$:0,$0:cC};}else return{$:0,$0:I.init(cy.childNodes.length,(cB=cy.childNodes,function(cD){return cB[cD];}))};};cm.Except=function(cy,cz){var cA;cA=cy.$0;return{$:0,$0:I.filter(function(cB){return I.forall(function(cC){return!(cB===cC);},cA);},cz.$0)};};cm.Iter=function(cy,cz){I.iter(cy,cz.$0);};cm.DocChildren=function(cy){var cz;function cA(cB){if(cB!=null&&cB.$==2)cA(cB.$0.Current);else if(cB!=null&&cB.$==1)cz.push(cB.$0.El);else if(cB==null);else if(cB!=null&&cB.$==5)cz.push(cB.$0);else if(cB!=null&&cB.$==4)cz.push(cB.$0.Text);else if(cB!=null&&cB.$==6)I.iter(function(cC){if(cC==null||cC.constructor===bp)cA(cC);else cz.push(cC);},cB.$0.Els);else{cA(cB.$0);cA(cB.$1);}}cz=[];cA(cy.Children);return{$:0,$0:bt.ofSeqNonCopying(cz)};};cn.Create=function(cy){return cq.New(false,cy,cn.forceLazy);};cn.forceLazy=function(){var cy;cy=this.v();this.c=true;this.v=cy;this.f=cn.cachedLazy;return cy;};cn.cachedLazy=function(){return this.v;};co.$cctor=function(){co.$cctor=a.ignore;co.Empty={$:0};};cq.New=function(cy,cz,cA){return{c:cy,v:cz,f:cA};};ct.OnLoad(function(){F.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

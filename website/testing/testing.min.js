(function(n){"use strict";n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=b.LibraryJS=b.LibraryJS||{};g=f.WsTranslatorLoader=f.WsTranslatorLoader||{};h=g.UI=g.UI||{};i=a.EventTarget;j=a.Node;k=d.JavaScript=d.JavaScript||{};l=k.JS=k.JS||{};m=d.Utils=d.Utils||{};n=d.UI=d.UI||{};o=n.View=n.View||{};p=a.WsTranslatorLoader_GeneratedPrintf=a.WsTranslatorLoader_GeneratedPrintf||{};q=a.GeneratedPrintf=a.GeneratedPrintf||{};r=d.Obj=d.Obj||{};s=n.Var=n.Var||{};t=g.WasmLoad=g.WasmLoad||{};u=g.WWorker=g.WWorker||{};v=d.Remoting=d.Remoting||{};w=v.AjaxRemotingProvider=v.AjaxRemotingProvider||{};x=n.HtmlModule=n.HtmlModule||{};y=x.attr=x.attr||{};z=n.Client=n.Client||{};A=z.Templates=z.Templates||{};B=n.Doc=n.Doc||{};C=k.Pervasives=k.Pervasives||{};D=a.WindowOrWorkerGlobalScope;E=a.StartupCode$WsTranslatorLoader$WsTranslatorLoader=a.StartupCode$WsTranslatorLoader$WsTranslatorLoader||{};F=d.Unchecked=d.Unchecked||{};G=n.Snap=n.Snap||{};H=g.WasmStatus=g.WasmStatus||{};I=b.WsTranslator=b.WsTranslator||{};J=I.Dependency=I.Dependency||{};K=g.Remoting=g.Remoting||{};L=K.IMessagingO=K.IMessagingO||{};M=d.Seq=d.Seq||{};N=d.Arrays=d.Arrays||{};O=d.List=d.List||{};P=O.T=O.T||{};Q=d.Strings=d.Strings||{};R=n.AttrProxy=n.AttrProxy||{};S=d.Collections=d.Collections||{};T=S.Dictionary=S.Dictionary||{};U=n.Docs=n.Docs||{};V=n.DomUtility=n.DomUtility||{};W=b.Library=b.Library||{};X=W.String=W.String||{};Y=d.Slice=d.Slice||{};Z=W.ParseO=W.ParseO||{};_0=d.Numeric=d.Numeric||{};_1=a.System=a.System||{};_2=_1.Guid=_1.Guid||{};_3=n.Var$1=n.Var$1||{};_4=a.Event;_5=K.ReturnQueue=K.ReturnQueue||{};_6=K.CustomXhrProvider=K.CustomXhrProvider||{};_7=d.Concurrency=d.Concurrency||{};_8=t.Require=t.Require||{};_9=f.Pojo=f.Pojo||{};_=a.XMLHttpRequestEventTarget;$=a.ArrayBufferView;ba=n.AttrModule=n.AttrModule||{};bb=a.Object;bc=d.Enumerator=d.Enumerator||{};bd=bc.T=bc.T||{};be=n.Array=n.Array||{};bf=n.Attrs=n.Attrs||{};bg=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bh=S.HashSet=S.HashSet||{};bi=n.An=n.An||{};bj=z.Settings=z.Settings||{};bk=n.Abbrev=n.Abbrev||{};bl=bk.Mailbox=bk.Mailbox||{};bm=d.DateUtil=d.DateUtil||{};bn=n.ConcreteVar=n.ConcreteVar||{};bo=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};bp=S.DictionaryUtil=S.DictionaryUtil||{};bq=n.Elt=n.Elt||{};br=_7.AsyncBody=_7.AsyncBody||{};bs=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bt=_7.CT=_7.CT||{};bu=n.BindVar=n.BindVar||{};bv=A.Prepare=A.Prepare||{};bw=S.KeyCollection=S.KeyCollection||{};bx=n.DocElemNode=n.DocElemNode||{};by=a.CharacterData;bz=z.Docs=z.Docs||{};bA=bz.RunState=bz.RunState||{};bB=bz.NodeSet=bz.NodeSet||{};bC=n.Anims=n.Anims||{};bD=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bE=a.Error;bF=d.OperationCanceledException=d.OperationCanceledException||{};bG=d.Json=d.Json||{};bH=bk.Fresh=bk.Fresh||{};bI=v.XhrProvider=v.XhrProvider||{};bJ=n.Updates=n.Updates||{};bK=_7.Scheduler=_7.Scheduler||{};bL=d.CancellationTokenSource=d.CancellationTokenSource||{};bM=a.StartupCode$WsTranslator47$WsTranslator47=a.StartupCode$WsTranslator47$WsTranslator47||{};bN=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bO=z.Attrs=z.Attrs||{};bP=bO.Dyn=bO.Dyn||{};bQ=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bR=n.AppendList=n.AppendList||{};bS=d.Queue=d.Queue||{};bT=n.String=n.String||{};bU=n.CheckedInput=n.CheckedInput||{};bV=n.DynamicAttrNode=n.DynamicAttrNode||{};bW=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bX=n.Easing=n.Easing||{};bY=bk.HashSet=bk.HashSet||{};bZ=S.HashSetUtil=S.HashSetUtil||{};b0=d.FormatException=d.FormatException||{};b1=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};b2=d.Char=d.Char||{};b3=bz.DomNodes=bz.DomNodes||{};b4=d.Lazy=d.Lazy||{};b5=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b6=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};b7=b6.LazyRecord=b6.LazyRecord||{};b8=a.Math;b9=a.IntelliFactory;b_=b9&&b9.Runtime;b$=a.console;ca=a.Date;cb=a.JSON;c.main=function(){var cc,cd;cc=h.mainDoc();cd=self.document.body;A.LoadLocalTemplates("");B.Run(cd,cc);};e.toInt=function(cc){var cd;cd=e.toUInt(cc);return cd>=2147483648?cd-4294967296:cd;};e.FailWith=function(cc){throw new bE(cc);};e.toUInt=function(cc){return(cc<0?b8.ceil(cc):b8.floor(cc))>>>0;};e.KeyValue=function(cc){return[cc.K,cc.V];};h.mainDoc=function(){var cc,cd;return B.Element("div",[],[B.Element("h1",[],[B.TextNode((function(ce){return function(cf){return ce("HELLO WASM"+m.toSafe(cf)+"!");};}(a.id))(g.WasmLoaderVersion()))]),B.Element("h2",[],[B.TextView(o.Map(function(ce){return(function(cf){return function(cg){return cf(p.p(cg));};}(a.id))(ce);},g.wasmStatusV().get_View()))]),B.Element("span",[],[B.Button("Load as Worker",[],function(){t.loadWasmInWorker(h.debugV().Get(),h.optsV().Get());}),B.Button("Load in Main thread",[],function(){t.loadInThisThread(h.debugV().Get(),h.optsV().Get());}),B.Button("Terminate Worker",[],function(){u.terminate();}),B.TextNode(" Debug:"),B.CheckBox([],h.debugV())]),B.Element("div",[],[B.InputArea([],h.codeV()),B.InputArea([],h.optsV())]),B.Element("span",[],[B.Button("Check",[],function(){h.clean();h.callWasmTimed("Check",function(ce){return h.parseAndCheckProject(ce[0],ce[1],ce[2]);},h.getParms());}),B.Button("Translate",[],function(){h.clean();h.callWasmTimed("Translate",function(ce){return h.translateToJs(ce[0],ce[1],ce[2]);},h.getParms());}),B.Button("Dir",[],function(){h.callWasmTimed("Dir",function(ce){return(new w.New()).Async("WsTranslator47:FsRoot.WsTranslator+Rpc.dirRpc:-1181784350",[ce]);},"/");}),B.Button("Clean",[],function(){h.clean();})]),h.showMessages("Fsc Messages",function(ce){return function(cf){return ce(m.prettyPrint(cf));};}(a.id),h.fsErrsV().get_View()),h.showMessages("Ws  Errors",(cc=function(ce){return function(cf){return ce("("+p.p$1(cf[0])+", "+p.p$2(cf[1])+")");};}(a.id),function(ce){return cc([ce[0],ce[1]]);}),h.wsErrsV().get_View()),h.showMessages("Ws  Warnings",(cd=function(ce){return function(cf){return ce("("+p.p$1(cf[0])+", "+p.p$3(cf[1])+")");};}(a.id),function(ce){return cd([ce[0],ce[1]]);}),h.wsWrnsV().get_View()),B.Element("div",[R.Create("style","font-family: monospace; white-space:pre")],[B.TextView(h.detailsV().get_View())])]);};h.debugV=function(){E.$cctor();return E.debugV;};h.optsV=function(){E.$cctor();return E.optsV;};h.codeV=function(){E.$cctor();return E.codeV;};h.clean=function(){h.detailsV().Set("");};h.callWasmTimed=function(cc,cd,ce){var cf;function cg(ch){return h.callWasmA(cd,ch);}_7.Start((cf=null,_7.Delay(function(){var ch,ci;(((b_.Curried3(function(cj,ck,cl){return cj(m.toSafe(ck)+" Starting "+m.toSafe(cl));}))(function(cj){b$.log(cj);}))(function(cj){return cj.getFullYear()+"-"+("0"+(cj.getMonth()+1)).slice(-2)+"-"+("0"+cj.getDate()).slice(-2)+" "+("0"+cj.getHours()).slice(-2)+":"+("0"+cj.getMinutes()).slice(-2)+":"+("0"+cj.getSeconds()).slice(-2)+":"+("00"+cj.getMilliseconds()).slice(-3);}(new a.Date(ca.now()))))(cc);ch=(ci=ca.now(),ci*10000);return _7.Bind(cg(ce),function(){var cj,ck;cj=((ck=ca.now(),ck*10000)-ch)/10000;(((((((b_.Curried(function(cl,cm,cn,co,cp,cq,cr){return cl(m.toSafe(cm)+" Finished "+m.toSafe(cn)+" "+a.String(co)+":"+m.padNumLeft(a.String(cp),2)+":"+m.padNumLeft(a.String(cq),2)+"."+m.padNumLeft(a.String(cr),3));},7))(function(cl){b$.log(cl);}))(function(cl){return cl.getFullYear()+"-"+("0"+(cl.getMonth()+1)).slice(-2)+"-"+("0"+cl.getDate()).slice(-2)+" "+("0"+cl.getHours()).slice(-2)+":"+("0"+cl.getMinutes()).slice(-2)+":"+("0"+cl.getSeconds()).slice(-2)+":"+("00"+cl.getMilliseconds()).slice(-3);}(new ca(ca.now()))))(cc))(e.toInt(cj/3600000)))(b8.floor(cj/60000)%60))(b8.floor(cj/1000)%60))(cj%1000);return _7.Zero();});})),null);};h.parseAndCheckProject=function(cc,cd,ce){var cf;cf=null;return _7.Delay(function(){return _7.Bind((new w.New()).Async("WsTranslator47:FsRoot.WsTranslator+Rpc.parseAndCheckProjectRpc:-456933061",[cc,cd,ce]),function(cg){var ch;h.fsErrsV().Set(N.ofSeq(cg[0]));h.wsErrsV().Set([]);h.wsWrnsV().Set([]);ch=(function(ci){return function(cj){return ci("("+m.prettyPrint(cj[0])+", "+m.printArray(m.prettyPrint,cj[1])+")");};}(a.id))([cg[2],cg[1]]);h.detailsV().Set(ch);return _7.Zero();});});};h.getParms=function(){return["WasmTest",N.filter(function(cc){return Q.Trim(cc)!=="";},Q.SplitChars("fsc.exe\n"+h.optsV().Get(),["\n"],0)),h.codeV().Get()];};h.translateToJs=function(cc,cd,ce){var cf;cf=null;return _7.Delay(function(){return _7.Bind((new w.New()).Async("WsTranslator47:FsRoot.WsTranslator+Rpc.translateFsToJsRpc:488677094",[cc,cd,ce]),function(cg){var ch,ci;ch=cg[1];h.fsErrsV().Set(cg[0]);return ch==null?(h.clean(),h.wsErrsV().Set([]),h.wsWrnsV().Set([]),_7.Zero()):(ci=ch.$0[0],(h.detailsV().Set(ci==null?"No translation":ci.$0),h.wsErrsV().Set(N.ofSeq(ch.$0[1])),h.wsWrnsV().Set(N.ofSeq(ch.$0[2])),_7.Zero()));});});};h.showMessages=function(cc,cd,ce){return B.BindView(function(cf){return N.length(cf)===0?B.get_Empty():B.Element("div",[],[B.TextNode(cc),B.Element("ol",[],[B.Concat(M.map(function(cg){return B.Element("li",[],[B.TextNode(cd(cg))]);},cf))])]);},ce);};h.fsErrsV=function(){E.$cctor();return E.fsErrsV;};h.wsErrsV=function(){E.$cctor();return E.wsErrsV;};h.wsWrnsV=function(){E.$cctor();return E.wsWrnsV;};h.detailsV=function(){E.$cctor();return E.detailsV;};h.callWasmA=function(cc,cd){var ce;ce=null;return _7.Delay(function(){return _7.Combine(g.wasmStatusV().Get().$===0?(t.loadWasmInWorker(h.debugV().Get(),h.optsV().Get()),_7.Zero()):_7.Zero(),_7.Delay(function(){return _7.Bind(_7.Sleep(50),function(){return _7.Combine(_7.While(function(){var cf;cf=g.wasmStatusV().Get();return cf.$==2?false:cf.$!=4;},_7.Delay(function(){g.printfn(function(cf){return cf("Waiting for WASM to load...");});return _7.Bind(_7.Sleep(2000),function(){return _7.Return(null);});})),_7.Delay(function(){return _7.TryWith(_7.Delay(function(){return _7.Bind(cc(cd),function(){return _7.Return(null);});}),function(cf){(g.printfn(function(cg){return function(ch){return cg(m.prettyPrint(ch));};}))(cf);return _7.Zero();});}));});}));});};l.GetFields=function(cc){var cd,ce;cd=[];for(var cf in cc)cd.push([cf,cc[cf]]);return cd;};l.GetFieldValues=function(cc){var cd,ce;cd=[];for(var cf in cc)cd.push(cc[cf]);return cd;};g.WasmLoaderVersion=function(){E.$cctor();return E.WasmLoaderVersion;};g.wasmStatusV=function(){E.$cctor();return E.wasmStatusV;};g.printfn=function(cc){return cc(K.messaging().get_D().wprintfn);};m.toSafe=function(cc){return cc==null?"":cc;};m.prettyPrint=function(cc){var cd,ce;function cf(cg,ch){return cg+" = "+m.prettyPrint(ch);}return cc===null?"null":(cd=typeof cc,cd=="string"?"\""+cc+"\"":cd=="object"?cc instanceof a.Array?"[|"+Q.concat("; ",N.map(m.prettyPrint,cc))+"|]":(ce=a.String(cc),ce==="[object Object]"?"{"+Q.concat("; ",N.map(function(cg){return cf(cg[0],cg[1]);},l.GetFields(cc)))+"}":ce):a.String(cc));};m.printArray=function(cc,cd){return cd===null?"null":"[|"+Q.concat("; ",N.map(cc,cd))+"|]";};m.printList=function(cc,cd){return"["+Q.concat("; ",M.map(cc,cd))+"]";};m.padNumLeft=function(cc,cd){var ce;ce=N.get(cc,0);return ce===" "||ce==="+"||ce==="-"?ce+Q.PadLeftWith(cc.substr(1),cd-1,"0"):Q.PadLeftWith(cc,cd,"0");};o.Map=function(cc,cd){return o.CreateLazy(function(){return G.Map(cc,cd());});};o.CreateLazy=function(cc){var cd;cd={c:null,o:cc};return function(){var ce,cf;ce=cd.c;return ce===null?(ce=cd.o(),cd.c=ce,(cf=ce.s,cf!=null&&cf.$==0)?cd.o=null:G.WhenObsoleteRun(ce,function(){cd.c=null;}),ce):ce;};};o.Const=function(cc){var cd;cd=G.New({$:0,$0:cc});return function(){return cd;};};o.Sink=function(cc,cd){function ce(){G.WhenRun(cd(),cc,function(){_7.scheduler().Fork(ce);});}_7.scheduler().Fork(ce);};o.Map2Unit=function(cc,cd){return o.CreateLazy(function(){return G.Map2Unit(cc(),cd());});};o.Bind=function(cc,cd){return o.Join(o.Map(cc,cd));};o.Join=function(cc){return o.CreateLazy(function(){return G.Join(cc());});};p.p=function(cc){return cc.$==4?"WasmWorkerLoaded":cc.$==3?"WasmWorkerLoading":cc.$==2?"WasmLoaded":cc.$==1?"WasmLoading":"WasmNotLoaded";};p.p$1=function(cc){return cc==null?"null":"Some "+q.p(cc.$0);};p.p$2=function(cc){return cc.$==6?"FieldNotFound ("+m.prettyPrint(cc.$0)+", "+m.prettyPrint(cc.$1)+")":cc.$==5?"ConstructorNotFound ("+m.prettyPrint(cc.$0)+", "+m.prettyPrint(cc.$1)+", "+m.printList(m.prettyPrint,cc.$2)+")":cc.$==4?"MethodNameNotFound ("+m.prettyPrint(cc.$0)+", "+m.prettyPrint(cc.$1)+", "+m.printList(m.prettyPrint,cc.$2)+")":cc.$==3?"MethodNotFound ("+m.prettyPrint(cc.$0)+", "+m.prettyPrint(cc.$1)+", "+m.printList(m.prettyPrint,cc.$2)+")":cc.$==2?"TypeNotFound "+m.prettyPrint(cc.$0):cc.$==1?"NameConflict ("+m.prettyPrint(cc.$0)+", "+m.prettyPrint(cc.$1)+")":"SourceError "+m.prettyPrint(cc.$0);};p.p$3=function(cc){return cc.$==1?"PublicProxy "+m.prettyPrint(cc.$0):"SourceWarning "+m.prettyPrint(cc.$0);};q.p=function(cc){return"{"+("FileName = "+m.prettyPrint(cc.FileName))+"; "+("Start = "+("("+m.prettyPrint(cc.Start[0])+", "+m.prettyPrint(cc.Start[1])+")"))+"; "+("End = "+("("+m.prettyPrint(cc.End[0])+", "+m.prettyPrint(cc.End[1])+")"))+"}";};r=d.Obj=b_.Class({Equals:function(cc){return this===cc;},GetHashCode:function(){return -1;}},null,r);r.New=b_.Ctor(function(){},r);s=n.Var=b_.Class({},r,s);s.New=b_.Ctor(function(){r.New.call(this);},s);t.loadWasmInWorker=function(cc,cd){var ce;if(!self.document)g.printfn(function(cf){return cf("Already in a worker cannot load Wasm in another worker");});else if(g.wasmStatusV().Get().$!==0)(g.printfn(function(cf){return function(cg){return cf("Wasm is already "+p.p(cg));};}))(g.wasmStatusV().Get());else{g.wasmStatusV().Set(H.WasmLoading);g.printfn(function(cf){return cf("Initiating WebWorker");});self.IntelliFactory.Runtime.ScriptPath=function(cf,cg){return t.rootPath()+cg;};ce=new a.Worker(b_.ScriptPath("WsTranslatorLoader","WsTranslatorLoader.worker.js"));ce.postMessage({$:2,$0:cc,$1:cd});ce.onmessage=u.fromWorker;u.set_workerO({$:1,$0:ce});K.messaging().set_D(L.New(function(cf){return function(cg){return ce.postMessage({$:0,$0:cf,$1:cg});};},function(cf){K.returnValue0(cf[0],cf[1]);},function(cf){K.returnExn0(cf[0],cf[1]);},K.messaging().get_D().wprintfn));K.installProvider();}};t.loadInThisThread=function(cc,cd){var ce,cf,cg;cf=!self.document;cg=g.wasmStatusV().Get();switch(cf?cg.$==3?1:cg.$==1?2:cg.$==2?4:cg.$==0?6:0:cg.$==1?1:cg.$==3?3:cg.$==4?5:cg.$==0?6:0){case 0:null;break;case 1:g.printfn(function(ch){return ch("WASM is loading");});break;case 2:g.printfn(function(ch){return ch("WASM is loading in the main thread");});break;case 3:g.printfn(function(ch){return ch("WASM is loading in a WebWorker");});break;case 4:g.printfn(function(ch){return ch("WASM is loaded in the main thread");});break;case 5:g.printfn(function(ch){return ch("WASM is loaded in a WebWorker");});break;case 6:_7.Start(_7.FromContinuations(function(ch){var ci;function cj(){t.bindWasm();g.printfn(function(cl){return cl("WASM Initialized!");});g.wasmStatusV().Set(!self.document?H.WasmWorkerLoaded:H.WasmLoaded);ch();}function ck(){var cl,cm,cn,co,cp,cq,cr;cl=(cm=self.Module.cwrap("mono_wasm_setenv","void",["string","string"]),function(cs){cm(cs[0],cs[1]);});cc?(cl(["MONO_LOG_LEVEL","debug"]),cl(["MONO_LOG_MASK","all"])):void 0;cn=self.config;co=cn.vfs_prefix;cp=cn.deploy_prefix;cq=cn.enable_debugging;cr=cn.file_list;self.MONO.mono_load_runtime_and_bcl(co,cp,cq,cr,cj);}return _7.Start((ci=null,_7.Delay(function(){g.printfn(function(cl){return cl("Loading WASM. Hold on, this will take a while...");});g.wasmStatusV().Set(!self.document?H.WasmWorkerLoading:H.WasmLoading);return _7.Bind(_7.Sleep(50),function(){return _7.Combine(!(!self.document)?(K.installProvider(),_7.Zero()):_7.Zero(),_7.Delay(function(){return _7.Bind(t.requireJsA([t.rootPath()+"mono-config.js"]),function(){var cl,cm;self.Module=self.Module||{};self.Module.onRuntimeInitialized=ck;cl=g.printfn(function(cn){return function(co){return cn(m.toSafe(co));};});self.Module.print=cl;cm=g.printfn(function(cn){return function(co){return cn(m.toSafe(co));};});self.Module.printErr=cm;self.Module.preRun=[function(){t.preloadFiles(t.filesToPreload(cd));}];return _7.Bind(t.requireJsA([t.rootPath()+"dotnet.js"]),function(){return _7.Zero();});});}));});})),null);}),null);break;}};t.rootPath=function(){E.$cctor();return E.rootPath;};t.requireJsA=function(cc){return _7.FromContinuations(function(cd){return a.requirejs(N.ofSeq(cc),cd);});};t.filesToPreload=function(cc){return O.ofSeq(M.delay(function(){return M.append(I.dlls(),M.delay(function(){return N.choose(function(cd){var ce;ce=X.StartsWith("-r:",cd);return ce!=null&&ce.$==1?{$:1,$0:ce.$0}:null;},Q.SplitChars(cc,["\n"],0));}));}));};t.preloadFiles=function(cc){var cd,ce,cf,cg,ch,ci;self.Browser=_9.newPojo([["init",a.ignore],["asyncLoad",function(cj,ck,cl){var cm;cm=new self.XMLHttpRequest();cm.open("GET",cj,true);cm.responseType="arraybuffer";cm.onload=function(){return cm.status===200||cm.status===0&&!F.Equals(cm.response,null)?ck(new a.Uint8Array(cm.response)):cl();};cm.onerror=function(){return cl();};return cm.send(null);}]]);self.Module=self.Module||{};self.Module.preloadPlugins=[];cd=M.cache(M.distinct(M.map(function(cj){return[Q.concat("/",Y.array(cj,null,{$:1,$0:N.length(cj)-2})),M.last(cj)];},M.map(function(cj){return N.map(Q.Trim,cj);},M.map(function(cj){return Q.SplitChars(Q.Replace(cj,"\\","/"),["/"],0);},cc)))));M.iter(function(cj){try{self.FS.mkdir(cj);}catch(ck){null;}},M.distinct(M.map(function(cj){return cj[0];},cd)));ce=bc.Get(cd);try{while(ce.MoveNext()){cf=ce.Current();cg=cf[1];ch=cf[0];ci=Q.Replace(t.rootPath()+ch+"/"+cg,"//","/");(g.printfn(function(cj){return function(ck){return cj("Preloading "+m.toSafe(ck));};}))(ci);self.FS.createPreloadedFile(ch,cg,ci,1,1);}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};t.bindWasm=function(){M.iter(function(cc){t.bindStaticMethod(cc[0],cc[1],cc[2]);},O.ofArray([["WsTranslator","FsRoot.WsTranslator","runRpc"]]));};t.bindStaticMethod=function(cc,cd,ce){var cf;self[((((b_.Curried(function(cg,ch,ci,cj){return cg("WASM_"+m.toSafe(ch)+"_"+m.toSafe(ci)+"_"+m.toSafe(cj));},4))(a.id))(cc))(Q.Replace(cd,".","_")))(ce)]=(cf=((((b_.Curried(function(cg,ch,ci,cj){return cg("["+m.toSafe(ch)+"]"+m.toSafe(ci)+":"+m.toSafe(cj));},4))(a.id))(cc))(cd))(ce),self.Module.mono_bind_static_method(cf));};u.terminate=function(){var cc;if(cc=u.workerO(),cc!=null&&cc.$==1){u.workerO().$0.terminate();u.set_workerO(null);g.printfn(function(cd){return cd("Worker terminated!");});g.wasmStatusV().Set(H.WasmNotLoaded);}else g.printfn(function(cd){return cd("Worker is not present");});};u.fromWorker=function(cc){var cd,ce;cd=cc.data;cd.$==1?K.returnExn0(cd.$0,cd.$1):cd.$==2?(g.printfn(function(cf){return function(cg){return cf(m.toSafe(cg));};}))(cd.$0):cd.$==3?(ce=cd.$0,!F.Equals(g.wasmStatusV().Get(),ce)?g.wasmStatusV().Set(ce):void 0):K.returnValue0(cd.$0,cd.$1);};u.set_workerO=function(cc){E.$cctor();E.workerO=cc;};u.workerO=function(){E.$cctor();return E.workerO;};w=v.AjaxRemotingProvider=b_.Class({AsyncBase:function(cc,cd){var ce,cf;ce=this;cf=null;return _7.Delay(function(){var cg,ch;cg=v.makeHeaders(cc);ch=v.makePayload(cd);return _7.Bind(_7.GetCT(),function(ci){return _7.FromContinuations(function(cj,ck,cl){var cm,cn,co;function cp(cq){return cm[0]?(cm[0]=false,cl(new bF.New(ci))):null;}cm=[true];cn=_7.Register(ci,function(){cp();});co=ce.get_EndPoint();return v.AjaxProvider().Async(co,cg,ch,function(cq){if(cm[0]){cm[0]=false;cn.Dispose();cj(bG.Activate(cb.parse(cq)));}},function(cq){if(cm[0]){cm[0]=false;cn.Dispose();ck(cq);}});});});});},get_EndPoint:function(){return v.EndPoint();},Async:function(cc,cd){return this.AsyncBase(cc,cd);}},r,w);w.New=b_.Ctor(function(){r.New.call(this);},w);y=x.attr=b_.Class({},r,y);A.LoadLocalTemplates=function(cc){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(cc,A.LoadedTemplateFile(""));};A.LocalTemplatesLoaded=function(){bg.$cctor();return bg.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(cc){bg.$cctor();bg.LocalTemplatesLoaded=cc;};A.LoadNestedTemplates=function(cc,cd){var cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;function ce(cs){var ct,cu;if(!cf.ContainsKey(cs)){ct=(cu=null,[cg.TryGetValue(cs,{get:function(){return cu;},set:function(cv){cu=cv;}}),cu]);ct[0]?(cr.Add(cs),cg.Remove(cs),A.PrepareTemplateStrict(cd,{$:1,$0:cs},ct[1],{$:1,$0:ce})):b$.warn(cr.Contains(cs)?"Encountered loop when instantiating "+cs:"Local template does not exist: "+cs);}}cf=A.LoadedTemplateFile(cd);cg=new T.New$5();ch=cc.querySelectorAll("[ws-template]");for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];cl=ck.getAttribute("ws-template").toLowerCase();ck.removeAttribute("ws-template");cg.set_Item(cl,A.FakeRootSingle(ck));}cm=cc.querySelectorAll("[ws-children-template]");for(cn=0,co=cm.length-1;cn<=co;cn++){cp=cm[cn];cq=cp.getAttribute("ws-children-template").toLowerCase();cp.removeAttribute("ws-children-template");cg.set_Item(cq,A.FakeRoot(cp));}cr=new bh.New$3();while(cg.count>0)ce(M.head(cg.get_Keys()));};A.LoadedTemplates=function(){bg.$cctor();return bg.LoadedTemplates;};A.LoadedTemplateFile=function(cc){var cd,ce,cf;cd=(ce=null,[A.LoadedTemplates().TryGetValue(cc,{get:function(){return ce;},set:function(cg){ce=cg;}}),ce]);return cd[0]?cd[1]:(cf=new T.New$5(),(A.LoadedTemplates().set_Item(cc,cf),cf));};A.FakeRootSingle=function(cc){var cd,ce,cf,cg;cc.removeAttribute("ws-template");cd=cc.getAttribute("ws-replace");cd===null?void 0:(cc.removeAttribute("ws-replace"),ce=cc.parentNode,F.Equals(ce,null)?void 0:(cf=self.document.createElement(cc.tagName),cf.setAttribute("ws-replace",cd),ce.replaceChild(cf,cc)));cg=self.document.createElement("div");cg.appendChild(cc);return cg;};A.FakeRoot=function(cc){var cd;cd=self.document.createElement("div");while(cc.hasChildNodes())cd.appendChild(cc.firstChild);return cd;};A.PrepareTemplateStrict=function(cc,cd,ce,cf){var cg;function ch(cn,co){var cp,cq,cr,cs,ct,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;function cu(cQ){}while(true)switch(cn){case 0:if(co!==null){cp=co.nextSibling;if(F.Equals(co.nodeType,j.TEXT_NODE))bv.convertTextNode(co);else if(F.Equals(co.nodeType,j.ELEMENT_NODE))cj(co);co=cp;}else return null;break;case 1:cv=Y.string(co.nodeName,{$:1,$0:3},null).toLowerCase();cw=(cq=cv.indexOf("."),cq===-1?[cc,cv]:[Y.string(cv,null,{$:1,$0:cq-1}),Y.string(cv,{$:1,$0:cq+1},null)]);cx=cw[1];cy=cw[0];if(cy!==""&&!A.LoadedTemplates().ContainsKey(cy))return bv.failNotLoaded(cx);else{if(cy===""&&cf!=null)cf.$0(cx);cz=A.LoadedTemplates().get_Item(cy);if(!cz.ContainsKey(cx))return bv.failNotLoaded(cx);else{cA=cz.get_Item(cx);cB=cA.cloneNode(true);cC=new bh.New$3();cD=new T.New$5();cE=co.attributes;for(cF=0,cG=cE.length-1;cF<=cG;cF++){cH=cE.item(cF).name.toLowerCase();cD.set_Item(cH,(cI=cE.item(cF).nodeValue,cI===""?cH:cI.toLowerCase()));!cC.Add(cH)?b$.warn("Hole mapped twice",cH):void 0;}for(cJ=0,cK=co.childNodes.length-1;cJ<=cK;cJ++){cL=co.childNodes[cJ];F.Equals(cL.nodeType,j.ELEMENT_NODE)?!cC.Add(cL.nodeName.toLowerCase())?b$.warn("Hole filled twice",cx):void 0:void 0;}cM=co.childNodes.length===1&&F.Equals(co.firstChild.nodeType,j.TEXT_NODE);if(cM){cs=bv.fillTextHole(cB,co.firstChild.textContent,cx);((function(cQ){return function(cR){if(cR!=null)cQ(cR.$0);};}((ct=function(cQ){return function(cR){return cQ.Add(cR);};}(cC),function(cQ){return cu(ct(cQ));})))(cs));}bv.removeHolesExcept(cB,cC);if(!cM){for(cN=0,cO=co.childNodes.length-1;cN<=cO;cN++){cP=co.childNodes[cN];F.Equals(cP.nodeType,j.ELEMENT_NODE)?cP.hasAttributes()?bv.fillInstanceAttrs(cB,cP):ci(cB,cP):void 0;}}bv.mapHoles(cB,cD);bv.fill(cB,co.parentNode,co);co.parentNode.removeChild(co);return;}}break;}}function ci(cn,co){var cp,cr,cs;function cq(ct,cu){var cv;if(cr==="title"&&co.hasChildNodes()){cv=V.ParseHTMLIntoFakeRoot(co.textContent);co.removeChild(co.firstChild);while(cv.hasChildNodes())co.appendChild(cv.firstChild);}else null;cj(co);return bv.fill(co,ct,cu);}cr=co.nodeName.toLowerCase();A.foreachNotPreserved(cn,"[ws-attr-holes]",function(ct){var cu,cv,cw,cx,cy;cu=Q.SplitChars(ct.getAttribute("ws-attr-holes"),[" "],1);for(cv=0,cw=cu.length-1;cv<=cw;cv++){cx=N.get(cu,cv);ct.setAttribute(cx,(cy=new a.RegExp("\\${"+cr+"}","ig"),ct.getAttribute(cx).replace(cy,co.textContent)));}});cs=cn.querySelector("[ws-hole="+cr+"]");if(F.Equals(cs,null)){cp=cn.querySelector("[ws-replace="+cr+"]");return F.Equals(cp,null)?null:(cq(cp.parentNode,cp),void cp.parentNode.removeChild(cp));}else{while(cs.hasChildNodes())cs.removeChild(cs.lastChild);cs.removeAttribute("ws-hole");return cq(cs,null);}}function cj(cn){if(!cn.hasAttribute("ws-preserve"))if(Q.StartsWith(cn.nodeName.toLowerCase(),"ws-"))cl(cn);else{bv.convertAttrs(cn);ck(cn.firstChild);}}function ck(cn){return ch(0,cn);}function cl(cn){return ch(1,cn);}function cm(cn){var co,cp,cq,cr;while(true){co=cn.querySelector("[ws-template]");if(F.Equals(co,null)){cp=cn.querySelector("[ws-children-template]");if(F.Equals(cp,null))return null;else{cq=cp.getAttribute("ws-children-template");cp.removeAttribute("ws-children-template");A.PrepareTemplateStrict(cc,{$:1,$0:cq},cp,null);cn=cn;}}else{cr=co.getAttribute("ws-template");(A.PrepareSingleTemplate(cc,{$:1,$0:cr},co))(null);cn=cn;}}}cg=(cd==null?"":cd.$0).toLowerCase();A.LoadedTemplateFile(cc).set_Item(cg,ce);ce.hasChildNodes()?(cm(ce),ck(ce.firstChild)):void 0;};A.foreachNotPreserved=function(cc,cd,ce){V.IterSelector(cc,cd,function(cf){if(cf.closest("[ws-preserve]")==null)ce(cf);});};A.PrepareSingleTemplate=function(cc,cd,ce){var cf;cf=A.FakeRootSingle(ce);return function(cg){A.PrepareTemplateStrict(cc,cd,cf,cg);};};A.TextHoleRE=function(){bg.$cctor();return bg.TextHoleRE;};B=n.Doc=b_.Class({},r,B);B.Run=function(cc,cd){U.LinkElement(cc,cd.docNode);B.RunInPlace(false,cc,cd);};B.TextNode=function(cc){return B.Mk({$:5,$0:self.document.createTextNode(cc)},o.Const());};B.Button=function(cc,cd,ce){var cf;cf=R.Concat(cd);return bq.New(B.Clickable("button",ce),cf,B.TextNode(cc));};B.CheckBox=function(cc,cd){return B.InputInternal("input",function(){return M.append(cc,[R.Create("type","checkbox"),ba.Checked(cd)]);});};B.InputArea=function(cc,cd){return B.InputInternal("textarea",function(){return M.append(cc,[ba.Value(cd)]);});};B.get_Empty=function(){return B.Mk(null,o.Const());};B.Concat=function(cc){var cd;cd=be.ofSeqNonCopying(cc);return be.TreeReduce(B.get_Empty(),B.Append,cd);};B.TextView=function(cc){var cd;cd=U.CreateTextNode();return B.Mk({$:4,$0:cd},o.Map(function(ce){U.UpdateTextNode(cd,ce);},cc));};B.RunInPlace=function(cc,cd,ce){var cf;cf=U.CreateRunState(cd,ce.docNode);o.Sink(bi.get_UseAnimations()||bj.BatchUpdatesEnabled()?bl.StartProcessor(U.PerformAnimatedUpdate(cc,cf,ce.docNode)):function(){U.PerformSyncUpdate(cc,cf,ce.docNode);},ce.updates);};B.Element=function(cc,cd,ce){var cf,cg;cf=R.Concat(cd);cg=B.Concat(ce);return bq.New(self.document.createElement(cc),cf,cg);};B.Mk=function(cc,cd){return new B.New(cc,cd);};B.Clickable=function(cc,cd){var ce;ce=self.document.createElement(cc);ce.addEventListener("click",function(cf){cf.preventDefault();return cd();},false);return ce;};B.InputInternal=function(cc,cd){var ce;ce=self.document.createElement(cc);return bq.New(ce,R.Concat(cd(ce)),B.get_Empty());};B.BindView=function(cc,cd){return B.EmbedView(o.Map(cc,cd));};B.Append=function(cc,cd){return B.Mk({$:0,$0:cc.docNode,$1:cd.docNode},o.Map2Unit(cc.updates,cd.updates));};B.EmbedView=function(cc){var cd;cd=U.CreateEmbedNode();return B.Mk({$:2,$0:cd},o.Map(a.ignore,o.Bind(function(ce){U.UpdateEmbedNode(cd,ce.docNode);return ce.updates;},cc)));};B.New=b_.Ctor(function(cc,cd){r.New.call(this);this.docNode=cc;this.updates=cd;},B);C.NewFromSeq=function(cc){var cd,ce,cf;cd={};ce=bc.Get(cc);try{while(ce.MoveNext()){cf=ce.Current();cd[cf[0]]=cf[1];}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}return cd;};E.$cctor=function(){var cc,cd,ce;E.$cctor=a.ignore;function cf(ck){return Q.concat("\n",ck);}function cg(ck){return X.splitByChar("\n",ck);}function ch(ck){var cl,cm;return Y.array(ck,{$:1,$0:0},{$:1,$0:(cl=0,(cm=N.length(ck)-2,F.Compare(cl,cm)===1?cl:cm))});}function ci(ck){return Q.concat("\n",ck);}function cj(ck){return ck+"T00:00:00";}E.unindentStr=function(ck){return cf(X.unindent(ck));};E.skipLastLine=(cc=function(ck){return ch(cg(ck));},function(ck){return ci(cc(ck));});E.parseDateO2=(cd=Z.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=bm.TryParse(ck),cm!=null&&cm.$==1&&(cl=cm.$0,true)),cl];}),function(ck){return cd(cj(ck));});E.parseDateO=Z.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=bm.TryParse(ck),cm!=null&&cm.$==1&&(cl=cm.$0,true)),cl];});E.parseIntO=Z.tryParseWith(function(ck){var cl;cl=0;return[_0.TryParseInt32(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});E.parseInt64O=Z.tryParseWith(function(ck){var cl;cl=0;return[_0.TryParseInt64(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});E.parseSingleO=Z.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=a.Number(ck),a.isNaN(cm)?false:(cl=cm,true)),cl];});E.parseDoubleO=Z.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=a.Number(ck),a.isNaN(cm)?false:(cl=cm,true)),cl];});E.parseGuidO=Z.tryParseWith(function(ck){var cl;cl=null;return[_2.TryParse(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});E["|Date|_|"]=Z.parseDateO();E["|Int|_|"]=Z.parseIntO();E["|Int64|_|"]=Z.parseInt64O();E["|Single|_|"]=Z.parseSingleO();E["|Double|_|"]=Z.parseDoubleO();E["|Guid|_|"]=Z.parseGuidO();E.WasmLoaderVersion="47";E.wasmStatusV=_3.Create$1(H.WasmNotLoaded);E.originalProvider=v.AjaxProvider();E.queues=new T.New$5();E.messaging=new J.New(L.New(function(ck){return function(cl){return self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(ck,cl);};},function(ck){K.returnValue0(ck[0],ck[1]);},function(ck){K.returnExn0(ck[0],ck[1]);},function(ck){return function(cl){return ck("EARLY PRINTING!: "+m.toSafe(cl));};}(function(ck){b$.log(ck);})));E.rv=function(ck){K.returnValue(ck[0],ck[1]);};E.re=function(ck){K.returnExn(ck[0],ck[1]);};E.workerO=null;E.rootPath="/WASM/publish47/";E.detailsV=_3.Create$1("");E.fsErrsV=_3.Create$1([]);E.wsErrsV=_3.Create$1([]);E.wsWrnsV=_3.Create$1([]);E.debugV=_3.Create$1(false);E.codeV=_3.Create$1("\r\n            open WebSharper\r\n            open WebSharper.UI\r\n            open WebSharper.UI.Html\r\n            \r\n            let name = Var.Create \"World\"\r\n            \r\n            [< Inline \"'Hello inline '\" >]\r\n            let bDoc() = \"Hello\"\r\n            \r\n            let cDoc() = text name.V\r\n            \r\n            let aDoc() = \r\n                div [] [\r\n                    text <| bDoc()\r\n                    cDoc()\r\n                ]\r\n            \r\n                    ");E.optsV=_3.Create$1(Q.concat("\n",M.map(Q.Trim,Q.SplitChars("\r\n                                            /tmp/source.fsx\r\n                                            -o:source.exe\r\n                                            --simpleresolution\r\n                                            --nowarn:3186\r\n                                            --optimize-\r\n                                            --noframework\r\n                                            --fullpaths\r\n                                            --warn:3\r\n                                            --target:exe\r\n                                            -r:/dlls/WebSharper.Core.dll\r\n                                            -r:/dlls/WebSharper.Main.dll\r\n                                            -r:/dlls/WebSharper.UI.dll\r\n                                            -r:/dlls/WebSharper.Sitelets.dll\r\n                                            -r:/managed/FSharp.Core.dll\r\n                                            -r:/managed/mscorlib.dll\r\n                                            -r:/managed/netstandard.dll\r\n                                            -r:/managed/System.dll\r\n                                            -r:/managed/System.Core.dll\r\n                                            -r:/managed/System.IO.dll\r\n                                            -r:/managed/System.Runtime.dll\r\n                                            -r:/managed/System.Net.Http.dll\r\n                                            -r:/managed/System.Threading.dll\r\n                                            -r:/managed/System.Numerics.dll\r\n                                            -r:/managed/System.Runtime.Numerics.dll\r\n                                        ",["\n"],0))));!(!self.document)?K.messaging().set_D((ce=K.messaging().get_D(),L.New(ce.runRpc,ce.returnValue,ce.returnExn,function(ck){var cl;b$.log(ck);cl=h.detailsV().Get();h.detailsV().Set(cl+(cl===""?"":"\n")+ck);}))):void 0;};F.Equals=function(cc,cd){var ce,cf,cg,ch;if(cc===cd)return true;else{ce=typeof cc;if(ce=="object"){if(cc===null||cc===void 0||cd===null||cd===void 0)return false;else if("Equals"in cc)return cc.Equals(cd);else if(cc instanceof a.Array&&cd instanceof a.Array)return F.arrayEquals(cc,cd);else if(cc instanceof ca&&cd instanceof ca)return F.dateEquals(cc,cd);else{cf=[true];for(var ci in cc)if(function(cj){cf[0]=!cc.hasOwnProperty(cj)||cd.hasOwnProperty(cj)&&F.Equals(cc[cj],cd[cj]);return!cf[0];}(ci))break;if(cf[0]){for(var cj in cd)if(function(ck){cf[0]=!cd.hasOwnProperty(ck)||cc.hasOwnProperty(ck);return!cf[0];}(cj))break;}return cf[0];}}else return ce=="function"&&("$Func"in cc?cc.$Func===cd.$Func&&cc.$Target===cd.$Target:"$Invokes"in cc&&"$Invokes"in cd&&F.arrayEquals(cc.$Invokes,cd.$Invokes));}};F.Compare=function(cc,cd){var ce,cf,cg,ch,ci,cj;if(cc===cd)return 0;else{cf=typeof cc;switch(cf=="function"?1:cf=="boolean"?2:cf=="number"?2:cf=="string"?2:cf=="object"?3:0){case 0:return typeof cd=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return cc<cd?-1:1;case 3:if(cc===null)cg=-1;else if(cd===null)cg=1;else if("CompareTo"in cc)cg=cc.CompareTo(cd);else if("CompareTo0"in cc)cg=cc.CompareTo0(cd);else if(cc instanceof a.Array&&cd instanceof a.Array)cg=F.compareArrays(cc,cd);else if(cc instanceof ca&&cd instanceof ca)cg=F.compareDates(cc,cd);else{ch=[0];for(var ck in cc)if(function(cl){return!cc.hasOwnProperty(cl)?false:!cd.hasOwnProperty(cl)?(ch[0]=1,true):(ch[0]=F.Compare(cc[cl],cd[cl]),ch[0]!==0);}(ck))break;if(ch[0]===0){for(var cl in cd)if(function(cm){return!cd.hasOwnProperty(cm)?false:!cc.hasOwnProperty(cm)&&(ch[0]=-1,true);}(cl))break;}cg=ch[0];}return cg;}}};F.arrayEquals=function(cc,cd){var ce,cf;if(N.length(cc)===N.length(cd)){ce=true;cf=0;while(ce&&cf<N.length(cc)){!F.Equals(N.get(cc,cf),N.get(cd,cf))?ce=false:void 0;cf=cf+1;}return ce;}else return false;};F.dateEquals=function(cc,cd){return cc.getTime()===cd.getTime();};F.compareArrays=function(cc,cd){var ce,cf;if(N.length(cc)<N.length(cd))return -1;else if(N.length(cc)>N.length(cd))return 1;else{ce=0;cf=0;while(ce===0&&cf<N.length(cc)){ce=F.Compare(N.get(cc,cf),N.get(cd,cf));cf=cf+1;}return ce;}};F.compareDates=function(cc,cd){return F.Compare(cc.getTime(),cd.getTime());};F.Hash=function(cc){var cd;cd=typeof cc;return cd=="function"?0:cd=="boolean"?cc?1:0:cd=="number"?cc:cd=="string"?F.hashString(cc):cd=="object"?cc==null?0:cc instanceof a.Array?F.hashArray(cc):F.hashObject(cc):0;};F.hashString=function(cc){var cd,ce,cf;if(cc===null)return 0;else{cd=5381;for(ce=0,cf=cc.length-1;ce<=cf;ce++)cd=F.hashMix(cd,cc[ce].charCodeAt());return cd;}};F.hashArray=function(cc){var cd,ce,cf;cd=-34948909;for(ce=0,cf=N.length(cc)-1;ce<=cf;ce++)cd=F.hashMix(cd,F.Hash(N.get(cc,ce)));return cd;};F.hashObject=function(cc){var cd,ce;if("GetHashCode"in cc)return cc.GetHashCode();else{cd=[0];for(var cf in cc)if(function(cg){cd[0]=F.hashMix(F.hashMix(cd[0],F.hashString(cg)),F.Hash(cc[cg]));return false;}(cf))break;return cd[0];}};F.hashMix=function(cc,cd){return(cc<<5)+cc+cd;};G.Map=function(cc,cd){var ce,cf;ce=cd.s;return ce!=null&&ce.$==0?G.New({$:0,$0:cc(ce.$0)}):(cf=G.New({$:3,$0:[],$1:[]}),(G.When(cd,function(cg){G.MarkDone(cf,cd,cc(cg));},cf),cf));};G.WhenObsoleteRun=function(cc,cd){var ce;ce=cc.s;ce==null?cd():ce!=null&&ce.$==2?ce.$1.push(cd):ce!=null&&ce.$==3?ce.$1.push(cd):void 0;};G.When=function(cc,cd,ce){var cf;cf=cc.s;cf==null?G.Obsolete(ce):cf!=null&&cf.$==2?(G.EnqueueSafe(cf.$1,ce),cd(cf.$0)):cf!=null&&cf.$==3?(cf.$0.push(cd),G.EnqueueSafe(cf.$1,ce)):cd(cf.$0);};G.MarkDone=function(cc,cd,ce){var cf;if(cf=cd.s,cf!=null&&cf.$==0)G.MarkForever(cc,ce);else G.MarkReady(cc,ce);};G.EnqueueSafe=function(cc,cd){var ce,cf,cg,ch;cc.push(cd);if(cc.length%20===0){ce=cc.slice(0);bS.Clear(cc);for(cf=0,cg=N.length(ce)-1;cf<=cg;cf++){ch=N.get(ce,cf);typeof ch=="object"?function(ci){if(ci.s)cc.push(ci);}(ch):function(ci){cc.push(ci);}(ch);}}else void 0;};G.MarkForever=function(cc,cd){var ce,cf,cg,ch;ce=cc.s;if(ce!=null&&ce.$==3){cc.s={$:0,$0:cd};cf=ce.$0;for(cg=0,ch=N.length(cf)-1;cg<=ch;cg++)(N.get(cf,cg))(cd);}else void 0;};G.MarkReady=function(cc,cd){var ce,cf,cg,ch;ce=cc.s;if(ce!=null&&ce.$==3){cc.s={$:2,$0:cd,$1:ce.$1};cf=ce.$0;for(cg=0,ch=N.length(cf)-1;cg<=ch;cg++)(N.get(cf,cg))(cd);}else void 0;};G.WhenRun=function(cc,cd,ce){var cf;cf=cc.s;cf==null?ce():cf!=null&&cf.$==2?(cf.$1.push(ce),cd(cf.$0)):cf!=null&&cf.$==3?(cf.$0.push(cd),cf.$1.push(ce)):cd(cf.$0);};G.Map2Unit=function(cc,cd){var ce,cf,cg;function ch(){var ci,cj,ck;if(!(ci=cg.s,ci!=null&&ci.$==0||ci!=null&&ci.$==2)){cj=G.ValueAndForever(cc);ck=G.ValueAndForever(cd);cj!=null&&cj.$==1?ck!=null&&ck.$==1?cj.$0[1]&&ck.$0[1]?G.MarkForever(cg,null):G.MarkReady(cg,null):void 0:void 0;}}ce=cc.s;cf=cd.s;return ce!=null&&ce.$==0?cf!=null&&cf.$==0?G.New({$:0,$0:null}):cd:cf!=null&&cf.$==0?cc:(cg=G.New({$:3,$0:[],$1:[]}),(G.When(cc,ch,cg),G.When(cd,ch,cg),cg));};G.Copy=function(cc){var cd,ce,cf;cd=cc.s;return cd==null?cc:cd!=null&&cd.$==2?(ce=G.New({$:2,$0:cd.$0,$1:[]}),(G.WhenObsolete(cc,ce),ce)):cd!=null&&cd.$==3?(cf=G.New({$:3,$0:[],$1:[]}),(G.When(cc,function(cg){G.MarkDone(cf,cc,cg);},cf),cf)):cc;};G.ValueAndForever=function(cc){var cd;cd=cc.s;return cd!=null&&cd.$==0?{$:1,$0:[cd.$0,true]}:cd!=null&&cd.$==2?{$:1,$0:[cd.$0,false]}:null;};G.WhenObsolete=function(cc,cd){var ce;ce=cc.s;ce==null?G.Obsolete(cd):ce!=null&&ce.$==2?G.EnqueueSafe(ce.$1,cd):ce!=null&&ce.$==3?G.EnqueueSafe(ce.$1,cd):void 0;};G.Join=function(cc){var cd;cd=G.New({$:3,$0:[],$1:[]});G.When(cc,function(ce){var cf;cf=ce();G.When(cf,function(cg){var ch,ci;if((ch=cf.s,ch!=null&&ch.$==0)&&(ci=cc.s,ci!=null&&ci.$==0))G.MarkForever(cd,cg);else G.MarkReady(cd,cg);},cd);},cd);return cd;};H.WasmLoading={$:1};H.WasmWorkerLoading={$:3};H.WasmWorkerLoaded={$:4};H.WasmLoaded={$:2};H.WasmNotLoaded={$:0};J=I.Dependency=b_.Class({set_D:function(cc){this.D=cc;},get_D:function(){return this.D;}},r,J);J.New=b_.Ctor(function(cc){r.New.call(this);this.D=cc;},J);K.messaging=function(){E.$cctor();return E.messaging;};K.returnValue0=function(cc,cd){var ce,cf,cg;ce=_5.tryGet(cc);ce==null?void 0:(cf=ce.$0,cg=cf[0],cf[1],cg(cd));};K.returnExn0=function(cc,cd){K.returnExnExn(cc,new bE(cd));};K.installProvider=function(){v.set_AjaxProvider(new _6.New());};K.returnValue=function(cc,cd){K.messaging().get_D().returnValue([cc,cd]);};K.returnExn=function(cc,cd){K.messaging().get_D().returnExn([cc,cd]);};K.returnExnExn=function(cc,cd){var ce,cf;ce=_5.tryGet(cc);ce==null?void 0:(cf=ce.$0,cf[0],cf[1](cd));};K.getHeaderRpc=function(cc){return cc["x-websharper-rpc"];};K.callRunRpc=function(cc,cd){(K.messaging().get_D().runRpc(cc))(cd);};L.New=function(cc,cd,ce,cf){return{runRpc:cc,returnValue:cd,returnExn:ce,wprintfn:cf};};M.map=function(cc,cd){return{GetEnumerator:function(){var ce;ce=bc.Get(cd);return new bd.New(null,null,function(cf){return ce.MoveNext()&&(cf.c=cc(ce.Current()),true);},function(){ce.Dispose();});}};};M.delay=function(cc){return{GetEnumerator:function(){return bc.Get(cc());}};};M.append=function(cc,cd){return{GetEnumerator:function(){var ce,cf;ce=bc.Get(cc);cf=[true];return new bd.New(ce,null,function(cg){var ch;return cg.s.MoveNext()?(cg.c=cg.s.Current(),true):(ch=cg.s,!F.Equals(ch,null)?ch.Dispose():void 0,cg.s=null,cf[0]&&(cf[0]=false,cg.s=bc.Get(cd),cg.s.MoveNext()?(cg.c=cg.s.Current(),true):(cg.s.Dispose(),cg.s=null,false)));},function(cg){var ch;ch=cg.s;!F.Equals(ch,null)?ch.Dispose():void 0;});}};};M.distinct=function(cc){return M.distinctBy(a.id,cc);};M.cache=function(cc){var cd,ce;cd=[];ce=[bc.Get(cc)];return{GetEnumerator:function(){return new bd.New(0,null,function(cf){var cg;return cf.s<cd.length?(cf.c=cd[cf.s],cf.s=cf.s+1,true):(cg=ce[0],F.Equals(cg,null)?false:cg.MoveNext()?(cf.s=cf.s+1,cf.c=cg.Current(),cd.push(cf.c),true):(cg.Dispose(),ce[0]=null,false));},void 0);}};};M.iter=function(cc,cd){var ce;ce=bc.Get(cd);try{while(ce.MoveNext())cc(ce.Current());}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};M.head=function(cc){var cd;cd=bc.Get(cc);try{return cd.MoveNext()?cd.Current():M.insufficient();}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};M.tryFind=function(cc,cd){var ce,cf,cg;ce=bc.Get(cd);try{cf=null;while(cf==null&&ce.MoveNext()){cg=ce.Current();cc(cg)?cf={$:1,$0:cg}:void 0;}return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};M.tryFindIndex=function(cc,cd){var ce,cf,cg;ce=bc.Get(cd);try{cf=true;cg=0;while(cf&&ce.MoveNext())if(cc(ce.Current()))cf=false;else cg=cg+1;return cf?null:{$:1,$0:cg};}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};M.filter=function(cc,cd){return{GetEnumerator:function(){var ce;ce=bc.Get(cd);return new bd.New(null,null,function(cf){var cg,ch,ci;cg=ce.MoveNext();ch=ce.Current();ci=false;while(cg)if(cc(ch)){cf.c=ch;ci=true;cg=false;}else if(ce.MoveNext())ch=ce.Current();else cg=false;return ci;},function(){ce.Dispose();});}};};M.collect=function(cc,cd){return M.concat(M.map(cc,cd));};M.distinctBy=function(cc,cd){return{GetEnumerator:function(){var ce,cf;ce=bc.Get(cd);cf=new bh.New$3();return new bd.New(null,null,function(cg){var ch,ci;if(ce.MoveNext()){ch=ce.Current();ci=cf.Add(cc(ch));while(!ci&&ce.MoveNext()){ch=ce.Current();ci=cf.Add(cc(ch));}return ci&&(cg.c=ch,true);}else return false;},function(){ce.Dispose();});}};};M.concat=function(cc){return{GetEnumerator:function(){var cd;function ce(cf){var cg;while(true){cg=cf.s;if(F.Equals(cg,null)){if(cd.MoveNext()){cf.s=bc.Get(cd.Current());cf=cf;}else{cd.Dispose();return false;}}else if(cg.MoveNext()){cf.c=cg.Current();return true;}else{cf.Dispose();cf.s=null;cf=cf;}}}cd=bc.Get(cc);return new bd.New(null,null,ce,function(cf){var cg;cg=cf.s;!F.Equals(cg,null)?cg.Dispose():void 0;!F.Equals(cd,null)?cd.Dispose():void 0;});}};};M.fold=function(cc,cd,ce){var cf,cg;cf=cd;cg=bc.Get(ce);try{while(cg.MoveNext())cf=cc(cf,cg.Current());return cf;}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}};M.max=function(cc){var cd,ce,cf;cd=bc.Get(cc);try{if(!cd.MoveNext())M.seqEmpty();ce=cd.Current();while(cd.MoveNext()){cf=cd.Current();F.Compare(cf,ce)===1?ce=cf:void 0;}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};M.forall=function(cc,cd){return!M.exists(function(ce){return!cc(ce);},cd);};M.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};M.exists=function(cc,cd){var ce,cf;ce=bc.Get(cd);try{cf=false;while(!cf&&ce.MoveNext())cf=cc(ce.Current());return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};N.filter=function(cc,cd){var ce,cf,cg;ce=[];for(cf=0,cg=cd.length-1;cf<=cg;cf++)if(cc(cd[cf]))ce.push(cd[cf]);return ce;};N.map=function(cc,cd){var ce,cf,cg;ce=new a.Array(cd.length);for(cf=0,cg=cd.length-1;cf<=cg;cf++)ce[cf]=cc(cd[cf]);return ce;};N.choose=function(cc,cd){var ce,cf,cg,ch;ce=[];for(cf=0,cg=cd.length-1;cf<=cg;cf++){ch=cc(cd[cf]);ch==null?void 0:ce.push(ch.$0);}return ce;};N.ofSeq=function(cc){var cd,ce;if(cc instanceof a.Array)return cc.slice();else if(cc instanceof P)return N.ofList(cc);else{cd=[];ce=bc.Get(cc);try{while(ce.MoveNext())cd.push(ce.Current());return cd;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}}};N.ofList=function(cc){var cd,ce;ce=[];cd=cc;while(!(cd.$==0)){ce.push(O.head(cd));cd=O.tail(cd);}return ce;};N.exists=function(cc,cd){var ce,cf,cg,ch;ce=false;cf=0;ch=N.length(cd);while(!ce&&cf<ch)if(cc(cd[cf]))ce=true;else cf=cf+1;return ce;};N.tryPick=function(cc,cd){var ce,cf,cg;ce=null;cf=0;while(cf<cd.length&&ce==null){cg=cc(cd[cf]);cg!=null&&cg.$==1?ce=cg:void 0;cf=cf+1;}return ce;};N.tryFindIndex=function(cc,cd){var ce,cf;ce=null;cf=0;while(cf<cd.length&&ce==null){cc(cd[cf])?ce={$:1,$0:cf}:void 0;cf=cf+1;}return ce;};N.foldBack=function(cc,cd,ce){var cf,cg,ch,ci,cj;cf=ce;ch=cd.length;for(ci=1,cj=ch;ci<=cj;ci++)cf=cc(cd[ch-ci],cf);return cf;};N.iter=function(cc,cd){var ce,cf;for(ce=0,cf=cd.length-1;ce<=cf;ce++)cc(cd[ce]);};N.concat=function(cc){return a.Array.prototype.concat.apply([],N.ofSeq(cc));};N.pick=function(cc,cd){var ce;ce=N.tryPick(cc,cd);return ce==null?e.FailWith("KeyNotFoundException"):ce.$0;};N.create=function(cc,cd){var ce,cf,cg;ce=new a.Array(cc);for(cf=0,cg=cc-1;cf<=cg;cf++)ce[cf]=cd;return ce;};N.init=function(cc,cd){var ce,cf,cg;cc<0?e.FailWith("Negative size given."):null;ce=new a.Array(cc);for(cf=0,cg=cc-1;cf<=cg;cf++)ce[cf]=cd(cf);return ce;};N.forall=function(cc,cd){var ce,cf,cg,ch;ce=true;cf=0;ch=N.length(cd);while(ce&&cf<ch)if(cc(cd[cf]))cf=cf+1;else ce=false;return ce;};P=O.T=b_.Class({GetEnumerator:function(){return new bd.New(this,null,function(cc){var cd;cd=cc.s;return cd.$==0?false:(cc.c=cd.$0,cc.s=cd.$1,true);},void 0);},GetEnumerator0:function(){return bc.Get(this);}},null,P);P.Empty=new P({$:0});N.length=function(cc){return cc.dims===2?cc.length*cc.length:cc.length;};N.get=function(cc,cd){N.checkBounds(cc,cd);return cc[cd];};N.set=function(cc,cd,ce){N.checkBounds(cc,cd);cc[cd]=ce;};N.checkBounds=function(cc,cd){if(cd<0||cd>=cc.length)e.FailWith("Index was outside the bounds of the array.");};Q.concat=function(cc,cd){return N.ofSeq(cd).join(cc);};Q.SplitChars=function(cc,cd,ce){return Q.Split(cc,new a.RegExp("["+Q.RegexEscape(cd.join(""))+"]"),ce);};Q.Trim=function(cc){return cc.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};Q.Replace=function(cc,cd,ce){function cf(cg){var ch,ci,cj;ch=cg.indexOf(cd);return ch!==-1?(ci=Q.ReplaceOnce(cg,cd,ce),(cj=ch+ce.length,Q.Substring(ci,0,ch+ce.length)+cf(ci.substring(cj)))):cg;}return cf(cc);};Q.Split=function(cc,cd,ce){return ce===1?N.filter(function(cf){return cf!=="";},Q.SplitWith(cc,cd)):Q.SplitWith(cc,cd);};Q.RegexEscape=function(cc){return cc.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};Q.StartsWith=function(cc,cd){return cc.substring(0,cd.length)==cd;};Q.ReplaceOnce=function(cc,cd,ce){return cc.replace(cd,ce);};Q.PadLeftWith=function(cc,cd,ce){return cd>cc.length?a.Array(cd-cc.length+1).join(ce)+cc:cc;};Q.SplitWith=function(cc,cd){return cc.split(cd);};Q.Substring=function(cc,cd,ce){return cc.substr(cd,ce);};Q.forall=function(cc,cd){return M.forall(cc,Q.protect(cd));};Q.protect=function(cc){return cc===null?"":cc;};R=n.AttrProxy=b_.Class({},null,R);R.Create=function(cc,cd){return bf.Static(function(ce){ce.setAttribute(cc,cd);});};R.Concat=function(cc){var cd;cd=be.ofSeqNonCopying(cc);return be.TreeReduce(bf.EmptyAttr(),R.Append,cd);};R.Append=function(cc,cd){return bf.AppendTree(cc,cd);};T=S.Dictionary=b_.Class({set_Item:function(cc,cd){this.set(cc,cd);},ContainsKey:function(cc){var cd,ce;cd=this;ce=this.data[this.hash(cc)];return ce==null?false:N.exists(function(cf){return cd.equals.apply(null,[(e.KeyValue(cf))[0],cc]);},ce);},TryGetValue:function(cc,cd){var ce,cf,cg;ce=this;cf=this.data[this.hash(cc)];return cf==null?false:(cg=N.tryPick(function(ch){var ci;ci=e.KeyValue(ch);return ce.equals.apply(null,[ci[0],cc])?{$:1,$0:ci[1]}:null;},cf),cg!=null&&cg.$==1&&(cd.set(cg.$0),true));},Remove:function(cc){return this.remove(cc);},get_Keys:function(){return new bw.New(this);},set:function(cc,cd){var ce,cf,cg,ch;ce=this;cf=this.hash(cc);cg=this.data[cf];cg==null?(this.count=this.count+1,this.data[cf]=new a.Array({K:cc,V:cd})):(ch=N.tryFindIndex(function(ci){return ce.equals.apply(null,[(e.KeyValue(ci))[0],cc]);},cg),ch==null?(this.count=this.count+1,cg.push({K:cc,V:cd})):cg[ch.$0]={K:cc,V:cd});},Add:function(cc,cd){this.add(cc,cd);},remove:function(cc){var cd,ce,cf,cg;cd=this;ce=this.hash(cc);cf=this.data[ce];return cf==null?false:(cg=N.filter(function(ch){return!cd.equals.apply(null,[(e.KeyValue(ch))[0],cc]);},cf),N.length(cg)<cf.length&&(this.count=this.count-1,this.data[ce]=cg,true));},get_Item:function(cc){return this.get(cc);},add:function(cc,cd){var ce,cf,cg;ce=this;cf=this.hash(cc);cg=this.data[cf];cg==null?(this.count=this.count+1,this.data[cf]=new a.Array({K:cc,V:cd})):(N.exists(function(ch){return ce.equals.apply(null,[(e.KeyValue(ch))[0],cc]);},cg)?bp.alreadyAdded():void 0,this.count=this.count+1,cg.push({K:cc,V:cd}));},get:function(cc){var cd,ce;cd=this;ce=this.data[this.hash(cc)];return ce==null?bp.notPresent():N.pick(function(cf){var cg;cg=e.KeyValue(cf);return cd.equals.apply(null,[cg[0],cc])?{$:1,$0:cg[1]}:null;},ce);},GetEnumerator:function(){return bc.Get0(this);},GetEnumerator0:function(){return bc.Get0(N.concat(l.GetFieldValues(this.data)));}},r,T);T.New$5=b_.Ctor(function(){T.New$6.call(this,[],F.Equals,F.Hash);},T);T.New$6=b_.Ctor(function(cc,cd,ce){var cf,cg;r.New.call(this);this.equals=cd;this.hash=ce;this.count=0;this.data=[];cf=bc.Get(cc);try{while(cf.MoveNext()){cg=cf.Current();this.set(cg.K,cg.V);}}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}},T);U.LinkElement=function(cc,cd){U.InsertDoc(cc,cd,null);};U.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};U.UpdateTextNode=function(cc,cd){cc.Value=cd;cc.Dirty=true;};U.InsertDoc=function(cc,cd,ce){var cf,cg,ch;while(true)if(cd!=null&&cd.$==1)return U.InsertNode(cc,cd.$0.El,ce);else if(cd!=null&&cd.$==2){cf=cd.$0;cf.Dirty=false;cd=cf.Current;}else if(cd==null)return ce;else if(cd!=null&&cd.$==4)return U.InsertNode(cc,cd.$0.Text,ce);else if(cd!=null&&cd.$==5)return U.InsertNode(cc,cd.$0,ce);else if(cd!=null&&cd.$==6)return N.foldBack(function(ci,cj){return(((b_.Curried3(function(ck,cl,cm){return cl==null||cl.constructor===bb?U.InsertDoc(ck,cl,cm):U.InsertNode(ck,cl,cm);}))(cc))(ci))(cj);},cd.$0.Els,ce);else{cg=cd.$1;ch=cd.$0;cd=ch;ce=U.InsertDoc(cc,cg,ce);}};U.CreateRunState=function(cc,cd){return bA.New(bB.get_Empty(),U.CreateElemNode(cc,bf.EmptyAttr(),cd));};U.PerformAnimatedUpdate=function(cc,cd,ce){var cf;return bi.get_UseAnimations()?(cf=null,_7.Delay(function(){var cg,ch,ci;cg=bB.FindAll(ce);ch=U.ComputeChangeAnim(cd,cg);ci=U.ComputeEnterAnim(cd,cg);return _7.Bind(bi.Play(bi.Append(ch,U.ComputeExitAnim(cd,cg))),function(){return _7.Bind(U.SyncElemNodesNextFrame(cc,cd),function(){return _7.Bind(bi.Play(ci),function(){cd.PreviousNodes=cg;return _7.Return(null);});});});})):U.SyncElemNodesNextFrame(cc,cd);};U.PerformSyncUpdate=function(cc,cd,ce){var cf;cf=bB.FindAll(ce);U.SyncElemNode(cc,cd.Top);cd.PreviousNodes=cf;};U.InsertNode=function(cc,cd,ce){V.InsertAt(cc,ce,cd);return cd;};U.CreateElemNode=function(cc,cd,ce){var cf;U.LinkElement(cc,ce);cf=bf.Insert(cc,cd);return bx.New(cf,ce,null,cc,bH.Int(),b_.GetOptional(cf.OnAfterRender));};U.SyncElemNodesNextFrame=function(cc,cd){function ce(cf){a.requestAnimationFrame(function(){U.SyncElemNode(cc,cd.Top);cf();});}return bj.BatchUpdatesEnabled()?_7.FromContinuations(function(cf,cg,ch){return ce.apply(null,[cf,cg,ch]);}):(U.SyncElemNode(cc,cd.Top),_7.Return(null));};U.ComputeExitAnim=function(cc,cd){return bi.Concat(N.map(function(ce){return bf.GetExitAnim(ce.Attr);},bB.ToArray(bB.Except(cd,bB.Filter(function(ce){return bf.HasExitAnim(ce.Attr);},cc.PreviousNodes)))));};U.ComputeEnterAnim=function(cc,cd){return bi.Concat(N.map(function(ce){return bf.GetEnterAnim(ce.Attr);},bB.ToArray(bB.Except(cc.PreviousNodes,bB.Filter(function(ce){return bf.HasEnterAnim(ce.Attr);},cd)))));};U.ComputeChangeAnim=function(cc,cd){var ce;function cf(cg){return bf.HasChangeAnim(cg.Attr);}ce=function(cg){return bB.Filter(cf,cg);};return bi.Concat(N.map(function(cg){return bf.GetChangeAnim(cg.Attr);},bB.ToArray(bB.Intersect(ce(cc.PreviousNodes),ce(cd)))));};U.SyncElemNode=function(cc,cd){!cc?U.SyncElement(cd):void 0;U.Sync(cd.Children);U.AfterRender(cd);};U.CreateEmbedNode=function(){return{Current:null,Dirty:false};};U.UpdateEmbedNode=function(cc,cd){cc.Current=cd;cc.Dirty=true;};U.SyncElement=function(cc){function cd(ce){function cf(cg){var ch,ci,cj,ck;while(true){if(cg!=null&&cg.$==0){ci=cg.$1;cj=cg.$0;if(cf(cj))return true;else cg=ci;}else if(cg!=null&&cg.$==2){ck=cg.$0;if(ck.Dirty)return true;else cg=ck.Current;}else return cg!=null&&cg.$==6&&(ch=cg.$0,ch.Dirty||N.exists(cd,ch.Holes));}}return cf(ce.Children);}bf.Sync(cc.El,cc.Attr);cd(cc)?U.DoSyncElement(cc):void 0;};U.Sync=function(cc){var cd,ce,cf,cg,ch;while(true){if(cc!=null&&cc.$==1)return U.SyncElemNode(false,cc.$0);else if(cc!=null&&cc.$==2){cf=cc.$0;cc=cf.Current;}else if(cc==null)return null;else if(cc!=null&&cc.$==5)return null;else if(cc!=null&&cc.$==4){cd=cc.$0;return cd.Dirty?(cd.Text.nodeValue=cd.Value,cd.Dirty=false):null;}else if(cc!=null&&cc.$==6){ce=cc.$0;N.iter(function(ci){return function(cj){U.SyncElemNode(ci,cj);};}(false),ce.Holes);N.iter(function(ci){bf.Sync(ci[0],ci[1]);},ce.Attrs);return U.AfterRender(ce);}else{cg=cc.$1;ch=cc.$0;U.Sync(ch);cc=cg;}}};U.AfterRender=function(cc){var cd;cd=b_.GetOptional(cc.Render);cd!=null&&cd.$==1?(cd.$0(cc.El),b_.SetOptional(cc,"Render",null)):void 0;};U.DoSyncElement=function(cc){var cd,ce,cf;function cg(ch,ci){var cj,ck,cl,cm;while(true){if(ch!=null&&ch.$==1)return ch.$0.El;else if(ch!=null&&ch.$==2){ck=ch.$0;if(ck.Dirty){ck.Dirty=false;return U.InsertDoc(cd,ck.Current,ci);}else ch=ck.Current;}else if(ch==null)return ci;else if(ch!=null&&ch.$==4)return ch.$0.Text;else if(ch!=null&&ch.$==5)return ch.$0;else if(ch!=null&&ch.$==6){cj=ch.$0;cj.Dirty?cj.Dirty=false:void 0;return N.foldBack(function(cn,co){return cn==null||cn.constructor===bb?cg(cn,co):cn;},cj.Els,ci);}else{cl=ch.$1;cm=ch.$0;ch=cm;ci=cg(cl,ci);}}}cd=cc.El;b3.Iter((ce=cc.El,function(ch){V.RemoveNode(ce,ch);}),b3.Except(b3.DocChildren(cc),b3.Children(cc.El,b_.GetOptional(cc.Delimiters))));cg(cc.Children,(cf=b_.GetOptional(cc.Delimiters),cf!=null&&cf.$==1?cf.$0[1]:null));};V.ParseHTMLIntoFakeRoot=function(cc){var cd,ce,cf,cg,ch;function ci(cj,ck){var cl;while(true)if(ck===0)return cj;else{cl=ck;cj=cj.lastChild;ck=cl-1;}}cd=self.document.createElement("div");return!V.rhtml().test(cc)?(cd.appendChild(self.document.createTextNode(cc)),cd):(ce=(cf=V.rtagName().exec(cc),F.Equals(cf,null)?"":N.get(cf,1).toLowerCase()),(cg=(ch=(V.wrapMap())[ce],ch?ch:V.defaultWrap()),(cd.innerHTML=cg[1]+cc.replace(V.rxhtmlTag(),"<$1></$2>")+cg[2],ci(cd,cg[0]))));};V.rhtml=function(){bW.$cctor();return bW.rhtml;};V.wrapMap=function(){bW.$cctor();return bW.wrapMap;};V.defaultWrap=function(){bW.$cctor();return bW.defaultWrap;};V.rxhtmlTag=function(){bW.$cctor();return bW.rxhtmlTag;};V.rtagName=function(){bW.$cctor();return bW.rtagName;};V.IterSelector=function(cc,cd,ce){var cf,cg,ch;cf=cc.querySelectorAll(cd);for(cg=0,ch=cf.length-1;cg<=ch;cg++)ce(cf[cg]);};V.InsertAt=function(cc,cd,ce){var cf;if(!(ce.parentNode===cc&&cd===(cf=ce.nextSibling,F.Equals(cf,null)?null:cf)))cc.insertBefore(ce,cd);};V.RemoveNode=function(cc,cd){if(cd.parentNode===cc)cc.removeChild(cd);};X.unindent=function(cc){var cd,ce,cf,cg;cd=Q.SplitChars(cc,["\n"],0);ce=(cf=M.tryFindIndex(function(ch){return" "!==ch;},(cg=M.tryFind(function(ch){return Q.Trim(ch)!=="";},cd),cg==null?"":cg.$0)),cf==null?0:cf.$0);return M.filter(function(ch){return!Q.StartsWith(ch,"# 1 ");},M.map(function(ch){return ch.length<=ce?"":ch.substring(ce);},cd));};X.splitByChar=function(cc,cd){return Q.SplitChars(cd,[cc],0);};X.StartsWith=function(cc,cd){return Q.StartsWith(cd,cc)?{$:1,$0:Y.string(cd,{$:1,$0:cc.length},null)}:null;};Y.array=function(cc,cd,ce){return cd==null?ce!=null&&ce.$==1?cc.slice(0,ce.$0+1):[]:ce==null?cc.slice(cd.$0):cc.slice(cd.$0,ce.$0+1);};Y.string=function(cc,cd,ce){return cd==null?ce!=null&&ce.$==1?cc.slice(0,ce.$0+1):"":ce==null?cc.slice(cd.$0):cc.slice(cd.$0,ce.$0+1);};Z.tryParseWith=function(cc){function cd(ce,cf){return ce?{$:1,$0:cf}:null;}return function(ce){return cd.apply(null,cc(ce));};};Z.parseDateO=function(){E.$cctor();return E.parseDateO;};Z.parseIntO=function(){E.$cctor();return E.parseIntO;};Z.parseInt64O=function(){E.$cctor();return E.parseInt64O;};Z.parseSingleO=function(){E.$cctor();return E.parseSingleO;};Z.parseDoubleO=function(){E.$cctor();return E.parseDoubleO;};Z.parseGuidO=function(){E.$cctor();return E.parseGuidO;};_0.TryParseInt32=function(cc,cd){return _0.TryParse(cc,-2147483648,2147483647,cd);};_0.TryParseInt64=function(cc,cd){return _0.TryParse(cc,-9223372036854775808,9223372036854775807,cd);};_2.TryParse=function(cc,cd){try{cd.set(_2.Parse(cc));return true;}catch(ce){return false;}};_2.Parse=function(cc){var cd,ce,cf;try{return _2.ParseExact(cc,"D");}catch(cg){try{cd=_2.ParseExact(cc,"B");}catch(ch){try{ce=_2.ParseExact(cc,"P");}catch(ci){try{cf=_2.ParseExact(cc,"N");}catch(cj){cf=_2.ParseExact(cc,"X");}ce=cf;}cd=ce;}return cd;}};_2.ParseExact=function(cc,cd){var ce,cf,cg,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;function ch(cs){var ct,cu,cv,cw;for(ct=0,cu=35;ct<=cu;ct++){ct===8||(ct===13||(ct===18||ct===23))?cs[ct]!=="-"?_2.ShapeError():void 0:(cw=cs[ct],!("0"<=cw&&cw<="9"||"a"<=cw&&cw<="f")?_2.ShapeError():void 0);}return cs;}ci=cd.toUpperCase();if(ci==="N"){cj=Q.Trim(cc).toLowerCase();if(cj.length!==32)_2.ShapeError();for(ck=0,cl=31;ck<=cl;ck++){cm=cj[ck];!("0"<=cm&&cm<="9"||"a"<=cm&&cm<="f")?_2.ShapeError():void 0;}return Q.Substring(cj,0,8)+"-"+Q.Substring(cj,8,4)+"-"+Q.Substring(cj,12,4)+"-"+Q.Substring(cj,16,4)+"-"+cj.substring(20);}else if(ci==="D"){ce=Q.Trim(cc).toLowerCase();ce.length!==36?_2.ShapeError():void 0;return ch(ce);}else if(ci==="B"){cf=Q.Trim(cc).toLowerCase();cf.length!==38||cf[0]!=="{"||cf[17]!=="}"?_2.ShapeError():void 0;return ch(Q.Substring(cf,1,36));}else if(ci==="P"){cg=Q.Trim(cc).toLowerCase();cg.length!==38||cg[0]!=="("||cg[17]!==")"?_2.ShapeError():void 0;return ch(Q.Substring(cg,1,36));}else if(ci==="X"){cn=Q.Trim(cc).toLowerCase();if(cn.length!==68)_2.ShapeError();for(co=0,cp=67;co<=cp;co++){switch(co){case 26:case 0:if(cn[co]!=="{")_2.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cn[co]!=="0")_2.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cn[co]!=="x")_2.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cn[co]!==",")_2.ShapeError();break;case 67:case 66:if(cn[co]!=="{")_2.ShapeError();break;default:cr=cn[co];!("0"<=cr&&cr<="9"||"a"<=cr&&cr<="f")?_2.ShapeError():void 0;break;}}return Q.Substring(cn,3,8)+"-"+Q.Substring(cn,14,4)+"-"+Q.Substring(cn,21,4)+"-"+Q.Substring(cn,29,2)+Q.Substring(cn,34,2)+"-"+Q.Substring(cn,39,2)+Q.Substring(cn,44,2)+Q.Substring(cn,49,2)+Q.Substring(cn,54,2)+Q.Substring(cn,59,2)+Q.Substring(cn,64,2);}else return _2.FormatError();};_2.ShapeError=function(){throw new b0.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_2.FormatError=function(){throw new b0.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_3=n.Var$1=b_.Class({},r,_3);_3.Create$1=function(cc){return new bn.New(false,G.New({$:2,$0:cc,$1:[]}),cc);};v.AjaxProvider=function(){bo.$cctor();return bo.AjaxProvider;};v.set_AjaxProvider=function(cc){bo.$cctor();bo.AjaxProvider=cc;};v.makePayload=function(cc){return cb.stringify(cc);};v.makeHeaders=function(cc){return{"content-type":"application/json","x-websharper-rpc":cc};};v.EndPoint=function(){bo.$cctor();return bo.EndPoint;};v.ajax=function(cc,cd,ce,cf,cg,ch,ci){var cj,ck,cl;cj=new a.XMLHttpRequest();ck=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");cj.open("POST",cd,cc);if(cc==true)cj.withCredentials=true;for(var cn in ce)cj.setRequestHeader(cn,ce[cn]);if(ck)cj.setRequestHeader("x-csrftoken",ck);function cm(){var co;if(cj.status==200)cg(cj.responseText);else if(ci&&cj.status==403&&cj.responseText=="CSRF")ci();else{co="Response status is not 200: ";ch(new bE(co+cj.status));}}if("onload"in cj)cj.onload=cj.onerror=cj.onabort=cm;else cj.onreadystatechange=function(){if(cj.readyState==4)cm();};cj.send(cf);};G.Obsolete=function(cc){var cd,ce,cf,cg,ch;ce=cc.s;if(ce==null||(ce!=null&&ce.$==2?(cd=ce.$1,false):ce!=null&&ce.$==3?(cd=ce.$1,false):true))void 0;else{cc.s=null;for(cf=0,cg=N.length(cd)-1;cf<=cg;cf++){ch=N.get(cd,cf);typeof ch=="object"?function(ci){G.Obsolete(ci);}(ch):ch();}}};G.New=function(cc){return{s:cc};};_5.tryGet=function(cc){var cd,ce,cf,cg;cd=_5.tryGetS(cc);return cd==null?null:(ce=cd.$0,(cf=M.tryHead(ce),cf!=null&&cf.$==1?(cg=Y.array(ce,{$:1,$0:1},null),(_5.queues().Remove(cc),_5.queues().Add(cc,cg),{$:1,$0:cf.$0})):null));};_5.tryGetS=function(cc){return(Z.tryParseWith(function(cd){var ce;ce=null;return[_5.queues().TryGetValue(cd,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce];}))(cc);};_5.queues=function(){E.$cctor();return E.queues;};_5.add=function(cc,cd){var ce,cf;ce=(cf=_5.tryGetS(cc),cf==null?[cd]:(_5.queues().Remove(cc),cf.$0.concat([cd])));_5.queues().Add(cc,ce);};_6=K.CustomXhrProvider=b_.Class({Async:function(cc,cd,ce,cf,cg){var ch;_7.Start((ch=null,_7.Delay(function(){var ci;ci=K.getHeaderRpc(cd);_5.add(ci,[cf,cg]);return _7.TryWith(_7.Delay(function(){(((b_.Curried3(function(cj,ck,cl){return cj("CustomXhrProvider "+m.prettyPrint(ck)+" "+m.prettyPrint(cl));}))(function(cj){b$.log(cj);}))(ci))(ce);K.callRunRpc(ci,ce);return _7.Zero();}),function(cj){K.returnExnExn(ci,cj);return _7.Zero();});})),null);}},r,_6);_6.New=b_.Ctor(function(){r.New.call(this);},_6);_7.FromContinuations=function(cc){return function(cd){var ce;function cf(cg){if(ce[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{ce[0]=true;_7.scheduler().Fork(cg);}}ce=[false];cc(function(cg){cf(function(){cd.k({$:0,$0:cg});});},function(cg){cf(function(){cd.k({$:1,$0:cg});});},function(cg){cf(function(){cd.k({$:2,$0:cg});});});};};_7.Delay=function(cc){return function(cd){try{(cc(null))(cd);}catch(ce){cd.k({$:1,$0:ce});}};};_7.Bind=function(cc,cd){return _7.checkCancel(function(ce){cc(br.New(function(cf){var cg;if(cf.$==0){cg=cf.$0;_7.scheduler().Fork(function(){try{(cd(cg))(ce);}catch(ch){ce.k({$:1,$0:ch});}});}else _7.scheduler().Fork(function(){ce.k(cf);});},ce.ct));});};_7.Sleep=function(cc){return function(cd){var ce,cf;ce=void 0;cf=void 0;ce=a.setTimeout(function(){cf.Dispose();_7.scheduler().Fork(function(){cd.k({$:0,$0:null});});},cc);cf=_7.Register(cd.ct,function(){a.clearTimeout(ce);_7.scheduler().Fork(function(){_7.cancel(cd);});});};};_7.Combine=function(cc,cd){return _7.Bind(cc,function(){return cd;});};_7.Zero=function(){bs.$cctor();return bs.Zero;};_7.Start=function(cc,cd){var ce,cf;ce=(cf=(_7.defCTS())[0],cd==null?cf:cd.$0);_7.scheduler().Fork(function(){if(!ce.c)cc(br.New(function(cg){if(cg.$==1)_7.UncaughtAsyncError(cg.$0);},ce));});};_7.checkCancel=function(cc){return function(cd){if(cd.ct.c)_7.cancel(cd);else cc(cd);};};_7.Register=function(cc,cd){var ce;return cc===_7.noneCT()?{Dispose:function(){return null;}}:(ce=cc.r.push(cd)-1,{Dispose:function(){return N.set(cc.r,ce,a.ignore);}});};_7.cancel=function(cc){cc.k({$:2,$0:new bF.New(cc.ct)});};_7.defCTS=function(){bs.$cctor();return bs.defCTS;};_7.UncaughtAsyncError=function(cc){b$.log("WebSharper: Uncaught asynchronous exception",cc);};_7.While=function(cc,cd){return cc()?_7.Bind(cd,function(){return _7.While(cc,cd);}):_7.Return();};_7.Return=function(cc){return function(cd){cd.k({$:0,$0:cc});};};_7.TryWith=function(cc,cd){return function(ce){cc(br.New(function(cf){if(cf.$==0)ce.k({$:0,$0:cf.$0});else if(cf.$==1)try{(cd(cf.$0))(ce);}catch(cg){ce.k(cf);}else ce.k(cf);},ce.ct));};};_7.scheduler=function(){bs.$cctor();return bs.scheduler;};_7.noneCT=function(){bs.$cctor();return bs.noneCT;};_7.GetCT=function(){bs.$cctor();return bs.GetCT;};_8=t.Require=b_.Class({},r,_8);I.dlls=function(){return N.ofSeq(O.ofSeq(M.delay(function(){return M.collect(function(cc){return M.append([cc.$0],M.delay(function(){return[I.fromDll2Meta(cc).$0];}));},I.justDlls());})));};I.fromDll2Meta=function(cc){return{$:0,$0:Q.Replace(cc.$0,".dll",".meta")};};I.justDlls=function(){bM.$cctor();return bM.justDlls;};_9.newPojo=function(cc){var cd,ce;function cf(ch,ci){return function(cj){return _9.addProp(ch,ci,cj);};}function cg(ch){}cd={};M.iter((ce=function(ch){return(function(ci){return cf(ci[0],ci[1]);}(ch))(cd);},function(ch){return cg(ce(ch));}),cc);return cd;};_9.addProp=function(cc,cd,ce){ce[cc]=cd;return ce;};O.ofArray=function(cc){var cd,ce,cf;cd=P.Empty;for(ce=N.length(cc)-1,cf=0;ce>=cf;ce--)cd=new P({$:1,$0:N.get(cc,ce),$1:cd});return cd;};O.ofSeq=function(cc){var cd,ce,cf,cg,ch,ci;if(cc instanceof P)return cc;else if(cc instanceof a.Array)return O.ofArray(cc);else{cd=bc.Get(cc);try{cf=cd.MoveNext();if(!cf)ce=P.Empty;else{ch=new P({$:1});cg=ch;while(cf){cg.$0=cd.Current();cd.MoveNext()?cg=(ci=new P({$:1}),cg.$1=ci,ci):cf=false;}cg.$1=P.Empty;ce=ch;}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}}};O.head=function(cc){return cc.$==1?cc.$0:O.listEmpty();};O.tail=function(cc){return cc.$==1?cc.$1:O.listEmpty();};O.listEmpty=function(){return e.FailWith("The input list was empty.");};ba.Checked=function(cc){var cd;cd=(((bu.BoolCheckedApply())(cc))(bf.Static))(function(ce){return ba.DynamicCustom(ce,cc.get_View());});return R.Append(cd[0],cd[1]);};ba.Value=function(cc){var cd;cd=(((bu.StringApply())(cc))(bf.Static))(function(ce){return ba.DynamicCustom(ce,cc.get_View());});return R.Append(cd[0],cd[1]);};ba.DynamicCustom=function(cc,cd){return bf.Dynamic(cd,cc);};bc.Get=function(cc){return cc instanceof a.Array?bc.ArrayEnumerator(cc):F.Equals(typeof cc,"string")?bc.StringEnumerator(cc):cc.GetEnumerator();};bc.ArrayEnumerator=function(cc){return new bd.New(0,null,function(cd){var ce;ce=cd.s;return ce<N.length(cc)&&(cd.c=N.get(cc,ce),cd.s=ce+1,true);},void 0);};bc.StringEnumerator=function(cc){return new bd.New(0,null,function(cd){var ce;ce=cd.s;return ce<cc.length&&(cd.c=cc[ce],cd.s=ce+1,true);},void 0);};bc.Get0=function(cc){return cc instanceof a.Array?bc.ArrayEnumerator(cc):F.Equals(typeof cc,"string")?bc.StringEnumerator(cc):"GetEnumerator0"in cc?cc.GetEnumerator0():cc.GetEnumerator();};bd=bc.T=b_.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},r,bd);bd.New=b_.Ctor(function(cc,cd,ce,cf){r.New.call(this);this.s=cc;this.c=cd;this.n=ce;this.d=cf;},bd);be.ofSeqNonCopying=function(cc){var cd,ce;if(cc instanceof a.Array)return cc;else if(cc instanceof P)return N.ofList(cc);else if(cc===null)return[];else{cd=[];ce=bc.Get(cc);try{while(ce.MoveNext())cd.push(ce.Current());return cd;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}}};be.TreeReduce=function(cc,cd,ce){var cf;function cg(ch){return function(ci){var cj,ck;return ci<=0?cc:ci===1&&(ch>=0&&ch<cf)?N.get(ce,ch):(ck=ci/2>>0,cd((cg(ch))(ck),(cg(ch+ck))(ci-ck)));};}cf=N.length(ce);return(cg(0))(cf);};be.MapTreeReduce=function(cc,cd,ce,cf){var cg;function ch(ci){return function(cj){var ck,cl;return cj<=0?cd:cj===1&&(ci>=0&&ci<cg)?cc(N.get(cf,ci)):(cl=cj/2>>0,ce((ch(ci))(cl),(ch(ci+cl))(cj-cl)));};}cg=N.length(cf);return(ch(0))(cg);};bf.Static=function(cc){return new R({$:3,$0:cc});};bf.Updates=function(cc){return be.MapTreeReduce(function(cd){return cd.NChanged();},o.Const(),o.Map2Unit,cc.DynNodes);};bf.AppendTree=function(cc,cd){var ce;return cc===null?cd:cd===null?cc:(ce=new R({$:2,$0:cc,$1:cd}),(bf.SetFlags(ce,bf.Flags(cc)|bf.Flags(cd)),ce));};bf.EmptyAttr=function(){bN.$cctor();return bN.EmptyAttr;};bf.Dynamic=function(cc,cd){return new R({$:1,$0:new bV.New(cc,cd)});};bf.Insert=function(cc,cd){var ce,cf,cg;function ch(ci){var cj,ck;while(true)if(!(ci===null)){if(ci!=null&&ci.$==1)return ce.push(ci.$0);else if(ci!=null&&ci.$==2){cj=ci.$1;ck=ci.$0;ch(ck);ci=cj;}else return ci!=null&&ci.$==3?ci.$0(cc):ci!=null&&ci.$==4?cf.push(ci.$0):null;}else return null;}ce=[];cf=[];ch(cd);cg=ce.slice(0);return bP.New(cc,bf.Flags(cd),cg,cf.length===0?null:{$:1,$0:function(ci){M.iter(function(cj){cj(ci);},cf);}});};bf.HasExitAnim=function(cc){var cd;cd=2;return(cc.DynFlags&cd)===cd;};bf.GetExitAnim=function(cc){return bf.GetAnim(cc,function(cd,ce){return cd.NGetExitAnim(ce);});};bf.HasEnterAnim=function(cc){var cd;cd=1;return(cc.DynFlags&cd)===cd;};bf.GetEnterAnim=function(cc){return bf.GetAnim(cc,function(cd,ce){return cd.NGetEnterAnim(ce);});};bf.HasChangeAnim=function(cc){var cd;cd=4;return(cc.DynFlags&cd)===cd;};bf.GetChangeAnim=function(cc){return bf.GetAnim(cc,function(cd,ce){return cd.NGetChangeAnim(ce);});};bf.SetFlags=function(cc,cd){cc.flags=cd;};bf.Flags=function(cc){return cc!==null&&cc.hasOwnProperty("flags")?cc.flags:0;};bf.GetAnim=function(cc,cd){return bi.Concat(N.map(function(ce){return cd(ce,cc.DynElem);},cc.DynNodes));};bf.Sync=function(cc,cd){N.iter(function(ce){ce.NSync(cc);},cd.DynNodes);};bg.$cctor=function(){bg.$cctor=a.ignore;bg.LoadedTemplates=new T.New$5();bg.LocalTemplatesLoaded=false;bg.GlobalHoles=new T.New$5();bg.TextHoleRE="\\${([^}]+)}";bg.RenderedFullDocTemplate=null;};bh=S.HashSet=b_.Class({Add:function(cc){return this.add(cc);},Contains:function(cc){var cd;cd=this.data[this.hash(cc)];return cd==null?false:this.arrContains(cc,cd);},add:function(cc){var cd,ce;cd=this.hash(cc);ce=this.data[cd];return ce==null?(this.data[cd]=[cc],this.count=this.count+1,true):this.arrContains(cc,ce)?false:(ce.push(cc),this.count=this.count+1,true);},arrContains:function(cc,cd){var ce,cf,cg,ch;ce=true;cf=0;ch=cd.length;while(ce&&cf<ch)if(this.equals.apply(null,[cd[cf],cc]))ce=false;else cf=cf+1;return!ce;},ExceptWith:function(cc){var cd;cd=bc.Get(cc);try{while(cd.MoveNext())this.Remove(cd.Current());}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cc){var cd,ce,cf,cg;cd=0;ce=bZ.concat(this.data);for(cf=0,cg=ce.length-1;cf<=cg;cf++)N.set(cc,cf,ce[cf]);},IntersectWith:function(cc){var cd,ce,cf,cg,ch;cd=new bh.New$4(cc,this.equals,this.hash);ce=bZ.concat(this.data);for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce[cf];!cd.Contains(ch)?this.Remove(ch):void 0;}},Remove:function(cc){var cd;cd=this.data[this.hash(cc)];return cd==null?false:this.arrRemove(cc,cd)&&(this.count=this.count-1,true);},arrRemove:function(cc,cd){var ce,cf,cg,ch;ce=true;cf=0;ch=cd.length;while(ce&&cf<ch)if(this.equals.apply(null,[cd[cf],cc])){cd.splice.apply(cd,[cf,1]);ce=false;}else cf=cf+1;return!ce;},GetEnumerator:function(){return bc.Get(bZ.concat(this.data));},GetEnumerator0:function(){return bc.Get(bZ.concat(this.data));}},r,bh);bh.New$3=b_.Ctor(function(){bh.New$4.call(this,[],F.Equals,F.Hash);},bh);bh.New$4=b_.Ctor(function(cc,cd,ce){var cf;r.New.call(this);this.equals=cd;this.hash=ce;this.data=[];this.count=0;cf=bc.Get(cc);try{while(cf.MoveNext())this.add(cf.Current());}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}},bh);bh.New$2=b_.Ctor(function(cc){bh.New$4.call(this,cc,F.Equals,F.Hash);},bh);o=n.View=b_.Class({},null,o);bi.get_UseAnimations=function(){return bC.UseAnimations();};bi.Play=function(cc){var cd;cd=null;return _7.Delay(function(){return _7.Bind(bi.Run(a.ignore,bC.Actions(cc)),function(){bC.Finalize(cc);return _7.Return(null);});});};bi.Append=function(cc,cd){return{$:0,$0:bR.Append(cc.$0,cd.$0)};};bi.Run=function(cc,cd){var ce;function cf(cg){function ch(ci){return function(cj){var ck;ck=cj-ci;cd.Compute(ck);cc();return ck<=ce?void a.requestAnimationFrame(function(cl){(ch(ci))(cl);}):cg();};}a.requestAnimationFrame(function(ci){(ch(ci))(ci);});}ce=cd.Duration;return ce===0?_7.Zero():_7.FromContinuations(function(cg,ch,ci){return cf.apply(null,[cg,ch,ci]);});};bi.Concat=function(cc){return{$:0,$0:bR.Concat(M.map(bC.List,cc))};};bi.get_Empty=function(){return{$:0,$0:bR.Empty()};};bj.BatchUpdatesEnabled=function(){bD.$cctor();return bD.BatchUpdatesEnabled;};bl.StartProcessor=function(cc){var cd;function ce(){var cf;cf=null;return _7.Delay(function(){return _7.Bind(cc,function(){var cg;cg=cd[0];return cg===1?(cd[0]=0,_7.Zero()):cg===2?(cd[0]=1,ce()):_7.Zero();});});}cd=[0];return function(){var cf;cf=cd[0];cf===0?(cd[0]=1,_7.Start(ce(),null)):cf===1?cd[0]=2:void 0;};};bm.TryParse=function(cc){var cd;cd=ca.parse(cc);return a.isNaN(cd)?null:{$:1,$0:cd};};_0.TryParse=function(cc,cd,ce,cf){var cg,ch;cg=+cc;ch=cg===cg-cg%1&&cg>=cd&&cg<=ce;ch?cf.set(cg):void 0;return ch;};bn=n.ConcreteVar=b_.Class({get_View:function(){return this.view;},Set:function(cc){if(this.isConst)(function(cd){return cd("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cd){b$.log(cd);}));else{G.Obsolete(this.snap);this.current=cc;this.snap=G.New({$:2,$0:cc,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(cc){var cd;cd=cc(this.Get());cd!=null&&cd.$==1?this.Set(cd.$0):void 0;}},s,bn);bn.New=b_.Ctor(function(cc,cd,ce){var cf;cf=this;s.New.call(this);this.isConst=cc;this.current=ce;this.snap=cd;this.view=function(){return cf.snap;};this.id=bH.Int();},bn);bo.$cctor=function(){bo.$cctor=a.ignore;bo.EndPoint="?";bo.AjaxProvider=new bI.New();};bp.alreadyAdded=function(){return e.FailWith("An item with the same key has already been added.");};bp.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};bq=n.Elt=b_.Class({},B,bq);bq.New=function(cc,cd,ce){var cf,cg;cf=U.CreateElemNode(cc,cd,ce.docNode);cg=bJ.Create(ce.updates);return new bq.New$1({$:1,$0:cf},o.Map2Unit(bf.Updates(cf.Attr),cg.v),cc,cg);};bq.New$1=b_.Ctor(function(cc,cd,ce,cf){B.New.call(this,cc,cd);this.docNode$1=cc;this.updates$1=cd;this.elt=ce;this.rvUpdates=cf;},bq);br.New=function(cc,cd){return{k:cc,ct:cd};};bs.$cctor=function(){bs.$cctor=a.ignore;bs.noneCT=bt.New(false,[]);bs.scheduler=new bK.New();bs.defCTS=[new bL.New()];bs.Zero=_7.Return();bs.GetCT=function(cc){cc.k({$:0,$0:cc.ct});};};M.last=function(cc){var cd,ce;cd=bc.Get(cc);try{if(!cd.MoveNext())ce=M.insufficient();else{while(cd.MoveNext());ce=cd.Current();}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};M.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};M.tryHead=function(cc){var cd;cd=bc.Get(cc);try{return cd.MoveNext()?{$:1,$0:cd.Current()}:null;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};bt.New=function(cc,cd){return{c:cc,r:cd};};bu.BoolCheckedApply=function(){bN.$cctor();return bN.BoolCheckedApply;};bu.StringApply=function(){bN.$cctor();return bN.StringApply;};bu.ApplyValue=function(cc,cd,ce,cf,cg){return[cf(function(ch){function ci(){ce.UpdateMaybe(function(cj){var ck,cl;ck=cc(ch);return ck!=null&&ck.$==1&&(!F.Equals(ck.$0,cj)&&(cl=[ck,ck.$0],true))?cl[0]:null;});}ch.addEventListener("change",ci);ch.addEventListener("input",ci);ch.addEventListener("keypress",ci);}),cg(function(ch){return function(ci){var cj,ck;cj=cc(ch);return cj!=null&&cj.$==1&&(F.Equals(cj.$0,ci)&&(ck=cj.$0,true))?null:cd(ch,ci);};})];};bu.StringSet=function(){bN.$cctor();return bN.StringSet;};bu.StringGet=function(){bN.$cctor();return bN.StringGet;};bu.IntSetUnchecked=function(){bN.$cctor();return bN.IntSetUnchecked;};bu.IntGetUnchecked=function(){bN.$cctor();return bN.IntGetUnchecked;};bu.IntSetChecked=function(){bN.$cctor();return bN.IntSetChecked;};bu.IntGetChecked=function(){bN.$cctor();return bN.IntGetChecked;};bu.FloatSetUnchecked=function(){bN.$cctor();return bN.FloatSetUnchecked;};bu.FloatGetUnchecked=function(){bN.$cctor();return bN.FloatGetUnchecked;};bu.FloatSetChecked=function(){bN.$cctor();return bN.FloatSetChecked;};bu.FloatGetChecked=function(){bN.$cctor();return bN.FloatGetChecked;};bv.convertTextNode=function(cc){var cd,ce,cf,cg,ch,ci;cd=null;ce=0;cg=cc.textContent;ch=new a.RegExp(A.TextHoleRE(),"g");while(cd=ch.exec(cg),cd!==null){cc.parentNode.insertBefore(self.document.createTextNode(Y.string(cg,{$:1,$0:ce},{$:1,$0:ch.lastIndex-N.get(cd,0).length-1})),cc);ce=ch.lastIndex;ci=self.document.createElement("span");ci.setAttribute("ws-replace",N.get(cd,1).toLowerCase());cc.parentNode.insertBefore(ci,cc);}ch.lastIndex=0;cc.textContent=Y.string(cg,{$:1,$0:ce},null);};bv.failNotLoaded=function(cc){b$.warn("Instantiating non-loaded template",cc);};bv.fillTextHole=function(cc,cd,ce){var cf;cf=cc.querySelector("[ws-replace]");return F.Equals(cf,null)?(b$.warn("Filling non-existent text hole",ce),null):(cf.parentNode.replaceChild(self.document.createTextNode(cd),cf),{$:1,$0:cf.getAttribute("ws-replace")});};bv.removeHolesExcept=function(cc,cd){function ce(cf){A.foreachNotPreserved(cc,"["+cf+"]",function(cg){if(!cd.Contains(cg.getAttribute(cf)))cg.removeAttribute(cf);});}ce("ws-attr");ce("ws-onafterrender");ce("ws-var");A.foreachNotPreserved(cc,"[ws-hole]",function(cf){if(!cd.Contains(cf.getAttribute("ws-hole"))){cf.removeAttribute("ws-hole");while(cf.hasChildNodes())cf.removeChild(cf.lastChild);}});A.foreachNotPreserved(cc,"[ws-replace]",function(cf){if(!cd.Contains(cf.getAttribute("ws-replace")))cf.parentNode.removeChild(cf);});A.foreachNotPreserved(cc,"[ws-on]",function(cf){cf.setAttribute("ws-on",Q.concat(" ",N.filter(function(cg){return cd.Contains(N.get(Q.SplitChars(cg,[":"],1),1));},Q.SplitChars(cf.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(cc,"[ws-attr-holes]",function(cf){var cg,ch,ci,cj,ck;cg=Q.SplitChars(cf.getAttribute("ws-attr-holes"),[" "],1);for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=N.get(cg,ch);cf.setAttribute(cj,(ck=new a.RegExp(A.TextHoleRE(),"g"),cf.getAttribute(cj).replace(ck,function(cl,cm){return cd.Contains(cm)?cl:"";})));}});};bv.fillInstanceAttrs=function(cc,cd){var ce,cf,cg,ch,ci;bv.convertAttrs(cd);ce=cd.nodeName.toLowerCase();cf=cc.querySelector("[ws-attr="+ce+"]");if(F.Equals(cf,null))b$.warn("Filling non-existent attr hole",ce);else{cf.removeAttribute("ws-attr");for(cg=0,ch=cd.attributes.length-1;cg<=ch;cg++){ci=cd.attributes.item(cg);ci.name==="class"&&cf.hasAttribute("class")?cf.setAttribute("class",cf.getAttribute("class")+" "+ci.nodeValue):cf.setAttribute(ci.name,ci.nodeValue);}}};bv.mapHoles=function(cc,cd){function ce(cf){A.foreachNotPreserved(cc,"["+cf+"]",function(cg){var ch,ci;ch=(ci=null,[cd.TryGetValue(cg.getAttribute(cf).toLowerCase(),{get:function(){return ci;},set:function(cj){ci=cj;}}),ci]);ch[0]?cg.setAttribute(cf,ch[1]):void 0;});}ce("ws-hole");ce("ws-replace");ce("ws-attr");ce("ws-onafterrender");ce("ws-var");A.foreachNotPreserved(cc,"[ws-on]",function(cf){cf.setAttribute("ws-on",Q.concat(" ",N.map(function(cg){var ch,ci,cj;ch=Q.SplitChars(cg,[":"],1);ci=(cj=null,[cd.TryGetValue(N.get(ch,1),{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);return ci[0]?N.get(ch,0)+":"+ci[1]:cg;},Q.SplitChars(cf.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(cc,"[ws-attr-holes]",function(cf){var cg,ch,ci;cg=Q.SplitChars(cf.getAttribute("ws-attr-holes"),[" "],1);for(ch=0,ci=cg.length-1;ch<=ci;ch++)(function(){var cj;function ck(cl,cm){var cn;cn=e.KeyValue(cm);return cl.replace(new a.RegExp("\\${"+cn[0]+"}","ig"),"${"+cn[1]+"}");}cj=N.get(cg,ch);return cf.setAttribute(cj,(((b_.Curried3(M.fold))(ck))(cf.getAttribute(cj)))(cd));}());});};bv.fill=function(cc,cd,ce){while(true)if(cc.hasChildNodes())ce=cd.insertBefore(cc.lastChild,ce);else return null;};bv.convertAttrs=function(cc){var ce,cf,cg,ch,ci,cj,ck,cl;function cd(cm){var cn;cn=cc.getAttribute(cm);cn===null?void 0:cc.setAttribute(cm,cn.toLowerCase());}ce=cc.attributes;cf=[];cg=[];ch=[];for(ci=0,cj=ce.length-1;ci<=cj;ci++){ck=ce.item(ci);Q.StartsWith(ck.nodeName,"ws-on")&&ck.nodeName!=="ws-onafterrender"&&ck.nodeName!=="ws-on"?(cf.push(ck.nodeName),cg.push(Y.string(ck.nodeName,{$:1,$0:"ws-on".length},null)+":"+ck.nodeValue.toLowerCase())):!Q.StartsWith(ck.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(ck.nodeValue)?(ck.nodeValue=(cl=new a.RegExp(A.TextHoleRE(),"g"),ck.nodeValue.replace(cl,function(cm,cn){return"${"+cn.toLowerCase()+"}";})),ch.push(ck.nodeName)):void 0;}!(cg.length==0)?cc.setAttribute("ws-on",Q.concat(" ",cg)):void 0;!(ch.length==0)?cc.setAttribute("ws-attr-holes",Q.concat(" ",ch)):void 0;cd("ws-hole");cd("ws-replace");cd("ws-attr");cd("ws-onafterrender");cd("ws-var");N.iter(function(cm){cc.removeAttribute(cm);},cf);};bw=S.KeyCollection=b_.Class({GetEnumerator$1:function(){return bc.Get(M.map(function(cc){return cc.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,bw);bw.New=b_.Ctor(function(cc){r.New.call(this);this.d=cc;},bw);bx=n.DocElemNode=b_.Class({Equals:function(cc){return this.ElKey===cc.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bx);bx.New=function(cc,cd,ce,cf,cg,ch){var ci;return new bx((ci={Attr:cc,Children:cd,El:cf,ElKey:cg},(b_.SetOptional(ci,"Delimiters",ce),b_.SetOptional(ci,"Render",ch),ci)));};bA.New=function(cc,cd){return{PreviousNodes:cc,Top:cd};};bB.get_Empty=function(){return{$:0,$0:new bh.New$3()};};bB.FindAll=function(cc){var cd;function ce(ch,ci){var cj,ck,cl,cm,cn;while(true)switch(ch){case 0:if(ci!=null&&ci.$==0){ck=ci.$1;cl=ci.$0;ce(0,cl);ci=ck;}else if(ci!=null&&ci.$==1){cm=ci.$0;ci=cm;ch=1;}else if(ci!=null&&ci.$==2){cn=ci.$0;ci=cn.Current;}else return ci!=null&&ci.$==6?(cj=ci.$0.Holes,(function(co){return function(cp){N.iter(co,cp);};}(cg))(cj)):null;break;case 1:cd.push(ci);ci=ci.Children;ch=0;break;}}function cf(ch){return ce(0,ch);}function cg(ch){return ce(1,ch);}cd=[];cf(cc);return{$:0,$0:new bh.New$2(cd)};};bB.Filter=function(cc,cd){return{$:0,$0:bY.Filter(cc,cd.$0)};};bB.Except=function(cc,cd){return{$:0,$0:bY.Except(cc.$0,cd.$0)};};bB.ToArray=function(cc){return bY.ToArray(cc.$0);};bB.Intersect=function(cc,cd){return{$:0,$0:bY.Intersect(cc.$0,cd.$0)};};bC.UseAnimations=function(){bQ.$cctor();return bQ.UseAnimations;};bC.Actions=function(cc){return bC.ConcatActions(N.choose(function(cd){return cd.$==1?{$:1,$0:cd.$0}:null;},bR.ToArray(cc.$0)));};bC.Finalize=function(cc){N.iter(function(cd){if(cd.$==0)cd.$0();},bR.ToArray(cc.$0));};bC.ConcatActions=function(cc){var cd,ce,cf,cg;cd=be.ofSeqNonCopying(cc);ce=N.length(cd);return ce===0?bC.Const():ce===1?N.get(cd,0):(cf=M.max(M.map(function(ch){return ch.Duration;},cd)),(cg=N.map(function(ch){return bC.Prolong(cf,ch);},cd),bC.Def(cf,function(ch){N.iter(function(ci){ci.Compute(ch);},cg);})));};bC.List=function(cc){return cc.$0;};bC.Const=function(cc){return bC.Def(0,function(){return cc;});};bC.Def=function(cc,cd){return{Compute:cd,Duration:cc};};bC.Prolong=function(cc,cd){var ce,cf,cg;ce=cd.Compute;cf=cd.Duration;cg=b4.Create(function(){return cd.Compute(cd.Duration);});return{Compute:function(ch){return ch>=cf?cg.f():ce(ch);},Duration:cc};};bD.$cctor=function(){bD.$cctor=a.ignore;bD.BatchUpdatesEnabled=true;};bF=d.OperationCanceledException=b_.Class({},bE,bF);bF.New=b_.Ctor(function(cc){bF.New$1.call(this,"The operation was canceled.",null,cc);},bF);bF.New$1=b_.Ctor(function(cc,cd,ce){this.message=cc;this.inner=cd;bb.setPrototypeOf(this,bF.prototype);this.ct=ce;},bF);bG.Activate=function(cc){var cd,cf,cg,ch,ci,cj,ck;function ce(cl){var cm,cn,co,cp,cq;if(F.Equals(cl,null))return cl;else if(typeof cl=="object"){if(cl instanceof a.Array)return bG.shallowMap(ce,cl);else{cm=bG.shallowMap(ce,cl.$V);cn=cl.$T;if(cn===void 0)return cm;else{co=N.get(cf,cn);if(co===1)return O.ofArray(cm);else if(co===2)return self.WebSharper.Decimal.CreateDecimalBits(cm);else{cp=new(N.get(cf,cn))();for(var cr in cm)if(function(cs){cp[cs]=cm[cs];return false;}(cr))break;return cp;}}}}else return cl;}cf=cc?cc.$TYPES:void 0;if(cf===void 0)cd=cc;else{for(cg=0,ch=N.length(cf)-1;cg<=ch;cg++){ck=N.get(cf,cg);switch(!F.Equals(ck,null)&&ck.length===3?N.get(ck,0)==="WebSharper"?N.get(ck,1)==="List"?N.get(ck,2)==="T"?0:(cj=ck,2):(cj=ck,2):(cj=ck,2):!F.Equals(ck,null)&&ck.length===2?N.get(ck,0)==="WebSharper"?N.get(ck,1)==="Decimal"?1:(cj=ck,2):(cj=ck,2):(cj=ck,2)){case 0:ci=1;break;case 1:ci=2;break;case 2:ci=bG.lookup(cj);break;}N.set(cf,cg,ci);}cd=cc.$DATA;}return ce(cd);};bG.shallowMap=function(cc,cd){var ce,cf;if(cd instanceof a.Array)return N.map(cc,cd);else if(typeof cd=="object"){ce={};for(var cg in cd)if(function(ch){ce[ch]=cc(cd[ch]);return false;}(cg))break;return ce;}else return cd;};bG.lookup=function(cc){var cd,ce,cf,cg,ch;cf=N.length(cc);cd=self;ce=0;while(ce<cf){cg=N.get(cc,ce);ch=cd[cg];!F.Equals(typeof ch,void 0)?(cd=ch,ce=ce+1):e.FailWith("Invalid server reply. Failed to find type: "+cg);}return cd;};bH.Int=function(){bH.set_counter(bH.counter()+1);return bH.counter();};bH.set_counter=function(cc){b1.$cctor();b1.counter=cc;};bH.counter=function(){b1.$cctor();return b1.counter;};bI=v.XhrProvider=b_.Class({Async:function(cc,cd,ce,cf,cg){v.ajax(true,cc,cd,ce,cf,cg,function(){v.ajax(true,cc,cd,ce,cf,cg,void 0);});}},r,bI);bI.New=b_.Ctor(function(){r.New.call(this);},bI);bJ=n.Updates=b_.Class({},null,bJ);bJ.Create=function(cc){var cd;cd=null;cd=bJ.New(cc,null,function(){var ce;ce=cd.s;return ce===null?(ce=G.Copy(cd.c()),cd.s=ce,G.WhenObsoleteRun(ce,function(){cd.s=null;}),ce):ce;});return cd;};bJ.New=function(cc,cd,ce){return new bJ({c:cc,s:cd,v:ce});};bK=_7.Scheduler=b_.Class({Fork:function(cc){var cd;cd=this;this.robin.push(cc);this.idle?(this.idle=false,a.setTimeout(function(){cd.tick();},0)):void 0;},tick:function(){var cc,cd,ce;cd=this;ce=ca.now();cc=true;while(cc)if(this.robin.length===0){this.idle=true;cc=false;}else{(this.robin.shift())();ca.now()-ce>40?(a.setTimeout(function(){cd.tick();},0),cc=false):void 0;}}},r,bK);bK.New=b_.Ctor(function(){r.New.call(this);this.idle=true;this.robin=[];},bK);bL=d.CancellationTokenSource=b_.Class({},r,bL);bL.New=b_.Ctor(function(){r.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bL);bM.$cctor=function(){bM.$cctor=a.ignore;bM.justDlls=[{$:0,$0:"/dlls/WebSharper.Main.dll"},{$:0,$0:"/dlls/WebSharper.Collections.dll"},{$:0,$0:"/dlls/WebSharper.Control.dll"},{$:0,$0:"/dlls/WebSharper.Web.dll"},{$:0,$0:"/dlls/WebSharper.Sitelets.dll"},{$:0,$0:"/dlls/WebSharper.UI.dll"},{$:0,$0:"/dlls/WebSharper.UI.Templating.Runtime.dll"},{$:0,$0:"/dlls/WebSharper.Data.dll"}];};bN.$cctor=function(){var cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;bN.$cctor=a.ignore;bN.EmptyAttr=null;bN.BoolCheckedApply=b_.Curried3(function(cm,cn,co){return[cn(function(cp){cp.addEventListener("change",function(){return!F.Equals(cm.Get(),cp.checked)?cm.Set(cp.checked):null;});}),co(function(cp){return function(cq){cp.checked=cq;};})];});bN.StringSet=function(cm){return function(cn){cm.value=cn;};};bN.StringGet=function(cm){return{$:1,$0:cm.value};};bN.StringApply=(cc=bu.StringGet(),(cd=bu.StringSet(),b_.Curried(bu.ApplyValue,3,[cc,function(cm,cn){return(cd(cm))(cn);}])));bN.IntSetUnchecked=function(cm){return function(cn){cm.value=a.String(cn);};};bN.IntGetUnchecked=function(cm){var cn,co;cn=cm.value;return bT.isBlank(cn)?{$:1,$0:0}:(co=+cn,co!==co>>0?null:{$:1,$0:co});};bN.IntApplyUnchecked=(ce=bu.IntGetUnchecked(),(cf=bu.IntSetUnchecked(),b_.Curried(bu.ApplyValue,3,[ce,function(cm,cn){return(cf(cm))(cn);}])));bN.IntSetChecked=function(cm){return function(cn){var co;co=cn.get_Input();return cm.value!==co?void(cm.value=co):null;};};bN.IntGetChecked=function(cm){var cn,co,cp;cn=cm.value;return{$:1,$0:bT.isBlank(cn)?(cm.checkValidity?cm.checkValidity():true)?new bU({$:2,$0:cn}):new bU({$:1,$0:cn}):(co=(cp=0,[_0.TryParseInt32(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]),co[0]?new bU({$:0,$0:co[1],$1:cn}):new bU({$:1,$0:cn}))};};bN.IntApplyChecked=(cg=bu.IntGetChecked(),(ch=bu.IntSetChecked(),b_.Curried(bu.ApplyValue,3,[cg,function(cm,cn){return(ch(cm))(cn);}])));bN.FloatSetUnchecked=function(cm){return function(cn){cm.value=a.String(cn);};};bN.FloatGetUnchecked=function(cm){var cn,co;cn=cm.value;return bT.isBlank(cn)?{$:1,$0:0}:(co=+cn,a.isNaN(co)?null:{$:1,$0:co});};bN.FloatApplyUnchecked=(ci=bu.FloatGetUnchecked(),(cj=bu.FloatSetUnchecked(),b_.Curried(bu.ApplyValue,3,[ci,function(cm,cn){return(cj(cm))(cn);}])));bN.FloatSetChecked=function(cm){return function(cn){var co;co=cn.get_Input();return cm.value!==co?void(cm.value=co):null;};};bN.FloatGetChecked=function(cm){var cn,co;cn=cm.value;return{$:1,$0:bT.isBlank(cn)?(cm.checkValidity?cm.checkValidity():true)?new bU({$:2,$0:cn}):new bU({$:1,$0:cn}):(co=+cn,a.isNaN(co)?new bU({$:1,$0:cn}):new bU({$:0,$0:co,$1:cn}))};};bN.FloatApplyChecked=(ck=bu.FloatGetChecked(),(cl=bu.FloatSetChecked(),b_.Curried(bu.ApplyValue,3,[ck,function(cm,cn){return(cl(cm))(cn);}])));};bP.New=function(cc,cd,ce,cf){var cg;cg={DynElem:cc,DynFlags:cd,DynNodes:ce};b_.SetOptional(cg,"OnAfterRender",cf);return cg;};bQ.$cctor=function(){bQ.$cctor=a.ignore;bQ.CubicInOut=bX.Custom(function(cc){var cd;cd=cc*cc;return 3*cd-2*(cd*cc);});bQ.UseAnimations=true;};bR.Append=function(cc,cd){return cc.$==0?cd:cd.$==0?cc:{$:2,$0:cc,$1:cd};};bR.ToArray=function(cc){var cd;function ce(cf){var cg,ch;while(true)if(cf.$==1)return cd.push(cf.$0);else if(cf.$==2){cg=cf.$1;ch=cf.$0;ce(ch);cf=cg;}else return cf.$==3?N.iter(function(ci){cd.push(ci);},cf.$0):null;}cd=[];ce(cc);return cd.slice(0);};bR.Concat=function(cc){var cd;cd=be.ofSeqNonCopying(cc);return be.TreeReduce(bR.Empty(),bR.Append,cd);};bR.Empty=function(){b5.$cctor();return b5.Empty;};bS.Clear=function(cc){cc.splice(0,N.length(cc));};bT.isBlank=function(cc){return Q.forall(b2.IsWhiteSpace,cc);};bU=n.CheckedInput=b_.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bU);bV=n.DynamicAttrNode=b_.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cc){return bi.get_Empty();},NGetEnterAnim:function(cc){return bi.get_Empty();},NGetChangeAnim:function(cc){return bi.get_Empty();},NSync:function(cc){if(this.dirty){(this.push(cc))(this.value);this.dirty=false;}}},r,bV);bV.New=b_.Ctor(function(cc,cd){var ce;ce=this;r.New.call(this);this.push=cd;this.value=void 0;this.dirty=false;this.updates=o.Map(function(cf){ce.value=cf;ce.dirty=true;},cc);},bV);bW.$cctor=function(){var cc;bW.$cctor=a.ignore;bW.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bW.rtagName=new a.RegExp("<([\\w:]+)");bW.rhtml=new a.RegExp("<|&#?\\w+;");bW.wrapMap=(cc=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:cc,tbody:cc,tfoot:cc,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bW.defaultWrap=[0,"",""];};bX=n.Easing=b_.Class({},r,bX);bX.Custom=function(cc){return new bX.New(cc);};bX.New=b_.Ctor(function(cc){r.New.call(this);this.transformTime=cc;},bX);bY.Filter=function(cc,cd){return new bh.New$2(N.filter(cc,bY.ToArray(cd)));};bY.Except=function(cc,cd){var ce;ce=new bh.New$2(bY.ToArray(cd));ce.ExceptWith(bY.ToArray(cc));return ce;};bY.ToArray=function(cc){var cd;cd=N.create(cc.get_Count(),void 0);cc.CopyTo(cd);return cd;};bY.Intersect=function(cc,cd){var ce;ce=new bh.New$2(bY.ToArray(cc));ce.IntersectWith(bY.ToArray(cd));return ce;};bZ.concat=function(cc){var cd,ce;cd=[];for(var cf in cc)cd.push.apply(cd,cc[cf]);return cd;};b0=d.FormatException=b_.Class({},bE,b0);b0.New$1=b_.Ctor(function(cc){this.message=cc;bb.setPrototypeOf(this,b0.prototype);},b0);b1.$cctor=function(){b1.$cctor=a.ignore;b1.counter=0;};b2.IsWhiteSpace=function(cc){return cc.match(new a.RegExp("\\s"))!==null;};b3.Children=function(cc,cd){var ce,cf,cg;if(cd!=null&&cd.$==1){cg=[];ce=cd.$0[0].nextSibling;while(ce!==cd.$0[1]){cg.push(ce);ce=ce.nextSibling;}return{$:0,$0:cg};}else return{$:0,$0:N.init(cc.childNodes.length,(cf=cc.childNodes,function(ch){return cf[ch];}))};};b3.Except=function(cc,cd){var ce;ce=cc.$0;return{$:0,$0:N.filter(function(cf){return N.forall(function(cg){return!(cf===cg);},ce);},cd.$0)};};b3.Iter=function(cc,cd){N.iter(cc,cd.$0);};b3.DocChildren=function(cc){var cd;function ce(cf){var cg,ch,ci,cj;while(true){if(cf!=null&&cf.$==2){ch=cf.$0;cf=ch.Current;}else if(cf!=null&&cf.$==1)return cd.push(cf.$0.El);else if(cf==null)return null;else if(cf!=null&&cf.$==5)return cd.push(cf.$0);else if(cf!=null&&cf.$==4)return cd.push(cf.$0.Text);else if(cf!=null&&cf.$==6){cg=cf.$0.Els;return(function(ck){return function(cl){N.iter(ck,cl);};}(function(ck){if(ck==null||ck.constructor===bb)ce(ck);else cd.push(ck);}))(cg);}else{ci=cf.$1;cj=cf.$0;ce(cj);cf=ci;}}}cd=[];ce(cc.Children);return{$:0,$0:be.ofSeqNonCopying(cd)};};b4.Create=function(cc){return b7.New(false,cc,b4.forceLazy);};b4.forceLazy=function(){var cc;cc=this.v();this.c=true;this.v=cc;this.f=b4.cachedLazy;return cc;};b4.cachedLazy=function(){return this.v;};b5.$cctor=function(){b5.$cctor=a.ignore;b5.Empty={$:0};};b7.New=function(cc,cd,ce){return{c:cc,v:cd,f:ce};};b_.OnLoad(function(){c.main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

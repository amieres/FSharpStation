function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;a=self;b=a.FsRoot=a.FsRoot||{};c=b.LibraryJS=b.LibraryJS||{};d=c.CodeMirrorGenAdapter=c.CodeMirrorGenAdapter||{};e=d.CodeMirrorRT=d.CodeMirrorRT||{};f=b.TestingJS=b.TestingJS||{};g=f.CodeMirror=f.CodeMirror||{};h=a.WebSharper=a.WebSharper||{};i=h.Obj=h.Obj||{};j=c.CodeMirror=c.CodeMirror||{};k=j.Editor=j.Editor||{};l=j.Pos=j.Pos||{};m=h.Operators=h.Operators||{};n=c.GenEditor=c.GenEditor||{};o=n.Position=n.Position||{};p=n.GenEditor=n.GenEditor||{};q=n.GenEditorHook=n.GenEditorHook||{};r=h.Arrays=h.Arrays||{};s=c.LoadFiles=c.LoadFiles||{};t=a.EventTarget;u=h.Unchecked=h.Unchecked||{};v=j.Lint=j.Lint||{};w=h.Seq=h.Seq||{};x=v.Response=v.Response||{};y=n.Annotation=n.Annotation||{};z=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};A=n.AnnotationType=n.AnnotationType||{};B=h.UI=h.UI||{};C=B.Var=B.Var||{};D=h.Utils=h.Utils||{};E=c.Pojo=c.Pojo||{};F=h.JavaScript=h.JavaScript||{};G=F.Pervasives=F.Pervasives||{};H=n.Completion=n.Completion||{};I=B.Var$1=B.Var$1||{};J=B.HtmlModule=B.HtmlModule||{};K=J.attr=J.attr||{};L=a.Node;M=F.JS=F.JS||{};N=B.View=B.View||{};O=h.Strings=h.Strings||{};P=h.Concurrency=h.Concurrency||{};Q=B.AttrProxy=B.AttrProxy||{};R=B.Doc=B.Doc||{};S=c.Element=c.Element||{};T=h.Enumerator=h.Enumerator||{};U=T.T=T.T||{};V=a.Object;W=h.List=h.List||{};X=W.T=W.T||{};Y=B.ConcreteVar=B.ConcreteVar||{};Z=B.Snap=B.Snap||{};_0=B.Abbrev=B.Abbrev||{};_1=_0.Fresh=_0.Fresh||{};_2=B.Client=B.Client||{};_3=_2.Templates=_2.Templates||{};_4=a.WindowOrWorkerGlobalScope;_5=P.AsyncBody=P.AsyncBody||{};_6=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_7=P.CT=P.CT||{};_8=B.Attrs=B.Attrs||{};_9=B.DomUtility=B.DomUtility||{};_=_0.Async=_0.Async||{};$=B.AttrModule=B.AttrModule||{};ba=B.Docs=B.Docs||{};bb=h.Collections=h.Collections||{};bc=bb.Dictionary=bb.Dictionary||{};bd=P.Scheduler=P.Scheduler||{};be=h.CancellationTokenSource=h.CancellationTokenSource||{};bf=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bg=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bh=bb.HashSet=bb.HashSet||{};bi=B.An=B.An||{};bj=_2.Settings=_2.Settings||{};bk=_0.Mailbox=_0.Mailbox||{};bl=a.Error;bm=h.OperationCanceledException=h.OperationCanceledException||{};bn=B.Elt=B.Elt||{};bo=B.Array=B.Array||{};bp=B.DocElemNode=B.DocElemNode||{};bq=a.CharacterData;br=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bs=bb.DictionaryUtil=bb.DictionaryUtil||{};bt=_3.Prepare=_3.Prepare||{};bu=h.Slice=h.Slice||{};bv=bb.KeyCollection=bb.KeyCollection||{};bw=_2.Docs=_2.Docs||{};bx=bw.RunState=bw.RunState||{};by=bw.NodeSet=bw.NodeSet||{};bz=B.Anims=B.Anims||{};bA=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bB=B.Updates=B.Updates||{};bC=_2.Attrs=_2.Attrs||{};bD=bC.Dyn=bC.Dyn||{};bE=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bF=B.AppendList=B.AppendList||{};bG=h.Queue=h.Queue||{};bH=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bI=B.Easing=B.Easing||{};bJ=_0.HashSet=_0.HashSet||{};bK=bb.HashSetUtil=bb.HashSetUtil||{};bL=B.DynamicAttrNode=B.DynamicAttrNode||{};bM=bw.DomNodes=bw.DomNodes||{};bN=h.Lazy=h.Lazy||{};bO=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bP=h.LazyExtensionsProxy=h.LazyExtensionsProxy||{};bQ=bP.LazyRecord=bP.LazyRecord||{};bR=a.IntelliFactory;bS=bR&&bR.Runtime;bT=a.Math;bU=a.console;bV=a.jQuery;bW=a.Date;d.iterEditor=function(bX,bY){var bZ;bZ=bX.editorO;bZ!=null&&bZ.$==1?bY(bZ.$0):void 0;};d.mapEditor=function(bX,bY){var bZ;bZ=bX.editorO;return bZ!=null&&bZ.$==1?{$:1,$0:bY(bZ.$0)}:null;};d.bindEditor=function(bX,bY){var bZ;bZ=bX.editorO;return bZ!=null&&bZ.$==1?bY(bZ.$0):null;};d.posGen2Ed=function(bX){return l.New(bX.line-1,bX.col-1);};d.posEd2Gen=function(bX){return o.New(bX.line+1,bX.ch+1);};d.getToolTipFunction=function(bX,bY){var bZ,b0,b1;function b2(b3){var b4,b5,b6,b7;b4=bX.editorHook.getWordAt(b3);return b4==null?null:(b5=b4.$0,(b6=b5[0],(b7=b5[1],O.Trim(b6)===""?null:{$:1,$0:[b6,b7]})));}bZ=(b0=bX.toolTip,b0==null?null:{$:1,$0:(b1=b0.$0,function(b3){var b4;P.Start((b4=null,P.Delay(function(){var b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;b5=b3.somethingSelected()?(b6=b3.listSelections(),[d.posEd2Gen(r.get(b6,0).anchor),d.posEd2Gen(r.get(b6,0).head)]):(b7=d.posEd2Gen(b3.getCursor()),(b8=(b9=(b_=b2(b7),b_==null?b2(o.New(b7.line,b7.col-1)):b_),b9==null?null:{$:1,$0:(b$=b9.$0,(ca=b$[0],(cb=b$[1],[cb,o.New(cb.line,cb.col+ca.length)])))}),b8==null?[b7,o.New(b7.line,b7.col+2)]:b8.$0));cc=b5[1];cd=b5[0];return P.Bind((b1(bX))(cd),function(ce){ce==null?void 0:bY(cd,cc,ce.$0);return P.Zero();});})),null);})});return bZ==null?a.ignore:bZ.$0;};d.generateDoc=function(bX,bY,bZ){var b0;return R.Async((b0=null,P.Delay(function(){return P.Return(R.Element("div",[Q.OnAfterRenderImpl(function(b1){var b2;P.Start((b2=null,P.Delay(function(){return P.Bind(s.LoadFilesAsync(j.includes()),function(){var b3;b3=self.CodeMirror(b1.parentElement,bX.options);b1.parentNode.removeChild(b1);bX.editorO={$:1,$0:b3};bZ(b3);b3.on("changes",function(b4){bX.onChange([b4[0],b4[1]]);});return P.Zero();});})),null);})],[]));})));};d.getValue=function(bX){var bY;bY=d.mapEditor(bX,function(bZ){return bZ.getValue();});return bY==null?"":bY.$0;};d.setValue=function(bX,bY){d.iterEditor(bX,function(bZ){bZ.setValue(bY);});};d.getWordAt=function(bX,bY){return d.bindEditor(bX,function(bZ){var b0;b0=bZ.findWordAt(d.posGen2Ed(bY));return!b0||u.Equals(b0.anchor,b0.head)?null:{$:1,$0:[bZ.getRange(b0.anchor,b0.head),d.posEd2Gen(b0.anchor)]};});};d.showAnnotations=function(bX,bY){d.iterEditor(bX,function(bZ){var b0;b0=r.ofSeq(w.map(function(b1){var b2;return x.New(b1.message,(b2=b1.severity,b2.$==0?"error":b2.$==1?"warning":"info"),d.posGen2Ed(b1.startP),d.posGen2Ed(b1.endP));},bY));v.setLint(bZ,function(b1){b1[1](b0);});});};d.setDisabled=function(bX,bY){d.iterEditor(bX,function(bZ){bZ.setOption("readOnly",bY&&"nocursor");});};d.indexFromPos=function(bX,bY){var bZ;bZ=d.mapEditor(bX,function(b0){return b0.indexFromPos(d.posGen2Ed(bY));});return bZ==null?-1:bZ.$0;};d.posFromIndex=function(bX,bY){var bZ;bZ=d.mapEditor(bX,function(b0){return d.posEd2Gen(b0.posFromIndex(bY));});return bZ==null?o.New(1,1):bZ.$0;};d.newHook=function(bX){function bY(bZ,b0){return d.generateDoc(bX,bZ,b0);}return q.New(function(bZ){return function(b0){return bY(bZ,b0);};},function(){return d.getValue(bX);},function(bZ){d.setValue(bX,bZ);},function(bZ){d.setDisabled(bX,bZ);},function(bZ){d.showAnnotations(bX,bZ);},function(bZ){return d.posFromIndex(bX,bZ);},function(bZ){return d.indexFromPos(bX,bZ);},function(bZ){return d.getWordAt(bX,bZ);},function(){return bX.uri;},function(bZ){bX.uri=bZ;},function(bZ){bX.onChange=bZ;});};d.newRT=function(bX,bY){return e.New(null,a.ignore,"",bX,bY);};d.newVar=function(bX,bY,bZ){return n.newVar(d.newHook(d.newRT(bX,bY)),bZ);};e.New=function(bX,bY,bZ,b0,b1){return{editorO:bX,onChange:bY,uri:bZ,options:b0,overrides:b1};};g.annotationsV=function(){z.$cctor();return z.annotationsV;};g.transformAnnotations=function(bX){var bY,bZ;function b0(b1,b2,b3,b4,b5,b6){return y.New(o.New(b2,b3),o.New(b4,b5),b1==="Err"?A.Error:b1==="Warn"?A.Warning:b1==="Hint"?A.Hint:{$:4,$0:b1},b6);}bY="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\)\\: \"([^\"]+?)\"\\.";return w.map(function(b1){return b0(b1[0],b1[1],b1[2],b1[3],b1[4],b1[5]);},w.choose(function(b1){var b2,b3,b4;return(b3=c.REGEX$1(bY,"",b1),b3!=null&&b3.$==1&&((b4=b3.$0,!u.Equals(b4,null)&&b4.length===7)&&(b2=[r.get(b3.$0,3),r.get(b3.$0,2),r.get(b3.$0,6),r.get(b3.$0,5),r.get(b3.$0,4),r.get(b3.$0,1)],true)))?{$:1,$0:[b2[5],m.toInt(a.Number(b2[1])),m.toInt(a.Number(b2[0])),m.toInt(a.Number(b2[4])),m.toInt(a.Number(b2[3])),b2[2]]}:null;},(bZ=c.REGEX$1(bY,"g",bX),bZ!=null&&bZ.$==1?bZ.$0:[])));};g.showToolTip=function(bX,bY,bZ){var b0;b0=g.annotationsV().Get()+((((((bS.Curried(function(b1,b2,b3,b4,b5,b6){return b1("\nInfo ("+a.String(b2)+", "+a.String(b3)+") - ("+a.String(b4)+", "+a.String(b5)+"): "+D.prettyPrint(b6)+".");},6))(a.id))(bX.line))(bX.col))(bY.line))(bY.col))(bZ);g.annotationsV().Set(b0);};g.codeMirrorNew=function(bX){return d.newVar(E.newPojo([["mode","fsharp"],["theme","rubyblue"],["lineNumbers",true],["matchBrackets",true],["gutters",["CodeMirror-lint-markers"]]]),null,bX);};g.getToolTip=function(bX,bY){var bZ;bZ=null;return P.Delay(function(){var b0;b0=bX.editorHook.getWordAt(bY);return b0!=null&&b0.$==1?P.Return({$:1,$0:(function(b1){return function(b2){return b1("The word is: "+D.toSafe(b2));};}(a.id))(b0.$0[0])}):P.Return(null);});};g.declaration=function(bX,bY){var bZ;bZ=null;return P.Delay(function(){var b0,b1;b0=bX.editorHook.getWordAt(bY);return b0!=null&&b0.$==1?(b1=bX.editorHook.getValue().indexOf(b0.$0[0]),b1<0?P.Return(null):P.Return({$:1,$0:[bX.editorHook.posFromIndex(b1),bX.editorHook.getUri()]})):P.Return(null);});};g.autoCompletion=function(bX,bY){var bZ;bZ=null;return P.Delay(function(){return P.Return([H.New("F","Hello","",[bY,bY]),H.New("F","How","",[bY,bY]),H.New("F","Are","",[bY,bY]),H.New("F","You","",[bY,bY])]);});};g.main=function(){var bX,bY,bZ,b0,b1,b2;bX=I.Create$1("Hello there.\nHello there.\nHello there.\nHello there.\n");bY=n.onRender(function(b3){var b4,b5,b6;b4=b3.editorO;b4==null?void 0:(b5=b4.$0,b6=d.getToolTipFunction(b3,g.showToolTip),b5.addKeyMap(E.newPojo([["F2",b6],["F11",function(){b5.setOption("fullScreen",!b5.getOption("fullScreen"));}],["Tab",function(){b5.replaceSelection("    ","end");}]])),b5.on("dblclick",b6));},(bZ=g.codeMirrorNew(bX),p.New(bZ["var"],bZ.disabled,N.Map(g.transformAnnotations,g.annotationsV().get_View()),bZ.onChange,bZ.onRender,{$:1,$0:function(b3){return function(b4){return g.autoCompletion(b3,b4);};}},{$:1,$0:function(b3){return function(b4){return g.getToolTip(b3,b4);};}},{$:1,$0:function(b3){return function(b4){return g.declaration(b3,b4);};}},bZ.editorO,bZ.editorHook)));b0=R.Async((b1=null,P.Delay(function(){return P.Bind(s.LoadFilesAsync(["/EPFileX/codemirror/content/editor.css","/EPFileX/codemirror/content/codemirror.css","/EPFileX/codemirror/scripts/addon/display/fullscreen.css","/EPFileX/codemirror/scripts/addon/dialog/dialog.css","/EPFileX/codemirror/scripts/addon/hint/show-hint.css","/EPFileX/codemirror/scripts/addon/lint/lint.css","/EPFileX/codemirror/content/theme/rubyblue.css"]),function(){return P.Return(R.Element("div",[],[R.Element("div",[Q.Create("style","height: 400px; width: 800px")],[n.generateDoc(bY)]),R.Element("div",[],[R.TextNode("These are the annotations that create tooltips, warnings and errors:")]),R.InputArea([Q.Create("style","height: 100px; width: 600px")],I.Lens(g.annotationsV(),a.id,function(b3,b4){return b4;})),R.Element("div",[],[R.TextView(bX.get_View())])]));});})));b2=self.document.body;_3.LoadLocalTemplates("");R.Run(b2,b0);};i=h.Obj=bS.Class({Equals:function(bX){return this===bX;},GetHashCode:function(){return -1;}},null,i);i.New=bS.Ctor(function(){},i);k=j.Editor=bS.Class({},i,k);l.New=function(bX,bY){return{line:bX,ch:bY};};m.toInt=function(bX){var bY;bY=m.toUInt(bX);return bY>=2147483648?bY-4294967296:bY;};m.toUInt=function(bX){return(bX<0?bT.ceil(bX):bT.floor(bX))>>>0;};m.FailWith=function(bX){throw new bl(bX);};m.KeyValue=function(bX){return[bX.K,bX.V];};o.New=function(bX,bY){return{line:bX,col:bY};};p.New=function(bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6){return{"var":bX,disabled:bY,annotations:bZ,onChange:b0,onRender:b1,autoCompletion:b2,toolTip:b3,declaration:b4,editorO:b5,editorHook:b6};};q.New=function(bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7){return{generateDoc:bX,getValue:bY,setValue:bZ,setDisabled:b0,showAnnotations:b1,posFromIndex:b2,indexFromPos:b3,getWordAt:b4,getUri:b5,setUri:b6,hookOnChange:b7};};r.get=function(bX,bY){r.checkBounds(bX,bY);return bX[bY];};r.checkBounds=function(bX,bY){if(bY<0||bY>=bX.length)m.FailWith("Index was outside the bounds of the array.");};r.length=function(bX){return bX.dims===2?bX.length*bX.length:bX.length;};r.set=function(bX,bY,bZ){r.checkBounds(bX,bY);bX[bY]=bZ;};s.LoadFilesAsync=function(bX){var bY;bY=null;return P.Delay(function(){return P.For(bX,function(bZ){return P.Bind(s.LoadFile(bZ),function(){return P.Return(null);});});});};s.LoadFile=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;function ca(cc,cd){return O.EndsWith(cd,cc)?{$:1,$0:null}:null;}function cb(cc,cd){try{b_.onload=cc;self.document.head.appendChild(b_);}catch(ce){cd(ce);}}bY=(bZ=((b1=ca(".js",bX),b1!=null&&b1.$==1)?!self.document.querySelector("script[src='"+bX+"']")||((b2=ca(".fsx",bX),b2!=null&&b2.$==1)?!self.document.querySelector("script[src='"+bX+"']")||(b3=ca(".fs",bX),b3!=null&&b3.$==1)&&!self.document.querySelector("script[src='"+bX+"']"):(b4=ca(".fs",bX),b4!=null&&b4.$==1)&&!self.document.querySelector("script[src='"+bX+"']")):(b5=ca(".fsx",bX),b5!=null&&b5.$==1)?!self.document.querySelector("script[src='"+bX+"']")||(b6=ca(".fs",bX),b6!=null&&b6.$==1)&&!self.document.querySelector("script[src='"+bX+"']"):(b7=ca(".fs",bX),b7!=null&&b7.$==1)&&!self.document.querySelector("script[src='"+bX+"']"))?{$:1,$0:s.createScript(bX)}:(b8=ca(".css",bX),b8!=null&&b8.$==1)?{$:1,$0:s.createCss(bX)}:(b9=ca(".html",bX),b9!=null&&b9.$==1)?{$:1,$0:s.createHtml(bX)}:null,bZ==null?null:{$:1,$0:(b_=bZ.$0,P.FromContinuations(function(cc,cd,ce){return cb.apply(null,[cc,cd,ce]);}))});return bY==null?(b$=null,P.Delay(function(){return P.Return(null);})):bY.$0;};s.createScript=function(bX){var bY;bY=self.document.createElement("script");bY.setAttribute("type","text/javascript");bY.setAttribute("src",bX);return bY;};s.createCss=function(bX){var bY;bY=self.document.createElement("link");bY.setAttribute("rel","stylesheet");bY.setAttribute("type","text/css");bY.setAttribute("href",bX);return bY;};s.createHtml=function(bX){var bY;bY=self.document.createElement("link");bY.setAttribute("rel","import");bY.setAttribute("type","text/html");bY.setAttribute("href",bX);return bY;};j.includes=function(){z.$cctor();return z.includes;};c.REGEX$1=function(bX,bY,bZ){var b0;return bZ===null?null:(b0=(new a.String(bZ)).match(new a.RegExp(bX,bY)),u.Equals(b0,null)?null:!u.Equals(b0,null)&&b0.length===0?null:{$:1,$0:b0});};u.Equals=function(bX,bY){var bZ,b0,b1,b2;if(bX===bY)return true;else{bZ=typeof bX;if(bZ=="object"){if(bX===null||bX===void 0||bY===null||bY===void 0)return false;else if("Equals"in bX)return bX.Equals(bY);else if(bX instanceof a.Array&&bY instanceof a.Array)return u.arrayEquals(bX,bY);else if(bX instanceof a.Date&&bY instanceof a.Date)return u.dateEquals(bX,bY);else{b0=[true];for(var b3 in bX)if(function(b4){b0[0]=!bX.hasOwnProperty(b4)||bY.hasOwnProperty(b4)&&u.Equals(bX[b4],bY[b4]);return!b0[0];}(b3))break;if(b0[0]){for(var b4 in bY)if(function(b5){b0[0]=!bY.hasOwnProperty(b5)||bX.hasOwnProperty(b5);return!b0[0];}(b4))break;}return b0[0];}}else return bZ=="function"&&("$Func"in bX?bX.$Func===bY.$Func&&bX.$Target===bY.$Target:"$Invokes"in bX&&"$Invokes"in bY&&u.arrayEquals(bX.$Invokes,bY.$Invokes));}};u.arrayEquals=function(bX,bY){var bZ,b0;if(r.length(bX)===r.length(bY)){bZ=true;b0=0;while(bZ&&b0<r.length(bX)){!u.Equals(r.get(bX,b0),r.get(bY,b0))?bZ=false:void 0;b0=b0+1;}return bZ;}else return false;};u.dateEquals=function(bX,bY){return bX.getTime()===bY.getTime();};u.Hash=function(bX){var bY;bY=typeof bX;return bY=="function"?0:bY=="boolean"?bX?1:0:bY=="number"?bX:bY=="string"?u.hashString(bX):bY=="object"?bX==null?0:bX instanceof a.Array?u.hashArray(bX):u.hashObject(bX):0;};u.hashString=function(bX){var bY,bZ,b0;if(bX===null)return 0;else{bY=5381;for(bZ=0,b0=bX.length-1;bZ<=b0;bZ++)bY=u.hashMix(bY,bX[bZ].charCodeAt());return bY;}};u.hashArray=function(bX){var bY,bZ,b0;bY=-34948909;for(bZ=0,b0=r.length(bX)-1;bZ<=b0;bZ++)bY=u.hashMix(bY,u.Hash(r.get(bX,bZ)));return bY;};u.hashObject=function(bX){var bY,bZ;if("GetHashCode"in bX)return bX.GetHashCode();else{bY=[0];for(var b0 in bX)if(function(b1){bY[0]=u.hashMix(u.hashMix(bY[0],u.hashString(b1)),u.Hash(bX[b1]));return false;}(b0))break;return bY[0];}};u.hashMix=function(bX,bY){return(bX<<5)+bX+bY;};u.Compare=function(bX,bY){var bZ,b0,b1,b2,b3,b4;if(bX===bY)return 0;else{b0=typeof bX;switch(b0=="function"?1:b0=="boolean"?2:b0=="number"?2:b0=="string"?2:b0=="object"?3:0){case 0:return typeof bY=="undefined"?0:-1;case 1:return m.FailWith("Cannot compare function values.");case 2:return bX<bY?-1:1;case 3:if(bX===null)b1=-1;else if(bY===null)b1=1;else if("CompareTo"in bX)b1=bX.CompareTo(bY);else if("CompareTo0"in bX)b1=bX.CompareTo0(bY);else if(bX instanceof a.Array&&bY instanceof a.Array)b1=u.compareArrays(bX,bY);else if(bX instanceof a.Date&&bY instanceof a.Date)b1=u.compareDates(bX,bY);else{b2=[0];for(var b5 in bX)if(function(b6){return!bX.hasOwnProperty(b6)?false:!bY.hasOwnProperty(b6)?(b2[0]=1,true):(b2[0]=u.Compare(bX[b6],bY[b6]),b2[0]!==0);}(b5))break;if(b2[0]===0){for(var b6 in bY)if(function(b7){return!bY.hasOwnProperty(b7)?false:!bX.hasOwnProperty(b7)&&(b2[0]=-1,true);}(b6))break;}b1=b2[0];}return b1;}}};u.compareArrays=function(bX,bY){var bZ,b0;if(r.length(bX)<r.length(bY))return -1;else if(r.length(bX)>r.length(bY))return 1;else{bZ=0;b0=0;while(bZ===0&&b0<r.length(bX)){bZ=u.Compare(r.get(bX,b0),r.get(bY,b0));b0=b0+1;}return bZ;}};u.compareDates=function(bX,bY){return u.Compare(bX.getTime(),bY.getTime());};v.setLint=function(bX,bY){bX.setOption("lint",{async:1,getAnnotations:bS.CreateFuncWithArgs(bY),container:S.findRootElement(bX.getWrapperElement())});};w.map=function(bX,bY){return{GetEnumerator:function(){var bZ;bZ=T.Get(bY);return new U.New(null,null,function(b0){return bZ.MoveNext()&&(b0.c=bX(bZ.Current()),true);},function(){bZ.Dispose();});}};};w.choose=function(bX,bY){return w.collect(function(bZ){var b0;b0=bX(bZ);return b0==null?X.Empty:W.ofArray([b0.$0]);},bY);};w.collect=function(bX,bY){return w.concat(w.map(bX,bY));};w.iter=function(bX,bY){var bZ;bZ=T.Get(bY);try{while(bZ.MoveNext())bX(bZ.Current());}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};w.concat=function(bX){return{GetEnumerator:function(){var bY;bY=T.Get(bX);return new U.New(null,null,function(bZ){var b0;while(true){b0=bZ.s;if(u.Equals(b0,null)){if(bY.MoveNext()){bZ.s=T.Get(bY.Current());bZ=bZ;}else{bY.Dispose();return false;}}else if(b0.MoveNext()){bZ.c=b0.Current();return true;}else{bZ.Dispose();bZ.s=null;bZ=bZ;}}},function(bZ){var b0;b0=bZ.s;!u.Equals(b0,null)?b0.Dispose():void 0;!u.Equals(bY,null)?bY.Dispose():void 0;});}};};w.append=function(bX,bY){return{GetEnumerator:function(){var bZ,b0;bZ=T.Get(bX);b0=[true];return new U.New(bZ,null,function(b1){var b2;return b1.s.MoveNext()?(b1.c=b1.s.Current(),true):(b2=b1.s,!u.Equals(b2,null)?b2.Dispose():void 0,b1.s=null,b0[0]&&(b0[0]=false,b1.s=T.Get(bY),b1.s.MoveNext()?(b1.c=b1.s.Current(),true):(b1.s.Dispose(),b1.s=null,false)));},function(b1){var b2;b2=b1.s;!u.Equals(b2,null)?b2.Dispose():void 0;});}};};w.head=function(bX){var bY;bY=T.Get(bX);try{return bY.MoveNext()?bY.Current():w.insufficient();}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};w.fold=function(bX,bY,bZ){var b0,b1;b0=bY;b1=T.Get(bZ);try{while(b1.MoveNext())b0=bX(b0,b1.Current());return b0;}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}};w.max=function(bX){var bY,bZ,b0;bY=T.Get(bX);try{if(!bY.MoveNext())w.seqEmpty();bZ=bY.Current();while(bY.MoveNext()){b0=bY.Current();u.Compare(b0,bZ)===1?bZ=b0:void 0;}return bZ;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};w.seqEmpty=function(){return m.FailWith("The input sequence was empty.");};x.New=function(bX,bY,bZ,b0){return{message:bX,severity:bY,from:bZ,to:b0};};y.New=function(bX,bY,bZ,b0){return{startP:bX,endP:bY,severity:bZ,message:b0};};n.newVar=function(bX,bY){return p.New(bY,N.Const(false),N.Const([]),null,a.ignore,null,null,null,null,bX);};n.generateDoc=function(bX){var bY,bZ,b0;bY=(bZ=(b0=bX.onChange,b0==null?null:{$:1,$0:b0.$0(bX)}),bZ==null?a.ignore:bZ.$0);return(bX.editorHook.generateDoc(bX))(function(b1){bX.editorO={$:1,$0:b1};n.bindVarEditor(bX.editorHook.hookOnChange,bX.editorHook.getValue,bX.editorHook.setValue,bY,bX["var"]);N.Sink(bX.editorHook.showAnnotations,bX.annotations);N.Sink(bX.editorHook.setDisabled,bX.disabled);bX.onRender(bX);});};n.onRender=function(bX,bY){return p.New(bY["var"],bY.disabled,bY.annotations,bY.onChange,bX,bY.autoCompletion,bY.toolTip,bY.declaration,bY.editorO,bY.editorHook);};n.bindVarEditor=function(bX,bY,bZ,b0,b1){var b2,b3;b2=[0];b3=[0];bX(function(){var b4;b4=bY();!u.Equals(b1.Get(),b4)?(b2[0]=b2[0]+1,b1.Set(b4),b0(b4)):void 0;});N.Sink(function(){if(b2[0]>b3[0])b3[0]=b2[0];else if(!u.Equals(bY(),b1.Get()))bZ(b1.Get());},b1.get_View());};z.$cctor=function(){z.$cctor=a.ignore;z.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";z.includes=["/EPFileX/codemirror/scripts/codemirror/codemirror.js","/EPFileX/codemirror/scripts/codemirror/codemirror-intellisense.js","/EPFileX/codemirror/scripts/codemirror/codemirror-compiler.js","/EPFileX/codemirror/scripts/codemirror/mode/none.js","/EPFileX/codemirror/scripts/codemirror/mode/fsharp.js","/EPFileX/codemirror/scripts/codemirror/mode/css.js","/EPFileX/codemirror/scripts/codemirror/mode/javascript.js","/EPFileX/codemirror/scripts/codemirror/mode/markdown.js","/EPFileX/codemirror/scripts/addon/search/searchcursor.js","/EPFileX/codemirror/scripts/addon/search/search.js","/EPFileX/codemirror/scripts/addon/search/jump-to-line.js","/EPFileX/codemirror/scripts/addon/dialog/dialog.js","/EPFileX/codemirror/scripts/addon/edit/matchbrackets.js","/EPFileX/codemirror/scripts/addon/selection/active-line.js","/EPFileX/codemirror/scripts/addon/display/fullscreen.js","/EPFileX/codemirror/scripts/addon/hint/show-hint.js","/EPFileX/codemirror/scripts/addon/lint/lint.js"];z.annotationsV=I.Create$1("Err (1, 7) - (1, 12): \"This shows over there as an error\".\nWarn (2, 7) - (2, 12): \"This shows over there as a warning\".\nInfo (3, 7) - (3, 12): \"This shows over there as information\".\nHint (4, 7) - (4, 12): \"This shows over there as a hint\".");};r.ofSeq=function(bX){var bY,bZ;if(bX instanceof a.Array)return bX.slice();else if(bX instanceof X)return r.ofList(bX);else{bY=[];bZ=T.Get(bX);try{while(bZ.MoveNext())bY.push(bZ.Current());return bY;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}}};r.map=function(bX,bY){var bZ,b0,b1;bZ=new a.Array(bY.length);for(b0=0,b1=bY.length-1;b0<=b1;b0++)bZ[b0]=bX(bY[b0]);return bZ;};r.ofList=function(bX){var bY,bZ;bZ=[];bY=bX;while(!(bY.$==0)){bZ.push(W.head(bY));bY=W.tail(bY);}return bZ;};r.exists=function(bX,bY){var bZ,b0,b1,b2;bZ=false;b0=0;b2=r.length(bY);while(!bZ&&b0<b2)if(bX(bY[b0]))bZ=true;else b0=b0+1;return bZ;};r.tryPick=function(bX,bY){var bZ,b0,b1;bZ=null;b0=0;while(b0<bY.length&&bZ==null){b1=bX(bY[b0]);b1!=null&&b1.$==1?bZ=b1:void 0;b0=b0+1;}return bZ;};r.tryFindIndex=function(bX,bY){var bZ,b0;bZ=null;b0=0;while(b0<bY.length&&bZ==null){bX(bY[b0])?bZ={$:1,$0:b0}:void 0;b0=b0+1;}return bZ;};r.foldBack=function(bX,bY,bZ){var b0,b1,b2,b3,b4;b0=bZ;b2=bY.length;for(b3=1,b4=b2;b3<=b4;b3++)b0=bX(bY[b2-b3],b0);return b0;};r.filter=function(bX,bY){var bZ,b0,b1;bZ=[];for(b0=0,b1=bY.length-1;b0<=b1;b0++)if(bX(bY[b0]))bZ.push(bY[b0]);return bZ;};r.iter=function(bX,bY){var bZ,b0;for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)bX(bY[bZ]);};r.concat=function(bX){return a.Array.prototype.concat.apply([],r.ofSeq(bX));};r.pick=function(bX,bY){var bZ;bZ=r.tryPick(bX,bY);return bZ==null?m.FailWith("KeyNotFoundException"):bZ.$0;};r.choose=function(bX,bY){var bZ,b0,b1,b2;bZ=[];for(b0=0,b1=bY.length-1;b0<=b1;b0++){b2=bX(bY[b0]);b2==null?void 0:bZ.push(b2.$0);}return bZ;};r.create=function(bX,bY){var bZ,b0,b1;bZ=new a.Array(bX);for(b0=0,b1=bX-1;b0<=b1;b0++)bZ[b0]=bY;return bZ;};r.init=function(bX,bY){var bZ,b0,b1;bX<0?m.FailWith("Negative size given."):null;bZ=new a.Array(bX);for(b0=0,b1=bX-1;b0<=b1;b0++)bZ[b0]=bY(b0);return bZ;};r.forall=function(bX,bY){var bZ,b0,b1,b2;bZ=true;b0=0;b2=r.length(bY);while(bZ&&b0<b2)if(bX(bY[b0]))b0=b0+1;else bZ=false;return bZ;};A.Error={$:0};A.Warning={$:1};A.Hint={$:3};C=B.Var=bS.Class({},i,C);C.New=bS.Ctor(function(){i.New.call(this);},C);D.prettyPrint=function(bX){var bY,bZ;function b0(b1,b2){return b1+" = "+D.prettyPrint(b2);}return bX===null?"null":(bY=typeof bX,bY=="string"?"\""+bX+"\"":bY=="object"?bX instanceof a.Array?"[|"+O.concat("; ",r.map(D.prettyPrint,bX))+"|]":(bZ=a.String(bX),bZ==="[object Object]"?"{"+O.concat("; ",r.map(function(b1){return b0(b1[0],b1[1]);},M.GetFields(bX)))+"}":bZ):a.String(bX));};D.toSafe=function(bX){return bX==null?"":bX;};E.newPojo=function(bX){var bY,bZ;function b0(b2,b3){return function(b4){return E.addProp(b2,b3,b4);};}function b1(b2){}bY={};w.iter((bZ=function(b2){return(function(b3){return b0(b3[0],b3[1]);}(b2))(bY);},function(b2){return b1(bZ(b2));}),bX);return bY;};E.addProp=function(bX,bY,bZ){bZ[bX]=bY;return bZ;};G.NewFromSeq=function(bX){var bY,bZ,b0;bY={};bZ=T.Get(bX);try{while(bZ.MoveNext()){b0=bZ.Current();bY[b0[0]]=b0[1];}}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}return bY;};H.New=function(bX,bY,bZ,b0){return{kind:bX,label:bY,detail:bZ,replace:b0};};I=B.Var$1=bS.Class({},i,I);I.Create$1=function(bX){return new Y.New(false,Z.New({$:2,$0:bX,$1:[]}),bX);};I.Lens=function(bX,bY,bZ){var b0,b1,b2;b0=_1.Id();b1=N.Map(bY,bX.get_View());b2=new C({Get:function(){return bY(bX.Get());},Set:function(b3){return bX.Update(function(b4){return bZ(b4,b3);});},SetFinal:function(b3){return this.Set(b3);},Update:function(b3){return bX.Update(function(b4){return bZ(b4,b3(bY(b4)));});},UpdateMaybe:function(b3){return bX.UpdateMaybe(function(b4){var b5;b5=b3(bY(b4));return b5==null?null:{$:1,$0:bZ(b4,b5.$0)};});},get_View:function(){return b1;},get_Id:function(){return b0;}});C.New.call(b2);return b2;};K=J.attr=bS.Class({},i,K);M.GetFields=function(bX){var bY,bZ;bY=[];for(var b0 in bX)bY.push([b0,bX[b0]]);return bY;};M.GetFieldValues=function(bX){var bY,bZ;bY=[];for(var b0 in bX)bY.push(bX[b0]);return bY;};N.Map=function(bX,bY){return N.CreateLazy(function(){return Z.Map(bX,bY());});};N.Const=function(bX){var bY;bY=Z.New({$:0,$0:bX});return function(){return bY;};};N.Sink=function(bX,bY){function bZ(){Z.WhenRun(bY(),bX,function(){P.scheduler().Fork(bZ);});}P.scheduler().Fork(bZ);};N.CreateLazy=function(bX){var bY;bY={c:null,o:bX};return function(){var bZ,b0;bZ=bY.c;return bZ===null?(bZ=bY.o(),bY.c=bZ,(b0=bZ.s,b0!=null&&b0.$==0)?bY.o=null:Z.WhenObsoleteRun(bZ,function(){bY.c=null;}),bZ):bZ;};};N.MapAsync=function(bX,bY){return N.CreateLazy(function(){return Z.MapAsync(bX,bY());});};N.Bind=function(bX,bY){return N.Join(N.Map(bX,bY));};N.Join=function(bX){return N.CreateLazy(function(){return Z.Join(bX());});};N.Map2Unit=function(bX,bY){return N.CreateLazy(function(){return Z.Map2Unit(bX(),bY());});};N=B.View=bS.Class({},null,N);O.Trim=function(bX){return bX.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};O.concat=function(bX,bY){return r.ofSeq(bY).join(bX);};O.EndsWith=function(bX,bY){return bX.substring(bX.length-bY.length)==bY;};O.SplitChars=function(bX,bY,bZ){return O.Split(bX,new a.RegExp("["+O.RegexEscape(bY.join(""))+"]"),bZ);};O.StartsWith=function(bX,bY){return bX.substring(0,bY.length)==bY;};O.Split=function(bX,bY,bZ){return bZ===1?r.filter(function(b0){return b0!=="";},O.SplitWith(bX,bY)):O.SplitWith(bX,bY);};O.RegexEscape=function(bX){return bX.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};O.SplitWith=function(bX,bY){return bX.split(bY);};P.Delay=function(bX){return function(bY){try{(bX(null))(bY);}catch(bZ){bY.k({$:1,$0:bZ});}};};P.Bind=function(bX,bY){return P.checkCancel(function(bZ){bX(_5.New(function(b0){var b1;if(b0.$==0){b1=b0.$0;P.scheduler().Fork(function(){try{(bY(b1))(bZ);}catch(b2){bZ.k({$:1,$0:b2});}});}else P.scheduler().Fork(function(){bZ.k(b0);});},bZ.ct));});};P.Zero=function(){_6.$cctor();return _6.Zero;};P.Start=function(bX,bY){var bZ,b0;bZ=(b0=(P.defCTS())[0],bY==null?b0:bY.$0);P.scheduler().Fork(function(){if(!bZ.c)bX(_5.New(function(b1){if(b1.$==1)P.UncaughtAsyncError(b1.$0);},bZ));});};P.Return=function(bX){return function(bY){bY.k({$:0,$0:bX});};};P.checkCancel=function(bX){return function(bY){if(bY.ct.c)P.cancel(bY);else bX(bY);};};P.defCTS=function(){_6.$cctor();return _6.defCTS;};P.UncaughtAsyncError=function(bX){bU.log("WebSharper: Uncaught asynchronous exception",bX);};P.For=function(bX,bY){return P.Using(T.Get(bX),function(bZ){return P.While(function(){return bZ.MoveNext();},P.Delay(function(){return bY(bZ.Current());}));});};P.cancel=function(bX){bX.k({$:2,$0:new bm.New(bX.ct)});};P.scheduler=function(){_6.$cctor();return _6.scheduler;};P.Using=function(bX,bY){return P.TryFinally(bY(bX),function(){bX.Dispose();});};P.While=function(bX,bY){return bX()?P.Bind(bY,function(){return P.While(bX,bY);}):P.Return();};P.FromContinuations=function(bX){return function(bY){var bZ;function b0(b1){if(bZ[0])m.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bZ[0]=true;P.scheduler().Fork(b1);}}bZ=[false];bX(function(b1){b0(function(){bY.k({$:0,$0:b1});});},function(b1){b0(function(){bY.k({$:1,$0:b1});});},function(b1){b0(function(){bY.k({$:2,$0:b1});});});};};P.TryFinally=function(bX,bY){return function(bZ){bX(_5.New(function(b0){try{bY();bZ.k(b0);}catch(b1){bZ.k({$:1,$0:b1});}},bZ.ct));};};P.StartWithContinuations=function(bX,bY,bZ,b0,b1){var b2,b3;b2=(b3=(P.defCTS())[0],b1==null?b3:b1.$0);!b2.c?bX(_5.New(function(b4){if(b4.$==1)bZ(b4.$0);else if(b4.$==2)b0(b4.$0);else bY(b4.$0);},b2)):void 0;};Q=B.AttrProxy=bS.Class({},null,Q);Q.OnAfterRenderImpl=function(bX){return new Q({$:4,$0:bX});};Q.Create=function(bX,bY){return _8.Static(function(bZ){_9.SetAttr(bZ,bX,bY);});};Q.Concat=function(bX){var bY;bY=bo.ofSeqNonCopying(bX);return bo.TreeReduce(_8.EmptyAttr(),Q.Append,bY);};Q.Append=function(bX,bY){return _8.AppendTree(bX,bY);};R=B.Doc=bS.Class({},i,R);R.Async=function(bX){return R.EmbedView(N.MapAsync(a.id,N.Const(bX)));};R.TextNode=function(bX){return R.Mk({$:5,$0:_9.CreateText(bX)},N.Const());};R.InputArea=function(bX,bY){return R.InputInternal("textarea",function(){return w.append(bX,[$.Value(bY)]);});};R.TextView=function(bX){var bY;bY=ba.CreateTextNode();return R.Mk({$:4,$0:bY},N.Map(function(bZ){ba.UpdateTextNode(bY,bZ);},bX));};R.Run=function(bX,bY){ba.LinkElement(bX,bY.docNode);R.RunInPlace(false,bX,bY);};R.Element=function(bX,bY,bZ){var b0,b1;b0=Q.Concat(bY);b1=R.Concat(bZ);return bn.New(_9.CreateElement(bX),b0,b1);};R.EmbedView=function(bX){var bY;bY=ba.CreateEmbedNode();return R.Mk({$:2,$0:bY},N.Map(a.ignore,N.Bind(function(bZ){ba.UpdateEmbedNode(bY,bZ.docNode);return bZ.updates;},bX)));};R.Mk=function(bX,bY){return new R.New(bX,bY);};R.InputInternal=function(bX,bY){var bZ;bZ=_9.CreateElement(bX);return bn.New(bZ,Q.Concat(bY(bZ)),R.get_Empty());};R.RunInPlace=function(bX,bY,bZ){var b0;b0=ba.CreateRunState(bY,bZ.docNode);N.Sink(bi.get_UseAnimations()||bj.BatchUpdatesEnabled()?bk.StartProcessor(ba.PerformAnimatedUpdate(bX,b0,bZ.docNode)):function(){ba.PerformSyncUpdate(bX,b0,bZ.docNode);},bZ.updates);};R.Concat=function(bX){var bY;bY=bo.ofSeqNonCopying(bX);return bo.TreeReduce(R.get_Empty(),R.Append,bY);};R.get_Empty=function(){return R.Mk(null,N.Const());};R.Append=function(bX,bY){return R.Mk({$:0,$0:bX.docNode,$1:bY.docNode},N.Map2Unit(bX.updates,bY.updates));};R.New=bS.Ctor(function(bX,bY){i.New.call(this);this.docNode=bX;this.updates=bY;},R);S.findRootElement=function(bX){var bY;return!function(bZ){return bX.getRootNode(bZ);}?self.document.body:(bY=bX.getRootNode(),!bY.body?bY.firstChild:bY.body);};T.Get=function(bX){return bX instanceof a.Array?T.ArrayEnumerator(bX):u.Equals(typeof bX,"string")?T.StringEnumerator(bX):bX.GetEnumerator();};T.ArrayEnumerator=function(bX){return new U.New(0,null,function(bY){var bZ;bZ=bY.s;return bZ<r.length(bX)&&(bY.c=r.get(bX,bZ),bY.s=bZ+1,true);},void 0);};T.StringEnumerator=function(bX){return new U.New(0,null,function(bY){var bZ;bZ=bY.s;return bZ<bX.length&&(bY.c=bX[bZ],bY.s=bZ+1,true);},void 0);};T.Get0=function(bX){return bX instanceof a.Array?T.ArrayEnumerator(bX):u.Equals(typeof bX,"string")?T.StringEnumerator(bX):"GetEnumerator0"in bX?bX.GetEnumerator0():bX.GetEnumerator();};U=T.T=bS.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},i,U);U.New=bS.Ctor(function(bX,bY,bZ,b0){i.New.call(this);this.s=bX;this.c=bY;this.n=bZ;this.d=b0;},U);X=W.T=bS.Class({GetEnumerator:function(){return new U.New(this,null,function(bX){var bY;bY=bX.s;return bY.$==0?false:(bX.c=bY.$0,bX.s=bY.$1,true);},void 0);},GetEnumerator0:function(){return T.Get(this);}},null,X);X.Empty=new X({$:0});W.ofArray=function(bX){var bY,bZ,b0;bY=X.Empty;for(bZ=r.length(bX)-1,b0=0;bZ>=b0;bZ--)bY=new X({$:1,$0:r.get(bX,bZ),$1:bY});return bY;};W.head=function(bX){return bX.$==1?bX.$0:W.listEmpty();};W.tail=function(bX){return bX.$==1?bX.$1:W.listEmpty();};W.listEmpty=function(){return m.FailWith("The input list was empty.");};Y=B.ConcreteVar=bS.Class({Set:function(bX){if(this.isConst)(function(bY){return bY("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bY){bU.log(bY);}));else{Z.Obsolete(this.snap);this.current=bX;this.snap=Z.New({$:2,$0:bX,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(bX){this.Set(bX(this.Get()));},UpdateMaybe:function(bX){var bY;bY=bX(this.Get());bY!=null&&bY.$==1?this.Set(bY.$0):void 0;}},C,Y);Y.New=bS.Ctor(function(bX,bY,bZ){var b0;b0=this;C.New.call(this);this.isConst=bX;this.current=bZ;this.snap=bY;this.view=function(){return b0.snap;};this.id=_1.Int();},Y);Z.Map=function(bX,bY){var bZ,b0;bZ=bY.s;return bZ!=null&&bZ.$==0?Z.New({$:0,$0:bX(bZ.$0)}):(b0=Z.New({$:3,$0:[],$1:[]}),(Z.When(bY,function(b1){Z.MarkDone(b0,bY,bX(b1));},b0),b0));};Z.WhenRun=function(bX,bY,bZ){var b0;b0=bX.s;b0==null?bZ():b0!=null&&b0.$==2?(b0.$1.push(bZ),bY(b0.$0)):b0!=null&&b0.$==3?(b0.$0.push(bY),b0.$1.push(bZ)):bY(b0.$0);};Z.WhenObsoleteRun=function(bX,bY){var bZ;bZ=bX.s;bZ==null?bY():bZ!=null&&bZ.$==2?bZ.$1.push(bY):bZ!=null&&bZ.$==3?bZ.$1.push(bY):void 0;};Z.When=function(bX,bY,bZ){var b0;b0=bX.s;b0==null?Z.Obsolete(bZ):b0!=null&&b0.$==2?(Z.EnqueueSafe(b0.$1,bZ),bY(b0.$0)):b0!=null&&b0.$==3?(b0.$0.push(bY),Z.EnqueueSafe(b0.$1,bZ)):bY(b0.$0);};Z.MarkDone=function(bX,bY,bZ){var b0;if(b0=bY.s,b0!=null&&b0.$==0)Z.MarkForever(bX,bZ);else Z.MarkReady(bX,bZ);};Z.MapAsync=function(bX,bY){var bZ;bZ=Z.New({$:3,$0:[],$1:[]});Z.When(bY,function(b0){_.StartTo(bX(b0),function(b1){Z.MarkDone(bZ,bY,b1);});},bZ);return bZ;};Z.EnqueueSafe=function(bX,bY){var bZ,b0,b1,b2;bX.push(bY);if(bX.length%20===0){bZ=bX.slice(0);bG.Clear(bX);for(b0=0,b1=r.length(bZ)-1;b0<=b1;b0++){b2=r.get(bZ,b0);typeof b2=="object"?function(b3){if(b3.s)bX.push(b3);}(b2):function(b3){bX.push(b3);}(b2);}}else void 0;};Z.MarkForever=function(bX,bY){var bZ,b0,b1,b2;bZ=bX.s;if(bZ!=null&&bZ.$==3){bX.s={$:0,$0:bY};b0=bZ.$0;for(b1=0,b2=r.length(b0)-1;b1<=b2;b1++)(r.get(b0,b1))(bY);}else void 0;};Z.MarkReady=function(bX,bY){var bZ,b0,b1,b2;bZ=bX.s;if(bZ!=null&&bZ.$==3){bX.s={$:2,$0:bY,$1:bZ.$1};b0=bZ.$0;for(b1=0,b2=r.length(b0)-1;b1<=b2;b1++)(r.get(b0,b1))(bY);}else void 0;};Z.Join=function(bX){var bY;bY=Z.New({$:3,$0:[],$1:[]});Z.When(bX,function(bZ){var b0;b0=bZ();Z.When(b0,function(b1){var b2,b3;if((b2=b0.s,b2!=null&&b2.$==0)&&(b3=bX.s,b3!=null&&b3.$==0))Z.MarkForever(bY,b1);else Z.MarkReady(bY,b1);},bY);},bY);return bY;};Z.Copy=function(bX){var bY,bZ,b0;bY=bX.s;return bY==null?bX:bY!=null&&bY.$==2?(bZ=Z.New({$:2,$0:bY.$0,$1:[]}),(Z.WhenObsolete(bX,bZ),bZ)):bY!=null&&bY.$==3?(b0=Z.New({$:3,$0:[],$1:[]}),(Z.When(bX,function(b1){Z.MarkDone(b0,bX,b1);},b0),b0)):bX;};Z.Map2Unit=function(bX,bY){var bZ,b0,b1;function b2(){var b3,b4,b5;if(!(b3=b1.s,b3!=null&&b3.$==0||b3!=null&&b3.$==2)){b4=Z.ValueAndForever(bX);b5=Z.ValueAndForever(bY);b4!=null&&b4.$==1?b5!=null&&b5.$==1?b4.$0[1]&&b5.$0[1]?Z.MarkForever(b1,null):Z.MarkReady(b1,null):void 0:void 0;}}bZ=bX.s;b0=bY.s;return bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?Z.New({$:0,$0:null}):bY:b0!=null&&b0.$==0?bX:(b1=Z.New({$:3,$0:[],$1:[]}),(Z.When(bX,b2,b1),Z.When(bY,b2,b1),b1));};Z.WhenObsolete=function(bX,bY){var bZ;bZ=bX.s;bZ==null?Z.Obsolete(bY):bZ!=null&&bZ.$==2?Z.EnqueueSafe(bZ.$1,bY):bZ!=null&&bZ.$==3?Z.EnqueueSafe(bZ.$1,bY):void 0;};Z.ValueAndForever=function(bX){var bY;bY=bX.s;return bY!=null&&bY.$==0?{$:1,$0:[bY.$0,true]}:bY!=null&&bY.$==2?{$:1,$0:[bY.$0,false]}:null;};_1.Id=function(){_1.set_counter(_1.counter()+1);return"uid"+a.String(_1.counter());};_1.Int=function(){_1.set_counter(_1.counter()+1);return _1.counter();};_1.set_counter=function(bX){bf.$cctor();bf.counter=bX;};_1.counter=function(){bf.$cctor();return bf.counter;};_3.LoadLocalTemplates=function(bX){!_3.LocalTemplatesLoaded()?(_3.set_LocalTemplatesLoaded(true),_3.LoadNestedTemplates(self.document.body,"")):void 0;_3.LoadedTemplates().set_Item(bX,_3.LoadedTemplateFile(""));};_3.LocalTemplatesLoaded=function(){bg.$cctor();return bg.LocalTemplatesLoaded;};_3.set_LocalTemplatesLoaded=function(bX){bg.$cctor();bg.LocalTemplatesLoaded=bX;};_3.LoadNestedTemplates=function(bX,bY){var b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;function bZ(cc){var cd,ce;if(!b0.ContainsKey(cc)){cd=(ce=null,[b1.TryGetValue(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);cd[0]?(cb.Add(cc),b1.Remove(cc),_3.PrepareTemplateStrict(bY,{$:1,$0:cc},cd[1][0],{$:1,$0:cd[1][1]},{$:1,$0:bZ})):bU.warn(cb.Contains(cc)?"Encountered loop when instantiating "+cc:"Local template does not exist: "+cc);}}b0=_3.LoadedTemplateFile(bY);b1=new bc.New$5();b2=bX.querySelectorAll("[ws-template]");for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];b6=b5.getAttribute("ws-template").toLowerCase();b5.removeAttribute("ws-template");b1.set_Item(b6,[[b5],_3.FakeRootSingle(b5)]);}b7=bX.querySelectorAll("[ws-children-template]");for(b8=0,b9=b7.length-1;b8<=b9;b8++){b_=b7[b8];b$=b_.getAttribute("ws-children-template").toLowerCase();b_.removeAttribute("ws-children-template");b1.set_Item(b$,(ca=_9.ChildrenArray(b_),[ca,_3.FakeRoot(ca)]));}cb=new bh.New$3();while(b1.count>0)bZ(w.head(b1.get_Keys()));};_3.LoadedTemplates=function(){bg.$cctor();return bg.LoadedTemplates;};_3.LoadedTemplateFile=function(bX){var bY,bZ,b0;bY=(bZ=null,[_3.LoadedTemplates().TryGetValue(bX,{get:function(){return bZ;},set:function(b1){bZ=b1;}}),bZ]);return bY[0]?bY[1]:(b0=new bc.New$5(),(_3.LoadedTemplates().set_Item(bX,b0),b0));};_3.FakeRootSingle=function(bX){var bY,bZ,b0;bX.removeAttribute("ws-template");bY=bX.getAttribute("ws-replace");bY===null?void 0:(bX.removeAttribute("ws-replace"),bZ=bX.parentNode,u.Equals(bZ,null)?void 0:(b0=self.document.createElement(bX.tagName),b0.setAttribute("ws-replace",bY),bZ.replaceChild(b0,bX)));return _3.FakeRoot([bX]);};_3.FakeRoot=function(bX){var bY,bZ,b0;bY=self.document.createElement("div");for(bZ=0,b0=bX.length-1;bZ<=b0;bZ++)bY.appendChild(r.get(bX,bZ));return bY;};_3.PrepareTemplateStrict=function(bX,bY,bZ,b0,b1){var b2,b3;function b4(b9,b_){var b$,ca,cb,cc,cd,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz;function ce(cA){}while(true)switch(b9){case 0:if(b_!==null){b$=b_.nextSibling;if(u.Equals(b_.nodeType,L.TEXT_NODE))bt.convertTextNode(b_);else if(u.Equals(b_.nodeType,L.ELEMENT_NODE))b6(b_);b_=b$;}else return null;break;case 1:cf=bu.string(b_.nodeName,{$:1,$0:3},null).toLowerCase();cg=(ca=cf.indexOf("."),ca===-1?[bX,cf]:[bu.string(cf,null,{$:1,$0:ca-1}),bu.string(cf,{$:1,$0:ca+1},null)]);ch=cg[1];ci=cg[0];if(ci!==""&&!_3.LoadedTemplates().ContainsKey(ci))return bt.failNotLoaded(ch);else{if(ci===""&&b1!=null)b1.$0(ch);cj=_3.LoadedTemplates().get_Item(ci);if(!cj.ContainsKey(ch))return bt.failNotLoaded(ch);else{ck=cj.get_Item(ch);cl=ck.cloneNode(true);cm=new bh.New$3();cn=new bc.New$5();co=b_.attributes;for(cp=0,cq=co.length-1;cp<=cq;cp++){cr=co.item(cp).name.toLowerCase();cn.set_Item(cr,(cs=co.item(cp).nodeValue,cs===""?cr:cs.toLowerCase()));!cm.Add(cr)?bU.warn("Hole mapped twice",cr):void 0;}for(ct=0,cu=b_.childNodes.length-1;ct<=cu;ct++){cv=b_.childNodes[ct];u.Equals(cv.nodeType,L.ELEMENT_NODE)?!cm.Add(cv.nodeName.toLowerCase())?bU.warn("Hole filled twice",ch):void 0:void 0;}cw=b_.childNodes.length===1&&u.Equals(b_.firstChild.nodeType,L.TEXT_NODE);if(cw){cc=bt.fillTextHole(cl,b_.firstChild.textContent,ch);((function(cA){return function(cB){if(cB!=null)cA(cB.$0);};}((cd=function(cA){return function(cB){return cA.Add(cB);};}(cm),function(cA){return ce(cd(cA));})))(cc));}bt.removeHolesExcept(cl,cm);if(!cw){for(cx=0,cy=b_.childNodes.length-1;cx<=cy;cx++){cz=b_.childNodes[cx];u.Equals(cz.nodeType,L.ELEMENT_NODE)?cz.hasAttributes()?bt.fillInstanceAttrs(cl,cz):b5(cl,cz):void 0;}}bt.mapHoles(cl,cn);bt.fill(cl,b_.parentNode,b_);b_.parentNode.removeChild(b_);return;}}break;}}function b5(b9,b_){var b$,cb,cc;function ca(cd,ce){var cf,cg,ch;if(cb==="title"&&b_.hasChildNodes()){cf=bV.parseHTML(b_.textContent);b_.removeChild(b_.firstChild);for(cg=0,ch=cf.length-1;cg<=ch;cg++)b_.appendChild(r.get(cf,cg));}else null;b6(b_);return bt.fill(b_,cd,ce);}cb=b_.nodeName.toLowerCase();_9.IterSelector(b9,"[ws-attr-holes]",function(cd){var ce,cf,cg,ch,ci;ce=O.SplitChars(cd.getAttribute("ws-attr-holes"),[" "],1);for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=r.get(ce,cf);cd.setAttribute(ch,(ci=new a.RegExp("\\${"+cb+"}","ig"),cd.getAttribute(ch).replace(ci,b_.textContent)));}});cc=b9.querySelector("[ws-hole="+cb+"]");if(u.Equals(cc,null)){b$=b9.querySelector("[ws-replace="+cb+"]");return u.Equals(b$,null)?null:(ca(b$.parentNode,b$),void b$.parentNode.removeChild(b$));}else{while(cc.hasChildNodes())cc.removeChild(cc.lastChild);cc.removeAttribute("ws-hole");return ca(cc,null);}}function b6(b9){if(O.StartsWith(b9.nodeName.toLowerCase(),"ws-"))b8(b9);else{bt.convertAttrs(b9);b7(b9.firstChild);}}function b7(b9){return b4(0,b9);}function b8(b9){return b4(1,b9);}b2=b0==null?_3.FakeRoot(bZ):b0.$0;b3=(bY==null?"":bY.$0).toLowerCase();_3.LoadedTemplateFile(bX).set_Item(b3,b2);r.length(bZ)>0?(function(b9){var b_,b$,ca,cb;while(true){b_=b9.querySelector("[ws-template]");if(u.Equals(b_,null)){b$=b9.querySelector("[ws-children-template]");if(u.Equals(b$,null))return null;else{ca=b$.getAttribute("ws-children-template");b$.removeAttribute("ws-children-template");_3.PrepareTemplateStrict(bX,{$:1,$0:ca},_9.ChildrenArray(b$),null,null);b9=b9;}}else{cb=b_.getAttribute("ws-template");(_3.PrepareSingleTemplate(bX,{$:1,$0:cb},b_))(null);b9=b9;}}}(b2),b7(r.get(bZ,0))):void 0;};_3.PrepareSingleTemplate=function(bX,bY,bZ){var b0,b1,b2;b0=_3.FakeRootSingle(bZ);b1=[bZ];b2={$:1,$0:b0};return function(b3){_3.PrepareTemplateStrict(bX,bY,b1,b2,b3);};};_3.TextHoleRE=function(){bg.$cctor();return bg.TextHoleRE;};_5.New=function(bX,bY){return{k:bX,ct:bY};};_6.$cctor=function(){_6.$cctor=a.ignore;_6.noneCT=_7.New(false,[]);_6.scheduler=new bd.New();_6.defCTS=[new be.New()];_6.Zero=P.Return();_6.GetCT=function(bX){bX.k({$:0,$0:bX.ct});};};_7.New=function(bX,bY){return{c:bX,r:bY};};_8.Static=function(bX){return new Q({$:3,$0:bX});};_8.Updates=function(bX){return bo.MapTreeReduce(function(bY){return bY.NChanged();},N.Const(),N.Map2Unit,bX.DynNodes);};_8.AppendTree=function(bX,bY){var bZ;return bX===null?bY:bY===null?bX:(bZ=new Q({$:2,$0:bX,$1:bY}),(_8.SetFlags(bZ,_8.Flags(bX)|_8.Flags(bY)),bZ));};_8.EmptyAttr=function(){bH.$cctor();return bH.EmptyAttr;};_8.Insert=function(bX,bY){var bZ,b0,b1;function b2(b3){if(!(b3===null))if(b3!=null&&b3.$==1)bZ.push(b3.$0);else if(b3!=null&&b3.$==2){b2(b3.$0);b2(b3.$1);}else if(b3!=null&&b3.$==3)b3.$0(bX);else if(b3!=null&&b3.$==4)b0.push(b3.$0);}bZ=[];b0=[];b2(bY);b1=bZ.slice(0);return bD.New(bX,_8.Flags(bY),b1,b0.length===0?null:{$:1,$0:function(b3){w.iter(function(b4){b4(b3);},b0);}});};_8.HasExitAnim=function(bX){var bY;bY=2;return(bX.DynFlags&bY)===bY;};_8.GetExitAnim=function(bX){return _8.GetAnim(bX,function(bY,bZ){return bY.NGetExitAnim(bZ);});};_8.HasEnterAnim=function(bX){var bY;bY=1;return(bX.DynFlags&bY)===bY;};_8.GetEnterAnim=function(bX){return _8.GetAnim(bX,function(bY,bZ){return bY.NGetEnterAnim(bZ);});};_8.HasChangeAnim=function(bX){var bY;bY=4;return(bX.DynFlags&bY)===bY;};_8.GetChangeAnim=function(bX){return _8.GetAnim(bX,function(bY,bZ){return bY.NGetChangeAnim(bZ);});};_8.SetFlags=function(bX,bY){bX.flags=bY;};_8.Flags=function(bX){return bX!==null&&bX.hasOwnProperty("flags")?bX.flags:0;};_8.Dynamic=function(bX,bY){return new Q({$:1,$0:new bL.New(bX,bY)});};_8.GetAnim=function(bX,bY){return bi.Concat(r.map(function(bZ){return bY(bZ,bX.DynElem);},bX.DynNodes));};_8.Sync=function(bX,bY){r.iter(function(bZ){bZ.NSync(bX);},bY.DynNodes);};_9.SetAttr=function(bX,bY,bZ){bX.setAttribute(bY,bZ);};_9.CreateText=function(bX){return _9.Doc().createTextNode(bX);};_9.CreateElement=function(bX){return _9.Doc().createElement(bX);};_9.Doc=function(){br.$cctor();return br.Doc;};_9.ChildrenArray=function(bX){var bY,bZ,b0;bY=[];for(bZ=0,b0=bX.childNodes.length-1;bZ<=b0;bZ++)bY.push(bX.childNodes[bZ]);return bY;};_9.IterSelector=function(bX,bY,bZ){var b0,b1,b2;b0=bX.querySelectorAll(bY);for(b1=0,b2=b0.length-1;b1<=b2;b1++)bZ(b0[b1]);};_9.InsertAt=function(bX,bY,bZ){var b0;if(!(bZ.parentNode===bX&&bY===(b0=bZ.nextSibling,u.Equals(b0,null)?null:b0)))bX.insertBefore(bZ,bY);};_9.RemoveNode=function(bX,bY){if(bY.parentNode===bX)bX.removeChild(bY);};_.StartTo=function(bX,bY){P.StartWithContinuations(bX,bY,function(bZ){_.OnError(bZ);},a.ignore,null);};_.OnError=function(bX){return bU.log("WebSharper UI: Uncaught asynchronous exception",bX);};$.Value=function(bX){function bY(bZ){return{$:1,$0:bZ};}return $.CustomValue(bX,a.id,function(bZ){return bY(a.id(bZ));});};$.CustomValue=function(bX,bY,bZ){return $.CustomVar(bX,function(b0,b1){b0.value=bY(b1);},function(b0){return bZ(b0.value);});};$.CustomVar=function(bX,bY,bZ){function b0(b2,b3){return bX.UpdateMaybe(function(b4){var b5,b6;b5=bZ(b2);return b5!=null&&b5.$==1&&(!u.Equals(b5.$0,b4)&&(b6=[b5,b5.$0],true))?b6[0]:null;});}function b1(b2,b3){var b4,b5;b4=bZ(b2);return b4!=null&&b4.$==1&&(u.Equals(b4.$0,b3)&&(b5=b4.$0,true))?null:bY(b2,b3);}return Q.Concat([$.Handler("change",function(b2){return function(b3){return b0(b2,b3);};}),$.Handler("input",function(b2){return function(b3){return b0(b2,b3);};}),$.Handler("keypress",function(b2){return function(b3){return b0(b2,b3);};}),$.DynamicCustom(function(b2){return function(b3){return b1(b2,b3);};},bX.get_View())]);};$.Handler=function(bX,bY){return _8.Static(function(bZ){bZ.addEventListener(bX,function(b0){return(bY(bZ))(b0);},false);});};$.DynamicCustom=function(bX,bY){return _8.Dynamic(bY,bX);};ba.CreateTextNode=function(){return{Text:_9.CreateText(""),Dirty:false,Value:""};};ba.UpdateTextNode=function(bX,bY){bX.Value=bY;bX.Dirty=true;};ba.LinkElement=function(bX,bY){ba.InsertDoc(bX,bY,null);};ba.CreateEmbedNode=function(){return{Current:null,Dirty:false};};ba.UpdateEmbedNode=function(bX,bY){bX.Current=bY;bX.Dirty=true;};ba.InsertDoc=function(bX,bY,bZ){var b0;return bY!=null&&bY.$==1?ba.InsertNode(bX,bY.$0.El,bZ):bY!=null&&bY.$==2?(b0=bY.$0,(b0.Dirty=false,ba.InsertDoc(bX,b0.Current,bZ))):bY==null?bZ:bY!=null&&bY.$==4?ba.InsertNode(bX,bY.$0.Text,bZ):bY!=null&&bY.$==5?ba.InsertNode(bX,bY.$0,bZ):bY!=null&&bY.$==6?r.foldBack(function(b1,b2){return b1==null||b1.constructor===V?ba.InsertDoc(bX,b1,b2):ba.InsertNode(bX,b1,b2);},bY.$0.Els,bZ):ba.InsertDoc(bX,bY.$0,ba.InsertDoc(bX,bY.$1,bZ));};ba.CreateRunState=function(bX,bY){return bx.New(by.get_Empty(),ba.CreateElemNode(bX,_8.EmptyAttr(),bY));};ba.PerformAnimatedUpdate=function(bX,bY,bZ){var b0;return bi.get_UseAnimations()?(b0=null,P.Delay(function(){var b1,b2,b3;b1=by.FindAll(bZ);b2=ba.ComputeChangeAnim(bY,b1);b3=ba.ComputeEnterAnim(bY,b1);return P.Bind(bi.Play(bi.Append(b2,ba.ComputeExitAnim(bY,b1))),function(){return P.Bind(ba.SyncElemNodesNextFrame(bX,bY),function(){return P.Bind(bi.Play(b3),function(){bY.PreviousNodes=b1;return P.Return(null);});});});})):ba.SyncElemNodesNextFrame(bX,bY);};ba.PerformSyncUpdate=function(bX,bY,bZ){var b0;b0=by.FindAll(bZ);ba.SyncElemNode(bX,bY.Top);bY.PreviousNodes=b0;};ba.InsertNode=function(bX,bY,bZ){_9.InsertAt(bX,bZ,bY);return bY;};ba.CreateElemNode=function(bX,bY,bZ){var b0;ba.LinkElement(bX,bZ);b0=_8.Insert(bX,bY);return bp.New(b0,bZ,null,bX,_1.Int(),bS.GetOptional(b0.OnAfterRender));};ba.SyncElemNodesNextFrame=function(bX,bY){function bZ(b0){a.requestAnimationFrame(function(){ba.SyncElemNode(bX,bY.Top);b0();});}return bj.BatchUpdatesEnabled()?P.FromContinuations(function(b0,b1,b2){return bZ.apply(null,[b0,b1,b2]);}):(ba.SyncElemNode(bX,bY.Top),P.Return(null));};ba.ComputeExitAnim=function(bX,bY){return bi.Concat(r.map(function(bZ){return _8.GetExitAnim(bZ.Attr);},by.ToArray(by.Except(bY,by.Filter(function(bZ){return _8.HasExitAnim(bZ.Attr);},bX.PreviousNodes)))));};ba.ComputeEnterAnim=function(bX,bY){return bi.Concat(r.map(function(bZ){return _8.GetEnterAnim(bZ.Attr);},by.ToArray(by.Except(bX.PreviousNodes,by.Filter(function(bZ){return _8.HasEnterAnim(bZ.Attr);},bY)))));};ba.ComputeChangeAnim=function(bX,bY){var bZ;function b0(b1){return _8.HasChangeAnim(b1.Attr);}bZ=function(b1){return by.Filter(b0,b1);};return bi.Concat(r.map(function(b1){return _8.GetChangeAnim(b1.Attr);},by.ToArray(by.Intersect(bZ(bX.PreviousNodes),bZ(bY)))));};ba.SyncElemNode=function(bX,bY){!bX?ba.SyncElement(bY):void 0;ba.Sync(bY.Children);ba.AfterRender(bY);};ba.SyncElement=function(bX){function bY(bZ){function b0(b1){var b2,b3;return b1!=null&&b1.$==0?b0(b1.$0)||b0(b1.$1):b1!=null&&b1.$==2?(b2=b1.$0,b2.Dirty||b0(b2.Current)):b1!=null&&b1.$==6&&(b3=b1.$0,b3.Dirty||r.exists(bY,b3.Holes));}return b0(bZ.Children);}_8.Sync(bX.El,bX.Attr);bY(bX)?ba.DoSyncElement(bX):void 0;};ba.Sync=function(bX){var bY,bZ;if(bX!=null&&bX.$==1)ba.SyncElemNode(false,bX.$0);else if(bX!=null&&bX.$==2)ba.Sync(bX.$0.Current);else if(bX==null);else if(bX!=null&&bX.$==5);else if(bX!=null&&bX.$==4){bY=bX.$0;bY.Dirty?(bY.Text.nodeValue=bY.Value,bY.Dirty=false):void 0;}else if(bX!=null&&bX.$==6){bZ=bX.$0;r.iter(function(b0){ba.SyncElemNode(false,b0);},bZ.Holes);r.iter(function(b0){_8.Sync(b0[0],b0[1]);},bZ.Attrs);ba.AfterRender(bZ);}else{ba.Sync(bX.$0);ba.Sync(bX.$1);}};ba.AfterRender=function(bX){var bY;bY=bS.GetOptional(bX.Render);bY!=null&&bY.$==1?(bY.$0(bX.El),bS.SetOptional(bX,"Render",null)):void 0;};ba.DoSyncElement=function(bX){var bY,bZ,b0;function b1(b2,b3){var b4,b5;return b2!=null&&b2.$==1?b2.$0.El:b2!=null&&b2.$==2?(b4=b2.$0,b4.Dirty?(b4.Dirty=false,ba.InsertDoc(bY,b4.Current,b3)):b1(b4.Current,b3)):b2==null?b3:b2!=null&&b2.$==4?b2.$0.Text:b2!=null&&b2.$==5?b2.$0:b2!=null&&b2.$==6?(b5=b2.$0,(b5.Dirty?b5.Dirty=false:void 0,r.foldBack(function(b6,b7){return b6==null||b6.constructor===V?b1(b6,b7):b6;},b5.Els,b3))):b1(b2.$0,b1(b2.$1,b3));}bY=bX.El;bM.Iter((bZ=bX.El,function(b2){_9.RemoveNode(bZ,b2);}),bM.Except(bM.DocChildren(bX),bM.Children(bX.El,bS.GetOptional(bX.Delimiters))));b1(bX.Children,(b0=bS.GetOptional(bX.Delimiters),b0!=null&&b0.$==1?b0.$0[1]:null));};bc=bb.Dictionary=bS.Class({set_Item:function(bX,bY){this.set(bX,bY);},ContainsKey:function(bX){var bY,bZ;bY=this;bZ=this.data[this.hash(bX)];return bZ==null?false:r.exists(function(b0){return bY.equals.apply(null,[(m.KeyValue(b0))[0],bX]);},bZ);},TryGetValue:function(bX,bY){var bZ,b0,b1;bZ=this;b0=this.data[this.hash(bX)];return b0==null?false:(b1=r.tryPick(function(b2){var b3;b3=m.KeyValue(b2);return bZ.equals.apply(null,[b3[0],bX])?{$:1,$0:b3[1]}:null;},b0),b1!=null&&b1.$==1&&(bY.set(b1.$0),true));},Remove:function(bX){return this.remove(bX);},get_Keys:function(){return new bv.New(this);},set:function(bX,bY){var bZ,b0,b1,b2;bZ=this;b0=this.hash(bX);b1=this.data[b0];b1==null?(this.count=this.count+1,this.data[b0]=new a.Array({K:bX,V:bY})):(b2=r.tryFindIndex(function(b3){return bZ.equals.apply(null,[(m.KeyValue(b3))[0],bX]);},b1),b2==null?(this.count=this.count+1,b1.push({K:bX,V:bY})):b1[b2.$0]={K:bX,V:bY});},remove:function(bX){var bY,bZ,b0,b1;bY=this;bZ=this.hash(bX);b0=this.data[bZ];return b0==null?false:(b1=r.filter(function(b2){return!bY.equals.apply(null,[(m.KeyValue(b2))[0],bX]);},b0),r.length(b1)<b0.length&&(this.count=this.count-1,this.data[bZ]=b1,true));},get_Item:function(bX){return this.get(bX);},get:function(bX){var bY,bZ;bY=this;bZ=this.data[this.hash(bX)];return bZ==null?bs.notPresent():r.pick(function(b0){var b1;b1=m.KeyValue(b0);return bY.equals.apply(null,[b1[0],bX])?{$:1,$0:b1[1]}:null;},bZ);},GetEnumerator:function(){return T.Get0(this);},GetEnumerator0:function(){return T.Get0(r.concat(M.GetFieldValues(this.data)));}},i,bc);bc.New$5=bS.Ctor(function(){bc.New$6.call(this,[],u.Equals,u.Hash);},bc);bc.New$6=bS.Ctor(function(bX,bY,bZ){var b0,b1;i.New.call(this);this.equals=bY;this.hash=bZ;this.count=0;this.data=[];b0=T.Get(bX);try{while(b0.MoveNext()){b1=b0.Current();this.set(b1.K,b1.V);}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}},bc);Z.Obsolete=function(bX){var bY,bZ,b0,b1,b2;bZ=bX.s;if(bZ==null||(bZ!=null&&bZ.$==2?(bY=bZ.$1,false):bZ!=null&&bZ.$==3?(bY=bZ.$1,false):true))void 0;else{bX.s=null;for(b0=0,b1=r.length(bY)-1;b0<=b1;b0++){b2=r.get(bY,b0);typeof b2=="object"?function(b3){Z.Obsolete(b3);}(b2):b2();}}};Z.New=function(bX){return{s:bX};};bd=P.Scheduler=bS.Class({Fork:function(bX){var bY;bY=this;this.robin.push(bX);this.idle?(this.idle=false,a.setTimeout(function(){bY.tick();},0)):void 0;},tick:function(){var bX,bY,bZ;bY=this;bZ=bW.now();bX=true;while(bX)if(this.robin.length===0){this.idle=true;bX=false;}else{(this.robin.shift())();bW.now()-bZ>40?(a.setTimeout(function(){bY.tick();},0),bX=false):void 0;}}},i,bd);bd.New=bS.Ctor(function(){i.New.call(this);this.idle=true;this.robin=[];},bd);be=h.CancellationTokenSource=bS.Class({},i,be);be.New=bS.Ctor(function(){i.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},be);bf.$cctor=function(){bf.$cctor=a.ignore;bf.counter=0;};bg.$cctor=function(){bg.$cctor=a.ignore;bg.LoadedTemplates=new bc.New$5();bg.LocalTemplatesLoaded=false;bg.TextHoleRE="\\${([^}]+)}";};bh=bb.HashSet=bS.Class({Add:function(bX){return this.add(bX);},Contains:function(bX){var bY;bY=this.data[this.hash(bX)];return bY==null?false:this.arrContains(bX,bY);},add:function(bX){var bY,bZ;bY=this.hash(bX);bZ=this.data[bY];return bZ==null?(this.data[bY]=[bX],this.count=this.count+1,true):this.arrContains(bX,bZ)?false:(bZ.push(bX),this.count=this.count+1,true);},arrContains:function(bX,bY){var bZ,b0,b1,b2;bZ=true;b0=0;b2=bY.length;while(bZ&&b0<b2)if(this.equals.apply(null,[bY[b0],bX]))bZ=false;else b0=b0+1;return!bZ;},ExceptWith:function(bX){var bY;bY=T.Get(bX);try{while(bY.MoveNext())this.Remove(bY.Current());}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bX){var bY,bZ,b0,b1;bY=0;bZ=bK.concat(this.data);for(b0=0,b1=bZ.length-1;b0<=b1;b0++)r.set(bX,b0,bZ[b0]);},IntersectWith:function(bX){var bY,bZ,b0,b1,b2;bY=new bh.New$4(bX,this.equals,this.hash);bZ=bK.concat(this.data);for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];!bY.Contains(b2)?this.Remove(b2):void 0;}},Remove:function(bX){var bY;bY=this.data[this.hash(bX)];return bY==null?false:this.arrRemove(bX,bY)&&(this.count=this.count-1,true);},arrRemove:function(bX,bY){var bZ,b0,b1,b2;bZ=true;b0=0;b2=bY.length;while(bZ&&b0<b2)if(this.equals.apply(null,[bY[b0],bX])){bY.splice.apply(bY,[b0,1]);bZ=false;}else b0=b0+1;return!bZ;},GetEnumerator:function(){return T.Get(bK.concat(this.data));},GetEnumerator0:function(){return T.Get(bK.concat(this.data));}},i,bh);bh.New$3=bS.Ctor(function(){bh.New$4.call(this,[],u.Equals,u.Hash);},bh);bh.New$4=bS.Ctor(function(bX,bY,bZ){var b0;i.New.call(this);this.equals=bY;this.hash=bZ;this.data=[];this.count=0;b0=T.Get(bX);try{while(b0.MoveNext())this.add(b0.Current());}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}},bh);bh.New$2=bS.Ctor(function(bX){bh.New$4.call(this,bX,u.Equals,u.Hash);},bh);bi.get_UseAnimations=function(){return bz.UseAnimations();};bi.Play=function(bX){var bY;bY=null;return P.Delay(function(){return P.Bind(bi.Run(a.ignore,bz.Actions(bX)),function(){bz.Finalize(bX);return P.Return(null);});});};bi.Append=function(bX,bY){return{$:0,$0:bF.Append(bX.$0,bY.$0)};};bi.Run=function(bX,bY){var bZ;function b0(b1){function b2(b3,b4){var b5;b5=b4-b3;bY.Compute(b5);bX();return b5<=bZ?void a.requestAnimationFrame(function(b6){b2(b3,b6);}):b1();}a.requestAnimationFrame(function(b3){b2(b3,b3);});}bZ=bY.Duration;return bZ===0?P.Zero():P.FromContinuations(function(b1,b2,b3){return b0.apply(null,[b1,b2,b3]);});};bi.Concat=function(bX){return{$:0,$0:bF.Concat(w.map(bz.List,bX))};};bi.get_Empty=function(){return{$:0,$0:bF.Empty()};};bj.BatchUpdatesEnabled=function(){bA.$cctor();return bA.BatchUpdatesEnabled;};bk.StartProcessor=function(bX){var bY;function bZ(){var b0;b0=null;return P.Delay(function(){return P.Bind(bX,function(){var b1;b1=bY[0];return b1===1?(bY[0]=0,P.Zero()):b1===2?(bY[0]=1,bZ()):P.Zero();});});}bY=[0];return function(){var b0;b0=bY[0];b0===0?(bY[0]=1,P.Start(bZ(),null)):b0===1?bY[0]=2:void 0;};};bm=h.OperationCanceledException=bS.Class({},bl,bm);bm.New=bS.Ctor(function(bX){bm.New$1.call(this,"The operation was canceled.",null,bX);},bm);bm.New$1=bS.Ctor(function(bX,bY,bZ){this.message=bX;this.inner=bY;V.setPrototypeOf(this,bm.prototype);this.ct=bZ;},bm);bn=B.Elt=bS.Class({},R,bn);bn.New=function(bX,bY,bZ){var b0,b1;b0=ba.CreateElemNode(bX,bY,bZ.docNode);b1=bB.Create(bZ.updates);return new bn.New$1({$:1,$0:b0},N.Map2Unit(_8.Updates(b0.Attr),b1.v),bX,b1);};bn.New$1=bS.Ctor(function(bX,bY,bZ,b0){R.New.call(this,bX,bY);this.docNode$1=bX;this.updates$1=bY;this.elt=bZ;this.rvUpdates=b0;},bn);bo.ofSeqNonCopying=function(bX){var bY,bZ;if(bX instanceof a.Array)return bX;else if(bX instanceof X)return r.ofList(bX);else if(bX===null)return[];else{bY=[];bZ=T.Get(bX);try{while(bZ.MoveNext())bY.push(bZ.Current());return bY;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}}};bo.TreeReduce=function(bX,bY,bZ){var b0;function b1(b2,b3){var b4,b5;return b3<=0?bX:b3===1&&(b2>=0&&b2<b0)?r.get(bZ,b2):(b5=b3/2>>0,bY(b1(b2,b5),b1(b2+b5,b3-b5)));}b0=r.length(bZ);return b1(0,b0);};bo.MapTreeReduce=function(bX,bY,bZ,b0){var b1;function b2(b3,b4){var b5,b6;return b4<=0?bY:b4===1&&(b3>=0&&b3<b1)?bX(r.get(b0,b3)):(b6=b4/2>>0,bZ(b2(b3,b6),b2(b3+b6,b4-b6)));}b1=r.length(b0);return b2(0,b1);};bp=B.DocElemNode=bS.Class({Equals:function(bX){return this.ElKey===bX.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bp);bp.New=function(bX,bY,bZ,b0,b1,b2){var b3;return new bp((b3={Attr:bX,Children:bY,El:b0,ElKey:b1},(bS.SetOptional(b3,"Delimiters",bZ),bS.SetOptional(b3,"Render",b2),b3)));};br.$cctor=function(){br.$cctor=a.ignore;br.Doc=self.document;};bs.notPresent=function(){return m.FailWith("The given key was not present in the dictionary.");};bt.convertTextNode=function(bX){var bY,bZ,b0,b1,b2,b3;bY=null;bZ=0;b1=bX.textContent;b2=new a.RegExp(_3.TextHoleRE(),"g");while(bY=b2.exec(b1),bY!==null){bX.parentNode.insertBefore(self.document.createTextNode(bu.string(b1,{$:1,$0:bZ},{$:1,$0:b2.lastIndex-r.get(bY,0).length-1})),bX);bZ=b2.lastIndex;b3=self.document.createElement("span");b3.setAttribute("ws-replace",r.get(bY,1).toLowerCase());bX.parentNode.insertBefore(b3,bX);}b2.lastIndex=0;bX.textContent=bu.string(b1,{$:1,$0:bZ},null);};bt.failNotLoaded=function(bX){bU.warn("Instantiating non-loaded template",bX);};bt.fillTextHole=function(bX,bY,bZ){var b0;b0=bX.querySelector("[ws-replace]");return u.Equals(b0,null)?(bU.warn("Filling non-existent text hole",bZ),null):(b0.parentNode.replaceChild(new a.Text(bY),b0),{$:1,$0:b0.getAttribute("ws-replace")});};bt.removeHolesExcept=function(bX,bY){function bZ(b0){_9.IterSelector(bX,"["+b0+"]",function(b1){if(!bY.Contains(b1.getAttribute(b0)))b1.removeAttribute(b0);});}bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");_9.IterSelector(bX,"[ws-hole]",function(b0){if(!bY.Contains(b0.getAttribute("ws-hole"))){b0.removeAttribute("ws-hole");while(b0.hasChildNodes())b0.removeChild(b0.lastChild);}});_9.IterSelector(bX,"[ws-replace]",function(b0){if(!bY.Contains(b0.getAttribute("ws-replace")))b0.parentNode.removeChild(b0);});_9.IterSelector(bX,"[ws-on]",function(b0){b0.setAttribute("ws-on",O.concat(" ",r.filter(function(b1){return bY.Contains(r.get(O.SplitChars(b1,[":"],1),1));},O.SplitChars(b0.getAttribute("ws-on"),[" "],1))));});_9.IterSelector(bX,"[ws-attr-holes]",function(b0){var b1,b2,b3,b4,b5;b1=O.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=r.get(b1,b2);b0.setAttribute(b4,(b5=new a.RegExp(_3.TextHoleRE(),"g"),b0.getAttribute(b4).replace(b5,function(b6,b7){return bY.Contains(b7)?b6:"";})));}});};bt.fillInstanceAttrs=function(bX,bY){var bZ,b0,b1,b2,b3;bt.convertAttrs(bY);bZ=bY.nodeName.toLowerCase();b0=bX.querySelector("[ws-attr="+bZ+"]");if(u.Equals(b0,null))bU.warn("Filling non-existent attr hole",bZ);else{b0.removeAttribute("ws-attr");for(b1=0,b2=bY.attributes.length-1;b1<=b2;b1++){b3=bY.attributes.item(b1);b3.name==="class"&&b0.hasAttribute("class")?b0.setAttribute("class",b0.getAttribute("class")+" "+b3.nodeValue):b0.setAttribute(b3.name,b3.nodeValue);}}};bt.mapHoles=function(bX,bY){function bZ(b0){_9.IterSelector(bX,"["+b0+"]",function(b1){var b2,b3;b2=(b3=null,[bY.TryGetValue(b1.getAttribute(b0).toLowerCase(),{get:function(){return b3;},set:function(b4){b3=b4;}}),b3]);b2[0]?b1.setAttribute(b0,b2[1]):void 0;});}bZ("ws-hole");bZ("ws-replace");bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");_9.IterSelector(bX,"[ws-on]",function(b0){b0.setAttribute("ws-on",O.concat(" ",r.map(function(b1){var b2,b3,b4;b2=O.SplitChars(b1,[":"],1);b3=(b4=null,[bY.TryGetValue(r.get(b2,1),{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]);return b3[0]?r.get(b2,0)+":"+b3[1]:b1;},O.SplitChars(b0.getAttribute("ws-on"),[" "],1))));});_9.IterSelector(bX,"[ws-attr-holes]",function(b0){var b1,b2,b3;b1=O.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++)(function(){var b4;function b5(b6,b7){var b8;b8=m.KeyValue(b7);return b6.replace(new a.RegExp("\\${"+b8[0]+"}","ig"),"${"+b8[1]+"}");}b4=r.get(b1,b2);return b0.setAttribute(b4,(((bS.Curried3(w.fold))(b5))(b0.getAttribute(b4)))(bY));}());});};bt.fill=function(bX,bY,bZ){while(true)if(bX.hasChildNodes())bZ=bY.insertBefore(bX.lastChild,bZ);else return null;};bt.convertAttrs=function(bX){var bZ,b0,b1,b2,b3,b4,b5,b6;function bY(b7){var b8;b8=bX.getAttribute(b7);b8===null?void 0:bX.setAttribute(b7,b8.toLowerCase());}bZ=bX.attributes;b0=[];b1=[];b2=[];for(b3=0,b4=bZ.length-1;b3<=b4;b3++){b5=bZ.item(b3);O.StartsWith(b5.nodeName,"ws-on")&&b5.nodeName!=="ws-onafterrender"&&b5.nodeName!=="ws-on"?(b0.push(b5.nodeName),b1.push(bu.string(b5.nodeName,{$:1,$0:"ws-on".length},null)+":"+b5.nodeValue.toLowerCase())):!O.StartsWith(b5.nodeName,"ws-")&&(new a.RegExp(_3.TextHoleRE())).test(b5.nodeValue)?(b5.nodeValue=(b6=new a.RegExp(_3.TextHoleRE(),"g"),b5.nodeValue.replace(b6,function(b7,b8){return"${"+b8.toLowerCase()+"}";})),b2.push(b5.nodeName)):void 0;}!(b1.length==0)?bX.setAttribute("ws-on",O.concat(" ",b1)):void 0;!(b2.length==0)?bX.setAttribute("ws-attr-holes",O.concat(" ",b2)):void 0;bY("ws-hole");bY("ws-replace");bY("ws-attr");bY("ws-onafterrender");bY("ws-var");r.iter(function(b7){bX.removeAttribute(b7);},b0);};bu.string=function(bX,bY,bZ){return bY==null?bZ!=null&&bZ.$==1?bX.slice(0,bZ.$0+1):"":bZ==null?bX.slice(bY.$0):bX.slice(bY.$0,bZ.$0+1);};w.insufficient=function(){return m.FailWith("The input sequence has an insufficient number of elements.");};bv=bb.KeyCollection=bS.Class({GetEnumerator$1:function(){return T.Get(w.map(function(bX){return bX.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},i,bv);bv.New=bS.Ctor(function(bX){i.New.call(this);this.d=bX;},bv);bx.New=function(bX,bY){return{PreviousNodes:bX,Top:bY};};by.get_Empty=function(){return{$:0,$0:new bh.New$3()};};by.FindAll=function(bX){var bY;function bZ(b1){if(b1!=null&&b1.$==0){bZ(b1.$0);bZ(b1.$1);}else if(b1!=null&&b1.$==1)b0(b1.$0);else if(b1!=null&&b1.$==2)bZ(b1.$0.Current);else if(b1!=null&&b1.$==6)r.iter(b0,b1.$0.Holes);}function b0(b1){bY.push(b1);bZ(b1.Children);}bY=[];bZ(bX);return{$:0,$0:new bh.New$2(bY)};};by.Filter=function(bX,bY){return{$:0,$0:bJ.Filter(bX,bY.$0)};};by.Except=function(bX,bY){return{$:0,$0:bJ.Except(bX.$0,bY.$0)};};by.ToArray=function(bX){return bJ.ToArray(bX.$0);};by.Intersect=function(bX,bY){return{$:0,$0:bJ.Intersect(bX.$0,bY.$0)};};bz.UseAnimations=function(){bE.$cctor();return bE.UseAnimations;};bz.Actions=function(bX){return bz.ConcatActions(r.choose(function(bY){return bY.$==1?{$:1,$0:bY.$0}:null;},bF.ToArray(bX.$0)));};bz.Finalize=function(bX){r.iter(function(bY){if(bY.$==0)bY.$0();},bF.ToArray(bX.$0));};bz.ConcatActions=function(bX){var bY,bZ,b0,b1;bY=bo.ofSeqNonCopying(bX);bZ=r.length(bY);return bZ===0?bz.Const():bZ===1?r.get(bY,0):(b0=w.max(w.map(function(b2){return b2.Duration;},bY)),(b1=r.map(function(b2){return bz.Prolong(b0,b2);},bY),bz.Def(b0,function(b2){r.iter(function(b3){b3.Compute(b2);},b1);})));};bz.List=function(bX){return bX.$0;};bz.Const=function(bX){return bz.Def(0,function(){return bX;});};bz.Def=function(bX,bY){return{Compute:bY,Duration:bX};};bz.Prolong=function(bX,bY){var bZ,b0,b1;bZ=bY.Compute;b0=bY.Duration;b1=bN.Create(function(){return bY.Compute(bY.Duration);});return{Compute:function(b2){return b2>=b0?b1.f():bZ(b2);},Duration:bX};};bA.$cctor=function(){bA.$cctor=a.ignore;bA.BatchUpdatesEnabled=true;};bB=B.Updates=bS.Class({},null,bB);bB.Create=function(bX){var bY;bY=null;bY=bB.New(bX,null,function(){var bZ;bZ=bY.s;return bZ===null?(bZ=Z.Copy(bY.c()),bY.s=bZ,Z.WhenObsoleteRun(bZ,function(){bY.s=null;}),bZ):bZ;});return bY;};bB.New=function(bX,bY,bZ){return new bB({c:bX,s:bY,v:bZ});};bD.New=function(bX,bY,bZ,b0){var b1;b1={DynElem:bX,DynFlags:bY,DynNodes:bZ};bS.SetOptional(b1,"OnAfterRender",b0);return b1;};bE.$cctor=function(){bE.$cctor=a.ignore;bE.CubicInOut=bI.Custom(function(bX){var bY;bY=bX*bX;return 3*bY-2*(bY*bX);});bE.UseAnimations=true;};bF.Append=function(bX,bY){return bX.$==0?bY:bY.$==0?bX:{$:2,$0:bX,$1:bY};};bF.ToArray=function(bX){var bY;function bZ(b0){if(b0.$==1)bY.push(b0.$0);else if(b0.$==2){bZ(b0.$0);bZ(b0.$1);}else if(b0.$==3)r.iter(function(b1){bY.push(b1);},b0.$0);}bY=[];bZ(bX);return bY.slice(0);};bF.Concat=function(bX){var bY;bY=bo.ofSeqNonCopying(bX);return bo.TreeReduce(bF.Empty(),bF.Append,bY);};bF.Empty=function(){bO.$cctor();return bO.Empty;};bG.Clear=function(bX){bX.splice(0,r.length(bX));};bH.$cctor=function(){bH.$cctor=a.ignore;bH.EmptyAttr=null;};bI=B.Easing=bS.Class({},i,bI);bI.Custom=function(bX){return new bI.New(bX);};bI.New=bS.Ctor(function(bX){i.New.call(this);this.transformTime=bX;},bI);bJ.Filter=function(bX,bY){return new bh.New$2(r.filter(bX,bJ.ToArray(bY)));};bJ.Except=function(bX,bY){var bZ;bZ=new bh.New$2(bJ.ToArray(bY));bZ.ExceptWith(bJ.ToArray(bX));return bZ;};bJ.ToArray=function(bX){var bY;bY=r.create(bX.get_Count(),void 0);bX.CopyTo(bY);return bY;};bJ.Intersect=function(bX,bY){var bZ;bZ=new bh.New$2(bJ.ToArray(bX));bZ.IntersectWith(bJ.ToArray(bY));return bZ;};bK.concat=function(bX){var bY,bZ;bY=[];for(var b0 in bX)bY.push.apply(bY,bX[b0]);return bY;};bL=B.DynamicAttrNode=bS.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bX){return bi.get_Empty();},NGetEnterAnim:function(bX){return bi.get_Empty();},NGetChangeAnim:function(bX){return bi.get_Empty();},NSync:function(bX){if(this.dirty){(this.push(bX))(this.value);this.dirty=false;}}},i,bL);bL.New=bS.Ctor(function(bX,bY){var bZ;bZ=this;i.New.call(this);this.push=bY;this.value=void 0;this.dirty=false;this.updates=N.Map(function(b0){bZ.value=b0;bZ.dirty=true;},bX);},bL);bM.Children=function(bX,bY){var bZ,b0,b1;if(bY!=null&&bY.$==1){b1=[];bZ=bY.$0[0].nextSibling;while(bZ!==bY.$0[1]){b1.push(bZ);bZ=bZ.nextSibling;}return{$:0,$0:b1};}else return{$:0,$0:r.init(bX.childNodes.length,(b0=bX.childNodes,function(b2){return b0[b2];}))};};bM.Except=function(bX,bY){var bZ;bZ=bX.$0;return{$:0,$0:r.filter(function(b0){return r.forall(function(b1){return!(b0===b1);},bZ);},bY.$0)};};bM.Iter=function(bX,bY){r.iter(bX,bY.$0);};bM.DocChildren=function(bX){var bY;function bZ(b0){if(b0!=null&&b0.$==2)bZ(b0.$0.Current);else if(b0!=null&&b0.$==1)bY.push(b0.$0.El);else if(b0==null);else if(b0!=null&&b0.$==5)bY.push(b0.$0);else if(b0!=null&&b0.$==4)bY.push(b0.$0.Text);else if(b0!=null&&b0.$==6)r.iter(function(b1){if(b1==null||b1.constructor===V)bZ(b1);else bY.push(b1);},b0.$0.Els);else{bZ(b0.$0);bZ(b0.$1);}}bY=[];bZ(bX.Children);return{$:0,$0:bo.ofSeqNonCopying(bY)};};bN.Create=function(bX){return bQ.New(false,bX,bN.forceLazy);};bN.forceLazy=function(){var bX;bX=this.v();this.c=true;this.v=bX;this.f=bN.cachedLazy;return bX;};bN.cachedLazy=function(){return this.v;};bO.$cctor=function(){bO.$cctor=a.ignore;bO.Empty={$:0};};bQ.New=function(bX,bY,bZ){return{c:bX,v:bY,f:bZ};};bS.OnLoad(function(){g.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

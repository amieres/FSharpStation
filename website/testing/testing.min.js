function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.StartAppFramework=c.StartAppFramework||{};e=c.Util=c.Util||{};f=c.AF=c.AF||{};g=a.WebSharper=a.WebSharper||{};h=g.Obj=g.Obj||{};i=f.PlugInBuilder=f.PlugInBuilder||{};j=f.ListModelData=f.ListModelData||{};k=c.LayoutEngine=c.LayoutEngine||{};l=c.ListModel=c.ListModel||{};m=c.LM=c.LM||{};n=c.LMX=c.LMX||{};o=c.SnippetTemplates=c.SnippetTemplates||{};p=c.NewLY=c.NewLY||{};q=p.Fun=p.Fun||{};r=p.Val=p.Val||{};s=p.Extract0=p.Extract0||{};t=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};u=g.UI=g.UI||{};v=u.View=u.View||{};w=u.HtmlModule=u.HtmlModule||{};x=w.attr=w.attr||{};y=u.Var$1=u.Var$1||{};z=g.Operators=g.Operators||{};A=b.Library=b.Library||{};B=A.ParseO=A.ParseO||{};C=u.Var=u.Var||{};D=g.Utils=g.Utils||{};E=A.GuidId=A.GuidId||{};F=b.LibraryJS=b.LibraryJS||{};G=F.AppFramework=F.AppFramework||{};H=G.PlugIn=G.PlugIn||{};I=u.ListModel=u.ListModel||{};J=g.Lazy=g.Lazy||{};K=F.LayoutEngineModule=F.LayoutEngineModule||{};L=g.Seq=g.Seq||{};M=G.PlugInVar=G.PlugInVar||{};N=G.PlugInView=G.PlugInView||{};O=G.PlugInDoc=G.PlugInDoc||{};P=G.PlugInAction=G.PlugInAction||{};Q=G.PlugInQuery=G.PlugInQuery||{};R=u.Doc=u.Doc||{};S=F.View=F.View||{};T=F.LayoutEngine=F.LayoutEngine||{};U=g.Unchecked=g.Unchecked||{};V=u.ViewBuilder=u.ViewBuilder||{};W=g.List=g.List||{};X=W.T=W.T||{};Y=a.System=a.System||{};Z=Y.Guid=Y.Guid||{};_0=A.String=A.String||{};_1=g.Slice=g.Slice||{};_2=A.Monads=A.Monads||{};_3=_2.Depend=_2.Depend||{};_4=F.AppFrameworkTemplate=F.AppFrameworkTemplate||{};_5=_3.DependBuilder=_3.DependBuilder||{};_6=g.Strings=g.Strings||{};_7=a.EventTarget;_8=a.Node;_9=a.WindowOrWorkerGlobalScope;_=g.JavaScript=g.JavaScript||{};$=_.JS=_.JS||{};ba=_.Pervasives=_.Pervasives||{};bb=u.AttrModule=u.AttrModule||{};bc=G.PlugInBuilder=G.PlugInBuilder||{};bd=u.Snap=u.Snap||{};be=u.AttrProxy=u.AttrProxy||{};bf=u.Abbrev=u.Abbrev||{};bg=bf.Fresh=bf.Fresh||{};bh=u.FromView=u.FromView||{};bi=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};bj=g.Arrays=g.Arrays||{};bk=g.Enumerator=g.Enumerator||{};bl=g.LazyExtensionsProxy=g.LazyExtensionsProxy||{};bm=bl.LazyRecord=bl.LazyRecord||{};bn=g.Collections=g.Collections||{};bo=bn.List=bn.List||{};bp=bk.T=bk.T||{};bq=u.Array=u.Array||{};br=bn.Dictionary=bn.Dictionary||{};bs=F.ListModel=F.ListModel||{};bt=u.ConcreteVar=u.ConcreteVar||{};bu=u.Storage=u.Storage||{};bv=a.GeneratedPrintf=a.GeneratedPrintf||{};bw=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};bx=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};by=u.Client=u.Client||{};bz=by.Templates=by.Templates||{};bA=u.Attrs=u.Attrs||{};bB=u.DomUtility=u.DomUtility||{};bC=_2.State=_2.State||{};bD=bC.CEBuilder=bC.CEBuilder||{};bE=g.Numeric=g.Numeric||{};bF=F.WebComponent=F.WebComponent||{};bG=bF.WcTabStrip=bF.WcTabStrip||{};bH=bG.WcTabStripT=bG.WcTabStripT||{};bI=u.Templating=u.Templating||{};bJ=bI.Runtime=bI.Runtime||{};bK=bJ.Server=bJ.Server||{};bL=bK.TemplateInstance=bK.TemplateInstance||{};bM=bK.ProviderBuilder=bK.ProviderBuilder||{};bN=bK.Handler=bK.Handler||{};bO=bF.WcSplitter=bF.WcSplitter||{};bP=a.Object;bQ=u.DocElemNode=u.DocElemNode||{};bR=a.CharacterData;bS=bn.FSharpSet=bn.FSharpSet||{};bT=bn.DictionaryUtil=bn.DictionaryUtil||{};bU=bu.ArrayStorage=bu.ArrayStorage||{};bV=u.Docs=u.Docs||{};bW=u.DynamicAttrNode=u.DynamicAttrNode||{};bX=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bY=u.Elt=u.Elt||{};bZ=g.DateUtil=g.DateUtil||{};b0=bn.HashSet=bn.HashSet||{};b1=bJ.Client=bJ.Client||{};b2=bO.WcSplitterT=bO.WcSplitterT||{};b3=by.Attrs=by.Attrs||{};b4=b3.Dyn=b3.Dyn||{};b5=bn.BalancedTree=bn.BalancedTree||{};b6=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};b7=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};b8=u.Updates=u.Updates||{};b9=F.Hoverable=F.Hoverable||{};b_=b9.Hoverable=b9.Hoverable||{};b$=g.CancellationTokenSource=g.CancellationTokenSource||{};ca=u.CheckedInput=u.CheckedInput||{};cb=a.Event;cc=a.UIEvent;cd=F.ResizeObserver=F.ResizeObserver||{};ce=K.Layout=K.Layout||{};cf=K.Measures=K.Measures||{};cg=b5.Tree=b5.Tree||{};ch=bz.Prepare=bz.Prepare||{};ci=bn.KeyCollection=bn.KeyCollection||{};cj=u.An=u.An||{};ck=by.Settings=by.Settings||{};cl=bf.Mailbox=bf.Mailbox||{};cm=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cn=a.Error;co=g.AggregateException=g.AggregateException||{};cp=g.Concurrency=g.Concurrency||{};cq=g.Queue=g.Queue||{};cr=g.MatchFailureException=g.MatchFailureException||{};cs=by.Docs=by.Docs||{};ct=cs.RunState=cs.RunState||{};cu=cs.NodeSet=cs.NodeSet||{};cv=u.Anims=u.Anims||{};cw=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cx=g.FormatException=g.FormatException||{};cy=cp.CT=cp.CT||{};cz=cp.AsyncBody=cp.AsyncBody||{};cA=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};cB=bn.HashSetUtil=bn.HashSetUtil||{};cC=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cD=u.AppendList=u.AppendList||{};cE=cp.Scheduler=cp.Scheduler||{};cF=g.OperationCanceledException=g.OperationCanceledException||{};cG=u.Easing=u.Easing||{};cH=bf.HashSet=bf.HashSet||{};cI=u.String=u.String||{};cJ=cs.DomNodes=cs.DomNodes||{};cK=g.Char=g.Char||{};cL=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cM=a.IntelliFactory;cN=cM&&cM.Runtime;cO=a.Date;cP=a.Math;cQ=a.console;cR=a.jQuery;cS=a.Reflect;d.htmlD=function(){t.$cctor();return t.htmlD;};d.startWithHtmlD=function(){t.$cctor();return t.startWithHtmlD;};e.disabled=function(cT){return bb.DynamicPred("disabled",cT,v.Const(""));};e.inputLabel=function(cT,cU,cV,cW){return R.Element("div",cT,[R.Element("div",[be.Create("class","input-group")],[R.Element("span",[be.Create("class","input-group-addon")],[R.TextNode(cV)]),R.Input([be.Create("class","form-control"),e.disabled(cU)],cW)])]);};e.areaLabel=function(cT,cU,cV,cW){return R.Element("div",cT,[R.Element("div",[be.Create("class","input-group")],[R.Element("span",[be.Create("class","input-group-addon")],[R.TextNode(cV)]),R.InputArea([be.Create("class","form-control"),e.disabled(cU)],y.Lens(cW,a.id,function(cX,cY){return cY;}))])]);};e.elemsUI=function(cT,cU){return R.Element("div",[],[cT,R.Button("New",[],cU)]);};e.lensFloat2Str=function(cT){var cU;function cV(cW){if(cW!=null&&cW.$==1)if(cW.$0!==cT.Get())cT.Set(cW.$0);}return new bh.New(v.Map(function(cW){return(function(cX){return function(cY){return cX(D.prettyPrint(cY));};}(a.id))(cW);},cT.get_View()),(cU=B.parseDoubleO(),function(cW){return cV(cU(cW));}));};e.textLine=function(cT){return R.Element("div",[],[R.TextView(cT)]);};e.lensStrO=function(cT){return new bh.New(v.Map(function(cU){return cU!=null&&cU.$==1?cU.$0:"";},cT.get_View()),function(cU){if(cU==="")cT.Set(null);else cT.Set({$:1,$0:cU});});};e.mapVarO=function(cT,cU,cV){return new bh.New(v.Map(function(cW){return cW==null?null:{$:1,$0:cT(cW.$0)};},cV.get_View()),function(cW){var cX;if(cW!=null&&cW.$==1){cX=cU(cW.$0);cX==null?void 0:cV.Set({$:1,$0:cX.$0});}else cV.Set(null);});};e.selectorLens=function(cT,cU){function cV(cW){return e.mapVarO(cT,cU,cW);}return function(cW){return e.lensStrO(cV(cW));};};e.selectorLensInt=function(cT){return(e.selectorLens(a.String,B.parseIntO()))(cT);};e.selectorLensGuid=function(cT){return(e.selectorLens(a.String,B.parseGuidO()))(cT);};e.selectorLensGuidId=function(cT){var cU,cV;function cW(cX){return new E({$:0,$0:cX});}return(e.selectorLens(function(cX){var cY;cY=cX.get_Id();return a.String(cY);},(cU=B.parseGuidO(),(cV=function(cX){return cX==null?null:{$:1,$0:cW(cX.$0)};},function(cX){return cV(cU(cX));}))))(cT);};e.unselectorV=function(){t.$cctor();return t.unselectorV;};e.simpleButton=function(cT,cU){function cV(cW){}return R.Button(cT,[],function(cW){return cV(cU(cW));});};e.newButton=function(cT){return e.simpleButton("New",cT);};e.orderedList=function(cT){return R.Element("ol",[],[cT]);};f.plugin=function(){t.$cctor();return t.plugin;};f.addPlugIn2=function(cT){var cU;G.addPlugIn(cT);cU=L.tryHead(cT.plgDocs);cU!=null&&cU.$==1?G.mainDocV().Set(cT.plgName+"."+cU.$0.docName):void 0;};f.concatMainDocs=function(cT){return R.Concat(L.choose(function(cU){return cU.docDoc.$==0?{$:1,$0:cU.docDoc.$0.f()}:null;},L.choose(function(cU){return L.tryHead(cU.plgDocs);},cT)));};h=g.Obj=cN.Class({Equals:function(cT){return this===cT;},GetHashCode:function(){return -1;}},null,h);h.New=cN.Ctor(function(){},h);i=f.PlugInBuilder=cN.Class({Zero:function(){var cT;cT=G.defaultPlugIn();return H.New("Main",cT.plgVars,cT.plgViews,cT.plgDocs,cT.plgActions,cT.plgQueries);},Yield:function(){return this.Zero();},For:function(cT,cU){var cV;cV=bk.Get(cT);while(cV.MoveNext())cU(cV.Current());},Name:function(cT,cU){return H.New(cU,cT.plgVars,cT.plgViews,cT.plgDocs,cT.plgActions,cT.plgQueries);},AddVar:function(cT,cU,cV){cT.plgVars.Append(G.newVar(cU,cV));return cT;},AddDoc:function(cT,cU,cV){cT.plgDocs.Append(G.newDoc(cU,cV));return cT;},AddDocF:function(cT,cU,cV){cT.plgDocs.Append(G.newDoc(cU,J.Create(function(){return K.turnToView(cV);})));return cT;},AddAct:function(cT,cU,cV){cT.plgActions.Append(G.newAct(cU,cV));return cT;},AddActO:function(cT,cU,cV){cV==null?void 0:cT.plgActions.Append(G.newAct(cU,cV.$0));return cT;},AddViw:function(cT,cU,cV){cT.plgViews.Append(G.newViw(cU,cV));return cT;},Merge:function(cT,cU,cV){cT.plgVars.AppendMany(L.map(function(cW){return M.New(cU+cW.varName,cW.varVar);},cV.plgVars));cT.plgViews.AppendMany(L.map(function(cW){return N.New(cU+cW.viwName,cW.viwView);},cV.plgViews));cT.plgDocs.AppendMany(L.map(function(cW){return O.New(cU+cW.docName,cW.docDoc);},cV.plgDocs));cT.plgActions.AppendMany(L.map(function(cW){return P.New(cU+cW.actName,cW.actFunction,cW.actEnabled);},cV.plgActions));cT.plgQueries.AppendMany(L.map(function(cW){return Q.New(cU+cW.qryName,cW.qryFunction);},cV.plgQueries));return cT;}},h,i);i.New=cN.Ctor(function(){h.New.call(this);},i);j=f.ListModelData=cN.Class({PlugIn:function(cT){var cU,cV,cW;function cX(cY){}cU=this;cV=f.plugin();return cV.AddAct(cV.AddAct(cV.AddVar(cV.AddDoc(cV.Yield(),"list",J.Create(function(){return cU.doc;})),"sel",cT(this.selV)),"add",(cW=this.add,function(cY){return cX(cW(cY));})),"del",this.delCur);},get_CurrentW:function(){var cT,cU,cV,cW,cX,cY;return v.Map((cT=function(cZ){return cZ==null?null:a.id(cZ.$0);},(cU=(cV=this.def,function(cZ){return cZ==null?cV:cZ.$0;}),function(cZ){return cU(cT(cZ));})),v.Bind((cW=(cX=(cY=this.elems,function(cZ){return cY.TryFindByKeyAsView(cZ);}),function(cZ){return cZ==null?null:{$:1,$0:cX(cZ.$0)};}),function(cZ){return S.insertWO(cW(cZ));}),this.selV.get_View()));},get_CurrentV:function(){var cT;cT=this;return new bh.New(this.get_CurrentW(),function(cU){var cV;cV=cT.selV.Get();cV!=null&&cV.$==1?cT.elems.ContainsKey(cV.$0)?cT.elems.Append(cU):void 0:void 0;});}},null,j);j.New=function(cT,cU,cV,cW,cX,cY){return new j({elems:cT,doc:cU,selV:cV,add:cW,delCur:cX,def:cY});};k.addLayout0=function(cT){K.addLayout(cT);G.mainDocV().Set(cT.lytName);};l.MapLens=function(cT,cU,cV){function cW(cY,cZ){return cU(cY,cV.Lens(cY));}function cX(cY,cZ){return bj.filter(cZ,cY);}return cT!=null&&cT.$==1?v.MapSeqCachedViewBy(cV.key,cW,(((cN.Curried3(v.Map2))(cX))(cV["var"].get_View()))(cT.$0)):v.MapSeqCachedViewBy(cV.key,cW,cV["var"].get_View());};m.getDocFor=function(cT,cU,cV,cW,cX){var cY,cZ,c0,c1,c2,c3;function c4(c7){var c8;return c7!=null&&c7.$==1&&(cT.ContainsKey(c7.$0)&&(c8=c7.$0,true))?{$:1,$0:c8}:null;}function c5(c7){if(!U.Equals(cZ.Get(),c7))cZ.Set(c7);}function c6(c7,c8){c0.Set(null);return cT.RemoveByKey(c7);}cY=cT.key;cZ=y.Create$1(null);c0=new bh.New((c1=v.get_Do(),v.Bind(function(c7){var c8;return c7!=null&&c7.$==1?(c8=c7.$0,v.Bind(function(c9){return!c9?v.Const(null):v.Const({$:1,$0:c8});},cT.ContainsKeyAsView(c8))):v.Const(null);},cZ.get_View())),function(c7){return c5(c4(c7));});c2=j.New(cT,R.get_Empty(),c0,function(){var c7;c7=cV();cT.Append(c7);c0.Set({$:1,$0:cY(c7)});return c7;},function(){var c7;c7=c0.Get();c7==null?void 0:c6(c7.$0,null);},cU);c3=cX(c2);return j.New(c2.elems,R.Convert(a.id,l.MapLens(cW,function(c7,c8){return(c3(v.Const({$:1,$0:c7})))(c8);},cT)),c2.selV,c2.add,c2.delCur,c2.def);};m.getDoc=function(cT,cU,cV,cW,cX){return m.getDocFor(I.Create(cT,X.Empty),cU,cV,cW,cX);};m.addElements=function(cT,cU){cT.elems.AppendMany(cU);};n.addNewO=function(cT,cU,cV){var cW;cW=cU;return function(){var cX;cX=[cW,cT()];cW=cV(cW);return cX;};};n.elemUI2=function(cT,cU,cV,cW){function cX(cY,cZ){return[cY,cZ];}return cT(cU,cV,y.Lens(cW,function(cY){return cY[1];},function(cY,cZ){return(function(c0){var c1;c1=c0[0];return function(c2){return cX(c1,c2);};}(cY))(cZ);}));};n.getDocInt=function(cT,cU,cV){function cW(cX,cY,cZ){return n.elemUI2(cV,cX,cY,cZ);}return m.getDoc(function(cX){return cX[0];},[-1,cT],n.addNewO(cU,0,function(cX){return 1+cX;}),null,cN.Curried3(cW));};n.getDocGuid=function(cT,cU,cV){function cW(cX,cY,cZ){return n.elemUI2(cV,cX,cY,cZ);}return m.getDoc(function(cX){return cX[0];},["00000000-0000-0000-0000-000000000000",cT],n.addNewO(cU,Z.NewGuid(),function(){return Z.NewGuid();}),null,cN.Curried3(cW));};n.getDocGuidId=function(cT,cU,cV){var cW;function cX(cY,cZ,c0){return n.elemUI2(cV,cY,cZ,c0);}cW=n.addNewO(cU,new E({$:0,$0:Z.NewGuid()}),function(){return new E({$:0,$0:Z.NewGuid()});});return m.getDoc(function(cY){return cY[0];},[new E({$:0,$0:"00000000-0000-0000-0000-000000000000"}),cT],cW,null,cN.Curried3(cX));};n.addElements=function(cT,cU){L.iter(function(cV){cT.elems.Append([(cT.add())[0],cV]);},cU);};o.html=function(){t.$cctor();return t.html$1;};p.add1=function(cT){return cT+1;};p.a11V=function(){t.$cctor();return t.a11V;};p.mainX=function(){t.$cctor();return t.mainX;};p.concat=function(cT,cU){return(((cN.Curried3(function(cV,cW,cX){return cV("Concat("+a.String(cW)+", "+cX.toFixed(6)+")");}))(a.id))(cT))(cU);};p.aV=function(){t.$cctor();return t.aV;};p.pa=function(){t.$cctor();return t.pa;};p.pb=function(){t.$cctor();return t.pb;};p.getDoc=function(cT){var cU,cV,cW;cU=(G.splitName("NewLY"))(cT);cV=cU[0];cW=cU[1];return R.BindView(function(cX){var cY;function cZ(){return(function(c0){return function(c1){return c0("Reference not found @{"+D.toSafe(c1)+"}");};}(a.id))(cT);}cY=cX==null?null:{$:1,$0:G.getLazyDoc(cX.$0)};return cY==null?R.TextView(v.Map(function(c0){return c0==null?cZ():c0.$0;},G.tryGetWoWW(cV,cW))):cY.$0;},G.tryGetDocW(cV,cW));};p.extractDoc=function(){t.$cctor();return t.extractDoc$1;};p.vvv=function(){t.$cctor();return t.vvv;};p.op_Dereference=function(cT){return{$:1,$0:cT};};p.name=function(){t.$cctor();return t.name;};p.checkName=function(cT){return cT===_1.string("World",{$:1,$0:0},{$:1,$0:cT.length-1})||cT.length<=1?"<---- Please enter your name":"";};p.enterName=function(){t.$cctor();return t.enterName;};p.now=function(){t.$cctor();return t.now;};p.sayHello=function(){t.$cctor();return t.sayHello;};p.aString=function(){t.$cctor();return t.aString;};p.main0=function(){t.$cctor();return t.main0;};p.main1=function(){t.$cctor();return t.main1;};p.main=function(){t.$cctor();return t.main;};p.makeAViewDoc=function(cT){return R.BindView(function(){return cT();},G.mainDocV().get_View());};p.makeAViewDocL=function(cT){return J.Create(function(){return p.makeAViewDoc(cT);});};p.main2=function(){t.$cctor();return t.main2;};p.appFwk=function(){t.$cctor();return t.appFwk;};p.split=function(){t.$cctor();return t.split;};p.split2=function(){t.$cctor();return t.split2;};p.mainProgram=function(){var cT;cT=d.startWithHtmlD();(_3.resolver(W.ofArray([["AppFrameworkTemplate.html",_4.html()+o.html()]]),cT))();};q.New=function(cT,cU){return{f:cT,p:cU};};r.addDoc=function(cT,cU){return cU.$==0?{$:1,$0:[R.BindView(R.Concat,cU.$0),cT]}:{$:1,$0:L.append(cU.$0,[cT])};};r.textDoc=function(cT){return cT.$==0?R.TextView(cT.$0):R.TextNode(cT.$0);};s.getDocFromReference=function(cT){return R.TextNode((function(cU){return function(cV){return cU("tryGetTextFromReference not implemented: @{"+D.toSafe(cV)+"}");};}(a.id))(cT));};s.getOneTextData=function(cT,cU,cV){return(cT===""?a.id:function(cW){return new X({$:1,$0:{$:0,$0:cT},$1:cW});})(new X({$:1,$0:{$:1,$0:cU},$1:cV===""?X.Empty:s.getTextData(cV)}));};s.getTextData=function(cT){var cU,cV,cW;cU=(cV=_0.delimitedO("@{","}",cT),cV==null?null:{$:1,$0:(cW=cV.$0,s.getOneTextData(cW[0],cW[1],cW[2]))});return cU==null?W.ofArray([{$:0,$0:cT}]):cU.$0;};s.getDocFromReferenceD=function(){t.$cctor();return t.getDocFromReferenceD;};s.extractDocD=function(){t.$cctor();return t.extractDocD;};s.extractDoc=function(){t.$cctor();return t.extractDoc;};t.$cctor=function(){var cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr;t.$cctor=a.ignore;function ds(dw){return _6.concat("\n",dw);}function dt(dw){return _0.splitByChar$1("\n",dw);}function du(dw){var dx,dy;return _1.array(dw,{$:1,$0:0},{$:1,$0:(dx=0,(dy=bj.length(dw)-2,U.Compare(dx,dy)===1?dx:dy))});}function dv(dw){return _6.concat("\n",dw);}t.depend=new _5.New();t.unindentStr=function(dw){return ds(_0.unindent$1(dw));};t.skipLastLine=(cT=function(dw){return du(dt(dw));},function(dw){return dv(cT(dw));});t.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"  type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 150px) 150px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"100\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <div>Docs:</div>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Views:</div>\r\n                                                                <div ws-hole=\"Views\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValue\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <span class=\"input-group-addon\">${Value}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Queries:</div>\r\n                                                                <div ws-hole=\"Queries\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Vars:</div>\r\n                                                                <div ws-hole=\"Vars\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValueInput\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <textarea class=\"form-control\" id=\"\" placeholder=\"Value...\" ws-var=\"Value\" spellcheck=\"false\">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                        <div style=\"\r\n                                            overflow: hidden;\r\n                                            display: grid;\r\n                                            grid-template-columns: 100%;\r\n                                            grid-template-rows: repeat(15, calc(100% / 15));\r\n                                            bxackground-color: #eee;\r\n                                            box-sizing: border-box;\r\n                                            padding : 5px;\r\n                                            grid-gap: 5px;\r\n                                            margin-right: 21px;\r\n                                       \"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\"         ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\"          >${Name}</button>\r\n                                            <button ws-template=\"ActionDisabled\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" disabled >${Name}</button>\r\n                                        </div>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        xtextarea {\r\n                           resize : none;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";t.htmlD=_3.dependByName("AppFrameworkTemplate.html",_4.html(),a.id);t.startWithHtmlD=(cU=_3.depend(),cU.Delay(function(){return cU.Bind(d.htmlD(),function(dw){return cU.Return(function(){var dx,dy,dz;dx=self.document.createElement("div");self.document.body.appendChild(dx);dx.outerHTML=dw;dy=G.getMainDoc().f();dz=self.document.body;bz.LoadLocalTemplates("");R.RunAppend(dz,dy);});});}));t.unselectorV=new bh.New(v.Const(null),a.ignore);t.plugin=new i.New();t.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";t.a11V=y.Create$1(11);t.mainX={$:0,$0:p.a11V().get_View()};t.getDocFromReferenceD=_3.dependByName("getDocFromReference",s.getDocFromReference,a.id);t.extractDocD=(cV=_3.depend(),cV.Delay(function(){return cV.Bind(s.getDocFromReferenceD(),function(dw){return cV.Return(function(dx){var dy,dz;dy=W.map(function(dA){return dA.$==1?dw(dA.$0):R.TextNode(dA.$0);},s.getTextData(dx));return(dy.$==1?dy.$1.$==0?(dz=dy.$0,true):(dz=dy,false):(dz=dy,false))?dz:R.Concat(dz);});});}));t.extractDoc=_3.resolver([],s.extractDocD());t.aV=y.Create$1(4);t.pa=p.aV().get_View();t.pb=6.2;t.extractDoc$1=_3.resolver([["getDocFromReference",p.getDoc]],s.extractDocD());t.vvv=(cW=q.New((cX=q.New({$:1,$0:function(dw){return function(dx){return p.concat(dw,dx);};}},{$:0,$0:p.pa()}),cX.f.$==0?cX.p.$==1?{$:0,$0:v.Apply(cX.f.$0,v.Const(cX.p.$0))}:{$:0,$0:v.Apply(cX.f.$0,cX.p.$0)}:cX.p.$==0?{$:0,$0:v.Apply(v.Const(cX.f.$0),cX.p.$0)}:{$:1,$0:cX.f.$0(cX.p.$0)}),{$:1,$0:p.pb()}),cW.f.$==0?cW.p.$==1?{$:0,$0:v.Apply(cW.f.$0,v.Const(cW.p.$0))}:{$:0,$0:v.Apply(cW.f.$0,cW.p.$0)}:cW.p.$==0?{$:0,$0:v.Apply(v.Const(cW.f.$0),cW.p.$0)}:{$:1,$0:cW.f.$0(cW.p.$0)});t.name=y.Create$1("World");t.enterName=q.New(p.op_Dereference(p.checkName),{$:0,$0:p.name().get_View()});t.now=q.New(p.op_Dereference(function(){var dw;dw=new a.Date(cO.now());return dw.getFullYear()+"-"+("0"+(dw.getMonth()+1)).slice(-2)+"-"+("0"+dw.getDate()).slice(-2)+" "+("0"+dw.getHours()).slice(-2)+":"+("0"+dw.getMinutes()).slice(-2)+":"+("0"+dw.getSeconds()).slice(-2)+":"+("00"+dw.getMilliseconds()).slice(-3);}),{$:0,$0:p.name().get_View()});t.sayHello=(cY=(cZ=q.New(p.op_Dereference(R.Concat),{$:1,$0:[(p.extractDoc())("Hello @{name}!")]}),q.New(cZ.f,r.addDoc(r.textDoc((c0=p.enterName(),c0.f.$==0?c0.p.$==1?{$:0,$0:v.Apply(c0.f.$0,v.Const(c0.p.$0))}:{$:0,$0:v.Apply(c0.f.$0,c0.p.$0)}:c0.p.$==0?{$:0,$0:v.Apply(v.Const(c0.f.$0),c0.p.$0)}:{$:1,$0:c0.f.$0(c0.p.$0)})),cZ.p))),(c1=q.New(p.op_Dereference(R.Concat),{$:1,$0:[(p.extractDoc())("How are you?")]}),(c2=q.New(p.op_Dereference(R.Concat),{$:1,$0:[R.BindView(function(){var dw;dw=cY.f.$==0?cY.p.$==1?{$:0,$0:v.Apply(cY.f.$0,v.Const(cY.p.$0))}:{$:0,$0:v.Apply(cY.f.$0,cY.p.$0)}:cY.p.$==0?{$:0,$0:v.Apply(v.Const(cY.f.$0),cY.p.$0)}:{$:1,$0:cY.f.$0(cY.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View())]}),q.New(c2.f,r.addDoc(R.BindView(function(){var dw;dw=c1.f.$==0?c1.p.$==1?{$:0,$0:v.Apply(c1.f.$0,v.Const(c1.p.$0))}:{$:0,$0:v.Apply(c1.f.$0,c1.p.$0)}:c1.p.$==0?{$:0,$0:v.Apply(v.Const(c1.f.$0),c1.p.$0)}:{$:1,$0:c1.f.$0(c1.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View()),c2.p)))));t.aString=y.Lens(p.aV(),a.String,function(dw,dx){return z.toInt(a.Number(dx));});t.main0=(c3=q.New(p.op_Dereference(function(dw){return function(dx){return p.concat(dw,dx);};}),{$:0,$0:p.aV().get_View()}),q.New(c3.f.$==0?c3.p.$==1?{$:0,$0:v.Apply(c3.f.$0,v.Const(c3.p.$0))}:{$:0,$0:v.Apply(c3.f.$0,c3.p.$0)}:c3.p.$==0?{$:0,$0:v.Apply(v.Const(c3.f.$0),c3.p.$0)}:{$:1,$0:c3.f.$0(c3.p.$0)},{$:1,$0:3.2}));t.main1=(c4=q.New(p.op_Dereference((cN.Curried3(function(dw,dx,dy){return dw("result = "+D.toSafe(dx)+" "+D.toSafe(dy));}))(a.id)),(c5=p.main0(),c5.f.$==0?c5.p.$==1?{$:0,$0:v.Apply(c5.f.$0,v.Const(c5.p.$0))}:{$:0,$0:v.Apply(c5.f.$0,c5.p.$0)}:c5.p.$==0?{$:0,$0:v.Apply(v.Const(c5.f.$0),c5.p.$0)}:{$:1,$0:c5.f.$0(c5.p.$0)})),q.New(c4.f.$==0?c4.p.$==1?{$:0,$0:v.Apply(c4.f.$0,v.Const(c4.p.$0))}:{$:0,$0:v.Apply(c4.f.$0,c4.p.$0)}:c4.p.$==0?{$:0,$0:v.Apply(v.Const(c4.f.$0),c4.p.$0)}:{$:1,$0:c4.f.$0(c4.p.$0)},{$:1,$0:"main0"}));t.main=(c6=(c7=(c8=(c9=(c_=(c$=(da=(db=(dc=q.New(p.op_Dereference((cN.Curried3(R.Element))("h3")),{$:1,$0:W.ofArray([bb.DynamicStyle("color",p.name().get_View())])}),(dd={$:1,$0:[(p.extractDoc())("MAIN:")]},q.New(dc.f.$==0?dc.p.$==1?{$:0,$0:v.Apply(dc.f.$0,v.Const(dc.p.$0))}:{$:0,$0:v.Apply(dc.f.$0,dc.p.$0)}:dc.p.$==0?{$:0,$0:v.Apply(v.Const(dc.f.$0),dc.p.$0)}:{$:1,$0:dc.f.$0(dc.p.$0)},dd))),q.New(db.f,r.addDoc(r.textDoc((de=p.main1(),de.f.$==0?de.p.$==1?{$:0,$0:v.Apply(de.f.$0,v.Const(de.p.$0))}:{$:0,$0:v.Apply(de.f.$0,de.p.$0)}:de.p.$==0?{$:0,$0:v.Apply(v.Const(de.f.$0),de.p.$0)}:{$:1,$0:de.f.$0(de.p.$0)})),db.p))),q.New(da.f,r.addDoc(r.textDoc((df=p.main1(),df.f.$==0?df.p.$==1?{$:0,$0:v.Apply(df.f.$0,v.Const(df.p.$0))}:{$:0,$0:v.Apply(df.f.$0,df.p.$0)}:df.p.$==0?{$:0,$0:v.Apply(v.Const(df.f.$0),df.p.$0)}:{$:1,$0:df.f.$0(df.p.$0)})),da.p))),q.New(c$.f,r.addDoc((p.extractDoc())(":"),c$.p))),q.New(c_.f,r.addDoc((dg=p.sayHello(),R.BindView(function(){var dw;dw=dg.f.$==0?dg.p.$==1?{$:0,$0:v.Apply(dg.f.$0,v.Const(dg.p.$0))}:{$:0,$0:v.Apply(dg.f.$0,dg.p.$0)}:dg.p.$==0?{$:0,$0:v.Apply(v.Const(dg.f.$0),dg.p.$0)}:{$:1,$0:dg.f.$0(dg.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View())),c_.p))),q.New(c9.f,r.addDoc((p.extractDoc())(":"),c9.p))),q.New(c8.f,r.addDoc((p.extractDoc())(" Ms >> "),c8.p))),q.New(c7.f,r.addDoc((dh=p.sayHello(),R.BindView(function(){var dw;dw=dh.f.$==0?dh.p.$==1?{$:0,$0:v.Apply(dh.f.$0,v.Const(dh.p.$0))}:{$:0,$0:v.Apply(dh.f.$0,dh.p.$0)}:dh.p.$==0?{$:0,$0:v.Apply(v.Const(dh.f.$0),dh.p.$0)}:{$:1,$0:dh.f.$0(dh.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View())),c7.p))),q.New(c6.f,r.addDoc((p.extractDoc())(" <<"),c6.p)));t.main2=p.makeAViewDoc(function(){return R.Element("h4",[bb.Dynamic("style",p.name().get_View())],[R.TextNode("MAIN2:"),R.TextView(p.name().get_View())]);});t.appFwk=(di=q.New(p.op_Dereference((cN.Curried3(R.Element))("div")),{$:1,$0:X.Empty}),(dj={$:1,$0:[(p.extractDoc())("@{AppFramework.AppFwkClient}")]},q.New(di.f.$==0?di.p.$==1?{$:0,$0:v.Apply(di.f.$0,v.Const(di.p.$0))}:{$:0,$0:v.Apply(di.f.$0,di.p.$0)}:di.p.$==0?{$:0,$0:v.Apply(v.Const(di.f.$0),di.p.$0)}:{$:1,$0:di.f.$0(di.p.$0)},dj)));t.split=(dk=q.New(p.op_Dereference(cN.Curried(K.variableSplitter,2,[false,0,50,100])),{$:1,$0:(dl=p.appFwk(),R.BindView(function(){var dw;dw=dl.f.$==0?dl.p.$==1?{$:0,$0:v.Apply(dl.f.$0,v.Const(dl.p.$0))}:{$:0,$0:v.Apply(dl.f.$0,dl.p.$0)}:dl.p.$==0?{$:0,$0:v.Apply(v.Const(dl.f.$0),dl.p.$0)}:{$:1,$0:dl.f.$0(dl.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View()))}),(dm={$:1,$0:(dn=p.main(),R.BindView(function(){var dw;dw=dn.f.$==0?dn.p.$==1?{$:0,$0:v.Apply(dn.f.$0,v.Const(dn.p.$0))}:{$:0,$0:v.Apply(dn.f.$0,dn.p.$0)}:dn.p.$==0?{$:0,$0:v.Apply(v.Const(dn.f.$0),dn.p.$0)}:{$:1,$0:dn.f.$0(dn.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View()))},q.New(dk.f.$==0?dk.p.$==1?{$:0,$0:v.Apply(dk.f.$0,v.Const(dk.p.$0))}:{$:0,$0:v.Apply(dk.f.$0,dk.p.$0)}:dk.p.$==0?{$:0,$0:v.Apply(v.Const(dk.f.$0),dk.p.$0)}:{$:1,$0:dk.f.$0(dk.p.$0)},dm)));t.split2=(_do=q.New(p.op_Dereference(cN.Curried(K.variableSplitter,2,[false,0,50,100])),{$:1,$0:(dp=p.appFwk(),R.BindView(function(){var dw;dw=dp.f.$==0?dp.p.$==1?{$:0,$0:v.Apply(dp.f.$0,v.Const(dp.p.$0))}:{$:0,$0:v.Apply(dp.f.$0,dp.p.$0)}:dp.p.$==0?{$:0,$0:v.Apply(v.Const(dp.f.$0),dp.p.$0)}:{$:1,$0:dp.f.$0(dp.p.$0)};return dw.$==0?R.BindView(a.id,dw.$0):dw.$0;},G.mainDocV().get_View()))}),(dq={$:1,$0:p.main2()},q.New(_do.f.$==0?_do.p.$==1?{$:0,$0:v.Apply(_do.f.$0,v.Const(_do.p.$0))}:{$:0,$0:v.Apply(_do.f.$0,_do.p.$0)}:_do.p.$==0?{$:0,$0:v.Apply(v.Const(_do.f.$0),_do.p.$0)}:{$:1,$0:_do.f.$0(_do.p.$0)},dq)));G.addPlugIn((dr=G.plugin(),dr.AddDoc(dr.AddDoc(dr.AddDoc(dr.AddDoc(dr.AddDoc(dr.AddDoc(dr.AddVar(dr.AddVar(dr.Name(dr.Yield(),"NewLY"),"name",p.name()),"a",p.aString()),"split",J.Create(function(){var dw;dw=p.split();return R.BindView(function(){var dx;dx=dw.f.$==0?dw.p.$==1?{$:0,$0:v.Apply(dw.f.$0,v.Const(dw.p.$0))}:{$:0,$0:v.Apply(dw.f.$0,dw.p.$0)}:dw.p.$==0?{$:0,$0:v.Apply(v.Const(dw.f.$0),dw.p.$0)}:{$:1,$0:dw.f.$0(dw.p.$0)};return dx.$==0?R.BindView(a.id,dx.$0):dx.$0;},G.mainDocV().get_View());})),"split2",J.Create(function(){var dw;dw=p.split2();return R.BindView(function(){var dx;dx=dw.f.$==0?dw.p.$==1?{$:0,$0:v.Apply(dw.f.$0,v.Const(dw.p.$0))}:{$:0,$0:v.Apply(dw.f.$0,dw.p.$0)}:dw.p.$==0?{$:0,$0:v.Apply(v.Const(dw.f.$0),dw.p.$0)}:{$:1,$0:dw.f.$0(dw.p.$0)};return dx.$==0?R.BindView(a.id,dx.$0):dx.$0;},G.mainDocV().get_View());})),"main",J.Create(function(){var dw;dw=p.main();return R.BindView(function(){var dx;dx=dw.f.$==0?dw.p.$==1?{$:0,$0:v.Apply(dw.f.$0,v.Const(dw.p.$0))}:{$:0,$0:v.Apply(dw.f.$0,dw.p.$0)}:dw.p.$==0?{$:0,$0:v.Apply(v.Const(dw.f.$0),dw.p.$0)}:{$:1,$0:dw.f.$0(dw.p.$0)};return dx.$==0?R.BindView(a.id,dx.$0):dx.$0;},G.mainDocV().get_View());})),"main2",J.Create(p.main2)),"sayHello",J.Create(function(){var dw;dw=p.sayHello();return R.BindView(function(){var dx;dx=dw.f.$==0?dw.p.$==1?{$:0,$0:v.Apply(dw.f.$0,v.Const(dw.p.$0))}:{$:0,$0:v.Apply(dw.f.$0,dw.p.$0)}:dw.p.$==0?{$:0,$0:v.Apply(v.Const(dw.f.$0),dw.p.$0)}:{$:1,$0:dw.f.$0(dw.p.$0)};return dx.$==0?R.BindView(a.id,dx.$0):dx.$0;},G.mainDocV().get_View());})),"sayHello2",J.Create(function(){var dw;dw=p.sayHello();return R.BindView(function(){var dx;dx=dw.f.$==0?dw.p.$==1?{$:0,$0:v.Apply(dw.f.$0,v.Const(dw.p.$0))}:{$:0,$0:v.Apply(dw.f.$0,dw.p.$0)}:dw.p.$==0?{$:0,$0:v.Apply(v.Const(dw.f.$0),dw.p.$0)}:{$:1,$0:dw.f.$0(dw.p.$0)};return dx.$==0?R.BindView(a.id,dx.$0):dx.$0;},G.mainDocV().get_View());}))));};v.Const=function(cT){var cU;cU=bd.New({$:0,$0:cT});return function(){return cU;};};v.Map=function(cT,cU){return v.CreateLazy(function(){return bd.Map(cT,cU());});};v.Bind=function(cT,cU){return v.Join(v.Map(cT,cU));};v.Map2=function(cT,cU,cV){return v.CreateLazy(function(){return bd.Map2(cT,cU(),cV());});};v.MapSeqCachedViewBy=function(cT,cU,cV){var cW;cW=[new br.New$5()];return v.Map(function(cX){var cY,cZ,c0;cY=cW[0];cZ=new br.New$5();c0=bq.mapInPlace(function(c1){var c2,c3,c4;c2=cT(c1);c3=cY.ContainsKey(c2)?(c4=cY.get_Item(c2),(y.Set(c4.r,c1),c4)):v.ConvertSeqNode(function(c5){return cU(c2,c5);},c1);cZ.set_Item(c2,c3);return c3.e;},bj.ofSeq(cX));cW[0]=cZ;return c0;},cV);};v.get_Do=function(){return V.B;};v.Apply=function(cT,cU){return v.Map2(function(cV,cW){return cV(cW);},cT,cU);};v.CreateLazy=function(cT){var cU;cU={c:null,o:cT};return function(){var cV,cW;cV=cU.c;return cV===null?(cV=cU.o(),cU.c=cV,(cW=cV.s,cW!=null&&cW.$==0)?cU.o=null:bd.WhenObsoleteRun(cV,function(){cU.c=null;}),cV):cV;};};v.Join=function(cT){return v.CreateLazy(function(){return bd.Join(cT());});};v.Sink=function(cT,cU){function cV(){bd.WhenRun(cU(),cT,function(){cp.scheduler().Fork(cV);});}cp.scheduler().Fork(cV);};v.ConvertSeqNode=function(cT,cU){var cV,cW;cV=y.Create$1(cU);cW=cV.get_View();return{e:cT(cW),r:cV,w:cW};};v.TryGet=function(cT){return bd.TryGet(cT());};v.Map2Unit=function(cT,cU){return v.CreateLazy(function(){return bd.Map2Unit(cT(),cU());});};v.MapSeqCached=function(cT,cU){return v.MapSeqCachedBy(a.id,cT,cU);};v.Get=function(cT,cU){var cV;function cW(){bd.WhenRun(cU(),function(cX){if(!cV[0]){cV[0]=true;cT(cX);}},function(){if(!cV[0])cW();});}cV=[false];cW();};v.MapSeqCachedBy=function(cT,cU,cV){var cW;cW=[new br.New$5()];return v.Map(function(cX){var cY,cZ,c0;cY=cW[0];cZ=new br.New$5();c0=bq.mapInPlace(function(c1){var c2,c3;c2=cT(c1);c3=cY.ContainsKey(c2)?cY.get_Item(c2):cU(c1);cZ.set_Item(c2,c3);return c3;},bj.ofSeq(cX));cW[0]=cZ;return c0;},cV);};v.Map3=function(cT,cU,cV,cW){return v.CreateLazy(function(){return bd.Map3(cT,cU(),cV(),cW());});};v.Sequence=function(cT){return v.CreateLazy(function(){return bd.Sequence(L.map(function(cU){return cU();},cT));});};x=w.attr=cN.Class({},h,x);y=u.Var$1=cN.Class({},h,y);y.Lens=function(cT,cU,cV){var cW,cX,cY;cW=bg.Id();cX=v.Map(cU,cT.get_View());cY=new C({Get:function(){return cU(cT.Get());},Set:function(cZ){return cT.Update(function(c0){return cV(c0,cZ);});},SetFinal:function(cZ){return this.Set(cZ);},Update:function(cZ){return cT.Update(function(c0){return cV(c0,cZ(cU(c0)));});},UpdateMaybe:function(cZ){return cT.UpdateMaybe(function(c0){var c1;c1=cZ(cU(c0));return c1==null?null:{$:1,$0:cV(c0,c1.$0)};});},get_View:function(){return cX;},get_Id:function(){return cW;}});C.New.call(cY);return cY;};y.Create$1=function(cT){return new bt.New(false,bd.New({$:2,$0:cT,$1:[]}),cT);};y.Set=function(cT,cU){cT.Set(cU);};z.toInt=function(cT){var cU;cU=z.toUInt(cT);return cU>=2147483648?cU-4294967296:cU;};z.toUInt=function(cT){return(cT<0?cP.ceil(cT):cP.floor(cT))>>>0;};z.KeyValue=function(cT){return[cT.K,cT.V];};z.FailWith=function(cT){throw new cn(cT);};z.range=function(cT,cU){var cV;cV=1+cU-cT;return cV<=0?[]:L.init(cV,function(cW){return cW+cT;});};B.parseDoubleO=function(){bi.$cctor();return bi.parseDoubleO;};B.parseIntO=function(){bi.$cctor();return bi.parseIntO;};B.parseGuidO=function(){bi.$cctor();return bi.parseGuidO;};B.tryParseWith=function(cT){function cU(cV,cW){return cV?{$:1,$0:cW}:null;}return function(cV){return cU.apply(null,cT(cV));};};B.parseDateO=function(){bi.$cctor();return bi.parseDateO;};B.parseInt64O=function(){bi.$cctor();return bi.parseInt64O;};B.parseSingleO=function(){bi.$cctor();return bi.parseSingleO;};B.Double=function(){bi.$cctor();return bi["|Double|_|"];};B.Int=function(){bi.$cctor();return bi["|Int|_|"];};C=u.Var=cN.Class({},h,C);C.New=cN.Ctor(function(){h.New.call(this);},C);D.prettyPrint=function(cT){var cU,cV;function cW(cX,cY){return cX+" = "+D.prettyPrint(cY);}return cT===null?"null":(cU=typeof cT,cU=="string"?"\""+cT+"\"":cU=="object"?cT instanceof a.Array?"[|"+_6.concat("; ",bj.map(D.prettyPrint,cT))+"|]":(cV=a.String(cT),cV==="[object Object]"?"{"+_6.concat("; ",bj.map(function(cX){return cW(cX[0],cX[1]);},$.GetFields(cT)))+"}":cV):a.String(cT));};D.toSafe=function(cT){return cT==null?"":cT;};D.printList=function(cT,cU){return"["+_6.concat("; ",L.map(cT,cU))+"]";};E=A.GuidId=cN.Class({get_Id:function(){return this.$0;}},null,E);G.defaultPlugIn=function(){return H.New("",new I.New$1(function(cT){return cT.varName;}),new I.New$1(function(cT){return cT.viwName;}),new I.New$1(function(cT){return cT.docName;}),new I.New$1(function(cT){return cT.actName;}),new I.New$1(function(cT){return cT.qryName;}));};G.newVar=function(cT,cU){return M.New(cT,cU);};G.newDoc=function(cT,cU){return O.New(cT,{$:0,$0:cU});};G.newAct=function(cT,cU){return P.New(cT,{$:0,$0:cU},v.Const(true));};G.newViw=function(cT,cU){return N.New(cT,cU);};G.addPlugIn=function(cT){G.plugIns().Append(cT);};G.mainDocV=function(){bi.$cctor();return bi.mainDocV;};G.splitName=function(cT){function cU(cW){return _0.splitByChar(".",cW);}function cV(cW){return bj.length(cW)===1?[cT,bj.get(cW,0)]:[bj.get(cW,0),bj.get(cW,1)];}return function(cW){return cV(cU(cW));};};G.tryGetDocW=function(cT,cU){return v.Bind(function(cV){return cV!=null&&cV.$==1?cV.$0.plgDocs.TryFindByKeyAsView(cU):v.Const(null);},G.tryGetPlugInW(cT));};G.getLazyDoc=function(cT){var cU;cU=cT.docDoc;return cU.$==0?cU.$0.f():R.Element("div",[],[R.TextNode((function(cV){return function(cW){return cV("Doc with parameters not allowed here: "+bv.p$1(cW));};}(a.id))(cT))]);};G.tryGetWoWW=function(cT,cU){return v.Bind(function(cV){return cV==null?v.Bind(function(cW){return cW==null?v.Const(null):v.Map(function(cX){return{$:1,$0:cX};},cW.$0.varVar.get_View());},G.tryGetVarW(cT,cU)):v.Map(function(cW){return{$:1,$0:cW};},cV.$0.viwView);},G.tryGetViwW(cT,cU));};G.getMainDoc=function(){bi.$cctor();return bi.getMainDoc;};G.plugin=function(){bi.$cctor();return bi.plugin;};G.plugIns=function(){bi.$cctor();return bi.plugIns;};G.tryGetPlugIn=function(cT){return G.plugIns().TryFindByKey(cT);};G.newDocF=function(cT,cU){return O.New(cT,cU);};G.tryGetPlugInW=function(cT){return G.plugIns().TryFindByKeyAsView(cT);};G.tryGetViwW=function(cT,cU){return v.Bind(function(cV){return cV!=null&&cV.$==1?cV.$0.plgViews.TryFindByKeyAsView(cU):v.Const(null);},G.tryGetPlugInW(cT));};G.tryGetVarW=function(cT,cU){return v.Bind(function(cV){return cV!=null&&cV.$==1?cV.$0.plgVars.TryFindByKeyAsView(cU):v.Const(null);},G.tryGetPlugInW(cT));};G.selectionPlugInO=function(){bi.$cctor();return bi.selectionPlugInO;};G.currentPlugInW=function(){bi.$cctor();return bi.currentPlugInW;};G.renderPlugIns=function(){return R.Flatten(G.plugIns().MapLens(function(cT){var cU,cV,cW,cX;return(cU=(cV=bM.Make().WithHole({$:1,$0:"name",$1:cT}),cV.WithHole(bN.EventQ2(cV.k,"select",function(){return cV.i;},function(){G.selectionPlugInO().Set({$:1,$0:cT});}))).WithHole({$:2,$0:"selected",$1:v.Map(function(cY){return U.Equals(cY,{$:1,$0:cT})?"selected":"";},G.selectionPlugInO().get_View())}),(cW=bN.CompleteHoles(cU.k,cU.h,[]),(cX=new bL.New(cW[1],bw.tile(cW[0])),(cU.i=cX,cX)))).get_Doc();}));};G.renderVars=function(){function cT(cV,cW){return[cV.plgName,cW.varName];}function cU(cV,cW){var cX,cY,cZ;return(cX=bM.Make().WithHole({$:1,$0:"name",$1:cW.varName}).WithHole({$:8,$0:"value",$1:cW.varVar}),(cY=bN.CompleteHoles(cX.k,cX.h,[["value",0]]),(cZ=new bL.New(cY[1],bw.namevalueinput(cY[0])),(cX.i=cZ,cZ)))).get_Doc();}return R.ConvertBy(function(cV){return cT(cV[0],cV[1]);},function(cV){return cU(cV[0],cV[1]);},v.Map(function(cV){return L.map(function(cW){return[cV,cW];},cV.plgVars);},G.currentPlugInW()));};G.renderViews=function(){function cT(cV,cW){return[cV.plgName,cW.viwName];}function cU(cV,cW){var cX,cY,cZ;return(cX=bM.Make().WithHole({$:1,$0:"name",$1:cW.viwName}).WithHole({$:2,$0:"value",$1:cW.viwView}),(cY=bN.CompleteHoles(cX.k,cX.h,[]),(cZ=new bL.New(cY[1],bw.namevalue(cY[0])),(cX.i=cZ,cZ)))).get_Doc();}return R.ConvertBy(function(cV){return cT(cV[0],cV[1]);},function(cV){return cU(cV[0],cV[1]);},v.Map(function(cV){return L.map(function(cW){return[cV,cW];},cV.plgViews);},G.currentPlugInW()));};G.renderDocs=function(){function cT(cV,cW){return[cV.plgName,cW.docName];}function cU(cV,cW){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7;return(cX=(cY=(cZ=cW.docName+(c0=cW.docDoc,c0.$==1?(c1=_6.concat(", ",W.ofArray([c0.$1])),(function(c8){return function(c9){return c8("("+D.toSafe(c9)+")");};}(a.id))(c1)):c0.$==2?(c2=_6.concat(", ",W.ofArray([c0.$1,c0.$2])),(function(c8){return function(c9){return c8("("+D.toSafe(c9)+")");};}(a.id))(c2)):c0.$==3?(c3=_6.concat(", ",W.ofArray([c0.$1,c0.$2,c0.$3])),(function(c8){return function(c9){return c8("("+D.toSafe(c9)+")");};}(a.id))(c3)):c0.$==4?(c4=_6.concat(", ",W.ofArray([c0.$1,c0.$2,c0.$3,c0.$4])),(function(c8){return function(c9){return c8("("+D.toSafe(c9)+")");};}(a.id))(c4)):c0.$==5?(c5=_6.concat(", ",W.ofArray([c0.$1,c0.$2,c0.$3,c0.$4,c0.$5])),(function(c8){return function(c9){return c8("("+D.toSafe(c9)+")");};}(a.id))(c5)):""),bM.Make().WithHole({$:1,$0:"name",$1:cZ})),cY.WithHole(bN.EventQ2(cY.k,"select",function(){return cY.i;},function(){v.Get(function(c8){G.mainDocV().Set(c8.plgName+"."+cW.docName);},G.currentPlugInW());}))),(c6=bN.CompleteHoles(cX.k,cX.h,[]),(c7=new bL.New(c6[1],bw.tile(c6[0])),(cX.i=c7,c7)))).get_Doc();}return R.ConvertBy(function(cV){return cT(cV[0],cV[1]);},function(cV){return cU(cV[0],cV[1]);},v.Map(function(cV){return L.map(function(cW){return[cV,cW];},cV.plgDocs);},G.currentPlugInW()));};G.renderActions=function(){function cT(cV,cW){return[cV.plgName,cW.actName];}function cU(cV,cW){var cX,cY,cZ,c0;cX=(cY=cW.actFunction,cY.$==1?(cZ=_6.concat(", ",W.ofArray([cY.$1])),(function(c1){return function(c2){return c1("("+D.toSafe(c2)+")");};}(a.id))(cZ)):cY.$==2?(c0=_6.concat(", ",W.ofArray([cY.$1,cY.$2])),(function(c1){return function(c2){return c1("("+D.toSafe(c2)+")");};}(a.id))(c0)):"");return R.EmbedView(v.Map(function(c1){var c2,c3,c4,c5,c6,c7,c8,c9;return c1?(c2=(c3=bM.Make().WithHole({$:1,$0:"name",$1:cW.actName+cX}),c3.WithHole(bN.EventQ2(c3.k,"click",function(){return c3.i;},function(c_){G.callFunction(c_,null,cW.actFunction);}))),(c4=bN.CompleteHoles(c2.k,c2.h,[]),(c5=new bL.New(c4[1],bw.action(c4[0])),(c2.i=c5,c5)))).get_Doc():(c6=(c7=bM.Make().WithHole({$:1,$0:"name",$1:cW.actName}),c7.WithHole(bN.EventQ2(c7.k,"click",function(){return c7.i;},function(c_){G.callFunction(c_,null,cW.actFunction);}))),(c8=bN.CompleteHoles(c6.k,c6.h,[]),(c9=new bL.New(c8[1],bw.actiondisabled(c8[0])),(c6.i=c9,c9)))).get_Doc();},cW.actEnabled));}return R.ConvertBy(function(cV){return cT(cV[0],cV[1]);},function(cV){return cU(cV[0],cV[1]);},v.Map(function(cV){return L.map(function(cW){return[cV,cW];},cV.plgActions);},G.currentPlugInW()));};G.renderQueries=function(){function cT(cV,cW){return[cV.plgName,cW.qryName];}function cU(cV,cW){var cX,cY,cZ,c0;return(cX=(cY=bM.Make().WithHole({$:1,$0:"name",$1:cW.qryName}),cY.WithHole(bN.EventQ2(cY.k,"select",function(){return cY.i;},function(){a.alert(cW.qryFunction(null));}))),(cZ=bN.CompleteHoles(cX.k,cX.h,[]),(c0=new bL.New(cZ[1],bw.tile(cZ[0])),(cX.i=c0,c0)))).get_Doc();}return R.ConvertBy(function(cV){return cT(cV[0],cV[1]);},function(cV){return cU(cV[0],cV[1]);},v.Map(function(cV){return L.map(function(cW){return[cV,cW];},cV.plgQueries);},G.currentPlugInW()));};G.AppFwkClient=function(){bi.$cctor();return bi.AppFwkClient;};G.trigAct=function(cT,cU){var cV,cW,cX;return R.TextView(v.Map(function(cY){var cZ,c0;return cY==null?"":(cZ=(c0=(G.splitName("AppFramework"))(cU),G.tryGetAct(c0[0],c0[1])),cZ==null?void 0:G.callFunction(null,null,cZ.$0.actFunction),"");},(cV=(cW=(G.splitName("AppFramework"))(cT),G.tryGetWoWW(cW[0],cW[1])),(cX=[y.Create$1(null)],(v.Sink(function(cY){if(!U.Equals(cX[0].Get(),cY))cX[0].Set(cY);},cV),cX[0].get_View())))));};G.inputFile=function(cT,cU,cV){var cW,cX,cY,cZ;cW=(cX=(cY=(G.splitName("AppFramework"))(cV),G.tryGetAct(cY[0],cY[1])),cX==null?null:{$:1,$0:(cZ=cX.$0,R.Element("div",G.getAttrs("AppFramework",cT),[R.Element("div",[be.Create("class","input-group")],[R.Element("span",[be.Create("class","input-group-btn")],[R.Element("label",[be.Create("class","btn")],[R.TextNode(cU),R.Element("input",[be.Create("class","form-control"),be.Create("type","file"),bb.Style("display","none"),be.HandlerImpl("click",function(c0){return function(){c0.value="";};}),be.HandlerImpl("change",function(c0){return function(){return G.callFunction(c0,null,cZ.actFunction);};})],[])])])])]))});return cW==null?G.errDoc((function(c0){return function(c1){return c0("Action not found "+D.toSafe(c1));};}(a.id))(cV)):cW.$0;};G.inputLabel=function(cT,cU,cV){var cW,cX,cY;cW=(cX=(cY=(G.splitName("AppFramework"))(cV),G.tryGetVar(cY[0],cY[1])),cX==null?null:{$:1,$0:R.Element("div",G.getAttrs("AppFramework",cT),[R.Element("div",[be.Create("class","input-group")],[R.Element("span",[be.Create("class","input-group-addon")],[R.TextNode(cU)]),R.Input([be.Create("class","form-control")],cX.$0.varVar)])])});return cW==null?G.errDoc((function(cZ){return function(c0){return cZ("Var not found "+D.toSafe(c0));};}(a.id))(cV)):cW.$0;};G.setVar=function(cT,cU){var cV,cW;cV=(cW=(G.splitName("AppFramework"))(cT),G.tryGetVar(cW[0],cW[1]));cV==null?void 0:cV.$0.varVar.Set(cU);};G.horizontal=function(cT,cU,cV,cW,cX){var cY,cZ,c0,c1;return(cY=(cZ=bM.Make().WithHole({$:2,$0:"partsizes",$1:cT}).WithHole({$:7,$0:"afterrender",$1:cU}).WithHole({$:7,$0:"afterrendersp",$1:cV}),cZ.WithHole(bN.EventQ2(cZ.k,"mousedown",function(){return cZ.i;},function(c2){cW(c2.Event);}))).WithHole({$:2,$0:"gap",$1:cX}),(c0=bN.CompleteHoles(cY.k,cY.h,[]),(c1=new bL.New(c0[1],bw.wcompsplitterhor(c0[0])),(cY.i=c1,c1)))).get_Doc();};G.vertical=function(cT,cU,cV,cW,cX){var cY,cZ,c0,c1;return(cY=(cZ=bM.Make().WithHole({$:2,$0:"partsizes",$1:cT}).WithHole({$:7,$0:"afterrender",$1:cU}).WithHole({$:7,$0:"afterrendersp",$1:cV}),cZ.WithHole(bN.EventQ2(cZ.k,"mousedown",function(){return cZ.i;},function(c2){cW(c2.Event);}))).WithHole({$:2,$0:"gap",$1:cX}),(c0=bN.CompleteHoles(cY.k,cY.h,[]),(c1=new bL.New(c0[1],bw.wcompsplitterver(c0[0])),(cY.i=c1,c1)))).get_Doc();};G.mainDoc=function(){var cT,cU,cV,cW,cX,cY;return(cT=(cU=G.getMainClientDoc(),(cV=(cW=G.mainDocV().get_View(),bM.Make().WithHole({$:2,$0:"maindoc",$1:cW})),cV.WithHole(bN.EventQ2(cV.k,"goclient",function(){return cV.i;},function(){G.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:cU})),(cX=bN.CompleteHoles(cT.k,cT.h,[]),(cY=new bL.New(cX[1],bw.appframework(cX[0])),(cT.i=cY,cY)))).get_Doc();};G.newActF=function(cT,cU){return P.New(cT,cU,v.Const(true));};G.tryGetAct=function(cT,cU){var cV;cV=G.tryGetPlugIn(cT);return cV==null?null:cV.$0.plgActions.TryFindByKey(cU);};G.callFunction=function(cT,cU,cV){if(cV.$==1)cV.$0(cT);else if(cV.$==2)(cV.$0(cT))(cU);else cV.$0();};G.errDoc=function(cT){return R.Element("div",[],[R.TextNode(cT)]);};G.tryGetVar=function(cT,cU){var cV;cV=G.tryGetPlugIn(cT);return cV==null?null:cV.$0.plgVars.TryFindByKey(cU);};G.getAttrs=function(cT,cU){return W.ofSeq(L.delay(function(){return L.append(L.choose(function(cV){var cW,cX,cY,cZ;function c0(c1,c2){var c3;return c2.$==1?(c3=c2.$0,c1.addEventListener(_6.Trim(cZ),function(c4){return G.callFunction(c1,c4,c3.actFunction);},false)):c1.setAttribute(_6.Trim(cZ),_6.Trim(c2.$0));}return!U.Equals(cV,null)&&cV.length===2&&(cX=bj.get(cV,1),_6.Trim(bj.get(cV,0))!==""&&_6.Trim(cX)!=="")?(cY=bj.get(cV,1),(cZ=bj.get(cV,0),{$:1,$0:bb.DynamicCustom(function(c1){return function(c2){return c0(c1,c2);};},G.getTextData(cT,_6.Trim(cY)))})):null;},L.map(function(cV){return _0.splitByChar("=",cV);},_0.splitByChar(";",cU))),L.delay(function(){return L.choose(function(cV){var cW,cX,cY,cZ,c0;return!U.Equals(cV,null)&&cV.length===2&&(cX=bj.get(cV,1),_6.Trim(bj.get(cV,0))!==""&&_6.Trim(cX)!=="")?(cY=bj.get(cV,1),(cZ=bj.get(cV,0),{$:1,$0:(c0=v.Map(function(c1){return c1.$==1?(function(c2){return function(c3){return c2("@{"+D.toSafe(c3)+"}");};}(a.id))(c1.$0.actName):_6.Trim(c1.$0);},G.getTextData(cT,_6.Trim(cY))),bb.DynamicStyle(_6.Trim(cZ),c0))})):null;},L.map(function(cV){return _0.splitByChar(":",cV);},_0.splitByChar(";",cU)));}));}));};G.newQry=function(cT,cU){return Q.New(cT,cU);};G.getMainClientDoc=function(){var cT;return R.EmbedView((cT=G.plugIns().v,v.Map2(function(cU,cV){var cW,cX;cW=L.tryPick(function(cY){var cZ;cZ=L.tryFind(function(c0){return cY.plgName===cU||cY.plgName+"."+c0.docName===cU;},cY.plgDocs);return cZ==null?null:{$:1,$0:G.getLazyDoc(cZ.$0)};},cV);cX=G.AppFwkClient().f();return cW==null?cX:cW.$0;},G.mainDocV().get_View(),cT)));};G.tryGetVoVW=function(cT,cU){return v.Bind(function(cV){return cV==null?v.Map(function(cW){return cW==null?null:{$:1,$0:new bh.New(cW.$0.viwView,a.ignore)};},G.tryGetViwW(cT,cU)):v.Const({$:1,$0:cV.$0.varVar});},G.tryGetVarW(cT,cU));};G.tryGetDoc=function(cT,cU){var cV;cV=G.tryGetPlugIn(cT);return cV==null?null:cV.$0.plgDocs.TryFindByKey(cU);};G.tryGetViw=function(cT,cU){var cV;cV=G.tryGetPlugIn(cT);return cV==null?null:cV.$0.plgViews.TryFindByKey(cU);};G.getTextData=function(cT,cU){var cV,cW,cX,cY;cV=(cW=_0.delimitedO("@{","}",cU),cW==null?null:{$:1,$0:(cX=cW.$0,(cY=cX[0],G.getOneTextData(cT,cX[1],cY,cX[2])))});return cV==null?v.Const({$:0,$0:cU}):cV.$0;};G.tryGetActW=function(cT,cU){return v.Bind(function(cV){return cV!=null&&cV.$==1?cV.$0.plgActions.TryFindByKeyAsView(cU):v.Const(null);},G.tryGetPlugInW(cT));};G.getOneTextData=function(cT,cU,cV,cW){var cX,cY,cZ;cX=(G.splitName(cT))(cU);cY=cX[0];cZ=cX[1];return v.Bind(function(c0){return c0==null?v.Bind(function(c1){var c2;return c1==null?v.Const({$:0,$0:((((cN.Curried(function(c3,c4,c5,c6){return c3(D.toSafe(c4)+" @{Missing "+D.toSafe(c5)+"}"+D.toSafe(c6));},4))(a.id))(cV))(cU))(cW)}):(c2=c1.$0,v.Bind(function(c3){return c3.$==1?v.Const({$:0,$0:(function(c4){return function(c5){return c4("Unexpected Action @{"+D.toSafe(c5)+"}");};}(a.id))(c3.$0.actName)}):v.Const({$:0,$0:cV+c2+c3.$0});},G.getTextData(cT,cW)));},G.tryGetWoWW(cY,cZ)):v.Const({$:1,$0:c0.$0});},G.tryGetActW(cY,cZ));};H.New=function(cT,cU,cV,cW,cX,cY){return{plgName:cT,plgVars:cU,plgViews:cV,plgDocs:cW,plgActions:cX,plgQueries:cY};};I=u.ListModel=cN.Class({AppendMany:function(cT){var cU,cV;function cW(cX,cY){var cZ,c0;cZ=cU.key(cY);cU.ObsoleteKey(cZ);c0=bj.tryFindIndex(function(c1){return U.Equals(cU.key(c1),cZ);},cX);return c0==null?(cV.push(cY),cX):cU.storage.SSetAt(c0.$0,cY,cX);}cU=this;cV=[];this["var"].Set(this.storage.SAppendMany(cV,(((cN.Curried3(L.fold))(cW))(this["var"].Get()))(cT)));},TryFindByKeyAsView:function(cT){var cU;cU=this;return function(){var cV,cW,cX;cV=(cW=null,[cU.it.TryGetValue(cT,{get:function(){return cW;},set:function(cY){cW=cY;}}),cW]);return cV[0]?cV[1]:(cX=bd.New({$:2,$0:cU.TryFindByKey(cT),$1:[]}),(cU.it.Add(cT,cX),cX));};},ContainsKey:function(cT){var cU;cU=this;return bj.exists(function(cV){return U.Equals(cU.key(cV),cT);},this["var"].Get());},Lens:function(cT){return this.LensInto(a.id,function(cU,cV){return cV;},cT);},RemoveByKey:function(cT){var cU;cU=this;this["var"].Set(this.storage.SRemoveIf(function(cV){return U.Equals(cU.key(cV),cT);},this["var"].Get()));this.ObsoleteKey(cT);},ContainsKeyAsView:function(cT){var cU;function cV(cW){return U.Equals(cU.key(cW),cT);}cU=this;return v.Map(function(cW){return bj.exists(cV,cW);},this["var"].get_View());},Append:function(cT){var cU,cV,cW,cX;cU=this;cV=this["var"].Get();cW=this.key(cT);cX=bj.tryFindIndex(function(cY){return U.Equals(cU.key(cY),cW);},cV);cX!=null&&cX.$==1?this["var"].Set(this.storage.SSetAt(cX.$0,cT,cV)):this["var"].Set(this.storage.SAppend(cT,cV));this.ObsoleteKey(cW);},ObsoleteKey:function(cT){var cU,cV;cU=(cV=null,[this.it.TryGetValue(cT,{get:function(){return cV;},set:function(cW){cV=cW;}}),cV]);cU[0]?(bd.Obsolete(cU[1]),this.it.Remove(cT)):void 0;},TryFindByKey:function(cT){var cU;cU=this;return bj.tryFind(function(cV){return U.Equals(cU.key(cV),cT);},this["var"].Get());},LensInto:function(cT,cU,cV){return this["LensInto'"](cT,cU,cV,v.Map(cT,this.FindByKeyAsView(cV)));},"LensInto'":function(cT,cU,cV,cW){var cX,cY,cZ;cX=this;cY=bg.Id();cZ=new C({Get:function(){return cT(cX.FindByKey(cV));},Set:function(c0){return cX.UpdateBy(function(c1){return{$:1,$0:cU(c1,c0)};},cV);},SetFinal:function(c0){return this.Set(c0);},Update:function(c0){return cX.UpdateBy(function(c1){return{$:1,$0:cU(c1,c0(cT(c1)))};},cV);},UpdateMaybe:function(c0){return cX.UpdateBy(function(c1){var c2;c2=c0(cT(c1));return c2==null?null:{$:1,$0:cU(c1,c2.$0)};},cV);},get_View:function(){return cW;},get_Id:function(){return cY;}});C.New.call(cZ);return cZ;},FindByKeyAsView:function(cT){return v.Map(function(cU){return cU.$0;},this.TryFindByKeyAsView(cT));},FindByKey:function(cT){var cU;cU=this;return bj.find(function(cV){return U.Equals(cU.key(cV),cT);},this["var"].Get());},UpdateBy:function(cT,cU){var cV,cW,cX,cY,cZ;cV=this;cW=this["var"].Get();cX=bj.tryFindIndex(function(c0){return U.Equals(cV.key(c0),cU);},cW);cX!=null&&cX.$==1?(cY=cX.$0,cZ=cT(bj.get(cW,cY)),cZ!=null&&cZ.$==1?(this["var"].Set(this.storage.SSetAt(cY,cZ.$0,cW)),this.ObsoleteKey(cU)):void 0):void 0;},MapLens:function(cT){var cU;cU=this;return v.MapSeqCachedViewBy(cU.key,function(cV,cW){return cT(cV,cU["LensInto'"](a.id,function(cX,cY){return cY;},cV,cW));},this["var"].get_View());},GetEnumerator:function(){return bk.Get(this["var"].Get());},GetEnumerator0:function(){return bk.Get0(this["var"].Get());}},h,I);I.New$1=cN.Ctor(function(cT){I.New$2.call(this,cT,[]);},I);I.New$2=cN.Ctor(function(cT,cU){var cV;cV=bj.ofSeq(cU);I.New$3.call(this,cT,y.Create$1(cV),bu.InMemory(cV));},I);I.New=cN.Ctor(function(cT,cU){I.New$3.call(this,cT,y.Create$1(bj.ofSeq(L.distinctBy(cT,cU.SInit()))),cU);},I);I.New$3=cN.Ctor(function(cT,cU,cV){h.New.call(this);this.key=cT;this["var"]=cU;this.storage=cV;this.v=v.Map(function(cW){return cW.slice();},this["var"].get_View());this.it=new br.New$5();},I);J.Create=function(cT){return bm.New(false,cT,J.forceLazy);};J.forceLazy=function(){var cT;cT=this.v();this.c=true;this.v=cT;this.f=J.cachedLazy;return cT;};J.cachedLazy=function(){return this.v;};K.turnToView=function(cT){return R.EmbedView(v.Map(cT,K.currentViewTriggger()));};K.addLayout=function(cT){v.Sink(function(cU){var cV,cW,cX,cY,cZ;K.set_currentViewTriggger(v.Map2(function(c0,c1){return c0+c1;},cT.lytDefinition.get_View(),G.mainDocV().get_View()));cV=(K.createEntries(cT.lytName))(cU);cW=(cX=G.tryGetPlugIn(cT.lytName),cX==null?(cY=(cZ=G.defaultPlugIn(),H.New(cT.lytName,cZ.plgVars,cZ.plgViews,cZ.plgDocs,cZ.plgActions,cZ.plgQueries)),(G.addPlugIn(cY),cY)):cX.$0);bs.refreshLM(cW.plgVars,bj.ofSeq(L.delay(function(){return L.append([G.newVar("Layout",cT.lytDefinition)],L.delay(function(){return K.getVarEntries(cV);}));})));bs.refreshLM(cW.plgViews,bj.ofSeq(L.delay(function(){return K.getViewEntries(cV);})));bs.refreshLM(cW.plgActions,bj.ofSeq(L.delay(function(){return K.getActionEntries(cV);})));bs.refreshLM(cW.plgQueries,bj.ofSeq(L.delay(function(){return K.getQueryEntries(cV);})));bs.refreshLM(cW.plgDocs,bj.ofSeq(L.delay(function(){return L.append(K.getDocEntries(cV),L.delay(function(){var c0;return L.append([G.newDocF("InputFile",{$:4,$0:(c0=cT.lytName,cN.Curried(K.inputFile,4,[c0])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],L.delay(function(){var c1;return L.append([G.newDocF("InputLabel",{$:3,$0:(c1=cT.lytName,cN.Curried(K.inputLabel,3,[c1])),$1:"attrs",$2:"Label",$3:"Var"})],L.delay(function(){var c2;return L.append([G.newDocF("HtmlDoc",{$:1,$0:(c2=cT.lytName,function(c3){return K.htmlDoc(c2,c3);}),$1:"html"})],L.delay(function(){return[G.newDocF("none",{$:1,$0:K.none,$1:"x"})];}));}));}));}));})));},cT.lytDefinition.get_View());};K.variableSplitter=function(cT,cU,cV,cW,cX,cY){return R.Element("wcomp-splitter",W.ofSeq(L.delay(function(){return L.append(cT?[be.Create("vertical","")]:[],L.delay(function(){return L.append([be.Create("min",a.String(cU))],L.delay(function(){return L.append([be.Create("value",a.String(cV))],L.delay(function(){return[be.Create("max",a.String(cW))];}));}));}));})),W.ofArray([cX,cY]));};K.currentViewTriggger=function(){bi.$cctor();return bi.currentViewTriggger;};K.set_currentViewTriggger=function(cT){bi.$cctor();bi.currentViewTriggger=cT;};K.createEntries=function(cT){function cU(cV){return K.createEntryO(cT,cV);}return function(cV){return K.processText(cU,cV);};};K.getVarEntries=function(cT){function cU(cV){return cV[1];}return L.map(function(cV){return L.last(cU(cV));},L.groupBy(function(cV){return cV.varName;},L.choose(function(cV){return cV.$==0?{$:1,$0:cV.$0}:null;},cT)));};K.getViewEntries=function(cT){function cU(cV){return cV[1];}return L.map(function(cV){return L.last(cU(cV));},L.groupBy(function(cV){return cV.viwName;},L.choose(function(cV){return cV.$==1?{$:1,$0:cV.$0}:null;},cT)));};K.getActionEntries=function(cT){function cU(cV){return cV[1];}return L.map(function(cV){return L.last(cU(cV));},L.groupBy(function(cV){return cV.actName;},L.choose(function(cV){return cV.$==3?{$:1,$0:cV.$0}:null;},cT)));};K.getQueryEntries=function(cT){function cU(cV){return cV[1];}return L.map(function(cV){return L.last(cU(cV));},L.groupBy(function(cV){return cV.qryName;},L.choose(function(cV){return cV.$==4?{$:1,$0:cV.$0}:null;},cT)));};K.getDocEntries=function(cT){function cU(cV){return cV[1];}return L.map(function(cV){return L.last(cU(cV));},L.groupBy(function(cV){return cV.docName;},L.choose(function(cV){return cV.$==2?{$:1,$0:cV.$0}:null;},cT)));};K.inputFile=function(cT,cU,cV,cW,cX){var cY,cZ,c0,c1;cY=(cZ=(c0=((K.splitName())(cT))(cW),G.tryGetAct(c0[0],c0[1])),cZ==null?null:{$:1,$0:(c1=cZ.$0,R.Element("div",K.getAttrs(cT,{$:0,$0:cU}),[R.Element("div",[be.Create("class","input-group")],[R.Element("span",[be.Create("class","input-group-btn")],[R.Element("label",[be.Create("class","btn")],[K.getText(cT,{$:0,$0:cV}),R.Element("input",[be.Create("class","form-control"),be.Create("type","file"),bb.Style("display","none"),be.HandlerImpl("click",function(c2){return function(){c2.value="";};}),be.HandlerImpl("change",function(c2){return function(){return G.callFunction(c2,null,c1.actFunction);};})],[])])]),cX!==""?K.singleDoc(cT,W.ofArray([{$:1,$0:cX}])):R.get_Empty()])]))});return cY==null?G.errDoc((function(c2){return function(c3){return c2("Action not found "+D.toSafe(c3));};}(a.id))(cW)):cY.$0;};K.inputLabel=function(cT,cU,cV,cW){var cX,cY,cZ;cX=(cY=(cZ=((K.splitName())(cT))(cW),G.tryGetVar(cZ[0],cZ[1])),cY==null?null:{$:1,$0:R.Element("div",K.getAttrs(cT,{$:0,$0:cU}),[R.Element("div",[be.Create("class","input-group")],[R.Element("span",[be.Create("class","input-group-addon")],[K.getText(cT,{$:0,$0:cV})]),R.Input([be.Create("class","form-control")],cY.$0.varVar)])])});return cX==null?G.errDoc((function(c0){return function(c1){return c0("Var not found "+D.toSafe(c1));};}(a.id))(cW)):cX.$0;};K.htmlDoc=function(cT,cU){return R.BindView(function(cV){return cV.$==1?G.errDoc((function(cW){return function(cX){return cW("HtmlDoc: unexpected action "+bv.p(cX));};}(a.id))(cV.$0)):R.Verbatim(cV.$0);},K.getTextData(cT,cU));};K.none=function(cT){return R.Element("span",[],[]);};K.createSplitter=function(cT,cU,cV,cW,cX){var cY;cY=K.pairOfDocs(cT,cX);return cW.$==1?K.variableSplitter(cV,cW.$0,cW.$1,cW.$2,cY[0],cY[1]):K.fixedSplitter(cV,cW.$0,cW.$1,cY[0],cY[1]);};K.createButton=function(cT,cU,cV,cW,cX){var cY;cY=K.S(cX);return K.turnToView(function(){var cZ,c0,c1,c2,c3;function c4(c5,c6){return G.callFunction(null,null,c5.actFunction);}cZ=(c0=(c1=(c2=((K.splitName())(cT))(cV),G.tryGetAct(c2[0],c2[1])),c1==null?null:{$:1,$0:(c3=c1.$0,function(c5){return c4(c3,c5);})}),c0==null?a.ignore:c0.$0);return R.Button(cY,K.getAttrs(cT,cW),cZ);});};K.createInput=function(cT,cU,cV,cW){return K.turnToView(function(){var cX;return R.BindView(function(cY){return cY==null?G.errDoc((function(cZ){return function(c0){return cZ("Missing var: "+D.toSafe(c0));};}(a.id))(cV)):R.Input(K.getAttrs(cT,cW),cY.$0);},(cX=((K.splitName())(cT))(cV),G.tryGetVoVW(cX[0],cX[1])));});};K.createTextArea=function(cT,cU,cV,cW){return K.turnToView(function(){var cX;return R.BindView(function(cY){return cY==null?G.errDoc((function(cZ){return function(c0){return cZ("Missing var: "+D.toSafe(c0));};}(a.id))(cV)):R.InputArea(K.getAttrs(cT,cW),cY.$0);},(cX=((K.splitName())(cT))(cV),G.tryGetVoVW(cX[0],cX[1])));});};K.createElement=function(cT,cU,cV,cW,cX){return K.turnToView(function(){var cY;cY=[R.Concat(K.getAllDocs(cT,cX))];return R.Element(cV,K.getAttrs(cT,cW),cY);});};K.createDoc=function(cT,cU,cV,cW){return K.turnToView(function(){var cX,cY,cZ;cX=(cY=(cZ=((K.splitName())(cT))(cV),G.tryGetDoc(cZ[0],cZ[1])),cY==null?null:{$:1,$0:K.getDocFinal(cW,cY.$0)});return cX==null?G.errDoc((function(c0){return function(c1){return c0("Missing doc: "+D.toSafe(c1));};}(a.id))(cV)):cX.$0;});};K.createTemplate=function(cT,cU,cV,cW,cX){return K.turnToView(function(){var cY,cZ,c0,c1,c2,c3;c0=K.getAttrs(cT,cW);bz.LoadLocalTemplates("local");function c4(c6,c7){var c8,c9,c_,c$,da,db,dc,dd,de,df,dg;c8=K.S(c6);c9=K.Identifier(c7);return c9!=null&&c9.$==1?(c_=c9.$0,c$=(da=(db=(dc=((K.splitName())(cT))(c_),G.tryGetDoc(dc[0],dc[1])),db==null?null:{$:1,$0:{$:0,$0:c8.toLowerCase(),$1:(K.getDocF(X.Empty,db.$0))[0]}}),da==null?(dd=(de=((K.splitName())(cT))(c_),G.tryGetVar(de[0],de[1])),dd==null?null:{$:1,$0:{$:8,$0:c8.toLowerCase(),$1:dd.$0.varVar}}):da),c$==null?{$:0,$0:c8.toLowerCase(),$1:G.errDoc((function(dh){return function(di){return dh("Missing element: "+D.toSafe(di));};}(a.id))(c_))}:c$.$0):(df=K.S(c6),dg=K.S(c7),{$:0,$0:df.toLowerCase(),$1:G.errDoc((function(dh){return function(di){return dh("Not implemented: "+D.toSafe(di));};}(a.id))(dg))});}function c5(c6,c7){return c6%2===0;}try{cZ={$:1,$0:(c1=(c2=L.map(function(c6){return c4(c6[0],c6[1]);},L.map(function(c6){return c6[1];},L.filter(function(c6){return c5(c6[0],c6[1]);},L.indexed(L.pairwise(cX))))),(L.isEmpty(c0)?a.id:(c3=[{$:3,$0:"attrs",$1:be.Concat(c0)}],function(c6){return L.append(c3,c6);}))(c2)),bz.NamedTemplate("local",{$:1,$0:cV.toLowerCase()},c1))};}catch(c6){cZ=null;}return cZ==null?G.errDoc((function(c7){return function(c8){return c7("Missing template: "+D.toSafe(c8));};}(a.id))(cV)):cZ.$0;});};K.createConcat=function(cT,cU,cV){return K.turnToView(function(){return R.Concat(K.getAllDocs(cT,cV));});};K.createVar=function(cT,cU,cV){return y.Create$1(cV);};K.createView=function(cT,cU,cV){return v.Bind(function(){var cW;function cX(cY){return cY.$==1?(function(cZ){return function(c0){return cZ(bv.p(c0));};}(a.id))(cY.$0):cY.$0;}try{return v.Map(function(cY){try{return!U.Equals(cY,null)&&cY.length===0?"No JS function specified":!U.Equals(cY,null)&&cY.length===1?a.String(a["eval"](bj.get(cY,0))):a.String(a["eval"](bj.get(cY,0)).apply(null,_1.array(cY,{$:1,$0:1},null)));}catch(cZ){return cZ.message;}},v.Map((cW=function(cY){return L.map(cX,cY);},function(cY){return bj.ofSeq(cW(cY));}),S.traverseSeq(function(cY){return K.getTextToken(cT,cY);},cV)));}catch(cY){return v.Const(cY.message);}},K.currentViewTriggger());};K.createAction=function(cT,cU,cV,cW){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_;c1=(cY=((K.splitName())(cT))(cV),G.tryGetAct(cY[0],cY[1]));if(c1==null)cX=null;else{c2=c1.$0;if(cW.$===0)cZ=c2.actFunction;else{c3=c2.actFunction;switch(c3.$==1?cW.$==1?cW.$1.$==0?(c0=[c3.$0,cW.$0],0):3:3:c3.$==2?cW.$==1?cW.$1.$==0?(c0=[c3.$0,c3.$2,cW.$0],2):cW.$1.$1.$==0?(c0=[c3.$0,cW.$0,cW.$1.$0],1):3:3:3){case 0:cZ=(c4=c0[0],(c5=c0[1],{$:0,$0:function(){K.getParamText(cT,c5,c4);}}));break;case 1:cZ=(c6=c0[0],(c7=c0[1],(c8=c0[2],{$:0,$0:function(){K.getParamText(cT,c7,function(c$){K.getParamText(cT,c8,c6(c$));});}})));break;case 2:cZ=(c9=c0[0],(c_=c0[2],{$:1,$0:function(c$){K.getParamText(cT,c_,function(da){(c9(da))(c$);});},$1:c0[1]}));break;case 3:cZ={$:0,$0:function(){((((cN.Curried(function(c$,da,db,dc){return c$("Parameters do not coincide for Action "+D.toSafe(da)+" "+D.printList(function(dd){return bx.p$4(dd);},db)+" "+bv.p(dc));},4))(function(c$){cQ.log(c$);}))(cV))(cW))(c2);}};break;}}cX={$:1,$0:cZ};}return cX==null?{$:0,$0:function(){((function(c$){return function(da){return c$("Action Not Found "+D.toSafe(da));};}(function(c$){cQ.log(c$);}))(cV));}}:cX.$0;};K.addNewLayout=function(cT,cU){var cV,cW;K.addLayout((cV=(cW=!U.Equals(cU,null)?cU:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(_0.unindentStr())(cW)),K.newLyt(!U.Equals(cU,null)?cT:"Lyt_"+_6.Replace(a.String(Z.NewGuid()),"-",""),cV)));};K.processText=function(cT,cU){return K.processLines(cT,_6.SplitChars(cU,["\n","\r"],1));};K.createEntryO=function(cT,cU){var cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA;try{cV=K.splitTokens(cU);return cV.$==1&&(cX=K.Identifier(cV.$0),cX!=null&&cX.$==1&&(cV.$1.$==1&&(K.Vertical(cV.$1.$0).$==0&&(cV.$1.$1.$==1&&(cY=K.Measures$1(cV.$1.$1.$0),cY!=null&&cY.$==1&&(cW=[cV.$1.$1.$1,cY.$0,cX.$0],true))))))?(cZ=cW[2],K.entryDoc(cZ,(K.createSplitterM())([cT,cZ,true,cW[1],cW[0]]))):cV.$==1&&(c1=K.Identifier(cV.$0),c1!=null&&c1.$==1&&(cV.$1.$==1&&(K.Vertical(cV.$1.$0).$==1&&(cV.$1.$1.$==1&&(c2=K.Measures$1(cV.$1.$1.$0),c2!=null&&c2.$==1&&(c0=[cV.$1.$1.$1,c2.$0,c1.$0],true))))))?(c3=c0[2],K.entryDoc(c3,(K.createSplitterM())([cT,c3,false,c0[1],c0[0]]))):cV.$==1&&(c5=K.Identifier(cV.$0),c5!=null&&c5.$==1&&(cV.$1.$==1&&(K.PlugIn(cV.$1.$0).$==1&&(cV.$1.$1.$==1&&(c6=K.Identifier(cV.$1.$1.$0),c6!=null&&c6.$==1&&(cV.$1.$1.$1.$==1&&(cV.$1.$1.$1.$1.$==1&&(cV.$1.$1.$1.$1.$1.$==0&&(c4=[c6.$0,cV.$1.$1.$1.$0,c5.$0,cV.$1.$1.$1.$1.$0],true)))))))))?(c7=c4[2],K.entryDoc(c7,(K.createButtonM())([cT,c7,c4[0],c4[1],c4[3]]))):cV.$==1&&(c9=K.Identifier(cV.$0),c9!=null&&c9.$==1&&(cV.$1.$==1&&(K.PlugIn(cV.$1.$0).$==2&&(cV.$1.$1.$==1&&(c_=K.Identifier(cV.$1.$1.$0),c_!=null&&c_.$==1&&(cV.$1.$1.$1.$==1&&(cV.$1.$1.$1.$1.$==0&&(c8=[cV.$1.$1.$1.$0,c9.$0,c_.$0],true))))))))?(c$=c8[1],K.entryDoc(c$,(K.createInputM())([cT,c$,c8[2],c8[0]]))):cV.$==1&&(db=K.Identifier(cV.$0),db!=null&&db.$==1&&(cV.$1.$==1&&(K.PlugIn(cV.$1.$0).$==3&&(cV.$1.$1.$==1&&(dc=K.Identifier(cV.$1.$1.$0),dc!=null&&dc.$==1&&(cV.$1.$1.$1.$==1&&(cV.$1.$1.$1.$1.$==0&&(da=[cV.$1.$1.$1.$0,db.$0,dc.$0],true))))))))?(dd=da[1],K.entryDoc(dd,(K.createTextAreaM())([cT,dd,da[2],da[0]]))):cV.$==1&&(df=K.Identifier(cV.$0),df!=null&&df.$==1&&(cV.$1.$==1&&(K.Var(cV.$1.$0).$==0&&(cV.$1.$1.$==1&&(cV.$1.$1.$1.$==0&&(de=[df.$0,K.S(cV.$1.$1.$0)],true))))))?(dg=de[0],K.entryVar(dg,(K.createVarM())([cT,dg,de[1]]))):cV.$==1&&(di=K.Identifier(cV.$0),di!=null&&di.$==1&&(cV.$1.$==1&&(K.Var(cV.$1.$0).$==1&&(cV.$1.$1.$==1&&(dh=[K.S(cV.$1.$1.$0),di.$0,cV.$1.$1.$1],true)))))?(dj=dh[1],K.entryDoc(dj,(K.createDocM())([cT,dj,dh[0],dh[2]]))):cV.$==1&&(dl=K.Identifier(cV.$0),dl!=null&&dl.$==1&&(cV.$1.$==1&&(K.Var(cV.$1.$0).$==2&&(dk=[dl.$0,cV.$1.$1],true))))?(dm=dk[0],K.entryView(dm,(K.createViewM())([cT,dm,dk[1]]))):cV.$==1&&(_do=K.Identifier(cV.$0),_do!=null&&_do.$==1&&(cV.$1.$==1&&(K.Vertical(cV.$1.$0).$==4&&(cV.$1.$1.$==1&&(cV.$1.$1.$1.$==1&&(dn=[cV.$1.$1.$1.$0,cV.$1.$1.$1.$1,_do.$0,K.S(cV.$1.$1.$0)],true))))))?(dp=dn[2],K.entryDoc(dp,(K.createTemplateM())([cT,dp,dn[3],dn[0],dn[1]]))):cV.$==1&&(dr=K.Identifier(cV.$0),dr!=null&&dr.$==1&&(cV.$1.$==1&&(K.Var(cV.$1.$0).$==3&&(dq=[cV.$1.$1,dr.$0],true))))?(ds=dq[1],K.entryDoc(ds,(K.createConcatM())([cT,ds,dq[0]]))):cV.$==1&&(du=K.Identifier(cV.$0),du!=null&&du.$==1&&(cV.$1.$==1&&(K.Var(cV.$1.$0).$==4&&(cV.$1.$1.$==1&&(dv=K.Identifier(cV.$1.$1.$0),dv!=null&&dv.$==1&&(dt=[dv.$0,du.$0,cV.$1.$1.$1],true))))))?(dw=dt[1],K.entryAct(dw,(K.createActionM())([cT,dw,dt[0],dt[2]]))):cV.$==1&&(dy=K.Identifier(cV.$0),dy!=null&&dy.$==1&&(cV.$1.$==1&&(dz=K.Vertical(cV.$1.$0),dz.$==5&&(cV.$1.$1.$==1&&(dx=[cV.$1.$1.$0,cV.$1.$1.$1,dz.$0,dy.$0],true)))))?(dA=dx[3],K.entryDoc(dA,(K.createElementM())([cT,dA,dx[2],dx[0],dx[1]]))):null;}catch(dB){return null;}};K.splitName=function(){bi.$cctor();return bi.splitName;};K.getAttrs=function(cT,cU){var cV;cV=K.S(cU);return W.ofSeq(L.delay(function(){return L.append(L.choose(function(cW){var cX,cY,cZ,c0;function c1(c2,c3){var c4;return c3.$==1?(c4=c3.$0,c2.addEventListener(_6.Trim(c0),function(c5){return G.callFunction(c2,c5,c4.actFunction);},false)):c2.setAttribute(_6.Trim(c0),_6.Trim(c3.$0));}return!U.Equals(cW,null)&&cW.length===2&&(cY=bj.get(cW,1),_6.Trim(bj.get(cW,0))!==""&&_6.Trim(cY)!=="")?(cZ=bj.get(cW,1),(c0=bj.get(cW,0),{$:1,$0:bb.DynamicCustom(function(c2){return function(c3){return c1(c2,c3);};},K.getTextData(cT,_6.Trim(cZ)))})):null;},L.map(function(cW){return _0.splitByChar("=",cW);},_0.splitByChar(";",cV))),L.delay(function(){return L.choose(function(cW){var cX,cY,cZ,c0,c1;return!U.Equals(cW,null)&&cW.length===2&&(cY=bj.get(cW,1),_6.Trim(bj.get(cW,0))!==""&&_6.Trim(cY)!=="")?(cZ=bj.get(cW,1),(c0=bj.get(cW,0),{$:1,$0:(c1=v.Map(function(c2){return c2.$==1?(function(c3){return function(c4){return c3("@{"+D.toSafe(c4)+"}");};}(a.id))(c2.$0.actName):_6.Trim(c2.$0);},K.getTextData(cT,_6.Trim(cZ))),bb.DynamicStyle(_6.Trim(c0),c1))})):null;},L.map(function(cW){return _0.splitByChar(":",cW);},_0.splitByChar(";",cV)));}));}));};K.getText=function(cT,cU){var cV,cW,cX,cY,cZ,c0,c1,c2,c3;cV=K.Identifier(cU);return cV!=null&&cV.$==1?(cW=cV.$0,(cX=((K.splitName())(cT))(cW),(cY=cX[0],(cZ=cX[1],(c0=(c1=G.tryGetViw(cY,cZ),c1==null?null:{$:1,$0:R.TextView(c1.$0.viwView)}),c0==null?(c2=(c3=G.tryGetVar(cY,cZ),c3==null?null:{$:1,$0:R.TextView(c3.$0.varVar.get_View())}),c2==null?R.TextNode(cW):c2.$0):c0.$0))))):R.TextNode(K.S(cU));};K.singleDoc=function(cT,cU){return R.EmbedView(v.Map(function(cV){var cW;return cV.$==1&&(cV.$1.$==0&&(cW=cV.$0,true))?cW:G.errDoc((function(cX){return function(cY){return cX("expected exactly 1 element "+D.printList(function(cZ){return bx.p$4(cZ);},cY));};}(a.id))(cU));},v.Map(function(){return K.getAllDocs(cT,cU);},K.currentViewTriggger())));};K.getTextData=function(cT,cU){var cV,cW,cX,cY;cV=(cW=_0.delimitedO("@{","}",cU),cW==null?null:{$:1,$0:(cX=cW.$0,(cY=cX[0],K.getOneTextData(cT,cX[1],cY,cX[2])))});return cV==null?v.Const({$:0,$0:cU}):cV.$0;};K.pairOfDocs=function(cT,cU){var cV;cV=v.Map(function(cW){var cX;return cW.$==1&&(cW.$1.$==1&&(cW.$1.$1.$==0&&(cX=[cW.$0,cW.$1.$0],true)))?[cX[0],cX[1]]:[G.errDoc((function(cY){return function(cZ){return cY("splitter expects exactly 2 elements "+D.printList(function(c0){return bx.p$4(c0);},cZ));};}(a.id))(cU)),G.errDoc("part 2")];},v.Map(function(){return K.getAllDocs(cT,cU);},K.currentViewTriggger()));return[R.EmbedView(v.Map(function(cW){return cW[0];},cV)),R.EmbedView(v.Map(function(cW){return cW[1];},cV))];};K.fixedSplitter=function(cT,cU,cV,cW,cX){var cY,cZ,c0,c1,c2,c3,c4;cY=(((cV?cN.Curried3(function(c5,c6,c7){return c5(c6.toFixed(6)+"px calc(100% - "+c7.toFixed(6)+"px)");}):cN.Curried3(function(c5,c6,c7){return c5("calc(100% - "+c6.toFixed(6)+"px) "+c7.toFixed(6)+"px");}))(a.id))(cU))(cU);return cT?(cZ=bM.Make().WithHole({$:1,$0:"partsizes",$1:cY}).WithHole({$:0,$0:"first",$1:cW}).WithHole({$:0,$0:"second",$1:cX}),(c0=bN.CompleteHoles(cZ.k,cZ.h,[]),(c1=new bL.New(c0[1],bw.fixedsplitterver(c0[0])),(cZ.i=c1,c1)))).get_Doc():(c2=bM.Make().WithHole({$:1,$0:"partsizes",$1:cY}).WithHole({$:0,$0:"first",$1:cW}).WithHole({$:0,$0:"second",$1:cX}),(c3=bN.CompleteHoles(c2.k,c2.h,[]),(c4=new bL.New(c3[1],bw.fixedsplitterhor(c3[0])),(c2.i=c4,c4)))).get_Doc();};K.S=function(cT){return cT.$==1?cT.$0:cT.$0;};K.getAllDocs=function(cT,cU){return cU.$==1?new X({$:1,$0:K.getADoc(cT,cU.$0),$1:K.getAllDocs(cT,cU.$1)}):X.Empty;};K.getDocFinal=function(cT,cU){var cV;cV=K.getDocF(cT,cU);return cV[1].$==0?cV[0]:G.errDoc((((cN.Curried3(function(cW,cX,cY){return cW("Too many parameters "+bv.p$1(cX)+" "+D.printList(function(cZ){return bx.p$4(cZ);},cY));}))(a.id))(cU))(cT));};K.Identifier=function(cT){var cU,cV,cW;return cT.$==1&&(cV=F.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",cT.$0),cV!=null&&cV.$==1&&((cW=cV.$0,!U.Equals(cW,null)&&cW.length===1)&&(cU=bj.get(cV.$0,0),true)))?{$:1,$0:cU}:null;};K.getDocF=function(cT,cU){var cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6;cW=cU.docDoc;switch(cW.$==1?cT.$==1?(cV=[cW.$0,K.S(cT.$0),cT.$1],1):6:cW.$==2?cT.$==1?(cX=K.S(cT.$0),cT.$1.$==1?(cV=[cW.$0,cX,K.S(cT.$1.$0),cT.$1.$1],2):6):6:cW.$==3?cT.$==1?(cY=K.S(cT.$0),cT.$1.$==1?(cZ=K.S(cT.$1.$0),cT.$1.$1.$==1?(cV=[cW.$0,cY,cZ,K.S(cT.$1.$1.$0),cT.$1.$1.$1],3):6):6):6:cW.$==4?cT.$==1?(c0=K.S(cT.$0),cT.$1.$==1?(c1=K.S(cT.$1.$0),cT.$1.$1.$==1?(c2=K.S(cT.$1.$1.$0),cT.$1.$1.$1.$==1?(cV=[cW.$0,c0,c1,c2,K.S(cT.$1.$1.$1.$0),cT.$1.$1.$1.$1],4):6):6):6):6:cW.$==5?cT.$==1?(c3=K.S(cT.$0),cT.$1.$==1?(c4=K.S(cT.$1.$0),cT.$1.$1.$==1?(c5=K.S(cT.$1.$1.$0),cT.$1.$1.$1.$==1?(c6=K.S(cT.$1.$1.$1.$0),cT.$1.$1.$1.$1.$==1?(cV=[cW.$0,c3,c4,c5,c6,K.S(cT.$1.$1.$1.$1.$0),cT.$1.$1.$1.$1.$1],5):6):6):6):6):6:(cV=[cW.$0,cT],0)){case 0:return[cV[0].f(),cV[1]];case 1:return[cV[0](cV[1]),cV[2]];case 2:return[(cV[0](cV[1]))(cV[2]),cV[3]];case 3:return[((cV[0](cV[1]))(cV[2]))(cV[3]),cV[4]];case 4:return[(((cV[0](cV[1]))(cV[2]))(cV[3]))(cV[4]),cV[5]];case 5:return[((((cV[0](cV[1]))(cV[2]))(cV[3]))(cV[4]))(cV[5]),cV[6]];case 6:return[R.Element("div",[],[R.TextNode((((cN.Curried3(function(c7,c8,c9){return c7("Parameters do not coincide with definition "+bv.p$1(c8)+" - "+D.printList(function(c_){return bx.p$4(c_);},c9));}))(a.id))(cU))(cT))]),X.Empty];}};K.getTextToken=function(cT,cU){return cU.$==0?K.getTextData(cT,cU.$0):K.getOneTextData(cT,cU.$0,"","");};K.getParamText=function(cT,cU,cV){v.Get(function(cW){if(cW.$==1)cV(cW.$0);else cV(cW.$0);},K.getTextToken(cT,cU));};K.newLyt=function(cT,cU){return T.New(cT,y.Create$1(cU));};K.processLines=function(cT,cU){function cV(cW){var cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8;cX=L.tryHead(cW);return cX!=null&&cX.$==1?(cY=cX.$0,(cZ=K.splitTokens(cY),cZ.$==1&&(c1=K.Identifier(cZ.$0),c1!=null&&c1.$==1&&(cZ.$1.$==1&&(K.Vertical(cZ.$1.$0).$==2&&(cZ.$1.$1.$==0&&(c0=c1.$0,true)))))?(c2=K.getExtraLines(function(c9){return _6.StartsWith(_6.Trim(c9),"|");},cW),cV((ce.createLayoutDefinitions(c0,ce.extractNodes(c2[0])))[1].concat(c2[1]))):cZ.$==0?cV(_1.array(cW,{$:1,$0:1},null)):(c3=K.getExtraLines(function(c9){return _6.StartsWith(_6.Trim(c9),":");},cW),(c4=c3[1],(c5=c3[0],bj.length(c5)>0?(c6=K.createLines(L.nth(0,_6.SplitChars(cY,[" "],1)),1,[],[],1,c5),(c7=c6[0],(c8=c6[1],cV(bj.ofSeq(L.delay(function(){return L.append(c8,L.delay(function(){return L.append([cY+" "+_6.concat(" ",c7)],L.delay(function(){return c4;}));}));})))))):bj.ofSeq(L.delay(function(){var c9;return L.append((c9=cT(cY),c9!=null&&c9.$==1?[c9.$0]:[]),L.delay(function(){return cV(c4);}));}))))))):[];}return cV(cU);};K.splitTokens=function(cT){return K.doubleQuote(W.ofSeq(L.collect(a.id,L.mapi(function(cU,cV){var cW;return cU%2===1?[{$:0,$0:cV}]:cV===""?[{$:0,$0:"\""}]:(cW=_6.Trim(cV),cW===""?[]:bj.map(function(cX){return{$:1,$0:cX};},_6.SplitChars(cW,[" "],1)));},_0.splitByChar("\"",cT)))));};K.Measures$1=function(cT){var cU,cV,cW,cX,cY,cZ,c0,c1,c2;return cT.$==1?(cU=_0.splitByChar("-",cT.$0),!U.Equals(cU,null)&&cU.length===1&&(cW=(B.Double())(bj.get(cU,0)),cW!=null&&cW.$==1&&(cV=cW.$0,true))?{$:1,$0:new cf({$:0,$0:cV,$1:true})}:!U.Equals(cU,null)&&cU.length===2&&(bj.get(cU,0)===""&&(cY=(B.Double())(bj.get(cU,1)),cY!=null&&cY.$==1&&(cX=cY.$0,true)))?{$:1,$0:new cf({$:0,$0:cX,$1:false})}:!U.Equals(cU,null)&&cU.length===3&&(c0=(B.Double())(bj.get(cU,0)),c0!=null&&c0.$==1&&(c1=(B.Double())(bj.get(cU,1)),c1!=null&&c1.$==1&&(c2=(B.Double())(bj.get(cU,2)),c2!=null&&c2.$==1&&(cZ=[c2.$0,c0.$0,c1.$0],true))))?{$:1,$0:new cf({$:1,$0:cZ[1],$1:cZ[2],$2:cZ[0]})}:null):null;};K.Vertical=function(cT){var cU,cV,cW,cX,cY,cZ;return cT.$==1&&(cT.$0==="vertical"&&(cU=cT.$0,true))?{$:0,$0:null}:cT.$==1&&(cT.$0==="horizontal"&&(cV=cT.$0,true))?{$:1,$0:null}:cT.$==1&&(cT.$0==="layout"&&(cW=cT.$0,true))?{$:2,$0:null}:cT.$==1&&(cT.$0==="grid"&&(cX=cT.$0,true))?{$:3,$0:null}:cT.$==1&&(cT.$0==="template"&&(cY=cT.$0,true))?{$:4,$0:null}:(cZ=K.Identifier(cT),cZ!=null&&cZ.$==1?{$:5,$0:cZ.$0}:{$:6,$0:null});};K.entryDoc=function(cT,cU){return{$:1,$0:{$:2,$0:G.newDoc(cT,J.Create(function(){return cU;}))}};};K.createSplitterM=function(){bi.$cctor();return bi.createSplitterM;};K.PlugIn=function(cT){var cU,cV,cW,cX,cY;return cT.$==1&&(cT.$0==="PlugIn"&&(cU=cT.$0,true))?{$:0,$0:null}:cT.$==1&&(cT.$0==="Button"&&(cV=cT.$0,true))?{$:1,$0:null}:cT.$==1&&(cT.$0==="input"&&(cW=cT.$0,true))?{$:2,$0:null}:cT.$==1&&(cT.$0==="textarea"&&(cX=cT.$0,true))?{$:3,$0:null}:cT.$==1&&(cT.$0==="select"&&(cY=cT.$0,true))?{$:4,$0:null}:{$:5,$0:null};};K.createButtonM=function(){bi.$cctor();return bi.createButtonM;};K.createInputM=function(){bi.$cctor();return bi.createInputM;};K.createTextAreaM=function(){bi.$cctor();return bi.createTextAreaM;};K.Var=function(cT){var cU,cV,cW,cX,cY;return cT.$==1&&(cT.$0==="Var"&&(cU=cT.$0,true))?{$:0,$0:null}:cT.$==1&&(cT.$0==="Doc"&&(cV=cT.$0,true))?{$:1,$0:null}:cT.$==1&&(cT.$0==="View"&&(cW=cT.$0,true))?{$:2,$0:null}:cT.$==1&&(cT.$0==="Concat"&&(cX=cT.$0,true))?{$:3,$0:null}:cT.$==1&&(cT.$0==="Action"&&(cY=cT.$0,true))?{$:4,$0:null}:{$:5,$0:null};};K.entryVar=function(cT,cU){return{$:1,$0:{$:0,$0:G.newVar(cT,cU)}};};K.createVarM=function(){bi.$cctor();return bi.createVarM;};K.createDocM=function(){bi.$cctor();return bi.createDocM;};K.entryView=function(cT,cU){return{$:1,$0:{$:1,$0:G.newViw(cT,cU)}};};K.createViewM=function(){bi.$cctor();return bi.createViewM;};K.createTemplateM=function(){bi.$cctor();return bi.createTemplateM;};K.createConcatM=function(){bi.$cctor();return bi.createConcatM;};K.entryAct=function(cT,cU){return{$:1,$0:{$:3,$0:G.newActF(cT,cU)}};};K.createActionM=function(){bi.$cctor();return bi.createActionM;};K.createElementM=function(){bi.$cctor();return bi.createElementM;};K.getOneTextData=function(cT,cU,cV,cW){var cX,cY,cZ;cX=((K.splitName())(cT))(cU);cY=cX[0];cZ=cX[1];return v.Bind(function(c0){return c0==null?v.Bind(function(c1){var c2;return c1==null?v.Const({$:0,$0:((((cN.Curried(function(c3,c4,c5,c6){return c3(D.toSafe(c4)+" @{Missing "+D.toSafe(c5)+"}"+D.toSafe(c6));},4))(a.id))(cV))(cU))(cW)}):(c2=c1.$0,v.Bind(function(c3){return c3.$==1?v.Const({$:0,$0:(function(c4){return function(c5){return c4("Unexpected Action @{"+D.toSafe(c5)+"}");};}(a.id))(c3.$0.actName)}):v.Const({$:0,$0:cV+c2+c3.$0});},K.getTextData(cT,cW)));},G.tryGetWoWW(cY,cZ)):v.Const({$:1,$0:c0.$0});},G.tryGetActW(cY,cZ));};K.getADoc=function(cT,cU){var cV,cW,cX,cY,cZ;cV=K.Identifier(cU);return cV!=null&&cV.$==1?(cW=cV.$0,(cX=((K.splitName())(cT))(cW),(cY=cX[0],(cZ=cX[1],R.BindView(function(c0){return c0==null?R.BindView(function(c1){var c2;return c1==null?G.errDoc((c2=(function(c3){return function(c4){return c3("Missing doc: "+D.toSafe(c4));};}(a.id))(cW),(A.print(c2),c2))):R.TextNode(c1.$0);},G.tryGetWoWW(cY,cZ)):(K.getDocF(X.Empty,c0.$0))[0];},G.tryGetDocW(cY,cZ)))))):R.TextView(v.Map(function(c0){return c0.$==1?(function(c1){return function(c2){return c1("Unexpected action: "+D.toSafe(c2));};}(a.id))(c0.$0.actName):c0.$0;},K.getTextData(cT,K.S(cU))));};K.getExtraLines=function(cT,cU){var cV,cW,cX,cY;cV=(cW=(cX=L.tryFindIndex(function(cZ){return _6.Trim(cZ)!==""&&!cT(cZ);},L.skip(1,cU)),cX==null?null:{$:1,$0:1+cX.$0}),(cY=bj.length(cU),cW==null?cY:cW.$0));return[_1.array(cU,{$:1,$0:1},{$:1,$0:cV-1}),_1.array(cU,{$:1,$0:cV},null)];};K.createLines=function(cT,cU,cV,cW,cX,cY){var cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8;cZ=_6.replicate(cU,":");c0=":"+cZ;c1=L.tryHead(cY);return c1!=null&&c1.$==1?(c2=_0.StartsWith(cZ,_6.Trim(c1.$0)),c2!=null&&c2.$==1?(c3=c2.$0,(c4=K.getExtraLines(function(c9){return _6.StartsWith(_6.Trim(c9),c0);},cY),(c5=(((cN.Curried3(function(c9,c_,c$){return c9("_"+D.toSafe(c_)+"_"+a.String(c$));}))(a.id))(cT))(cX),(c6=K.createLines(c5,cU+1,[],[],1,c4[0]),(c7=c6[1],(c8=c6[0],K.createLines(cT,cU,bj.ofSeq(L.delay(function(){return L.append(cV,L.delay(function(){return[c5];}));})),bj.ofSeq(L.delay(function(){return L.append(cW,L.delay(function(){return L.append(c7,L.delay(function(){return[c5+" "+c3+" "+_6.concat(" ",c8)];}));}));})),cX+1,c4[1]))))))):[cV,cW]):[cV,cW];};K.doubleQuote=function(cT){var cU,cV,cW;switch(cT.$==1?cT.$0.$==1?_6.StartsWith(cT.$0.$0,"//")?(cU=cT.$0.$0,1):2:2:0){case 0:return X.Empty;case 1:return X.Empty;case 2:switch(cT.$==1?cT.$0.$==0?cT.$1.$==1?cT.$1.$0.$==0?cT.$1.$0.$0==="\""?cT.$1.$1.$==0?(cW=cT.$0.$0,1):cT.$1.$1.$0.$==0?(cW=[cT.$1.$1.$1,cT.$0.$0,cT.$1.$1.$0.$0],0):(cW=[cT.$0,cT.$1],2):(cW=[cT.$0,cT.$1],2):(cW=[cT.$0,cT.$1],2):(cW=[cT.$0,cT.$1],2):(cW=[cT.$0,cT.$1],2):3){case 0:cV=K.doubleQuote(new X({$:1,$0:{$:0,$0:cW[1]+"\""+cW[2]},$1:cW[0]}));break;case 1:cV=W.ofArray([{$:0,$0:cW}]);break;case 2:cV=new X({$:1,$0:cW[0],$1:K.doubleQuote(cW[1])});break;case 3:throw new cr.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\src\\LayoutEngine.fs",1372,38);}return cV;}};L.map=function(cT,cU){return{GetEnumerator:function(){var cV;cV=bk.Get(cU);return new bp.New(null,null,function(cW){return cV.MoveNext()&&(cW.c=cT(cV.Current()),true);},function(){cV.Dispose();});}};};L.choose=function(cT,cU){return L.collect(function(cV){var cW;cW=cT(cV);return cW==null?X.Empty:W.ofArray([cW.$0]);},cU);};L.iter=function(cT,cU){var cV;cV=bk.Get(cU);try{while(cV.MoveNext())cT(cV.Current());}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};L.append=function(cT,cU){return{GetEnumerator:function(){var cV,cW;cV=bk.Get(cT);cW=[true];return new bp.New(cV,null,function(cX){var cY;return cX.s.MoveNext()?(cX.c=cX.s.Current(),true):(cY=cX.s,!U.Equals(cY,null)?cY.Dispose():void 0,cX.s=null,cW[0]&&(cW[0]=false,cX.s=bk.Get(cU),cX.s.MoveNext()?(cX.c=cX.s.Current(),true):(cX.s.Dispose(),cX.s=null,false)));},function(cX){var cY;cY=cX.s;!U.Equals(cY,null)?cY.Dispose():void 0;});}};};L.fold=function(cT,cU,cV){var cW,cX;cW=cU;cX=bk.Get(cV);try{while(cX.MoveNext())cW=cT(cW,cX.Current());return cW;}finally{if(typeof cX=="object"&&"Dispose"in cX)cX.Dispose();}};L.collect=function(cT,cU){return L.concat(L.map(cT,cU));};L.delay=function(cT){return{GetEnumerator:function(){return bk.Get(cT());}};};L.tryFind=function(cT,cU){var cV,cW,cX;cV=bk.Get(cU);try{cW=null;while(cW==null&&cV.MoveNext()){cX=cV.Current();cT(cX)?cW={$:1,$0:cX}:void 0;}return cW;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};L.tryFindIndex=function(cT,cU){var cV,cW,cX;cV=bk.Get(cU);try{cW=true;cX=0;while(cW&&cV.MoveNext())if(cT(cV.Current()))cW=false;else cX=cX+1;return cW?null:{$:1,$0:cX};}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};L.filter=function(cT,cU){return{GetEnumerator:function(){var cV;cV=bk.Get(cU);return new bp.New(null,null,function(cW){var cX,cY,cZ;cX=cV.MoveNext();cY=cV.Current();cZ=false;while(cX)if(cT(cY)){cW.c=cY;cZ=true;cX=false;}else if(cV.MoveNext())cY=cV.Current();else cX=false;return cZ;},function(){cV.Dispose();});}};};L.concat=function(cT){return{GetEnumerator:function(){var cU;cU=bk.Get(cT);return new bp.New(null,null,function(cV){var cW;while(true){cW=cV.s;if(U.Equals(cW,null)){if(cU.MoveNext()){cV.s=bk.Get(cU.Current());cV=cV;}else{cU.Dispose();return false;}}else if(cW.MoveNext()){cV.c=cW.Current();return true;}else{cV.Dispose();cV.s=null;cV=cV;}}},function(cV){var cW;cW=cV.s;!U.Equals(cW,null)?cW.Dispose():void 0;!U.Equals(cU,null)?cU.Dispose():void 0;});}};};L.cache=function(cT){var cU,cV;cU=[];cV=[bk.Get(cT)];return{GetEnumerator:function(){return new bp.New(0,null,function(cW){var cX;return cW.s<cU.length?(cW.c=cU[cW.s],cW.s=cW.s+1,true):(cX=cV[0],U.Equals(cX,null)?false:cX.MoveNext()?(cW.s=cW.s+1,cW.c=cX.Current(),cU.push(cW.c),true):(cX.Dispose(),cV[0]=null,false));},void 0);}};};L.groupBy=function(cT,cU){return L.delay(function(){return bj.groupBy(cT,bj.ofSeq(cU));});};L.pairwise=function(cT){return L.map(function(cU){return[bj.get(cU,0),bj.get(cU,1)];},L.windowed(2,cT));};L.indexed=function(cT){return L.mapi(function(cU,cV){return[cU,cV];},cT);};L.isEmpty=function(cT){var cU;cU=bk.Get(cT);try{return!cU.MoveNext();}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}};L.distinctBy=function(cT,cU){return{GetEnumerator:function(){var cV,cW;cV=bk.Get(cU);cW=new b0.New$3();return new bp.New(null,null,function(cX){var cY,cZ;if(cV.MoveNext()){cY=cV.Current();cZ=cW.Add(cT(cY));while(!cZ&&cV.MoveNext()){cY=cV.Current();cZ=cW.Add(cT(cY));}return cZ&&(cX.c=cY,true);}else return false;},function(){cV.Dispose();});}};};L.head=function(cT){var cU;cU=bk.Get(cT);try{return cU.MoveNext()?cU.Current():L.insufficient();}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}};L.init=function(cT,cU){return L.take(cT,L.initInfinite(cU));};L.tryPick=function(cT,cU){var cV,cW;cV=bk.Get(cU);try{cW=null;while(U.Equals(cW,null)&&cV.MoveNext())cW=cT(cV.Current());return cW;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};L.windowed=function(cT,cU){cT<=0?z.FailWith("The input must be positive."):void 0;return L.delay(function(){return L.enumUsing(bk.Get(cU),function(cV){var cW;cW=[];return L.append(L.enumWhile(function(){return cW.length<cT&&cV.MoveNext();},L.delay(function(){cW.push(cV.Current());return[];})),L.delay(function(){return cW.length===cT?L.append([cW.slice(0)],L.delay(function(){return L.enumWhile(function(){return cV.MoveNext();},L.delay(function(){cW.shift();cW.push(cV.Current());return[cW.slice(0)];}));})):[];}));});});};L.mapi=function(cT,cU){return L.map2(cT,L.initInfinite(a.id),cU);};L.distinct=function(cT){return L.distinctBy(a.id,cT);};L.forall2=function(cT,cU,cV){return!L.exists2(function(cW,cX){return!cT(cW,cX);},cU,cV);};L.compareWith=function(cT,cU,cV){var cW,cX,cY,cZ,c0;cW=bk.Get(cU);try{cY=bk.Get(cV);try{cZ=0;c0=true;while(c0&&cZ===0)if(cW.MoveNext())cZ=cY.MoveNext()?cT(cW.Current(),cY.Current()):1;else if(cY.MoveNext())cZ=-1;else c0=false;cX=cZ;}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}return cX;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};L.take=function(cT,cU){cT<0?L.nonNegative():void 0;return{GetEnumerator:function(){var cV;cV=[bk.Get(cU)];return new bp.New(0,null,function(cW){var cX;cW.s=cW.s+1;return cW.s>cT?false:(cX=cV[0],U.Equals(cX,null)?L.insufficient():cX.MoveNext()?(cW.c=cX.Current(),cW.s===cT?(cX.Dispose(),cV[0]=null):void 0,true):(cX.Dispose(),cV[0]=null,L.insufficient()));},function(){var cW;cW=cV[0];!U.Equals(cW,null)?cW.Dispose():void 0;});}};};L.initInfinite=function(cT){return{GetEnumerator:function(){return new bp.New(0,null,function(cU){cU.c=cT(cU.s);cU.s=cU.s+1;return true;},void 0);}};};L.map2=function(cT,cU,cV){return{GetEnumerator:function(){var cW,cX;cW=bk.Get(cU);cX=bk.Get(cV);return new bp.New(null,null,function(cY){return cW.MoveNext()&&cX.MoveNext()&&(cY.c=cT(cW.Current(),cX.Current()),true);},function(){cW.Dispose();cX.Dispose();});}};};L.skip=function(cT,cU){return{GetEnumerator:function(){var cV;cV=bk.Get(cU);return new bp.New(true,null,function(cW){var cX,cY;if(cW.s){for(cX=1,cY=cT;cX<=cY;cX++)if(!cV.MoveNext())L.insufficient();cW.s=false;}else null;return cV.MoveNext()&&(cW.c=cV.Current(),true);},function(){cV.Dispose();});}};};L.nth=function(cT,cU){var cV,cW;if(cT<0)z.FailWith("negative index requested");cV=-1;cW=bk.Get(cU);try{while(cV<cT){!cW.MoveNext()?L.insufficient():void 0;cV=cV+1;}return cW.Current();}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};L.exists2=function(cT,cU,cV){var cW,cX,cY,cZ;cW=bk.Get(cU);try{cY=bk.Get(cV);try{cZ=false;while(!cZ&&cW.MoveNext()&&cY.MoveNext())cZ=cT(cW.Current(),cY.Current());cX=cZ;}finally{if(typeof cY=="object"&&"Dispose"in cY)cY.Dispose();}return cX;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}};L.sortBy=function(cT,cU){return L.delay(function(){var cV;cV=bj.ofSeq(cU);bj.sortInPlaceBy(cT,cV);return cV;});};L.max=function(cT){var cU,cV,cW;cU=bk.Get(cT);try{if(!cU.MoveNext())L.seqEmpty();cV=cU.Current();while(cU.MoveNext()){cW=cU.Current();U.Compare(cW,cV)===1?cV=cW:void 0;}return cV;}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}};L.unfold=function(cT,cU){return{GetEnumerator:function(){return new bp.New(cU,null,function(cV){var cW;cW=cT(cV.s);return cW==null?false:(cV.c=cW.$0[0],cV.s=cW.$0[1],true);},void 0);}};};L.seqEmpty=function(){return z.FailWith("The input sequence was empty.");};L.forall=function(cT,cU){return!L.exists(function(cV){return!cT(cV);},cU);};L.exists=function(cT,cU){var cV,cW;cV=bk.Get(cU);try{cW=false;while(!cW&&cV.MoveNext())cW=cT(cV.Current());return cW;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}};M.New=function(cT,cU){return{varName:cT,varVar:cU};};N.New=function(cT,cU){return{viwName:cT,viwView:cU};};O.New=function(cT,cU){return{docName:cT,docDoc:cU};};P.New=function(cT,cU,cV){return{actName:cT,actFunction:cU,actEnabled:cV};};Q.New=function(cT,cU){return{qryName:cT,qryFunction:cU};};R=u.Doc=cN.Class({},h,R);R.Concat=function(cT){var cU;cU=bq.ofSeqNonCopying(cT);return bq.TreeReduce(R.get_Empty(),R.Append,cU);};R.get_Empty=function(){return R.Mk(null,v.Const());};R.TextNode=function(cT){return R.Mk({$:5,$0:bB.CreateText(cT)},v.Const());};R.Input=function(cT,cU){return R.InputInternal("input",function(){return L.append(cT,[bb.Value(cU)]);});};R.InputArea=function(cT,cU){return R.InputInternal("textarea",function(){return L.append(cT,[bb.Value(cU)]);});};R.Button=function(cT,cU,cV){var cW;cW=be.Concat(cU);return bY.New(R.Clickable("button",cV),cW,R.TextNode(cT));};R.Append=function(cT,cU){return R.Mk({$:0,$0:cT.docNode,$1:cU.docNode},v.Map2Unit(cT.updates,cU.updates));};R.Mk=function(cT,cU){return new R.New(cT,cU);};R.Convert=function(cT,cU){return R.Flatten(v.MapSeqCached(cT,cU));};R.BindView=function(cT,cU){return R.EmbedView(v.Map(cT,cU));};R.TextView=function(cT){var cU;cU=bV.CreateTextNode();return R.Mk({$:4,$0:cU},v.Map(function(cV){bV.UpdateTextNode(cU,cV);},cT));};R.RunAppend=function(cT,cU){var cV;cV=self.document.createTextNode("");cT.appendChild(cV);R.RunBefore(cV,cU);};R.Element=function(cT,cU,cV){var cW,cX;cW=be.Concat(cU);cX=R.Concat(cV);return bY.New(bB.CreateElement(cT),cW,cX);};R.InputInternal=function(cT,cU){var cV;cV=bB.CreateElement(cT);return bY.New(cV,be.Concat(cU(cV)),R.get_Empty());};R.Clickable=function(cT,cU){var cV;cV=bB.CreateElement(cT);cV.addEventListener("click",function(cW){cW.preventDefault();return cU();},false);return cV;};R.EmbedView=function(cT){var cU;cU=bV.CreateEmbedNode();return R.Mk({$:2,$0:cU},v.Map(a.ignore,v.Bind(function(cV){bV.UpdateEmbedNode(cU,cV.docNode);return cV.updates;},cT)));};R.Verbatim=function(cT){var cU;return R.Mk(bq.MapTreeReduce(function(cV){return U.Equals(cV.nodeType,_8.TEXT_NODE)?{$:5,$0:cV}:{$:1,$0:bV.CreateElemNode(cV,bA.EmptyAttr(),null)};},null,function(cV,cW){return{$:0,$0:cV,$1:cW};},(cU=cR.parseHTML(cT),U.Equals(cU,null)?[]:cU)),v.Const());};R.Flatten=function(cT){return R.EmbedView(v.Map(R.Concat,cT));};R.RunBefore=function(cT,cU){var cV;cV=self.document.createTextNode("");cT.parentNode.insertBefore(cV,cT);R.RunBetween(cV,cT,cU);};R.RunBetween=function(cT,cU,cV){var cW;bV.LinkPrevElement(cU,cV.docNode);cW=bV.CreateDelimitedRunState(cT,cU,cV.docNode);v.Sink(cj.get_UseAnimations()||ck.BatchUpdatesEnabled()?cl.StartProcessor(bV.PerformAnimatedUpdate(false,cW,cV.docNode)):function(){bV.PerformSyncUpdate(false,cW,cV.docNode);},cV.updates);};R.Run=function(cT,cU){bV.LinkElement(cT,cU.docNode);R.RunInPlace(false,cT,cU);};R.ConvertBy=function(cT,cU,cV){return R.Flatten(v.MapSeqCachedBy(cT,cU,cV));};R.RunInPlace=function(cT,cU,cV){var cW;cW=bV.CreateRunState(cU,cV.docNode);v.Sink(cj.get_UseAnimations()||ck.BatchUpdatesEnabled()?cl.StartProcessor(bV.PerformAnimatedUpdate(cT,cW,cV.docNode)):function(){bV.PerformSyncUpdate(cT,cW,cV.docNode);},cV.updates);};R.New=cN.Ctor(function(cT,cU){h.New.call(this);this.docNode=cT;this.updates=cU;},R);S.insertWO=function(cT){return cT==null?v.Const(null):v.Map(function(cU){return{$:1,$0:cU};},cT.$0);};S.traverseSeq=function(cT,cU){return S.map(a.id,bj.foldBack(function(cV,cW){return S.op_GreaterGreaterEquals(cT(cV),function(cX){return S.op_GreaterGreaterEquals(cW,function(cY){return S.rtn(new X({$:1,$0:cX,$1:cY}));});});},bj.ofSeq(cU),S.rtn(X.Empty)));};S.rtn=function(cT){return v.Const(cT);};S.map=function(cT,cU){return v.Map(cT,cU);};S.op_GreaterGreaterEquals=function(cT,cU){return S.bind(cU,cT);};S.bind=function(cT,cU){return v.Bind(cT,cU);};T.New=function(cT,cU){return{lytName:cT,lytDefinition:cU};};U.Equals=function(cT,cU){var cV,cW,cX,cY;if(cT===cU)return true;else{cV=typeof cT;if(cV=="object"){if(cT===null||cT===void 0||cU===null||cU===void 0)return false;else if("Equals"in cT)return cT.Equals(cU);else if(cT instanceof a.Array&&cU instanceof a.Array)return U.arrayEquals(cT,cU);else if(cT instanceof cO&&cU instanceof cO)return U.dateEquals(cT,cU);else{cW=[true];for(var cZ in cT)if(function(c0){cW[0]=!cT.hasOwnProperty(c0)||cU.hasOwnProperty(c0)&&U.Equals(cT[c0],cU[c0]);return!cW[0];}(cZ))break;if(cW[0]){for(var c0 in cU)if(function(c1){cW[0]=!cU.hasOwnProperty(c1)||cT.hasOwnProperty(c1);return!cW[0];}(c0))break;}return cW[0];}}else return cV=="function"&&("$Func"in cT?cT.$Func===cU.$Func&&cT.$Target===cU.$Target:"$Invokes"in cT&&"$Invokes"in cU&&U.arrayEquals(cT.$Invokes,cU.$Invokes));}};U.arrayEquals=function(cT,cU){var cV,cW;if(bj.length(cT)===bj.length(cU)){cV=true;cW=0;while(cV&&cW<bj.length(cT)){!U.Equals(bj.get(cT,cW),bj.get(cU,cW))?cV=false:void 0;cW=cW+1;}return cV;}else return false;};U.dateEquals=function(cT,cU){return cT.getTime()===cU.getTime();};U.Compare=function(cT,cU){var cV,cW,cX,cY,cZ,c0;if(cT===cU)return 0;else{cW=typeof cT;switch(cW=="function"?1:cW=="boolean"?2:cW=="number"?2:cW=="string"?2:cW=="object"?3:0){case 0:return typeof cU=="undefined"?0:-1;case 1:return z.FailWith("Cannot compare function values.");case 2:return cT<cU?-1:1;case 3:if(cT===null)cX=-1;else if(cU===null)cX=1;else if("CompareTo"in cT)cX=cT.CompareTo(cU);else if("CompareTo0"in cT)cX=cT.CompareTo0(cU);else if(cT instanceof a.Array&&cU instanceof a.Array)cX=U.compareArrays(cT,cU);else if(cT instanceof cO&&cU instanceof cO)cX=U.compareDates(cT,cU);else{cY=[0];for(var c1 in cT)if(function(c2){return!cT.hasOwnProperty(c2)?false:!cU.hasOwnProperty(c2)?(cY[0]=1,true):(cY[0]=U.Compare(cT[c2],cU[c2]),cY[0]!==0);}(c1))break;if(cY[0]===0){for(var c2 in cU)if(function(c3){return!cU.hasOwnProperty(c3)?false:!cT.hasOwnProperty(c3)&&(cY[0]=-1,true);}(c2))break;}cX=cY[0];}return cX;}}};U.compareArrays=function(cT,cU){var cV,cW;if(bj.length(cT)<bj.length(cU))return -1;else if(bj.length(cT)>bj.length(cU))return 1;else{cV=0;cW=0;while(cV===0&&cW<bj.length(cT)){cV=U.Compare(bj.get(cT,cW),bj.get(cU,cW));cW=cW+1;}return cV;}};U.compareDates=function(cT,cU){return U.Compare(cT.getTime(),cU.getTime());};U.Hash=function(cT){var cU;cU=typeof cT;return cU=="function"?0:cU=="boolean"?cT?1:0:cU=="number"?cT:cU=="string"?U.hashString(cT):cU=="object"?cT==null?0:cT instanceof a.Array?U.hashArray(cT):U.hashObject(cT):0;};U.hashString=function(cT){var cU,cV,cW;if(cT===null)return 0;else{cU=5381;for(cV=0,cW=cT.length-1;cV<=cW;cV++)cU=U.hashMix(cU,cT[cV].charCodeAt());return cU;}};U.hashArray=function(cT){var cU,cV,cW;cU=-34948909;for(cV=0,cW=bj.length(cT)-1;cV<=cW;cV++)cU=U.hashMix(cU,U.Hash(bj.get(cT,cV)));return cU;};U.hashObject=function(cT){var cU,cV;if("GetHashCode"in cT)return cT.GetHashCode();else{cU=[0];for(var cW in cT)if(function(cX){cU[0]=U.hashMix(U.hashMix(cU[0],U.hashString(cX)),U.Hash(cT[cX]));return false;}(cW))break;return cU[0];}};U.hashMix=function(cT,cU){return(cT<<5)+cT+cU;};V.B={$:0};I.Create=function(cT,cU){return I.CreateWithStorage(cT,bu.InMemory(bj.ofSeq(cU)));};I.CreateWithStorage=function(cT,cU){return new I.New(cT,cU);};X=W.T=cN.Class({GetEnumerator:function(){return new bp.New(this,null,function(cT){var cU;cU=cT.s;return cU.$==0?false:(cT.c=cU.$0,cT.s=cU.$1,true);},void 0);},GetEnumerator0:function(){return bk.Get(this);}},null,X);X.Empty=new X({$:0});Z.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cT){var cU,cV;cU=cP.random()*16|0;cV=cT=="x"?cU:cU&3|8;return cV.toString(16);});};Z.TryParse=function(cT,cU){try{cU.set(Z.Parse(cT));return true;}catch(cV){return false;}};Z.Parse=function(cT){var cU,cV,cW;try{return Z.ParseExact(cT,"D");}catch(cX){try{cU=Z.ParseExact(cT,"B");}catch(cY){try{cV=Z.ParseExact(cT,"P");}catch(cZ){try{cW=Z.ParseExact(cT,"N");}catch(c0){cW=Z.ParseExact(cT,"X");}cV=cW;}cU=cV;}return cU;}};Z.ParseExact=function(cT,cU){var cV,cW,cX,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8;function cY(c9){var c_,c$,da,db;for(c_=0,c$=35;c_<=c$;c_++){c_===8||(c_===13||(c_===18||c_===23))?c9[c_]!=="-"?Z.ShapeError():void 0:(db=c9[c_],!("0"<=db&&db<="9"||"a"<=db&&db<="f")?Z.ShapeError():void 0);}return c9;}cZ=cU.toUpperCase();if(cZ==="N"){c0=_6.Trim(cT).toLowerCase();if(c0.length!==32)Z.ShapeError();for(c1=0,c2=31;c1<=c2;c1++){c3=c0[c1];!("0"<=c3&&c3<="9"||"a"<=c3&&c3<="f")?Z.ShapeError():void 0;}return _6.Substring(c0,0,8)+"-"+_6.Substring(c0,8,4)+"-"+_6.Substring(c0,12,4)+"-"+_6.Substring(c0,16,4)+"-"+c0.substring(20);}else if(cZ==="D"){cV=_6.Trim(cT).toLowerCase();cV.length!==36?Z.ShapeError():void 0;return cY(cV);}else if(cZ==="B"){cW=_6.Trim(cT).toLowerCase();cW.length!==38||cW[0]!=="{"||cW[17]!=="}"?Z.ShapeError():void 0;return cY(_6.Substring(cW,1,36));}else if(cZ==="P"){cX=_6.Trim(cT).toLowerCase();cX.length!==38||cX[0]!=="("||cX[17]!==")"?Z.ShapeError():void 0;return cY(_6.Substring(cX,1,36));}else if(cZ==="X"){c4=_6.Trim(cT).toLowerCase();if(c4.length!==68)Z.ShapeError();for(c5=0,c6=67;c5<=c6;c5++){switch(c5){case 26:case 0:if(c4[c5]!=="{")Z.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(c4[c5]!=="0")Z.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(c4[c5]!=="x")Z.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(c4[c5]!==",")Z.ShapeError();break;case 67:case 66:if(c4[c5]!=="{")Z.ShapeError();break;default:c8=c4[c5];!("0"<=c8&&c8<="9"||"a"<=c8&&c8<="f")?Z.ShapeError():void 0;break;}}return _6.Substring(c4,3,8)+"-"+_6.Substring(c4,14,4)+"-"+_6.Substring(c4,21,4)+"-"+_6.Substring(c4,29,2)+_6.Substring(c4,34,2)+"-"+_6.Substring(c4,39,2)+_6.Substring(c4,44,2)+_6.Substring(c4,49,2)+_6.Substring(c4,54,2)+_6.Substring(c4,59,2)+_6.Substring(c4,64,2);}else return Z.FormatError();};Z.ShapeError=function(){throw new cx.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};Z.FormatError=function(){throw new cx.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};v=u.View=cN.Class({},null,v);_0.delimitedO=function(cT,cU,cV){var cW,cX,cY,cZ,c0;cW=_0.splitInTwoO(cT,cV);return cW==null?null:(cX=cW.$0,(cY=cX[0],(cZ=_0.splitInTwoO(cU,cX[1]),cZ==null?null:{$:1,$0:(c0=cZ.$0,[cY,c0[0],c0[1]])})));};_0.splitInTwoO=function(cT,cU){var cV;cV=cU.indexOf(cT);return cV===-1?null:{$:1,$0:[A["String.Left"](cU,cV),cU.substring(cV+cT.length)]};};_0.splitByChar=function(cT,cU){return _6.SplitChars(cU,[cT],0);};_0.unindent=function(cT){var cU,cV,cW,cX;cU=_6.SplitChars(cT,["\n"],0);cV=(cW=L.tryFindIndex(function(cY){return" "!==cY;},(cX=L.tryFind(function(cY){return _6.Trim(cY)!=="";},cU),cX==null?"":cX.$0)),cW==null?0:cW.$0);return L.filter(function(cY){return!_6.StartsWith(cY,"# 1 ");},L.map(function(cY){return cY.length<=cV?"":cY.substring(cV);},cU));};_0.unindentStr=function(){bi.$cctor();return bi.unindentStr;};_0.StartsWith=function(cT,cU){return _6.StartsWith(cU,cT)?{$:1,$0:_1.string(cU,{$:1,$0:cT.length},null)}:null;};W.ofArray=function(cT){var cU,cV,cW;cU=X.Empty;for(cV=bj.length(cT)-1,cW=0;cV>=cW;cV--)cU=new X({$:1,$0:bj.get(cT,cV),$1:cU});return cU;};W.map=function(cT,cU){var cV,cW,cX,cY,cZ;if(cU.$==0)return cU;else{cY=new X({$:1});cV=cY;cW=cU;cX=true;while(cX){cV.$0=cT(cW.$0);cW=cW.$1;cW.$==0?cX=false:cV=(cZ=new X({$:1}),cV.$1=cZ,cZ);}cV.$1=X.Empty;return cY;}};W.ofSeq=function(cT){var cU,cV,cW,cX,cY,cZ;if(cT instanceof X)return cT;else if(cT instanceof a.Array)return W.ofArray(cT);else{cU=bk.Get(cT);try{cW=cU.MoveNext();if(!cW)cV=X.Empty;else{cY=new X({$:1});cX=cY;while(cW){cX.$0=cU.Current();cU.MoveNext()?cX=(cZ=new X({$:1}),cX.$1=cZ,cZ):cW=false;}cX.$1=X.Empty;cV=cY;}return cV;}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}}};W.head=function(cT){return cT.$==1?cT.$0:W.listEmpty();};W.tail=function(cT){return cT.$==1?cT.$1:W.listEmpty();};W.listEmpty=function(){return z.FailWith("The input list was empty.");};_1.string=function(cT,cU,cV){return cU==null?cV!=null&&cV.$==1?cT.slice(0,cV.$0+1):"":cV==null?cT.slice(cU.$0):cT.slice(cU.$0,cV.$0+1);};_1.array=function(cT,cU,cV){return cU==null?cV!=null&&cV.$==1?cT.slice(0,cV.$0+1):[]:cV==null?cT.slice(cU.$0):cT.slice(cU.$0,cV.$0+1);};_3.resolver=function(cT,cU){function cV(cW){var cX,cY,cZ,c0,c1;function c2(c4){return c4[0];}function c3(c4){return cZ===c4;}return cW.$==1?cW.$0:(cX=cW.$0,cX!=null&&cX.$==1)?(cY=cW.$1,(cZ=cW.$0.$0[0],cV((c0=(c1=L.tryFind(function(c4){return c3(c2(c4));},cT),c1==null?null:{$:1,$0:cY(c1.$0[1])}),c0==null?cY(cW.$0.$0[1]):c0.$0)))):cV(cW.$1(void 0));}return cV(cU);};_3.dependByName=function(cT,cU,cV){return{$:0,$0:{$:1,$0:[cT,cU]},$1:function(cW){return{$:1,$0:cV(cW)};}};};_3.depend=function(){t.$cctor();return t.depend;};_3.bind=function(cT,cU){function cV(cW){var cX,cY;return cW.$==1?(cX=cW.$0,{$:0,$0:null,$1:function(){return cT(cX);}}):(cY=cW.$1,{$:0,$0:cW.$0,$1:function(cZ){return cV(cY(cZ));}});}return cV(cU);};_3.rtn=function(cT){return{$:1,$0:cT};};_4.html=function(){t.$cctor();return t.html;};_5=_3.DependBuilder=cN.Class({Delay:function(cT){return cT();},Bind:function(cT,cU){return _3.bind(cU,cT);},Return:function(cT){return _3.rtn(cT);}},h,_5);_5.New=cN.Ctor(function(){h.New.call(this);},_5);_0.unindent$1=function(cT){var cU,cV,cW,cX;cU=_6.SplitChars(cT,["\n"],0);cV=(cW=L.tryFindIndex(function(cY){return" "!==cY;},(cX=L.tryFind(function(cY){return _6.Trim(cY)!=="";},cU),cX==null?"":cX.$0)),cW==null?0:cW.$0);return L.filter(function(cY){return!_6.StartsWith(cY,"# 1 ");},L.map(function(cY){return cY.length<=cV?"":cY.substring(cV);},cU));};_0.splitByChar$1=function(cT,cU){return _6.SplitChars(cU,[cT],0);};_6.concat=function(cT,cU){return bj.ofSeq(cU).join(cT);};_6.SplitChars=function(cT,cU,cV){return _6.Split(cT,new a.RegExp("["+_6.RegexEscape(cU.join(""))+"]"),cV);};_6.Trim=function(cT){return cT.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};_6.StartsWith=function(cT,cU){return cT.substring(0,cU.length)==cU;};_6.Split=function(cT,cU,cV){return cV===1?bj.filter(function(cW){return cW!=="";},_6.SplitWith(cT,cU)):_6.SplitWith(cT,cU);};_6.RegexEscape=function(cT){return cT.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_6.Replace=function(cT,cU,cV){function cW(cX){var cY,cZ,c0;cY=cX.indexOf(cU);return cY!==-1?(cZ=_6.ReplaceOnce(cX,cU,cV),(c0=cY+cV.length,_6.Substring(cZ,0,cY+cV.length)+cW(cZ.substring(c0)))):cX;}return cW(cT);};_6.SplitWith=function(cT,cU){return cT.split(cU);};_6.ReplaceOnce=function(cT,cU,cV){return cT.replace(cU,cV);};_6.replicate=function(cT,cU){return bj.create(cT,cU).join("");};_6.Substring=function(cT,cU,cV){return cT.substr(cU,cV);};_6.SplitStrings=function(cT,cU,cV){return _6.Split(cT,new a.RegExp(_6.concat("|",bj.map(_6.RegexEscape,cU))),cV);};_6.forall=function(cT,cU){return L.forall(cT,_6.protect(cU));};_6.protect=function(cT){return cT===null?"":cT;};$.GetFields=function(cT){var cU,cV;cU=[];for(var cW in cT)cU.push([cW,cT[cW]]);return cU;};$.GetFieldValues=function(cT){var cU,cV;cU=[];for(var cW in cT)cU.push(cT[cW]);return cU;};ba.NewFromSeq=function(cT){var cU,cV,cW;cU={};cV=bk.Get(cT);try{while(cV.MoveNext()){cW=cV.Current();cU[cW[0]]=cW[1];}}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}return cU;};bb.DynamicStyle=function(cT,cU){return bA.Dynamic(cU,function(cV){return function(cW){return bB.SetStyle(cV,cT,cW);};});};bb.DynamicPred=function(cT,cU,cV){function cW(cX,cY){return cY[0]?bB.SetAttr(cX,cT,cY[1]):bB.RemoveAttr(cX,cT);}return bA.Dynamic(v.Map2(function(cX,cY){return[cX,cY];},cU,cV),function(cX){return function(cY){return cW(cX,cY);};});};bb.Dynamic=function(cT,cU){return bA.Dynamic(cU,function(cV){return function(cW){return bB.SetAttr(cV,cT,cW);};});};bb.Value=function(cT){function cU(cV){return{$:1,$0:cV};}return bb.CustomValue(cT,a.id,function(cV){return cU(a.id(cV));});};bb.Style=function(cT,cU){return bA.Static(function(cV){bB.SetStyle(cV,cT,cU);});};bb.CustomValue=function(cT,cU,cV){return bb.CustomVar(cT,function(cW,cX){cW.value=cU(cX);},function(cW){return cV(cW.value);});};bb.DynamicCustom=function(cT,cU){return bA.Dynamic(cU,cT);};bb.CustomVar=function(cT,cU,cV){function cW(cY,cZ){return cT.UpdateMaybe(function(c0){var c1,c2;c1=cV(cY);return c1!=null&&c1.$==1&&(!U.Equals(c1.$0,c0)&&(c2=[c1,c1.$0],true))?c2[0]:null;});}function cX(cY,cZ){var c0,c1;c0=cV(cY);return c0!=null&&c0.$==1&&(U.Equals(c0.$0,cZ)&&(c1=c0.$0,true))?null:cU(cY,cZ);}return be.Concat([bb.Handler("change",function(cY){return function(cZ){return cW(cY,cZ);};}),bb.Handler("input",function(cY){return function(cZ){return cW(cY,cZ);};}),bb.Handler("keypress",function(cY){return function(cZ){return cW(cY,cZ);};}),bb.DynamicCustom(function(cY){return function(cZ){return cX(cY,cZ);};},cT.get_View())]);};bb.Handler=function(cT,cU){return bA.Static(function(cV){cV.addEventListener(cT,function(cW){return(cU(cV))(cW);},false);});};bb.OnAfterRender=function(cT){return new be({$:4,$0:cT});};bb.Checked=function(cT){function cU(cV,cW){return!U.Equals(cT.Get(),cV.checked)?cT.Set(cV.checked):null;}return be.Concat([bb.DynamicProp("checked",cT.get_View()),bb.Handler("change",function(cV){return function(cW){return cU(cV,cW);};})]);};bb.IntValue=function(cT){return bb.CustomVar(cT,function(cU,cV){var cW;cW=cV.get_Input();return cU.value!==cW?void(cU.value=cW):null;},function(cU){var cV,cW,cX;cV=cU.value;return{$:1,$0:cI.isBlank(cV)?(cU.checkValidity?cU.checkValidity():true)?new ca({$:2,$0:cV}):new ca({$:1,$0:cV}):(cW=(cX=0,[bE.TryParseInt32(cV,{get:function(){return cX;},set:function(cY){cX=cY;}}),cX]),cW[0]?new ca({$:0,$0:cW[1],$1:cV}):new ca({$:1,$0:cV}))};});};bb.IntValueUnchecked=function(cT){return bb.CustomValue(cT,a.String,function(cU){var cV;return cI.isBlank(cU)?{$:1,$0:0}:(cV=+cU,cV!==cV>>0?null:{$:1,$0:cV});});};bb.FloatValue=function(cT){return bb.CustomVar(cT,function(cU,cV){var cW;cW=cV.get_Input();return cU.value!==cW?void(cU.value=cW):null;},function(cU){var cV,cW;cV=cU.value;return{$:1,$0:cI.isBlank(cV)?(cU.checkValidity?cU.checkValidity():true)?new ca({$:2,$0:cV}):new ca({$:1,$0:cV}):(cW=+cV,a.isNaN(cW)?new ca({$:1,$0:cV}):new ca({$:0,$0:cW,$1:cV}))};});};bb.FloatValueUnchecked=function(cT){return bb.CustomValue(cT,a.String,function(cU){var cV;return cI.isBlank(cU)?{$:1,$0:0}:(cV=+cU,a.isNaN(cV)?null:{$:1,$0:cV});});};bb.DynamicProp=function(cT,cU){return bA.Dynamic(cU,function(cV){return function(cW){cV[cT]=cW;};});};bc=G.PlugInBuilder=cN.Class({AddDoc:function(cT,cU,cV){cT.plgDocs.Append(G.newDoc(cU,cV));return cT;},AddVar:function(cT,cU,cV){cT.plgVars.Append(G.newVar(cU,cV));return cT;},Name:function(cT,cU){return H.New(cU,cT.plgVars,cT.plgViews,cT.plgDocs,cT.plgActions,cT.plgQueries);},Yield:function(){return this.Zero();},Zero:function(){var cT;cT=G.defaultPlugIn();return H.New("Main",cT.plgVars,cT.plgViews,cT.plgDocs,cT.plgActions,cT.plgQueries);},AddAct:function(cT,cU,cV){cT.plgActions.Append(G.newAct(cU,cV));return cT;},AddAct2:function(cT,cU,cV,cW,cX){cT.plgActions.Append(G.newActF(cU,{$:2,$0:cV,$1:cW,$2:cX}));return cT;},AddDoc3:function(cT,cU,cV,cW,cX,cY){cT.plgDocs.Append(G.newDocF(cU,{$:3,$0:cV,$1:cW,$2:cX,$3:cY}));return cT;},AddDoc2:function(cT,cU,cV,cW,cX){cT.plgDocs.Append(G.newDocF(cU,{$:2,$0:cV,$1:cW,$2:cX}));return cT;},AddQry:function(cT,cU,cV){cT.plgQueries.Append(G.newQry(cU,cV));return cT;}},h,bc);bc.New=cN.Ctor(function(){h.New.call(this);},bc);bd.Map=function(cT,cU){var cV,cW;cV=cU.s;return cV!=null&&cV.$==0?bd.New({$:0,$0:cT(cV.$0)}):(cW=bd.New({$:3,$0:[],$1:[]}),(bd.When(cU,function(cX){bd.MarkDone(cW,cU,cT(cX));},cW),cW));};bd.Map2=function(cT,cU,cV){var cW,cX,cY;function cZ(c0){var c1,c2,c3;if(!(c1=cY.s,c1!=null&&c1.$==0||c1!=null&&c1.$==2)){c2=bd.ValueAndForever(cU);c3=bd.ValueAndForever(cV);c2!=null&&c2.$==1?c3!=null&&c3.$==1?c2.$0[1]&&c3.$0[1]?bd.MarkForever(cY,cT(c2.$0[0],c3.$0[0])):bd.MarkReady(cY,cT(c2.$0[0],c3.$0[0])):void 0:void 0;}}cW=cU.s;cX=cV.s;return cW!=null&&cW.$==0?cX!=null&&cX.$==0?bd.New({$:0,$0:cT(cW.$0,cX.$0)}):bd.Map2Opt1(cT,cW.$0,cV):cX!=null&&cX.$==0?bd.Map2Opt2(cT,cX.$0,cU):(cY=bd.New({$:3,$0:[],$1:[]}),(bd.When(cU,cZ,cY),bd.When(cV,cZ,cY),cY));};bd.WhenObsoleteRun=function(cT,cU){var cV;cV=cT.s;cV==null?cU():cV!=null&&cV.$==2?cV.$1.push(cU):cV!=null&&cV.$==3?cV.$1.push(cU):void 0;};bd.When=function(cT,cU,cV){var cW;cW=cT.s;cW==null?bd.Obsolete(cV):cW!=null&&cW.$==2?(bd.EnqueueSafe(cW.$1,cV),cU(cW.$0)):cW!=null&&cW.$==3?(cW.$0.push(cU),bd.EnqueueSafe(cW.$1,cV)):cU(cW.$0);};bd.MarkDone=function(cT,cU,cV){var cW;if(cW=cU.s,cW!=null&&cW.$==0)bd.MarkForever(cT,cV);else bd.MarkReady(cT,cV);};bd.Join=function(cT){var cU;cU=bd.New({$:3,$0:[],$1:[]});bd.When(cT,function(cV){var cW;cW=cV();bd.When(cW,function(cX){var cY,cZ;if((cY=cW.s,cY!=null&&cY.$==0)&&(cZ=cT.s,cZ!=null&&cZ.$==0))bd.MarkForever(cU,cX);else bd.MarkReady(cU,cX);},cU);},cU);return cU;};bd.WhenRun=function(cT,cU,cV){var cW;cW=cT.s;cW==null?cV():cW!=null&&cW.$==2?(cW.$1.push(cV),cU(cW.$0)):cW!=null&&cW.$==3?(cW.$0.push(cU),cW.$1.push(cV)):cU(cW.$0);};bd.Map2Opt1=function(cT,cU,cV){return bd.Map(function(cW){return cT(cU,cW);},cV);};bd.Map2Opt2=function(cT,cU,cV){return bd.Map(function(cW){return cT(cW,cU);},cV);};bd.ValueAndForever=function(cT){var cU;cU=cT.s;return cU!=null&&cU.$==0?{$:1,$0:[cU.$0,true]}:cU!=null&&cU.$==2?{$:1,$0:[cU.$0,false]}:null;};bd.MarkForever=function(cT,cU){var cV,cW,cX,cY;cV=cT.s;if(cV!=null&&cV.$==3){cT.s={$:0,$0:cU};cW=cV.$0;for(cX=0,cY=bj.length(cW)-1;cX<=cY;cX++)(bj.get(cW,cX))(cU);}else void 0;};bd.MarkReady=function(cT,cU){var cV,cW,cX,cY;cV=cT.s;if(cV!=null&&cV.$==3){cT.s={$:2,$0:cU,$1:cV.$1};cW=cV.$0;for(cX=0,cY=bj.length(cW)-1;cX<=cY;cX++)(bj.get(cW,cX))(cU);}else void 0;};bd.TryGet=function(cT){var cU,cV;cU=cT.s;return(cU!=null&&cU.$==0?(cV=cU.$0,true):cU!=null&&cU.$==2&&(cV=cU.$0,true))?{$:1,$0:cV}:null;};bd.EnqueueSafe=function(cT,cU){var cV,cW,cX,cY;cT.push(cU);if(cT.length%20===0){cV=cT.slice(0);cq.Clear(cT);for(cW=0,cX=bj.length(cV)-1;cW<=cX;cW++){cY=bj.get(cV,cW);typeof cY=="object"?function(cZ){if(cZ.s)cT.push(cZ);}(cY):function(cZ){cT.push(cZ);}(cY);}}else void 0;};bd.Map2Unit=function(cT,cU){var cV,cW,cX;function cY(){var cZ,c0,c1;if(!(cZ=cX.s,cZ!=null&&cZ.$==0||cZ!=null&&cZ.$==2)){c0=bd.ValueAndForever(cT);c1=bd.ValueAndForever(cU);c0!=null&&c0.$==1?c1!=null&&c1.$==1?c0.$0[1]&&c1.$0[1]?bd.MarkForever(cX,null):bd.MarkReady(cX,null):void 0:void 0;}}cV=cT.s;cW=cU.s;return cV!=null&&cV.$==0?cW!=null&&cW.$==0?bd.New({$:0,$0:null}):cU:cW!=null&&cW.$==0?cT:(cX=bd.New({$:3,$0:[],$1:[]}),(bd.When(cT,cY,cX),bd.When(cU,cY,cX),cX));};bd.Copy=function(cT){var cU,cV,cW;cU=cT.s;return cU==null?cT:cU!=null&&cU.$==2?(cV=bd.New({$:2,$0:cU.$0,$1:[]}),(bd.WhenObsolete(cT,cV),cV)):cU!=null&&cU.$==3?(cW=bd.New({$:3,$0:[],$1:[]}),(bd.When(cT,function(cX){bd.MarkDone(cW,cT,cX);},cW),cW)):cT;};bd.WhenObsolete=function(cT,cU){var cV;cV=cT.s;cV==null?bd.Obsolete(cU):cV!=null&&cV.$==2?bd.EnqueueSafe(cV.$1,cU):cV!=null&&cV.$==3?bd.EnqueueSafe(cV.$1,cU):void 0;};bd.Map3=function(cT,cU,cV,cW){var cX,cY,cZ,c0;function c1(c2){var c3,c4,c5,c6;if(!(c3=c0.s,c3!=null&&c3.$==0||c3!=null&&c3.$==2)){c4=bd.ValueAndForever(cU);c5=bd.ValueAndForever(cV);c6=bd.ValueAndForever(cW);c4!=null&&c4.$==1?c5!=null&&c5.$==1?c6!=null&&c6.$==1?c4.$0[1]&&c5.$0[1]&&c6.$0[1]?bd.MarkForever(c0,cT(c4.$0[0],c5.$0[0],c6.$0[0])):bd.MarkReady(c0,cT(c4.$0[0],c5.$0[0],c6.$0[0])):void 0:void 0:void 0;}}cX=cU.s;cY=cV.s;cZ=cW.s;return cX!=null&&cX.$==0?cY!=null&&cY.$==0?cZ!=null&&cZ.$==0?bd.New({$:0,$0:cT(cX.$0,cY.$0,cZ.$0)}):bd.Map3Opt1(cT,cX.$0,cY.$0,cW):cZ!=null&&cZ.$==0?bd.Map3Opt2(cT,cX.$0,cZ.$0,cV):bd.Map3Opt3(cT,cX.$0,cV,cW):cY!=null&&cY.$==0?cZ!=null&&cZ.$==0?bd.Map3Opt4(cT,cY.$0,cZ.$0,cU):bd.Map3Opt5(cT,cY.$0,cU,cW):cZ!=null&&cZ.$==0?bd.Map3Opt6(cT,cZ.$0,cU,cV):(c0=bd.New({$:3,$0:[],$1:[]}),(bd.When(cU,c1,c0),bd.When(cV,c1,c0),bd.When(cW,c1,c0),c0));};bd.Sequence=function(cT){var cU,cV,cW;function cX(cY){var cZ;if(cW[0]===0){cZ=bj.map(function(c0){var c1;c1=c0.s;return c1!=null&&c1.$==0?c1.$0:c1!=null&&c1.$==2?c1.$0:z.FailWith("value not found by View.Sequence");},cU);bj.forall(function(c0){var c1;c1=c0.s;return c1!=null&&c1.$==0;},cU)?bd.MarkForever(cV,cZ):bd.MarkReady(cV,cZ);}else cW[0]--;}cU=bj.ofSeq(cT);return cU.length==0?bd.New({$:0,$0:[]}):(cV=bd.New({$:3,$0:[],$1:[]}),(cW=[bj.length(cU)-1],(bj.iter(function(cY){bd.When(cY,cX,cV);},cU),cV)));};bd.Map3Opt1=function(cT,cU,cV,cW){return bd.Map(function(cX){return cT(cU,cV,cX);},cW);};bd.Map3Opt2=function(cT,cU,cV,cW){return bd.Map(function(cX){return cT(cU,cX,cV);},cW);};bd.Map3Opt3=function(cT,cU,cV,cW){return bd.Map2(function(cX,cY){return cT(cU,cX,cY);},cV,cW);};bd.Map3Opt4=function(cT,cU,cV,cW){return bd.Map(function(cX){return cT(cX,cU,cV);},cW);};bd.Map3Opt5=function(cT,cU,cV,cW){return bd.Map2(function(cX,cY){return cT(cX,cU,cY);},cV,cW);};bd.Map3Opt6=function(cT,cU,cV,cW){return bd.Map2(function(cX,cY){return cT(cX,cY,cU);},cV,cW);};be=u.AttrProxy=cN.Class({},null,be);be.Create=function(cT,cU){return bA.Static(function(cV){bB.SetAttr(cV,cT,cU);});};be.Concat=function(cT){var cU;cU=bq.ofSeqNonCopying(cT);return bq.TreeReduce(bA.EmptyAttr(),be.Append,cU);};be.Append=function(cT,cU){return bA.AppendTree(cT,cU);};be.HandlerImpl=function(cT,cU){return bA.Static(function(cV){cV.addEventListener(cT,function(cW){return(cU(cV))(cW);},false);});};be.Handler=function(cT,cU){return be.HandlerImpl(cT,cU);};bg.Id=function(){bg.set_counter(bg.counter()+1);return"uid"+a.String(bg.counter());};bg.set_counter=function(cT){bX.$cctor();bX.counter=cT;};bg.counter=function(){bX.$cctor();return bX.counter;};bg.Int=function(){bg.set_counter(bg.counter()+1);return bg.counter();};bh=u.FromView=cN.Class({Set:function(cT){this.set(cT);},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cT){var cU;v.Get((cU=this.set,function(cV){return cU(cT(cV));}),this.view);},UpdateMaybe:function(cT){var cU;cU=this;v.Get(function(cV){var cW;cW=cT(cV);cW!=null&&cW.$==1?cU.set(cW.$0):void 0;},this.view);}},C,bh);bh.New=cN.Ctor(function(cT,cU){var cV,cW;cV=this;C.New.call(this);this.set=cU;this.id=bg.Int();this.current=(cW=v.TryGet(cT),cW==null?null:cW.$0);this.view=v.Map(function(cX){cV.current=cX;return cX;},cT);},bh);bi.$cctor=function(){var cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv;bi.$cctor=a.ignore;function dw(d9){return _6.concat("\n",d9);}function dx(d9){return _0.splitByChar("\n",d9);}function dy(d9){var d_,d$;return _1.array(d9,{$:1,$0:0},{$:1,$0:(d_=0,(d$=bj.length(d9)-2,U.Compare(d_,d$)===1?d_:d$))});}function dz(d9){return _6.concat("\n",d9);}function dA(d9){return d9+"T00:00:00";}function dB(d9){var d_;function d$(eb){return G.plugIns().TryFindByKey(eb);}function ea(eb){return eb==null?G.defaultPlugIn():eb.$0;}d_=function(eb){return eb==null?null:d$(eb.$0);};return function(eb){return ea(d_(eb));};}function dC(d9){var d_;d_=null;return c1.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dD(d9,d_){c1.set_Item(d9,d_);return d_;}function dE(d9,d_){var d$;d$=dC(d9);return d$==null?dD(d9,d_(d9)):d$.$0;}function dF(d9){var d_;d_=null;return c4.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dG(d9,d_){c4.set_Item(d9,d_);return d_;}function dH(d9,d_){var d$;d$=dF(d9);return d$==null?dG(d9,d_(d9)):d$.$0;}function dI(d9){var d_;d_=null;return c7.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dJ(d9,d_){c7.set_Item(d9,d_);return d_;}function dK(d9,d_){var d$;d$=dI(d9);return d$==null?dJ(d9,d_(d9)):d$.$0;}function dL(d9){var d_;d_=null;return c_.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dM(d9,d_){c_.set_Item(d9,d_);return d_;}function dN(d9,d_){var d$;d$=dL(d9);return d$==null?dM(d9,d_(d9)):d$.$0;}function dO(d9){var d_;d_=null;return db.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dP(d9,d_){db.set_Item(d9,d_);return d_;}function dQ(d9,d_){var d$;d$=dO(d9);return d$==null?dP(d9,d_(d9)):d$.$0;}function dR(d9){var d_;d_=null;return de.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dS(d9,d_){de.set_Item(d9,d_);return d_;}function dT(d9,d_){var d$;d$=dR(d9);return d$==null?dS(d9,d_(d9)):d$.$0;}function dU(d9){var d_;d_=null;return dh.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dV(d9,d_){dh.set_Item(d9,d_);return d_;}function dW(d9,d_){var d$;d$=dU(d9);return d$==null?dV(d9,d_(d9)):d$.$0;}function dX(d9){var d_;d_=null;return dk.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function dY(d9,d_){dk.set_Item(d9,d_);return d_;}function dZ(d9,d_){var d$;d$=dX(d9);return d$==null?dY(d9,d_(d9)):d$.$0;}function d0(d9){var d_;d_=null;return dn.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function d1(d9,d_){dn.set_Item(d9,d_);return d_;}function d2(d9,d_){var d$;d$=d0(d9);return d$==null?d1(d9,d_(d9)):d$.$0;}function d3(d9){var d_;d_=null;return dq.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function d4(d9,d_){dq.set_Item(d9,d_);return d_;}function d5(d9,d_){var d$;d$=d3(d9);return d$==null?d4(d9,d_(d9)):d$.$0;}function d6(d9){var d_;d_=null;return dt.TryGetValue(d9,{get:function(){return d_;},set:function(d$){d_=d$;}})?{$:1,$0:d_}:null;}function d7(d9,d_){dt.set_Item(d9,d_);return d_;}function d8(d9,d_){var d$;d$=d6(d9);return d$==null?d7(d9,d_(d9)):d$.$0;}bi.state=new bD.New();bi.unindentStr=function(d9){return dw(_0.unindent(d9));};bi.skipLastLine=(cT=function(d9){return dy(dx(d9));},function(d9){return dz(cT(d9));});bi.parseDateO2=(cU=B.tryParseWith(function(d9){var d_,d$;d_=0;return[(d$=bZ.TryParse(d9),d$!=null&&d$.$==1&&(d_=d$.$0,true)),d_];}),function(d9){return cU(dA(d9));});bi.parseDateO=B.tryParseWith(function(d9){var d_,d$;d_=0;return[(d$=bZ.TryParse(d9),d$!=null&&d$.$==1&&(d_=d$.$0,true)),d_];});bi.parseIntO=B.tryParseWith(function(d9){var d_;d_=0;return[bE.TryParseInt32(d9,{get:function(){return d_;},set:function(d$){d_=d$;}}),d_];});bi.parseInt64O=B.tryParseWith(function(d9){var d_;d_=0;return[bE.TryParseInt64(d9,{get:function(){return d_;},set:function(d$){d_=d$;}}),d_];});bi.parseSingleO=B.tryParseWith(function(d9){var d_,d$;d_=0;return[(d$=a.Number(d9),a.isNaN(d$)?false:(d_=d$,true)),d_];});bi.parseDoubleO=B.tryParseWith(function(d9){var d_,d$;d_=0;return[(d$=a.Number(d9),a.isNaN(d$)?false:(d_=d$,true)),d_];});bi.parseGuidO=B.tryParseWith(function(d9){var d_;d_=null;return[Z.TryParse(d9,{get:function(){return d_;},set:function(d$){d_=d$;}}),d_];});bi["|Date|_|"]=B.parseDateO();bi["|Int|_|"]=B.parseIntO();bi["|Int64|_|"]=B.parseInt64O();bi["|Single|_|"]=B.parseSingleO();bi["|Double|_|"]=B.parseDoubleO();bi["|Guid|_|"]=B.parseGuidO();bi.counter=1;bi.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bi.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";bi.observers=X.Empty;bi.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";bi.init=J.Create(function(){var d9;d9=new bH.New();bF.defineWebComponent("wcomp-tabstrip",bH.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});bi.layoutHorizontal=cN.Curried(function(d9,d_,d$,ea,eb){return R.get_Empty();},5);bi.layoutVertical=cN.Curried(function(d9,d_,d$,ea,eb){return R.get_Empty();},5);bi.plugIns=new I.New$1(function(d9){return d9.plgName;});bi.mainDocV=y.Create$1("AppFramework.AppFwkClient");bi.TemplateFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\website\\AppFramework.html";bi.selectionPlugInO=y.Create$1({$:1,$0:"AppFramework"});bi.currentPlugInW=(cV=G.selectionPlugInO().get_View(),v.Map2(function(d9,d_){return(dB(d9))(d_);},G.plugIns().v,cV));bi.currentPlugInV=new bh.New(G.currentPlugInW(),function(d9){G.plugIns().Append(d9);});bi.AppFwkClient=J.Create(function(){var d9,d_,d$,ea,eb,ec,ed,ee,ef;return(d9=(d_=G.renderQueries(),(d$=G.renderActions(),(ea=G.renderDocs(),(eb=G.renderViews(),(ec=G.renderVars(),(ed=G.renderPlugIns(),bM.Make().WithHole({$:0,$0:"plugins",$1:ed})).WithHole({$:2,$0:"pluginname",$1:v.Map(function(eg){return eg.plgName;},G.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:ec})).WithHole({$:0,$0:"views",$1:eb})).WithHole({$:0,$0:"docs",$1:ea})).WithHole({$:0,$0:"actions",$1:d$})).WithHole({$:0,$0:"queries",$1:d_})),(ee=bN.CompleteHoles(d9.k,d9.h,[]),(ef=new bL.New(ee[1],bw.appfwkclient(ee[0])),(d9.i=ef,ef)))).get_Doc();});bi.plugin=new bc.New();cW=(cX=G.plugin(),cX.AddAct(cX.AddAct2(cX.AddDoc3(cX.AddDoc3(cX.AddDoc2(cX.AddDoc(cX.AddVar(cX.Name(cX.Yield(),"AppFramework"),"mainDocV",G.mainDocV()),"AppFwkClient",G.AppFwkClient()),"TrigAction",function(d9){return function(d_){return G.trigAct(d9,d_);};},"Trigger","Action"),"InputFile",cN.Curried3(G.inputFile),"attrs","Label","Action"),"InputLabel",cN.Curried3(G.inputLabel),"attrs","Label","Var"),"SetVar",function(d9){return function(d_){return G.setVar(d9,d_);};},"Var","Value"),"Hello",function(){self.alert("Hello!");}));G.plugIns().Append(cW);cY=(cZ=G.plugin(),cZ.AddQry(cZ.AddAct(cZ.AddAct2(cZ.AddDoc3(cZ.AddDoc3(cZ.AddDoc2(cZ.Name(cZ.Yield(),"AF"),"TrigAction",function(d9){return function(d_){return G.trigAct(d9,d_);};},"Trigger","Action"),"InputFile",cN.Curried3(G.inputFile),"attrs","Label","Action"),"InputLabel",cN.Curried3(G.inputLabel),"attrs","Label","Var"),"SetVar",function(d9){return function(d_){return G.setVar(d9,d_);};},"Var","Value"),"Hello",function(){self.alert("Hello!");}),"getDocNames",function(){return bj.ofSeq(L.collect(function(d9){return L.map(function(d_){return d9.plgName+"."+d_.docName;},d9.plgDocs);},(G.plugIns())["var"].Get()));}));G.plugIns().Append(cY);bi.getMainDoc=J.Create(function(){bO.init(cN.Curried(G.horizontal,5),cN.Curried(G.vertical,5));bG.init().f();return G.mainDoc();});bi.splitName=G.splitName;bi.currentViewTriggger=G.mainDocV().get_View();bi.createSplitterM=(c0=(c1=new br.New$5(),[[dC,function(d9){return function(d_){return dE(d9,d_);};}],function(){c1.Clear();}]),(c2=c0[0][1],[function(d9){return(c2(d9))(function(d_){return K.createSplitter(d_[0],d_[1],d_[2],d_[3],d_[4]);});},c0[1]]))[0];bi.createButtonM=(c3=(c4=new br.New$5(),[[dF,function(d9){return function(d_){return dH(d9,d_);};}],function(){c4.Clear();}]),(c5=c3[0][1],[function(d9){return(c5(d9))(function(d_){return K.createButton(d_[0],d_[1],d_[2],d_[3],d_[4]);});},c3[1]]))[0];bi.createInputM=(c6=(c7=new br.New$5(),[[dI,function(d9){return function(d_){return dK(d9,d_);};}],function(){c7.Clear();}]),(c8=c6[0][1],[function(d9){return(c8(d9))(function(d_){return K.createInput(d_[0],d_[1],d_[2],d_[3]);});},c6[1]]))[0];bi.createTextAreaM=(c9=(c_=new br.New$5(),[[dL,function(d9){return function(d_){return dN(d9,d_);};}],function(){c_.Clear();}]),(c$=c9[0][1],[function(d9){return(c$(d9))(function(d_){return K.createTextArea(d_[0],d_[1],d_[2],d_[3]);});},c9[1]]))[0];bi.createElementM=(da=(db=new br.New$5(),[[dO,function(d9){return function(d_){return dQ(d9,d_);};}],function(){db.Clear();}]),(dc=da[0][1],[function(d9){return(dc(d9))(function(d_){return K.createElement(d_[0],d_[1],d_[2],d_[3],d_[4]);});},da[1]]))[0];bi.createDocM=(dd=(de=new br.New$5(),[[dR,function(d9){return function(d_){return dT(d9,d_);};}],function(){de.Clear();}]),(df=dd[0][1],[function(d9){return(df(d9))(function(d_){return K.createDoc(d_[0],d_[1],d_[2],d_[3]);});},dd[1]]))[0];bi.createTemplateM=(dg=(dh=new br.New$5(),[[dU,function(d9){return function(d_){return dW(d9,d_);};}],function(){dh.Clear();}]),(di=dg[0][1],[function(d9){return(di(d9))(function(d_){return K.createTemplate(d_[0],d_[1],d_[2],d_[3],d_[4]);});},dg[1]]))[0];bi.createConcatM=(dj=(dk=new br.New$5(),[[dX,function(d9){return function(d_){return dZ(d9,d_);};}],function(){dk.Clear();}]),(dl=dj[0][1],[function(d9){return(dl(d9))(function(d_){return K.createConcat(d_[0],d_[1],d_[2]);});},dj[1]]))[0];bi.createVarM=(dm=(dn=new br.New$5(),[[d0,function(d9){return function(d_){return d2(d9,d_);};}],function(){dn.Clear();}]),(_do=dm[0][1],[function(d9){return(_do(d9))(function(d_){return K.createVar(d_[0],d_[1],d_[2]);});},dm[1]]))[0];bi.createViewM=(dp=(dq=new br.New$5(),[[d3,function(d9){return function(d_){return d5(d9,d_);};}],function(){dq.Clear();}]),(dr=dp[0][1],[function(d9){return(dr(d9))(function(d_){return K.createView(d_[0],d_[1],d_[2]);});},dp[1]]))[0];bi.createActionM=(ds=(dt=new br.New$5(),[[d6,function(d9){return function(d_){return d8(d9,d_);};}],function(){dt.Clear();}]),(du=ds[0][1],[function(d9){return(du(d9))(function(d_){return K.createAction(d_[0],d_[1],d_[2],d_[3]);});},ds[1]]))[0];dv=G.tryGetPlugIn("AppFramework");dv==null?void 0:dv.$0.plgActions.Append(G.newActF("AddLayout",{$:2,$0:function(d9){return function(d_){return K.addNewLayout(d9,d_);};},$1:"[Name]",$2:"[Layout]"}));};bj.get=function(cT,cU){bj.checkBounds(cT,cU);return cT[cU];};bj.length=function(cT){return cT.dims===2?cT.length*cT.length:cT.length;};bj.checkBounds=function(cT,cU){if(cU<0||cU>=cT.length)z.FailWith("Index was outside the bounds of the array.");};bj.set=function(cT,cU,cV){bj.checkBounds(cT,cU);cT[cU]=cV;};bj.map=function(cT,cU){var cV,cW,cX;cV=new a.Array(cU.length);for(cW=0,cX=cU.length-1;cW<=cX;cW++)cV[cW]=cT(cU[cW]);return cV;};bj.tryFindIndex=function(cT,cU){var cV,cW;cV=null;cW=0;while(cW<cU.length&&cV==null){cT(cU[cW])?cV={$:1,$0:cW}:void 0;cW=cW+1;}return cV;};bj.exists=function(cT,cU){var cV,cW,cX,cY;cV=false;cW=0;cY=bj.length(cU);while(!cV&&cW<cY)if(cT(cU[cW]))cV=true;else cW=cW+1;return cV;};bj.filter=function(cT,cU){var cV,cW,cX;cV=[];for(cW=0,cX=cU.length-1;cW<=cX;cW++)if(cT(cU[cW]))cV.push(cU[cW]);return cV;};bj.ofList=function(cT){var cU,cV;cV=[];cU=cT;while(!(cU.$==0)){cV.push(W.head(cU));cU=W.tail(cU);}return cV;};bj.tryPick=function(cT,cU){var cV,cW,cX;cV=null;cW=0;while(cW<cU.length&&cV==null){cX=cT(cU[cW]);cX!=null&&cX.$==1?cV=cX:void 0;cW=cW+1;}return cV;};bj.tryFind=function(cT,cU){var cV,cW;cV=null;cW=0;while(cW<cU.length&&cV==null){cT(cU[cW])?cV={$:1,$0:cU[cW]}:void 0;cW=cW+1;}return cV;};bj.ofSeq=function(cT){var cU,cV;if(cT instanceof a.Array)return cT.slice();else if(cT instanceof X)return bj.ofList(cT);else{cU=[];cV=bk.Get(cT);try{while(cV.MoveNext())cU.push(cV.Current());return cU;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}}};bj.choose=function(cT,cU){var cV,cW,cX,cY;cV=[];for(cW=0,cX=cU.length-1;cW<=cX;cW++){cY=cT(cU[cW]);cY==null?void 0:cV.push(cY.$0);}return cV;};bj.pick=function(cT,cU){var cV;cV=bj.tryPick(cT,cU);return cV==null?z.FailWith("KeyNotFoundException"):cV.$0;};bj.concat=function(cT){return a.Array.prototype.concat.apply([],bj.ofSeq(cT));};bj.foldBack=function(cT,cU,cV){var cW,cX,cY,cZ,c0;cW=cV;cY=cU.length;for(cZ=1,c0=cY;cZ<=c0;cZ++)cW=cT(cU[cY-cZ],cW);return cW;};bj.sortInPlace=function(cT){bj.mapInPlace(function(cU){return cU[0];},bj.mapiInPlace(function(cU,cV){return[cV,cU];},cT).sort(U.Compare));};bj.find=function(cT,cU){var cV;cV=bj.tryFind(cT,cU);return cV==null?z.FailWith("KeyNotFoundException"):cV.$0;};bj.iter=function(cT,cU){var cV,cW;for(cV=0,cW=cU.length-1;cV<=cW;cV++)cT(cU[cV]);};bj.create=function(cT,cU){var cV,cW,cX;cV=new a.Array(cT);for(cW=0,cX=cT-1;cW<=cX;cW++)cV[cW]=cU;return cV;};bj.sortInPlaceBy=function(cT,cU){bj.mapInPlace(function(cV){return cV[0];},bj.mapiInPlace(function(cV,cW){return[cW,[cT(cW),cV]];},cU).sort(function(cV,cW){return U.Compare(cV[1],cW[1]);}));};bj.forall=function(cT,cU){var cV,cW,cX,cY;cV=true;cW=0;cY=bj.length(cU);while(cV&&cW<cY)if(cT(cU[cW]))cW=cW+1;else cV=false;return cV;};bj.init=function(cT,cU){var cV,cW,cX;cT<0?z.FailWith("Negative size given."):null;cV=new a.Array(cT);for(cW=0,cX=cT-1;cW<=cX;cW++)cV[cW]=cU(cW);return cV;};bk.Get=function(cT){return cT instanceof a.Array?bk.ArrayEnumerator(cT):U.Equals(typeof cT,"string")?bk.StringEnumerator(cT):cT.GetEnumerator();};bk.ArrayEnumerator=function(cT){return new bp.New(0,null,function(cU){var cV;cV=cU.s;return cV<bj.length(cT)&&(cU.c=bj.get(cT,cV),cU.s=cV+1,true);},void 0);};bk.StringEnumerator=function(cT){return new bp.New(0,null,function(cU){var cV;cV=cU.s;return cV<cT.length&&(cU.c=cT[cV],cU.s=cV+1,true);},void 0);};bk.Get0=function(cT){return cT instanceof a.Array?bk.ArrayEnumerator(cT):U.Equals(typeof cT,"string")?bk.StringEnumerator(cT):"GetEnumerator0"in cT?cT.GetEnumerator0():cT.GetEnumerator();};bm.New=function(cT,cU,cV){return{c:cT,v:cU,f:cV};};bo=bn.List=cN.Class({GetEnumerator:function(){return bk.Get(this);},GetEnumerator0:function(){return bk.Get0(this);}},null,bo);bp=bk.T=cN.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},h,bp);bp.New=cN.Ctor(function(cT,cU,cV,cW){h.New.call(this);this.s=cT;this.c=cU;this.n=cV;this.d=cW;},bp);L.tryHead=function(cT){var cU;cU=bk.Get(cT);try{return cU.MoveNext()?{$:1,$0:cU.Current()}:null;}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}};bj.groupBy=function(cT,cU){var cV,cW,cX,cY,cZ,c0;cV=new br.New$5();cW=[];for(cX=0,cY=bj.length(cU)-1;cX<=cY;cX++){cZ=cU[cX];c0=cT(cZ);cV.ContainsKey(c0)?cV.get_Item(c0).push(cZ):(cW.push(c0),cV.Add(c0,[cZ]));}bj.mapInPlace(function(c1){return[c1,cV.get_Item(c1)];},cW);return cW;};L.last=function(cT){var cU,cV;cU=bk.Get(cT);try{if(!cU.MoveNext())cV=L.insufficient();else{while(cU.MoveNext());cV=cU.Current();}return cV;}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}};bj.mapInPlace=function(cT,cU){var cV,cW;for(cV=0,cW=cU.length-1;cV<=cW;cV++)cU[cV]=cT(cU[cV]);};L.insufficient=function(){return z.FailWith("The input sequence has an insufficient number of elements.");};bj.mapiInPlace=function(cT,cU){var cV,cW;for(cV=0,cW=cU.length-1;cV<=cW;cV++)cU[cV]=cT(cV,cU[cV]);return cU;};L.nonNegative=function(){return z.FailWith("The input must be non-negative.");};L.tryItem=function(cT,cU){var cV,cW,cX;if(cT<0)return null;else{cV=0;cW=bk.Get(cU);try{cX=true;while(cX&&cV<=cT)if(cW.MoveNext())cV=cV+1;else cX=false;return cX?{$:1,$0:cW.Current()}:null;}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}}};bq.ofSeqNonCopying=function(cT){var cU,cV;if(cT instanceof a.Array)return cT;else if(cT instanceof X)return bj.ofList(cT);else if(cT===null)return[];else{cU=[];cV=bk.Get(cT);try{while(cV.MoveNext())cU.push(cV.Current());return cU;}finally{if(typeof cV=="object"&&"Dispose"in cV)cV.Dispose();}}};bq.TreeReduce=function(cT,cU,cV){var cW;function cX(cY,cZ){var c0,c1;return cZ<=0?cT:cZ===1&&(cY>=0&&cY<cW)?bj.get(cV,cY):(c1=cZ/2>>0,cU(cX(cY,c1),cX(cY+c1,cZ-c1)));}cW=bj.length(cV);return cX(0,cW);};bq.mapInPlace=function(cT,cU){var cV,cW;for(cV=0,cW=cU.length-1;cV<=cW;cV++)cU[cV]=cT(cU[cV]);return cU;};bq.MapTreeReduce=function(cT,cU,cV,cW){var cX;function cY(cZ,c0){var c1,c2;return c0<=0?cU:c0===1&&(cZ>=0&&cZ<cX)?cT(bj.get(cW,cZ)):(c2=c0/2>>0,cV(cY(cZ,c2),cY(cZ+c2,c0-c2)));}cX=bj.length(cW);return cY(0,cX);};br=bn.Dictionary=cN.Class({TryGetValue:function(cT,cU){var cV,cW,cX;cV=this;cW=this.data[this.hash(cT)];return cW==null?false:(cX=bj.tryPick(function(cY){var cZ;cZ=z.KeyValue(cY);return cV.equals.apply(null,[cZ[0],cT])?{$:1,$0:cZ[1]}:null;},cW),cX!=null&&cX.$==1&&(cU.set(cX.$0),true));},Add:function(cT,cU){this.add(cT,cU);},ContainsKey:function(cT){var cU,cV;cU=this;cV=this.data[this.hash(cT)];return cV==null?false:bj.exists(function(cW){return cU.equals.apply(null,[(z.KeyValue(cW))[0],cT]);},cV);},get_Item:function(cT){return this.get(cT);},set_Item:function(cT,cU){this.set(cT,cU);},Remove:function(cT){return this.remove(cT);},add:function(cT,cU){var cV,cW,cX;cV=this;cW=this.hash(cT);cX=this.data[cW];cX==null?(this.count=this.count+1,this.data[cW]=new a.Array({K:cT,V:cU})):(bj.exists(function(cY){return cV.equals.apply(null,[(z.KeyValue(cY))[0],cT]);},cX)?bT.alreadyAdded():void 0,this.count=this.count+1,cX.push({K:cT,V:cU}));},get:function(cT){var cU,cV;cU=this;cV=this.data[this.hash(cT)];return cV==null?bT.notPresent():bj.pick(function(cW){var cX;cX=z.KeyValue(cW);return cU.equals.apply(null,[cX[0],cT])?{$:1,$0:cX[1]}:null;},cV);},set:function(cT,cU){var cV,cW,cX,cY;cV=this;cW=this.hash(cT);cX=this.data[cW];cX==null?(this.count=this.count+1,this.data[cW]=new a.Array({K:cT,V:cU})):(cY=bj.tryFindIndex(function(cZ){return cV.equals.apply(null,[(z.KeyValue(cZ))[0],cT]);},cX),cY==null?(this.count=this.count+1,cX.push({K:cT,V:cU})):cX[cY.$0]={K:cT,V:cU});},remove:function(cT){var cU,cV,cW,cX;cU=this;cV=this.hash(cT);cW=this.data[cV];return cW==null?false:(cX=bj.filter(function(cY){return!cU.equals.apply(null,[(z.KeyValue(cY))[0],cT]);},cW),bj.length(cX)<cW.length&&(this.count=this.count-1,this.data[cV]=cX,true));},get_Keys:function(){return new ci.New(this);},Clear:function(){this.data=[];this.count=0;},GetEnumerator:function(){return bk.Get0(this);},GetEnumerator0:function(){return bk.Get0(bj.concat($.GetFieldValues(this.data)));}},h,br);br.New$5=cN.Ctor(function(){br.New$6.call(this,[],U.Equals,U.Hash);},br);br.New$6=cN.Ctor(function(cT,cU,cV){var cW,cX;h.New.call(this);this.equals=cU;this.hash=cV;this.count=0;this.data=[];cW=bk.Get(cT);try{while(cW.MoveNext()){cX=cW.Current();this.set(cX.K,cX.V);}}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}},br);bd.Obsolete=function(cT){var cU,cV,cW,cX,cY;cV=cT.s;if(cV==null||(cV!=null&&cV.$==2?(cU=cV.$1,false):cV!=null&&cV.$==3?(cU=cV.$1,false):true))void 0;else{cT.s=null;for(cW=0,cX=bj.length(cU)-1;cW<=cX;cW++){cY=bj.get(cU,cW);typeof cY=="object"?function(cZ){bd.Obsolete(cZ);}(cY):cY();}}};bd.New=function(cT){return{s:cT};};bs.refreshLM=function(cT,cU){var cV;cT.AppendMany(cU);cV=new bS.New(L.map(cT.key,cU));L.iter(function(cW){if(!cV.Contains(cT.key(cW)))cT.RemoveByKey(cT.key(cW));},L.cache(cT));};bt=u.ConcreteVar=cN.Class({Set:function(cT){if(this.isConst)(function(cU){return cU("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cU){cQ.log(cU);}));else{bd.Obsolete(this.snap);this.current=cT;this.snap=bd.New({$:2,$0:cT,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cT){this.Set(cT(this.Get()));},UpdateMaybe:function(cT){var cU;cU=cT(this.Get());cU!=null&&cU.$==1?this.Set(cU.$0):void 0;}},C,bt);bt.New=cN.Ctor(function(cT,cU,cV){var cW;cW=this;C.New.call(this);this.isConst=cT;this.current=cV;this.snap=cU;this.view=function(){return cW.snap;};this.id=bg.Int();},bt);bu.InMemory=function(cT){return new bU.New(cT);};bv.p$1=function(cT){return"{"+("docName = "+D.prettyPrint(cT.docName))+"; "+("docDoc = "+bx.p$2(cT.docDoc))+"}";};bw.appfwkclient=function(cT){bw.fixedsplitterhor();bw.fixedsplitterver();bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},cT):void 0;};bv.p=function(cT){return"{"+("actName = "+D.prettyPrint(cT.actName))+"; "+("actFunction = "+bx.p(cT.actFunction))+"; "+("actEnabled = "+bx.p$1(cT.actEnabled))+"}";};bx.p$2=function(cT){return cT.$==5?"FunDoc5 (<fun>, "+D.prettyPrint(cT.$1)+", "+D.prettyPrint(cT.$2)+", "+D.prettyPrint(cT.$3)+", "+D.prettyPrint(cT.$4)+", "+D.prettyPrint(cT.$5)+")":cT.$==4?"FunDoc4 (<fun>, "+D.prettyPrint(cT.$1)+", "+D.prettyPrint(cT.$2)+", "+D.prettyPrint(cT.$3)+", "+D.prettyPrint(cT.$4)+")":cT.$==3?"FunDoc3 (<fun>, "+D.prettyPrint(cT.$1)+", "+D.prettyPrint(cT.$2)+", "+D.prettyPrint(cT.$3)+")":cT.$==2?"FunDoc2 (<fun>, "+D.prettyPrint(cT.$1)+", "+D.prettyPrint(cT.$2)+")":cT.$==1?"FunDoc1 (<fun>, "+D.prettyPrint(cT.$1)+")":"LazyDoc "+D.prettyPrint(cT.$0);};bw.tile=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"tile"},cT):void 0;};bw.namevalueinput=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},cT):void 0;};bw.namevalue=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"namevalue"},cT):void 0;};bw.action=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"action"},cT):void 0;};bw.actiondisabled=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},cT):void 0;};bw.fixedsplitterhor=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},cT):void 0;};bw.fixedsplitterver=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},cT):void 0;};bw.wcompsplitterhor=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},cT):void 0;};bw.wcompsplitterver=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},cT):void 0;};bw.appframework=function(cT){bz.LoadLocalTemplates("appframework");return cT?bz.NamedTemplate("appframework",{$:1,$0:"appframework"},cT):void 0;};bx.p$4=function(cT){return cT.$==1?"UnQuoted "+D.prettyPrint(cT.$0):"Quoted "+D.prettyPrint(cT.$0);};bx.p=function(cT){return cT.$==2?"FunAct2 (<fun>, "+D.prettyPrint(cT.$1)+", "+D.prettyPrint(cT.$2)+")":cT.$==1?"FunAct1 (<fun>, "+D.prettyPrint(cT.$1)+")":"FunAct0 <fun>";};bx.p$1=function(cT){return"View <fun>";};bz.LoadLocalTemplates=function(cT){!bz.LocalTemplatesLoaded()?(bz.set_LocalTemplatesLoaded(true),bz.LoadNestedTemplates(self.document.body,"")):void 0;bz.LoadedTemplates().set_Item(cT,bz.LoadedTemplateFile(""));};bz.LocalTemplatesLoaded=function(){b6.$cctor();return b6.LocalTemplatesLoaded;};bz.set_LocalTemplatesLoaded=function(cT){b6.$cctor();b6.LocalTemplatesLoaded=cT;};bz.LoadNestedTemplates=function(cT,cU){var cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9;function cV(c_){var c$,da;if(!cW.ContainsKey(c_)){c$=(da=null,[cX.TryGetValue(c_,{get:function(){return da;},set:function(db){da=db;}}),da]);c$[0]?(c9.Add(c_),cX.Remove(c_),bz.PrepareTemplateStrict(cU,{$:1,$0:c_},c$[1][0],{$:1,$0:c$[1][1]},{$:1,$0:cV})):cQ.warn(c9.Contains(c_)?"Encountered loop when instantiating "+c_:"Local template does not exist: "+c_);}}cW=bz.LoadedTemplateFile(cU);cX=new br.New$5();cY=cT.querySelectorAll("[ws-template]");for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++){c1=cY[cZ];c2=c1.getAttribute("ws-template").toLowerCase();c1.removeAttribute("ws-template");cX.set_Item(c2,[[c1],bz.FakeRootSingle(c1)]);}c3=cT.querySelectorAll("[ws-children-template]");for(c4=0,c5=c3.length-1;c4<=c5;c4++){c6=c3[c4];c7=c6.getAttribute("ws-children-template").toLowerCase();c6.removeAttribute("ws-children-template");cX.set_Item(c7,(c8=bB.ChildrenArray(c6),[c8,bz.FakeRoot(c8)]));}c9=new b0.New$3();while(cX.count>0)cV(L.head(cX.get_Keys()));};bz.LoadedTemplates=function(){b6.$cctor();return b6.LoadedTemplates;};bz.LoadedTemplateFile=function(cT){var cU,cV,cW;cU=(cV=null,[bz.LoadedTemplates().TryGetValue(cT,{get:function(){return cV;},set:function(cX){cV=cX;}}),cV]);return cU[0]?cU[1]:(cW=new br.New$5(),(bz.LoadedTemplates().set_Item(cT,cW),cW));};bz.FakeRootSingle=function(cT){var cU,cV,cW;cT.removeAttribute("ws-template");cU=cT.getAttribute("ws-replace");cU===null?void 0:(cT.removeAttribute("ws-replace"),cV=cT.parentNode,U.Equals(cV,null)?void 0:(cW=self.document.createElement(cT.tagName),cW.setAttribute("ws-replace",cU),cV.replaceChild(cW,cT)));return bz.FakeRoot([cT]);};bz.FakeRoot=function(cT){var cU,cV,cW;cU=self.document.createElement("div");for(cV=0,cW=cT.length-1;cV<=cW;cV++)cU.appendChild(bj.get(cT,cV));return cU;};bz.PrepareTemplateStrict=function(cT,cU,cV,cW,cX){var cY,cZ;function c0(c5,c6){var c7,c8,c9,c_,c$,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv;function da(dw){}while(true)switch(c5){case 0:if(c6!==null){c7=c6.nextSibling;if(U.Equals(c6.nodeType,_8.TEXT_NODE))ch.convertTextNode(c6);else if(U.Equals(c6.nodeType,_8.ELEMENT_NODE))c2(c6);c6=c7;}else return null;break;case 1:db=_1.string(c6.nodeName,{$:1,$0:3},null).toLowerCase();dc=(c8=db.indexOf("."),c8===-1?[cT,db]:[_1.string(db,null,{$:1,$0:c8-1}),_1.string(db,{$:1,$0:c8+1},null)]);dd=dc[1];de=dc[0];if(de!==""&&!bz.LoadedTemplates().ContainsKey(de))return ch.failNotLoaded(dd);else{if(de===""&&cX!=null)cX.$0(dd);df=bz.LoadedTemplates().get_Item(de);if(!df.ContainsKey(dd))return ch.failNotLoaded(dd);else{dg=df.get_Item(dd);dh=dg.cloneNode(true);di=new b0.New$3();dj=new br.New$5();dk=c6.attributes;for(dl=0,dm=dk.length-1;dl<=dm;dl++){dn=dk.item(dl).name.toLowerCase();dj.set_Item(dn,(_do=dk.item(dl).nodeValue,_do===""?dn:_do.toLowerCase()));!di.Add(dn)?cQ.warn("Hole mapped twice",dn):void 0;}for(dp=0,dq=c6.childNodes.length-1;dp<=dq;dp++){dr=c6.childNodes[dp];U.Equals(dr.nodeType,_8.ELEMENT_NODE)?!di.Add(dr.nodeName.toLowerCase())?cQ.warn("Hole filled twice",dd):void 0:void 0;}ds=c6.childNodes.length===1&&U.Equals(c6.firstChild.nodeType,_8.TEXT_NODE);if(ds){c_=ch.fillTextHole(dh,c6.firstChild.textContent,dd);((function(dw){return function(dx){if(dx!=null)dw(dx.$0);};}((c$=function(dw){return function(dx){return dw.Add(dx);};}(di),function(dw){return da(c$(dw));})))(c_));}ch.removeHolesExcept(dh,di);if(!ds){for(dt=0,du=c6.childNodes.length-1;dt<=du;dt++){dv=c6.childNodes[dt];U.Equals(dv.nodeType,_8.ELEMENT_NODE)?dv.hasAttributes()?ch.fillInstanceAttrs(dh,dv):c1(dh,dv):void 0;}}ch.mapHoles(dh,dj);ch.fill(dh,c6.parentNode,c6);c6.parentNode.removeChild(c6);return;}}break;}}function c1(c5,c6){var c7,c9,c_;function c8(c$,da){var db,dc,dd;if(c9==="title"&&c6.hasChildNodes()){db=cR.parseHTML(c6.textContent);c6.removeChild(c6.firstChild);for(dc=0,dd=db.length-1;dc<=dd;dc++)c6.appendChild(bj.get(db,dc));}else null;c2(c6);return ch.fill(c6,c$,da);}c9=c6.nodeName.toLowerCase();bB.IterSelector(c5,"[ws-attr-holes]",function(c$){var da,db,dc,dd,de;da=_6.SplitChars(c$.getAttribute("ws-attr-holes"),[" "],1);for(db=0,dc=da.length-1;db<=dc;db++){dd=bj.get(da,db);c$.setAttribute(dd,(de=new a.RegExp("\\${"+c9+"}","ig"),c$.getAttribute(dd).replace(de,c6.textContent)));}});c_=c5.querySelector("[ws-hole="+c9+"]");if(U.Equals(c_,null)){c7=c5.querySelector("[ws-replace="+c9+"]");return U.Equals(c7,null)?null:(c8(c7.parentNode,c7),void c7.parentNode.removeChild(c7));}else{while(c_.hasChildNodes())c_.removeChild(c_.lastChild);c_.removeAttribute("ws-hole");return c8(c_,null);}}function c2(c5){if(_6.StartsWith(c5.nodeName.toLowerCase(),"ws-"))c4(c5);else{ch.convertAttrs(c5);c3(c5.firstChild);}}function c3(c5){return c0(0,c5);}function c4(c5){return c0(1,c5);}cY=cW==null?bz.FakeRoot(cV):cW.$0;cZ=(cU==null?"":cU.$0).toLowerCase();bz.LoadedTemplateFile(cT).set_Item(cZ,cY);bj.length(cV)>0?(function(c5){var c6,c7,c8,c9;while(true){c6=c5.querySelector("[ws-template]");if(U.Equals(c6,null)){c7=c5.querySelector("[ws-children-template]");if(U.Equals(c7,null))return null;else{c8=c7.getAttribute("ws-children-template");c7.removeAttribute("ws-children-template");bz.PrepareTemplateStrict(cT,{$:1,$0:c8},bB.ChildrenArray(c7),null,null);c5=c5;}}else{c9=c6.getAttribute("ws-template");(bz.PrepareSingleTemplate(cT,{$:1,$0:c9},c6))(null);c5=c5;}}}(cY),c3(bj.get(cV,0))):void 0;};bz.NamedTemplate=function(cT,cU,cV){var cW,cX;cW=(cX=null,[bz.LoadedTemplateFile(cT).TryGetValue(cU==null?"":cU.$0,{get:function(){return cX;},set:function(cY){cX=cY;}}),cX]);return cW[0]?bz.ChildrenTemplate(cW[1].cloneNode(true),cV):(cQ.warn("Local template doesn't exist",cU),R.get_Empty());};bz.PrepareSingleTemplate=function(cT,cU,cV){var cW,cX,cY;cW=bz.FakeRootSingle(cV);cX=[cV];cY={$:1,$0:cW};return function(cZ){bz.PrepareTemplateStrict(cT,cU,cX,cY,cZ);};};bz.ChildrenTemplate=function(cT,cU){var cV,cW,cX,cY,cZ;cV=bz.InlineTemplate(cT,cU);cW=cV[1];cX=cV[0];cY=cX.Els;return!U.Equals(cY,null)&&cY.length===1&&(bj.get(cY,0)instanceof _8&&(U.Equals(bj.get(cY,0).nodeType,_8.ELEMENT_NODE)&&(cZ=bj.get(cY,0),true)))?bY.TreeNode(cX,cW):R.Mk({$:6,$0:cX},cW);};bz.TextHoleRE=function(){b6.$cctor();return b6.TextHoleRE;};bz.InlineTemplate=function(cT,cU){var cV,cW,cX,cY,c1,c2,c3,c4,c5,c6,c7;function cZ(c8,c9){var c_,c$,da;c_=bA.Insert(c8,c9);c2.push(bA.Updates(c_));c3.push([c8,c_]);c$=cN.GetOptional(c_.OnAfterRender);return c$==null?null:(da=c$.$0,void c4.push(function(){da(c8);}));}function c0(c8){var c9,c_;c9=(c_=null,[c5.TryGetValue(c8,{get:function(){return c_;},set:function(c$){c_=c$;}}),c_]);return c9[0]?c9[1].$==0?{$:1,$0:c9[1].$1}:c9[1].$==1?{$:1,$0:R.TextNode(c9[1].$1)}:c9[1].$==2?{$:1,$0:R.TextView(c9[1].$1)}:c9[1].$==8?{$:1,$0:R.TextView(c9[1].$1.get_View())}:c9[1].$==9?{$:1,$0:R.TextView(v.Map(a.String,c9[1].$1.get_View()))}:c9[1].$==10?{$:1,$0:R.TextView(v.Map(function(c$){return c$.get_Input();},c9[1].$1.get_View()))}:c9[1].$==11?{$:1,$0:R.TextView(v.Map(a.String,c9[1].$1.get_View()))}:c9[1].$==12?{$:1,$0:R.TextView(v.Map(function(c$){return c$.get_Input();},c9[1].$1.get_View()))}:c9[1].$==13?{$:1,$0:R.TextView(v.Map(a.String,c9[1].$1.get_View()))}:(cQ.warn("Content hole filled with attribute data",c8),null):null;}c1=[];c2=[];c3=[];c4=[];c5=new br.New$5();c6=bk.Get(cU);try{while(c6.MoveNext()){c7=c6.Current();c5.set_Item(c7.$0,c7);}}finally{if(typeof c6=="object"&&"Dispose"in c6)c6.Dispose();}cV=bB.ChildrenArray(cT);bB.IterSelector(cT,"[ws-hole]",function(c8){var c9,c_,c$;c$=c8.getAttribute("ws-hole");c8.removeAttribute("ws-hole");while(c8.hasChildNodes())c8.removeChild(c8.lastChild);c9=c0(c$);c9!=null&&c9.$==1?(c_=c9.$0,bV.LinkElement(c8,c_.docNode),c1.push(bQ.New(bA.Empty(c8),c_.docNode,null,c8,bg.Int(),null)),c2.push(c_.updates)):void 0;});bB.IterSelector(cT,"[ws-replace]",function(c8){var c9,c_,c$,da,db,dc;c9=c0(c8.getAttribute("ws-replace"));c9!=null&&c9.$==1?(c_=c9.$0,c$=c8.parentNode,da=self.document.createTextNode(""),c$.replaceChild(da,c8),db=bV.InsertBeforeDelim(da,c_.docNode),dc=bj.tryFindIndex(function(dd){return c8===dd;},cV),dc==null?void 0:bj.set(cV,dc.$0,c_.docNode),c1.push(bQ.New(bA.Empty(c$),c_.docNode,{$:1,$0:[db,da]},c$,bg.Int(),null)),c2.push(c_.updates)):void 0;});bB.IterSelector(cT,"[ws-attr]",function(c8){var c9,c_,c$;c9=c8.getAttribute("ws-attr");c8.removeAttribute("ws-attr");c_=(c$=null,[c5.TryGetValue(c9,{get:function(){return c$;},set:function(da){c$=da;}}),c$]);c_[0]?c_[1].$==3?cZ(c8,c_[1].$1):cQ.warn("Attribute hole filled with non-attribute data",c9):void 0;});bB.IterSelector(cT,"[ws-on]",function(c8){cZ(c8,be.Concat(bj.choose(function(c9){var c_,c$,da;c_=_6.SplitChars(c9,[":"],1);c$=(da=null,[c5.TryGetValue(bj.get(c_,1),{get:function(){return da;},set:function(db){da=db;}}),da]);return c$[0]?c$[1].$==4?{$:1,$0:bb.Handler(bj.get(c_,0),c$[1].$1)}:c$[1].$==5?{$:1,$0:be.Handler(bj.get(c_,0),c$[1].$2)}:(cQ.warn("Event hole on"+bj.get(c_,0)+" filled with non-event data",bj.get(c_,1)),null):null;},_6.SplitChars(c8.getAttribute("ws-on"),[" "],1))));c8.removeAttribute("ws-on");});bB.IterSelector(cT,"[ws-onafterrender]",function(c8){var c9,c_,c$;c9=c8.getAttribute("ws-onafterrender");c_=(c$=null,[c5.TryGetValue(c9,{get:function(){return c$;},set:function(da){c$=da;}}),c$]);c_[0]?c_[1].$==6?(c8.removeAttribute("ws-onafterrender"),cZ(c8,bb.OnAfterRender(c_[1].$1))):c_[1].$==7?(c8.removeAttribute("ws-onafterrender"),cZ(c8,bb.OnAfterRender(c_[1].$1))):cQ.warn("onafterrender hole filled with non-onafterrender data",c9):void 0;});bB.IterSelector(cT,"[ws-var]",function(c8){var c9,c_,c$;c9=c8.getAttribute("ws-var");c8.removeAttribute("ws-var");c_=(c$=null,[c5.TryGetValue(c9,{get:function(){return c$;},set:function(da){c$=da;}}),c$]);c_[0]?c_[1].$==8?cZ(c8,bb.Value(c_[1].$1)):c_[1].$==9?cZ(c8,bb.Checked(c_[1].$1)):c_[1].$==10?cZ(c8,bb.IntValue(c_[1].$1)):c_[1].$==11?cZ(c8,bb.IntValueUnchecked(c_[1].$1)):c_[1].$==12?cZ(c8,bb.FloatValue(c_[1].$1)):c_[1].$==13?cZ(c8,bb.FloatValueUnchecked(c_[1].$1)):cQ.warn("Var hole filled with non-Var data",c9):void 0;});bB.IterSelector(cT,"[ws-attr-holes]",function(c8){var c9,c_,c$,da;c9=new a.RegExp(bz.TextHoleRE(),"g");c_=_6.SplitChars(c8.getAttribute("ws-attr-holes"),[" "],1);c8.removeAttribute("ws-attr-holes");for(c$=0,da=c_.length-1;c$<=da;c$++)(function(){var db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn;dk=bj.get(c_,c$);dl=c8.getAttribute(dk);db=null;dc=0;dm=[];while(db=c9.exec(dl),db!==null){dn=_1.string(dl,{$:1,$0:dc},{$:1,$0:c9.lastIndex-bj.get(db,0).length-1});dc=c9.lastIndex;dm.push([dn,bj.get(db,1)]);}de=_1.string(dl,{$:1,$0:dc},null);c9.lastIndex=0;df=bj.foldBack(function(_do,dp){return(function(dq){var dr,ds;dr=dq[0];ds=dq[1];return function(dt){var du,dv,dw,dx,dy;du=dt[0];dv=dt[1];dw=(dx=(dy=null,[c5.TryGetValue(ds,{get:function(){return dy;},set:function(dz){dy=dz;}}),dy]),dx[0]?dx[1].$==1?{$:0,$0:dx[1].$1}:dx[1].$==2?{$:1,$0:dx[1].$1}:dx[1].$==8?{$:1,$0:dx[1].$1.get_View()}:dx[1].$==9?{$:1,$0:v.Map(a.String,dx[1].$1.get_View())}:dx[1].$==10?{$:1,$0:v.Map(function(dz){return dz.get_Input();},dx[1].$1.get_View())}:dx[1].$==11?{$:1,$0:v.Map(a.String,dx[1].$1.get_View())}:dx[1].$==12?{$:1,$0:v.Map(function(dz){return dz.get_Input();},dx[1].$1.get_View())}:dx[1].$==13?{$:1,$0:v.Map(a.String,dx[1].$1.get_View())}:(cQ.warn("Attribute value hole filled with non-text data",ds),{$:0,$0:""}):{$:0,$0:""});return dw.$==1?[dr,new X({$:1,$0:du===""?dw.$0:v.Map(function(dz){return dz+du;},dw.$0),$1:dv})]:[dr+dw.$0+du,dv];};}(_do))(dp);},dm,[de,X.Empty]);return cZ(c8,df[1].$==1?df[1].$1.$==1?df[1].$1.$1.$==1?df[1].$1.$1.$1.$==0?(dg=df[0],bb.Dynamic(dk,v.Map3(function(_do,dp,dq){return dg+_do+dp+dq;},df[1].$0,df[1].$1.$0,df[1].$1.$1.$0))):(dh=df[0],bb.Dynamic(dk,v.Map(function(_do){return dh+_6.concat("",_do);},v.Sequence(df[1])))):(di=df[0],bb.Dynamic(dk,v.Map2(function(_do,dp){return di+_do+dp;},df[1].$0,df[1].$1.$0))):df[0]===""?bb.Dynamic(dk,df[1].$0):(dj=df[0],bb.Dynamic(dk,v.Map(function(_do){return dj+_do;},df[1].$0))):be.Create(dk,df[0]));}());});return[cN.DeleteEmptyFields({Els:cV,Dirty:true,Holes:c1,Attrs:c3,Render:(cW=c4.length==0?null:{$:1,$0:function(c8){bj.iter(function(c9){c9(c8);},c4);}},cW?cW.$0:void 0),El:(cX=!U.Equals(cV,null)&&cV.length===1&&(bj.get(cV,0)instanceof _8&&(bj.get(cV,0)instanceof a.Element&&(cY=bj.get(cV,0),true)))?{$:1,$0:cY}:null,cX?cX.$0:void 0)},["Render","El"]),bq.TreeReduce(v.Const(),v.Map2Unit,c2)];};bA.Dynamic=function(cT,cU){return new be({$:1,$0:new bW.New(cT,cU)});};bA.Static=function(cT){return new be({$:3,$0:cT});};bA.Updates=function(cT){return bq.MapTreeReduce(function(cU){return cU.NChanged();},v.Const(),v.Map2Unit,cT.DynNodes);};bA.AppendTree=function(cT,cU){var cV;return cT===null?cU:cU===null?cT:(cV=new be({$:2,$0:cT,$1:cU}),(bA.SetFlags(cV,bA.Flags(cT)|bA.Flags(cU)),cV));};bA.EmptyAttr=function(){cm.$cctor();return cm.EmptyAttr;};bA.Insert=function(cT,cU){var cV,cW,cX;function cY(cZ){if(!(cZ===null))if(cZ!=null&&cZ.$==1)cV.push(cZ.$0);else if(cZ!=null&&cZ.$==2){cY(cZ.$0);cY(cZ.$1);}else if(cZ!=null&&cZ.$==3)cZ.$0(cT);else if(cZ!=null&&cZ.$==4)cW.push(cZ.$0);}cV=[];cW=[];cY(cU);cX=cV.slice(0);return b4.New(cT,bA.Flags(cU),cX,cW.length===0?null:{$:1,$0:function(cZ){L.iter(function(c0){c0(cZ);},cW);}});};bA.SetFlags=function(cT,cU){cT.flags=cU;};bA.Flags=function(cT){return cT!==null&&cT.hasOwnProperty("flags")?cT.flags:0;};bA.HasExitAnim=function(cT){var cU;cU=2;return(cT.DynFlags&cU)===cU;};bA.GetExitAnim=function(cT){return bA.GetAnim(cT,function(cU,cV){return cU.NGetExitAnim(cV);});};bA.HasEnterAnim=function(cT){var cU;cU=1;return(cT.DynFlags&cU)===cU;};bA.GetEnterAnim=function(cT){return bA.GetAnim(cT,function(cU,cV){return cU.NGetEnterAnim(cV);});};bA.HasChangeAnim=function(cT){var cU;cU=4;return(cT.DynFlags&cU)===cU;};bA.GetChangeAnim=function(cT){return bA.GetAnim(cT,function(cU,cV){return cU.NGetChangeAnim(cV);});};bA.Empty=function(cT){return b4.New(cT,0,[],null);};bA.GetAnim=function(cT,cU){return cj.Concat(bj.map(function(cV){return cU(cV,cT.DynElem);},cT.DynNodes));};bA.Sync=function(cT,cU){bj.iter(function(cV){cV.NSync(cT);},cU.DynNodes);};bB.SetStyle=function(cT,cU,cV){bB.SetProperty(cT.style,cU,cV);};bB.SetAttr=function(cT,cU,cV){cT.setAttribute(cU,cV);};bB.RemoveAttr=function(cT,cU){cT.removeAttribute(cU);};bB.CreateText=function(cT){return bB.Doc().createTextNode(cT);};bB.SetProperty=function(cT,cU,cV){return cT.setProperty(cU,cV);};bB.CreateElement=function(cT){return bB.Doc().createElement(cT);};bB.Doc=function(){b7.$cctor();return b7.Doc;};bB.ChildrenArray=function(cT){var cU,cV,cW;cU=[];for(cV=0,cW=cT.childNodes.length-1;cV<=cW;cV++)cU.push(cT.childNodes[cV]);return cU;};bB.IterSelector=function(cT,cU,cV){var cW,cX,cY;cW=cT.querySelectorAll(cU);for(cX=0,cY=cW.length-1;cX<=cY;cX++)cV(cW[cX]);};bB.RemoveClass=function(cT,cU){var cV;bB.setClass(cT,(cV=bB.clsRE(cU),bB.getClass(cT).replace(cV,function(cW,cX,cY){return cX===""||cY===""?"":" ";})));};bB.AddClass=function(cT,cU){var cV;cV=bB.getClass(cT);cV===""?bB.setClass(cT,cU):!bB.clsRE(cU).test(cV)?bB.setClass(cT,cV+" "+cU):void 0;};bB.InsertAt=function(cT,cU,cV){var cW;if(!(cV.parentNode===cT&&cU===(cW=cV.nextSibling,U.Equals(cW,null)?null:cW)))cT.insertBefore(cV,cU);};bB.setClass=function(cT,cU){if(cT instanceof a.SVGElement)cT.setAttribute("class",cU);else cT.className=cU;};bB.getClass=function(cT){return cT instanceof a.SVGElement?cT.getAttribute("class"):cT.className;};bB.clsRE=function(cT){return new a.RegExp("(\\s+|^)"+cT+"(?:\\s+"+cT+")*(\\s+|$)","g");};bB.RemoveNode=function(cT,cU){if(cU.parentNode===cT)cT.removeChild(cU);};bD=bC.CEBuilder=cN.Class({},h,bD);bD.New=cN.Ctor(function(){h.New.call(this);},bD);bE.TryParseInt32=function(cT,cU){return bE.TryParse(cT,-2147483648,2147483647,cU);};bE.TryParseInt64=function(cT,cU){return bE.TryParse(cT,-9223372036854775808,9223372036854775807,cU);};bH=bG.WcTabStripT=cN.Class({connectedCallback:function(){var cT,cU,cV,cW;function cX(){var cY,cZ,c0;cZ=!cU.hasAttribute("bottom");c0=W.ofSeq(L.delay(function(){return L.collect(function(c1){var c2;c2=cU.childNodes[c1-1];return U.Equals(c2.nodeType,_8.ELEMENT_NODE)?[[c2.hasAttribute("tabname")?c2.getAttribute("tabname"):(function(c3){return function(c4){return c3("Tab "+a.String(c4));};}(a.id))(c1),c2]]:[];},z.range(1,cU.childNodes.length));}));while(cW.childNodes.length>0)cW.removeChild(cW.lastChild);cY=bG.tabStrip(cT.selected,cZ,true,c0,R.Element("slot",X.Empty,X.Empty));bz.LoadLocalTemplates("");R.Run(cW,cY);}cT=this;!this.added?(cU=this,cV=cU.attachShadow({mode:"open"}),cW=self.document.createElement("div"),cV.appendChild(cW),cX(),cU.addEventListener("DOMSubtreeModified",A.delayed(50,cX)),this.added=true):void 0;}},h,bH);bH.Constructor=function(){var cT,cU;cT=(cU=cS.construct(self.HTMLElement,[],this.__proto__.constructor),cU);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(cT);return cT;};bH.New=cN.Ctor(function(){h.New.call(this);this.added=false;this.selected=y.Create$1(1);(function(cT){return cT("WcTabStripT initializer");}(function(cT){cQ.log(cT);}));},bH);bF.defineWebComponent=function(cT,cU,cV){try{cQ.log("defineWebComponent: "+cT);bP.setPrototypeOf(cV.prototype,self.HTMLElement.prototype);bP.setPrototypeOf(cV,self.HTMLElement);bP.setPrototypeOf(cU.prototype,cV.prototype);self.customElements.define(cT,cU);}catch(cW){(function(cX){return cX("Failed to define WebComponent. Not supported.");}(function(cX){cQ.log(cX);}));}};bL=bK.TemplateInstance=cN.Class({get_Doc:function(){return this.doc;}},h,bL);bL.New=cN.Ctor(function(cT,cU){h.New.call(this);this.doc=cU;this.allVars=cT.$==0?cT.$0:z.FailWith("Should not happen");},bL);bM=bK.ProviderBuilder=cN.Class({WithHole:function(cT){this.h.push(cT);return this;}},null,bM);bM.Make=function(){var cT;return bM.New(null,(cT=Z.NewGuid(),a.String(cT)),[]);};bM.New=function(cT,cU,cV){return new bM({i:cT,k:cU,h:cV});};bN.CompleteHoles=function(cT,cU,cV){var cX,cY,cZ,c0,c1,c2;function cW(c3,c4){var c5,c6,c7,c8;return cY.Contains(c3)?null:(c5=c4===0?(c6=y.Create$1(""),[{$:8,$0:c3,$1:c6},c6]):c4===1?(c7=y.Create$1(0),[{$:13,$0:c3,$1:c7},c7]):c4===2?(c8=y.Create$1(false),[{$:9,$0:c3,$1:c8},c8]):z.FailWith("Invalid value type"),(cX.set_Item(c3,c5[1]),{$:1,$0:c5[0]}));}cX=new br.New$5();cY=new b0.New$3();cZ=bk.Get(cU);try{while(cZ.MoveNext()){c0=cZ.Current();(c0.$==8?(c1=[c0.$0,b1.Box(c0.$1)],true):c0.$==11?(c1=[c0.$0,b1.Box(c0.$1)],true):c0.$==10?(c1=[c0.$0,b1.Box(c0.$1)],true):c0.$==13?(c1=[c0.$0,b1.Box(c0.$1)],true):c0.$==12?(c1=[c0.$0,b1.Box(c0.$1)],true):c0.$==9&&(c1=[c0.$0,b1.Box(c0.$1)],true))?(c2=c1[0],cY.Add(c2),cX.set_Item(c2,c1[1])):void 0;}}finally{if(typeof cZ=="object"&&"Dispose"in cZ)cZ.Dispose();}return[L.append(cU,bj.choose(function(c3){return cW(c3[0],c3[1]);},cV)),{$:0,$0:cX}];};bN.EventQ2=function(cT,cU,cV,cW){return{$:5,$0:cU,$1:true,$2:function(cX){return function(cY){return cW({Vars:cV(),Target:cX,Event:cY});};}};};bO.init=function(cT,cU){var cV;cV=new b2.New();bO.set_layoutHorizontal(cT);bO.set_layoutVertical(cU);bF.defineWebComponent("wcomp-splitter",b2.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};bO.set_layoutHorizontal=function(cT){bi.$cctor();bi.layoutHorizontal=cT;};bO.set_layoutVertical=function(cT){bi.$cctor();bi.layoutVertical=cT;};bO.layoutVertical=function(){bi.$cctor();return bi.layoutVertical;};bO.layoutHorizontal=function(){bi.$cctor();return bi.layoutHorizontal;};bG.init=function(){bi.$cctor();return bi.init;};bG.tabStrip=function(cT,cU,cV,cW,cX){var cY;cY=R.Element("div",[be.Create("class",(((cN.Curried3(function(cZ,c0,c1){return cZ("tab-strip "+D.toSafe(c0)+" "+D.toSafe(c1));}))(a.id))(cU?"top":"bottom"))(cV?"horizontal":"vertical"))],W.ofSeq(L.delay(function(){return L.collect(function(cZ){var c0;c0=cZ[0];return[b_.New$1().Content(R.Element("div",[bb.Dynamic("class",v.Map(function(c1){return"tab"+(c1===c0+1?" selected":"");},cT.get_View())),be.Create("draggable","true"),be.HandlerImpl("click",function(){return function(){return cT.Set(c0+1);};})],[R.TextNode(cZ[1][0])]))];},L.indexed(cW));})));return R.Element("div",[be.Create("class","tab-panel")],W.ofSeq(L.delay(function(){return L.append(cU?[cY]:[],L.delay(function(){return L.append([R.Element("div",[be.Create("class","tab-content")],[cX])],L.delay(function(){return L.append(!cU?[cY]:[],L.delay(function(){return L.append([R.Element("style",X.Empty,W.ofArray([R.TextNode(bG.css())]))],L.delay(function(){return[R.Element("style",X.Empty,W.ofArray([R.TextView(v.Map(function(cZ){return function(c0){return cZ("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(c0)+")) { display: grid }\r\n                                           ");};}(a.id),cT.get_View()))]))];}));}));}));}));})));};bG.css=function(){bi.$cctor();return bi.css;};bQ=u.DocElemNode=cN.Class({Equals:function(cT){return this.ElKey===cT.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bQ);bQ.New=function(cT,cU,cV,cW,cX,cY){var cZ;return new bQ((cZ={Attr:cT,Children:cU,El:cW,ElKey:cX},(cN.SetOptional(cZ,"Delimiters",cV),cN.SetOptional(cZ,"Render",cY),cZ)));};bS=bn.FSharpSet=cN.Class({Contains:function(cT){return b5.Contains(cT,this.tree);},Equals:function(cT){return this.get_Count()===cT.get_Count()&&L.forall2(U.Equals,this,cT);},GetEnumerator$1:function(){return bk.Get(b5.Enumerate(false,this.tree));},get_Count:function(){var cT;cT=this.tree;return cT==null?0:cT.Count;},GetHashCode:function(){return -1741749453+U.Hash(bj.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();},CompareTo0:function(cT){return L.compareWith(U.Compare,this,cT);}},h,bS);bS.New=cN.Ctor(function(cT){bS.New$1.call(this,b5.OfSeq(cT));},bS);bS.New$1=cN.Ctor(function(cT){h.New.call(this);this.tree=cT;},bS);bT.alreadyAdded=function(){return z.FailWith("An item with the same key has already been added.");};bT.notPresent=function(){return z.FailWith("The given key was not present in the dictionary.");};bU=bu.ArrayStorage=cN.Class({SAppendMany:function(cT,cU){var cV;cV=bq.ofSeqNonCopying(cT);cU.push.apply(cU,cV);return cU;},SSetAt:function(cT,cU,cV){bj.set(cV,cT,cU);return cV;},SRemoveIf:function(cT,cU){return bj.filter(function(cV){return!cT(cV);},cU);},SAppend:function(cT,cU){cU.push(cT);return cU;},SInit:function(){return this.init;}},h,bU);bU.New=cN.Ctor(function(cT){h.New.call(this);this.init=cT;},bU);bV.CreateTextNode=function(){return{Text:bB.CreateText(""),Dirty:false,Value:""};};bV.UpdateTextNode=function(cT,cU){cT.Value=cU;cT.Dirty=true;};bV.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bV.UpdateEmbedNode=function(cT,cU){cT.Current=cU;cT.Dirty=true;};bV.CreateElemNode=function(cT,cU,cV){var cW;bV.LinkElement(cT,cV);cW=bA.Insert(cT,cU);return bQ.New(cW,cV,null,cT,bg.Int(),cN.GetOptional(cW.OnAfterRender));};bV.LinkElement=function(cT,cU){bV.InsertDoc(cT,cU,null);};bV.LinkPrevElement=function(cT,cU){bV.InsertDoc(cT.parentNode,cU,cT);};bV.CreateDelimitedRunState=function(cT,cU,cV){return ct.New(cu.get_Empty(),bV.CreateDelimitedElemNode(cT,cU,bA.EmptyAttr(),cV));};bV.PerformAnimatedUpdate=function(cT,cU,cV){var cW;return cj.get_UseAnimations()?(cW=null,cp.Delay(function(){var cX,cY,cZ;cX=cu.FindAll(cV);cY=bV.ComputeChangeAnim(cU,cX);cZ=bV.ComputeEnterAnim(cU,cX);return cp.Bind(cj.Play(cj.Append(cY,bV.ComputeExitAnim(cU,cX))),function(){return cp.Bind(bV.SyncElemNodesNextFrame(cT,cU),function(){return cp.Bind(cj.Play(cZ),function(){cU.PreviousNodes=cX;return cp.Return(null);});});});})):bV.SyncElemNodesNextFrame(cT,cU);};bV.PerformSyncUpdate=function(cT,cU,cV){var cW;cW=cu.FindAll(cV);bV.SyncElemNode(cT,cU.Top);cU.PreviousNodes=cW;};bV.InsertDoc=function(cT,cU,cV){var cW;return cU!=null&&cU.$==1?bV.InsertNode(cT,cU.$0.El,cV):cU!=null&&cU.$==2?(cW=cU.$0,(cW.Dirty=false,bV.InsertDoc(cT,cW.Current,cV))):cU==null?cV:cU!=null&&cU.$==4?bV.InsertNode(cT,cU.$0.Text,cV):cU!=null&&cU.$==5?bV.InsertNode(cT,cU.$0,cV):cU!=null&&cU.$==6?bj.foldBack(function(cX,cY){return cX==null||cX.constructor===bP?bV.InsertDoc(cT,cX,cY):bV.InsertNode(cT,cX,cY);},cU.$0.Els,cV):bV.InsertDoc(cT,cU.$0,bV.InsertDoc(cT,cU.$1,cV));};bV.CreateDelimitedElemNode=function(cT,cU,cV,cW){var cX,cY;cX=cT.parentNode;bV.LinkPrevElement(cU,cW);cY=bA.Insert(cX,cV);return bQ.New(cY,cW,{$:1,$0:[cT,cU]},cX,bg.Int(),cN.GetOptional(cY.OnAfterRender));};bV.SyncElemNodesNextFrame=function(cT,cU){function cV(cW){a.requestAnimationFrame(function(){bV.SyncElemNode(cT,cU.Top);cW();});}return ck.BatchUpdatesEnabled()?cp.FromContinuations(function(cW,cX,cY){return cV.apply(null,[cW,cX,cY]);}):(bV.SyncElemNode(cT,cU.Top),cp.Return(null));};bV.ComputeExitAnim=function(cT,cU){return cj.Concat(bj.map(function(cV){return bA.GetExitAnim(cV.Attr);},cu.ToArray(cu.Except(cU,cu.Filter(function(cV){return bA.HasExitAnim(cV.Attr);},cT.PreviousNodes)))));};bV.ComputeEnterAnim=function(cT,cU){return cj.Concat(bj.map(function(cV){return bA.GetEnterAnim(cV.Attr);},cu.ToArray(cu.Except(cT.PreviousNodes,cu.Filter(function(cV){return bA.HasEnterAnim(cV.Attr);},cU)))));};bV.ComputeChangeAnim=function(cT,cU){var cV;function cW(cX){return bA.HasChangeAnim(cX.Attr);}cV=function(cX){return cu.Filter(cW,cX);};return cj.Concat(bj.map(function(cX){return bA.GetChangeAnim(cX.Attr);},cu.ToArray(cu.Intersect(cV(cT.PreviousNodes),cV(cU)))));};bV.SyncElemNode=function(cT,cU){!cT?bV.SyncElement(cU):void 0;bV.Sync(cU.Children);bV.AfterRender(cU);};bV.CreateRunState=function(cT,cU){return ct.New(cu.get_Empty(),bV.CreateElemNode(cT,bA.EmptyAttr(),cU));};bV.InsertNode=function(cT,cU,cV){bB.InsertAt(cT,cV,cU);return cU;};bV.SyncElement=function(cT){function cU(cV){function cW(cX){var cY,cZ;return cX!=null&&cX.$==0?cW(cX.$0)||cW(cX.$1):cX!=null&&cX.$==2?(cY=cX.$0,cY.Dirty||cW(cY.Current)):cX!=null&&cX.$==6&&(cZ=cX.$0,cZ.Dirty||bj.exists(cU,cZ.Holes));}return cW(cV.Children);}bA.Sync(cT.El,cT.Attr);cU(cT)?bV.DoSyncElement(cT):void 0;};bV.Sync=function(cT){var cU,cV;if(cT!=null&&cT.$==1)bV.SyncElemNode(false,cT.$0);else if(cT!=null&&cT.$==2)bV.Sync(cT.$0.Current);else if(cT==null);else if(cT!=null&&cT.$==5);else if(cT!=null&&cT.$==4){cU=cT.$0;cU.Dirty?(cU.Text.nodeValue=cU.Value,cU.Dirty=false):void 0;}else if(cT!=null&&cT.$==6){cV=cT.$0;bj.iter(function(cW){bV.SyncElemNode(false,cW);},cV.Holes);bj.iter(function(cW){bA.Sync(cW[0],cW[1]);},cV.Attrs);bV.AfterRender(cV);}else{bV.Sync(cT.$0);bV.Sync(cT.$1);}};bV.AfterRender=function(cT){var cU;cU=cN.GetOptional(cT.Render);cU!=null&&cU.$==1?(cU.$0(cT.El),cN.SetOptional(cT,"Render",null)):void 0;};bV.InsertBeforeDelim=function(cT,cU){var cV,cW;cV=cT.parentNode;cW=self.document.createTextNode("");cV.insertBefore(cW,cT);bV.LinkPrevElement(cT,cU);return cW;};bV.DoSyncElement=function(cT){var cU,cV,cW;function cX(cY,cZ){var c0,c1;return cY!=null&&cY.$==1?cY.$0.El:cY!=null&&cY.$==2?(c0=cY.$0,c0.Dirty?(c0.Dirty=false,bV.InsertDoc(cU,c0.Current,cZ)):cX(c0.Current,cZ)):cY==null?cZ:cY!=null&&cY.$==4?cY.$0.Text:cY!=null&&cY.$==5?cY.$0:cY!=null&&cY.$==6?(c1=cY.$0,(c1.Dirty?c1.Dirty=false:void 0,bj.foldBack(function(c2,c3){return c2==null||c2.constructor===bP?cX(c2,c3):c2;},c1.Els,cZ))):cX(cY.$0,cX(cY.$1,cZ));}cU=cT.El;cJ.Iter((cV=cT.El,function(cY){bB.RemoveNode(cV,cY);}),cJ.Except(cJ.DocChildren(cT),cJ.Children(cT.El,cN.GetOptional(cT.Delimiters))));cX(cT.Children,(cW=cN.GetOptional(cT.Delimiters),cW!=null&&cW.$==1?cW.$0[1]:null));};A["String.Left"]=function(cT,cU){return cU<0?A["String.Substring2"](cT,0,cT.length+cU):A["String.Substring2"](cT,0,cU);};A.delayed=function(cT,cU){var cV;cV=[null];return function(cW){var cX,cY;cX=cV[0];cX==null?void 0:cX.$0.Cancel$1();cV[0]={$:1,$0:new b$.New()};cp.Start((cY=null,cp.Delay(function(){return cp.Bind(cp.Sleep(cT),function(){cU(cW);return cp.Zero();});})),{$:1,$0:cV[0].$0});};};A["String.Substring2"]=function(cT,cU,cV){var cW,cX;while(true){if(cV<=0)return"";else if(cU>=cT.length)return"";else if(cU<0){cW=cU;cU=0;cV=cV+cW;}else return _6.Substring(cT,cU,(cX=cT.length-cU,U.Compare(cV,cX)===-1?cV:cX));}};A.print=function(cT){if(typeof cT=="string")((function(cU){return function(cV){return cU(D.toSafe(cV));};}(function(cU){cQ.log(cU);}))(cT));else((function(cU){return function(cV){return cU(D.prettyPrint(cV));};}(function(cU){cQ.log(cU);}))(cT));};bW=u.DynamicAttrNode=cN.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cT){return cj.get_Empty();},NGetEnterAnim:function(cT){return cj.get_Empty();},NGetChangeAnim:function(cT){return cj.get_Empty();},NSync:function(cT){if(this.dirty){(this.push(cT))(this.value);this.dirty=false;}}},h,bW);bW.New=cN.Ctor(function(cT,cU){var cV;cV=this;h.New.call(this);this.push=cU;this.value=void 0;this.dirty=false;this.updates=v.Map(function(cW){cV.value=cW;cV.dirty=true;},cT);},bW);bX.$cctor=function(){bX.$cctor=a.ignore;bX.counter=0;};bY=u.Elt=cN.Class({on:function(cT,cU){var cV;cV=this;this.elt.addEventListener(cT,function(cW){return cU(cV.elt,cW);},false);return this;}},R,bY);bY.New=function(cT,cU,cV){var cW,cX;cW=bV.CreateElemNode(cT,cU,cV.docNode);cX=b8.Create(cV.updates);return new bY.New$1({$:1,$0:cW},v.Map2Unit(bA.Updates(cW.Attr),cX.v),cT,cX);};bY.TreeNode=function(cT,cU){var cV,cW;function cX(cY){return cY[1];}cV=b8.Create(cU);return new bY.New$1({$:6,$0:cT},v.Map2Unit((cW=bj.map(function(cY){return bA.Updates(cX(cY));},cT.Attrs),bq.TreeReduce(v.Const(),v.Map2Unit,cW)),cV.v),bj.get(cT.Els,0),cV);};bY.New$1=cN.Ctor(function(cT,cU,cV,cW){R.New.call(this,cT,cU);this.docNode$1=cT;this.updates$1=cU;this.elt=cV;this.rvUpdates=cW;},bY);bZ.TryParse=function(cT){var cU;cU=cO.parse(cT);return a.isNaN(cU)?null:{$:1,$0:cU};};bE.TryParse=function(cT,cU,cV,cW){var cX,cY;cX=+cT;cY=cX===cX-cX%1&&cX>=cU&&cX<=cV;cY?cW.set(cX):void 0;return cY;};b0=bn.HashSet=cN.Class({Add:function(cT){return this.add(cT);},Contains:function(cT){var cU;cU=this.data[this.hash(cT)];return cU==null?false:this.arrContains(cT,cU);},add:function(cT){var cU,cV;cU=this.hash(cT);cV=this.data[cU];return cV==null?(this.data[cU]=[cT],this.count=this.count+1,true):this.arrContains(cT,cV)?false:(cV.push(cT),this.count=this.count+1,true);},arrContains:function(cT,cU){var cV,cW,cX,cY;cV=true;cW=0;cY=cU.length;while(cV&&cW<cY)if(this.equals.apply(null,[cU[cW],cT]))cV=false;else cW=cW+1;return!cV;},ExceptWith:function(cT){var cU;cU=bk.Get(cT);try{while(cU.MoveNext())this.Remove(cU.Current());}finally{if(typeof cU=="object"&&"Dispose"in cU)cU.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cT){var cU,cV,cW,cX;cU=0;cV=cB.concat(this.data);for(cW=0,cX=cV.length-1;cW<=cX;cW++)bj.set(cT,cW,cV[cW]);},IntersectWith:function(cT){var cU,cV,cW,cX,cY;cU=new b0.New$4(cT,this.equals,this.hash);cV=cB.concat(this.data);for(cW=0,cX=cV.length-1;cW<=cX;cW++){cY=cV[cW];!cU.Contains(cY)?this.Remove(cY):void 0;}},Remove:function(cT){var cU;cU=this.data[this.hash(cT)];return cU==null?false:this.arrRemove(cT,cU)&&(this.count=this.count-1,true);},arrRemove:function(cT,cU){var cV,cW,cX,cY;cV=true;cW=0;cY=cU.length;while(cV&&cW<cY)if(this.equals.apply(null,[cU[cW],cT])){cU.splice.apply(cU,[cW,1]);cV=false;}else cW=cW+1;return!cV;},GetEnumerator:function(){return bk.Get(cB.concat(this.data));},GetEnumerator0:function(){return bk.Get(cB.concat(this.data));}},h,b0);b0.New$3=cN.Ctor(function(){b0.New$4.call(this,[],U.Equals,U.Hash);},b0);b0.New$4=cN.Ctor(function(cT,cU,cV){var cW;h.New.call(this);this.equals=cU;this.hash=cV;this.data=[];this.count=0;cW=bk.Get(cT);try{while(cW.MoveNext())this.add(cW.Current());}finally{if(typeof cW=="object"&&"Dispose"in cW)cW.Dispose();}},b0);b0.New$2=cN.Ctor(function(cT){b0.New$4.call(this,cT,U.Equals,U.Hash);},b0);b1.Box=a.id;b2=bO.WcSplitterT=cN.Class({connectedCallback:function(){var cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8;function c9(df){var dg,dh,di,dj;dg=c0?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];dh=a.parseFloat("0"+cR(df.parentElement.parentElement).css(dg[0]));di=a.parseFloat("0"+cR(df.parentElement.parentElement).css(dg[1]));c3.Set(a.parseFloat("0"+cR(df.parentElement.parentElement).css(dg[2])));c2[0]=dh+di;dj=cT.getBoundingClientRect();return c0?cZ?[dj.width,dj.height]:[-dj.width,dj.height]:cZ?[dj.height,dj.width]:[-dj.height,dj.width];}function c_(df){return c0?df.clientX:df.clientY;}function c$(df){var dg,dh;dg=(c_(df)-c6[0])*100/c1[0][0]+c5[0];cY.Set((dh=U.Compare(cW,dg)===1?cW:dg,U.Compare(cX,dh)===-1?cX:dh));}function da(){if(c4[0]){c4[0]=false;self.removeEventListener("mousemove",c$,false);self.removeEventListener("mouseup",da,false);}}function db(df){var dg,dh;if(!c4[0]){c4[0]=true;c5[0]=cY.Get();c6[0]=c_(df);c1[0]=(dg=(dh=c7[0],dh==null?null:{$:1,$0:c9(dh.$0)}),dg==null?[100,500]:dg.$0);self.addEventListener("mousemove",c$,false);self.addEventListener("mouseup",da,false);df.preventDefault();}}function dc(df,dg,dh,di){return[(df-dg-dh)*di/100,(df-dg-dh)*(100-di)/100];}function dd(df,dg){return(((((cN.Curried(function(dh,di,dj,dk,dl){return dh(" "+di.toFixed(2)+"px "+dj.toFixed(2)+"px ; "+D.toSafe(dk)+" : "+dl.toFixed(2)+"px; ");},5))(a.id))(df))(dg))(c0?"height":"width"))(c1[0][1]);}function de(){var df;df=c7[0];df==null?void 0:c1[0]=c9(df.$0);cY.Set(cY.Get());}if(!this.added){cT=this;cU=cT.attachShadow({mode:"open"});cV=self.document.createElement("div");cW=cT.hasAttribute("min")?a.parseFloat(cT.getAttribute("min")):4;cX=cT.hasAttribute("max")?a.parseFloat(cT.getAttribute("max")):96;cY=y.Create$1(cT.hasAttribute("value")?a.parseFloat(cT.getAttribute("value")):50);cZ=!cT.hasAttribute("second");c0=cT.hasAttribute("vertical");c1=[[0,0]];c2=[0];c3=y.Create$1(0);c4=[false];c5=[0];c6=[0];c7=[null];c8=(((((c0?bO.layoutVertical():bO.layoutHorizontal())(v.Map(function(df){var dg;dg=dc(c1[0][0],c3.Get(),c2[0],df);return dd.apply(null,dg);},cY.get_View())))(function(){cd.addResizeObserver(de,cT);de();}))(function(df){c7[0]={$:1,$0:df};de();}))(function(df){db(df);}))(v.Map(function(df){return function(dg){return df(D.prettyPrint(dg)+"px");};}(a.id),c3.get_View()));bz.LoadLocalTemplates("");R.Run(cV,c8);cU.appendChild(cV.firstChild);this.added=true;}}},h,b2);b2.Constructor=function(){var cT,cU;cT=(cU=cS.construct(self.HTMLElement,[],this.__proto__.constructor),cU);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(cT);return cT;};b2.New=cN.Ctor(function(){h.New.call(this);this.added=false;(function(cT){return cT("WcSplitterT initializer");}(function(cT){cQ.log(cT);}));},b2);b4.New=function(cT,cU,cV,cW){var cX;cX={DynElem:cT,DynFlags:cU,DynNodes:cV};cN.SetOptional(cX,"OnAfterRender",cW);return cX;};b5.OfSeq=function(cT){var cU;cU=bj.ofSeq(L.distinct(cT));bj.sortInPlace(cU);return b5.Build(cU,0,cU.length-1);};b5.Contains=function(cT,cU){return!((b5.Lookup(cT,cU))[0]==null);};b5.Lookup=function(cT,cU){var cV,cW,cX,cY;cV=[];cW=cU;cX=true;while(cX)if(cW==null)cX=false;else{cY=U.Compare(cT,cW.Node);cY===0?cX=false:cY===1?(cV.unshift([true,cW.Node,cW.Left]),cW=cW.Right):(cV.unshift([false,cW.Node,cW.Right]),cW=cW.Left);}return[cW,cV];};b5.Build=function(cT,cU,cV){var cW,cX,cY;return cV-cU+1<=0?null:(cW=(cU+cV)/2>>0,(cX=b5.Build(cT,cU,cW-1),(cY=b5.Build(cT,cW+1,cV),b5.Branch(bj.get(cT,cW),cX,cY))));};b5.Branch=function(cT,cU,cV){var cW,cX;return cg.New(cT,cU,cV,1+(cW=cU==null?0:cU.Height,(cX=cV==null?0:cV.Height,U.Compare(cW,cX)===1?cW:cX)),1+(cU==null?0:cU.Count)+(cV==null?0:cV.Count));};b5.Enumerate=function(cT,cU){function cV(cW,cX){var cY;while(true)if(cW==null)return cX.$==1?{$:1,$0:[cX.$0[0],[cX.$0[1],cX.$1]]}:null;else if(cT){cY=cW;cW=cY.Right;cX=new X({$:1,$0:[cY.Node,cY.Left],$1:cX});}else{cY=cW;cW=cY.Left;cX=new X({$:1,$0:[cY.Node,cY.Right],$1:cX});}}return L.unfold(function(cW){return cV(cW[0],cW[1]);},[cU,X.Empty]);};b6.$cctor=function(){b6.$cctor=a.ignore;b6.LoadedTemplates=new br.New$5();b6.LocalTemplatesLoaded=false;b6.TextHoleRE="\\${([^}]+)}";};b7.$cctor=function(){b7.$cctor=a.ignore;b7.Doc=self.document;};b8=u.Updates=cN.Class({},null,b8);b8.Create=function(cT){var cU;cU=null;cU=b8.New(cT,null,function(){var cV;cV=cU.s;return cV===null?(cV=bd.Copy(cU.c()),cU.s=cV,bd.WhenObsoleteRun(cV,function(){cU.s=null;}),cV):cV;});return cU;};b8.New=function(cT,cU,cV){return new b8({c:cT,s:cU,v:cV});};b_=b9.Hoverable=cN.Class({Content:function(cT){return cT.on("mouseenter",function(){return bB.AddClass(cT.elt,"hovering");}).on("mouseleave",function(){return bB.RemoveClass(cT.elt,"hovering");});}},null,b_);b_.New$1=function(){return b_.New(y.Create$1(false));};b_.New=function(cT){return new b_({hover:cT});};b$=g.CancellationTokenSource=cN.Class({Cancel$1:function(){var cT;if(!this.c){this.c=true;cT=bj.choose(function(cU){try{cU();return null;}catch(cV){return{$:1,$0:cV};}},this.r);if(bj.length(cT)>0)throw new co.New$3(cT);else void 0;}}},h,b$);b$.New=cN.Ctor(function(){h.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},b$);ca=u.CheckedInput=cN.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,ca);cd.addResizeObserver=function(cT,cU){var cV,cW,cX,cY;try{cV=!(!a.ResizeObserver);}catch(cZ){cV=false;}if(cV){cW=new a.ResizeObserver(cT);cd.set_observers(new X({$:1,$0:cW,$1:cd.observers()}));cW.observe(cU);}else{cX=cd.dimsChanged(cU);cp.Start((cY=null,cp.Delay(function(){return cp.While(function(){return cU.isConnected;},cp.Delay(function(){return cp.Bind(cp.Sleep(110),function(){return cX()?(cT(),cp.Zero()):cp.Zero();});}));})),null);}};cd.set_observers=function(cT){bi.$cctor();bi.observers=cT;};cd.observers=function(){bi.$cctor();return bi.observers;};cd.dimsChanged=function(cT){var cU;cU=[cT.getBoundingClientRect()];return function(){var cV;cV=cT.getBoundingClientRect();return U.Equals(cd.domRect2Tuple(cU[0]),cd.domRect2Tuple(cV))?false:(cU[0]=cV,true);};};cd.domRect2Tuple=function(cT){return[cT.top,cT.left,cT.width,cT.height];};F.REGEX$1=function(cT,cU,cV){var cW;return cV===null?null:(cW=(new a.String(cV)).match(new a.RegExp(cT,cU)),U.Equals(cW,null)?null:!U.Equals(cW,null)&&cW.length===0?null:{$:1,$0:cW});};ce.extractNodes=function(cT){var cU,cV;function cW(cX,cY,cZ,c0){var c1,c2,c3,c4,c5,c6;c1=ce.extractNodes(cZ);c2=ce.extractNodes(c0);return(c1.$==0?(c4=c1.$0,!U.Equals(c4,null)&&c4.length===0)?(c3=c2,true):c2.$==0?(c5=c2.$0,!U.Equals(c5,null)&&c5.length===0)?(c3=c1,true):(c3=[c1,c2],false):(c3=[c1,c2],false):c2.$==0?(c6=c2.$0,!U.Equals(c6,null)&&c6.length===0)?(c3=c1,true):(c3=[c1,c2],false):(c3=[c1,c2],false))?c3:{$:1,$0:{$:0,$0:cX,$1:cY,$2:c3[0],$3:c3[1]}};}cU=ce.horizontalSplit(cT);return cU!=null&&cU.$==1?cW(false,cU.$0[2],cU.$0[0],cU.$0[1]):(cV=ce.verticalSplit(cT),cV!=null&&cV.$==1?cW(true,cV.$0[2],cV.$0[0],cV.$0[1]):{$:0,$0:ce.cleanSpaces(cT)});};ce.createLayoutDefinitions=function(cT,cU){var cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4;return cU.$==1?(cV=cU.$0.$0,(cW=cU.$0.$1,(cX=ce.createLayoutDefinitions(cT+"_1",cU.$0.$2),(cY=cX[0],(cZ=cX[1],(c0=ce.createLayoutDefinitions(cT+"_2",cU.$0.$3),(c1=c0[0],(c2=c0[1],[cT,bj.ofSeq(L.delay(function(){return L.append([_6.concat(" ",W.ofArray([cT,cV?"vertical":"horizontal",a.String(cW),cY,c1]))],L.delay(function(){return L.append(cZ,L.delay(function(){return c2;}));}));}))])))))))):(c3=cU.$0,!U.Equals(c3,null)&&c3.length===0)?["___",[]]:(c4=cU.$0,!U.Equals(c4,null)&&c4.length===1)?[bj.get(cU.$0,0),[]]:[cT,[cT+" div \"\" "+_6.concat(" ",cU.$0)]];};ce.horizontalSplit=function(cT){var cU,cV,cW,cX,cY;function cZ(c0,c1){var c2,c3,c4,c5;c2=F.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",c1);return c2!=null&&c2.$==1?{$:1,$0:[[c0,(c3=(c4=L.tryItem(1,c2.$0),c4==null?null:ce.extractMeasuresO(_6.Replace(_6.Replace(c4.$0,"^",""),"v","-"))),(c5=new cf({$:1,$0:5,$1:50,$2:95}),c3==null?c5:c3.$0))],c1.indexOf("-")]}:null;}cU=(cV=L.tryHead(L.sortBy(function(c0){return c0[1];},L.choose(function(c0){return cZ(c0[0],c0[1]);},L.indexed(cT)))),cV==null?null:{$:1,$0:cV.$0[0]});return cU==null?null:{$:1,$0:(cW=cU.$0,(cX=cW[0],(cY=cW[1],[_1.array(cT,null,{$:1,$0:cX-1}),_1.array(cT,{$:1,$0:cX+1},null),cY])))};};ce.verticalSplit=function(cT){var cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3;function c4(c7,c8){var c9,c_,c$;return(c_=F.REGEX$1("^ *\\|+ *$","",c8),c_!=null&&c_.$==1&&(c$=c_.$0,!U.Equals(c$,null)&&c$.length===1))?{$:1,$0:[c7,c8.indexOf("|")]}:null;}function c5(c7){return U.Equals(null,c7);}function c6(c7){return U.Equals(null,c7);}cU=ce.transpose(cT);cV=(cW=(cX=L.tryHead(L.sortBy(function(c7){return c7[1];},L.choose(function(c7){return c4(c7[0],c7[1]);},L.indexed(cU)))),cX==null?null:{$:1,$0:cX.$0[0]}),cW==null?null:{$:1,$0:(cY=cW.$0,[ce.transpose(_1.array(cU,null,{$:1,$0:cY-1})),ce.transpose(_1.array(cU,{$:1,$0:cY+1},null))])});return cV==null?null:{$:1,$0:(cZ=cV.$0,(c0=cZ[0],(c1=cZ[1],[bj.filter(function(c7){return c5(ce.extractMeasuresO(c7));},c0),bj.filter(function(c7){return c6(ce.extractMeasuresO(c7));},c1),(c2=L.tryHead(L.delay(function(){return L.append(L.choose(ce.extractMeasuresO,c0),L.delay(function(){return L.map(function(c7){return c7.$==0?c7.$1?new cf({$:0,$0:c7.$0,$1:false}):c7:c7;},L.choose(ce.extractMeasuresO,c1));}));})),(c3=new cf({$:1,$0:5,$1:50,$2:95}),c2==null?c3:c2.$0))])))};};ce.cleanSpaces=function(cT){return bj.filter(function(cU){var cV;return!(cV=(B.Int())(cU),cV!=null&&cV.$==1);},_6.SplitStrings(_6.concat(" ",cT),[" "],1));};ce.extractMeasuresO=function(cT){var cU,cV,cW,cX,cY,cZ,c0;cU=_6.SplitChars(cT,[" "],1);return!U.Equals(cU,null)&&cU.length===1&&(cW=(B.Int())(bj.get(cU,0)),cW!=null&&cW.$==1&&(cV=cW.$0,true))?{$:1,$0:new cf({$:0,$0:cP.abs(cV),$1:cV>=0})}:!U.Equals(cU,null)&&cU.length===3&&(cY=(B.Int())(bj.get(cU,0)),cY!=null&&cY.$==1&&(cZ=(B.Int())(bj.get(cU,1)),cZ!=null&&cZ.$==1&&(c0=(B.Int())(bj.get(cU,2)),c0!=null&&c0.$==1&&(cX=[c0.$0,cY.$0,cZ.$0],true))))?{$:1,$0:new cf({$:1,$0:cX[1],$1:cX[2],$2:cX[0]})}:null;};ce.transpose=function(cT){var cU;cU=L.max(L.map(function(cV){return cV.length;},cT));return bj.ofSeq(L.delay(function(){return L.map(function(cV){return bj.ofSeq(L.delay(function(){return L.map(function(cW){return cW.length>cV?cW[cV]:" ";},cT);})).join("");},z.range(0,cU-1));}));};cf=K.Measures=cN.Class({toString:function(){return this.$==1?((((cN.Curried(function(cT,cU,cV,cW){return cT(a.String(cU)+"-"+a.String(cV)+"-"+a.String(cW));},4))(a.id))(z.toInt(this.$0)))(z.toInt(this.$1)))(z.toInt(this.$2)):a.String(z.toInt(this.$1?this.$0:-this.$0));}},null,cf);cg.New=function(cT,cU,cV,cW,cX){return{Node:cT,Left:cU,Right:cV,Height:cW,Count:cX};};ch.convertTextNode=function(cT){var cU,cV,cW,cX,cY,cZ;cU=null;cV=0;cX=cT.textContent;cY=new a.RegExp(bz.TextHoleRE(),"g");while(cU=cY.exec(cX),cU!==null){cT.parentNode.insertBefore(self.document.createTextNode(_1.string(cX,{$:1,$0:cV},{$:1,$0:cY.lastIndex-bj.get(cU,0).length-1})),cT);cV=cY.lastIndex;cZ=self.document.createElement("span");cZ.setAttribute("ws-replace",bj.get(cU,1).toLowerCase());cT.parentNode.insertBefore(cZ,cT);}cY.lastIndex=0;cT.textContent=_1.string(cX,{$:1,$0:cV},null);};ch.failNotLoaded=function(cT){cQ.warn("Instantiating non-loaded template",cT);};ch.fillTextHole=function(cT,cU,cV){var cW;cW=cT.querySelector("[ws-replace]");return U.Equals(cW,null)?(cQ.warn("Filling non-existent text hole",cV),null):(cW.parentNode.replaceChild(new a.Text(cU),cW),{$:1,$0:cW.getAttribute("ws-replace")});};ch.removeHolesExcept=function(cT,cU){function cV(cW){bB.IterSelector(cT,"["+cW+"]",function(cX){if(!cU.Contains(cX.getAttribute(cW)))cX.removeAttribute(cW);});}cV("ws-attr");cV("ws-onafterrender");cV("ws-var");bB.IterSelector(cT,"[ws-hole]",function(cW){if(!cU.Contains(cW.getAttribute("ws-hole"))){cW.removeAttribute("ws-hole");while(cW.hasChildNodes())cW.removeChild(cW.lastChild);}});bB.IterSelector(cT,"[ws-replace]",function(cW){if(!cU.Contains(cW.getAttribute("ws-replace")))cW.parentNode.removeChild(cW);});bB.IterSelector(cT,"[ws-on]",function(cW){cW.setAttribute("ws-on",_6.concat(" ",bj.filter(function(cX){return cU.Contains(bj.get(_6.SplitChars(cX,[":"],1),1));},_6.SplitChars(cW.getAttribute("ws-on"),[" "],1))));});bB.IterSelector(cT,"[ws-attr-holes]",function(cW){var cX,cY,cZ,c0,c1;cX=_6.SplitChars(cW.getAttribute("ws-attr-holes"),[" "],1);for(cY=0,cZ=cX.length-1;cY<=cZ;cY++){c0=bj.get(cX,cY);cW.setAttribute(c0,(c1=new a.RegExp(bz.TextHoleRE(),"g"),cW.getAttribute(c0).replace(c1,function(c2,c3){return cU.Contains(c3)?c2:"";})));}});};ch.fillInstanceAttrs=function(cT,cU){var cV,cW,cX,cY,cZ;ch.convertAttrs(cU);cV=cU.nodeName.toLowerCase();cW=cT.querySelector("[ws-attr="+cV+"]");if(U.Equals(cW,null))cQ.warn("Filling non-existent attr hole",cV);else{cW.removeAttribute("ws-attr");for(cX=0,cY=cU.attributes.length-1;cX<=cY;cX++){cZ=cU.attributes.item(cX);cZ.name==="class"&&cW.hasAttribute("class")?cW.setAttribute("class",cW.getAttribute("class")+" "+cZ.nodeValue):cW.setAttribute(cZ.name,cZ.nodeValue);}}};ch.mapHoles=function(cT,cU){function cV(cW){bB.IterSelector(cT,"["+cW+"]",function(cX){var cY,cZ;cY=(cZ=null,[cU.TryGetValue(cX.getAttribute(cW).toLowerCase(),{get:function(){return cZ;},set:function(c0){cZ=c0;}}),cZ]);cY[0]?cX.setAttribute(cW,cY[1]):void 0;});}cV("ws-hole");cV("ws-replace");cV("ws-attr");cV("ws-onafterrender");cV("ws-var");bB.IterSelector(cT,"[ws-on]",function(cW){cW.setAttribute("ws-on",_6.concat(" ",bj.map(function(cX){var cY,cZ,c0;cY=_6.SplitChars(cX,[":"],1);cZ=(c0=null,[cU.TryGetValue(bj.get(cY,1),{get:function(){return c0;},set:function(c1){c0=c1;}}),c0]);return cZ[0]?bj.get(cY,0)+":"+cZ[1]:cX;},_6.SplitChars(cW.getAttribute("ws-on"),[" "],1))));});bB.IterSelector(cT,"[ws-attr-holes]",function(cW){var cX,cY,cZ;cX=_6.SplitChars(cW.getAttribute("ws-attr-holes"),[" "],1);for(cY=0,cZ=cX.length-1;cY<=cZ;cY++)(function(){var c0;function c1(c2,c3){var c4;c4=z.KeyValue(c3);return c2.replace(new a.RegExp("\\${"+c4[0]+"}","ig"),"${"+c4[1]+"}");}c0=bj.get(cX,cY);return cW.setAttribute(c0,(((cN.Curried3(L.fold))(c1))(cW.getAttribute(c0)))(cU));}());});};ch.fill=function(cT,cU,cV){while(true)if(cT.hasChildNodes())cV=cU.insertBefore(cT.lastChild,cV);else return null;};ch.convertAttrs=function(cT){var cV,cW,cX,cY,cZ,c0,c1,c2;function cU(c3){var c4;c4=cT.getAttribute(c3);c4===null?void 0:cT.setAttribute(c3,c4.toLowerCase());}cV=cT.attributes;cW=[];cX=[];cY=[];for(cZ=0,c0=cV.length-1;cZ<=c0;cZ++){c1=cV.item(cZ);_6.StartsWith(c1.nodeName,"ws-on")&&c1.nodeName!=="ws-onafterrender"&&c1.nodeName!=="ws-on"?(cW.push(c1.nodeName),cX.push(_1.string(c1.nodeName,{$:1,$0:"ws-on".length},null)+":"+c1.nodeValue.toLowerCase())):!_6.StartsWith(c1.nodeName,"ws-")&&(new a.RegExp(bz.TextHoleRE())).test(c1.nodeValue)?(c1.nodeValue=(c2=new a.RegExp(bz.TextHoleRE(),"g"),c1.nodeValue.replace(c2,function(c3,c4){return"${"+c4.toLowerCase()+"}";})),cY.push(c1.nodeName)):void 0;}!(cX.length==0)?cT.setAttribute("ws-on",_6.concat(" ",cX)):void 0;!(cY.length==0)?cT.setAttribute("ws-attr-holes",_6.concat(" ",cY)):void 0;cU("ws-hole");cU("ws-replace");cU("ws-attr");cU("ws-onafterrender");cU("ws-var");bj.iter(function(c3){cT.removeAttribute(c3);},cW);};ci=bn.KeyCollection=cN.Class({GetEnumerator$1:function(){return bk.Get(L.map(function(cT){return cT.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},h,ci);ci.New=cN.Ctor(function(cT){h.New.call(this);this.d=cT;},ci);cj.get_UseAnimations=function(){return cv.UseAnimations();};cj.Play=function(cT){var cU;cU=null;return cp.Delay(function(){return cp.Bind(cj.Run(a.ignore,cv.Actions(cT)),function(){cv.Finalize(cT);return cp.Return(null);});});};cj.Append=function(cT,cU){return{$:0,$0:cD.Append(cT.$0,cU.$0)};};cj.Run=function(cT,cU){var cV;function cW(cX){function cY(cZ,c0){var c1;c1=c0-cZ;cU.Compute(c1);cT();return c1<=cV?void a.requestAnimationFrame(function(c2){cY(cZ,c2);}):cX();}a.requestAnimationFrame(function(cZ){cY(cZ,cZ);});}cV=cU.Duration;return cV===0?cp.Zero():cp.FromContinuations(function(cX,cY,cZ){return cW.apply(null,[cX,cY,cZ]);});};cj.Concat=function(cT){return{$:0,$0:cD.Concat(L.map(cv.List,cT))};};cj.get_Empty=function(){return{$:0,$0:cD.Empty()};};ck.BatchUpdatesEnabled=function(){cw.$cctor();return cw.BatchUpdatesEnabled;};cl.StartProcessor=function(cT){var cU;function cV(){var cW;cW=null;return cp.Delay(function(){return cp.Bind(cT,function(){var cX;cX=cU[0];return cX===1?(cU[0]=0,cp.Zero()):cX===2?(cU[0]=1,cV()):cp.Zero();});});}cU=[0];return function(){var cW;cW=cU[0];cW===0?(cU[0]=1,cp.Start(cV(),null)):cW===1?cU[0]=2:void 0;};};cm.$cctor=function(){cm.$cctor=a.ignore;cm.EmptyAttr=null;};co=g.AggregateException=cN.Class({},cn,co);co.New$3=cN.Ctor(function(cT){co.New$4.call(this,"One or more errors occurred.",cT);},co);co.New$4=cN.Ctor(function(cT,cU){this.message=cT;bP.setPrototypeOf(this,co.prototype);this.innerExceptions=cU;},co);cp.Start=function(cT,cU){var cV,cW;cV=(cW=(cp.defCTS())[0],cU==null?cW:cU.$0);cp.scheduler().Fork(function(){if(!cV.c)cT(cz.New(function(cX){if(cX.$==1)cp.UncaughtAsyncError(cX.$0);},cV));});};cp.Delay=function(cT){return function(cU){try{(cT(null))(cU);}catch(cV){cU.k({$:1,$0:cV});}};};cp.Bind=function(cT,cU){return cp.checkCancel(function(cV){cT(cz.New(function(cW){var cX;if(cW.$==0){cX=cW.$0;cp.scheduler().Fork(function(){try{(cU(cX))(cV);}catch(cY){cV.k({$:1,$0:cY});}});}else cp.scheduler().Fork(function(){cV.k(cW);});},cV.ct));});};cp.Sleep=function(cT){return function(cU){var cV,cW;cV=void 0;cW=void 0;cV=a.setTimeout(function(){cW.Dispose();cp.scheduler().Fork(function(){cU.k({$:0,$0:null});});},cT);cW=cp.Register(cU.ct,function(){a.clearTimeout(cV);cp.scheduler().Fork(function(){cp.cancel(cU);});});};};cp.Zero=function(){cA.$cctor();return cA.Zero;};cp.defCTS=function(){cA.$cctor();return cA.defCTS;};cp.UncaughtAsyncError=function(cT){cQ.log("WebSharper: Uncaught asynchronous exception",cT);};cp.checkCancel=function(cT){return function(cU){if(cU.ct.c)cp.cancel(cU);else cT(cU);};};cp.Register=function(cT,cU){var cV;return cT===cp.noneCT()?{Dispose:function(){return null;}}:(cV=cT.r.push(cU)-1,{Dispose:function(){return bj.set(cT.r,cV,a.ignore);}});};cp.cancel=function(cT){cT.k({$:2,$0:new cF.New(cT.ct)});};cp.While=function(cT,cU){return cT()?cp.Bind(cU,function(){return cp.While(cT,cU);}):cp.Return();};cp.Return=function(cT){return function(cU){cU.k({$:0,$0:cT});};};cp.scheduler=function(){cA.$cctor();return cA.scheduler;};cp.noneCT=function(){cA.$cctor();return cA.noneCT;};cp.FromContinuations=function(cT){return function(cU){var cV;function cW(cX){if(cV[0])z.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cV[0]=true;cp.scheduler().Fork(cX);}}cV=[false];cT(function(cX){cW(function(){cU.k({$:0,$0:cX});});},function(cX){cW(function(){cU.k({$:1,$0:cX});});},function(cX){cW(function(){cU.k({$:2,$0:cX});});});};};L.enumUsing=function(cT,cU){return{GetEnumerator:function(){var cV;try{cV=bk.Get(cU(cT));}catch(cW){cT.Dispose();throw cW;}return new bp.New(null,null,function(cX){return cV.MoveNext()&&(cX.c=cV.Current(),true);},function(){cV.Dispose();cT.Dispose();});}};};L.enumWhile=function(cT,cU){return{GetEnumerator:function(){return new bp.New(null,null,function(cV){var cW;while(true){cW=cV.s;if(U.Equals(cW,null)){if(cT()){cV.s=bk.Get(cU);cV=cV;}else return false;}else if(cW.MoveNext()){cV.c=cW.Current();return true;}else{cW.Dispose();cV.s=null;cV=cV;}}},function(cV){var cW;cW=cV.s;!U.Equals(cW,null)?cW.Dispose():void 0;});}};};cq.Clear=function(cT){cT.splice(0,bj.length(cT));};cr=g.MatchFailureException=cN.Class({},cn,cr);cr.New=cN.Ctor(function(cT,cU,cV){this.message=cT+" at "+a.String(cU)+":"+a.String(cV);bP.setPrototypeOf(this,cr.prototype);},cr);ct.New=function(cT,cU){return{PreviousNodes:cT,Top:cU};};cu.get_Empty=function(){return{$:0,$0:new b0.New$3()};};cu.FindAll=function(cT){var cU;function cV(cX){if(cX!=null&&cX.$==0){cV(cX.$0);cV(cX.$1);}else if(cX!=null&&cX.$==1)cW(cX.$0);else if(cX!=null&&cX.$==2)cV(cX.$0.Current);else if(cX!=null&&cX.$==6)bj.iter(cW,cX.$0.Holes);}function cW(cX){cU.push(cX);cV(cX.Children);}cU=[];cV(cT);return{$:0,$0:new b0.New$2(cU)};};cu.Filter=function(cT,cU){return{$:0,$0:cH.Filter(cT,cU.$0)};};cu.Except=function(cT,cU){return{$:0,$0:cH.Except(cT.$0,cU.$0)};};cu.ToArray=function(cT){return cH.ToArray(cT.$0);};cu.Intersect=function(cT,cU){return{$:0,$0:cH.Intersect(cT.$0,cU.$0)};};cv.UseAnimations=function(){cC.$cctor();return cC.UseAnimations;};cv.Actions=function(cT){return cv.ConcatActions(bj.choose(function(cU){return cU.$==1?{$:1,$0:cU.$0}:null;},cD.ToArray(cT.$0)));};cv.Finalize=function(cT){bj.iter(function(cU){if(cU.$==0)cU.$0();},cD.ToArray(cT.$0));};cv.ConcatActions=function(cT){var cU,cV,cW,cX;cU=bq.ofSeqNonCopying(cT);cV=bj.length(cU);return cV===0?cv.Const():cV===1?bj.get(cU,0):(cW=L.max(L.map(function(cY){return cY.Duration;},cU)),(cX=bj.map(function(cY){return cv.Prolong(cW,cY);},cU),cv.Def(cW,function(cY){bj.iter(function(cZ){cZ.Compute(cY);},cX);})));};cv.List=function(cT){return cT.$0;};cv.Const=function(cT){return cv.Def(0,function(){return cT;});};cv.Def=function(cT,cU){return{Compute:cU,Duration:cT};};cv.Prolong=function(cT,cU){var cV,cW,cX;cV=cU.Compute;cW=cU.Duration;cX=J.Create(function(){return cU.Compute(cU.Duration);});return{Compute:function(cY){return cY>=cW?cX.f():cV(cY);},Duration:cT};};cw.$cctor=function(){cw.$cctor=a.ignore;cw.BatchUpdatesEnabled=true;};cx=g.FormatException=cN.Class({},cn,cx);cx.New$1=cN.Ctor(function(cT){this.message=cT;bP.setPrototypeOf(this,cx.prototype);},cx);cy.New=function(cT,cU){return{c:cT,r:cU};};cz.New=function(cT,cU){return{k:cT,ct:cU};};cA.$cctor=function(){cA.$cctor=a.ignore;cA.noneCT=cy.New(false,[]);cA.scheduler=new cE.New();cA.defCTS=[new b$.New()];cA.Zero=cp.Return();cA.GetCT=function(cT){cT.k({$:0,$0:cT.ct});};};cB.concat=function(cT){var cU,cV;cU=[];for(var cW in cT)cU.push.apply(cU,cT[cW]);return cU;};cC.$cctor=function(){cC.$cctor=a.ignore;cC.CubicInOut=cG.Custom(function(cT){var cU;cU=cT*cT;return 3*cU-2*(cU*cT);});cC.UseAnimations=true;};cD.Append=function(cT,cU){return cT.$==0?cU:cU.$==0?cT:{$:2,$0:cT,$1:cU};};cD.ToArray=function(cT){var cU;function cV(cW){if(cW.$==1)cU.push(cW.$0);else if(cW.$==2){cV(cW.$0);cV(cW.$1);}else if(cW.$==3)bj.iter(function(cX){cU.push(cX);},cW.$0);}cU=[];cV(cT);return cU.slice(0);};cD.Concat=function(cT){var cU;cU=bq.ofSeqNonCopying(cT);return bq.TreeReduce(cD.Empty(),cD.Append,cU);};cD.Empty=function(){cL.$cctor();return cL.Empty;};cE=cp.Scheduler=cN.Class({Fork:function(cT){var cU;cU=this;this.robin.push(cT);this.idle?(this.idle=false,a.setTimeout(function(){cU.tick();},0)):void 0;},tick:function(){var cT,cU,cV;cU=this;cV=cO.now();cT=true;while(cT)if(this.robin.length===0){this.idle=true;cT=false;}else{(this.robin.shift())();cO.now()-cV>40?(a.setTimeout(function(){cU.tick();},0),cT=false):void 0;}}},h,cE);cE.New=cN.Ctor(function(){h.New.call(this);this.idle=true;this.robin=[];},cE);cF=g.OperationCanceledException=cN.Class({},cn,cF);cF.New=cN.Ctor(function(cT){cF.New$1.call(this,"The operation was canceled.",null,cT);},cF);cF.New$1=cN.Ctor(function(cT,cU,cV){this.message=cT;this.inner=cU;bP.setPrototypeOf(this,cF.prototype);this.ct=cV;},cF);cG=u.Easing=cN.Class({},h,cG);cG.Custom=function(cT){return new cG.New(cT);};cG.New=cN.Ctor(function(cT){h.New.call(this);this.transformTime=cT;},cG);cH.Filter=function(cT,cU){return new b0.New$2(bj.filter(cT,cH.ToArray(cU)));};cH.Except=function(cT,cU){var cV;cV=new b0.New$2(cH.ToArray(cU));cV.ExceptWith(cH.ToArray(cT));return cV;};cH.ToArray=function(cT){var cU;cU=bj.create(cT.get_Count(),void 0);cT.CopyTo(cU);return cU;};cH.Intersect=function(cT,cU){var cV;cV=new b0.New$2(cH.ToArray(cT));cV.IntersectWith(cH.ToArray(cU));return cV;};cI.isBlank=function(cT){return _6.forall(cK.IsWhiteSpace,cT);};cJ.Children=function(cT,cU){var cV,cW,cX;if(cU!=null&&cU.$==1){cX=[];cV=cU.$0[0].nextSibling;while(cV!==cU.$0[1]){cX.push(cV);cV=cV.nextSibling;}return{$:0,$0:cX};}else return{$:0,$0:bj.init(cT.childNodes.length,(cW=cT.childNodes,function(cY){return cW[cY];}))};};cJ.Except=function(cT,cU){var cV;cV=cT.$0;return{$:0,$0:bj.filter(function(cW){return bj.forall(function(cX){return!(cW===cX);},cV);},cU.$0)};};cJ.Iter=function(cT,cU){bj.iter(cT,cU.$0);};cJ.DocChildren=function(cT){var cU;function cV(cW){if(cW!=null&&cW.$==2)cV(cW.$0.Current);else if(cW!=null&&cW.$==1)cU.push(cW.$0.El);else if(cW==null);else if(cW!=null&&cW.$==5)cU.push(cW.$0);else if(cW!=null&&cW.$==4)cU.push(cW.$0.Text);else if(cW!=null&&cW.$==6)bj.iter(function(cX){if(cX==null||cX.constructor===bP)cV(cX);else cU.push(cX);},cW.$0.Els);else{cV(cW.$0);cV(cW.$1);}}cU=[];cV(cT.Children);return{$:0,$0:bq.ofSeqNonCopying(cU)};};cK.IsWhiteSpace=function(cT){return cT.match(new a.RegExp("\\s"))!==null;};cL.$cctor=function(){cL.$cctor=a.ignore;cL.Empty={$:0};};cN.OnLoad(function(){p.mainProgram();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.Date=c.Date||{};e=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};f=a.WebSharper=a.WebSharper||{};g=f.Operators=f.Operators||{};h=f.Seq=f.Seq||{};i=f.Utils=f.Utils||{};j=a.EventTarget;k=a.Node;l=f.JavaScript=f.JavaScript||{};m=l.JS=l.JS||{};n=b.Library=b.Library||{};o=n.ParseO=n.ParseO||{};p=f.Unchecked=f.Unchecked||{};q=f.Numeric=f.Numeric||{};r=a.System=a.System||{};s=r.Guid=r.Guid||{};t=f.List=f.List||{};u=b.LibraryJS=b.LibraryJS||{};v=u.Date=u.Date||{};w=f.Enumerator=f.Enumerator||{};x=f.Obj=f.Obj||{};y=w.T=w.T||{};z=l.Pervasives=l.Pervasives||{};A=f.Arrays=f.Arrays||{};B=f.Strings=f.Strings||{};C=f.UI=f.UI||{};D=C.Doc=C.Doc||{};E=C.Client=C.Client||{};F=E.Templates=E.Templates||{};G=a.WindowOrWorkerGlobalScope;H=f.DateUtil=f.DateUtil||{};I=t.T=t.T||{};J=a.Object;K=C.View=C.View||{};L=C.DomUtility=C.DomUtility||{};M=f.Collections=f.Collections||{};N=M.Dictionary=M.Dictionary||{};O=C.Docs=C.Docs||{};P=C.AttrProxy=C.AttrProxy||{};Q=C.Snap=C.Snap||{};R=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};S=M.HashSet=M.HashSet||{};T=C.An=C.An||{};U=E.Settings=E.Settings||{};V=C.Abbrev=C.Abbrev||{};W=V.Mailbox=V.Mailbox||{};X=C.Elt=C.Elt||{};Y=C.Array=C.Array||{};Z=C.DocElemNode=C.DocElemNode||{};_0=a.CharacterData;_1=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_2=M.DictionaryUtil=M.DictionaryUtil||{};_3=F.Prepare=F.Prepare||{};_4=f.Slice=f.Slice||{};_5=M.KeyCollection=M.KeyCollection||{};_6=E.Docs=E.Docs||{};_7=_6.RunState=_6.RunState||{};_8=_6.NodeSet=_6.NodeSet||{};_9=C.Anims=C.Anims||{};_=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};$=a.Error;ba=f.FormatException=f.FormatException||{};bb=C.Updates=C.Updates||{};bc=C.Attrs=C.Attrs||{};bd=E.Attrs=E.Attrs||{};be=bd.Dyn=bd.Dyn||{};bf=V.Fresh=V.Fresh||{};bg=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bh=f.Concurrency=f.Concurrency||{};bi=C.AppendList=C.AppendList||{};bj=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bk=C.Easing=C.Easing||{};bl=bh.AsyncBody=bh.AsyncBody||{};bm=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bn=bh.CT=bh.CT||{};bo=V.HashSet=V.HashSet||{};bp=M.HashSetUtil=M.HashSetUtil||{};bq=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};br=bh.Scheduler=bh.Scheduler||{};bs=f.CancellationTokenSource=f.CancellationTokenSource||{};bt=_6.DomNodes=_6.DomNodes||{};bu=f.OperationCanceledException=f.OperationCanceledException||{};bv=f.Lazy=f.Lazy||{};bw=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bx=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};by=bx.LazyRecord=bx.LazyRecord||{};bz=f.Queue=f.Queue||{};bA=a.console;bB=a.IntelliFactory;bC=bB&&bB.Runtime;bD=a.jQuery;bE=a.Date;d.testCases=function(){e.$cctor();return e.testCases;};d.main=function(){var bF,bG,bH;function bI(bJ,bK){var bL;try{bL={$:0,$0:bK()};}catch(bM){bL=((function(bN){return function(bO){return bN(i.prettyPrint(bO));};}(function(bN){bA.log(bN);}))(bM),{$:1,$0:bM});}return[bJ,bL];}bF=h.map(function(bJ){return bI(bJ[0],bJ[1]);},d.testCases());bG=D.Element("div",[],[D.Element("h1",[],[D.TextNode("parseDateO2")]),D.Element("h3",[],[D.TextNode("Test Cases")]),D.Element("h4",[],[D.TextNode((((bC.Curried3(function(bJ,bK,bL){return bJ("Passed: "+a.String(bK)+"/"+a.String(bL));}))(a.id))(h.sumBy(function(bJ){var bK;bK=bJ[1];return bK.$==0?bK.$0?1:0:0;},bF)))(h.length(bF)))]),D.Element("table",[],t.ofSeq(h.delay(function(){return h.mapi(function(bJ,bK){var bL;bL=bK[1];return D.Element("tr",[],[D.Element("td",[],[D.TextNode((function(bM){return function(bN){return bM(a.String(bN)+".- ");};}(a.id))(bJ+1))]),D.Element("td",[],[D.TextNode(bK[0])]),D.Element("td",[],[D.TextNode(":")]),D.Element("td",[],[D.TextNode(bL.$==1?bL.$0.message:a.String(bL.$0))])]);},bF);})))]);bH=self.document.body;F.LoadLocalTemplates("");D.Run(bH,bG);};e.$cctor=function(){var bF;e.$cctor=a.ignore;function bG(bH){return bH+"T00:00:00";}e.parseDateO2=(bF=o.tryParseWith(function(bH){var bI,bJ;bI=0;return[(bJ=H.TryParse(bH),bJ!=null&&bJ.$==1&&(bI=bJ.$0,true)),bI];}),function(bH){return bF(bG(bH));});e.parseDateO=o.tryParseWith(function(bH){var bI,bJ;bI=0;return[(bJ=H.TryParse(bH),bJ!=null&&bJ.$==1&&(bI=bJ.$0,true)),bI];});e.parseIntO=o.tryParseWith(function(bH){var bI;bI=0;return[q.TryParseInt32(bH,{get:function(){return bI;},set:function(bJ){bI=bJ;}}),bI];});e.parseSingleO=o.tryParseWith(function(bH){var bI,bJ;bI=0;return[(bJ=a.Number(bH),a.isNaN(bJ)?false:(bI=bJ,true)),bI];});e.parseDoubleO=o.tryParseWith(function(bH){var bI,bJ;bI=0;return[(bJ=a.Number(bH),a.isNaN(bJ)?false:(bI=bJ,true)),bI];});e.parseGuidO=o.tryParseWith(function(bH){var bI;bI=null;return[s.TryParse(bH,{get:function(){return bI;},set:function(bJ){bI=bJ;}}),bI];});e["|Date|_|"]=o.parseDateO();e["|Int|_|"]=o.parseIntO();e["|Single|_|"]=o.parseSingleO();e["|Double|_|"]=o.parseDoubleO();e["|Guid|_|"]=o.parseGuidO();e.testCases=t.ofArray([["DateTime(Y,M,D)",function(){var bH,bI;return p.Equals((bH=(o.parseDateO2())("2019-03-08"),(n.print(bH),bH)),{$:1,$0:(bI=(new a.Date(2019,3-1,8)).getTime(),(n.print(bI),bI))});}],["toYYYYMMDD roundtrip",function(){var bH,bI,bJ;return p.Equals((bH=(bI=(bJ=(o.parseDateO2())("2019-03-08"),(n.print(bJ),bJ)),bI==null?null:{$:1,$0:v.toYYYYMMDD("-",bI.$0)}),(n.print(bH),bH)),{$:1,$0:"2019-03-08"});}]]);};g.FailWith=function(bF){throw new $(bF);};g.KeyValue=function(bF){return[bF.K,bF.V];};h.map=function(bF,bG){return{GetEnumerator:function(){var bH;bH=w.Get(bG);return new y.New(null,null,function(bI){return bH.MoveNext()&&(bI.c=bF(bH.Current()),true);},function(){bH.Dispose();});}};};h.sumBy=function(bF,bG){return h.fold(function(bH,bI){return bH+bF(bI);},0,bG);};h.length=function(bF){var bG,bH;bG=0;bH=w.Get(bF);try{while(bH.MoveNext())bG=bG+1;return bG;}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}};h.delay=function(bF){return{GetEnumerator:function(){return w.Get(bF());}};};h.mapi=function(bF,bG){return h.map2(bF,h.initInfinite(a.id),bG);};h.fold=function(bF,bG,bH){var bI,bJ;bI=bG;bJ=w.Get(bH);try{while(bJ.MoveNext())bI=bF(bI,bJ.Current());return bI;}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}};h.map2=function(bF,bG,bH){return{GetEnumerator:function(){var bI,bJ;bI=w.Get(bG);bJ=w.Get(bH);return new y.New(null,null,function(bK){return bI.MoveNext()&&bJ.MoveNext()&&(bK.c=bF(bI.Current(),bJ.Current()),true);},function(){bI.Dispose();bJ.Dispose();});}};};h.initInfinite=function(bF){return{GetEnumerator:function(){return new y.New(0,null,function(bG){bG.c=bF(bG.s);bG.s=bG.s+1;return true;},void 0);}};};h.head=function(bF){var bG;bG=w.Get(bF);try{return bG.MoveNext()?bG.Current():h.insufficient();}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}};h.iter=function(bF,bG){var bH;bH=w.Get(bG);try{while(bH.MoveNext())bF(bH.Current());}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}};h.max=function(bF){var bG,bH,bI;bG=w.Get(bF);try{if(!bG.MoveNext())h.seqEmpty();bH=bG.Current();while(bG.MoveNext()){bI=bG.Current();p.Compare(bI,bH)===1?bH=bI:void 0;}return bH;}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}};h.seqEmpty=function(){return g.FailWith("The input sequence was empty.");};i.prettyPrint=function(bF){var bG,bH;function bI(bJ,bK){return bJ+" = "+i.prettyPrint(bK);}return bF===null?"null":(bG=typeof bF,bG=="string"?"\""+bF+"\"":bG=="object"?bF instanceof a.Array?"[|"+B.concat("; ",A.map(i.prettyPrint,bF))+"|]":(bH=a.String(bF),bH==="[object Object]"?"{"+B.concat("; ",A.map(function(bJ){return bI(bJ[0],bJ[1]);},m.GetFields(bF)))+"}":bH):a.String(bF));};i.toSafe=function(bF){return bF==null?"":bF;};i.padNumLeft=function(bF,bG){var bH;bH=A.get(bF,0);return bH===" "||bH==="+"||bH==="-"?bH+B.PadLeftWith(bF.substr(1),bG-1,"0"):B.PadLeftWith(bF,bG,"0");};m.GetFields=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push([bI,bF[bI]]);return bG;};m.GetFieldValues=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push(bF[bI]);return bG;};o.tryParseWith=function(bF){function bG(bH,bI){return bH?{$:1,$0:bI}:null;}return function(bH){return bG.apply(null,bF(bH));};};o.parseDateO=function(){e.$cctor();return e.parseDateO;};o.parseIntO=function(){e.$cctor();return e.parseIntO;};o.parseSingleO=function(){e.$cctor();return e.parseSingleO;};o.parseDoubleO=function(){e.$cctor();return e.parseDoubleO;};o.parseGuidO=function(){e.$cctor();return e.parseGuidO;};o.parseDateO2=function(){e.$cctor();return e.parseDateO2;};p.Equals=function(bF,bG){var bH,bI,bJ,bK;if(bF===bG)return true;else{bH=typeof bF;if(bH=="object"){if(bF===null||bF===void 0||bG===null||bG===void 0)return false;else if("Equals"in bF)return bF.Equals(bG);else if(bF instanceof a.Array&&bG instanceof a.Array)return p.arrayEquals(bF,bG);else if(bF instanceof a.Date&&bG instanceof a.Date)return p.dateEquals(bF,bG);else{bI=[true];for(var bL in bF)if(function(bM){bI[0]=!bF.hasOwnProperty(bM)||bG.hasOwnProperty(bM)&&p.Equals(bF[bM],bG[bM]);return!bI[0];}(bL))break;if(bI[0]){for(var bM in bG)if(function(bN){bI[0]=!bG.hasOwnProperty(bN)||bF.hasOwnProperty(bN);return!bI[0];}(bM))break;}return bI[0];}}else return bH=="function"&&("$Func"in bF?bF.$Func===bG.$Func&&bF.$Target===bG.$Target:"$Invokes"in bF&&"$Invokes"in bG&&p.arrayEquals(bF.$Invokes,bG.$Invokes));}};p.arrayEquals=function(bF,bG){var bH,bI;if(A.length(bF)===A.length(bG)){bH=true;bI=0;while(bH&&bI<A.length(bF)){!p.Equals(A.get(bF,bI),A.get(bG,bI))?bH=false:void 0;bI=bI+1;}return bH;}else return false;};p.dateEquals=function(bF,bG){return bF.getTime()===bG.getTime();};p.Hash=function(bF){var bG;bG=typeof bF;return bG=="function"?0:bG=="boolean"?bF?1:0:bG=="number"?bF:bG=="string"?p.hashString(bF):bG=="object"?bF==null?0:bF instanceof a.Array?p.hashArray(bF):p.hashObject(bF):0;};p.hashString=function(bF){var bG,bH,bI;if(bF===null)return 0;else{bG=5381;for(bH=0,bI=bF.length-1;bH<=bI;bH++)bG=p.hashMix(bG,bF[bH].charCodeAt());return bG;}};p.hashArray=function(bF){var bG,bH,bI;bG=-34948909;for(bH=0,bI=A.length(bF)-1;bH<=bI;bH++)bG=p.hashMix(bG,p.Hash(A.get(bF,bH)));return bG;};p.hashObject=function(bF){var bG,bH;if("GetHashCode"in bF)return bF.GetHashCode();else{bG=[0];for(var bI in bF)if(function(bJ){bG[0]=p.hashMix(p.hashMix(bG[0],p.hashString(bJ)),p.Hash(bF[bJ]));return false;}(bI))break;return bG[0];}};p.hashMix=function(bF,bG){return(bF<<5)+bF+bG;};p.Compare=function(bF,bG){var bH,bI,bJ,bK,bL,bM;if(bF===bG)return 0;else{bI=typeof bF;switch(bI=="function"?1:bI=="boolean"?2:bI=="number"?2:bI=="string"?2:bI=="object"?3:0){case 0:return typeof bG=="undefined"?0:-1;case 1:return g.FailWith("Cannot compare function values.");case 2:return bF<bG?-1:1;case 3:if(bF===null)bJ=-1;else if(bG===null)bJ=1;else if("CompareTo"in bF)bJ=bF.CompareTo(bG);else if("CompareTo0"in bF)bJ=bF.CompareTo0(bG);else if(bF instanceof a.Array&&bG instanceof a.Array)bJ=p.compareArrays(bF,bG);else if(bF instanceof a.Date&&bG instanceof a.Date)bJ=p.compareDates(bF,bG);else{bK=[0];for(var bN in bF)if(function(bO){return!bF.hasOwnProperty(bO)?false:!bG.hasOwnProperty(bO)?(bK[0]=1,true):(bK[0]=p.Compare(bF[bO],bG[bO]),bK[0]!==0);}(bN))break;if(bK[0]===0){for(var bO in bG)if(function(bP){return!bG.hasOwnProperty(bP)?false:!bF.hasOwnProperty(bP)&&(bK[0]=-1,true);}(bO))break;}bJ=bK[0];}return bJ;}}};p.compareArrays=function(bF,bG){var bH,bI;if(A.length(bF)<A.length(bG))return -1;else if(A.length(bF)>A.length(bG))return 1;else{bH=0;bI=0;while(bH===0&&bI<A.length(bF)){bH=p.Compare(A.get(bF,bI),A.get(bG,bI));bI=bI+1;}return bH;}};p.compareDates=function(bF,bG){return p.Compare(bF.getTime(),bG.getTime());};q.TryParseInt32=function(bF,bG){return q.TryParse(bF,-2147483648,2147483647,bG);};s.TryParse=function(bF,bG){try{bG.set(s.Parse(bF));return true;}catch(bH){return false;}};s.Parse=function(bF){var bG,bH,bI;try{return s.ParseExact(bF,"D");}catch(bJ){try{bG=s.ParseExact(bF,"B");}catch(bK){try{bH=s.ParseExact(bF,"P");}catch(bL){try{bI=s.ParseExact(bF,"N");}catch(bM){bI=s.ParseExact(bF,"X");}bH=bI;}bG=bH;}return bG;}};s.ParseExact=function(bF,bG){var bH,bI,bJ,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU;function bK(bV){var bW,bX,bY,bZ;for(bW=0,bX=35;bW<=bX;bW++){bW===8||(bW===13||(bW===18||bW===23))?bV[bW]!=="-"?s.ShapeError():void 0:(bZ=bV[bW],!("0"<=bZ&&bZ<="9"||"a"<=bZ&&bZ<="f")?s.ShapeError():void 0);}return bV;}bL=bG.toUpperCase();if(bL==="N"){bM=B.Trim(bF).toLowerCase();if(bM.length!==32)s.ShapeError();for(bN=0,bO=31;bN<=bO;bN++){bP=bM[bN];!("0"<=bP&&bP<="9"||"a"<=bP&&bP<="f")?s.ShapeError():void 0;}return B.Substring(bM,0,8)+"-"+B.Substring(bM,8,4)+"-"+B.Substring(bM,12,4)+"-"+B.Substring(bM,16,4)+"-"+bM.substring(20);}else if(bL==="D"){bH=B.Trim(bF).toLowerCase();bH.length!==36?s.ShapeError():void 0;return bK(bH);}else if(bL==="B"){bI=B.Trim(bF).toLowerCase();bI.length!==38||bI[0]!=="{"||bI[17]!=="}"?s.ShapeError():void 0;return bK(B.Substring(bI,1,36));}else if(bL==="P"){bJ=B.Trim(bF).toLowerCase();bJ.length!==38||bJ[0]!=="("||bJ[17]!==")"?s.ShapeError():void 0;return bK(B.Substring(bJ,1,36));}else if(bL==="X"){bQ=B.Trim(bF).toLowerCase();if(bQ.length!==68)s.ShapeError();for(bR=0,bS=67;bR<=bS;bR++){switch(bR){case 26:case 0:if(bQ[bR]!=="{")s.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bQ[bR]!=="0")s.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bQ[bR]!=="x")s.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bQ[bR]!==",")s.ShapeError();break;case 67:case 66:if(bQ[bR]!=="{")s.ShapeError();break;default:bU=bQ[bR];!("0"<=bU&&bU<="9"||"a"<=bU&&bU<="f")?s.ShapeError():void 0;break;}}return B.Substring(bQ,3,8)+"-"+B.Substring(bQ,14,4)+"-"+B.Substring(bQ,21,4)+"-"+B.Substring(bQ,29,2)+B.Substring(bQ,34,2)+"-"+B.Substring(bQ,39,2)+B.Substring(bQ,44,2)+B.Substring(bQ,49,2)+B.Substring(bQ,54,2)+B.Substring(bQ,59,2)+B.Substring(bQ,64,2);}else return s.FormatError();};s.ShapeError=function(){throw new ba.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};s.FormatError=function(){throw new ba.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};t.ofArray=function(bF){var bG,bH,bI;bG=I.Empty;for(bH=A.length(bF)-1,bI=0;bH>=bI;bH--)bG=new I({$:1,$0:A.get(bF,bH),$1:bG});return bG;};t.ofSeq=function(bF){var bG,bH,bI,bJ,bK,bL;if(bF instanceof I)return bF;else if(bF instanceof a.Array)return t.ofArray(bF);else{bG=w.Get(bF);try{bI=bG.MoveNext();if(!bI)bH=I.Empty;else{bK=new I({$:1});bJ=bK;while(bI){bJ.$0=bG.Current();bG.MoveNext()?bJ=(bL=new I({$:1}),bJ.$1=bL,bL):bI=false;}bJ.$1=I.Empty;bH=bK;}return bH;}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}}};t.head=function(bF){return bF.$==1?bF.$0:t.listEmpty();};t.tail=function(bF){return bF.$==1?bF.$1:t.listEmpty();};t.listEmpty=function(){return g.FailWith("The input list was empty.");};n.print=function(bF){if(typeof bF=="string")((function(bG){return function(bH){return bG(i.toSafe(bH));};}(function(bG){bA.log(bG);}))(bF));else((function(bG){return function(bH){return bG(i.prettyPrint(bH));};}(function(bG){bA.log(bG);}))(bF));};v.toYYYYMMDD=function(bF,bG){return((((((bC.Curried(function(bH,bI,bJ,bK,bL,bM){return bH(a.String(bI)+i.toSafe(bJ)+i.padNumLeft(a.String(bK),2)+i.toSafe(bL)+i.padNumLeft(a.String(bM),2));},6))(a.id))((new a.Date(bG)).getFullYear()))(bF))((new a.Date(bG)).getMonth()+1))(bF))((new a.Date(bG)).getDate());};w.Get=function(bF){return bF instanceof a.Array?w.ArrayEnumerator(bF):p.Equals(typeof bF,"string")?w.StringEnumerator(bF):bF.GetEnumerator();};w.ArrayEnumerator=function(bF){return new y.New(0,null,function(bG){var bH;bH=bG.s;return bH<A.length(bF)&&(bG.c=A.get(bF,bH),bG.s=bH+1,true);},void 0);};w.StringEnumerator=function(bF){return new y.New(0,null,function(bG){var bH;bH=bG.s;return bH<bF.length&&(bG.c=bF[bH],bG.s=bH+1,true);},void 0);};w.Get0=function(bF){return bF instanceof a.Array?w.ArrayEnumerator(bF):p.Equals(typeof bF,"string")?w.StringEnumerator(bF):"GetEnumerator0"in bF?bF.GetEnumerator0():bF.GetEnumerator();};x=f.Obj=bC.Class({Equals:function(bF){return this===bF;},GetHashCode:function(){return -1;}},null,x);x.New=bC.Ctor(function(){},x);y=w.T=bC.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},x,y);y.New=bC.Ctor(function(bF,bG,bH,bI){x.New.call(this);this.s=bF;this.c=bG;this.n=bH;this.d=bI;},y);z.NewFromSeq=function(bF){var bG,bH,bI;bG={};bH=w.Get(bF);try{while(bH.MoveNext()){bI=bH.Current();bG[bI[0]]=bI[1];}}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}return bG;};A.get=function(bF,bG){A.checkBounds(bF,bG);return bF[bG];};A.length=function(bF){return bF.dims===2?bF.length*bF.length:bF.length;};A.checkBounds=function(bF,bG){if(bG<0||bG>=bF.length)g.FailWith("Index was outside the bounds of the array.");};A.set=function(bF,bG,bH){A.checkBounds(bF,bG);bF[bG]=bH;};A.map=function(bF,bG){var bH,bI,bJ;bH=new a.Array(bG.length);for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH[bI]=bF(bG[bI]);return bH;};A.ofSeq=function(bF){var bG,bH;if(bF instanceof a.Array)return bF.slice();else if(bF instanceof I)return A.ofList(bF);else{bG=[];bH=w.Get(bF);try{while(bH.MoveNext())bG.push(bH.Current());return bG;}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}}};A.ofList=function(bF){var bG,bH;bH=[];bG=bF;while(!(bG.$==0)){bH.push(t.head(bG));bG=t.tail(bG);}return bH;};A.exists=function(bF,bG){var bH,bI,bJ,bK;bH=false;bI=0;bK=A.length(bG);while(!bH&&bI<bK)if(bF(bG[bI]))bH=true;else bI=bI+1;return bH;};A.tryPick=function(bF,bG){var bH,bI,bJ;bH=null;bI=0;while(bI<bG.length&&bH==null){bJ=bF(bG[bI]);bJ!=null&&bJ.$==1?bH=bJ:void 0;bI=bI+1;}return bH;};A.tryFindIndex=function(bF,bG){var bH,bI;bH=null;bI=0;while(bI<bG.length&&bH==null){bF(bG[bI])?bH={$:1,$0:bI}:void 0;bI=bI+1;}return bH;};A.foldBack=function(bF,bG,bH){var bI,bJ,bK,bL,bM;bI=bH;bK=bG.length;for(bL=1,bM=bK;bL<=bM;bL++)bI=bF(bG[bK-bL],bI);return bI;};A.filter=function(bF,bG){var bH,bI,bJ;bH=[];for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)if(bF(bG[bI]))bH.push(bG[bI]);return bH;};A.iter=function(bF,bG){var bH,bI;for(bH=0,bI=bG.length-1;bH<=bI;bH++)bF(bG[bH]);};A.pick=function(bF,bG){var bH;bH=A.tryPick(bF,bG);return bH==null?g.FailWith("KeyNotFoundException"):bH.$0;};A.choose=function(bF,bG){var bH,bI,bJ,bK;bH=[];for(bI=0,bJ=bG.length-1;bI<=bJ;bI++){bK=bF(bG[bI]);bK==null?void 0:bH.push(bK.$0);}return bH;};A.concat=function(bF){return a.Array.prototype.concat.apply([],A.ofSeq(bF));};A.create=function(bF,bG){var bH,bI,bJ;bH=new a.Array(bF);for(bI=0,bJ=bF-1;bI<=bJ;bI++)bH[bI]=bG;return bH;};A.init=function(bF,bG){var bH,bI,bJ;bF<0?g.FailWith("Negative size given."):null;bH=new a.Array(bF);for(bI=0,bJ=bF-1;bI<=bJ;bI++)bH[bI]=bG(bI);return bH;};A.forall=function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=A.length(bG);while(bH&&bI<bK)if(bF(bG[bI]))bI=bI+1;else bH=false;return bH;};B.concat=function(bF,bG){return A.ofSeq(bG).join(bF);};B.PadLeftWith=function(bF,bG,bH){return bG>bF.length?a.Array(bG-bF.length+1).join(bH)+bF:bF;};B.Trim=function(bF){return bF.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};B.Substring=function(bF,bG,bH){return bF.substr(bG,bH);};B.SplitChars=function(bF,bG,bH){return B.Split(bF,new a.RegExp("["+B.RegexEscape(bG.join(""))+"]"),bH);};B.StartsWith=function(bF,bG){return bF.substring(0,bG.length)==bG;};B.Split=function(bF,bG,bH){return bH===1?A.filter(function(bI){return bI!=="";},B.SplitWith(bF,bG)):B.SplitWith(bF,bG);};B.RegexEscape=function(bF){return bF.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};B.SplitWith=function(bF,bG){return bF.split(bG);};D=C.Doc=bC.Class({},x,D);D.TextNode=function(bF){return D.Mk({$:5,$0:L.CreateText(bF)},K.Const());};D.Run=function(bF,bG){O.LinkElement(bF,bG.docNode);D.RunInPlace(false,bF,bG);};D.Element=function(bF,bG,bH){var bI,bJ;bI=P.Concat(bG);bJ=D.Concat(bH);return X.New(L.CreateElement(bF),bI,bJ);};D.Mk=function(bF,bG){return new D.New(bF,bG);};D.RunInPlace=function(bF,bG,bH){var bI;bI=O.CreateRunState(bG,bH.docNode);K.Sink(T.get_UseAnimations()||U.BatchUpdatesEnabled()?W.StartProcessor(O.PerformAnimatedUpdate(bF,bI,bH.docNode)):function(){O.PerformSyncUpdate(bF,bI,bH.docNode);},bH.updates);};D.Concat=function(bF){var bG;bG=Y.ofSeqNonCopying(bF);return Y.TreeReduce(D.get_Empty(),D.Append,bG);};D.Append=function(bF,bG){return D.Mk({$:0,$0:bF.docNode,$1:bG.docNode},K.Map2Unit(bF.updates,bG.updates));};D.get_Empty=function(){return D.Mk(null,K.Const());};D.New=bC.Ctor(function(bF,bG){x.New.call(this);this.docNode=bF;this.updates=bG;},D);F.LoadLocalTemplates=function(bF){!F.LocalTemplatesLoaded()?(F.set_LocalTemplatesLoaded(true),F.LoadNestedTemplates(self.document.body,"")):void 0;F.LoadedTemplates().set_Item(bF,F.LoadedTemplateFile(""));};F.LocalTemplatesLoaded=function(){R.$cctor();return R.LocalTemplatesLoaded;};F.set_LocalTemplatesLoaded=function(bF){R.$cctor();R.LocalTemplatesLoaded=bF;};F.LoadNestedTemplates=function(bF,bG){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV;function bH(bW){var bX,bY;if(!bI.ContainsKey(bW)){bX=(bY=null,[bJ.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?(bV.Add(bW),bJ.Remove(bW),F.PrepareTemplateStrict(bG,{$:1,$0:bW},bX[1][0],{$:1,$0:bX[1][1]},{$:1,$0:bH})):bA.warn(bV.Contains(bW)?"Encountered loop when instantiating "+bW:"Local template does not exist: "+bW);}}bI=F.LoadedTemplateFile(bG);bJ=new N.New$5();bK=bF.querySelectorAll("[ws-template]");for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=bK[bL];bO=bN.getAttribute("ws-template").toLowerCase();bN.removeAttribute("ws-template");bJ.set_Item(bO,[[bN],F.FakeRootSingle(bN)]);}bP=bF.querySelectorAll("[ws-children-template]");for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];bT=bS.getAttribute("ws-children-template").toLowerCase();bS.removeAttribute("ws-children-template");bJ.set_Item(bT,(bU=L.ChildrenArray(bS),[bU,F.FakeRoot(bU)]));}bV=new S.New$3();while(bJ.count>0)bH(h.head(bJ.get_Keys()));};F.LoadedTemplates=function(){R.$cctor();return R.LoadedTemplates;};F.LoadedTemplateFile=function(bF){var bG,bH,bI;bG=(bH=null,[F.LoadedTemplates().TryGetValue(bF,{get:function(){return bH;},set:function(bJ){bH=bJ;}}),bH]);return bG[0]?bG[1]:(bI=new N.New$5(),(F.LoadedTemplates().set_Item(bF,bI),bI));};F.FakeRootSingle=function(bF){var bG,bH,bI;bF.removeAttribute("ws-template");bG=bF.getAttribute("ws-replace");bG===null?void 0:(bF.removeAttribute("ws-replace"),bH=bF.parentNode,p.Equals(bH,null)?void 0:(bI=self.document.createElement(bF.tagName),bI.setAttribute("ws-replace",bG),bH.replaceChild(bI,bF)));return F.FakeRoot([bF]);};F.FakeRoot=function(bF){var bG,bH,bI;bG=self.document.createElement("div");for(bH=0,bI=bF.length-1;bH<=bI;bH++)bG.appendChild(A.get(bF,bH));return bG;};F.PrepareTemplateStrict=function(bF,bG,bH,bI,bJ){var bK,bL;function bM(bR,bS){var bT,bU,bV,bW,bX,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch;function bY(ci){}while(true)switch(bR){case 0:if(bS!==null){bT=bS.nextSibling;if(p.Equals(bS.nodeType,k.TEXT_NODE))_3.convertTextNode(bS);else if(p.Equals(bS.nodeType,k.ELEMENT_NODE))bO(bS);bS=bT;}else return null;break;case 1:bZ=_4.string(bS.nodeName,{$:1,$0:3},null).toLowerCase();b0=(bU=bZ.indexOf("."),bU===-1?[bF,bZ]:[_4.string(bZ,null,{$:1,$0:bU-1}),_4.string(bZ,{$:1,$0:bU+1},null)]);b1=b0[1];b2=b0[0];if(b2!==""&&!F.LoadedTemplates().ContainsKey(b2))return _3.failNotLoaded(b1);else{if(b2===""&&bJ!=null)bJ.$0(b1);b3=F.LoadedTemplates().get_Item(b2);if(!b3.ContainsKey(b1))return _3.failNotLoaded(b1);else{b4=b3.get_Item(b1);b5=b4.cloneNode(true);b6=new S.New$3();b7=new N.New$5();b8=bS.attributes;for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=b8.item(b9).name.toLowerCase();b7.set_Item(b$,(ca=b8.item(b9).nodeValue,ca===""?b$:ca.toLowerCase()));!b6.Add(b$)?bA.warn("Hole mapped twice",b$):void 0;}for(cb=0,cc=bS.childNodes.length-1;cb<=cc;cb++){cd=bS.childNodes[cb];p.Equals(cd.nodeType,k.ELEMENT_NODE)?!b6.Add(cd.nodeName.toLowerCase())?bA.warn("Hole filled twice",b1):void 0:void 0;}ce=bS.childNodes.length===1&&p.Equals(bS.firstChild.nodeType,k.TEXT_NODE);if(ce){bW=_3.fillTextHole(b5,bS.firstChild.textContent,b1);((function(ci){return function(cj){if(cj!=null)ci(cj.$0);};}((bX=function(ci){return function(cj){return ci.Add(cj);};}(b6),function(ci){return bY(bX(ci));})))(bW));}_3.removeHolesExcept(b5,b6);if(!ce){for(cf=0,cg=bS.childNodes.length-1;cf<=cg;cf++){ch=bS.childNodes[cf];p.Equals(ch.nodeType,k.ELEMENT_NODE)?ch.hasAttributes()?_3.fillInstanceAttrs(b5,ch):bN(b5,ch):void 0;}}_3.mapHoles(b5,b7);_3.fill(b5,bS.parentNode,bS);bS.parentNode.removeChild(bS);return;}}break;}}function bN(bR,bS){var bT,bV,bW;function bU(bX,bY){var bZ,b0,b1;if(bV==="title"&&bS.hasChildNodes()){bZ=bD.parseHTML(bS.textContent);bS.removeChild(bS.firstChild);for(b0=0,b1=bZ.length-1;b0<=b1;b0++)bS.appendChild(A.get(bZ,b0));}else null;bO(bS);return _3.fill(bS,bX,bY);}bV=bS.nodeName.toLowerCase();L.IterSelector(bR,"[ws-attr-holes]",function(bX){var bY,bZ,b0,b1,b2;bY=B.SplitChars(bX.getAttribute("ws-attr-holes"),[" "],1);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=A.get(bY,bZ);bX.setAttribute(b1,(b2=new a.RegExp("\\${"+bV+"}","ig"),bX.getAttribute(b1).replace(b2,bS.textContent)));}});bW=bR.querySelector("[ws-hole="+bV+"]");if(p.Equals(bW,null)){bT=bR.querySelector("[ws-replace="+bV+"]");return p.Equals(bT,null)?null:(bU(bT.parentNode,bT),void bT.parentNode.removeChild(bT));}else{while(bW.hasChildNodes())bW.removeChild(bW.lastChild);bW.removeAttribute("ws-hole");return bU(bW,null);}}function bO(bR){if(B.StartsWith(bR.nodeName.toLowerCase(),"ws-"))bQ(bR);else{_3.convertAttrs(bR);bP(bR.firstChild);}}function bP(bR){return bM(0,bR);}function bQ(bR){return bM(1,bR);}bK=bI==null?F.FakeRoot(bH):bI.$0;bL=(bG==null?"":bG.$0).toLowerCase();F.LoadedTemplateFile(bF).set_Item(bL,bK);A.length(bH)>0?(function(bR){var bS,bT,bU,bV;while(true){bS=bR.querySelector("[ws-template]");if(p.Equals(bS,null)){bT=bR.querySelector("[ws-children-template]");if(p.Equals(bT,null))return null;else{bU=bT.getAttribute("ws-children-template");bT.removeAttribute("ws-children-template");F.PrepareTemplateStrict(bF,{$:1,$0:bU},L.ChildrenArray(bT),null,null);bR=bR;}}else{bV=bS.getAttribute("ws-template");(F.PrepareSingleTemplate(bF,{$:1,$0:bV},bS))(null);bR=bR;}}}(bK),bP(A.get(bH,0))):void 0;};F.PrepareSingleTemplate=function(bF,bG,bH){var bI,bJ,bK;bI=F.FakeRootSingle(bH);bJ=[bH];bK={$:1,$0:bI};return function(bL){F.PrepareTemplateStrict(bF,bG,bJ,bK,bL);};};F.TextHoleRE=function(){R.$cctor();return R.TextHoleRE;};H.TryParse=function(bF){var bG;bG=bE.parse(bF);return a.isNaN(bG)?null:{$:1,$0:bG};};q.TryParse=function(bF,bG,bH,bI){var bJ,bK;bJ=+bF;bK=bJ===bJ-bJ%1&&bJ>=bG&&bJ<=bH;bK?bI.set(bJ):void 0;return bK;};I=t.T=bC.Class({GetEnumerator:function(){return new y.New(this,null,function(bF){var bG;bG=bF.s;return bG.$==0?false:(bF.c=bG.$0,bF.s=bG.$1,true);},void 0);},GetEnumerator0:function(){return w.Get(this);}},null,I);I.Empty=new I({$:0});K.Const=function(bF){var bG;bG=Q.New({$:0,$0:bF});return function(){return bG;};};K.Sink=function(bF,bG){function bH(){Q.WhenRun(bG(),bF,function(){bh.scheduler().Fork(bH);});}bh.scheduler().Fork(bH);};K.Map2Unit=function(bF,bG){return K.CreateLazy(function(){return Q.Map2Unit(bF(),bG());});};K.CreateLazy=function(bF){var bG;bG={c:null,o:bF};return function(){var bH,bI;bH=bG.c;return bH===null?(bH=bG.o(),bG.c=bH,(bI=bH.s,bI!=null&&bI.$==0)?bG.o=null:Q.WhenObsoleteRun(bH,function(){bG.c=null;}),bH):bH;};};L.CreateText=function(bF){return L.Doc().createTextNode(bF);};L.CreateElement=function(bF){return L.Doc().createElement(bF);};L.Doc=function(){_1.$cctor();return _1.Doc;};L.ChildrenArray=function(bF){var bG,bH,bI;bG=[];for(bH=0,bI=bF.childNodes.length-1;bH<=bI;bH++)bG.push(bF.childNodes[bH]);return bG;};L.IterSelector=function(bF,bG,bH){var bI,bJ,bK;bI=bF.querySelectorAll(bG);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)bH(bI[bJ]);};L.InsertAt=function(bF,bG,bH){var bI;if(!(bH.parentNode===bF&&bG===(bI=bH.nextSibling,p.Equals(bI,null)?null:bI)))bF.insertBefore(bH,bG);};L.RemoveNode=function(bF,bG){if(bG.parentNode===bF)bF.removeChild(bG);};N=M.Dictionary=bC.Class({set_Item:function(bF,bG){this.set(bF,bG);},ContainsKey:function(bF){var bG,bH;bG=this;bH=this.data[this.hash(bF)];return bH==null?false:A.exists(function(bI){return bG.equals.apply(null,[(g.KeyValue(bI))[0],bF]);},bH);},TryGetValue:function(bF,bG){var bH,bI,bJ;bH=this;bI=this.data[this.hash(bF)];return bI==null?false:(bJ=A.tryPick(function(bK){var bL;bL=g.KeyValue(bK);return bH.equals.apply(null,[bL[0],bF])?{$:1,$0:bL[1]}:null;},bI),bJ!=null&&bJ.$==1&&(bG.set(bJ.$0),true));},Remove:function(bF){return this.remove(bF);},get_Keys:function(){return new _5.New(this);},set:function(bF,bG){var bH,bI,bJ,bK;bH=this;bI=this.hash(bF);bJ=this.data[bI];bJ==null?(this.count=this.count+1,this.data[bI]=new a.Array({K:bF,V:bG})):(bK=A.tryFindIndex(function(bL){return bH.equals.apply(null,[(g.KeyValue(bL))[0],bF]);},bJ),bK==null?(this.count=this.count+1,bJ.push({K:bF,V:bG})):bJ[bK.$0]={K:bF,V:bG});},remove:function(bF){var bG,bH,bI,bJ;bG=this;bH=this.hash(bF);bI=this.data[bH];return bI==null?false:(bJ=A.filter(function(bK){return!bG.equals.apply(null,[(g.KeyValue(bK))[0],bF]);},bI),A.length(bJ)<bI.length&&(this.count=this.count-1,this.data[bH]=bJ,true));},get_Item:function(bF){return this.get(bF);},get:function(bF){var bG,bH;bG=this;bH=this.data[this.hash(bF)];return bH==null?_2.notPresent():A.pick(function(bI){var bJ;bJ=g.KeyValue(bI);return bG.equals.apply(null,[bJ[0],bF])?{$:1,$0:bJ[1]}:null;},bH);},GetEnumerator:function(){return w.Get0(this);},GetEnumerator0:function(){return w.Get0(A.concat(m.GetFieldValues(this.data)));}},x,N);N.New$5=bC.Ctor(function(){N.New$6.call(this,[],p.Equals,p.Hash);},N);N.New$6=bC.Ctor(function(bF,bG,bH){var bI,bJ;x.New.call(this);this.equals=bG;this.hash=bH;this.count=0;this.data=[];bI=w.Get(bF);try{while(bI.MoveNext()){bJ=bI.Current();this.set(bJ.K,bJ.V);}}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}},N);O.LinkElement=function(bF,bG){O.InsertDoc(bF,bG,null);};O.InsertDoc=function(bF,bG,bH){var bI;return bG!=null&&bG.$==1?O.InsertNode(bF,bG.$0.El,bH):bG!=null&&bG.$==2?(bI=bG.$0,(bI.Dirty=false,O.InsertDoc(bF,bI.Current,bH))):bG==null?bH:bG!=null&&bG.$==4?O.InsertNode(bF,bG.$0.Text,bH):bG!=null&&bG.$==5?O.InsertNode(bF,bG.$0,bH):bG!=null&&bG.$==6?A.foldBack(function(bJ,bK){return bJ==null||bJ.constructor===J?O.InsertDoc(bF,bJ,bK):O.InsertNode(bF,bJ,bK);},bG.$0.Els,bH):O.InsertDoc(bF,bG.$0,O.InsertDoc(bF,bG.$1,bH));};O.CreateRunState=function(bF,bG){return _7.New(_8.get_Empty(),O.CreateElemNode(bF,bc.EmptyAttr(),bG));};O.PerformAnimatedUpdate=function(bF,bG,bH){var bI;return T.get_UseAnimations()?(bI=null,bh.Delay(function(){var bJ,bK,bL;bJ=_8.FindAll(bH);bK=O.ComputeChangeAnim(bG,bJ);bL=O.ComputeEnterAnim(bG,bJ);return bh.Bind(T.Play(T.Append(bK,O.ComputeExitAnim(bG,bJ))),function(){return bh.Bind(O.SyncElemNodesNextFrame(bF,bG),function(){return bh.Bind(T.Play(bL),function(){bG.PreviousNodes=bJ;return bh.Return(null);});});});})):O.SyncElemNodesNextFrame(bF,bG);};O.PerformSyncUpdate=function(bF,bG,bH){var bI;bI=_8.FindAll(bH);O.SyncElemNode(bF,bG.Top);bG.PreviousNodes=bI;};O.InsertNode=function(bF,bG,bH){L.InsertAt(bF,bH,bG);return bG;};O.CreateElemNode=function(bF,bG,bH){var bI;O.LinkElement(bF,bH);bI=bc.Insert(bF,bG);return Z.New(bI,bH,null,bF,bf.Int(),bC.GetOptional(bI.OnAfterRender));};O.SyncElemNodesNextFrame=function(bF,bG){function bH(bI){a.requestAnimationFrame(function(){O.SyncElemNode(bF,bG.Top);bI();});}return U.BatchUpdatesEnabled()?bh.FromContinuations(function(bI,bJ,bK){return bH.apply(null,[bI,bJ,bK]);}):(O.SyncElemNode(bF,bG.Top),bh.Return(null));};O.ComputeExitAnim=function(bF,bG){return T.Concat(A.map(function(bH){return bc.GetExitAnim(bH.Attr);},_8.ToArray(_8.Except(bG,_8.Filter(function(bH){return bc.HasExitAnim(bH.Attr);},bF.PreviousNodes)))));};O.ComputeEnterAnim=function(bF,bG){return T.Concat(A.map(function(bH){return bc.GetEnterAnim(bH.Attr);},_8.ToArray(_8.Except(bF.PreviousNodes,_8.Filter(function(bH){return bc.HasEnterAnim(bH.Attr);},bG)))));};O.ComputeChangeAnim=function(bF,bG){var bH;function bI(bJ){return bc.HasChangeAnim(bJ.Attr);}bH=function(bJ){return _8.Filter(bI,bJ);};return T.Concat(A.map(function(bJ){return bc.GetChangeAnim(bJ.Attr);},_8.ToArray(_8.Intersect(bH(bF.PreviousNodes),bH(bG)))));};O.SyncElemNode=function(bF,bG){!bF?O.SyncElement(bG):void 0;O.Sync(bG.Children);O.AfterRender(bG);};O.SyncElement=function(bF){function bG(bH){function bI(bJ){var bK,bL;return bJ!=null&&bJ.$==0?bI(bJ.$0)||bI(bJ.$1):bJ!=null&&bJ.$==2?(bK=bJ.$0,bK.Dirty||bI(bK.Current)):bJ!=null&&bJ.$==6&&(bL=bJ.$0,bL.Dirty||A.exists(bG,bL.Holes));}return bI(bH.Children);}bc.Sync(bF.El,bF.Attr);bG(bF)?O.DoSyncElement(bF):void 0;};O.Sync=function(bF){var bG,bH;if(bF!=null&&bF.$==1)O.SyncElemNode(false,bF.$0);else if(bF!=null&&bF.$==2)O.Sync(bF.$0.Current);else if(bF==null);else if(bF!=null&&bF.$==5);else if(bF!=null&&bF.$==4){bG=bF.$0;bG.Dirty?(bG.Text.nodeValue=bG.Value,bG.Dirty=false):void 0;}else if(bF!=null&&bF.$==6){bH=bF.$0;A.iter(function(bI){O.SyncElemNode(false,bI);},bH.Holes);A.iter(function(bI){bc.Sync(bI[0],bI[1]);},bH.Attrs);O.AfterRender(bH);}else{O.Sync(bF.$0);O.Sync(bF.$1);}};O.AfterRender=function(bF){var bG;bG=bC.GetOptional(bF.Render);bG!=null&&bG.$==1?(bG.$0(bF.El),bC.SetOptional(bF,"Render",null)):void 0;};O.DoSyncElement=function(bF){var bG,bH,bI;function bJ(bK,bL){var bM,bN;return bK!=null&&bK.$==1?bK.$0.El:bK!=null&&bK.$==2?(bM=bK.$0,bM.Dirty?(bM.Dirty=false,O.InsertDoc(bG,bM.Current,bL)):bJ(bM.Current,bL)):bK==null?bL:bK!=null&&bK.$==4?bK.$0.Text:bK!=null&&bK.$==5?bK.$0:bK!=null&&bK.$==6?(bN=bK.$0,(bN.Dirty?bN.Dirty=false:void 0,A.foldBack(function(bO,bP){return bO==null||bO.constructor===J?bJ(bO,bP):bO;},bN.Els,bL))):bJ(bK.$0,bJ(bK.$1,bL));}bG=bF.El;bt.Iter((bH=bF.El,function(bK){L.RemoveNode(bH,bK);}),bt.Except(bt.DocChildren(bF),bt.Children(bF.El,bC.GetOptional(bF.Delimiters))));bJ(bF.Children,(bI=bC.GetOptional(bF.Delimiters),bI!=null&&bI.$==1?bI.$0[1]:null));};P=C.AttrProxy=bC.Class({},null,P);P.Concat=function(bF){var bG;bG=Y.ofSeqNonCopying(bF);return Y.TreeReduce(bc.EmptyAttr(),P.Append,bG);};P.Append=function(bF,bG){return bc.AppendTree(bF,bG);};K=C.View=bC.Class({},null,K);Q.WhenRun=function(bF,bG,bH){var bI;bI=bF.s;bI==null?bH():bI!=null&&bI.$==2?(bI.$1.push(bH),bG(bI.$0)):bI!=null&&bI.$==3?(bI.$0.push(bG),bI.$1.push(bH)):bG(bI.$0);};Q.Copy=function(bF){var bG,bH,bI;bG=bF.s;return bG==null?bF:bG!=null&&bG.$==2?(bH=Q.New({$:2,$0:bG.$0,$1:[]}),(Q.WhenObsolete(bF,bH),bH)):bG!=null&&bG.$==3?(bI=Q.New({$:3,$0:[],$1:[]}),(Q.When(bF,function(bJ){Q.MarkDone(bI,bF,bJ);},bI),bI)):bF;};Q.WhenObsoleteRun=function(bF,bG){var bH;bH=bF.s;bH==null?bG():bH!=null&&bH.$==2?bH.$1.push(bG):bH!=null&&bH.$==3?bH.$1.push(bG):void 0;};Q.Map2Unit=function(bF,bG){var bH,bI,bJ;function bK(){var bL,bM,bN;if(!(bL=bJ.s,bL!=null&&bL.$==0||bL!=null&&bL.$==2)){bM=Q.ValueAndForever(bF);bN=Q.ValueAndForever(bG);bM!=null&&bM.$==1?bN!=null&&bN.$==1?bM.$0[1]&&bN.$0[1]?Q.MarkForever(bJ,null):Q.MarkReady(bJ,null):void 0:void 0;}}bH=bF.s;bI=bG.s;return bH!=null&&bH.$==0?bI!=null&&bI.$==0?Q.New({$:0,$0:null}):bG:bI!=null&&bI.$==0?bF:(bJ=Q.New({$:3,$0:[],$1:[]}),(Q.When(bF,bK,bJ),Q.When(bG,bK,bJ),bJ));};Q.WhenObsolete=function(bF,bG){var bH;bH=bF.s;bH==null?Q.Obsolete(bG):bH!=null&&bH.$==2?Q.EnqueueSafe(bH.$1,bG):bH!=null&&bH.$==3?Q.EnqueueSafe(bH.$1,bG):void 0;};Q.When=function(bF,bG,bH){var bI;bI=bF.s;bI==null?Q.Obsolete(bH):bI!=null&&bI.$==2?(Q.EnqueueSafe(bI.$1,bH),bG(bI.$0)):bI!=null&&bI.$==3?(bI.$0.push(bG),Q.EnqueueSafe(bI.$1,bH)):bG(bI.$0);};Q.MarkDone=function(bF,bG,bH){var bI;if(bI=bG.s,bI!=null&&bI.$==0)Q.MarkForever(bF,bH);else Q.MarkReady(bF,bH);};Q.ValueAndForever=function(bF){var bG;bG=bF.s;return bG!=null&&bG.$==0?{$:1,$0:[bG.$0,true]}:bG!=null&&bG.$==2?{$:1,$0:[bG.$0,false]}:null;};Q.MarkForever=function(bF,bG){var bH,bI,bJ,bK;bH=bF.s;if(bH!=null&&bH.$==3){bF.s={$:0,$0:bG};bI=bH.$0;for(bJ=0,bK=A.length(bI)-1;bJ<=bK;bJ++)(A.get(bI,bJ))(bG);}else void 0;};Q.MarkReady=function(bF,bG){var bH,bI,bJ,bK;bH=bF.s;if(bH!=null&&bH.$==3){bF.s={$:2,$0:bG,$1:bH.$1};bI=bH.$0;for(bJ=0,bK=A.length(bI)-1;bJ<=bK;bJ++)(A.get(bI,bJ))(bG);}else void 0;};Q.EnqueueSafe=function(bF,bG){var bH,bI,bJ,bK;bF.push(bG);if(bF.length%20===0){bH=bF.slice(0);bz.Clear(bF);for(bI=0,bJ=A.length(bH)-1;bI<=bJ;bI++){bK=A.get(bH,bI);typeof bK=="object"?function(bL){if(bL.s)bF.push(bL);}(bK):function(bL){bF.push(bL);}(bK);}}else void 0;};R.$cctor=function(){R.$cctor=a.ignore;R.LoadedTemplates=new N.New$5();R.LocalTemplatesLoaded=false;R.TextHoleRE="\\${([^}]+)}";};S=M.HashSet=bC.Class({Add:function(bF){return this.add(bF);},Contains:function(bF){var bG;bG=this.data[this.hash(bF)];return bG==null?false:this.arrContains(bF,bG);},add:function(bF){var bG,bH;bG=this.hash(bF);bH=this.data[bG];return bH==null?(this.data[bG]=[bF],this.count=this.count+1,true):this.arrContains(bF,bH)?false:(bH.push(bF),this.count=this.count+1,true);},arrContains:function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=bG.length;while(bH&&bI<bK)if(this.equals.apply(null,[bG[bI],bF]))bH=false;else bI=bI+1;return!bH;},ExceptWith:function(bF){var bG;bG=w.Get(bF);try{while(bG.MoveNext())this.Remove(bG.Current());}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bF){var bG,bH,bI,bJ;bG=0;bH=bp.concat(this.data);for(bI=0,bJ=bH.length-1;bI<=bJ;bI++)A.set(bF,bI,bH[bI]);},IntersectWith:function(bF){var bG,bH,bI,bJ,bK;bG=new S.New$4(bF,this.equals,this.hash);bH=bp.concat(this.data);for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];!bG.Contains(bK)?this.Remove(bK):void 0;}},Remove:function(bF){var bG;bG=this.data[this.hash(bF)];return bG==null?false:this.arrRemove(bF,bG)&&(this.count=this.count-1,true);},arrRemove:function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=bG.length;while(bH&&bI<bK)if(this.equals.apply(null,[bG[bI],bF])){bG.splice.apply(bG,[bI,1]);bH=false;}else bI=bI+1;return!bH;},GetEnumerator:function(){return w.Get(bp.concat(this.data));},GetEnumerator0:function(){return w.Get(bp.concat(this.data));}},x,S);S.New$3=bC.Ctor(function(){S.New$4.call(this,[],p.Equals,p.Hash);},S);S.New$4=bC.Ctor(function(bF,bG,bH){var bI;x.New.call(this);this.equals=bG;this.hash=bH;this.data=[];this.count=0;bI=w.Get(bF);try{while(bI.MoveNext())this.add(bI.Current());}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}},S);S.New$2=bC.Ctor(function(bF){S.New$4.call(this,bF,p.Equals,p.Hash);},S);T.get_UseAnimations=function(){return _9.UseAnimations();};T.Play=function(bF){var bG;bG=null;return bh.Delay(function(){return bh.Bind(T.Run(a.ignore,_9.Actions(bF)),function(){_9.Finalize(bF);return bh.Return(null);});});};T.Append=function(bF,bG){return{$:0,$0:bi.Append(bF.$0,bG.$0)};};T.Run=function(bF,bG){var bH;function bI(bJ){function bK(bL,bM){var bN;bN=bM-bL;bG.Compute(bN);bF();return bN<=bH?void a.requestAnimationFrame(function(bO){bK(bL,bO);}):bJ();}a.requestAnimationFrame(function(bL){bK(bL,bL);});}bH=bG.Duration;return bH===0?bh.Zero():bh.FromContinuations(function(bJ,bK,bL){return bI.apply(null,[bJ,bK,bL]);});};T.Concat=function(bF){return{$:0,$0:bi.Concat(h.map(_9.List,bF))};};U.BatchUpdatesEnabled=function(){_.$cctor();return _.BatchUpdatesEnabled;};W.StartProcessor=function(bF){var bG;function bH(){var bI;bI=null;return bh.Delay(function(){return bh.Bind(bF,function(){var bJ;bJ=bG[0];return bJ===1?(bG[0]=0,bh.Zero()):bJ===2?(bG[0]=1,bH()):bh.Zero();});});}bG=[0];return function(){var bI;bI=bG[0];bI===0?(bG[0]=1,bh.Start(bH(),null)):bI===1?bG[0]=2:void 0;};};X=C.Elt=bC.Class({},D,X);X.New=function(bF,bG,bH){var bI,bJ;bI=O.CreateElemNode(bF,bG,bH.docNode);bJ=bb.Create(bH.updates);return new X.New$1({$:1,$0:bI},K.Map2Unit(bc.Updates(bI.Attr),bJ.v),bF,bJ);};X.New$1=bC.Ctor(function(bF,bG,bH,bI){D.New.call(this,bF,bG);this.docNode$1=bF;this.updates$1=bG;this.elt=bH;this.rvUpdates=bI;},X);Y.ofSeqNonCopying=function(bF){var bG,bH;if(bF instanceof a.Array)return bF;else if(bF instanceof I)return A.ofList(bF);else if(bF===null)return[];else{bG=[];bH=w.Get(bF);try{while(bH.MoveNext())bG.push(bH.Current());return bG;}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}}};Y.TreeReduce=function(bF,bG,bH){var bI;function bJ(bK,bL){var bM,bN;return bL<=0?bF:bL===1&&(bK>=0&&bK<bI)?A.get(bH,bK):(bN=bL/2>>0,bG(bJ(bK,bN),bJ(bK+bN,bL-bN)));}bI=A.length(bH);return bJ(0,bI);};Y.MapTreeReduce=function(bF,bG,bH,bI){var bJ;function bK(bL,bM){var bN,bO;return bM<=0?bG:bM===1&&(bL>=0&&bL<bJ)?bF(A.get(bI,bL)):(bO=bM/2>>0,bH(bK(bL,bO),bK(bL+bO,bM-bO)));}bJ=A.length(bI);return bK(0,bJ);};Z=C.DocElemNode=bC.Class({Equals:function(bF){return this.ElKey===bF.ElKey;},GetHashCode:function(){return this.ElKey;}},null,Z);Z.New=function(bF,bG,bH,bI,bJ,bK){var bL;return new Z((bL={Attr:bF,Children:bG,El:bI,ElKey:bJ},(bC.SetOptional(bL,"Delimiters",bH),bC.SetOptional(bL,"Render",bK),bL)));};_1.$cctor=function(){_1.$cctor=a.ignore;_1.Doc=self.document;};_2.notPresent=function(){return g.FailWith("The given key was not present in the dictionary.");};_3.convertTextNode=function(bF){var bG,bH,bI,bJ,bK,bL;bG=null;bH=0;bJ=bF.textContent;bK=new a.RegExp(F.TextHoleRE(),"g");while(bG=bK.exec(bJ),bG!==null){bF.parentNode.insertBefore(self.document.createTextNode(_4.string(bJ,{$:1,$0:bH},{$:1,$0:bK.lastIndex-A.get(bG,0).length-1})),bF);bH=bK.lastIndex;bL=self.document.createElement("span");bL.setAttribute("ws-replace",A.get(bG,1).toLowerCase());bF.parentNode.insertBefore(bL,bF);}bK.lastIndex=0;bF.textContent=_4.string(bJ,{$:1,$0:bH},null);};_3.failNotLoaded=function(bF){bA.warn("Instantiating non-loaded template",bF);};_3.fillTextHole=function(bF,bG,bH){var bI;bI=bF.querySelector("[ws-replace]");return p.Equals(bI,null)?(bA.warn("Filling non-existent text hole",bH),null):(bI.parentNode.replaceChild(new a.Text(bG),bI),{$:1,$0:bI.getAttribute("ws-replace")});};_3.removeHolesExcept=function(bF,bG){function bH(bI){L.IterSelector(bF,"["+bI+"]",function(bJ){if(!bG.Contains(bJ.getAttribute(bI)))bJ.removeAttribute(bI);});}bH("ws-attr");bH("ws-onafterrender");bH("ws-var");L.IterSelector(bF,"[ws-hole]",function(bI){if(!bG.Contains(bI.getAttribute("ws-hole"))){bI.removeAttribute("ws-hole");while(bI.hasChildNodes())bI.removeChild(bI.lastChild);}});L.IterSelector(bF,"[ws-replace]",function(bI){if(!bG.Contains(bI.getAttribute("ws-replace")))bI.parentNode.removeChild(bI);});L.IterSelector(bF,"[ws-on]",function(bI){bI.setAttribute("ws-on",B.concat(" ",A.filter(function(bJ){return bG.Contains(A.get(B.SplitChars(bJ,[":"],1),1));},B.SplitChars(bI.getAttribute("ws-on"),[" "],1))));});L.IterSelector(bF,"[ws-attr-holes]",function(bI){var bJ,bK,bL,bM,bN;bJ=B.SplitChars(bI.getAttribute("ws-attr-holes"),[" "],1);for(bK=0,bL=bJ.length-1;bK<=bL;bK++){bM=A.get(bJ,bK);bI.setAttribute(bM,(bN=new a.RegExp(F.TextHoleRE(),"g"),bI.getAttribute(bM).replace(bN,function(bO,bP){return bG.Contains(bP)?bO:"";})));}});};_3.fillInstanceAttrs=function(bF,bG){var bH,bI,bJ,bK,bL;_3.convertAttrs(bG);bH=bG.nodeName.toLowerCase();bI=bF.querySelector("[ws-attr="+bH+"]");if(p.Equals(bI,null))bA.warn("Filling non-existent attr hole",bH);else{bI.removeAttribute("ws-attr");for(bJ=0,bK=bG.attributes.length-1;bJ<=bK;bJ++){bL=bG.attributes.item(bJ);bL.name==="class"&&bI.hasAttribute("class")?bI.setAttribute("class",bI.getAttribute("class")+" "+bL.nodeValue):bI.setAttribute(bL.name,bL.nodeValue);}}};_3.mapHoles=function(bF,bG){function bH(bI){L.IterSelector(bF,"["+bI+"]",function(bJ){var bK,bL;bK=(bL=null,[bG.TryGetValue(bJ.getAttribute(bI).toLowerCase(),{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]);bK[0]?bJ.setAttribute(bI,bK[1]):void 0;});}bH("ws-hole");bH("ws-replace");bH("ws-attr");bH("ws-onafterrender");bH("ws-var");L.IterSelector(bF,"[ws-on]",function(bI){bI.setAttribute("ws-on",B.concat(" ",A.map(function(bJ){var bK,bL,bM;bK=B.SplitChars(bJ,[":"],1);bL=(bM=null,[bG.TryGetValue(A.get(bK,1),{get:function(){return bM;},set:function(bN){bM=bN;}}),bM]);return bL[0]?A.get(bK,0)+":"+bL[1]:bJ;},B.SplitChars(bI.getAttribute("ws-on"),[" "],1))));});L.IterSelector(bF,"[ws-attr-holes]",function(bI){var bJ,bK,bL;bJ=B.SplitChars(bI.getAttribute("ws-attr-holes"),[" "],1);for(bK=0,bL=bJ.length-1;bK<=bL;bK++)(function(){var bM;function bN(bO,bP){var bQ;bQ=g.KeyValue(bP);return bO.replace(new a.RegExp("\\${"+bQ[0]+"}","ig"),"${"+bQ[1]+"}");}bM=A.get(bJ,bK);return bI.setAttribute(bM,(((bC.Curried3(h.fold))(bN))(bI.getAttribute(bM)))(bG));}());});};_3.fill=function(bF,bG,bH){while(true)if(bF.hasChildNodes())bH=bG.insertBefore(bF.lastChild,bH);else return null;};_3.convertAttrs=function(bF){var bH,bI,bJ,bK,bL,bM,bN,bO;function bG(bP){var bQ;bQ=bF.getAttribute(bP);bQ===null?void 0:bF.setAttribute(bP,bQ.toLowerCase());}bH=bF.attributes;bI=[];bJ=[];bK=[];for(bL=0,bM=bH.length-1;bL<=bM;bL++){bN=bH.item(bL);B.StartsWith(bN.nodeName,"ws-on")&&bN.nodeName!=="ws-onafterrender"&&bN.nodeName!=="ws-on"?(bI.push(bN.nodeName),bJ.push(_4.string(bN.nodeName,{$:1,$0:"ws-on".length},null)+":"+bN.nodeValue.toLowerCase())):!B.StartsWith(bN.nodeName,"ws-")&&(new a.RegExp(F.TextHoleRE())).test(bN.nodeValue)?(bN.nodeValue=(bO=new a.RegExp(F.TextHoleRE(),"g"),bN.nodeValue.replace(bO,function(bP,bQ){return"${"+bQ.toLowerCase()+"}";})),bK.push(bN.nodeName)):void 0;}!(bJ.length==0)?bF.setAttribute("ws-on",B.concat(" ",bJ)):void 0;!(bK.length==0)?bF.setAttribute("ws-attr-holes",B.concat(" ",bK)):void 0;bG("ws-hole");bG("ws-replace");bG("ws-attr");bG("ws-onafterrender");bG("ws-var");A.iter(function(bP){bF.removeAttribute(bP);},bI);};_4.string=function(bF,bG,bH){return bG==null?bH!=null&&bH.$==1?bF.slice(0,bH.$0+1):"":bH==null?bF.slice(bG.$0):bF.slice(bG.$0,bH.$0+1);};h.insufficient=function(){return g.FailWith("The input sequence has an insufficient number of elements.");};_5=M.KeyCollection=bC.Class({GetEnumerator$1:function(){return w.Get(h.map(function(bF){return bF.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},x,_5);_5.New=bC.Ctor(function(bF){x.New.call(this);this.d=bF;},_5);_7.New=function(bF,bG){return{PreviousNodes:bF,Top:bG};};_8.get_Empty=function(){return{$:0,$0:new S.New$3()};};_8.FindAll=function(bF){var bG;function bH(bJ){if(bJ!=null&&bJ.$==0){bH(bJ.$0);bH(bJ.$1);}else if(bJ!=null&&bJ.$==1)bI(bJ.$0);else if(bJ!=null&&bJ.$==2)bH(bJ.$0.Current);else if(bJ!=null&&bJ.$==6)A.iter(bI,bJ.$0.Holes);}function bI(bJ){bG.push(bJ);bH(bJ.Children);}bG=[];bH(bF);return{$:0,$0:new S.New$2(bG)};};_8.Filter=function(bF,bG){return{$:0,$0:bo.Filter(bF,bG.$0)};};_8.Except=function(bF,bG){return{$:0,$0:bo.Except(bF.$0,bG.$0)};};_8.ToArray=function(bF){return bo.ToArray(bF.$0);};_8.Intersect=function(bF,bG){return{$:0,$0:bo.Intersect(bF.$0,bG.$0)};};_9.UseAnimations=function(){bg.$cctor();return bg.UseAnimations;};_9.Actions=function(bF){return _9.ConcatActions(A.choose(function(bG){return bG.$==1?{$:1,$0:bG.$0}:null;},bi.ToArray(bF.$0)));};_9.Finalize=function(bF){A.iter(function(bG){if(bG.$==0)bG.$0();},bi.ToArray(bF.$0));};_9.ConcatActions=function(bF){var bG,bH,bI,bJ;bG=Y.ofSeqNonCopying(bF);bH=A.length(bG);return bH===0?_9.Const():bH===1?A.get(bG,0):(bI=h.max(h.map(function(bK){return bK.Duration;},bG)),(bJ=A.map(function(bK){return _9.Prolong(bI,bK);},bG),_9.Def(bI,function(bK){A.iter(function(bL){bL.Compute(bK);},bJ);})));};_9.List=function(bF){return bF.$0;};_9.Const=function(bF){return _9.Def(0,function(){return bF;});};_9.Def=function(bF,bG){return{Compute:bG,Duration:bF};};_9.Prolong=function(bF,bG){var bH,bI,bJ;bH=bG.Compute;bI=bG.Duration;bJ=bv.Create(function(){return bG.Compute(bG.Duration);});return{Compute:function(bK){return bK>=bI?bJ.f():bH(bK);},Duration:bF};};_.$cctor=function(){_.$cctor=a.ignore;_.BatchUpdatesEnabled=true;};ba=f.FormatException=bC.Class({},$,ba);ba.New$1=bC.Ctor(function(bF){this.message=bF;J.setPrototypeOf(this,ba.prototype);},ba);bb=C.Updates=bC.Class({},null,bb);bb.Create=function(bF){var bG;bG=null;bG=bb.New(bF,null,function(){var bH;bH=bG.s;return bH===null?(bH=Q.Copy(bG.c()),bG.s=bH,Q.WhenObsoleteRun(bH,function(){bG.s=null;}),bH):bH;});return bG;};bb.New=function(bF,bG,bH){return new bb({c:bF,s:bG,v:bH});};bc.Updates=function(bF){return Y.MapTreeReduce(function(bG){return bG.NChanged();},K.Const(),K.Map2Unit,bF.DynNodes);};bc.AppendTree=function(bF,bG){var bH;return bF===null?bG:bG===null?bF:(bH=new P({$:2,$0:bF,$1:bG}),(bc.SetFlags(bH,bc.Flags(bF)|bc.Flags(bG)),bH));};bc.EmptyAttr=function(){bj.$cctor();return bj.EmptyAttr;};bc.Insert=function(bF,bG){var bH,bI,bJ;function bK(bL){if(!(bL===null))if(bL!=null&&bL.$==1)bH.push(bL.$0);else if(bL!=null&&bL.$==2){bK(bL.$0);bK(bL.$1);}else if(bL!=null&&bL.$==3)bL.$0(bF);else if(bL!=null&&bL.$==4)bI.push(bL.$0);}bH=[];bI=[];bK(bG);bJ=bH.slice(0);return be.New(bF,bc.Flags(bG),bJ,bI.length===0?null:{$:1,$0:function(bL){h.iter(function(bM){bM(bL);},bI);}});};bc.HasExitAnim=function(bF){var bG;bG=2;return(bF.DynFlags&bG)===bG;};bc.GetExitAnim=function(bF){return bc.GetAnim(bF,function(bG,bH){return bG.NGetExitAnim(bH);});};bc.HasEnterAnim=function(bF){var bG;bG=1;return(bF.DynFlags&bG)===bG;};bc.GetEnterAnim=function(bF){return bc.GetAnim(bF,function(bG,bH){return bG.NGetEnterAnim(bH);});};bc.HasChangeAnim=function(bF){var bG;bG=4;return(bF.DynFlags&bG)===bG;};bc.GetChangeAnim=function(bF){return bc.GetAnim(bF,function(bG,bH){return bG.NGetChangeAnim(bH);});};bc.SetFlags=function(bF,bG){bF.flags=bG;};bc.Flags=function(bF){return bF!==null&&bF.hasOwnProperty("flags")?bF.flags:0;};bc.GetAnim=function(bF,bG){return T.Concat(A.map(function(bH){return bG(bH,bF.DynElem);},bF.DynNodes));};bc.Sync=function(bF,bG){A.iter(function(bH){bH.NSync(bF);},bG.DynNodes);};be.New=function(bF,bG,bH,bI){var bJ;bJ={DynElem:bF,DynFlags:bG,DynNodes:bH};bC.SetOptional(bJ,"OnAfterRender",bI);return bJ;};Q.Obsolete=function(bF){var bG,bH,bI,bJ,bK;bH=bF.s;if(bH==null||(bH!=null&&bH.$==2?(bG=bH.$1,false):bH!=null&&bH.$==3?(bG=bH.$1,false):true))void 0;else{bF.s=null;for(bI=0,bJ=A.length(bG)-1;bI<=bJ;bI++){bK=A.get(bG,bI);typeof bK=="object"?function(bL){Q.Obsolete(bL);}(bK):bK();}}};Q.New=function(bF){return{s:bF};};bf.Int=function(){bf.set_counter(bf.counter()+1);return bf.counter();};bf.set_counter=function(bF){bq.$cctor();bq.counter=bF;};bf.counter=function(){bq.$cctor();return bq.counter;};bg.$cctor=function(){bg.$cctor=a.ignore;bg.CubicInOut=bk.Custom(function(bF){var bG;bG=bF*bF;return 3*bG-2*(bG*bF);});bg.UseAnimations=true;};bh.Delay=function(bF){return function(bG){try{(bF(null))(bG);}catch(bH){bG.k({$:1,$0:bH});}};};bh.Bind=function(bF,bG){return bh.checkCancel(function(bH){bF(bl.New(function(bI){var bJ;if(bI.$==0){bJ=bI.$0;bh.scheduler().Fork(function(){try{(bG(bJ))(bH);}catch(bK){bH.k({$:1,$0:bK});}});}else bh.scheduler().Fork(function(){bH.k(bI);});},bH.ct));});};bh.Zero=function(){bm.$cctor();return bm.Zero;};bh.Start=function(bF,bG){var bH,bI;bH=(bI=(bh.defCTS())[0],bG==null?bI:bG.$0);bh.scheduler().Fork(function(){if(!bH.c)bF(bl.New(function(bJ){if(bJ.$==1)bh.UncaughtAsyncError(bJ.$0);},bH));});};bh.Return=function(bF){return function(bG){bG.k({$:0,$0:bF});};};bh.checkCancel=function(bF){return function(bG){if(bG.ct.c)bh.cancel(bG);else bF(bG);};};bh.defCTS=function(){bm.$cctor();return bm.defCTS;};bh.UncaughtAsyncError=function(bF){bA.log("WebSharper: Uncaught asynchronous exception",bF);};bh.FromContinuations=function(bF){return function(bG){var bH;function bI(bJ){if(bH[0])g.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bH[0]=true;bh.scheduler().Fork(bJ);}}bH=[false];bF(function(bJ){bI(function(){bG.k({$:0,$0:bJ});});},function(bJ){bI(function(){bG.k({$:1,$0:bJ});});},function(bJ){bI(function(){bG.k({$:2,$0:bJ});});});};};bh.cancel=function(bF){bF.k({$:2,$0:new bu.New(bF.ct)});};bh.scheduler=function(){bm.$cctor();return bm.scheduler;};bi.Append=function(bF,bG){return bF.$==0?bG:bG.$==0?bF:{$:2,$0:bF,$1:bG};};bi.ToArray=function(bF){var bG;function bH(bI){if(bI.$==1)bG.push(bI.$0);else if(bI.$==2){bH(bI.$0);bH(bI.$1);}else if(bI.$==3)A.iter(function(bJ){bG.push(bJ);},bI.$0);}bG=[];bH(bF);return bG.slice(0);};bi.Concat=function(bF){var bG;bG=Y.ofSeqNonCopying(bF);return Y.TreeReduce(bi.Empty(),bi.Append,bG);};bi.Empty=function(){bw.$cctor();return bw.Empty;};bj.$cctor=function(){bj.$cctor=a.ignore;bj.EmptyAttr=null;};bk=C.Easing=bC.Class({},x,bk);bk.Custom=function(bF){return new bk.New(bF);};bk.New=bC.Ctor(function(bF){x.New.call(this);this.transformTime=bF;},bk);bl.New=function(bF,bG){return{k:bF,ct:bG};};bm.$cctor=function(){bm.$cctor=a.ignore;bm.noneCT=bn.New(false,[]);bm.scheduler=new br.New();bm.defCTS=[new bs.New()];bm.Zero=bh.Return();bm.GetCT=function(bF){bF.k({$:0,$0:bF.ct});};};bn.New=function(bF,bG){return{c:bF,r:bG};};bo.Filter=function(bF,bG){return new S.New$2(A.filter(bF,bo.ToArray(bG)));};bo.Except=function(bF,bG){var bH;bH=new S.New$2(bo.ToArray(bG));bH.ExceptWith(bo.ToArray(bF));return bH;};bo.ToArray=function(bF){var bG;bG=A.create(bF.get_Count(),void 0);bF.CopyTo(bG);return bG;};bo.Intersect=function(bF,bG){var bH;bH=new S.New$2(bo.ToArray(bF));bH.IntersectWith(bo.ToArray(bG));return bH;};bp.concat=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push.apply(bG,bF[bI]);return bG;};bq.$cctor=function(){bq.$cctor=a.ignore;bq.counter=0;};br=bh.Scheduler=bC.Class({Fork:function(bF){var bG;bG=this;this.robin.push(bF);this.idle?(this.idle=false,a.setTimeout(function(){bG.tick();},0)):void 0;},tick:function(){var bF,bG,bH;bG=this;bH=bE.now();bF=true;while(bF)if(this.robin.length===0){this.idle=true;bF=false;}else{(this.robin.shift())();bE.now()-bH>40?(a.setTimeout(function(){bG.tick();},0),bF=false):void 0;}}},x,br);br.New=bC.Ctor(function(){x.New.call(this);this.idle=true;this.robin=[];},br);bs=f.CancellationTokenSource=bC.Class({},x,bs);bs.New=bC.Ctor(function(){x.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bs);bt.Children=function(bF,bG){var bH,bI,bJ;if(bG!=null&&bG.$==1){bJ=[];bH=bG.$0[0].nextSibling;while(bH!==bG.$0[1]){bJ.push(bH);bH=bH.nextSibling;}return{$:0,$0:bJ};}else return{$:0,$0:A.init(bF.childNodes.length,(bI=bF.childNodes,function(bK){return bI[bK];}))};};bt.Except=function(bF,bG){var bH;bH=bF.$0;return{$:0,$0:A.filter(function(bI){return A.forall(function(bJ){return!(bI===bJ);},bH);},bG.$0)};};bt.Iter=function(bF,bG){A.iter(bF,bG.$0);};bt.DocChildren=function(bF){var bG;function bH(bI){if(bI!=null&&bI.$==2)bH(bI.$0.Current);else if(bI!=null&&bI.$==1)bG.push(bI.$0.El);else if(bI==null);else if(bI!=null&&bI.$==5)bG.push(bI.$0);else if(bI!=null&&bI.$==4)bG.push(bI.$0.Text);else if(bI!=null&&bI.$==6)A.iter(function(bJ){if(bJ==null||bJ.constructor===J)bH(bJ);else bG.push(bJ);},bI.$0.Els);else{bH(bI.$0);bH(bI.$1);}}bG=[];bH(bF.Children);return{$:0,$0:Y.ofSeqNonCopying(bG)};};bu=f.OperationCanceledException=bC.Class({},$,bu);bu.New=bC.Ctor(function(bF){bu.New$1.call(this,"The operation was canceled.",null,bF);},bu);bu.New$1=bC.Ctor(function(bF,bG,bH){this.message=bF;this.inner=bG;J.setPrototypeOf(this,bu.prototype);this.ct=bH;},bu);bv.Create=function(bF){return by.New(false,bF,bv.forceLazy);};bv.forceLazy=function(){var bF;bF=this.v();this.c=true;this.v=bF;this.f=bv.cachedLazy;return bF;};bv.cachedLazy=function(){return this.v;};bw.$cctor=function(){bw.$cctor=a.ignore;bw.Empty={$:0};};by.New=function(bF,bG,bH){return{c:bF,v:bG,f:bH};};bz.Clear=function(bF){bF.splice(0,A.length(bF));};bC.OnLoad(function(){d.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

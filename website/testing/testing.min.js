function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.Msal=c.Msal||{};e=d.Policy=d.Policy||{};f=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};g=a.WebSharper=a.WebSharper||{};h=g.Operators=g.Operators||{};i=b.Library=b.Library||{};j=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};k=g.Utils=g.Utils||{};l=g.Obj=g.Obj||{};m=g.UI=g.UI||{};n=m.Var$1=m.Var$1||{};o=g.Unchecked=g.Unchecked||{};p=m.Var=m.Var||{};q=m.View=m.View||{};r=b.LibraryJS=b.LibraryJS||{};s=r.Msal=r.Msal||{};t=s.UserAgentApplication=s.UserAgentApplication||{};u=g.JavaScript=g.JavaScript||{};v=u.Promise=u.Promise||{};w=g.List=g.List||{};x=w.T=w.T||{};y=m.HtmlModule=m.HtmlModule||{};z=y.attr=y.attr||{};A=g.Seq=g.Seq||{};B=u.JS=u.JS||{};C=m.ViewBuilder=m.ViewBuilder||{};D=u.Pervasives=u.Pervasives||{};E=m.Doc=m.Doc||{};F=a.EventTarget;G=a.Node;H=a.WindowOrWorkerGlobalScope;I=i.String=i.String||{};J=g.Strings=g.Strings||{};K=g.Slice=g.Slice||{};L=g.Char=g.Char||{};M=g.Arrays=g.Arrays||{};N=m.ConcreteVar=m.ConcreteVar||{};O=m.Snap=m.Snap||{};P=g.Concurrency=g.Concurrency||{};Q=r.Pojo=r.Pojo||{};R=m.AttrModule=m.AttrModule||{};S=m.AttrProxy=m.AttrProxy||{};T=g.Enumerator=g.Enumerator||{};U=T.T=T.T||{};V=m.Array=m.Array||{};W=m.Client=m.Client||{};X=W.Templates=W.Templates||{};Y=m.Abbrev=m.Abbrev||{};Z=Y.Fresh=Y.Fresh||{};_0=a.Object;_1=P.AsyncBody=P.AsyncBody||{};_2=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_3=a.Error;_4=u.NonStandardPromiseRejectionException=u.NonStandardPromiseRejectionException||{};_5=P.CT=P.CT||{};_6=m.Attrs=m.Attrs||{};_7=m.DomUtility=m.DomUtility||{};_8=m.Docs=m.Docs||{};_9=g.Collections=g.Collections||{};_=_9.Dictionary=_9.Dictionary||{};$=P.Scheduler=P.Scheduler||{};ba=g.CancellationTokenSource=g.CancellationTokenSource||{};bb=m.DynamicAttrNode=m.DynamicAttrNode||{};bc=m.Elt=m.Elt||{};bd=m.DocElemNode=m.DocElemNode||{};be=a.CharacterData;bf=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bg=_9.HashSet=_9.HashSet||{};bh=m.An=m.An||{};bi=W.Settings=W.Settings||{};bj=Y.Mailbox=Y.Mailbox||{};bk=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bl=g.OperationCanceledException=g.OperationCanceledException||{};bm=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bn=m.Updates=m.Updates||{};bo=W.Attrs=W.Attrs||{};bp=bo.Dyn=bo.Dyn||{};bq=_9.DictionaryUtil=_9.DictionaryUtil||{};br=X.Prepare=X.Prepare||{};bs=_9.KeyCollection=_9.KeyCollection||{};bt=W.Docs=W.Docs||{};bu=bt.RunState=bt.RunState||{};bv=bt.NodeSet=bt.NodeSet||{};bw=m.Anims=m.Anims||{};bx=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};by=g.Queue=g.Queue||{};bz=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bA=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bB=m.AppendList=m.AppendList||{};bC=m.Easing=m.Easing||{};bD=Y.HashSet=Y.HashSet||{};bE=_9.HashSetUtil=_9.HashSetUtil||{};bF=bt.DomNodes=bt.DomNodes||{};bG=g.Lazy=g.Lazy||{};bH=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bI=g.LazyExtensionsProxy=g.LazyExtensionsProxy||{};bJ=bI.LazyRecord=bI.LazyRecord||{};bK=a.console;bL=a.IntelliFactory;bM=bL&&bL.Runtime;bN=a.jQuery;bO=a.Date;d.version=function(){f.$cctor();return f.version;};d.policies=function(){f.$cctor();return f.policies;};d.callback=function(bP,bQ,bR,bS,bT){((function(bU){return function(bV){return bU("callback: "+("("+k.prettyPrint(bV[0])+", "+k.prettyPrint(bV[1])+", "+k.prettyPrint(bV[2])+", "+k.prettyPrint(bV[3])+", "+k.prettyPrint(bV[4])+")"));};}(function(bU){bK.log(bU);}))([bP,bR,bS,bQ,bT]));};d.storage=function(){f.$cctor();return f.storage;};d.storedVar=function(bP,bQ){var bR,bS;bR=d.storage().getItem(bP);bS=n.Create$1(bR===null?bQ:bR);q.Sink(function(bT){d.storage().setItem(bP,bT);},bS.get_View());return bS;};d.storedPolicy=function(){f.$cctor();return f.storedPolicy;};d.storedRef=function(){f.$cctor();return f.storedRef;};d.localTestingApp=function(){f.$cctor();return f.localTestingApp;};d.tenantName=function(){f.$cctor();return f.tenantName;};d.ref=function(){f.$cctor();return f.ref;};d.extraQueryParms=function(){f.$cctor();return f.extraQueryParms;};d.refreshBefore=function(){f.$cctor();return f.refreshBefore;};d.createOnStart=function(){f.$cctor();return f.createOnStart;};d.forceLogin=function(){f.$cctor();return f.forceLogin;};d.signInPolicy=function(){f.$cctor();return f.signInPolicy;};d.signUpPolicy=function(){f.$cctor();return f.signUpPolicy;};d.editProfilePolicy=function(){f.$cctor();return f.editProfilePolicy;};d.resetPasswordPolicy=function(){f.$cctor();return f.resetPasswordPolicy;};d.policyType=function(){f.$cctor();return f.policyType;};d.refreshBeforeB=function(){f.$cctor();return f.refreshBeforeB;};d.createOnStartB=function(){f.$cctor();return f.createOnStartB;};d.forceLoginB=function(){f.$cctor();return f.forceLoginB;};d.policyTypeT=function(){f.$cctor();return f.policyTypeT;};d.policyNameW=function(){f.$cctor();return f.policyNameW;};d.authority=function(){f.$cctor();return f.authority;};d.token=function(){f.$cctor();return f.token;};d.userO=function(){f.$cctor();return f.userO;};d.authorityW=function(){f.$cctor();return f.authorityW;};d.agentO=function(){f.$cctor();return f.agentO;};d.ui=function(){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1;function b2(){var cg,ch,ci;cg=(ch=d.agentO().Get(),ch==null?null:(ci=ch.$0.getUser(),o.Equals(ci,null)?null:{$:1,$0:ci}));d.userO().Set(cg);}function b3(cg){var ch,ci,cj;ch=d.agentO().Get();ch!=null&&ch.$==1?(ci=ch.$0,P.Start((cj=null,P.Delay(function(){var ck;ck=(cg(ci))([null,d.extraQueryParms().Get()]);return o.Equals(ck,null)?(function(cl){return cl("No promise?");}(function(cl){bK.log(cl);}),P.Zero()):P.Bind(v.AsAsync(ck),function(cl){d.token().Set(cl);b2();return P.Zero();});})),null)):void 0;}function b4(){b3(function(cg){return function(ch){return cg.loginRedirect(ch[0],ch[1]);};});}function b5(){var cg;cg=d.agentO().Get();cg==null?void 0:cg.$0.logout();b2();}function b6(){var cg,ch,ci,cj;function ck(cl,cm,cn,co,cp){d.callback(cl,cm,cn,co,cp);}cg={$:1,$0:(ch=d.localTestingApp().Get(),(ci=d.authority().Get(),(cj=t.Options(null,null,null,null,{$:1,$0:true},null,null,null,{$:1,$0:d.ref().Get()},{$:1,$0:false},null,{$:1,$0:false}),new self.Msal.UserAgentApplication(ch,ci,function(cl){return ck(cl[0],cl[1],cl[2],cl[3],cl[4]);},cj))))};d.agentO().Set(cg);d.storage().setItem("Editing","");d.storage().getItem("logoutFirst")==="1"?(d.storage().setItem("logoutFirst",""),b4()):void 0;b2();}function b7(cg){var ch;ch=q.Const("");return R.DynamicPred("disabled",q.Map(function(ci){return!ci;},cg),ch);}function b8(){return b7(q.Map(function(cg){return o.Equals(cg,null);},d.agentO().get_View()));}function b9(){return b7(q.Map(function(cg){return!o.Equals(cg,null);},d.agentO().get_View()));}function b_(cg,ch,ci,cj){var ck,cl;return E.Element("tr",[],[E.Element("td",(ck=cg==null?null:{$:1,$0:w.ofArray([cg.$0])},ck==null?x.Empty:ck.$0),[ch]),E.Element("td",(cl=ci==null?null:{$:1,$0:w.ofArray([ci.$0])},cl==null?x.Empty:cl.$0),[cj])]);}function b$(cg,ch){return b_({$:1,$0:S.Create("style","text-align:right; width: 20%")},cg,null,E.Input([b8(),S.Create("style","width: 95%")],ch));}function ca(cg,ch){return b$(E.Element("label",[],[E.TextNode(cg+":")]),ch);}function cb(cg,ch){return E.Element("table",[],[E.Element("tbody",[],w.ofSeq(A.delay(function(){function ci(cj,ck){return E.Element("tr",[],[E.Element("td",[],[E.Element("b",[],[E.TextNode(cj)])]),E.Element("td",[],[E.TextNode((function(cl){return function(cm){return cl(k.prettyPrint(cm));};}(a.id))(ck))])]);}return A.map(function(cj){return ci(cj[0],cj[1]);},A.filter(cg,B.GetFields(ch)));})))]);}function cc(cg,ch,ci){var cj;return E.BindView(a.id,(cj=q.get_Do(),q.Bind(function(ck){return q.Const(E.Button(ck+" "+cg,[ch?b8():b9()],ci));},d.policyType().get_View())));}function cd(cg,ch,ci){return E.Button(a.String(cg)+" Policy: ",[b7(ch)],ci);}function ce(cg,ch){return E.Element("span",[],[E.TextNode(cg),E.CheckBox([],ch)]);}function cf(cg,ch){var ci;return P.Start((ci=null,P.Delay(function(){d.policyTypeT().Set(ch);return P.Bind(q.GetAsync(d.authorityW()),function(){b6();return cg?(d.storage().setItem("logoutFirst","1"),b5(),P.Zero()):(b4(),P.Zero());});})),null);}bP=d.storage().getItem("logoutFirst")==="1"&&d.storage().getItem("Editing")!=="1"&&d.createOnStartB().Get();d.storage().getItem("Editing")!=="1"&&d.createOnStartB().Get()?b6():void 0;bQ=E.BindView(a.id,(bR=q.get_Do(),q.Bind(function(cg){return q.Bind(function(ch){return q.Bind(function(ci){var cj,ck,cl,cm,cn;cm=E.Element("h3",x.Empty,[E.TextNode((cj=cg==null?null:{$:1,$0:(ck=cg.$0,(((bM.Curried3(function(co,cp,cq){return co("Hello "+k.toSafe(cp)+" "+k.toSafe(cq)+".");}))(a.id))(ck.idToken.given_name))(ck.idToken.family_name))},cj==null?"":cj.$0))]);switch(ch==null?0:cg==null?ci.$==1?3:ci.$==2?4:(cl=ci,5):ci.$==0?1:ci.$==1?2:(cl=ci,5)){case 0:return q.Const(E.TextNode("Select your options and click on <Create Agent>."));case 1:return q.Const(cm);case 2:return q.Const(E.Concat(w.ofArray([cm,E.TextNode(function(co){return co("To Sign Up click on <Logout> first!");}(a.id))])));case 3:return q.Const(E.TextNode(function(co){return co("To Sign Up make sure to have clicked on <Logout> first and then click on Sign Up Popup or Redirect!");}(a.id)));case 4:return q.Const(E.TextNode(function(co){return co("Sign In before invoking Edit Profile!");}(a.id)));case 5:cn=a.String(cl);return q.Const(E.Concat(w.ofArray([cm,E.TextNode(((((bM.Curried(function(co,cp,cq,cr){return co("To "+k.toSafe(cp)+" click on <"+k.toSafe(cq)+" Popup> or <"+k.toSafe(cr)+" Redirect>.");},4))(a.id))(cn))(cn))(cn))])));}},d.policyTypeT().get_View());},d.agentO().get_View());},d.userO().get_View())));bS=q.Map2(function(cg,ch){return cg!=null&&ch==null;},d.agentO().get_View(),d.userO().get_View());bT=q.Map2(function(cg,ch){return cg!=null&&ch==null;},d.agentO().get_View(),d.userO().get_View());bU=q.Map2(function(cg,ch){return cg!=null&&ch!=null;},d.agentO().get_View(),d.userO().get_View());bV=q.Map(function(cg){return cg!=null;},d.agentO().get_View());bW=E.Element("div",[],[E.Element("h1",[],[E.TextNode((function(cg){return function(ch){return cg("Msal.js "+k.toSafe(ch)+" (Microsoft authentication library)");};}(a.id))(d.version()))]),E.Element("br",[],[]),E.Element("table",[],[E.Element("tbody",[],[b_(null,E.Button("Create Agent",[b8()],b6),null,ce("Create on Start",d.createOnStartB())),b_(null,E.Button("Edit",[b9()],function(){if(d.refreshBeforeB().Get()){d.storage().setItem("Editing","1");self.location.reload();}else d.agentO().Set(null);}),null,ce("Refresh before Edit",d.refreshBeforeB()))])]),E.Element("br",[],[]),E.Element("table",[S.Create("style","width: 95%")],[E.Element("tbody",[],[ca("App Id",d.localTestingApp()),ca("tenant Name",d.tenantName()),ca("ref/state",d.ref()),ca("extra query parameters",d.extraQueryParms()),b$(cd(e.SignIn,bS,function(){cf(d.forceLoginB().Get(),e.SignIn);}),d.signInPolicy()),b$(cd(e.SignUp,bT,function(){cf(true,e.SignUp);}),d.signUpPolicy()),b$(cd(e.EditProfile,bU,function(){cf(false,e.EditProfile);}),d.editProfilePolicy()),b$(cd(e.ResetPassword,bV,function(){cf(false,e.ResetPassword);}),d.resetPasswordPolicy()),E.Element("tr",[],[]),(bX=d.policyTypeT(),(bY=d.policies(),(bZ=E.Select([b8()],a.String,bY,bX),b_({$:1,$0:S.Create("style","text-align:right; width: 20%")},E.Element("label",[],[E.TextNode("policy type"+":")]),null,bZ)))),ca("Authority",d.authority())])]),ce("Force login",d.forceLoginB()),E.Element("br",[],[]),E.Element("div",[],[E.Button("Logout",[b9()],b5)]),bQ,E.Element("div",[],[cc("Popup",false,function(){b3(function(cg){return function(ch){return cg.loginPopup(ch[0],ch[1]);};});})]),E.Element("div",[],[cc("Redirect",false,b4)]),E.Element("br",[],[]),E.Element("b",[],[E.TextNode("Token: ")]),E.TextView(d.token().get_View()),E.Element("br",[],[]),E.Element("div",[],[E.Button("Check User",[b9()],b2)]),E.Element("h5",[],[E.TextNode("User: ")]),E.BindView(a.id,(b0=q.get_Do(),q.Bind(function(cg){var ch;function ci(ck){return ck[0];}function cj(ck){return"idToken"!==ck;}return cg!=null&&cg.$==1?(ch=cg.$0,q.Const(E.Concat(w.ofArray([cb(function(ck){return cj(ci(ck));},ch),E.Element("h4",[],[E.TextNode("idToken")]),cb(function(){return true;},ch.idToken)])))):q.Const(E.get_Empty());},d.userO().get_View())))]);!bP?(b1=self.document.body,X.LoadLocalTemplates(""),E.Run(b1,bW)):void 0;};d.main=function(){f.$cctor();return f.main;};e=d.Policy=bM.Class({toString:function(){return J.ReplaceChar(i["String.get_toUnderscore"]((function(bP){return function(bQ){return bP(j.p(bQ));};}(a.id))(this)),"_"," ");}},null,e);e.Parse=function(bP){var bQ;bQ=J.Replace(bP," ","");return bQ==="SignUp"?e.SignUp:bQ==="EditProfile"?e.EditProfile:bQ==="ResetPassword"?e.ResetPassword:e.SignIn;};e.SignUp=new e({$:1});e.EditProfile=new e({$:2});e.ResetPassword=new e({$:3});e.SignIn=new e({$:0});f.$cctor=function(){var bP,bQ,bR,bS,bT;f.$cctor=a.ignore;function bU(bZ){return J.concat("\n",bZ);}function bV(bZ){return I.splitByChar("\n",bZ);}function bW(bZ){var b0,b1;return K.array(bZ,{$:1,$0:0},{$:1,$0:(b0=0,(b1=M.length(bZ)-2,o.Compare(b0,b1)===1?b0:b1))});}function bX(bZ){return J.concat("\n",bZ);}function bY(bZ){return a.String;}f.unindentStr=function(bZ){return bU(I.unindent(bZ));};f.skipLastLine=(bP=function(bZ){return bW(bV(bZ));},function(bZ){return bX(bP(bZ));});f.version="0.2.4";f.policies=w.ofArray([e.SignIn,e.SignUp,e.EditProfile,e.ResetPassword]);f.storage=self.localStorage;f.storedPolicy=d.storage().getItem("policy");f.storedRef=d.storage().getItem("ref");f.localTestingApp=d.storedVar("localTestingApp","faf95af2-18b5-4895-9663-18f7feb95def");f.tenantName=d.storedVar("tenantName","prozper");f.ref=d.storedVar("ref","");f.extraQueryParms=d.storedVar("extraQueryParms","mkt=es-us");f.refreshBefore=d.storedVar("refreshBefore","0");f.createOnStart=d.storedVar("createOnStart","1");f.forceLogin=d.storedVar("forceLogin","0");f.signInPolicy=d.storedVar("signInPolicy","B2C_1_SignIn");f.signUpPolicy=d.storedVar("signUpPolicy","B2C_1_Registrarse");f.editProfilePolicy=d.storedVar("editProfilePolicy","B2C_1_EditarPerfil");f.resetPasswordPolicy=d.storedVar("resetPasswordPolicy","B2C_1_PasswordReset");f.policyType=d.storedVar("policyType","SignIn");f.refreshBeforeB=n.Lens(d.refreshBefore(),function(bZ){return bZ==="1";},function(bZ,b0){return b0?"1":"0";});f.createOnStartB=n.Lens(d.createOnStart(),function(bZ){return bZ==="1";},function(bZ,b0){return b0?"1":"0";});f.forceLoginB=n.Lens(d.forceLogin(),function(bZ){return bZ==="1";},function(bZ,b0){return b0?"1":"0";});f.policyTypeT=n.Lens(d.policyType(),e.Parse,function(bZ,b0){return(bY(bZ))(b0);});f.policyNameW=(bQ=q.get_Do(),q.Bind(function(bZ){return q.Bind(function(b0){return q.Const(b0);},bZ.$==1?d.signUpPolicy().get_View():bZ.$==2?d.editProfilePolicy().get_View():bZ.$==3?d.resetPasswordPolicy().get_View():d.signInPolicy().get_View());},d.policyTypeT().get_View()));f.authority=n.Create$1("");f.token=n.Create$1("");f.userO=n.Create$1(null);f.authorityW=(bR=q.get_Do(),q.Bind(function(bZ){return q.Bind(function(b0){return q.Const(((((bM.Curried(function(b1,b2,b3,b4){return b1("https://"+k.toSafe(b2)+".b2clogin.com/tfp/"+k.toSafe(b3)+".onmicrosoft.com/"+k.toSafe(b4));},4))(a.id))(bZ))(bZ))(b0));},d.policyNameW());},d.tenantName().get_View()));q.Sink(function(bZ){d.authority().Set(bZ);},d.authorityW());f.agentO=n.Create$1(null);f.main=(bS=E.Element("script",[S.Create("src",(function(bZ){return function(b0){return bZ("https://secure.aadcdn.microsoftonline-p.com/lib/"+k.toSafe(b0)+"/js/msal.min.js");};}(a.id))(d.version())),S.OnAfterRenderImpl(function(){var bZ;P.Start((bZ=null,P.Delay(function(){return P.Combine(P.While(function(){return!self.Msal;},P.Delay(function(){return P.Bind(P.Sleep(50),function(){return P.Return(null);});})),P.Delay(function(){d.ui();return P.Zero();}));})),null);})],[]),(bT=self.document.head,(X.LoadLocalTemplates(""),E.Run(bT,bS))));};h.FailWith=function(bP){throw new _3(bP);};h.KeyValue=function(bP){return[bP.K,bP.V];};i["String.get_toUnderscore"]=function(bP,bQ){return M.ofSeq(A.collect(a.id,A.mapi(function(bR,bS){return bR>0&&L.IsUpper(bS)?w.ofArray(["_",bS]):w.ofArray([bS]);},bP))).join("");};j.p=function(bP){return bP.$==3?"ResetPassword":bP.$==2?"EditProfile":bP.$==1?"SignUp":"SignIn";};k.prettyPrint=function(bP){var bQ,bR;function bS(bT,bU){return bT+" = "+k.prettyPrint(bU);}return bP===null?"null":(bQ=typeof bP,bQ=="string"?"\""+bP+"\"":bQ=="object"?bP instanceof a.Array?"[|"+J.concat("; ",M.map(k.prettyPrint,bP))+"|]":(bR=a.String(bP),bR==="[object Object]"?"{"+J.concat("; ",M.map(function(bT){return bS(bT[0],bT[1]);},B.GetFields(bP)))+"}":bR):a.String(bP));};k.toSafe=function(bP){return bP==null?"":bP;};l=g.Obj=bM.Class({Equals:function(bP){return this===bP;},GetHashCode:function(){return -1;}},null,l);l.New=bM.Ctor(function(){},l);n=m.Var$1=bM.Class({},l,n);n.Create$1=function(bP){return new N.New(false,O.New({$:2,$0:bP,$1:[]}),bP);};n.Lens=function(bP,bQ,bR){var bS,bT,bU;bS=Z.Id();bT=q.Map(bQ,bP.get_View());bU=new p({Get:function(){return bQ(bP.Get());},Set:function(bV){return bP.Update(function(bW){return bR(bW,bV);});},SetFinal:function(bV){return this.Set(bV);},Update:function(bV){return bP.Update(function(bW){return bR(bW,bV(bQ(bW)));});},UpdateMaybe:function(bV){return bP.UpdateMaybe(function(bW){var bX;bX=bV(bQ(bW));return bX==null?null:{$:1,$0:bR(bW,bX.$0)};});},get_View:function(){return bT;},get_Id:function(){return bS;}});p.New.call(bU);return bU;};o.Equals=function(bP,bQ){var bR,bS,bT,bU;if(bP===bQ)return true;else{bR=typeof bP;if(bR=="object"){if(bP===null||bP===void 0||bQ===null||bQ===void 0)return false;else if("Equals"in bP)return bP.Equals(bQ);else if(bP instanceof a.Array&&bQ instanceof a.Array)return o.arrayEquals(bP,bQ);else if(bP instanceof a.Date&&bQ instanceof a.Date)return o.dateEquals(bP,bQ);else{bS=[true];for(var bV in bP)if(function(bW){bS[0]=!bP.hasOwnProperty(bW)||bQ.hasOwnProperty(bW)&&o.Equals(bP[bW],bQ[bW]);return!bS[0];}(bV))break;if(bS[0]){for(var bW in bQ)if(function(bX){bS[0]=!bQ.hasOwnProperty(bX)||bP.hasOwnProperty(bX);return!bS[0];}(bW))break;}return bS[0];}}else return bR=="function"&&("$Func"in bP?bP.$Func===bQ.$Func&&bP.$Target===bQ.$Target:"$Invokes"in bP&&"$Invokes"in bQ&&o.arrayEquals(bP.$Invokes,bQ.$Invokes));}};o.arrayEquals=function(bP,bQ){var bR,bS;if(M.length(bP)===M.length(bQ)){bR=true;bS=0;while(bR&&bS<M.length(bP)){!o.Equals(M.get(bP,bS),M.get(bQ,bS))?bR=false:void 0;bS=bS+1;}return bR;}else return false;};o.dateEquals=function(bP,bQ){return bP.getTime()===bQ.getTime();};o.Compare=function(bP,bQ){var bR,bS,bT,bU,bV,bW;if(bP===bQ)return 0;else{bS=typeof bP;switch(bS=="function"?1:bS=="boolean"?2:bS=="number"?2:bS=="string"?2:bS=="object"?3:0){case 0:return typeof bQ=="undefined"?0:-1;case 1:return h.FailWith("Cannot compare function values.");case 2:return bP<bQ?-1:1;case 3:if(bP===null)bT=-1;else if(bQ===null)bT=1;else if("CompareTo"in bP)bT=bP.CompareTo(bQ);else if("CompareTo0"in bP)bT=bP.CompareTo0(bQ);else if(bP instanceof a.Array&&bQ instanceof a.Array)bT=o.compareArrays(bP,bQ);else if(bP instanceof a.Date&&bQ instanceof a.Date)bT=o.compareDates(bP,bQ);else{bU=[0];for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bQ.hasOwnProperty(bY)?(bU[0]=1,true):(bU[0]=o.Compare(bP[bY],bQ[bY]),bU[0]!==0);}(bX))break;if(bU[0]===0){for(var bY in bQ)if(function(bZ){return!bQ.hasOwnProperty(bZ)?false:!bP.hasOwnProperty(bZ)&&(bU[0]=-1,true);}(bY))break;}bT=bU[0];}return bT;}}};o.compareArrays=function(bP,bQ){var bR,bS;if(M.length(bP)<M.length(bQ))return -1;else if(M.length(bP)>M.length(bQ))return 1;else{bR=0;bS=0;while(bR===0&&bS<M.length(bP)){bR=o.Compare(M.get(bP,bS),M.get(bQ,bS));bS=bS+1;}return bR;}};o.compareDates=function(bP,bQ){return o.Compare(bP.getTime(),bQ.getTime());};o.Hash=function(bP){var bQ;bQ=typeof bP;return bQ=="function"?0:bQ=="boolean"?bP?1:0:bQ=="number"?bP:bQ=="string"?o.hashString(bP):bQ=="object"?bP==null?0:bP instanceof a.Array?o.hashArray(bP):o.hashObject(bP):0;};o.hashString=function(bP){var bQ,bR,bS;if(bP===null)return 0;else{bQ=5381;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ=o.hashMix(bQ,bP[bR].charCodeAt());return bQ;}};o.hashArray=function(bP){var bQ,bR,bS;bQ=-34948909;for(bR=0,bS=M.length(bP)-1;bR<=bS;bR++)bQ=o.hashMix(bQ,o.Hash(M.get(bP,bR)));return bQ;};o.hashObject=function(bP){var bQ,bR;if("GetHashCode"in bP)return bP.GetHashCode();else{bQ=[0];for(var bS in bP)if(function(bT){bQ[0]=o.hashMix(o.hashMix(bQ[0],o.hashString(bT)),o.Hash(bP[bT]));return false;}(bS))break;return bQ[0];}};o.hashMix=function(bP,bQ){return(bP<<5)+bP+bQ;};p=m.Var=bM.Class({},l,p);p.New=bM.Ctor(function(){l.New.call(this);},p);q.Sink=function(bP,bQ){function bR(){O.WhenRun(bQ(),bP,function(){P.scheduler().Fork(bR);});}P.scheduler().Fork(bR);};q.Map=function(bP,bQ){return q.CreateLazy(function(){return O.Map(bP,bQ());});};q.Const=function(bP){var bQ;bQ=O.New({$:0,$0:bP});return function(){return bQ;};};q.get_Do=function(){return C.B;};q.GetAsync=function(bP){return P.FromContinuations(function(bQ){return q.Get(bQ,bP);});};q.Map2=function(bP,bQ,bR){return q.CreateLazy(function(){return O.Map2(bP,bQ(),bR());});};q.CreateLazy=function(bP){var bQ;bQ={c:null,o:bP};return function(){var bR,bS;bR=bQ.c;return bR===null?(bR=bQ.o(),bQ.c=bR,(bS=bR.s,bS!=null&&bS.$==0)?bQ.o=null:O.WhenObsoleteRun(bR,function(){bQ.c=null;}),bR):bR;};};q.Bind=function(bP,bQ){return q.Join(q.Map(bP,bQ));};q.Get=function(bP,bQ){var bR;function bS(){O.WhenRun(bQ(),function(bT){if(!bR[0]){bR[0]=true;bP(bT);}},function(){if(!bR[0])bS();});}bR=[false];bS();};q.Join=function(bP){return q.CreateLazy(function(){return O.Join(bP());});};q.Map2Unit=function(bP,bQ){return q.CreateLazy(function(){return O.Map2Unit(bP(),bQ());});};t.Options=function(bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0){return Q.newPojoOpt([s.op_EqualsEqualsGreater("cacheLocation",bP),s.op_EqualsEqualsGreater("isAngular",bQ),s.op_EqualsEqualsGreater("loadFrameTimeout",bR),s.op_EqualsEqualsGreater("logger",bS),s.op_EqualsEqualsGreater("navigateToLoginRequestUrl",bT),s.op_EqualsEqualsGreater("postLogoutRedirectUri",bU),s.op_EqualsEqualsGreater("protectedResourceMap",bV),s.op_EqualsEqualsGreater("redirectUri",bW),s.op_EqualsEqualsGreater("state",bX),s.op_EqualsEqualsGreater("storeAuthStateInCookie",bY),s.op_EqualsEqualsGreater("unprotectedResources",bZ),s.op_EqualsEqualsGreater("validateAuthority",b0)]);};v.AsAsync=function(bP){return P.FromContinuations(function(bQ,bR){bP.then(bQ,function(bS){return bR(v.unwrapExn(bS));});});};v.unwrapExn=function(bP){return bP instanceof _3?bP:new _4.New(bP);};w.ofArray=function(bP){var bQ,bR,bS;bQ=x.Empty;for(bR=M.length(bP)-1,bS=0;bR>=bS;bR--)bQ=new x({$:1,$0:M.get(bP,bR),$1:bQ});return bQ;};w.ofSeq=function(bP){var bQ,bR,bS,bT,bU,bV;if(bP instanceof x)return bP;else if(bP instanceof a.Array)return w.ofArray(bP);else{bQ=T.Get(bP);try{bS=bQ.MoveNext();if(!bS)bR=x.Empty;else{bU=new x({$:1});bT=bU;while(bS){bT.$0=bQ.Current();bQ.MoveNext()?bT=(bV=new x({$:1}),bT.$1=bV,bV):bS=false;}bT.$1=x.Empty;bR=bU;}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};w.mapi=function(bP,bQ){var bR,bS,bT,bU,bV,bW;if(bQ.$==0)return bQ;else{bV=new x({$:1});bR=bV;bS=bQ;bT=0;bU=true;while(bU){bR.$0=bP(bT,bS.$0);bS=bS.$1;bS.$==0?bU=false:(bR=(bW=new x({$:1}),bR.$1=bW,bW),bT=bT+1);}bR.$1=x.Empty;return bV;}};w.head=function(bP){return bP.$==1?bP.$0:w.listEmpty();};w.tail=function(bP){return bP.$==1?bP.$1:w.listEmpty();};w.listEmpty=function(){return h.FailWith("The input list was empty.");};x=w.T=bM.Class({get_Item:function(bP){return A.nth(bP,this);},GetEnumerator:function(){return new U.New(this,null,function(bP){var bQ;bQ=bP.s;return bQ.$==0?false:(bP.c=bQ.$0,bP.s=bQ.$1,true);},void 0);},GetEnumerator0:function(){return T.Get(this);}},null,x);x.Empty=new x({$:0});z=y.attr=bM.Class({},l,z);A.delay=function(bP){return{GetEnumerator:function(){return T.Get(bP());}};};A.filter=function(bP,bQ){return{GetEnumerator:function(){var bR;bR=T.Get(bQ);return new U.New(null,null,function(bS){var bT,bU,bV;bT=bR.MoveNext();bU=bR.Current();bV=false;while(bT)if(bP(bU)){bS.c=bU;bV=true;bT=false;}else if(bR.MoveNext())bU=bR.Current();else bT=false;return bV;},function(){bR.Dispose();});}};};A.map=function(bP,bQ){return{GetEnumerator:function(){var bR;bR=T.Get(bQ);return new U.New(null,null,function(bS){return bR.MoveNext()&&(bS.c=bP(bR.Current()),true);},function(){bR.Dispose();});}};};A.mapi=function(bP,bQ){return A.map2(bP,A.initInfinite(a.id),bQ);};A.collect=function(bP,bQ){return A.concat(A.map(bP,bQ));};A.tryFind=function(bP,bQ){var bR,bS,bT;bR=T.Get(bQ);try{bS=null;while(bS==null&&bR.MoveNext()){bT=bR.Current();bP(bT)?bS={$:1,$0:bT}:void 0;}return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};A.tryFindIndex=function(bP,bQ){var bR,bS,bT;bR=T.Get(bQ);try{bS=true;bT=0;while(bS&&bR.MoveNext())if(bP(bR.Current()))bS=false;else bT=bT+1;return bS?null:{$:1,$0:bT};}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};A.map2=function(bP,bQ,bR){return{GetEnumerator:function(){var bS,bT;bS=T.Get(bQ);bT=T.Get(bR);return new U.New(null,null,function(bU){return bS.MoveNext()&&bT.MoveNext()&&(bU.c=bP(bS.Current(),bT.Current()),true);},function(){bS.Dispose();bT.Dispose();});}};};A.initInfinite=function(bP){return{GetEnumerator:function(){return new U.New(0,null,function(bQ){bQ.c=bP(bQ.s);bQ.s=bQ.s+1;return true;},void 0);}};};A.concat=function(bP){return{GetEnumerator:function(){var bQ;bQ=T.Get(bP);return new U.New(null,null,function(bR){var bS;while(true){bS=bR.s;if(o.Equals(bS,null)){if(bQ.MoveNext()){bR.s=T.Get(bQ.Current());bR=bR;}else{bQ.Dispose();return false;}}else if(bS.MoveNext()){bR.c=bS.Current();return true;}else{bR.Dispose();bR.s=null;bR=bR;}}},function(bR){var bS;bS=bR.s;!o.Equals(bS,null)?bS.Dispose():void 0;!o.Equals(bQ,null)?bQ.Dispose():void 0;});}};};A.choose=function(bP,bQ){return A.collect(function(bR){var bS;bS=bP(bR);return bS==null?x.Empty:w.ofArray([bS.$0]);},bQ);};A.append=function(bP,bQ){return{GetEnumerator:function(){var bR,bS;bR=T.Get(bP);bS=[true];return new U.New(bR,null,function(bT){var bU;return bT.s.MoveNext()?(bT.c=bT.s.Current(),true):(bU=bT.s,!o.Equals(bU,null)?bU.Dispose():void 0,bT.s=null,bS[0]&&(bS[0]=false,bT.s=T.Get(bQ),bT.s.MoveNext()?(bT.c=bT.s.Current(),true):(bT.s.Dispose(),bT.s=null,false)));},function(bT){var bU;bU=bT.s;!o.Equals(bU,null)?bU.Dispose():void 0;});}};};A.iter=function(bP,bQ){var bR;bR=T.Get(bQ);try{while(bR.MoveNext())bP(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};A.head=function(bP){var bQ;bQ=T.Get(bP);try{return bQ.MoveNext()?bQ.Current():A.insufficient();}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};A.findIndex=function(bP,bQ){var bR;bR=A.tryFindIndex(bP,bQ);return bR==null?h.FailWith("KeyNotFoundException"):bR.$0;};A.fold=function(bP,bQ,bR){var bS,bT;bS=bQ;bT=T.Get(bR);try{while(bT.MoveNext())bS=bP(bS,bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};A.nth=function(bP,bQ){var bR,bS;if(bP<0)h.FailWith("negative index requested");bR=-1;bS=T.Get(bQ);try{while(bR<bP){!bS.MoveNext()?A.insufficient():void 0;bR=bR+1;}return bS.Current();}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};A.max=function(bP){var bQ,bR,bS;bQ=T.Get(bP);try{if(!bQ.MoveNext())A.seqEmpty();bR=bQ.Current();while(bQ.MoveNext()){bS=bQ.Current();o.Compare(bS,bR)===1?bR=bS:void 0;}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};A.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};B.GetFields=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push([bS,bP[bS]]);return bQ;};B.GetFieldValues=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push(bP[bS]);return bQ;};C.B={$:0};D.NewFromSeq=function(bP){var bQ,bR,bS;bQ={};bR=T.Get(bP);try{while(bR.MoveNext()){bS=bR.Current();bQ[bS[0]]=bS[1];}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ;};E=m.Doc=bM.Class({},l,E);E.Concat=function(bP){var bQ;bQ=V.ofSeqNonCopying(bP);return V.TreeReduce(E.get_Empty(),E.Append,bQ);};E.get_Empty=function(){return E.Mk(null,q.Const());};E.Input=function(bP,bQ){return E.InputInternal("input",function(){return A.append(bP,[R.Value(bQ)]);});};E.TextNode=function(bP){return E.Mk({$:5,$0:_7.CreateText(bP)},q.Const());};E.Button=function(bP,bQ,bR){var bS;bS=S.Concat(bQ);return bc.New(E.Clickable("button",bR),bS,E.TextNode(bP));};E.BindView=function(bP,bQ){return E.EmbedView(q.Map(bP,bQ));};E.CheckBox=function(bP,bQ){return E.InputInternal("input",function(){return A.append(bP,[S.Create("type","checkbox"),R.Checked(bQ)]);});};E.TextView=function(bP){var bQ;bQ=_8.CreateTextNode();return E.Mk({$:4,$0:bQ},q.Map(function(bR){_8.UpdateTextNode(bQ,bR);},bP));};E.Append=function(bP,bQ){return E.Mk({$:0,$0:bP.docNode,$1:bQ.docNode},q.Map2Unit(bP.updates,bQ.updates));};E.Mk=function(bP,bQ){return new E.New(bP,bQ);};E.Run=function(bP,bQ){_8.LinkElement(bP,bQ.docNode);E.RunInPlace(false,bP,bQ);};E.Select=function(bP,bQ,bR,bS){return E.SelectImpl(bP,bQ,function(bT){bT[0]=bR;return E.Concat(w.mapi(function(bU,bV){return E.Element("option",w.ofArray([S.Create("value",a.String(bU))]),w.ofArray([E.TextNode(bQ(bV))]));},bR));},bS);};E.Element=function(bP,bQ,bR){var bS,bT;bS=S.Concat(bQ);bT=E.Concat(bR);return bc.New(_7.CreateElement(bP),bS,bT);};E.InputInternal=function(bP,bQ){var bR;bR=_7.CreateElement(bP);return bc.New(bR,S.Concat(bQ(bR)),E.get_Empty());};E.Clickable=function(bP,bQ){var bR;bR=_7.CreateElement(bP);bR.addEventListener("click",function(bS){bS.preventDefault();return bQ();},false);return bR;};E.EmbedView=function(bP){var bQ;bQ=_8.CreateEmbedNode();return E.Mk({$:2,$0:bQ},q.Map(a.ignore,q.Bind(function(bR){_8.UpdateEmbedNode(bQ,bR.docNode);return bR.updates;},bP)));};E.RunInPlace=function(bP,bQ,bR){var bS;bS=_8.CreateRunState(bQ,bR.docNode);q.Sink(bh.get_UseAnimations()||bi.BatchUpdatesEnabled()?bj.StartProcessor(_8.PerformAnimatedUpdate(bP,bS,bR.docNode)):function(){_8.PerformSyncUpdate(bP,bS,bR.docNode);},bR.updates);};E.SelectImpl=function(bP,bQ,bR,bS){var bT,bU,bV,bW;function bX(b2){return b2.selectedIndex;}function bY(b2,b3){b2.selectedIndex=b3;}function bZ(b2){var b3;b3=bX(b2);return bT[0].get_Item(b3);}function b0(b2){return A.findIndex(function(b3){return o.Equals(b2,b3);},bT[0]);}function b1(b2,b3){return bY(b2,b0(b3));}bT=[x.Empty];bU=_7.CreateElement("select");bV=R.DynamicCustom(function(b2){return function(b3){return b1(b2,b3);};},bS.get_View());bU.addEventListener("change",function(){bS.UpdateMaybe(function(b2){var b3;b3=bZ(bU);return o.Equals(b2,b3)?null:{$:1,$0:b3};});},false);return bc.New(bU,(bW=S.Append(bV,S.Concat(bP)),S.Append(R.OnAfterRender(function(b2){b1(b2,bS.Get());}),bW)),bR(bT));};E.New=bM.Ctor(function(bP,bQ){l.New.call(this);this.docNode=bP;this.updates=bQ;},E);I.unindent=function(bP){var bQ,bR,bS,bT;bQ=J.SplitChars(bP,["\n"],0);bR=(bS=A.tryFindIndex(function(bU){return" "!==bU;},(bT=A.tryFind(function(bU){return J.Trim(bU)!=="";},bQ),bT==null?"":bT.$0)),bS==null?0:bS.$0);return A.filter(function(bU){return!J.StartsWith(bU,"# 1 ");},A.map(function(bU){return bU.length<=bR?"":bU.substring(bR);},bQ));};I.splitByChar=function(bP,bQ){return J.SplitChars(bQ,[bP],0);};J.concat=function(bP,bQ){return M.ofSeq(bQ).join(bP);};J.Replace=function(bP,bQ,bR){function bS(bT){var bU,bV,bW;bU=bT.indexOf(bQ);return bU!==-1?(bV=J.ReplaceOnce(bT,bQ,bR),(bW=bU+bR.length,J.Substring(bV,0,bU+bR.length)+bS(bV.substring(bW)))):bT;}return bS(bP);};J.ReplaceChar=function(bP,bQ,bR){return J.Replace(bP,bQ,bR);};J.ReplaceOnce=function(bP,bQ,bR){return bP.replace(bQ,bR);};J.SplitChars=function(bP,bQ,bR){return J.Split(bP,new a.RegExp("["+J.RegexEscape(bQ.join(""))+"]"),bR);};J.Trim=function(bP){return bP.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};J.StartsWith=function(bP,bQ){return bP.substring(0,bQ.length)==bQ;};J.Substring=function(bP,bQ,bR){return bP.substr(bQ,bR);};J.Split=function(bP,bQ,bR){return bR===1?M.filter(function(bS){return bS!=="";},J.SplitWith(bP,bQ)):J.SplitWith(bP,bQ);};J.RegexEscape=function(bP){return bP.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};J.SplitWith=function(bP,bQ){return bP.split(bQ);};K.array=function(bP,bQ,bR){return bQ==null?bR!=null&&bR.$==1?bP.slice(0,bR.$0+1):[]:bR==null?bP.slice(bQ.$0):bP.slice(bQ.$0,bR.$0+1);};K.string=function(bP,bQ,bR){return bQ==null?bR!=null&&bR.$==1?bP.slice(0,bR.$0+1):"":bR==null?bP.slice(bQ.$0):bP.slice(bQ.$0,bR.$0+1);};L.IsUpper=function(bP){return bP>="A"&&bP<="Z";};M.get=function(bP,bQ){M.checkBounds(bP,bQ);return bP[bQ];};M.length=function(bP){return bP.dims===2?bP.length*bP.length:bP.length;};M.checkBounds=function(bP,bQ){if(bQ<0||bQ>=bP.length)h.FailWith("Index was outside the bounds of the array.");};M.set=function(bP,bQ,bR){M.checkBounds(bP,bQ);bP[bQ]=bR;};M.map=function(bP,bQ){var bR,bS,bT;bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bP(bQ[bS]);return bR;};M.ofSeq=function(bP){var bQ,bR;if(bP instanceof a.Array)return bP.slice();else if(bP instanceof x)return M.ofList(bP);else{bQ=[];bR=T.Get(bP);try{while(bR.MoveNext())bQ.push(bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};M.ofList=function(bP){var bQ,bR;bR=[];bQ=bP;while(!(bQ.$==0)){bR.push(w.head(bQ));bQ=w.tail(bQ);}return bR;};M.exists=function(bP,bQ){var bR,bS,bT,bU;bR=false;bS=0;bU=M.length(bQ);while(!bR&&bS<bU)if(bP(bQ[bS]))bR=true;else bS=bS+1;return bR;};M.tryPick=function(bP,bQ){var bR,bS,bT;bR=null;bS=0;while(bS<bQ.length&&bR==null){bT=bP(bQ[bS]);bT!=null&&bT.$==1?bR=bT:void 0;bS=bS+1;}return bR;};M.tryFindIndex=function(bP,bQ){var bR,bS;bR=null;bS=0;while(bS<bQ.length&&bR==null){bP(bQ[bS])?bR={$:1,$0:bS}:void 0;bS=bS+1;}return bR;};M.foldBack=function(bP,bQ,bR){var bS,bT,bU,bV,bW;bS=bR;bU=bQ.length;for(bV=1,bW=bU;bV<=bW;bV++)bS=bP(bQ[bU-bV],bS);return bS;};M.filter=function(bP,bQ){var bR,bS,bT;bR=[];for(bS=0,bT=bQ.length-1;bS<=bT;bS++)if(bP(bQ[bS]))bR.push(bQ[bS]);return bR;};M.iter=function(bP,bQ){var bR,bS;for(bR=0,bS=bQ.length-1;bR<=bS;bR++)bP(bQ[bR]);};M.concat=function(bP){return a.Array.prototype.concat.apply([],M.ofSeq(bP));};M.pick=function(bP,bQ){var bR;bR=M.tryPick(bP,bQ);return bR==null?h.FailWith("KeyNotFoundException"):bR.$0;};M.choose=function(bP,bQ){var bR,bS,bT,bU;bR=[];for(bS=0,bT=bQ.length-1;bS<=bT;bS++){bU=bP(bQ[bS]);bU==null?void 0:bR.push(bU.$0);}return bR;};M.create=function(bP,bQ){var bR,bS,bT;bR=new a.Array(bP);for(bS=0,bT=bP-1;bS<=bT;bS++)bR[bS]=bQ;return bR;};M.init=function(bP,bQ){var bR,bS,bT;bP<0?h.FailWith("Negative size given."):null;bR=new a.Array(bP);for(bS=0,bT=bP-1;bS<=bT;bS++)bR[bS]=bQ(bS);return bR;};M.forall=function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=M.length(bQ);while(bR&&bS<bU)if(bP(bQ[bS]))bS=bS+1;else bR=false;return bR;};N=m.ConcreteVar=bM.Class({get_View:function(){return this.view;},Set:function(bP){if(this.isConst)(function(bQ){return bQ("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bQ){bK.log(bQ);}));else{O.Obsolete(this.snap);this.current=bP;this.snap=O.New({$:2,$0:bP,$1:[]});}},Get:function(){return this.current;},Update:function(bP){this.Set(bP(this.Get()));},UpdateMaybe:function(bP){var bQ;bQ=bP(this.Get());bQ!=null&&bQ.$==1?this.Set(bQ.$0):void 0;}},p,N);N.New=bM.Ctor(function(bP,bQ,bR){var bS;bS=this;p.New.call(this);this.isConst=bP;this.current=bR;this.snap=bQ;this.view=function(){return bS.snap;};this.id=Z.Int();},N);O.WhenRun=function(bP,bQ,bR){var bS;bS=bP.s;bS==null?bR():bS!=null&&bS.$==2?(bS.$1.push(bR),bQ(bS.$0)):bS!=null&&bS.$==3?(bS.$0.push(bQ),bS.$1.push(bR)):bQ(bS.$0);};O.Map=function(bP,bQ){var bR,bS;bR=bQ.s;return bR!=null&&bR.$==0?O.New({$:0,$0:bP(bR.$0)}):(bS=O.New({$:3,$0:[],$1:[]}),(O.When(bQ,function(bT){O.MarkDone(bS,bQ,bP(bT));},bS),bS));};O.Map2=function(bP,bQ,bR){var bS,bT,bU;function bV(bW){var bX,bY,bZ;if(!(bX=bU.s,bX!=null&&bX.$==0||bX!=null&&bX.$==2)){bY=O.ValueAndForever(bQ);bZ=O.ValueAndForever(bR);bY!=null&&bY.$==1?bZ!=null&&bZ.$==1?bY.$0[1]&&bZ.$0[1]?O.MarkForever(bU,bP(bY.$0[0],bZ.$0[0])):O.MarkReady(bU,bP(bY.$0[0],bZ.$0[0])):void 0:void 0;}}bS=bQ.s;bT=bR.s;return bS!=null&&bS.$==0?bT!=null&&bT.$==0?O.New({$:0,$0:bP(bS.$0,bT.$0)}):O.Map2Opt1(bP,bS.$0,bR):bT!=null&&bT.$==0?O.Map2Opt2(bP,bT.$0,bQ):(bU=O.New({$:3,$0:[],$1:[]}),(O.When(bQ,bV,bU),O.When(bR,bV,bU),bU));};O.WhenObsoleteRun=function(bP,bQ){var bR;bR=bP.s;bR==null?bQ():bR!=null&&bR.$==2?bR.$1.push(bQ):bR!=null&&bR.$==3?bR.$1.push(bQ):void 0;};O.When=function(bP,bQ,bR){var bS;bS=bP.s;bS==null?O.Obsolete(bR):bS!=null&&bS.$==2?(O.EnqueueSafe(bS.$1,bR),bQ(bS.$0)):bS!=null&&bS.$==3?(bS.$0.push(bQ),O.EnqueueSafe(bS.$1,bR)):bQ(bS.$0);};O.MarkDone=function(bP,bQ,bR){var bS;if(bS=bQ.s,bS!=null&&bS.$==0)O.MarkForever(bP,bR);else O.MarkReady(bP,bR);};O.Map2Opt1=function(bP,bQ,bR){return O.Map(function(bS){return bP(bQ,bS);},bR);};O.Map2Opt2=function(bP,bQ,bR){return O.Map(function(bS){return bP(bS,bQ);},bR);};O.ValueAndForever=function(bP){var bQ;bQ=bP.s;return bQ!=null&&bQ.$==0?{$:1,$0:[bQ.$0,true]}:bQ!=null&&bQ.$==2?{$:1,$0:[bQ.$0,false]}:null;};O.MarkForever=function(bP,bQ){var bR,bS,bT,bU;bR=bP.s;if(bR!=null&&bR.$==3){bP.s={$:0,$0:bQ};bS=bR.$0;for(bT=0,bU=M.length(bS)-1;bT<=bU;bT++)(M.get(bS,bT))(bQ);}else void 0;};O.MarkReady=function(bP,bQ){var bR,bS,bT,bU;bR=bP.s;if(bR!=null&&bR.$==3){bP.s={$:2,$0:bQ,$1:bR.$1};bS=bR.$0;for(bT=0,bU=M.length(bS)-1;bT<=bU;bT++)(M.get(bS,bT))(bQ);}else void 0;};O.EnqueueSafe=function(bP,bQ){var bR,bS,bT,bU;bP.push(bQ);if(bP.length%20===0){bR=bP.slice(0);by.Clear(bP);for(bS=0,bT=M.length(bR)-1;bS<=bT;bS++){bU=M.get(bR,bS);typeof bU=="object"?function(bV){if(bV.s)bP.push(bV);}(bU):function(bV){bP.push(bV);}(bU);}}else void 0;};O.Join=function(bP){var bQ;bQ=O.New({$:3,$0:[],$1:[]});O.When(bP,function(bR){var bS;bS=bR();O.When(bS,function(bT){var bU,bV;if((bU=bS.s,bU!=null&&bU.$==0)&&(bV=bP.s,bV!=null&&bV.$==0))O.MarkForever(bQ,bT);else O.MarkReady(bQ,bT);},bQ);},bQ);return bQ;};O.Map2Unit=function(bP,bQ){var bR,bS,bT;function bU(){var bV,bW,bX;if(!(bV=bT.s,bV!=null&&bV.$==0||bV!=null&&bV.$==2)){bW=O.ValueAndForever(bP);bX=O.ValueAndForever(bQ);bW!=null&&bW.$==1?bX!=null&&bX.$==1?bW.$0[1]&&bX.$0[1]?O.MarkForever(bT,null):O.MarkReady(bT,null):void 0:void 0;}}bR=bP.s;bS=bQ.s;return bR!=null&&bR.$==0?bS!=null&&bS.$==0?O.New({$:0,$0:null}):bQ:bS!=null&&bS.$==0?bP:(bT=O.New({$:3,$0:[],$1:[]}),(O.When(bP,bU,bT),O.When(bQ,bU,bT),bT));};O.Copy=function(bP){var bQ,bR,bS;bQ=bP.s;return bQ==null?bP:bQ!=null&&bQ.$==2?(bR=O.New({$:2,$0:bQ.$0,$1:[]}),(O.WhenObsolete(bP,bR),bR)):bQ!=null&&bQ.$==3?(bS=O.New({$:3,$0:[],$1:[]}),(O.When(bP,function(bT){O.MarkDone(bS,bP,bT);},bS),bS)):bP;};O.WhenObsolete=function(bP,bQ){var bR;bR=bP.s;bR==null?O.Obsolete(bQ):bR!=null&&bR.$==2?O.EnqueueSafe(bR.$1,bQ):bR!=null&&bR.$==3?O.EnqueueSafe(bR.$1,bQ):void 0;};P.Delay=function(bP){return function(bQ){try{(bP(null))(bQ);}catch(bR){bQ.k({$:1,$0:bR});}};};P.Zero=function(){_2.$cctor();return _2.Zero;};P.Bind=function(bP,bQ){return P.checkCancel(function(bR){bP(_1.New(function(bS){var bT;if(bS.$==0){bT=bS.$0;P.scheduler().Fork(function(){try{(bQ(bT))(bR);}catch(bU){bR.k({$:1,$0:bU});}});}else P.scheduler().Fork(function(){bR.k(bS);});},bR.ct));});};P.Start=function(bP,bQ){var bR,bS;bR=(bS=(P.defCTS())[0],bQ==null?bS:bQ.$0);P.scheduler().Fork(function(){if(!bR.c)bP(_1.New(function(bT){if(bT.$==1)P.UncaughtAsyncError(bT.$0);},bR));});};P.Combine=function(bP,bQ){return P.Bind(bP,function(){return bQ;});};P.While=function(bP,bQ){return bP()?P.Bind(bQ,function(){return P.While(bP,bQ);}):P.Return();};P.Sleep=function(bP){return function(bQ){var bR,bS;bR=void 0;bS=void 0;bR=a.setTimeout(function(){bS.Dispose();P.scheduler().Fork(function(){bQ.k({$:0,$0:null});});},bP);bS=P.Register(bQ.ct,function(){a.clearTimeout(bR);P.scheduler().Fork(function(){P.cancel(bQ);});});};};P.Return=function(bP){return function(bQ){bQ.k({$:0,$0:bP});};};P.checkCancel=function(bP){return function(bQ){if(bQ.ct.c)P.cancel(bQ);else bP(bQ);};};P.FromContinuations=function(bP){return function(bQ){var bR;function bS(bT){if(bR[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bR[0]=true;P.scheduler().Fork(bT);}}bR=[false];bP(function(bT){bS(function(){bQ.k({$:0,$0:bT});});},function(bT){bS(function(){bQ.k({$:1,$0:bT});});},function(bT){bS(function(){bQ.k({$:2,$0:bT});});});};};P.defCTS=function(){_2.$cctor();return _2.defCTS;};P.UncaughtAsyncError=function(bP){bK.log("WebSharper: Uncaught asynchronous exception",bP);};P.Register=function(bP,bQ){var bR;return bP===P.noneCT()?{Dispose:function(){return null;}}:(bR=bP.r.push(bQ)-1,{Dispose:function(){return M.set(bP.r,bR,a.ignore);}});};P.cancel=function(bP){bP.k({$:2,$0:new bl.New(bP.ct)});};P.scheduler=function(){_2.$cctor();return _2.scheduler;};P.noneCT=function(){_2.$cctor();return _2.noneCT;};Q.newPojoOpt=function(bP){function bQ(bR,bS){return bS==null?null:{$:1,$0:[bR,bS.$0]};}return Q.newPojo(A.choose(function(bR){return bQ(bR[0],bR[1]);},bP));};Q.newPojo=function(bP){var bQ,bR;function bS(bU,bV){return function(bW){return Q.addProp(bU,bV,bW);};}function bT(bU){}bQ={};A.iter((bR=function(bU){return(function(bV){return bS(bV[0],bV[1]);}(bU))(bQ);},function(bU){return bT(bR(bU));}),bP);return bQ;};Q.addProp=function(bP,bQ,bR){bR[bP]=bQ;return bR;};s.op_EqualsEqualsGreater=function(bP,bQ){return[bP,bQ==null?null:{$:1,$0:bQ.$0}];};R.DynamicPred=function(bP,bQ,bR){function bS(bT,bU){return bU[0]?_7.SetAttr(bT,bP,bU[1]):_7.RemoveAttr(bT,bP);}return _6.Dynamic(q.Map2(function(bT,bU){return[bT,bU];},bQ,bR),function(bT){return function(bU){return bS(bT,bU);};});};R.Value=function(bP){function bQ(bR){return{$:1,$0:bR};}return R.CustomValue(bP,a.id,function(bR){return bQ(a.id(bR));});};R.Checked=function(bP){function bQ(bR,bS){return!o.Equals(bP.Get(),bR.checked)?bP.Set(bR.checked):null;}return S.Concat([R.DynamicProp("checked",bP.get_View()),R.Handler("change",function(bR){return function(bS){return bQ(bR,bS);};})]);};R.CustomValue=function(bP,bQ,bR){return R.CustomVar(bP,function(bS,bT){bS.value=bQ(bT);},function(bS){return bR(bS.value);});};R.DynamicProp=function(bP,bQ){return _6.Dynamic(bQ,function(bR){return function(bS){bR[bP]=bS;};});};R.Handler=function(bP,bQ){return _6.Static(function(bR){bR.addEventListener(bP,function(bS){return(bQ(bR))(bS);},false);});};R.OnAfterRender=function(bP){return new S({$:4,$0:bP});};R.DynamicCustom=function(bP,bQ){return _6.Dynamic(bQ,bP);};R.CustomVar=function(bP,bQ,bR){function bS(bU,bV){return bP.UpdateMaybe(function(bW){var bX,bY;bX=bR(bU);return bX!=null&&bX.$==1&&(!o.Equals(bX.$0,bW)&&(bY=[bX,bX.$0],true))?bY[0]:null;});}function bT(bU,bV){var bW,bX;bW=bR(bU);return bW!=null&&bW.$==1&&(o.Equals(bW.$0,bV)&&(bX=bW.$0,true))?null:bQ(bU,bV);}return S.Concat([R.Handler("change",function(bU){return function(bV){return bS(bU,bV);};}),R.Handler("input",function(bU){return function(bV){return bS(bU,bV);};}),R.Handler("keypress",function(bU){return function(bV){return bS(bU,bV);};}),R.DynamicCustom(function(bU){return function(bV){return bT(bU,bV);};},bP.get_View())]);};S=m.AttrProxy=bM.Class({},null,S);S.Create=function(bP,bQ){return _6.Static(function(bR){_7.SetAttr(bR,bP,bQ);});};S.OnAfterRenderImpl=function(bP){return new S({$:4,$0:bP});};S.Concat=function(bP){var bQ;bQ=V.ofSeqNonCopying(bP);return V.TreeReduce(_6.EmptyAttr(),S.Append,bQ);};S.Append=function(bP,bQ){return _6.AppendTree(bP,bQ);};T.Get=function(bP){return bP instanceof a.Array?T.ArrayEnumerator(bP):o.Equals(typeof bP,"string")?T.StringEnumerator(bP):bP.GetEnumerator();};T.ArrayEnumerator=function(bP){return new U.New(0,null,function(bQ){var bR;bR=bQ.s;return bR<M.length(bP)&&(bQ.c=M.get(bP,bR),bQ.s=bR+1,true);},void 0);};T.StringEnumerator=function(bP){return new U.New(0,null,function(bQ){var bR;bR=bQ.s;return bR<bP.length&&(bQ.c=bP[bR],bQ.s=bR+1,true);},void 0);};T.Get0=function(bP){return bP instanceof a.Array?T.ArrayEnumerator(bP):o.Equals(typeof bP,"string")?T.StringEnumerator(bP):"GetEnumerator0"in bP?bP.GetEnumerator0():bP.GetEnumerator();};U=T.T=bM.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},l,U);U.New=bM.Ctor(function(bP,bQ,bR,bS){l.New.call(this);this.s=bP;this.c=bQ;this.n=bR;this.d=bS;},U);V.ofSeqNonCopying=function(bP){var bQ,bR;if(bP instanceof a.Array)return bP;else if(bP instanceof x)return M.ofList(bP);else if(bP===null)return[];else{bQ=[];bR=T.Get(bP);try{while(bR.MoveNext())bQ.push(bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};V.TreeReduce=function(bP,bQ,bR){var bS;function bT(bU,bV){var bW,bX;return bV<=0?bP:bV===1&&(bU>=0&&bU<bS)?M.get(bR,bU):(bX=bV/2>>0,bQ(bT(bU,bX),bT(bU+bX,bV-bX)));}bS=M.length(bR);return bT(0,bS);};V.MapTreeReduce=function(bP,bQ,bR,bS){var bT;function bU(bV,bW){var bX,bY;return bW<=0?bQ:bW===1&&(bV>=0&&bV<bT)?bP(M.get(bS,bV)):(bY=bW/2>>0,bR(bU(bV,bY),bU(bV+bY,bW-bY)));}bT=M.length(bS);return bU(0,bT);};X.LoadLocalTemplates=function(bP){!X.LocalTemplatesLoaded()?(X.set_LocalTemplatesLoaded(true),X.LoadNestedTemplates(self.document.body,"")):void 0;X.LoadedTemplates().set_Item(bP,X.LoadedTemplateFile(""));};X.LocalTemplatesLoaded=function(){bf.$cctor();return bf.LocalTemplatesLoaded;};X.set_LocalTemplatesLoaded=function(bP){bf.$cctor();bf.LocalTemplatesLoaded=bP;};X.LoadNestedTemplates=function(bP,bQ){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5;function bR(b6){var b7,b8;if(!bS.ContainsKey(b6)){b7=(b8=null,[bT.TryGetValue(b6,{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);b7[0]?(b5.Add(b6),bT.Remove(b6),X.PrepareTemplateStrict(bQ,{$:1,$0:b6},b7[1][0],{$:1,$0:b7[1][1]},{$:1,$0:bR})):bK.warn(b5.Contains(b6)?"Encountered loop when instantiating "+b6:"Local template does not exist: "+b6);}}bS=X.LoadedTemplateFile(bQ);bT=new _.New$5();bU=bP.querySelectorAll("[ws-template]");for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=bU[bV];bY=bX.getAttribute("ws-template").toLowerCase();bX.removeAttribute("ws-template");bT.set_Item(bY,[[bX],X.FakeRootSingle(bX)]);}bZ=bP.querySelectorAll("[ws-children-template]");for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];b3=b2.getAttribute("ws-children-template").toLowerCase();b2.removeAttribute("ws-children-template");bT.set_Item(b3,(b4=_7.ChildrenArray(b2),[b4,X.FakeRoot(b4)]));}b5=new bg.New$3();while(bT.count>0)bR(A.head(bT.get_Keys()));};X.LoadedTemplates=function(){bf.$cctor();return bf.LoadedTemplates;};X.LoadedTemplateFile=function(bP){var bQ,bR,bS;bQ=(bR=null,[X.LoadedTemplates().TryGetValue(bP,{get:function(){return bR;},set:function(bT){bR=bT;}}),bR]);return bQ[0]?bQ[1]:(bS=new _.New$5(),(X.LoadedTemplates().set_Item(bP,bS),bS));};X.FakeRootSingle=function(bP){var bQ,bR,bS;bP.removeAttribute("ws-template");bQ=bP.getAttribute("ws-replace");bQ===null?void 0:(bP.removeAttribute("ws-replace"),bR=bP.parentNode,o.Equals(bR,null)?void 0:(bS=self.document.createElement(bP.tagName),bS.setAttribute("ws-replace",bQ),bR.replaceChild(bS,bP)));return X.FakeRoot([bP]);};X.FakeRoot=function(bP){var bQ,bR,bS;bQ=self.document.createElement("div");for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ.appendChild(M.get(bP,bR));return bQ;};X.PrepareTemplateStrict=function(bP,bQ,bR,bS,bT){var bU,bV;function bW(b1,b2){var b3,b4,b5,b6,b7,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;function b8(cs){}while(true)switch(b1){case 0:if(b2!==null){b3=b2.nextSibling;if(o.Equals(b2.nodeType,G.TEXT_NODE))br.convertTextNode(b2);else if(o.Equals(b2.nodeType,G.ELEMENT_NODE))bY(b2);b2=b3;}else return null;break;case 1:b9=K.string(b2.nodeName,{$:1,$0:3},null).toLowerCase();b_=(b4=b9.indexOf("."),b4===-1?[bP,b9]:[K.string(b9,null,{$:1,$0:b4-1}),K.string(b9,{$:1,$0:b4+1},null)]);b$=b_[1];ca=b_[0];if(ca!==""&&!X.LoadedTemplates().ContainsKey(ca))return br.failNotLoaded(b$);else{if(ca===""&&bT!=null)bT.$0(b$);cb=X.LoadedTemplates().get_Item(ca);if(!cb.ContainsKey(b$))return br.failNotLoaded(b$);else{cc=cb.get_Item(b$);cd=cc.cloneNode(true);ce=new bg.New$3();cf=new _.New$5();cg=b2.attributes;for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=cg.item(ch).name.toLowerCase();cf.set_Item(cj,(ck=cg.item(ch).nodeValue,ck===""?cj:ck.toLowerCase()));!ce.Add(cj)?bK.warn("Hole mapped twice",cj):void 0;}for(cl=0,cm=b2.childNodes.length-1;cl<=cm;cl++){cn=b2.childNodes[cl];o.Equals(cn.nodeType,G.ELEMENT_NODE)?!ce.Add(cn.nodeName.toLowerCase())?bK.warn("Hole filled twice",b$):void 0:void 0;}co=b2.childNodes.length===1&&o.Equals(b2.firstChild.nodeType,G.TEXT_NODE);if(co){b6=br.fillTextHole(cd,b2.firstChild.textContent,b$);((function(cs){return function(ct){if(ct!=null)cs(ct.$0);};}((b7=function(cs){return function(ct){return cs.Add(ct);};}(ce),function(cs){return b8(b7(cs));})))(b6));}br.removeHolesExcept(cd,ce);if(!co){for(cp=0,cq=b2.childNodes.length-1;cp<=cq;cp++){cr=b2.childNodes[cp];o.Equals(cr.nodeType,G.ELEMENT_NODE)?cr.hasAttributes()?br.fillInstanceAttrs(cd,cr):bX(cd,cr):void 0;}}br.mapHoles(cd,cf);br.fill(cd,b2.parentNode,b2);b2.parentNode.removeChild(b2);return;}}break;}}function bX(b1,b2){var b3,b5,b6;function b4(b7,b8){var b9,b_,b$;if(b5==="title"&&b2.hasChildNodes()){b9=bN.parseHTML(b2.textContent);b2.removeChild(b2.firstChild);for(b_=0,b$=b9.length-1;b_<=b$;b_++)b2.appendChild(M.get(b9,b_));}else null;bY(b2);return br.fill(b2,b7,b8);}b5=b2.nodeName.toLowerCase();_7.IterSelector(b1,"[ws-attr-holes]",function(b7){var b8,b9,b_,b$,ca;b8=J.SplitChars(b7.getAttribute("ws-attr-holes"),[" "],1);for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=M.get(b8,b9);b7.setAttribute(b$,(ca=new a.RegExp("\\${"+b5+"}","ig"),b7.getAttribute(b$).replace(ca,b2.textContent)));}});b6=b1.querySelector("[ws-hole="+b5+"]");if(o.Equals(b6,null)){b3=b1.querySelector("[ws-replace="+b5+"]");return o.Equals(b3,null)?null:(b4(b3.parentNode,b3),void b3.parentNode.removeChild(b3));}else{while(b6.hasChildNodes())b6.removeChild(b6.lastChild);b6.removeAttribute("ws-hole");return b4(b6,null);}}function bY(b1){if(J.StartsWith(b1.nodeName.toLowerCase(),"ws-"))b0(b1);else{br.convertAttrs(b1);bZ(b1.firstChild);}}function bZ(b1){return bW(0,b1);}function b0(b1){return bW(1,b1);}bU=bS==null?X.FakeRoot(bR):bS.$0;bV=(bQ==null?"":bQ.$0).toLowerCase();X.LoadedTemplateFile(bP).set_Item(bV,bU);M.length(bR)>0?(function(b1){var b2,b3,b4,b5;while(true){b2=b1.querySelector("[ws-template]");if(o.Equals(b2,null)){b3=b1.querySelector("[ws-children-template]");if(o.Equals(b3,null))return null;else{b4=b3.getAttribute("ws-children-template");b3.removeAttribute("ws-children-template");X.PrepareTemplateStrict(bP,{$:1,$0:b4},_7.ChildrenArray(b3),null,null);b1=b1;}}else{b5=b2.getAttribute("ws-template");(X.PrepareSingleTemplate(bP,{$:1,$0:b5},b2))(null);b1=b1;}}}(bU),bZ(M.get(bR,0))):void 0;};X.PrepareSingleTemplate=function(bP,bQ,bR){var bS,bT,bU;bS=X.FakeRootSingle(bR);bT=[bR];bU={$:1,$0:bS};return function(bV){X.PrepareTemplateStrict(bP,bQ,bT,bU,bV);};};X.TextHoleRE=function(){bf.$cctor();return bf.TextHoleRE;};Z.Id=function(){Z.set_counter(Z.counter()+1);return"uid"+a.String(Z.counter());};Z.Int=function(){Z.set_counter(Z.counter()+1);return Z.counter();};Z.set_counter=function(bP){bk.$cctor();bk.counter=bP;};Z.counter=function(){bk.$cctor();return bk.counter;};O.Obsolete=function(bP){var bQ,bR,bS,bT,bU;bR=bP.s;if(bR==null||(bR!=null&&bR.$==2?(bQ=bR.$1,false):bR!=null&&bR.$==3?(bQ=bR.$1,false):true))void 0;else{bP.s=null;for(bS=0,bT=M.length(bQ)-1;bS<=bT;bS++){bU=M.get(bQ,bS);typeof bU=="object"?function(bV){O.Obsolete(bV);}(bU):bU();}}};O.New=function(bP){return{s:bP};};_1.New=function(bP,bQ){return{k:bP,ct:bQ};};_2.$cctor=function(){_2.$cctor=a.ignore;_2.noneCT=_5.New(false,[]);_2.scheduler=new $.New();_2.defCTS=[new ba.New()];_2.Zero=P.Return();_2.GetCT=function(bP){bP.k({$:0,$0:bP.ct});};};_4=u.NonStandardPromiseRejectionException=bM.Class({},_3,_4);_4.New=bM.Ctor(function(bP){this.message="Promise rejected";_0.setPrototypeOf(this,_4.prototype);this.reason=bP;},_4);_5.New=function(bP,bQ){return{c:bP,r:bQ};};_6.Dynamic=function(bP,bQ){return new S({$:1,$0:new bb.New(bP,bQ)});};_6.Static=function(bP){return new S({$:3,$0:bP});};_6.Updates=function(bP){return V.MapTreeReduce(function(bQ){return bQ.NChanged();},q.Const(),q.Map2Unit,bP.DynNodes);};_6.AppendTree=function(bP,bQ){var bR;return bP===null?bQ:bQ===null?bP:(bR=new S({$:2,$0:bP,$1:bQ}),(_6.SetFlags(bR,_6.Flags(bP)|_6.Flags(bQ)),bR));};_6.EmptyAttr=function(){bz.$cctor();return bz.EmptyAttr;};_6.Insert=function(bP,bQ){var bR,bS,bT;function bU(bV){if(!(bV===null))if(bV!=null&&bV.$==1)bR.push(bV.$0);else if(bV!=null&&bV.$==2){bU(bV.$0);bU(bV.$1);}else if(bV!=null&&bV.$==3)bV.$0(bP);else if(bV!=null&&bV.$==4)bS.push(bV.$0);}bR=[];bS=[];bU(bQ);bT=bR.slice(0);return bp.New(bP,_6.Flags(bQ),bT,bS.length===0?null:{$:1,$0:function(bV){A.iter(function(bW){bW(bV);},bS);}});};_6.SetFlags=function(bP,bQ){bP.flags=bQ;};_6.Flags=function(bP){return bP!==null&&bP.hasOwnProperty("flags")?bP.flags:0;};_6.HasExitAnim=function(bP){var bQ;bQ=2;return(bP.DynFlags&bQ)===bQ;};_6.GetExitAnim=function(bP){return _6.GetAnim(bP,function(bQ,bR){return bQ.NGetExitAnim(bR);});};_6.HasEnterAnim=function(bP){var bQ;bQ=1;return(bP.DynFlags&bQ)===bQ;};_6.GetEnterAnim=function(bP){return _6.GetAnim(bP,function(bQ,bR){return bQ.NGetEnterAnim(bR);});};_6.HasChangeAnim=function(bP){var bQ;bQ=4;return(bP.DynFlags&bQ)===bQ;};_6.GetChangeAnim=function(bP){return _6.GetAnim(bP,function(bQ,bR){return bQ.NGetChangeAnim(bR);});};_6.GetAnim=function(bP,bQ){return bh.Concat(M.map(function(bR){return bQ(bR,bP.DynElem);},bP.DynNodes));};_6.Sync=function(bP,bQ){M.iter(function(bR){bR.NSync(bP);},bQ.DynNodes);};_7.SetAttr=function(bP,bQ,bR){bP.setAttribute(bQ,bR);};_7.RemoveAttr=function(bP,bQ){bP.removeAttribute(bQ);};_7.CreateText=function(bP){return _7.Doc().createTextNode(bP);};_7.CreateElement=function(bP){return _7.Doc().createElement(bP);};_7.Doc=function(){bm.$cctor();return bm.Doc;};_7.ChildrenArray=function(bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.childNodes.length-1;bR<=bS;bR++)bQ.push(bP.childNodes[bR]);return bQ;};_7.IterSelector=function(bP,bQ,bR){var bS,bT,bU;bS=bP.querySelectorAll(bQ);for(bT=0,bU=bS.length-1;bT<=bU;bT++)bR(bS[bT]);};_7.InsertAt=function(bP,bQ,bR){var bS;if(!(bR.parentNode===bP&&bQ===(bS=bR.nextSibling,o.Equals(bS,null)?null:bS)))bP.insertBefore(bR,bQ);};_7.RemoveNode=function(bP,bQ){if(bQ.parentNode===bP)bP.removeChild(bQ);};_8.CreateTextNode=function(){return{Text:_7.CreateText(""),Dirty:false,Value:""};};_8.UpdateTextNode=function(bP,bQ){bP.Value=bQ;bP.Dirty=true;};_8.LinkElement=function(bP,bQ){_8.InsertDoc(bP,bQ,null);};_8.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_8.UpdateEmbedNode=function(bP,bQ){bP.Current=bQ;bP.Dirty=true;};_8.InsertDoc=function(bP,bQ,bR){var bS;return bQ!=null&&bQ.$==1?_8.InsertNode(bP,bQ.$0.El,bR):bQ!=null&&bQ.$==2?(bS=bQ.$0,(bS.Dirty=false,_8.InsertDoc(bP,bS.Current,bR))):bQ==null?bR:bQ!=null&&bQ.$==4?_8.InsertNode(bP,bQ.$0.Text,bR):bQ!=null&&bQ.$==5?_8.InsertNode(bP,bQ.$0,bR):bQ!=null&&bQ.$==6?M.foldBack(function(bT,bU){return bT==null||bT.constructor===_0?_8.InsertDoc(bP,bT,bU):_8.InsertNode(bP,bT,bU);},bQ.$0.Els,bR):_8.InsertDoc(bP,bQ.$0,_8.InsertDoc(bP,bQ.$1,bR));};_8.CreateRunState=function(bP,bQ){return bu.New(bv.get_Empty(),_8.CreateElemNode(bP,_6.EmptyAttr(),bQ));};_8.PerformAnimatedUpdate=function(bP,bQ,bR){var bS;return bh.get_UseAnimations()?(bS=null,P.Delay(function(){var bT,bU,bV;bT=bv.FindAll(bR);bU=_8.ComputeChangeAnim(bQ,bT);bV=_8.ComputeEnterAnim(bQ,bT);return P.Bind(bh.Play(bh.Append(bU,_8.ComputeExitAnim(bQ,bT))),function(){return P.Bind(_8.SyncElemNodesNextFrame(bP,bQ),function(){return P.Bind(bh.Play(bV),function(){bQ.PreviousNodes=bT;return P.Return(null);});});});})):_8.SyncElemNodesNextFrame(bP,bQ);};_8.PerformSyncUpdate=function(bP,bQ,bR){var bS;bS=bv.FindAll(bR);_8.SyncElemNode(bP,bQ.Top);bQ.PreviousNodes=bS;};_8.CreateElemNode=function(bP,bQ,bR){var bS;_8.LinkElement(bP,bR);bS=_6.Insert(bP,bQ);return bd.New(bS,bR,null,bP,Z.Int(),bM.GetOptional(bS.OnAfterRender));};_8.InsertNode=function(bP,bQ,bR){_7.InsertAt(bP,bR,bQ);return bQ;};_8.SyncElemNodesNextFrame=function(bP,bQ){function bR(bS){a.requestAnimationFrame(function(){_8.SyncElemNode(bP,bQ.Top);bS();});}return bi.BatchUpdatesEnabled()?P.FromContinuations(function(bS,bT,bU){return bR.apply(null,[bS,bT,bU]);}):(_8.SyncElemNode(bP,bQ.Top),P.Return(null));};_8.ComputeExitAnim=function(bP,bQ){return bh.Concat(M.map(function(bR){return _6.GetExitAnim(bR.Attr);},bv.ToArray(bv.Except(bQ,bv.Filter(function(bR){return _6.HasExitAnim(bR.Attr);},bP.PreviousNodes)))));};_8.ComputeEnterAnim=function(bP,bQ){return bh.Concat(M.map(function(bR){return _6.GetEnterAnim(bR.Attr);},bv.ToArray(bv.Except(bP.PreviousNodes,bv.Filter(function(bR){return _6.HasEnterAnim(bR.Attr);},bQ)))));};_8.ComputeChangeAnim=function(bP,bQ){var bR;function bS(bT){return _6.HasChangeAnim(bT.Attr);}bR=function(bT){return bv.Filter(bS,bT);};return bh.Concat(M.map(function(bT){return _6.GetChangeAnim(bT.Attr);},bv.ToArray(bv.Intersect(bR(bP.PreviousNodes),bR(bQ)))));};_8.SyncElemNode=function(bP,bQ){!bP?_8.SyncElement(bQ):void 0;_8.Sync(bQ.Children);_8.AfterRender(bQ);};_8.SyncElement=function(bP){function bQ(bR){function bS(bT){var bU,bV;return bT!=null&&bT.$==0?bS(bT.$0)||bS(bT.$1):bT!=null&&bT.$==2?(bU=bT.$0,bU.Dirty||bS(bU.Current)):bT!=null&&bT.$==6&&(bV=bT.$0,bV.Dirty||M.exists(bQ,bV.Holes));}return bS(bR.Children);}_6.Sync(bP.El,bP.Attr);bQ(bP)?_8.DoSyncElement(bP):void 0;};_8.Sync=function(bP){var bQ,bR;if(bP!=null&&bP.$==1)_8.SyncElemNode(false,bP.$0);else if(bP!=null&&bP.$==2)_8.Sync(bP.$0.Current);else if(bP==null);else if(bP!=null&&bP.$==5);else if(bP!=null&&bP.$==4){bQ=bP.$0;bQ.Dirty?(bQ.Text.nodeValue=bQ.Value,bQ.Dirty=false):void 0;}else if(bP!=null&&bP.$==6){bR=bP.$0;M.iter(function(bS){_8.SyncElemNode(false,bS);},bR.Holes);M.iter(function(bS){_6.Sync(bS[0],bS[1]);},bR.Attrs);_8.AfterRender(bR);}else{_8.Sync(bP.$0);_8.Sync(bP.$1);}};_8.AfterRender=function(bP){var bQ;bQ=bM.GetOptional(bP.Render);bQ!=null&&bQ.$==1?(bQ.$0(bP.El),bM.SetOptional(bP,"Render",null)):void 0;};_8.DoSyncElement=function(bP){var bQ,bR,bS;function bT(bU,bV){var bW,bX;return bU!=null&&bU.$==1?bU.$0.El:bU!=null&&bU.$==2?(bW=bU.$0,bW.Dirty?(bW.Dirty=false,_8.InsertDoc(bQ,bW.Current,bV)):bT(bW.Current,bV)):bU==null?bV:bU!=null&&bU.$==4?bU.$0.Text:bU!=null&&bU.$==5?bU.$0:bU!=null&&bU.$==6?(bX=bU.$0,(bX.Dirty?bX.Dirty=false:void 0,M.foldBack(function(bY,bZ){return bY==null||bY.constructor===_0?bT(bY,bZ):bY;},bX.Els,bV))):bT(bU.$0,bT(bU.$1,bV));}bQ=bP.El;bF.Iter((bR=bP.El,function(bU){_7.RemoveNode(bR,bU);}),bF.Except(bF.DocChildren(bP),bF.Children(bP.El,bM.GetOptional(bP.Delimiters))));bT(bP.Children,(bS=bM.GetOptional(bP.Delimiters),bS!=null&&bS.$==1?bS.$0[1]:null));};q=m.View=bM.Class({},null,q);_=_9.Dictionary=bM.Class({set_Item:function(bP,bQ){this.set(bP,bQ);},ContainsKey:function(bP){var bQ,bR;bQ=this;bR=this.data[this.hash(bP)];return bR==null?false:M.exists(function(bS){return bQ.equals.apply(null,[(h.KeyValue(bS))[0],bP]);},bR);},TryGetValue:function(bP,bQ){var bR,bS,bT;bR=this;bS=this.data[this.hash(bP)];return bS==null?false:(bT=M.tryPick(function(bU){var bV;bV=h.KeyValue(bU);return bR.equals.apply(null,[bV[0],bP])?{$:1,$0:bV[1]}:null;},bS),bT!=null&&bT.$==1&&(bQ.set(bT.$0),true));},Remove:function(bP){return this.remove(bP);},get_Keys:function(){return new bs.New(this);},set:function(bP,bQ){var bR,bS,bT,bU;bR=this;bS=this.hash(bP);bT=this.data[bS];bT==null?(this.count=this.count+1,this.data[bS]=new a.Array({K:bP,V:bQ})):(bU=M.tryFindIndex(function(bV){return bR.equals.apply(null,[(h.KeyValue(bV))[0],bP]);},bT),bU==null?(this.count=this.count+1,bT.push({K:bP,V:bQ})):bT[bU.$0]={K:bP,V:bQ});},remove:function(bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bP);bS=this.data[bR];return bS==null?false:(bT=M.filter(function(bU){return!bQ.equals.apply(null,[(h.KeyValue(bU))[0],bP]);},bS),M.length(bT)<bS.length&&(this.count=this.count-1,this.data[bR]=bT,true));},get_Item:function(bP){return this.get(bP);},get:function(bP){var bQ,bR;bQ=this;bR=this.data[this.hash(bP)];return bR==null?bq.notPresent():M.pick(function(bS){var bT;bT=h.KeyValue(bS);return bQ.equals.apply(null,[bT[0],bP])?{$:1,$0:bT[1]}:null;},bR);},GetEnumerator:function(){return T.Get0(this);},GetEnumerator0:function(){return T.Get0(M.concat(B.GetFieldValues(this.data)));}},l,_);_.New$5=bM.Ctor(function(){_.New$6.call(this,[],o.Equals,o.Hash);},_);_.New$6=bM.Ctor(function(bP,bQ,bR){var bS,bT;l.New.call(this);this.equals=bQ;this.hash=bR;this.count=0;this.data=[];bS=T.Get(bP);try{while(bS.MoveNext()){bT=bS.Current();this.set(bT.K,bT.V);}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},_);$=P.Scheduler=bM.Class({Fork:function(bP){var bQ;bQ=this;this.robin.push(bP);this.idle?(this.idle=false,a.setTimeout(function(){bQ.tick();},0)):void 0;},tick:function(){var bP,bQ,bR;bQ=this;bR=bO.now();bP=true;while(bP)if(this.robin.length===0){this.idle=true;bP=false;}else{(this.robin.shift())();bO.now()-bR>40?(a.setTimeout(function(){bQ.tick();},0),bP=false):void 0;}}},l,$);$.New=bM.Ctor(function(){l.New.call(this);this.idle=true;this.robin=[];},$);ba=g.CancellationTokenSource=bM.Class({},l,ba);ba.New=bM.Ctor(function(){l.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},ba);bb=m.DynamicAttrNode=bM.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bP){return bh.get_Empty();},NGetEnterAnim:function(bP){return bh.get_Empty();},NGetChangeAnim:function(bP){return bh.get_Empty();},NSync:function(bP){if(this.dirty){(this.push(bP))(this.value);this.dirty=false;}}},l,bb);bb.New=bM.Ctor(function(bP,bQ){var bR;bR=this;l.New.call(this);this.push=bQ;this.value=void 0;this.dirty=false;this.updates=q.Map(function(bS){bR.value=bS;bR.dirty=true;},bP);},bb);bc=m.Elt=bM.Class({},E,bc);bc.New=function(bP,bQ,bR){var bS,bT;bS=_8.CreateElemNode(bP,bQ,bR.docNode);bT=bn.Create(bR.updates);return new bc.New$1({$:1,$0:bS},q.Map2Unit(_6.Updates(bS.Attr),bT.v),bP,bT);};bc.New$1=bM.Ctor(function(bP,bQ,bR,bS){E.New.call(this,bP,bQ);this.docNode$1=bP;this.updates$1=bQ;this.elt=bR;this.rvUpdates=bS;},bc);bd=m.DocElemNode=bM.Class({Equals:function(bP){return this.ElKey===bP.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bd);bd.New=function(bP,bQ,bR,bS,bT,bU){var bV;return new bd((bV={Attr:bP,Children:bQ,El:bS,ElKey:bT},(bM.SetOptional(bV,"Delimiters",bR),bM.SetOptional(bV,"Render",bU),bV)));};bf.$cctor=function(){bf.$cctor=a.ignore;bf.LoadedTemplates=new _.New$5();bf.LocalTemplatesLoaded=false;bf.TextHoleRE="\\${([^}]+)}";};bg=_9.HashSet=bM.Class({Add:function(bP){return this.add(bP);},Contains:function(bP){var bQ;bQ=this.data[this.hash(bP)];return bQ==null?false:this.arrContains(bP,bQ);},add:function(bP){var bQ,bR;bQ=this.hash(bP);bR=this.data[bQ];return bR==null?(this.data[bQ]=[bP],this.count=this.count+1,true):this.arrContains(bP,bR)?false:(bR.push(bP),this.count=this.count+1,true);},arrContains:function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=bQ.length;while(bR&&bS<bU)if(this.equals.apply(null,[bQ[bS],bP]))bR=false;else bS=bS+1;return!bR;},ExceptWith:function(bP){var bQ;bQ=T.Get(bP);try{while(bQ.MoveNext())this.Remove(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bP){var bQ,bR,bS,bT;bQ=0;bR=bE.concat(this.data);for(bS=0,bT=bR.length-1;bS<=bT;bS++)M.set(bP,bS,bR[bS]);},IntersectWith:function(bP){var bQ,bR,bS,bT,bU;bQ=new bg.New$4(bP,this.equals,this.hash);bR=bE.concat(this.data);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=bR[bS];!bQ.Contains(bU)?this.Remove(bU):void 0;}},Remove:function(bP){var bQ;bQ=this.data[this.hash(bP)];return bQ==null?false:this.arrRemove(bP,bQ)&&(this.count=this.count-1,true);},arrRemove:function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=bQ.length;while(bR&&bS<bU)if(this.equals.apply(null,[bQ[bS],bP])){bQ.splice.apply(bQ,[bS,1]);bR=false;}else bS=bS+1;return!bR;},GetEnumerator:function(){return T.Get(bE.concat(this.data));},GetEnumerator0:function(){return T.Get(bE.concat(this.data));}},l,bg);bg.New$3=bM.Ctor(function(){bg.New$4.call(this,[],o.Equals,o.Hash);},bg);bg.New$4=bM.Ctor(function(bP,bQ,bR){var bS;l.New.call(this);this.equals=bQ;this.hash=bR;this.data=[];this.count=0;bS=T.Get(bP);try{while(bS.MoveNext())this.add(bS.Current());}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},bg);bg.New$2=bM.Ctor(function(bP){bg.New$4.call(this,bP,o.Equals,o.Hash);},bg);bh.get_UseAnimations=function(){return bw.UseAnimations();};bh.Play=function(bP){var bQ;bQ=null;return P.Delay(function(){return P.Bind(bh.Run(a.ignore,bw.Actions(bP)),function(){bw.Finalize(bP);return P.Return(null);});});};bh.Append=function(bP,bQ){return{$:0,$0:bB.Append(bP.$0,bQ.$0)};};bh.Run=function(bP,bQ){var bR;function bS(bT){function bU(bV,bW){var bX;bX=bW-bV;bQ.Compute(bX);bP();return bX<=bR?void a.requestAnimationFrame(function(bY){bU(bV,bY);}):bT();}a.requestAnimationFrame(function(bV){bU(bV,bV);});}bR=bQ.Duration;return bR===0?P.Zero():P.FromContinuations(function(bT,bU,bV){return bS.apply(null,[bT,bU,bV]);});};bh.Concat=function(bP){return{$:0,$0:bB.Concat(A.map(bw.List,bP))};};bh.get_Empty=function(){return{$:0,$0:bB.Empty()};};bi.BatchUpdatesEnabled=function(){bx.$cctor();return bx.BatchUpdatesEnabled;};bj.StartProcessor=function(bP){var bQ;function bR(){var bS;bS=null;return P.Delay(function(){return P.Bind(bP,function(){var bT;bT=bQ[0];return bT===1?(bQ[0]=0,P.Zero()):bT===2?(bQ[0]=1,bR()):P.Zero();});});}bQ=[0];return function(){var bS;bS=bQ[0];bS===0?(bQ[0]=1,P.Start(bR(),null)):bS===1?bQ[0]=2:void 0;};};bk.$cctor=function(){bk.$cctor=a.ignore;bk.counter=0;};bl=g.OperationCanceledException=bM.Class({},_3,bl);bl.New=bM.Ctor(function(bP){bl.New$1.call(this,"The operation was canceled.",null,bP);},bl);bl.New$1=bM.Ctor(function(bP,bQ,bR){this.message=bP;this.inner=bQ;_0.setPrototypeOf(this,bl.prototype);this.ct=bR;},bl);bm.$cctor=function(){bm.$cctor=a.ignore;bm.Doc=self.document;};bn=m.Updates=bM.Class({},null,bn);bn.Create=function(bP){var bQ;bQ=null;bQ=bn.New(bP,null,function(){var bR;bR=bQ.s;return bR===null?(bR=O.Copy(bQ.c()),bQ.s=bR,O.WhenObsoleteRun(bR,function(){bQ.s=null;}),bR):bR;});return bQ;};bn.New=function(bP,bQ,bR){return new bn({c:bP,s:bQ,v:bR});};bp.New=function(bP,bQ,bR,bS){var bT;bT={DynElem:bP,DynFlags:bQ,DynNodes:bR};bM.SetOptional(bT,"OnAfterRender",bS);return bT;};bq.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};br.convertTextNode=function(bP){var bQ,bR,bS,bT,bU,bV;bQ=null;bR=0;bT=bP.textContent;bU=new a.RegExp(X.TextHoleRE(),"g");while(bQ=bU.exec(bT),bQ!==null){bP.parentNode.insertBefore(self.document.createTextNode(K.string(bT,{$:1,$0:bR},{$:1,$0:bU.lastIndex-M.get(bQ,0).length-1})),bP);bR=bU.lastIndex;bV=self.document.createElement("span");bV.setAttribute("ws-replace",M.get(bQ,1).toLowerCase());bP.parentNode.insertBefore(bV,bP);}bU.lastIndex=0;bP.textContent=K.string(bT,{$:1,$0:bR},null);};br.failNotLoaded=function(bP){bK.warn("Instantiating non-loaded template",bP);};br.fillTextHole=function(bP,bQ,bR){var bS;bS=bP.querySelector("[ws-replace]");return o.Equals(bS,null)?(bK.warn("Filling non-existent text hole",bR),null):(bS.parentNode.replaceChild(new a.Text(bQ),bS),{$:1,$0:bS.getAttribute("ws-replace")});};br.removeHolesExcept=function(bP,bQ){function bR(bS){_7.IterSelector(bP,"["+bS+"]",function(bT){if(!bQ.Contains(bT.getAttribute(bS)))bT.removeAttribute(bS);});}bR("ws-attr");bR("ws-onafterrender");bR("ws-var");_7.IterSelector(bP,"[ws-hole]",function(bS){if(!bQ.Contains(bS.getAttribute("ws-hole"))){bS.removeAttribute("ws-hole");while(bS.hasChildNodes())bS.removeChild(bS.lastChild);}});_7.IterSelector(bP,"[ws-replace]",function(bS){if(!bQ.Contains(bS.getAttribute("ws-replace")))bS.parentNode.removeChild(bS);});_7.IterSelector(bP,"[ws-on]",function(bS){bS.setAttribute("ws-on",J.concat(" ",M.filter(function(bT){return bQ.Contains(M.get(J.SplitChars(bT,[":"],1),1));},J.SplitChars(bS.getAttribute("ws-on"),[" "],1))));});_7.IterSelector(bP,"[ws-attr-holes]",function(bS){var bT,bU,bV,bW,bX;bT=J.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=M.get(bT,bU);bS.setAttribute(bW,(bX=new a.RegExp(X.TextHoleRE(),"g"),bS.getAttribute(bW).replace(bX,function(bY,bZ){return bQ.Contains(bZ)?bY:"";})));}});};br.fillInstanceAttrs=function(bP,bQ){var bR,bS,bT,bU,bV;br.convertAttrs(bQ);bR=bQ.nodeName.toLowerCase();bS=bP.querySelector("[ws-attr="+bR+"]");if(o.Equals(bS,null))bK.warn("Filling non-existent attr hole",bR);else{bS.removeAttribute("ws-attr");for(bT=0,bU=bQ.attributes.length-1;bT<=bU;bT++){bV=bQ.attributes.item(bT);bV.name==="class"&&bS.hasAttribute("class")?bS.setAttribute("class",bS.getAttribute("class")+" "+bV.nodeValue):bS.setAttribute(bV.name,bV.nodeValue);}}};br.mapHoles=function(bP,bQ){function bR(bS){_7.IterSelector(bP,"["+bS+"]",function(bT){var bU,bV;bU=(bV=null,[bQ.TryGetValue(bT.getAttribute(bS).toLowerCase(),{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?bT.setAttribute(bS,bU[1]):void 0;});}bR("ws-hole");bR("ws-replace");bR("ws-attr");bR("ws-onafterrender");bR("ws-var");_7.IterSelector(bP,"[ws-on]",function(bS){bS.setAttribute("ws-on",J.concat(" ",M.map(function(bT){var bU,bV,bW;bU=J.SplitChars(bT,[":"],1);bV=(bW=null,[bQ.TryGetValue(M.get(bU,1),{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);return bV[0]?M.get(bU,0)+":"+bV[1]:bT;},J.SplitChars(bS.getAttribute("ws-on"),[" "],1))));});_7.IterSelector(bP,"[ws-attr-holes]",function(bS){var bT,bU,bV;bT=J.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++)(function(){var bW;function bX(bY,bZ){var b0;b0=h.KeyValue(bZ);return bY.replace(new a.RegExp("\\${"+b0[0]+"}","ig"),"${"+b0[1]+"}");}bW=M.get(bT,bU);return bS.setAttribute(bW,(((bM.Curried3(A.fold))(bX))(bS.getAttribute(bW)))(bQ));}());});};br.fill=function(bP,bQ,bR){while(true)if(bP.hasChildNodes())bR=bQ.insertBefore(bP.lastChild,bR);else return null;};br.convertAttrs=function(bP){var bR,bS,bT,bU,bV,bW,bX,bY;function bQ(bZ){var b0;b0=bP.getAttribute(bZ);b0===null?void 0:bP.setAttribute(bZ,b0.toLowerCase());}bR=bP.attributes;bS=[];bT=[];bU=[];for(bV=0,bW=bR.length-1;bV<=bW;bV++){bX=bR.item(bV);J.StartsWith(bX.nodeName,"ws-on")&&bX.nodeName!=="ws-onafterrender"&&bX.nodeName!=="ws-on"?(bS.push(bX.nodeName),bT.push(K.string(bX.nodeName,{$:1,$0:"ws-on".length},null)+":"+bX.nodeValue.toLowerCase())):!J.StartsWith(bX.nodeName,"ws-")&&(new a.RegExp(X.TextHoleRE())).test(bX.nodeValue)?(bX.nodeValue=(bY=new a.RegExp(X.TextHoleRE(),"g"),bX.nodeValue.replace(bY,function(bZ,b0){return"${"+b0.toLowerCase()+"}";})),bU.push(bX.nodeName)):void 0;}!(bT.length==0)?bP.setAttribute("ws-on",J.concat(" ",bT)):void 0;!(bU.length==0)?bP.setAttribute("ws-attr-holes",J.concat(" ",bU)):void 0;bQ("ws-hole");bQ("ws-replace");bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");M.iter(function(bZ){bP.removeAttribute(bZ);},bS);};A.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};bs=_9.KeyCollection=bM.Class({GetEnumerator$1:function(){return T.Get(A.map(function(bP){return bP.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},l,bs);bs.New=bM.Ctor(function(bP){l.New.call(this);this.d=bP;},bs);bu.New=function(bP,bQ){return{PreviousNodes:bP,Top:bQ};};bv.get_Empty=function(){return{$:0,$0:new bg.New$3()};};bv.FindAll=function(bP){var bQ;function bR(bT){if(bT!=null&&bT.$==0){bR(bT.$0);bR(bT.$1);}else if(bT!=null&&bT.$==1)bS(bT.$0);else if(bT!=null&&bT.$==2)bR(bT.$0.Current);else if(bT!=null&&bT.$==6)M.iter(bS,bT.$0.Holes);}function bS(bT){bQ.push(bT);bR(bT.Children);}bQ=[];bR(bP);return{$:0,$0:new bg.New$2(bQ)};};bv.Filter=function(bP,bQ){return{$:0,$0:bD.Filter(bP,bQ.$0)};};bv.Except=function(bP,bQ){return{$:0,$0:bD.Except(bP.$0,bQ.$0)};};bv.ToArray=function(bP){return bD.ToArray(bP.$0);};bv.Intersect=function(bP,bQ){return{$:0,$0:bD.Intersect(bP.$0,bQ.$0)};};bw.UseAnimations=function(){bA.$cctor();return bA.UseAnimations;};bw.Actions=function(bP){return bw.ConcatActions(M.choose(function(bQ){return bQ.$==1?{$:1,$0:bQ.$0}:null;},bB.ToArray(bP.$0)));};bw.Finalize=function(bP){M.iter(function(bQ){if(bQ.$==0)bQ.$0();},bB.ToArray(bP.$0));};bw.ConcatActions=function(bP){var bQ,bR,bS,bT;bQ=V.ofSeqNonCopying(bP);bR=M.length(bQ);return bR===0?bw.Const():bR===1?M.get(bQ,0):(bS=A.max(A.map(function(bU){return bU.Duration;},bQ)),(bT=M.map(function(bU){return bw.Prolong(bS,bU);},bQ),bw.Def(bS,function(bU){M.iter(function(bV){bV.Compute(bU);},bT);})));};bw.List=function(bP){return bP.$0;};bw.Const=function(bP){return bw.Def(0,function(){return bP;});};bw.Def=function(bP,bQ){return{Compute:bQ,Duration:bP};};bw.Prolong=function(bP,bQ){var bR,bS,bT;bR=bQ.Compute;bS=bQ.Duration;bT=bG.Create(function(){return bQ.Compute(bQ.Duration);});return{Compute:function(bU){return bU>=bS?bT.f():bR(bU);},Duration:bP};};bx.$cctor=function(){bx.$cctor=a.ignore;bx.BatchUpdatesEnabled=true;};by.Clear=function(bP){bP.splice(0,M.length(bP));};bz.$cctor=function(){bz.$cctor=a.ignore;bz.EmptyAttr=null;};bA.$cctor=function(){bA.$cctor=a.ignore;bA.CubicInOut=bC.Custom(function(bP){var bQ;bQ=bP*bP;return 3*bQ-2*(bQ*bP);});bA.UseAnimations=true;};bB.Append=function(bP,bQ){return bP.$==0?bQ:bQ.$==0?bP:{$:2,$0:bP,$1:bQ};};bB.ToArray=function(bP){var bQ;function bR(bS){if(bS.$==1)bQ.push(bS.$0);else if(bS.$==2){bR(bS.$0);bR(bS.$1);}else if(bS.$==3)M.iter(function(bT){bQ.push(bT);},bS.$0);}bQ=[];bR(bP);return bQ.slice(0);};bB.Concat=function(bP){var bQ;bQ=V.ofSeqNonCopying(bP);return V.TreeReduce(bB.Empty(),bB.Append,bQ);};bB.Empty=function(){bH.$cctor();return bH.Empty;};bC=m.Easing=bM.Class({},l,bC);bC.Custom=function(bP){return new bC.New(bP);};bC.New=bM.Ctor(function(bP){l.New.call(this);this.transformTime=bP;},bC);bD.Filter=function(bP,bQ){return new bg.New$2(M.filter(bP,bD.ToArray(bQ)));};bD.Except=function(bP,bQ){var bR;bR=new bg.New$2(bD.ToArray(bQ));bR.ExceptWith(bD.ToArray(bP));return bR;};bD.ToArray=function(bP){var bQ;bQ=M.create(bP.get_Count(),void 0);bP.CopyTo(bQ);return bQ;};bD.Intersect=function(bP,bQ){var bR;bR=new bg.New$2(bD.ToArray(bP));bR.IntersectWith(bD.ToArray(bQ));return bR;};bE.concat=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push.apply(bQ,bP[bS]);return bQ;};bF.Children=function(bP,bQ){var bR,bS,bT;if(bQ!=null&&bQ.$==1){bT=[];bR=bQ.$0[0].nextSibling;while(bR!==bQ.$0[1]){bT.push(bR);bR=bR.nextSibling;}return{$:0,$0:bT};}else return{$:0,$0:M.init(bP.childNodes.length,(bS=bP.childNodes,function(bU){return bS[bU];}))};};bF.Except=function(bP,bQ){var bR;bR=bP.$0;return{$:0,$0:M.filter(function(bS){return M.forall(function(bT){return!(bS===bT);},bR);},bQ.$0)};};bF.Iter=function(bP,bQ){M.iter(bP,bQ.$0);};bF.DocChildren=function(bP){var bQ;function bR(bS){if(bS!=null&&bS.$==2)bR(bS.$0.Current);else if(bS!=null&&bS.$==1)bQ.push(bS.$0.El);else if(bS==null);else if(bS!=null&&bS.$==5)bQ.push(bS.$0);else if(bS!=null&&bS.$==4)bQ.push(bS.$0.Text);else if(bS!=null&&bS.$==6)M.iter(function(bT){if(bT==null||bT.constructor===_0)bR(bT);else bQ.push(bT);},bS.$0.Els);else{bR(bS.$0);bR(bS.$1);}}bQ=[];bR(bP.Children);return{$:0,$0:V.ofSeqNonCopying(bQ)};};bG.Create=function(bP){return bJ.New(false,bP,bG.forceLazy);};bG.forceLazy=function(){var bP;bP=this.v();this.c=true;this.v=bP;this.f=bG.cachedLazy;return bP;};bG.cachedLazy=function(){return this.v;};bH.$cctor=function(){bH.$cctor=a.ignore;bH.Empty={$:0};};bJ.New=function(bP,bQ,bR){return{c:bP,v:bQ,f:bR};};bM.OnLoad(function(){d.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

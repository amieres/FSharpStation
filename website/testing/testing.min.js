function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.Serializer=c.Serializer||{};e=d.Model=d.Model||{};f=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};g=b.Library=b.Library||{};h=g.Snippet=g.Snippet||{};i=a.WebSharper=a.WebSharper||{};j=i.Numeric=i.Numeric||{};k=i.Obj=i.Obj||{};l=i.Collections=i.Collections||{};m=l.FSharpSet=l.FSharpSet||{};n=g.SnippetId=g.SnippetId||{};o=i.Operators=i.Operators||{};p=i.Seq=i.Seq||{};q=g.Serializer=g.Serializer||{};r=b.LibraryJS=b.LibraryJS||{};s=r.Serializer=r.Serializer||{};t=i.Utils=i.Utils||{};u=a.EventTarget;v=a.Node;w=i.JavaScript=i.JavaScript||{};x=w.JS=w.JS||{};y=g.Monads=g.Monads||{};z=y.Result=y.Result||{};A=z.Builder=z.Builder||{};B=y.FusionM=y.FusionM||{};C=B.Builder=B.Builder||{};D=C.Builder=C.Builder||{};E=g.String=g.String||{};F=i.Strings=i.Strings||{};G=i.Slice=i.Slice||{};H=g.ParseO=g.ParseO||{};I=i.Unchecked=i.Unchecked||{};J=a.System=a.System||{};K=J.Guid=J.Guid||{};L=q.JsonIntermediate=q.JsonIntermediate||{};M=i.ClientSideJson=i.ClientSideJson||{};N=M.Provider=M.Provider||{};O=g.SnippetModule=g.SnippetModule||{};P=i.Arrays=i.Arrays||{};Q=i.List=i.List||{};R=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};S=l.BalancedTree=l.BalancedTree||{};T=S.Tree=S.Tree||{};U=w.Pervasives=w.Pervasives||{};V=i.Enumerator=i.Enumerator||{};W=V.T=V.T||{};X=i.UI=i.UI||{};Y=X.Doc=X.Doc||{};Z=X.Client=X.Client||{};_0=Z.Templates=Z.Templates||{};_1=a.WindowOrWorkerGlobalScope;_2=i.DateUtil=i.DateUtil||{};_3=Q.T=Q.T||{};_4=a.Object;_5=X.View=X.View||{};_6=X.DomUtility=X.DomUtility||{};_7=l.Dictionary=l.Dictionary||{};_8=X.Docs=X.Docs||{};_9=X.AttrProxy=X.AttrProxy||{};_=X.Snap=X.Snap||{};$=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};ba=l.HashSet=l.HashSet||{};bb=X.An=X.An||{};bc=Z.Settings=Z.Settings||{};bd=X.Abbrev=X.Abbrev||{};be=bd.Mailbox=bd.Mailbox||{};bf=a.Error;bg=i.FormatException=i.FormatException||{};bh=X.Elt=X.Elt||{};bi=X.Array=X.Array||{};bj=X.DocElemNode=X.DocElemNode||{};bk=a.CharacterData;bl=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bm=l.DictionaryUtil=l.DictionaryUtil||{};bn=_0.Prepare=_0.Prepare||{};bo=l.KeyCollection=l.KeyCollection||{};bp=Z.Docs=Z.Docs||{};bq=bp.RunState=bp.RunState||{};br=bp.NodeSet=bp.NodeSet||{};bs=X.Anims=X.Anims||{};bt=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bu=X.Updates=X.Updates||{};bv=X.Attrs=X.Attrs||{};bw=Z.Attrs=Z.Attrs||{};bx=bw.Dyn=bw.Dyn||{};by=bd.Fresh=bd.Fresh||{};bz=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bA=i.Concurrency=i.Concurrency||{};bB=X.AppendList=X.AppendList||{};bC=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bD=X.Easing=X.Easing||{};bE=bA.AsyncBody=bA.AsyncBody||{};bF=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bG=bA.CT=bA.CT||{};bH=bd.HashSet=bd.HashSet||{};bI=l.HashSetUtil=l.HashSetUtil||{};bJ=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bK=bA.Scheduler=bA.Scheduler||{};bL=i.CancellationTokenSource=i.CancellationTokenSource||{};bM=bp.DomNodes=bp.DomNodes||{};bN=i.OperationCanceledException=i.OperationCanceledException||{};bO=i.Lazy=i.Lazy||{};bP=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bQ=i.LazyExtensionsProxy=i.LazyExtensionsProxy||{};bR=bQ.LazyRecord=bQ.LazyRecord||{};bS=i.Queue=i.Queue||{};bT=a.console;bU=a.IntelliFactory;bV=bU&&bU.Runtime;bW=a.JSON;bX=a.Math;bY=a.jQuery;bZ=a.Date;d.snippet0=function(){f.$cctor();return f.snippet0;};d.snippet1=function(){f.$cctor();return f.snippet1;};d.snippet2=function(){f.$cctor();return f.snippet2;};d.snps=function(){f.$cctor();return f.snps;};d.serSnippetId=function(){f.$cctor();return f.serSnippetId;};d.serSnippet=function(){f.$cctor();return f.serSnippet;};d.getModel=function(b0,b1,b2){return e.New(P.ofSeq(b0),b1,b2);};d.serModel=function(){f.$cctor();return f.serModel;};d.model=function(){f.$cctor();return f.model;};d.roundTrip=function(b0,b1,b2,b3){var b4,b5;b4=[b1,b2];b5=q.serialize(b4[0],b4[1],b3);return(b0(b4))(b5);};d.json=function(){var b0;b0=d.model();return q.serialize((d.serModel())[0],(d.serModel())[1],b0);};d.jsonBad=function(){return F.Replace(d.json(),"snpGeneration","snpGenerationX");};d.ofJsonDefs=function(){var b0;b0=d.jsonBad();return(s.deserializeWithDefs((d.serModel())[0],(d.serModel())[1]))(b0);};d.ofJsonFail=function(){var b0;b0=d.jsonBad();return(s.deserializeWithFail((d.serModel())[0],(d.serModel())[1]))(b0);};d.dupOptFloatOptString1=function(){f.$cctor();return f.dupOptFloatOptString1;};d.dupFloatOptString2=function(){f.$cctor();return f.dupFloatOptString2;};d.testCases=function(){f.$cctor();return f.testCases;};d.main=function(){var b0,b1,b2;function b3(b4,b5){var b6;try{b6={$:0,$0:b5()};}catch(b7){b6=((function(b8){return function(b9){return b8(t.prettyPrint(b9));};}(function(b8){bT.log(b8);}))(b7),g.Error(b7));}return[b4,b6];}b0=p.map(function(b4){return b3(b4[0],b4[1]);},d.testCases());b1=Y.Element("div",[],[Y.Element("h3",[],[Y.TextNode("Test Cases")]),Y.Element("h4",[],[Y.TextNode((((bV.Curried3(function(b4,b5,b6){return b4("Passed: "+a.String(b5)+"/"+a.String(b6));}))(a.id))(p.sumBy(function(b4){var b5;b5=b4[1];return b5.$==0?b5.$0?1:0:0;},b0)))(p.length(b0)))]),Y.Element("ol",[],Q.ofSeq(p.delay(function(){function b4(b5,b6){return Y.Element("li",[],[Y.Element("span",[],[Y.TextNode(b5),Y.TextNode(": "),Y.TextNode(b6.$==1?b6.$0.message:a.String(b6.$0))])]);}return p.map(function(b5){return b4(b5[0],b5[1]);},b0);})))]);b2=self.document.body;_0.LoadLocalTemplates("");Y.Run(b2,b1);};e.New=function(b0,b1,b2){return{snippets:b0,generation:b1,collapsed:b2};};f.$cctor=function(){var b1,b5,b6,b7,b8,b9,b_,b$,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB;f.$cctor=a.ignore;f.rtn=function(cC){return[cC];};f.result=new A.New();f.result$1=z.result();f.fusion=new D.New();function b0(cC){return F.concat("\n",cC);}f.unindentStr=function(cC){return b0(E.unindent(cC));};function b2(cC){return E.splitByChar("\n",cC);}function b3(cC){var cD,cE;return G.array(cC,{$:1,$0:0},{$:1,$0:(cD=0,(cE=P.length(cC)-2,I.Compare(cD,cE)===1?cD:cE))});}function b4(cC){return F.concat("\n",cC);}f.skipLastLine=(b1=function(cC){return b3(b2(cC));},function(cC){return b4(b1(cC));});f.parseDateO=H.tryParseWith(function(cC){var cD,cE;cD=0;return[(cE=_2.TryParse(cC),cE!=null&&cE.$==1&&(cD=cE.$0,true)),cD];});f.parseIntO=H.tryParseWith(function(cC){var cD;cD=0;return[j.TryParseInt32(cC,{get:function(){return cD;},set:function(cE){cD=cE;}}),cD];});f.parseSingleO=H.tryParseWith(function(cC){var cD,cE;cD=0;return[(cE=a.Number(cC),a.isNaN(cE)?false:(cD=cE,true)),cD];});f.parseDoubleO=H.tryParseWith(function(cC){var cD,cE;cD=0;return[(cE=a.Number(cC),a.isNaN(cE)?false:(cD=cE,true)),cD];});f.parseGuidO=H.tryParseWith(function(cC){var cD;cD=null;return[K.TryParse(cC,{get:function(){return cD;},set:function(cE){cD=cE;}}),cD];});f["|Date|_|"]=H.parseDateO();f["|Int|_|"]=H.parseIntO();f["|Single|_|"]=H.parseSingleO();f["|Double|_|"]=H.parseDoubleO();f["|Guid|_|"]=H.parseGuidO();f.serFloat=[function(cC){return(function(cD){return function(cE){return cD(t.prettyPrint(cE));};}(a.id))(cC);},function(cC){return cC.tryFloat();}];f.serInt=[function(cC){return(function(cD){return function(cE){return cD(t.prettyPrint(cE));};}(a.id))(cC);},function(cC){return cC.tryInt();}];f.serString=[function(cC){return bW.stringify(((N.Id())())(cC));},function(cC){return cC.tryString();}];f.serBool=[function(cC){return(function(cD){return function(cE){return cD(t.prettyPrint(cE));};}(a.id))(cC);},function(cC){return cC.tryBool();}];b6=(b5=1,[function(){b5=b5+1;return b5;},function(cC){b5=cC;}]);f.setGeneration=b6[1];f.getNextGeneration=b6[0];f.defaultSnippet=h.New(new n({$:0,$0:"00000000-0000-0000-0000-000000000000"}),"","",null,new m.New$1(null),[],0);f.tieFighter="|"+"-"+"|";f.snippet0=(b7=O.New("test0","module Hello =",null),h.New(new n({$:0,$0:K.Parse("10000000-0000-0000-0000-000000000001")}),b7.snpName,b7.snpContent,b7.snpParentIdO,b7.snpPredIds,b7.snpProperties,b7.snpGeneration));f.snippet1=(b8=O.New("test1","let hello world = sprintf \"Hello, %s!\" ",{$:1,$0:d.snippet0().snpId}),h.New(new n({$:0,$0:K.Parse("20000000-0000-0000-0000-000000000002")}),b8.snpName,b8.snpContent,b8.snpParentIdO,b8.snpPredIds,b8.snpProperties,b8.snpGeneration));f.snippet2=(b9=O.New("test2","Hello.hello \"World\" ",null),h.New(new n({$:0,$0:K.Parse("30000000-0000-0000-0000-000000000003")}),b9.snpName,b9.snpContent,b9.snpParentIdO,new m.New(Q.ofArray([d.snippet1().snpId])),b9.snpProperties,b9.snpGeneration));f.snps=Q.ofArray([d.snippet0(),d.snippet1(),d.snippet2()]);function ca(cC){return cC.$0;}function cb(cC){return new n({$:0,$0:cC});}f.serSnippetId=(b_=P.head(F.SplitChars((function(cC){return function(cD){return cC(R.p(cD));};}(a.id))(cb("00000000-0000-0000-0000-000000000000")),[" "],0)),(b$=(function(cC){return function(cD){return cC(t.prettyPrint(cD));};}(a.id))(b_),[function(cC){var cD;cD=a.String(ca(cC));return(((bV.Curried3(function(cE,cF,cG){return cE("{"+F.PadLeft(t.toSafe(cF),10)+" :"+t.prettyPrint(cG)+"}");}))(a.id))(b$))(cD);},function(cC){var cD,cE,cF,cG;cD=(cE=(cF=cC.tryField(b_),cF==null?null:cF.$0.tryString()),(cG=H.parseGuidO(),cE==null?null:cG(cE.$0)));return cD==null?null:{$:1,$0:cb(cD.$0)};}]));f.serSnippet=(cc=[(cd=d.serSnippetId(),q.serField("snpId",function(cC){return cC.snpId;},function(cC,cD){return h.New(cC,cD.snpName,cD.snpContent,cD.snpParentIdO,cD.snpPredIds,cD.snpProperties,cD.snpGeneration);},cd[0],cd[1])),(ce=q.serString(),q.serField("snpName",function(cC){return cC.snpName;},function(cC,cD){return h.New(cD.snpId,cC,cD.snpContent,cD.snpParentIdO,cD.snpPredIds,cD.snpProperties,cD.snpGeneration);},ce[0],ce[1])),(cf=q.serString(),q.serField("snpContent",function(cC){return cC.snpContent;},function(cC,cD){return h.New(cD.snpId,cD.snpName,cC,cD.snpParentIdO,cD.snpPredIds,cD.snpProperties,cD.snpGeneration);},cf[0],cf[1])),(cg=(ch=d.serSnippetId(),q.serOpt(ch[0],ch[1])),q.serField("snpParentIdO",function(cC){return cC.snpParentIdO;},function(cC,cD){return h.New(cD.snpId,cD.snpName,cD.snpContent,cC,cD.snpPredIds,cD.snpProperties,cD.snpGeneration);},cg[0],cg[1])),(ci=(cj=d.serSnippetId(),q.serSet(cj[0],cj[1])),q.serField("snpPredIds",function(cC){return cC.snpPredIds;},function(cC,cD){return h.New(cD.snpId,cD.snpName,cD.snpContent,cD.snpParentIdO,cC,cD.snpProperties,cD.snpGeneration);},ci[0],ci[1])),(ck=(cl=q.serDup(q.serString(),q.serString()),q.serArr(cl[0],cl[1])),q.serField("snpProperties",function(cC){return cC.snpProperties;},function(cC,cD){return h.New(cD.snpId,cD.snpName,cD.snpContent,cD.snpParentIdO,cD.snpPredIds,cC,cD.snpGeneration);},ck[0],ck[1])),(cm=q.serInt(),q.serField("snpGeneration",function(cC){return cC.snpGeneration;},function(cC,cD){return h.New(cD.snpId,cD.snpName,cD.snpContent,cD.snpParentIdO,cD.snpPredIds,cD.snpProperties,cC);},cm[0],cm[1]))],(cn=(co=O.New("","",null),h.New(co.snpId,co.snpName,co.snpContent,co.snpParentIdO,co.snpPredIds,co.snpProperties,-1)),[function(cC){var cD;function cE(cF,cG,cH){return(((bV.Curried3(function(cI,cJ,cK){return cI(t.prettyPrint(cJ)+": "+t.toSafe(cK));}))(a.id))(cF))(cG(cC));}cD=F.concat(", ",p.map(function(cF){return cE(cF[0],cF[1],cF[2]);},cc));return(function(cF){return function(cG){return cF("{"+t.toSafe(cG)+"}");};}(a.id))(cD);},function(cC){return{$:1,$0:p.fold(function(cD,cE){var cF,cG,cH;cF=(cG=cC.tryField(cE[0]),(cH=cE[2](cD),cG==null?null:cH(cG.$0)));return cF==null?cD:cF.$0;},cn,cc)};}]));f.serModel=(cp=[(cq=(cr=d.serSnippet(),q.serArr(cr[0],cr[1])),q.serField("snippets",function(cC){return cC.snippets;},function(cC,cD){return e.New(cC,cD.generation,cD.collapsed);},cq[0],cq[1])),(cs=q.serInt(),q.serField("generation",function(cC){return cC.generation;},function(cC,cD){return e.New(cD.snippets,cC,cD.collapsed);},cs[0],cs[1])),(ct=(cu=d.serSnippetId(),q.serSet(cu[0],cu[1])),q.serField("collapsed",function(cC){return cC.collapsed;},function(cC,cD){return e.New(cD.snippets,cD.generation,cC);},ct[0],ct[1]))],(cv=e.New([],0,new m.New$1(null)),[function(cC){var cD;function cE(cF,cG,cH){return(((bV.Curried3(function(cI,cJ,cK){return cI(t.prettyPrint(cJ)+": "+t.toSafe(cK));}))(a.id))(cF))(cG(cC));}cD=F.concat(", ",p.map(function(cF){return cE(cF[0],cF[1],cF[2]);},cp));return(function(cF){return function(cG){return cF("{"+t.toSafe(cG)+"}");};}(a.id))(cD);},function(cC){return{$:1,$0:p.fold(function(cD,cE){var cF,cG,cH;cF=(cG=cC.tryField(cE[0]),(cH=cE[2](cD),cG==null?null:cH(cG.$0)));return cF==null?cD:cF.$0;},cv,cp)};}]));f.model=d.getModel(d.snps(),33,new m.New(Q.ofArray([d.snippet1().snpId,d.snippet2().snpId])));f.dupOptFloatOptString1=(cw=q.serDup(q.serOpt((q.serFloat())[0],(q.serFloat())[1]),q.serOpt((q.serString())[0],(q.serString())[1])),(cx=cw[0],(cy=cw[1],function(cC){return d.roundTrip(function(cD){return s.tryDeserialize(cD[0],cD[1]);},cx,cy,cC);})));f.dupFloatOptString2=(cz=q.serDup(q.serInt(),q.serOpt((q.serString())[0],(q.serString())[1])),(cA=cz[0],(cB=cz[1],function(cC){return d.roundTrip(function(cD){return s.deserializeWithDefs(cD[0],cD[1]);},cA,cB,cC);})));f.testCases=Q.ofArray([["roundTripTry",function(){return I.Equals(d.roundTrip(function(cC){return s.tryDeserialize(cC[0],cC[1]);},(d.serModel())[0],(d.serModel())[1],d.model()),{$:1,$0:d.model()});}],["roundTripDefs",function(){return I.Equals(d.roundTrip(function(cC){return s.deserializeWithDefs(cC[0],cC[1]);},(d.serModel())[0],(d.serModel())[1],d.model()),{$:1,$0:d.model()});}],["roundTripFail",function(){return I.Equals(d.roundTrip(function(cC){return s.deserializeWithFail(cC[0],cC[1]);},(d.serModel())[0],(d.serModel())[1],d.model()),{$:1,$0:d.model()});}],["(float opt, str opt)1",function(){return I.Equals((d.dupOptFloatOptString1())([{$:1,$0:67.4},null]),{$:1,$0:[{$:1,$0:67.4},null]});}],["(int      , str opt)2",function(){return I.Equals((d.dupFloatOptString2())([67,{$:1,$0:"67"}]),{$:1,$0:[67,{$:1,$0:"67"}]});}],["jsonAndBackDefs",function(){return I.Equals(d.ofJsonDefs(),{$:1,$0:e.New(P.map(function(cC){return h.New(cC.snpId,cC.snpName,cC.snpContent,cC.snpParentIdO,cC.snpPredIds,cC.snpProperties,-1);},d.model().snippets),d.model().generation,d.model().collapsed)});}],["jsonAndBackFail",function(){function cC(cD){}try{(function(cD){return cC(d.ofJsonFail(cD));}());return false;}catch(cD){return true;}}]]);};h.New=function(b0,b1,b2,b3,b4,b5,b6){return{snpId:b0,snpName:b1,snpContent:b2,snpParentIdO:b3,snpPredIds:b4,snpProperties:b5,snpGeneration:b6};};j.TryParseInt32=function(b0,b1){return j.TryParse(b0,-2147483648,2147483647,b1);};k=i.Obj=bV.Class({Equals:function(b0){return this===b0;},GetHashCode:function(){return -1;}},null,k);k.New=bV.Ctor(function(){},k);m=l.FSharpSet=bV.Class({Equals:function(b0){return this.get_Count()===b0.get_Count()&&p.forall2(I.Equals,this,b0);},get_Count:function(){var b0;b0=this.tree;return b0==null?0:b0.Count;},GetEnumerator$1:function(){return V.Get(S.Enumerate(false,this.tree));},GetHashCode:function(){return -1741749453+I.Hash(P.ofSeq(this));},CompareTo0:function(b0){return p.compareWith(I.Compare,this,b0);},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},k,m);m.New=bV.Ctor(function(b0){m.New$1.call(this,S.OfSeq(b0));},m);m.New$1=bV.Ctor(function(b0){k.New.call(this);this.tree=b0;},m);n=g.SnippetId=bV.Class({},null,n);o.FailWith=function(b0){throw new bf(b0);};o.KeyValue=function(b0){return[b0.K,b0.V];};p.map=function(b0,b1){return{GetEnumerator:function(){var b2;b2=V.Get(b1);return new W.New(null,null,function(b3){return b2.MoveNext()&&(b3.c=b0(b2.Current()),true);},function(){b2.Dispose();});}};};p.sumBy=function(b0,b1){return p.fold(function(b2,b3){return b2+b0(b3);},0,b1);};p.length=function(b0){var b1,b2;b1=0;b2=V.Get(b0);try{while(b2.MoveNext())b1=b1+1;return b1;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};p.delay=function(b0){return{GetEnumerator:function(){return V.Get(b0());}};};p.fold=function(b0,b1,b2){var b3,b4;b3=b1;b4=V.Get(b2);try{while(b4.MoveNext())b3=b0(b3,b4.Current());return b3;}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};p.tryFind=function(b0,b1){var b2,b3,b4;b2=V.Get(b1);try{b3=null;while(b3==null&&b2.MoveNext()){b4=b2.Current();b0(b4)?b3={$:1,$0:b4}:void 0;}return b3;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};p.tryFindIndex=function(b0,b1){var b2,b3,b4;b2=V.Get(b1);try{b3=true;b4=0;while(b3&&b2.MoveNext())if(b0(b2.Current()))b3=false;else b4=b4+1;return b3?null:{$:1,$0:b4};}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};p.filter=function(b0,b1){return{GetEnumerator:function(){var b2;b2=V.Get(b1);return new W.New(null,null,function(b3){var b4,b5,b6;b4=b2.MoveNext();b5=b2.Current();b6=false;while(b4)if(b0(b5)){b3.c=b5;b6=true;b4=false;}else if(b2.MoveNext())b5=b2.Current();else b4=false;return b6;},function(){b2.Dispose();});}};};p.distinct=function(b0){return p.distinctBy(a.id,b0);};p.head=function(b0){var b1;b1=V.Get(b0);try{return b1.MoveNext()?b1.Current():p.insufficient();}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}};p.distinctBy=function(b0,b1){return{GetEnumerator:function(){var b2,b3;b2=V.Get(b1);b3=new ba.New$3();return new W.New(null,null,function(b4){var b5,b6;if(b2.MoveNext()){b5=b2.Current();b6=b3.Add(b0(b5));while(!b6&&b2.MoveNext()){b5=b2.Current();b6=b3.Add(b0(b5));}return b6&&(b4.c=b5,true);}else return false;},function(){b2.Dispose();});}};};p.compareWith=function(b0,b1,b2){var b3,b4,b5,b6,b7;b3=V.Get(b1);try{b5=V.Get(b2);try{b6=0;b7=true;while(b7&&b6===0)if(b3.MoveNext())b6=b5.MoveNext()?b0(b3.Current(),b5.Current()):1;else if(b5.MoveNext())b6=-1;else b7=false;b4=b6;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}return b4;}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}};p.forall2=function(b0,b1,b2){return!p.exists2(function(b3,b4){return!b0(b3,b4);},b1,b2);};p.exists2=function(b0,b1,b2){var b3,b4,b5,b6;b3=V.Get(b1);try{b5=V.Get(b2);try{b6=false;while(!b6&&b3.MoveNext()&&b5.MoveNext())b6=b0(b3.Current(),b5.Current());b4=b6;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}return b4;}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}};p.iter=function(b0,b1){var b2;b2=V.Get(b1);try{while(b2.MoveNext())b0(b2.Current());}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}};p.max=function(b0){var b1,b2,b3;b1=V.Get(b0);try{if(!b1.MoveNext())p.seqEmpty();b2=b1.Current();while(b1.MoveNext()){b3=b1.Current();I.Compare(b3,b2)===1?b2=b3:void 0;}return b2;}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}};p.seqEmpty=function(){return o.FailWith("The input sequence was empty.");};p.unfold=function(b0,b1){return{GetEnumerator:function(){return new W.New(b1,null,function(b2){var b3;b3=b0(b2.s);return b3==null?false:(b2.c=b3.$0[0],b2.s=b3.$0[1],true);},void 0);}};};q.serialize=function(b0,b1,b2){return[b0,b1][0](b2);};q.serField=function(b0,b1,b2,b3,b4){return[b0,function(b5){return b3(b1(b5));},function(b5){return function(b6){var b7;b7=b4(b6);return b7==null?null:{$:1,$0:b2(b7.$0,b5)};};}];};q.serString=function(){f.$cctor();return f.serString;};q.serOpt=function(b0,b1){var b2,b3,b4;function b5(b6){return b6==null?"null":b6.$0;}b2=[b0,b1];return[(b3=(b4=b2[0],function(b6){return b6==null?null:{$:1,$0:b4(b6.$0)};}),function(b6){return b5(b3(b6));}),function(b6){return{$:1,$0:b6.isNull()?null:b2[1](b6)};}];};q.serSet=function(b0,b1){var b2,b3,b4;b2=[b0,b1];return[(b3=(b4=b2[0],function(b5){return new m.New$1(S.OfSeq(p.map(b4,b5)));}),function(b5){return q.sprintA(b3(b5));}),function(b5){var b6,b7,b8,b9;b6=(b7=b5.tryArray(),(b8=(b9=b2[1],function(b_){return P.choose(b9,b_);}),b7==null?null:{$:1,$0:b8(b7.$0)}));return b6==null?null:{$:1,$0:new m.New(b6.$0)};}];};q.serDup=function(b0,b1){return[function(b2){return(((bV.Curried3(function(b3,b4,b5){return b3("["+t.toSafe(b4)+", "+t.toSafe(b5)+"]");}))(a.id))(b0[0](b2[0])))(b1[0](b2[1]));},function(b2){var b3,b4,b5,b6,b7,b8;b3=b2.tryArray();return b3!=null&&b3.$==1&&((b5=b3.$0,!I.Equals(b5,null)&&b5.length===2)&&(b4=[P.get(b3.$0,0),P.get(b3.$0,1)],true))?(b6=b0[1](b4[0]),(b7=b1[1](b4[1]),b6!=null&&b6.$==1&&(b7!=null&&b7.$==1&&(b8=[b6.$0,b7.$0],true))?{$:1,$0:[b8[0],b8[1]]}:null)):null;}];};q.serArr=function(b0,b1){var b2,b3,b4;b2=[b0,b1];return[(b3=(b4=b2[0],function(b5){return P.map(b4,b5);}),function(b5){return q.sprintA(b3(b5));}),function(b5){var b6,b7,b8;b6=b5.tryArray();b7=(b8=b2[1],function(b9){return P.choose(b8,b9);});return b6==null?null:{$:1,$0:b7(b6.$0)};}];};q.serInt=function(){f.$cctor();return f.serInt;};q.serFloat=function(){f.$cctor();return f.serFloat;};q.sprintA=function(b0){var b1;b1=F.concat(", ",b0);return(function(b2){return function(b3){return b2("["+t.toSafe(b3)+"]");};}(a.id))(b1);};s.deserializeWithDefs=function(b0,b1){function b2(b3,b4){return null;}return s.deserialize(function(){return{$:1,$0:0};},function(){return{$:1,$0:0};},function(){return{$:1,$0:""};},function(){return{$:1,$0:false};},function(){return{$:1,$0:[]};},function(b3){return function(b4){return b2(b3,b4);};},b0,b1);};s.deserializeWithFail=function(b0,b1){function b2(b3,b4){return(function(b5){return function(b6){return b5("field not found: "+t.toSafe(b6));};}(o.FailWith))(b4);}return s.deserialize(function(){return o.FailWith("Error expecting float");},function(){return o.FailWith("Error expecting int");},function(){return o.FailWith("Error expecting string");},function(){return o.FailWith("Error expecting bool");},function(){return o.FailWith("Error expecting array");},function(b3){return function(b4){return b2(b3,b4);};},b0,b1);};s.tryDeserialize=function(b0,b1){function b2(b3,b4){return null;}return s.deserialize(function(){return null;},function(){return null;},function(){return null;},function(){return null;},function(){return null;},function(b3){return function(b4){return b2(b3,b4);};},b0,b1);};s.deserialize=function(b0,b1,b2,b3,b4,b5,b6,b7){var b8,b9;function b_(ca){return bW.parse(ca);}function b$(ca){return s.getJsonIntermediate(b0,b1,b2,b3,b4,b5,ca);}b8=function(ca){return b$(b_(ca));};b9=[b6,b7][1];return function(ca){return b9(b8(ca));};};s.getJsonIntermediate=function(b0,b1,b2,b3,b4,b5,b6){function b7(b8){return s.getJsonIntermediate(b0,b1,b2,b3,b4,b5,b8);}return L.New(function(){var b8;b8=!b6?null:typeof b6=="number"?{$:1,$0:b6}:null;return b8==null?b0():b8;},function(){var b8;b8=!b6?null:typeof b6=="number"?{$:1,$0:b6}:null;return b8==null?b1():b8;},function(){var b8;b8=!b6?null:typeof b6=="string"?{$:1,$0:b6}:null;return b8==null?b2():b8;},function(){var b8;b8=!b6?null:typeof b6=="boolean"?{$:1,$0:b6}:null;return b8==null?b3():b8;},function(){var b8;b8=!b6?null:b6 instanceof a.Array?{$:1,$0:P.map(b7,b6)}:null;return b8==null?b4(b7):b8;},function(b8){var b9,b_;b9=!b6?null:(b_=b6[b8],I.Equals(b_,null)?{$:1,$0:b7(null)}:!b_?null:{$:1,$0:b7(b_)});return b9==null?(b5(b7))(b8):b9;},function(){return I.Equals(typeof b6,"object")&&!I.Equals(b6,null);},function(){return I.Equals(b6,null);});};t.prettyPrint=function(b0){var b1,b2;function b3(b4,b5){return b4+" = "+t.prettyPrint(b5);}return b0===null?"null":(b1=typeof b0,b1=="string"?"\""+b0+"\"":b1=="object"?b0 instanceof a.Array?"[|"+F.concat("; ",P.map(t.prettyPrint,b0))+"|]":(b2=a.String(b0),b2==="[object Object]"?"{"+F.concat("; ",P.map(function(b4){return b3(b4[0],b4[1]);},x.GetFields(b0)))+"}":b2):a.String(b0));};t.toSafe=function(b0){return b0==null?"":b0;};g.Error=function(b0){return{$:1,$0:b0};};x.GetFields=function(b0){var b1,b2;b1=[];for(var b3 in b0)b1.push([b3,b0[b3]]);return b1;};x.GetFieldValues=function(b0){var b1,b2;b1=[];for(var b3 in b0)b1.push(b0[b3]);return b1;};A=z.Builder=bV.Class({},k,A);A.New=bV.Ctor(function(){k.New.call(this);},A);z.result=function(){f.$cctor();return f.result;};D=C.Builder=bV.Class({},k,D);D.New=bV.Ctor(function(){k.New.call(this);},D);E.unindent=function(b0){var b1,b2,b3,b4;b1=F.SplitChars(b0,["\n"],0);b2=(b3=p.tryFindIndex(function(b5){return" "!==b5;},(b4=p.tryFind(function(b5){return F.Trim(b5)!=="";},b1),b4==null?"":b4.$0)),b3==null?0:b3.$0);return p.filter(function(b5){return!F.StartsWith(b5,"# 1 ");},p.map(function(b5){return b5.length<=b2?"":b5.substring(b2);},b1));};E.splitByChar=function(b0,b1){return F.SplitChars(b1,[b0],0);};F.concat=function(b0,b1){return P.ofSeq(b1).join(b0);};F.Replace=function(b0,b1,b2){function b3(b4){var b5,b6,b7;b5=b4.indexOf(b1);return b5!==-1?(b6=F.ReplaceOnce(b4,b1,b2),(b7=b5+b2.length,F.Substring(b6,0,b5+b2.length)+b3(b6.substring(b7)))):b4;}return b3(b0);};F.PadLeft=function(b0,b1){return F.PadLeftWith(b0,b1," ");};F.ReplaceOnce=function(b0,b1,b2){return b0.replace(b1,b2);};F.SplitChars=function(b0,b1,b2){return F.Split(b0,new a.RegExp("["+F.RegexEscape(b1.join(""))+"]"),b2);};F.Trim=function(b0){return b0.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};F.StartsWith=function(b0,b1){return b0.substring(0,b1.length)==b1;};F.PadLeftWith=function(b0,b1,b2){return b1>b0.length?a.Array(b1-b0.length+1).join(b2)+b0:b0;};F.Substring=function(b0,b1,b2){return b0.substr(b1,b2);};F.Split=function(b0,b1,b2){return b2===1?P.filter(function(b3){return b3!=="";},F.SplitWith(b0,b1)):F.SplitWith(b0,b1);};F.RegexEscape=function(b0){return b0.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};F.SplitWith=function(b0,b1){return b0.split(b1);};G.array=function(b0,b1,b2){return b1==null?b2!=null&&b2.$==1?b0.slice(0,b2.$0+1):[]:b2==null?b0.slice(b1.$0):b0.slice(b1.$0,b2.$0+1);};G.string=function(b0,b1,b2){return b1==null?b2!=null&&b2.$==1?b0.slice(0,b2.$0+1):"":b2==null?b0.slice(b1.$0):b0.slice(b1.$0,b2.$0+1);};H.tryParseWith=function(b0){function b1(b2,b3){return b2?{$:1,$0:b3}:null;}return function(b2){return b1.apply(null,b0(b2));};};H.parseDateO=function(){f.$cctor();return f.parseDateO;};H.parseIntO=function(){f.$cctor();return f.parseIntO;};H.parseSingleO=function(){f.$cctor();return f.parseSingleO;};H.parseDoubleO=function(){f.$cctor();return f.parseDoubleO;};H.parseGuidO=function(){f.$cctor();return f.parseGuidO;};I.Equals=function(b0,b1){var b2,b3,b4,b5;if(b0===b1)return true;else{b2=typeof b0;if(b2=="object"){if(b0===null||b0===void 0||b1===null||b1===void 0)return false;else if("Equals"in b0)return b0.Equals(b1);else if(b0 instanceof a.Array&&b1 instanceof a.Array)return I.arrayEquals(b0,b1);else if(b0 instanceof a.Date&&b1 instanceof a.Date)return I.dateEquals(b0,b1);else{b3=[true];for(var b6 in b0)if(function(b7){b3[0]=!b0.hasOwnProperty(b7)||b1.hasOwnProperty(b7)&&I.Equals(b0[b7],b1[b7]);return!b3[0];}(b6))break;if(b3[0]){for(var b7 in b1)if(function(b8){b3[0]=!b1.hasOwnProperty(b8)||b0.hasOwnProperty(b8);return!b3[0];}(b7))break;}return b3[0];}}else return b2=="function"&&("$Func"in b0?b0.$Func===b1.$Func&&b0.$Target===b1.$Target:"$Invokes"in b0&&"$Invokes"in b1&&I.arrayEquals(b0.$Invokes,b1.$Invokes));}};I.Compare=function(b0,b1){var b2,b3,b4,b5,b6,b7;if(b0===b1)return 0;else{b3=typeof b0;switch(b3=="function"?1:b3=="boolean"?2:b3=="number"?2:b3=="string"?2:b3=="object"?3:0){case 0:return typeof b1=="undefined"?0:-1;case 1:return o.FailWith("Cannot compare function values.");case 2:return b0<b1?-1:1;case 3:if(b0===null)b4=-1;else if(b1===null)b4=1;else if("CompareTo"in b0)b4=b0.CompareTo(b1);else if("CompareTo0"in b0)b4=b0.CompareTo0(b1);else if(b0 instanceof a.Array&&b1 instanceof a.Array)b4=I.compareArrays(b0,b1);else if(b0 instanceof a.Date&&b1 instanceof a.Date)b4=I.compareDates(b0,b1);else{b5=[0];for(var b8 in b0)if(function(b9){return!b0.hasOwnProperty(b9)?false:!b1.hasOwnProperty(b9)?(b5[0]=1,true):(b5[0]=I.Compare(b0[b9],b1[b9]),b5[0]!==0);}(b8))break;if(b5[0]===0){for(var b9 in b1)if(function(b_){return!b1.hasOwnProperty(b_)?false:!b0.hasOwnProperty(b_)&&(b5[0]=-1,true);}(b9))break;}b4=b5[0];}return b4;}}};I.arrayEquals=function(b0,b1){var b2,b3;if(P.length(b0)===P.length(b1)){b2=true;b3=0;while(b2&&b3<P.length(b0)){!I.Equals(P.get(b0,b3),P.get(b1,b3))?b2=false:void 0;b3=b3+1;}return b2;}else return false;};I.dateEquals=function(b0,b1){return b0.getTime()===b1.getTime();};I.compareArrays=function(b0,b1){var b2,b3;if(P.length(b0)<P.length(b1))return -1;else if(P.length(b0)>P.length(b1))return 1;else{b2=0;b3=0;while(b2===0&&b3<P.length(b0)){b2=I.Compare(P.get(b0,b3),P.get(b1,b3));b3=b3+1;}return b2;}};I.compareDates=function(b0,b1){return I.Compare(b0.getTime(),b1.getTime());};I.Hash=function(b0){var b1;b1=typeof b0;return b1=="function"?0:b1=="boolean"?b0?1:0:b1=="number"?b0:b1=="string"?I.hashString(b0):b1=="object"?b0==null?0:b0 instanceof a.Array?I.hashArray(b0):I.hashObject(b0):0;};I.hashString=function(b0){var b1,b2,b3;if(b0===null)return 0;else{b1=5381;for(b2=0,b3=b0.length-1;b2<=b3;b2++)b1=I.hashMix(b1,b0[b2].charCodeAt());return b1;}};I.hashArray=function(b0){var b1,b2,b3;b1=-34948909;for(b2=0,b3=P.length(b0)-1;b2<=b3;b2++)b1=I.hashMix(b1,I.Hash(P.get(b0,b2)));return b1;};I.hashObject=function(b0){var b1,b2;if("GetHashCode"in b0)return b0.GetHashCode();else{b1=[0];for(var b3 in b0)if(function(b4){b1[0]=I.hashMix(I.hashMix(b1[0],I.hashString(b4)),I.Hash(b0[b4]));return false;}(b3))break;return b1[0];}};I.hashMix=function(b0,b1){return(b0<<5)+b0+b1;};K.TryParse=function(b0,b1){try{b1.set(K.Parse(b0));return true;}catch(b2){return false;}};K.Parse=function(b0){var b1,b2,b3;try{return K.ParseExact(b0,"D");}catch(b4){try{b1=K.ParseExact(b0,"B");}catch(b5){try{b2=K.ParseExact(b0,"P");}catch(b6){try{b3=K.ParseExact(b0,"N");}catch(b7){b3=K.ParseExact(b0,"X");}b2=b3;}b1=b2;}return b1;}};K.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b0){var b1,b2;b1=bX.random()*16|0;b2=b0=="x"?b1:b1&3|8;return b2.toString(16);});};K.ParseExact=function(b0,b1){var b2,b3,b4,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;function b5(ce){var cf,cg,ch,ci;for(cf=0,cg=35;cf<=cg;cf++){cf===8||(cf===13||(cf===18||cf===23))?ce[cf]!=="-"?K.ShapeError():void 0:(ci=ce[cf],!("0"<=ci&&ci<="9"||"a"<=ci&&ci<="f")?K.ShapeError():void 0);}return ce;}b6=b1.toUpperCase();if(b6==="N"){b7=F.Trim(b0).toLowerCase();if(b7.length!==32)K.ShapeError();for(b8=0,b9=31;b8<=b9;b8++){b_=b7[b8];!("0"<=b_&&b_<="9"||"a"<=b_&&b_<="f")?K.ShapeError():void 0;}return F.Substring(b7,0,8)+"-"+F.Substring(b7,8,4)+"-"+F.Substring(b7,12,4)+"-"+F.Substring(b7,16,4)+"-"+b7.substring(20);}else if(b6==="D"){b2=F.Trim(b0).toLowerCase();b2.length!==36?K.ShapeError():void 0;return b5(b2);}else if(b6==="B"){b3=F.Trim(b0).toLowerCase();b3.length!==38||b3[0]!=="{"||b3[17]!=="}"?K.ShapeError():void 0;return b5(F.Substring(b3,1,36));}else if(b6==="P"){b4=F.Trim(b0).toLowerCase();b4.length!==38||b4[0]!=="("||b4[17]!==")"?K.ShapeError():void 0;return b5(F.Substring(b4,1,36));}else if(b6==="X"){b$=F.Trim(b0).toLowerCase();if(b$.length!==68)K.ShapeError();for(ca=0,cb=67;ca<=cb;ca++){switch(ca){case 26:case 0:if(b$[ca]!=="{")K.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(b$[ca]!=="0")K.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(b$[ca]!=="x")K.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(b$[ca]!==",")K.ShapeError();break;case 67:case 66:if(b$[ca]!=="{")K.ShapeError();break;default:cd=b$[ca];!("0"<=cd&&cd<="9"||"a"<=cd&&cd<="f")?K.ShapeError():void 0;break;}}return F.Substring(b$,3,8)+"-"+F.Substring(b$,14,4)+"-"+F.Substring(b$,21,4)+"-"+F.Substring(b$,29,2)+F.Substring(b$,34,2)+"-"+F.Substring(b$,39,2)+F.Substring(b$,44,2)+F.Substring(b$,49,2)+F.Substring(b$,54,2)+F.Substring(b$,59,2)+F.Substring(b$,64,2);}else return K.FormatError();};K.ShapeError=function(){throw new bg.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};K.FormatError=function(){throw new bg.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};L.New=function(b0,b1,b2,b3,b4,b5,b6,b7){return{tryFloat:b0,tryInt:b1,tryString:b2,tryBool:b3,tryArray:b4,tryField:b5,isObject:b6,isNull:b7};};N.Id=bV.Curried3(function(b0,b1,b2){return b2;});O.New=function(b0,b1,b2){return h.New(new n({$:0,$0:K.NewGuid()}),b0,b1,b2,new m.New$1(null),[],(O.getNextGeneration())());};O.getNextGeneration=function(){f.$cctor();return f.getNextGeneration;};P.map=function(b0,b1){var b2,b3,b4;b2=new a.Array(b1.length);for(b3=0,b4=b1.length-1;b3<=b4;b3++)b2[b3]=b0(b1[b3]);return b2;};P.ofSeq=function(b0){var b1,b2;if(b0 instanceof a.Array)return b0.slice();else if(b0 instanceof _3)return P.ofList(b0);else{b1=[];b2=V.Get(b0);try{while(b2.MoveNext())b1.push(b2.Current());return b1;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}}};P.head=function(b0){P.nonEmpty(b0);return b0[0];};P.choose=function(b0,b1){var b2,b3,b4,b5;b2=[];for(b3=0,b4=b1.length-1;b3<=b4;b3++){b5=b0(b1[b3]);b5==null?void 0:b2.push(b5.$0);}return b2;};P.ofList=function(b0){var b1,b2;b2=[];b1=b0;while(!(b1.$==0)){b2.push(Q.head(b1));b1=Q.tail(b1);}return b2;};P.sortInPlace=function(b0){P.mapInPlace(function(b1){return b1[0];},P.mapiInPlace(function(b1,b2){return[b2,b1];},b0).sort(I.Compare));};P.nonEmpty=function(b0){if(b0.length===0)o.FailWith("The input array was empty.");};P.exists=function(b0,b1){var b2,b3,b4,b5;b2=false;b3=0;b5=P.length(b1);while(!b2&&b3<b5)if(b0(b1[b3]))b2=true;else b3=b3+1;return b2;};P.tryPick=function(b0,b1){var b2,b3,b4;b2=null;b3=0;while(b3<b1.length&&b2==null){b4=b0(b1[b3]);b4!=null&&b4.$==1?b2=b4:void 0;b3=b3+1;}return b2;};P.tryFindIndex=function(b0,b1){var b2,b3;b2=null;b3=0;while(b3<b1.length&&b2==null){b0(b1[b3])?b2={$:1,$0:b3}:void 0;b3=b3+1;}return b2;};P.foldBack=function(b0,b1,b2){var b3,b4,b5,b6,b7;b3=b2;b5=b1.length;for(b6=1,b7=b5;b6<=b7;b6++)b3=b0(b1[b5-b6],b3);return b3;};P.filter=function(b0,b1){var b2,b3,b4;b2=[];for(b3=0,b4=b1.length-1;b3<=b4;b3++)if(b0(b1[b3]))b2.push(b1[b3]);return b2;};P.iter=function(b0,b1){var b2,b3;for(b2=0,b3=b1.length-1;b2<=b3;b2++)b0(b1[b2]);};P.pick=function(b0,b1){var b2;b2=P.tryPick(b0,b1);return b2==null?o.FailWith("KeyNotFoundException"):b2.$0;};P.concat=function(b0){return a.Array.prototype.concat.apply([],P.ofSeq(b0));};P.create=function(b0,b1){var b2,b3,b4;b2=new a.Array(b0);for(b3=0,b4=b0-1;b3<=b4;b3++)b2[b3]=b1;return b2;};P.init=function(b0,b1){var b2,b3,b4;b0<0?o.FailWith("Negative size given."):null;b2=new a.Array(b0);for(b3=0,b4=b0-1;b3<=b4;b3++)b2[b3]=b1(b3);return b2;};P.forall=function(b0,b1){var b2,b3,b4,b5;b2=true;b3=0;b5=P.length(b1);while(b2&&b3<b5)if(b0(b1[b3]))b3=b3+1;else b2=false;return b2;};Q.ofArray=function(b0){var b1,b2,b3;b1=_3.Empty;for(b2=P.length(b0)-1,b3=0;b2>=b3;b2--)b1=new _3({$:1,$0:P.get(b0,b2),$1:b1});return b1;};Q.ofSeq=function(b0){var b1,b2,b3,b4,b5,b6;if(b0 instanceof _3)return b0;else if(b0 instanceof a.Array)return Q.ofArray(b0);else{b1=V.Get(b0);try{b3=b1.MoveNext();if(!b3)b2=_3.Empty;else{b5=new _3({$:1});b4=b5;while(b3){b4.$0=b1.Current();b1.MoveNext()?b4=(b6=new _3({$:1}),b4.$1=b6,b6):b3=false;}b4.$1=_3.Empty;b2=b5;}return b2;}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}}};Q.head=function(b0){return b0.$==1?b0.$0:Q.listEmpty();};Q.tail=function(b0){return b0.$==1?b0.$1:Q.listEmpty();};Q.listEmpty=function(){return o.FailWith("The input list was empty.");};R.p=function(b0){return"SnippetId "+t.prettyPrint(b0.$0);};T.New=function(b0,b1,b2,b3,b4){return{Node:b0,Left:b1,Right:b2,Height:b3,Count:b4};};U.NewFromSeq=function(b0){var b1,b2,b3;b1={};b2=V.Get(b0);try{while(b2.MoveNext()){b3=b2.Current();b1[b3[0]]=b3[1];}}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}return b1;};V.Get=function(b0){return b0 instanceof a.Array?V.ArrayEnumerator(b0):I.Equals(typeof b0,"string")?V.StringEnumerator(b0):b0.GetEnumerator();};V.ArrayEnumerator=function(b0){return new W.New(0,null,function(b1){var b2;b2=b1.s;return b2<P.length(b0)&&(b1.c=P.get(b0,b2),b1.s=b2+1,true);},void 0);};V.StringEnumerator=function(b0){return new W.New(0,null,function(b1){var b2;b2=b1.s;return b2<b0.length&&(b1.c=b0[b2],b1.s=b2+1,true);},void 0);};V.Get0=function(b0){return b0 instanceof a.Array?V.ArrayEnumerator(b0):I.Equals(typeof b0,"string")?V.StringEnumerator(b0):"GetEnumerator0"in b0?b0.GetEnumerator0():b0.GetEnumerator();};W=V.T=bV.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},k,W);W.New=bV.Ctor(function(b0,b1,b2,b3){k.New.call(this);this.s=b0;this.c=b1;this.n=b2;this.d=b3;},W);P.length=function(b0){return b0.dims===2?b0.length*b0.length:b0.length;};P.get=function(b0,b1){P.checkBounds(b0,b1);return b0[b1];};P.checkBounds=function(b0,b1){if(b1<0||b1>=b0.length)o.FailWith("Index was outside the bounds of the array.");};P.set=function(b0,b1,b2){P.checkBounds(b0,b1);b0[b1]=b2;};Y=X.Doc=bV.Class({},k,Y);Y.TextNode=function(b0){return Y.Mk({$:5,$0:_6.CreateText(b0)},_5.Const());};Y.Run=function(b0,b1){_8.LinkElement(b0,b1.docNode);Y.RunInPlace(false,b0,b1);};Y.Element=function(b0,b1,b2){var b3,b4;b3=_9.Concat(b1);b4=Y.Concat(b2);return bh.New(_6.CreateElement(b0),b3,b4);};Y.Mk=function(b0,b1){return new Y.New(b0,b1);};Y.RunInPlace=function(b0,b1,b2){var b3;b3=_8.CreateRunState(b1,b2.docNode);_5.Sink(bb.get_UseAnimations()||bc.BatchUpdatesEnabled()?be.StartProcessor(_8.PerformAnimatedUpdate(b0,b3,b2.docNode)):function(){_8.PerformSyncUpdate(b0,b3,b2.docNode);},b2.updates);};Y.Concat=function(b0){var b1;b1=bi.ofSeqNonCopying(b0);return bi.TreeReduce(Y.get_Empty(),Y.Append,b1);};Y.Append=function(b0,b1){return Y.Mk({$:0,$0:b0.docNode,$1:b1.docNode},_5.Map2Unit(b0.updates,b1.updates));};Y.get_Empty=function(){return Y.Mk(null,_5.Const());};Y.New=bV.Ctor(function(b0,b1){k.New.call(this);this.docNode=b0;this.updates=b1;},Y);_0.LoadLocalTemplates=function(b0){!_0.LocalTemplatesLoaded()?(_0.set_LocalTemplatesLoaded(true),_0.LoadNestedTemplates(self.document.body,"")):void 0;_0.LoadedTemplates().set_Item(b0,_0.LoadedTemplateFile(""));};_0.LocalTemplatesLoaded=function(){$.$cctor();return $.LocalTemplatesLoaded;};_0.set_LocalTemplatesLoaded=function(b0){$.$cctor();$.LocalTemplatesLoaded=b0;};_0.LoadNestedTemplates=function(b0,b1){var b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce;function b2(cf){var cg,ch;if(!b3.ContainsKey(cf)){cg=(ch=null,[b4.TryGetValue(cf,{get:function(){return ch;},set:function(ci){ch=ci;}}),ch]);cg[0]?(ce.Add(cf),b4.Remove(cf),_0.PrepareTemplateStrict(b1,{$:1,$0:cf},cg[1][0],{$:1,$0:cg[1][1]},{$:1,$0:b2})):bT.warn(ce.Contains(cf)?"Encountered loop when instantiating "+cf:"Local template does not exist: "+cf);}}b3=_0.LoadedTemplateFile(b1);b4=new _7.New$5();b5=b0.querySelectorAll("[ws-template]");for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5[b6];b9=b8.getAttribute("ws-template").toLowerCase();b8.removeAttribute("ws-template");b4.set_Item(b9,[[b8],_0.FakeRootSingle(b8)]);}b_=b0.querySelectorAll("[ws-children-template]");for(b$=0,ca=b_.length-1;b$<=ca;b$++){cb=b_[b$];cc=cb.getAttribute("ws-children-template").toLowerCase();cb.removeAttribute("ws-children-template");b4.set_Item(cc,(cd=_6.ChildrenArray(cb),[cd,_0.FakeRoot(cd)]));}ce=new ba.New$3();while(b4.count>0)b2(p.head(b4.get_Keys()));};_0.LoadedTemplates=function(){$.$cctor();return $.LoadedTemplates;};_0.LoadedTemplateFile=function(b0){var b1,b2,b3;b1=(b2=null,[_0.LoadedTemplates().TryGetValue(b0,{get:function(){return b2;},set:function(b4){b2=b4;}}),b2]);return b1[0]?b1[1]:(b3=new _7.New$5(),(_0.LoadedTemplates().set_Item(b0,b3),b3));};_0.FakeRootSingle=function(b0){var b1,b2,b3;b0.removeAttribute("ws-template");b1=b0.getAttribute("ws-replace");b1===null?void 0:(b0.removeAttribute("ws-replace"),b2=b0.parentNode,I.Equals(b2,null)?void 0:(b3=self.document.createElement(b0.tagName),b3.setAttribute("ws-replace",b1),b2.replaceChild(b3,b0)));return _0.FakeRoot([b0]);};_0.FakeRoot=function(b0){var b1,b2,b3;b1=self.document.createElement("div");for(b2=0,b3=b0.length-1;b2<=b3;b2++)b1.appendChild(P.get(b0,b2));return b1;};_0.PrepareTemplateStrict=function(b0,b1,b2,b3,b4){var b5,b6;function b7(ca,cb){var cc,cd,ce,cf,cg,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC;function ch(cD){}while(true)switch(ca){case 0:if(cb!==null){cc=cb.nextSibling;if(I.Equals(cb.nodeType,v.TEXT_NODE))bn.convertTextNode(cb);else if(I.Equals(cb.nodeType,v.ELEMENT_NODE))b9(cb);cb=cc;}else return null;break;case 1:ci=G.string(cb.nodeName,{$:1,$0:3},null).toLowerCase();cj=(cd=ci.indexOf("."),cd===-1?[b0,ci]:[G.string(ci,null,{$:1,$0:cd-1}),G.string(ci,{$:1,$0:cd+1},null)]);ck=cj[1];cl=cj[0];if(cl!==""&&!_0.LoadedTemplates().ContainsKey(cl))return bn.failNotLoaded(ck);else{if(cl===""&&b4!=null)b4.$0(ck);cm=_0.LoadedTemplates().get_Item(cl);if(!cm.ContainsKey(ck))return bn.failNotLoaded(ck);else{cn=cm.get_Item(ck);co=cn.cloneNode(true);cp=new ba.New$3();cq=new _7.New$5();cr=cb.attributes;for(cs=0,ct=cr.length-1;cs<=ct;cs++){cu=cr.item(cs).name.toLowerCase();cq.set_Item(cu,(cv=cr.item(cs).nodeValue,cv===""?cu:cv.toLowerCase()));!cp.Add(cu)?bT.warn("Hole mapped twice",cu):void 0;}for(cw=0,cx=cb.childNodes.length-1;cw<=cx;cw++){cy=cb.childNodes[cw];I.Equals(cy.nodeType,v.ELEMENT_NODE)?!cp.Add(cy.nodeName.toLowerCase())?bT.warn("Hole filled twice",ck):void 0:void 0;}cz=cb.childNodes.length===1&&I.Equals(cb.firstChild.nodeType,v.TEXT_NODE);if(cz){cf=bn.fillTextHole(co,cb.firstChild.textContent,ck);((function(cD){return function(cE){if(cE!=null)cD(cE.$0);};}((cg=function(cD){return function(cE){return cD.Add(cE);};}(cp),function(cD){return ch(cg(cD));})))(cf));}bn.removeHolesExcept(co,cp);if(!cz){for(cA=0,cB=cb.childNodes.length-1;cA<=cB;cA++){cC=cb.childNodes[cA];I.Equals(cC.nodeType,v.ELEMENT_NODE)?cC.hasAttributes()?bn.fillInstanceAttrs(co,cC):b8(co,cC):void 0;}}bn.mapHoles(co,cq);bn.fill(co,cb.parentNode,cb);cb.parentNode.removeChild(cb);return;}}break;}}function b8(ca,cb){var cc,ce,cf;function cd(cg,ch){var ci,cj,ck;if(ce==="title"&&cb.hasChildNodes()){ci=bY.parseHTML(cb.textContent);cb.removeChild(cb.firstChild);for(cj=0,ck=ci.length-1;cj<=ck;cj++)cb.appendChild(P.get(ci,cj));}else null;b9(cb);return bn.fill(cb,cg,ch);}ce=cb.nodeName.toLowerCase();_6.IterSelector(ca,"[ws-attr-holes]",function(cg){var ch,ci,cj,ck,cl;ch=F.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=P.get(ch,ci);cg.setAttribute(ck,(cl=new a.RegExp("\\${"+ce+"}","ig"),cg.getAttribute(ck).replace(cl,cb.textContent)));}});cf=ca.querySelector("[ws-hole="+ce+"]");if(I.Equals(cf,null)){cc=ca.querySelector("[ws-replace="+ce+"]");return I.Equals(cc,null)?null:(cd(cc.parentNode,cc),void cc.parentNode.removeChild(cc));}else{while(cf.hasChildNodes())cf.removeChild(cf.lastChild);cf.removeAttribute("ws-hole");return cd(cf,null);}}function b9(ca){if(F.StartsWith(ca.nodeName.toLowerCase(),"ws-"))b$(ca);else{bn.convertAttrs(ca);b_(ca.firstChild);}}function b_(ca){return b7(0,ca);}function b$(ca){return b7(1,ca);}b5=b3==null?_0.FakeRoot(b2):b3.$0;b6=(b1==null?"":b1.$0).toLowerCase();_0.LoadedTemplateFile(b0).set_Item(b6,b5);P.length(b2)>0?(function(ca){var cb,cc,cd,ce;while(true){cb=ca.querySelector("[ws-template]");if(I.Equals(cb,null)){cc=ca.querySelector("[ws-children-template]");if(I.Equals(cc,null))return null;else{cd=cc.getAttribute("ws-children-template");cc.removeAttribute("ws-children-template");_0.PrepareTemplateStrict(b0,{$:1,$0:cd},_6.ChildrenArray(cc),null,null);ca=ca;}}else{ce=cb.getAttribute("ws-template");(_0.PrepareSingleTemplate(b0,{$:1,$0:ce},cb))(null);ca=ca;}}}(b5),b_(P.get(b2,0))):void 0;};_0.PrepareSingleTemplate=function(b0,b1,b2){var b3,b4,b5;b3=_0.FakeRootSingle(b2);b4=[b2];b5={$:1,$0:b3};return function(b6){_0.PrepareTemplateStrict(b0,b1,b4,b5,b6);};};_0.TextHoleRE=function(){$.$cctor();return $.TextHoleRE;};_2.TryParse=function(b0){var b1;b1=bZ.parse(b0);return a.isNaN(b1)?null:{$:1,$0:b1};};j.TryParse=function(b0,b1,b2,b3){var b4,b5;b4=+b0;b5=b4===b4-b4%1&&b4>=b1&&b4<=b2;b5?b3.set(b4):void 0;return b5;};S.OfSeq=function(b0){var b1;b1=P.ofSeq(p.distinct(b0));P.sortInPlace(b1);return S.Build(b1,0,b1.length-1);};S.Build=function(b0,b1,b2){var b3,b4,b5;return b2-b1+1<=0?null:(b3=(b1+b2)/2>>0,(b4=S.Build(b0,b1,b3-1),(b5=S.Build(b0,b3+1,b2),S.Branch(P.get(b0,b3),b4,b5))));};S.Branch=function(b0,b1,b2){var b3,b4;return T.New(b0,b1,b2,1+(b3=b1==null?0:b1.Height,(b4=b2==null?0:b2.Height,I.Compare(b3,b4)===1?b3:b4)),1+(b1==null?0:b1.Count)+(b2==null?0:b2.Count));};S.Enumerate=function(b0,b1){function b2(b3,b4){var b5;while(true)if(b3==null)return b4.$==1?{$:1,$0:[b4.$0[0],[b4.$0[1],b4.$1]]}:null;else if(b0){b5=b3;b3=b5.Right;b4=new _3({$:1,$0:[b5.Node,b5.Left],$1:b4});}else{b5=b3;b3=b5.Left;b4=new _3({$:1,$0:[b5.Node,b5.Right],$1:b4});}}return p.unfold(function(b3){return b2(b3[0],b3[1]);},[b1,_3.Empty]);};_3=Q.T=bV.Class({GetEnumerator:function(){return new W.New(this,null,function(b0){var b1;b1=b0.s;return b1.$==0?false:(b0.c=b1.$0,b0.s=b1.$1,true);},void 0);},GetEnumerator0:function(){return V.Get(this);}},null,_3);_3.Empty=new _3({$:0});_5.Const=function(b0){var b1;b1=_.New({$:0,$0:b0});return function(){return b1;};};_5.Sink=function(b0,b1){function b2(){_.WhenRun(b1(),b0,function(){bA.scheduler().Fork(b2);});}bA.scheduler().Fork(b2);};_5.Map2Unit=function(b0,b1){return _5.CreateLazy(function(){return _.Map2Unit(b0(),b1());});};_5.CreateLazy=function(b0){var b1;b1={c:null,o:b0};return function(){var b2,b3;b2=b1.c;return b2===null?(b2=b1.o(),b1.c=b2,(b3=b2.s,b3!=null&&b3.$==0)?b1.o=null:_.WhenObsoleteRun(b2,function(){b1.c=null;}),b2):b2;};};_6.CreateText=function(b0){return _6.Doc().createTextNode(b0);};_6.CreateElement=function(b0){return _6.Doc().createElement(b0);};_6.Doc=function(){bl.$cctor();return bl.Doc;};_6.ChildrenArray=function(b0){var b1,b2,b3;b1=[];for(b2=0,b3=b0.childNodes.length-1;b2<=b3;b2++)b1.push(b0.childNodes[b2]);return b1;};_6.IterSelector=function(b0,b1,b2){var b3,b4,b5;b3=b0.querySelectorAll(b1);for(b4=0,b5=b3.length-1;b4<=b5;b4++)b2(b3[b4]);};_6.InsertAt=function(b0,b1,b2){var b3;if(!(b2.parentNode===b0&&b1===(b3=b2.nextSibling,I.Equals(b3,null)?null:b3)))b0.insertBefore(b2,b1);};_6.RemoveNode=function(b0,b1){if(b1.parentNode===b0)b0.removeChild(b1);};_7=l.Dictionary=bV.Class({set_Item:function(b0,b1){this.set(b0,b1);},ContainsKey:function(b0){var b1,b2;b1=this;b2=this.data[this.hash(b0)];return b2==null?false:P.exists(function(b3){return b1.equals.apply(null,[(o.KeyValue(b3))[0],b0]);},b2);},TryGetValue:function(b0,b1){var b2,b3,b4;b2=this;b3=this.data[this.hash(b0)];return b3==null?false:(b4=P.tryPick(function(b5){var b6;b6=o.KeyValue(b5);return b2.equals.apply(null,[b6[0],b0])?{$:1,$0:b6[1]}:null;},b3),b4!=null&&b4.$==1&&(b1.set(b4.$0),true));},Remove:function(b0){return this.remove(b0);},get_Keys:function(){return new bo.New(this);},set:function(b0,b1){var b2,b3,b4,b5;b2=this;b3=this.hash(b0);b4=this.data[b3];b4==null?(this.count=this.count+1,this.data[b3]=new a.Array({K:b0,V:b1})):(b5=P.tryFindIndex(function(b6){return b2.equals.apply(null,[(o.KeyValue(b6))[0],b0]);},b4),b5==null?(this.count=this.count+1,b4.push({K:b0,V:b1})):b4[b5.$0]={K:b0,V:b1});},remove:function(b0){var b1,b2,b3,b4;b1=this;b2=this.hash(b0);b3=this.data[b2];return b3==null?false:(b4=P.filter(function(b5){return!b1.equals.apply(null,[(o.KeyValue(b5))[0],b0]);},b3),P.length(b4)<b3.length&&(this.count=this.count-1,this.data[b2]=b4,true));},get_Item:function(b0){return this.get(b0);},get:function(b0){var b1,b2;b1=this;b2=this.data[this.hash(b0)];return b2==null?bm.notPresent():P.pick(function(b3){var b4;b4=o.KeyValue(b3);return b1.equals.apply(null,[b4[0],b0])?{$:1,$0:b4[1]}:null;},b2);},GetEnumerator:function(){return V.Get0(this);},GetEnumerator0:function(){return V.Get0(P.concat(x.GetFieldValues(this.data)));}},k,_7);_7.New$5=bV.Ctor(function(){_7.New$6.call(this,[],I.Equals,I.Hash);},_7);_7.New$6=bV.Ctor(function(b0,b1,b2){var b3,b4;k.New.call(this);this.equals=b1;this.hash=b2;this.count=0;this.data=[];b3=V.Get(b0);try{while(b3.MoveNext()){b4=b3.Current();this.set(b4.K,b4.V);}}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}},_7);_8.LinkElement=function(b0,b1){_8.InsertDoc(b0,b1,null);};_8.InsertDoc=function(b0,b1,b2){var b3;return b1!=null&&b1.$==1?_8.InsertNode(b0,b1.$0.El,b2):b1!=null&&b1.$==2?(b3=b1.$0,(b3.Dirty=false,_8.InsertDoc(b0,b3.Current,b2))):b1==null?b2:b1!=null&&b1.$==4?_8.InsertNode(b0,b1.$0.Text,b2):b1!=null&&b1.$==5?_8.InsertNode(b0,b1.$0,b2):b1!=null&&b1.$==6?P.foldBack(function(b4,b5){return b4==null||b4.constructor===_4?_8.InsertDoc(b0,b4,b5):_8.InsertNode(b0,b4,b5);},b1.$0.Els,b2):_8.InsertDoc(b0,b1.$0,_8.InsertDoc(b0,b1.$1,b2));};_8.CreateRunState=function(b0,b1){return bq.New(br.get_Empty(),_8.CreateElemNode(b0,bv.EmptyAttr(),b1));};_8.PerformAnimatedUpdate=function(b0,b1,b2){var b3;return bb.get_UseAnimations()?(b3=null,bA.Delay(function(){var b4,b5,b6;b4=br.FindAll(b2);b5=_8.ComputeChangeAnim(b1,b4);b6=_8.ComputeEnterAnim(b1,b4);return bA.Bind(bb.Play(bb.Append(b5,_8.ComputeExitAnim(b1,b4))),function(){return bA.Bind(_8.SyncElemNodesNextFrame(b0,b1),function(){return bA.Bind(bb.Play(b6),function(){b1.PreviousNodes=b4;return bA.Return(null);});});});})):_8.SyncElemNodesNextFrame(b0,b1);};_8.PerformSyncUpdate=function(b0,b1,b2){var b3;b3=br.FindAll(b2);_8.SyncElemNode(b0,b1.Top);b1.PreviousNodes=b3;};_8.InsertNode=function(b0,b1,b2){_6.InsertAt(b0,b2,b1);return b1;};_8.CreateElemNode=function(b0,b1,b2){var b3;_8.LinkElement(b0,b2);b3=bv.Insert(b0,b1);return bj.New(b3,b2,null,b0,by.Int(),bV.GetOptional(b3.OnAfterRender));};_8.SyncElemNodesNextFrame=function(b0,b1){function b2(b3){a.requestAnimationFrame(function(){_8.SyncElemNode(b0,b1.Top);b3();});}return bc.BatchUpdatesEnabled()?bA.FromContinuations(function(b3,b4,b5){return b2.apply(null,[b3,b4,b5]);}):(_8.SyncElemNode(b0,b1.Top),bA.Return(null));};_8.ComputeExitAnim=function(b0,b1){return bb.Concat(P.map(function(b2){return bv.GetExitAnim(b2.Attr);},br.ToArray(br.Except(b1,br.Filter(function(b2){return bv.HasExitAnim(b2.Attr);},b0.PreviousNodes)))));};_8.ComputeEnterAnim=function(b0,b1){return bb.Concat(P.map(function(b2){return bv.GetEnterAnim(b2.Attr);},br.ToArray(br.Except(b0.PreviousNodes,br.Filter(function(b2){return bv.HasEnterAnim(b2.Attr);},b1)))));};_8.ComputeChangeAnim=function(b0,b1){var b2;function b3(b4){return bv.HasChangeAnim(b4.Attr);}b2=function(b4){return br.Filter(b3,b4);};return bb.Concat(P.map(function(b4){return bv.GetChangeAnim(b4.Attr);},br.ToArray(br.Intersect(b2(b0.PreviousNodes),b2(b1)))));};_8.SyncElemNode=function(b0,b1){!b0?_8.SyncElement(b1):void 0;_8.Sync(b1.Children);_8.AfterRender(b1);};_8.SyncElement=function(b0){function b1(b2){function b3(b4){var b5,b6;return b4!=null&&b4.$==0?b3(b4.$0)||b3(b4.$1):b4!=null&&b4.$==2?(b5=b4.$0,b5.Dirty||b3(b5.Current)):b4!=null&&b4.$==6&&(b6=b4.$0,b6.Dirty||P.exists(b1,b6.Holes));}return b3(b2.Children);}bv.Sync(b0.El,b0.Attr);b1(b0)?_8.DoSyncElement(b0):void 0;};_8.Sync=function(b0){var b1,b2;if(b0!=null&&b0.$==1)_8.SyncElemNode(false,b0.$0);else if(b0!=null&&b0.$==2)_8.Sync(b0.$0.Current);else if(b0==null);else if(b0!=null&&b0.$==5);else if(b0!=null&&b0.$==4){b1=b0.$0;b1.Dirty?(b1.Text.nodeValue=b1.Value,b1.Dirty=false):void 0;}else if(b0!=null&&b0.$==6){b2=b0.$0;P.iter(function(b3){_8.SyncElemNode(false,b3);},b2.Holes);P.iter(function(b3){bv.Sync(b3[0],b3[1]);},b2.Attrs);_8.AfterRender(b2);}else{_8.Sync(b0.$0);_8.Sync(b0.$1);}};_8.AfterRender=function(b0){var b1;b1=bV.GetOptional(b0.Render);b1!=null&&b1.$==1?(b1.$0(b0.El),bV.SetOptional(b0,"Render",null)):void 0;};_8.DoSyncElement=function(b0){var b1,b2,b3;function b4(b5,b6){var b7,b8;return b5!=null&&b5.$==1?b5.$0.El:b5!=null&&b5.$==2?(b7=b5.$0,b7.Dirty?(b7.Dirty=false,_8.InsertDoc(b1,b7.Current,b6)):b4(b7.Current,b6)):b5==null?b6:b5!=null&&b5.$==4?b5.$0.Text:b5!=null&&b5.$==5?b5.$0:b5!=null&&b5.$==6?(b8=b5.$0,(b8.Dirty?b8.Dirty=false:void 0,P.foldBack(function(b9,b_){return b9==null||b9.constructor===_4?b4(b9,b_):b9;},b8.Els,b6))):b4(b5.$0,b4(b5.$1,b6));}b1=b0.El;bM.Iter((b2=b0.El,function(b5){_6.RemoveNode(b2,b5);}),bM.Except(bM.DocChildren(b0),bM.Children(b0.El,bV.GetOptional(b0.Delimiters))));b4(b0.Children,(b3=bV.GetOptional(b0.Delimiters),b3!=null&&b3.$==1?b3.$0[1]:null));};_9=X.AttrProxy=bV.Class({},null,_9);_9.Concat=function(b0){var b1;b1=bi.ofSeqNonCopying(b0);return bi.TreeReduce(bv.EmptyAttr(),_9.Append,b1);};_9.Append=function(b0,b1){return bv.AppendTree(b0,b1);};_5=X.View=bV.Class({},null,_5);_.WhenRun=function(b0,b1,b2){var b3;b3=b0.s;b3==null?b2():b3!=null&&b3.$==2?(b3.$1.push(b2),b1(b3.$0)):b3!=null&&b3.$==3?(b3.$0.push(b1),b3.$1.push(b2)):b1(b3.$0);};_.Copy=function(b0){var b1,b2,b3;b1=b0.s;return b1==null?b0:b1!=null&&b1.$==2?(b2=_.New({$:2,$0:b1.$0,$1:[]}),(_.WhenObsolete(b0,b2),b2)):b1!=null&&b1.$==3?(b3=_.New({$:3,$0:[],$1:[]}),(_.When(b0,function(b4){_.MarkDone(b3,b0,b4);},b3),b3)):b0;};_.WhenObsoleteRun=function(b0,b1){var b2;b2=b0.s;b2==null?b1():b2!=null&&b2.$==2?b2.$1.push(b1):b2!=null&&b2.$==3?b2.$1.push(b1):void 0;};_.Map2Unit=function(b0,b1){var b2,b3,b4;function b5(){var b6,b7,b8;if(!(b6=b4.s,b6!=null&&b6.$==0||b6!=null&&b6.$==2)){b7=_.ValueAndForever(b0);b8=_.ValueAndForever(b1);b7!=null&&b7.$==1?b8!=null&&b8.$==1?b7.$0[1]&&b8.$0[1]?_.MarkForever(b4,null):_.MarkReady(b4,null):void 0:void 0;}}b2=b0.s;b3=b1.s;return b2!=null&&b2.$==0?b3!=null&&b3.$==0?_.New({$:0,$0:null}):b1:b3!=null&&b3.$==0?b0:(b4=_.New({$:3,$0:[],$1:[]}),(_.When(b0,b5,b4),_.When(b1,b5,b4),b4));};_.WhenObsolete=function(b0,b1){var b2;b2=b0.s;b2==null?_.Obsolete(b1):b2!=null&&b2.$==2?_.EnqueueSafe(b2.$1,b1):b2!=null&&b2.$==3?_.EnqueueSafe(b2.$1,b1):void 0;};_.When=function(b0,b1,b2){var b3;b3=b0.s;b3==null?_.Obsolete(b2):b3!=null&&b3.$==2?(_.EnqueueSafe(b3.$1,b2),b1(b3.$0)):b3!=null&&b3.$==3?(b3.$0.push(b1),_.EnqueueSafe(b3.$1,b2)):b1(b3.$0);};_.MarkDone=function(b0,b1,b2){var b3;if(b3=b1.s,b3!=null&&b3.$==0)_.MarkForever(b0,b2);else _.MarkReady(b0,b2);};_.ValueAndForever=function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0?{$:1,$0:[b1.$0,true]}:b1!=null&&b1.$==2?{$:1,$0:[b1.$0,false]}:null;};_.MarkForever=function(b0,b1){var b2,b3,b4,b5;b2=b0.s;if(b2!=null&&b2.$==3){b0.s={$:0,$0:b1};b3=b2.$0;for(b4=0,b5=P.length(b3)-1;b4<=b5;b4++)(P.get(b3,b4))(b1);}else void 0;};_.MarkReady=function(b0,b1){var b2,b3,b4,b5;b2=b0.s;if(b2!=null&&b2.$==3){b0.s={$:2,$0:b1,$1:b2.$1};b3=b2.$0;for(b4=0,b5=P.length(b3)-1;b4<=b5;b4++)(P.get(b3,b4))(b1);}else void 0;};_.EnqueueSafe=function(b0,b1){var b2,b3,b4,b5;b0.push(b1);if(b0.length%20===0){b2=b0.slice(0);bS.Clear(b0);for(b3=0,b4=P.length(b2)-1;b3<=b4;b3++){b5=P.get(b2,b3);typeof b5=="object"?function(b6){if(b6.s)b0.push(b6);}(b5):function(b6){b0.push(b6);}(b5);}}else void 0;};$.$cctor=function(){$.$cctor=a.ignore;$.LoadedTemplates=new _7.New$5();$.LocalTemplatesLoaded=false;$.TextHoleRE="\\${([^}]+)}";};ba=l.HashSet=bV.Class({Add:function(b0){return this.add(b0);},Contains:function(b0){var b1;b1=this.data[this.hash(b0)];return b1==null?false:this.arrContains(b0,b1);},add:function(b0){var b1,b2;b1=this.hash(b0);b2=this.data[b1];return b2==null?(this.data[b1]=[b0],this.count=this.count+1,true):this.arrContains(b0,b2)?false:(b2.push(b0),this.count=this.count+1,true);},arrContains:function(b0,b1){var b2,b3,b4,b5;b2=true;b3=0;b5=b1.length;while(b2&&b3<b5)if(this.equals.apply(null,[b1[b3],b0]))b2=false;else b3=b3+1;return!b2;},ExceptWith:function(b0){var b1;b1=V.Get(b0);try{while(b1.MoveNext())this.Remove(b1.Current());}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b0){var b1,b2,b3,b4;b1=0;b2=bI.concat(this.data);for(b3=0,b4=b2.length-1;b3<=b4;b3++)P.set(b0,b3,b2[b3]);},IntersectWith:function(b0){var b1,b2,b3,b4,b5;b1=new ba.New$4(b0,this.equals,this.hash);b2=bI.concat(this.data);for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];!b1.Contains(b5)?this.Remove(b5):void 0;}},Remove:function(b0){var b1;b1=this.data[this.hash(b0)];return b1==null?false:this.arrRemove(b0,b1)&&(this.count=this.count-1,true);},arrRemove:function(b0,b1){var b2,b3,b4,b5;b2=true;b3=0;b5=b1.length;while(b2&&b3<b5)if(this.equals.apply(null,[b1[b3],b0])){b1.splice.apply(b1,[b3,1]);b2=false;}else b3=b3+1;return!b2;},GetEnumerator:function(){return V.Get(bI.concat(this.data));},GetEnumerator0:function(){return V.Get(bI.concat(this.data));}},k,ba);ba.New$3=bV.Ctor(function(){ba.New$4.call(this,[],I.Equals,I.Hash);},ba);ba.New$4=bV.Ctor(function(b0,b1,b2){var b3;k.New.call(this);this.equals=b1;this.hash=b2;this.data=[];this.count=0;b3=V.Get(b0);try{while(b3.MoveNext())this.add(b3.Current());}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}},ba);ba.New$2=bV.Ctor(function(b0){ba.New$4.call(this,b0,I.Equals,I.Hash);},ba);bb.get_UseAnimations=function(){return bs.UseAnimations();};bb.Play=function(b0){var b1;b1=null;return bA.Delay(function(){return bA.Bind(bb.Run(a.ignore,bs.Actions(b0)),function(){bs.Finalize(b0);return bA.Return(null);});});};bb.Append=function(b0,b1){return{$:0,$0:bB.Append(b0.$0,b1.$0)};};bb.Run=function(b0,b1){var b2;function b3(b4){function b5(b6,b7){var b8;b8=b7-b6;b1.Compute(b8);b0();return b8<=b2?void a.requestAnimationFrame(function(b9){b5(b6,b9);}):b4();}a.requestAnimationFrame(function(b6){b5(b6,b6);});}b2=b1.Duration;return b2===0?bA.Zero():bA.FromContinuations(function(b4,b5,b6){return b3.apply(null,[b4,b5,b6]);});};bb.Concat=function(b0){return{$:0,$0:bB.Concat(p.map(bs.List,b0))};};bc.BatchUpdatesEnabled=function(){bt.$cctor();return bt.BatchUpdatesEnabled;};be.StartProcessor=function(b0){var b1;function b2(){var b3;b3=null;return bA.Delay(function(){return bA.Bind(b0,function(){var b4;b4=b1[0];return b4===1?(b1[0]=0,bA.Zero()):b4===2?(b1[0]=1,b2()):bA.Zero();});});}b1=[0];return function(){var b3;b3=b1[0];b3===0?(b1[0]=1,bA.Start(b2(),null)):b3===1?b1[0]=2:void 0;};};bg=i.FormatException=bV.Class({},bf,bg);bg.New$1=bV.Ctor(function(b0){this.message=b0;_4.setPrototypeOf(this,bg.prototype);},bg);P.mapiInPlace=function(b0,b1){var b2,b3;for(b2=0,b3=b1.length-1;b2<=b3;b2++)b1[b2]=b0(b2,b1[b2]);return b1;};P.mapInPlace=function(b0,b1){var b2,b3;for(b2=0,b3=b1.length-1;b2<=b3;b2++)b1[b2]=b0(b1[b2]);};p.insufficient=function(){return o.FailWith("The input sequence has an insufficient number of elements.");};bh=X.Elt=bV.Class({},Y,bh);bh.New=function(b0,b1,b2){var b3,b4;b3=_8.CreateElemNode(b0,b1,b2.docNode);b4=bu.Create(b2.updates);return new bh.New$1({$:1,$0:b3},_5.Map2Unit(bv.Updates(b3.Attr),b4.v),b0,b4);};bh.New$1=bV.Ctor(function(b0,b1,b2,b3){Y.New.call(this,b0,b1);this.docNode$1=b0;this.updates$1=b1;this.elt=b2;this.rvUpdates=b3;},bh);bi.ofSeqNonCopying=function(b0){var b1,b2;if(b0 instanceof a.Array)return b0;else if(b0 instanceof _3)return P.ofList(b0);else if(b0===null)return[];else{b1=[];b2=V.Get(b0);try{while(b2.MoveNext())b1.push(b2.Current());return b1;}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}}};bi.TreeReduce=function(b0,b1,b2){var b3;function b4(b5,b6){var b7,b8;return b6<=0?b0:b6===1&&(b5>=0&&b5<b3)?P.get(b2,b5):(b8=b6/2>>0,b1(b4(b5,b8),b4(b5+b8,b6-b8)));}b3=P.length(b2);return b4(0,b3);};bi.MapTreeReduce=function(b0,b1,b2,b3){var b4;function b5(b6,b7){var b8,b9;return b7<=0?b1:b7===1&&(b6>=0&&b6<b4)?b0(P.get(b3,b6)):(b9=b7/2>>0,b2(b5(b6,b9),b5(b6+b9,b7-b9)));}b4=P.length(b3);return b5(0,b4);};bj=X.DocElemNode=bV.Class({Equals:function(b0){return this.ElKey===b0.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bj);bj.New=function(b0,b1,b2,b3,b4,b5){var b6;return new bj((b6={Attr:b0,Children:b1,El:b3,ElKey:b4},(bV.SetOptional(b6,"Delimiters",b2),bV.SetOptional(b6,"Render",b5),b6)));};bl.$cctor=function(){bl.$cctor=a.ignore;bl.Doc=self.document;};bm.notPresent=function(){return o.FailWith("The given key was not present in the dictionary.");};bn.convertTextNode=function(b0){var b1,b2,b3,b4,b5,b6;b1=null;b2=0;b4=b0.textContent;b5=new a.RegExp(_0.TextHoleRE(),"g");while(b1=b5.exec(b4),b1!==null){b0.parentNode.insertBefore(self.document.createTextNode(G.string(b4,{$:1,$0:b2},{$:1,$0:b5.lastIndex-P.get(b1,0).length-1})),b0);b2=b5.lastIndex;b6=self.document.createElement("span");b6.setAttribute("ws-replace",P.get(b1,1).toLowerCase());b0.parentNode.insertBefore(b6,b0);}b5.lastIndex=0;b0.textContent=G.string(b4,{$:1,$0:b2},null);};bn.failNotLoaded=function(b0){bT.warn("Instantiating non-loaded template",b0);};bn.fillTextHole=function(b0,b1,b2){var b3;b3=b0.querySelector("[ws-replace]");return I.Equals(b3,null)?(bT.warn("Filling non-existent text hole",b2),null):(b3.parentNode.replaceChild(new a.Text(b1),b3),{$:1,$0:b3.getAttribute("ws-replace")});};bn.removeHolesExcept=function(b0,b1){function b2(b3){_6.IterSelector(b0,"["+b3+"]",function(b4){if(!b1.Contains(b4.getAttribute(b3)))b4.removeAttribute(b3);});}b2("ws-attr");b2("ws-onafterrender");b2("ws-var");_6.IterSelector(b0,"[ws-hole]",function(b3){if(!b1.Contains(b3.getAttribute("ws-hole"))){b3.removeAttribute("ws-hole");while(b3.hasChildNodes())b3.removeChild(b3.lastChild);}});_6.IterSelector(b0,"[ws-replace]",function(b3){if(!b1.Contains(b3.getAttribute("ws-replace")))b3.parentNode.removeChild(b3);});_6.IterSelector(b0,"[ws-on]",function(b3){b3.setAttribute("ws-on",F.concat(" ",P.filter(function(b4){return b1.Contains(P.get(F.SplitChars(b4,[":"],1),1));},F.SplitChars(b3.getAttribute("ws-on"),[" "],1))));});_6.IterSelector(b0,"[ws-attr-holes]",function(b3){var b4,b5,b6,b7,b8;b4=F.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=P.get(b4,b5);b3.setAttribute(b7,(b8=new a.RegExp(_0.TextHoleRE(),"g"),b3.getAttribute(b7).replace(b8,function(b9,b_){return b1.Contains(b_)?b9:"";})));}});};bn.fillInstanceAttrs=function(b0,b1){var b2,b3,b4,b5,b6;bn.convertAttrs(b1);b2=b1.nodeName.toLowerCase();b3=b0.querySelector("[ws-attr="+b2+"]");if(I.Equals(b3,null))bT.warn("Filling non-existent attr hole",b2);else{b3.removeAttribute("ws-attr");for(b4=0,b5=b1.attributes.length-1;b4<=b5;b4++){b6=b1.attributes.item(b4);b6.name==="class"&&b3.hasAttribute("class")?b3.setAttribute("class",b3.getAttribute("class")+" "+b6.nodeValue):b3.setAttribute(b6.name,b6.nodeValue);}}};bn.mapHoles=function(b0,b1){function b2(b3){_6.IterSelector(b0,"["+b3+"]",function(b4){var b5,b6;b5=(b6=null,[b1.TryGetValue(b4.getAttribute(b3).toLowerCase(),{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);b5[0]?b4.setAttribute(b3,b5[1]):void 0;});}b2("ws-hole");b2("ws-replace");b2("ws-attr");b2("ws-onafterrender");b2("ws-var");_6.IterSelector(b0,"[ws-on]",function(b3){b3.setAttribute("ws-on",F.concat(" ",P.map(function(b4){var b5,b6,b7;b5=F.SplitChars(b4,[":"],1);b6=(b7=null,[b1.TryGetValue(P.get(b5,1),{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);return b6[0]?P.get(b5,0)+":"+b6[1]:b4;},F.SplitChars(b3.getAttribute("ws-on"),[" "],1))));});_6.IterSelector(b0,"[ws-attr-holes]",function(b3){var b4,b5,b6;b4=F.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++)(function(){var b7;function b8(b9,b_){var b$;b$=o.KeyValue(b_);return b9.replace(new a.RegExp("\\${"+b$[0]+"}","ig"),"${"+b$[1]+"}");}b7=P.get(b4,b5);return b3.setAttribute(b7,(((bV.Curried3(p.fold))(b8))(b3.getAttribute(b7)))(b1));}());});};bn.fill=function(b0,b1,b2){while(true)if(b0.hasChildNodes())b2=b1.insertBefore(b0.lastChild,b2);else return null;};bn.convertAttrs=function(b0){var b2,b3,b4,b5,b6,b7,b8,b9;function b1(b_){var b$;b$=b0.getAttribute(b_);b$===null?void 0:b0.setAttribute(b_,b$.toLowerCase());}b2=b0.attributes;b3=[];b4=[];b5=[];for(b6=0,b7=b2.length-1;b6<=b7;b6++){b8=b2.item(b6);F.StartsWith(b8.nodeName,"ws-on")&&b8.nodeName!=="ws-onafterrender"&&b8.nodeName!=="ws-on"?(b3.push(b8.nodeName),b4.push(G.string(b8.nodeName,{$:1,$0:"ws-on".length},null)+":"+b8.nodeValue.toLowerCase())):!F.StartsWith(b8.nodeName,"ws-")&&(new a.RegExp(_0.TextHoleRE())).test(b8.nodeValue)?(b8.nodeValue=(b9=new a.RegExp(_0.TextHoleRE(),"g"),b8.nodeValue.replace(b9,function(b_,b$){return"${"+b$.toLowerCase()+"}";})),b5.push(b8.nodeName)):void 0;}!(b4.length==0)?b0.setAttribute("ws-on",F.concat(" ",b4)):void 0;!(b5.length==0)?b0.setAttribute("ws-attr-holes",F.concat(" ",b5)):void 0;b1("ws-hole");b1("ws-replace");b1("ws-attr");b1("ws-onafterrender");b1("ws-var");P.iter(function(b_){b0.removeAttribute(b_);},b3);};bo=l.KeyCollection=bV.Class({GetEnumerator$1:function(){return V.Get(p.map(function(b0){return b0.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},k,bo);bo.New=bV.Ctor(function(b0){k.New.call(this);this.d=b0;},bo);bq.New=function(b0,b1){return{PreviousNodes:b0,Top:b1};};br.get_Empty=function(){return{$:0,$0:new ba.New$3()};};br.FindAll=function(b0){var b1;function b2(b4){if(b4!=null&&b4.$==0){b2(b4.$0);b2(b4.$1);}else if(b4!=null&&b4.$==1)b3(b4.$0);else if(b4!=null&&b4.$==2)b2(b4.$0.Current);else if(b4!=null&&b4.$==6)P.iter(b3,b4.$0.Holes);}function b3(b4){b1.push(b4);b2(b4.Children);}b1=[];b2(b0);return{$:0,$0:new ba.New$2(b1)};};br.Filter=function(b0,b1){return{$:0,$0:bH.Filter(b0,b1.$0)};};br.Except=function(b0,b1){return{$:0,$0:bH.Except(b0.$0,b1.$0)};};br.ToArray=function(b0){return bH.ToArray(b0.$0);};br.Intersect=function(b0,b1){return{$:0,$0:bH.Intersect(b0.$0,b1.$0)};};bs.UseAnimations=function(){bz.$cctor();return bz.UseAnimations;};bs.Actions=function(b0){return bs.ConcatActions(P.choose(function(b1){return b1.$==1?{$:1,$0:b1.$0}:null;},bB.ToArray(b0.$0)));};bs.Finalize=function(b0){P.iter(function(b1){if(b1.$==0)b1.$0();},bB.ToArray(b0.$0));};bs.ConcatActions=function(b0){var b1,b2,b3,b4;b1=bi.ofSeqNonCopying(b0);b2=P.length(b1);return b2===0?bs.Const():b2===1?P.get(b1,0):(b3=p.max(p.map(function(b5){return b5.Duration;},b1)),(b4=P.map(function(b5){return bs.Prolong(b3,b5);},b1),bs.Def(b3,function(b5){P.iter(function(b6){b6.Compute(b5);},b4);})));};bs.List=function(b0){return b0.$0;};bs.Const=function(b0){return bs.Def(0,function(){return b0;});};bs.Def=function(b0,b1){return{Compute:b1,Duration:b0};};bs.Prolong=function(b0,b1){var b2,b3,b4;b2=b1.Compute;b3=b1.Duration;b4=bO.Create(function(){return b1.Compute(b1.Duration);});return{Compute:function(b5){return b5>=b3?b4.f():b2(b5);},Duration:b0};};bt.$cctor=function(){bt.$cctor=a.ignore;bt.BatchUpdatesEnabled=true;};bu=X.Updates=bV.Class({},null,bu);bu.Create=function(b0){var b1;b1=null;b1=bu.New(b0,null,function(){var b2;b2=b1.s;return b2===null?(b2=_.Copy(b1.c()),b1.s=b2,_.WhenObsoleteRun(b2,function(){b1.s=null;}),b2):b2;});return b1;};bu.New=function(b0,b1,b2){return new bu({c:b0,s:b1,v:b2});};bv.Updates=function(b0){return bi.MapTreeReduce(function(b1){return b1.NChanged();},_5.Const(),_5.Map2Unit,b0.DynNodes);};bv.AppendTree=function(b0,b1){var b2;return b0===null?b1:b1===null?b0:(b2=new _9({$:2,$0:b0,$1:b1}),(bv.SetFlags(b2,bv.Flags(b0)|bv.Flags(b1)),b2));};bv.EmptyAttr=function(){bC.$cctor();return bC.EmptyAttr;};bv.Insert=function(b0,b1){var b2,b3,b4;function b5(b6){if(!(b6===null))if(b6!=null&&b6.$==1)b2.push(b6.$0);else if(b6!=null&&b6.$==2){b5(b6.$0);b5(b6.$1);}else if(b6!=null&&b6.$==3)b6.$0(b0);else if(b6!=null&&b6.$==4)b3.push(b6.$0);}b2=[];b3=[];b5(b1);b4=b2.slice(0);return bx.New(b0,bv.Flags(b1),b4,b3.length===0?null:{$:1,$0:function(b6){p.iter(function(b7){b7(b6);},b3);}});};bv.HasExitAnim=function(b0){var b1;b1=2;return(b0.DynFlags&b1)===b1;};bv.GetExitAnim=function(b0){return bv.GetAnim(b0,function(b1,b2){return b1.NGetExitAnim(b2);});};bv.HasEnterAnim=function(b0){var b1;b1=1;return(b0.DynFlags&b1)===b1;};bv.GetEnterAnim=function(b0){return bv.GetAnim(b0,function(b1,b2){return b1.NGetEnterAnim(b2);});};bv.HasChangeAnim=function(b0){var b1;b1=4;return(b0.DynFlags&b1)===b1;};bv.GetChangeAnim=function(b0){return bv.GetAnim(b0,function(b1,b2){return b1.NGetChangeAnim(b2);});};bv.SetFlags=function(b0,b1){b0.flags=b1;};bv.Flags=function(b0){return b0!==null&&b0.hasOwnProperty("flags")?b0.flags:0;};bv.GetAnim=function(b0,b1){return bb.Concat(P.map(function(b2){return b1(b2,b0.DynElem);},b0.DynNodes));};bv.Sync=function(b0,b1){P.iter(function(b2){b2.NSync(b0);},b1.DynNodes);};bx.New=function(b0,b1,b2,b3){var b4;b4={DynElem:b0,DynFlags:b1,DynNodes:b2};bV.SetOptional(b4,"OnAfterRender",b3);return b4;};_.Obsolete=function(b0){var b1,b2,b3,b4,b5;b2=b0.s;if(b2==null||(b2!=null&&b2.$==2?(b1=b2.$1,false):b2!=null&&b2.$==3?(b1=b2.$1,false):true))void 0;else{b0.s=null;for(b3=0,b4=P.length(b1)-1;b3<=b4;b3++){b5=P.get(b1,b3);typeof b5=="object"?function(b6){_.Obsolete(b6);}(b5):b5();}}};_.New=function(b0){return{s:b0};};by.Int=function(){by.set_counter(by.counter()+1);return by.counter();};by.set_counter=function(b0){bJ.$cctor();bJ.counter=b0;};by.counter=function(){bJ.$cctor();return bJ.counter;};bz.$cctor=function(){bz.$cctor=a.ignore;bz.CubicInOut=bD.Custom(function(b0){var b1;b1=b0*b0;return 3*b1-2*(b1*b0);});bz.UseAnimations=true;};bA.Delay=function(b0){return function(b1){try{(b0(null))(b1);}catch(b2){b1.k({$:1,$0:b2});}};};bA.Bind=function(b0,b1){return bA.checkCancel(function(b2){b0(bE.New(function(b3){var b4;if(b3.$==0){b4=b3.$0;bA.scheduler().Fork(function(){try{(b1(b4))(b2);}catch(b5){b2.k({$:1,$0:b5});}});}else bA.scheduler().Fork(function(){b2.k(b3);});},b2.ct));});};bA.Zero=function(){bF.$cctor();return bF.Zero;};bA.Start=function(b0,b1){var b2,b3;b2=(b3=(bA.defCTS())[0],b1==null?b3:b1.$0);bA.scheduler().Fork(function(){if(!b2.c)b0(bE.New(function(b4){if(b4.$==1)bA.UncaughtAsyncError(b4.$0);},b2));});};bA.Return=function(b0){return function(b1){b1.k({$:0,$0:b0});};};bA.checkCancel=function(b0){return function(b1){if(b1.ct.c)bA.cancel(b1);else b0(b1);};};bA.defCTS=function(){bF.$cctor();return bF.defCTS;};bA.UncaughtAsyncError=function(b0){bT.log("WebSharper: Uncaught asynchronous exception",b0);};bA.FromContinuations=function(b0){return function(b1){var b2;function b3(b4){if(b2[0])o.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b2[0]=true;bA.scheduler().Fork(b4);}}b2=[false];b0(function(b4){b3(function(){b1.k({$:0,$0:b4});});},function(b4){b3(function(){b1.k({$:1,$0:b4});});},function(b4){b3(function(){b1.k({$:2,$0:b4});});});};};bA.cancel=function(b0){b0.k({$:2,$0:new bN.New(b0.ct)});};bA.scheduler=function(){bF.$cctor();return bF.scheduler;};bB.Append=function(b0,b1){return b0.$==0?b1:b1.$==0?b0:{$:2,$0:b0,$1:b1};};bB.ToArray=function(b0){var b1;function b2(b3){if(b3.$==1)b1.push(b3.$0);else if(b3.$==2){b2(b3.$0);b2(b3.$1);}else if(b3.$==3)P.iter(function(b4){b1.push(b4);},b3.$0);}b1=[];b2(b0);return b1.slice(0);};bB.Concat=function(b0){var b1;b1=bi.ofSeqNonCopying(b0);return bi.TreeReduce(bB.Empty(),bB.Append,b1);};bB.Empty=function(){bP.$cctor();return bP.Empty;};bC.$cctor=function(){bC.$cctor=a.ignore;bC.EmptyAttr=null;};bD=X.Easing=bV.Class({},k,bD);bD.Custom=function(b0){return new bD.New(b0);};bD.New=bV.Ctor(function(b0){k.New.call(this);this.transformTime=b0;},bD);bE.New=function(b0,b1){return{k:b0,ct:b1};};bF.$cctor=function(){bF.$cctor=a.ignore;bF.noneCT=bG.New(false,[]);bF.scheduler=new bK.New();bF.defCTS=[new bL.New()];bF.Zero=bA.Return();bF.GetCT=function(b0){b0.k({$:0,$0:b0.ct});};};bG.New=function(b0,b1){return{c:b0,r:b1};};bH.Filter=function(b0,b1){return new ba.New$2(P.filter(b0,bH.ToArray(b1)));};bH.Except=function(b0,b1){var b2;b2=new ba.New$2(bH.ToArray(b1));b2.ExceptWith(bH.ToArray(b0));return b2;};bH.ToArray=function(b0){var b1;b1=P.create(b0.get_Count(),void 0);b0.CopyTo(b1);return b1;};bH.Intersect=function(b0,b1){var b2;b2=new ba.New$2(bH.ToArray(b0));b2.IntersectWith(bH.ToArray(b1));return b2;};bI.concat=function(b0){var b1,b2;b1=[];for(var b3 in b0)b1.push.apply(b1,b0[b3]);return b1;};bJ.$cctor=function(){bJ.$cctor=a.ignore;bJ.counter=0;};bK=bA.Scheduler=bV.Class({Fork:function(b0){var b1;b1=this;this.robin.push(b0);this.idle?(this.idle=false,a.setTimeout(function(){b1.tick();},0)):void 0;},tick:function(){var b0,b1,b2;b1=this;b2=bZ.now();b0=true;while(b0)if(this.robin.length===0){this.idle=true;b0=false;}else{(this.robin.shift())();bZ.now()-b2>40?(a.setTimeout(function(){b1.tick();},0),b0=false):void 0;}}},k,bK);bK.New=bV.Ctor(function(){k.New.call(this);this.idle=true;this.robin=[];},bK);bL=i.CancellationTokenSource=bV.Class({},k,bL);bL.New=bV.Ctor(function(){k.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bL);bM.Children=function(b0,b1){var b2,b3,b4;if(b1!=null&&b1.$==1){b4=[];b2=b1.$0[0].nextSibling;while(b2!==b1.$0[1]){b4.push(b2);b2=b2.nextSibling;}return{$:0,$0:b4};}else return{$:0,$0:P.init(b0.childNodes.length,(b3=b0.childNodes,function(b5){return b3[b5];}))};};bM.Except=function(b0,b1){var b2;b2=b0.$0;return{$:0,$0:P.filter(function(b3){return P.forall(function(b4){return!(b3===b4);},b2);},b1.$0)};};bM.Iter=function(b0,b1){P.iter(b0,b1.$0);};bM.DocChildren=function(b0){var b1;function b2(b3){if(b3!=null&&b3.$==2)b2(b3.$0.Current);else if(b3!=null&&b3.$==1)b1.push(b3.$0.El);else if(b3==null);else if(b3!=null&&b3.$==5)b1.push(b3.$0);else if(b3!=null&&b3.$==4)b1.push(b3.$0.Text);else if(b3!=null&&b3.$==6)P.iter(function(b4){if(b4==null||b4.constructor===_4)b2(b4);else b1.push(b4);},b3.$0.Els);else{b2(b3.$0);b2(b3.$1);}}b1=[];b2(b0.Children);return{$:0,$0:bi.ofSeqNonCopying(b1)};};bN=i.OperationCanceledException=bV.Class({},bf,bN);bN.New=bV.Ctor(function(b0){bN.New$1.call(this,"The operation was canceled.",null,b0);},bN);bN.New$1=bV.Ctor(function(b0,b1,b2){this.message=b0;this.inner=b1;_4.setPrototypeOf(this,bN.prototype);this.ct=b2;},bN);bO.Create=function(b0){return bR.New(false,b0,bO.forceLazy);};bO.forceLazy=function(){var b0;b0=this.v();this.c=true;this.v=b0;this.f=bO.cachedLazy;return b0;};bO.cachedLazy=function(){return this.v;};bP.$cctor=function(){bP.$cctor=a.ignore;bP.Empty={$:0};};bR.New=function(b0,b1,b2){return{c:b0,v:b1,f:b2};};bS.Clear=function(b0){b0.splice(0,P.length(b0));};bV.OnLoad(function(){d.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

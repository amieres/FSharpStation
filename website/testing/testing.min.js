function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=b.LibraryJS=b.LibraryJS||{};g=f.WsTranslatorLoader=f.WsTranslatorLoader||{};h=g.UI=g.UI||{};i=a.EventTarget;j=a.Node;k=d.JavaScript=d.JavaScript||{};l=k.JS=k.JS||{};m=d.UI=d.UI||{};n=m.View=m.View||{};o=a.WsTranslatorLoader_GeneratedPrintf=a.WsTranslatorLoader_GeneratedPrintf||{};p=a.GeneratedPrintf=a.GeneratedPrintf||{};q=d.Obj=d.Obj||{};r=m.Var=m.Var||{};s=g.WasmLoad=g.WasmLoad||{};t=g.WWorker=g.WWorker||{};u=d.Remoting=d.Remoting||{};v=u.AjaxRemotingProvider=u.AjaxRemotingProvider||{};w=d.Utils=d.Utils||{};x=m.HtmlModule=m.HtmlModule||{};y=x.attr=x.attr||{};z=m.Client=m.Client||{};A=z.Templates=z.Templates||{};B=m.Doc=m.Doc||{};C=k.Pervasives=k.Pervasives||{};D=a.WindowOrWorkerGlobalScope;E=m.Snap=m.Snap||{};F=a.StartupCode$WsTranslatorLoader$WsTranslatorLoader=a.StartupCode$WsTranslatorLoader$WsTranslatorLoader||{};G=g.WasmStatus=g.WasmStatus||{};H=g.Remoting=g.Remoting||{};I=H.IMessagingO=H.IMessagingO||{};J=d.Seq=d.Seq||{};K=d.Arrays=d.Arrays||{};L=d.List=d.List||{};M=L.T=L.T||{};N=d.Unchecked=d.Unchecked||{};O=d.Strings=d.Strings||{};P=m.AttrProxy=m.AttrProxy||{};Q=d.Collections=d.Collections||{};R=Q.Dictionary=Q.Dictionary||{};S=m.Docs=m.Docs||{};T=m.DomUtility=m.DomUtility||{};U=b.Library=b.Library||{};V=U.String=U.String||{};W=d.Slice=d.Slice||{};X=U.ParseO=U.ParseO||{};Y=d.Numeric=d.Numeric||{};Z=a.System=a.System||{};_0=Z.Guid=Z.Guid||{};_1=m.Var$1=m.Var$1||{};_2=a.Event;_3=H.ReturnQueue=H.ReturnQueue||{};_4=H.CustomXhrProvider=H.CustomXhrProvider||{};_5=d.Concurrency=d.Concurrency||{};_6=s.Require=s.Require||{};_7=b.WsTranslator=b.WsTranslator||{};_8=f.Pojo=f.Pojo||{};_9=a.XMLHttpRequestEventTarget;_=a.ArrayBufferView;$=m.AttrModule=m.AttrModule||{};ba=a.Object;bb=d.Enumerator=d.Enumerator||{};bc=bb.T=bb.T||{};bd=m.Array=m.Array||{};be=m.Attrs=m.Attrs||{};bf=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bg=Q.HashSet=Q.HashSet||{};bh=m.An=m.An||{};bi=z.Settings=z.Settings||{};bj=m.Abbrev=m.Abbrev||{};bk=bj.Mailbox=bj.Mailbox||{};bl=d.DateUtil=d.DateUtil||{};bm=m.ConcreteVar=m.ConcreteVar||{};bn=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};bo=Q.DictionaryUtil=Q.DictionaryUtil||{};bp=m.Elt=m.Elt||{};bq=_5.AsyncBody=_5.AsyncBody||{};br=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bs=a.StartupCode$WsTranslator$WsTranslator=a.StartupCode$WsTranslator$WsTranslator||{};bt=_5.CT=_5.CT||{};bu=A.Prepare=A.Prepare||{};bv=Q.KeyCollection=Q.KeyCollection||{};bw=m.DocElemNode=m.DocElemNode||{};bx=a.CharacterData;by=z.Docs=z.Docs||{};bz=by.RunState=by.RunState||{};bA=by.NodeSet=by.NodeSet||{};bB=m.Anims=m.Anims||{};bC=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bD=a.Error;bE=d.OperationCanceledException=d.OperationCanceledException||{};bF=d.Json=d.Json||{};bG=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bH=bj.Fresh=bj.Fresh||{};bI=u.XhrProvider=u.XhrProvider||{};bJ=m.Updates=m.Updates||{};bK=_5.Scheduler=_5.Scheduler||{};bL=d.CancellationTokenSource=d.CancellationTokenSource||{};bM=z.Attrs=z.Attrs||{};bN=bM.Dyn=bM.Dyn||{};bO=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bP=m.AppendList=m.AppendList||{};bQ=d.Queue=d.Queue||{};bR=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bS=m.DynamicAttrNode=m.DynamicAttrNode||{};bT=m.Easing=m.Easing||{};bU=bj.HashSet=bj.HashSet||{};bV=Q.HashSetUtil=Q.HashSetUtil||{};bW=d.FormatException=d.FormatException||{};bX=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bY=by.DomNodes=by.DomNodes||{};bZ=d.Lazy=d.Lazy||{};b0=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b1=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};b2=b1.LazyRecord=b1.LazyRecord||{};b3=a.IntelliFactory;b4=b3&&b3.Runtime;b5=a.JSON;b6=a.console;b7=a.jQuery;b8=a.Date;c.main=function(){var b9,b_;b9=h.mainDoc();b_=self.document.body;A.LoadLocalTemplates("");B.Run(b_,b9);};e.FailWith=function(b9){throw new bD(b9);};e.KeyValue=function(b9){return[b9.K,b9.V];};h.mainDoc=function(){var b9,b_;return B.Element("div",[],[B.Element("h1",[],[B.TextNode("HELLO WASM!")]),B.Element("h2",[],[B.TextView(n.Map(function(b$){return(function(ca){return function(cb){return ca(o.p(cb));};}(a.id))(b$);},g.wasmStatusV().get_View()))]),B.Element("span",[],[B.Button("Load as Worker",[],function(){s.loadWasmInWorker(h.debugV().Get(),h.optsV().Get());}),B.Button("Load in Main thread",[],function(){s.loadInThisThread(h.debugV().Get(),h.optsV().Get());}),B.Button("Terminate Worker",[],function(){t.terminate();}),B.TextNode(" Debug:"),B.CheckBox([],h.debugV())]),B.Element("div",[],[B.InputArea([],h.codeV()),B.InputArea([],h.optsV())]),B.Element("span",[],[B.Button("Check",[],function(){h.callWasmA(function(b$){return h.parseAndCheckProject(b$[0],b$[1],b$[2]);},h.getParms());}),B.Button("Translate",[],function(){h.clean();g.printfn(function(b$){return b$("Initiating translation:");});h.callWasmA(function(b$){return h.translateToJs(b$[0],b$[1],b$[2]);},h.getParms());}),B.Button("Dir",[],function(){h.callWasmA(function(b$){return(new v.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.dirRpc:-1181784350",[b$]);},"/");}),B.Button("Clean",[],function(){h.clean();})]),h.showMessages("Fsc Messages",function(b$){return function(ca){return b$(w.prettyPrint(ca));};}(a.id),h.fsErrsV().get_View()),h.showMessages("Ws  Errors",(b9=function(b$){return function(ca){return b$("("+o.p$1(ca[0])+", "+o.p$2(ca[1])+")");};}(a.id),function(b$){return b9([b$[0],b$[1]]);}),h.wsErrsV().get_View()),h.showMessages("Ws  Warnings",(b_=function(b$){return function(ca){return b$("("+o.p$1(ca[0])+", "+o.p$3(ca[1])+")");};}(a.id),function(b$){return b_([b$[0],b$[1]]);}),h.wsWrnsV().get_View()),B.Element("div",[P.Create("style","font-family: monospace; white-space:pre")],[B.TextView(h.detailsV().get_View())])]);};h.debugV=function(){F.$cctor();return F.debugV;};h.optsV=function(){F.$cctor();return F.optsV;};h.codeV=function(){F.$cctor();return F.codeV;};h.callWasmA=function(b9,b_){var b$;_5.Start((b$=null,_5.Delay(function(){return _5.Combine(g.wasmStatusV().Get().$===0?(s.loadWasmInWorker(h.debugV().Get(),h.optsV().Get()),_5.Zero()):_5.Zero(),_5.Delay(function(){return _5.Bind(_5.Sleep(50),function(){return _5.Combine(_5.While(function(){var ca;ca=g.wasmStatusV().Get();return ca.$==2?false:ca.$!=4;},_5.Delay(function(){g.printfn(function(ca){return ca("Waiting for WASM to load...");});return _5.Bind(_5.Sleep(2000),function(){return _5.Return(null);});})),_5.Delay(function(){return _5.Bind(b9(b_),function(){return _5.Return(null);});}));});}));})),null);};h.parseAndCheckProject=function(b9,b_,b$){var ca;ca=null;return _5.Delay(function(){return _5.Bind((new v.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.parseAndCheckProjectRpc:-1474163089",[b9,b_,b$]),function(cb){var cc;h.fsErrsV().Set(K.ofSeq(cb[0]));h.wsErrsV().Set([]);h.wsWrnsV().Set([]);cc=(function(cd){return function(ce){return cd("("+w.prettyPrint(ce[0])+", "+w.printArray(w.prettyPrint,ce[1])+")");};}(a.id))([cb[2],cb[1]]);h.detailsV().Set(cc);return _5.Zero();});});};h.getParms=function(){return["WasmTest",K.filter(function(b9){return O.Trim(b9)!=="";},O.SplitChars("fsc.exe\n"+h.optsV().Get(),["\n"],0)),h.codeV().Get()];};h.clean=function(){h.detailsV().Set("");};h.translateToJs=function(b9,b_,b$){var ca;ca=null;return _5.Delay(function(){return _5.Bind((new v.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.translateFsToJsRpc:-435757094",[b9,b_,b$]),function(cb){var cc,cd;cc=cb[1];h.fsErrsV().Set(cb[0]);return cc==null?(h.clean(),h.wsErrsV().Set([]),h.wsWrnsV().Set([]),_5.Zero()):(cd=cc.$0[0],(h.detailsV().Set(cd==null?"No translation":cd.$0),h.wsErrsV().Set(K.ofSeq(cc.$0[1])),h.wsWrnsV().Set(K.ofSeq(cc.$0[2])),_5.Zero()));});});};h.showMessages=function(b9,b_,b$){return B.BindView(function(ca){return K.length(ca)===0?B.get_Empty():B.Element("div",[],[B.TextNode(b9),B.Element("ol",[],[B.Concat(J.map(function(cb){return B.Element("li",[],[B.TextNode(b_(cb))]);},ca))])]);},b$);};h.fsErrsV=function(){F.$cctor();return F.fsErrsV;};h.wsErrsV=function(){F.$cctor();return F.wsErrsV;};h.wsWrnsV=function(){F.$cctor();return F.wsWrnsV;};h.detailsV=function(){F.$cctor();return F.detailsV;};l.GetFields=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push([ca,b9[ca]]);return b_;};l.GetFieldValues=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push(b9[ca]);return b_;};n.Map=function(b9,b_){return n.CreateLazy(function(){return E.Map(b9,b_());});};n.CreateLazy=function(b9){var b_;b_={c:null,o:b9};return function(){var b$,ca;b$=b_.c;return b$===null?(b$=b_.o(),b_.c=b$,(ca=b$.s,ca!=null&&ca.$==0)?b_.o=null:E.WhenObsoleteRun(b$,function(){b_.c=null;}),b$):b$;};};n.Const=function(b9){var b_;b_=E.New({$:0,$0:b9});return function(){return b_;};};n.Sink=function(b9,b_){function b$(){E.WhenRun(b_(),b9,function(){_5.scheduler().Fork(b$);});}_5.scheduler().Fork(b$);};n.Map2Unit=function(b9,b_){return n.CreateLazy(function(){return E.Map2Unit(b9(),b_());});};n.Bind=function(b9,b_){return n.Join(n.Map(b9,b_));};n.Join=function(b9){return n.CreateLazy(function(){return E.Join(b9());});};o.p=function(b9){return b9.$==4?"WasmWorkerLoaded":b9.$==3?"WasmWorkerLoading":b9.$==2?"WasmLoaded":b9.$==1?"WasmLoading":"WasmNotLoaded";};o.p$1=function(b9){return b9==null?"null":"Some "+p.p(b9.$0);};o.p$2=function(b9){return b9.$==6?"FieldNotFound ("+w.prettyPrint(b9.$0)+", "+w.prettyPrint(b9.$1)+")":b9.$==5?"ConstructorNotFound ("+w.prettyPrint(b9.$0)+", "+w.prettyPrint(b9.$1)+", "+w.printList(w.prettyPrint,b9.$2)+")":b9.$==4?"MethodNameNotFound ("+w.prettyPrint(b9.$0)+", "+w.prettyPrint(b9.$1)+", "+w.printList(w.prettyPrint,b9.$2)+")":b9.$==3?"MethodNotFound ("+w.prettyPrint(b9.$0)+", "+w.prettyPrint(b9.$1)+", "+w.printList(w.prettyPrint,b9.$2)+")":b9.$==2?"TypeNotFound "+w.prettyPrint(b9.$0):b9.$==1?"NameConflict ("+w.prettyPrint(b9.$0)+", "+w.prettyPrint(b9.$1)+")":"SourceError "+w.prettyPrint(b9.$0);};o.p$3=function(b9){return b9.$==1?"PublicProxy "+w.prettyPrint(b9.$0):"SourceWarning "+w.prettyPrint(b9.$0);};p.p=function(b9){return"{"+("FileName = "+w.prettyPrint(b9.FileName))+"; "+("Start = "+("("+w.prettyPrint(b9.Start[0])+", "+w.prettyPrint(b9.Start[1])+")"))+"; "+("End = "+("("+w.prettyPrint(b9.End[0])+", "+w.prettyPrint(b9.End[1])+")"))+"}";};q=d.Obj=b4.Class({Equals:function(b9){return this===b9;},GetHashCode:function(){return -1;}},null,q);q.New=b4.Ctor(function(){},q);r=m.Var=b4.Class({},q,r);r.New=b4.Ctor(function(){q.New.call(this);},r);g.wasmStatusV=function(){F.$cctor();return F.wasmStatusV;};g.printfn=function(b9){return b9(H.messaging().wprintfn);};s.loadWasmInWorker=function(b9,b_){var b$;if(!self.document)g.printfn(function(ca){return ca("Already in a worker cannot load Wasm in another worker");});else if(g.wasmStatusV().Get().$!==0)(g.printfn(function(ca){return function(cb){return ca("Wasm is already "+o.p(cb));};}))(g.wasmStatusV().Get());else{g.wasmStatusV().Set(G.WasmLoading);g.printfn(function(ca){return ca("Initiating WebWorker");});self.Intellifactory.Runtime.ScriptPath=function(ca,cb){return"/WASM/publish/"+cb;};b$=new a.Worker(b4.ScriptPath("WsTranslatorLoader","WsTranslatorLoader.worker.js"));b$.postMessage({$:2,$0:b9,$1:b_});b$.onmessage=t.fromWorker;t.set_workerO({$:1,$0:b$});H.set_messaging(I.New(function(ca){return function(cb){return b$.postMessage({$:0,$0:ca,$1:cb});};},function(ca){H.returnValue0(ca[0],ca[1]);},function(ca){H.returnExn0(ca[0],ca[1]);},H.messaging().wprintfn));H.installProvider();}};s.loadInThisThread=function(b9,b_){var b$,ca,cb;ca=!self.document;cb=g.wasmStatusV().Get();switch(ca?cb.$==3?1:cb.$==1?2:cb.$==2?4:cb.$==0?6:0:cb.$==1?1:cb.$==3?3:cb.$==4?5:cb.$==0?6:0){case 0:null;break;case 1:g.printfn(function(cc){return cc("WASM is loading");});break;case 2:g.printfn(function(cc){return cc("WASM is loading in the main thread");});break;case 3:g.printfn(function(cc){return cc("WASM is loading in a WebWorker");});break;case 4:g.printfn(function(cc){return cc("WASM is loaded in the main thread");});break;case 5:g.printfn(function(cc){return cc("WASM is loaded in a WebWorker");});break;case 6:_5.Start(_5.FromContinuations(function(cc){var cd;function ce(){s.bindWasm();g.printfn(function(cg){return cg("WASM Initialized!");});g.wasmStatusV().Set(!self.document?G.WasmWorkerLoaded:G.WasmLoaded);cc();}function cf(){var cg,ch,ci,cj,ck,cl,cm;cg=(ch=self.Module.cwrap("mono_wasm_setenv","void",["string","string"]),function(cn){ch(cn[0],cn[1]);});b9?(cg(["MONO_LOG_LEVEL","debug"]),cg(["MONO_LOG_MASK","all"])):void 0;ci=self.config;cj=ci.vfs_prefix;ck=ci.deploy_prefix;cl=ci.enable_debugging;cm=ci.file_list;self.MONO.mono_load_runtime_and_bcl(cj,ck,cl,cm,ce);}return _5.Start((cd=null,_5.Delay(function(){g.printfn(function(cg){return cg("Loading WASM. Hold on, this will take a while...");});g.wasmStatusV().Set(!self.document?G.WasmWorkerLoading:G.WasmLoading);return _5.Bind(_5.Sleep(50),function(){return _5.Combine(!(!self.document)?(H.installProvider(),_5.Zero()):_5.Zero(),_5.Delay(function(){return _5.Bind(s.requireJsA([s.rootPath()+"mono-config.js"]),function(){var cg,ch;self.Module=self.Module||{};self.Module.onRuntimeInitialized=cf;cg=g.printfn(function(ci){return function(cj){return ci(w.toSafe(cj));};});self.Module.print=cg;ch=g.printfn(function(ci){return function(cj){return ci(w.toSafe(cj));};});self.Module.printErr=ch;self.Module.preRun=[function(){s.preloadFiles(s.filesToPreload(b_));}];return _5.Bind(s.requireJsA([s.rootPath()+"dotnet.js"]),function(){return _5.Zero();});});}));});})),null);}),null);break;}};s.requireJsA=function(b9){return _5.FromContinuations(function(b_){return a.requirejs(K.ofSeq(b9),b_);});};s.rootPath=function(){F.$cctor();return F.rootPath;};s.filesToPreload=function(b9){return L.ofSeq(J.delay(function(){return J.append(_7.dlls(),J.delay(function(){return K.choose(function(b_){var b$;b$=V.StartsWith("-r:",b_);return b$!=null&&b$.$==1?{$:1,$0:b$.$0}:null;},O.SplitChars(b9,["\n"],0));}));}));};s.preloadFiles=function(b9){var b_,b$,ca,cb,cc,cd;self.Browser=_8.newPojo([["init",a.ignore],["asyncLoad",function(ce,cf,cg){var ch;ch=new self.XMLHttpRequest();ch.open("GET",ce,true);ch.responseType="arraybuffer";ch.onload=function(){return ch.status===200||ch.status===0&&!N.Equals(ch.response,null)?cf(new a.Uint8Array(ch.response)):cg();};ch.onerror=function(){return cg();};return ch.send(null);}]]);self.Module=self.Module||{};self.Module.preloadPlugins=[];b_=J.cache(J.distinct(J.map(function(ce){return[O.concat("/",W.array(ce,null,{$:1,$0:K.length(ce)-2})),J.last(ce)];},J.map(function(ce){return K.map(O.Trim,ce);},J.map(function(ce){return O.SplitChars(O.Replace(ce,"\\","/"),["/"],0);},b9)))));J.iter(function(ce){try{self.FS.mkdir(ce);}catch(cf){null;}},J.distinct(J.map(function(ce){return ce[0];},b_)));b$=bb.Get(b_);try{while(b$.MoveNext()){ca=b$.Current();cb=ca[1];cc=ca[0];cd=O.Replace(s.rootPath()+cc+"/"+cb,"//","/");(g.printfn(function(ce){return function(cf){return ce("Preloading "+w.toSafe(cf));};}))(cd);self.FS.createPreloadedFile(cc,cb,cd,1,a.$op21);}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};s.bindWasm=function(){J.iter(function(b9){s.bindStaticMethod(b9[0],b9[1],b9[2]);},L.ofArray([["WsTranslator","FsRoot.WsTranslator","runRpc"]]));};s.bindStaticMethod=function(b9,b_,b$){var ca;self[((((b4.Curried(function(cb,cc,cd,ce){return cb("WASM_"+w.toSafe(cc)+"_"+w.toSafe(cd)+"_"+w.toSafe(ce));},4))(a.id))(b9))(O.Replace(b_,".","_")))(b$)]=(ca=((((b4.Curried(function(cb,cc,cd,ce){return cb("["+w.toSafe(cc)+"]"+w.toSafe(cd)+":"+w.toSafe(ce));},4))(a.id))(b9))(b_))(b$),self.Module.mono_bind_static_method(ca));};t.terminate=function(){var b9;if(b9=t.workerO(),b9!=null&&b9.$==1){t.workerO().$0.terminate();t.set_workerO(null);g.printfn(function(b_){return b_("Worker terminated!");});g.wasmStatusV().Set(G.WasmNotLoaded);}else g.printfn(function(b_){return b_("Worker is not present");});};t.fromWorker=function(b9){var b_,b$;b_=b9.data;b_.$==1?H.returnExn0(b_.$0,b_.$1):b_.$==2?(g.printfn(function(ca){return function(cb){return ca(w.toSafe(cb));};}))(b_.$0):b_.$==3?(b$=b_.$0,!N.Equals(g.wasmStatusV().Get(),b$)?g.wasmStatusV().Set(b$):void 0):H.returnValue0(b_.$0,b_.$1);};t.set_workerO=function(b9){F.$cctor();F.workerO=b9;};t.workerO=function(){F.$cctor();return F.workerO;};v=u.AjaxRemotingProvider=b4.Class({AsyncBase:function(b9,b_){var b$,ca;b$=this;ca=null;return _5.Delay(function(){var cb,cc;cb=u.makeHeaders(b9);cc=u.makePayload(b_);return _5.Bind(_5.GetCT(),function(cd){return _5.FromContinuations(function(ce,cf,cg){var ch,ci,cj;function ck(cl){return ch[0]?(ch[0]=false,cg(new bE.New(cd))):null;}ch=[true];ci=_5.Register(cd,function(){ck();});cj=b$.get_EndPoint();return u.AjaxProvider().Async(cj,cb,cc,function(cl){if(ch[0]){ch[0]=false;ci.Dispose();ce(bF.Activate(b5.parse(cl)));}},function(cl){if(ch[0]){ch[0]=false;ci.Dispose();cf(cl);}});});});});},get_EndPoint:function(){return u.EndPoint();},Async:function(b9,b_){return this.AsyncBase(b9,b_);}},q,v);v.New=b4.Ctor(function(){q.New.call(this);},v);w.prettyPrint=function(b9){var b_,b$;function ca(cb,cc){return cb+" = "+w.prettyPrint(cc);}return b9===null?"null":(b_=typeof b9,b_=="string"?"\""+b9+"\"":b_=="object"?b9 instanceof a.Array?"[|"+O.concat("; ",K.map(w.prettyPrint,b9))+"|]":(b$=a.String(b9),b$==="[object Object]"?"{"+O.concat("; ",K.map(function(cb){return ca(cb[0],cb[1]);},l.GetFields(b9)))+"}":b$):a.String(b9));};w.toSafe=function(b9){return b9==null?"":b9;};w.printArray=function(b9,b_){return b_===null?"null":"[|"+O.concat("; ",K.map(b9,b_))+"|]";};w.printList=function(b9,b_){return"["+O.concat("; ",J.map(b9,b_))+"]";};y=x.attr=b4.Class({},q,y);A.LoadLocalTemplates=function(b9){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(b9,A.LoadedTemplateFile(""));};A.LocalTemplatesLoaded=function(){bf.$cctor();return bf.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(b9){bf.$cctor();bf.LocalTemplatesLoaded=b9;};A.LoadNestedTemplates=function(b9,b_){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;function b$(co){var cp,cq;if(!ca.ContainsKey(co)){cp=(cq=null,[cb.TryGetValue(co,{get:function(){return cq;},set:function(cr){cq=cr;}}),cq]);cp[0]?(cn.Add(co),cb.Remove(co),A.PrepareTemplateStrict(b_,{$:1,$0:co},cp[1][0],{$:1,$0:cp[1][1]},{$:1,$0:b$})):b6.warn(cn.Contains(co)?"Encountered loop when instantiating "+co:"Local template does not exist: "+co);}}ca=A.LoadedTemplateFile(b_);cb=new R.New$5();cc=b9.querySelectorAll("[ws-template]");for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc[cd];cg=cf.getAttribute("ws-template").toLowerCase();cf.removeAttribute("ws-template");cb.set_Item(cg,[[cf],A.FakeRootSingle(cf)]);}ch=b9.querySelectorAll("[ws-children-template]");for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];cl=ck.getAttribute("ws-children-template").toLowerCase();ck.removeAttribute("ws-children-template");cb.set_Item(cl,(cm=T.ChildrenArray(ck),[cm,A.FakeRoot(cm)]));}cn=new bg.New$3();while(cb.count>0)b$(J.head(cb.get_Keys()));};A.LoadedTemplates=function(){bf.$cctor();return bf.LoadedTemplates;};A.LoadedTemplateFile=function(b9){var b_,b$,ca;b_=(b$=null,[A.LoadedTemplates().TryGetValue(b9,{get:function(){return b$;},set:function(cb){b$=cb;}}),b$]);return b_[0]?b_[1]:(ca=new R.New$5(),(A.LoadedTemplates().set_Item(b9,ca),ca));};A.FakeRootSingle=function(b9){var b_,b$,ca;b9.removeAttribute("ws-template");b_=b9.getAttribute("ws-replace");b_===null?void 0:(b9.removeAttribute("ws-replace"),b$=b9.parentNode,N.Equals(b$,null)?void 0:(ca=self.document.createElement(b9.tagName),ca.setAttribute("ws-replace",b_),b$.replaceChild(ca,b9)));return A.FakeRoot([b9]);};A.FakeRoot=function(b9){var b_,b$,ca;b_=self.document.createElement("div");for(b$=0,ca=b9.length-1;b$<=ca;b$++)b_.appendChild(K.get(b9,b$));return b_;};A.PrepareTemplateStrict=function(b9,b_,b$,ca,cb){var cc,cd;function ce(cj,ck){var cl,cm,cn,co,cp,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL;function cq(cM){}while(true)switch(cj){case 0:if(ck!==null){cl=ck.nextSibling;if(N.Equals(ck.nodeType,j.TEXT_NODE))bu.convertTextNode(ck);else if(N.Equals(ck.nodeType,j.ELEMENT_NODE))cg(ck);ck=cl;}else return null;break;case 1:cr=W.string(ck.nodeName,{$:1,$0:3},null).toLowerCase();cs=(cm=cr.indexOf("."),cm===-1?[b9,cr]:[W.string(cr,null,{$:1,$0:cm-1}),W.string(cr,{$:1,$0:cm+1},null)]);ct=cs[1];cu=cs[0];if(cu!==""&&!A.LoadedTemplates().ContainsKey(cu))return bu.failNotLoaded(ct);else{if(cu===""&&cb!=null)cb.$0(ct);cv=A.LoadedTemplates().get_Item(cu);if(!cv.ContainsKey(ct))return bu.failNotLoaded(ct);else{cw=cv.get_Item(ct);cx=cw.cloneNode(true);cy=new bg.New$3();cz=new R.New$5();cA=ck.attributes;for(cB=0,cC=cA.length-1;cB<=cC;cB++){cD=cA.item(cB).name.toLowerCase();cz.set_Item(cD,(cE=cA.item(cB).nodeValue,cE===""?cD:cE.toLowerCase()));!cy.Add(cD)?b6.warn("Hole mapped twice",cD):void 0;}for(cF=0,cG=ck.childNodes.length-1;cF<=cG;cF++){cH=ck.childNodes[cF];N.Equals(cH.nodeType,j.ELEMENT_NODE)?!cy.Add(cH.nodeName.toLowerCase())?b6.warn("Hole filled twice",ct):void 0:void 0;}cI=ck.childNodes.length===1&&N.Equals(ck.firstChild.nodeType,j.TEXT_NODE);if(cI){co=bu.fillTextHole(cx,ck.firstChild.textContent,ct);((function(cM){return function(cN){if(cN!=null)cM(cN.$0);};}((cp=function(cM){return function(cN){return cM.Add(cN);};}(cy),function(cM){return cq(cp(cM));})))(co));}bu.removeHolesExcept(cx,cy);if(!cI){for(cJ=0,cK=ck.childNodes.length-1;cJ<=cK;cJ++){cL=ck.childNodes[cJ];N.Equals(cL.nodeType,j.ELEMENT_NODE)?cL.hasAttributes()?bu.fillInstanceAttrs(cx,cL):cf(cx,cL):void 0;}}bu.mapHoles(cx,cz);bu.fill(cx,ck.parentNode,ck);ck.parentNode.removeChild(ck);return;}}break;}}function cf(cj,ck){var cl,cn,co;function cm(cp,cq){var cr,cs,ct;if(cn==="title"&&ck.hasChildNodes()){cr=b7.parseHTML(ck.textContent);ck.removeChild(ck.firstChild);for(cs=0,ct=cr.length-1;cs<=ct;cs++)ck.appendChild(K.get(cr,cs));}else null;cg(ck);return bu.fill(ck,cp,cq);}cn=ck.nodeName.toLowerCase();T.IterSelector(cj,"[ws-attr-holes]",function(cp){var cq,cr,cs,ct,cu;cq=O.SplitChars(cp.getAttribute("ws-attr-holes"),[" "],1);for(cr=0,cs=cq.length-1;cr<=cs;cr++){ct=K.get(cq,cr);cp.setAttribute(ct,(cu=new a.RegExp("\\${"+cn+"}","ig"),cp.getAttribute(ct).replace(cu,ck.textContent)));}});co=cj.querySelector("[ws-hole="+cn+"]");if(N.Equals(co,null)){cl=cj.querySelector("[ws-replace="+cn+"]");return N.Equals(cl,null)?null:(cm(cl.parentNode,cl),void cl.parentNode.removeChild(cl));}else{while(co.hasChildNodes())co.removeChild(co.lastChild);co.removeAttribute("ws-hole");return cm(co,null);}}function cg(cj){if(O.StartsWith(cj.nodeName.toLowerCase(),"ws-"))ci(cj);else{bu.convertAttrs(cj);ch(cj.firstChild);}}function ch(cj){return ce(0,cj);}function ci(cj){return ce(1,cj);}cc=ca==null?A.FakeRoot(b$):ca.$0;cd=(b_==null?"":b_.$0).toLowerCase();A.LoadedTemplateFile(b9).set_Item(cd,cc);K.length(b$)>0?(function(cj){var ck,cl,cm,cn;while(true){ck=cj.querySelector("[ws-template]");if(N.Equals(ck,null)){cl=cj.querySelector("[ws-children-template]");if(N.Equals(cl,null))return null;else{cm=cl.getAttribute("ws-children-template");cl.removeAttribute("ws-children-template");A.PrepareTemplateStrict(b9,{$:1,$0:cm},T.ChildrenArray(cl),null,null);cj=cj;}}else{cn=ck.getAttribute("ws-template");(A.PrepareSingleTemplate(b9,{$:1,$0:cn},ck))(null);cj=cj;}}}(cc),ch(K.get(b$,0))):void 0;};A.PrepareSingleTemplate=function(b9,b_,b$){var ca,cb,cc;ca=A.FakeRootSingle(b$);cb=[b$];cc={$:1,$0:ca};return function(cd){A.PrepareTemplateStrict(b9,b_,cb,cc,cd);};};A.TextHoleRE=function(){bf.$cctor();return bf.TextHoleRE;};B=m.Doc=b4.Class({},q,B);B.Run=function(b9,b_){S.LinkElement(b9,b_.docNode);B.RunInPlace(false,b9,b_);};B.TextNode=function(b9){return B.Mk({$:5,$0:T.CreateText(b9)},n.Const());};B.Button=function(b9,b_,b$){var ca;ca=P.Concat(b_);return bp.New(B.Clickable("button",b$),ca,B.TextNode(b9));};B.CheckBox=function(b9,b_){return B.InputInternal("input",function(){return J.append(b9,[P.Create("type","checkbox"),$.Checked(b_)]);});};B.InputArea=function(b9,b_){return B.InputInternal("textarea",function(){return J.append(b9,[$.Value(b_)]);});};B.get_Empty=function(){return B.Mk(null,n.Const());};B.Concat=function(b9){var b_;b_=bd.ofSeqNonCopying(b9);return bd.TreeReduce(B.get_Empty(),B.Append,b_);};B.TextView=function(b9){var b_;b_=S.CreateTextNode();return B.Mk({$:4,$0:b_},n.Map(function(b$){S.UpdateTextNode(b_,b$);},b9));};B.RunInPlace=function(b9,b_,b$){var ca;ca=S.CreateRunState(b_,b$.docNode);n.Sink(bh.get_UseAnimations()||bi.BatchUpdatesEnabled()?bk.StartProcessor(S.PerformAnimatedUpdate(b9,ca,b$.docNode)):function(){S.PerformSyncUpdate(b9,ca,b$.docNode);},b$.updates);};B.Element=function(b9,b_,b$){var ca,cb;ca=P.Concat(b_);cb=B.Concat(b$);return bp.New(T.CreateElement(b9),ca,cb);};B.Mk=function(b9,b_){return new B.New(b9,b_);};B.Clickable=function(b9,b_){var b$;b$=T.CreateElement(b9);b$.addEventListener("click",function(ca){ca.preventDefault();return b_();},false);return b$;};B.InputInternal=function(b9,b_){var b$;b$=T.CreateElement(b9);return bp.New(b$,P.Concat(b_(b$)),B.get_Empty());};B.BindView=function(b9,b_){return B.EmbedView(n.Map(b9,b_));};B.Append=function(b9,b_){return B.Mk({$:0,$0:b9.docNode,$1:b_.docNode},n.Map2Unit(b9.updates,b_.updates));};B.EmbedView=function(b9){var b_;b_=S.CreateEmbedNode();return B.Mk({$:2,$0:b_},n.Map(a.ignore,n.Bind(function(b$){S.UpdateEmbedNode(b_,b$.docNode);return b$.updates;},b9)));};B.New=b4.Ctor(function(b9,b_){q.New.call(this);this.docNode=b9;this.updates=b_;},B);C.NewFromSeq=function(b9){var b_,b$,ca;b_={};b$=bb.Get(b9);try{while(b$.MoveNext()){ca=b$.Current();b_[ca[0]]=ca[1];}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}return b_;};E.Map=function(b9,b_){var b$,ca;b$=b_.s;return b$!=null&&b$.$==0?E.New({$:0,$0:b9(b$.$0)}):(ca=E.New({$:3,$0:[],$1:[]}),(E.When(b_,function(cb){E.MarkDone(ca,b_,b9(cb));},ca),ca));};E.WhenObsoleteRun=function(b9,b_){var b$;b$=b9.s;b$==null?b_():b$!=null&&b$.$==2?b$.$1.push(b_):b$!=null&&b$.$==3?b$.$1.push(b_):void 0;};E.When=function(b9,b_,b$){var ca;ca=b9.s;ca==null?E.Obsolete(b$):ca!=null&&ca.$==2?(E.EnqueueSafe(ca.$1,b$),b_(ca.$0)):ca!=null&&ca.$==3?(ca.$0.push(b_),E.EnqueueSafe(ca.$1,b$)):b_(ca.$0);};E.MarkDone=function(b9,b_,b$){var ca;if(ca=b_.s,ca!=null&&ca.$==0)E.MarkForever(b9,b$);else E.MarkReady(b9,b$);};E.EnqueueSafe=function(b9,b_){var b$,ca,cb,cc;b9.push(b_);if(b9.length%20===0){b$=b9.slice(0);bQ.Clear(b9);for(ca=0,cb=K.length(b$)-1;ca<=cb;ca++){cc=K.get(b$,ca);typeof cc=="object"?function(cd){if(cd.s)b9.push(cd);}(cc):function(cd){b9.push(cd);}(cc);}}else void 0;};E.MarkForever=function(b9,b_){var b$,ca,cb,cc;b$=b9.s;if(b$!=null&&b$.$==3){b9.s={$:0,$0:b_};ca=b$.$0;for(cb=0,cc=K.length(ca)-1;cb<=cc;cb++)(K.get(ca,cb))(b_);}else void 0;};E.MarkReady=function(b9,b_){var b$,ca,cb,cc;b$=b9.s;if(b$!=null&&b$.$==3){b9.s={$:2,$0:b_,$1:b$.$1};ca=b$.$0;for(cb=0,cc=K.length(ca)-1;cb<=cc;cb++)(K.get(ca,cb))(b_);}else void 0;};E.WhenRun=function(b9,b_,b$){var ca;ca=b9.s;ca==null?b$():ca!=null&&ca.$==2?(ca.$1.push(b$),b_(ca.$0)):ca!=null&&ca.$==3?(ca.$0.push(b_),ca.$1.push(b$)):b_(ca.$0);};E.Map2Unit=function(b9,b_){var b$,ca,cb;function cc(){var cd,ce,cf;if(!(cd=cb.s,cd!=null&&cd.$==0||cd!=null&&cd.$==2)){ce=E.ValueAndForever(b9);cf=E.ValueAndForever(b_);ce!=null&&ce.$==1?cf!=null&&cf.$==1?ce.$0[1]&&cf.$0[1]?E.MarkForever(cb,null):E.MarkReady(cb,null):void 0:void 0;}}b$=b9.s;ca=b_.s;return b$!=null&&b$.$==0?ca!=null&&ca.$==0?E.New({$:0,$0:null}):b_:ca!=null&&ca.$==0?b9:(cb=E.New({$:3,$0:[],$1:[]}),(E.When(b9,cc,cb),E.When(b_,cc,cb),cb));};E.Copy=function(b9){var b_,b$,ca;b_=b9.s;return b_==null?b9:b_!=null&&b_.$==2?(b$=E.New({$:2,$0:b_.$0,$1:[]}),(E.WhenObsolete(b9,b$),b$)):b_!=null&&b_.$==3?(ca=E.New({$:3,$0:[],$1:[]}),(E.When(b9,function(cb){E.MarkDone(ca,b9,cb);},ca),ca)):b9;};E.ValueAndForever=function(b9){var b_;b_=b9.s;return b_!=null&&b_.$==0?{$:1,$0:[b_.$0,true]}:b_!=null&&b_.$==2?{$:1,$0:[b_.$0,false]}:null;};E.WhenObsolete=function(b9,b_){var b$;b$=b9.s;b$==null?E.Obsolete(b_):b$!=null&&b$.$==2?E.EnqueueSafe(b$.$1,b_):b$!=null&&b$.$==3?E.EnqueueSafe(b$.$1,b_):void 0;};E.Join=function(b9){var b_;b_=E.New({$:3,$0:[],$1:[]});E.When(b9,function(b$){var ca;ca=b$();E.When(ca,function(cb){var cc,cd;if((cc=ca.s,cc!=null&&cc.$==0)&&(cd=b9.s,cd!=null&&cd.$==0))E.MarkForever(b_,cb);else E.MarkReady(b_,cb);},b_);},b_);return b_;};F.$cctor=function(){var b9,b_;F.$cctor=a.ignore;function b$(ce){return O.concat("\n",ce);}function ca(ce){return V.splitByChar("\n",ce);}function cb(ce){var cf,cg;return W.array(ce,{$:1,$0:0},{$:1,$0:(cf=0,(cg=K.length(ce)-2,N.Compare(cf,cg)===1?cf:cg))});}function cc(ce){return O.concat("\n",ce);}function cd(ce){return ce+"T00:00:00";}F.unindentStr=function(ce){return b$(V.unindent(ce));};F.skipLastLine=(b9=function(ce){return cb(ca(ce));},function(ce){return cc(b9(ce));});F.parseDateO2=(b_=X.tryParseWith(function(ce){var cf,cg;cf=0;return[(cg=bl.TryParse(ce),cg!=null&&cg.$==1&&(cf=cg.$0,true)),cf];}),function(ce){return b_(cd(ce));});F.parseDateO=X.tryParseWith(function(ce){var cf,cg;cf=0;return[(cg=bl.TryParse(ce),cg!=null&&cg.$==1&&(cf=cg.$0,true)),cf];});F.parseIntO=X.tryParseWith(function(ce){var cf;cf=0;return[Y.TryParseInt32(ce,{get:function(){return cf;},set:function(cg){cf=cg;}}),cf];});F.parseInt64O=X.tryParseWith(function(ce){var cf;cf=0;return[Y.TryParseInt64(ce,{get:function(){return cf;},set:function(cg){cf=cg;}}),cf];});F.parseSingleO=X.tryParseWith(function(ce){var cf,cg;cf=0;return[(cg=a.Number(ce),a.isNaN(cg)?false:(cf=cg,true)),cf];});F.parseDoubleO=X.tryParseWith(function(ce){var cf,cg;cf=0;return[(cg=a.Number(ce),a.isNaN(cg)?false:(cf=cg,true)),cf];});F.parseGuidO=X.tryParseWith(function(ce){var cf;cf=null;return[_0.TryParse(ce,{get:function(){return cf;},set:function(cg){cf=cg;}}),cf];});F["|Date|_|"]=X.parseDateO();F["|Int|_|"]=X.parseIntO();F["|Int64|_|"]=X.parseInt64O();F["|Single|_|"]=X.parseSingleO();F["|Double|_|"]=X.parseDoubleO();F["|Guid|_|"]=X.parseGuidO();F.wasmStatusV=_1.Create$1(G.WasmNotLoaded);F.originalProvider=u.AjaxProvider();F.queues=new R.New$5();F.messaging=I.New(function(ce){return function(cf){return self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(ce,cf);};},function(ce){H.returnValue0(ce[0],ce[1]);},function(ce){H.returnExn0(ce[0],ce[1]);},function(ce){return function(cf){return ce("EARLY PRINTING!: "+w.toSafe(cf));};}(function(ce){b6.log(ce);}));F.workerO=null;F.rootPath="/WASM/publish/";F.detailsV=_1.Create$1("");F.fsErrsV=_1.Create$1([]);F.wsErrsV=_1.Create$1([]);F.wsWrnsV=_1.Create$1([]);F.debugV=_1.Create$1(false);F.codeV=_1.Create$1("\r\n            open WebSharper\r\n            open WebSharper.UI\r\n            open WebSharper.UI.Html\r\n            \r\n            let name = Var.Create \"World\"\r\n            \r\n            [< Inline \"'Hello inline '\" >]\r\n            let bDoc() = \"Hello\"\r\n            \r\n            let cDoc() = text name.V\r\n            \r\n            let aDoc() = \r\n                div [] [\r\n                    text <| bDoc()\r\n                    cDoc()\r\n                ]\r\n            \r\n                    ");F.optsV=_1.Create$1(O.concat("\n",J.map(O.Trim,O.SplitChars("\r\n                                            /tmp/source.fsx\r\n                                            -o:source.exe\r\n                                            --simpleresolution\r\n                                            --nowarn:3186\r\n                                            --optimize-\r\n                                            --noframework\r\n                                            --fullpaths\r\n                                            --warn:3\r\n                                            --target:exe\r\n                                            -r:/dlls/WebSharper.Core.dll\r\n                                            -r:/dlls/WebSharper.Main.dll\r\n                                            -r:/dlls/WebSharper.UI.dll\r\n                                            -r:/dlls/WebSharper.Sitelets.dll\r\n                                            -r:/managed/FSharp.Core.dll\r\n                                            -r:/managed/mscorlib.dll\r\n                                            -r:/managed/netstandard.dll\r\n                                            -r:/managed/System.dll\r\n                                            -r:/managed/System.Core.dll\r\n                                            -r:/managed/System.IO.dll\r\n                                            -r:/managed/System.Runtime.dll\r\n                                            -r:/managed/System.Net.Http.dll\r\n                                            -r:/managed/System.Threading.dll\r\n                                            -r:/managed/System.Numerics.dll\r\n                                            -r:/managed/System.Runtime.Numerics.dll\r\n                                        ",["\n"],0))));!(!self.document)?H.set_messaging(I.New(H.messaging().runRpc,H.messaging().returnValue,H.messaging().returnExn,function(ce){var cf;b6.log(ce);cf=h.detailsV().Get();h.detailsV().Set(cf+(cf===""?"":"\n")+ce);})):void 0;};G.WasmLoading={$:1};G.WasmWorkerLoading={$:3};G.WasmWorkerLoaded={$:4};G.WasmLoaded={$:2};G.WasmNotLoaded={$:0};H.set_messaging=function(b9){F.$cctor();F.messaging=b9;};H.returnValue0=function(b9,b_){var b$,ca,cb;b$=_3.tryGet(b9);b$==null?void 0:(ca=b$.$0,cb=ca[0],ca[1],cb(b_));};H.returnExn0=function(b9,b_){H.returnExnExn(b9,new bD(b_));};H.messaging=function(){F.$cctor();return F.messaging;};H.installProvider=function(){u.set_AjaxProvider(new _4.New());};H.returnExnExn=function(b9,b_){var b$,ca;b$=_3.tryGet(b9);b$==null?void 0:(ca=b$.$0,ca[0],ca[1](b_));};H.getHeaderRpc=function(b9){return b9["x-websharper-rpc"];};H.callRunRpc=function(b9,b_){(H.messaging().runRpc(b9))(b_);};I.New=function(b9,b_,b$,ca){return{runRpc:b9,returnValue:b_,returnExn:b$,wprintfn:ca};};J.map=function(b9,b_){return{GetEnumerator:function(){var b$;b$=bb.Get(b_);return new bc.New(null,null,function(ca){return b$.MoveNext()&&(ca.c=b9(b$.Current()),true);},function(){b$.Dispose();});}};};J.delay=function(b9){return{GetEnumerator:function(){return bb.Get(b9());}};};J.append=function(b9,b_){return{GetEnumerator:function(){var b$,ca;b$=bb.Get(b9);ca=[true];return new bc.New(b$,null,function(cb){var cc;return cb.s.MoveNext()?(cb.c=cb.s.Current(),true):(cc=cb.s,!N.Equals(cc,null)?cc.Dispose():void 0,cb.s=null,ca[0]&&(ca[0]=false,cb.s=bb.Get(b_),cb.s.MoveNext()?(cb.c=cb.s.Current(),true):(cb.s.Dispose(),cb.s=null,false)));},function(cb){var cc;cc=cb.s;!N.Equals(cc,null)?cc.Dispose():void 0;});}};};J.distinct=function(b9){return J.distinctBy(a.id,b9);};J.cache=function(b9){var b_,b$;b_=[];b$=[bb.Get(b9)];return{GetEnumerator:function(){return new bc.New(0,null,function(ca){var cb;return ca.s<b_.length?(ca.c=b_[ca.s],ca.s=ca.s+1,true):(cb=b$[0],N.Equals(cb,null)?false:cb.MoveNext()?(ca.s=ca.s+1,ca.c=cb.Current(),b_.push(ca.c),true):(cb.Dispose(),b$[0]=null,false));},void 0);}};};J.iter=function(b9,b_){var b$;b$=bb.Get(b_);try{while(b$.MoveNext())b9(b$.Current());}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};J.head=function(b9){var b_;b_=bb.Get(b9);try{return b_.MoveNext()?b_.Current():J.insufficient();}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};J.tryFind=function(b9,b_){var b$,ca,cb;b$=bb.Get(b_);try{ca=null;while(ca==null&&b$.MoveNext()){cb=b$.Current();b9(cb)?ca={$:1,$0:cb}:void 0;}return ca;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};J.tryFindIndex=function(b9,b_){var b$,ca,cb;b$=bb.Get(b_);try{ca=true;cb=0;while(ca&&b$.MoveNext())if(b9(b$.Current()))ca=false;else cb=cb+1;return ca?null:{$:1,$0:cb};}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};J.filter=function(b9,b_){return{GetEnumerator:function(){var b$;b$=bb.Get(b_);return new bc.New(null,null,function(ca){var cb,cc,cd;cb=b$.MoveNext();cc=b$.Current();cd=false;while(cb)if(b9(cc)){ca.c=cc;cd=true;cb=false;}else if(b$.MoveNext())cc=b$.Current();else cb=false;return cd;},function(){b$.Dispose();});}};};J.distinctBy=function(b9,b_){return{GetEnumerator:function(){var b$,ca;b$=bb.Get(b_);ca=new bg.New$3();return new bc.New(null,null,function(cb){var cc,cd;if(b$.MoveNext()){cc=b$.Current();cd=ca.Add(b9(cc));while(!cd&&b$.MoveNext()){cc=b$.Current();cd=ca.Add(b9(cc));}return cd&&(cb.c=cc,true);}else return false;},function(){b$.Dispose();});}};};J.fold=function(b9,b_,b$){var ca,cb;ca=b_;cb=bb.Get(b$);try{while(cb.MoveNext())ca=b9(ca,cb.Current());return ca;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};J.max=function(b9){var b_,b$,ca;b_=bb.Get(b9);try{if(!b_.MoveNext())J.seqEmpty();b$=b_.Current();while(b_.MoveNext()){ca=b_.Current();N.Compare(ca,b$)===1?b$=ca:void 0;}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};J.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};K.filter=function(b9,b_){var b$,ca,cb;b$=[];for(ca=0,cb=b_.length-1;ca<=cb;ca++)if(b9(b_[ca]))b$.push(b_[ca]);return b$;};K.map=function(b9,b_){var b$,ca,cb;b$=new a.Array(b_.length);for(ca=0,cb=b_.length-1;ca<=cb;ca++)b$[ca]=b9(b_[ca]);return b$;};K.choose=function(b9,b_){var b$,ca,cb,cc;b$=[];for(ca=0,cb=b_.length-1;ca<=cb;ca++){cc=b9(b_[ca]);cc==null?void 0:b$.push(cc.$0);}return b$;};K.ofSeq=function(b9){var b_,b$;if(b9 instanceof a.Array)return b9.slice();else if(b9 instanceof M)return K.ofList(b9);else{b_=[];b$=bb.Get(b9);try{while(b$.MoveNext())b_.push(b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}};K.ofList=function(b9){var b_,b$;b$=[];b_=b9;while(!(b_.$==0)){b$.push(L.head(b_));b_=L.tail(b_);}return b$;};K.exists=function(b9,b_){var b$,ca,cb,cc;b$=false;ca=0;cc=K.length(b_);while(!b$&&ca<cc)if(b9(b_[ca]))b$=true;else ca=ca+1;return b$;};K.tryPick=function(b9,b_){var b$,ca,cb;b$=null;ca=0;while(ca<b_.length&&b$==null){cb=b9(b_[ca]);cb!=null&&cb.$==1?b$=cb:void 0;ca=ca+1;}return b$;};K.tryFindIndex=function(b9,b_){var b$,ca;b$=null;ca=0;while(ca<b_.length&&b$==null){b9(b_[ca])?b$={$:1,$0:ca}:void 0;ca=ca+1;}return b$;};K.foldBack=function(b9,b_,b$){var ca,cb,cc,cd,ce;ca=b$;cc=b_.length;for(cd=1,ce=cc;cd<=ce;cd++)ca=b9(b_[cc-cd],ca);return ca;};K.iter=function(b9,b_){var b$,ca;for(b$=0,ca=b_.length-1;b$<=ca;b$++)b9(b_[b$]);};K.concat=function(b9){return a.Array.prototype.concat.apply([],K.ofSeq(b9));};K.pick=function(b9,b_){var b$;b$=K.tryPick(b9,b_);return b$==null?e.FailWith("KeyNotFoundException"):b$.$0;};K.create=function(b9,b_){var b$,ca,cb;b$=new a.Array(b9);for(ca=0,cb=b9-1;ca<=cb;ca++)b$[ca]=b_;return b$;};K.init=function(b9,b_){var b$,ca,cb;b9<0?e.FailWith("Negative size given."):null;b$=new a.Array(b9);for(ca=0,cb=b9-1;ca<=cb;ca++)b$[ca]=b_(ca);return b$;};K.forall=function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=K.length(b_);while(b$&&ca<cc)if(b9(b_[ca]))ca=ca+1;else b$=false;return b$;};M=L.T=b4.Class({GetEnumerator:function(){return new bc.New(this,null,function(b9){var b_;b_=b9.s;return b_.$==0?false:(b9.c=b_.$0,b9.s=b_.$1,true);},void 0);},GetEnumerator0:function(){return bb.Get(this);}},null,M);M.Empty=new M({$:0});N.Equals=function(b9,b_){var b$,ca,cb,cc;if(b9===b_)return true;else{b$=typeof b9;if(b$=="object"){if(b9===null||b9===void 0||b_===null||b_===void 0)return false;else if("Equals"in b9)return b9.Equals(b_);else if(b9 instanceof a.Array&&b_ instanceof a.Array)return N.arrayEquals(b9,b_);else if(b9 instanceof a.Date&&b_ instanceof a.Date)return N.dateEquals(b9,b_);else{ca=[true];for(var cd in b9)if(function(ce){ca[0]=!b9.hasOwnProperty(ce)||b_.hasOwnProperty(ce)&&N.Equals(b9[ce],b_[ce]);return!ca[0];}(cd))break;if(ca[0]){for(var ce in b_)if(function(cf){ca[0]=!b_.hasOwnProperty(cf)||b9.hasOwnProperty(cf);return!ca[0];}(ce))break;}return ca[0];}}else return b$=="function"&&("$Func"in b9?b9.$Func===b_.$Func&&b9.$Target===b_.$Target:"$Invokes"in b9&&"$Invokes"in b_&&N.arrayEquals(b9.$Invokes,b_.$Invokes));}};N.Compare=function(b9,b_){var b$,ca,cb,cc,cd,ce;if(b9===b_)return 0;else{ca=typeof b9;switch(ca=="function"?1:ca=="boolean"?2:ca=="number"?2:ca=="string"?2:ca=="object"?3:0){case 0:return typeof b_=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return b9<b_?-1:1;case 3:if(b9===null)cb=-1;else if(b_===null)cb=1;else if("CompareTo"in b9)cb=b9.CompareTo(b_);else if("CompareTo0"in b9)cb=b9.CompareTo0(b_);else if(b9 instanceof a.Array&&b_ instanceof a.Array)cb=N.compareArrays(b9,b_);else if(b9 instanceof a.Date&&b_ instanceof a.Date)cb=N.compareDates(b9,b_);else{cc=[0];for(var cf in b9)if(function(cg){return!b9.hasOwnProperty(cg)?false:!b_.hasOwnProperty(cg)?(cc[0]=1,true):(cc[0]=N.Compare(b9[cg],b_[cg]),cc[0]!==0);}(cf))break;if(cc[0]===0){for(var cg in b_)if(function(ch){return!b_.hasOwnProperty(ch)?false:!b9.hasOwnProperty(ch)&&(cc[0]=-1,true);}(cg))break;}cb=cc[0];}return cb;}}};N.arrayEquals=function(b9,b_){var b$,ca;if(K.length(b9)===K.length(b_)){b$=true;ca=0;while(b$&&ca<K.length(b9)){!N.Equals(K.get(b9,ca),K.get(b_,ca))?b$=false:void 0;ca=ca+1;}return b$;}else return false;};N.dateEquals=function(b9,b_){return b9.getTime()===b_.getTime();};N.compareArrays=function(b9,b_){var b$,ca;if(K.length(b9)<K.length(b_))return -1;else if(K.length(b9)>K.length(b_))return 1;else{b$=0;ca=0;while(b$===0&&ca<K.length(b9)){b$=N.Compare(K.get(b9,ca),K.get(b_,ca));ca=ca+1;}return b$;}};N.compareDates=function(b9,b_){return N.Compare(b9.getTime(),b_.getTime());};N.Hash=function(b9){var b_;b_=typeof b9;return b_=="function"?0:b_=="boolean"?b9?1:0:b_=="number"?b9:b_=="string"?N.hashString(b9):b_=="object"?b9==null?0:b9 instanceof a.Array?N.hashArray(b9):N.hashObject(b9):0;};N.hashString=function(b9){var b_,b$,ca;if(b9===null)return 0;else{b_=5381;for(b$=0,ca=b9.length-1;b$<=ca;b$++)b_=N.hashMix(b_,b9[b$].charCodeAt());return b_;}};N.hashArray=function(b9){var b_,b$,ca;b_=-34948909;for(b$=0,ca=K.length(b9)-1;b$<=ca;b$++)b_=N.hashMix(b_,N.Hash(K.get(b9,b$)));return b_;};N.hashObject=function(b9){var b_,b$;if("GetHashCode"in b9)return b9.GetHashCode();else{b_=[0];for(var ca in b9)if(function(cb){b_[0]=N.hashMix(N.hashMix(b_[0],N.hashString(cb)),N.Hash(b9[cb]));return false;}(ca))break;return b_[0];}};N.hashMix=function(b9,b_){return(b9<<5)+b9+b_;};K.length=function(b9){return b9.dims===2?b9.length*b9.length:b9.length;};K.get=function(b9,b_){K.checkBounds(b9,b_);return b9[b_];};K.set=function(b9,b_,b$){K.checkBounds(b9,b_);b9[b_]=b$;};K.checkBounds=function(b9,b_){if(b_<0||b_>=b9.length)e.FailWith("Index was outside the bounds of the array.");};O.concat=function(b9,b_){return K.ofSeq(b_).join(b9);};O.SplitChars=function(b9,b_,b$){return O.Split(b9,new a.RegExp("["+O.RegexEscape(b_.join(""))+"]"),b$);};O.Trim=function(b9){return b9.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};O.Replace=function(b9,b_,b$){function ca(cb){var cc,cd,ce;cc=cb.indexOf(b_);return cc!==-1?(cd=O.ReplaceOnce(cb,b_,b$),(ce=cc+b$.length,O.Substring(cd,0,cc+b$.length)+ca(cd.substring(ce)))):cb;}return ca(b9);};O.Split=function(b9,b_,b$){return b$===1?K.filter(function(ca){return ca!=="";},O.SplitWith(b9,b_)):O.SplitWith(b9,b_);};O.RegexEscape=function(b9){return b9.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};O.StartsWith=function(b9,b_){return b9.substring(0,b_.length)==b_;};O.ReplaceOnce=function(b9,b_,b$){return b9.replace(b_,b$);};O.SplitWith=function(b9,b_){return b9.split(b_);};O.Substring=function(b9,b_,b$){return b9.substr(b_,b$);};P=m.AttrProxy=b4.Class({},null,P);P.Create=function(b9,b_){return be.Static(function(b$){T.SetAttr(b$,b9,b_);});};P.Concat=function(b9){var b_;b_=bd.ofSeqNonCopying(b9);return bd.TreeReduce(be.EmptyAttr(),P.Append,b_);};P.Append=function(b9,b_){return be.AppendTree(b9,b_);};R=Q.Dictionary=b4.Class({set_Item:function(b9,b_){this.set(b9,b_);},ContainsKey:function(b9){var b_,b$;b_=this;b$=this.data[this.hash(b9)];return b$==null?false:K.exists(function(ca){return b_.equals.apply(null,[(e.KeyValue(ca))[0],b9]);},b$);},TryGetValue:function(b9,b_){var b$,ca,cb;b$=this;ca=this.data[this.hash(b9)];return ca==null?false:(cb=K.tryPick(function(cc){var cd;cd=e.KeyValue(cc);return b$.equals.apply(null,[cd[0],b9])?{$:1,$0:cd[1]}:null;},ca),cb!=null&&cb.$==1&&(b_.set(cb.$0),true));},Remove:function(b9){return this.remove(b9);},get_Keys:function(){return new bv.New(this);},set:function(b9,b_){var b$,ca,cb,cc;b$=this;ca=this.hash(b9);cb=this.data[ca];cb==null?(this.count=this.count+1,this.data[ca]=new a.Array({K:b9,V:b_})):(cc=K.tryFindIndex(function(cd){return b$.equals.apply(null,[(e.KeyValue(cd))[0],b9]);},cb),cc==null?(this.count=this.count+1,cb.push({K:b9,V:b_})):cb[cc.$0]={K:b9,V:b_});},Add:function(b9,b_){this.add(b9,b_);},remove:function(b9){var b_,b$,ca,cb;b_=this;b$=this.hash(b9);ca=this.data[b$];return ca==null?false:(cb=K.filter(function(cc){return!b_.equals.apply(null,[(e.KeyValue(cc))[0],b9]);},ca),K.length(cb)<ca.length&&(this.count=this.count-1,this.data[b$]=cb,true));},get_Item:function(b9){return this.get(b9);},add:function(b9,b_){var b$,ca,cb;b$=this;ca=this.hash(b9);cb=this.data[ca];cb==null?(this.count=this.count+1,this.data[ca]=new a.Array({K:b9,V:b_})):(K.exists(function(cc){return b$.equals.apply(null,[(e.KeyValue(cc))[0],b9]);},cb)?bo.alreadyAdded():void 0,this.count=this.count+1,cb.push({K:b9,V:b_}));},get:function(b9){var b_,b$;b_=this;b$=this.data[this.hash(b9)];return b$==null?bo.notPresent():K.pick(function(ca){var cb;cb=e.KeyValue(ca);return b_.equals.apply(null,[cb[0],b9])?{$:1,$0:cb[1]}:null;},b$);},GetEnumerator:function(){return bb.Get0(this);},GetEnumerator0:function(){return bb.Get0(K.concat(l.GetFieldValues(this.data)));}},q,R);R.New$5=b4.Ctor(function(){R.New$6.call(this,[],N.Equals,N.Hash);},R);R.New$6=b4.Ctor(function(b9,b_,b$){var ca,cb;q.New.call(this);this.equals=b_;this.hash=b$;this.count=0;this.data=[];ca=bb.Get(b9);try{while(ca.MoveNext()){cb=ca.Current();this.set(cb.K,cb.V);}}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},R);S.LinkElement=function(b9,b_){S.InsertDoc(b9,b_,null);};S.CreateTextNode=function(){return{Text:T.CreateText(""),Dirty:false,Value:""};};S.UpdateTextNode=function(b9,b_){b9.Value=b_;b9.Dirty=true;};S.InsertDoc=function(b9,b_,b$){var ca;return b_!=null&&b_.$==1?S.InsertNode(b9,b_.$0.El,b$):b_!=null&&b_.$==2?(ca=b_.$0,(ca.Dirty=false,S.InsertDoc(b9,ca.Current,b$))):b_==null?b$:b_!=null&&b_.$==4?S.InsertNode(b9,b_.$0.Text,b$):b_!=null&&b_.$==5?S.InsertNode(b9,b_.$0,b$):b_!=null&&b_.$==6?K.foldBack(function(cb,cc){return cb==null||cb.constructor===ba?S.InsertDoc(b9,cb,cc):S.InsertNode(b9,cb,cc);},b_.$0.Els,b$):S.InsertDoc(b9,b_.$0,S.InsertDoc(b9,b_.$1,b$));};S.CreateRunState=function(b9,b_){return bz.New(bA.get_Empty(),S.CreateElemNode(b9,be.EmptyAttr(),b_));};S.PerformAnimatedUpdate=function(b9,b_,b$){var ca;return bh.get_UseAnimations()?(ca=null,_5.Delay(function(){var cb,cc,cd;cb=bA.FindAll(b$);cc=S.ComputeChangeAnim(b_,cb);cd=S.ComputeEnterAnim(b_,cb);return _5.Bind(bh.Play(bh.Append(cc,S.ComputeExitAnim(b_,cb))),function(){return _5.Bind(S.SyncElemNodesNextFrame(b9,b_),function(){return _5.Bind(bh.Play(cd),function(){b_.PreviousNodes=cb;return _5.Return(null);});});});})):S.SyncElemNodesNextFrame(b9,b_);};S.PerformSyncUpdate=function(b9,b_,b$){var ca;ca=bA.FindAll(b$);S.SyncElemNode(b9,b_.Top);b_.PreviousNodes=ca;};S.InsertNode=function(b9,b_,b$){T.InsertAt(b9,b$,b_);return b_;};S.CreateElemNode=function(b9,b_,b$){var ca;S.LinkElement(b9,b$);ca=be.Insert(b9,b_);return bw.New(ca,b$,null,b9,bH.Int(),b4.GetOptional(ca.OnAfterRender));};S.SyncElemNodesNextFrame=function(b9,b_){function b$(ca){a.requestAnimationFrame(function(){S.SyncElemNode(b9,b_.Top);ca();});}return bi.BatchUpdatesEnabled()?_5.FromContinuations(function(ca,cb,cc){return b$.apply(null,[ca,cb,cc]);}):(S.SyncElemNode(b9,b_.Top),_5.Return(null));};S.ComputeExitAnim=function(b9,b_){return bh.Concat(K.map(function(b$){return be.GetExitAnim(b$.Attr);},bA.ToArray(bA.Except(b_,bA.Filter(function(b$){return be.HasExitAnim(b$.Attr);},b9.PreviousNodes)))));};S.ComputeEnterAnim=function(b9,b_){return bh.Concat(K.map(function(b$){return be.GetEnterAnim(b$.Attr);},bA.ToArray(bA.Except(b9.PreviousNodes,bA.Filter(function(b$){return be.HasEnterAnim(b$.Attr);},b_)))));};S.ComputeChangeAnim=function(b9,b_){var b$;function ca(cb){return be.HasChangeAnim(cb.Attr);}b$=function(cb){return bA.Filter(ca,cb);};return bh.Concat(K.map(function(cb){return be.GetChangeAnim(cb.Attr);},bA.ToArray(bA.Intersect(b$(b9.PreviousNodes),b$(b_)))));};S.SyncElemNode=function(b9,b_){!b9?S.SyncElement(b_):void 0;S.Sync(b_.Children);S.AfterRender(b_);};S.CreateEmbedNode=function(){return{Current:null,Dirty:false};};S.UpdateEmbedNode=function(b9,b_){b9.Current=b_;b9.Dirty=true;};S.SyncElement=function(b9){function b_(b$){function ca(cb){var cc,cd;return cb!=null&&cb.$==0?ca(cb.$0)||ca(cb.$1):cb!=null&&cb.$==2?(cc=cb.$0,cc.Dirty||ca(cc.Current)):cb!=null&&cb.$==6&&(cd=cb.$0,cd.Dirty||K.exists(b_,cd.Holes));}return ca(b$.Children);}be.Sync(b9.El,b9.Attr);b_(b9)?S.DoSyncElement(b9):void 0;};S.Sync=function(b9){var b_,b$;if(b9!=null&&b9.$==1)S.SyncElemNode(false,b9.$0);else if(b9!=null&&b9.$==2)S.Sync(b9.$0.Current);else if(b9==null);else if(b9!=null&&b9.$==5);else if(b9!=null&&b9.$==4){b_=b9.$0;b_.Dirty?(b_.Text.nodeValue=b_.Value,b_.Dirty=false):void 0;}else if(b9!=null&&b9.$==6){b$=b9.$0;K.iter(function(ca){S.SyncElemNode(false,ca);},b$.Holes);K.iter(function(ca){be.Sync(ca[0],ca[1]);},b$.Attrs);S.AfterRender(b$);}else{S.Sync(b9.$0);S.Sync(b9.$1);}};S.AfterRender=function(b9){var b_;b_=b4.GetOptional(b9.Render);b_!=null&&b_.$==1?(b_.$0(b9.El),b4.SetOptional(b9,"Render",null)):void 0;};S.DoSyncElement=function(b9){var b_,b$,ca;function cb(cc,cd){var ce,cf;return cc!=null&&cc.$==1?cc.$0.El:cc!=null&&cc.$==2?(ce=cc.$0,ce.Dirty?(ce.Dirty=false,S.InsertDoc(b_,ce.Current,cd)):cb(ce.Current,cd)):cc==null?cd:cc!=null&&cc.$==4?cc.$0.Text:cc!=null&&cc.$==5?cc.$0:cc!=null&&cc.$==6?(cf=cc.$0,(cf.Dirty?cf.Dirty=false:void 0,K.foldBack(function(cg,ch){return cg==null||cg.constructor===ba?cb(cg,ch):cg;},cf.Els,cd))):cb(cc.$0,cb(cc.$1,cd));}b_=b9.El;bY.Iter((b$=b9.El,function(cc){T.RemoveNode(b$,cc);}),bY.Except(bY.DocChildren(b9),bY.Children(b9.El,b4.GetOptional(b9.Delimiters))));cb(b9.Children,(ca=b4.GetOptional(b9.Delimiters),ca!=null&&ca.$==1?ca.$0[1]:null));};T.CreateText=function(b9){return T.Doc().createTextNode(b9);};T.SetAttr=function(b9,b_,b$){b9.setAttribute(b_,b$);};T.ChildrenArray=function(b9){var b_,b$,ca;b_=[];for(b$=0,ca=b9.childNodes.length-1;b$<=ca;b$++)b_.push(b9.childNodes[b$]);return b_;};T.CreateElement=function(b9){return T.Doc().createElement(b9);};T.Doc=function(){bG.$cctor();return bG.Doc;};T.IterSelector=function(b9,b_,b$){var ca,cb,cc;ca=b9.querySelectorAll(b_);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b$(ca[cb]);};T.InsertAt=function(b9,b_,b$){var ca;if(!(b$.parentNode===b9&&b_===(ca=b$.nextSibling,N.Equals(ca,null)?null:ca)))b9.insertBefore(b$,b_);};T.RemoveNode=function(b9,b_){if(b_.parentNode===b9)b9.removeChild(b_);};E.Obsolete=function(b9){var b_,b$,ca,cb,cc;b$=b9.s;if(b$==null||(b$!=null&&b$.$==2?(b_=b$.$1,false):b$!=null&&b$.$==3?(b_=b$.$1,false):true))void 0;else{b9.s=null;for(ca=0,cb=K.length(b_)-1;ca<=cb;ca++){cc=K.get(b_,ca);typeof cc=="object"?function(cd){E.Obsolete(cd);}(cc):cc();}}};E.New=function(b9){return{s:b9};};V.unindent=function(b9){var b_,b$,ca,cb;b_=O.SplitChars(b9,["\n"],0);b$=(ca=J.tryFindIndex(function(cc){return" "!==cc;},(cb=J.tryFind(function(cc){return O.Trim(cc)!=="";},b_),cb==null?"":cb.$0)),ca==null?0:ca.$0);return J.filter(function(cc){return!O.StartsWith(cc,"# 1 ");},J.map(function(cc){return cc.length<=b$?"":cc.substring(b$);},b_));};V.splitByChar=function(b9,b_){return O.SplitChars(b_,[b9],0);};V.StartsWith=function(b9,b_){return O.StartsWith(b_,b9)?{$:1,$0:W.string(b_,{$:1,$0:b9.length},null)}:null;};W.array=function(b9,b_,b$){return b_==null?b$!=null&&b$.$==1?b9.slice(0,b$.$0+1):[]:b$==null?b9.slice(b_.$0):b9.slice(b_.$0,b$.$0+1);};W.string=function(b9,b_,b$){return b_==null?b$!=null&&b$.$==1?b9.slice(0,b$.$0+1):"":b$==null?b9.slice(b_.$0):b9.slice(b_.$0,b$.$0+1);};X.tryParseWith=function(b9){function b_(b$,ca){return b$?{$:1,$0:ca}:null;}return function(b$){return b_.apply(null,b9(b$));};};X.parseDateO=function(){F.$cctor();return F.parseDateO;};X.parseIntO=function(){F.$cctor();return F.parseIntO;};X.parseInt64O=function(){F.$cctor();return F.parseInt64O;};X.parseSingleO=function(){F.$cctor();return F.parseSingleO;};X.parseDoubleO=function(){F.$cctor();return F.parseDoubleO;};X.parseGuidO=function(){F.$cctor();return F.parseGuidO;};Y.TryParseInt32=function(b9,b_){return Y.TryParse(b9,-2147483648,2147483647,b_);};Y.TryParseInt64=function(b9,b_){return Y.TryParse(b9,-9223372036854775808,9223372036854775807,b_);};_0.TryParse=function(b9,b_){try{b_.set(_0.Parse(b9));return true;}catch(b$){return false;}};_0.Parse=function(b9){var b_,b$,ca;try{return _0.ParseExact(b9,"D");}catch(cb){try{b_=_0.ParseExact(b9,"B");}catch(cc){try{b$=_0.ParseExact(b9,"P");}catch(cd){try{ca=_0.ParseExact(b9,"N");}catch(ce){ca=_0.ParseExact(b9,"X");}b$=ca;}b_=b$;}return b_;}};_0.ParseExact=function(b9,b_){var b$,ca,cb,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;function cc(cn){var co,cp,cq,cr;for(co=0,cp=35;co<=cp;co++){co===8||(co===13||(co===18||co===23))?cn[co]!=="-"?_0.ShapeError():void 0:(cr=cn[co],!("0"<=cr&&cr<="9"||"a"<=cr&&cr<="f")?_0.ShapeError():void 0);}return cn;}cd=b_.toUpperCase();if(cd==="N"){ce=O.Trim(b9).toLowerCase();if(ce.length!==32)_0.ShapeError();for(cf=0,cg=31;cf<=cg;cf++){ch=ce[cf];!("0"<=ch&&ch<="9"||"a"<=ch&&ch<="f")?_0.ShapeError():void 0;}return O.Substring(ce,0,8)+"-"+O.Substring(ce,8,4)+"-"+O.Substring(ce,12,4)+"-"+O.Substring(ce,16,4)+"-"+ce.substring(20);}else if(cd==="D"){b$=O.Trim(b9).toLowerCase();b$.length!==36?_0.ShapeError():void 0;return cc(b$);}else if(cd==="B"){ca=O.Trim(b9).toLowerCase();ca.length!==38||ca[0]!=="{"||ca[17]!=="}"?_0.ShapeError():void 0;return cc(O.Substring(ca,1,36));}else if(cd==="P"){cb=O.Trim(b9).toLowerCase();cb.length!==38||cb[0]!=="("||cb[17]!==")"?_0.ShapeError():void 0;return cc(O.Substring(cb,1,36));}else if(cd==="X"){ci=O.Trim(b9).toLowerCase();if(ci.length!==68)_0.ShapeError();for(cj=0,ck=67;cj<=ck;cj++){switch(cj){case 26:case 0:if(ci[cj]!=="{")_0.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(ci[cj]!=="0")_0.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(ci[cj]!=="x")_0.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(ci[cj]!==",")_0.ShapeError();break;case 67:case 66:if(ci[cj]!=="{")_0.ShapeError();break;default:cm=ci[cj];!("0"<=cm&&cm<="9"||"a"<=cm&&cm<="f")?_0.ShapeError():void 0;break;}}return O.Substring(ci,3,8)+"-"+O.Substring(ci,14,4)+"-"+O.Substring(ci,21,4)+"-"+O.Substring(ci,29,2)+O.Substring(ci,34,2)+"-"+O.Substring(ci,39,2)+O.Substring(ci,44,2)+O.Substring(ci,49,2)+O.Substring(ci,54,2)+O.Substring(ci,59,2)+O.Substring(ci,64,2);}else return _0.FormatError();};_0.ShapeError=function(){throw new bW.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_0.FormatError=function(){throw new bW.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_1=m.Var$1=b4.Class({},q,_1);_1.Create$1=function(b9){return new bm.New(false,E.New({$:2,$0:b9,$1:[]}),b9);};u.AjaxProvider=function(){bn.$cctor();return bn.AjaxProvider;};u.set_AjaxProvider=function(b9){bn.$cctor();bn.AjaxProvider=b9;};u.makePayload=function(b9){return b5.stringify(b9);};u.makeHeaders=function(b9){return{"content-type":"application/json","x-websharper-rpc":b9};};u.EndPoint=function(){bn.$cctor();return bn.EndPoint;};u.ajax=function(b9,b_,b$,ca,cb,cc,cd){var ce,cf,cg;ce=new a.XMLHttpRequest();cf=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");ce.open("POST",b_,b9);if(b9==true)ce.withCredentials=true;for(var ci in b$)ce.setRequestHeader(ci,b$[ci]);if(cf)ce.setRequestHeader("x-csrftoken",cf);function ch(){var cj;if(ce.status==200)cb(ce.responseText);else if(cd&&ce.status==403&&ce.responseText=="CSRF")cd();else{cj="Response status is not 200: ";cc(new bD(cj+ce.status));}}if("onload"in ce)ce.onload=ce.onerror=ce.onabort=ch;else ce.onreadystatechange=function(){if(ce.readyState==4)ch();};ce.send(ca);};_3.tryGet=function(b9){var b_,b$,ca,cb;b_=_3.tryGetS(b9);return b_==null?null:(b$=b_.$0,(ca=J.tryHead(b$),ca!=null&&ca.$==1?(cb=W.array(b$,{$:1,$0:1},null),(_3.queues().Remove(b9),_3.queues().Add(b9,cb),{$:1,$0:ca.$0})):null));};_3.tryGetS=function(b9){return(X.tryParseWith(function(b_){var b$;b$=null;return[_3.queues().TryGetValue(b_,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$];}))(b9);};_3.queues=function(){F.$cctor();return F.queues;};_3.add=function(b9,b_){var b$,ca;b$=(ca=_3.tryGetS(b9),ca==null?[b_]:(_3.queues().Remove(b9),ca.$0.concat([b_])));_3.queues().Add(b9,b$);};_4=H.CustomXhrProvider=b4.Class({Async:function(b9,b_,b$,ca,cb){var cc;_5.Start((cc=null,_5.Delay(function(){var cd;cd=H.getHeaderRpc(b_);_3.add(cd,[ca,cb]);return _5.TryWith(_5.Delay(function(){H.callRunRpc(cd,b$);return _5.Zero();}),function(ce){H.returnExnExn(cd,ce);return _5.Zero();});})),null);}},q,_4);_4.New=b4.Ctor(function(){q.New.call(this);},_4);_5.FromContinuations=function(b9){return function(b_){var b$;function ca(cb){if(b$[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b$[0]=true;_5.scheduler().Fork(cb);}}b$=[false];b9(function(cb){ca(function(){b_.k({$:0,$0:cb});});},function(cb){ca(function(){b_.k({$:1,$0:cb});});},function(cb){ca(function(){b_.k({$:2,$0:cb});});});};};_5.Delay=function(b9){return function(b_){try{(b9(null))(b_);}catch(b$){b_.k({$:1,$0:b$});}};};_5.Bind=function(b9,b_){return _5.checkCancel(function(b$){b9(bq.New(function(ca){var cb;if(ca.$==0){cb=ca.$0;_5.scheduler().Fork(function(){try{(b_(cb))(b$);}catch(cc){b$.k({$:1,$0:cc});}});}else _5.scheduler().Fork(function(){b$.k(ca);});},b$.ct));});};_5.Sleep=function(b9){return function(b_){var b$,ca;b$=void 0;ca=void 0;b$=a.setTimeout(function(){ca.Dispose();_5.scheduler().Fork(function(){b_.k({$:0,$0:null});});},b9);ca=_5.Register(b_.ct,function(){a.clearTimeout(b$);_5.scheduler().Fork(function(){_5.cancel(b_);});});};};_5.Combine=function(b9,b_){return _5.Bind(b9,function(){return b_;});};_5.Zero=function(){br.$cctor();return br.Zero;};_5.Start=function(b9,b_){var b$,ca;b$=(ca=(_5.defCTS())[0],b_==null?ca:b_.$0);_5.scheduler().Fork(function(){if(!b$.c)b9(bq.New(function(cb){if(cb.$==1)_5.UncaughtAsyncError(cb.$0);},b$));});};_5.While=function(b9,b_){return b9()?_5.Bind(b_,function(){return _5.While(b9,b_);}):_5.Return();};_5.Return=function(b9){return function(b_){b_.k({$:0,$0:b9});};};_5.checkCancel=function(b9){return function(b_){if(b_.ct.c)_5.cancel(b_);else b9(b_);};};_5.Register=function(b9,b_){var b$;return b9===_5.noneCT()?{Dispose:function(){return null;}}:(b$=b9.r.push(b_)-1,{Dispose:function(){return K.set(b9.r,b$,a.ignore);}});};_5.cancel=function(b9){b9.k({$:2,$0:new bE.New(b9.ct)});};_5.defCTS=function(){br.$cctor();return br.defCTS;};_5.UncaughtAsyncError=function(b9){b6.log("WebSharper: Uncaught asynchronous exception",b9);};_5.scheduler=function(){br.$cctor();return br.scheduler;};_5.noneCT=function(){br.$cctor();return br.noneCT;};_5.GetCT=function(){br.$cctor();return br.GetCT;};_5.TryWith=function(b9,b_){return function(b$){b9(bq.New(function(ca){if(ca.$==0)b$.k({$:0,$0:ca.$0});else if(ca.$==1)try{(b_(ca.$0))(b$);}catch(cb){b$.k(ca);}else b$.k(ca);},b$.ct));};};_6=s.Require=b4.Class({},q,_6);_7.dlls=function(){bs.$cctor();return bs.dlls;};_8.newPojo=function(b9){var b_,b$;function ca(cc,cd){return function(ce){return _8.addProp(cc,cd,ce);};}function cb(cc){}b_={};J.iter((b$=function(cc){return(function(cd){return ca(cd[0],cd[1]);}(cc))(b_);},function(cc){return cb(b$(cc));}),b9);return b_;};_8.addProp=function(b9,b_,b$){b$[b9]=b_;return b$;};L.ofArray=function(b9){var b_,b$,ca;b_=M.Empty;for(b$=K.length(b9)-1,ca=0;b$>=ca;b$--)b_=new M({$:1,$0:K.get(b9,b$),$1:b_});return b_;};L.ofSeq=function(b9){var b_,b$,ca,cb,cc,cd;if(b9 instanceof M)return b9;else if(b9 instanceof a.Array)return L.ofArray(b9);else{b_=bb.Get(b9);try{ca=b_.MoveNext();if(!ca)b$=M.Empty;else{cc=new M({$:1});cb=cc;while(ca){cb.$0=b_.Current();b_.MoveNext()?cb=(cd=new M({$:1}),cb.$1=cd,cd):ca=false;}cb.$1=M.Empty;b$=cc;}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}}};L.head=function(b9){return b9.$==1?b9.$0:L.listEmpty();};L.tail=function(b9){return b9.$==1?b9.$1:L.listEmpty();};L.listEmpty=function(){return e.FailWith("The input list was empty.");};$.Checked=function(b9){function b_(b$,ca){return!N.Equals(b9.Get(),b$.checked)?b9.Set(b$.checked):null;}return P.Concat([$.DynamicProp("checked",b9.get_View()),$.Handler("change",function(b$){return function(ca){return b_(b$,ca);};})]);};$.Value=function(b9){function b_(b$){return{$:1,$0:b$};}return $.CustomValue(b9,a.id,function(b$){return b_(a.id(b$));});};$.DynamicProp=function(b9,b_){return be.Dynamic(b_,function(b$){return function(ca){b$[b9]=ca;};});};$.Handler=function(b9,b_){return be.Static(function(b$){b$.addEventListener(b9,function(ca){return(b_(b$))(ca);},false);});};$.CustomValue=function(b9,b_,b$){return $.CustomVar(b9,function(ca,cb){ca.value=b_(cb);},function(ca){return b$(ca.value);});};$.CustomVar=function(b9,b_,b$){function ca(cc,cd){return b9.UpdateMaybe(function(ce){var cf,cg;cf=b$(cc);return cf!=null&&cf.$==1&&(!N.Equals(cf.$0,ce)&&(cg=[cf,cf.$0],true))?cg[0]:null;});}function cb(cc,cd){var ce,cf;ce=b$(cc);return ce!=null&&ce.$==1&&(N.Equals(ce.$0,cd)&&(cf=ce.$0,true))?null:b_(cc,cd);}return P.Concat([$.Handler("change",function(cc){return function(cd){return ca(cc,cd);};}),$.Handler("input",function(cc){return function(cd){return ca(cc,cd);};}),$.Handler("keypress",function(cc){return function(cd){return ca(cc,cd);};}),$.DynamicCustom(function(cc){return function(cd){return cb(cc,cd);};},b9.get_View())]);};$.DynamicCustom=function(b9,b_){return be.Dynamic(b_,b9);};bb.Get=function(b9){return b9 instanceof a.Array?bb.ArrayEnumerator(b9):N.Equals(typeof b9,"string")?bb.StringEnumerator(b9):b9.GetEnumerator();};bb.ArrayEnumerator=function(b9){return new bc.New(0,null,function(b_){var b$;b$=b_.s;return b$<K.length(b9)&&(b_.c=K.get(b9,b$),b_.s=b$+1,true);},void 0);};bb.StringEnumerator=function(b9){return new bc.New(0,null,function(b_){var b$;b$=b_.s;return b$<b9.length&&(b_.c=b9[b$],b_.s=b$+1,true);},void 0);};bb.Get0=function(b9){return b9 instanceof a.Array?bb.ArrayEnumerator(b9):N.Equals(typeof b9,"string")?bb.StringEnumerator(b9):"GetEnumerator0"in b9?b9.GetEnumerator0():b9.GetEnumerator();};bc=bb.T=b4.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},q,bc);bc.New=b4.Ctor(function(b9,b_,b$,ca){q.New.call(this);this.s=b9;this.c=b_;this.n=b$;this.d=ca;},bc);bd.ofSeqNonCopying=function(b9){var b_,b$;if(b9 instanceof a.Array)return b9;else if(b9 instanceof M)return K.ofList(b9);else if(b9===null)return[];else{b_=[];b$=bb.Get(b9);try{while(b$.MoveNext())b_.push(b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}};bd.TreeReduce=function(b9,b_,b$){var ca;function cb(cc,cd){var ce,cf;return cd<=0?b9:cd===1&&(cc>=0&&cc<ca)?K.get(b$,cc):(cf=cd/2>>0,b_(cb(cc,cf),cb(cc+cf,cd-cf)));}ca=K.length(b$);return cb(0,ca);};bd.MapTreeReduce=function(b9,b_,b$,ca){var cb;function cc(cd,ce){var cf,cg;return ce<=0?b_:ce===1&&(cd>=0&&cd<cb)?b9(K.get(ca,cd)):(cg=ce/2>>0,b$(cc(cd,cg),cc(cd+cg,ce-cg)));}cb=K.length(ca);return cc(0,cb);};be.Static=function(b9){return new P({$:3,$0:b9});};be.Updates=function(b9){return bd.MapTreeReduce(function(b_){return b_.NChanged();},n.Const(),n.Map2Unit,b9.DynNodes);};be.AppendTree=function(b9,b_){var b$;return b9===null?b_:b_===null?b9:(b$=new P({$:2,$0:b9,$1:b_}),(be.SetFlags(b$,be.Flags(b9)|be.Flags(b_)),b$));};be.EmptyAttr=function(){bR.$cctor();return bR.EmptyAttr;};be.Dynamic=function(b9,b_){return new P({$:1,$0:new bS.New(b9,b_)});};be.Insert=function(b9,b_){var b$,ca,cb;function cc(cd){if(!(cd===null))if(cd!=null&&cd.$==1)b$.push(cd.$0);else if(cd!=null&&cd.$==2){cc(cd.$0);cc(cd.$1);}else if(cd!=null&&cd.$==3)cd.$0(b9);else if(cd!=null&&cd.$==4)ca.push(cd.$0);}b$=[];ca=[];cc(b_);cb=b$.slice(0);return bN.New(b9,be.Flags(b_),cb,ca.length===0?null:{$:1,$0:function(cd){J.iter(function(ce){ce(cd);},ca);}});};be.HasExitAnim=function(b9){var b_;b_=2;return(b9.DynFlags&b_)===b_;};be.GetExitAnim=function(b9){return be.GetAnim(b9,function(b_,b$){return b_.NGetExitAnim(b$);});};be.HasEnterAnim=function(b9){var b_;b_=1;return(b9.DynFlags&b_)===b_;};be.GetEnterAnim=function(b9){return be.GetAnim(b9,function(b_,b$){return b_.NGetEnterAnim(b$);});};be.HasChangeAnim=function(b9){var b_;b_=4;return(b9.DynFlags&b_)===b_;};be.GetChangeAnim=function(b9){return be.GetAnim(b9,function(b_,b$){return b_.NGetChangeAnim(b$);});};be.SetFlags=function(b9,b_){b9.flags=b_;};be.Flags=function(b9){return b9!==null&&b9.hasOwnProperty("flags")?b9.flags:0;};be.GetAnim=function(b9,b_){return bh.Concat(K.map(function(b$){return b_(b$,b9.DynElem);},b9.DynNodes));};be.Sync=function(b9,b_){K.iter(function(b$){b$.NSync(b9);},b_.DynNodes);};bf.$cctor=function(){bf.$cctor=a.ignore;bf.LoadedTemplates=new R.New$5();bf.LocalTemplatesLoaded=false;bf.TextHoleRE="\\${([^}]+)}";};bg=Q.HashSet=b4.Class({Add:function(b9){return this.add(b9);},Contains:function(b9){var b_;b_=this.data[this.hash(b9)];return b_==null?false:this.arrContains(b9,b_);},add:function(b9){var b_,b$;b_=this.hash(b9);b$=this.data[b_];return b$==null?(this.data[b_]=[b9],this.count=this.count+1,true):this.arrContains(b9,b$)?false:(b$.push(b9),this.count=this.count+1,true);},arrContains:function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=b_.length;while(b$&&ca<cc)if(this.equals.apply(null,[b_[ca],b9]))b$=false;else ca=ca+1;return!b$;},ExceptWith:function(b9){var b_;b_=bb.Get(b9);try{while(b_.MoveNext())this.Remove(b_.Current());}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b9){var b_,b$,ca,cb;b_=0;b$=bV.concat(this.data);for(ca=0,cb=b$.length-1;ca<=cb;ca++)K.set(b9,ca,b$[ca]);},IntersectWith:function(b9){var b_,b$,ca,cb,cc;b_=new bg.New$4(b9,this.equals,this.hash);b$=bV.concat(this.data);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=b$[ca];!b_.Contains(cc)?this.Remove(cc):void 0;}},Remove:function(b9){var b_;b_=this.data[this.hash(b9)];return b_==null?false:this.arrRemove(b9,b_)&&(this.count=this.count-1,true);},arrRemove:function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=b_.length;while(b$&&ca<cc)if(this.equals.apply(null,[b_[ca],b9])){b_.splice.apply(b_,[ca,1]);b$=false;}else ca=ca+1;return!b$;},GetEnumerator:function(){return bb.Get(bV.concat(this.data));},GetEnumerator0:function(){return bb.Get(bV.concat(this.data));}},q,bg);bg.New$3=b4.Ctor(function(){bg.New$4.call(this,[],N.Equals,N.Hash);},bg);bg.New$4=b4.Ctor(function(b9,b_,b$){var ca;q.New.call(this);this.equals=b_;this.hash=b$;this.data=[];this.count=0;ca=bb.Get(b9);try{while(ca.MoveNext())this.add(ca.Current());}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},bg);bg.New$2=b4.Ctor(function(b9){bg.New$4.call(this,b9,N.Equals,N.Hash);},bg);n=m.View=b4.Class({},null,n);bh.get_UseAnimations=function(){return bB.UseAnimations();};bh.Play=function(b9){var b_;b_=null;return _5.Delay(function(){return _5.Bind(bh.Run(a.ignore,bB.Actions(b9)),function(){bB.Finalize(b9);return _5.Return(null);});});};bh.Append=function(b9,b_){return{$:0,$0:bP.Append(b9.$0,b_.$0)};};bh.Run=function(b9,b_){var b$;function ca(cb){function cc(cd,ce){var cf;cf=ce-cd;b_.Compute(cf);b9();return cf<=b$?void a.requestAnimationFrame(function(cg){cc(cd,cg);}):cb();}a.requestAnimationFrame(function(cd){cc(cd,cd);});}b$=b_.Duration;return b$===0?_5.Zero():_5.FromContinuations(function(cb,cc,cd){return ca.apply(null,[cb,cc,cd]);});};bh.Concat=function(b9){return{$:0,$0:bP.Concat(J.map(bB.List,b9))};};bh.get_Empty=function(){return{$:0,$0:bP.Empty()};};bi.BatchUpdatesEnabled=function(){bC.$cctor();return bC.BatchUpdatesEnabled;};bk.StartProcessor=function(b9){var b_;function b$(){var ca;ca=null;return _5.Delay(function(){return _5.Bind(b9,function(){var cb;cb=b_[0];return cb===1?(b_[0]=0,_5.Zero()):cb===2?(b_[0]=1,b$()):_5.Zero();});});}b_=[0];return function(){var ca;ca=b_[0];ca===0?(b_[0]=1,_5.Start(b$(),null)):ca===1?b_[0]=2:void 0;};};bl.TryParse=function(b9){var b_;b_=b8.parse(b9);return a.isNaN(b_)?null:{$:1,$0:b_};};Y.TryParse=function(b9,b_,b$,ca){var cb,cc;cb=+b9;cc=cb===cb-cb%1&&cb>=b_&&cb<=b$;cc?ca.set(cb):void 0;return cc;};bm=m.ConcreteVar=b4.Class({get_View:function(){return this.view;},Set:function(b9){if(this.isConst)(function(b_){return b_("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b_){b6.log(b_);}));else{E.Obsolete(this.snap);this.current=b9;this.snap=E.New({$:2,$0:b9,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(b9){var b_;b_=b9(this.Get());b_!=null&&b_.$==1?this.Set(b_.$0):void 0;}},r,bm);bm.New=b4.Ctor(function(b9,b_,b$){var ca;ca=this;r.New.call(this);this.isConst=b9;this.current=b$;this.snap=b_;this.view=function(){return ca.snap;};this.id=bH.Int();},bm);bn.$cctor=function(){bn.$cctor=a.ignore;bn.EndPoint="?";bn.AjaxProvider=new bI.New();};bo.alreadyAdded=function(){return e.FailWith("An item with the same key has already been added.");};bo.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};bp=m.Elt=b4.Class({},B,bp);bp.New=function(b9,b_,b$){var ca,cb;ca=S.CreateElemNode(b9,b_,b$.docNode);cb=bJ.Create(b$.updates);return new bp.New$1({$:1,$0:ca},n.Map2Unit(be.Updates(ca.Attr),cb.v),b9,cb);};bp.New$1=b4.Ctor(function(b9,b_,b$,ca){B.New.call(this,b9,b_);this.docNode$1=b9;this.updates$1=b_;this.elt=b$;this.rvUpdates=ca;},bp);bq.New=function(b9,b_){return{k:b9,ct:b_};};br.$cctor=function(){br.$cctor=a.ignore;br.noneCT=bt.New(false,[]);br.scheduler=new bK.New();br.defCTS=[new bL.New()];br.Zero=_5.Return();br.GetCT=function(b9){b9.k({$:0,$0:b9.ct});};};bs.$cctor=function(){bs.$cctor=a.ignore;bs.dlls=["/dlls/WebSharper.Main.dll","/dlls/WebSharper.Collections.dll","/dlls/WebSharper.Control.dll","/dlls/WebSharper.Web.dll","/dlls/WebSharper.Sitelets.dll","/dlls/WebSharper.UI.dll","/dlls/WebSharper.UI.Templating.Runtime.dll","/dlls/WebSharper.Data.dll"];};J.last=function(b9){var b_,b$;b_=bb.Get(b9);try{if(!b_.MoveNext())b$=J.insufficient();else{while(b_.MoveNext());b$=b_.Current();}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};J.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};J.tryHead=function(b9){var b_;b_=bb.Get(b9);try{return b_.MoveNext()?{$:1,$0:b_.Current()}:null;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};bt.New=function(b9,b_){return{c:b9,r:b_};};bu.convertTextNode=function(b9){var b_,b$,ca,cb,cc,cd;b_=null;b$=0;cb=b9.textContent;cc=new a.RegExp(A.TextHoleRE(),"g");while(b_=cc.exec(cb),b_!==null){b9.parentNode.insertBefore(self.document.createTextNode(W.string(cb,{$:1,$0:b$},{$:1,$0:cc.lastIndex-K.get(b_,0).length-1})),b9);b$=cc.lastIndex;cd=self.document.createElement("span");cd.setAttribute("ws-replace",K.get(b_,1).toLowerCase());b9.parentNode.insertBefore(cd,b9);}cc.lastIndex=0;b9.textContent=W.string(cb,{$:1,$0:b$},null);};bu.failNotLoaded=function(b9){b6.warn("Instantiating non-loaded template",b9);};bu.fillTextHole=function(b9,b_,b$){var ca;ca=b9.querySelector("[ws-replace]");return N.Equals(ca,null)?(b6.warn("Filling non-existent text hole",b$),null):(ca.parentNode.replaceChild(new a.Text(b_),ca),{$:1,$0:ca.getAttribute("ws-replace")});};bu.removeHolesExcept=function(b9,b_){function b$(ca){T.IterSelector(b9,"["+ca+"]",function(cb){if(!b_.Contains(cb.getAttribute(ca)))cb.removeAttribute(ca);});}b$("ws-attr");b$("ws-onafterrender");b$("ws-var");T.IterSelector(b9,"[ws-hole]",function(ca){if(!b_.Contains(ca.getAttribute("ws-hole"))){ca.removeAttribute("ws-hole");while(ca.hasChildNodes())ca.removeChild(ca.lastChild);}});T.IterSelector(b9,"[ws-replace]",function(ca){if(!b_.Contains(ca.getAttribute("ws-replace")))ca.parentNode.removeChild(ca);});T.IterSelector(b9,"[ws-on]",function(ca){ca.setAttribute("ws-on",O.concat(" ",K.filter(function(cb){return b_.Contains(K.get(O.SplitChars(cb,[":"],1),1));},O.SplitChars(ca.getAttribute("ws-on"),[" "],1))));});T.IterSelector(b9,"[ws-attr-holes]",function(ca){var cb,cc,cd,ce,cf;cb=O.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=K.get(cb,cc);ca.setAttribute(ce,(cf=new a.RegExp(A.TextHoleRE(),"g"),ca.getAttribute(ce).replace(cf,function(cg,ch){return b_.Contains(ch)?cg:"";})));}});};bu.fillInstanceAttrs=function(b9,b_){var b$,ca,cb,cc,cd;bu.convertAttrs(b_);b$=b_.nodeName.toLowerCase();ca=b9.querySelector("[ws-attr="+b$+"]");if(N.Equals(ca,null))b6.warn("Filling non-existent attr hole",b$);else{ca.removeAttribute("ws-attr");for(cb=0,cc=b_.attributes.length-1;cb<=cc;cb++){cd=b_.attributes.item(cb);cd.name==="class"&&ca.hasAttribute("class")?ca.setAttribute("class",ca.getAttribute("class")+" "+cd.nodeValue):ca.setAttribute(cd.name,cd.nodeValue);}}};bu.mapHoles=function(b9,b_){function b$(ca){T.IterSelector(b9,"["+ca+"]",function(cb){var cc,cd;cc=(cd=null,[b_.TryGetValue(cb.getAttribute(ca).toLowerCase(),{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);cc[0]?cb.setAttribute(ca,cc[1]):void 0;});}b$("ws-hole");b$("ws-replace");b$("ws-attr");b$("ws-onafterrender");b$("ws-var");T.IterSelector(b9,"[ws-on]",function(ca){ca.setAttribute("ws-on",O.concat(" ",K.map(function(cb){var cc,cd,ce;cc=O.SplitChars(cb,[":"],1);cd=(ce=null,[b_.TryGetValue(K.get(cc,1),{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);return cd[0]?K.get(cc,0)+":"+cd[1]:cb;},O.SplitChars(ca.getAttribute("ws-on"),[" "],1))));});T.IterSelector(b9,"[ws-attr-holes]",function(ca){var cb,cc,cd;cb=O.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);for(cc=0,cd=cb.length-1;cc<=cd;cc++)(function(){var ce;function cf(cg,ch){var ci;ci=e.KeyValue(ch);return cg.replace(new a.RegExp("\\${"+ci[0]+"}","ig"),"${"+ci[1]+"}");}ce=K.get(cb,cc);return ca.setAttribute(ce,(((b4.Curried3(J.fold))(cf))(ca.getAttribute(ce)))(b_));}());});};bu.fill=function(b9,b_,b$){while(true)if(b9.hasChildNodes())b$=b_.insertBefore(b9.lastChild,b$);else return null;};bu.convertAttrs=function(b9){var b$,ca,cb,cc,cd,ce,cf,cg;function b_(ch){var ci;ci=b9.getAttribute(ch);ci===null?void 0:b9.setAttribute(ch,ci.toLowerCase());}b$=b9.attributes;ca=[];cb=[];cc=[];for(cd=0,ce=b$.length-1;cd<=ce;cd++){cf=b$.item(cd);O.StartsWith(cf.nodeName,"ws-on")&&cf.nodeName!=="ws-onafterrender"&&cf.nodeName!=="ws-on"?(ca.push(cf.nodeName),cb.push(W.string(cf.nodeName,{$:1,$0:"ws-on".length},null)+":"+cf.nodeValue.toLowerCase())):!O.StartsWith(cf.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(cf.nodeValue)?(cf.nodeValue=(cg=new a.RegExp(A.TextHoleRE(),"g"),cf.nodeValue.replace(cg,function(ch,ci){return"${"+ci.toLowerCase()+"}";})),cc.push(cf.nodeName)):void 0;}!(cb.length==0)?b9.setAttribute("ws-on",O.concat(" ",cb)):void 0;!(cc.length==0)?b9.setAttribute("ws-attr-holes",O.concat(" ",cc)):void 0;b_("ws-hole");b_("ws-replace");b_("ws-attr");b_("ws-onafterrender");b_("ws-var");K.iter(function(ch){b9.removeAttribute(ch);},ca);};bv=Q.KeyCollection=b4.Class({GetEnumerator$1:function(){return bb.Get(J.map(function(b9){return b9.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},q,bv);bv.New=b4.Ctor(function(b9){q.New.call(this);this.d=b9;},bv);bw=m.DocElemNode=b4.Class({Equals:function(b9){return this.ElKey===b9.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bw);bw.New=function(b9,b_,b$,ca,cb,cc){var cd;return new bw((cd={Attr:b9,Children:b_,El:ca,ElKey:cb},(b4.SetOptional(cd,"Delimiters",b$),b4.SetOptional(cd,"Render",cc),cd)));};bz.New=function(b9,b_){return{PreviousNodes:b9,Top:b_};};bA.get_Empty=function(){return{$:0,$0:new bg.New$3()};};bA.FindAll=function(b9){var b_;function b$(cb){if(cb!=null&&cb.$==0){b$(cb.$0);b$(cb.$1);}else if(cb!=null&&cb.$==1)ca(cb.$0);else if(cb!=null&&cb.$==2)b$(cb.$0.Current);else if(cb!=null&&cb.$==6)K.iter(ca,cb.$0.Holes);}function ca(cb){b_.push(cb);b$(cb.Children);}b_=[];b$(b9);return{$:0,$0:new bg.New$2(b_)};};bA.Filter=function(b9,b_){return{$:0,$0:bU.Filter(b9,b_.$0)};};bA.Except=function(b9,b_){return{$:0,$0:bU.Except(b9.$0,b_.$0)};};bA.ToArray=function(b9){return bU.ToArray(b9.$0);};bA.Intersect=function(b9,b_){return{$:0,$0:bU.Intersect(b9.$0,b_.$0)};};bB.UseAnimations=function(){bO.$cctor();return bO.UseAnimations;};bB.Actions=function(b9){return bB.ConcatActions(K.choose(function(b_){return b_.$==1?{$:1,$0:b_.$0}:null;},bP.ToArray(b9.$0)));};bB.Finalize=function(b9){K.iter(function(b_){if(b_.$==0)b_.$0();},bP.ToArray(b9.$0));};bB.ConcatActions=function(b9){var b_,b$,ca,cb;b_=bd.ofSeqNonCopying(b9);b$=K.length(b_);return b$===0?bB.Const():b$===1?K.get(b_,0):(ca=J.max(J.map(function(cc){return cc.Duration;},b_)),(cb=K.map(function(cc){return bB.Prolong(ca,cc);},b_),bB.Def(ca,function(cc){K.iter(function(cd){cd.Compute(cc);},cb);})));};bB.List=function(b9){return b9.$0;};bB.Const=function(b9){return bB.Def(0,function(){return b9;});};bB.Def=function(b9,b_){return{Compute:b_,Duration:b9};};bB.Prolong=function(b9,b_){var b$,ca,cb;b$=b_.Compute;ca=b_.Duration;cb=bZ.Create(function(){return b_.Compute(b_.Duration);});return{Compute:function(cc){return cc>=ca?cb.f():b$(cc);},Duration:b9};};bC.$cctor=function(){bC.$cctor=a.ignore;bC.BatchUpdatesEnabled=true;};bE=d.OperationCanceledException=b4.Class({},bD,bE);bE.New=b4.Ctor(function(b9){bE.New$1.call(this,"The operation was canceled.",null,b9);},bE);bE.New$1=b4.Ctor(function(b9,b_,b$){this.message=b9;this.inner=b_;ba.setPrototypeOf(this,bE.prototype);this.ct=b$;},bE);bF.Activate=function(b9){var b_,ca,cb,cc,cd,ce,cf;function b$(cg){var ch,ci,cj,ck,cl;if(N.Equals(cg,null))return cg;else if(typeof cg=="object"){if(cg instanceof a.Array)return bF.shallowMap(b$,cg);else{ch=bF.shallowMap(b$,cg.$V);ci=cg.$T;if(ci===void 0)return ch;else{cj=K.get(ca,ci);if(cj===1)return L.ofArray(ch);else if(cj===2)return self.WebSharper.Decimal.CreateDecimalBits(ch);else{ck=new(K.get(ca,ci))();for(var cm in ch)if(function(cn){ck[cn]=ch[cn];return false;}(cm))break;return ck;}}}}else return cg;}ca=b9?b9.$TYPES:void 0;if(ca===void 0)b_=b9;else{for(cb=0,cc=K.length(ca)-1;cb<=cc;cb++){cf=K.get(ca,cb);switch(!N.Equals(cf,null)&&cf.length===3?K.get(cf,0)==="WebSharper"?K.get(cf,1)==="List"?K.get(cf,2)==="T"?0:(ce=cf,2):(ce=cf,2):(ce=cf,2):!N.Equals(cf,null)&&cf.length===2?K.get(cf,0)==="WebSharper"?K.get(cf,1)==="Decimal"?1:(ce=cf,2):(ce=cf,2):(ce=cf,2)){case 0:cd=1;break;case 1:cd=2;break;case 2:cd=bF.lookup(ce);break;}K.set(ca,cb,cd);}b_=b9.$DATA;}return b$(b_);};bF.shallowMap=function(b9,b_){var b$,ca;if(b_ instanceof a.Array)return K.map(b9,b_);else if(typeof b_=="object"){b$={};for(var cb in b_)if(function(cc){b$[cc]=b9(b_[cc]);return false;}(cb))break;return b$;}else return b_;};bF.lookup=function(b9){var b_,b$,ca,cb,cc;ca=K.length(b9);b_=self;b$=0;while(b$<ca){cb=K.get(b9,b$);cc=b_[cb];!N.Equals(typeof cc,void 0)?(b_=cc,b$=b$+1):e.FailWith("Invalid server reply. Failed to find type: "+cb);}return b_;};bG.$cctor=function(){bG.$cctor=a.ignore;bG.Doc=self.document;};bH.Int=function(){bH.set_counter(bH.counter()+1);return bH.counter();};bH.set_counter=function(b9){bX.$cctor();bX.counter=b9;};bH.counter=function(){bX.$cctor();return bX.counter;};bI=u.XhrProvider=b4.Class({Async:function(b9,b_,b$,ca,cb){u.ajax(true,b9,b_,b$,ca,cb,function(){u.ajax(true,b9,b_,b$,ca,cb,void 0);});}},q,bI);bI.New=b4.Ctor(function(){q.New.call(this);},bI);bJ=m.Updates=b4.Class({},null,bJ);bJ.Create=function(b9){var b_;b_=null;b_=bJ.New(b9,null,function(){var b$;b$=b_.s;return b$===null?(b$=E.Copy(b_.c()),b_.s=b$,E.WhenObsoleteRun(b$,function(){b_.s=null;}),b$):b$;});return b_;};bJ.New=function(b9,b_,b$){return new bJ({c:b9,s:b_,v:b$});};bK=_5.Scheduler=b4.Class({Fork:function(b9){var b_;b_=this;this.robin.push(b9);this.idle?(this.idle=false,a.setTimeout(function(){b_.tick();},0)):void 0;},tick:function(){var b9,b_,b$;b_=this;b$=b8.now();b9=true;while(b9)if(this.robin.length===0){this.idle=true;b9=false;}else{(this.robin.shift())();b8.now()-b$>40?(a.setTimeout(function(){b_.tick();},0),b9=false):void 0;}}},q,bK);bK.New=b4.Ctor(function(){q.New.call(this);this.idle=true;this.robin=[];},bK);bL=d.CancellationTokenSource=b4.Class({},q,bL);bL.New=b4.Ctor(function(){q.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bL);bN.New=function(b9,b_,b$,ca){var cb;cb={DynElem:b9,DynFlags:b_,DynNodes:b$};b4.SetOptional(cb,"OnAfterRender",ca);return cb;};bO.$cctor=function(){bO.$cctor=a.ignore;bO.CubicInOut=bT.Custom(function(b9){var b_;b_=b9*b9;return 3*b_-2*(b_*b9);});bO.UseAnimations=true;};bP.Append=function(b9,b_){return b9.$==0?b_:b_.$==0?b9:{$:2,$0:b9,$1:b_};};bP.ToArray=function(b9){var b_;function b$(ca){if(ca.$==1)b_.push(ca.$0);else if(ca.$==2){b$(ca.$0);b$(ca.$1);}else if(ca.$==3)K.iter(function(cb){b_.push(cb);},ca.$0);}b_=[];b$(b9);return b_.slice(0);};bP.Concat=function(b9){var b_;b_=bd.ofSeqNonCopying(b9);return bd.TreeReduce(bP.Empty(),bP.Append,b_);};bP.Empty=function(){b0.$cctor();return b0.Empty;};bQ.Clear=function(b9){b9.splice(0,K.length(b9));};bR.$cctor=function(){bR.$cctor=a.ignore;bR.EmptyAttr=null;};bS=m.DynamicAttrNode=b4.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b9){return bh.get_Empty();},NGetEnterAnim:function(b9){return bh.get_Empty();},NGetChangeAnim:function(b9){return bh.get_Empty();},NSync:function(b9){if(this.dirty){(this.push(b9))(this.value);this.dirty=false;}}},q,bS);bS.New=b4.Ctor(function(b9,b_){var b$;b$=this;q.New.call(this);this.push=b_;this.value=void 0;this.dirty=false;this.updates=n.Map(function(ca){b$.value=ca;b$.dirty=true;},b9);},bS);bT=m.Easing=b4.Class({},q,bT);bT.Custom=function(b9){return new bT.New(b9);};bT.New=b4.Ctor(function(b9){q.New.call(this);this.transformTime=b9;},bT);bU.Filter=function(b9,b_){return new bg.New$2(K.filter(b9,bU.ToArray(b_)));};bU.Except=function(b9,b_){var b$;b$=new bg.New$2(bU.ToArray(b_));b$.ExceptWith(bU.ToArray(b9));return b$;};bU.ToArray=function(b9){var b_;b_=K.create(b9.get_Count(),void 0);b9.CopyTo(b_);return b_;};bU.Intersect=function(b9,b_){var b$;b$=new bg.New$2(bU.ToArray(b9));b$.IntersectWith(bU.ToArray(b_));return b$;};bV.concat=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push.apply(b_,b9[ca]);return b_;};bW=d.FormatException=b4.Class({},bD,bW);bW.New$1=b4.Ctor(function(b9){this.message=b9;ba.setPrototypeOf(this,bW.prototype);},bW);bX.$cctor=function(){bX.$cctor=a.ignore;bX.counter=0;};bY.Children=function(b9,b_){var b$,ca,cb;if(b_!=null&&b_.$==1){cb=[];b$=b_.$0[0].nextSibling;while(b$!==b_.$0[1]){cb.push(b$);b$=b$.nextSibling;}return{$:0,$0:cb};}else return{$:0,$0:K.init(b9.childNodes.length,(ca=b9.childNodes,function(cc){return ca[cc];}))};};bY.Except=function(b9,b_){var b$;b$=b9.$0;return{$:0,$0:K.filter(function(ca){return K.forall(function(cb){return!(ca===cb);},b$);},b_.$0)};};bY.Iter=function(b9,b_){K.iter(b9,b_.$0);};bY.DocChildren=function(b9){var b_;function b$(ca){if(ca!=null&&ca.$==2)b$(ca.$0.Current);else if(ca!=null&&ca.$==1)b_.push(ca.$0.El);else if(ca==null);else if(ca!=null&&ca.$==5)b_.push(ca.$0);else if(ca!=null&&ca.$==4)b_.push(ca.$0.Text);else if(ca!=null&&ca.$==6)K.iter(function(cb){if(cb==null||cb.constructor===ba)b$(cb);else b_.push(cb);},ca.$0.Els);else{b$(ca.$0);b$(ca.$1);}}b_=[];b$(b9.Children);return{$:0,$0:bd.ofSeqNonCopying(b_)};};bZ.Create=function(b9){return b2.New(false,b9,bZ.forceLazy);};bZ.forceLazy=function(){var b9;b9=this.v();this.c=true;this.v=b9;this.f=bZ.cachedLazy;return b9;};bZ.cachedLazy=function(){return this.v;};b0.$cctor=function(){b0.$cctor=a.ignore;b0.Empty={$:0};};b2.New=function(b9,b_,b$){return{c:b9,v:b_,f:b$};};b4.OnLoad(function(){c.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

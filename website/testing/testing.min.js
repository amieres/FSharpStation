(function(n){"use strict";n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=b.LibraryJS=b.LibraryJS||{};g=f.WsTranslatorLoader=f.WsTranslatorLoader||{};h=g.UI=g.UI||{};i=a.EventTarget;j=a.Node;k=d.JavaScript=d.JavaScript||{};l=k.JS=k.JS||{};m=d.Utils=d.Utils||{};n=d.UI=d.UI||{};o=n.View=n.View||{};p=a.WsTranslatorLoader_GeneratedPrintf=a.WsTranslatorLoader_GeneratedPrintf||{};q=a.GeneratedPrintf=a.GeneratedPrintf||{};r=d.Obj=d.Obj||{};s=n.Var=n.Var||{};t=g.WasmLoad=g.WasmLoad||{};u=g.WWorker=g.WWorker||{};v=d.Remoting=d.Remoting||{};w=v.AjaxRemotingProvider=v.AjaxRemotingProvider||{};x=n.HtmlModule=n.HtmlModule||{};y=x.attr=x.attr||{};z=n.Client=n.Client||{};A=z.Templates=z.Templates||{};B=n.Doc=n.Doc||{};C=k.Pervasives=k.Pervasives||{};D=a.WindowOrWorkerGlobalScope;E=a.StartupCode$WsTranslatorLoader$WsTranslatorLoader=a.StartupCode$WsTranslatorLoader$WsTranslatorLoader||{};F=d.Unchecked=d.Unchecked||{};G=n.Snap=n.Snap||{};H=g.WasmStatus=g.WasmStatus||{};I=g.Dependency=g.Dependency||{};J=g.Remoting=g.Remoting||{};K=J.IMessagingO=J.IMessagingO||{};L=d.Seq=d.Seq||{};M=d.Arrays=d.Arrays||{};N=d.Strings=d.Strings||{};O=n.AttrProxy=n.AttrProxy||{};P=d.Collections=d.Collections||{};Q=P.Dictionary=P.Dictionary||{};R=n.Docs=n.Docs||{};S=n.DomUtility=n.DomUtility||{};T=b.Library=b.Library||{};U=T.String=T.String||{};V=d.Slice=d.Slice||{};W=T.ParseO=T.ParseO||{};X=d.Numeric=d.Numeric||{};Y=a.System=a.System||{};Z=Y.Guid=Y.Guid||{};_0=n.Var$1=n.Var$1||{};_1=a.Event;_2=J.ReturnQueue=J.ReturnQueue||{};_3=J.CustomXhrProvider=J.CustomXhrProvider||{};_4=d.Concurrency=d.Concurrency||{};_5=t.Require=t.Require||{};_6=b.WsTranslator=b.WsTranslator||{};_7=f.Pojo=f.Pojo||{};_8=a.XMLHttpRequestEventTarget;_9=a.ArrayBufferView;_=d.List=d.List||{};$=n.AttrModule=n.AttrModule||{};ba=a.Object;bb=d.Enumerator=d.Enumerator||{};bc=bb.T=bb.T||{};bd=n.Array=n.Array||{};be=n.Attrs=n.Attrs||{};bf=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bg=P.HashSet=P.HashSet||{};bh=n.An=n.An||{};bi=z.Settings=z.Settings||{};bj=n.Abbrev=n.Abbrev||{};bk=bj.Mailbox=bj.Mailbox||{};bl=d.DateUtil=d.DateUtil||{};bm=n.ConcreteVar=n.ConcreteVar||{};bn=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};bo=P.DictionaryUtil=P.DictionaryUtil||{};bp=n.Elt=n.Elt||{};bq=_4.AsyncBody=_4.AsyncBody||{};br=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bs=_4.CT=_4.CT||{};bt=_.T=_.T||{};bu=n.BindVar=n.BindVar||{};bv=A.Prepare=A.Prepare||{};bw=P.KeyCollection=P.KeyCollection||{};bx=n.DocElemNode=n.DocElemNode||{};by=a.CharacterData;bz=z.Docs=z.Docs||{};bA=bz.RunState=bz.RunState||{};bB=bz.NodeSet=bz.NodeSet||{};bC=n.Anims=n.Anims||{};bD=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bE=a.Error;bF=d.OperationCanceledException=d.OperationCanceledException||{};bG=d.Json=d.Json||{};bH=bj.Fresh=bj.Fresh||{};bI=v.XhrProvider=v.XhrProvider||{};bJ=n.Updates=n.Updates||{};bK=_4.Scheduler=_4.Scheduler||{};bL=d.CancellationTokenSource=d.CancellationTokenSource||{};bM=a.StartupCode$WsTranslator47$WsTranslator47=a.StartupCode$WsTranslator47$WsTranslator47||{};bN=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bO=z.Attrs=z.Attrs||{};bP=bO.Dyn=bO.Dyn||{};bQ=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bR=n.AppendList=n.AppendList||{};bS=d.Queue=d.Queue||{};bT=n.String=n.String||{};bU=n.CheckedInput=n.CheckedInput||{};bV=n.DynamicAttrNode=n.DynamicAttrNode||{};bW=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bX=n.Easing=n.Easing||{};bY=bj.HashSet=bj.HashSet||{};bZ=P.HashSetUtil=P.HashSetUtil||{};b0=d.FormatException=d.FormatException||{};b1=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};b2=d.Char=d.Char||{};b3=bz.DomNodes=bz.DomNodes||{};b4=d.Lazy=d.Lazy||{};b5=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b6=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};b7=b6.LazyRecord=b6.LazyRecord||{};b8=a.Math;b9=a.IntelliFactory;b_=b9&&b9.Runtime;b$=a.console;ca=a.Date;cb=a.JSON;c.main=function(){var cc,cd;cc=h.mainDoc();cd=self.document.body;A.LoadLocalTemplates("");B.Run(cd,cc);};e.toInt=function(cc){var cd;cd=e.toUInt(cc);return cd>=2147483648?cd-4294967296:cd;};e.FailWith=function(cc){throw new bE(cc);};e.toUInt=function(cc){return(cc<0?b8.ceil(cc):b8.floor(cc))>>>0;};e.KeyValue=function(cc){return[cc.K,cc.V];};h.mainDoc=function(){var cc,cd,ce;return B.Element("div",[],[B.Element("h1",[],[B.TextNode((function(cf){return function(cg){return cf("HELLO WASM"+m.toSafe(cg)+"!");};}(a.id))(g.WasmLoaderVersion()))]),B.Element("h2",[],[B.TextView(o.Map(function(cf){return(function(cg){return function(ch){return cg(p.p(ch));};}(a.id))(cf);},g.wasmStatusV().get_View()))]),B.Element("span",[],[B.Button("Load as Worker",[],function(){t.loadWasmInWorker(h.debugV().Get(),h.optsV().Get());}),B.Button("Load in Main thread",[],function(){t.loadInThisThread(h.debugV().Get(),h.optsV().Get());}),B.Button("Terminate Worker",[],function(){u.terminate();}),B.TextNode(" Debug:"),B.CheckBox([],h.debugV())]),B.Element("div",[],[B.InputArea([],h.codeV()),B.InputArea([],h.optsV())]),B.Element("span",[],[B.Button("Check",[],function(){h.clean();h.callWasmTimed("Check",function(cf){return h.parseAndCheckProject(cf[0],cf[1],cf[2]);},h.getParms());}),B.Button("Translate",[],function(){h.clean();h.callWasmTimed("Translate",function(cf){return h.translateToJs(cf[0],cf[1],cf[2]);},h.getParms());}),B.Button("Dir",[],function(){h.callWasmTimed("Dir",function(cf){return(new w.New()).Async("WsTranslator47:FsRoot.WsTranslator+Rpc.dirRpc:-1181784350",[cf]);},"/");}),B.Button("Clean",[],function(){h.clean();})]),h.showMessages("Fsc Messages",(cc=function(cf){return function(cg){return cf("("+q.p(cg[0])+", "+m.prettyPrint(cg[1])+")");};}(a.id),function(cf){return cc([cf[0],cf[1]]);}),h.fsErrsV().get_View()),h.showMessages("Ws  Errors",(cd=function(cf){return function(cg){return cf("("+p.p$1(cg[0])+", "+m.prettyPrint(cg[1])+")");};}(a.id),function(cf){return cd([cf[0],cf[1]]);}),h.wsErrsV().get_View()),h.showMessages("Ws  Warnings",(ce=function(cf){return function(cg){return cf("("+p.p$1(cg[0])+", "+m.prettyPrint(cg[1])+")");};}(a.id),function(cf){return ce([cf[0],cf[1]]);}),h.wsWrnsV().get_View()),B.Element("div",[O.Create("style","font-family: monospace; white-space:pre")],[B.TextView(h.detailsV().get_View())])]);};h.debugV=function(){E.$cctor();return E.debugV;};h.optsV=function(){E.$cctor();return E.optsV;};h.codeV=function(){E.$cctor();return E.codeV;};h.clean=function(){h.detailsV().Set("");};h.callWasmTimed=function(cc,cd,ce){var cf;function cg(ch){return h.callWasmA(cd,ch);}_4.Start((cf=null,_4.Delay(function(){var ch,ci;(((b_.Curried3(function(cj,ck,cl){return cj(m.toSafe(ck)+" Starting "+m.toSafe(cl));}))(function(cj){b$.log(cj);}))(function(cj){return cj.getFullYear()+"-"+("0"+(cj.getMonth()+1)).slice(-2)+"-"+("0"+cj.getDate()).slice(-2)+" "+("0"+cj.getHours()).slice(-2)+":"+("0"+cj.getMinutes()).slice(-2)+":"+("0"+cj.getSeconds()).slice(-2)+":"+("00"+cj.getMilliseconds()).slice(-3);}(new a.Date(ca.now()))))(cc);ch=(ci=ca.now(),ci*10000);return _4.Bind(cg(ce),function(){var cj,ck;cj=((ck=ca.now(),ck*10000)-ch)/10000;(((((((b_.Curried(function(cl,cm,cn,co,cp,cq,cr){return cl(m.toSafe(cm)+" Finished "+m.toSafe(cn)+" "+a.String(co)+":"+m.padNumLeft(a.String(cp),2)+":"+m.padNumLeft(a.String(cq),2)+"."+m.padNumLeft(a.String(cr),3));},7))(function(cl){b$.log(cl);}))(function(cl){return cl.getFullYear()+"-"+("0"+(cl.getMonth()+1)).slice(-2)+"-"+("0"+cl.getDate()).slice(-2)+" "+("0"+cl.getHours()).slice(-2)+":"+("0"+cl.getMinutes()).slice(-2)+":"+("0"+cl.getSeconds()).slice(-2)+":"+("00"+cl.getMilliseconds()).slice(-3);}(new ca(ca.now()))))(cc))(e.toInt(cj/3600000)))(b8.floor(cj/60000)%60))(b8.floor(cj/1000)%60))(cj%1000);return _4.Zero();});})),null);};h.parseAndCheckProject=function(cc,cd,ce){var cf;cf=null;return _4.Delay(function(){return _4.Bind((new w.New()).Async("WsTranslator47:FsRoot.WsTranslator+Rpc.parseAndCheckProjectRpc:1033688720",[cc,cd,ce]),function(cg){var ch;h.fsErrsV().Set(M.ofSeq(cg[0]));h.wsErrsV().Set([]);h.wsWrnsV().Set([]);ch=(function(ci){return function(cj){return ci("("+m.prettyPrint(cj[0])+", "+m.printArray(m.prettyPrint,cj[1])+")");};}(a.id))([cg[2],cg[1]]);h.detailsV().Set(ch);return _4.Zero();});});};h.getParms=function(){return["WasmTest",M.filter(function(cc){return N.Trim(cc)!=="";},N.SplitChars("fsc.exe\n"+h.optsV().Get(),["\n"],0)),h.codeV().Get()];};h.translateToJs=function(cc,cd,ce){var cf;cf=null;return _4.Delay(function(){return _4.Bind((new w.New()).Async("WsTranslator47:FsRoot.WsTranslator+Rpc.translateFsToJsRpc:1355092715",[cc,cd,ce]),function(cg){var ch,ci;ch=cg[1];h.fsErrsV().Set(cg[0]);return ch==null?(h.clean(),h.wsErrsV().Set([]),h.wsWrnsV().Set([]),_4.Zero()):(ci=ch.$0[0],(h.detailsV().Set(ci==null?"No translation":ci.$0),h.wsErrsV().Set(ch.$0[1]),h.wsWrnsV().Set(ch.$0[2]),_4.Zero()));});});};h.showMessages=function(cc,cd,ce){return B.BindView(function(cf){return M.length(cf)===0?B.get_Empty():B.Element("div",[],[B.TextNode(cc),B.Element("ol",[],[B.Concat(L.map(function(cg){return B.Element("li",[],[B.TextNode(cd(cg))]);},cf))])]);},ce);};h.fsErrsV=function(){E.$cctor();return E.fsErrsV;};h.wsErrsV=function(){E.$cctor();return E.wsErrsV;};h.wsWrnsV=function(){E.$cctor();return E.wsWrnsV;};h.detailsV=function(){E.$cctor();return E.detailsV;};h.callWasmA=function(cc,cd){var ce;ce=null;return _4.Delay(function(){return _4.Combine(g.wasmStatusV().Get().$===0?(t.loadWasmInWorker(h.debugV().Get(),h.optsV().Get()),_4.Zero()):_4.Zero(),_4.Delay(function(){return _4.Bind(_4.Sleep(50),function(){return _4.Combine(_4.While(function(){var cf;cf=g.wasmStatusV().Get();return cf.$==2?false:cf.$!=4;},_4.Delay(function(){g.printfn(function(cf){return cf("Waiting for WASM to load...");});return _4.Bind(_4.Sleep(2000),function(){return _4.Return(null);});})),_4.Delay(function(){return _4.TryWith(_4.Delay(function(){return _4.Bind(cc(cd),function(){return _4.Return(null);});}),function(cf){(g.printfn(function(cg){return function(ch){return cg(m.prettyPrint(ch));};}))(cf);return _4.Zero();});}));});}));});};l.GetFields=function(cc){var cd,ce;cd=[];for(var cf in cc)cd.push([cf,cc[cf]]);return cd;};l.GetFieldValues=function(cc){var cd,ce;cd=[];for(var cf in cc)cd.push(cc[cf]);return cd;};g.WasmLoaderVersion=function(){E.$cctor();return E.WasmLoaderVersion;};g.wasmStatusV=function(){E.$cctor();return E.wasmStatusV;};g.printfn=function(cc){return cc(J.messaging().get_D().wprintfn);};m.toSafe=function(cc){return cc==null?"":cc;};m.prettyPrint=function(cc){var cd,ce;function cf(cg,ch){return cg+" = "+m.prettyPrint(ch);}return cc===null?"null":(cd=typeof cc,cd=="string"?"\""+cc+"\"":cd=="object"?cc instanceof a.Array?"[|"+N.concat("; ",M.map(m.prettyPrint,cc))+"|]":(ce=a.String(cc),ce==="[object Object]"?"{"+N.concat("; ",M.map(function(cg){return cf(cg[0],cg[1]);},l.GetFields(cc)))+"}":ce):a.String(cc));};m.printArray=function(cc,cd){return cd===null?"null":"[|"+N.concat("; ",M.map(cc,cd))+"|]";};m.padNumLeft=function(cc,cd){var ce;ce=M.get(cc,0);return ce===" "||ce==="+"||ce==="-"?ce+N.PadLeftWith(cc.substr(1),cd-1,"0"):N.PadLeftWith(cc,cd,"0");};o.Map=function(cc,cd){return o.CreateLazy(function(){return G.Map(cc,cd());});};o.CreateLazy=function(cc){var cd;cd={c:null,o:cc};return function(){var ce,cf;ce=cd.c;return ce===null?(ce=cd.o(),cd.c=ce,(cf=ce.s,cf!=null&&cf.$==0)?cd.o=null:G.WhenObsoleteRun(ce,function(){cd.c=null;}),ce):ce;};};o.Const=function(cc){var cd;cd=G.New({$:0,$0:cc});return function(){return cd;};};o.Sink=function(cc,cd){function ce(){G.WhenRun(cd(),cc,function(){_4.scheduler().Fork(ce);});}_4.scheduler().Fork(ce);};o.Map2Unit=function(cc,cd){return o.CreateLazy(function(){return G.Map2Unit(cc(),cd());});};o.Bind=function(cc,cd){return o.Join(o.Map(cc,cd));};o.Join=function(cc){return o.CreateLazy(function(){return G.Join(cc());});};p.p=function(cc){return cc.$==4?"WasmWorkerLoaded":cc.$==3?"WasmWorkerLoading":cc.$==2?"WasmLoaded":cc.$==1?"WasmLoading":"WasmNotLoaded";};q.p=function(cc){return"{"+("FileName = "+m.prettyPrint(cc.FileName))+"; "+("Start = "+("("+m.prettyPrint(cc.Start[0])+", "+m.prettyPrint(cc.Start[1])+")"))+"; "+("End = "+("("+m.prettyPrint(cc.End[0])+", "+m.prettyPrint(cc.End[1])+")"))+"}";};p.p$1=function(cc){return cc==null?"null":"Some "+q.p(cc.$0);};r=d.Obj=b_.Class({Equals:function(cc){return this===cc;},GetHashCode:function(){return -1;}},null,r);r.New=b_.Ctor(function(){},r);s=n.Var=b_.Class({},r,s);s.New=b_.Ctor(function(){r.New.call(this);},s);t.loadWasmInWorker=function(cc,cd){var ce;if(!self.document)g.printfn(function(cf){return cf("Already in a worker cannot load Wasm in another worker");});else if(g.wasmStatusV().Get().$!==0)(g.printfn(function(cf){return function(cg){return cf("Wasm is already "+p.p(cg));};}))(g.wasmStatusV().Get());else{g.wasmStatusV().Set(H.WasmLoading);g.printfn(function(cf){return cf("Initiating WebWorker");});self.IntelliFactory.Runtime.ScriptPath=function(cf,cg){return t.rootPath()+cg;};ce=new a.Worker(b_.ScriptPath("WsTranslatorLoader","WsTranslatorLoader.worker.js"));ce.postMessage({$:2,$0:cc,$1:cd});ce.onmessage=u.fromWorker;u.set_workerO({$:1,$0:ce});J.messaging().set_D(K.New(function(cf){return function(cg){return ce.postMessage({$:0,$0:cf,$1:cg});};},function(cf){J.returnValue0(cf[0],cf[1]);},function(cf){J.returnExn0(cf[0],cf[1]);},J.messaging().get_D().wprintfn));J.installProvider();}};t.loadInThisThread=function(cc,cd){var ce,cf,cg;cf=!self.document;cg=g.wasmStatusV().Get();switch(cf?cg.$==3?1:cg.$==1?2:cg.$==2?4:cg.$==0?6:0:cg.$==1?1:cg.$==3?3:cg.$==4?5:cg.$==0?6:0){case 0:null;break;case 1:g.printfn(function(ch){return ch("WASM is loading");});break;case 2:g.printfn(function(ch){return ch("WASM is loading in the main thread");});break;case 3:g.printfn(function(ch){return ch("WASM is loading in a WebWorker");});break;case 4:g.printfn(function(ch){return ch("WASM is loaded in the main thread");});break;case 5:g.printfn(function(ch){return ch("WASM is loaded in a WebWorker");});break;case 6:_4.Start(_4.FromContinuations(function(ch){var ci;function cj(){t.bindWasm();g.printfn(function(cl){return cl("WASM Initialized!");});g.wasmStatusV().Set(!self.document?H.WasmWorkerLoaded:H.WasmLoaded);ch();}function ck(){var cl,cm,cn,co,cp,cq,cr;cl=(cm=self.Module.cwrap("mono_wasm_setenv","void",["string","string"]),function(cs){cm(cs[0],cs[1]);});cc?(cl(["MONO_LOG_LEVEL","debug"]),cl(["MONO_LOG_MASK","all"])):void 0;cn=self.config;co=cn.vfs_prefix;cp=cn.deploy_prefix;cq=cn.enable_debugging;cr=cn.file_list;self.MONO.mono_load_runtime_and_bcl(co,cp,cq,cr,cj);}return _4.Start((ci=null,_4.Delay(function(){g.printfn(function(cl){return cl("Loading WASM. Hold on, this will take a while...");});g.wasmStatusV().Set(!self.document?H.WasmWorkerLoading:H.WasmLoading);return _4.Bind(_4.Sleep(50),function(){return _4.Combine(!(!self.document)?(J.installProvider(),_4.Zero()):_4.Zero(),_4.Delay(function(){return _4.Bind(t.requireJsA([t.rootPath()+"mono-config.js"]),function(){var cl,cm;self.Module=self.Module||{};self.Module.onRuntimeInitialized=ck;cl=g.printfn(function(cn){return function(co){return cn(m.toSafe(co));};});self.Module.print=cl;cm=g.printfn(function(cn){return function(co){return cn(m.toSafe(co));};});self.Module.printErr=cm;self.Module.preRun=[function(){t.preloadFiles(t.filesToPreload(cd));}];return _4.Bind(t.requireJsA([t.rootPath()+"dotnet.js"]),function(){return _4.Zero();});});}));});})),null);}),null);break;}};t.rootPath=function(){E.$cctor();return E.rootPath;};t.requireJsA=function(cc){return _4.FromContinuations(function(cd){return a.requirejs(M.ofSeq(cc),cd);});};t.filesToPreload=function(cc){return _.ofSeq(L.delay(function(){return L.append(_6.dlls(),L.delay(function(){return M.choose(function(cd){var ce;ce=U.StartsWith("-r:",cd);return ce!=null&&ce.$==1?{$:1,$0:ce.$0}:null;},N.SplitChars(cc,["\n"],0));}));}));};t.preloadFiles=function(cc){var cd,ce,cf,cg,ch,ci;self.Browser=_7.newPojo([["init",a.ignore],["asyncLoad",function(cj,ck,cl){var cm;cm=new self.XMLHttpRequest();cm.open("GET",cj,true);cm.responseType="arraybuffer";cm.onload=function(){return cm.status===200||cm.status===0&&!F.Equals(cm.response,null)?ck(new a.Uint8Array(cm.response)):cl();};cm.onerror=function(){return cl();};return cm.send(null);}]]);self.Module=self.Module||{};self.Module.preloadPlugins=[];cd=L.cache(L.distinct(L.map(function(cj){return[N.concat("/",V.array(cj,null,{$:1,$0:M.length(cj)-2})),L.last(cj)];},L.map(function(cj){return M.map(N.Trim,cj);},L.map(function(cj){return N.SplitChars(N.Replace(cj,"\\","/"),["/"],0);},cc)))));L.iter(function(cj){try{self.FS.mkdir(cj);}catch(ck){null;}},L.distinct(L.map(function(cj){return cj[0];},cd)));ce=bb.Get(cd);try{while(ce.MoveNext()){cf=ce.Current();cg=cf[1];ch=cf[0];ci=N.Replace(t.rootPath()+ch+"/"+cg,"//","/");(g.printfn(function(cj){return function(ck){return cj("Preloading "+m.toSafe(ck));};}))(ci);self.FS.createPreloadedFile(ch,cg,ci,1,1);}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};t.bindWasm=function(){L.iter(function(cc){t.bindStaticMethod(cc[0],cc[1],cc[2]);},_.ofArray([["WsTranslator47","FsRoot.WsTranslator","runRpc"]]));};t.bindStaticMethod=function(cc,cd,ce){var cf;self[((((b_.Curried(function(cg,ch,ci,cj){return cg("WASM_"+m.toSafe(ch)+"_"+m.toSafe(ci)+"_"+m.toSafe(cj));},4))(a.id))(cc))(N.Replace(cd,".","_")))(ce)]=(cf=((((b_.Curried(function(cg,ch,ci,cj){return cg("["+m.toSafe(ch)+"]"+m.toSafe(ci)+":"+m.toSafe(cj));},4))(a.id))(cc))(cd))(ce),self.Module.mono_bind_static_method(cf));};u.terminate=function(){var cc;if(cc=u.workerO(),cc!=null&&cc.$==1){u.workerO().$0.terminate();u.set_workerO(null);g.printfn(function(cd){return cd("Worker terminated!");});g.wasmStatusV().Set(H.WasmNotLoaded);}else g.printfn(function(cd){return cd("Worker is not present");});};u.fromWorker=function(cc){var cd,ce;cd=cc.data;cd.$==1?J.returnExn0(cd.$0,cd.$1):cd.$==2?(g.printfn(function(cf){return function(cg){return cf(m.toSafe(cg));};}))(cd.$0):cd.$==3?(ce=cd.$0,!F.Equals(g.wasmStatusV().Get(),ce)?g.wasmStatusV().Set(ce):void 0):J.returnValue0(cd.$0,cd.$1);};u.set_workerO=function(cc){E.$cctor();E.workerO=cc;};u.workerO=function(){E.$cctor();return E.workerO;};w=v.AjaxRemotingProvider=b_.Class({AsyncBase:function(cc,cd){var ce,cf;ce=this;cf=null;return _4.Delay(function(){var cg,ch;cg=v.makeHeaders(cc);ch=v.makePayload(cd);return _4.Bind(_4.GetCT(),function(ci){return _4.FromContinuations(function(cj,ck,cl){var cm,cn,co;function cp(cq){return cm[0]?(cm[0]=false,cl(new bF.New(ci))):null;}cm=[true];cn=_4.Register(ci,function(){cp();});co=ce.get_EndPoint();return v.AjaxProvider().Async(co,cg,ch,function(cq){if(cm[0]){cm[0]=false;cn.Dispose();cj(bG.Activate(cb.parse(cq)));}},function(cq){if(cm[0]){cm[0]=false;cn.Dispose();ck(cq);}});});});});},get_EndPoint:function(){return v.EndPoint();},Async:function(cc,cd){return this.AsyncBase(cc,cd);}},r,w);w.New=b_.Ctor(function(){r.New.call(this);},w);y=x.attr=b_.Class({},r,y);A.LoadLocalTemplates=function(cc){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(cc,A.LoadedTemplateFile(""));};A.LocalTemplatesLoaded=function(){bf.$cctor();return bf.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(cc){bf.$cctor();bf.LocalTemplatesLoaded=cc;};A.LoadNestedTemplates=function(cc,cd){var cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;function ce(cs){var ct,cu;if(!cf.ContainsKey(cs)){ct=(cu=null,[cg.TryGetValue(cs,{get:function(){return cu;},set:function(cv){cu=cv;}}),cu]);ct[0]?(cr.Add(cs),cg.Remove(cs),A.PrepareTemplateStrict(cd,{$:1,$0:cs},ct[1],{$:1,$0:ce})):b$.warn(cr.Contains(cs)?"Encountered loop when instantiating "+cs:"Local template does not exist: "+cs);}}cf=A.LoadedTemplateFile(cd);cg=new Q.New$5();ch=cc.querySelectorAll("[ws-template]");for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];cl=ck.getAttribute("ws-template").toLowerCase();ck.removeAttribute("ws-template");cg.set_Item(cl,A.FakeRootSingle(ck));}cm=cc.querySelectorAll("[ws-children-template]");for(cn=0,co=cm.length-1;cn<=co;cn++){cp=cm[cn];cq=cp.getAttribute("ws-children-template").toLowerCase();cp.removeAttribute("ws-children-template");cg.set_Item(cq,A.FakeRoot(cp));}cr=new bg.New$3();while(cg.count>0)ce(L.head(cg.get_Keys()));};A.LoadedTemplates=function(){bf.$cctor();return bf.LoadedTemplates;};A.LoadedTemplateFile=function(cc){var cd,ce,cf;cd=(ce=null,[A.LoadedTemplates().TryGetValue(cc,{get:function(){return ce;},set:function(cg){ce=cg;}}),ce]);return cd[0]?cd[1]:(cf=new Q.New$5(),(A.LoadedTemplates().set_Item(cc,cf),cf));};A.FakeRootSingle=function(cc){var cd,ce,cf,cg;cc.removeAttribute("ws-template");cd=cc.getAttribute("ws-replace");cd===null?void 0:(cc.removeAttribute("ws-replace"),ce=cc.parentNode,F.Equals(ce,null)?void 0:(cf=self.document.createElement(cc.tagName),cf.setAttribute("ws-replace",cd),ce.replaceChild(cf,cc)));cg=self.document.createElement("div");cg.appendChild(cc);return cg;};A.FakeRoot=function(cc){var cd;cd=self.document.createElement("div");while(cc.hasChildNodes())cd.appendChild(cc.firstChild);return cd;};A.PrepareTemplateStrict=function(cc,cd,ce,cf){var cg;function ch(cn,co){var cp,cq,cr,cs,ct,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;function cu(cQ){}while(true)switch(cn){case 0:if(co!==null){cp=co.nextSibling;if(F.Equals(co.nodeType,j.TEXT_NODE))bv.convertTextNode(co);else if(F.Equals(co.nodeType,j.ELEMENT_NODE))cj(co);co=cp;}else return null;break;case 1:cv=V.string(co.nodeName,{$:1,$0:3},null).toLowerCase();cw=(cq=cv.indexOf("."),cq===-1?[cc,cv]:[V.string(cv,null,{$:1,$0:cq-1}),V.string(cv,{$:1,$0:cq+1},null)]);cx=cw[1];cy=cw[0];if(cy!==""&&!A.LoadedTemplates().ContainsKey(cy))return bv.failNotLoaded(cx);else{if(cy===""&&cf!=null)cf.$0(cx);cz=A.LoadedTemplates().get_Item(cy);if(!cz.ContainsKey(cx))return bv.failNotLoaded(cx);else{cA=cz.get_Item(cx);cB=cA.cloneNode(true);cC=new bg.New$3();cD=new Q.New$5();cE=co.attributes;for(cF=0,cG=cE.length-1;cF<=cG;cF++){cH=cE.item(cF).name.toLowerCase();cD.set_Item(cH,(cI=cE.item(cF).nodeValue,cI===""?cH:cI.toLowerCase()));!cC.Add(cH)?b$.warn("Hole mapped twice",cH):void 0;}for(cJ=0,cK=co.childNodes.length-1;cJ<=cK;cJ++){cL=co.childNodes[cJ];F.Equals(cL.nodeType,j.ELEMENT_NODE)?!cC.Add(cL.nodeName.toLowerCase())?b$.warn("Hole filled twice",cx):void 0:void 0;}cM=co.childNodes.length===1&&F.Equals(co.firstChild.nodeType,j.TEXT_NODE);if(cM){cs=bv.fillTextHole(cB,co.firstChild.textContent,cx);((function(cQ){return function(cR){if(cR!=null)cQ(cR.$0);};}((ct=function(cQ){return function(cR){return cQ.Add(cR);};}(cC),function(cQ){return cu(ct(cQ));})))(cs));}bv.removeHolesExcept(cB,cC);if(!cM){for(cN=0,cO=co.childNodes.length-1;cN<=cO;cN++){cP=co.childNodes[cN];F.Equals(cP.nodeType,j.ELEMENT_NODE)?cP.hasAttributes()?bv.fillInstanceAttrs(cB,cP):ci(cB,cP):void 0;}}bv.mapHoles(cB,cD);bv.fill(cB,co.parentNode,co);co.parentNode.removeChild(co);return;}}break;}}function ci(cn,co){var cp,cr,cs;function cq(ct,cu){var cv;if(cr==="title"&&co.hasChildNodes()){cv=S.ParseHTMLIntoFakeRoot(co.textContent);co.removeChild(co.firstChild);while(cv.hasChildNodes())co.appendChild(cv.firstChild);}else null;cj(co);return bv.fill(co,ct,cu);}cr=co.nodeName.toLowerCase();A.foreachNotPreserved(cn,"[ws-attr-holes]",function(ct){var cu,cv,cw,cx,cy;cu=N.SplitChars(ct.getAttribute("ws-attr-holes"),[" "],1);for(cv=0,cw=cu.length-1;cv<=cw;cv++){cx=M.get(cu,cv);ct.setAttribute(cx,(cy=new a.RegExp("\\${"+cr+"}","ig"),ct.getAttribute(cx).replace(cy,co.textContent)));}});cs=cn.querySelector("[ws-hole="+cr+"]");if(F.Equals(cs,null)){cp=cn.querySelector("[ws-replace="+cr+"]");return F.Equals(cp,null)?null:(cq(cp.parentNode,cp),void cp.parentNode.removeChild(cp));}else{while(cs.hasChildNodes())cs.removeChild(cs.lastChild);cs.removeAttribute("ws-hole");return cq(cs,null);}}function cj(cn){if(!cn.hasAttribute("ws-preserve"))if(N.StartsWith(cn.nodeName.toLowerCase(),"ws-"))cl(cn);else{bv.convertAttrs(cn);ck(cn.firstChild);}}function ck(cn){return ch(0,cn);}function cl(cn){return ch(1,cn);}function cm(cn){var co,cp,cq,cr;while(true){co=cn.querySelector("[ws-template]");if(F.Equals(co,null)){cp=cn.querySelector("[ws-children-template]");if(F.Equals(cp,null))return null;else{cq=cp.getAttribute("ws-children-template");cp.removeAttribute("ws-children-template");A.PrepareTemplateStrict(cc,{$:1,$0:cq},cp,null);cn=cn;}}else{cr=co.getAttribute("ws-template");(A.PrepareSingleTemplate(cc,{$:1,$0:cr},co))(null);cn=cn;}}}cg=(cd==null?"":cd.$0).toLowerCase();A.LoadedTemplateFile(cc).set_Item(cg,ce);ce.hasChildNodes()?(cm(ce),ck(ce.firstChild)):void 0;};A.foreachNotPreserved=function(cc,cd,ce){S.IterSelector(cc,cd,function(cf){if(cf.closest("[ws-preserve]")==null)ce(cf);});};A.PrepareSingleTemplate=function(cc,cd,ce){var cf;cf=A.FakeRootSingle(ce);return function(cg){A.PrepareTemplateStrict(cc,cd,cf,cg);};};A.TextHoleRE=function(){bf.$cctor();return bf.TextHoleRE;};B=n.Doc=b_.Class({},r,B);B.Run=function(cc,cd){R.LinkElement(cc,cd.docNode);B.RunInPlace(false,cc,cd);};B.TextNode=function(cc){return B.Mk({$:5,$0:self.document.createTextNode(cc)},o.Const());};B.Button=function(cc,cd,ce){var cf;cf=O.Concat(cd);return bp.New(B.Clickable("button",ce),cf,B.TextNode(cc));};B.CheckBox=function(cc,cd){return B.InputInternal("input",function(){return L.append(cc,[O.Create("type","checkbox"),$.Checked(cd)]);});};B.InputArea=function(cc,cd){return B.InputInternal("textarea",function(){return L.append(cc,[$.Value(cd)]);});};B.get_Empty=function(){return B.Mk(null,o.Const());};B.Concat=function(cc){var cd;cd=bd.ofSeqNonCopying(cc);return bd.TreeReduce(B.get_Empty(),B.Append,cd);};B.TextView=function(cc){var cd;cd=R.CreateTextNode();return B.Mk({$:4,$0:cd},o.Map(function(ce){R.UpdateTextNode(cd,ce);},cc));};B.RunInPlace=function(cc,cd,ce){var cf;cf=R.CreateRunState(cd,ce.docNode);o.Sink(bh.get_UseAnimations()||bi.BatchUpdatesEnabled()?bk.StartProcessor(R.PerformAnimatedUpdate(cc,cf,ce.docNode)):function(){R.PerformSyncUpdate(cc,cf,ce.docNode);},ce.updates);};B.Element=function(cc,cd,ce){var cf,cg;cf=O.Concat(cd);cg=B.Concat(ce);return bp.New(self.document.createElement(cc),cf,cg);};B.Mk=function(cc,cd){return new B.New(cc,cd);};B.Clickable=function(cc,cd){var ce;ce=self.document.createElement(cc);ce.addEventListener("click",function(cf){cf.preventDefault();return cd();},false);return ce;};B.InputInternal=function(cc,cd){var ce;ce=self.document.createElement(cc);return bp.New(ce,O.Concat(cd(ce)),B.get_Empty());};B.BindView=function(cc,cd){return B.EmbedView(o.Map(cc,cd));};B.Append=function(cc,cd){return B.Mk({$:0,$0:cc.docNode,$1:cd.docNode},o.Map2Unit(cc.updates,cd.updates));};B.EmbedView=function(cc){var cd;cd=R.CreateEmbedNode();return B.Mk({$:2,$0:cd},o.Map(a.ignore,o.Bind(function(ce){R.UpdateEmbedNode(cd,ce.docNode);return ce.updates;},cc)));};B.New=b_.Ctor(function(cc,cd){r.New.call(this);this.docNode=cc;this.updates=cd;},B);C.NewFromSeq=function(cc){var cd,ce,cf;cd={};ce=bb.Get(cc);try{while(ce.MoveNext()){cf=ce.Current();cd[cf[0]]=cf[1];}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}return cd;};E.$cctor=function(){var cc,cd,ce;E.$cctor=a.ignore;function cf(ck){return N.concat("\n",ck);}function cg(ck){return U.splitByChar("\n",ck);}function ch(ck){var cl,cm;return V.array(ck,{$:1,$0:0},{$:1,$0:(cl=0,(cm=M.length(ck)-2,F.Compare(cl,cm)===1?cl:cm))});}function ci(ck){return N.concat("\n",ck);}function cj(ck){return ck+"T00:00:00";}E.unindentStr=function(ck){return cf(U.unindent(ck));};E.skipLastLine=(cc=function(ck){return ch(cg(ck));},function(ck){return ci(cc(ck));});E.parseDateO2=(cd=W.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=bl.TryParse(ck),cm!=null&&cm.$==1&&(cl=cm.$0,true)),cl];}),function(ck){return cd(cj(ck));});E.parseDateO=W.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=bl.TryParse(ck),cm!=null&&cm.$==1&&(cl=cm.$0,true)),cl];});E.parseIntO=W.tryParseWith(function(ck){var cl;cl=0;return[X.TryParseInt32(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});E.parseInt64O=W.tryParseWith(function(ck){var cl;cl=0;return[X.TryParseInt64(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});E.parseSingleO=W.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=a.Number(ck),a.isNaN(cm)?false:(cl=cm,true)),cl];});E.parseDoubleO=W.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=a.Number(ck),a.isNaN(cm)?false:(cl=cm,true)),cl];});E.parseGuidO=W.tryParseWith(function(ck){var cl;cl=null;return[Z.TryParse(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});E["|Date|_|"]=W.parseDateO();E["|Int|_|"]=W.parseIntO();E["|Int64|_|"]=W.parseInt64O();E["|Single|_|"]=W.parseSingleO();E["|Double|_|"]=W.parseDoubleO();E["|Guid|_|"]=W.parseGuidO();E.WasmLoaderVersion="47";E.wasmStatusV=_0.Create$1(H.WasmNotLoaded);E.originalProvider=v.AjaxProvider();E.queues=new Q.New$5();E.messaging=new I.New(K.New(function(ck){return function(cl){return self.WASM_WsTranslator47_FsRoot_WsTranslator_runRpc(ck,cl);};},function(ck){J.returnValue0(ck[0],ck[1]);},function(ck){J.returnExn0(ck[0],ck[1]);},function(ck){return function(cl){return ck("EARLY PRINTING!: "+m.toSafe(cl));};}(function(ck){b$.log(ck);})));E.rv=function(ck){J.returnValue(ck[0],ck[1]);};E.re=function(ck){J.returnExn(ck[0],ck[1]);};E.workerO=null;E.rootPath="/WASM/publish47/";E.detailsV=_0.Create$1("");E.fsErrsV=_0.Create$1([]);E.wsErrsV=_0.Create$1([]);E.wsWrnsV=_0.Create$1([]);E.debugV=_0.Create$1(false);E.codeV=_0.Create$1("\r\n            open WebSharper\r\n            open WebSharper.UI\r\n            open WebSharper.UI.Html\r\n            \r\n            let name = Var.Create \"World\"\r\n            \r\n            [< Inline \"'Hello inline '\" >]\r\n            let bDoc() = \"Hello\"\r\n            \r\n            let cDoc() = text name.V\r\n            \r\n            let aDoc() = \r\n                div [] [\r\n                    text <| bDoc()\r\n                    cDoc()\r\n                ]\r\n            \r\n                    ");E.optsV=_0.Create$1(N.concat("\n",L.map(N.Trim,N.SplitChars("\r\n                                            /tmp/source.fsx\r\n                                            -o:source.exe\r\n                                            --simpleresolution\r\n                                            --nowarn:3186\r\n                                            --optimize-\r\n                                            --noframework\r\n                                            --fullpaths\r\n                                            --warn:3\r\n                                            --target:exe\r\n                                            -r:/dlls/WebSharper.Core.dll\r\n                                            -r:/dlls/WebSharper.Main.dll\r\n                                            -r:/dlls/WebSharper.UI.dll\r\n                                            -r:/dlls/WebSharper.Sitelets.dll\r\n                                            -r:/managed/FSharp.Core.dll\r\n                                            -r:/managed/mscorlib.dll\r\n                                            -r:/managed/netstandard.dll\r\n                                            -r:/managed/System.dll\r\n                                            -r:/managed/System.Core.dll\r\n                                            -r:/managed/System.IO.dll\r\n                                            -r:/managed/System.Runtime.dll\r\n                                            -r:/managed/System.Net.Http.dll\r\n                                            -r:/managed/System.Threading.dll\r\n                                            -r:/managed/System.Numerics.dll\r\n                                            -r:/managed/System.Runtime.Numerics.dll\r\n                                        ",["\n"],0))));!(!self.document)?J.messaging().set_D((ce=J.messaging().get_D(),K.New(ce.runRpc,ce.returnValue,ce.returnExn,function(ck){var cl;b$.log(ck);cl=h.detailsV().Get();h.detailsV().Set(cl+(cl===""?"":"\n")+ck);}))):void 0;};F.Equals=function(cc,cd){var ce,cf,cg,ch;if(cc===cd)return true;else{ce=typeof cc;if(ce=="object"){if(cc===null||cc===void 0||cd===null||cd===void 0)return false;else if("Equals"in cc)return cc.Equals(cd);else if(cc instanceof a.Array&&cd instanceof a.Array)return F.arrayEquals(cc,cd);else if(cc instanceof ca&&cd instanceof ca)return F.dateEquals(cc,cd);else{cf=[true];for(var ci in cc)if(function(cj){cf[0]=!cc.hasOwnProperty(cj)||cd.hasOwnProperty(cj)&&F.Equals(cc[cj],cd[cj]);return!cf[0];}(ci))break;if(cf[0]){for(var cj in cd)if(function(ck){cf[0]=!cd.hasOwnProperty(ck)||cc.hasOwnProperty(ck);return!cf[0];}(cj))break;}return cf[0];}}else return ce=="function"&&("$Func"in cc?cc.$Func===cd.$Func&&cc.$Target===cd.$Target:"$Invokes"in cc&&"$Invokes"in cd&&F.arrayEquals(cc.$Invokes,cd.$Invokes));}};F.Compare=function(cc,cd){var ce,cf,cg,ch,ci,cj;if(cc===cd)return 0;else{cf=typeof cc;switch(cf=="function"?1:cf=="boolean"?2:cf=="number"?2:cf=="string"?2:cf=="object"?3:0){case 0:return typeof cd=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return cc<cd?-1:1;case 3:if(cc===null)cg=-1;else if(cd===null)cg=1;else if("CompareTo"in cc)cg=cc.CompareTo(cd);else if("CompareTo0"in cc)cg=cc.CompareTo0(cd);else if(cc instanceof a.Array&&cd instanceof a.Array)cg=F.compareArrays(cc,cd);else if(cc instanceof ca&&cd instanceof ca)cg=F.compareDates(cc,cd);else{ch=[0];for(var ck in cc)if(function(cl){return!cc.hasOwnProperty(cl)?false:!cd.hasOwnProperty(cl)?(ch[0]=1,true):(ch[0]=F.Compare(cc[cl],cd[cl]),ch[0]!==0);}(ck))break;if(ch[0]===0){for(var cl in cd)if(function(cm){return!cd.hasOwnProperty(cm)?false:!cc.hasOwnProperty(cm)&&(ch[0]=-1,true);}(cl))break;}cg=ch[0];}return cg;}}};F.arrayEquals=function(cc,cd){var ce,cf;if(M.length(cc)===M.length(cd)){ce=true;cf=0;while(ce&&cf<M.length(cc)){!F.Equals(M.get(cc,cf),M.get(cd,cf))?ce=false:void 0;cf=cf+1;}return ce;}else return false;};F.dateEquals=function(cc,cd){return cc.getTime()===cd.getTime();};F.compareArrays=function(cc,cd){var ce,cf;if(M.length(cc)<M.length(cd))return -1;else if(M.length(cc)>M.length(cd))return 1;else{ce=0;cf=0;while(ce===0&&cf<M.length(cc)){ce=F.Compare(M.get(cc,cf),M.get(cd,cf));cf=cf+1;}return ce;}};F.compareDates=function(cc,cd){return F.Compare(cc.getTime(),cd.getTime());};F.Hash=function(cc){var cd;cd=typeof cc;return cd=="function"?0:cd=="boolean"?cc?1:0:cd=="number"?cc:cd=="string"?F.hashString(cc):cd=="object"?cc==null?0:cc instanceof a.Array?F.hashArray(cc):F.hashObject(cc):0;};F.hashString=function(cc){var cd,ce,cf;if(cc===null)return 0;else{cd=5381;for(ce=0,cf=cc.length-1;ce<=cf;ce++)cd=F.hashMix(cd,cc[ce].charCodeAt());return cd;}};F.hashArray=function(cc){var cd,ce,cf;cd=-34948909;for(ce=0,cf=M.length(cc)-1;ce<=cf;ce++)cd=F.hashMix(cd,F.Hash(M.get(cc,ce)));return cd;};F.hashObject=function(cc){var cd,ce;if("GetHashCode"in cc)return cc.GetHashCode();else{cd=[0];for(var cf in cc)if(function(cg){cd[0]=F.hashMix(F.hashMix(cd[0],F.hashString(cg)),F.Hash(cc[cg]));return false;}(cf))break;return cd[0];}};F.hashMix=function(cc,cd){return(cc<<5)+cc+cd;};G.Map=function(cc,cd){var ce,cf;ce=cd.s;return ce!=null&&ce.$==0?G.New({$:0,$0:cc(ce.$0)}):(cf=G.New({$:3,$0:[],$1:[]}),(G.When(cd,function(cg){G.MarkDone(cf,cd,cc(cg));},cf),cf));};G.WhenObsoleteRun=function(cc,cd){var ce;ce=cc.s;ce==null?cd():ce!=null&&ce.$==2?ce.$1.push(cd):ce!=null&&ce.$==3?ce.$1.push(cd):void 0;};G.When=function(cc,cd,ce){var cf;cf=cc.s;cf==null?G.Obsolete(ce):cf!=null&&cf.$==2?(G.EnqueueSafe(cf.$1,ce),cd(cf.$0)):cf!=null&&cf.$==3?(cf.$0.push(cd),G.EnqueueSafe(cf.$1,ce)):cd(cf.$0);};G.MarkDone=function(cc,cd,ce){var cf;if(cf=cd.s,cf!=null&&cf.$==0)G.MarkForever(cc,ce);else G.MarkReady(cc,ce);};G.EnqueueSafe=function(cc,cd){var ce,cf,cg,ch;cc.push(cd);if(cc.length%20===0){ce=cc.slice(0);bS.Clear(cc);for(cf=0,cg=M.length(ce)-1;cf<=cg;cf++){ch=M.get(ce,cf);typeof ch=="object"?function(ci){if(ci.s)cc.push(ci);}(ch):function(ci){cc.push(ci);}(ch);}}else void 0;};G.MarkForever=function(cc,cd){var ce,cf,cg,ch;ce=cc.s;if(ce!=null&&ce.$==3){cc.s={$:0,$0:cd};cf=ce.$0;for(cg=0,ch=M.length(cf)-1;cg<=ch;cg++)(M.get(cf,cg))(cd);}else void 0;};G.MarkReady=function(cc,cd){var ce,cf,cg,ch;ce=cc.s;if(ce!=null&&ce.$==3){cc.s={$:2,$0:cd,$1:ce.$1};cf=ce.$0;for(cg=0,ch=M.length(cf)-1;cg<=ch;cg++)(M.get(cf,cg))(cd);}else void 0;};G.WhenRun=function(cc,cd,ce){var cf;cf=cc.s;cf==null?ce():cf!=null&&cf.$==2?(cf.$1.push(ce),cd(cf.$0)):cf!=null&&cf.$==3?(cf.$0.push(cd),cf.$1.push(ce)):cd(cf.$0);};G.Map2Unit=function(cc,cd){var ce,cf,cg;function ch(){var ci,cj,ck;if(!(ci=cg.s,ci!=null&&ci.$==0||ci!=null&&ci.$==2)){cj=G.ValueAndForever(cc);ck=G.ValueAndForever(cd);cj!=null&&cj.$==1?ck!=null&&ck.$==1?cj.$0[1]&&ck.$0[1]?G.MarkForever(cg,null):G.MarkReady(cg,null):void 0:void 0;}}ce=cc.s;cf=cd.s;return ce!=null&&ce.$==0?cf!=null&&cf.$==0?G.New({$:0,$0:null}):cd:cf!=null&&cf.$==0?cc:(cg=G.New({$:3,$0:[],$1:[]}),(G.When(cc,ch,cg),G.When(cd,ch,cg),cg));};G.Copy=function(cc){var cd,ce,cf;cd=cc.s;return cd==null?cc:cd!=null&&cd.$==2?(ce=G.New({$:2,$0:cd.$0,$1:[]}),(G.WhenObsolete(cc,ce),ce)):cd!=null&&cd.$==3?(cf=G.New({$:3,$0:[],$1:[]}),(G.When(cc,function(cg){G.MarkDone(cf,cc,cg);},cf),cf)):cc;};G.ValueAndForever=function(cc){var cd;cd=cc.s;return cd!=null&&cd.$==0?{$:1,$0:[cd.$0,true]}:cd!=null&&cd.$==2?{$:1,$0:[cd.$0,false]}:null;};G.WhenObsolete=function(cc,cd){var ce;ce=cc.s;ce==null?G.Obsolete(cd):ce!=null&&ce.$==2?G.EnqueueSafe(ce.$1,cd):ce!=null&&ce.$==3?G.EnqueueSafe(ce.$1,cd):void 0;};G.Join=function(cc){var cd;cd=G.New({$:3,$0:[],$1:[]});G.When(cc,function(ce){var cf;cf=ce();G.When(cf,function(cg){var ch,ci;if((ch=cf.s,ch!=null&&ch.$==0)&&(ci=cc.s,ci!=null&&ci.$==0))G.MarkForever(cd,cg);else G.MarkReady(cd,cg);},cd);},cd);return cd;};H.WasmLoading={$:1};H.WasmWorkerLoading={$:3};H.WasmWorkerLoaded={$:4};H.WasmLoaded={$:2};H.WasmNotLoaded={$:0};I=g.Dependency=b_.Class({set_D:function(cc){this.D=cc;},get_D:function(){return this.D;}},r,I);I.New=b_.Ctor(function(cc){r.New.call(this);this.D=cc;},I);J.messaging=function(){E.$cctor();return E.messaging;};J.returnValue0=function(cc,cd){var ce,cf,cg;ce=_2.tryGet(cc);ce==null?void 0:(cf=ce.$0,cg=cf[0],cf[1],cg(cd));};J.returnExn0=function(cc,cd){J.returnExnExn(cc,new bE(cd));};J.installProvider=function(){v.set_AjaxProvider(new _3.New());};J.returnValue=function(cc,cd){J.messaging().get_D().returnValue([cc,cd]);};J.returnExn=function(cc,cd){J.messaging().get_D().returnExn([cc,cd]);};J.returnExnExn=function(cc,cd){var ce,cf;ce=_2.tryGet(cc);ce==null?void 0:(cf=ce.$0,cf[0],cf[1](cd));};J.getHeaderRpc=function(cc){return cc["x-websharper-rpc"];};J.callRunRpc=function(cc,cd){(J.messaging().get_D().runRpc(cc))(cd);};K.New=function(cc,cd,ce,cf){return{runRpc:cc,returnValue:cd,returnExn:ce,wprintfn:cf};};L.map=function(cc,cd){return{GetEnumerator:function(){var ce;ce=bb.Get(cd);return new bc.New(null,null,function(cf){return ce.MoveNext()&&(cf.c=cc(ce.Current()),true);},function(){ce.Dispose();});}};};L.delay=function(cc){return{GetEnumerator:function(){return bb.Get(cc());}};};L.append=function(cc,cd){return{GetEnumerator:function(){var ce,cf;ce=bb.Get(cc);cf=[true];return new bc.New(ce,null,function(cg){var ch;return cg.s.MoveNext()?(cg.c=cg.s.Current(),true):(ch=cg.s,!F.Equals(ch,null)?ch.Dispose():void 0,cg.s=null,cf[0]&&(cf[0]=false,cg.s=bb.Get(cd),cg.s.MoveNext()?(cg.c=cg.s.Current(),true):(cg.s.Dispose(),cg.s=null,false)));},function(cg){var ch;ch=cg.s;!F.Equals(ch,null)?ch.Dispose():void 0;});}};};L.distinct=function(cc){return L.distinctBy(a.id,cc);};L.cache=function(cc){var cd,ce;cd=[];ce=[bb.Get(cc)];return{GetEnumerator:function(){return new bc.New(0,null,function(cf){var cg;return cf.s<cd.length?(cf.c=cd[cf.s],cf.s=cf.s+1,true):(cg=ce[0],F.Equals(cg,null)?false:cg.MoveNext()?(cf.s=cf.s+1,cf.c=cg.Current(),cd.push(cf.c),true):(cg.Dispose(),ce[0]=null,false));},void 0);}};};L.iter=function(cc,cd){var ce;ce=bb.Get(cd);try{while(ce.MoveNext())cc(ce.Current());}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};L.head=function(cc){var cd;cd=bb.Get(cc);try{return cd.MoveNext()?cd.Current():L.insufficient();}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};L.tryFind=function(cc,cd){var ce,cf,cg;ce=bb.Get(cd);try{cf=null;while(cf==null&&ce.MoveNext()){cg=ce.Current();cc(cg)?cf={$:1,$0:cg}:void 0;}return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};L.tryFindIndex=function(cc,cd){var ce,cf,cg;ce=bb.Get(cd);try{cf=true;cg=0;while(cf&&ce.MoveNext())if(cc(ce.Current()))cf=false;else cg=cg+1;return cf?null:{$:1,$0:cg};}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};L.filter=function(cc,cd){return{GetEnumerator:function(){var ce;ce=bb.Get(cd);return new bc.New(null,null,function(cf){var cg,ch,ci;cg=ce.MoveNext();ch=ce.Current();ci=false;while(cg)if(cc(ch)){cf.c=ch;ci=true;cg=false;}else if(ce.MoveNext())ch=ce.Current();else cg=false;return ci;},function(){ce.Dispose();});}};};L.distinctBy=function(cc,cd){return{GetEnumerator:function(){var ce,cf;ce=bb.Get(cd);cf=new bg.New$3();return new bc.New(null,null,function(cg){var ch,ci;if(ce.MoveNext()){ch=ce.Current();ci=cf.Add(cc(ch));while(!ci&&ce.MoveNext()){ch=ce.Current();ci=cf.Add(cc(ch));}return ci&&(cg.c=ch,true);}else return false;},function(){ce.Dispose();});}};};L.fold=function(cc,cd,ce){var cf,cg;cf=cd;cg=bb.Get(ce);try{while(cg.MoveNext())cf=cc(cf,cg.Current());return cf;}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}};L.max=function(cc){var cd,ce,cf;cd=bb.Get(cc);try{if(!cd.MoveNext())L.seqEmpty();ce=cd.Current();while(cd.MoveNext()){cf=cd.Current();F.Compare(cf,ce)===1?ce=cf:void 0;}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};L.forall=function(cc,cd){return!L.exists(function(ce){return!cc(ce);},cd);};L.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};L.exists=function(cc,cd){var ce,cf;ce=bb.Get(cd);try{cf=false;while(!cf&&ce.MoveNext())cf=cc(ce.Current());return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};M.filter=function(cc,cd){var ce,cf,cg;ce=[];for(cf=0,cg=cd.length-1;cf<=cg;cf++)if(cc(cd[cf]))ce.push(cd[cf]);return ce;};M.map=function(cc,cd){var ce,cf,cg;ce=new a.Array(cd.length);for(cf=0,cg=cd.length-1;cf<=cg;cf++)ce[cf]=cc(cd[cf]);return ce;};M.choose=function(cc,cd){var ce,cf,cg,ch;ce=[];for(cf=0,cg=cd.length-1;cf<=cg;cf++){ch=cc(cd[cf]);ch==null?void 0:ce.push(ch.$0);}return ce;};M.ofSeq=function(cc){var cd,ce;if(cc instanceof a.Array)return cc.slice();else if(cc instanceof bt)return M.ofList(cc);else{cd=[];ce=bb.Get(cc);try{while(ce.MoveNext())cd.push(ce.Current());return cd;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}}};M.ofList=function(cc){var cd,ce;ce=[];cd=cc;while(!(cd.$==0)){ce.push(_.head(cd));cd=_.tail(cd);}return ce;};M.exists=function(cc,cd){var ce,cf,cg,ch;ce=false;cf=0;ch=M.length(cd);while(!ce&&cf<ch)if(cc(cd[cf]))ce=true;else cf=cf+1;return ce;};M.tryPick=function(cc,cd){var ce,cf,cg;ce=null;cf=0;while(cf<cd.length&&ce==null){cg=cc(cd[cf]);cg!=null&&cg.$==1?ce=cg:void 0;cf=cf+1;}return ce;};M.tryFindIndex=function(cc,cd){var ce,cf;ce=null;cf=0;while(cf<cd.length&&ce==null){cc(cd[cf])?ce={$:1,$0:cf}:void 0;cf=cf+1;}return ce;};M.foldBack=function(cc,cd,ce){var cf,cg,ch,ci,cj;cf=ce;ch=cd.length;for(ci=1,cj=ch;ci<=cj;ci++)cf=cc(cd[ch-ci],cf);return cf;};M.iter=function(cc,cd){var ce,cf;for(ce=0,cf=cd.length-1;ce<=cf;ce++)cc(cd[ce]);};M.concat=function(cc){return a.Array.prototype.concat.apply([],M.ofSeq(cc));};M.pick=function(cc,cd){var ce;ce=M.tryPick(cc,cd);return ce==null?e.FailWith("KeyNotFoundException"):ce.$0;};M.create=function(cc,cd){var ce,cf,cg;ce=new a.Array(cc);for(cf=0,cg=cc-1;cf<=cg;cf++)ce[cf]=cd;return ce;};M.init=function(cc,cd){var ce,cf,cg;cc<0?e.FailWith("Negative size given."):null;ce=new a.Array(cc);for(cf=0,cg=cc-1;cf<=cg;cf++)ce[cf]=cd(cf);return ce;};M.forall=function(cc,cd){var ce,cf,cg,ch;ce=true;cf=0;ch=M.length(cd);while(ce&&cf<ch)if(cc(cd[cf]))cf=cf+1;else ce=false;return ce;};M.length=function(cc){return cc.dims===2?cc.length*cc.length:cc.length;};M.get=function(cc,cd){M.checkBounds(cc,cd);return cc[cd];};M.set=function(cc,cd,ce){M.checkBounds(cc,cd);cc[cd]=ce;};M.checkBounds=function(cc,cd){if(cd<0||cd>=cc.length)e.FailWith("Index was outside the bounds of the array.");};N.concat=function(cc,cd){return M.ofSeq(cd).join(cc);};N.SplitChars=function(cc,cd,ce){return N.Split(cc,new a.RegExp("["+N.RegexEscape(cd.join(""))+"]"),ce);};N.Trim=function(cc){return cc.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};N.Replace=function(cc,cd,ce){function cf(cg){var ch,ci,cj;ch=cg.indexOf(cd);return ch!==-1?(ci=N.ReplaceOnce(cg,cd,ce),(cj=ch+ce.length,N.Substring(ci,0,ch+ce.length)+cf(ci.substring(cj)))):cg;}return cf(cc);};N.Split=function(cc,cd,ce){return ce===1?M.filter(function(cf){return cf!=="";},N.SplitWith(cc,cd)):N.SplitWith(cc,cd);};N.RegexEscape=function(cc){return cc.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};N.StartsWith=function(cc,cd){return cc.substring(0,cd.length)==cd;};N.ReplaceOnce=function(cc,cd,ce){return cc.replace(cd,ce);};N.PadLeftWith=function(cc,cd,ce){return cd>cc.length?a.Array(cd-cc.length+1).join(ce)+cc:cc;};N.SplitWith=function(cc,cd){return cc.split(cd);};N.Substring=function(cc,cd,ce){return cc.substr(cd,ce);};N.forall=function(cc,cd){return L.forall(cc,N.protect(cd));};N.protect=function(cc){return cc===null?"":cc;};O=n.AttrProxy=b_.Class({},null,O);O.Create=function(cc,cd){return be.Static(function(ce){ce.setAttribute(cc,cd);});};O.Concat=function(cc){var cd;cd=bd.ofSeqNonCopying(cc);return bd.TreeReduce(be.EmptyAttr(),O.Append,cd);};O.Append=function(cc,cd){return be.AppendTree(cc,cd);};Q=P.Dictionary=b_.Class({set_Item:function(cc,cd){this.set(cc,cd);},ContainsKey:function(cc){var cd,ce;cd=this;ce=this.data[this.hash(cc)];return ce==null?false:M.exists(function(cf){return cd.equals.apply(null,[(e.KeyValue(cf))[0],cc]);},ce);},TryGetValue:function(cc,cd){var ce,cf,cg;ce=this;cf=this.data[this.hash(cc)];return cf==null?false:(cg=M.tryPick(function(ch){var ci;ci=e.KeyValue(ch);return ce.equals.apply(null,[ci[0],cc])?{$:1,$0:ci[1]}:null;},cf),cg!=null&&cg.$==1&&(cd.set(cg.$0),true));},Remove:function(cc){return this.remove(cc);},get_Keys:function(){return new bw.New(this);},set:function(cc,cd){var ce,cf,cg,ch;ce=this;cf=this.hash(cc);cg=this.data[cf];cg==null?(this.count=this.count+1,this.data[cf]=new a.Array({K:cc,V:cd})):(ch=M.tryFindIndex(function(ci){return ce.equals.apply(null,[(e.KeyValue(ci))[0],cc]);},cg),ch==null?(this.count=this.count+1,cg.push({K:cc,V:cd})):cg[ch.$0]={K:cc,V:cd});},Add:function(cc,cd){this.add(cc,cd);},remove:function(cc){var cd,ce,cf,cg;cd=this;ce=this.hash(cc);cf=this.data[ce];return cf==null?false:(cg=M.filter(function(ch){return!cd.equals.apply(null,[(e.KeyValue(ch))[0],cc]);},cf),M.length(cg)<cf.length&&(this.count=this.count-1,this.data[ce]=cg,true));},get_Item:function(cc){return this.get(cc);},add:function(cc,cd){var ce,cf,cg;ce=this;cf=this.hash(cc);cg=this.data[cf];cg==null?(this.count=this.count+1,this.data[cf]=new a.Array({K:cc,V:cd})):(M.exists(function(ch){return ce.equals.apply(null,[(e.KeyValue(ch))[0],cc]);},cg)?bo.alreadyAdded():void 0,this.count=this.count+1,cg.push({K:cc,V:cd}));},get:function(cc){var cd,ce;cd=this;ce=this.data[this.hash(cc)];return ce==null?bo.notPresent():M.pick(function(cf){var cg;cg=e.KeyValue(cf);return cd.equals.apply(null,[cg[0],cc])?{$:1,$0:cg[1]}:null;},ce);},GetEnumerator:function(){return bb.Get0(this);},GetEnumerator0:function(){return bb.Get0(M.concat(l.GetFieldValues(this.data)));}},r,Q);Q.New$5=b_.Ctor(function(){Q.New$6.call(this,[],F.Equals,F.Hash);},Q);Q.New$6=b_.Ctor(function(cc,cd,ce){var cf,cg;r.New.call(this);this.equals=cd;this.hash=ce;this.count=0;this.data=[];cf=bb.Get(cc);try{while(cf.MoveNext()){cg=cf.Current();this.set(cg.K,cg.V);}}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}},Q);R.LinkElement=function(cc,cd){R.InsertDoc(cc,cd,null);};R.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};R.UpdateTextNode=function(cc,cd){cc.Value=cd;cc.Dirty=true;};R.InsertDoc=function(cc,cd,ce){var cf,cg,ch;while(true)if(cd!=null&&cd.$==1)return R.InsertNode(cc,cd.$0.El,ce);else if(cd!=null&&cd.$==2){cf=cd.$0;cf.Dirty=false;cd=cf.Current;}else if(cd==null)return ce;else if(cd!=null&&cd.$==4)return R.InsertNode(cc,cd.$0.Text,ce);else if(cd!=null&&cd.$==5)return R.InsertNode(cc,cd.$0,ce);else if(cd!=null&&cd.$==6)return M.foldBack(function(ci,cj){return(((b_.Curried3(function(ck,cl,cm){return cl==null||cl.constructor===ba?R.InsertDoc(ck,cl,cm):R.InsertNode(ck,cl,cm);}))(cc))(ci))(cj);},cd.$0.Els,ce);else{cg=cd.$1;ch=cd.$0;cd=ch;ce=R.InsertDoc(cc,cg,ce);}};R.CreateRunState=function(cc,cd){return bA.New(bB.get_Empty(),R.CreateElemNode(cc,be.EmptyAttr(),cd));};R.PerformAnimatedUpdate=function(cc,cd,ce){var cf;return bh.get_UseAnimations()?(cf=null,_4.Delay(function(){var cg,ch,ci;cg=bB.FindAll(ce);ch=R.ComputeChangeAnim(cd,cg);ci=R.ComputeEnterAnim(cd,cg);return _4.Bind(bh.Play(bh.Append(ch,R.ComputeExitAnim(cd,cg))),function(){return _4.Bind(R.SyncElemNodesNextFrame(cc,cd),function(){return _4.Bind(bh.Play(ci),function(){cd.PreviousNodes=cg;return _4.Return(null);});});});})):R.SyncElemNodesNextFrame(cc,cd);};R.PerformSyncUpdate=function(cc,cd,ce){var cf;cf=bB.FindAll(ce);R.SyncElemNode(cc,cd.Top);cd.PreviousNodes=cf;};R.InsertNode=function(cc,cd,ce){S.InsertAt(cc,ce,cd);return cd;};R.CreateElemNode=function(cc,cd,ce){var cf;R.LinkElement(cc,ce);cf=be.Insert(cc,cd);return bx.New(cf,ce,null,cc,bH.Int(),b_.GetOptional(cf.OnAfterRender));};R.SyncElemNodesNextFrame=function(cc,cd){function ce(cf){a.requestAnimationFrame(function(){R.SyncElemNode(cc,cd.Top);cf();});}return bi.BatchUpdatesEnabled()?_4.FromContinuations(function(cf,cg,ch){return ce.apply(null,[cf,cg,ch]);}):(R.SyncElemNode(cc,cd.Top),_4.Return(null));};R.ComputeExitAnim=function(cc,cd){return bh.Concat(M.map(function(ce){return be.GetExitAnim(ce.Attr);},bB.ToArray(bB.Except(cd,bB.Filter(function(ce){return be.HasExitAnim(ce.Attr);},cc.PreviousNodes)))));};R.ComputeEnterAnim=function(cc,cd){return bh.Concat(M.map(function(ce){return be.GetEnterAnim(ce.Attr);},bB.ToArray(bB.Except(cc.PreviousNodes,bB.Filter(function(ce){return be.HasEnterAnim(ce.Attr);},cd)))));};R.ComputeChangeAnim=function(cc,cd){var ce;function cf(cg){return be.HasChangeAnim(cg.Attr);}ce=function(cg){return bB.Filter(cf,cg);};return bh.Concat(M.map(function(cg){return be.GetChangeAnim(cg.Attr);},bB.ToArray(bB.Intersect(ce(cc.PreviousNodes),ce(cd)))));};R.SyncElemNode=function(cc,cd){!cc?R.SyncElement(cd):void 0;R.Sync(cd.Children);R.AfterRender(cd);};R.CreateEmbedNode=function(){return{Current:null,Dirty:false};};R.UpdateEmbedNode=function(cc,cd){cc.Current=cd;cc.Dirty=true;};R.SyncElement=function(cc){function cd(ce){function cf(cg){var ch,ci,cj,ck;while(true){if(cg!=null&&cg.$==0){ci=cg.$1;cj=cg.$0;if(cf(cj))return true;else cg=ci;}else if(cg!=null&&cg.$==2){ck=cg.$0;if(ck.Dirty)return true;else cg=ck.Current;}else return cg!=null&&cg.$==6&&(ch=cg.$0,ch.Dirty||M.exists(cd,ch.Holes));}}return cf(ce.Children);}be.Sync(cc.El,cc.Attr);cd(cc)?R.DoSyncElement(cc):void 0;};R.Sync=function(cc){var cd,ce,cf,cg,ch;while(true){if(cc!=null&&cc.$==1)return R.SyncElemNode(false,cc.$0);else if(cc!=null&&cc.$==2){cf=cc.$0;cc=cf.Current;}else if(cc==null)return null;else if(cc!=null&&cc.$==5)return null;else if(cc!=null&&cc.$==4){cd=cc.$0;return cd.Dirty?(cd.Text.nodeValue=cd.Value,cd.Dirty=false):null;}else if(cc!=null&&cc.$==6){ce=cc.$0;M.iter(function(ci){return function(cj){R.SyncElemNode(ci,cj);};}(false),ce.Holes);M.iter(function(ci){be.Sync(ci[0],ci[1]);},ce.Attrs);return R.AfterRender(ce);}else{cg=cc.$1;ch=cc.$0;R.Sync(ch);cc=cg;}}};R.AfterRender=function(cc){var cd;cd=b_.GetOptional(cc.Render);cd!=null&&cd.$==1?(cd.$0(cc.El),b_.SetOptional(cc,"Render",null)):void 0;};R.DoSyncElement=function(cc){var cd,ce,cf;function cg(ch,ci){var cj,ck,cl,cm;while(true){if(ch!=null&&ch.$==1)return ch.$0.El;else if(ch!=null&&ch.$==2){ck=ch.$0;if(ck.Dirty){ck.Dirty=false;return R.InsertDoc(cd,ck.Current,ci);}else ch=ck.Current;}else if(ch==null)return ci;else if(ch!=null&&ch.$==4)return ch.$0.Text;else if(ch!=null&&ch.$==5)return ch.$0;else if(ch!=null&&ch.$==6){cj=ch.$0;cj.Dirty?cj.Dirty=false:void 0;return M.foldBack(function(cn,co){return cn==null||cn.constructor===ba?cg(cn,co):cn;},cj.Els,ci);}else{cl=ch.$1;cm=ch.$0;ch=cm;ci=cg(cl,ci);}}}cd=cc.El;b3.Iter((ce=cc.El,function(ch){S.RemoveNode(ce,ch);}),b3.Except(b3.DocChildren(cc),b3.Children(cc.El,b_.GetOptional(cc.Delimiters))));cg(cc.Children,(cf=b_.GetOptional(cc.Delimiters),cf!=null&&cf.$==1?cf.$0[1]:null));};S.ParseHTMLIntoFakeRoot=function(cc){var cd,ce,cf,cg,ch;function ci(cj,ck){var cl;while(true)if(ck===0)return cj;else{cl=ck;cj=cj.lastChild;ck=cl-1;}}cd=self.document.createElement("div");return!S.rhtml().test(cc)?(cd.appendChild(self.document.createTextNode(cc)),cd):(ce=(cf=S.rtagName().exec(cc),F.Equals(cf,null)?"":M.get(cf,1).toLowerCase()),(cg=(ch=(S.wrapMap())[ce],ch?ch:S.defaultWrap()),(cd.innerHTML=cg[1]+cc.replace(S.rxhtmlTag(),"<$1></$2>")+cg[2],ci(cd,cg[0]))));};S.rhtml=function(){bW.$cctor();return bW.rhtml;};S.wrapMap=function(){bW.$cctor();return bW.wrapMap;};S.defaultWrap=function(){bW.$cctor();return bW.defaultWrap;};S.rxhtmlTag=function(){bW.$cctor();return bW.rxhtmlTag;};S.rtagName=function(){bW.$cctor();return bW.rtagName;};S.IterSelector=function(cc,cd,ce){var cf,cg,ch;cf=cc.querySelectorAll(cd);for(cg=0,ch=cf.length-1;cg<=ch;cg++)ce(cf[cg]);};S.InsertAt=function(cc,cd,ce){var cf;if(!(ce.parentNode===cc&&cd===(cf=ce.nextSibling,F.Equals(cf,null)?null:cf)))cc.insertBefore(ce,cd);};S.RemoveNode=function(cc,cd){if(cd.parentNode===cc)cc.removeChild(cd);};U.unindent=function(cc){var cd,ce,cf,cg;cd=N.SplitChars(cc,["\n"],0);ce=(cf=L.tryFindIndex(function(ch){return" "!==ch;},(cg=L.tryFind(function(ch){return N.Trim(ch)!=="";},cd),cg==null?"":cg.$0)),cf==null?0:cf.$0);return L.filter(function(ch){return!N.StartsWith(ch,"# 1 ");},L.map(function(ch){return ch.length<=ce?"":ch.substring(ce);},cd));};U.splitByChar=function(cc,cd){return N.SplitChars(cd,[cc],0);};U.StartsWith=function(cc,cd){return N.StartsWith(cd,cc)?{$:1,$0:V.string(cd,{$:1,$0:cc.length},null)}:null;};V.array=function(cc,cd,ce){return cd==null?ce!=null&&ce.$==1?cc.slice(0,ce.$0+1):[]:ce==null?cc.slice(cd.$0):cc.slice(cd.$0,ce.$0+1);};V.string=function(cc,cd,ce){return cd==null?ce!=null&&ce.$==1?cc.slice(0,ce.$0+1):"":ce==null?cc.slice(cd.$0):cc.slice(cd.$0,ce.$0+1);};W.tryParseWith=function(cc){function cd(ce,cf){return ce?{$:1,$0:cf}:null;}return function(ce){return cd.apply(null,cc(ce));};};W.parseDateO=function(){E.$cctor();return E.parseDateO;};W.parseIntO=function(){E.$cctor();return E.parseIntO;};W.parseInt64O=function(){E.$cctor();return E.parseInt64O;};W.parseSingleO=function(){E.$cctor();return E.parseSingleO;};W.parseDoubleO=function(){E.$cctor();return E.parseDoubleO;};W.parseGuidO=function(){E.$cctor();return E.parseGuidO;};X.TryParseInt32=function(cc,cd){return X.TryParse(cc,-2147483648,2147483647,cd);};X.TryParseInt64=function(cc,cd){return X.TryParse(cc,-9223372036854775808,9223372036854775807,cd);};Z.TryParse=function(cc,cd){try{cd.set(Z.Parse(cc));return true;}catch(ce){return false;}};Z.Parse=function(cc){var cd,ce,cf;try{return Z.ParseExact(cc,"D");}catch(cg){try{cd=Z.ParseExact(cc,"B");}catch(ch){try{ce=Z.ParseExact(cc,"P");}catch(ci){try{cf=Z.ParseExact(cc,"N");}catch(cj){cf=Z.ParseExact(cc,"X");}ce=cf;}cd=ce;}return cd;}};Z.ParseExact=function(cc,cd){var ce,cf,cg,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;function ch(cs){var ct,cu,cv,cw;for(ct=0,cu=35;ct<=cu;ct++){ct===8||(ct===13||(ct===18||ct===23))?cs[ct]!=="-"?Z.ShapeError():void 0:(cw=cs[ct],!("0"<=cw&&cw<="9"||"a"<=cw&&cw<="f")?Z.ShapeError():void 0);}return cs;}ci=cd.toUpperCase();if(ci==="N"){cj=N.Trim(cc).toLowerCase();if(cj.length!==32)Z.ShapeError();for(ck=0,cl=31;ck<=cl;ck++){cm=cj[ck];!("0"<=cm&&cm<="9"||"a"<=cm&&cm<="f")?Z.ShapeError():void 0;}return N.Substring(cj,0,8)+"-"+N.Substring(cj,8,4)+"-"+N.Substring(cj,12,4)+"-"+N.Substring(cj,16,4)+"-"+cj.substring(20);}else if(ci==="D"){ce=N.Trim(cc).toLowerCase();ce.length!==36?Z.ShapeError():void 0;return ch(ce);}else if(ci==="B"){cf=N.Trim(cc).toLowerCase();cf.length!==38||cf[0]!=="{"||cf[17]!=="}"?Z.ShapeError():void 0;return ch(N.Substring(cf,1,36));}else if(ci==="P"){cg=N.Trim(cc).toLowerCase();cg.length!==38||cg[0]!=="("||cg[17]!==")"?Z.ShapeError():void 0;return ch(N.Substring(cg,1,36));}else if(ci==="X"){cn=N.Trim(cc).toLowerCase();if(cn.length!==68)Z.ShapeError();for(co=0,cp=67;co<=cp;co++){switch(co){case 26:case 0:if(cn[co]!=="{")Z.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cn[co]!=="0")Z.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cn[co]!=="x")Z.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cn[co]!==",")Z.ShapeError();break;case 67:case 66:if(cn[co]!=="{")Z.ShapeError();break;default:cr=cn[co];!("0"<=cr&&cr<="9"||"a"<=cr&&cr<="f")?Z.ShapeError():void 0;break;}}return N.Substring(cn,3,8)+"-"+N.Substring(cn,14,4)+"-"+N.Substring(cn,21,4)+"-"+N.Substring(cn,29,2)+N.Substring(cn,34,2)+"-"+N.Substring(cn,39,2)+N.Substring(cn,44,2)+N.Substring(cn,49,2)+N.Substring(cn,54,2)+N.Substring(cn,59,2)+N.Substring(cn,64,2);}else return Z.FormatError();};Z.ShapeError=function(){throw new b0.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};Z.FormatError=function(){throw new b0.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_0=n.Var$1=b_.Class({},r,_0);_0.Create$1=function(cc){return new bm.New(false,G.New({$:2,$0:cc,$1:[]}),cc);};v.AjaxProvider=function(){bn.$cctor();return bn.AjaxProvider;};v.set_AjaxProvider=function(cc){bn.$cctor();bn.AjaxProvider=cc;};v.makePayload=function(cc){return cb.stringify(cc);};v.makeHeaders=function(cc){return{"content-type":"application/json","x-websharper-rpc":cc};};v.EndPoint=function(){bn.$cctor();return bn.EndPoint;};v.ajax=function(cc,cd,ce,cf,cg,ch,ci){var cj,ck,cl;cj=new a.XMLHttpRequest();ck=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");cj.open("POST",cd,cc);if(cc==true)cj.withCredentials=true;for(var cn in ce)cj.setRequestHeader(cn,ce[cn]);if(ck)cj.setRequestHeader("x-csrftoken",ck);function cm(){var co;if(cj.status==200)cg(cj.responseText);else if(ci&&cj.status==403&&cj.responseText=="CSRF")ci();else{co="Response status is not 200: ";ch(new bE(co+cj.status));}}if("onload"in cj)cj.onload=cj.onerror=cj.onabort=cm;else cj.onreadystatechange=function(){if(cj.readyState==4)cm();};cj.send(cf);};G.Obsolete=function(cc){var cd,ce,cf,cg,ch;ce=cc.s;if(ce==null||(ce!=null&&ce.$==2?(cd=ce.$1,false):ce!=null&&ce.$==3?(cd=ce.$1,false):true))void 0;else{cc.s=null;for(cf=0,cg=M.length(cd)-1;cf<=cg;cf++){ch=M.get(cd,cf);typeof ch=="object"?function(ci){G.Obsolete(ci);}(ch):ch();}}};G.New=function(cc){return{s:cc};};_2.tryGet=function(cc){var cd,ce,cf,cg;cd=_2.tryGetS(cc);return cd==null?null:(ce=cd.$0,(cf=L.tryHead(ce),cf!=null&&cf.$==1?(cg=V.array(ce,{$:1,$0:1},null),(_2.queues().Remove(cc),_2.queues().Add(cc,cg),{$:1,$0:cf.$0})):null));};_2.tryGetS=function(cc){return(W.tryParseWith(function(cd){var ce;ce=null;return[_2.queues().TryGetValue(cd,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce];}))(cc);};_2.queues=function(){E.$cctor();return E.queues;};_2.add=function(cc,cd){var ce,cf;ce=(cf=_2.tryGetS(cc),cf==null?[cd]:(_2.queues().Remove(cc),cf.$0.concat([cd])));_2.queues().Add(cc,ce);};_3=J.CustomXhrProvider=b_.Class({Async:function(cc,cd,ce,cf,cg){var ch;_4.Start((ch=null,_4.Delay(function(){var ci;ci=J.getHeaderRpc(cd);_2.add(ci,[cf,cg]);return _4.TryWith(_4.Delay(function(){(((b_.Curried3(function(cj,ck,cl){return cj("CustomXhrProvider "+m.prettyPrint(ck)+" "+m.prettyPrint(cl));}))(function(cj){b$.log(cj);}))(ci))(ce);J.callRunRpc(ci,ce);return _4.Zero();}),function(cj){J.returnExnExn(ci,cj);return _4.Zero();});})),null);}},r,_3);_3.New=b_.Ctor(function(){r.New.call(this);},_3);_4.FromContinuations=function(cc){return function(cd){var ce;function cf(cg){if(ce[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{ce[0]=true;_4.scheduler().Fork(cg);}}ce=[false];cc(function(cg){cf(function(){cd.k({$:0,$0:cg});});},function(cg){cf(function(){cd.k({$:1,$0:cg});});},function(cg){cf(function(){cd.k({$:2,$0:cg});});});};};_4.Delay=function(cc){return function(cd){try{(cc(null))(cd);}catch(ce){cd.k({$:1,$0:ce});}};};_4.Bind=function(cc,cd){return _4.checkCancel(function(ce){cc(bq.New(function(cf){var cg;if(cf.$==0){cg=cf.$0;_4.scheduler().Fork(function(){try{(cd(cg))(ce);}catch(ch){ce.k({$:1,$0:ch});}});}else _4.scheduler().Fork(function(){ce.k(cf);});},ce.ct));});};_4.Sleep=function(cc){return function(cd){var ce,cf;ce=void 0;cf=void 0;ce=a.setTimeout(function(){cf.Dispose();_4.scheduler().Fork(function(){cd.k({$:0,$0:null});});},cc);cf=_4.Register(cd.ct,function(){a.clearTimeout(ce);_4.scheduler().Fork(function(){_4.cancel(cd);});});};};_4.Combine=function(cc,cd){return _4.Bind(cc,function(){return cd;});};_4.Zero=function(){br.$cctor();return br.Zero;};_4.Start=function(cc,cd){var ce,cf;ce=(cf=(_4.defCTS())[0],cd==null?cf:cd.$0);_4.scheduler().Fork(function(){if(!ce.c)cc(bq.New(function(cg){if(cg.$==1)_4.UncaughtAsyncError(cg.$0);},ce));});};_4.checkCancel=function(cc){return function(cd){if(cd.ct.c)_4.cancel(cd);else cc(cd);};};_4.Register=function(cc,cd){var ce;return cc===_4.noneCT()?{Dispose:function(){return null;}}:(ce=cc.r.push(cd)-1,{Dispose:function(){return M.set(cc.r,ce,a.ignore);}});};_4.cancel=function(cc){cc.k({$:2,$0:new bF.New(cc.ct)});};_4.defCTS=function(){br.$cctor();return br.defCTS;};_4.UncaughtAsyncError=function(cc){b$.log("WebSharper: Uncaught asynchronous exception",cc);};_4.While=function(cc,cd){return cc()?_4.Bind(cd,function(){return _4.While(cc,cd);}):_4.Return();};_4.Return=function(cc){return function(cd){cd.k({$:0,$0:cc});};};_4.TryWith=function(cc,cd){return function(ce){cc(bq.New(function(cf){if(cf.$==0)ce.k({$:0,$0:cf.$0});else if(cf.$==1)try{(cd(cf.$0))(ce);}catch(cg){ce.k(cf);}else ce.k(cf);},ce.ct));};};_4.scheduler=function(){br.$cctor();return br.scheduler;};_4.noneCT=function(){br.$cctor();return br.noneCT;};_4.GetCT=function(){br.$cctor();return br.GetCT;};_5=t.Require=b_.Class({},r,_5);_6.dlls=function(){return M.ofSeq(_.ofSeq(L.delay(function(){return L.map(function(cc){return cc.$0;},_6.justDlls());})));};_6.justDlls=function(){bM.$cctor();return bM.justDlls;};_7.newPojo=function(cc){var cd,ce;function cf(ch,ci){return function(cj){return _7.addProp(ch,ci,cj);};}function cg(ch){}cd={};L.iter((ce=function(ch){return(function(ci){return cf(ci[0],ci[1]);}(ch))(cd);},function(ch){return cg(ce(ch));}),cc);return cd;};_7.addProp=function(cc,cd,ce){ce[cc]=cd;return ce;};_.ofArray=function(cc){var cd,ce,cf;cd=bt.Empty;for(ce=M.length(cc)-1,cf=0;ce>=cf;ce--)cd=new bt({$:1,$0:M.get(cc,ce),$1:cd});return cd;};_.ofSeq=function(cc){var cd,ce,cf,cg,ch,ci;if(cc instanceof bt)return cc;else if(cc instanceof a.Array)return _.ofArray(cc);else{cd=bb.Get(cc);try{cf=cd.MoveNext();if(!cf)ce=bt.Empty;else{ch=new bt({$:1});cg=ch;while(cf){cg.$0=cd.Current();cd.MoveNext()?cg=(ci=new bt({$:1}),cg.$1=ci,ci):cf=false;}cg.$1=bt.Empty;ce=ch;}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}}};_.head=function(cc){return cc.$==1?cc.$0:_.listEmpty();};_.tail=function(cc){return cc.$==1?cc.$1:_.listEmpty();};_.listEmpty=function(){return e.FailWith("The input list was empty.");};$.Checked=function(cc){var cd;cd=(((bu.BoolCheckedApply())(cc))(be.Static))(function(ce){return $.DynamicCustom(ce,cc.get_View());});return O.Append(cd[0],cd[1]);};$.Value=function(cc){var cd;cd=(((bu.StringApply())(cc))(be.Static))(function(ce){return $.DynamicCustom(ce,cc.get_View());});return O.Append(cd[0],cd[1]);};$.DynamicCustom=function(cc,cd){return be.Dynamic(cd,cc);};bb.Get=function(cc){return cc instanceof a.Array?bb.ArrayEnumerator(cc):F.Equals(typeof cc,"string")?bb.StringEnumerator(cc):cc.GetEnumerator();};bb.ArrayEnumerator=function(cc){return new bc.New(0,null,function(cd){var ce;ce=cd.s;return ce<M.length(cc)&&(cd.c=M.get(cc,ce),cd.s=ce+1,true);},void 0);};bb.StringEnumerator=function(cc){return new bc.New(0,null,function(cd){var ce;ce=cd.s;return ce<cc.length&&(cd.c=cc[ce],cd.s=ce+1,true);},void 0);};bb.Get0=function(cc){return cc instanceof a.Array?bb.ArrayEnumerator(cc):F.Equals(typeof cc,"string")?bb.StringEnumerator(cc):"GetEnumerator0"in cc?cc.GetEnumerator0():cc.GetEnumerator();};bc=bb.T=b_.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},r,bc);bc.New=b_.Ctor(function(cc,cd,ce,cf){r.New.call(this);this.s=cc;this.c=cd;this.n=ce;this.d=cf;},bc);bd.ofSeqNonCopying=function(cc){var cd,ce;if(cc instanceof a.Array)return cc;else if(cc instanceof bt)return M.ofList(cc);else if(cc===null)return[];else{cd=[];ce=bb.Get(cc);try{while(ce.MoveNext())cd.push(ce.Current());return cd;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}}};bd.TreeReduce=function(cc,cd,ce){var cf;function cg(ch){return function(ci){var cj,ck;return ci<=0?cc:ci===1&&(ch>=0&&ch<cf)?M.get(ce,ch):(ck=ci/2>>0,cd((cg(ch))(ck),(cg(ch+ck))(ci-ck)));};}cf=M.length(ce);return(cg(0))(cf);};bd.MapTreeReduce=function(cc,cd,ce,cf){var cg;function ch(ci){return function(cj){var ck,cl;return cj<=0?cd:cj===1&&(ci>=0&&ci<cg)?cc(M.get(cf,ci)):(cl=cj/2>>0,ce((ch(ci))(cl),(ch(ci+cl))(cj-cl)));};}cg=M.length(cf);return(ch(0))(cg);};be.Static=function(cc){return new O({$:3,$0:cc});};be.Updates=function(cc){return bd.MapTreeReduce(function(cd){return cd.NChanged();},o.Const(),o.Map2Unit,cc.DynNodes);};be.AppendTree=function(cc,cd){var ce;return cc===null?cd:cd===null?cc:(ce=new O({$:2,$0:cc,$1:cd}),(be.SetFlags(ce,be.Flags(cc)|be.Flags(cd)),ce));};be.EmptyAttr=function(){bN.$cctor();return bN.EmptyAttr;};be.Dynamic=function(cc,cd){return new O({$:1,$0:new bV.New(cc,cd)});};be.Insert=function(cc,cd){var ce,cf,cg;function ch(ci){var cj,ck;while(true)if(!(ci===null)){if(ci!=null&&ci.$==1)return ce.push(ci.$0);else if(ci!=null&&ci.$==2){cj=ci.$1;ck=ci.$0;ch(ck);ci=cj;}else return ci!=null&&ci.$==3?ci.$0(cc):ci!=null&&ci.$==4?cf.push(ci.$0):null;}else return null;}ce=[];cf=[];ch(cd);cg=ce.slice(0);return bP.New(cc,be.Flags(cd),cg,cf.length===0?null:{$:1,$0:function(ci){L.iter(function(cj){cj(ci);},cf);}});};be.HasExitAnim=function(cc){var cd;cd=2;return(cc.DynFlags&cd)===cd;};be.GetExitAnim=function(cc){return be.GetAnim(cc,function(cd,ce){return cd.NGetExitAnim(ce);});};be.HasEnterAnim=function(cc){var cd;cd=1;return(cc.DynFlags&cd)===cd;};be.GetEnterAnim=function(cc){return be.GetAnim(cc,function(cd,ce){return cd.NGetEnterAnim(ce);});};be.HasChangeAnim=function(cc){var cd;cd=4;return(cc.DynFlags&cd)===cd;};be.GetChangeAnim=function(cc){return be.GetAnim(cc,function(cd,ce){return cd.NGetChangeAnim(ce);});};be.SetFlags=function(cc,cd){cc.flags=cd;};be.Flags=function(cc){return cc!==null&&cc.hasOwnProperty("flags")?cc.flags:0;};be.GetAnim=function(cc,cd){return bh.Concat(M.map(function(ce){return cd(ce,cc.DynElem);},cc.DynNodes));};be.Sync=function(cc,cd){M.iter(function(ce){ce.NSync(cc);},cd.DynNodes);};bf.$cctor=function(){bf.$cctor=a.ignore;bf.LoadedTemplates=new Q.New$5();bf.LocalTemplatesLoaded=false;bf.GlobalHoles=new Q.New$5();bf.TextHoleRE="\\${([^}]+)}";bf.RenderedFullDocTemplate=null;};bg=P.HashSet=b_.Class({Add:function(cc){return this.add(cc);},Contains:function(cc){var cd;cd=this.data[this.hash(cc)];return cd==null?false:this.arrContains(cc,cd);},add:function(cc){var cd,ce;cd=this.hash(cc);ce=this.data[cd];return ce==null?(this.data[cd]=[cc],this.count=this.count+1,true):this.arrContains(cc,ce)?false:(ce.push(cc),this.count=this.count+1,true);},arrContains:function(cc,cd){var ce,cf,cg,ch;ce=true;cf=0;ch=cd.length;while(ce&&cf<ch)if(this.equals.apply(null,[cd[cf],cc]))ce=false;else cf=cf+1;return!ce;},ExceptWith:function(cc){var cd;cd=bb.Get(cc);try{while(cd.MoveNext())this.Remove(cd.Current());}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cc){var cd,ce,cf,cg;cd=0;ce=bZ.concat(this.data);for(cf=0,cg=ce.length-1;cf<=cg;cf++)M.set(cc,cf,ce[cf]);},IntersectWith:function(cc){var cd,ce,cf,cg,ch;cd=new bg.New$4(cc,this.equals,this.hash);ce=bZ.concat(this.data);for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce[cf];!cd.Contains(ch)?this.Remove(ch):void 0;}},Remove:function(cc){var cd;cd=this.data[this.hash(cc)];return cd==null?false:this.arrRemove(cc,cd)&&(this.count=this.count-1,true);},arrRemove:function(cc,cd){var ce,cf,cg,ch;ce=true;cf=0;ch=cd.length;while(ce&&cf<ch)if(this.equals.apply(null,[cd[cf],cc])){cd.splice.apply(cd,[cf,1]);ce=false;}else cf=cf+1;return!ce;},GetEnumerator:function(){return bb.Get(bZ.concat(this.data));},GetEnumerator0:function(){return bb.Get(bZ.concat(this.data));}},r,bg);bg.New$3=b_.Ctor(function(){bg.New$4.call(this,[],F.Equals,F.Hash);},bg);bg.New$4=b_.Ctor(function(cc,cd,ce){var cf;r.New.call(this);this.equals=cd;this.hash=ce;this.data=[];this.count=0;cf=bb.Get(cc);try{while(cf.MoveNext())this.add(cf.Current());}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}},bg);bg.New$2=b_.Ctor(function(cc){bg.New$4.call(this,cc,F.Equals,F.Hash);},bg);o=n.View=b_.Class({},null,o);bh.get_UseAnimations=function(){return bC.UseAnimations();};bh.Play=function(cc){var cd;cd=null;return _4.Delay(function(){return _4.Bind(bh.Run(a.ignore,bC.Actions(cc)),function(){bC.Finalize(cc);return _4.Return(null);});});};bh.Append=function(cc,cd){return{$:0,$0:bR.Append(cc.$0,cd.$0)};};bh.Run=function(cc,cd){var ce;function cf(cg){function ch(ci){return function(cj){var ck;ck=cj-ci;cd.Compute(ck);cc();return ck<=ce?void a.requestAnimationFrame(function(cl){(ch(ci))(cl);}):cg();};}a.requestAnimationFrame(function(ci){(ch(ci))(ci);});}ce=cd.Duration;return ce===0?_4.Zero():_4.FromContinuations(function(cg,ch,ci){return cf.apply(null,[cg,ch,ci]);});};bh.Concat=function(cc){return{$:0,$0:bR.Concat(L.map(bC.List,cc))};};bh.get_Empty=function(){return{$:0,$0:bR.Empty()};};bi.BatchUpdatesEnabled=function(){bD.$cctor();return bD.BatchUpdatesEnabled;};bk.StartProcessor=function(cc){var cd;function ce(){var cf;cf=null;return _4.Delay(function(){return _4.Bind(cc,function(){var cg;cg=cd[0];return cg===1?(cd[0]=0,_4.Zero()):cg===2?(cd[0]=1,ce()):_4.Zero();});});}cd=[0];return function(){var cf;cf=cd[0];cf===0?(cd[0]=1,_4.Start(ce(),null)):cf===1?cd[0]=2:void 0;};};bl.TryParse=function(cc){var cd;cd=ca.parse(cc);return a.isNaN(cd)?null:{$:1,$0:cd};};X.TryParse=function(cc,cd,ce,cf){var cg,ch;cg=+cc;ch=cg===cg-cg%1&&cg>=cd&&cg<=ce;ch?cf.set(cg):void 0;return ch;};bm=n.ConcreteVar=b_.Class({get_View:function(){return this.view;},Set:function(cc){if(this.isConst)(function(cd){return cd("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cd){b$.log(cd);}));else{G.Obsolete(this.snap);this.current=cc;this.snap=G.New({$:2,$0:cc,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(cc){var cd;cd=cc(this.Get());cd!=null&&cd.$==1?this.Set(cd.$0):void 0;}},s,bm);bm.New=b_.Ctor(function(cc,cd,ce){var cf;cf=this;s.New.call(this);this.isConst=cc;this.current=ce;this.snap=cd;this.view=function(){return cf.snap;};this.id=bH.Int();},bm);bn.$cctor=function(){bn.$cctor=a.ignore;bn.EndPoint="?";bn.AjaxProvider=new bI.New();};bo.alreadyAdded=function(){return e.FailWith("An item with the same key has already been added.");};bo.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};bp=n.Elt=b_.Class({},B,bp);bp.New=function(cc,cd,ce){var cf,cg;cf=R.CreateElemNode(cc,cd,ce.docNode);cg=bJ.Create(ce.updates);return new bp.New$1({$:1,$0:cf},o.Map2Unit(be.Updates(cf.Attr),cg.v),cc,cg);};bp.New$1=b_.Ctor(function(cc,cd,ce,cf){B.New.call(this,cc,cd);this.docNode$1=cc;this.updates$1=cd;this.elt=ce;this.rvUpdates=cf;},bp);bq.New=function(cc,cd){return{k:cc,ct:cd};};br.$cctor=function(){br.$cctor=a.ignore;br.noneCT=bs.New(false,[]);br.scheduler=new bK.New();br.defCTS=[new bL.New()];br.Zero=_4.Return();br.GetCT=function(cc){cc.k({$:0,$0:cc.ct});};};L.last=function(cc){var cd,ce;cd=bb.Get(cc);try{if(!cd.MoveNext())ce=L.insufficient();else{while(cd.MoveNext());ce=cd.Current();}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};L.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};L.tryHead=function(cc){var cd;cd=bb.Get(cc);try{return cd.MoveNext()?{$:1,$0:cd.Current()}:null;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};bs.New=function(cc,cd){return{c:cc,r:cd};};bt=_.T=b_.Class({GetEnumerator:function(){return new bc.New(this,null,function(cc){var cd;cd=cc.s;return cd.$==0?false:(cc.c=cd.$0,cc.s=cd.$1,true);},void 0);},GetEnumerator0:function(){return bb.Get(this);}},null,bt);bt.Empty=new bt({$:0});bu.BoolCheckedApply=function(){bN.$cctor();return bN.BoolCheckedApply;};bu.StringApply=function(){bN.$cctor();return bN.StringApply;};bu.ApplyValue=function(cc,cd,ce,cf,cg){return[cf(function(ch){function ci(){ce.UpdateMaybe(function(cj){var ck,cl;ck=cc(ch);return ck!=null&&ck.$==1&&(!F.Equals(ck.$0,cj)&&(cl=[ck,ck.$0],true))?cl[0]:null;});}ch.addEventListener("change",ci);ch.addEventListener("input",ci);ch.addEventListener("keypress",ci);}),cg(function(ch){return function(ci){var cj,ck;cj=cc(ch);return cj!=null&&cj.$==1&&(F.Equals(cj.$0,ci)&&(ck=cj.$0,true))?null:cd(ch,ci);};})];};bu.StringSet=function(){bN.$cctor();return bN.StringSet;};bu.StringGet=function(){bN.$cctor();return bN.StringGet;};bu.IntSetUnchecked=function(){bN.$cctor();return bN.IntSetUnchecked;};bu.IntGetUnchecked=function(){bN.$cctor();return bN.IntGetUnchecked;};bu.IntSetChecked=function(){bN.$cctor();return bN.IntSetChecked;};bu.IntGetChecked=function(){bN.$cctor();return bN.IntGetChecked;};bu.FloatSetUnchecked=function(){bN.$cctor();return bN.FloatSetUnchecked;};bu.FloatGetUnchecked=function(){bN.$cctor();return bN.FloatGetUnchecked;};bu.FloatSetChecked=function(){bN.$cctor();return bN.FloatSetChecked;};bu.FloatGetChecked=function(){bN.$cctor();return bN.FloatGetChecked;};bv.convertTextNode=function(cc){var cd,ce,cf,cg,ch,ci;cd=null;ce=0;cg=cc.textContent;ch=new a.RegExp(A.TextHoleRE(),"g");while(cd=ch.exec(cg),cd!==null){cc.parentNode.insertBefore(self.document.createTextNode(V.string(cg,{$:1,$0:ce},{$:1,$0:ch.lastIndex-M.get(cd,0).length-1})),cc);ce=ch.lastIndex;ci=self.document.createElement("span");ci.setAttribute("ws-replace",M.get(cd,1).toLowerCase());cc.parentNode.insertBefore(ci,cc);}ch.lastIndex=0;cc.textContent=V.string(cg,{$:1,$0:ce},null);};bv.failNotLoaded=function(cc){b$.warn("Instantiating non-loaded template",cc);};bv.fillTextHole=function(cc,cd,ce){var cf;cf=cc.querySelector("[ws-replace]");return F.Equals(cf,null)?(b$.warn("Filling non-existent text hole",ce),null):(cf.parentNode.replaceChild(self.document.createTextNode(cd),cf),{$:1,$0:cf.getAttribute("ws-replace")});};bv.removeHolesExcept=function(cc,cd){function ce(cf){A.foreachNotPreserved(cc,"["+cf+"]",function(cg){if(!cd.Contains(cg.getAttribute(cf)))cg.removeAttribute(cf);});}ce("ws-attr");ce("ws-onafterrender");ce("ws-var");A.foreachNotPreserved(cc,"[ws-hole]",function(cf){if(!cd.Contains(cf.getAttribute("ws-hole"))){cf.removeAttribute("ws-hole");while(cf.hasChildNodes())cf.removeChild(cf.lastChild);}});A.foreachNotPreserved(cc,"[ws-replace]",function(cf){if(!cd.Contains(cf.getAttribute("ws-replace")))cf.parentNode.removeChild(cf);});A.foreachNotPreserved(cc,"[ws-on]",function(cf){cf.setAttribute("ws-on",N.concat(" ",M.filter(function(cg){return cd.Contains(M.get(N.SplitChars(cg,[":"],1),1));},N.SplitChars(cf.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(cc,"[ws-attr-holes]",function(cf){var cg,ch,ci,cj,ck;cg=N.SplitChars(cf.getAttribute("ws-attr-holes"),[" "],1);for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=M.get(cg,ch);cf.setAttribute(cj,(ck=new a.RegExp(A.TextHoleRE(),"g"),cf.getAttribute(cj).replace(ck,function(cl,cm){return cd.Contains(cm)?cl:"";})));}});};bv.fillInstanceAttrs=function(cc,cd){var ce,cf,cg,ch,ci;bv.convertAttrs(cd);ce=cd.nodeName.toLowerCase();cf=cc.querySelector("[ws-attr="+ce+"]");if(F.Equals(cf,null))b$.warn("Filling non-existent attr hole",ce);else{cf.removeAttribute("ws-attr");for(cg=0,ch=cd.attributes.length-1;cg<=ch;cg++){ci=cd.attributes.item(cg);ci.name==="class"&&cf.hasAttribute("class")?cf.setAttribute("class",cf.getAttribute("class")+" "+ci.nodeValue):cf.setAttribute(ci.name,ci.nodeValue);}}};bv.mapHoles=function(cc,cd){function ce(cf){A.foreachNotPreserved(cc,"["+cf+"]",function(cg){var ch,ci;ch=(ci=null,[cd.TryGetValue(cg.getAttribute(cf).toLowerCase(),{get:function(){return ci;},set:function(cj){ci=cj;}}),ci]);ch[0]?cg.setAttribute(cf,ch[1]):void 0;});}ce("ws-hole");ce("ws-replace");ce("ws-attr");ce("ws-onafterrender");ce("ws-var");A.foreachNotPreserved(cc,"[ws-on]",function(cf){cf.setAttribute("ws-on",N.concat(" ",M.map(function(cg){var ch,ci,cj;ch=N.SplitChars(cg,[":"],1);ci=(cj=null,[cd.TryGetValue(M.get(ch,1),{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);return ci[0]?M.get(ch,0)+":"+ci[1]:cg;},N.SplitChars(cf.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(cc,"[ws-attr-holes]",function(cf){var cg,ch,ci;cg=N.SplitChars(cf.getAttribute("ws-attr-holes"),[" "],1);for(ch=0,ci=cg.length-1;ch<=ci;ch++)(function(){var cj;function ck(cl,cm){var cn;cn=e.KeyValue(cm);return cl.replace(new a.RegExp("\\${"+cn[0]+"}","ig"),"${"+cn[1]+"}");}cj=M.get(cg,ch);return cf.setAttribute(cj,(((b_.Curried3(L.fold))(ck))(cf.getAttribute(cj)))(cd));}());});};bv.fill=function(cc,cd,ce){while(true)if(cc.hasChildNodes())ce=cd.insertBefore(cc.lastChild,ce);else return null;};bv.convertAttrs=function(cc){var ce,cf,cg,ch,ci,cj,ck,cl;function cd(cm){var cn;cn=cc.getAttribute(cm);cn===null?void 0:cc.setAttribute(cm,cn.toLowerCase());}ce=cc.attributes;cf=[];cg=[];ch=[];for(ci=0,cj=ce.length-1;ci<=cj;ci++){ck=ce.item(ci);N.StartsWith(ck.nodeName,"ws-on")&&ck.nodeName!=="ws-onafterrender"&&ck.nodeName!=="ws-on"?(cf.push(ck.nodeName),cg.push(V.string(ck.nodeName,{$:1,$0:"ws-on".length},null)+":"+ck.nodeValue.toLowerCase())):!N.StartsWith(ck.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(ck.nodeValue)?(ck.nodeValue=(cl=new a.RegExp(A.TextHoleRE(),"g"),ck.nodeValue.replace(cl,function(cm,cn){return"${"+cn.toLowerCase()+"}";})),ch.push(ck.nodeName)):void 0;}!(cg.length==0)?cc.setAttribute("ws-on",N.concat(" ",cg)):void 0;!(ch.length==0)?cc.setAttribute("ws-attr-holes",N.concat(" ",ch)):void 0;cd("ws-hole");cd("ws-replace");cd("ws-attr");cd("ws-onafterrender");cd("ws-var");M.iter(function(cm){cc.removeAttribute(cm);},cf);};bw=P.KeyCollection=b_.Class({GetEnumerator$1:function(){return bb.Get(L.map(function(cc){return cc.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,bw);bw.New=b_.Ctor(function(cc){r.New.call(this);this.d=cc;},bw);bx=n.DocElemNode=b_.Class({Equals:function(cc){return this.ElKey===cc.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bx);bx.New=function(cc,cd,ce,cf,cg,ch){var ci;return new bx((ci={Attr:cc,Children:cd,El:cf,ElKey:cg},(b_.SetOptional(ci,"Delimiters",ce),b_.SetOptional(ci,"Render",ch),ci)));};bA.New=function(cc,cd){return{PreviousNodes:cc,Top:cd};};bB.get_Empty=function(){return{$:0,$0:new bg.New$3()};};bB.FindAll=function(cc){var cd;function ce(ch,ci){var cj,ck,cl,cm,cn;while(true)switch(ch){case 0:if(ci!=null&&ci.$==0){ck=ci.$1;cl=ci.$0;ce(0,cl);ci=ck;}else if(ci!=null&&ci.$==1){cm=ci.$0;ci=cm;ch=1;}else if(ci!=null&&ci.$==2){cn=ci.$0;ci=cn.Current;}else return ci!=null&&ci.$==6?(cj=ci.$0.Holes,(function(co){return function(cp){M.iter(co,cp);};}(cg))(cj)):null;break;case 1:cd.push(ci);ci=ci.Children;ch=0;break;}}function cf(ch){return ce(0,ch);}function cg(ch){return ce(1,ch);}cd=[];cf(cc);return{$:0,$0:new bg.New$2(cd)};};bB.Filter=function(cc,cd){return{$:0,$0:bY.Filter(cc,cd.$0)};};bB.Except=function(cc,cd){return{$:0,$0:bY.Except(cc.$0,cd.$0)};};bB.ToArray=function(cc){return bY.ToArray(cc.$0);};bB.Intersect=function(cc,cd){return{$:0,$0:bY.Intersect(cc.$0,cd.$0)};};bC.UseAnimations=function(){bQ.$cctor();return bQ.UseAnimations;};bC.Actions=function(cc){return bC.ConcatActions(M.choose(function(cd){return cd.$==1?{$:1,$0:cd.$0}:null;},bR.ToArray(cc.$0)));};bC.Finalize=function(cc){M.iter(function(cd){if(cd.$==0)cd.$0();},bR.ToArray(cc.$0));};bC.ConcatActions=function(cc){var cd,ce,cf,cg;cd=bd.ofSeqNonCopying(cc);ce=M.length(cd);return ce===0?bC.Const():ce===1?M.get(cd,0):(cf=L.max(L.map(function(ch){return ch.Duration;},cd)),(cg=M.map(function(ch){return bC.Prolong(cf,ch);},cd),bC.Def(cf,function(ch){M.iter(function(ci){ci.Compute(ch);},cg);})));};bC.List=function(cc){return cc.$0;};bC.Const=function(cc){return bC.Def(0,function(){return cc;});};bC.Def=function(cc,cd){return{Compute:cd,Duration:cc};};bC.Prolong=function(cc,cd){var ce,cf,cg;ce=cd.Compute;cf=cd.Duration;cg=b4.Create(function(){return cd.Compute(cd.Duration);});return{Compute:function(ch){return ch>=cf?cg.f():ce(ch);},Duration:cc};};bD.$cctor=function(){bD.$cctor=a.ignore;bD.BatchUpdatesEnabled=true;};bF=d.OperationCanceledException=b_.Class({},bE,bF);bF.New=b_.Ctor(function(cc){bF.New$1.call(this,"The operation was canceled.",null,cc);},bF);bF.New$1=b_.Ctor(function(cc,cd,ce){this.message=cc;this.inner=cd;ba.setPrototypeOf(this,bF.prototype);this.ct=ce;},bF);bG.Activate=function(cc){var cd,cf,cg,ch,ci,cj,ck;function ce(cl){var cm,cn,co,cp,cq;if(F.Equals(cl,null))return cl;else if(typeof cl=="object"){if(cl instanceof a.Array)return bG.shallowMap(ce,cl);else{cm=bG.shallowMap(ce,cl.$V);cn=cl.$T;if(cn===void 0)return cm;else{co=M.get(cf,cn);if(co===1)return _.ofArray(cm);else if(co===2)return self.WebSharper.Decimal.CreateDecimalBits(cm);else{cp=new(M.get(cf,cn))();for(var cr in cm)if(function(cs){cp[cs]=cm[cs];return false;}(cr))break;return cp;}}}}else return cl;}cf=cc?cc.$TYPES:void 0;if(cf===void 0)cd=cc;else{for(cg=0,ch=M.length(cf)-1;cg<=ch;cg++){ck=M.get(cf,cg);switch(!F.Equals(ck,null)&&ck.length===3?M.get(ck,0)==="WebSharper"?M.get(ck,1)==="List"?M.get(ck,2)==="T"?0:(cj=ck,2):(cj=ck,2):(cj=ck,2):!F.Equals(ck,null)&&ck.length===2?M.get(ck,0)==="WebSharper"?M.get(ck,1)==="Decimal"?1:(cj=ck,2):(cj=ck,2):(cj=ck,2)){case 0:ci=1;break;case 1:ci=2;break;case 2:ci=bG.lookup(cj);break;}M.set(cf,cg,ci);}cd=cc.$DATA;}return ce(cd);};bG.shallowMap=function(cc,cd){var ce,cf;if(cd instanceof a.Array)return M.map(cc,cd);else if(typeof cd=="object"){ce={};for(var cg in cd)if(function(ch){ce[ch]=cc(cd[ch]);return false;}(cg))break;return ce;}else return cd;};bG.lookup=function(cc){var cd,ce,cf,cg,ch;cf=M.length(cc);cd=self;ce=0;while(ce<cf){cg=M.get(cc,ce);ch=cd[cg];!F.Equals(typeof ch,void 0)?(cd=ch,ce=ce+1):e.FailWith("Invalid server reply. Failed to find type: "+cg);}return cd;};bH.Int=function(){bH.set_counter(bH.counter()+1);return bH.counter();};bH.set_counter=function(cc){b1.$cctor();b1.counter=cc;};bH.counter=function(){b1.$cctor();return b1.counter;};bI=v.XhrProvider=b_.Class({Async:function(cc,cd,ce,cf,cg){v.ajax(true,cc,cd,ce,cf,cg,function(){v.ajax(true,cc,cd,ce,cf,cg,void 0);});}},r,bI);bI.New=b_.Ctor(function(){r.New.call(this);},bI);bJ=n.Updates=b_.Class({},null,bJ);bJ.Create=function(cc){var cd;cd=null;cd=bJ.New(cc,null,function(){var ce;ce=cd.s;return ce===null?(ce=G.Copy(cd.c()),cd.s=ce,G.WhenObsoleteRun(ce,function(){cd.s=null;}),ce):ce;});return cd;};bJ.New=function(cc,cd,ce){return new bJ({c:cc,s:cd,v:ce});};bK=_4.Scheduler=b_.Class({Fork:function(cc){var cd;cd=this;this.robin.push(cc);this.idle?(this.idle=false,a.setTimeout(function(){cd.tick();},0)):void 0;},tick:function(){var cc,cd,ce;cd=this;ce=ca.now();cc=true;while(cc)if(this.robin.length===0){this.idle=true;cc=false;}else{(this.robin.shift())();ca.now()-ce>40?(a.setTimeout(function(){cd.tick();},0),cc=false):void 0;}}},r,bK);bK.New=b_.Ctor(function(){r.New.call(this);this.idle=true;this.robin=[];},bK);bL=d.CancellationTokenSource=b_.Class({},r,bL);bL.New=b_.Ctor(function(){r.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bL);bM.$cctor=function(){bM.$cctor=a.ignore;bM.justDlls=[{$:0,$0:"/dlls/WebSharper.Main.dll"},{$:0,$0:"/dlls/WebSharper.Collections.dll"},{$:0,$0:"/dlls/WebSharper.Control.dll"},{$:0,$0:"/dlls/WebSharper.Web.dll"},{$:0,$0:"/dlls/WebSharper.Sitelets.dll"},{$:0,$0:"/dlls/WebSharper.UI.dll"},{$:0,$0:"/dlls/WebSharper.UI.Templating.Runtime.dll"},{$:0,$0:"/dlls/WebSharper.Data.dll"}];};bN.$cctor=function(){var cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;bN.$cctor=a.ignore;bN.EmptyAttr=null;bN.BoolCheckedApply=b_.Curried3(function(cm,cn,co){return[cn(function(cp){cp.addEventListener("change",function(){return!F.Equals(cm.Get(),cp.checked)?cm.Set(cp.checked):null;});}),co(function(cp){return function(cq){cp.checked=cq;};})];});bN.StringSet=function(cm){return function(cn){cm.value=cn;};};bN.StringGet=function(cm){return{$:1,$0:cm.value};};bN.StringApply=(cc=bu.StringGet(),(cd=bu.StringSet(),b_.Curried(bu.ApplyValue,3,[cc,function(cm,cn){return(cd(cm))(cn);}])));bN.IntSetUnchecked=function(cm){return function(cn){cm.value=a.String(cn);};};bN.IntGetUnchecked=function(cm){var cn,co;cn=cm.value;return bT.isBlank(cn)?{$:1,$0:0}:(co=+cn,co!==co>>0?null:{$:1,$0:co});};bN.IntApplyUnchecked=(ce=bu.IntGetUnchecked(),(cf=bu.IntSetUnchecked(),b_.Curried(bu.ApplyValue,3,[ce,function(cm,cn){return(cf(cm))(cn);}])));bN.IntSetChecked=function(cm){return function(cn){var co;co=cn.get_Input();return cm.value!==co?void(cm.value=co):null;};};bN.IntGetChecked=function(cm){var cn,co,cp;cn=cm.value;return{$:1,$0:bT.isBlank(cn)?(cm.checkValidity?cm.checkValidity():true)?new bU({$:2,$0:cn}):new bU({$:1,$0:cn}):(co=(cp=0,[X.TryParseInt32(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]),co[0]?new bU({$:0,$0:co[1],$1:cn}):new bU({$:1,$0:cn}))};};bN.IntApplyChecked=(cg=bu.IntGetChecked(),(ch=bu.IntSetChecked(),b_.Curried(bu.ApplyValue,3,[cg,function(cm,cn){return(ch(cm))(cn);}])));bN.FloatSetUnchecked=function(cm){return function(cn){cm.value=a.String(cn);};};bN.FloatGetUnchecked=function(cm){var cn,co;cn=cm.value;return bT.isBlank(cn)?{$:1,$0:0}:(co=+cn,a.isNaN(co)?null:{$:1,$0:co});};bN.FloatApplyUnchecked=(ci=bu.FloatGetUnchecked(),(cj=bu.FloatSetUnchecked(),b_.Curried(bu.ApplyValue,3,[ci,function(cm,cn){return(cj(cm))(cn);}])));bN.FloatSetChecked=function(cm){return function(cn){var co;co=cn.get_Input();return cm.value!==co?void(cm.value=co):null;};};bN.FloatGetChecked=function(cm){var cn,co;cn=cm.value;return{$:1,$0:bT.isBlank(cn)?(cm.checkValidity?cm.checkValidity():true)?new bU({$:2,$0:cn}):new bU({$:1,$0:cn}):(co=+cn,a.isNaN(co)?new bU({$:1,$0:cn}):new bU({$:0,$0:co,$1:cn}))};};bN.FloatApplyChecked=(ck=bu.FloatGetChecked(),(cl=bu.FloatSetChecked(),b_.Curried(bu.ApplyValue,3,[ck,function(cm,cn){return(cl(cm))(cn);}])));};bP.New=function(cc,cd,ce,cf){var cg;cg={DynElem:cc,DynFlags:cd,DynNodes:ce};b_.SetOptional(cg,"OnAfterRender",cf);return cg;};bQ.$cctor=function(){bQ.$cctor=a.ignore;bQ.CubicInOut=bX.Custom(function(cc){var cd;cd=cc*cc;return 3*cd-2*(cd*cc);});bQ.UseAnimations=true;};bR.Append=function(cc,cd){return cc.$==0?cd:cd.$==0?cc:{$:2,$0:cc,$1:cd};};bR.ToArray=function(cc){var cd;function ce(cf){var cg,ch;while(true)if(cf.$==1)return cd.push(cf.$0);else if(cf.$==2){cg=cf.$1;ch=cf.$0;ce(ch);cf=cg;}else return cf.$==3?M.iter(function(ci){cd.push(ci);},cf.$0):null;}cd=[];ce(cc);return cd.slice(0);};bR.Concat=function(cc){var cd;cd=bd.ofSeqNonCopying(cc);return bd.TreeReduce(bR.Empty(),bR.Append,cd);};bR.Empty=function(){b5.$cctor();return b5.Empty;};bS.Clear=function(cc){cc.splice(0,M.length(cc));};bT.isBlank=function(cc){return N.forall(b2.IsWhiteSpace,cc);};bU=n.CheckedInput=b_.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bU);bV=n.DynamicAttrNode=b_.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cc){return bh.get_Empty();},NGetEnterAnim:function(cc){return bh.get_Empty();},NGetChangeAnim:function(cc){return bh.get_Empty();},NSync:function(cc){if(this.dirty){(this.push(cc))(this.value);this.dirty=false;}}},r,bV);bV.New=b_.Ctor(function(cc,cd){var ce;ce=this;r.New.call(this);this.push=cd;this.value=void 0;this.dirty=false;this.updates=o.Map(function(cf){ce.value=cf;ce.dirty=true;},cc);},bV);bW.$cctor=function(){var cc;bW.$cctor=a.ignore;bW.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bW.rtagName=new a.RegExp("<([\\w:]+)");bW.rhtml=new a.RegExp("<|&#?\\w+;");bW.wrapMap=(cc=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:cc,tbody:cc,tfoot:cc,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bW.defaultWrap=[0,"",""];};bX=n.Easing=b_.Class({},r,bX);bX.Custom=function(cc){return new bX.New(cc);};bX.New=b_.Ctor(function(cc){r.New.call(this);this.transformTime=cc;},bX);bY.Filter=function(cc,cd){return new bg.New$2(M.filter(cc,bY.ToArray(cd)));};bY.Except=function(cc,cd){var ce;ce=new bg.New$2(bY.ToArray(cd));ce.ExceptWith(bY.ToArray(cc));return ce;};bY.ToArray=function(cc){var cd;cd=M.create(cc.get_Count(),void 0);cc.CopyTo(cd);return cd;};bY.Intersect=function(cc,cd){var ce;ce=new bg.New$2(bY.ToArray(cc));ce.IntersectWith(bY.ToArray(cd));return ce;};bZ.concat=function(cc){var cd,ce;cd=[];for(var cf in cc)cd.push.apply(cd,cc[cf]);return cd;};b0=d.FormatException=b_.Class({},bE,b0);b0.New$1=b_.Ctor(function(cc){this.message=cc;ba.setPrototypeOf(this,b0.prototype);},b0);b1.$cctor=function(){b1.$cctor=a.ignore;b1.counter=0;};b2.IsWhiteSpace=function(cc){return cc.match(new a.RegExp("\\s"))!==null;};b3.Children=function(cc,cd){var ce,cf,cg;if(cd!=null&&cd.$==1){cg=[];ce=cd.$0[0].nextSibling;while(ce!==cd.$0[1]){cg.push(ce);ce=ce.nextSibling;}return{$:0,$0:cg};}else return{$:0,$0:M.init(cc.childNodes.length,(cf=cc.childNodes,function(ch){return cf[ch];}))};};b3.Except=function(cc,cd){var ce;ce=cc.$0;return{$:0,$0:M.filter(function(cf){return M.forall(function(cg){return!(cf===cg);},ce);},cd.$0)};};b3.Iter=function(cc,cd){M.iter(cc,cd.$0);};b3.DocChildren=function(cc){var cd;function ce(cf){var cg,ch,ci,cj;while(true){if(cf!=null&&cf.$==2){ch=cf.$0;cf=ch.Current;}else if(cf!=null&&cf.$==1)return cd.push(cf.$0.El);else if(cf==null)return null;else if(cf!=null&&cf.$==5)return cd.push(cf.$0);else if(cf!=null&&cf.$==4)return cd.push(cf.$0.Text);else if(cf!=null&&cf.$==6){cg=cf.$0.Els;return(function(ck){return function(cl){M.iter(ck,cl);};}(function(ck){if(ck==null||ck.constructor===ba)ce(ck);else cd.push(ck);}))(cg);}else{ci=cf.$1;cj=cf.$0;ce(cj);cf=ci;}}}cd=[];ce(cc.Children);return{$:0,$0:bd.ofSeqNonCopying(cd)};};b4.Create=function(cc){return b7.New(false,cc,b4.forceLazy);};b4.forceLazy=function(){var cc;cc=this.v();this.c=true;this.v=cc;this.f=b4.cachedLazy;return cc;};b4.cachedLazy=function(){return this.v;};b5.$cctor=function(){b5.$cctor=a.ignore;b5.Empty={$:0};};b7.New=function(cc,cd,ce){return{c:cc,v:cd,f:ce};};b_.OnLoad(function(){c.main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

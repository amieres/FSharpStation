function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.String=c.String||{};e=c.ParseO=c.ParseO||{};f=b.WasmLoader=b.WasmLoader||{};g=f.Remoting=f.Remoting||{};h=g.ReturnQueue=g.ReturnQueue||{};i=a.WebSharper=a.WebSharper||{};j=i.Obj=i.Obj||{};k=g.CustomXhrProvider=g.CustomXhrProvider||{};l=f.WasmLoad=f.WasmLoad||{};m=l.Require=l.Require||{};n=l.Global=l.Global||{};o=i.Operators=i.Operators||{};p=i.Utils=i.Utils||{};q=i.Arrays=i.Arrays||{};r=i.Slice=i.Slice||{};s=i.Seq=i.Seq||{};t=i.Strings=i.Strings||{};u=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};v=i.Char=i.Char||{};w=i.UI=i.UI||{};x=w.Var=w.Var||{};y=i.JavaScript=i.JavaScript||{};z=y.Pervasives=y.Pervasives||{};A=i.Unchecked=i.Unchecked||{};B=i.Collections=i.Collections||{};C=B.Dictionary=B.Dictionary||{};D=i.Remoting=i.Remoting||{};E=y.JS=y.JS||{};F=i.List=i.List||{};G=b.LibraryJS=b.LibraryJS||{};H=G.Pojo=G.Pojo||{};I=a.EventTarget;J=a.XMLHttpRequestEventTarget;K=a.ArrayBufferView;L=D.AjaxRemotingProvider=D.AjaxRemotingProvider||{};M=F.T=F.T||{};N=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};O=a.GeneratedPrintf=a.GeneratedPrintf||{};P=w.HtmlModule=w.HtmlModule||{};Q=P.attr=P.attr||{};R=a.Node;S=i.Enumerator=i.Enumerator||{};T=S.T=S.T||{};U=i.Numeric=i.Numeric||{};V=a.System=a.System||{};W=V.Guid=V.Guid||{};X=w.Var$1=w.Var$1||{};Y=i.Lazy=i.Lazy||{};Z=a.Object;_0=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};_1=i.Concurrency=i.Concurrency||{};_2=w.Doc=w.Doc||{};_3=w.AttrProxy=w.AttrProxy||{};_4=w.Client=w.Client||{};_5=_4.Templates=_4.Templates||{};_6=a.WindowOrWorkerGlobalScope;_7=i.DateUtil=i.DateUtil||{};_8=w.ConcreteVar=w.ConcreteVar||{};_9=w.Snap=w.Snap||{};_=B.DictionaryUtil=B.DictionaryUtil||{};$=i.LazyExtensionsProxy=i.LazyExtensionsProxy||{};ba=$.LazyRecord=$.LazyRecord||{};bb=D.XhrProvider=D.XhrProvider||{};bc=_1.AsyncBody=_1.AsyncBody||{};bd=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};be=i.Task=i.Task||{};bf=i.Task1=i.Task1||{};bg=a.Error;bh=i.OperationCanceledException=i.OperationCanceledException||{};bi=_1.CT=_1.CT||{};bj=w.View=w.View||{};bk=w.DomUtility=w.DomUtility||{};bl=w.Docs=w.Docs||{};bm=w.AttrModule=w.AttrModule||{};bn=w.Attrs=w.Attrs||{};bo=w.Abbrev=w.Abbrev||{};bp=bo.Fresh=bo.Fresh||{};bq=i.TaskCompletionSource=i.TaskCompletionSource||{};br=_1.Scheduler=_1.Scheduler||{};bs=i.CancellationTokenSource=i.CancellationTokenSource||{};bt=i.AggregateException=i.AggregateException||{};bu=w.Elt=w.Elt||{};bv=w.Array=w.Array||{};bw=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bx=B.HashSet=B.HashSet||{};by=w.An=w.An||{};bz=_4.Settings=_4.Settings||{};bA=bo.Mailbox=bo.Mailbox||{};bB=i.Json=i.Json||{};bC=i.InvalidOperationException=i.InvalidOperationException||{};bD=w.DocElemNode=w.DocElemNode||{};bE=a.CharacterData;bF=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bG=w.Updates=w.Updates||{};bH=_5.Prepare=_5.Prepare||{};bI=B.KeyCollection=B.KeyCollection||{};bJ=_4.Docs=_4.Docs||{};bK=bJ.RunState=bJ.RunState||{};bL=bJ.NodeSet=bJ.NodeSet||{};bM=w.Anims=w.Anims||{};bN=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bO=i.FormatException=i.FormatException||{};bP=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bQ=_4.Attrs=_4.Attrs||{};bR=bQ.Dyn=bQ.Dyn||{};bS=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bT=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bU=w.AppendList=w.AppendList||{};bV=w.Easing=w.Easing||{};bW=bo.HashSet=bo.HashSet||{};bX=B.HashSetUtil=B.HashSetUtil||{};bY=i.Queue=i.Queue||{};bZ=w.DynamicAttrNode=w.DynamicAttrNode||{};b0=bJ.DomNodes=bJ.DomNodes||{};b1=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b2=a.console;b3=a.IntelliFactory;b4=b3&&b3.Runtime;b5=a.JSON;b6=a.jQuery;b7=a.Date;c.Error=function(b8){return{$:1,$0:b8};};c.print=function(b8){if(typeof b8=="string")((function(b9){return function(b_){return b9(p.toSafe(b_));};}(function(b9){b2.log(b9);}))(b8));else((function(b9){return function(b_){return b9(p.prettyPrint(b_));};}(function(b9){b2.log(b9);}))(b8));};c["String.Substring2"]=function(b8,b9,b_){var b$,ca;while(true){if(b_<=0)return"";else if(b9>=b8.length)return"";else if(b9<0){b$=b9;b9=0;b_=b_+b$;}else return t.Substring(b8,b9,(ca=b8.length-b9,A.Compare(b_,ca)===-1?b_:ca));}};c["String.Left"]=function(b8,b9){return b9<0?c["String.Substring2"](b8,0,b8.length+b9):c["String.Substring2"](b8,0,b9);};c["String.Right"]=function(b8,b9){var b_,b$;return c["String.Substring2"](b8,(b_=0,(b$=b8.length-b9,A.Compare(b_,b$)===1?b_:b$)),b8.length);};d.splitByChar=function(b8,b9){return t.SplitChars(b9,[b8],0);};d.splitInTwoO=function(b8,b9){var b_;b_=b9.indexOf(b8);return b_===-1?null:{$:1,$0:[c["String.Left"](b9,b_),b9.substring(b_+b8.length)]};};d.delimitedO=function(b8,b9,b_){var b$,ca,cb,cc,cd;b$=d.splitInTwoO(b8,b_);return b$==null?null:(ca=b$.$0,(cb=ca[0],(cc=d.splitInTwoO(b9,ca[1]),cc==null?null:{$:1,$0:(cd=cc.$0,[cb,cd[0],cd[1]])})));};d.contains=function(b8,b9){return b9.indexOf(b8)!=-1;};d.trim=function(b8){return t.Trim(b8);};d.left=function(b8,b9){return c["String.Left"](b9,b8);};d.right=function(b8,b9){return c["String.Right"](b9,b8);};d.append=function(b8,b9){return b8+b9;};d.skipFirstLine=function(b8){var b9;b9=b8.indexOf("\n");return b9<0?"":r.string(b8,{$:1,$0:b9+1},null);};d.unindent=function(b8){var b9,b_,b$,ca;b9=t.SplitChars(b8,["\n"],0);b_=(b$=s.tryFindIndex(function(cb){return" "!==cb;},(ca=s.tryFind(function(cb){return t.Trim(cb)!=="";},b9),ca==null?"":ca.$0)),b$==null?0:b$.$0);return s.filter(function(cb){return!t.StartsWith(cb,"# 1 ");},s.map(function(cb){return cb.length<=b_?"":cb.substring(b_);},b9));};d.indent=function(b8,b9){var b_,b$;b_=t.SplitChars(b9,["\n"],0);return s.map((b$=t.replicate(b8," "),function(ca){return b$+ca;}),b_);};d.unindentStr=function(){u.$cctor();return u.unindentStr;};d.indentStr=function(b8){function b9(b$){return d.indent(b8,b$);}function b_(b$){return t.concat("\n",b$);}return function(b$){return b_(b9(b$));};};d.skipLastLine=function(){u.$cctor();return u.skipLastLine;};d.StartsWith=function(b8,b9){return t.StartsWith(b9,b8)?{$:1,$0:r.string(b9,{$:1,$0:b8.length},null)}:null;};d.EndsWith=function(b8,b9){return t.EndsWith(b9,b8)?{$:1,$0:r.string(b9,{$:1,$0:0},{$:1,$0:b9.length-b8.length-1})}:null;};d.WhiteSpace=function(b8){function b9(b_){return!b_;}return s.exists(function(b_){return b9(v.IsWhiteSpace(b_));},b8)?null:{$:1,$0:null};};d.thousands=function(b8){var b9,b_,b$,ca;b9=(b_=b8<0?-b8:b8,a.String(b_));b$=b9.length%3;ca=b$===0?3:b$;return b8<0?"-"+t.concat(",",F.ofSeq(s.delay(function(){return s.append([r.string(b9,{$:1,$0:0},{$:1,$0:ca-1})],s.delay(function(){return s.map(function(cb){return r.string(b9,{$:1,$0:cb*3+ca},{$:1,$0:cb*3+ca+2});},o.range(0,((b9.length-ca)/3>>0)-1));}));}))):t.concat(",",F.ofSeq(s.delay(function(){return s.append([r.string(b9,{$:1,$0:0},{$:1,$0:ca-1})],s.delay(function(){return s.map(function(cb){return r.string(b9,{$:1,$0:cb*3+ca},{$:1,$0:cb*3+ca+2});},o.range(0,((b9.length-ca)/3>>0)-1));}));})));};e.tryParseWith=function(b8){function b9(b_,b$){return b_?{$:1,$0:b$}:null;}return function(b_){return b9.apply(null,b8(b_));};};e.parseDateO2=function(){u.$cctor();return u.parseDateO2;};e.parseDateO=function(){u.$cctor();return u.parseDateO;};e.parseIntO=function(){u.$cctor();return u.parseIntO;};e.parseInt64O=function(){u.$cctor();return u.parseInt64O;};e.parseSingleO=function(){u.$cctor();return u.parseSingleO;};e.parseDoubleO=function(){u.$cctor();return u.parseDoubleO;};e.parseGuidO=function(){u.$cctor();return u.parseGuidO;};e.Date=function(){u.$cctor();return u["|Date|_|"];};e.Int=function(){u.$cctor();return u["|Int|_|"];};e.Int64=function(){u.$cctor();return u["|Int64|_|"];};e.Single=function(){u.$cctor();return u["|Single|_|"];};e.Double=function(){u.$cctor();return u["|Double|_|"];};e.Guid=function(){u.$cctor();return u["|Guid|_|"];};f.mainMessage=function(){u.$cctor();return u.mainMessage;};f.detailsV=function(){u.$cctor();return u.detailsV;};f.fsErrsV=function(){u.$cctor();return u.fsErrsV;};f.wsErrsV=function(){u.$cctor();return u.wsErrsV;};f.wsWrnsV=function(){u.$cctor();return u.wsWrnsV;};f.codeV=function(){u.$cctor();return u.codeV;};f.optsV=function(){u.$cctor();return u.optsV;};f.appendMsg=function(b8){var b9;b2.log(b8);b9=f.detailsV().Get();f.detailsV().Set(b9+(b9===""?"":"\n")+b8);};f.parseAndCheckProject=function(b8,b9,b_){var b$;b$=null;return _1.Delay(function(){return _1.Bind((new L.New()).Async("WsTranslator:FsRoot.WsTranslator.parseAndCheckProjectRpc:-1474163089",[b8,b9,b_]),function(ca){var cb;f.fsErrsV().Set(q.ofSeq(ca[0]));cb=(function(cc){return function(cd){return cc("("+p.prettyPrint(cd[0])+", "+p.printArray(p.prettyPrint,cd[1])+")");};}(a.id))([ca[2],ca[1]]);f.detailsV().Set(cb);return _1.Zero();});});};f.translateToJs=function(b8,b9,b_){var b$;b$=null;return _1.Delay(function(){return _1.Bind((new L.New()).Async("WsTranslator:FsRoot.WsTranslator.translateFsToJsRpc:957452724",[b8,b9,b_]),function(ca){var cb;cb=ca[1];f.fsErrsV().Set(ca[0]);return cb==null?(f.detailsV().Set(""),f.wsErrsV().Set([]),f.wsWrnsV().Set([]),_1.Zero()):(f.detailsV().Set(cb.$0[0]),f.wsErrsV().Set(q.ofSeq(cb.$0[1])),f.wsWrnsV().Set(q.ofSeq(cb.$0[2])),_1.Zero());});});};f.callWasmA=function(b8,b9){var b_;_1.Start((b_=null,_1.Delay(function(){return _1.Bind(_1.Sleep(50),function(){return _1.Bind(_1.AwaitTask1(l.loadWasm().f()),function(){return _1.Bind(b8(b9),function(){return _1.Return(null);});});});})),null);};f.getParms=function(){return["WasmTest",t.SplitChars("fsc.exe\n"+f.optsV().Get(),["\n"],0),f.codeV().Get()];};f.mainDoc=function(){function b8(b_,b$){return _2.Element("li",[],[_2.TextNode((function(ca){return function(cb){return ca("("+N.p(cb[0])+", "+N.p$1(cb[1])+")");};}(a.id))([b_,b$]))]);}function b9(b_,b$){return _2.Element("li",[],[_2.TextNode((function(ca){return function(cb){return ca("("+N.p(cb[0])+", "+N.p$2(cb[1])+")");};}(a.id))([b_,b$]))]);}return _2.Element("div",[],[_2.Element("h1",[],[_2.TextNode("HELLO WASM!")]),_2.Element("h2",[],[_2.TextView(f.mainMessage().get_View())]),_2.Element("div",[],[_2.InputArea([],f.codeV()),_2.InputArea([],f.optsV())]),_2.Element("span",[],[_2.Button("Check",[],function(){f.callWasmA(function(b_){return f.parseAndCheckProject(b_[0],b_[1],b_[2]);},f.getParms());}),_2.Button("Translate",[],function(){f.detailsV().Set("");f.appendMsg("Initiating translation:");f.callWasmA(function(b_){return f.translateToJs(b_[0],b_[1],b_[2]);},f.getParms());}),_2.Button("Dir",[],function(){f.callWasmA(function(b_){return(new L.New()).Async("WsTranslator:FsRoot.WsTranslator.dir:-1181784350",[b_]);},"/");}),_2.Button("Clean",[],function(){f.detailsV().Set("");})]),_2.Element("ol",[],[_2.Convert(function(b_){return _2.Element("li",[],[_2.TextNode((function(b$){return function(ca){return b$(p.prettyPrint(ca));};}(a.id))(b_))]);},f.fsErrsV().get_View())]),_2.Element("ol",[],[_2.Convert(function(b_){return b8(b_[0],b_[1]);},f.wsErrsV().get_View())]),_2.Element("ol",[],[_2.Convert(function(b_){return b9(b_[0],b_[1]);},f.wsWrnsV().get_View())]),_2.Element("div",[_3.Create("style","font-family: monospace; white-space:pre")],[_2.TextView(f.detailsV().get_View())])]);};f.main=function(){var b8,b9;b8=f.mainDoc();b9=self.document.body;_5.LoadLocalTemplates("");_2.Run(b9,b8);};g.getHeaderRpc=function(b8){return b8["x-websharper-rpc"];};g.originalProvider=function(){u.$cctor();return u.originalProvider;};g.returnValue=function(b8,b9){var b_,b$,ca;b_=h.tryGet(b8);b_==null?void 0:(b$=b_.$0,ca=b$[0],b$[1],ca(b9));};g.returnExnExn=function(b8,b9){var b_,b$;b_=h.tryGet(b8);b_==null?void 0:(b$=b_.$0,b$[0],b$[1](b9));};g.returnExn=function(b8,b9){g.returnExnExn(b8,new bg(b9));};g.installBearer=function(){D.set_AjaxProvider(new k.New());};h.queues=function(){u.$cctor();return u.queues;};h.tryGetS=function(b8){return(e.tryParseWith(function(b9){var b_;b_=null;return[h.queues().TryGetValue(b9,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_];}))(b8);};h.add=function(b8,b9){var b_,b$;b_=(b$=h.tryGetS(b8),b$==null?[b9]:(h.queues().Remove(b8),b$.$0.concat([b9])));h.queues().Add(b8,b_);};h.tryGet=function(b8){var b9,b_,b$,ca;b9=h.tryGetS(b8);return b9==null?null:(b_=b9.$0,(b$=s.tryHead(b_),b$!=null&&b$.$==1?(ca=r.array(b_,{$:1,$0:1},null),(h.queues().Remove(b8),h.queues().Add(b8,ca),{$:1,$0:b$.$0})):null));};j=i.Obj=b4.Class({Equals:function(b8){return this===b8;},GetHashCode:function(){return -1;}},null,j);j.New=b4.Ctor(function(){},j);k=g.CustomXhrProvider=b4.Class({Async:function(b8,b9,b_,b$,ca){var cb;_1.Start((cb=null,_1.Delay(function(){var cc;cc=g.getHeaderRpc(b9);h.add(cc,[b$,ca]);return _1.TryWith(_1.Delay(function(){self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(cc,b_);return _1.Zero();}),function(cd){g.returnExnExn(cc,cd);return _1.Zero();});})),null);}},j,k);k.New=b4.Ctor(function(){j.New.call(this);},k);l.rootPath=function(){u.$cctor();return u.rootPath;};l.requireJsA=function(b8){return _1.FromContinuations(function(b9){return a.requirejs(q.ofSeq(b8),b9);});};l.bindStaticMethod=function(b8,b9,b_){var b$;self[((((b4.Curried(function(ca,cb,cc,cd){return ca("WASM_"+p.toSafe(cb)+"_"+p.toSafe(cc)+"_"+p.toSafe(cd));},4))(a.id))(b8))(t.Replace(b9,".","_")))(b_)]=(b$=((((b4.Curried(function(ca,cb,cc,cd){return ca("["+p.toSafe(cb)+"]"+p.toSafe(cc)+":"+p.toSafe(cd));},4))(a.id))(b8))(b9))(b_),self.Module.mono_bind_static_method(b$));};l.bindWasm=function(){s.iter(function(b8){l.bindStaticMethod(b8[0],b8[1],b8[2]);},F.ofArray([["WsTranslator","FsRoot.WsTranslator","runRpc"]]));};l.filesToPreload=function(){u.$cctor();return u.filesToPreload;};l.preloadFiles=function(){var b8,b9,b_,b$,ca;self.Browser=H.newPojo([["init",a.ignore],["asyncLoad",function(cb,cc,cd){var ce;ce=new self.XMLHttpRequest();ce.open("GET",cb,true);ce.responseType="arraybuffer";ce.onload=function(){return ce.status===200||ce.status===0&&!A.Equals(ce.response,null)?cc(new a.Uint8Array(ce.response)):cd();};ce.onerror=function(){return cd();};return ce.send(null);}]]);self.Module.preloadPlugins=[];b8=S.Get(l.filesToPreload());try{while(b8.MoveNext()){b9=b8.Current();b_=b9[1];try{self.FS.mkdir(b_);}catch(cb){null;}b$=S.Get(b9[2]);try{while(b$.MoveNext()){ca=b$.Current();self.FS.createPreloadedFile(b_,ca,b9[0]+"/"+ca,1,a.$op21);}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}}finally{if(typeof b8=="object"&&"Dispose"in b8)b8.Dispose();}};l.loadWasm=function(){u.$cctor();return u.loadWasm;};m=l.Require=b4.Class({},j,m);m.New=b4.Ctor(function(){j.New.call(this);},m);n=l.Global=b4.Class({},j,n);n.New=b4.Ctor(function(){j.New.call(this);},n);o.range=function(b8,b9){var b_;b_=1+b9-b8;return b_<=0?[]:s.init(b_,function(b$){return b$+b8;});};o.KeyValue=function(b8){return[b8.K,b8.V];};o.FailWith=function(b8){throw new bg(b8);};o.InvalidOp=function(b8){throw new bC.New(b8);};p.toSafe=function(b8){return b8==null?"":b8;};p.prettyPrint=function(b8){var b9,b_;function b$(ca,cb){return ca+" = "+p.prettyPrint(cb);}return b8===null?"null":(b9=typeof b8,b9=="string"?"\""+b8+"\"":b9=="object"?b8 instanceof a.Array?"[|"+t.concat("; ",q.map(p.prettyPrint,b8))+"|]":(b_=a.String(b8),b_==="[object Object]"?"{"+t.concat("; ",q.map(function(ca){return b$(ca[0],ca[1]);},E.GetFields(b8)))+"}":b_):a.String(b8));};p.printArray=function(b8,b9){return b9===null?"null":"[|"+t.concat("; ",q.map(b8,b9))+"|]";};p.printList=function(b8,b9){return"["+t.concat("; ",s.map(b8,b9))+"]";};q.get=function(b8,b9){q.checkBounds(b8,b9);return b8[b9];};q.length=function(b8){return b8.dims===2?b8.length*b8.length:b8.length;};q.checkBounds=function(b8,b9){if(b9<0||b9>=b8.length)o.FailWith("Index was outside the bounds of the array.");};q.set=function(b8,b9,b_){q.checkBounds(b8,b9);b8[b9]=b_;};r.string=function(b8,b9,b_){return b9==null?b_!=null&&b_.$==1?b8.slice(0,b_.$0+1):"":b_==null?b8.slice(b9.$0):b8.slice(b9.$0,b_.$0+1);};r.array=function(b8,b9,b_){return b9==null?b_!=null&&b_.$==1?b8.slice(0,b_.$0+1):[]:b_==null?b8.slice(b9.$0):b8.slice(b9.$0,b_.$0+1);};s.tryFind=function(b8,b9){var b_,b$,ca;b_=S.Get(b9);try{b$=null;while(b$==null&&b_.MoveNext()){ca=b_.Current();b8(ca)?b$={$:1,$0:ca}:void 0;}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};s.tryFindIndex=function(b8,b9){var b_,b$,ca;b_=S.Get(b9);try{b$=true;ca=0;while(b$&&b_.MoveNext())if(b8(b_.Current()))b$=false;else ca=ca+1;return b$?null:{$:1,$0:ca};}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};s.map=function(b8,b9){return{GetEnumerator:function(){var b_;b_=S.Get(b9);return new T.New(null,null,function(b$){return b_.MoveNext()&&(b$.c=b8(b_.Current()),true);},function(){b_.Dispose();});}};};s.filter=function(b8,b9){return{GetEnumerator:function(){var b_;b_=S.Get(b9);return new T.New(null,null,function(b$){var ca,cb,cc;ca=b_.MoveNext();cb=b_.Current();cc=false;while(ca)if(b8(cb)){b$.c=cb;cc=true;ca=false;}else if(b_.MoveNext())cb=b_.Current();else ca=false;return cc;},function(){b_.Dispose();});}};};s.exists=function(b8,b9){var b_,b$;b_=S.Get(b9);try{b$=false;while(!b$&&b_.MoveNext())b$=b8(b_.Current());return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};s.delay=function(b8){return{GetEnumerator:function(){return S.Get(b8());}};};s.append=function(b8,b9){return{GetEnumerator:function(){var b_,b$;b_=S.Get(b8);b$=[true];return new T.New(b_,null,function(ca){var cb;return ca.s.MoveNext()?(ca.c=ca.s.Current(),true):(cb=ca.s,!A.Equals(cb,null)?cb.Dispose():void 0,ca.s=null,b$[0]&&(b$[0]=false,ca.s=S.Get(b9),ca.s.MoveNext()?(ca.c=ca.s.Current(),true):(ca.s.Dispose(),ca.s=null,false)));},function(ca){var cb;cb=ca.s;!A.Equals(cb,null)?cb.Dispose():void 0;});}};};s.iter=function(b8,b9){var b_;b_=S.Get(b9);try{while(b_.MoveNext())b8(b_.Current());}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};s.init=function(b8,b9){return s.take(b8,s.initInfinite(b9));};s.take=function(b8,b9){b8<0?s.nonNegative():void 0;return{GetEnumerator:function(){var b_;b_=[S.Get(b9)];return new T.New(0,null,function(b$){var ca;b$.s=b$.s+1;return b$.s>b8?false:(ca=b_[0],A.Equals(ca,null)?s.insufficient():ca.MoveNext()?(b$.c=ca.Current(),b$.s===b8?(ca.Dispose(),b_[0]=null):void 0,true):(ca.Dispose(),b_[0]=null,s.insufficient()));},function(){var b$;b$=b_[0];!A.Equals(b$,null)?b$.Dispose():void 0;});}};};s.initInfinite=function(b8){return{GetEnumerator:function(){return new T.New(0,null,function(b9){b9.c=b8(b9.s);b9.s=b9.s+1;return true;},void 0);}};};s.head=function(b8){var b9;b9=S.Get(b8);try{return b9.MoveNext()?b9.Current():s.insufficient();}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}};s.fold=function(b8,b9,b_){var b$,ca;b$=b9;ca=S.Get(b_);try{while(ca.MoveNext())b$=b8(b$,ca.Current());return b$;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}};s.max=function(b8){var b9,b_,b$;b9=S.Get(b8);try{if(!b9.MoveNext())s.seqEmpty();b_=b9.Current();while(b9.MoveNext()){b$=b9.Current();A.Compare(b$,b_)===1?b_=b$:void 0;}return b_;}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}};s.seqEmpty=function(){return o.FailWith("The input sequence was empty.");};t.replicate=function(b8,b9){return q.create(b8,b9).join("");};t.concat=function(b8,b9){return q.ofSeq(b9).join(b8);};t.Substring=function(b8,b9,b_){return b8.substr(b9,b_);};t.SplitChars=function(b8,b9,b_){return t.Split(b8,new a.RegExp("["+t.RegexEscape(b9.join(""))+"]"),b_);};t.Trim=function(b8){return b8.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};t.StartsWith=function(b8,b9){return b8.substring(0,b9.length)==b9;};t.EndsWith=function(b8,b9){return b8.substring(b8.length-b9.length)==b9;};t.Replace=function(b8,b9,b_){function b$(ca){var cb,cc,cd;cb=ca.indexOf(b9);return cb!==-1?(cc=t.ReplaceOnce(ca,b9,b_),(cd=cb+b_.length,t.Substring(cc,0,cb+b_.length)+b$(cc.substring(cd)))):ca;}return b$(b8);};t.Split=function(b8,b9,b_){return b_===1?q.filter(function(b$){return b$!=="";},t.SplitWith(b8,b9)):t.SplitWith(b8,b9);};t.RegexEscape=function(b8){return b8.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};t.ReplaceOnce=function(b8,b9,b_){return b8.replace(b9,b_);};t.SplitWith=function(b8,b9){return b8.split(b9);};u.$cctor=function(){var b8,b9;u.$cctor=a.ignore;function b_(cd){return t.concat("\n",cd);}function b$(cd){return d.splitByChar("\n",cd);}function ca(cd){var ce,cf;return r.array(cd,{$:1,$0:0},{$:1,$0:(ce=0,(cf=q.length(cd)-2,A.Compare(ce,cf)===1?ce:cf))});}function cb(cd){return t.concat("\n",cd);}function cc(cd){return cd+"T00:00:00";}u.unindentStr=function(cd){return b_(d.unindent(cd));};u.skipLastLine=(b8=function(cd){return ca(b$(cd));},function(cd){return cb(b8(cd));});u.parseDateO2=(b9=e.tryParseWith(function(cd){var ce,cf;ce=0;return[(cf=_7.TryParse(cd),cf!=null&&cf.$==1&&(ce=cf.$0,true)),ce];}),function(cd){return b9(cc(cd));});u.parseDateO=e.tryParseWith(function(cd){var ce,cf;ce=0;return[(cf=_7.TryParse(cd),cf!=null&&cf.$==1&&(ce=cf.$0,true)),ce];});u.parseIntO=e.tryParseWith(function(cd){var ce;ce=0;return[U.TryParseInt32(cd,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce];});u.parseInt64O=e.tryParseWith(function(cd){var ce;ce=0;return[U.TryParseInt64(cd,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce];});u.parseSingleO=e.tryParseWith(function(cd){var ce,cf;ce=0;return[(cf=a.Number(cd),a.isNaN(cf)?false:(ce=cf,true)),ce];});u.parseDoubleO=e.tryParseWith(function(cd){var ce,cf;ce=0;return[(cf=a.Number(cd),a.isNaN(cf)?false:(ce=cf,true)),ce];});u.parseGuidO=e.tryParseWith(function(cd){var ce;ce=null;return[W.TryParse(cd,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce];});u["|Date|_|"]=e.parseDateO();u["|Int|_|"]=e.parseIntO();u["|Int64|_|"]=e.parseInt64O();u["|Single|_|"]=e.parseSingleO();u["|Double|_|"]=e.parseDoubleO();u["|Guid|_|"]=e.parseGuidO();u.mainMessage=X.Create$1("Wasm not loaded yet.");u.detailsV=X.Create$1("");u.fsErrsV=X.Create$1([]);u.wsErrsV=X.Create$1([]);u.wsWrnsV=X.Create$1([]);u.codeV=X.Create$1("printfn \"Hello\"");u.optsV=X.Create$1("/tmp/source.fsx\n-o:source.exe\n--simpleresolution\n--nowarn:3186\n--optimize-\n--noframework\n--fullpaths\n--warn:3\n--target:exe\n-r:/tmp/FSharp.Core.dll\n-r:/tmp/mscorlib.dll\n-r:/tmp/netstandard.dll\n-r:/tmp/System.dll\n-r:/tmp/System.Core.dll\n-r:/tmp/System.IO.dll\n-r:/tmp/System.Runtime.dll\n-r:/tmp/System.Net.Http.dll\n-r:/tmp/System.Threading.dll\n-r:/tmp/WebAssembly.Bindings.dll\n-r:/tmp/WebAssembly.Net.WebSockets.dll\n-r:/tmp/System.Numerics.dll");u.originalProvider=D.AjaxProvider();u.queues=new C.New$5();u.rootPath="/WASM/publish/";u.filesToPreload=F.ofArray([[l.rootPath()+"dlls","/tmp",["WebSharper.Main.dll","WebSharper.Collections.dll","WebSharper.Control.dll","WebSharper.Web.dll","WebSharper.Sitelets.dll","WebSharper.UI.dll","WebSharper.UI.Templating.Runtime.dll","WebSharper.Data.dll"]],[l.rootPath()+"managed","/tmp",q.choose(function(cd){var ce;ce=d.StartsWith("-r:/tmp/",cd);return ce!=null&&ce.$==1?{$:1,$0:ce.$0}:null;},t.SplitChars(f.optsV().Get(),["\n"],0))]]);u.loadWasm=Y.Create(function(){(function(cd){return cd("Loading Dlls metadata. Hold on this will take a while...");}(function(cd){b2.log(cd);}));return _1.StartAsTask(_1.FromContinuations(function(cd){var ce;function cf(){l.bindWasm();(function(cg){return cg("WASM Initialized!");}(function(cg){b2.log(cg);}));f.mainMessage().Set("WASM Initialized!");cd();}return _1.Start((ce=null,_1.Delay(function(){f.mainMessage().Set("WASM Loading...");return _1.Bind(_1.Sleep(50),function(){g.installBearer();self.App=H.newPojo([["init",cf]]);return _1.Bind(l.requireJsA([l.rootPath()+"mono-config.js"]),function(){return _1.Bind(l.requireJsA([l.rootPath()+"runtime.js"]),function(){self.Module.print=function(cg){f.appendMsg(cg);};self.Module.printErr=function(cg){f.appendMsg(cg);};self.Module.preRun=[function(){l.preloadFiles();}];return _1.Bind(l.requireJsA([l.rootPath()+"dotnet.js"]),function(){return _1.Zero();});});});});})),null);}),null);});};v.IsWhiteSpace=function(b8){return b8.match(new a.RegExp("\\s"))!==null;};x=w.Var=b4.Class({},j,x);x.New=b4.Ctor(function(){j.New.call(this);},x);z.NewFromSeq=function(b8){var b9,b_,b$;b9={};b_=S.Get(b8);try{while(b_.MoveNext()){b$=b_.Current();b9[b$[0]]=b$[1];}}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}return b9;};A.Equals=function(b8,b9){var b_,b$,ca,cb;if(b8===b9)return true;else{b_=typeof b8;if(b_=="object"){if(b8===null||b8===void 0||b9===null||b9===void 0)return false;else if("Equals"in b8)return b8.Equals(b9);else if(b8 instanceof a.Array&&b9 instanceof a.Array)return A.arrayEquals(b8,b9);else if(b8 instanceof a.Date&&b9 instanceof a.Date)return A.dateEquals(b8,b9);else{b$=[true];for(var cc in b8)if(function(cd){b$[0]=!b8.hasOwnProperty(cd)||b9.hasOwnProperty(cd)&&A.Equals(b8[cd],b9[cd]);return!b$[0];}(cc))break;if(b$[0]){for(var cd in b9)if(function(ce){b$[0]=!b9.hasOwnProperty(ce)||b8.hasOwnProperty(ce);return!b$[0];}(cd))break;}return b$[0];}}else return b_=="function"&&("$Func"in b8?b8.$Func===b9.$Func&&b8.$Target===b9.$Target:"$Invokes"in b8&&"$Invokes"in b9&&A.arrayEquals(b8.$Invokes,b9.$Invokes));}};A.Compare=function(b8,b9){var b_,b$,ca,cb,cc,cd;if(b8===b9)return 0;else{b$=typeof b8;switch(b$=="function"?1:b$=="boolean"?2:b$=="number"?2:b$=="string"?2:b$=="object"?3:0){case 0:return typeof b9=="undefined"?0:-1;case 1:return o.FailWith("Cannot compare function values.");case 2:return b8<b9?-1:1;case 3:if(b8===null)ca=-1;else if(b9===null)ca=1;else if("CompareTo"in b8)ca=b8.CompareTo(b9);else if("CompareTo0"in b8)ca=b8.CompareTo0(b9);else if(b8 instanceof a.Array&&b9 instanceof a.Array)ca=A.compareArrays(b8,b9);else if(b8 instanceof a.Date&&b9 instanceof a.Date)ca=A.compareDates(b8,b9);else{cb=[0];for(var ce in b8)if(function(cf){return!b8.hasOwnProperty(cf)?false:!b9.hasOwnProperty(cf)?(cb[0]=1,true):(cb[0]=A.Compare(b8[cf],b9[cf]),cb[0]!==0);}(ce))break;if(cb[0]===0){for(var cf in b9)if(function(cg){return!b9.hasOwnProperty(cg)?false:!b8.hasOwnProperty(cg)&&(cb[0]=-1,true);}(cf))break;}ca=cb[0];}return ca;}}};A.arrayEquals=function(b8,b9){var b_,b$;if(q.length(b8)===q.length(b9)){b_=true;b$=0;while(b_&&b$<q.length(b8)){!A.Equals(q.get(b8,b$),q.get(b9,b$))?b_=false:void 0;b$=b$+1;}return b_;}else return false;};A.dateEquals=function(b8,b9){return b8.getTime()===b9.getTime();};A.compareArrays=function(b8,b9){var b_,b$;if(q.length(b8)<q.length(b9))return -1;else if(q.length(b8)>q.length(b9))return 1;else{b_=0;b$=0;while(b_===0&&b$<q.length(b8)){b_=A.Compare(q.get(b8,b$),q.get(b9,b$));b$=b$+1;}return b_;}};A.compareDates=function(b8,b9){return A.Compare(b8.getTime(),b9.getTime());};A.Hash=function(b8){var b9;b9=typeof b8;return b9=="function"?0:b9=="boolean"?b8?1:0:b9=="number"?b8:b9=="string"?A.hashString(b8):b9=="object"?b8==null?0:b8 instanceof a.Array?A.hashArray(b8):A.hashObject(b8):0;};A.hashString=function(b8){var b9,b_,b$;if(b8===null)return 0;else{b9=5381;for(b_=0,b$=b8.length-1;b_<=b$;b_++)b9=A.hashMix(b9,b8[b_].charCodeAt());return b9;}};A.hashArray=function(b8){var b9,b_,b$;b9=-34948909;for(b_=0,b$=q.length(b8)-1;b_<=b$;b_++)b9=A.hashMix(b9,A.Hash(q.get(b8,b_)));return b9;};A.hashObject=function(b8){var b9,b_;if("GetHashCode"in b8)return b8.GetHashCode();else{b9=[0];for(var b$ in b8)if(function(ca){b9[0]=A.hashMix(A.hashMix(b9[0],A.hashString(ca)),A.Hash(b8[ca]));return false;}(b$))break;return b9[0];}};A.hashMix=function(b8,b9){return(b8<<5)+b8+b9;};C=B.Dictionary=b4.Class({TryGetValue:function(b8,b9){var b_,b$,ca;b_=this;b$=this.data[this.hash(b8)];return b$==null?false:(ca=q.tryPick(function(cb){var cc;cc=o.KeyValue(cb);return b_.equals.apply(null,[cc[0],b8])?{$:1,$0:cc[1]}:null;},b$),ca!=null&&ca.$==1&&(b9.set(ca.$0),true));},Add:function(b8,b9){this.add(b8,b9);},Remove:function(b8){return this.remove(b8);},add:function(b8,b9){var b_,b$,ca;b_=this;b$=this.hash(b8);ca=this.data[b$];ca==null?(this.count=this.count+1,this.data[b$]=new a.Array({K:b8,V:b9})):(q.exists(function(cb){return b_.equals.apply(null,[(o.KeyValue(cb))[0],b8]);},ca)?_.alreadyAdded():void 0,this.count=this.count+1,ca.push({K:b8,V:b9}));},remove:function(b8){var b9,b_,b$,ca;b9=this;b_=this.hash(b8);b$=this.data[b_];return b$==null?false:(ca=q.filter(function(cb){return!b9.equals.apply(null,[(o.KeyValue(cb))[0],b8]);},b$),q.length(ca)<b$.length&&(this.count=this.count-1,this.data[b_]=ca,true));},set_Item:function(b8,b9){this.set(b8,b9);},set:function(b8,b9){var b_,b$,ca,cb;b_=this;b$=this.hash(b8);ca=this.data[b$];ca==null?(this.count=this.count+1,this.data[b$]=new a.Array({K:b8,V:b9})):(cb=q.tryFindIndex(function(cc){return b_.equals.apply(null,[(o.KeyValue(cc))[0],b8]);},ca),cb==null?(this.count=this.count+1,ca.push({K:b8,V:b9})):ca[cb.$0]={K:b8,V:b9});},ContainsKey:function(b8){var b9,b_;b9=this;b_=this.data[this.hash(b8)];return b_==null?false:q.exists(function(b$){return b9.equals.apply(null,[(o.KeyValue(b$))[0],b8]);},b_);},get_Keys:function(){return new bI.New(this);},get_Item:function(b8){return this.get(b8);},get:function(b8){var b9,b_;b9=this;b_=this.data[this.hash(b8)];return b_==null?_.notPresent():q.pick(function(b$){var ca;ca=o.KeyValue(b$);return b9.equals.apply(null,[ca[0],b8])?{$:1,$0:ca[1]}:null;},b_);},GetEnumerator:function(){return S.Get0(this);},GetEnumerator0:function(){return S.Get0(q.concat(E.GetFieldValues(this.data)));}},j,C);C.New$5=b4.Ctor(function(){C.New$6.call(this,[],A.Equals,A.Hash);},C);C.New$6=b4.Ctor(function(b8,b9,b_){var b$,ca;j.New.call(this);this.equals=b9;this.hash=b_;this.count=0;this.data=[];b$=S.Get(b8);try{while(b$.MoveNext()){ca=b$.Current();this.set(ca.K,ca.V);}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}},C);q.map=function(b8,b9){var b_,b$,ca;b_=new a.Array(b9.length);for(b$=0,ca=b9.length-1;b$<=ca;b$++)b_[b$]=b8(b9[b$]);return b_;};q.create=function(b8,b9){var b_,b$,ca;b_=new a.Array(b8);for(b$=0,ca=b8-1;b$<=ca;b$++)b_[b$]=b9;return b_;};q.choose=function(b8,b9){var b_,b$,ca,cb;b_=[];for(b$=0,ca=b9.length-1;b$<=ca;b$++){cb=b8(b9[b$]);cb==null?void 0:b_.push(cb.$0);}return b_;};q.tryPick=function(b8,b9){var b_,b$,ca;b_=null;b$=0;while(b$<b9.length&&b_==null){ca=b8(b9[b$]);ca!=null&&ca.$==1?b_=ca:void 0;b$=b$+1;}return b_;};q.ofSeq=function(b8){var b9,b_;if(b8 instanceof a.Array)return b8.slice();else if(b8 instanceof M)return q.ofList(b8);else{b9=[];b_=S.Get(b8);try{while(b_.MoveNext())b9.push(b_.Current());return b9;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}}};q.exists=function(b8,b9){var b_,b$,ca,cb;b_=false;b$=0;cb=q.length(b9);while(!b_&&b$<cb)if(b8(b9[b$]))b_=true;else b$=b$+1;return b_;};q.filter=function(b8,b9){var b_,b$,ca;b_=[];for(b$=0,ca=b9.length-1;b$<=ca;b$++)if(b8(b9[b$]))b_.push(b9[b$]);return b_;};q.ofList=function(b8){var b9,b_;b_=[];b9=b8;while(!(b9.$==0)){b_.push(F.head(b9));b9=F.tail(b9);}return b_;};q.concat=function(b8){return a.Array.prototype.concat.apply([],q.ofSeq(b8));};q.tryFindIndex=function(b8,b9){var b_,b$;b_=null;b$=0;while(b$<b9.length&&b_==null){b8(b9[b$])?b_={$:1,$0:b$}:void 0;b$=b$+1;}return b_;};q.foldBack=function(b8,b9,b_){var b$,ca,cb,cc,cd;b$=b_;cb=b9.length;for(cc=1,cd=cb;cc<=cd;cc++)b$=b8(b9[cb-cc],b$);return b$;};q.iter=function(b8,b9){var b_,b$;for(b_=0,b$=b9.length-1;b_<=b$;b_++)b8(b9[b_]);};q.pick=function(b8,b9){var b_;b_=q.tryPick(b8,b9);return b_==null?o.FailWith("KeyNotFoundException"):b_.$0;};q.init=function(b8,b9){var b_,b$,ca;b8<0?o.FailWith("Negative size given."):null;b_=new a.Array(b8);for(b$=0,ca=b8-1;b$<=ca;b$++)b_[b$]=b9(b$);return b_;};q.forall=function(b8,b9){var b_,b$,ca,cb;b_=true;b$=0;cb=q.length(b9);while(b_&&b$<cb)if(b8(b9[b$]))b$=b$+1;else b_=false;return b_;};D.set_AjaxProvider=function(b8){_0.$cctor();_0.AjaxProvider=b8;};D.AjaxProvider=function(){_0.$cctor();return _0.AjaxProvider;};D.makePayload=function(b8){return b5.stringify(b8);};D.makeHeaders=function(b8){return{"content-type":"application/json","x-websharper-rpc":b8};};D.EndPoint=function(){_0.$cctor();return _0.EndPoint;};D.ajax=function(b8,b9,b_,b$,ca,cb,cc){var cd,ce,cf;cd=new a.XMLHttpRequest();ce=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");cd.open("POST",b9,b8);if(b8==true)cd.withCredentials=true;for(var ch in b_)cd.setRequestHeader(ch,b_[ch]);if(ce)cd.setRequestHeader("x-csrftoken",ce);function cg(){var ci;if(cd.status==200)ca(cd.responseText);else if(cc&&cd.status==403&&cd.responseText=="CSRF")cc();else{ci="Response status is not 200: ";cb(new bg(ci+cd.status));}}if("onload"in cd)cd.onload=cd.onerror=cd.onabort=cg;else cd.onreadystatechange=function(){if(cd.readyState==4)cg();};cd.send(b$);};E.GetFields=function(b8){var b9,b_;b9=[];for(var b$ in b8)b9.push([b$,b8[b$]]);return b9;};E.GetFieldValues=function(b8){var b9,b_;b9=[];for(var b$ in b8)b9.push(b8[b$]);return b9;};F.ofArray=function(b8){var b9,b_,b$;b9=M.Empty;for(b_=q.length(b8)-1,b$=0;b_>=b$;b_--)b9=new M({$:1,$0:q.get(b8,b_),$1:b9});return b9;};F.ofSeq=function(b8){var b9,b_,b$,ca,cb,cc;if(b8 instanceof M)return b8;else if(b8 instanceof a.Array)return F.ofArray(b8);else{b9=S.Get(b8);try{b$=b9.MoveNext();if(!b$)b_=M.Empty;else{cb=new M({$:1});ca=cb;while(b$){ca.$0=b9.Current();b9.MoveNext()?ca=(cc=new M({$:1}),ca.$1=cc,cc):b$=false;}ca.$1=M.Empty;b_=cb;}return b_;}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}}};F.head=function(b8){return b8.$==1?b8.$0:F.listEmpty();};F.tail=function(b8){return b8.$==1?b8.$1:F.listEmpty();};F.listEmpty=function(){return o.FailWith("The input list was empty.");};H.newPojo=function(b8){var b9,b_;function b$(cb,cc){return function(cd){return H.addProp(cb,cc,cd);};}function ca(cb){}b9={};s.iter((b_=function(cb){return(function(cc){return b$(cc[0],cc[1]);}(cb))(b9);},function(cb){return ca(b_(cb));}),b8);return b9;};H.addProp=function(b8,b9,b_){b_[b8]=b9;return b_;};L=D.AjaxRemotingProvider=b4.Class({AsyncBase:function(b8,b9){var b_,b$;b_=this;b$=null;return _1.Delay(function(){var ca,cb;ca=D.makeHeaders(b8);cb=D.makePayload(b9);return _1.Bind(_1.GetCT(),function(cc){return _1.FromContinuations(function(cd,ce,cf){var cg,ch,ci;function cj(ck){return cg[0]?(cg[0]=false,cf(new bh.New(cc))):null;}cg=[true];ch=_1.Register(cc,function(){cj();});ci=b_.get_EndPoint();return D.AjaxProvider().Async(ci,ca,cb,function(ck){if(cg[0]){cg[0]=false;ch.Dispose();cd(bB.Activate(b5.parse(ck)));}},function(ck){if(cg[0]){cg[0]=false;ch.Dispose();ce(ck);}});});});});},get_EndPoint:function(){return D.EndPoint();},Async:function(b8,b9){return this.AsyncBase(b8,b9);}},j,L);L.New=b4.Ctor(function(){j.New.call(this);},L);M=F.T=b4.Class({GetEnumerator:function(){return new T.New(this,null,function(b8){var b9;b9=b8.s;return b9.$==0?false:(b8.c=b9.$0,b8.s=b9.$1,true);},void 0);},GetEnumerator0:function(){return S.Get(this);}},null,M);M.Empty=new M({$:0});N.p=function(b8){return b8==null?"null":"Some "+O.p(b8.$0);};N.p$1=function(b8){return b8.$==6?"FieldNotFound ("+p.prettyPrint(b8.$0)+", "+p.prettyPrint(b8.$1)+")":b8.$==5?"ConstructorNotFound ("+p.prettyPrint(b8.$0)+", "+p.prettyPrint(b8.$1)+", "+p.printList(p.prettyPrint,b8.$2)+")":b8.$==4?"MethodNameNotFound ("+p.prettyPrint(b8.$0)+", "+p.prettyPrint(b8.$1)+", "+p.printList(p.prettyPrint,b8.$2)+")":b8.$==3?"MethodNotFound ("+p.prettyPrint(b8.$0)+", "+p.prettyPrint(b8.$1)+", "+p.printList(p.prettyPrint,b8.$2)+")":b8.$==2?"TypeNotFound "+p.prettyPrint(b8.$0):b8.$==1?"NameConflict ("+p.prettyPrint(b8.$0)+", "+p.prettyPrint(b8.$1)+")":"SourceError "+p.prettyPrint(b8.$0);};N.p$2=function(b8){return b8.$==1?"PublicProxy "+p.prettyPrint(b8.$0):"SourceWarning "+p.prettyPrint(b8.$0);};O.p=function(b8){return"{"+("FileName = "+p.prettyPrint(b8.FileName))+"; "+("Start = "+("("+p.prettyPrint(b8.Start[0])+", "+p.prettyPrint(b8.Start[1])+")"))+"; "+("End = "+("("+p.prettyPrint(b8.End[0])+", "+p.prettyPrint(b8.End[1])+")"))+"}";};Q=P.attr=b4.Class({},j,Q);S.Get=function(b8){return b8 instanceof a.Array?S.ArrayEnumerator(b8):A.Equals(typeof b8,"string")?S.StringEnumerator(b8):b8.GetEnumerator();};S.ArrayEnumerator=function(b8){return new T.New(0,null,function(b9){var b_;b_=b9.s;return b_<q.length(b8)&&(b9.c=q.get(b8,b_),b9.s=b_+1,true);},void 0);};S.StringEnumerator=function(b8){return new T.New(0,null,function(b9){var b_;b_=b9.s;return b_<b8.length&&(b9.c=b8[b_],b9.s=b_+1,true);},void 0);};S.Get0=function(b8){return b8 instanceof a.Array?S.ArrayEnumerator(b8):A.Equals(typeof b8,"string")?S.StringEnumerator(b8):"GetEnumerator0"in b8?b8.GetEnumerator0():b8.GetEnumerator();};T=S.T=b4.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},j,T);T.New=b4.Ctor(function(b8,b9,b_,b$){j.New.call(this);this.s=b8;this.c=b9;this.n=b_;this.d=b$;},T);U.TryParseInt32=function(b8,b9){return U.TryParse(b8,-2147483648,2147483647,b9);};U.TryParseInt64=function(b8,b9){return U.TryParse(b8,-9223372036854775808,9223372036854775807,b9);};W.TryParse=function(b8,b9){try{b9.set(W.Parse(b8));return true;}catch(b_){return false;}};W.Parse=function(b8){var b9,b_,b$;try{return W.ParseExact(b8,"D");}catch(ca){try{b9=W.ParseExact(b8,"B");}catch(cb){try{b_=W.ParseExact(b8,"P");}catch(cc){try{b$=W.ParseExact(b8,"N");}catch(cd){b$=W.ParseExact(b8,"X");}b_=b$;}b9=b_;}return b9;}};W.ParseExact=function(b8,b9){var b_,b$,ca,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;function cb(cm){var cn,co,cp,cq;for(cn=0,co=35;cn<=co;cn++){cn===8||(cn===13||(cn===18||cn===23))?cm[cn]!=="-"?W.ShapeError():void 0:(cq=cm[cn],!("0"<=cq&&cq<="9"||"a"<=cq&&cq<="f")?W.ShapeError():void 0);}return cm;}cc=b9.toUpperCase();if(cc==="N"){cd=t.Trim(b8).toLowerCase();if(cd.length!==32)W.ShapeError();for(ce=0,cf=31;ce<=cf;ce++){cg=cd[ce];!("0"<=cg&&cg<="9"||"a"<=cg&&cg<="f")?W.ShapeError():void 0;}return t.Substring(cd,0,8)+"-"+t.Substring(cd,8,4)+"-"+t.Substring(cd,12,4)+"-"+t.Substring(cd,16,4)+"-"+cd.substring(20);}else if(cc==="D"){b_=t.Trim(b8).toLowerCase();b_.length!==36?W.ShapeError():void 0;return cb(b_);}else if(cc==="B"){b$=t.Trim(b8).toLowerCase();b$.length!==38||b$[0]!=="{"||b$[17]!=="}"?W.ShapeError():void 0;return cb(t.Substring(b$,1,36));}else if(cc==="P"){ca=t.Trim(b8).toLowerCase();ca.length!==38||ca[0]!=="("||ca[17]!==")"?W.ShapeError():void 0;return cb(t.Substring(ca,1,36));}else if(cc==="X"){ch=t.Trim(b8).toLowerCase();if(ch.length!==68)W.ShapeError();for(ci=0,cj=67;ci<=cj;ci++){switch(ci){case 26:case 0:if(ch[ci]!=="{")W.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(ch[ci]!=="0")W.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(ch[ci]!=="x")W.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(ch[ci]!==",")W.ShapeError();break;case 67:case 66:if(ch[ci]!=="{")W.ShapeError();break;default:cl=ch[ci];!("0"<=cl&&cl<="9"||"a"<=cl&&cl<="f")?W.ShapeError():void 0;break;}}return t.Substring(ch,3,8)+"-"+t.Substring(ch,14,4)+"-"+t.Substring(ch,21,4)+"-"+t.Substring(ch,29,2)+t.Substring(ch,34,2)+"-"+t.Substring(ch,39,2)+t.Substring(ch,44,2)+t.Substring(ch,49,2)+t.Substring(ch,54,2)+t.Substring(ch,59,2)+t.Substring(ch,64,2);}else return W.FormatError();};W.ShapeError=function(){throw new bO.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};W.FormatError=function(){throw new bO.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};X=w.Var$1=b4.Class({},j,X);X.Create$1=function(b8){return new _8.New(false,_9.New({$:2,$0:b8,$1:[]}),b8);};Y.Create=function(b8){return ba.New(false,b8,Y.forceLazy);};Y.forceLazy=function(){var b8;b8=this.v();this.c=true;this.v=b8;this.f=Y.cachedLazy;return b8;};Y.cachedLazy=function(){return this.v;};s.tryHead=function(b8){var b9;b9=S.Get(b8);try{return b9.MoveNext()?{$:1,$0:b9.Current()}:null;}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}};s.nonNegative=function(){return o.FailWith("The input must be non-negative.");};s.insufficient=function(){return o.FailWith("The input sequence has an insufficient number of elements.");};_0.$cctor=function(){_0.$cctor=a.ignore;_0.EndPoint="?";_0.AjaxProvider=new bb.New();};_1.FromContinuations=function(b8){return function(b9){var b_;function b$(ca){if(b_[0])o.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b_[0]=true;_1.scheduler().Fork(ca);}}b_=[false];b8(function(ca){b$(function(){b9.k({$:0,$0:ca});});},function(ca){b$(function(){b9.k({$:1,$0:ca});});},function(ca){b$(function(){b9.k({$:2,$0:ca});});});};};_1.Delay=function(b8){return function(b9){try{(b8(null))(b9);}catch(b_){b9.k({$:1,$0:b_});}};};_1.Bind=function(b8,b9){return _1.checkCancel(function(b_){b8(bc.New(function(b$){var ca;if(b$.$==0){ca=b$.$0;_1.scheduler().Fork(function(){try{(b9(ca))(b_);}catch(cb){b_.k({$:1,$0:cb});}});}else _1.scheduler().Fork(function(){b_.k(b$);});},b_.ct));});};_1.Zero=function(){bd.$cctor();return bd.Zero;};_1.Sleep=function(b8){return function(b9){var b_,b$;b_=void 0;b$=void 0;b_=a.setTimeout(function(){b$.Dispose();_1.scheduler().Fork(function(){b9.k({$:0,$0:null});});},b8);b$=_1.Register(b9.ct,function(){a.clearTimeout(b_);_1.scheduler().Fork(function(){_1.cancel(b9);});});};};_1.AwaitTask1=function(b8){return _1.FromContinuations(function(b9,b_,b$){b8.get_Status()===0?b8.Start():void 0;b8.ContinueWith$1(function(ca){return ca.get_IsCanceled()?b$(new bh.New(_1.noneCT())):ca.get_IsFaulted()?b_(ca.get_Exception()):b9(ca.get_Result());},_1.noneCT());});};_1.Return=function(b8){return function(b9){b9.k({$:0,$0:b8});};};_1.Start=function(b8,b9){var b_,b$;b_=(b$=(_1.defCTS())[0],b9==null?b$:b9.$0);_1.scheduler().Fork(function(){if(!b_.c)b8(bc.New(function(ca){if(ca.$==1)_1.UncaughtAsyncError(ca.$0);},b_));});};_1.StartAsTask=function(b8,b9){var b_;b_=new bq.New();_1.scheduler().Fork(function(){_1.StartWithContinuations(b8,function(b$){b_.SetResult(b$);},function(b$){b_.SetException$1(b$);},function(){b_.SetCanceled();},b9);});return b_.get_Task();};_1.checkCancel=function(b8){return function(b9){if(b9.ct.c)_1.cancel(b9);else b8(b9);};};_1.Register=function(b8,b9){var b_;return b8===_1.noneCT()?{Dispose:function(){return null;}}:(b_=b8.r.push(b9)-1,{Dispose:function(){return q.set(b8.r,b_,a.ignore);}});};_1.cancel=function(b8){b8.k({$:2,$0:new bh.New(b8.ct)});};_1.defCTS=function(){bd.$cctor();return bd.defCTS;};_1.UncaughtAsyncError=function(b8){b2.log("WebSharper: Uncaught asynchronous exception",b8);};_1.StartWithContinuations=function(b8,b9,b_,b$,ca){var cb,cc;cb=(cc=(_1.defCTS())[0],ca==null?cc:ca.$0);!cb.c?b8(bc.New(function(cd){if(cd.$==1)b_(cd.$0);else if(cd.$==2)b$(cd.$0);else b9(cd.$0);},cb)):void 0;};_1.scheduler=function(){bd.$cctor();return bd.scheduler;};_1.noneCT=function(){bd.$cctor();return bd.noneCT;};_1.GetCT=function(){bd.$cctor();return bd.GetCT;};_1.TryWith=function(b8,b9){return function(b_){b8(bc.New(function(b$){if(b$.$==0)b_.k({$:0,$0:b$.$0});else if(b$.$==1)try{(b9(b$.$0))(b_);}catch(ca){b_.k(b$);}else b_.k(b$);},b_.ct));};};_2=w.Doc=b4.Class({},j,_2);_2.TextNode=function(b8){return _2.Mk({$:5,$0:bk.CreateText(b8)},bj.Const());};_2.TextView=function(b8){var b9;b9=bl.CreateTextNode();return _2.Mk({$:4,$0:b9},bj.Map(function(b_){bl.UpdateTextNode(b9,b_);},b8));};_2.InputArea=function(b8,b9){return _2.InputInternal("textarea",function(){return s.append(b8,[bm.Value(b9)]);});};_2.Button=function(b8,b9,b_){var b$;b$=_3.Concat(b9);return bu.New(_2.Clickable("button",b_),b$,_2.TextNode(b8));};_2.Convert=function(b8,b9){return _2.Flatten(bj.MapSeqCached(b8,b9));};_2.Run=function(b8,b9){bl.LinkElement(b8,b9.docNode);_2.RunInPlace(false,b8,b9);};_2.Element=function(b8,b9,b_){var b$,ca;b$=_3.Concat(b9);ca=_2.Concat(b_);return bu.New(bk.CreateElement(b8),b$,ca);};_2.Mk=function(b8,b9){return new _2.New(b8,b9);};_2.InputInternal=function(b8,b9){var b_;b_=bk.CreateElement(b8);return bu.New(b_,_3.Concat(b9(b_)),_2.get_Empty());};_2.Clickable=function(b8,b9){var b_;b_=bk.CreateElement(b8);b_.addEventListener("click",function(b$){b$.preventDefault();return b9();},false);return b_;};_2.Flatten=function(b8){return _2.EmbedView(bj.Map(_2.Concat,b8));};_2.RunInPlace=function(b8,b9,b_){var b$;b$=bl.CreateRunState(b9,b_.docNode);bj.Sink(by.get_UseAnimations()||bz.BatchUpdatesEnabled()?bA.StartProcessor(bl.PerformAnimatedUpdate(b8,b$,b_.docNode)):function(){bl.PerformSyncUpdate(b8,b$,b_.docNode);},b_.updates);};_2.Concat=function(b8){var b9;b9=bv.ofSeqNonCopying(b8);return bv.TreeReduce(_2.get_Empty(),_2.Append,b9);};_2.get_Empty=function(){return _2.Mk(null,bj.Const());};_2.EmbedView=function(b8){var b9;b9=bl.CreateEmbedNode();return _2.Mk({$:2,$0:b9},bj.Map(a.ignore,bj.Bind(function(b_){bl.UpdateEmbedNode(b9,b_.docNode);return b_.updates;},b8)));};_2.Append=function(b8,b9){return _2.Mk({$:0,$0:b8.docNode,$1:b9.docNode},bj.Map2Unit(b8.updates,b9.updates));};_2.New=b4.Ctor(function(b8,b9){j.New.call(this);this.docNode=b8;this.updates=b9;},_2);_3=w.AttrProxy=b4.Class({},null,_3);_3.Create=function(b8,b9){return bn.Static(function(b_){bk.SetAttr(b_,b8,b9);});};_3.Concat=function(b8){var b9;b9=bv.ofSeqNonCopying(b8);return bv.TreeReduce(bn.EmptyAttr(),_3.Append,b9);};_3.Append=function(b8,b9){return bn.AppendTree(b8,b9);};_5.LoadLocalTemplates=function(b8){!_5.LocalTemplatesLoaded()?(_5.set_LocalTemplatesLoaded(true),_5.LoadNestedTemplates(self.document.body,"")):void 0;_5.LoadedTemplates().set_Item(b8,_5.LoadedTemplateFile(""));};_5.LocalTemplatesLoaded=function(){bw.$cctor();return bw.LocalTemplatesLoaded;};_5.set_LocalTemplatesLoaded=function(b8){bw.$cctor();bw.LocalTemplatesLoaded=b8;};_5.LoadNestedTemplates=function(b8,b9){var b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;function b_(cn){var co,cp;if(!b$.ContainsKey(cn)){co=(cp=null,[ca.TryGetValue(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]);co[0]?(cm.Add(cn),ca.Remove(cn),_5.PrepareTemplateStrict(b9,{$:1,$0:cn},co[1][0],{$:1,$0:co[1][1]},{$:1,$0:b_})):b2.warn(cm.Contains(cn)?"Encountered loop when instantiating "+cn:"Local template does not exist: "+cn);}}b$=_5.LoadedTemplateFile(b9);ca=new C.New$5();cb=b8.querySelectorAll("[ws-template]");for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=cb[cc];cf=ce.getAttribute("ws-template").toLowerCase();ce.removeAttribute("ws-template");ca.set_Item(cf,[[ce],_5.FakeRootSingle(ce)]);}cg=b8.querySelectorAll("[ws-children-template]");for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=cg[ch];ck=cj.getAttribute("ws-children-template").toLowerCase();cj.removeAttribute("ws-children-template");ca.set_Item(ck,(cl=bk.ChildrenArray(cj),[cl,_5.FakeRoot(cl)]));}cm=new bx.New$3();while(ca.count>0)b_(s.head(ca.get_Keys()));};_5.LoadedTemplates=function(){bw.$cctor();return bw.LoadedTemplates;};_5.LoadedTemplateFile=function(b8){var b9,b_,b$;b9=(b_=null,[_5.LoadedTemplates().TryGetValue(b8,{get:function(){return b_;},set:function(ca){b_=ca;}}),b_]);return b9[0]?b9[1]:(b$=new C.New$5(),(_5.LoadedTemplates().set_Item(b8,b$),b$));};_5.FakeRootSingle=function(b8){var b9,b_,b$;b8.removeAttribute("ws-template");b9=b8.getAttribute("ws-replace");b9===null?void 0:(b8.removeAttribute("ws-replace"),b_=b8.parentNode,A.Equals(b_,null)?void 0:(b$=self.document.createElement(b8.tagName),b$.setAttribute("ws-replace",b9),b_.replaceChild(b$,b8)));return _5.FakeRoot([b8]);};_5.FakeRoot=function(b8){var b9,b_,b$;b9=self.document.createElement("div");for(b_=0,b$=b8.length-1;b_<=b$;b_++)b9.appendChild(q.get(b8,b_));return b9;};_5.PrepareTemplateStrict=function(b8,b9,b_,b$,ca){var cb,cc;function cd(ci,cj){var ck,cl,cm,cn,co,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK;function cp(cL){}while(true)switch(ci){case 0:if(cj!==null){ck=cj.nextSibling;if(A.Equals(cj.nodeType,R.TEXT_NODE))bH.convertTextNode(cj);else if(A.Equals(cj.nodeType,R.ELEMENT_NODE))cf(cj);cj=ck;}else return null;break;case 1:cq=r.string(cj.nodeName,{$:1,$0:3},null).toLowerCase();cr=(cl=cq.indexOf("."),cl===-1?[b8,cq]:[r.string(cq,null,{$:1,$0:cl-1}),r.string(cq,{$:1,$0:cl+1},null)]);cs=cr[1];ct=cr[0];if(ct!==""&&!_5.LoadedTemplates().ContainsKey(ct))return bH.failNotLoaded(cs);else{if(ct===""&&ca!=null)ca.$0(cs);cu=_5.LoadedTemplates().get_Item(ct);if(!cu.ContainsKey(cs))return bH.failNotLoaded(cs);else{cv=cu.get_Item(cs);cw=cv.cloneNode(true);cx=new bx.New$3();cy=new C.New$5();cz=cj.attributes;for(cA=0,cB=cz.length-1;cA<=cB;cA++){cC=cz.item(cA).name.toLowerCase();cy.set_Item(cC,(cD=cz.item(cA).nodeValue,cD===""?cC:cD.toLowerCase()));!cx.Add(cC)?b2.warn("Hole mapped twice",cC):void 0;}for(cE=0,cF=cj.childNodes.length-1;cE<=cF;cE++){cG=cj.childNodes[cE];A.Equals(cG.nodeType,R.ELEMENT_NODE)?!cx.Add(cG.nodeName.toLowerCase())?b2.warn("Hole filled twice",cs):void 0:void 0;}cH=cj.childNodes.length===1&&A.Equals(cj.firstChild.nodeType,R.TEXT_NODE);if(cH){cn=bH.fillTextHole(cw,cj.firstChild.textContent,cs);((function(cL){return function(cM){if(cM!=null)cL(cM.$0);};}((co=function(cL){return function(cM){return cL.Add(cM);};}(cx),function(cL){return cp(co(cL));})))(cn));}bH.removeHolesExcept(cw,cx);if(!cH){for(cI=0,cJ=cj.childNodes.length-1;cI<=cJ;cI++){cK=cj.childNodes[cI];A.Equals(cK.nodeType,R.ELEMENT_NODE)?cK.hasAttributes()?bH.fillInstanceAttrs(cw,cK):ce(cw,cK):void 0;}}bH.mapHoles(cw,cy);bH.fill(cw,cj.parentNode,cj);cj.parentNode.removeChild(cj);return;}}break;}}function ce(ci,cj){var ck,cm,cn;function cl(co,cp){var cq,cr,cs;if(cm==="title"&&cj.hasChildNodes()){cq=b6.parseHTML(cj.textContent);cj.removeChild(cj.firstChild);for(cr=0,cs=cq.length-1;cr<=cs;cr++)cj.appendChild(q.get(cq,cr));}else null;cf(cj);return bH.fill(cj,co,cp);}cm=cj.nodeName.toLowerCase();bk.IterSelector(ci,"[ws-attr-holes]",function(co){var cp,cq,cr,cs,ct;cp=t.SplitChars(co.getAttribute("ws-attr-holes"),[" "],1);for(cq=0,cr=cp.length-1;cq<=cr;cq++){cs=q.get(cp,cq);co.setAttribute(cs,(ct=new a.RegExp("\\${"+cm+"}","ig"),co.getAttribute(cs).replace(ct,cj.textContent)));}});cn=ci.querySelector("[ws-hole="+cm+"]");if(A.Equals(cn,null)){ck=ci.querySelector("[ws-replace="+cm+"]");return A.Equals(ck,null)?null:(cl(ck.parentNode,ck),void ck.parentNode.removeChild(ck));}else{while(cn.hasChildNodes())cn.removeChild(cn.lastChild);cn.removeAttribute("ws-hole");return cl(cn,null);}}function cf(ci){if(t.StartsWith(ci.nodeName.toLowerCase(),"ws-"))ch(ci);else{bH.convertAttrs(ci);cg(ci.firstChild);}}function cg(ci){return cd(0,ci);}function ch(ci){return cd(1,ci);}cb=b$==null?_5.FakeRoot(b_):b$.$0;cc=(b9==null?"":b9.$0).toLowerCase();_5.LoadedTemplateFile(b8).set_Item(cc,cb);q.length(b_)>0?(function(ci){var cj,ck,cl,cm;while(true){cj=ci.querySelector("[ws-template]");if(A.Equals(cj,null)){ck=ci.querySelector("[ws-children-template]");if(A.Equals(ck,null))return null;else{cl=ck.getAttribute("ws-children-template");ck.removeAttribute("ws-children-template");_5.PrepareTemplateStrict(b8,{$:1,$0:cl},bk.ChildrenArray(ck),null,null);ci=ci;}}else{cm=cj.getAttribute("ws-template");(_5.PrepareSingleTemplate(b8,{$:1,$0:cm},cj))(null);ci=ci;}}}(cb),cg(q.get(b_,0))):void 0;};_5.PrepareSingleTemplate=function(b8,b9,b_){var b$,ca,cb;b$=_5.FakeRootSingle(b_);ca=[b_];cb={$:1,$0:b$};return function(cc){_5.PrepareTemplateStrict(b8,b9,ca,cb,cc);};};_5.TextHoleRE=function(){bw.$cctor();return bw.TextHoleRE;};_7.TryParse=function(b8){var b9;b9=b7.parse(b8);return a.isNaN(b9)?null:{$:1,$0:b9};};U.TryParse=function(b8,b9,b_,b$){var ca,cb;ca=+b8;cb=ca===ca-ca%1&&ca>=b9&&ca<=b_;cb?b$.set(ca):void 0;return cb;};_8=w.ConcreteVar=b4.Class({Set:function(b8){if(this.isConst)(function(b9){return b9("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b9){b2.log(b9);}));else{_9.Obsolete(this.snap);this.current=b8;this.snap=_9.New({$:2,$0:b8,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(b8){var b9;b9=b8(this.Get());b9!=null&&b9.$==1?this.Set(b9.$0):void 0;}},x,_8);_8.New=b4.Ctor(function(b8,b9,b_){var b$;b$=this;x.New.call(this);this.isConst=b8;this.current=b_;this.snap=b9;this.view=function(){return b$.snap;};this.id=bp.Int();},_8);_9.Map=function(b8,b9){var b_,b$;b_=b9.s;return b_!=null&&b_.$==0?_9.New({$:0,$0:b8(b_.$0)}):(b$=_9.New({$:3,$0:[],$1:[]}),(_9.When(b9,function(ca){_9.MarkDone(b$,b9,b8(ca));},b$),b$));};_9.WhenObsoleteRun=function(b8,b9){var b_;b_=b8.s;b_==null?b9():b_!=null&&b_.$==2?b_.$1.push(b9):b_!=null&&b_.$==3?b_.$1.push(b9):void 0;};_9.When=function(b8,b9,b_){var b$;b$=b8.s;b$==null?_9.Obsolete(b_):b$!=null&&b$.$==2?(_9.EnqueueSafe(b$.$1,b_),b9(b$.$0)):b$!=null&&b$.$==3?(b$.$0.push(b9),_9.EnqueueSafe(b$.$1,b_)):b9(b$.$0);};_9.MarkDone=function(b8,b9,b_){var b$;if(b$=b9.s,b$!=null&&b$.$==0)_9.MarkForever(b8,b_);else _9.MarkReady(b8,b_);};_9.WhenRun=function(b8,b9,b_){var b$;b$=b8.s;b$==null?b_():b$!=null&&b$.$==2?(b$.$1.push(b_),b9(b$.$0)):b$!=null&&b$.$==3?(b$.$0.push(b9),b$.$1.push(b_)):b9(b$.$0);};_9.EnqueueSafe=function(b8,b9){var b_,b$,ca,cb;b8.push(b9);if(b8.length%20===0){b_=b8.slice(0);bY.Clear(b8);for(b$=0,ca=q.length(b_)-1;b$<=ca;b$++){cb=q.get(b_,b$);typeof cb=="object"?function(cc){if(cc.s)b8.push(cc);}(cb):function(cc){b8.push(cc);}(cb);}}else void 0;};_9.MarkForever=function(b8,b9){var b_,b$,ca,cb;b_=b8.s;if(b_!=null&&b_.$==3){b8.s={$:0,$0:b9};b$=b_.$0;for(ca=0,cb=q.length(b$)-1;ca<=cb;ca++)(q.get(b$,ca))(b9);}else void 0;};_9.MarkReady=function(b8,b9){var b_,b$,ca,cb;b_=b8.s;if(b_!=null&&b_.$==3){b8.s={$:2,$0:b9,$1:b_.$1};b$=b_.$0;for(ca=0,cb=q.length(b$)-1;ca<=cb;ca++)(q.get(b$,ca))(b9);}else void 0;};_9.Copy=function(b8){var b9,b_,b$;b9=b8.s;return b9==null?b8:b9!=null&&b9.$==2?(b_=_9.New({$:2,$0:b9.$0,$1:[]}),(_9.WhenObsolete(b8,b_),b_)):b9!=null&&b9.$==3?(b$=_9.New({$:3,$0:[],$1:[]}),(_9.When(b8,function(ca){_9.MarkDone(b$,b8,ca);},b$),b$)):b8;};_9.Map2Unit=function(b8,b9){var b_,b$,ca;function cb(){var cc,cd,ce;if(!(cc=ca.s,cc!=null&&cc.$==0||cc!=null&&cc.$==2)){cd=_9.ValueAndForever(b8);ce=_9.ValueAndForever(b9);cd!=null&&cd.$==1?ce!=null&&ce.$==1?cd.$0[1]&&ce.$0[1]?_9.MarkForever(ca,null):_9.MarkReady(ca,null):void 0:void 0;}}b_=b8.s;b$=b9.s;return b_!=null&&b_.$==0?b$!=null&&b$.$==0?_9.New({$:0,$0:null}):b9:b$!=null&&b$.$==0?b8:(ca=_9.New({$:3,$0:[],$1:[]}),(_9.When(b8,cb,ca),_9.When(b9,cb,ca),ca));};_9.WhenObsolete=function(b8,b9){var b_;b_=b8.s;b_==null?_9.Obsolete(b9):b_!=null&&b_.$==2?_9.EnqueueSafe(b_.$1,b9):b_!=null&&b_.$==3?_9.EnqueueSafe(b_.$1,b9):void 0;};_9.ValueAndForever=function(b8){var b9;b9=b8.s;return b9!=null&&b9.$==0?{$:1,$0:[b9.$0,true]}:b9!=null&&b9.$==2?{$:1,$0:[b9.$0,false]}:null;};_9.Join=function(b8){var b9;b9=_9.New({$:3,$0:[],$1:[]});_9.When(b8,function(b_){var b$;b$=b_();_9.When(b$,function(ca){var cb,cc;if((cb=b$.s,cb!=null&&cb.$==0)&&(cc=b8.s,cc!=null&&cc.$==0))_9.MarkForever(b9,ca);else _9.MarkReady(b9,ca);},b9);},b9);return b9;};_.alreadyAdded=function(){return o.FailWith("An item with the same key has already been added.");};_.notPresent=function(){return o.FailWith("The given key was not present in the dictionary.");};ba.New=function(b8,b9,b_){return{c:b8,v:b9,f:b_};};bb=D.XhrProvider=b4.Class({Async:function(b8,b9,b_,b$,ca){D.ajax(true,b8,b9,b_,b$,ca,function(){D.ajax(true,b8,b9,b_,b$,ca,void 0);});}},j,bb);bb.New=b4.Ctor(function(){j.New.call(this);},bb);bc.New=function(b8,b9){return{k:b8,ct:b9};};bd.$cctor=function(){bd.$cctor=a.ignore;bd.noneCT=bi.New(false,[]);bd.scheduler=new br.New();bd.defCTS=[new bs.New()];bd.Zero=_1.Return();bd.GetCT=function(b8){b8.k({$:0,$0:b8.ct});};};be=i.Task=b4.Class({get_Status:function(){return this.status;},Start:function(){var b8;b8=this;this.status===0?(this.status=2,_1.scheduler().Fork(function(){var b9;b8.status=3;try{b8.Execute();b8.status=5;}catch(b_){b_ instanceof bh&&(A.Equals(b_.ct,b8.token)&&(b9=b_,true))?(b2.log("Task cancellation caught:",b9),b8.exc=new bt.New$3([b9]),b8.status=6):(b2.log("Task error caught:",b_),b8.exc=new bt.New$3([b_]),b8.status=7);}b8.RunContinuations();})):o.InvalidOp("Task not in initial state");},get_IsCanceled:function(){return this.status===6;},get_IsFaulted:function(){return this.status===7;},get_Exception:function(){return this.exc;},Execute:function(){this.action();},RunContinuations:function(){var b8,b9,b_;b8=this.continuations;for(b9=0,b_=b8.length-1;b9<=b_;b9++)q.get(b8,b9).StartContinuation();},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},StartContinuation:function(){var b8;b8=this;this.status===1?(this.status=2,_1.scheduler().Fork(function(){if(b8.status===2){b8.status=3;try{b8.Execute();b8.status=5;}catch(b9){b8.exc=new bt.New$3([b9]);b8.status=7;}b8.RunContinuations();}})):void 0;},ContinueWith$1:function(b8,b9){var b_,b$;b_=this;b$=new be.New$4(function(){return b8(b_);},b9,1,null);this.get_IsCompleted()?b$.StartContinuation():this.continuations.push(b$);return b$;}},j,be);be.New$4=b4.Ctor(function(b8,b9,b_,b$){j.New.call(this);this.action=b8;this.token=b9;this.status=b_;this.continuations=[];this.exc=b$;},be);bf=i.Task1=b4.Class({get_Result:function(){var b8;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return o.InvalidOp("Task has not been completed, has no Result");}},Execute:function(){this.result=this.func();}},be,bf);bf.New$4=b4.Ctor(function(b8,b9,b_,b$,ca){be.New$4.call(this,null,b9,b_,b$);this.func=b8;this.result=ca;},bf);bh=i.OperationCanceledException=b4.Class({},bg,bh);bh.New=b4.Ctor(function(b8){bh.New$1.call(this,"The operation was canceled.",null,b8);},bh);bh.New$1=b4.Ctor(function(b8,b9,b_){this.message=b8;this.inner=b9;Z.setPrototypeOf(this,bh.prototype);this.ct=b_;},bh);bi.New=function(b8,b9){return{c:b8,r:b9};};bj.Const=function(b8){var b9;b9=_9.New({$:0,$0:b8});return function(){return b9;};};bj.Map=function(b8,b9){return bj.CreateLazy(function(){return _9.Map(b8,b9());});};bj.MapSeqCached=function(b8,b9){return bj.MapSeqCachedBy(a.id,b8,b9);};bj.CreateLazy=function(b8){var b9;b9={c:null,o:b8};return function(){var b_,b$;b_=b9.c;return b_===null?(b_=b9.o(),b9.c=b_,(b$=b_.s,b$!=null&&b$.$==0)?b9.o=null:_9.WhenObsoleteRun(b_,function(){b9.c=null;}),b_):b_;};};bj.MapSeqCachedBy=function(b8,b9,b_){var b$;b$=[new C.New$5()];return bj.Map(function(ca){var cb,cc,cd;cb=b$[0];cc=new C.New$5();cd=bv.mapInPlace(function(ce){var cf,cg;cf=b8(ce);cg=cb.ContainsKey(cf)?cb.get_Item(cf):b9(ce);cc.set_Item(cf,cg);return cg;},q.ofSeq(ca));b$[0]=cc;return cd;},b_);};bj.Sink=function(b8,b9){function b_(){_9.WhenRun(b9(),b8,function(){_1.scheduler().Fork(b_);});}_1.scheduler().Fork(b_);};bj.Map2Unit=function(b8,b9){return bj.CreateLazy(function(){return _9.Map2Unit(b8(),b9());});};bj.Bind=function(b8,b9){return bj.Join(bj.Map(b8,b9));};bj.Join=function(b8){return bj.CreateLazy(function(){return _9.Join(b8());});};bk.CreateText=function(b8){return bk.Doc().createTextNode(b8);};bk.SetAttr=function(b8,b9,b_){b8.setAttribute(b9,b_);};bk.CreateElement=function(b8){return bk.Doc().createElement(b8);};bk.Doc=function(){bF.$cctor();return bF.Doc;};bk.ChildrenArray=function(b8){var b9,b_,b$;b9=[];for(b_=0,b$=b8.childNodes.length-1;b_<=b$;b_++)b9.push(b8.childNodes[b_]);return b9;};bk.IterSelector=function(b8,b9,b_){var b$,ca,cb;b$=b8.querySelectorAll(b9);for(ca=0,cb=b$.length-1;ca<=cb;ca++)b_(b$[ca]);};bk.InsertAt=function(b8,b9,b_){var b$;if(!(b_.parentNode===b8&&b9===(b$=b_.nextSibling,A.Equals(b$,null)?null:b$)))b8.insertBefore(b_,b9);};bk.RemoveNode=function(b8,b9){if(b9.parentNode===b8)b8.removeChild(b9);};bl.CreateTextNode=function(){return{Text:bk.CreateText(""),Dirty:false,Value:""};};bl.UpdateTextNode=function(b8,b9){b8.Value=b9;b8.Dirty=true;};bl.LinkElement=function(b8,b9){bl.InsertDoc(b8,b9,null);};bl.InsertDoc=function(b8,b9,b_){var b$;return b9!=null&&b9.$==1?bl.InsertNode(b8,b9.$0.El,b_):b9!=null&&b9.$==2?(b$=b9.$0,(b$.Dirty=false,bl.InsertDoc(b8,b$.Current,b_))):b9==null?b_:b9!=null&&b9.$==4?bl.InsertNode(b8,b9.$0.Text,b_):b9!=null&&b9.$==5?bl.InsertNode(b8,b9.$0,b_):b9!=null&&b9.$==6?q.foldBack(function(ca,cb){return ca==null||ca.constructor===Z?bl.InsertDoc(b8,ca,cb):bl.InsertNode(b8,ca,cb);},b9.$0.Els,b_):bl.InsertDoc(b8,b9.$0,bl.InsertDoc(b8,b9.$1,b_));};bl.CreateRunState=function(b8,b9){return bK.New(bL.get_Empty(),bl.CreateElemNode(b8,bn.EmptyAttr(),b9));};bl.PerformAnimatedUpdate=function(b8,b9,b_){var b$;return by.get_UseAnimations()?(b$=null,_1.Delay(function(){var ca,cb,cc;ca=bL.FindAll(b_);cb=bl.ComputeChangeAnim(b9,ca);cc=bl.ComputeEnterAnim(b9,ca);return _1.Bind(by.Play(by.Append(cb,bl.ComputeExitAnim(b9,ca))),function(){return _1.Bind(bl.SyncElemNodesNextFrame(b8,b9),function(){return _1.Bind(by.Play(cc),function(){b9.PreviousNodes=ca;return _1.Return(null);});});});})):bl.SyncElemNodesNextFrame(b8,b9);};bl.PerformSyncUpdate=function(b8,b9,b_){var b$;b$=bL.FindAll(b_);bl.SyncElemNode(b8,b9.Top);b9.PreviousNodes=b$;};bl.CreateElemNode=function(b8,b9,b_){var b$;bl.LinkElement(b8,b_);b$=bn.Insert(b8,b9);return bD.New(b$,b_,null,b8,bp.Int(),b4.GetOptional(b$.OnAfterRender));};bl.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bl.UpdateEmbedNode=function(b8,b9){b8.Current=b9;b8.Dirty=true;};bl.InsertNode=function(b8,b9,b_){bk.InsertAt(b8,b_,b9);return b9;};bl.SyncElemNodesNextFrame=function(b8,b9){function b_(b$){a.requestAnimationFrame(function(){bl.SyncElemNode(b8,b9.Top);b$();});}return bz.BatchUpdatesEnabled()?_1.FromContinuations(function(b$,ca,cb){return b_.apply(null,[b$,ca,cb]);}):(bl.SyncElemNode(b8,b9.Top),_1.Return(null));};bl.ComputeExitAnim=function(b8,b9){return by.Concat(q.map(function(b_){return bn.GetExitAnim(b_.Attr);},bL.ToArray(bL.Except(b9,bL.Filter(function(b_){return bn.HasExitAnim(b_.Attr);},b8.PreviousNodes)))));};bl.ComputeEnterAnim=function(b8,b9){return by.Concat(q.map(function(b_){return bn.GetEnterAnim(b_.Attr);},bL.ToArray(bL.Except(b8.PreviousNodes,bL.Filter(function(b_){return bn.HasEnterAnim(b_.Attr);},b9)))));};bl.ComputeChangeAnim=function(b8,b9){var b_;function b$(ca){return bn.HasChangeAnim(ca.Attr);}b_=function(ca){return bL.Filter(b$,ca);};return by.Concat(q.map(function(ca){return bn.GetChangeAnim(ca.Attr);},bL.ToArray(bL.Intersect(b_(b8.PreviousNodes),b_(b9)))));};bl.SyncElemNode=function(b8,b9){!b8?bl.SyncElement(b9):void 0;bl.Sync(b9.Children);bl.AfterRender(b9);};bl.SyncElement=function(b8){function b9(b_){function b$(ca){var cb,cc;return ca!=null&&ca.$==0?b$(ca.$0)||b$(ca.$1):ca!=null&&ca.$==2?(cb=ca.$0,cb.Dirty||b$(cb.Current)):ca!=null&&ca.$==6&&(cc=ca.$0,cc.Dirty||q.exists(b9,cc.Holes));}return b$(b_.Children);}bn.Sync(b8.El,b8.Attr);b9(b8)?bl.DoSyncElement(b8):void 0;};bl.Sync=function(b8){var b9,b_;if(b8!=null&&b8.$==1)bl.SyncElemNode(false,b8.$0);else if(b8!=null&&b8.$==2)bl.Sync(b8.$0.Current);else if(b8==null);else if(b8!=null&&b8.$==5);else if(b8!=null&&b8.$==4){b9=b8.$0;b9.Dirty?(b9.Text.nodeValue=b9.Value,b9.Dirty=false):void 0;}else if(b8!=null&&b8.$==6){b_=b8.$0;q.iter(function(b$){bl.SyncElemNode(false,b$);},b_.Holes);q.iter(function(b$){bn.Sync(b$[0],b$[1]);},b_.Attrs);bl.AfterRender(b_);}else{bl.Sync(b8.$0);bl.Sync(b8.$1);}};bl.AfterRender=function(b8){var b9;b9=b4.GetOptional(b8.Render);b9!=null&&b9.$==1?(b9.$0(b8.El),b4.SetOptional(b8,"Render",null)):void 0;};bl.DoSyncElement=function(b8){var b9,b_,b$;function ca(cb,cc){var cd,ce;return cb!=null&&cb.$==1?cb.$0.El:cb!=null&&cb.$==2?(cd=cb.$0,cd.Dirty?(cd.Dirty=false,bl.InsertDoc(b9,cd.Current,cc)):ca(cd.Current,cc)):cb==null?cc:cb!=null&&cb.$==4?cb.$0.Text:cb!=null&&cb.$==5?cb.$0:cb!=null&&cb.$==6?(ce=cb.$0,(ce.Dirty?ce.Dirty=false:void 0,q.foldBack(function(cf,cg){return cf==null||cf.constructor===Z?ca(cf,cg):cf;},ce.Els,cc))):ca(cb.$0,ca(cb.$1,cc));}b9=b8.El;b0.Iter((b_=b8.El,function(cb){bk.RemoveNode(b_,cb);}),b0.Except(b0.DocChildren(b8),b0.Children(b8.El,b4.GetOptional(b8.Delimiters))));ca(b8.Children,(b$=b4.GetOptional(b8.Delimiters),b$!=null&&b$.$==1?b$.$0[1]:null));};bm.Value=function(b8){function b9(b_){return{$:1,$0:b_};}return bm.CustomValue(b8,a.id,function(b_){return b9(a.id(b_));});};bm.CustomValue=function(b8,b9,b_){return bm.CustomVar(b8,function(b$,ca){b$.value=b9(ca);},function(b$){return b_(b$.value);});};bm.CustomVar=function(b8,b9,b_){function b$(cb,cc){return b8.UpdateMaybe(function(cd){var ce,cf;ce=b_(cb);return ce!=null&&ce.$==1&&(!A.Equals(ce.$0,cd)&&(cf=[ce,ce.$0],true))?cf[0]:null;});}function ca(cb,cc){var cd,ce;cd=b_(cb);return cd!=null&&cd.$==1&&(A.Equals(cd.$0,cc)&&(ce=cd.$0,true))?null:b9(cb,cc);}return _3.Concat([bm.Handler("change",function(cb){return function(cc){return b$(cb,cc);};}),bm.Handler("input",function(cb){return function(cc){return b$(cb,cc);};}),bm.Handler("keypress",function(cb){return function(cc){return b$(cb,cc);};}),bm.DynamicCustom(function(cb){return function(cc){return ca(cb,cc);};},b8.get_View())]);};bm.Handler=function(b8,b9){return bn.Static(function(b_){b_.addEventListener(b8,function(b$){return(b9(b_))(b$);},false);});};bm.DynamicCustom=function(b8,b9){return bn.Dynamic(b9,b8);};bn.Static=function(b8){return new _3({$:3,$0:b8});};bn.Updates=function(b8){return bv.MapTreeReduce(function(b9){return b9.NChanged();},bj.Const(),bj.Map2Unit,b8.DynNodes);};bn.AppendTree=function(b8,b9){var b_;return b8===null?b9:b9===null?b8:(b_=new _3({$:2,$0:b8,$1:b9}),(bn.SetFlags(b_,bn.Flags(b8)|bn.Flags(b9)),b_));};bn.EmptyAttr=function(){bS.$cctor();return bS.EmptyAttr;};bn.Insert=function(b8,b9){var b_,b$,ca;function cb(cc){if(!(cc===null))if(cc!=null&&cc.$==1)b_.push(cc.$0);else if(cc!=null&&cc.$==2){cb(cc.$0);cb(cc.$1);}else if(cc!=null&&cc.$==3)cc.$0(b8);else if(cc!=null&&cc.$==4)b$.push(cc.$0);}b_=[];b$=[];cb(b9);ca=b_.slice(0);return bR.New(b8,bn.Flags(b9),ca,b$.length===0?null:{$:1,$0:function(cc){s.iter(function(cd){cd(cc);},b$);}});};bn.SetFlags=function(b8,b9){b8.flags=b9;};bn.Flags=function(b8){return b8!==null&&b8.hasOwnProperty("flags")?b8.flags:0;};bn.HasExitAnim=function(b8){var b9;b9=2;return(b8.DynFlags&b9)===b9;};bn.GetExitAnim=function(b8){return bn.GetAnim(b8,function(b9,b_){return b9.NGetExitAnim(b_);});};bn.HasEnterAnim=function(b8){var b9;b9=1;return(b8.DynFlags&b9)===b9;};bn.GetEnterAnim=function(b8){return bn.GetAnim(b8,function(b9,b_){return b9.NGetEnterAnim(b_);});};bn.HasChangeAnim=function(b8){var b9;b9=4;return(b8.DynFlags&b9)===b9;};bn.GetChangeAnim=function(b8){return bn.GetAnim(b8,function(b9,b_){return b9.NGetChangeAnim(b_);});};bn.Dynamic=function(b8,b9){return new _3({$:1,$0:new bZ.New(b8,b9)});};bn.GetAnim=function(b8,b9){return by.Concat(q.map(function(b_){return b9(b_,b8.DynElem);},b8.DynNodes));};bn.Sync=function(b8,b9){q.iter(function(b_){b_.NSync(b8);},b9.DynNodes);};bp.Int=function(){bp.set_counter(bp.counter()+1);return bp.counter();};bp.set_counter=function(b8){bP.$cctor();bP.counter=b8;};bp.counter=function(){bP.$cctor();return bP.counter;};bq=i.TaskCompletionSource=b4.Class({SetResult:function(b8){this.task.get_IsCompleted()?o.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=b8;this.task.RunContinuations();},SetException$1:function(b8){this.task.get_IsCompleted()?o.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new bt.New$3([b8]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?o.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},j,bq);bq.New=b4.Ctor(function(){j.New.call(this);this.task=new bf.New$4(null,_1.noneCT(),1,null,void 0);},bq);br=_1.Scheduler=b4.Class({Fork:function(b8){var b9;b9=this;this.robin.push(b8);this.idle?(this.idle=false,a.setTimeout(function(){b9.tick();},0)):void 0;},tick:function(){var b8,b9,b_;b9=this;b_=b7.now();b8=true;while(b8)if(this.robin.length===0){this.idle=true;b8=false;}else{(this.robin.shift())();b7.now()-b_>40?(a.setTimeout(function(){b9.tick();},0),b8=false):void 0;}}},j,br);br.New=b4.Ctor(function(){j.New.call(this);this.idle=true;this.robin=[];},br);bs=i.CancellationTokenSource=b4.Class({},j,bs);bs.New=b4.Ctor(function(){j.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bs);bt=i.AggregateException=b4.Class({},bg,bt);bt.New$3=b4.Ctor(function(b8){bt.New$4.call(this,"One or more errors occurred.",b8);},bt);bt.New$4=b4.Ctor(function(b8,b9){this.message=b8;Z.setPrototypeOf(this,bt.prototype);this.innerExceptions=b9;},bt);bj=w.View=b4.Class({},null,bj);bu=w.Elt=b4.Class({},_2,bu);bu.New=function(b8,b9,b_){var b$,ca;b$=bl.CreateElemNode(b8,b9,b_.docNode);ca=bG.Create(b_.updates);return new bu.New$1({$:1,$0:b$},bj.Map2Unit(bn.Updates(b$.Attr),ca.v),b8,ca);};bu.New$1=b4.Ctor(function(b8,b9,b_,b$){_2.New.call(this,b8,b9);this.docNode$1=b8;this.updates$1=b9;this.elt=b_;this.rvUpdates=b$;},bu);bv.ofSeqNonCopying=function(b8){var b9,b_;if(b8 instanceof a.Array)return b8;else if(b8 instanceof M)return q.ofList(b8);else if(b8===null)return[];else{b9=[];b_=S.Get(b8);try{while(b_.MoveNext())b9.push(b_.Current());return b9;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}}};bv.TreeReduce=function(b8,b9,b_){var b$;function ca(cb,cc){var cd,ce;return cc<=0?b8:cc===1&&(cb>=0&&cb<b$)?q.get(b_,cb):(ce=cc/2>>0,b9(ca(cb,ce),ca(cb+ce,cc-ce)));}b$=q.length(b_);return ca(0,b$);};bv.mapInPlace=function(b8,b9){var b_,b$;for(b_=0,b$=b9.length-1;b_<=b$;b_++)b9[b_]=b8(b9[b_]);return b9;};bv.MapTreeReduce=function(b8,b9,b_,b$){var ca;function cb(cc,cd){var ce,cf;return cd<=0?b9:cd===1&&(cc>=0&&cc<ca)?b8(q.get(b$,cc)):(cf=cd/2>>0,b_(cb(cc,cf),cb(cc+cf,cd-cf)));}ca=q.length(b$);return cb(0,ca);};bw.$cctor=function(){bw.$cctor=a.ignore;bw.LoadedTemplates=new C.New$5();bw.LocalTemplatesLoaded=false;bw.TextHoleRE="\\${([^}]+)}";};bx=B.HashSet=b4.Class({Add:function(b8){return this.add(b8);},Contains:function(b8){var b9;b9=this.data[this.hash(b8)];return b9==null?false:this.arrContains(b8,b9);},add:function(b8){var b9,b_;b9=this.hash(b8);b_=this.data[b9];return b_==null?(this.data[b9]=[b8],this.count=this.count+1,true):this.arrContains(b8,b_)?false:(b_.push(b8),this.count=this.count+1,true);},arrContains:function(b8,b9){var b_,b$,ca,cb;b_=true;b$=0;cb=b9.length;while(b_&&b$<cb)if(this.equals.apply(null,[b9[b$],b8]))b_=false;else b$=b$+1;return!b_;},ExceptWith:function(b8){var b9;b9=S.Get(b8);try{while(b9.MoveNext())this.Remove(b9.Current());}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b8){var b9,b_,b$,ca;b9=0;b_=bX.concat(this.data);for(b$=0,ca=b_.length-1;b$<=ca;b$++)q.set(b8,b$,b_[b$]);},IntersectWith:function(b8){var b9,b_,b$,ca,cb;b9=new bx.New$4(b8,this.equals,this.hash);b_=bX.concat(this.data);for(b$=0,ca=b_.length-1;b$<=ca;b$++){cb=b_[b$];!b9.Contains(cb)?this.Remove(cb):void 0;}},Remove:function(b8){var b9;b9=this.data[this.hash(b8)];return b9==null?false:this.arrRemove(b8,b9)&&(this.count=this.count-1,true);},arrRemove:function(b8,b9){var b_,b$,ca,cb;b_=true;b$=0;cb=b9.length;while(b_&&b$<cb)if(this.equals.apply(null,[b9[b$],b8])){b9.splice.apply(b9,[b$,1]);b_=false;}else b$=b$+1;return!b_;},GetEnumerator:function(){return S.Get(bX.concat(this.data));},GetEnumerator0:function(){return S.Get(bX.concat(this.data));}},j,bx);bx.New$3=b4.Ctor(function(){bx.New$4.call(this,[],A.Equals,A.Hash);},bx);bx.New$4=b4.Ctor(function(b8,b9,b_){var b$;j.New.call(this);this.equals=b9;this.hash=b_;this.data=[];this.count=0;b$=S.Get(b8);try{while(b$.MoveNext())this.add(b$.Current());}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}},bx);bx.New$2=b4.Ctor(function(b8){bx.New$4.call(this,b8,A.Equals,A.Hash);},bx);by.get_UseAnimations=function(){return bM.UseAnimations();};by.Play=function(b8){var b9;b9=null;return _1.Delay(function(){return _1.Bind(by.Run(a.ignore,bM.Actions(b8)),function(){bM.Finalize(b8);return _1.Return(null);});});};by.Append=function(b8,b9){return{$:0,$0:bU.Append(b8.$0,b9.$0)};};by.Run=function(b8,b9){var b_;function b$(ca){function cb(cc,cd){var ce;ce=cd-cc;b9.Compute(ce);b8();return ce<=b_?void a.requestAnimationFrame(function(cf){cb(cc,cf);}):ca();}a.requestAnimationFrame(function(cc){cb(cc,cc);});}b_=b9.Duration;return b_===0?_1.Zero():_1.FromContinuations(function(ca,cb,cc){return b$.apply(null,[ca,cb,cc]);});};by.Concat=function(b8){return{$:0,$0:bU.Concat(s.map(bM.List,b8))};};by.get_Empty=function(){return{$:0,$0:bU.Empty()};};bz.BatchUpdatesEnabled=function(){bN.$cctor();return bN.BatchUpdatesEnabled;};bA.StartProcessor=function(b8){var b9;function b_(){var b$;b$=null;return _1.Delay(function(){return _1.Bind(b8,function(){var ca;ca=b9[0];return ca===1?(b9[0]=0,_1.Zero()):ca===2?(b9[0]=1,b_()):_1.Zero();});});}b9=[0];return function(){var b$;b$=b9[0];b$===0?(b9[0]=1,_1.Start(b_(),null)):b$===1?b9[0]=2:void 0;};};bB.Activate=function(b8){var b9,b$,ca,cb,cc,cd,ce;function b_(cf){var cg,ch,ci,cj,ck;if(A.Equals(cf,null))return cf;else if(typeof cf=="object"){if(cf instanceof a.Array)return bB.shallowMap(b_,cf);else{cg=bB.shallowMap(b_,cf.$V);ch=cf.$T;if(ch===void 0)return cg;else{ci=q.get(b$,ch);if(ci===1)return F.ofArray(cg);else if(ci===2)return self.WebSharper.Decimal.CreateDecimalBits(cg);else{cj=new(q.get(b$,ch))();for(var cl in cg)if(function(cm){cj[cm]=cg[cm];return false;}(cl))break;return cj;}}}}else return cf;}b$=b8?b8.$TYPES:void 0;if(b$===void 0)b9=b8;else{for(ca=0,cb=q.length(b$)-1;ca<=cb;ca++){ce=q.get(b$,ca);switch(!A.Equals(ce,null)&&ce.length===3?q.get(ce,0)==="WebSharper"?q.get(ce,1)==="List"?q.get(ce,2)==="T"?0:(cd=ce,2):(cd=ce,2):(cd=ce,2):!A.Equals(ce,null)&&ce.length===2?q.get(ce,0)==="WebSharper"?q.get(ce,1)==="Decimal"?1:(cd=ce,2):(cd=ce,2):(cd=ce,2)){case 0:cc=1;break;case 1:cc=2;break;case 2:cc=bB.lookup(cd);break;}q.set(b$,ca,cc);}b9=b8.$DATA;}return b_(b9);};bB.shallowMap=function(b8,b9){var b_,b$;if(b9 instanceof a.Array)return q.map(b8,b9);else if(typeof b9=="object"){b_={};for(var ca in b9)if(function(cb){b_[cb]=b8(b9[cb]);return false;}(ca))break;return b_;}else return b9;};bB.lookup=function(b8){var b9,b_,b$,ca,cb;b$=q.length(b8);b9=self;b_=0;while(b_<b$){ca=q.get(b8,b_);cb=b9[ca];!A.Equals(typeof cb,void 0)?(b9=cb,b_=b_+1):o.FailWith("Invalid server reply. Failed to find type: "+ca);}return b9;};_9.Obsolete=function(b8){var b9,b_,b$,ca,cb;b_=b8.s;if(b_==null||(b_!=null&&b_.$==2?(b9=b_.$1,false):b_!=null&&b_.$==3?(b9=b_.$1,false):true))void 0;else{b8.s=null;for(b$=0,ca=q.length(b9)-1;b$<=ca;b$++){cb=q.get(b9,b$);typeof cb=="object"?function(cc){_9.Obsolete(cc);}(cb):cb();}}};_9.New=function(b8){return{s:b8};};bC=i.InvalidOperationException=b4.Class({},bg,bC);bC.New=b4.Ctor(function(b8){bC.New$2.call(this,b8,null);},bC);bC.New$2=b4.Ctor(function(b8,b9){this.message=b8;this.inner=b9;Z.setPrototypeOf(this,bC.prototype);},bC);bD=w.DocElemNode=b4.Class({Equals:function(b8){return this.ElKey===b8.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bD);bD.New=function(b8,b9,b_,b$,ca,cb){var cc;return new bD((cc={Attr:b8,Children:b9,El:b$,ElKey:ca},(b4.SetOptional(cc,"Delimiters",b_),b4.SetOptional(cc,"Render",cb),cc)));};bF.$cctor=function(){bF.$cctor=a.ignore;bF.Doc=self.document;};bG=w.Updates=b4.Class({},null,bG);bG.Create=function(b8){var b9;b9=null;b9=bG.New(b8,null,function(){var b_;b_=b9.s;return b_===null?(b_=_9.Copy(b9.c()),b9.s=b_,_9.WhenObsoleteRun(b_,function(){b9.s=null;}),b_):b_;});return b9;};bG.New=function(b8,b9,b_){return new bG({c:b8,s:b9,v:b_});};bH.convertTextNode=function(b8){var b9,b_,b$,ca,cb,cc;b9=null;b_=0;ca=b8.textContent;cb=new a.RegExp(_5.TextHoleRE(),"g");while(b9=cb.exec(ca),b9!==null){b8.parentNode.insertBefore(self.document.createTextNode(r.string(ca,{$:1,$0:b_},{$:1,$0:cb.lastIndex-q.get(b9,0).length-1})),b8);b_=cb.lastIndex;cc=self.document.createElement("span");cc.setAttribute("ws-replace",q.get(b9,1).toLowerCase());b8.parentNode.insertBefore(cc,b8);}cb.lastIndex=0;b8.textContent=r.string(ca,{$:1,$0:b_},null);};bH.failNotLoaded=function(b8){b2.warn("Instantiating non-loaded template",b8);};bH.fillTextHole=function(b8,b9,b_){var b$;b$=b8.querySelector("[ws-replace]");return A.Equals(b$,null)?(b2.warn("Filling non-existent text hole",b_),null):(b$.parentNode.replaceChild(new a.Text(b9),b$),{$:1,$0:b$.getAttribute("ws-replace")});};bH.removeHolesExcept=function(b8,b9){function b_(b$){bk.IterSelector(b8,"["+b$+"]",function(ca){if(!b9.Contains(ca.getAttribute(b$)))ca.removeAttribute(b$);});}b_("ws-attr");b_("ws-onafterrender");b_("ws-var");bk.IterSelector(b8,"[ws-hole]",function(b$){if(!b9.Contains(b$.getAttribute("ws-hole"))){b$.removeAttribute("ws-hole");while(b$.hasChildNodes())b$.removeChild(b$.lastChild);}});bk.IterSelector(b8,"[ws-replace]",function(b$){if(!b9.Contains(b$.getAttribute("ws-replace")))b$.parentNode.removeChild(b$);});bk.IterSelector(b8,"[ws-on]",function(b$){b$.setAttribute("ws-on",t.concat(" ",q.filter(function(ca){return b9.Contains(q.get(t.SplitChars(ca,[":"],1),1));},t.SplitChars(b$.getAttribute("ws-on"),[" "],1))));});bk.IterSelector(b8,"[ws-attr-holes]",function(b$){var ca,cb,cc,cd,ce;ca=t.SplitChars(b$.getAttribute("ws-attr-holes"),[" "],1);for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=q.get(ca,cb);b$.setAttribute(cd,(ce=new a.RegExp(_5.TextHoleRE(),"g"),b$.getAttribute(cd).replace(ce,function(cf,cg){return b9.Contains(cg)?cf:"";})));}});};bH.fillInstanceAttrs=function(b8,b9){var b_,b$,ca,cb,cc;bH.convertAttrs(b9);b_=b9.nodeName.toLowerCase();b$=b8.querySelector("[ws-attr="+b_+"]");if(A.Equals(b$,null))b2.warn("Filling non-existent attr hole",b_);else{b$.removeAttribute("ws-attr");for(ca=0,cb=b9.attributes.length-1;ca<=cb;ca++){cc=b9.attributes.item(ca);cc.name==="class"&&b$.hasAttribute("class")?b$.setAttribute("class",b$.getAttribute("class")+" "+cc.nodeValue):b$.setAttribute(cc.name,cc.nodeValue);}}};bH.mapHoles=function(b8,b9){function b_(b$){bk.IterSelector(b8,"["+b$+"]",function(ca){var cb,cc;cb=(cc=null,[b9.TryGetValue(ca.getAttribute(b$).toLowerCase(),{get:function(){return cc;},set:function(cd){cc=cd;}}),cc]);cb[0]?ca.setAttribute(b$,cb[1]):void 0;});}b_("ws-hole");b_("ws-replace");b_("ws-attr");b_("ws-onafterrender");b_("ws-var");bk.IterSelector(b8,"[ws-on]",function(b$){b$.setAttribute("ws-on",t.concat(" ",q.map(function(ca){var cb,cc,cd;cb=t.SplitChars(ca,[":"],1);cc=(cd=null,[b9.TryGetValue(q.get(cb,1),{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);return cc[0]?q.get(cb,0)+":"+cc[1]:ca;},t.SplitChars(b$.getAttribute("ws-on"),[" "],1))));});bk.IterSelector(b8,"[ws-attr-holes]",function(b$){var ca,cb,cc;ca=t.SplitChars(b$.getAttribute("ws-attr-holes"),[" "],1);for(cb=0,cc=ca.length-1;cb<=cc;cb++)(function(){var cd;function ce(cf,cg){var ch;ch=o.KeyValue(cg);return cf.replace(new a.RegExp("\\${"+ch[0]+"}","ig"),"${"+ch[1]+"}");}cd=q.get(ca,cb);return b$.setAttribute(cd,(((b4.Curried3(s.fold))(ce))(b$.getAttribute(cd)))(b9));}());});};bH.fill=function(b8,b9,b_){while(true)if(b8.hasChildNodes())b_=b9.insertBefore(b8.lastChild,b_);else return null;};bH.convertAttrs=function(b8){var b_,b$,ca,cb,cc,cd,ce,cf;function b9(cg){var ch;ch=b8.getAttribute(cg);ch===null?void 0:b8.setAttribute(cg,ch.toLowerCase());}b_=b8.attributes;b$=[];ca=[];cb=[];for(cc=0,cd=b_.length-1;cc<=cd;cc++){ce=b_.item(cc);t.StartsWith(ce.nodeName,"ws-on")&&ce.nodeName!=="ws-onafterrender"&&ce.nodeName!=="ws-on"?(b$.push(ce.nodeName),ca.push(r.string(ce.nodeName,{$:1,$0:"ws-on".length},null)+":"+ce.nodeValue.toLowerCase())):!t.StartsWith(ce.nodeName,"ws-")&&(new a.RegExp(_5.TextHoleRE())).test(ce.nodeValue)?(ce.nodeValue=(cf=new a.RegExp(_5.TextHoleRE(),"g"),ce.nodeValue.replace(cf,function(cg,ch){return"${"+ch.toLowerCase()+"}";})),cb.push(ce.nodeName)):void 0;}!(ca.length==0)?b8.setAttribute("ws-on",t.concat(" ",ca)):void 0;!(cb.length==0)?b8.setAttribute("ws-attr-holes",t.concat(" ",cb)):void 0;b9("ws-hole");b9("ws-replace");b9("ws-attr");b9("ws-onafterrender");b9("ws-var");q.iter(function(cg){b8.removeAttribute(cg);},b$);};bI=B.KeyCollection=b4.Class({GetEnumerator$1:function(){return S.Get(s.map(function(b8){return b8.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},j,bI);bI.New=b4.Ctor(function(b8){j.New.call(this);this.d=b8;},bI);bK.New=function(b8,b9){return{PreviousNodes:b8,Top:b9};};bL.get_Empty=function(){return{$:0,$0:new bx.New$3()};};bL.FindAll=function(b8){var b9;function b_(ca){if(ca!=null&&ca.$==0){b_(ca.$0);b_(ca.$1);}else if(ca!=null&&ca.$==1)b$(ca.$0);else if(ca!=null&&ca.$==2)b_(ca.$0.Current);else if(ca!=null&&ca.$==6)q.iter(b$,ca.$0.Holes);}function b$(ca){b9.push(ca);b_(ca.Children);}b9=[];b_(b8);return{$:0,$0:new bx.New$2(b9)};};bL.Filter=function(b8,b9){return{$:0,$0:bW.Filter(b8,b9.$0)};};bL.Except=function(b8,b9){return{$:0,$0:bW.Except(b8.$0,b9.$0)};};bL.ToArray=function(b8){return bW.ToArray(b8.$0);};bL.Intersect=function(b8,b9){return{$:0,$0:bW.Intersect(b8.$0,b9.$0)};};bM.UseAnimations=function(){bT.$cctor();return bT.UseAnimations;};bM.Actions=function(b8){return bM.ConcatActions(q.choose(function(b9){return b9.$==1?{$:1,$0:b9.$0}:null;},bU.ToArray(b8.$0)));};bM.Finalize=function(b8){q.iter(function(b9){if(b9.$==0)b9.$0();},bU.ToArray(b8.$0));};bM.ConcatActions=function(b8){var b9,b_,b$,ca;b9=bv.ofSeqNonCopying(b8);b_=q.length(b9);return b_===0?bM.Const():b_===1?q.get(b9,0):(b$=s.max(s.map(function(cb){return cb.Duration;},b9)),(ca=q.map(function(cb){return bM.Prolong(b$,cb);},b9),bM.Def(b$,function(cb){q.iter(function(cc){cc.Compute(cb);},ca);})));};bM.List=function(b8){return b8.$0;};bM.Const=function(b8){return bM.Def(0,function(){return b8;});};bM.Def=function(b8,b9){return{Compute:b9,Duration:b8};};bM.Prolong=function(b8,b9){var b_,b$,ca;b_=b9.Compute;b$=b9.Duration;ca=Y.Create(function(){return b9.Compute(b9.Duration);});return{Compute:function(cb){return cb>=b$?ca.f():b_(cb);},Duration:b8};};bN.$cctor=function(){bN.$cctor=a.ignore;bN.BatchUpdatesEnabled=true;};bO=i.FormatException=b4.Class({},bg,bO);bO.New$1=b4.Ctor(function(b8){this.message=b8;Z.setPrototypeOf(this,bO.prototype);},bO);bP.$cctor=function(){bP.$cctor=a.ignore;bP.counter=0;};bR.New=function(b8,b9,b_,b$){var ca;ca={DynElem:b8,DynFlags:b9,DynNodes:b_};b4.SetOptional(ca,"OnAfterRender",b$);return ca;};bS.$cctor=function(){bS.$cctor=a.ignore;bS.EmptyAttr=null;};bT.$cctor=function(){bT.$cctor=a.ignore;bT.CubicInOut=bV.Custom(function(b8){var b9;b9=b8*b8;return 3*b9-2*(b9*b8);});bT.UseAnimations=true;};bU.Append=function(b8,b9){return b8.$==0?b9:b9.$==0?b8:{$:2,$0:b8,$1:b9};};bU.ToArray=function(b8){var b9;function b_(b$){if(b$.$==1)b9.push(b$.$0);else if(b$.$==2){b_(b$.$0);b_(b$.$1);}else if(b$.$==3)q.iter(function(ca){b9.push(ca);},b$.$0);}b9=[];b_(b8);return b9.slice(0);};bU.Concat=function(b8){var b9;b9=bv.ofSeqNonCopying(b8);return bv.TreeReduce(bU.Empty(),bU.Append,b9);};bU.Empty=function(){b1.$cctor();return b1.Empty;};bV=w.Easing=b4.Class({},j,bV);bV.Custom=function(b8){return new bV.New(b8);};bV.New=b4.Ctor(function(b8){j.New.call(this);this.transformTime=b8;},bV);bW.Filter=function(b8,b9){return new bx.New$2(q.filter(b8,bW.ToArray(b9)));};bW.Except=function(b8,b9){var b_;b_=new bx.New$2(bW.ToArray(b9));b_.ExceptWith(bW.ToArray(b8));return b_;};bW.ToArray=function(b8){var b9;b9=q.create(b8.get_Count(),void 0);b8.CopyTo(b9);return b9;};bW.Intersect=function(b8,b9){var b_;b_=new bx.New$2(bW.ToArray(b8));b_.IntersectWith(bW.ToArray(b9));return b_;};bX.concat=function(b8){var b9,b_;b9=[];for(var b$ in b8)b9.push.apply(b9,b8[b$]);return b9;};bY.Clear=function(b8){b8.splice(0,q.length(b8));};bZ=w.DynamicAttrNode=b4.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b8){return by.get_Empty();},NGetEnterAnim:function(b8){return by.get_Empty();},NGetChangeAnim:function(b8){return by.get_Empty();},NSync:function(b8){if(this.dirty){(this.push(b8))(this.value);this.dirty=false;}}},j,bZ);bZ.New=b4.Ctor(function(b8,b9){var b_;b_=this;j.New.call(this);this.push=b9;this.value=void 0;this.dirty=false;this.updates=bj.Map(function(b$){b_.value=b$;b_.dirty=true;},b8);},bZ);b0.Children=function(b8,b9){var b_,b$,ca;if(b9!=null&&b9.$==1){ca=[];b_=b9.$0[0].nextSibling;while(b_!==b9.$0[1]){ca.push(b_);b_=b_.nextSibling;}return{$:0,$0:ca};}else return{$:0,$0:q.init(b8.childNodes.length,(b$=b8.childNodes,function(cb){return b$[cb];}))};};b0.Except=function(b8,b9){var b_;b_=b8.$0;return{$:0,$0:q.filter(function(b$){return q.forall(function(ca){return!(b$===ca);},b_);},b9.$0)};};b0.Iter=function(b8,b9){q.iter(b8,b9.$0);};b0.DocChildren=function(b8){var b9;function b_(b$){if(b$!=null&&b$.$==2)b_(b$.$0.Current);else if(b$!=null&&b$.$==1)b9.push(b$.$0.El);else if(b$==null);else if(b$!=null&&b$.$==5)b9.push(b$.$0);else if(b$!=null&&b$.$==4)b9.push(b$.$0.Text);else if(b$!=null&&b$.$==6)q.iter(function(ca){if(ca==null||ca.constructor===Z)b_(ca);else b9.push(ca);},b$.$0.Els);else{b_(b$.$0);b_(b$.$1);}}b9=[];b_(b8.Children);return{$:0,$0:bv.ofSeqNonCopying(b9)};};b1.$cctor=function(){b1.$cctor=a.ignore;b1.Empty={$:0};};b4.OnLoad(function(){f.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.String=c.String||{};e=c.ParseO=c.ParseO||{};f=b.WasmLoader=b.WasmLoader||{};g=f.WasmStatus=f.WasmStatus||{};h=f.Remoting=f.Remoting||{};i=h.IMessagingO=h.IMessagingO||{};j=h.ReturnQueue=h.ReturnQueue||{};k=a.WebSharper=a.WebSharper||{};l=k.Obj=k.Obj||{};m=h.CustomXhrProvider=h.CustomXhrProvider||{};n=f.WWorker=f.WWorker||{};o=f.WasmLoad=f.WasmLoad||{};p=o.Require=o.Require||{};q=o.Global=o.Global||{};r=k.Operators=k.Operators||{};s=k.Utils=k.Utils||{};t=k.Arrays=k.Arrays||{};u=k.Slice=k.Slice||{};v=k.Seq=k.Seq||{};w=k.Strings=k.Strings||{};x=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};y=k.Char=k.Char||{};z=k.UI=k.UI||{};A=z.Var=z.Var||{};B=k.JavaScript=k.JavaScript||{};C=B.Pervasives=B.Pervasives||{};D=k.Unchecked=k.Unchecked||{};E=k.Collections=k.Collections||{};F=E.Dictionary=E.Dictionary||{};G=k.Remoting=k.Remoting||{};H=a.Event;I=B.JS=B.JS||{};J=k.List=k.List||{};K=b.LibraryJS=b.LibraryJS||{};L=K.Pojo=K.Pojo||{};M=a.EventTarget;N=a.XMLHttpRequestEventTarget;O=a.ArrayBufferView;P=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};Q=a.GeneratedPrintf=a.GeneratedPrintf||{};R=G.AjaxRemotingProvider=G.AjaxRemotingProvider||{};S=J.T=J.T||{};T=z.View=z.View||{};U=z.HtmlModule=z.HtmlModule||{};V=U.attr=U.attr||{};W=a.Node;X=k.Enumerator=k.Enumerator||{};Y=X.T=X.T||{};Z=k.Numeric=k.Numeric||{};_0=a.System=a.System||{};_1=_0.Guid=_0.Guid||{};_2=z.Var$1=z.Var$1||{};_3=k.Lazy=k.Lazy||{};_4=a.Object;_5=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};_6=k.Concurrency=k.Concurrency||{};_7=z.Doc=z.Doc||{};_8=z.Snap=z.Snap||{};_9=z.AttrProxy=z.AttrProxy||{};_=z.Client=z.Client||{};$=_.Templates=_.Templates||{};ba=a.WindowOrWorkerGlobalScope;bb=k.DateUtil=k.DateUtil||{};bc=z.ConcreteVar=z.ConcreteVar||{};bd=E.DictionaryUtil=E.DictionaryUtil||{};be=k.LazyExtensionsProxy=k.LazyExtensionsProxy||{};bf=be.LazyRecord=be.LazyRecord||{};bg=G.XhrProvider=G.XhrProvider||{};bh=_6.AsyncBody=_6.AsyncBody||{};bi=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bj=k.Task=k.Task||{};bk=k.Task1=k.Task1||{};bl=a.Error;bm=k.OperationCanceledException=k.OperationCanceledException||{};bn=_6.CT=_6.CT||{};bo=z.DomUtility=z.DomUtility||{};bp=z.AttrModule=z.AttrModule||{};bq=z.Attrs=z.Attrs||{};br=z.Docs=z.Docs||{};bs=z.Abbrev=z.Abbrev||{};bt=bs.Fresh=bs.Fresh||{};bu=k.TaskCompletionSource=k.TaskCompletionSource||{};bv=_6.Scheduler=_6.Scheduler||{};bw=k.CancellationTokenSource=k.CancellationTokenSource||{};bx=k.AggregateException=k.AggregateException||{};by=z.Elt=z.Elt||{};bz=z.Array=z.Array||{};bA=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bB=E.HashSet=E.HashSet||{};bC=z.An=z.An||{};bD=_.Settings=_.Settings||{};bE=bs.Mailbox=bs.Mailbox||{};bF=k.Json=k.Json||{};bG=k.InvalidOperationException=k.InvalidOperationException||{};bH=z.DocElemNode=z.DocElemNode||{};bI=a.CharacterData;bJ=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bK=z.Updates=z.Updates||{};bL=$.Prepare=$.Prepare||{};bM=E.KeyCollection=E.KeyCollection||{};bN=_.Docs=_.Docs||{};bO=bN.RunState=bN.RunState||{};bP=bN.NodeSet=bN.NodeSet||{};bQ=z.Anims=z.Anims||{};bR=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bS=k.FormatException=k.FormatException||{};bT=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bU=_.Attrs=_.Attrs||{};bV=bU.Dyn=bU.Dyn||{};bW=k.Queue=k.Queue||{};bX=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bY=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bZ=z.AppendList=z.AppendList||{};b0=z.Easing=z.Easing||{};b1=bs.HashSet=bs.HashSet||{};b2=E.HashSetUtil=E.HashSetUtil||{};b3=z.DynamicAttrNode=z.DynamicAttrNode||{};b4=bN.DomNodes=bN.DomNodes||{};b5=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b6=a.console;b7=a.IntelliFactory;b8=b7&&b7.Runtime;b9=a.JSON;b_=a.jQuery;b$=a.Date;c.Error=function(ca){return{$:1,$0:ca};};c.print=function(ca){if(typeof ca=="string")((function(cb){return function(cc){return cb(s.toSafe(cc));};}(function(cb){b6.log(cb);}))(ca));else((function(cb){return function(cc){return cb(s.prettyPrint(cc));};}(function(cb){b6.log(cb);}))(ca));};c["String.Substring2"]=function(ca,cb,cc){var cd,ce;while(true){if(cc<=0)return"";else if(cb>=ca.length)return"";else if(cb<0){cd=cb;cb=0;cc=cc+cd;}else return w.Substring(ca,cb,(ce=ca.length-cb,D.Compare(cc,ce)===-1?cc:ce));}};c["String.Left"]=function(ca,cb){return cb<0?c["String.Substring2"](ca,0,ca.length+cb):c["String.Substring2"](ca,0,cb);};c["String.Right"]=function(ca,cb){var cc,cd;return c["String.Substring2"](ca,(cc=0,(cd=ca.length-cb,D.Compare(cc,cd)===1?cc:cd)),ca.length);};d.splitByChar=function(ca,cb){return w.SplitChars(cb,[ca],0);};d.splitInTwoO=function(ca,cb){var cc;cc=cb.indexOf(ca);return cc===-1?null:{$:1,$0:[c["String.Left"](cb,cc),cb.substring(cc+ca.length)]};};d.delimitedO=function(ca,cb,cc){var cd,ce,cf,cg,ch;cd=d.splitInTwoO(ca,cc);return cd==null?null:(ce=cd.$0,(cf=ce[0],(cg=d.splitInTwoO(cb,ce[1]),cg==null?null:{$:1,$0:(ch=cg.$0,[cf,ch[0],ch[1]])})));};d.contains=function(ca,cb){return cb.indexOf(ca)!=-1;};d.trim=function(ca){return w.Trim(ca);};d.left=function(ca,cb){return c["String.Left"](cb,ca);};d.right=function(ca,cb){return c["String.Right"](cb,ca);};d.append=function(ca,cb){return ca+cb;};d.skipFirstLine=function(ca){var cb;cb=ca.indexOf("\n");return cb<0?"":u.string(ca,{$:1,$0:cb+1},null);};d.unindent=function(ca){var cb,cc,cd,ce;cb=w.SplitChars(ca,["\n"],0);cc=(cd=v.tryFindIndex(function(cf){return" "!==cf;},(ce=v.tryFind(function(cf){return w.Trim(cf)!=="";},cb),ce==null?"":ce.$0)),cd==null?0:cd.$0);return v.filter(function(cf){return!w.StartsWith(cf,"# 1 ");},v.map(function(cf){return cf.length<=cc?"":cf.substring(cc);},cb));};d.indent=function(ca,cb){var cc,cd;cc=w.SplitChars(cb,["\n"],0);return v.map((cd=w.replicate(ca," "),function(ce){return cd+ce;}),cc);};d.unindentStr=function(){x.$cctor();return x.unindentStr;};d.indentStr=function(ca){function cb(cd){return d.indent(ca,cd);}function cc(cd){return w.concat("\n",cd);}return function(cd){return cc(cb(cd));};};d.skipLastLine=function(){x.$cctor();return x.skipLastLine;};d.StartsWith=function(ca,cb){return w.StartsWith(cb,ca)?{$:1,$0:u.string(cb,{$:1,$0:ca.length},null)}:null;};d.EndsWith=function(ca,cb){return w.EndsWith(cb,ca)?{$:1,$0:u.string(cb,{$:1,$0:0},{$:1,$0:cb.length-ca.length-1})}:null;};d.WhiteSpace=function(ca){function cb(cc){return!cc;}return v.exists(function(cc){return cb(y.IsWhiteSpace(cc));},ca)?null:{$:1,$0:null};};d.thousands=function(ca){var cb,cc,cd,ce;cb=(cc=ca<0?-ca:ca,a.String(cc));cd=cb.length%3;ce=cd===0?3:cd;return ca<0?"-"+w.concat(",",J.ofSeq(v.delay(function(){return v.append([u.string(cb,{$:1,$0:0},{$:1,$0:ce-1})],v.delay(function(){return v.map(function(cf){return u.string(cb,{$:1,$0:cf*3+ce},{$:1,$0:cf*3+ce+2});},r.range(0,((cb.length-ce)/3>>0)-1));}));}))):w.concat(",",J.ofSeq(v.delay(function(){return v.append([u.string(cb,{$:1,$0:0},{$:1,$0:ce-1})],v.delay(function(){return v.map(function(cf){return u.string(cb,{$:1,$0:cf*3+ce},{$:1,$0:cf*3+ce+2});},r.range(0,((cb.length-ce)/3>>0)-1));}));})));};e.tryParseWith=function(ca){function cb(cc,cd){return cc?{$:1,$0:cd}:null;}return function(cc){return cb.apply(null,ca(cc));};};e.parseDateO2=function(){x.$cctor();return x.parseDateO2;};e.parseDateO=function(){x.$cctor();return x.parseDateO;};e.parseIntO=function(){x.$cctor();return x.parseIntO;};e.parseInt64O=function(){x.$cctor();return x.parseInt64O;};e.parseSingleO=function(){x.$cctor();return x.parseSingleO;};e.parseDoubleO=function(){x.$cctor();return x.parseDoubleO;};e.parseGuidO=function(){x.$cctor();return x.parseGuidO;};e.Date=function(){x.$cctor();return x["|Date|_|"];};e.Int=function(){x.$cctor();return x["|Int|_|"];};e.Int64=function(){x.$cctor();return x["|Int64|_|"];};e.Single=function(){x.$cctor();return x["|Single|_|"];};e.Double=function(){x.$cctor();return x["|Double|_|"];};e.Guid=function(){x.$cctor();return x["|Guid|_|"];};f.wasmStatusV=function(){x.$cctor();return x.wasmStatusV;};f.detailsV=function(){x.$cctor();return x.detailsV;};f.fsErrsV=function(){x.$cctor();return x.fsErrsV;};f.wsErrsV=function(){x.$cctor();return x.wsErrsV;};f.wsWrnsV=function(){x.$cctor();return x.wsWrnsV;};f.codeV=function(){x.$cctor();return x.codeV;};f.optsV=function(){x.$cctor();return x.optsV;};f.printfn=function(ca){return ca(h.messaging().wprintfn);};f.parseAndCheckProject=function(ca,cb,cc){var cd;cd=null;return _6.Delay(function(){return _6.Bind((new R.New()).Async("WsTranslator:FsRoot.WsTranslator.parseAndCheckProjectRpc:-1474163089",[ca,cb,cc]),function(ce){var cf;f.fsErrsV().Set(t.ofSeq(ce[0]));cf=(function(cg){return function(ch){return cg("("+s.prettyPrint(ch[0])+", "+s.printArray(s.prettyPrint,ch[1])+")");};}(a.id))([ce[2],ce[1]]);f.detailsV().Set(cf);return _6.Zero();});});};f.translateToJs=function(ca,cb,cc){var cd;cd=null;return _6.Delay(function(){return _6.Bind((new R.New()).Async("WsTranslator:FsRoot.WsTranslator.translateFsToJsRpc:957452724",[ca,cb,cc]),function(ce){var cf;cf=ce[1];f.fsErrsV().Set(ce[0]);return cf==null?(f.detailsV().Set(""),f.wsErrsV().Set([]),f.wsWrnsV().Set([]),_6.Zero()):(f.detailsV().Set(cf.$0[0]),f.wsErrsV().Set(t.ofSeq(cf.$0[1])),f.wsWrnsV().Set(t.ofSeq(cf.$0[2])),_6.Zero());});});};f.callWasmA=function(ca,cb){var cc;_6.Start((cc=null,_6.Delay(function(){return _6.Bind(_6.Sleep(50),function(){return _6.Bind(_6.AwaitTask1(o.loadWasm().f()),function(){return _6.Bind(ca(cb),function(){return _6.Return(null);});});});})),null);};f.getParms=function(){return["WasmTest",w.SplitChars("fsc.exe\n"+f.optsV().Get(),["\n"],0),f.codeV().Get()];};f.mainDoc=function(){function ca(cc,cd){return _7.Element("li",[],[_7.TextNode((function(ce){return function(cf){return ce("("+P.p$1(cf[0])+", "+P.p$2(cf[1])+")");};}(a.id))([cc,cd]))]);}function cb(cc,cd){return _7.Element("li",[],[_7.TextNode((function(ce){return function(cf){return ce("("+P.p$1(cf[0])+", "+P.p$3(cf[1])+")");};}(a.id))([cc,cd]))]);}return _7.Element("div",[],[_7.Element("h1",[],[_7.TextNode("HELLO WASM!")]),_7.Element("h2",[],[_7.TextView(T.Map(function(cc){return(function(cd){return function(ce){return cd(P.p(ce));};}(a.id))(cc);},f.wasmStatusV().get_View()))]),_7.Element("div",[],[_7.InputArea([],f.codeV()),_7.InputArea([],f.optsV())]),_7.Element("span",[],[_7.Button("Check",[],function(){f.callWasmA(function(cc){return f.parseAndCheckProject(cc[0],cc[1],cc[2]);},f.getParms());}),_7.Button("Translate",[],function(){f.detailsV().Set("");f.printfn(function(cc){return cc("Initiating translation:");});f.callWasmA(function(cc){return f.translateToJs(cc[0],cc[1],cc[2]);},f.getParms());}),_7.Button("Dir",[],function(){f.callWasmA(function(cc){return(new R.New()).Async("WsTranslator:FsRoot.WsTranslator.dirRpc:-1181784350",[cc]);},"/");}),_7.Button("Clean",[],function(){f.detailsV().Set("");}),_7.Button("Load as Worker",[],function(){o.loadWasmInWorker();})]),_7.Element("ol",[],[_7.Convert(function(cc){return _7.Element("li",[],[_7.TextNode((function(cd){return function(ce){return cd(s.prettyPrint(ce));};}(a.id))(cc))]);},f.fsErrsV().get_View())]),_7.Element("ol",[],[_7.Convert(function(cc){return ca(cc[0],cc[1]);},f.wsErrsV().get_View())]),_7.Element("ol",[],[_7.Convert(function(cc){return cb(cc[0],cc[1]);},f.wsWrnsV().get_View())]),_7.Element("div",[_9.Create("style","font-family: monospace; white-space:pre")],[_7.TextView(f.detailsV().get_View())])]);};f.main=function(){var ca,cb;ca=f.mainDoc();cb=self.document.body;$.LoadLocalTemplates("");_7.Run(cb,ca);};g.WasmLoading={$:1};g.WasmNotLoaded={$:0};g.WasmWorkerLoading={$:4};g.WasmWorkerLoaded={$:5};g.WasmLoaded={$:2};h.appendMsg=function(ca){var cb;b6.log(ca);!(!self.document)?(cb=f.detailsV().Get(),f.detailsV().Set(cb+(cb===""?"":"\n")+ca)):void 0;};h.getHeaderRpc=function(ca){return ca["x-websharper-rpc"];};h.originalProvider=function(){x.$cctor();return x.originalProvider;};h.returnValue0=function(ca,cb){var cc,cd,ce;cc=j.tryGet(ca);cc==null?void 0:(cd=cc.$0,ce=cd[0],cd[1],ce(cb));};h.returnExnExn=function(ca,cb){var cc,cd;cc=j.tryGet(ca);cc==null?void 0:(cd=cc.$0,cd[0],cd[1](cb));};h.returnExn0=function(ca,cb){h.returnExnExn(ca,new bl(cb));};h.set_messaging=function(ca){x.$cctor();x.messaging=ca;};h.messaging=function(){x.$cctor();return x.messaging;};h.callRunRpc=function(ca,cb){(h.messaging().runRpc(ca))(cb);};h.returnValue=function(ca,cb){h.messaging().returnValue([ca,cb]);};h.returnExn=function(ca,cb){h.messaging().returnExn([ca,cb]);};h.installProvider=function(){G.set_AjaxProvider(new m.New());};i.New=function(ca,cb,cc,cd){return{runRpc:ca,returnValue:cb,returnExn:cc,wprintfn:cd};};j.queues=function(){x.$cctor();return x.queues;};j.tryGetS=function(ca){return(e.tryParseWith(function(cb){var cc;cc=null;return[j.queues().TryGetValue(cb,{get:function(){return cc;},set:function(cd){cc=cd;}}),cc];}))(ca);};j.add=function(ca,cb){var cc,cd;cc=(cd=j.tryGetS(ca),cd==null?[cb]:(j.queues().Remove(ca),cd.$0.concat([cb])));j.queues().Add(ca,cc);};j.tryGet=function(ca){var cb,cc,cd,ce;cb=j.tryGetS(ca);return cb==null?null:(cc=cb.$0,(cd=v.tryHead(cc),cd!=null&&cd.$==1?(ce=u.array(cc,{$:1,$0:1},null),(j.queues().Remove(ca),j.queues().Add(ca,ce),{$:1,$0:cd.$0})):null));};l=k.Obj=b8.Class({Equals:function(ca){return this===ca;},GetHashCode:function(){return -1;}},null,l);l.New=b8.Ctor(function(){},l);m=h.CustomXhrProvider=b8.Class({Async:function(ca,cb,cc,cd,ce){var cf;_6.Start((cf=null,_6.Delay(function(){var cg;cg=h.getHeaderRpc(cb);j.add(cg,[cd,ce]);return _6.TryWith(_6.Delay(function(){h.callRunRpc(cg,cc);return _6.Zero();}),function(ch){h.returnExnExn(cg,ch);return _6.Zero();});})),null);}},l,m);m.New=b8.Ctor(function(){l.New.call(this);},m);n.set_workerO=function(ca){x.$cctor();x.workerO=ca;};n.workerO=function(){x.$cctor();return x.workerO;};n.receiveMessage=function(ca){var cb;cb=ca.data;cb.$==1?(f.printfn(function(cc){return function(cd){return cc(s.toSafe(cd));};}))(cb.$0):h.callRunRpc(cb.$0,cb.$1);};n.fromWorker=function(ca){var cb,cc;cb=ca.data;cb.$==1?h.returnExn0(cb.$0,cb.$1):cb.$==2?(f.printfn(function(cd){return function(ce){return cd(s.toSafe(ce));};}))(cb.$0):cb.$==3?(cc=cb.$0,!D.Equals(f.wasmStatusV().Get(),cc)?f.wasmStatusV().Set(cc):void 0):h.returnValue0(cb.$0,cb.$1);};o.rootPath=function(){x.$cctor();return x.rootPath;};o.requireJsA=function(ca){return _6.FromContinuations(function(cb){return a.requirejs(t.ofSeq(ca),cb);});};o.bindStaticMethod=function(ca,cb,cc){var cd;self[((((b8.Curried(function(ce,cf,cg,ch){return ce("WASM_"+s.toSafe(cf)+"_"+s.toSafe(cg)+"_"+s.toSafe(ch));},4))(a.id))(ca))(w.Replace(cb,".","_")))(cc)]=(cd=((((b8.Curried(function(ce,cf,cg,ch){return ce("["+s.toSafe(cf)+"]"+s.toSafe(cg)+":"+s.toSafe(ch));},4))(a.id))(ca))(cb))(cc),self.Module.mono_bind_static_method(cd));};o.bindWasm=function(){v.iter(function(ca){o.bindStaticMethod(ca[0],ca[1],ca[2]);},J.ofArray([["WsTranslator","FsRoot.WsTranslator","runRpc"]]));};o.filesToPreload=function(){x.$cctor();return x.filesToPreload;};o.preloadFiles=function(){var ca,cb,cc,cd,ce;self.Browser=L.newPojo([["init",a.ignore],["asyncLoad",function(cf,cg,ch){var ci;ci=new self.XMLHttpRequest();ci.open("GET",cf,true);ci.responseType="arraybuffer";ci.onload=function(){return ci.status===200||ci.status===0&&!D.Equals(ci.response,null)?cg(new a.Uint8Array(ci.response)):ch();};ci.onerror=function(){return ch();};return ci.send(null);}]]);self.Module.preloadPlugins=[];ca=X.Get(o.filesToPreload());try{while(ca.MoveNext()){cb=ca.Current();cc=cb[1];try{self.FS.mkdir(cc);}catch(cf){null;}cd=X.Get(cb[2]);try{while(cd.MoveNext()){ce=cd.Current();self.FS.createPreloadedFile(cc,ce,cb[0]+"/"+ce,1,a.$op21);}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}}}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}};o.loadWasm=function(){x.$cctor();return x.loadWasm;};o.loadWasmInWorker=function(){var ca;if(!self.document)f.printfn(function(cb){return cb("Already in a worker cannot load Wasm in another worker");});else if(f.wasmStatusV().Get().$!==0)(f.printfn(function(cb){return function(cc){return cb("Wasm is already "+P.p(cc));};}))(f.wasmStatusV().Get());else{f.wasmStatusV().Set(g.WasmLoading);ca=new a.Worker(b8.ScriptPath("testing","testing.WasmWorker.js"));ca.onmessage=n.fromWorker;n.set_workerO({$:1,$0:ca});h.set_messaging(i.New(function(cb){return function(cc){return ca.postMessage({$:0,$0:cb,$1:cc});};},function(cb){h.returnValue0(cb[0],cb[1]);},function(cb){h.returnExn0(cb[0],cb[1]);},function(cb){h.appendMsg(cb);}));h.installProvider();}};p=o.Require=b8.Class({},l,p);p.New=b8.Ctor(function(){l.New.call(this);},p);q=o.Global=b8.Class({},l,q);q.New=b8.Ctor(function(){l.New.call(this);},q);r.range=function(ca,cb){var cc;cc=1+cb-ca;return cc<=0?[]:v.init(cc,function(cd){return cd+ca;});};r.KeyValue=function(ca){return[ca.K,ca.V];};r.FailWith=function(ca){throw new bl(ca);};r.InvalidOp=function(ca){throw new bG.New(ca);};s.toSafe=function(ca){return ca==null?"":ca;};s.prettyPrint=function(ca){var cb,cc;function cd(ce,cf){return ce+" = "+s.prettyPrint(cf);}return ca===null?"null":(cb=typeof ca,cb=="string"?"\""+ca+"\"":cb=="object"?ca instanceof a.Array?"[|"+w.concat("; ",t.map(s.prettyPrint,ca))+"|]":(cc=a.String(ca),cc==="[object Object]"?"{"+w.concat("; ",t.map(function(ce){return cd(ce[0],ce[1]);},I.GetFields(ca)))+"}":cc):a.String(ca));};s.printArray=function(ca,cb){return cb===null?"null":"[|"+w.concat("; ",t.map(ca,cb))+"|]";};s.printList=function(ca,cb){return"["+w.concat("; ",v.map(ca,cb))+"]";};t.get=function(ca,cb){t.checkBounds(ca,cb);return ca[cb];};t.length=function(ca){return ca.dims===2?ca.length*ca.length:ca.length;};t.checkBounds=function(ca,cb){if(cb<0||cb>=ca.length)r.FailWith("Index was outside the bounds of the array.");};t.set=function(ca,cb,cc){t.checkBounds(ca,cb);ca[cb]=cc;};u.string=function(ca,cb,cc){return cb==null?cc!=null&&cc.$==1?ca.slice(0,cc.$0+1):"":cc==null?ca.slice(cb.$0):ca.slice(cb.$0,cc.$0+1);};u.array=function(ca,cb,cc){return cb==null?cc!=null&&cc.$==1?ca.slice(0,cc.$0+1):[]:cc==null?ca.slice(cb.$0):ca.slice(cb.$0,cc.$0+1);};v.tryFind=function(ca,cb){var cc,cd,ce;cc=X.Get(cb);try{cd=null;while(cd==null&&cc.MoveNext()){ce=cc.Current();ca(ce)?cd={$:1,$0:ce}:void 0;}return cd;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};v.tryFindIndex=function(ca,cb){var cc,cd,ce;cc=X.Get(cb);try{cd=true;ce=0;while(cd&&cc.MoveNext())if(ca(cc.Current()))cd=false;else ce=ce+1;return cd?null:{$:1,$0:ce};}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};v.map=function(ca,cb){return{GetEnumerator:function(){var cc;cc=X.Get(cb);return new Y.New(null,null,function(cd){return cc.MoveNext()&&(cd.c=ca(cc.Current()),true);},function(){cc.Dispose();});}};};v.filter=function(ca,cb){return{GetEnumerator:function(){var cc;cc=X.Get(cb);return new Y.New(null,null,function(cd){var ce,cf,cg;ce=cc.MoveNext();cf=cc.Current();cg=false;while(ce)if(ca(cf)){cd.c=cf;cg=true;ce=false;}else if(cc.MoveNext())cf=cc.Current();else ce=false;return cg;},function(){cc.Dispose();});}};};v.exists=function(ca,cb){var cc,cd;cc=X.Get(cb);try{cd=false;while(!cd&&cc.MoveNext())cd=ca(cc.Current());return cd;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};v.delay=function(ca){return{GetEnumerator:function(){return X.Get(ca());}};};v.append=function(ca,cb){return{GetEnumerator:function(){var cc,cd;cc=X.Get(ca);cd=[true];return new Y.New(cc,null,function(ce){var cf;return ce.s.MoveNext()?(ce.c=ce.s.Current(),true):(cf=ce.s,!D.Equals(cf,null)?cf.Dispose():void 0,ce.s=null,cd[0]&&(cd[0]=false,ce.s=X.Get(cb),ce.s.MoveNext()?(ce.c=ce.s.Current(),true):(ce.s.Dispose(),ce.s=null,false)));},function(ce){var cf;cf=ce.s;!D.Equals(cf,null)?cf.Dispose():void 0;});}};};v.iter=function(ca,cb){var cc;cc=X.Get(cb);try{while(cc.MoveNext())ca(cc.Current());}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};v.init=function(ca,cb){return v.take(ca,v.initInfinite(cb));};v.take=function(ca,cb){ca<0?v.nonNegative():void 0;return{GetEnumerator:function(){var cc;cc=[X.Get(cb)];return new Y.New(0,null,function(cd){var ce;cd.s=cd.s+1;return cd.s>ca?false:(ce=cc[0],D.Equals(ce,null)?v.insufficient():ce.MoveNext()?(cd.c=ce.Current(),cd.s===ca?(ce.Dispose(),cc[0]=null):void 0,true):(ce.Dispose(),cc[0]=null,v.insufficient()));},function(){var cd;cd=cc[0];!D.Equals(cd,null)?cd.Dispose():void 0;});}};};v.initInfinite=function(ca){return{GetEnumerator:function(){return new Y.New(0,null,function(cb){cb.c=ca(cb.s);cb.s=cb.s+1;return true;},void 0);}};};v.head=function(ca){var cb;cb=X.Get(ca);try{return cb.MoveNext()?cb.Current():v.insufficient();}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};v.fold=function(ca,cb,cc){var cd,ce;cd=cb;ce=X.Get(cc);try{while(ce.MoveNext())cd=ca(cd,ce.Current());return cd;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};v.max=function(ca){var cb,cc,cd;cb=X.Get(ca);try{if(!cb.MoveNext())v.seqEmpty();cc=cb.Current();while(cb.MoveNext()){cd=cb.Current();D.Compare(cd,cc)===1?cc=cd:void 0;}return cc;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};v.seqEmpty=function(){return r.FailWith("The input sequence was empty.");};w.replicate=function(ca,cb){return t.create(ca,cb).join("");};w.concat=function(ca,cb){return t.ofSeq(cb).join(ca);};w.Substring=function(ca,cb,cc){return ca.substr(cb,cc);};w.SplitChars=function(ca,cb,cc){return w.Split(ca,new a.RegExp("["+w.RegexEscape(cb.join(""))+"]"),cc);};w.Trim=function(ca){return ca.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};w.StartsWith=function(ca,cb){return ca.substring(0,cb.length)==cb;};w.EndsWith=function(ca,cb){return ca.substring(ca.length-cb.length)==cb;};w.Replace=function(ca,cb,cc){function cd(ce){var cf,cg,ch;cf=ce.indexOf(cb);return cf!==-1?(cg=w.ReplaceOnce(ce,cb,cc),(ch=cf+cc.length,w.Substring(cg,0,cf+cc.length)+cd(cg.substring(ch)))):ce;}return cd(ca);};w.Split=function(ca,cb,cc){return cc===1?t.filter(function(cd){return cd!=="";},w.SplitWith(ca,cb)):w.SplitWith(ca,cb);};w.RegexEscape=function(ca){return ca.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};w.ReplaceOnce=function(ca,cb,cc){return ca.replace(cb,cc);};w.SplitWith=function(ca,cb){return ca.split(cb);};x.$cctor=function(){var ca,cb;x.$cctor=a.ignore;function cc(ch){return w.concat("\n",ch);}function cd(ch){return d.splitByChar("\n",ch);}function ce(ch){var ci,cj;return u.array(ch,{$:1,$0:0},{$:1,$0:(ci=0,(cj=t.length(ch)-2,D.Compare(ci,cj)===1?ci:cj))});}function cf(ch){return w.concat("\n",ch);}function cg(ch){return ch+"T00:00:00";}x.unindentStr=function(ch){return cc(d.unindent(ch));};x.skipLastLine=(ca=function(ch){return ce(cd(ch));},function(ch){return cf(ca(ch));});x.parseDateO2=(cb=e.tryParseWith(function(ch){var ci,cj;ci=0;return[(cj=bb.TryParse(ch),cj!=null&&cj.$==1&&(ci=cj.$0,true)),ci];}),function(ch){return cb(cg(ch));});x.parseDateO=e.tryParseWith(function(ch){var ci,cj;ci=0;return[(cj=bb.TryParse(ch),cj!=null&&cj.$==1&&(ci=cj.$0,true)),ci];});x.parseIntO=e.tryParseWith(function(ch){var ci;ci=0;return[Z.TryParseInt32(ch,{get:function(){return ci;},set:function(cj){ci=cj;}}),ci];});x.parseInt64O=e.tryParseWith(function(ch){var ci;ci=0;return[Z.TryParseInt64(ch,{get:function(){return ci;},set:function(cj){ci=cj;}}),ci];});x.parseSingleO=e.tryParseWith(function(ch){var ci,cj;ci=0;return[(cj=a.Number(ch),a.isNaN(cj)?false:(ci=cj,true)),ci];});x.parseDoubleO=e.tryParseWith(function(ch){var ci,cj;ci=0;return[(cj=a.Number(ch),a.isNaN(cj)?false:(ci=cj,true)),ci];});x.parseGuidO=e.tryParseWith(function(ch){var ci;ci=null;return[_1.TryParse(ch,{get:function(){return ci;},set:function(cj){ci=cj;}}),ci];});x["|Date|_|"]=e.parseDateO();x["|Int|_|"]=e.parseIntO();x["|Int64|_|"]=e.parseInt64O();x["|Single|_|"]=e.parseSingleO();x["|Double|_|"]=e.parseDoubleO();x["|Guid|_|"]=e.parseGuidO();x.wasmStatusV=_2.Create$1(g.WasmNotLoaded);x.detailsV=_2.Create$1("");x.fsErrsV=_2.Create$1([]);x.wsErrsV=_2.Create$1([]);x.wsWrnsV=_2.Create$1([]);x.codeV=_2.Create$1("printfn \"Hello\"");x.optsV=_2.Create$1("/tmp/source.fsx\n-o:source.exe\n--simpleresolution\n--nowarn:3186\n--optimize-\n--noframework\n--fullpaths\n--warn:3\n--target:exe\n-r:/tmp/FSharp.Core.dll\n-r:/tmp/mscorlib.dll\n-r:/tmp/netstandard.dll\n-r:/tmp/System.dll\n-r:/tmp/System.Core.dll\n-r:/tmp/System.IO.dll\n-r:/tmp/System.Runtime.dll\n-r:/tmp/System.Net.Http.dll\n-r:/tmp/System.Threading.dll\n-r:/tmp/System.Numerics.dll");x.originalProvider=G.AjaxProvider();x.queues=new F.New$5();x.messaging=i.New(function(ch){return function(ci){return self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(ch,ci);};},function(ch){h.returnValue0(ch[0],ch[1]);},function(ch){h.returnExn0(ch[0],ch[1]);},function(ch){h.appendMsg(ch);});x.workerO=null;x.rootPath="/WASM/publish/";x.filesToPreload=J.ofArray([[o.rootPath()+"dlls","/tmp",["WebSharper.Main.dll","WebSharper.Collections.dll","WebSharper.Control.dll","WebSharper.Web.dll","WebSharper.Sitelets.dll","WebSharper.UI.dll","WebSharper.UI.Templating.Runtime.dll","WebSharper.Data.dll"]],[o.rootPath()+"managed","/tmp",t.choose(function(ch){var ci;ci=d.StartsWith("-r:/tmp/",ch);return ci!=null&&ci.$==1?{$:1,$0:ci.$0}:null;},w.SplitChars(f.optsV().Get(),["\n"],0))]]);x.loadWasm=_3.Create(function(){return _6.StartAsTask(_6.FromContinuations(function(ch){var ci;function cj(){o.bindWasm();f.printfn(function(ck){return ck("WASM Initialized!");});f.wasmStatusV().Set(!self.document?g.WasmWorkerLoaded:g.WasmLoaded);ch();}return _6.Start((ci=null,_6.Delay(function(){return f.wasmStatusV().Get().$!==0?((f.printfn(function(ck){return function(cl){return ck("Wasm is already "+P.p(cl));};}))(f.wasmStatusV().Get()),ch(),_6.Zero()):(f.printfn(function(ck){return ck("Loading WASM. Hold on, this will take a while...");}),f.wasmStatusV().Set(!self.document?g.WasmWorkerLoading:g.WasmLoading),_6.Bind(_6.Sleep(50),function(){return _6.Combine(!(!self.document)?(h.installProvider(),_6.Zero()):_6.Zero(),_6.Delay(function(){self.App=L.newPojo([["init",cj]]);return _6.Bind(o.requireJsA([o.rootPath()+"mono-config.js"]),function(){return _6.Bind(o.requireJsA([o.rootPath()+"runtime.js"]),function(){self.Module.print=f.printfn(function(ck){return function(cl){return ck(s.toSafe(cl));};});self.Module.printErr=f.printfn(function(ck){return function(cl){return ck(s.toSafe(cl));};});self.Module.preRun=[function(){o.preloadFiles();}];return _6.Bind(o.requireJsA([o.rootPath()+"dotnet.js"]),function(){return _6.Zero();});});});}));}));})),null);}),null);});};y.IsWhiteSpace=function(ca){return ca.match(new a.RegExp("\\s"))!==null;};A=z.Var=b8.Class({},l,A);A.New=b8.Ctor(function(){l.New.call(this);},A);C.NewFromSeq=function(ca){var cb,cc,cd;cb={};cc=X.Get(ca);try{while(cc.MoveNext()){cd=cc.Current();cb[cd[0]]=cd[1];}}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}return cb;};D.Equals=function(ca,cb){var cc,cd,ce,cf;if(ca===cb)return true;else{cc=typeof ca;if(cc=="object"){if(ca===null||ca===void 0||cb===null||cb===void 0)return false;else if("Equals"in ca)return ca.Equals(cb);else if(ca instanceof a.Array&&cb instanceof a.Array)return D.arrayEquals(ca,cb);else if(ca instanceof a.Date&&cb instanceof a.Date)return D.dateEquals(ca,cb);else{cd=[true];for(var cg in ca)if(function(ch){cd[0]=!ca.hasOwnProperty(ch)||cb.hasOwnProperty(ch)&&D.Equals(ca[ch],cb[ch]);return!cd[0];}(cg))break;if(cd[0]){for(var ch in cb)if(function(ci){cd[0]=!cb.hasOwnProperty(ci)||ca.hasOwnProperty(ci);return!cd[0];}(ch))break;}return cd[0];}}else return cc=="function"&&("$Func"in ca?ca.$Func===cb.$Func&&ca.$Target===cb.$Target:"$Invokes"in ca&&"$Invokes"in cb&&D.arrayEquals(ca.$Invokes,cb.$Invokes));}};D.Compare=function(ca,cb){var cc,cd,ce,cf,cg,ch;if(ca===cb)return 0;else{cd=typeof ca;switch(cd=="function"?1:cd=="boolean"?2:cd=="number"?2:cd=="string"?2:cd=="object"?3:0){case 0:return typeof cb=="undefined"?0:-1;case 1:return r.FailWith("Cannot compare function values.");case 2:return ca<cb?-1:1;case 3:if(ca===null)ce=-1;else if(cb===null)ce=1;else if("CompareTo"in ca)ce=ca.CompareTo(cb);else if("CompareTo0"in ca)ce=ca.CompareTo0(cb);else if(ca instanceof a.Array&&cb instanceof a.Array)ce=D.compareArrays(ca,cb);else if(ca instanceof a.Date&&cb instanceof a.Date)ce=D.compareDates(ca,cb);else{cf=[0];for(var ci in ca)if(function(cj){return!ca.hasOwnProperty(cj)?false:!cb.hasOwnProperty(cj)?(cf[0]=1,true):(cf[0]=D.Compare(ca[cj],cb[cj]),cf[0]!==0);}(ci))break;if(cf[0]===0){for(var cj in cb)if(function(ck){return!cb.hasOwnProperty(ck)?false:!ca.hasOwnProperty(ck)&&(cf[0]=-1,true);}(cj))break;}ce=cf[0];}return ce;}}};D.arrayEquals=function(ca,cb){var cc,cd;if(t.length(ca)===t.length(cb)){cc=true;cd=0;while(cc&&cd<t.length(ca)){!D.Equals(t.get(ca,cd),t.get(cb,cd))?cc=false:void 0;cd=cd+1;}return cc;}else return false;};D.dateEquals=function(ca,cb){return ca.getTime()===cb.getTime();};D.compareArrays=function(ca,cb){var cc,cd;if(t.length(ca)<t.length(cb))return -1;else if(t.length(ca)>t.length(cb))return 1;else{cc=0;cd=0;while(cc===0&&cd<t.length(ca)){cc=D.Compare(t.get(ca,cd),t.get(cb,cd));cd=cd+1;}return cc;}};D.compareDates=function(ca,cb){return D.Compare(ca.getTime(),cb.getTime());};D.Hash=function(ca){var cb;cb=typeof ca;return cb=="function"?0:cb=="boolean"?ca?1:0:cb=="number"?ca:cb=="string"?D.hashString(ca):cb=="object"?ca==null?0:ca instanceof a.Array?D.hashArray(ca):D.hashObject(ca):0;};D.hashString=function(ca){var cb,cc,cd;if(ca===null)return 0;else{cb=5381;for(cc=0,cd=ca.length-1;cc<=cd;cc++)cb=D.hashMix(cb,ca[cc].charCodeAt());return cb;}};D.hashArray=function(ca){var cb,cc,cd;cb=-34948909;for(cc=0,cd=t.length(ca)-1;cc<=cd;cc++)cb=D.hashMix(cb,D.Hash(t.get(ca,cc)));return cb;};D.hashObject=function(ca){var cb,cc;if("GetHashCode"in ca)return ca.GetHashCode();else{cb=[0];for(var cd in ca)if(function(ce){cb[0]=D.hashMix(D.hashMix(cb[0],D.hashString(ce)),D.Hash(ca[ce]));return false;}(cd))break;return cb[0];}};D.hashMix=function(ca,cb){return(ca<<5)+ca+cb;};F=E.Dictionary=b8.Class({TryGetValue:function(ca,cb){var cc,cd,ce;cc=this;cd=this.data[this.hash(ca)];return cd==null?false:(ce=t.tryPick(function(cf){var cg;cg=r.KeyValue(cf);return cc.equals.apply(null,[cg[0],ca])?{$:1,$0:cg[1]}:null;},cd),ce!=null&&ce.$==1&&(cb.set(ce.$0),true));},Add:function(ca,cb){this.add(ca,cb);},Remove:function(ca){return this.remove(ca);},add:function(ca,cb){var cc,cd,ce;cc=this;cd=this.hash(ca);ce=this.data[cd];ce==null?(this.count=this.count+1,this.data[cd]=new a.Array({K:ca,V:cb})):(t.exists(function(cf){return cc.equals.apply(null,[(r.KeyValue(cf))[0],ca]);},ce)?bd.alreadyAdded():void 0,this.count=this.count+1,ce.push({K:ca,V:cb}));},remove:function(ca){var cb,cc,cd,ce;cb=this;cc=this.hash(ca);cd=this.data[cc];return cd==null?false:(ce=t.filter(function(cf){return!cb.equals.apply(null,[(r.KeyValue(cf))[0],ca]);},cd),t.length(ce)<cd.length&&(this.count=this.count-1,this.data[cc]=ce,true));},set_Item:function(ca,cb){this.set(ca,cb);},set:function(ca,cb){var cc,cd,ce,cf;cc=this;cd=this.hash(ca);ce=this.data[cd];ce==null?(this.count=this.count+1,this.data[cd]=new a.Array({K:ca,V:cb})):(cf=t.tryFindIndex(function(cg){return cc.equals.apply(null,[(r.KeyValue(cg))[0],ca]);},ce),cf==null?(this.count=this.count+1,ce.push({K:ca,V:cb})):ce[cf.$0]={K:ca,V:cb});},ContainsKey:function(ca){var cb,cc;cb=this;cc=this.data[this.hash(ca)];return cc==null?false:t.exists(function(cd){return cb.equals.apply(null,[(r.KeyValue(cd))[0],ca]);},cc);},get_Keys:function(){return new bM.New(this);},get_Item:function(ca){return this.get(ca);},get:function(ca){var cb,cc;cb=this;cc=this.data[this.hash(ca)];return cc==null?bd.notPresent():t.pick(function(cd){var ce;ce=r.KeyValue(cd);return cb.equals.apply(null,[ce[0],ca])?{$:1,$0:ce[1]}:null;},cc);},GetEnumerator:function(){return X.Get0(this);},GetEnumerator0:function(){return X.Get0(t.concat(I.GetFieldValues(this.data)));}},l,F);F.New$5=b8.Ctor(function(){F.New$6.call(this,[],D.Equals,D.Hash);},F);F.New$6=b8.Ctor(function(ca,cb,cc){var cd,ce;l.New.call(this);this.equals=cb;this.hash=cc;this.count=0;this.data=[];cd=X.Get(ca);try{while(cd.MoveNext()){ce=cd.Current();this.set(ce.K,ce.V);}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}},F);t.map=function(ca,cb){var cc,cd,ce;cc=new a.Array(cb.length);for(cd=0,ce=cb.length-1;cd<=ce;cd++)cc[cd]=ca(cb[cd]);return cc;};t.create=function(ca,cb){var cc,cd,ce;cc=new a.Array(ca);for(cd=0,ce=ca-1;cd<=ce;cd++)cc[cd]=cb;return cc;};t.choose=function(ca,cb){var cc,cd,ce,cf;cc=[];for(cd=0,ce=cb.length-1;cd<=ce;cd++){cf=ca(cb[cd]);cf==null?void 0:cc.push(cf.$0);}return cc;};t.tryPick=function(ca,cb){var cc,cd,ce;cc=null;cd=0;while(cd<cb.length&&cc==null){ce=ca(cb[cd]);ce!=null&&ce.$==1?cc=ce:void 0;cd=cd+1;}return cc;};t.ofSeq=function(ca){var cb,cc;if(ca instanceof a.Array)return ca.slice();else if(ca instanceof S)return t.ofList(ca);else{cb=[];cc=X.Get(ca);try{while(cc.MoveNext())cb.push(cc.Current());return cb;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}}};t.exists=function(ca,cb){var cc,cd,ce,cf;cc=false;cd=0;cf=t.length(cb);while(!cc&&cd<cf)if(ca(cb[cd]))cc=true;else cd=cd+1;return cc;};t.filter=function(ca,cb){var cc,cd,ce;cc=[];for(cd=0,ce=cb.length-1;cd<=ce;cd++)if(ca(cb[cd]))cc.push(cb[cd]);return cc;};t.ofList=function(ca){var cb,cc;cc=[];cb=ca;while(!(cb.$==0)){cc.push(J.head(cb));cb=J.tail(cb);}return cc;};t.concat=function(ca){return a.Array.prototype.concat.apply([],t.ofSeq(ca));};t.tryFindIndex=function(ca,cb){var cc,cd;cc=null;cd=0;while(cd<cb.length&&cc==null){ca(cb[cd])?cc={$:1,$0:cd}:void 0;cd=cd+1;}return cc;};t.foldBack=function(ca,cb,cc){var cd,ce,cf,cg,ch;cd=cc;cf=cb.length;for(cg=1,ch=cf;cg<=ch;cg++)cd=ca(cb[cf-cg],cd);return cd;};t.iter=function(ca,cb){var cc,cd;for(cc=0,cd=cb.length-1;cc<=cd;cc++)ca(cb[cc]);};t.pick=function(ca,cb){var cc;cc=t.tryPick(ca,cb);return cc==null?r.FailWith("KeyNotFoundException"):cc.$0;};t.init=function(ca,cb){var cc,cd,ce;ca<0?r.FailWith("Negative size given."):null;cc=new a.Array(ca);for(cd=0,ce=ca-1;cd<=ce;cd++)cc[cd]=cb(cd);return cc;};t.forall=function(ca,cb){var cc,cd,ce,cf;cc=true;cd=0;cf=t.length(cb);while(cc&&cd<cf)if(ca(cb[cd]))cd=cd+1;else cc=false;return cc;};G.set_AjaxProvider=function(ca){_5.$cctor();_5.AjaxProvider=ca;};G.AjaxProvider=function(){_5.$cctor();return _5.AjaxProvider;};G.makePayload=function(ca){return b9.stringify(ca);};G.makeHeaders=function(ca){return{"content-type":"application/json","x-websharper-rpc":ca};};G.EndPoint=function(){_5.$cctor();return _5.EndPoint;};G.ajax=function(ca,cb,cc,cd,ce,cf,cg){var ch,ci,cj;ch=new a.XMLHttpRequest();ci=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");ch.open("POST",cb,ca);if(ca==true)ch.withCredentials=true;for(var cl in cc)ch.setRequestHeader(cl,cc[cl]);if(ci)ch.setRequestHeader("x-csrftoken",ci);function ck(){var cm;if(ch.status==200)ce(ch.responseText);else if(cg&&ch.status==403&&ch.responseText=="CSRF")cg();else{cm="Response status is not 200: ";cf(new bl(cm+ch.status));}}if("onload"in ch)ch.onload=ch.onerror=ch.onabort=ck;else ch.onreadystatechange=function(){if(ch.readyState==4)ck();};ch.send(cd);};I.GetFields=function(ca){var cb,cc;cb=[];for(var cd in ca)cb.push([cd,ca[cd]]);return cb;};I.GetFieldValues=function(ca){var cb,cc;cb=[];for(var cd in ca)cb.push(ca[cd]);return cb;};J.ofArray=function(ca){var cb,cc,cd;cb=S.Empty;for(cc=t.length(ca)-1,cd=0;cc>=cd;cc--)cb=new S({$:1,$0:t.get(ca,cc),$1:cb});return cb;};J.ofSeq=function(ca){var cb,cc,cd,ce,cf,cg;if(ca instanceof S)return ca;else if(ca instanceof a.Array)return J.ofArray(ca);else{cb=X.Get(ca);try{cd=cb.MoveNext();if(!cd)cc=S.Empty;else{cf=new S({$:1});ce=cf;while(cd){ce.$0=cb.Current();cb.MoveNext()?ce=(cg=new S({$:1}),ce.$1=cg,cg):cd=false;}ce.$1=S.Empty;cc=cf;}return cc;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}}};J.head=function(ca){return ca.$==1?ca.$0:J.listEmpty();};J.tail=function(ca){return ca.$==1?ca.$1:J.listEmpty();};J.listEmpty=function(){return r.FailWith("The input list was empty.");};L.newPojo=function(ca){var cb,cc;function cd(cf,cg){return function(ch){return L.addProp(cf,cg,ch);};}function ce(cf){}cb={};v.iter((cc=function(cf){return(function(cg){return cd(cg[0],cg[1]);}(cf))(cb);},function(cf){return ce(cc(cf));}),ca);return cb;};L.addProp=function(ca,cb,cc){cc[ca]=cb;return cc;};P.p=function(ca){return ca.$==6?"WasmWorkerFinished":ca.$==5?"WasmWorkerLoaded":ca.$==4?"WasmWorkerLoading":ca.$==3?"WasmFinished":ca.$==2?"WasmLoaded":ca.$==1?"WasmLoading":"WasmNotLoaded";};P.p$1=function(ca){return ca==null?"null":"Some "+Q.p(ca.$0);};P.p$2=function(ca){return ca.$==6?"FieldNotFound ("+s.prettyPrint(ca.$0)+", "+s.prettyPrint(ca.$1)+")":ca.$==5?"ConstructorNotFound ("+s.prettyPrint(ca.$0)+", "+s.prettyPrint(ca.$1)+", "+s.printList(s.prettyPrint,ca.$2)+")":ca.$==4?"MethodNameNotFound ("+s.prettyPrint(ca.$0)+", "+s.prettyPrint(ca.$1)+", "+s.printList(s.prettyPrint,ca.$2)+")":ca.$==3?"MethodNotFound ("+s.prettyPrint(ca.$0)+", "+s.prettyPrint(ca.$1)+", "+s.printList(s.prettyPrint,ca.$2)+")":ca.$==2?"TypeNotFound "+s.prettyPrint(ca.$0):ca.$==1?"NameConflict ("+s.prettyPrint(ca.$0)+", "+s.prettyPrint(ca.$1)+")":"SourceError "+s.prettyPrint(ca.$0);};P.p$3=function(ca){return ca.$==1?"PublicProxy "+s.prettyPrint(ca.$0):"SourceWarning "+s.prettyPrint(ca.$0);};Q.p=function(ca){return"{"+("FileName = "+s.prettyPrint(ca.FileName))+"; "+("Start = "+("("+s.prettyPrint(ca.Start[0])+", "+s.prettyPrint(ca.Start[1])+")"))+"; "+("End = "+("("+s.prettyPrint(ca.End[0])+", "+s.prettyPrint(ca.End[1])+")"))+"}";};R=G.AjaxRemotingProvider=b8.Class({AsyncBase:function(ca,cb){var cc,cd;cc=this;cd=null;return _6.Delay(function(){var ce,cf;ce=G.makeHeaders(ca);cf=G.makePayload(cb);return _6.Bind(_6.GetCT(),function(cg){return _6.FromContinuations(function(ch,ci,cj){var ck,cl,cm;function cn(co){return ck[0]?(ck[0]=false,cj(new bm.New(cg))):null;}ck=[true];cl=_6.Register(cg,function(){cn();});cm=cc.get_EndPoint();return G.AjaxProvider().Async(cm,ce,cf,function(co){if(ck[0]){ck[0]=false;cl.Dispose();ch(bF.Activate(b9.parse(co)));}},function(co){if(ck[0]){ck[0]=false;cl.Dispose();ci(co);}});});});});},get_EndPoint:function(){return G.EndPoint();},Async:function(ca,cb){return this.AsyncBase(ca,cb);}},l,R);R.New=b8.Ctor(function(){l.New.call(this);},R);S=J.T=b8.Class({GetEnumerator:function(){return new Y.New(this,null,function(ca){var cb;cb=ca.s;return cb.$==0?false:(ca.c=cb.$0,ca.s=cb.$1,true);},void 0);},GetEnumerator0:function(){return X.Get(this);}},null,S);S.Empty=new S({$:0});T.Map=function(ca,cb){return T.CreateLazy(function(){return _8.Map(ca,cb());});};T.CreateLazy=function(ca){var cb;cb={c:null,o:ca};return function(){var cc,cd;cc=cb.c;return cc===null?(cc=cb.o(),cb.c=cc,(cd=cc.s,cd!=null&&cd.$==0)?cb.o=null:_8.WhenObsoleteRun(cc,function(){cb.c=null;}),cc):cc;};};T.Const=function(ca){var cb;cb=_8.New({$:0,$0:ca});return function(){return cb;};};T.MapSeqCached=function(ca,cb){return T.MapSeqCachedBy(a.id,ca,cb);};T.MapSeqCachedBy=function(ca,cb,cc){var cd;cd=[new F.New$5()];return T.Map(function(ce){var cf,cg,ch;cf=cd[0];cg=new F.New$5();ch=bz.mapInPlace(function(ci){var cj,ck;cj=ca(ci);ck=cf.ContainsKey(cj)?cf.get_Item(cj):cb(ci);cg.set_Item(cj,ck);return ck;},t.ofSeq(ce));cd[0]=cg;return ch;},cc);};T.Sink=function(ca,cb){function cc(){_8.WhenRun(cb(),ca,function(){_6.scheduler().Fork(cc);});}_6.scheduler().Fork(cc);};T.Map2Unit=function(ca,cb){return T.CreateLazy(function(){return _8.Map2Unit(ca(),cb());});};T.Bind=function(ca,cb){return T.Join(T.Map(ca,cb));};T.Join=function(ca){return T.CreateLazy(function(){return _8.Join(ca());});};V=U.attr=b8.Class({},l,V);X.Get=function(ca){return ca instanceof a.Array?X.ArrayEnumerator(ca):D.Equals(typeof ca,"string")?X.StringEnumerator(ca):ca.GetEnumerator();};X.ArrayEnumerator=function(ca){return new Y.New(0,null,function(cb){var cc;cc=cb.s;return cc<t.length(ca)&&(cb.c=t.get(ca,cc),cb.s=cc+1,true);},void 0);};X.StringEnumerator=function(ca){return new Y.New(0,null,function(cb){var cc;cc=cb.s;return cc<ca.length&&(cb.c=ca[cc],cb.s=cc+1,true);},void 0);};X.Get0=function(ca){return ca instanceof a.Array?X.ArrayEnumerator(ca):D.Equals(typeof ca,"string")?X.StringEnumerator(ca):"GetEnumerator0"in ca?ca.GetEnumerator0():ca.GetEnumerator();};Y=X.T=b8.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},l,Y);Y.New=b8.Ctor(function(ca,cb,cc,cd){l.New.call(this);this.s=ca;this.c=cb;this.n=cc;this.d=cd;},Y);Z.TryParseInt32=function(ca,cb){return Z.TryParse(ca,-2147483648,2147483647,cb);};Z.TryParseInt64=function(ca,cb){return Z.TryParse(ca,-9223372036854775808,9223372036854775807,cb);};_1.TryParse=function(ca,cb){try{cb.set(_1.Parse(ca));return true;}catch(cc){return false;}};_1.Parse=function(ca){var cb,cc,cd;try{return _1.ParseExact(ca,"D");}catch(ce){try{cb=_1.ParseExact(ca,"B");}catch(cf){try{cc=_1.ParseExact(ca,"P");}catch(cg){try{cd=_1.ParseExact(ca,"N");}catch(ch){cd=_1.ParseExact(ca,"X");}cc=cd;}cb=cc;}return cb;}};_1.ParseExact=function(ca,cb){var cc,cd,ce,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function cf(cq){var cr,cs,ct,cu;for(cr=0,cs=35;cr<=cs;cr++){cr===8||(cr===13||(cr===18||cr===23))?cq[cr]!=="-"?_1.ShapeError():void 0:(cu=cq[cr],!("0"<=cu&&cu<="9"||"a"<=cu&&cu<="f")?_1.ShapeError():void 0);}return cq;}cg=cb.toUpperCase();if(cg==="N"){ch=w.Trim(ca).toLowerCase();if(ch.length!==32)_1.ShapeError();for(ci=0,cj=31;ci<=cj;ci++){ck=ch[ci];!("0"<=ck&&ck<="9"||"a"<=ck&&ck<="f")?_1.ShapeError():void 0;}return w.Substring(ch,0,8)+"-"+w.Substring(ch,8,4)+"-"+w.Substring(ch,12,4)+"-"+w.Substring(ch,16,4)+"-"+ch.substring(20);}else if(cg==="D"){cc=w.Trim(ca).toLowerCase();cc.length!==36?_1.ShapeError():void 0;return cf(cc);}else if(cg==="B"){cd=w.Trim(ca).toLowerCase();cd.length!==38||cd[0]!=="{"||cd[17]!=="}"?_1.ShapeError():void 0;return cf(w.Substring(cd,1,36));}else if(cg==="P"){ce=w.Trim(ca).toLowerCase();ce.length!==38||ce[0]!=="("||ce[17]!==")"?_1.ShapeError():void 0;return cf(w.Substring(ce,1,36));}else if(cg==="X"){cl=w.Trim(ca).toLowerCase();if(cl.length!==68)_1.ShapeError();for(cm=0,cn=67;cm<=cn;cm++){switch(cm){case 26:case 0:if(cl[cm]!=="{")_1.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cl[cm]!=="0")_1.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cl[cm]!=="x")_1.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cl[cm]!==",")_1.ShapeError();break;case 67:case 66:if(cl[cm]!=="{")_1.ShapeError();break;default:cp=cl[cm];!("0"<=cp&&cp<="9"||"a"<=cp&&cp<="f")?_1.ShapeError():void 0;break;}}return w.Substring(cl,3,8)+"-"+w.Substring(cl,14,4)+"-"+w.Substring(cl,21,4)+"-"+w.Substring(cl,29,2)+w.Substring(cl,34,2)+"-"+w.Substring(cl,39,2)+w.Substring(cl,44,2)+w.Substring(cl,49,2)+w.Substring(cl,54,2)+w.Substring(cl,59,2)+w.Substring(cl,64,2);}else return _1.FormatError();};_1.ShapeError=function(){throw new bS.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_1.FormatError=function(){throw new bS.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_2=z.Var$1=b8.Class({},l,_2);_2.Create$1=function(ca){return new bc.New(false,_8.New({$:2,$0:ca,$1:[]}),ca);};_3.Create=function(ca){return bf.New(false,ca,_3.forceLazy);};_3.forceLazy=function(){var ca;ca=this.v();this.c=true;this.v=ca;this.f=_3.cachedLazy;return ca;};_3.cachedLazy=function(){return this.v;};v.tryHead=function(ca){var cb;cb=X.Get(ca);try{return cb.MoveNext()?{$:1,$0:cb.Current()}:null;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};v.nonNegative=function(){return r.FailWith("The input must be non-negative.");};v.insufficient=function(){return r.FailWith("The input sequence has an insufficient number of elements.");};_5.$cctor=function(){_5.$cctor=a.ignore;_5.EndPoint="?";_5.AjaxProvider=new bg.New();};_6.FromContinuations=function(ca){return function(cb){var cc;function cd(ce){if(cc[0])r.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cc[0]=true;_6.scheduler().Fork(ce);}}cc=[false];ca(function(ce){cd(function(){cb.k({$:0,$0:ce});});},function(ce){cd(function(){cb.k({$:1,$0:ce});});},function(ce){cd(function(){cb.k({$:2,$0:ce});});});};};_6.Delay=function(ca){return function(cb){try{(ca(null))(cb);}catch(cc){cb.k({$:1,$0:cc});}};};_6.Bind=function(ca,cb){return _6.checkCancel(function(cc){ca(bh.New(function(cd){var ce;if(cd.$==0){ce=cd.$0;_6.scheduler().Fork(function(){try{(cb(ce))(cc);}catch(cf){cc.k({$:1,$0:cf});}});}else _6.scheduler().Fork(function(){cc.k(cd);});},cc.ct));});};_6.Zero=function(){bi.$cctor();return bi.Zero;};_6.Sleep=function(ca){return function(cb){var cc,cd;cc=void 0;cd=void 0;cc=a.setTimeout(function(){cd.Dispose();_6.scheduler().Fork(function(){cb.k({$:0,$0:null});});},ca);cd=_6.Register(cb.ct,function(){a.clearTimeout(cc);_6.scheduler().Fork(function(){_6.cancel(cb);});});};};_6.AwaitTask1=function(ca){return _6.FromContinuations(function(cb,cc,cd){ca.get_Status()===0?ca.Start():void 0;ca.ContinueWith$1(function(ce){return ce.get_IsCanceled()?cd(new bm.New(_6.noneCT())):ce.get_IsFaulted()?cc(ce.get_Exception()):cb(ce.get_Result());},_6.noneCT());});};_6.Return=function(ca){return function(cb){cb.k({$:0,$0:ca});};};_6.Start=function(ca,cb){var cc,cd;cc=(cd=(_6.defCTS())[0],cb==null?cd:cb.$0);_6.scheduler().Fork(function(){if(!cc.c)ca(bh.New(function(ce){if(ce.$==1)_6.UncaughtAsyncError(ce.$0);},cc));});};_6.Combine=function(ca,cb){return _6.Bind(ca,function(){return cb;});};_6.StartAsTask=function(ca,cb){var cc;cc=new bu.New();_6.scheduler().Fork(function(){_6.StartWithContinuations(ca,function(cd){cc.SetResult(cd);},function(cd){cc.SetException$1(cd);},function(){cc.SetCanceled();},cb);});return cc.get_Task();};_6.checkCancel=function(ca){return function(cb){if(cb.ct.c)_6.cancel(cb);else ca(cb);};};_6.Register=function(ca,cb){var cc;return ca===_6.noneCT()?{Dispose:function(){return null;}}:(cc=ca.r.push(cb)-1,{Dispose:function(){return t.set(ca.r,cc,a.ignore);}});};_6.cancel=function(ca){ca.k({$:2,$0:new bm.New(ca.ct)});};_6.defCTS=function(){bi.$cctor();return bi.defCTS;};_6.UncaughtAsyncError=function(ca){b6.log("WebSharper: Uncaught asynchronous exception",ca);};_6.StartWithContinuations=function(ca,cb,cc,cd,ce){var cf,cg;cf=(cg=(_6.defCTS())[0],ce==null?cg:ce.$0);!cf.c?ca(bh.New(function(ch){if(ch.$==1)cc(ch.$0);else if(ch.$==2)cd(ch.$0);else cb(ch.$0);},cf)):void 0;};_6.scheduler=function(){bi.$cctor();return bi.scheduler;};_6.noneCT=function(){bi.$cctor();return bi.noneCT;};_6.GetCT=function(){bi.$cctor();return bi.GetCT;};_6.TryWith=function(ca,cb){return function(cc){ca(bh.New(function(cd){if(cd.$==0)cc.k({$:0,$0:cd.$0});else if(cd.$==1)try{(cb(cd.$0))(cc);}catch(ce){cc.k(cd);}else cc.k(cd);},cc.ct));};};_7=z.Doc=b8.Class({},l,_7);_7.TextNode=function(ca){return _7.Mk({$:5,$0:bo.CreateText(ca)},T.Const());};_7.InputArea=function(ca,cb){return _7.InputInternal("textarea",function(){return v.append(ca,[bp.Value(cb)]);});};_7.Button=function(ca,cb,cc){var cd;cd=_9.Concat(cb);return by.New(_7.Clickable("button",cc),cd,_7.TextNode(ca));};_7.Convert=function(ca,cb){return _7.Flatten(T.MapSeqCached(ca,cb));};_7.TextView=function(ca){var cb;cb=br.CreateTextNode();return _7.Mk({$:4,$0:cb},T.Map(function(cc){br.UpdateTextNode(cb,cc);},ca));};_7.Run=function(ca,cb){br.LinkElement(ca,cb.docNode);_7.RunInPlace(false,ca,cb);};_7.Element=function(ca,cb,cc){var cd,ce;cd=_9.Concat(cb);ce=_7.Concat(cc);return by.New(bo.CreateElement(ca),cd,ce);};_7.Mk=function(ca,cb){return new _7.New(ca,cb);};_7.InputInternal=function(ca,cb){var cc;cc=bo.CreateElement(ca);return by.New(cc,_9.Concat(cb(cc)),_7.get_Empty());};_7.Clickable=function(ca,cb){var cc;cc=bo.CreateElement(ca);cc.addEventListener("click",function(cd){cd.preventDefault();return cb();},false);return cc;};_7.Flatten=function(ca){return _7.EmbedView(T.Map(_7.Concat,ca));};_7.RunInPlace=function(ca,cb,cc){var cd;cd=br.CreateRunState(cb,cc.docNode);T.Sink(bC.get_UseAnimations()||bD.BatchUpdatesEnabled()?bE.StartProcessor(br.PerformAnimatedUpdate(ca,cd,cc.docNode)):function(){br.PerformSyncUpdate(ca,cd,cc.docNode);},cc.updates);};_7.Concat=function(ca){var cb;cb=bz.ofSeqNonCopying(ca);return bz.TreeReduce(_7.get_Empty(),_7.Append,cb);};_7.get_Empty=function(){return _7.Mk(null,T.Const());};_7.EmbedView=function(ca){var cb;cb=br.CreateEmbedNode();return _7.Mk({$:2,$0:cb},T.Map(a.ignore,T.Bind(function(cc){br.UpdateEmbedNode(cb,cc.docNode);return cc.updates;},ca)));};_7.Append=function(ca,cb){return _7.Mk({$:0,$0:ca.docNode,$1:cb.docNode},T.Map2Unit(ca.updates,cb.updates));};_7.New=b8.Ctor(function(ca,cb){l.New.call(this);this.docNode=ca;this.updates=cb;},_7);_8.Map=function(ca,cb){var cc,cd;cc=cb.s;return cc!=null&&cc.$==0?_8.New({$:0,$0:ca(cc.$0)}):(cd=_8.New({$:3,$0:[],$1:[]}),(_8.When(cb,function(ce){_8.MarkDone(cd,cb,ca(ce));},cd),cd));};_8.WhenObsoleteRun=function(ca,cb){var cc;cc=ca.s;cc==null?cb():cc!=null&&cc.$==2?cc.$1.push(cb):cc!=null&&cc.$==3?cc.$1.push(cb):void 0;};_8.When=function(ca,cb,cc){var cd;cd=ca.s;cd==null?_8.Obsolete(cc):cd!=null&&cd.$==2?(_8.EnqueueSafe(cd.$1,cc),cb(cd.$0)):cd!=null&&cd.$==3?(cd.$0.push(cb),_8.EnqueueSafe(cd.$1,cc)):cb(cd.$0);};_8.MarkDone=function(ca,cb,cc){var cd;if(cd=cb.s,cd!=null&&cd.$==0)_8.MarkForever(ca,cc);else _8.MarkReady(ca,cc);};_8.EnqueueSafe=function(ca,cb){var cc,cd,ce,cf;ca.push(cb);if(ca.length%20===0){cc=ca.slice(0);bW.Clear(ca);for(cd=0,ce=t.length(cc)-1;cd<=ce;cd++){cf=t.get(cc,cd);typeof cf=="object"?function(cg){if(cg.s)ca.push(cg);}(cf):function(cg){ca.push(cg);}(cf);}}else void 0;};_8.MarkForever=function(ca,cb){var cc,cd,ce,cf;cc=ca.s;if(cc!=null&&cc.$==3){ca.s={$:0,$0:cb};cd=cc.$0;for(ce=0,cf=t.length(cd)-1;ce<=cf;ce++)(t.get(cd,ce))(cb);}else void 0;};_8.MarkReady=function(ca,cb){var cc,cd,ce,cf;cc=ca.s;if(cc!=null&&cc.$==3){ca.s={$:2,$0:cb,$1:cc.$1};cd=cc.$0;for(ce=0,cf=t.length(cd)-1;ce<=cf;ce++)(t.get(cd,ce))(cb);}else void 0;};_8.WhenRun=function(ca,cb,cc){var cd;cd=ca.s;cd==null?cc():cd!=null&&cd.$==2?(cd.$1.push(cc),cb(cd.$0)):cd!=null&&cd.$==3?(cd.$0.push(cb),cd.$1.push(cc)):cb(cd.$0);};_8.Copy=function(ca){var cb,cc,cd;cb=ca.s;return cb==null?ca:cb!=null&&cb.$==2?(cc=_8.New({$:2,$0:cb.$0,$1:[]}),(_8.WhenObsolete(ca,cc),cc)):cb!=null&&cb.$==3?(cd=_8.New({$:3,$0:[],$1:[]}),(_8.When(ca,function(ce){_8.MarkDone(cd,ca,ce);},cd),cd)):ca;};_8.Map2Unit=function(ca,cb){var cc,cd,ce;function cf(){var cg,ch,ci;if(!(cg=ce.s,cg!=null&&cg.$==0||cg!=null&&cg.$==2)){ch=_8.ValueAndForever(ca);ci=_8.ValueAndForever(cb);ch!=null&&ch.$==1?ci!=null&&ci.$==1?ch.$0[1]&&ci.$0[1]?_8.MarkForever(ce,null):_8.MarkReady(ce,null):void 0:void 0;}}cc=ca.s;cd=cb.s;return cc!=null&&cc.$==0?cd!=null&&cd.$==0?_8.New({$:0,$0:null}):cb:cd!=null&&cd.$==0?ca:(ce=_8.New({$:3,$0:[],$1:[]}),(_8.When(ca,cf,ce),_8.When(cb,cf,ce),ce));};_8.WhenObsolete=function(ca,cb){var cc;cc=ca.s;cc==null?_8.Obsolete(cb):cc!=null&&cc.$==2?_8.EnqueueSafe(cc.$1,cb):cc!=null&&cc.$==3?_8.EnqueueSafe(cc.$1,cb):void 0;};_8.ValueAndForever=function(ca){var cb;cb=ca.s;return cb!=null&&cb.$==0?{$:1,$0:[cb.$0,true]}:cb!=null&&cb.$==2?{$:1,$0:[cb.$0,false]}:null;};_8.Join=function(ca){var cb;cb=_8.New({$:3,$0:[],$1:[]});_8.When(ca,function(cc){var cd;cd=cc();_8.When(cd,function(ce){var cf,cg;if((cf=cd.s,cf!=null&&cf.$==0)&&(cg=ca.s,cg!=null&&cg.$==0))_8.MarkForever(cb,ce);else _8.MarkReady(cb,ce);},cb);},cb);return cb;};_9=z.AttrProxy=b8.Class({},null,_9);_9.Create=function(ca,cb){return bq.Static(function(cc){bo.SetAttr(cc,ca,cb);});};_9.Concat=function(ca){var cb;cb=bz.ofSeqNonCopying(ca);return bz.TreeReduce(bq.EmptyAttr(),_9.Append,cb);};_9.Append=function(ca,cb){return bq.AppendTree(ca,cb);};$.LoadLocalTemplates=function(ca){!$.LocalTemplatesLoaded()?($.set_LocalTemplatesLoaded(true),$.LoadNestedTemplates(self.document.body,"")):void 0;$.LoadedTemplates().set_Item(ca,$.LoadedTemplateFile(""));};$.LocalTemplatesLoaded=function(){bA.$cctor();return bA.LocalTemplatesLoaded;};$.set_LocalTemplatesLoaded=function(ca){bA.$cctor();bA.LocalTemplatesLoaded=ca;};$.LoadNestedTemplates=function(ca,cb){var cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq;function cc(cr){var cs,ct;if(!cd.ContainsKey(cr)){cs=(ct=null,[ce.TryGetValue(cr,{get:function(){return ct;},set:function(cu){ct=cu;}}),ct]);cs[0]?(cq.Add(cr),ce.Remove(cr),$.PrepareTemplateStrict(cb,{$:1,$0:cr},cs[1][0],{$:1,$0:cs[1][1]},{$:1,$0:cc})):b6.warn(cq.Contains(cr)?"Encountered loop when instantiating "+cr:"Local template does not exist: "+cr);}}cd=$.LoadedTemplateFile(cb);ce=new F.New$5();cf=ca.querySelectorAll("[ws-template]");for(cg=0,ch=cf.length-1;cg<=ch;cg++){ci=cf[cg];cj=ci.getAttribute("ws-template").toLowerCase();ci.removeAttribute("ws-template");ce.set_Item(cj,[[ci],$.FakeRootSingle(ci)]);}ck=ca.querySelectorAll("[ws-children-template]");for(cl=0,cm=ck.length-1;cl<=cm;cl++){cn=ck[cl];co=cn.getAttribute("ws-children-template").toLowerCase();cn.removeAttribute("ws-children-template");ce.set_Item(co,(cp=bo.ChildrenArray(cn),[cp,$.FakeRoot(cp)]));}cq=new bB.New$3();while(ce.count>0)cc(v.head(ce.get_Keys()));};$.LoadedTemplates=function(){bA.$cctor();return bA.LoadedTemplates;};$.LoadedTemplateFile=function(ca){var cb,cc,cd;cb=(cc=null,[$.LoadedTemplates().TryGetValue(ca,{get:function(){return cc;},set:function(ce){cc=ce;}}),cc]);return cb[0]?cb[1]:(cd=new F.New$5(),($.LoadedTemplates().set_Item(ca,cd),cd));};$.FakeRootSingle=function(ca){var cb,cc,cd;ca.removeAttribute("ws-template");cb=ca.getAttribute("ws-replace");cb===null?void 0:(ca.removeAttribute("ws-replace"),cc=ca.parentNode,D.Equals(cc,null)?void 0:(cd=self.document.createElement(ca.tagName),cd.setAttribute("ws-replace",cb),cc.replaceChild(cd,ca)));return $.FakeRoot([ca]);};$.FakeRoot=function(ca){var cb,cc,cd;cb=self.document.createElement("div");for(cc=0,cd=ca.length-1;cc<=cd;cc++)cb.appendChild(t.get(ca,cc));return cb;};$.PrepareTemplateStrict=function(ca,cb,cc,cd,ce){var cf,cg;function ch(cm,cn){var co,cp,cq,cr,cs,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;function ct(cP){}while(true)switch(cm){case 0:if(cn!==null){co=cn.nextSibling;if(D.Equals(cn.nodeType,W.TEXT_NODE))bL.convertTextNode(cn);else if(D.Equals(cn.nodeType,W.ELEMENT_NODE))cj(cn);cn=co;}else return null;break;case 1:cu=u.string(cn.nodeName,{$:1,$0:3},null).toLowerCase();cv=(cp=cu.indexOf("."),cp===-1?[ca,cu]:[u.string(cu,null,{$:1,$0:cp-1}),u.string(cu,{$:1,$0:cp+1},null)]);cw=cv[1];cx=cv[0];if(cx!==""&&!$.LoadedTemplates().ContainsKey(cx))return bL.failNotLoaded(cw);else{if(cx===""&&ce!=null)ce.$0(cw);cy=$.LoadedTemplates().get_Item(cx);if(!cy.ContainsKey(cw))return bL.failNotLoaded(cw);else{cz=cy.get_Item(cw);cA=cz.cloneNode(true);cB=new bB.New$3();cC=new F.New$5();cD=cn.attributes;for(cE=0,cF=cD.length-1;cE<=cF;cE++){cG=cD.item(cE).name.toLowerCase();cC.set_Item(cG,(cH=cD.item(cE).nodeValue,cH===""?cG:cH.toLowerCase()));!cB.Add(cG)?b6.warn("Hole mapped twice",cG):void 0;}for(cI=0,cJ=cn.childNodes.length-1;cI<=cJ;cI++){cK=cn.childNodes[cI];D.Equals(cK.nodeType,W.ELEMENT_NODE)?!cB.Add(cK.nodeName.toLowerCase())?b6.warn("Hole filled twice",cw):void 0:void 0;}cL=cn.childNodes.length===1&&D.Equals(cn.firstChild.nodeType,W.TEXT_NODE);if(cL){cr=bL.fillTextHole(cA,cn.firstChild.textContent,cw);((function(cP){return function(cQ){if(cQ!=null)cP(cQ.$0);};}((cs=function(cP){return function(cQ){return cP.Add(cQ);};}(cB),function(cP){return ct(cs(cP));})))(cr));}bL.removeHolesExcept(cA,cB);if(!cL){for(cM=0,cN=cn.childNodes.length-1;cM<=cN;cM++){cO=cn.childNodes[cM];D.Equals(cO.nodeType,W.ELEMENT_NODE)?cO.hasAttributes()?bL.fillInstanceAttrs(cA,cO):ci(cA,cO):void 0;}}bL.mapHoles(cA,cC);bL.fill(cA,cn.parentNode,cn);cn.parentNode.removeChild(cn);return;}}break;}}function ci(cm,cn){var co,cq,cr;function cp(cs,ct){var cu,cv,cw;if(cq==="title"&&cn.hasChildNodes()){cu=b_.parseHTML(cn.textContent);cn.removeChild(cn.firstChild);for(cv=0,cw=cu.length-1;cv<=cw;cv++)cn.appendChild(t.get(cu,cv));}else null;cj(cn);return bL.fill(cn,cs,ct);}cq=cn.nodeName.toLowerCase();bo.IterSelector(cm,"[ws-attr-holes]",function(cs){var ct,cu,cv,cw,cx;ct=w.SplitChars(cs.getAttribute("ws-attr-holes"),[" "],1);for(cu=0,cv=ct.length-1;cu<=cv;cu++){cw=t.get(ct,cu);cs.setAttribute(cw,(cx=new a.RegExp("\\${"+cq+"}","ig"),cs.getAttribute(cw).replace(cx,cn.textContent)));}});cr=cm.querySelector("[ws-hole="+cq+"]");if(D.Equals(cr,null)){co=cm.querySelector("[ws-replace="+cq+"]");return D.Equals(co,null)?null:(cp(co.parentNode,co),void co.parentNode.removeChild(co));}else{while(cr.hasChildNodes())cr.removeChild(cr.lastChild);cr.removeAttribute("ws-hole");return cp(cr,null);}}function cj(cm){if(w.StartsWith(cm.nodeName.toLowerCase(),"ws-"))cl(cm);else{bL.convertAttrs(cm);ck(cm.firstChild);}}function ck(cm){return ch(0,cm);}function cl(cm){return ch(1,cm);}cf=cd==null?$.FakeRoot(cc):cd.$0;cg=(cb==null?"":cb.$0).toLowerCase();$.LoadedTemplateFile(ca).set_Item(cg,cf);t.length(cc)>0?(function(cm){var cn,co,cp,cq;while(true){cn=cm.querySelector("[ws-template]");if(D.Equals(cn,null)){co=cm.querySelector("[ws-children-template]");if(D.Equals(co,null))return null;else{cp=co.getAttribute("ws-children-template");co.removeAttribute("ws-children-template");$.PrepareTemplateStrict(ca,{$:1,$0:cp},bo.ChildrenArray(co),null,null);cm=cm;}}else{cq=cn.getAttribute("ws-template");($.PrepareSingleTemplate(ca,{$:1,$0:cq},cn))(null);cm=cm;}}}(cf),ck(t.get(cc,0))):void 0;};$.PrepareSingleTemplate=function(ca,cb,cc){var cd,ce,cf;cd=$.FakeRootSingle(cc);ce=[cc];cf={$:1,$0:cd};return function(cg){$.PrepareTemplateStrict(ca,cb,ce,cf,cg);};};$.TextHoleRE=function(){bA.$cctor();return bA.TextHoleRE;};bb.TryParse=function(ca){var cb;cb=b$.parse(ca);return a.isNaN(cb)?null:{$:1,$0:cb};};Z.TryParse=function(ca,cb,cc,cd){var ce,cf;ce=+ca;cf=ce===ce-ce%1&&ce>=cb&&ce<=cc;cf?cd.set(ce):void 0;return cf;};bc=z.ConcreteVar=b8.Class({Set:function(ca){if(this.isConst)(function(cb){return cb("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cb){b6.log(cb);}));else{_8.Obsolete(this.snap);this.current=ca;this.snap=_8.New({$:2,$0:ca,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(ca){var cb;cb=ca(this.Get());cb!=null&&cb.$==1?this.Set(cb.$0):void 0;}},A,bc);bc.New=b8.Ctor(function(ca,cb,cc){var cd;cd=this;A.New.call(this);this.isConst=ca;this.current=cc;this.snap=cb;this.view=function(){return cd.snap;};this.id=bt.Int();},bc);bd.alreadyAdded=function(){return r.FailWith("An item with the same key has already been added.");};bd.notPresent=function(){return r.FailWith("The given key was not present in the dictionary.");};bf.New=function(ca,cb,cc){return{c:ca,v:cb,f:cc};};bg=G.XhrProvider=b8.Class({Async:function(ca,cb,cc,cd,ce){G.ajax(true,ca,cb,cc,cd,ce,function(){G.ajax(true,ca,cb,cc,cd,ce,void 0);});}},l,bg);bg.New=b8.Ctor(function(){l.New.call(this);},bg);bh.New=function(ca,cb){return{k:ca,ct:cb};};bi.$cctor=function(){bi.$cctor=a.ignore;bi.noneCT=bn.New(false,[]);bi.scheduler=new bv.New();bi.defCTS=[new bw.New()];bi.Zero=_6.Return();bi.GetCT=function(ca){ca.k({$:0,$0:ca.ct});};};bj=k.Task=b8.Class({get_Status:function(){return this.status;},Start:function(){var ca;ca=this;this.status===0?(this.status=2,_6.scheduler().Fork(function(){var cb;ca.status=3;try{ca.Execute();ca.status=5;}catch(cc){cc instanceof bm&&(D.Equals(cc.ct,ca.token)&&(cb=cc,true))?(b6.log("Task cancellation caught:",cb),ca.exc=new bx.New$3([cb]),ca.status=6):(b6.log("Task error caught:",cc),ca.exc=new bx.New$3([cc]),ca.status=7);}ca.RunContinuations();})):r.InvalidOp("Task not in initial state");},get_IsCanceled:function(){return this.status===6;},get_IsFaulted:function(){return this.status===7;},get_Exception:function(){return this.exc;},Execute:function(){this.action();},RunContinuations:function(){var ca,cb,cc;ca=this.continuations;for(cb=0,cc=ca.length-1;cb<=cc;cb++)t.get(ca,cb).StartContinuation();},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},StartContinuation:function(){var ca;ca=this;this.status===1?(this.status=2,_6.scheduler().Fork(function(){if(ca.status===2){ca.status=3;try{ca.Execute();ca.status=5;}catch(cb){ca.exc=new bx.New$3([cb]);ca.status=7;}ca.RunContinuations();}})):void 0;},ContinueWith$1:function(ca,cb){var cc,cd;cc=this;cd=new bj.New$4(function(){return ca(cc);},cb,1,null);this.get_IsCompleted()?cd.StartContinuation():this.continuations.push(cd);return cd;}},l,bj);bj.New$4=b8.Ctor(function(ca,cb,cc,cd){l.New.call(this);this.action=ca;this.token=cb;this.status=cc;this.continuations=[];this.exc=cd;},bj);bk=k.Task1=b8.Class({get_Result:function(){var ca;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return r.InvalidOp("Task has not been completed, has no Result");}},Execute:function(){this.result=this.func();}},bj,bk);bk.New$4=b8.Ctor(function(ca,cb,cc,cd,ce){bj.New$4.call(this,null,cb,cc,cd);this.func=ca;this.result=ce;},bk);bm=k.OperationCanceledException=b8.Class({},bl,bm);bm.New=b8.Ctor(function(ca){bm.New$1.call(this,"The operation was canceled.",null,ca);},bm);bm.New$1=b8.Ctor(function(ca,cb,cc){this.message=ca;this.inner=cb;_4.setPrototypeOf(this,bm.prototype);this.ct=cc;},bm);bn.New=function(ca,cb){return{c:ca,r:cb};};bo.CreateText=function(ca){return bo.Doc().createTextNode(ca);};bo.SetAttr=function(ca,cb,cc){ca.setAttribute(cb,cc);};bo.CreateElement=function(ca){return bo.Doc().createElement(ca);};bo.Doc=function(){bJ.$cctor();return bJ.Doc;};bo.ChildrenArray=function(ca){var cb,cc,cd;cb=[];for(cc=0,cd=ca.childNodes.length-1;cc<=cd;cc++)cb.push(ca.childNodes[cc]);return cb;};bo.IterSelector=function(ca,cb,cc){var cd,ce,cf;cd=ca.querySelectorAll(cb);for(ce=0,cf=cd.length-1;ce<=cf;ce++)cc(cd[ce]);};bo.InsertAt=function(ca,cb,cc){var cd;if(!(cc.parentNode===ca&&cb===(cd=cc.nextSibling,D.Equals(cd,null)?null:cd)))ca.insertBefore(cc,cb);};bo.RemoveNode=function(ca,cb){if(cb.parentNode===ca)ca.removeChild(cb);};_8.Obsolete=function(ca){var cb,cc,cd,ce,cf;cc=ca.s;if(cc==null||(cc!=null&&cc.$==2?(cb=cc.$1,false):cc!=null&&cc.$==3?(cb=cc.$1,false):true))void 0;else{ca.s=null;for(cd=0,ce=t.length(cb)-1;cd<=ce;cd++){cf=t.get(cb,cd);typeof cf=="object"?function(cg){_8.Obsolete(cg);}(cf):cf();}}};_8.New=function(ca){return{s:ca};};bp.Value=function(ca){function cb(cc){return{$:1,$0:cc};}return bp.CustomValue(ca,a.id,function(cc){return cb(a.id(cc));});};bp.CustomValue=function(ca,cb,cc){return bp.CustomVar(ca,function(cd,ce){cd.value=cb(ce);},function(cd){return cc(cd.value);});};bp.CustomVar=function(ca,cb,cc){function cd(cf,cg){return ca.UpdateMaybe(function(ch){var ci,cj;ci=cc(cf);return ci!=null&&ci.$==1&&(!D.Equals(ci.$0,ch)&&(cj=[ci,ci.$0],true))?cj[0]:null;});}function ce(cf,cg){var ch,ci;ch=cc(cf);return ch!=null&&ch.$==1&&(D.Equals(ch.$0,cg)&&(ci=ch.$0,true))?null:cb(cf,cg);}return _9.Concat([bp.Handler("change",function(cf){return function(cg){return cd(cf,cg);};}),bp.Handler("input",function(cf){return function(cg){return cd(cf,cg);};}),bp.Handler("keypress",function(cf){return function(cg){return cd(cf,cg);};}),bp.DynamicCustom(function(cf){return function(cg){return ce(cf,cg);};},ca.get_View())]);};bp.Handler=function(ca,cb){return bq.Static(function(cc){cc.addEventListener(ca,function(cd){return(cb(cc))(cd);},false);});};bp.DynamicCustom=function(ca,cb){return bq.Dynamic(cb,ca);};bq.Static=function(ca){return new _9({$:3,$0:ca});};bq.Updates=function(ca){return bz.MapTreeReduce(function(cb){return cb.NChanged();},T.Const(),T.Map2Unit,ca.DynNodes);};bq.AppendTree=function(ca,cb){var cc;return ca===null?cb:cb===null?ca:(cc=new _9({$:2,$0:ca,$1:cb}),(bq.SetFlags(cc,bq.Flags(ca)|bq.Flags(cb)),cc));};bq.EmptyAttr=function(){bX.$cctor();return bX.EmptyAttr;};bq.Insert=function(ca,cb){var cc,cd,ce;function cf(cg){if(!(cg===null))if(cg!=null&&cg.$==1)cc.push(cg.$0);else if(cg!=null&&cg.$==2){cf(cg.$0);cf(cg.$1);}else if(cg!=null&&cg.$==3)cg.$0(ca);else if(cg!=null&&cg.$==4)cd.push(cg.$0);}cc=[];cd=[];cf(cb);ce=cc.slice(0);return bV.New(ca,bq.Flags(cb),ce,cd.length===0?null:{$:1,$0:function(cg){v.iter(function(ch){ch(cg);},cd);}});};bq.SetFlags=function(ca,cb){ca.flags=cb;};bq.Flags=function(ca){return ca!==null&&ca.hasOwnProperty("flags")?ca.flags:0;};bq.HasExitAnim=function(ca){var cb;cb=2;return(ca.DynFlags&cb)===cb;};bq.GetExitAnim=function(ca){return bq.GetAnim(ca,function(cb,cc){return cb.NGetExitAnim(cc);});};bq.HasEnterAnim=function(ca){var cb;cb=1;return(ca.DynFlags&cb)===cb;};bq.GetEnterAnim=function(ca){return bq.GetAnim(ca,function(cb,cc){return cb.NGetEnterAnim(cc);});};bq.HasChangeAnim=function(ca){var cb;cb=4;return(ca.DynFlags&cb)===cb;};bq.GetChangeAnim=function(ca){return bq.GetAnim(ca,function(cb,cc){return cb.NGetChangeAnim(cc);});};bq.Dynamic=function(ca,cb){return new _9({$:1,$0:new b3.New(ca,cb)});};bq.GetAnim=function(ca,cb){return bC.Concat(t.map(function(cc){return cb(cc,ca.DynElem);},ca.DynNodes));};bq.Sync=function(ca,cb){t.iter(function(cc){cc.NSync(ca);},cb.DynNodes);};br.CreateTextNode=function(){return{Text:bo.CreateText(""),Dirty:false,Value:""};};br.UpdateTextNode=function(ca,cb){ca.Value=cb;ca.Dirty=true;};br.LinkElement=function(ca,cb){br.InsertDoc(ca,cb,null);};br.InsertDoc=function(ca,cb,cc){var cd;return cb!=null&&cb.$==1?br.InsertNode(ca,cb.$0.El,cc):cb!=null&&cb.$==2?(cd=cb.$0,(cd.Dirty=false,br.InsertDoc(ca,cd.Current,cc))):cb==null?cc:cb!=null&&cb.$==4?br.InsertNode(ca,cb.$0.Text,cc):cb!=null&&cb.$==5?br.InsertNode(ca,cb.$0,cc):cb!=null&&cb.$==6?t.foldBack(function(ce,cf){return ce==null||ce.constructor===_4?br.InsertDoc(ca,ce,cf):br.InsertNode(ca,ce,cf);},cb.$0.Els,cc):br.InsertDoc(ca,cb.$0,br.InsertDoc(ca,cb.$1,cc));};br.CreateRunState=function(ca,cb){return bO.New(bP.get_Empty(),br.CreateElemNode(ca,bq.EmptyAttr(),cb));};br.PerformAnimatedUpdate=function(ca,cb,cc){var cd;return bC.get_UseAnimations()?(cd=null,_6.Delay(function(){var ce,cf,cg;ce=bP.FindAll(cc);cf=br.ComputeChangeAnim(cb,ce);cg=br.ComputeEnterAnim(cb,ce);return _6.Bind(bC.Play(bC.Append(cf,br.ComputeExitAnim(cb,ce))),function(){return _6.Bind(br.SyncElemNodesNextFrame(ca,cb),function(){return _6.Bind(bC.Play(cg),function(){cb.PreviousNodes=ce;return _6.Return(null);});});});})):br.SyncElemNodesNextFrame(ca,cb);};br.PerformSyncUpdate=function(ca,cb,cc){var cd;cd=bP.FindAll(cc);br.SyncElemNode(ca,cb.Top);cb.PreviousNodes=cd;};br.CreateElemNode=function(ca,cb,cc){var cd;br.LinkElement(ca,cc);cd=bq.Insert(ca,cb);return bH.New(cd,cc,null,ca,bt.Int(),b8.GetOptional(cd.OnAfterRender));};br.CreateEmbedNode=function(){return{Current:null,Dirty:false};};br.UpdateEmbedNode=function(ca,cb){ca.Current=cb;ca.Dirty=true;};br.InsertNode=function(ca,cb,cc){bo.InsertAt(ca,cc,cb);return cb;};br.SyncElemNodesNextFrame=function(ca,cb){function cc(cd){a.requestAnimationFrame(function(){br.SyncElemNode(ca,cb.Top);cd();});}return bD.BatchUpdatesEnabled()?_6.FromContinuations(function(cd,ce,cf){return cc.apply(null,[cd,ce,cf]);}):(br.SyncElemNode(ca,cb.Top),_6.Return(null));};br.ComputeExitAnim=function(ca,cb){return bC.Concat(t.map(function(cc){return bq.GetExitAnim(cc.Attr);},bP.ToArray(bP.Except(cb,bP.Filter(function(cc){return bq.HasExitAnim(cc.Attr);},ca.PreviousNodes)))));};br.ComputeEnterAnim=function(ca,cb){return bC.Concat(t.map(function(cc){return bq.GetEnterAnim(cc.Attr);},bP.ToArray(bP.Except(ca.PreviousNodes,bP.Filter(function(cc){return bq.HasEnterAnim(cc.Attr);},cb)))));};br.ComputeChangeAnim=function(ca,cb){var cc;function cd(ce){return bq.HasChangeAnim(ce.Attr);}cc=function(ce){return bP.Filter(cd,ce);};return bC.Concat(t.map(function(ce){return bq.GetChangeAnim(ce.Attr);},bP.ToArray(bP.Intersect(cc(ca.PreviousNodes),cc(cb)))));};br.SyncElemNode=function(ca,cb){!ca?br.SyncElement(cb):void 0;br.Sync(cb.Children);br.AfterRender(cb);};br.SyncElement=function(ca){function cb(cc){function cd(ce){var cf,cg;return ce!=null&&ce.$==0?cd(ce.$0)||cd(ce.$1):ce!=null&&ce.$==2?(cf=ce.$0,cf.Dirty||cd(cf.Current)):ce!=null&&ce.$==6&&(cg=ce.$0,cg.Dirty||t.exists(cb,cg.Holes));}return cd(cc.Children);}bq.Sync(ca.El,ca.Attr);cb(ca)?br.DoSyncElement(ca):void 0;};br.Sync=function(ca){var cb,cc;if(ca!=null&&ca.$==1)br.SyncElemNode(false,ca.$0);else if(ca!=null&&ca.$==2)br.Sync(ca.$0.Current);else if(ca==null);else if(ca!=null&&ca.$==5);else if(ca!=null&&ca.$==4){cb=ca.$0;cb.Dirty?(cb.Text.nodeValue=cb.Value,cb.Dirty=false):void 0;}else if(ca!=null&&ca.$==6){cc=ca.$0;t.iter(function(cd){br.SyncElemNode(false,cd);},cc.Holes);t.iter(function(cd){bq.Sync(cd[0],cd[1]);},cc.Attrs);br.AfterRender(cc);}else{br.Sync(ca.$0);br.Sync(ca.$1);}};br.AfterRender=function(ca){var cb;cb=b8.GetOptional(ca.Render);cb!=null&&cb.$==1?(cb.$0(ca.El),b8.SetOptional(ca,"Render",null)):void 0;};br.DoSyncElement=function(ca){var cb,cc,cd;function ce(cf,cg){var ch,ci;return cf!=null&&cf.$==1?cf.$0.El:cf!=null&&cf.$==2?(ch=cf.$0,ch.Dirty?(ch.Dirty=false,br.InsertDoc(cb,ch.Current,cg)):ce(ch.Current,cg)):cf==null?cg:cf!=null&&cf.$==4?cf.$0.Text:cf!=null&&cf.$==5?cf.$0:cf!=null&&cf.$==6?(ci=cf.$0,(ci.Dirty?ci.Dirty=false:void 0,t.foldBack(function(cj,ck){return cj==null||cj.constructor===_4?ce(cj,ck):cj;},ci.Els,cg))):ce(cf.$0,ce(cf.$1,cg));}cb=ca.El;b4.Iter((cc=ca.El,function(cf){bo.RemoveNode(cc,cf);}),b4.Except(b4.DocChildren(ca),b4.Children(ca.El,b8.GetOptional(ca.Delimiters))));ce(ca.Children,(cd=b8.GetOptional(ca.Delimiters),cd!=null&&cd.$==1?cd.$0[1]:null));};bt.Int=function(){bt.set_counter(bt.counter()+1);return bt.counter();};bt.set_counter=function(ca){bT.$cctor();bT.counter=ca;};bt.counter=function(){bT.$cctor();return bT.counter;};bu=k.TaskCompletionSource=b8.Class({SetResult:function(ca){this.task.get_IsCompleted()?r.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=ca;this.task.RunContinuations();},SetException$1:function(ca){this.task.get_IsCompleted()?r.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new bx.New$3([ca]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?r.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},l,bu);bu.New=b8.Ctor(function(){l.New.call(this);this.task=new bk.New$4(null,_6.noneCT(),1,null,void 0);},bu);bv=_6.Scheduler=b8.Class({Fork:function(ca){var cb;cb=this;this.robin.push(ca);this.idle?(this.idle=false,a.setTimeout(function(){cb.tick();},0)):void 0;},tick:function(){var ca,cb,cc;cb=this;cc=b$.now();ca=true;while(ca)if(this.robin.length===0){this.idle=true;ca=false;}else{(this.robin.shift())();b$.now()-cc>40?(a.setTimeout(function(){cb.tick();},0),ca=false):void 0;}}},l,bv);bv.New=b8.Ctor(function(){l.New.call(this);this.idle=true;this.robin=[];},bv);bw=k.CancellationTokenSource=b8.Class({},l,bw);bw.New=b8.Ctor(function(){l.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bw);bx=k.AggregateException=b8.Class({},bl,bx);bx.New$3=b8.Ctor(function(ca){bx.New$4.call(this,"One or more errors occurred.",ca);},bx);bx.New$4=b8.Ctor(function(ca,cb){this.message=ca;_4.setPrototypeOf(this,bx.prototype);this.innerExceptions=cb;},bx);T=z.View=b8.Class({},null,T);by=z.Elt=b8.Class({},_7,by);by.New=function(ca,cb,cc){var cd,ce;cd=br.CreateElemNode(ca,cb,cc.docNode);ce=bK.Create(cc.updates);return new by.New$1({$:1,$0:cd},T.Map2Unit(bq.Updates(cd.Attr),ce.v),ca,ce);};by.New$1=b8.Ctor(function(ca,cb,cc,cd){_7.New.call(this,ca,cb);this.docNode$1=ca;this.updates$1=cb;this.elt=cc;this.rvUpdates=cd;},by);bz.ofSeqNonCopying=function(ca){var cb,cc;if(ca instanceof a.Array)return ca;else if(ca instanceof S)return t.ofList(ca);else if(ca===null)return[];else{cb=[];cc=X.Get(ca);try{while(cc.MoveNext())cb.push(cc.Current());return cb;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}}};bz.TreeReduce=function(ca,cb,cc){var cd;function ce(cf,cg){var ch,ci;return cg<=0?ca:cg===1&&(cf>=0&&cf<cd)?t.get(cc,cf):(ci=cg/2>>0,cb(ce(cf,ci),ce(cf+ci,cg-ci)));}cd=t.length(cc);return ce(0,cd);};bz.mapInPlace=function(ca,cb){var cc,cd;for(cc=0,cd=cb.length-1;cc<=cd;cc++)cb[cc]=ca(cb[cc]);return cb;};bz.MapTreeReduce=function(ca,cb,cc,cd){var ce;function cf(cg,ch){var ci,cj;return ch<=0?cb:ch===1&&(cg>=0&&cg<ce)?ca(t.get(cd,cg)):(cj=ch/2>>0,cc(cf(cg,cj),cf(cg+cj,ch-cj)));}ce=t.length(cd);return cf(0,ce);};bA.$cctor=function(){bA.$cctor=a.ignore;bA.LoadedTemplates=new F.New$5();bA.LocalTemplatesLoaded=false;bA.TextHoleRE="\\${([^}]+)}";};bB=E.HashSet=b8.Class({Add:function(ca){return this.add(ca);},Contains:function(ca){var cb;cb=this.data[this.hash(ca)];return cb==null?false:this.arrContains(ca,cb);},add:function(ca){var cb,cc;cb=this.hash(ca);cc=this.data[cb];return cc==null?(this.data[cb]=[ca],this.count=this.count+1,true):this.arrContains(ca,cc)?false:(cc.push(ca),this.count=this.count+1,true);},arrContains:function(ca,cb){var cc,cd,ce,cf;cc=true;cd=0;cf=cb.length;while(cc&&cd<cf)if(this.equals.apply(null,[cb[cd],ca]))cc=false;else cd=cd+1;return!cc;},ExceptWith:function(ca){var cb;cb=X.Get(ca);try{while(cb.MoveNext())this.Remove(cb.Current());}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(ca){var cb,cc,cd,ce;cb=0;cc=b2.concat(this.data);for(cd=0,ce=cc.length-1;cd<=ce;cd++)t.set(ca,cd,cc[cd]);},IntersectWith:function(ca){var cb,cc,cd,ce,cf;cb=new bB.New$4(ca,this.equals,this.hash);cc=b2.concat(this.data);for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc[cd];!cb.Contains(cf)?this.Remove(cf):void 0;}},Remove:function(ca){var cb;cb=this.data[this.hash(ca)];return cb==null?false:this.arrRemove(ca,cb)&&(this.count=this.count-1,true);},arrRemove:function(ca,cb){var cc,cd,ce,cf;cc=true;cd=0;cf=cb.length;while(cc&&cd<cf)if(this.equals.apply(null,[cb[cd],ca])){cb.splice.apply(cb,[cd,1]);cc=false;}else cd=cd+1;return!cc;},GetEnumerator:function(){return X.Get(b2.concat(this.data));},GetEnumerator0:function(){return X.Get(b2.concat(this.data));}},l,bB);bB.New$3=b8.Ctor(function(){bB.New$4.call(this,[],D.Equals,D.Hash);},bB);bB.New$4=b8.Ctor(function(ca,cb,cc){var cd;l.New.call(this);this.equals=cb;this.hash=cc;this.data=[];this.count=0;cd=X.Get(ca);try{while(cd.MoveNext())this.add(cd.Current());}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}},bB);bB.New$2=b8.Ctor(function(ca){bB.New$4.call(this,ca,D.Equals,D.Hash);},bB);bC.get_UseAnimations=function(){return bQ.UseAnimations();};bC.Play=function(ca){var cb;cb=null;return _6.Delay(function(){return _6.Bind(bC.Run(a.ignore,bQ.Actions(ca)),function(){bQ.Finalize(ca);return _6.Return(null);});});};bC.Append=function(ca,cb){return{$:0,$0:bZ.Append(ca.$0,cb.$0)};};bC.Run=function(ca,cb){var cc;function cd(ce){function cf(cg,ch){var ci;ci=ch-cg;cb.Compute(ci);ca();return ci<=cc?void a.requestAnimationFrame(function(cj){cf(cg,cj);}):ce();}a.requestAnimationFrame(function(cg){cf(cg,cg);});}cc=cb.Duration;return cc===0?_6.Zero():_6.FromContinuations(function(ce,cf,cg){return cd.apply(null,[ce,cf,cg]);});};bC.Concat=function(ca){return{$:0,$0:bZ.Concat(v.map(bQ.List,ca))};};bC.get_Empty=function(){return{$:0,$0:bZ.Empty()};};bD.BatchUpdatesEnabled=function(){bR.$cctor();return bR.BatchUpdatesEnabled;};bE.StartProcessor=function(ca){var cb;function cc(){var cd;cd=null;return _6.Delay(function(){return _6.Bind(ca,function(){var ce;ce=cb[0];return ce===1?(cb[0]=0,_6.Zero()):ce===2?(cb[0]=1,cc()):_6.Zero();});});}cb=[0];return function(){var cd;cd=cb[0];cd===0?(cb[0]=1,_6.Start(cc(),null)):cd===1?cb[0]=2:void 0;};};bF.Activate=function(ca){var cb,cd,ce,cf,cg,ch,ci;function cc(cj){var ck,cl,cm,cn,co;if(D.Equals(cj,null))return cj;else if(typeof cj=="object"){if(cj instanceof a.Array)return bF.shallowMap(cc,cj);else{ck=bF.shallowMap(cc,cj.$V);cl=cj.$T;if(cl===void 0)return ck;else{cm=t.get(cd,cl);if(cm===1)return J.ofArray(ck);else if(cm===2)return self.WebSharper.Decimal.CreateDecimalBits(ck);else{cn=new(t.get(cd,cl))();for(var cp in ck)if(function(cq){cn[cq]=ck[cq];return false;}(cp))break;return cn;}}}}else return cj;}cd=ca?ca.$TYPES:void 0;if(cd===void 0)cb=ca;else{for(ce=0,cf=t.length(cd)-1;ce<=cf;ce++){ci=t.get(cd,ce);switch(!D.Equals(ci,null)&&ci.length===3?t.get(ci,0)==="WebSharper"?t.get(ci,1)==="List"?t.get(ci,2)==="T"?0:(ch=ci,2):(ch=ci,2):(ch=ci,2):!D.Equals(ci,null)&&ci.length===2?t.get(ci,0)==="WebSharper"?t.get(ci,1)==="Decimal"?1:(ch=ci,2):(ch=ci,2):(ch=ci,2)){case 0:cg=1;break;case 1:cg=2;break;case 2:cg=bF.lookup(ch);break;}t.set(cd,ce,cg);}cb=ca.$DATA;}return cc(cb);};bF.shallowMap=function(ca,cb){var cc,cd;if(cb instanceof a.Array)return t.map(ca,cb);else if(typeof cb=="object"){cc={};for(var ce in cb)if(function(cf){cc[cf]=ca(cb[cf]);return false;}(ce))break;return cc;}else return cb;};bF.lookup=function(ca){var cb,cc,cd,ce,cf;cd=t.length(ca);cb=self;cc=0;while(cc<cd){ce=t.get(ca,cc);cf=cb[ce];!D.Equals(typeof cf,void 0)?(cb=cf,cc=cc+1):r.FailWith("Invalid server reply. Failed to find type: "+ce);}return cb;};bG=k.InvalidOperationException=b8.Class({},bl,bG);bG.New=b8.Ctor(function(ca){bG.New$2.call(this,ca,null);},bG);bG.New$2=b8.Ctor(function(ca,cb){this.message=ca;this.inner=cb;_4.setPrototypeOf(this,bG.prototype);},bG);bH=z.DocElemNode=b8.Class({Equals:function(ca){return this.ElKey===ca.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bH);bH.New=function(ca,cb,cc,cd,ce,cf){var cg;return new bH((cg={Attr:ca,Children:cb,El:cd,ElKey:ce},(b8.SetOptional(cg,"Delimiters",cc),b8.SetOptional(cg,"Render",cf),cg)));};bJ.$cctor=function(){bJ.$cctor=a.ignore;bJ.Doc=self.document;};bK=z.Updates=b8.Class({},null,bK);bK.Create=function(ca){var cb;cb=null;cb=bK.New(ca,null,function(){var cc;cc=cb.s;return cc===null?(cc=_8.Copy(cb.c()),cb.s=cc,_8.WhenObsoleteRun(cc,function(){cb.s=null;}),cc):cc;});return cb;};bK.New=function(ca,cb,cc){return new bK({c:ca,s:cb,v:cc});};bL.convertTextNode=function(ca){var cb,cc,cd,ce,cf,cg;cb=null;cc=0;ce=ca.textContent;cf=new a.RegExp($.TextHoleRE(),"g");while(cb=cf.exec(ce),cb!==null){ca.parentNode.insertBefore(self.document.createTextNode(u.string(ce,{$:1,$0:cc},{$:1,$0:cf.lastIndex-t.get(cb,0).length-1})),ca);cc=cf.lastIndex;cg=self.document.createElement("span");cg.setAttribute("ws-replace",t.get(cb,1).toLowerCase());ca.parentNode.insertBefore(cg,ca);}cf.lastIndex=0;ca.textContent=u.string(ce,{$:1,$0:cc},null);};bL.failNotLoaded=function(ca){b6.warn("Instantiating non-loaded template",ca);};bL.fillTextHole=function(ca,cb,cc){var cd;cd=ca.querySelector("[ws-replace]");return D.Equals(cd,null)?(b6.warn("Filling non-existent text hole",cc),null):(cd.parentNode.replaceChild(new a.Text(cb),cd),{$:1,$0:cd.getAttribute("ws-replace")});};bL.removeHolesExcept=function(ca,cb){function cc(cd){bo.IterSelector(ca,"["+cd+"]",function(ce){if(!cb.Contains(ce.getAttribute(cd)))ce.removeAttribute(cd);});}cc("ws-attr");cc("ws-onafterrender");cc("ws-var");bo.IterSelector(ca,"[ws-hole]",function(cd){if(!cb.Contains(cd.getAttribute("ws-hole"))){cd.removeAttribute("ws-hole");while(cd.hasChildNodes())cd.removeChild(cd.lastChild);}});bo.IterSelector(ca,"[ws-replace]",function(cd){if(!cb.Contains(cd.getAttribute("ws-replace")))cd.parentNode.removeChild(cd);});bo.IterSelector(ca,"[ws-on]",function(cd){cd.setAttribute("ws-on",w.concat(" ",t.filter(function(ce){return cb.Contains(t.get(w.SplitChars(ce,[":"],1),1));},w.SplitChars(cd.getAttribute("ws-on"),[" "],1))));});bo.IterSelector(ca,"[ws-attr-holes]",function(cd){var ce,cf,cg,ch,ci;ce=w.SplitChars(cd.getAttribute("ws-attr-holes"),[" "],1);for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=t.get(ce,cf);cd.setAttribute(ch,(ci=new a.RegExp($.TextHoleRE(),"g"),cd.getAttribute(ch).replace(ci,function(cj,ck){return cb.Contains(ck)?cj:"";})));}});};bL.fillInstanceAttrs=function(ca,cb){var cc,cd,ce,cf,cg;bL.convertAttrs(cb);cc=cb.nodeName.toLowerCase();cd=ca.querySelector("[ws-attr="+cc+"]");if(D.Equals(cd,null))b6.warn("Filling non-existent attr hole",cc);else{cd.removeAttribute("ws-attr");for(ce=0,cf=cb.attributes.length-1;ce<=cf;ce++){cg=cb.attributes.item(ce);cg.name==="class"&&cd.hasAttribute("class")?cd.setAttribute("class",cd.getAttribute("class")+" "+cg.nodeValue):cd.setAttribute(cg.name,cg.nodeValue);}}};bL.mapHoles=function(ca,cb){function cc(cd){bo.IterSelector(ca,"["+cd+"]",function(ce){var cf,cg;cf=(cg=null,[cb.TryGetValue(ce.getAttribute(cd).toLowerCase(),{get:function(){return cg;},set:function(ch){cg=ch;}}),cg]);cf[0]?ce.setAttribute(cd,cf[1]):void 0;});}cc("ws-hole");cc("ws-replace");cc("ws-attr");cc("ws-onafterrender");cc("ws-var");bo.IterSelector(ca,"[ws-on]",function(cd){cd.setAttribute("ws-on",w.concat(" ",t.map(function(ce){var cf,cg,ch;cf=w.SplitChars(ce,[":"],1);cg=(ch=null,[cb.TryGetValue(t.get(cf,1),{get:function(){return ch;},set:function(ci){ch=ci;}}),ch]);return cg[0]?t.get(cf,0)+":"+cg[1]:ce;},w.SplitChars(cd.getAttribute("ws-on"),[" "],1))));});bo.IterSelector(ca,"[ws-attr-holes]",function(cd){var ce,cf,cg;ce=w.SplitChars(cd.getAttribute("ws-attr-holes"),[" "],1);for(cf=0,cg=ce.length-1;cf<=cg;cf++)(function(){var ch;function ci(cj,ck){var cl;cl=r.KeyValue(ck);return cj.replace(new a.RegExp("\\${"+cl[0]+"}","ig"),"${"+cl[1]+"}");}ch=t.get(ce,cf);return cd.setAttribute(ch,(((b8.Curried3(v.fold))(ci))(cd.getAttribute(ch)))(cb));}());});};bL.fill=function(ca,cb,cc){while(true)if(ca.hasChildNodes())cc=cb.insertBefore(ca.lastChild,cc);else return null;};bL.convertAttrs=function(ca){var cc,cd,ce,cf,cg,ch,ci,cj;function cb(ck){var cl;cl=ca.getAttribute(ck);cl===null?void 0:ca.setAttribute(ck,cl.toLowerCase());}cc=ca.attributes;cd=[];ce=[];cf=[];for(cg=0,ch=cc.length-1;cg<=ch;cg++){ci=cc.item(cg);w.StartsWith(ci.nodeName,"ws-on")&&ci.nodeName!=="ws-onafterrender"&&ci.nodeName!=="ws-on"?(cd.push(ci.nodeName),ce.push(u.string(ci.nodeName,{$:1,$0:"ws-on".length},null)+":"+ci.nodeValue.toLowerCase())):!w.StartsWith(ci.nodeName,"ws-")&&(new a.RegExp($.TextHoleRE())).test(ci.nodeValue)?(ci.nodeValue=(cj=new a.RegExp($.TextHoleRE(),"g"),ci.nodeValue.replace(cj,function(ck,cl){return"${"+cl.toLowerCase()+"}";})),cf.push(ci.nodeName)):void 0;}!(ce.length==0)?ca.setAttribute("ws-on",w.concat(" ",ce)):void 0;!(cf.length==0)?ca.setAttribute("ws-attr-holes",w.concat(" ",cf)):void 0;cb("ws-hole");cb("ws-replace");cb("ws-attr");cb("ws-onafterrender");cb("ws-var");t.iter(function(ck){ca.removeAttribute(ck);},cd);};bM=E.KeyCollection=b8.Class({GetEnumerator$1:function(){return X.Get(v.map(function(ca){return ca.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},l,bM);bM.New=b8.Ctor(function(ca){l.New.call(this);this.d=ca;},bM);bO.New=function(ca,cb){return{PreviousNodes:ca,Top:cb};};bP.get_Empty=function(){return{$:0,$0:new bB.New$3()};};bP.FindAll=function(ca){var cb;function cc(ce){if(ce!=null&&ce.$==0){cc(ce.$0);cc(ce.$1);}else if(ce!=null&&ce.$==1)cd(ce.$0);else if(ce!=null&&ce.$==2)cc(ce.$0.Current);else if(ce!=null&&ce.$==6)t.iter(cd,ce.$0.Holes);}function cd(ce){cb.push(ce);cc(ce.Children);}cb=[];cc(ca);return{$:0,$0:new bB.New$2(cb)};};bP.Filter=function(ca,cb){return{$:0,$0:b1.Filter(ca,cb.$0)};};bP.Except=function(ca,cb){return{$:0,$0:b1.Except(ca.$0,cb.$0)};};bP.ToArray=function(ca){return b1.ToArray(ca.$0);};bP.Intersect=function(ca,cb){return{$:0,$0:b1.Intersect(ca.$0,cb.$0)};};bQ.UseAnimations=function(){bY.$cctor();return bY.UseAnimations;};bQ.Actions=function(ca){return bQ.ConcatActions(t.choose(function(cb){return cb.$==1?{$:1,$0:cb.$0}:null;},bZ.ToArray(ca.$0)));};bQ.Finalize=function(ca){t.iter(function(cb){if(cb.$==0)cb.$0();},bZ.ToArray(ca.$0));};bQ.ConcatActions=function(ca){var cb,cc,cd,ce;cb=bz.ofSeqNonCopying(ca);cc=t.length(cb);return cc===0?bQ.Const():cc===1?t.get(cb,0):(cd=v.max(v.map(function(cf){return cf.Duration;},cb)),(ce=t.map(function(cf){return bQ.Prolong(cd,cf);},cb),bQ.Def(cd,function(cf){t.iter(function(cg){cg.Compute(cf);},ce);})));};bQ.List=function(ca){return ca.$0;};bQ.Const=function(ca){return bQ.Def(0,function(){return ca;});};bQ.Def=function(ca,cb){return{Compute:cb,Duration:ca};};bQ.Prolong=function(ca,cb){var cc,cd,ce;cc=cb.Compute;cd=cb.Duration;ce=_3.Create(function(){return cb.Compute(cb.Duration);});return{Compute:function(cf){return cf>=cd?ce.f():cc(cf);},Duration:ca};};bR.$cctor=function(){bR.$cctor=a.ignore;bR.BatchUpdatesEnabled=true;};bS=k.FormatException=b8.Class({},bl,bS);bS.New$1=b8.Ctor(function(ca){this.message=ca;_4.setPrototypeOf(this,bS.prototype);},bS);bT.$cctor=function(){bT.$cctor=a.ignore;bT.counter=0;};bV.New=function(ca,cb,cc,cd){var ce;ce={DynElem:ca,DynFlags:cb,DynNodes:cc};b8.SetOptional(ce,"OnAfterRender",cd);return ce;};bW.Clear=function(ca){ca.splice(0,t.length(ca));};bX.$cctor=function(){bX.$cctor=a.ignore;bX.EmptyAttr=null;};bY.$cctor=function(){bY.$cctor=a.ignore;bY.CubicInOut=b0.Custom(function(ca){var cb;cb=ca*ca;return 3*cb-2*(cb*ca);});bY.UseAnimations=true;};bZ.Append=function(ca,cb){return ca.$==0?cb:cb.$==0?ca:{$:2,$0:ca,$1:cb};};bZ.ToArray=function(ca){var cb;function cc(cd){if(cd.$==1)cb.push(cd.$0);else if(cd.$==2){cc(cd.$0);cc(cd.$1);}else if(cd.$==3)t.iter(function(ce){cb.push(ce);},cd.$0);}cb=[];cc(ca);return cb.slice(0);};bZ.Concat=function(ca){var cb;cb=bz.ofSeqNonCopying(ca);return bz.TreeReduce(bZ.Empty(),bZ.Append,cb);};bZ.Empty=function(){b5.$cctor();return b5.Empty;};b0=z.Easing=b8.Class({},l,b0);b0.Custom=function(ca){return new b0.New(ca);};b0.New=b8.Ctor(function(ca){l.New.call(this);this.transformTime=ca;},b0);b1.Filter=function(ca,cb){return new bB.New$2(t.filter(ca,b1.ToArray(cb)));};b1.Except=function(ca,cb){var cc;cc=new bB.New$2(b1.ToArray(cb));cc.ExceptWith(b1.ToArray(ca));return cc;};b1.ToArray=function(ca){var cb;cb=t.create(ca.get_Count(),void 0);ca.CopyTo(cb);return cb;};b1.Intersect=function(ca,cb){var cc;cc=new bB.New$2(b1.ToArray(ca));cc.IntersectWith(b1.ToArray(cb));return cc;};b2.concat=function(ca){var cb,cc;cb=[];for(var cd in ca)cb.push.apply(cb,ca[cd]);return cb;};b3=z.DynamicAttrNode=b8.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(ca){return bC.get_Empty();},NGetEnterAnim:function(ca){return bC.get_Empty();},NGetChangeAnim:function(ca){return bC.get_Empty();},NSync:function(ca){if(this.dirty){(this.push(ca))(this.value);this.dirty=false;}}},l,b3);b3.New=b8.Ctor(function(ca,cb){var cc;cc=this;l.New.call(this);this.push=cb;this.value=void 0;this.dirty=false;this.updates=T.Map(function(cd){cc.value=cd;cc.dirty=true;},ca);},b3);b4.Children=function(ca,cb){var cc,cd,ce;if(cb!=null&&cb.$==1){ce=[];cc=cb.$0[0].nextSibling;while(cc!==cb.$0[1]){ce.push(cc);cc=cc.nextSibling;}return{$:0,$0:ce};}else return{$:0,$0:t.init(ca.childNodes.length,(cd=ca.childNodes,function(cf){return cd[cf];}))};};b4.Except=function(ca,cb){var cc;cc=ca.$0;return{$:0,$0:t.filter(function(cd){return t.forall(function(ce){return!(cd===ce);},cc);},cb.$0)};};b4.Iter=function(ca,cb){t.iter(ca,cb.$0);};b4.DocChildren=function(ca){var cb;function cc(cd){if(cd!=null&&cd.$==2)cc(cd.$0.Current);else if(cd!=null&&cd.$==1)cb.push(cd.$0.El);else if(cd==null);else if(cd!=null&&cd.$==5)cb.push(cd.$0);else if(cd!=null&&cd.$==4)cb.push(cd.$0.Text);else if(cd!=null&&cd.$==6)t.iter(function(ce){if(ce==null||ce.constructor===_4)cc(ce);else cb.push(ce);},cd.$0.Els);else{cc(cd.$0);cc(cd.$1);}}cb=[];cc(ca.Children);return{$:0,$0:bz.ofSeqNonCopying(cb)};};b5.$cctor=function(){b5.$cctor=a.ignore;b5.Empty={$:0};};b8.OnLoad(function(){f.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=b.TestingJS=b.TestingJS||{};e=d.WSFrameworkTest=d.WSFrameworkTest||{};f=d.WSFramework=d.WSFramework||{};g=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};h=a.WebSharper=a.WebSharper||{};i=h.Obj=h.Obj||{};j=h.UI=h.UI||{};k=j.Var=j.Var||{};l=h.Operators=h.Operators||{};m=b.LibraryJS=b.LibraryJS||{};n=m.FShUI=m.FShUI||{};o=c.FShUI_AssemblyData=c.FShUI_AssemblyData||{};p=o.AssemblyRef=o.AssemblyRef||{};q=j.ListModel=j.ListModel||{};r=h.Seq=h.Seq||{};s=m.AssemblyUI=m.AssemblyUI||{};t=a.EventTarget;u=a.Node;v=h.JavaScript=h.JavaScript||{};w=v.JS=v.JS||{};x=j.Var$1=j.Var$1||{};y=v.Pervasives=v.Pervasives||{};z=j.Doc=j.Doc||{};A=h.Concurrency=h.Concurrency||{};B=n.LoadAsm=n.LoadAsm||{};C=a.StartupCode$FShUI$FShUI=a.StartupCode$FShUI$FShUI||{};D=h.Enumerator=h.Enumerator||{};E=D.T=D.T||{};F=h.Unchecked=h.Unchecked||{};G=m.WsComposition=m.WsComposition||{};H=j.Client=j.Client||{};I=H.Templates=H.Templates||{};J=a.WindowOrWorkerGlobalScope;K=j.ConcreteVar=j.ConcreteVar||{};L=j.Snap=j.Snap||{};M=j.AttrModule=j.AttrModule||{};N=j.View=j.View||{};O=j.DomUtility=j.DomUtility||{};P=A.AsyncBody=A.AsyncBody||{};Q=o.AssemblyDef=o.AssemblyDef||{};R=h.Arrays=h.Arrays||{};S=h.Utils=h.Utils||{};T=o.AssemblyName=o.AssemblyName||{};U=o.JSCode=o.JSCode||{};V=a.FSharp=a.FSharp||{};W=V.Data=V.Data||{};X=W.Runtime=W.Runtime||{};Y=X.IO=X.IO||{};Z=o.ModuleDef=o.ModuleDef||{};_0=o.ModuleName=o.ModuleName||{};_1=o.MethodDef=o.MethodDef||{};_2=o.TypeRef=o.TypeRef||{};_3=o.TypeName=o.TypeName||{};_4=o.MethodName=o.MethodName||{};_5=o.Resource=o.Resource||{};_6=h.Collections=h.Collections||{};_7=_6.Dictionary=_6.Dictionary||{};_8=h.List=h.List||{};_9=_8.T=_8.T||{};_=G.DocComposition=G.DocComposition||{};$=j.Array=j.Array||{};ba=j.ViewBuilder=j.ViewBuilder||{};bb=j.Docs=j.Docs||{};bc=A.CT=A.CT||{};bd=j.Abbrev=j.Abbrev||{};be=bd.Fresh=bd.Fresh||{};bf=j.AttrProxy=j.AttrProxy||{};bg=A.Scheduler=A.Scheduler||{};bh=h.Strings=h.Strings||{};bi=h.Data=h.Data||{};bj=bi.TxtRuntime=bi.TxtRuntime||{};bk=bi.Pervasives=bi.Pervasives||{};bl=a.Object;bm=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bn=j.Storage=j.Storage||{};bo=G.Reference=G.Reference||{};bp=G.HtmlElemTag=G.HtmlElemTag||{};bq=a.Error;br=h.OperationCanceledException=h.OperationCanceledException||{};bs=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bt=_6.HashSet=_6.HashSet||{};bu=j.An=j.An||{};bv=H.Settings=H.Settings||{};bw=bd.Mailbox=bd.Mailbox||{};bx=j.Elt=j.Elt||{};by=j.DocElemNode=j.DocElemNode||{};bz=a.CharacterData;bA=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bB=a.System=a.System||{};bC=bB.Guid=bB.Guid||{};bD=h.CancellationTokenSource=h.CancellationTokenSource||{};bE=bn.ArrayStorage=bn.ArrayStorage||{};bF=j.HtmlModule=j.HtmlModule||{};bG=bF.attr=bF.attr||{};bH=_6.DictionaryUtil=_6.DictionaryUtil||{};bI=I.Prepare=I.Prepare||{};bJ=h.Slice=h.Slice||{};bK=_6.KeyCollection=_6.KeyCollection||{};bL=H.Docs=H.Docs||{};bM=bL.RunState=bL.RunState||{};bN=bL.NodeSet=bL.NodeSet||{};bO=j.Anims=j.Anims||{};bP=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bQ=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bR=j.Updates=j.Updates||{};bS=j.Attrs=j.Attrs||{};bT=H.Attrs=H.Attrs||{};bU=bT.Dyn=bT.Dyn||{};bV=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bW=j.AppendList=j.AppendList||{};bX=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bY=j.Easing=j.Easing||{};bZ=bd.HashSet=bd.HashSet||{};b0=_6.HashSetUtil=_6.HashSetUtil||{};b1=j.DynamicAttrNode=j.DynamicAttrNode||{};b2=h.Queue=h.Queue||{};b3=bL.DomNodes=bL.DomNodes||{};b4=h.Lazy=h.Lazy||{};b5=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b6=h.LazyExtensionsProxy=h.LazyExtensionsProxy||{};b7=b6.LazyRecord=b6.LazyRecord||{};b8=a.IntelliFactory;b9=b8&&b8.Runtime;b_=a.console;b$=a.JSON;ca=a.jQuery;cb=a.Date;cc=a.Math;c.Error$2=function(cd){return{$:1,$0:cd};};e.testVar=function(){g.$cctor();return g.testVar;};e.testVarInput=function(){return z.Element("div",[],[z.Input([],e.testVar())]);};e.testVarOut=function(){return z.Element("div",[],[z.TextView(e.testVar().get_View())]);};e.mainDoc=function(){return z.Element("div",[],[z.Element("h1",[],[z.TextNode("Hello WSFramework")]),e.testVarInput(),e.testVarOut()]);};f.main=function(){var cd;A.Start((cd=null,A.Delay(function(){var ce;ce=n.assemblies();return A.Bind(n.loadAssembly(new p({$:0,$0:"FShUI.asm"})),function(){n.assemblies().Set(r.append((n.assemblies())["var"].Get(),ce["var"].Get()));return A.Bind(A.Sleep(50),function(){var cf,cg;cf=z.Element("div",[],[s.mainDocInput(),s.assembliesDoc(),z.Element("div",[],[s.mainSubDoc()])]);cg=self.document.body;I.LoadLocalTemplates("");z.Run(cg,cf);return A.Return(null);});});})),null);};g.$cctor=function(){g.$cctor=a.ignore;g.testVar=x.Create$1("Hello WSFrameWork");};i=h.Obj=b9.Class({Equals:function(cd){return this===cd;},GetHashCode:function(){return -1;}},null,i);i.New=b9.Ctor(function(){},i);k=j.Var=b9.Class({},i,k);k.New=b9.Ctor(function(){i.New.call(this);},k);l.FailWith=function(cd){throw new bq(cd);};l.KeyValue=function(cd){return[cd.K,cd.V];};n.loadAssembly=function(cd){var ce;ce=null;return A.Delay(function(){return A.Bind(n["loadAssembly'"](n.isLoaded,function(cf){n.loadDef(cf);},function(cf){return B.fetchAsmData(n.Folder(),cf);},cd),function(){n.restartAssemblies();return A.Zero();});});};n.assemblies=function(){C.$cctor();return C.assemblies;};n["loadAssembly'"]=function(cd,ce,cf,cg){var ch;ch=null;return A.Delay(function(){return cd(cg)?A.Zero():A.Bind(cf(cg),function(ci){return A.Bind(n["processAssembly'"](cd,ce,cf,ci),function(){return A.Return(null);});});});};n.isLoaded=function(cd){return n.assemblies().TryFind(function(ce){return F.Equals(ce.self,cd);})!=null;};n.loadDef=function(cd){var ce,cf,cg,ch;try{ce=cd.javaScripts;for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=R.get(ce,cf);a["eval"](((((b9.Curried(function(ci,cj,ck,cl){return ci("console.log('loading "+S.toSafe(cj)+" "+S.toSafe(ck)+" ...');"+S.toSafe(cl));},4))(a.id))(cd.name.get_Id()))(ch[0]))(ch[1].get_Id()));}n.assemblies().Append(cd);}catch(ci){((function(cj){return function(ck){return cj(S.prettyPrint(ck));};}(function(cj){b_.log(cj);}))(ci));}};n.Folder=function(){C.$cctor();return C.Folder;};n.restartAssemblies=function(){var cd;cd=R.ofSeq((n.assemblies())["var"].Get());n.assemblies().Set(cd);};n["processAssembly'"]=function(cd,ce,cf,cg){var ch;ch=null;return A.Delay(function(){return A.Combine(A.For(cg.dependencies,function(ci){return A.Bind(n["loadAssembly'"](cd,ce,cf,ci),function(){return A.Return(null);});}),A.Delay(function(){ce(cg);return A.Zero();}));});};p=o.AssemblyRef=b9.Class({},null,p);q=j.ListModel=b9.Class({Set:function(cd){this["var"].Set(this.storage.SSet(cd));this.ObsoleteAll();},ObsoleteAll:function(){r.iter(function(cd){L.Obsolete(cd.V);},this.it);this.it.Clear();},TryFind:function(cd){return R.tryFind(cd,this["var"].Get());},TryFindByKeyAsView:function(cd){var ce;ce=this;return function(){var cf,cg,ch;cf=(cg=null,[ce.it.TryGetValue(cd,{get:function(){return cg;},set:function(ci){cg=ci;}}),cg]);return cf[0]?cf[1]:(ch=L.New({$:2,$0:ce.TryFindByKey(cd),$1:[]}),(ce.it.Add(cd,ch),ch));};},Append:function(cd){var ce,cf,cg,ch;ce=this;cf=this["var"].Get();cg=this.key(cd);ch=R.tryFindIndex(function(ci){return F.Equals(ce.key(ci),cg);},cf);ch!=null&&ch.$==1?this["var"].Set(this.storage.SSetAt(ch.$0,cd,cf)):this["var"].Set(this.storage.SAppend(cd,cf));this.ObsoleteKey(cg);},TryFindByKey:function(cd){var ce;ce=this;return R.tryFind(function(cf){return F.Equals(ce.key(cf),cd);},this["var"].Get());},ObsoleteKey:function(cd){var ce,cf;ce=(cf=null,[this.it.TryGetValue(cd,{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]);ce[0]?(L.Obsolete(ce[1]),this.it.Remove(cd)):void 0;},GetEnumerator:function(){return D.Get(this["var"].Get());},GetEnumerator0:function(){return D.Get0(this["var"].Get());}},i,q);q.New=b9.Ctor(function(cd,ce){q.New$3.call(this,cd,x.Create$1(R.ofSeq(r.distinctBy(cd,ce.SInit()))),ce);},q);q.New$3=b9.Ctor(function(cd,ce,cf){i.New.call(this);this.key=cd;this["var"]=ce;this.storage=cf;this.v=N.Map(function(cg){return cg.slice();},this["var"].get_View());this.it=new _7.New$5();},q);r.append=function(cd,ce){return{GetEnumerator:function(){var cf,cg;cf=D.Get(cd);cg=[true];return new E.New(cf,null,function(ch){var ci;return ch.s.MoveNext()?(ch.c=ch.s.Current(),true):(ci=ch.s,!F.Equals(ci,null)?ci.Dispose():void 0,ch.s=null,cg[0]&&(cg[0]=false,ch.s=D.Get(ce),ch.s.MoveNext()?(ch.c=ch.s.Current(),true):(ch.s.Dispose(),ch.s=null,false)));},function(ch){var ci;ci=ch.s;!F.Equals(ci,null)?ci.Dispose():void 0;});}};};r.iter=function(cd,ce){var cf;cf=D.Get(ce);try{while(cf.MoveNext())cd(cf.Current());}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};r.delay=function(cd){return{GetEnumerator:function(){return D.Get(cd());}};};r.collect=function(cd,ce){return r.concat(r.map(cd,ce));};r.mapFold=function(cd,ce,cf){return R.mapFold(cd,ce,R.ofSeq(cf));};r.isEmpty=function(cd){var ce;ce=D.Get(cd);try{return!ce.MoveNext();}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};r.head=function(cd){var ce;ce=D.Get(cd);try{return ce.MoveNext()?ce.Current():r.insufficient();}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};r.concat=function(cd){return{GetEnumerator:function(){var ce;ce=D.Get(cd);return new E.New(null,null,function(cf){var cg;while(true){cg=cf.s;if(F.Equals(cg,null)){if(ce.MoveNext()){cf.s=D.Get(ce.Current());cf=cf;}else{ce.Dispose();return false;}}else if(cg.MoveNext()){cf.c=cg.Current();return true;}else{cf.Dispose();cf.s=null;cf=cf;}}},function(cf){var cg;cg=cf.s;!F.Equals(cg,null)?cg.Dispose():void 0;!F.Equals(ce,null)?ce.Dispose():void 0;});}};};r.map=function(cd,ce){return{GetEnumerator:function(){var cf;cf=D.Get(ce);return new E.New(null,null,function(cg){return cf.MoveNext()&&(cg.c=cd(cf.Current()),true);},function(){cf.Dispose();});}};};r.filter=function(cd,ce){return{GetEnumerator:function(){var cf;cf=D.Get(ce);return new E.New(null,null,function(cg){var ch,ci,cj;ch=cf.MoveNext();ci=cf.Current();cj=false;while(ch)if(cd(ci)){cg.c=ci;cj=true;ch=false;}else if(cf.MoveNext())ci=cf.Current();else ch=false;return cj;},function(){cf.Dispose();});}};};r.length=function(cd){var ce,cf;ce=0;cf=D.Get(cd);try{while(cf.MoveNext())ce=ce+1;return ce;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};r.distinctBy=function(cd,ce){return{GetEnumerator:function(){var cf,cg;cf=D.Get(ce);cg=new bt.New$3();return new E.New(null,null,function(ch){var ci,cj;if(cf.MoveNext()){ci=cf.Current();cj=cg.Add(cd(ci));while(!cj&&cf.MoveNext()){ci=cf.Current();cj=cg.Add(cd(ci));}return cj&&(ch.c=ci,true);}else return false;},function(){cf.Dispose();});}};};r.fold=function(cd,ce,cf){var cg,ch;cg=ce;ch=D.Get(cf);try{while(ch.MoveNext())cg=cd(cg,ch.Current());return cg;}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}};r.max=function(cd){var ce,cf,cg;ce=D.Get(cd);try{if(!ce.MoveNext())r.seqEmpty();cf=ce.Current();while(ce.MoveNext()){cg=ce.Current();F.Compare(cg,cf)===1?cf=cg:void 0;}return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};r.seqEmpty=function(){return l.FailWith("The input sequence was empty.");};s.mainDocInput=function(){return z.Element("div",[],[z.TextNode("mainDocNameVar:"),z.BindView(G.getUIDoc,s.mainDocNameVar().get_View())]);};s.assembliesDoc=function(){return z.Concat([z.Button("Load module:",[],function(){s.loadThisModule();}),z.Button("Load test  :",[],function(){s.loadThisModule();}),z.Input([],s.thisModuleV()),s.listAssembliesDoc(),s.currentAssembly(),s.styleDoc()]);};s.mainSubDoc=function(){C.$cctor();return C.mainSubDoc;};s.mainDocNameVar=function(){C.$cctor();return C.mainDocNameVar;};s.loadThisModule=function(){A.Start(n.loadAssembly(new p({$:0,$0:s.thisModuleV().Get()})),null);};s.thisModuleV=function(){C.$cctor();return C.thisModuleV;};s.listAssembliesDoc=function(){var cd;function ce(cf,cg){return z.Element("tr",[],[z.Element("td",[s.click(function(){s.selectedAssembly().Set({$:1,$0:cf});})],[z.TextView(N.Map(function(ch){return ch.name.get_Id();},cg))])]);}return z.Element("table",[],[(cd=n.assemblies(),z.ConvertSeqBy(cd.key,function(cf){return function(cg){return ce(cf,cg);};},cd["var"].get_View()))]);};s.currentAssembly=function(){var cd;return z.BindView(a.id,(cd=N.get_Do(),N.Bind(function(ce){return ce!=null&&ce.$==1?N.Bind(function(cf){return cf!=null&&cf.$==1?N.Const(s.assemblyDoc(cf.$0)):N.Const(z.get_Empty());},n.assemblies().TryFindByKeyAsView(ce.$0)):N.Const(z.get_Empty());},s.selectedAssembly().get_View())));};s.styleDoc=function(){return z.Element("style",_9.Empty,_8.ofArray([z.TextNode("\r\n                            .wsfmwk-alternate > * :nth-child(even) {background: #CCF}\r\n                            .wsfmwk-alternate > * :nth-child(odd ) {background: #CFC}\r\n                            .wsfmwk-alternate td { border: white ; border-style: solid ; border-width: thin}\r\n                            .wsfmwk-alternate tr { border: white ; border-style: solid ; border-width: thin}\r\n                        ")]));};s.mainDocVar=function(){C.$cctor();return C.mainDocVar;};s.click=function(cd){return bf.HandlerImpl("click",function(){return function(){return cd();};});};s.selectedAssembly=function(){C.$cctor();return C.selectedAssembly;};s.assemblyDoc=function(cd){var ce,cf;function cg(cl,cm){return z.get_Empty();}function ch(cl,cm){if(cm.retType.name.get_Id()!=="Var<string>")return z.get_Empty();else try{return z.Input(_9.Empty,a["eval"]((((b9.Curried3(function(cn,co,cp){return cn(S.toSafe(co)+"."+S.toSafe(cp)+"()");}))(a.id))(cl.name.get_Id2()))(cm.name.get_Id())));}catch(cn){return z.TextNode(cn.message);}}function ci(cl,cm){var cn,co;if(cm.retType.name.get_Id().indexOf("<")!=-1)return z.get_Empty();else{try{cn=(co=a["eval"]((((b9.Curried3(function(cp,cq,cr){return cp(S.toSafe(cq)+"."+S.toSafe(cr)+"()");}))(a.id))(cl.name.get_Id2()))(cm.name.get_Id())),(function(cp){return function(cq){return cp(S.prettyPrint(cq));};}(a.id))(co));}catch(cp){cn=cp.message;}return z.TextNode(cn);}}function cj(cl,cm){var cn;cn=new _({$:7,$0:new bo({$:1,$0:cl.name,$1:cm})});return z.Concat([z.Button("Show",[],function(){s.mainDocNameVar().Set(cn);}),z.Button("Add",[],function(){var co,cp;co=(cp=s.mainDocNameVar().Get(),cp.$==10?new _({$:10,$0:cp.$0,$1:cp.$1.concat([cn])}):new _({$:10,$0:null,$1:[cp,cn]}));s.mainDocNameVar().Set(co);})]);}function ck(cl,cm){var cn;cn=cm[1];return[[cm[0],function(co){return cn(co)&&!cl(co);}],function(co){return cn(co)||cl(co);}];}ce=(cf=_8.ofArray([[function(cl){return function(cm){return ch(cl,cm);};},function(cl){return bh.StartsWith(cl.retType.name.get_Id(),"Var<")&&cl.isField;}],[function(cl){return function(cm){return cg(cl,cm);};},function(cl){return bh.StartsWith(cl.retType.name.get_Id(),"View<")&&cl.isField;}],[function(cl){return function(cm){return ci(cl,cm);};},function(cl){return cl.retType.name.get_Id()!=="Doc"&&cl.isField&&!(cl.retType.name.get_Id().indexOf("->")!=-1);}],[function(cl){return function(cm){return cj(cl,cm);};},function(cl){return cl.retType.name.get_Id()==="Doc"&&(cl.isField||r.isEmpty(cl.parms));}],[function(cl){return function(cm){return cg(cl,cm);};},function(){return true;}]]),(((b9.Curried3(r.mapFold))(ck))(function(){return false;}))(cf))[0];return z.Concat([z.Element("h3",[],[z.TextNode(cd.name.get_Id())]),z.Element("div",[M.Class("wsfmwk-alternate")],_8.ofSeq(r.delay(function(){return r.collect(function(cl){var cm;cm=cl[0];return[s.methodRows(cl[1],cd,function(cn,co){return(cm(cn))(co);})];},ce);})))]);};s.methodRows=function(cd,ce,cf){return z.Element("table",[bf.Create("style","font-family: monospace")],_8.ofSeq(r.delay(function(){return r.collect(function(cg){var ch;ch=r.filter(cd,cg.methods);return r.length(ch)>0?[z.Element("tr",[],_8.ofSeq(r.delay(function(){return[z.Element("td",[],_8.ofSeq(r.delay(function(){return r.append([z.Element("b",[],[z.TextNode(cg.name.get_Id2())])],r.delay(function(){return r.collect(function(ci){var cj;return[z.Element("tr",[s.click(function(){s.selectedMethod().Set({$:1,$0:[cg.name,ci.name]});})],[z.Element("td",[],[z.TextNode(ci.name.get_Id())]),z.Element("td",[],[z.TextNode(ci.isField?"":(cj=bh.concat(", ",r.map(function(ck){return ck.name.get_Id();},ci.parms)),(function(ck){return function(cl){return ck("("+S.toSafe(cl)+")");};}(a.id))(cj)))]),z.Element("td",[s.nobr()],[z.TextNode(ci.isField?":":" -> ")]),z.Element("td",[],[z.TextNode(ci.retType.name.get_Id())]),z.Element("td",[],[cf(cg,ci)])])];},ch);}));})))];})))]:[];},ce.modules);})));};s.nobr=function(){return bf.Create("style","white-space: nowrap");};s.selectedMethod=function(){C.$cctor();return C.selectedMethod;};w.GetFields=function(cd){var ce,cf;ce=[];for(var cg in cd)ce.push([cg,cd[cg]]);return ce;};w.GetFieldValues=function(cd){var ce,cf;ce=[];for(var cg in cd)ce.push(cd[cg]);return ce;};x=j.Var$1=b9.Class({},i,x);x.Create$1=function(cd){return new K.New(false,L.New({$:2,$0:cd,$1:[]}),cd);};x.Set=function(cd,ce){cd.Set(ce);};y.NewFromSeq=function(cd){var ce,cf,cg;ce={};cf=D.Get(cd);try{while(cf.MoveNext()){cg=cf.Current();ce[cg[0]]=cg[1];}}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}return ce;};z=j.Doc=b9.Class({},i,z);z.Input=function(cd,ce){return z.InputInternal("input",function(){return r.append(cd,[M.Value(ce)]);});};z.TextNode=function(cd){return z.Mk({$:5,$0:O.CreateText(cd)},N.Const());};z.Concat=function(cd){var ce;ce=$.ofSeqNonCopying(cd);return $.TreeReduce(z.get_Empty(),z.Append,ce);};z.Run=function(cd,ce){bb.LinkElement(cd,ce.docNode);z.RunInPlace(false,cd,ce);};z.Element=function(cd,ce,cf){var cg,ch;cg=bf.Concat(ce);ch=z.Concat(cf);return bx.New(O.CreateElement(cd),cg,ch);};z.InputInternal=function(cd,ce){var cf;cf=O.CreateElement(cd);return bx.New(cf,bf.Concat(ce(cf)),z.get_Empty());};z.TextView=function(cd){var ce;ce=bb.CreateTextNode();return z.Mk({$:4,$0:ce},N.Map(function(cf){bb.UpdateTextNode(ce,cf);},cd));};z.Mk=function(cd,ce){return new z.New(cd,ce);};z.BindView=function(cd,ce){return z.EmbedView(N.Map(cd,ce));};z.Append=function(cd,ce){return z.Mk({$:0,$0:cd.docNode,$1:ce.docNode},N.Map2Unit(cd.updates,ce.updates));};z.get_Empty=function(){return z.Mk(null,N.Const());};z.Button=function(cd,ce,cf){var cg;cg=bf.Concat(ce);return bx.New(z.Clickable("button",cf),cg,z.TextNode(cd));};z.RunInPlace=function(cd,ce,cf){var cg;cg=bb.CreateRunState(ce,cf.docNode);N.Sink(bu.get_UseAnimations()||bv.BatchUpdatesEnabled()?bw.StartProcessor(bb.PerformAnimatedUpdate(cd,cg,cf.docNode)):function(){bb.PerformSyncUpdate(cd,cg,cf.docNode);},cf.updates);};z.EmbedView=function(cd){var ce;ce=bb.CreateEmbedNode();return z.Mk({$:2,$0:ce},N.Map(a.ignore,N.Bind(function(cf){bb.UpdateEmbedNode(ce,cf.docNode);return cf.updates;},cd)));};z.Clickable=function(cd,ce){var cf;cf=O.CreateElement(cd);cf.addEventListener("click",function(cg){cg.preventDefault();return ce();},false);return cf;};z.ConvertSeqBy=function(cd,ce,cf){return z.Flatten(N.MapSeqCachedViewBy(cd,function(cg,ch){return(ce(cg))(ch);},cf));};z.Flatten=function(cd){return z.EmbedView(N.Map(z.Concat,cd));};z.New=b9.Ctor(function(cd,ce){i.New.call(this);this.docNode=cd;this.updates=ce;},z);A.Delay=function(cd){return function(ce){try{(cd(null))(ce);}catch(cf){ce.k({$:1,$0:cf});}};};A.Bind=function(cd,ce){return A.checkCancel(function(cf){cd(P.New(function(cg){var ch;if(cg.$==0){ch=cg.$0;A.scheduler().Fork(function(){try{(ce(ch))(cf);}catch(ci){cf.k({$:1,$0:ci});}});}else A.scheduler().Fork(function(){cf.k(cg);});},cf.ct));});};A.Sleep=function(cd){return function(ce){var cf,cg;cf=void 0;cg=void 0;cf=a.setTimeout(function(){cg.Dispose();A.scheduler().Fork(function(){ce.k({$:0,$0:null});});},cd);cg=A.Register(ce.ct,function(){a.clearTimeout(cf);A.scheduler().Fork(function(){A.cancel(ce);});});};};A.Return=function(cd){return function(ce){ce.k({$:0,$0:cd});};};A.Start=function(cd,ce){var cf,cg;cf=(cg=(A.defCTS())[0],ce==null?cg:ce.$0);A.scheduler().Fork(function(){if(!cf.c)cd(P.New(function(ch){if(ch.$==1)A.UncaughtAsyncError(ch.$0);},cf));});};A.checkCancel=function(cd){return function(ce){if(ce.ct.c)A.cancel(ce);else cd(ce);};};A.Zero=function(){bm.$cctor();return bm.Zero;};A.Register=function(cd,ce){var cf;return cd===A.noneCT()?{Dispose:function(){return null;}}:(cf=cd.r.push(ce)-1,{Dispose:function(){return R.set(cd.r,cf,a.ignore);}});};A.cancel=function(cd){cd.k({$:2,$0:new br.New(cd.ct)});};A.defCTS=function(){bm.$cctor();return bm.defCTS;};A.UncaughtAsyncError=function(cd){b_.log("WebSharper: Uncaught asynchronous exception",cd);};A.scheduler=function(){bm.$cctor();return bm.scheduler;};A.noneCT=function(){bm.$cctor();return bm.noneCT;};A.Combine=function(cd,ce){return A.Bind(cd,function(){return ce;});};A.For=function(cd,ce){return A.Using(D.Get(cd),function(cf){return A.While(function(){return cf.MoveNext();},A.Delay(function(){return ce(cf.Current());}));});};A.FromContinuations=function(cd){return function(ce){var cf;function cg(ch){if(cf[0])l.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cf[0]=true;A.scheduler().Fork(ch);}}cf=[false];cd(function(ch){cg(function(){ce.k({$:0,$0:ch});});},function(ch){cg(function(){ce.k({$:1,$0:ch});});},function(ch){cg(function(){ce.k({$:2,$0:ch});});});};};A.Using=function(cd,ce){return A.TryFinally(ce(cd),function(){cd.Dispose();});};A.While=function(cd,ce){return cd()?A.Bind(ce,function(){return A.While(cd,ce);}):A.Return();};A.TryFinally=function(cd,ce){return function(cf){cd(P.New(function(cg){try{ce();cf.k(cg);}catch(ch){cf.k({$:1,$0:ch});}},cf.ct));};};B.fetchAsmData=function(cd,ce){var cf,cg;cf=ce.$0;cg=null;return A.Delay(function(){return A.Bind(bj.AsyncMap(Y.asyncReadTextAtRuntime(false,"D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\Modules\\src","","JSON","",cf.indexOf("/")!=-1?cf:cd+cf),function(ch){return F.Equals(typeof ch,"string")?b$.parse(ch):ch;}),function(ch){var ci,cj,ck,cl,cm,cn,co;return A.Return((ci=new T({$:0,$0:(ck=(cj="asName",cj in ch?{$:1,$0:ch[cj]}:null),ck==null?null:ck.$0)}),(cl=new p({$:0,$0:cf}),(cm=R.map(function(cp){var cq,cr,cs,ct;return[(cr=(cq="jsName",cq in cp?{$:1,$0:cp[cq]}:null),cr==null?null:cr.$0),new U({$:0,$0:(ct=(cs="code",cs in cp?{$:1,$0:cp[cs]}:null),ct==null?null:ct.$0)})];},ch.jsModules),(cn=R.map(function(cp){return new p({$:0,$0:cp});},ch.dependencies),(co=R.map(function(cp){return new _5({$:0,$0:cp});},ch.resources),Q.New(ci,cl,R.map(function(cp){var cq,cr;return Z.New(new _0({$:0,$0:(cr=(cq="moName",cq in cp?{$:1,$0:cp[cq]}:null),cr==null?null:cr.$0)}),R.map(function(cs){var ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF;ct=new _4({$:0,$0:(cv=(cu="meName",cu in cs?{$:1,$0:cs[cu]}:null),cv==null?null:cv.$0)});cw=(cx=(cy="isField",cy in cs?{$:1,$0:cs[cy]}:null),(cz=cx==null?null:{$:1,$0:1*cx.$0},cz==null?null:cz.$0))===1;return _1.New(ct,_2.New(new _3({$:0,$0:(cC=(cA=cs.type,(cB="tName",cB in cA?{$:1,$0:cA[cB]}:null)),cC==null?null:cC.$0)}),new T({$:0,$0:(cF=(cD=cs.type,(cE="asm",cE in cD?{$:1,$0:cD[cE]}:null)),cF==null?null:cF.$0)})),R.map(function(cG){var cH,cI,cJ,cK;return _2.New(new _3({$:0,$0:(cI=(cH="tName",cH in cG?{$:1,$0:cG[cH]}:null),cI==null?null:cI.$0)}),new T({$:0,$0:(cK=(cJ="asm",cJ in cG?{$:1,$0:cG[cJ]}:null),cK==null?null:cK.$0)}));},cs.parms),cw);},cp.methods));},ch.modules),cn,co,cm)))))));});});};C.$cctor=function(){C.$cctor=a.ignore;C.assemblies=q.Create(function(cd){return cd.name;},_9.Empty);C.Folder="/EPFileX/Assemblies/";C.thisModuleV=x.Create$1("WsTranslatorLoader.asm");C.selectedAssembly=x.Create$1(null);C.mainDocNameVar=x.Create$1(new _({$:9,$0:function(){return z.TextNode("Main Doc");},$1:"Main Doc"}));C.selectedMethod=x.Create$1(null);C.mainDocVar=x.Create$1(z.Element("h1",[],[z.TextNode("mainDocVar not initialized")]));N.Sink(function(cd){var ce;ce=cd.GetDoc();s.mainDocVar().Set(ce);},s.mainDocNameVar().get_View());C.mainSubDoc=z.BindView(a.id,s.mainDocVar().get_View());};D.Get=function(cd){return cd instanceof a.Array?D.ArrayEnumerator(cd):F.Equals(typeof cd,"string")?D.StringEnumerator(cd):cd.GetEnumerator();};D.ArrayEnumerator=function(cd){return new E.New(0,null,function(ce){var cf;cf=ce.s;return cf<R.length(cd)&&(ce.c=R.get(cd,cf),ce.s=cf+1,true);},void 0);};D.StringEnumerator=function(cd){return new E.New(0,null,function(ce){var cf;cf=ce.s;return cf<cd.length&&(ce.c=cd[cf],ce.s=cf+1,true);},void 0);};D.Get0=function(cd){return cd instanceof a.Array?D.ArrayEnumerator(cd):F.Equals(typeof cd,"string")?D.StringEnumerator(cd):"GetEnumerator0"in cd?cd.GetEnumerator0():cd.GetEnumerator();};E=D.T=b9.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,E);E.New=b9.Ctor(function(cd,ce,cf,cg){i.New.call(this);this.s=cd;this.c=ce;this.n=cf;this.d=cg;},E);F.Equals=function(cd,ce){var cf,cg,ch,ci;if(cd===ce)return true;else{cf=typeof cd;if(cf=="object"){if(cd===null||cd===void 0||ce===null||ce===void 0)return false;else if("Equals"in cd)return cd.Equals(ce);else if(cd instanceof a.Array&&ce instanceof a.Array)return F.arrayEquals(cd,ce);else if(cd instanceof a.Date&&ce instanceof a.Date)return F.dateEquals(cd,ce);else{cg=[true];for(var cj in cd)if(function(ck){cg[0]=!cd.hasOwnProperty(ck)||ce.hasOwnProperty(ck)&&F.Equals(cd[ck],ce[ck]);return!cg[0];}(cj))break;if(cg[0]){for(var ck in ce)if(function(cl){cg[0]=!ce.hasOwnProperty(cl)||cd.hasOwnProperty(cl);return!cg[0];}(ck))break;}return cg[0];}}else return cf=="function"&&("$Func"in cd?cd.$Func===ce.$Func&&cd.$Target===ce.$Target:"$Invokes"in cd&&"$Invokes"in ce&&F.arrayEquals(cd.$Invokes,ce.$Invokes));}};F.arrayEquals=function(cd,ce){var cf,cg;if(R.length(cd)===R.length(ce)){cf=true;cg=0;while(cf&&cg<R.length(cd)){!F.Equals(R.get(cd,cg),R.get(ce,cg))?cf=false:void 0;cg=cg+1;}return cf;}else return false;};F.dateEquals=function(cd,ce){return cd.getTime()===ce.getTime();};F.Hash=function(cd){var ce;ce=typeof cd;return ce=="function"?0:ce=="boolean"?cd?1:0:ce=="number"?cd:ce=="string"?F.hashString(cd):ce=="object"?cd==null?0:cd instanceof a.Array?F.hashArray(cd):F.hashObject(cd):0;};F.hashString=function(cd){var ce,cf,cg;if(cd===null)return 0;else{ce=5381;for(cf=0,cg=cd.length-1;cf<=cg;cf++)ce=F.hashMix(ce,cd[cf].charCodeAt());return ce;}};F.hashArray=function(cd){var ce,cf,cg;ce=-34948909;for(cf=0,cg=R.length(cd)-1;cf<=cg;cf++)ce=F.hashMix(ce,F.Hash(R.get(cd,cf)));return ce;};F.hashObject=function(cd){var ce,cf;if("GetHashCode"in cd)return cd.GetHashCode();else{ce=[0];for(var cg in cd)if(function(ch){ce[0]=F.hashMix(F.hashMix(ce[0],F.hashString(ch)),F.Hash(cd[ch]));return false;}(cg))break;return ce[0];}};F.hashMix=function(cd,ce){return(cd<<5)+cd+ce;};F.Compare=function(cd,ce){var cf,cg,ch,ci,cj,ck;if(cd===ce)return 0;else{cg=typeof cd;switch(cg=="function"?1:cg=="boolean"?2:cg=="number"?2:cg=="string"?2:cg=="object"?3:0){case 0:return typeof ce=="undefined"?0:-1;case 1:return l.FailWith("Cannot compare function values.");case 2:return cd<ce?-1:1;case 3:if(cd===null)ch=-1;else if(ce===null)ch=1;else if("CompareTo"in cd)ch=cd.CompareTo(ce);else if("CompareTo0"in cd)ch=cd.CompareTo0(ce);else if(cd instanceof a.Array&&ce instanceof a.Array)ch=F.compareArrays(cd,ce);else if(cd instanceof a.Date&&ce instanceof a.Date)ch=F.compareDates(cd,ce);else{ci=[0];for(var cl in cd)if(function(cm){return!cd.hasOwnProperty(cm)?false:!ce.hasOwnProperty(cm)?(ci[0]=1,true):(ci[0]=F.Compare(cd[cm],ce[cm]),ci[0]!==0);}(cl))break;if(ci[0]===0){for(var cm in ce)if(function(cn){return!ce.hasOwnProperty(cn)?false:!cd.hasOwnProperty(cn)&&(ci[0]=-1,true);}(cm))break;}ch=ci[0];}return ch;}}};F.compareArrays=function(cd,ce){var cf,cg;if(R.length(cd)<R.length(ce))return -1;else if(R.length(cd)>R.length(ce))return 1;else{cf=0;cg=0;while(cf===0&&cg<R.length(cd)){cf=F.Compare(R.get(cd,cg),R.get(ce,cg));cg=cg+1;}return cf;}};F.compareDates=function(cd,ce){return F.Compare(cd.getTime(),ce.getTime());};G.getUIDoc=function(cd){var ce,cf;return cd.$==1?z.TextNode(a.String(cd.$0)):cd.$==2?z.TextNode(a.String(cd.$0)):cd.$==3?z.TextNode(a.String(cd.$0)):cd.$==4?z.TextNode(a.String(cd.$0)):cd.$==5?z.TextNode(a.String(cd.$0)):cd.$==6?z.TextNode(a.String(cd.$0)):cd.$==7?z.TextNode(a.String(cd.$0)):cd.$==8?z.TextNode(a.String(cd.$0)):cd.$==9?z.TextNode(cd.$1):cd.$==10?z.Element("div",[],[z.TextNode((ce=(cf=cd.$0,cf==null?null:{$:1,$0:a.String(cf.$0)}),ce==null?"":ce.$0)),z.Element("ol",_9.Empty,R.map(function(cg){return z.Element("li",[],[G.getUIDoc(cg)]);},cd.$1))]):z.TextNode(a.String(cd.$0));};I.LoadLocalTemplates=function(cd){!I.LocalTemplatesLoaded()?(I.set_LocalTemplatesLoaded(true),I.LoadNestedTemplates(self.document.body,"")):void 0;I.LoadedTemplates().set_Item(cd,I.LoadedTemplateFile(""));};I.LocalTemplatesLoaded=function(){bs.$cctor();return bs.LocalTemplatesLoaded;};I.set_LocalTemplatesLoaded=function(cd){bs.$cctor();bs.LocalTemplatesLoaded=cd;};I.LoadNestedTemplates=function(cd,ce){var cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct;function cf(cu){var cv,cw;if(!cg.ContainsKey(cu)){cv=(cw=null,[ch.TryGetValue(cu,{get:function(){return cw;},set:function(cx){cw=cx;}}),cw]);cv[0]?(ct.Add(cu),ch.Remove(cu),I.PrepareTemplateStrict(ce,{$:1,$0:cu},cv[1][0],{$:1,$0:cv[1][1]},{$:1,$0:cf})):b_.warn(ct.Contains(cu)?"Encountered loop when instantiating "+cu:"Local template does not exist: "+cu);}}cg=I.LoadedTemplateFile(ce);ch=new _7.New$5();ci=cd.querySelectorAll("[ws-template]");for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=ci[cj];cm=cl.getAttribute("ws-template").toLowerCase();cl.removeAttribute("ws-template");ch.set_Item(cm,[[cl],I.FakeRootSingle(cl)]);}cn=cd.querySelectorAll("[ws-children-template]");for(co=0,cp=cn.length-1;co<=cp;co++){cq=cn[co];cr=cq.getAttribute("ws-children-template").toLowerCase();cq.removeAttribute("ws-children-template");ch.set_Item(cr,(cs=O.ChildrenArray(cq),[cs,I.FakeRoot(cs)]));}ct=new bt.New$3();while(ch.count>0)cf(r.head(ch.get_Keys()));};I.LoadedTemplates=function(){bs.$cctor();return bs.LoadedTemplates;};I.LoadedTemplateFile=function(cd){var ce,cf,cg;ce=(cf=null,[I.LoadedTemplates().TryGetValue(cd,{get:function(){return cf;},set:function(ch){cf=ch;}}),cf]);return ce[0]?ce[1]:(cg=new _7.New$5(),(I.LoadedTemplates().set_Item(cd,cg),cg));};I.FakeRootSingle=function(cd){var ce,cf,cg;cd.removeAttribute("ws-template");ce=cd.getAttribute("ws-replace");ce===null?void 0:(cd.removeAttribute("ws-replace"),cf=cd.parentNode,F.Equals(cf,null)?void 0:(cg=self.document.createElement(cd.tagName),cg.setAttribute("ws-replace",ce),cf.replaceChild(cg,cd)));return I.FakeRoot([cd]);};I.FakeRoot=function(cd){var ce,cf,cg;ce=self.document.createElement("div");for(cf=0,cg=cd.length-1;cf<=cg;cf++)ce.appendChild(R.get(cd,cf));return ce;};I.PrepareTemplateStrict=function(cd,ce,cf,cg,ch){var ci,cj;function ck(cp,cq){var cr,cs,ct,cu,cv,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR;function cw(cS){}while(true)switch(cp){case 0:if(cq!==null){cr=cq.nextSibling;if(F.Equals(cq.nodeType,u.TEXT_NODE))bI.convertTextNode(cq);else if(F.Equals(cq.nodeType,u.ELEMENT_NODE))cm(cq);cq=cr;}else return null;break;case 1:cx=bJ.string(cq.nodeName,{$:1,$0:3},null).toLowerCase();cy=(cs=cx.indexOf("."),cs===-1?[cd,cx]:[bJ.string(cx,null,{$:1,$0:cs-1}),bJ.string(cx,{$:1,$0:cs+1},null)]);cz=cy[1];cA=cy[0];if(cA!==""&&!I.LoadedTemplates().ContainsKey(cA))return bI.failNotLoaded(cz);else{if(cA===""&&ch!=null)ch.$0(cz);cB=I.LoadedTemplates().get_Item(cA);if(!cB.ContainsKey(cz))return bI.failNotLoaded(cz);else{cC=cB.get_Item(cz);cD=cC.cloneNode(true);cE=new bt.New$3();cF=new _7.New$5();cG=cq.attributes;for(cH=0,cI=cG.length-1;cH<=cI;cH++){cJ=cG.item(cH).name.toLowerCase();cF.set_Item(cJ,(cK=cG.item(cH).nodeValue,cK===""?cJ:cK.toLowerCase()));!cE.Add(cJ)?b_.warn("Hole mapped twice",cJ):void 0;}for(cL=0,cM=cq.childNodes.length-1;cL<=cM;cL++){cN=cq.childNodes[cL];F.Equals(cN.nodeType,u.ELEMENT_NODE)?!cE.Add(cN.nodeName.toLowerCase())?b_.warn("Hole filled twice",cz):void 0:void 0;}cO=cq.childNodes.length===1&&F.Equals(cq.firstChild.nodeType,u.TEXT_NODE);if(cO){cu=bI.fillTextHole(cD,cq.firstChild.textContent,cz);((function(cS){return function(cT){if(cT!=null)cS(cT.$0);};}((cv=function(cS){return function(cT){return cS.Add(cT);};}(cE),function(cS){return cw(cv(cS));})))(cu));}bI.removeHolesExcept(cD,cE);if(!cO){for(cP=0,cQ=cq.childNodes.length-1;cP<=cQ;cP++){cR=cq.childNodes[cP];F.Equals(cR.nodeType,u.ELEMENT_NODE)?cR.hasAttributes()?bI.fillInstanceAttrs(cD,cR):cl(cD,cR):void 0;}}bI.mapHoles(cD,cF);bI.fill(cD,cq.parentNode,cq);cq.parentNode.removeChild(cq);return;}}break;}}function cl(cp,cq){var cr,ct,cu;function cs(cv,cw){var cx,cy,cz;if(ct==="title"&&cq.hasChildNodes()){cx=ca.parseHTML(cq.textContent);cq.removeChild(cq.firstChild);for(cy=0,cz=cx.length-1;cy<=cz;cy++)cq.appendChild(R.get(cx,cy));}else null;cm(cq);return bI.fill(cq,cv,cw);}ct=cq.nodeName.toLowerCase();O.IterSelector(cp,"[ws-attr-holes]",function(cv){var cw,cx,cy,cz,cA;cw=bh.SplitChars(cv.getAttribute("ws-attr-holes"),[" "],1);for(cx=0,cy=cw.length-1;cx<=cy;cx++){cz=R.get(cw,cx);cv.setAttribute(cz,(cA=new a.RegExp("\\${"+ct+"}","ig"),cv.getAttribute(cz).replace(cA,cq.textContent)));}});cu=cp.querySelector("[ws-hole="+ct+"]");if(F.Equals(cu,null)){cr=cp.querySelector("[ws-replace="+ct+"]");return F.Equals(cr,null)?null:(cs(cr.parentNode,cr),void cr.parentNode.removeChild(cr));}else{while(cu.hasChildNodes())cu.removeChild(cu.lastChild);cu.removeAttribute("ws-hole");return cs(cu,null);}}function cm(cp){if(bh.StartsWith(cp.nodeName.toLowerCase(),"ws-"))co(cp);else{bI.convertAttrs(cp);cn(cp.firstChild);}}function cn(cp){return ck(0,cp);}function co(cp){return ck(1,cp);}ci=cg==null?I.FakeRoot(cf):cg.$0;cj=(ce==null?"":ce.$0).toLowerCase();I.LoadedTemplateFile(cd).set_Item(cj,ci);R.length(cf)>0?(function(cp){var cq,cr,cs,ct;while(true){cq=cp.querySelector("[ws-template]");if(F.Equals(cq,null)){cr=cp.querySelector("[ws-children-template]");if(F.Equals(cr,null))return null;else{cs=cr.getAttribute("ws-children-template");cr.removeAttribute("ws-children-template");I.PrepareTemplateStrict(cd,{$:1,$0:cs},O.ChildrenArray(cr),null,null);cp=cp;}}else{ct=cq.getAttribute("ws-template");(I.PrepareSingleTemplate(cd,{$:1,$0:ct},cq))(null);cp=cp;}}}(ci),cn(R.get(cf,0))):void 0;};I.PrepareSingleTemplate=function(cd,ce,cf){var cg,ch,ci;cg=I.FakeRootSingle(cf);ch=[cf];ci={$:1,$0:cg};return function(cj){I.PrepareTemplateStrict(cd,ce,ch,ci,cj);};};I.TextHoleRE=function(){bs.$cctor();return bs.TextHoleRE;};K=j.ConcreteVar=b9.Class({get_View:function(){return this.view;},Set:function(cd){if(this.isConst)(function(ce){return ce("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(ce){b_.log(ce);}));else{L.Obsolete(this.snap);this.current=cd;this.snap=L.New({$:2,$0:cd,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(cd){var ce;ce=cd(this.Get());ce!=null&&ce.$==1?this.Set(ce.$0):void 0;}},k,K);K.New=b9.Ctor(function(cd,ce,cf){var cg;cg=this;k.New.call(this);this.isConst=cd;this.current=cf;this.snap=ce;this.view=function(){return cg.snap;};this.id=be.Int();},K);L.WhenRun=function(cd,ce,cf){var cg;cg=cd.s;cg==null?cf():cg!=null&&cg.$==2?(cg.$1.push(cf),ce(cg.$0)):cg!=null&&cg.$==3?(cg.$0.push(ce),cg.$1.push(cf)):ce(cg.$0);};L.Map=function(cd,ce){var cf,cg;cf=ce.s;return cf!=null&&cf.$==0?L.New({$:0,$0:cd(cf.$0)}):(cg=L.New({$:3,$0:[],$1:[]}),(L.When(ce,function(ch){L.MarkDone(cg,ce,cd(ch));},cg),cg));};L.Map2Unit=function(cd,ce){var cf,cg,ch;function ci(){var cj,ck,cl;if(!(cj=ch.s,cj!=null&&cj.$==0||cj!=null&&cj.$==2)){ck=L.ValueAndForever(cd);cl=L.ValueAndForever(ce);ck!=null&&ck.$==1?cl!=null&&cl.$==1?ck.$0[1]&&cl.$0[1]?L.MarkForever(ch,null):L.MarkReady(ch,null):void 0:void 0;}}cf=cd.s;cg=ce.s;return cf!=null&&cf.$==0?cg!=null&&cg.$==0?L.New({$:0,$0:null}):ce:cg!=null&&cg.$==0?cd:(ch=L.New({$:3,$0:[],$1:[]}),(L.When(cd,ci,ch),L.When(ce,ci,ch),ch));};L.WhenObsoleteRun=function(cd,ce){var cf;cf=cd.s;cf==null?ce():cf!=null&&cf.$==2?cf.$1.push(ce):cf!=null&&cf.$==3?cf.$1.push(ce):void 0;};L.When=function(cd,ce,cf){var cg;cg=cd.s;cg==null?L.Obsolete(cf):cg!=null&&cg.$==2?(L.EnqueueSafe(cg.$1,cf),ce(cg.$0)):cg!=null&&cg.$==3?(cg.$0.push(ce),L.EnqueueSafe(cg.$1,cf)):ce(cg.$0);};L.MarkDone=function(cd,ce,cf){var cg;if(cg=ce.s,cg!=null&&cg.$==0)L.MarkForever(cd,cf);else L.MarkReady(cd,cf);};L.ValueAndForever=function(cd){var ce;ce=cd.s;return ce!=null&&ce.$==0?{$:1,$0:[ce.$0,true]}:ce!=null&&ce.$==2?{$:1,$0:[ce.$0,false]}:null;};L.MarkForever=function(cd,ce){var cf,cg,ch,ci;cf=cd.s;if(cf!=null&&cf.$==3){cd.s={$:0,$0:ce};cg=cf.$0;for(ch=0,ci=R.length(cg)-1;ch<=ci;ch++)(R.get(cg,ch))(ce);}else void 0;};L.MarkReady=function(cd,ce){var cf,cg,ch,ci;cf=cd.s;if(cf!=null&&cf.$==3){cd.s={$:2,$0:ce,$1:cf.$1};cg=cf.$0;for(ch=0,ci=R.length(cg)-1;ch<=ci;ch++)(R.get(cg,ch))(ce);}else void 0;};L.EnqueueSafe=function(cd,ce){var cf,cg,ch,ci;cd.push(ce);if(cd.length%20===0){cf=cd.slice(0);b2.Clear(cd);for(cg=0,ch=R.length(cf)-1;cg<=ch;cg++){ci=R.get(cf,cg);typeof ci=="object"?function(cj){if(cj.s)cd.push(cj);}(ci):function(cj){cd.push(cj);}(ci);}}else void 0;};L.Join=function(cd){var ce;ce=L.New({$:3,$0:[],$1:[]});L.When(cd,function(cf){var cg;cg=cf();L.When(cg,function(ch){var ci,cj;if((ci=cg.s,ci!=null&&ci.$==0)&&(cj=cd.s,cj!=null&&cj.$==0))L.MarkForever(ce,ch);else L.MarkReady(ce,ch);},ce);},ce);return ce;};L.Copy=function(cd){var ce,cf,cg;ce=cd.s;return ce==null?cd:ce!=null&&ce.$==2?(cf=L.New({$:2,$0:ce.$0,$1:[]}),(L.WhenObsolete(cd,cf),cf)):ce!=null&&ce.$==3?(cg=L.New({$:3,$0:[],$1:[]}),(L.When(cd,function(ch){L.MarkDone(cg,cd,ch);},cg),cg)):cd;};L.WhenObsolete=function(cd,ce){var cf;cf=cd.s;cf==null?L.Obsolete(ce):cf!=null&&cf.$==2?L.EnqueueSafe(cf.$1,ce):cf!=null&&cf.$==3?L.EnqueueSafe(cf.$1,ce):void 0;};M.Value=function(cd){function ce(cf){return{$:1,$0:cf};}return M.CustomValue(cd,a.id,function(cf){return ce(a.id(cf));});};M.CustomValue=function(cd,ce,cf){return M.CustomVar(cd,function(cg,ch){cg.value=ce(ch);},function(cg){return cf(cg.value);});};M.Class=function(cd){return M.ClassPred(cd,true);};M.CustomVar=function(cd,ce,cf){function cg(ci,cj){return cd.UpdateMaybe(function(ck){var cl,cm;cl=cf(ci);return cl!=null&&cl.$==1&&(!F.Equals(cl.$0,ck)&&(cm=[cl,cl.$0],true))?cm[0]:null;});}function ch(ci,cj){var ck,cl;ck=cf(ci);return ck!=null&&ck.$==1&&(F.Equals(ck.$0,cj)&&(cl=ck.$0,true))?null:ce(ci,cj);}return bf.Concat([M.Handler("change",function(ci){return function(cj){return cg(ci,cj);};}),M.Handler("input",function(ci){return function(cj){return cg(ci,cj);};}),M.Handler("keypress",function(ci){return function(cj){return cg(ci,cj);};}),M.DynamicCustom(function(ci){return function(cj){return ch(ci,cj);};},cd.get_View())]);};M.ClassPred=function(cd,ce){return bS.Static(function(cf){if(ce)O.AddClass(cf,cd);else O.RemoveClass(cf,cd);});};M.Handler=function(cd,ce){return bS.Static(function(cf){cf.addEventListener(cd,function(cg){return(ce(cf))(cg);},false);});};M.DynamicCustom=function(cd,ce){return bS.Dynamic(ce,cd);};N.Const=function(cd){var ce;ce=L.New({$:0,$0:cd});return function(){return ce;};};N.Sink=function(cd,ce){function cf(){L.WhenRun(ce(),cd,function(){A.scheduler().Fork(cf);});}A.scheduler().Fork(cf);};N.Map=function(cd,ce){return N.CreateLazy(function(){return L.Map(cd,ce());});};N.get_Do=function(){return ba.B;};N.Map2Unit=function(cd,ce){return N.CreateLazy(function(){return L.Map2Unit(cd(),ce());});};N.CreateLazy=function(cd){var ce;ce={c:null,o:cd};return function(){var cf,cg;cf=ce.c;return cf===null?(cf=ce.o(),ce.c=cf,(cg=cf.s,cg!=null&&cg.$==0)?ce.o=null:L.WhenObsoleteRun(cf,function(){ce.c=null;}),cf):cf;};};N.Bind=function(cd,ce){return N.Join(N.Map(cd,ce));};N.Join=function(cd){return N.CreateLazy(function(){return L.Join(cd());});};N.MapSeqCachedViewBy=function(cd,ce,cf){var cg;cg=[new _7.New$5()];return N.Map(function(ch){var ci,cj,ck;ci=cg[0];cj=new _7.New$5();ck=$.mapInPlace(function(cl){var cm,cn,co;cm=cd(cl);cn=ci.ContainsKey(cm)?(co=ci.get_Item(cm),(x.Set(co.r,cl),co)):N.ConvertSeqNode(function(cp){return ce(cm,cp);},cl);cj.set_Item(cm,cn);return cn.e;},R.ofSeq(ch));cg[0]=cj;return ck;},cf);};N.ConvertSeqNode=function(cd,ce){var cf,cg;cf=x.Create$1(ce);cg=cf.get_View();return{e:cd(cg),r:cf,w:cg};};O.CreateText=function(cd){return O.Doc().createTextNode(cd);};O.CreateElement=function(cd){return O.Doc().createElement(cd);};O.Doc=function(){bA.$cctor();return bA.Doc;};O.ChildrenArray=function(cd){var ce,cf,cg;ce=[];for(cf=0,cg=cd.childNodes.length-1;cf<=cg;cf++)ce.push(cd.childNodes[cf]);return ce;};O.IterSelector=function(cd,ce,cf){var cg,ch,ci;cg=cd.querySelectorAll(ce);for(ch=0,ci=cg.length-1;ch<=ci;ch++)cf(cg[ch]);};O.AddClass=function(cd,ce){var cf;cf=O.getClass(cd);cf===""?O.setClass(cd,ce):!O.clsRE(ce).test(cf)?O.setClass(cd,cf+" "+ce):void 0;};O.RemoveClass=function(cd,ce){var cf;O.setClass(cd,(cf=O.clsRE(ce),O.getClass(cd).replace(cf,function(cg,ch,ci){return ch===""||ci===""?"":" ";})));};O.InsertAt=function(cd,ce,cf){var cg;if(!(cf.parentNode===cd&&ce===(cg=cf.nextSibling,F.Equals(cg,null)?null:cg)))cd.insertBefore(cf,ce);};O.getClass=function(cd){return cd instanceof a.SVGElement?cd.getAttribute("class"):cd.className;};O.setClass=function(cd,ce){if(cd instanceof a.SVGElement)cd.setAttribute("class",ce);else cd.className=ce;};O.clsRE=function(cd){return new a.RegExp("(\\s+|^)"+cd+"(?:\\s+"+cd+")*(\\s+|$)","g");};O.SetAttr=function(cd,ce,cf){cd.setAttribute(ce,cf);};O.RemoveNode=function(cd,ce){if(ce.parentNode===cd)cd.removeChild(ce);};P.New=function(cd,ce){return{k:cd,ct:ce};};Q.New=function(cd,ce,cf,cg,ch,ci){return{name:cd,self:ce,modules:cf,dependencies:cg,resources:ch,javaScripts:ci};};R.map=function(cd,ce){var cf,cg,ch;cf=new a.Array(ce.length);for(cg=0,ch=ce.length-1;cg<=ch;cg++)cf[cg]=cd(ce[cg]);return cf;};R.tryFind=function(cd,ce){var cf,cg;cf=null;cg=0;while(cg<ce.length&&cf==null){cd(ce[cg])?cf={$:1,$0:ce[cg]}:void 0;cg=cg+1;}return cf;};R.ofSeq=function(cd){var ce,cf;if(cd instanceof a.Array)return cd.slice();else if(cd instanceof _9)return R.ofList(cd);else{ce=[];cf=D.Get(cd);try{while(cf.MoveNext())ce.push(cf.Current());return ce;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}}};R.ofList=function(cd){var ce,cf;cf=[];ce=cd;while(!(ce.$==0)){cf.push(_8.head(ce));ce=_8.tail(ce);}return cf;};R.tryFindIndex=function(cd,ce){var cf,cg;cf=null;cg=0;while(cg<ce.length&&cf==null){cd(ce[cg])?cf={$:1,$0:cg}:void 0;cg=cg+1;}return cf;};R.tryPick=function(cd,ce){var cf,cg,ch;cf=null;cg=0;while(cg<ce.length&&cf==null){ch=cd(ce[cg]);ch!=null&&ch.$==1?cf=ch:void 0;cg=cg+1;}return cf;};R.exists=function(cd,ce){var cf,cg,ch,ci;cf=false;cg=0;ci=R.length(ce);while(!cf&&cg<ci)if(cd(ce[cg]))cf=true;else cg=cg+1;return cf;};R.foldBack=function(cd,ce,cf){var cg,ch,ci,cj,ck;cg=cf;ci=ce.length;for(cj=1,ck=ci;cj<=ck;cj++)cg=cd(ce[ci-cj],cg);return cg;};R.filter=function(cd,ce){var cf,cg,ch;cf=[];for(cg=0,ch=ce.length-1;cg<=ch;cg++)if(cd(ce[cg]))cf.push(ce[cg]);return cf;};R.iter=function(cd,ce){var cf,cg;for(cf=0,cg=ce.length-1;cf<=cg;cf++)cd(ce[cf]);};R.concat=function(cd){return a.Array.prototype.concat.apply([],R.ofSeq(cd));};R.pick=function(cd,ce){var cf;cf=R.tryPick(cd,ce);return cf==null?l.FailWith("KeyNotFoundException"):cf.$0;};R.choose=function(cd,ce){var cf,cg,ch,ci;cf=[];for(cg=0,ch=ce.length-1;cg<=ch;cg++){ci=cd(ce[cg]);ci==null?void 0:cf.push(ci.$0);}return cf;};R.create=function(cd,ce){var cf,cg,ch;cf=new a.Array(cd);for(cg=0,ch=cd-1;cg<=ch;cg++)cf[cg]=ce;return cf;};R.init=function(cd,ce){var cf,cg,ch;cd<0?l.FailWith("Negative size given."):null;cf=new a.Array(cd);for(cg=0,ch=cd-1;cg<=ch;cg++)cf[cg]=ce(cg);return cf;};R.forall=function(cd,ce){var cf,cg,ch,ci;cf=true;cg=0;ci=R.length(ce);while(cf&&cg<ci)if(cd(ce[cg]))cg=cg+1;else cf=false;return cf;};R.get=function(cd,ce){R.checkBounds(cd,ce);return cd[ce];};R.checkBounds=function(cd,ce){if(ce<0||ce>=cd.length)l.FailWith("Index was outside the bounds of the array.");};R.set=function(cd,ce,cf){R.checkBounds(cd,ce);cd[ce]=cf;};R.length=function(cd){return cd.dims===2?cd.length*cd.length:cd.length;};S.toSafe=function(cd){return cd==null?"":cd;};S.prettyPrint=function(cd){var ce,cf;function cg(ch,ci){return ch+" = "+S.prettyPrint(ci);}return cd===null?"null":(ce=typeof cd,ce=="string"?"\""+cd+"\"":ce=="object"?cd instanceof a.Array?"[|"+bh.concat("; ",R.map(S.prettyPrint,cd))+"|]":(cf=a.String(cd),cf==="[object Object]"?"{"+bh.concat("; ",R.map(function(ch){return cg(ch[0],ch[1]);},w.GetFields(cd)))+"}":cf):a.String(cd));};T=o.AssemblyName=b9.Class({get_Id:function(){return this.$0;}},null,T);U=o.JSCode=b9.Class({get_Id:function(){return this.$0;}},null,U);Y.asyncReadTextAtRuntime=function(cd,ce,cf,cg,ch,ci){function cj(ck,cl){var cm,cn,co,cp,cq;cm=(cn=ci.toLowerCase(),bh.StartsWith(cn,"jsonp|")?[ci.substring(6),true]:bh.StartsWith(cn,"json|")?[ci.substring(5),false]:[ci,false]);co=(cp={},cp.dataType="json",cp.success=function(cr){return ck(cr);},cp.error=function(cr,cs,ct){return cl(new bq(ct));},cp);cm[1]?(cq=bk.randomFunctionName(),co.dataType="jsonp",co.jsonp="prefix",co.jsonpCallback="jsonp"+cq):void 0;ca.ajax(cm[0],co);}return A.FromContinuations(function(ck,cl,cm){return cj.apply(null,[ck,cl,cm]);});};Z.New=function(cd,ce){return{name:cd,methods:ce};};_0=o.ModuleName=b9.Class({get_Id2:function(){return bh.Replace(this.get_Id(),"+",".");},get_Id:function(){return this.$0;}},null,_0);_1.New=function(cd,ce,cf,cg){return{name:cd,retType:ce,parms:cf,isField:cg};};_2.New=function(cd,ce){return{name:cd,asm:ce};};_3=o.TypeName=b9.Class({get_Id:function(){return this.$0;}},null,_3);_4=o.MethodName=b9.Class({get_Id:function(){return this.$0;}},null,_4);_5=o.Resource=b9.Class({},null,_5);N=j.View=b9.Class({},null,N);_7=_6.Dictionary=b9.Class({Clear:function(){this.data=[];this.count=0;},set_Item:function(cd,ce){this.set(cd,ce);},TryGetValue:function(cd,ce){var cf,cg,ch;cf=this;cg=this.data[this.hash(cd)];return cg==null?false:(ch=R.tryPick(function(ci){var cj;cj=l.KeyValue(ci);return cf.equals.apply(null,[cj[0],cd])?{$:1,$0:cj[1]}:null;},cg),ch!=null&&ch.$==1&&(ce.set(ch.$0),true));},Add:function(cd,ce){this.add(cd,ce);},ContainsKey:function(cd){var ce,cf;ce=this;cf=this.data[this.hash(cd)];return cf==null?false:R.exists(function(cg){return ce.equals.apply(null,[(l.KeyValue(cg))[0],cd]);},cf);},Remove:function(cd){return this.remove(cd);},get_Keys:function(){return new bK.New(this);},set:function(cd,ce){var cf,cg,ch,ci;cf=this;cg=this.hash(cd);ch=this.data[cg];ch==null?(this.count=this.count+1,this.data[cg]=new a.Array({K:cd,V:ce})):(ci=R.tryFindIndex(function(cj){return cf.equals.apply(null,[(l.KeyValue(cj))[0],cd]);},ch),ci==null?(this.count=this.count+1,ch.push({K:cd,V:ce})):ch[ci.$0]={K:cd,V:ce});},add:function(cd,ce){var cf,cg,ch;cf=this;cg=this.hash(cd);ch=this.data[cg];ch==null?(this.count=this.count+1,this.data[cg]=new a.Array({K:cd,V:ce})):(R.exists(function(ci){return cf.equals.apply(null,[(l.KeyValue(ci))[0],cd]);},ch)?bH.alreadyAdded():void 0,this.count=this.count+1,ch.push({K:cd,V:ce}));},remove:function(cd){var ce,cf,cg,ch;ce=this;cf=this.hash(cd);cg=this.data[cf];return cg==null?false:(ch=R.filter(function(ci){return!ce.equals.apply(null,[(l.KeyValue(ci))[0],cd]);},cg),R.length(ch)<cg.length&&(this.count=this.count-1,this.data[cf]=ch,true));},get_Item:function(cd){return this.get(cd);},get:function(cd){var ce,cf;ce=this;cf=this.data[this.hash(cd)];return cf==null?bH.notPresent():R.pick(function(cg){var ch;ch=l.KeyValue(cg);return ce.equals.apply(null,[ch[0],cd])?{$:1,$0:ch[1]}:null;},cf);},GetEnumerator:function(){return D.Get0(this);},GetEnumerator0:function(){return D.Get0(R.concat(w.GetFieldValues(this.data)));}},i,_7);_7.New$5=b9.Ctor(function(){_7.New$6.call(this,[],F.Equals,F.Hash);},_7);_7.New$6=b9.Ctor(function(cd,ce,cf){var cg,ch;i.New.call(this);this.equals=ce;this.hash=cf;this.count=0;this.data=[];cg=D.Get(cd);try{while(cg.MoveNext()){ch=cg.Current();this.set(ch.K,ch.V);}}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}},_7);L.Obsolete=function(cd){var ce,cf,cg,ch,ci;cf=cd.s;if(cf==null||(cf!=null&&cf.$==2?(ce=cf.$1,false):cf!=null&&cf.$==3?(ce=cf.$1,false):true))void 0;else{cd.s=null;for(cg=0,ch=R.length(ce)-1;cg<=ch;cg++){ci=R.get(ce,cg);typeof ci=="object"?function(cj){L.Obsolete(cj);}(ci):ci();}}};L.New=function(cd){return{s:cd};};q.Create=function(cd,ce){return q.CreateWithStorage(cd,bn.InMemory(R.ofSeq(ce)));};q.CreateWithStorage=function(cd,ce){return new q.New(cd,ce);};_9=_8.T=b9.Class({GetEnumerator:function(){return new E.New(this,null,function(cd){var ce;ce=cd.s;return ce.$==0?false:(cd.c=ce.$0,cd.s=ce.$1,true);},void 0);},GetEnumerator0:function(){return D.Get(this);}},null,_9);_9.Empty=new _9({$:0});_=G.DocComposition=b9.Class({GetDoc:function(){var cd,ce,cf,cg;function ch(ci,cj){return z.Element(ci.get_Id(),_9.Empty,cj);}return this.$==1?z.TextNode(a.String((this.$0.GetFunc())())):this.$==2?z.TextView(N.Map(a.String,(this.$0.GetFunc())())):this.$==3?z.TextView(N.Map(a.String,(this.$0.GetFunc())().get_View())):this.$==4?z.TextNode((this.$0.GetFunc())()):this.$==5?z.TextView((this.$0.GetFunc())()):this.$==6?z.TextView((this.$0.GetFunc())().get_View()):this.$==7?(this.$0.GetFunc())():this.$==8?z.EmbedView((this.$0.GetFunc())()):this.$==9?this.$0():this.$==10?(cd=(ce=this.$0,ce==null?null:{$:1,$0:(cf=ce.$0,function(ci){return ch(cf,ci);})}),(cd==null?z.Concat:cd.$0)(R.map(function(ci){return ci.GetDoc();},this.$1))):(cg=this.$0,z.Button(a.String(cg),[],cg.GetFunc()));}},null,_);$.ofSeqNonCopying=function(cd){var ce,cf;if(cd instanceof a.Array)return cd;else if(cd instanceof _9)return R.ofList(cd);else if(cd===null)return[];else{ce=[];cf=D.Get(cd);try{while(cf.MoveNext())ce.push(cf.Current());return ce;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}}};$.TreeReduce=function(cd,ce,cf){var cg;function ch(ci,cj){var ck,cl;return cj<=0?cd:cj===1&&(ci>=0&&ci<cg)?R.get(cf,ci):(cl=cj/2>>0,ce(ch(ci,cl),ch(ci+cl,cj-cl)));}cg=R.length(cf);return ch(0,cg);};$.MapTreeReduce=function(cd,ce,cf,cg){var ch;function ci(cj,ck){var cl,cm;return ck<=0?ce:ck===1&&(cj>=0&&cj<ch)?cd(R.get(cg,cj)):(cm=ck/2>>0,cf(ci(cj,cm),ci(cj+cm,ck-cm)));}ch=R.length(cg);return ci(0,ch);};$.mapInPlace=function(cd,ce){var cf,cg;for(cf=0,cg=ce.length-1;cf<=cg;cf++)ce[cf]=cd(ce[cf]);return ce;};ba.B={$:0};_8.ofArray=function(cd){var ce,cf,cg;ce=_9.Empty;for(cf=R.length(cd)-1,cg=0;cf>=cg;cf--)ce=new _9({$:1,$0:R.get(cd,cf),$1:ce});return ce;};_8.ofSeq=function(cd){var ce,cf,cg,ch,ci,cj;if(cd instanceof _9)return cd;else if(cd instanceof a.Array)return _8.ofArray(cd);else{ce=D.Get(cd);try{cg=ce.MoveNext();if(!cg)cf=_9.Empty;else{ci=new _9({$:1});ch=ci;while(cg){ch.$0=ce.Current();ce.MoveNext()?ch=(cj=new _9({$:1}),ch.$1=cj,cj):cg=false;}ch.$1=_9.Empty;cf=ci;}return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}}};_8.head=function(cd){return cd.$==1?cd.$0:_8.listEmpty();};_8.tail=function(cd){return cd.$==1?cd.$1:_8.listEmpty();};_8.listEmpty=function(){return l.FailWith("The input list was empty.");};bb.LinkElement=function(cd,ce){bb.InsertDoc(cd,ce,null);};bb.CreateTextNode=function(){return{Text:O.CreateText(""),Dirty:false,Value:""};};bb.UpdateTextNode=function(cd,ce){cd.Value=ce;cd.Dirty=true;};bb.InsertDoc=function(cd,ce,cf){var cg;return ce!=null&&ce.$==1?bb.InsertNode(cd,ce.$0.El,cf):ce!=null&&ce.$==2?(cg=ce.$0,(cg.Dirty=false,bb.InsertDoc(cd,cg.Current,cf))):ce==null?cf:ce!=null&&ce.$==4?bb.InsertNode(cd,ce.$0.Text,cf):ce!=null&&ce.$==5?bb.InsertNode(cd,ce.$0,cf):ce!=null&&ce.$==6?R.foldBack(function(ch,ci){return ch==null||ch.constructor===bl?bb.InsertDoc(cd,ch,ci):bb.InsertNode(cd,ch,ci);},ce.$0.Els,cf):bb.InsertDoc(cd,ce.$0,bb.InsertDoc(cd,ce.$1,cf));};bb.CreateRunState=function(cd,ce){return bM.New(bN.get_Empty(),bb.CreateElemNode(cd,bS.EmptyAttr(),ce));};bb.PerformAnimatedUpdate=function(cd,ce,cf){var cg;return bu.get_UseAnimations()?(cg=null,A.Delay(function(){var ch,ci,cj;ch=bN.FindAll(cf);ci=bb.ComputeChangeAnim(ce,ch);cj=bb.ComputeEnterAnim(ce,ch);return A.Bind(bu.Play(bu.Append(ci,bb.ComputeExitAnim(ce,ch))),function(){return A.Bind(bb.SyncElemNodesNextFrame(cd,ce),function(){return A.Bind(bu.Play(cj),function(){ce.PreviousNodes=ch;return A.Return(null);});});});})):bb.SyncElemNodesNextFrame(cd,ce);};bb.PerformSyncUpdate=function(cd,ce,cf){var cg;cg=bN.FindAll(cf);bb.SyncElemNode(cd,ce.Top);ce.PreviousNodes=cg;};bb.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bb.UpdateEmbedNode=function(cd,ce){cd.Current=ce;cd.Dirty=true;};bb.InsertNode=function(cd,ce,cf){O.InsertAt(cd,cf,ce);return ce;};bb.CreateElemNode=function(cd,ce,cf){var cg;bb.LinkElement(cd,cf);cg=bS.Insert(cd,ce);return by.New(cg,cf,null,cd,be.Int(),b9.GetOptional(cg.OnAfterRender));};bb.SyncElemNodesNextFrame=function(cd,ce){function cf(cg){a.requestAnimationFrame(function(){bb.SyncElemNode(cd,ce.Top);cg();});}return bv.BatchUpdatesEnabled()?A.FromContinuations(function(cg,ch,ci){return cf.apply(null,[cg,ch,ci]);}):(bb.SyncElemNode(cd,ce.Top),A.Return(null));};bb.ComputeExitAnim=function(cd,ce){return bu.Concat(R.map(function(cf){return bS.GetExitAnim(cf.Attr);},bN.ToArray(bN.Except(ce,bN.Filter(function(cf){return bS.HasExitAnim(cf.Attr);},cd.PreviousNodes)))));};bb.ComputeEnterAnim=function(cd,ce){return bu.Concat(R.map(function(cf){return bS.GetEnterAnim(cf.Attr);},bN.ToArray(bN.Except(cd.PreviousNodes,bN.Filter(function(cf){return bS.HasEnterAnim(cf.Attr);},ce)))));};bb.ComputeChangeAnim=function(cd,ce){var cf;function cg(ch){return bS.HasChangeAnim(ch.Attr);}cf=function(ch){return bN.Filter(cg,ch);};return bu.Concat(R.map(function(ch){return bS.GetChangeAnim(ch.Attr);},bN.ToArray(bN.Intersect(cf(cd.PreviousNodes),cf(ce)))));};bb.SyncElemNode=function(cd,ce){!cd?bb.SyncElement(ce):void 0;bb.Sync(ce.Children);bb.AfterRender(ce);};bb.SyncElement=function(cd){function ce(cf){function cg(ch){var ci,cj;return ch!=null&&ch.$==0?cg(ch.$0)||cg(ch.$1):ch!=null&&ch.$==2?(ci=ch.$0,ci.Dirty||cg(ci.Current)):ch!=null&&ch.$==6&&(cj=ch.$0,cj.Dirty||R.exists(ce,cj.Holes));}return cg(cf.Children);}bS.Sync(cd.El,cd.Attr);ce(cd)?bb.DoSyncElement(cd):void 0;};bb.Sync=function(cd){var ce,cf;if(cd!=null&&cd.$==1)bb.SyncElemNode(false,cd.$0);else if(cd!=null&&cd.$==2)bb.Sync(cd.$0.Current);else if(cd==null);else if(cd!=null&&cd.$==5);else if(cd!=null&&cd.$==4){ce=cd.$0;ce.Dirty?(ce.Text.nodeValue=ce.Value,ce.Dirty=false):void 0;}else if(cd!=null&&cd.$==6){cf=cd.$0;R.iter(function(cg){bb.SyncElemNode(false,cg);},cf.Holes);R.iter(function(cg){bS.Sync(cg[0],cg[1]);},cf.Attrs);bb.AfterRender(cf);}else{bb.Sync(cd.$0);bb.Sync(cd.$1);}};bb.AfterRender=function(cd){var ce;ce=b9.GetOptional(cd.Render);ce!=null&&ce.$==1?(ce.$0(cd.El),b9.SetOptional(cd,"Render",null)):void 0;};bb.DoSyncElement=function(cd){var ce,cf,cg;function ch(ci,cj){var ck,cl;return ci!=null&&ci.$==1?ci.$0.El:ci!=null&&ci.$==2?(ck=ci.$0,ck.Dirty?(ck.Dirty=false,bb.InsertDoc(ce,ck.Current,cj)):ch(ck.Current,cj)):ci==null?cj:ci!=null&&ci.$==4?ci.$0.Text:ci!=null&&ci.$==5?ci.$0:ci!=null&&ci.$==6?(cl=ci.$0,(cl.Dirty?cl.Dirty=false:void 0,R.foldBack(function(cm,cn){return cm==null||cm.constructor===bl?ch(cm,cn):cm;},cl.Els,cj))):ch(ci.$0,ch(ci.$1,cj));}ce=cd.El;b3.Iter((cf=cd.El,function(ci){O.RemoveNode(cf,ci);}),b3.Except(b3.DocChildren(cd),b3.Children(cd.El,b9.GetOptional(cd.Delimiters))));ch(cd.Children,(cg=b9.GetOptional(cd.Delimiters),cg!=null&&cg.$==1?cg.$0[1]:null));};bc.New=function(cd,ce){return{c:cd,r:ce};};be.Int=function(){be.set_counter(be.counter()+1);return be.counter();};be.set_counter=function(cd){bQ.$cctor();bQ.counter=cd;};be.counter=function(){bQ.$cctor();return bQ.counter;};bf=j.AttrProxy=b9.Class({},null,bf);bf.Concat=function(cd){var ce;ce=$.ofSeqNonCopying(cd);return $.TreeReduce(bS.EmptyAttr(),bf.Append,ce);};bf.Append=function(cd,ce){return bS.AppendTree(cd,ce);};bf.HandlerImpl=function(cd,ce){return bS.Static(function(cf){cf.addEventListener(cd,function(cg){return(ce(cf))(cg);},false);});};bf.Create=function(cd,ce){return bS.Static(function(cf){O.SetAttr(cf,cd,ce);});};bg=A.Scheduler=b9.Class({Fork:function(cd){var ce;ce=this;this.robin.push(cd);this.idle?(this.idle=false,a.setTimeout(function(){ce.tick();},0)):void 0;},tick:function(){var cd,ce,cf;ce=this;cf=cb.now();cd=true;while(cd)if(this.robin.length===0){this.idle=true;cd=false;}else{(this.robin.shift())();cb.now()-cf>40?(a.setTimeout(function(){ce.tick();},0),cd=false):void 0;}}},i,bg);bg.New=b9.Ctor(function(){i.New.call(this);this.idle=true;this.robin=[];},bg);bh.concat=function(cd,ce){return R.ofSeq(ce).join(cd);};bh.StartsWith=function(cd,ce){return cd.substring(0,ce.length)==ce;};bh.ReplaceChar=function(cd,ce,cf){return bh.Replace(cd,ce,cf);};bh.Replace=function(cd,ce,cf){function cg(ch){var ci,cj,ck;ci=ch.indexOf(ce);return ci!==-1?(cj=bh.ReplaceOnce(ch,ce,cf),(ck=ci+cf.length,bh.Substring(cj,0,ci+cf.length)+cg(cj.substring(ck)))):ch;}return cg(cd);};bh.SplitChars=function(cd,ce,cf){return bh.Split(cd,new a.RegExp("["+bh.RegexEscape(ce.join(""))+"]"),cf);};bh.ReplaceOnce=function(cd,ce,cf){return cd.replace(ce,cf);};bh.Split=function(cd,ce,cf){return cf===1?R.filter(function(cg){return cg!=="";},bh.SplitWith(cd,ce)):bh.SplitWith(cd,ce);};bh.RegexEscape=function(cd){return cd.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bh.Substring=function(cd,ce,cf){return cd.substr(ce,cf);};bh.SplitWith=function(cd,ce){return cd.split(ce);};bj.AsyncMap=function(cd,ce){var cf;cf=null;return A.Delay(function(){return A.Bind(cd,function(cg){return A.Return(ce(cg));});});};bk.randomFunctionName=function(){var cd;return bh.ReplaceChar((cd=bC.NewGuid(),a.String(cd)).toLowerCase(),"-","_");};bm.$cctor=function(){bm.$cctor=a.ignore;bm.noneCT=bc.New(false,[]);bm.scheduler=new bg.New();bm.defCTS=[new bD.New()];bm.Zero=A.Return();bm.GetCT=function(cd){cd.k({$:0,$0:cd.ct});};};bn.InMemory=function(cd){return new bE.New(cd);};bo=G.Reference=b9.Class({GetFunc:function(){var cd,ce;function cf(cg,ch){try{return(a["eval"](cg))(ch);}catch(ci){return(((b9.Curried3(function(cj,ck,cl){return cj("Error "+S.toSafe(ck)+" \n Evaluating JS: "+S.toSafe(cl));}))(l.FailWith))(ci.message))(cg);}}return this.$==0?(cd=this.$0,function(cg){return cf(cd,cg);}):this.$==1?(ce=(((b9.Curried3(function(cg,ch,ci){return cg(S.toSafe(ch)+"."+S.toSafe(ci));}))(a.id))(this.$0.get_Id2()))(this.$1.name.get_Id()),function(cg){return cf(ce,cg);}):this.$0;},toString:function(){return this.$==0?this.$0:this.$==1?(((b9.Curried3(function(cd,ce,cf){return cd(S.toSafe(ce)+"."+S.toSafe(cf));}))(a.id))(this.$0.get_Id2()))(this.$1.name.get_Id()):this.$1;}},null,bo);bp=G.HtmlElemTag=b9.Class({get_Id:function(){return this.$0;},toString:function(){return(function(cd){return function(ce){return cd("<"+S.toSafe(ce)+">");};}(a.id))(this.get_Id());}},null,bp);br=h.OperationCanceledException=b9.Class({},bq,br);br.New=b9.Ctor(function(cd){br.New$1.call(this,"The operation was canceled.",null,cd);},br);br.New$1=b9.Ctor(function(cd,ce,cf){this.message=cd;this.inner=ce;bl.setPrototypeOf(this,br.prototype);this.ct=cf;},br);bs.$cctor=function(){bs.$cctor=a.ignore;bs.LoadedTemplates=new _7.New$5();bs.LocalTemplatesLoaded=false;bs.TextHoleRE="\\${([^}]+)}";};bt=_6.HashSet=b9.Class({Add:function(cd){return this.add(cd);},Contains:function(cd){var ce;ce=this.data[this.hash(cd)];return ce==null?false:this.arrContains(cd,ce);},add:function(cd){var ce,cf;ce=this.hash(cd);cf=this.data[ce];return cf==null?(this.data[ce]=[cd],this.count=this.count+1,true):this.arrContains(cd,cf)?false:(cf.push(cd),this.count=this.count+1,true);},arrContains:function(cd,ce){var cf,cg,ch,ci;cf=true;cg=0;ci=ce.length;while(cf&&cg<ci)if(this.equals.apply(null,[ce[cg],cd]))cf=false;else cg=cg+1;return!cf;},ExceptWith:function(cd){var ce;ce=D.Get(cd);try{while(ce.MoveNext())this.Remove(ce.Current());}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cd){var ce,cf,cg,ch;ce=0;cf=b0.concat(this.data);for(cg=0,ch=cf.length-1;cg<=ch;cg++)R.set(cd,cg,cf[cg]);},IntersectWith:function(cd){var ce,cf,cg,ch,ci;ce=new bt.New$4(cd,this.equals,this.hash);cf=b0.concat(this.data);for(cg=0,ch=cf.length-1;cg<=ch;cg++){ci=cf[cg];!ce.Contains(ci)?this.Remove(ci):void 0;}},Remove:function(cd){var ce;ce=this.data[this.hash(cd)];return ce==null?false:this.arrRemove(cd,ce)&&(this.count=this.count-1,true);},arrRemove:function(cd,ce){var cf,cg,ch,ci;cf=true;cg=0;ci=ce.length;while(cf&&cg<ci)if(this.equals.apply(null,[ce[cg],cd])){ce.splice.apply(ce,[cg,1]);cf=false;}else cg=cg+1;return!cf;},GetEnumerator:function(){return D.Get(b0.concat(this.data));},GetEnumerator0:function(){return D.Get(b0.concat(this.data));}},i,bt);bt.New$3=b9.Ctor(function(){bt.New$4.call(this,[],F.Equals,F.Hash);},bt);bt.New$4=b9.Ctor(function(cd,ce,cf){var cg;i.New.call(this);this.equals=ce;this.hash=cf;this.data=[];this.count=0;cg=D.Get(cd);try{while(cg.MoveNext())this.add(cg.Current());}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}},bt);bt.New$2=b9.Ctor(function(cd){bt.New$4.call(this,cd,F.Equals,F.Hash);},bt);bu.get_UseAnimations=function(){return bO.UseAnimations();};bu.Play=function(cd){var ce;ce=null;return A.Delay(function(){return A.Bind(bu.Run(a.ignore,bO.Actions(cd)),function(){bO.Finalize(cd);return A.Return(null);});});};bu.Append=function(cd,ce){return{$:0,$0:bW.Append(cd.$0,ce.$0)};};bu.Run=function(cd,ce){var cf;function cg(ch){function ci(cj,ck){var cl;cl=ck-cj;ce.Compute(cl);cd();return cl<=cf?void a.requestAnimationFrame(function(cm){ci(cj,cm);}):ch();}a.requestAnimationFrame(function(cj){ci(cj,cj);});}cf=ce.Duration;return cf===0?A.Zero():A.FromContinuations(function(ch,ci,cj){return cg.apply(null,[ch,ci,cj]);});};bu.Concat=function(cd){return{$:0,$0:bW.Concat(r.map(bO.List,cd))};};bu.get_Empty=function(){return{$:0,$0:bW.Empty()};};bv.BatchUpdatesEnabled=function(){bP.$cctor();return bP.BatchUpdatesEnabled;};bw.StartProcessor=function(cd){var ce;function cf(){var cg;cg=null;return A.Delay(function(){return A.Bind(cd,function(){var ch;ch=ce[0];return ch===1?(ce[0]=0,A.Zero()):ch===2?(ce[0]=1,cf()):A.Zero();});});}ce=[0];return function(){var cg;cg=ce[0];cg===0?(ce[0]=1,A.Start(cf(),null)):cg===1?ce[0]=2:void 0;};};bx=j.Elt=b9.Class({},z,bx);bx.New=function(cd,ce,cf){var cg,ch;cg=bb.CreateElemNode(cd,ce,cf.docNode);ch=bR.Create(cf.updates);return new bx.New$1({$:1,$0:cg},N.Map2Unit(bS.Updates(cg.Attr),ch.v),cd,ch);};bx.New$1=b9.Ctor(function(cd,ce,cf,cg){z.New.call(this,cd,ce);this.docNode$1=cd;this.updates$1=ce;this.elt=cf;this.rvUpdates=cg;},bx);by=j.DocElemNode=b9.Class({Equals:function(cd){return this.ElKey===cd.ElKey;},GetHashCode:function(){return this.ElKey;}},null,by);by.New=function(cd,ce,cf,cg,ch,ci){var cj;return new by((cj={Attr:cd,Children:ce,El:cg,ElKey:ch},(b9.SetOptional(cj,"Delimiters",cf),b9.SetOptional(cj,"Render",ci),cj)));};bA.$cctor=function(){bA.$cctor=a.ignore;bA.Doc=self.document;};bC.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cd){var ce,cf;ce=cc.random()*16|0;cf=cd=="x"?ce:ce&3|8;return cf.toString(16);});};bD=h.CancellationTokenSource=b9.Class({},i,bD);bD.New=b9.Ctor(function(){i.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bD);bE=bn.ArrayStorage=b9.Class({SSet:function(cd){return R.ofSeq(cd);},SSetAt:function(cd,ce,cf){R.set(cf,cd,ce);return cf;},SAppend:function(cd,ce){ce.push(cd);return ce;},SInit:function(){return this.init;}},i,bE);bE.New=b9.Ctor(function(cd){i.New.call(this);this.init=cd;},bE);bG=bF.attr=b9.Class({},i,bG);R.mapFold=function(cd,ce,cf){var cg,ch,ci,cj,ck;ch=new a.Array(cf.length);cg=ce;for(ci=0,cj=cf.length-1;ci<=cj;ci++){ck=cd(cg,cf[ci]);ch[ci]=ck[0];cg=ck[1];}return[ch,cg];};r.insufficient=function(){return l.FailWith("The input sequence has an insufficient number of elements.");};bH.alreadyAdded=function(){return l.FailWith("An item with the same key has already been added.");};bH.notPresent=function(){return l.FailWith("The given key was not present in the dictionary.");};bI.convertTextNode=function(cd){var ce,cf,cg,ch,ci,cj;ce=null;cf=0;ch=cd.textContent;ci=new a.RegExp(I.TextHoleRE(),"g");while(ce=ci.exec(ch),ce!==null){cd.parentNode.insertBefore(self.document.createTextNode(bJ.string(ch,{$:1,$0:cf},{$:1,$0:ci.lastIndex-R.get(ce,0).length-1})),cd);cf=ci.lastIndex;cj=self.document.createElement("span");cj.setAttribute("ws-replace",R.get(ce,1).toLowerCase());cd.parentNode.insertBefore(cj,cd);}ci.lastIndex=0;cd.textContent=bJ.string(ch,{$:1,$0:cf},null);};bI.failNotLoaded=function(cd){b_.warn("Instantiating non-loaded template",cd);};bI.fillTextHole=function(cd,ce,cf){var cg;cg=cd.querySelector("[ws-replace]");return F.Equals(cg,null)?(b_.warn("Filling non-existent text hole",cf),null):(cg.parentNode.replaceChild(new a.Text(ce),cg),{$:1,$0:cg.getAttribute("ws-replace")});};bI.removeHolesExcept=function(cd,ce){function cf(cg){O.IterSelector(cd,"["+cg+"]",function(ch){if(!ce.Contains(ch.getAttribute(cg)))ch.removeAttribute(cg);});}cf("ws-attr");cf("ws-onafterrender");cf("ws-var");O.IterSelector(cd,"[ws-hole]",function(cg){if(!ce.Contains(cg.getAttribute("ws-hole"))){cg.removeAttribute("ws-hole");while(cg.hasChildNodes())cg.removeChild(cg.lastChild);}});O.IterSelector(cd,"[ws-replace]",function(cg){if(!ce.Contains(cg.getAttribute("ws-replace")))cg.parentNode.removeChild(cg);});O.IterSelector(cd,"[ws-on]",function(cg){cg.setAttribute("ws-on",bh.concat(" ",R.filter(function(ch){return ce.Contains(R.get(bh.SplitChars(ch,[":"],1),1));},bh.SplitChars(cg.getAttribute("ws-on"),[" "],1))));});O.IterSelector(cd,"[ws-attr-holes]",function(cg){var ch,ci,cj,ck,cl;ch=bh.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=R.get(ch,ci);cg.setAttribute(ck,(cl=new a.RegExp(I.TextHoleRE(),"g"),cg.getAttribute(ck).replace(cl,function(cm,cn){return ce.Contains(cn)?cm:"";})));}});};bI.fillInstanceAttrs=function(cd,ce){var cf,cg,ch,ci,cj;bI.convertAttrs(ce);cf=ce.nodeName.toLowerCase();cg=cd.querySelector("[ws-attr="+cf+"]");if(F.Equals(cg,null))b_.warn("Filling non-existent attr hole",cf);else{cg.removeAttribute("ws-attr");for(ch=0,ci=ce.attributes.length-1;ch<=ci;ch++){cj=ce.attributes.item(ch);cj.name==="class"&&cg.hasAttribute("class")?cg.setAttribute("class",cg.getAttribute("class")+" "+cj.nodeValue):cg.setAttribute(cj.name,cj.nodeValue);}}};bI.mapHoles=function(cd,ce){function cf(cg){O.IterSelector(cd,"["+cg+"]",function(ch){var ci,cj;ci=(cj=null,[ce.TryGetValue(ch.getAttribute(cg).toLowerCase(),{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);ci[0]?ch.setAttribute(cg,ci[1]):void 0;});}cf("ws-hole");cf("ws-replace");cf("ws-attr");cf("ws-onafterrender");cf("ws-var");O.IterSelector(cd,"[ws-on]",function(cg){cg.setAttribute("ws-on",bh.concat(" ",R.map(function(ch){var ci,cj,ck;ci=bh.SplitChars(ch,[":"],1);cj=(ck=null,[ce.TryGetValue(R.get(ci,1),{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]);return cj[0]?R.get(ci,0)+":"+cj[1]:ch;},bh.SplitChars(cg.getAttribute("ws-on"),[" "],1))));});O.IterSelector(cd,"[ws-attr-holes]",function(cg){var ch,ci,cj;ch=bh.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);for(ci=0,cj=ch.length-1;ci<=cj;ci++)(function(){var ck;function cl(cm,cn){var co;co=l.KeyValue(cn);return cm.replace(new a.RegExp("\\${"+co[0]+"}","ig"),"${"+co[1]+"}");}ck=R.get(ch,ci);return cg.setAttribute(ck,(((b9.Curried3(r.fold))(cl))(cg.getAttribute(ck)))(ce));}());});};bI.fill=function(cd,ce,cf){while(true)if(cd.hasChildNodes())cf=ce.insertBefore(cd.lastChild,cf);else return null;};bI.convertAttrs=function(cd){var cf,cg,ch,ci,cj,ck,cl,cm;function ce(cn){var co;co=cd.getAttribute(cn);co===null?void 0:cd.setAttribute(cn,co.toLowerCase());}cf=cd.attributes;cg=[];ch=[];ci=[];for(cj=0,ck=cf.length-1;cj<=ck;cj++){cl=cf.item(cj);bh.StartsWith(cl.nodeName,"ws-on")&&cl.nodeName!=="ws-onafterrender"&&cl.nodeName!=="ws-on"?(cg.push(cl.nodeName),ch.push(bJ.string(cl.nodeName,{$:1,$0:"ws-on".length},null)+":"+cl.nodeValue.toLowerCase())):!bh.StartsWith(cl.nodeName,"ws-")&&(new a.RegExp(I.TextHoleRE())).test(cl.nodeValue)?(cl.nodeValue=(cm=new a.RegExp(I.TextHoleRE(),"g"),cl.nodeValue.replace(cm,function(cn,co){return"${"+co.toLowerCase()+"}";})),ci.push(cl.nodeName)):void 0;}!(ch.length==0)?cd.setAttribute("ws-on",bh.concat(" ",ch)):void 0;!(ci.length==0)?cd.setAttribute("ws-attr-holes",bh.concat(" ",ci)):void 0;ce("ws-hole");ce("ws-replace");ce("ws-attr");ce("ws-onafterrender");ce("ws-var");R.iter(function(cn){cd.removeAttribute(cn);},cg);};bJ.string=function(cd,ce,cf){return ce==null?cf!=null&&cf.$==1?cd.slice(0,cf.$0+1):"":cf==null?cd.slice(ce.$0):cd.slice(ce.$0,cf.$0+1);};bK=_6.KeyCollection=b9.Class({GetEnumerator$1:function(){return D.Get(r.map(function(cd){return cd.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},i,bK);bK.New=b9.Ctor(function(cd){i.New.call(this);this.d=cd;},bK);bM.New=function(cd,ce){return{PreviousNodes:cd,Top:ce};};bN.get_Empty=function(){return{$:0,$0:new bt.New$3()};};bN.FindAll=function(cd){var ce;function cf(ch){if(ch!=null&&ch.$==0){cf(ch.$0);cf(ch.$1);}else if(ch!=null&&ch.$==1)cg(ch.$0);else if(ch!=null&&ch.$==2)cf(ch.$0.Current);else if(ch!=null&&ch.$==6)R.iter(cg,ch.$0.Holes);}function cg(ch){ce.push(ch);cf(ch.Children);}ce=[];cf(cd);return{$:0,$0:new bt.New$2(ce)};};bN.Filter=function(cd,ce){return{$:0,$0:bZ.Filter(cd,ce.$0)};};bN.Except=function(cd,ce){return{$:0,$0:bZ.Except(cd.$0,ce.$0)};};bN.ToArray=function(cd){return bZ.ToArray(cd.$0);};bN.Intersect=function(cd,ce){return{$:0,$0:bZ.Intersect(cd.$0,ce.$0)};};bO.UseAnimations=function(){bV.$cctor();return bV.UseAnimations;};bO.Actions=function(cd){return bO.ConcatActions(R.choose(function(ce){return ce.$==1?{$:1,$0:ce.$0}:null;},bW.ToArray(cd.$0)));};bO.Finalize=function(cd){R.iter(function(ce){if(ce.$==0)ce.$0();},bW.ToArray(cd.$0));};bO.ConcatActions=function(cd){var ce,cf,cg,ch;ce=$.ofSeqNonCopying(cd);cf=R.length(ce);return cf===0?bO.Const():cf===1?R.get(ce,0):(cg=r.max(r.map(function(ci){return ci.Duration;},ce)),(ch=R.map(function(ci){return bO.Prolong(cg,ci);},ce),bO.Def(cg,function(ci){R.iter(function(cj){cj.Compute(ci);},ch);})));};bO.List=function(cd){return cd.$0;};bO.Const=function(cd){return bO.Def(0,function(){return cd;});};bO.Def=function(cd,ce){return{Compute:ce,Duration:cd};};bO.Prolong=function(cd,ce){var cf,cg,ch;cf=ce.Compute;cg=ce.Duration;ch=b4.Create(function(){return ce.Compute(ce.Duration);});return{Compute:function(ci){return ci>=cg?ch.f():cf(ci);},Duration:cd};};bP.$cctor=function(){bP.$cctor=a.ignore;bP.BatchUpdatesEnabled=true;};bQ.$cctor=function(){bQ.$cctor=a.ignore;bQ.counter=0;};bR=j.Updates=b9.Class({},null,bR);bR.Create=function(cd){var ce;ce=null;ce=bR.New(cd,null,function(){var cf;cf=ce.s;return cf===null?(cf=L.Copy(ce.c()),ce.s=cf,L.WhenObsoleteRun(cf,function(){ce.s=null;}),cf):cf;});return ce;};bR.New=function(cd,ce,cf){return new bR({c:cd,s:ce,v:cf});};bS.Updates=function(cd){return $.MapTreeReduce(function(ce){return ce.NChanged();},N.Const(),N.Map2Unit,cd.DynNodes);};bS.AppendTree=function(cd,ce){var cf;return cd===null?ce:ce===null?cd:(cf=new bf({$:2,$0:cd,$1:ce}),(bS.SetFlags(cf,bS.Flags(cd)|bS.Flags(ce)),cf));};bS.EmptyAttr=function(){bX.$cctor();return bX.EmptyAttr;};bS.Static=function(cd){return new bf({$:3,$0:cd});};bS.Insert=function(cd,ce){var cf,cg,ch;function ci(cj){if(!(cj===null))if(cj!=null&&cj.$==1)cf.push(cj.$0);else if(cj!=null&&cj.$==2){ci(cj.$0);ci(cj.$1);}else if(cj!=null&&cj.$==3)cj.$0(cd);else if(cj!=null&&cj.$==4)cg.push(cj.$0);}cf=[];cg=[];ci(ce);ch=cf.slice(0);return bU.New(cd,bS.Flags(ce),ch,cg.length===0?null:{$:1,$0:function(cj){r.iter(function(ck){ck(cj);},cg);}});};bS.HasExitAnim=function(cd){var ce;ce=2;return(cd.DynFlags&ce)===ce;};bS.GetExitAnim=function(cd){return bS.GetAnim(cd,function(ce,cf){return ce.NGetExitAnim(cf);});};bS.HasEnterAnim=function(cd){var ce;ce=1;return(cd.DynFlags&ce)===ce;};bS.GetEnterAnim=function(cd){return bS.GetAnim(cd,function(ce,cf){return ce.NGetEnterAnim(cf);});};bS.HasChangeAnim=function(cd){var ce;ce=4;return(cd.DynFlags&ce)===ce;};bS.GetChangeAnim=function(cd){return bS.GetAnim(cd,function(ce,cf){return ce.NGetChangeAnim(cf);});};bS.SetFlags=function(cd,ce){cd.flags=ce;};bS.Flags=function(cd){return cd!==null&&cd.hasOwnProperty("flags")?cd.flags:0;};bS.Dynamic=function(cd,ce){return new bf({$:1,$0:new b1.New(cd,ce)});};bS.GetAnim=function(cd,ce){return bu.Concat(R.map(function(cf){return ce(cf,cd.DynElem);},cd.DynNodes));};bS.Sync=function(cd,ce){R.iter(function(cf){cf.NSync(cd);},ce.DynNodes);};bU.New=function(cd,ce,cf,cg){var ch;ch={DynElem:cd,DynFlags:ce,DynNodes:cf};b9.SetOptional(ch,"OnAfterRender",cg);return ch;};bV.$cctor=function(){bV.$cctor=a.ignore;bV.CubicInOut=bY.Custom(function(cd){var ce;ce=cd*cd;return 3*ce-2*(ce*cd);});bV.UseAnimations=true;};bW.Append=function(cd,ce){return cd.$==0?ce:ce.$==0?cd:{$:2,$0:cd,$1:ce};};bW.ToArray=function(cd){var ce;function cf(cg){if(cg.$==1)ce.push(cg.$0);else if(cg.$==2){cf(cg.$0);cf(cg.$1);}else if(cg.$==3)R.iter(function(ch){ce.push(ch);},cg.$0);}ce=[];cf(cd);return ce.slice(0);};bW.Concat=function(cd){var ce;ce=$.ofSeqNonCopying(cd);return $.TreeReduce(bW.Empty(),bW.Append,ce);};bW.Empty=function(){b5.$cctor();return b5.Empty;};bX.$cctor=function(){bX.$cctor=a.ignore;bX.EmptyAttr=null;};bY=j.Easing=b9.Class({},i,bY);bY.Custom=function(cd){return new bY.New(cd);};bY.New=b9.Ctor(function(cd){i.New.call(this);this.transformTime=cd;},bY);bZ.Filter=function(cd,ce){return new bt.New$2(R.filter(cd,bZ.ToArray(ce)));};bZ.Except=function(cd,ce){var cf;cf=new bt.New$2(bZ.ToArray(ce));cf.ExceptWith(bZ.ToArray(cd));return cf;};bZ.ToArray=function(cd){var ce;ce=R.create(cd.get_Count(),void 0);cd.CopyTo(ce);return ce;};bZ.Intersect=function(cd,ce){var cf;cf=new bt.New$2(bZ.ToArray(cd));cf.IntersectWith(bZ.ToArray(ce));return cf;};b0.concat=function(cd){var ce,cf;ce=[];for(var cg in cd)ce.push.apply(ce,cd[cg]);return ce;};b1=j.DynamicAttrNode=b9.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cd){return bu.get_Empty();},NGetEnterAnim:function(cd){return bu.get_Empty();},NGetChangeAnim:function(cd){return bu.get_Empty();},NSync:function(cd){if(this.dirty){(this.push(cd))(this.value);this.dirty=false;}}},i,b1);b1.New=b9.Ctor(function(cd,ce){var cf;cf=this;i.New.call(this);this.push=ce;this.value=void 0;this.dirty=false;this.updates=N.Map(function(cg){cf.value=cg;cf.dirty=true;},cd);},b1);b2.Clear=function(cd){cd.splice(0,R.length(cd));};b3.Children=function(cd,ce){var cf,cg,ch;if(ce!=null&&ce.$==1){ch=[];cf=ce.$0[0].nextSibling;while(cf!==ce.$0[1]){ch.push(cf);cf=cf.nextSibling;}return{$:0,$0:ch};}else return{$:0,$0:R.init(cd.childNodes.length,(cg=cd.childNodes,function(ci){return cg[ci];}))};};b3.Except=function(cd,ce){var cf;cf=cd.$0;return{$:0,$0:R.filter(function(cg){return R.forall(function(ch){return!(cg===ch);},cf);},ce.$0)};};b3.Iter=function(cd,ce){R.iter(cd,ce.$0);};b3.DocChildren=function(cd){var ce;function cf(cg){if(cg!=null&&cg.$==2)cf(cg.$0.Current);else if(cg!=null&&cg.$==1)ce.push(cg.$0.El);else if(cg==null);else if(cg!=null&&cg.$==5)ce.push(cg.$0);else if(cg!=null&&cg.$==4)ce.push(cg.$0.Text);else if(cg!=null&&cg.$==6)R.iter(function(ch){if(ch==null||ch.constructor===bl)cf(ch);else ce.push(ch);},cg.$0.Els);else{cf(cg.$0);cf(cg.$1);}}ce=[];cf(cd.Children);return{$:0,$0:$.ofSeqNonCopying(ce)};};b4.Create=function(cd){return b7.New(false,cd,b4.forceLazy);};b4.forceLazy=function(){var cd;cd=this.v();this.c=true;this.v=cd;this.f=b4.cachedLazy;return cd;};b4.cachedLazy=function(){return this.v;};b5.$cctor=function(){b5.$cctor=a.ignore;b5.Empty={$:0};};b7.New=function(cd,ce,cf){return{c:cd,v:ce,f:cf};};b9.OnLoad(function(){f.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

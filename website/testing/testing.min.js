function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9;a=self;b=a.FsRootDll=a.FsRootDll||{};c=b.TestingJS=b.TestingJS||{};d=c.SnippetTemplates=c.SnippetTemplates||{};e=c.AppFrameworkUI=c.AppFrameworkUI||{};f=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};g=a.WebSharper=a.WebSharper||{};h=g.Operators=g.Operators||{};i=b.LibraryJS=b.LibraryJS||{};j=i.StartAppFramework=i.StartAppFramework||{};k=b.Library=b.Library||{};l=k.Monads=k.Monads||{};m=l.Depend=l.Depend||{};n=g.List=g.List||{};o=i.AppFrameworkTemplate=i.AppFrameworkTemplate||{};p=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};q=g.Seq=g.Seq||{};r=n.T=n.T||{};s=g.Arrays=g.Arrays||{};t=g.Obj=g.Obj||{};u=l.State=l.State||{};v=u.CEBuilder=u.CEBuilder||{};w=l.Result=l.Result||{};x=w.Builder=w.Builder||{};y=m.DependBuilder=m.DependBuilder||{};z=k.String=k.String||{};A=g.Strings=g.Strings||{};B=g.Slice=g.Slice||{};C=k.ParseO=k.ParseO||{};D=g.Unchecked=g.Unchecked||{};E=g.Numeric=g.Numeric||{};F=a.System=a.System||{};G=F.Guid=F.Guid||{};H=g.Lazy=g.Lazy||{};I=i.WebComponent=i.WebComponent||{};J=I.WcTabStrip=I.WcTabStrip||{};K=J.WcTabStripT=J.WcTabStripT||{};L=g.UI=g.UI||{};M=L.Doc=L.Doc||{};N=L.ListModel=L.ListModel||{};O=i.AppFramework=i.AppFramework||{};P=O.PlugIn=O.PlugIn||{};Q=L.Var$1=L.Var$1||{};R=O.PlugInName=O.PlugInName||{};S=L.Var=L.Var||{};T=L.View=L.View||{};U=L.Templating=L.Templating||{};V=U.Runtime=U.Runtime||{};W=V.Server=V.Server||{};X=W.TemplateInstance=W.TemplateInstance||{};Y=W.ProviderBuilder=W.ProviderBuilder||{};Z=W.Handler=W.Handler||{};_0=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};_1=a.GeneratedPrintf=a.GeneratedPrintf||{};_2=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};_3=O.PlugInBuilder=O.PlugInBuilder||{};_4=O.Val=O.Val||{};_5=O.Extract0=O.Extract0||{};_6=g.Utils=g.Utils||{};_7=m.Operators=m.Operators||{};_8=O.AAttr=O.AAttr||{};_9=g.JavaScript=g.JavaScript||{};_=_9.Pervasives=_9.Pervasives||{};$=O.PlugInAction=O.PlugInAction||{};ba=a.EventTarget;bb=a.Node;bc=L.AttrProxy=L.AttrProxy||{};bd=L.AttrModule=L.AttrModule||{};be=g.Collections=g.Collections||{};bf=be.FSharpSet=be.FSharpSet||{};bg=L.HtmlModule=L.HtmlModule||{};bh=bg.attr=bg.attr||{};bi=O.PlugInDoc=O.PlugInDoc||{};bj=i.View=i.View||{};bk=a.WindowOrWorkerGlobalScope;bl=_9.JS=_9.JS||{};bm=O.PlgElemName=O.PlgElemName||{};bn=L.Input=L.Input||{};bo=bn.Mouse=bn.Mouse||{};bp=bn.Keyboard=bn.Keyboard||{};bq=I.WcSplitter=I.WcSplitter||{};br=i.LM=i.LM||{};bs=i.AppFrameworkUI=i.AppFrameworkUI||{};bt=O.ListModelData=O.ListModelData||{};bu=O.PlugInVar=O.PlugInVar||{};bv=O.PlugInView=O.PlugInView||{};bw=i.LayoutEngineModule=i.LayoutEngineModule||{};bx=i.NewLY=i.NewLY||{};by=O.P=O.P||{};bz=g.Enumerator=g.Enumerator||{};bA=g.DateUtil=g.DateUtil||{};bB=g.LazyExtensionsProxy=g.LazyExtensionsProxy||{};bC=bB.LazyRecord=bB.LazyRecord||{};bD=O.PlugInQuery=O.PlugInQuery||{};bE=L.ConcreteVar=L.ConcreteVar||{};bF=L.Snap=L.Snap||{};bG=be.Dictionary=be.Dictionary||{};bH=L.FromView=L.FromView||{};bI=be.List=be.List||{};bJ=be.HashSet=be.HashSet||{};bK=V.Client=V.Client||{};bL=L.Array=L.Array||{};bM=a.Object;bN=bz.T=bz.T||{};bO=L.Attrs=L.Attrs||{};bP=be.BalancedTree=be.BalancedTree||{};bQ=be.Set=be.Set||{};bR=L.Docs=L.Docs||{};bS=a.Event;bT=a.UIEvent;bU=bn.MousePosSt=bn.MousePosSt||{};bV=bn.MouseBtnSt=bn.MouseBtnSt||{};bW=bn.KeyListenerSt=bn.KeyListenerSt||{};bX=bq.WcSplitterT=bq.WcSplitterT||{};bY=L.Client=L.Client||{};bZ=bY.Templates=bY.Templates||{};b0=i.ListModel=i.ListModel||{};b1=L.ViewBuilder=L.ViewBuilder||{};b2=O.Fun=O.Fun||{};b3=L.Abbrev=L.Abbrev||{};b4=b3.Fresh=b3.Fresh||{};b5=bw.Syntax=bw.Syntax||{};b6=b5.TemplateDef=b5.TemplateDef||{};b7=L.DomUtility=L.DomUtility||{};b8=i.Hoverable=i.Hoverable||{};b9=b8.Hoverable=b8.Hoverable||{};b_=g.CancellationTokenSource=g.CancellationTokenSource||{};b$=L.Storage=L.Storage||{};ca=L.CheckedInput=L.CheckedInput||{};cb=be.DictionaryUtil=be.DictionaryUtil||{};cc=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cd=L.DynamicAttrNode=L.DynamicAttrNode||{};ce=bP.Tree=bP.Tree||{};cf=L.DocElemNode=L.DocElemNode||{};cg=a.StartupCode$WebSharper_UI$Input=a.StartupCode$WebSharper_UI$Input||{};ch=i.ResizeObserver=i.ResizeObserver||{};ci=L.Elt=L.Elt||{};cj=a.Error;ck=g.AggregateException=g.AggregateException||{};cl=g.Concurrency=g.Concurrency||{};cm=a.CharacterData;cn=b$.ArrayStorage=b$.ArrayStorage||{};co=bY.Attrs=bY.Attrs||{};cp=co.Dyn=co.Dyn||{};cq=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};cr=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};cs=i.LayoutEngine=i.LayoutEngine||{};ct=g.FormatException=g.FormatException||{};cu=L.Updates=L.Updates||{};cv=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cw=L.An=L.An||{};cx=bY.Settings=bY.Settings||{};cy=b3.Mailbox=b3.Mailbox||{};cz=cl.CT=cl.CT||{};cA=cl.AsyncBody=cl.AsyncBody||{};cB=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};cC=bZ.Prepare=bZ.Prepare||{};cD=be.KeyCollection=be.KeyCollection||{};cE=be.HashSetUtil=be.HashSetUtil||{};cF=bY.Docs=bY.Docs||{};cG=cF.RunState=cF.RunState||{};cH=cF.NodeSet=cF.NodeSet||{};cI=L.Anims=L.Anims||{};cJ=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cK=cl.Scheduler=cl.Scheduler||{};cL=g.OperationCanceledException=g.OperationCanceledException||{};cM=g.Queue=g.Queue||{};cN=g.Result=g.Result||{};cO=be.FSharpMap=be.FSharpMap||{};cP=b5.RefType=b5.RefType||{};cQ=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cR=L.AppendList=L.AppendList||{};cS=L.String=L.String||{};cT=bw.Layout=bw.Layout||{};cU=L.Easing=L.Easing||{};cV=b3.HashSet=b3.HashSet||{};cW=g.Char=g.Char||{};cX=be.MapUtil=be.MapUtil||{};cY=bw.Measures=bw.Measures||{};cZ=be.Pair=be.Pair||{};c0=cF.DomNodes=cF.DomNodes||{};c1=g.MatchFailureException=g.MatchFailureException||{};c2=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};c3=a.Math;c4=a.IntelliFactory;c5=c4&&c4.Runtime;c6=a.console;c7=a.Date;c8=a.Reflect;c9=a.jQuery;d.html=function(){f.$cctor();return f.html$1;};e.main=function(){var c_;c_=j.startWithHtmlD();(m.resolver(n.ofArray([["AppFrameworkTemplate.html",o.html$1()+d.html()]]),c_))();};f.$cctor=function(){f.$cctor=a.ignore;f.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link  href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"   type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <div ws-template=\"SplitterV1\" class=\"versplitter\" ws-attr=\"Attrs\">\r\n                    <div style=\"min-width :Calc((100% - ${gap}) *        ${width}   / 100);max-width :Calc((100% - ${gap}) *        ${height}  / 100)\">${doc1}</div>\r\n                    <div style=\"min-width :             ${gap}; ws-onmousedown=\"MouseDown\" ></div>\r\n                    <div style=\"min-width :Calc((100% - ${gap}) * (100 - ${width} ) / 100);max-width :Calc((100% - ${gap}) * (100 - ${height}) / 100)\">${doc2}</div>\r\n                </div>\r\n                <div ws-template=\"SplitterH1\" class=\"horsplitter\" ws-attr=\"Attrs\">\r\n                    <div style=\"min-height:Calc((100% - ${gap}) *        ${height}  / 100);max-height:Calc((100% - ${gap}) *        ${height}  / 100)\">${doc1}</div>\r\n                    <div style=\"min-height:             ${gap}\" ws-onmousedown=\"MouseDown\" ></div>\r\n                    <div style=\"min-height:Calc((100% - ${gap}) * (100 - ${height}) / 100);max-height:Calc((100% - ${gap}) * (100 - ${height}) / 100)\">${doc2}</div>\r\n                </div>\r\n                <style>\r\n                    .horsplitter                    { display: flex; flex-direction:column              } \r\n                    .horsplitter > div:nth-child(2) { background: #eef; cursor: row-resize; z-index:400 }\r\n                    .horsplitter > div              { overflow: hidden                                  }\r\n                    .versplitter                    { display: flex; flex-direction:row                 } \r\n                    .versplitter > div:nth-child(2) { background: #eef; cursor: col-resize; z-index:400 }\r\n                    .versplitter > div              { overflow: hidden                                  }\r\n                </style>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 2px) 2px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"80\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <h3>Vars:</h3>\r\n                                                                <table style=\"overflow:auto;width:100%\" class=\"table table-condensed table-striped\">\r\n                                                                    <thead>\r\n                                                                        <th style=\"width: 10%  \">Name</th>\r\n                                                                        <th style=\"width: 90% \">Value</th>\r\n                                                                    </thead>\r\n                                                                    <tbody ws-hole=\"Vars\">\r\n                                                                    <tr ws-template=\"NameValueInput\" >\r\n                                                                        <td >${Name}:</td>\r\n                                                                        <td>\r\n                                                                        <textarea placeholder=\"Value...\" ws-var=\"Value\" style=\"resize:vertical; width:100%\" spellcheck=\"false\"></textarea>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Views:</h3>\r\n                                                                <table style=\"overflow:auto\" class=\"table table-condensed table-striped\" >\r\n                                                                    <thead>\r\n                                                                        <th style=\"width: 10%  \">Name</th>\r\n                                                                        <th style=\"width: 90% \">Value</th>\r\n                                                                    </thead>\r\n                                                                    <tbody ws-hole=\"Views\" >\r\n                                                                    <tr ws-template=\"NameValue\" class=\"\">\r\n                                                                        <td>${Name}:</td>\r\n                                                                        <td>${Value}</td>\r\n                                                                    </tr>\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Docs:</h3>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Queries:</h3>\r\n                                                                <table style=\"overflow:auto\" >\r\n                                                                    <tbody ws-hole=\"Queries\" >\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                        <div style=\"font-size:small; overflow: hidden; display: flex; flex-direction: column;\"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\" style=\"font-size:small\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" ws-attr=\"Attrs\" >${Name}</button>\r\n                                        </div>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        textarea {\r\n                           resize : vertical;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";f.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";};h.range=function(c_,c$){var da;da=1+c$-c_;return da<=0?[]:q.init(da,function(db){return db+c_;});};h.toInt=function(c_){var c$;c$=h.toUInt(c_);return c$>=2147483648?c$-4294967296:c$;};h.FailWith=function(c_){throw new cj(c_);};h.toUInt=function(c_){return(c_<0?c3.ceil(c_):c3.floor(c_))>>>0;};h.KeyValue=function(c_){return[c_.K,c_.V];};j.startWithHtmlD=function(){p.$cctor();return p.startWithHtmlD;};j.htmlD=function(){p.$cctor();return p.htmlD;};m.resolver=function(c_,c$){function da(db){var dc,dd,de,df,dg;function dh(dj){return dj[0];}function di(dj){return de===dj;}return db.$==1?db.$0:(dc=db.$0,dc!=null&&dc.$==1)?(dd=db.$1,(de=db.$0.$0[0],da((df=(dg=q.tryFind(function(dj){return di(dh(dj));},c_),dg==null?null:{$:1,$0:dd(dg.$0[1])}),df==null?dd(db.$0.$0[1]):df.$0)))):da(db.$1(void 0));}return da(c$);};m.rtn=function(c_){return{$:1,$0:c_};};m.depend=function(){p.$cctor();return p.depend;};m.dependByName=function(c_,c$,da){return{$:0,$0:{$:1,$0:[c_,c$]},$1:function(db){return{$:1,$0:da(db)};}};};m.bind=function(c_,c$){function da(db){var dc,dd;return db.$==1?(dc=db.$0,{$:0,$0:null,$1:function(){return c_(dc);}}):(dd=db.$1,{$:0,$0:db.$0,$1:function(de){return da(dd(de));}});}return da(c$);};m.map=function(c_){var c$;c$=function(da){return m.rtn(c_(da));};return function(da){return m.bind(c$,da);};};n.ofArray=function(c_){var c$,da,db;c$=r.Empty;for(da=s.length(c_)-1,db=0;da>=db;da--)c$=new r({$:1,$0:s.get(c_,da),$1:c$});return c$;};n.map=function(c_,c$){var da,db,dc,dd,de;if(c$.$==0)return c$;else{dd=new r({$:1});da=dd;db=c$;dc=true;while(dc){da.$0=c_(db.$0);db=db.$1;db.$==0?dc=false:da=(de=new r({$:1}),da.$1=de,de);}da.$1=r.Empty;return dd;}};n.foldBack=function(c_,c$,da){return s.foldBack(c_,s.ofList(c$),da);};n.ofSeq=function(c_){var c$,da,db,dc,dd,de;if(c_ instanceof r)return c_;else if(c_ instanceof a.Array)return n.ofArray(c_);else{c$=bz.Get(c_);try{db=c$.MoveNext();if(!db)da=r.Empty;else{dd=new r({$:1});dc=dd;while(db){dc.$0=c$.Current();c$.MoveNext()?dc=(de=new r({$:1}),dc.$1=de,de):db=false;}dc.$1=r.Empty;da=dd;}return da;}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}}};n.exists=function(c_,c$){var da,db;da=false;db=c$;while(!da&&db.$==1){da=c_(db.$0);db=db.$1;}return da;};n.filter=function(c_,c$){return n.ofSeq(q.filter(c_,c$));};n.head=function(c_){return c_.$==1?c_.$0:n.listEmpty();};n.tail=function(c_){return c_.$==1?c_.$1:n.listEmpty();};n.append=function(c_,c$){var da,db,dc,dd,de;if(c_.$==0)return c$;else if(c$.$==0)return c_;else{dd=new r({$:1});da=dd;db=c_;dc=true;while(dc){da.$0=db.$0;db=db.$1;db.$==0?dc=false:da=(de=new r({$:1}),da.$1=de,de);}da.$1=c$;return dd;}};n.listEmpty=function(){return h.FailWith("The input list was empty.");};o.html$1=function(){f.$cctor();return f.html;};p.$cctor=function(){var c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF;p.$cctor=a.ignore;function eG(fG){return A.concat("\n",fG);}function eH(fG){return z.splitByChar("\n",fG);}function eI(fG){var fH,fI;return B.array(fG,{$:1,$0:0},{$:1,$0:(fH=0,(fI=s.length(fG)-2,D.Compare(fH,fI)===1?fH:fI))});}function eJ(fG){return A.concat("\n",fG);}function eK(fG){return fG+"T00:00:00";}function eL(fG,fH){return function(fI){return function(fJ){function fK(fL){return M.Element("div",fG(fI),[M.Element("div",[bc.Create("class","input-group")],[M.Element("span",[bc.Create("class","input-group-addon")],[fH(fJ)]),M.Input([bc.Create("class","form-control")],fL)])]);}return function(fL){return O.docWithVar(fK,fL);};};};}function eM(fG,fH){var fI,fJ;fI=(fJ=fG(fH),function(fK){return M.Input(fJ,fK);});return function(fK){return O.docWithVar(fI,fK);};}function eN(fG,fH){var fI,fJ;fI=(fJ=fG(fH),function(fK){return M.InputArea(fJ,fK);});return function(fK){return O.docWithVar(fI,fK);};}function eO(fG,fH){var fI,fJ;fI=(fJ=O.getParmRef(fH[0]),O.tryGetVoV(fJ[0],fJ[1]));fI==null?void 0:fI.$0.Set(fH[1]);}function eP(fG,fH){var fI,fJ;fI=(fJ=O.getParmRef(fH[0]),O.tryGetVoV(fJ[0],fJ[1]));fI==null?void 0:(O.draggingEvent(false,true,fI.$0))(fH[1]);}function eQ(fG,fH,fI,fJ){var fK,fL;fK=(fL=O.getParmRef(fH),O.tryGetAct(fL[0],fL[1]));return fK==null?null:O.callFunction(fI,fJ,fK.$0.actFunction);}function eR(fG){return fG[0];}function eS(fG){return fG[1];}function eT(fG){return new R({$:0,$0:fG});}function eU(fG){return{$:1,$0:fG};}function eV(fG){return new bm({$:0,$0:fG});}function eW(fG){return{$:1,$0:fG};}function eX(fG){return new bm({$:0,$0:fG});}function eY(fG){return{$:1,$0:fG};}function eZ(fG){return new bm({$:0,$0:fG});}function e0(fG){return{$:1,$0:fG};}function e1(fG){return new bm({$:0,$0:fG});}function e2(fG){return{$:1,$0:fG};}function e3(fG){return""!==fG;}function e4(fG){return!fG;}function e5(fG){var fH;fH=null;return d5.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function e6(fG,fH){d5.set_Item(fG,fH);return fH;}function e7(fG,fH){var fI;fI=e5(fG);return fI==null?e6(fG,fH(fG)):fI.$0;}function e8(fG){var fH;fH=null;return d8.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function e9(fG,fH){d8.set_Item(fG,fH);return fH;}function e_(fG,fH){var fI;fI=e8(fG);return fI==null?e9(fG,fH(fG)):fI.$0;}function e$(fG){var fH;fH=null;return d$.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fa(fG,fH){d$.set_Item(fG,fH);return fH;}function fb(fG,fH){var fI;fI=e$(fG);return fI==null?fa(fG,fH(fG)):fI.$0;}function fc(fG){var fH;fH=null;return ec.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fd(fG,fH){ec.set_Item(fG,fH);return fH;}function fe(fG,fH){var fI;fI=fc(fG);return fI==null?fd(fG,fH(fG)):fI.$0;}function ff(fG){var fH;fH=null;return ef.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fg(fG,fH){ef.set_Item(fG,fH);return fH;}function fh(fG,fH){var fI;fI=ff(fG);return fI==null?fg(fG,fH(fG)):fI.$0;}function fi(fG){var fH;fH=null;return ei.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fj(fG,fH){ei.set_Item(fG,fH);return fH;}function fk(fG,fH){var fI;fI=fi(fG);return fI==null?fj(fG,fH(fG)):fI.$0;}function fl(fG){var fH;fH=null;return el.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fm(fG,fH){el.set_Item(fG,fH);return fH;}function fn(fG,fH){var fI;fI=fl(fG);return fI==null?fm(fG,fH(fG)):fI.$0;}function fo(fG){var fH;fH=null;return eo.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fp(fG,fH){eo.set_Item(fG,fH);return fH;}function fq(fG,fH){var fI;fI=fo(fG);return fI==null?fp(fG,fH(fG)):fI.$0;}function fr(fG){var fH;fH=null;return er.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fs(fG,fH){er.set_Item(fG,fH);return fH;}function ft(fG,fH){var fI;fI=fr(fG);return fI==null?fs(fG,fH(fG)):fI.$0;}function fu(fG){var fH;fH=null;return eu.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fv(fG,fH){eu.set_Item(fG,fH);return fH;}function fw(fG,fH){var fI;fI=fu(fG);return fI==null?fv(fG,fH(fG)):fI.$0;}function fx(fG){var fH;fH=null;return ex.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fy(fG,fH){ex.set_Item(fG,fH);return fH;}function fz(fG,fH){var fI;fI=fx(fG);return fI==null?fy(fG,fH(fG)):fI.$0;}function fA(fG){var fH;fH=null;return eA.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fB(fG,fH){eA.set_Item(fG,fH);return fH;}function fC(fG,fH){var fI;fI=fA(fG);return fI==null?fB(fG,fH(fG)):fI.$0;}function fD(fG){var fH;fH=null;return eD.TryGetValue(fG,{get:function(){return fH;},set:function(fI){fH=fI;}})?{$:1,$0:fH}:null;}function fE(fG,fH){eD.set_Item(fG,fH);return fH;}function fF(fG,fH){var fI;fI=fD(fG);return fI==null?fE(fG,fH(fG)):fI.$0;}p.state=new v.New();p.result=new x.New();p.result$1=w.result();p.depend=new y.New();p.rtn=m.rtn;p.depend$1=m.depend();p.unindentStr=function(fG){return eG(z.unindent(fG));};p.skipLastLine=(c_=function(fG){return eI(eH(fG));},function(fG){return eJ(c_(fG));});p.parseDateO2=(c$=C.tryParseWith(function(fG){var fH,fI;fH=0;return[(fI=bA.TryParse(fG),fI!=null&&fI.$==1&&(fH=fI.$0,true)),fH];}),function(fG){return c$(eK(fG));});p.parseDateO=C.tryParseWith(function(fG){var fH,fI;fH=0;return[(fI=bA.TryParse(fG),fI!=null&&fI.$==1&&(fH=fI.$0,true)),fH];});p.parseIntO=C.tryParseWith(function(fG){var fH;fH=0;return[E.TryParseInt32(fG,{get:function(){return fH;},set:function(fI){fH=fI;}}),fH];});p.parseInt64O=C.tryParseWith(function(fG){var fH;fH=0;return[E.TryParseInt64(fG,{get:function(){return fH;},set:function(fI){fH=fI;}}),fH];});p.parseSingleO=C.tryParseWith(function(fG){var fH,fI;fH=0;return[(fI=a.Number(fG),a.isNaN(fI)?false:(fH=fI,true)),fH];});p.parseDoubleO=C.tryParseWith(function(fG){var fH,fI;fH=0;return[(fI=a.Number(fG),a.isNaN(fI)?false:(fH=fI,true)),fH];});p.parseGuidO=C.tryParseWith(function(fG){var fH;fH=null;return[G.TryParse(fG,{get:function(){return fH;},set:function(fI){fH=fI;}}),fH];});p["|Date|_|"]=C.parseDateO();p["|Int|_|"]=C.parseIntO();p["|Int64|_|"]=C.parseInt64O();p["|Single|_|"]=C.parseSingleO();p["|Double|_|"]=C.parseDoubleO();p["|Guid|_|"]=C.parseGuidO();p.counter=1;p.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";p.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";p.observers=r.Empty;p.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";p.init=H.Create(function(){var fG;fG=new K.New();I.defineWebComponent("wcomp-tabstrip",K.Constructor,self.FsRootDll.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});p.layoutHorizontal=c5.Curried(function(fG,fH,fI,fJ,fK){return M.get_Empty();},5);p.layoutVertical=c5.Curried(function(fG,fH,fI,fJ,fK){return M.get_Empty();},5);p.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link  href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"   type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <div ws-template=\"SplitterV1\" class=\"versplitter\" ws-attr=\"Attrs\">\r\n                    <div style=\"min-width :Calc((100% - ${gap}) *        ${width}   / 100);max-width :Calc((100% - ${gap}) *        ${height}  / 100)\">${doc1}</div>\r\n                    <div style=\"min-width :             ${gap}; ws-onmousedown=\"MouseDown\" ></div>\r\n                    <div style=\"min-width :Calc((100% - ${gap}) * (100 - ${width} ) / 100);max-width :Calc((100% - ${gap}) * (100 - ${height}) / 100)\">${doc2}</div>\r\n                </div>\r\n                <div ws-template=\"SplitterH1\" class=\"horsplitter\" ws-attr=\"Attrs\">\r\n                    <div style=\"min-height:Calc((100% - ${gap}) *        ${height}  / 100);max-height:Calc((100% - ${gap}) *        ${height}  / 100)\">${doc1}</div>\r\n                    <div style=\"min-height:             ${gap}\" ws-onmousedown=\"MouseDown\" ></div>\r\n                    <div style=\"min-height:Calc((100% - ${gap}) * (100 - ${height}) / 100);max-height:Calc((100% - ${gap}) * (100 - ${height}) / 100)\">${doc2}</div>\r\n                </div>\r\n                <style>\r\n                    .horsplitter                    { display: flex; flex-direction:column              } \r\n                    .horsplitter > div:nth-child(2) { background: #eef; cursor: row-resize; z-index:400 }\r\n                    .horsplitter > div              { overflow: hidden                                  }\r\n                    .versplitter                    { display: flex; flex-direction:row                 } \r\n                    .versplitter > div:nth-child(2) { background: #eef; cursor: col-resize; z-index:400 }\r\n                    .versplitter > div              { overflow: hidden                                  }\r\n                </style>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 2px) 2px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"80\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <h3>Vars:</h3>\r\n                                                                <table style=\"overflow:auto;width:100%\" class=\"table table-condensed table-striped\">\r\n                                                                    <thead>\r\n                                                                        <th style=\"width: 10%  \">Name</th>\r\n                                                                        <th style=\"width: 90% \">Value</th>\r\n                                                                    </thead>\r\n                                                                    <tbody ws-hole=\"Vars\">\r\n                                                                    <tr ws-template=\"NameValueInput\" >\r\n                                                                        <td >${Name}:</td>\r\n                                                                        <td>\r\n                                                                        <textarea placeholder=\"Value...\" ws-var=\"Value\" style=\"resize:vertical; width:100%\" spellcheck=\"false\"></textarea>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Views:</h3>\r\n                                                                <table style=\"overflow:auto\" class=\"table table-condensed table-striped\" >\r\n                                                                    <thead>\r\n                                                                        <th style=\"width: 10%  \">Name</th>\r\n                                                                        <th style=\"width: 90% \">Value</th>\r\n                                                                    </thead>\r\n                                                                    <tbody ws-hole=\"Views\" >\r\n                                                                    <tr ws-template=\"NameValue\" class=\"\">\r\n                                                                        <td>${Name}:</td>\r\n                                                                        <td>${Value}</td>\r\n                                                                    </tr>\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Docs:</h3>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <h3>Queries:</h3>\r\n                                                                <table style=\"overflow:auto\" >\r\n                                                                    <tbody ws-hole=\"Queries\" >\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                        <div style=\"font-size:small; overflow: hidden; display: flex; flex-direction: column;\"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\" style=\"font-size:small\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" ws-attr=\"Attrs\" >${Name}</button>\r\n                                        </div>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        textarea {\r\n                           resize : vertical;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";p.plugIns=new N.New$1(function(fG){return fG.plgName;});p.mainDocV=Q.Create$1("AppFramework.AppFwkClient");p.TemplateFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\website\\AppFramework.html";p.selectionPlugInO=Q.Create$1({$:1,$0:new R({$:0,$0:"AppFramework"})});p.currentPlugInW=T.Map(function(fG){return fG==null?O.defaultPlugIn():fG.$0;},T.Bind(function(fG){return fG==null?T.Const({$:1,$0:O.defaultPlugIn()}):O.plugIns().TryFindByKeyAsView(fG.$0);},O.selectionPlugInO().get_View()));p.currentPlugInV=new bH.New(O.currentPlugInW(),function(fG){O.plugIns().Append(fG);});p.AppFwkClient=H.Create(function(){var fG,fH,fI,fJ,fK,fL,fM,fN,fO;return(fG=(fH=O.renderQueries(),(fI=O.renderActions(),(fJ=O.renderDocs(),(fK=O.renderViews(),(fL=O.renderVars(),(fM=O.renderPlugIns(),Y.Make().WithHole({$:0,$0:"plugins",$1:fM})).WithHole({$:2,$0:"pluginname",$1:T.Map(function(fP){return fP.plgName.get_Id();},O.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:fL})).WithHole({$:0,$0:"views",$1:fK})).WithHole({$:0,$0:"docs",$1:fJ})).WithHole({$:0,$0:"actions",$1:fI})).WithHole({$:0,$0:"queries",$1:fH})),(fN=Z.CompleteHoles(fG.k,fG.h,[]),(fO=new X.New(fN[1],_0.appfwkclient(fN[0])),(fG.i=fO,fO)))).get_Doc();});p.plugin=new _3.New();p.a11V=Q.Create$1(11);p.mainX={$:0,$0:O.a11V().get_View()};p.baseView=O.mainDocV().get_View();p.op_LessMultiplyGreater=function(fG){return function(fH){return _4.apply(fG,fH);};};p.getDocFromReferenceD=m.dependByName("getDocFromReference",_5.getDocFromReference,a.id);p.getTextActViewFromReferenceD=m.dependByName("getTextActViewFromReference",_5.getTextActViewFromReference,a.id);p.getDocFromTextTypesD=(da=m.depend(),da.Delay(function(){return da.Bind(_5.getDocFromReferenceD(),function(fG){var fH;function fI(fJ){return fJ.$==1?fG(fJ.$0):M.TextNode(fJ.$0);}return da.Return((fH=function(fJ){return n.map(fI,fJ);},function(fJ){return M.Concat(fH(fJ));}));});}));p.extractDocD=(db=m.depend(),db.Delay(function(){return db.Bind(_5.getDocFromTextTypesD(),function(fG){return db.Return(function(fH){return fG(_5.getTextData(fH));});});}));p.getTextValFromSeqD=(dc=m.depend(),dc.Delay(function(){return dc.Bind(_5.getTextActViewFromReferenceD(),function(fG){var fH,fI,fJ;function fK(fL){var fM;return fL.$==1?(fM=fL.$0,{$:0,$0:T.Map(function(fN){return fN.$==1?(function(fO){return function(fP){return fO("@{"+_6.toSafe(fP)+"}");};}(a.id))(fM):fN.$0;},fG(fM))}):{$:1,$0:fL.$0};}return dc.Return((fH=function(fL){return _4.traverseListApp(fK,fL);},(fI=(fJ={$:1,$0:function(fL){return A.concat("",fL);}},function(fL){return _4.apply(fJ,fL);}),function(fL){return fI(fH(fL));})));});}));p.getTextValD=_7.op_GreaterMultiplyGreater(_5.getTextData,_5.getTextValFromSeqD());p.extractAtsD=(dd=m.depend(),dd.Delay(function(){return dd.Bind(_5.getTextValD(),function(fG){return dd.Bind(_5.getTextActViewFromReferenceD(),function(fH){return dd.Return(function(fI){var fJ,fK;function fL(fT){var fU,fV,fW,fX,fY,fZ,f0;fU=A.SplitChars(fT,[":"],0);return!D.Equals(fU,null)&&fU.length===2?(fV=s.get(fU,1),{$:0,$0:s.get(fU,0),$1:fV}):(fW=s.map(A.Trim,A.SplitChars(fT,["="],0)),!D.Equals(fW,null)&&fW.length===2?(fX=s.get(fW,1),(fY=s.get(fW,0),(fZ=_5.getTextData(fX),fZ.$==1&&(fZ.$0.$==1&&(fZ.$1.$==0&&(f0=fZ.$0.$0,true)))?{$:2,$0:fY,$1:f0}:{$:1,$0:fY,$1:fX}))):!D.Equals(fW,null)&&fW.length===1?{$:1,$0:s.get(fW,0),$1:""}:_8.AEmpty);}function fM(fT){return q.filter(function(fU){return""!==fU;},q.map(A.Trim,A.SplitChars(fT,[";"],0)));}function fN(fT){var fU;fU=fT.addedListeners;return!fU?[]:fU;}function fO(fT,fU,fV){var fZ,f0,f1,f2,f3;function fW(f4){O.callFunction(fU,f4,fZ.actFunction);}function fX(f4){return f4[0];}function fY(f4){return fT===f4;}if(fV.$==1){fZ=fV.$0;f0=s.partition(function(f4){return fY(fX(f4));},fN(fU));f1=f0[0];for(f2=0,f3=f1.length-1;f2<=f3;f2++)(function(){return fU.removeEventListener(fT,(s.get(f1,f2))[1]);}());fU.addEventListener(fT,fW,false);fU.addedListeners=f0[1].concat([[fT,fW]]);return;}else try{return fU.setAttribute(fT,A.Trim(fV.$0));}catch(f4){return(function(f5){return function(f6){return f5(_6.prettyPrint(f6));};}(function(f5){c6.log(f5);}))(f4);}}function fP(fT){function fU(fV,fW){return fO(fT,fV,fW);}return function(fV){return bd.DynamicCustom(function(fW){return function(fX){return fU(fW,fX);};},fV);};}function fQ(fT){var fU;return fT.$==1?O.valToAttr(fT.$0,fG(fT.$1)):fT.$==2?(fU=fH(fT.$1),(fP(fT.$0))(fU)):fT.$==3?bO.EmptyAttr():O.valToStyle(fT.$0,fG(fT.$1));}function fR(fT,fU){var fV,fY,fZ,f0,f1,f2,f3,f4,f5,f6,f7,f8,f9,f_,f$,ga,gb;function fW(gc){return gc[0];}function fX(gc){return new bf.New(gc);}fY=q.choose(function(gc){return gc.$==0?{$:1,$0:gc.$0+":"+gc.$1}:null;},fU);fZ=s.ofSeq(q.delay(function(){return q.append(!q.isEmpty(fY)?[["style",A.concat(";",fY)]]:[],q.delay(function(){return q.choose(function(gc){return gc.$==1?{$:1,$0:[gc.$0,gc.$1]}:gc.$==2?{$:1,$0:[gc.$0,gc.$1]}:gc.$==3?null:null;},fU);}));}));f0=n.ofSeq(q.delay(function(){return q.map(function(gc){return[fT.attributes.item(gc).name,fT.attributes.item(gc).value];},n.ofSeq(h.range(0,fT.attributes.length-1)));}));f1=(fV=function(gc){return q.map(fW,gc);},function(gc){return fX(fV(gc));});f2=bf.op_Subtraction(f1(f0),f1(fZ));f3=bz.Get(f2);try{while(f3.MoveNext()){f4=f3.Current();try{fT.attributes.removeNamedItem(f4);}catch(gc){((function(gd){return function(ge){return gd(_6.prettyPrint(ge));};}(function(gd){c6.log(gd);}))(gc));}}}finally{if(typeof f3=="object"&&"Dispose"in f3)f3.Dispose();}f5=bf.op_Subtraction(new bf.New(fZ),new bf.New(f0));f6=bz.Get(f5);try{while(f6.MoveNext()){f7=f6.Current();try{fT.setAttribute(f7[0],f7[1]);}catch(gd){((function(ge){return function(gf){return ge(_6.prettyPrint(gf));};}(function(ge){c6.log(ge);}))(gd));}}}finally{if(typeof f6=="object"&&"Dispose"in f6)f6.Dispose();}f8=fN(fT);for(f9=0,f_=f8.length-1;f9<=f_;f9++){f$=s.get(f8,f9);try{fT.removeEventListener(f$[0],f$[1]);}catch(ge){((function(gf){return function(gg){return gf(_6.prettyPrint(gg));};}(function(gf){c6.log(gf);}))(ge));}}ga=q.choose(function(gf){return gf.$==2?{$:1,$0:[gf.$0,gf.$1]}:null;},fU);gb=bz.Get(ga);try{while(gb.MoveNext())(function(){var gf,gg;gf=gb.Current();return T.Get((gg=gf[0],function(gh){return fO(gg,fT,gh);}),fH(gf[1]));}());return;}finally{if(typeof gb=="object"&&"Dispose"in gb)gb.Dispose();}}function fS(fT){return q.map(fL,fT);}fJ=s.ofSeq(fM(fI));return!D.Equals(fJ,null)&&fJ.length===1?[(fK=fG(s.get(fJ,0)),fK.$==0?bd.DynamicCustom(function(fT){return function(fU){return fR(fT,fU);};},T.Map(function(fT){return fS(fM(fT));},fK.$0)):fQ(fL(fK.$0)))]:q.map(function(fT){return fQ(fL(fT));},fJ);});});});}));p.extractTextD=(de=m.depend(),de.Delay(function(){return de.Bind(_5.getTextValD(),function(fG){return de.Return(function(fH){return _4.toView(fG(fH));});});}));p.currentPlugInNameDef=new R({$:0,$0:"NewLYx"});p.currentPlugInNameD=m.dependByName("currentPlugInName",O.currentPlugInNameDef(),a.id);p.getDocwD=(df=m.depend(),df.Delay(function(){return df.Bind(O.currentPlugInNameD(),function(fG){return df.Return(function(fH){var fI,fJ,fK;fI=(O.splitName(fG))(fH);fJ=fI[0];fK=fI[1];return M.BindView(function(fL){var fM;function fN(){return(function(fO){return function(fP){return fO("Reference not found @{"+_6.toSafe(fP)+"}");};}(a.id))(fH);}fM=fL==null?null:{$:1,$0:O.getActualDoc(fL.$0)};return fM==null?M.TextView(T.Map(function(fO){return fO==null?fN():fO.$0;},O.tryGetWoWW(fJ,fK))):fM.$0;},O.tryGetDocW(fJ,fK));});});}));p.getDocD=(dg=m.depend(),dg.Delay(function(){return dg.Bind(O.currentPlugInNameD(),function(fG){return dg.Return(function(fH){var fI,fJ,fK,fL,fM,fN;fI=(O.splitName(fG))(fH);fJ=fI[0];fK=fI[1];fL=(fM=O.tryGetDoc(fJ,fK),fM==null?null:{$:1,$0:O.getActualDoc(fM.$0)});return fL==null?M.TextView((fN=O.tryGetWoW(fJ,fK),fN==null?T.Const((function(fO){return function(fP){return fO("Reference not found @{"+_6.toSafe(fP)+"}");};}(a.id))(fH)):fN.$0)):fL.$0;});});}));p.getTextActViewD=(dh=m.depend(),dh.Delay(function(){return dh.Bind(O.currentPlugInNameD(),function(fG){return dh.Return(function(fH){var fI,fJ,fK;fI=(O.splitName(fG))(fH);fJ=fI[0];fK=fI[1];return T.Bind(function(fL){function fM(){return(function(fN){return function(fO){return fN("Text Reference not found @{"+_6.toSafe(fO)+"}");};}(a.id))(fH);}return fL==null?T.Map(function(fN){return{$:0,$0:fN};},T.Map(function(fN){return fN==null?fM():fN.$0;},O.tryGetWoWW(fJ,fK))):T.Const({$:1,$0:fL.$0});},O.tryGetActW(fJ,fK));});});}));p.extractTextD$1=_5.extractTextD();p.extractDocD$1=_5.extractDocD();p.extractAtsD$1=_5.extractAtsD();p.extractAttD=(di=_7.depend(),di.Delay(function(){return di.Bind(O.extractAtsD(),function(fG){return di.Return(function(fH){return bc.Concat(fG(fH));});});}));p.defPlugInName=new R({$:0,$0:"AppFramework"});p.inputLabel=O.depWithExtracts(function(fG,fH,fI){return eL.apply(null,[fG,fH,fI]);});p.input=O.depWithExtracts(function(fG){return function(fH){return eM(fG,fH);};});p.textArea=O.depWithExtracts(function(fG){return function(fH){return eN(fG,fH);};});p.htmlDoc=O.depWithExtracts(function(fG,fH,fI){return function(fJ){return M.BindView(M.Verbatim,fI(fJ));};});p.docReference=O.depWithExtracts(function(fG,fH,fI){return function(fJ){var fK;function fL(fM,fN){return function(fO){return(fO(fM))(fN);};}return M.BindView(function(fM){var fN;return fM==null?(O.errDocf(function(fO){return function(fP){return fO("Doc not found: "+_6.toSafe(fP));};}))(fJ):(fN=O.Lazy(fM.$0.docDoc),fN.$==0?fN.$0:fN.$==1?fN.$0():(O.errDocf(function(fO){return function(fP){return fO("Doc parameters not resolved: "+_1.p(fP));};}))(fM.$0));},T.Bind(function(fM){return(function(fN){return fL(fN[0],fN[1]);}(fM))(function(fN){return function(fO){return O.tryGetDocW(fN,fO);};});},(fK=fI(fJ),T.Map(O.splitName(O.defPlugInName()),fK))));};});p.setVar0=O.depWithExtracts(function(fG,fH,fI){return function(fJ){var fK,fL,fM;fK=(fL=O.getParmRef(fJ[0]),O.tryGetVoV(fL[0],fL[1]));fK==null?void 0:(fM=fK.$0,T.Get(function(fN){fM.Set(fN);},fI(fJ[1])));};});p.setVarDirect0=O.depWithExtracts(function(fG,fH,fI){var fJ;fJ=[fG,fH,fI];return function(fK){return eO(fJ,fK);};});p.dragSplitter0=O.depWithExtracts(function(fG,fH,fI){var fJ;fJ=[fG,fH,fI];return function(fK){return eP(fJ,fK);};});p.trigAct=O.depWithExtracts(function(fG,fH,fI){return function(fJ){return function(fK){function fL(fN){var fO,fP;if(fN===null);else{fO=(fP=O.getParmRef(fK),O.tryGetAct(fP[0],fP[1]));fO==null?void 0:O.callFunction(null,null,fO.$0.actFunction);}}function fM(){return M.Element("div",[],[]);}return M.BindView(function(fN){return fM(fL(fN));},fI(fJ));};};});p.trigActChange=O.depWithExtracts(function(fG,fH,fI){return function(fJ){return function(fK){var fL,fM;function fN(fP){var fQ,fR;if(fP===null);else{fQ=(fR=O.getParmRef(fK),O.tryGetAct(fR[0],fR[1]));fQ==null?void 0:O.callFunction(null,null,fQ.$0.actFunction);}}function fO(){return"";}return M.TextView(T.Map(function(fP){return fO(fN(fP));},(fL=fI(fJ),(fM=[Q.Create$1(null)],(T.Sink(function(fP){if(!D.Equals(fM[0].Get(),fP))fM[0].Set(fP);},fL),fM[0].get_View())))));};};});p.callAction0=O.depWithExtracts(function(fG,fH,fI){var fJ;fJ=[fG,fH,fI];return c5.Curried(eQ,3,[fJ]);});p.select=O.depWithExtracts(function(fG,fH,fI){return c5.Curried3(function(fJ,fK,fL){function fM(fN){var fO,fP;fO=T.Map(function(fQ){return n.ofSeq(A.SplitChars(fQ,[";"],0));},fI(fL));fP=new bH.New(T.Map2(function(fQ,fR){return q.contains(A.Trim(fQ),fR)?{$:1,$0:A.Trim(fQ)}:null;},fN.get_View(),fO),function(fQ){var fR;if(fQ!=null&&fQ.$==1){fR=fQ.$0;T.Get(function(fS){if(q.contains(fR,fS))fN.Set(fR);},fO);}else fN.Set("");});return M.SelectDynOptional(fG(fJ),fK,a.id,fO,fP);}return function(fN){return O.docWithVar(fM,fN);};});});O.addPlugIn((dj=O.plugin(),dj.AddAct(dj.AddDoc(dj.AddVar(dj.Name(dj.Yield(),"AppFramework"),"mainDocV",O.mainDocV()),"AppFwkClient",O.AppFwkClient()),"Hello",function(){self.alert("Hello!");})));O.addPlugIn((dk=O.plugin(),dk.AddViw(dk.AddViw(dk.AddViw(dk.AddViw(dk.AddViw(dk.AddViw(dk.AddQry(dk.AddAct2(dk.AddAct(dk.AddAct2(dk.AddAct2(dk.AddDoc3(dk.AddDoc3(dk.AddDoc4(dk.AddDoc2(dk.AddDoc2(dk.AddDoc2(dk.AddDoc2(dk.AddDoc1(dk.AddDoc1(dk.Name(dk.Yield(),"AF"),"DocReference",O.docReference(),"DocName"),"HtmlDoc",O.htmlDoc(),"Html"),"TrigAction",O.trigAct(),"Trigger","Action"),"TrigChange",O.trigActChange(),"Trigger","Action"),"Input",O.input(),"Attrs","Var"),"TextArea",O.textArea(),"Attrs","Var"),"Select",O.select(),"Attrs","None","Vals","Var"),"InputFile",c5.Curried3(O.inputFile),"Attrs","Label","Action"),"InputLabel",O.inputLabel(),"Attrs","Label","Var"),"SetVar",function(fG){return function(fH){return O.setVar(fG,fH);};},"Var","Value"),"SetVarDirect",function(fG){return function(fH){return O.setVarDirect(fG,fH);};},"Var","from"),"Hello",function(){self.alert("Hello!");}),"DragSplitter",function(fG){return function(fH){return O.dragSplitter(fG,fH);};},"Var","dragEvent"),"getDocNames",function(){return s.ofSeq(q.collect(function(fG){return q.map(function(fH){return fG.plgName.get_Id()+"."+fH.docName.get_Id();},fG.plgDocs);},(O.plugIns())["var"].Get()));}),"MouseX",T.Map(function(fG){return a.String(eR(fG));},bo.get_Position())),"MouseY",T.Map(function(fG){return a.String(eS(fG));},bo.get_Position())),"MouseLeft",T.Map(function(fG){return fG?"1":"0";},bo.get_LeftPressed())),"MouseRight",T.Map(function(fG){return fG?"1":"0";},bo.get_RightPressed())),"MouseMiddle",T.Map(function(fG){return fG?"1":"0";},bo.get_MiddlePressed())),"Keyboard",T.Map(function(fG){return function(fH){return fG(_6.printList(_6.prettyPrint,fH));};}(a.id),bp.get_KeysPressed()))));p.getMainDoc=H.Create(function(){bq.init(c5.Curried(O.horizontal,5),c5.Curried(O.vertical,5));J.init().f();return O.mainDoc();});p.htmlD=m.dependByName("AppFrameworkTemplate.html",o.html(),a.id);p.startWithHtmlD=(dl=m.depend(),dl.Delay(function(){return dl.Bind(j.htmlD(),function(fG){return dl.Return(function(){var fH,fI,fJ;fH=self.document.createElement("div");self.document.body.appendChild(fH);fH.outerHTML=fG;fI=O.getMainDoc().f();fJ=self.document.body;bZ.LoadLocalTemplates("");M.RunAppend(fJ,fI);});});}));p.defPlg=O.defaultPlugIn();p.defDoc=O.newDoc(new bm({$:0,$0:"_"}),H.Create(M.get_Empty));p.defVar=O.newVar(new bm({$:0,$0:"_"}),Q.Create$1(""));p.defViw=O.newViw(new bm({$:0,$0:"_"}),T.Const(""));p.defAct=O.newAct(new bm({$:0,$0:"_"}),a.ignore);p.pluginsList=br.getDocFor(O.plugIns(),bs.defPlg(),function(){return bs.failCreate("plugin",void 0);},null,c5.Curried3(bs.showPlugIn));p.plgVarsList=br.getDocForW(T.Map(function(fG){return fG.plgVars;},bs.pluginsList().get_CurrentW()),function(fG){return fG.varName;},bs.defVar(),function(){return bs.failCreate("Var",void 0);},null,c5.Curried3(bs.showVar));p.plgViewsList=br.getDocForW(T.Map(function(fG){return fG.plgViews;},bs.pluginsList().get_CurrentW()),function(fG){return fG.viwName;},bs.defViw(),function(){return bs.failCreate("View",void 0);},null,c5.Curried3(bs.showView));p.plgActsList=br.getDocForW(T.Map(function(fG){return fG.plgActions;},bs.pluginsList().get_CurrentW()),function(fG){return fG.actName;},bs.defAct(),function(){return bs.failCreate("Action",void 0);},null,c5.Curried3(bs.showAct));p.plgDocsList=br.getDocForW(T.Map(function(fG){return fG.plgDocs;},bs.pluginsList().get_CurrentW()),function(fG){return fG.docName;},bs.defDoc(),function(){return bs.failCreate("Doc",void 0);},null,c5.Curried3(bs.showDoc));p.plugInAdded=O.addPlugIn((dm=O.plugin(),dm.Merge(dm.Merge(dm.Merge(dm.Merge(dm.Merge(dm.Name(dm.Yield(),"AppFrmkUI"),"plugIns_",bs.pluginsList().PlugIn(function(fG){return eU(eT(fG));},function(fG){return fG.get_Id();})),"plgVars_",bs.plgVarsList().PlugIn(function(fG){return eW(eV(fG));},function(fG){return fG.get_Id();})),"plgViews_",bs.plgViewsList().PlugIn(function(fG){return eY(eX(fG));},function(fG){return fG.get_Id();})),"plgActs_",bs.plgActsList().PlugIn(function(fG){return e0(eZ(fG));},function(fG){return fG.get_Id();})),"plgDocs_",bs.plgDocsList().PlugIn(function(fG){return e2(e1(fG));},function(fG){return fG.get_Id();}))));p.splitSemiColon=(dn=bw.splitChar(";"),(_do=function(fG){return q.filter(e3,fG);},function(fG){return _do(dn(fG));}));p.notEmpty=function(fG){return e4(bw.emptyLine(fG));};p.aV=Q.Create$1(4);p.pa=bx.aV().get_View();p.pb=6.2;p.currentPlugInNameDef$1=new R({$:0,$0:"NewLYx"});p.currentPlugInNameD$1=m.dependByName("currentPlugInName",bx.currentPlugInNameDef(),a.id);p.name=Q.Create$1("World");p.enterName=(dp=O.op_Dereference(bx.checkName),(dq={$:0,$0:bx.name().get_View()},by.New(_7.op_BarGreaterGreater(dp.r,function(fG){return b2.New(fG,dq);}))));p.now=(dr=O.op_Dereference(function(){var fG;fG=new a.Date(c7.now());return fG.getFullYear()+"-"+("0"+(fG.getMonth()+1)).slice(-2)+"-"+("0"+fG.getDate()).slice(-2)+" "+("0"+fG.getHours()).slice(-2)+":"+("0"+fG.getMinutes()).slice(-2)+":"+("0"+fG.getSeconds()).slice(-2)+":"+("00"+fG.getMilliseconds()).slice(-3);}),(ds={$:0,$0:bx.name().get_View()},by.New(_7.op_BarGreaterGreater(dr.r,function(fG){return b2.New(fG,ds);}))));p.sayHello=(dt=(du=(dv=O.op_Dereference(M.Concat),O.bindWrap(function(fG){var fH;fH={$:1,$0:[fG("Hello @{name}!")]};return by.New(_7.op_BarGreaterGreater(dv.r,function(fI){return b2.New(fI,fH);}));},O.extractDocD())),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(_4.textDoc(fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)}),fH.p));},du);},bx.enterName().r)),(dw=(dx=O.op_Dereference(M.Concat),O.bindWrap(function(fG){var fH;fH={$:1,$0:[fG("How are you?")]};return by.New(_7.op_BarGreaterGreater(dx.r,function(fI){return b2.New(fI,fH);}));},O.extractDocD())),(dy=(dz=O.op_Dereference(M.Concat),O.bindWrap(function(fG){var fH;fH={$:1,$0:[O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;})]};return by.New(_7.op_BarGreaterGreater(dz.r,function(fI){return b2.New(fI,fH);}));},dt.r)),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;}),fH.p));},dy);},dw.r))));p.aString=Q.Lens(bx.aV(),a.String,function(fG,fH){return h.toInt(a.Number(fH));});p.main0=(dA=(dB=O.op_Dereference(function(fG){return function(fH){return bx.concat(fG,fH);};}),(dC={$:0,$0:bx.aV().get_View()},by.New(_7.op_BarGreaterGreater(dB.r,function(fG){return b2.New(fG,dC);})))),(dD={$:1,$0:3.2},by.New(_7.op_BarGreaterGreater(dA.r,function(fG){return b2.New(fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)},dD);}))));p.main1=(dE=(dF=O.op_Dereference((c5.Curried3(function(fG,fH,fI){return fG("result = "+_6.toSafe(fH)+" "+_6.toSafe(fI));}))(a.id)),O.bindWrap(function(fG){var fH;fH=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return by.New(_7.op_BarGreaterGreater(dF.r,function(fI){return b2.New(fI,fH);}));},bx.main0().r)),(dG={$:1,$0:"main0"},by.New(_7.op_BarGreaterGreater(dE.r,function(fG){return b2.New(fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)},dG);}))));p.main=(dH=(dI=(dJ=(dK=(dL=(dM=(dN=(dO=(dP=(dQ=O.op_Dereference((c5.Curried3(M.Element))("h3")),O.bindWrap(function(fG){var fH;fH={$:1,$0:fG("color:@{name}; background:red; click=@{AppFramework.Hello}")};return by.New(_7.op_BarGreaterGreater(dQ.r,function(fI){return b2.New(fI,fH);}));},O.extractAtsD())),O.bindWrap(function(fG){var fH;fH={$:1,$0:[fG("MAIN:")]};return by.New(_7.op_BarGreaterGreater(dP.r,function(fI){return b2.New(fI.f.$==0?fI.p.$==1?{$:0,$0:T.Apply(fI.f.$0,T.Const(fI.p.$0))}:{$:0,$0:T.Apply(fI.f.$0,fI.p.$0)}:fI.p.$==0?{$:0,$0:T.Apply(T.Const(fI.f.$0),fI.p.$0)}:{$:1,$0:fI.f.$0(fI.p.$0)},fH);}));},O.extractDocD())),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(_4.textDoc(fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)}),fH.p));},dO);},bx.main1().r)),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(_4.textDoc(fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)}),fH.p));},dN);},bx.main1().r)),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(fG(":"),fH.p));},dM);},O.extractDocD())),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;}),fH.p));},dL);},bx.sayHello().r)),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(fG(":"),fH.p));},dK);},O.extractDocD())),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(fG(" Ms >> "),fH.p));},dJ);},O.extractDocD())),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;}),fH.p));},dI);},bx.sayHello().r)),O.bindWrap(function(fG){return O.unwrapBindWrap(function(fH){return b2.New(fH.f,_4.addDoc(fG(" <<"),fH.p));},dH);},O.extractDocD()));p.main2=O.makeAViewDoc(function(){return M.Element("h4",[bd.Dynamic("style",T.Map(function(fG){return"color:"+fG;},bx.name().get_View()))],[M.TextNode("MAIN2:"),M.TextView(bx.name().get_View())]);});p.appFwk=(dR=(dS=O.op_Dereference((c5.Curried3(M.Element))("div")),O.bindWrap(function(fG){var fH;fH={$:1,$0:fG("color:@{name}")};return by.New(_7.op_BarGreaterGreater(dS.r,function(fI){return b2.New(fI,fH);}));},O.extractAtsD())),O.bindWrap(function(fG){var fH;fH={$:1,$0:[fG("@{AppFramework.AppFwkClient}")]};return by.New(_7.op_BarGreaterGreater(dR.r,function(fI){return b2.New(fI.f.$==0?fI.p.$==1?{$:0,$0:T.Apply(fI.f.$0,T.Const(fI.p.$0))}:{$:0,$0:T.Apply(fI.f.$0,fI.p.$0)}:fI.p.$==0?{$:0,$0:T.Apply(T.Const(fI.f.$0),fI.p.$0)}:{$:1,$0:fI.f.$0(fI.p.$0)},fH);}));},O.extractDocD()));p.split=(dT=(dU=O.op_Dereference(c5.Curried(bw.variableSplitter,2,[false,0,50,100])),O.bindWrap(function(fG){var fH;fH={$:1,$0:O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;})};return by.New(_7.op_BarGreaterGreater(dU.r,function(fI){return b2.New(fI,fH);}));},bx.appFwk().r)),O.bindWrap(function(fG){var fH;fH={$:1,$0:O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;})};return by.New(_7.op_BarGreaterGreater(dT.r,function(fI){return b2.New(fI.f.$==0?fI.p.$==1?{$:0,$0:T.Apply(fI.f.$0,T.Const(fI.p.$0))}:{$:0,$0:T.Apply(fI.f.$0,fI.p.$0)}:fI.p.$==0?{$:0,$0:T.Apply(T.Const(fI.f.$0),fI.p.$0)}:{$:1,$0:fI.f.$0(fI.p.$0)},fH);}));},bx.main().r));p.split2=(dV=(dW=O.op_Dereference(c5.Curried(bw.variableSplitter,2,[false,0,50,100])),O.bindWrap(function(fG){var fH;fH={$:1,$0:O.makeAViewDoc(function(){var fI;fI=fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)};return fI.$==0?M.BindView(a.id,fI.$0):fI.$0;})};return by.New(_7.op_BarGreaterGreater(dW.r,function(fI){return b2.New(fI,fH);}));},bx.appFwk().r)),(dX={$:1,$0:bx.main2()},by.New(_7.op_BarGreaterGreater(dV.r,function(fG){return b2.New(fG.f.$==0?fG.p.$==1?{$:0,$0:T.Apply(fG.f.$0,T.Const(fG.p.$0))}:{$:0,$0:T.Apply(fG.f.$0,fG.p.$0)}:fG.p.$==0?{$:0,$0:T.Apply(T.Const(fG.f.$0),fG.p.$0)}:{$:1,$0:fG.f.$0(fG.p.$0)},dX);}))));p.nodeRefToDocD=(dY=m.depend(),dY.Delay(function(){return dY.Bind(_5.getDocFromTextTypesD(),function(fG){function fH(fI){var fJ;return(fI.$==1?(fJ=fI.$0.$0,false):fI.$==2?(fJ=fI.$0.$0,false):fI.$==3?(fJ=fI.$0.$0,false):true)?n.map(bx.textValToTextType,fI.$0):n.ofArray([bx.itemRefToTextType(fJ)]);}return dY.Return(function(fI){return fG(fH(fI));});});}));p.varRefToVarD=(dZ=m.depend(),dZ.Delay(function(){return dZ.Bind(bx.currentPlugInNameD(),function(fG){return dZ.Return(function(fH){var fI,fJ,fK,fL;fI=bx.itemRefToString(fH.$0);fJ=(fK=(fL=(O.splitName(fG))(fI),O.tryGetVar(fL[0],fL[1])),fK==null?null:{$:1,$0:fK.$0.varVar});return fJ==null?new bH.New(T.Const((function(fM){return function(fN){return fM("Could not find var "+_6.toSafe(fN));};}(a.id))(fI)),a.ignore):fJ.$0;});});}));p.actRefToActD=(d0=m.depend(),d0.Delay(function(){return d0.Bind(bx.currentPlugInNameD(),function(fG){return d0.Return(function(fH){var fI,fJ,fK;fI=bx.itemRefToString(fH.$0);fJ=(fK=(O.splitName(fG))(fI),O.tryGetAct(fK[0],fK[1]));return fJ==null?O.newAct(new bm({$:0,$0:fI}),function(){((function(fL){return function(fM){return fL("Could not find action "+_6.toSafe(fM));};}(function(fL){c6.log(fL);}))(fI));}):fJ.$0;});});}));p.getParamD=(d1=m.depend(),d1.Delay(function(){return d1.Bind(bx.currentPlugInNameD(),function(fG){return d1.Bind(_5.getTextValFromSeqD(),function(fH){return d1.Return(function(fI){var fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f0,f1,f2,f3,f4,f5,f6;function f7(gd){return gd.docDoc;}function f8(){return(function(gd){return function(ge){return gd("missing ref Doc "+_2.p$1(ge));};}(a.id))(fL);}function f9(gd){return gd.varVar.get_View();}function f_(){return T.Const((function(gd){return function(ge){return gd("missing ref Var "+_2.p$1(ge));};}(a.id))(fQ));}function f$(gd){return gd.viwView;}function ga(){return T.Const((function(gd){return function(ge){return gd("missing ref View "+_2.p$1(ge));};}(a.id))(fW));}function gb(gd){return gd.actFunction;}function gc(){return(function(gd){return function(ge){return gd("missing ref Action "+_2.p$1(ge));};}(a.id))(f2);}fJ=(fK=O.splitName(fG),function(gd){return fK(bx.itemRefToString(gd));});return fI.$==1?(fL=fI.$0.$0,T.Map((fM=(fN=function(gd){var ge;ge=f7(gd);return ge;},function(gd){return gd==null?null:{$:1,$0:fN(gd.$0)};}),(fO=function(gd){return gd==null?f8():gd.$0;},function(gd){return fO(fM(gd));})),(fP=fJ(fL),O.tryGetDocW(fP[0],fP[1])))):fI.$==2?(fQ=fI.$0.$0,T.Bind((fR=(fS=(fT=function(gd){return T.Map(a.id,gd);},function(gd){return fT(f9(gd));}),function(gd){return gd==null?null:{$:1,$0:fS(gd.$0)};}),(fU=function(gd){return gd==null?f_():gd.$0;},function(gd){return fU(fR(gd));})),(fV=fJ(fQ),O.tryGetVarW(fV[0],fV[1])))):fI.$==3?(fW=fI.$0.$0,T.Bind((fX=(fY=(fZ=function(gd){return T.Map(a.id,gd);},function(gd){return fZ(f$(gd));}),function(gd){return gd==null?null:{$:1,$0:fY(gd.$0)};}),(f0=function(gd){return gd==null?ga():gd.$0;},function(gd){return f0(fX(gd));})),(f1=fJ(fW),O.tryGetViwW(f1[0],f1[1])))):fI.$==4?(f2=fI.$0.$0,T.Map((f3=(f4=function(gd){var ge;ge=gb(gd);return ge;},function(gd){return gd==null?null:{$:1,$0:f4(gd.$0)};}),(f5=function(gd){return gd==null?gc():gd.$0;},function(gd){return f5(f3(gd));})),(f6=fJ(f2),O.tryGetActW(f6[0],f6[1])))):T.Map(a.id,_4.toView(fH(n.map(bx.textValToTextType,fI.$0))));});});});}));p.getParam2D=(d2=m.depend(),d2.Delay(function(){return d2.Bind(bx.currentPlugInNameD(),function(fG){return d2.Bind(_5.getTextValFromSeqD(),function(){return d2.Return(function(fH){var fI,fJ,fK,fL;fI=(fJ=bx.itemRefToAbsolute(fG.get_Id()),(fK=function(fM){return function(fN){return fM("@{"+_6.toSafe(fN)+"}");};}(a.id),function(fM){return fK(fJ(fM));}));return(fH.$==3?(fL=fH.$0.$0,false):fH.$==1?(fL=fH.$0.$0,false):fH.$==2?(fL=fH.$0.$0,false):fH.$==4?(fL=fH.$0.$0,false):true)?A.concat("",q.map(function(fM){var fN;return(fM.$==1?(fN=fM.$0.$0,false):fM.$==3?(fN=fM.$0.$0,false):fM.$==4?(fN=fM.$0.$0,false):fM.$==2?(fN=fM.$0.$0,false):true)?fM.$0:fI(fN);},fH.$0)):fI(fL);});});});}));p.getParamTextD=(d3=m.depend(),d3.Delay(function(){return d3.Bind(bx.currentPlugInNameD(),function(fG){return d3.Bind(_5.getTextValFromSeqD(),function(fH){return d3.Return(function(fI){return function(fJ){var fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT;fK=(fL=O.splitName(fG),function(fU){return fL(bx.itemRefToString(fU));});return fI.$==1?(fM=(fN=fK(fI.$0.$0),O.tryGetDoc(fN[0],fN[1])),fM==null?null:fJ(fM.$0.docDoc)):fI.$==2?(fO=(fP=fK(fI.$0.$0),O.tryGetVar(fP[0],fP[1])),fO==null?null:T.Get(function(fU){return fJ(a.id(fU));},fO.$0.varVar.get_View())):fI.$==3?(fQ=(fR=fK(fI.$0.$0),O.tryGetViw(fR[0],fR[1])),fQ==null?null:T.Get(function(fU){return fJ(a.id(fU));},fQ.$0.viwView)):fI.$==4?(fS=(fT=fK(fI.$0.$0),O.tryGetAct(fT[0],fT[1])),fS==null?null:fJ(fS.$0.actFunction)):T.Get(function(fU){return fJ(a.id(fU));},_4.toView(fH(n.map(bx.textValToTextType,fI.$0))));};});});});}));p.initVal="-<InitValue>-";p.defVarM0=(d4=(d5=new bG.New$5(),[[e5,function(fG){return function(fH){return e7(fG,fH);};}],function(){d5.Clear();}]),(d6=d4[0][1],[function(fG){return(d6(fG))(function(fH){return bx.defVar(fH[0],fH[1],fH[2]);});},d4[1]]))[0];p.defDocFM=(d7=(d8=new bG.New$5(),[[e8,function(fG){return function(fH){return e_(fG,fH);};}],function(){d8.Clear();}]),(d9=d7[0][1],[function(fG){return(d9(fG))(function(fH){return bx.defDocF(fH[0],fH[1],fH[2],fH[3]);});},d7[1]]))[0];p.defActionM=(d_=(d$=new bG.New$5(),[[e$,function(fG){return function(fH){return fb(fG,fH);};}],function(){d$.Clear();}]),(ea=d_[0][1],[function(fG){return(ea(fG))(function(fH){return bx.defAction(fH[0],fH[1],fH[2],fH[3]);});},d_[1]]))[0];p.defActionsM=(eb=(ec=new bG.New$5(),[[fc,function(fG){return function(fH){return fe(fG,fH);};}],function(){ec.Clear();}]),(ed=eb[0][1],[function(fG){return(ed(fG))(function(fH){return bx.defActions(fH[0],fH[1],fH[2]);});},eb[1]]))[0];p.defButtonM=(ee=(ef=new bG.New$5(),[[ff,function(fG){return function(fH){return fh(fG,fH);};}],function(){ef.Clear();}]),(eg=ee[0][1],[function(fG){return(eg(fG))(function(fH){return bx.defButton(fH[0],fH[1],fH[2],fH[3],fH[4]);});},ee[1]]))[0];p.defInputM=(eh=(ei=new bG.New$5(),[[fi,function(fG){return function(fH){return fk(fG,fH);};}],function(){ei.Clear();}]),(ej=eh[0][1],[function(fG){return(ej(fG))(function(fH){return bx.defInput(fH[0],fH[1],fH[2],fH[3]);});},eh[1]]))[0];p.defTextAreaM=(ek=(el=new bG.New$5(),[[fl,function(fG){return function(fH){return fn(fG,fH);};}],function(){el.Clear();}]),(em=ek[0][1],[function(fG){return(em(fG))(function(fH){return bx.defTextArea(fH[0],fH[1],fH[2],fH[3]);});},ek[1]]))[0];p.defElementM=(en=(eo=new bG.New$5(),[[fo,function(fG){return function(fH){return fq(fG,fH);};}],function(){eo.Clear();}]),(ep=en[0][1],[function(fG){return(ep(fG))(function(fH){return bx.defElement(fH[0],fH[1],fH[2],fH[3],fH[4]);});},en[1]]))[0];p.defConcatM=(eq=(er=new bG.New$5(),[[fr,function(fG){return function(fH){return ft(fG,fH);};}],function(){er.Clear();}]),(es=eq[0][1],[function(fG){return(es(fG))(function(fH){return bx.defConcat(fH[0],fH[1],fH[2]);});},eq[1]]))[0];p.defViewM=(et=(eu=new bG.New$5(),[[fu,function(fG){return function(fH){return fw(fG,fH);};}],function(){eu.Clear();}]),(ev=et[0][1],[function(fG){return(ev(fG))(function(fH){return bx.defView(fH[0],fH[1],fH[2]);});},et[1]]))[0];p.defViewJSM=(ew=(ex=new bG.New$5(),[[fx,function(fG){return function(fH){return fz(fG,fH);};}],function(){ex.Clear();}]),(ey=ew[0][1],[function(fG){return(ey(fG))(function(fH){return bx.defViewJS(fH[0],fH[1],fH[2]);});},ew[1]]))[0];p.defSplitterM=(ez=(eA=new bG.New$5(),[[fA,function(fG){return function(fH){return fC(fG,fH);};}],function(){eA.Clear();}]),(eB=ez[0][1],[function(fG){return(eB(fG))(function(fH){return bx.defSplitter(fH[0],fH[1],fH[2],fH[3],fH[4],fH[5]);});},ez[1]]))[0];p.defTemplateM=(eC=(eD=new bG.New$5(),[[fD,function(fG){return function(fH){return fF(fG,fH);};}],function(){eD.Clear();}]),(eE=eC[0][1],[function(fG){return(eE(fG))(function(fH){return bx.defTemplate(fH[0],fH[1],fH[2]);});},eC[1]]))[0];eF=O.tryGetPlugIn(O.defPlugInName());eF==null?void 0:eF.$0.plgActions.Append(O.newActF(new bm({$:0,$0:"AddLayout"}),{$:2,$0:function(fG){return function(fH){return bx.addNewLayoutAct(fG,fH);};},$1:"[Name]",$2:"[Layout]"}));};q.tryFind=function(c_,c$){var da,db,dc;da=bz.Get(c$);try{db=null;while(db==null&&da.MoveNext()){dc=da.Current();c_(dc)?db={$:1,$0:dc}:void 0;}return db;}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}};q.map=function(c_,c$){return{GetEnumerator:function(){var da;da=bz.Get(c$);return new bN.New(null,null,function(db){return da.MoveNext()&&(db.c=c_(da.Current()),true);},function(){da.Dispose();});}};};q.filter=function(c_,c$){return{GetEnumerator:function(){var da;da=bz.Get(c$);return new bN.New(null,null,function(db){var dc,dd,de;dc=da.MoveNext();dd=da.Current();de=false;while(dc)if(c_(dd)){db.c=dd;de=true;dc=false;}else if(da.MoveNext())dd=da.Current();else dc=false;return de;},function(){da.Dispose();});}};};q.choose=function(c_,c$){return q.collect(function(da){var db;db=c_(da);return db==null?r.Empty:n.ofArray([db.$0]);},c$);};q.delay=function(c_){return{GetEnumerator:function(){return bz.Get(c_());}};};q.append=function(c_,c$){return{GetEnumerator:function(){var da,db;da=bz.Get(c_);db=[true];return new bN.New(da,null,function(dc){var dd;return dc.s.MoveNext()?(dc.c=dc.s.Current(),true):(dd=dc.s,!D.Equals(dd,null)?dd.Dispose():void 0,dc.s=null,db[0]&&(db[0]=false,dc.s=bz.Get(c$),dc.s.MoveNext()?(dc.c=dc.s.Current(),true):(dc.s.Dispose(),dc.s=null,false)));},function(dc){var dd;dd=dc.s;!D.Equals(dd,null)?dd.Dispose():void 0;});}};};q.isEmpty=function(c_){var c$;c$=bz.Get(c_);try{return!c$.MoveNext();}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}};q.collect=function(c_,c$){return q.concat(q.map(c_,c$));};q.tryFindIndex=function(c_,c$){var da,db,dc;da=bz.Get(c$);try{db=true;dc=0;while(db&&da.MoveNext())if(c_(da.Current()))db=false;else dc=dc+1;return db?null:{$:1,$0:dc};}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}};q.init=function(c_,c$){return q.take(c_,q.initInfinite(c$));};q.concat=function(c_){return{GetEnumerator:function(){var c$;c$=bz.Get(c_);return new bN.New(null,null,function(da){var db;while(true){db=da.s;if(D.Equals(db,null)){if(c$.MoveNext()){da.s=bz.Get(c$.Current());da=da;}else{c$.Dispose();return false;}}else if(db.MoveNext()){da.c=db.Current();return true;}else{da.Dispose();da.s=null;da=da;}}},function(da){var db;db=da.s;!D.Equals(db,null)?db.Dispose():void 0;!D.Equals(c$,null)?c$.Dispose():void 0;});}};};q.iter=function(c_,c$){var da;da=bz.Get(c$);try{while(da.MoveNext())c_(da.Current());}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}};q.indexed=function(c_){return q.mapi(function(c$,da){return[c$,da];},c_);};q.take=function(c_,c$){c_<0?q.nonNegative():void 0;return{GetEnumerator:function(){var da;da=[bz.Get(c$)];return new bN.New(0,null,function(db){var dc;db.s=db.s+1;return db.s>c_?false:(dc=da[0],D.Equals(dc,null)?q.insufficient():dc.MoveNext()?(db.c=dc.Current(),db.s===c_?(dc.Dispose(),da[0]=null):void 0,true):(dc.Dispose(),da[0]=null,q.insufficient()));},function(){var db;db=da[0];!D.Equals(db,null)?db.Dispose():void 0;});}};};q.initInfinite=function(c_){return{GetEnumerator:function(){return new bN.New(0,null,function(c$){c$.c=c_(c$.s);c$.s=c$.s+1;return true;},void 0);}};};q.distinct=function(c_){return q.distinctBy(a.id,c_);};q.tryPick=function(c_,c$){var da,db;da=bz.Get(c$);try{db=null;while(D.Equals(db,null)&&da.MoveNext())db=c_(da.Current());return db;}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}};q.fold=function(c_,c$,da){var db,dc;db=c$;dc=bz.Get(da);try{while(dc.MoveNext())db=c_(db,dc.Current());return db;}finally{if(typeof dc=="object"&&"Dispose"in dc)dc.Dispose();}};q.mapi=function(c_,c$){return q.map2(c_,q.initInfinite(a.id),c$);};q.distinctBy=function(c_,c$){return{GetEnumerator:function(){var da,db;da=bz.Get(c$);db=new bJ.New$3();return new bN.New(null,null,function(dc){var dd,de;if(da.MoveNext()){dd=da.Current();de=db.Add(c_(dd));while(!de&&da.MoveNext()){dd=da.Current();de=db.Add(c_(dd));}return de&&(dc.c=dd,true);}else return false;},function(){da.Dispose();});}};};q.head=function(c_){var c$;c$=bz.Get(c_);try{return c$.MoveNext()?c$.Current():q.insufficient();}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}};q.compareWith=function(c_,c$,da){var db,dc,dd,de,df;db=bz.Get(c$);try{dd=bz.Get(da);try{de=0;df=true;while(df&&de===0)if(db.MoveNext())de=dd.MoveNext()?c_(db.Current(),dd.Current()):1;else if(dd.MoveNext())de=-1;else df=false;dc=de;}finally{if(typeof dd=="object"&&"Dispose"in dd)dd.Dispose();}return dc;}finally{if(typeof db=="object"&&"Dispose"in db)db.Dispose();}};q.forall2=function(c_,c$,da){return!q.exists2(function(db,dc){return!c_(db,dc);},c$,da);};q.map2=function(c_,c$,da){return{GetEnumerator:function(){var db,dc;db=bz.Get(c$);dc=bz.Get(da);return new bN.New(null,null,function(dd){return db.MoveNext()&&dc.MoveNext()&&(dd.c=c_(db.Current(),dc.Current()),true);},function(){db.Dispose();dc.Dispose();});}};};q.exists2=function(c_,c$,da){var db,dc,dd,de;db=bz.Get(c$);try{dd=bz.Get(da);try{de=false;while(!de&&db.MoveNext()&&dd.MoveNext())de=c_(db.Current(),dd.Current());dc=de;}finally{if(typeof dd=="object"&&"Dispose"in dd)dd.Dispose();}return dc;}finally{if(typeof db=="object"&&"Dispose"in db)db.Dispose();}};q.findIndex=function(c_,c$){var da;da=q.tryFindIndex(c_,c$);return da==null?h.FailWith("KeyNotFoundException"):da.$0;};q.cache=function(c_){var c$,da;c$=[];da=[bz.Get(c_)];return{GetEnumerator:function(){return new bN.New(0,null,function(db){var dc;return db.s<c$.length?(db.c=c$[db.s],db.s=db.s+1,true):(dc=da[0],D.Equals(dc,null)?false:dc.MoveNext()?(db.s=db.s+1,db.c=dc.Current(),c$.push(db.c),true):(dc.Dispose(),da[0]=null,false));},void 0);}};};q.groupBy=function(c_,c$){return q.delay(function(){return s.groupBy(c_,s.ofSeq(c$));});};q.unfold=function(c_,c$){return{GetEnumerator:function(){return new bN.New(c$,null,function(da){var db;db=c_(da.s);return db==null?false:(da.c=db.$0[0],da.s=db.$0[1],true);},void 0);}};};q.nth=function(c_,c$){var da,db;if(c_<0)h.FailWith("negative index requested");da=-1;db=bz.Get(c$);try{while(da<c_){!db.MoveNext()?q.insufficient():void 0;da=da+1;}return db.Current();}finally{if(typeof db=="object"&&"Dispose"in db)db.Dispose();}};q.skip=function(c_,c$){return{GetEnumerator:function(){var da;da=bz.Get(c$);return new bN.New(true,null,function(db){var dc,dd;if(db.s){for(dc=1,dd=c_;dc<=dd;dc++)if(!da.MoveNext())q.insufficient();db.s=false;}else null;return da.MoveNext()&&(db.c=da.Current(),true);},function(){da.Dispose();});}};};q.max=function(c_){var c$,da,db;c$=bz.Get(c_);try{if(!c$.MoveNext())q.seqEmpty();da=c$.Current();while(c$.MoveNext()){db=c$.Current();D.Compare(db,da)===1?da=db:void 0;}return da;}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}};q.forall=function(c_,c$){return!q.exists(function(da){return!c_(da);},c$);};q.sortBy=function(c_,c$){return q.delay(function(){var da;da=s.ofSeq(c$);s.sortInPlaceBy(c_,da);return da;});};q.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};q.exists=function(c_,c$){var da,db;da=bz.Get(c$);try{db=false;while(!db&&da.MoveNext())db=c_(da.Current());return db;}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}};r=n.T=c5.Class({get_Item:function(c_){return q.nth(c_,this);},GetEnumerator:function(){return new bN.New(this,null,function(c_){var c$;c$=c_.s;return c$.$==0?false:(c_.c=c$.$0,c_.s=c$.$1,true);},void 0);},GetEnumerator0:function(){return bz.Get(this);}},null,r);r.Empty=new r({$:0});s.get=function(c_,c$){s.checkBounds(c_,c$);return c_[c$];};s.length=function(c_){return c_.dims===2?c_.length*c_.length:c_.length;};s.checkBounds=function(c_,c$){if(c$<0||c$>=c_.length)h.FailWith("Index was outside the bounds of the array.");};s.set=function(c_,c$,da){s.checkBounds(c_,c$);c_[c$]=da;};t=g.Obj=c5.Class({Equals:function(c_){return this===c_;},GetHashCode:function(){return -1;}},null,t);t.New=c5.Ctor(function(){},t);v=u.CEBuilder=c5.Class({},t,v);v.New=c5.Ctor(function(){t.New.call(this);},v);x=w.Builder=c5.Class({},t,x);x.New=c5.Ctor(function(){t.New.call(this);},x);w.result=function(){p.$cctor();return p.result;};w.errorf=function(c_){return c_(k.Error);};y=m.DependBuilder=c5.Class({Delay:function(c_){return c_();},Bind:function(c_,c$){return m.bind(c$,c_);},Return:function(c_){return m.rtn(c_);}},t,y);y.New=c5.Ctor(function(){t.New.call(this);},y);z.unindent=function(c_){var c$,da,db,dc;c$=A.SplitChars(c_,["\n"],0);da=(db=q.tryFindIndex(function(dd){return" "!==dd;},(dc=q.tryFind(function(dd){return A.Trim(dd)!=="";},c$),dc==null?"":dc.$0)),db==null?0:db.$0);return q.filter(function(dd){return!A.StartsWith(dd,"# 1 ");},q.map(function(dd){return dd.length<=da?"":dd.substring(da);},c$));};z.splitByChar=function(c_,c$){return A.SplitChars(c$,[c_],0);};z.delimitedO=function(c_,c$,da){var db,dc,dd,de,df;db=z.splitInTwoO(c_,da);return db==null?null:(dc=db.$0,(dd=dc[0],(de=z.splitInTwoO(c$,dc[1]),de==null?null:{$:1,$0:(df=de.$0,[dd,df[0],df[1]])})));};z.trim=function(c_){return A.Trim(c_);};z.unindentStr=function(){p.$cctor();return p.unindentStr;};z.splitInTwoO=function(c_,c$){var da;da=c$.indexOf(c_);return da===-1?null:{$:1,$0:[k["String.Left"](c$,da),c$.substring(da+c_.length)]};};z.StartsWith=function(c_,c$){return A.StartsWith(c$,c_)?{$:1,$0:B.string(c$,{$:1,$0:c_.length},null)}:null;};A.concat=function(c_,c$){return s.ofSeq(c$).join(c_);};A.SplitChars=function(c_,c$,da){return A.Split(c_,new a.RegExp("["+A.RegexEscape(c$.join(""))+"]"),da);};A.Trim=function(c_){return c_.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};A.StartsWith=function(c_,c$){return c_.substring(0,c$.length)==c$;};A.Split=function(c_,c$,da){return da===1?s.filter(function(db){return db!=="";},A.SplitWith(c_,c$)):A.SplitWith(c_,c$);};A.RegexEscape=function(c_){return c_.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};A.Replace=function(c_,c$,da){function db(dc){var dd,de,df;dd=dc.indexOf(c$);return dd!==-1?(de=A.ReplaceOnce(dc,c$,da),(df=dd+da.length,A.Substring(de,0,dd+da.length)+db(de.substring(df)))):dc;}return db(c_);};A.SplitWith=function(c_,c$){return c_.split(c$);};A.ReplaceOnce=function(c_,c$,da){return c_.replace(c$,da);};A.Substring=function(c_,c$,da){return c_.substr(c$,da);};A.forall=function(c_,c$){return q.forall(c_,A.protect(c$));};A.replicate=function(c_,c$){return s.create(c_,c$).join("");};A.protect=function(c_){return c_===null?"":c_;};A.SplitStrings=function(c_,c$,da){return A.Split(c_,new a.RegExp(A.concat("|",s.map(A.RegexEscape,c$))),da);};B.array=function(c_,c$,da){return c$==null?da!=null&&da.$==1?c_.slice(0,da.$0+1):[]:da==null?c_.slice(c$.$0):c_.slice(c$.$0,da.$0+1);};B.string=function(c_,c$,da){return c$==null?da!=null&&da.$==1?c_.slice(0,da.$0+1):"":da==null?c_.slice(c$.$0):c_.slice(c$.$0,da.$0+1);};C.tryParseWith=function(c_){function c$(da,db){return da?{$:1,$0:db}:null;}return function(da){return c$.apply(null,c_(da));};};C.parseDateO=function(){p.$cctor();return p.parseDateO;};C.parseIntO=function(){p.$cctor();return p.parseIntO;};C.parseInt64O=function(){p.$cctor();return p.parseInt64O;};C.parseSingleO=function(){p.$cctor();return p.parseSingleO;};C.parseDoubleO=function(){p.$cctor();return p.parseDoubleO;};C.parseGuidO=function(){p.$cctor();return p.parseGuidO;};C.Double=function(){p.$cctor();return p["|Double|_|"];};C.Int=function(){p.$cctor();return p["|Int|_|"];};D.Equals=function(c_,c$){var da,db,dc,dd;if(c_===c$)return true;else{da=typeof c_;if(da=="object"){if(c_===null||c_===void 0||c$===null||c$===void 0)return false;else if("Equals"in c_)return c_.Equals(c$);else if(c_ instanceof a.Array&&c$ instanceof a.Array)return D.arrayEquals(c_,c$);else if(c_ instanceof c7&&c$ instanceof c7)return D.dateEquals(c_,c$);else{db=[true];for(var de in c_)if(function(df){db[0]=!c_.hasOwnProperty(df)||c$.hasOwnProperty(df)&&D.Equals(c_[df],c$[df]);return!db[0];}(de))break;if(db[0]){for(var df in c$)if(function(dg){db[0]=!c$.hasOwnProperty(dg)||c_.hasOwnProperty(dg);return!db[0];}(df))break;}return db[0];}}else return da=="function"&&("$Func"in c_?c_.$Func===c$.$Func&&c_.$Target===c$.$Target:"$Invokes"in c_&&"$Invokes"in c$&&D.arrayEquals(c_.$Invokes,c$.$Invokes));}};D.Compare=function(c_,c$){var da,db,dc,dd,de,df;if(c_===c$)return 0;else{db=typeof c_;switch(db=="function"?1:db=="boolean"?2:db=="number"?2:db=="string"?2:db=="object"?3:0){case 0:return typeof c$=="undefined"?0:-1;case 1:return h.FailWith("Cannot compare function values.");case 2:return c_<c$?-1:1;case 3:if(c_===null)dc=-1;else if(c$===null)dc=1;else if("CompareTo"in c_)dc=c_.CompareTo(c$);else if("CompareTo0"in c_)dc=c_.CompareTo0(c$);else if(c_ instanceof a.Array&&c$ instanceof a.Array)dc=D.compareArrays(c_,c$);else if(c_ instanceof c7&&c$ instanceof c7)dc=D.compareDates(c_,c$);else{dd=[0];for(var dg in c_)if(function(dh){return!c_.hasOwnProperty(dh)?false:!c$.hasOwnProperty(dh)?(dd[0]=1,true):(dd[0]=D.Compare(c_[dh],c$[dh]),dd[0]!==0);}(dg))break;if(dd[0]===0){for(var dh in c$)if(function(di){return!c$.hasOwnProperty(di)?false:!c_.hasOwnProperty(di)&&(dd[0]=-1,true);}(dh))break;}dc=dd[0];}return dc;}}};D.arrayEquals=function(c_,c$){var da,db;if(s.length(c_)===s.length(c$)){da=true;db=0;while(da&&db<s.length(c_)){!D.Equals(s.get(c_,db),s.get(c$,db))?da=false:void 0;db=db+1;}return da;}else return false;};D.dateEquals=function(c_,c$){return c_.getTime()===c$.getTime();};D.compareArrays=function(c_,c$){var da,db;if(s.length(c_)<s.length(c$))return -1;else if(s.length(c_)>s.length(c$))return 1;else{da=0;db=0;while(da===0&&db<s.length(c_)){da=D.Compare(s.get(c_,db),s.get(c$,db));db=db+1;}return da;}};D.compareDates=function(c_,c$){return D.Compare(c_.getTime(),c$.getTime());};D.Hash=function(c_){var c$;c$=typeof c_;return c$=="function"?0:c$=="boolean"?c_?1:0:c$=="number"?c_:c$=="string"?D.hashString(c_):c$=="object"?c_==null?0:c_ instanceof a.Array?D.hashArray(c_):D.hashObject(c_):0;};D.hashString=function(c_){var c$,da,db;if(c_===null)return 0;else{c$=5381;for(da=0,db=c_.length-1;da<=db;da++)c$=D.hashMix(c$,c_[da].charCodeAt());return c$;}};D.hashArray=function(c_){var c$,da,db;c$=-34948909;for(da=0,db=s.length(c_)-1;da<=db;da++)c$=D.hashMix(c$,D.Hash(s.get(c_,da)));return c$;};D.hashObject=function(c_){var c$,da;if("GetHashCode"in c_)return c_.GetHashCode();else{c$=[0];for(var db in c_)if(function(dc){c$[0]=D.hashMix(D.hashMix(c$[0],D.hashString(dc)),D.Hash(c_[dc]));return false;}(db))break;return c$[0];}};D.hashMix=function(c_,c$){return(c_<<5)+c_+c$;};E.TryParseInt32=function(c_,c$){return E.TryParse(c_,-2147483648,2147483647,c$);};E.TryParseInt64=function(c_,c$){return E.TryParse(c_,-9223372036854775808,9223372036854775807,c$);};G.TryParse=function(c_,c$){try{c$.set(G.Parse(c_));return true;}catch(da){return false;}};G.Parse=function(c_){var c$,da,db;try{return G.ParseExact(c_,"D");}catch(dc){try{c$=G.ParseExact(c_,"B");}catch(dd){try{da=G.ParseExact(c_,"P");}catch(de){try{db=G.ParseExact(c_,"N");}catch(df){db=G.ParseExact(c_,"X");}da=db;}c$=da;}return c$;}};G.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(c_){var c$,da;c$=c3.random()*16|0;da=c_=="x"?c$:c$&3|8;return da.toString(16);});};G.ParseExact=function(c_,c$){var da,db,dc,de,df,dg,dh,di,dj,dk,dl,dm,dn;function dd(_do){var dp,dq,dr,ds;for(dp=0,dq=35;dp<=dq;dp++){dp===8||(dp===13||(dp===18||dp===23))?_do[dp]!=="-"?G.ShapeError():void 0:(ds=_do[dp],!("0"<=ds&&ds<="9"||"a"<=ds&&ds<="f")?G.ShapeError():void 0);}return _do;}de=c$.toUpperCase();if(de==="N"){df=A.Trim(c_).toLowerCase();if(df.length!==32)G.ShapeError();for(dg=0,dh=31;dg<=dh;dg++){di=df[dg];!("0"<=di&&di<="9"||"a"<=di&&di<="f")?G.ShapeError():void 0;}return A.Substring(df,0,8)+"-"+A.Substring(df,8,4)+"-"+A.Substring(df,12,4)+"-"+A.Substring(df,16,4)+"-"+df.substring(20);}else if(de==="D"){da=A.Trim(c_).toLowerCase();da.length!==36?G.ShapeError():void 0;return dd(da);}else if(de==="B"){db=A.Trim(c_).toLowerCase();db.length!==38||db[0]!=="{"||db[17]!=="}"?G.ShapeError():void 0;return dd(A.Substring(db,1,36));}else if(de==="P"){dc=A.Trim(c_).toLowerCase();dc.length!==38||dc[0]!=="("||dc[17]!==")"?G.ShapeError():void 0;return dd(A.Substring(dc,1,36));}else if(de==="X"){dj=A.Trim(c_).toLowerCase();if(dj.length!==68)G.ShapeError();for(dk=0,dl=67;dk<=dl;dk++){switch(dk){case 26:case 0:if(dj[dk]!=="{")G.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(dj[dk]!=="0")G.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(dj[dk]!=="x")G.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(dj[dk]!==",")G.ShapeError();break;case 67:case 66:if(dj[dk]!=="{")G.ShapeError();break;default:dn=dj[dk];!("0"<=dn&&dn<="9"||"a"<=dn&&dn<="f")?G.ShapeError():void 0;break;}}return A.Substring(dj,3,8)+"-"+A.Substring(dj,14,4)+"-"+A.Substring(dj,21,4)+"-"+A.Substring(dj,29,2)+A.Substring(dj,34,2)+"-"+A.Substring(dj,39,2)+A.Substring(dj,44,2)+A.Substring(dj,49,2)+A.Substring(dj,54,2)+A.Substring(dj,59,2)+A.Substring(dj,64,2);}else return G.FormatError();};G.ShapeError=function(){throw new ct.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};G.FormatError=function(){throw new ct.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};H.Create=function(c_){return bC.New(false,c_,H.forceLazy);};H.forceLazy=function(){var c_;c_=this.v();this.c=true;this.v=c_;this.f=H.cachedLazy;return c_;};H.cachedLazy=function(){return this.v;};K=J.WcTabStripT=c5.Class({connectedCallback:function(){var c_,c$,da,db;function dc(){var dd,de,df;de=!c$.hasAttribute("bottom");df=n.ofSeq(q.delay(function(){return q.collect(function(dg){var dh;dh=c$.childNodes[dg-1];return D.Equals(dh.nodeType,bb.ELEMENT_NODE)?[[dh.hasAttribute("tabname")?dh.getAttribute("tabname"):(function(di){return function(dj){return di("Tab "+a.String(dj));};}(a.id))(dg),dh]]:[];},h.range(1,c$.childNodes.length));}));while(db.childNodes.length>0)db.removeChild(db.lastChild);dd=J.tabStrip(c_.selected,de,true,df,M.Element("slot",r.Empty,r.Empty));bZ.LoadLocalTemplates("");M.Run(db,dd);}c_=this;!this.added?(c$=this,da=c$.attachShadow({mode:"open"}),db=self.document.createElement("div"),da.appendChild(db),dc(),c$.addEventListener("DOMSubtreeModified",k.delayed(50,dc)),this.added=true):void 0;}},t,K);K.Constructor=function(){var c_,c$;c_=(c$=c8.construct(self.HTMLElement,[],this.__proto__.constructor),c$);self.FsRootDll.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(c_);return c_;};K.New=c5.Ctor(function(){t.New.call(this);this.added=false;this.selected=Q.Create$1(1);(function(c_){return c_("WcTabStripT initializer");}(function(c_){c6.log(c_);}));},K);I.defineWebComponent=function(c_,c$,da){try{c6.log("defineWebComponent: "+c_);bM.setPrototypeOf(da.prototype,self.HTMLElement.prototype);bM.setPrototypeOf(da,self.HTMLElement);bM.setPrototypeOf(c$.prototype,da.prototype);self.customElements.define(c_,c$);}catch(db){(function(dc){return dc("Failed to define WebComponent. Not supported.");}(function(dc){c6.log(dc);}));}};M=L.Doc=c5.Class({},t,M);M.get_Empty=function(){return M.Mk(null,T.Const());};M.Concat=function(c_){var c$;c$=bL.ofSeqNonCopying(c_);return bL.TreeReduce(M.get_Empty(),M.Append,c$);};M.Verbatim=function(c_){var c$;return M.Mk(bL.MapTreeReduce(function(da){return D.Equals(da.nodeType,bb.TEXT_NODE)?{$:5,$0:da}:{$:1,$0:bR.CreateElemNode(da,bO.EmptyAttr(),null)};},null,function(da,db){return{$:0,$0:da,$1:db};},(c$=c9.parseHTML(c_),D.Equals(c$,null)?[]:c$)),T.Const());};M.Element=function(c_,c$,da){var db,dc;db=bc.Concat(c$);dc=M.Concat(da);return ci.New(b7.CreateElement(c_),db,dc);};M.Mk=function(c_,c$){return new M.New(c_,c$);};M.TextNode=function(c_){return M.Mk({$:5,$0:b7.CreateText(c_)},T.Const());};M.Append=function(c_,c$){return M.Mk({$:0,$0:c_.docNode,$1:c$.docNode},T.Map2Unit(c_.updates,c$.updates));};M.BindView=function(c_,c$){return M.EmbedView(T.Map(c_,c$));};M.TextView=function(c_){var c$;c$=bR.CreateTextNode();return M.Mk({$:4,$0:c$},T.Map(function(da){bR.UpdateTextNode(c$,da);},c_));};M.Input=function(c_,c$){return M.InputInternal("input",function(){return q.append(c_,[bd.Value(c$)]);});};M.InputArea=function(c_,c$){return M.InputInternal("textarea",function(){return q.append(c_,[bd.Value(c$)]);});};M.SelectDynOptional=function(c_,c$,da,db,dc){return M.SelectDyn(c_,function(dd){return dd!=null&&dd.$==1?da(dd.$0):c$;},T.Map(function(dd){return new r({$:1,$0:null,$1:n.map(function(de){return{$:1,$0:de};},dd)});},db),dc);};M.RunAppend=function(c_,c$){var da;da=self.document.createTextNode("");c_.appendChild(da);M.RunBefore(da,c$);};M.Run=function(c_,c$){bR.LinkElement(c_,c$.docNode);M.RunInPlace(false,c_,c$);};M.ConvertBy=function(c_,c$,da){return M.Flatten(T.MapSeqCachedBy(c_,c$,da));};M.EmbedView=function(c_){var c$;c$=bR.CreateEmbedNode();return M.Mk({$:2,$0:c$},T.Map(a.ignore,T.Bind(function(da){bR.UpdateEmbedNode(c$,da.docNode);return da.updates;},c_)));};M.InputInternal=function(c_,c$){var da;da=b7.CreateElement(c_);return ci.New(da,bc.Concat(c$(da)),M.get_Empty());};M.SelectDyn=function(c_,c$,da,db){return M.SelectImpl(c_,c$,function(dc){function dd(de,df){return M.Element("option",n.ofArray([bc.Create("value",a.String(de))]),n.ofArray([M.TextNode(c$(df))]));}return M.Convert(function(de){return dd(de[0],de[1]);},T.Map(function(de){dc[0]=de;return q.mapi(function(df,dg){return[df,dg];},de);},da));},db);};M.RunBefore=function(c_,c$){var da;da=self.document.createTextNode("");c_.parentNode.insertBefore(da,c_);M.RunBetween(da,c_,c$);};M.Convert=function(c_,c$){return M.Flatten(T.MapSeqCached(c_,c$));};M.RunInPlace=function(c_,c$,da){var db;db=bR.CreateRunState(c$,da.docNode);T.Sink(cw.get_UseAnimations()||cx.BatchUpdatesEnabled()?cy.StartProcessor(bR.PerformAnimatedUpdate(c_,db,da.docNode)):function(){bR.PerformSyncUpdate(c_,db,da.docNode);},da.updates);};M.Flatten=function(c_){return M.EmbedView(T.Map(M.Concat,c_));};M.SelectImpl=function(c_,c$,da,db){var dc,dd,de,df;function dg(dl){return dl.selectedIndex;}function dh(dl,dm){dl.selectedIndex=dm;}function di(dl){var dm;dm=dg(dl);return dc[0].get_Item(dm);}function dj(dl){return q.findIndex(function(dm){return D.Equals(dl,dm);},dc[0]);}function dk(dl,dm){return dh(dl,dj(dm));}dc=[r.Empty];dd=b7.CreateElement("select");de=bd.DynamicCustom(function(dl){return function(dm){return dk(dl,dm);};},db.get_View());dd.addEventListener("change",function(){db.UpdateMaybe(function(dl){var dm;dm=di(dd);return D.Equals(dl,dm)?null:{$:1,$0:dm};});},false);return ci.New(dd,(df=bc.Append(de,bc.Concat(c_)),bc.Append(bd.OnAfterRender(function(dl){dk(dl,db.Get());}),df)),da(dc));};M.RunBetween=function(c_,c$,da){var db;bR.LinkPrevElement(c$,da.docNode);db=bR.CreateDelimitedRunState(c_,c$,da.docNode);T.Sink(cw.get_UseAnimations()||cx.BatchUpdatesEnabled()?cy.StartProcessor(bR.PerformAnimatedUpdate(false,db,da.docNode)):function(){bR.PerformSyncUpdate(false,db,da.docNode);},da.updates);};M.New=c5.Ctor(function(c_,c$){t.New.call(this);this.docNode=c_;this.updates=c$;},M);N=L.ListModel=c5.Class({TryFindByKeyAsView:function(c_){var c$;c$=this;return function(){var da,db,dc;da=(db=null,[c$.it.TryGetValue(c_,{get:function(){return db;},set:function(dd){db=dd;}}),db]);return da[0]?da[1]:(dc=bF.New({$:2,$0:c$.TryFindByKey(c_),$1:[]}),(c$.it.Add(c_,dc),dc));};},TryFindByKey:function(c_){var c$;c$=this;return s.tryFind(function(da){return D.Equals(c$.key(da),c_);},this["var"].Get());},Append:function(c_){var c$,da,db,dc;c$=this;da=this["var"].Get();db=this.key(c_);dc=s.tryFindIndex(function(dd){return D.Equals(c$.key(dd),db);},da);dc!=null&&dc.$==1?this["var"].Set(this.storage.SSetAt(dc.$0,c_,da)):this["var"].Set(this.storage.SAppend(c_,da));this.ObsoleteKey(db);},ContainsKey:function(c_){var c$;c$=this;return s.exists(function(da){return D.Equals(c$.key(da),c_);},this["var"].Get());},RemoveByKey:function(c_){var c$;c$=this;this["var"].Set(this.storage.SRemoveIf(function(da){return D.Equals(c$.key(da),c_);},this["var"].Get()));this.ObsoleteKey(c_);},ContainsKeyAsView:function(c_){var c$;function da(db){return D.Equals(c$.key(db),c_);}c$=this;return T.Map(function(db){return s.exists(da,db);},this["var"].get_View());},AppendMany:function(c_){var c$,da;function db(dc,dd){var de,df;de=c$.key(dd);c$.ObsoleteKey(de);df=s.tryFindIndex(function(dg){return D.Equals(c$.key(dg),de);},dc);return df==null?(da.push(dd),dc):c$.storage.SSetAt(df.$0,dd,dc);}c$=this;da=[];this["var"].Set(this.storage.SAppendMany(da,(((c5.Curried3(q.fold))(db))(this["var"].Get()))(c_)));},ObsoleteKey:function(c_){var c$,da;c$=(da=null,[this.it.TryGetValue(c_,{get:function(){return da;},set:function(db){da=db;}}),da]);c$[0]?(bF.Obsolete(c$[1]),this.it.Remove(c_)):void 0;},Lens:function(c_){return this.LensInto(a.id,function(c$,da){return da;},c_);},LensInto:function(c_,c$,da){return this["LensInto'"](c_,c$,da,T.Map(c_,this.FindByKeyAsView(da)));},MapLens:function(c_){var c$;c$=this;return T.MapSeqCachedViewBy(c$.key,function(da,db){return c_(da,c$["LensInto'"](a.id,function(dc,dd){return dd;},da,db));},this["var"].get_View());},"LensInto'":function(c_,c$,da,db){var dc,dd,de;dc=this;dd=b4.Id();de=new S({Get:function(){return c_(dc.FindByKey(da));},Set:function(df){return dc.UpdateBy(function(dg){return{$:1,$0:c$(dg,df)};},da);},SetFinal:function(df){return this.Set(df);},Update:function(df){return dc.UpdateBy(function(dg){return{$:1,$0:c$(dg,df(c_(dg)))};},da);},UpdateMaybe:function(df){return dc.UpdateBy(function(dg){var dh;dh=df(c_(dg));return dh==null?null:{$:1,$0:c$(dg,dh.$0)};},da);},get_View:function(){return db;},get_Id:function(){return dd;}});S.New.call(de);return de;},FindByKeyAsView:function(c_){return T.Map(function(c$){return c$.$0;},this.TryFindByKeyAsView(c_));},FindByKey:function(c_){var c$;c$=this;return s.find(function(da){return D.Equals(c$.key(da),c_);},this["var"].Get());},UpdateBy:function(c_,c$){var da,db,dc,dd,de;da=this;db=this["var"].Get();dc=s.tryFindIndex(function(df){return D.Equals(da.key(df),c$);},db);dc!=null&&dc.$==1?(dd=dc.$0,de=c_(s.get(db,dd)),de!=null&&de.$==1?(this["var"].Set(this.storage.SSetAt(dd,de.$0,db)),this.ObsoleteKey(c$)):void 0):void 0;},GetEnumerator:function(){return bz.Get(this["var"].Get());},GetEnumerator0:function(){return bz.Get0(this["var"].Get());}},t,N);N.New$1=c5.Ctor(function(c_){N.New$2.call(this,c_,[]);},N);N.New$2=c5.Ctor(function(c_,c$){var da;da=s.ofSeq(c$);N.New$3.call(this,c_,Q.Create$1(da),b$.InMemory(da));},N);N.New$3=c5.Ctor(function(c_,c$,da){t.New.call(this);this.key=c_;this["var"]=c$;this.storage=da;this.v=T.Map(function(db){return db.slice();},this["var"].get_View());this.it=new bG.New$5();},N);P.New=function(c_,c$,da,db,dc,dd){return{plgName:c_,plgVars:c$,plgViews:da,plgDocs:db,plgActions:dc,plgQueries:dd};};Q=L.Var$1=c5.Class({},t,Q);Q.Create$1=function(c_){return new bE.New(false,bF.New({$:2,$0:c_,$1:[]}),c_);};Q.Lens=function(c_,c$,da){var db,dc,dd;db=b4.Id();dc=T.Map(c$,c_.get_View());dd=new S({Get:function(){return c$(c_.Get());},Set:function(de){return c_.Update(function(df){return da(df,de);});},SetFinal:function(de){return this.Set(de);},Update:function(de){return c_.Update(function(df){return da(df,de(c$(df)));});},UpdateMaybe:function(de){return c_.UpdateMaybe(function(df){var dg;dg=de(c$(df));return dg==null?null:{$:1,$0:da(df,dg.$0)};});},get_View:function(){return dc;},get_Id:function(){return db;}});S.New.call(dd);return dd;};Q.Set=function(c_,c$){c_.Set(c$);};Q.Update=function(c_,c$){Q.Set(c_,c$(c_.Get()));};R=O.PlugInName=c5.Class({get_Id:function(){return this.$0;}},null,R);S=L.Var=c5.Class({},t,S);S.New=c5.Ctor(function(){t.New.call(this);},S);O.selectionPlugInO=function(){p.$cctor();return p.selectionPlugInO;};O.defaultPlugIn=function(){return P.New(new R({$:0,$0:""}),new N.New$1(function(c_){return c_.varName;}),new N.New$1(function(c_){return c_.viwName;}),new N.New$1(function(c_){return c_.docName;}),new N.New$1(function(c_){return c_.actName;}),new N.New$1(function(c_){return c_.qryName;}));};O.plugIns=function(){p.$cctor();return p.plugIns;};O.currentPlugInW=function(){p.$cctor();return p.currentPlugInW;};O.renderPlugIns=function(){return M.Flatten(O.plugIns().MapLens(function(c_){var c$,da,db,dc,dd;return(c$=(da=(db=c_.get_Id(),Y.Make().WithHole({$:1,$0:"name",$1:db})),da.WithHole(Z.EventQ2(da.k,"select",function(){return da.i;},function(){O.selectionPlugInO().Set({$:1,$0:c_});}))).WithHole({$:2,$0:"selected",$1:T.Map(function(de){return D.Equals(de,{$:1,$0:c_})?"selected":"";},O.selectionPlugInO().get_View())}),(dc=Z.CompleteHoles(c$.k,c$.h,[]),(dd=new X.New(dc[1],_0.tile(dc[0])),(c$.i=dd,dd)))).get_Doc();}));};O.renderVars=function(){function c_(da,db){return[da.plgName,db.varName];}function c$(da,db){var dc,dd,de,df;return(dc=(dd=db.varName.get_Id(),Y.Make().WithHole({$:1,$0:"name",$1:dd})).WithHole({$:8,$0:"value",$1:db.varVar}),(de=Z.CompleteHoles(dc.k,dc.h,[["value",0]]),(df=new X.New(de[1],_0.namevalueinput(de[0])),(dc.i=df,df)))).get_Doc();}return M.ConvertBy(function(da){return c_(da[0],da[1]);},function(da){return c$(da[0],da[1]);},T.Map(function(da){return q.map(function(db){return[da,db];},da.plgVars);},O.currentPlugInW()));};O.renderViews=function(){function c_(da,db){return[da.plgName,db.viwName];}function c$(da,db){var dc,dd,de,df;return(dc=(dd=db.viwName.get_Id(),Y.Make().WithHole({$:1,$0:"name",$1:dd})).WithHole({$:2,$0:"value",$1:db.viwView}),(de=Z.CompleteHoles(dc.k,dc.h,[]),(df=new X.New(de[1],_0.namevalue(de[0])),(dc.i=df,df)))).get_Doc();}return M.ConvertBy(function(da){return c_(da[0],da[1]);},function(da){return c$(da[0],da[1]);},T.Map(function(da){return q.map(function(db){return[da,db];},da.plgViews);},O.currentPlugInW()));};O.renderDocs=function(){function c_(da,db){return[da.plgName,db.docName];}function c$(da,db){var dc,dd,de,df,dg;return(dc=(dd=(de=db.docName.get_Id()+O.docParms(db),Y.Make().WithHole({$:1,$0:"name",$1:de})),dd.WithHole(Z.EventQ2(dd.k,"select",function(){return dd.i;},function(){T.Get(function(dh){var di;di=dh.plgName.get_Id()+"."+db.docName.get_Id();O.mainDocV().Set(di);},O.currentPlugInW());}))),(df=Z.CompleteHoles(dc.k,dc.h,[]),(dg=new X.New(df[1],_0.tile(df[0])),(dc.i=dg,dg)))).get_Doc();}return M.ConvertBy(function(da){return c_(da[0],da[1]);},function(da){return c$(da[0],da[1]);},T.Bind(function(da){function db(dc){return[da,dc];}return T.Map(function(dc){return q.map(db,dc);},da.plgDocs.v);},O.currentPlugInW()));};O.renderActions=function(){function c_(da,db){return[da.plgName,db.actName];}function c$(da,db){var dc,dd,de,df,dg,dh,di,dj,dk,dl;dc=(dd=db.actFunction,dd.$==1?(de=A.concat(", ",n.ofArray([dd.$1])),(function(dm){return function(dn){return dm("("+_6.toSafe(dn)+")");};}(a.id))(de)):dd.$==2?(df=A.concat(", ",n.ofArray([dd.$1,dd.$2])),(function(dm){return function(dn){return dm("("+_6.toSafe(dn)+")");};}(a.id))(df)):"");return(dg=(dh=bd.DynamicPred("disabled",T.Map(function(dm){return!dm;},db.actEnabled),T.Const("")),(di=(dj=db.actName.get_Id()+dc,Y.Make().WithHole({$:1,$0:"name",$1:dj})),di.WithHole(Z.EventQ2(di.k,"click",function(){return di.i;},function(dm){O.callFunction(null,dm,db.actFunction);}))).WithHole({$:3,$0:"attrs",$1:dh})),(dk=Z.CompleteHoles(dg.k,dg.h,[]),(dl=new X.New(dk[1],_0.action(dk[0])),(dg.i=dl,dl)))).get_Doc();}return M.ConvertBy(function(da){return c_(da[0],da[1]);},function(da){return c$(da[0],da[1]);},T.Map(function(da){return q.map(function(db){return[da,db];},da.plgActions);},O.currentPlugInW()));};O.renderQueries=function(){function c_(da,db){return[da.plgName,db.qryName];}function c$(da,db){var dc,dd,de,df,dg;return(dc=(dd=(de=db.qryName.get_Id(),Y.Make().WithHole({$:1,$0:"name",$1:de})),dd.WithHole(Z.EventQ2(dd.k,"select",function(){return dd.i;},function(){a.alert(db.qryFunction(null));}))),(df=Z.CompleteHoles(dc.k,dc.h,[]),(dg=new X.New(df[1],_0.tile(df[0])),(dc.i=dg,dg)))).get_Doc();}return M.ConvertBy(function(da){return c_(da[0],da[1]);},function(da){return c$(da[0],da[1]);},T.Map(function(da){return q.map(function(db){return[da,db];},da.plgQueries);},O.currentPlugInW()));};O.a11V=function(){p.$cctor();return p.a11V;};O.add1=function(c_){return c_+1;};O.mainDocV=function(){p.$cctor();return p.mainDocV;};O.callFunction=function(c_,c$,da){if(da.$==1)da.$0(c$);else if(da.$==2)(da.$0(c_))(c$);else da.$0();};O.valToAttr=function(c_,c$){return c$.$==0?bd.Dynamic(c_,c$.$0):bc.Create(c_,c$.$0);};O.valToStyle=function(c_,c$){return c$.$==0?bd.DynamicStyle(c_,c$.$0):bd.Style(c_,c$.$0);};O.currentPlugInNameDef=function(){p.$cctor();return p.currentPlugInNameDef;};O.currentPlugInNameD=function(){p.$cctor();return p.currentPlugInNameD;};O.splitName=function(c_){function c$(db){return z.splitByChar(".",db);}function da(db){return s.length(db)===1?[c_,new bm({$:0,$0:A.Trim(s.get(db,0))})]:[new R({$:0,$0:A.Trim(s.get(db,0))}),new bm({$:0,$0:A.Trim(s.get(db,1))})];}return function(db){return da(c$(db));};};O.tryGetDocW=function(c_,c$){return T.Bind(function(da){return da!=null&&da.$==1?da.$0.plgDocs.TryFindByKeyAsView(c$):T.Const(null);},O.tryGetPlugInW(c_));};O.getActualDoc=function(c_){var c$;c$=c_.docDoc.f();return c$.$==0?c$.$0:c$.$==1?c$.$0():M.Element("div",[],[M.TextNode((function(da){return function(db){return da("Doc with parameters not allowed here: "+_1.p(db));};}(a.id))(c_))]);};O.tryGetWoWW=function(c_,c$){return T.Bind(function(da){return da==null?T.Bind(function(db){return db==null?T.Const(null):T.Map(function(dc){return{$:1,$0:dc};},db.$0.varVar.get_View());},O.tryGetVarW(c_,c$)):T.Map(function(db){return{$:1,$0:db};},da.$0.viwView);},O.tryGetViwW(c_,c$));};O.tryGetDoc=function(c_,c$){var da;da=O.tryGetPlugIn(c_);return da==null?null:da.$0.plgDocs.TryFindByKey(c$);};O.tryGetWoW=function(c_,c$){var da,db,dc;da=(db=O.tryGetViw(c_,c$),db==null?null:{$:1,$0:{$:1,$0:db.$0.viwView}});return da==null?(dc=O.tryGetVar(c_,c$),dc==null?null:{$:1,$0:dc.$0.varVar.get_View()}):da.$0;};O.tryGetActW=function(c_,c$){return T.Bind(function(da){return da!=null&&da.$==1?da.$0.plgActions.TryFindByKeyAsView(c$):T.Const(null);},O.tryGetPlugInW(c_));};O.extractAtsD=function(){p.$cctor();return p.extractAtsD$1;};O.depWithExtracts=function(c_){var c$;return O.runDef((c$=m.depend(),c$.Delay(function(){return c$.Bind(O.extractAtsD(),function(da){return c$.Bind(O.extractDocD(),function(db){return c$.Bind(O.extractTextD(),function(dc){return c$.Return(c_(da,db,dc));});});});})));};O.docWithVar=function(c_,c$){var da,db;function dc(de){return de==null?null:{$:1,$0:c_(de.$0)};}function dd(){return O.errDoc((function(de){return function(df){return de("Var not found "+_6.toSafe(df));};}(a.id))(c$));}return M.BindView((da=function(de){return de==null?dd():de.$0;},function(de){return da(dc(de));}),(db=O.getParmRef(c$),O.tryGetVoVW(db[0],db[1])));};O.defPlugInName=function(){p.$cctor();return p.defPlugInName;};O.errDocf=function(c_){return c_(O.errDoc);};O.Lazy=function(c_){return c_.f();};O.getParmRef=function(c_){var c$,da,db,dc,dd;c$=(da=(db=z.delimitedO("@{","}",c_),db==null?null:{$:1,$0:(dc=db.$0,(dc[0],dd=dc[1],dc[2],dd))}),da==null?c_:da.$0);return(O.splitName(O.defPlugInName()))(c$);};O.tryGetVoV=function(c_,c$){var da,db,dc;da=(db=O.tryGetVar(c_,c$),db==null?null:{$:1,$0:{$:1,$0:db.$0.varVar}});return da==null?(dc=O.tryGetViw(c_,c$),dc==null?null:{$:1,$0:new bH.New(dc.$0.viwView,a.ignore)}):da.$0;};O.draggingEvent=function(c_,c$,da){var db,dc,dd,de,df,dg;function dh(dl){return c_?c$?dl.getBoundingClientRect().width:-dl.getBoundingClientRect().width:c$?dl.getBoundingClientRect().height:-dl.getBoundingClientRect().height;}function di(dl){return c_?dl.clientX:dl.clientY;}function dj(dl){var dm,dn,_do,dp;da.Set(a.String((dm=(dn=(di(dl)-dg)*100/(dc-de)+df,(_do=0,D.Compare(_do,dn)===1?_do:dn)),(dp=100,D.Compare(dp,dm)===-1?dp:dm))));}function dk(){if(db){db=false;self.removeEventListener("mousemove",dj,false);self.removeEventListener("mouseup",dk,false);}}db=false;dc=0;dd=0;de=0;df=0;dg=0;return function(dl){var dm,dn,_do;if(!db){dm=dl.toElement;db=true;df=(dn=(_do=da.Get(),(C.parseDoubleO())(_do)),dn==null?0:dn.$0);dg=di(dl);de=dh(dm);dc=dh(dm.parentElement);self.addEventListener("mousemove",dj,false);self.addEventListener("mouseup",dk,false);dl.preventDefault();}};};O.tryGetAct=function(c_,c$){var da;da=O.tryGetPlugIn(c_);return da==null?null:da.$0.plgActions.TryFindByKey(c$);};O.plugin=function(){p.$cctor();return p.plugin;};O.AppFwkClient=function(){p.$cctor();return p.AppFwkClient;};O.addPlugIn=function(c_){c_.plgViews.Append(O.newViw(new bm({$:0,$0:"PlugInName"}),T.Const(c_.plgName.get_Id())));O.plugIns().Append(c_);};O.docReference=function(){p.$cctor();return p.docReference;};O.htmlDoc=function(){p.$cctor();return p.htmlDoc;};O.trigAct=function(){p.$cctor();return p.trigAct;};O.trigActChange=function(){p.$cctor();return p.trigActChange;};O.input=function(){p.$cctor();return p.input;};O.textArea=function(){p.$cctor();return p.textArea;};O.select=function(){p.$cctor();return p.select;};O.inputFile=function(c_,c$,da){var db,dc,dd,de;db=(dc=(dd=(O.splitName(O.defPlugInName()))(da),O.tryGetAct(dd[0],dd[1])),dc==null?null:{$:1,$0:(de=dc.$0,M.Element("div",O.getAttrs(O.defPlugInName(),c_),[M.Element("div",[bc.Create("class","input-group")],[M.Element("span",[bc.Create("class","input-group-btn")],[M.Element("label",[bc.Create("class","btn")],[M.TextNode(c$),M.Element("input",[bc.Create("class","form-control"),bc.Create("type","file"),bd.Style("display","none"),bc.HandlerImpl("click",function(df){return function(){df.value="";};}),bc.HandlerImpl("change",function(df){return function(dg){return O.callFunction(df,dg,de.actFunction);};})],[])])])])]))});return db==null?O.errDoc((function(df){return function(dg){return df("Action not found "+_6.toSafe(dg));};}(a.id))(da)):db.$0;};O.inputLabel=function(){p.$cctor();return p.inputLabel;};O.setVar=function(c_,c$){(O.setVar0())([c_,c$]);};O.setVarDirect=function(c_,c$){(O.setVarDirect0())([c_,c$]);};O.dragSplitter=function(c_,c$){(O.dragSplitter0())([c_,c$]);};O.horizontal=function(c_,c$,da,db,dc){var dd,de,df,dg;return(dd=(de=Y.Make().WithHole({$:2,$0:"partsizes",$1:c_}).WithHole({$:7,$0:"afterrender",$1:c$}).WithHole({$:7,$0:"afterrendersp",$1:da}),de.WithHole(Z.EventQ2(de.k,"mousedown",function(){return de.i;},function(dh){db(dh.Event);}))).WithHole({$:2,$0:"gap",$1:dc}),(df=Z.CompleteHoles(dd.k,dd.h,[]),(dg=new X.New(df[1],_0.wcompsplitterhor(df[0])),(dd.i=dg,dg)))).get_Doc();};O.vertical=function(c_,c$,da,db,dc){var dd,de,df,dg;return(dd=(de=Y.Make().WithHole({$:2,$0:"partsizes",$1:c_}).WithHole({$:7,$0:"afterrender",$1:c$}).WithHole({$:7,$0:"afterrendersp",$1:da}),de.WithHole(Z.EventQ2(de.k,"mousedown",function(){return de.i;},function(dh){db(dh.Event);}))).WithHole({$:2,$0:"gap",$1:dc}),(df=Z.CompleteHoles(dd.k,dd.h,[]),(dg=new X.New(df[1],_0.wcompsplitterver(df[0])),(dd.i=dg,dg)))).get_Doc();};O.mainDoc=function(){var c_,c$,da,db,dc,dd;return(c_=(c$=O.getMainClientDoc(),(da=(db=O.mainDocV().get_View(),Y.Make().WithHole({$:2,$0:"maindoc",$1:db})),da.WithHole(Z.EventQ2(da.k,"goclient",function(){return da.i;},function(){O.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:c$})),(dc=Z.CompleteHoles(c_.k,c_.h,[]),(dd=new X.New(dc[1],_0.appframework(dc[0])),(c_.i=dd,dd)))).get_Doc();};O.getMainDoc=function(){p.$cctor();return p.getMainDoc;};O.newDoc=function(c_,c$){return bi.New(c_,H.Create(function(){return{$:0,$0:c$.f()};}));};O.newVar=function(c_,c$){return bu.New(c_,c$);};O.newViw=function(c_,c$){return bv.New(c_,c$);};O.newAct=function(c_,c$){return $.New(c_,{$:0,$0:c$},T.Const(true));};O.op_Dereference=function(c_){return by.New((_7.rtn())({$:1,$0:c_}));};O.makeAViewDoc=function(c_){return M.BindView(function(){return c_();},O.baseView());};O.tryGetVar=function(c_,c$){var da;da=O.tryGetPlugIn(c_);return da==null?null:da.$0.plgVars.TryFindByKey(c$);};O.tryGetVarW=function(c_,c$){return T.Bind(function(da){return da!=null&&da.$==1?da.$0.plgVars.TryFindByKeyAsView(c$):T.Const(null);},O.tryGetPlugInW(c_));};O.tryGetViwW=function(c_,c$){return T.Bind(function(da){return da!=null&&da.$==1?da.$0.plgViews.TryFindByKeyAsView(c$):T.Const(null);},O.tryGetPlugInW(c_));};O.tryGetViw=function(c_,c$){var da;da=O.tryGetPlugIn(c_);return da==null?null:da.$0.plgViews.TryFindByKey(c$);};O.tryGetPlugIn=function(c_){return O.plugIns().TryFindByKey(c_);};O.newActF=function(c_,c$){return $.New(c_,c$,T.Const(true));};O.docParms=function(c_){var c$,da,db,dc,dd,de;c$=c_.docDoc.f();return c$.$==1?"()":c$.$==2?(da=A.concat(", ",n.ofArray([c$.$1])),(function(df){return function(dg){return df("("+_6.toSafe(dg)+")");};}(a.id))(da)):c$.$==3?(db=A.concat(", ",n.ofArray([c$.$1,c$.$2])),(function(df){return function(dg){return df("("+_6.toSafe(dg)+")");};}(a.id))(db)):c$.$==4?(dc=A.concat(", ",n.ofArray([c$.$1,c$.$2,c$.$3])),(function(df){return function(dg){return df("("+_6.toSafe(dg)+")");};}(a.id))(dc)):c$.$==5?(dd=A.concat(", ",n.ofArray([c$.$1,c$.$2,c$.$3,c$.$4])),(function(df){return function(dg){return df("("+_6.toSafe(dg)+")");};}(a.id))(dd)):c$.$==6?(de=A.concat(", ",n.ofArray([c$.$1,c$.$2,c$.$3,c$.$4,c$.$5])),(function(df){return function(dg){return df("("+_6.toSafe(dg)+")");};}(a.id))(de)):"";};O.tryGetPlugInW=function(c_){return O.plugIns().TryFindByKeyAsView(c_);};O.extractDocD=function(){p.$cctor();return p.extractDocD$1;};O.extractTextD=function(){p.$cctor();return p.extractTextD$1;};O.runDef=function(c_){return O.run(O.defPlugInName(),c_);};O.tryGetVoVW=function(c_,c$){return T.Bind(function(da){return da==null?T.Map(function(db){return db==null?null:{$:1,$0:new bH.New(db.$0.viwView,a.ignore)};},O.tryGetViwW(c_,c$)):T.Const({$:1,$0:da.$0.varVar});},O.tryGetVarW(c_,c$));};O.errDoc=function(c_){return M.Element("div",[],[M.TextNode(c_)]);};O.newQry=function(c_,c$){return bD.New(c_,c$);};O.newDocF=function(c_,c$){return bi.New(c_,H.Create(function(){return c$;}));};O.getAttrs=function(c_,c$){return n.ofSeq(q.delay(function(){return q.append(q.choose(function(da){var db,dc,dd,de;function df(dg,dh){var di;if(dh.$==1){di=dh.$0;try{return dg.addEventListener(A.Trim(de),function(dj){return O.callFunction(dg,dj,di.actFunction);},false);}catch(dj){return(function(dk){return function(dl){return dk(_6.prettyPrint(dl));};}(function(dk){c6.log(dk);}))(dj);}}else try{return dg.setAttribute(A.Trim(de),A.Trim(dh.$0));}catch(dk){return(function(dl){return function(dm){return dl(_6.prettyPrint(dm));};}(function(dl){c6.log(dl);}))(dk);}}return!D.Equals(da,null)&&da.length===2&&(dc=s.get(da,1),A.Trim(s.get(da,0))!==""&&A.Trim(dc)!=="")?(dd=s.get(da,1),(de=s.get(da,0),{$:1,$0:bd.DynamicCustom(function(dg){return function(dh){return df(dg,dh);};},O.getTextData(c_,A.Trim(dd)))})):null;},q.map(function(da){return z.splitByChar("=",da);},z.splitByChar(";",c$))),q.delay(function(){return q.choose(function(da){var db,dc,dd,de,df;return!D.Equals(da,null)&&da.length===2&&(dc=s.get(da,1),A.Trim(s.get(da,0))!==""&&A.Trim(dc)!=="")?(dd=s.get(da,1),(de=s.get(da,0),{$:1,$0:(df=T.Map(function(dg){return dg.$==1?(function(dh){return function(di){return dh("@{"+_6.toSafe(di)+"}");};}(a.id))(dg.$0.actName.get_Id()):A.Trim(dg.$0);},O.getTextData(c_,A.Trim(dd))),bd.DynamicStyle(A.Trim(de),df))})):null;},q.map(function(da){return z.splitByChar(":",da);},z.splitByChar(";",c$)));}));}));};O.setVar0=function(){p.$cctor();return p.setVar0;};O.setVarDirect0=function(){p.$cctor();return p.setVarDirect0;};O.dragSplitter0=function(){p.$cctor();return p.dragSplitter0;};O.getMainClientDoc=function(){var c_;return M.EmbedView((c_=O.plugIns().v,T.Map2(function(c$,da){var db,dc;db=q.tryPick(function(dd){var de;de=q.tryFind(function(df){return dd.plgName.get_Id()===c$||dd.plgName.get_Id()+"."+df.docName.get_Id()===c$;},dd.plgDocs);return de==null?null:{$:1,$0:O.getActualDoc(de.$0)};},da);dc=O.AppFwkClient().f();return db==null?dc:db.$0;},O.mainDocV().get_View(),c_)));};O.mapVarO=function(c_,c$,da){return new bH.New(T.Map(function(db){return db==null?null:{$:1,$0:c$(db.$0)};},da.get_View()),function(db){var dc;if(db!=null&&db.$==1){dc=c_(db.$0);dc==null?void 0:da.Set({$:1,$0:dc.$0});}else da.Set(null);});};O.lensStrO=function(c_){return new bH.New(T.Map(function(c$){return c$!=null&&c$.$==1?c$.$0:"";},c_.get_View()),function(c$){if(c$==="")c_.Set(null);else c_.Set({$:1,$0:c$});});};O.bindWrap=function(c_,c$){return by.New(_7.op_GreaterGreaterEquals(c$,function(da){return c_(da).r;}));};O.unwrapBindWrap=function(c_,c$){return by.New(_7.op_BarGreaterGreater(c$.r,c_));};O.baseView=function(){p.$cctor();return p.baseView;};O.run=function(c_,c$){var da,db;da=(db=_7.depend(),db.Delay(function(){return db.Bind(O.getDocwD(),function(dc){return db.Bind(O.getTextActViewD(),function(dd){return db.Bind(O.currentPlugInNameD(),function(de){return db.Return(m.resolver(n.ofArray([["getDocFromReference",dc],["getTextActViewFromReference",dd],["currentPlugInName",de]]),c$));});});});}));return m.resolver(n.ofArray([["currentPlugInName",c_]]),da);};O.makeAViewDoc0=a.id;O.getTextData=function(c_,c$){var da,db,dc,dd;da=(db=z.delimitedO("@{","}",c$),db==null?null:{$:1,$0:(dc=db.$0,(dd=dc[0],O.getOneTextData(c_,dc[1],dd,dc[2])))});return da==null?T.Const({$:0,$0:c$}):da.$0;};O.newDoc0=function(c_,c$){return bi.New(c_,H.Create(function(){return{$:1,$0:c$};}));};O.getDocwD=function(){p.$cctor();return p.getDocwD;};O.getTextActViewD=function(){p.$cctor();return p.getTextActViewD;};O.getOneTextData=function(c_,c$,da,db){var dc,dd,de;dc=(O.splitName(c_))(c$);dd=dc[0];de=dc[1];return T.Bind(function(df){return df==null?T.Bind(function(dg){var dh;return dg==null?T.Const({$:0,$0:((((c5.Curried(function(di,dj,dk,dl){return di(_6.toSafe(dj)+" @{Missing "+_6.toSafe(dk)+"}"+_6.toSafe(dl));},4))(a.id))(da))(c$))(db)}):(dh=dg.$0,T.Bind(function(di){return di.$==1?T.Const({$:0,$0:(function(dj){return function(dk){return dj("Unexpected Action @{"+_6.toSafe(dk)+"}");};}(a.id))(di.$0.actName.get_Id())}):T.Const({$:0,$0:da+dh+di.$0});},O.getTextData(c_,db)));},O.tryGetWoWW(dd,de)):T.Const({$:1,$0:df.$0});},O.tryGetActW(dd,de));};O.newDocL=function(c_,c$){return bi.New(c_,c$);};T.Bind=function(c_,c$){return T.Join(T.Map(c_,c$));};T.Const=function(c_){var c$;c$=bF.New({$:0,$0:c_});return function(){return c$;};};T.Map=function(c_,c$){return T.CreateLazy(function(){return bF.Map(c_,c$());});};T.Get=function(c_,c$){var da;function db(){bF.WhenRun(c$(),function(dc){if(!da[0]){da[0]=true;c_(dc);}},function(){if(!da[0])db();});}da=[false];db();};T.Map2=function(c_,c$,da){return T.CreateLazy(function(){return bF.Map2(c_,c$(),da());});};T.Join=function(c_){return T.CreateLazy(function(){return bF.Join(c_());});};T.CreateLazy=function(c_){var c$;c$={c:null,o:c_};return function(){var da,db;da=c$.c;return da===null?(da=c$.o(),c$.c=da,(db=da.s,db!=null&&db.$==0)?c$.o=null:bF.WhenObsoleteRun(da,function(){c$.c=null;}),da):da;};};T.Apply=function(c_,c$){return T.Map2(function(da,db){return da(db);},c_,c$);};T.Sink=function(c_,c$){function da(){bF.WhenRun(c$(),c_,function(){cl.scheduler().Fork(da);});}cl.scheduler().Fork(da);};T.get_Do=function(){return b1.B;};T.TryGet=function(c_){return bF.TryGet(c_());};T.Map2Unit=function(c_,c$){return T.CreateLazy(function(){return bF.Map2Unit(c_(),c$());});};T.MapSeqCachedViewBy=function(c_,c$,da){var db;db=[new bG.New$5()];return T.Map(function(dc){var dd,de,df;dd=db[0];de=new bG.New$5();df=bL.mapInPlace(function(dg){var dh,di,dj;dh=c_(dg);di=dd.ContainsKey(dh)?(dj=dd.get_Item(dh),(Q.Set(dj.r,dg),dj)):T.ConvertSeqNode(function(dk){return c$(dh,dk);},dg);de.set_Item(dh,di);return di.e;},s.ofSeq(dc));db[0]=de;return df;},da);};T.MapSeqCachedBy=function(c_,c$,da){var db;db=[new bG.New$5()];return T.Map(function(dc){var dd,de,df;dd=db[0];de=new bG.New$5();df=bL.mapInPlace(function(dg){var dh,di;dh=c_(dg);di=dd.ContainsKey(dh)?dd.get_Item(dh):c$(dg);de.set_Item(dh,di);return di;},s.ofSeq(dc));db[0]=de;return df;},da);};T.MapSeqCached=function(c_,c$){return T.MapSeqCachedBy(a.id,c_,c$);};T.ConvertSeqNode=function(c_,c$){var da,db;da=Q.Create$1(c$);db=da.get_View();return{e:c_(db),r:da,w:db};};T.Map3=function(c_,c$,da,db){return T.CreateLazy(function(){return bF.Map3(c_,c$(),da(),db());});};T.Sequence=function(c_){return T.CreateLazy(function(){return bF.Sequence(q.map(function(c$){return c$();},c_));});};X=W.TemplateInstance=c5.Class({get_Doc:function(){return this.doc;}},t,X);X.New=c5.Ctor(function(c_,c$){t.New.call(this);this.doc=c$;this.allVars=c_.$==0?c_.$0:h.FailWith("Should not happen");},X);Y=W.ProviderBuilder=c5.Class({WithHole:function(c_){this.h.push(c_);return this;}},null,Y);Y.Make=function(){var c_;return Y.New(null,(c_=G.NewGuid(),a.String(c_)),[]);};Y.New=function(c_,c$,da){return new Y({i:c_,k:c$,h:da});};Z.CompleteHoles=function(c_,c$,da){var dc,dd,de,df,dg,dh;function db(di,dj){var dk,dl,dm,dn;return dd.Contains(di)?null:(dk=dj===0?(dl=Q.Create$1(""),[{$:8,$0:di,$1:dl},dl]):dj===1?(dm=Q.Create$1(0),[{$:13,$0:di,$1:dm},dm]):dj===2?(dn=Q.Create$1(false),[{$:9,$0:di,$1:dn},dn]):h.FailWith("Invalid value type"),(dc.set_Item(di,dk[1]),{$:1,$0:dk[0]}));}dc=new bG.New$5();dd=new bJ.New$3();de=bz.Get(c$);try{while(de.MoveNext()){df=de.Current();(df.$==8?(dg=[df.$0,bK.Box(df.$1)],true):df.$==11?(dg=[df.$0,bK.Box(df.$1)],true):df.$==10?(dg=[df.$0,bK.Box(df.$1)],true):df.$==13?(dg=[df.$0,bK.Box(df.$1)],true):df.$==12?(dg=[df.$0,bK.Box(df.$1)],true):df.$==9&&(dg=[df.$0,bK.Box(df.$1)],true))?(dh=dg[0],dd.Add(dh),dc.set_Item(dh,dg[1])):void 0;}}finally{if(typeof de=="object"&&"Dispose"in de)de.Dispose();}return[q.append(c$,s.choose(function(di){return db(di[0],di[1]);},da)),{$:0,$0:dc}];};Z.EventQ2=function(c_,c$,da,db){return{$:5,$0:c$,$1:true,$2:function(dc){return function(dd){return db({Vars:da(),Target:dc,Event:dd});};}};};_0.appfwkclient=function(c_){_0.fixedsplitterhor();_0.fixedsplitterver();bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},c_):void 0;};_1.p=function(c_){return"{"+("docName = "+_2.p(c_.docName))+"; "+("docDoc = "+_6.prettyPrint(c_.docDoc))+"}";};_2.p$1=function(c_){return c_.$==1?"FullRef ("+_6.prettyPrint(c_.$0)+", "+_6.prettyPrint(c_.$1)+")":"LocalRef "+_6.prettyPrint(c_.$0);};_0.tile=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"tile"},c_):void 0;};_0.namevalueinput=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},c_):void 0;};_0.namevalue=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"namevalue"},c_):void 0;};_0.action=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"action"},c_):void 0;};_0.fixedsplitterhor=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},c_):void 0;};_0.fixedsplitterver=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},c_):void 0;};_2.p=function(c_){return"PlgElemName "+_6.prettyPrint(c_.$0);};_0.wcompsplitterhor=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},c_):void 0;};_0.wcompsplitterver=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},c_):void 0;};_0.appframework=function(c_){bZ.LoadLocalTemplates("appframework");return c_?bZ.NamedTemplate("appframework",{$:1,$0:"appframework"},c_):void 0;};_2.p$16=function(c_){return c_.$==4?"PrActRef "+_2.p$8(c_.$0):c_.$==3?"PrViwRef "+_2.p$12(c_.$0):c_.$==2?"PrVarRef "+_2.p$11(c_.$0):c_.$==1?"PrDocRef "+_2.p$6(c_.$0):"PrTextValL "+_6.printList(function(c$){return _2.p$10(c$);},c_.$0);};_1.p$2=function(c_){return"{"+("actName = "+_2.p(c_.actName))+"; "+("actFunction = "+_2.p$27(c_.actFunction))+"; "+("actEnabled = "+_2.p$28(c_.actEnabled))+"}";};_2.p$8=function(c_){return"ActRef "+_2.p$1(c_.$0);};_2.p$12=function(c_){return"ViwRef "+_2.p$1(c_.$0);};_2.p$11=function(c_){return"VarRef "+_2.p$1(c_.$0);};_2.p$6=function(c_){return"DocRef "+_2.p$1(c_.$0);};_2.p$10=function(c_){return c_.$==4?"TvDocRef "+_2.p$6(c_.$0):c_.$==3?"TvActRef "+_2.p$8(c_.$0):c_.$==2?"TvViwRef "+_2.p$12(c_.$0):c_.$==1?"TvVarRef "+_2.p$11(c_.$0):"TvConst "+_6.prettyPrint(c_.$0);};_2.p$27=function(c_){return c_.$==2?"FunAct2 (<fun>, "+_6.prettyPrint(c_.$1)+", "+_6.prettyPrint(c_.$2)+")":c_.$==1?"FunAct1 (<fun>, "+_6.prettyPrint(c_.$1)+")":"FunAct0 <fun>";};_2.p$28=function(c_){return"View <fun>";};_2.p$2=function(c_){return c_.$==7?"EnPlgRef "+("("+_6.prettyPrint(c_.$0[0])+", "+_2.p$26(c_.$0[1])+")"):c_.$==6?"EnPlgDef "+_2.p$25(c_.$0):c_.$==5?"EnVJSDef "+_2.p$24(c_.$0):c_.$==4?"EnViwDef "+_2.p$23(c_.$0):c_.$==3?"EnVarDef "+_2.p$22(c_.$0):c_.$==2?"EnActDefs "+_2.p$21(c_.$0):c_.$==1?"EnActDef "+_2.p$20(c_.$0):"EnDocDef "+_2.p$3(c_.$0);};_2.p$26=function(c_){return c_.$==4?"RPlg":c_.$==3?"RAct":c_.$==2?"RViw":c_.$==1?"RVar":"RDoc";};_2.p$25=function(c_){return"PlgDef "+_6.prettyPrint(c_.$0);};_2.p$24=function(c_){return"VJSDef "+_6.printList(function(c$){return _2.p$16(c$);},c_.$0);};_2.p$23=function(c_){return"ViwDef "+_6.printList(function(c$){return _2.p$16(c$);},c_.$0);};_2.p$22=function(c_){return"VarDef "+_6.prettyPrint(c_.$0);};_2.p$21=function(c_){return"ActDefs "+_6.printList(function(c$){return _2.p$8(c$);},c_.$0);};_2.p$20=function(c_){return"ActDef ("+_2.p$8(c_.$0)+", "+_6.printList(function(c$){return _2.p$16(c$);},c_.$1)+")";};_2.p$3=function(c_){return c_.$==7?"DcTemplate "+_1.p$1(c_.$0):c_.$==6?"DcElement "+_2.p$19(c_.$0):c_.$==5?"DcConcat "+_2.p$17(c_.$0):c_.$==4?"DcDocF "+_2.p$15(c_.$0):c_.$==3?"DcTextArea "+_2.p$14(c_.$0):c_.$==2?"DcInput "+_2.p$13(c_.$0):c_.$==1?"DcButton "+_2.p$7(c_.$0):"DcSplitter "+_2.p$4(c_.$0);};_1.p$1=function(c_){return"{"+("tmpName = "+_6.prettyPrint(c_.tmpName))+"; "+("vars = "+_6.printArray(function(c$){return"("+_6.prettyPrint(c$[0])+", "+_2.p$11(c$[1])+")";},c_.vars))+"; "+("views = "+_6.printArray(function(c$){return"("+_6.prettyPrint(c$[0])+", "+_2.p$16(c$[1])+")";},c_.views))+"; "+("docs = "+_6.printArray(function(c$){return"("+_6.prettyPrint(c$[0])+", "+_2.p$6(c$[1])+")";},c_.docs))+"; "+("actions = "+_6.printArray(function(c$){return"("+_6.prettyPrint(c$[0])+", "+_2.p$8(c$[1])+")";},c_.actions))+"; "+("attrs = "+_2.p$16(c_.attrs))+"}";};_2.p$19=function(c_){return"ElementDef ("+_6.prettyPrint(c_.$0)+", "+_2.p$16(c_.$1)+", "+_6.printList(function(c$){return _2.p$18(c$);},c_.$2)+")";};_2.p$17=function(c_){return"ConcatDef "+_6.printList(function(c$){return _2.p$18(c$);},c_.$0);};_2.p$15=function(c_){return"DocFDef ("+_2.p$6(c_.$0)+", "+_6.printList(function(c$){return _2.p$16(c$);},c_.$1)+")";};_2.p$14=function(c_){return"TextAreaDef ("+_2.p$11(c_.$0)+", "+_6.printArray(function(c$){return _2.p$9(c$);},c_.$1)+")";};_2.p$13=function(c_){return"InputDef ("+_2.p$11(c_.$0)+", "+_6.printArray(function(c$){return _2.p$9(c$);},c_.$1)+")";};_2.p$7=function(c_){return"ButtonDef ("+_2.p$8(c_.$0)+", "+_6.printArray(function(c$){return _2.p$9(c$);},c_.$1)+", "+_6.printList(function(c$){return _2.p$10(c$);},c_.$2)+")";};_2.p$4=function(c_){return"SplitterDef ("+_6.prettyPrint(c_.$0)+", "+_2.p$5(c_.$1)+", "+_2.p$6(c_.$2)+", "+_2.p$6(c_.$3)+")";};_2.p$18=function(c_){return c_.$==3?"NdViwRef "+_2.p$12(c_.$0):c_.$==2?"NdVarRef "+_2.p$11(c_.$0):c_.$==1?"NdDocRef "+_2.p$6(c_.$0):"NdTextValL "+_6.printList(function(c$){return _2.p$10(c$);},c_.$0);};_2.p$9=function(c_){return c_.$==2?"AtAct ("+_6.prettyPrint(c_.$0)+", "+_2.p$8(c_.$1)+")":c_.$==1?"AtAttr ("+_6.prettyPrint(c_.$0)+", "+_6.printList(function(c$){return _2.p$10(c$);},c_.$1)+")":"AtStyle ("+_6.prettyPrint(c_.$0)+", "+_6.printList(function(c$){return _2.p$10(c$);},c_.$1)+")";};_2.p$5=function(c_){return c_.$==1?"Variable ("+_6.prettyPrint(c_.$0)+", "+_6.prettyPrint(c_.$1)+", "+_6.prettyPrint(c_.$2)+")":"Fixed ("+_6.prettyPrint(c_.$0)+", "+_6.prettyPrint(c_.$1)+")";};_3=O.PlugInBuilder=c5.Class({AddAct:function(c_,c$,da){c_.plgActions.Append(O.newAct(new bm({$:0,$0:c$}),da));return c_;},AddDoc:function(c_,c$,da){c_.plgDocs.Append(O.newDoc(new bm({$:0,$0:c$}),da));return c_;},AddVar:function(c_,c$,da){c_.plgVars.Append(O.newVar(new bm({$:0,$0:c$}),da));return c_;},Name:function(c_,c$){return P.New(new R({$:0,$0:c$}),c_.plgVars,c_.plgViews,c_.plgDocs,c_.plgActions,c_.plgQueries);},Yield:function(){return this.Zero();},AddViw:function(c_,c$,da){c_.plgViews.Append(O.newViw(new bm({$:0,$0:c$}),da));return c_;},AddQry:function(c_,c$,da){c_.plgQueries.Append(O.newQry(new bm({$:0,$0:c$}),da));return c_;},AddAct2:function(c_,c$,da,db,dc){c_.plgActions.Append(O.newActF(new bm({$:0,$0:c$}),{$:2,$0:da,$1:db,$2:dc}));return c_;},AddDoc3:function(c_,c$,da,db,dc,dd){c_.plgDocs.Append(O.newDocF(new bm({$:0,$0:c$}),{$:4,$0:da,$1:db,$2:dc,$3:dd}));return c_;},AddDoc4:function(c_,c$,da,db,dc,dd,de){c_.plgDocs.Append(O.newDocF(new bm({$:0,$0:c$}),{$:5,$0:da,$1:db,$2:dc,$3:dd,$4:de}));return c_;},AddDoc2:function(c_,c$,da,db,dc){c_.plgDocs.Append(O.newDocF(new bm({$:0,$0:c$}),{$:3,$0:da,$1:db,$2:dc}));return c_;},AddDoc1:function(c_,c$,da,db){c_.plgDocs.Append(O.newDocF(new bm({$:0,$0:c$}),{$:2,$0:da,$1:db}));return c_;},Merge:function(c_,c$,da){c_.plgVars.AppendMany(q.map(function(db){return bu.New(new bm({$:0,$0:c$+db.varName.get_Id()}),db.varVar);},da.plgVars));c_.plgViews.AppendMany(q.map(function(db){return bv.New(new bm({$:0,$0:c$+db.viwName.get_Id()}),db.viwView);},da.plgViews));c_.plgDocs.AppendMany(q.map(function(db){return bi.New(new bm({$:0,$0:c$+db.docName.get_Id()}),db.docDoc);},da.plgDocs));c_.plgActions.AppendMany(q.map(function(db){return $.New(new bm({$:0,$0:c$+db.actName.get_Id()}),db.actFunction,db.actEnabled);},da.plgActions));c_.plgQueries.AppendMany(q.map(function(db){return bD.New(new bm({$:0,$0:c$+db.qryName.get_Id()}),db.qryFunction);},da.plgQueries));return c_;},Zero:function(){var c_;c_=O.defaultPlugIn();return P.New(new R({$:0,$0:"Main"}),c_.plgVars,c_.plgViews,c_.plgDocs,c_.plgActions,c_.plgQueries);},AddDoc0:function(c_,c$,da){c_.plgDocs.Append(O.newDoc0(new bm({$:0,$0:c$}),da));return c_;}},t,_3);_3.New=c5.Ctor(function(){t.New.call(this);},_3);_4.apply=function(c_,c$){return c_.$==0?c$.$==1?{$:0,$0:T.Apply(c_.$0,T.Const(c$.$0))}:{$:0,$0:T.Apply(c_.$0,c$.$0)}:c$.$==0?{$:0,$0:T.Apply(T.Const(c_.$0),c$.$0)}:{$:1,$0:c_.$0(c$.$0)};};_4.traverseListApp=function(c_,c$){function da(db,dc){return new r({$:1,$0:db,$1:dc});}return n.foldBack(function(db,dc){return((_4.op_LessMultiplyGreater())(((_4.op_LessMultiplyGreater())(_4.rtn(function(dd){return function(de){return da(dd,de);};})))(c_(db))))(dc);},c$,_4.rtn(r.Empty));};_4.toView=function(c_){return c_.$==0?c_.$0:T.Const(c_.$0);};_4.rtn=function(c_){return{$:1,$0:c_};};_4.op_LessMultiplyGreater=function(){p.$cctor();return p.op_LessMultiplyGreater;};_4.addDoc=function(c_,c$){return c$.$==0?{$:1,$0:[M.BindView(M.Concat,c$.$0),c_]}:{$:1,$0:q.append(c$.$0,[c_])};};_4.textDoc=function(c_){return c_.$==0?M.TextView(c_.$0):M.TextNode(c_.$0);};_5.getDocFromReference=function(c_){return M.TextNode((function(c$){return function(da){return c$("getDocFromReference not implemented: @{"+_6.toSafe(da)+"}");};}(a.id))(c_));};_5.getTextActViewFromReference=function(c_){return T.Const({$:0,$0:(function(c$){return function(da){return c$("getTextActViewFromReference not implemented: @{"+_6.toSafe(da)+"}");};}(a.id))(c_)});};_5.getDocFromReferenceD=function(){p.$cctor();return p.getDocFromReferenceD;};_5.getDocFromTextTypesD=function(){p.$cctor();return p.getDocFromTextTypesD;};_5.getTextData=function(c_){var c$,da,db;c$=(da=z.delimitedO("@{","}",c_),da==null?null:{$:1,$0:(db=da.$0,_5.getOneTextData(db[0],db[1],db[2]))});return c$==null?n.ofArray([{$:0,$0:c_}]):c$.$0;};_5.getTextActViewFromReferenceD=function(){p.$cctor();return p.getTextActViewFromReferenceD;};_5.getTextValFromSeqD=function(){p.$cctor();return p.getTextValFromSeqD;};_5.getTextValD=function(){p.$cctor();return p.getTextValD;};_5.extractTextD=function(){p.$cctor();return p.extractTextD;};_5.extractDocD=function(){p.$cctor();return p.extractDocD;};_5.extractAtsD=function(){p.$cctor();return p.extractAtsD;};_5.getOneTextData=function(c_,c$,da){return(c_===""?a.id:function(db){return new r({$:1,$0:{$:0,$0:c_},$1:db});})(new r({$:1,$0:{$:1,$0:c$},$1:da===""?r.Empty:_5.getTextData(da)}));};_6.toSafe=function(c_){return c_==null?"":c_;};_6.prettyPrint=function(c_){var c$,da;function db(dc,dd){return dc+" = "+_6.prettyPrint(dd);}return c_===null?"null":(c$=typeof c_,c$=="string"?"\""+c_+"\"":c$=="object"?c_ instanceof a.Array?"[|"+A.concat("; ",s.map(_6.prettyPrint,c_))+"|]":(da=a.String(c_),da==="[object Object]"?"{"+A.concat("; ",s.map(function(dc){return db(dc[0],dc[1]);},bl.GetFields(c_)))+"}":da):a.String(c_));};_6.printList=function(c_,c$){return"["+A.concat("; ",q.map(c_,c$))+"]";};_6.printArray=function(c_,c$){return c$===null?"null":"[|"+A.concat("; ",s.map(c_,c$))+"|]";};_7.op_GreaterMultiplyGreater=function(c_,c$){var da;da=_7.depend();return da.Delay(function(){return da.Bind(c$,function(db){return da.Return(function(dc){return db(c_(dc));});});});};_7.depend=function(){p.$cctor();return p.depend$1;};_7.rtn=function(){p.$cctor();return p.rtn;};_7.op_BarGreaterGreater=function(c_,c$){return(m.map(c$))(c_);};_7.op_GreaterGreaterEquals=function(c_,c$){return m.bind(c$,c_);};s.map=function(c_,c$){var da,db,dc;da=new a.Array(c$.length);for(db=0,dc=c$.length-1;db<=dc;db++)da[db]=c_(c$[db]);return da;};s.partition=function(c_,c$){var da,db,dc,dd;da=[];db=[];for(dc=0,dd=c$.length-1;dc<=dd;dc++)if(c_(c$[dc]))da.push(c$[dc]);else db.push(c$[dc]);return[da,db];};s.choose=function(c_,c$){var da,db,dc,dd;da=[];for(db=0,dc=c$.length-1;db<=dc;db++){dd=c_(c$[db]);dd==null?void 0:da.push(dd.$0);}return da;};s.ofSeq=function(c_){var c$,da;if(c_ instanceof a.Array)return c_.slice();else if(c_ instanceof r)return s.ofList(c_);else{c$=[];da=bz.Get(c_);try{while(da.MoveNext())c$.push(da.Current());return c$;}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}}};s.tryPick=function(c_,c$){var da,db,dc;da=null;db=0;while(db<c$.length&&da==null){dc=c_(c$[db]);dc!=null&&dc.$==1?da=dc:void 0;db=db+1;}return da;};s.tryFind=function(c_,c$){var da,db;da=null;db=0;while(db<c$.length&&da==null){c_(c$[db])?da={$:1,$0:c$[db]}:void 0;db=db+1;}return da;};s.tryFindIndex=function(c_,c$){var da,db;da=null;db=0;while(db<c$.length&&da==null){c_(c$[db])?da={$:1,$0:db}:void 0;db=db+1;}return da;};s.ofList=function(c_){var c$,da;da=[];c$=c_;while(!(c$.$==0)){da.push(n.head(c$));c$=n.tail(c$);}return da;};s.foldBack=function(c_,c$,da){var db,dc,dd,de,df;db=da;dd=c$.length;for(de=1,df=dd;de<=df;de++)db=c_(c$[dd-de],db);return db;};s.sortInPlace=function(c_){s.mapInPlace(function(c$){return c$[0];},s.mapiInPlace(function(c$,da){return[da,c$];},c_).sort(D.Compare));};s.exists=function(c_,c$){var da,db,dc,dd;da=false;db=0;dd=s.length(c$);while(!da&&db<dd)if(c_(c$[db]))da=true;else db=db+1;return da;};s.filter=function(c_,c$){var da,db,dc;da=[];for(db=0,dc=c$.length-1;db<=dc;db++)if(c_(c$[db]))da.push(c$[db]);return da;};s.concat=function(c_){return a.Array.prototype.concat.apply([],s.ofSeq(c_));};s.iter=function(c_,c$){var da,db;for(da=0,db=c$.length-1;da<=db;da++)c_(c$[da]);};s.pick=function(c_,c$){var da;da=s.tryPick(c_,c$);return da==null?h.FailWith("KeyNotFoundException"):da.$0;};s.find=function(c_,c$){var da;da=s.tryFind(c_,c$);return da==null?h.FailWith("KeyNotFoundException"):da.$0;};s.forall=function(c_,c$){var da,db,dc,dd;da=true;db=0;dd=s.length(c$);while(da&&db<dd)if(c_(c$[db]))db=db+1;else da=false;return da;};s.create=function(c_,c$){var da,db,dc;da=new a.Array(c_);for(db=0,dc=c_-1;db<=dc;db++)da[db]=c$;return da;};s.init=function(c_,c$){var da,db,dc;c_<0?h.FailWith("Negative size given."):null;da=new a.Array(c_);for(db=0,dc=c_-1;db<=dc;db++)da[db]=c$(db);return da;};s.sortInPlaceBy=function(c_,c$){s.mapInPlace(function(da){return da[0];},s.mapiInPlace(function(da,db){return[db,[c_(db),da]];},c$).sort(function(da,db){return D.Compare(da[1],db[1]);}));};_8.AEmpty={$:3};_.NewFromSeq=function(c_){var c$,da,db;c$={};da=bz.Get(c_);try{while(da.MoveNext()){db=da.Current();c$[db[0]]=db[1];}}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}return c$;};i.REGEX$1=function(c_,c$,da){var db;return da===null?null:(db=(new a.String(da)).match(new a.RegExp(c_,c$)),D.Equals(db,null)?null:!D.Equals(db,null)&&db.length===0?null:{$:1,$0:db});};$.New=function(c_,c$,da){return{actName:c_,actFunction:c$,actEnabled:da};};bc=L.AttrProxy=c5.Class({},null,bc);bc.Concat=function(c_){var c$;c$=bL.ofSeqNonCopying(c_);return bL.TreeReduce(bO.EmptyAttr(),bc.Append,c$);};bc.Create=function(c_,c$){return bO.Static(function(da){b7.SetAttr(da,c_,c$);});};bc.Append=function(c_,c$){return bO.AppendTree(c_,c$);};bc.HandlerImpl=function(c_,c$){return bO.Static(function(da){da.addEventListener(c_,function(db){return(c$(da))(db);},false);});};bc.Handler=function(c_,c$){return bc.HandlerImpl(c_,c$);};bd.DynamicCustom=function(c_,c$){return bO.Dynamic(c$,c_);};bd.DynamicPred=function(c_,c$,da){function db(dc,dd){return dd[0]?b7.SetAttr(dc,c_,dd[1]):b7.RemoveAttr(dc,c_);}return bO.Dynamic(T.Map2(function(dc,dd){return[dc,dd];},c$,da),function(dc){return function(dd){return db(dc,dd);};});};bd.Dynamic=function(c_,c$){return bO.Dynamic(c$,function(da){return function(db){return b7.SetAttr(da,c_,db);};});};bd.DynamicStyle=function(c_,c$){return bO.Dynamic(c$,function(da){return function(db){return b7.SetStyle(da,c_,db);};});};bd.Style=function(c_,c$){return bO.Static(function(da){b7.SetStyle(da,c_,c$);});};bd.Value=function(c_){function c$(da){return{$:1,$0:da};}return bd.CustomValue(c_,a.id,function(da){return c$(a.id(da));});};bd.CustomValue=function(c_,c$,da){return bd.CustomVar(c_,function(db,dc){db.value=c$(dc);},function(db){return da(db.value);});};bd.CustomVar=function(c_,c$,da){function db(dd,de){return c_.UpdateMaybe(function(df){var dg,dh;dg=da(dd);return dg!=null&&dg.$==1&&(!D.Equals(dg.$0,df)&&(dh=[dg,dg.$0],true))?dh[0]:null;});}function dc(dd,de){var df,dg;df=da(dd);return df!=null&&df.$==1&&(D.Equals(df.$0,de)&&(dg=df.$0,true))?null:c$(dd,de);}return bc.Concat([bd.Handler("change",function(dd){return function(de){return db(dd,de);};}),bd.Handler("input",function(dd){return function(de){return db(dd,de);};}),bd.Handler("keypress",function(dd){return function(de){return db(dd,de);};}),bd.DynamicCustom(function(dd){return function(de){return dc(dd,de);};},c_.get_View())]);};bd.OnAfterRender=function(c_){return new bc({$:4,$0:c_});};bd.Handler=function(c_,c$){return bO.Static(function(da){da.addEventListener(c_,function(db){return(c$(da))(db);},false);});};bd.Checked=function(c_){function c$(da,db){return!D.Equals(c_.Get(),da.checked)?c_.Set(da.checked):null;}return bc.Concat([bd.DynamicProp("checked",c_.get_View()),bd.Handler("change",function(da){return function(db){return c$(da,db);};})]);};bd.IntValue=function(c_){return bd.CustomVar(c_,function(c$,da){var db;db=da.get_Input();return c$.value!==db?void(c$.value=db):null;},function(c$){var da,db,dc;da=c$.value;return{$:1,$0:cS.isBlank(da)?(c$.checkValidity?c$.checkValidity():true)?new ca({$:2,$0:da}):new ca({$:1,$0:da}):(db=(dc=0,[E.TryParseInt32(da,{get:function(){return dc;},set:function(dd){dc=dd;}}),dc]),db[0]?new ca({$:0,$0:db[1],$1:da}):new ca({$:1,$0:da}))};});};bd.IntValueUnchecked=function(c_){return bd.CustomValue(c_,a.String,function(c$){var da;return cS.isBlank(c$)?{$:1,$0:0}:(da=+c$,da!==da>>0?null:{$:1,$0:da});});};bd.FloatValue=function(c_){return bd.CustomVar(c_,function(c$,da){var db;db=da.get_Input();return c$.value!==db?void(c$.value=db):null;},function(c$){var da,db;da=c$.value;return{$:1,$0:cS.isBlank(da)?(c$.checkValidity?c$.checkValidity():true)?new ca({$:2,$0:da}):new ca({$:1,$0:da}):(db=+da,a.isNaN(db)?new ca({$:1,$0:da}):new ca({$:0,$0:db,$1:da}))};});};bd.FloatValueUnchecked=function(c_){return bd.CustomValue(c_,a.String,function(c$){var da;return cS.isBlank(c$)?{$:1,$0:0}:(da=+c$,a.isNaN(da)?null:{$:1,$0:da});});};bd.DynamicProp=function(c_,c$){return bO.Dynamic(c$,function(da){return function(db){da[c_]=db;};});};bf=be.FSharpSet=c5.Class({Contains:function(c_){return bP.Contains(c_,this.tree);},GetEnumerator$1:function(){return bz.Get(bP.Enumerate(false,this.tree));},Equals:function(c_){return this.get_Count()===c_.get_Count()&&q.forall2(D.Equals,this,c_);},get_Count:function(){var c_;c_=this.tree;return c_==null?0:c_.Count;},GetHashCode:function(){return -1741749453+D.Hash(s.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(c_){return q.compareWith(D.Compare,this,c_);},GetEnumerator0:function(){return this.GetEnumerator$1();}},t,bf);bf.op_Subtraction=function(c_,c$){return bQ.Filter(function(da){return!c$.Contains(da);},c_);};bf.New=c5.Ctor(function(c_){bf.New$1.call(this,bP.OfSeq(c_));},bf);bf.New$1=c5.Ctor(function(c_){t.New.call(this);this.tree=c_;},bf);bh=bg.attr=c5.Class({},t,bh);k.delayed=function(c_,c$){var da;da=[null];return function(db){var dc,dd;dc=da[0];dc==null?void 0:dc.$0.Cancel$1();da[0]={$:1,$0:new b_.New()};cl.Start((dd=null,cl.Delay(function(){return cl.Bind(cl.Sleep(c_),function(){c$(db);return cl.Zero();});})),{$:1,$0:da[0].$0});};};k["String.Left"]=function(c_,c$){return c$<0?k["String.Substring2"](c_,0,c_.length+c$):k["String.Substring2"](c_,0,c$);};k["String.Substring2"]=function(c_,c$,da){var db,dc;while(true){if(da<=0)return"";else if(c$>=c_.length)return"";else if(c$<0){db=c$;c$=0;da=da+db;}else return A.Substring(c_,c$,(dc=c_.length-c$,D.Compare(da,dc)===-1?da:dc));}};k.Error=function(c_){return{$:1,$0:c_};};bi.New=function(c_,c$){return{docName:c_,docDoc:c$};};bj.traverseSeq=function(c_,c$){return bj.map(a.id,s.foldBack(function(da,db){return bj.op_GreaterGreaterEquals(c_(da),function(dc){return bj.op_GreaterGreaterEquals(db,function(dd){return bj.rtn(new r({$:1,$0:dc,$1:dd}));});});},s.ofSeq(c$),bj.rtn(r.Empty)));};bj.rtn=function(c_){return T.Const(c_);};bj.map=function(c_,c$){return T.Map(c_,c$);};bj.op_GreaterGreaterEquals=function(c_,c$){return bj.bind(c$,c_);};bj.bind=function(c_,c$){return T.Bind(c_,c$);};bl.GetFields=function(c_){var c$,da;c$=[];for(var db in c_)c$.push([db,c_[db]]);return c$;};bl.GetFieldValues=function(c_){var c$,da;c$=[];for(var db in c_)c$.push(c_[db]);return c$;};bm=O.PlgElemName=c5.Class({get_Id:function(){return this.$0;}},null,bm);bo.get_Position=function(){!bn.MousePosSt$1().Active?(self.document.addEventListener("mousemove",function(c_){Q.Set(bn.MousePosSt$1().PosV,[c_.clientX,c_.clientY]);},false),bn.MousePosSt$1().Active=true):void 0;return bn.MousePosSt$1().PosV.get_View();};bo.get_LeftPressed=function(){bn.ActivateButtonListener();return bn.MouseBtnSt$1().Left.get_View();};bo.get_RightPressed=function(){bn.ActivateButtonListener();return bn.MouseBtnSt$1().Right.get_View();};bo.get_MiddlePressed=function(){bn.ActivateButtonListener();return bn.MouseBtnSt$1().Middle.get_View();};bp.get_KeysPressed=function(){bn.ActivateKeyListener();return bn.KeyListenerState().KeysPressed.get_View();};bq.init=function(c_,c$){var da;da=new bX.New();bq.set_layoutHorizontal(c_);bq.set_layoutVertical(c$);I.defineWebComponent("wcomp-splitter",bX.Constructor,self.FsRootDll.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};bq.set_layoutHorizontal=function(c_){p.$cctor();p.layoutHorizontal=c_;};bq.set_layoutVertical=function(c_){p.$cctor();p.layoutVertical=c_;};bq.layoutVertical=function(){p.$cctor();return p.layoutVertical;};bq.layoutHorizontal=function(){p.$cctor();return p.layoutHorizontal;};J.init=function(){p.$cctor();return p.init;};J.tabStrip=function(c_,c$,da,db,dc){var dd;dd=M.Element("div",[bc.Create("class",(((c5.Curried3(function(de,df,dg){return de("tab-strip "+_6.toSafe(df)+" "+_6.toSafe(dg));}))(a.id))(c$?"top":"bottom"))(da?"horizontal":"vertical"))],n.ofSeq(q.delay(function(){return q.collect(function(de){var df;df=de[0];return[b9.New$1().Content(M.Element("div",[bd.Dynamic("class",T.Map(function(dg){return"tab"+(dg===df+1?" selected":"");},c_.get_View())),bc.Create("draggable","true"),bc.HandlerImpl("click",function(){return function(){return c_.Set(df+1);};})],[M.TextNode(de[1][0])]))];},q.indexed(db));})));return M.Element("div",[bc.Create("class","tab-panel")],n.ofSeq(q.delay(function(){return q.append(c$?[dd]:[],q.delay(function(){return q.append([M.Element("div",[bc.Create("class","tab-content")],[dc])],q.delay(function(){return q.append(!c$?[dd]:[],q.delay(function(){return q.append([M.Element("style",r.Empty,n.ofArray([M.TextNode(J.css())]))],q.delay(function(){return[M.Element("style",r.Empty,n.ofArray([M.TextView(T.Map(function(de){return function(df){return de("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(df)+")) { display: grid }\r\n                                           ");};}(a.id),c_.get_View()))]))];}));}));}));}));})));};J.css=function(){p.$cctor();return p.css;};o.html=function(){p.$cctor();return p.html;};br.getDocFor=function(c_,c$,da,db,dc){return br.getDocForW(T.Const(c_),c_.key,c$,da,db,dc);};br.getDocForW=function(c_,c$,da,db,dc,dd){var de,df,dg,dh,di,dj;function dk(dl,dm){df.Set(null);return T.Get(function(dn){dn.RemoveByKey(dl);},c_);}de=Q.Create$1(null);df=new bH.New((dg=T.get_Do(),T.Bind(function(dl){return T.Bind(function(dm){var dn;return dm!=null&&dm.$==1?(dn=dm.$0,T.Bind(function(_do){return!_do?T.Const(null):T.Const({$:1,$0:dn});},dl.ContainsKeyAsView(dn))):T.Const(null);},de.get_View());},c_)),function(dl){T.Get(function(dm){var dn,_do;dn=dl!=null&&dl.$==1&&(dm.ContainsKey(dl.$0)&&(_do=dl.$0,true))?{$:1,$0:_do}:null;!D.Equals(de.Get(),dn)?de.Set(dn):void 0;},c_);});dh=bt.New(c_,M.get_Empty,df,function(){var dl;dl=db();T.Get(function(dm){dm.Append(dl);df.Set({$:1,$0:c$(dl)});},c_);return dl;},function(){var dl;dl=df.Get();dl==null?void 0:dk(dl.$0,null);},da);di=dd(dh);dj=T.Bind(function(dl){return b0.MapLens(dc,function(dm,dn){return(di(T.Const({$:1,$0:dm})))(dn);},dl);},c_);return bt.New(dh.elemsW,function(){return M.Convert(a.id,dj);},dh.selV,dh.add,dh.delCur,dh.def);};bs.defPlg=function(){p.$cctor();return p.defPlg;};bs.failCreate=function(c_,c$){return(function(da){return function(db){return da("Create "+_6.toSafe(db)+" not implemented");};}(h.FailWith))(c_);};bs.showPlugIn=function(c_,c$,da){var db,dc,dd,de;return(db=(dc=Y.Make().WithHole({$:2,$0:"name",$1:T.Map(function(df){return df.plgName.get_Id();},da.get_View())}),dc.WithHole(Z.EventQ2(dc.k,"select",function(){return dc.i;},function(){var df;T.Get((df=c_.selV,function(dg){df.Set(dg);}),c$);}))).WithHole({$:2,$0:"selected",$1:T.Map2(function(df,dg){return D.Equals(df,dg)?"selected":"";},c_.selV.get_View(),c$)}),(dd=Z.CompleteHoles(db.k,db.h,[]),(de=new X.New(dd[1],_0.tile(dd[0])),(db.i=de,de)))).get_Doc();};bs.pluginsList=function(){p.$cctor();return p.pluginsList;};bs.defVar=function(){p.$cctor();return p.defVar;};bs.showVar=function(c_,c$,da){var db,dc,dd,de,df,dg;db=(dc=T.get_Do(),T.Bind(function(dh){return T.Bind(function(di){return T.Const(dh.varName.get_Id()+" = "+di);},dh.varVar.get_View());},da.get_View()));return(dd=(de=Y.Make().WithHole({$:2,$0:"name",$1:db}),de.WithHole(Z.EventQ2(de.k,"select",function(){return de.i;},function(){var dh;T.Get((dh=c_.selV,function(di){dh.Set(di);}),c$);}))).WithHole({$:2,$0:"selected",$1:T.Map2(function(dh,di){return D.Equals(dh,di)?"selected":"";},c_.selV.get_View(),c$)}),(df=Z.CompleteHoles(dd.k,dd.h,[]),(dg=new X.New(df[1],_0.tile(df[0])),(dd.i=dg,dg)))).get_Doc();};bs.defViw=function(){p.$cctor();return p.defViw;};bs.showView=function(c_,c$,da){var db,dc,dd,de,df,dg;db=(dc=T.get_Do(),T.Bind(function(dh){return T.Bind(function(di){return T.Const(dh.viwName.get_Id()+" = "+di);},dh.viwView);},da.get_View()));return(dd=(de=Y.Make().WithHole({$:2,$0:"name",$1:db}),de.WithHole(Z.EventQ2(de.k,"select",function(){return de.i;},function(){var dh;T.Get((dh=c_.selV,function(di){dh.Set(di);}),c$);}))).WithHole({$:2,$0:"selected",$1:T.Map2(function(dh,di){return D.Equals(dh,di)?"selected":"";},c_.selV.get_View(),c$)}),(df=Z.CompleteHoles(dd.k,dd.h,[]),(dg=new X.New(df[1],_0.tile(df[0])),(dd.i=dg,dg)))).get_Doc();};bs.defAct=function(){p.$cctor();return p.defAct;};bs.showAct=function(c_,c$,da){var db,dc,dd,de;function df(dg){var dh,di,dj;dh=dg.actFunction;return dh.$==1?(di=A.concat(", ",n.ofArray([dh.$1])),(function(dk){return function(dl){return dk("("+_6.toSafe(dl)+")");};}(a.id))(di)):dh.$==2?(dj=A.concat(", ",n.ofArray([dh.$1,dh.$2])),(function(dk){return function(dl){return dk("("+_6.toSafe(dl)+")");};}(a.id))(dj)):"";}return(db=(dc=Y.Make().WithHole({$:2,$0:"name",$1:T.Map2(function(dg,dh){return dg.actName.get_Id()+df(dh);},da.get_View(),da.get_View())}),dc.WithHole(Z.EventQ2(dc.k,"select",function(){return dc.i;},function(){var dg;T.Get((dg=c_.selV,function(dh){dg.Set(dh);}),c$);}))).WithHole({$:2,$0:"selected",$1:T.Map2(function(dg,dh){return D.Equals(dg,dh)?"selected":"";},c_.selV.get_View(),c$)}),(dd=Z.CompleteHoles(db.k,db.h,[]),(de=new X.New(dd[1],_0.tile(dd[0])),(db.i=de,de)))).get_Doc();};bs.defDoc=function(){p.$cctor();return p.defDoc;};bs.showDoc=function(c_,c$,da){var db,dc,dd,de;return(db=(dc=Y.Make().WithHole({$:2,$0:"name",$1:T.Map2(function(df,dg){return df.docName.get_Id()+O.docParms(dg);},da.get_View(),da.get_View())}),dc.WithHole(Z.EventQ2(dc.k,"select",function(){return dc.i;},function(){var df;T.Get((df=c_.selV,function(dg){df.Set(dg);}),c$);}))).WithHole({$:2,$0:"selected",$1:T.Map2(function(df,dg){return D.Equals(df,dg)?"selected":"";},c_.selV.get_View(),c$)}),(dd=Z.CompleteHoles(db.k,db.h,[]),(de=new X.New(dd[1],_0.tile(dd[0])),(db.i=de,de)))).get_Doc();};bs.plgVarsList=function(){p.$cctor();return p.plgVarsList;};bs.plgViewsList=function(){p.$cctor();return p.plgViewsList;};bs.plgActsList=function(){p.$cctor();return p.plgActsList;};bs.plgDocsList=function(){p.$cctor();return p.plgDocsList;};bt=O.ListModelData=c5.Class({get_CurrentW:function(){var c_,c$;c_=this;c$=T.get_Do();return T.Bind(function(da){return T.Bind(function(db){return db==null?T.Const(c_.def):T.Bind(function(dc){return dc==null?T.Const(c_.def):T.Const(dc.$0);},da.TryFindByKeyAsView(db.$0));},c_.selV.get_View());},this.elemsW);},PlugIn:function(c_,c$){var da,db;function dc(dd){}da=O.plugin();return da.AddAct(da.AddAct(da.AddVar(da.AddDoc0(da.Yield(),"list",this.doc),"sel",O.lensStrO(O.mapVarO(c_,c$,this.selV))),"add",(db=this.add,function(dd){return dc(db(dd));})),"del",this.delCur);}},null,bt);bt.New=function(c_,c$,da,db,dc,dd){return new bt({elemsW:c_,doc:c$,selV:da,add:db,delCur:dc,def:dd});};bu.New=function(c_,c$){return{varName:c_,varVar:c$};};bv.New=function(c_,c$){return{viwName:c_,viwView:c$};};bw.splitChar=function(c_){function c$(db){return z.splitByChar(c_,db);}function da(db){return q.map(z.trim,db);}return function(db){return da(c$(db));};};bw.emptyLine=function(c_){var c$;c$=A.Trim(c_);return c$===""||A.StartsWith(c$,"//");};bw.variableSplitter=function(c_,c$,da,db,dc,dd){return M.Element("wcomp-splitter",n.ofSeq(q.delay(function(){return q.append(c_?[bc.Create("vertical","")]:[],q.delay(function(){return q.append([bc.Create("min",a.String(c$))],q.delay(function(){return q.append([bc.Create("value",a.String(da))],q.delay(function(){return[bc.Create("max",a.String(db))];}));}));}));})),n.ofArray([dc,dd]));};bw.fixedSplitter=function(c_,c$,da,db,dc){var dd,de,df,dg,dh,di,dj;dd=(((da?c5.Curried3(function(dk,dl,dm){return dk(dl.toFixed(6)+"px calc(100% - "+dm.toFixed(6)+"px)");}):c5.Curried3(function(dk,dl,dm){return dk("calc(100% - "+dl.toFixed(6)+"px) "+dm.toFixed(6)+"px");}))(a.id))(c$))(c$);return c_?(de=Y.Make().WithHole({$:1,$0:"partsizes",$1:dd}).WithHole({$:0,$0:"first",$1:db}).WithHole({$:0,$0:"second",$1:dc}),(df=Z.CompleteHoles(de.k,de.h,[]),(dg=new X.New(df[1],_0.fixedsplitterver(df[0])),(de.i=dg,dg)))).get_Doc():(dh=Y.Make().WithHole({$:1,$0:"partsizes",$1:dd}).WithHole({$:0,$0:"first",$1:db}).WithHole({$:0,$0:"second",$1:dc}),(di=Z.CompleteHoles(dh.k,dh.h,[]),(dj=new X.New(di[1],_0.fixedsplitterhor(di[0])),(dh.i=dj,dj)))).get_Doc();};bw.newLyt=function(c_,c$){return cs.New(c_,Q.Create$1(c$));};bw.parseEntries=function(c_,c$){var da,db;da=new bG.New$5();db=(((c5.Curried3(function(dc,dd,de){return dc("PlugInName View \""+_6.toSafe(dd)+"\"\n"+_6.toSafe(de));}))(a.id))(c_.get_Id()))(c$);return bw.processText(b5.createEntryO2(c_,da),db);};bw.refreshEntries=function(c_,c$){var da,db,dc,dd;da=(db=O.tryGetPlugIn(c_),db==null?(dc=(dd=O.defaultPlugIn(),P.New(c_,dd.plgVars,dd.plgViews,dd.plgDocs,dd.plgActions,dd.plgQueries)),(O.addPlugIn(dc),dc)):db.$0);b0.refreshLM(da.plgVars,s.ofSeq(q.delay(function(){return bw.getVarEntries(c$);})));b0.refreshLM(da.plgViews,s.ofSeq(q.delay(function(){return bw.getViewEntries(c$);})));b0.refreshLM(da.plgActions,s.ofSeq(q.delay(function(){return bw.getActionEntries(c$);})));b0.refreshLM(da.plgQueries,s.ofSeq(q.delay(function(){return bw.getQueryEntries(c$);})));b0.refreshLM(da.plgDocs,s.ofSeq(q.delay(function(){return bw.getDocEntries(c$);})));};bw.processText=function(c_,c$){return bw.processLines(c_,A.SplitChars(c$,["\n","\r"],1));};bw.getVarEntries=function(c_){function c$(da){return da[1];}return q.map(function(da){return q.last(c$(da));},q.groupBy(function(da){return da.varName;},q.choose(function(da){return da.$==0?{$:1,$0:da.$0}:null;},c_)));};bw.getViewEntries=function(c_){function c$(da){return da[1];}return q.map(function(da){return q.last(c$(da));},q.groupBy(function(da){return da.viwName;},q.choose(function(da){return da.$==1?{$:1,$0:da.$0}:null;},c_)));};bw.getActionEntries=function(c_){function c$(da){return da[1];}return q.map(function(da){return q.last(c$(da));},q.groupBy(function(da){return da.actName;},q.choose(function(da){return da.$==3?{$:1,$0:da.$0}:null;},c_)));};bw.getQueryEntries=function(c_){function c$(da){return da[1];}return q.map(function(da){return q.last(c$(da));},q.groupBy(function(da){return da.qryName;},q.choose(function(da){return da.$==4?{$:1,$0:da.$0}:null;},c_)));};bw.getDocEntries=function(c_){function c$(da){return da[1];}return q.map(function(da){return q.last(c$(da));},q.groupBy(function(da){return da.docName;},q.choose(function(da){return da.$==2?{$:1,$0:da.$0}:null;},c_)));};bw.processLines=function(c_,c$){function da(db){var dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn;dc=q.tryHead(db);return dc!=null&&dc.$==1?(dd=dc.$0,(de=bw.splitTokens(dd),de.$==1&&(dg=bw.Identifier(de.$0),dg!=null&&dg.$==1&&(de.$1.$==1&&(bw.Vertical(de.$1.$0).$==2&&(de.$1.$1.$==0&&(df=dg.$0,true)))))?(dh=bw.getExtraLines(function(_do){return A.StartsWith(A.Trim(_do),"|");},db),da((cT.createLayoutDefinitions(df,cT.extractNodes(dh[0])))[1].concat(dh[1]))):de.$==0?da(B.array(db,{$:1,$0:1},null)):(di=bw.getExtraLines(function(_do){return A.StartsWith(A.Trim(_do),":");},db),(dj=di[1],(dk=di[0],s.length(dk)>0?(dl=bw.createLines(q.nth(0,A.SplitChars(dd,[" "],1)),1,[],[],1,dk),(dm=dl[0],(dn=dl[1],da(s.ofSeq(q.delay(function(){return q.append(dn,q.delay(function(){return q.append([dd+" "+A.concat(" ",dm)],q.delay(function(){return dj;}));}));})))))):s.ofSeq(q.delay(function(){var _do;return q.append((_do=c_(dd),_do!=null&&_do.$==1?[_do.$0]:[]),q.delay(function(){return da(dj);}));}))))))):[];}return da(c$);};bw.splitTokens=function(c_){return bw.doubleQuote(n.ofSeq(q.collect(a.id,q.mapi(function(c$,da){var db;return c$%2===1?[{$:0,$0:da}]:da===""?[{$:0,$0:"\""}]:(db=A.Trim(da),db===""?[]:s.map(function(dc){return{$:1,$0:dc};},A.SplitChars(db,[" "],1)));},z.splitByChar("\"",D.Equals(q.tryHead(c_),{$:1,$0:"\""})?" "+c_:c_)))));};bw.Identifier=function(c_){var c$,da,db;return c_.$==1&&(da=i.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",c_.$0),da!=null&&da.$==1&&((db=da.$0,!D.Equals(db,null)&&db.length===1)&&(c$=s.get(da.$0,0),true)))?{$:1,$0:c$}:null;};bw.Vertical=function(c_){var c$,da,db,dc,dd,de;return c_.$==1&&(c_.$0==="vertical"&&(c$=c_.$0,true))?{$:0,$0:null}:c_.$==1&&(c_.$0==="horizontal"&&(da=c_.$0,true))?{$:1,$0:null}:c_.$==1&&(c_.$0==="layout"&&(db=c_.$0,true))?{$:2,$0:null}:c_.$==1&&(c_.$0==="grid"&&(dc=c_.$0,true))?{$:3,$0:null}:c_.$==1&&(c_.$0==="template"&&(dd=c_.$0,true))?{$:4,$0:null}:(de=bw.Identifier(c_),de!=null&&de.$==1?{$:5,$0:de.$0}:{$:6,$0:null});};bw.getExtraLines=function(c_,c$){var da,db,dc,dd,de;da=(db=(dc=q.tryFindIndex(function(df){return(bw.notEmpty())(df)&&!c_(df);},q.skip(1,c$)),dc==null?null:{$:1,$0:1+dc.$0}),(dd=s.length(c$),db==null?dd:db.$0));return[(de=B.array(c$,{$:1,$0:1},{$:1,$0:da-1}),s.filter(bw.notEmpty(),de)),B.array(c$,{$:1,$0:da},null)];};bw.createLines=function(c_,c$,da,db,dc,dd){var de,df,dg,dh,di,dj,dk,dl,dm,dn;de=A.replicate(c$,":");df=":"+de;dg=q.tryHead(dd);return dg!=null&&dg.$==1?(dh=z.StartsWith(de,A.Trim(dg.$0)),dh!=null&&dh.$==1?(di=dh.$0,(dj=bw.getExtraLines(function(_do){return A.StartsWith(A.Trim(_do),df);},dd),(dk=(((c5.Curried3(function(_do,dp,dq){return _do("_"+_6.toSafe(dp)+"_"+a.String(dq));}))(a.id))(c_))(dc),(dl=bw.createLines(dk,c$+1,[],[],1,dj[0]),(dm=dl[1],(dn=dl[0],bw.createLines(c_,c$,s.ofSeq(q.delay(function(){return q.append(da,q.delay(function(){return[dk];}));})),s.ofSeq(q.delay(function(){return q.append(db,q.delay(function(){return q.append(dm,q.delay(function(){return[dk+" "+di+" "+A.concat(" ",dn)];}));}));})),dc+1,dj[1]))))))):[da,db]):[da,db];};bw.splitSemiColon=function(){p.$cctor();return p.splitSemiColon;};bw.splitInTwo=function(c_){var c$;c$=bw.splitChar(c_);return function(da){return s.ofSeq(c$(da));};};bw.PlugIn=function(c_){var c$,da,db,dc,dd,de;return c_.$==1&&(c_.$0==="PlugIn"&&(c$=c_.$0,true))?{$:0,$0:null}:c_.$==1&&(c_.$0==="Button"&&(da=c_.$0,true))?{$:1,$0:null}:c_.$==1&&(c_.$0==="input"&&(db=c_.$0,true))?{$:2,$0:null}:c_.$==1&&(c_.$0==="textarea"&&(dc=c_.$0,true))?{$:3,$0:null}:c_.$==1&&(c_.$0==="select"&&(dd=c_.$0,true))?{$:4,$0:null}:c_.$==1&&(c_.$0==="Actions"&&(de=c_.$0,true))?{$:5,$0:null}:{$:6,$0:null};};bw.Var=function(c_){var c$,da,db,dc,dd,de;return c_.$==1&&(c_.$0==="Var"&&(c$=c_.$0,true))?{$:0,$0:null}:c_.$==1&&(c_.$0==="Doc"&&(da=c_.$0,true))?{$:1,$0:null}:c_.$==1&&(c_.$0==="View"&&(db=c_.$0,true))?{$:2,$0:null}:c_.$==1&&(c_.$0==="ViewJS"&&(dc=c_.$0,true))?{$:3,$0:null}:c_.$==1&&(c_.$0==="Docs"&&(dd=c_.$0,true))?{$:4,$0:null}:c_.$==1&&(c_.$0==="Action"&&(de=c_.$0,true))?{$:5,$0:null}:{$:6,$0:null};};bw.Measures$1=function(c_){var c$,da,db,dc,dd,de,df,dg,dh;return c_.$==1?(c$=z.splitByChar("-",c_.$0),!D.Equals(c$,null)&&c$.length===1&&(db=(C.Double())(s.get(c$,0)),db!=null&&db.$==1&&(da=db.$0,true))?{$:1,$0:new cY({$:0,$0:da,$1:true})}:!D.Equals(c$,null)&&c$.length===2&&(s.get(c$,0)===""&&(dd=(C.Double())(s.get(c$,1)),dd!=null&&dd.$==1&&(dc=dd.$0,true)))?{$:1,$0:new cY({$:0,$0:dc,$1:false})}:!D.Equals(c$,null)&&c$.length===3&&(df=(C.Double())(s.get(c$,0)),df!=null&&df.$==1&&(dg=(C.Double())(s.get(c$,1)),dg!=null&&dg.$==1&&(dh=(C.Double())(s.get(c$,2)),dh!=null&&dh.$==1&&(de=[dh.$0,df.$0,dg.$0],true))))?{$:1,$0:new cY({$:1,$0:de[1],$1:de[2],$2:de[0]})}:null):null;};bw.doubleQuote=function(c_){var c$,da,db;switch(c_.$==1?c_.$0.$==1?A.StartsWith(c_.$0.$0,"//")?(c$=c_.$0.$0,1):2:2:0){case 0:return r.Empty;case 1:return r.Empty;case 2:switch(c_.$==1?c_.$0.$==0?c_.$1.$==1?c_.$1.$0.$==0?c_.$1.$0.$0==="\""?c_.$1.$1.$==0?(db=c_.$0.$0,1):c_.$1.$1.$0.$==0?(db=[c_.$1.$1.$1,c_.$0.$0,c_.$1.$1.$0.$0],0):(db=[c_.$0,c_.$1],2):(db=[c_.$0,c_.$1],2):(db=[c_.$0,c_.$1],2):(db=[c_.$0,c_.$1],2):(db=[c_.$0,c_.$1],2):3){case 0:da=bw.doubleQuote(new r({$:1,$0:{$:0,$0:db[1]+"\""+db[2]},$1:db[0]}));break;case 1:da=n.ofArray([{$:0,$0:db}]);break;case 2:da=new r({$:1,$0:db[0],$1:bw.doubleQuote(db[1])});break;case 3:throw new c1.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\src\\LayoutEngine.fs",2907,38);}return da;}};bw.notEmpty=function(){p.$cctor();return p.notEmpty;};bx.aV=function(){p.$cctor();return p.aV;};bx.currentPlugInNameDef=function(){p.$cctor();return p.currentPlugInNameDef$1;};bx.name=function(){p.$cctor();return p.name;};bx.checkName=function(c_){return c_===B.string("World",{$:1,$0:0},{$:1,$0:c_.length-1})||c_.length<=1?"<---- Please enter your name":"";};bx.enterName=function(){p.$cctor();return p.enterName;};bx.concat=function(c_,c$){return(((c5.Curried3(function(da,db,dc){return da("Concat("+a.String(db)+", "+dc.toFixed(6)+")");}))(a.id))(c_))(c$);};bx.main0=function(){p.$cctor();return p.main0;};bx.sayHello=function(){p.$cctor();return p.sayHello;};bx.main1=function(){p.$cctor();return p.main1;};bx.main=function(){p.$cctor();return p.main;};bx.appFwk=function(){p.$cctor();return p.appFwk;};bx.main2=function(){p.$cctor();return p.main2;};bx.textValToTextType=function(c_){var c$;return(c_.$==3?(c$=c_.$0.$0,false):c_.$==4?(c$=c_.$0.$0,false):c_.$==1?(c$=c_.$0.$0,false):c_.$==2?(c$=c_.$0.$0,false):true)?{$:0,$0:c_.$0}:bx.itemRefToTextType(c$);};bx.itemRefToTextType=function(c_){return c_.$==1?{$:1,$0:(((c5.Curried3(function(c$,da,db){return c$(_6.toSafe(da)+"."+_6.toSafe(db));}))(a.id))(c_.$0))(c_.$1)}:{$:1,$0:c_.$0};};bx.currentPlugInNameD=function(){p.$cctor();return p.currentPlugInNameD$1;};bx.itemRefToString=function(c_){return c_.$==1?(((c5.Curried3(function(c$,da,db){return c$(_6.toSafe(da)+"."+_6.toSafe(db));}))(a.id))(c_.$0))(c_.$1):c_.$0;};bx.itemRefToAbsolute=function(c_){function c$(db){return db.$==1?[db.$0,db.$1]:[c_,db.$0];}function da(db,dc){return(((c5.Curried3(function(dd,de,df){return dd(_6.toSafe(de)+"."+_6.toSafe(df));}))(a.id))(db))(dc);}return function(db){return da.apply(null,c$(db));};};bx.defVar=function(c_,c$,da){return Q.Create$1(da);};bx.defDocF=function(c_,c$,da,db){var dc,dd;dc=da.$0;return O.run(c_,(dd=m.depend(),dd.Delay(function(){return dd.Bind(bx.currentPlugInNameD(),function(de){return dd.Bind(bx.getParam2D(),function(df){var dg,dh,di,dj;function dk(dl,dm){var dn,_do;return dl.$==0?dm.$==0?dl:{$:0,$0:dl.$0}:dl.$==2?dm.$==1?(dn=dm.$0,(_do=dl.$0,{$:1,$0:function(){return _do(df(dn));}})):dl:dl.$==3?dm.$==1?dk({$:2,$0:dl.$0(df(dm.$0)),$1:dl.$2},dm.$1):dl:dl.$==4?dm.$==1?dk({$:3,$0:dl.$0(df(dm.$0)),$1:dl.$2,$2:dl.$3},dm.$1):dl:dl.$==5?dm.$==1?dk({$:4,$0:dl.$0(df(dm.$0)),$1:dl.$2,$2:dl.$3,$3:dl.$4},dm.$1):dl:dl.$==6?dm.$==1?dk({$:5,$0:dl.$0(df(dm.$0)),$1:dl.$2,$2:dl.$3,$3:dl.$4,$4:dl.$5},dm.$1):dl:{$:0,$0:dl.$0()};}dg=(dh=bx.itemRefToString(dc),(O.splitName(de))(dh));di=dg[0];dj=dg[1];return dd.Return(H.Create(function(){var dl,dm;dl=(dm=O.tryGetDoc(di,dj),dm==null?null:{$:1,$0:dk(dm.$0.docDoc.f(),db)});return dl==null?{$:0,$0:O.errDoc((function(dn){return function(_do){return dn("Missing doc: "+_2.p$1(_do));};}(a.id))(dc))}:dl.$0;}));});});})));};bx.defAction=function(c_,c$,da,db){var dc,dd;dc=da.$0;return O.run(c_,(dd=m.depend(),dd.Delay(function(){return dd.Bind(bx.currentPlugInNameD(),function(de){return dd.Bind(bx.getParamTextD(),function(df){var dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du;dk=bx.itemRefToString(dc);dl=(dh=(O.splitName(de))(dk),O.tryGetAct(dh[0],dh[1]));if(dl==null)dg=null;else{dm=dl.$0;if(db.$===0)di=dm.actFunction;else{dn=dm.actFunction;switch(dn.$==1?db.$==1?db.$1.$==0?(dj=[dn.$0,db.$0],0):3:3:dn.$==2?db.$==1?db.$1.$==0?(dj=[dn.$0,dn.$2,db.$0],2):db.$1.$1.$==0?(dj=[dn.$0,db.$0,db.$1.$0],1):3:3:3){case 0:di=(_do=dj[0],(dp=dj[1],{$:0,$0:function(){(df(dp))(_do);}}));break;case 1:di=(dq=dj[0],(dr=dj[1],(ds=dj[2],{$:0,$0:function(){(df(dr))(function(dv){(df(ds))(dq(dv));});}})));break;case 2:di=(dt=dj[0],(du=dj[2],{$:1,$0:function(dv){(df(du))(function(dw){(dt(dw))(dv);});},$1:dj[1]}));break;case 3:di={$:0,$0:function(){((((c5.Curried(function(dv,dw,dx,dy){return dv("Parameters do not coincide for Action "+_6.toSafe(dw)+" "+_6.printList(function(dz){return _2.p$16(dz);},dx)+" "+_1.p$2(dy));},4))(function(dv){c6.log(dv);}))(dk))(db))(dm);}};break;}}dg={$:1,$0:di};}return dd.Return(dg==null?{$:0,$0:function(){((function(dv){return function(dw){return dv("Action Not Found "+_6.toSafe(dw));};}(function(dv){c6.log(dv);}))(dk));}}:dg.$0);});});})));};bx.defActions=function(c_,c$,da){var db;return O.run(c_,(db=m.depend(),db.Delay(function(){return db.Bind(bx.currentPlugInNameD(),function(dc){return db.Bind(bx.getParamTextD(),function(){return db.Return({$:0,$0:function(){q.iter(function(dd){var de,df,dg,dh;de=bx.itemRefToString(dd.$0);O.callFunction(null,null,(df=(dg=(dh=(O.splitName(dc))(de),O.tryGetAct(dh[0],dh[1])),dg==null?null:{$:1,$0:dg.$0.actFunction}),df==null?{$:0,$0:function(){((function(di){return function(dj){return di("Action Not Found "+_6.toSafe(dj));};}(function(di){c6.log(di);}))(de));}}:df.$0));},da);}});});});})));};bx.defButton=function(c_,c$,da,db,dc){return O.makeAViewDoc0(function(){return O.errDocf(function(dd){return dd("Button deprecated use button \"click=@{Action}\"");});});};bx.defInput=function(c_,c$,da,db){return O.makeAViewDoc0(function(){return O.errDocf(function(dc){return dc("input deprecated use AF.Input");});});};bx.defTextArea=function(c_,c$,da,db){return O.makeAViewDoc0(function(){return O.errDocf(function(dc){return dc("TextArea deprecated use AF.TextArea");});});};bx.defElement=function(c_,c$,da,db,dc){var dd;return O.run(c_,(dd=m.depend(),dd.Delay(function(){return dd.Bind(bx.nodeRefToDocD(),function(de){return dd.Bind(O.extractAtsD(),function(df){return dd.Bind(bx.getParam2D(),function(dg){return dd.Return(O.makeAViewDoc0(function(){try{return M.Element(da,df(dg(db)),q.map(de,dc));}catch(dh){return M.TextNode(dh.message);}}));});});});})));};bx.defConcat=function(c_,c$,da){var db;return O.run(c_,(db=m.depend(),db.Delay(function(){return db.Bind(bx.nodeRefToDocD(),function(dc){return db.Return(O.makeAViewDoc0(function(){return M.Concat(q.map(dc,da));}));});})));};bx.defView=function(c_,c$,da){var db;return O.run(c_,(db=m.depend(),db.Delay(function(){return db.Bind(bx.currentPlugInNameD(),function(){return db.Bind(bx.getParam2D(),function(dc){return db.Bind(O.extractTextD(),function(dd){return db.Return(T.Bind(function(){function de(df){return A.concat("",df);}return T.Map(function(df){return de(s.ofSeq(df));},bj.traverseSeq(function(df){return dd(dc(df));},da));},O.baseView()));});});});})));};bx.defViewJS=function(c_,c$,da){var db;return O.run(c_,(db=m.depend(),db.Delay(function(){return db.Bind(bx.currentPlugInNameD(),function(){return db.Bind(bx.getParamD(),function(dc){return db.Return(T.Bind(function(){try{return T.Map(function(dd){try{return!D.Equals(dd,null)&&dd.length===0?"No JS function specified":!D.Equals(dd,null)&&dd.length===1?a.String(a["eval"](s.get(dd,0))):a.String(a["eval"](s.get(dd,0)).apply(null,B.array(dd,{$:1,$0:1},null)));}catch(de){return de.message;}},T.Map(s.ofSeq,bj.traverseSeq(dc,da)));}catch(dd){return T.Const(dd.message);}},O.baseView()));});});})));};bx.defSplitter=function(c_,c$,da,db,dc,dd){var de,df,dg;de=dc.$0;df=dd.$0;return O.run(c_,(dg=m.depend(),dg.Delay(function(){return dg.Bind(_5.getDocFromTextTypesD(),function(dh){return dg.Return(function(){function di(dj){return O.makeAViewDoc(function(){return dh(n.ofArray([bx.itemRefToTextType(dj)]));});}return db.$==1?bw.variableSplitter(da,db.$0,db.$1,db.$2,di(de),di(df)):bw.fixedSplitter(da,db.$0,db.$1,di(de),di(df));});});})));};bx.defTemplate=function(c_,c$,da){var db;return O.run(c_,(db=m.depend(),db.Delay(function(){return db.Bind(bx.nodeRefToDocD(),function(dc){return db.Bind(bx.varRefToVarD(),function(dd){return db.Bind(O.extractTextD(),function(de){return db.Bind(O.extractAtsD(),function(df){return db.Bind(bx.actRefToActD(),function(dg){return db.Bind(bx.getParam2D(),function(dh){return db.Return(O.makeAViewDoc0(function(){var dj,dk,dl;function di(dm,dn,_do){return O.callFunction(dn,_do,dm.actFunction);}try{dj=df(dh(da.attrs));bZ.LoadLocalTemplates("local");dk=(q.isEmpty(dj)?a.id:(dl=[{$:3,$0:"attrs",$1:bc.Concat(dj)}],function(dm){return q.append(dl,dm);}))(q.delay(function(){function dm(dn,_do){return{$:8,$0:dn.toLowerCase(),$1:dd(_do)};}return q.append(q.map(function(dn){return dm(dn[0],dn[1]);},da.vars),q.delay(function(){function dn(_do,dp){return{$:2,$0:_do.toLowerCase(),$1:de(dh(dp))};}return q.append(q.map(function(_do){return dn(_do[0],_do[1]);},da.views),q.delay(function(){function _do(dp,dq){return{$:0,$0:dp.toLowerCase(),$1:dc({$:1,$0:dq})};}return q.append(q.map(function(dp){return _do(dp[0],dp[1]);},da.docs),q.delay(function(){function dp(dq,dr){var ds;return{$:4,$0:dq.toLowerCase(),$1:(ds=dg(dr),(c5.Curried3(di))(ds))};}return q.map(function(dq){return dp(dq[0],dq[1]);},da.actions);}));}));}));}));return bZ.NamedTemplate("local",{$:1,$0:da.tmpName.toLowerCase()},dk);}catch(dm){return M.TextNode(dm.message);}}));});});});});});});})));};bx.addNewLayoutAct=function(c_,c$){var da;bx.addLayout(!D.Equals(c_,null)?c_:"Lyt_"+A.Replace(a.String(G.NewGuid()),"-",""),(da=!D.Equals(c$,null)&&!D.Equals(c_,null)?c$:"\r\n                                        height Var \"50\"\r\n                                        width  Var \"50\"\r\n            \r\n                                        Ask1 div \"background:lightblue; height:100%\"\r\n                                        : Doc AF.InputLabel \"placeholder=Type you answer here...\" \"Answer1:\" height\r\n                                        Ask2 div \"background:pink;height:100%\" \"Hello\"\r\n                                        : Doc AF.InputLabel \"placeholder=Type you answer here...\" \"Answer2:\" width\r\n            \r\n                                        dragSplitter Action AF.DragSplitter \"@{PlugInName}.height\"\r\n            \r\n                                        main div \"\"\r\n                                        : template SplitterH1 \"gap:\"\"5px\"\" \" \"doc1: Ask1 ; doc2:Ask2\" \"height:height; width:width\" \"MouseDown:dragSplitter\" \"\"\r\n            \r\n                                        split horizontal 0-50-100 AppFramework.AppFwkClient main\r\n                                    ",(z.unindentStr())(da)));};bx.getParam2D=function(){p.$cctor();return p.getParam2D;};bx.getParamTextD=function(){p.$cctor();return p.getParamTextD;};bx.nodeRefToDocD=function(){p.$cctor();return p.nodeRefToDocD;};bx.getParamD=function(){p.$cctor();return p.getParamD;};bx.varRefToVarD=function(){p.$cctor();return p.varRefToVarD;};bx.actRefToActD=function(){p.$cctor();return p.actRefToActD;};bx.addLayout=function(c_,c$){bx.addNewLayout(bw.newLyt(new R({$:0,$0:c_}),c$));};bx.addNewLayout=function(c_){var c$,da,db,dc,dd,de,df,dg,dh,di;function dj(dn){return dn.$==1?{$:1,$0:dn.$0}:null;}function dk(dn){return A.concat("\n",dn);}function dl(dn){return dn.$==0?{$:1,$0:dn.$0}:null;}function dm(dn){return q.append(dg,dn);}c$=T.Map((da=c_.lytName,function(dn){return bw.parseEntries(da,dn);}),c_.lytDefinition.get_View());db=T.Map((dc=function(dn){return q.choose(dj,dn);},function(dn){return dk(dc(dn));}),c$);dd=T.Map((de=function(dn){return q.choose(dl,dn);},(df=bx.generateEntries(c_.lytName),function(dn){return df(de(dn));})),c$);dg=n.ofArray([{$:0,$0:O.newVar(new bm({$:0,$0:"Layout"}),c_.lytDefinition)},{$:1,$0:O.newViw(new bm({$:0,$0:"ParseMsgs"}),db)}]);T.Sink((dh=(di=c_.lytName,function(dn){bw.refreshEntries(di,dn);}),function(dn){return dh(dm(dn));}),dd);};bx.generateEntries=function(c_){function c$(da,db){var dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do;return db.$==0?db.$0.$==1?{$:1,$0:{$:2,$0:(dc=(bx.defButtonM())([c_,da,db.$0.$0.$0,db.$0.$0.$1,db.$0.$0.$2]),O.newDoc0(new bm({$:0,$0:da}),dc))}}:db.$0.$==2?{$:1,$0:{$:2,$0:(dd=(bx.defInputM())([c_,da,db.$0.$0.$0,db.$0.$0.$1]),O.newDoc0(new bm({$:0,$0:da}),dd))}}:db.$0.$==3?{$:1,$0:{$:2,$0:(de=(bx.defTextAreaM())([c_,da,db.$0.$0.$0,db.$0.$0.$1]),O.newDoc0(new bm({$:0,$0:da}),de))}}:db.$0.$==5?{$:1,$0:{$:2,$0:(df=(bx.defConcatM())([c_,da,db.$0.$0.$0]),O.newDoc0(new bm({$:0,$0:da}),df))}}:db.$0.$==6?{$:1,$0:{$:2,$0:(dg=(bx.defElementM())([c_,da,db.$0.$0.$0,db.$0.$0.$1,db.$0.$0.$2]),O.newDoc0(new bm({$:0,$0:da}),dg))}}:db.$0.$==4?{$:1,$0:{$:2,$0:(dh=(bx.defDocFM())([c_,da,db.$0.$0.$0,db.$0.$0.$1]),O.newDocL(new bm({$:0,$0:da}),dh))}}:db.$0.$==7?{$:1,$0:{$:2,$0:(di=(bx.defTemplateM())([c_,da,db.$0.$0]),O.newDoc0(new bm({$:0,$0:da}),di))}}:{$:1,$0:{$:2,$0:(dj=(bx.defSplitterM())([c_,da,db.$0.$0.$0,db.$0.$0.$1,db.$0.$0.$2,db.$0.$0.$3]),O.newDoc0(new bm({$:0,$0:da}),dj))}}:db.$==1?{$:1,$0:{$:3,$0:(dk=(bx.defActionM())([c_,da,db.$0.$0,db.$0.$1]),O.newActF(new bm({$:0,$0:da}),dk))}}:db.$==2?{$:1,$0:{$:3,$0:(dl=(bx.defActionsM())([c_,da,db.$0.$0]),O.newActF(new bm({$:0,$0:da}),dl))}}:db.$==4?{$:1,$0:{$:1,$0:(dm=(bx.defViewM())([c_,da,db.$0.$0]),O.newViw(new bm({$:0,$0:da}),dm))}}:db.$==5?{$:1,$0:{$:1,$0:(dn=(bx.defViewJSM())([c_,da,db.$0.$0]),O.newViw(new bm({$:0,$0:da}),dn))}}:db.$==7?null:db.$==6?null:{$:1,$0:{$:0,$0:(_do=bx.defVarM(c_,da,db.$0.$0),O.newVar(new bm({$:0,$0:da}),_do))}};}return function(da){return q.choose(function(db){return c$(db[0],db[1]);},da);};};bx.defButtonM=function(){p.$cctor();return p.defButtonM;};bx.defInputM=function(){p.$cctor();return p.defInputM;};bx.defTextAreaM=function(){p.$cctor();return p.defTextAreaM;};bx.defConcatM=function(){p.$cctor();return p.defConcatM;};bx.defElementM=function(){p.$cctor();return p.defElementM;};bx.defDocFM=function(){p.$cctor();return p.defDocFM;};bx.defTemplateM=function(){p.$cctor();return p.defTemplateM;};bx.defSplitterM=function(){p.$cctor();return p.defSplitterM;};bx.defActionM=function(){p.$cctor();return p.defActionM;};bx.defActionsM=function(){p.$cctor();return p.defActionsM;};bx.defViewM=function(){p.$cctor();return p.defViewM;};bx.defViewJSM=function(){p.$cctor();return p.defViewJSM;};bx.defVarM=function(c_,c$,da){var db;db=(bx.defVarM0())([c_,c$,bx.initVal()]);db.Get()===bx.initVal()?db.Set(da):void 0;return db;};bx.defVarM0=function(){p.$cctor();return p.defVarM0;};bx.initVal=function(){p.$cctor();return p.initVal;};by.New=function(c_){return{r:c_};};bz.Get=function(c_){return c_ instanceof a.Array?bz.ArrayEnumerator(c_):D.Equals(typeof c_,"string")?bz.StringEnumerator(c_):c_.GetEnumerator();};bz.ArrayEnumerator=function(c_){return new bN.New(0,null,function(c$){var da;da=c$.s;return da<s.length(c_)&&(c$.c=s.get(c_,da),c$.s=da+1,true);},void 0);};bz.StringEnumerator=function(c_){return new bN.New(0,null,function(c$){var da;da=c$.s;return da<c_.length&&(c$.c=c_[da],c$.s=da+1,true);},void 0);};bz.Get0=function(c_){return c_ instanceof a.Array?bz.ArrayEnumerator(c_):D.Equals(typeof c_,"string")?bz.StringEnumerator(c_):"GetEnumerator0"in c_?c_.GetEnumerator0():c_.GetEnumerator();};bA.TryParse=function(c_){var c$;c$=c7.parse(c_);return a.isNaN(c$)?null:{$:1,$0:c$};};E.TryParse=function(c_,c$,da,db){var dc,dd;dc=+c_;dd=dc===dc-dc%1&&dc>=c$&&dc<=da;dd?db.set(dc):void 0;return dd;};bC.New=function(c_,c$,da){return{c:c_,v:c$,f:da};};bD.New=function(c_,c$){return{qryName:c_,qryFunction:c$};};bE=L.ConcreteVar=c5.Class({get_View:function(){return this.view;},Set:function(c_){if(this.isConst)(function(c$){return c$("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(c$){c6.log(c$);}));else{bF.Obsolete(this.snap);this.current=c_;this.snap=bF.New({$:2,$0:c_,$1:[]});}},Get:function(){return this.current;},Update:function(c_){this.Set(c_(this.Get()));},UpdateMaybe:function(c_){var c$;c$=c_(this.Get());c$!=null&&c$.$==1?this.Set(c$.$0):void 0;}},S,bE);bE.New=c5.Ctor(function(c_,c$,da){var db;db=this;S.New.call(this);this.isConst=c_;this.current=da;this.snap=c$;this.view=function(){return db.snap;};this.id=b4.Int();},bE);bF.Map=function(c_,c$){var da,db;da=c$.s;return da!=null&&da.$==0?bF.New({$:0,$0:c_(da.$0)}):(db=bF.New({$:3,$0:[],$1:[]}),(bF.When(c$,function(dc){bF.MarkDone(db,c$,c_(dc));},db),db));};bF.WhenRun=function(c_,c$,da){var db;db=c_.s;db==null?da():db!=null&&db.$==2?(db.$1.push(da),c$(db.$0)):db!=null&&db.$==3?(db.$0.push(c$),db.$1.push(da)):c$(db.$0);};bF.Map2=function(c_,c$,da){var db,dc,dd;function de(df){var dg,dh,di;if(!(dg=dd.s,dg!=null&&dg.$==0||dg!=null&&dg.$==2)){dh=bF.ValueAndForever(c$);di=bF.ValueAndForever(da);dh!=null&&dh.$==1?di!=null&&di.$==1?dh.$0[1]&&di.$0[1]?bF.MarkForever(dd,c_(dh.$0[0],di.$0[0])):bF.MarkReady(dd,c_(dh.$0[0],di.$0[0])):void 0:void 0;}}db=c$.s;dc=da.s;return db!=null&&db.$==0?dc!=null&&dc.$==0?bF.New({$:0,$0:c_(db.$0,dc.$0)}):bF.Map2Opt1(c_,db.$0,da):dc!=null&&dc.$==0?bF.Map2Opt2(c_,dc.$0,c$):(dd=bF.New({$:3,$0:[],$1:[]}),(bF.When(c$,de,dd),bF.When(da,de,dd),dd));};bF.Join=function(c_){var c$;c$=bF.New({$:3,$0:[],$1:[]});bF.When(c_,function(da){var db;db=da();bF.When(db,function(dc){var dd,de;if((dd=db.s,dd!=null&&dd.$==0)&&(de=c_.s,de!=null&&de.$==0))bF.MarkForever(c$,dc);else bF.MarkReady(c$,dc);},c$);},c$);return c$;};bF.WhenObsoleteRun=function(c_,c$){var da;da=c_.s;da==null?c$():da!=null&&da.$==2?da.$1.push(c$):da!=null&&da.$==3?da.$1.push(c$):void 0;};bF.When=function(c_,c$,da){var db;db=c_.s;db==null?bF.Obsolete(da):db!=null&&db.$==2?(bF.EnqueueSafe(db.$1,da),c$(db.$0)):db!=null&&db.$==3?(db.$0.push(c$),bF.EnqueueSafe(db.$1,da)):c$(db.$0);};bF.MarkDone=function(c_,c$,da){var db;if(db=c$.s,db!=null&&db.$==0)bF.MarkForever(c_,da);else bF.MarkReady(c_,da);};bF.Map2Opt1=function(c_,c$,da){return bF.Map(function(db){return c_(c$,db);},da);};bF.Map2Opt2=function(c_,c$,da){return bF.Map(function(db){return c_(db,c$);},da);};bF.ValueAndForever=function(c_){var c$;c$=c_.s;return c$!=null&&c$.$==0?{$:1,$0:[c$.$0,true]}:c$!=null&&c$.$==2?{$:1,$0:[c$.$0,false]}:null;};bF.MarkForever=function(c_,c$){var da,db,dc,dd;da=c_.s;if(da!=null&&da.$==3){c_.s={$:0,$0:c$};db=da.$0;for(dc=0,dd=s.length(db)-1;dc<=dd;dc++)(s.get(db,dc))(c$);}else void 0;};bF.MarkReady=function(c_,c$){var da,db,dc,dd;da=c_.s;if(da!=null&&da.$==3){c_.s={$:2,$0:c$,$1:da.$1};db=da.$0;for(dc=0,dd=s.length(db)-1;dc<=dd;dc++)(s.get(db,dc))(c$);}else void 0;};bF.EnqueueSafe=function(c_,c$){var da,db,dc,dd;c_.push(c$);if(c_.length%20===0){da=c_.slice(0);cM.Clear(c_);for(db=0,dc=s.length(da)-1;db<=dc;db++){dd=s.get(da,db);typeof dd=="object"?function(de){if(de.s)c_.push(de);}(dd):function(de){c_.push(de);}(dd);}}else void 0;};bF.TryGet=function(c_){var c$,da;c$=c_.s;return(c$!=null&&c$.$==0?(da=c$.$0,true):c$!=null&&c$.$==2&&(da=c$.$0,true))?{$:1,$0:da}:null;};bF.Map2Unit=function(c_,c$){var da,db,dc;function dd(){var de,df,dg;if(!(de=dc.s,de!=null&&de.$==0||de!=null&&de.$==2)){df=bF.ValueAndForever(c_);dg=bF.ValueAndForever(c$);df!=null&&df.$==1?dg!=null&&dg.$==1?df.$0[1]&&dg.$0[1]?bF.MarkForever(dc,null):bF.MarkReady(dc,null):void 0:void 0;}}da=c_.s;db=c$.s;return da!=null&&da.$==0?db!=null&&db.$==0?bF.New({$:0,$0:null}):c$:db!=null&&db.$==0?c_:(dc=bF.New({$:3,$0:[],$1:[]}),(bF.When(c_,dd,dc),bF.When(c$,dd,dc),dc));};bF.Copy=function(c_){var c$,da,db;c$=c_.s;return c$==null?c_:c$!=null&&c$.$==2?(da=bF.New({$:2,$0:c$.$0,$1:[]}),(bF.WhenObsolete(c_,da),da)):c$!=null&&c$.$==3?(db=bF.New({$:3,$0:[],$1:[]}),(bF.When(c_,function(dc){bF.MarkDone(db,c_,dc);},db),db)):c_;};bF.WhenObsolete=function(c_,c$){var da;da=c_.s;da==null?bF.Obsolete(c$):da!=null&&da.$==2?bF.EnqueueSafe(da.$1,c$):da!=null&&da.$==3?bF.EnqueueSafe(da.$1,c$):void 0;};bF.Map3=function(c_,c$,da,db){var dc,dd,de,df;function dg(dh){var di,dj,dk,dl;if(!(di=df.s,di!=null&&di.$==0||di!=null&&di.$==2)){dj=bF.ValueAndForever(c$);dk=bF.ValueAndForever(da);dl=bF.ValueAndForever(db);dj!=null&&dj.$==1?dk!=null&&dk.$==1?dl!=null&&dl.$==1?dj.$0[1]&&dk.$0[1]&&dl.$0[1]?bF.MarkForever(df,c_(dj.$0[0],dk.$0[0],dl.$0[0])):bF.MarkReady(df,c_(dj.$0[0],dk.$0[0],dl.$0[0])):void 0:void 0:void 0;}}dc=c$.s;dd=da.s;de=db.s;return dc!=null&&dc.$==0?dd!=null&&dd.$==0?de!=null&&de.$==0?bF.New({$:0,$0:c_(dc.$0,dd.$0,de.$0)}):bF.Map3Opt1(c_,dc.$0,dd.$0,db):de!=null&&de.$==0?bF.Map3Opt2(c_,dc.$0,de.$0,da):bF.Map3Opt3(c_,dc.$0,da,db):dd!=null&&dd.$==0?de!=null&&de.$==0?bF.Map3Opt4(c_,dd.$0,de.$0,c$):bF.Map3Opt5(c_,dd.$0,c$,db):de!=null&&de.$==0?bF.Map3Opt6(c_,de.$0,c$,da):(df=bF.New({$:3,$0:[],$1:[]}),(bF.When(c$,dg,df),bF.When(da,dg,df),bF.When(db,dg,df),df));};bF.Sequence=function(c_){var c$,da,db;function dc(dd){var de;if(db[0]===0){de=s.map(function(df){var dg;dg=df.s;return dg!=null&&dg.$==0?dg.$0:dg!=null&&dg.$==2?dg.$0:h.FailWith("value not found by View.Sequence");},c$);s.forall(function(df){var dg;dg=df.s;return dg!=null&&dg.$==0;},c$)?bF.MarkForever(da,de):bF.MarkReady(da,de);}else db[0]--;}c$=s.ofSeq(c_);return c$.length==0?bF.New({$:0,$0:[]}):(da=bF.New({$:3,$0:[],$1:[]}),(db=[s.length(c$)-1],(s.iter(function(dd){bF.When(dd,dc,da);},c$),da)));};bF.Map3Opt1=function(c_,c$,da,db){return bF.Map(function(dc){return c_(c$,da,dc);},db);};bF.Map3Opt2=function(c_,c$,da,db){return bF.Map(function(dc){return c_(c$,dc,da);},db);};bF.Map3Opt3=function(c_,c$,da,db){return bF.Map2(function(dc,dd){return c_(c$,dc,dd);},da,db);};bF.Map3Opt4=function(c_,c$,da,db){return bF.Map(function(dc){return c_(dc,c$,da);},db);};bF.Map3Opt5=function(c_,c$,da,db){return bF.Map2(function(dc,dd){return c_(dc,c$,dd);},da,db);};bF.Map3Opt6=function(c_,c$,da,db){return bF.Map2(function(dc,dd){return c_(dc,dd,c$);},da,db);};bG=be.Dictionary=c5.Class({TryGetValue:function(c_,c$){var da,db,dc;da=this;db=this.data[this.hash(c_)];return db==null?false:(dc=s.tryPick(function(dd){var de;de=h.KeyValue(dd);return da.equals.apply(null,[de[0],c_])?{$:1,$0:de[1]}:null;},db),dc!=null&&dc.$==1&&(c$.set(dc.$0),true));},Add:function(c_,c$){this.add(c_,c$);},set_Item:function(c_,c$){this.set(c_,c$);},add:function(c_,c$){var da,db,dc;da=this;db=this.hash(c_);dc=this.data[db];dc==null?(this.count=this.count+1,this.data[db]=new a.Array({K:c_,V:c$})):(s.exists(function(dd){return da.equals.apply(null,[(h.KeyValue(dd))[0],c_]);},dc)?cb.alreadyAdded():void 0,this.count=this.count+1,dc.push({K:c_,V:c$}));},set:function(c_,c$){var da,db,dc,dd;da=this;db=this.hash(c_);dc=this.data[db];dc==null?(this.count=this.count+1,this.data[db]=new a.Array({K:c_,V:c$})):(dd=s.tryFindIndex(function(de){return da.equals.apply(null,[(h.KeyValue(de))[0],c_]);},dc),dd==null?(this.count=this.count+1,dc.push({K:c_,V:c$})):dc[dd.$0]={K:c_,V:c$});},Remove:function(c_){return this.remove(c_);},ContainsKey:function(c_){var c$,da;c$=this;da=this.data[this.hash(c_)];return da==null?false:s.exists(function(db){return c$.equals.apply(null,[(h.KeyValue(db))[0],c_]);},da);},get_Keys:function(){return new cD.New(this);},get_Item:function(c_){return this.get(c_);},remove:function(c_){var c$,da,db,dc;c$=this;da=this.hash(c_);db=this.data[da];return db==null?false:(dc=s.filter(function(dd){return!c$.equals.apply(null,[(h.KeyValue(dd))[0],c_]);},db),s.length(dc)<db.length&&(this.count=this.count-1,this.data[da]=dc,true));},get:function(c_){var c$,da;c$=this;da=this.data[this.hash(c_)];return da==null?cb.notPresent():s.pick(function(db){var dc;dc=h.KeyValue(db);return c$.equals.apply(null,[dc[0],c_])?{$:1,$0:dc[1]}:null;},da);},Clear:function(){this.data=[];this.count=0;},GetEnumerator:function(){return bz.Get0(this);},GetEnumerator0:function(){return bz.Get0(s.concat(bl.GetFieldValues(this.data)));}},t,bG);bG.New$5=c5.Ctor(function(){bG.New$6.call(this,[],D.Equals,D.Hash);},bG);bG.New$6=c5.Ctor(function(c_,c$,da){var db,dc;t.New.call(this);this.equals=c$;this.hash=da;this.count=0;this.data=[];db=bz.Get(c_);try{while(db.MoveNext()){dc=db.Current();this.set(dc.K,dc.V);}}finally{if(typeof db=="object"&&"Dispose"in db)db.Dispose();}},bG);bH=L.FromView=c5.Class({get_View:function(){return this.view;},Set:function(c_){this.set(c_);},Get:function(){return this.current;},Update:function(c_){var c$;T.Get((c$=this.set,function(da){return c$(c_(da));}),this.view);},UpdateMaybe:function(c_){var c$;c$=this;T.Get(function(da){var db;db=c_(da);db!=null&&db.$==1?c$.set(db.$0):void 0;},this.view);}},S,bH);bH.New=c5.Ctor(function(c_,c$){var da,db;da=this;S.New.call(this);this.set=c$;this.id=b4.Int();this.current=(db=T.TryGet(c_),db==null?null:db.$0);this.view=T.Map(function(dc){da.current=dc;return dc;},c_);},bH);bI=be.List=c5.Class({GetEnumerator:function(){return bz.Get(this);},GetEnumerator0:function(){return bz.Get0(this);}},null,bI);bJ=be.HashSet=c5.Class({Add:function(c_){return this.add(c_);},Contains:function(c_){var c$;c$=this.data[this.hash(c_)];return c$==null?false:this.arrContains(c_,c$);},add:function(c_){var c$,da;c$=this.hash(c_);da=this.data[c$];return da==null?(this.data[c$]=[c_],this.count=this.count+1,true):this.arrContains(c_,da)?false:(da.push(c_),this.count=this.count+1,true);},arrContains:function(c_,c$){var da,db,dc,dd;da=true;db=0;dd=c$.length;while(da&&db<dd)if(this.equals.apply(null,[c$[db],c_]))da=false;else db=db+1;return!da;},ExceptWith:function(c_){var c$;c$=bz.Get(c_);try{while(c$.MoveNext())this.Remove(c$.Current());}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(c_){var c$,da,db,dc;c$=0;da=cE.concat(this.data);for(db=0,dc=da.length-1;db<=dc;db++)s.set(c_,db,da[db]);},IntersectWith:function(c_){var c$,da,db,dc,dd;c$=new bJ.New$4(c_,this.equals,this.hash);da=cE.concat(this.data);for(db=0,dc=da.length-1;db<=dc;db++){dd=da[db];!c$.Contains(dd)?this.Remove(dd):void 0;}},Remove:function(c_){var c$;c$=this.data[this.hash(c_)];return c$==null?false:this.arrRemove(c_,c$)&&(this.count=this.count-1,true);},arrRemove:function(c_,c$){var da,db,dc,dd;da=true;db=0;dd=c$.length;while(da&&db<dd)if(this.equals.apply(null,[c$[db],c_])){c$.splice.apply(c$,[db,1]);da=false;}else db=db+1;return!da;},GetEnumerator:function(){return bz.Get(cE.concat(this.data));},GetEnumerator0:function(){return bz.Get(cE.concat(this.data));}},t,bJ);bJ.New$3=c5.Ctor(function(){bJ.New$4.call(this,[],D.Equals,D.Hash);},bJ);bJ.New$4=c5.Ctor(function(c_,c$,da){var db;t.New.call(this);this.equals=c$;this.hash=da;this.data=[];this.count=0;db=bz.Get(c_);try{while(db.MoveNext())this.add(db.Current());}finally{if(typeof db=="object"&&"Dispose"in db)db.Dispose();}},bJ);bJ.New$2=c5.Ctor(function(c_){bJ.New$4.call(this,c_,D.Equals,D.Hash);},bJ);bK.Box=a.id;bL.ofSeqNonCopying=function(c_){var c$,da;if(c_ instanceof a.Array)return c_;else if(c_ instanceof r)return s.ofList(c_);else if(c_===null)return[];else{c$=[];da=bz.Get(c_);try{while(da.MoveNext())c$.push(da.Current());return c$;}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}}};bL.TreeReduce=function(c_,c$,da){var db;function dc(dd,de){var df,dg;return de<=0?c_:de===1&&(dd>=0&&dd<db)?s.get(da,dd):(dg=de/2>>0,c$(dc(dd,dg),dc(dd+dg,de-dg)));}db=s.length(da);return dc(0,db);};bL.MapTreeReduce=function(c_,c$,da,db){var dc;function dd(de,df){var dg,dh;return df<=0?c$:df===1&&(de>=0&&de<dc)?c_(s.get(db,de)):(dh=df/2>>0,da(dd(de,dh),dd(de+dh,df-dh)));}dc=s.length(db);return dd(0,dc);};bL.mapInPlace=function(c_,c$){var da,db;for(da=0,db=c$.length-1;da<=db;da++)c$[da]=c_(c$[da]);return c$;};bN=bz.T=c5.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},t,bN);bN.New=c5.Ctor(function(c_,c$,da,db){t.New.call(this);this.s=c_;this.c=c$;this.n=da;this.d=db;},bN);T=L.View=c5.Class({},null,T);bO.EmptyAttr=function(){cc.$cctor();return cc.EmptyAttr;};bO.Dynamic=function(c_,c$){return new bc({$:1,$0:new cd.New(c_,c$)});};bO.Static=function(c_){return new bc({$:3,$0:c_});};bO.AppendTree=function(c_,c$){var da;return c_===null?c$:c$===null?c_:(da=new bc({$:2,$0:c_,$1:c$}),(bO.SetFlags(da,bO.Flags(c_)|bO.Flags(c$)),da));};bO.Insert=function(c_,c$){var da,db,dc;function dd(de){if(!(de===null))if(de!=null&&de.$==1)da.push(de.$0);else if(de!=null&&de.$==2){dd(de.$0);dd(de.$1);}else if(de!=null&&de.$==3)de.$0(c_);else if(de!=null&&de.$==4)db.push(de.$0);}da=[];db=[];dd(c$);dc=da.slice(0);return cp.New(c_,bO.Flags(c$),dc,db.length===0?null:{$:1,$0:function(de){q.iter(function(df){df(de);},db);}});};bO.SetFlags=function(c_,c$){c_.flags=c$;};bO.Flags=function(c_){return c_!==null&&c_.hasOwnProperty("flags")?c_.flags:0;};bO.Updates=function(c_){return bL.MapTreeReduce(function(c$){return c$.NChanged();},T.Const(),T.Map2Unit,c_.DynNodes);};bO.Empty=function(c_){return cp.New(c_,0,[],null);};bO.HasExitAnim=function(c_){var c$;c$=2;return(c_.DynFlags&c$)===c$;};bO.GetExitAnim=function(c_){return bO.GetAnim(c_,function(c$,da){return c$.NGetExitAnim(da);});};bO.HasEnterAnim=function(c_){var c$;c$=1;return(c_.DynFlags&c$)===c$;};bO.GetEnterAnim=function(c_){return bO.GetAnim(c_,function(c$,da){return c$.NGetEnterAnim(da);});};bO.HasChangeAnim=function(c_){var c$;c$=4;return(c_.DynFlags&c$)===c$;};bO.GetChangeAnim=function(c_){return bO.GetAnim(c_,function(c$,da){return c$.NGetChangeAnim(da);});};bO.GetAnim=function(c_,c$){return cw.Concat(s.map(function(da){return c$(da,c_.DynElem);},c_.DynNodes));};bO.Sync=function(c_,c$){s.iter(function(da){da.NSync(c_);},c$.DynNodes);};bP.OfSeq=function(c_){var c$;c$=s.ofSeq(q.distinct(c_));s.sortInPlace(c$);return bP.Build(c$,0,c$.length-1);};bP.Build=function(c_,c$,da){var db,dc,dd;return da-c$+1<=0?null:(db=(c$+da)/2>>0,(dc=bP.Build(c_,c$,db-1),(dd=bP.Build(c_,db+1,da),bP.Branch(s.get(c_,db),dc,dd))));};bP.Contains=function(c_,c$){return!((bP.Lookup(c_,c$))[0]==null);};bP.Branch=function(c_,c$,da){var db,dc;return ce.New(c_,c$,da,1+(db=c$==null?0:c$.Height,(dc=da==null?0:da.Height,D.Compare(db,dc)===1?db:dc)),1+(c$==null?0:c$.Count)+(da==null?0:da.Count));};bP.Lookup=function(c_,c$){var da,db,dc,dd;da=[];db=c$;dc=true;while(dc)if(db==null)dc=false;else{dd=D.Compare(c_,db.Node);dd===0?dc=false:dd===1?(da.unshift([true,db.Node,db.Left]),db=db.Right):(da.unshift([false,db.Node,db.Right]),db=db.Left);}return[db,da];};bP.Enumerate=function(c_,c$){function da(db,dc){var dd;while(true)if(db==null)return dc.$==1?{$:1,$0:[dc.$0[0],[dc.$0[1],dc.$1]]}:null;else if(c_){dd=db;db=dd.Right;dc=new r({$:1,$0:[dd.Node,dd.Left],$1:dc});}else{dd=db;db=dd.Left;dc=new r({$:1,$0:[dd.Node,dd.Right],$1:dc});}}return q.unfold(function(db){return da(db[0],db[1]);},[c$,r.Empty]);};bP.TryFind=function(c_,c$){var da;da=(bP.Lookup(c_,c$))[0];return da==null?null:{$:1,$0:da.Node};};bQ.Filter=function(c_,c$){var da;return new bf.New$1((da=s.ofSeq(q.filter(c_,c$)),bP.Build(da,0,da.length-1)));};bR.CreateElemNode=function(c_,c$,da){var db;bR.LinkElement(c_,da);db=bO.Insert(c_,c$);return cf.New(db,da,null,c_,b4.Int(),c5.GetOptional(db.OnAfterRender));};bR.CreateTextNode=function(){return{Text:b7.CreateText(""),Dirty:false,Value:""};};bR.UpdateTextNode=function(c_,c$){c_.Value=c$;c_.Dirty=true;};bR.LinkElement=function(c_,c$){bR.InsertDoc(c_,c$,null);};bR.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bR.UpdateEmbedNode=function(c_,c$){c_.Current=c$;c_.Dirty=true;};bR.InsertDoc=function(c_,c$,da){var db;return c$!=null&&c$.$==1?bR.InsertNode(c_,c$.$0.El,da):c$!=null&&c$.$==2?(db=c$.$0,(db.Dirty=false,bR.InsertDoc(c_,db.Current,da))):c$==null?da:c$!=null&&c$.$==4?bR.InsertNode(c_,c$.$0.Text,da):c$!=null&&c$.$==5?bR.InsertNode(c_,c$.$0,da):c$!=null&&c$.$==6?s.foldBack(function(dc,dd){return dc==null||dc.constructor===bM?bR.InsertDoc(c_,dc,dd):bR.InsertNode(c_,dc,dd);},c$.$0.Els,da):bR.InsertDoc(c_,c$.$0,bR.InsertDoc(c_,c$.$1,da));};bR.CreateRunState=function(c_,c$){return cG.New(cH.get_Empty(),bR.CreateElemNode(c_,bO.EmptyAttr(),c$));};bR.PerformAnimatedUpdate=function(c_,c$,da){var db;return cw.get_UseAnimations()?(db=null,cl.Delay(function(){var dc,dd,de;dc=cH.FindAll(da);dd=bR.ComputeChangeAnim(c$,dc);de=bR.ComputeEnterAnim(c$,dc);return cl.Bind(cw.Play(cw.Append(dd,bR.ComputeExitAnim(c$,dc))),function(){return cl.Bind(bR.SyncElemNodesNextFrame(c_,c$),function(){return cl.Bind(cw.Play(de),function(){c$.PreviousNodes=dc;return cl.Return(null);});});});})):bR.SyncElemNodesNextFrame(c_,c$);};bR.PerformSyncUpdate=function(c_,c$,da){var db;db=cH.FindAll(da);bR.SyncElemNode(c_,c$.Top);c$.PreviousNodes=db;};bR.InsertNode=function(c_,c$,da){b7.InsertAt(c_,da,c$);return c$;};bR.LinkPrevElement=function(c_,c$){bR.InsertDoc(c_.parentNode,c$,c_);};bR.CreateDelimitedRunState=function(c_,c$,da){return cG.New(cH.get_Empty(),bR.CreateDelimitedElemNode(c_,c$,bO.EmptyAttr(),da));};bR.SyncElemNodesNextFrame=function(c_,c$){function da(db){a.requestAnimationFrame(function(){bR.SyncElemNode(c_,c$.Top);db();});}return cx.BatchUpdatesEnabled()?cl.FromContinuations(function(db,dc,dd){return da.apply(null,[db,dc,dd]);}):(bR.SyncElemNode(c_,c$.Top),cl.Return(null));};bR.ComputeExitAnim=function(c_,c$){return cw.Concat(s.map(function(da){return bO.GetExitAnim(da.Attr);},cH.ToArray(cH.Except(c$,cH.Filter(function(da){return bO.HasExitAnim(da.Attr);},c_.PreviousNodes)))));};bR.ComputeEnterAnim=function(c_,c$){return cw.Concat(s.map(function(da){return bO.GetEnterAnim(da.Attr);},cH.ToArray(cH.Except(c_.PreviousNodes,cH.Filter(function(da){return bO.HasEnterAnim(da.Attr);},c$)))));};bR.ComputeChangeAnim=function(c_,c$){var da;function db(dc){return bO.HasChangeAnim(dc.Attr);}da=function(dc){return cH.Filter(db,dc);};return cw.Concat(s.map(function(dc){return bO.GetChangeAnim(dc.Attr);},cH.ToArray(cH.Intersect(da(c_.PreviousNodes),da(c$)))));};bR.SyncElemNode=function(c_,c$){!c_?bR.SyncElement(c$):void 0;bR.Sync(c$.Children);bR.AfterRender(c$);};bR.InsertBeforeDelim=function(c_,c$){var da,db;da=c_.parentNode;db=self.document.createTextNode("");da.insertBefore(db,c_);bR.LinkPrevElement(c_,c$);return db;};bR.CreateDelimitedElemNode=function(c_,c$,da,db){var dc,dd;dc=c_.parentNode;bR.LinkPrevElement(c$,db);dd=bO.Insert(dc,da);return cf.New(dd,db,{$:1,$0:[c_,c$]},dc,b4.Int(),c5.GetOptional(dd.OnAfterRender));};bR.SyncElement=function(c_){function c$(da){function db(dc){var dd,de;return dc!=null&&dc.$==0?db(dc.$0)||db(dc.$1):dc!=null&&dc.$==2?(dd=dc.$0,dd.Dirty||db(dd.Current)):dc!=null&&dc.$==6&&(de=dc.$0,de.Dirty||s.exists(c$,de.Holes));}return db(da.Children);}bO.Sync(c_.El,c_.Attr);c$(c_)?bR.DoSyncElement(c_):void 0;};bR.Sync=function(c_){var c$,da;if(c_!=null&&c_.$==1)bR.SyncElemNode(false,c_.$0);else if(c_!=null&&c_.$==2)bR.Sync(c_.$0.Current);else if(c_==null);else if(c_!=null&&c_.$==5);else if(c_!=null&&c_.$==4){c$=c_.$0;c$.Dirty?(c$.Text.nodeValue=c$.Value,c$.Dirty=false):void 0;}else if(c_!=null&&c_.$==6){da=c_.$0;s.iter(function(db){bR.SyncElemNode(false,db);},da.Holes);s.iter(function(db){bO.Sync(db[0],db[1]);},da.Attrs);bR.AfterRender(da);}else{bR.Sync(c_.$0);bR.Sync(c_.$1);}};bR.AfterRender=function(c_){var c$;c$=c5.GetOptional(c_.Render);c$!=null&&c$.$==1?(c$.$0(c_.El),c5.SetOptional(c_,"Render",null)):void 0;};bR.DoSyncElement=function(c_){var c$,da,db;function dc(dd,de){var df,dg;return dd!=null&&dd.$==1?dd.$0.El:dd!=null&&dd.$==2?(df=dd.$0,df.Dirty?(df.Dirty=false,bR.InsertDoc(c$,df.Current,de)):dc(df.Current,de)):dd==null?de:dd!=null&&dd.$==4?dd.$0.Text:dd!=null&&dd.$==5?dd.$0:dd!=null&&dd.$==6?(dg=dd.$0,(dg.Dirty?dg.Dirty=false:void 0,s.foldBack(function(dh,di){return dh==null||dh.constructor===bM?dc(dh,di):dh;},dg.Els,de))):dc(dd.$0,dc(dd.$1,de));}c$=c_.El;c0.Iter((da=c_.El,function(dd){b7.RemoveNode(da,dd);}),c0.Except(c0.DocChildren(c_),c0.Children(c_.El,c5.GetOptional(c_.Delimiters))));dc(c_.Children,(db=c5.GetOptional(c_.Delimiters),db!=null&&db.$==1?db.$0[1]:null));};q.contains=function(c_,c$){var da,db;da=bz.Get(c$);try{db=false;while(!db&&da.MoveNext())db=D.Equals(da.Current(),c_);return db;}finally{if(typeof da=="object"&&"Dispose"in da)da.Dispose();}};q.nonNegative=function(){return h.FailWith("The input must be non-negative.");};q.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};s.mapiInPlace=function(c_,c$){var da,db;for(da=0,db=c$.length-1;da<=db;da++)c$[da]=c_(da,c$[da]);return c$;};s.mapInPlace=function(c_,c$){var da,db;for(da=0,db=c$.length-1;da<=db;da++)c$[da]=c_(c$[da]);};s.groupBy=function(c_,c$){var da,db,dc,dd,de,df;da=new bG.New$5();db=[];for(dc=0,dd=s.length(c$)-1;dc<=dd;dc++){de=c$[dc];df=c_(de);da.ContainsKey(df)?da.get_Item(df).push(de):(db.push(df),da.Add(df,[de]));}s.mapInPlace(function(dg){return[dg,da.get_Item(dg)];},db);return db;};q.last=function(c_){var c$,da;c$=bz.Get(c_);try{if(!c$.MoveNext())da=q.insufficient();else{while(c$.MoveNext());da=c$.Current();}return da;}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}};q.tryHead=function(c_){var c$;c$=bz.Get(c_);try{return c$.MoveNext()?{$:1,$0:c$.Current()}:null;}finally{if(typeof c$=="object"&&"Dispose"in c$)c$.Dispose();}};q.tryItem=function(c_,c$){var da,db,dc;if(c_<0)return null;else{da=0;db=bz.Get(c$);try{dc=true;while(dc&&da<=c_)if(db.MoveNext())da=da+1;else dc=false;return dc?{$:1,$0:db.Current()}:null;}finally{if(typeof db=="object"&&"Dispose"in db)db.Dispose();}}};bU.New=function(c_,c$){return{Active:c_,PosV:c$};};bn.MousePosSt$1=function(){cg.$cctor();return cg.MousePosSt;};bn.ActivateButtonListener=function(){cg.$cctor();return cg.ActivateButtonListener;};bn.MouseBtnSt$1=function(){cg.$cctor();return cg.MouseBtnSt;};bn.ActivateKeyListener=function(){cg.$cctor();return cg.ActivateKeyListener;};bn.KeyListenerState=function(){cg.$cctor();return cg.KeyListenerState;};bV.New=function(c_,c$,da,db){return{Active:c_,Left:c$,Middle:da,Right:db};};bW.New=function(c_,c$,da){return{KeysPressed:c_,KeyListenerActive:c$,LastPressed:da};};bX=bq.WcSplitterT=c5.Class({connectedCallback:function(){var c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn;function _do(dw){var dx,dy,dz,dA;dx=df?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];dy=a.parseFloat("0"+c9(dw.parentElement.parentElement).css(dx[0]));dz=a.parseFloat("0"+c9(dw.parentElement.parentElement).css(dx[1]));di.Set(a.parseFloat("0"+c9(dw.parentElement.parentElement).css(dx[2])));dh[0]=dy+dz;dA=c_.getBoundingClientRect();return df?de?[dA.width,dA.height]:[-dA.width,dA.height]:de?[dA.height,dA.width]:[-dA.height,dA.width];}function dp(dw){return df?dw.clientX:dw.clientY;}function dq(dw){var dx,dy;dx=(dp(dw)-dl[0])*100/dg[0][0]+dk[0];dd.Set((dy=D.Compare(db,dx)===1?db:dx,D.Compare(dc,dy)===-1?dc:dy));}function dr(){if(dj[0]){dj[0]=false;self.removeEventListener("mousemove",dq,false);self.removeEventListener("mouseup",dr,false);}}function ds(dw){var dx,dy;if(!dj[0]){dj[0]=true;dk[0]=dd.Get();dl[0]=dp(dw);dg[0]=(dx=(dy=dm[0],dy==null?null:{$:1,$0:_do(dy.$0)}),dx==null?[100,500]:dx.$0);self.addEventListener("mousemove",dq,false);self.addEventListener("mouseup",dr,false);dw.preventDefault();}}function dt(dw,dx,dy,dz){return[(dw-dx-dy)*dz/100,(dw-dx-dy)*(100-dz)/100];}function du(dw,dx){return(((((c5.Curried(function(dy,dz,dA,dB,dC){return dy(" "+dz.toFixed(2)+"px "+dA.toFixed(2)+"px ; "+_6.toSafe(dB)+" : "+dC.toFixed(2)+"px; ");},5))(a.id))(dw))(dx))(df?"height":"width"))(dg[0][1]);}function dv(){var dw;dw=dm[0];dw==null?void 0:dg[0]=_do(dw.$0);dd.Set(dd.Get());}if(!this.added){c_=this;c$=c_.attachShadow({mode:"open"});da=self.document.createElement("div");db=c_.hasAttribute("min")?a.parseFloat(c_.getAttribute("min")):4;dc=c_.hasAttribute("max")?a.parseFloat(c_.getAttribute("max")):96;dd=Q.Create$1(c_.hasAttribute("value")?a.parseFloat(c_.getAttribute("value")):50);de=!c_.hasAttribute("second");df=c_.hasAttribute("vertical");dg=[[0,0]];dh=[0];di=Q.Create$1(0);dj=[false];dk=[0];dl=[0];dm=[null];dn=(((((df?bq.layoutVertical():bq.layoutHorizontal())(T.Map(function(dw){var dx;dx=dt(dg[0][0],di.Get(),dh[0],dw);return du.apply(null,dx);},dd.get_View())))(function(){ch.addResizeObserver(dv,c_);dv();}))(function(dw){dm[0]={$:1,$0:dw};dv();}))(function(dw){ds(dw);}))(T.Map(function(dw){return function(dx){return dw(_6.prettyPrint(dx)+"px");};}(a.id),di.get_View()));bZ.LoadLocalTemplates("");M.Run(da,dn);c$.appendChild(da.firstChild);this.added=true;}}},t,bX);bX.Constructor=function(){var c_,c$;c_=(c$=c8.construct(self.HTMLElement,[],this.__proto__.constructor),c$);self.FsRootDll.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(c_);return c_;};bX.New=c5.Ctor(function(){t.New.call(this);this.added=false;(function(c_){return c_("WcSplitterT initializer");}(function(c_){c6.log(c_);}));},bX);bZ.LoadLocalTemplates=function(c_){!bZ.LocalTemplatesLoaded()?(bZ.set_LocalTemplatesLoaded(true),bZ.LoadNestedTemplates(self.document.body,"")):void 0;bZ.LoadedTemplates().set_Item(c_,bZ.LoadedTemplateFile(""));};bZ.NamedTemplate=function(c_,c$,da){var db,dc;db=(dc=null,[bZ.LoadedTemplateFile(c_).TryGetValue(c$==null?"":c$.$0,{get:function(){return dc;},set:function(dd){dc=dd;}}),dc]);return db[0]?bZ.ChildrenTemplate(db[1].cloneNode(true),da):(c6.warn("Local template doesn't exist",c$),M.get_Empty());};bZ.LocalTemplatesLoaded=function(){cq.$cctor();return cq.LocalTemplatesLoaded;};bZ.set_LocalTemplatesLoaded=function(c_){cq.$cctor();cq.LocalTemplatesLoaded=c_;};bZ.LoadNestedTemplates=function(c_,c$){var db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do;function da(dp){var dq,dr;if(!db.ContainsKey(dp)){dq=(dr=null,[dc.TryGetValue(dp,{get:function(){return dr;},set:function(ds){dr=ds;}}),dr]);dq[0]?(_do.Add(dp),dc.Remove(dp),bZ.PrepareTemplateStrict(c$,{$:1,$0:dp},dq[1][0],{$:1,$0:dq[1][1]},{$:1,$0:da})):c6.warn(_do.Contains(dp)?"Encountered loop when instantiating "+dp:"Local template does not exist: "+dp);}}db=bZ.LoadedTemplateFile(c$);dc=new bG.New$5();dd=c_.querySelectorAll("[ws-template]");for(de=0,df=dd.length-1;de<=df;de++){dg=dd[de];dh=dg.getAttribute("ws-template").toLowerCase();dg.removeAttribute("ws-template");dc.set_Item(dh,[[dg],bZ.FakeRootSingle(dg)]);}di=c_.querySelectorAll("[ws-children-template]");for(dj=0,dk=di.length-1;dj<=dk;dj++){dl=di[dj];dm=dl.getAttribute("ws-children-template").toLowerCase();dl.removeAttribute("ws-children-template");dc.set_Item(dm,(dn=b7.ChildrenArray(dl),[dn,bZ.FakeRoot(dn)]));}_do=new bJ.New$3();while(dc.count>0)da(q.head(dc.get_Keys()));};bZ.LoadedTemplates=function(){cq.$cctor();return cq.LoadedTemplates;};bZ.LoadedTemplateFile=function(c_){var c$,da,db;c$=(da=null,[bZ.LoadedTemplates().TryGetValue(c_,{get:function(){return da;},set:function(dc){da=dc;}}),da]);return c$[0]?c$[1]:(db=new bG.New$5(),(bZ.LoadedTemplates().set_Item(c_,db),db));};bZ.ChildrenTemplate=function(c_,c$){var da,db,dc,dd,de;da=bZ.InlineTemplate(c_,c$);db=da[1];dc=da[0];dd=dc.Els;return!D.Equals(dd,null)&&dd.length===1&&(s.get(dd,0)instanceof bb&&(D.Equals(s.get(dd,0).nodeType,bb.ELEMENT_NODE)&&(de=s.get(dd,0),true)))?ci.TreeNode(dc,db):M.Mk({$:6,$0:dc},db);};bZ.FakeRootSingle=function(c_){var c$,da,db;c_.removeAttribute("ws-template");c$=c_.getAttribute("ws-replace");c$===null?void 0:(c_.removeAttribute("ws-replace"),da=c_.parentNode,D.Equals(da,null)?void 0:(db=self.document.createElement(c_.tagName),db.setAttribute("ws-replace",c$),da.replaceChild(db,c_)));return bZ.FakeRoot([c_]);};bZ.FakeRoot=function(c_){var c$,da,db;c$=self.document.createElement("div");for(da=0,db=c_.length-1;da<=db;da++)c$.appendChild(s.get(c_,da));return c$;};bZ.PrepareTemplateStrict=function(c_,c$,da,db,dc){var dd,de;function df(dk,dl){var dm,dn,_do,dp,dq,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM;function dr(dN){}while(true)switch(dk){case 0:if(dl!==null){dm=dl.nextSibling;if(D.Equals(dl.nodeType,bb.TEXT_NODE))cC.convertTextNode(dl);else if(D.Equals(dl.nodeType,bb.ELEMENT_NODE))dh(dl);dl=dm;}else return null;break;case 1:ds=B.string(dl.nodeName,{$:1,$0:3},null).toLowerCase();dt=(dn=ds.indexOf("."),dn===-1?[c_,ds]:[B.string(ds,null,{$:1,$0:dn-1}),B.string(ds,{$:1,$0:dn+1},null)]);du=dt[1];dv=dt[0];if(dv!==""&&!bZ.LoadedTemplates().ContainsKey(dv))return cC.failNotLoaded(du);else{if(dv===""&&dc!=null)dc.$0(du);dw=bZ.LoadedTemplates().get_Item(dv);if(!dw.ContainsKey(du))return cC.failNotLoaded(du);else{dx=dw.get_Item(du);dy=dx.cloneNode(true);dz=new bJ.New$3();dA=new bG.New$5();dB=dl.attributes;for(dC=0,dD=dB.length-1;dC<=dD;dC++){dE=dB.item(dC).name.toLowerCase();dA.set_Item(dE,(dF=dB.item(dC).nodeValue,dF===""?dE:dF.toLowerCase()));!dz.Add(dE)?c6.warn("Hole mapped twice",dE):void 0;}for(dG=0,dH=dl.childNodes.length-1;dG<=dH;dG++){dI=dl.childNodes[dG];D.Equals(dI.nodeType,bb.ELEMENT_NODE)?!dz.Add(dI.nodeName.toLowerCase())?c6.warn("Hole filled twice",du):void 0:void 0;}dJ=dl.childNodes.length===1&&D.Equals(dl.firstChild.nodeType,bb.TEXT_NODE);if(dJ){dp=cC.fillTextHole(dy,dl.firstChild.textContent,du);((function(dN){return function(dO){if(dO!=null)dN(dO.$0);};}((dq=function(dN){return function(dO){return dN.Add(dO);};}(dz),function(dN){return dr(dq(dN));})))(dp));}cC.removeHolesExcept(dy,dz);if(!dJ){for(dK=0,dL=dl.childNodes.length-1;dK<=dL;dK++){dM=dl.childNodes[dK];D.Equals(dM.nodeType,bb.ELEMENT_NODE)?dM.hasAttributes()?cC.fillInstanceAttrs(dy,dM):dg(dy,dM):void 0;}}cC.mapHoles(dy,dA);cC.fill(dy,dl.parentNode,dl);dl.parentNode.removeChild(dl);return;}}break;}}function dg(dk,dl){var dm,_do,dp;function dn(dq,dr){var ds,dt,du;if(_do==="title"&&dl.hasChildNodes()){ds=c9.parseHTML(dl.textContent);dl.removeChild(dl.firstChild);for(dt=0,du=ds.length-1;dt<=du;dt++)dl.appendChild(s.get(ds,dt));}else null;dh(dl);return cC.fill(dl,dq,dr);}_do=dl.nodeName.toLowerCase();b7.IterSelector(dk,"[ws-attr-holes]",function(dq){var dr,ds,dt,du,dv;dr=A.SplitChars(dq.getAttribute("ws-attr-holes"),[" "],1);for(ds=0,dt=dr.length-1;ds<=dt;ds++){du=s.get(dr,ds);dq.setAttribute(du,(dv=new a.RegExp("\\${"+_do+"}","ig"),dq.getAttribute(du).replace(dv,dl.textContent)));}});dp=dk.querySelector("[ws-hole="+_do+"]");if(D.Equals(dp,null)){dm=dk.querySelector("[ws-replace="+_do+"]");return D.Equals(dm,null)?null:(dn(dm.parentNode,dm),void dm.parentNode.removeChild(dm));}else{while(dp.hasChildNodes())dp.removeChild(dp.lastChild);dp.removeAttribute("ws-hole");return dn(dp,null);}}function dh(dk){if(A.StartsWith(dk.nodeName.toLowerCase(),"ws-"))dj(dk);else{cC.convertAttrs(dk);di(dk.firstChild);}}function di(dk){return df(0,dk);}function dj(dk){return df(1,dk);}dd=db==null?bZ.FakeRoot(da):db.$0;de=(c$==null?"":c$.$0).toLowerCase();bZ.LoadedTemplateFile(c_).set_Item(de,dd);s.length(da)>0?(function(dk){var dl,dm,dn,_do;while(true){dl=dk.querySelector("[ws-template]");if(D.Equals(dl,null)){dm=dk.querySelector("[ws-children-template]");if(D.Equals(dm,null))return null;else{dn=dm.getAttribute("ws-children-template");dm.removeAttribute("ws-children-template");bZ.PrepareTemplateStrict(c_,{$:1,$0:dn},b7.ChildrenArray(dm),null,null);dk=dk;}}else{_do=dl.getAttribute("ws-template");(bZ.PrepareSingleTemplate(c_,{$:1,$0:_do},dl))(null);dk=dk;}}}(dd),di(s.get(da,0))):void 0;};bZ.InlineTemplate=function(c_,c$){var da,db,dc,dd,dg,dh,di,dj,dk,dl,dm;function de(dn,_do){var dp,dq,dr;dp=bO.Insert(dn,_do);dh.push(bO.Updates(dp));di.push([dn,dp]);dq=c5.GetOptional(dp.OnAfterRender);return dq==null?null:(dr=dq.$0,void dj.push(function(){dr(dn);}));}function df(dn){var _do,dp;_do=(dp=null,[dk.TryGetValue(dn,{get:function(){return dp;},set:function(dq){dp=dq;}}),dp]);return _do[0]?_do[1].$==0?{$:1,$0:_do[1].$1}:_do[1].$==1?{$:1,$0:M.TextNode(_do[1].$1)}:_do[1].$==2?{$:1,$0:M.TextView(_do[1].$1)}:_do[1].$==8?{$:1,$0:M.TextView(_do[1].$1.get_View())}:_do[1].$==9?{$:1,$0:M.TextView(T.Map(a.String,_do[1].$1.get_View()))}:_do[1].$==10?{$:1,$0:M.TextView(T.Map(function(dq){return dq.get_Input();},_do[1].$1.get_View()))}:_do[1].$==11?{$:1,$0:M.TextView(T.Map(a.String,_do[1].$1.get_View()))}:_do[1].$==12?{$:1,$0:M.TextView(T.Map(function(dq){return dq.get_Input();},_do[1].$1.get_View()))}:_do[1].$==13?{$:1,$0:M.TextView(T.Map(a.String,_do[1].$1.get_View()))}:(c6.warn("Content hole filled with attribute data",dn),null):null;}dg=[];dh=[];di=[];dj=[];dk=new bG.New$5();dl=bz.Get(c$);try{while(dl.MoveNext()){dm=dl.Current();dk.set_Item(dm.$0,dm);}}finally{if(typeof dl=="object"&&"Dispose"in dl)dl.Dispose();}da=b7.ChildrenArray(c_);b7.IterSelector(c_,"[ws-hole]",function(dn){var _do,dp,dq;dq=dn.getAttribute("ws-hole");dn.removeAttribute("ws-hole");while(dn.hasChildNodes())dn.removeChild(dn.lastChild);_do=df(dq);_do!=null&&_do.$==1?(dp=_do.$0,bR.LinkElement(dn,dp.docNode),dg.push(cf.New(bO.Empty(dn),dp.docNode,null,dn,b4.Int(),null)),dh.push(dp.updates)):void 0;});b7.IterSelector(c_,"[ws-replace]",function(dn){var _do,dp,dq,dr,ds,dt;_do=df(dn.getAttribute("ws-replace"));_do!=null&&_do.$==1?(dp=_do.$0,dq=dn.parentNode,dr=self.document.createTextNode(""),dq.replaceChild(dr,dn),ds=bR.InsertBeforeDelim(dr,dp.docNode),dt=s.tryFindIndex(function(du){return dn===du;},da),dt==null?void 0:s.set(da,dt.$0,dp.docNode),dg.push(cf.New(bO.Empty(dq),dp.docNode,{$:1,$0:[ds,dr]},dq,b4.Int(),null)),dh.push(dp.updates)):void 0;});b7.IterSelector(c_,"[ws-attr]",function(dn){var _do,dp,dq;_do=dn.getAttribute("ws-attr");dn.removeAttribute("ws-attr");dp=(dq=null,[dk.TryGetValue(_do,{get:function(){return dq;},set:function(dr){dq=dr;}}),dq]);dp[0]?dp[1].$==3?de(dn,dp[1].$1):c6.warn("Attribute hole filled with non-attribute data",_do):void 0;});b7.IterSelector(c_,"[ws-on]",function(dn){de(dn,bc.Concat(s.choose(function(_do){var dp,dq,dr;dp=A.SplitChars(_do,[":"],1);dq=(dr=null,[dk.TryGetValue(s.get(dp,1),{get:function(){return dr;},set:function(ds){dr=ds;}}),dr]);return dq[0]?dq[1].$==4?{$:1,$0:bd.Handler(s.get(dp,0),dq[1].$1)}:dq[1].$==5?{$:1,$0:bc.Handler(s.get(dp,0),dq[1].$2)}:(c6.warn("Event hole on"+s.get(dp,0)+" filled with non-event data",s.get(dp,1)),null):null;},A.SplitChars(dn.getAttribute("ws-on"),[" "],1))));dn.removeAttribute("ws-on");});b7.IterSelector(c_,"[ws-onafterrender]",function(dn){var _do,dp,dq;_do=dn.getAttribute("ws-onafterrender");dp=(dq=null,[dk.TryGetValue(_do,{get:function(){return dq;},set:function(dr){dq=dr;}}),dq]);dp[0]?dp[1].$==6?(dn.removeAttribute("ws-onafterrender"),de(dn,bd.OnAfterRender(dp[1].$1))):dp[1].$==7?(dn.removeAttribute("ws-onafterrender"),de(dn,bd.OnAfterRender(dp[1].$1))):c6.warn("onafterrender hole filled with non-onafterrender data",_do):void 0;});b7.IterSelector(c_,"[ws-var]",function(dn){var _do,dp,dq;_do=dn.getAttribute("ws-var");dn.removeAttribute("ws-var");dp=(dq=null,[dk.TryGetValue(_do,{get:function(){return dq;},set:function(dr){dq=dr;}}),dq]);dp[0]?dp[1].$==8?de(dn,bd.Value(dp[1].$1)):dp[1].$==9?de(dn,bd.Checked(dp[1].$1)):dp[1].$==10?de(dn,bd.IntValue(dp[1].$1)):dp[1].$==11?de(dn,bd.IntValueUnchecked(dp[1].$1)):dp[1].$==12?de(dn,bd.FloatValue(dp[1].$1)):dp[1].$==13?de(dn,bd.FloatValueUnchecked(dp[1].$1)):c6.warn("Var hole filled with non-Var data",_do):void 0;});b7.IterSelector(c_,"[ws-attr-holes]",function(dn){var _do,dp,dq,dr;_do=new a.RegExp(bZ.TextHoleRE(),"g");dp=A.SplitChars(dn.getAttribute("ws-attr-holes"),[" "],1);dn.removeAttribute("ws-attr-holes");for(dq=0,dr=dp.length-1;dq<=dr;dq++)(function(){var ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE;dB=s.get(dp,dq);dC=dn.getAttribute(dB);ds=null;dt=0;dD=[];while(ds=_do.exec(dC),ds!==null){dE=B.string(dC,{$:1,$0:dt},{$:1,$0:_do.lastIndex-s.get(ds,0).length-1});dt=_do.lastIndex;dD.push([dE,s.get(ds,1)]);}dv=B.string(dC,{$:1,$0:dt},null);_do.lastIndex=0;dw=s.foldBack(function(dF,dG){return(function(dH){var dI,dJ;dI=dH[0];dJ=dH[1];return function(dK){var dL,dM,dN,dO,dP;dL=dK[0];dM=dK[1];dN=(dO=(dP=null,[dk.TryGetValue(dJ,{get:function(){return dP;},set:function(dQ){dP=dQ;}}),dP]),dO[0]?dO[1].$==1?{$:0,$0:dO[1].$1}:dO[1].$==2?{$:1,$0:dO[1].$1}:dO[1].$==8?{$:1,$0:dO[1].$1.get_View()}:dO[1].$==9?{$:1,$0:T.Map(a.String,dO[1].$1.get_View())}:dO[1].$==10?{$:1,$0:T.Map(function(dQ){return dQ.get_Input();},dO[1].$1.get_View())}:dO[1].$==11?{$:1,$0:T.Map(a.String,dO[1].$1.get_View())}:dO[1].$==12?{$:1,$0:T.Map(function(dQ){return dQ.get_Input();},dO[1].$1.get_View())}:dO[1].$==13?{$:1,$0:T.Map(a.String,dO[1].$1.get_View())}:(c6.warn("Attribute value hole filled with non-text data",dJ),{$:0,$0:""}):{$:0,$0:""});return dN.$==1?[dI,new r({$:1,$0:dL===""?dN.$0:T.Map(function(dQ){return dQ+dL;},dN.$0),$1:dM})]:[dI+dN.$0+dL,dM];};}(dF))(dG);},dD,[dv,r.Empty]);return de(dn,dw[1].$==1?dw[1].$1.$==1?dw[1].$1.$1.$==1?dw[1].$1.$1.$1.$==0?(dx=dw[0],bd.Dynamic(dB,T.Map3(function(dF,dG,dH){return dx+dF+dG+dH;},dw[1].$0,dw[1].$1.$0,dw[1].$1.$1.$0))):(dy=dw[0],bd.Dynamic(dB,T.Map(function(dF){return dy+A.concat("",dF);},T.Sequence(dw[1])))):(dz=dw[0],bd.Dynamic(dB,T.Map2(function(dF,dG){return dz+dF+dG;},dw[1].$0,dw[1].$1.$0))):dw[0]===""?bd.Dynamic(dB,dw[1].$0):(dA=dw[0],bd.Dynamic(dB,T.Map(function(dF){return dA+dF;},dw[1].$0))):bc.Create(dB,dw[0]));}());});return[c5.DeleteEmptyFields({Els:da,Dirty:true,Holes:dg,Attrs:di,Render:(db=dj.length==0?null:{$:1,$0:function(dn){s.iter(function(_do){_do(dn);},dj);}},db?db.$0:void 0),El:(dc=!D.Equals(da,null)&&da.length===1&&(s.get(da,0)instanceof bb&&(s.get(da,0)instanceof a.Element&&(dd=s.get(da,0),true)))?{$:1,$0:dd}:null,dc?dc.$0:void 0)},["Render","El"]),bL.TreeReduce(T.Const(),T.Map2Unit,dh)];};bZ.PrepareSingleTemplate=function(c_,c$,da){var db,dc,dd;db=bZ.FakeRootSingle(da);dc=[da];dd={$:1,$0:db};return function(de){bZ.PrepareTemplateStrict(c_,c$,dc,dd,de);};};bZ.TextHoleRE=function(){cq.$cctor();return cq.TextHoleRE;};b0.MapLens=function(c_,c$,da){function db(dd,de){return c$(dd,da.Lens(dd));}function dc(dd,de){return s.filter(de,dd);}return c_!=null&&c_.$==1?T.MapSeqCachedViewBy(da.key,db,(((c5.Curried3(T.Map2))(dc))(da["var"].get_View()))(c_.$0)):T.MapSeqCachedViewBy(da.key,db,da["var"].get_View());};b0.refreshLM=function(c_,c$){var da;c_.AppendMany(c$);da=new bf.New(q.map(c_.key,c$));q.iter(function(db){if(!da.Contains(c_.key(db)))c_.RemoveByKey(c_.key(db));},q.cache(c_));};b1.B={$:0};b2.New=function(c_,c$){return{f:c_,p:c$};};b4.Id=function(){b4.set_counter(b4.counter()+1);return"uid"+a.String(b4.counter());};b4.Int=function(){b4.set_counter(b4.counter()+1);return b4.counter();};b4.set_counter=function(c_){cr.$cctor();cr.counter=c_;};b4.counter=function(){cr.$cctor();return cr.counter;};b6.New=function(c_,c$,da,db,dc,dd){return{tmpName:c_,vars:c$,views:da,docs:db,actions:dc,attrs:dd};};b7.CreateElement=function(c_){return b7.Doc().createElement(c_);};b7.SetAttr=function(c_,c$,da){c_.setAttribute(c$,da);};b7.RemoveAttr=function(c_,c$){c_.removeAttribute(c$);};b7.CreateText=function(c_){return b7.Doc().createTextNode(c_);};b7.SetStyle=function(c_,c$,da){b7.SetProperty(c_.style,c$,da);};b7.Doc=function(){cv.$cctor();return cv.Doc;};b7.SetProperty=function(c_,c$,da){return c_.setProperty(c$,da);};b7.ChildrenArray=function(c_){var c$,da,db;c$=[];for(da=0,db=c_.childNodes.length-1;da<=db;da++)c$.push(c_.childNodes[da]);return c$;};b7.IterSelector=function(c_,c$,da){var db,dc,dd;db=c_.querySelectorAll(c$);for(dc=0,dd=db.length-1;dc<=dd;dc++)da(db[dc]);};b7.RemoveClass=function(c_,c$){var da;b7.setClass(c_,(da=b7.clsRE(c$),b7.getClass(c_).replace(da,function(db,dc,dd){return dc===""||dd===""?"":" ";})));};b7.AddClass=function(c_,c$){var da;da=b7.getClass(c_);da===""?b7.setClass(c_,c$):!b7.clsRE(c$).test(da)?b7.setClass(c_,da+" "+c$):void 0;};b7.InsertAt=function(c_,c$,da){var db;if(!(da.parentNode===c_&&c$===(db=da.nextSibling,D.Equals(db,null)?null:db)))c_.insertBefore(da,c$);};b7.setClass=function(c_,c$){if(c_ instanceof a.SVGElement)c_.setAttribute("class",c$);else c_.className=c$;};b7.getClass=function(c_){return c_ instanceof a.SVGElement?c_.getAttribute("class"):c_.className;};b7.clsRE=function(c_){return new a.RegExp("(\\s+|^)"+c_+"(?:\\s+"+c_+")*(\\s+|$)","g");};b7.RemoveNode=function(c_,c$){if(c$.parentNode===c_)c_.removeChild(c$);};b9=b8.Hoverable=c5.Class({Content:function(c_){return c_.on("mouseenter",function(){return b7.AddClass(c_.elt,"hovering");}).on("mouseleave",function(){return b7.RemoveClass(c_.elt,"hovering");});}},null,b9);b9.New$1=function(){return b9.New(Q.Create$1(false));};b9.New=function(c_){return new b9({hover:c_});};b_=g.CancellationTokenSource=c5.Class({Cancel$1:function(){var c_;if(!this.c){this.c=true;c_=s.choose(function(c$){try{c$();return null;}catch(da){return{$:1,$0:da};}},this.r);if(s.length(c_)>0)throw new ck.New$3(c_);else void 0;}}},t,b_);b_.New=c5.Ctor(function(){t.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},b_);bF.Obsolete=function(c_){var c$,da,db,dc,dd;da=c_.s;if(da==null||(da!=null&&da.$==2?(c$=da.$1,false):da!=null&&da.$==3?(c$=da.$1,false):true))void 0;else{c_.s=null;for(db=0,dc=s.length(c$)-1;db<=dc;db++){dd=s.get(c$,db);typeof dd=="object"?function(de){bF.Obsolete(de);}(dd):dd();}}};bF.New=function(c_){return{s:c_};};b$.InMemory=function(c_){return new cn.New(c_);};ca=L.CheckedInput=c5.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,ca);cb.alreadyAdded=function(){return h.FailWith("An item with the same key has already been added.");};cb.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};cc.$cctor=function(){cc.$cctor=a.ignore;cc.EmptyAttr=null;};cd=L.DynamicAttrNode=c5.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(c_){return cw.get_Empty();},NGetEnterAnim:function(c_){return cw.get_Empty();},NGetChangeAnim:function(c_){return cw.get_Empty();},NSync:function(c_){if(this.dirty){(this.push(c_))(this.value);this.dirty=false;}}},t,cd);cd.New=c5.Ctor(function(c_,c$){var da;da=this;t.New.call(this);this.push=c$;this.value=void 0;this.dirty=false;this.updates=T.Map(function(db){da.value=db;da.dirty=true;},c_);},cd);ce.New=function(c_,c$,da,db,dc){return{Node:c_,Left:c$,Right:da,Height:db,Count:dc};};cf=L.DocElemNode=c5.Class({Equals:function(c_){return this.ElKey===c_.ElKey;},GetHashCode:function(){return this.ElKey;}},null,cf);cf.New=function(c_,c$,da,db,dc,dd){var de;return new cf((de={Attr:c_,Children:c$,El:db,ElKey:dc},(c5.SetOptional(de,"Delimiters",da),c5.SetOptional(de,"Render",dd),de)));};cg.$cctor=function(){cg.$cctor=a.ignore;function c_(c$,da){var db;db=c$.button;return db===0?Q.Set(bn.MouseBtnSt$1().Left,da):db===1?Q.Set(bn.MouseBtnSt$1().Middle,da):db===2?Q.Set(bn.MouseBtnSt$1().Right,da):null;}cg.MousePosSt=bU.New(false,Q.Create$1([0,0]));cg.MouseBtnSt=bV.New(false,Q.Create$1(false),Q.Create$1(false),Q.Create$1(false));cg.ActivateButtonListener=!bn.MouseBtnSt$1().Active?(bn.MouseBtnSt$1().Active=true,self.document.addEventListener("mousedown",function(c$){return c_(c$,true);},false),self.document.addEventListener("mouseup",function(c$){return c_(c$,false);},false)):null;cg.KeyListenerState=bW.New(Q.Create$1(r.Empty),false,Q.Create$1(-1));cg.ActivateKeyListener=!bn.KeyListenerState().KeyListenerActive?(c9(self.document).keydown(function(c$){var da,db;da=c$.which;Q.Set(bn.KeyListenerState().LastPressed,da);db=bn.KeyListenerState().KeysPressed.Get();return!n.exists(function(dc){return dc===da;},db)?bn.KeyListenerState().KeysPressed.Set(n.append(db,n.ofArray([da]))):null;}),void c9(self.document).keyup(function(c$){var da;function db(dc){return dc!==da;}da=c$.which;return Q.Update(bn.KeyListenerState().KeysPressed,function(dc){return n.filter(db,dc);});})):null;};ch.addResizeObserver=function(c_,c$){var da,db,dc,dd;try{da=!(!a.ResizeObserver);}catch(de){da=false;}if(da){db=new a.ResizeObserver(c_);ch.set_observers(new r({$:1,$0:db,$1:ch.observers()}));db.observe(c$);}else{dc=ch.dimsChanged(c$);cl.Start((dd=null,cl.Delay(function(){return cl.While(function(){return c$.isConnected;},cl.Delay(function(){return cl.Bind(cl.Sleep(110),function(){return dc()?(c_(),cl.Zero()):cl.Zero();});}));})),null);}};ch.set_observers=function(c_){p.$cctor();p.observers=c_;};ch.observers=function(){p.$cctor();return p.observers;};ch.dimsChanged=function(c_){var c$;c$=[c_.getBoundingClientRect()];return function(){var da;da=c_.getBoundingClientRect();return D.Equals(ch.domRect2Tuple(c$[0]),ch.domRect2Tuple(da))?false:(c$[0]=da,true);};};ch.domRect2Tuple=function(c_){return[c_.top,c_.left,c_.width,c_.height];};ci=L.Elt=c5.Class({on:function(c_,c$){var da;da=this;this.elt.addEventListener(c_,function(db){return c$(da.elt,db);},false);return this;}},M,ci);ci.New=function(c_,c$,da){var db,dc;db=bR.CreateElemNode(c_,c$,da.docNode);dc=cu.Create(da.updates);return new ci.New$1({$:1,$0:db},T.Map2Unit(bO.Updates(db.Attr),dc.v),c_,dc);};ci.TreeNode=function(c_,c$){var da,db;function dc(dd){return dd[1];}da=cu.Create(c$);return new ci.New$1({$:6,$0:c_},T.Map2Unit((db=s.map(function(dd){return bO.Updates(dc(dd));},c_.Attrs),bL.TreeReduce(T.Const(),T.Map2Unit,db)),da.v),s.get(c_.Els,0),da);};ci.New$1=c5.Ctor(function(c_,c$,da,db){M.New.call(this,c_,c$);this.docNode$1=c_;this.updates$1=c$;this.elt=da;this.rvUpdates=db;},ci);ck=g.AggregateException=c5.Class({},cj,ck);ck.New$3=c5.Ctor(function(c_){ck.New$4.call(this,"One or more errors occurred.",c_);},ck);ck.New$4=c5.Ctor(function(c_,c$){this.message=c_;bM.setPrototypeOf(this,ck.prototype);this.innerExceptions=c$;},ck);cl.Start=function(c_,c$){var da,db;da=(db=(cl.defCTS())[0],c$==null?db:c$.$0);cl.scheduler().Fork(function(){if(!da.c)c_(cA.New(function(dc){if(dc.$==1)cl.UncaughtAsyncError(dc.$0);},da));});};cl.Delay=function(c_){return function(c$){try{(c_(null))(c$);}catch(da){c$.k({$:1,$0:da});}};};cl.Bind=function(c_,c$){return cl.checkCancel(function(da){c_(cA.New(function(db){var dc;if(db.$==0){dc=db.$0;cl.scheduler().Fork(function(){try{(c$(dc))(da);}catch(dd){da.k({$:1,$0:dd});}});}else cl.scheduler().Fork(function(){da.k(db);});},da.ct));});};cl.Sleep=function(c_){return function(c$){var da,db;da=void 0;db=void 0;da=a.setTimeout(function(){db.Dispose();cl.scheduler().Fork(function(){c$.k({$:0,$0:null});});},c_);db=cl.Register(c$.ct,function(){a.clearTimeout(da);cl.scheduler().Fork(function(){cl.cancel(c$);});});};};cl.Zero=function(){cB.$cctor();return cB.Zero;};cl.defCTS=function(){cB.$cctor();return cB.defCTS;};cl.UncaughtAsyncError=function(c_){c6.log("WebSharper: Uncaught asynchronous exception",c_);};cl.checkCancel=function(c_){return function(c$){if(c$.ct.c)cl.cancel(c$);else c_(c$);};};cl.Register=function(c_,c$){var da;return c_===cl.noneCT()?{Dispose:function(){return null;}}:(da=c_.r.push(c$)-1,{Dispose:function(){return s.set(c_.r,da,a.ignore);}});};cl.cancel=function(c_){c_.k({$:2,$0:new cL.New(c_.ct)});};cl.While=function(c_,c$){return c_()?cl.Bind(c$,function(){return cl.While(c_,c$);}):cl.Return();};cl.scheduler=function(){cB.$cctor();return cB.scheduler;};cl.noneCT=function(){cB.$cctor();return cB.noneCT;};cl.Return=function(c_){return function(c$){c$.k({$:0,$0:c_});};};cl.FromContinuations=function(c_){return function(c$){var da;function db(dc){if(da[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{da[0]=true;cl.scheduler().Fork(dc);}}da=[false];c_(function(dc){db(function(){c$.k({$:0,$0:dc});});},function(dc){db(function(){c$.k({$:1,$0:dc});});},function(dc){db(function(){c$.k({$:2,$0:dc});});});};};cn=b$.ArrayStorage=c5.Class({SSetAt:function(c_,c$,da){s.set(da,c_,c$);return da;},SAppend:function(c_,c$){c$.push(c_);return c$;},SRemoveIf:function(c_,c$){return s.filter(function(da){return!c_(da);},c$);},SAppendMany:function(c_,c$){var da;da=bL.ofSeqNonCopying(c_);c$.push.apply(c$,da);return c$;}},t,cn);cn.New=c5.Ctor(function(c_){t.New.call(this);this.init=c_;},cn);cp.New=function(c_,c$,da,db){var dc;dc={DynElem:c_,DynFlags:c$,DynNodes:da};c5.SetOptional(dc,"OnAfterRender",db);return dc;};cq.$cctor=function(){cq.$cctor=a.ignore;cq.LoadedTemplates=new bG.New$5();cq.LocalTemplatesLoaded=false;cq.TextHoleRE="\\${([^}]+)}";};cr.$cctor=function(){cr.$cctor=a.ignore;cr.counter=0;};cs.New=function(c_,c$){return{lytName:c_,lytDefinition:c$};};ct=g.FormatException=c5.Class({},cj,ct);ct.New$1=c5.Ctor(function(c_){this.message=c_;bM.setPrototypeOf(this,ct.prototype);},ct);cu=L.Updates=c5.Class({},null,cu);cu.Create=function(c_){var c$;c$=null;c$=cu.New(c_,null,function(){var da;da=c$.s;return da===null?(da=bF.Copy(c$.c()),c$.s=da,bF.WhenObsoleteRun(da,function(){c$.s=null;}),da):da;});return c$;};cu.New=function(c_,c$,da){return new cu({c:c_,s:c$,v:da});};cv.$cctor=function(){cv.$cctor=a.ignore;cv.Doc=self.document;};cw.get_UseAnimations=function(){return cI.UseAnimations();};cw.Play=function(c_){var c$;c$=null;return cl.Delay(function(){return cl.Bind(cw.Run(a.ignore,cI.Actions(c_)),function(){cI.Finalize(c_);return cl.Return(null);});});};cw.Append=function(c_,c$){return{$:0,$0:cR.Append(c_.$0,c$.$0)};};cw.Run=function(c_,c$){var da;function db(dc){function dd(de,df){var dg;dg=df-de;c$.Compute(dg);c_();return dg<=da?void a.requestAnimationFrame(function(dh){dd(de,dh);}):dc();}a.requestAnimationFrame(function(de){dd(de,de);});}da=c$.Duration;return da===0?cl.Zero():cl.FromContinuations(function(dc,dd,de){return db.apply(null,[dc,dd,de]);});};cw.Concat=function(c_){return{$:0,$0:cR.Concat(q.map(cI.List,c_))};};cw.get_Empty=function(){return{$:0,$0:cR.Empty()};};cx.BatchUpdatesEnabled=function(){cJ.$cctor();return cJ.BatchUpdatesEnabled;};cy.StartProcessor=function(c_){var c$;function da(){var db;db=null;return cl.Delay(function(){return cl.Bind(c_,function(){var dc;dc=c$[0];return dc===1?(c$[0]=0,cl.Zero()):dc===2?(c$[0]=1,da()):cl.Zero();});});}c$=[0];return function(){var db;db=c$[0];db===0?(c$[0]=1,cl.Start(da(),null)):db===1?c$[0]=2:void 0;};};cz.New=function(c_,c$){return{c:c_,r:c$};};cA.New=function(c_,c$){return{k:c_,ct:c$};};cB.$cctor=function(){cB.$cctor=a.ignore;cB.noneCT=cz.New(false,[]);cB.scheduler=new cK.New();cB.defCTS=[new b_.New()];cB.Zero=cl.Return();cB.GetCT=function(c_){c_.k({$:0,$0:c_.ct});};};cC.convertTextNode=function(c_){var c$,da,db,dc,dd,de;c$=null;da=0;dc=c_.textContent;dd=new a.RegExp(bZ.TextHoleRE(),"g");while(c$=dd.exec(dc),c$!==null){c_.parentNode.insertBefore(self.document.createTextNode(B.string(dc,{$:1,$0:da},{$:1,$0:dd.lastIndex-s.get(c$,0).length-1})),c_);da=dd.lastIndex;de=self.document.createElement("span");de.setAttribute("ws-replace",s.get(c$,1).toLowerCase());c_.parentNode.insertBefore(de,c_);}dd.lastIndex=0;c_.textContent=B.string(dc,{$:1,$0:da},null);};cC.failNotLoaded=function(c_){c6.warn("Instantiating non-loaded template",c_);};cC.fillTextHole=function(c_,c$,da){var db;db=c_.querySelector("[ws-replace]");return D.Equals(db,null)?(c6.warn("Filling non-existent text hole",da),null):(db.parentNode.replaceChild(new a.Text(c$),db),{$:1,$0:db.getAttribute("ws-replace")});};cC.removeHolesExcept=function(c_,c$){function da(db){b7.IterSelector(c_,"["+db+"]",function(dc){if(!c$.Contains(dc.getAttribute(db)))dc.removeAttribute(db);});}da("ws-attr");da("ws-onafterrender");da("ws-var");b7.IterSelector(c_,"[ws-hole]",function(db){if(!c$.Contains(db.getAttribute("ws-hole"))){db.removeAttribute("ws-hole");while(db.hasChildNodes())db.removeChild(db.lastChild);}});b7.IterSelector(c_,"[ws-replace]",function(db){if(!c$.Contains(db.getAttribute("ws-replace")))db.parentNode.removeChild(db);});b7.IterSelector(c_,"[ws-on]",function(db){db.setAttribute("ws-on",A.concat(" ",s.filter(function(dc){return c$.Contains(s.get(A.SplitChars(dc,[":"],1),1));},A.SplitChars(db.getAttribute("ws-on"),[" "],1))));});b7.IterSelector(c_,"[ws-attr-holes]",function(db){var dc,dd,de,df,dg;dc=A.SplitChars(db.getAttribute("ws-attr-holes"),[" "],1);for(dd=0,de=dc.length-1;dd<=de;dd++){df=s.get(dc,dd);db.setAttribute(df,(dg=new a.RegExp(bZ.TextHoleRE(),"g"),db.getAttribute(df).replace(dg,function(dh,di){return c$.Contains(di)?dh:"";})));}});};cC.fillInstanceAttrs=function(c_,c$){var da,db,dc,dd,de;cC.convertAttrs(c$);da=c$.nodeName.toLowerCase();db=c_.querySelector("[ws-attr="+da+"]");if(D.Equals(db,null))c6.warn("Filling non-existent attr hole",da);else{db.removeAttribute("ws-attr");for(dc=0,dd=c$.attributes.length-1;dc<=dd;dc++){de=c$.attributes.item(dc);de.name==="class"&&db.hasAttribute("class")?db.setAttribute("class",db.getAttribute("class")+" "+de.nodeValue):db.setAttribute(de.name,de.nodeValue);}}};cC.mapHoles=function(c_,c$){function da(db){b7.IterSelector(c_,"["+db+"]",function(dc){var dd,de;dd=(de=null,[c$.TryGetValue(dc.getAttribute(db).toLowerCase(),{get:function(){return de;},set:function(df){de=df;}}),de]);dd[0]?dc.setAttribute(db,dd[1]):void 0;});}da("ws-hole");da("ws-replace");da("ws-attr");da("ws-onafterrender");da("ws-var");b7.IterSelector(c_,"[ws-on]",function(db){db.setAttribute("ws-on",A.concat(" ",s.map(function(dc){var dd,de,df;dd=A.SplitChars(dc,[":"],1);de=(df=null,[c$.TryGetValue(s.get(dd,1),{get:function(){return df;},set:function(dg){df=dg;}}),df]);return de[0]?s.get(dd,0)+":"+de[1]:dc;},A.SplitChars(db.getAttribute("ws-on"),[" "],1))));});b7.IterSelector(c_,"[ws-attr-holes]",function(db){var dc,dd,de;dc=A.SplitChars(db.getAttribute("ws-attr-holes"),[" "],1);for(dd=0,de=dc.length-1;dd<=de;dd++)(function(){var df;function dg(dh,di){var dj;dj=h.KeyValue(di);return dh.replace(new a.RegExp("\\${"+dj[0]+"}","ig"),"${"+dj[1]+"}");}df=s.get(dc,dd);return db.setAttribute(df,(((c5.Curried3(q.fold))(dg))(db.getAttribute(df)))(c$));}());});};cC.fill=function(c_,c$,da){while(true)if(c_.hasChildNodes())da=c$.insertBefore(c_.lastChild,da);else return null;};cC.convertAttrs=function(c_){var da,db,dc,dd,de,df,dg,dh;function c$(di){var dj;dj=c_.getAttribute(di);dj===null?void 0:c_.setAttribute(di,dj.toLowerCase());}da=c_.attributes;db=[];dc=[];dd=[];for(de=0,df=da.length-1;de<=df;de++){dg=da.item(de);A.StartsWith(dg.nodeName,"ws-on")&&dg.nodeName!=="ws-onafterrender"&&dg.nodeName!=="ws-on"?(db.push(dg.nodeName),dc.push(B.string(dg.nodeName,{$:1,$0:"ws-on".length},null)+":"+dg.nodeValue.toLowerCase())):!A.StartsWith(dg.nodeName,"ws-")&&(new a.RegExp(bZ.TextHoleRE())).test(dg.nodeValue)?(dg.nodeValue=(dh=new a.RegExp(bZ.TextHoleRE(),"g"),dg.nodeValue.replace(dh,function(di,dj){return"${"+dj.toLowerCase()+"}";})),dd.push(dg.nodeName)):void 0;}!(dc.length==0)?c_.setAttribute("ws-on",A.concat(" ",dc)):void 0;!(dd.length==0)?c_.setAttribute("ws-attr-holes",A.concat(" ",dd)):void 0;c$("ws-hole");c$("ws-replace");c$("ws-attr");c$("ws-onafterrender");c$("ws-var");s.iter(function(di){c_.removeAttribute(di);},db);};cD=be.KeyCollection=c5.Class({GetEnumerator$1:function(){return bz.Get(q.map(function(c_){return c_.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},t,cD);cD.New=c5.Ctor(function(c_){t.New.call(this);this.d=c_;},cD);b5.createEntryO2=function(c_,c$){function da(df,dg){return c$.ContainsKey(df)?((w.errorf(c5.Curried3(function(dh,di,dj){return dh("Already exists "+_6.toSafe(di)+" : "+_2.p$2(dj)+" ");})))(df))(dg):(c$.Add(df,dg),{$:0,$0:null});}function db(df,dg){return cN.Map(function(){return[df,dg];},da(df,dg));}function dc(df,dg){return cN.Bind(function(){return{$:1,$0:df};},da(q.head(A.SplitChars(dg,[" ","\u0009"],1)),{$:0,$0:{$:6,$0:{$:0,$0:"div",$1:{$:0,$0:r.Empty},$2:n.ofArray([{$:0,$0:n.ofArray([{$:0,$0:df}])}])}}}));}function dd(df){try{return c$.get_Item(df);}catch(dg){return(function(dh){return function(di){return dh("Could not find reference to "+_6.toSafe(di));};}(h.FailWith))(df);}}function de(df){var dg,dh,di,dj,dk,dl,dm,dn;if(df.$==1){dh=df.$1;di=df.$0;try{dk=dd(di);if(dk.$==6)try{dj=dk.$0.$0.get_Item(dh);}catch(_do){dj=(((c5.Curried3(function(dp,dq,dr){return dp("Could not find reference to "+_6.toSafe(dq)+"."+_6.toSafe(dr));}))(h.FailWith))(di))(dh);}else dj=(function(dp){return function(dq){return dp("PlugIn not registered: "+_2.p$1(dq));};}(h.FailWith))(df);return[dj,null];}catch(dp){dl=O.tryGetPlugIn(new R({$:0,$0:di}));return dl!=null&&dl.$==1?(dm=dl.$0,dn=new bm({$:0,$0:dh}),[dm.plgDocs.ContainsKey(dn)?cP.RDoc:dm.plgActions.ContainsKey(dn)?cP.RAct:dm.plgVars.ContainsKey(dn)?cP.RVar:dm.plgViews.ContainsKey(dn)?cP.RViw:(((c5.Curried3(function(dq,dr,ds){return dq("Could not find reference to "+_6.toSafe(dr)+"."+_6.toSafe(ds));}))(h.FailWith))(di))(dh),null]):h.FailWith(dp.message);}}else{dg=dd(df.$0);return[dg.$==1?cP.RAct:dg.$==2?cP.RAct:dg.$==3?cP.RVar:dg.$==4?cP.RViw:dg.$==5?cP.RViw:dg.$==7?cP.RPlg:dg.$==6?(function(dq){return function(dr){return dq("PlugIn should not be referenced by itself: "+_2.p$1(dr));};}(h.FailWith))(df):cP.RDoc,{$:1,$0:dg}];}}return function(df){var dg,dh;try{dg=(dh=b5.createEntryO(de,c_,df),dh==null?dc((function(di){return function(dj){return di("Line not matched!: "+_6.toSafe(dj));};}(a.id))(df),df):db(dh.$0.$0,dh.$0.$1));}catch(di){dg=dc(di.message,df);}return{$:1,$0:dg};};};b5.createEntryO=function(c_,c$,da){var db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er;function es(eM){var eN,eO;eN=b5.R(eM);return eN!=null&&eN.$==1?(eO=eN.$0,{$:1,$0:[c_(eO),eO]}):null;}function et(eM){var eN,eO;return(eO=es(eM),eO!=null&&eO.$==1&&(eO.$0[0][0].$==0&&(eN=eO.$0[1],true)))?{$:1,$0:{$:0,$0:eN}}:null;}function eu(eM){var eN,eO;return(eO=es(eM),eO!=null&&eO.$==1&&(eO.$0[0][0].$==1&&(eN=eO.$0[1],true)))?{$:1,$0:{$:0,$0:eN}}:null;}function ev(eM){var eN,eO;return(eO=es(eM),eO!=null&&eO.$==1&&(eO.$0[0][0].$==2&&(eN=eO.$0[1],true)))?{$:1,$0:{$:0,$0:eN}}:null;}function ew(eM){var eN,eO;return(eO=es(eM),eO!=null&&eO.$==1&&(eO.$0[0][0].$==3&&(eN=eO.$0[1],true)))?{$:1,$0:{$:0,$0:eN}}:null;}function ex(eM){var eN,eO,eP;return(eO=es(eM),eO!=null&&eO.$==1&&(eO.$0[0][0].$==4&&((eP=eO.$0[0][1],eP!=null&&eP.$==1)&&(eO.$0[0][1].$0.$==7&&(eN=[eO.$0[0][1].$0.$0,eO.$0[1]],true)))))?{$:1,$0:eN[0]}:null;}function ey(eM){var eN,eO;return(eO=b5.R(eM),eO!=null&&eO.$==1&&(eO.$0.$==0&&(eN=eO.$0.$0,true)))?{$:1,$0:eN}:null;}function ez(eM){var eN,eO;return(eO=ey(eM),eO!=null&&eO.$==1&&(A.StartsWith(eO.$0,"_")&&(eN=eO.$0,true)))?{$:1,$0:eN}:null;}function eA(eM){var eN,eO,eP;eN=eu(eM);return eN!=null&&eN.$==1?{$:1,$0:{$:1,$0:eN.$0}}:(eO=ev(eM),eO!=null&&eO.$==1?{$:1,$0:{$:2,$0:eO.$0}}:(eP=ew(eM),eP!=null&&eP.$==1?{$:1,$0:{$:3,$0:eP.$0}}:null));}function eB(eM){var eN;eN=z.delimitedO("@{","}",eM);return eN!=null&&eN.$==1?{$:1,$0:[eN.$0[0],{$:1,$0:eN.$0[1]},eN.$0[2]]}:null;}function eC(eM){var eN,eO,eP,eQ,eR,eS,eT,eU;return(eO=eB(eM),eO!=null&&eO.$==1&&(eP=eA(eO.$0[1]),eP!=null&&eP.$==1&&(eN=[eO.$0[2],eO.$0[0],eP.$0],true)))?(eQ=eN[0],(eR=eN[1],(eS=eR===""?n.ofArray([eN[2]]):n.ofArray([{$:0,$0:eR},eN[2]]),eQ===""?{$:1,$0:eS}:(eT=eC(eQ),eT!=null&&eT.$==1?{$:1,$0:n.append(eS,eT.$0)}:null)))):(eU=eB(eM),eU!=null&&eU.$==1)?null:{$:1,$0:n.ofArray([{$:0,$0:eM}])};}function eD(eM){var eN,eO,eP;return(eO=eB(eM),eO!=null&&eO.$==1&&(eP=ew(eO.$0[1]),eP!=null&&eP.$==1&&(A.Trim(eO.$0[0])===""&&A.Trim(eO.$0[2])===""&&(eN=[eO.$0[2],eP.$0,eO.$0[0]],true))))?{$:1,$0:eN[1]}:null;}function eE(eM){var eN,eO;return eM.$==0&&(eO=eC(eM.$0),eO!=null&&eO.$==1&&(eN=eO.$0,true))?{$:1,$0:eN}:null;}function eF(eM){return eM.$==0?{$:1,$0:s.ofSeq(q.choose(function(eN){var eO,eP,eQ,eR,eS,eT,eU,eV;eO=(bw.splitInTwo("="))(eN);return!D.Equals(eO,null)&&eO.length===2&&(eQ=eD(s.get(eO,1)),eQ!=null&&eQ.$==1&&(eP=[eQ.$0,s.get(eO,0)],true))?{$:1,$0:{$:2,$0:A.Trim(eP[1]),$1:eP[0]}}:!D.Equals(eO,null)&&eO.length===2&&(eS=eC(s.get(eO,1)),eS!=null&&eS.$==1&&(eR=[s.get(eO,0),eS.$0],true))?{$:1,$0:{$:1,$0:A.Trim(eR[0]),$1:eR[1]}}:(eT=(bw.splitInTwo(":"))(eN),!D.Equals(eT,null)&&eT.length===2&&(eV=eC(s.get(eT,1)),eV!=null&&eV.$==1&&(eU=[s.get(eT,0),eV.$0],true))?{$:1,$0:{$:0,$0:A.Trim(eU[0]),$1:eU[1]}}:(function(eW){return function(eX){return eW("Attributes should be like: \"name=val\" or \"name:val\" and separated by ';' : "+_6.toSafe(eX));};}(h.FailWith))(eN));},(bw.splitSemiColon())(eM.$0)))}:null;}function eG(eM){var eN,eO,eP,eQ,eR;eN=eE(eM);return eN!=null&&eN.$==1?{$:1,$0:{$:0,$0:eN.$0}}:(eO=et(eM),eO!=null&&eO.$==1?{$:1,$0:{$:1,$0:eO.$0}}:(eP=eu(eM),eP!=null&&eP.$==1?{$:1,$0:{$:2,$0:eP.$0}}:(eQ=ev(eM),eQ!=null&&eQ.$==1?{$:1,$0:{$:3,$0:eQ.$0}}:(eR=ew(eM),eR!=null&&eR.$==1?{$:1,$0:{$:4,$0:eR.$0}}:null))));}function eH(eM){var eN,eO,eP;switch(eM.$==1?(eO=eG(eM.$0),eO!=null&&eO.$==1?(eP=eH(eM.$1),eP!=null&&eP.$==1?(eN=[eO.$0,eP.$0],1):2):2):0){case 0:return{$:1,$0:r.Empty};case 1:return{$:1,$0:new r({$:1,$0:eN[0],$1:eN[1]})};case 2:return null;}}function eI(eM){var eN,eO,eP;switch(eM.$==1?(eO=ew(eM.$0),eO!=null&&eO.$==1?(eP=eI(eM.$1),eP!=null&&eP.$==1?(eN=[eO.$0,eP.$0],1):2):2):0){case 0:return{$:1,$0:r.Empty};case 1:return{$:1,$0:new r({$:1,$0:eN[0],$1:eN[1]})};case 2:return null;}}function eJ(eM){var eN,eO,eP,eQ;eN=eE(eM);return eN!=null&&eN.$==1?{$:1,$0:{$:0,$0:eN.$0}}:(eO=et(eM),eO!=null&&eO.$==1?{$:1,$0:{$:1,$0:eO.$0}}:(eP=eu(eM),eP!=null&&eP.$==1?{$:1,$0:{$:2,$0:eP.$0}}:(eQ=ev(eM),eQ!=null&&eQ.$==1?{$:1,$0:{$:3,$0:eQ.$0}}:null)));}function eK(eM){var eN,eO,eP;switch(eM.$==1?(eO=eJ(eM.$0),eO!=null&&eO.$==1?(eP=eK(eM.$1),eP!=null&&eP.$==1?(eN=[eO.$0,eP.$0],1):2):2):0){case 0:return{$:1,$0:r.Empty};case 1:return{$:1,$0:new r({$:1,$0:eN[0],$1:eN[1]})};case 2:return null;}}function eL(eM){var eN,eO,eP;switch(eM.$==1?(eO=ex(eM.$0),eO!=null&&eO.$==1?(eP=eL(eM.$1),eP!=null&&eP.$==1?(eN=[eO.$0,eP.$0],1):2):2):0){case 0:return{$:1,$0:r.Empty};case 1:return{$:1,$0:new r({$:1,$0:eN[0],$1:eN[1]})};case 2:return null;}}db=bw.splitTokens(da);return db.$==1&&(dd=ey(db.$0),dd!=null&&dd.$==1&&(db.$1.$==1&&(bw.PlugIn(db.$1.$0).$==0&&(de=eL(db.$1.$1),de!=null&&de.$==1&&(dc=[de.$0,dd.$0],true)))))?b5.entryPlg(dc[1],{$:0,$0:new cO.New(dc[0])}):db.$==1&&(dg=ez(db.$0),dg!=null&&dg.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==1&&(db.$1.$1.$==1&&(dh=ey(db.$1.$1.$0),dh!=null&&dh.$==1&&(db.$1.$1.$1.$==0&&(df=[dg.$0,dh.$0],true)))))))?b5.entryRef(df[0],df[1],cP.RDoc):db.$==1&&(dj=ez(db.$0),dj!=null&&dj.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==0&&(db.$1.$1.$==1&&(dk=ey(db.$1.$1.$0),dk!=null&&dk.$==1&&(db.$1.$1.$1.$==0&&(di=[dj.$0,dk.$0],true)))))))?b5.entryRef(di[0],di[1],cP.RVar):db.$==1&&(dm=ez(db.$0),dm!=null&&dm.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==2&&(db.$1.$1.$==1&&(dn=ey(db.$1.$1.$0),dn!=null&&dn.$==1&&(db.$1.$1.$1.$==0&&(dl=[dm.$0,dn.$0],true)))))))?b5.entryRef(dl[0],dl[1],cP.RViw):db.$==1&&(dp=ez(db.$0),dp!=null&&dp.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==5&&(db.$1.$1.$==1&&(dq=ey(db.$1.$1.$0),dq!=null&&dq.$==1&&(db.$1.$1.$1.$==0&&(_do=[dp.$0,dq.$0],true)))))))?b5.entryRef(_do[0],_do[1],cP.RAct):db.$==1&&(ds=ey(db.$0),ds!=null&&ds.$==1&&(db.$1.$==1&&(bw.Vertical(db.$1.$0).$==0&&(db.$1.$1.$==1&&(dt=bw.Measures$1(db.$1.$1.$0),dt!=null&&dt.$==1&&(db.$1.$1.$1.$==1&&(du=et(db.$1.$1.$1.$0),du!=null&&du.$==1&&(db.$1.$1.$1.$1.$==1&&(dv=et(db.$1.$1.$1.$1.$0),dv!=null&&dv.$==1&&(db.$1.$1.$1.$1.$1.$==0&&(dr=[du.$0,dt.$0,ds.$0,dv.$0],true)))))))))))?b5.entryDoc(dr[2],{$:0,$0:{$:0,$0:true,$1:dr[1],$2:dr[0],$3:dr[3]}}):db.$==1&&(dx=ey(db.$0),dx!=null&&dx.$==1&&(db.$1.$==1&&(bw.Vertical(db.$1.$0).$==1&&(db.$1.$1.$==1&&(dy=bw.Measures$1(db.$1.$1.$0),dy!=null&&dy.$==1&&(db.$1.$1.$1.$==1&&(dz=et(db.$1.$1.$1.$0),dz!=null&&dz.$==1&&(db.$1.$1.$1.$1.$==1&&(dA=et(db.$1.$1.$1.$1.$0),dA!=null&&dA.$==1&&(db.$1.$1.$1.$1.$1.$==0&&(dw=[dz.$0,dy.$0,dx.$0,dA.$0],true)))))))))))?b5.entryDoc(dw[2],{$:0,$0:{$:0,$0:false,$1:dw[1],$2:dw[0],$3:dw[3]}}):db.$==1&&(dC=ey(db.$0),dC!=null&&dC.$==1&&(db.$1.$==1&&(bw.PlugIn(db.$1.$0).$==1&&(db.$1.$1.$==1&&(dD=ew(db.$1.$1.$0),dD!=null&&dD.$==1&&(db.$1.$1.$1.$==1&&(dE=eF(db.$1.$1.$1.$0),dE!=null&&dE.$==1&&(db.$1.$1.$1.$1.$==1&&(dF=eE(db.$1.$1.$1.$1.$0),dF!=null&&dF.$==1&&(db.$1.$1.$1.$1.$1.$==0&&(dB=[dD.$0,dE.$0,dC.$0,dF.$0],true)))))))))))?b5.entryDoc(dB[2],{$:1,$0:{$:0,$0:dB[0],$1:dB[1],$2:dB[3]}}):db.$==1&&(dH=ey(db.$0),dH!=null&&dH.$==1&&(db.$1.$==1&&(bw.PlugIn(db.$1.$0).$==2&&(db.$1.$1.$==1&&(dI=eu(db.$1.$1.$0),dI!=null&&dI.$==1&&(db.$1.$1.$1.$==1&&(dJ=eF(db.$1.$1.$1.$0),dJ!=null&&dJ.$==1&&(db.$1.$1.$1.$1.$==0&&(dG=[dJ.$0,dH.$0,dI.$0],true)))))))))?b5.entryDoc(dG[1],{$:2,$0:{$:0,$0:dG[2],$1:dG[0]}}):db.$==1&&(dL=ey(db.$0),dL!=null&&dL.$==1&&(db.$1.$==1&&(bw.PlugIn(db.$1.$0).$==3&&(db.$1.$1.$==1&&(dM=eu(db.$1.$1.$0),dM!=null&&dM.$==1&&(db.$1.$1.$1.$==1&&(dN=eF(db.$1.$1.$1.$0),dN!=null&&dN.$==1&&(db.$1.$1.$1.$1.$==0&&(dK=[dN.$0,dL.$0,dM.$0],true)))))))))?b5.entryDoc(dK[1],{$:3,$0:{$:0,$0:dK[2],$1:dK[0]}}):db.$==1&&(dP=ey(db.$0),dP!=null&&dP.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==0&&(db.$1.$1.$==1&&(dQ=(dS=eE(db.$1.$1.$0),dS!=null&&dS.$==1&&(dS.$0.$==1&&(dS.$0.$0.$==0&&(dS.$0.$1.$==0&&(dR=dS.$0.$0.$0,true)))))?{$:1,$0:dR}:null,dQ!=null&&dQ.$==1&&(db.$1.$1.$1.$==0&&(dO=[dP.$0,dQ.$0],true)))))))?b5.entryVar(dO[0],{$:0,$0:A.Trim(dO[1])}):db.$==1&&(dU=ey(db.$0),dU!=null&&dU.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==1&&(db.$1.$1.$==1&&(dV=et(db.$1.$1.$0),dV!=null&&dV.$==1&&(dW=eH(db.$1.$1.$1),dW!=null&&dW.$==1&&(dT=[dV.$0,dU.$0,dW.$0],true)))))))?b5.entryDoc(dT[1],{$:4,$0:{$:0,$0:dT[0],$1:dT[2]}}):db.$==1&&(dY=ey(db.$0),dY!=null&&dY.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==2&&(dZ=eH(db.$1.$1),dZ!=null&&dZ.$==1&&(dX=[dY.$0,dZ.$0],true)))))?b5.entryView(dX[0],{$:0,$0:dX[1]}):db.$==1&&(d1=ey(db.$0),d1!=null&&d1.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==3&&(d2=eH(db.$1.$1),d2!=null&&d2.$==1&&(d0=[d1.$0,d2.$0],true)))))?b5.entryVJS(d0[0],{$:0,$0:d0[1]}):db.$==1&&(d4=ey(db.$0),d4!=null&&d4.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==4&&(d5=eK(db.$1.$1),d5!=null&&d5.$==1&&(d3=[d4.$0,d5.$0],true)))))?b5.entryDoc(d3[0],{$:5,$0:{$:0,$0:d3[1]}}):db.$==1&&(d7=ey(db.$0),d7!=null&&d7.$==1&&(db.$1.$==1&&(bw.PlugIn(db.$1.$0).$==5&&(d8=eI(db.$1.$1),d8!=null&&d8.$==1&&(d6=[d8.$0,d7.$0],true)))))?b5.entryActs(d6[1],{$:0,$0:d6[0]}):db.$==1&&(d_=ey(db.$0),d_!=null&&d_.$==1&&(db.$1.$==1&&(bw.Var(db.$1.$0).$==5&&(db.$1.$1.$==1&&(d$=ew(db.$1.$1.$0),d$!=null&&d$.$==1&&(ea=eH(db.$1.$1.$1),ea!=null&&ea.$==1&&(d9=[d$.$0,d_.$0,ea.$0],true)))))))?b5.entryAct(d9[1],{$:0,$0:d9[0],$1:d9[2]}):db.$==1&&(ec=ey(db.$0),ec!=null&&ec.$==1&&(db.$1.$==1&&(bw.Vertical(db.$1.$0).$==4&&(db.$1.$1.$==1&&(ed=ey(db.$1.$1.$0),ed!=null&&ed.$==1&&(db.$1.$1.$1.$==1&&(ee=(ef=db.$1.$1.$1.$0,ef.$==0?{$:1,$0:s.ofSeq(q.choose(function(eM){var eN,eO,eP,eQ;eN=s.map(bw.splitTokens,(bw.splitInTwo(":"))(eM));return!D.Equals(eN,null)&&eN.length===2&&(s.get(eN,0).$==1&&(eP=ey(s.get(eN,0).$0),eP!=null&&eP.$==1&&(s.get(eN,0).$1.$==0&&(s.get(eN,1).$==1&&(eQ=eG(s.get(eN,1).$0),eQ!=null&&eQ.$==1&&(s.get(eN,1).$1.$==0&&(eO=[eP.$0,eQ.$0],true)))))))?{$:1,$0:[eO[0],eO[1]]}:(function(eR){return function(eS){return eR("Expecting Views \"name:view\" separated by ';' : "+_6.toSafe(eS));};}(h.FailWith))(eM);},(bw.splitSemiColon())(ef.$0)))}:null),ee!=null&&ee.$==1&&(db.$1.$1.$1.$1.$==1&&(eg=(eh=db.$1.$1.$1.$1.$0,eh.$==0?{$:1,$0:s.ofSeq(q.choose(function(eM){var eN,eO,eP,eQ;eN=s.map(function(eR){return{$:1,$0:eR};},(bw.splitInTwo(":"))(eM));return!D.Equals(eN,null)&&eN.length===2&&(eP=ey(s.get(eN,0)),eP!=null&&eP.$==1&&(eQ=et(s.get(eN,1)),eQ!=null&&eQ.$==1&&(eO=[eP.$0,eQ.$0],true)))?{$:1,$0:[eO[0],eO[1]]}:(function(eR){return function(eS){return eR("Expecting Docs \"name:doc\" separated by ';' : "+_6.toSafe(eS));};}(h.FailWith))(eM);},(bw.splitSemiColon())(eh.$0)))}:null),eg!=null&&eg.$==1&&(db.$1.$1.$1.$1.$1.$==1&&(ei=(ej=db.$1.$1.$1.$1.$1.$0,ej.$==0?{$:1,$0:s.ofSeq(q.choose(function(eM){var eN,eO,eP,eQ;eN=s.map(function(eR){return{$:1,$0:eR};},(bw.splitInTwo(":"))(eM));return!D.Equals(eN,null)&&eN.length===2&&(eP=ey(s.get(eN,0)),eP!=null&&eP.$==1&&(eQ=eu(s.get(eN,1)),eQ!=null&&eQ.$==1&&(eO=[eP.$0,eQ.$0],true)))?{$:1,$0:[eO[0],eO[1]]}:(function(eR){return function(eS){return eR("Expecting Vars \"name:var\" separated by ';' : "+_6.toSafe(eS));};}(h.FailWith))(eM);},(bw.splitSemiColon())(ej.$0)))}:null),ei!=null&&ei.$==1&&(db.$1.$1.$1.$1.$1.$1.$==1&&(ek=(el=db.$1.$1.$1.$1.$1.$1.$0,el.$==0?{$:1,$0:s.ofSeq(q.choose(function(eM){var eN,eO,eP,eQ;eN=s.map(bw.splitTokens,(bw.splitInTwo(":"))(eM));return!D.Equals(eN,null)&&eN.length===2&&(s.get(eN,0).$==1&&(eP=ey(s.get(eN,0).$0),eP!=null&&eP.$==1&&(s.get(eN,0).$1.$==0&&(s.get(eN,1).$==1&&(eQ=ew(s.get(eN,1).$0),eQ!=null&&eQ.$==1&&(s.get(eN,1).$1.$==0&&(eO=[eP.$0,eQ.$0],true)))))))?{$:1,$0:[eO[0],eO[1]]}:(function(eR){return function(eS){return eR("Expecting Actions \"name:action\" separated by ';' : "+_6.toSafe(eS));};}(h.FailWith))(eM);},(bw.splitSemiColon())(el.$0)))}:null),ek!=null&&ek.$==1&&(db.$1.$1.$1.$1.$1.$1.$1.$==1&&(em=eG(db.$1.$1.$1.$1.$1.$1.$1.$0),em!=null&&em.$==1&&(db.$1.$1.$1.$1.$1.$1.$1.$1.$==0&&(eb=[ek.$0,em.$0,eg.$0,ec.$0,ed.$0,ei.$0,ee.$0],true)))))))))))))))))?b5.entryDoc(eb[3],{$:7,$0:b5.templateDef(eb[4],eb[1],eb[5],eb[6],eb[2],eb[0])}):db.$==1&&(eo=ey(db.$0),eo!=null&&eo.$==1&&(db.$1.$==1&&(ep=bw.Vertical(db.$1.$0),ep.$==5&&(db.$1.$1.$==1&&(eq=eG(db.$1.$1.$0),eq!=null&&eq.$==1&&(er=eK(db.$1.$1.$1),er!=null&&er.$==1&&(en=[eq.$0,ep.$0,eo.$0,er.$0],true)))))))?b5.entryDoc(en[2],{$:6,$0:{$:0,$0:en[1],$1:en[0],$2:en[3]}}):null;};b5.R=function(c_){var c$,da,db;c$=bw.Identifier(c_);return c$!=null&&c$.$==1?(da=A.SplitChars(c$.$0,["."],0),!D.Equals(da,null)&&da.length===1?{$:1,$0:{$:0,$0:s.get(da,0)}}:!D.Equals(da,null)&&da.length===2?(db=s.get(da,1),{$:1,$0:{$:1,$0:s.get(da,0),$1:db}}):null):null;};b5.entryPlg=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:6,$0:c$})};};b5.entryRef=function(c_,c$,da){return{$:1,$0:b5.entryDef(c_,{$:7,$0:[c$,da]})};};b5.entryDoc=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:0,$0:c$})};};b5.entryVar=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:3,$0:c$})};};b5.entryView=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:4,$0:c$})};};b5.entryVJS=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:5,$0:c$})};};b5.entryActs=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:2,$0:c$})};};b5.entryAct=function(c_,c$){return{$:1,$0:b5.entryDef(c_,{$:1,$0:c$})};};b5.templateDef=function(c_,c$,da,db,dc,dd){return b6.New(c_,da,db,dc,dd,c$);};b5.entryDef=function(c_,c$){return{$:0,$0:c_,$1:c$};};cE.concat=function(c_){var c$,da;c$=[];for(var db in c_)c$.push.apply(c$,c_[db]);return c$;};cG.New=function(c_,c$){return{PreviousNodes:c_,Top:c$};};cH.get_Empty=function(){return{$:0,$0:new bJ.New$3()};};cH.FindAll=function(c_){var c$;function da(dc){if(dc!=null&&dc.$==0){da(dc.$0);da(dc.$1);}else if(dc!=null&&dc.$==1)db(dc.$0);else if(dc!=null&&dc.$==2)da(dc.$0.Current);else if(dc!=null&&dc.$==6)s.iter(db,dc.$0.Holes);}function db(dc){c$.push(dc);da(dc.Children);}c$=[];da(c_);return{$:0,$0:new bJ.New$2(c$)};};cH.Filter=function(c_,c$){return{$:0,$0:cV.Filter(c_,c$.$0)};};cH.Except=function(c_,c$){return{$:0,$0:cV.Except(c_.$0,c$.$0)};};cH.ToArray=function(c_){return cV.ToArray(c_.$0);};cH.Intersect=function(c_,c$){return{$:0,$0:cV.Intersect(c_.$0,c$.$0)};};cI.UseAnimations=function(){cQ.$cctor();return cQ.UseAnimations;};cI.Actions=function(c_){return cI.ConcatActions(s.choose(function(c$){return c$.$==1?{$:1,$0:c$.$0}:null;},cR.ToArray(c_.$0)));};cI.Finalize=function(c_){s.iter(function(c$){if(c$.$==0)c$.$0();},cR.ToArray(c_.$0));};cI.ConcatActions=function(c_){var c$,da,db,dc;c$=bL.ofSeqNonCopying(c_);da=s.length(c$);return da===0?cI.Const():da===1?s.get(c$,0):(db=q.max(q.map(function(dd){return dd.Duration;},c$)),(dc=s.map(function(dd){return cI.Prolong(db,dd);},c$),cI.Def(db,function(dd){s.iter(function(de){de.Compute(dd);},dc);})));};cI.List=function(c_){return c_.$0;};cI.Const=function(c_){return cI.Def(0,function(){return c_;});};cI.Def=function(c_,c$){return{Compute:c$,Duration:c_};};cI.Prolong=function(c_,c$){var da,db,dc;da=c$.Compute;db=c$.Duration;dc=H.Create(function(){return c$.Compute(c$.Duration);});return{Compute:function(dd){return dd>=db?dc.f():da(dd);},Duration:c_};};cJ.$cctor=function(){cJ.$cctor=a.ignore;cJ.BatchUpdatesEnabled=true;};cK=cl.Scheduler=c5.Class({Fork:function(c_){var c$;c$=this;this.robin.push(c_);this.idle?(this.idle=false,a.setTimeout(function(){c$.tick();},0)):void 0;},tick:function(){var c_,c$,da;c$=this;da=c7.now();c_=true;while(c_)if(this.robin.length===0){this.idle=true;c_=false;}else{(this.robin.shift())();c7.now()-da>40?(a.setTimeout(function(){c$.tick();},0),c_=false):void 0;}}},t,cK);cK.New=c5.Ctor(function(){t.New.call(this);this.idle=true;this.robin=[];},cK);cL=g.OperationCanceledException=c5.Class({},cj,cL);cL.New=c5.Ctor(function(c_){cL.New$1.call(this,"The operation was canceled.",null,c_);},cL);cL.New$1=c5.Ctor(function(c_,c$,da){this.message=c_;this.inner=c$;bM.setPrototypeOf(this,cL.prototype);this.ct=da;},cL);cM.Clear=function(c_){c_.splice(0,s.length(c_));};cN.Bind=function(c_,c$){return c$.$==1?{$:1,$0:c$.$0}:c_(c$.$0);};cN.Map=function(c_,c$){return c$.$==1?{$:1,$0:c$.$0}:{$:0,$0:c_(c$.$0)};};cO=be.FSharpMap=c5.Class({get_Item:function(c_){var c$;c$=this.TryFind(c_);return c$==null?h.FailWith("The given key was not present in the dictionary."):c$.$0;},TryFind:function(c_){var c$;c$=bP.TryFind(cZ.New(c_,void 0),this.tree);return c$==null?null:{$:1,$0:c$.$0.Value};},Equals:function(c_){return this.get_Count()===c_.get_Count()&&q.forall2(D.Equals,this,c_);},GetHashCode:function(){return D.Hash(s.ofSeq(this));},GetEnumerator$1:function(){return bz.Get(q.map(function(c_){return{K:c_.Key,V:c_.Value};},bP.Enumerate(false,this.tree)));},get_Count:function(){var c_;c_=this.tree;return c_==null?0:c_.Count;},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(c_){return q.compareWith(D.Compare,this,c_);},GetEnumerator0:function(){return this.GetEnumerator$1();}},t,cO);cO.New=c5.Ctor(function(c_){cO.New$1.call(this,cX.fromSeq(c_));},cO);cO.New$1=c5.Ctor(function(c_){t.New.call(this);this.tree=c_;},cO);cP.RDoc={$:0};cP.RAct={$:3};cP.RVar={$:1};cP.RViw={$:2};cP.RPlg={$:4};cQ.$cctor=function(){cQ.$cctor=a.ignore;cQ.CubicInOut=cU.Custom(function(c_){var c$;c$=c_*c_;return 3*c$-2*(c$*c_);});cQ.UseAnimations=true;};cR.Append=function(c_,c$){return c_.$==0?c$:c$.$==0?c_:{$:2,$0:c_,$1:c$};};cR.ToArray=function(c_){var c$;function da(db){if(db.$==1)c$.push(db.$0);else if(db.$==2){da(db.$0);da(db.$1);}else if(db.$==3)s.iter(function(dc){c$.push(dc);},db.$0);}c$=[];da(c_);return c$.slice(0);};cR.Concat=function(c_){var c$;c$=bL.ofSeqNonCopying(c_);return bL.TreeReduce(cR.Empty(),cR.Append,c$);};cR.Empty=function(){c2.$cctor();return c2.Empty;};cS.isBlank=function(c_){return A.forall(cW.IsWhiteSpace,c_);};cT.extractNodes=function(c_){var c$,da;function db(dc,dd,de,df){var dg,dh,di,dj,dk,dl;dg=cT.extractNodes(de);dh=cT.extractNodes(df);return(dg.$==0?(dj=dg.$0,!D.Equals(dj,null)&&dj.length===0)?(di=dh,true):dh.$==0?(dk=dh.$0,!D.Equals(dk,null)&&dk.length===0)?(di=dg,true):(di=[dg,dh],false):(di=[dg,dh],false):dh.$==0?(dl=dh.$0,!D.Equals(dl,null)&&dl.length===0)?(di=dg,true):(di=[dg,dh],false):(di=[dg,dh],false))?di:{$:1,$0:{$:0,$0:dc,$1:dd,$2:di[0],$3:di[1]}};}c$=cT.horizontalSplit(c_);return c$!=null&&c$.$==1?db(false,c$.$0[2],c$.$0[0],c$.$0[1]):(da=cT.verticalSplit(c_),da!=null&&da.$==1?db(true,da.$0[2],da.$0[0],da.$0[1]):{$:0,$0:cT.cleanSpaces(c_)});};cT.createLayoutDefinitions=function(c_,c$){var da,db,dc,dd,de,df,dg,dh,di,dj;return c$.$==1?(da=c$.$0.$0,(db=c$.$0.$1,(dc=cT.createLayoutDefinitions(c_+"_1",c$.$0.$2),(dd=dc[0],(de=dc[1],(df=cT.createLayoutDefinitions(c_+"_2",c$.$0.$3),(dg=df[0],(dh=df[1],[c_,s.ofSeq(q.delay(function(){return q.append([A.concat(" ",n.ofArray([c_,da?"vertical":"horizontal",a.String(db),dd,dg]))],q.delay(function(){return q.append(de,q.delay(function(){return dh;}));}));}))])))))))):(di=c$.$0,!D.Equals(di,null)&&di.length===0)?["___",[]]:(dj=c$.$0,!D.Equals(dj,null)&&dj.length===1)?[s.get(c$.$0,0),[]]:[c_,[c_+" div \"\" "+A.concat(" ",c$.$0)]];};cT.horizontalSplit=function(c_){var c$,da,db,dc,dd;function de(df,dg){var dh,di,dj,dk;dh=i.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",dg);return dh!=null&&dh.$==1?{$:1,$0:[[df,(di=(dj=q.tryItem(1,dh.$0),dj==null?null:cT.extractMeasuresO(A.Replace(A.Replace(dj.$0,"^",""),"v","-"))),(dk=new cY({$:1,$0:5,$1:50,$2:95}),di==null?dk:di.$0))],dg.indexOf("-")]}:null;}c$=(da=q.tryHead(q.sortBy(function(df){return df[1];},q.choose(function(df){return de(df[0],df[1]);},q.indexed(c_)))),da==null?null:{$:1,$0:da.$0[0]});return c$==null?null:{$:1,$0:(db=c$.$0,(dc=db[0],(dd=db[1],[B.array(c_,null,{$:1,$0:dc-1}),B.array(c_,{$:1,$0:dc+1},null),dd])))};};cT.verticalSplit=function(c_){var c$,da,db,dc,dd,de,df,dg,dh,di;function dj(dm,dn){var _do,dp,dq;return(dp=i.REGEX$1("^ *\\|+ *$","",dn),dp!=null&&dp.$==1&&(dq=dp.$0,!D.Equals(dq,null)&&dq.length===1))?{$:1,$0:[dm,dn.indexOf("|")]}:null;}function dk(dm){return D.Equals(null,dm);}function dl(dm){return D.Equals(null,dm);}c$=cT.transpose(c_);da=(db=(dc=q.tryHead(q.sortBy(function(dm){return dm[1];},q.choose(function(dm){return dj(dm[0],dm[1]);},q.indexed(c$)))),dc==null?null:{$:1,$0:dc.$0[0]}),db==null?null:{$:1,$0:(dd=db.$0,[cT.transpose(B.array(c$,null,{$:1,$0:dd-1})),cT.transpose(B.array(c$,{$:1,$0:dd+1},null))])});return da==null?null:{$:1,$0:(de=da.$0,(df=de[0],(dg=de[1],[s.filter(function(dm){return dk(cT.extractMeasuresO(dm));},df),s.filter(function(dm){return dl(cT.extractMeasuresO(dm));},dg),(dh=q.tryHead(q.delay(function(){return q.append(q.choose(cT.extractMeasuresO,df),q.delay(function(){return q.map(function(dm){return dm.$==0?dm.$1?new cY({$:0,$0:dm.$0,$1:false}):dm:dm;},q.choose(cT.extractMeasuresO,dg));}));})),(di=new cY({$:1,$0:5,$1:50,$2:95}),dh==null?di:dh.$0))])))};};cT.cleanSpaces=function(c_){return s.filter(function(c$){var da;return!(da=(C.Int())(c$),da!=null&&da.$==1);},A.SplitStrings(A.concat(" ",c_),[" "],1));};cT.extractMeasuresO=function(c_){var c$,da,db,dc,dd,de,df;c$=A.SplitChars(c_,[" "],1);return!D.Equals(c$,null)&&c$.length===1&&(db=(C.Int())(s.get(c$,0)),db!=null&&db.$==1&&(da=db.$0,true))?{$:1,$0:new cY({$:0,$0:c3.abs(da),$1:da>=0})}:!D.Equals(c$,null)&&c$.length===3&&(dd=(C.Int())(s.get(c$,0)),dd!=null&&dd.$==1&&(de=(C.Int())(s.get(c$,1)),de!=null&&de.$==1&&(df=(C.Int())(s.get(c$,2)),df!=null&&df.$==1&&(dc=[df.$0,dd.$0,de.$0],true))))?{$:1,$0:new cY({$:1,$0:dc[1],$1:dc[2],$2:dc[0]})}:null;};cT.transpose=function(c_){var c$;c$=q.max(q.map(function(da){return da.length;},c_));return s.ofSeq(q.delay(function(){return q.map(function(da){return s.ofSeq(q.delay(function(){return q.map(function(db){return db.length>da?db[da]:" ";},c_);})).join("");},h.range(0,c$-1));}));};cU=L.Easing=c5.Class({},t,cU);cU.Custom=function(c_){return new cU.New(c_);};cU.New=c5.Ctor(function(c_){t.New.call(this);this.transformTime=c_;},cU);cV.Filter=function(c_,c$){return new bJ.New$2(s.filter(c_,cV.ToArray(c$)));};cV.Except=function(c_,c$){var da;da=new bJ.New$2(cV.ToArray(c$));da.ExceptWith(cV.ToArray(c_));return da;};cV.ToArray=function(c_){var c$;c$=s.create(c_.get_Count(),void 0);c_.CopyTo(c$);return c$;};cV.Intersect=function(c_,c$){var da;da=new bJ.New$2(cV.ToArray(c_));da.IntersectWith(cV.ToArray(c$));return da;};cW.IsWhiteSpace=function(c_){return c_.match(new a.RegExp("\\s"))!==null;};cX.fromSeq=function(c_){var c$;c$=s.ofSeq(q.delay(function(){return q.collect(function(da){return[cZ.New(da[0],da[1])];},q.distinctBy(function(da){return da[0];},c_));}));s.sortInPlace(c$);return bP.Build(c$,0,c$.length-1);};cY=bw.Measures=c5.Class({toString:function(){return this.$==1?((((c5.Curried(function(c_,c$,da,db){return c_(a.String(c$)+"-"+a.String(da)+"-"+a.String(db));},4))(a.id))(h.toInt(this.$0)))(h.toInt(this.$1)))(h.toInt(this.$2)):a.String(h.toInt(this.$1?this.$0:-this.$0));}},null,cY);cZ=be.Pair=c5.Class({Equals:function(c_){return D.Equals(this.Key,c_.Key);},GetHashCode:function(){return D.Hash(this.Key);},CompareTo0:function(c_){return D.Compare(this.Key,c_.Key);}},null,cZ);cZ.New=function(c_,c$){return new cZ({Key:c_,Value:c$});};c0.Children=function(c_,c$){var da,db,dc;if(c$!=null&&c$.$==1){dc=[];da=c$.$0[0].nextSibling;while(da!==c$.$0[1]){dc.push(da);da=da.nextSibling;}return{$:0,$0:dc};}else return{$:0,$0:s.init(c_.childNodes.length,(db=c_.childNodes,function(dd){return db[dd];}))};};c0.Except=function(c_,c$){var da;da=c_.$0;return{$:0,$0:s.filter(function(db){return s.forall(function(dc){return!(db===dc);},da);},c$.$0)};};c0.Iter=function(c_,c$){s.iter(c_,c$.$0);};c0.DocChildren=function(c_){var c$;function da(db){if(db!=null&&db.$==2)da(db.$0.Current);else if(db!=null&&db.$==1)c$.push(db.$0.El);else if(db==null);else if(db!=null&&db.$==5)c$.push(db.$0);else if(db!=null&&db.$==4)c$.push(db.$0.Text);else if(db!=null&&db.$==6)s.iter(function(dc){if(dc==null||dc.constructor===bM)da(dc);else c$.push(dc);},db.$0.Els);else{da(db.$0);da(db.$1);}}c$=[];da(c_.Children);return{$:0,$0:bL.ofSeqNonCopying(c$)};};c1=g.MatchFailureException=c5.Class({},cj,c1);c1.New=c5.Ctor(function(c_,c$,da){this.message=c_+" at "+a.String(c$)+":"+a.String(da);bM.setPrototypeOf(this,c1.prototype);},c1);c2.$cctor=function(){c2.$cctor=a.ignore;c2.Empty={$:0};};c5.OnLoad(function(){e.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

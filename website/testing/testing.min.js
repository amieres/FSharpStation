function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.UoM=c.UoM||{};e=d.Unsafe=d.Unsafe||{};f=d.UoM=d.UoM||{};g=c.StringId=c.StringId||{};h=c.GuidId=c.GuidId||{};i=c.Dict=c.Dict||{};j=c.ResultMessage=c.ResultMessage||{};k=c.ResultMessageHelpers=c.ResultMessageHelpers||{};l=c.Monads=c.Monads||{};m=l.Seq=l.Seq||{};n=l.Option=l.Option||{};o=l.Async=l.Async||{};p=l.State=l.State||{};q=a.WebSharper=a.WebSharper||{};r=q.Obj=q.Obj||{};s=p.CEBuilder=p.CEBuilder||{};t=p.Operators=p.Operators||{};u=l.Result=l.Result||{};v=u.Builder=u.Builder||{};w=u.Operators=u.Operators||{};x=u.BuilderP=u.BuilderP||{};y=l.Depend=l.Depend||{};z=y.DependBuilder=y.DependBuilder||{};A=y.Operators=y.Operators||{};B=l.ResultM=l.ResultM||{};C=B.Builder=B.Builder||{};D=B.Operators=B.Operators||{};E=l.ResultMAutoOpen=l.ResultMAutoOpen||{};F=l.AsyncResultM=l.AsyncResultM||{};G=F.AsyncResultMBuilder=F.AsyncResultMBuilder||{};H=F.Operators=F.Operators||{};I=l.AsyncResultMAutoOpen=l.AsyncResultMAutoOpen||{};J=c.String=c.String||{};K=c.ParseO=c.ParseO||{};L=c.Serializer=c.Serializer||{};M=L.JsonIntermediate=L.JsonIntermediate||{};N=c.Snippet=c.Snippet||{};O=c.SnippetModule=c.SnippetModule||{};P=c.SnippetSerialize=c.SnippetSerialize||{};Q=P.Model=P.Model||{};R=b.LibraryJS=b.LibraryJS||{};S=R.WebComponent=R.WebComponent||{};T=S.WcTabStrip=S.WcTabStrip||{};U=T.WcTabStripT=T.WcTabStripT||{};V=S.WcSplitter=S.WcSplitter||{};W=V.WcSplitterT=V.WcSplitterT||{};X=R.Monaco=R.Monaco||{};Y=X.Position=X.Position||{};Z=X.Range=X.Range||{};_0=X.Location=X.Location||{};_1=X.MarkDownString=X.MarkDownString||{};_2=X.MarkerData=X.MarkerData||{};_3=X.CompletionItem=X.CompletionItem||{};_4=X.Hover=X.Hover||{};_5=X.Editor=X.Editor||{};_6=X.MonacoConfig=X.MonacoConfig||{};_7=R.MonacoGenAdapter=R.MonacoGenAdapter||{};_8=_7.MonacoRT=_7.MonacoRT||{};_9=_7.CompletionItemProvider=_7.CompletionItemProvider||{};_=_7.HoverProvider=_7.HoverProvider||{};$=_7.DefinitionProvider=_7.DefinitionProvider||{};ba=R.AppFramework=R.AppFramework||{};bb=ba.PlugInVar=ba.PlugInVar||{};bc=ba.PlugInView=ba.PlugInView||{};bd=ba.PlugInDoc=ba.PlugInDoc||{};be=ba.PlugInAction=ba.PlugInAction||{};bf=ba.PlugInQuery=ba.PlugInQuery||{};bg=ba.PlugIn=ba.PlugIn||{};bh=ba.PlugInBuilder=ba.PlugInBuilder||{};bi=ba.Fun=ba.Fun||{};bj=ba.P=ba.P||{};bk=ba.Val=ba.Val||{};bl=ba.AAttr=ba.AAttr||{};bm=ba.Extract0=ba.Extract0||{};bn=R.LayoutEngine=R.LayoutEngine||{};bo=R.LayoutEngineModule=R.LayoutEngineModule||{};bp=bo.Measures=bo.Measures||{};bq=bo.Syntax=bo.Syntax||{};br=bq.RefType=bq.RefType||{};bs=bo.Layout=bo.Layout||{};bt=b.TestingJS=b.TestingJS||{};bu=bt.StartAppFramework=bt.StartAppFramework||{};bv=bt.Util=bt.Util||{};bw=bt.AF=bt.AF||{};bx=bw.ListModelData=bw.ListModelData||{};by=bt.LayoutEngine=bt.LayoutEngine||{};bz=bt.ListModel=bt.ListModel||{};bA=bt.LM=bt.LM||{};bB=bt.LMX=bt.LMX||{};bC=bt.SnippetTemplates=bt.SnippetTemplates||{};bD=bt.NewLY=bt.NewLY||{};bE=bD.P=bD.P||{};bF=bt.DragDrop=bt.DragDrop||{};bG=bF.DragInfo=bF.DragInfo||{};bH=bt.SnippetsUI=bt.SnippetsUI||{};bI=bH.SnippetHierData=bH.SnippetHierData||{};bJ=bH.SaveLoad=bH.SaveLoad||{};bK=a.System=a.System||{};bL=bK.Guid=bK.Guid||{};bM=q.Operators=q.Operators||{};bN=q.Utils=q.Utils||{};bO=q.Arrays=q.Arrays||{};bP=q.Slice=q.Slice||{};bQ=q.Unchecked=q.Unchecked||{};bR=q.Collections=q.Collections||{};bS=bR.Dictionary=bR.Dictionary||{};bT=q.Seq=q.Seq||{};bU=q.Strings=q.Strings||{};bV=q.List=q.List||{};bW=q.Option=q.Option||{};bX=q.CancellationTokenSource=q.CancellationTokenSource||{};bY=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};bZ=bV.T=bV.T||{};b0=q.Result=q.Result||{};b1=q.Char=q.Char||{};b2=bR.Set=bR.Set||{};b3=bR.FSharpSet=bR.FSharpSet||{};b4=bR.FSharpMap=bR.FSharpMap||{};b5=q.UI=q.UI||{};b6=b5.HtmlModule=b5.HtmlModule||{};b7=b6.attr=b6.attr||{};b8=R.Hoverable=R.Hoverable||{};b9=b8.Hoverable=b8.Hoverable||{};b_=b5.View=b5.View||{};b$=b5.Var=b5.Var||{};ca=b5.Doc=b5.Doc||{};cb=q.Numeric=q.Numeric||{};cc=b5.Var$1=b5.Var$1||{};cd=q.JavaScript=q.JavaScript||{};ce=cd.Pervasives=cd.Pervasives||{};cf=a.EventTarget;cg=a.Node;ch=cd.JS=cd.JS||{};ci=a.Event;cj=a.UIEvent;ck=R.ResizeObserver=R.ResizeObserver||{};cl=R.GenEditor=R.GenEditor||{};cm=cl.Position=cl.Position||{};cn=R.PromiseM=R.PromiseM||{};co=cl.GenEditor=cl.GenEditor||{};cp=cl.GenEditorHook=cl.GenEditorHook||{};cq=b5.ListModel=b5.ListModel||{};cr=b5.Templating=b5.Templating||{};cs=cr.Runtime=cr.Runtime||{};ct=cs.Server=cs.Server||{};cu=ct.TemplateInstance=ct.TemplateInstance||{};cv=ct.ProviderBuilder=ct.ProviderBuilder||{};cw=ct.Handler=ct.Handler||{};cx=a.testing_Templates=a.testing_Templates||{};cy=a.GeneratedPrintf=a.GeneratedPrintf||{};cz=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};cA=cs.Client=cs.Client||{};cB=b5.AttrModule=b5.AttrModule||{};cC=q.Lazy=q.Lazy||{};cD=b5.AttrProxy=b5.AttrProxy||{};cE=a.Error;cF=q.MatchFailureException=q.MatchFailureException||{};cG=R.View=R.View||{};cH=R.ListModel=R.ListModel||{};cI=b5.ViewBuilder=b5.ViewBuilder||{};cJ=a.FileReader;cK=R.Serializer=R.Serializer||{};cL=R.AppFrameworkTemplate=R.AppFrameworkTemplate||{};cM=q.Concurrency=q.Concurrency||{};cN=a.Object;cO=q.Enumerator=q.Enumerator||{};cP=cO.T=cO.T||{};cQ=bR.DictionaryUtil=bR.DictionaryUtil||{};cR=q.AggregateException=q.AggregateException||{};cS=a.WindowOrWorkerGlobalScope;cT=bR.BalancedTree=bR.BalancedTree||{};cU=bR.MapUtil=bR.MapUtil||{};cV=cT.Tree=cT.Tree||{};cW=b5.Elt=b5.Elt||{};cX=b5.Snap=b5.Snap||{};cY=b5.DomUtility=b5.DomUtility||{};cZ=b5.ConcreteVar=b5.ConcreteVar||{};c0=b5.Client=b5.Client||{};c1=c0.Templates=c0.Templates||{};c2=b5.Abbrev=b5.Abbrev||{};c3=c2.Fresh=c2.Fresh||{};c4=bR.List=bR.List||{};c5=bR.HashSet=bR.HashSet||{};c6=b5.FromView=b5.FromView||{};c7=b5.Attrs=b5.Attrs||{};c8=q.LazyExtensionsProxy=q.LazyExtensionsProxy||{};c9=c8.LazyRecord=c8.LazyRecord||{};c_=b5.Array=b5.Array||{};c$=b5.Docs=b5.Docs||{};da=bR.Pair=bR.Pair||{};db=c2.Async=c2.Async||{};dc=b5.Storage=b5.Storage||{};dd=cM.AsyncBody=cM.AsyncBody||{};de=cM.CT=cM.CT||{};df=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};dg=q.DateUtil=q.DateUtil||{};dh=q.TimeoutException=q.TimeoutException||{};di=b5.DocElemNode=b5.DocElemNode||{};dj=a.CharacterData;dk=b5.CheckedInput=b5.CheckedInput||{};dl=b5.DynamicAttrNode=b5.DynamicAttrNode||{};dm=dc.ArrayStorage=dc.ArrayStorage||{};dn=cM.Scheduler=cM.Scheduler||{};_do=q.OperationCanceledException=q.OperationCanceledException||{};dp=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};dq=b5.Updates=b5.Updates||{};dr=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};ds=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};dt=b5.An=b5.An||{};du=c0.Settings=c0.Settings||{};dv=c2.Mailbox=c2.Mailbox||{};dw=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};dx=c0.Attrs=c0.Attrs||{};dy=dx.Dyn=dx.Dyn||{};dz=c1.Prepare=c1.Prepare||{};dA=bR.KeyCollection=bR.KeyCollection||{};dB=c0.Docs=c0.Docs||{};dC=dB.RunState=dB.RunState||{};dD=dB.NodeSet=dB.NodeSet||{};dE=b5.Anims=b5.Anims||{};dF=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};dG=bR.HashSetUtil=bR.HashSetUtil||{};dH=q.FormatException=q.FormatException||{};dI=q.Queue=q.Queue||{};dJ=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};dK=b5.AppendList=b5.AppendList||{};dL=b5.String=b5.String||{};dM=b5.Easing=b5.Easing||{};dN=c2.HashSet=c2.HashSet||{};dO=dB.DomNodes=dB.DomNodes||{};dP=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};dQ=a.console;dR=a.IntelliFactory;dS=dR&&dR.Runtime;dT=a.Date;dU=a.Reflect;dV=a.Math;dW=a.jQuery;dX=a.JSON;c.Error=function(dY){return{$:1,$0:dY};};c.print=function(dY){if(typeof dY=="string")((function(dZ){return function(d0){return dZ(bN.toSafe(d0));};}(function(dZ){dQ.log(dZ);}))(dY));else((function(dZ){return function(d0){return dZ(bN.prettyPrint(d0));};}(function(dZ){dQ.log(dZ);}))(dY));};c.delayed=function(dY,dZ){var d0;d0=[null];return function(d1){var d2,d3;d2=d0[0];d2==null?void 0:d2.$0.Cancel$1();d0[0]={$:1,$0:new bX.New()};cM.Start((d3=null,cM.Delay(function(){return cM.Bind(cM.Sleep(dY),function(){dZ(d1);return cM.Zero();});})),{$:1,$0:d0[0].$0});};};c["String.Substring2"]=function(dY,dZ,d0){var d1,d2;while(true){if(d0<=0)return"";else if(dZ>=dY.length)return"";else if(dZ<0){d1=dZ;dZ=0;d0=d0+d1;}else return bU.Substring(dY,dZ,(d2=dY.length-dZ,bQ.Compare(d0,d2)===-1?d0:d2));}};c["String.Left"]=function(dY,dZ){return dZ<0?c["String.Substring2"](dY,0,dY.length+dZ):c["String.Substring2"](dY,0,dZ);};c["String.Right"]=function(dY,dZ){var d0,d1;return c["String.Substring2"](dY,(d0=0,(d1=dY.length-dZ,bQ.Compare(d0,d1)===1?d0:d1)),dY.length);};c["String.get_toUnderscore"]=function(dY,dZ){return bO.ofSeq(bT.collect(a.id,bT.mapi(function(d0,d1){return d0>0&&b1.IsUpper(d1)?bV.ofArray(["_",d1]):bV.ofArray([d1]);},dY))).join("");};e.cast=a.id;f.Tag$10=function(dY){return e.cast(dY);};f.Tag$9=function(dY){return e.cast(dY);};f.Tag$8=function(dY){return e.cast(dY);};f.Tag$7=function(dY){return e.cast(dY);};f.Tag$6=function(dY){return e.cast(dY);};f.Tag$5=function(dY){return e.cast(dY);};f.Tag$4=function(dY){return e.cast(dY);};f.Tag$3=function(dY){return e.cast(dY);};f.Tag$2=function(dY){return e.cast(dY);};f.Tag$1=function(dY){return e.cast(dY);};f.Tag=function(dY){return e.cast(dY);};f.Untag$10=function(dY){return e.cast(dY);};f.Untag$9=function(dY){return e.cast(dY);};f.Untag$8=function(dY){return e.cast(dY);};f.Untag$7=function(dY){return e.cast(dY);};f.Untag$6=function(dY){return e.cast(dY);};f.Untag$5=function(dY){return e.cast(dY);};f.Untag$4=function(dY){return e.cast(dY);};f.Untag$3=function(dY){return e.cast(dY);};f.Untag$2=function(dY){return e.cast(dY);};f.Untag$1=function(dY){return e.cast(dY);};f.Untag=function(dY){return e.cast(dY);};f.Cast$10=function(dY){return e.cast(dY);};f.Cast$9=function(dY){return e.cast(dY);};f.Cast$8=function(dY){return e.cast(dY);};f.Cast$7=function(dY){return e.cast(dY);};f.Cast$6=function(dY){return e.cast(dY);};f.Cast$5=function(dY){return e.cast(dY);};f.Cast$4=function(dY){return e.cast(dY);};f.Cast$3=function(dY){return e.cast(dY);};f.Cast$2=function(dY){return e.cast(dY);};f.Cast$1=function(dY){return e.cast(dY);};f.Cast=function(dY){return e.cast(dY);};g=c.StringId=dS.Class({get_Id:function(){return this.$0;}},null,g);h=c.GuidId=dS.Class({get_Id:function(){return this.$0;}},null,h);i.add=function(dY,dZ,d0){if(d0.ContainsKey(dY))d0.set_Item(dY,dZ);else d0.Add(dY,dZ);};j=c.ResultMessage=dS.Class({toString:function(){return this.$==1?(function(dY){return function(dZ){return dY("Error    : "+bN.toSafe(dZ));};}(a.id))(this.$0):this.$==2?(function(dY){return function(dZ){return dY("Warning  : "+bN.toSafe(dZ));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(dY){return function(dZ){return dY(a.String(dZ));};}(a.id))(this.$0):this.$==5?(((dS.Curried3(function(dY,dZ,d0){return dY("Exception: "+bN.toSafe(dZ)+", "+bN.toSafe(d0));}))(a.id))(this.$0))(this.$1):this.$==6?bU.concat("\n",bT.map(a.String,bT.filter(function(dY){return dY.$!=0;},this.$0))):"";}},null,j);j.NoMsg=new j({$:0});k.errorMsgf=function(dY){return dY(function(dZ){return new j({$:1,$0:dZ});});};k.warningf=function(dY){return dY(function(dZ){return new j({$:2,$0:dZ});});};k.infof=function(dY){return dY(function(dZ){return new j({$:3,$0:dZ});});};j.noMsg=function(dY){return dY.$==0;};j.exclnoMsg=function(dY){function dZ(d0){return!d0;}return bT.filter(function(d0){return dZ(j.noMsg(d0));},dY);};j.bindMessage=function(dY,dZ){return dZ.$==4?dY(dZ.$0):dZ.$==1?new j({$:1,$0:dZ.$0}):dZ.$==3?new j({$:3,$0:dZ.$0}):dZ.$==2?new j({$:2,$0:dZ.$0}):dZ.$==5?new j({$:5,$0:dZ.$0,$1:dZ.$1}):dZ.$==6?new j({$:6,$0:bO.map(function(d0){return j.bindMessage(dY,d0);},dZ.$0)}):j.NoMsg;};j.freeMessageF=function(dY,dZ){return j.bindMessage(dY,dZ);};j.freeMessage=function(dY){var dZ;function d0(d1){return new j({$:1,$0:d1});}return j.freeMessageF((dZ=function(d1){return function(d2){return d1(a.String(d2));};}(a.id),function(d1){return d0(dZ(d1));}),dY);};j.freeMessageW=function(dY){var dZ;function d0(d1){return new j({$:2,$0:d1});}return j.freeMessageF((dZ=function(d1){return function(d2){return d1(a.String(d2));};}(a.id),function(d1){return d0(dZ(d1));}),dY);};j.freeMessageI=function(dY){var dZ;function d0(d1){return new j({$:3,$0:d1});}return j.freeMessageF((dZ=function(d1){return function(d2){return d1(a.String(d2));};}(a.id),function(d1){return d0(dZ(d1));}),dY);};j.isInfoF=function(dY,dZ){return dZ.$==3||(dZ.$==4?dY(dZ.$0):dZ.$==6&&bT.forall(function(d0){return j.isInfoF(dY,d0);},j.exclnoMsg(dZ.$0)));};j.isInfo=function(dY){return j.isInfoF(function(){return false;},dY);};j.isInfoI=function(dY){return j.isInfoF(function(){return true;},dY);};j.isWarningOrInfoF=function(dY,dZ){return dZ.$==2||(dZ.$==4?dY(dZ.$0):dZ.$==6&&bT.forall(function(d0){return j.isWarningOrInfoF(dY,d0)||j.isInfoF(dY,d0);},j.exclnoMsg(dZ.$0)));};j.isWarningOrInfo=function(dY){return j.isWarningOrInfoF(function(){return false;},dY);};j.isWarningOrInfoW=function(dY){return j.isWarningOrInfoF(function(){return true;},dY);};j.isFatalF=function(dY,dZ){return dZ.$==0?false:dZ.$==3?false:dZ.$==2?false:dZ.$==4?dY(dZ.$0):dZ.$==6?bT.exists(function(d0){return j.isFatalF(dY,d0);},dZ.$0):true;};j.isFatal=function(dY){return j.isFatalF(function(){return true;},dY);};j.isFatalW=function(dY){return j.isFatalF(function(){return false;},dY);};j.countF=function(dY,dZ){function d0(d1,d2,d3){return function(d4){return[d1+d4[0],d2+d4[1],d3+d4[2]];};}return dZ.$==0?[0,0,0]:dZ.$==3?[0,0,1]:dZ.$==2?[0,1,0]:dZ.$==4?dY(dZ.$0):dZ.$==6?bT.fold(function(d1,d2){return(function(d3){return d0(d3[0],d3[1],d3[2]);}(d1))(d2);},[0,0,0],bT.map(function(d1){return j.countF(dY,d1);},j.exclnoMsg(dZ.$0))):[1,0,0];};j.count=function(dY){return j.countF(function(){return[1,0,0];},dY);};j.countW=function(dY){return j.countF(function(){return[0,1,0];},dY);};j.countI=function(dY){return j.countF(function(){return[0,0,1];},dY);};j.addMsg=function(dY,dZ){return dY.$==0?dZ:dY.$==6?dZ.$==0?dY:dZ.$==6?new j({$:6,$0:dY.$0.concat(dZ.$0)}):new j({$:6,$0:dY.$0.concat([dZ])}):dZ.$==0?dY:dZ.$==6?new j({$:6,$0:[dY].concat(dZ.$0)}):new j({$:6,$0:[dY,dZ]});};j.reduceMsgs=function(dY){return bT.fold(j.addMsg,j.NoMsg,dY);};j.summaryF=function(dY,dZ){var d0,d1;d1=j.countF(dY,dZ);switch(d1[0]===0?d1[1]===0?0:d1[1]===1?d1[2]===0?0:(d0=d1[1],2):(d0=d1[1],2):d1[0]===1?d1[1]===0?d1[2]===0?0:(d0=d1[0],1):(d0=[d1[0],d1[1]],3):d1[1]===0?(d0=d1[0],1):(d0=[d1[0],d1[1]],3)){case 0:return"";case 1:return(function(d2){return function(d3){return d2("Errors   : "+a.String(d3)+"\n");};}(a.id))(d0);case 2:return(function(d2){return function(d3){return d2("Warnings : "+a.String(d3)+"\n");};}(a.id))(d0);case 3:return(((dS.Curried3(function(d2,d3,d4){return d2("Errors   : "+a.String(d3)+", Warnings: "+a.String(d4)+"\n");}))(a.id))(d0[0]))(d0[1]);}};j.summarizedF=function(dY,dZ){return bU.concat("\n",bT.filter(function(d0){return""!==d0;},bV.ofArray([a.String(dZ),j.summaryF(dY,dZ)])));};j.summarized=function(dY){return j.summarizedF(function(){return[1,0,0];},dY);};j.summarizedW=function(dY){return j.summarizedF(function(){return[0,1,0];},dY);};j.summarizedI=function(dY){return j.summarizedF(function(){return[0,0,1];},dY);};l.OkM$1=function(dY){return{$:0,$0:{$:1,$0:dY},$1:j.NoMsg};};l.OkMWithMsg=function(dY,dZ){return{$:0,$0:{$:1,$0:dY},$1:dZ};};l.ErrorM=function(dY){return{$:0,$0:null,$1:dY};};l.OkM=function(dY){return dY.$0==null?{$:1,$0:dY.$1}:{$:0,$0:[dY.$0.$0,dY.$1]};};m.rtn=function(){bY.$cctor();return bY.rtn;};m.insertO=function(dY){var dZ;dZ=dY==null?null:{$:1,$0:bT.map(function(d0){return{$:1,$0:d0};},dY.$0)};return dZ==null?(m.rtn())(null):dZ.$0;};m.insertR=function(dY){return dY.$==0?bT.map(function(dZ){return{$:0,$0:dZ};},dY.$0):(m.rtn())(c.Error(dY.$0));};m.absorbO=function(dY){return bT.choose(a.id,dY);};m.absorbR=function(dY){return bT.choose(function(dZ){return dZ.$==0?{$:1,$0:dZ.$0}:null;},dY);};m.ofOption=function(dY){return dY==null?[]:[dY.$0];};n.rtn=function(dY){return{$:1,$0:dY};};n.iter=function(dY){function dZ(d1){return d1==null?null:{$:1,$0:dY(d1.$0)};}function d0(d1){if(d1==null);}return function(d1){return d0(dZ(d1));};};n.join=function(dY){return dY==null?null:dY.$0;};n.apply=function(dY,dZ){var d0;return dY!=null&&dY.$==1&&(dZ!=null&&dZ.$==1&&(d0=[dY.$0,dZ.$0],true))?{$:1,$0:d0[0](d0[1])}:null;};n.mapNone=function(dY,dZ){return dZ==null?dY():dZ.$0;};n.bindNone=function(dY,dZ){return dZ!=null&&dZ.$==1?{$:1,$0:dZ.$0}:dY();};n.op_GreaterGreaterEquals=function(dY,dZ){return dY==null?null:dZ(dY.$0);};n.traverseSeq=function(dY,dZ){var d0;d0=bO.foldBack(function(d1,d2){return n.op_GreaterGreaterEquals(dY(d1),function(d3){return n.op_GreaterGreaterEquals(d2,function(d4){return n.rtn(new bZ({$:1,$0:d3,$1:d4}));});});},bO.ofSeq(dZ),n.rtn(bZ.Empty));return d0==null?null:{$:1,$0:d0.$0};};n.sequenceSeq=function(dY){return n.traverseSeq(a.id,dY);};n.insertR=function(dY){var dZ;return dY.$==0?(dZ=dY.$0,dZ==null?null:{$:1,$0:{$:0,$0:dZ.$0}}):n.rtn(c.Error(dY.$0));};n.absorbR=function(dY){var dZ,d0;return dY!=null&&dY.$==1&&(d0=dY.$0,d0.$==0&&(dZ=d0.$0,true))?{$:1,$0:dZ}:null;};o.apply=function(dY,dZ){var d0;d0=null;return cM.Delay(function(){return cM.Bind(cM.StartChild(dY,null),function(d1){return cM.Bind(cM.StartChild(dZ,null),function(d2){return cM.Bind(d1,function(d3){return cM.Bind(d2,function(d4){return cM.Return(d3(d4));});});});});});};o.sleepThen=function(dY,dZ){var d0;d0=null;return cM.Delay(function(){return cM.Bind(cM.Sleep(dZ),function(){return cM.Return(dY());});});};o.op_GreaterGreaterEquals=function(dY,dZ){return cM.Bind(dY,dZ);};o.traverseSeq=function(dY,dZ){function d0(d1){return cM.Return(d1);}return cM.Bind(bO.foldBack(function(d1,d2){return o.op_GreaterGreaterEquals(dY(d1),function(d3){return o.op_GreaterGreaterEquals(d2,function(d4){return cM.Return(new bZ({$:1,$0:d3,$1:d4}));});});},bO.ofSeq(dZ),cM.Return(bZ.Empty)),function(d1){return d0(a.id(d1));});};o.sequenceSeq=function(dY){return o.traverseSeq(a.id,dY);};o.insertO=function(dY){var dZ;function d0(d2){return{$:1,$0:d2};}function d1(d2){return cM.Return(d2);}dZ=dY==null?null:{$:1,$0:cM.Bind(dY.$0,function(d2){return d1(d0(d2));})};return dZ==null?cM.Return(null):dZ.$0;};o.insertR=function(dY){function dZ(d1){return{$:0,$0:d1};}function d0(d1){return cM.Return(d1);}return dY.$==0?cM.Bind(dY.$0,function(d1){return d0(dZ(d1));}):cM.Return(c.Error(dY.$0));};p.rtn=function(dY,dZ){return[dZ,dY];};p.bind=function(dY,dZ,d0){var d1;d1=dZ(d0);return(dY(d1[1]))(d1[0]);};p.map=function(dY){var dZ;dZ=function(d0){var d1;d1=dY(d0);return function(d2){return p.rtn(d1,d2);};};return(dS.Curried3(p.bind))(dZ);};p.state=function(){bY.$cctor();return bY.state;};r=q.Obj=dS.Class({Equals:function(dY){return this===dY;},GetHashCode:function(){return -1;}},null,r);r.New=dS.Ctor(function(){},r);s=p.CEBuilder=dS.Class({Bind:function(dY,dZ){return function(d0){return p.bind(dZ,dY,d0);};},Return:function(dY){return function(dZ){return p.rtn(dY,dZ);};},Delay:function(dY){return dY();}},r,s);s.New=dS.Ctor(function(){r.New.call(this);},s);t.op_GreaterGreaterEquals=function(dY,dZ){return function(d0){return p.bind(dZ,dY,d0);};};t.op_BarGreaterGreater=function(dY,dZ){return(p.map(dZ))(dY);};u.errorf=function(dY){return dY(c.Error);};u.rtn=function(dY){return{$:0,$0:dY};};u.join=function(dY){return b0.Bind(a.id,dY);};u.flatten=function(dY){return b0.Bind(a.id,dY);};u.toOption=function(dY){return dY.$==0?{$:1,$0:dY.$0}:null;};u.defaultWith=function(dY,dZ){return dZ.$==1?dY(dZ.$0):dZ.$0;};u.defaultValue=function(dY,dZ){return dZ.$==1?dY:dZ.$0;};u.failIfTrue=function(dY,dZ){return dZ?c.Error(dY):{$:0,$0:null};};u.failIfFalse=function(dY,dZ){return!dZ?c.Error(dY):{$:0,$0:null};};u.iter=function(dY,dZ,d0){u.defaultWith(dY,b0.Map(dZ,d0));};u.get=function(dY){return u.defaultWith(function(dZ){return bM.FailWith(a.String(dZ));},dY);};u.ofOption=function(dY,dZ){var d0;d0=dZ==null?null:{$:1,$0:{$:0,$0:dZ.$0}};return d0==null?function(d1){return c.Error(dY(d1));}():d0.$0;};u.insertO=function(dY){var dZ;dZ=dY==null?null:{$:1,$0:b0.Map(function(d0){return{$:1,$0:d0};},dY.$0)};return dZ==null?{$:0,$0:null}:dZ.$0;};u.absorbO=function(dY,dZ){return b0.Bind(function(d0){return u.ofOption(dY,d0);},dZ);};u.op_GreaterGreaterEquals=function(dY,dZ){return b0.Bind(dZ,dY);};u.traverseSeq=function(dY,dZ){return b0.Map(a.id,bO.foldBack(function(d0,d1){return u.op_GreaterGreaterEquals(dY(d0),function(d2){return u.op_GreaterGreaterEquals(d1,function(d3){return u.rtn(new bZ({$:1,$0:d2,$1:d3}));});});},bO.ofSeq(dZ),u.rtn(bZ.Empty)));};u.sequenceSeq=function(dY){return u.traverseSeq(a.id,dY);};u.result=function(){bY.$cctor();return bY.result;};u.freeMessage=function(dY){return dY.$==1?c.Error(j.freeMessage(dY.$0)):{$:0,$0:dY.$0};};u.bindP=function(dY,dZ){if(dZ.$==1)return c.Error(dZ.$0);else try{return dY(dZ.$0);}catch(d0){return c.Error(new j({$:5,$0:d0.message,$1:d0.stack}));}};u.mapP=function(dY,dZ){return u.bindP(function(d0){return u.rtn(dY(d0));},dZ);};u.iterP=function(dY,dZ,d0){u.defaultWith(dY,u.mapP(dZ,d0));};u.resultP=function(){bY.$cctor();return bY.resultP;};v=u.Builder=dS.Class({Return:function(dY){return u.rtn(dY);},ReturnFrom:a.id,Bind:function(dY,dZ){return b0.Bind(dZ,dY);},Zero:function(){return u.rtn();},Delay:a.id,Combine:function(dY,dZ){return b0.Bind(dZ,dY);},Run:function(dY){return b0.Bind(dY,{$:0,$0:null});},TryWith:function(dY,dZ){try{return dY();}catch(d0){return dZ(d0);}},TryFinally:function(dY,dZ){try{return dY();}finally{dZ();}},Using:function(dY,dZ){try{return dZ(dY);}finally{dY.Dispose();}},While:function(dY,dZ){function d0(d1,d2){return d1()?b0.Bind(function(){return d0(d1,d2);},d2()):u.rtn();}return d0(dY,dZ);},For:function(dY,dZ){var d0;d0=this;return this.Using(cO.Get(dY),function(d1){return d0.While(function(){return d1.MoveNext();},d0.Delay(function(){return dZ(d1.Current());}));});}},r,v);v.New=dS.Ctor(function(){r.New.call(this);},v);w.op_BarGreaterGreater=function(dY,dZ){return b0.Map(dZ,dY);};w.op_GreaterGreaterEquals=function(dY,dZ){return b0.Bind(dZ,dY);};w.op_RightShift=function(dY,dZ,d0){return w.op_BarGreaterGreater(dY(d0),dZ);};w.op_GreaterEqualsGreater=function(dY,dZ,d0){return w.op_GreaterGreaterEquals(dY(d0),dZ);};w.rtn=function(dY){return u.rtn(dY);};w.result=function(){bY.$cctor();return bY.result$1;};x=u.BuilderP=dS.Class({Return:function(dY){return u.rtn(dY);},ReturnFrom:a.id,Bind:function(dY,dZ){return b0.Bind(dZ,dY);},Zero:function(){return u.rtn();},Delay:a.id,Combine:function(dY,dZ){return b0.Bind(dZ,dY);},Run:function(dY){return u.bindP(dY,{$:0,$0:null});},TryWith:function(dY,dZ){try{return dY();}catch(d0){return dZ(d0);}},TryFinally:function(dY,dZ){try{return dY();}finally{dZ();}},Using:function(dY,dZ){try{return dZ(dY);}finally{dY.Dispose();}},While:function(dY,dZ){function d0(d1,d2){return d1()?b0.Bind(function(){return d0(d1,d2);},d2()):u.rtn();}return d0(dY,dZ);},For:function(dY,dZ){var d0;d0=this;return this.Using(cO.Get(dY),function(d1){return d0.While(function(){return d1.MoveNext();},d0.Delay(function(){return dZ(d1.Current());}));});}},r,x);x.New=dS.Ctor(function(){r.New.call(this);},x);y.dependByName=function(dY,dZ,d0){return{$:0,$0:{$:1,$0:[dY,dZ]},$1:function(d1){return{$:1,$0:d0(d1)};}};};y.bind=function(dY,dZ){function d0(d1){var d2,d3;return d1.$==1?(d2=d1.$0,{$:0,$0:null,$1:function(){return dY(d2);}}):(d3=d1.$1,{$:0,$0:d1.$0,$1:function(d4){return d0(d3(d4));}});}return d0(dZ);};y.rtn=function(dY){return{$:1,$0:dY};};y.map=function(dY){var dZ;dZ=function(d0){return y.rtn(dY(d0));};return function(d0){return y.bind(dZ,d0);};};y.apply=function(dY,dZ){return y.bind(function(d0){return(y.map(d0))(dZ);},dY);};y.replacer=function(dY,dZ){function d0(d1){var d2,d3,d4,d5,d6,d7;function d8(d_){return d_[0];}function d9(d_){return d4===d_;}return d1.$==1?{$:1,$0:d1.$0}:(d2=d1.$0,d2!=null&&d2.$==1)?(d3=d1.$1,(d4=d1.$0.$0[0],(d5=(d6=bT.tryFind(function(d_){return d9(d8(d_));},dY),d6==null?null:{$:1,$0:{$:0,$0:{$:1,$0:[d4,d6.$0[1]]},$1:function(d_){return d0(d3(d_));}}}),d5==null?{$:0,$0:{$:1,$0:[d4,d1.$0.$0[1]]},$1:function(d_){return d0(d3(d_));}}:d5.$0))):{$:0,$0:null,$1:(d7=d1.$1,function(d_){return d0(d7(d_));})};}return d0(dZ);};y.replacerDef=function(dY,dZ){function d0(d1){var d2,d3,d4,d5,d6,d7,d8;function d9(d_,d$){return d$[0]===d4;}return d1.$==1?{$:1,$0:d1.$0}:(d2=d1.$0,d2!=null&&d2.$==1)?(d3=d1.$1,(d4=d1.$0.$0[0],(d5=(d6=bT.tryFind(function(d_){return d9(d_[0],d_[1]);},dY),d6==null?null:{$:1,$0:(d7=d6.$0,{$:0,$0:{$:1,$0:[d7[0],d7[1][1]]},$1:function(d_){return d0(d3(d_));}})}),d5==null?{$:0,$0:{$:1,$0:[d4,d1.$0.$0[1]]},$1:function(d_){return d0(d3(d_));}}:d5.$0))):{$:0,$0:null,$1:(d8=d1.$1,function(d_){return d0(d8(d_));})};}return d0(dZ);};y.resolver=function(dY,dZ){function d0(d1){var d2,d3,d4,d5,d6;function d7(d9){return d9[0];}function d8(d9){return d4===d9;}return d1.$==1?d1.$0:(d2=d1.$0,d2!=null&&d2.$==1)?(d3=d1.$1,(d4=d1.$0.$0[0],d0((d5=(d6=bT.tryFind(function(d9){return d8(d7(d9));},dY),d6==null?null:{$:1,$0:d3(d6.$0[1])}),d5==null?d3(d1.$0.$0[1]):d5.$0)))):d0(d1.$1(void 0));}return d0(dZ);};y.depend=function(){bY.$cctor();return bY.depend;};y.getDependencies=function(dY){return bV.rev(bV.filter(function(dZ){return dZ.$==0?dZ.$0!=null:true;},function(dZ,d0){var d1,d2,d3,d4,d5;while(true){d2=new bZ({$:1,$0:d0,$1:dZ});if(d0.$==1)return d2;else if(d1=d0.$0,d1!=null&&d1.$==1){d3=d0.$1;d4=d0.$0.$0[1];dZ=d2;d0=d3(d4);}else{d5=d0.$1;dZ=d2;d0=d5(void 0);}}}(bZ.Empty,dY)));};y.toString=function(dY){return bU.concat("\n",bT.sort(bT.distinct(bT.map(function(dZ){var d0,d1;return(dZ.$==0?(d1=dZ.$0,d1!=null&&d1.$==1)?(d0=[dZ.$1,dZ.$0.$0[0],dZ.$0.$0[1]],true):(d0=dZ,false):(d0=dZ,false))?(((dS.Curried3(function(d2,d3,d4){return d2(bU.PadRight(bN.toSafe(d3),50)+" "+bN.prettyPrint(d4));}))(a.id))(d0[1]))(d0[2]):a.String(d0);},y.getDependencies(dY)))));};z=y.DependBuilder=dS.Class({Bind:function(dY,dZ){return y.bind(dZ,dY);},Return:function(dY){return y.rtn(dY);},Delay:function(dY){return dY();}},r,z);z.New=dS.Ctor(function(){r.New.call(this);},z);A.rtn=function(){bY.$cctor();return bY.rtn$1;};A.depend=function(){bY.$cctor();return bY.depend$1;};A.op_GreaterGreaterEquals=function(dY,dZ){return y.bind(dZ,dY);};A.op_BarGreaterGreater=function(dY,dZ){return(y.map(dZ))(dY);};A.op_BarMultiplyGreater=function(dY,dZ){return y.apply(dZ,(A.rtn())(dY));};A.op_GreaterEqualsMultiply=function(dY,dZ){return y.apply(dZ,dY);};A.op_LessMultiplyGreater=function(dY,dZ){return y.apply(dY,dZ);};A.op_GreaterMultiplyGreater=function(dY,dZ){var d0;d0=A.depend();return d0.Delay(function(){return d0.Bind(dZ,function(d1){return d0.Return(function(d2){return d1(dY(d2));});});});};B.checkError=function(){return{$:0,$0:function(){return true;}};};B.checkErrorW=function(){return{$:0,$0:function(){return false;}};};B.rtn=function(dY){return l.OkM$1(dY);};B.rtnM=function(dY){return l.OkMWithMsg(null,dY);};B.rtnr=function(dY){return u.defaultWith(l.ErrorM,b0.Map(l.OkM$1,dY));};B.freeMessage=function(dY){return dY.$==1?c.Error(j.freeMessage(dY.$0)):{$:0,$0:dY.$0};};B.toResult=function(dY){return dY.$0==null?c.Error(dY.$1):{$:0,$0:dY.$0.$0};};B.toResultD=function(dY){return dY.$0==null?c.Error(dY.$1):{$:0,$0:[dY.$0.$0,dY.$1]};};B.toOption=function(dY){return dY.$0;};B.defaultWith=function(dY,dZ){return u.defaultWith(dY,B.toResult(dZ));};B.defaultValue=function(dY,dZ){return u.defaultValue(dY,B.toResult(dZ));};B.map=function(dY,dZ){var d0;return{$:0,$0:(d0=dZ.$0,d0==null?null:{$:1,$0:dY(d0.$0)}),$1:dZ.$1};};B.mapMessage=function(dY,dZ){return{$:0,$0:dZ.$0,$1:dY(dZ.$1)};};B.bind=function(dY,dZ){var d0;return dZ.$0==null?{$:0,$0:null,$1:dZ.$1}:(d0=dZ.$1,B.mapMessage(function(d1){return j.addMsg(d0,d1);},dY(dZ.$0.$0)));};B.bindP=function(dY,dZ){var d0;if(dZ.$0==null)return{$:0,$0:null,$1:dZ.$1};else{d0=dZ.$1;try{return B.mapMessage(function(d1){return j.addMsg(d0,d1);},dY(dZ.$0.$0));}catch(d1){return l.ErrorM(new j({$:5,$0:d1.message,$1:d1.stack}));}}};B.bindM=function(dY,dZ){return B.bindP(dY,B.rtnM(dZ));};B.check=function(dY,dZ){var d0;return(d0=dZ.$0,d0!=null&&d0.$==1)?j.isFatalF(dY.$0,dZ.$1)?l.ErrorM(dZ.$1):dZ:dZ;};B.mapP=function(dY,dZ){return B.bindP(function(d0){return B.rtn(dY(d0));},dZ);};B.iter=function(dY,dZ,d0){var d1;d1=B.mapP(dZ,d0);d1.$0==null?dY(d1.$1):void 0;};B.get=function(dY){return B.defaultWith(function(dZ){return bM.FailWith(a.String(dZ));},dY);};B.ofOption=function(dY,dZ){var d0;d0=dZ==null?null:{$:1,$0:l.OkM$1(dZ.$0)};return d0==null?function(d1){return l.ErrorM(dY(d1));}():d0.$0;};B.ofResult=function(dY){return B.rtnr(dY);};B.insertO=function(dY){var dZ;dZ=dY==null?null:{$:1,$0:B.map(function(d0){return{$:1,$0:d0};},dY.$0)};return dZ==null?l.OkM$1(null):dZ.$0;};B.absorbO=function(dY,dZ){return B.bindP(function(d0){return B.ofOption(dY,d0);},dZ);};B.addMsg=function(dY,dZ){return B.mapMessage(function(d0){return j.addMsg(dY,d0);},dZ);};B.failIfFatalMsgF=function(dY,dZ){var d0;d0=l.OkM(dZ);return d0.$==0?j.isFatalF(dY,d0.$0[1])?l.ErrorM(d0.$0[1]):dZ:dZ;};B.failIfFatalMsg=function(dY){var dZ;dZ=l.OkM(dY);return dZ.$==0?j.isFatal(dZ.$0[1])?l.ErrorM(dZ.$0[1]):dY:dY;};B.failIfFatalMsgW=function(dY){var dZ;dZ=l.OkM(dY);return dZ.$==0?j.isFatalW(dZ.$0[1])?l.ErrorM(dZ.$0[1]):dY:dY;};B.op_GreaterGreaterEquals=function(dY,dZ){return B.bind(dZ,dY);};B.traverseSeq=function(dY,dZ){return B.map(a.id,bO.foldBack(function(d0,d1){return B.op_GreaterGreaterEquals(dY(d0),function(d2){return B.op_GreaterGreaterEquals(d1,function(d3){return B.rtn(new bZ({$:1,$0:d2,$1:d3}));});});},bO.ofSeq(dZ),B.rtn(bZ.Empty)));};B.sequenceSeq=function(dY){return B.traverseSeq(a.id,dY);};C=B.Builder=dS.Class({Return:function(dY){return B.rtn(dY);},ReturnFrom$2:a.id,ReturnFrom$1:a.id,ReturnFrom:function(dY){return B.rtnM(dY);},Bind$1:function(dY,dZ){return B.bindP(dZ,dY);},Bind:function(dY,dZ){return B.bindM(dZ,dY);},Zero:function(){return B.rtn();},Delay:a.id,Combine:function(dY,dZ){return B.bind(dZ,dY);},Run:function(dY){return B.bindP(dY,l.OkM$1());},TryWith:function(dY,dZ){try{return dY();}catch(d0){return dZ(d0);}},TryFinally:function(dY,dZ){try{return dY();}finally{dZ();}},Using:function(dY,dZ){try{return dZ(dY);}finally{dY.Dispose();}},While:function(dY,dZ){function d0(d1,d2){return d1()?B.bind(function(){return d0(d1,d2);},d2()):B.rtn();}return d0(dY,dZ);},For:function(dY,dZ){var d0;d0=this;return this.Using(cO.Get(dY),function(d1){return d0.While(function(){return d1.MoveNext();},d0.Delay(function(){return dZ(d1.Current());}));});}},r,C);C.New=dS.Ctor(function(){r.New.call(this);},C);D.op_BarGreaterGreater=function(dY,dZ){return B.mapP(dZ,dY);};D.op_GreaterGreaterEquals=function(dY,dZ){return B.bindP(dZ,dY);};D.op_RightShift=function(dY,dZ,d0){return D.op_BarGreaterGreater(dY(d0),dZ);};D.op_GreaterEqualsGreater=function(dY,dZ,d0){return D.op_GreaterGreaterEquals(dY(d0),dZ);};D.rtn=function(dY){return B.rtn(dY);};E.resultM=function(){bY.$cctor();return bY.resultM;};F.mapError=function(dY,dZ){function d0(d2){return B.mapMessage(dY,d2);}function d1(d2){return cM.Return(d2);}return cM.Bind(dZ,function(d2){return d1(d0(d2));});};F.freeMessage=function(dY){function dZ(d0){return cM.Return(d0);}return cM.Bind(dY,function(d0){return dZ(B.freeMessage(d0));});};F.rtn=function(dY){return cM.Return(l.OkM$1(dY));};F.rtnr=function(dY){return cM.Return(B.rtnr(dY));};F.rtnR=function(dY){return cM.Return(dY);};F.rtnM=function(dY){return cM.Return(B.rtnM(dY));};F.rtnrA=function(dY){function dZ(d0){return cM.Return(d0);}return cM.Bind(dY,function(d0){return dZ(B.ofResult(d0));});};F.errorMsgf=function(dY){var dZ;function d0(d2){return new j({$:1,$0:d2});}function d1(d2){return cM.Return(d2);}return dY((dZ=function(d2){return l.ErrorM(d0(d2));},function(d2){return d1(dZ(d2));}));};F.iterS=function(dY,dZ,d0){throw"iterS cannot be used in JavaScript!";};F.iterA=function(dY,dZ,d0){function d1(d3){B.iter(dY,dZ,d3);}function d2(d3){return cM.Return(d3);}cM.Start(cM.Bind(d0,function(d3){return d2(d1(d3));}),null);};F.iterpS=function(dY,dZ){function d0(d1){c.print(d1);}F.iterS(function(d1){return d0(j.summarized(d1));},dY,dZ);};F.iterpA=function(dY,dZ){function d0(d1){c.print(d1);}F.iterA(function(d1){return d0(j.summarized(d1));},dY,dZ);};F.bind=function(dY,dZ){var d0;d0=null;return cM.Delay(function(){return cM.TryWith(cM.Delay(function(){return cM.Bind(dZ,function(d1){var d2,d3;function d4(d6){return B.addMsg(d3,d6);}function d5(d6){return cM.Return(d6);}d2=l.OkM(d1);return d2.$==1?cM.Return(l.ErrorM(d2.$0)):(d3=d2.$0[1],cM.Bind(dY(d2.$0[0]),function(d6){return d5(d4(d6));}));});}),function(d1){return cM.Return(l.ErrorM(new j({$:5,$0:d1.message,$1:d1.stack})));});});};F.bindr=function(dY,dZ){return F.bind(dY,F.rtnr(dZ));};F.bindM=function(dY,dZ){return F.bind(dY,F.rtnM(dZ));};F.bindrA=function(dY,dZ){return F.bind(dY,F.rtnrA(dZ));};F.bindR=function(dY,dZ){return F.bind(dY,F.rtnR(dZ));};F.map=function(dY,dZ){return F.bind(function(d0){return F.rtn(dY(d0));},dZ);};F.whileLoop=function(dY,dZ){return dY()?F.bind(function(){return F.whileLoop(dY,dZ);},dZ()):F.rtn();};F.op_GreaterGreaterEquals=function(dY,dZ){return F.bind(dZ,dY);};F.traverseSeq=function(dY,dZ){return F.map(a.id,bO.foldBack(function(d0,d1){return F.op_GreaterGreaterEquals(dY(d0),function(d2){return F.op_GreaterGreaterEquals(d1,function(d3){return F.rtn(new bZ({$:1,$0:d2,$1:d3}));});});},bO.ofSeq(dZ),F.rtn(bZ.Empty)));};F.sequenceSeq=function(dY){return F.traverseSeq(a.id,dY);};F.insertO=function(dY){var dZ;dZ=dY==null?null:{$:1,$0:F.map(function(d0){return{$:1,$0:d0};},dY.$0)};return dZ==null?F.rtn(null):dZ.$0;};F.insertR=function(dY){return dY.$==0?F.map(function(dZ){return{$:0,$0:dZ};},dY.$0):F.rtn(c.Error(dY.$0));};F.absorbR=function(dY){var dZ;function d0(d1){return cM.Return(d1);}return cM.Bind(dY,(dZ=function(d1){return B.bindP(a.id,d1);},function(d1){return d0(dZ(d1));}));};F.absorbO=function(dY,dZ){function d0(d2){return B.absorbO(dY,d2);}function d1(d2){return cM.Return(d2);}return cM.Bind(dZ,function(d2){return d1(d0(d2));});};F.getResultM=function(dY){function dZ(d0){return cM.Return(d0);}return cM.Bind(dY,function(d0){return dZ(l.OkM$1(d0));});};G=F.AsyncResultMBuilder=dS.Class({ReturnFrom$4:a.id,ReturnFrom$3:function(dY){return F.rtnr(dY);},ReturnFrom$2:function(dY){return F.rtnM(dY);},ReturnFrom$1:function(dY){return F.rtnR(dY);},ReturnFrom:function(dY){return F.rtnrA(dY);},Return:function(dY){return F.rtn(dY);},Zero:function(){return F.rtn();},Bind$4:function(dY,dZ){return F.bind(dZ,dY);},Bind$3:function(dY,dZ){return F.bindr(dZ,dY);},Bind$2:function(dY,dZ){return F.bindM(dZ,dY);},Bind$1:function(dY,dZ){return F.bindR(dZ,dY);},Bind:function(dY,dZ){return F.bindrA(dZ,dY);},Combine$1:function(dY,dZ){return F.bind(dZ,dY);},Combine:function(dY,dZ){return F.bind(dZ,F.rtnR(dY));},Delay:a.id,Run:function(dY){return F.bind(dY,F.rtn());},TryWith:function(dY,dZ){var d0;d0=null;return cM.Delay(function(){return cM.TryWith(cM.Delay(function(){return dY();}),function(d1){return dZ(d1);});});},TryFinally:function(dY,dZ){var d0;d0=null;return cM.Delay(function(){return cM.TryFinally(cM.Delay(function(){return dY();}),function(){dZ();});});},Using:function(dY,dZ){return cM.Using(dY,dZ);},While:function(dY,dZ){return F.whileLoop(dY,dZ);},For:function(dY,dZ){var d0;d0=this;return this.Using(cO.Get(dY),function(d1){return d0.While(function(){return d1.MoveNext();},d0.Delay(function(){return dZ(d1.Current());}));});}},r,G);G.New=dS.Ctor(function(){r.New.call(this);},G);H.op_BarGreaterGreater=function(dY,dZ){return F.map(dZ,dY);};H.op_GreaterGreaterEquals=function(dY,dZ){return F.bind(dZ,dY);};H.op_GreaterMinusGreater=function(dY,dZ,d0){return H.op_BarGreaterGreater(dY(d0),dZ);};H.op_GreaterEqualsGreater=function(dY,dZ,d0){return H.op_GreaterGreaterEquals(dY(d0),dZ);};H.rtn=function(dY){return F.rtn(dY);};I.asyncResultM=function(){bY.$cctor();return bY.asyncResultM;};I["AsyncResultMBuilder.ReturnFrom"]=function(dY,dZ){function d0(d1){return cM.Return(d1);}return cM.Bind(dZ,function(d1){return d0(l.OkM$1(d1));});};I["AsyncResultMBuilder.Bind"]=function(dY,dZ,d0){function d1(d2){return cM.Return(d2);}return F.bind(d0,cM.Bind(dZ,function(d2){return d1(l.OkM$1(d2));}));};I["AsyncResultMBuilder.Combine"]=function(dY,dZ,d0){function d1(d2){return cM.Return(d2);}return F.bind(d0,cM.Bind(dZ,function(d2){return d1(l.OkM$1(d2));}));};J.splitByChar=function(dY,dZ){return bU.SplitChars(dZ,[dY],0);};J.splitInTwoO=function(dY,dZ){var d0;d0=dZ.indexOf(dY);return d0===-1?null:{$:1,$0:[c["String.Left"](dZ,d0),dZ.substring(d0+dY.length)]};};J.delimitedO=function(dY,dZ,d0){var d1,d2,d3,d4,d5;d1=J.splitInTwoO(dY,d0);return d1==null?null:(d2=d1.$0,(d3=d2[0],(d4=J.splitInTwoO(dZ,d2[1]),d4==null?null:{$:1,$0:(d5=d4.$0,[d3,d5[0],d5[1]])})));};J.contains=function(dY,dZ){return dZ.indexOf(dY)!=-1;};J.trim=function(dY){return bU.Trim(dY);};J.append=function(dY,dZ){return dY+dZ;};J.skipFirstLine=function(dY){var dZ;dZ=dY.indexOf("\n");return dZ<0?"":bP.string(dY,{$:1,$0:dZ+1},null);};J.unindent=function(dY){var dZ,d0,d1,d2;dZ=bU.SplitChars(dY,["\n"],0);d0=(d1=bT.tryFindIndex(function(d3){return" "!==d3;},(d2=bT.tryFind(function(d3){return bU.Trim(d3)!=="";},dZ),d2==null?"":d2.$0)),d1==null?0:d1.$0);return bT.filter(function(d3){return!bU.StartsWith(d3,"# 1 ");},bT.map(function(d3){return d3.length<=d0?"":d3.substring(d0);},dZ));};J.indent=function(dY,dZ){var d0,d1;d0=bU.SplitChars(dZ,["\n"],0);return bT.map((d1=bU.replicate(dY," "),function(d2){return d1+d2;}),d0);};J.unindentStr=function(){bY.$cctor();return bY.unindentStr;};J.indentStr=function(dY){function dZ(d1){return J.indent(dY,d1);}function d0(d1){return bU.concat("\n",d1);}return function(d1){return d0(dZ(d1));};};J.skipLastLine=function(){bY.$cctor();return bY.skipLastLine;};J.StartsWith=function(dY,dZ){return bU.StartsWith(dZ,dY)?{$:1,$0:bP.string(dZ,{$:1,$0:dY.length},null)}:null;};J.EndsWith=function(dY,dZ){return bU.EndsWith(dZ,dY)?{$:1,$0:bP.string(dZ,{$:1,$0:0},{$:1,$0:dZ.length-dY.length-1})}:null;};J.thousands=function(dY){var dZ,d0,d1;dZ=a.String(dY);d0=dZ.length%3;d1=d0===0?3:d0;return bU.concat(",",bV.ofSeq(bT.delay(function(){return bT.append([bP.string(dZ,{$:1,$0:0},{$:1,$0:d1-1})],bT.delay(function(){return bT.map(function(d2){return bP.string(dZ,{$:1,$0:d2*3+d1},{$:1,$0:d2*3+d1+2});},bM.range(0,((dZ.length-d1)/3>>0)-1));}));})));};K.tryParseWith=function(dY){function dZ(d0,d1){return d0?{$:1,$0:d1}:null;}return function(d0){return dZ.apply(null,dY(d0));};};K.parseDateO2=function(){bY.$cctor();return bY.parseDateO2;};K.parseDateO=function(){bY.$cctor();return bY.parseDateO;};K.parseIntO=function(){bY.$cctor();return bY.parseIntO;};K.parseInt64O=function(){bY.$cctor();return bY.parseInt64O;};K.parseSingleO=function(){bY.$cctor();return bY.parseSingleO;};K.parseDoubleO=function(){bY.$cctor();return bY.parseDoubleO;};K.parseGuidO=function(){bY.$cctor();return bY.parseGuidO;};K.Date=function(){bY.$cctor();return bY["|Date|_|"];};K.Int=function(){bY.$cctor();return bY["|Int|_|"];};K.Int64=function(){bY.$cctor();return bY["|Int64|_|"];};K.Single=function(){bY.$cctor();return bY["|Single|_|"];};K.Double=function(){bY.$cctor();return bY["|Double|_|"];};K.Guid=function(){bY.$cctor();return bY["|Guid|_|"];};L.serialize=function(dY,dZ,d0){return[dY,dZ][0](d0);};L.Field=function(dY,dZ){return dZ.tryField(dY);};L.sprintA=function(dY){var dZ;dZ=bU.concat(", ",dY);return(function(d0){return function(d1){return d0("["+bN.toSafe(d1)+"]");};}(a.id))(dZ);};L.toJsonString=function(dY){return bO.ofSeq(bT.delay(function(){return bT.append(["\""],bT.delay(function(){return bT.append(!bU.IsNullOrEmpty(dY)?bT.collect(function(dZ){var d0,d1;d0=dY[dZ];d1=d0.charCodeAt();return d1>=0&&d1<=7||d1===11||d1>=14&&d1<=31?(function(d2){return function(d3){return d2("\\u"+bN.padNumLeft(d3.toString(16),4));};}(a.id))(d1):d0==="\u0008"?"\\b":d0==="\u0009"?"\\t":d0==="\n"?"\\n":d0==="\u000c"?"\\f":d0==="\r"?"\\r":d0==="\""?"\\\"":d0==="\\"?"\\\\":[d0];},bM.range(0,dY.length-1)):[],bT.delay(function(){return["\""];}));}));})).join("");};L.serString=function(){bY.$cctor();return bY.serString;};L.serFloat=function(){bY.$cctor();return bY.serFloat;};L.serInt=function(){bY.$cctor();return bY.serInt;};L.serInt64=function(){bY.$cctor();return bY.serInt64;};L.serBool=function(){bY.$cctor();return bY.serBool;};L.serDate=function(){bY.$cctor();return bY.serDate;};L.serField=function(dY,dZ,d0,d1,d2){var d3;function d4(d5){return{$:1,$0:d5};}return[dY,(d3=function(d5){return d1(dZ(d5));},function(d5){return d4(d3(d5));}),function(d5){var d6,d7,d8;function d9(d$){return d0(d$,d5);}function d_(d$){return d$==null?d5:d$.$0;}d6=(d7=(d8=function(d$){return d$==null?null:{$:1,$0:d9(d$.$0)};},function(d$){return d8(d2(d$));}),function(d$){return d$==null?null:d7(d$.$0);});return function(d$){return d_(d6(d$));};}];};L.serFieldO=function(dY,dZ,d0,d1,d2){function d3(d4){return d4==null?null:{$:1,$0:d1(d4.$0)};}return[dY,function(d4){return d3(dZ(d4));},function(d4){var d5,d6;function d7(d9){return d0(d9,d4);}function d8(d9){return d9==null?d4:d9.$0;}d5=(d6=function(d9){return d7(d2(d9));},function(d9){return d9==null?null:{$:1,$0:d6(d9.$0)};});return function(d9){return d8(d5(d9));};}];};L.serSeq=function(dY,dZ){var d0,d1,d2;d0=[dY,dZ];return[(d1=(d2=d0[0],function(d3){return bT.map(d2,d3);}),function(d3){return L.sprintA(d1(d3));}),function(d3){var d4,d5,d6,d7;d4=(d5=d3.tryArray(),(d6=(d7=d0[1],function(d8){return bO.choose(d7,d8);}),d5==null?null:{$:1,$0:d6(d5.$0)}));return d4==null?null:{$:1,$0:d4.$0};}];};L.serArr=function(dY,dZ){var d0,d1,d2;d0=[dY,dZ];return[(d1=(d2=d0[0],function(d3){return bO.map(d2,d3);}),function(d3){return L.sprintA(d1(d3));}),function(d3){var d4,d5,d6;d4=d3.tryArray();d5=(d6=d0[1],function(d7){return bO.choose(d6,d7);});return d4==null?null:{$:1,$0:d5(d4.$0)};}];};L.serLst=function(dY,dZ){var d0,d1,d2;d0=[dY,dZ];return[(d1=(d2=d0[0],function(d3){return bV.map(d2,d3);}),function(d3){return L.sprintA(d1(d3));}),function(d3){var d4,d5,d6,d7;d4=(d5=d3.tryArray(),(d6=(d7=d0[1],function(d8){return bO.choose(d7,d8);}),d5==null?null:{$:1,$0:d6(d5.$0)}));return d4==null?null:{$:1,$0:bV.ofSeq(d4.$0)};}];};L.serSet=function(dY,dZ){var d0,d1,d2;d0=[dY,dZ];return[(d1=(d2=d0[0],function(d3){return new b3.New$1(cT.OfSeq(bT.map(d2,d3)));}),function(d3){return L.sprintA(d1(d3));}),function(d3){var d4,d5,d6,d7;d4=(d5=d3.tryArray(),(d6=(d7=d0[1],function(d8){return bO.choose(d7,d8);}),d5==null?null:{$:1,$0:d6(d5.$0)}));return d4==null?null:{$:1,$0:new b3.New(d4.$0)};}];};L.serOpt=function(dY,dZ){var d0,d1,d2;function d3(d4){return d4==null?"null":d4.$0;}d0=[dY,dZ];return[(d1=(d2=d0[0],function(d4){return d4==null?null:{$:1,$0:d2(d4.$0)};}),function(d4){return d3(d1(d4));}),function(d4){return{$:1,$0:d4.isNull()?null:d0[1](d4)};}];};L.serDup=function(dY,dZ){return[function(d0){return(((dS.Curried3(function(d1,d2,d3){return d1("["+bN.toSafe(d2)+", "+bN.toSafe(d3)+"]");}))(a.id))(dY[0](d0[0])))(dZ[0](d0[1]));},function(d0){var d1,d2,d3,d4,d5,d6;d1=d0.tryArray();return d1!=null&&d1.$==1&&((d3=d1.$0,!bQ.Equals(d3,null)&&d3.length===2)&&(d2=[bO.get(d1.$0,0),bO.get(d1.$0,1)],true))?(d4=dY[1](d2[0]),(d5=dZ[1](d2[1]),d4!=null&&d4.$==1&&(d5!=null&&d5.$==1&&(d6=[d4.$0,d5.$0],true))?{$:1,$0:[d6[0],d6[1]]}:null)):null;}];};L.serTrp=function(dY,dZ,d0){return[function(d1){return((((dS.Curried(function(d2,d3,d4,d5){return d2("["+bN.toSafe(d3)+", "+bN.toSafe(d4)+", "+bN.toSafe(d5)+"]");},4))(a.id))(dY[0](d1[0])))(dZ[0](d1[1])))(d0[0](d1[2]));},function(d1){var d2,d3,d4,d5,d6,d7,d8;d2=d1.tryArray();return d2!=null&&d2.$==1&&((d4=d2.$0,!bQ.Equals(d4,null)&&d4.length===3)&&(d3=[bO.get(d2.$0,0),bO.get(d2.$0,1),bO.get(d2.$0,2)],true))?(d5=dY[1](d3[0]),(d6=dZ[1](d3[1]),(d7=d0[1](d3[2]),d5!=null&&d5.$==1&&(d6!=null&&d6.$==1&&(d7!=null&&d7.$==1&&(d8=[d5.$0,d6.$0,d7.$0],true)))?{$:1,$0:[d8[0],d8[1],d8[2]]}:null))):null;}];};L.serPair=function(dY,dZ,d0,d1){return L.serDup([dY,dZ],[d0,d1]);};L.serMap=function(dY,dZ,d0,d1){var d2,d3,d4,d5,d6,d7;function d8(d_){return[d_.K,d_.V];}function d9(d_){return new b4.New(d_);}d2=(d3=L.serDup([dY,dZ],[d0,d1]),L.serSeq(d3[0],d3[1]));return[(d4=function(d_){return bT.map(d8,d_);},(d5=d2[0],function(d_){return d5(d4(d_));})),(d6=d2[1],(d7=function(d_){return d_==null?null:{$:1,$0:d9(d_.$0)};},function(d_){return d7(d6(d_));}))];};L.serTypedRegisters=function(){bY.$cctor();return bY.serTypedRegisters;};L.map=function(dY,dZ,d0,d1){function d2(d3){return d3==null?null:{$:1,$0:dZ(d3.$0)};}return[function(d3){return d0(dY(d3));},function(d3){return d2(d1(d3));}];};L.mapO=function(dY,dZ,d0,d1){function d2(d3){return d3==null?null:dZ(d3.$0);}return[function(d3){return d0(dY(d3));},function(d3){return d2(d1(d3));}];};L.serC=function(dY,dZ,d0){return L.mapO(function(){return d0;},function(d1){return bQ.Equals(d1,d0)?{$:1,$0:null}:null;},dY,dZ);};L.serCn=function(dY,dZ,d0){return L.map(a.ignore,a.ignore,dY,dZ);};L.serGuid=function(){bY.$cctor();return bY.serGuid;};M.New=function(dY,dZ,d0,d1,d2,d3,d4,d5,d6){return{tryFloat:dY,tryInt:dZ,tryString:d0,tryBool:d1,tryArray:d2,tryField:d3,isObject:d4,isNull:d5,toString:d6};};N.New=function(dY,dZ,d0,d1,d2,d3,d4){return{snpId:dY,snpName:dZ,snpContent:d0,snpParentIdO:d1,snpPredIds:d2,snpProperties:d3,snpModified:d4};};O.getNextModified=function(){return dT.now();};O.New=function(dY,dZ,d0){return N.New(f.Tag$4(bL.NewGuid()),dY,dZ,d0,new b3.New$1(null),[],O.getNextModified());};O.defaultSnippet=function(){bY.$cctor();return bY.defaultSnippet;};O.indirectPredecessorIds=function(dY,dZ,d0,d1){var d2;d2=new b3.New(bW.toArray(d0));return function(d3,d4,d5){var d6,d7,d8,d9,d_,d$,ea,eb;while(true)if(d5.get_IsEmpty())return d3;else{d6=bT.head(d5);d7=d5.Remove(d6);d8=d4.Add(d6);d9=dY(d6);if(d9!=null&&d9.$==1){d_=d9.$0;d$=b3.op_Addition(new b3.New(bW.toArray(d_.snpParentIdO)),new b3.New(d_.snpPredIds));ea=b3.op_Addition(d3,d$);eb=b3.op_Addition(d7,b3.op_Subtraction(d$,d8));d3=ea;d4=d8;d5=eb;}else{d4=d8;d5=d7;}}}(d2,(new b3.New$1(null)).Add(dZ),b3.op_Addition(d2,d1));};O.allPredecessors=function(dY,dZ){var d0;d0=new b3.New(bW.toArray(dZ.snpParentIdO));return function(d1,d2,d3){var d4,d5,d6,d7,d8,d9,d_,d$;while(true)if(d3.get_IsEmpty())return d1;else{d4=bT.head(d3);d5=d3.Remove(d4);d6=d2.Add(d4);d7=dY(d4);if(d7!=null&&d7.$==1){d8=d7.$0;d9=b3.op_Addition(new b3.New(bW.toArray(d8.snpParentIdO)),new b3.New(d8.snpPredIds));d_=d1.Add(d8);d$=b3.op_Addition(d5,b3.op_Subtraction(d9,d6));d1=d_;d2=d6;d3=d$;}else{d2=d6;d3=d5;}}}(new b3.New$1(null),(new b3.New$1(null)).Add(dZ.snpId),b3.op_Addition(d0,new b3.New(dZ.snpPredIds)));};O.getLevel=function(dY,dZ){var d0,d1,d2,d3;d0=0;d1=dZ;while(true){d3=(d2=d1.snpParentIdO,d2==null?null:dY(d2.$0));if(d3!=null&&d3.$==1){d0=d0+1;d1=d3.$0;}else return d0;}};O.hasChildren=function(dY,dZ){var d0,d1,d2,d3;d0=dY();d1=bT.tryFindIndex(function(d4){return bQ.Equals(d4.snpId,dZ.snpId);},d0);return d1!=null&&d1.$==1&&(d2=(d3=bT.tryItem(d1.$0+1,d0),d3==null?null:{$:1,$0:bQ.Equals(d3.$0.snpParentIdO,{$:1,$0:dZ.snpId})}),d2==null?false:d2.$0);};P.serSnippetId=function(){bY.$cctor();return bY.serSnippetId;};P.serSnippet=function(){bY.$cctor();return bY.serSnippet;};P.getModel=function(dY,dZ,d0){return Q.New(bO.ofSeq(dY),dZ,d0);};P.serModel=function(){bY.$cctor();return bY.serModel;};Q.New=function(dY,dZ,d0){return{snippets:dY,modified:dZ,collapsed:d0};};S.defineWebComponent=function(dY,dZ,d0){try{dQ.log("defineWebComponent: "+dY);cN.setPrototypeOf(d0.prototype,self.HTMLElement.prototype);cN.setPrototypeOf(d0,self.HTMLElement);cN.setPrototypeOf(dZ.prototype,d0.prototype);self.customElements.define(dY,dZ);}catch(d1){(function(d2){return d2("Failed to define WebComponent. Not supported.");}(function(d2){dQ.log(d2);}));}};T.css=function(){bY.$cctor();return bY.css;};T.tabStrip=function(dY,dZ,d0,d1,d2){var d3;d3=ca.Element("div",[cD.Create("class",(((dS.Curried3(function(d4,d5,d6){return d4("tab-strip "+bN.toSafe(d5)+" "+bN.toSafe(d6));}))(a.id))(dZ?"top":"bottom"))(d0?"horizontal":"vertical"))],bV.ofSeq(bT.delay(function(){return bT.collect(function(d4){var d5;d5=d4[0];return[b9.New$1().Content(ca.Element("div",[cB.Dynamic("class",b_.Map(function(d6){return"tab"+(d6===d5+1?" selected":"");},dY.get_View())),cD.Create("draggable","true"),cD.HandlerImpl("click",function(){return function(){return dY.Set(d5+1);};})],[ca.TextNode(d4[1][0])]))];},bT.indexed(d1));})));return ca.Element("div",[cD.Create("class","tab-panel")],bV.ofSeq(bT.delay(function(){return bT.append(dZ?[d3]:[],bT.delay(function(){return bT.append([ca.Element("div",[cD.Create("class","tab-content")],[d2])],bT.delay(function(){return bT.append(!dZ?[d3]:[],bT.delay(function(){return bT.append([ca.Element("style",bZ.Empty,bV.ofArray([ca.TextNode(T.css())]))],bT.delay(function(){return[ca.Element("style",bZ.Empty,bV.ofArray([ca.TextView(b_.Map(function(d4){return function(d5){return d4("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(d5)+")) { display: grid }\r\n                                           ");};}(a.id),dY.get_View()))]))];}));}));}));}));})));};T.init=function(){bY.$cctor();return bY.init;};U=T.WcTabStripT=dS.Class({connectedCallback:function(){var dY,dZ,d0,d1;function d2(){var d3,d4,d5;d4=!dZ.hasAttribute("bottom");d5=bV.ofSeq(bT.delay(function(){return bT.collect(function(d6){var d7;d7=dZ.childNodes[d6-1];return bQ.Equals(d7.nodeType,cg.ELEMENT_NODE)?[[d7.hasAttribute("tabname")?d7.getAttribute("tabname"):(function(d8){return function(d9){return d8("Tab "+a.String(d9));};}(a.id))(d6),d7]]:[];},bM.range(1,dZ.childNodes.length));}));while(d1.childNodes.length>0)d1.removeChild(d1.lastChild);d3=T.tabStrip(dY.selected,d4,true,d5,ca.Element("slot",bZ.Empty,bZ.Empty));c1.LoadLocalTemplates("");ca.Run(d1,d3);}dY=this;!this.added?(dZ=this,d0=dZ.attachShadow({mode:"open"}),d1=self.document.createElement("div"),d0.appendChild(d1),d2(),dZ.addEventListener("DOMSubtreeModified",c.delayed(50,d2)),this.added=true):void 0;}},r,U);U.Constructor=function(){var dY,dZ;dY=(dZ=dU.construct(self.HTMLElement,[],this.__proto__.constructor),dZ);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dY);return dY;};U.New=dS.Ctor(function(){r.New.call(this);this.added=false;this.selected=cc.Create$1(1);(function(dY){return dY("WcTabStripT initializer");}(function(dY){dQ.log(dY);}));},U);V.set_layoutHorizontal=function(dY){bY.$cctor();bY.layoutHorizontal=dY;};V.layoutHorizontal=function(){bY.$cctor();return bY.layoutHorizontal;};V.set_layoutVertical=function(dY){bY.$cctor();bY.layoutVertical=dY;};V.layoutVertical=function(){bY.$cctor();return bY.layoutVertical;};V.init=function(dY,dZ){var d0;d0=new W.New();V.set_layoutHorizontal(dY);V.set_layoutVertical(dZ);S.defineWebComponent("wcomp-splitter",W.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};W=V.WcSplitterT=dS.Class({connectedCallback:function(){var dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;function ec(ek){var el,em,en,eo;el=d5?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];em=a.parseFloat("0"+a.jQuery(ek.parentElement.parentElement).css(el[0]));en=a.parseFloat("0"+a.jQuery(ek.parentElement.parentElement).css(el[1]));d8.Set(a.parseFloat("0"+a.jQuery(ek.parentElement.parentElement).css(el[2])));d7[0]=em+en;eo=dY.getBoundingClientRect();return d5?d4?[eo.width,eo.height]:[-eo.width,eo.height]:d4?[eo.height,eo.width]:[-eo.height,eo.width];}function ed(ek){return d5?ek.clientX:ek.clientY;}function ee(ek){var el,em;el=(ed(ek)-d$[0])*100/d6[0][0]+d_[0];d3.Set((em=bQ.Compare(d1,el)===1?d1:el,bQ.Compare(d2,em)===-1?d2:em));}function ef(){if(d9[0]){d9[0]=false;self.removeEventListener("mousemove",ee,false);self.removeEventListener("mouseup",ef,false);}}function eg(ek){var el,em;if(!d9[0]){d9[0]=true;d_[0]=d3.Get();d$[0]=ed(ek);d6[0]=(el=(em=ea[0],em==null?null:{$:1,$0:ec(em.$0)}),el==null?[100,500]:el.$0);self.addEventListener("mousemove",ee,false);self.addEventListener("mouseup",ef,false);ek.preventDefault();}}function eh(ek,el,em,en){return[(ek-el-em)*en/100,(ek-el-em)*(100-en)/100];}function ei(ek,el){return(((((dS.Curried(function(em,en,eo,ep,eq){return em(" "+en.toFixed(2)+"px "+eo.toFixed(2)+"px ; "+bN.toSafe(ep)+" : "+eq.toFixed(2)+"px; ");},5))(a.id))(ek))(el))(d5?"height":"width"))(d6[0][1]);}function ej(){var ek;ek=ea[0];(n.iter(function(el){d6[0]=ec(el);}))(ek);d3.Set(d3.Get());}if(!this.added){dY=this;dZ=dY.attachShadow({mode:"open"});d0=self.document.createElement("div");d1=dY.hasAttribute("min")?a.parseFloat(dY.getAttribute("min")):4;d2=dY.hasAttribute("max")?a.parseFloat(dY.getAttribute("max")):96;d3=cc.Create$1(dY.hasAttribute("value")?a.parseFloat(dY.getAttribute("value")):50);d4=!dY.hasAttribute("second");d5=dY.hasAttribute("vertical");d6=[[0,0]];d7=[0];d8=cc.Create$1(0);d9=[false];d_=[0];d$=[0];ea=[null];eb=(((((d5?V.layoutVertical():V.layoutHorizontal())(b_.Map(function(ek){var el;el=eh(d6[0][0],d8.Get(),d7[0],ek);return ei.apply(null,el);},d3.get_View())))(function(){ck.addResizeObserver(ej,dY);ej();}))(function(ek){ea[0]={$:1,$0:ek};ej();}))(function(ek){eg(ek);}))(b_.Map(function(ek){return function(el){return ek(bN.prettyPrint(el)+"px");};}(a.id),d8.get_View()));c1.LoadLocalTemplates("");ca.Run(d0,eb);dZ.appendChild(d0.firstChild);this.added=true;}}},r,W);W.Constructor=function(){var dY,dZ;dY=(dZ=dU.construct(self.HTMLElement,[],this.__proto__.constructor),dZ);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dY);return dY;};W.New=dS.Ctor(function(){r.New.call(this);this.added=false;(function(dY){return dY("WcSplitterT initializer");}(function(dY){dQ.log(dY);}));},W);X.newVar=function(dY){return _6.New(dY,a.ignore,null,null,b_.Const(false),null,null);};X.loader=function(){bY.$cctor();return bY.loader;};X.render=function(dY){var dZ;return ca.Async((dZ=null,cM.Delay(function(){return cM.Bind(X.loader(),function(){return cM.Return(ca.Element("div",[cD.OnAfterRenderImpl(function(d0){var d1,d2;d1=(d2=d0.parentElement,self.monaco.editor.create(d2,dY.options,dY.overrides));ck.addResizeObserver(function(){d1.layout();},d0.parentElement);d0.parentNode.removeChild(d0);dY.editorO={$:1,$0:d1};(n.iter(function(d3){d3(d1);}))(dY.onRender);cl.bindVarEditor(function(d3){d1.onDidChangeModelContent(d3);},function(){return d1.getValue();},function(d3){d1.setValue(d3);},dY.onChange,dY["var"]);})],[]));});})));};X.setVar=function(dY,dZ){return _6.New(dY,dZ.onChange,dZ.onRender,dZ.editorO,dZ.disabled,dZ.options,dZ.overrides);};X.onChange=function(dY,dZ){return _6.New(dZ["var"],dY,dZ.onRender,dZ.editorO,dZ.disabled,dZ.options,dZ.overrides);};X.onRender=function(dY,dZ){return _6.New(dZ["var"],dZ.onChange,{$:1,$0:dY},dZ.editorO,dZ.disabled,dZ.options,dZ.overrides);};X.disabled=function(dY,dZ){return _6.New(dZ["var"],dZ.onChange,dZ.onRender,dZ.editorO,dY,dZ.options,dZ.overrides);};X["var"]=function(dY){return dY["var"];};X.newText=function(dY){return X.newVar(cc.Create$1(dY));};X.newVarO=function(dY){var dZ;dZ=X.newVar(cc.Lens(dY,function(d0){return d0==null?"":d0.$0;},function(d0,d1){return d0==null?null:{$:1,$0:d1};}));return X.disabled(b_.Map(function(d0){return d0==null;},dY.get_View()),dZ);};Y.New=function(dY,dZ){return{column:dY,lineNumber:dZ};};Z.New=function(dY,dZ,d0,d1){return{startColumn:dY,endColumn:dZ,startLineNumber:d0,endLineNumber:d1};};_0.New=function(dY,dZ){return{range:dY,uri:dZ};};_1.New=function(dY,dZ){return{value:dY,isTrusted:dZ};};_2.New=function(dY,dZ,d0,d1,d2,d3){return{startColumn:dY,endColumn:dZ,startLineNumber:d0,endLineNumber:d1,severity:d2,message:d3};};_3.New=function(dY,dZ,d0){return{kind:dY,label:dZ,detail:d0};};_4.New=function(dY,dZ){return{contents:dY,range:dZ};};_5=X.Editor=dS.Class({},r,_5);_5.New=dS.Ctor(function(){r.New.call(this);},_5);_6.New=function(dY,dZ,d0,d1,d2,d3,d4){return{"var":dY,onChange:dZ,onRender:d0,editorO:d1,disabled:d2,options:d3,overrides:d4};};_7.iterEditor=function(dY,dZ){var d0;d0=dY.editorO;d0!=null&&d0.$==1?dZ(d0.$0):void 0;};_7.mapEditor=function(dY,dZ){var d0;d0=dY.editorO;return d0!=null&&d0.$==1?{$:1,$0:dZ(d0.$0)}:null;};_7.bindEditor=function(dY,dZ){var d0;d0=dY.editorO;return d0!=null&&d0.$==1?dZ(d0.$0):null;};_7.posGen2Ed=function(dY){return Y.New(dY.col,dY.line);};_7.posEd2Gen=function(dY){return cm.New(dY.lineNumber,dY.column);};_7.indexFromPos=function(dY,dZ){var d0;d0=_7.mapEditor(dY,function(d1){return d1.getModel().getOffsetAt(_7.posGen2Ed(dZ));});return d0==null?-1:d0.$0;};_7.posFromIndex=function(dY,dZ){var d0;d0=_7.mapEditor(dY,function(d1){return _7.posEd2Gen(d1.getModel().getPositionAt(dZ));});return d0==null?cm.New(1,1):d0.$0;};_7.convertGlyphChar=function(dY){return dY==="C"?6:dY==="E"?12:dY==="S"?11:dY==="I"?7:dY==="N"?8:dY==="M"?1:dY==="P"?9:dY==="F"?4:dY==="T"?6:dY==="K"?13:0;};_7.generateDoc=function(dY,dZ,d0){var d1;return ca.Async((d1=null,cM.Delay(function(){return cM.Bind(X.loader(),function(){return cM.Return(ca.Element("div",[cD.OnAfterRenderImpl(function(d2){var d3,d4;d3=(d4=d2.parentElement,self.monaco.editor.create(d4,dY.options,dY.overrides));ck.addResizeObserver(function(){d3.layout();},d2.parentElement);d2.parentNode.removeChild(d2);dY.editorO={$:1,$0:d3};d0(d3);d3.onDidChangeModelContent(dY.onChange);(n.iter(function(d5){var d6;d6=new _.New(d5(dZ));self.monaco.languages.registerHoverProvider("fsharp",d6);}))(dZ.toolTip);(n.iter(function(d5){var d6;d6=new $.New(d5(dZ));self.monaco.languages.registerDefinitionProvider("fsharp",d6);}))(dZ.declaration);(n.iter(function(d5){var d6;d6=new _9.New(d5(dZ));self.monaco.languages.registerCompletionItemProvider("fsharp",d6);}))(dZ.autoCompletion);})],[]));});})));};_7.getUri=function(dY){var dZ;dZ=_7.mapEditor(dY,function(d0){return a.String(d0.getModel().uri);});return dZ==null?"":dZ.$0;};_7.setUri=function(dY,dZ){_7.iterEditor(dY,function(d0){d0.getModel().uri=self.monaco.Uri.parse(dZ);});};_7.getValue=function(dY){var dZ;dZ=_7.mapEditor(dY,function(d0){return d0.getValue();});return dZ==null?"":dZ.$0;};_7.setValue=function(dY,dZ){_7.iterEditor(dY,function(d0){d0.setValue(dZ);});};_7.getWordAt=function(dY,dZ){return _7.bindEditor(dY,function(d0){var d1;d1=d0.getModel().getWordAtPosition(Y.New(dZ.col,dZ.line));return!d1?null:{$:1,$0:[d1.word,cm.New(dZ.line,d1.startColumn)]};});};_7.getSelect=function(dY){var dZ;dZ=_7.mapEditor(dY,function(d0){var d1;d1=d0.getSelection();return d0.getModel().getValueInRange(d1);});return dZ==null?"":dZ.$0;};_7.showAnnotations=function(dY,dZ){_7.iterEditor(dY,function(d0){var d1,d2;d1=bO.ofSeq(bT.map(function(d3){var d4;return _2.New(d3.startP.col,d3.endP.col,d3.startP.line,d3.endP.line,(d4=d3.severity,d4.$==0?8:d4.$==1?4:d4.$==3?1:2),d3.message);},dZ));d2=d0.getModel();self.monaco.editor.setModelMarkers(d2,"annotations",d1);});};_7.newHook=function(dY){function dZ(d0,d1){return _7.generateDoc(dY,d0,d1);}return cp.New(function(d0){return function(d1){return dZ(d0,d1);};},function(){return _7.getValue(dY);},function(d0){_7.setValue(dY,d0);},a.ignore,function(d0){_7.showAnnotations(dY,d0);},function(d0){return _7.posFromIndex(dY,d0);},function(d0){return _7.indexFromPos(dY,d0);},function(d0){return _7.getWordAt(dY,d0);},function(){return _7.getSelect(dY);},function(){return _7.getUri(dY);},function(d0){_7.setUri(dY,d0);},function(d0){dY.onChange=d0;});};_7.newRT=function(dY,dZ){return _8.New(null,a.ignore,dY,dZ);};_7.newVar=function(dY,dZ,d0){return cl.newVar(_7.newHook(_7.newRT(dY,dZ)),d0);};_8.New=function(dY,dZ,d0,d1){return{editorO:dY,onChange:dZ,options:d0,overrides:d1};};_9=_7.CompletionItemProvider=dS.Class({provideCompletionItems:function(dY,dZ,d0,d1){var d2,d3;d2=this;return cn.ofAsyncResultM((d3=I.asyncResultM(),d3.Run(d3.Delay(function(){return I["AsyncResultMBuilder.Bind"](d3,d2.autoComplete(cm.New(dZ.lineNumber,dZ.column)),function(d4){return d3.Return(bO.map(function(d5){return _3.New(_7.convertGlyphChar(d5.kind),d5.label,d5.detail);},d4));});}))));},resolveCompletionItem:function(dY,dZ){return _3.New(dY.kind,dY.label,"more details");}},r,_9);_9.New=dS.Ctor(function(dY){r.New.call(this);this.autoComplete=dY;},_9);_=_7.HoverProvider=dS.Class({provideHover:function(dY,dZ,d0){var d1,d2;d1=this;return cn.ofAsyncResultM((d2=I.asyncResultM(),d2.Run(d2.Delay(function(){return I["AsyncResultMBuilder.Bind"](d2,d1.toolTip(cm.New(dZ.lineNumber,dZ.column)),function(d3){return d3!=null&&d3.$==1?d2.Return(_4.New([_1.New(d3.$0,true)],null)):d2.Return(null);});}))));}},r,_);_.New=dS.Ctor(function(dY){r.New.call(this);this.toolTip=dY;},_);$=_7.DefinitionProvider=dS.Class({provideDefinition:function(dY,dZ,d0){var d1,d2;d1=this;return cn.ofAsyncResultM((d2=I.asyncResultM(),d2.Run(d2.Delay(function(){return I["AsyncResultMBuilder.Bind"](d2,d1.declaration(cm.New(dZ.lineNumber,dZ.column)),function(d3){var d4;return d3!=null&&d3.$==1?(d4=d3.$0[0],d2.Return(_0.New(Z.New(d4.col,d4.col,d4.line,d4.line),self.monaco.Uri.parse(d3.$0[1])))):d2.Return(null);});}))));}},r,$);$.New=dS.Ctor(function(dY){r.New.call(this);this.declaration=dY;},$);ba.plugIns=function(){bY.$cctor();return bY.plugIns;};ba.mainDocV=function(){bY.$cctor();return bY.mainDocV;};ba.TemplateFileName=function(){bY.$cctor();return bY.TemplateFileName;};ba.defaultPlugIn=function(){return bg.New(f.Tag$3(""),new cq.New$1(function(dY){return dY.varName;}),new cq.New$1(function(dY){return dY.viwName;}),new cq.New$1(function(dY){return dY.docName;}),new cq.New$1(function(dY){return dY.actName;}),new cq.New$1(function(dY){return dY.qryName;}));};ba.splitName=function(dY){function dZ(d1){return J.splitByChar(".",d1);}function d0(d1){return bO.length(d1)===1?[dY,f.Tag$3(bU.Trim(bO.get(d1,0)))]:[f.Tag$3(bU.Trim(bO.get(d1,0))),f.Tag$3(bU.Trim(bO.get(d1,1)))];}return function(d1){return d0(dZ(d1));};};ba.selectionPlugInO=function(){bY.$cctor();return bY.selectionPlugInO;};ba.currentPlugInW=function(){bY.$cctor();return bY.currentPlugInW;};ba.currentPlugInV=function(){bY.$cctor();return bY.currentPlugInV;};ba.renderPlugIns=function(){return ca.Flatten(ba.plugIns().MapLens(function(dY){var dZ,d0,d1,d2,d3;return(dZ=(d0=(d1=f.Untag$3(dY),cv.Make().WithHole({$:1,$0:"name",$1:d1})),d0.WithHole(cw.EventQ2(d0.k,"select",function(){return d0.i;},function(){ba.selectionPlugInO().Set({$:1,$0:dY});}))).WithHole({$:2,$0:"selected",$1:b_.Map(function(d4){return bQ.Equals(d4,{$:1,$0:dY})?"selected":"";},ba.selectionPlugInO().get_View())}),(d2=cw.CompleteHoles(dZ.k,dZ.h,[]),(d3=new cu.New(d2[1],cx.tile(d2[0])),(dZ.i=d3,d3)))).get_Doc();}));};ba.renderVars=function(){function dY(d0,d1){return[d0.plgName,d1.varName];}function dZ(d0,d1){var d2,d3,d4,d5;return(d2=(d3=f.Untag$3(d1.varName),cv.Make().WithHole({$:1,$0:"name",$1:d3})).WithHole({$:8,$0:"value",$1:d1.varVar}),(d4=cw.CompleteHoles(d2.k,d2.h,[["value",0]]),(d5=new cu.New(d4[1],cx.namevalueinput(d4[0])),(d2.i=d5,d5)))).get_Doc();}return ca.ConvertBy(function(d0){return dY(d0[0],d0[1]);},function(d0){return dZ(d0[0],d0[1]);},b_.Map(function(d0){return bT.map(function(d1){return[d0,d1];},d0.plgVars);},ba.currentPlugInW()));};ba.renderViews=function(){function dY(d0,d1){return[d0.plgName,d1.viwName];}function dZ(d0,d1){var d2,d3,d4,d5;return(d2=(d3=f.Untag$3(d1.viwName),cv.Make().WithHole({$:1,$0:"name",$1:d3})).WithHole({$:2,$0:"value",$1:d1.viwView}),(d4=cw.CompleteHoles(d2.k,d2.h,[]),(d5=new cu.New(d4[1],cx.namevalue(d4[0])),(d2.i=d5,d5)))).get_Doc();}return ca.ConvertBy(function(d0){return dY(d0[0],d0[1]);},function(d0){return dZ(d0[0],d0[1]);},b_.Map(function(d0){return bT.map(function(d1){return[d0,d1];},d0.plgViews);},ba.currentPlugInW()));};ba.renderDocs=function(){function dY(d0,d1){return[d0.plgName,d1.docName];}function dZ(d0,d1){var d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;d2=(d3=d1.docDoc,d3.$==1?(d4=bU.concat(", ",bV.ofArray([d3.$1])),(function(ec){return function(ed){return ec("("+bN.toSafe(ed)+")");};}(a.id))(d4)):d3.$==2?(d5=bU.concat(", ",bV.ofArray([d3.$1,d3.$2])),(function(ec){return function(ed){return ec("("+bN.toSafe(ed)+")");};}(a.id))(d5)):d3.$==3?(d6=bU.concat(", ",bV.ofArray([d3.$1,d3.$2,d3.$3])),(function(ec){return function(ed){return ec("("+bN.toSafe(ed)+")");};}(a.id))(d6)):d3.$==4?(d7=bU.concat(", ",bV.ofArray([d3.$1,d3.$2,d3.$3,d3.$4])),(function(ec){return function(ed){return ec("("+bN.toSafe(ed)+")");};}(a.id))(d7)):d3.$==5?(d8=bU.concat(", ",bV.ofArray([d3.$1,d3.$2,d3.$3,d3.$4,d3.$5])),(function(ec){return function(ed){return ec("("+bN.toSafe(ed)+")");};}(a.id))(d8)):"");return(d9=(d_=(d$=f.Untag$3(d1.docName)+d2,cv.Make().WithHole({$:1,$0:"name",$1:d$})),d_.WithHole(cw.EventQ2(d_.k,"select",function(){return d_.i;},function(){b_.Get(function(ec){var ed;ed=f.Untag$3(ec.plgName)+"."+f.Untag$3(d1.docName);ba.mainDocV().Set(ed);},ba.currentPlugInW());}))),(ea=cw.CompleteHoles(d9.k,d9.h,[]),(eb=new cu.New(ea[1],cx.tile(ea[0])),(d9.i=eb,eb)))).get_Doc();}return ca.ConvertBy(function(d0){return dY(d0[0],d0[1]);},function(d0){return dZ(d0[0],d0[1]);},b_.Map(function(d0){return bT.map(function(d1){return[d0,d1];},d0.plgDocs);},ba.currentPlugInW()));};ba.callFunction=function(dY,dZ,d0){if(d0.$==1)d0.$0(dY);else if(d0.$==2)(d0.$0(dY))(dZ);else d0.$0();};ba.renderActions=function(){function dY(d0,d1){return[d0.plgName,d1.actName];}function dZ(d0,d1){var d2,d3,d4,d5;d2=(d3=d1.actFunction,d3.$==1?(d4=bU.concat(", ",bV.ofArray([d3.$1])),(function(d6){return function(d7){return d6("("+bN.toSafe(d7)+")");};}(a.id))(d4)):d3.$==2?(d5=bU.concat(", ",bV.ofArray([d3.$1,d3.$2])),(function(d6){return function(d7){return d6("("+bN.toSafe(d7)+")");};}(a.id))(d5)):"");return ca.EmbedView(b_.Map(function(d6){var d7,d8,d9,d_,d$,ea,eb,ec,ed,ee;return d6?(d7=(d8=(d9=f.Untag$3(d1.actName)+d2,cv.Make().WithHole({$:1,$0:"name",$1:d9})),d8.WithHole(cw.EventQ2(d8.k,"click",function(){return d8.i;},function(ef){ba.callFunction(ef,null,d1.actFunction);}))),(d_=cw.CompleteHoles(d7.k,d7.h,[]),(d$=new cu.New(d_[1],cx.action(d_[0])),(d7.i=d$,d$)))).get_Doc():(ea=(eb=(ec=f.Untag$3(d1.actName),cv.Make().WithHole({$:1,$0:"name",$1:ec})),eb.WithHole(cw.EventQ2(eb.k,"click",function(){return eb.i;},function(ef){ba.callFunction(ef,null,d1.actFunction);}))),(ed=cw.CompleteHoles(ea.k,ea.h,[]),(ee=new cu.New(ed[1],cx.actiondisabled(ed[0])),(ea.i=ee,ee)))).get_Doc();},d1.actEnabled));}return ca.ConvertBy(function(d0){return dY(d0[0],d0[1]);},function(d0){return dZ(d0[0],d0[1]);},b_.Map(function(d0){return bT.map(function(d1){return[d0,d1];},d0.plgActions);},ba.currentPlugInW()));};ba.renderQueries=function(){function dY(d0,d1){return[d0.plgName,d1.qryName];}function dZ(d0,d1){var d2,d3,d4,d5,d6;return(d2=(d3=(d4=f.Untag$3(d1.qryName),cv.Make().WithHole({$:1,$0:"name",$1:d4})),d3.WithHole(cw.EventQ2(d3.k,"select",function(){return d3.i;},function(){a.alert(d1.qryFunction(null));}))),(d5=cw.CompleteHoles(d2.k,d2.h,[]),(d6=new cu.New(d5[1],cx.tile(d5[0])),(d2.i=d6,d6)))).get_Doc();}return ca.ConvertBy(function(d0){return dY(d0[0],d0[1]);},function(d0){return dZ(d0[0],d0[1]);},b_.Map(function(d0){return bT.map(function(d1){return[d0,d1];},d0.plgQueries);},ba.currentPlugInW()));};ba.AppFwkClient=function(){bY.$cctor();return bY.AppFwkClient;};ba.getLazyDoc=function(dY){var dZ;dZ=dY.docDoc;return dZ.$==0?dZ.$0.f():ca.Element("div",[],[ca.TextNode((function(d0){return function(d1){return d0("Doc with parameters not allowed here: "+cy.p$1(d1));};}(a.id))(dY))]);};ba.getMainClientDoc=function(){var dY;return ca.EmbedView((dY=ba.plugIns().v,b_.Map2(function(dZ,d0){var d1,d2;d1=bT.tryPick(function(d3){var d4;d4=bT.tryFind(function(d5){return f.Untag$3(d3.plgName)===dZ||f.Untag$3(d3.plgName)+"."+f.Untag$3(d5.docName)===dZ;},d3.plgDocs);return d4==null?null:{$:1,$0:ba.getLazyDoc(d4.$0)};},d0);d2=ba.AppFwkClient().f();return d1==null?d2:d1.$0;},ba.mainDocV().get_View(),dY)));};ba.mainDoc=function(){var dY,dZ,d0,d1,d2,d3;return(dY=(dZ=ba.getMainClientDoc(),(d0=(d1=ba.mainDocV().get_View(),cv.Make().WithHole({$:2,$0:"maindoc",$1:d1})),d0.WithHole(cw.EventQ2(d0.k,"goclient",function(){return d0.i;},function(){ba.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:dZ})),(d2=cw.CompleteHoles(dY.k,dY.h,[]),(d3=new cu.New(d2[1],cx.appframework(d2[0])),(dY.i=d3,d3)))).get_Doc();};ba.horizontal=function(dY,dZ,d0,d1,d2){var d3,d4,d5,d6;return(d3=(d4=cv.Make().WithHole({$:2,$0:"partsizes",$1:dY}).WithHole({$:7,$0:"afterrender",$1:dZ}).WithHole({$:7,$0:"afterrendersp",$1:d0}),d4.WithHole(cw.EventQ2(d4.k,"mousedown",function(){return d4.i;},function(d7){d1(d7.Event);}))).WithHole({$:2,$0:"gap",$1:d2}),(d5=cw.CompleteHoles(d3.k,d3.h,[]),(d6=new cu.New(d5[1],cx.wcompsplitterhor(d5[0])),(d3.i=d6,d6)))).get_Doc();};ba.vertical=function(dY,dZ,d0,d1,d2){var d3,d4,d5,d6;return(d3=(d4=cv.Make().WithHole({$:2,$0:"partsizes",$1:dY}).WithHole({$:7,$0:"afterrender",$1:dZ}).WithHole({$:7,$0:"afterrendersp",$1:d0}),d4.WithHole(cw.EventQ2(d4.k,"mousedown",function(){return d4.i;},function(d7){d1(d7.Event);}))).WithHole({$:2,$0:"gap",$1:d2}),(d5=cw.CompleteHoles(d3.k,d3.h,[]),(d6=new cu.New(d5[1],cx.wcompsplitterver(d5[0])),(d3.i=d6,d6)))).get_Doc();};ba.newVar=function(dY,dZ){return bb.New(dY,dZ);};ba.newViw=function(dY,dZ){return bc.New(dY,dZ);};ba.newDoc=function(dY,dZ){return bd.New(dY,{$:0,$0:dZ});};ba.newQry=function(dY,dZ){return bf.New(dY,dZ);};ba.newAct=function(dY,dZ){return be.New(dY,{$:0,$0:dZ},b_.Const(true));};ba.newActF=function(dY,dZ){return be.New(dY,dZ,b_.Const(true));};ba.newDocF=function(dY,dZ){return bd.New(dY,dZ);};ba.plugin=function(){bY.$cctor();return bY.plugin;};ba.tryGetPlugInW=function(dY){return ba.plugIns().TryFindByKeyAsView(dY);};ba.tryGetVarW=function(dY,dZ){return b_.Bind(function(d0){return d0!=null&&d0.$==1?d0.$0.plgVars.TryFindByKeyAsView(dZ):b_.Const(null);},ba.tryGetPlugInW(dY));};ba.tryGetViwW=function(dY,dZ){return b_.Bind(function(d0){return d0!=null&&d0.$==1?d0.$0.plgViews.TryFindByKeyAsView(dZ):b_.Const(null);},ba.tryGetPlugInW(dY));};ba.tryGetActW=function(dY,dZ){return b_.Bind(function(d0){return d0!=null&&d0.$==1?d0.$0.plgActions.TryFindByKeyAsView(dZ):b_.Const(null);},ba.tryGetPlugInW(dY));};ba.tryGetQryW=function(dY,dZ){return b_.Bind(function(d0){return d0!=null&&d0.$==1?d0.$0.plgQueries.TryFindByKeyAsView(dZ):b_.Const(null);},ba.tryGetPlugInW(dY));};ba.tryGetDocW=function(dY,dZ){return b_.Bind(function(d0){return d0!=null&&d0.$==1?d0.$0.plgDocs.TryFindByKeyAsView(dZ):b_.Const(null);},ba.tryGetPlugInW(dY));};ba.tryGetVoVW=function(dY,dZ){return b_.Bind(function(d0){return d0==null?b_.Map(function(d1){return d1==null?null:{$:1,$0:new c6.New(d1.$0.viwView,a.ignore)};},ba.tryGetViwW(dY,dZ)):b_.Const({$:1,$0:d0.$0.varVar});},ba.tryGetVarW(dY,dZ));};ba.tryGetWoWW=function(dY,dZ){return b_.Bind(function(d0){return d0==null?b_.Bind(function(d1){return d1==null?b_.Const(null):b_.Map(function(d2){return{$:1,$0:d2};},d1.$0.varVar.get_View());},ba.tryGetVarW(dY,dZ)):b_.Map(function(d1){return{$:1,$0:d1};},d0.$0.viwView);},ba.tryGetViwW(dY,dZ));};ba.tryGetPlugIn=function(dY){return ba.plugIns().TryFindByKey(dY);};ba.tryGetVar=function(dY,dZ){var d0;d0=ba.tryGetPlugIn(dY);return d0==null?null:d0.$0.plgVars.TryFindByKey(dZ);};ba.tryGetViw=function(dY,dZ){var d0;d0=ba.tryGetPlugIn(dY);return d0==null?null:d0.$0.plgViews.TryFindByKey(dZ);};ba.tryGetAct=function(dY,dZ){var d0;d0=ba.tryGetPlugIn(dY);return d0==null?null:d0.$0.plgActions.TryFindByKey(dZ);};ba.tryGetQry=function(dY,dZ){var d0;d0=ba.tryGetPlugIn(dY);return d0==null?null:d0.$0.plgQueries.TryFindByKey(dZ);};ba.tryGetDoc=function(dY,dZ){var d0;d0=ba.tryGetPlugIn(dY);return d0==null?null:d0.$0.plgDocs.TryFindByKey(dZ);};ba.tryGetVoV=function(dY,dZ){var d0,d1,d2;d0=(d1=ba.tryGetVar(dY,dZ),d1==null?null:{$:1,$0:{$:1,$0:d1.$0.varVar}});return d0==null?(d2=ba.tryGetViw(dY,dZ),d2==null?null:{$:1,$0:new c6.New(d2.$0.viwView,a.ignore)}):d0.$0;};ba.tryGetWoW=function(dY,dZ){var d0,d1,d2;d0=(d1=ba.tryGetViw(dY,dZ),d1==null?null:{$:1,$0:{$:1,$0:d1.$0.viwView}});return d0==null?(d2=ba.tryGetVar(dY,dZ),d2==null?null:{$:1,$0:d2.$0.varVar.get_View()}):d0.$0;};ba.getOneTextData=function(dY,dZ,d0,d1){var d2,d3,d4;d2=(ba.splitName(dY))(dZ);d3=d2[0];d4=d2[1];return b_.Bind(function(d5){return d5==null?b_.Bind(function(d6){var d7;return d6==null?b_.Const({$:0,$0:((((dS.Curried(function(d8,d9,d_,d$){return d8(bN.toSafe(d9)+" @{Missing "+bN.toSafe(d_)+"}"+bN.toSafe(d$));},4))(a.id))(d0))(dZ))(d1)}):(d7=d6.$0,b_.Bind(function(d8){return d8.$==1?b_.Const({$:0,$0:(function(d9){return function(d_){return d9("Unexpected Action @{"+bN.toSafe(d_)+"}");};}(a.id))(f.Untag$3(d8.$0.actName))}):b_.Const({$:0,$0:d0+d7+d8.$0});},ba.getTextData(dY,d1)));},ba.tryGetWoWW(d3,d4)):b_.Const({$:1,$0:d5.$0});},ba.tryGetActW(d3,d4));};ba.getTextData=function(dY,dZ){var d0,d1,d2,d3;d0=(d1=J.delimitedO("@{","}",dZ),d1==null?null:{$:1,$0:(d2=d1.$0,(d3=d2[0],ba.getOneTextData(dY,d2[1],d3,d2[2])))});return d0==null?b_.Const({$:0,$0:dZ}):d0.$0;};ba.getAttrs=function(dY,dZ){return bV.ofSeq(bT.delay(function(){return bT.append(bT.choose(function(d0){var d1,d2,d3,d4;function d5(d6,d7){var d8;return d7.$==1?(d8=d7.$0,d6.addEventListener(bU.Trim(d4),function(d9){return ba.callFunction(d6,d9,d8.actFunction);},false)):d6.setAttribute(bU.Trim(d4),bU.Trim(d7.$0));}return!bQ.Equals(d0,null)&&d0.length===2&&(d2=bO.get(d0,1),bU.Trim(bO.get(d0,0))!==""&&bU.Trim(d2)!=="")?(d3=bO.get(d0,1),(d4=bO.get(d0,0),{$:1,$0:cB.DynamicCustom(function(d6){return function(d7){return d5(d6,d7);};},ba.getTextData(dY,bU.Trim(d3)))})):null;},bT.map(function(d0){return J.splitByChar("=",d0);},J.splitByChar(";",dZ))),bT.delay(function(){return bT.choose(function(d0){var d1,d2,d3,d4,d5;return!bQ.Equals(d0,null)&&d0.length===2&&(d2=bO.get(d0,1),bU.Trim(bO.get(d0,0))!==""&&bU.Trim(d2)!=="")?(d3=bO.get(d0,1),(d4=bO.get(d0,0),{$:1,$0:(d5=b_.Map(function(d6){return d6.$==1?(function(d7){return function(d8){return d7("@{"+bN.toSafe(d8)+"}");};}(a.id))(f.Untag$3(d6.$0.actName)):bU.Trim(d6.$0);},ba.getTextData(dY,bU.Trim(d3))),cB.DynamicStyle(bU.Trim(d4),d5))})):null;},bT.map(function(d0){return J.splitByChar(":",d0);},J.splitByChar(";",dZ)));}));}));};ba.bindWrap=function(dY,dZ){return bj.New(A.op_GreaterGreaterEquals(dZ,function(d0){return dY(d0).r;}));};ba.unwrapBindWrap=function(dY,dZ){return bj.New(A.op_BarGreaterGreater(dZ.r,dY));};ba.add1=function(dY){return dY+1;};ba.a11V=function(){bY.$cctor();return bY.a11V;};ba.mainX=function(){bY.$cctor();return bY.mainX;};ba.baseView=function(){bY.$cctor();return bY.baseView;};ba.makeAViewDoc=function(dY){return ca.BindView(function(){return dY();},ba.baseView());};ba.makeAViewDocL=function(dY){return cC.Create(function(){return ba.makeAViewDoc(dY);});};ba.choiceToString=function(dY){return dY.$==1?(function(dZ){return function(d0){return dZ("@{"+bN.prettyPrint(d0)+"}");};}(a.id))(dY.$0):dY.$0;};ba.valToStyle=function(dY,dZ){return dZ.$==0?cB.DynamicStyle(dY,dZ.$0):cB.Style(dY,dZ.$0);};ba.valToAttr=function(dY,dZ){return dZ.$==0?cB.Dynamic(dY,dZ.$0):cD.Create(dY,dZ.$0);};ba.currentPlugInNameDef=function(){bY.$cctor();return bY.currentPlugInNameDef;};ba.currentPlugInNameD=function(){bY.$cctor();return bY.currentPlugInNameD;};ba.getDocD=function(){bY.$cctor();return bY.getDocD;};ba.getTextActViewD=function(){bY.$cctor();return bY.getTextActViewD;};ba.errDoc=function(dY){return ca.Element("div",[],[ca.TextNode(dY)]);};ba.errDocf=function(dY){return dY(ba.errDoc);};ba.run=function(dY,dZ){var d0,d1;d0=(d1=A.depend(),d1.Delay(function(){return d1.Bind(ba.getDocD(),function(d2){return d1.Bind(ba.getTextActViewD(),function(d3){return d1.Return(y.resolver(bV.ofArray([["getDocFromReference",d2],["getTextActViewFromReference",d3],["currentPlugInName",dY]]),dZ));});});}));return y.resolver(bV.ofArray([["currentPlugInName",dY]]),d0);};ba.extractTextD=function(){bY.$cctor();return bY.extractTextD$1;};ba.extractDocD=function(){bY.$cctor();return bY.extractDocD$1;};ba.extractAtsD=function(){bY.$cctor();return bY.extractAtsD$1;};ba.extractAttD=function(){bY.$cctor();return bY.extractAttD;};ba.defPlugInName=function(){bY.$cctor();return bY.defPlugInName;};ba.runDef=function(dY){return ba.run(ba.defPlugInName(),dY);};ba.getParmRef=function(dY){var dZ,d0,d1,d2,d3;dZ=(d0=(d1=J.delimitedO("@{","}",dY),d1==null?null:{$:1,$0:(d2=d1.$0,(d2[0],d3=d2[1],d2[2],d3))}),d0==null?dY:d0.$0);return(ba.splitName(ba.defPlugInName()))(dZ);};ba.depWithExtracts=function(dY){var dZ;return ba.runDef((dZ=y.depend(),dZ.Delay(function(){return dZ.Bind(ba.extractAtsD(),function(d0){return dZ.Bind(ba.extractDocD(),function(d1){return dZ.Bind(ba.extractTextD(),function(d2){return dZ.Return(dY(d0,d1,d2));});});});})));};ba.docWithVar=function(dY,dZ){var d0,d1;function d2(d4){return d4==null?null:{$:1,$0:dY(d4.$0)};}function d3(){return ba.errDoc((function(d4){return function(d5){return d4("Var not found "+bN.toSafe(d5));};}(a.id))(dZ));}return ca.BindView((d0=function(d4){return d4==null?d3():d4.$0;},function(d4){return d0(d2(d4));}),(d1=ba.getParmRef(dZ),ba.tryGetVoVW(d1[0],d1[1])));};ba.inputFile=function(dY,dZ,d0){var d1,d2,d3,d4;d1=(d2=(d3=(ba.splitName(ba.defPlugInName()))(d0),ba.tryGetAct(d3[0],d3[1])),d2==null?null:{$:1,$0:(d4=d2.$0,ca.Element("div",ba.getAttrs(ba.defPlugInName(),dY),[ca.Element("div",[cD.Create("class","input-group")],[ca.Element("span",[cD.Create("class","input-group-btn")],[ca.Element("label",[cD.Create("class","btn")],[ca.TextNode(dZ),ca.Element("input",[cD.Create("class","form-control"),cD.Create("type","file"),cB.Style("display","none"),cD.HandlerImpl("click",function(d5){return function(){d5.value="";};}),cD.HandlerImpl("change",function(d5){return function(){return ba.callFunction(d5,null,d4.actFunction);};})],[])])])])]))});return d1==null?ba.errDoc((function(d5){return function(d6){return d5("Action not found "+bN.toSafe(d6));};}(a.id))(d0)):d1.$0;};ba.inputLabel=function(){bY.$cctor();return bY.inputLabel;};ba.input=function(){bY.$cctor();return bY.input;};ba.textArea=function(){bY.$cctor();return bY.textArea;};ba.none=function(dY){return ca.Element("span",[],[]);};ba.htmlDoc=function(dY,dZ){return ca.BindView(function(d0){return d0.$==1?ba.errDoc((function(d1){return function(d2){return d1("HtmlDoc: unexpected action "+cy.p(d2));};}(a.id))(d0.$0)):ca.Verbatim(d0.$0);},ba.getTextData(dY,dZ));};ba.setVar=function(dY,dZ){var d0,d1;d0=(d1=(ba.splitName(ba.defPlugInName()))(dY),ba.tryGetVar(d1[0],d1[1]));(n.iter(function(d2){d2.varVar.Set(dZ);}))(d0);};ba.trigAct=function(){bY.$cctor();return bY.trigAct;};ba.select=function(){bY.$cctor();return bY.select;};ba.getMainDoc=function(){bY.$cctor();return bY.getMainDoc;};ba.addPlugIn=function(dY){ba.plugIns().Append(dY);};ba.op_Dereference=function(dY){return bj.New((A.rtn())({$:1,$0:dY}));};bb.New=function(dY,dZ){return{varName:dY,varVar:dZ};};bc.New=function(dY,dZ){return{viwName:dY,viwView:dZ};};bd.New=function(dY,dZ){return{docName:dY,docDoc:dZ};};be.New=function(dY,dZ,d0){return{actName:dY,actFunction:dZ,actEnabled:d0};};bf.New=function(dY,dZ){return{qryName:dY,qryFunction:dZ};};bg.New=function(dY,dZ,d0,d1,d2,d3){return{plgName:dY,plgVars:dZ,plgViews:d0,plgDocs:d1,plgActions:d2,plgQueries:d3};};bh=ba.PlugInBuilder=dS.Class({Zero:function(){var dY;dY=ba.defaultPlugIn();return bg.New(f.Tag$3("Main"),dY.plgVars,dY.plgViews,dY.plgDocs,dY.plgActions,dY.plgQueries);},Yield:function(){return this.Zero();},For:function(dY,dZ){var d0;d0=cO.Get(dY);while(d0.MoveNext())dZ(d0.Current());},Name:function(dY,dZ){return bg.New(f.Tag$3(dZ),dY.plgVars,dY.plgViews,dY.plgDocs,dY.plgActions,dY.plgQueries);},AddVar:function(dY,dZ,d0){dY.plgVars.Append(ba.newVar(f.Tag$3(dZ),d0));return dY;},AddDoc:function(dY,dZ,d0){dY.plgDocs.Append(ba.newDoc(f.Tag$3(dZ),d0));return dY;},AddDoc2:function(dY,dZ,d0,d1,d2){dY.plgDocs.Append(ba.newDocF(f.Tag$3(dZ),{$:2,$0:d0,$1:d1,$2:d2}));return dY;},AddDoc3:function(dY,dZ,d0,d1,d2,d3){dY.plgDocs.Append(ba.newDocF(f.Tag$3(dZ),{$:3,$0:d0,$1:d1,$2:d2,$3:d3}));return dY;},AddDoc4:function(dY,dZ,d0,d1,d2,d3,d4){dY.plgDocs.Append(ba.newDocF(f.Tag$3(dZ),{$:4,$0:d0,$1:d1,$2:d2,$3:d3,$4:d4}));return dY;},AddDoc5:function(dY,dZ,d0,d1,d2,d3,d4,d5){dY.plgDocs.Append(ba.newDocF(f.Tag$3(dZ),{$:5,$0:d0,$1:d1,$2:d2,$3:d3,$4:d4,$5:d5}));return dY;},AddQry:function(dY,dZ,d0){dY.plgQueries.Append(ba.newQry(f.Tag$3(dZ),d0));return dY;},AddAct:function(dY,dZ,d0){dY.plgActions.Append(ba.newAct(f.Tag$3(dZ),d0));return dY;},AddAct1:function(dY,dZ,d0,d1){dY.plgActions.Append(ba.newActF(f.Tag$3(dZ),{$:1,$0:d0,$1:d1}));return dY;},AddAct2:function(dY,dZ,d0,d1,d2){dY.plgActions.Append(ba.newActF(f.Tag$3(dZ),{$:2,$0:d0,$1:d1,$2:d2}));return dY;},AddActO:function(dY,dZ,d0){d0==null?void 0:dY.plgActions.Append(ba.newAct(f.Tag$3(dZ),d0.$0));return dY;},AddViw:function(dY,dZ,d0){dY.plgViews.Append(ba.newViw(f.Tag$3(dZ),d0));return dY;},Merge:function(dY,dZ,d0){dY.plgVars.AppendMany(bT.map(function(d1){return bb.New(f.Tag$3(dZ+f.Untag$3(d1.varName)),d1.varVar);},d0.plgVars));dY.plgViews.AppendMany(bT.map(function(d1){return bc.New(f.Tag$3(dZ+f.Untag$3(d1.viwName)),d1.viwView);},d0.plgViews));dY.plgDocs.AppendMany(bT.map(function(d1){return bd.New(f.Tag$3(dZ+f.Untag$3(d1.docName)),d1.docDoc);},d0.plgDocs));dY.plgActions.AppendMany(bT.map(function(d1){return be.New(f.Tag$3(dZ+f.Untag$3(d1.actName)),d1.actFunction,d1.actEnabled);},d0.plgActions));dY.plgQueries.AppendMany(bT.map(function(d1){return bf.New(f.Tag$3(dZ+f.Untag$3(d1.qryName)),d1.qryFunction);},d0.plgQueries));return dY;}},r,bh);bh.New=dS.Ctor(function(){r.New.call(this);},bh);bi.New=function(dY,dZ){return{f:dY,p:dZ};};bj.New=function(dY){return{r:dY};};bk.map=function(dY,dZ){return dZ.$==0?{$:0,$0:b_.Map(dY,dZ.$0)}:{$:1,$0:dY(dZ.$0)};};bk.rtn=function(dY){return{$:1,$0:dY};};bk.apply=function(dY,dZ){return dY.$==0?dZ.$==1?{$:0,$0:b_.Apply(dY.$0,b_.Const(dZ.$0))}:{$:0,$0:b_.Apply(dY.$0,dZ.$0)}:dZ.$==0?{$:0,$0:b_.Apply(b_.Const(dY.$0),dZ.$0)}:{$:1,$0:dY.$0(dZ.$0)};};bk.op_LessMultiplyGreater=function(){bY.$cctor();return bY.op_LessMultiplyGreater;};bk.traverseListApp=function(dY,dZ){function d0(d1,d2){return new bZ({$:1,$0:d1,$1:d2});}return bV.foldBack(function(d1,d2){return((bk.op_LessMultiplyGreater())(((bk.op_LessMultiplyGreater())(bk.rtn(function(d3){return function(d4){return d0(d3,d4);};})))(dY(d1))))(d2);},dZ,bk.rtn(bZ.Empty));};bk.sequenceListApp=function(dY){return bk.traverseListApp(a.id,dY);};bk.toView=function(dY){return dY.$==0?dY.$0:b_.Const(dY.$0);};bk.addDoc=function(dY,dZ){return dZ.$==0?{$:1,$0:[ca.BindView(ca.Concat,dZ.$0),dY]}:{$:1,$0:bT.append(dZ.$0,[dY])};};bk.addAtt=function(dY,dZ){return dZ.$==0?function(d0){return d0("addAtt for VView not implemented");}(bM.FailWith):{$:1,$0:bT.append(dZ.$0,[dY])};};bk.textDoc=function(dY){return dY.$==0?ca.TextView(dY.$0):ca.TextNode(dY.$0);};bk.textAtt=function(){bY.$cctor();return bY.textAtt;};bl.AEmpty={$:3};bm.getDocFromReference=function(dY){return ca.TextNode((function(dZ){return function(d0){return dZ("getDocFromReference not implemented: @{"+bN.toSafe(d0)+"}");};}(a.id))(dY));};bm.getTextActViewFromReference=function(dY){return b_.Const({$:0,$0:(function(dZ){return function(d0){return dZ("getTextActViewFromReference not implemented: @{"+bN.toSafe(d0)+"}");};}(a.id))(dY)});};bm.getOneTextData=function(dY,dZ,d0){return(dY===""?a.id:function(d1){return new bZ({$:1,$0:{$:0,$0:dY},$1:d1});})(new bZ({$:1,$0:{$:1,$0:dZ},$1:d0===""?bZ.Empty:bm.getTextData(d0)}));};bm.getTextData=function(dY){var dZ,d0,d1;dZ=(d0=J.delimitedO("@{","}",dY),d0==null?null:{$:1,$0:(d1=d0.$0,bm.getOneTextData(d1[0],d1[1],d1[2]))});return dZ==null?bV.ofArray([{$:0,$0:dY}]):dZ.$0;};bm.getDocFromReferenceD=function(){bY.$cctor();return bY.getDocFromReferenceD;};bm.getTextActViewFromReferenceD=function(){bY.$cctor();return bY.getTextActViewFromReferenceD;};bm.getDocFromTextTypesD=function(){bY.$cctor();return bY.getDocFromTextTypesD;};bm.extractDocD=function(){bY.$cctor();return bY.extractDocD;};bm.getTextValFromSeqD=function(){bY.$cctor();return bY.getTextValFromSeqD;};bm.getTextValD=function(){bY.$cctor();return bY.getTextValD;};bm.extractAtsD=function(){bY.$cctor();return bY.extractAtsD;};bm.extractTextD=function(){bY.$cctor();return bY.extractTextD;};bn.New=function(dY,dZ){return{lytName:dY,lytDefinition:dZ};};bo.S=function(dY){return dY.$==1?dY.$0:dY.$0;};bo.Identifier=function(dY){var dZ,d0,d1;return dY.$==1&&(d0=R.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",dY.$0),d0!=null&&d0.$==1&&((d1=d0.$0,!bQ.Equals(d1,null)&&d1.length===1)&&(dZ=bO.get(d0.$0,0),true)))?{$:1,$0:dZ}:null;};bo.I=function(dY){var dZ;dZ=bo.Identifier(dY);return dZ!=null&&dZ.$==1?{$:1,$0:dZ.$0}:null;};bo.Vertical=function(dY){var dZ,d0,d1,d2,d3,d4;return dY.$==1&&(dY.$0==="vertical"&&(dZ=dY.$0,true))?{$:0,$0:null}:dY.$==1&&(dY.$0==="horizontal"&&(d0=dY.$0,true))?{$:1,$0:null}:dY.$==1&&(dY.$0==="layout"&&(d1=dY.$0,true))?{$:2,$0:null}:dY.$==1&&(dY.$0==="grid"&&(d2=dY.$0,true))?{$:3,$0:null}:dY.$==1&&(dY.$0==="template"&&(d3=dY.$0,true))?{$:4,$0:null}:(d4=bo.Identifier(dY),d4!=null&&d4.$==1?{$:5,$0:d4.$0}:{$:6,$0:null});};bo.PlugIn=function(dY){var dZ,d0,d1,d2,d3;return dY.$==1&&(dY.$0==="PlugIn"&&(dZ=dY.$0,true))?{$:0,$0:null}:dY.$==1&&(dY.$0==="Button"&&(d0=dY.$0,true))?{$:1,$0:null}:dY.$==1&&(dY.$0==="input"&&(d1=dY.$0,true))?{$:2,$0:null}:dY.$==1&&(dY.$0==="textarea"&&(d2=dY.$0,true))?{$:3,$0:null}:dY.$==1&&(dY.$0==="select"&&(d3=dY.$0,true))?{$:4,$0:null}:{$:5,$0:null};};bo.Var=function(dY){var dZ,d0,d1,d2,d3,d4;return dY.$==1&&(dY.$0==="Var"&&(dZ=dY.$0,true))?{$:0,$0:null}:dY.$==1&&(dY.$0==="Doc"&&(d0=dY.$0,true))?{$:1,$0:null}:dY.$==1&&(dY.$0==="View"&&(d1=dY.$0,true))?{$:2,$0:null}:dY.$==1&&(dY.$0==="ViewJS"&&(d2=dY.$0,true))?{$:3,$0:null}:dY.$==1&&(dY.$0==="Docs"&&(d3=dY.$0,true))?{$:4,$0:null}:dY.$==1&&(dY.$0==="Action"&&(d4=dY.$0,true))?{$:5,$0:null}:{$:6,$0:null};};bo.Measures$1=function(dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7;return dY.$==1?(dZ=J.splitByChar("-",dY.$0),!bQ.Equals(dZ,null)&&dZ.length===1&&(d1=(K.Double())(bO.get(dZ,0)),d1!=null&&d1.$==1&&(d0=d1.$0,true))?{$:1,$0:new bp({$:0,$0:d0,$1:true})}:!bQ.Equals(dZ,null)&&dZ.length===2&&(bO.get(dZ,0)===""&&(d3=(K.Double())(bO.get(dZ,1)),d3!=null&&d3.$==1&&(d2=d3.$0,true)))?{$:1,$0:new bp({$:0,$0:d2,$1:false})}:!bQ.Equals(dZ,null)&&dZ.length===3&&(d5=(K.Double())(bO.get(dZ,0)),d5!=null&&d5.$==1&&(d6=(K.Double())(bO.get(dZ,1)),d6!=null&&d6.$==1&&(d7=(K.Double())(bO.get(dZ,2)),d7!=null&&d7.$==1&&(d4=[d7.$0,d5.$0,d6.$0],true))))?{$:1,$0:new bp({$:1,$0:d4[1],$1:d4[2],$2:d4[0]})}:null):null;};bo.fixedSplitter=function(dY,dZ,d0,d1,d2){var d3,d4,d5,d6,d7,d8,d9;d3=(((d0?dS.Curried3(function(d_,d$,ea){return d_(d$.toFixed(6)+"px calc(100% - "+ea.toFixed(6)+"px)");}):dS.Curried3(function(d_,d$,ea){return d_("calc(100% - "+d$.toFixed(6)+"px) "+ea.toFixed(6)+"px");}))(a.id))(dZ))(dZ);return dY?(d4=cv.Make().WithHole({$:1,$0:"partsizes",$1:d3}).WithHole({$:0,$0:"first",$1:d1}).WithHole({$:0,$0:"second",$1:d2}),(d5=cw.CompleteHoles(d4.k,d4.h,[]),(d6=new cu.New(d5[1],cx.fixedsplitterver(d5[0])),(d4.i=d6,d6)))).get_Doc():(d7=cv.Make().WithHole({$:1,$0:"partsizes",$1:d3}).WithHole({$:0,$0:"first",$1:d1}).WithHole({$:0,$0:"second",$1:d2}),(d8=cw.CompleteHoles(d7.k,d7.h,[]),(d9=new cu.New(d8[1],cx.fixedsplitterhor(d8[0])),(d7.i=d9,d9)))).get_Doc();};bo.variableSplitter=function(dY,dZ,d0,d1,d2,d3){return ca.Element("wcomp-splitter",bV.ofSeq(bT.delay(function(){return bT.append(dY?[cD.Create("vertical","")]:[],bT.delay(function(){return bT.append([cD.Create("min",a.String(dZ))],bT.delay(function(){return bT.append([cD.Create("value",a.String(d0))],bT.delay(function(){return[cD.Create("max",a.String(d1))];}));}));}));})),bV.ofArray([d2,d3]));};bo.doubleQuote=function(dY){var dZ,d0,d1;switch(dY.$==1?dY.$0.$==1?bU.StartsWith(dY.$0.$0,"//")?(dZ=dY.$0.$0,1):2:2:0){case 0:return bZ.Empty;case 1:return bZ.Empty;case 2:switch(dY.$==1?dY.$0.$==0?dY.$1.$==1?dY.$1.$0.$==0?dY.$1.$0.$0==="\""?dY.$1.$1.$==0?(d1=dY.$0.$0,1):dY.$1.$1.$0.$==0?(d1=[dY.$1.$1.$1,dY.$0.$0,dY.$1.$1.$0.$0],0):(d1=[dY.$0,dY.$1],2):(d1=[dY.$0,dY.$1],2):(d1=[dY.$0,dY.$1],2):(d1=[dY.$0,dY.$1],2):(d1=[dY.$0,dY.$1],2):3){case 0:d0=bo.doubleQuote(new bZ({$:1,$0:{$:0,$0:d1[1]+"\""+d1[2]},$1:d1[0]}));break;case 1:d0=bV.ofArray([{$:0,$0:d1}]);break;case 2:d0=new bZ({$:1,$0:d1[0],$1:bo.doubleQuote(d1[1])});break;case 3:throw new cF.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\src\\testing.fs",3839,38);}return d0;}};bo.splitTokens=function(dY){return bo.doubleQuote(bV.ofSeq(bT.collect(a.id,bT.mapi(function(dZ,d0){var d1;return dZ%2===1?[{$:0,$0:d0}]:d0===""?[{$:0,$0:"\""}]:(d1=bU.Trim(d0),d1===""?[]:bO.map(function(d2){return{$:1,$0:d2};},bU.SplitChars(d1,[" "],1)));},J.splitByChar("\"",dY)))));};bo.splitName=function(){bY.$cctor();return bY.splitName;};bo.getOneTextData=function(dY,dZ,d0,d1){var d2,d3,d4;d2=((bo.splitName())(dY))(dZ);d3=d2[0];d4=d2[1];return b_.Bind(function(d5){return d5==null?b_.Bind(function(d6){var d7;return d6==null?b_.Const({$:0,$0:((((dS.Curried(function(d8,d9,d_,d$){return d8(bN.toSafe(d9)+" @{Missing "+bN.toSafe(d_)+"}"+bN.toSafe(d$));},4))(a.id))(d0))(dZ))(d1)}):(d7=d6.$0,b_.Bind(function(d8){return d8.$==1?b_.Const({$:0,$0:(function(d9){return function(d_){return d9("Unexpected Action @{"+bN.toSafe(d_)+"}");};}(a.id))(f.Untag$3(d8.$0.actName))}):b_.Const({$:0,$0:d0+d7+d8.$0});},bo.getTextData(dY,d1)));},ba.tryGetWoWW(d3,d4)):b_.Const({$:1,$0:d5.$0});},ba.tryGetActW(d3,d4));};bo.getTextData=function(dY,dZ){var d0,d1,d2,d3;d0=(d1=J.delimitedO("@{","}",dZ),d1==null?null:{$:1,$0:(d2=d1.$0,(d3=d2[0],bo.getOneTextData(dY,d2[1],d3,d2[2])))});return d0==null?b_.Const({$:0,$0:dZ}):d0.$0;};bo.getTextToken=function(dY,dZ){return dZ.$==0?bo.getTextData(dY,dZ.$0):bo.getOneTextData(dY,dZ.$0,"","");};bo.getAttrs=function(dY,dZ){var d0;d0=bo.S(dZ);return bV.ofSeq(bT.delay(function(){return bT.append(bT.choose(function(d1){var d2,d3,d4,d5;function d6(d7,d8){var d9;return d8.$==1?(d9=d8.$0,d7.addEventListener(bU.Trim(d5),function(d_){return ba.callFunction(d7,d_,d9.actFunction);},false)):d7.setAttribute(bU.Trim(d5),bU.Trim(d8.$0));}return!bQ.Equals(d1,null)&&d1.length===2&&(d3=bO.get(d1,1),bU.Trim(bO.get(d1,0))!==""&&bU.Trim(d3)!=="")?(d4=bO.get(d1,1),(d5=bO.get(d1,0),{$:1,$0:cB.DynamicCustom(function(d7){return function(d8){return d6(d7,d8);};},bo.getTextData(dY,bU.Trim(d4)))})):null;},bT.map(function(d1){return J.splitByChar("=",d1);},J.splitByChar(";",d0))),bT.delay(function(){return bT.choose(function(d1){var d2,d3,d4,d5,d6;return!bQ.Equals(d1,null)&&d1.length===2&&(d3=bO.get(d1,1),bU.Trim(bO.get(d1,0))!==""&&bU.Trim(d3)!=="")?(d4=bO.get(d1,1),(d5=bO.get(d1,0),{$:1,$0:(d6=b_.Map(function(d7){return d7.$==1?(function(d8){return function(d9){return d8("@{"+bN.toSafe(d9)+"}");};}(a.id))(f.Untag$3(d7.$0.actName)):bU.Trim(d7.$0);},bo.getTextData(dY,bU.Trim(d4))),cB.DynamicStyle(bU.Trim(d5),d6))})):null;},bT.map(function(d1){return J.splitByChar(":",d1);},J.splitByChar(";",d0)));}));}));};bo.getDocF=function(dY,dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$;d1=dZ.docDoc;switch(d1.$==1?dY.$==1?(d0=[d1.$0,bo.S(dY.$0),dY.$1],1):6:d1.$==2?dY.$==1?(d2=bo.S(dY.$0),dY.$1.$==1?(d0=[d1.$0,d2,bo.S(dY.$1.$0),dY.$1.$1],2):6):6:d1.$==3?dY.$==1?(d3=bo.S(dY.$0),dY.$1.$==1?(d4=bo.S(dY.$1.$0),dY.$1.$1.$==1?(d0=[d1.$0,d3,d4,bo.S(dY.$1.$1.$0),dY.$1.$1.$1],3):6):6):6:d1.$==4?dY.$==1?(d5=bo.S(dY.$0),dY.$1.$==1?(d6=bo.S(dY.$1.$0),dY.$1.$1.$==1?(d7=bo.S(dY.$1.$1.$0),dY.$1.$1.$1.$==1?(d0=[d1.$0,d5,d6,d7,bo.S(dY.$1.$1.$1.$0),dY.$1.$1.$1.$1],4):6):6):6):6:d1.$==5?dY.$==1?(d8=bo.S(dY.$0),dY.$1.$==1?(d9=bo.S(dY.$1.$0),dY.$1.$1.$==1?(d_=bo.S(dY.$1.$1.$0),dY.$1.$1.$1.$==1?(d$=bo.S(dY.$1.$1.$1.$0),dY.$1.$1.$1.$1.$==1?(d0=[d1.$0,d8,d9,d_,d$,bo.S(dY.$1.$1.$1.$1.$0),dY.$1.$1.$1.$1.$1],5):6):6):6):6):6:(d0=[d1.$0,dY],0)){case 0:return[d0[0].f(),d0[1]];case 1:return[d0[0](d0[1]),d0[2]];case 2:return[(d0[0](d0[1]))(d0[2]),d0[3]];case 3:return[((d0[0](d0[1]))(d0[2]))(d0[3]),d0[4]];case 4:return[(((d0[0](d0[1]))(d0[2]))(d0[3]))(d0[4]),d0[5]];case 5:return[((((d0[0](d0[1]))(d0[2]))(d0[3]))(d0[4]))(d0[5]),d0[6]];case 6:return[ca.Element("div",[],[ca.TextNode((((dS.Curried3(function(ea,eb,ec){return ea("Parameters do not coincide with definition "+cy.p$1(eb)+" - "+bN.printList(function(ed){return cz.p$28(ed);},ec));}))(a.id))(dZ))(dY))]),bZ.Empty];}};bo.getDocFinal=function(dY,dZ){var d0;d0=bo.getDocF(dY,dZ);return d0[1].$==0?d0[0]:ba.errDoc((((dS.Curried3(function(d1,d2,d3){return d1("Too many parameters "+cy.p$1(d2)+" "+bN.printList(function(d4){return cz.p$28(d4);},d3));}))(a.id))(dZ))(dY));};bo.set_currentViewTriggger=function(dY){bY.$cctor();bY.currentViewTriggger=dY;};bo.currentViewTriggger=function(){bY.$cctor();return bY.currentViewTriggger;};bo.turnToView=function(dY){return ca.EmbedView(b_.Map(dY,bo.currentViewTriggger()));};bo.getADoc=function(dY,dZ){var d0,d1,d2,d3,d4;d0=bo.Identifier(dZ);return d0!=null&&d0.$==1?(d1=d0.$0,(d2=((bo.splitName())(dY))(d1),(d3=d2[0],(d4=d2[1],ca.BindView(function(d5){return d5==null?ca.BindView(function(d6){var d7;return d6==null?ba.errDoc((d7=(function(d8){return function(d9){return d8("Missing doc: "+bN.toSafe(d9));};}(a.id))(d1),(c.print(d7),d7))):ca.TextNode(d6.$0);},ba.tryGetWoWW(d3,d4)):(bo.getDocF(bZ.Empty,d5.$0))[0];},ba.tryGetDocW(d3,d4)))))):ca.TextView(b_.Map(function(d5){return d5.$==1?(function(d6){return function(d7){return d6("Unexpected action: "+bN.toSafe(d7));};}(a.id))(f.Untag$3(d5.$0.actName)):d5.$0;},bo.getTextData(dY,bo.S(dZ))));};bo.getAllDocs=function(dY,dZ){return dZ.$==1?new bZ({$:1,$0:bo.getADoc(dY,dZ.$0),$1:bo.getAllDocs(dY,dZ.$1)}):bZ.Empty;};bo.getOneDoc=function(dY,dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$;return dZ.$==1&&(d1=bo.Identifier(dZ.$0),d1!=null&&d1.$==1&&(d0=[d1.$0,dZ.$1],true))?(d2=d0[0],(d3=d0[1],(d4=((bo.splitName())(dY))(d2),(d5=d4[0],(d6=d4[1],(d7=(d8=ba.tryGetDoc(d5,d6),d8==null?null:{$:1,$0:bo.getDocF(d3,d8.$0)}),d7==null?(d9=(d_=ba.tryGetWoW(d5,d6),d_==null?null:{$:1,$0:[ca.TextView(d_.$0),d3]}),d9==null?[ba.errDoc((d$=(function(ea){return function(eb){return ea("Missing doc: "+bN.toSafe(eb));};}(a.id))(d2),(c.print(d$),d$))),d3]:d9.$0):d7.$0)))))):dZ.$==0?[ca.get_Empty(),bZ.Empty]:[ca.TextView(b_.Map(function(ea){return ea.$==1?(function(eb){return function(ec){return eb("Unexpected action: "+bN.toSafe(ec));};}(a.id))(f.Untag$3(ea.$0.actName)):ea.$0;},bo.getTextData(dY,bo.S(dZ.$0)))),dZ.$1];};bo.getDocs_=function(dY,dZ){var d0;return dZ.$==0?bZ.Empty:(d0=bo.getOneDoc(dY,dZ),new bZ({$:1,$0:d0[0],$1:bo.getDocs_(dY,d0[1])}));};bo.pairOfDocs=function(dY,dZ){var d0;d0=b_.Map(function(d1){var d2;return d1.$==1&&(d1.$1.$==1&&(d1.$1.$1.$==0&&(d2=[d1.$0,d1.$1.$0],true)))?[d2[0],d2[1]]:[ba.errDoc((function(d3){return function(d4){return d3("splitter expects exactly 2 elements "+bN.printList(function(d5){return cz.p$28(d5);},d4));};}(a.id))(dZ)),ba.errDoc("part 2")];},b_.Map(function(){return bo.getAllDocs(dY,dZ);},bo.currentViewTriggger()));return[ca.EmbedView(b_.Map(function(d1){return d1[0];},d0)),ca.EmbedView(b_.Map(function(d1){return d1[1];},d0))];};bo.singleDoc=function(dY,dZ){return ca.EmbedView(b_.Map(function(d0){var d1;return d0.$==1&&(d0.$1.$==0&&(d1=d0.$0,true))?d1:ba.errDoc((function(d2){return function(d3){return d2("expected exactly 1 element "+bN.printList(function(d4){return cz.p$28(d4);},d3));};}(a.id))(dZ));},b_.Map(function(){return bo.getAllDocs(dY,dZ);},bo.currentViewTriggger())));};bo.createSplitter=function(dY,dZ,d0,d1,d2){var d3;d3=bo.pairOfDocs(dY,d2);return d1.$==1?bo.variableSplitter(d0,d1.$0,d1.$1,d1.$2,d3[0],d3[1]):bo.fixedSplitter(d0,d1.$0,d1.$1,d3[0],d3[1]);};bo.createElement=function(dY,dZ,d0,d1,d2){return bo.turnToView(function(){var d3;d3=[ca.Concat(bo.getAllDocs(dY,d2))];return ca.Element(d0,bo.getAttrs(dY,d1),d3);});};bo.createButton=function(dY,dZ,d0,d1,d2){var d3;d3=bo.S(d2);return bo.turnToView(function(){var d4,d5,d6,d7,d8;function d9(d_,d$){return ba.callFunction(null,null,d_.actFunction);}d4=(d5=(d6=(d7=((bo.splitName())(dY))(d0),ba.tryGetAct(d7[0],d7[1])),d6==null?null:{$:1,$0:(d8=d6.$0,function(d_){return d9(d8,d_);})}),d5==null?a.ignore:d5.$0);return ca.Button(d3,bo.getAttrs(dY,d1),d4);});};bo.createInput=function(dY,dZ,d0,d1){return bo.turnToView(function(){var d2;return ca.BindView(function(d3){return d3==null?ba.errDoc((function(d4){return function(d5){return d4("Missing var: "+bN.toSafe(d5));};}(a.id))(d0)):ca.Input(bo.getAttrs(dY,d1),d3.$0);},(d2=((bo.splitName())(dY))(d0),ba.tryGetVoVW(d2[0],d2[1])));});};bo.createTextArea=function(dY,dZ,d0,d1){return bo.turnToView(function(){var d2;return ca.BindView(function(d3){return d3==null?ba.errDoc((function(d4){return function(d5){return d4("Missing var: "+bN.toSafe(d5));};}(a.id))(d0)):ca.InputArea(bo.getAttrs(dY,d1),d3.$0);},(d2=((bo.splitName())(dY))(d0),ba.tryGetVoVW(d2[0],d2[1])));});};bo.createDoc=function(dY,dZ,d0,d1){return bo.turnToView(function(){var d2,d3,d4;d2=(d3=(d4=((bo.splitName())(dY))(d0),ba.tryGetDoc(d4[0],d4[1])),d3==null?null:{$:1,$0:bo.getDocFinal(d1,d3.$0)});return d2==null?ba.errDoc((function(d5){return function(d6){return d5("Missing doc: "+bN.toSafe(d6));};}(a.id))(d0)):d2.$0;});};bo.createTemplate=function(dY,dZ,d0,d1,d2){return bo.turnToView(function(){var d3,d4,d5,d6,d7,d8;d5=bo.getAttrs(dY,d1);c1.LoadLocalTemplates("local");function d9(d$,ea){var eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el;eb=bo.S(d$);ec=bo.Identifier(ea);return ec!=null&&ec.$==1?(ed=ec.$0,ee=(ef=(eg=(eh=((bo.splitName())(dY))(ed),ba.tryGetDoc(eh[0],eh[1])),eg==null?null:{$:1,$0:{$:0,$0:eb.toLowerCase(),$1:(bo.getDocF(bZ.Empty,eg.$0))[0]}}),ef==null?(ei=(ej=((bo.splitName())(dY))(ed),ba.tryGetVar(ej[0],ej[1])),ei==null?null:{$:1,$0:{$:8,$0:eb.toLowerCase(),$1:ei.$0.varVar}}):ef),ee==null?{$:0,$0:eb.toLowerCase(),$1:ba.errDoc((function(em){return function(en){return em("Missing element: "+bN.toSafe(en));};}(a.id))(ed))}:ee.$0):(ek=bo.S(d$),el=bo.S(ea),{$:0,$0:ek.toLowerCase(),$1:ba.errDoc((function(em){return function(en){return em("Not implemented: "+bN.toSafe(en));};}(a.id))(el))});}function d_(d$,ea){return d$%2===0;}try{d4={$:1,$0:(d6=(d7=bT.map(function(d$){return d9(d$[0],d$[1]);},bT.map(function(d$){return d$[1];},bT.filter(function(d$){return d_(d$[0],d$[1]);},bT.indexed(bT.pairwise(d2))))),(bT.isEmpty(d5)?a.id:(d8=[{$:3,$0:"attrs",$1:cD.Concat(d5)}],function(d$){return bT.append(d8,d$);}))(d7)),c1.NamedTemplate("local",{$:1,$0:d0.toLowerCase()},d6))};}catch(d$){d4=null;}return d4==null?ba.errDoc((function(ea){return function(eb){return ea("Missing template: "+bN.toSafe(eb));};}(a.id))(d0)):d4.$0;});};bo.getParamText=function(dY,dZ,d0){b_.Get(function(d1){if(d1.$==1)d0(d1.$0);else d0(d1.$0);},bo.getTextToken(dY,dZ));};bo.createAction=function(dY,dZ,d0,d1){var d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed;d6=(d3=((bo.splitName())(dY))(d0),ba.tryGetAct(d3[0],d3[1]));if(d6==null)d2=null;else{d7=d6.$0;if(d1.$===0)d4=d7.actFunction;else{d8=d7.actFunction;switch(d8.$==1?d1.$==1?d1.$1.$==0?(d5=[d8.$0,d1.$0],0):3:3:d8.$==2?d1.$==1?d1.$1.$==0?(d5=[d8.$0,d8.$2,d1.$0],2):d1.$1.$1.$==0?(d5=[d8.$0,d1.$0,d1.$1.$0],1):3:3:3){case 0:d4=(d9=d5[0],(d_=d5[1],{$:0,$0:function(){bo.getParamText(dY,d_,d9);}}));break;case 1:d4=(d$=d5[0],(ea=d5[1],(eb=d5[2],{$:0,$0:function(){bo.getParamText(dY,ea,function(ee){bo.getParamText(dY,eb,d$(ee));});}})));break;case 2:d4=(ec=d5[0],(ed=d5[2],{$:1,$0:function(ee){bo.getParamText(dY,ed,function(ef){(ec(ef))(ee);});},$1:d5[1]}));break;case 3:d4={$:0,$0:function(){((((dS.Curried(function(ee,ef,eg,eh){return ee("Parameters do not coincide for Action "+bN.toSafe(ef)+" "+bN.printList(function(ei){return cz.p$28(ei);},eg)+" "+cy.p(eh));},4))(function(ee){dQ.log(ee);}))(d0))(d1))(d7);}};break;}}d2={$:1,$0:d4};}return d2==null?{$:0,$0:function(){((function(ee){return function(ef){return ee("Action Not Found "+bN.toSafe(ef));};}(function(ee){dQ.log(ee);}))(d0));}}:d2.$0;};bo.createConcat=function(dY,dZ,d0){return bo.turnToView(function(){return ca.Concat(bo.getAllDocs(dY,d0));});};bo.createVar=function(dY,dZ,d0){return cc.Create$1(d0);};bo.findJSEntry=function(dY){return bT.fold(function(dZ,d0){var d1;return dZ==null?null:(d1=dZ.$0,!d1[d0]?null:{$:1,$0:d1[d0]});},{$:1,$0:a},J.splitByChar(".",dY));};bo.createView=function(dY,dZ,d0){return b_.Bind(function(){var d1;function d2(d3){return d3.$==1?(function(d4){return function(d5){return d4(cy.p(d5));};}(a.id))(d3.$0):d3.$0;}try{return b_.Map(function(d3){try{return!bQ.Equals(d3,null)&&d3.length===0?"No JS function specified":!bQ.Equals(d3,null)&&d3.length===1?a.String(a["eval"](bO.get(d3,0))):a.String(a["eval"](bO.get(d3,0)).apply(null,bP.array(d3,{$:1,$0:1},null)));}catch(d4){return d4.message;}},b_.Map((d1=function(d3){return bT.map(d2,d3);},function(d3){return bO.ofSeq(d1(d3));}),cG.traverseSeq(function(d3){return bo.getTextToken(dY,d3);},d0)));}catch(d3){return b_.Const(d3.message);}},bo.currentViewTriggger());};bo.createSplitterM=function(){bY.$cctor();return bY.createSplitterM;};bo.createButtonM=function(){bY.$cctor();return bY.createButtonM;};bo.createInputM=function(){bY.$cctor();return bY.createInputM;};bo.createTextAreaM=function(){bY.$cctor();return bY.createTextAreaM;};bo.createElementM=function(){bY.$cctor();return bY.createElementM;};bo.createDocM=function(){bY.$cctor();return bY.createDocM;};bo.createTemplateM=function(){bY.$cctor();return bY.createTemplateM;};bo.createConcatM=function(){bY.$cctor();return bY.createConcatM;};bo.createVarM=function(){bY.$cctor();return bY.createVarM;};bo.createViewM=function(){bY.$cctor();return bY.createViewM;};bo.createActionM=function(){bY.$cctor();return bY.createActionM;};bo.entryDoc=function(dY,dZ){return{$:1,$0:{$:2,$0:ba.newDoc(dY,cC.Create(function(){return dZ;}))}};};bo.entryVar=function(dY,dZ){return{$:1,$0:{$:0,$0:ba.newVar(dY,dZ)}};};bo.entryView=function(dY,dZ){return{$:1,$0:{$:1,$0:ba.newViw(dY,dZ)}};};bo.entryAct=function(dY,dZ){return{$:1,$0:{$:3,$0:ba.newActF(dY,dZ)}};};bo.createEntryO=function(dY,dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF;try{d0=bo.splitTokens(dZ);return d0.$==1&&(d2=bo.Identifier(d0.$0),d2!=null&&d2.$==1&&(d0.$1.$==1&&(bo.Vertical(d0.$1.$0).$==0&&(d0.$1.$1.$==1&&(d3=bo.Measures$1(d0.$1.$1.$0),d3!=null&&d3.$==1&&(d1=[d0.$1.$1.$1,d3.$0,d2.$0],true))))))?(d4=d1[2],bo.entryDoc(f.Tag$3(d4),(bo.createSplitterM())([dY,d4,true,d1[1],d1[0]]))):d0.$==1&&(d6=bo.Identifier(d0.$0),d6!=null&&d6.$==1&&(d0.$1.$==1&&(bo.Vertical(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(d7=bo.Measures$1(d0.$1.$1.$0),d7!=null&&d7.$==1&&(d5=[d0.$1.$1.$1,d7.$0,d6.$0],true))))))?(d8=d5[2],bo.entryDoc(f.Tag$3(d8),(bo.createSplitterM())([dY,d8,false,d5[1],d5[0]]))):d0.$==1&&(d_=bo.Identifier(d0.$0),d_!=null&&d_.$==1&&(d0.$1.$==1&&(bo.PlugIn(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(d$=bo.Identifier(d0.$1.$1.$0),d$!=null&&d$.$==1&&(d0.$1.$1.$1.$==1&&(d0.$1.$1.$1.$1.$==1&&(d0.$1.$1.$1.$1.$1.$==0&&(d9=[d$.$0,d0.$1.$1.$1.$0,d_.$0,d0.$1.$1.$1.$1.$0],true)))))))))?(ea=d9[2],bo.entryDoc(f.Tag$3(ea),(bo.createButtonM())([dY,ea,d9[0],d9[1],d9[3]]))):d0.$==1&&(ec=bo.Identifier(d0.$0),ec!=null&&ec.$==1&&(d0.$1.$==1&&(bo.PlugIn(d0.$1.$0).$==2&&(d0.$1.$1.$==1&&(ed=bo.Identifier(d0.$1.$1.$0),ed!=null&&ed.$==1&&(d0.$1.$1.$1.$==1&&(d0.$1.$1.$1.$1.$==0&&(eb=[d0.$1.$1.$1.$0,ec.$0,ed.$0],true))))))))?(ee=eb[1],bo.entryDoc(f.Tag$3(ee),(bo.createInputM())([dY,ee,eb[2],eb[0]]))):d0.$==1&&(eg=bo.Identifier(d0.$0),eg!=null&&eg.$==1&&(d0.$1.$==1&&(bo.PlugIn(d0.$1.$0).$==3&&(d0.$1.$1.$==1&&(eh=bo.Identifier(d0.$1.$1.$0),eh!=null&&eh.$==1&&(d0.$1.$1.$1.$==1&&(d0.$1.$1.$1.$1.$==0&&(ef=[d0.$1.$1.$1.$0,eg.$0,eh.$0],true))))))))?(ei=ef[1],bo.entryDoc(f.Tag$3(ei),(bo.createTextAreaM())([dY,ei,ef[2],ef[0]]))):d0.$==1&&(ek=bo.Identifier(d0.$0),ek!=null&&ek.$==1&&(d0.$1.$==1&&(bo.Var(d0.$1.$0).$==0&&(d0.$1.$1.$==1&&(d0.$1.$1.$1.$==0&&(ej=[ek.$0,bo.S(d0.$1.$1.$0)],true))))))?(el=ej[0],bo.entryVar(f.Tag$3(el),(bo.createVarM())([dY,el,ej[1]]))):d0.$==1&&(en=bo.Identifier(d0.$0),en!=null&&en.$==1&&(d0.$1.$==1&&(bo.Var(d0.$1.$0).$==1&&(d0.$1.$1.$==1&&(em=[bo.S(d0.$1.$1.$0),en.$0,d0.$1.$1.$1],true)))))?(eo=em[1],bo.entryDoc(f.Tag$3(eo),(bo.createDocM())([dY,eo,em[0],em[2]]))):d0.$==1&&(eq=bo.Identifier(d0.$0),eq!=null&&eq.$==1&&(d0.$1.$==1&&(bo.Var(d0.$1.$0).$==2&&(ep=[eq.$0,d0.$1.$1],true))))?(er=ep[0],bo.entryView(f.Tag$3(er),(bo.createViewM())([dY,er,ep[1]]))):d0.$==1&&(et=bo.Identifier(d0.$0),et!=null&&et.$==1&&(d0.$1.$==1&&(bo.Vertical(d0.$1.$0).$==4&&(d0.$1.$1.$==1&&(d0.$1.$1.$1.$==1&&(es=[d0.$1.$1.$1.$0,d0.$1.$1.$1.$1,et.$0,bo.S(d0.$1.$1.$0)],true))))))?(eu=es[2],bo.entryDoc(f.Tag$3(eu),(bo.createTemplateM())([dY,eu,es[3],es[0],es[1]]))):d0.$==1&&(ew=bo.Identifier(d0.$0),ew!=null&&ew.$==1&&(d0.$1.$==1&&(bo.Var(d0.$1.$0).$==4&&(ev=[d0.$1.$1,ew.$0],true))))?(ex=ev[1],bo.entryDoc(f.Tag$3(ex),(bo.createConcatM())([dY,ex,ev[0]]))):d0.$==1&&(ez=bo.Identifier(d0.$0),ez!=null&&ez.$==1&&(d0.$1.$==1&&(bo.Var(d0.$1.$0).$==5&&(d0.$1.$1.$==1&&(eA=bo.Identifier(d0.$1.$1.$0),eA!=null&&eA.$==1&&(ey=[eA.$0,ez.$0,d0.$1.$1.$1],true))))))?(eB=ey[1],bo.entryAct(f.Tag$3(eB),(bo.createActionM())([dY,eB,ey[0],ey[2]]))):d0.$==1&&(eD=bo.Identifier(d0.$0),eD!=null&&eD.$==1&&(d0.$1.$==1&&(eE=bo.Vertical(d0.$1.$0),eE.$==5&&(d0.$1.$1.$==1&&(eC=[d0.$1.$1.$0,d0.$1.$1.$1,eE.$0,eD.$0],true)))))?(eF=eC[3],bo.entryDoc(f.Tag$3(eF),(bo.createElementM())([dY,eF,eC[2],eC[0],eC[1]]))):null;}catch(eG){return null;}};bo.getExtraLines=function(dY,dZ){var d0,d1,d2,d3;d0=(d1=(d2=bT.tryFindIndex(function(d4){return bU.Trim(d4)!==""&&!dY(d4);},bT.skip(1,dZ)),d2==null?null:{$:1,$0:1+d2.$0}),(d3=bO.length(dZ),d1==null?d3:d1.$0));return[bP.array(dZ,{$:1,$0:1},{$:1,$0:d0-1}),bP.array(dZ,{$:1,$0:d0},null)];};bo.createLines=function(dY,dZ,d0,d1,d2,d3){var d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;d4=bU.replicate(dZ,":");d5=":"+d4;d6=bT.tryHead(d3);return d6!=null&&d6.$==1?(d7=J.StartsWith(d4,bU.Trim(d6.$0)),d7!=null&&d7.$==1?(d8=d7.$0,(d9=bo.getExtraLines(function(ec){return bU.StartsWith(bU.Trim(ec),d5);},d3),(d_=(((dS.Curried3(function(ec,ed,ee){return ec("_"+bN.toSafe(ed)+"_"+a.String(ee));}))(a.id))(dY))(d2),(d$=bo.createLines(d_,dZ+1,[],[],1,d9[0]),(ea=d$[1],(eb=d$[0],bo.createLines(dY,dZ,bO.ofSeq(bT.delay(function(){return bT.append(d0,bT.delay(function(){return[d_];}));})),bO.ofSeq(bT.delay(function(){return bT.append(d1,bT.delay(function(){return bT.append(ea,bT.delay(function(){return[d_+" "+d8+" "+bU.concat(" ",eb)];}));}));})),d2+1,d9[1]))))))):[d0,d1]):[d0,d1];};bo.processLines=function(dY,dZ){function d0(d1){var d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;d2=bT.tryHead(d1);return d2!=null&&d2.$==1?(d3=d2.$0,(d4=bo.splitTokens(d3),d4.$==1&&(d6=bo.Identifier(d4.$0),d6!=null&&d6.$==1&&(d4.$1.$==1&&(bo.Vertical(d4.$1.$0).$==2&&(d4.$1.$1.$==0&&(d5=d6.$0,true)))))?(d7=bo.getExtraLines(function(ec){return bU.StartsWith(bU.Trim(ec),"|");},d1),d0((bs.createLayoutDefinitions(d5,bs.extractNodes(d7[0])))[1].concat(d7[1]))):d4.$==0?d0(bP.array(d1,{$:1,$0:1},null)):(d8=bo.getExtraLines(function(ec){return bU.StartsWith(bU.Trim(ec),":");},d1),(d9=d8[1],(d_=d8[0],bO.length(d_)>0?(d$=bo.createLines(bT.nth(0,bU.SplitChars(d3,[" "],1)),1,[],[],1,d_),(ea=d$[0],(eb=d$[1],d0(bO.ofSeq(bT.delay(function(){return bT.append(eb,bT.delay(function(){return bT.append([d3+" "+bU.concat(" ",ea)],bT.delay(function(){return d9;}));}));})))))):bO.ofSeq(bT.delay(function(){var ec;return bT.append((ec=dY(d3),ec!=null&&ec.$==1?[ec.$0]:[]),bT.delay(function(){return d0(d9);}));}))))))):[];}return d0(dZ);};bo.processText=function(dY,dZ){return bo.processLines(dY,bU.SplitChars(dZ,["\n","\r"],1));};bo.parseEntries=function(dY,dZ){return bo.processText(bq.createEntryO2(dY,new bS.New$5()),dZ);};bo.createEntries=function(dY){function dZ(d0){return bo.createEntryO(dY,d0);}return function(d0){return bo.processText(dZ,d0);};};bo.getText=function(dY,dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8;d0=bo.Identifier(dZ);return d0!=null&&d0.$==1?(d1=d0.$0,(d2=((bo.splitName())(dY))(d1),(d3=d2[0],(d4=d2[1],(d5=(d6=ba.tryGetViw(d3,d4),d6==null?null:{$:1,$0:ca.TextView(d6.$0.viwView)}),d5==null?(d7=(d8=ba.tryGetVar(d3,d4),d8==null?null:{$:1,$0:ca.TextView(d8.$0.varVar.get_View())}),d7==null?ca.TextNode(d1):d7.$0):d5.$0))))):ca.TextNode(bo.S(dZ));};bo.getDocEntries=function(dY){function dZ(d0){return d0[1];}return bT.map(function(d0){return bT.last(dZ(d0));},bT.groupBy(function(d0){return d0.docName;},bT.choose(function(d0){return d0.$==2?{$:1,$0:d0.$0}:null;},dY)));};bo.getVarEntries=function(dY){function dZ(d0){return d0[1];}return bT.map(function(d0){return bT.last(dZ(d0));},bT.groupBy(function(d0){return d0.varName;},bT.choose(function(d0){return d0.$==0?{$:1,$0:d0.$0}:null;},dY)));};bo.getViewEntries=function(dY){function dZ(d0){return d0[1];}return bT.map(function(d0){return bT.last(dZ(d0));},bT.groupBy(function(d0){return d0.viwName;},bT.choose(function(d0){return d0.$==1?{$:1,$0:d0.$0}:null;},dY)));};bo.getActionEntries=function(dY){function dZ(d0){return d0[1];}return bT.map(function(d0){return bT.last(dZ(d0));},bT.groupBy(function(d0){return d0.actName;},bT.choose(function(d0){return d0.$==3?{$:1,$0:d0.$0}:null;},dY)));};bo.getQueryEntries=function(dY){function dZ(d0){return d0[1];}return bT.map(function(d0){return bT.last(dZ(d0));},bT.groupBy(function(d0){return d0.qryName;},bT.choose(function(d0){return d0.$==4?{$:1,$0:d0.$0}:null;},dY)));};bo.inputFile=function(dY,dZ,d0,d1,d2){var d3,d4,d5,d6;d3=(d4=(d5=((bo.splitName())(dY))(d1),ba.tryGetAct(d5[0],d5[1])),d4==null?null:{$:1,$0:(d6=d4.$0,ca.Element("div",bo.getAttrs(dY,{$:0,$0:dZ}),[ca.Element("div",[cD.Create("class","input-group")],[ca.Element("span",[cD.Create("class","input-group-btn")],[ca.Element("label",[cD.Create("class","btn")],[bo.getText(dY,{$:0,$0:d0}),ca.Element("input",[cD.Create("class","form-control"),cD.Create("type","file"),cB.Style("display","none"),cD.HandlerImpl("click",function(d7){return function(){d7.value="";};}),cD.HandlerImpl("change",function(d7){return function(){return ba.callFunction(d7,null,d6.actFunction);};})],[])])]),d2!==""?bo.singleDoc(dY,bV.ofArray([{$:1,$0:d2}])):ca.get_Empty()])]))});return d3==null?ba.errDoc((function(d7){return function(d8){return d7("Action not found "+bN.toSafe(d8));};}(a.id))(d1)):d3.$0;};bo.inputLabel=function(dY,dZ,d0,d1){var d2,d3,d4;d2=(d3=(d4=((bo.splitName())(dY))(d1),ba.tryGetVar(d4[0],d4[1])),d3==null?null:{$:1,$0:ca.Element("div",bo.getAttrs(dY,{$:0,$0:dZ}),[ca.Element("div",[cD.Create("class","input-group")],[ca.Element("span",[cD.Create("class","input-group-addon")],[bo.getText(dY,{$:0,$0:d0})]),ca.Input([cD.Create("class","form-control")],d3.$0.varVar)])])});return d2==null?ba.errDoc((function(d5){return function(d6){return d5("Var not found "+bN.toSafe(d6));};}(a.id))(d1)):d2.$0;};bo.none=function(dY){return ca.Element("span",[],[]);};bo.htmlDoc=function(dY,dZ){return ca.BindView(function(d0){return d0.$==1?ba.errDoc((function(d1){return function(d2){return d1("HtmlDoc: unexpected action "+cy.p(d2));};}(a.id))(d0.$0)):ca.Verbatim(d0.$0);},bo.getTextData(dY,dZ));};bo.refreshEntries=function(dY,dZ){var d0,d1,d2,d3;d0=(d1=ba.tryGetPlugIn(dY),d1==null?(d2=(d3=ba.defaultPlugIn(),bg.New(dY,d3.plgVars,d3.plgViews,d3.plgDocs,d3.plgActions,d3.plgQueries)),(ba.addPlugIn(d2),d2)):d1.$0);cH.refreshLM(d0.plgVars,bO.ofSeq(bT.delay(function(){return bo.getVarEntries(dZ);})));cH.refreshLM(d0.plgViews,bO.ofSeq(bT.delay(function(){return bo.getViewEntries(dZ);})));cH.refreshLM(d0.plgActions,bO.ofSeq(bT.delay(function(){return bo.getActionEntries(dZ);})));cH.refreshLM(d0.plgQueries,bO.ofSeq(bT.delay(function(){return bo.getQueryEntries(dZ);})));cH.refreshLM(d0.plgDocs,bO.ofSeq(bT.delay(function(){return bT.append(bo.getDocEntries(dZ),bT.delay(function(){return bT.append([ba.newDocF(f.Tag$3("InputFile"),{$:4,$0:dS.Curried(bo.inputFile,4,[dY]),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],bT.delay(function(){return bT.append([ba.newDocF(f.Tag$3("InputLabel"),{$:3,$0:dS.Curried(bo.inputLabel,3,[dY]),$1:"attrs",$2:"Label",$3:"Var"})],bT.delay(function(){return bT.append([ba.newDocF(f.Tag$3("HtmlDoc"),{$:1,$0:function(d4){return bo.htmlDoc(dY,d4);},$1:"html"})],bT.delay(function(){return[ba.newDocF(f.Tag$3("none"),{$:1,$0:bo.none,$1:"x"})];}));}));}));}));})));};bo.addLayout=function(dY){b_.Sink(function(dZ){var d0;bo.set_currentViewTriggger(b_.Map2(function(d1,d2){return d1+d2;},dY.lytDefinition.get_View(),ba.mainDocV().get_View()));bo.refreshEntries(dY.lytName,(d0=(bo.createEntries(dY.lytName))(dZ),bT.append(bV.ofArray([{$:0,$0:ba.newVar(f.Tag$3("Layout"),dY.lytDefinition)}]),d0)));},dY.lytDefinition.get_View());};bo.newLyt=function(dY,dZ){return bn.New(dY,cc.Create$1(dZ));};bo.addNewLayout=function(dY,dZ){var d0,d1;bo.addLayout((d0=(d1=!bQ.Equals(dZ,null)?dZ:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(J.unindentStr())(d1)),bo.newLyt(!bQ.Equals(dZ,null)?dY:f.Tag$3("Lyt_"+bU.Replace(a.String(bL.NewGuid()),"-","")),d0)));};bp=bo.Measures=dS.Class({toString:function(){return this.$==1?((((dS.Curried(function(dY,dZ,d0,d1){return dY(a.String(dZ)+"-"+a.String(d0)+"-"+a.String(d1));},4))(a.id))(bM.toInt(this.$0)))(bM.toInt(this.$1)))(bM.toInt(this.$2)):a.String(bM.toInt(this.$1?this.$0:-this.$0));}},null,bp);bq.pairOfDocs=function(dY,dZ){var d0;d0=b_.Map(function(d1){var d2;return d1.$==1&&(d1.$1.$==1&&(d1.$1.$1.$==0&&(d2=[d1.$0,d1.$1.$0],true)))?[d2[0],d2[1]]:[ba.errDoc((function(d3){return function(d4){return d3("splitter expects exactly 2 elements "+bN.printList(function(d5){return cz.p$28(d5);},d4));};}(a.id))(dZ)),ba.errDoc("part 2")];},b_.Map(function(){return bo.getAllDocs(dY,dZ);},bo.currentViewTriggger()));return[ca.EmbedView(b_.Map(function(d1){return d1[0];},d0)),ca.EmbedView(b_.Map(function(d1){return d1[1];},d0))];};bq.entryDef=function(dY,dZ){return{$:0,$0:dY,$1:dZ};};bq.entryDoc=function(dY,dZ){return{$:1,$0:bq.entryDef(dY,{$:0,$0:dZ})};};bq.entryAct=function(dY,dZ){return{$:1,$0:bq.entryDef(dY,{$:1,$0:dZ})};};bq.entryView=function(dY,dZ){return{$:1,$0:bq.entryDef(dY,{$:3,$0:dZ})};};bq.entryVJS=function(dY,dZ){return{$:1,$0:bq.entryDef(dY,{$:4,$0:dZ})};};bq.entryVar=function(dY,dZ){return{$:1,$0:bq.entryDef(dY,{$:2,$0:dZ})};};bq.entryPlg=function(dY,dZ){return{$:1,$0:bq.entryDef(dY,{$:5,$0:dZ})};};bq.entryRef=function(dY,dZ,d0){return{$:1,$0:bq.entryDef(dY,{$:6,$0:[dZ,d0]})};};bq.R=function(dY){var dZ,d0,d1;dZ=bo.Identifier(dY);return dZ!=null&&dZ.$==1?(d0=bU.SplitChars(dZ.$0,["."],0),!bQ.Equals(d0,null)&&d0.length===1?{$:1,$0:{$:0,$0:bO.get(d0,0)}}:!bQ.Equals(d0,null)&&d0.length===2?(d1=bO.get(d0,1),{$:1,$0:{$:1,$0:bO.get(d0,0),$1:d1}}):null):null;};bq.createEntryO=function(dY,dZ,d0){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2;function e3(fk){var fl,fm;fl=bq.R(fk);return fl!=null&&fl.$==1?(fm=fl.$0,{$:1,$0:[dY(fm),fm]}):null;}function e4(fk){var fl,fm;return(fm=e3(fk),fm!=null&&fm.$==1&&(fm.$0[0][0].$==0&&(fl=fm.$0[1],true)))?{$:1,$0:{$:0,$0:fl}}:null;}function e5(fk){var fl,fm;return(fm=e3(fk),fm!=null&&fm.$==1&&(fm.$0[0][0].$==1&&(fl=fm.$0[1],true)))?{$:1,$0:{$:0,$0:fl}}:null;}function e6(fk){var fl,fm;return(fm=e3(fk),fm!=null&&fm.$==1&&(fm.$0[0][0].$==2&&(fl=fm.$0[1],true)))?{$:1,$0:{$:0,$0:fl}}:null;}function e7(fk){var fl,fm;return(fm=e3(fk),fm!=null&&fm.$==1&&(fm.$0[0][0].$==3&&(fl=fm.$0[1],true)))?{$:1,$0:{$:0,$0:fl}}:null;}function e8(fk){var fl,fm,fn;return(fm=e3(fk),fm!=null&&fm.$==1&&(fm.$0[0][0].$==4&&((fn=fm.$0[0][1],fn!=null&&fn.$==1)&&(fm.$0[0][1].$0.$==6&&(fl=[fm.$0[0][1].$0.$0,fm.$0[1]],true)))))?{$:1,$0:fl[0]}:null;}function e9(fk){var fl,fm;return(fm=bq.R(fk),fm!=null&&fm.$==1&&(fm.$0.$==0&&(fl=fm.$0.$0,true)))?{$:1,$0:fl}:null;}function e_(fk){var fl,fm;return(fm=e9(fk),fm!=null&&fm.$==1&&(bU.StartsWith(fm.$0,"_")&&(fl=fm.$0,true)))?{$:1,$0:fl}:null;}function e$(fk){var fl,fm,fn;fl=e5(fk);return fl!=null&&fl.$==1?{$:1,$0:{$:1,$0:fl.$0}}:(fm=e6(fk),fm!=null&&fm.$==1?{$:1,$0:{$:2,$0:fm.$0}}:(fn=e7(fk),fn!=null&&fn.$==1?{$:1,$0:{$:3,$0:fn.$0}}:null));}function fa(fk){var fl;fl=J.delimitedO("@{","}",fk);return fl!=null&&fl.$==1?{$:1,$0:[fl.$0[0],{$:1,$0:fl.$0[1]},fl.$0[2]]}:null;}function fb(fk){var fl,fm,fn,fo,fp,fq,fr,fs;return(fm=fa(fk),fm!=null&&fm.$==1&&(fn=e$(fm.$0[1]),fn!=null&&fn.$==1&&(fl=[fm.$0[2],fm.$0[0],fn.$0],true)))?(fo=fl[0],(fp=fl[1],(fq=fp===""?bV.ofArray([fl[2]]):bV.ofArray([{$:0,$0:fp},fl[2]]),fo===""?{$:1,$0:fq}:(fr=fb(fo),fr!=null&&fr.$==1?{$:1,$0:bV.append(fq,fr.$0)}:null)))):(fs=fa(fk),fs!=null&&fs.$==1)?null:{$:1,$0:bV.ofArray([{$:0,$0:fk}])};}function fc(fk){var fl,fm,fn;return(fm=fa(fk),fm!=null&&fm.$==1&&(fn=e7(fm.$0[1]),fn!=null&&fn.$==1&&(bU.Trim(fm.$0[0])===""&&bU.Trim(fm.$0[2])===""&&(fl=[fm.$0[2],fn.$0,fm.$0[0]],true))))?{$:1,$0:fl[1]}:null;}function fd(fk){var fl,fm;return fk.$==0&&(fm=fb(fk.$0),fm!=null&&fm.$==1&&(fl=fm.$0,true))?{$:1,$0:fl}:null;}function fe(fk){return fk.$==0?{$:1,$0:bO.ofSeq(bT.choose(function(fl){var fm,fn,fo,fp,fq,fr,fs,ft;fm=bU.SplitChars(bU.Trim(fl),["="],0);return!bQ.Equals(fm,null)&&fm.length===2&&(fo=fc(bO.get(fm,1)),fo!=null&&fo.$==1&&(fn=[fo.$0,bO.get(fm,0)],true))?{$:1,$0:{$:2,$0:bU.Trim(fn[1]),$1:fn[0]}}:!bQ.Equals(fm,null)&&fm.length===2&&(fq=fb(bO.get(fm,1)),fq!=null&&fq.$==1&&(fp=[bO.get(fm,0),fq.$0],true))?{$:1,$0:{$:1,$0:bU.Trim(fp[0]),$1:fp[1]}}:(fr=bU.SplitChars(bU.Trim(fl),[":"],0),!bQ.Equals(fr,null)&&fr.length===2&&(ft=fb(bO.get(fr,1)),ft!=null&&ft.$==1&&(fs=[bO.get(fr,0),ft.$0],true))?{$:1,$0:{$:0,$0:bU.Trim(fs[0]),$1:fs[1]}}:(function(fu){return function(fv){return fu("Attributes should be like: \"name=val\" or \"name:val\" and separated by ';' : "+bN.toSafe(fv));};}(bM.FailWith))(fl));},bT.filter(function(fl){return bU.Trim(fl)!=="";},bU.SplitChars(bU.Trim(fk.$0),[";"],0))))}:null;}function ff(fk){var fl,fm,fn,fo,fp;fl=fd(fk);return fl!=null&&fl.$==1?{$:1,$0:{$:0,$0:fl.$0}}:(fm=e4(fk),fm!=null&&fm.$==1?{$:1,$0:{$:1,$0:fm.$0}}:(fn=e5(fk),fn!=null&&fn.$==1?{$:1,$0:{$:2,$0:fn.$0}}:(fo=e6(fk),fo!=null&&fo.$==1?{$:1,$0:{$:3,$0:fo.$0}}:(fp=e7(fk),fp!=null&&fp.$==1?{$:1,$0:{$:4,$0:fp.$0}}:null))));}function fg(fk){var fl,fm,fn;switch(fk.$==1?(fm=ff(fk.$0),fm!=null&&fm.$==1?(fn=fg(fk.$1),fn!=null&&fn.$==1?(fl=[fm.$0,fn.$0],1):2):2):0){case 0:return{$:1,$0:bZ.Empty};case 1:return{$:1,$0:new bZ({$:1,$0:fl[0],$1:fl[1]})};case 2:return null;}}function fh(fk){var fl,fm,fn,fo;fl=fd(fk);return fl!=null&&fl.$==1?{$:1,$0:{$:0,$0:fl.$0}}:(fm=e4(fk),fm!=null&&fm.$==1?{$:1,$0:{$:1,$0:fm.$0}}:(fn=e5(fk),fn!=null&&fn.$==1?{$:1,$0:{$:2,$0:fn.$0}}:(fo=e6(fk),fo!=null&&fo.$==1?{$:1,$0:{$:3,$0:fo.$0}}:null)));}function fi(fk){var fl,fm,fn;switch(fk.$==1?(fm=fh(fk.$0),fm!=null&&fm.$==1?(fn=fi(fk.$1),fn!=null&&fn.$==1?(fl=[fm.$0,fn.$0],1):2):2):0){case 0:return{$:1,$0:bZ.Empty};case 1:return{$:1,$0:new bZ({$:1,$0:fl[0],$1:fl[1]})};case 2:return null;}}function fj(fk){var fl,fm,fn;switch(fk.$==1?(fm=e8(fk.$0),fm!=null&&fm.$==1?(fn=fj(fk.$1),fn!=null&&fn.$==1?(fl=[fm.$0,fn.$0],1):2):2):0){case 0:return{$:1,$0:bZ.Empty};case 1:return{$:1,$0:new bZ({$:1,$0:fl[0],$1:fl[1]})};case 2:return null;}}d1=bo.splitTokens(d0);return d1.$==1&&(d3=e9(d1.$0),d3!=null&&d3.$==1&&(d1.$1.$==1&&(bo.PlugIn(d1.$1.$0).$==0&&(d4=fj(d1.$1.$1),d4!=null&&d4.$==1&&(d2=[d4.$0,d3.$0],true)))))?bq.entryPlg(d2[1],{$:0,$0:new b4.New(d2[0])}):d1.$==1&&(d6=e_(d1.$0),d6!=null&&d6.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==1&&(d1.$1.$1.$==1&&(d7=e9(d1.$1.$1.$0),d7!=null&&d7.$==1&&(d1.$1.$1.$1.$==0&&(d5=[d6.$0,d7.$0],true)))))))?bq.entryRef(d5[0],d5[1],br.RDoc):d1.$==1&&(d9=e_(d1.$0),d9!=null&&d9.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==0&&(d1.$1.$1.$==1&&(d_=e9(d1.$1.$1.$0),d_!=null&&d_.$==1&&(d1.$1.$1.$1.$==0&&(d8=[d9.$0,d_.$0],true)))))))?bq.entryRef(d8[0],d8[1],br.RVar):d1.$==1&&(ea=e_(d1.$0),ea!=null&&ea.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==2&&(d1.$1.$1.$==1&&(eb=e9(d1.$1.$1.$0),eb!=null&&eb.$==1&&(d1.$1.$1.$1.$==0&&(d$=[ea.$0,eb.$0],true)))))))?bq.entryRef(d$[0],d$[1],br.RViw):d1.$==1&&(ed=e_(d1.$0),ed!=null&&ed.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==5&&(d1.$1.$1.$==1&&(ee=e9(d1.$1.$1.$0),ee!=null&&ee.$==1&&(d1.$1.$1.$1.$==0&&(ec=[ed.$0,ee.$0],true)))))))?bq.entryRef(ec[0],ec[1],br.RAct):d1.$==1&&(eg=e9(d1.$0),eg!=null&&eg.$==1&&(d1.$1.$==1&&(bo.Vertical(d1.$1.$0).$==0&&(d1.$1.$1.$==1&&(eh=bo.Measures$1(d1.$1.$1.$0),eh!=null&&eh.$==1&&(d1.$1.$1.$1.$==1&&(ei=e4(d1.$1.$1.$1.$0),ei!=null&&ei.$==1&&(d1.$1.$1.$1.$1.$==1&&(ej=e4(d1.$1.$1.$1.$1.$0),ej!=null&&ej.$==1&&(d1.$1.$1.$1.$1.$1.$==0&&(ef=[ei.$0,eh.$0,eg.$0,ej.$0],true)))))))))))?bq.entryDoc(ef[2],{$:0,$0:{$:0,$0:true,$1:ef[1],$2:ef[0],$3:ef[3]}}):d1.$==1&&(el=e9(d1.$0),el!=null&&el.$==1&&(d1.$1.$==1&&(bo.Vertical(d1.$1.$0).$==1&&(d1.$1.$1.$==1&&(em=bo.Measures$1(d1.$1.$1.$0),em!=null&&em.$==1&&(d1.$1.$1.$1.$==1&&(en=e4(d1.$1.$1.$1.$0),en!=null&&en.$==1&&(d1.$1.$1.$1.$1.$==1&&(eo=e4(d1.$1.$1.$1.$1.$0),eo!=null&&eo.$==1&&(d1.$1.$1.$1.$1.$1.$==0&&(ek=[en.$0,em.$0,el.$0,eo.$0],true)))))))))))?bq.entryDoc(ek[2],{$:0,$0:{$:0,$0:false,$1:ek[1],$2:ek[0],$3:ek[3]}}):d1.$==1&&(eq=e9(d1.$0),eq!=null&&eq.$==1&&(d1.$1.$==1&&(bo.PlugIn(d1.$1.$0).$==1&&(d1.$1.$1.$==1&&(er=e7(d1.$1.$1.$0),er!=null&&er.$==1&&(d1.$1.$1.$1.$==1&&(es=fe(d1.$1.$1.$1.$0),es!=null&&es.$==1&&(d1.$1.$1.$1.$1.$==1&&(et=fd(d1.$1.$1.$1.$1.$0),et!=null&&et.$==1&&(d1.$1.$1.$1.$1.$1.$==0&&(ep=[er.$0,es.$0,eq.$0,et.$0],true)))))))))))?bq.entryDoc(ep[2],{$:1,$0:{$:0,$0:ep[0],$1:ep[1],$2:ep[3]}}):d1.$==1&&(ev=e9(d1.$0),ev!=null&&ev.$==1&&(d1.$1.$==1&&(bo.PlugIn(d1.$1.$0).$==2&&(d1.$1.$1.$==1&&(ew=e5(d1.$1.$1.$0),ew!=null&&ew.$==1&&(d1.$1.$1.$1.$==1&&(ex=fe(d1.$1.$1.$1.$0),ex!=null&&ex.$==1&&(d1.$1.$1.$1.$1.$==0&&(eu=[ex.$0,ev.$0,ew.$0],true)))))))))?bq.entryDoc(eu[1],{$:2,$0:{$:0,$0:eu[2],$1:eu[0]}}):d1.$==1&&(ez=e9(d1.$0),ez!=null&&ez.$==1&&(d1.$1.$==1&&(bo.PlugIn(d1.$1.$0).$==3&&(d1.$1.$1.$==1&&(eA=e5(d1.$1.$1.$0),eA!=null&&eA.$==1&&(d1.$1.$1.$1.$==1&&(eB=fe(d1.$1.$1.$1.$0),eB!=null&&eB.$==1&&(d1.$1.$1.$1.$1.$==0&&(ey=[eB.$0,ez.$0,eA.$0],true)))))))))?bq.entryDoc(ey[1],{$:3,$0:{$:0,$0:ey[2],$1:ey[0]}}):d1.$==1&&(eD=e9(d1.$0),eD!=null&&eD.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==0&&(d1.$1.$1.$==1&&(eE=(eG=fd(d1.$1.$1.$0),eG!=null&&eG.$==1&&(eG.$0.$==1&&(eG.$0.$0.$==0&&(eG.$0.$1.$==0&&(eF=eG.$0.$0.$0,true)))))?{$:1,$0:eF}:null,eE!=null&&eE.$==1&&(d1.$1.$1.$1.$==0&&(eC=[eD.$0,eE.$0],true)))))))?bq.entryVar(eC[0],{$:0,$0:bU.Trim(eC[1])}):d1.$==1&&(eI=e9(d1.$0),eI!=null&&eI.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==1&&(d1.$1.$1.$==1&&(eJ=e4(d1.$1.$1.$0),eJ!=null&&eJ.$==1&&(eK=fg(d1.$1.$1.$1),eK!=null&&eK.$==1&&(eH=[eJ.$0,eI.$0,eK.$0],true)))))))?bq.entryDoc(eH[1],{$:4,$0:{$:0,$0:eH[0],$1:eH[2]}}):d1.$==1&&(eM=e9(d1.$0),eM!=null&&eM.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==2&&(eN=fg(d1.$1.$1),eN!=null&&eN.$==1&&(eL=[eM.$0,eN.$0],true)))))?bq.entryView(eL[0],{$:0,$0:eL[1]}):d1.$==1&&(eP=e9(d1.$0),eP!=null&&eP.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==3&&(eQ=fg(d1.$1.$1),eQ!=null&&eQ.$==1&&(eO=[eP.$0,eQ.$0],true)))))?bq.entryVJS(eO[0],{$:0,$0:eO[1]}):d1.$==1&&(eS=e9(d1.$0),eS!=null&&eS.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==4&&(eT=fi(d1.$1.$1),eT!=null&&eT.$==1&&(eR=[eS.$0,eT.$0],true)))))?bq.entryDoc(eR[0],{$:5,$0:{$:0,$0:eR[1]}}):d1.$==1&&(eV=e9(d1.$0),eV!=null&&eV.$==1&&(d1.$1.$==1&&(bo.Var(d1.$1.$0).$==5&&(d1.$1.$1.$==1&&(eW=e7(d1.$1.$1.$0),eW!=null&&eW.$==1&&(eX=fg(d1.$1.$1.$1),eX!=null&&eX.$==1&&(eU=[eW.$0,eV.$0,eX.$0],true)))))))?bq.entryAct(eU[1],{$:0,$0:eU[0],$1:eU[2]}):d1.$==1&&(eZ=e9(d1.$0),eZ!=null&&eZ.$==1&&(d1.$1.$==1&&(e0=bo.Vertical(d1.$1.$0),e0.$==5&&(d1.$1.$1.$==1&&(e1=ff(d1.$1.$1.$0),e1!=null&&e1.$==1&&(e2=fi(d1.$1.$1.$1),e2!=null&&e2.$==1&&(eY=[e1.$0,e0.$0,eZ.$0,e2.$0],true)))))))?bq.entryDoc(eY[2],{$:6,$0:{$:0,$0:eY[1],$1:eY[0],$2:eY[3]}}):null;};bq.createEntryO2=function(dY,dZ){function d0(d5,d6){return dZ.ContainsKey(d5)?((u.errorf(dS.Curried3(function(d7,d8,d9){return d7("Already exists "+bN.toSafe(d8)+" : "+cz.p$4(d9)+" ");})))(d5))(d6):(dZ.Add(d5,d6),{$:0,$0:null});}function d1(d5,d6){return b0.Map(function(){return[d5,d6];},d0(d5,d6));}function d2(d5,d6){return b0.Bind(function(){return{$:1,$0:d5};},d0(bT.head(bU.SplitChars(d6,[" ","\u0009"],1)),{$:0,$0:{$:6,$0:{$:0,$0:"div",$1:{$:0,$0:bZ.Empty},$2:bV.ofArray([{$:0,$0:bV.ofArray([{$:0,$0:d5}])}])}}}));}function d3(d5){try{return dZ.get_Item(d5);}catch(d6){return(function(d7){return function(d8){return d7("Could not find reference to "+bN.toSafe(d8));};}(bM.FailWith))(d5);}}function d4(d5){var d6,d7,d8,d9,d_,d$,ea,eb;if(d5.$==1){d7=d5.$1;d8=d5.$0;try{d_=d3(d8);if(d_.$==5)try{d9=d_.$0.$0.get_Item(d7);}catch(ec){d9=(((dS.Curried3(function(ed,ee,ef){return ed("Could not find reference to "+bN.toSafe(ee)+"."+bN.toSafe(ef));}))(bM.FailWith))(d8))(d7);}else d9=(function(ed){return function(ee){return ed("PlugIn not registered: "+cz.p(ee));};}(bM.FailWith))(d5);return[d9,null];}catch(ed){d$=ba.tryGetPlugIn(f.Tag$3(d8));return d$!=null&&d$.$==1?(ea=d$.$0,eb=f.Tag$3(d7),[ea.plgDocs.ContainsKey(eb)?br.RDoc:ea.plgActions.ContainsKey(eb)?br.RAct:ea.plgVars.ContainsKey(eb)?br.RVar:ea.plgViews.ContainsKey(eb)?br.RViw:(((dS.Curried3(function(ee,ef,eg){return ee("Could not find reference to "+bN.toSafe(ef)+"."+bN.toSafe(eg));}))(bM.FailWith))(d8))(d7),null]):bM.FailWith(ed.message);}}else{d6=d3(d5.$0);return[d6.$==1?br.RAct:d6.$==2?br.RVar:d6.$==3?br.RViw:d6.$==4?br.RViw:d6.$==6?br.RPlg:d6.$==5?(function(ee){return function(ef){return ee("PlugIn should not be referenced by itself: "+cz.p(ef));};}(bM.FailWith))(d5):br.RDoc,{$:1,$0:d6}];}}return function(d5){var d6,d7;try{d6=(d7=bq.createEntryO(d4,dY,d5),d7==null?d2((function(d8){return function(d9){return d8("Line not matched!: "+bN.toSafe(d9));};}(a.id))(d5),d5):d1(d7.$0.$0,d7.$0.$1));}catch(d8){d6=d2(d8.message,d5);}return{$:1,$0:d6};};};br.RDoc={$:0};br.RVar={$:1};br.RViw={$:2};br.RAct={$:3};br.RPlg={$:4};bs.extractMeasuresO=function(dY){var dZ,d0,d1,d2,d3,d4,d5;dZ=bU.SplitChars(dY,[" "],1);return!bQ.Equals(dZ,null)&&dZ.length===1&&(d1=(K.Int())(bO.get(dZ,0)),d1!=null&&d1.$==1&&(d0=d1.$0,true))?{$:1,$0:new bp({$:0,$0:dV.abs(d0),$1:d0>=0})}:!bQ.Equals(dZ,null)&&dZ.length===3&&(d3=(K.Int())(bO.get(dZ,0)),d3!=null&&d3.$==1&&(d4=(K.Int())(bO.get(dZ,1)),d4!=null&&d4.$==1&&(d5=(K.Int())(bO.get(dZ,2)),d5!=null&&d5.$==1&&(d2=[d5.$0,d3.$0,d4.$0],true))))?{$:1,$0:new bp({$:1,$0:d2[1],$1:d2[2],$2:d2[0]})}:null;};bs.horizontalSplit=function(dY){var dZ,d0,d1,d2,d3;function d4(d5,d6){var d7,d8,d9,d_;d7=R.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",d6);return d7!=null&&d7.$==1?{$:1,$0:[[d5,(d8=(d9=bT.tryItem(1,d7.$0),d9==null?null:bs.extractMeasuresO(bU.Replace(bU.Replace(d9.$0,"^",""),"v","-"))),(d_=new bp({$:1,$0:5,$1:50,$2:95}),d8==null?d_:d8.$0))],d6.indexOf("-")]}:null;}dZ=(d0=bT.tryHead(bT.sortBy(function(d5){return d5[1];},bT.choose(function(d5){return d4(d5[0],d5[1]);},bT.indexed(dY)))),d0==null?null:{$:1,$0:d0.$0[0]});return dZ==null?null:{$:1,$0:(d1=dZ.$0,(d2=d1[0],(d3=d1[1],[bP.array(dY,null,{$:1,$0:d2-1}),bP.array(dY,{$:1,$0:d2+1},null),d3])))};};bs.transpose=function(dY){var dZ;dZ=bT.max(bT.map(function(d0){return d0.length;},dY));return bO.ofSeq(bT.delay(function(){return bT.map(function(d0){return bO.ofSeq(bT.delay(function(){return bT.map(function(d1){return d1.length>d0?d1[d0]:" ";},dY);})).join("");},bM.range(0,dZ-1));}));};bs.verticalSplit=function(dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8;function d9(ea,eb){var ec,ed,ee;return(ed=R.REGEX$1("^ *\\|+ *$","",eb),ed!=null&&ed.$==1&&(ee=ed.$0,!bQ.Equals(ee,null)&&ee.length===1))?{$:1,$0:[ea,eb.indexOf("|")]}:null;}function d_(ea){return bQ.Equals(null,ea);}function d$(ea){return bQ.Equals(null,ea);}dZ=bs.transpose(dY);d0=(d1=(d2=bT.tryHead(bT.sortBy(function(ea){return ea[1];},bT.choose(function(ea){return d9(ea[0],ea[1]);},bT.indexed(dZ)))),d2==null?null:{$:1,$0:d2.$0[0]}),d1==null?null:{$:1,$0:(d3=d1.$0,[bs.transpose(bP.array(dZ,null,{$:1,$0:d3-1})),bs.transpose(bP.array(dZ,{$:1,$0:d3+1},null))])});return d0==null?null:{$:1,$0:(d4=d0.$0,(d5=d4[0],(d6=d4[1],[bO.filter(function(ea){return d_(bs.extractMeasuresO(ea));},d5),bO.filter(function(ea){return d$(bs.extractMeasuresO(ea));},d6),(d7=bT.tryHead(bT.delay(function(){return bT.append(bT.choose(bs.extractMeasuresO,d5),bT.delay(function(){return bT.map(function(ea){return ea.$==0?ea.$1?new bp({$:0,$0:ea.$0,$1:false}):ea:ea;},bT.choose(bs.extractMeasuresO,d6));}));})),(d8=new bp({$:1,$0:5,$1:50,$2:95}),d7==null?d8:d7.$0))])))};};bs.cleanSpaces=function(dY){return bO.filter(function(dZ){var d0;return!(d0=(K.Int())(dZ),d0!=null&&d0.$==1);},bU.SplitStrings(bU.concat(" ",dY),[" "],1));};bs.extractNodes=function(dY){var dZ,d0;function d1(d2,d3,d4,d5){var d6,d7,d8,d9,d_,d$;d6=bs.extractNodes(d4);d7=bs.extractNodes(d5);return(d6.$==0?(d9=d6.$0,!bQ.Equals(d9,null)&&d9.length===0)?(d8=d7,true):d7.$==0?(d_=d7.$0,!bQ.Equals(d_,null)&&d_.length===0)?(d8=d6,true):(d8=[d6,d7],false):(d8=[d6,d7],false):d7.$==0?(d$=d7.$0,!bQ.Equals(d$,null)&&d$.length===0)?(d8=d6,true):(d8=[d6,d7],false):(d8=[d6,d7],false))?d8:{$:1,$0:{$:0,$0:d2,$1:d3,$2:d8[0],$3:d8[1]}};}dZ=bs.horizontalSplit(dY);return dZ!=null&&dZ.$==1?d1(false,dZ.$0[2],dZ.$0[0],dZ.$0[1]):(d0=bs.verticalSplit(dY),d0!=null&&d0.$==1?d1(true,d0.$0[2],d0.$0[0],d0.$0[1]):{$:0,$0:bs.cleanSpaces(dY)});};bs.createLayoutDefinitions=function(dY,dZ){var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;return dZ.$==1?(d0=dZ.$0.$0,(d1=dZ.$0.$1,(d2=bs.createLayoutDefinitions(dY+"_1",dZ.$0.$2),(d3=d2[0],(d4=d2[1],(d5=bs.createLayoutDefinitions(dY+"_2",dZ.$0.$3),(d6=d5[0],(d7=d5[1],[dY,bO.ofSeq(bT.delay(function(){return bT.append([bU.concat(" ",bV.ofArray([dY,d0?"vertical":"horizontal",a.String(d1),d3,d6]))],bT.delay(function(){return bT.append(d4,bT.delay(function(){return d7;}));}));}))])))))))):(d8=dZ.$0,!bQ.Equals(d8,null)&&d8.length===0)?["___",[]]:(d9=dZ.$0,!bQ.Equals(d9,null)&&d9.length===1)?[bO.get(dZ.$0,0),[]]:[dY,[dY+" div \"\" "+bU.concat(" ",dZ.$0)]];};bu.htmlD=function(){bY.$cctor();return bY.htmlD;};bu.startWithHtmlD=function(){bY.$cctor();return bY.startWithHtmlD;};bv.disabled=function(dY){return cB.DynamicPred("disabled",dY,b_.Const(""));};bv.inputLabel=function(dY,dZ,d0,d1){return ca.Element("div",dY,[ca.Element("div",[cD.Create("class","input-group")],[ca.Element("span",[cD.Create("class","input-group-addon")],[ca.TextNode(d0)]),ca.Input([cD.Create("class","form-control"),bv.disabled(dZ)],d1)])]);};bv.areaLabel=function(dY,dZ,d0,d1){return ca.Element("div",dY,[ca.Element("div",[cD.Create("class","input-group")],[ca.Element("span",[cD.Create("class","input-group-addon")],[ca.TextNode(d0)]),ca.InputArea([cD.Create("class","form-control"),bv.disabled(dZ)],cc.Lens(d1,a.id,function(d2,d3){return d3;}))])]);};bv.elemsUI=function(dY,dZ){return ca.Element("div",[],[dY,ca.Button("New",[],dZ)]);};bv.lensFloat2Str=function(dY){var dZ;function d0(d1){if(d1!=null&&d1.$==1)if(d1.$0!==dY.Get())dY.Set(d1.$0);}return new c6.New(b_.Map(function(d1){return(function(d2){return function(d3){return d2(bN.prettyPrint(d3));};}(a.id))(d1);},dY.get_View()),(dZ=K.parseDoubleO(),function(d1){return d0(dZ(d1));}));};bv.textLine=function(dY){return ca.Element("div",[],[ca.TextView(dY)]);};bv.lensStrO=function(dY){return new c6.New(b_.Map(function(dZ){return dZ!=null&&dZ.$==1?dZ.$0:"";},dY.get_View()),function(dZ){if(dZ==="")dY.Set(null);else dY.Set({$:1,$0:dZ});});};bv.mapVarO=function(dY,dZ,d0){return new c6.New(b_.Map(function(d1){return d1==null?null:{$:1,$0:dY(d1.$0)};},d0.get_View()),function(d1){var d2;function d3(d5){return{$:1,$0:d5};}function d4(d5){d0.Set(d5);}if(d1!=null&&d1.$==1){d2=dZ(d1.$0);(n.iter(function(d5){return d4(d3(d5));}))(d2);}else d0.Set(null);});};bv.selectorLens=function(dY,dZ){function d0(d1){return bv.mapVarO(dY,dZ,d1);}return function(d1){return bv.lensStrO(d0(d1));};};bv.selectorLensInt=function(dY){return(bv.selectorLens(a.String,K.parseIntO()))(dY);};bv.selectorLensGuid=function(dY){return(bv.selectorLens(a.String,K.parseGuidO()))(dY);};bv.selectorLensGuidId=function(dY){var dZ,d0;function d1(d2){return new h({$:0,$0:d2});}return(bv.selectorLens(function(d2){var d3;d3=d2.get_Id();return a.String(d3);},(dZ=K.parseGuidO(),(d0=function(d2){return d2==null?null:{$:1,$0:d1(d2.$0)};},function(d2){return d0(dZ(d2));}))))(dY);};bv.unselectorV=function(){bY.$cctor();return bY.unselectorV;};bv.simpleButton=function(dY,dZ){function d0(d1){}return ca.Button(dY,[],function(d1){return d0(dZ(d1));});};bv.newButton=function(dY){return bv.simpleButton("New",dY);};bv.orderedList=function(dY){return ca.Element("ol",[],[dY]);};bw.concatMainDocs=function(dY){return ca.Concat(bT.choose(function(dZ){return dZ.docDoc.$==0?{$:1,$0:dZ.docDoc.$0.f()}:null;},bT.choose(function(dZ){return bT.tryHead(dZ.plgDocs);},dY)));};bx=bw.ListModelData=dS.Class({PlugIn:function(dY){var dZ,d0,d1;function d2(d3){}dZ=this;d0=ba.plugin();return d0.AddAct(d0.AddAct(d0.AddVar(d0.AddDoc(d0.Yield(),"list",cC.Create(function(){return dZ.doc;})),"sel",dY(this.selV)),"add",(d1=this.add,function(d3){return d2(d1(d3));})),"del",this.delCur);},get_CurrentW:function(){var dY,dZ,d0,d1,d2,d3;return b_.Map((dY=function(d4){return d4==null?null:a.id(d4.$0);},(dZ=(d0=this.def,function(d4){return d4==null?d0:d4.$0;}),function(d4){return dZ(dY(d4));})),b_.Bind((d1=(d2=(d3=this.elems,function(d4){return d3.TryFindByKeyAsView(d4);}),function(d4){return d4==null?null:{$:1,$0:d2(d4.$0)};}),function(d4){return cG.insertWO(d1(d4));}),this.selV.get_View()));},get_CurrentV:function(){var dY;dY=this;return new c6.New(this.get_CurrentW(),function(dZ){var d0;d0=dY.selV.Get();d0!=null&&d0.$==1?dY.elems.ContainsKey(d0.$0)?dY.elems.Append(dZ):void 0:void 0;});}},null,bx);bx.New=function(dY,dZ,d0,d1,d2,d3){return new bx({elems:dY,doc:dZ,selV:d0,add:d1,delCur:d2,def:d3});};by.addLayout0=function(dY){var dZ;bo.addLayout(dY);dZ=f.Untag$3(dY.lytName);ba.mainDocV().Set(dZ);};bz.MapLens=function(dY,dZ,d0){function d1(d3,d4){return dZ(d3,d0.Lens(d3));}function d2(d3,d4){return bO.filter(d4,d3);}return dY!=null&&dY.$==1?b_.MapSeqCachedViewBy(d0.key,d1,(((dS.Curried3(b_.Map2))(d2))(d0["var"].get_View()))(dY.$0)):b_.MapSeqCachedViewBy(d0.key,d1,d0["var"].get_View());};bA.getDocFor=function(dY,dZ,d0,d1,d2){var d3,d4,d5,d6,d7,d8;function d9(ea){var eb;return ea!=null&&ea.$==1&&(dY.ContainsKey(ea.$0)&&(eb=ea.$0,true))?{$:1,$0:eb}:null;}function d_(ea){if(!bQ.Equals(d4.Get(),ea))d4.Set(ea);}function d$(ea,eb){d5.Set(null);return dY.RemoveByKey(ea);}d3=dY.key;d4=cc.Create$1(null);d5=new c6.New((d6=b_.get_Do(),b_.Bind(function(ea){var eb;return ea!=null&&ea.$==1?(eb=ea.$0,b_.Bind(function(ec){return!ec?b_.Const(null):b_.Const({$:1,$0:eb});},dY.ContainsKeyAsView(eb))):b_.Const(null);},d4.get_View())),function(ea){return d_(d9(ea));});d7=bx.New(dY,ca.get_Empty(),d5,function(){var ea;ea=d0();dY.Append(ea);d5.Set({$:1,$0:d3(ea)});return ea;},function(){var ea;ea=d5.Get();(n.iter(function(eb){d$(eb,null);}))(ea);},dZ);d8=d2(d7);return bx.New(d7.elems,ca.Convert(a.id,bz.MapLens(d1,function(ea,eb){return(d8(b_.Const({$:1,$0:ea})))(eb);},dY)),d7.selV,d7.add,d7.delCur,d7.def);};bA.getDoc=function(dY,dZ,d0,d1,d2){return bA.getDocFor(cq.Create(dY,bZ.Empty),dZ,d0,d1,d2);};bA.addElements=function(dY,dZ){dY.elems.AppendMany(dZ);};bB.addNewO=function(dY,dZ,d0){var d1;d1=dZ;return function(){var d2;d2=[d1,dY()];d1=d0(d1);return d2;};};bB.elemUI2=function(dY,dZ,d0,d1){function d2(d3,d4){return[d3,d4];}return dY(dZ,d0,cc.Lens(d1,function(d3){return d3[1];},function(d3,d4){return(function(d5){var d6;d6=d5[0];return function(d7){return d2(d6,d7);};}(d3))(d4);}));};bB.getDocInt=function(dY,dZ,d0){function d1(d2,d3,d4){return bB.elemUI2(d0,d2,d3,d4);}return bA.getDoc(function(d2){return d2[0];},[-1,dY],bB.addNewO(dZ,0,function(d2){return 1+d2;}),null,dS.Curried3(d1));};bB.getDocGuid=function(dY,dZ,d0){function d1(d2,d3,d4){return bB.elemUI2(d0,d2,d3,d4);}return bA.getDoc(function(d2){return d2[0];},["00000000-0000-0000-0000-000000000000",dY],bB.addNewO(dZ,bL.NewGuid(),function(){return bL.NewGuid();}),null,dS.Curried3(d1));};bB.getDocGuidId=function(dY,dZ,d0){var d1;function d2(d3,d4,d5){return bB.elemUI2(d0,d3,d4,d5);}d1=bB.addNewO(dZ,new h({$:0,$0:bL.NewGuid()}),function(){return new h({$:0,$0:bL.NewGuid()});});return bA.getDoc(function(d3){return d3[0];},[new h({$:0,$0:"00000000-0000-0000-0000-000000000000"}),dY],d1,null,dS.Curried3(d2));};bB.addElements=function(dY,dZ){bT.iter(function(d0){dY.elems.Append([(dY.add())[0],d0]);},dZ);};bC.html=function(){bY.$cctor();return bY.html$1;};bD.concat=function(dY,dZ){return(((dS.Curried3(function(d0,d1,d2){return d0("Concat("+a.String(d1)+", "+d2.toFixed(6)+")");}))(a.id))(dY))(dZ);};bD.aV=function(){bY.$cctor();return bY.aV;};bD.pa=function(){bY.$cctor();return bY.pa;};bD.pb=function(){bY.$cctor();return bY.pb;};bD.currentPlugInNameDef=function(){bY.$cctor();return bY.currentPlugInNameDef$1;};bD.currentPlugInNameD=function(){bY.$cctor();return bY.currentPlugInNameD$1;};bD.name=function(){bY.$cctor();return bY.name;};bD.checkName=function(dY){return dY===bP.string("World",{$:1,$0:0},{$:1,$0:dY.length-1})||dY.length<=1?"<---- Please enter your name":"";};bD.enterName=function(){bY.$cctor();return bY.enterName;};bD.now=function(){bY.$cctor();return bY.now;};bD.sayHello=function(){bY.$cctor();return bY.sayHello;};bD.aString=function(){bY.$cctor();return bY.aString;};bD.main0=function(){bY.$cctor();return bY.main0;};bD.main1=function(){bY.$cctor();return bY.main1;};bD.main=function(){bY.$cctor();return bY.main;};bD.main2=function(){bY.$cctor();return bY.main2;};bD.appFwk=function(){bY.$cctor();return bY.appFwk;};bD.split=function(){bY.$cctor();return bY.split;};bD.split2=function(){bY.$cctor();return bY.split2;};bD.callDocPFn=function(dY,dZ){var d0;d0=bE.run(dY,dZ);return ba.makeAViewDoc(function(){var d1;d1=d0.f.$==0?d0.p.$==1?{$:0,$0:b_.Apply(d0.f.$0,b_.Const(d0.p.$0))}:{$:0,$0:b_.Apply(d0.f.$0,d0.p.$0)}:d0.p.$==0?{$:0,$0:b_.Apply(b_.Const(d0.f.$0),d0.p.$0)}:{$:1,$0:d0.f.$0(d0.p.$0)};return d1.$==0?ca.BindView(a.id,d1.$0):d1.$0;});};bD.pName=function(){bY.$cctor();return bY.pName;};bD.itemRefToTextType=function(dY){return dY.$==1?{$:1,$0:(((dS.Curried3(function(dZ,d0,d1){return dZ(bN.toSafe(d0)+"."+bN.toSafe(d1));}))(a.id))(dY.$0))(dY.$1)}:{$:1,$0:dY.$0};};bD.itemRefToString=function(dY){return dY.$==1?(((dS.Curried3(function(dZ,d0,d1){return dZ(bN.toSafe(d0)+"."+bN.toSafe(d1));}))(a.id))(dY.$0))(dY.$1):dY.$0;};bD.textValToTextType=function(dY){var dZ;return(dY.$==3?(dZ=dY.$0.$0,false):dY.$==4?(dZ=dY.$0.$0,false):dY.$==1?(dZ=dY.$0.$0,false):dY.$==2?(dZ=dY.$0.$0,false):true)?{$:0,$0:dY.$0}:bD.itemRefToTextType(dZ);};bD.ActRVs=function(dY){return bV.ofArray([{$:1,$0:{$:0,$0:dY.$0}}]);};bD.nodeRefToDocD=function(){bY.$cctor();return bY.nodeRefToDocD;};bD.varRefToVarD=function(){bY.$cctor();return bY.varRefToVarD;};bD.getParamD=function(){bY.$cctor();return bY.getParamD;};bD.itemRefToAbsolute=function(dY){function dZ(d1){return d1.$==1?[d1.$0,d1.$1]:[dY,d1.$0];}function d0(d1,d2){return(((dS.Curried3(function(d3,d4,d5){return d3(bN.toSafe(d4)+"."+bN.toSafe(d5));}))(a.id))(d1))(d2);}return function(d1){return d0.apply(null,dZ(d1));};};bD.getParam2D=function(){bY.$cctor();return bY.getParam2D;};bD.getParamTextD=function(){bY.$cctor();return bY.getParamTextD;};bD.defVar=function(dY,dZ,d0){return cc.Create$1(d0);};bD.defAction=function(dY,dZ,d0,d1){var d2,d3;d2=d0.$0;return ba.run(dY,(d3=y.depend(),d3.Delay(function(){return d3.Bind(bD.currentPlugInNameD(),function(d4){return d3.Bind(bD.getParamTextD(),function(d5){var d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei;d_=bD.itemRefToString(d2);d$=(d7=(ba.splitName(d4))(d_),ba.tryGetAct(d7[0],d7[1]));if(d$==null)d6=null;else{ea=d$.$0;if(d1.$===0)d8=ea.actFunction;else{eb=ea.actFunction;switch(eb.$==1?d1.$==1?d1.$1.$==0?(d9=[eb.$0,d1.$0],0):3:3:eb.$==2?d1.$==1?d1.$1.$==0?(d9=[eb.$0,eb.$2,d1.$0],2):d1.$1.$1.$==0?(d9=[eb.$0,d1.$0,d1.$1.$0],1):3:3:3){case 0:d8=(ec=d9[0],(ed=d9[1],{$:0,$0:function(){(d5(ed))(ec);}}));break;case 1:d8=(ee=d9[0],(ef=d9[1],(eg=d9[2],{$:0,$0:function(){(d5(ef))(function(ej){(d5(eg))(ee(ej));});}})));break;case 2:d8=(eh=d9[0],(ei=d9[2],{$:1,$0:function(ej){(d5(ei))(function(ek){(eh(ek))(ej);});},$1:d9[1]}));break;case 3:d8={$:0,$0:function(){((((dS.Curried(function(ej,ek,el,em){return ej("Parameters do not coincide for Action "+bN.toSafe(ek)+" "+bN.printList(function(en){return cz.p$18(en);},el)+" "+cy.p(em));},4))(function(ej){dQ.log(ej);}))(d_))(d1))(ea);}};break;}}d6={$:1,$0:d8};}return d3.Return(d6==null?{$:0,$0:function(){((function(ej){return function(ek){return ej("Action Not Found "+bN.toSafe(ek));};}(function(ej){dQ.log(ej);}))(d_));}}:d6.$0);});});})));};bD.defView=function(dY,dZ,d0){var d1;return ba.run(dY,(d1=y.depend(),d1.Delay(function(){return d1.Bind(bD.currentPlugInNameD(),function(){return d1.Bind(bD.getParam2D(),function(d2){return d1.Bind(ba.extractTextD(),function(d3){return d1.Return(b_.Bind(function(){function d4(d5){return bU.concat("",d5);}return b_.Map(function(d5){return d4(bO.ofSeq(d5));},cG.traverseSeq(function(d5){return d3(d2(d5));},d0));},ba.baseView()));});});});})));};bD.defViewJS=function(dY,dZ,d0){var d1;return ba.run(dY,(d1=y.depend(),d1.Delay(function(){return d1.Bind(bD.currentPlugInNameD(),function(){return d1.Bind(bD.getParamD(),function(d2){return d1.Return(b_.Bind(function(){try{return b_.Map(function(d3){try{return!bQ.Equals(d3,null)&&d3.length===0?"No JS function specified":!bQ.Equals(d3,null)&&d3.length===1?a.String(a["eval"](bO.get(d3,0))):a.String(a["eval"](bO.get(d3,0)).apply(null,bP.array(d3,{$:1,$0:1},null)));}catch(d4){return d4.message;}},b_.Map(bO.ofSeq,cG.traverseSeq(d2,d0)));}catch(d3){return b_.Const(d3.message);}},ba.baseView()));});});})));};bD.defInput=function(dY,dZ,d0,d1){return cC.Create(function(){return ba.errDocf(function(d2){return d2("input deprecated use AF.Input");});});};bD.defTextArea=function(dY,dZ,d0,d1){return cC.Create(function(){return ba.errDocf(function(d2){return d2("TextArea deprecated use AF.TextArea");});});};bD.defElement=function(dY,dZ,d0,d1,d2){var d3;return ba.run(dY,(d3=y.depend(),d3.Delay(function(){return d3.Bind(bD.nodeRefToDocD(),function(d4){return d3.Bind(ba.extractAtsD(),function(d5){return d3.Bind(bD.getParam2D(),function(d6){return d3.Return(ba.makeAViewDocL(function(){return ca.Element(d0,d5(d6(d1)),bT.map(d4,d2));}));});});});})));};bD.defConcat=function(dY,dZ,d0){var d1;return ba.run(dY,(d1=y.depend(),d1.Delay(function(){return d1.Bind(bD.nodeRefToDocD(),function(d2){return d1.Return(ba.makeAViewDocL(function(){return ca.Concat(bT.map(d2,d0));}));});})));};bD.defDocF=function(dY,dZ,d0,d1){var d2,d3;d2=d0.$0;return ba.run(dY,(d3=y.depend(),d3.Delay(function(){return d3.Bind(bD.currentPlugInNameD(),function(d4){return d3.Bind(bD.getParam2D(),function(d5){var d6,d7,d8,d9;function d_(d$,ea){var eb,ec;return ea.$==1?d$.$==1?(eb=ea.$0,(ec=d$.$0,{$:0,$0:cC.Create(function(){return ec(d5(eb));})})):d$.$==2?d_({$:1,$0:d$.$0(d5(ea.$0)),$1:d$.$2},ea.$1):d$.$==3?d_({$:2,$0:d$.$0(d5(ea.$0)),$1:d$.$2,$2:d$.$3},ea.$1):d$.$==4?d_({$:3,$0:d$.$0(d5(ea.$0)),$1:d$.$2,$2:d$.$3,$3:d$.$4},ea.$1):d$.$==5?d_({$:4,$0:d$.$0(d5(ea.$0)),$1:d$.$2,$2:d$.$3,$3:d$.$4,$4:d$.$5},ea.$1):{$:0,$0:d$.$0}:d$;}return d3.Return((d6=(d7=(d8=(d9=bD.itemRefToString(d2),((bo.splitName())(d4))(d9)),ba.tryGetDoc(d8[0],d8[1])),d7==null?null:{$:1,$0:d_(d7.$0.docDoc,d1)}),d6==null?{$:0,$0:cC.Create(function(){return ba.errDoc((function(d$){return function(ea){return d$("Missing doc: "+cz.p(ea));};}(a.id))(d2));})}:d6.$0));});});})));};bD.defButton=function(dY,dZ,d0,d1,d2){return cC.Create(function(){return ba.errDocf(function(d3){return d3("Button deprecated use button \"click=@{Action}\"");});});};bD.defSplitter=function(dY,dZ,d0,d1,d2,d3){var d4,d5,d6;d4=d2.$0;d5=d3.$0;return ba.run(dY,(d6=y.depend(),d6.Delay(function(){return d6.Bind(bm.getDocFromTextTypesD(),function(d7){return d6.Return(cC.Create(function(){function d8(d9){return ba.makeAViewDoc(function(){return d7(bV.ofArray([bD.itemRefToTextType(d9)]));});}return d1.$==1?bo.variableSplitter(d0,d1.$0,d1.$1,d1.$2,d8(d4),d8(d5)):bo.fixedSplitter(d0,d1.$0,d1.$1,d8(d4),d8(d5));}));});})));};bD.initVal=function(){bY.$cctor();return bY.initVal;};bD.defVarM0=function(){bY.$cctor();return bY.defVarM0;};bD.defVarM=function(dY,dZ,d0){var d1;d1=(bD.defVarM0())([dY,dZ,bD.initVal()]);d1.Get()===bD.initVal()?d1.Set(d0):void 0;return d1;};bD.defDocFM=function(){bY.$cctor();return bY.defDocFM;};bD.defActionM=function(){bY.$cctor();return bY.defActionM;};bD.defButtonM=function(){bY.$cctor();return bY.defButtonM;};bD.defInputM=function(){bY.$cctor();return bY.defInputM;};bD.defTextAreaM=function(){bY.$cctor();return bY.defTextAreaM;};bD.defElementM=function(){bY.$cctor();return bY.defElementM;};bD.defConcatM=function(){bY.$cctor();return bY.defConcatM;};bD.defViewM=function(){bY.$cctor();return bY.defViewM;};bD.defViewJSM=function(){bY.$cctor();return bY.defViewJSM;};bD.defSplitterM=function(){bY.$cctor();return bY.defSplitterM;};bD.generateEntries=function(dY){function dZ(d0,d1){var d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea;return d1.$==0?d1.$0.$==1?{$:1,$0:{$:2,$0:(d2=(bD.defButtonM())([dY,d0,d1.$0.$0.$0,d1.$0.$0.$1,d1.$0.$0.$2]),ba.newDoc(f.Tag$3(d0),d2))}}:d1.$0.$==2?{$:1,$0:{$:2,$0:(d3=(bD.defInputM())([dY,d0,d1.$0.$0.$0,d1.$0.$0.$1]),ba.newDoc(f.Tag$3(d0),d3))}}:d1.$0.$==3?{$:1,$0:{$:2,$0:(d4=(bD.defTextAreaM())([dY,d0,d1.$0.$0.$0,d1.$0.$0.$1]),ba.newDoc(f.Tag$3(d0),d4))}}:d1.$0.$==5?{$:1,$0:{$:2,$0:(d5=(bD.defConcatM())([dY,d0,d1.$0.$0.$0]),ba.newDoc(f.Tag$3(d0),d5))}}:d1.$0.$==6?{$:1,$0:{$:2,$0:(d6=(bD.defElementM())([dY,d0,d1.$0.$0.$0,d1.$0.$0.$1,d1.$0.$0.$2]),ba.newDoc(f.Tag$3(d0),d6))}}:d1.$0.$==4?{$:1,$0:{$:2,$0:(d7=(bD.defDocFM())([dY,d0,d1.$0.$0.$0,d1.$0.$0.$1]),ba.newDocF(f.Tag$3(d0),d7))}}:{$:1,$0:{$:2,$0:(d8=(bD.defSplitterM())([dY,d0,d1.$0.$0.$0,d1.$0.$0.$1,d1.$0.$0.$2,d1.$0.$0.$3]),ba.newDoc(f.Tag$3(d0),d8))}}:d1.$==1?{$:1,$0:{$:3,$0:(d9=(bD.defActionM())([dY,d0,d1.$0.$0,d1.$0.$1]),ba.newActF(f.Tag$3(d0),d9))}}:d1.$==3?{$:1,$0:{$:1,$0:(d_=(bD.defViewM())([dY,d0,d1.$0.$0]),ba.newViw(f.Tag$3(d0),d_))}}:d1.$==4?{$:1,$0:{$:1,$0:(d$=(bD.defViewJSM())([dY,d0,d1.$0.$0]),ba.newViw(f.Tag$3(d0),d$))}}:d1.$==6?null:d1.$==5?null:{$:1,$0:{$:0,$0:(ea=bD.defVarM(dY,d0,d1.$0.$0),ba.newVar(f.Tag$3(d0),ea))}};}return function(d0){return bT.choose(function(d1){return dZ(d1[0],d1[1]);},d0);};};bD.parseNewLayout=function(dY){var dZ,d0,d1;function d2(d4){return bo.parseEntries(dY,d4);}function d3(d4){return d4.$==1?(c.print(d4.$0),null):{$:1,$0:d4.$0};}dZ=(d0=function(d4){return bT.choose(d3,d4);},function(d4){return d0(d2(d4));});d1=bD.generateEntries(dY);return function(d4){return d1(dZ(d4));};};bD.addLayout=function(dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8;function d9(eb){return eb.$==1?{$:1,$0:eb.$0}:null;}function d_(eb){return bU.concat("\n",eb);}function d$(eb){return eb.$==0?{$:1,$0:eb.$0}:null;}function ea(eb){return bT.append(d6,eb);}dZ=b_.Map((d0=dY.lytName,function(eb){return bo.parseEntries(d0,eb);}),dY.lytDefinition.get_View());d1=b_.Map((d2=function(eb){return bT.choose(d9,eb);},function(eb){return d_(d2(eb));}),dZ);d3=b_.Map((d4=function(eb){return bT.choose(d$,eb);},(d5=bD.generateEntries(dY.lytName),function(eb){return d5(d4(eb));})),dZ);d6=bV.ofArray([{$:0,$0:ba.newVar(f.Tag$3("Layout"),dY.lytDefinition)},{$:1,$0:ba.newViw(f.Tag$3("ParseMsgs"),d1)}]);b_.Sink((d7=(d8=dY.lytName,function(eb){bo.refreshEntries(d8,eb);}),function(eb){return d7(ea(eb));}),d3);};bE.run=function(dY,dZ){return ba.run(dY,dZ.r);};bF.set_drag=function(dY){bY.$cctor();bY.drag=dY;};bF.drag=function(){bY.$cctor();return bY.drag;};bF.setDragNone=function(){bF.set_drag(bG.DragNone);};bF.setDragNode=function(dY){bF.set_drag({$:1,$0:dY});};bF.getDragNIdO=function(dY){var dZ;return bF.drag().$==1&&(!bQ.Equals(bF.drag().$0,dY)&&(dZ=bF.drag().$0,true))?{$:1,$0:dZ}:null;};bG.DragNone={$:0};bH.TemplateFileName=function(){bY.$cctor();return bY.TemplateFileName$1;};bH.snippetsLM=function(){bY.$cctor();return bY.snippetsLM;};bH.collapsedV=function(){bY.$cctor();return bY.collapsedV;};bH.codeSnippetIdV=function(){bY.$cctor();return bY.codeSnippetIdV;};bH.searchFor=function(){bY.$cctor();return bY.searchFor;};bH.allPredecessors=function(){bY.$cctor();return bY.allPredecessors;};bH.indPredIds=function(){bY.$cctor();return bY.indPredIds;};bH.allCodePredsW=function(){bY.$cctor();return bY.allCodePredsW;};bH.allCodePredIdsW=function(){bY.$cctor();return bY.allCodePredIdsW;};bH.shdDef=function(){bY.$cctor();return bY.shdDef;};bH.processHier=function(dY,dZ){var d0,d1,d2,d3,d4;d2=new bS.New$5();d0=[];d1=0;d3=bT.indexed(dY);d4=cO.Get(d3);try{while(d4.MoveNext())(function(){var d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee;function ef(eg,eh){return bQ.Equals(eh,d_);}d5=d4.Current();d6=d5[1][0];d7=d5[1][1];d8=d5[0];d9=d7!=null&&d7.$==1?(d_=d7.$0,(d$=bT.tryFind(function(eg){return ef(eg[0],eg[1]);},bT.indexed(d0)),d$!=null&&d$.$==1?(ea=d$.$0[0],[ea+1,bP.array(d0,{$:1,$0:0},{$:1,$0:ea}),null]):[0,[],{$:1,$0:(function(eg){return function(eh){return eg("Parent not found in path "+bN.prettyPrint(eh));};}(a.id))(d_)}])):[0,[],null];eb=d9[1];ec=d9[0];d2.Add(d6,bI.New(ec,d8,(ed=(ee=bT.tryItem(d8+1,dY),ee==null?null:{$:1,$0:bQ.Equals({$:1,$0:d6},ee.$0[1])}),ed==null?false:ed.$0),d1>=ec,eb,d9[2]));d0=eb.concat([d6]);return d1>=ec?void(d1=dZ.Contains(d6)?ec:ec+1):null;}());}finally{if(typeof d4=="object"&&"Dispose"in d4)d4.Dispose();}return d2;};bH.snpIdParentsW=function(){bY.$cctor();return bY.snpIdParentsW;};bH.processHierW=function(){bY.$cctor();return bY.processHierW;};bH.docWrap=function(dY,dZ){return(dY([]))([dZ]);};bH.moveNode=function(dY,dZ){b_.Get(function(d0){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;d1=(d2=null,d0.TryGetValue(dY,{get:function(){return d2;},set:function(ec){d2=ec;}})?{$:1,$0:d2}:null);d3=(d4=null,d0.TryGetValue(dZ,{get:function(){return d4;},set:function(ec){d4=ec;}})?{$:1,$0:d4}:null);d5=bH.snippetsLM().TryFindByKey(dY);d6=bH.snippetsLM().TryFindByKey(dZ);d1!=null&&d1.$==1?d3!=null&&d3.$==1?d5!=null&&d5.$==1?d6!=null&&d6.$==1?(d7=d1.$0,d8=d5.$0,d9=d3.$0,bT.contains(dY,d9.path)?void 0:(d_=bO.ofSeq((bH.snippetsLM())["var"].Get()),d$=function(ec){var ed,ee,ef;while(true){ee=bO.tryItem(ec+1,d_);if(ee!=null&&ee.$==1){ef=(ed=null,d0.TryGetValue(ee.$0.snpId,{get:function(){return ed;},set:function(eg){ed=eg;}})?{$:1,$0:ed}:null);if(ef!=null&&ef.$==1){if(bT.contains(dY,ef.$0.path))ec=ec+1;else return ec;}else return ec;}else return ec;}}(d7.pos),ea=N.New(d8.snpId,d8.snpName,d8.snpContent,d6.$0.snpParentIdO,d8.snpPredIds,d8.snpProperties,d8.snpModified),eb=bO.concat(d7.pos<d9.pos?[bP.array(d_,{$:1,$0:0},{$:1,$0:d7.pos-1}),bP.array(d_,{$:1,$0:d$+1},{$:1,$0:d9.pos-1}),[ea],bP.array(d_,{$:1,$0:d7.pos+1},{$:1,$0:d$}),bP.array(d_,{$:1,$0:d9.pos},null)]:[bP.array(d_,{$:1,$0:0},{$:1,$0:d9.pos-1}),[ea],bP.array(d_,{$:1,$0:d7.pos+1},{$:1,$0:d$}),bP.array(d_,{$:1,$0:d9.pos},{$:1,$0:d7.pos-1}),bP.array(d_,{$:1,$0:d$+1},null)]),bH.snippetsLM().Set(eb))):void 0:void 0:void 0:void 0;},bH.processHierW());};bH.calcUI=function(dY,dZ,d0){var d1,d2,d3;d1=b_.Map(function(d4){return(bH.indPredIds())(d4);},(d2=b_.Apply(b_.Map2(function(d4,d5){return function(d6){return[d4.snpId,d5.snpParentIdO,d6.snpPredIds];};},d0.get_CurrentV().get_View(),d0.get_CurrentV().get_View()),d0.get_CurrentV().get_View()),(d3=[cc.Create$1(null)],(b_.Sink(function(d4){if(!bQ.Equals(d3[0].Get(),d4))d3[0].Set(d4);},d2),d3[0].get_View()))));return function(d4){return function(d5){var d6,d7,d8,d9,d_,d$,ea,eb,ec;b_.Map(function(ed){return ed==null;},d4);d6=b_.Map2(function(ed,ee){var ef,eg,eh;ef=(eg=ee.snpId,function(ei){var ej;ej=null;return ei.TryGetValue(eg,{get:function(){return ej;},set:function(ek){ej=ek;}})?{$:1,$0:ej}:null;}(ed));eh=bH.shdDef();return ef==null?eh:ef.$0;},bH.processHierW(),d5.get_View());return bH.docWrap(dY,(d7=(d8=(d9=(d_=(d$=(ea=cv.Make().WithHole({$:2,$0:"name",$1:b_.Map2(function(ed,ee){return(ed.errorO==null?a.id:function(ef){return function(eg){return ef("!"+bN.toSafe(eg));};}(a.id))(ee.snpName);},d6,d5.get_View())}).WithHole({$:2,$0:"selected",$1:b_.Map2(function(ed,ee){return bQ.Equals(ed,ee)?"selected":"";},d0.selV.get_View(),d4)}).WithHole({$:2,$0:"predecessor",$1:b_.Apply(b_.Apply(b_.Apply(b_.Map2(function(ed,ee){return dS.Curried3(function(ef,eg,eh){var ei;return ed!=null&&ed.$==1?(ei=ed.$0,(bT.contains(ei,ee.snpPredIds)?"direct-predecessor":bT.contains(ei,ef)?"indirect-predecessor":bT.contains(ei,eg)?"included-predecessor":"")+(bQ.Equals(eh,ed)?" codeSnippet":"")):"";});},d4,d0.get_CurrentV().get_View()),d1),bH.allCodePredIdsW()),bH.codeSnippetIdV().get_View())}),ea.WithHole(cw.EventQ2(ea.k,"select",function(){return ea.i;},function(){var ed;b_.Get((ed=d0.selV,function(ee){ed.Set(ee);}),d4);}))).WithHole({$:2,$0:"indent",$1:b_.Map(function(ed){return a.String(1.5*ed.level);},d6)}).WithHole({$:2,$0:"parent",$1:b_.Apply(b_.Map2(function(ed,ee){return function(ef){return ed.hasChildren?ee.Contains(ef.snpId)?"collapsed":"expanded":"";};},d6,bH.collapsedV().get_View()),d5.get_View())}),d$.WithHole(cw.EventQ2(d$.k,"togglecollapse",function(){return d$.i;},function(){b_.Get(function(ed){var ee;if(ed.hasChildren){ee=((bH.collapsedV().Get().Contains(d5.Get().snpId)?function(ef){return function(eg){return eg.Remove(ef);};}:function(ef){return function(eg){return eg.Add(ef);};})(d5.Get().snpId))(bH.collapsedV().Get());bH.collapsedV().Set(ee);}},d6);}))),d_.WithHole(cw.EventQ2(d_.k,"drag",function(){return d_.i;},function(ed){b_.Get(function(ee){if(ee!=null&&ee.$==1){bF.setDragNode(ee.$0);ed.Event.stopPropagation();}},d4);}))),d9.WithHole(cw.EventQ2(d9.k,"dragover",function(){return d9.i;},function(ed){b_.Get(function(ee){if(ee!=null&&ee.$==1)if(bF.getDragNIdO(ee.$0)!=null)ed.Event.preventDefault();},d4);}))),d8.WithHole(cw.EventQ2(d8.k,"drop",function(){return d8.i;},function(ed){ed.Event.preventDefault();b_.Get(function(ee){var ef,eg;if(ee!=null&&ee.$==1){ef=ee.$0;eg=bF.getDragNIdO(ef);(n.iter(function(eh){bH.moveNode(eh,ef);}))(eg);}},d4);}))),(eb=cw.CompleteHoles(d7.k,d7.h,[]),(ec=new cu.New(eb[1],cx.snippet(eb[0])),(d7.i=ec,ec)))).get_Doc());};};};bH.search=function(){bY.$cctor();return bY.search;};bH.wrapNothing=function(dY){return ca.Concat;};bH.snippetList=function(){bY.$cctor();return bY.snippetList;};bH.currentSnippetV=function(){bY.$cctor();return bY.currentSnippetV;};bH.currentSnippetNameV=function(){bY.$cctor();return bY.currentSnippetNameV;};bH.currentSnippetContentV=function(){bY.$cctor();return bY.currentSnippetContentV;};bH.curSnp=function(){bY.$cctor();return bY.curSnp;};bH.selectorLensGuidId=function(dY){var dZ;function d0(d1){return d1==null?null:{$:1,$0:f.Tag$4(d1.$0)};}return(bv.selectorLens(a.String,(dZ=K.parseGuidO(),function(d1){return d0(dZ(d1));})))(dY);};bH.monacoNew=function(dY){return cl.onRender(function(dZ){var d0;d0=dZ.editorO;(n.iter(function(d1){var d2;d2=d1.getModel();self.monaco.editor.setModelLanguage(d2,"fsharp");}))(d0);self.monaco.editor.setTheme("vs-dark");},_7.newVar(function(){return{};},function(){return{};},dY));};bH.monaco=function(){bY.$cctor();return bY.monaco;};bH.addSnippet=function(){b_.Get(function(dY){var dZ,d0,d1,d2,d3,d4,d5;dZ=bO.ofSeq((bH.snippetsLM())["var"].Get());d0=bH.snippetList().add();d1=bH.currentSnippetV().Get().snpId;d2=(d3=null,dY.TryGetValue(d1,{get:function(){return d3;},set:function(d6){d3=d6;}})?{$:1,$0:d3}:null);d2!=null&&d2.$==1?(d4=function(d6){var d7,d8,d9;while(true){d8=bO.tryItem(d6+1,dZ);if(d8!=null&&d8.$==1){d9=(d7=null,dY.TryGetValue(d8.$0.snpId,{get:function(){return d7;},set:function(d_){d7=d_;}})?{$:1,$0:d7}:null);if(d9!=null&&d9.$==1){if(bT.contains(d1,d9.$0.path))d6=d6+1;else return d6;}else return d6;}else return d6;}}(d2.$0.pos),d5=bO.concat([bP.array(dZ,{$:1,$0:0},{$:1,$0:d4}),[N.New(d0.snpId,d0.snpName,d0.snpContent,bH.currentSnippetV().Get().snpParentIdO,d0.snpPredIds,d0.snpProperties,d0.snpModified)],bP.array(dZ,{$:1,$0:d4+1},null)]),bH.snippetsLM().Set(d5)):void 0;},bH.processHierW());};bH.deleteSnippet=function(){b_.Get(function(dY){var dZ,d0,d1,d2,d3,d4,d5;dZ=bH.currentSnippetV().Get().snpId;d0=bH.currentSnippetV().Get().snpParentIdO;d1=(d2=null,dY.TryGetValue(dZ,{get:function(){return d2;},set:function(d6){d2=d6;}})?{$:1,$0:d2}:null);d1!=null&&d1.$==1?(d3=d1.$0,d4=bO.ofSeq((bH.snippetsLM())["var"].Get()),function(d6){var d7,d8,d9,d_;while(true){d8=bO.tryItem(d6,d4);if(d8!=null&&d8.$==1){d9=d8.$0;if(bQ.Equals(d9.snpParentIdO,{$:1,$0:dZ})){bO.set(d4,d6,N.New(d9.snpId,d9.snpName,d9.snpContent,d0,d9.snpPredIds,d9.snpProperties,d9.snpModified));d6=d6+1;}else{d_=(d7=null,dY.TryGetValue(d9.snpId,{get:function(){return d7;},set:function(d$){d7=d$;}})?{$:1,$0:d7}:null);if(d_!=null&&d_.$==1){if(bT.contains(dZ,d_.$0.path))d6=d6+1;else return null;}else return null;}}else return null;}}(d3.pos+1),d5=bO.concat([bP.array(d4,{$:1,$0:0},{$:1,$0:d3.pos-1}),bP.array(d4,{$:1,$0:d3.pos+1},null)]),bH.snippetsLM().Set(d5)):void 0;},bH.processHierW());};bH.indentIn=function(){b_.Get(function(dY){var dZ,d0;dZ=(d0=bH.currentSnippetV().Get().snpId,function(d1){var d2;d2=null;return d1.TryGetValue(d0,{get:function(){return d2;},set:function(d3){d2=d3;}})?{$:1,$0:d2}:null;}(dY));(n.iter(function(d1){var d2,d3;d2=bH.currentSnippetV().Get().snpParentIdO;d3=function(d4){var d5;while(true)if(d4===0)return null;else{d5=bT.nth(d4-1,(bH.snippetsLM())["var"].Get());if(bQ.Equals({$:1,$0:d5.snpId},d2))return null;else if(bQ.Equals(d5.snpParentIdO,d2))return{$:1,$0:d5.snpId};else d4=d4-1;}}(d1.pos);(n.iter(function(d4){cc.Lens(bH.currentSnippetV(),function(d5){return d5.snpParentIdO;},function(d5,d6){return N.New(d5.snpId,d5.snpName,d5.snpContent,d6,d5.snpPredIds,d5.snpProperties,d5.snpModified);}).Set({$:1,$0:d4});}))(d3);}))(dZ);},bH.processHierW());};bH.indentOut=function(){b_.Get(function(dY){var dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_;dZ=bH.currentSnippetV().Get().snpId;d0=(d1=null,dY.TryGetValue(dZ,{get:function(){return d1;},set:function(d$){d1=d$;}})?{$:1,$0:d1}:null);d2=bH.currentSnippetV().Get().snpParentIdO;d0!=null&&d0.$==1?d2!=null&&d2.$==1?(d3=d0.$0,d4=d2.$0,d5=bT.tryItem(bO.length(d3.path)-2,d3.path),!bQ.Equals({$:1,$0:d4},d5)?(cc.Lens(bH.currentSnippetV(),function(d$){return d$.snpParentIdO;},function(d$,ea){return N.New(d$.snpId,d$.snpName,d$.snpContent,ea,d$.snpPredIds,d$.snpProperties,d$.snpModified);}).Set(d5),d6=bO.ofSeq((bH.snippetsLM())["var"].Get()),d7=function(d$,ea){var eb,ec,ed,ee;while(true){ec=bO.tryItem(ea+1,d6);if(ec!=null&&ec.$==1){ed=(eb=null,dY.TryGetValue(ec.$0.snpId,{get:function(){return eb;},set:function(ef){eb=ef;}})?{$:1,$0:eb}:null);if(ed!=null&&ed.$==1){ee=ed.$0;if(bT.contains(dZ,ee.path)){d$=ea+1;ea=ea+1;}else if(bT.contains(d4,ee.path))ea=ea+1;else return{$:1,$0:[d$,ea]};}else return null;}else return null;}}(d3.pos,d3.pos),d7!=null&&d7.$==1?(d8=d7.$0[1],d9=d7.$0[0],d_=bO.concat([bP.array(d6,{$:1,$0:0},{$:1,$0:d3.pos-1}),bP.array(d6,{$:1,$0:d9+1},{$:1,$0:d8}),bP.array(d6,{$:1,$0:d3.pos},{$:1,$0:d9}),bP.array(d6,{$:1,$0:d8+1},null)]),bH.snippetsLM().Set(d_)):void 0):void 0):void 0:void 0;},bH.processHierW());};bH.parseW=function(){bY.$cctor();return bY.parseW;};bH.target2=function(){bY.$cctor();return bY.target2;};bH.parseNewLY=function(){var dY,dZ;dY=bH.currentSnippetContentV().get_View();b_.Get((dZ=bH.target2().lytDefinition,function(d0){dZ.Set(d0);}),dY);};bH.main=function(){var dY;dY=bu.startWithHtmlD();(y.resolver(bV.ofArray([["AppFrameworkTemplate.html",cL.html()+bC.html()]]),dY))();};bI.New=function(dY,dZ,d0,d1,d2,d3){return{level:dY,pos:dZ,hasChildren:d0,visible:d1,path:d2,errorO:d3};};bJ.loadTextFile=function(dY){var dZ,d0;dZ=dY.files;dZ.length>0?(d0=new cJ(),d0.onload=function(d1){var d2,d3;try{d2=(d3=d1.target.result,(cK.deserializeWithDefs((P.serModel())[0],(P.serModel())[1]))(d3));return(n.iter(function(d4){bH.snippetsLM().Set(d4.snippets);bH.collapsedV().Set(d4.collapsed);}))(d2);}catch(d4){a.alert(a.String(d4));return(function(d5){return function(d6){return d5(bN.prettyPrint(d6));};}(function(d5){dQ.log(d5);}))(d4);}},d0.readAsText(dZ.item(0))):void 0;};bJ.saveAs=function(){var dY;a.saveAs(new a.Blob([(dY=P.getModel((bH.snippetsLM())["var"].Get(),dT.now(),bH.collapsedV().Get()),(P.serModel())[0](dY))],{type:"text/plain;charset=utf-8"}),"noname.snippets");};bL.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(dY){var dZ,d0;dZ=dV.random()*16|0;d0=dY=="x"?dZ:dZ&3|8;return d0.toString(16);});};bL.TryParse=function(dY,dZ){try{dZ.set(bL.Parse(dY));return true;}catch(d0){return false;}};bL.Parse=function(dY){var dZ,d0,d1;try{return bL.ParseExact(dY,"D");}catch(d2){try{dZ=bL.ParseExact(dY,"B");}catch(d3){try{d0=bL.ParseExact(dY,"P");}catch(d4){try{d1=bL.ParseExact(dY,"N");}catch(d5){d1=bL.ParseExact(dY,"X");}d0=d1;}dZ=d0;}return dZ;}};bL.ParseExact=function(dY,dZ){var d0,d1,d2,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb;function d3(ec){var ed,ee,ef,eg;for(ed=0,ee=35;ed<=ee;ed++){ed===8||(ed===13||(ed===18||ed===23))?ec[ed]!=="-"?bL.ShapeError():void 0:(eg=ec[ed],!("0"<=eg&&eg<="9"||"a"<=eg&&eg<="f")?bL.ShapeError():void 0);}return ec;}d4=dZ.toUpperCase();if(d4==="N"){d5=bU.Trim(dY).toLowerCase();if(d5.length!==32)bL.ShapeError();for(d6=0,d7=31;d6<=d7;d6++){d8=d5[d6];!("0"<=d8&&d8<="9"||"a"<=d8&&d8<="f")?bL.ShapeError():void 0;}return bU.Substring(d5,0,8)+"-"+bU.Substring(d5,8,4)+"-"+bU.Substring(d5,12,4)+"-"+bU.Substring(d5,16,4)+"-"+d5.substring(20);}else if(d4==="D"){d0=bU.Trim(dY).toLowerCase();d0.length!==36?bL.ShapeError():void 0;return d3(d0);}else if(d4==="B"){d1=bU.Trim(dY).toLowerCase();d1.length!==38||d1[0]!=="{"||d1[17]!=="}"?bL.ShapeError():void 0;return d3(bU.Substring(d1,1,36));}else if(d4==="P"){d2=bU.Trim(dY).toLowerCase();d2.length!==38||d2[0]!=="("||d2[17]!==")"?bL.ShapeError():void 0;return d3(bU.Substring(d2,1,36));}else if(d4==="X"){d9=bU.Trim(dY).toLowerCase();if(d9.length!==68)bL.ShapeError();for(d_=0,d$=67;d_<=d$;d_++){switch(d_){case 26:case 0:if(d9[d_]!=="{")bL.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(d9[d_]!=="0")bL.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(d9[d_]!=="x")bL.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(d9[d_]!==",")bL.ShapeError();break;case 67:case 66:if(d9[d_]!=="{")bL.ShapeError();break;default:eb=d9[d_];!("0"<=eb&&eb<="9"||"a"<=eb&&eb<="f")?bL.ShapeError():void 0;break;}}return bU.Substring(d9,3,8)+"-"+bU.Substring(d9,14,4)+"-"+bU.Substring(d9,21,4)+"-"+bU.Substring(d9,29,2)+bU.Substring(d9,34,2)+"-"+bU.Substring(d9,39,2)+bU.Substring(d9,44,2)+bU.Substring(d9,49,2)+bU.Substring(d9,54,2)+bU.Substring(d9,59,2)+bU.Substring(d9,64,2);}else return bL.FormatError();};bL.ShapeError=function(){throw new dH.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bL.FormatError=function(){throw new dH.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bM.FailWith=function(dY){throw new cE(dY);};bM.range=function(dY,dZ){var d0;d0=1+dZ-dY;return d0<=0?[]:bT.init(d0,function(d1){return d1+dY;});};bM.toInt=function(dY){var dZ;dZ=bM.toUInt(dY);return dZ>=2147483648?dZ-4294967296:dZ;};bM.KeyValue=function(dY){return[dY.K,dY.V];};bM.toUInt=function(dY){return(dY<0?dV.ceil(dY):dV.floor(dY))>>>0;};bN.toSafe=function(dY){return dY==null?"":dY;};bN.prettyPrint=function(dY){var dZ,d0;function d1(d2,d3){return d2+" = "+bN.prettyPrint(d3);}return dY===null?"null":(dZ=typeof dY,dZ=="string"?"\""+dY+"\"":dZ=="object"?dY instanceof a.Array?"[|"+bU.concat("; ",bO.map(bN.prettyPrint,dY))+"|]":(d0=a.String(dY),d0==="[object Object]"?"{"+bU.concat("; ",bO.map(function(d2){return d1(d2[0],d2[1]);},ch.GetFields(dY)))+"}":d0):a.String(dY));};bN.padNumLeft=function(dY,dZ){var d0;d0=bO.get(dY,0);return d0===" "||d0==="+"||d0==="-"?d0+bU.PadLeftWith(dY.substr(1),dZ-1,"0"):bU.PadLeftWith(dY,dZ,"0");};bN.printList=function(dY,dZ){return"["+bU.concat("; ",bT.map(dY,dZ))+"]";};bN.printArray=function(dY,dZ){return dZ===null?"null":"[|"+bU.concat("; ",bO.map(dY,dZ))+"|]";};bO.get=function(dY,dZ){bO.checkBounds(dY,dZ);return dY[dZ];};bO.set=function(dY,dZ,d0){bO.checkBounds(dY,dZ);dY[dZ]=d0;};bO.checkBounds=function(dY,dZ){if(dZ<0||dZ>=dY.length)bM.FailWith("Index was outside the bounds of the array.");};bO.length=function(dY){return dY.dims===2?dY.length*dY.length:dY.length;};bP.string=function(dY,dZ,d0){return dZ==null?d0!=null&&d0.$==1?dY.slice(0,d0.$0+1):"":d0==null?dY.slice(dZ.$0):dY.slice(dZ.$0,d0.$0+1);};bP.array=function(dY,dZ,d0){return dZ==null?d0!=null&&d0.$==1?dY.slice(0,d0.$0+1):[]:d0==null?dY.slice(dZ.$0):dY.slice(dZ.$0,d0.$0+1);};bQ.Equals=function(dY,dZ){var d0,d1,d2,d3;if(dY===dZ)return true;else{d0=typeof dY;if(d0=="object"){if(dY===null||dY===void 0||dZ===null||dZ===void 0)return false;else if("Equals"in dY)return dY.Equals(dZ);else if(dY instanceof a.Array&&dZ instanceof a.Array)return bQ.arrayEquals(dY,dZ);else if(dY instanceof dT&&dZ instanceof dT)return bQ.dateEquals(dY,dZ);else{d1=[true];for(var d4 in dY)if(function(d5){d1[0]=!dY.hasOwnProperty(d5)||dZ.hasOwnProperty(d5)&&bQ.Equals(dY[d5],dZ[d5]);return!d1[0];}(d4))break;if(d1[0]){for(var d5 in dZ)if(function(d6){d1[0]=!dZ.hasOwnProperty(d6)||dY.hasOwnProperty(d6);return!d1[0];}(d5))break;}return d1[0];}}else return d0=="function"&&("$Func"in dY?dY.$Func===dZ.$Func&&dY.$Target===dZ.$Target:"$Invokes"in dY&&"$Invokes"in dZ&&bQ.arrayEquals(dY.$Invokes,dZ.$Invokes));}};bQ.Compare=function(dY,dZ){var d0,d1,d2,d3,d4,d5;if(dY===dZ)return 0;else{d1=typeof dY;switch(d1=="function"?1:d1=="boolean"?2:d1=="number"?2:d1=="string"?2:d1=="object"?3:0){case 0:return typeof dZ=="undefined"?0:-1;case 1:return bM.FailWith("Cannot compare function values.");case 2:return dY<dZ?-1:1;case 3:if(dY===null)d2=-1;else if(dZ===null)d2=1;else if("CompareTo"in dY)d2=dY.CompareTo(dZ);else if("CompareTo0"in dY)d2=dY.CompareTo0(dZ);else if(dY instanceof a.Array&&dZ instanceof a.Array)d2=bQ.compareArrays(dY,dZ);else if(dY instanceof dT&&dZ instanceof dT)d2=bQ.compareDates(dY,dZ);else{d3=[0];for(var d6 in dY)if(function(d7){return!dY.hasOwnProperty(d7)?false:!dZ.hasOwnProperty(d7)?(d3[0]=1,true):(d3[0]=bQ.Compare(dY[d7],dZ[d7]),d3[0]!==0);}(d6))break;if(d3[0]===0){for(var d7 in dZ)if(function(d8){return!dZ.hasOwnProperty(d8)?false:!dY.hasOwnProperty(d8)&&(d3[0]=-1,true);}(d7))break;}d2=d3[0];}return d2;}}};bQ.arrayEquals=function(dY,dZ){var d0,d1;if(bO.length(dY)===bO.length(dZ)){d0=true;d1=0;while(d0&&d1<bO.length(dY)){!bQ.Equals(bO.get(dY,d1),bO.get(dZ,d1))?d0=false:void 0;d1=d1+1;}return d0;}else return false;};bQ.dateEquals=function(dY,dZ){return dY.getTime()===dZ.getTime();};bQ.compareArrays=function(dY,dZ){var d0,d1;if(bO.length(dY)<bO.length(dZ))return -1;else if(bO.length(dY)>bO.length(dZ))return 1;else{d0=0;d1=0;while(d0===0&&d1<bO.length(dY)){d0=bQ.Compare(bO.get(dY,d1),bO.get(dZ,d1));d1=d1+1;}return d0;}};bQ.compareDates=function(dY,dZ){return bQ.Compare(dY.getTime(),dZ.getTime());};bQ.Hash=function(dY){var dZ;dZ=typeof dY;return dZ=="function"?0:dZ=="boolean"?dY?1:0:dZ=="number"?dY:dZ=="string"?bQ.hashString(dY):dZ=="object"?dY==null?0:dY instanceof a.Array?bQ.hashArray(dY):bQ.hashObject(dY):0;};bQ.hashString=function(dY){var dZ,d0,d1;if(dY===null)return 0;else{dZ=5381;for(d0=0,d1=dY.length-1;d0<=d1;d0++)dZ=bQ.hashMix(dZ,dY[d0].charCodeAt());return dZ;}};bQ.hashArray=function(dY){var dZ,d0,d1;dZ=-34948909;for(d0=0,d1=bO.length(dY)-1;d0<=d1;d0++)dZ=bQ.hashMix(dZ,bQ.Hash(bO.get(dY,d0)));return dZ;};bQ.hashObject=function(dY){var dZ,d0;if("GetHashCode"in dY)return dY.GetHashCode();else{dZ=[0];for(var d1 in dY)if(function(d2){dZ[0]=bQ.hashMix(bQ.hashMix(dZ[0],bQ.hashString(d2)),bQ.Hash(dY[d2]));return false;}(d1))break;return dZ[0];}};bQ.hashMix=function(dY,dZ){return(dY<<5)+dY+dZ;};bS=bR.Dictionary=dS.Class({TryGetValue:function(dY,dZ){var d0,d1,d2;d0=this;d1=this.data[this.hash(dY)];return d1==null?false:(d2=bO.tryPick(function(d3){var d4;d4=bM.KeyValue(d3);return d0.equals.apply(null,[d4[0],dY])?{$:1,$0:d4[1]}:null;},d1),d2!=null&&d2.$==1&&(dZ.set(d2.$0),true));},ContainsKey:function(dY){var dZ,d0;dZ=this;d0=this.data[this.hash(dY)];return d0==null?false:bO.exists(function(d1){return dZ.equals.apply(null,[(bM.KeyValue(d1))[0],dY]);},d0);},set_Item:function(dY,dZ){this.set(dY,dZ);},Add:function(dY,dZ){this.add(dY,dZ);},Clear:function(){this.data=[];this.count=0;},get_Item:function(dY){return this.get(dY);},set:function(dY,dZ){var d0,d1,d2,d3;d0=this;d1=this.hash(dY);d2=this.data[d1];d2==null?(this.count=this.count+1,this.data[d1]=new a.Array({K:dY,V:dZ})):(d3=bO.tryFindIndex(function(d4){return d0.equals.apply(null,[(bM.KeyValue(d4))[0],dY]);},d2),d3==null?(this.count=this.count+1,d2.push({K:dY,V:dZ})):d2[d3.$0]={K:dY,V:dZ});},add:function(dY,dZ){var d0,d1,d2;d0=this;d1=this.hash(dY);d2=this.data[d1];d2==null?(this.count=this.count+1,this.data[d1]=new a.Array({K:dY,V:dZ})):(bO.exists(function(d3){return d0.equals.apply(null,[(bM.KeyValue(d3))[0],dY]);},d2)?cQ.alreadyAdded():void 0,this.count=this.count+1,d2.push({K:dY,V:dZ}));},get:function(dY){var dZ,d0;dZ=this;d0=this.data[this.hash(dY)];return d0==null?cQ.notPresent():bO.pick(function(d1){var d2;d2=bM.KeyValue(d1);return dZ.equals.apply(null,[d2[0],dY])?{$:1,$0:d2[1]}:null;},d0);},Remove:function(dY){return this.remove(dY);},get_Keys:function(){return new dA.New(this);},remove:function(dY){var dZ,d0,d1,d2;dZ=this;d0=this.hash(dY);d1=this.data[d0];return d1==null?false:(d2=bO.filter(function(d3){return!dZ.equals.apply(null,[(bM.KeyValue(d3))[0],dY]);},d1),bO.length(d2)<d1.length&&(this.count=this.count-1,this.data[d0]=d2,true));},GetEnumerator:function(){return cO.Get0(this);},GetEnumerator0:function(){return cO.Get0(bO.concat(ch.GetFieldValues(this.data)));}},r,bS);bS.New$5=dS.Ctor(function(){bS.New$6.call(this,[],bQ.Equals,bQ.Hash);},bS);bS.New$6=dS.Ctor(function(dY,dZ,d0){var d1,d2;r.New.call(this);this.equals=dZ;this.hash=d0;this.count=0;this.data=[];d1=cO.Get(dY);try{while(d1.MoveNext()){d2=d1.Current();this.set(d2.K,d2.V);}}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}},bS);bT.filter=function(dY,dZ){return{GetEnumerator:function(){var d0;d0=cO.Get(dZ);return new cP.New(null,null,function(d1){var d2,d3,d4;d2=d0.MoveNext();d3=d0.Current();d4=false;while(d2)if(dY(d3)){d1.c=d3;d4=true;d2=false;}else if(d0.MoveNext())d3=d0.Current();else d2=false;return d4;},function(){d0.Dispose();});}};};bT.map=function(dY,dZ){return{GetEnumerator:function(){var d0;d0=cO.Get(dZ);return new cP.New(null,null,function(d1){return d0.MoveNext()&&(d1.c=dY(d0.Current()),true);},function(){d0.Dispose();});}};};bT.forall=function(dY,dZ){return!bT.exists(function(d0){return!dY(d0);},dZ);};bT.exists=function(dY,dZ){var d0,d1;d0=cO.Get(dZ);try{d1=false;while(!d1&&d0.MoveNext())d1=dY(d0.Current());return d1;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bT.fold=function(dY,dZ,d0){var d1,d2;d1=dZ;d2=cO.Get(d0);try{while(d2.MoveNext())d1=dY(d1,d2.Current());return d1;}finally{if(typeof d2=="object"&&"Dispose"in d2)d2.Dispose();}};bT.choose=function(dY,dZ){return bT.collect(function(d0){var d1;d1=dY(d0);return d1==null?bZ.Empty:bV.ofArray([d1.$0]);},dZ);};bT.tryFind=function(dY,dZ){var d0,d1,d2;d0=cO.Get(dZ);try{d1=null;while(d1==null&&d0.MoveNext()){d2=d0.Current();dY(d2)?d1={$:1,$0:d2}:void 0;}return d1;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bT.distinct=function(dY){return bT.distinctBy(a.id,dY);};bT.sort=function(dY){return bT.sortBy(a.id,dY);};bT.mapi=function(dY,dZ){return bT.map2(dY,bT.initInfinite(a.id),dZ);};bT.collect=function(dY,dZ){return bT.concat(bT.map(dY,dZ));};bT.tryFindIndex=function(dY,dZ){var d0,d1,d2;d0=cO.Get(dZ);try{d1=true;d2=0;while(d1&&d0.MoveNext())if(dY(d0.Current()))d1=false;else d2=d2+1;return d1?null:{$:1,$0:d2};}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bT.delay=function(dY){return{GetEnumerator:function(){return cO.Get(dY());}};};bT.append=function(dY,dZ){return{GetEnumerator:function(){var d0,d1;d0=cO.Get(dY);d1=[true];return new cP.New(d0,null,function(d2){var d3;return d2.s.MoveNext()?(d2.c=d2.s.Current(),true):(d3=d2.s,!bQ.Equals(d3,null)?d3.Dispose():void 0,d2.s=null,d1[0]&&(d1[0]=false,d2.s=cO.Get(dZ),d2.s.MoveNext()?(d2.c=d2.s.Current(),true):(d2.s.Dispose(),d2.s=null,false)));},function(d2){var d3;d3=d2.s;!bQ.Equals(d3,null)?d3.Dispose():void 0;});}};};bT.head=function(dY){var dZ;dZ=cO.Get(dY);try{return dZ.MoveNext()?dZ.Current():bT.insufficient();}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bT.indexed=function(dY){return bT.mapi(function(dZ,d0){return[dZ,d0];},dY);};bT.tryPick=function(dY,dZ){var d0,d1;d0=cO.Get(dZ);try{d1=null;while(bQ.Equals(d1,null)&&d0.MoveNext())d1=dY(d0.Current());return d1;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bT.pairwise=function(dY){return bT.map(function(dZ){return[bO.get(dZ,0),bO.get(dZ,1)];},bT.windowed(2,dY));};bT.isEmpty=function(dY){var dZ;dZ=cO.Get(dY);try{return!dZ.MoveNext();}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bT.sortBy=function(dY,dZ){return bT.delay(function(){var d0;d0=bO.ofSeq(dZ);bO.sortInPlaceBy(dY,d0);return d0;});};bT.max=function(dY){var dZ,d0,d1;dZ=cO.Get(dY);try{if(!dZ.MoveNext())bT.seqEmpty();d0=dZ.Current();while(dZ.MoveNext()){d1=dZ.Current();bQ.Compare(d1,d0)===1?d0=d1:void 0;}return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bT.skip=function(dY,dZ){return{GetEnumerator:function(){var d0;d0=cO.Get(dZ);return new cP.New(true,null,function(d1){var d2,d3;if(d1.s){for(d2=1,d3=dY;d2<=d3;d2++)if(!d0.MoveNext())bT.insufficient();d1.s=false;}else null;return d0.MoveNext()&&(d1.c=d0.Current(),true);},function(){d0.Dispose();});}};};bT.groupBy=function(dY,dZ){return bT.delay(function(){return bO.groupBy(dY,bO.ofSeq(dZ));});};bT.iter=function(dY,dZ){var d0;d0=cO.Get(dZ);try{while(d0.MoveNext())dY(d0.Current());}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bT.distinctBy=function(dY,dZ){return{GetEnumerator:function(){var d0,d1;d0=cO.Get(dZ);d1=new c5.New$3();return new cP.New(null,null,function(d2){var d3,d4;if(d0.MoveNext()){d3=d0.Current();d4=d1.Add(dY(d3));while(!d4&&d0.MoveNext()){d3=d0.Current();d4=d1.Add(dY(d3));}return d4&&(d2.c=d3,true);}else return false;},function(){d0.Dispose();});}};};bT.map2=function(dY,dZ,d0){return{GetEnumerator:function(){var d1,d2;d1=cO.Get(dZ);d2=cO.Get(d0);return new cP.New(null,null,function(d3){return d1.MoveNext()&&d2.MoveNext()&&(d3.c=dY(d1.Current(),d2.Current()),true);},function(){d1.Dispose();d2.Dispose();});}};};bT.initInfinite=function(dY){return{GetEnumerator:function(){return new cP.New(0,null,function(dZ){dZ.c=dY(dZ.s);dZ.s=dZ.s+1;return true;},void 0);}};};bT.concat=function(dY){return{GetEnumerator:function(){var dZ;dZ=cO.Get(dY);return new cP.New(null,null,function(d0){var d1;while(true){d1=d0.s;if(bQ.Equals(d1,null)){if(dZ.MoveNext()){d0.s=cO.Get(dZ.Current());d0=d0;}else{dZ.Dispose();return false;}}else if(d1.MoveNext()){d0.c=d1.Current();return true;}else{d0.Dispose();d0.s=null;d0=d0;}}},function(d0){var d1;d1=d0.s;!bQ.Equals(d1,null)?d1.Dispose():void 0;!bQ.Equals(dZ,null)?dZ.Dispose():void 0;});}};};bT.init=function(dY,dZ){return bT.take(dY,bT.initInfinite(dZ));};bT.windowed=function(dY,dZ){dY<=0?bM.FailWith("The input must be positive."):void 0;return bT.delay(function(){return bT.enumUsing(cO.Get(dZ),function(d0){var d1;d1=[];return bT.append(bT.enumWhile(function(){return d1.length<dY&&d0.MoveNext();},bT.delay(function(){d1.push(d0.Current());return[];})),bT.delay(function(){return d1.length===dY?bT.append([d1.slice(0)],bT.delay(function(){return bT.enumWhile(function(){return d0.MoveNext();},bT.delay(function(){d1.shift();d1.push(d0.Current());return[d1.slice(0)];}));})):[];}));});});};bT.seqEmpty=function(){return bM.FailWith("The input sequence was empty.");};bT.nth=function(dY,dZ){var d0,d1;if(dY<0)bM.FailWith("negative index requested");d0=-1;d1=cO.Get(dZ);try{while(d0<dY){!d1.MoveNext()?bT.insufficient():void 0;d0=d0+1;}return d1.Current();}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}};bT.cache=function(dY){var dZ,d0;dZ=[];d0=[cO.Get(dY)];return{GetEnumerator:function(){return new cP.New(0,null,function(d1){var d2;return d1.s<dZ.length?(d1.c=dZ[d1.s],d1.s=d1.s+1,true):(d2=d0[0],bQ.Equals(d2,null)?false:d2.MoveNext()?(d1.s=d1.s+1,d1.c=d2.Current(),dZ.push(d1.c),true):(d2.Dispose(),d0[0]=null,false));},void 0);}};};bT.take=function(dY,dZ){dY<0?bT.nonNegative():void 0;return{GetEnumerator:function(){var d0;d0=[cO.Get(dZ)];return new cP.New(0,null,function(d1){var d2;d1.s=d1.s+1;return d1.s>dY?false:(d2=d0[0],bQ.Equals(d2,null)?bT.insufficient():d2.MoveNext()?(d1.c=d2.Current(),d1.s===dY?(d2.Dispose(),d0[0]=null):void 0,true):(d2.Dispose(),d0[0]=null,bT.insufficient()));},function(){var d1;d1=d0[0];!bQ.Equals(d1,null)?d1.Dispose():void 0;});}};};bT.compareWith=function(dY,dZ,d0){var d1,d2,d3,d4,d5;d1=cO.Get(dZ);try{d3=cO.Get(d0);try{d4=0;d5=true;while(d5&&d4===0)if(d1.MoveNext())d4=d3.MoveNext()?dY(d1.Current(),d3.Current()):1;else if(d3.MoveNext())d4=-1;else d5=false;d2=d4;}finally{if(typeof d3=="object"&&"Dispose"in d3)d3.Dispose();}return d2;}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}};bT.forall2=function(dY,dZ,d0){return!bT.exists2(function(d1,d2){return!dY(d1,d2);},dZ,d0);};bT.unfold=function(dY,dZ){return{GetEnumerator:function(){return new cP.New(dZ,null,function(d0){var d1;d1=dY(d0.s);return d1==null?false:(d0.c=d1.$0[0],d0.s=d1.$0[1],true);},void 0);}};};bT.exists2=function(dY,dZ,d0){var d1,d2,d3,d4;d1=cO.Get(dZ);try{d3=cO.Get(d0);try{d4=false;while(!d4&&d1.MoveNext()&&d3.MoveNext())d4=dY(d1.Current(),d3.Current());d2=d4;}finally{if(typeof d3=="object"&&"Dispose"in d3)d3.Dispose();}return d2;}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}};bT.findIndex=function(dY,dZ){var d0;d0=bT.tryFindIndex(dY,dZ);return d0==null?bM.FailWith("KeyNotFoundException"):d0.$0;};bU.concat=function(dY,dZ){return bO.ofSeq(dZ).join(dY);};bU.PadRight=function(dY,dZ){return bU.PadRightWith(dY,dZ," ");};bU.replicate=function(dY,dZ){return bO.create(dY,dZ).join("");};bU.PadLeft=function(dY,dZ){return bU.PadLeftWith(dY,dZ," ");};bU.PadRightWith=function(dY,dZ,d0){return dZ>dY.length?dY+a.Array(dZ-dY.length+1).join(d0):dY;};bU.Substring=function(dY,dZ,d0){return dY.substr(dZ,d0);};bU.SplitChars=function(dY,dZ,d0){return bU.Split(dY,new a.RegExp("["+bU.RegexEscape(dZ.join(""))+"]"),d0);};bU.Trim=function(dY){return dY.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bU.StartsWith=function(dY,dZ){return dY.substring(0,dZ.length)==dZ;};bU.EndsWith=function(dY,dZ){return dY.substring(dY.length-dZ.length)==dZ;};bU.IsNullOrEmpty=function(dY){return dY==null||dY=="";};bU.PadLeftWith=function(dY,dZ,d0){return dZ>dY.length?a.Array(dZ-dY.length+1).join(d0)+dY:dY;};bU.Replace=function(dY,dZ,d0){function d1(d2){var d3,d4,d5;d3=d2.indexOf(dZ);return d3!==-1?(d4=bU.ReplaceOnce(d2,dZ,d0),(d5=d3+d0.length,bU.Substring(d4,0,d3+d0.length)+d1(d4.substring(d5)))):d2;}return d1(dY);};bU.SplitStrings=function(dY,dZ,d0){return bU.Split(dY,new a.RegExp(bU.concat("|",bO.map(bU.RegexEscape,dZ))),d0);};bU.Split=function(dY,dZ,d0){return d0===1?bO.filter(function(d1){return d1!=="";},bU.SplitWith(dY,dZ)):bU.SplitWith(dY,dZ);};bU.RegexEscape=function(dY){return dY.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bU.ReplaceOnce=function(dY,dZ,d0){return dY.replace(dZ,d0);};bU.SplitWith=function(dY,dZ){return dY.split(dZ);};bU.forall=function(dY,dZ){return bT.forall(dY,bU.protect(dZ));};bU.protect=function(dY){return dY===null?"":dY;};bO.map=function(dY,dZ){var d0,d1,d2;d0=new a.Array(dZ.length);for(d1=0,d2=dZ.length-1;d1<=d2;d1++)d0[d1]=dY(dZ[d1]);return d0;};bO.foldBack=function(dY,dZ,d0){var d1,d2,d3,d4,d5;d1=d0;d3=dZ.length;for(d4=1,d5=d3;d4<=d5;d4++)d1=dY(dZ[d3-d4],d1);return d1;};bO.head=function(dY){bO.nonEmpty(dY);return dY[0];};bO.choose=function(dY,dZ){var d0,d1,d2,d3;d0=[];for(d1=0,d2=dZ.length-1;d1<=d2;d1++){d3=dY(dZ[d1]);d3==null?void 0:d0.push(d3.$0);}return d0;};bO.filter=function(dY,dZ){var d0,d1,d2;d0=[];for(d1=0,d2=dZ.length-1;d1<=d2;d1++)if(dY(dZ[d1]))d0.push(dZ[d1]);return d0;};bO.splitAt=function(dY,dZ){return[bO.take(dY,dZ),bO.skip(dY,dZ)];};bO.findIndex=function(dY,dZ){var d0;d0=bO.tryFindIndex(dY,dZ);return d0==null?bM.FailWith("KeyNotFoundException"):d0.$0;};bO.concat=function(dY){return a.Array.prototype.concat.apply([],bO.ofSeq(dY));};bO.tryItem=function(dY,dZ){return dZ.length<=dY||dY<0?null:{$:1,$0:dZ[dY]};};bO.tryPick=function(dY,dZ){var d0,d1,d2;d0=null;d1=0;while(d1<dZ.length&&d0==null){d2=dY(dZ[d1]);d2!=null&&d2.$==1?d0=d2:void 0;d1=d1+1;}return d0;};bO.exists=function(dY,dZ){var d0,d1,d2,d3;d0=false;d1=0;d3=bO.length(dZ);while(!d0&&d1<d3)if(dY(dZ[d1]))d0=true;else d1=d1+1;return d0;};bO.ofSeq=function(dY){var dZ,d0;if(dY instanceof a.Array)return dY.slice();else if(dY instanceof bZ)return bO.ofList(dY);else{dZ=[];d0=cO.Get(dY);try{while(d0.MoveNext())dZ.push(d0.Current());return dZ;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}}};bO.create=function(dY,dZ){var d0,d1,d2;d0=new a.Array(dY);for(d1=0,d2=dY-1;d1<=d2;d1++)d0[d1]=dZ;return d0;};bO.nonEmpty=function(dY){if(dY.length===0)bM.FailWith("The input array was empty.");};bO.tryFindIndex=function(dY,dZ){var d0,d1;d0=null;d1=0;while(d1<dZ.length&&d0==null){dY(dZ[d1])?d0={$:1,$0:d1}:void 0;d1=d1+1;}return d0;};bO.tryFind=function(dY,dZ){var d0,d1;d0=null;d1=0;while(d1<dZ.length&&d0==null){dY(dZ[d1])?d0={$:1,$0:dZ[d1]}:void 0;d1=d1+1;}return d0;};bO.ofList=function(dY){var dZ,d0;d0=[];dZ=dY;while(!(dZ.$==0)){d0.push(bV.head(dZ));dZ=bV.tail(dZ);}return d0;};bO.sortInPlaceBy=function(dY,dZ){bO.mapInPlace(function(d0){return d0[0];},bO.mapiInPlace(function(d0,d1){return[d1,[dY(d1),d0]];},dZ).sort(function(d0,d1){return bQ.Compare(d0[1],d1[1]);}));};bO.take=function(dY,dZ){return dY<0?bT.nonNegative():dY>dZ.length?bT.insufficient():dZ.slice(0,dY);};bO.skip=function(dY,dZ){return dY<0?bT.nonNegative():dY>dZ.length?bT.insufficient():dZ.slice(dY);};bO.sortInPlace=function(dY){bO.mapInPlace(function(dZ){return dZ[0];},bO.mapiInPlace(function(dZ,d0){return[d0,dZ];},dY).sort(bQ.Compare));};bO.pick=function(dY,dZ){var d0;d0=bO.tryPick(dY,dZ);return d0==null?bM.FailWith("KeyNotFoundException"):d0.$0;};bO.iter=function(dY,dZ){var d0,d1;for(d0=0,d1=dZ.length-1;d0<=d1;d0++)dY(dZ[d0]);};bO.find=function(dY,dZ){var d0;d0=bO.tryFind(dY,dZ);return d0==null?bM.FailWith("KeyNotFoundException"):d0.$0;};bO.forall=function(dY,dZ){var d0,d1,d2,d3;d0=true;d1=0;d3=bO.length(dZ);while(d0&&d1<d3)if(dY(dZ[d1]))d1=d1+1;else d0=false;return d0;};bO.init=function(dY,dZ){var d0,d1,d2;dY<0?bM.FailWith("Negative size given."):null;d0=new a.Array(dY);for(d1=0,d2=dY-1;d1<=d2;d1++)d0[d1]=dZ(d1);return d0;};bV.ofArray=function(dY){var dZ,d0,d1;dZ=bZ.Empty;for(d0=bO.length(dY)-1,d1=0;d0>=d1;d0--)dZ=new bZ({$:1,$0:bO.get(dY,d0),$1:dZ});return dZ;};bV.filter=function(dY,dZ){return bV.ofSeq(bT.filter(dY,dZ));};bV.rev=function(dY){var dZ,d0;dZ=bZ.Empty;d0=dY;while(d0.$==1){dZ=new bZ({$:1,$0:d0.$0,$1:dZ});d0=d0.$1;}return dZ;};bV.map=function(dY,dZ){var d0,d1,d2,d3,d4;if(dZ.$==0)return dZ;else{d3=new bZ({$:1});d0=d3;d1=dZ;d2=true;while(d2){d0.$0=dY(d1.$0);d1=d1.$1;d1.$==0?d2=false:d0=(d4=new bZ({$:1}),d0.$1=d4,d4);}d0.$1=bZ.Empty;return d3;}};bV.foldBack=function(dY,dZ,d0){return bO.foldBack(dY,bO.ofList(dZ),d0);};bV.ofSeq=function(dY){var dZ,d0,d1,d2,d3,d4;if(dY instanceof bZ)return dY;else if(dY instanceof a.Array)return bV.ofArray(dY);else{dZ=cO.Get(dY);try{d1=dZ.MoveNext();if(!d1)d0=bZ.Empty;else{d3=new bZ({$:1});d2=d3;while(d1){d2.$0=dZ.Current();dZ.MoveNext()?d2=(d4=new bZ({$:1}),d2.$1=d4,d4):d1=false;}d2.$1=bZ.Empty;d0=d3;}return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}}};bV.append=function(dY,dZ){var d0,d1,d2,d3,d4;if(dY.$==0)return dZ;else if(dZ.$==0)return dY;else{d3=new bZ({$:1});d0=d3;d1=dY;d2=true;while(d2){d0.$0=d1.$0;d1=d1.$1;d1.$==0?d2=false:d0=(d4=new bZ({$:1}),d0.$1=d4,d4);}d0.$1=dZ;return d3;}};bV.head=function(dY){return dY.$==1?dY.$0:bV.listEmpty();};bV.tail=function(dY){return dY.$==1?dY.$1:bV.listEmpty();};bV.listEmpty=function(){return bM.FailWith("The input list was empty.");};bW.toArray=function(dY){return dY==null?[]:[dY.$0];};bX=q.CancellationTokenSource=dS.Class({Cancel$1:function(){var dY;if(!this.c){this.c=true;dY=bO.choose(function(dZ){try{dZ();return null;}catch(d0){return{$:1,$0:d0};}},this.r);if(bO.length(dY)>0)throw new cR.New$3(dY);else void 0;}}},r,bX);bX.New=dS.Ctor(function(){r.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bX);bY.$cctor=function(){var dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f0,f1,f2,f3,f4,f5,f6,f7,f8,f9,f_,f$,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go;bY.$cctor=a.ignore;function gp(hF){return bU.concat("\n",hF);}function gq(hF){return J.splitByChar("\n",hF);}function gr(hF){var hG,hH;return bP.array(hF,{$:1,$0:0},{$:1,$0:(hG=0,(hH=bO.length(hF)-2,bQ.Compare(hG,hH)===1?hG:hH))});}function gs(hF){return bU.concat("\n",hF);}function gt(hF){return hF+"T00:00:00";}function gu(hF){var hG;function hH(hJ){return ba.plugIns().TryFindByKey(hJ);}function hI(hJ){return hJ==null?ba.defaultPlugIn():hJ.$0;}hG=function(hJ){return hJ==null?null:hH(hJ.$0);};return function(hJ){return hI(hG(hJ));};}function gv(hF,hG){return function(hH){return function(hI){function hJ(hK){return ca.Element("div",hF(hH),[ca.Element("div",[cD.Create("class","input-group")],[ca.Element("span",[cD.Create("class","input-group-addon")],[hG(hI)]),ca.Input([cD.Create("class","form-control")],hK)])]);}return function(hK){return ba.docWithVar(hJ,hK);};};};}function gw(hF,hG){var hH,hI;hH=(hI=hF(hG),function(hJ){return ca.Input(hI,hJ);});return function(hJ){return ba.docWithVar(hH,hJ);};}function gx(hF,hG){var hH,hI;hH=(hI=hF(hG),function(hJ){return ca.InputArea(hI,hJ);});return function(hJ){return ba.docWithVar(hH,hJ);};}function gy(hF){var hG;hG=null;return eA.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gz(hF,hG){eA.set_Item(hF,hG);return hG;}function gA(hF,hG){var hH;hH=gy(hF);return hH==null?gz(hF,hG(hF)):hH.$0;}function gB(hF){var hG;hG=null;return eD.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gC(hF,hG){eD.set_Item(hF,hG);return hG;}function gD(hF,hG){var hH;hH=gB(hF);return hH==null?gC(hF,hG(hF)):hH.$0;}function gE(hF){var hG;hG=null;return eG.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gF(hF,hG){eG.set_Item(hF,hG);return hG;}function gG(hF,hG){var hH;hH=gE(hF);return hH==null?gF(hF,hG(hF)):hH.$0;}function gH(hF){var hG;hG=null;return eJ.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gI(hF,hG){eJ.set_Item(hF,hG);return hG;}function gJ(hF,hG){var hH;hH=gH(hF);return hH==null?gI(hF,hG(hF)):hH.$0;}function gK(hF){var hG;hG=null;return eM.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gL(hF,hG){eM.set_Item(hF,hG);return hG;}function gM(hF,hG){var hH;hH=gK(hF);return hH==null?gL(hF,hG(hF)):hH.$0;}function gN(hF){var hG;hG=null;return eP.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gO(hF,hG){eP.set_Item(hF,hG);return hG;}function gP(hF,hG){var hH;hH=gN(hF);return hH==null?gO(hF,hG(hF)):hH.$0;}function gQ(hF){var hG;hG=null;return eS.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gR(hF,hG){eS.set_Item(hF,hG);return hG;}function gS(hF,hG){var hH;hH=gQ(hF);return hH==null?gR(hF,hG(hF)):hH.$0;}function gT(hF){var hG;hG=null;return eV.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gU(hF,hG){eV.set_Item(hF,hG);return hG;}function gV(hF,hG){var hH;hH=gT(hF);return hH==null?gU(hF,hG(hF)):hH.$0;}function gW(hF){var hG;hG=null;return eY.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function gX(hF,hG){eY.set_Item(hF,hG);return hG;}function gY(hF,hG){var hH;hH=gW(hF);return hH==null?gX(hF,hG(hF)):hH.$0;}function gZ(hF){var hG;hG=null;return e1.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function g0(hF,hG){e1.set_Item(hF,hG);return hG;}function g1(hF,hG){var hH;hH=gZ(hF);return hH==null?g0(hF,hG(hF)):hH.$0;}function g2(hF){var hG;hG=null;return e4.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function g3(hF,hG){e4.set_Item(hF,hG);return hG;}function g4(hF,hG){var hH;hH=g2(hF);return hH==null?g3(hF,hG(hF)):hH.$0;}function g5(hF){var hG;hG=null;return fM.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function g6(hF,hG){fM.set_Item(hF,hG);return hG;}function g7(hF,hG){var hH;hH=g5(hF);return hH==null?g6(hF,hG(hF)):hH.$0;}function g8(hF){var hG;hG=null;return fP.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function g9(hF,hG){fP.set_Item(hF,hG);return hG;}function g_(hF,hG){var hH;hH=g8(hF);return hH==null?g9(hF,hG(hF)):hH.$0;}function g$(hF){var hG;hG=null;return fS.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function ha(hF,hG){fS.set_Item(hF,hG);return hG;}function hb(hF,hG){var hH;hH=g$(hF);return hH==null?ha(hF,hG(hF)):hH.$0;}function hc(hF){var hG;hG=null;return fV.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hd(hF,hG){fV.set_Item(hF,hG);return hG;}function he(hF,hG){var hH;hH=hc(hF);return hH==null?hd(hF,hG(hF)):hH.$0;}function hf(hF){var hG;hG=null;return fY.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hg(hF,hG){fY.set_Item(hF,hG);return hG;}function hh(hF,hG){var hH;hH=hf(hF);return hH==null?hg(hF,hG(hF)):hH.$0;}function hi(hF){var hG;hG=null;return f1.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hj(hF,hG){f1.set_Item(hF,hG);return hG;}function hk(hF,hG){var hH;hH=hi(hF);return hH==null?hj(hF,hG(hF)):hH.$0;}function hl(hF){var hG;hG=null;return f4.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hm(hF,hG){f4.set_Item(hF,hG);return hG;}function hn(hF,hG){var hH;hH=hl(hF);return hH==null?hm(hF,hG(hF)):hH.$0;}function ho(hF){var hG;hG=null;return f7.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hp(hF,hG){f7.set_Item(hF,hG);return hG;}function hq(hF,hG){var hH;hH=ho(hF);return hH==null?hp(hF,hG(hF)):hH.$0;}function hr(hF){var hG;hG=null;return f_.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hs(hF,hG){f_.set_Item(hF,hG);return hG;}function ht(hF,hG){var hH;hH=hr(hF);return hH==null?hs(hF,hG(hF)):hH.$0;}function hu(hF){var hG;hG=null;return gb.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hv(hF,hG){gb.set_Item(hF,hG);return hG;}function hw(hF,hG){var hH;hH=hu(hF);return hH==null?hv(hF,hG(hF)):hH.$0;}function hx(hF){var hG;hG=null;return ge.TryGetValue(hF,{get:function(){return hG;},set:function(hH){hG=hH;}})?{$:1,$0:hG}:null;}function hy(hF,hG){ge.set_Item(hF,hG);return hG;}function hz(hF,hG){var hH;hH=hx(hF);return hH==null?hy(hF,hG(hF)):hH.$0;}function hA(hF){return bH.snippetsLM().TryFindByKey(hF);}function hB(hF){return bH.snippetsLM().TryFindByKey(hF);}function hC(hF){return bo.parseEntries("lytTarget",hF);}function hD(hF){return hF.$==1?{$:1,$0:hF.$0}:null;}function hE(hF){return bU.concat("\n",hF);}bY.rtn=function(hF){return[hF];};bY.state=new s.New();bY.result=new v.New();bY.result$1=u.result();bY.resultP=new x.New();bY.depend=new z.New();bY.rtn$1=y.rtn;bY.depend$1=y.depend();bY.resultM=new C.New();bY.asyncResultM=new G.New();bY.unindentStr=function(hF){return gp(J.unindent(hF));};bY.skipLastLine=(dY=function(hF){return gr(gq(hF));},function(hF){return gs(dY(hF));});bY.parseDateO2=(dZ=K.tryParseWith(function(hF){var hG,hH;hG=0;return[(hH=dg.TryParse(hF),hH!=null&&hH.$==1&&(hG=hH.$0,true)),hG];}),function(hF){return dZ(gt(hF));});bY.parseDateO=K.tryParseWith(function(hF){var hG,hH;hG=0;return[(hH=dg.TryParse(hF),hH!=null&&hH.$==1&&(hG=hH.$0,true)),hG];});bY.parseIntO=K.tryParseWith(function(hF){var hG;hG=0;return[cb.TryParseInt32(hF,{get:function(){return hG;},set:function(hH){hG=hH;}}),hG];});bY.parseInt64O=K.tryParseWith(function(hF){var hG;hG=0;return[cb.TryParseInt64(hF,{get:function(){return hG;},set:function(hH){hG=hH;}}),hG];});bY.parseSingleO=K.tryParseWith(function(hF){var hG,hH;hG=0;return[(hH=a.Number(hF),a.isNaN(hH)?false:(hG=hH,true)),hG];});bY.parseDoubleO=K.tryParseWith(function(hF){var hG,hH;hG=0;return[(hH=a.Number(hF),a.isNaN(hH)?false:(hG=hH,true)),hG];});bY.parseGuidO=K.tryParseWith(function(hF){var hG;hG=null;return[bL.TryParse(hF,{get:function(){return hG;},set:function(hH){hG=hH;}}),hG];});bY["|Date|_|"]=K.parseDateO();bY["|Int|_|"]=K.parseIntO();bY["|Int64|_|"]=K.parseInt64O();bY["|Single|_|"]=K.parseSingleO();bY["|Double|_|"]=K.parseDoubleO();bY["|Guid|_|"]=K.parseGuidO();bY.serString=[L.toJsonString,function(hF){return hF.tryString();}];bY.serFloat=[function(hF){return(function(hG){return function(hH){return hG(bN.prettyPrint(hH));};}(a.id))(hF);},function(hF){return hF.tryFloat();}];bY.serInt=[function(hF){return(function(hG){return function(hH){return hG(bN.prettyPrint(hH));};}(a.id))(hF);},function(hF){var hG;hG=hF.tryInt();return hG==null?null:{$:1,$0:bM.toInt(hG.$0)};}];bY.serInt64=[a.String,function(hF){return hF.tryInt();}];bY.serBool=[function(hF){return(function(hG){return function(hH){return hG(bN.prettyPrint(hH));};}(a.id))(hF);},function(hF){return hF.tryBool();}];bY.serDate=[function(hF){return a.String(a.id(hF));},function(hF){var hG;hG=hF.tryInt();return hG==null?null:{$:1,$0:hG.$0};}];bY.serTypedRegisters=new bS.New$5();bY.serGuid=(d0=L.serString(),L.mapO(a.String,K.parseGuidO(),d0[0],d0[1]));bY.defaultSnippet=N.New(f.Tag$4("00000000-0000-0000-0000-000000000000"),"","",null,new b3.New$1(null),[],(new dT(0)).getTime());bY.serSnippetId=(d1="SnippetId",[function(hF){var hG;hG=a.String(f.Untag$4(hF));return(((dS.Curried3(function(hH,hI,hJ){return hH("{"+bN.prettyPrint(hI)+" :"+bN.prettyPrint(hJ)+"}");}))(a.id))(d1))(hG);},function(hF){var hG,hH,hI,hJ;hG=(hH=(hI=hF.tryField(d1),hI==null?null:hI.$0.tryString()),(hJ=K.parseGuidO(),hH==null?null:hJ(hH.$0)));return hG==null?null:{$:1,$0:f.Tag$4(hG.$0)};}]);bY.serSnippet=(d2=[(d3=P.serSnippetId(),L.serField("snpId",function(hF){return hF.snpId;},function(hF,hG){return N.New(hF,hG.snpName,hG.snpContent,hG.snpParentIdO,hG.snpPredIds,hG.snpProperties,hG.snpModified);},d3[0],d3[1])),(d4=L.serString(),L.serField("snpName",function(hF){return hF.snpName;},function(hF,hG){return N.New(hG.snpId,hF,hG.snpContent,hG.snpParentIdO,hG.snpPredIds,hG.snpProperties,hG.snpModified);},d4[0],d4[1])),(d5=L.serString(),L.serField("snpContent",function(hF){return hF.snpContent;},function(hF,hG){return N.New(hG.snpId,hG.snpName,hF,hG.snpParentIdO,hG.snpPredIds,hG.snpProperties,hG.snpModified);},d5[0],d5[1])),(d6=(d7=P.serSnippetId(),L.serOpt(d7[0],d7[1])),L.serField("snpParentIdO",function(hF){return hF.snpParentIdO;},function(hF,hG){return N.New(hG.snpId,hG.snpName,hG.snpContent,hF,hG.snpPredIds,hG.snpProperties,hG.snpModified);},d6[0],d6[1])),(d8=(d9=P.serSnippetId(),L.serSet(d9[0],d9[1])),L.serField("snpPredIds",function(hF){return hF.snpPredIds;},function(hF,hG){return N.New(hG.snpId,hG.snpName,hG.snpContent,hG.snpParentIdO,hF,hG.snpProperties,hG.snpModified);},d8[0],d8[1])),(d_=(d$=L.serDup(L.serString(),L.serString()),L.serArr(d$[0],d$[1])),L.serField("snpProperties",function(hF){return hF.snpProperties;},function(hF,hG){return N.New(hG.snpId,hG.snpName,hG.snpContent,hG.snpParentIdO,hG.snpPredIds,hF,hG.snpModified);},d_[0],d_[1])),(ea=L.serInt(),L.serFieldO("snpGeneration",function(){return null;},function(hF,hG){return hF!=null&&hF.$==1?N.New(hG.snpId,hG.snpName,hG.snpContent,hG.snpParentIdO,hG.snpPredIds,hG.snpProperties,(new dT(0)).getTime()+hF.$0*3600000):hG;},ea[0],ea[1])),(eb=L.serDate(),L.serField("snpModified",function(hF){return hF.snpModified;},function(hF,hG){return N.New(hG.snpId,hG.snpName,hG.snpContent,hG.snpParentIdO,hG.snpPredIds,hG.snpProperties,hF);},eb[0],eb[1]))],(ec=O.New("","",null),[function(hF){var hG;function hH(hI,hJ,hK){var hL,hM;hL=hJ(hF);hM=((dS.Curried3(function(hN,hO,hP){return hN(bN.prettyPrint(hO)+": "+bN.toSafe(hP));}))(a.id))(hI);return hL==null?null:{$:1,$0:hM(hL.$0)};}hG=bU.concat(", ",bT.choose(function(hI){return hH(hI[0],hI[1],hI[2]);},d2));return(function(hI){return function(hJ){return hI("{"+bN.toSafe(hJ)+"}");};}(a.id))(hG);},function(hF){return{$:1,$0:bT.fold(function(hG,hH){var hI;hI=hF.tryField(hH[0]);return(hH[2](hG))(hI);},ec,d2)};}]));bY.serModel=(ed=[(ee=(ef=P.serSnippet(),L.serArr(ef[0],ef[1])),L.serField("snippets",function(hF){return hF.snippets;},function(hF,hG){return Q.New(hF,hG.modified,hG.collapsed);},ee[0],ee[1])),(eg=L.serInt(),L.serFieldO("generation",function(){return null;},function(hF,hG){return hF!=null&&hF.$==1?Q.New(hG.snippets,(new dT(0)).getTime()+hF.$0*3600000,hG.collapsed):hG;},eg[0],eg[1])),(eh=L.serDate(),L.serField("modified",function(hF){return hF.modified;},function(hF,hG){return Q.New(hG.snippets,hF,hG.collapsed);},eh[0],eh[1])),(ei=(ej=P.serSnippetId(),L.serSet(ej[0],ej[1])),L.serField("collapsed",function(hF){return hF.collapsed;},function(hF,hG){return Q.New(hG.snippets,hG.modified,hF);},ei[0],ei[1]))],(ek=Q.New([],(new dT(0)).getTime(),new b3.New$1(null)),[function(hF){var hG;function hH(hI,hJ,hK){var hL,hM;hL=hJ(hF);hM=((dS.Curried3(function(hN,hO,hP){return hN(bN.prettyPrint(hO)+": "+bN.toSafe(hP));}))(a.id))(hI);return hL==null?null:{$:1,$0:hM(hL.$0)};}hG=bU.concat(", ",bT.choose(function(hI){return hH(hI[0],hI[1],hI[2]);},ed));return(function(hI){return function(hJ){return hI("{"+bN.toSafe(hJ)+"}");};}(a.id))(hG);},function(hF){return{$:1,$0:bT.fold(function(hG,hH){var hI;hI=hF.tryField(hH[0]);return(hH[2](hG))(hI);},ek,ed)};}]));bY.counter=1;bY.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bY.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";bY.observers=bZ.Empty;bY.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";bY.init=cC.Create(function(){var hF;hF=new U.New();S.defineWebComponent("wcomp-tabstrip",U.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});bY.layoutHorizontal=dS.Curried(function(hF,hG,hH,hI,hJ){return ca.get_Empty();},5);bY.layoutVertical=dS.Curried(function(hF,hG,hH,hI,hJ){return ca.get_Empty();},5);bY.loader=(el=null,cM.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cM.Bind(cM.FromContinuations(function(hF,hG){return self.require(["vs/editor/editor.main"],hF,hG);}),function(){return cM.Return(null);});}));bY.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"  type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 150px) 150px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"100\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <div>Docs:</div>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Views:</div>\r\n                                                                <div ws-hole=\"Views\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValue\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <span class=\"input-group-addon\">${Value}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Queries:</div>\r\n                                                                <div ws-hole=\"Queries\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Vars:</div>\r\n                                                                <div ws-hole=\"Vars\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValueInput\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <textarea class=\"form-control\" id=\"\" placeholder=\"Value...\" ws-var=\"Value\" spellcheck=\"false\">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                        <div style=\"\r\n                                            overflow: hidden;\r\n                                            display: grid;\r\n                                            grid-template-columns: 100%;\r\n                                            grid-template-rows: repeat(15, calc(100% / 15));\r\n                                            bxackground-color: #eee;\r\n                                            box-sizing: border-box;\r\n                                            padding : 5px;\r\n                                            grid-gap: 5px;\r\n                                            margin-right: 21px;\r\n                                       \"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\"         ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\"          >${Name}</button>\r\n                                            <button ws-template=\"ActionDisabled\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" disabled >${Name}</button>\r\n                                        </div>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        xtextarea {\r\n                           resize : none;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";bY.plugIns=new cq.New$1(function(hF){return hF.plgName;});bY.mainDocV=cc.Create$1("AppFramework.AppFwkClient");bY.TemplateFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\website\\AppFramework.html";bY.selectionPlugInO=cc.Create$1({$:1,$0:f.Tag$3("AppFramework")});bY.currentPlugInW=(em=ba.selectionPlugInO().get_View(),b_.Map2(function(hF,hG){return(gu(hF))(hG);},ba.plugIns().v,em));bY.currentPlugInV=new c6.New(ba.currentPlugInW(),function(hF){ba.plugIns().Append(hF);});bY.AppFwkClient=cC.Create(function(){var hF,hG,hH,hI,hJ,hK,hL,hM,hN;return(hF=(hG=ba.renderQueries(),(hH=ba.renderActions(),(hI=ba.renderDocs(),(hJ=ba.renderViews(),(hK=ba.renderVars(),(hL=ba.renderPlugIns(),cv.Make().WithHole({$:0,$0:"plugins",$1:hL})).WithHole({$:2,$0:"pluginname",$1:b_.Map(function(hO){return f.Untag$3(hO.plgName);},ba.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:hK})).WithHole({$:0,$0:"views",$1:hJ})).WithHole({$:0,$0:"docs",$1:hI})).WithHole({$:0,$0:"actions",$1:hH})).WithHole({$:0,$0:"queries",$1:hG})),(hM=cw.CompleteHoles(hF.k,hF.h,[]),(hN=new cu.New(hM[1],cx.appfwkclient(hM[0])),(hF.i=hN,hN)))).get_Doc();});bY.plugin=new bh.New();bY.a11V=cc.Create$1(11);bY.mainX={$:0,$0:ba.a11V().get_View()};bY.baseView=ba.mainDocV().get_View();bY.op_LessMultiplyGreater=function(hF){return function(hG){return bk.apply(hF,hG);};};bY.textAtt=function(hF){return function(){return hF("textAtt not implemented");};}(bM.FailWith);bY.getDocFromReferenceD=y.dependByName("getDocFromReference",bm.getDocFromReference,a.id);bY.getTextActViewFromReferenceD=y.dependByName("getTextActViewFromReference",bm.getTextActViewFromReference,a.id);bY.getDocFromTextTypesD=(en=y.depend(),en.Delay(function(){return en.Bind(bm.getDocFromReferenceD(),function(hF){var hG;function hH(hI){return hI.$==1?hF(hI.$0):ca.TextNode(hI.$0);}return en.Return((hG=function(hI){return bV.map(hH,hI);},function(hI){return ca.Concat(hG(hI));}));});}));bY.extractDocD=(eo=y.depend(),eo.Delay(function(){return eo.Bind(bm.getDocFromTextTypesD(),function(hF){return eo.Return(function(hG){return hF(bm.getTextData(hG));});});}));bY.getTextValFromSeqD=(ep=y.depend(),ep.Delay(function(){return ep.Bind(bm.getTextActViewFromReferenceD(),function(hF){var hG,hH,hI;function hJ(hK){var hL;return hK.$==1?(hL=hK.$0,{$:0,$0:b_.Map(function(hM){return hM.$==1?(function(hN){return function(hO){return hN("@{"+bN.toSafe(hO)+"}");};}(a.id))(hL):hM.$0;},hF(hL))}):{$:1,$0:hK.$0};}return ep.Return((hG=function(hK){return bk.traverseListApp(hJ,hK);},(hH=(hI={$:1,$0:function(hK){return bU.concat("",hK);}},function(hK){return bk.apply(hI,hK);}),function(hK){return hH(hG(hK));})));});}));bY.getTextValD=A.op_GreaterMultiplyGreater(bm.getTextData,bm.getTextValFromSeqD());bY.extractAtsD=(eq=y.depend(),eq.Delay(function(){return eq.Bind(bm.getTextValD(),function(hF){return eq.Bind(bm.getTextActViewFromReferenceD(),function(hG){return eq.Return(function(hH){var hI,hJ;function hK(hS){var hT,hU,hV,hW,hX,hY,hZ;hT=bU.SplitChars(hS,[":"],0);return!bQ.Equals(hT,null)&&hT.length===2?(hU=bO.get(hT,1),{$:0,$0:bO.get(hT,0),$1:hU}):(hV=bO.map(bU.Trim,bU.SplitChars(hS,["="],0)),!bQ.Equals(hV,null)&&hV.length===2?(hW=bO.get(hV,1),(hX=bO.get(hV,0),(hY=bm.getTextData(hW),hY.$==1&&(hY.$0.$==1&&(hY.$1.$==0&&(hZ=hY.$0.$0,true)))?{$:2,$0:hX,$1:hZ}:{$:1,$0:hX,$1:hW}))):!bQ.Equals(hV,null)&&hV.length===1?{$:1,$0:bO.get(hV,0),$1:""}:bl.AEmpty);}function hL(hS){return bT.filter(function(hT){return""!==hT;},bT.map(bU.Trim,bU.SplitChars(hS,[";"],0)));}function hM(hS){var hT;hT=hS.addedListeners;return!hT?[]:hT;}function hN(hS,hT,hU){var hV;function hW(hX){ba.callFunction(hT,hX,hV.actFunction);}return hU.$==1?(hV=hU.$0,(hT.addEventListener(hS,hW,false),void(hT.addedListeners=hM(hT).concat([[hS,hW]])))):hT.setAttribute(hS,bU.Trim(hU.$0));}function hO(hS){function hT(hU,hV){return hN(hS,hU,hV);}return function(hU){return cB.DynamicCustom(function(hV){return function(hW){return hT(hV,hW);};},hU);};}function hP(hS){var hT;return hS.$==1?ba.valToAttr(hS.$0,hF(hS.$1)):hS.$==2?(hT=hG(hS.$1),(hO(hS.$0))(hT)):hS.$==3?c7.EmptyAttr():ba.valToStyle(hS.$0,hF(hS.$1));}function hQ(hS,hT){var hU,hX,hY,hZ,h0,h1,h2,h3,h4,h5,h6,h7,h8,h9,h_,h$,ia;function hV(ib){return ib[0];}function hW(ib){return new b3.New(ib);}hX=bT.choose(function(ib){return ib.$==0?{$:1,$0:ib.$0+":"+ib.$1}:null;},hT);hY=bO.ofSeq(bT.delay(function(){return bT.append(!bT.isEmpty(hX)?[["style",bU.concat(";",hX)]]:[],bT.delay(function(){return bT.choose(function(ib){return ib.$==1?{$:1,$0:[ib.$0,ib.$1]}:ib.$==2?{$:1,$0:[ib.$0,ib.$1]}:ib.$==3?null:null;},hT);}));}));hZ=bV.ofSeq(bT.delay(function(){return bT.map(function(ib){return[hS.attributes.item(ib).name,hS.attributes.item(ib).value];},bV.ofSeq(bM.range(0,hS.attributes.length-1)));}));h0=(hU=function(ib){return bT.map(hV,ib);},function(ib){return hW(hU(ib));});h1=b3.op_Subtraction(h0(hZ),h0(hY));h2=cO.Get(h1);try{while(h2.MoveNext()){h3=h2.Current();hS.attributes.removeNamedItem(h3);}}finally{if(typeof h2=="object"&&"Dispose"in h2)h2.Dispose();}h4=b3.op_Subtraction(new b3.New(hY),new b3.New(hZ));h5=cO.Get(h4);try{while(h5.MoveNext()){h6=h5.Current();hS.setAttribute(h6[0],h6[1]);}}finally{if(typeof h5=="object"&&"Dispose"in h5)h5.Dispose();}h7=hM(hS);for(h8=0,h9=h7.length-1;h8<=h9;h8++){h_=bO.get(h7,h8);hS.removeEventListener(h_[0],h_[1]);}h$=bT.choose(function(ib){return ib.$==2?{$:1,$0:[ib.$0,ib.$1]}:null;},hT);ia=cO.Get(h$);try{while(ia.MoveNext())(function(){var ib,ic;ib=ia.Current();return b_.Get((ic=ib[0],function(id){return hN(ic,hS,id);}),hG(ib[1]));}());return;}finally{if(typeof ia=="object"&&"Dispose"in ia)ia.Dispose();}}function hR(hS){return bT.map(hK,hS);}hI=bO.ofSeq(hL(hH));return!bQ.Equals(hI,null)&&hI.length===1?[(hJ=hF(bO.get(hI,0)),hJ.$==0?cB.DynamicCustom(function(hS){return function(hT){return hQ(hS,hT);};},b_.Map(function(hS){return hR(hL(hS));},hJ.$0)):hP(hK(hJ.$0)))]:bT.map(function(hS){return hP(hK(hS));},hI);});});});}));bY.extractTextD=(er=y.depend(),er.Delay(function(){return er.Bind(bm.getTextValD(),function(hF){return er.Return(function(hG){return bk.toView(hF(hG));});});}));bY.currentPlugInNameDef=f.Tag$3("NewLYx");bY.currentPlugInNameD=y.dependByName("currentPlugInName",ba.currentPlugInNameDef(),a.id);bY.getDocD=(es=y.depend(),es.Delay(function(){return es.Bind(ba.currentPlugInNameD(),function(hF){return es.Return(function(hG){var hH,hI,hJ;hH=(ba.splitName(hF))(hG);hI=hH[0];hJ=hH[1];return ca.BindView(function(hK){var hL;function hM(){return(function(hN){return function(hO){return hN("Reference not found @{"+bN.toSafe(hO)+"}");};}(a.id))(hG);}hL=hK==null?null:{$:1,$0:ba.getLazyDoc(hK.$0)};return hL==null?ca.TextView(b_.Map(function(hN){return hN==null?hM():hN.$0;},ba.tryGetWoWW(hI,hJ))):hL.$0;},ba.tryGetDocW(hI,hJ));});});}));bY.getTextActViewD=(et=y.depend(),et.Delay(function(){return et.Bind(ba.currentPlugInNameD(),function(hF){return et.Return(function(hG){var hH,hI,hJ;hH=(ba.splitName(hF))(hG);hI=hH[0];hJ=hH[1];return b_.Bind(function(hK){function hL(){return(function(hM){return function(hN){return hM("Text Reference not found @{"+bN.toSafe(hN)+"}");};}(a.id))(hG);}return hK==null?b_.Map(function(hM){return{$:0,$0:hM};},b_.Map(function(hM){return hM==null?hL():hM.$0;},ba.tryGetWoWW(hI,hJ))):b_.Const({$:1,$0:hK.$0});},ba.tryGetActW(hI,hJ));});});}));bY.extractTextD$1=bm.extractTextD();bY.extractDocD$1=bm.extractDocD();bY.extractAtsD$1=bm.extractAtsD();bY.extractAttD=(eu=A.depend(),eu.Delay(function(){return eu.Bind(ba.extractAtsD(),function(hF){return eu.Return(function(hG){return cD.Concat(hF(hG));});});}));bY.defPlugInName=f.Tag$3("AppFramework");bY.inputLabel=ba.depWithExtracts(function(hF,hG,hH){return gv.apply(null,[hF,hG,hH]);});bY.input=ba.depWithExtracts(function(hF){return function(hG){return gw(hF,hG);};});bY.textArea=ba.depWithExtracts(function(hF){return function(hG){return gx(hF,hG);};});bY.trigAct=ba.depWithExtracts(function(hF,hG,hH){return function(hI){return function(hJ){var hK,hL;return ca.TextView(b_.Map(function(){var hM,hN;hM=(hN=ba.getParmRef(hJ),ba.tryGetAct(hN[0],hN[1]));(n.iter(function(hO){ba.callFunction(null,null,hO.actFunction);}))(hM);return"";},(hK=hH(hI),(hL=[cc.Create$1(null)],(b_.Sink(function(hM){if(!bQ.Equals(hL[0].Get(),hM))hL[0].Set(hM);},hK),hL[0].get_View())))));};};});bY.select=ba.depWithExtracts(function(hF,hG,hH){return dS.Curried3(function(hI,hJ,hK){function hL(hM){var hN,hO;hN=b_.Map(function(hP){return bV.ofSeq(bU.SplitChars(hP,[";"],0));},hH(hK));hO=new c6.New(b_.Map2(function(hP,hQ){return bT.contains(bU.Trim(hP),hQ)?{$:1,$0:bU.Trim(hP)}:null;},hM.get_View(),hN),function(hP){var hQ;if(hP!=null&&hP.$==1){hQ=hP.$0;b_.Get(function(hR){if(bT.contains(hQ,hR))hM.Set(hQ);},hN);}else hM.Set("");});return ca.SelectDynOptional(hF(hI),hJ,a.id,hN,hO);}return function(hM){return ba.docWithVar(hL,hM);};});});ev=(ew=ba.plugin(),ew.AddAct(ew.AddDoc(ew.AddVar(ew.Name(ew.Yield(),"AppFramework"),"mainDocV",ba.mainDocV()),"AppFwkClient",ba.AppFwkClient()),"Hello",function(){self.alert("Hello!");}));ba.plugIns().Append(ev);ex=(ey=ba.plugin(),ey.AddQry(ey.AddAct(ey.AddAct2(ey.AddDoc3(ey.AddDoc3(ey.AddDoc4(ey.AddDoc2(ey.AddDoc2(ey.AddDoc2(ey.Name(ey.Yield(),"AF"),"TrigAction",ba.trigAct(),"Trigger","Action"),"Input",ba.input(),"Attrs","Var"),"TextArea",ba.textArea(),"Attrs","Var"),"Select",ba.select(),"Attrs","None","Vals","Var"),"InputFile",dS.Curried3(ba.inputFile),"Attrs","Label","Action"),"InputLabel",ba.inputLabel(),"Attrs","Label","Var"),"SetVar",function(hF){return function(hG){return ba.setVar(hF,hG);};},"Var","Value"),"Hello",function(){self.alert("Hello!");}),"getDocNames",function(){return bO.ofSeq(bT.collect(function(hF){return bT.map(function(hG){return f.Untag$3(hF.plgName)+"."+f.Untag$3(hG.docName);},hF.plgDocs);},(ba.plugIns())["var"].Get()));}));ba.plugIns().Append(ex);bY.getMainDoc=cC.Create(function(){V.init(dS.Curried(ba.horizontal,5),dS.Curried(ba.vertical,5));T.init().f();return ba.mainDoc();});bY.splitName=ba.splitName;bY.currentViewTriggger=ba.mainDocV().get_View();bY.createSplitterM=(ez=(eA=new bS.New$5(),[[gy,function(hF){return function(hG){return gA(hF,hG);};}],function(){eA.Clear();}]),(eB=ez[0][1],[function(hF){return(eB(hF))(function(hG){return bo.createSplitter(hG[0],hG[1],hG[2],hG[3],hG[4]);});},ez[1]]))[0];bY.createButtonM=(eC=(eD=new bS.New$5(),[[gB,function(hF){return function(hG){return gD(hF,hG);};}],function(){eD.Clear();}]),(eE=eC[0][1],[function(hF){return(eE(hF))(function(hG){return bo.createButton(hG[0],hG[1],hG[2],hG[3],hG[4]);});},eC[1]]))[0];bY.createInputM=(eF=(eG=new bS.New$5(),[[gE,function(hF){return function(hG){return gG(hF,hG);};}],function(){eG.Clear();}]),(eH=eF[0][1],[function(hF){return(eH(hF))(function(hG){return bo.createInput(hG[0],hG[1],hG[2],hG[3]);});},eF[1]]))[0];bY.createTextAreaM=(eI=(eJ=new bS.New$5(),[[gH,function(hF){return function(hG){return gJ(hF,hG);};}],function(){eJ.Clear();}]),(eK=eI[0][1],[function(hF){return(eK(hF))(function(hG){return bo.createTextArea(hG[0],hG[1],hG[2],hG[3]);});},eI[1]]))[0];bY.createElementM=(eL=(eM=new bS.New$5(),[[gK,function(hF){return function(hG){return gM(hF,hG);};}],function(){eM.Clear();}]),(eN=eL[0][1],[function(hF){return(eN(hF))(function(hG){return bo.createElement(hG[0],hG[1],hG[2],hG[3],hG[4]);});},eL[1]]))[0];bY.createDocM=(eO=(eP=new bS.New$5(),[[gN,function(hF){return function(hG){return gP(hF,hG);};}],function(){eP.Clear();}]),(eQ=eO[0][1],[function(hF){return(eQ(hF))(function(hG){return bo.createDoc(hG[0],hG[1],hG[2],hG[3]);});},eO[1]]))[0];bY.createTemplateM=(eR=(eS=new bS.New$5(),[[gQ,function(hF){return function(hG){return gS(hF,hG);};}],function(){eS.Clear();}]),(eT=eR[0][1],[function(hF){return(eT(hF))(function(hG){return bo.createTemplate(hG[0],hG[1],hG[2],hG[3],hG[4]);});},eR[1]]))[0];bY.createConcatM=(eU=(eV=new bS.New$5(),[[gT,function(hF){return function(hG){return gV(hF,hG);};}],function(){eV.Clear();}]),(eW=eU[0][1],[function(hF){return(eW(hF))(function(hG){return bo.createConcat(hG[0],hG[1],hG[2]);});},eU[1]]))[0];bY.createVarM=(eX=(eY=new bS.New$5(),[[gW,function(hF){return function(hG){return gY(hF,hG);};}],function(){eY.Clear();}]),(eZ=eX[0][1],[function(hF){return(eZ(hF))(function(hG){return bo.createVar(hG[0],hG[1],hG[2]);});},eX[1]]))[0];bY.createViewM=(e0=(e1=new bS.New$5(),[[gZ,function(hF){return function(hG){return g1(hF,hG);};}],function(){e1.Clear();}]),(e2=e0[0][1],[function(hF){return(e2(hF))(function(hG){return bo.createView(hG[0],hG[1],hG[2]);});},e0[1]]))[0];bY.createActionM=(e3=(e4=new bS.New$5(),[[g2,function(hF){return function(hG){return g4(hF,hG);};}],function(){e4.Clear();}]),(e5=e3[0][1],[function(hF){return(e5(hF))(function(hG){return bo.createAction(hG[0],hG[1],hG[2],hG[3]);});},e3[1]]))[0];e6=ba.tryGetPlugIn(ba.defPlugInName());(n.iter(function(hF){hF.plgActions.Append(ba.newActF(f.Tag$3("AddLayout"),{$:2,$0:function(hG){return function(hH){return bo.addNewLayout(hG,hH);};},$1:"[Name]",$2:"[Layout]"}));}))(e6);bY.htmlD=y.dependByName("AppFrameworkTemplate.html",cL.html(),a.id);bY.startWithHtmlD=(e7=y.depend(),e7.Delay(function(){return e7.Bind(bu.htmlD(),function(hF){return e7.Return(function(){var hG,hH,hI;hG=self.document.createElement("div");self.document.body.appendChild(hG);hG.outerHTML=hF;hH=ba.getMainDoc().f();hI=self.document.body;c1.LoadLocalTemplates("");ca.RunAppend(hI,hH);});});}));bY.unselectorV=new c6.New(b_.Const(null),a.ignore);bY.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";bY.aV=cc.Create$1(4);bY.pa=bD.aV().get_View();bY.pb=6.2;bY.currentPlugInNameDef$1=f.Tag$3("NewLYx");bY.currentPlugInNameD$1=y.dependByName("currentPlugInName",bD.currentPlugInNameDef(),a.id);bY.name=cc.Create$1("World");bY.enterName=(e8=ba.op_Dereference(bD.checkName),(e9={$:0,$0:bD.name().get_View()},bj.New(A.op_BarGreaterGreater(e8.r,function(hF){return bi.New(hF,e9);}))));bY.now=(e_=ba.op_Dereference(function(){var hF;hF=new dT(dT.now());return hF.getFullYear()+"-"+("0"+(hF.getMonth()+1)).slice(-2)+"-"+("0"+hF.getDate()).slice(-2)+" "+("0"+hF.getHours()).slice(-2)+":"+("0"+hF.getMinutes()).slice(-2)+":"+("0"+hF.getSeconds()).slice(-2)+":"+("00"+hF.getMilliseconds()).slice(-3);}),(e$={$:0,$0:bD.name().get_View()},bj.New(A.op_BarGreaterGreater(e_.r,function(hF){return bi.New(hF,e$);}))));bY.sayHello=(fa=(fb=(fc=ba.op_Dereference(ca.Concat),ba.bindWrap(function(hF){var hG;hG={$:1,$0:[hF("Hello @{name}!")]};return bj.New(A.op_BarGreaterGreater(fc.r,function(hH){return bi.New(hH,hG);}));},ba.extractDocD())),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(bk.textDoc(hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)}),hG.p));},fb);},bD.enterName().r)),(fd=(fe=ba.op_Dereference(ca.Concat),ba.bindWrap(function(hF){var hG;hG={$:1,$0:[hF("How are you?")]};return bj.New(A.op_BarGreaterGreater(fe.r,function(hH){return bi.New(hH,hG);}));},ba.extractDocD())),(ff=(fg=ba.op_Dereference(ca.Concat),ba.bindWrap(function(hF){var hG;hG={$:1,$0:[ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;})]};return bj.New(A.op_BarGreaterGreater(fg.r,function(hH){return bi.New(hH,hG);}));},fa.r)),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;}),hG.p));},ff);},fd.r))));bY.aString=cc.Lens(bD.aV(),a.String,function(hF,hG){return bM.toInt(a.Number(hG));});bY.main0=(fh=(fi=ba.op_Dereference(function(hF){return function(hG){return bD.concat(hF,hG);};}),(fj={$:0,$0:bD.aV().get_View()},bj.New(A.op_BarGreaterGreater(fi.r,function(hF){return bi.New(hF,fj);})))),(fk={$:1,$0:3.2},bj.New(A.op_BarGreaterGreater(fh.r,function(hF){return bi.New(hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)},fk);}))));bY.main1=(fl=(fm=ba.op_Dereference((dS.Curried3(function(hF,hG,hH){return hF("result = "+bN.toSafe(hG)+" "+bN.toSafe(hH));}))(a.id)),ba.bindWrap(function(hF){var hG;hG=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return bj.New(A.op_BarGreaterGreater(fm.r,function(hH){return bi.New(hH,hG);}));},bD.main0().r)),(fn={$:1,$0:"main0"},bj.New(A.op_BarGreaterGreater(fl.r,function(hF){return bi.New(hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)},fn);}))));bY.main=(fo=(fp=(fq=(fr=(fs=(ft=(fu=(fv=(fw=(fx=ba.op_Dereference((dS.Curried3(ca.Element))("h3")),ba.bindWrap(function(hF){var hG;hG={$:1,$0:hF("color:@{name}; background:red; click=@{AppFramework.Hello}")};return bj.New(A.op_BarGreaterGreater(fx.r,function(hH){return bi.New(hH,hG);}));},ba.extractAtsD())),ba.bindWrap(function(hF){var hG;hG={$:1,$0:[hF("MAIN:")]};return bj.New(A.op_BarGreaterGreater(fw.r,function(hH){return bi.New(hH.f.$==0?hH.p.$==1?{$:0,$0:b_.Apply(hH.f.$0,b_.Const(hH.p.$0))}:{$:0,$0:b_.Apply(hH.f.$0,hH.p.$0)}:hH.p.$==0?{$:0,$0:b_.Apply(b_.Const(hH.f.$0),hH.p.$0)}:{$:1,$0:hH.f.$0(hH.p.$0)},hG);}));},ba.extractDocD())),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(bk.textDoc(hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)}),hG.p));},fv);},bD.main1().r)),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(bk.textDoc(hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)}),hG.p));},fu);},bD.main1().r)),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(hF(":"),hG.p));},ft);},ba.extractDocD())),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;}),hG.p));},fs);},bD.sayHello().r)),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(hF(":"),hG.p));},fr);},ba.extractDocD())),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(hF(" Ms >> "),hG.p));},fq);},ba.extractDocD())),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;}),hG.p));},fp);},bD.sayHello().r)),ba.bindWrap(function(hF){return ba.unwrapBindWrap(function(hG){return bi.New(hG.f,bk.addDoc(hF(" <<"),hG.p));},fo);},ba.extractDocD()));bY.main2=ba.makeAViewDoc(function(){return ca.Element("h4",[cB.Dynamic("style",b_.Map(function(hF){return"color:"+hF;},bD.name().get_View()))],[ca.TextNode("MAIN2:"),ca.TextView(bD.name().get_View())]);});bY.appFwk=(fy=(fz=ba.op_Dereference((dS.Curried3(ca.Element))("div")),ba.bindWrap(function(hF){var hG;hG={$:1,$0:hF("color:@{name}")};return bj.New(A.op_BarGreaterGreater(fz.r,function(hH){return bi.New(hH,hG);}));},ba.extractAtsD())),ba.bindWrap(function(hF){var hG;hG={$:1,$0:[hF("@{AppFramework.AppFwkClient}")]};return bj.New(A.op_BarGreaterGreater(fy.r,function(hH){return bi.New(hH.f.$==0?hH.p.$==1?{$:0,$0:b_.Apply(hH.f.$0,b_.Const(hH.p.$0))}:{$:0,$0:b_.Apply(hH.f.$0,hH.p.$0)}:hH.p.$==0?{$:0,$0:b_.Apply(b_.Const(hH.f.$0),hH.p.$0)}:{$:1,$0:hH.f.$0(hH.p.$0)},hG);}));},ba.extractDocD()));bY.split=(fA=(fB=ba.op_Dereference(dS.Curried(bo.variableSplitter,2,[false,0,50,100])),ba.bindWrap(function(hF){var hG;hG={$:1,$0:ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;})};return bj.New(A.op_BarGreaterGreater(fB.r,function(hH){return bi.New(hH,hG);}));},bD.appFwk().r)),ba.bindWrap(function(hF){var hG;hG={$:1,$0:ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;})};return bj.New(A.op_BarGreaterGreater(fA.r,function(hH){return bi.New(hH.f.$==0?hH.p.$==1?{$:0,$0:b_.Apply(hH.f.$0,b_.Const(hH.p.$0))}:{$:0,$0:b_.Apply(hH.f.$0,hH.p.$0)}:hH.p.$==0?{$:0,$0:b_.Apply(b_.Const(hH.f.$0),hH.p.$0)}:{$:1,$0:hH.f.$0(hH.p.$0)},hG);}));},bD.main().r));bY.split2=(fC=(fD=ba.op_Dereference(dS.Curried(bo.variableSplitter,2,[false,0,50,100])),ba.bindWrap(function(hF){var hG;hG={$:1,$0:ba.makeAViewDoc(function(){var hH;hH=hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)};return hH.$==0?ca.BindView(a.id,hH.$0):hH.$0;})};return bj.New(A.op_BarGreaterGreater(fD.r,function(hH){return bi.New(hH,hG);}));},bD.appFwk().r)),(fE={$:1,$0:bD.main2()},bj.New(A.op_BarGreaterGreater(fC.r,function(hF){return bi.New(hF.f.$==0?hF.p.$==1?{$:0,$0:b_.Apply(hF.f.$0,b_.Const(hF.p.$0))}:{$:0,$0:b_.Apply(hF.f.$0,hF.p.$0)}:hF.p.$==0?{$:0,$0:b_.Apply(b_.Const(hF.f.$0),hF.p.$0)}:{$:1,$0:hF.f.$0(hF.p.$0)},fE);}))));bY.pName=f.Tag$3("NewLY");ba.addPlugIn((fF=ba.plugin(),fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddDoc(fF.AddVar(fF.AddVar(fF.Name(fF.Yield(),f.Untag$3(bD.pName())),"name",bD.name()),"a",bD.aString()),"split",cC.Create(function(){var hF;hF=bD.split();return bD.callDocPFn(bD.pName(),hF);})),"split2",cC.Create(function(){var hF;hF=bD.split2();return bD.callDocPFn(bD.pName(),hF);})),"main",cC.Create(function(){var hF;hF=bD.main();return bD.callDocPFn(bD.pName(),hF);})),"main2",cC.Create(bD.main2)),"sayHello",cC.Create(function(){var hF;hF=bD.sayHello();return bD.callDocPFn(bD.pName(),hF);})),"sayHello2",cC.Create(function(){var hF;hF=bD.sayHello();return bD.callDocPFn(bD.pName(),hF);}))));bY.nodeRefToDocD=(fG=y.depend(),fG.Delay(function(){return fG.Bind(bm.getDocFromTextTypesD(),function(hF){function hG(hH){var hI;return(hH.$==1?(hI=hH.$0.$0,false):hH.$==2?(hI=hH.$0.$0,false):hH.$==3?(hI=hH.$0.$0,false):true)?bV.map(bD.textValToTextType,hH.$0):bV.ofArray([bD.itemRefToTextType(hI)]);}return fG.Return(function(hH){return hF(hG(hH));});});}));bY.varRefToVarD=(fH=y.depend(),fH.Delay(function(){return fH.Bind(bD.currentPlugInNameD(),function(hF){return fH.Return(function(hG){var hH,hI,hJ,hK;hH=bD.itemRefToString(hG.$0);hI=(hJ=(hK=(ba.splitName(hF))(hH),ba.tryGetVar(hK[0],hK[1])),hJ==null?null:{$:1,$0:hJ.$0.varVar});return hI==null?new c6.New(b_.Const((function(hL){return function(hM){return hL("Could not find var "+bN.toSafe(hM));};}(a.id))(hH)),a.ignore):hI.$0;});});}));bY.getParamD=(fI=y.depend(),fI.Delay(function(){return fI.Bind(bD.currentPlugInNameD(),function(hF){return fI.Bind(bm.getTextValFromSeqD(),function(hG){return fI.Return(function(hH){var hI,hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU,hV,hW,hX,hY,hZ,h0,h1,h2,h3,h4,h5;function h6(ic){return ic.docDoc;}function h7(){return(function(ic){return function(id){return ic("missing ref Doc "+cz.p(id));};}(a.id))(hK);}function h8(ic){return ic.varVar.get_View();}function h9(){return b_.Const((function(ic){return function(id){return ic("missing ref Var "+cz.p(id));};}(a.id))(hP));}function h_(ic){return ic.viwView;}function h$(){return b_.Const((function(ic){return function(id){return ic("missing ref View "+cz.p(id));};}(a.id))(hV));}function ia(ic){return ic.actFunction;}function ib(){return(function(ic){return function(id){return ic("missing ref Action "+cz.p(id));};}(a.id))(h1);}hI=(hJ=ba.splitName(hF),function(ic){return hJ(bD.itemRefToString(ic));});return hH.$==1?(hK=hH.$0.$0,b_.Map((hL=(hM=function(ic){var id;id=h6(ic);return id;},function(ic){return ic==null?null:{$:1,$0:hM(ic.$0)};}),(hN=function(ic){return ic==null?h7():ic.$0;},function(ic){return hN(hL(ic));})),(hO=hI(hK),ba.tryGetDocW(hO[0],hO[1])))):hH.$==2?(hP=hH.$0.$0,b_.Bind((hQ=(hR=(hS=function(ic){return b_.Map(a.id,ic);},function(ic){return hS(h8(ic));}),function(ic){return ic==null?null:{$:1,$0:hR(ic.$0)};}),(hT=function(ic){return ic==null?h9():ic.$0;},function(ic){return hT(hQ(ic));})),(hU=hI(hP),ba.tryGetVarW(hU[0],hU[1])))):hH.$==3?(hV=hH.$0.$0,b_.Bind((hW=(hX=(hY=function(ic){return b_.Map(a.id,ic);},function(ic){return hY(h_(ic));}),function(ic){return ic==null?null:{$:1,$0:hX(ic.$0)};}),(hZ=function(ic){return ic==null?h$():ic.$0;},function(ic){return hZ(hW(ic));})),(h0=hI(hV),ba.tryGetViwW(h0[0],h0[1])))):hH.$==4?(h1=hH.$0.$0,b_.Map((h2=(h3=function(ic){var id;id=ia(ic);return id;},function(ic){return ic==null?null:{$:1,$0:h3(ic.$0)};}),(h4=function(ic){return ic==null?ib():ic.$0;},function(ic){return h4(h2(ic));})),(h5=hI(h1),ba.tryGetActW(h5[0],h5[1])))):b_.Map(a.id,bk.toView(hG(bV.map(bD.textValToTextType,hH.$0))));});});});}));bY.getParam2D=(fJ=y.depend(),fJ.Delay(function(){return fJ.Bind(bD.currentPlugInNameD(),function(hF){return fJ.Bind(bm.getTextValFromSeqD(),function(){return fJ.Return(function(hG){var hH,hI,hJ,hK;hH=(hI=bD.itemRefToAbsolute(f.Untag$3(hF)),(hJ=function(hL){return function(hM){return hL("@{"+bN.toSafe(hM)+"}");};}(a.id),function(hL){return hJ(hI(hL));}));return(hG.$==3?(hK=hG.$0.$0,false):hG.$==1?(hK=hG.$0.$0,false):hG.$==2?(hK=hG.$0.$0,false):hG.$==4?(hK=hG.$0.$0,false):true)?bU.concat("",bT.map(function(hL){var hM;return(hL.$==1?(hM=hL.$0.$0,false):hL.$==3?(hM=hL.$0.$0,false):hL.$==4?(hM=hL.$0.$0,false):hL.$==2?(hM=hL.$0.$0,false):true)?hL.$0:hH(hM);},hG.$0)):hH(hK);});});});}));bY.getParamTextD=(fK=y.depend(),fK.Delay(function(){return fK.Bind(bD.currentPlugInNameD(),function(hF){return fK.Bind(bm.getTextValFromSeqD(),function(hG){return fK.Return(function(hH){return function(hI){var hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU,hV,hW,hX,hY;function hZ(h3){return h3.docDoc;}function h0(h3){return h3.varVar.get_View();}function h1(h3){return h3.viwView;}function h2(h3){return h3.actFunction;}hJ=(hK=ba.splitName(hF),function(h3){return hK(bD.itemRefToString(h3));});return hH.$==1?(hL=(hM=hJ(hH.$0.$0),ba.tryGetDoc(hM[0],hM[1])),(n.iter((hN=function(h3){var h4;h4=hZ(h3);return h4;},function(h3){return hI(hN(h3));})))(hL)):hH.$==2?(hO=(hP=hJ(hH.$0.$0),ba.tryGetVar(hP[0],hP[1])),(n.iter((hQ=(hR=function(h3){return hI(a.id(h3));},function(h3){b_.Get(hR,h3);}),function(h3){return hQ(h0(h3));})))(hO)):hH.$==3?(hS=(hT=hJ(hH.$0.$0),ba.tryGetViw(hT[0],hT[1])),(n.iter((hU=(hV=function(h3){return hI(a.id(h3));},function(h3){b_.Get(hV,h3);}),function(h3){return hU(h1(h3));})))(hS)):hH.$==4?(hW=(hX=hJ(hH.$0.$0),ba.tryGetAct(hX[0],hX[1])),(n.iter((hY=function(h3){var h4;h4=h2(h3);return h4;},function(h3){return hI(hY(h3));})))(hW)):b_.Get(function(h3){return hI(a.id(h3));},bk.toView(hG(bV.map(bD.textValToTextType,hH.$0))));};});});});}));bY.initVal="-<InitValue>-";bY.defVarM0=(fL=(fM=new bS.New$5(),[[g5,function(hF){return function(hG){return g7(hF,hG);};}],function(){fM.Clear();}]),(fN=fL[0][1],[function(hF){return(fN(hF))(function(hG){return bD.defVar(hG[0],hG[1],hG[2]);});},fL[1]]))[0];bY.defDocFM=(fO=(fP=new bS.New$5(),[[g8,function(hF){return function(hG){return g_(hF,hG);};}],function(){fP.Clear();}]),(fQ=fO[0][1],[function(hF){return(fQ(hF))(function(hG){return bD.defDocF(hG[0],hG[1],hG[2],hG[3]);});},fO[1]]))[0];bY.defActionM=(fR=(fS=new bS.New$5(),[[g$,function(hF){return function(hG){return hb(hF,hG);};}],function(){fS.Clear();}]),(fT=fR[0][1],[function(hF){return(fT(hF))(function(hG){return bD.defAction(hG[0],hG[1],hG[2],hG[3]);});},fR[1]]))[0];bY.defButtonM=(fU=(fV=new bS.New$5(),[[hc,function(hF){return function(hG){return he(hF,hG);};}],function(){fV.Clear();}]),(fW=fU[0][1],[function(hF){return(fW(hF))(function(hG){return bD.defButton(hG[0],hG[1],hG[2],hG[3],hG[4]);});},fU[1]]))[0];bY.defInputM=(fX=(fY=new bS.New$5(),[[hf,function(hF){return function(hG){return hh(hF,hG);};}],function(){fY.Clear();}]),(fZ=fX[0][1],[function(hF){return(fZ(hF))(function(hG){return bD.defInput(hG[0],hG[1],hG[2],hG[3]);});},fX[1]]))[0];bY.defTextAreaM=(f0=(f1=new bS.New$5(),[[hi,function(hF){return function(hG){return hk(hF,hG);};}],function(){f1.Clear();}]),(f2=f0[0][1],[function(hF){return(f2(hF))(function(hG){return bD.defTextArea(hG[0],hG[1],hG[2],hG[3]);});},f0[1]]))[0];bY.defElementM=(f3=(f4=new bS.New$5(),[[hl,function(hF){return function(hG){return hn(hF,hG);};}],function(){f4.Clear();}]),(f5=f3[0][1],[function(hF){return(f5(hF))(function(hG){return bD.defElement(hG[0],hG[1],hG[2],hG[3],hG[4]);});},f3[1]]))[0];bY.defConcatM=(f6=(f7=new bS.New$5(),[[ho,function(hF){return function(hG){return hq(hF,hG);};}],function(){f7.Clear();}]),(f8=f6[0][1],[function(hF){return(f8(hF))(function(hG){return bD.defConcat(hG[0],hG[1],hG[2]);});},f6[1]]))[0];bY.defViewM=(f9=(f_=new bS.New$5(),[[hr,function(hF){return function(hG){return ht(hF,hG);};}],function(){f_.Clear();}]),(f$=f9[0][1],[function(hF){return(f$(hF))(function(hG){return bD.defView(hG[0],hG[1],hG[2]);});},f9[1]]))[0];bY.defViewJSM=(ga=(gb=new bS.New$5(),[[hu,function(hF){return function(hG){return hw(hF,hG);};}],function(){gb.Clear();}]),(gc=ga[0][1],[function(hF){return(gc(hF))(function(hG){return bD.defViewJS(hG[0],hG[1],hG[2]);});},ga[1]]))[0];bY.defSplitterM=(gd=(ge=new bS.New$5(),[[hx,function(hF){return function(hG){return hz(hF,hG);};}],function(){ge.Clear();}]),(gf=gd[0][1],[function(hF){return(gf(hF))(function(hG){return bD.defSplitter(hG[0],hG[1],hG[2],hG[3],hG[4],hG[5]);});},gd[1]]))[0];bY.drag=bG.DragNone;bY.TemplateFileName$1="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\website\\Templates.html";bY.snippetsLM=cq.Create(function(hF){return hF.snpId;},bZ.Empty);bY.collapsedV=cc.Create$1(new b3.New$1(null));bY.codeSnippetIdV=cc.Create$1(null);bY.searchFor=cc.Create$1("");bY.allPredecessors=function(hF){return O.allPredecessors(hA,hF);};bY.indPredIds=function(hF){return O.indirectPredecessorIds(hB,hF[0],hF[1],hF[2]);};bY.allCodePredsW=b_.Map(function(hF){var hG,hH;return hF!=null&&hF.$==1?(hG=hF.$0,(hH=bH.snippetsLM().TryFindByKey(hG),hH!=null&&hH.$==1?(bH.allPredecessors())(hH.$0):new b3.New$1(null))):new b3.New$1(null);},bH.codeSnippetIdV().get_View());bY.allCodePredIdsW=b_.Map(function(hF){return bT.map(function(hG){return hG.snpId;},hF);},bH.allCodePredsW());bY.shdDef=bI.New(0,0,false,true,[],null);bY.snpIdParentsW=(gg=b_.Map(function(hF){return bO.ofSeq(bT.map(function(hG){return[hG.snpId,hG.snpParentIdO];},hF));},bH.snippetsLM().v),(gh=[cc.Create$1(null)],(b_.Sink(function(hF){if(!bQ.Equals(gh[0].Get(),hF))gh[0].Set(hF);},gg),gh[0].get_View())));bY.processHierW=(gi=b_.get_Do(),b_.Bind(function(hF){return b_.Bind(function(hG){return b_.Const(bH.processHier(hF,hG));},bH.collapsedV().get_View());},bH.snpIdParentsW()));bY.search=(gj=b_.get_Do(),b_.Bind(function(hF){function hG(hH){var hI,hJ,hK;hI=(hJ=(hK=hH.snpId,function(hL){var hM;hM=null;return hL.TryGetValue(hK,{get:function(){return hM;},set:function(hN){hM=hN;}})?{$:1,$0:hM}:null;}(hF)),hJ==null?null:{$:1,$0:hJ.$0.visible});return hI==null||hI.$0;}return b_.Bind(function(hH){return hH===""?b_.Const(hG):b_.Bind(function(hI){return b_.Bind(function(hJ){return hH==="."?b_.Const(function(hK){return(bQ.Equals(hJ,{$:1,$0:hK.snpId})||bT.contains(hK.snpId,hI))&&hG(hK);}):b_.Const(function(hK){return hK.snpName.indexOf(hH)!=-1||hK.snpContent.indexOf(hH)!=-1;});},bH.codeSnippetIdV().get_View());},bH.allCodePredIdsW());},bH.searchFor().get_View());},bH.processHierW()));bY.snippetList=bA.getDocFor(bH.snippetsLM(),O.defaultSnippet(),function(){return O.New("","",null);},{$:1,$0:bH.search()},function(hF){return bH.calcUI(bH.wrapNothing,true,hF);});b_.Sink(function(hF){var hG;if(hF!=null&&hF.$==1){hG=hF.$0;b_.Get(function(hH){if(!bQ.Equals(bH.codeSnippetIdV().Get(),{$:1,$0:hG}))if(!bT.contains(hG,hH))bH.codeSnippetIdV().Set({$:1,$0:hG});},bH.allCodePredIdsW());}},bH.snippetList().selV.get_View());bY.currentSnippetV=cc.Lens(bH.snippetList().get_CurrentV(),a.id,function(hF,hG){return hG;});bY.currentSnippetNameV=cc.Lens(bH.currentSnippetV(),function(hF){return hF.snpName;},function(hF,hG){return N.New(hF.snpId,hG,hF.snpContent,hF.snpParentIdO,hF.snpPredIds,hF.snpProperties,hF.snpModified);});bY.currentSnippetContentV=cc.Lens(bH.currentSnippetV(),function(hF){return hF.snpContent;},function(hF,hG){return N.New(hF.snpId,hF.snpName,hG,hF.snpParentIdO,hF.snpPredIds,hF.snpProperties,hF.snpModified);});bY.curSnp=(gk=ba.plugin(),gk.AddVar(gk.AddVar(gk.Yield(),"name",bH.currentSnippetNameV()),"content",bH.currentSnippetContentV()));bY.monaco=(gl=bH.monacoNew(cc.Lens(bH.currentSnippetV(),function(hF){return hF.snpContent;},function(hF,hG){return N.New(hF.snpId,hF.snpName,hG,hF.snpParentIdO,hF.snpPredIds,hF.snpProperties,hF.snpModified);})),co.New(gl["var"],gl.disabled,b_.Const([]),gl.onChange,gl.onRender,null,null,null,gl.editorO,gl.editorHook));bY.parseW=b_.Map((gm=(gn=function(hF){return bT.choose(hD,hF);},function(hF){return gn(hC(hF));}),function(hF){return hE(gm(hF));}),bH.currentSnippetContentV().get_View());bY.target2=bo.newLyt(f.Tag$3("lytTarget2"),"");bD.addLayout(bH.target2());ba.addPlugIn((go=ba.plugin(),go.AddAct(go.AddAct(go.AddAct(go.AddAct(go.AddAct(go.AddAct(go.AddAct(go.Merge(go.Merge(go.AddDoc(go.AddViw(go.AddVar(go.Name(go.Yield(),"Snippets"),"searchFor",bH.searchFor()),"parseOut",bH.parseW()),"editor",cC.Create(function(){return ca.Element("div",[],[cl.generateDoc(bH.monaco())]);})),"snippets_",bH.snippetList().PlugIn(bH.selectorLensGuidId)),"curSnp_",bH.curSnp()),"LoadSnippets",function(){bJ.loadTextFile(self.document.getElementById("LoadSnippets").firstElementChild.firstElementChild.firstElementChild.firstElementChild);}),"SaveSnippets",function(){bJ.saveAs();}),"IndentIn",function(){bH.indentIn();}),"IndentOut",function(){bH.indentOut();}),"AddSnippet",function(){bH.addSnippet();}),"DeleteSnippet",function(){bH.deleteSnippet();}),"ParseNewLY",function(){bH.parseNewLY();})));by.addLayout0(bo.newLyt(f.Tag$3("lytTarget"),"\r\n            main horizontal 10-50-70 part1 part2\r\n            \r\n            part1 div \"\" \r\n            : h1 \"\" \"Demo123 \" message\r\n            :: div \"\" \"Message:\"\r\n            :: textarea message \"height:200px;width:500px\"\r\n            \r\n            part2 div \"\" lytTarget.Layout\r\n            \r\n            message Var \"Hello\"     \r\n                "));by.addLayout0(bo.newLyt(f.Tag$3("SnippetsLyt"),"\r\n                    split horizontal 0-50-100 AppFramework.AppFwkClient main\r\n                    main vertical 0-25-100 list snippet\r\n                    SearchFor   Doc InputLabel \"\" \"Search\" Snippets.searchFor\r\n                    File        Doc InputFile  \"id=LoadSnippets\" \"Open File\" Snippets.LoadSnippets \"\"\r\n                    list div \"display: flex;flex-direction: column\" File\r\n                    : button \"click=@{Snippets.AddSnippet}\"    \"Add New Snippet\"\r\n                    : button \"click=@{Snippets.DeleteSnippet}\" \"Delete Snippet\"\r\n                    : button \"click=@{Snippets.IndentIn}\"      \"Indent in\"\r\n                    : button \"click=@{Snippets.IndentOut}\"     \"Indent out\"\r\n                    : div    \"\" SearchFor \r\n                    : div \"overflow:auto;width:100%;max-width:100%\" Snippets.snippets_list\r\n                    snippet div \"display: flex;flex-direction: column\"\r\n                    : div    \"\" Snippets.snippets_sel\r\n                    : Doc    InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n                    : div \"height:100%;class=relative\" Snippets.editor                \r\n                "));bD.addLayout(bo.newLyt(f.Tag$3("lytDemo"),"\r\n            lytTarget2 PlugIn\r\n            : Var ParseMsgs\r\n            : Doc main \r\n            \r\n            editorDataSel Var \"\"\r\n            \r\n            target    ViewJS \"n => n.includes('main ')?n:'main Docs \"\" \"\"'\" Snippets.curSnp_content\r\n            \r\n            SetTarget Action AF.SetVar     \"lytTarget2.Layout\"        target\r\n            SetMain2  Action AF.SetVar     \"AppFramework.mainDocV\"    \"lytDemo.main2\"\r\n            SetMain   Action AF.SetVar     \"AppFramework.mainDocV\"    \"lytDemo.main\"\r\n            \r\n            Trigger   Doc    AF.TrigAction Snippets.snippets_sel \"lytDemo.SetTarget\"\r\n            \r\n            gotoMain  button \"click=@{SetMain};width:16px\" \"<<\"\r\n            gotoMain2 button \"click=@{SetMain2};width:16px\" \">>\"\r\n            \r\n            SearchFor   Doc AF.InputLabel \"\" \"Search\" Snippets.searchFor\r\n            \r\n            buttons ul \"\"\r\n            : div \"margin:3px\"\r\n            :: button \"click=@{Snippets.IndentOut};title=indent out\"     \"<--\"\r\n            :: button \"click=@{Snippets.IndentIn};title=indent in\"       \"--> \"\r\n            \r\n            File span \"class=input-group;margin:5px;id=LoadSnippets\"\r\n            : div \"class=input-group-btn\"\r\n            :: label \"class=btn btn-info\" \"Load File\"\r\n            ::: div \"\"\r\n            :::: input \"class=form-control;type=file;display: none;change=@{Snippets.LoadSnippets}\" \r\n            :: label \"class=btn btn-primary;click=@{Snippets.SaveSnippets}\" \"Save File\"\r\n            \r\n            list div \"display: flex;flex-direction: column\" gotoMain File\r\n            : div    \"margin:5px\" SearchFor \r\n            : Docs buttons\r\n            : div \"overflow:auto;width:100%;max-width:calc(100% - 10px)\" Snippets.snippets_list\r\n            : ul \"margin:3px\"\r\n            :: button \"click=@{Snippets.AddSnippet}   ;title=Add New Snippet\" \"+\"\r\n            :: button \"margin-left:20px;click=@{Snippets.DeleteSnippet};title=Delete  Snippet\" \"x\"\r\n            \r\n            snippet div \"display: flex;flex-direction: column;flex:1\" Trigger\r\n            : button \"click=@{SetTarget}\"  \"Apply\"\r\n            : button \"click=@{Snippets.ParseNewLY}\" \"Apply NewLY\"\r\n            : div    \"click=@{SetTarget}\" Snippets.snippets_sel\r\n            : Doc    AF.InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n            : Doc    AF.Select \"\" \"<Content>\" \"Values\" editorDataSel\r\n            : div \"height:100%;class=relative;flex:1\" Snippets.editor\r\n            : Doc    AF.TextArea \"height:7em\"   lytTarget2.ParseMsgs\r\n            \r\n            Left2 vertical 0-25-100 list snippet\r\n            main2 vertical 0-50-100 Left2 lytTarget2.main            \r\n                \r\n            Left div \"display:flex;flex-direction:column\" gotoMain2 snippet\r\n            main vertical 0-50-100 Left lytTarget2.main\r\n                "));ba.mainDocV().Set("lytDemo.main2");};bZ=bV.T=dS.Class({get_Item:function(dY){return bT.nth(dY,this);},GetEnumerator:function(){return new cP.New(this,null,function(dY){var dZ;dZ=dY.s;return dZ.$==0?false:(dY.c=dZ.$0,dY.s=dZ.$1,true);},void 0);},GetEnumerator0:function(){return cO.Get(this);}},null,bZ);bZ.Empty=new bZ({$:0});b0.Bind=function(dY,dZ){return dZ.$==1?{$:1,$0:dZ.$0}:dY(dZ.$0);};b0.Map=function(dY,dZ){return dZ.$==1?{$:1,$0:dZ.$0}:{$:0,$0:dY(dZ.$0)};};b1.IsUpper=function(dY){return dY>="A"&&dY<="Z";};b1.IsWhiteSpace=function(dY){return dY.match(new a.RegExp("\\s"))!==null;};b2.Filter=function(dY,dZ){var d0;return new b3.New$1((d0=bO.ofSeq(bT.filter(dY,dZ)),cT.Build(d0,0,d0.length-1)));};b3=bR.FSharpSet=dS.Class({get_IsEmpty:function(){return this.tree==null;},Remove:function(dY){return new b3.New$1(cT.Remove(dY,this.tree));},Add:function(dY){return new b3.New$1(cT.Add(dY,this.tree));},Contains:function(dY){return cT.Contains(dY,this.tree);},GetEnumerator$1:function(){return cO.Get(cT.Enumerate(false,this.tree));},Equals:function(dY){return this.get_Count()===dY.get_Count()&&bT.forall2(bQ.Equals,this,dY);},get_Count:function(){var dY;dY=this.tree;return dY==null?0:dY.Count;},GetHashCode:function(){return -1741749453+bQ.Hash(bO.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(dY){return bT.compareWith(bQ.Compare,this,dY);},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,b3);b3.op_Addition=function(dY,dZ){return new b3.New$1(cT.OfSeq(bT.append(dY,dZ)));};b3.op_Subtraction=function(dY,dZ){return b2.Filter(function(d0){return!dZ.Contains(d0);},dY);};b3.New=dS.Ctor(function(dY){b3.New$1.call(this,cT.OfSeq(dY));},b3);b3.New$1=dS.Ctor(function(dY){r.New.call(this);this.tree=dY;},b3);b4=bR.FSharpMap=dS.Class({get_Item:function(dY){var dZ;dZ=this.TryFind(dY);return dZ==null?bM.FailWith("The given key was not present in the dictionary."):dZ.$0;},TryFind:function(dY){var dZ;dZ=cT.TryFind(da.New(dY,void 0),this.tree);return dZ==null?null:{$:1,$0:dZ.$0.Value};},GetEnumerator$1:function(){return cO.Get(bT.map(function(dY){return{K:dY.Key,V:dY.Value};},cT.Enumerate(false,this.tree)));},Equals:function(dY){return this.get_Count()===dY.get_Count()&&bT.forall2(bQ.Equals,this,dY);},get_Count:function(){var dY;dY=this.tree;return dY==null?0:dY.Count;},GetHashCode:function(){return bQ.Hash(bO.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(dY){return bT.compareWith(bQ.Compare,this,dY);},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,b4);b4.New=dS.Ctor(function(dY){b4.New$1.call(this,cU.fromSeq(dY));},b4);b4.New$1=dS.Ctor(function(dY){r.New.call(this);this.tree=dY;},b4);b7=b6.attr=dS.Class({},r,b7);b9=b8.Hoverable=dS.Class({Content:function(dY){return dY.on("mouseenter",function(){return cY.AddClass(dY.elt,"hovering");}).on("mouseleave",function(){return cY.RemoveClass(dY.elt,"hovering");});}},null,b9);b9.New$1=function(){return b9.New(cc.Create$1(false));};b9.New=function(dY){return new b9({hover:dY});};b_.Map=function(dY,dZ){return b_.CreateLazy(function(){return cX.Map(dY,dZ());});};b_.Const=function(dY){var dZ;dZ=cX.New({$:0,$0:dY});return function(){return dZ;};};b_.Get=function(dY,dZ){var d0;function d1(){cX.WhenRun(dZ(),function(d2){if(!d0[0]){d0[0]=true;dY(d2);}},function(){if(!d0[0])d1();});}d0=[false];d1();};b_.Map2=function(dY,dZ,d0){return b_.CreateLazy(function(){return cX.Map2(dY,dZ(),d0());});};b_.Bind=function(dY,dZ){return b_.Join(b_.Map(dY,dZ));};b_.Apply=function(dY,dZ){return b_.Map2(function(d0,d1){return d0(d1);},dY,dZ);};b_.Sink=function(dY,dZ){function d0(){cX.WhenRun(dZ(),dY,function(){cM.scheduler().Fork(d0);});}cM.scheduler().Fork(d0);};b_.MapSeqCachedViewBy=function(dY,dZ,d0){var d1;d1=[new bS.New$5()];return b_.Map(function(d2){var d3,d4,d5;d3=d1[0];d4=new bS.New$5();d5=c_.mapInPlace(function(d6){var d7,d8,d9;d7=dY(d6);d8=d3.ContainsKey(d7)?(d9=d3.get_Item(d7),(cc.Set(d9.r,d6),d9)):b_.ConvertSeqNode(function(d_){return dZ(d7,d_);},d6);d4.set_Item(d7,d8);return d8.e;},bO.ofSeq(d2));d1[0]=d4;return d5;},d0);};b_.get_Do=function(){return cI.B;};b_.CreateLazy=function(dY){var dZ;dZ={c:null,o:dY};return function(){var d0,d1;d0=dZ.c;return d0===null?(d0=dZ.o(),dZ.c=d0,(d1=d0.s,d1!=null&&d1.$==0)?dZ.o=null:cX.WhenObsoleteRun(d0,function(){dZ.c=null;}),d0):d0;};};b_.Join=function(dY){return b_.CreateLazy(function(){return cX.Join(dY());});};b_.ConvertSeqNode=function(dY,dZ){var d0,d1;d0=cc.Create$1(dZ);d1=d0.get_View();return{e:dY(d1),r:d0,w:d1};};b_.MapAsync=function(dY,dZ){return b_.CreateLazy(function(){return cX.MapAsync(dY,dZ());});};b_.MapSeqCachedBy=function(dY,dZ,d0){var d1;d1=[new bS.New$5()];return b_.Map(function(d2){var d3,d4,d5;d3=d1[0];d4=new bS.New$5();d5=c_.mapInPlace(function(d6){var d7,d8;d7=dY(d6);d8=d3.ContainsKey(d7)?d3.get_Item(d7):dZ(d6);d4.set_Item(d7,d8);return d8;},bO.ofSeq(d2));d1[0]=d4;return d5;},d0);};b_.TryGet=function(dY){return cX.TryGet(dY());};b_.Map2Unit=function(dY,dZ){return b_.CreateLazy(function(){return cX.Map2Unit(dY(),dZ());});};b_.MapSeqCached=function(dY,dZ){return b_.MapSeqCachedBy(a.id,dY,dZ);};b_.Map3=function(dY,dZ,d0,d1){return b_.CreateLazy(function(){return cX.Map3(dY,dZ(),d0(),d1());});};b_.Sequence=function(dY){return b_.CreateLazy(function(){return cX.Sequence(bT.map(function(dZ){return dZ();},dY));});};b$=b5.Var=dS.Class({},r,b$);b$.New=dS.Ctor(function(){r.New.call(this);},b$);ca=b5.Doc=dS.Class({},r,ca);ca.Element=function(dY,dZ,d0){var d1,d2;d1=cD.Concat(dZ);d2=ca.Concat(d0);return cW.New(cY.CreateElement(dY),d1,d2);};ca.Concat=function(dY){var dZ;dZ=c_.ofSeqNonCopying(dY);return c_.TreeReduce(ca.get_Empty(),ca.Append,dZ);};ca.Verbatim=function(dY){var dZ;return ca.Mk(c_.MapTreeReduce(function(d0){return bQ.Equals(d0.nodeType,cg.TEXT_NODE)?{$:5,$0:d0}:{$:1,$0:c$.CreateElemNode(d0,c7.EmptyAttr(),null)};},null,function(d0,d1){return{$:0,$0:d0,$1:d1};},(dZ=dW.parseHTML(dY),bQ.Equals(dZ,null)?[]:dZ)),b_.Const());};ca.TextNode=function(dY){return ca.Mk({$:5,$0:cY.CreateText(dY)},b_.Const());};ca.get_Empty=function(){return ca.Mk(null,b_.Const());};ca.TextView=function(dY){var dZ;dZ=c$.CreateTextNode();return ca.Mk({$:4,$0:dZ},b_.Map(function(d0){c$.UpdateTextNode(dZ,d0);},dY));};ca.Run=function(dY,dZ){c$.LinkElement(dY,dZ.docNode);ca.RunInPlace(false,dY,dZ);};ca.Async=function(dY){return ca.EmbedView(b_.MapAsync(a.id,b_.Const(dY)));};ca.ConvertBy=function(dY,dZ,d0){return ca.Flatten(b_.MapSeqCachedBy(dY,dZ,d0));};ca.EmbedView=function(dY){var dZ;dZ=c$.CreateEmbedNode();return ca.Mk({$:2,$0:dZ},b_.Map(a.ignore,b_.Bind(function(d0){c$.UpdateEmbedNode(dZ,d0.docNode);return d0.updates;},dY)));};ca.BindView=function(dY,dZ){return ca.EmbedView(b_.Map(dY,dZ));};ca.Append=function(dY,dZ){return ca.Mk({$:0,$0:dY.docNode,$1:dZ.docNode},b_.Map2Unit(dY.updates,dZ.updates));};ca.Mk=function(dY,dZ){return new ca.New(dY,dZ);};ca.Button=function(dY,dZ,d0){var d1;d1=cD.Concat(dZ);return cW.New(ca.Clickable("button",d0),d1,ca.TextNode(dY));};ca.Input=function(dY,dZ){return ca.InputInternal("input",function(){return bT.append(dY,[cB.Value(dZ)]);});};ca.InputArea=function(dY,dZ){return ca.InputInternal("textarea",function(){return bT.append(dY,[cB.Value(dZ)]);});};ca.Convert=function(dY,dZ){return ca.Flatten(b_.MapSeqCached(dY,dZ));};ca.SelectDynOptional=function(dY,dZ,d0,d1,d2){return ca.SelectDyn(dY,function(d3){return d3!=null&&d3.$==1?d0(d3.$0):dZ;},b_.Map(function(d3){return new bZ({$:1,$0:null,$1:bV.map(function(d4){return{$:1,$0:d4};},d3)});},d1),d2);};ca.RunAppend=function(dY,dZ){var d0;d0=self.document.createTextNode("");dY.appendChild(d0);ca.RunBefore(d0,dZ);};ca.RunInPlace=function(dY,dZ,d0){var d1;d1=c$.CreateRunState(dZ,d0.docNode);b_.Sink(dt.get_UseAnimations()||du.BatchUpdatesEnabled()?dv.StartProcessor(c$.PerformAnimatedUpdate(dY,d1,d0.docNode)):function(){c$.PerformSyncUpdate(dY,d1,d0.docNode);},d0.updates);};ca.Flatten=function(dY){return ca.EmbedView(b_.Map(ca.Concat,dY));};ca.Clickable=function(dY,dZ){var d0;d0=cY.CreateElement(dY);d0.addEventListener("click",function(d1){d1.preventDefault();return dZ();},false);return d0;};ca.InputInternal=function(dY,dZ){var d0;d0=cY.CreateElement(dY);return cW.New(d0,cD.Concat(dZ(d0)),ca.get_Empty());};ca.SelectDyn=function(dY,dZ,d0,d1){return ca.SelectImpl(dY,dZ,function(d2){function d3(d4,d5){return ca.Element("option",bV.ofArray([cD.Create("value",a.String(d4))]),bV.ofArray([ca.TextNode(dZ(d5))]));}return ca.Convert(function(d4){return d3(d4[0],d4[1]);},b_.Map(function(d4){d2[0]=d4;return bT.mapi(function(d5,d6){return[d5,d6];},d4);},d0));},d1);};ca.RunBefore=function(dY,dZ){var d0;d0=self.document.createTextNode("");dY.parentNode.insertBefore(d0,dY);ca.RunBetween(d0,dY,dZ);};ca.SelectImpl=function(dY,dZ,d0,d1){var d2,d3,d4,d5;function d6(d$){return d$.selectedIndex;}function d7(d$,ea){d$.selectedIndex=ea;}function d8(d$){var ea;ea=d6(d$);return d2[0].get_Item(ea);}function d9(d$){return bT.findIndex(function(ea){return bQ.Equals(d$,ea);},d2[0]);}function d_(d$,ea){return d7(d$,d9(ea));}d2=[bZ.Empty];d3=cY.CreateElement("select");d4=cB.DynamicCustom(function(d$){return function(ea){return d_(d$,ea);};},d1.get_View());d3.addEventListener("change",function(){d1.UpdateMaybe(function(d$){var ea;ea=d8(d3);return bQ.Equals(d$,ea)?null:{$:1,$0:ea};});},false);return cW.New(d3,(d5=cD.Append(d4,cD.Concat(dY)),cD.Append(cB.OnAfterRender(function(d$){d_(d$,d1.Get());}),d5)),d0(d2));};ca.RunBetween=function(dY,dZ,d0){var d1;c$.LinkPrevElement(dZ,d0.docNode);d1=c$.CreateDelimitedRunState(dY,dZ,d0.docNode);b_.Sink(dt.get_UseAnimations()||du.BatchUpdatesEnabled()?dv.StartProcessor(c$.PerformAnimatedUpdate(false,d1,d0.docNode)):function(){c$.PerformSyncUpdate(false,d1,d0.docNode);},d0.updates);};ca.New=dS.Ctor(function(dY,dZ){r.New.call(this);this.docNode=dY;this.updates=dZ;},ca);cb.TryParseInt32=function(dY,dZ){return cb.TryParse(dY,-2147483648,2147483647,dZ);};cc=b5.Var$1=dS.Class({},r,cc);cc.Create$1=function(dY){return new cZ.New(false,cX.New({$:2,$0:dY,$1:[]}),dY);};cc.Lens=function(dY,dZ,d0){var d1,d2,d3;d1=c3.Id();d2=b_.Map(dZ,dY.get_View());d3=new b$({Get:function(){return dZ(dY.Get());},Set:function(d4){return dY.Update(function(d5){return d0(d5,d4);});},SetFinal:function(d4){return this.Set(d4);},Update:function(d4){return dY.Update(function(d5){return d0(d5,d4(dZ(d5)));});},UpdateMaybe:function(d4){return dY.UpdateMaybe(function(d5){var d6;d6=d4(dZ(d5));return d6==null?null:{$:1,$0:d0(d5,d6.$0)};});},get_View:function(){return d2;},get_Id:function(){return d1;}});b$.New.call(d3);return d3;};cc.Set=function(dY,dZ){dY.Set(dZ);};ce.NewFromSeq=function(dY){var dZ,d0,d1;dZ={};d0=cO.Get(dY);try{while(d0.MoveNext()){d1=d0.Current();dZ[d1[0]]=d1[1];}}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}return dZ;};ch.GetFields=function(dY){var dZ,d0;dZ=[];for(var d1 in dY)dZ.push([d1,dY[d1]]);return dZ;};ch.GetFieldValues=function(dY){var dZ,d0;dZ=[];for(var d1 in dY)dZ.push(dY[d1]);return dZ;};ck.addResizeObserver=function(dY,dZ){var d0,d1,d2,d3;try{d0=!(!a.ResizeObserver);}catch(d4){d0=false;}if(d0){d1=new a.ResizeObserver(dY);ck.set_observers(new bZ({$:1,$0:d1,$1:ck.observers()}));d1.observe(dZ);}else{d2=ck.dimsChanged(dZ);cM.Start((d3=null,cM.Delay(function(){return cM.While(function(){return dZ.isConnected;},cM.Delay(function(){return cM.Bind(cM.Sleep(110),function(){return d2()?(dY(),cM.Zero()):cM.Zero();});}));})),null);}};ck.set_observers=function(dY){bY.$cctor();bY.observers=dY;};ck.observers=function(){bY.$cctor();return bY.observers;};ck.dimsChanged=function(dY){var dZ;dZ=[dY.getBoundingClientRect()];return function(){var d0;d0=dY.getBoundingClientRect();return bQ.Equals(ck.domRect2Tuple(dZ[0]),ck.domRect2Tuple(d0))?false:(dZ[0]=d0,true);};};ck.domRect2Tuple=function(dY){return[dY.top,dY.left,dY.width,dY.height];};b_=b5.View=dS.Class({},null,b_);cl.bindVarEditor=function(dY,dZ,d0,d1,d2){var d3,d4;d3=[0];d4=[0];dY(function(){var d5;d5=dZ();!bQ.Equals(d2.Get(),d5)?(d3[0]=d3[0]+1,d2.Set(d5),d1(d5)):void 0;});b_.Sink(function(){if(d3[0]>d4[0])d4[0]=d3[0];else if(!bQ.Equals(dZ(),d2.Get()))d0(d2.Get());},d2.get_View());};cl.newVar=function(dY,dZ){return co.New(dZ,b_.Const(false),b_.Const([]),null,a.ignore,null,null,null,null,dY);};cl.onRender=function(dY,dZ){return co.New(dZ["var"],dZ.disabled,dZ.annotations,dZ.onChange,dY,dZ.autoCompletion,dZ.toolTip,dZ.declaration,dZ.editorO,dZ.editorHook);};cl.generateDoc=function(dY){var dZ,d0,d1;dZ=(d0=(d1=dY.onChange,d1==null?null:{$:1,$0:d1.$0(dY)}),d0==null?a.ignore:d0.$0);return(dY.editorHook.generateDoc(dY))(function(d2){dY.editorO={$:1,$0:d2};cl.bindVarEditor(dY.editorHook.hookOnChange,dY.editorHook.getValue,dY.editorHook.setValue,dZ,dY["var"]);b_.Sink(dY.editorHook.showAnnotations,dY.annotations);b_.Sink(dY.editorHook.setDisabled,dY.disabled);dY.onRender(dY);});};cm.New=function(dY,dZ){return{line:dY,col:dZ};};cn.ofAsyncResultM=function(dY){return new a.Promise(function(dZ,d0){cM.StartWithContinuations(dY,function(d1){var d2;d2=l.OkM(d1);d2.$==1?d0(j.summarized(d2.$0)):dZ(d2.$0[0]);},function(d1){d0(d1);},function(d1){d0(d1);},null);});};co.New=function(dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7){return{"var":dY,disabled:dZ,annotations:d0,onChange:d1,onRender:d2,autoCompletion:d3,toolTip:d4,declaration:d5,editorO:d6,editorHook:d7};};R.REGEX$1=function(dY,dZ,d0){var d1;return d0===null?null:(d1=(new a.String(d0)).match(new a.RegExp(dY,dZ)),bQ.Equals(d1,null)?null:!bQ.Equals(d1,null)&&d1.length===0?null:{$:1,$0:d1});};cp.New=function(dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9){return{generateDoc:dY,getValue:dZ,setValue:d0,setDisabled:d1,showAnnotations:d2,posFromIndex:d3,indexFromPos:d4,getWordAt:d5,getSelectionText:d6,getUri:d7,setUri:d8,hookOnChange:d9};};cq=b5.ListModel=dS.Class({AppendMany:function(dY){var dZ,d0;function d1(d2,d3){var d4,d5;d4=dZ.key(d3);dZ.ObsoleteKey(d4);d5=bO.tryFindIndex(function(d6){return bQ.Equals(dZ.key(d6),d4);},d2);return d5==null?(d0.push(d3),d2):dZ.storage.SSetAt(d5.$0,d3,d2);}dZ=this;d0=[];this["var"].Set(this.storage.SAppendMany(d0,(((dS.Curried3(bT.fold))(d1))(this["var"].Get()))(dY)));},TryFindByKeyAsView:function(dY){var dZ;dZ=this;return function(){var d0,d1,d2;d0=(d1=null,[dZ.it.TryGetValue(dY,{get:function(){return d1;},set:function(d3){d1=d3;}}),d1]);return d0[0]?d0[1]:(d2=cX.New({$:2,$0:dZ.TryFindByKey(dY),$1:[]}),(dZ.it.Add(dY,d2),d2));};},TryFindByKey:function(dY){var dZ;dZ=this;return bO.tryFind(function(d0){return bQ.Equals(dZ.key(d0),dY);},this["var"].Get());},ContainsKey:function(dY){var dZ;dZ=this;return bO.exists(function(d0){return bQ.Equals(dZ.key(d0),dY);},this["var"].Get());},Lens:function(dY){return this.LensInto(a.id,function(dZ,d0){return d0;},dY);},RemoveByKey:function(dY){var dZ;dZ=this;this["var"].Set(this.storage.SRemoveIf(function(d0){return bQ.Equals(dZ.key(d0),dY);},this["var"].Get()));this.ObsoleteKey(dY);},ContainsKeyAsView:function(dY){var dZ;function d0(d1){return bQ.Equals(dZ.key(d1),dY);}dZ=this;return b_.Map(function(d1){return bO.exists(d0,d1);},this["var"].get_View());},Set:function(dY){this["var"].Set(this.storage.SSet(dY));this.ObsoleteAll();},Append:function(dY){var dZ,d0,d1,d2;dZ=this;d0=this["var"].Get();d1=this.key(dY);d2=bO.tryFindIndex(function(d3){return bQ.Equals(dZ.key(d3),d1);},d0);d2!=null&&d2.$==1?this["var"].Set(this.storage.SSetAt(d2.$0,dY,d0)):this["var"].Set(this.storage.SAppend(dY,d0));this.ObsoleteKey(d1);},ObsoleteKey:function(dY){var dZ,d0;dZ=(d0=null,[this.it.TryGetValue(dY,{get:function(){return d0;},set:function(d1){d0=d1;}}),d0]);dZ[0]?(cX.Obsolete(dZ[1]),this.it.Remove(dY)):void 0;},LensInto:function(dY,dZ,d0){return this["LensInto'"](dY,dZ,d0,b_.Map(dY,this.FindByKeyAsView(d0)));},ObsoleteAll:function(){bT.iter(function(dY){cX.Obsolete(dY.V);},this.it);this.it.Clear();},"LensInto'":function(dY,dZ,d0,d1){var d2,d3,d4;d2=this;d3=c3.Id();d4=new b$({Get:function(){return dY(d2.FindByKey(d0));},Set:function(d5){return d2.UpdateBy(function(d6){return{$:1,$0:dZ(d6,d5)};},d0);},SetFinal:function(d5){return this.Set(d5);},Update:function(d5){return d2.UpdateBy(function(d6){return{$:1,$0:dZ(d6,d5(dY(d6)))};},d0);},UpdateMaybe:function(d5){return d2.UpdateBy(function(d6){var d7;d7=d5(dY(d6));return d7==null?null:{$:1,$0:dZ(d6,d7.$0)};},d0);},get_View:function(){return d1;},get_Id:function(){return d3;}});b$.New.call(d4);return d4;},FindByKeyAsView:function(dY){return b_.Map(function(dZ){return dZ.$0;},this.TryFindByKeyAsView(dY));},MapLens:function(dY){var dZ;dZ=this;return b_.MapSeqCachedViewBy(dZ.key,function(d0,d1){return dY(d0,dZ["LensInto'"](a.id,function(d2,d3){return d3;},d0,d1));},this["var"].get_View());},FindByKey:function(dY){var dZ;dZ=this;return bO.find(function(d0){return bQ.Equals(dZ.key(d0),dY);},this["var"].Get());},UpdateBy:function(dY,dZ){var d0,d1,d2,d3,d4;d0=this;d1=this["var"].Get();d2=bO.tryFindIndex(function(d5){return bQ.Equals(d0.key(d5),dZ);},d1);d2!=null&&d2.$==1?(d3=d2.$0,d4=dY(bO.get(d1,d3)),d4!=null&&d4.$==1?(this["var"].Set(this.storage.SSetAt(d3,d4.$0,d1)),this.ObsoleteKey(dZ)):void 0):void 0;},GetEnumerator:function(){return cO.Get(this["var"].Get());},GetEnumerator0:function(){return cO.Get0(this["var"].Get());}},r,cq);cq.New$1=dS.Ctor(function(dY){cq.New$2.call(this,dY,[]);},cq);cq.New$2=dS.Ctor(function(dY,dZ){var d0;d0=bO.ofSeq(dZ);cq.New$3.call(this,dY,cc.Create$1(d0),dc.InMemory(d0));},cq);cq.New$3=dS.Ctor(function(dY,dZ,d0){r.New.call(this);this.key=dY;this["var"]=dZ;this.storage=d0;this.v=b_.Map(function(d1){return d1.slice();},this["var"].get_View());this.it=new bS.New$5();},cq);cq.New=dS.Ctor(function(dY,dZ){cq.New$3.call(this,dY,cc.Create$1(bO.ofSeq(bT.distinctBy(dY,dZ.SInit()))),dZ);},cq);cu=ct.TemplateInstance=dS.Class({get_Doc:function(){return this.doc;}},r,cu);cu.New=dS.Ctor(function(dY,dZ){r.New.call(this);this.doc=dZ;this.allVars=dY.$==0?dY.$0:bM.FailWith("Should not happen");},cu);cv=ct.ProviderBuilder=dS.Class({WithHole:function(dY){this.h.push(dY);return this;}},null,cv);cv.Make=function(){var dY;return cv.New(null,(dY=bL.NewGuid(),a.String(dY)),[]);};cv.New=function(dY,dZ,d0){return new cv({i:dY,k:dZ,h:d0});};cw.EventQ2=function(dY,dZ,d0,d1){return{$:5,$0:dZ,$1:true,$2:function(d2){return function(d3){return d1({Vars:d0(),Target:d2,Event:d3});};}};};cw.CompleteHoles=function(dY,dZ,d0){var d2,d3,d4,d5,d6,d7;function d1(d8,d9){var d_,d$,ea,eb;return d3.Contains(d8)?null:(d_=d9===0?(d$=cc.Create$1(""),[{$:8,$0:d8,$1:d$},d$]):d9===1?(ea=cc.Create$1(0),[{$:13,$0:d8,$1:ea},ea]):d9===2?(eb=cc.Create$1(false),[{$:9,$0:d8,$1:eb},eb]):bM.FailWith("Invalid value type"),(d2.set_Item(d8,d_[1]),{$:1,$0:d_[0]}));}d2=new bS.New$5();d3=new c5.New$3();d4=cO.Get(dZ);try{while(d4.MoveNext()){d5=d4.Current();(d5.$==8?(d6=[d5.$0,cA.Box(d5.$1)],true):d5.$==11?(d6=[d5.$0,cA.Box(d5.$1)],true):d5.$==10?(d6=[d5.$0,cA.Box(d5.$1)],true):d5.$==13?(d6=[d5.$0,cA.Box(d5.$1)],true):d5.$==12?(d6=[d5.$0,cA.Box(d5.$1)],true):d5.$==9&&(d6=[d5.$0,cA.Box(d5.$1)],true))?(d7=d6[0],d3.Add(d7),d2.set_Item(d7,d6[1])):void 0;}}finally{if(typeof d4=="object"&&"Dispose"in d4)d4.Dispose();}return[bT.append(dZ,bO.choose(function(d8){return d1(d8[0],d8[1]);},d0)),{$:0,$0:d2}];};cx.tile=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"tile"},dY):void 0;};cx.namevalueinput=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},dY):void 0;};cx.namevalue=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"namevalue"},dY):void 0;};cx.action=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"action"},dY):void 0;};cx.actiondisabled=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},dY):void 0;};cy.p$1=function(dY){return"{"+("docName = "+bN.prettyPrint(dY.docName))+"; "+("docDoc = "+cz.p$3(dY.docDoc))+"}";};cx.appframework=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"appframework"},dY):void 0;};cx.wcompsplitterhor=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},dY):void 0;};cx.wcompsplitterver=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},dY):void 0;};cy.p=function(dY){return"{"+("actName = "+bN.prettyPrint(dY.actName))+"; "+("actFunction = "+cz.p$1(dY.actFunction))+"; "+("actEnabled = "+cz.p$2(dY.actEnabled))+"}";};cx.fixedsplitterver=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},dY):void 0;};cx.fixedsplitterhor=function(dY){c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},dY):void 0;};cz.p$28=function(dY){return dY.$==1?"UnQuoted "+bN.prettyPrint(dY.$0):"Quoted "+bN.prettyPrint(dY.$0);};cz.p$4=function(dY){return dY.$==6?"EnPlgRef "+("("+bN.prettyPrint(dY.$0[0])+", "+cz.p$27(dY.$0[1])+")"):dY.$==5?"EnPlgDef "+cz.p$26(dY.$0):dY.$==4?"EnVJSDef "+cz.p$25(dY.$0):dY.$==3?"EnViwDef "+cz.p$24(dY.$0):dY.$==2?"EnVarDef "+cz.p$23(dY.$0):dY.$==1?"EnActDef "+cz.p$22(dY.$0):"EnDocDef "+cz.p$5(dY.$0);};cz.p=function(dY){return dY.$==1?"FullRef ("+bN.prettyPrint(dY.$0)+", "+bN.prettyPrint(dY.$1)+")":"LocalRef "+bN.prettyPrint(dY.$0);};cz.p$18=function(dY){return dY.$==4?"PrActRef "+cz.p$10(dY.$0):dY.$==3?"PrViwRef "+cz.p$14(dY.$0):dY.$==2?"PrVarRef "+cz.p$13(dY.$0):dY.$==1?"PrDocRef "+cz.p$8(dY.$0):"PrTextValL "+bN.printList(function(dZ){return cz.p$12(dZ);},dY.$0);};cx.snippet=function(dY){c1.LoadLocalTemplates("templates");return dY?c1.NamedTemplate("templates",{$:1,$0:"snippet"},dY):void 0;};cx.appfwkclient=function(dY){cx.fixedsplitterhor();cx.fixedsplitterver();c1.LoadLocalTemplates("appframework");return dY?c1.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},dY):void 0;};cz.p$3=function(dY){return dY.$==5?"FunDoc5 (<fun>, "+bN.prettyPrint(dY.$1)+", "+bN.prettyPrint(dY.$2)+", "+bN.prettyPrint(dY.$3)+", "+bN.prettyPrint(dY.$4)+", "+bN.prettyPrint(dY.$5)+")":dY.$==4?"FunDoc4 (<fun>, "+bN.prettyPrint(dY.$1)+", "+bN.prettyPrint(dY.$2)+", "+bN.prettyPrint(dY.$3)+", "+bN.prettyPrint(dY.$4)+")":dY.$==3?"FunDoc3 (<fun>, "+bN.prettyPrint(dY.$1)+", "+bN.prettyPrint(dY.$2)+", "+bN.prettyPrint(dY.$3)+")":dY.$==2?"FunDoc2 (<fun>, "+bN.prettyPrint(dY.$1)+", "+bN.prettyPrint(dY.$2)+")":dY.$==1?"FunDoc1 (<fun>, "+bN.prettyPrint(dY.$1)+")":"LazyDoc "+bN.prettyPrint(dY.$0);};cz.p$1=function(dY){return dY.$==2?"FunAct2 (<fun>, "+bN.prettyPrint(dY.$1)+", "+bN.prettyPrint(dY.$2)+")":dY.$==1?"FunAct1 (<fun>, "+bN.prettyPrint(dY.$1)+")":"FunAct0 <fun>";};cz.p$2=function(dY){return"View <fun>";};cz.p$27=function(dY){return dY.$==4?"RPlg":dY.$==3?"RAct":dY.$==2?"RViw":dY.$==1?"RVar":"RDoc";};cz.p$26=function(dY){return"PlgDef "+bN.prettyPrint(dY.$0);};cz.p$25=function(dY){return"VJSDef "+bN.printList(function(dZ){return cz.p$18(dZ);},dY.$0);};cz.p$24=function(dY){return"ViwDef "+bN.printList(function(dZ){return cz.p$18(dZ);},dY.$0);};cz.p$23=function(dY){return"VarDef "+bN.prettyPrint(dY.$0);};cz.p$22=function(dY){return"ActDef ("+cz.p$10(dY.$0)+", "+bN.printList(function(dZ){return cz.p$18(dZ);},dY.$1)+")";};cz.p$5=function(dY){return dY.$==6?"DcElement "+cz.p$21(dY.$0):dY.$==5?"DcConcat "+cz.p$19(dY.$0):dY.$==4?"DcDocF "+cz.p$17(dY.$0):dY.$==3?"DcTextArea "+cz.p$16(dY.$0):dY.$==2?"DcInput "+cz.p$15(dY.$0):dY.$==1?"DcButton "+cz.p$9(dY.$0):"DcSplitter "+cz.p$6(dY.$0);};cz.p$10=function(dY){return"ActRef "+cz.p(dY.$0);};cz.p$14=function(dY){return"ViwRef "+cz.p(dY.$0);};cz.p$13=function(dY){return"VarRef "+cz.p(dY.$0);};cz.p$8=function(dY){return"DocRef "+cz.p(dY.$0);};cz.p$12=function(dY){return dY.$==4?"TvDocRef "+cz.p$8(dY.$0):dY.$==3?"TvActRef "+cz.p$10(dY.$0):dY.$==2?"TvViwRef "+cz.p$14(dY.$0):dY.$==1?"TvVarRef "+cz.p$13(dY.$0):"TvConst "+bN.prettyPrint(dY.$0);};cz.p$21=function(dY){return"ElementDef ("+bN.prettyPrint(dY.$0)+", "+cz.p$18(dY.$1)+", "+bN.printList(function(dZ){return cz.p$20(dZ);},dY.$2)+")";};cz.p$19=function(dY){return"ConcatDef "+bN.printList(function(dZ){return cz.p$20(dZ);},dY.$0);};cz.p$17=function(dY){return"DocFDef ("+cz.p$8(dY.$0)+", "+bN.printList(function(dZ){return cz.p$18(dZ);},dY.$1)+")";};cz.p$16=function(dY){return"TextAreaDef ("+cz.p$13(dY.$0)+", "+bN.printArray(function(dZ){return cz.p$11(dZ);},dY.$1)+")";};cz.p$15=function(dY){return"InputDef ("+cz.p$13(dY.$0)+", "+bN.printArray(function(dZ){return cz.p$11(dZ);},dY.$1)+")";};cz.p$9=function(dY){return"ButtonDef ("+cz.p$10(dY.$0)+", "+bN.printArray(function(dZ){return cz.p$11(dZ);},dY.$1)+", "+bN.printList(function(dZ){return cz.p$12(dZ);},dY.$2)+")";};cz.p$6=function(dY){return"SplitterDef ("+bN.prettyPrint(dY.$0)+", "+cz.p$7(dY.$1)+", "+cz.p$8(dY.$2)+", "+cz.p$8(dY.$3)+")";};cz.p$20=function(dY){return dY.$==3?"NdViwRef "+cz.p$14(dY.$0):dY.$==2?"NdVarRef "+cz.p$13(dY.$0):dY.$==1?"NdDocRef "+cz.p$8(dY.$0):"NdTextValL "+bN.printList(function(dZ){return cz.p$12(dZ);},dY.$0);};cz.p$11=function(dY){return dY.$==2?"AtAct ("+bN.prettyPrint(dY.$0)+", "+cz.p$10(dY.$1)+")":dY.$==1?"AtAttr ("+bN.prettyPrint(dY.$0)+", "+bN.printList(function(dZ){return cz.p$12(dZ);},dY.$1)+")":"AtStyle ("+bN.prettyPrint(dY.$0)+", "+bN.printList(function(dZ){return cz.p$12(dZ);},dY.$1)+")";};cz.p$7=function(dY){return dY.$==1?"Variable ("+bN.prettyPrint(dY.$0)+", "+bN.prettyPrint(dY.$1)+", "+bN.prettyPrint(dY.$2)+")":"Fixed ("+bN.prettyPrint(dY.$0)+", "+bN.prettyPrint(dY.$1)+")";};cA.Box=a.id;cB.DynamicCustom=function(dY,dZ){return c7.Dynamic(dZ,dY);};cB.DynamicStyle=function(dY,dZ){return c7.Dynamic(dZ,function(d0){return function(d1){return cY.SetStyle(d0,dY,d1);};});};cB.Style=function(dY,dZ){return c7.Static(function(d0){cY.SetStyle(d0,dY,dZ);});};cB.Dynamic=function(dY,dZ){return c7.Dynamic(dZ,function(d0){return function(d1){return cY.SetAttr(d0,dY,d1);};});};cB.DynamicPred=function(dY,dZ,d0){function d1(d2,d3){return d3[0]?cY.SetAttr(d2,dY,d3[1]):cY.RemoveAttr(d2,dY);}return c7.Dynamic(b_.Map2(function(d2,d3){return[d2,d3];},dZ,d0),function(d2){return function(d3){return d1(d2,d3);};});};cB.Value=function(dY){function dZ(d0){return{$:1,$0:d0};}return cB.CustomValue(dY,a.id,function(d0){return dZ(a.id(d0));});};cB.CustomValue=function(dY,dZ,d0){return cB.CustomVar(dY,function(d1,d2){d1.value=dZ(d2);},function(d1){return d0(d1.value);});};cB.CustomVar=function(dY,dZ,d0){function d1(d3,d4){return dY.UpdateMaybe(function(d5){var d6,d7;d6=d0(d3);return d6!=null&&d6.$==1&&(!bQ.Equals(d6.$0,d5)&&(d7=[d6,d6.$0],true))?d7[0]:null;});}function d2(d3,d4){var d5,d6;d5=d0(d3);return d5!=null&&d5.$==1&&(bQ.Equals(d5.$0,d4)&&(d6=d5.$0,true))?null:dZ(d3,d4);}return cD.Concat([cB.Handler("change",function(d3){return function(d4){return d1(d3,d4);};}),cB.Handler("input",function(d3){return function(d4){return d1(d3,d4);};}),cB.Handler("keypress",function(d3){return function(d4){return d1(d3,d4);};}),cB.DynamicCustom(function(d3){return function(d4){return d2(d3,d4);};},dY.get_View())]);};cB.Handler=function(dY,dZ){return c7.Static(function(d0){d0.addEventListener(dY,function(d1){return(dZ(d0))(d1);},false);});};cB.OnAfterRender=function(dY){return new cD({$:4,$0:dY});};cB.Checked=function(dY){function dZ(d0,d1){return!bQ.Equals(dY.Get(),d0.checked)?dY.Set(d0.checked):null;}return cD.Concat([cB.DynamicProp("checked",dY.get_View()),cB.Handler("change",function(d0){return function(d1){return dZ(d0,d1);};})]);};cB.IntValue=function(dY){return cB.CustomVar(dY,function(dZ,d0){var d1;d1=d0.get_Input();return dZ.value!==d1?void(dZ.value=d1):null;},function(dZ){var d0,d1,d2;d0=dZ.value;return{$:1,$0:dL.isBlank(d0)?(dZ.checkValidity?dZ.checkValidity():true)?new dk({$:2,$0:d0}):new dk({$:1,$0:d0}):(d1=(d2=0,[cb.TryParseInt32(d0,{get:function(){return d2;},set:function(d3){d2=d3;}}),d2]),d1[0]?new dk({$:0,$0:d1[1],$1:d0}):new dk({$:1,$0:d0}))};});};cB.IntValueUnchecked=function(dY){return cB.CustomValue(dY,a.String,function(dZ){var d0;return dL.isBlank(dZ)?{$:1,$0:0}:(d0=+dZ,d0!==d0>>0?null:{$:1,$0:d0});});};cB.FloatValue=function(dY){return cB.CustomVar(dY,function(dZ,d0){var d1;d1=d0.get_Input();return dZ.value!==d1?void(dZ.value=d1):null;},function(dZ){var d0,d1;d0=dZ.value;return{$:1,$0:dL.isBlank(d0)?(dZ.checkValidity?dZ.checkValidity():true)?new dk({$:2,$0:d0}):new dk({$:1,$0:d0}):(d1=+d0,a.isNaN(d1)?new dk({$:1,$0:d0}):new dk({$:0,$0:d1,$1:d0}))};});};cB.FloatValueUnchecked=function(dY){return cB.CustomValue(dY,a.String,function(dZ){var d0;return dL.isBlank(dZ)?{$:1,$0:0}:(d0=+dZ,a.isNaN(d0)?null:{$:1,$0:d0});});};cB.DynamicProp=function(dY,dZ){return c7.Dynamic(dZ,function(d0){return function(d1){d0[dY]=d1;};});};cC.Create=function(dY){return c9.New(false,dY,cC.forceLazy);};cC.forceLazy=function(){var dY;dY=this.v();this.c=true;this.v=dY;this.f=cC.cachedLazy;return dY;};cC.cachedLazy=function(){return this.v;};cD=b5.AttrProxy=dS.Class({},null,cD);cD.Create=function(dY,dZ){return c7.Static(function(d0){cY.SetAttr(d0,dY,dZ);});};cD.Concat=function(dY){var dZ;dZ=c_.ofSeqNonCopying(dY);return c_.TreeReduce(c7.EmptyAttr(),cD.Append,dZ);};cD.HandlerImpl=function(dY,dZ){return c7.Static(function(d0){d0.addEventListener(dY,function(d1){return(dZ(d0))(d1);},false);});};cD.OnAfterRenderImpl=function(dY){return new cD({$:4,$0:dY});};cD.Append=function(dY,dZ){return c7.AppendTree(dY,dZ);};cD.Handler=function(dY,dZ){return cD.HandlerImpl(dY,dZ);};cF=q.MatchFailureException=dS.Class({},cE,cF);cF.New=dS.Ctor(function(dY,dZ,d0){this.message=dY+" at "+a.String(dZ)+":"+a.String(d0);cN.setPrototypeOf(this,cF.prototype);},cF);cG.traverseSeq=function(dY,dZ){return cG.map(a.id,bO.foldBack(function(d0,d1){return cG.op_GreaterGreaterEquals(dY(d0),function(d2){return cG.op_GreaterGreaterEquals(d1,function(d3){return cG.rtn(new bZ({$:1,$0:d2,$1:d3}));});});},bO.ofSeq(dZ),cG.rtn(bZ.Empty)));};cG.insertWO=function(dY){return dY==null?b_.Const(null):b_.Map(function(dZ){return{$:1,$0:dZ};},dY.$0);};cG.rtn=function(dY){return b_.Const(dY);};cG.map=function(dY,dZ){return b_.Map(dY,dZ);};cG.op_GreaterGreaterEquals=function(dY,dZ){return cG.bind(dZ,dY);};cG.bind=function(dY,dZ){return b_.Bind(dY,dZ);};cH.refreshLM=function(dY,dZ){var d0;dY.AppendMany(dZ);d0=new b3.New(bT.map(dY.key,dZ));bT.iter(function(d1){if(!d0.Contains(dY.key(d1)))dY.RemoveByKey(dY.key(d1));},bT.cache(dY));};cI.B={$:0};cq.Create=function(dY,dZ){return cq.CreateWithStorage(dY,dc.InMemory(bO.ofSeq(dZ)));};cq.CreateWithStorage=function(dY,dZ){return new cq.New(dY,dZ);};cK.deserializeWithDefs=function(dY,dZ){return cK.deserialize(function(){return{$:1,$0:0};},function(){return{$:1,$0:0};},function(){return{$:1,$0:""};},function(){return{$:1,$0:false};},function(){return{$:1,$0:[]};},dY,dZ);};cK.deserialize=function(dY,dZ,d0,d1,d2,d3,d4){var d5,d6;function d7(d9){return dX.parse(d9);}function d8(d9){return cK.getJsonIntermediate(dY,dZ,d0,d1,d2,d9);}d5=function(d9){return d8(d7(d9));};d6=[d3,d4][1];return function(d9){return d6(d5(d9));};};cK.getJsonIntermediate=function(dY,dZ,d0,d1,d2,d3){function d4(d5){return cK.getJsonIntermediate(dY,dZ,d0,d1,d2,d5);}return M.New(function(){var d5;d5=!d3?null:typeof d3=="number"?{$:1,$0:d3}:null;return d5==null?dY():d5;},function(){var d5;d5=!d3?null:typeof d3=="number"?{$:1,$0:d3}:null;return d5==null?dZ():d5;},function(){var d5;d5=!d3?null:typeof d3=="string"?{$:1,$0:d3}:null;return d5==null?d0():d5;},function(){var d5;d5=!d3?null:typeof d3=="boolean"?{$:1,$0:d3}:null;return d5==null?d1():d5;},function(){var d5;d5=!d3?null:d3 instanceof a.Array?{$:1,$0:bO.map(d4,d3)}:null;return d5==null?d2(d4):d5;},function(d5){var d6;return!d3?null:(d6=d3[d5],bQ.Equals(d6,null)?{$:1,$0:d4(null)}:!d6?null:{$:1,$0:d4(d6)});},function(){return bQ.Equals(typeof d3,"object")&&!bQ.Equals(d3,null);},function(){return bQ.Equals(d3,null);},function(){return(function(d5){return function(d6){return d5(bN.prettyPrint(d6));};}(a.id))(d3);});};cL.html=function(){bY.$cctor();return bY.html;};cM.Delay=function(dY){return function(dZ){try{(dY(null))(dZ);}catch(d0){dZ.k({$:1,$0:d0});}};};cM.Bind=function(dY,dZ){return cM.checkCancel(function(d0){dY(dd.New(function(d1){var d2;if(d1.$==0){d2=d1.$0;cM.scheduler().Fork(function(){try{(dZ(d2))(d0);}catch(d3){d0.k({$:1,$0:d3});}});}else cM.scheduler().Fork(function(){d0.k(d1);});},d0.ct));});};cM.Return=function(dY){return function(dZ){dZ.k({$:0,$0:dY});};};cM.Start=function(dY,dZ){var d0,d1;d0=(d1=(cM.defCTS())[0],dZ==null?d1:dZ.$0);cM.scheduler().Fork(function(){if(!d0.c)dY(dd.New(function(d2){if(d2.$==1)cM.UncaughtAsyncError(d2.$0);},d0));});};cM.Sleep=function(dY){return function(dZ){var d0,d1;d0=void 0;d1=void 0;d0=a.setTimeout(function(){d1.Dispose();cM.scheduler().Fork(function(){dZ.k({$:0,$0:null});});},dY);d1=cM.Register(dZ.ct,function(){a.clearTimeout(d0);cM.scheduler().Fork(function(){cM.cancel(dZ);});});};};cM.Zero=function(){df.$cctor();return df.Zero;};cM.StartChild=function(dY,dZ){return function(d0){var d1,d2,d3,d4;d1=[true];d2=[null];d3=[];d4=dZ!=null&&dZ.$==1?{$:1,$0:a.setTimeout(function(){var d5;d1[0]=false;d5={$:1,$0:new dh.New()};while(d3.length>0)(d3.shift())(d5);},dZ.$0)}:null;cM.scheduler().Fork(function(){if(!d0.ct.c)dY(dd.New(function(d5){if(d1[0]){d2[0]={$:1,$0:d5};d4!=null&&d4.$==1?a.clearTimeout(d4.$0):void 0;while(d3.length>0)(d3.shift())(d5);}},d0.ct));});d0.k({$:0,$0:function(d5){var d6;if(d1[0]){d6=d2[0];d6==null?d3.push(d5.k):d5.k(d6.$0);}else d5.k({$:1,$0:new dh.New()});}});};};cM.TryWith=function(dY,dZ){return function(d0){dY(dd.New(function(d1){if(d1.$==0)d0.k({$:0,$0:d1.$0});else if(d1.$==1)try{(dZ(d1.$0))(d0);}catch(d2){d0.k(d1);}else d0.k(d1);},d0.ct));};};cM.TryFinally=function(dY,dZ){return function(d0){dY(dd.New(function(d1){try{dZ();d0.k(d1);}catch(d2){d0.k({$:1,$0:d2});}},d0.ct));};};cM.Using=function(dY,dZ){return cM.TryFinally(dZ(dY),function(){dY.Dispose();});};cM.checkCancel=function(dY){return function(dZ){if(dZ.ct.c)cM.cancel(dZ);else dY(dZ);};};cM.defCTS=function(){df.$cctor();return df.defCTS;};cM.UncaughtAsyncError=function(dY){dQ.log("WebSharper: Uncaught asynchronous exception",dY);};cM.Register=function(dY,dZ){var d0;return dY===cM.noneCT()?{Dispose:function(){return null;}}:(d0=dY.r.push(dZ)-1,{Dispose:function(){return bO.set(dY.r,d0,a.ignore);}});};cM.cancel=function(dY){dY.k({$:2,$0:new _do.New(dY.ct)});};cM.FromContinuations=function(dY){return function(dZ){var d0;function d1(d2){if(d0[0])bM.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{d0[0]=true;cM.scheduler().Fork(d2);}}d0=[false];dY(function(d2){d1(function(){dZ.k({$:0,$0:d2});});},function(d2){d1(function(){dZ.k({$:1,$0:d2});});},function(d2){d1(function(){dZ.k({$:2,$0:d2});});});};};cM.While=function(dY,dZ){return dY()?cM.Bind(dZ,function(){return cM.While(dY,dZ);}):cM.Return();};cM.StartWithContinuations=function(dY,dZ,d0,d1,d2){var d3,d4;d3=(d4=(cM.defCTS())[0],d2==null?d4:d2.$0);!d3.c?dY(dd.New(function(d5){if(d5.$==1)d0(d5.$0);else if(d5.$==2)d1(d5.$0);else dZ(d5.$0);},d3)):void 0;};cM.scheduler=function(){df.$cctor();return df.scheduler;};cM.noneCT=function(){df.$cctor();return df.noneCT;};cO.Get=function(dY){return dY instanceof a.Array?cO.ArrayEnumerator(dY):bQ.Equals(typeof dY,"string")?cO.StringEnumerator(dY):dY.GetEnumerator();};cO.ArrayEnumerator=function(dY){return new cP.New(0,null,function(dZ){var d0;d0=dZ.s;return d0<bO.length(dY)&&(dZ.c=bO.get(dY,d0),dZ.s=d0+1,true);},void 0);};cO.StringEnumerator=function(dY){return new cP.New(0,null,function(dZ){var d0;d0=dZ.s;return d0<dY.length&&(dZ.c=dY[d0],dZ.s=d0+1,true);},void 0);};cO.Get0=function(dY){return dY instanceof a.Array?cO.ArrayEnumerator(dY):bQ.Equals(typeof dY,"string")?cO.StringEnumerator(dY):"GetEnumerator0"in dY?dY.GetEnumerator0():dY.GetEnumerator();};cP=cO.T=dS.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},r,cP);cP.New=dS.Ctor(function(dY,dZ,d0,d1){r.New.call(this);this.s=dY;this.c=dZ;this.n=d0;this.d=d1;},cP);cQ.alreadyAdded=function(){return bM.FailWith("An item with the same key has already been added.");};cQ.notPresent=function(){return bM.FailWith("The given key was not present in the dictionary.");};cR=q.AggregateException=dS.Class({},cE,cR);cR.New$3=dS.Ctor(function(dY){cR.New$4.call(this,"One or more errors occurred.",dY);},cR);cR.New$4=dS.Ctor(function(dY,dZ){this.message=dY;cN.setPrototypeOf(this,cR.prototype);this.innerExceptions=dZ;},cR);cb.TryParseInt64=function(dY,dZ){return cb.TryParse(dY,-9223372036854775808,9223372036854775807,dZ);};cT.OfSeq=function(dY){var dZ;dZ=bO.ofSeq(bT.distinct(dY));bO.sortInPlace(dZ);return cT.Build(dZ,0,dZ.length-1);};cT.Remove=function(dY,dZ){var d0,d1,d2,d3;d0=cT.Lookup(dY,dZ);d1=d0[0];d2=d0[1];return d1==null?dZ:d1.Right==null?cT.Rebuild(d2,d1.Left):d1.Left==null?cT.Rebuild(d2,d1.Right):cT.Rebuild(d2,(d3=bO.ofSeq(bT.append(cT.Enumerate(false,d1.Left),cT.Enumerate(false,d1.Right))),cT.Build(d3,0,d3.length-1)));};cT.Add=function(dY,dZ){return cT.Put(function(d0,d1){return d1;},dY,dZ);};cT.TryFind=function(dY,dZ){var d0;d0=(cT.Lookup(dY,dZ))[0];return d0==null?null:{$:1,$0:d0.Node};};cT.Contains=function(dY,dZ){return!((cT.Lookup(dY,dZ))[0]==null);};cT.Build=function(dY,dZ,d0){var d1,d2,d3;return d0-dZ+1<=0?null:(d1=(dZ+d0)/2>>0,(d2=cT.Build(dY,dZ,d1-1),(d3=cT.Build(dY,d1+1,d0),cT.Branch(bO.get(dY,d1),d2,d3))));};cT.Lookup=function(dY,dZ){var d0,d1,d2,d3;d0=[];d1=dZ;d2=true;while(d2)if(d1==null)d2=false;else{d3=bQ.Compare(dY,d1.Node);d3===0?d2=false:d3===1?(d0.unshift([true,d1.Node,d1.Left]),d1=d1.Right):(d0.unshift([false,d1.Node,d1.Right]),d1=d1.Left);}return[d1,d0];};cT.Rebuild=function(dY,dZ){var d0,d2,d3,d4,d5,d6,d7,d8,d9,d_;function d1(d$){return d$==null?0:d$.Height;}d0=dZ;for(d2=0,d3=bO.length(dY)-1;d2<=d3;d2++){d0=(d4=bO.get(dY,d2),d4[0]?(d5=d4[1],(d6=d4[2],d1(d0)>d1(d6)+1?d1(d0.Left)===d1(d0.Right)+1?(d7=d0.Left,cT.Branch(d7.Node,cT.Branch(d5,d6,d7.Left),cT.Branch(d0.Node,d7.Right,d0.Right))):cT.Branch(d0.Node,cT.Branch(d5,d6,d0.Left),d0.Right):cT.Branch(d5,d6,d0))):(d8=d4[1],(d9=d4[2],d1(d0)>d1(d9)+1?d1(d0.Right)===d1(d0.Left)+1?(d_=d0.Right,cT.Branch(d_.Node,cT.Branch(d0.Node,d0.Left,d_.Left),cT.Branch(d8,d_.Right,d9))):cT.Branch(d0.Node,d0.Left,cT.Branch(d8,d0.Right,d9)):cT.Branch(d8,d0,d9))));}return d0;};cT.Put=function(dY,dZ,d0){var d1,d2;d1=cT.Lookup(dZ,d0);d2=d1[0];return d2==null?cT.Rebuild(d1[1],cT.Branch(dZ,null,null)):cT.Rebuild(d1[1],cT.Branch(dY(d2.Node,dZ),d2.Left,d2.Right));};cT.Enumerate=function(dY,dZ){function d0(d1,d2){var d3;while(true)if(d1==null)return d2.$==1?{$:1,$0:[d2.$0[0],[d2.$0[1],d2.$1]]}:null;else if(dY){d3=d1;d1=d3.Right;d2=new bZ({$:1,$0:[d3.Node,d3.Left],$1:d2});}else{d3=d1;d1=d3.Left;d2=new bZ({$:1,$0:[d3.Node,d3.Right],$1:d2});}}return bT.unfold(function(d1){return d0(d1[0],d1[1]);},[dZ,bZ.Empty]);};cT.Branch=function(dY,dZ,d0){var d1,d2;return cV.New(dY,dZ,d0,1+(d1=dZ==null?0:dZ.Height,(d2=d0==null?0:d0.Height,bQ.Compare(d1,d2)===1?d1:d2)),1+(dZ==null?0:dZ.Count)+(d0==null?0:d0.Count));};cU.fromSeq=function(dY){var dZ;dZ=bO.ofSeq(bT.delay(function(){return bT.collect(function(d0){return[da.New(d0[0],d0[1])];},bT.distinctBy(function(d0){return d0[0];},dY));}));bO.sortInPlace(dZ);return cT.Build(dZ,0,dZ.length-1);};cV.New=function(dY,dZ,d0,d1,d2){return{Node:dY,Left:dZ,Right:d0,Height:d1,Count:d2};};bT.insufficient=function(){return bM.FailWith("The input sequence has an insufficient number of elements.");};bT.tryItem=function(dY,dZ){var d0,d1,d2;if(dY<0)return null;else{d0=0;d1=cO.Get(dZ);try{d2=true;while(d2&&d0<=dY)if(d1.MoveNext())d0=d0+1;else d2=false;return d2?{$:1,$0:d1.Current()}:null;}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}}};bT.tryHead=function(dY){var dZ;dZ=cO.Get(dY);try{return dZ.MoveNext()?{$:1,$0:dZ.Current()}:null;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bO.groupBy=function(dY,dZ){var d0,d1,d2,d3,d4,d5;d0=new bS.New$5();d1=[];for(d2=0,d3=bO.length(dZ)-1;d2<=d3;d2++){d4=dZ[d2];d5=dY(d4);d0.ContainsKey(d5)?d0.get_Item(d5).push(d4):(d1.push(d5),d0.Add(d5,[d4]));}bO.mapInPlace(function(d6){return[d6,d0.get_Item(d6)];},d1);return d1;};bT.last=function(dY){var dZ,d0;dZ=cO.Get(dY);try{if(!dZ.MoveNext())d0=bT.insufficient();else{while(dZ.MoveNext());d0=dZ.Current();}return d0;}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}};bT.contains=function(dY,dZ){var d0,d1;d0=cO.Get(dZ);try{d1=false;while(!d1&&d0.MoveNext())d1=bQ.Equals(d0.Current(),dY);return d1;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}};bO.mapiInPlace=function(dY,dZ){var d0,d1;for(d0=0,d1=dZ.length-1;d0<=d1;d0++)dZ[d0]=dY(d0,dZ[d0]);return dZ;};bO.mapInPlace=function(dY,dZ){var d0,d1;for(d0=0,d1=dZ.length-1;d0<=d1;d0++)dZ[d0]=dY(dZ[d0]);};bT.nonNegative=function(){return bM.FailWith("The input must be non-negative.");};cW=b5.Elt=dS.Class({on:function(dY,dZ){var d0;d0=this;this.elt.addEventListener(dY,function(d1){return dZ(d0.elt,d1);},false);return this;}},ca,cW);cW.New=function(dY,dZ,d0){var d1,d2;d1=c$.CreateElemNode(dY,dZ,d0.docNode);d2=dq.Create(d0.updates);return new cW.New$1({$:1,$0:d1},b_.Map2Unit(c7.Updates(d1.Attr),d2.v),dY,d2);};cW.TreeNode=function(dY,dZ){var d0,d1;function d2(d3){return d3[1];}d0=dq.Create(dZ);return new cW.New$1({$:6,$0:dY},b_.Map2Unit((d1=bO.map(function(d3){return c7.Updates(d2(d3));},dY.Attrs),c_.TreeReduce(b_.Const(),b_.Map2Unit,d1)),d0.v),bO.get(dY.Els,0),d0);};cW.New$1=dS.Ctor(function(dY,dZ,d0,d1){ca.New.call(this,dY,dZ);this.docNode$1=dY;this.updates$1=dZ;this.elt=d0;this.rvUpdates=d1;},cW);cX.Map=function(dY,dZ){var d0,d1;d0=dZ.s;return d0!=null&&d0.$==0?cX.New({$:0,$0:dY(d0.$0)}):(d1=cX.New({$:3,$0:[],$1:[]}),(cX.When(dZ,function(d2){cX.MarkDone(d1,dZ,dY(d2));},d1),d1));};cX.WhenRun=function(dY,dZ,d0){var d1;d1=dY.s;d1==null?d0():d1!=null&&d1.$==2?(d1.$1.push(d0),dZ(d1.$0)):d1!=null&&d1.$==3?(d1.$0.push(dZ),d1.$1.push(d0)):dZ(d1.$0);};cX.Map2=function(dY,dZ,d0){var d1,d2,d3;function d4(d5){var d6,d7,d8;if(!(d6=d3.s,d6!=null&&d6.$==0||d6!=null&&d6.$==2)){d7=cX.ValueAndForever(dZ);d8=cX.ValueAndForever(d0);d7!=null&&d7.$==1?d8!=null&&d8.$==1?d7.$0[1]&&d8.$0[1]?cX.MarkForever(d3,dY(d7.$0[0],d8.$0[0])):cX.MarkReady(d3,dY(d7.$0[0],d8.$0[0])):void 0:void 0;}}d1=dZ.s;d2=d0.s;return d1!=null&&d1.$==0?d2!=null&&d2.$==0?cX.New({$:0,$0:dY(d1.$0,d2.$0)}):cX.Map2Opt1(dY,d1.$0,d0):d2!=null&&d2.$==0?cX.Map2Opt2(dY,d2.$0,dZ):(d3=cX.New({$:3,$0:[],$1:[]}),(cX.When(dZ,d4,d3),cX.When(d0,d4,d3),d3));};cX.WhenObsoleteRun=function(dY,dZ){var d0;d0=dY.s;d0==null?dZ():d0!=null&&d0.$==2?d0.$1.push(dZ):d0!=null&&d0.$==3?d0.$1.push(dZ):void 0;};cX.When=function(dY,dZ,d0){var d1;d1=dY.s;d1==null?cX.Obsolete(d0):d1!=null&&d1.$==2?(cX.EnqueueSafe(d1.$1,d0),dZ(d1.$0)):d1!=null&&d1.$==3?(d1.$0.push(dZ),cX.EnqueueSafe(d1.$1,d0)):dZ(d1.$0);};cX.MarkDone=function(dY,dZ,d0){var d1;if(d1=dZ.s,d1!=null&&d1.$==0)cX.MarkForever(dY,d0);else cX.MarkReady(dY,d0);};cX.Map2Opt1=function(dY,dZ,d0){return cX.Map(function(d1){return dY(dZ,d1);},d0);};cX.Map2Opt2=function(dY,dZ,d0){return cX.Map(function(d1){return dY(d1,dZ);},d0);};cX.ValueAndForever=function(dY){var dZ;dZ=dY.s;return dZ!=null&&dZ.$==0?{$:1,$0:[dZ.$0,true]}:dZ!=null&&dZ.$==2?{$:1,$0:[dZ.$0,false]}:null;};cX.MarkForever=function(dY,dZ){var d0,d1,d2,d3;d0=dY.s;if(d0!=null&&d0.$==3){dY.s={$:0,$0:dZ};d1=d0.$0;for(d2=0,d3=bO.length(d1)-1;d2<=d3;d2++)(bO.get(d1,d2))(dZ);}else void 0;};cX.MarkReady=function(dY,dZ){var d0,d1,d2,d3;d0=dY.s;if(d0!=null&&d0.$==3){dY.s={$:2,$0:dZ,$1:d0.$1};d1=d0.$0;for(d2=0,d3=bO.length(d1)-1;d2<=d3;d2++)(bO.get(d1,d2))(dZ);}else void 0;};cX.Join=function(dY){var dZ;dZ=cX.New({$:3,$0:[],$1:[]});cX.When(dY,function(d0){var d1;d1=d0();cX.When(d1,function(d2){var d3,d4;if((d3=d1.s,d3!=null&&d3.$==0)&&(d4=dY.s,d4!=null&&d4.$==0))cX.MarkForever(dZ,d2);else cX.MarkReady(dZ,d2);},dZ);},dZ);return dZ;};cX.EnqueueSafe=function(dY,dZ){var d0,d1,d2,d3;dY.push(dZ);if(dY.length%20===0){d0=dY.slice(0);dI.Clear(dY);for(d1=0,d2=bO.length(d0)-1;d1<=d2;d1++){d3=bO.get(d0,d1);typeof d3=="object"?function(d4){if(d4.s)dY.push(d4);}(d3):function(d4){dY.push(d4);}(d3);}}else void 0;};cX.MapAsync=function(dY,dZ){var d0;d0=cX.New({$:3,$0:[],$1:[]});cX.When(dZ,function(d1){db.StartTo(dY(d1),function(d2){cX.MarkDone(d0,dZ,d2);});},d0);return d0;};cX.TryGet=function(dY){var dZ,d0;dZ=dY.s;return(dZ!=null&&dZ.$==0?(d0=dZ.$0,true):dZ!=null&&dZ.$==2&&(d0=dZ.$0,true))?{$:1,$0:d0}:null;};cX.Map2Unit=function(dY,dZ){var d0,d1,d2;function d3(){var d4,d5,d6;if(!(d4=d2.s,d4!=null&&d4.$==0||d4!=null&&d4.$==2)){d5=cX.ValueAndForever(dY);d6=cX.ValueAndForever(dZ);d5!=null&&d5.$==1?d6!=null&&d6.$==1?d5.$0[1]&&d6.$0[1]?cX.MarkForever(d2,null):cX.MarkReady(d2,null):void 0:void 0;}}d0=dY.s;d1=dZ.s;return d0!=null&&d0.$==0?d1!=null&&d1.$==0?cX.New({$:0,$0:null}):dZ:d1!=null&&d1.$==0?dY:(d2=cX.New({$:3,$0:[],$1:[]}),(cX.When(dY,d3,d2),cX.When(dZ,d3,d2),d2));};cX.Copy=function(dY){var dZ,d0,d1;dZ=dY.s;return dZ==null?dY:dZ!=null&&dZ.$==2?(d0=cX.New({$:2,$0:dZ.$0,$1:[]}),(cX.WhenObsolete(dY,d0),d0)):dZ!=null&&dZ.$==3?(d1=cX.New({$:3,$0:[],$1:[]}),(cX.When(dY,function(d2){cX.MarkDone(d1,dY,d2);},d1),d1)):dY;};cX.WhenObsolete=function(dY,dZ){var d0;d0=dY.s;d0==null?cX.Obsolete(dZ):d0!=null&&d0.$==2?cX.EnqueueSafe(d0.$1,dZ):d0!=null&&d0.$==3?cX.EnqueueSafe(d0.$1,dZ):void 0;};cX.Map3=function(dY,dZ,d0,d1){var d2,d3,d4,d5;function d6(d7){var d8,d9,d_,d$;if(!(d8=d5.s,d8!=null&&d8.$==0||d8!=null&&d8.$==2)){d9=cX.ValueAndForever(dZ);d_=cX.ValueAndForever(d0);d$=cX.ValueAndForever(d1);d9!=null&&d9.$==1?d_!=null&&d_.$==1?d$!=null&&d$.$==1?d9.$0[1]&&d_.$0[1]&&d$.$0[1]?cX.MarkForever(d5,dY(d9.$0[0],d_.$0[0],d$.$0[0])):cX.MarkReady(d5,dY(d9.$0[0],d_.$0[0],d$.$0[0])):void 0:void 0:void 0;}}d2=dZ.s;d3=d0.s;d4=d1.s;return d2!=null&&d2.$==0?d3!=null&&d3.$==0?d4!=null&&d4.$==0?cX.New({$:0,$0:dY(d2.$0,d3.$0,d4.$0)}):cX.Map3Opt1(dY,d2.$0,d3.$0,d1):d4!=null&&d4.$==0?cX.Map3Opt2(dY,d2.$0,d4.$0,d0):cX.Map3Opt3(dY,d2.$0,d0,d1):d3!=null&&d3.$==0?d4!=null&&d4.$==0?cX.Map3Opt4(dY,d3.$0,d4.$0,dZ):cX.Map3Opt5(dY,d3.$0,dZ,d1):d4!=null&&d4.$==0?cX.Map3Opt6(dY,d4.$0,dZ,d0):(d5=cX.New({$:3,$0:[],$1:[]}),(cX.When(dZ,d6,d5),cX.When(d0,d6,d5),cX.When(d1,d6,d5),d5));};cX.Sequence=function(dY){var dZ,d0,d1;function d2(d3){var d4;if(d1[0]===0){d4=bO.map(function(d5){var d6;d6=d5.s;return d6!=null&&d6.$==0?d6.$0:d6!=null&&d6.$==2?d6.$0:bM.FailWith("value not found by View.Sequence");},dZ);bO.forall(function(d5){var d6;d6=d5.s;return d6!=null&&d6.$==0;},dZ)?cX.MarkForever(d0,d4):cX.MarkReady(d0,d4);}else d1[0]--;}dZ=bO.ofSeq(dY);return dZ.length==0?cX.New({$:0,$0:[]}):(d0=cX.New({$:3,$0:[],$1:[]}),(d1=[bO.length(dZ)-1],(bO.iter(function(d3){cX.When(d3,d2,d0);},dZ),d0)));};cX.Map3Opt1=function(dY,dZ,d0,d1){return cX.Map(function(d2){return dY(dZ,d0,d2);},d1);};cX.Map3Opt2=function(dY,dZ,d0,d1){return cX.Map(function(d2){return dY(dZ,d2,d0);},d1);};cX.Map3Opt3=function(dY,dZ,d0,d1){return cX.Map2(function(d2,d3){return dY(dZ,d2,d3);},d0,d1);};cX.Map3Opt4=function(dY,dZ,d0,d1){return cX.Map(function(d2){return dY(d2,dZ,d0);},d1);};cX.Map3Opt5=function(dY,dZ,d0,d1){return cX.Map2(function(d2,d3){return dY(d2,dZ,d3);},d0,d1);};cX.Map3Opt6=function(dY,dZ,d0,d1){return cX.Map2(function(d2,d3){return dY(d2,d3,dZ);},d0,d1);};cY.CreateElement=function(dY){return cY.Doc().createElement(dY);};cY.SetStyle=function(dY,dZ,d0){cY.SetProperty(dY.style,dZ,d0);};cY.SetAttr=function(dY,dZ,d0){dY.setAttribute(dZ,d0);};cY.CreateText=function(dY){return cY.Doc().createTextNode(dY);};cY.Doc=function(){dr.$cctor();return dr.Doc;};cY.SetProperty=function(dY,dZ,d0){return dY.setProperty(dZ,d0);};cY.RemoveAttr=function(dY,dZ){dY.removeAttribute(dZ);};cY.RemoveClass=function(dY,dZ){var d0;cY.setClass(dY,(d0=cY.clsRE(dZ),cY.getClass(dY).replace(d0,function(d1,d2,d3){return d2===""||d3===""?"":" ";})));};cY.AddClass=function(dY,dZ){var d0;d0=cY.getClass(dY);d0===""?cY.setClass(dY,dZ):!cY.clsRE(dZ).test(d0)?cY.setClass(dY,d0+" "+dZ):void 0;};cY.ChildrenArray=function(dY){var dZ,d0,d1;dZ=[];for(d0=0,d1=dY.childNodes.length-1;d0<=d1;d0++)dZ.push(dY.childNodes[d0]);return dZ;};cY.setClass=function(dY,dZ){if(dY instanceof a.SVGElement)dY.setAttribute("class",dZ);else dY.className=dZ;};cY.getClass=function(dY){return dY instanceof a.SVGElement?dY.getAttribute("class"):dY.className;};cY.clsRE=function(dY){return new a.RegExp("(\\s+|^)"+dY+"(?:\\s+"+dY+")*(\\s+|$)","g");};cY.IterSelector=function(dY,dZ,d0){var d1,d2,d3;d1=dY.querySelectorAll(dZ);for(d2=0,d3=d1.length-1;d2<=d3;d2++)d0(d1[d2]);};cY.InsertAt=function(dY,dZ,d0){var d1;if(!(d0.parentNode===dY&&dZ===(d1=d0.nextSibling,bQ.Equals(d1,null)?null:d1)))dY.insertBefore(d0,dZ);};cY.RemoveNode=function(dY,dZ){if(dZ.parentNode===dY)dY.removeChild(dZ);};cZ=b5.ConcreteVar=dS.Class({get_View:function(){return this.view;},Set:function(dY){if(this.isConst)(function(dZ){return dZ("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(dZ){dQ.log(dZ);}));else{cX.Obsolete(this.snap);this.current=dY;this.snap=cX.New({$:2,$0:dY,$1:[]});}},Get:function(){return this.current;},Update:function(dY){this.Set(dY(this.Get()));},UpdateMaybe:function(dY){var dZ;dZ=dY(this.Get());dZ!=null&&dZ.$==1?this.Set(dZ.$0):void 0;}},b$,cZ);cZ.New=dS.Ctor(function(dY,dZ,d0){var d1;d1=this;b$.New.call(this);this.isConst=dY;this.current=d0;this.snap=dZ;this.view=function(){return d1.snap;};this.id=c3.Int();},cZ);c1.LoadLocalTemplates=function(dY){!c1.LocalTemplatesLoaded()?(c1.set_LocalTemplatesLoaded(true),c1.LoadNestedTemplates(self.document.body,"")):void 0;c1.LoadedTemplates().set_Item(dY,c1.LoadedTemplateFile(""));};c1.NamedTemplate=function(dY,dZ,d0){var d1,d2;d1=(d2=null,[c1.LoadedTemplateFile(dY).TryGetValue(dZ==null?"":dZ.$0,{get:function(){return d2;},set:function(d3){d2=d3;}}),d2]);return d1[0]?c1.ChildrenTemplate(d1[1].cloneNode(true),d0):(dQ.warn("Local template doesn't exist",dZ),ca.get_Empty());};c1.LocalTemplatesLoaded=function(){ds.$cctor();return ds.LocalTemplatesLoaded;};c1.set_LocalTemplatesLoaded=function(dY){ds.$cctor();ds.LocalTemplatesLoaded=dY;};c1.LoadNestedTemplates=function(dY,dZ){var d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec;function d0(ed){var ee,ef;if(!d1.ContainsKey(ed)){ee=(ef=null,[d2.TryGetValue(ed,{get:function(){return ef;},set:function(eg){ef=eg;}}),ef]);ee[0]?(ec.Add(ed),d2.Remove(ed),c1.PrepareTemplateStrict(dZ,{$:1,$0:ed},ee[1][0],{$:1,$0:ee[1][1]},{$:1,$0:d0})):dQ.warn(ec.Contains(ed)?"Encountered loop when instantiating "+ed:"Local template does not exist: "+ed);}}d1=c1.LoadedTemplateFile(dZ);d2=new bS.New$5();d3=dY.querySelectorAll("[ws-template]");for(d4=0,d5=d3.length-1;d4<=d5;d4++){d6=d3[d4];d7=d6.getAttribute("ws-template").toLowerCase();d6.removeAttribute("ws-template");d2.set_Item(d7,[[d6],c1.FakeRootSingle(d6)]);}d8=dY.querySelectorAll("[ws-children-template]");for(d9=0,d_=d8.length-1;d9<=d_;d9++){d$=d8[d9];ea=d$.getAttribute("ws-children-template").toLowerCase();d$.removeAttribute("ws-children-template");d2.set_Item(ea,(eb=cY.ChildrenArray(d$),[eb,c1.FakeRoot(eb)]));}ec=new c5.New$3();while(d2.count>0)d0(bT.head(d2.get_Keys()));};c1.LoadedTemplates=function(){ds.$cctor();return ds.LoadedTemplates;};c1.LoadedTemplateFile=function(dY){var dZ,d0,d1;dZ=(d0=null,[c1.LoadedTemplates().TryGetValue(dY,{get:function(){return d0;},set:function(d2){d0=d2;}}),d0]);return dZ[0]?dZ[1]:(d1=new bS.New$5(),(c1.LoadedTemplates().set_Item(dY,d1),d1));};c1.ChildrenTemplate=function(dY,dZ){var d0,d1,d2,d3,d4;d0=c1.InlineTemplate(dY,dZ);d1=d0[1];d2=d0[0];d3=d2.Els;return!bQ.Equals(d3,null)&&d3.length===1&&(bO.get(d3,0)instanceof cg&&(bQ.Equals(bO.get(d3,0).nodeType,cg.ELEMENT_NODE)&&(d4=bO.get(d3,0),true)))?cW.TreeNode(d2,d1):ca.Mk({$:6,$0:d2},d1);};c1.FakeRootSingle=function(dY){var dZ,d0,d1;dY.removeAttribute("ws-template");dZ=dY.getAttribute("ws-replace");dZ===null?void 0:(dY.removeAttribute("ws-replace"),d0=dY.parentNode,bQ.Equals(d0,null)?void 0:(d1=self.document.createElement(dY.tagName),d1.setAttribute("ws-replace",dZ),d0.replaceChild(d1,dY)));return c1.FakeRoot([dY]);};c1.FakeRoot=function(dY){var dZ,d0,d1;dZ=self.document.createElement("div");for(d0=0,d1=dY.length-1;d0<=d1;d0++)dZ.appendChild(bO.get(dY,d0));return dZ;};c1.PrepareTemplateStrict=function(dY,dZ,d0,d1,d2){var d3,d4;function d5(d_,d$){var ea,eb,ec,ed,ee,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA;function ef(eB){}while(true)switch(d_){case 0:if(d$!==null){ea=d$.nextSibling;if(bQ.Equals(d$.nodeType,cg.TEXT_NODE))dz.convertTextNode(d$);else if(bQ.Equals(d$.nodeType,cg.ELEMENT_NODE))d7(d$);d$=ea;}else return null;break;case 1:eg=bP.string(d$.nodeName,{$:1,$0:3},null).toLowerCase();eh=(eb=eg.indexOf("."),eb===-1?[dY,eg]:[bP.string(eg,null,{$:1,$0:eb-1}),bP.string(eg,{$:1,$0:eb+1},null)]);ei=eh[1];ej=eh[0];if(ej!==""&&!c1.LoadedTemplates().ContainsKey(ej))return dz.failNotLoaded(ei);else{if(ej===""&&d2!=null)d2.$0(ei);ek=c1.LoadedTemplates().get_Item(ej);if(!ek.ContainsKey(ei))return dz.failNotLoaded(ei);else{el=ek.get_Item(ei);em=el.cloneNode(true);en=new c5.New$3();eo=new bS.New$5();ep=d$.attributes;for(eq=0,er=ep.length-1;eq<=er;eq++){es=ep.item(eq).name.toLowerCase();eo.set_Item(es,(et=ep.item(eq).nodeValue,et===""?es:et.toLowerCase()));!en.Add(es)?dQ.warn("Hole mapped twice",es):void 0;}for(eu=0,ev=d$.childNodes.length-1;eu<=ev;eu++){ew=d$.childNodes[eu];bQ.Equals(ew.nodeType,cg.ELEMENT_NODE)?!en.Add(ew.nodeName.toLowerCase())?dQ.warn("Hole filled twice",ei):void 0:void 0;}ex=d$.childNodes.length===1&&bQ.Equals(d$.firstChild.nodeType,cg.TEXT_NODE);if(ex){ed=dz.fillTextHole(em,d$.firstChild.textContent,ei);((function(eB){return function(eC){if(eC!=null)eB(eC.$0);};}((ee=function(eB){return function(eC){return eB.Add(eC);};}(en),function(eB){return ef(ee(eB));})))(ed));}dz.removeHolesExcept(em,en);if(!ex){for(ey=0,ez=d$.childNodes.length-1;ey<=ez;ey++){eA=d$.childNodes[ey];bQ.Equals(eA.nodeType,cg.ELEMENT_NODE)?eA.hasAttributes()?dz.fillInstanceAttrs(em,eA):d6(em,eA):void 0;}}dz.mapHoles(em,eo);dz.fill(em,d$.parentNode,d$);d$.parentNode.removeChild(d$);return;}}break;}}function d6(d_,d$){var ea,ec,ed;function eb(ee,ef){var eg,eh,ei;if(ec==="title"&&d$.hasChildNodes()){eg=dW.parseHTML(d$.textContent);d$.removeChild(d$.firstChild);for(eh=0,ei=eg.length-1;eh<=ei;eh++)d$.appendChild(bO.get(eg,eh));}else null;d7(d$);return dz.fill(d$,ee,ef);}ec=d$.nodeName.toLowerCase();cY.IterSelector(d_,"[ws-attr-holes]",function(ee){var ef,eg,eh,ei,ej;ef=bU.SplitChars(ee.getAttribute("ws-attr-holes"),[" "],1);for(eg=0,eh=ef.length-1;eg<=eh;eg++){ei=bO.get(ef,eg);ee.setAttribute(ei,(ej=new a.RegExp("\\${"+ec+"}","ig"),ee.getAttribute(ei).replace(ej,d$.textContent)));}});ed=d_.querySelector("[ws-hole="+ec+"]");if(bQ.Equals(ed,null)){ea=d_.querySelector("[ws-replace="+ec+"]");return bQ.Equals(ea,null)?null:(eb(ea.parentNode,ea),void ea.parentNode.removeChild(ea));}else{while(ed.hasChildNodes())ed.removeChild(ed.lastChild);ed.removeAttribute("ws-hole");return eb(ed,null);}}function d7(d_){if(bU.StartsWith(d_.nodeName.toLowerCase(),"ws-"))d9(d_);else{dz.convertAttrs(d_);d8(d_.firstChild);}}function d8(d_){return d5(0,d_);}function d9(d_){return d5(1,d_);}d3=d1==null?c1.FakeRoot(d0):d1.$0;d4=(dZ==null?"":dZ.$0).toLowerCase();c1.LoadedTemplateFile(dY).set_Item(d4,d3);bO.length(d0)>0?(function(d_){var d$,ea,eb,ec;while(true){d$=d_.querySelector("[ws-template]");if(bQ.Equals(d$,null)){ea=d_.querySelector("[ws-children-template]");if(bQ.Equals(ea,null))return null;else{eb=ea.getAttribute("ws-children-template");ea.removeAttribute("ws-children-template");c1.PrepareTemplateStrict(dY,{$:1,$0:eb},cY.ChildrenArray(ea),null,null);d_=d_;}}else{ec=d$.getAttribute("ws-template");(c1.PrepareSingleTemplate(dY,{$:1,$0:ec},d$))(null);d_=d_;}}}(d3),d8(bO.get(d0,0))):void 0;};c1.InlineTemplate=function(dY,dZ){var d0,d1,d2,d3,d6,d7,d8,d9,d_,d$,ea;function d4(eb,ec){var ed,ee,ef;ed=c7.Insert(eb,ec);d7.push(c7.Updates(ed));d8.push([eb,ed]);ee=dS.GetOptional(ed.OnAfterRender);return ee==null?null:(ef=ee.$0,void d9.push(function(){ef(eb);}));}function d5(eb){var ec,ed;ec=(ed=null,[d_.TryGetValue(eb,{get:function(){return ed;},set:function(ee){ed=ee;}}),ed]);return ec[0]?ec[1].$==0?{$:1,$0:ec[1].$1}:ec[1].$==1?{$:1,$0:ca.TextNode(ec[1].$1)}:ec[1].$==2?{$:1,$0:ca.TextView(ec[1].$1)}:ec[1].$==8?{$:1,$0:ca.TextView(ec[1].$1.get_View())}:ec[1].$==9?{$:1,$0:ca.TextView(b_.Map(a.String,ec[1].$1.get_View()))}:ec[1].$==10?{$:1,$0:ca.TextView(b_.Map(function(ee){return ee.get_Input();},ec[1].$1.get_View()))}:ec[1].$==11?{$:1,$0:ca.TextView(b_.Map(a.String,ec[1].$1.get_View()))}:ec[1].$==12?{$:1,$0:ca.TextView(b_.Map(function(ee){return ee.get_Input();},ec[1].$1.get_View()))}:ec[1].$==13?{$:1,$0:ca.TextView(b_.Map(a.String,ec[1].$1.get_View()))}:(dQ.warn("Content hole filled with attribute data",eb),null):null;}d6=[];d7=[];d8=[];d9=[];d_=new bS.New$5();d$=cO.Get(dZ);try{while(d$.MoveNext()){ea=d$.Current();d_.set_Item(ea.$0,ea);}}finally{if(typeof d$=="object"&&"Dispose"in d$)d$.Dispose();}d0=cY.ChildrenArray(dY);cY.IterSelector(dY,"[ws-hole]",function(eb){var ec,ed,ee;ee=eb.getAttribute("ws-hole");eb.removeAttribute("ws-hole");while(eb.hasChildNodes())eb.removeChild(eb.lastChild);ec=d5(ee);ec!=null&&ec.$==1?(ed=ec.$0,c$.LinkElement(eb,ed.docNode),d6.push(di.New(c7.Empty(eb),ed.docNode,null,eb,c3.Int(),null)),d7.push(ed.updates)):void 0;});cY.IterSelector(dY,"[ws-replace]",function(eb){var ec,ed,ee,ef,eg,eh;ec=d5(eb.getAttribute("ws-replace"));ec!=null&&ec.$==1?(ed=ec.$0,ee=eb.parentNode,ef=self.document.createTextNode(""),ee.replaceChild(ef,eb),eg=c$.InsertBeforeDelim(ef,ed.docNode),eh=bO.tryFindIndex(function(ei){return eb===ei;},d0),eh==null?void 0:bO.set(d0,eh.$0,ed.docNode),d6.push(di.New(c7.Empty(ee),ed.docNode,{$:1,$0:[eg,ef]},ee,c3.Int(),null)),d7.push(ed.updates)):void 0;});cY.IterSelector(dY,"[ws-attr]",function(eb){var ec,ed,ee;ec=eb.getAttribute("ws-attr");eb.removeAttribute("ws-attr");ed=(ee=null,[d_.TryGetValue(ec,{get:function(){return ee;},set:function(ef){ee=ef;}}),ee]);ed[0]?ed[1].$==3?d4(eb,ed[1].$1):dQ.warn("Attribute hole filled with non-attribute data",ec):void 0;});cY.IterSelector(dY,"[ws-on]",function(eb){d4(eb,cD.Concat(bO.choose(function(ec){var ed,ee,ef;ed=bU.SplitChars(ec,[":"],1);ee=(ef=null,[d_.TryGetValue(bO.get(ed,1),{get:function(){return ef;},set:function(eg){ef=eg;}}),ef]);return ee[0]?ee[1].$==4?{$:1,$0:cB.Handler(bO.get(ed,0),ee[1].$1)}:ee[1].$==5?{$:1,$0:cD.Handler(bO.get(ed,0),ee[1].$2)}:(dQ.warn("Event hole on"+bO.get(ed,0)+" filled with non-event data",bO.get(ed,1)),null):null;},bU.SplitChars(eb.getAttribute("ws-on"),[" "],1))));eb.removeAttribute("ws-on");});cY.IterSelector(dY,"[ws-onafterrender]",function(eb){var ec,ed,ee;ec=eb.getAttribute("ws-onafterrender");ed=(ee=null,[d_.TryGetValue(ec,{get:function(){return ee;},set:function(ef){ee=ef;}}),ee]);ed[0]?ed[1].$==6?(eb.removeAttribute("ws-onafterrender"),d4(eb,cB.OnAfterRender(ed[1].$1))):ed[1].$==7?(eb.removeAttribute("ws-onafterrender"),d4(eb,cB.OnAfterRender(ed[1].$1))):dQ.warn("onafterrender hole filled with non-onafterrender data",ec):void 0;});cY.IterSelector(dY,"[ws-var]",function(eb){var ec,ed,ee;ec=eb.getAttribute("ws-var");eb.removeAttribute("ws-var");ed=(ee=null,[d_.TryGetValue(ec,{get:function(){return ee;},set:function(ef){ee=ef;}}),ee]);ed[0]?ed[1].$==8?d4(eb,cB.Value(ed[1].$1)):ed[1].$==9?d4(eb,cB.Checked(ed[1].$1)):ed[1].$==10?d4(eb,cB.IntValue(ed[1].$1)):ed[1].$==11?d4(eb,cB.IntValueUnchecked(ed[1].$1)):ed[1].$==12?d4(eb,cB.FloatValue(ed[1].$1)):ed[1].$==13?d4(eb,cB.FloatValueUnchecked(ed[1].$1)):dQ.warn("Var hole filled with non-Var data",ec):void 0;});cY.IterSelector(dY,"[ws-attr-holes]",function(eb){var ec,ed,ee,ef;ec=new a.RegExp(c1.TextHoleRE(),"g");ed=bU.SplitChars(eb.getAttribute("ws-attr-holes"),[" "],1);eb.removeAttribute("ws-attr-holes");for(ee=0,ef=ed.length-1;ee<=ef;ee++)(function(){var eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es;ep=bO.get(ed,ee);eq=eb.getAttribute(ep);eg=null;eh=0;er=[];while(eg=ec.exec(eq),eg!==null){es=bP.string(eq,{$:1,$0:eh},{$:1,$0:ec.lastIndex-bO.get(eg,0).length-1});eh=ec.lastIndex;er.push([es,bO.get(eg,1)]);}ej=bP.string(eq,{$:1,$0:eh},null);ec.lastIndex=0;ek=bO.foldBack(function(et,eu){return(function(ev){var ew,ex;ew=ev[0];ex=ev[1];return function(ey){var ez,eA,eB,eC,eD;ez=ey[0];eA=ey[1];eB=(eC=(eD=null,[d_.TryGetValue(ex,{get:function(){return eD;},set:function(eE){eD=eE;}}),eD]),eC[0]?eC[1].$==1?{$:0,$0:eC[1].$1}:eC[1].$==2?{$:1,$0:eC[1].$1}:eC[1].$==8?{$:1,$0:eC[1].$1.get_View()}:eC[1].$==9?{$:1,$0:b_.Map(a.String,eC[1].$1.get_View())}:eC[1].$==10?{$:1,$0:b_.Map(function(eE){return eE.get_Input();},eC[1].$1.get_View())}:eC[1].$==11?{$:1,$0:b_.Map(a.String,eC[1].$1.get_View())}:eC[1].$==12?{$:1,$0:b_.Map(function(eE){return eE.get_Input();},eC[1].$1.get_View())}:eC[1].$==13?{$:1,$0:b_.Map(a.String,eC[1].$1.get_View())}:(dQ.warn("Attribute value hole filled with non-text data",ex),{$:0,$0:""}):{$:0,$0:""});return eB.$==1?[ew,new bZ({$:1,$0:ez===""?eB.$0:b_.Map(function(eE){return eE+ez;},eB.$0),$1:eA})]:[ew+eB.$0+ez,eA];};}(et))(eu);},er,[ej,bZ.Empty]);return d4(eb,ek[1].$==1?ek[1].$1.$==1?ek[1].$1.$1.$==1?ek[1].$1.$1.$1.$==0?(el=ek[0],cB.Dynamic(ep,b_.Map3(function(et,eu,ev){return el+et+eu+ev;},ek[1].$0,ek[1].$1.$0,ek[1].$1.$1.$0))):(em=ek[0],cB.Dynamic(ep,b_.Map(function(et){return em+bU.concat("",et);},b_.Sequence(ek[1])))):(en=ek[0],cB.Dynamic(ep,b_.Map2(function(et,eu){return en+et+eu;},ek[1].$0,ek[1].$1.$0))):ek[0]===""?cB.Dynamic(ep,ek[1].$0):(eo=ek[0],cB.Dynamic(ep,b_.Map(function(et){return eo+et;},ek[1].$0))):cD.Create(ep,ek[0]));}());});return[dS.DeleteEmptyFields({Els:d0,Dirty:true,Holes:d6,Attrs:d8,Render:(d1=d9.length==0?null:{$:1,$0:function(eb){bO.iter(function(ec){ec(eb);},d9);}},d1?d1.$0:void 0),El:(d2=!bQ.Equals(d0,null)&&d0.length===1&&(bO.get(d0,0)instanceof cg&&(bO.get(d0,0)instanceof a.Element&&(d3=bO.get(d0,0),true)))?{$:1,$0:d3}:null,d2?d2.$0:void 0)},["Render","El"]),c_.TreeReduce(b_.Const(),b_.Map2Unit,d7)];};c1.PrepareSingleTemplate=function(dY,dZ,d0){var d1,d2,d3;d1=c1.FakeRootSingle(d0);d2=[d0];d3={$:1,$0:d1};return function(d4){c1.PrepareTemplateStrict(dY,dZ,d2,d3,d4);};};c1.TextHoleRE=function(){ds.$cctor();return ds.TextHoleRE;};c3.Id=function(){c3.set_counter(c3.counter()+1);return"uid"+a.String(c3.counter());};c3.Int=function(){c3.set_counter(c3.counter()+1);return c3.counter();};c3.set_counter=function(dY){dw.$cctor();dw.counter=dY;};c3.counter=function(){dw.$cctor();return dw.counter;};cX.Obsolete=function(dY){var dZ,d0,d1,d2,d3;d0=dY.s;if(d0==null||(d0!=null&&d0.$==2?(dZ=d0.$1,false):d0!=null&&d0.$==3?(dZ=d0.$1,false):true))void 0;else{dY.s=null;for(d1=0,d2=bO.length(dZ)-1;d1<=d2;d1++){d3=bO.get(dZ,d1);typeof d3=="object"?function(d4){cX.Obsolete(d4);}(d3):d3();}}};cX.New=function(dY){return{s:dY};};c4=bR.List=dS.Class({GetEnumerator:function(){return cO.Get(this);},GetEnumerator0:function(){return cO.Get0(this);}},null,c4);c5=bR.HashSet=dS.Class({Add:function(dY){return this.add(dY);},Contains:function(dY){var dZ;dZ=this.data[this.hash(dY)];return dZ==null?false:this.arrContains(dY,dZ);},add:function(dY){var dZ,d0;dZ=this.hash(dY);d0=this.data[dZ];return d0==null?(this.data[dZ]=[dY],this.count=this.count+1,true):this.arrContains(dY,d0)?false:(d0.push(dY),this.count=this.count+1,true);},arrContains:function(dY,dZ){var d0,d1,d2,d3;d0=true;d1=0;d3=dZ.length;while(d0&&d1<d3)if(this.equals.apply(null,[dZ[d1],dY]))d0=false;else d1=d1+1;return!d0;},ExceptWith:function(dY){var dZ;dZ=cO.Get(dY);try{while(dZ.MoveNext())this.Remove(dZ.Current());}finally{if(typeof dZ=="object"&&"Dispose"in dZ)dZ.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(dY){var dZ,d0,d1,d2;dZ=0;d0=dG.concat(this.data);for(d1=0,d2=d0.length-1;d1<=d2;d1++)bO.set(dY,d1,d0[d1]);},IntersectWith:function(dY){var dZ,d0,d1,d2,d3;dZ=new c5.New$4(dY,this.equals,this.hash);d0=dG.concat(this.data);for(d1=0,d2=d0.length-1;d1<=d2;d1++){d3=d0[d1];!dZ.Contains(d3)?this.Remove(d3):void 0;}},Remove:function(dY){var dZ;dZ=this.data[this.hash(dY)];return dZ==null?false:this.arrRemove(dY,dZ)&&(this.count=this.count-1,true);},arrRemove:function(dY,dZ){var d0,d1,d2,d3;d0=true;d1=0;d3=dZ.length;while(d0&&d1<d3)if(this.equals.apply(null,[dZ[d1],dY])){dZ.splice.apply(dZ,[d1,1]);d0=false;}else d1=d1+1;return!d0;},GetEnumerator:function(){return cO.Get(dG.concat(this.data));},GetEnumerator0:function(){return cO.Get(dG.concat(this.data));}},r,c5);c5.New$3=dS.Ctor(function(){c5.New$4.call(this,[],bQ.Equals,bQ.Hash);},c5);c5.New$4=dS.Ctor(function(dY,dZ,d0){var d1;r.New.call(this);this.equals=dZ;this.hash=d0;this.data=[];this.count=0;d1=cO.Get(dY);try{while(d1.MoveNext())this.add(d1.Current());}finally{if(typeof d1=="object"&&"Dispose"in d1)d1.Dispose();}},c5);c5.New$2=dS.Ctor(function(dY){c5.New$4.call(this,dY,bQ.Equals,bQ.Hash);},c5);c6=b5.FromView=dS.Class({get_View:function(){return this.view;},Set:function(dY){this.set(dY);},Get:function(){return this.current;},Update:function(dY){var dZ;b_.Get((dZ=this.set,function(d0){return dZ(dY(d0));}),this.view);},UpdateMaybe:function(dY){var dZ;dZ=this;b_.Get(function(d0){var d1;d1=dY(d0);d1!=null&&d1.$==1?dZ.set(d1.$0):void 0;},this.view);}},b$,c6);c6.New=dS.Ctor(function(dY,dZ){var d0,d1;d0=this;b$.New.call(this);this.set=dZ;this.id=c3.Int();this.current=(d1=b_.TryGet(dY),d1==null?null:d1.$0);this.view=b_.Map(function(d2){d0.current=d2;return d2;},dY);},c6);c7.Dynamic=function(dY,dZ){return new cD({$:1,$0:new dl.New(dY,dZ)});};c7.Static=function(dY){return new cD({$:3,$0:dY});};c7.EmptyAttr=function(){dp.$cctor();return dp.EmptyAttr;};c7.Insert=function(dY,dZ){var d0,d1,d2;function d3(d4){if(!(d4===null))if(d4!=null&&d4.$==1)d0.push(d4.$0);else if(d4!=null&&d4.$==2){d3(d4.$0);d3(d4.$1);}else if(d4!=null&&d4.$==3)d4.$0(dY);else if(d4!=null&&d4.$==4)d1.push(d4.$0);}d0=[];d1=[];d3(dZ);d2=d0.slice(0);return dy.New(dY,c7.Flags(dZ),d2,d1.length===0?null:{$:1,$0:function(d4){bT.iter(function(d5){d5(d4);},d1);}});};c7.AppendTree=function(dY,dZ){var d0;return dY===null?dZ:dZ===null?dY:(d0=new cD({$:2,$0:dY,$1:dZ}),(c7.SetFlags(d0,c7.Flags(dY)|c7.Flags(dZ)),d0));};c7.Updates=function(dY){return c_.MapTreeReduce(function(dZ){return dZ.NChanged();},b_.Const(),b_.Map2Unit,dY.DynNodes);};c7.Flags=function(dY){return dY!==null&&dY.hasOwnProperty("flags")?dY.flags:0;};c7.SetFlags=function(dY,dZ){dY.flags=dZ;};c7.Empty=function(dY){return dy.New(dY,0,[],null);};c7.HasExitAnim=function(dY){var dZ;dZ=2;return(dY.DynFlags&dZ)===dZ;};c7.GetExitAnim=function(dY){return c7.GetAnim(dY,function(dZ,d0){return dZ.NGetExitAnim(d0);});};c7.HasEnterAnim=function(dY){var dZ;dZ=1;return(dY.DynFlags&dZ)===dZ;};c7.GetEnterAnim=function(dY){return c7.GetAnim(dY,function(dZ,d0){return dZ.NGetEnterAnim(d0);});};c7.HasChangeAnim=function(dY){var dZ;dZ=4;return(dY.DynFlags&dZ)===dZ;};c7.GetChangeAnim=function(dY){return c7.GetAnim(dY,function(dZ,d0){return dZ.NGetChangeAnim(d0);});};c7.GetAnim=function(dY,dZ){return dt.Concat(bO.map(function(d0){return dZ(d0,dY.DynElem);},dY.DynNodes));};c7.Sync=function(dY,dZ){bO.iter(function(d0){d0.NSync(dY);},dZ.DynNodes);};c9.New=function(dY,dZ,d0){return{c:dY,v:dZ,f:d0};};c_.ofSeqNonCopying=function(dY){var dZ,d0;if(dY instanceof a.Array)return dY;else if(dY instanceof bZ)return bO.ofList(dY);else if(dY===null)return[];else{dZ=[];d0=cO.Get(dY);try{while(d0.MoveNext())dZ.push(d0.Current());return dZ;}finally{if(typeof d0=="object"&&"Dispose"in d0)d0.Dispose();}}};c_.TreeReduce=function(dY,dZ,d0){var d1;function d2(d3,d4){var d5,d6;return d4<=0?dY:d4===1&&(d3>=0&&d3<d1)?bO.get(d0,d3):(d6=d4/2>>0,dZ(d2(d3,d6),d2(d3+d6,d4-d6)));}d1=bO.length(d0);return d2(0,d1);};c_.MapTreeReduce=function(dY,dZ,d0,d1){var d2;function d3(d4,d5){var d6,d7;return d5<=0?dZ:d5===1&&(d4>=0&&d4<d2)?dY(bO.get(d1,d4)):(d7=d5/2>>0,d0(d3(d4,d7),d3(d4+d7,d5-d7)));}d2=bO.length(d1);return d3(0,d2);};c_.mapInPlace=function(dY,dZ){var d0,d1;for(d0=0,d1=dZ.length-1;d0<=d1;d0++)dZ[d0]=dY(dZ[d0]);return dZ;};c$.CreateElemNode=function(dY,dZ,d0){var d1;c$.LinkElement(dY,d0);d1=c7.Insert(dY,dZ);return di.New(d1,d0,null,dY,c3.Int(),dS.GetOptional(d1.OnAfterRender));};c$.CreateTextNode=function(){return{Text:cY.CreateText(""),Dirty:false,Value:""};};c$.UpdateTextNode=function(dY,dZ){dY.Value=dZ;dY.Dirty=true;};c$.LinkElement=function(dY,dZ){c$.InsertDoc(dY,dZ,null);};c$.CreateEmbedNode=function(){return{Current:null,Dirty:false};};c$.UpdateEmbedNode=function(dY,dZ){dY.Current=dZ;dY.Dirty=true;};c$.InsertDoc=function(dY,dZ,d0){var d1;return dZ!=null&&dZ.$==1?c$.InsertNode(dY,dZ.$0.El,d0):dZ!=null&&dZ.$==2?(d1=dZ.$0,(d1.Dirty=false,c$.InsertDoc(dY,d1.Current,d0))):dZ==null?d0:dZ!=null&&dZ.$==4?c$.InsertNode(dY,dZ.$0.Text,d0):dZ!=null&&dZ.$==5?c$.InsertNode(dY,dZ.$0,d0):dZ!=null&&dZ.$==6?bO.foldBack(function(d2,d3){return d2==null||d2.constructor===cN?c$.InsertDoc(dY,d2,d3):c$.InsertNode(dY,d2,d3);},dZ.$0.Els,d0):c$.InsertDoc(dY,dZ.$0,c$.InsertDoc(dY,dZ.$1,d0));};c$.CreateRunState=function(dY,dZ){return dC.New(dD.get_Empty(),c$.CreateElemNode(dY,c7.EmptyAttr(),dZ));};c$.PerformAnimatedUpdate=function(dY,dZ,d0){var d1;return dt.get_UseAnimations()?(d1=null,cM.Delay(function(){var d2,d3,d4;d2=dD.FindAll(d0);d3=c$.ComputeChangeAnim(dZ,d2);d4=c$.ComputeEnterAnim(dZ,d2);return cM.Bind(dt.Play(dt.Append(d3,c$.ComputeExitAnim(dZ,d2))),function(){return cM.Bind(c$.SyncElemNodesNextFrame(dY,dZ),function(){return cM.Bind(dt.Play(d4),function(){dZ.PreviousNodes=d2;return cM.Return(null);});});});})):c$.SyncElemNodesNextFrame(dY,dZ);};c$.PerformSyncUpdate=function(dY,dZ,d0){var d1;d1=dD.FindAll(d0);c$.SyncElemNode(dY,dZ.Top);dZ.PreviousNodes=d1;};c$.InsertNode=function(dY,dZ,d0){cY.InsertAt(dY,d0,dZ);return dZ;};c$.SyncElemNodesNextFrame=function(dY,dZ){function d0(d1){a.requestAnimationFrame(function(){c$.SyncElemNode(dY,dZ.Top);d1();});}return du.BatchUpdatesEnabled()?cM.FromContinuations(function(d1,d2,d3){return d0.apply(null,[d1,d2,d3]);}):(c$.SyncElemNode(dY,dZ.Top),cM.Return(null));};c$.ComputeExitAnim=function(dY,dZ){return dt.Concat(bO.map(function(d0){return c7.GetExitAnim(d0.Attr);},dD.ToArray(dD.Except(dZ,dD.Filter(function(d0){return c7.HasExitAnim(d0.Attr);},dY.PreviousNodes)))));};c$.ComputeEnterAnim=function(dY,dZ){return dt.Concat(bO.map(function(d0){return c7.GetEnterAnim(d0.Attr);},dD.ToArray(dD.Except(dY.PreviousNodes,dD.Filter(function(d0){return c7.HasEnterAnim(d0.Attr);},dZ)))));};c$.ComputeChangeAnim=function(dY,dZ){var d0;function d1(d2){return c7.HasChangeAnim(d2.Attr);}d0=function(d2){return dD.Filter(d1,d2);};return dt.Concat(bO.map(function(d2){return c7.GetChangeAnim(d2.Attr);},dD.ToArray(dD.Intersect(d0(dY.PreviousNodes),d0(dZ)))));};c$.SyncElemNode=function(dY,dZ){!dY?c$.SyncElement(dZ):void 0;c$.Sync(dZ.Children);c$.AfterRender(dZ);};c$.InsertBeforeDelim=function(dY,dZ){var d0,d1;d0=dY.parentNode;d1=self.document.createTextNode("");d0.insertBefore(d1,dY);c$.LinkPrevElement(dY,dZ);return d1;};c$.LinkPrevElement=function(dY,dZ){c$.InsertDoc(dY.parentNode,dZ,dY);};c$.CreateDelimitedRunState=function(dY,dZ,d0){return dC.New(dD.get_Empty(),c$.CreateDelimitedElemNode(dY,dZ,c7.EmptyAttr(),d0));};c$.SyncElement=function(dY){function dZ(d0){function d1(d2){var d3,d4;return d2!=null&&d2.$==0?d1(d2.$0)||d1(d2.$1):d2!=null&&d2.$==2?(d3=d2.$0,d3.Dirty||d1(d3.Current)):d2!=null&&d2.$==6&&(d4=d2.$0,d4.Dirty||bO.exists(dZ,d4.Holes));}return d1(d0.Children);}c7.Sync(dY.El,dY.Attr);dZ(dY)?c$.DoSyncElement(dY):void 0;};c$.Sync=function(dY){var dZ,d0;if(dY!=null&&dY.$==1)c$.SyncElemNode(false,dY.$0);else if(dY!=null&&dY.$==2)c$.Sync(dY.$0.Current);else if(dY==null);else if(dY!=null&&dY.$==5);else if(dY!=null&&dY.$==4){dZ=dY.$0;dZ.Dirty?(dZ.Text.nodeValue=dZ.Value,dZ.Dirty=false):void 0;}else if(dY!=null&&dY.$==6){d0=dY.$0;bO.iter(function(d1){c$.SyncElemNode(false,d1);},d0.Holes);bO.iter(function(d1){c7.Sync(d1[0],d1[1]);},d0.Attrs);c$.AfterRender(d0);}else{c$.Sync(dY.$0);c$.Sync(dY.$1);}};c$.AfterRender=function(dY){var dZ;dZ=dS.GetOptional(dY.Render);dZ!=null&&dZ.$==1?(dZ.$0(dY.El),dS.SetOptional(dY,"Render",null)):void 0;};c$.CreateDelimitedElemNode=function(dY,dZ,d0,d1){var d2,d3;d2=dY.parentNode;c$.LinkPrevElement(dZ,d1);d3=c7.Insert(d2,d0);return di.New(d3,d1,{$:1,$0:[dY,dZ]},d2,c3.Int(),dS.GetOptional(d3.OnAfterRender));};c$.DoSyncElement=function(dY){var dZ,d0,d1;function d2(d3,d4){var d5,d6;return d3!=null&&d3.$==1?d3.$0.El:d3!=null&&d3.$==2?(d5=d3.$0,d5.Dirty?(d5.Dirty=false,c$.InsertDoc(dZ,d5.Current,d4)):d2(d5.Current,d4)):d3==null?d4:d3!=null&&d3.$==4?d3.$0.Text:d3!=null&&d3.$==5?d3.$0:d3!=null&&d3.$==6?(d6=d3.$0,(d6.Dirty?d6.Dirty=false:void 0,bO.foldBack(function(d7,d8){return d7==null||d7.constructor===cN?d2(d7,d8):d7;},d6.Els,d4))):d2(d3.$0,d2(d3.$1,d4));}dZ=dY.El;dO.Iter((d0=dY.El,function(d3){cY.RemoveNode(d0,d3);}),dO.Except(dO.DocChildren(dY),dO.Children(dY.El,dS.GetOptional(dY.Delimiters))));d2(dY.Children,(d1=dS.GetOptional(dY.Delimiters),d1!=null&&d1.$==1?d1.$0[1]:null));};da=bR.Pair=dS.Class({Equals:function(dY){return bQ.Equals(this.Key,dY.Key);},GetHashCode:function(){return bQ.Hash(this.Key);},CompareTo0:function(dY){return bQ.Compare(this.Key,dY.Key);}},null,da);da.New=function(dY,dZ){return new da({Key:dY,Value:dZ});};db.StartTo=function(dY,dZ){cM.StartWithContinuations(dY,dZ,function(d0){db.OnError(d0);},a.ignore,null);};db.OnError=function(dY){return dQ.log("WebSharper UI: Uncaught asynchronous exception",dY);};dc.InMemory=function(dY){return new dm.New(dY);};dd.New=function(dY,dZ){return{k:dY,ct:dZ};};de.New=function(dY,dZ){return{c:dY,r:dZ};};df.$cctor=function(){df.$cctor=a.ignore;df.noneCT=de.New(false,[]);df.scheduler=new dn.New();df.defCTS=[new bX.New()];df.Zero=cM.Return();df.GetCT=function(dY){dY.k({$:0,$0:dY.ct});};};dg.TryParse=function(dY){var dZ;dZ=dT.parse(dY);return a.isNaN(dZ)?null:{$:1,$0:dZ};};cb.TryParse=function(dY,dZ,d0,d1){var d2,d3;d2=+dY;d3=d2===d2-d2%1&&d2>=dZ&&d2<=d0;d3?d1.set(d2):void 0;return d3;};dh=q.TimeoutException=dS.Class({},cE,dh);dh.New=dS.Ctor(function(){dh.New$1.call(this,"The operation has timed out.");},dh);dh.New$1=dS.Ctor(function(dY){this.message=dY;cN.setPrototypeOf(this,dh.prototype);},dh);di=b5.DocElemNode=dS.Class({Equals:function(dY){return this.ElKey===dY.ElKey;},GetHashCode:function(){return this.ElKey;}},null,di);di.New=function(dY,dZ,d0,d1,d2,d3){var d4;return new di((d4={Attr:dY,Children:dZ,El:d1,ElKey:d2},(dS.SetOptional(d4,"Delimiters",d0),dS.SetOptional(d4,"Render",d3),d4)));};dk=b5.CheckedInput=dS.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,dk);dl=b5.DynamicAttrNode=dS.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(dY){return dt.get_Empty();},NGetEnterAnim:function(dY){return dt.get_Empty();},NGetChangeAnim:function(dY){return dt.get_Empty();},NSync:function(dY){if(this.dirty){(this.push(dY))(this.value);this.dirty=false;}}},r,dl);dl.New=dS.Ctor(function(dY,dZ){var d0;d0=this;r.New.call(this);this.push=dZ;this.value=void 0;this.dirty=false;this.updates=b_.Map(function(d1){d0.value=d1;d0.dirty=true;},dY);},dl);bT.enumUsing=function(dY,dZ){return{GetEnumerator:function(){var d0;try{d0=cO.Get(dZ(dY));}catch(d1){dY.Dispose();throw d1;}return new cP.New(null,null,function(d2){return d0.MoveNext()&&(d2.c=d0.Current(),true);},function(){d0.Dispose();dY.Dispose();});}};};bT.enumWhile=function(dY,dZ){return{GetEnumerator:function(){return new cP.New(null,null,function(d0){var d1;while(true){d1=d0.s;if(bQ.Equals(d1,null)){if(dY()){d0.s=cO.Get(dZ);d0=d0;}else return false;}else if(d1.MoveNext()){d0.c=d1.Current();return true;}else{d1.Dispose();d0.s=null;d0=d0;}}},function(d0){var d1;d1=d0.s;!bQ.Equals(d1,null)?d1.Dispose():void 0;});}};};dm=dc.ArrayStorage=dS.Class({SAppendMany:function(dY,dZ){var d0;d0=c_.ofSeqNonCopying(dY);dZ.push.apply(dZ,d0);return dZ;},SSetAt:function(dY,dZ,d0){bO.set(d0,dY,dZ);return d0;},SRemoveIf:function(dY,dZ){return bO.filter(function(d0){return!dY(d0);},dZ);},SSet:function(dY){return bO.ofSeq(dY);},SAppend:function(dY,dZ){dZ.push(dY);return dZ;},SInit:function(){return this.init;}},r,dm);dm.New=dS.Ctor(function(dY){r.New.call(this);this.init=dY;},dm);dn=cM.Scheduler=dS.Class({Fork:function(dY){var dZ;dZ=this;this.robin.push(dY);this.idle?(this.idle=false,a.setTimeout(function(){dZ.tick();},0)):void 0;},tick:function(){var dY,dZ,d0;dZ=this;d0=dT.now();dY=true;while(dY)if(this.robin.length===0){this.idle=true;dY=false;}else{(this.robin.shift())();dT.now()-d0>40?(a.setTimeout(function(){dZ.tick();},0),dY=false):void 0;}}},r,dn);dn.New=dS.Ctor(function(){r.New.call(this);this.idle=true;this.robin=[];},dn);_do=q.OperationCanceledException=dS.Class({},cE,_do);_do.New=dS.Ctor(function(dY){_do.New$1.call(this,"The operation was canceled.",null,dY);},_do);_do.New$1=dS.Ctor(function(dY,dZ,d0){this.message=dY;this.inner=dZ;cN.setPrototypeOf(this,_do.prototype);this.ct=d0;},_do);dp.$cctor=function(){dp.$cctor=a.ignore;dp.EmptyAttr=null;};dq=b5.Updates=dS.Class({},null,dq);dq.Create=function(dY){var dZ;dZ=null;dZ=dq.New(dY,null,function(){var d0;d0=dZ.s;return d0===null?(d0=cX.Copy(dZ.c()),dZ.s=d0,cX.WhenObsoleteRun(d0,function(){dZ.s=null;}),d0):d0;});return dZ;};dq.New=function(dY,dZ,d0){return new dq({c:dY,s:dZ,v:d0});};dr.$cctor=function(){dr.$cctor=a.ignore;dr.Doc=self.document;};ds.$cctor=function(){ds.$cctor=a.ignore;ds.LoadedTemplates=new bS.New$5();ds.LocalTemplatesLoaded=false;ds.TextHoleRE="\\${([^}]+)}";};dt.get_UseAnimations=function(){return dE.UseAnimations();};dt.Play=function(dY){var dZ;dZ=null;return cM.Delay(function(){return cM.Bind(dt.Run(a.ignore,dE.Actions(dY)),function(){dE.Finalize(dY);return cM.Return(null);});});};dt.Append=function(dY,dZ){return{$:0,$0:dK.Append(dY.$0,dZ.$0)};};dt.Run=function(dY,dZ){var d0;function d1(d2){function d3(d4,d5){var d6;d6=d5-d4;dZ.Compute(d6);dY();return d6<=d0?void a.requestAnimationFrame(function(d7){d3(d4,d7);}):d2();}a.requestAnimationFrame(function(d4){d3(d4,d4);});}d0=dZ.Duration;return d0===0?cM.Zero():cM.FromContinuations(function(d2,d3,d4){return d1.apply(null,[d2,d3,d4]);});};dt.Concat=function(dY){return{$:0,$0:dK.Concat(bT.map(dE.List,dY))};};dt.get_Empty=function(){return{$:0,$0:dK.Empty()};};du.BatchUpdatesEnabled=function(){dF.$cctor();return dF.BatchUpdatesEnabled;};dv.StartProcessor=function(dY){var dZ;function d0(){var d1;d1=null;return cM.Delay(function(){return cM.Bind(dY,function(){var d2;d2=dZ[0];return d2===1?(dZ[0]=0,cM.Zero()):d2===2?(dZ[0]=1,d0()):cM.Zero();});});}dZ=[0];return function(){var d1;d1=dZ[0];d1===0?(dZ[0]=1,cM.Start(d0(),null)):d1===1?dZ[0]=2:void 0;};};dw.$cctor=function(){dw.$cctor=a.ignore;dw.counter=0;};dy.New=function(dY,dZ,d0,d1){var d2;d2={DynElem:dY,DynFlags:dZ,DynNodes:d0};dS.SetOptional(d2,"OnAfterRender",d1);return d2;};dz.convertTextNode=function(dY){var dZ,d0,d1,d2,d3,d4;dZ=null;d0=0;d2=dY.textContent;d3=new a.RegExp(c1.TextHoleRE(),"g");while(dZ=d3.exec(d2),dZ!==null){dY.parentNode.insertBefore(self.document.createTextNode(bP.string(d2,{$:1,$0:d0},{$:1,$0:d3.lastIndex-bO.get(dZ,0).length-1})),dY);d0=d3.lastIndex;d4=self.document.createElement("span");d4.setAttribute("ws-replace",bO.get(dZ,1).toLowerCase());dY.parentNode.insertBefore(d4,dY);}d3.lastIndex=0;dY.textContent=bP.string(d2,{$:1,$0:d0},null);};dz.failNotLoaded=function(dY){dQ.warn("Instantiating non-loaded template",dY);};dz.fillTextHole=function(dY,dZ,d0){var d1;d1=dY.querySelector("[ws-replace]");return bQ.Equals(d1,null)?(dQ.warn("Filling non-existent text hole",d0),null):(d1.parentNode.replaceChild(new a.Text(dZ),d1),{$:1,$0:d1.getAttribute("ws-replace")});};dz.removeHolesExcept=function(dY,dZ){function d0(d1){cY.IterSelector(dY,"["+d1+"]",function(d2){if(!dZ.Contains(d2.getAttribute(d1)))d2.removeAttribute(d1);});}d0("ws-attr");d0("ws-onafterrender");d0("ws-var");cY.IterSelector(dY,"[ws-hole]",function(d1){if(!dZ.Contains(d1.getAttribute("ws-hole"))){d1.removeAttribute("ws-hole");while(d1.hasChildNodes())d1.removeChild(d1.lastChild);}});cY.IterSelector(dY,"[ws-replace]",function(d1){if(!dZ.Contains(d1.getAttribute("ws-replace")))d1.parentNode.removeChild(d1);});cY.IterSelector(dY,"[ws-on]",function(d1){d1.setAttribute("ws-on",bU.concat(" ",bO.filter(function(d2){return dZ.Contains(bO.get(bU.SplitChars(d2,[":"],1),1));},bU.SplitChars(d1.getAttribute("ws-on"),[" "],1))));});cY.IterSelector(dY,"[ws-attr-holes]",function(d1){var d2,d3,d4,d5,d6;d2=bU.SplitChars(d1.getAttribute("ws-attr-holes"),[" "],1);for(d3=0,d4=d2.length-1;d3<=d4;d3++){d5=bO.get(d2,d3);d1.setAttribute(d5,(d6=new a.RegExp(c1.TextHoleRE(),"g"),d1.getAttribute(d5).replace(d6,function(d7,d8){return dZ.Contains(d8)?d7:"";})));}});};dz.fillInstanceAttrs=function(dY,dZ){var d0,d1,d2,d3,d4;dz.convertAttrs(dZ);d0=dZ.nodeName.toLowerCase();d1=dY.querySelector("[ws-attr="+d0+"]");if(bQ.Equals(d1,null))dQ.warn("Filling non-existent attr hole",d0);else{d1.removeAttribute("ws-attr");for(d2=0,d3=dZ.attributes.length-1;d2<=d3;d2++){d4=dZ.attributes.item(d2);d4.name==="class"&&d1.hasAttribute("class")?d1.setAttribute("class",d1.getAttribute("class")+" "+d4.nodeValue):d1.setAttribute(d4.name,d4.nodeValue);}}};dz.mapHoles=function(dY,dZ){function d0(d1){cY.IterSelector(dY,"["+d1+"]",function(d2){var d3,d4;d3=(d4=null,[dZ.TryGetValue(d2.getAttribute(d1).toLowerCase(),{get:function(){return d4;},set:function(d5){d4=d5;}}),d4]);d3[0]?d2.setAttribute(d1,d3[1]):void 0;});}d0("ws-hole");d0("ws-replace");d0("ws-attr");d0("ws-onafterrender");d0("ws-var");cY.IterSelector(dY,"[ws-on]",function(d1){d1.setAttribute("ws-on",bU.concat(" ",bO.map(function(d2){var d3,d4,d5;d3=bU.SplitChars(d2,[":"],1);d4=(d5=null,[dZ.TryGetValue(bO.get(d3,1),{get:function(){return d5;},set:function(d6){d5=d6;}}),d5]);return d4[0]?bO.get(d3,0)+":"+d4[1]:d2;},bU.SplitChars(d1.getAttribute("ws-on"),[" "],1))));});cY.IterSelector(dY,"[ws-attr-holes]",function(d1){var d2,d3,d4;d2=bU.SplitChars(d1.getAttribute("ws-attr-holes"),[" "],1);for(d3=0,d4=d2.length-1;d3<=d4;d3++)(function(){var d5;function d6(d7,d8){var d9;d9=bM.KeyValue(d8);return d7.replace(new a.RegExp("\\${"+d9[0]+"}","ig"),"${"+d9[1]+"}");}d5=bO.get(d2,d3);return d1.setAttribute(d5,(((dS.Curried3(bT.fold))(d6))(d1.getAttribute(d5)))(dZ));}());});};dz.fill=function(dY,dZ,d0){while(true)if(dY.hasChildNodes())d0=dZ.insertBefore(dY.lastChild,d0);else return null;};dz.convertAttrs=function(dY){var d0,d1,d2,d3,d4,d5,d6,d7;function dZ(d8){var d9;d9=dY.getAttribute(d8);d9===null?void 0:dY.setAttribute(d8,d9.toLowerCase());}d0=dY.attributes;d1=[];d2=[];d3=[];for(d4=0,d5=d0.length-1;d4<=d5;d4++){d6=d0.item(d4);bU.StartsWith(d6.nodeName,"ws-on")&&d6.nodeName!=="ws-onafterrender"&&d6.nodeName!=="ws-on"?(d1.push(d6.nodeName),d2.push(bP.string(d6.nodeName,{$:1,$0:"ws-on".length},null)+":"+d6.nodeValue.toLowerCase())):!bU.StartsWith(d6.nodeName,"ws-")&&(new a.RegExp(c1.TextHoleRE())).test(d6.nodeValue)?(d6.nodeValue=(d7=new a.RegExp(c1.TextHoleRE(),"g"),d6.nodeValue.replace(d7,function(d8,d9){return"${"+d9.toLowerCase()+"}";})),d3.push(d6.nodeName)):void 0;}!(d2.length==0)?dY.setAttribute("ws-on",bU.concat(" ",d2)):void 0;!(d3.length==0)?dY.setAttribute("ws-attr-holes",bU.concat(" ",d3)):void 0;dZ("ws-hole");dZ("ws-replace");dZ("ws-attr");dZ("ws-onafterrender");dZ("ws-var");bO.iter(function(d8){dY.removeAttribute(d8);},d1);};dA=bR.KeyCollection=dS.Class({GetEnumerator$1:function(){return cO.Get(bT.map(function(dY){return dY.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},r,dA);dA.New=dS.Ctor(function(dY){r.New.call(this);this.d=dY;},dA);dC.New=function(dY,dZ){return{PreviousNodes:dY,Top:dZ};};dD.get_Empty=function(){return{$:0,$0:new c5.New$3()};};dD.FindAll=function(dY){var dZ;function d0(d2){if(d2!=null&&d2.$==0){d0(d2.$0);d0(d2.$1);}else if(d2!=null&&d2.$==1)d1(d2.$0);else if(d2!=null&&d2.$==2)d0(d2.$0.Current);else if(d2!=null&&d2.$==6)bO.iter(d1,d2.$0.Holes);}function d1(d2){dZ.push(d2);d0(d2.Children);}dZ=[];d0(dY);return{$:0,$0:new c5.New$2(dZ)};};dD.Filter=function(dY,dZ){return{$:0,$0:dN.Filter(dY,dZ.$0)};};dD.Except=function(dY,dZ){return{$:0,$0:dN.Except(dY.$0,dZ.$0)};};dD.ToArray=function(dY){return dN.ToArray(dY.$0);};dD.Intersect=function(dY,dZ){return{$:0,$0:dN.Intersect(dY.$0,dZ.$0)};};dE.UseAnimations=function(){dJ.$cctor();return dJ.UseAnimations;};dE.Actions=function(dY){return dE.ConcatActions(bO.choose(function(dZ){return dZ.$==1?{$:1,$0:dZ.$0}:null;},dK.ToArray(dY.$0)));};dE.Finalize=function(dY){bO.iter(function(dZ){if(dZ.$==0)dZ.$0();},dK.ToArray(dY.$0));};dE.ConcatActions=function(dY){var dZ,d0,d1,d2;dZ=c_.ofSeqNonCopying(dY);d0=bO.length(dZ);return d0===0?dE.Const():d0===1?bO.get(dZ,0):(d1=bT.max(bT.map(function(d3){return d3.Duration;},dZ)),(d2=bO.map(function(d3){return dE.Prolong(d1,d3);},dZ),dE.Def(d1,function(d3){bO.iter(function(d4){d4.Compute(d3);},d2);})));};dE.List=function(dY){return dY.$0;};dE.Const=function(dY){return dE.Def(0,function(){return dY;});};dE.Def=function(dY,dZ){return{Compute:dZ,Duration:dY};};dE.Prolong=function(dY,dZ){var d0,d1,d2;d0=dZ.Compute;d1=dZ.Duration;d2=cC.Create(function(){return dZ.Compute(dZ.Duration);});return{Compute:function(d3){return d3>=d1?d2.f():d0(d3);},Duration:dY};};dF.$cctor=function(){dF.$cctor=a.ignore;dF.BatchUpdatesEnabled=true;};dG.concat=function(dY){var dZ,d0;dZ=[];for(var d1 in dY)dZ.push.apply(dZ,dY[d1]);return dZ;};dH=q.FormatException=dS.Class({},cE,dH);dH.New$1=dS.Ctor(function(dY){this.message=dY;cN.setPrototypeOf(this,dH.prototype);},dH);dI.Clear=function(dY){dY.splice(0,bO.length(dY));};dJ.$cctor=function(){dJ.$cctor=a.ignore;dJ.CubicInOut=dM.Custom(function(dY){var dZ;dZ=dY*dY;return 3*dZ-2*(dZ*dY);});dJ.UseAnimations=true;};dK.Append=function(dY,dZ){return dY.$==0?dZ:dZ.$==0?dY:{$:2,$0:dY,$1:dZ};};dK.ToArray=function(dY){var dZ;function d0(d1){if(d1.$==1)dZ.push(d1.$0);else if(d1.$==2){d0(d1.$0);d0(d1.$1);}else if(d1.$==3)bO.iter(function(d2){dZ.push(d2);},d1.$0);}dZ=[];d0(dY);return dZ.slice(0);};dK.Concat=function(dY){var dZ;dZ=c_.ofSeqNonCopying(dY);return c_.TreeReduce(dK.Empty(),dK.Append,dZ);};dK.Empty=function(){dP.$cctor();return dP.Empty;};dL.isBlank=function(dY){return bU.forall(b1.IsWhiteSpace,dY);};dM=b5.Easing=dS.Class({},r,dM);dM.Custom=function(dY){return new dM.New(dY);};dM.New=dS.Ctor(function(dY){r.New.call(this);this.transformTime=dY;},dM);dN.Filter=function(dY,dZ){return new c5.New$2(bO.filter(dY,dN.ToArray(dZ)));};dN.Except=function(dY,dZ){var d0;d0=new c5.New$2(dN.ToArray(dZ));d0.ExceptWith(dN.ToArray(dY));return d0;};dN.ToArray=function(dY){var dZ;dZ=bO.create(dY.get_Count(),void 0);dY.CopyTo(dZ);return dZ;};dN.Intersect=function(dY,dZ){var d0;d0=new c5.New$2(dN.ToArray(dY));d0.IntersectWith(dN.ToArray(dZ));return d0;};dO.Children=function(dY,dZ){var d0,d1,d2;if(dZ!=null&&dZ.$==1){d2=[];d0=dZ.$0[0].nextSibling;while(d0!==dZ.$0[1]){d2.push(d0);d0=d0.nextSibling;}return{$:0,$0:d2};}else return{$:0,$0:bO.init(dY.childNodes.length,(d1=dY.childNodes,function(d3){return d1[d3];}))};};dO.Except=function(dY,dZ){var d0;d0=dY.$0;return{$:0,$0:bO.filter(function(d1){return bO.forall(function(d2){return!(d1===d2);},d0);},dZ.$0)};};dO.Iter=function(dY,dZ){bO.iter(dY,dZ.$0);};dO.DocChildren=function(dY){var dZ;function d0(d1){if(d1!=null&&d1.$==2)d0(d1.$0.Current);else if(d1!=null&&d1.$==1)dZ.push(d1.$0.El);else if(d1==null);else if(d1!=null&&d1.$==5)dZ.push(d1.$0);else if(d1!=null&&d1.$==4)dZ.push(d1.$0.Text);else if(d1!=null&&d1.$==6)bO.iter(function(d2){if(d2==null||d2.constructor===cN)d0(d2);else dZ.push(d2);},d1.$0.Els);else{d0(d1.$0);d0(d1.$1);}}dZ=[];d0(dY.Children);return{$:0,$0:c_.ofSeqNonCopying(dZ)};};dP.$cctor=function(){dP.$cctor=a.ignore;dP.Empty={$:0};};dS.OnLoad(function(){bH.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

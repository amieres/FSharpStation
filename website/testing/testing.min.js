function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.SuperDoc=c.SuperDoc||{};e=d.SuperDocCtor=d.SuperDocCtor||{};f=d.SuperDoc=d.SuperDoc||{};g=d.SuperAttr=d.SuperAttr||{};h=d.SuperText=d.SuperText||{};i=a.WebSharper=a.WebSharper||{};j=i.Operators=i.Operators||{};k=i.Arrays=i.Arrays||{};l=i.Seq=i.Seq||{};m=i.UI=i.UI||{};n=m.View=m.View||{};o=i.Obj=i.Obj||{};p=m.Var=m.Var||{};q=m.Var$1=m.Var$1||{};r=i.Utils=i.Utils||{};s=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};t=m.Doc=m.Doc||{};u=i.JavaScript=i.JavaScript||{};v=u.JS=u.JS||{};w=a.EventTarget;x=a.Node;y=a.Object;z=i.Enumerator=i.Enumerator||{};A=m.FromView=m.FromView||{};B=m.Snap=m.Snap||{};C=u.Pervasives=u.Pervasives||{};D=i.Unchecked=i.Unchecked||{};E=m.HtmlModule=m.HtmlModule||{};F=E.attr=E.attr||{};G=m.AttrProxy=m.AttrProxy||{};H=m.DomUtility=m.DomUtility||{};I=z.T=z.T||{};J=m.Client=m.Client||{};K=J.Templates=J.Templates||{};L=a.WindowOrWorkerGlobalScope;M=m.Abbrev=m.Abbrev||{};N=M.Fresh=M.Fresh||{};O=m.ConcreteVar=m.ConcreteVar||{};P=m.AttrModule=m.AttrModule||{};Q=m.Attrs=m.Attrs||{};R=m.Elt=m.Elt||{};S=m.Array=m.Array||{};T=i.Collections=i.Collections||{};U=T.Dictionary=T.Dictionary||{};V=m.Docs=m.Docs||{};W=m.DocElemNode=m.DocElemNode||{};X=a.CharacterData;Y=m.Updates=m.Updates||{};Z=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_0=i.List=i.List||{};_1=_0.T=_0.T||{};_2=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_3=T.HashSet=T.HashSet||{};_4=m.An=m.An||{};_5=J.Settings=J.Settings||{};_6=M.Mailbox=M.Mailbox||{};_7=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_8=m.DynamicAttrNode=m.DynamicAttrNode||{};_9=J.Attrs=J.Attrs||{};_=_9.Dyn=_9.Dyn||{};$=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};ba=T.DictionaryUtil=T.DictionaryUtil||{};bb=K.Prepare=K.Prepare||{};bc=i.Slice=i.Slice||{};bd=T.KeyCollection=T.KeyCollection||{};be=J.Docs=J.Docs||{};bf=be.RunState=be.RunState||{};bg=be.NodeSet=be.NodeSet||{};bh=m.Anims=m.Anims||{};bi=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bj=i.Queue=i.Queue||{};bk=i.Strings=i.Strings||{};bl=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bm=i.Concurrency=i.Concurrency||{};bn=m.AppendList=m.AppendList||{};bo=m.Easing=m.Easing||{};bp=bm.AsyncBody=bm.AsyncBody||{};bq=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};br=bm.CT=bm.CT||{};bs=M.HashSet=M.HashSet||{};bt=T.HashSetUtil=T.HashSetUtil||{};bu=bm.Scheduler=bm.Scheduler||{};bv=i.CancellationTokenSource=i.CancellationTokenSource||{};bw=be.DomNodes=be.DomNodes||{};bx=a.Error;by=i.OperationCanceledException=i.OperationCanceledException||{};bz=i.Lazy=i.Lazy||{};bA=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bB=i.LazyExtensionsProxy=i.LazyExtensionsProxy||{};bC=bB.LazyRecord=bB.LazyRecord||{};bD=a.IntelliFactory;bE=bD&&bD.Runtime;bF=a.console;bG=a.jQuery;bH=a.Date;d.W=function(bI){var bJ;bJ={FsRoot_TestingJS_SuperDoc_IView$GetView:function(){return bI.get_View();}};o.New.call(bJ);return bJ;};d.mapW=function(bI,bJ){return new h({$:1,$0:n.Map(bI,bJ.FsRoot_TestingJS_SuperDoc_IView$GetView())});};d.TA=function(bI,bJ){return new g({$:0,$0:function(){return bI(bJ);}});};d.TT=function(bI){return new h({$:0,$0:bI});};d.TW=function(bI){return new h({$:1,$0:bI});};d.TV=function(bI){return new h({$:2,$0:bI});};d.op_Dereference=function(bI){return n.Const(bI);};d.op_Multiply=function(bI,bJ){return n.Apply(bI,bJ);};d.getSuperDoc=function(bI){return bI.getSuperDoc$1();};d.worldW=function(){s.$cctor();return s.worldW;};d.nameV=function(){s.$cctor();return s.nameV;};d.helloW=function(){s.$cctor();return s.helloW;};d.iAmW=function(){s.$cctor();return s.iAmW;};d.helloIamW=function(){s.$cctor();return s.helloIamW;};d.colorW=function(){s.$cctor();return s.colorW;};d.superElt=function(bI,bJ){return(new e({$:0,$0:bI,$1:[],$2:[]})).getSuperDoc(bJ);};d.T=a.id;d.div=function(bI){return d.superElt((bE.Curried3(t.Element))("div"),bI);};d.HelloWorld=function(){s.$cctor();return s.HelloWorld;};d.HelloWorld2=function(){s.$cctor();return s.HelloWorld2;};d.input=function(bI,bJ){return(new e({$:0,$0:function(bK){return function(){return t.Input(bK,bI);};},$1:[],$2:[]})).getSuperDoc(bJ);};d.eventClick=function(bI){return new g({$:0,$0:function(){return G.HandlerImpl("click",bI);}});};d.htmlF=function(bI,bJ){return e.New(bI).getSuperDoc(bJ);};d.htmlTag=function(bI,bJ){return e.New((bE.Curried3(t.Element))(bI)).getSuperDoc(bJ);};d.button0=function(bI,bJ){return e.New((bE.Curried3(t.Element))("button")).getSuperDoc(l.append([d.eventClick(bI)],bJ));};d.button=function(bI){return d.htmlF((bE.Curried3(t.Element))("button"),bI);};d.helloAct=function(bI,bJ){a.alert((function(bK){return function(bL){return bK("Hello "+r.toSafe(bL)+"!");};}(a.id))(d.nameV().Get()));};d.hiAct=function(bI,bJ){a.alert((function(bK){return function(bL){return bK("Hi "+r.toSafe(bL)+", How are you?");};}(a.id))(d.nameV().Get()));};d.buttonHello=function(){s.$cctor();return s.buttonHello;};d.buttonHi=function(){s.$cctor();return s.buttonHi;};d.buttonMore=function(){s.$cctor();return s.buttonMore;};d.inpName=function(){s.$cctor();return s.inpName;};d.HelloWorld3=function(){s.$cctor();return s.HelloWorld3;};d.HelloWorld4=function(){s.$cctor();return s.HelloWorld4;};d.mainDoc=function(){s.$cctor();return s.mainDoc;};d.main=function(){var bI,bJ;bI=d.mainDoc().Doc();bJ=self.document.body;K.LoadLocalTemplates("");t.Run(bJ,bI);};e=d.SuperDocCtor=bE.Class({getSuperDoc$1:function(){var bI,bJ,bK,bL;bI=this;bJ=bI.$0;bK=bI.$2;bL=bI.$1;return new f({$:0,$0:function(){return(bJ(k.map(function(bM){return bM.$0();},bL)))(k.map(function(bM){return bM.$0();},bK));}});},applyChildren:function(bI){return l.fold(function(bJ,bK){return bK.FsRoot_TestingJS_SuperDoc_ITransformSuperDocCtor$Transform(bJ);},this,bI);},getSuperDoc:function(bI){return this.applyChildren(bI).getSuperDoc$1();}},null,e);e.New=function(bI){return new e({$:0,$0:bI,$1:[],$2:[]});};f=d.SuperDoc=bE.Class({Transform:function(bI){return new e({$:0,$0:bI.$0,$1:bI.$1,$2:bI.$2.concat([this])});},get_T:function(){return this;},Doc:function(){return this.$0();},FsRoot_TestingJS_SuperDoc_ITransformSuperDocCtor$Transform:function(bI){return this.Transform(bI);}},null,f);g=d.SuperAttr=bE.Class({Transform:function(bI){return new e({$:0,$0:bI.$0,$1:bI.$1.concat([this]),$2:bI.$2});},get_T:function(){return this;},FsRoot_TestingJS_SuperDoc_ITransformSuperDocCtor$Transform:function(bI){return this.Transform(bI);}},null,g);h=d.SuperText=bE.Class({Transform:function(bI){var bJ,bK,bL;return new e({$:0,$0:bI.$0,$1:bI.$1,$2:bI.$2.concat([new f({$:0,$0:this.$==1?(bJ=this.$0,function(){return t.TextView(bJ);}):this.$==2?(bK=this.$0,function(){return t.TextView(bK.get_View());}):(bL=this.$0,function(){return t.TextNode(bL);})})])});},get_T:function(){return this;},get_V:function(){return this.$==2?this.$0:this.$==0?new A.New(n.Const(this.$0),a.ignore):new A.New(this.$0,a.ignore);},Txt:function(){return this.$==2?this.$0.get_View():this.$==0?n.Const(this.$0):this.$0;},FsRoot_TestingJS_SuperDoc_ITransformSuperDocCtor$Transform:function(bI){return this.Transform(bI);},FsRoot_TestingJS_SuperDoc_IView$GetView:function(){return this.Txt();}},null,h);j.KeyValue=function(bI){return[bI.K,bI.V];};j.FailWith=function(bI){throw new bx(bI);};k.map=function(bI,bJ){var bK,bL,bM;bK=new a.Array(bJ.length);for(bL=0,bM=bJ.length-1;bL<=bM;bL++)bK[bL]=bI(bJ[bL]);return bK;};k.ofList=function(bI){var bJ,bK;bK=[];bJ=bI;while(!(bJ.$==0)){bK.push(_0.head(bJ));bJ=_0.tail(bJ);}return bK;};k.exists=function(bI,bJ){var bK,bL,bM,bN;bK=false;bL=0;bN=k.length(bJ);while(!bK&&bL<bN)if(bI(bJ[bL]))bK=true;else bL=bL+1;return bK;};k.tryPick=function(bI,bJ){var bK,bL,bM;bK=null;bL=0;while(bL<bJ.length&&bK==null){bM=bI(bJ[bL]);bM!=null&&bM.$==1?bK=bM:void 0;bL=bL+1;}return bK;};k.tryFindIndex=function(bI,bJ){var bK,bL;bK=null;bL=0;while(bL<bJ.length&&bK==null){bI(bJ[bL])?bK={$:1,$0:bL}:void 0;bL=bL+1;}return bK;};k.foldBack=function(bI,bJ,bK){var bL,bM,bN,bO,bP;bL=bK;bN=bJ.length;for(bO=1,bP=bN;bO<=bP;bO++)bL=bI(bJ[bN-bO],bL);return bL;};k.filter=function(bI,bJ){var bK,bL,bM;bK=[];for(bL=0,bM=bJ.length-1;bL<=bM;bL++)if(bI(bJ[bL]))bK.push(bJ[bL]);return bK;};k.iter=function(bI,bJ){var bK,bL;for(bK=0,bL=bJ.length-1;bK<=bL;bK++)bI(bJ[bK]);};k.concat=function(bI){return a.Array.prototype.concat.apply([],k.ofSeq(bI));};k.pick=function(bI,bJ){var bK;bK=k.tryPick(bI,bJ);return bK==null?j.FailWith("KeyNotFoundException"):bK.$0;};k.choose=function(bI,bJ){var bK,bL,bM,bN;bK=[];for(bL=0,bM=bJ.length-1;bL<=bM;bL++){bN=bI(bJ[bL]);bN==null?void 0:bK.push(bN.$0);}return bK;};k.ofSeq=function(bI){var bJ,bK;if(bI instanceof a.Array)return bI.slice();else if(bI instanceof _1)return k.ofList(bI);else{bJ=[];bK=z.Get(bI);try{while(bK.MoveNext())bJ.push(bK.Current());return bJ;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}}};k.create=function(bI,bJ){var bK,bL,bM;bK=new a.Array(bI);for(bL=0,bM=bI-1;bL<=bM;bL++)bK[bL]=bJ;return bK;};k.init=function(bI,bJ){var bK,bL,bM;bI<0?j.FailWith("Negative size given."):null;bK=new a.Array(bI);for(bL=0,bM=bI-1;bL<=bM;bL++)bK[bL]=bJ(bL);return bK;};k.forall=function(bI,bJ){var bK,bL,bM,bN;bK=true;bL=0;bN=k.length(bJ);while(bK&&bL<bN)if(bI(bJ[bL]))bL=bL+1;else bK=false;return bK;};l.fold=function(bI,bJ,bK){var bL,bM;bL=bJ;bM=z.Get(bK);try{while(bM.MoveNext())bL=bI(bL,bM.Current());return bL;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};l.append=function(bI,bJ){return{GetEnumerator:function(){var bK,bL;bK=z.Get(bI);bL=[true];return new I.New(bK,null,function(bM){var bN;return bM.s.MoveNext()?(bM.c=bM.s.Current(),true):(bN=bM.s,!D.Equals(bN,null)?bN.Dispose():void 0,bM.s=null,bL[0]&&(bL[0]=false,bM.s=z.Get(bJ),bM.s.MoveNext()?(bM.c=bM.s.Current(),true):(bM.s.Dispose(),bM.s=null,false)));},function(bM){var bN;bN=bM.s;!D.Equals(bN,null)?bN.Dispose():void 0;});}};};l.head=function(bI){var bJ;bJ=z.Get(bI);try{return bJ.MoveNext()?bJ.Current():l.insufficient();}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}};l.iter=function(bI,bJ){var bK;bK=z.Get(bJ);try{while(bK.MoveNext())bI(bK.Current());}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};l.map=function(bI,bJ){return{GetEnumerator:function(){var bK;bK=z.Get(bJ);return new I.New(null,null,function(bL){return bK.MoveNext()&&(bL.c=bI(bK.Current()),true);},function(){bK.Dispose();});}};};l.max=function(bI){var bJ,bK,bL;bJ=z.Get(bI);try{if(!bJ.MoveNext())l.seqEmpty();bK=bJ.Current();while(bJ.MoveNext()){bL=bJ.Current();D.Compare(bL,bK)===1?bK=bL:void 0;}return bK;}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}};l.seqEmpty=function(){return j.FailWith("The input sequence was empty.");};n=m.View=bE.Class({},null,n);o=i.Obj=bE.Class({Equals:function(bI){return this===bI;},GetHashCode:function(){return -1;}},null,o);o.New=bE.Ctor(function(){},o);p=m.Var=bE.Class({},o,p);p.New=bE.Ctor(function(){o.New.call(this);},p);q=m.Var$1=bE.Class({},o,q);q.Create$1=function(bI){return new O.New(false,B.New({$:2,$0:bI,$1:[]}),bI);};n.Const=function(bI){var bJ;bJ=B.New({$:0,$0:bI});return function(){return bJ;};};n.Map=function(bI,bJ){return n.CreateLazy(function(){return B.Map(bI,bJ());});};n.Map2=function(bI,bJ,bK){return n.CreateLazy(function(){return B.Map2(bI,bJ(),bK());});};n.Apply=function(bI,bJ){return n.Map2(function(bK,bL){return bK(bL);},bI,bJ);};n.CreateLazy=function(bI){var bJ;bJ={c:null,o:bI};return function(){var bK,bL;bK=bJ.c;return bK===null?(bK=bJ.o(),bJ.c=bK,(bL=bK.s,bL!=null&&bL.$==0)?bJ.o=null:B.WhenObsoleteRun(bK,function(){bJ.c=null;}),bK):bK;};};n.TryGet=function(bI){return B.TryGet(bI());};n.Map2Unit=function(bI,bJ){return n.CreateLazy(function(){return B.Map2Unit(bI(),bJ());});};n.Sink=function(bI,bJ){function bK(){B.WhenRun(bJ(),bI,function(){bm.scheduler().Fork(bK);});}bm.scheduler().Fork(bK);};n.Get=function(bI,bJ){var bK;function bL(){B.WhenRun(bJ(),function(bM){if(!bK[0]){bK[0]=true;bI(bM);}},function(){if(!bK[0])bL();});}bK=[false];bL();};r.toSafe=function(bI){return bI==null?"":bI;};s.$cctor=function(){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;s.$cctor=a.ignore;function b4(b5,b6){return b5+b6;}s.worldW=d.TT("World");s.nameV=q.Create$1("Abe");s.helloW=(bI=d.worldW(),d.mapW(function(b5){return function(b6){return b5("Hello "+r.toSafe(b6)+"!");};}(a.id),bI));s.iAmW=(bJ=d.W(d.nameV()),d.mapW(function(b5){return function(b6){return b5("My name is "+r.toSafe(b6)+".");};}(a.id),bJ));s.helloIamW=d.op_Multiply(d.op_Multiply(d.op_Dereference((bE.Curried3(function(b5,b6,b7){return b5("Hello "+r.toSafe(b6)+"!, my name is "+r.toSafe(b7)+".");}))(a.id)),d.worldW().Txt()),d.nameV().get_View());s.colorW=d.op_Multiply(d.op_Dereference(function(b5){return function(b6){return b5("color:"+r.toSafe(b6));};}(a.id)),d.nameV().get_View());s.HelloWorld=d.div([(bK=d.helloW(),(bL=d.iAmW(),new h({$:1,$0:(bM=bK.Txt(),(bN=bL.Txt(),((bO=(bE.Curried3(function(b5,b6,b7){return b5(r.toSafe(b6)+" "+r.toSafe(b7));}))(a.id),(bE.Curried3(n.Map2))(function(b5,b6){return(bO(b5))(b6);}))(bM))(bN)))})))]);s.HelloWorld2=d.div([d.T(d.HelloWorld()),d.T(d.helloW()),d.T(d.iAmW()),d.T(d.div([new h({$:1,$0:n.Map(function(b5){return b5+".";},(bP=new h({$:1,$0:n.Map(function(b5){return b5+"!, my name is";},(new h({$:1,$0:n.Map(function(b5){return"Hello"+b5;},d.worldW().Txt())})).Txt())}),(bQ=d.nameV(),new h({$:1,$0:(bR=bP.Txt(),(bS=bQ.get_View(),(((bE.Curried3(n.Map2))(b4))(bR))(bS)))}))).Txt())})]))]);s.buttonHello=d.htmlTag("button",(bT=new h({$:1,$0:n.Map(function(b5){return(((bE.Curried3(function(b6,b7,b8){return b6(r.toSafe(b7)+" "+r.toSafe(b8));}))(a.id))("Say Hello to my little"))(b5);},d.TV(d.nameV()).Txt())}),(bU=d.eventClick(function(b5){return function(b6){return d.helloAct(b5,b6);};}),[bT.get_T(),bU.get_T()])).concat([d.TA(function(b5){return G.Create("style",b5);},"font-weight:800").get_T()]).concat([d.TA(function(b5){return P.Dynamic("style",b5);},d.colorW()).get_T()]));s.buttonHi=d.button((bV=new h({$:1,$0:n.Map(function(b5){return(((bE.Curried3(function(b6,b7,b8){return b6(r.toSafe(b7)+" "+r.toSafe(b8));}))(a.id))(b5))("How are you?");},(new h({$:1,$0:n.Map(function(b5){return(((bE.Curried3(function(b6,b7,b8){return b6(r.toSafe(b7)+" "+r.toSafe(b8));}))(a.id))("Hi"))(b5);},d.TV(d.nameV()).Txt())})).Txt())}),(bW=d.eventClick(function(b5){return function(b6){return d.hiAct(b5,b6);};}),[bV.get_T(),bW.get_T()])));s.buttonMore=d.htmlF((bE.Curried3(t.Element))("button"),(bX=new h({$:1,$0:n.Map(function(b5){return(((bE.Curried3(function(b6,b7,b8){return b6(r.toSafe(b7)+" "+r.toSafe(b8));}))(a.id))(b5))("How are you?");},(new h({$:1,$0:n.Map(function(b5){return(((bE.Curried3(function(b6,b7,b8){return b6(r.toSafe(b7)+" "+r.toSafe(b8));}))(a.id))("Hi"))(b5);},d.TV(d.nameV()).Txt())})).Txt())}),(bY=d.eventClick(function(b5){return function(b6){return d.hiAct(b5,b6);};}),[bX.get_T(),bY.get_T()])));s.inpName=d.input(d.nameV(),[]);s.HelloWorld3=d.div([new h({$:1,$0:d.helloIamW()})]);s.HelloWorld4=d.div((bZ=d.HelloWorld(),(b0=d.helloW(),(b1=new h({$:0,$0:" "}),[bZ.get_T(),b1.get_T()]).concat([b0.get_T()]))).concat([d.iAmW().get_T()]).concat([d.HelloWorld().get_T()]));s.mainDoc=d.div((b2=d.HelloWorld(),(b3=d.HelloWorld2(),[b2.get_T(),b3.get_T()])).concat([d.HelloWorld3().get_T()]).concat([d.HelloWorld4().get_T()]).concat([d.inpName().get_T()]).concat([d.buttonHello().get_T()]).concat([d.buttonHi().get_T()]));};t=m.Doc=bE.Class({},o,t);t.Element=function(bI,bJ,bK){var bL,bM;bL=G.Concat(bJ);bM=t.Concat(bK);return R.New(H.CreateElement(bI),bL,bM);};t.TextNode=function(bI){return t.Mk({$:5,$0:H.CreateText(bI)},n.Const());};t.Input=function(bI,bJ){return t.InputInternal("input",function(){return l.append(bI,[P.Value(bJ)]);});};t.Concat=function(bI){var bJ;bJ=S.ofSeqNonCopying(bI);return S.TreeReduce(t.get_Empty(),t.Append,bJ);};t.Run=function(bI,bJ){V.LinkElement(bI,bJ.docNode);t.RunInPlace(false,bI,bJ);};t.TextView=function(bI){var bJ;bJ=V.CreateTextNode();return t.Mk({$:4,$0:bJ},n.Map(function(bK){V.UpdateTextNode(bJ,bK);},bI));};t.Mk=function(bI,bJ){return new t.New(bI,bJ);};t.InputInternal=function(bI,bJ){var bK;bK=H.CreateElement(bI);return R.New(bK,G.Concat(bJ(bK)),t.get_Empty());};t.Append=function(bI,bJ){return t.Mk({$:0,$0:bI.docNode,$1:bJ.docNode},n.Map2Unit(bI.updates,bJ.updates));};t.get_Empty=function(){return t.Mk(null,n.Const());};t.RunInPlace=function(bI,bJ,bK){var bL;bL=V.CreateRunState(bJ,bK.docNode);n.Sink(_4.get_UseAnimations()||_5.BatchUpdatesEnabled()?_6.StartProcessor(V.PerformAnimatedUpdate(bI,bL,bK.docNode)):function(){V.PerformSyncUpdate(bI,bL,bK.docNode);},bK.updates);};t.New=bE.Ctor(function(bI,bJ){o.New.call(this);this.docNode=bI;this.updates=bJ;},t);v.GetFieldValues=function(bI){var bJ,bK;bJ=[];for(var bL in bI)bJ.push(bI[bL]);return bJ;};z.Get=function(bI){return bI instanceof a.Array?z.ArrayEnumerator(bI):D.Equals(typeof bI,"string")?z.StringEnumerator(bI):bI.GetEnumerator();};z.ArrayEnumerator=function(bI){return new I.New(0,null,function(bJ){var bK;bK=bJ.s;return bK<k.length(bI)&&(bJ.c=k.get(bI,bK),bJ.s=bK+1,true);},void 0);};z.StringEnumerator=function(bI){return new I.New(0,null,function(bJ){var bK;bK=bJ.s;return bK<bI.length&&(bJ.c=bI[bK],bJ.s=bK+1,true);},void 0);};z.Get0=function(bI){return bI instanceof a.Array?z.ArrayEnumerator(bI):D.Equals(typeof bI,"string")?z.StringEnumerator(bI):"GetEnumerator0"in bI?bI.GetEnumerator0():bI.GetEnumerator();};k.get=function(bI,bJ){k.checkBounds(bI,bJ);return bI[bJ];};k.length=function(bI){return bI.dims===2?bI.length*bI.length:bI.length;};k.checkBounds=function(bI,bJ){if(bJ<0||bJ>=bI.length)j.FailWith("Index was outside the bounds of the array.");};k.set=function(bI,bJ,bK){k.checkBounds(bI,bJ);bI[bJ]=bK;};A=m.FromView=bE.Class({get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(bI){var bJ;bJ=this;n.Get(function(bK){var bL;bL=bI(bK);bL!=null&&bL.$==1?bJ.set(bL.$0):void 0;},this.view);},Set:function(bI){this.set(bI);}},p,A);A.New=bE.Ctor(function(bI,bJ){var bK,bL;bK=this;p.New.call(this);this.set=bJ;this.id=N.Int();this.current=(bL=n.TryGet(bI),bL==null?null:bL.$0);this.view=n.Map(function(bM){bK.current=bM;return bM;},bI);},A);B.Map=function(bI,bJ){var bK,bL;bK=bJ.s;return bK!=null&&bK.$==0?B.New({$:0,$0:bI(bK.$0)}):(bL=B.New({$:3,$0:[],$1:[]}),(B.When(bJ,function(bM){B.MarkDone(bL,bJ,bI(bM));},bL),bL));};B.Map2=function(bI,bJ,bK){var bL,bM,bN;function bO(bP){var bQ,bR,bS;if(!(bQ=bN.s,bQ!=null&&bQ.$==0||bQ!=null&&bQ.$==2)){bR=B.ValueAndForever(bJ);bS=B.ValueAndForever(bK);bR!=null&&bR.$==1?bS!=null&&bS.$==1?bR.$0[1]&&bS.$0[1]?B.MarkForever(bN,bI(bR.$0[0],bS.$0[0])):B.MarkReady(bN,bI(bR.$0[0],bS.$0[0])):void 0:void 0;}}bL=bJ.s;bM=bK.s;return bL!=null&&bL.$==0?bM!=null&&bM.$==0?B.New({$:0,$0:bI(bL.$0,bM.$0)}):B.Map2Opt1(bI,bL.$0,bK):bM!=null&&bM.$==0?B.Map2Opt2(bI,bM.$0,bJ):(bN=B.New({$:3,$0:[],$1:[]}),(B.When(bJ,bO,bN),B.When(bK,bO,bN),bN));};B.WhenObsoleteRun=function(bI,bJ){var bK;bK=bI.s;bK==null?bJ():bK!=null&&bK.$==2?bK.$1.push(bJ):bK!=null&&bK.$==3?bK.$1.push(bJ):void 0;};B.When=function(bI,bJ,bK){var bL;bL=bI.s;bL==null?B.Obsolete(bK):bL!=null&&bL.$==2?(B.EnqueueSafe(bL.$1,bK),bJ(bL.$0)):bL!=null&&bL.$==3?(bL.$0.push(bJ),B.EnqueueSafe(bL.$1,bK)):bJ(bL.$0);};B.MarkDone=function(bI,bJ,bK){var bL;if(bL=bJ.s,bL!=null&&bL.$==0)B.MarkForever(bI,bK);else B.MarkReady(bI,bK);};B.Map2Opt1=function(bI,bJ,bK){return B.Map(function(bL){return bI(bJ,bL);},bK);};B.Map2Opt2=function(bI,bJ,bK){return B.Map(function(bL){return bI(bL,bJ);},bK);};B.ValueAndForever=function(bI){var bJ;bJ=bI.s;return bJ!=null&&bJ.$==0?{$:1,$0:[bJ.$0,true]}:bJ!=null&&bJ.$==2?{$:1,$0:[bJ.$0,false]}:null;};B.MarkForever=function(bI,bJ){var bK,bL,bM,bN;bK=bI.s;if(bK!=null&&bK.$==3){bI.s={$:0,$0:bJ};bL=bK.$0;for(bM=0,bN=k.length(bL)-1;bM<=bN;bM++)(k.get(bL,bM))(bJ);}else void 0;};B.MarkReady=function(bI,bJ){var bK,bL,bM,bN;bK=bI.s;if(bK!=null&&bK.$==3){bI.s={$:2,$0:bJ,$1:bK.$1};bL=bK.$0;for(bM=0,bN=k.length(bL)-1;bM<=bN;bM++)(k.get(bL,bM))(bJ);}else void 0;};B.TryGet=function(bI){var bJ,bK;bJ=bI.s;return(bJ!=null&&bJ.$==0?(bK=bJ.$0,true):bJ!=null&&bJ.$==2&&(bK=bJ.$0,true))?{$:1,$0:bK}:null;};B.EnqueueSafe=function(bI,bJ){var bK,bL,bM,bN;bI.push(bJ);if(bI.length%20===0){bK=bI.slice(0);bj.Clear(bI);for(bL=0,bM=k.length(bK)-1;bL<=bM;bL++){bN=k.get(bK,bL);typeof bN=="object"?function(bO){if(bO.s)bI.push(bO);}(bN):function(bO){bI.push(bO);}(bN);}}else void 0;};B.Copy=function(bI){var bJ,bK,bL;bJ=bI.s;return bJ==null?bI:bJ!=null&&bJ.$==2?(bK=B.New({$:2,$0:bJ.$0,$1:[]}),(B.WhenObsolete(bI,bK),bK)):bJ!=null&&bJ.$==3?(bL=B.New({$:3,$0:[],$1:[]}),(B.When(bI,function(bM){B.MarkDone(bL,bI,bM);},bL),bL)):bI;};B.Map2Unit=function(bI,bJ){var bK,bL,bM;function bN(){var bO,bP,bQ;if(!(bO=bM.s,bO!=null&&bO.$==0||bO!=null&&bO.$==2)){bP=B.ValueAndForever(bI);bQ=B.ValueAndForever(bJ);bP!=null&&bP.$==1?bQ!=null&&bQ.$==1?bP.$0[1]&&bQ.$0[1]?B.MarkForever(bM,null):B.MarkReady(bM,null):void 0:void 0;}}bK=bI.s;bL=bJ.s;return bK!=null&&bK.$==0?bL!=null&&bL.$==0?B.New({$:0,$0:null}):bJ:bL!=null&&bL.$==0?bI:(bM=B.New({$:3,$0:[],$1:[]}),(B.When(bI,bN,bM),B.When(bJ,bN,bM),bM));};B.WhenRun=function(bI,bJ,bK){var bL;bL=bI.s;bL==null?bK():bL!=null&&bL.$==2?(bL.$1.push(bK),bJ(bL.$0)):bL!=null&&bL.$==3?(bL.$0.push(bJ),bL.$1.push(bK)):bJ(bL.$0);};B.WhenObsolete=function(bI,bJ){var bK;bK=bI.s;bK==null?B.Obsolete(bJ):bK!=null&&bK.$==2?B.EnqueueSafe(bK.$1,bJ):bK!=null&&bK.$==3?B.EnqueueSafe(bK.$1,bJ):void 0;};C.NewFromSeq=function(bI){var bJ,bK,bL;bJ={};bK=z.Get(bI);try{while(bK.MoveNext()){bL=bK.Current();bJ[bL[0]]=bL[1];}}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}return bJ;};D.Equals=function(bI,bJ){var bK,bL,bM,bN;if(bI===bJ)return true;else{bK=typeof bI;if(bK=="object"){if(bI===null||bI===void 0||bJ===null||bJ===void 0)return false;else if("Equals"in bI)return bI.Equals(bJ);else if(bI instanceof a.Array&&bJ instanceof a.Array)return D.arrayEquals(bI,bJ);else if(bI instanceof a.Date&&bJ instanceof a.Date)return D.dateEquals(bI,bJ);else{bL=[true];for(var bO in bI)if(function(bP){bL[0]=!bI.hasOwnProperty(bP)||bJ.hasOwnProperty(bP)&&D.Equals(bI[bP],bJ[bP]);return!bL[0];}(bO))break;if(bL[0]){for(var bP in bJ)if(function(bQ){bL[0]=!bJ.hasOwnProperty(bQ)||bI.hasOwnProperty(bQ);return!bL[0];}(bP))break;}return bL[0];}}else return bK=="function"&&("$Func"in bI?bI.$Func===bJ.$Func&&bI.$Target===bJ.$Target:"$Invokes"in bI&&"$Invokes"in bJ&&D.arrayEquals(bI.$Invokes,bJ.$Invokes));}};D.arrayEquals=function(bI,bJ){var bK,bL;if(k.length(bI)===k.length(bJ)){bK=true;bL=0;while(bK&&bL<k.length(bI)){!D.Equals(k.get(bI,bL),k.get(bJ,bL))?bK=false:void 0;bL=bL+1;}return bK;}else return false;};D.dateEquals=function(bI,bJ){return bI.getTime()===bJ.getTime();};D.Hash=function(bI){var bJ;bJ=typeof bI;return bJ=="function"?0:bJ=="boolean"?bI?1:0:bJ=="number"?bI:bJ=="string"?D.hashString(bI):bJ=="object"?bI==null?0:bI instanceof a.Array?D.hashArray(bI):D.hashObject(bI):0;};D.hashString=function(bI){var bJ,bK,bL;if(bI===null)return 0;else{bJ=5381;for(bK=0,bL=bI.length-1;bK<=bL;bK++)bJ=D.hashMix(bJ,bI[bK].charCodeAt());return bJ;}};D.hashArray=function(bI){var bJ,bK,bL;bJ=-34948909;for(bK=0,bL=k.length(bI)-1;bK<=bL;bK++)bJ=D.hashMix(bJ,D.Hash(k.get(bI,bK)));return bJ;};D.hashObject=function(bI){var bJ,bK;if("GetHashCode"in bI)return bI.GetHashCode();else{bJ=[0];for(var bL in bI)if(function(bM){bJ[0]=D.hashMix(D.hashMix(bJ[0],D.hashString(bM)),D.Hash(bI[bM]));return false;}(bL))break;return bJ[0];}};D.hashMix=function(bI,bJ){return(bI<<5)+bI+bJ;};D.Compare=function(bI,bJ){var bK,bL,bM,bN,bO,bP;if(bI===bJ)return 0;else{bL=typeof bI;switch(bL=="function"?1:bL=="boolean"?2:bL=="number"?2:bL=="string"?2:bL=="object"?3:0){case 0:return typeof bJ=="undefined"?0:-1;case 1:return j.FailWith("Cannot compare function values.");case 2:return bI<bJ?-1:1;case 3:if(bI===null)bM=-1;else if(bJ===null)bM=1;else if("CompareTo"in bI)bM=bI.CompareTo(bJ);else if("CompareTo0"in bI)bM=bI.CompareTo0(bJ);else if(bI instanceof a.Array&&bJ instanceof a.Array)bM=D.compareArrays(bI,bJ);else if(bI instanceof a.Date&&bJ instanceof a.Date)bM=D.compareDates(bI,bJ);else{bN=[0];for(var bQ in bI)if(function(bR){return!bI.hasOwnProperty(bR)?false:!bJ.hasOwnProperty(bR)?(bN[0]=1,true):(bN[0]=D.Compare(bI[bR],bJ[bR]),bN[0]!==0);}(bQ))break;if(bN[0]===0){for(var bR in bJ)if(function(bS){return!bJ.hasOwnProperty(bS)?false:!bI.hasOwnProperty(bS)&&(bN[0]=-1,true);}(bR))break;}bM=bN[0];}return bM;}}};D.compareArrays=function(bI,bJ){var bK,bL;if(k.length(bI)<k.length(bJ))return -1;else if(k.length(bI)>k.length(bJ))return 1;else{bK=0;bL=0;while(bK===0&&bL<k.length(bI)){bK=D.Compare(k.get(bI,bL),k.get(bJ,bL));bL=bL+1;}return bK;}};D.compareDates=function(bI,bJ){return D.Compare(bI.getTime(),bJ.getTime());};F=E.attr=bE.Class({},o,F);G=m.AttrProxy=bE.Class({},null,G);G.HandlerImpl=function(bI,bJ){return Q.Static(function(bK){bK.addEventListener(bI,function(bL){return(bJ(bK))(bL);},false);});};G.Concat=function(bI){var bJ;bJ=S.ofSeqNonCopying(bI);return S.TreeReduce(Q.EmptyAttr(),G.Append,bJ);};G.Create=function(bI,bJ){return Q.Static(function(bK){H.SetAttr(bK,bI,bJ);});};G.Append=function(bI,bJ){return Q.AppendTree(bI,bJ);};H.CreateElement=function(bI){return H.Doc().createElement(bI);};H.CreateText=function(bI){return H.Doc().createTextNode(bI);};H.Doc=function(){Z.$cctor();return Z.Doc;};H.SetAttr=function(bI,bJ,bK){bI.setAttribute(bJ,bK);};H.ChildrenArray=function(bI){var bJ,bK,bL;bJ=[];for(bK=0,bL=bI.childNodes.length-1;bK<=bL;bK++)bJ.push(bI.childNodes[bK]);return bJ;};H.IterSelector=function(bI,bJ,bK){var bL,bM,bN;bL=bI.querySelectorAll(bJ);for(bM=0,bN=bL.length-1;bM<=bN;bM++)bK(bL[bM]);};H.InsertAt=function(bI,bJ,bK){var bL;if(!(bK.parentNode===bI&&bJ===(bL=bK.nextSibling,D.Equals(bL,null)?null:bL)))bI.insertBefore(bK,bJ);};H.RemoveNode=function(bI,bJ){if(bJ.parentNode===bI)bI.removeChild(bJ);};I=z.T=bE.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},o,I);I.New=bE.Ctor(function(bI,bJ,bK,bL){o.New.call(this);this.s=bI;this.c=bJ;this.n=bK;this.d=bL;},I);K.LoadLocalTemplates=function(bI){!K.LocalTemplatesLoaded()?(K.set_LocalTemplatesLoaded(true),K.LoadNestedTemplates(self.document.body,"")):void 0;K.LoadedTemplates().set_Item(bI,K.LoadedTemplateFile(""));};K.LocalTemplatesLoaded=function(){_2.$cctor();return _2.LocalTemplatesLoaded;};K.set_LocalTemplatesLoaded=function(bI){_2.$cctor();_2.LocalTemplatesLoaded=bI;};K.LoadNestedTemplates=function(bI,bJ){var bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY;function bK(bZ){var b0,b1;if(!bL.ContainsKey(bZ)){b0=(b1=null,[bM.TryGetValue(bZ,{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]);b0[0]?(bY.Add(bZ),bM.Remove(bZ),K.PrepareTemplateStrict(bJ,{$:1,$0:bZ},b0[1][0],{$:1,$0:b0[1][1]},{$:1,$0:bK})):bF.warn(bY.Contains(bZ)?"Encountered loop when instantiating "+bZ:"Local template does not exist: "+bZ);}}bL=K.LoadedTemplateFile(bJ);bM=new U.New$5();bN=bI.querySelectorAll("[ws-template]");for(bO=0,bP=bN.length-1;bO<=bP;bO++){bQ=bN[bO];bR=bQ.getAttribute("ws-template").toLowerCase();bQ.removeAttribute("ws-template");bM.set_Item(bR,[[bQ],K.FakeRootSingle(bQ)]);}bS=bI.querySelectorAll("[ws-children-template]");for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=bS[bT];bW=bV.getAttribute("ws-children-template").toLowerCase();bV.removeAttribute("ws-children-template");bM.set_Item(bW,(bX=H.ChildrenArray(bV),[bX,K.FakeRoot(bX)]));}bY=new _3.New$3();while(bM.count>0)bK(l.head(bM.get_Keys()));};K.LoadedTemplates=function(){_2.$cctor();return _2.LoadedTemplates;};K.LoadedTemplateFile=function(bI){var bJ,bK,bL;bJ=(bK=null,[K.LoadedTemplates().TryGetValue(bI,{get:function(){return bK;},set:function(bM){bK=bM;}}),bK]);return bJ[0]?bJ[1]:(bL=new U.New$5(),(K.LoadedTemplates().set_Item(bI,bL),bL));};K.FakeRootSingle=function(bI){var bJ,bK,bL;bI.removeAttribute("ws-template");bJ=bI.getAttribute("ws-replace");bJ===null?void 0:(bI.removeAttribute("ws-replace"),bK=bI.parentNode,D.Equals(bK,null)?void 0:(bL=self.document.createElement(bI.tagName),bL.setAttribute("ws-replace",bJ),bK.replaceChild(bL,bI)));return K.FakeRoot([bI]);};K.FakeRoot=function(bI){var bJ,bK,bL;bJ=self.document.createElement("div");for(bK=0,bL=bI.length-1;bK<=bL;bK++)bJ.appendChild(k.get(bI,bK));return bJ;};K.PrepareTemplateStrict=function(bI,bJ,bK,bL,bM){var bN,bO;function bP(bU,bV){var bW,bX,bY,bZ,b0,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck;function b1(cl){}while(true)switch(bU){case 0:if(bV!==null){bW=bV.nextSibling;if(D.Equals(bV.nodeType,x.TEXT_NODE))bb.convertTextNode(bV);else if(D.Equals(bV.nodeType,x.ELEMENT_NODE))bR(bV);bV=bW;}else return null;break;case 1:b2=bc.string(bV.nodeName,{$:1,$0:3},null).toLowerCase();b3=(bX=b2.indexOf("."),bX===-1?[bI,b2]:[bc.string(b2,null,{$:1,$0:bX-1}),bc.string(b2,{$:1,$0:bX+1},null)]);b4=b3[1];b5=b3[0];if(b5!==""&&!K.LoadedTemplates().ContainsKey(b5))return bb.failNotLoaded(b4);else{if(b5===""&&bM!=null)bM.$0(b4);b6=K.LoadedTemplates().get_Item(b5);if(!b6.ContainsKey(b4))return bb.failNotLoaded(b4);else{b7=b6.get_Item(b4);b8=b7.cloneNode(true);b9=new _3.New$3();b_=new U.New$5();b$=bV.attributes;for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=b$.item(ca).name.toLowerCase();b_.set_Item(cc,(cd=b$.item(ca).nodeValue,cd===""?cc:cd.toLowerCase()));!b9.Add(cc)?bF.warn("Hole mapped twice",cc):void 0;}for(ce=0,cf=bV.childNodes.length-1;ce<=cf;ce++){cg=bV.childNodes[ce];D.Equals(cg.nodeType,x.ELEMENT_NODE)?!b9.Add(cg.nodeName.toLowerCase())?bF.warn("Hole filled twice",b4):void 0:void 0;}ch=bV.childNodes.length===1&&D.Equals(bV.firstChild.nodeType,x.TEXT_NODE);if(ch){bZ=bb.fillTextHole(b8,bV.firstChild.textContent,b4);((function(cl){return function(cm){if(cm!=null)cl(cm.$0);};}((b0=function(cl){return function(cm){return cl.Add(cm);};}(b9),function(cl){return b1(b0(cl));})))(bZ));}bb.removeHolesExcept(b8,b9);if(!ch){for(ci=0,cj=bV.childNodes.length-1;ci<=cj;ci++){ck=bV.childNodes[ci];D.Equals(ck.nodeType,x.ELEMENT_NODE)?ck.hasAttributes()?bb.fillInstanceAttrs(b8,ck):bQ(b8,ck):void 0;}}bb.mapHoles(b8,b_);bb.fill(b8,bV.parentNode,bV);bV.parentNode.removeChild(bV);return;}}break;}}function bQ(bU,bV){var bW,bY,bZ;function bX(b0,b1){var b2,b3,b4;if(bY==="title"&&bV.hasChildNodes()){b2=bG.parseHTML(bV.textContent);bV.removeChild(bV.firstChild);for(b3=0,b4=b2.length-1;b3<=b4;b3++)bV.appendChild(k.get(b2,b3));}else null;bR(bV);return bb.fill(bV,b0,b1);}bY=bV.nodeName.toLowerCase();H.IterSelector(bU,"[ws-attr-holes]",function(b0){var b1,b2,b3,b4,b5;b1=bk.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=k.get(b1,b2);b0.setAttribute(b4,(b5=new a.RegExp("\\${"+bY+"}","ig"),b0.getAttribute(b4).replace(b5,bV.textContent)));}});bZ=bU.querySelector("[ws-hole="+bY+"]");if(D.Equals(bZ,null)){bW=bU.querySelector("[ws-replace="+bY+"]");return D.Equals(bW,null)?null:(bX(bW.parentNode,bW),void bW.parentNode.removeChild(bW));}else{while(bZ.hasChildNodes())bZ.removeChild(bZ.lastChild);bZ.removeAttribute("ws-hole");return bX(bZ,null);}}function bR(bU){if(bk.StartsWith(bU.nodeName.toLowerCase(),"ws-"))bT(bU);else{bb.convertAttrs(bU);bS(bU.firstChild);}}function bS(bU){return bP(0,bU);}function bT(bU){return bP(1,bU);}bN=bL==null?K.FakeRoot(bK):bL.$0;bO=(bJ==null?"":bJ.$0).toLowerCase();K.LoadedTemplateFile(bI).set_Item(bO,bN);k.length(bK)>0?(function(bU){var bV,bW,bX,bY;while(true){bV=bU.querySelector("[ws-template]");if(D.Equals(bV,null)){bW=bU.querySelector("[ws-children-template]");if(D.Equals(bW,null))return null;else{bX=bW.getAttribute("ws-children-template");bW.removeAttribute("ws-children-template");K.PrepareTemplateStrict(bI,{$:1,$0:bX},H.ChildrenArray(bW),null,null);bU=bU;}}else{bY=bV.getAttribute("ws-template");(K.PrepareSingleTemplate(bI,{$:1,$0:bY},bV))(null);bU=bU;}}}(bN),bS(k.get(bK,0))):void 0;};K.PrepareSingleTemplate=function(bI,bJ,bK){var bL,bM,bN;bL=K.FakeRootSingle(bK);bM=[bK];bN={$:1,$0:bL};return function(bO){K.PrepareTemplateStrict(bI,bJ,bM,bN,bO);};};K.TextHoleRE=function(){_2.$cctor();return _2.TextHoleRE;};N.Int=function(){N.set_counter(N.counter()+1);return N.counter();};N.set_counter=function(bI){_7.$cctor();_7.counter=bI;};N.counter=function(){_7.$cctor();return _7.counter;};B.Obsolete=function(bI){var bJ,bK,bL,bM,bN;bK=bI.s;if(bK==null||(bK!=null&&bK.$==2?(bJ=bK.$1,false):bK!=null&&bK.$==3?(bJ=bK.$1,false):true))void 0;else{bI.s=null;for(bL=0,bM=k.length(bJ)-1;bL<=bM;bL++){bN=k.get(bJ,bL);typeof bN=="object"?function(bO){B.Obsolete(bO);}(bN):bN();}}};B.New=function(bI){return{s:bI};};O=m.ConcreteVar=bE.Class({get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(bI){var bJ;bJ=bI(this.Get());bJ!=null&&bJ.$==1?this.Set(bJ.$0):void 0;},Set:function(bI){if(this.isConst)(function(bJ){return bJ("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bJ){bF.log(bJ);}));else{B.Obsolete(this.snap);this.current=bI;this.snap=B.New({$:2,$0:bI,$1:[]});}}},p,O);O.New=bE.Ctor(function(bI,bJ,bK){var bL;bL=this;p.New.call(this);this.isConst=bI;this.current=bK;this.snap=bJ;this.view=function(){return bL.snap;};this.id=N.Int();},O);P.Dynamic=function(bI,bJ){return Q.Dynamic(bJ,function(bK){return function(bL){return H.SetAttr(bK,bI,bL);};});};P.Value=function(bI){function bJ(bK){return{$:1,$0:bK};}return P.CustomValue(bI,a.id,function(bK){return bJ(a.id(bK));});};P.CustomValue=function(bI,bJ,bK){return P.CustomVar(bI,function(bL,bM){bL.value=bJ(bM);},function(bL){return bK(bL.value);});};P.CustomVar=function(bI,bJ,bK){function bL(bN,bO){return bI.UpdateMaybe(function(bP){var bQ,bR;bQ=bK(bN);return bQ!=null&&bQ.$==1&&(!D.Equals(bQ.$0,bP)&&(bR=[bQ,bQ.$0],true))?bR[0]:null;});}function bM(bN,bO){var bP,bQ;bP=bK(bN);return bP!=null&&bP.$==1&&(D.Equals(bP.$0,bO)&&(bQ=bP.$0,true))?null:bJ(bN,bO);}return G.Concat([P.Handler("change",function(bN){return function(bO){return bL(bN,bO);};}),P.Handler("input",function(bN){return function(bO){return bL(bN,bO);};}),P.Handler("keypress",function(bN){return function(bO){return bL(bN,bO);};}),P.DynamicCustom(function(bN){return function(bO){return bM(bN,bO);};},bI.get_View())]);};P.Handler=function(bI,bJ){return Q.Static(function(bK){bK.addEventListener(bI,function(bL){return(bJ(bK))(bL);},false);});};P.DynamicCustom=function(bI,bJ){return Q.Dynamic(bJ,bI);};Q.Static=function(bI){return new G({$:3,$0:bI});};Q.Dynamic=function(bI,bJ){return new G({$:1,$0:new _8.New(bI,bJ)});};Q.Updates=function(bI){return S.MapTreeReduce(function(bJ){return bJ.NChanged();},n.Const(),n.Map2Unit,bI.DynNodes);};Q.AppendTree=function(bI,bJ){var bK;return bI===null?bJ:bJ===null?bI:(bK=new G({$:2,$0:bI,$1:bJ}),(Q.SetFlags(bK,Q.Flags(bI)|Q.Flags(bJ)),bK));};Q.EmptyAttr=function(){$.$cctor();return $.EmptyAttr;};Q.Insert=function(bI,bJ){var bK,bL,bM;function bN(bO){if(!(bO===null))if(bO!=null&&bO.$==1)bK.push(bO.$0);else if(bO!=null&&bO.$==2){bN(bO.$0);bN(bO.$1);}else if(bO!=null&&bO.$==3)bO.$0(bI);else if(bO!=null&&bO.$==4)bL.push(bO.$0);}bK=[];bL=[];bN(bJ);bM=bK.slice(0);return _.New(bI,Q.Flags(bJ),bM,bL.length===0?null:{$:1,$0:function(bO){l.iter(function(bP){bP(bO);},bL);}});};Q.SetFlags=function(bI,bJ){bI.flags=bJ;};Q.Flags=function(bI){return bI!==null&&bI.hasOwnProperty("flags")?bI.flags:0;};Q.HasExitAnim=function(bI){var bJ;bJ=2;return(bI.DynFlags&bJ)===bJ;};Q.GetExitAnim=function(bI){return Q.GetAnim(bI,function(bJ,bK){return bJ.NGetExitAnim(bK);});};Q.HasEnterAnim=function(bI){var bJ;bJ=1;return(bI.DynFlags&bJ)===bJ;};Q.GetEnterAnim=function(bI){return Q.GetAnim(bI,function(bJ,bK){return bJ.NGetEnterAnim(bK);});};Q.HasChangeAnim=function(bI){var bJ;bJ=4;return(bI.DynFlags&bJ)===bJ;};Q.GetChangeAnim=function(bI){return Q.GetAnim(bI,function(bJ,bK){return bJ.NGetChangeAnim(bK);});};Q.GetAnim=function(bI,bJ){return _4.Concat(k.map(function(bK){return bJ(bK,bI.DynElem);},bI.DynNodes));};Q.Sync=function(bI,bJ){k.iter(function(bK){bK.NSync(bI);},bJ.DynNodes);};R=m.Elt=bE.Class({},t,R);R.New=function(bI,bJ,bK){var bL,bM;bL=V.CreateElemNode(bI,bJ,bK.docNode);bM=Y.Create(bK.updates);return new R.New$1({$:1,$0:bL},n.Map2Unit(Q.Updates(bL.Attr),bM.v),bI,bM);};R.New$1=bE.Ctor(function(bI,bJ,bK,bL){t.New.call(this,bI,bJ);this.docNode$1=bI;this.updates$1=bJ;this.elt=bK;this.rvUpdates=bL;},R);S.ofSeqNonCopying=function(bI){var bJ,bK;if(bI instanceof a.Array)return bI;else if(bI instanceof _1)return k.ofList(bI);else if(bI===null)return[];else{bJ=[];bK=z.Get(bI);try{while(bK.MoveNext())bJ.push(bK.Current());return bJ;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}}};S.TreeReduce=function(bI,bJ,bK){var bL;function bM(bN,bO){var bP,bQ;return bO<=0?bI:bO===1&&(bN>=0&&bN<bL)?k.get(bK,bN):(bQ=bO/2>>0,bJ(bM(bN,bQ),bM(bN+bQ,bO-bQ)));}bL=k.length(bK);return bM(0,bL);};S.MapTreeReduce=function(bI,bJ,bK,bL){var bM;function bN(bO,bP){var bQ,bR;return bP<=0?bJ:bP===1&&(bO>=0&&bO<bM)?bI(k.get(bL,bO)):(bR=bP/2>>0,bK(bN(bO,bR),bN(bO+bR,bP-bR)));}bM=k.length(bL);return bN(0,bM);};U=T.Dictionary=bE.Class({set_Item:function(bI,bJ){this.set(bI,bJ);},ContainsKey:function(bI){var bJ,bK;bJ=this;bK=this.data[this.hash(bI)];return bK==null?false:k.exists(function(bL){return bJ.equals.apply(null,[(j.KeyValue(bL))[0],bI]);},bK);},TryGetValue:function(bI,bJ){var bK,bL,bM;bK=this;bL=this.data[this.hash(bI)];return bL==null?false:(bM=k.tryPick(function(bN){var bO;bO=j.KeyValue(bN);return bK.equals.apply(null,[bO[0],bI])?{$:1,$0:bO[1]}:null;},bL),bM!=null&&bM.$==1&&(bJ.set(bM.$0),true));},Remove:function(bI){return this.remove(bI);},get_Keys:function(){return new bd.New(this);},set:function(bI,bJ){var bK,bL,bM,bN;bK=this;bL=this.hash(bI);bM=this.data[bL];bM==null?(this.count=this.count+1,this.data[bL]=new a.Array({K:bI,V:bJ})):(bN=k.tryFindIndex(function(bO){return bK.equals.apply(null,[(j.KeyValue(bO))[0],bI]);},bM),bN==null?(this.count=this.count+1,bM.push({K:bI,V:bJ})):bM[bN.$0]={K:bI,V:bJ});},remove:function(bI){var bJ,bK,bL,bM;bJ=this;bK=this.hash(bI);bL=this.data[bK];return bL==null?false:(bM=k.filter(function(bN){return!bJ.equals.apply(null,[(j.KeyValue(bN))[0],bI]);},bL),k.length(bM)<bL.length&&(this.count=this.count-1,this.data[bK]=bM,true));},get_Item:function(bI){return this.get(bI);},get:function(bI){var bJ,bK;bJ=this;bK=this.data[this.hash(bI)];return bK==null?ba.notPresent():k.pick(function(bL){var bM;bM=j.KeyValue(bL);return bJ.equals.apply(null,[bM[0],bI])?{$:1,$0:bM[1]}:null;},bK);},GetEnumerator:function(){return z.Get0(this);},GetEnumerator0:function(){return z.Get0(k.concat(v.GetFieldValues(this.data)));}},o,U);U.New$5=bE.Ctor(function(){U.New$6.call(this,[],D.Equals,D.Hash);},U);U.New$6=bE.Ctor(function(bI,bJ,bK){var bL,bM;o.New.call(this);this.equals=bJ;this.hash=bK;this.count=0;this.data=[];bL=z.Get(bI);try{while(bL.MoveNext()){bM=bL.Current();this.set(bM.K,bM.V);}}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}},U);V.LinkElement=function(bI,bJ){V.InsertDoc(bI,bJ,null);};V.CreateTextNode=function(){return{Text:H.CreateText(""),Dirty:false,Value:""};};V.UpdateTextNode=function(bI,bJ){bI.Value=bJ;bI.Dirty=true;};V.CreateElemNode=function(bI,bJ,bK){var bL;V.LinkElement(bI,bK);bL=Q.Insert(bI,bJ);return W.New(bL,bK,null,bI,N.Int(),bE.GetOptional(bL.OnAfterRender));};V.InsertDoc=function(bI,bJ,bK){var bL;return bJ!=null&&bJ.$==1?V.InsertNode(bI,bJ.$0.El,bK):bJ!=null&&bJ.$==2?(bL=bJ.$0,(bL.Dirty=false,V.InsertDoc(bI,bL.Current,bK))):bJ==null?bK:bJ!=null&&bJ.$==4?V.InsertNode(bI,bJ.$0.Text,bK):bJ!=null&&bJ.$==5?V.InsertNode(bI,bJ.$0,bK):bJ!=null&&bJ.$==6?k.foldBack(function(bM,bN){return bM==null||bM.constructor===y?V.InsertDoc(bI,bM,bN):V.InsertNode(bI,bM,bN);},bJ.$0.Els,bK):V.InsertDoc(bI,bJ.$0,V.InsertDoc(bI,bJ.$1,bK));};V.CreateRunState=function(bI,bJ){return bf.New(bg.get_Empty(),V.CreateElemNode(bI,Q.EmptyAttr(),bJ));};V.PerformAnimatedUpdate=function(bI,bJ,bK){var bL;return _4.get_UseAnimations()?(bL=null,bm.Delay(function(){var bM,bN,bO;bM=bg.FindAll(bK);bN=V.ComputeChangeAnim(bJ,bM);bO=V.ComputeEnterAnim(bJ,bM);return bm.Bind(_4.Play(_4.Append(bN,V.ComputeExitAnim(bJ,bM))),function(){return bm.Bind(V.SyncElemNodesNextFrame(bI,bJ),function(){return bm.Bind(_4.Play(bO),function(){bJ.PreviousNodes=bM;return bm.Return(null);});});});})):V.SyncElemNodesNextFrame(bI,bJ);};V.PerformSyncUpdate=function(bI,bJ,bK){var bL;bL=bg.FindAll(bK);V.SyncElemNode(bI,bJ.Top);bJ.PreviousNodes=bL;};V.InsertNode=function(bI,bJ,bK){H.InsertAt(bI,bK,bJ);return bJ;};V.SyncElemNodesNextFrame=function(bI,bJ){function bK(bL){a.requestAnimationFrame(function(){V.SyncElemNode(bI,bJ.Top);bL();});}return _5.BatchUpdatesEnabled()?bm.FromContinuations(function(bL,bM,bN){return bK.apply(null,[bL,bM,bN]);}):(V.SyncElemNode(bI,bJ.Top),bm.Return(null));};V.ComputeExitAnim=function(bI,bJ){return _4.Concat(k.map(function(bK){return Q.GetExitAnim(bK.Attr);},bg.ToArray(bg.Except(bJ,bg.Filter(function(bK){return Q.HasExitAnim(bK.Attr);},bI.PreviousNodes)))));};V.ComputeEnterAnim=function(bI,bJ){return _4.Concat(k.map(function(bK){return Q.GetEnterAnim(bK.Attr);},bg.ToArray(bg.Except(bI.PreviousNodes,bg.Filter(function(bK){return Q.HasEnterAnim(bK.Attr);},bJ)))));};V.ComputeChangeAnim=function(bI,bJ){var bK;function bL(bM){return Q.HasChangeAnim(bM.Attr);}bK=function(bM){return bg.Filter(bL,bM);};return _4.Concat(k.map(function(bM){return Q.GetChangeAnim(bM.Attr);},bg.ToArray(bg.Intersect(bK(bI.PreviousNodes),bK(bJ)))));};V.SyncElemNode=function(bI,bJ){!bI?V.SyncElement(bJ):void 0;V.Sync(bJ.Children);V.AfterRender(bJ);};V.SyncElement=function(bI){function bJ(bK){function bL(bM){var bN,bO;return bM!=null&&bM.$==0?bL(bM.$0)||bL(bM.$1):bM!=null&&bM.$==2?(bN=bM.$0,bN.Dirty||bL(bN.Current)):bM!=null&&bM.$==6&&(bO=bM.$0,bO.Dirty||k.exists(bJ,bO.Holes));}return bL(bK.Children);}Q.Sync(bI.El,bI.Attr);bJ(bI)?V.DoSyncElement(bI):void 0;};V.Sync=function(bI){var bJ,bK;if(bI!=null&&bI.$==1)V.SyncElemNode(false,bI.$0);else if(bI!=null&&bI.$==2)V.Sync(bI.$0.Current);else if(bI==null);else if(bI!=null&&bI.$==5);else if(bI!=null&&bI.$==4){bJ=bI.$0;bJ.Dirty?(bJ.Text.nodeValue=bJ.Value,bJ.Dirty=false):void 0;}else if(bI!=null&&bI.$==6){bK=bI.$0;k.iter(function(bL){V.SyncElemNode(false,bL);},bK.Holes);k.iter(function(bL){Q.Sync(bL[0],bL[1]);},bK.Attrs);V.AfterRender(bK);}else{V.Sync(bI.$0);V.Sync(bI.$1);}};V.AfterRender=function(bI){var bJ;bJ=bE.GetOptional(bI.Render);bJ!=null&&bJ.$==1?(bJ.$0(bI.El),bE.SetOptional(bI,"Render",null)):void 0;};V.DoSyncElement=function(bI){var bJ,bK,bL;function bM(bN,bO){var bP,bQ;return bN!=null&&bN.$==1?bN.$0.El:bN!=null&&bN.$==2?(bP=bN.$0,bP.Dirty?(bP.Dirty=false,V.InsertDoc(bJ,bP.Current,bO)):bM(bP.Current,bO)):bN==null?bO:bN!=null&&bN.$==4?bN.$0.Text:bN!=null&&bN.$==5?bN.$0:bN!=null&&bN.$==6?(bQ=bN.$0,(bQ.Dirty?bQ.Dirty=false:void 0,k.foldBack(function(bR,bS){return bR==null||bR.constructor===y?bM(bR,bS):bR;},bQ.Els,bO))):bM(bN.$0,bM(bN.$1,bO));}bJ=bI.El;bw.Iter((bK=bI.El,function(bN){H.RemoveNode(bK,bN);}),bw.Except(bw.DocChildren(bI),bw.Children(bI.El,bE.GetOptional(bI.Delimiters))));bM(bI.Children,(bL=bE.GetOptional(bI.Delimiters),bL!=null&&bL.$==1?bL.$0[1]:null));};W=m.DocElemNode=bE.Class({Equals:function(bI){return this.ElKey===bI.ElKey;},GetHashCode:function(){return this.ElKey;}},null,W);W.New=function(bI,bJ,bK,bL,bM,bN){var bO;return new W((bO={Attr:bI,Children:bJ,El:bL,ElKey:bM},(bE.SetOptional(bO,"Delimiters",bK),bE.SetOptional(bO,"Render",bN),bO)));};Y=m.Updates=bE.Class({},null,Y);Y.Create=function(bI){var bJ;bJ=null;bJ=Y.New(bI,null,function(){var bK;bK=bJ.s;return bK===null?(bK=B.Copy(bJ.c()),bJ.s=bK,B.WhenObsoleteRun(bK,function(){bJ.s=null;}),bK):bK;});return bJ;};Y.New=function(bI,bJ,bK){return new Y({c:bI,s:bJ,v:bK});};Z.$cctor=function(){Z.$cctor=a.ignore;Z.Doc=self.document;};_1=_0.T=bE.Class({GetEnumerator:function(){return new I.New(this,null,function(bI){var bJ;bJ=bI.s;return bJ.$==0?false:(bI.c=bJ.$0,bI.s=bJ.$1,true);},void 0);},GetEnumerator0:function(){return z.Get(this);}},null,_1);_2.$cctor=function(){_2.$cctor=a.ignore;_2.LoadedTemplates=new U.New$5();_2.LocalTemplatesLoaded=false;_2.TextHoleRE="\\${([^}]+)}";};_3=T.HashSet=bE.Class({Add:function(bI){return this.add(bI);},Contains:function(bI){var bJ;bJ=this.data[this.hash(bI)];return bJ==null?false:this.arrContains(bI,bJ);},add:function(bI){var bJ,bK;bJ=this.hash(bI);bK=this.data[bJ];return bK==null?(this.data[bJ]=[bI],this.count=this.count+1,true):this.arrContains(bI,bK)?false:(bK.push(bI),this.count=this.count+1,true);},arrContains:function(bI,bJ){var bK,bL,bM,bN;bK=true;bL=0;bN=bJ.length;while(bK&&bL<bN)if(this.equals.apply(null,[bJ[bL],bI]))bK=false;else bL=bL+1;return!bK;},ExceptWith:function(bI){var bJ;bJ=z.Get(bI);try{while(bJ.MoveNext())this.Remove(bJ.Current());}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bI){var bJ,bK,bL,bM;bJ=0;bK=bt.concat(this.data);for(bL=0,bM=bK.length-1;bL<=bM;bL++)k.set(bI,bL,bK[bL]);},IntersectWith:function(bI){var bJ,bK,bL,bM,bN;bJ=new _3.New$4(bI,this.equals,this.hash);bK=bt.concat(this.data);for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=bK[bL];!bJ.Contains(bN)?this.Remove(bN):void 0;}},Remove:function(bI){var bJ;bJ=this.data[this.hash(bI)];return bJ==null?false:this.arrRemove(bI,bJ)&&(this.count=this.count-1,true);},arrRemove:function(bI,bJ){var bK,bL,bM,bN;bK=true;bL=0;bN=bJ.length;while(bK&&bL<bN)if(this.equals.apply(null,[bJ[bL],bI])){bJ.splice.apply(bJ,[bL,1]);bK=false;}else bL=bL+1;return!bK;},GetEnumerator:function(){return z.Get(bt.concat(this.data));},GetEnumerator0:function(){return z.Get(bt.concat(this.data));}},o,_3);_3.New$3=bE.Ctor(function(){_3.New$4.call(this,[],D.Equals,D.Hash);},_3);_3.New$4=bE.Ctor(function(bI,bJ,bK){var bL;o.New.call(this);this.equals=bJ;this.hash=bK;this.data=[];this.count=0;bL=z.Get(bI);try{while(bL.MoveNext())this.add(bL.Current());}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}},_3);_3.New$2=bE.Ctor(function(bI){_3.New$4.call(this,bI,D.Equals,D.Hash);},_3);_4.get_UseAnimations=function(){return bh.UseAnimations();};_4.Play=function(bI){var bJ;bJ=null;return bm.Delay(function(){return bm.Bind(_4.Run(a.ignore,bh.Actions(bI)),function(){bh.Finalize(bI);return bm.Return(null);});});};_4.Append=function(bI,bJ){return{$:0,$0:bn.Append(bI.$0,bJ.$0)};};_4.Run=function(bI,bJ){var bK;function bL(bM){function bN(bO,bP){var bQ;bQ=bP-bO;bJ.Compute(bQ);bI();return bQ<=bK?void a.requestAnimationFrame(function(bR){bN(bO,bR);}):bM();}a.requestAnimationFrame(function(bO){bN(bO,bO);});}bK=bJ.Duration;return bK===0?bm.Zero():bm.FromContinuations(function(bM,bN,bO){return bL.apply(null,[bM,bN,bO]);});};_4.Concat=function(bI){return{$:0,$0:bn.Concat(l.map(bh.List,bI))};};_4.get_Empty=function(){return{$:0,$0:bn.Empty()};};_5.BatchUpdatesEnabled=function(){bi.$cctor();return bi.BatchUpdatesEnabled;};_6.StartProcessor=function(bI){var bJ;function bK(){var bL;bL=null;return bm.Delay(function(){return bm.Bind(bI,function(){var bM;bM=bJ[0];return bM===1?(bJ[0]=0,bm.Zero()):bM===2?(bJ[0]=1,bK()):bm.Zero();});});}bJ=[0];return function(){var bL;bL=bJ[0];bL===0?(bJ[0]=1,bm.Start(bK(),null)):bL===1?bJ[0]=2:void 0;};};_7.$cctor=function(){_7.$cctor=a.ignore;_7.counter=0;};_8=m.DynamicAttrNode=bE.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bI){return _4.get_Empty();},NGetEnterAnim:function(bI){return _4.get_Empty();},NGetChangeAnim:function(bI){return _4.get_Empty();},NSync:function(bI){if(this.dirty){(this.push(bI))(this.value);this.dirty=false;}}},o,_8);_8.New=bE.Ctor(function(bI,bJ){var bK;bK=this;o.New.call(this);this.push=bJ;this.value=void 0;this.dirty=false;this.updates=n.Map(function(bL){bK.value=bL;bK.dirty=true;},bI);},_8);_.New=function(bI,bJ,bK,bL){var bM;bM={DynElem:bI,DynFlags:bJ,DynNodes:bK};bE.SetOptional(bM,"OnAfterRender",bL);return bM;};_0.head=function(bI){return bI.$==1?bI.$0:_0.listEmpty();};_0.tail=function(bI){return bI.$==1?bI.$1:_0.listEmpty();};_0.listEmpty=function(){return j.FailWith("The input list was empty.");};$.$cctor=function(){$.$cctor=a.ignore;$.EmptyAttr=null;};ba.notPresent=function(){return j.FailWith("The given key was not present in the dictionary.");};bb.convertTextNode=function(bI){var bJ,bK,bL,bM,bN,bO;bJ=null;bK=0;bM=bI.textContent;bN=new a.RegExp(K.TextHoleRE(),"g");while(bJ=bN.exec(bM),bJ!==null){bI.parentNode.insertBefore(self.document.createTextNode(bc.string(bM,{$:1,$0:bK},{$:1,$0:bN.lastIndex-k.get(bJ,0).length-1})),bI);bK=bN.lastIndex;bO=self.document.createElement("span");bO.setAttribute("ws-replace",k.get(bJ,1).toLowerCase());bI.parentNode.insertBefore(bO,bI);}bN.lastIndex=0;bI.textContent=bc.string(bM,{$:1,$0:bK},null);};bb.failNotLoaded=function(bI){bF.warn("Instantiating non-loaded template",bI);};bb.fillTextHole=function(bI,bJ,bK){var bL;bL=bI.querySelector("[ws-replace]");return D.Equals(bL,null)?(bF.warn("Filling non-existent text hole",bK),null):(bL.parentNode.replaceChild(new a.Text(bJ),bL),{$:1,$0:bL.getAttribute("ws-replace")});};bb.removeHolesExcept=function(bI,bJ){function bK(bL){H.IterSelector(bI,"["+bL+"]",function(bM){if(!bJ.Contains(bM.getAttribute(bL)))bM.removeAttribute(bL);});}bK("ws-attr");bK("ws-onafterrender");bK("ws-var");H.IterSelector(bI,"[ws-hole]",function(bL){if(!bJ.Contains(bL.getAttribute("ws-hole"))){bL.removeAttribute("ws-hole");while(bL.hasChildNodes())bL.removeChild(bL.lastChild);}});H.IterSelector(bI,"[ws-replace]",function(bL){if(!bJ.Contains(bL.getAttribute("ws-replace")))bL.parentNode.removeChild(bL);});H.IterSelector(bI,"[ws-on]",function(bL){bL.setAttribute("ws-on",bk.concat(" ",k.filter(function(bM){return bJ.Contains(k.get(bk.SplitChars(bM,[":"],1),1));},bk.SplitChars(bL.getAttribute("ws-on"),[" "],1))));});H.IterSelector(bI,"[ws-attr-holes]",function(bL){var bM,bN,bO,bP,bQ;bM=bk.SplitChars(bL.getAttribute("ws-attr-holes"),[" "],1);for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=k.get(bM,bN);bL.setAttribute(bP,(bQ=new a.RegExp(K.TextHoleRE(),"g"),bL.getAttribute(bP).replace(bQ,function(bR,bS){return bJ.Contains(bS)?bR:"";})));}});};bb.fillInstanceAttrs=function(bI,bJ){var bK,bL,bM,bN,bO;bb.convertAttrs(bJ);bK=bJ.nodeName.toLowerCase();bL=bI.querySelector("[ws-attr="+bK+"]");if(D.Equals(bL,null))bF.warn("Filling non-existent attr hole",bK);else{bL.removeAttribute("ws-attr");for(bM=0,bN=bJ.attributes.length-1;bM<=bN;bM++){bO=bJ.attributes.item(bM);bO.name==="class"&&bL.hasAttribute("class")?bL.setAttribute("class",bL.getAttribute("class")+" "+bO.nodeValue):bL.setAttribute(bO.name,bO.nodeValue);}}};bb.mapHoles=function(bI,bJ){function bK(bL){H.IterSelector(bI,"["+bL+"]",function(bM){var bN,bO;bN=(bO=null,[bJ.TryGetValue(bM.getAttribute(bL).toLowerCase(),{get:function(){return bO;},set:function(bP){bO=bP;}}),bO]);bN[0]?bM.setAttribute(bL,bN[1]):void 0;});}bK("ws-hole");bK("ws-replace");bK("ws-attr");bK("ws-onafterrender");bK("ws-var");H.IterSelector(bI,"[ws-on]",function(bL){bL.setAttribute("ws-on",bk.concat(" ",k.map(function(bM){var bN,bO,bP;bN=bk.SplitChars(bM,[":"],1);bO=(bP=null,[bJ.TryGetValue(k.get(bN,1),{get:function(){return bP;},set:function(bQ){bP=bQ;}}),bP]);return bO[0]?k.get(bN,0)+":"+bO[1]:bM;},bk.SplitChars(bL.getAttribute("ws-on"),[" "],1))));});H.IterSelector(bI,"[ws-attr-holes]",function(bL){var bM,bN,bO;bM=bk.SplitChars(bL.getAttribute("ws-attr-holes"),[" "],1);for(bN=0,bO=bM.length-1;bN<=bO;bN++)(function(){var bP;function bQ(bR,bS){var bT;bT=j.KeyValue(bS);return bR.replace(new a.RegExp("\\${"+bT[0]+"}","ig"),"${"+bT[1]+"}");}bP=k.get(bM,bN);return bL.setAttribute(bP,(((bE.Curried3(l.fold))(bQ))(bL.getAttribute(bP)))(bJ));}());});};bb.fill=function(bI,bJ,bK){while(true)if(bI.hasChildNodes())bK=bJ.insertBefore(bI.lastChild,bK);else return null;};bb.convertAttrs=function(bI){var bK,bL,bM,bN,bO,bP,bQ,bR;function bJ(bS){var bT;bT=bI.getAttribute(bS);bT===null?void 0:bI.setAttribute(bS,bT.toLowerCase());}bK=bI.attributes;bL=[];bM=[];bN=[];for(bO=0,bP=bK.length-1;bO<=bP;bO++){bQ=bK.item(bO);bk.StartsWith(bQ.nodeName,"ws-on")&&bQ.nodeName!=="ws-onafterrender"&&bQ.nodeName!=="ws-on"?(bL.push(bQ.nodeName),bM.push(bc.string(bQ.nodeName,{$:1,$0:"ws-on".length},null)+":"+bQ.nodeValue.toLowerCase())):!bk.StartsWith(bQ.nodeName,"ws-")&&(new a.RegExp(K.TextHoleRE())).test(bQ.nodeValue)?(bQ.nodeValue=(bR=new a.RegExp(K.TextHoleRE(),"g"),bQ.nodeValue.replace(bR,function(bS,bT){return"${"+bT.toLowerCase()+"}";})),bN.push(bQ.nodeName)):void 0;}!(bM.length==0)?bI.setAttribute("ws-on",bk.concat(" ",bM)):void 0;!(bN.length==0)?bI.setAttribute("ws-attr-holes",bk.concat(" ",bN)):void 0;bJ("ws-hole");bJ("ws-replace");bJ("ws-attr");bJ("ws-onafterrender");bJ("ws-var");k.iter(function(bS){bI.removeAttribute(bS);},bL);};bc.string=function(bI,bJ,bK){return bJ==null?bK!=null&&bK.$==1?bI.slice(0,bK.$0+1):"":bK==null?bI.slice(bJ.$0):bI.slice(bJ.$0,bK.$0+1);};l.insufficient=function(){return j.FailWith("The input sequence has an insufficient number of elements.");};bd=T.KeyCollection=bE.Class({GetEnumerator$1:function(){return z.Get(l.map(function(bI){return bI.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},o,bd);bd.New=bE.Ctor(function(bI){o.New.call(this);this.d=bI;},bd);bf.New=function(bI,bJ){return{PreviousNodes:bI,Top:bJ};};bg.get_Empty=function(){return{$:0,$0:new _3.New$3()};};bg.FindAll=function(bI){var bJ;function bK(bM){if(bM!=null&&bM.$==0){bK(bM.$0);bK(bM.$1);}else if(bM!=null&&bM.$==1)bL(bM.$0);else if(bM!=null&&bM.$==2)bK(bM.$0.Current);else if(bM!=null&&bM.$==6)k.iter(bL,bM.$0.Holes);}function bL(bM){bJ.push(bM);bK(bM.Children);}bJ=[];bK(bI);return{$:0,$0:new _3.New$2(bJ)};};bg.Filter=function(bI,bJ){return{$:0,$0:bs.Filter(bI,bJ.$0)};};bg.Except=function(bI,bJ){return{$:0,$0:bs.Except(bI.$0,bJ.$0)};};bg.ToArray=function(bI){return bs.ToArray(bI.$0);};bg.Intersect=function(bI,bJ){return{$:0,$0:bs.Intersect(bI.$0,bJ.$0)};};bh.UseAnimations=function(){bl.$cctor();return bl.UseAnimations;};bh.Actions=function(bI){return bh.ConcatActions(k.choose(function(bJ){return bJ.$==1?{$:1,$0:bJ.$0}:null;},bn.ToArray(bI.$0)));};bh.Finalize=function(bI){k.iter(function(bJ){if(bJ.$==0)bJ.$0();},bn.ToArray(bI.$0));};bh.ConcatActions=function(bI){var bJ,bK,bL,bM;bJ=S.ofSeqNonCopying(bI);bK=k.length(bJ);return bK===0?bh.Const():bK===1?k.get(bJ,0):(bL=l.max(l.map(function(bN){return bN.Duration;},bJ)),(bM=k.map(function(bN){return bh.Prolong(bL,bN);},bJ),bh.Def(bL,function(bN){k.iter(function(bO){bO.Compute(bN);},bM);})));};bh.List=function(bI){return bI.$0;};bh.Const=function(bI){return bh.Def(0,function(){return bI;});};bh.Def=function(bI,bJ){return{Compute:bJ,Duration:bI};};bh.Prolong=function(bI,bJ){var bK,bL,bM;bK=bJ.Compute;bL=bJ.Duration;bM=bz.Create(function(){return bJ.Compute(bJ.Duration);});return{Compute:function(bN){return bN>=bL?bM.f():bK(bN);},Duration:bI};};bi.$cctor=function(){bi.$cctor=a.ignore;bi.BatchUpdatesEnabled=true;};bj.Clear=function(bI){bI.splice(0,k.length(bI));};bk.concat=function(bI,bJ){return k.ofSeq(bJ).join(bI);};bk.SplitChars=function(bI,bJ,bK){return bk.Split(bI,new a.RegExp("["+bk.RegexEscape(bJ.join(""))+"]"),bK);};bk.StartsWith=function(bI,bJ){return bI.substring(0,bJ.length)==bJ;};bk.Split=function(bI,bJ,bK){return bK===1?k.filter(function(bL){return bL!=="";},bk.SplitWith(bI,bJ)):bk.SplitWith(bI,bJ);};bk.RegexEscape=function(bI){return bI.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bk.SplitWith=function(bI,bJ){return bI.split(bJ);};bl.$cctor=function(){bl.$cctor=a.ignore;bl.CubicInOut=bo.Custom(function(bI){var bJ;bJ=bI*bI;return 3*bJ-2*(bJ*bI);});bl.UseAnimations=true;};bm.Delay=function(bI){return function(bJ){try{(bI(null))(bJ);}catch(bK){bJ.k({$:1,$0:bK});}};};bm.Bind=function(bI,bJ){return bm.checkCancel(function(bK){bI(bp.New(function(bL){var bM;if(bL.$==0){bM=bL.$0;bm.scheduler().Fork(function(){try{(bJ(bM))(bK);}catch(bN){bK.k({$:1,$0:bN});}});}else bm.scheduler().Fork(function(){bK.k(bL);});},bK.ct));});};bm.Zero=function(){bq.$cctor();return bq.Zero;};bm.Start=function(bI,bJ){var bK,bL;bK=(bL=(bm.defCTS())[0],bJ==null?bL:bJ.$0);bm.scheduler().Fork(function(){if(!bK.c)bI(bp.New(function(bM){if(bM.$==1)bm.UncaughtAsyncError(bM.$0);},bK));});};bm.Return=function(bI){return function(bJ){bJ.k({$:0,$0:bI});};};bm.checkCancel=function(bI){return function(bJ){if(bJ.ct.c)bm.cancel(bJ);else bI(bJ);};};bm.defCTS=function(){bq.$cctor();return bq.defCTS;};bm.UncaughtAsyncError=function(bI){bF.log("WebSharper: Uncaught asynchronous exception",bI);};bm.FromContinuations=function(bI){return function(bJ){var bK;function bL(bM){if(bK[0])j.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bK[0]=true;bm.scheduler().Fork(bM);}}bK=[false];bI(function(bM){bL(function(){bJ.k({$:0,$0:bM});});},function(bM){bL(function(){bJ.k({$:1,$0:bM});});},function(bM){bL(function(){bJ.k({$:2,$0:bM});});});};};bm.cancel=function(bI){bI.k({$:2,$0:new by.New(bI.ct)});};bm.scheduler=function(){bq.$cctor();return bq.scheduler;};bn.Append=function(bI,bJ){return bI.$==0?bJ:bJ.$==0?bI:{$:2,$0:bI,$1:bJ};};bn.ToArray=function(bI){var bJ;function bK(bL){if(bL.$==1)bJ.push(bL.$0);else if(bL.$==2){bK(bL.$0);bK(bL.$1);}else if(bL.$==3)k.iter(function(bM){bJ.push(bM);},bL.$0);}bJ=[];bK(bI);return bJ.slice(0);};bn.Concat=function(bI){var bJ;bJ=S.ofSeqNonCopying(bI);return S.TreeReduce(bn.Empty(),bn.Append,bJ);};bn.Empty=function(){bA.$cctor();return bA.Empty;};bo=m.Easing=bE.Class({},o,bo);bo.Custom=function(bI){return new bo.New(bI);};bo.New=bE.Ctor(function(bI){o.New.call(this);this.transformTime=bI;},bo);bp.New=function(bI,bJ){return{k:bI,ct:bJ};};bq.$cctor=function(){bq.$cctor=a.ignore;bq.noneCT=br.New(false,[]);bq.scheduler=new bu.New();bq.defCTS=[new bv.New()];bq.Zero=bm.Return();bq.GetCT=function(bI){bI.k({$:0,$0:bI.ct});};};br.New=function(bI,bJ){return{c:bI,r:bJ};};bs.Filter=function(bI,bJ){return new _3.New$2(k.filter(bI,bs.ToArray(bJ)));};bs.Except=function(bI,bJ){var bK;bK=new _3.New$2(bs.ToArray(bJ));bK.ExceptWith(bs.ToArray(bI));return bK;};bs.ToArray=function(bI){var bJ;bJ=k.create(bI.get_Count(),void 0);bI.CopyTo(bJ);return bJ;};bs.Intersect=function(bI,bJ){var bK;bK=new _3.New$2(bs.ToArray(bI));bK.IntersectWith(bs.ToArray(bJ));return bK;};bt.concat=function(bI){var bJ,bK;bJ=[];for(var bL in bI)bJ.push.apply(bJ,bI[bL]);return bJ;};bu=bm.Scheduler=bE.Class({Fork:function(bI){var bJ;bJ=this;this.robin.push(bI);this.idle?(this.idle=false,a.setTimeout(function(){bJ.tick();},0)):void 0;},tick:function(){var bI,bJ,bK;bJ=this;bK=bH.now();bI=true;while(bI)if(this.robin.length===0){this.idle=true;bI=false;}else{(this.robin.shift())();bH.now()-bK>40?(a.setTimeout(function(){bJ.tick();},0),bI=false):void 0;}}},o,bu);bu.New=bE.Ctor(function(){o.New.call(this);this.idle=true;this.robin=[];},bu);bv=i.CancellationTokenSource=bE.Class({},o,bv);bv.New=bE.Ctor(function(){o.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bv);bw.Children=function(bI,bJ){var bK,bL,bM;if(bJ!=null&&bJ.$==1){bM=[];bK=bJ.$0[0].nextSibling;while(bK!==bJ.$0[1]){bM.push(bK);bK=bK.nextSibling;}return{$:0,$0:bM};}else return{$:0,$0:k.init(bI.childNodes.length,(bL=bI.childNodes,function(bN){return bL[bN];}))};};bw.Except=function(bI,bJ){var bK;bK=bI.$0;return{$:0,$0:k.filter(function(bL){return k.forall(function(bM){return!(bL===bM);},bK);},bJ.$0)};};bw.Iter=function(bI,bJ){k.iter(bI,bJ.$0);};bw.DocChildren=function(bI){var bJ;function bK(bL){if(bL!=null&&bL.$==2)bK(bL.$0.Current);else if(bL!=null&&bL.$==1)bJ.push(bL.$0.El);else if(bL==null);else if(bL!=null&&bL.$==5)bJ.push(bL.$0);else if(bL!=null&&bL.$==4)bJ.push(bL.$0.Text);else if(bL!=null&&bL.$==6)k.iter(function(bM){if(bM==null||bM.constructor===y)bK(bM);else bJ.push(bM);},bL.$0.Els);else{bK(bL.$0);bK(bL.$1);}}bJ=[];bK(bI.Children);return{$:0,$0:S.ofSeqNonCopying(bJ)};};by=i.OperationCanceledException=bE.Class({},bx,by);by.New=bE.Ctor(function(bI){by.New$1.call(this,"The operation was canceled.",null,bI);},by);by.New$1=bE.Ctor(function(bI,bJ,bK){this.message=bI;this.inner=bJ;y.setPrototypeOf(this,by.prototype);this.ct=bK;},by);bz.Create=function(bI){return bC.New(false,bI,bz.forceLazy);};bz.forceLazy=function(){var bI;bI=this.v();this.c=true;this.v=bI;this.f=bz.cachedLazy;return bI;};bz.cachedLazy=function(){return this.v;};bA.$cctor=function(){bA.$cctor=a.ignore;bA.Empty={$:0};};bC.New=function(bI,bJ,bK){return{c:bI,v:bJ,f:bK};};bE.OnLoad(function(){d.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

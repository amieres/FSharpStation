function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.SuperDoc=c.SuperDoc||{};e=d.SuperDocCtor=d.SuperDocCtor||{};f=d.SuperDoc=d.SuperDoc||{};g=d.SuperAttr=d.SuperAttr||{};h=d.SuperText=d.SuperText||{};i=c.Test=c.Test||{};j=a.WebSharper=a.WebSharper||{};k=j.Operators=j.Operators||{};l=j.Arrays=j.Arrays||{};m=j.Seq=j.Seq||{};n=j.UI=j.UI||{};o=n.View=n.View||{};p=j.Obj=j.Obj||{};q=n.Var=n.Var||{};r=n.Var$1=n.Var$1||{};s=j.Utils=j.Utils||{};t=n.Doc=n.Doc||{};u=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};v=j.JavaScript=j.JavaScript||{};w=v.JS=v.JS||{};x=a.EventTarget;y=a.Node;z=a.Object;A=j.Enumerator=j.Enumerator||{};B=n.FromView=n.FromView||{};C=n.Snap=n.Snap||{};D=v.Pervasives=v.Pervasives||{};E=j.Unchecked=j.Unchecked||{};F=n.DomUtility=n.DomUtility||{};G=n.AttrProxy=n.AttrProxy||{};H=n.HtmlModule=n.HtmlModule||{};I=H.attr=H.attr||{};J=n.Client=n.Client||{};K=J.Templates=J.Templates||{};L=a.WindowOrWorkerGlobalScope;M=n.Abbrev=n.Abbrev||{};N=M.Fresh=M.Fresh||{};O=n.Elt=n.Elt||{};P=n.Array=n.Array||{};Q=n.AttrModule=n.AttrModule||{};R=n.ConcreteVar=n.ConcreteVar||{};S=j.Collections=j.Collections||{};T=S.Dictionary=S.Dictionary||{};U=n.Docs=n.Docs||{};V=A.T=A.T||{};W=n.DocElemNode=n.DocElemNode||{};X=a.CharacterData;Y=n.Updates=n.Updates||{};Z=n.Attrs=n.Attrs||{};_0=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_1=j.List=j.List||{};_2=_1.T=_1.T||{};_3=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_4=S.HashSet=S.HashSet||{};_5=n.An=n.An||{};_6=J.Settings=J.Settings||{};_7=M.Mailbox=M.Mailbox||{};_8=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_9=J.Attrs=J.Attrs||{};_=_9.Dyn=_9.Dyn||{};$=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};ba=n.DynamicAttrNode=n.DynamicAttrNode||{};bb=S.DictionaryUtil=S.DictionaryUtil||{};bc=K.Prepare=K.Prepare||{};bd=j.Slice=j.Slice||{};be=S.KeyCollection=S.KeyCollection||{};bf=J.Docs=J.Docs||{};bg=bf.RunState=bf.RunState||{};bh=bf.NodeSet=bf.NodeSet||{};bi=n.Anims=n.Anims||{};bj=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bk=j.Queue=j.Queue||{};bl=j.Strings=j.Strings||{};bm=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bn=j.Concurrency=j.Concurrency||{};bo=n.AppendList=n.AppendList||{};bp=n.Easing=n.Easing||{};bq=bn.AsyncBody=bn.AsyncBody||{};br=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bs=bn.CT=bn.CT||{};bt=M.HashSet=M.HashSet||{};bu=S.HashSetUtil=S.HashSetUtil||{};bv=bn.Scheduler=bn.Scheduler||{};bw=j.CancellationTokenSource=j.CancellationTokenSource||{};bx=bf.DomNodes=bf.DomNodes||{};by=a.Error;bz=j.OperationCanceledException=j.OperationCanceledException||{};bA=j.Lazy=j.Lazy||{};bB=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bC=j.LazyExtensionsProxy=j.LazyExtensionsProxy||{};bD=bC.LazyRecord=bC.LazyRecord||{};bE=a.IntelliFactory;bF=bE&&bE.Runtime;bG=a.console;bH=a.jQuery;bI=a.Date;d.W=function(bJ){var bK;bK={FsRoot_TestingJS_SuperDoc_IView$GetView:function(){return bJ.get_View();}};p.New.call(bK);return bK;};d.mapW=function(bJ,bK){return new h({$:1,$0:o.Map(bJ,bK.FsRoot_TestingJS_SuperDoc_IView$GetView())});};d.T=a.id;d.TD=function(bJ,bK){return new f({$:0,$0:function(){return bJ(bK);}});};d.TA=function(bJ,bK){return new g({$:0,$0:function(){return bJ(bK);}});};d.TT=function(bJ){return new h({$:0,$0:bJ});};d.TW=function(bJ){return new h({$:1,$0:bJ});};d.TV=function(bJ){return new h({$:2,$0:bJ});};d.op_Dereference=function(bJ){return o.Const(bJ);};d.op_Multiply=function(bJ,bK){return o.Apply(bJ,bK);};d.getSuperDoc=function(bJ){return bJ.getSuperDoc$1();};d.htmlF=function(bJ,bK){return e.New(bJ).getSuperDoc(bK);};d.htmlTag=function(bJ,bK){return e.New((bF.Curried3(t.Element))(bJ)).getSuperDoc(bK);};d.div=function(bJ){return d.htmlF((bF.Curried3(t.Element))("div"),bJ);};d.button=function(bJ){return d.htmlF((bF.Curried3(t.Element))("button"),bJ);};d.input=function(bJ,bK){return(new e({$:0,$0:function(bL){return function(){return t.Input(bL,bJ);};},$1:[],$2:[]})).getSuperDoc(bK);};e=d.SuperDocCtor=bF.Class({getSuperDoc$1:function(){var bJ,bK,bL,bM;bJ=this;bK=bJ.$0;bL=bJ.$2;bM=bJ.$1;return new f({$:0,$0:function(){return(bK(l.map(function(bN){return bN.$0();},bM)))(l.map(function(bN){return bN.$0();},bL));}});},applyChildren:function(bJ){return m.fold(function(bK,bL){return bL.FsRoot_TestingJS_SuperDoc_ITransform$Transform(bK);},this,bJ);},getSuperDoc:function(bJ){return this.applyChildren(bJ).getSuperDoc$1();}},null,e);e.New=function(bJ){return new e({$:0,$0:bJ,$1:[],$2:[]});};f=d.SuperDoc=bF.Class({Transform:function(bJ){return new e({$:0,$0:bJ.$0,$1:bJ.$1,$2:bJ.$2.concat([this])});},get_T:function(){return this;},Doc:function(){return this.$0();},FsRoot_TestingJS_SuperDoc_ITransform$Transform:function(bJ){return this.Transform(bJ);}},null,f);g=d.SuperAttr=bF.Class({Transform:function(bJ){return new e({$:0,$0:bJ.$0,$1:bJ.$1.concat([this]),$2:bJ.$2});},get_T:function(){return this;},FsRoot_TestingJS_SuperDoc_ITransform$Transform:function(bJ){return this.Transform(bJ);}},null,g);h=d.SuperText=bF.Class({Transform:function(bJ){var bK,bL,bM;return new e({$:0,$0:bJ.$0,$1:bJ.$1,$2:bJ.$2.concat([new f({$:0,$0:this.$==1?(bK=this.$0,function(){return t.TextView(bK);}):this.$==2?(bL=this.$0,function(){return t.TextView(bL.get_View());}):(bM=this.$0,function(){return t.TextNode(bM);})})])});},get_T:function(){return this;},get_V:function(){return this.$==2?this.$0:this.$==0?new B.New(o.Const(this.$0),a.ignore):new B.New(this.$0,a.ignore);},Txt:function(){return this.$==2?this.$0.get_View():this.$==0?o.Const(this.$0):this.$0;},FsRoot_TestingJS_SuperDoc_ITransform$Transform:function(bJ){return this.Transform(bJ);},FsRoot_TestingJS_SuperDoc_IView$GetView:function(){return this.Txt();}},null,h);i.worldW=function(){u.$cctor();return u.worldW;};i.nameV=function(){u.$cctor();return u.nameV;};i.helloW=function(){u.$cctor();return u.helloW;};i.iAmW=function(){u.$cctor();return u.iAmW;};i.helloIamW=function(){u.$cctor();return u.helloIamW;};i.colorW=function(){u.$cctor();return u.colorW;};i.HelloWorld=function(){u.$cctor();return u.HelloWorld;};i.HelloWorld2=function(){u.$cctor();return u.HelloWorld2;};i.helloAct=function(bJ,bK){a.alert((function(bL){return function(bM){return bL("Hello "+s.toSafe(bM)+"!");};}(a.id))(i.nameV().Get()));};i.hiAct=function(bJ,bK){a.alert((function(bL){return function(bM){return bL("Hi "+s.toSafe(bM)+", How are you?");};}(a.id))(i.nameV().Get()));};i.buttonHello=function(){u.$cctor();return u.buttonHello;};i.buttonHi=function(){u.$cctor();return u.buttonHi;};i.buttonMore=function(){u.$cctor();return u.buttonMore;};i.inpName=function(){u.$cctor();return u.inpName;};i.HelloWorld3=function(){u.$cctor();return u.HelloWorld3;};i.HelloWorld4=function(){u.$cctor();return u.HelloWorld4;};i.mainDoc=function(){u.$cctor();return u.mainDoc;};i.main=function(){var bJ,bK;bJ=i.mainDoc().Doc();bK=self.document.body;K.LoadLocalTemplates("");t.Run(bK,bJ);};k.KeyValue=function(bJ){return[bJ.K,bJ.V];};k.FailWith=function(bJ){throw new by(bJ);};l.map=function(bJ,bK){var bL,bM,bN;bL=new a.Array(bK.length);for(bM=0,bN=bK.length-1;bM<=bN;bM++)bL[bM]=bJ(bK[bM]);return bL;};l.ofList=function(bJ){var bK,bL;bL=[];bK=bJ;while(!(bK.$==0)){bL.push(_1.head(bK));bK=_1.tail(bK);}return bL;};l.exists=function(bJ,bK){var bL,bM,bN,bO;bL=false;bM=0;bO=l.length(bK);while(!bL&&bM<bO)if(bJ(bK[bM]))bL=true;else bM=bM+1;return bL;};l.tryPick=function(bJ,bK){var bL,bM,bN;bL=null;bM=0;while(bM<bK.length&&bL==null){bN=bJ(bK[bM]);bN!=null&&bN.$==1?bL=bN:void 0;bM=bM+1;}return bL;};l.tryFindIndex=function(bJ,bK){var bL,bM;bL=null;bM=0;while(bM<bK.length&&bL==null){bJ(bK[bM])?bL={$:1,$0:bM}:void 0;bM=bM+1;}return bL;};l.foldBack=function(bJ,bK,bL){var bM,bN,bO,bP,bQ;bM=bL;bO=bK.length;for(bP=1,bQ=bO;bP<=bQ;bP++)bM=bJ(bK[bO-bP],bM);return bM;};l.filter=function(bJ,bK){var bL,bM,bN;bL=[];for(bM=0,bN=bK.length-1;bM<=bN;bM++)if(bJ(bK[bM]))bL.push(bK[bM]);return bL;};l.iter=function(bJ,bK){var bL,bM;for(bL=0,bM=bK.length-1;bL<=bM;bL++)bJ(bK[bL]);};l.concat=function(bJ){return a.Array.prototype.concat.apply([],l.ofSeq(bJ));};l.pick=function(bJ,bK){var bL;bL=l.tryPick(bJ,bK);return bL==null?k.FailWith("KeyNotFoundException"):bL.$0;};l.choose=function(bJ,bK){var bL,bM,bN,bO;bL=[];for(bM=0,bN=bK.length-1;bM<=bN;bM++){bO=bJ(bK[bM]);bO==null?void 0:bL.push(bO.$0);}return bL;};l.ofSeq=function(bJ){var bK,bL;if(bJ instanceof a.Array)return bJ.slice();else if(bJ instanceof _2)return l.ofList(bJ);else{bK=[];bL=A.Get(bJ);try{while(bL.MoveNext())bK.push(bL.Current());return bK;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}}};l.create=function(bJ,bK){var bL,bM,bN;bL=new a.Array(bJ);for(bM=0,bN=bJ-1;bM<=bN;bM++)bL[bM]=bK;return bL;};l.init=function(bJ,bK){var bL,bM,bN;bJ<0?k.FailWith("Negative size given."):null;bL=new a.Array(bJ);for(bM=0,bN=bJ-1;bM<=bN;bM++)bL[bM]=bK(bM);return bL;};l.forall=function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=l.length(bK);while(bL&&bM<bO)if(bJ(bK[bM]))bM=bM+1;else bL=false;return bL;};m.fold=function(bJ,bK,bL){var bM,bN;bM=bK;bN=A.Get(bL);try{while(bN.MoveNext())bM=bJ(bM,bN.Current());return bM;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};m.append=function(bJ,bK){return{GetEnumerator:function(){var bL,bM;bL=A.Get(bJ);bM=[true];return new V.New(bL,null,function(bN){var bO;return bN.s.MoveNext()?(bN.c=bN.s.Current(),true):(bO=bN.s,!E.Equals(bO,null)?bO.Dispose():void 0,bN.s=null,bM[0]&&(bM[0]=false,bN.s=A.Get(bK),bN.s.MoveNext()?(bN.c=bN.s.Current(),true):(bN.s.Dispose(),bN.s=null,false)));},function(bN){var bO;bO=bN.s;!E.Equals(bO,null)?bO.Dispose():void 0;});}};};m.head=function(bJ){var bK;bK=A.Get(bJ);try{return bK.MoveNext()?bK.Current():m.insufficient();}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};m.iter=function(bJ,bK){var bL;bL=A.Get(bK);try{while(bL.MoveNext())bJ(bL.Current());}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};m.map=function(bJ,bK){return{GetEnumerator:function(){var bL;bL=A.Get(bK);return new V.New(null,null,function(bM){return bL.MoveNext()&&(bM.c=bJ(bL.Current()),true);},function(){bL.Dispose();});}};};m.max=function(bJ){var bK,bL,bM;bK=A.Get(bJ);try{if(!bK.MoveNext())m.seqEmpty();bL=bK.Current();while(bK.MoveNext()){bM=bK.Current();E.Compare(bM,bL)===1?bL=bM:void 0;}return bL;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};m.seqEmpty=function(){return k.FailWith("The input sequence was empty.");};o=n.View=bF.Class({},null,o);p=j.Obj=bF.Class({Equals:function(bJ){return this===bJ;},GetHashCode:function(){return -1;}},null,p);p.New=bF.Ctor(function(){},p);q=n.Var=bF.Class({},p,q);q.New=bF.Ctor(function(){p.New.call(this);},q);r=n.Var$1=bF.Class({},p,r);r.Create$1=function(bJ){return new R.New(false,C.New({$:2,$0:bJ,$1:[]}),bJ);};o.Const=function(bJ){var bK;bK=C.New({$:0,$0:bJ});return function(){return bK;};};o.Map=function(bJ,bK){return o.CreateLazy(function(){return C.Map(bJ,bK());});};o.Map2=function(bJ,bK,bL){return o.CreateLazy(function(){return C.Map2(bJ,bK(),bL());});};o.Apply=function(bJ,bK){return o.Map2(function(bL,bM){return bL(bM);},bJ,bK);};o.CreateLazy=function(bJ){var bK;bK={c:null,o:bJ};return function(){var bL,bM;bL=bK.c;return bL===null?(bL=bK.o(),bK.c=bL,(bM=bL.s,bM!=null&&bM.$==0)?bK.o=null:C.WhenObsoleteRun(bL,function(){bK.c=null;}),bL):bL;};};o.TryGet=function(bJ){return C.TryGet(bJ());};o.Map2Unit=function(bJ,bK){return o.CreateLazy(function(){return C.Map2Unit(bJ(),bK());});};o.Sink=function(bJ,bK){function bL(){C.WhenRun(bK(),bJ,function(){bn.scheduler().Fork(bL);});}bn.scheduler().Fork(bL);};o.Get=function(bJ,bK){var bL;function bM(){C.WhenRun(bK(),function(bN){if(!bL[0]){bL[0]=true;bJ(bN);}},function(){if(!bL[0])bM();});}bL=[false];bM();};s.toSafe=function(bJ){return bJ==null?"":bJ;};t=n.Doc=bF.Class({},p,t);t.Element=function(bJ,bK,bL){var bM,bN;bM=G.Concat(bK);bN=t.Concat(bL);return O.New(F.CreateElement(bJ),bM,bN);};t.TextNode=function(bJ){return t.Mk({$:5,$0:F.CreateText(bJ)},o.Const());};t.Concat=function(bJ){var bK;bK=P.ofSeqNonCopying(bJ);return P.TreeReduce(t.get_Empty(),t.Append,bK);};t.Input=function(bJ,bK){return t.InputInternal("input",function(){return m.append(bJ,[Q.Value(bK)]);});};t.Run=function(bJ,bK){U.LinkElement(bJ,bK.docNode);t.RunInPlace(false,bJ,bK);};t.TextView=function(bJ){var bK;bK=U.CreateTextNode();return t.Mk({$:4,$0:bK},o.Map(function(bL){U.UpdateTextNode(bK,bL);},bJ));};t.Mk=function(bJ,bK){return new t.New(bJ,bK);};t.Append=function(bJ,bK){return t.Mk({$:0,$0:bJ.docNode,$1:bK.docNode},o.Map2Unit(bJ.updates,bK.updates));};t.get_Empty=function(){return t.Mk(null,o.Const());};t.InputInternal=function(bJ,bK){var bL;bL=F.CreateElement(bJ);return O.New(bL,G.Concat(bK(bL)),t.get_Empty());};t.RunInPlace=function(bJ,bK,bL){var bM;bM=U.CreateRunState(bK,bL.docNode);o.Sink(_5.get_UseAnimations()||_6.BatchUpdatesEnabled()?_7.StartProcessor(U.PerformAnimatedUpdate(bJ,bM,bL.docNode)):function(){U.PerformSyncUpdate(bJ,bM,bL.docNode);},bL.updates);};t.New=bF.Ctor(function(bJ,bK){p.New.call(this);this.docNode=bJ;this.updates=bK;},t);u.$cctor=function(){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;u.$cctor=a.ignore;function b7(b8,b9){return b8+b9;}u.worldW=d.TT("World");u.nameV=r.Create$1("Abe");u.helloW=(bJ=i.worldW(),d.mapW(function(b8){return function(b9){return b8("Hello "+s.toSafe(b9)+"!");};}(a.id),bJ));u.iAmW=(bK=d.W(i.nameV()),d.mapW(function(b8){return function(b9){return b8("My name is "+s.toSafe(b9)+".");};}(a.id),bK));u.helloIamW=d.op_Multiply(d.op_Multiply(d.op_Dereference((bF.Curried3(function(b8,b9,b_){return b8("Hello "+s.toSafe(b9)+"!, my name is "+s.toSafe(b_)+".");}))(a.id)),i.worldW().Txt()),i.nameV().get_View());u.colorW=d.op_Multiply(d.op_Dereference(function(b8){return function(b9){return b8("color:"+s.toSafe(b9));};}(a.id)),i.nameV().get_View());u.HelloWorld=d.div((bL=(bM=i.helloW(),(bN=i.iAmW(),new h({$:1,$0:(bO=bM.Txt(),(bP=bN.Txt(),((bQ=(bF.Curried3(function(b8,b9,b_){return b8(s.toSafe(b9)+" "+s.toSafe(b_));}))(a.id),(bF.Curried3(o.Map2))(function(b8,b9){return(bQ(b8))(b9);}))(bO))(bP)))}))),(bR=d.TA(function(b8){return G.Create("style",b8);},"background-color:coral"),[bL.get_T(),bR.get_T()])));u.HelloWorld2=d.div([d.T(i.HelloWorld()),d.T(i.helloW()),d.T(i.iAmW()),d.T(d.div([new h({$:1,$0:o.Map(function(b8){return b8+".";},(bS=new h({$:1,$0:o.Map(function(b8){return b8+"!, my name is";},(new h({$:1,$0:o.Map(function(b8){return"Hello"+b8;},i.worldW().Txt())})).Txt())}),(bT=i.nameV(),new h({$:1,$0:(bU=bS.Txt(),(bV=bT.get_View(),(((bF.Curried3(o.Map2))(b7))(bU))(bV)))}))).Txt())})]))]);u.buttonHello=d.htmlTag("button",(bW=new h({$:1,$0:o.Map(function(b8){return(((bF.Curried3(function(b9,b_,b$){return b9(s.toSafe(b_)+" "+s.toSafe(b$));}))(a.id))("Say Hello to my little"))(b8);},d.TV(i.nameV()).Txt())}),(bX=d.TA(function(b8){return G.HandlerImpl("click",b8);},function(b8){return function(b9){return i.helloAct(b8,b9);};}),[bW.get_T(),bX.get_T()])).concat([d.TA(function(b8){return G.Create("style",b8);},"font-weight:800").get_T()]).concat([d.TA(function(b8){return Q.Dynamic("style",b8);},i.colorW()).get_T()]));u.buttonHi=d.button((bY=new h({$:1,$0:o.Map(function(b8){return(((bF.Curried3(function(b9,b_,b$){return b9(s.toSafe(b_)+" "+s.toSafe(b$));}))(a.id))(b8))("How are you?");},(new h({$:1,$0:o.Map(function(b8){return(((bF.Curried3(function(b9,b_,b$){return b9(s.toSafe(b_)+" "+s.toSafe(b$));}))(a.id))("Hi"))(b8);},d.TV(i.nameV()).Txt())})).Txt())}),(bZ=d.TA(function(b8){return G.HandlerImpl("click",b8);},function(b8){return function(b9){return i.hiAct(b8,b9);};}),[bY.get_T(),bZ.get_T()])));u.buttonMore=d.htmlF((bF.Curried3(t.Element))("button"),(b0=new h({$:1,$0:o.Map(function(b8){return(((bF.Curried3(function(b9,b_,b$){return b9(s.toSafe(b_)+" "+s.toSafe(b$));}))(a.id))(b8))("How are you?");},(new h({$:1,$0:o.Map(function(b8){return(((bF.Curried3(function(b9,b_,b$){return b9(s.toSafe(b_)+" "+s.toSafe(b$));}))(a.id))("Hi"))(b8);},d.TV(i.nameV()).Txt())})).Txt())}),(b1=d.TA(function(b8){return G.HandlerImpl("click",b8);},function(b8){return function(b9){return i.hiAct(b8,b9);};}),[b0.get_T(),b1.get_T()])));u.inpName=d.input(i.nameV(),[]);u.HelloWorld3=d.div([new h({$:1,$0:i.helloIamW()})]);u.HelloWorld4=d.div((b2=i.HelloWorld(),(b3=i.helloW(),(b4=new h({$:0,$0:" "}),[b2.get_T(),b4.get_T()]).concat([b3.get_T()]))).concat([i.iAmW().get_T()]).concat([i.HelloWorld().get_T()]));u.mainDoc=d.div((b5=i.HelloWorld(),(b6=i.HelloWorld2(),[b5.get_T(),b6.get_T()])).concat([i.HelloWorld3().get_T()]).concat([i.HelloWorld4().get_T()]).concat([i.inpName().get_T()]).concat([i.buttonHello().get_T()]).concat([i.buttonHi().get_T()]));};w.GetFieldValues=function(bJ){var bK,bL;bK=[];for(var bM in bJ)bK.push(bJ[bM]);return bK;};A.Get=function(bJ){return bJ instanceof a.Array?A.ArrayEnumerator(bJ):E.Equals(typeof bJ,"string")?A.StringEnumerator(bJ):bJ.GetEnumerator();};A.ArrayEnumerator=function(bJ){return new V.New(0,null,function(bK){var bL;bL=bK.s;return bL<l.length(bJ)&&(bK.c=l.get(bJ,bL),bK.s=bL+1,true);},void 0);};A.StringEnumerator=function(bJ){return new V.New(0,null,function(bK){var bL;bL=bK.s;return bL<bJ.length&&(bK.c=bJ[bL],bK.s=bL+1,true);},void 0);};A.Get0=function(bJ){return bJ instanceof a.Array?A.ArrayEnumerator(bJ):E.Equals(typeof bJ,"string")?A.StringEnumerator(bJ):"GetEnumerator0"in bJ?bJ.GetEnumerator0():bJ.GetEnumerator();};l.get=function(bJ,bK){l.checkBounds(bJ,bK);return bJ[bK];};l.length=function(bJ){return bJ.dims===2?bJ.length*bJ.length:bJ.length;};l.checkBounds=function(bJ,bK){if(bK<0||bK>=bJ.length)k.FailWith("Index was outside the bounds of the array.");};l.set=function(bJ,bK,bL){l.checkBounds(bJ,bK);bJ[bK]=bL;};B=n.FromView=bF.Class({get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(bJ){var bK;bK=this;o.Get(function(bL){var bM;bM=bJ(bL);bM!=null&&bM.$==1?bK.set(bM.$0):void 0;},this.view);},Set:function(bJ){this.set(bJ);}},q,B);B.New=bF.Ctor(function(bJ,bK){var bL,bM;bL=this;q.New.call(this);this.set=bK;this.id=N.Int();this.current=(bM=o.TryGet(bJ),bM==null?null:bM.$0);this.view=o.Map(function(bN){bL.current=bN;return bN;},bJ);},B);C.Map=function(bJ,bK){var bL,bM;bL=bK.s;return bL!=null&&bL.$==0?C.New({$:0,$0:bJ(bL.$0)}):(bM=C.New({$:3,$0:[],$1:[]}),(C.When(bK,function(bN){C.MarkDone(bM,bK,bJ(bN));},bM),bM));};C.Map2=function(bJ,bK,bL){var bM,bN,bO;function bP(bQ){var bR,bS,bT;if(!(bR=bO.s,bR!=null&&bR.$==0||bR!=null&&bR.$==2)){bS=C.ValueAndForever(bK);bT=C.ValueAndForever(bL);bS!=null&&bS.$==1?bT!=null&&bT.$==1?bS.$0[1]&&bT.$0[1]?C.MarkForever(bO,bJ(bS.$0[0],bT.$0[0])):C.MarkReady(bO,bJ(bS.$0[0],bT.$0[0])):void 0:void 0;}}bM=bK.s;bN=bL.s;return bM!=null&&bM.$==0?bN!=null&&bN.$==0?C.New({$:0,$0:bJ(bM.$0,bN.$0)}):C.Map2Opt1(bJ,bM.$0,bL):bN!=null&&bN.$==0?C.Map2Opt2(bJ,bN.$0,bK):(bO=C.New({$:3,$0:[],$1:[]}),(C.When(bK,bP,bO),C.When(bL,bP,bO),bO));};C.WhenObsoleteRun=function(bJ,bK){var bL;bL=bJ.s;bL==null?bK():bL!=null&&bL.$==2?bL.$1.push(bK):bL!=null&&bL.$==3?bL.$1.push(bK):void 0;};C.When=function(bJ,bK,bL){var bM;bM=bJ.s;bM==null?C.Obsolete(bL):bM!=null&&bM.$==2?(C.EnqueueSafe(bM.$1,bL),bK(bM.$0)):bM!=null&&bM.$==3?(bM.$0.push(bK),C.EnqueueSafe(bM.$1,bL)):bK(bM.$0);};C.MarkDone=function(bJ,bK,bL){var bM;if(bM=bK.s,bM!=null&&bM.$==0)C.MarkForever(bJ,bL);else C.MarkReady(bJ,bL);};C.Map2Opt1=function(bJ,bK,bL){return C.Map(function(bM){return bJ(bK,bM);},bL);};C.Map2Opt2=function(bJ,bK,bL){return C.Map(function(bM){return bJ(bM,bK);},bL);};C.ValueAndForever=function(bJ){var bK;bK=bJ.s;return bK!=null&&bK.$==0?{$:1,$0:[bK.$0,true]}:bK!=null&&bK.$==2?{$:1,$0:[bK.$0,false]}:null;};C.MarkForever=function(bJ,bK){var bL,bM,bN,bO;bL=bJ.s;if(bL!=null&&bL.$==3){bJ.s={$:0,$0:bK};bM=bL.$0;for(bN=0,bO=l.length(bM)-1;bN<=bO;bN++)(l.get(bM,bN))(bK);}else void 0;};C.MarkReady=function(bJ,bK){var bL,bM,bN,bO;bL=bJ.s;if(bL!=null&&bL.$==3){bJ.s={$:2,$0:bK,$1:bL.$1};bM=bL.$0;for(bN=0,bO=l.length(bM)-1;bN<=bO;bN++)(l.get(bM,bN))(bK);}else void 0;};C.TryGet=function(bJ){var bK,bL;bK=bJ.s;return(bK!=null&&bK.$==0?(bL=bK.$0,true):bK!=null&&bK.$==2&&(bL=bK.$0,true))?{$:1,$0:bL}:null;};C.EnqueueSafe=function(bJ,bK){var bL,bM,bN,bO;bJ.push(bK);if(bJ.length%20===0){bL=bJ.slice(0);bk.Clear(bJ);for(bM=0,bN=l.length(bL)-1;bM<=bN;bM++){bO=l.get(bL,bM);typeof bO=="object"?function(bP){if(bP.s)bJ.push(bP);}(bO):function(bP){bJ.push(bP);}(bO);}}else void 0;};C.Copy=function(bJ){var bK,bL,bM;bK=bJ.s;return bK==null?bJ:bK!=null&&bK.$==2?(bL=C.New({$:2,$0:bK.$0,$1:[]}),(C.WhenObsolete(bJ,bL),bL)):bK!=null&&bK.$==3?(bM=C.New({$:3,$0:[],$1:[]}),(C.When(bJ,function(bN){C.MarkDone(bM,bJ,bN);},bM),bM)):bJ;};C.Map2Unit=function(bJ,bK){var bL,bM,bN;function bO(){var bP,bQ,bR;if(!(bP=bN.s,bP!=null&&bP.$==0||bP!=null&&bP.$==2)){bQ=C.ValueAndForever(bJ);bR=C.ValueAndForever(bK);bQ!=null&&bQ.$==1?bR!=null&&bR.$==1?bQ.$0[1]&&bR.$0[1]?C.MarkForever(bN,null):C.MarkReady(bN,null):void 0:void 0;}}bL=bJ.s;bM=bK.s;return bL!=null&&bL.$==0?bM!=null&&bM.$==0?C.New({$:0,$0:null}):bK:bM!=null&&bM.$==0?bJ:(bN=C.New({$:3,$0:[],$1:[]}),(C.When(bJ,bO,bN),C.When(bK,bO,bN),bN));};C.WhenRun=function(bJ,bK,bL){var bM;bM=bJ.s;bM==null?bL():bM!=null&&bM.$==2?(bM.$1.push(bL),bK(bM.$0)):bM!=null&&bM.$==3?(bM.$0.push(bK),bM.$1.push(bL)):bK(bM.$0);};C.WhenObsolete=function(bJ,bK){var bL;bL=bJ.s;bL==null?C.Obsolete(bK):bL!=null&&bL.$==2?C.EnqueueSafe(bL.$1,bK):bL!=null&&bL.$==3?C.EnqueueSafe(bL.$1,bK):void 0;};D.NewFromSeq=function(bJ){var bK,bL,bM;bK={};bL=A.Get(bJ);try{while(bL.MoveNext()){bM=bL.Current();bK[bM[0]]=bM[1];}}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}return bK;};E.Equals=function(bJ,bK){var bL,bM,bN,bO;if(bJ===bK)return true;else{bL=typeof bJ;if(bL=="object"){if(bJ===null||bJ===void 0||bK===null||bK===void 0)return false;else if("Equals"in bJ)return bJ.Equals(bK);else if(bJ instanceof a.Array&&bK instanceof a.Array)return E.arrayEquals(bJ,bK);else if(bJ instanceof a.Date&&bK instanceof a.Date)return E.dateEquals(bJ,bK);else{bM=[true];for(var bP in bJ)if(function(bQ){bM[0]=!bJ.hasOwnProperty(bQ)||bK.hasOwnProperty(bQ)&&E.Equals(bJ[bQ],bK[bQ]);return!bM[0];}(bP))break;if(bM[0]){for(var bQ in bK)if(function(bR){bM[0]=!bK.hasOwnProperty(bR)||bJ.hasOwnProperty(bR);return!bM[0];}(bQ))break;}return bM[0];}}else return bL=="function"&&("$Func"in bJ?bJ.$Func===bK.$Func&&bJ.$Target===bK.$Target:"$Invokes"in bJ&&"$Invokes"in bK&&E.arrayEquals(bJ.$Invokes,bK.$Invokes));}};E.arrayEquals=function(bJ,bK){var bL,bM;if(l.length(bJ)===l.length(bK)){bL=true;bM=0;while(bL&&bM<l.length(bJ)){!E.Equals(l.get(bJ,bM),l.get(bK,bM))?bL=false:void 0;bM=bM+1;}return bL;}else return false;};E.dateEquals=function(bJ,bK){return bJ.getTime()===bK.getTime();};E.Hash=function(bJ){var bK;bK=typeof bJ;return bK=="function"?0:bK=="boolean"?bJ?1:0:bK=="number"?bJ:bK=="string"?E.hashString(bJ):bK=="object"?bJ==null?0:bJ instanceof a.Array?E.hashArray(bJ):E.hashObject(bJ):0;};E.hashString=function(bJ){var bK,bL,bM;if(bJ===null)return 0;else{bK=5381;for(bL=0,bM=bJ.length-1;bL<=bM;bL++)bK=E.hashMix(bK,bJ[bL].charCodeAt());return bK;}};E.hashArray=function(bJ){var bK,bL,bM;bK=-34948909;for(bL=0,bM=l.length(bJ)-1;bL<=bM;bL++)bK=E.hashMix(bK,E.Hash(l.get(bJ,bL)));return bK;};E.hashObject=function(bJ){var bK,bL;if("GetHashCode"in bJ)return bJ.GetHashCode();else{bK=[0];for(var bM in bJ)if(function(bN){bK[0]=E.hashMix(E.hashMix(bK[0],E.hashString(bN)),E.Hash(bJ[bN]));return false;}(bM))break;return bK[0];}};E.hashMix=function(bJ,bK){return(bJ<<5)+bJ+bK;};E.Compare=function(bJ,bK){var bL,bM,bN,bO,bP,bQ;if(bJ===bK)return 0;else{bM=typeof bJ;switch(bM=="function"?1:bM=="boolean"?2:bM=="number"?2:bM=="string"?2:bM=="object"?3:0){case 0:return typeof bK=="undefined"?0:-1;case 1:return k.FailWith("Cannot compare function values.");case 2:return bJ<bK?-1:1;case 3:if(bJ===null)bN=-1;else if(bK===null)bN=1;else if("CompareTo"in bJ)bN=bJ.CompareTo(bK);else if("CompareTo0"in bJ)bN=bJ.CompareTo0(bK);else if(bJ instanceof a.Array&&bK instanceof a.Array)bN=E.compareArrays(bJ,bK);else if(bJ instanceof a.Date&&bK instanceof a.Date)bN=E.compareDates(bJ,bK);else{bO=[0];for(var bR in bJ)if(function(bS){return!bJ.hasOwnProperty(bS)?false:!bK.hasOwnProperty(bS)?(bO[0]=1,true):(bO[0]=E.Compare(bJ[bS],bK[bS]),bO[0]!==0);}(bR))break;if(bO[0]===0){for(var bS in bK)if(function(bT){return!bK.hasOwnProperty(bT)?false:!bJ.hasOwnProperty(bT)&&(bO[0]=-1,true);}(bS))break;}bN=bO[0];}return bN;}}};E.compareArrays=function(bJ,bK){var bL,bM;if(l.length(bJ)<l.length(bK))return -1;else if(l.length(bJ)>l.length(bK))return 1;else{bL=0;bM=0;while(bL===0&&bM<l.length(bJ)){bL=E.Compare(l.get(bJ,bM),l.get(bK,bM));bM=bM+1;}return bL;}};E.compareDates=function(bJ,bK){return E.Compare(bJ.getTime(),bK.getTime());};F.CreateElement=function(bJ){return F.Doc().createElement(bJ);};F.CreateText=function(bJ){return F.Doc().createTextNode(bJ);};F.Doc=function(){_0.$cctor();return _0.Doc;};F.SetAttr=function(bJ,bK,bL){bJ.setAttribute(bK,bL);};F.ChildrenArray=function(bJ){var bK,bL,bM;bK=[];for(bL=0,bM=bJ.childNodes.length-1;bL<=bM;bL++)bK.push(bJ.childNodes[bL]);return bK;};F.IterSelector=function(bJ,bK,bL){var bM,bN,bO;bM=bJ.querySelectorAll(bK);for(bN=0,bO=bM.length-1;bN<=bO;bN++)bL(bM[bN]);};F.InsertAt=function(bJ,bK,bL){var bM;if(!(bL.parentNode===bJ&&bK===(bM=bL.nextSibling,E.Equals(bM,null)?null:bM)))bJ.insertBefore(bL,bK);};F.RemoveNode=function(bJ,bK){if(bK.parentNode===bJ)bJ.removeChild(bK);};G=n.AttrProxy=bF.Class({},null,G);G.Concat=function(bJ){var bK;bK=P.ofSeqNonCopying(bJ);return P.TreeReduce(Z.EmptyAttr(),G.Append,bK);};G.Append=function(bJ,bK){return Z.AppendTree(bJ,bK);};G.Create=function(bJ,bK){return Z.Static(function(bL){F.SetAttr(bL,bJ,bK);});};G.HandlerImpl=function(bJ,bK){return Z.Static(function(bL){bL.addEventListener(bJ,function(bM){return(bK(bL))(bM);},false);});};I=H.attr=bF.Class({},p,I);K.LoadLocalTemplates=function(bJ){!K.LocalTemplatesLoaded()?(K.set_LocalTemplatesLoaded(true),K.LoadNestedTemplates(self.document.body,"")):void 0;K.LoadedTemplates().set_Item(bJ,K.LoadedTemplateFile(""));};K.LocalTemplatesLoaded=function(){_3.$cctor();return _3.LocalTemplatesLoaded;};K.set_LocalTemplatesLoaded=function(bJ){_3.$cctor();_3.LocalTemplatesLoaded=bJ;};K.LoadNestedTemplates=function(bJ,bK){var bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;function bL(b0){var b1,b2;if(!bM.ContainsKey(b0)){b1=(b2=null,[bN.TryGetValue(b0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);b1[0]?(bZ.Add(b0),bN.Remove(b0),K.PrepareTemplateStrict(bK,{$:1,$0:b0},b1[1][0],{$:1,$0:b1[1][1]},{$:1,$0:bL})):bG.warn(bZ.Contains(b0)?"Encountered loop when instantiating "+b0:"Local template does not exist: "+b0);}}bM=K.LoadedTemplateFile(bK);bN=new T.New$5();bO=bJ.querySelectorAll("[ws-template]");for(bP=0,bQ=bO.length-1;bP<=bQ;bP++){bR=bO[bP];bS=bR.getAttribute("ws-template").toLowerCase();bR.removeAttribute("ws-template");bN.set_Item(bS,[[bR],K.FakeRootSingle(bR)]);}bT=bJ.querySelectorAll("[ws-children-template]");for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=bT[bU];bX=bW.getAttribute("ws-children-template").toLowerCase();bW.removeAttribute("ws-children-template");bN.set_Item(bX,(bY=F.ChildrenArray(bW),[bY,K.FakeRoot(bY)]));}bZ=new _4.New$3();while(bN.count>0)bL(m.head(bN.get_Keys()));};K.LoadedTemplates=function(){_3.$cctor();return _3.LoadedTemplates;};K.LoadedTemplateFile=function(bJ){var bK,bL,bM;bK=(bL=null,[K.LoadedTemplates().TryGetValue(bJ,{get:function(){return bL;},set:function(bN){bL=bN;}}),bL]);return bK[0]?bK[1]:(bM=new T.New$5(),(K.LoadedTemplates().set_Item(bJ,bM),bM));};K.FakeRootSingle=function(bJ){var bK,bL,bM;bJ.removeAttribute("ws-template");bK=bJ.getAttribute("ws-replace");bK===null?void 0:(bJ.removeAttribute("ws-replace"),bL=bJ.parentNode,E.Equals(bL,null)?void 0:(bM=self.document.createElement(bJ.tagName),bM.setAttribute("ws-replace",bK),bL.replaceChild(bM,bJ)));return K.FakeRoot([bJ]);};K.FakeRoot=function(bJ){var bK,bL,bM;bK=self.document.createElement("div");for(bL=0,bM=bJ.length-1;bL<=bM;bL++)bK.appendChild(l.get(bJ,bL));return bK;};K.PrepareTemplateStrict=function(bJ,bK,bL,bM,bN){var bO,bP;function bQ(bV,bW){var bX,bY,bZ,b0,b1,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;function b2(cm){}while(true)switch(bV){case 0:if(bW!==null){bX=bW.nextSibling;if(E.Equals(bW.nodeType,y.TEXT_NODE))bc.convertTextNode(bW);else if(E.Equals(bW.nodeType,y.ELEMENT_NODE))bS(bW);bW=bX;}else return null;break;case 1:b3=bd.string(bW.nodeName,{$:1,$0:3},null).toLowerCase();b4=(bY=b3.indexOf("."),bY===-1?[bJ,b3]:[bd.string(b3,null,{$:1,$0:bY-1}),bd.string(b3,{$:1,$0:bY+1},null)]);b5=b4[1];b6=b4[0];if(b6!==""&&!K.LoadedTemplates().ContainsKey(b6))return bc.failNotLoaded(b5);else{if(b6===""&&bN!=null)bN.$0(b5);b7=K.LoadedTemplates().get_Item(b6);if(!b7.ContainsKey(b5))return bc.failNotLoaded(b5);else{b8=b7.get_Item(b5);b9=b8.cloneNode(true);b_=new _4.New$3();b$=new T.New$5();ca=bW.attributes;for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=ca.item(cb).name.toLowerCase();b$.set_Item(cd,(ce=ca.item(cb).nodeValue,ce===""?cd:ce.toLowerCase()));!b_.Add(cd)?bG.warn("Hole mapped twice",cd):void 0;}for(cf=0,cg=bW.childNodes.length-1;cf<=cg;cf++){ch=bW.childNodes[cf];E.Equals(ch.nodeType,y.ELEMENT_NODE)?!b_.Add(ch.nodeName.toLowerCase())?bG.warn("Hole filled twice",b5):void 0:void 0;}ci=bW.childNodes.length===1&&E.Equals(bW.firstChild.nodeType,y.TEXT_NODE);if(ci){b0=bc.fillTextHole(b9,bW.firstChild.textContent,b5);((function(cm){return function(cn){if(cn!=null)cm(cn.$0);};}((b1=function(cm){return function(cn){return cm.Add(cn);};}(b_),function(cm){return b2(b1(cm));})))(b0));}bc.removeHolesExcept(b9,b_);if(!ci){for(cj=0,ck=bW.childNodes.length-1;cj<=ck;cj++){cl=bW.childNodes[cj];E.Equals(cl.nodeType,y.ELEMENT_NODE)?cl.hasAttributes()?bc.fillInstanceAttrs(b9,cl):bR(b9,cl):void 0;}}bc.mapHoles(b9,b$);bc.fill(b9,bW.parentNode,bW);bW.parentNode.removeChild(bW);return;}}break;}}function bR(bV,bW){var bX,bZ,b0;function bY(b1,b2){var b3,b4,b5;if(bZ==="title"&&bW.hasChildNodes()){b3=bH.parseHTML(bW.textContent);bW.removeChild(bW.firstChild);for(b4=0,b5=b3.length-1;b4<=b5;b4++)bW.appendChild(l.get(b3,b4));}else null;bS(bW);return bc.fill(bW,b1,b2);}bZ=bW.nodeName.toLowerCase();F.IterSelector(bV,"[ws-attr-holes]",function(b1){var b2,b3,b4,b5,b6;b2=bl.SplitChars(b1.getAttribute("ws-attr-holes"),[" "],1);for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=l.get(b2,b3);b1.setAttribute(b5,(b6=new a.RegExp("\\${"+bZ+"}","ig"),b1.getAttribute(b5).replace(b6,bW.textContent)));}});b0=bV.querySelector("[ws-hole="+bZ+"]");if(E.Equals(b0,null)){bX=bV.querySelector("[ws-replace="+bZ+"]");return E.Equals(bX,null)?null:(bY(bX.parentNode,bX),void bX.parentNode.removeChild(bX));}else{while(b0.hasChildNodes())b0.removeChild(b0.lastChild);b0.removeAttribute("ws-hole");return bY(b0,null);}}function bS(bV){if(bl.StartsWith(bV.nodeName.toLowerCase(),"ws-"))bU(bV);else{bc.convertAttrs(bV);bT(bV.firstChild);}}function bT(bV){return bQ(0,bV);}function bU(bV){return bQ(1,bV);}bO=bM==null?K.FakeRoot(bL):bM.$0;bP=(bK==null?"":bK.$0).toLowerCase();K.LoadedTemplateFile(bJ).set_Item(bP,bO);l.length(bL)>0?(function(bV){var bW,bX,bY,bZ;while(true){bW=bV.querySelector("[ws-template]");if(E.Equals(bW,null)){bX=bV.querySelector("[ws-children-template]");if(E.Equals(bX,null))return null;else{bY=bX.getAttribute("ws-children-template");bX.removeAttribute("ws-children-template");K.PrepareTemplateStrict(bJ,{$:1,$0:bY},F.ChildrenArray(bX),null,null);bV=bV;}}else{bZ=bW.getAttribute("ws-template");(K.PrepareSingleTemplate(bJ,{$:1,$0:bZ},bW))(null);bV=bV;}}}(bO),bT(l.get(bL,0))):void 0;};K.PrepareSingleTemplate=function(bJ,bK,bL){var bM,bN,bO;bM=K.FakeRootSingle(bL);bN=[bL];bO={$:1,$0:bM};return function(bP){K.PrepareTemplateStrict(bJ,bK,bN,bO,bP);};};K.TextHoleRE=function(){_3.$cctor();return _3.TextHoleRE;};N.Int=function(){N.set_counter(N.counter()+1);return N.counter();};N.set_counter=function(bJ){_8.$cctor();_8.counter=bJ;};N.counter=function(){_8.$cctor();return _8.counter;};C.Obsolete=function(bJ){var bK,bL,bM,bN,bO;bL=bJ.s;if(bL==null||(bL!=null&&bL.$==2?(bK=bL.$1,false):bL!=null&&bL.$==3?(bK=bL.$1,false):true))void 0;else{bJ.s=null;for(bM=0,bN=l.length(bK)-1;bM<=bN;bM++){bO=l.get(bK,bM);typeof bO=="object"?function(bP){C.Obsolete(bP);}(bO):bO();}}};C.New=function(bJ){return{s:bJ};};O=n.Elt=bF.Class({},t,O);O.New=function(bJ,bK,bL){var bM,bN;bM=U.CreateElemNode(bJ,bK,bL.docNode);bN=Y.Create(bL.updates);return new O.New$1({$:1,$0:bM},o.Map2Unit(Z.Updates(bM.Attr),bN.v),bJ,bN);};O.New$1=bF.Ctor(function(bJ,bK,bL,bM){t.New.call(this,bJ,bK);this.docNode$1=bJ;this.updates$1=bK;this.elt=bL;this.rvUpdates=bM;},O);P.ofSeqNonCopying=function(bJ){var bK,bL;if(bJ instanceof a.Array)return bJ;else if(bJ instanceof _2)return l.ofList(bJ);else if(bJ===null)return[];else{bK=[];bL=A.Get(bJ);try{while(bL.MoveNext())bK.push(bL.Current());return bK;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}}};P.TreeReduce=function(bJ,bK,bL){var bM;function bN(bO,bP){var bQ,bR;return bP<=0?bJ:bP===1&&(bO>=0&&bO<bM)?l.get(bL,bO):(bR=bP/2>>0,bK(bN(bO,bR),bN(bO+bR,bP-bR)));}bM=l.length(bL);return bN(0,bM);};P.MapTreeReduce=function(bJ,bK,bL,bM){var bN;function bO(bP,bQ){var bR,bS;return bQ<=0?bK:bQ===1&&(bP>=0&&bP<bN)?bJ(l.get(bM,bP)):(bS=bQ/2>>0,bL(bO(bP,bS),bO(bP+bS,bQ-bS)));}bN=l.length(bM);return bO(0,bN);};Q.Value=function(bJ){function bK(bL){return{$:1,$0:bL};}return Q.CustomValue(bJ,a.id,function(bL){return bK(a.id(bL));});};Q.Dynamic=function(bJ,bK){return Z.Dynamic(bK,function(bL){return function(bM){return F.SetAttr(bL,bJ,bM);};});};Q.CustomValue=function(bJ,bK,bL){return Q.CustomVar(bJ,function(bM,bN){bM.value=bK(bN);},function(bM){return bL(bM.value);});};Q.CustomVar=function(bJ,bK,bL){function bM(bO,bP){return bJ.UpdateMaybe(function(bQ){var bR,bS;bR=bL(bO);return bR!=null&&bR.$==1&&(!E.Equals(bR.$0,bQ)&&(bS=[bR,bR.$0],true))?bS[0]:null;});}function bN(bO,bP){var bQ,bR;bQ=bL(bO);return bQ!=null&&bQ.$==1&&(E.Equals(bQ.$0,bP)&&(bR=bQ.$0,true))?null:bK(bO,bP);}return G.Concat([Q.Handler("change",function(bO){return function(bP){return bM(bO,bP);};}),Q.Handler("input",function(bO){return function(bP){return bM(bO,bP);};}),Q.Handler("keypress",function(bO){return function(bP){return bM(bO,bP);};}),Q.DynamicCustom(function(bO){return function(bP){return bN(bO,bP);};},bJ.get_View())]);};Q.Handler=function(bJ,bK){return Z.Static(function(bL){bL.addEventListener(bJ,function(bM){return(bK(bL))(bM);},false);});};Q.DynamicCustom=function(bJ,bK){return Z.Dynamic(bK,bJ);};R=n.ConcreteVar=bF.Class({get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(bJ){var bK;bK=bJ(this.Get());bK!=null&&bK.$==1?this.Set(bK.$0):void 0;},Set:function(bJ){if(this.isConst)(function(bK){return bK("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bK){bG.log(bK);}));else{C.Obsolete(this.snap);this.current=bJ;this.snap=C.New({$:2,$0:bJ,$1:[]});}}},q,R);R.New=bF.Ctor(function(bJ,bK,bL){var bM;bM=this;q.New.call(this);this.isConst=bJ;this.current=bL;this.snap=bK;this.view=function(){return bM.snap;};this.id=N.Int();},R);T=S.Dictionary=bF.Class({set_Item:function(bJ,bK){this.set(bJ,bK);},ContainsKey:function(bJ){var bK,bL;bK=this;bL=this.data[this.hash(bJ)];return bL==null?false:l.exists(function(bM){return bK.equals.apply(null,[(k.KeyValue(bM))[0],bJ]);},bL);},TryGetValue:function(bJ,bK){var bL,bM,bN;bL=this;bM=this.data[this.hash(bJ)];return bM==null?false:(bN=l.tryPick(function(bO){var bP;bP=k.KeyValue(bO);return bL.equals.apply(null,[bP[0],bJ])?{$:1,$0:bP[1]}:null;},bM),bN!=null&&bN.$==1&&(bK.set(bN.$0),true));},Remove:function(bJ){return this.remove(bJ);},get_Keys:function(){return new be.New(this);},set:function(bJ,bK){var bL,bM,bN,bO;bL=this;bM=this.hash(bJ);bN=this.data[bM];bN==null?(this.count=this.count+1,this.data[bM]=new a.Array({K:bJ,V:bK})):(bO=l.tryFindIndex(function(bP){return bL.equals.apply(null,[(k.KeyValue(bP))[0],bJ]);},bN),bO==null?(this.count=this.count+1,bN.push({K:bJ,V:bK})):bN[bO.$0]={K:bJ,V:bK});},remove:function(bJ){var bK,bL,bM,bN;bK=this;bL=this.hash(bJ);bM=this.data[bL];return bM==null?false:(bN=l.filter(function(bO){return!bK.equals.apply(null,[(k.KeyValue(bO))[0],bJ]);},bM),l.length(bN)<bM.length&&(this.count=this.count-1,this.data[bL]=bN,true));},get_Item:function(bJ){return this.get(bJ);},get:function(bJ){var bK,bL;bK=this;bL=this.data[this.hash(bJ)];return bL==null?bb.notPresent():l.pick(function(bM){var bN;bN=k.KeyValue(bM);return bK.equals.apply(null,[bN[0],bJ])?{$:1,$0:bN[1]}:null;},bL);},GetEnumerator:function(){return A.Get0(this);},GetEnumerator0:function(){return A.Get0(l.concat(w.GetFieldValues(this.data)));}},p,T);T.New$5=bF.Ctor(function(){T.New$6.call(this,[],E.Equals,E.Hash);},T);T.New$6=bF.Ctor(function(bJ,bK,bL){var bM,bN;p.New.call(this);this.equals=bK;this.hash=bL;this.count=0;this.data=[];bM=A.Get(bJ);try{while(bM.MoveNext()){bN=bM.Current();this.set(bN.K,bN.V);}}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}},T);U.LinkElement=function(bJ,bK){U.InsertDoc(bJ,bK,null);};U.CreateTextNode=function(){return{Text:F.CreateText(""),Dirty:false,Value:""};};U.UpdateTextNode=function(bJ,bK){bJ.Value=bK;bJ.Dirty=true;};U.CreateElemNode=function(bJ,bK,bL){var bM;U.LinkElement(bJ,bL);bM=Z.Insert(bJ,bK);return W.New(bM,bL,null,bJ,N.Int(),bF.GetOptional(bM.OnAfterRender));};U.InsertDoc=function(bJ,bK,bL){var bM;return bK!=null&&bK.$==1?U.InsertNode(bJ,bK.$0.El,bL):bK!=null&&bK.$==2?(bM=bK.$0,(bM.Dirty=false,U.InsertDoc(bJ,bM.Current,bL))):bK==null?bL:bK!=null&&bK.$==4?U.InsertNode(bJ,bK.$0.Text,bL):bK!=null&&bK.$==5?U.InsertNode(bJ,bK.$0,bL):bK!=null&&bK.$==6?l.foldBack(function(bN,bO){return bN==null||bN.constructor===z?U.InsertDoc(bJ,bN,bO):U.InsertNode(bJ,bN,bO);},bK.$0.Els,bL):U.InsertDoc(bJ,bK.$0,U.InsertDoc(bJ,bK.$1,bL));};U.CreateRunState=function(bJ,bK){return bg.New(bh.get_Empty(),U.CreateElemNode(bJ,Z.EmptyAttr(),bK));};U.PerformAnimatedUpdate=function(bJ,bK,bL){var bM;return _5.get_UseAnimations()?(bM=null,bn.Delay(function(){var bN,bO,bP;bN=bh.FindAll(bL);bO=U.ComputeChangeAnim(bK,bN);bP=U.ComputeEnterAnim(bK,bN);return bn.Bind(_5.Play(_5.Append(bO,U.ComputeExitAnim(bK,bN))),function(){return bn.Bind(U.SyncElemNodesNextFrame(bJ,bK),function(){return bn.Bind(_5.Play(bP),function(){bK.PreviousNodes=bN;return bn.Return(null);});});});})):U.SyncElemNodesNextFrame(bJ,bK);};U.PerformSyncUpdate=function(bJ,bK,bL){var bM;bM=bh.FindAll(bL);U.SyncElemNode(bJ,bK.Top);bK.PreviousNodes=bM;};U.InsertNode=function(bJ,bK,bL){F.InsertAt(bJ,bL,bK);return bK;};U.SyncElemNodesNextFrame=function(bJ,bK){function bL(bM){a.requestAnimationFrame(function(){U.SyncElemNode(bJ,bK.Top);bM();});}return _6.BatchUpdatesEnabled()?bn.FromContinuations(function(bM,bN,bO){return bL.apply(null,[bM,bN,bO]);}):(U.SyncElemNode(bJ,bK.Top),bn.Return(null));};U.ComputeExitAnim=function(bJ,bK){return _5.Concat(l.map(function(bL){return Z.GetExitAnim(bL.Attr);},bh.ToArray(bh.Except(bK,bh.Filter(function(bL){return Z.HasExitAnim(bL.Attr);},bJ.PreviousNodes)))));};U.ComputeEnterAnim=function(bJ,bK){return _5.Concat(l.map(function(bL){return Z.GetEnterAnim(bL.Attr);},bh.ToArray(bh.Except(bJ.PreviousNodes,bh.Filter(function(bL){return Z.HasEnterAnim(bL.Attr);},bK)))));};U.ComputeChangeAnim=function(bJ,bK){var bL;function bM(bN){return Z.HasChangeAnim(bN.Attr);}bL=function(bN){return bh.Filter(bM,bN);};return _5.Concat(l.map(function(bN){return Z.GetChangeAnim(bN.Attr);},bh.ToArray(bh.Intersect(bL(bJ.PreviousNodes),bL(bK)))));};U.SyncElemNode=function(bJ,bK){!bJ?U.SyncElement(bK):void 0;U.Sync(bK.Children);U.AfterRender(bK);};U.SyncElement=function(bJ){function bK(bL){function bM(bN){var bO,bP;return bN!=null&&bN.$==0?bM(bN.$0)||bM(bN.$1):bN!=null&&bN.$==2?(bO=bN.$0,bO.Dirty||bM(bO.Current)):bN!=null&&bN.$==6&&(bP=bN.$0,bP.Dirty||l.exists(bK,bP.Holes));}return bM(bL.Children);}Z.Sync(bJ.El,bJ.Attr);bK(bJ)?U.DoSyncElement(bJ):void 0;};U.Sync=function(bJ){var bK,bL;if(bJ!=null&&bJ.$==1)U.SyncElemNode(false,bJ.$0);else if(bJ!=null&&bJ.$==2)U.Sync(bJ.$0.Current);else if(bJ==null);else if(bJ!=null&&bJ.$==5);else if(bJ!=null&&bJ.$==4){bK=bJ.$0;bK.Dirty?(bK.Text.nodeValue=bK.Value,bK.Dirty=false):void 0;}else if(bJ!=null&&bJ.$==6){bL=bJ.$0;l.iter(function(bM){U.SyncElemNode(false,bM);},bL.Holes);l.iter(function(bM){Z.Sync(bM[0],bM[1]);},bL.Attrs);U.AfterRender(bL);}else{U.Sync(bJ.$0);U.Sync(bJ.$1);}};U.AfterRender=function(bJ){var bK;bK=bF.GetOptional(bJ.Render);bK!=null&&bK.$==1?(bK.$0(bJ.El),bF.SetOptional(bJ,"Render",null)):void 0;};U.DoSyncElement=function(bJ){var bK,bL,bM;function bN(bO,bP){var bQ,bR;return bO!=null&&bO.$==1?bO.$0.El:bO!=null&&bO.$==2?(bQ=bO.$0,bQ.Dirty?(bQ.Dirty=false,U.InsertDoc(bK,bQ.Current,bP)):bN(bQ.Current,bP)):bO==null?bP:bO!=null&&bO.$==4?bO.$0.Text:bO!=null&&bO.$==5?bO.$0:bO!=null&&bO.$==6?(bR=bO.$0,(bR.Dirty?bR.Dirty=false:void 0,l.foldBack(function(bS,bT){return bS==null||bS.constructor===z?bN(bS,bT):bS;},bR.Els,bP))):bN(bO.$0,bN(bO.$1,bP));}bK=bJ.El;bx.Iter((bL=bJ.El,function(bO){F.RemoveNode(bL,bO);}),bx.Except(bx.DocChildren(bJ),bx.Children(bJ.El,bF.GetOptional(bJ.Delimiters))));bN(bJ.Children,(bM=bF.GetOptional(bJ.Delimiters),bM!=null&&bM.$==1?bM.$0[1]:null));};V=A.T=bF.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},p,V);V.New=bF.Ctor(function(bJ,bK,bL,bM){p.New.call(this);this.s=bJ;this.c=bK;this.n=bL;this.d=bM;},V);W=n.DocElemNode=bF.Class({Equals:function(bJ){return this.ElKey===bJ.ElKey;},GetHashCode:function(){return this.ElKey;}},null,W);W.New=function(bJ,bK,bL,bM,bN,bO){var bP;return new W((bP={Attr:bJ,Children:bK,El:bM,ElKey:bN},(bF.SetOptional(bP,"Delimiters",bL),bF.SetOptional(bP,"Render",bO),bP)));};Y=n.Updates=bF.Class({},null,Y);Y.Create=function(bJ){var bK;bK=null;bK=Y.New(bJ,null,function(){var bL;bL=bK.s;return bL===null?(bL=C.Copy(bK.c()),bK.s=bL,C.WhenObsoleteRun(bL,function(){bK.s=null;}),bL):bL;});return bK;};Y.New=function(bJ,bK,bL){return new Y({c:bJ,s:bK,v:bL});};Z.Updates=function(bJ){return P.MapTreeReduce(function(bK){return bK.NChanged();},o.Const(),o.Map2Unit,bJ.DynNodes);};Z.AppendTree=function(bJ,bK){var bL;return bJ===null?bK:bK===null?bJ:(bL=new G({$:2,$0:bJ,$1:bK}),(Z.SetFlags(bL,Z.Flags(bJ)|Z.Flags(bK)),bL));};Z.EmptyAttr=function(){$.$cctor();return $.EmptyAttr;};Z.Static=function(bJ){return new G({$:3,$0:bJ});};Z.Dynamic=function(bJ,bK){return new G({$:1,$0:new ba.New(bJ,bK)});};Z.Insert=function(bJ,bK){var bL,bM,bN;function bO(bP){if(!(bP===null))if(bP!=null&&bP.$==1)bL.push(bP.$0);else if(bP!=null&&bP.$==2){bO(bP.$0);bO(bP.$1);}else if(bP!=null&&bP.$==3)bP.$0(bJ);else if(bP!=null&&bP.$==4)bM.push(bP.$0);}bL=[];bM=[];bO(bK);bN=bL.slice(0);return _.New(bJ,Z.Flags(bK),bN,bM.length===0?null:{$:1,$0:function(bP){m.iter(function(bQ){bQ(bP);},bM);}});};Z.SetFlags=function(bJ,bK){bJ.flags=bK;};Z.Flags=function(bJ){return bJ!==null&&bJ.hasOwnProperty("flags")?bJ.flags:0;};Z.HasExitAnim=function(bJ){var bK;bK=2;return(bJ.DynFlags&bK)===bK;};Z.GetExitAnim=function(bJ){return Z.GetAnim(bJ,function(bK,bL){return bK.NGetExitAnim(bL);});};Z.HasEnterAnim=function(bJ){var bK;bK=1;return(bJ.DynFlags&bK)===bK;};Z.GetEnterAnim=function(bJ){return Z.GetAnim(bJ,function(bK,bL){return bK.NGetEnterAnim(bL);});};Z.HasChangeAnim=function(bJ){var bK;bK=4;return(bJ.DynFlags&bK)===bK;};Z.GetChangeAnim=function(bJ){return Z.GetAnim(bJ,function(bK,bL){return bK.NGetChangeAnim(bL);});};Z.GetAnim=function(bJ,bK){return _5.Concat(l.map(function(bL){return bK(bL,bJ.DynElem);},bJ.DynNodes));};Z.Sync=function(bJ,bK){l.iter(function(bL){bL.NSync(bJ);},bK.DynNodes);};_0.$cctor=function(){_0.$cctor=a.ignore;_0.Doc=self.document;};_2=_1.T=bF.Class({GetEnumerator:function(){return new V.New(this,null,function(bJ){var bK;bK=bJ.s;return bK.$==0?false:(bJ.c=bK.$0,bJ.s=bK.$1,true);},void 0);},GetEnumerator0:function(){return A.Get(this);}},null,_2);_3.$cctor=function(){_3.$cctor=a.ignore;_3.LoadedTemplates=new T.New$5();_3.LocalTemplatesLoaded=false;_3.TextHoleRE="\\${([^}]+)}";};_4=S.HashSet=bF.Class({Add:function(bJ){return this.add(bJ);},Contains:function(bJ){var bK;bK=this.data[this.hash(bJ)];return bK==null?false:this.arrContains(bJ,bK);},add:function(bJ){var bK,bL;bK=this.hash(bJ);bL=this.data[bK];return bL==null?(this.data[bK]=[bJ],this.count=this.count+1,true):this.arrContains(bJ,bL)?false:(bL.push(bJ),this.count=this.count+1,true);},arrContains:function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=bK.length;while(bL&&bM<bO)if(this.equals.apply(null,[bK[bM],bJ]))bL=false;else bM=bM+1;return!bL;},ExceptWith:function(bJ){var bK;bK=A.Get(bJ);try{while(bK.MoveNext())this.Remove(bK.Current());}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bJ){var bK,bL,bM,bN;bK=0;bL=bu.concat(this.data);for(bM=0,bN=bL.length-1;bM<=bN;bM++)l.set(bJ,bM,bL[bM]);},IntersectWith:function(bJ){var bK,bL,bM,bN,bO;bK=new _4.New$4(bJ,this.equals,this.hash);bL=bu.concat(this.data);for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=bL[bM];!bK.Contains(bO)?this.Remove(bO):void 0;}},Remove:function(bJ){var bK;bK=this.data[this.hash(bJ)];return bK==null?false:this.arrRemove(bJ,bK)&&(this.count=this.count-1,true);},arrRemove:function(bJ,bK){var bL,bM,bN,bO;bL=true;bM=0;bO=bK.length;while(bL&&bM<bO)if(this.equals.apply(null,[bK[bM],bJ])){bK.splice.apply(bK,[bM,1]);bL=false;}else bM=bM+1;return!bL;},GetEnumerator:function(){return A.Get(bu.concat(this.data));},GetEnumerator0:function(){return A.Get(bu.concat(this.data));}},p,_4);_4.New$3=bF.Ctor(function(){_4.New$4.call(this,[],E.Equals,E.Hash);},_4);_4.New$4=bF.Ctor(function(bJ,bK,bL){var bM;p.New.call(this);this.equals=bK;this.hash=bL;this.data=[];this.count=0;bM=A.Get(bJ);try{while(bM.MoveNext())this.add(bM.Current());}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}},_4);_4.New$2=bF.Ctor(function(bJ){_4.New$4.call(this,bJ,E.Equals,E.Hash);},_4);_5.get_UseAnimations=function(){return bi.UseAnimations();};_5.Play=function(bJ){var bK;bK=null;return bn.Delay(function(){return bn.Bind(_5.Run(a.ignore,bi.Actions(bJ)),function(){bi.Finalize(bJ);return bn.Return(null);});});};_5.Append=function(bJ,bK){return{$:0,$0:bo.Append(bJ.$0,bK.$0)};};_5.Run=function(bJ,bK){var bL;function bM(bN){function bO(bP,bQ){var bR;bR=bQ-bP;bK.Compute(bR);bJ();return bR<=bL?void a.requestAnimationFrame(function(bS){bO(bP,bS);}):bN();}a.requestAnimationFrame(function(bP){bO(bP,bP);});}bL=bK.Duration;return bL===0?bn.Zero():bn.FromContinuations(function(bN,bO,bP){return bM.apply(null,[bN,bO,bP]);});};_5.Concat=function(bJ){return{$:0,$0:bo.Concat(m.map(bi.List,bJ))};};_5.get_Empty=function(){return{$:0,$0:bo.Empty()};};_6.BatchUpdatesEnabled=function(){bj.$cctor();return bj.BatchUpdatesEnabled;};_7.StartProcessor=function(bJ){var bK;function bL(){var bM;bM=null;return bn.Delay(function(){return bn.Bind(bJ,function(){var bN;bN=bK[0];return bN===1?(bK[0]=0,bn.Zero()):bN===2?(bK[0]=1,bL()):bn.Zero();});});}bK=[0];return function(){var bM;bM=bK[0];bM===0?(bK[0]=1,bn.Start(bL(),null)):bM===1?bK[0]=2:void 0;};};_8.$cctor=function(){_8.$cctor=a.ignore;_8.counter=0;};_.New=function(bJ,bK,bL,bM){var bN;bN={DynElem:bJ,DynFlags:bK,DynNodes:bL};bF.SetOptional(bN,"OnAfterRender",bM);return bN;};_1.head=function(bJ){return bJ.$==1?bJ.$0:_1.listEmpty();};_1.tail=function(bJ){return bJ.$==1?bJ.$1:_1.listEmpty();};_1.listEmpty=function(){return k.FailWith("The input list was empty.");};$.$cctor=function(){$.$cctor=a.ignore;$.EmptyAttr=null;};ba=n.DynamicAttrNode=bF.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bJ){return _5.get_Empty();},NGetEnterAnim:function(bJ){return _5.get_Empty();},NGetChangeAnim:function(bJ){return _5.get_Empty();},NSync:function(bJ){if(this.dirty){(this.push(bJ))(this.value);this.dirty=false;}}},p,ba);ba.New=bF.Ctor(function(bJ,bK){var bL;bL=this;p.New.call(this);this.push=bK;this.value=void 0;this.dirty=false;this.updates=o.Map(function(bM){bL.value=bM;bL.dirty=true;},bJ);},ba);bb.notPresent=function(){return k.FailWith("The given key was not present in the dictionary.");};bc.convertTextNode=function(bJ){var bK,bL,bM,bN,bO,bP;bK=null;bL=0;bN=bJ.textContent;bO=new a.RegExp(K.TextHoleRE(),"g");while(bK=bO.exec(bN),bK!==null){bJ.parentNode.insertBefore(self.document.createTextNode(bd.string(bN,{$:1,$0:bL},{$:1,$0:bO.lastIndex-l.get(bK,0).length-1})),bJ);bL=bO.lastIndex;bP=self.document.createElement("span");bP.setAttribute("ws-replace",l.get(bK,1).toLowerCase());bJ.parentNode.insertBefore(bP,bJ);}bO.lastIndex=0;bJ.textContent=bd.string(bN,{$:1,$0:bL},null);};bc.failNotLoaded=function(bJ){bG.warn("Instantiating non-loaded template",bJ);};bc.fillTextHole=function(bJ,bK,bL){var bM;bM=bJ.querySelector("[ws-replace]");return E.Equals(bM,null)?(bG.warn("Filling non-existent text hole",bL),null):(bM.parentNode.replaceChild(new a.Text(bK),bM),{$:1,$0:bM.getAttribute("ws-replace")});};bc.removeHolesExcept=function(bJ,bK){function bL(bM){F.IterSelector(bJ,"["+bM+"]",function(bN){if(!bK.Contains(bN.getAttribute(bM)))bN.removeAttribute(bM);});}bL("ws-attr");bL("ws-onafterrender");bL("ws-var");F.IterSelector(bJ,"[ws-hole]",function(bM){if(!bK.Contains(bM.getAttribute("ws-hole"))){bM.removeAttribute("ws-hole");while(bM.hasChildNodes())bM.removeChild(bM.lastChild);}});F.IterSelector(bJ,"[ws-replace]",function(bM){if(!bK.Contains(bM.getAttribute("ws-replace")))bM.parentNode.removeChild(bM);});F.IterSelector(bJ,"[ws-on]",function(bM){bM.setAttribute("ws-on",bl.concat(" ",l.filter(function(bN){return bK.Contains(l.get(bl.SplitChars(bN,[":"],1),1));},bl.SplitChars(bM.getAttribute("ws-on"),[" "],1))));});F.IterSelector(bJ,"[ws-attr-holes]",function(bM){var bN,bO,bP,bQ,bR;bN=bl.SplitChars(bM.getAttribute("ws-attr-holes"),[" "],1);for(bO=0,bP=bN.length-1;bO<=bP;bO++){bQ=l.get(bN,bO);bM.setAttribute(bQ,(bR=new a.RegExp(K.TextHoleRE(),"g"),bM.getAttribute(bQ).replace(bR,function(bS,bT){return bK.Contains(bT)?bS:"";})));}});};bc.fillInstanceAttrs=function(bJ,bK){var bL,bM,bN,bO,bP;bc.convertAttrs(bK);bL=bK.nodeName.toLowerCase();bM=bJ.querySelector("[ws-attr="+bL+"]");if(E.Equals(bM,null))bG.warn("Filling non-existent attr hole",bL);else{bM.removeAttribute("ws-attr");for(bN=0,bO=bK.attributes.length-1;bN<=bO;bN++){bP=bK.attributes.item(bN);bP.name==="class"&&bM.hasAttribute("class")?bM.setAttribute("class",bM.getAttribute("class")+" "+bP.nodeValue):bM.setAttribute(bP.name,bP.nodeValue);}}};bc.mapHoles=function(bJ,bK){function bL(bM){F.IterSelector(bJ,"["+bM+"]",function(bN){var bO,bP;bO=(bP=null,[bK.TryGetValue(bN.getAttribute(bM).toLowerCase(),{get:function(){return bP;},set:function(bQ){bP=bQ;}}),bP]);bO[0]?bN.setAttribute(bM,bO[1]):void 0;});}bL("ws-hole");bL("ws-replace");bL("ws-attr");bL("ws-onafterrender");bL("ws-var");F.IterSelector(bJ,"[ws-on]",function(bM){bM.setAttribute("ws-on",bl.concat(" ",l.map(function(bN){var bO,bP,bQ;bO=bl.SplitChars(bN,[":"],1);bP=(bQ=null,[bK.TryGetValue(l.get(bO,1),{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);return bP[0]?l.get(bO,0)+":"+bP[1]:bN;},bl.SplitChars(bM.getAttribute("ws-on"),[" "],1))));});F.IterSelector(bJ,"[ws-attr-holes]",function(bM){var bN,bO,bP;bN=bl.SplitChars(bM.getAttribute("ws-attr-holes"),[" "],1);for(bO=0,bP=bN.length-1;bO<=bP;bO++)(function(){var bQ;function bR(bS,bT){var bU;bU=k.KeyValue(bT);return bS.replace(new a.RegExp("\\${"+bU[0]+"}","ig"),"${"+bU[1]+"}");}bQ=l.get(bN,bO);return bM.setAttribute(bQ,(((bF.Curried3(m.fold))(bR))(bM.getAttribute(bQ)))(bK));}());});};bc.fill=function(bJ,bK,bL){while(true)if(bJ.hasChildNodes())bL=bK.insertBefore(bJ.lastChild,bL);else return null;};bc.convertAttrs=function(bJ){var bL,bM,bN,bO,bP,bQ,bR,bS;function bK(bT){var bU;bU=bJ.getAttribute(bT);bU===null?void 0:bJ.setAttribute(bT,bU.toLowerCase());}bL=bJ.attributes;bM=[];bN=[];bO=[];for(bP=0,bQ=bL.length-1;bP<=bQ;bP++){bR=bL.item(bP);bl.StartsWith(bR.nodeName,"ws-on")&&bR.nodeName!=="ws-onafterrender"&&bR.nodeName!=="ws-on"?(bM.push(bR.nodeName),bN.push(bd.string(bR.nodeName,{$:1,$0:"ws-on".length},null)+":"+bR.nodeValue.toLowerCase())):!bl.StartsWith(bR.nodeName,"ws-")&&(new a.RegExp(K.TextHoleRE())).test(bR.nodeValue)?(bR.nodeValue=(bS=new a.RegExp(K.TextHoleRE(),"g"),bR.nodeValue.replace(bS,function(bT,bU){return"${"+bU.toLowerCase()+"}";})),bO.push(bR.nodeName)):void 0;}!(bN.length==0)?bJ.setAttribute("ws-on",bl.concat(" ",bN)):void 0;!(bO.length==0)?bJ.setAttribute("ws-attr-holes",bl.concat(" ",bO)):void 0;bK("ws-hole");bK("ws-replace");bK("ws-attr");bK("ws-onafterrender");bK("ws-var");l.iter(function(bT){bJ.removeAttribute(bT);},bM);};bd.string=function(bJ,bK,bL){return bK==null?bL!=null&&bL.$==1?bJ.slice(0,bL.$0+1):"":bL==null?bJ.slice(bK.$0):bJ.slice(bK.$0,bL.$0+1);};m.insufficient=function(){return k.FailWith("The input sequence has an insufficient number of elements.");};be=S.KeyCollection=bF.Class({GetEnumerator$1:function(){return A.Get(m.map(function(bJ){return bJ.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},p,be);be.New=bF.Ctor(function(bJ){p.New.call(this);this.d=bJ;},be);bg.New=function(bJ,bK){return{PreviousNodes:bJ,Top:bK};};bh.get_Empty=function(){return{$:0,$0:new _4.New$3()};};bh.FindAll=function(bJ){var bK;function bL(bN){if(bN!=null&&bN.$==0){bL(bN.$0);bL(bN.$1);}else if(bN!=null&&bN.$==1)bM(bN.$0);else if(bN!=null&&bN.$==2)bL(bN.$0.Current);else if(bN!=null&&bN.$==6)l.iter(bM,bN.$0.Holes);}function bM(bN){bK.push(bN);bL(bN.Children);}bK=[];bL(bJ);return{$:0,$0:new _4.New$2(bK)};};bh.Filter=function(bJ,bK){return{$:0,$0:bt.Filter(bJ,bK.$0)};};bh.Except=function(bJ,bK){return{$:0,$0:bt.Except(bJ.$0,bK.$0)};};bh.ToArray=function(bJ){return bt.ToArray(bJ.$0);};bh.Intersect=function(bJ,bK){return{$:0,$0:bt.Intersect(bJ.$0,bK.$0)};};bi.UseAnimations=function(){bm.$cctor();return bm.UseAnimations;};bi.Actions=function(bJ){return bi.ConcatActions(l.choose(function(bK){return bK.$==1?{$:1,$0:bK.$0}:null;},bo.ToArray(bJ.$0)));};bi.Finalize=function(bJ){l.iter(function(bK){if(bK.$==0)bK.$0();},bo.ToArray(bJ.$0));};bi.ConcatActions=function(bJ){var bK,bL,bM,bN;bK=P.ofSeqNonCopying(bJ);bL=l.length(bK);return bL===0?bi.Const():bL===1?l.get(bK,0):(bM=m.max(m.map(function(bO){return bO.Duration;},bK)),(bN=l.map(function(bO){return bi.Prolong(bM,bO);},bK),bi.Def(bM,function(bO){l.iter(function(bP){bP.Compute(bO);},bN);})));};bi.List=function(bJ){return bJ.$0;};bi.Const=function(bJ){return bi.Def(0,function(){return bJ;});};bi.Def=function(bJ,bK){return{Compute:bK,Duration:bJ};};bi.Prolong=function(bJ,bK){var bL,bM,bN;bL=bK.Compute;bM=bK.Duration;bN=bA.Create(function(){return bK.Compute(bK.Duration);});return{Compute:function(bO){return bO>=bM?bN.f():bL(bO);},Duration:bJ};};bj.$cctor=function(){bj.$cctor=a.ignore;bj.BatchUpdatesEnabled=true;};bk.Clear=function(bJ){bJ.splice(0,l.length(bJ));};bl.concat=function(bJ,bK){return l.ofSeq(bK).join(bJ);};bl.SplitChars=function(bJ,bK,bL){return bl.Split(bJ,new a.RegExp("["+bl.RegexEscape(bK.join(""))+"]"),bL);};bl.StartsWith=function(bJ,bK){return bJ.substring(0,bK.length)==bK;};bl.Split=function(bJ,bK,bL){return bL===1?l.filter(function(bM){return bM!=="";},bl.SplitWith(bJ,bK)):bl.SplitWith(bJ,bK);};bl.RegexEscape=function(bJ){return bJ.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bl.SplitWith=function(bJ,bK){return bJ.split(bK);};bm.$cctor=function(){bm.$cctor=a.ignore;bm.CubicInOut=bp.Custom(function(bJ){var bK;bK=bJ*bJ;return 3*bK-2*(bK*bJ);});bm.UseAnimations=true;};bn.Delay=function(bJ){return function(bK){try{(bJ(null))(bK);}catch(bL){bK.k({$:1,$0:bL});}};};bn.Bind=function(bJ,bK){return bn.checkCancel(function(bL){bJ(bq.New(function(bM){var bN;if(bM.$==0){bN=bM.$0;bn.scheduler().Fork(function(){try{(bK(bN))(bL);}catch(bO){bL.k({$:1,$0:bO});}});}else bn.scheduler().Fork(function(){bL.k(bM);});},bL.ct));});};bn.Zero=function(){br.$cctor();return br.Zero;};bn.Start=function(bJ,bK){var bL,bM;bL=(bM=(bn.defCTS())[0],bK==null?bM:bK.$0);bn.scheduler().Fork(function(){if(!bL.c)bJ(bq.New(function(bN){if(bN.$==1)bn.UncaughtAsyncError(bN.$0);},bL));});};bn.Return=function(bJ){return function(bK){bK.k({$:0,$0:bJ});};};bn.checkCancel=function(bJ){return function(bK){if(bK.ct.c)bn.cancel(bK);else bJ(bK);};};bn.defCTS=function(){br.$cctor();return br.defCTS;};bn.UncaughtAsyncError=function(bJ){bG.log("WebSharper: Uncaught asynchronous exception",bJ);};bn.FromContinuations=function(bJ){return function(bK){var bL;function bM(bN){if(bL[0])k.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bL[0]=true;bn.scheduler().Fork(bN);}}bL=[false];bJ(function(bN){bM(function(){bK.k({$:0,$0:bN});});},function(bN){bM(function(){bK.k({$:1,$0:bN});});},function(bN){bM(function(){bK.k({$:2,$0:bN});});});};};bn.cancel=function(bJ){bJ.k({$:2,$0:new bz.New(bJ.ct)});};bn.scheduler=function(){br.$cctor();return br.scheduler;};bo.Append=function(bJ,bK){return bJ.$==0?bK:bK.$==0?bJ:{$:2,$0:bJ,$1:bK};};bo.ToArray=function(bJ){var bK;function bL(bM){if(bM.$==1)bK.push(bM.$0);else if(bM.$==2){bL(bM.$0);bL(bM.$1);}else if(bM.$==3)l.iter(function(bN){bK.push(bN);},bM.$0);}bK=[];bL(bJ);return bK.slice(0);};bo.Concat=function(bJ){var bK;bK=P.ofSeqNonCopying(bJ);return P.TreeReduce(bo.Empty(),bo.Append,bK);};bo.Empty=function(){bB.$cctor();return bB.Empty;};bp=n.Easing=bF.Class({},p,bp);bp.Custom=function(bJ){return new bp.New(bJ);};bp.New=bF.Ctor(function(bJ){p.New.call(this);this.transformTime=bJ;},bp);bq.New=function(bJ,bK){return{k:bJ,ct:bK};};br.$cctor=function(){br.$cctor=a.ignore;br.noneCT=bs.New(false,[]);br.scheduler=new bv.New();br.defCTS=[new bw.New()];br.Zero=bn.Return();br.GetCT=function(bJ){bJ.k({$:0,$0:bJ.ct});};};bs.New=function(bJ,bK){return{c:bJ,r:bK};};bt.Filter=function(bJ,bK){return new _4.New$2(l.filter(bJ,bt.ToArray(bK)));};bt.Except=function(bJ,bK){var bL;bL=new _4.New$2(bt.ToArray(bK));bL.ExceptWith(bt.ToArray(bJ));return bL;};bt.ToArray=function(bJ){var bK;bK=l.create(bJ.get_Count(),void 0);bJ.CopyTo(bK);return bK;};bt.Intersect=function(bJ,bK){var bL;bL=new _4.New$2(bt.ToArray(bJ));bL.IntersectWith(bt.ToArray(bK));return bL;};bu.concat=function(bJ){var bK,bL;bK=[];for(var bM in bJ)bK.push.apply(bK,bJ[bM]);return bK;};bv=bn.Scheduler=bF.Class({Fork:function(bJ){var bK;bK=this;this.robin.push(bJ);this.idle?(this.idle=false,a.setTimeout(function(){bK.tick();},0)):void 0;},tick:function(){var bJ,bK,bL;bK=this;bL=bI.now();bJ=true;while(bJ)if(this.robin.length===0){this.idle=true;bJ=false;}else{(this.robin.shift())();bI.now()-bL>40?(a.setTimeout(function(){bK.tick();},0),bJ=false):void 0;}}},p,bv);bv.New=bF.Ctor(function(){p.New.call(this);this.idle=true;this.robin=[];},bv);bw=j.CancellationTokenSource=bF.Class({},p,bw);bw.New=bF.Ctor(function(){p.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bw);bx.Children=function(bJ,bK){var bL,bM,bN;if(bK!=null&&bK.$==1){bN=[];bL=bK.$0[0].nextSibling;while(bL!==bK.$0[1]){bN.push(bL);bL=bL.nextSibling;}return{$:0,$0:bN};}else return{$:0,$0:l.init(bJ.childNodes.length,(bM=bJ.childNodes,function(bO){return bM[bO];}))};};bx.Except=function(bJ,bK){var bL;bL=bJ.$0;return{$:0,$0:l.filter(function(bM){return l.forall(function(bN){return!(bM===bN);},bL);},bK.$0)};};bx.Iter=function(bJ,bK){l.iter(bJ,bK.$0);};bx.DocChildren=function(bJ){var bK;function bL(bM){if(bM!=null&&bM.$==2)bL(bM.$0.Current);else if(bM!=null&&bM.$==1)bK.push(bM.$0.El);else if(bM==null);else if(bM!=null&&bM.$==5)bK.push(bM.$0);else if(bM!=null&&bM.$==4)bK.push(bM.$0.Text);else if(bM!=null&&bM.$==6)l.iter(function(bN){if(bN==null||bN.constructor===z)bL(bN);else bK.push(bN);},bM.$0.Els);else{bL(bM.$0);bL(bM.$1);}}bK=[];bL(bJ.Children);return{$:0,$0:P.ofSeqNonCopying(bK)};};bz=j.OperationCanceledException=bF.Class({},by,bz);bz.New=bF.Ctor(function(bJ){bz.New$1.call(this,"The operation was canceled.",null,bJ);},bz);bz.New$1=bF.Ctor(function(bJ,bK,bL){this.message=bJ;this.inner=bK;z.setPrototypeOf(this,bz.prototype);this.ct=bL;},bz);bA.Create=function(bJ){return bD.New(false,bJ,bA.forceLazy);};bA.forceLazy=function(){var bJ;bJ=this.v();this.c=true;this.v=bJ;this.f=bA.cachedLazy;return bJ;};bA.cachedLazy=function(){return this.v;};bB.$cctor=function(){bB.$cctor=a.ignore;bB.Empty={$:0};};bD.New=function(bJ,bK,bL){return{c:bJ,v:bK,f:bL};};bF.OnLoad(function(){i.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw;a=self;b=a.FsRoot=a.FsRoot||{};c=b.LibraryJS=b.LibraryJS||{};d=c.Monaco=c.Monaco||{};e=d.Position=d.Position||{};f=d.Range=d.Range||{};g=d.Location=d.Location||{};h=d.MarkDownString=d.MarkDownString||{};i=d.MarkerData=d.MarkerData||{};j=d.CompletionItem=d.CompletionItem||{};k=d.Hover=d.Hover||{};l=a.WebSharper=a.WebSharper||{};m=l.Obj=l.Obj||{};n=d.Editor=d.Editor||{};o=d.MonacoConfig=d.MonacoConfig||{};p=c.MonacoGenAdapter=c.MonacoGenAdapter||{};q=p.MonacoRT=p.MonacoRT||{};r=p.CompletionItemProvider=p.CompletionItemProvider||{};s=p.HoverProvider=p.HoverProvider||{};t=p.DefinitionProvider=p.DefinitionProvider||{};u=b.TestingJS=b.TestingJS||{};v=u.StartAppFramework=u.StartAppFramework||{};w=u.Util=u.Util||{};x=u.AF=u.AF||{};y=x.PlugInBuilder=x.PlugInBuilder||{};z=x.ListModelData=x.ListModelData||{};A=u.LayoutEngine=u.LayoutEngine||{};B=u.ListModel=u.ListModel||{};C=u.LM=u.LM||{};D=u.LMX=u.LMX||{};E=u.SnippetTemplates=u.SnippetTemplates||{};F=u.DragDrop=u.DragDrop||{};G=F.DragInfo=F.DragInfo||{};H=u.SnippetsUI=u.SnippetsUI||{};I=H.SnippetHierData=H.SnippetHierData||{};J=l.Numeric=l.Numeric||{};K=l.UI=l.UI||{};L=K.Var=K.Var||{};M=K.View=K.View||{};N=l.Operators=l.Operators||{};O=l.Unchecked=l.Unchecked||{};P=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};Q=a.EventTarget;R=c.ResizeObserver=c.ResizeObserver||{};S=b.Library=b.Library||{};T=S.Monads=S.Monads||{};U=T.Option=T.Option||{};V=c.GenEditor=c.GenEditor||{};W=K.Var$1=K.Var$1||{};X=l.Option=l.Option||{};Y=V.Position=V.Position||{};Z=T.AsyncResultMAutoOpen=T.AsyncResultMAutoOpen||{};_0=T.AsyncResultM=T.AsyncResultM||{};_1=_0.AsyncResultMBuilder=_0.AsyncResultMBuilder||{};_2=l.Arrays=l.Arrays||{};_3=c.PromiseM=c.PromiseM||{};_4=V.GenEditor=V.GenEditor||{};_5=l.Seq=l.Seq||{};_6=V.GenEditorHook=V.GenEditorHook||{};_7=K.HtmlModule=K.HtmlModule||{};_8=_7.attr=_7.attr||{};_9=S.ParseO=S.ParseO||{};_=l.Utils=l.Utils||{};$=S.GuidId=S.GuidId||{};ba=c.AppFramework=c.AppFramework||{};bb=ba.PlugIn=ba.PlugIn||{};bc=l.Lazy=l.Lazy||{};bd=c.LayoutEngineModule=c.LayoutEngineModule||{};be=ba.PlugInQuery=ba.PlugInQuery||{};bf=ba.PlugInAction=ba.PlugInAction||{};bg=ba.PlugInDoc=ba.PlugInDoc||{};bh=ba.PlugInView=ba.PlugInView||{};bi=ba.PlugInVar=ba.PlugInVar||{};bj=K.Doc=K.Doc||{};bk=K.ListModel=K.ListModel||{};bl=c.View=c.View||{};bm=c.LayoutEngine=c.LayoutEngine||{};bn=K.ViewBuilder=K.ViewBuilder||{};bo=l.List=l.List||{};bp=bo.T=bo.T||{};bq=a.System=a.System||{};br=bq.Guid=bq.Guid||{};bs=l.Collections=l.Collections||{};bt=bs.Dictionary=bs.Dictionary||{};bu=l.Slice=l.Slice||{};bv=bs.Set=bs.Set||{};bw=S.Snippet=S.Snippet||{};bx=K.Templating=K.Templating||{};by=bx.Runtime=bx.Runtime||{};bz=by.Server=by.Server||{};bA=bz.TemplateInstance=bz.TemplateInstance||{};bB=bz.ProviderBuilder=bz.ProviderBuilder||{};bC=bz.Handler=bz.Handler||{};bD=a.testing_Templates=a.testing_Templates||{};bE=a.FileReader;bF=l.JavaScript=l.JavaScript||{};bG=bF.Pervasives=bF.Pervasives||{};bH=c.Serializer=c.Serializer||{};bI=S.SnippetSerialize=S.SnippetSerialize||{};bJ=bI.Model=bI.Model||{};bK=bF.JS=bF.JS||{};bL=S.UoM=S.UoM||{};bM=bL.UoM=bL.UoM||{};bN=T.Depend=T.Depend||{};bO=c.AppFrameworkTemplate=c.AppFrameworkTemplate||{};bP=K.Snap=K.Snap||{};bQ=T.Result=T.Result||{};bR=bQ.Builder=bQ.Builder||{};bS=bQ.BuilderP=bQ.BuilderP||{};bT=bN.DependBuilder=bN.DependBuilder||{};bU=T.ResultM=T.ResultM||{};bV=bU.Builder=bU.Builder||{};bW=S.Serializer=S.Serializer||{};bX=bW.JsonIntermediate=bW.JsonIntermediate||{};bY=S.SnippetModule=S.SnippetModule||{};bZ=a.Node;b0=a.WindowOrWorkerGlobalScope;b1=l.Concurrency=l.Concurrency||{};b2=K.AttrProxy=K.AttrProxy||{};b3=K.ConcreteVar=K.ConcreteVar||{};b4=K.Abbrev=K.Abbrev||{};b5=b4.Fresh=b4.Fresh||{};b6=a.Object;b7=S.ResultMessage=S.ResultMessage||{};b8=l.Enumerator=l.Enumerator||{};b9=b8.T=b8.T||{};b_=K.AttrModule=K.AttrModule||{};b$=K.FromView=K.FromView||{};ca=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};cb=l.Strings=l.Strings||{};cc=l.LazyExtensionsProxy=l.LazyExtensionsProxy||{};cd=cc.LazyRecord=cc.LazyRecord||{};ce=K.Array=K.Array||{};cf=K.Storage=K.Storage||{};cg=bs.List=bs.List||{};ch=bs.DictionaryUtil=bs.DictionaryUtil||{};ci=bs.FSharpSet=bs.FSharpSet||{};cj=bs.HashSet=bs.HashSet||{};ck=by.Client=by.Client||{};cl=bL.Unsafe=bL.Unsafe||{};cm=l.DateUtil=l.DateUtil||{};cn=bs.BalancedTree=bs.BalancedTree||{};co=K.Client=K.Client||{};cp=co.Templates=co.Templates||{};cq=b4.Async=b4.Async||{};cr=b1.AsyncBody=b1.AsyncBody||{};cs=K.Attrs=K.Attrs||{};ct=K.DomUtility=K.DomUtility||{};cu=S.String=S.String||{};cv=c.WebComponent=c.WebComponent||{};cw=cv.WcTabStrip=cv.WcTabStrip||{};cx=cw.WcTabStripT=cw.WcTabStripT||{};cy=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};cz=a.GeneratedPrintf=a.GeneratedPrintf||{};cA=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};cB=cv.WcSplitter=cv.WcSplitter||{};cC=K.DocElemNode=K.DocElemNode||{};cD=a.CharacterData;cE=cf.ArrayStorage=cf.ArrayStorage||{};cF=cn.Tree=cn.Tree||{};cG=K.CheckedInput=K.CheckedInput||{};cH=b1.CT=b1.CT||{};cI=b1.Scheduler=b1.Scheduler||{};cJ=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};cK=K.Docs=K.Docs||{};cL=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};cM=K.DynamicAttrNode=K.DynamicAttrNode||{};cN=K.Elt=K.Elt||{};cO=cB.WcSplitterT=cB.WcSplitterT||{};cP=a.Error;cQ=l.MatchFailureException=l.MatchFailureException||{};cR=co.Attrs=co.Attrs||{};cS=cR.Dyn=cR.Dyn||{};cT=bd.Layout=bd.Layout||{};cU=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};cV=l.OperationCanceledException=l.OperationCanceledException||{};cW=l.CancellationTokenSource=l.CancellationTokenSource||{};cX=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cY=K.Updates=K.Updates||{};cZ=c.Hoverable=c.Hoverable||{};c0=cZ.Hoverable=cZ.Hoverable||{};c1=a.Event;c2=a.UIEvent;c3=bd.Measures=bd.Measures||{};c4=bs.HashSetUtil=bs.HashSetUtil||{};c5=l.FormatException=l.FormatException||{};c6=cp.Prepare=cp.Prepare||{};c7=bs.KeyCollection=bs.KeyCollection||{};c8=K.An=K.An||{};c9=co.Settings=co.Settings||{};c_=b4.Mailbox=b4.Mailbox||{};c$=l.Queue=l.Queue||{};da=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};db=l.AggregateException=l.AggregateException||{};dc=co.Docs=co.Docs||{};dd=dc.RunState=dc.RunState||{};de=dc.NodeSet=dc.NodeSet||{};df=K.Anims=K.Anims||{};dg=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};dh=K.String=K.String||{};di=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};dj=K.AppendList=K.AppendList||{};dk=l.Char=l.Char||{};dl=K.Easing=K.Easing||{};dm=b4.HashSet=b4.HashSet||{};dn=dc.DomNodes=dc.DomNodes||{};_do=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};dp=a.IntelliFactory;dq=dp&&dp.Runtime;dr=a.console;ds=a.Math;dt=a.jQuery;du=a.JSON;dv=a.Date;dw=a.Reflect;d.newVar=function(dx){return o.New(dx,a.ignore,null,null,M.Const(false),null,null);};d.loader=function(){P.$cctor();return P.loader;};d.render=function(dx){var dy;return bj.Async((dy=null,b1.Delay(function(){return b1.Bind(d.loader(),function(){return b1.Return(bj.Element("div",[b2.OnAfterRenderImpl(function(dz){var dA,dB;dA=(dB=dz.parentElement,self.monaco.editor.create(dB,dx.options,dx.overrides));R.addResizeObserver$1(function(){dA.layout();},dz.parentElement);dz.parentNode.removeChild(dz);dx.editorO={$:1,$0:dA};(U.iter(function(dC){dC(dA);}))(dx.onRender);V.bindVarEditor(function(dC){dA.onDidChangeModelContent(dC);},function(){return dA.getValue();},function(dC){dA.setValue(dC);},dx.onChange,dx["var"]);})],[]));});})));};d.setVar=function(dx,dy){return o.New(dx,dy.onChange,dy.onRender,dy.editorO,dy.disabled,dy.options,dy.overrides);};d.onChange=function(dx,dy){return o.New(dy["var"],dx,dy.onRender,dy.editorO,dy.disabled,dy.options,dy.overrides);};d.onRender=function(dx,dy){return o.New(dy["var"],dy.onChange,{$:1,$0:dx},dy.editorO,dy.disabled,dy.options,dy.overrides);};d.disabled=function(dx,dy){return o.New(dy["var"],dy.onChange,dy.onRender,dy.editorO,dx,dy.options,dy.overrides);};d["var"]=function(dx){return dx["var"];};d.newText=function(dx){return d.newVar(W.Create$1(dx));};d.newVarO=function(dx){var dy;dy=d.newVar(W.Lens(dx,function(dz){return dz==null?"":dz.$0;},function(dz,dA){return dz==null?null:{$:1,$0:dA};}));return d.disabled(M.Map(function(dz){return dz==null;},dx.get_View()),dy);};e.New=function(dx,dy){return{column:dx,lineNumber:dy};};f.New=function(dx,dy,dz,dA){return{startColumn:dx,endColumn:dy,startLineNumber:dz,endLineNumber:dA};};g.New=function(dx,dy){return{range:dx,uri:dy};};h.New=function(dx,dy){return{value:dx,isTrusted:dy};};i.New=function(dx,dy,dz,dA,dB,dC){return{startColumn:dx,endColumn:dy,startLineNumber:dz,endLineNumber:dA,severity:dB,message:dC};};j.New=function(dx,dy,dz){return{kind:dx,label:dy,detail:dz};};k.New=function(dx,dy){return{contents:dx,range:dy};};m=l.Obj=dq.Class({Equals:function(dx){return this===dx;},GetHashCode:function(){return -1;}},null,m);m.New=dq.Ctor(function(){},m);n=d.Editor=dq.Class({},m,n);n.New=dq.Ctor(function(){m.New.call(this);},n);o.New=function(dx,dy,dz,dA,dB,dC,dD){return{"var":dx,onChange:dy,onRender:dz,editorO:dA,disabled:dB,options:dC,overrides:dD};};p.iterEditor=function(dx,dy){var dz;dz=dx.editorO;dz!=null&&dz.$==1?dy(dz.$0):void 0;};p.mapEditor=function(dx,dy){var dz;dz=dx.editorO;return dz!=null&&dz.$==1?{$:1,$0:dy(dz.$0)}:null;};p.bindEditor=function(dx,dy){var dz;dz=dx.editorO;return dz!=null&&dz.$==1?dy(dz.$0):null;};p.posGen2Ed=function(dx){return e.New(dx.col,dx.line);};p.posEd2Gen=function(dx){return Y.New(dx.lineNumber,dx.column);};p.indexFromPos=function(dx,dy){var dz;dz=p.mapEditor(dx,function(dA){return dA.getModel().getOffsetAt(p.posGen2Ed(dy));});return dz==null?-1:dz.$0;};p.posFromIndex=function(dx,dy){var dz;dz=p.mapEditor(dx,function(dA){return p.posEd2Gen(dA.getModel().getPositionAt(dy));});return dz==null?Y.New(1,1):dz.$0;};p.convertGlyphChar=function(dx){return dx==="C"?6:dx==="E"?12:dx==="S"?11:dx==="I"?7:dx==="N"?8:dx==="M"?1:dx==="P"?9:dx==="F"?4:dx==="T"?6:dx==="K"?13:0;};p.generateDoc=function(dx,dy,dz){var dA;return bj.Async((dA=null,b1.Delay(function(){return b1.Bind(d.loader(),function(){return b1.Return(bj.Element("div",[b2.OnAfterRenderImpl(function(dB){var dC,dD;dC=(dD=dB.parentElement,self.monaco.editor.create(dD,dx.options,dx.overrides));R.addResizeObserver$1(function(){dC.layout();},dB.parentElement);dB.parentNode.removeChild(dB);dx.editorO={$:1,$0:dC};dz(dC);dC.onDidChangeModelContent(dx.onChange);(U.iter(function(dE){var dF;dF=new s.New(dE(dy));self.monaco.languages.registerHoverProvider("fsharp",dF);}))(dy.toolTip);(U.iter(function(dE){var dF;dF=new t.New(dE(dy));self.monaco.languages.registerDefinitionProvider("fsharp",dF);}))(dy.declaration);(U.iter(function(dE){var dF;dF=new r.New(dE(dy));self.monaco.languages.registerCompletionItemProvider("fsharp",dF);}))(dy.autoCompletion);})],[]));});})));};p.getUri=function(dx){var dy;dy=p.mapEditor(dx,function(dz){return a.String(dz.getModel().uri);});return dy==null?"":dy.$0;};p.setUri=function(dx,dy){p.iterEditor(dx,function(dz){dz.getModel().uri=self.monaco.Uri.parse(dy);});};p.getValue=function(dx){var dy;dy=p.mapEditor(dx,function(dz){return dz.getValue();});return dy==null?"":dy.$0;};p.setValue=function(dx,dy){p.iterEditor(dx,function(dz){dz.setValue(dy);});};p.getWordAt=function(dx,dy){return p.bindEditor(dx,function(dz){var dA;dA=dz.getModel().getWordAtPosition(e.New(dy.col,dy.line));return!dA?null:{$:1,$0:[dA.word,Y.New(dy.line,dA.startColumn)]};});};p.getSelect=function(dx){var dy;dy=p.mapEditor(dx,function(dz){var dA;dA=dz.getSelection();return dz.getModel().getValueInRange(dA);});return dy==null?"":dy.$0;};p.showAnnotations=function(dx,dy){p.iterEditor(dx,function(dz){var dA,dB;dA=_2.ofSeq(_5.map(function(dC){var dD;return i.New(dC.startP.col,dC.endP.col,dC.startP.line,dC.endP.line,(dD=dC.severity,dD.$==0?8:dD.$==1?4:dD.$==3?1:2),dC.message);},dy));dB=dz.getModel();self.monaco.editor.setModelMarkers(dB,"annotations",dA);});};p.newHook=function(dx){function dy(dz,dA){return p.generateDoc(dx,dz,dA);}return _6.New(function(dz){return function(dA){return dy(dz,dA);};},function(){return p.getValue(dx);},function(dz){p.setValue(dx,dz);},a.ignore,function(dz){p.showAnnotations(dx,dz);},function(dz){return p.posFromIndex(dx,dz);},function(dz){return p.indexFromPos(dx,dz);},function(dz){return p.getWordAt(dx,dz);},function(){return p.getSelect(dx);},function(){return p.getUri(dx);},function(dz){p.setUri(dx,dz);},function(dz){dx.onChange=dz;});};p.newRT=function(dx,dy){return q.New(null,a.ignore,dx,dy);};p.newVar=function(dx,dy,dz){return V.newVar(p.newHook(p.newRT(dx,dy)),dz);};q.New=function(dx,dy,dz,dA){return{editorO:dx,onChange:dy,options:dz,overrides:dA};};r=p.CompletionItemProvider=dq.Class({provideCompletionItems:function(dx,dy,dz,dA){var dB,dC;dB=this;return _3.ofAsyncResultM((dC=Z.asyncResultM(),dC.Run(dC.Delay(function(){return Z["AsyncResultMBuilder.Bind"](dC,dB.autoComplete(Y.New(dy.lineNumber,dy.column)),function(dD){return dC.Return(_2.map(function(dE){return j.New(p.convertGlyphChar(dE.kind),dE.label,dE.detail);},dD));});}))));},resolveCompletionItem:function(dx,dy){return j.New(dx.kind,dx.label,"more details");}},m,r);r.New=dq.Ctor(function(dx){m.New.call(this);this.autoComplete=dx;},r);s=p.HoverProvider=dq.Class({provideHover:function(dx,dy,dz){var dA,dB;dA=this;return _3.ofAsyncResultM((dB=Z.asyncResultM(),dB.Run(dB.Delay(function(){return Z["AsyncResultMBuilder.Bind"](dB,dA.toolTip(Y.New(dy.lineNumber,dy.column)),function(dC){return dC!=null&&dC.$==1?dB.Return(k.New([h.New(dC.$0,true)],null)):dB.Return(null);});}))));}},m,s);s.New=dq.Ctor(function(dx){m.New.call(this);this.toolTip=dx;},s);t=p.DefinitionProvider=dq.Class({provideDefinition:function(dx,dy,dz){var dA,dB;dA=this;return _3.ofAsyncResultM((dB=Z.asyncResultM(),dB.Run(dB.Delay(function(){return Z["AsyncResultMBuilder.Bind"](dB,dA.declaration(Y.New(dy.lineNumber,dy.column)),function(dC){var dD;return dC!=null&&dC.$==1?(dD=dC.$0[0],dB.Return(g.New(f.New(dD.col,dD.col,dD.line,dD.line),self.monaco.Uri.parse(dC.$0[1])))):dB.Return(null);});}))));}},m,t);t.New=dq.Ctor(function(dx){m.New.call(this);this.declaration=dx;},t);v.htmlD=function(){P.$cctor();return P.htmlD;};v.startWithHtmlD=function(){P.$cctor();return P.startWithHtmlD;};w.disabled=function(dx){return b_.DynamicPred("disabled",dx,M.Const(""));};w.inputLabel=function(dx,dy,dz,dA){return bj.Element("div",dx,[bj.Element("div",[b2.Create("class","input-group")],[bj.Element("span",[b2.Create("class","input-group-addon")],[bj.TextNode(dz)]),bj.Input([b2.Create("class","form-control"),w.disabled(dy)],dA)])]);};w.areaLabel=function(dx,dy,dz,dA){return bj.Element("div",dx,[bj.Element("div",[b2.Create("class","input-group")],[bj.Element("span",[b2.Create("class","input-group-addon")],[bj.TextNode(dz)]),bj.InputArea([b2.Create("class","form-control"),w.disabled(dy)],W.Lens(dA,a.id,function(dB,dC){return dC;}))])]);};w.elemsUI=function(dx,dy){return bj.Element("div",[],[dx,bj.Button("New",[],dy)]);};w.lensFloat2Str=function(dx){var dy;function dz(dA){if(dA!=null&&dA.$==1)if(dA.$0!==dx.Get())dx.Set(dA.$0);}return new b$.New(M.Map(function(dA){return(function(dB){return function(dC){return dB(_.prettyPrint(dC));};}(a.id))(dA);},dx.get_View()),(dy=_9.parseDoubleO(),function(dA){return dz(dy(dA));}));};w.textLine=function(dx){return bj.Element("div",[],[bj.TextView(dx)]);};w.lensStrO=function(dx){return new b$.New(M.Map(function(dy){return dy!=null&&dy.$==1?dy.$0:"";},dx.get_View()),function(dy){if(dy==="")dx.Set(null);else dx.Set({$:1,$0:dy});});};w.mapVarO=function(dx,dy,dz){return new b$.New(M.Map(function(dA){return dA==null?null:{$:1,$0:dx(dA.$0)};},dz.get_View()),function(dA){var dB;function dC(dE){return{$:1,$0:dE};}function dD(dE){dz.Set(dE);}if(dA!=null&&dA.$==1){dB=dy(dA.$0);(U.iter(function(dE){return dD(dC(dE));}))(dB);}else dz.Set(null);});};w.selectorLens=function(dx,dy){function dz(dA){return w.mapVarO(dx,dy,dA);}return function(dA){return w.lensStrO(dz(dA));};};w.selectorLensInt=function(dx){return(w.selectorLens(a.String,_9.parseIntO()))(dx);};w.selectorLensGuid=function(dx){return(w.selectorLens(a.String,_9.parseGuidO()))(dx);};w.selectorLensGuidId=function(dx){var dy,dz;function dA(dB){return new $({$:0,$0:dB});}return(w.selectorLens(function(dB){var dC;dC=dB.get_Id();return a.String(dC);},(dy=_9.parseGuidO(),(dz=function(dB){return dB==null?null:{$:1,$0:dA(dB.$0)};},function(dB){return dz(dy(dB));}))))(dx);};w.unselectorV=function(){P.$cctor();return P.unselectorV;};w.simpleButton=function(dx,dy){function dz(dA){}return bj.Button(dx,[],function(dA){return dz(dy(dA));});};w.newButton=function(dx){return w.simpleButton("New",dx);};w.orderedList=function(dx){return bj.Element("ol",[],[dx]);};x.plugin=function(){P.$cctor();return P.plugin;};x.addPlugIn2=function(dx){var dy;ba.addPlugIn(dx);dy=_5.tryHead(dx.plgDocs);dy!=null&&dy.$==1?ba.mainDocV().Set(dx.plgName+"."+dy.$0.docName):void 0;};x.concatMainDocs=function(dx){return bj.Concat(_5.choose(function(dy){return dy.docDoc.$==0?{$:1,$0:dy.docDoc.$0.f()}:null;},_5.choose(function(dy){return _5.tryHead(dy.plgDocs);},dx)));};y=x.PlugInBuilder=dq.Class({Zero:function(){return bb.New("Main",[],[],[],[],[]);},Yield:function(){return this.Zero();},For:function(dx,dy){var dz;dz=b8.Get(dx);while(dz.MoveNext())dy(dz.Current());},Name:function(dx,dy){return bb.New(dy,dx.plgVars,dx.plgViews,dx.plgDocs,dx.plgActions,dx.plgQueries);},AddVar:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars.concat([ba.newVar(dy,dz)]),dx.plgViews,dx.plgDocs,dx.plgActions,dx.plgQueries);},AddDoc:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars,dx.plgViews,dx.plgDocs.concat([ba.newDoc(dy,dz)]),dx.plgActions,dx.plgQueries);},AddDocF:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars,dx.plgViews,dx.plgDocs.concat([ba.newDoc(dy,bc.Create(function(){return bd.turnToView(dz);}))]),dx.plgActions,dx.plgQueries);},AddAct:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars,dx.plgViews,dx.plgDocs,dx.plgActions.concat([ba.newAct(dy,dz)]),dx.plgQueries);},AddActO:function(dx,dy,dz){return dz==null?dx:bb.New(dx.plgName,dx.plgVars,dx.plgViews,dx.plgDocs,dx.plgActions.concat([ba.newAct(dy,dz.$0)]),dx.plgQueries);},InsDoc:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars,dx.plgViews,[ba.newDoc(dy,dz)].concat(dx.plgDocs),dx.plgActions,dx.plgQueries);},AddViw:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars,dx.plgViews.concat([ba.newViw(dy,dz)]),dx.plgDocs,dx.plgActions,dx.plgQueries);},Merge:function(dx,dy,dz){return bb.New(dx.plgName,dx.plgVars.concat(_2.map(function(dA){return bi.New(dy+dA.varName,dA.varVar);},dz.plgVars)),dx.plgViews.concat(_2.map(function(dA){return bh.New(dy+dA.viwName,dA.viwView);},dz.plgViews)),dx.plgDocs.concat(_2.map(function(dA){return bg.New(dy+dA.docName,dA.docDoc);},dz.plgDocs)),dx.plgActions.concat(_2.map(function(dA){return bf.New(dy+dA.actName,dA.actFunction,dA.actEnabled);},dz.plgActions)),dx.plgQueries.concat(_2.map(function(dA){return be.New(dy+dA.qryName,dA.qryFunction);},dz.plgQueries)));}},m,y);y.New=dq.Ctor(function(){m.New.call(this);},y);z=x.ListModelData=dq.Class({PlugIn:function(dx){var dy,dz,dA;function dB(dC){}dy=this;dz=x.plugin();return dz.AddAct(dz.AddAct(dz.AddVar(dz.AddDoc(dz.Yield(),"list",bc.Create(function(){return dy.doc;})),"sel",dx(this.selV)),"add",(dA=this.add,function(dC){return dB(dA(dC));})),"del",this.delCur);},get_CurrentW:function(){var dx,dy,dz,dA,dB,dC;return M.Map((dx=function(dD){return dD==null?null:a.id(dD.$0);},(dy=(dz=this.def,function(dD){return dD==null?dz:dD.$0;}),function(dD){return dy(dx(dD));})),M.Bind((dA=(dB=(dC=this.elems,function(dD){return dC.TryFindByKeyAsView(dD);}),function(dD){return dD==null?null:{$:1,$0:dB(dD.$0)};}),function(dD){return bl.insertWO(dA(dD));}),this.selV.get_View()));},get_CurrentV:function(){var dx;dx=this;return new b$.New(this.get_CurrentW(),function(dy){var dz;dz=dx.selV.Get();dz!=null&&dz.$==1?dx.elems.ContainsKey(dz.$0)?dx.elems.Append(dy):void 0:void 0;});}},null,z);z.New=function(dx,dy,dz,dA,dB,dC){return new z({elems:dx,doc:dy,selV:dz,add:dA,delCur:dB,def:dC});};A.addLayout0=function(dx){bd.addLayout(dx);ba.mainDocV().Set(dx.lytName);};B.MapLens=function(dx,dy,dz){function dA(dC,dD){return dy(dC,dz.Lens(dC));}function dB(dC,dD){return _2.filter(dD,dC);}return dx!=null&&dx.$==1?M.MapSeqCachedViewBy(dz.key,dA,(((dq.Curried3(M.Map2))(dB))(dz["var"].get_View()))(dx.$0)):M.MapSeqCachedViewBy(dz.key,dA,dz["var"].get_View());};C.getDocFor=function(dx,dy,dz,dA,dB){var dC,dD,dE,dF,dG,dH;function dI(dL){var dM;return dL!=null&&dL.$==1&&(dx.ContainsKey(dL.$0)&&(dM=dL.$0,true))?{$:1,$0:dM}:null;}function dJ(dL){if(!O.Equals(dD.Get(),dL))dD.Set(dL);}function dK(dL,dM){dE.Set(null);return dx.RemoveByKey(dL);}dC=dx.key;dD=W.Create$1(null);dE=new b$.New((dF=M.get_Do(),M.Bind(function(dL){var dM;return dL!=null&&dL.$==1?(dM=dL.$0,M.Bind(function(dN){return!dN?M.Const(null):M.Const({$:1,$0:dM});},dx.ContainsKeyAsView(dM))):M.Const(null);},dD.get_View())),function(dL){return dJ(dI(dL));});dG=z.New(dx,bj.get_Empty(),dE,function(){var dL;dL=dz();dx.Append(dL);dE.Set({$:1,$0:dC(dL)});return dL;},function(){var dL;dL=dE.Get();(U.iter(function(dM){dK(dM,null);}))(dL);},dy);dH=dB(dG);return z.New(dG.elems,bj.Convert(a.id,B.MapLens(dA,function(dL,dM){return(dH(M.Const({$:1,$0:dL})))(dM);},dx)),dG.selV,dG.add,dG.delCur,dG.def);};C.getDoc=function(dx,dy,dz,dA,dB){return C.getDocFor(bk.Create(dx,bp.Empty),dy,dz,dA,dB);};C.addElements=function(dx,dy){dx.elems.AppendMany(dy);};D.addNewO=function(dx,dy,dz){var dA;dA=dy;return function(){var dB;dB=[dA,dx()];dA=dz(dA);return dB;};};D.elemUI2=function(dx,dy,dz,dA){function dB(dC,dD){return[dC,dD];}return dx(dy,dz,W.Lens(dA,function(dC){return dC[1];},function(dC,dD){return(function(dE){var dF;dF=dE[0];return function(dG){return dB(dF,dG);};}(dC))(dD);}));};D.getDocInt=function(dx,dy,dz){function dA(dB,dC,dD){return D.elemUI2(dz,dB,dC,dD);}return C.getDoc(function(dB){return dB[0];},[-1,dx],D.addNewO(dy,0,function(dB){return 1+dB;}),null,dq.Curried3(dA));};D.getDocGuid=function(dx,dy,dz){function dA(dB,dC,dD){return D.elemUI2(dz,dB,dC,dD);}return C.getDoc(function(dB){return dB[0];},["00000000-0000-0000-0000-000000000000",dx],D.addNewO(dy,br.NewGuid(),function(){return br.NewGuid();}),null,dq.Curried3(dA));};D.getDocGuidId=function(dx,dy,dz){var dA;function dB(dC,dD,dE){return D.elemUI2(dz,dC,dD,dE);}dA=D.addNewO(dy,new $({$:0,$0:br.NewGuid()}),function(){return new $({$:0,$0:br.NewGuid()});});return C.getDoc(function(dC){return dC[0];},[new $({$:0,$0:"00000000-0000-0000-0000-000000000000"}),dx],dA,null,dq.Curried3(dB));};D.addElements=function(dx,dy){_5.iter(function(dz){dx.elems.Append([(dx.add())[0],dz]);},dy);};E.html=function(){P.$cctor();return P.html$1;};F.set_drag=function(dx){P.$cctor();P.drag=dx;};F.drag=function(){P.$cctor();return P.drag;};F.setDragNone=function(){F.set_drag(G.DragNone);};F.setDragNode=function(dx){F.set_drag({$:1,$0:dx});};F.getDragNIdO=function(dx){var dy;return F.drag().$==1&&(!O.Equals(F.drag().$0,dx)&&(dy=F.drag().$0,true))?{$:1,$0:dy}:null;};G.DragNone={$:0};H.TemplateFileName=function(){P.$cctor();return P.TemplateFileName;};H.snippetsLM=function(){P.$cctor();return P.snippetsLM;};H.collapsedV=function(){P.$cctor();return P.collapsedV;};H.codeSnippetIdV=function(){P.$cctor();return P.codeSnippetIdV;};H.searchFor=function(){P.$cctor();return P.searchFor;};H.allPredecessors=function(){P.$cctor();return P.allPredecessors;};H.indPredIds=function(){P.$cctor();return P.indPredIds;};H.allCodePredsW=function(){P.$cctor();return P.allCodePredsW;};H.allCodePredIdsW=function(){P.$cctor();return P.allCodePredIdsW;};H.shdDef=function(){P.$cctor();return P.shdDef;};H.processHier=function(dx,dy){var dz,dA,dB,dC,dD;dB=new bt.New$5();dz=[];dA=0;dC=_5.indexed(dx);dD=b8.Get(dC);try{while(dD.MoveNext())(function(){var dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP;function dQ(dR,dS){return O.Equals(dS,dJ);}dE=dD.Current();dF=dE[1][0];dG=dE[1][1];dH=dE[0];dI=dG!=null&&dG.$==1?(dJ=dG.$0,(dK=_5.tryFind(function(dR){return dQ(dR[0],dR[1]);},_5.indexed(dz)),dK!=null&&dK.$==1?(dL=dK.$0[0],[dL+1,bu.array(dz,{$:1,$0:0},{$:1,$0:dL}),null]):[0,[],{$:1,$0:(function(dR){return function(dS){return dR("Parent not found in path "+_.prettyPrint(dS));};}(a.id))(dJ)}])):[0,[],null];dM=dI[1];dN=dI[0];dB.Add(dF,I.New(dN,dH,(dO=(dP=_5.tryItem(dH+1,dx),dP==null?null:{$:1,$0:O.Equals({$:1,$0:dF},dP.$0[1])}),dO==null?false:dO.$0),dA>=dN,dM,dI[2]));dz=dM.concat([dF]);return dA>=dN?void(dA=dy.Contains(dF)?dN:dN+1):null;}());}finally{if(typeof dD=="object"&&"Dispose"in dD)dD.Dispose();}return dB;};H.snpIdParentsW=function(){P.$cctor();return P.snpIdParentsW;};H.processHierW=function(){P.$cctor();return P.processHierW;};H.docWrap=function(dx,dy){return(dx([]))([dy]);};H.moveNode=function(dx,dy){M.Get(function(dz){var dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM;dA=(dB=null,dz.TryGetValue(dx,{get:function(){return dB;},set:function(dN){dB=dN;}})?{$:1,$0:dB}:null);dC=(dD=null,dz.TryGetValue(dy,{get:function(){return dD;},set:function(dN){dD=dN;}})?{$:1,$0:dD}:null);dE=H.snippetsLM().TryFindByKey(dx);dF=H.snippetsLM().TryFindByKey(dy);dA!=null&&dA.$==1?dC!=null&&dC.$==1?dE!=null&&dE.$==1?dF!=null&&dF.$==1?(dG=dA.$0,dH=dE.$0,dI=dC.$0,_5.contains(dx,dI.path)?void 0:(dJ=_2.ofSeq((H.snippetsLM())["var"].Get()),dK=function(dN){var dO,dP,dQ;while(true){dP=_2.tryItem(dN+1,dJ);if(dP!=null&&dP.$==1){dQ=(dO=null,dz.TryGetValue(dP.$0.snpId,{get:function(){return dO;},set:function(dR){dO=dR;}})?{$:1,$0:dO}:null);if(dQ!=null&&dQ.$==1){if(_5.contains(dx,dQ.$0.path))dN=dN+1;else return dN;}else return dN;}else return dN;}}(dG.pos),dL=bw.New(dH.snpId,dH.snpName,dH.snpContent,dF.$0.snpParentIdO,dH.snpPredIds,dH.snpProperties,dH.snpModified),dM=_2.concat(dG.pos<dI.pos?[bu.array(dJ,{$:1,$0:0},{$:1,$0:dG.pos-1}),bu.array(dJ,{$:1,$0:dK+1},{$:1,$0:dI.pos-1}),[dL],bu.array(dJ,{$:1,$0:dG.pos+1},{$:1,$0:dK}),bu.array(dJ,{$:1,$0:dI.pos},null)]:[bu.array(dJ,{$:1,$0:0},{$:1,$0:dI.pos-1}),[dL],bu.array(dJ,{$:1,$0:dG.pos+1},{$:1,$0:dK}),bu.array(dJ,{$:1,$0:dI.pos},{$:1,$0:dG.pos-1}),bu.array(dJ,{$:1,$0:dK+1},null)]),H.snippetsLM().Set(dM))):void 0:void 0:void 0:void 0;},H.processHierW());};H.calcUI=function(dx,dy,dz){var dA,dB,dC;dA=M.Map(function(dD){return(H.indPredIds())(dD);},(dB=M.Apply(M.Map2(function(dD,dE){return function(dF){return[dD.snpId,dE.snpParentIdO,dF.snpPredIds];};},dz.get_CurrentV().get_View(),dz.get_CurrentV().get_View()),dz.get_CurrentV().get_View()),(dC=[W.Create$1(null)],(M.Sink(function(dD){if(!O.Equals(dC[0].Get(),dD))dC[0].Set(dD);},dB),dC[0].get_View()))));return function(dD){return function(dE){var dF,dG,dH,dI,dJ,dK,dL,dM,dN;M.Map(function(dO){return dO==null;},dD);dF=M.Map2(function(dO,dP){var dQ,dR,dS;dQ=(dR=dP.snpId,function(dT){var dU;dU=null;return dT.TryGetValue(dR,{get:function(){return dU;},set:function(dV){dU=dV;}})?{$:1,$0:dU}:null;}(dO));dS=H.shdDef();return dQ==null?dS:dQ.$0;},H.processHierW(),dE.get_View());return H.docWrap(dx,(dG=(dH=(dI=(dJ=(dK=(dL=bB.Make().WithHole({$:2,$0:"name",$1:M.Map2(function(dO,dP){return(dO.errorO==null?a.id:function(dQ){return function(dR){return dQ("!"+_.toSafe(dR));};}(a.id))(dP.snpName);},dF,dE.get_View())}).WithHole({$:2,$0:"selected",$1:M.Map2(function(dO,dP){return O.Equals(dO,dP)?"selected":"";},dz.selV.get_View(),dD)}).WithHole({$:2,$0:"predecessor",$1:M.Apply(M.Apply(M.Apply(M.Map2(function(dO,dP){return dq.Curried3(function(dQ,dR,dS){var dT;return dO!=null&&dO.$==1?(dT=dO.$0,(_5.contains(dT,dP.snpPredIds)?"direct-predecessor":_5.contains(dT,dQ)?"indirect-predecessor":_5.contains(dT,dR)?"included-predecessor":"")+(O.Equals(dS,dO)?" codeSnippet":"")):"";});},dD,dz.get_CurrentV().get_View()),dA),H.allCodePredIdsW()),H.codeSnippetIdV().get_View())}),dL.WithHole(bC.EventQ2(dL.k,"select",function(){return dL.i;},function(){var dO;M.Get((dO=dz.selV,function(dP){dO.Set(dP);}),dD);}))).WithHole({$:2,$0:"indent",$1:M.Map(function(dO){return a.String(1.5*dO.level);},dF)}).WithHole({$:2,$0:"parent",$1:M.Apply(M.Map2(function(dO,dP){return function(dQ){return dO.hasChildren?dP.Contains(dQ.snpId)?"collapsed":"expanded":"";};},dF,H.collapsedV().get_View()),dE.get_View())}),dK.WithHole(bC.EventQ2(dK.k,"togglecollapse",function(){return dK.i;},function(){M.Get(function(dO){var dP;if(dO.hasChildren){dP=((H.collapsedV().Get().Contains(dE.Get().snpId)?function(dQ){return function(dR){return dR.Remove(dQ);};}:function(dQ){return function(dR){return dR.Add(dQ);};})(dE.Get().snpId))(H.collapsedV().Get());H.collapsedV().Set(dP);}},dF);}))),dJ.WithHole(bC.EventQ2(dJ.k,"drag",function(){return dJ.i;},function(dO){M.Get(function(dP){if(dP!=null&&dP.$==1){F.setDragNode(dP.$0);dO.Event.stopPropagation();}},dD);}))),dI.WithHole(bC.EventQ2(dI.k,"dragover",function(){return dI.i;},function(dO){M.Get(function(dP){if(dP!=null&&dP.$==1)if(F.getDragNIdO(dP.$0)!=null)dO.Event.preventDefault();},dD);}))),dH.WithHole(bC.EventQ2(dH.k,"drop",function(){return dH.i;},function(dO){dO.Event.preventDefault();M.Get(function(dP){var dQ,dR;if(dP!=null&&dP.$==1){dQ=dP.$0;dR=F.getDragNIdO(dQ);(U.iter(function(dS){H.moveNode(dS,dQ);}))(dR);}},dD);}))),(dM=bC.CompleteHoles(dG.k,dG.h,[]),(dN=new bA.New(dM[1],bD.snippet(dM[0])),(dG.i=dN,dN)))).get_Doc());};};};H.search=function(){P.$cctor();return P.search;};H.wrapNothing=function(dx){return bj.Concat;};H.snippetList=function(){P.$cctor();return P.snippetList;};H.currentSnippetV=function(){P.$cctor();return P.currentSnippetV;};H.currentSnippetNameV=function(){P.$cctor();return P.currentSnippetNameV;};H.currentSnippetContentV=function(){P.$cctor();return P.currentSnippetContentV;};H.curSnp=function(){P.$cctor();return P.curSnp;};H.loadTextFile=function(dx){var dy,dz;dy=dx.files;dy.length>0?(dz=new bE(),dz.onload=function(dA){var dB,dC;try{dB=(dC=dA.target.result,(bH.deserializeWithDefs((bI.serModel())[0],(bI.serModel())[1]))(dC));return(U.iter(function(dD){H.snippetsLM().Set(dD.snippets);H.collapsedV().Set(dD.collapsed);}))(dB);}catch(dD){a.alert(a.String(dD));return(function(dE){return function(dF){return dE(_.prettyPrint(dF));};}(function(dE){dr.log(dE);}))(dD);}},dz.readAsText(dy.item(0))):void 0;};H.selectorLensGuidId=function(dx){var dy;function dz(dA){return dA==null?null:{$:1,$0:bM.Tag$4(dA.$0)};}return(w.selectorLens(a.String,(dy=_9.parseGuidO(),function(dA){return dz(dy(dA));})))(dx);};H.monacoNew=function(dx){return V.onRender(function(dy){var dz;dz=dy.editorO;(U.iter(function(dA){var dB;dB=dA.getModel();self.monaco.editor.setModelLanguage(dB,"fsharp");}))(dz);self.monaco.editor.setTheme("vs-dark");},p.newVar(function(){return{};},function(){return{};},dx));};H.monaco=function(){P.$cctor();return P.monaco;};H.addSnippet=function(){M.Get(function(dx){var dy,dz,dA,dB,dC,dD,dE;dy=_2.ofSeq((H.snippetsLM())["var"].Get());dz=H.snippetList().add();dA=H.currentSnippetV().Get().snpId;dB=(dC=null,dx.TryGetValue(dA,{get:function(){return dC;},set:function(dF){dC=dF;}})?{$:1,$0:dC}:null);dB!=null&&dB.$==1?(dD=function(dF){var dG,dH,dI;while(true){dH=_2.tryItem(dF+1,dy);if(dH!=null&&dH.$==1){dI=(dG=null,dx.TryGetValue(dH.$0.snpId,{get:function(){return dG;},set:function(dJ){dG=dJ;}})?{$:1,$0:dG}:null);if(dI!=null&&dI.$==1){if(_5.contains(dA,dI.$0.path))dF=dF+1;else return dF;}else return dF;}else return dF;}}(dB.$0.pos),dE=_2.concat([bu.array(dy,{$:1,$0:0},{$:1,$0:dD}),[bw.New(dz.snpId,dz.snpName,dz.snpContent,H.currentSnippetV().Get().snpParentIdO,dz.snpPredIds,dz.snpProperties,dz.snpModified)],bu.array(dy,{$:1,$0:dD+1},null)]),H.snippetsLM().Set(dE)):void 0;},H.processHierW());};H.deleteSnippet=function(){M.Get(function(dx){var dy,dz,dA,dB,dC,dD,dE;dy=H.currentSnippetV().Get().snpId;dz=H.currentSnippetV().Get().snpParentIdO;dA=(dB=null,dx.TryGetValue(dy,{get:function(){return dB;},set:function(dF){dB=dF;}})?{$:1,$0:dB}:null);dA!=null&&dA.$==1?(dC=dA.$0,dD=_2.ofSeq((H.snippetsLM())["var"].Get()),function(dF){var dG,dH,dI,dJ;while(true){dH=_2.tryItem(dF,dD);if(dH!=null&&dH.$==1){dI=dH.$0;if(O.Equals(dI.snpParentIdO,{$:1,$0:dy})){_2.set(dD,dF,bw.New(dI.snpId,dI.snpName,dI.snpContent,dz,dI.snpPredIds,dI.snpProperties,dI.snpModified));dF=dF+1;}else{dJ=(dG=null,dx.TryGetValue(dI.snpId,{get:function(){return dG;},set:function(dK){dG=dK;}})?{$:1,$0:dG}:null);if(dJ!=null&&dJ.$==1){if(_5.contains(dy,dJ.$0.path))dF=dF+1;else return null;}else return null;}}else return null;}}(dC.pos+1),dE=_2.concat([bu.array(dD,{$:1,$0:0},{$:1,$0:dC.pos-1}),bu.array(dD,{$:1,$0:dC.pos+1},null)]),H.snippetsLM().Set(dE)):void 0;},H.processHierW());};H.indentIn=function(){M.Get(function(dx){var dy,dz;dy=(dz=H.currentSnippetV().Get().snpId,function(dA){var dB;dB=null;return dA.TryGetValue(dz,{get:function(){return dB;},set:function(dC){dB=dC;}})?{$:1,$0:dB}:null;}(dx));(U.iter(function(dA){var dB,dC;dB=H.currentSnippetV().Get().snpParentIdO;dC=function(dD){var dE;while(true)if(dD===0)return null;else{dE=_5.nth(dD-1,(H.snippetsLM())["var"].Get());if(O.Equals({$:1,$0:dE.snpId},dB))return null;else if(O.Equals(dE.snpParentIdO,dB))return{$:1,$0:dE.snpId};else dD=dD-1;}}(dA.pos);(U.iter(function(dD){W.Lens(H.currentSnippetV(),function(dE){return dE.snpParentIdO;},function(dE,dF){return bw.New(dE.snpId,dE.snpName,dE.snpContent,dF,dE.snpPredIds,dE.snpProperties,dE.snpModified);}).Set({$:1,$0:dD});}))(dC);}))(dy);},H.processHierW());};H.indentOut=function(){M.Get(function(dx){var dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ;dy=H.currentSnippetV().Get().snpId;dz=(dA=null,dx.TryGetValue(dy,{get:function(){return dA;},set:function(dK){dA=dK;}})?{$:1,$0:dA}:null);dB=H.currentSnippetV().Get().snpParentIdO;dz!=null&&dz.$==1?dB!=null&&dB.$==1?(dC=dz.$0,dD=dB.$0,dE=_5.tryItem(_2.length(dC.path)-2,dC.path),!O.Equals({$:1,$0:dD},dE)?(W.Lens(H.currentSnippetV(),function(dK){return dK.snpParentIdO;},function(dK,dL){return bw.New(dK.snpId,dK.snpName,dK.snpContent,dL,dK.snpPredIds,dK.snpProperties,dK.snpModified);}).Set(dE),dF=_2.ofSeq((H.snippetsLM())["var"].Get()),dG=function(dK,dL){var dM,dN,dO,dP;while(true){dN=_2.tryItem(dL+1,dF);if(dN!=null&&dN.$==1){dO=(dM=null,dx.TryGetValue(dN.$0.snpId,{get:function(){return dM;},set:function(dQ){dM=dQ;}})?{$:1,$0:dM}:null);if(dO!=null&&dO.$==1){dP=dO.$0;if(_5.contains(dy,dP.path)){dK=dL+1;dL=dL+1;}else if(_5.contains(dD,dP.path))dL=dL+1;else return{$:1,$0:[dK,dL]};}else return null;}else return null;}}(dC.pos,dC.pos),dG!=null&&dG.$==1?(dH=dG.$0[1],dI=dG.$0[0],dJ=_2.concat([bu.array(dF,{$:1,$0:0},{$:1,$0:dC.pos-1}),bu.array(dF,{$:1,$0:dI+1},{$:1,$0:dH}),bu.array(dF,{$:1,$0:dC.pos},{$:1,$0:dI}),bu.array(dF,{$:1,$0:dH+1},null)]),H.snippetsLM().Set(dJ)):void 0):void 0):void 0:void 0;},H.processHierW());};H.main=function(){var dx;dx=v.startWithHtmlD();(bN.resolver(bo.ofArray([["AppFrameworkTemplate.html",bO.html()+E.html()]]),dx))();};I.New=function(dx,dy,dz,dA,dB,dC){return{level:dx,pos:dy,hasChildren:dz,visible:dA,path:dB,errorO:dC};};J.TryParseInt32=function(dx,dy){return J.TryParse(dx,-2147483648,2147483647,dy);};L=K.Var=dq.Class({},m,L);L.New=dq.Ctor(function(){m.New.call(this);},L);M=K.View=dq.Class({},null,M);N.toInt=function(dx){var dy;dy=N.toUInt(dx);return dy>=2147483648?dy-4294967296:dy;};N.FailWith=function(dx){throw new cP(dx);};N.range=function(dx,dy){var dz;dz=1+dy-dx;return dz<=0?[]:_5.init(dz,function(dA){return dA+dx;});};N.toUInt=function(dx){return(dx<0?ds.ceil(dx):ds.floor(dx))>>>0;};N.KeyValue=function(dx){return[dx.K,dx.V];};M.Const=function(dx){var dy;dy=bP.New({$:0,$0:dx});return function(){return dy;};};M.Map=function(dx,dy){return M.CreateLazy(function(){return bP.Map(dx,dy());});};M.Bind=function(dx,dy){return M.Join(M.Map(dx,dy));};M.Map2=function(dx,dy,dz){return M.CreateLazy(function(){return bP.Map2(dx,dy(),dz());});};M.MapSeqCachedViewBy=function(dx,dy,dz){var dA;dA=[new bt.New$5()];return M.Map(function(dB){var dC,dD,dE;dC=dA[0];dD=new bt.New$5();dE=ce.mapInPlace(function(dF){var dG,dH,dI;dG=dx(dF);dH=dC.ContainsKey(dG)?(dI=dC.get_Item(dG),(W.Set(dI.r,dF),dI)):M.ConvertSeqNode(function(dJ){return dy(dG,dJ);},dF);dD.set_Item(dG,dH);return dH.e;},_2.ofSeq(dB));dA[0]=dD;return dE;},dz);};M.get_Do=function(){return bn.B;};M.Get=function(dx,dy){var dz;function dA(){bP.WhenRun(dy(),function(dB){if(!dz[0]){dz[0]=true;dx(dB);}},function(){if(!dz[0])dA();});}dz=[false];dA();};M.Apply=function(dx,dy){return M.Map2(function(dz,dA){return dz(dA);},dx,dy);};M.Sink=function(dx,dy){function dz(){bP.WhenRun(dy(),dx,function(){b1.scheduler().Fork(dz);});}b1.scheduler().Fork(dz);};M.CreateLazy=function(dx){var dy;dy={c:null,o:dx};return function(){var dz,dA;dz=dy.c;return dz===null?(dz=dy.o(),dy.c=dz,(dA=dz.s,dA!=null&&dA.$==0)?dy.o=null:bP.WhenObsoleteRun(dz,function(){dy.c=null;}),dz):dz;};};M.Join=function(dx){return M.CreateLazy(function(){return bP.Join(dx());});};M.ConvertSeqNode=function(dx,dy){var dz,dA;dz=W.Create$1(dy);dA=dz.get_View();return{e:dx(dA),r:dz,w:dA};};M.MapAsync=function(dx,dy){return M.CreateLazy(function(){return bP.MapAsync(dx,dy());});};M.TryGet=function(dx){return bP.TryGet(dx());};M.Map2Unit=function(dx,dy){return M.CreateLazy(function(){return bP.Map2Unit(dx(),dy());});};M.MapSeqCached=function(dx,dy){return M.MapSeqCachedBy(a.id,dx,dy);};M.Sequence=function(dx){return M.CreateLazy(function(){return bP.Sequence(_5.map(function(dy){return dy();},dx));});};M.MapSeqCachedBy=function(dx,dy,dz){var dA;dA=[new bt.New$5()];return M.Map(function(dB){var dC,dD,dE;dC=dA[0];dD=new bt.New$5();dE=ce.mapInPlace(function(dF){var dG,dH;dG=dx(dF);dH=dC.ContainsKey(dG)?dC.get_Item(dG):dy(dF);dD.set_Item(dG,dH);return dH;},_2.ofSeq(dB));dA[0]=dD;return dE;},dz);};M.Map3=function(dx,dy,dz,dA){return M.CreateLazy(function(){return bP.Map3(dx,dy(),dz(),dA());});};O.Equals=function(dx,dy){var dz,dA,dB,dC;if(dx===dy)return true;else{dz=typeof dx;if(dz=="object"){if(dx===null||dx===void 0||dy===null||dy===void 0)return false;else if("Equals"in dx)return dx.Equals(dy);else if(dx instanceof a.Array&&dy instanceof a.Array)return O.arrayEquals(dx,dy);else if(dx instanceof a.Date&&dy instanceof a.Date)return O.dateEquals(dx,dy);else{dA=[true];for(var dD in dx)if(function(dE){dA[0]=!dx.hasOwnProperty(dE)||dy.hasOwnProperty(dE)&&O.Equals(dx[dE],dy[dE]);return!dA[0];}(dD))break;if(dA[0]){for(var dE in dy)if(function(dF){dA[0]=!dy.hasOwnProperty(dF)||dx.hasOwnProperty(dF);return!dA[0];}(dE))break;}return dA[0];}}else return dz=="function"&&("$Func"in dx?dx.$Func===dy.$Func&&dx.$Target===dy.$Target:"$Invokes"in dx&&"$Invokes"in dy&&O.arrayEquals(dx.$Invokes,dy.$Invokes));}};O.arrayEquals=function(dx,dy){var dz,dA;if(_2.length(dx)===_2.length(dy)){dz=true;dA=0;while(dz&&dA<_2.length(dx)){!O.Equals(_2.get(dx,dA),_2.get(dy,dA))?dz=false:void 0;dA=dA+1;}return dz;}else return false;};O.dateEquals=function(dx,dy){return dx.getTime()===dy.getTime();};O.Hash=function(dx){var dy;dy=typeof dx;return dy=="function"?0:dy=="boolean"?dx?1:0:dy=="number"?dx:dy=="string"?O.hashString(dx):dy=="object"?dx==null?0:dx instanceof a.Array?O.hashArray(dx):O.hashObject(dx):0;};O.Compare=function(dx,dy){var dz,dA,dB,dC,dD,dE;if(dx===dy)return 0;else{dA=typeof dx;switch(dA=="function"?1:dA=="boolean"?2:dA=="number"?2:dA=="string"?2:dA=="object"?3:0){case 0:return typeof dy=="undefined"?0:-1;case 1:return N.FailWith("Cannot compare function values.");case 2:return dx<dy?-1:1;case 3:if(dx===null)dB=-1;else if(dy===null)dB=1;else if("CompareTo"in dx)dB=dx.CompareTo(dy);else if("CompareTo0"in dx)dB=dx.CompareTo0(dy);else if(dx instanceof a.Array&&dy instanceof a.Array)dB=O.compareArrays(dx,dy);else if(dx instanceof a.Date&&dy instanceof a.Date)dB=O.compareDates(dx,dy);else{dC=[0];for(var dF in dx)if(function(dG){return!dx.hasOwnProperty(dG)?false:!dy.hasOwnProperty(dG)?(dC[0]=1,true):(dC[0]=O.Compare(dx[dG],dy[dG]),dC[0]!==0);}(dF))break;if(dC[0]===0){for(var dG in dy)if(function(dH){return!dy.hasOwnProperty(dH)?false:!dx.hasOwnProperty(dH)&&(dC[0]=-1,true);}(dG))break;}dB=dC[0];}return dB;}}};O.hashString=function(dx){var dy,dz,dA;if(dx===null)return 0;else{dy=5381;for(dz=0,dA=dx.length-1;dz<=dA;dz++)dy=O.hashMix(dy,dx[dz].charCodeAt());return dy;}};O.hashArray=function(dx){var dy,dz,dA;dy=-34948909;for(dz=0,dA=_2.length(dx)-1;dz<=dA;dz++)dy=O.hashMix(dy,O.Hash(_2.get(dx,dz)));return dy;};O.hashObject=function(dx){var dy,dz;if("GetHashCode"in dx)return dx.GetHashCode();else{dy=[0];for(var dA in dx)if(function(dB){dy[0]=O.hashMix(O.hashMix(dy[0],O.hashString(dB)),O.Hash(dx[dB]));return false;}(dA))break;return dy[0];}};O.compareArrays=function(dx,dy){var dz,dA;if(_2.length(dx)<_2.length(dy))return -1;else if(_2.length(dx)>_2.length(dy))return 1;else{dz=0;dA=0;while(dz===0&&dA<_2.length(dx)){dz=O.Compare(_2.get(dx,dA),_2.get(dy,dA));dA=dA+1;}return dz;}};O.compareDates=function(dx,dy){return O.Compare(dx.getTime(),dy.getTime());};O.hashMix=function(dx,dy){return(dx<<5)+dx+dy;};P.$cctor=function(){var dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;P.$cctor=a.ignore;function d4(d7){return d7+"T00:00:00";}function d5(d7){return H.snippetsLM().TryFindByKey(d7);}function d6(d7){return H.snippetsLM().TryFindByKey(d7);}P.rtn=function(d7){return[d7];};P.result=new bR.New();P.result$1=bQ.result();P.resultP=new bS.New();P.depend=new bT.New();P.resultM=new bV.New();P.asyncResultM=new _1.New();P.parseDateO2=(dx=_9.tryParseWith$1(function(d7){var d8,d9;d8=0;return[(d9=cm.TryParse(d7),d9!=null&&d9.$==1&&(d8=d9.$0,true)),d8];}),function(d7){return dx(d4(d7));});P.parseDateO=_9.tryParseWith$1(function(d7){var d8,d9;d8=0;return[(d9=cm.TryParse(d7),d9!=null&&d9.$==1&&(d8=d9.$0,true)),d8];});P.parseIntO=_9.tryParseWith$1(function(d7){var d8;d8=0;return[J.TryParseInt32(d7,{get:function(){return d8;},set:function(d9){d8=d9;}}),d8];});P.parseInt64O=_9.tryParseWith$1(function(d7){var d8;d8=0;return[J.TryParseInt64(d7,{get:function(){return d8;},set:function(d9){d8=d9;}}),d8];});P.parseSingleO=_9.tryParseWith$1(function(d7){var d8,d9;d8=0;return[(d9=a.Number(d7),a.isNaN(d9)?false:(d8=d9,true)),d8];});P.parseDoubleO=_9.tryParseWith$1(function(d7){var d8,d9;d8=0;return[(d9=a.Number(d7),a.isNaN(d9)?false:(d8=d9,true)),d8];});P.parseGuidO=_9.tryParseWith$1(function(d7){var d8;d8=null;return[br.TryParse(d7,{get:function(){return d8;},set:function(d9){d8=d9;}}),d8];});P["|Date|_|"]=_9.parseDateO$1();P["|Int|_|"]=_9.parseIntO$1();P["|Int64|_|"]=_9.parseInt64O$1();P["|Single|_|"]=_9.parseSingleO$1();P["|Double|_|"]=_9.parseDoubleO$1();P["|Guid|_|"]=_9.parseGuidO$1();P.serString=[bW.toJsonString,function(d7){return d7.tryString();}];P.serFloat=[function(d7){return(function(d8){return function(d9){return d8(_.prettyPrint(d9));};}(a.id))(d7);},function(d7){return d7.tryFloat();}];P.serInt=[function(d7){return(function(d8){return function(d9){return d8(_.prettyPrint(d9));};}(a.id))(d7);},function(d7){var d8;d8=d7.tryInt();return d8==null?null:{$:1,$0:N.toInt(d8.$0)};}];P.serInt64=[a.String,function(d7){return d7.tryInt();}];P.serBool=[function(d7){return(function(d8){return function(d9){return d8(_.prettyPrint(d9));};}(a.id))(d7);},function(d7){return d7.tryBool();}];P.serDate=[function(d7){return a.String(a.id(d7));},function(d7){var d8;d8=d7.tryInt();return d8==null?null:{$:1,$0:d8.$0};}];P.serTypedRegisters=new bt.New$5();P.serGuid=(dy=bW.serString(),bW.mapO(a.String,_9.parseGuidO$1(),dy[0],dy[1]));P.defaultSnippet=bw.New(bM.Tag$4("00000000-0000-0000-0000-000000000000"),"","",null,new ci.New$1(null),[],(new a.Date(0)).getTime());P.serSnippetId=(dz="SnippetId",[function(d7){var d8;d8=a.String(bM.Untag$4(d7));return(((dq.Curried3(function(d9,d_,d$){return d9("{"+_.toSafe(d_)+" :"+_.prettyPrint(d$)+"}");}))(a.id))(dz))(d8);},function(d7){var d8,d9,d_,d$;d8=(d9=(d_=d7.tryField(dz),d_==null?null:d_.$0.tryString()),(d$=_9.parseGuidO$1(),d9==null?null:d$(d9.$0)));return d8==null?null:{$:1,$0:bM.Tag$4(d8.$0)};}]);P.serSnippet=(dA=[(dB=bI.serSnippetId(),bW.serField("snpId",function(d7){return d7.snpId;},function(d7,d8){return bw.New(d7,d8.snpName,d8.snpContent,d8.snpParentIdO,d8.snpPredIds,d8.snpProperties,d8.snpModified);},dB[0],dB[1])),(dC=bW.serString(),bW.serField("snpName",function(d7){return d7.snpName;},function(d7,d8){return bw.New(d8.snpId,d7,d8.snpContent,d8.snpParentIdO,d8.snpPredIds,d8.snpProperties,d8.snpModified);},dC[0],dC[1])),(dD=bW.serString(),bW.serField("snpContent",function(d7){return d7.snpContent;},function(d7,d8){return bw.New(d8.snpId,d8.snpName,d7,d8.snpParentIdO,d8.snpPredIds,d8.snpProperties,d8.snpModified);},dD[0],dD[1])),(dE=(dF=bI.serSnippetId(),bW.serOpt(dF[0],dF[1])),bW.serField("snpParentIdO",function(d7){return d7.snpParentIdO;},function(d7,d8){return bw.New(d8.snpId,d8.snpName,d8.snpContent,d7,d8.snpPredIds,d8.snpProperties,d8.snpModified);},dE[0],dE[1])),(dG=(dH=bI.serSnippetId(),bW.serSet(dH[0],dH[1])),bW.serField("snpPredIds",function(d7){return d7.snpPredIds;},function(d7,d8){return bw.New(d8.snpId,d8.snpName,d8.snpContent,d8.snpParentIdO,d7,d8.snpProperties,d8.snpModified);},dG[0],dG[1])),(dI=(dJ=bW.serDup(bW.serString(),bW.serString()),bW.serArr(dJ[0],dJ[1])),bW.serField("snpProperties",function(d7){return d7.snpProperties;},function(d7,d8){return bw.New(d8.snpId,d8.snpName,d8.snpContent,d8.snpParentIdO,d8.snpPredIds,d7,d8.snpModified);},dI[0],dI[1])),(dK=bW.serInt(),bW.serFieldO("snpGeneration",function(){return null;},function(d7,d8){return d7!=null&&d7.$==1?bw.New(d8.snpId,d8.snpName,d8.snpContent,d8.snpParentIdO,d8.snpPredIds,d8.snpProperties,(new a.Date(0)).getTime()+d7.$0*3600000):d8;},dK[0],dK[1])),(dL=bW.serDate(),bW.serField("snpModified",function(d7){return d7.snpModified;},function(d7,d8){return bw.New(d8.snpId,d8.snpName,d8.snpContent,d8.snpParentIdO,d8.snpPredIds,d8.snpProperties,d7);},dL[0],dL[1]))],(dM=bY.New("","",null),[function(d7){var d8;function d9(d_,d$,ea){var eb,ec;eb=d$(d7);ec=((dq.Curried3(function(ed,ee,ef){return ed(_.prettyPrint(ee)+": "+_.toSafe(ef));}))(a.id))(d_);return eb==null?null:{$:1,$0:ec(eb.$0)};}d8=cb.concat(", ",_5.choose(function(d_){return d9(d_[0],d_[1],d_[2]);},dA));return(function(d_){return function(d$){return d_("{"+_.toSafe(d$)+"}");};}(a.id))(d8);},function(d7){return{$:1,$0:_5.fold(function(d8,d9){var d_;d_=d7.tryField(d9[0]);return(d9[2](d8))(d_);},dM,dA)};}]));P.serModel=(dN=[(dO=(dP=bI.serSnippet(),bW.serArr(dP[0],dP[1])),bW.serField("snippets",function(d7){return d7.snippets;},function(d7,d8){return bJ.New(d7,d8.modified,d8.collapsed);},dO[0],dO[1])),(dQ=bW.serInt(),bW.serFieldO("generation",function(){return null;},function(d7,d8){return d7!=null&&d7.$==1?bJ.New(d8.snippets,(new a.Date(0)).getTime()+d7.$0*3600000,d8.collapsed):d8;},dQ[0],dQ[1])),(dR=bW.serDate(),bW.serField("modified",function(d7){return d7.modified;},function(d7,d8){return bJ.New(d8.snippets,d7,d8.collapsed);},dR[0],dR[1])),(dS=(dT=bI.serSnippetId(),bW.serSet(dT[0],dT[1])),bW.serField("collapsed",function(d7){return d7.collapsed;},function(d7,d8){return bJ.New(d8.snippets,d8.modified,d7);},dS[0],dS[1]))],(dU=bJ.New([],(new a.Date(0)).getTime(),new ci.New$1(null)),[function(d7){var d8;function d9(d_,d$,ea){var eb,ec;eb=d$(d7);ec=((dq.Curried3(function(ed,ee,ef){return ed(_.prettyPrint(ee)+": "+_.toSafe(ef));}))(a.id))(d_);return eb==null?null:{$:1,$0:ec(eb.$0)};}d8=cb.concat(", ",_5.choose(function(d_){return d9(d_[0],d_[1],d_[2]);},dN));return(function(d_){return function(d$){return d_("{"+_.toSafe(d$)+"}");};}(a.id))(d8);},function(d7){return{$:1,$0:_5.fold(function(d8,d9){var d_;d_=d7.tryField(d9[0]);return(d9[2](d8))(d_);},dU,dN)};}]));P.observers=bp.Empty;P.loader=(dV=null,b1.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return b1.Bind(b1.FromContinuations(function(d7,d8){return self.require(["vs/editor/editor.main"],d7,d8);}),function(){return b1.Return(null);});}));P.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"  type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 150px) 150px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"100\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <div>Docs:</div>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Vars:</div>\r\n                                                                <div ws-hole=\"Vars\" style=\"overflow:auto\" >\r\n                                                                        <div ws-template=\"NameValueInput\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <textarea class=\"form-control\" id=\"\" placeholder=\"Value...\" ws-var=\"Value\" spellcheck=\"false\">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Views:</div>\r\n                                                                <div ws-hole=\"Views\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValue\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <span class=\"input-group-addon\">${Value}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Queries:</div>\r\n                                                                <div ws-hole=\"Queries\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                        <div style=\"\r\n                                            overflow: hidden;\r\n                                            display: grid;\r\n                                            grid-template-columns: 100%;\r\n                                            grid-template-rows: repeat(15, calc(100% / 15));\r\n                                            bxackground-color: #eee;\r\n                                            box-sizing: border-box;\r\n                                            padding : 5px;\r\n                                            grid-gap: 5px;\r\n                                            margin-right: 21px;\r\n                                       \"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\"         ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\"          >${Name}</button>\r\n                                            <button ws-template=\"ActionDisabled\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" disabled >${Name}</button>\r\n                                        </div>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        xtextarea {\r\n                           resize : none;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";P.htmlD=bN.dependByName("AppFrameworkTemplate.html",bO.html(),a.id);P.startWithHtmlD=(dW=bN.depend(),dW.Delay(function(){return dW.Bind(v.htmlD(),function(d7){return dW.Return(function(){var d8,d9,d_;d8=self.document.createElement("div");self.document.body.appendChild(d8);d8.outerHTML=d7;d9=ba.getMainDoc().f();d_=self.document.body;cp.LoadLocalTemplates("");bj.RunAppend(d_,d9);});});}));P.unselectorV=new b$.New(M.Const(null),a.ignore);P.plugin=new y.New();P.html$1="\r\n                <div ws-template=\"Snippet\" >\r\n                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                         ws-ondrag=\"Drag\"\r\n                         ws-ondragover=\"DragOver\"\r\n                         ws-ondrop=\"Drop\"\r\n                        >\r\n                        <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                        <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                        <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                    </div>\r\n                </div>\r\n                <style>\r\n                    .Hidden     { display   : none         }\r\n                    table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                    td input.form-control { \r\n                        padding    : 0px; \r\n                        font-family: monospace;\r\n                        font-size  :   small;\r\n                        margin-top :   0px;\r\n                        margin-left: -2px;\r\n                        width      : 100%\r\n                    }\r\n                    td select {\r\n                        font-size : smaller;\r\n                        max-width : 8ch;\r\n                    }\r\n                    textarea {\r\n                       resize : none;\r\n                    }\r\n                    .tab-content {\r\n                        overflow: hidden\r\n                    }\r\n                    .tab-children {\r\n                        position:relative;\r\n                    }\r\n                    .tab-children>div>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    .relative {\r\n                        position:relative;\r\n                    }\r\n                    .relative>* {\r\n                        position:absolute;\r\n                        height: 100%;\r\n                        width:  100%;\r\n                        display: grid;\r\n                    }\r\n                    table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                    table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                    table.table-striped    tbody input              { background: transparent; border: none}\r\n                    table.table-striped    tbody select             { background: transparent; border: none}\r\n                    table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                    table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                    table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                    table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                    table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                    table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                               border-bottom: solid thin blue     ; } \r\n                    table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                    table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                    thead { color: gray }\r\n                    h3 { \r\n                        color: gray;\r\n                        line-height: 1em;\r\n                    }\r\n                    button       { border: solid thin transparent ; border-radius: 3px; }\r\n                    button:hover { border: solid thin blue }\r\n                    .indenter { position  : absolute; \r\n                                top:0px; bottom:0px; left:0px; \r\n                                background: white; color:white;\r\n                                border-right: gray thin dotted;\r\n                                }\r\n                    body {\r\n                        color      : #333;\r\n                        font-size  : small;\r\n                        font-family: monospace;\r\n                        line-height: 1.2;\r\n                    }\r\n                    .mainTitle {  \r\n                        font-size: 48px;\r\n                        font-weight: 500;\r\n                        color: gray;\r\n                        margin-top: -12px;\r\n                    }\r\n                    .CodeMirror {\r\n                        height: 100%;\r\n                    }\r\n                    \r\n                  \r\n                    body { margin: 0px }     \r\n                         \r\n                    div textarea {\r\n                        font-family     : monospace;\r\n                    }\r\n                    .code-editor-list-tile {\r\n                        white-space     : nowrap; \r\n                        border-style    : solid none none;\r\n                        border-color    : white;\r\n                        border-width    : 1px;\r\n                        background-color: #D8D8D8;\r\n                        display         : flex;\r\n                    }\r\n                    .code-editor-list-text{\r\n                        padding         : 1px 10px 1px 5px;\r\n                        overflow        : hidden;\r\n                        text-overflow   : ellipsis;\r\n                        white-space     : nowrap;\r\n                        flex            : 1;\r\n                    }\r\n                    \r\n                    .code-editor-list-tile span.node.ErrorMsg {\r\n                        background-color: red\r\n                    }\r\n                    .code-editor-list-tile span.node.expanded::before {\r\n                        content: \"-\"\r\n                    }\r\n                    .code-editor-list-tile span.node.collapsed::before {\r\n                        content: \"+\"\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor {\r\n                        font-weight     : bold;\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.indirect-predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    .code-editor-list-tile.included-predecessor {\r\n                        color           : chocolate;\r\n                    }\r\n                    .code-editor-list-tile.selected {\r\n                        background-color: #77F;\r\n                        color           : white;\r\n                    }\r\n                    .code-editor-list-tile.codeSnippet {\r\n                        text-decoration : underline;\r\n                        font-weight     : bold;\r\n                    }\r\n                    .code-editor-list-tile:hover {\r\n                        background      : lightgray;\r\n                    }\r\n                    .code-editor-list-tile.selected:hover {\r\n                        background      : blue;\r\n                    }\r\n                    .code-editor-list-tile>.predecessor {\r\n                        font-weight     : bold;\r\n                        border-style    : inset;\r\n                        border-width    : 1px;\r\n                        text-align      : center;\r\n                        color           : transparent;\r\n                    }\r\n                    .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                        color           : blue;\r\n                    }\r\n                    \r\n                    .CodeMirror { height: 100%; }\r\n                    \r\n                    .node {\r\n                        background-color: white; \r\n                        width           : 2ch; \r\n                        color           : #A03; \r\n                        font-weight     : bold; \r\n                        text-align      : center;\r\n                        font-family     : arial;\r\n                    }\r\n                    .Warning { text-decoration: underline lightblue } \r\n                    .Error   { text-decoration: underline red       } \r\n                    \r\n                </style>\r\n            ";P.drag=G.DragNone;P.TemplateFileName="d:\\Abe\\CIPHERWorkspace\\FSharpStation\\website\\Templates.html";P.snippetsLM=bk.Create(function(d7){return d7.snpId;},bp.Empty);P.collapsedV=W.Create$1(new ci.New$1(null));P.codeSnippetIdV=W.Create$1(null);P.searchFor=W.Create$1("");P.allPredecessors=function(d7){return bY.allPredecessors(d5,d7);};P.indPredIds=function(d7){return bY.indirectPredecessorIds(d6,d7[0],d7[1],d7[2]);};P.allCodePredsW=M.Map(function(d7){var d8,d9;return d7!=null&&d7.$==1?(d8=d7.$0,(d9=H.snippetsLM().TryFindByKey(d8),d9!=null&&d9.$==1?(H.allPredecessors())(d9.$0):new ci.New$1(null))):new ci.New$1(null);},H.codeSnippetIdV().get_View());P.allCodePredIdsW=M.Map(function(d7){return _5.map(function(d8){return d8.snpId;},d7);},H.allCodePredsW());P.shdDef=I.New(0,0,false,true,[],null);P.snpIdParentsW=(dX=M.Map(function(d7){return _2.ofSeq(_5.map(function(d8){return[d8.snpId,d8.snpParentIdO];},d7));},H.snippetsLM().v),(dY=[W.Create$1(null)],(M.Sink(function(d7){if(!O.Equals(dY[0].Get(),d7))dY[0].Set(d7);},dX),dY[0].get_View())));P.processHierW=(dZ=M.get_Do(),M.Bind(function(d7){return M.Bind(function(d8){return M.Const(H.processHier(d7,d8));},H.collapsedV().get_View());},H.snpIdParentsW()));P.search=(d0=M.get_Do(),M.Bind(function(d7){function d8(d9){var d_,d$,ea;d_=(d$=(ea=d9.snpId,function(eb){var ec;ec=null;return eb.TryGetValue(ea,{get:function(){return ec;},set:function(ed){ec=ed;}})?{$:1,$0:ec}:null;}(d7)),d$==null?null:{$:1,$0:d$.$0.visible});return d_==null||d_.$0;}return M.Bind(function(d9){return d9===""?M.Const(d8):M.Bind(function(d_){return M.Bind(function(d$){return d9==="."?M.Const(function(ea){return(O.Equals(d$,{$:1,$0:ea.snpId})||_5.contains(ea.snpId,d_))&&d8(ea);}):M.Const(function(ea){return ea.snpName.indexOf(d9)!=-1||ea.snpContent.indexOf(d9)!=-1;});},H.codeSnippetIdV().get_View());},H.allCodePredIdsW());},H.searchFor().get_View());},H.processHierW()));P.snippetList=C.getDocFor(H.snippetsLM(),bY.defaultSnippet(),function(){return bY.New("","",null);},{$:1,$0:H.search()},function(d7){return H.calcUI(H.wrapNothing,true,d7);});M.Sink(function(d7){var d8;if(d7!=null&&d7.$==1){d8=d7.$0;M.Get(function(d9){if(!O.Equals(H.codeSnippetIdV().Get(),{$:1,$0:d8}))if(!_5.contains(d8,d9))H.codeSnippetIdV().Set({$:1,$0:d8});},H.allCodePredIdsW());}},H.snippetList().selV.get_View());P.currentSnippetV=W.Lens(H.snippetList().get_CurrentV(),a.id,function(d7,d8){return d8;});P.currentSnippetNameV=W.Lens(H.currentSnippetV(),function(d7){return d7.snpName;},function(d7,d8){return bw.New(d7.snpId,d8,d7.snpContent,d7.snpParentIdO,d7.snpPredIds,d7.snpProperties,d7.snpModified);});P.currentSnippetContentV=W.Lens(H.currentSnippetV(),function(d7){return d7.snpContent;},function(d7,d8){return bw.New(d7.snpId,d7.snpName,d8,d7.snpParentIdO,d7.snpPredIds,d7.snpProperties,d7.snpModified);});P.curSnp=(d1=x.plugin(),d1.AddVar(d1.AddVar(d1.Yield(),"name",H.currentSnippetNameV()),"content",H.currentSnippetContentV()));P.monaco=(d2=H.monacoNew(W.Lens(H.currentSnippetV(),function(d7){return d7.snpContent;},function(d7,d8){return bw.New(d7.snpId,d7.snpName,d8,d7.snpParentIdO,d7.snpPredIds,d7.snpProperties,d7.snpModified);})),_4.New(d2["var"],d2.disabled,M.Const([]),d2.onChange,d2.onRender,null,null,null,d2.editorO,d2.editorHook));x.addPlugIn2((d3=x.plugin(),d3.AddAct(d3.AddAct(d3.AddAct(d3.AddAct(d3.AddAct(d3.Merge(d3.Merge(d3.AddDoc(d3.AddVar(d3.Name(d3.Yield(),"Snippets"),"searchFor",H.searchFor()),"editor",bc.Create(function(){return bj.Element("div",[],[V.generateDoc(H.monaco())]);})),"snippets_",H.snippetList().PlugIn(H.selectorLensGuidId)),"curSnp_",H.curSnp()),"LoadSnippets",function(){H.loadTextFile(self.document.getElementById("LoadSnippets").firstElementChild.firstElementChild.firstElementChild.firstElementChild);}),"IndentIn",function(){H.indentIn();}),"IndentOut",function(){H.indentOut();}),"AddSnippet",function(){H.addSnippet();}),"DeleteSnippet",function(){H.deleteSnippet();})));A.addLayout0(bd.newLyt("SnippetsLyt","\r\n                    split horizontal 0-50-100 AppFramework.AppFwkClient main\r\n                    main vertical 0-25-100 list snippet\r\n                    SearchFor   Doc InputLabel \"\" \"Search\" Snippets.searchFor\r\n                    File        Doc InputFile  \"id=LoadSnippets\" \"Open File\" Snippets.LoadSnippets \"\"\r\n                    list div \"display: flex;flex-direction: column\" File\r\n                    : button \"click=@{Snippets.AddSnippet}\"    \"Add New Snippet\"\r\n                    : button \"click=@{Snippets.DeleteSnippet}\" \"Delete Snippet\"\r\n                    : button \"click=@{Snippets.IndentIn}\"      \"Indent in\"\r\n                    : button \"click=@{Snippets.IndentOut}\"     \"Indent out\"\r\n                    : div    \"\" SearchFor \r\n                    : div \"overflow:auto;width:100%;max-width:100%\" Snippets.snippets_list\r\n                    snippet div \"display: flex;flex-direction: column\"\r\n                    : div    \"\" Snippets.snippets_sel\r\n                    : Doc    InputLabel \"\" \"Name:\" Snippets.curSnp_name\r\n                    : div \"height:100%;class=relative\" Snippets.editor                \r\n                "));};R.addResizeObserver$1=function(dx,dy){var dz,dA,dB,dC;try{dz=!(!a.ResizeObserver);}catch(dD){dz=false;}if(dz){dA=new a.ResizeObserver(dx);R.set_observers$1(new bp({$:1,$0:dA,$1:R.observers$1()}));dA.observe(dy);}else{dB=R.dimsChanged$1(dy);b1.Start((dC=null,b1.Delay(function(){return b1.While(function(){return dy.isConnected;},b1.Delay(function(){return b1.Bind(b1.Sleep(110),function(){return dB()?(dx(),b1.Zero()):b1.Zero();});}));})),null);}};R.set_observers$1=function(dx){P.$cctor();P.observers=dx;};R.observers$1=function(){P.$cctor();return P.observers;};R.dimsChanged$1=function(dx){var dy;dy=[dx.getBoundingClientRect()];return function(){var dz;dz=dx.getBoundingClientRect();return O.Equals(R.domRect2Tuple$1(dy[0]),R.domRect2Tuple$1(dz))?false:(dy[0]=dz,true);};};R.domRect2Tuple$1=function(dx){return[dx.top,dx.left,dx.width,dx.height];};U.iter=function(dx){function dy(dA){return dA==null?null:{$:1,$0:dx(dA.$0)};}function dz(dA){if(dA==null);}return function(dA){return dz(dy(dA));};};V.bindVarEditor=function(dx,dy,dz,dA,dB){var dC,dD;dC=[0];dD=[0];dx(function(){var dE;dE=dy();!O.Equals(dB.Get(),dE)?(dC[0]=dC[0]+1,dB.Set(dE),dA(dE)):void 0;});M.Sink(function(){if(dC[0]>dD[0])dD[0]=dC[0];else if(!O.Equals(dy(),dB.Get()))dz(dB.Get());},dB.get_View());};V.newVar=function(dx,dy){return _4.New(dy,M.Const(false),M.Const([]),null,a.ignore,null,null,null,null,dx);};V.onRender=function(dx,dy){return _4.New(dy["var"],dy.disabled,dy.annotations,dy.onChange,dx,dy.autoCompletion,dy.toolTip,dy.declaration,dy.editorO,dy.editorHook);};V.generateDoc=function(dx){var dy,dz,dA;dy=(dz=(dA=dx.onChange,dA==null?null:{$:1,$0:dA.$0(dx)}),dz==null?a.ignore:dz.$0);return(dx.editorHook.generateDoc(dx))(function(dB){dx.editorO={$:1,$0:dB};V.bindVarEditor(dx.editorHook.hookOnChange,dx.editorHook.getValue,dx.editorHook.setValue,dy,dx["var"]);M.Sink(dx.editorHook.showAnnotations,dx.annotations);M.Sink(dx.editorHook.setDisabled,dx.disabled);dx.onRender(dx);});};W=K.Var$1=dq.Class({},m,W);W.Create$1=function(dx){return new b3.New(false,bP.New({$:2,$0:dx,$1:[]}),dx);};W.Lens=function(dx,dy,dz){var dA,dB,dC;dA=b5.Id();dB=M.Map(dy,dx.get_View());dC=new L({Get:function(){return dy(dx.Get());},Set:function(dD){return dx.Update(function(dE){return dz(dE,dD);});},SetFinal:function(dD){return this.Set(dD);},Update:function(dD){return dx.Update(function(dE){return dz(dE,dD(dy(dE)));});},UpdateMaybe:function(dD){return dx.UpdateMaybe(function(dE){var dF;dF=dD(dy(dE));return dF==null?null:{$:1,$0:dz(dE,dF.$0)};});},get_View:function(){return dB;},get_Id:function(){return dA;}});L.New.call(dC);return dC;};W.Set=function(dx,dy){dx.Set(dy);};X.toArray=function(dx){return dx==null?[]:[dx.$0];};Y.New=function(dx,dy){return{line:dx,col:dy};};Z.asyncResultM=function(){P.$cctor();return P.asyncResultM;};Z["AsyncResultMBuilder.Bind"]=function(dx,dy,dz){function dA(dB){return b1.Return(dB);}return _0.bind(dz,b1.Bind(dy,function(dB){return dA(T.OkM$1(dB));}));};_1=_0.AsyncResultMBuilder=dq.Class({Run:function(dx){return _0.bind(dx,_0.rtn());},Delay:a.id,Return:function(dx){return _0.rtn(dx);}},m,_1);_1.New=dq.Ctor(function(){m.New.call(this);},_1);_2.map=function(dx,dy){var dz,dA,dB;dz=new a.Array(dy.length);for(dA=0,dB=dy.length-1;dA<=dB;dA++)dz[dA]=dx(dy[dA]);return dz;};_2.splitAt=function(dx,dy){return[_2.take(dx,dy),_2.skip(dx,dy)];};_2.findIndex=function(dx,dy){var dz;dz=_2.tryFindIndex(dx,dy);return dz==null?N.FailWith("KeyNotFoundException"):dz.$0;};_2.concat=function(dx){return a.Array.prototype.concat.apply([],_2.ofSeq(dx));};_2.tryItem=function(dx,dy){return dy.length<=dx||dx<0?null:{$:1,$0:dy[dx]};};_2.ofSeq=function(dx){var dy,dz;if(dx instanceof a.Array)return dx.slice();else if(dx instanceof bp)return _2.ofList(dx);else{dy=[];dz=b8.Get(dx);try{while(dz.MoveNext())dy.push(dz.Current());return dy;}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}}};_2.exists=function(dx,dy){var dz,dA,dB,dC;dz=false;dA=0;dC=_2.length(dy);while(!dz&&dA<dC)if(dx(dy[dA]))dz=true;else dA=dA+1;return dz;};_2.filter=function(dx,dy){var dz,dA,dB;dz=[];for(dA=0,dB=dy.length-1;dA<=dB;dA++)if(dx(dy[dA]))dz.push(dy[dA]);return dz;};_2.tryFindIndex=function(dx,dy){var dz,dA;dz=null;dA=0;while(dA<dy.length&&dz==null){dx(dy[dA])?dz={$:1,$0:dA}:void 0;dA=dA+1;}return dz;};_2.take=function(dx,dy){return dx<0?_5.nonNegative():dx>dy.length?_5.insufficient():dy.slice(0,dx);};_2.skip=function(dx,dy){return dx<0?_5.nonNegative():dx>dy.length?_5.insufficient():dy.slice(dx);};_2.tryFind=function(dx,dy){var dz,dA;dz=null;dA=0;while(dA<dy.length&&dz==null){dx(dy[dA])?dz={$:1,$0:dy[dA]}:void 0;dA=dA+1;}return dz;};_2.choose=function(dx,dy){var dz,dA,dB,dC;dz=[];for(dA=0,dB=dy.length-1;dA<=dB;dA++){dC=dx(dy[dA]);dC==null?void 0:dz.push(dC.$0);}return dz;};_2.ofList=function(dx){var dy,dz;dz=[];dy=dx;while(!(dy.$==0)){dz.push(bo.head(dy));dy=bo.tail(dy);}return dz;};_2.tryPick=function(dx,dy){var dz,dA,dB;dz=null;dA=0;while(dA<dy.length&&dz==null){dB=dx(dy[dA]);dB!=null&&dB.$==1?dz=dB:void 0;dA=dA+1;}return dz;};_2.pick=function(dx,dy){var dz;dz=_2.tryPick(dx,dy);return dz==null?N.FailWith("KeyNotFoundException"):dz.$0;};_2.sortInPlace=function(dx){_2.mapInPlace(function(dy){return dy[0];},_2.mapiInPlace(function(dy,dz){return[dz,dy];},dx).sort(O.Compare));};_2.find=function(dx,dy){var dz;dz=_2.tryFind(dx,dy);return dz==null?N.FailWith("KeyNotFoundException"):dz.$0;};_2.iter=function(dx,dy){var dz,dA;for(dz=0,dA=dy.length-1;dz<=dA;dz++)dx(dy[dz]);};_2.forall=function(dx,dy){var dz,dA,dB,dC;dz=true;dA=0;dC=_2.length(dy);while(dz&&dA<dC)if(dx(dy[dA]))dA=dA+1;else dz=false;return dz;};_2.create=function(dx,dy){var dz,dA,dB;dz=new a.Array(dx);for(dA=0,dB=dx-1;dA<=dB;dA++)dz[dA]=dy;return dz;};_2.foldBack=function(dx,dy,dz){var dA,dB,dC,dD,dE;dA=dz;dC=dy.length;for(dD=1,dE=dC;dD<=dE;dD++)dA=dx(dy[dC-dD],dA);return dA;};_2.sortInPlaceBy=function(dx,dy){_2.mapInPlace(function(dz){return dz[0];},_2.mapiInPlace(function(dz,dA){return[dA,[dx(dA),dz]];},dy).sort(function(dz,dA){return O.Compare(dz[1],dA[1]);}));};_2.init=function(dx,dy){var dz,dA,dB;dx<0?N.FailWith("Negative size given."):null;dz=new a.Array(dx);for(dA=0,dB=dx-1;dA<=dB;dA++)dz[dA]=dy(dA);return dz;};_3.ofAsyncResultM=function(dx){return new a.Promise(function(dy,dz){b1.StartWithContinuations(dx,function(dA){var dB;dB=T.OkM(dA);dB.$==1?dz(b7.summarized(dB.$0)):dy(dB.$0[0]);},function(dA){dz(dA);},function(dA){dz(dA);},null);});};_4.New=function(dx,dy,dz,dA,dB,dC,dD,dE,dF,dG){return{"var":dx,disabled:dy,annotations:dz,onChange:dA,onRender:dB,autoCompletion:dC,toolTip:dD,declaration:dE,editorO:dF,editorHook:dG};};_5.map=function(dx,dy){return{GetEnumerator:function(){var dz;dz=b8.Get(dy);return new b9.New(null,null,function(dA){return dz.MoveNext()&&(dA.c=dx(dz.Current()),true);},function(){dz.Dispose();});}};};_5.choose=function(dx,dy){return _5.collect(function(dz){var dA;dA=dx(dz);return dA==null?bp.Empty:bo.ofArray([dA.$0]);},dy);};_5.iter=function(dx,dy){var dz;dz=b8.Get(dy);try{while(dz.MoveNext())dx(dz.Current());}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}};_5.filter=function(dx,dy){return{GetEnumerator:function(){var dz;dz=b8.Get(dy);return new b9.New(null,null,function(dA){var dB,dC,dD;dB=dz.MoveNext();dC=dz.Current();dD=false;while(dB)if(dx(dC)){dA.c=dC;dD=true;dB=false;}else if(dz.MoveNext())dC=dz.Current();else dB=false;return dD;},function(){dz.Dispose();});}};};_5.collect=function(dx,dy){return _5.concat(_5.map(dx,dy));};_5.indexed=function(dx){return _5.mapi(function(dy,dz){return[dy,dz];},dx);};_5.tryFind=function(dx,dy){var dz,dA,dB;dz=b8.Get(dy);try{dA=null;while(dA==null&&dz.MoveNext()){dB=dz.Current();dx(dB)?dA={$:1,$0:dB}:void 0;}return dA;}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}};_5.delay=function(dx){return{GetEnumerator:function(){return b8.Get(dx());}};};_5.append=function(dx,dy){return{GetEnumerator:function(){var dz,dA;dz=b8.Get(dx);dA=[true];return new b9.New(dz,null,function(dB){var dC;return dB.s.MoveNext()?(dB.c=dB.s.Current(),true):(dC=dB.s,!O.Equals(dC,null)?dC.Dispose():void 0,dB.s=null,dA[0]&&(dA[0]=false,dB.s=b8.Get(dy),dB.s.MoveNext()?(dB.c=dB.s.Current(),true):(dB.s.Dispose(),dB.s=null,false)));},function(dB){var dC;dC=dB.s;!O.Equals(dC,null)?dC.Dispose():void 0;});}};};_5.fold=function(dx,dy,dz){var dA,dB;dA=dy;dB=b8.Get(dz);try{while(dB.MoveNext())dA=dx(dA,dB.Current());return dA;}finally{if(typeof dB=="object"&&"Dispose"in dB)dB.Dispose();}};_5.concat=function(dx){return{GetEnumerator:function(){var dy;dy=b8.Get(dx);return new b9.New(null,null,function(dz){var dA;while(true){dA=dz.s;if(O.Equals(dA,null)){if(dy.MoveNext()){dz.s=b8.Get(dy.Current());dz=dz;}else{dy.Dispose();return false;}}else if(dA.MoveNext()){dz.c=dA.Current();return true;}else{dz.Dispose();dz.s=null;dz=dz;}}},function(dz){var dA;dA=dz.s;!O.Equals(dA,null)?dA.Dispose():void 0;!O.Equals(dy,null)?dy.Dispose():void 0;});}};};_5.mapi=function(dx,dy){return _5.map2(dx,_5.initInfinite(a.id),dy);};_5.nth=function(dx,dy){var dz,dA;if(dx<0)N.FailWith("negative index requested");dz=-1;dA=b8.Get(dy);try{while(dz<dx){!dA.MoveNext()?_5.insufficient():void 0;dz=dz+1;}return dA.Current();}finally{if(typeof dA=="object"&&"Dispose"in dA)dA.Dispose();}};_5.head=function(dx){var dy;dy=b8.Get(dx);try{return dy.MoveNext()?dy.Current():_5.insufficient();}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}};_5.groupBy=function(dx,dy){return _5.delay(function(){return _2.groupBy(dx,_2.ofSeq(dy));});};_5.map2=function(dx,dy,dz){return{GetEnumerator:function(){var dA,dB;dA=b8.Get(dy);dB=b8.Get(dz);return new b9.New(null,null,function(dC){return dA.MoveNext()&&dB.MoveNext()&&(dC.c=dx(dA.Current(),dB.Current()),true);},function(){dA.Dispose();dB.Dispose();});}};};_5.initInfinite=function(dx){return{GetEnumerator:function(){return new b9.New(0,null,function(dy){dy.c=dx(dy.s);dy.s=dy.s+1;return true;},void 0);}};};_5.init=function(dx,dy){return _5.take(dx,_5.initInfinite(dy));};_5.tryFindIndex=function(dx,dy){var dz,dA,dB;dz=b8.Get(dy);try{dA=true;dB=0;while(dA&&dz.MoveNext())if(dx(dz.Current()))dA=false;else dB=dB+1;return dA?null:{$:1,$0:dB};}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}};_5.pairwise=function(dx){return _5.map(function(dy){return[_2.get(dy,0),_2.get(dy,1)];},_5.windowed(2,dx));};_5.isEmpty=function(dx){var dy;dy=b8.Get(dx);try{return!dy.MoveNext();}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}};_5.distinctBy=function(dx,dy){return{GetEnumerator:function(){var dz,dA;dz=b8.Get(dy);dA=new cj.New$3();return new b9.New(null,null,function(dB){var dC,dD;if(dz.MoveNext()){dC=dz.Current();dD=dA.Add(dx(dC));while(!dD&&dz.MoveNext()){dC=dz.Current();dD=dA.Add(dx(dC));}return dD&&(dB.c=dC,true);}else return false;},function(){dz.Dispose();});}};};_5.forall2=function(dx,dy,dz){return!_5.exists2(function(dA,dB){return!dx(dA,dB);},dy,dz);};_5.take=function(dx,dy){dx<0?_5.nonNegative():void 0;return{GetEnumerator:function(){var dz;dz=[b8.Get(dy)];return new b9.New(0,null,function(dA){var dB;dA.s=dA.s+1;return dA.s>dx?false:(dB=dz[0],O.Equals(dB,null)?_5.insufficient():dB.MoveNext()?(dA.c=dB.Current(),dA.s===dx?(dB.Dispose(),dz[0]=null):void 0,true):(dB.Dispose(),dz[0]=null,_5.insufficient()));},function(){var dA;dA=dz[0];!O.Equals(dA,null)?dA.Dispose():void 0;});}};};_5.distinct=function(dx){return _5.distinctBy(a.id,dx);};_5.tryPick=function(dx,dy){var dz,dA;dz=b8.Get(dy);try{dA=null;while(O.Equals(dA,null)&&dz.MoveNext())dA=dx(dz.Current());return dA;}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}};_5.windowed=function(dx,dy){dx<=0?N.FailWith("The input must be positive."):void 0;return _5.delay(function(){return _5.enumUsing(b8.Get(dy),function(dz){var dA;dA=[];return _5.append(_5.enumWhile(function(){return dA.length<dx&&dz.MoveNext();},_5.delay(function(){dA.push(dz.Current());return[];})),_5.delay(function(){return dA.length===dx?_5.append([dA.slice(0)],_5.delay(function(){return _5.enumWhile(function(){return dz.MoveNext();},_5.delay(function(){dA.shift();dA.push(dz.Current());return[dA.slice(0)];}));})):[];}));});});};_5.skip=function(dx,dy){return{GetEnumerator:function(){var dz;dz=b8.Get(dy);return new b9.New(true,null,function(dA){var dB,dC;if(dA.s){for(dB=1,dC=dx;dB<=dC;dB++)if(!dz.MoveNext())_5.insufficient();dA.s=false;}else null;return dz.MoveNext()&&(dA.c=dz.Current(),true);},function(){dz.Dispose();});}};};_5.exists2=function(dx,dy,dz){var dA,dB,dC,dD;dA=b8.Get(dy);try{dC=b8.Get(dz);try{dD=false;while(!dD&&dA.MoveNext()&&dC.MoveNext())dD=dx(dA.Current(),dC.Current());dB=dD;}finally{if(typeof dC=="object"&&"Dispose"in dC)dC.Dispose();}return dB;}finally{if(typeof dA=="object"&&"Dispose"in dA)dA.Dispose();}};_5.sortBy=function(dx,dy){return _5.delay(function(){var dz;dz=_2.ofSeq(dy);_2.sortInPlaceBy(dx,dz);return dz;});};_5.unfold=function(dx,dy){return{GetEnumerator:function(){return new b9.New(dy,null,function(dz){var dA;dA=dx(dz.s);return dA==null?false:(dz.c=dA.$0[0],dz.s=dA.$0[1],true);},void 0);}};};_5.compareWith=function(dx,dy,dz){var dA,dB,dC,dD,dE;dA=b8.Get(dy);try{dC=b8.Get(dz);try{dD=0;dE=true;while(dE&&dD===0)if(dA.MoveNext())dD=dC.MoveNext()?dx(dA.Current(),dC.Current()):1;else if(dC.MoveNext())dD=-1;else dE=false;dB=dD;}finally{if(typeof dC=="object"&&"Dispose"in dC)dC.Dispose();}return dB;}finally{if(typeof dA=="object"&&"Dispose"in dA)dA.Dispose();}};_5.max=function(dx){var dy,dz,dA;dy=b8.Get(dx);try{if(!dy.MoveNext())_5.seqEmpty();dz=dy.Current();while(dy.MoveNext()){dA=dy.Current();O.Compare(dA,dz)===1?dz=dA:void 0;}return dz;}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}};_5.seqEmpty=function(){return N.FailWith("The input sequence was empty.");};_5.forall=function(dx,dy){return!_5.exists(function(dz){return!dx(dz);},dy);};_5.exists=function(dx,dy){var dz,dA;dz=b8.Get(dy);try{dA=false;while(!dA&&dz.MoveNext())dA=dx(dz.Current());return dA;}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}};_6.New=function(dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI){return{generateDoc:dx,getValue:dy,setValue:dz,setDisabled:dA,showAnnotations:dB,posFromIndex:dC,indexFromPos:dD,getWordAt:dE,getSelectionText:dF,getUri:dG,setUri:dH,hookOnChange:dI};};_8=_7.attr=dq.Class({},m,_8);_9.parseDoubleO=function(){ca.$cctor();return ca.parseDoubleO;};_9.parseIntO=function(){ca.$cctor();return ca.parseIntO;};_9.parseGuidO=function(){ca.$cctor();return ca.parseGuidO;};_9.tryParseWith=function(dx){function dy(dz,dA){return dz?{$:1,$0:dA}:null;}return function(dz){return dy.apply(null,dx(dz));};};_9.parseDateO=function(){ca.$cctor();return ca.parseDateO;};_9.parseInt64O=function(){ca.$cctor();return ca.parseInt64O;};_9.parseSingleO=function(){ca.$cctor();return ca.parseSingleO;};_9.Double=function(){ca.$cctor();return ca["|Double|_|"];};_9.Int=function(){ca.$cctor();return ca["|Int|_|"];};_.prettyPrint=function(dx){var dy,dz;function dA(dB,dC){return dB+" = "+_.prettyPrint(dC);}return dx===null?"null":(dy=typeof dx,dy=="string"?"\""+dx+"\"":dy=="object"?dx instanceof a.Array?"[|"+cb.concat("; ",_2.map(_.prettyPrint,dx))+"|]":(dz=a.String(dx),dz==="[object Object]"?"{"+cb.concat("; ",_2.map(function(dB){return dA(dB[0],dB[1]);},bK.GetFields(dx)))+"}":dz):a.String(dx));};_.toSafe=function(dx){return dx==null?"":dx;};_.padNumLeft=function(dx,dy){var dz;dz=_2.get(dx,0);return dz===" "||dz==="+"||dz==="-"?dz+cb.PadLeftWith(dx.substr(1),dy-1,"0"):cb.PadLeftWith(dx,dy,"0");};_.printList=function(dx,dy){return"["+cb.concat("; ",_5.map(dx,dy))+"]";};$=S.GuidId=dq.Class({get_Id:function(){return this.$0;}},null,$);bb.New=function(dx,dy,dz,dA,dB,dC){return{plgName:dx,plgVars:dy,plgViews:dz,plgDocs:dA,plgActions:dB,plgQueries:dC};};ba.newVar=function(dx,dy){return bi.New(dx,dy);};ba.newDoc=function(dx,dy){return bg.New(dx,{$:0,$0:dy});};ba.newAct=function(dx,dy){return bf.New(dx,{$:0,$0:dy},M.Const(true));};ba.newViw=function(dx,dy){return bh.New(dx,dy);};ba.addPlugIn=function(dx){ba.plugIns().Append(dx);ba.mainDocV().Set(ba.mainDocV().Get());};ba.mainDocV=function(){ca.$cctor();return ca.mainDocV;};ba.getMainDoc=function(){ca.$cctor();return ca.getMainDoc;};ba.plugIns=function(){ca.$cctor();return ca.plugIns;};ba.newDocF=function(dx,dy){return bg.New(dx,dy);};ba.selectionPlugInO=function(){ca.$cctor();return ca.selectionPlugInO;};ba.defaultPlugIn=function(){ca.$cctor();return ca.defaultPlugIn;};ba.currentPlugInW=function(){ca.$cctor();return ca.currentPlugInW;};ba.renderPlugIns=function(){return bj.Flatten(ba.plugIns().MapLens(function(dx){var dy,dz,dA,dB;return(dy=(dz=bB.Make().WithHole({$:1,$0:"name",$1:dx}),dz.WithHole(bC.EventQ2(dz.k,"select",function(){return dz.i;},function(){ba.selectionPlugInO().Set({$:1,$0:dx});}))).WithHole({$:2,$0:"selected",$1:M.Map(function(dC){return O.Equals(dC,{$:1,$0:dx})?"selected":"";},ba.selectionPlugInO().get_View())}),(dA=bC.CompleteHoles(dy.k,dy.h,[]),(dB=new bA.New(dA[1],cy.tile(dA[0])),(dy.i=dB,dB)))).get_Doc();}));};ba.renderVars=function(){function dx(dz,dA){return[dz.plgName,dA.varName];}function dy(dz,dA){var dB,dC,dD;return(dB=bB.Make().WithHole({$:1,$0:"name",$1:dA.varName}).WithHole({$:8,$0:"value",$1:dA.varVar}),(dC=bC.CompleteHoles(dB.k,dB.h,[["value",0]]),(dD=new bA.New(dC[1],cy.namevalueinput(dC[0])),(dB.i=dD,dD)))).get_Doc();}return bj.ConvertBy(function(dz){return dx(dz[0],dz[1]);},function(dz){return dy(dz[0],dz[1]);},M.Map(function(dz){return _5.map(function(dA){return[dz,dA];},dz.plgVars);},ba.currentPlugInW()));};ba.renderViews=function(){function dx(dz,dA){return[dz.plgName,dA.viwName];}function dy(dz,dA){var dB,dC,dD;return(dB=bB.Make().WithHole({$:1,$0:"name",$1:dA.viwName}).WithHole({$:2,$0:"value",$1:dA.viwView}),(dC=bC.CompleteHoles(dB.k,dB.h,[]),(dD=new bA.New(dC[1],cy.namevalue(dC[0])),(dB.i=dD,dD)))).get_Doc();}return bj.ConvertBy(function(dz){return dx(dz[0],dz[1]);},function(dz){return dy(dz[0],dz[1]);},M.Map(function(dz){return _5.map(function(dA){return[dz,dA];},dz.plgViews);},ba.currentPlugInW()));};ba.renderDocs=function(){function dx(dz,dA){return[dz.plgName,dA.docName];}function dy(dz,dA){var dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL;return(dB=(dC=(dD=dA.docName+(dE=dA.docDoc,dE.$==1?(dF=cb.concat(", ",bo.ofArray([dE.$1])),(function(dM){return function(dN){return dM("("+_.toSafe(dN)+")");};}(a.id))(dF)):dE.$==2?(dG=cb.concat(", ",bo.ofArray([dE.$1,dE.$2])),(function(dM){return function(dN){return dM("("+_.toSafe(dN)+")");};}(a.id))(dG)):dE.$==3?(dH=cb.concat(", ",bo.ofArray([dE.$1,dE.$2,dE.$3])),(function(dM){return function(dN){return dM("("+_.toSafe(dN)+")");};}(a.id))(dH)):dE.$==4?(dI=cb.concat(", ",bo.ofArray([dE.$1,dE.$2,dE.$3,dE.$4])),(function(dM){return function(dN){return dM("("+_.toSafe(dN)+")");};}(a.id))(dI)):dE.$==5?(dJ=cb.concat(", ",bo.ofArray([dE.$1,dE.$2,dE.$3,dE.$4,dE.$5])),(function(dM){return function(dN){return dM("("+_.toSafe(dN)+")");};}(a.id))(dJ)):""),bB.Make().WithHole({$:1,$0:"name",$1:dD})),dC.WithHole(bC.EventQ2(dC.k,"select",function(){return dC.i;},function(){M.Get(function(dM){ba.mainDocV().Set(dM.plgName+"."+dA.docName);},ba.currentPlugInW());}))),(dK=bC.CompleteHoles(dB.k,dB.h,[]),(dL=new bA.New(dK[1],cy.tile(dK[0])),(dB.i=dL,dL)))).get_Doc();}return bj.ConvertBy(function(dz){return dx(dz[0],dz[1]);},function(dz){return dy(dz[0],dz[1]);},M.Map(function(dz){return _5.map(function(dA){return[dz,dA];},dz.plgDocs);},ba.currentPlugInW()));};ba.renderActions=function(){function dx(dz,dA){return[dz.plgName,dA.actName];}function dy(dz,dA){var dB,dC,dD,dE;dB=(dC=dA.actFunction,dC.$==1?(dD=cb.concat(", ",bo.ofArray([dC.$1])),(function(dF){return function(dG){return dF("("+_.toSafe(dG)+")");};}(a.id))(dD)):dC.$==2?(dE=cb.concat(", ",bo.ofArray([dC.$1,dC.$2])),(function(dF){return function(dG){return dF("("+_.toSafe(dG)+")");};}(a.id))(dE)):"");return bj.EmbedView(M.Map(function(dF){var dG,dH,dI,dJ,dK,dL,dM,dN;return dF?(dG=(dH=bB.Make().WithHole({$:1,$0:"name",$1:dA.actName+dB}),dH.WithHole(bC.EventQ2(dH.k,"click",function(){return dH.i;},function(dO){ba.callFunction(dO,null,dA.actFunction);}))),(dI=bC.CompleteHoles(dG.k,dG.h,[]),(dJ=new bA.New(dI[1],cy.action(dI[0])),(dG.i=dJ,dJ)))).get_Doc():(dK=(dL=bB.Make().WithHole({$:1,$0:"name",$1:dA.actName}),dL.WithHole(bC.EventQ2(dL.k,"click",function(){return dL.i;},function(dO){ba.callFunction(dO,null,dA.actFunction);}))),(dM=bC.CompleteHoles(dK.k,dK.h,[]),(dN=new bA.New(dM[1],cy.actiondisabled(dM[0])),(dK.i=dN,dN)))).get_Doc();},dA.actEnabled));}return bj.ConvertBy(function(dz){return dx(dz[0],dz[1]);},function(dz){return dy(dz[0],dz[1]);},M.Map(function(dz){return _5.map(function(dA){return[dz,dA];},dz.plgActions);},ba.currentPlugInW()));};ba.renderQueries=function(){function dx(dz,dA){return[dz.plgName,dA.qryName];}function dy(dz,dA){var dB,dC,dD,dE;return(dB=(dC=bB.Make().WithHole({$:1,$0:"name",$1:dA.qryName}),dC.WithHole(bC.EventQ2(dC.k,"select",function(){return dC.i;},function(){a.alert(dA.qryFunction(null));}))),(dD=bC.CompleteHoles(dB.k,dB.h,[]),(dE=new bA.New(dD[1],cy.tile(dD[0])),(dB.i=dE,dE)))).get_Doc();}return bj.ConvertBy(function(dz){return dx(dz[0],dz[1]);},function(dz){return dy(dz[0],dz[1]);},M.Map(function(dz){return _5.map(function(dA){return[dz,dA];},dz.plgQueries);},ba.currentPlugInW()));};ba.newQry=function(dx,dy){return be.New(dx,dy);};ba.AppFwkClient=function(){ca.$cctor();return ca.AppFwkClient;};ba.actHello=function(){ca.$cctor();return ca.actHello;};ba.qryDocs=function(){ca.$cctor();return ca.qryDocs;};ba.horizontal=function(dx,dy,dz,dA,dB){var dC,dD,dE,dF;return(dC=(dD=bB.Make().WithHole({$:2,$0:"partsizes",$1:dx}).WithHole({$:7,$0:"afterrender",$1:dy}).WithHole({$:7,$0:"afterrendersp",$1:dz}),dD.WithHole(bC.EventQ2(dD.k,"mousedown",function(){return dD.i;},function(dG){dA(dG.Event);}))).WithHole({$:2,$0:"gap",$1:dB}),(dE=bC.CompleteHoles(dC.k,dC.h,[]),(dF=new bA.New(dE[1],cy.wcompsplitterhor(dE[0])),(dC.i=dF,dF)))).get_Doc();};ba.vertical=function(dx,dy,dz,dA,dB){var dC,dD,dE,dF;return(dC=(dD=bB.Make().WithHole({$:2,$0:"partsizes",$1:dx}).WithHole({$:7,$0:"afterrender",$1:dy}).WithHole({$:7,$0:"afterrendersp",$1:dz}),dD.WithHole(bC.EventQ2(dD.k,"mousedown",function(){return dD.i;},function(dG){dA(dG.Event);}))).WithHole({$:2,$0:"gap",$1:dB}),(dE=bC.CompleteHoles(dC.k,dC.h,[]),(dF=new bA.New(dE[1],cy.wcompsplitterver(dE[0])),(dC.i=dF,dF)))).get_Doc();};ba.mainDoc=function(){var dx,dy,dz,dA,dB,dC;return(dx=(dy=ba.getMainClientDoc(),(dz=(dA=ba.mainDocV().get_View(),bB.Make().WithHole({$:2,$0:"maindoc",$1:dA})),dz.WithHole(bC.EventQ2(dz.k,"goclient",function(){return dz.i;},function(){ba.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:dy})),(dB=bC.CompleteHoles(dx.k,dx.h,[]),(dC=new bA.New(dB[1],cy.appframework(dB[0])),(dx.i=dC,dC)))).get_Doc();};ba.splitName=function(dx){function dy(dA){return cu.splitByChar(".",dA);}function dz(dA){return _2.length(dA)===1?[dx,_2.get(dA,0)]:[_2.get(dA,0),_2.get(dA,1)];}return function(dA){return dz(dy(dA));};};ba.tryGetPlugIn=function(dx){return ba.plugIns().TryFindByKey(dx);};ba.newActF=function(dx,dy){return bf.New(dx,dy,M.Const(true));};ba.tryGetAct=function(dx,dy){var dz;dz=ba.tryGetPlugIn(dx);return dz==null?null:_2.tryFind(function(dA){return dA.actName===dy;},dz.$0.plgActions);};ba.callFunction=function(dx,dy,dz){if(dz.$==1)dz.$0(dx);else if(dz.$==2)(dz.$0(dx))(dy);else dz.$0();};ba.tryGetVar=function(dx,dy){var dz;dz=ba.tryGetPlugIn(dx);return dz==null?null:_2.tryFind(function(dA){return dA.varName===dy;},dz.$0.plgVars);};ba.getMainClientDoc=function(){var dx;return bj.EmbedView((dx=ba.plugIns().v,M.Map2(function(dy,dz){var dA,dB;dA=_5.tryPick(function(dC){var dD;dD=_5.tryFind(function(dE){return dC.plgName===dy||dC.plgName+"."+dE.docName===dy;},dC.plgDocs);return dD==null?null:{$:1,$0:ba.getLazyDoc(dD.$0)};},dz);dB=ba.AppFwkClient().f();return dA==null?dB:dA.$0;},ba.mainDocV().get_View(),dx)));};ba.tryGetVoV=function(dx,dy){var dz,dA,dB;dz=(dA=ba.tryGetVar(dx,dy),dA==null?null:{$:1,$0:{$:1,$0:dA.$0.varVar}});return dz==null?(dB=ba.tryGetViw(dx,dy),dB==null?null:{$:1,$0:new b$.New(dB.$0.viwView,a.ignore)}):dz.$0;};ba.tryGetDoc=function(dx,dy){var dz;dz=ba.tryGetPlugIn(dx);return dz==null?null:_2.tryFind(function(dA){return dA.docName===dy;},dz.$0.plgDocs);};ba.tryGetWoW=function(dx,dy){var dz,dA,dB;dz=(dA=ba.tryGetViw(dx,dy),dA==null?null:{$:1,$0:{$:1,$0:dA.$0.viwView}});return dz==null?(dB=ba.tryGetVar(dx,dy),dB==null?null:{$:1,$0:dB.$0.varVar.get_View()}):dz.$0;};ba.tryGetViw=function(dx,dy){var dz;dz=ba.tryGetPlugIn(dx);return dz==null?null:_2.tryFind(function(dA){return dA.viwName===dy;},dz.$0.plgViews);};ba.getLazyDoc=function(dx){var dy;dy=dx.docDoc;return dy.$==0?dy.$0.f():bj.Element("div",[],[bj.TextNode((function(dz){return function(dA){return dz("Doc with parameters not allowed here: "+cz.p(dA));};}(a.id))(dx))]);};bc.Create=function(dx){return cd.New(false,dx,bc.forceLazy);};bc.forceLazy=function(){var dx;dx=this.v();this.c=true;this.v=dx;this.f=bc.cachedLazy;return dx;};bc.cachedLazy=function(){return this.v;};bd.turnToView=function(dx){return bj.EmbedView(M.Map(dx,ba.mainDocV().get_View()));};bd.addLayout=function(dx){M.Sink(function(dy){var dz;dz=bd.createEntries(dx.lytName,dy);ba.addPlugIn(bb.New(dx.lytName,_2.ofSeq(_5.delay(function(){return _5.append([ba.newVar("Layout",dx.lytDefinition)],_5.delay(function(){return bd.getVarEntries(dz);}));})),_2.ofSeq(_5.delay(function(){return bd.getViewEntries(dz);})),_2.ofSeq(_5.delay(function(){return _5.append(bd.getDocEntries(dz),_5.delay(function(){var dA;return _5.append([ba.newDocF("InputFile",{$:4,$0:(dA=dx.lytName,dq.Curried(bd.inputFile,4,[dA])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],_5.delay(function(){var dB;return _5.append([ba.newDocF("InputLabel",{$:3,$0:(dB=dx.lytName,dq.Curried(bd.inputLabel,3,[dB])),$1:"attrs",$2:"Label",$3:"Var"})],_5.delay(function(){var dC;return _5.append([ba.newDocF("HtmlDoc",{$:1,$0:(dC=dx.lytName,function(dD){return bd.htmlDoc(dC,dD);}),$1:"html"})],_5.delay(function(){return[ba.newDocF("none",{$:1,$0:bd.none,$1:"x"})];}));}));}));}));})),_2.ofSeq(_5.delay(function(){return bd.getActionEntries(dz);})),_2.ofSeq(_5.delay(function(){return bd.getQueryEntries(dz);}))));ba.mainDocV().Set(ba.mainDocV().Get());},dx.lytDefinition.get_View());};bd.newLyt=function(dx,dy){return bm.New(dx,W.Create$1(dy));};bd.createEntries=function(dx,dy){return bd.processLines(function(dz){return bd.createEntryO(dx,dz);},cu.splitByChar("\n",dy));};bd.getVarEntries=function(dx){function dy(dz){return dz[1];}return _5.map(function(dz){return _5.last(dy(dz));},_5.groupBy(function(dz){return dz.varName;},_5.choose(function(dz){return dz.$==0?{$:1,$0:dz.$0}:null;},dx)));};bd.getViewEntries=function(dx){function dy(dz){return dz[1];}return _5.map(function(dz){return _5.last(dy(dz));},_5.groupBy(function(dz){return dz.viwName;},_5.choose(function(dz){return dz.$==1?{$:1,$0:dz.$0}:null;},dx)));};bd.getDocEntries=function(dx){function dy(dz){return dz[1];}return _5.map(function(dz){return _5.last(dy(dz));},_5.groupBy(function(dz){return dz.docName;},_5.choose(function(dz){return dz.$==2?{$:1,$0:dz.$0}:null;},dx)));};bd.inputFile=function(dx,dy,dz,dA,dB){var dC,dD,dE,dF;dC=(dD=(dE=((bd.splitName())(dx))(dA),ba.tryGetAct(dE[0],dE[1])),dD==null?null:{$:1,$0:(dF=dD.$0,bj.Element("div",bd.getAttrs(dx,dy,true),[bj.Element("div",[b2.Create("class","input-group")],[bj.Element("span",[b2.Create("class","input-group-btn")],[bj.Element("label",[b2.Create("class","btn")],[bd.getText(dx,dz,true),bj.Element("input",[b2.Create("class","form-control"),b2.Create("type","file"),b_.Style("display","none"),b2.HandlerImpl("click",function(dG){return function(){dG.value="";};}),b2.HandlerImpl("change",function(dG){return function(){return ba.callFunction(dG,null,dF.actFunction);};})],[])])]),dB!==""?bd.singleDoc(dx,bo.ofArray([[dB,false]])):bj.get_Empty()])]))});return dC==null?bd.errDoc((function(dG){return function(dH){return dG("Action not found "+_.toSafe(dH));};}(a.id))(dA)):dC.$0;};bd.inputLabel=function(dx,dy,dz,dA){var dB,dC,dD;dB=(dC=(dD=((bd.splitName())(dx))(dA),ba.tryGetVar(dD[0],dD[1])),dC==null?null:{$:1,$0:bj.Element("div",bd.getAttrs(dx,dy,true),[bj.Element("div",[b2.Create("class","input-group")],[bj.Element("span",[b2.Create("class","input-group-addon")],[bd.getText(dx,dz,true)]),bj.Input([b2.Create("class","form-control")],dC.$0.varVar)])])});return dB==null?bd.errDoc((function(dE){return function(dF){return dE("Var not found "+_.toSafe(dF));};}(a.id))(dA)):dB.$0;};bd.htmlDoc=function(dx,dy){var dz;dz=bd.getTextData(dx,dy);return dz.$==1?bj.BindView(bj.Verbatim,dz.$0):dz.$==2?bd.errDoc((function(dA){return function(dB){return dA("HtmlDoc: unexpected action "+cz.p$1(dB));};}(a.id))(dz.$0)):bj.Verbatim(dz.$0);};bd.none=function(dx){return bj.Element("span",[],[]);};bd.getActionEntries=function(dx){function dy(dz){return dz[1];}return _5.map(function(dz){return _5.last(dy(dz));},_5.groupBy(function(dz){return dz.actName;},_5.choose(function(dz){return dz.$==3?{$:1,$0:dz.$0}:null;},dx)));};bd.getQueryEntries=function(dx){function dy(dz){return dz[1];}return _5.map(function(dz){return _5.last(dy(dz));},_5.groupBy(function(dz){return dz.qryName;},_5.choose(function(dz){return dz.$==4?{$:1,$0:dz.$0}:null;},dx)));};bd.createSplitter=function(dx,dy,dz,dA,dB){var dC;dC=bd.pairOfDocs(dx,dB);return dA.$==1?bd.variableSplitter(dz,dA.$0,dA.$1,dA.$2,dC[0],dC[1]):bd.fixedSplitter(dz,dA.$0,dA.$1,dC[0],dC[1]);};bd.createButton=function(dx,dy,dz,dA,dB){return bd.turnToView(function(){var dC,dD,dE,dF,dG;function dH(dI,dJ){return ba.callFunction(null,null,dI.actFunction);}dC=(dD=(dE=(dF=((bd.splitName())(dx))(dz),ba.tryGetAct(dF[0],dF[1])),dE==null?null:{$:1,$0:(dG=dE.$0,function(dI){return dH(dG,dI);})}),dD==null?a.ignore:dD.$0);return bj.Button(dB[0],bd.getAttrs(dx,dA[0],dA[1]),dC);});};bd.createInput=function(dx,dy,dz,dA){return bd.turnToView(function(){var dB,dC,dD,dE,dF;dB=(dC=(dD=((bd.splitName())(dx))(dz),ba.tryGetVoV(dD[0],dD[1])),(dE=(dF=bd.getAttrs(dx,dA[0],dA[1]),function(dG){return bj.Input(dF,dG);}),dC==null?null:{$:1,$0:dE(dC.$0)}));return dB==null?bd.errDoc((function(dG){return function(dH){return dG("Missing var: "+_.toSafe(dH));};}(a.id))(dz)):dB.$0;});};bd.createTextArea=function(dx,dy,dz,dA){return bd.turnToView(function(){var dB,dC,dD,dE,dF;dB=(dC=(dD=((bd.splitName())(dx))(dz),ba.tryGetVoV(dD[0],dD[1])),(dE=(dF=bd.getAttrs(dx,dA[0],dA[1]),function(dG){return bj.InputArea(dF,dG);}),dC==null?null:{$:1,$0:dE(dC.$0)}));return dB==null?bd.errDoc((function(dG){return function(dH){return dG("Missing var: "+_.toSafe(dH));};}(a.id))(dz)):dB.$0;});};bd.createElement=function(dx,dy,dz,dA,dB){var dC;dC=[bd.turnToView(function(){return bj.Concat(bd.getDocs(dx,dB));})];return bj.Element(dz,bd.getAttrs(dx,dA[0],dA[1]),dC);};bd.createDoc=function(dx,dy,dz,dA){return bd.turnToView(function(){var dB,dC,dD;dB=(dC=(dD=((bd.splitName())(dx))(dz),ba.tryGetDoc(dD[0],dD[1])),dC==null?null:{$:1,$0:bd.getDocFinal(dA,dC.$0)});return dB==null?bd.errDoc((function(dE){return function(dF){return dE("Missing doc: "+_.toSafe(dF));};}(a.id))(dz)):dB.$0;});};bd.createTemplate=function(dx,dy,dz,dA,dB){return bd.turnToView(function(){var dC,dD,dE,dF,dG,dH;dE=bd.getAttrs(dx,dA[0],dA[1]);cp.LoadLocalTemplates("local");function dI(dK,dL){var dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX;dM=bd.Identifier(dL[0],dL[1]);return dM!=null&&dM.$==1?(dN=dM.$0,dO=dK[0],dP=(dQ=(dR=(dS=((bd.splitName())(dx))(dN),ba.tryGetDoc(dS[0],dS[1])),dR==null?null:{$:1,$0:{$:0,$0:dO.toLowerCase(),$1:(bd.getDocF(bp.Empty,dR.$0))[0]}}),dQ==null?(dT=(dU=((bd.splitName())(dx))(dN),ba.tryGetVar(dU[0],dU[1])),dT==null?null:{$:1,$0:{$:8,$0:dO.toLowerCase(),$1:dT.$0.varVar}}):dQ),dP==null?{$:0,$0:dO.toLowerCase(),$1:bd.errDoc((function(dY){return function(dZ){return dY("Missing element: "+_.toSafe(dZ));};}(a.id))(dN))}:dP.$0):(dV=dK[0],dW=bd.getTextData(dx,dL[0]),dW.$==1?{$:2,$0:dV.toLowerCase(),$1:dW.$0}:dW.$==2?(dX=dW.$0,{$:4,$0:dV.toLowerCase(),$1:function(dY){return function(dZ){return ba.callFunction(dY,dZ,dX.actFunction);};}}):{$:1,$0:dV.toLowerCase(),$1:dW.$0});}function dJ(dK,dL){return dK%2===0;}try{dD={$:1,$0:(dF=(dG=_5.map(function(dK){return dI(dK[0],dK[1]);},_5.map(function(dK){return dK[1];},_5.filter(function(dK){return dJ(dK[0],dK[1]);},_5.indexed(_5.pairwise(dB))))),(_5.isEmpty(dE)?a.id:(dH=[{$:3,$0:"attrs",$1:b2.Concat(dE)}],function(dK){return _5.append(dH,dK);}))(dG)),cp.NamedTemplate("local",{$:1,$0:dz[0].toLowerCase()},dF))};}catch(dK){dD=null;}return dD==null?bd.errDoc((function(dL){return function(dM){return dL("Missing template: "+_.toSafe(dM));};}(a.id))(dz[0])):dD.$0;});};bd.createConcat=function(dx,dy,dz){return bd.turnToView(function(){return bj.Concat(bd.getDocs(dx,dz));});};bd.createVar=function(dx,dy,dz){return W.Create$1(dz);};bd.createView=function(dx,dy,dz,dA){return M.Bind(function(){var dB,dD;function dC(dE,dF){var dG,dH,dI,dJ,dK,dL,dM,dN,dO;dG=bd.Identifier(dE,dF);return dG!=null&&dG.$==1?(dH=dG.$0,(dI=(dJ=(dK=(dL=((bd.splitName())(dx))(dH),ba.tryGetDoc(dL[0],dL[1])),dK==null?null:{$:1,$0:M.Const((bd.getDocF(bp.Empty,dK.$0))[0])}),dJ==null?(dM=(dN=((bd.splitName())(dx))(dH),ba.tryGetWoW(dN[0],dN[1])),dM==null?null:{$:1,$0:M.Map(a.id,dM.$0)}):dJ),dI==null?M.Const((function(dP){return function(dQ){return dP("Missing element: "+_.toSafe(dQ));};}(a.id))(dH)):dI.$0)):(dO=bd.getTextData(dx,dE),dO.$==1?M.Map(a.id,dO.$0):dO.$==2?M.Const(dO.$0):M.Const(dO.$0));}dD=bd.findJSEntry(dz);if(dD!=null&&dD.$==1){if(!(dD.$0 instanceof a.Function))return M.Const((function(dE){return function(dF){return dE("Not a JavaScript function: "+_.toSafe(dF));};}(a.id))(dz));else if(dD!=null&&dD.$==1){dB=dD.$0;return dA.$==0?M.Const(dB()):M.Map(function(dE){return dB.apply(null,dE);},M.Sequence(_5.map(function(dE){return dC(dE[0],dE[1]);},dA)));}else throw new cQ.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\src\\LayoutEngine.fs",1232,27);}else return M.Const((function(dE){return function(dF){return dE("Missing JavaScript function: "+_.toSafe(dF));};}(a.id))(dz));},ba.mainDocV().get_View());};bd.addNewLayout=function(dx,dy){var dz,dA;bd.addLayout((dz=(dA=!O.Equals(dy,null)?dy:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(cu.unindentStr())(dA)),bd.newLyt(!O.Equals(dy,null)?dx:"Lyt_"+cb.Replace(a.String(br.NewGuid()),"-",""),dz)));};bd.processLines=function(dx,dy){function dz(dA){var dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO;dB=_5.tryHead(dA);return dB!=null&&dB.$==1?(dC=dB.$0,(dD=bd.splitTokens(dC),dD.$==1&&(dF=(dG=dD.$0,bd.Identifier(dG[0],dG[1])),dF!=null&&dF.$==1&&(dD.$1.$==1&&((dH=dD.$1.$0,bd.Vertical(dH[0],dH[1])).$==2&&(dD.$1.$1.$==0&&(dE=dF.$0,true)))))?(dI=bd.getExtraLines(function(dP){return cb.StartsWith(cb.Trim(dP),"|");},dA),dz((cT.createLayoutDefinitions(dE,cT.extractNodes(dI[0])))[1].concat(dI[1]))):dD.$==0?dz(bu.array(dA,{$:1,$0:1},null)):(dJ=bd.getExtraLines(function(dP){return cb.StartsWith(cb.Trim(dP),":");},dA),(dK=dJ[1],(dL=dJ[0],_2.length(dL)>0?((function(dP){return function(dQ){return dP("l = ;"+_.toSafe(dQ)+";");};}(function(dP){dr.log(dP);}))(dC),dM=bd.createLines(_5.nth(0,cb.SplitChars(dC,[" "],1)),1,[],[],1,dL),dN=dM[0],dO=dM[1],dz(_2.ofSeq(_5.delay(function(){return _5.append([dC+" "+cb.concat(" ",dN)],_5.delay(function(){return _5.append(dO,_5.delay(function(){return dK;}));}));})))):_2.ofSeq(_5.delay(function(){var dP;return _5.append((dP=dx(dC),dP!=null&&dP.$==1?[dP.$0]:[]),_5.delay(function(){return dz(dK);}));}))))))):[];}return dz(dy);};bd.createEntryO=function(dx,dy){var dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF;try{dz=bd.splitTokens(dy);return dz.$==1&&(dB=(dC=dz.$0,bd.Identifier(dC[0],dC[1])),dB!=null&&dB.$==1&&(dz.$1.$==1&&((dD=dz.$1.$0,bd.Vertical(dD[0],dD[1])).$==0&&(dz.$1.$1.$==1&&(dE=(dF=dz.$1.$1.$0,bd.Measures$1(dF[0],dF[1])),dE!=null&&dE.$==1&&(dA=[dz.$1.$1.$1,dE.$0,dB.$0],true))))))?(dG=dA[2],bd.entryDoc(dG,(bd.createSplitterM())([dx,dG,true,dA[1],dA[0]]))):dz.$==1&&(dI=(dJ=dz.$0,bd.Identifier(dJ[0],dJ[1])),dI!=null&&dI.$==1&&(dz.$1.$==1&&((dK=dz.$1.$0,bd.Vertical(dK[0],dK[1])).$==1&&(dz.$1.$1.$==1&&(dL=(dM=dz.$1.$1.$0,bd.Measures$1(dM[0],dM[1])),dL!=null&&dL.$==1&&(dH=[dz.$1.$1.$1,dL.$0,dI.$0],true))))))?(dN=dH[2],bd.entryDoc(dN,(bd.createSplitterM())([dx,dN,false,dH[1],dH[0]]))):dz.$==1&&(dP=(dQ=dz.$0,bd.Identifier(dQ[0],dQ[1])),dP!=null&&dP.$==1&&(dz.$1.$==1&&((dR=dz.$1.$0,bd.Button(dR[0],dR[1])).$==0&&(dz.$1.$1.$==1&&(dS=(dT=dz.$1.$1.$0,bd.Identifier(dT[0],dT[1])),dS!=null&&dS.$==1&&(dz.$1.$1.$1.$==1&&(dz.$1.$1.$1.$1.$==1&&(dz.$1.$1.$1.$1.$1.$==0&&(dO=[dS.$0,dz.$1.$1.$1.$0,dP.$0,dz.$1.$1.$1.$1.$0],true)))))))))?(dU=dO[2],bd.entryDoc(dU,(bd.createButtonM())([dx,dU,dO[0],dO[1],dO[3]]))):dz.$==1&&(dW=(dX=dz.$0,bd.Identifier(dX[0],dX[1])),dW!=null&&dW.$==1&&(dz.$1.$==1&&((dY=dz.$1.$0,bd.Button(dY[0],dY[1])).$==1&&(dz.$1.$1.$==1&&(dZ=(d0=dz.$1.$1.$0,bd.Identifier(d0[0],d0[1])),dZ!=null&&dZ.$==1&&(dz.$1.$1.$1.$==1&&(dz.$1.$1.$1.$1.$==0&&(dV=[dz.$1.$1.$1.$0,dW.$0,dZ.$0],true))))))))?(d1=dV[1],bd.entryDoc(d1,(bd.createInputM())([dx,d1,dV[2],dV[0]]))):dz.$==1&&(d3=(d4=dz.$0,bd.Identifier(d4[0],d4[1])),d3!=null&&d3.$==1&&(dz.$1.$==1&&((d5=dz.$1.$0,bd.Button(d5[0],d5[1])).$==2&&(dz.$1.$1.$==1&&(d6=(d7=dz.$1.$1.$0,bd.Identifier(d7[0],d7[1])),d6!=null&&d6.$==1&&(dz.$1.$1.$1.$==1&&(dz.$1.$1.$1.$1.$==0&&(d2=[dz.$1.$1.$1.$0,d3.$0,d6.$0],true))))))))?(d8=d2[1],bd.entryDoc(d8,(bd.createTextAreaM())([dx,d8,d2[2],d2[0]]))):dz.$==1&&(d_=(d$=dz.$0,bd.Identifier(d$[0],d$[1])),d_!=null&&d_.$==1&&(dz.$1.$==1&&((ea=dz.$1.$0,bd.Var(ea[0],ea[1])).$==0&&(dz.$1.$1.$==1&&(dz.$1.$1.$1.$==0&&(d9=[d_.$0,dz.$1.$1.$0],true))))))?(eb=d9[0],bd.entryVar(eb,(bd.createVarM())([dx,eb,d9[1][0]]))):dz.$==1&&(ed=(ee=dz.$0,bd.Identifier(ee[0],ee[1])),ed!=null&&ed.$==1&&(dz.$1.$==1&&((ef=dz.$1.$0,bd.Var(ef[0],ef[1])).$==1&&(dz.$1.$1.$==1&&(ec=[dz.$1.$1.$0,ed.$0,dz.$1.$1.$1],true)))))?(eg=ec[1],bd.entryDoc(eg,(bd.createDocM())([dx,eg,ec[0][0],ec[2]]))):dz.$==1&&(ei=(ej=dz.$0,bd.Identifier(ej[0],ej[1])),ei!=null&&ei.$==1&&(dz.$1.$==1&&((ek=dz.$1.$0,bd.Var(ek[0],ek[1])).$==2&&(dz.$1.$1.$==1&&(eh=[dz.$1.$1.$0,ei.$0,dz.$1.$1.$1],true)))))?(el=eh[1],bd.entryView(el,(bd.createViewM())([dx,el,eh[0][0],eh[2]]))):dz.$==1&&(en=(eo=dz.$0,bd.Identifier(eo[0],eo[1])),en!=null&&en.$==1&&(dz.$1.$==1&&((ep=dz.$1.$0,bd.Vertical(ep[0],ep[1])).$==4&&(dz.$1.$1.$==1&&(dz.$1.$1.$1.$==1&&(em=[dz.$1.$1.$1.$0,dz.$1.$1.$1.$1,en.$0,dz.$1.$1.$0],true))))))?(eq=em[2],bd.entryDoc(eq,(bd.createTemplateM())([dx,eq,em[3],em[0],em[1]]))):dz.$==1&&(es=(et=dz.$0,bd.Identifier(et[0],et[1])),es!=null&&es.$==1&&(dz.$1.$==1&&((eu=dz.$1.$0,bd.Var(eu[0],eu[1])).$==3&&(er=[dz.$1.$1,es.$0],true))))?(ev=er[1],bd.entryDoc(ev,(bd.createConcatM())([dx,ev,er[0]]))):dz.$==1&&(ex=(ey=dz.$0,bd.Identifier(ey[0],ey[1])),ex!=null&&ex.$==1&&(dz.$1.$==1&&((ez=dz.$1.$0,bd.Vertical(ez[0],ez[1])).$==3&&(dz.$1.$1.$==1&&(dz.$1.$1.$1.$==1&&(dz.$1.$1.$1.$1.$==1&&(ew=[dz.$1.$1.$1.$1.$0,dz.$1.$1.$0,dz.$1.$1.$1.$1.$1,ex.$0,dz.$1.$1.$1.$0],true)))))))?null:dz.$==1&&(eB=(eC=dz.$0,bd.Identifier(eC[0],eC[1])),eB!=null&&eB.$==1&&(dz.$1.$==1&&(eD=(eE=dz.$1.$0,bd.Vertical(eE[0],eE[1])),eD.$==5&&(dz.$1.$1.$==1&&(eA=[dz.$1.$1.$0,dz.$1.$1.$1,eD.$0,eB.$0],true)))))?(eF=eA[3],bd.entryDoc(eF,(bd.createElementM())([dx,eF,eA[2],eA[0],eA[1]]))):null;}catch(eG){((function(eH){return function(eI){return eH(_.prettyPrint(eI));};}(function(eH){dr.log(eH);}))(eG));return null;}};bd.splitName=function(){ca.$cctor();return ca.splitName;};bd.getAttrs=function(dx,dy,dz){var dA;dA=[dy,dz];return bo.ofSeq(_5.delay(function(){return _5.append(_5.choose(function(dB){var dC,dD,dE,dF,dG,dH;return!O.Equals(dB,null)&&dB.length===2&&(dD=_2.get(dB,1),cb.Trim(_2.get(dB,0))!==""&&cb.Trim(dD)!=="")?(dE=_2.get(dB,1),(dF=_2.get(dB,0),{$:1,$0:(dG=bd.getTextData(dx,cb.Trim(dE)),dG.$==1?b_.Dynamic(cb.Trim(dF),dG.$0):dG.$==2?(dH=dG.$0,b_.Handler(cb.Trim(dF),function(dI){return function(dJ){return ba.callFunction(dI,dJ,dH.actFunction);};})):b2.Create(cb.Trim(dF),cb.Trim(dG.$0)))})):null;},_5.map(function(dB){return cu.splitByChar("=",dB);},cu.splitByChar(";",dA[0]))),_5.delay(function(){return _5.choose(function(dB){var dC,dD,dE,dF,dG;return!O.Equals(dB,null)&&dB.length===2&&(dD=_2.get(dB,1),cb.Trim(_2.get(dB,0))!==""&&cb.Trim(dD)!=="")?(dE=_2.get(dB,1),(dF=_2.get(dB,0),{$:1,$0:(dG=bd.getTextData(dx,cb.Trim(dE)),dG.$==1?b_.DynamicStyle(cb.Trim(dF),dG.$0):dG.$==2?b_.Style(cb.Trim(dF),(function(dH){return function(dI){return dH("${"+_.toSafe(dI)+"}");};}(a.id))(dG.$0.actName)):b_.Style(cb.Trim(dF),cb.Trim(dG.$0)))})):null;},_5.map(function(dB){return cu.splitByChar(":",dB);},cu.splitByChar(";",dA[0])));}));}));};bd.getText=function(dx,dy,dz){var dA,dB,dC,dD,dE,dF,dG,dH,dI;dA=bd.Identifier(dy,dz);return dA!=null&&dA.$==1?(dB=dA.$0,(dC=((bd.splitName())(dx))(dB),(dD=dC[0],(dE=dC[1],(dF=(dG=ba.tryGetViw(dD,dE),dG==null?null:{$:1,$0:bj.TextView(dG.$0.viwView)}),dF==null?(dH=(dI=ba.tryGetVar(dD,dE),dI==null?null:{$:1,$0:bj.TextView(dI.$0.varVar.get_View())}),dH==null?bj.TextNode(dB):dH.$0):dF.$0))))):bj.TextNode(dy);};bd.singleDoc=function(dx,dy){return bj.EmbedView(M.Map(function(dz){var dA;return dz.$==1&&(dz.$1.$==0&&(dA=dz.$0,true))?dA:bd.errDoc((function(dB){return function(dC){return dB("expected exactly 1 element "+_.printList(function(dD){return"("+_.prettyPrint(dD[0])+", "+_.prettyPrint(dD[1])+")";},dC));};}(a.id))(dy));},M.Map(function(){return bd.getDocs(dx,dy);},ba.mainDocV().get_View())));};bd.errDoc=function(dx){return bj.Element("div",[],[bj.TextNode(dx)]);};bd.getTextData=function(dx,dy){var dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL;dz=(dA=cu.delimitedO("@{","}",dy),dA==null?null:{$:1,$0:(dB=dA.$0,(dC=dB[0],(dD=dB[1],(dE=dB[2],(dF=((bd.splitName())(dx))(dD),(dG=dF[0],(dH=dF[1],(dI=(dJ=ba.tryGetWoW(dG,dH),dJ==null?null:{$:1,$0:function(dM){var dN,dO;dO=bd.getTextData(dx,dE);switch(dC===""?dO.$==1?(dN=dO.$0,2):dO.$==2?(dN=dO.$0,3):dO.$0===""?0:(dN=dO.$0,1):dO.$==1?(dN=dO.$0,2):dO.$==2?(dN=dO.$0,3):(dN=dO.$0,1)){case 0:return{$:1,$0:dM};case 1:return{$:1,$0:M.Map(function(dP){return dC+dP+dN;},dM)};case 2:return{$:1,$0:M.Map2(function(dP,dQ){return dC+dP+dQ;},dM,dN)};case 3:return{$:2,$0:dN};}}(dJ.$0)}),dI==null?(dK=(dL=ba.tryGetAct(dG,dH),dL==null?null:{$:1,$0:{$:2,$0:dL.$0}}),dK==null?{$:0,$0:((((dq.Curried(function(dM,dN,dO,dP){return dM(_.toSafe(dN)+" ${Missing "+_.toSafe(dO)+"}"+_.toSafe(dP));},4))(a.id))(dC))(dD))(dE)}:dK.$0):dI.$0))))))))});return dz==null?{$:0,$0:dy}:dz.$0;};bd.pairOfDocs=function(dx,dy){var dz;dz=M.Map(function(dA){var dB;return dA.$==1&&(dA.$1.$==1&&(dA.$1.$1.$==0&&(dB=[dA.$0,dA.$1.$0],true)))?[dB[0],dB[1]]:[bd.errDoc((function(dC){return function(dD){return dC("splitter expects exactly 2 elements "+_.printList(function(dE){return"("+_.prettyPrint(dE[0])+", "+_.prettyPrint(dE[1])+")";},dD));};}(a.id))(dy)),bd.errDoc("part 2")];},M.Map(function(){return bd.getDocs(dx,dy);},ba.mainDocV().get_View()));return[bj.EmbedView(M.Map(function(dA){return dA[0];},dz)),bj.EmbedView(M.Map(function(dA){return dA[1];},dz))];};bd.variableSplitter=function(dx,dy,dz,dA,dB,dC){return bj.Element("wcomp-splitter",bo.ofSeq(_5.delay(function(){return _5.append(dx?[b2.Create("vertical","")]:[],_5.delay(function(){return _5.append([b2.Create("min",a.String(dy))],_5.delay(function(){return _5.append([b2.Create("value",a.String(dz))],_5.delay(function(){return[b2.Create("max",a.String(dA))];}));}));}));})),bo.ofArray([dB,dC]));};bd.fixedSplitter=function(dx,dy,dz,dA,dB){var dC,dD,dE,dF,dG,dH,dI;dC=(((dz?dq.Curried3(function(dJ,dK,dL){return dJ(dK.toFixed(6)+"px calc(100% - "+dL.toFixed(6)+"px)");}):dq.Curried3(function(dJ,dK,dL){return dJ("calc(100% - "+dK.toFixed(6)+"px) "+dL.toFixed(6)+"px");}))(a.id))(dy))(dy);return dx?(dD=bB.Make().WithHole({$:1,$0:"partsizes",$1:dC}).WithHole({$:0,$0:"first",$1:dA}).WithHole({$:0,$0:"second",$1:dB}),(dE=bC.CompleteHoles(dD.k,dD.h,[]),(dF=new bA.New(dE[1],cy.fixedsplitterver(dE[0])),(dD.i=dF,dF)))).get_Doc():(dG=bB.Make().WithHole({$:1,$0:"partsizes",$1:dC}).WithHole({$:0,$0:"first",$1:dA}).WithHole({$:0,$0:"second",$1:dB}),(dH=bC.CompleteHoles(dG.k,dG.h,[]),(dI=new bA.New(dH[1],cy.fixedsplitterhor(dH[0])),(dG.i=dI,dI)))).get_Doc();};bd.getDocs=function(dx,dy){var dz;return dy.$==0?bp.Empty:(dz=bd.getOneDoc(dx,dy),new bp({$:1,$0:dz[0],$1:bd.getDocs(dx,dz[1])}));};bd.getDocFinal=function(dx,dy){var dz;dz=bd.getDocF(dx,dy);return dz[1].$==0?dz[0]:bd.errDoc((((dq.Curried3(function(dA,dB,dC){return dA("Too many parameters "+cz.p(dB)+" "+_.printList(function(dD){return"("+_.prettyPrint(dD[0])+", "+_.prettyPrint(dD[1])+")";},dC));}))(a.id))(dy))(dx));};bd.Identifier=function(dx,dy){var dz,dA,dB;return(dA=c.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",dx),dA!=null&&dA.$==1&&((dB=dA.$0,!O.Equals(dB,null)&&dB.length===1)&&(dy?false:(dz=_2.get(dA.$0,0),true))))?{$:1,$0:dz}:null;};bd.getDocF=function(dx,dy){var dz,dA;dA=dy.docDoc;switch(dA.$==1?dx.$==1?(dz=[dA.$0,dx.$0[0],dx.$1],1):6:dA.$==2?dx.$==1?dx.$1.$==1?(dz=[dA.$0,dx.$0[0],dx.$1.$0[0],dx.$1.$1],2):6:6:dA.$==3?dx.$==1?dx.$1.$==1?dx.$1.$1.$==1?(dz=[dA.$0,dx.$0[0],dx.$1.$0[0],dx.$1.$1.$0[0],dx.$1.$1.$1],3):6:6:6:dA.$==4?dx.$==1?dx.$1.$==1?dx.$1.$1.$==1?dx.$1.$1.$1.$==1?(dz=[dA.$0,dx.$0[0],dx.$1.$0[0],dx.$1.$1.$0[0],dx.$1.$1.$1.$0[0],dx.$1.$1.$1.$1],4):6:6:6:6:dA.$==5?dx.$==1?dx.$1.$==1?dx.$1.$1.$==1?dx.$1.$1.$1.$==1?dx.$1.$1.$1.$1.$==1?(dz=[dA.$0,dx.$0[0],dx.$1.$0[0],dx.$1.$1.$0[0],dx.$1.$1.$1.$0[0],dx.$1.$1.$1.$1.$0[0],dx.$1.$1.$1.$1.$1],5):6:6:6:6:6:(dz=[dA.$0,dx],0)){case 0:return[dz[0].f(),dz[1]];case 1:return[dz[0](dz[1]),dz[2]];case 2:return[(dz[0](dz[1]))(dz[2]),dz[3]];case 3:return[((dz[0](dz[1]))(dz[2]))(dz[3]),dz[4]];case 4:return[(((dz[0](dz[1]))(dz[2]))(dz[3]))(dz[4]),dz[5]];case 5:return[((((dz[0](dz[1]))(dz[2]))(dz[3]))(dz[4]))(dz[5]),dz[6]];case 6:return[bj.Element("div",[],[bj.TextNode((((dq.Curried3(function(dB,dC,dD){return dB("Parameters do not coincide with definition "+cz.p(dC)+" - "+_.printList(function(dE){return"("+_.prettyPrint(dE[0])+", "+_.prettyPrint(dE[1])+")";},dD));}))(a.id))(dy))(dx))]),bp.Empty];}};bd.findJSEntry=function(dx){return _5.fold(function(dy,dz){var dA;return dy==null?null:(dA=dy.$0,!dA[dz]?null:{$:1,$0:dA[dz]});},{$:1,$0:a},cu.splitByChar(".",dx));};bd.splitTokens=function(dx){return bo.ofSeq(_5.collect(a.id,_5.mapi(function(dy,dz){var dA;return dy%2===1?[[dz,true]]:(dA=cb.Trim(dz),dA===""?[]:_2.map(function(dB){return[dB,false];},cb.SplitChars(dA,[" "],1)));},cu.splitByChar("\"",dx))));};bd.Vertical=function(dx,dy){var dz,dA,dB,dC,dD,dE;return(dy?false:dx==="vertical")?{$:0,$0:null}:(dy?false:dx==="horizontal")?{$:1,$0:null}:(dy?false:dx==="layout")?{$:2,$0:null}:(dy?false:dx==="grid")?{$:3,$0:null}:(dy?false:dx==="template")?{$:4,$0:null}:(dE=bd.Identifier(dx,dy),dE!=null&&dE.$==1?{$:5,$0:dE.$0}:{$:6,$0:null});};bd.getExtraLines=function(dx,dy){var dz,dA,dB,dC;dz=(dA=(dB=_5.tryFindIndex(function(dD){return cb.Trim(dD)!==""&&!dx(dD);},_5.skip(1,dy)),dB==null?null:{$:1,$0:1+dB.$0}),(dC=_2.length(dy),dA==null?dC:dA.$0));return[bu.array(dy,{$:1,$0:1},{$:1,$0:dz-1}),bu.array(dy,{$:1,$0:dz},null)];};bd.createLines=function(dx,dy,dz,dA,dB,dC){var dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM;dD=cb.replicate(dy,":");dE=":"+dD;dF=_5.tryHead(dC);return dF!=null&&dF.$==1?(dG=cu.StartsWith(dD,cb.Trim(dF.$0)),dG!=null&&dG.$==1?(dH=dG.$0,(dI=bd.getExtraLines(function(dN){return cb.StartsWith(cb.Trim(dN),dE);},dC),(dJ=(((dq.Curried3(function(dN,dO,dP){return dN(_.toSafe(dO)+"_"+a.String(dP));}))(a.id))(dx))(dB),(dK=bd.createLines(dJ,dy+1,[],[],1,dI[0]),(dL=dK[1],(dM=dK[0],bd.createLines(dx,dy,_2.ofSeq(_5.delay(function(){return _5.append(dz,_5.delay(function(){return[dJ];}));})),_2.ofSeq(_5.delay(function(){return _5.append(dA,_5.delay(function(){return _5.append([dJ+" "+dH+" "+cb.concat(" ",dM)],_5.delay(function(){return dL;}));}));})),dB+1,dI[1]))))))):[dz,dA]):[dz,dA];};bd.Measures$1=function(dx,dy){var dz,dA,dB,dC,dD,dE,dF,dG,dH,dI;dz=[dx,dy];return dz[1]?null:(dA=cu.splitByChar("-",dz[0]),!O.Equals(dA,null)&&dA.length===1&&(dC=(_9.Double())(_2.get(dA,0)),dC!=null&&dC.$==1&&(dB=dC.$0,true))?{$:1,$0:new c3({$:0,$0:dB,$1:true})}:!O.Equals(dA,null)&&dA.length===2&&(_2.get(dA,0)===""&&(dE=(_9.Double())(_2.get(dA,1)),dE!=null&&dE.$==1&&(dD=dE.$0,true)))?{$:1,$0:new c3({$:0,$0:dD,$1:false})}:!O.Equals(dA,null)&&dA.length===3&&(dG=(_9.Double())(_2.get(dA,0)),dG!=null&&dG.$==1&&(dH=(_9.Double())(_2.get(dA,1)),dH!=null&&dH.$==1&&(dI=(_9.Double())(_2.get(dA,2)),dI!=null&&dI.$==1&&(dF=[dI.$0,dG.$0,dH.$0],true))))?{$:1,$0:new c3({$:1,$0:dF[1],$1:dF[2],$2:dF[0]})}:null);};bd.entryDoc=function(dx,dy){return{$:1,$0:{$:2,$0:ba.newDoc(dx,bc.Create(function(){return dy;}))}};};bd.createSplitterM=function(){ca.$cctor();return ca.createSplitterM;};bd.Button=function(dx,dy){var dz,dA,dB,dC;return(dy?false:dx==="button")?{$:0,$0:null}:(dy?false:dx==="input")?{$:1,$0:null}:(dy?false:dx==="textarea")?{$:2,$0:null}:(dy?false:dx==="select")?{$:3,$0:null}:{$:4,$0:null};};bd.createButtonM=function(){ca.$cctor();return ca.createButtonM;};bd.createInputM=function(){ca.$cctor();return ca.createInputM;};bd.createTextAreaM=function(){ca.$cctor();return ca.createTextAreaM;};bd.Var=function(dx,dy){var dz,dA,dB,dC;return(dy?false:dx==="Var")?{$:0,$0:null}:(dy?false:dx==="Doc")?{$:1,$0:null}:(dy?false:dx==="View")?{$:2,$0:null}:(dy?false:dx==="concat")?{$:3,$0:null}:{$:4,$0:null};};bd.entryVar=function(dx,dy){return{$:1,$0:{$:0,$0:ba.newVar(dx,dy)}};};bd.createVarM=function(){ca.$cctor();return ca.createVarM;};bd.createDocM=function(){ca.$cctor();return ca.createDocM;};bd.entryView=function(dx,dy){return{$:1,$0:{$:1,$0:ba.newViw(dx,dy)}};};bd.createViewM=function(){ca.$cctor();return ca.createViewM;};bd.createTemplateM=function(){ca.$cctor();return ca.createTemplateM;};bd.createConcatM=function(){ca.$cctor();return ca.createConcatM;};bd.createElementM=function(){ca.$cctor();return ca.createElementM;};bd.getOneDoc=function(dx,dy){var dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN;return dy.$==1&&(dA=(dB=dy.$0,bd.Identifier(dB[0],dB[1])),dA!=null&&dA.$==1&&(dz=[dA.$0,dy.$1],true))?(dC=dz[0],(dD=dz[1],(dE=((bd.splitName())(dx))(dC),(dF=dE[0],(dG=dE[1],(dH=(dI=ba.tryGetDoc(dF,dG),dI==null?null:{$:1,$0:bd.getDocF(dD,dI.$0)}),dH==null?(dJ=(dK=ba.tryGetWoW(dF,dG),dK==null?null:{$:1,$0:[bj.TextView(dK.$0),dD]}),dJ==null?[bd.errDoc((dL=(function(dO){return function(dP){return dO("Missing doc: "+_.toSafe(dP));};}(a.id))(dC),(S.print(dL),dL))),dD]:dJ.$0):dH.$0)))))):dy.$==0?[bj.get_Empty(),bp.Empty]:(dM=dy.$1,(dN=bd.getTextData(dx,dy.$0[0]),dN.$==1?[bj.TextView(dN.$0),dM]:dN.$==2?[bd.errDoc((function(dO){return function(dP){return dO("Unexpected action: "+_.toSafe(dP));};}(a.id))(dN.$0.actName)),dM]:[bj.TextNode(dN.$0),dM]));};be.New=function(dx,dy){return{qryName:dx,qryFunction:dy};};bf.New=function(dx,dy,dz){return{actName:dx,actFunction:dy,actEnabled:dz};};bg.New=function(dx,dy){return{docName:dx,docDoc:dy};};bh.New=function(dx,dy){return{viwName:dx,viwView:dy};};bi.New=function(dx,dy){return{varName:dx,varVar:dy};};bj=K.Doc=dq.Class({},m,bj);bj.Concat=function(dx){var dy;dy=ce.ofSeqNonCopying(dx);return ce.TreeReduce(bj.get_Empty(),bj.Append,dy);};bj.get_Empty=function(){return bj.Mk(null,M.Const());};bj.Async=function(dx){return bj.EmbedView(M.MapAsync(a.id,M.Const(dx)));};bj.TextNode=function(dx){return bj.Mk({$:5,$0:ct.CreateText(dx)},M.Const());};bj.Input=function(dx,dy){return bj.InputInternal("input",function(){return _5.append(dx,[b_.Value(dy)]);});};bj.InputArea=function(dx,dy){return bj.InputInternal("textarea",function(){return _5.append(dx,[b_.Value(dy)]);});};bj.Button=function(dx,dy,dz){var dA;dA=b2.Concat(dy);return cN.New(bj.Clickable("button",dz),dA,bj.TextNode(dx));};bj.Append=function(dx,dy){return bj.Mk({$:0,$0:dx.docNode,$1:dy.docNode},M.Map2Unit(dx.updates,dy.updates));};bj.Mk=function(dx,dy){return new bj.New(dx,dy);};bj.Convert=function(dx,dy){return bj.Flatten(M.MapSeqCached(dx,dy));};bj.RunAppend=function(dx,dy){var dz;dz=self.document.createTextNode("");dx.appendChild(dz);bj.RunBefore(dz,dy);};bj.Element=function(dx,dy,dz){var dA,dB;dA=b2.Concat(dy);dB=bj.Concat(dz);return cN.New(ct.CreateElement(dx),dA,dB);};bj.EmbedView=function(dx){var dy;dy=cK.CreateEmbedNode();return bj.Mk({$:2,$0:dy},M.Map(a.ignore,M.Bind(function(dz){cK.UpdateEmbedNode(dy,dz.docNode);return dz.updates;},dx)));};bj.InputInternal=function(dx,dy){var dz;dz=ct.CreateElement(dx);return cN.New(dz,b2.Concat(dy(dz)),bj.get_Empty());};bj.Clickable=function(dx,dy){var dz;dz=ct.CreateElement(dx);dz.addEventListener("click",function(dA){dA.preventDefault();return dy();},false);return dz;};bj.TextView=function(dx){var dy;dy=cK.CreateTextNode();return bj.Mk({$:4,$0:dy},M.Map(function(dz){cK.UpdateTextNode(dy,dz);},dx));};bj.Verbatim=function(dx){var dy;return bj.Mk(ce.MapTreeReduce(function(dz){return O.Equals(dz.nodeType,bZ.TEXT_NODE)?{$:5,$0:dz}:{$:1,$0:cK.CreateElemNode(dz,cs.EmptyAttr(),null)};},null,function(dz,dA){return{$:0,$0:dz,$1:dA};},(dy=dt.parseHTML(dx),O.Equals(dy,null)?[]:dy)),M.Const());};bj.Flatten=function(dx){return bj.EmbedView(M.Map(bj.Concat,dx));};bj.RunBefore=function(dx,dy){var dz;dz=self.document.createTextNode("");dx.parentNode.insertBefore(dz,dx);bj.RunBetween(dz,dx,dy);};bj.BindView=function(dx,dy){return bj.EmbedView(M.Map(dx,dy));};bj.RunBetween=function(dx,dy,dz){var dA;cK.LinkPrevElement(dy,dz.docNode);dA=cK.CreateDelimitedRunState(dx,dy,dz.docNode);M.Sink(c8.get_UseAnimations()||c9.BatchUpdatesEnabled()?c_.StartProcessor(cK.PerformAnimatedUpdate(false,dA,dz.docNode)):function(){cK.PerformSyncUpdate(false,dA,dz.docNode);},dz.updates);};bj.Run=function(dx,dy){cK.LinkElement(dx,dy.docNode);bj.RunInPlace(false,dx,dy);};bj.ConvertBy=function(dx,dy,dz){return bj.Flatten(M.MapSeqCachedBy(dx,dy,dz));};bj.RunInPlace=function(dx,dy,dz){var dA;dA=cK.CreateRunState(dy,dz.docNode);M.Sink(c8.get_UseAnimations()||c9.BatchUpdatesEnabled()?c_.StartProcessor(cK.PerformAnimatedUpdate(dx,dA,dz.docNode)):function(){cK.PerformSyncUpdate(dx,dA,dz.docNode);},dz.updates);};bj.New=dq.Ctor(function(dx,dy){m.New.call(this);this.docNode=dx;this.updates=dy;},bj);bk=K.ListModel=dq.Class({TryFindByKeyAsView:function(dx){var dy;dy=this;return function(){var dz,dA,dB;dz=(dA=null,[dy.it.TryGetValue(dx,{get:function(){return dA;},set:function(dC){dA=dC;}}),dA]);return dz[0]?dz[1]:(dB=bP.New({$:2,$0:dy.TryFindByKey(dx),$1:[]}),(dy.it.Add(dx,dB),dB));};},ContainsKey:function(dx){var dy;dy=this;return _2.exists(function(dz){return O.Equals(dy.key(dz),dx);},this["var"].Get());},Lens:function(dx){return this.LensInto(a.id,function(dy,dz){return dz;},dx);},RemoveByKey:function(dx){var dy;dy=this;this["var"].Set(this.storage.SRemoveIf(function(dz){return O.Equals(dy.key(dz),dx);},this["var"].Get()));this.ObsoleteKey(dx);},ContainsKeyAsView:function(dx){var dy;function dz(dA){return O.Equals(dy.key(dA),dx);}dy=this;return M.Map(function(dA){return _2.exists(dz,dA);},this["var"].get_View());},AppendMany:function(dx){var dy,dz;function dA(dB,dC){var dD,dE;dD=dy.key(dC);dy.ObsoleteKey(dD);dE=_2.tryFindIndex(function(dF){return O.Equals(dy.key(dF),dD);},dB);return dE==null?(dz.push(dC),dB):dy.storage.SSetAt(dE.$0,dC,dB);}dy=this;dz=[];this["var"].Set(this.storage.SAppendMany(dz,(((dq.Curried3(_5.fold))(dA))(this["var"].Get()))(dx)));},TryFindByKey:function(dx){var dy;dy=this;return _2.tryFind(function(dz){return O.Equals(dy.key(dz),dx);},this["var"].Get());},Set:function(dx){this["var"].Set(this.storage.SSet(dx));this.ObsoleteAll();},Append:function(dx){var dy,dz,dA,dB;dy=this;dz=this["var"].Get();dA=this.key(dx);dB=_2.tryFindIndex(function(dC){return O.Equals(dy.key(dC),dA);},dz);dB!=null&&dB.$==1?this["var"].Set(this.storage.SSetAt(dB.$0,dx,dz)):this["var"].Set(this.storage.SAppend(dx,dz));this.ObsoleteKey(dA);},LensInto:function(dx,dy,dz){return this["LensInto'"](dx,dy,dz,M.Map(dx,this.FindByKeyAsView(dz)));},ObsoleteKey:function(dx){var dy,dz;dy=(dz=null,[this.it.TryGetValue(dx,{get:function(){return dz;},set:function(dA){dz=dA;}}),dz]);dy[0]?(bP.Obsolete(dy[1]),this.it.Remove(dx)):void 0;},ObsoleteAll:function(){_5.iter(function(dx){bP.Obsolete(dx.V);},this.it);this.it.Clear();},"LensInto'":function(dx,dy,dz,dA){var dB,dC,dD;dB=this;dC=b5.Id();dD=new L({Get:function(){return dx(dB.FindByKey(dz));},Set:function(dE){return dB.UpdateBy(function(dF){return{$:1,$0:dy(dF,dE)};},dz);},SetFinal:function(dE){return this.Set(dE);},Update:function(dE){return dB.UpdateBy(function(dF){return{$:1,$0:dy(dF,dE(dx(dF)))};},dz);},UpdateMaybe:function(dE){return dB.UpdateBy(function(dF){var dG;dG=dE(dx(dF));return dG==null?null:{$:1,$0:dy(dF,dG.$0)};},dz);},get_View:function(){return dA;},get_Id:function(){return dC;}});L.New.call(dD);return dD;},FindByKeyAsView:function(dx){return M.Map(function(dy){return dy.$0;},this.TryFindByKeyAsView(dx));},FindByKey:function(dx){var dy;dy=this;return _2.find(function(dz){return O.Equals(dy.key(dz),dx);},this["var"].Get());},UpdateBy:function(dx,dy){var dz,dA,dB,dC,dD;dz=this;dA=this["var"].Get();dB=_2.tryFindIndex(function(dE){return O.Equals(dz.key(dE),dy);},dA);dB!=null&&dB.$==1?(dC=dB.$0,dD=dx(_2.get(dA,dC)),dD!=null&&dD.$==1?(this["var"].Set(this.storage.SSetAt(dC,dD.$0,dA)),this.ObsoleteKey(dy)):void 0):void 0;},MapLens:function(dx){var dy;dy=this;return M.MapSeqCachedViewBy(dy.key,function(dz,dA){return dx(dz,dy["LensInto'"](a.id,function(dB,dC){return dC;},dz,dA));},this["var"].get_View());},GetEnumerator:function(){return b8.Get(this["var"].Get());},GetEnumerator0:function(){return b8.Get0(this["var"].Get());}},m,bk);bk.New$1=dq.Ctor(function(dx){bk.New$2.call(this,dx,[]);},bk);bk.New=dq.Ctor(function(dx,dy){bk.New$3.call(this,dx,W.Create$1(_2.ofSeq(_5.distinctBy(dx,dy.SInit()))),dy);},bk);bk.New$2=dq.Ctor(function(dx,dy){var dz;dz=_2.ofSeq(dy);bk.New$3.call(this,dx,W.Create$1(dz),cf.InMemory(dz));},bk);bk.New$3=dq.Ctor(function(dx,dy,dz){m.New.call(this);this.key=dx;this["var"]=dy;this.storage=dz;this.v=M.Map(function(dA){return dA.slice();},this["var"].get_View());this.it=new bt.New$5();},bk);bl.insertWO=function(dx){return dx==null?M.Const(null):M.Map(function(dy){return{$:1,$0:dy};},dx.$0);};bm.New=function(dx,dy){return{lytName:dx,lytDefinition:dy};};bn.B={$:0};bk.Create=function(dx,dy){return bk.CreateWithStorage(dx,cf.InMemory(_2.ofSeq(dy)));};bk.CreateWithStorage=function(dx,dy){return new bk.New(dx,dy);};bp=bo.T=dq.Class({GetEnumerator:function(){return new b9.New(this,null,function(dx){var dy;dy=dx.s;return dy.$==0?false:(dx.c=dy.$0,dx.s=dy.$1,true);},void 0);},GetEnumerator0:function(){return b8.Get(this);}},null,bp);bp.Empty=new bp({$:0});br.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(dx){var dy,dz;dy=ds.random()*16|0;dz=dx=="x"?dy:dy&3|8;return dz.toString(16);});};br.TryParse=function(dx,dy){try{dy.set(br.Parse(dx));return true;}catch(dz){return false;}};br.Parse=function(dx){var dy,dz,dA;try{return br.ParseExact(dx,"D");}catch(dB){try{dy=br.ParseExact(dx,"B");}catch(dC){try{dz=br.ParseExact(dx,"P");}catch(dD){try{dA=br.ParseExact(dx,"N");}catch(dE){dA=br.ParseExact(dx,"X");}dz=dA;}dy=dz;}return dy;}};br.ParseExact=function(dx,dy){var dz,dA,dB,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM;function dC(dN){var dO,dP,dQ,dR;for(dO=0,dP=35;dO<=dP;dO++){dO===8||(dO===13||(dO===18||dO===23))?dN[dO]!=="-"?br.ShapeError():void 0:(dR=dN[dO],!("0"<=dR&&dR<="9"||"a"<=dR&&dR<="f")?br.ShapeError():void 0);}return dN;}dD=dy.toUpperCase();if(dD==="N"){dE=cb.Trim(dx).toLowerCase();if(dE.length!==32)br.ShapeError();for(dF=0,dG=31;dF<=dG;dF++){dH=dE[dF];!("0"<=dH&&dH<="9"||"a"<=dH&&dH<="f")?br.ShapeError():void 0;}return cb.Substring(dE,0,8)+"-"+cb.Substring(dE,8,4)+"-"+cb.Substring(dE,12,4)+"-"+cb.Substring(dE,16,4)+"-"+dE.substring(20);}else if(dD==="D"){dz=cb.Trim(dx).toLowerCase();dz.length!==36?br.ShapeError():void 0;return dC(dz);}else if(dD==="B"){dA=cb.Trim(dx).toLowerCase();dA.length!==38||dA[0]!=="{"||dA[17]!=="}"?br.ShapeError():void 0;return dC(cb.Substring(dA,1,36));}else if(dD==="P"){dB=cb.Trim(dx).toLowerCase();dB.length!==38||dB[0]!=="("||dB[17]!==")"?br.ShapeError():void 0;return dC(cb.Substring(dB,1,36));}else if(dD==="X"){dI=cb.Trim(dx).toLowerCase();if(dI.length!==68)br.ShapeError();for(dJ=0,dK=67;dJ<=dK;dJ++){switch(dJ){case 26:case 0:if(dI[dJ]!=="{")br.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(dI[dJ]!=="0")br.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(dI[dJ]!=="x")br.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(dI[dJ]!==",")br.ShapeError();break;case 67:case 66:if(dI[dJ]!=="{")br.ShapeError();break;default:dM=dI[dJ];!("0"<=dM&&dM<="9"||"a"<=dM&&dM<="f")?br.ShapeError():void 0;break;}}return cb.Substring(dI,3,8)+"-"+cb.Substring(dI,14,4)+"-"+cb.Substring(dI,21,4)+"-"+cb.Substring(dI,29,2)+cb.Substring(dI,34,2)+"-"+cb.Substring(dI,39,2)+cb.Substring(dI,44,2)+cb.Substring(dI,49,2)+cb.Substring(dI,54,2)+cb.Substring(dI,59,2)+cb.Substring(dI,64,2);}else return br.FormatError();};br.ShapeError=function(){throw new c5.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};br.FormatError=function(){throw new c5.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bo.ofArray=function(dx){var dy,dz,dA;dy=bp.Empty;for(dz=_2.length(dx)-1,dA=0;dz>=dA;dz--)dy=new bp({$:1,$0:_2.get(dx,dz),$1:dy});return dy;};bo.head=function(dx){return dx.$==1?dx.$0:bo.listEmpty();};bo.tail=function(dx){return dx.$==1?dx.$1:bo.listEmpty();};bo.ofSeq=function(dx){var dy,dz,dA,dB,dC,dD;if(dx instanceof bp)return dx;else if(dx instanceof a.Array)return bo.ofArray(dx);else{dy=b8.Get(dx);try{dA=dy.MoveNext();if(!dA)dz=bp.Empty;else{dC=new bp({$:1});dB=dC;while(dA){dB.$0=dy.Current();dy.MoveNext()?dB=(dD=new bp({$:1}),dB.$1=dD,dD):dA=false;}dB.$1=bp.Empty;dz=dC;}return dz;}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}}};bo.listEmpty=function(){return N.FailWith("The input list was empty.");};bt=bs.Dictionary=dq.Class({Add:function(dx,dy){this.add(dx,dy);},TryGetValue:function(dx,dy){var dz,dA,dB;dz=this;dA=this.data[this.hash(dx)];return dA==null?false:(dB=_2.tryPick(function(dC){var dD;dD=N.KeyValue(dC);return dz.equals.apply(null,[dD[0],dx])?{$:1,$0:dD[1]}:null;},dA),dB!=null&&dB.$==1&&(dy.set(dB.$0),true));},ContainsKey:function(dx){var dy,dz;dy=this;dz=this.data[this.hash(dx)];return dz==null?false:_2.exists(function(dA){return dy.equals.apply(null,[(N.KeyValue(dA))[0],dx]);},dz);},get_Item:function(dx){return this.get(dx);},set_Item:function(dx,dy){this.set(dx,dy);},add:function(dx,dy){var dz,dA,dB;dz=this;dA=this.hash(dx);dB=this.data[dA];dB==null?(this.count=this.count+1,this.data[dA]=new a.Array({K:dx,V:dy})):(_2.exists(function(dC){return dz.equals.apply(null,[(N.KeyValue(dC))[0],dx]);},dB)?ch.alreadyAdded():void 0,this.count=this.count+1,dB.push({K:dx,V:dy}));},get:function(dx){var dy,dz;dy=this;dz=this.data[this.hash(dx)];return dz==null?ch.notPresent():_2.pick(function(dA){var dB;dB=N.KeyValue(dA);return dy.equals.apply(null,[dB[0],dx])?{$:1,$0:dB[1]}:null;},dz);},set:function(dx,dy){var dz,dA,dB,dC;dz=this;dA=this.hash(dx);dB=this.data[dA];dB==null?(this.count=this.count+1,this.data[dA]=new a.Array({K:dx,V:dy})):(dC=_2.tryFindIndex(function(dD){return dz.equals.apply(null,[(N.KeyValue(dD))[0],dx]);},dB),dC==null?(this.count=this.count+1,dB.push({K:dx,V:dy})):dB[dC.$0]={K:dx,V:dy});},Remove:function(dx){return this.remove(dx);},Clear:function(){this.data=[];this.count=0;},remove:function(dx){var dy,dz,dA,dB;dy=this;dz=this.hash(dx);dA=this.data[dz];return dA==null?false:(dB=_2.filter(function(dC){return!dy.equals.apply(null,[(N.KeyValue(dC))[0],dx]);},dA),_2.length(dB)<dA.length&&(this.count=this.count-1,this.data[dz]=dB,true));},get_Keys:function(){return new c7.New(this);},GetEnumerator:function(){return b8.Get0(this);},GetEnumerator0:function(){return b8.Get0(_2.concat(bK.GetFieldValues(this.data)));}},m,bt);bt.New$5=dq.Ctor(function(){bt.New$6.call(this,[],O.Equals,O.Hash);},bt);bt.New$6=dq.Ctor(function(dx,dy,dz){var dA,dB;m.New.call(this);this.equals=dy;this.hash=dz;this.count=0;this.data=[];dA=b8.Get(dx);try{while(dA.MoveNext()){dB=dA.Current();this.set(dB.K,dB.V);}}finally{if(typeof dA=="object"&&"Dispose"in dA)dA.Dispose();}},bt);bu.array=function(dx,dy,dz){return dy==null?dz!=null&&dz.$==1?dx.slice(0,dz.$0+1):[]:dz==null?dx.slice(dy.$0):dx.slice(dy.$0,dz.$0+1);};bu.string=function(dx,dy,dz){return dy==null?dz!=null&&dz.$==1?dx.slice(0,dz.$0+1):"":dz==null?dx.slice(dy.$0):dx.slice(dy.$0,dz.$0+1);};bv.Filter=function(dx,dy){var dz;return new ci.New$1((dz=_2.ofSeq(_5.filter(dx,dy)),cn.Build(dz,0,dz.length-1)));};_2.set=function(dx,dy,dz){_2.checkBounds(dx,dy);dx[dy]=dz;};_2.get=function(dx,dy){_2.checkBounds(dx,dy);return dx[dy];};_2.checkBounds=function(dx,dy){if(dy<0||dy>=dx.length)N.FailWith("Index was outside the bounds of the array.");};_2.length=function(dx){return dx.dims===2?dx.length*dx.length:dx.length;};bw.New=function(dx,dy,dz,dA,dB,dC,dD){return{snpId:dx,snpName:dy,snpContent:dz,snpParentIdO:dA,snpPredIds:dB,snpProperties:dC,snpModified:dD};};bA=bz.TemplateInstance=dq.Class({get_Doc:function(){return this.doc;}},m,bA);bA.New=dq.Ctor(function(dx,dy){m.New.call(this);this.doc=dy;this.allVars=dx.$==0?dx.$0:N.FailWith("Should not happen");},bA);bB=bz.ProviderBuilder=dq.Class({WithHole:function(dx){this.h.push(dx);return this;}},null,bB);bB.Make=function(){var dx;return bB.New(null,(dx=br.NewGuid(),a.String(dx)),[]);};bB.New=function(dx,dy,dz){return new bB({i:dx,k:dy,h:dz});};bC.EventQ2=function(dx,dy,dz,dA){return{$:5,$0:dy,$1:true,$2:function(dB){return function(dC){return dA({Vars:dz(),Target:dB,Event:dC});};}};};bC.CompleteHoles=function(dx,dy,dz){var dB,dC,dD,dE,dF,dG;function dA(dH,dI){var dJ,dK,dL,dM;return dC.Contains(dH)?null:(dJ=dI===0?(dK=W.Create$1(""),[{$:8,$0:dH,$1:dK},dK]):dI===1?(dL=W.Create$1(0),[{$:13,$0:dH,$1:dL},dL]):dI===2?(dM=W.Create$1(false),[{$:9,$0:dH,$1:dM},dM]):N.FailWith("Invalid value type"),(dB.set_Item(dH,dJ[1]),{$:1,$0:dJ[0]}));}dB=new bt.New$5();dC=new cj.New$3();dD=b8.Get(dy);try{while(dD.MoveNext()){dE=dD.Current();(dE.$==8?(dF=[dE.$0,ck.Box(dE.$1)],true):dE.$==11?(dF=[dE.$0,ck.Box(dE.$1)],true):dE.$==10?(dF=[dE.$0,ck.Box(dE.$1)],true):dE.$==13?(dF=[dE.$0,ck.Box(dE.$1)],true):dE.$==12?(dF=[dE.$0,ck.Box(dE.$1)],true):dE.$==9&&(dF=[dE.$0,ck.Box(dE.$1)],true))?(dG=dF[0],dC.Add(dG),dB.set_Item(dG,dF[1])):void 0;}}finally{if(typeof dD=="object"&&"Dispose"in dD)dD.Dispose();}return[_5.append(dy,_2.choose(function(dH){return dA(dH[0],dH[1]);},dz)),{$:0,$0:dB}];};bD.snippet=function(dx){cp.LoadLocalTemplates("templates");return dx?cp.NamedTemplate("templates",{$:1,$0:"snippet"},dx):void 0;};bG.NewFromSeq=function(dx){var dy,dz,dA;dy={};dz=b8.Get(dx);try{while(dz.MoveNext()){dA=dz.Current();dy[dA[0]]=dA[1];}}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}return dy;};bH.deserializeWithDefs=function(dx,dy){return bH.deserialize(function(){return{$:1,$0:0};},function(){return{$:1,$0:0};},function(){return{$:1,$0:""};},function(){return{$:1,$0:false};},function(){return{$:1,$0:[]};},dx,dy);};bH.deserialize=function(dx,dy,dz,dA,dB,dC,dD){var dE,dF;function dG(dI){return du.parse(dI);}function dH(dI){return bH.getJsonIntermediate(dx,dy,dz,dA,dB,dI);}dE=function(dI){return dH(dG(dI));};dF=[dC,dD][1];return function(dI){return dF(dE(dI));};};bH.getJsonIntermediate=function(dx,dy,dz,dA,dB,dC){function dD(dE){return bH.getJsonIntermediate(dx,dy,dz,dA,dB,dE);}return bX.New(function(){var dE;dE=!dC?null:typeof dC=="number"?{$:1,$0:dC}:null;return dE==null?dx():dE;},function(){var dE;dE=!dC?null:typeof dC=="number"?{$:1,$0:dC}:null;return dE==null?dy():dE;},function(){var dE;dE=!dC?null:typeof dC=="string"?{$:1,$0:dC}:null;return dE==null?dz():dE;},function(){var dE;dE=!dC?null:typeof dC=="boolean"?{$:1,$0:dC}:null;return dE==null?dA():dE;},function(){var dE;dE=!dC?null:dC instanceof a.Array?{$:1,$0:_2.map(dD,dC)}:null;return dE==null?dB(dD):dE;},function(dE){var dF;return!dC?null:(dF=dC[dE],O.Equals(dF,null)?{$:1,$0:dD(null)}:!dF?null:{$:1,$0:dD(dF)});},function(){return O.Equals(typeof dC,"object")&&!O.Equals(dC,null);},function(){return O.Equals(dC,null);},function(){return(function(dE){return function(dF){return dE(_.prettyPrint(dF));};}(a.id))(dC);});};bI.serModel=function(){P.$cctor();return P.serModel;};bI.serSnippetId=function(){P.$cctor();return P.serSnippetId;};bI.serSnippet=function(){P.$cctor();return P.serSnippet;};bJ.New=function(dx,dy,dz){return{snippets:dx,modified:dy,collapsed:dz};};bK.GetFields=function(dx){var dy,dz;dy=[];for(var dA in dx)dy.push([dA,dx[dA]]);return dy;};bK.GetFieldValues=function(dx){var dy,dz;dy=[];for(var dA in dx)dy.push(dx[dA]);return dy;};bM.Tag$4=function(dx){return cl.cast(dx);};bM.Untag$4=function(dx){return cl.cast(dx);};bN.resolver=function(dx,dy){function dz(dA){var dB,dC,dD,dE,dF;function dG(dI){return dI[0];}function dH(dI){return dD===dI;}return dA.$==1?dA.$0:(dB=dA.$0,dB!=null&&dB.$==1)?(dC=dA.$1,(dD=dA.$0.$0[0],dz((dE=(dF=_5.tryFind(function(dI){return dH(dG(dI));},dx),dF==null?null:{$:1,$0:dC(dF.$0[1])}),dE==null?dC(dA.$0.$0[1]):dE.$0)))):dz(dA.$1(void 0));}return dz(dy);};bN.dependByName=function(dx,dy,dz){return{$:0,$0:{$:1,$0:[dx,dy]},$1:function(dA){return{$:1,$0:dz(dA)};}};};bN.depend=function(){P.$cctor();return P.depend;};bN.bind=function(dx,dy){function dz(dA){var dB,dC;return dA.$==1?(dB=dA.$0,{$:0,$0:null,$1:function(){return dx(dB);}}):(dC=dA.$1,{$:0,$0:dA.$0,$1:function(dD){return dz(dC(dD));}});}return dz(dy);};bN.rtn=function(dx){return{$:1,$0:dx};};bO.html=function(){P.$cctor();return P.html;};bP.Map=function(dx,dy){var dz,dA;dz=dy.s;return dz!=null&&dz.$==0?bP.New({$:0,$0:dx(dz.$0)}):(dA=bP.New({$:3,$0:[],$1:[]}),(bP.When(dy,function(dB){bP.MarkDone(dA,dy,dx(dB));},dA),dA));};bP.Map2=function(dx,dy,dz){var dA,dB,dC;function dD(dE){var dF,dG,dH;if(!(dF=dC.s,dF!=null&&dF.$==0||dF!=null&&dF.$==2)){dG=bP.ValueAndForever(dy);dH=bP.ValueAndForever(dz);dG!=null&&dG.$==1?dH!=null&&dH.$==1?dG.$0[1]&&dH.$0[1]?bP.MarkForever(dC,dx(dG.$0[0],dH.$0[0])):bP.MarkReady(dC,dx(dG.$0[0],dH.$0[0])):void 0:void 0;}}dA=dy.s;dB=dz.s;return dA!=null&&dA.$==0?dB!=null&&dB.$==0?bP.New({$:0,$0:dx(dA.$0,dB.$0)}):bP.Map2Opt1(dx,dA.$0,dz):dB!=null&&dB.$==0?bP.Map2Opt2(dx,dB.$0,dy):(dC=bP.New({$:3,$0:[],$1:[]}),(bP.When(dy,dD,dC),bP.When(dz,dD,dC),dC));};bP.WhenRun=function(dx,dy,dz){var dA;dA=dx.s;dA==null?dz():dA!=null&&dA.$==2?(dA.$1.push(dz),dy(dA.$0)):dA!=null&&dA.$==3?(dA.$0.push(dy),dA.$1.push(dz)):dy(dA.$0);};bP.WhenObsoleteRun=function(dx,dy){var dz;dz=dx.s;dz==null?dy():dz!=null&&dz.$==2?dz.$1.push(dy):dz!=null&&dz.$==3?dz.$1.push(dy):void 0;};bP.When=function(dx,dy,dz){var dA;dA=dx.s;dA==null?bP.Obsolete(dz):dA!=null&&dA.$==2?(bP.EnqueueSafe(dA.$1,dz),dy(dA.$0)):dA!=null&&dA.$==3?(dA.$0.push(dy),bP.EnqueueSafe(dA.$1,dz)):dy(dA.$0);};bP.MarkDone=function(dx,dy,dz){var dA;if(dA=dy.s,dA!=null&&dA.$==0)bP.MarkForever(dx,dz);else bP.MarkReady(dx,dz);};bP.Join=function(dx){var dy;dy=bP.New({$:3,$0:[],$1:[]});bP.When(dx,function(dz){var dA;dA=dz();bP.When(dA,function(dB){var dC,dD;if((dC=dA.s,dC!=null&&dC.$==0)&&(dD=dx.s,dD!=null&&dD.$==0))bP.MarkForever(dy,dB);else bP.MarkReady(dy,dB);},dy);},dy);return dy;};bP.Map2Opt1=function(dx,dy,dz){return bP.Map(function(dA){return dx(dy,dA);},dz);};bP.Map2Opt2=function(dx,dy,dz){return bP.Map(function(dA){return dx(dA,dy);},dz);};bP.ValueAndForever=function(dx){var dy;dy=dx.s;return dy!=null&&dy.$==0?{$:1,$0:[dy.$0,true]}:dy!=null&&dy.$==2?{$:1,$0:[dy.$0,false]}:null;};bP.MarkForever=function(dx,dy){var dz,dA,dB,dC;dz=dx.s;if(dz!=null&&dz.$==3){dx.s={$:0,$0:dy};dA=dz.$0;for(dB=0,dC=_2.length(dA)-1;dB<=dC;dB++)(_2.get(dA,dB))(dy);}else void 0;};bP.MarkReady=function(dx,dy){var dz,dA,dB,dC;dz=dx.s;if(dz!=null&&dz.$==3){dx.s={$:2,$0:dy,$1:dz.$1};dA=dz.$0;for(dB=0,dC=_2.length(dA)-1;dB<=dC;dB++)(_2.get(dA,dB))(dy);}else void 0;};bP.MapAsync=function(dx,dy){var dz;dz=bP.New({$:3,$0:[],$1:[]});bP.When(dy,function(dA){cq.StartTo(dx(dA),function(dB){bP.MarkDone(dz,dy,dB);});},dz);return dz;};bP.EnqueueSafe=function(dx,dy){var dz,dA,dB,dC;dx.push(dy);if(dx.length%20===0){dz=dx.slice(0);c$.Clear(dx);for(dA=0,dB=_2.length(dz)-1;dA<=dB;dA++){dC=_2.get(dz,dA);typeof dC=="object"?function(dD){if(dD.s)dx.push(dD);}(dC):function(dD){dx.push(dD);}(dC);}}else void 0;};bP.TryGet=function(dx){var dy,dz;dy=dx.s;return(dy!=null&&dy.$==0?(dz=dy.$0,true):dy!=null&&dy.$==2&&(dz=dy.$0,true))?{$:1,$0:dz}:null;};bP.Map2Unit=function(dx,dy){var dz,dA,dB;function dC(){var dD,dE,dF;if(!(dD=dB.s,dD!=null&&dD.$==0||dD!=null&&dD.$==2)){dE=bP.ValueAndForever(dx);dF=bP.ValueAndForever(dy);dE!=null&&dE.$==1?dF!=null&&dF.$==1?dE.$0[1]&&dF.$0[1]?bP.MarkForever(dB,null):bP.MarkReady(dB,null):void 0:void 0;}}dz=dx.s;dA=dy.s;return dz!=null&&dz.$==0?dA!=null&&dA.$==0?bP.New({$:0,$0:null}):dy:dA!=null&&dA.$==0?dx:(dB=bP.New({$:3,$0:[],$1:[]}),(bP.When(dx,dC,dB),bP.When(dy,dC,dB),dB));};bP.Sequence=function(dx){var dy,dz,dA;function dB(dC){var dD;if(dA[0]===0){dD=_2.map(function(dE){var dF;dF=dE.s;return dF!=null&&dF.$==0?dF.$0:dF!=null&&dF.$==2?dF.$0:N.FailWith("value not found by View.Sequence");},dy);_2.forall(function(dE){var dF;dF=dE.s;return dF!=null&&dF.$==0;},dy)?bP.MarkForever(dz,dD):bP.MarkReady(dz,dD);}else dA[0]--;}dy=_2.ofSeq(dx);return dy.length==0?bP.New({$:0,$0:[]}):(dz=bP.New({$:3,$0:[],$1:[]}),(dA=[_2.length(dy)-1],(_2.iter(function(dC){bP.When(dC,dB,dz);},dy),dz)));};bP.Copy=function(dx){var dy,dz,dA;dy=dx.s;return dy==null?dx:dy!=null&&dy.$==2?(dz=bP.New({$:2,$0:dy.$0,$1:[]}),(bP.WhenObsolete(dx,dz),dz)):dy!=null&&dy.$==3?(dA=bP.New({$:3,$0:[],$1:[]}),(bP.When(dx,function(dB){bP.MarkDone(dA,dx,dB);},dA),dA)):dx;};bP.WhenObsolete=function(dx,dy){var dz;dz=dx.s;dz==null?bP.Obsolete(dy):dz!=null&&dz.$==2?bP.EnqueueSafe(dz.$1,dy):dz!=null&&dz.$==3?bP.EnqueueSafe(dz.$1,dy):void 0;};bP.Map3=function(dx,dy,dz,dA){var dB,dC,dD,dE;function dF(dG){var dH,dI,dJ,dK;if(!(dH=dE.s,dH!=null&&dH.$==0||dH!=null&&dH.$==2)){dI=bP.ValueAndForever(dy);dJ=bP.ValueAndForever(dz);dK=bP.ValueAndForever(dA);dI!=null&&dI.$==1?dJ!=null&&dJ.$==1?dK!=null&&dK.$==1?dI.$0[1]&&dJ.$0[1]&&dK.$0[1]?bP.MarkForever(dE,dx(dI.$0[0],dJ.$0[0],dK.$0[0])):bP.MarkReady(dE,dx(dI.$0[0],dJ.$0[0],dK.$0[0])):void 0:void 0:void 0;}}dB=dy.s;dC=dz.s;dD=dA.s;return dB!=null&&dB.$==0?dC!=null&&dC.$==0?dD!=null&&dD.$==0?bP.New({$:0,$0:dx(dB.$0,dC.$0,dD.$0)}):bP.Map3Opt1(dx,dB.$0,dC.$0,dA):dD!=null&&dD.$==0?bP.Map3Opt2(dx,dB.$0,dD.$0,dz):bP.Map3Opt3(dx,dB.$0,dz,dA):dC!=null&&dC.$==0?dD!=null&&dD.$==0?bP.Map3Opt4(dx,dC.$0,dD.$0,dy):bP.Map3Opt5(dx,dC.$0,dy,dA):dD!=null&&dD.$==0?bP.Map3Opt6(dx,dD.$0,dy,dz):(dE=bP.New({$:3,$0:[],$1:[]}),(bP.When(dy,dF,dE),bP.When(dz,dF,dE),bP.When(dA,dF,dE),dE));};bP.Map3Opt1=function(dx,dy,dz,dA){return bP.Map(function(dB){return dx(dy,dz,dB);},dA);};bP.Map3Opt2=function(dx,dy,dz,dA){return bP.Map(function(dB){return dx(dy,dB,dz);},dA);};bP.Map3Opt3=function(dx,dy,dz,dA){return bP.Map2(function(dB,dC){return dx(dy,dB,dC);},dz,dA);};bP.Map3Opt4=function(dx,dy,dz,dA){return bP.Map(function(dB){return dx(dB,dy,dz);},dA);};bP.Map3Opt5=function(dx,dy,dz,dA){return bP.Map2(function(dB,dC){return dx(dB,dy,dC);},dz,dA);};bP.Map3Opt6=function(dx,dy,dz,dA){return bP.Map2(function(dB,dC){return dx(dB,dC,dy);},dz,dA);};bR=bQ.Builder=dq.Class({},m,bR);bR.New=dq.Ctor(function(){m.New.call(this);},bR);bQ.result=function(){P.$cctor();return P.result;};bS=bQ.BuilderP=dq.Class({},m,bS);bS.New=dq.Ctor(function(){m.New.call(this);},bS);bT=bN.DependBuilder=dq.Class({Delay:function(dx){return dx();},Bind:function(dx,dy){return bN.bind(dy,dx);},Return:function(dx){return bN.rtn(dx);}},m,bT);bT.New=dq.Ctor(function(){m.New.call(this);},bT);bV=bU.Builder=dq.Class({},m,bV);bV.New=dq.Ctor(function(){m.New.call(this);},bV);_9.tryParseWith$1=function(dx){function dy(dz,dA){return dz?{$:1,$0:dA}:null;}return function(dz){return dy.apply(null,dx(dz));};};_9.parseDateO$1=function(){P.$cctor();return P.parseDateO;};_9.parseIntO$1=function(){P.$cctor();return P.parseIntO;};_9.parseInt64O$1=function(){P.$cctor();return P.parseInt64O;};_9.parseSingleO$1=function(){P.$cctor();return P.parseSingleO;};_9.parseDoubleO$1=function(){P.$cctor();return P.parseDoubleO;};_9.parseGuidO$1=function(){P.$cctor();return P.parseGuidO;};J.TryParseInt64=function(dx,dy){return J.TryParse(dx,-9223372036854775808,9223372036854775807,dy);};bW.toJsonString=function(dx){return _2.ofSeq(_5.delay(function(){return _5.append(["\""],_5.delay(function(){return _5.append(!cb.IsNullOrEmpty(dx)?_5.collect(function(dy){var dz,dA;dz=dx[dy];dA=dz.charCodeAt();return dA>=0&&dA<=7||dA===11||dA>=14&&dA<=31?(function(dB){return function(dC){return dB("\\u"+_.padNumLeft(dC.toString(16),4));};}(a.id))(dA):dz==="\u0008"?"\\b":dz==="\u0009"?"\\t":dz==="\n"?"\\n":dz==="\u000c"?"\\f":dz==="\r"?"\\r":dz==="\""?"\\\"":dz==="\\"?"\\\\":[dz];},N.range(0,dx.length-1)):[],_5.delay(function(){return["\""];}));}));})).join("");};bW.serString=function(){P.$cctor();return P.serString;};bW.mapO=function(dx,dy,dz,dA){function dB(dC){return dC==null?null:dy(dC.$0);}return[function(dC){return dz(dx(dC));},function(dC){return dB(dA(dC));}];};bW.serField=function(dx,dy,dz,dA,dB){var dC;function dD(dE){return{$:1,$0:dE};}return[dx,(dC=function(dE){return dA(dy(dE));},function(dE){return dD(dC(dE));}),function(dE){var dF,dG,dH;function dI(dK){return dz(dK,dE);}function dJ(dK){return dK==null?dE:dK.$0;}dF=(dG=(dH=function(dK){return dK==null?null:{$:1,$0:dI(dK.$0)};},function(dK){return dH(dB(dK));}),function(dK){return dK==null?null:dG(dK.$0);});return function(dK){return dJ(dF(dK));};}];};bW.serOpt=function(dx,dy){var dz,dA,dB;function dC(dD){return dD==null?"null":dD.$0;}dz=[dx,dy];return[(dA=(dB=dz[0],function(dD){return dD==null?null:{$:1,$0:dB(dD.$0)};}),function(dD){return dC(dA(dD));}),function(dD){return{$:1,$0:dD.isNull()?null:dz[1](dD)};}];};bW.serSet=function(dx,dy){var dz,dA,dB;dz=[dx,dy];return[(dA=(dB=dz[0],function(dC){return new ci.New$1(cn.OfSeq(_5.map(dB,dC)));}),function(dC){return bW.sprintA(dA(dC));}),function(dC){var dD,dE,dF,dG;dD=(dE=dC.tryArray(),(dF=(dG=dz[1],function(dH){return _2.choose(dG,dH);}),dE==null?null:{$:1,$0:dF(dE.$0)}));return dD==null?null:{$:1,$0:new ci.New(dD.$0)};}];};bW.serDup=function(dx,dy){return[function(dz){return(((dq.Curried3(function(dA,dB,dC){return dA("["+_.toSafe(dB)+", "+_.toSafe(dC)+"]");}))(a.id))(dx[0](dz[0])))(dy[0](dz[1]));},function(dz){var dA,dB,dC,dD,dE,dF;dA=dz.tryArray();return dA!=null&&dA.$==1&&((dC=dA.$0,!O.Equals(dC,null)&&dC.length===2)&&(dB=[_2.get(dA.$0,0),_2.get(dA.$0,1)],true))?(dD=dx[1](dB[0]),(dE=dy[1](dB[1]),dD!=null&&dD.$==1&&(dE!=null&&dE.$==1&&(dF=[dD.$0,dE.$0],true))?{$:1,$0:[dF[0],dF[1]]}:null)):null;}];};bW.serArr=function(dx,dy){var dz,dA,dB;dz=[dx,dy];return[(dA=(dB=dz[0],function(dC){return _2.map(dB,dC);}),function(dC){return bW.sprintA(dA(dC));}),function(dC){var dD,dE,dF;dD=dC.tryArray();dE=(dF=dz[1],function(dG){return _2.choose(dF,dG);});return dD==null?null:{$:1,$0:dE(dD.$0)};}];};bW.serInt=function(){P.$cctor();return P.serInt;};bW.serFieldO=function(dx,dy,dz,dA,dB){function dC(dD){return dD==null?null:{$:1,$0:dA(dD.$0)};}return[dx,function(dD){return dC(dy(dD));},function(dD){var dE,dF;function dG(dI){return dz(dI,dD);}function dH(dI){return dI==null?dD:dI.$0;}dE=(dF=function(dI){return dG(dB(dI));},function(dI){return dI==null?null:{$:1,$0:dF(dI.$0)};});return function(dI){return dH(dE(dI));};}];};bW.serDate=function(){P.$cctor();return P.serDate;};bW.sprintA=function(dx){var dy;dy=cb.concat(", ",dx);return(function(dz){return function(dA){return dz("["+_.toSafe(dA)+"]");};}(a.id))(dy);};bX.New=function(dx,dy,dz,dA,dB,dC,dD,dE,dF){return{tryFloat:dx,tryInt:dy,tryString:dz,tryBool:dA,tryArray:dB,tryField:dC,isObject:dD,isNull:dE,toString:dF};};bY.New=function(dx,dy,dz){return bw.New(bM.Tag$4(br.NewGuid()),dx,dy,dz,new ci.New$1(null),[],bY.getNextModified());};bY.allPredecessors=function(dx,dy){var dz;dz=new ci.New(X.toArray(dy.snpParentIdO));return function(dA,dB,dC){var dD,dE,dF,dG,dH,dI,dJ,dK;while(true)if(dC.get_IsEmpty())return dA;else{dD=_5.head(dC);dE=dC.Remove(dD);dF=dB.Add(dD);dG=dx(dD);if(dG!=null&&dG.$==1){dH=dG.$0;dI=ci.op_Addition(new ci.New(X.toArray(dH.snpParentIdO)),new ci.New(dH.snpPredIds));dJ=dA.Add(dH);dK=ci.op_Addition(dE,ci.op_Subtraction(dI,dF));dA=dJ;dB=dF;dC=dK;}else{dB=dF;dC=dE;}}}(new ci.New$1(null),(new ci.New$1(null)).Add(dy.snpId),ci.op_Addition(dz,new ci.New(dy.snpPredIds)));};bY.indirectPredecessorIds=function(dx,dy,dz,dA){var dB;dB=new ci.New(X.toArray(dz));return function(dC,dD,dE){var dF,dG,dH,dI,dJ,dK,dL,dM;while(true)if(dE.get_IsEmpty())return dC;else{dF=_5.head(dE);dG=dE.Remove(dF);dH=dD.Add(dF);dI=dx(dF);if(dI!=null&&dI.$==1){dJ=dI.$0;dK=ci.op_Addition(new ci.New(X.toArray(dJ.snpParentIdO)),new ci.New(dJ.snpPredIds));dL=ci.op_Addition(dC,dK);dM=ci.op_Addition(dG,ci.op_Subtraction(dK,dH));dC=dL;dD=dH;dE=dM;}else{dD=dH;dE=dG;}}}(dB,(new ci.New$1(null)).Add(dy),ci.op_Addition(dB,dA));};bY.defaultSnippet=function(){P.$cctor();return P.defaultSnippet;};bY.getNextModified=function(){return dv.now();};b1.Delay=function(dx){return function(dy){try{(dx(null))(dy);}catch(dz){dy.k({$:1,$0:dz});}};};b1.Bind=function(dx,dy){return b1.checkCancel(function(dz){dx(cr.New(function(dA){var dB;if(dA.$==0){dB=dA.$0;b1.scheduler().Fork(function(){try{(dy(dB))(dz);}catch(dC){dz.k({$:1,$0:dC});}});}else b1.scheduler().Fork(function(){dz.k(dA);});},dz.ct));});};b1.Return=function(dx){return function(dy){dy.k({$:0,$0:dx});};};b1.FromContinuations=function(dx){return function(dy){var dz;function dA(dB){if(dz[0])N.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{dz[0]=true;b1.scheduler().Fork(dB);}}dz=[false];dx(function(dB){dA(function(){dy.k({$:0,$0:dB});});},function(dB){dA(function(){dy.k({$:1,$0:dB});});},function(dB){dA(function(){dy.k({$:2,$0:dB});});});};};b1.checkCancel=function(dx){return function(dy){if(dy.ct.c)b1.cancel(dy);else dx(dy);};};b1.While=function(dx,dy){return dx()?b1.Bind(dy,function(){return b1.While(dx,dy);}):b1.Return();};b1.Sleep=function(dx){return function(dy){var dz,dA;dz=void 0;dA=void 0;dz=a.setTimeout(function(){dA.Dispose();b1.scheduler().Fork(function(){dy.k({$:0,$0:null});});},dx);dA=b1.Register(dy.ct,function(){a.clearTimeout(dz);b1.scheduler().Fork(function(){b1.cancel(dy);});});};};b1.Zero=function(){cJ.$cctor();return cJ.Zero;};b1.Start=function(dx,dy){var dz,dA;dz=(dA=(b1.defCTS())[0],dy==null?dA:dy.$0);b1.scheduler().Fork(function(){if(!dz.c)dx(cr.New(function(dB){if(dB.$==1)b1.UncaughtAsyncError(dB.$0);},dz));});};b1.StartWithContinuations=function(dx,dy,dz,dA,dB){var dC,dD;dC=(dD=(b1.defCTS())[0],dB==null?dD:dB.$0);!dC.c?dx(cr.New(function(dE){if(dE.$==1)dz(dE.$0);else if(dE.$==2)dA(dE.$0);else dy(dE.$0);},dC)):void 0;};b1.cancel=function(dx){dx.k({$:2,$0:new cV.New(dx.ct)});};b1.scheduler=function(){cJ.$cctor();return cJ.scheduler;};b1.Register=function(dx,dy){var dz;return dx===b1.noneCT()?{Dispose:function(){return null;}}:(dz=dx.r.push(dy)-1,{Dispose:function(){return _2.set(dx.r,dz,a.ignore);}});};b1.defCTS=function(){cJ.$cctor();return cJ.defCTS;};b1.UncaughtAsyncError=function(dx){dr.log("WebSharper: Uncaught asynchronous exception",dx);};b1.TryWith=function(dx,dy){return function(dz){dx(cr.New(function(dA){if(dA.$==0)dz.k({$:0,$0:dA.$0});else if(dA.$==1)try{(dy(dA.$0))(dz);}catch(dB){dz.k(dA);}else dz.k(dA);},dz.ct));};};b1.noneCT=function(){cJ.$cctor();return cJ.noneCT;};b2=K.AttrProxy=dq.Class({},null,b2);b2.OnAfterRenderImpl=function(dx){return new b2({$:4,$0:dx});};b2.Create=function(dx,dy){return cs.Static(function(dz){ct.SetAttr(dz,dx,dy);});};b2.Concat=function(dx){var dy;dy=ce.ofSeqNonCopying(dx);return ce.TreeReduce(cs.EmptyAttr(),b2.Append,dy);};b2.Append=function(dx,dy){return cs.AppendTree(dx,dy);};b2.HandlerImpl=function(dx,dy){return cs.Static(function(dz){dz.addEventListener(dx,function(dA){return(dy(dz))(dA);},false);});};b2.Handler=function(dx,dy){return b2.HandlerImpl(dx,dy);};b3=K.ConcreteVar=dq.Class({get_View:function(){return this.view;},Set:function(dx){if(this.isConst)(function(dy){return dy("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(dy){dr.log(dy);}));else{bP.Obsolete(this.snap);this.current=dx;this.snap=bP.New({$:2,$0:dx,$1:[]});}},Get:function(){return this.current;},Update:function(dx){this.Set(dx(this.Get()));},UpdateMaybe:function(dx){var dy;dy=dx(this.Get());dy!=null&&dy.$==1?this.Set(dy.$0):void 0;}},L,b3);b3.New=dq.Ctor(function(dx,dy,dz){var dA;dA=this;L.New.call(this);this.isConst=dx;this.current=dz;this.snap=dy;this.view=function(){return dA.snap;};this.id=b5.Int();},b3);b5.Id=function(){b5.set_counter(b5.counter()+1);return"uid"+a.String(b5.counter());};b5.Int=function(){b5.set_counter(b5.counter()+1);return b5.counter();};b5.set_counter=function(dx){cL.$cctor();cL.counter=dx;};b5.counter=function(){cL.$cctor();return cL.counter;};_0.rtn=function(dx){return b1.Return(T.OkM$1(dx));};_0.bind=function(dx,dy){var dz;dz=null;return b1.Delay(function(){return b1.TryWith(b1.Delay(function(){return b1.Bind(dy,function(dA){var dB,dC;function dD(dF){return bU.addMsg(dC,dF);}function dE(dF){return b1.Return(dF);}dB=T.OkM(dA);return dB.$==1?b1.Return(T.ErrorM(dB.$0)):(dC=dB.$0[1],b1.Bind(dx(dB.$0[0]),function(dF){return dE(dD(dF));}));});}),function(dA){return b1.Return(T.ErrorM(new b7({$:5,$0:dA.message,$1:dA.stack})));});});};T.OkM$1=function(dx){return{$:0,$0:{$:1,$0:dx},$1:b7.NoMsg};};T.OkM=function(dx){return dx.$0==null?{$:1,$0:dx.$1}:{$:0,$0:[dx.$0.$0,dx.$1]};};T.ErrorM=function(dx){return{$:0,$0:null,$1:dx};};b7.summarized=function(dx){return b7.summarizedF(function(){return[1,0,0];},dx);};b7.summarizedF=function(dx,dy){return cb.concat("\n",_5.filter(function(dz){return""!==dz;},bo.ofArray([a.String(dy),b7.summaryF(dx,dy)])));};b7.addMsg=function(dx,dy){return dx.$==0?dy:dx.$==6?dy.$==0?dx:dy.$==6?new b7({$:6,$0:dx.$0.concat(dy.$0)}):new b7({$:6,$0:dx.$0.concat([dy])}):dy.$==0?dx:dy.$==6?new b7({$:6,$0:[dx].concat(dy.$0)}):new b7({$:6,$0:[dx,dy]});};b7.summaryF=function(dx,dy){var dz,dA;dA=b7.countF(dx,dy);switch(dA[0]===0?dA[1]===0?0:dA[1]===1?dA[2]===0?0:(dz=dA[1],2):(dz=dA[1],2):dA[0]===1?dA[1]===0?dA[2]===0?0:(dz=dA[0],1):(dz=[dA[0],dA[1]],3):dA[1]===0?(dz=dA[0],1):(dz=[dA[0],dA[1]],3)){case 0:return"";case 1:return(function(dB){return function(dC){return dB("Errors   : "+a.String(dC)+"\n");};}(a.id))(dz);case 2:return(function(dB){return function(dC){return dB("Warnings : "+a.String(dC)+"\n");};}(a.id))(dz);case 3:return(((dq.Curried3(function(dB,dC,dD){return dB("Errors   : "+a.String(dC)+", Warnings: "+a.String(dD)+"\n");}))(a.id))(dz[0]))(dz[1]);}};b7.countF=function(dx,dy){function dz(dA,dB,dC){return function(dD){return[dA+dD[0],dB+dD[1],dC+dD[2]];};}return dy.$==0?[0,0,0]:dy.$==3?[0,0,1]:dy.$==2?[0,1,0]:dy.$==4?dx(dy.$0):dy.$==6?_5.fold(function(dA,dB){return(function(dC){return dz(dC[0],dC[1],dC[2]);}(dA))(dB);},[0,0,0],_5.map(function(dA){return b7.countF(dx,dA);},b7.exclnoMsg(dy.$0))):[1,0,0];};b7.exclnoMsg=function(dx){function dy(dz){return!dz;}return _5.filter(function(dz){return dy(b7.noMsg(dz));},dx);};b7.noMsg=function(dx){return dx.$==0;};b8.Get=function(dx){return dx instanceof a.Array?b8.ArrayEnumerator(dx):O.Equals(typeof dx,"string")?b8.StringEnumerator(dx):dx.GetEnumerator();};b8.ArrayEnumerator=function(dx){return new b9.New(0,null,function(dy){var dz;dz=dy.s;return dz<_2.length(dx)&&(dy.c=_2.get(dx,dz),dy.s=dz+1,true);},void 0);};b8.StringEnumerator=function(dx){return new b9.New(0,null,function(dy){var dz;dz=dy.s;return dz<dx.length&&(dy.c=dx[dz],dy.s=dz+1,true);},void 0);};b8.Get0=function(dx){return dx instanceof a.Array?b8.ArrayEnumerator(dx):O.Equals(typeof dx,"string")?b8.StringEnumerator(dx):"GetEnumerator0"in dx?dx.GetEnumerator0():dx.GetEnumerator();};b9=b8.T=dq.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},m,b9);b9.New=dq.Ctor(function(dx,dy,dz,dA){m.New.call(this);this.s=dx;this.c=dy;this.n=dz;this.d=dA;},b9);b_.DynamicPred=function(dx,dy,dz){function dA(dB,dC){return dC[0]?ct.SetAttr(dB,dx,dC[1]):ct.RemoveAttr(dB,dx);}return cs.Dynamic(M.Map2(function(dB,dC){return[dB,dC];},dy,dz),function(dB){return function(dC){return dA(dB,dC);};});};b_.Value=function(dx){function dy(dz){return{$:1,$0:dz};}return b_.CustomValue(dx,a.id,function(dz){return dy(a.id(dz));});};b_.Style=function(dx,dy){return cs.Static(function(dz){ct.SetStyle(dz,dx,dy);});};b_.CustomValue=function(dx,dy,dz){return b_.CustomVar(dx,function(dA,dB){dA.value=dy(dB);},function(dA){return dz(dA.value);});};b_.Dynamic=function(dx,dy){return cs.Dynamic(dy,function(dz){return function(dA){return ct.SetAttr(dz,dx,dA);};});};b_.Handler=function(dx,dy){return cs.Static(function(dz){dz.addEventListener(dx,function(dA){return(dy(dz))(dA);},false);});};b_.DynamicStyle=function(dx,dy){return cs.Dynamic(dy,function(dz){return function(dA){return ct.SetStyle(dz,dx,dA);};});};b_.CustomVar=function(dx,dy,dz){function dA(dC,dD){return dx.UpdateMaybe(function(dE){var dF,dG;dF=dz(dC);return dF!=null&&dF.$==1&&(!O.Equals(dF.$0,dE)&&(dG=[dF,dF.$0],true))?dG[0]:null;});}function dB(dC,dD){var dE,dF;dE=dz(dC);return dE!=null&&dE.$==1&&(O.Equals(dE.$0,dD)&&(dF=dE.$0,true))?null:dy(dC,dD);}return b2.Concat([b_.Handler("change",function(dC){return function(dD){return dA(dC,dD);};}),b_.Handler("input",function(dC){return function(dD){return dA(dC,dD);};}),b_.Handler("keypress",function(dC){return function(dD){return dA(dC,dD);};}),b_.DynamicCustom(function(dC){return function(dD){return dB(dC,dD);};},dx.get_View())]);};b_.DynamicCustom=function(dx,dy){return cs.Dynamic(dy,dx);};b_.OnAfterRender=function(dx){return new b2({$:4,$0:dx});};b_.Checked=function(dx){function dy(dz,dA){return!O.Equals(dx.Get(),dz.checked)?dx.Set(dz.checked):null;}return b2.Concat([b_.DynamicProp("checked",dx.get_View()),b_.Handler("change",function(dz){return function(dA){return dy(dz,dA);};})]);};b_.IntValue=function(dx){return b_.CustomVar(dx,function(dy,dz){var dA;dA=dz.get_Input();return dy.value!==dA?void(dy.value=dA):null;},function(dy){var dz,dA,dB;dz=dy.value;return{$:1,$0:dh.isBlank(dz)?(dy.checkValidity?dy.checkValidity():true)?new cG({$:2,$0:dz}):new cG({$:1,$0:dz}):(dA=(dB=0,[J.TryParseInt32(dz,{get:function(){return dB;},set:function(dC){dB=dC;}}),dB]),dA[0]?new cG({$:0,$0:dA[1],$1:dz}):new cG({$:1,$0:dz}))};});};b_.IntValueUnchecked=function(dx){return b_.CustomValue(dx,a.String,function(dy){var dz;return dh.isBlank(dy)?{$:1,$0:0}:(dz=+dy,dz!==dz>>0?null:{$:1,$0:dz});});};b_.FloatValue=function(dx){return b_.CustomVar(dx,function(dy,dz){var dA;dA=dz.get_Input();return dy.value!==dA?void(dy.value=dA):null;},function(dy){var dz,dA;dz=dy.value;return{$:1,$0:dh.isBlank(dz)?(dy.checkValidity?dy.checkValidity():true)?new cG({$:2,$0:dz}):new cG({$:1,$0:dz}):(dA=+dz,a.isNaN(dA)?new cG({$:1,$0:dz}):new cG({$:0,$0:dA,$1:dz}))};});};b_.FloatValueUnchecked=function(dx){return b_.CustomValue(dx,a.String,function(dy){var dz;return dh.isBlank(dy)?{$:1,$0:0}:(dz=+dy,a.isNaN(dz)?null:{$:1,$0:dz});});};b_.DynamicProp=function(dx,dy){return cs.Dynamic(dy,function(dz){return function(dA){dz[dx]=dA;};});};b$=K.FromView=dq.Class({get_View:function(){return this.view;},Set:function(dx){this.set(dx);},Get:function(){return this.current;},Update:function(dx){var dy;M.Get((dy=this.set,function(dz){return dy(dx(dz));}),this.view);},UpdateMaybe:function(dx){var dy;dy=this;M.Get(function(dz){var dA;dA=dx(dz);dA!=null&&dA.$==1?dy.set(dA.$0):void 0;},this.view);}},L,b$);b$.New=dq.Ctor(function(dx,dy){var dz,dA;dz=this;L.New.call(this);this.set=dy;this.id=b5.Int();this.current=(dA=M.TryGet(dx),dA==null?null:dA.$0);this.view=M.Map(function(dB){dz.current=dB;return dB;},dx);},b$);ca.$cctor=function(){var dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5;ca.$cctor=a.ignore;function d6(eE){return cb.concat("\n",eE);}function d7(eE){return cu.splitByChar("\n",eE);}function d8(eE){var eF,eG;return bu.array(eE,{$:1,$0:0},{$:1,$0:(eF=0,(eG=_2.length(eE)-2,O.Compare(eF,eG)===1?eF:eG))});}function d9(eE){return cb.concat("\n",eE);}function d_(eE){return eE+"T00:00:00";}function d$(eE){var eF;function eG(eI){return ba.plugIns().TryFindByKey(eI);}function eH(eI){var eJ;eJ=ba.defaultPlugIn();return eI==null?eJ:eI.$0;}eF=function(eI){return eI==null?null:eG(eI.$0);};return function(eI){return eH(eF(eI));};}function ea(eE){var eF;eF=null;return dB.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function eb(eE,eF){dB.set_Item(eE,eF);return eF;}function ec(eE,eF){var eG;eG=ea(eE);return eG==null?eb(eE,eF(eE)):eG.$0;}function ed(eE){var eF;eF=null;return dE.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function ee(eE,eF){dE.set_Item(eE,eF);return eF;}function ef(eE,eF){var eG;eG=ed(eE);return eG==null?ee(eE,eF(eE)):eG.$0;}function eg(eE){var eF;eF=null;return dH.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function eh(eE,eF){dH.set_Item(eE,eF);return eF;}function ei(eE,eF){var eG;eG=eg(eE);return eG==null?eh(eE,eF(eE)):eG.$0;}function ej(eE){var eF;eF=null;return dK.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function ek(eE,eF){dK.set_Item(eE,eF);return eF;}function el(eE,eF){var eG;eG=ej(eE);return eG==null?ek(eE,eF(eE)):eG.$0;}function em(eE){var eF;eF=null;return dN.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function en(eE,eF){dN.set_Item(eE,eF);return eF;}function eo(eE,eF){var eG;eG=em(eE);return eG==null?en(eE,eF(eE)):eG.$0;}function ep(eE){var eF;eF=null;return dQ.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function eq(eE,eF){dQ.set_Item(eE,eF);return eF;}function er(eE,eF){var eG;eG=ep(eE);return eG==null?eq(eE,eF(eE)):eG.$0;}function es(eE){var eF;eF=null;return dT.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function et(eE,eF){dT.set_Item(eE,eF);return eF;}function eu(eE,eF){var eG;eG=es(eE);return eG==null?et(eE,eF(eE)):eG.$0;}function ev(eE){var eF;eF=null;return dW.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function ew(eE,eF){dW.set_Item(eE,eF);return eF;}function ex(eE,eF){var eG;eG=ev(eE);return eG==null?ew(eE,eF(eE)):eG.$0;}function ey(eE){var eF;eF=null;return dZ.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function ez(eE,eF){dZ.set_Item(eE,eF);return eF;}function eA(eE,eF){var eG;eG=ey(eE);return eG==null?ez(eE,eF(eE)):eG.$0;}function eB(eE){var eF;eF=null;return d2.TryGetValue(eE,{get:function(){return eF;},set:function(eG){eF=eG;}})?{$:1,$0:eF}:null;}function eC(eE,eF){d2.set_Item(eE,eF);return eF;}function eD(eE,eF){var eG;eG=eB(eE);return eG==null?eC(eE,eF(eE)):eG.$0;}ca.unindentStr=function(eE){return d6(cu.unindent(eE));};ca.skipLastLine=(dx=function(eE){return d8(d7(eE));},function(eE){return d9(dx(eE));});ca.parseDateO2=(dy=_9.tryParseWith(function(eE){var eF,eG;eF=0;return[(eG=cm.TryParse(eE),eG!=null&&eG.$==1&&(eF=eG.$0,true)),eF];}),function(eE){return dy(d_(eE));});ca.parseDateO=_9.tryParseWith(function(eE){var eF,eG;eF=0;return[(eG=cm.TryParse(eE),eG!=null&&eG.$==1&&(eF=eG.$0,true)),eF];});ca.parseIntO=_9.tryParseWith(function(eE){var eF;eF=0;return[J.TryParseInt32(eE,{get:function(){return eF;},set:function(eG){eF=eG;}}),eF];});ca.parseInt64O=_9.tryParseWith(function(eE){var eF;eF=0;return[J.TryParseInt64(eE,{get:function(){return eF;},set:function(eG){eF=eG;}}),eF];});ca.parseSingleO=_9.tryParseWith(function(eE){var eF,eG;eF=0;return[(eG=a.Number(eE),a.isNaN(eG)?false:(eF=eG,true)),eF];});ca.parseDoubleO=_9.tryParseWith(function(eE){var eF,eG;eF=0;return[(eG=a.Number(eE),a.isNaN(eG)?false:(eF=eG,true)),eF];});ca.parseGuidO=_9.tryParseWith(function(eE){var eF;eF=null;return[br.TryParse(eE,{get:function(){return eF;},set:function(eG){eF=eG;}}),eF];});ca["|Date|_|"]=_9.parseDateO();ca["|Int|_|"]=_9.parseIntO();ca["|Int64|_|"]=_9.parseInt64O();ca["|Single|_|"]=_9.parseSingleO();ca["|Double|_|"]=_9.parseDoubleO();ca["|Guid|_|"]=_9.parseGuidO();ca.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";ca.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";ca.observers=bp.Empty;ca.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";ca.init=bc.Create(function(){var eE;eE=new cx.New();cv.defineWebComponent("wcomp-tabstrip",cx.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});ca.layoutHorizontal=dq.Curried(function(eE,eF,eG,eH,eI){return bj.get_Empty();},5);ca.layoutVertical=dq.Curried(function(eE,eF,eG,eH,eI){return bj.get_Empty();},5);ca.plugIns=new bk.New$1(function(eE){return eE.plgName;});ca.mainDocV=W.Create$1("AppFramework.AppFwkClient");ca.TemplateFileName="..\\website\\AppFramework.html";ca.defaultPlugIn=bb.New("",[],[],[],[],[]);ca.selectionPlugInO=W.Create$1({$:1,$0:"AppFramework"});ca.currentPlugInW=(dz=ba.selectionPlugInO().get_View(),M.Map2(function(eE,eF){return(d$(eE))(eF);},ba.plugIns().v,dz));ca.currentPlugInV=new b$.New(ba.currentPlugInW(),function(eE){ba.plugIns().Append(eE);});ca.AppFwkClient=bc.Create(function(){var eE,eF,eG,eH,eI,eJ,eK,eL,eM;return(eE=(eF=ba.renderQueries(),(eG=ba.renderActions(),(eH=ba.renderDocs(),(eI=ba.renderViews(),(eJ=ba.renderVars(),(eK=ba.renderPlugIns(),bB.Make().WithHole({$:0,$0:"plugins",$1:eK})).WithHole({$:2,$0:"pluginname",$1:M.Map(function(eN){return eN.plgName;},ba.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:eJ})).WithHole({$:0,$0:"views",$1:eI})).WithHole({$:0,$0:"docs",$1:eH})).WithHole({$:0,$0:"actions",$1:eG})).WithHole({$:0,$0:"queries",$1:eF})),(eL=bC.CompleteHoles(eE.k,eE.h,[]),(eM=new bA.New(eL[1],cy.appfwkclient(eL[0])),(eE.i=eM,eM)))).get_Doc();});ca.actHello=ba.newAct("Hello",function(){self.alert("Hello!");});ca.qryDocs=ba.newQry("getDocNames",function(){return _2.ofSeq(_5.collect(function(eE){return _5.map(function(eF){return eE.plgName+"."+eF.docName;},eE.plgDocs);},(ba.plugIns())["var"].Get()));});ba.plugIns().Append(bb.New("AppFramework",[ba.newVar("mainDocV",ba.mainDocV())],[],[ba.newDoc("AppFwkClient",ba.AppFwkClient())],[ba.actHello()],[ba.qryDocs()]));ca.getMainDoc=bc.Create(function(){cB.init(dq.Curried(ba.horizontal,5),dq.Curried(ba.vertical,5));cw.init().f();return ba.mainDoc();});ca.splitName=ba.splitName;ca.createSplitterM=(dA=(dB=new bt.New$5(),[[ea,function(eE){return function(eF){return ec(eE,eF);};}],function(){dB.Clear();}]),(dC=dA[0][1],[function(eE){return(dC(eE))(function(eF){return bd.createSplitter(eF[0],eF[1],eF[2],eF[3],eF[4]);});},dA[1]]))[0];ca.createButtonM=(dD=(dE=new bt.New$5(),[[ed,function(eE){return function(eF){return ef(eE,eF);};}],function(){dE.Clear();}]),(dF=dD[0][1],[function(eE){return(dF(eE))(function(eF){return bd.createButton(eF[0],eF[1],eF[2],eF[3],eF[4]);});},dD[1]]))[0];ca.createInputM=(dG=(dH=new bt.New$5(),[[eg,function(eE){return function(eF){return ei(eE,eF);};}],function(){dH.Clear();}]),(dI=dG[0][1],[function(eE){return(dI(eE))(function(eF){return bd.createInput(eF[0],eF[1],eF[2],eF[3]);});},dG[1]]))[0];ca.createTextAreaM=(dJ=(dK=new bt.New$5(),[[ej,function(eE){return function(eF){return el(eE,eF);};}],function(){dK.Clear();}]),(dL=dJ[0][1],[function(eE){return(dL(eE))(function(eF){return bd.createTextArea(eF[0],eF[1],eF[2],eF[3]);});},dJ[1]]))[0];ca.createElementM=(dM=(dN=new bt.New$5(),[[em,function(eE){return function(eF){return eo(eE,eF);};}],function(){dN.Clear();}]),(dO=dM[0][1],[function(eE){return(dO(eE))(function(eF){return bd.createElement(eF[0],eF[1],eF[2],eF[3],eF[4]);});},dM[1]]))[0];ca.createDocM=(dP=(dQ=new bt.New$5(),[[ep,function(eE){return function(eF){return er(eE,eF);};}],function(){dQ.Clear();}]),(dR=dP[0][1],[function(eE){return(dR(eE))(function(eF){return bd.createDoc(eF[0],eF[1],eF[2],eF[3]);});},dP[1]]))[0];ca.createTemplateM=(dS=(dT=new bt.New$5(),[[es,function(eE){return function(eF){return eu(eE,eF);};}],function(){dT.Clear();}]),(dU=dS[0][1],[function(eE){return(dU(eE))(function(eF){return bd.createTemplate(eF[0],eF[1],eF[2],eF[3],eF[4]);});},dS[1]]))[0];ca.createConcatM=(dV=(dW=new bt.New$5(),[[ev,function(eE){return function(eF){return ex(eE,eF);};}],function(){dW.Clear();}]),(dX=dV[0][1],[function(eE){return(dX(eE))(function(eF){return bd.createConcat(eF[0],eF[1],eF[2]);});},dV[1]]))[0];ca.createVarM=(dY=(dZ=new bt.New$5(),[[ey,function(eE){return function(eF){return eA(eE,eF);};}],function(){dZ.Clear();}]),(d0=dY[0][1],[function(eE){return(d0(eE))(function(eF){return bd.createVar(eF[0],eF[1],eF[2]);});},dY[1]]))[0];ca.createViewM=(d1=(d2=new bt.New$5(),[[eB,function(eE){return function(eF){return eD(eE,eF);};}],function(){d2.Clear();}]),(d3=d1[0][1],[function(eE){return(d3(eE))(function(eF){return bd.createView(eF[0],eF[1],eF[2],eF[3]);});},d1[1]]))[0];d4=ba.tryGetPlugIn("AppFramework");d4==null?void 0:(d5=d4.$0,ba.addPlugIn(bb.New(d5.plgName,d5.plgVars,d5.plgViews,d5.plgDocs,d5.plgActions.concat([ba.newActF("AddLayout",{$:2,$0:function(eE){return function(eF){return bd.addNewLayout(eE,eF);};},$1:"[Name]",$2:"[Layout]"})]),d5.plgQueries)));};cb.concat=function(dx,dy){return _2.ofSeq(dy).join(dx);};cb.IsNullOrEmpty=function(dx){return dx==null||dx=="";};cb.PadLeftWith=function(dx,dy,dz){return dy>dx.length?a.Array(dy-dx.length+1).join(dz)+dx:dx;};cb.SplitChars=function(dx,dy,dz){return cb.Split(dx,new a.RegExp("["+cb.RegexEscape(dy.join(""))+"]"),dz);};cb.Trim=function(dx){return dx.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};cb.StartsWith=function(dx,dy){return dx.substring(0,dy.length)==dy;};cb.Replace=function(dx,dy,dz){function dA(dB){var dC,dD,dE;dC=dB.indexOf(dy);return dC!==-1?(dD=cb.ReplaceOnce(dB,dy,dz),(dE=dC+dz.length,cb.Substring(dD,0,dC+dz.length)+dA(dD.substring(dE)))):dB;}return dA(dx);};cb.replicate=function(dx,dy){return _2.create(dx,dy).join("");};cb.Substring=function(dx,dy,dz){return dx.substr(dy,dz);};cb.Split=function(dx,dy,dz){return dz===1?_2.filter(function(dA){return dA!=="";},cb.SplitWith(dx,dy)):cb.SplitWith(dx,dy);};cb.RegexEscape=function(dx){return dx.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};cb.ReplaceOnce=function(dx,dy,dz){return dx.replace(dy,dz);};cb.SplitWith=function(dx,dy){return dx.split(dy);};cb.SplitStrings=function(dx,dy,dz){return cb.Split(dx,new a.RegExp(cb.concat("|",_2.map(cb.RegexEscape,dy))),dz);};cb.forall=function(dx,dy){return _5.forall(dx,cb.protect(dy));};cb.protect=function(dx){return dx===null?"":dx;};cd.New=function(dx,dy,dz){return{c:dx,v:dy,f:dz};};_5.tryHead=function(dx){var dy;dy=b8.Get(dx);try{return dy.MoveNext()?{$:1,$0:dy.Current()}:null;}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}};_5.tryItem=function(dx,dy){var dz,dA,dB;if(dx<0)return null;else{dz=0;dA=b8.Get(dy);try{dB=true;while(dB&&dz<=dx)if(dA.MoveNext())dz=dz+1;else dB=false;return dB?{$:1,$0:dA.Current()}:null;}finally{if(typeof dA=="object"&&"Dispose"in dA)dA.Dispose();}}};_5.contains=function(dx,dy){var dz,dA;dz=b8.Get(dy);try{dA=false;while(!dA&&dz.MoveNext())dA=O.Equals(dz.Current(),dx);return dA;}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}};_5.nonNegative=function(){return N.FailWith("The input must be non-negative.");};_5.insufficient=function(){return N.FailWith("The input sequence has an insufficient number of elements.");};_2.groupBy=function(dx,dy){var dz,dA,dB,dC,dD,dE;dz=new bt.New$5();dA=[];for(dB=0,dC=_2.length(dy)-1;dB<=dC;dB++){dD=dy[dB];dE=dx(dD);dz.ContainsKey(dE)?dz.get_Item(dE).push(dD):(dA.push(dE),dz.Add(dE,[dD]));}_2.mapInPlace(function(dF){return[dF,dz.get_Item(dF)];},dA);return dA;};_5.last=function(dx){var dy,dz;dy=b8.Get(dx);try{if(!dy.MoveNext())dz=_5.insufficient();else{while(dy.MoveNext());dz=dy.Current();}return dz;}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}};_2.mapInPlace=function(dx,dy){var dz,dA;for(dz=0,dA=dy.length-1;dz<=dA;dz++)dy[dz]=dx(dy[dz]);};_2.mapiInPlace=function(dx,dy){var dz,dA;for(dz=0,dA=dy.length-1;dz<=dA;dz++)dy[dz]=dx(dz,dy[dz]);return dy;};ce.ofSeqNonCopying=function(dx){var dy,dz;if(dx instanceof a.Array)return dx;else if(dx instanceof bp)return _2.ofList(dx);else if(dx===null)return[];else{dy=[];dz=b8.Get(dx);try{while(dz.MoveNext())dy.push(dz.Current());return dy;}finally{if(typeof dz=="object"&&"Dispose"in dz)dz.Dispose();}}};ce.TreeReduce=function(dx,dy,dz){var dA;function dB(dC,dD){var dE,dF;return dD<=0?dx:dD===1&&(dC>=0&&dC<dA)?_2.get(dz,dC):(dF=dD/2>>0,dy(dB(dC,dF),dB(dC+dF,dD-dF)));}dA=_2.length(dz);return dB(0,dA);};ce.mapInPlace=function(dx,dy){var dz,dA;for(dz=0,dA=dy.length-1;dz<=dA;dz++)dy[dz]=dx(dy[dz]);return dy;};ce.MapTreeReduce=function(dx,dy,dz,dA){var dB;function dC(dD,dE){var dF,dG;return dE<=0?dy:dE===1&&(dD>=0&&dD<dB)?dx(_2.get(dA,dD)):(dG=dE/2>>0,dz(dC(dD,dG),dC(dD+dG,dE-dG)));}dB=_2.length(dA);return dC(0,dB);};bP.Obsolete=function(dx){var dy,dz,dA,dB,dC;dz=dx.s;if(dz==null||(dz!=null&&dz.$==2?(dy=dz.$1,false):dz!=null&&dz.$==3?(dy=dz.$1,false):true))void 0;else{dx.s=null;for(dA=0,dB=_2.length(dy)-1;dA<=dB;dA++){dC=_2.get(dy,dA);typeof dC=="object"?function(dD){bP.Obsolete(dD);}(dC):dC();}}};bP.New=function(dx){return{s:dx};};cf.InMemory=function(dx){return new cE.New(dx);};cg=bs.List=dq.Class({GetEnumerator:function(){return b8.Get(this);},GetEnumerator0:function(){return b8.Get0(this);}},null,cg);ch.alreadyAdded=function(){return N.FailWith("An item with the same key has already been added.");};ch.notPresent=function(){return N.FailWith("The given key was not present in the dictionary.");};ci=bs.FSharpSet=dq.Class({Contains:function(dx){return cn.Contains(dx,this.tree);},Remove:function(dx){return new ci.New$1(cn.Remove(dx,this.tree));},Add:function(dx){return new ci.New$1(cn.Add(dx,this.tree));},GetEnumerator$1:function(){return b8.Get(cn.Enumerate(false,this.tree));},Equals:function(dx){return this.get_Count()===dx.get_Count()&&_5.forall2(O.Equals,this,dx);},get_IsEmpty:function(){return this.tree==null;},get_Count:function(){var dx;dx=this.tree;return dx==null?0:dx.Count;},GetHashCode:function(){return -1741749453+O.Hash(_2.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();},CompareTo0:function(dx){return _5.compareWith(O.Compare,this,dx);}},m,ci);ci.op_Addition=function(dx,dy){return new ci.New$1(cn.OfSeq(_5.append(dx,dy)));};ci.op_Subtraction=function(dx,dy){return bv.Filter(function(dz){return!dy.Contains(dz);},dx);};ci.New=dq.Ctor(function(dx){ci.New$1.call(this,cn.OfSeq(dx));},ci);ci.New$1=dq.Ctor(function(dx){m.New.call(this);this.tree=dx;},ci);cj=bs.HashSet=dq.Class({Add:function(dx){return this.add(dx);},Contains:function(dx){var dy;dy=this.data[this.hash(dx)];return dy==null?false:this.arrContains(dx,dy);},add:function(dx){var dy,dz;dy=this.hash(dx);dz=this.data[dy];return dz==null?(this.data[dy]=[dx],this.count=this.count+1,true):this.arrContains(dx,dz)?false:(dz.push(dx),this.count=this.count+1,true);},arrContains:function(dx,dy){var dz,dA,dB,dC;dz=true;dA=0;dC=dy.length;while(dz&&dA<dC)if(this.equals.apply(null,[dy[dA],dx]))dz=false;else dA=dA+1;return!dz;},ExceptWith:function(dx){var dy;dy=b8.Get(dx);try{while(dy.MoveNext())this.Remove(dy.Current());}finally{if(typeof dy=="object"&&"Dispose"in dy)dy.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(dx){var dy,dz,dA,dB;dy=0;dz=c4.concat(this.data);for(dA=0,dB=dz.length-1;dA<=dB;dA++)_2.set(dx,dA,dz[dA]);},IntersectWith:function(dx){var dy,dz,dA,dB,dC;dy=new cj.New$4(dx,this.equals,this.hash);dz=c4.concat(this.data);for(dA=0,dB=dz.length-1;dA<=dB;dA++){dC=dz[dA];!dy.Contains(dC)?this.Remove(dC):void 0;}},Remove:function(dx){var dy;dy=this.data[this.hash(dx)];return dy==null?false:this.arrRemove(dx,dy)&&(this.count=this.count-1,true);},arrRemove:function(dx,dy){var dz,dA,dB,dC;dz=true;dA=0;dC=dy.length;while(dz&&dA<dC)if(this.equals.apply(null,[dy[dA],dx])){dy.splice.apply(dy,[dA,1]);dz=false;}else dA=dA+1;return!dz;},GetEnumerator:function(){return b8.Get(c4.concat(this.data));},GetEnumerator0:function(){return b8.Get(c4.concat(this.data));}},m,cj);cj.New$3=dq.Ctor(function(){cj.New$4.call(this,[],O.Equals,O.Hash);},cj);cj.New$4=dq.Ctor(function(dx,dy,dz){var dA;m.New.call(this);this.equals=dy;this.hash=dz;this.data=[];this.count=0;dA=b8.Get(dx);try{while(dA.MoveNext())this.add(dA.Current());}finally{if(typeof dA=="object"&&"Dispose"in dA)dA.Dispose();}},cj);cj.New$2=dq.Ctor(function(dx){cj.New$4.call(this,dx,O.Equals,O.Hash);},cj);ck.Box=a.id;cl.cast=a.id;cm.TryParse=function(dx){var dy;dy=dv.parse(dx);return a.isNaN(dy)?null:{$:1,$0:dy};};J.TryParse=function(dx,dy,dz,dA){var dB,dC;dB=+dx;dC=dB===dB-dB%1&&dB>=dy&&dB<=dz;dC?dA.set(dB):void 0;return dC;};cn.Contains=function(dx,dy){return!((cn.Lookup(dx,dy))[0]==null);};cn.Remove=function(dx,dy){var dz,dA,dB,dC;dz=cn.Lookup(dx,dy);dA=dz[0];dB=dz[1];return dA==null?dy:dA.Right==null?cn.Rebuild(dB,dA.Left):dA.Left==null?cn.Rebuild(dB,dA.Right):cn.Rebuild(dB,(dC=_2.ofSeq(_5.append(cn.Enumerate(false,dA.Left),cn.Enumerate(false,dA.Right))),cn.Build(dC,0,dC.length-1)));};cn.Add=function(dx,dy){return cn.Put(function(dz,dA){return dA;},dx,dy);};cn.OfSeq=function(dx){var dy;dy=_2.ofSeq(_5.distinct(dx));_2.sortInPlace(dy);return cn.Build(dy,0,dy.length-1);};cn.Lookup=function(dx,dy){var dz,dA,dB,dC;dz=[];dA=dy;dB=true;while(dB)if(dA==null)dB=false;else{dC=O.Compare(dx,dA.Node);dC===0?dB=false:dC===1?(dz.unshift([true,dA.Node,dA.Left]),dA=dA.Right):(dz.unshift([false,dA.Node,dA.Right]),dA=dA.Left);}return[dA,dz];};cn.Rebuild=function(dx,dy){var dz,dB,dC,dD,dE,dF,dG,dH,dI,dJ;function dA(dK){return dK==null?0:dK.Height;}dz=dy;for(dB=0,dC=_2.length(dx)-1;dB<=dC;dB++){dz=(dD=_2.get(dx,dB),dD[0]?(dE=dD[1],(dF=dD[2],dA(dz)>dA(dF)+1?dA(dz.Left)===dA(dz.Right)+1?(dG=dz.Left,cn.Branch(dG.Node,cn.Branch(dE,dF,dG.Left),cn.Branch(dz.Node,dG.Right,dz.Right))):cn.Branch(dz.Node,cn.Branch(dE,dF,dz.Left),dz.Right):cn.Branch(dE,dF,dz))):(dH=dD[1],(dI=dD[2],dA(dz)>dA(dI)+1?dA(dz.Right)===dA(dz.Left)+1?(dJ=dz.Right,cn.Branch(dJ.Node,cn.Branch(dz.Node,dz.Left,dJ.Left),cn.Branch(dH,dJ.Right,dI))):cn.Branch(dz.Node,dz.Left,cn.Branch(dH,dz.Right,dI)):cn.Branch(dH,dz,dI))));}return dz;};cn.Put=function(dx,dy,dz){var dA,dB;dA=cn.Lookup(dy,dz);dB=dA[0];return dB==null?cn.Rebuild(dA[1],cn.Branch(dy,null,null)):cn.Rebuild(dA[1],cn.Branch(dx(dB.Node,dy),dB.Left,dB.Right));};cn.Branch=function(dx,dy,dz){var dA,dB;return cF.New(dx,dy,dz,1+(dA=dy==null?0:dy.Height,(dB=dz==null?0:dz.Height,O.Compare(dA,dB)===1?dA:dB)),1+(dy==null?0:dy.Count)+(dz==null?0:dz.Count));};cn.Enumerate=function(dx,dy){function dz(dA,dB){var dC;while(true)if(dA==null)return dB.$==1?{$:1,$0:[dB.$0[0],[dB.$0[1],dB.$1]]}:null;else if(dx){dC=dA;dA=dC.Right;dB=new bp({$:1,$0:[dC.Node,dC.Left],$1:dB});}else{dC=dA;dA=dC.Left;dB=new bp({$:1,$0:[dC.Node,dC.Right],$1:dB});}}return _5.unfold(function(dA){return dz(dA[0],dA[1]);},[dy,bp.Empty]);};cn.Build=function(dx,dy,dz){var dA,dB,dC;return dz-dy+1<=0?null:(dA=(dy+dz)/2>>0,(dB=cn.Build(dx,dy,dA-1),(dC=cn.Build(dx,dA+1,dz),cn.Branch(_2.get(dx,dA),dB,dC))));};cp.LoadLocalTemplates=function(dx){!cp.LocalTemplatesLoaded()?(cp.set_LocalTemplatesLoaded(true),cp.LoadNestedTemplates(self.document.body,"")):void 0;cp.LoadedTemplates().set_Item(dx,cp.LoadedTemplateFile(""));};cp.NamedTemplate=function(dx,dy,dz){var dA,dB;dA=(dB=null,[cp.LoadedTemplateFile(dx).TryGetValue(dy==null?"":dy.$0,{get:function(){return dB;},set:function(dC){dB=dC;}}),dB]);return dA[0]?cp.ChildrenTemplate(dA[1].cloneNode(true),dz):(dr.warn("Local template doesn't exist",dy),bj.get_Empty());};cp.LocalTemplatesLoaded=function(){cU.$cctor();return cU.LocalTemplatesLoaded;};cp.set_LocalTemplatesLoaded=function(dx){cU.$cctor();cU.LocalTemplatesLoaded=dx;};cp.LoadNestedTemplates=function(dx,dy){var dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN;function dz(dO){var dP,dQ;if(!dA.ContainsKey(dO)){dP=(dQ=null,[dB.TryGetValue(dO,{get:function(){return dQ;},set:function(dR){dQ=dR;}}),dQ]);dP[0]?(dN.Add(dO),dB.Remove(dO),cp.PrepareTemplateStrict(dy,{$:1,$0:dO},dP[1][0],{$:1,$0:dP[1][1]},{$:1,$0:dz})):dr.warn(dN.Contains(dO)?"Encountered loop when instantiating "+dO:"Local template does not exist: "+dO);}}dA=cp.LoadedTemplateFile(dy);dB=new bt.New$5();dC=dx.querySelectorAll("[ws-template]");for(dD=0,dE=dC.length-1;dD<=dE;dD++){dF=dC[dD];dG=dF.getAttribute("ws-template").toLowerCase();dF.removeAttribute("ws-template");dB.set_Item(dG,[[dF],cp.FakeRootSingle(dF)]);}dH=dx.querySelectorAll("[ws-children-template]");for(dI=0,dJ=dH.length-1;dI<=dJ;dI++){dK=dH[dI];dL=dK.getAttribute("ws-children-template").toLowerCase();dK.removeAttribute("ws-children-template");dB.set_Item(dL,(dM=ct.ChildrenArray(dK),[dM,cp.FakeRoot(dM)]));}dN=new cj.New$3();while(dB.count>0)dz(_5.head(dB.get_Keys()));};cp.LoadedTemplates=function(){cU.$cctor();return cU.LoadedTemplates;};cp.LoadedTemplateFile=function(dx){var dy,dz,dA;dy=(dz=null,[cp.LoadedTemplates().TryGetValue(dx,{get:function(){return dz;},set:function(dB){dz=dB;}}),dz]);return dy[0]?dy[1]:(dA=new bt.New$5(),(cp.LoadedTemplates().set_Item(dx,dA),dA));};cp.ChildrenTemplate=function(dx,dy){var dz,dA,dB,dC,dD;dz=cp.InlineTemplate(dx,dy);dA=dz[1];dB=dz[0];dC=dB.Els;return!O.Equals(dC,null)&&dC.length===1&&(_2.get(dC,0)instanceof bZ&&(O.Equals(_2.get(dC,0).nodeType,bZ.ELEMENT_NODE)&&(dD=_2.get(dC,0),true)))?cN.TreeNode(dB,dA):bj.Mk({$:6,$0:dB},dA);};cp.FakeRootSingle=function(dx){var dy,dz,dA;dx.removeAttribute("ws-template");dy=dx.getAttribute("ws-replace");dy===null?void 0:(dx.removeAttribute("ws-replace"),dz=dx.parentNode,O.Equals(dz,null)?void 0:(dA=self.document.createElement(dx.tagName),dA.setAttribute("ws-replace",dy),dz.replaceChild(dA,dx)));return cp.FakeRoot([dx]);};cp.FakeRoot=function(dx){var dy,dz,dA;dy=self.document.createElement("div");for(dz=0,dA=dx.length-1;dz<=dA;dz++)dy.appendChild(_2.get(dx,dz));return dy;};cp.PrepareTemplateStrict=function(dx,dy,dz,dA,dB){var dC,dD;function dE(dJ,dK){var dL,dM,dN,dO,dP,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$;function dQ(ea){}while(true)switch(dJ){case 0:if(dK!==null){dL=dK.nextSibling;if(O.Equals(dK.nodeType,bZ.TEXT_NODE))c6.convertTextNode(dK);else if(O.Equals(dK.nodeType,bZ.ELEMENT_NODE))dG(dK);dK=dL;}else return null;break;case 1:dR=bu.string(dK.nodeName,{$:1,$0:3},null).toLowerCase();dS=(dM=dR.indexOf("."),dM===-1?[dx,dR]:[bu.string(dR,null,{$:1,$0:dM-1}),bu.string(dR,{$:1,$0:dM+1},null)]);dT=dS[1];dU=dS[0];if(dU!==""&&!cp.LoadedTemplates().ContainsKey(dU))return c6.failNotLoaded(dT);else{if(dU===""&&dB!=null)dB.$0(dT);dV=cp.LoadedTemplates().get_Item(dU);if(!dV.ContainsKey(dT))return c6.failNotLoaded(dT);else{dW=dV.get_Item(dT);dX=dW.cloneNode(true);dY=new cj.New$3();dZ=new bt.New$5();d0=dK.attributes;for(d1=0,d2=d0.length-1;d1<=d2;d1++){d3=d0.item(d1).name.toLowerCase();dZ.set_Item(d3,(d4=d0.item(d1).nodeValue,d4===""?d3:d4.toLowerCase()));!dY.Add(d3)?dr.warn("Hole mapped twice",d3):void 0;}for(d5=0,d6=dK.childNodes.length-1;d5<=d6;d5++){d7=dK.childNodes[d5];O.Equals(d7.nodeType,bZ.ELEMENT_NODE)?!dY.Add(d7.nodeName.toLowerCase())?dr.warn("Hole filled twice",dT):void 0:void 0;}d8=dK.childNodes.length===1&&O.Equals(dK.firstChild.nodeType,bZ.TEXT_NODE);if(d8){dO=c6.fillTextHole(dX,dK.firstChild.textContent,dT);((function(ea){return function(eb){if(eb!=null)ea(eb.$0);};}((dP=function(ea){return function(eb){return ea.Add(eb);};}(dY),function(ea){return dQ(dP(ea));})))(dO));}c6.removeHolesExcept(dX,dY);if(!d8){for(d9=0,d_=dK.childNodes.length-1;d9<=d_;d9++){d$=dK.childNodes[d9];O.Equals(d$.nodeType,bZ.ELEMENT_NODE)?d$.hasAttributes()?c6.fillInstanceAttrs(dX,d$):dF(dX,d$):void 0;}}c6.mapHoles(dX,dZ);c6.fill(dX,dK.parentNode,dK);dK.parentNode.removeChild(dK);return;}}break;}}function dF(dJ,dK){var dL,dN,dO;function dM(dP,dQ){var dR,dS,dT;if(dN==="title"&&dK.hasChildNodes()){dR=dt.parseHTML(dK.textContent);dK.removeChild(dK.firstChild);for(dS=0,dT=dR.length-1;dS<=dT;dS++)dK.appendChild(_2.get(dR,dS));}else null;dG(dK);return c6.fill(dK,dP,dQ);}dN=dK.nodeName.toLowerCase();ct.IterSelector(dJ,"[ws-attr-holes]",function(dP){var dQ,dR,dS,dT,dU;dQ=cb.SplitChars(dP.getAttribute("ws-attr-holes"),[" "],1);for(dR=0,dS=dQ.length-1;dR<=dS;dR++){dT=_2.get(dQ,dR);dP.setAttribute(dT,(dU=new a.RegExp("\\${"+dN+"}","ig"),dP.getAttribute(dT).replace(dU,dK.textContent)));}});dO=dJ.querySelector("[ws-hole="+dN+"]");if(O.Equals(dO,null)){dL=dJ.querySelector("[ws-replace="+dN+"]");return O.Equals(dL,null)?null:(dM(dL.parentNode,dL),void dL.parentNode.removeChild(dL));}else{while(dO.hasChildNodes())dO.removeChild(dO.lastChild);dO.removeAttribute("ws-hole");return dM(dO,null);}}function dG(dJ){if(cb.StartsWith(dJ.nodeName.toLowerCase(),"ws-"))dI(dJ);else{c6.convertAttrs(dJ);dH(dJ.firstChild);}}function dH(dJ){return dE(0,dJ);}function dI(dJ){return dE(1,dJ);}dC=dA==null?cp.FakeRoot(dz):dA.$0;dD=(dy==null?"":dy.$0).toLowerCase();cp.LoadedTemplateFile(dx).set_Item(dD,dC);_2.length(dz)>0?(function(dJ){var dK,dL,dM,dN;while(true){dK=dJ.querySelector("[ws-template]");if(O.Equals(dK,null)){dL=dJ.querySelector("[ws-children-template]");if(O.Equals(dL,null))return null;else{dM=dL.getAttribute("ws-children-template");dL.removeAttribute("ws-children-template");cp.PrepareTemplateStrict(dx,{$:1,$0:dM},ct.ChildrenArray(dL),null,null);dJ=dJ;}}else{dN=dK.getAttribute("ws-template");(cp.PrepareSingleTemplate(dx,{$:1,$0:dN},dK))(null);dJ=dJ;}}}(dC),dH(_2.get(dz,0))):void 0;};cp.InlineTemplate=function(dx,dy){var dz,dA,dB,dC,dF,dG,dH,dI,dJ,dK,dL;function dD(dM,dN){var dO,dP,dQ;dO=cs.Insert(dM,dN);dG.push(cs.Updates(dO));dH.push([dM,dO]);dP=dq.GetOptional(dO.OnAfterRender);return dP==null?null:(dQ=dP.$0,void dI.push(function(){dQ(dM);}));}function dE(dM){var dN,dO;dN=(dO=null,[dJ.TryGetValue(dM,{get:function(){return dO;},set:function(dP){dO=dP;}}),dO]);return dN[0]?dN[1].$==0?{$:1,$0:dN[1].$1}:dN[1].$==1?{$:1,$0:bj.TextNode(dN[1].$1)}:dN[1].$==2?{$:1,$0:bj.TextView(dN[1].$1)}:dN[1].$==8?{$:1,$0:bj.TextView(dN[1].$1.get_View())}:dN[1].$==9?{$:1,$0:bj.TextView(M.Map(a.String,dN[1].$1.get_View()))}:dN[1].$==10?{$:1,$0:bj.TextView(M.Map(function(dP){return dP.get_Input();},dN[1].$1.get_View()))}:dN[1].$==11?{$:1,$0:bj.TextView(M.Map(a.String,dN[1].$1.get_View()))}:dN[1].$==12?{$:1,$0:bj.TextView(M.Map(function(dP){return dP.get_Input();},dN[1].$1.get_View()))}:dN[1].$==13?{$:1,$0:bj.TextView(M.Map(a.String,dN[1].$1.get_View()))}:(dr.warn("Content hole filled with attribute data",dM),null):null;}dF=[];dG=[];dH=[];dI=[];dJ=new bt.New$5();dK=b8.Get(dy);try{while(dK.MoveNext()){dL=dK.Current();dJ.set_Item(dL.$0,dL);}}finally{if(typeof dK=="object"&&"Dispose"in dK)dK.Dispose();}dz=ct.ChildrenArray(dx);ct.IterSelector(dx,"[ws-hole]",function(dM){var dN,dO,dP;dP=dM.getAttribute("ws-hole");dM.removeAttribute("ws-hole");while(dM.hasChildNodes())dM.removeChild(dM.lastChild);dN=dE(dP);dN!=null&&dN.$==1?(dO=dN.$0,cK.LinkElement(dM,dO.docNode),dF.push(cC.New(cs.Empty(dM),dO.docNode,null,dM,b5.Int(),null)),dG.push(dO.updates)):void 0;});ct.IterSelector(dx,"[ws-replace]",function(dM){var dN,dO,dP,dQ,dR,dS;dN=dE(dM.getAttribute("ws-replace"));dN!=null&&dN.$==1?(dO=dN.$0,dP=dM.parentNode,dQ=self.document.createTextNode(""),dP.replaceChild(dQ,dM),dR=cK.InsertBeforeDelim(dQ,dO.docNode),dS=_2.tryFindIndex(function(dT){return dM===dT;},dz),dS==null?void 0:_2.set(dz,dS.$0,dO.docNode),dF.push(cC.New(cs.Empty(dP),dO.docNode,{$:1,$0:[dR,dQ]},dP,b5.Int(),null)),dG.push(dO.updates)):void 0;});ct.IterSelector(dx,"[ws-attr]",function(dM){var dN,dO,dP;dN=dM.getAttribute("ws-attr");dM.removeAttribute("ws-attr");dO=(dP=null,[dJ.TryGetValue(dN,{get:function(){return dP;},set:function(dQ){dP=dQ;}}),dP]);dO[0]?dO[1].$==3?dD(dM,dO[1].$1):dr.warn("Attribute hole filled with non-attribute data",dN):void 0;});ct.IterSelector(dx,"[ws-on]",function(dM){dD(dM,b2.Concat(_2.choose(function(dN){var dO,dP,dQ;dO=cb.SplitChars(dN,[":"],1);dP=(dQ=null,[dJ.TryGetValue(_2.get(dO,1),{get:function(){return dQ;},set:function(dR){dQ=dR;}}),dQ]);return dP[0]?dP[1].$==4?{$:1,$0:b_.Handler(_2.get(dO,0),dP[1].$1)}:dP[1].$==5?{$:1,$0:b2.Handler(_2.get(dO,0),dP[1].$2)}:(dr.warn("Event hole on"+_2.get(dO,0)+" filled with non-event data",_2.get(dO,1)),null):null;},cb.SplitChars(dM.getAttribute("ws-on"),[" "],1))));dM.removeAttribute("ws-on");});ct.IterSelector(dx,"[ws-onafterrender]",function(dM){var dN,dO,dP;dN=dM.getAttribute("ws-onafterrender");dO=(dP=null,[dJ.TryGetValue(dN,{get:function(){return dP;},set:function(dQ){dP=dQ;}}),dP]);dO[0]?dO[1].$==6?(dM.removeAttribute("ws-onafterrender"),dD(dM,b_.OnAfterRender(dO[1].$1))):dO[1].$==7?(dM.removeAttribute("ws-onafterrender"),dD(dM,b_.OnAfterRender(dO[1].$1))):dr.warn("onafterrender hole filled with non-onafterrender data",dN):void 0;});ct.IterSelector(dx,"[ws-var]",function(dM){var dN,dO,dP;dN=dM.getAttribute("ws-var");dM.removeAttribute("ws-var");dO=(dP=null,[dJ.TryGetValue(dN,{get:function(){return dP;},set:function(dQ){dP=dQ;}}),dP]);dO[0]?dO[1].$==8?dD(dM,b_.Value(dO[1].$1)):dO[1].$==9?dD(dM,b_.Checked(dO[1].$1)):dO[1].$==10?dD(dM,b_.IntValue(dO[1].$1)):dO[1].$==11?dD(dM,b_.IntValueUnchecked(dO[1].$1)):dO[1].$==12?dD(dM,b_.FloatValue(dO[1].$1)):dO[1].$==13?dD(dM,b_.FloatValueUnchecked(dO[1].$1)):dr.warn("Var hole filled with non-Var data",dN):void 0;});ct.IterSelector(dx,"[ws-attr-holes]",function(dM){var dN,dO,dP,dQ;dN=new a.RegExp(cp.TextHoleRE(),"g");dO=cb.SplitChars(dM.getAttribute("ws-attr-holes"),[" "],1);dM.removeAttribute("ws-attr-holes");for(dP=0,dQ=dO.length-1;dP<=dQ;dP++)(function(){var dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3;d0=_2.get(dO,dP);d1=dM.getAttribute(d0);dR=null;dS=0;d2=[];while(dR=dN.exec(d1),dR!==null){d3=bu.string(d1,{$:1,$0:dS},{$:1,$0:dN.lastIndex-_2.get(dR,0).length-1});dS=dN.lastIndex;d2.push([d3,_2.get(dR,1)]);}dU=bu.string(d1,{$:1,$0:dS},null);dN.lastIndex=0;dV=_2.foldBack(function(d4,d5){return(function(d6){var d7,d8;d7=d6[0];d8=d6[1];return function(d9){var d_,d$,ea,eb,ec;d_=d9[0];d$=d9[1];ea=(eb=(ec=null,[dJ.TryGetValue(d8,{get:function(){return ec;},set:function(ed){ec=ed;}}),ec]),eb[0]?eb[1].$==1?{$:0,$0:eb[1].$1}:eb[1].$==2?{$:1,$0:eb[1].$1}:eb[1].$==8?{$:1,$0:eb[1].$1.get_View()}:eb[1].$==9?{$:1,$0:M.Map(a.String,eb[1].$1.get_View())}:eb[1].$==10?{$:1,$0:M.Map(function(ed){return ed.get_Input();},eb[1].$1.get_View())}:eb[1].$==11?{$:1,$0:M.Map(a.String,eb[1].$1.get_View())}:eb[1].$==12?{$:1,$0:M.Map(function(ed){return ed.get_Input();},eb[1].$1.get_View())}:eb[1].$==13?{$:1,$0:M.Map(a.String,eb[1].$1.get_View())}:(dr.warn("Attribute value hole filled with non-text data",d8),{$:0,$0:""}):{$:0,$0:""});return ea.$==1?[d7,new bp({$:1,$0:d_===""?ea.$0:M.Map(function(ed){return ed+d_;},ea.$0),$1:d$})]:[d7+ea.$0+d_,d$];};}(d4))(d5);},d2,[dU,bp.Empty]);return dD(dM,dV[1].$==1?dV[1].$1.$==1?dV[1].$1.$1.$==1?dV[1].$1.$1.$1.$==0?(dW=dV[0],b_.Dynamic(d0,M.Map3(function(d4,d5,d6){return dW+d4+d5+d6;},dV[1].$0,dV[1].$1.$0,dV[1].$1.$1.$0))):(dX=dV[0],b_.Dynamic(d0,M.Map(function(d4){return dX+cb.concat("",d4);},M.Sequence(dV[1])))):(dY=dV[0],b_.Dynamic(d0,M.Map2(function(d4,d5){return dY+d4+d5;},dV[1].$0,dV[1].$1.$0))):dV[0]===""?b_.Dynamic(d0,dV[1].$0):(dZ=dV[0],b_.Dynamic(d0,M.Map(function(d4){return dZ+d4;},dV[1].$0))):b2.Create(d0,dV[0]));}());});return[dq.DeleteEmptyFields({Els:dz,Dirty:true,Holes:dF,Attrs:dH,Render:(dA=dI.length==0?null:{$:1,$0:function(dM){_2.iter(function(dN){dN(dM);},dI);}},dA?dA.$0:void 0),El:(dB=!O.Equals(dz,null)&&dz.length===1&&(_2.get(dz,0)instanceof bZ&&(_2.get(dz,0)instanceof a.Element&&(dC=_2.get(dz,0),true)))?{$:1,$0:dC}:null,dB?dB.$0:void 0)},["Render","El"]),ce.TreeReduce(M.Const(),M.Map2Unit,dG)];};cp.PrepareSingleTemplate=function(dx,dy,dz){var dA,dB,dC;dA=cp.FakeRootSingle(dz);dB=[dz];dC={$:1,$0:dA};return function(dD){cp.PrepareTemplateStrict(dx,dy,dB,dC,dD);};};cp.TextHoleRE=function(){cU.$cctor();return cU.TextHoleRE;};cq.StartTo=function(dx,dy){b1.StartWithContinuations(dx,dy,function(dz){cq.OnError(dz);},a.ignore,null);};cq.OnError=function(dx){return dr.log("WebSharper UI: Uncaught asynchronous exception",dx);};cr.New=function(dx,dy){return{k:dx,ct:dy};};bU.addMsg=function(dx,dy){return bU.mapMessage(function(dz){return b7.addMsg(dx,dz);},dy);};bU.mapMessage=function(dx,dy){return{$:0,$0:dy.$0,$1:dx(dy.$1)};};b7=S.ResultMessage=dq.Class({toString:function(){return this.$==1?(function(dx){return function(dy){return dx("Error    : "+_.toSafe(dy));};}(a.id))(this.$0):this.$==2?(function(dx){return function(dy){return dx("Warning  : "+_.toSafe(dy));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(dx){return function(dy){return dx(a.String(dy));};}(a.id))(this.$0):this.$==5?(((dq.Curried3(function(dx,dy,dz){return dx("Exception: "+_.toSafe(dy)+", "+_.toSafe(dz));}))(a.id))(this.$0))(this.$1):this.$==6?cb.concat("\n",_5.map(a.String,_5.filter(function(dx){return dx.$!=0;},this.$0))):"";}},null,b7);b7.NoMsg=new b7({$:0});cs.Dynamic=function(dx,dy){return new b2({$:1,$0:new cM.New(dx,dy)});};cs.Static=function(dx){return new b2({$:3,$0:dx});};cs.Updates=function(dx){return ce.MapTreeReduce(function(dy){return dy.NChanged();},M.Const(),M.Map2Unit,dx.DynNodes);};cs.AppendTree=function(dx,dy){var dz;return dx===null?dy:dy===null?dx:(dz=new b2({$:2,$0:dx,$1:dy}),(cs.SetFlags(dz,cs.Flags(dx)|cs.Flags(dy)),dz));};cs.EmptyAttr=function(){da.$cctor();return da.EmptyAttr;};cs.Insert=function(dx,dy){var dz,dA,dB;function dC(dD){if(!(dD===null))if(dD!=null&&dD.$==1)dz.push(dD.$0);else if(dD!=null&&dD.$==2){dC(dD.$0);dC(dD.$1);}else if(dD!=null&&dD.$==3)dD.$0(dx);else if(dD!=null&&dD.$==4)dA.push(dD.$0);}dz=[];dA=[];dC(dy);dB=dz.slice(0);return cS.New(dx,cs.Flags(dy),dB,dA.length===0?null:{$:1,$0:function(dD){_5.iter(function(dE){dE(dD);},dA);}});};cs.SetFlags=function(dx,dy){dx.flags=dy;};cs.Flags=function(dx){return dx!==null&&dx.hasOwnProperty("flags")?dx.flags:0;};cs.Empty=function(dx){return cS.New(dx,0,[],null);};cs.HasExitAnim=function(dx){var dy;dy=2;return(dx.DynFlags&dy)===dy;};cs.GetExitAnim=function(dx){return cs.GetAnim(dx,function(dy,dz){return dy.NGetExitAnim(dz);});};cs.HasEnterAnim=function(dx){var dy;dy=1;return(dx.DynFlags&dy)===dy;};cs.GetEnterAnim=function(dx){return cs.GetAnim(dx,function(dy,dz){return dy.NGetEnterAnim(dz);});};cs.HasChangeAnim=function(dx){var dy;dy=4;return(dx.DynFlags&dy)===dy;};cs.GetChangeAnim=function(dx){return cs.GetAnim(dx,function(dy,dz){return dy.NGetChangeAnim(dz);});};cs.GetAnim=function(dx,dy){return c8.Concat(_2.map(function(dz){return dy(dz,dx.DynElem);},dx.DynNodes));};cs.Sync=function(dx,dy){_2.iter(function(dz){dz.NSync(dx);},dy.DynNodes);};ct.SetAttr=function(dx,dy,dz){dx.setAttribute(dy,dz);};ct.RemoveAttr=function(dx,dy){dx.removeAttribute(dy);};ct.CreateText=function(dx){return ct.Doc().createTextNode(dx);};ct.CreateElement=function(dx){return ct.Doc().createElement(dx);};ct.Doc=function(){cX.$cctor();return cX.Doc;};ct.SetStyle=function(dx,dy,dz){ct.SetProperty(dx.style,dy,dz);};ct.ChildrenArray=function(dx){var dy,dz,dA;dy=[];for(dz=0,dA=dx.childNodes.length-1;dz<=dA;dz++)dy.push(dx.childNodes[dz]);return dy;};ct.SetProperty=function(dx,dy,dz){return dx.setProperty(dy,dz);};ct.IterSelector=function(dx,dy,dz){var dA,dB,dC;dA=dx.querySelectorAll(dy);for(dB=0,dC=dA.length-1;dB<=dC;dB++)dz(dA[dB]);};ct.RemoveClass=function(dx,dy){var dz;ct.setClass(dx,(dz=ct.clsRE(dy),ct.getClass(dx).replace(dz,function(dA,dB,dC){return dB===""||dC===""?"":" ";})));};ct.AddClass=function(dx,dy){var dz;dz=ct.getClass(dx);dz===""?ct.setClass(dx,dy):!ct.clsRE(dy).test(dz)?ct.setClass(dx,dz+" "+dy):void 0;};ct.InsertAt=function(dx,dy,dz){var dA;if(!(dz.parentNode===dx&&dy===(dA=dz.nextSibling,O.Equals(dA,null)?null:dA)))dx.insertBefore(dz,dy);};ct.setClass=function(dx,dy){if(dx instanceof a.SVGElement)dx.setAttribute("class",dy);else dx.className=dy;};ct.getClass=function(dx){return dx instanceof a.SVGElement?dx.getAttribute("class"):dx.className;};ct.clsRE=function(dx){return new a.RegExp("(\\s+|^)"+dx+"(?:\\s+"+dx+")*(\\s+|$)","g");};ct.RemoveNode=function(dx,dy){if(dy.parentNode===dx)dx.removeChild(dy);};cu.unindent=function(dx){var dy,dz,dA,dB;dy=cb.SplitChars(dx,["\n"],0);dz=(dA=_5.tryFindIndex(function(dC){return" "!==dC;},(dB=_5.tryFind(function(dC){return cb.Trim(dC)!=="";},dy),dB==null?"":dB.$0)),dA==null?0:dA.$0);return _5.filter(function(dC){return!cb.StartsWith(dC,"# 1 ");},_5.map(function(dC){return dC.length<=dz?"":dC.substring(dz);},dy));};cu.splitByChar=function(dx,dy){return cb.SplitChars(dy,[dx],0);};cu.unindentStr=function(){ca.$cctor();return ca.unindentStr;};cu.delimitedO=function(dx,dy,dz){var dA,dB,dC,dD,dE;dA=cu.splitInTwoO(dx,dz);return dA==null?null:(dB=dA.$0,(dC=dB[0],(dD=cu.splitInTwoO(dy,dB[1]),dD==null?null:{$:1,$0:(dE=dD.$0,[dC,dE[0],dE[1]])})));};cu.StartsWith=function(dx,dy){return cb.StartsWith(dy,dx)?{$:1,$0:bu.string(dy,{$:1,$0:dx.length},null)}:null;};cu.splitInTwoO=function(dx,dy){var dz;dz=dy.indexOf(dx);return dz===-1?null:{$:1,$0:[S["String.Left"](dy,dz),dy.substring(dz+dx.length)]};};cx=cw.WcTabStripT=dq.Class({connectedCallback:function(){var dx,dy,dz,dA;function dB(){var dC,dD,dE;dD=!dy.hasAttribute("bottom");dE=bo.ofSeq(_5.delay(function(){return _5.collect(function(dF){var dG;dG=dy.childNodes[dF-1];return O.Equals(dG.nodeType,bZ.ELEMENT_NODE)?[[dG.hasAttribute("tabname")?dG.getAttribute("tabname"):(function(dH){return function(dI){return dH("Tab "+a.String(dI));};}(a.id))(dF),dG]]:[];},N.range(1,dy.childNodes.length));}));while(dA.childNodes.length>0)dA.removeChild(dA.lastChild);dC=cw.tabStrip(dx.selected,dD,true,dE,bj.Element("slot",bp.Empty,bp.Empty));cp.LoadLocalTemplates("");bj.Run(dA,dC);}dx=this;!this.added?(dy=this,dz=dy.attachShadow({mode:"open"}),dA=self.document.createElement("div"),dz.appendChild(dA),dB(),dy.addEventListener("DOMSubtreeModified",S.delayed(50,dB)),this.added=true):void 0;}},m,cx);cx.Constructor=function(){var dx,dy;dx=(dy=dw.construct(self.HTMLElement,[],this.__proto__.constructor),dy);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dx);return dx;};cx.New=dq.Ctor(function(){m.New.call(this);this.added=false;this.selected=W.Create$1(1);(function(dx){return dx("WcTabStripT initializer");}(function(dx){dr.log(dx);}));},cx);cv.defineWebComponent=function(dx,dy,dz){try{dr.log("defineWebComponent: "+dx);b6.setPrototypeOf(dz.prototype,self.HTMLElement.prototype);b6.setPrototypeOf(dz,self.HTMLElement);b6.setPrototypeOf(dy.prototype,dz.prototype);self.customElements.define(dx,dy);}catch(dA){(function(dB){return dB("Failed to define WebComponent. Not supported.");}(function(dB){dr.log(dB);}));}};cy.appfwkclient=function(dx){cy.fixedsplitterhor();cy.fixedsplitterver();cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},dx):void 0;};cz.p$1=function(dx){return"{"+("actName = "+_.prettyPrint(dx.actName))+"; "+("actFunction = "+cA.p$1(dx.actFunction))+"; "+("actEnabled = "+cA.p$2(dx.actEnabled))+"}";};cy.tile=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"tile"},dx):void 0;};cy.namevalueinput=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},dx):void 0;};cy.namevalue=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"namevalue"},dx):void 0;};cy.action=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"action"},dx):void 0;};cy.actiondisabled=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},dx):void 0;};cy.fixedsplitterhor=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},dx):void 0;};cy.fixedsplitterver=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},dx):void 0;};cy.wcompsplitterhor=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},dx):void 0;};cy.wcompsplitterver=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},dx):void 0;};cy.appframework=function(dx){cp.LoadLocalTemplates("appframework");return dx?cp.NamedTemplate("appframework",{$:1,$0:"appframework"},dx):void 0;};cA.p$1=function(dx){return dx.$==2?"FunAct2 (<fun>, "+_.prettyPrint(dx.$1)+", "+_.prettyPrint(dx.$2)+")":dx.$==1?"FunAct1 (<fun>, "+_.prettyPrint(dx.$1)+")":"FunAct0 <fun>";};cA.p$2=function(dx){return"View <fun>";};cz.p=function(dx){return"{"+("docName = "+_.prettyPrint(dx.docName))+"; "+("docDoc = "+cA.p(dx.docDoc))+"}";};cA.p=function(dx){return dx.$==5?"FunDoc5 (<fun>, "+_.prettyPrint(dx.$1)+", "+_.prettyPrint(dx.$2)+", "+_.prettyPrint(dx.$3)+", "+_.prettyPrint(dx.$4)+", "+_.prettyPrint(dx.$5)+")":dx.$==4?"FunDoc4 (<fun>, "+_.prettyPrint(dx.$1)+", "+_.prettyPrint(dx.$2)+", "+_.prettyPrint(dx.$3)+", "+_.prettyPrint(dx.$4)+")":dx.$==3?"FunDoc3 (<fun>, "+_.prettyPrint(dx.$1)+", "+_.prettyPrint(dx.$2)+", "+_.prettyPrint(dx.$3)+")":dx.$==2?"FunDoc2 (<fun>, "+_.prettyPrint(dx.$1)+", "+_.prettyPrint(dx.$2)+")":dx.$==1?"FunDoc1 (<fun>, "+_.prettyPrint(dx.$1)+")":"LazyDoc "+_.prettyPrint(dx.$0);};cB.init=function(dx,dy){var dz;dz=new cO.New();cB.set_layoutHorizontal(dx);cB.set_layoutVertical(dy);cv.defineWebComponent("wcomp-splitter",cO.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};cB.set_layoutHorizontal=function(dx){ca.$cctor();ca.layoutHorizontal=dx;};cB.set_layoutVertical=function(dx){ca.$cctor();ca.layoutVertical=dx;};cB.layoutVertical=function(){ca.$cctor();return ca.layoutVertical;};cB.layoutHorizontal=function(){ca.$cctor();return ca.layoutHorizontal;};cw.init=function(){ca.$cctor();return ca.init;};cw.tabStrip=function(dx,dy,dz,dA,dB){var dC;dC=bj.Element("div",[b2.Create("class",(((dq.Curried3(function(dD,dE,dF){return dD("tab-strip "+_.toSafe(dE)+" "+_.toSafe(dF));}))(a.id))(dy?"top":"bottom"))(dz?"horizontal":"vertical"))],bo.ofSeq(_5.delay(function(){return _5.collect(function(dD){var dE;dE=dD[0];return[c0.New$1().Content(bj.Element("div",[b_.Dynamic("class",M.Map(function(dF){return"tab"+(dF===dE+1?" selected":"");},dx.get_View())),b2.Create("draggable","true"),b2.HandlerImpl("click",function(){return function(){return dx.Set(dE+1);};})],[bj.TextNode(dD[1][0])]))];},_5.indexed(dA));})));return bj.Element("div",[b2.Create("class","tab-panel")],bo.ofSeq(_5.delay(function(){return _5.append(dy?[dC]:[],_5.delay(function(){return _5.append([bj.Element("div",[b2.Create("class","tab-content")],[dB])],_5.delay(function(){return _5.append(!dy?[dC]:[],_5.delay(function(){return _5.append([bj.Element("style",bp.Empty,bo.ofArray([bj.TextNode(cw.css())]))],_5.delay(function(){return[bj.Element("style",bp.Empty,bo.ofArray([bj.TextView(M.Map(function(dD){return function(dE){return dD("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(dE)+")) { display: grid }\r\n                                           ");};}(a.id),dx.get_View()))]))];}));}));}));}));})));};cw.css=function(){ca.$cctor();return ca.css;};cC=K.DocElemNode=dq.Class({Equals:function(dx){return this.ElKey===dx.ElKey;},GetHashCode:function(){return this.ElKey;}},null,cC);cC.New=function(dx,dy,dz,dA,dB,dC){var dD;return new cC((dD={Attr:dx,Children:dy,El:dA,ElKey:dB},(dq.SetOptional(dD,"Delimiters",dz),dq.SetOptional(dD,"Render",dC),dD)));};cE=cf.ArrayStorage=dq.Class({SRemoveIf:function(dx,dy){return _2.filter(function(dz){return!dx(dz);},dy);},SAppendMany:function(dx,dy){var dz;dz=ce.ofSeqNonCopying(dx);dy.push.apply(dy,dz);return dy;},SSetAt:function(dx,dy,dz){_2.set(dz,dx,dy);return dz;},SSet:function(dx){return _2.ofSeq(dx);},SAppend:function(dx,dy){dy.push(dx);return dy;},SInit:function(){return this.init;}},m,cE);cE.New=dq.Ctor(function(dx){m.New.call(this);this.init=dx;},cE);cF.New=function(dx,dy,dz,dA,dB){return{Node:dx,Left:dy,Right:dz,Height:dA,Count:dB};};cG=K.CheckedInput=dq.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cG);cH.New=function(dx,dy){return{c:dx,r:dy};};cI=b1.Scheduler=dq.Class({Fork:function(dx){var dy;dy=this;this.robin.push(dx);this.idle?(this.idle=false,a.setTimeout(function(){dy.tick();},0)):void 0;},tick:function(){var dx,dy,dz;dy=this;dz=dv.now();dx=true;while(dx)if(this.robin.length===0){this.idle=true;dx=false;}else{(this.robin.shift())();dv.now()-dz>40?(a.setTimeout(function(){dy.tick();},0),dx=false):void 0;}}},m,cI);cI.New=dq.Ctor(function(){m.New.call(this);this.idle=true;this.robin=[];},cI);cJ.$cctor=function(){cJ.$cctor=a.ignore;cJ.noneCT=cH.New(false,[]);cJ.scheduler=new cI.New();cJ.defCTS=[new cW.New()];cJ.Zero=b1.Return();cJ.GetCT=function(dx){dx.k({$:0,$0:dx.ct});};};cK.CreateEmbedNode=function(){return{Current:null,Dirty:false};};cK.UpdateEmbedNode=function(dx,dy){dx.Current=dy;dx.Dirty=true;};cK.CreateTextNode=function(){return{Text:ct.CreateText(""),Dirty:false,Value:""};};cK.UpdateTextNode=function(dx,dy){dx.Value=dy;dx.Dirty=true;};cK.CreateElemNode=function(dx,dy,dz){var dA;cK.LinkElement(dx,dz);dA=cs.Insert(dx,dy);return cC.New(dA,dz,null,dx,b5.Int(),dq.GetOptional(dA.OnAfterRender));};cK.LinkElement=function(dx,dy){cK.InsertDoc(dx,dy,null);};cK.LinkPrevElement=function(dx,dy){cK.InsertDoc(dx.parentNode,dy,dx);};cK.CreateDelimitedRunState=function(dx,dy,dz){return dd.New(de.get_Empty(),cK.CreateDelimitedElemNode(dx,dy,cs.EmptyAttr(),dz));};cK.PerformAnimatedUpdate=function(dx,dy,dz){var dA;return c8.get_UseAnimations()?(dA=null,b1.Delay(function(){var dB,dC,dD;dB=de.FindAll(dz);dC=cK.ComputeChangeAnim(dy,dB);dD=cK.ComputeEnterAnim(dy,dB);return b1.Bind(c8.Play(c8.Append(dC,cK.ComputeExitAnim(dy,dB))),function(){return b1.Bind(cK.SyncElemNodesNextFrame(dx,dy),function(){return b1.Bind(c8.Play(dD),function(){dy.PreviousNodes=dB;return b1.Return(null);});});});})):cK.SyncElemNodesNextFrame(dx,dy);};cK.PerformSyncUpdate=function(dx,dy,dz){var dA;dA=de.FindAll(dz);cK.SyncElemNode(dx,dy.Top);dy.PreviousNodes=dA;};cK.InsertDoc=function(dx,dy,dz){var dA;return dy!=null&&dy.$==1?cK.InsertNode(dx,dy.$0.El,dz):dy!=null&&dy.$==2?(dA=dy.$0,(dA.Dirty=false,cK.InsertDoc(dx,dA.Current,dz))):dy==null?dz:dy!=null&&dy.$==4?cK.InsertNode(dx,dy.$0.Text,dz):dy!=null&&dy.$==5?cK.InsertNode(dx,dy.$0,dz):dy!=null&&dy.$==6?_2.foldBack(function(dB,dC){return dB==null||dB.constructor===b6?cK.InsertDoc(dx,dB,dC):cK.InsertNode(dx,dB,dC);},dy.$0.Els,dz):cK.InsertDoc(dx,dy.$0,cK.InsertDoc(dx,dy.$1,dz));};cK.InsertBeforeDelim=function(dx,dy){var dz,dA;dz=dx.parentNode;dA=self.document.createTextNode("");dz.insertBefore(dA,dx);cK.LinkPrevElement(dx,dy);return dA;};cK.CreateDelimitedElemNode=function(dx,dy,dz,dA){var dB,dC;dB=dx.parentNode;cK.LinkPrevElement(dy,dA);dC=cs.Insert(dB,dz);return cC.New(dC,dA,{$:1,$0:[dx,dy]},dB,b5.Int(),dq.GetOptional(dC.OnAfterRender));};cK.SyncElemNodesNextFrame=function(dx,dy){function dz(dA){a.requestAnimationFrame(function(){cK.SyncElemNode(dx,dy.Top);dA();});}return c9.BatchUpdatesEnabled()?b1.FromContinuations(function(dA,dB,dC){return dz.apply(null,[dA,dB,dC]);}):(cK.SyncElemNode(dx,dy.Top),b1.Return(null));};cK.ComputeExitAnim=function(dx,dy){return c8.Concat(_2.map(function(dz){return cs.GetExitAnim(dz.Attr);},de.ToArray(de.Except(dy,de.Filter(function(dz){return cs.HasExitAnim(dz.Attr);},dx.PreviousNodes)))));};cK.ComputeEnterAnim=function(dx,dy){return c8.Concat(_2.map(function(dz){return cs.GetEnterAnim(dz.Attr);},de.ToArray(de.Except(dx.PreviousNodes,de.Filter(function(dz){return cs.HasEnterAnim(dz.Attr);},dy)))));};cK.ComputeChangeAnim=function(dx,dy){var dz;function dA(dB){return cs.HasChangeAnim(dB.Attr);}dz=function(dB){return de.Filter(dA,dB);};return c8.Concat(_2.map(function(dB){return cs.GetChangeAnim(dB.Attr);},de.ToArray(de.Intersect(dz(dx.PreviousNodes),dz(dy)))));};cK.SyncElemNode=function(dx,dy){!dx?cK.SyncElement(dy):void 0;cK.Sync(dy.Children);cK.AfterRender(dy);};cK.CreateRunState=function(dx,dy){return dd.New(de.get_Empty(),cK.CreateElemNode(dx,cs.EmptyAttr(),dy));};cK.InsertNode=function(dx,dy,dz){ct.InsertAt(dx,dz,dy);return dy;};cK.SyncElement=function(dx){function dy(dz){function dA(dB){var dC,dD;return dB!=null&&dB.$==0?dA(dB.$0)||dA(dB.$1):dB!=null&&dB.$==2?(dC=dB.$0,dC.Dirty||dA(dC.Current)):dB!=null&&dB.$==6&&(dD=dB.$0,dD.Dirty||_2.exists(dy,dD.Holes));}return dA(dz.Children);}cs.Sync(dx.El,dx.Attr);dy(dx)?cK.DoSyncElement(dx):void 0;};cK.Sync=function(dx){var dy,dz;if(dx!=null&&dx.$==1)cK.SyncElemNode(false,dx.$0);else if(dx!=null&&dx.$==2)cK.Sync(dx.$0.Current);else if(dx==null);else if(dx!=null&&dx.$==5);else if(dx!=null&&dx.$==4){dy=dx.$0;dy.Dirty?(dy.Text.nodeValue=dy.Value,dy.Dirty=false):void 0;}else if(dx!=null&&dx.$==6){dz=dx.$0;_2.iter(function(dA){cK.SyncElemNode(false,dA);},dz.Holes);_2.iter(function(dA){cs.Sync(dA[0],dA[1]);},dz.Attrs);cK.AfterRender(dz);}else{cK.Sync(dx.$0);cK.Sync(dx.$1);}};cK.AfterRender=function(dx){var dy;dy=dq.GetOptional(dx.Render);dy!=null&&dy.$==1?(dy.$0(dx.El),dq.SetOptional(dx,"Render",null)):void 0;};cK.DoSyncElement=function(dx){var dy,dz,dA;function dB(dC,dD){var dE,dF;return dC!=null&&dC.$==1?dC.$0.El:dC!=null&&dC.$==2?(dE=dC.$0,dE.Dirty?(dE.Dirty=false,cK.InsertDoc(dy,dE.Current,dD)):dB(dE.Current,dD)):dC==null?dD:dC!=null&&dC.$==4?dC.$0.Text:dC!=null&&dC.$==5?dC.$0:dC!=null&&dC.$==6?(dF=dC.$0,(dF.Dirty?dF.Dirty=false:void 0,_2.foldBack(function(dG,dH){return dG==null||dG.constructor===b6?dB(dG,dH):dG;},dF.Els,dD))):dB(dC.$0,dB(dC.$1,dD));}dy=dx.El;dn.Iter((dz=dx.El,function(dC){ct.RemoveNode(dz,dC);}),dn.Except(dn.DocChildren(dx),dn.Children(dx.El,dq.GetOptional(dx.Delimiters))));dB(dx.Children,(dA=dq.GetOptional(dx.Delimiters),dA!=null&&dA.$==1?dA.$0[1]:null));};cL.$cctor=function(){cL.$cctor=a.ignore;cL.counter=0;};cM=K.DynamicAttrNode=dq.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(dx){return c8.get_Empty();},NGetEnterAnim:function(dx){return c8.get_Empty();},NGetChangeAnim:function(dx){return c8.get_Empty();},NSync:function(dx){if(this.dirty){(this.push(dx))(this.value);this.dirty=false;}}},m,cM);cM.New=dq.Ctor(function(dx,dy){var dz;dz=this;m.New.call(this);this.push=dy;this.value=void 0;this.dirty=false;this.updates=M.Map(function(dA){dz.value=dA;dz.dirty=true;},dx);},cM);cN=K.Elt=dq.Class({on:function(dx,dy){var dz;dz=this;this.elt.addEventListener(dx,function(dA){return dy(dz.elt,dA);},false);return this;}},bj,cN);cN.New=function(dx,dy,dz){var dA,dB;dA=cK.CreateElemNode(dx,dy,dz.docNode);dB=cY.Create(dz.updates);return new cN.New$1({$:1,$0:dA},M.Map2Unit(cs.Updates(dA.Attr),dB.v),dx,dB);};cN.TreeNode=function(dx,dy){var dz,dA;function dB(dC){return dC[1];}dz=cY.Create(dy);return new cN.New$1({$:6,$0:dx},M.Map2Unit((dA=_2.map(function(dC){return cs.Updates(dB(dC));},dx.Attrs),ce.TreeReduce(M.Const(),M.Map2Unit,dA)),dz.v),_2.get(dx.Els,0),dz);};cN.New$1=dq.Ctor(function(dx,dy,dz,dA){bj.New.call(this,dx,dy);this.docNode$1=dx;this.updates$1=dy;this.elt=dz;this.rvUpdates=dA;},cN);S.delayed=function(dx,dy){var dz;dz=[null];return function(dA){var dB,dC;dB=dz[0];dB==null?void 0:dB.$0.Cancel$1();dz[0]={$:1,$0:new cW.New()};b1.Start((dC=null,b1.Delay(function(){return b1.Bind(b1.Sleep(dx),function(){dy(dA);return b1.Zero();});})),{$:1,$0:dz[0].$0});};};S.print=function(dx){if(typeof dx=="string")((function(dy){return function(dz){return dy(_.toSafe(dz));};}(function(dy){dr.log(dy);}))(dx));else((function(dy){return function(dz){return dy(_.prettyPrint(dz));};}(function(dy){dr.log(dy);}))(dx));};S["String.Left"]=function(dx,dy){return dy<0?S["String.Substring2"](dx,0,dx.length+dy):S["String.Substring2"](dx,0,dy);};S["String.Substring2"]=function(dx,dy,dz){var dA,dB;while(true){if(dz<=0)return"";else if(dy<0){dA=dy;dy=0;dz=dz+dA;}else return dy>=dx.length?"":cb.Substring(dx,dy,(dB=dx.length-dy,O.Compare(dz,dB)===-1?dz:dB));}};cO=cB.WcSplitterT=dq.Class({connectedCallback:function(){var dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM;function dN(dV){var dW,dX,dY,dZ;dW=dE?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];dX=a.parseFloat("0"+dt(dV.parentElement.parentElement).css(dW[0]));dY=a.parseFloat("0"+dt(dV.parentElement.parentElement).css(dW[1]));dH.Set(a.parseFloat("0"+dt(dV.parentElement.parentElement).css(dW[2])));dG[0]=dX+dY;dZ=dx.getBoundingClientRect();return dE?dD?[dZ.width,dZ.height]:[-dZ.width,dZ.height]:dD?[dZ.height,dZ.width]:[-dZ.height,dZ.width];}function dO(dV){return dE?dV.clientX:dV.clientY;}function dP(dV){var dW,dX;dW=(dO(dV)-dK[0])*100/dF[0][0]+dJ[0];dC.Set((dX=O.Compare(dA,dW)===1?dA:dW,O.Compare(dB,dX)===-1?dB:dX));}function dQ(){if(dI[0]){dI[0]=false;self.removeEventListener("mousemove",dP,false);self.removeEventListener("mouseup",dQ,false);}}function dR(dV){var dW,dX;if(!dI[0]){dI[0]=true;dJ[0]=dC.Get();dK[0]=dO(dV);dF[0]=(dW=(dX=dL[0],dX==null?null:{$:1,$0:dN(dX.$0)}),dW==null?[100,500]:dW.$0);self.addEventListener("mousemove",dP,false);self.addEventListener("mouseup",dQ,false);dV.preventDefault();}}function dS(dV,dW,dX,dY){return[(dV-dW-dX)*dY/100,(dV-dW-dX)*(100-dY)/100];}function dT(dV,dW){return(((((dq.Curried(function(dX,dY,dZ,d0,d1){return dX(" "+dY.toFixed(2)+"px "+dZ.toFixed(2)+"px ; "+_.toSafe(d0)+" : "+d1.toFixed(2)+"px; ");},5))(a.id))(dV))(dW))(dE?"height":"width"))(dF[0][1]);}function dU(){var dV;dV=dL[0];dV==null?void 0:dF[0]=dN(dV.$0);dC.Set(dC.Get());}if(!this.added){dx=this;dy=dx.attachShadow({mode:"open"});dz=self.document.createElement("div");dA=dx.hasAttribute("min")?a.parseFloat(dx.getAttribute("min")):4;dB=dx.hasAttribute("max")?a.parseFloat(dx.getAttribute("max")):96;dC=W.Create$1(dx.hasAttribute("value")?a.parseFloat(dx.getAttribute("value")):50);dD=!dx.hasAttribute("second");dE=dx.hasAttribute("vertical");dF=[[0,0]];dG=[0];dH=W.Create$1(0);dI=[false];dJ=[0];dK=[0];dL=[null];dM=(((((dE?cB.layoutVertical():cB.layoutHorizontal())(M.Map(function(dV){var dW;dW=dS(dF[0][0],dH.Get(),dG[0],dV);return dT.apply(null,dW);},dC.get_View())))(function(){R.addResizeObserver(dU,dx);dU();}))(function(dV){dL[0]={$:1,$0:dV};dU();}))(function(dV){dR(dV);}))(M.Map(function(dV){return function(dW){return dV(_.prettyPrint(dW)+"px");};}(a.id),dH.get_View()));cp.LoadLocalTemplates("");bj.Run(dz,dM);dy.appendChild(dz.firstChild);this.added=true;}}},m,cO);cO.Constructor=function(){var dx,dy;dx=(dy=dw.construct(self.HTMLElement,[],this.__proto__.constructor),dy);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dx);return dx;};cO.New=dq.Ctor(function(){m.New.call(this);this.added=false;(function(dx){return dx("WcSplitterT initializer");}(function(dx){dr.log(dx);}));},cO);cQ=l.MatchFailureException=dq.Class({},cP,cQ);cQ.New=dq.Ctor(function(dx,dy,dz){this.message=dx+" at "+a.String(dy)+":"+a.String(dz);b6.setPrototypeOf(this,cQ.prototype);},cQ);cS.New=function(dx,dy,dz,dA){var dB;dB={DynElem:dx,DynFlags:dy,DynNodes:dz};dq.SetOptional(dB,"OnAfterRender",dA);return dB;};cT.extractNodes=function(dx){var dy,dz;function dA(dB,dC,dD,dE){var dF,dG,dH,dI,dJ,dK;dF=cT.extractNodes(dD);dG=cT.extractNodes(dE);return(dF.$==0?(dI=dF.$0,!O.Equals(dI,null)&&dI.length===0)?(dH=dG,true):dG.$==0?(dJ=dG.$0,!O.Equals(dJ,null)&&dJ.length===0)?(dH=dF,true):(dH=[dF,dG],false):(dH=[dF,dG],false):dG.$==0?(dK=dG.$0,!O.Equals(dK,null)&&dK.length===0)?(dH=dF,true):(dH=[dF,dG],false):(dH=[dF,dG],false))?dH:{$:1,$0:{$:0,$0:dB,$1:dC,$2:dH[0],$3:dH[1]}};}dy=cT.horizontalSplit(dx);return dy!=null&&dy.$==1?dA(false,dy.$0[2],dy.$0[0],dy.$0[1]):(dz=cT.verticalSplit(dx),dz!=null&&dz.$==1?dA(true,dz.$0[2],dz.$0[0],dz.$0[1]):{$:0,$0:cT.cleanSpaces(dx)});};cT.createLayoutDefinitions=function(dx,dy){var dz,dA,dB,dC,dD,dE,dF,dG,dH,dI;return dy.$==1?(dz=dy.$0.$0,(dA=dy.$0.$1,(dB=cT.createLayoutDefinitions(dx+"_1",dy.$0.$2),(dC=dB[0],(dD=dB[1],(dE=cT.createLayoutDefinitions(dx+"_2",dy.$0.$3),(dF=dE[0],(dG=dE[1],[dx,_2.ofSeq(_5.delay(function(){return _5.append([cb.concat(" ",bo.ofArray([dx,dz?"vertical":"horizontal",a.String(dA),dC,dF]))],_5.delay(function(){return _5.append(dD,_5.delay(function(){return dG;}));}));}))])))))))):(dH=dy.$0,!O.Equals(dH,null)&&dH.length===0)?["___",[]]:(dI=dy.$0,!O.Equals(dI,null)&&dI.length===1)?[_2.get(dy.$0,0),[]]:[dx,[dx+" div \"\" "+cb.concat(" ",dy.$0)]];};cT.horizontalSplit=function(dx){var dy,dz,dA,dB,dC;function dD(dE,dF){var dG,dH,dI,dJ;dG=c.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",dF);return dG!=null&&dG.$==1?{$:1,$0:[[dE,(dH=(dI=_5.tryItem(1,dG.$0),dI==null?null:cT.extractMeasuresO(cb.Replace(cb.Replace(dI.$0,"^",""),"v","-"))),(dJ=new c3({$:1,$0:5,$1:50,$2:95}),dH==null?dJ:dH.$0))],dF.indexOf("-")]}:null;}dy=(dz=_5.tryHead(_5.sortBy(function(dE){return dE[1];},_5.choose(function(dE){return dD(dE[0],dE[1]);},_5.indexed(dx)))),dz==null?null:{$:1,$0:dz.$0[0]});return dy==null?null:{$:1,$0:(dA=dy.$0,(dB=dA[0],(dC=dA[1],[bu.array(dx,null,{$:1,$0:dB-1}),bu.array(dx,{$:1,$0:dB+1},null),dC])))};};cT.verticalSplit=function(dx){var dy,dz,dA,dB,dC,dD,dE,dF,dG,dH;function dI(dL,dM){var dN,dO,dP;return(dO=c.REGEX$1("^ *\\|+ *$","",dM),dO!=null&&dO.$==1&&(dP=dO.$0,!O.Equals(dP,null)&&dP.length===1))?{$:1,$0:[dL,dM.indexOf("|")]}:null;}function dJ(dL){return O.Equals(null,dL);}function dK(dL){return O.Equals(null,dL);}dy=cT.transpose(dx);dz=(dA=(dB=_5.tryHead(_5.sortBy(function(dL){return dL[1];},_5.choose(function(dL){return dI(dL[0],dL[1]);},_5.indexed(dy)))),dB==null?null:{$:1,$0:dB.$0[0]}),dA==null?null:{$:1,$0:(dC=dA.$0,[cT.transpose(bu.array(dy,null,{$:1,$0:dC-1})),cT.transpose(bu.array(dy,{$:1,$0:dC+1},null))])});return dz==null?null:{$:1,$0:(dD=dz.$0,(dE=dD[0],(dF=dD[1],[_2.filter(function(dL){return dJ(cT.extractMeasuresO(dL));},dE),_2.filter(function(dL){return dK(cT.extractMeasuresO(dL));},dF),(dG=_5.tryHead(_5.delay(function(){return _5.append(_5.choose(cT.extractMeasuresO,dE),_5.delay(function(){return _5.map(function(dL){return dL.$==0?dL.$1?new c3({$:0,$0:dL.$0,$1:false}):dL:dL;},_5.choose(cT.extractMeasuresO,dF));}));})),(dH=new c3({$:1,$0:5,$1:50,$2:95}),dG==null?dH:dG.$0))])))};};cT.cleanSpaces=function(dx){return _2.filter(function(dy){var dz;return!(dz=(_9.Int())(dy),dz!=null&&dz.$==1);},cb.SplitStrings(cb.concat(" ",dx),[" "],1));};cT.extractMeasuresO=function(dx){var dy,dz,dA,dB,dC,dD,dE;dy=cb.SplitChars(dx,[" "],1);return!O.Equals(dy,null)&&dy.length===1&&(dA=(_9.Int())(_2.get(dy,0)),dA!=null&&dA.$==1&&(dz=dA.$0,true))?{$:1,$0:new c3({$:0,$0:ds.abs(dz),$1:dz>=0})}:!O.Equals(dy,null)&&dy.length===3&&(dC=(_9.Int())(_2.get(dy,0)),dC!=null&&dC.$==1&&(dD=(_9.Int())(_2.get(dy,1)),dD!=null&&dD.$==1&&(dE=(_9.Int())(_2.get(dy,2)),dE!=null&&dE.$==1&&(dB=[dE.$0,dC.$0,dD.$0],true))))?{$:1,$0:new c3({$:1,$0:dB[1],$1:dB[2],$2:dB[0]})}:null;};cT.transpose=function(dx){var dy;dy=_5.max(_5.map(function(dz){return dz.length;},dx));return _2.ofSeq(_5.delay(function(){return _5.map(function(dz){return _2.ofSeq(_5.delay(function(){return _5.map(function(dA){return dA.length>dz?dA[dz]:" ";},dx);})).join("");},N.range(0,dy-1));}));};cU.$cctor=function(){cU.$cctor=a.ignore;cU.LoadedTemplates=new bt.New$5();cU.LocalTemplatesLoaded=false;cU.TextHoleRE="\\${([^}]+)}";};cV=l.OperationCanceledException=dq.Class({},cP,cV);cV.New=dq.Ctor(function(dx){cV.New$1.call(this,"The operation was canceled.",null,dx);},cV);cV.New$1=dq.Ctor(function(dx,dy,dz){this.message=dx;this.inner=dy;b6.setPrototypeOf(this,cV.prototype);this.ct=dz;},cV);cW=l.CancellationTokenSource=dq.Class({Cancel$1:function(){var dx;if(!this.c){this.c=true;dx=_2.choose(function(dy){try{dy();return null;}catch(dz){return{$:1,$0:dz};}},this.r);if(_2.length(dx)>0)throw new db.New$3(dx);else void 0;}}},m,cW);cW.New=dq.Ctor(function(){m.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},cW);cX.$cctor=function(){cX.$cctor=a.ignore;cX.Doc=self.document;};cY=K.Updates=dq.Class({},null,cY);cY.Create=function(dx){var dy;dy=null;dy=cY.New(dx,null,function(){var dz;dz=dy.s;return dz===null?(dz=bP.Copy(dy.c()),dy.s=dz,bP.WhenObsoleteRun(dz,function(){dy.s=null;}),dz):dz;});return dy;};cY.New=function(dx,dy,dz){return new cY({c:dx,s:dy,v:dz});};c0=cZ.Hoverable=dq.Class({Content:function(dx){return dx.on("mouseenter",function(){return ct.AddClass(dx.elt,"hovering");}).on("mouseleave",function(){return ct.RemoveClass(dx.elt,"hovering");});}},null,c0);c0.New$1=function(){return c0.New(W.Create$1(false));};c0.New=function(dx){return new c0({hover:dx});};R.addResizeObserver=function(dx,dy){var dz,dA,dB,dC;try{dz=!(!a.ResizeObserver);}catch(dD){dz=false;}if(dz){dA=new a.ResizeObserver(dx);R.set_observers(new bp({$:1,$0:dA,$1:R.observers()}));dA.observe(dy);}else{dB=R.dimsChanged(dy);b1.Start((dC=null,b1.Delay(function(){return b1.While(function(){return dy.isConnected;},b1.Delay(function(){return b1.Bind(b1.Sleep(110),function(){return dB()?(dx(),b1.Zero()):b1.Zero();});}));})),null);}};R.set_observers=function(dx){ca.$cctor();ca.observers=dx;};R.observers=function(){ca.$cctor();return ca.observers;};R.dimsChanged=function(dx){var dy;dy=[dx.getBoundingClientRect()];return function(){var dz;dz=dx.getBoundingClientRect();return O.Equals(R.domRect2Tuple(dy[0]),R.domRect2Tuple(dz))?false:(dy[0]=dz,true);};};R.domRect2Tuple=function(dx){return[dx.top,dx.left,dx.width,dx.height];};c.REGEX$1=function(dx,dy,dz){var dA;return dz===null?null:(dA=(new a.String(dz)).match(new a.RegExp(dx,dy)),O.Equals(dA,null)?null:!O.Equals(dA,null)&&dA.length===0?null:{$:1,$0:dA});};c3=bd.Measures=dq.Class({toString:function(){return this.$==1?((((dq.Curried(function(dx,dy,dz,dA){return dx(a.String(dy)+"-"+a.String(dz)+"-"+a.String(dA));},4))(a.id))(N.toInt(this.$0)))(N.toInt(this.$1)))(N.toInt(this.$2)):a.String(N.toInt(this.$1?this.$0:-this.$0));}},null,c3);c4.concat=function(dx){var dy,dz;dy=[];for(var dA in dx)dy.push.apply(dy,dx[dA]);return dy;};c5=l.FormatException=dq.Class({},cP,c5);c5.New$1=dq.Ctor(function(dx){this.message=dx;b6.setPrototypeOf(this,c5.prototype);},c5);c6.convertTextNode=function(dx){var dy,dz,dA,dB,dC,dD;dy=null;dz=0;dB=dx.textContent;dC=new a.RegExp(cp.TextHoleRE(),"g");while(dy=dC.exec(dB),dy!==null){dx.parentNode.insertBefore(self.document.createTextNode(bu.string(dB,{$:1,$0:dz},{$:1,$0:dC.lastIndex-_2.get(dy,0).length-1})),dx);dz=dC.lastIndex;dD=self.document.createElement("span");dD.setAttribute("ws-replace",_2.get(dy,1).toLowerCase());dx.parentNode.insertBefore(dD,dx);}dC.lastIndex=0;dx.textContent=bu.string(dB,{$:1,$0:dz},null);};c6.failNotLoaded=function(dx){dr.warn("Instantiating non-loaded template",dx);};c6.fillTextHole=function(dx,dy,dz){var dA;dA=dx.querySelector("[ws-replace]");return O.Equals(dA,null)?(dr.warn("Filling non-existent text hole",dz),null):(dA.parentNode.replaceChild(new a.Text(dy),dA),{$:1,$0:dA.getAttribute("ws-replace")});};c6.removeHolesExcept=function(dx,dy){function dz(dA){ct.IterSelector(dx,"["+dA+"]",function(dB){if(!dy.Contains(dB.getAttribute(dA)))dB.removeAttribute(dA);});}dz("ws-attr");dz("ws-onafterrender");dz("ws-var");ct.IterSelector(dx,"[ws-hole]",function(dA){if(!dy.Contains(dA.getAttribute("ws-hole"))){dA.removeAttribute("ws-hole");while(dA.hasChildNodes())dA.removeChild(dA.lastChild);}});ct.IterSelector(dx,"[ws-replace]",function(dA){if(!dy.Contains(dA.getAttribute("ws-replace")))dA.parentNode.removeChild(dA);});ct.IterSelector(dx,"[ws-on]",function(dA){dA.setAttribute("ws-on",cb.concat(" ",_2.filter(function(dB){return dy.Contains(_2.get(cb.SplitChars(dB,[":"],1),1));},cb.SplitChars(dA.getAttribute("ws-on"),[" "],1))));});ct.IterSelector(dx,"[ws-attr-holes]",function(dA){var dB,dC,dD,dE,dF;dB=cb.SplitChars(dA.getAttribute("ws-attr-holes"),[" "],1);for(dC=0,dD=dB.length-1;dC<=dD;dC++){dE=_2.get(dB,dC);dA.setAttribute(dE,(dF=new a.RegExp(cp.TextHoleRE(),"g"),dA.getAttribute(dE).replace(dF,function(dG,dH){return dy.Contains(dH)?dG:"";})));}});};c6.fillInstanceAttrs=function(dx,dy){var dz,dA,dB,dC,dD;c6.convertAttrs(dy);dz=dy.nodeName.toLowerCase();dA=dx.querySelector("[ws-attr="+dz+"]");if(O.Equals(dA,null))dr.warn("Filling non-existent attr hole",dz);else{dA.removeAttribute("ws-attr");for(dB=0,dC=dy.attributes.length-1;dB<=dC;dB++){dD=dy.attributes.item(dB);dD.name==="class"&&dA.hasAttribute("class")?dA.setAttribute("class",dA.getAttribute("class")+" "+dD.nodeValue):dA.setAttribute(dD.name,dD.nodeValue);}}};c6.mapHoles=function(dx,dy){function dz(dA){ct.IterSelector(dx,"["+dA+"]",function(dB){var dC,dD;dC=(dD=null,[dy.TryGetValue(dB.getAttribute(dA).toLowerCase(),{get:function(){return dD;},set:function(dE){dD=dE;}}),dD]);dC[0]?dB.setAttribute(dA,dC[1]):void 0;});}dz("ws-hole");dz("ws-replace");dz("ws-attr");dz("ws-onafterrender");dz("ws-var");ct.IterSelector(dx,"[ws-on]",function(dA){dA.setAttribute("ws-on",cb.concat(" ",_2.map(function(dB){var dC,dD,dE;dC=cb.SplitChars(dB,[":"],1);dD=(dE=null,[dy.TryGetValue(_2.get(dC,1),{get:function(){return dE;},set:function(dF){dE=dF;}}),dE]);return dD[0]?_2.get(dC,0)+":"+dD[1]:dB;},cb.SplitChars(dA.getAttribute("ws-on"),[" "],1))));});ct.IterSelector(dx,"[ws-attr-holes]",function(dA){var dB,dC,dD;dB=cb.SplitChars(dA.getAttribute("ws-attr-holes"),[" "],1);for(dC=0,dD=dB.length-1;dC<=dD;dC++)(function(){var dE;function dF(dG,dH){var dI;dI=N.KeyValue(dH);return dG.replace(new a.RegExp("\\${"+dI[0]+"}","ig"),"${"+dI[1]+"}");}dE=_2.get(dB,dC);return dA.setAttribute(dE,(((dq.Curried3(_5.fold))(dF))(dA.getAttribute(dE)))(dy));}());});};c6.fill=function(dx,dy,dz){while(true)if(dx.hasChildNodes())dz=dy.insertBefore(dx.lastChild,dz);else return null;};c6.convertAttrs=function(dx){var dz,dA,dB,dC,dD,dE,dF,dG;function dy(dH){var dI;dI=dx.getAttribute(dH);dI===null?void 0:dx.setAttribute(dH,dI.toLowerCase());}dz=dx.attributes;dA=[];dB=[];dC=[];for(dD=0,dE=dz.length-1;dD<=dE;dD++){dF=dz.item(dD);cb.StartsWith(dF.nodeName,"ws-on")&&dF.nodeName!=="ws-onafterrender"&&dF.nodeName!=="ws-on"?(dA.push(dF.nodeName),dB.push(bu.string(dF.nodeName,{$:1,$0:"ws-on".length},null)+":"+dF.nodeValue.toLowerCase())):!cb.StartsWith(dF.nodeName,"ws-")&&(new a.RegExp(cp.TextHoleRE())).test(dF.nodeValue)?(dF.nodeValue=(dG=new a.RegExp(cp.TextHoleRE(),"g"),dF.nodeValue.replace(dG,function(dH,dI){return"${"+dI.toLowerCase()+"}";})),dC.push(dF.nodeName)):void 0;}!(dB.length==0)?dx.setAttribute("ws-on",cb.concat(" ",dB)):void 0;!(dC.length==0)?dx.setAttribute("ws-attr-holes",cb.concat(" ",dC)):void 0;dy("ws-hole");dy("ws-replace");dy("ws-attr");dy("ws-onafterrender");dy("ws-var");_2.iter(function(dH){dx.removeAttribute(dH);},dA);};c7=bs.KeyCollection=dq.Class({GetEnumerator$1:function(){return b8.Get(_5.map(function(dx){return dx.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},m,c7);c7.New=dq.Ctor(function(dx){m.New.call(this);this.d=dx;},c7);c8.get_UseAnimations=function(){return df.UseAnimations();};c8.Play=function(dx){var dy;dy=null;return b1.Delay(function(){return b1.Bind(c8.Run(a.ignore,df.Actions(dx)),function(){df.Finalize(dx);return b1.Return(null);});});};c8.Append=function(dx,dy){return{$:0,$0:dj.Append(dx.$0,dy.$0)};};c8.Run=function(dx,dy){var dz;function dA(dB){function dC(dD,dE){var dF;dF=dE-dD;dy.Compute(dF);dx();return dF<=dz?void a.requestAnimationFrame(function(dG){dC(dD,dG);}):dB();}a.requestAnimationFrame(function(dD){dC(dD,dD);});}dz=dy.Duration;return dz===0?b1.Zero():b1.FromContinuations(function(dB,dC,dD){return dA.apply(null,[dB,dC,dD]);});};c8.Concat=function(dx){return{$:0,$0:dj.Concat(_5.map(df.List,dx))};};c8.get_Empty=function(){return{$:0,$0:dj.Empty()};};c9.BatchUpdatesEnabled=function(){dg.$cctor();return dg.BatchUpdatesEnabled;};c_.StartProcessor=function(dx){var dy;function dz(){var dA;dA=null;return b1.Delay(function(){return b1.Bind(dx,function(){var dB;dB=dy[0];return dB===1?(dy[0]=0,b1.Zero()):dB===2?(dy[0]=1,dz()):b1.Zero();});});}dy=[0];return function(){var dA;dA=dy[0];dA===0?(dy[0]=1,b1.Start(dz(),null)):dA===1?dy[0]=2:void 0;};};c$.Clear=function(dx){dx.splice(0,_2.length(dx));};da.$cctor=function(){da.$cctor=a.ignore;da.EmptyAttr=null;};db=l.AggregateException=dq.Class({},cP,db);db.New$3=dq.Ctor(function(dx){db.New$4.call(this,"One or more errors occurred.",dx);},db);db.New$4=dq.Ctor(function(dx,dy){this.message=dx;b6.setPrototypeOf(this,db.prototype);this.innerExceptions=dy;},db);_5.enumUsing=function(dx,dy){return{GetEnumerator:function(){var dz;try{dz=b8.Get(dy(dx));}catch(dA){dx.Dispose();throw dA;}return new b9.New(null,null,function(dB){return dz.MoveNext()&&(dB.c=dz.Current(),true);},function(){dz.Dispose();dx.Dispose();});}};};_5.enumWhile=function(dx,dy){return{GetEnumerator:function(){return new b9.New(null,null,function(dz){var dA;while(true){dA=dz.s;if(O.Equals(dA,null)){if(dx()){dz.s=b8.Get(dy);dz=dz;}else return false;}else if(dA.MoveNext()){dz.c=dA.Current();return true;}else{dA.Dispose();dz.s=null;dz=dz;}}},function(dz){var dA;dA=dz.s;!O.Equals(dA,null)?dA.Dispose():void 0;});}};};dd.New=function(dx,dy){return{PreviousNodes:dx,Top:dy};};de.get_Empty=function(){return{$:0,$0:new cj.New$3()};};de.FindAll=function(dx){var dy;function dz(dB){if(dB!=null&&dB.$==0){dz(dB.$0);dz(dB.$1);}else if(dB!=null&&dB.$==1)dA(dB.$0);else if(dB!=null&&dB.$==2)dz(dB.$0.Current);else if(dB!=null&&dB.$==6)_2.iter(dA,dB.$0.Holes);}function dA(dB){dy.push(dB);dz(dB.Children);}dy=[];dz(dx);return{$:0,$0:new cj.New$2(dy)};};de.Filter=function(dx,dy){return{$:0,$0:dm.Filter(dx,dy.$0)};};de.Except=function(dx,dy){return{$:0,$0:dm.Except(dx.$0,dy.$0)};};de.ToArray=function(dx){return dm.ToArray(dx.$0);};de.Intersect=function(dx,dy){return{$:0,$0:dm.Intersect(dx.$0,dy.$0)};};df.UseAnimations=function(){di.$cctor();return di.UseAnimations;};df.Actions=function(dx){return df.ConcatActions(_2.choose(function(dy){return dy.$==1?{$:1,$0:dy.$0}:null;},dj.ToArray(dx.$0)));};df.Finalize=function(dx){_2.iter(function(dy){if(dy.$==0)dy.$0();},dj.ToArray(dx.$0));};df.ConcatActions=function(dx){var dy,dz,dA,dB;dy=ce.ofSeqNonCopying(dx);dz=_2.length(dy);return dz===0?df.Const():dz===1?_2.get(dy,0):(dA=_5.max(_5.map(function(dC){return dC.Duration;},dy)),(dB=_2.map(function(dC){return df.Prolong(dA,dC);},dy),df.Def(dA,function(dC){_2.iter(function(dD){dD.Compute(dC);},dB);})));};df.List=function(dx){return dx.$0;};df.Const=function(dx){return df.Def(0,function(){return dx;});};df.Def=function(dx,dy){return{Compute:dy,Duration:dx};};df.Prolong=function(dx,dy){var dz,dA,dB;dz=dy.Compute;dA=dy.Duration;dB=bc.Create(function(){return dy.Compute(dy.Duration);});return{Compute:function(dC){return dC>=dA?dB.f():dz(dC);},Duration:dx};};dg.$cctor=function(){dg.$cctor=a.ignore;dg.BatchUpdatesEnabled=true;};dh.isBlank=function(dx){return cb.forall(dk.IsWhiteSpace,dx);};di.$cctor=function(){di.$cctor=a.ignore;di.CubicInOut=dl.Custom(function(dx){var dy;dy=dx*dx;return 3*dy-2*(dy*dx);});di.UseAnimations=true;};dj.Append=function(dx,dy){return dx.$==0?dy:dy.$==0?dx:{$:2,$0:dx,$1:dy};};dj.ToArray=function(dx){var dy;function dz(dA){if(dA.$==1)dy.push(dA.$0);else if(dA.$==2){dz(dA.$0);dz(dA.$1);}else if(dA.$==3)_2.iter(function(dB){dy.push(dB);},dA.$0);}dy=[];dz(dx);return dy.slice(0);};dj.Concat=function(dx){var dy;dy=ce.ofSeqNonCopying(dx);return ce.TreeReduce(dj.Empty(),dj.Append,dy);};dj.Empty=function(){_do.$cctor();return _do.Empty;};dk.IsWhiteSpace=function(dx){return dx.match(new a.RegExp("\\s"))!==null;};dl=K.Easing=dq.Class({},m,dl);dl.Custom=function(dx){return new dl.New(dx);};dl.New=dq.Ctor(function(dx){m.New.call(this);this.transformTime=dx;},dl);dm.Filter=function(dx,dy){return new cj.New$2(_2.filter(dx,dm.ToArray(dy)));};dm.Except=function(dx,dy){var dz;dz=new cj.New$2(dm.ToArray(dy));dz.ExceptWith(dm.ToArray(dx));return dz;};dm.ToArray=function(dx){var dy;dy=_2.create(dx.get_Count(),void 0);dx.CopyTo(dy);return dy;};dm.Intersect=function(dx,dy){var dz;dz=new cj.New$2(dm.ToArray(dx));dz.IntersectWith(dm.ToArray(dy));return dz;};dn.Children=function(dx,dy){var dz,dA,dB;if(dy!=null&&dy.$==1){dB=[];dz=dy.$0[0].nextSibling;while(dz!==dy.$0[1]){dB.push(dz);dz=dz.nextSibling;}return{$:0,$0:dB};}else return{$:0,$0:_2.init(dx.childNodes.length,(dA=dx.childNodes,function(dC){return dA[dC];}))};};dn.Except=function(dx,dy){var dz;dz=dx.$0;return{$:0,$0:_2.filter(function(dA){return _2.forall(function(dB){return!(dA===dB);},dz);},dy.$0)};};dn.Iter=function(dx,dy){_2.iter(dx,dy.$0);};dn.DocChildren=function(dx){var dy;function dz(dA){if(dA!=null&&dA.$==2)dz(dA.$0.Current);else if(dA!=null&&dA.$==1)dy.push(dA.$0.El);else if(dA==null);else if(dA!=null&&dA.$==5)dy.push(dA.$0);else if(dA!=null&&dA.$==4)dy.push(dA.$0.Text);else if(dA!=null&&dA.$==6)_2.iter(function(dB){if(dB==null||dB.constructor===b6)dz(dB);else dy.push(dB);},dA.$0.Els);else{dz(dA.$0);dz(dA.$1);}}dy=[];dz(dx.Children);return{$:0,$0:ce.ofSeqNonCopying(dy)};};_do.$cctor=function(){_do.$cctor=a.ignore;_do.Empty={$:0};};dq.OnLoad(function(){H.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

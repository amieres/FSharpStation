function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD;a=self;b=a.FsRoot=a.FsRoot||{};c=b.TestingJS=b.TestingJS||{};d=c.Test=c.Test||{};e=c.Util=c.Util||{};f=c.AF=c.AF||{};g=a.WebSharper=a.WebSharper||{};h=g.Obj=g.Obj||{};i=f.PlugInBuilder=f.PlugInBuilder||{};j=f.ListModelData=f.ListModelData||{};k=c.LayoutEngine=c.LayoutEngine||{};l=c.LM=c.LM||{};m=c.LMX=c.LMX||{};n=c.Calculado=c.Calculado||{};o=n.Calculado=n.Calculado||{};p=a.EventTarget;q=a.Node;r=a.WindowOrWorkerGlobalScope;s=g.JavaScript=g.JavaScript||{};t=s.JS=s.JS||{};u=s.Pervasives=s.Pervasives||{};v=b.LibraryJS=b.LibraryJS||{};w=v.AppFrameworkTemplate=v.AppFrameworkTemplate||{};x=g.Operators=g.Operators||{};y=v.AppFramework=v.AppFramework||{};z=g.UI=g.UI||{};A=z.View=z.View||{};B=z.HtmlModule=z.HtmlModule||{};C=B.attr=B.attr||{};D=z.Var$1=z.Var$1||{};E=b.Library=b.Library||{};F=E.ParseO=E.ParseO||{};G=z.Var=z.Var||{};H=g.Utils=g.Utils||{};I=E.GuidId=E.GuidId||{};J=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};K=g.Seq=g.Seq||{};L=g.List=g.List||{};M=L.T=L.T||{};N=y.PlugIn=y.PlugIn||{};O=g.Arrays=g.Arrays||{};P=g.Lazy=g.Lazy||{};Q=v.LayoutEngineModule=v.LayoutEngineModule||{};R=y.PlugInQuery=y.PlugInQuery||{};S=y.PlugInAction=y.PlugInAction||{};T=y.PlugInDoc=y.PlugInDoc||{};U=y.PlugInView=y.PlugInView||{};V=y.PlugInVar=y.PlugInVar||{};W=z.Doc=z.Doc||{};X=z.ListModel=z.ListModel||{};Y=v.View=v.View||{};Z=v.LayoutEngine=v.LayoutEngine||{};_0=g.Unchecked=g.Unchecked||{};_1=a.System=a.System||{};_2=_1.Guid=_1.Guid||{};_3=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};_4=z.Client=z.Client||{};_5=_4.Templates=_4.Templates||{};_6=z.AttrModule=z.AttrModule||{};_7=z.Snap=z.Snap||{};_8=z.AttrProxy=z.AttrProxy||{};_9=z.FromView=z.FromView||{};_=g.Strings=g.Strings||{};$=g.Enumerator=g.Enumerator||{};ba=g.LazyExtensionsProxy=g.LazyExtensionsProxy||{};bb=ba.LazyRecord=ba.LazyRecord||{};bc=a.Object;bd=z.Array=z.Array||{};be=g.Collections=g.Collections||{};bf=be.Dictionary=be.Dictionary||{};bg=z.Storage=z.Storage||{};bh=z.ConcreteVar=z.ConcreteVar||{};bi=be.List=be.List||{};bj=z.Abbrev=z.Abbrev||{};bk=bj.Fresh=bj.Fresh||{};bl=E.String=E.String||{};bm=g.Slice=g.Slice||{};bn=g.Numeric=g.Numeric||{};bo=v.WebComponent=v.WebComponent||{};bp=bo.WcTabStrip=bo.WcTabStrip||{};bq=bp.WcTabStripT=bp.WcTabStripT||{};br=z.Templating=z.Templating||{};bs=br.Runtime=br.Runtime||{};bt=bs.Server=bs.Server||{};bu=bt.TemplateInstance=bt.TemplateInstance||{};bv=bt.ProviderBuilder=bt.ProviderBuilder||{};bw=bt.Handler=bt.Handler||{};bx=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};by=a.GeneratedPrintf=a.GeneratedPrintf||{};bz=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};bA=bo.WcSplitter=bo.WcSplitter||{};bB=z.Attrs=z.Attrs||{};bC=z.DomUtility=z.DomUtility||{};bD=z.DocElemNode=z.DocElemNode||{};bE=a.CharacterData;bF=$.T=$.T||{};bG=bg.ArrayStorage=bg.ArrayStorage||{};bH=g.DateUtil=g.DateUtil||{};bI=be.HashSet=be.HashSet||{};bJ=bs.Client=bs.Client||{};bK=bA.WcSplitterT=bA.WcSplitterT||{};bL=a.Error;bM=g.MatchFailureException=g.MatchFailureException||{};bN=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bO=z.DynamicAttrNode=z.DynamicAttrNode||{};bP=z.Elt=z.Elt||{};bQ=z.Docs=z.Docs||{};bR=_4.Attrs=_4.Attrs||{};bS=bR.Dyn=bR.Dyn||{};bT=be.DictionaryUtil=be.DictionaryUtil||{};bU=Q.Layout=Q.Layout||{};bV=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bW=v.Hoverable=v.Hoverable||{};bX=bW.Hoverable=bW.Hoverable||{};bY=g.CancellationTokenSource=g.CancellationTokenSource||{};bZ=z.CheckedInput=z.CheckedInput||{};b0=a.Event;b1=a.UIEvent;b2=v.ResizeObserver=v.ResizeObserver||{};b3=_5.Prepare=_5.Prepare||{};b4=be.KeyCollection=be.KeyCollection||{};b5=z.An=z.An||{};b6=_4.Settings=_4.Settings||{};b7=bj.Mailbox=bj.Mailbox||{};b8=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};b9=z.Updates=z.Updates||{};b_=Q.Measures=Q.Measures||{};b$=g.AggregateException=g.AggregateException||{};ca=g.Concurrency=g.Concurrency||{};cb=_4.Docs=_4.Docs||{};cc=cb.RunState=cb.RunState||{};cd=cb.NodeSet=cb.NodeSet||{};ce=z.Anims=z.Anims||{};cf=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cg=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};ch=g.Queue=g.Queue||{};ci=g.FormatException=g.FormatException||{};cj=ca.CT=ca.CT||{};ck=ca.AsyncBody=ca.AsyncBody||{};cl=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};cm=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cn=z.AppendList=z.AppendList||{};co=be.HashSetUtil=be.HashSetUtil||{};cp=ca.Scheduler=ca.Scheduler||{};cq=g.OperationCanceledException=g.OperationCanceledException||{};cr=z.Easing=z.Easing||{};cs=bj.HashSet=bj.HashSet||{};ct=z.String=z.String||{};cu=cb.DomNodes=cb.DomNodes||{};cv=g.Char=g.Char||{};cw=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cx=a.console;cy=a.IntelliFactory;cz=cy&&cy.Runtime;cA=a.Math;cB=a.jQuery;cC=a.Reflect;cD=a.Date;d.something=function(){(function(cE){return cE("do something");}(function(cE){cx.log(cE);}));};d.main=function(){var cE,cF,cG;cE=self.document.createElement("div");self.document.body.appendChild(cE);cE.outerHTML=w.html();cF=y.getMainDoc().f();cG=self.document.body;_5.LoadLocalTemplates("");W.RunAppend(cG,cF);};e.disabled=function(cE){return _6.DynamicPred("disabled",cE,A.Const(""));};e.inputLabel=function(cE,cF,cG,cH){return W.Element("div",cE,[W.Element("div",[_8.Create("class","input-group")],[W.Element("span",[_8.Create("class","input-group-addon")],[W.TextNode(cG)]),W.Input([_8.Create("class","form-control"),e.disabled(cF)],cH)])]);};e.elemsUI=function(cE,cF){return W.Element("div",[],[cE,W.Button("New",[],cF)]);};e.lensFloat2Str=function(cE){var cF;function cG(cH){if(cH!=null&&cH.$==1)if(cH.$0!==cE.Get())cE.Set(cH.$0);}return new _9.New(A.Map(function(cH){return(function(cI){return function(cJ){return cI(H.prettyPrint(cJ));};}(a.id))(cH);},cE.get_View()),(cF=F.parseDoubleO(),function(cH){return cG(cF(cH));}));};e.textLine=function(cE){return W.Element("div",[],[W.TextView(cE)]);};e.lensStrO=function(cE){return new _9.New(A.Map(function(cF){return cF!=null&&cF.$==1?cF.$0:"";},cE.get_View()),function(cF){if(cF==="")cE.Set(null);else cE.Set({$:1,$0:cF});});};e.mapVarO=function(cE,cF,cG){return new _9.New(A.Map(function(cH){return cH==null?null:{$:1,$0:cE(cH.$0)};},cG.get_View()),function(cH){var cI;if(cH!=null&&cH.$==1){cI=cF(cH.$0);cI==null?void 0:cG.Set({$:1,$0:cI.$0});}else cG.Set(null);});};e.selectorLens=function(cE,cF){function cG(cH){return e.mapVarO(cE,cF,cH);}return function(cH){return e.lensStrO(cG(cH));};};e.selectorLensInt=function(cE){return(e.selectorLens(a.String,F.parseIntO()))(cE);};e.selectorLensGuid=function(cE){return(e.selectorLens(a.String,F.parseGuidO()))(cE);};e.selectorLensGuidId=function(cE){var cF,cG;function cH(cI){return new I({$:0,$0:cI});}return(e.selectorLens(function(cI){var cJ;cJ=cI.get_Id();return a.String(cJ);},(cF=F.parseGuidO(),(cG=function(cI){return cI==null?null:{$:1,$0:cH(cI.$0)};},function(cI){return cG(cF(cI));}))))(cE);};e.unselectorV=function(){J.$cctor();return J.unselectorV;};e.wrapUI=function(cE,cF,cG,cH,cI){var cJ,cK,cL;function cM(cN){return[cN];}cJ=(cK=cF(cG,cH,cI),function(cN){return cM(cK(cN));});cL=cE(M.Empty);return function(cN){return cL(cJ(cN));};};e.simpleButton=function(cE,cF){function cG(cH){}return W.Button(cE,[],function(cH){return cG(cF(cH));});};e.newButton=function(cE){return e.simpleButton("New",cE);};e.orderedList=function(cE){return W.Element("ol",[],[cE]);};f.plugin=function(){J.$cctor();return J.plugin;};f.addPlugIn2=function(cE){var cF;y.addPlugIn(cE);cF=K.tryHead(cE.plgDocs);cF!=null&&cF.$==1?y.mainDocV().Set(cE.plgName+"."+cF.$0.docName):void 0;};f.concatMainDocs=function(cE){return W.Concat(K.choose(function(cF){return cF.docDoc.$==0?{$:1,$0:cF.docDoc.$0.f()}:null;},K.choose(function(cF){return K.tryHead(cF.plgDocs);},cE)));};h=g.Obj=cz.Class({Equals:function(cE){return this===cE;},GetHashCode:function(){return -1;}},null,h);h.New=cz.Ctor(function(){},h);i=f.PlugInBuilder=cz.Class({Zero:function(){return N.New("Main",[],[],[],[],[]);},Yield:function(){return this.Zero();},For:function(cE,cF){var cG;cG=$.Get(cE);while(cG.MoveNext())cF(cG.Current());},Name:function(cE,cF){return N.New(cF,cE.plgVars,cE.plgViews,cE.plgDocs,cE.plgActions,cE.plgQueries);},AddVar:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars.concat([y.newVar(cF,cG)]),cE.plgViews,cE.plgDocs,cE.plgActions,cE.plgQueries);},AddDoc:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars,cE.plgViews,cE.plgDocs.concat([y.newDoc(cF,cG)]),cE.plgActions,cE.plgQueries);},AddDocF:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars,cE.plgViews,cE.plgDocs.concat([y.newDoc(cF,P.Create(function(){return Q.turnToView(cG);}))]),cE.plgActions,cE.plgQueries);},AddAct:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars,cE.plgViews,cE.plgDocs,cE.plgActions.concat([y.newAct(cF,cG)]),cE.plgQueries);},AddActO:function(cE,cF,cG){return cG==null?cE:N.New(cE.plgName,cE.plgVars,cE.plgViews,cE.plgDocs,cE.plgActions.concat([y.newAct(cF,cG.$0)]),cE.plgQueries);},InsDoc:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars,cE.plgViews,[y.newDoc(cF,cG)].concat(cE.plgDocs),cE.plgActions,cE.plgQueries);},AddViw:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars,cE.plgViews.concat([y.newViw(cF,cG)]),cE.plgDocs,cE.plgActions,cE.plgQueries);},Merge:function(cE,cF,cG){return N.New(cE.plgName,cE.plgVars.concat(O.map(function(cH){return V.New(cF+cH.varName,cH.varVar);},cG.plgVars)),cE.plgViews.concat(O.map(function(cH){return U.New(cF+cH.viwName,cH.viwView);},cG.plgViews)),cE.plgDocs.concat(O.map(function(cH){return T.New(cF+cH.docName,cH.docDoc);},cG.plgDocs)),cE.plgActions.concat(O.map(function(cH){return S.New(cF+cH.actName,cH.actFunction,cH.actEnabled);},cG.plgActions)),cE.plgQueries.concat(O.map(function(cH){return R.New(cF+cH.qryName,cH.qryFunction);},cG.plgQueries)));}},h,i);i.New=cz.Ctor(function(){h.New.call(this);},i);j=f.ListModelData=cz.Class({PlugIn:function(cE){var cF,cG,cH;function cI(cJ){}cF=this;cG=f.plugin();return cG.AddAct(cG.AddAct(cG.AddVar(cG.AddDoc(cG.AddDoc(cG.Yield(),"list",P.Create(function(){return cF.doc;})),"cur",P.Create(function(){return cF.get_CurrentDoc();})),"sel",cE(this.selV)),"add",(cH=this.add,function(cJ){return cI(cH(cJ));})),"del",this.delCur);},get_CurrentW:function(){var cE,cF,cG,cH,cI,cJ;return A.Map((cE=function(cK){return cK==null?null:a.id(cK.$0);},(cF=(cG=this.def,function(cK){return cK==null?cG:cK.$0;}),function(cK){return cF(cE(cK));})),A.Bind((cH=(cI=(cJ=this.elems,function(cK){return cJ.TryFindByKeyAsView(cK);}),function(cK){return cK==null?null:{$:1,$0:cI(cK.$0)};}),function(cK){return Y.insertWO(cH(cK));}),this.selV.get_View()));},get_CurrentV:function(){var cE;cE=this;return new _9.New(this.get_CurrentW(),function(cF){var cG;cG=cE.selV.Get();cG!=null&&cG.$==1?cE.elems.ContainsKey(cG.$0)?cE.elems.Append(cF):void 0:void 0;});},get_CurrentDoc:function(){return(this.getDoc(this.selV.get_View()))(this.get_CurrentV());}},null,j);j.New=function(cE,cF,cG,cH,cI,cJ,cK){return new j({elems:cE,doc:cF,selV:cG,add:cH,delCur:cI,getDoc:cJ,def:cK});};k.addLayout0=function(cE){Q.addLayout(cE);y.mainDocV().Set(cE.lytName);};l.getDoc=function(cE,cF,cG,cH){var cI,cJ,cK;function cL(cO){var cP;return cO!=null&&cO.$==1&&(cI.ContainsKey(cO.$0)&&(cP=cO.$0,true))?{$:1,$0:cP}:null;}function cM(cO){if(!_0.Equals(cJ.Get(),cO))cJ.Set(cO);}function cN(cO,cP){cK.Set(null);return cI.RemoveByKey(cO);}cI=X.Create(cE,M.Empty);cJ=D.Create$1(null);cK=new _9.New(cJ.get_View(),function(cO){return cM(cL(cO));});return j.New(cI,W.Flatten(cI.MapLens(function(cO,cP){return((cH(cK,function(cQ){return cN(cO,cQ);}))(A.Const({$:1,$0:cO})))(cP);})),cK,function(){var cO;cO=cG();cI.Append(cO);cK.Set({$:1,$0:cE(cO)});return cO;},function(){var cO;cO=cK.Get();cO==null?void 0:cN(cO.$0,null);},cH(cK,a.ignore),cF);};l.setCurrentDoc=function(cE,cF){return j.New(cF.elems,cF.doc,cF.selV,cF.add,cF.delCur,cE(e.unselectorV(),a.ignore),cF.def);};l.addElements=function(cE,cF){cE.elems.AppendMany(cF);};m.addNewO=function(cE,cF,cG){var cH;cH=cF;return function(){var cI;cI=[cH,cE()];cH=cG(cH);return cI;};};m.elemUI2=function(cE,cF,cG,cH,cI){function cJ(cK,cL){return[cK,cL];}return cE(cF,cG,cH,D.Lens(cI,function(cK){return cK[1];},function(cK,cL){return(function(cM){var cN;cN=cM[0];return function(cO){return cJ(cN,cO);};}(cK))(cL);}));};m.getDocInt=function(cE,cF,cG){function cH(cI,cJ,cK,cL){return m.elemUI2(cG,cI,cJ,cK,cL);}return l.getDoc(function(cI){return cI[0];},[-1,cE],m.addNewO(cF,0,function(cI){return 1+cI;}),function(cI,cJ){return cz.Curried(cH,2,[cI,cJ]);});};m.getDocGuid=function(cE,cF,cG){function cH(cI,cJ,cK,cL){return m.elemUI2(cG,cI,cJ,cK,cL);}return l.getDoc(function(cI){return cI[0];},["00000000-0000-0000-0000-000000000000",cE],m.addNewO(cF,_2.NewGuid(),function(){return _2.NewGuid();}),function(cI,cJ){return cz.Curried(cH,2,[cI,cJ]);});};m.getDocGuidId=function(cE,cF,cG){var cH;function cI(cJ,cK,cL,cM){return m.elemUI2(cG,cJ,cK,cL,cM);}cH=m.addNewO(cF,new I({$:0,$0:_2.NewGuid()}),function(){return new I({$:0,$0:_2.NewGuid()});});return l.getDoc(function(cJ){return cJ[0];},[new I({$:0,$0:"00000000-0000-0000-0000-000000000000"}),cE],cH,function(cJ,cK){return cz.Curried(cI,2,[cJ,cK]);});};m.setCurrentDoc=function(cE){function cF(cG,cH,cI,cJ){return m.elemUI2(cE,cG,cH,cI,cJ);}return function(cG){return l.setCurrentDoc(function(cH,cI){return cz.Curried(cF,2,[cH,cI]);},cG);};};m.addElements=function(cE,cF){K.iter(function(cG){cE.elems.Append([(cE.add())[0],cG]);},cF);};n.newCalc=function(){return o.New(new I({$:0,$0:_2.NewGuid()}),0,0,0);};n.def=function(){J.$cctor();return J.def;};n.calcUI=function(cE,cF,cG,cH,cI){var cJ;cJ=A.Map(function(cK){return cK==null;},cH);return W.Element("div",[_6.Dynamic("style",A.Map(function(cK){return cK?"background-color:lightblue":"";},A.Map2(_0.Equals,cF.get_View(),cH))),_8.HandlerImpl("click",function(){return function(){return A.Get(function(cK){cF.Set(cK);},cH);};})],[W.Button("x",[_6.Dynamic("style",A.Map(function(cK){return!cE||cK?"display:None":"";},cJ))],cG),e.textLine(A.Apply(A.Map2(function(cK,cL){return function(cM){return((((cz.Curried(function(cN,cO,cP,cQ){return cN("("+H.prettyPrint(cO)+", "+H.prettyPrint(cP)+", "+H.prettyPrint(cQ)+")");},4))(a.id))(cK.valorA))(cL.valorB))(cM.valorC);};},cI.get_View(),cI.get_View()),cI.get_View()))]);};n.calcUIDet=function(cE,cF,cG,cH,cI){var cJ,cK,cL,cM,cN,cO,cP,cQ;cJ=e.lensFloat2Str(D.Lens(cI,function(cR){return cR.valorA;},function(cR,cS){return o.New(cR.id,cS,cR.valorB,cR.valorC);}));cK=e.lensFloat2Str(D.Lens(cI,function(cR){return cR.valorB;},function(cR,cS){return o.New(cR.id,cR.valorA,cS,cR.valorC);}));cL=e.lensFloat2Str(D.Lens(cI,function(cR){return cR.valorC;},function(cR,cS){return o.New(cR.id,cR.valorA,cR.valorB,cS);}));cM=A.Map(function(cR){return cR.valorA*2;},cI.get_View());cN=A.Map2(function(cR,cS){return cR.valorA*cS.valorB;},cI.get_View(),cI.get_View());cO=A.Map2(function(cR,cS){return cR+cS.valorC;},cN,cI.get_View());cP=A.Map2(_0.Equals,cF.get_View(),cH);cQ=A.Map(function(cR){return cR==null;},cH);return W.Element("div",[_6.Dynamic("style",A.Map2(function(cR,cS){return cR?"display:none; background-color:lightgray; color:gray":cS?"background-color:lightblue":"";},cQ,cP)),_8.HandlerImpl("click",function(){return function(){return A.Get(function(cR){cF.Set(cR);},cH);};})],[W.Button("x",[_6.Dynamic("style",A.Map(function(cR){return!cE||cR?"display:none":"";},cQ))],cG),e.inputLabel([],cQ,"valor A: ",cJ),e.inputLabel([],cQ,"valor B: ",cK),e.inputLabel([],cQ,"valor C: ",cL),e.textLine(A.Map2(function(cR,cS){return(((cz.Curried3(function(cT,cU,cV){return cT(H.prettyPrint(cU)+" = "+H.toSafe(cV)+" * 2");}))(a.id))(cR))(cS);},cM,cJ.get_View())),e.textLine(A.Apply(A.Map2(function(cR,cS){return function(cT){return((((cz.Curried(function(cU,cV,cW,cX){return cU(H.prettyPrint(cV)+" = "+H.toSafe(cW)+" * "+H.toSafe(cX));},4))(a.id))(cR))(cS))(cT);};},cN,cJ.get_View()),cK.get_View())),e.textLine(A.Apply(A.Apply(A.Map2(function(cR,cS){return function(cT){return function(cU){return(((((cz.Curried(function(cV,cW,cX,cY,cZ){return cV(H.prettyPrint(cW)+" = "+H.toSafe(cX)+" * "+H.toSafe(cY)+" + "+H.toSafe(cZ));},5))(a.id))(cR))(cS))(cT))(cU);};};},cO,cJ.get_View()),cK.get_View()),cL.get_View()))]);};n.calcUIEdit=function(cE,cF,cG,cH){return W.BindView(a.id,A.Map(function(cI){return cI?n.calcUIDet(true,cE,cF,cG,cH):n.calcUI(false,cE,cF,cG,cH);},A.Map2(_0.Equals,cE.get_View(),cG)));};n.list0=function(){J.$cctor();return J.list0;};n.list2=function(){J.$cctor();return J.list2;};n.list3=function(){J.$cctor();return J.list3;};n.list1=function(){J.$cctor();return J.list1;};o.New=function(cE,cF,cG,cH){return{id:cE,valorA:cF,valorB:cG,valorC:cH};};t.GetFields=function(cE){var cF,cG;cF=[];for(var cH in cE)cF.push([cH,cE[cH]]);return cF;};t.GetFieldValues=function(cE){var cF,cG;cF=[];for(var cH in cE)cF.push(cE[cH]);return cF;};u.NewFromSeq=function(cE){var cF,cG,cH;cF={};cG=$.Get(cE);try{while(cG.MoveNext()){cH=cG.Current();cF[cH[0]]=cH[1];}}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}return cF;};w.html=function(){J.$cctor();return J.html;};x.KeyValue=function(cE){return[cE.K,cE.V];};x.range=function(cE,cF){var cG;cG=1+cF-cE;return cG<=0?[]:K.init(cG,function(cH){return cH+cE;});};x.FailWith=function(cE){throw new bL(cE);};x.toInt=function(cE){var cF;cF=x.toUInt(cE);return cF>=2147483648?cF-4294967296:cF;};x.toUInt=function(cE){return(cE<0?cA.ceil(cE):cA.floor(cE))>>>0;};y.getMainDoc=function(){_3.$cctor();return _3.getMainDoc;};y.newVar=function(cE,cF){return V.New(cE,cF);};y.newDoc=function(cE,cF){return T.New(cE,{$:0,$0:cF});};y.newAct=function(cE,cF){return S.New(cE,{$:0,$0:cF},A.Const(true));};y.newViw=function(cE,cF){return U.New(cE,cF);};y.addPlugIn=function(cE){y.plugIns().Append(cE);y.mainDocV().Set(y.mainDocV().Get());};y.mainDocV=function(){_3.$cctor();return _3.mainDocV;};y.plugIns=function(){_3.$cctor();return _3.plugIns;};y.newDocF=function(cE,cF){return T.New(cE,cF);};y.selectionPlugInO=function(){_3.$cctor();return _3.selectionPlugInO;};y.defaultPlugIn=function(){_3.$cctor();return _3.defaultPlugIn;};y.currentPlugInW=function(){_3.$cctor();return _3.currentPlugInW;};y.renderPlugIns=function(){return W.Flatten(y.plugIns().MapLens(function(cE){var cF,cG,cH,cI;return(cF=(cG=bv.Make().WithHole({$:1,$0:"name",$1:cE}),cG.WithHole(bw.EventQ2(cG.k,"select",function(){return cG.i;},function(){y.selectionPlugInO().Set({$:1,$0:cE});}))).WithHole({$:2,$0:"selected",$1:A.Map(function(cJ){return _0.Equals(cJ,{$:1,$0:cE})?"selected":"";},y.selectionPlugInO().get_View())}),(cH=bw.CompleteHoles(cF.k,cF.h,[]),(cI=new bu.New(cH[1],bx.tile(cH[0])),(cF.i=cI,cI)))).get_Doc();}));};y.renderVars=function(){function cE(cG,cH){return[cG.plgName,cH.varName];}function cF(cG,cH){var cI,cJ,cK;return(cI=bv.Make().WithHole({$:1,$0:"name",$1:cH.varName}).WithHole({$:8,$0:"value",$1:cH.varVar}),(cJ=bw.CompleteHoles(cI.k,cI.h,[["value",0]]),(cK=new bu.New(cJ[1],bx.namevalueinput(cJ[0])),(cI.i=cK,cK)))).get_Doc();}return W.ConvertBy(function(cG){return cE(cG[0],cG[1]);},function(cG){return cF(cG[0],cG[1]);},A.Map(function(cG){return K.map(function(cH){return[cG,cH];},cG.plgVars);},y.currentPlugInW()));};y.renderViews=function(){function cE(cG,cH){return[cG.plgName,cH.viwName];}function cF(cG,cH){var cI,cJ,cK;return(cI=bv.Make().WithHole({$:1,$0:"name",$1:cH.viwName}).WithHole({$:2,$0:"value",$1:cH.viwView}),(cJ=bw.CompleteHoles(cI.k,cI.h,[]),(cK=new bu.New(cJ[1],bx.namevalue(cJ[0])),(cI.i=cK,cK)))).get_Doc();}return W.ConvertBy(function(cG){return cE(cG[0],cG[1]);},function(cG){return cF(cG[0],cG[1]);},A.Map(function(cG){return K.map(function(cH){return[cG,cH];},cG.plgViews);},y.currentPlugInW()));};y.renderDocs=function(){function cE(cG,cH){return[cG.plgName,cH.docName];}function cF(cG,cH){var cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;return(cI=(cJ=(cK=cH.docName+(cL=cH.docDoc,cL.$==1?(cM=_.concat(", ",L.ofArray([cL.$1])),(function(cT){return function(cU){return cT("("+H.toSafe(cU)+")");};}(a.id))(cM)):cL.$==2?(cN=_.concat(", ",L.ofArray([cL.$1,cL.$2])),(function(cT){return function(cU){return cT("("+H.toSafe(cU)+")");};}(a.id))(cN)):cL.$==3?(cO=_.concat(", ",L.ofArray([cL.$1,cL.$2,cL.$3])),(function(cT){return function(cU){return cT("("+H.toSafe(cU)+")");};}(a.id))(cO)):cL.$==4?(cP=_.concat(", ",L.ofArray([cL.$1,cL.$2,cL.$3,cL.$4])),(function(cT){return function(cU){return cT("("+H.toSafe(cU)+")");};}(a.id))(cP)):cL.$==5?(cQ=_.concat(", ",L.ofArray([cL.$1,cL.$2,cL.$3,cL.$4,cL.$5])),(function(cT){return function(cU){return cT("("+H.toSafe(cU)+")");};}(a.id))(cQ)):""),bv.Make().WithHole({$:1,$0:"name",$1:cK})),cJ.WithHole(bw.EventQ2(cJ.k,"select",function(){return cJ.i;},function(){A.Get(function(cT){y.mainDocV().Set(cT.plgName+"."+cH.docName);},y.currentPlugInW());}))),(cR=bw.CompleteHoles(cI.k,cI.h,[]),(cS=new bu.New(cR[1],bx.tile(cR[0])),(cI.i=cS,cS)))).get_Doc();}return W.ConvertBy(function(cG){return cE(cG[0],cG[1]);},function(cG){return cF(cG[0],cG[1]);},A.Map(function(cG){return K.map(function(cH){return[cG,cH];},cG.plgDocs);},y.currentPlugInW()));};y.renderActions=function(){function cE(cG,cH){return[cG.plgName,cH.actName];}function cF(cG,cH){var cI,cJ,cK,cL;cI=(cJ=cH.actFunction,cJ.$==1?(cK=_.concat(", ",L.ofArray([cJ.$1])),(function(cM){return function(cN){return cM("("+H.toSafe(cN)+")");};}(a.id))(cK)):cJ.$==2?(cL=_.concat(", ",L.ofArray([cJ.$1,cJ.$2])),(function(cM){return function(cN){return cM("("+H.toSafe(cN)+")");};}(a.id))(cL)):"");return W.EmbedView(A.Map(function(cM){var cN,cO,cP,cQ,cR,cS,cT,cU;return cM?(cN=(cO=bv.Make().WithHole({$:1,$0:"name",$1:cH.actName+cI}),cO.WithHole(bw.EventQ2(cO.k,"click",function(){return cO.i;},function(cV){y.callFunction(cV,null,cH.actFunction);}))),(cP=bw.CompleteHoles(cN.k,cN.h,[]),(cQ=new bu.New(cP[1],bx.action(cP[0])),(cN.i=cQ,cQ)))).get_Doc():(cR=(cS=bv.Make().WithHole({$:1,$0:"name",$1:cH.actName}),cS.WithHole(bw.EventQ2(cS.k,"click",function(){return cS.i;},function(cV){y.callFunction(cV,null,cH.actFunction);}))),(cT=bw.CompleteHoles(cR.k,cR.h,[]),(cU=new bu.New(cT[1],bx.actiondisabled(cT[0])),(cR.i=cU,cU)))).get_Doc();},cH.actEnabled));}return W.ConvertBy(function(cG){return cE(cG[0],cG[1]);},function(cG){return cF(cG[0],cG[1]);},A.Map(function(cG){return K.map(function(cH){return[cG,cH];},cG.plgActions);},y.currentPlugInW()));};y.renderQueries=function(){function cE(cG,cH){return[cG.plgName,cH.qryName];}function cF(cG,cH){var cI,cJ,cK,cL;return(cI=(cJ=bv.Make().WithHole({$:1,$0:"name",$1:cH.qryName}),cJ.WithHole(bw.EventQ2(cJ.k,"select",function(){return cJ.i;},function(){a.alert(cH.qryFunction(null));}))),(cK=bw.CompleteHoles(cI.k,cI.h,[]),(cL=new bu.New(cK[1],bx.tile(cK[0])),(cI.i=cL,cL)))).get_Doc();}return W.ConvertBy(function(cG){return cE(cG[0],cG[1]);},function(cG){return cF(cG[0],cG[1]);},A.Map(function(cG){return K.map(function(cH){return[cG,cH];},cG.plgQueries);},y.currentPlugInW()));};y.newQry=function(cE,cF){return R.New(cE,cF);};y.AppFwkClient=function(){_3.$cctor();return _3.AppFwkClient;};y.actHello=function(){_3.$cctor();return _3.actHello;};y.qryDocs=function(){_3.$cctor();return _3.qryDocs;};y.horizontal=function(cE,cF,cG,cH,cI){var cJ,cK,cL,cM;return(cJ=(cK=bv.Make().WithHole({$:2,$0:"partsizes",$1:cE}).WithHole({$:7,$0:"afterrender",$1:cF}).WithHole({$:7,$0:"afterrendersp",$1:cG}),cK.WithHole(bw.EventQ2(cK.k,"mousedown",function(){return cK.i;},function(cN){cH(cN.Event);}))).WithHole({$:2,$0:"gap",$1:cI}),(cL=bw.CompleteHoles(cJ.k,cJ.h,[]),(cM=new bu.New(cL[1],bx.wcompsplitterhor(cL[0])),(cJ.i=cM,cM)))).get_Doc();};y.vertical=function(cE,cF,cG,cH,cI){var cJ,cK,cL,cM;return(cJ=(cK=bv.Make().WithHole({$:2,$0:"partsizes",$1:cE}).WithHole({$:7,$0:"afterrender",$1:cF}).WithHole({$:7,$0:"afterrendersp",$1:cG}),cK.WithHole(bw.EventQ2(cK.k,"mousedown",function(){return cK.i;},function(cN){cH(cN.Event);}))).WithHole({$:2,$0:"gap",$1:cI}),(cL=bw.CompleteHoles(cJ.k,cJ.h,[]),(cM=new bu.New(cL[1],bx.wcompsplitterver(cL[0])),(cJ.i=cM,cM)))).get_Doc();};y.mainDoc=function(){var cE,cF,cG,cH,cI,cJ;return(cE=(cF=y.getMainClientDoc(),(cG=(cH=y.mainDocV().get_View(),bv.Make().WithHole({$:2,$0:"maindoc",$1:cH})),cG.WithHole(bw.EventQ2(cG.k,"goclient",function(){return cG.i;},function(){y.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:cF})),(cI=bw.CompleteHoles(cE.k,cE.h,[]),(cJ=new bu.New(cI[1],bx.appframework(cI[0])),(cE.i=cJ,cJ)))).get_Doc();};y.splitName=function(cE){function cF(cH){return bl.splitByChar(".",cH);}function cG(cH){return O.length(cH)===1?[cE,O.get(cH,0)]:[O.get(cH,0),O.get(cH,1)];}return function(cH){return cG(cF(cH));};};y.tryGetPlugIn=function(cE){return y.plugIns().TryFindByKey(cE);};y.newActF=function(cE,cF){return S.New(cE,cF,A.Const(true));};y.tryGetAct=function(cE,cF){var cG;cG=y.tryGetPlugIn(cE);return cG==null?null:O.tryFind(function(cH){return cH.actName===cF;},cG.$0.plgActions);};y.callFunction=function(cE,cF,cG){if(cG.$==1)cG.$0(cE);else if(cG.$==2)(cG.$0(cE))(cF);else cG.$0();};y.tryGetVar=function(cE,cF){var cG;cG=y.tryGetPlugIn(cE);return cG==null?null:O.tryFind(function(cH){return cH.varName===cF;},cG.$0.plgVars);};y.getMainClientDoc=function(){var cE;return W.EmbedView((cE=y.plugIns().v,A.Map2(function(cF,cG){var cH,cI;cH=K.tryPick(function(cJ){var cK;cK=K.tryFind(function(cL){return cJ.plgName===cF||cJ.plgName+"."+cL.docName===cF;},cJ.plgDocs);return cK==null?null:{$:1,$0:y.getLazyDoc(cK.$0)};},cG);cI=y.AppFwkClient().f();return cH==null?cI:cH.$0;},y.mainDocV().get_View(),cE)));};y.tryGetVoV=function(cE,cF){var cG,cH,cI;cG=(cH=y.tryGetVar(cE,cF),cH==null?null:{$:1,$0:{$:1,$0:cH.$0.varVar}});return cG==null?(cI=y.tryGetViw(cE,cF),cI==null?null:{$:1,$0:new _9.New(cI.$0.viwView,a.ignore)}):cG.$0;};y.tryGetDoc=function(cE,cF){var cG;cG=y.tryGetPlugIn(cE);return cG==null?null:O.tryFind(function(cH){return cH.docName===cF;},cG.$0.plgDocs);};y.tryGetWoW=function(cE,cF){var cG,cH,cI;cG=(cH=y.tryGetViw(cE,cF),cH==null?null:{$:1,$0:{$:1,$0:cH.$0.viwView}});return cG==null?(cI=y.tryGetVar(cE,cF),cI==null?null:{$:1,$0:cI.$0.varVar.get_View()}):cG.$0;};y.tryGetViw=function(cE,cF){var cG;cG=y.tryGetPlugIn(cE);return cG==null?null:O.tryFind(function(cH){return cH.viwName===cF;},cG.$0.plgViews);};y.getLazyDoc=function(cE){var cF;cF=cE.docDoc;return cF.$==0?cF.$0.f():W.Element("div",[],[W.TextNode((function(cG){return function(cH){return cG("Doc with parameters not allowed here: "+by.p(cH));};}(a.id))(cE))]);};A.Const=function(cE){var cF;cF=_7.New({$:0,$0:cE});return function(){return cF;};};A.Map=function(cE,cF){return A.CreateLazy(function(){return _7.Map(cE,cF());});};A.Bind=function(cE,cF){return A.Join(A.Map(cE,cF));};A.Get=function(cE,cF){var cG;function cH(){_7.WhenRun(cF(),function(cI){if(!cG[0]){cG[0]=true;cE(cI);}},function(){if(!cG[0])cH();});}cG=[false];cH();};A.Apply=function(cE,cF){return A.Map2(function(cG,cH){return cG(cH);},cE,cF);};A.Map2=function(cE,cF,cG){return A.CreateLazy(function(){return _7.Map2(cE,cF(),cG());});};A.CreateLazy=function(cE){var cF;cF={c:null,o:cE};return function(){var cG,cH;cG=cF.c;return cG===null?(cG=cF.o(),cF.c=cG,(cH=cG.s,cH!=null&&cH.$==0)?cF.o=null:_7.WhenObsoleteRun(cG,function(){cF.c=null;}),cG):cG;};};A.Join=function(cE){return A.CreateLazy(function(){return _7.Join(cE());});};A.Sink=function(cE,cF){function cG(){_7.WhenRun(cF(),cE,function(){ca.scheduler().Fork(cG);});}ca.scheduler().Fork(cG);};A.TryGet=function(cE){return _7.TryGet(cE());};A.Map2Unit=function(cE,cF){return A.CreateLazy(function(){return _7.Map2Unit(cE(),cF());});};A.Sequence=function(cE){return A.CreateLazy(function(){return _7.Sequence(K.map(function(cF){return cF();},cE));});};A.MapSeqCachedViewBy=function(cE,cF,cG){var cH;cH=[new bf.New$5()];return A.Map(function(cI){var cJ,cK,cL;cJ=cH[0];cK=new bf.New$5();cL=bd.mapInPlace(function(cM){var cN,cO,cP;cN=cE(cM);cO=cJ.ContainsKey(cN)?(cP=cJ.get_Item(cN),(D.Set(cP.r,cM),cP)):A.ConvertSeqNode(function(cQ){return cF(cN,cQ);},cM);cK.set_Item(cN,cO);return cO.e;},O.ofSeq(cI));cH[0]=cK;return cL;},cG);};A.MapSeqCachedBy=function(cE,cF,cG){var cH;cH=[new bf.New$5()];return A.Map(function(cI){var cJ,cK,cL;cJ=cH[0];cK=new bf.New$5();cL=bd.mapInPlace(function(cM){var cN,cO;cN=cE(cM);cO=cJ.ContainsKey(cN)?cJ.get_Item(cN):cF(cM);cK.set_Item(cN,cO);return cO;},O.ofSeq(cI));cH[0]=cK;return cL;},cG);};A.ConvertSeqNode=function(cE,cF){var cG,cH;cG=D.Create$1(cF);cH=cG.get_View();return{e:cE(cH),r:cG,w:cH};};A.Map3=function(cE,cF,cG,cH){return A.CreateLazy(function(){return _7.Map3(cE,cF(),cG(),cH());});};C=B.attr=cz.Class({},h,C);D=z.Var$1=cz.Class({},h,D);D.Create$1=function(cE){return new bh.New(false,_7.New({$:2,$0:cE,$1:[]}),cE);};D.Lens=function(cE,cF,cG){var cH,cI,cJ;cH=bk.Id();cI=A.Map(cF,cE.get_View());cJ=new G({Get:function(){return cF(cE.Get());},Set:function(cK){return cE.Update(function(cL){return cG(cL,cK);});},SetFinal:function(cK){return this.Set(cK);},Update:function(cK){return cE.Update(function(cL){return cG(cL,cK(cF(cL)));});},UpdateMaybe:function(cK){return cE.UpdateMaybe(function(cL){var cM;cM=cK(cF(cL));return cM==null?null:{$:1,$0:cG(cL,cM.$0)};});},get_View:function(){return cI;},get_Id:function(){return cH;}});G.New.call(cJ);return cJ;};D.Set=function(cE,cF){cE.Set(cF);};F.parseDoubleO=function(){_3.$cctor();return _3.parseDoubleO;};F.parseIntO=function(){_3.$cctor();return _3.parseIntO;};F.parseGuidO=function(){_3.$cctor();return _3.parseGuidO;};F.tryParseWith=function(cE){function cF(cG,cH){return cG?{$:1,$0:cH}:null;}return function(cG){return cF.apply(null,cE(cG));};};F.parseDateO=function(){_3.$cctor();return _3.parseDateO;};F.parseInt64O=function(){_3.$cctor();return _3.parseInt64O;};F.parseSingleO=function(){_3.$cctor();return _3.parseSingleO;};F.Double=function(){_3.$cctor();return _3["|Double|_|"];};F.Int=function(){_3.$cctor();return _3["|Int|_|"];};G=z.Var=cz.Class({},h,G);G.New=cz.Ctor(function(){h.New.call(this);},G);H.prettyPrint=function(cE){var cF,cG;function cH(cI,cJ){return cI+" = "+H.prettyPrint(cJ);}return cE===null?"null":(cF=typeof cE,cF=="string"?"\""+cE+"\"":cF=="object"?cE instanceof a.Array?"[|"+_.concat("; ",O.map(H.prettyPrint,cE))+"|]":(cG=a.String(cE),cG==="[object Object]"?"{"+_.concat("; ",O.map(function(cI){return cH(cI[0],cI[1]);},t.GetFields(cE)))+"}":cG):a.String(cE));};H.toSafe=function(cE){return cE==null?"":cE;};H.printList=function(cE,cF){return"["+_.concat("; ",K.map(cE,cF))+"]";};I=E.GuidId=cz.Class({get_Id:function(){return this.$0;}},null,I);J.$cctor=function(){var cE,cF,cG,cH,cI;J.$cctor=a.ignore;J.html="\r\n            <div style=\"display:none\" >\r\n                <div links>\r\n                    <link href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" type=\"text/css\" rel=\"stylesheet\">\r\n                    <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"  type=\"text/javascript\"></script>\r\n                </div>\r\n                <div ws-template=\"AppFramework\" style=\"height: calc(100vh - 4px); width: calc(100vw - 4px) \" class=\"relative\" >\r\n                    <div ws-hole=\"MainClient\"></div>\r\n                    <div class=\"AppFrameworkGo\"><button ws-onclick=\"GoClient\">${MainDoc}</button></div>\r\n                </div>\r\n                <style>\r\n                    .AppFrameworkGo {\r\n                        max-width: 2px;\r\n                        max-height: 2px;\r\n                        z-index: 4000;\r\n                        overflow: hidden;\r\n                        position: fixed;\r\n                        top: 0px;\r\n                        left: 0px;\r\n                    }\r\n                </style>\r\n                <div ws-template=\"FixedSplitterVer\" \r\n                    style=\"display: grid; \r\n                           grid-gap: 0px; \r\n                           box-sizing: border-box; \r\n                           height: 100%;\r\n                           width : 100%;\r\n                           grid-template-areas: 'one two'; \r\n                           grid-template-rows   :100%; \r\n                           overflow: hidden; \r\n                           grid-template-columns: ${PartSizes}\"  >\r\n                   <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n                   <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"FixedSplitterHor\" \r\n               style=\"display: grid; \r\n                      grid-gap: 0px; \r\n                      box-sizing: border-box; \r\n                      height: 100%;\r\n                      width : 100%;\r\n                      grid-template-areas: 'one' 'two'; \r\n                      grid-template-columns:100%; \r\n                      overflow: hidden; \r\n                      grid-template-rows   : ${PartSizes}\"  >\r\n              <div ws-hole=\"First\"  style=\"grid-area: one; \" class=\"relative\" ></div>\r\n              <div ws-hole=\"Second\" style=\"grid-area: two; \" class=\"relative\" ></div>\r\n                </div>               \r\n                <div ws-template=\"WCompSplitterHor\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid;\r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one' 'two'; \r\n                            grid-template-columns:100%; \r\n                            overflow: hidden; \r\n                            grid-template-rows   : ${PartSizes}\" \r\n                     >\r\n                     <slot></slot>\r\n                    <slot name=\"splitter\">  <div style=\"grid-row:2; grid-column:1 / 1 ; cursor: row-resize; z-index: 3; background-color: #eef ; height: ${Gap}; margin-top :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-row:2; grid-column:1 / 1 ; \r\n                            cursor: row-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            height: ${Gap}; \r\n                            margin-top :-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>        \r\n                <div ws-template=\"WCompSplitterVer\" \r\n                     ws-onafterrender=\"AfterRender\"\r\n                     style=\"display: grid; \r\n                            grid-gap: 5px; \r\n                            box-sizing: border-box; \r\n                            grid-template-areas: 'one two'; \r\n                            grid-template-rows   :100%; \r\n                            overflow: hidden; \r\n                            grid-template-columns: ${PartSizes}\"  >\r\n                    <slot></slot>\r\n                    <slot name=\"splitter\"> <div style=\"grid-column:2; grid-row:1 / 1 ; cursor: col-resize; z-index: 3; background-color: #eef ; width: ${Gap}; margin-left :-${Gap}\" ws-onmousedown=\"MouseDown\" ws-onafterrender=\"AfterRenderSp\" ></div> </slot>\r\n                    <style>\r\n                        ::slotted(*) {\r\n                            display: grid;\r\n                            height : 100%;\r\n                            width  : 100%;\r\n                            overflow: hidden;\r\n                        }\r\n                        ::slotted(*:nth-child(2)) {\r\n                            grid-area: two;\r\n                        }\r\n                        ::slotted(*[slot=\"splitter\"]) {\r\n                            grid-column:2; grid-row:1 / 1\r\n                            cursor: column-resize; \r\n                            z-index: 3; \r\n                            background-color: #eef ; \r\n                            width: ${Gap}; \r\n                            margin-left:-${Gap}\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ws-template=\"AppFwkClient\" >\r\n                    <ws-FixedSplitterHor>\r\n                        <PartSizes>55px calc(100% - 55px)</PartSizes>\r\n                        <First>\r\n                            <span style=\"display: grid;\r\n                                  grid-template-columns: 30% 20% 20% 10%;\r\n                                  grid-gap: 25px;\r\n                                \">\r\n                                <div class=\"mainTitle\">AppFramework</div>\r\n                            </span>\r\n                        </First>\r\n                        <Second>\r\n                                <ws-FixedSplitterVer>\r\n                                    <PartSizes>calc(100% - 150px) 150px</PartSizes>\r\n                                    <First>\r\n                                        <wcomp-splitter vertical value=\"18\" max=\"100\">\r\n                                            <div><div ws-hole=\"PlugIns\" style=\"overflow:auto\" >\r\n                                                <div ws-template=\"Tile\">\r\n                                                    <div draggable=\"true\" class=\"code-editor-list-tile ${Predecessor} ${Selected}\" \r\n                                                    ws-ondrag=\"Drag\"\r\n                                                    ws-ondragover=\"DragOver\"\r\n                                                    ws-ondrop=\"Drop\"\r\n                                                   >\r\n                                                   <span class=\"node ${Parent} ${ErrorMsg}\" title=\"expand\" ws-onclick=\"ToggleCollapse\"></span>\r\n                                                   <div  class=\"code-editor-list-text\" style=\"text-indent:${Indent}em; white-space: pre\" ws-onclick=\"Select\" ws-onafterrender=\"AfterRender\" >${Name}</div>\r\n                                                   <span class=\"predecessor\" title=\"toggle predecessor\" ws-onclick=\"TogglePred\">X</span>\r\n                                               </div>\r\n                                       \r\n                                                </div>\r\n                                            </div></div>\r\n                                            <wcomp-splitter vertical value=\"100\" min=\"30\" max=\"100\">\r\n                                                <ws-FixedSplitterHor>\r\n                                                    <PartSizes>32px calc(100% - 32px)</PartSizes>\r\n                                                    <First>\r\n                                                        <div>\r\n                                                            <div class=\"input-group\">\r\n                                                                <span class=\"input-group-addon\">name:</span>\r\n                                                                <span class=\"input-group-addon\">${PlugInName}</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </First>\r\n                                                    <Second>\r\n                                                        <div style=\"overflow:auto\">\r\n                                                            <div>\r\n                                                                <div>Docs:</div>\r\n                                                                <div ws-hole=\"Docs\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Vars:</div>\r\n                                                                <div ws-hole=\"Vars\" style=\"overflow:auto\" >\r\n                                                                        <div ws-template=\"NameValueInput\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <textarea class=\"form-control\" id=\"\" placeholder=\"Value...\" ws-var=\"Value\" spellcheck=\"false\">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Views:</div>\r\n                                                                <div ws-hole=\"Views\" style=\"overflow:auto\" >\r\n                                                                    <div ws-template=\"NameValue\" class=\"input-group\">\r\n                                                                        <span class=\"input-group-addon\">${Name}:</span>\r\n                                                                        <span class=\"input-group-addon\">${Value}</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div>Queries:</div>\r\n                                                                <div ws-hole=\"Queries\" style=\"overflow:auto\" ></div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Second>\r\n                                                </ws-FixedSplitterHor>\r\n                                                <wcomp-tabstrip >\r\n                                                    <div tabname=\"Properties\">\r\n                                                        <div>\r\n                                                            <table style=\"border-spacing:0px\">\r\n                                                                <thead>\r\n                                                                    <th style=\"width: 30%  \">Name</th>\r\n                                                                    <th style=\"width: 70% \">Value</th>\r\n                                                                </thead>\r\n                                                                <tbody ws-hole=\"Properties\" ws-children-template=\"Property\">\r\n                                                                    <tr ws-onclick=\"Select\" style=\"margin-bottom: 2px\" class=\"level  \">\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <input ws-var=\"Name\" type=\"text\" class=\"form-control\" id=\"\" placeholder=\"Property...\">\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div>\r\n                                                                                <textarea ws-var=\"Value\" class=\"form-control\" id=\"\" placeholder=\"Value...\"></textarea>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                        <td class=\"level-item\">\r\n                                                                            <div style=\" cursor: pointer \" title=\"remove\">\r\n                                                                                <button ws-onclick=\"Remove\" class=\"delete is-small\">x</button>\r\n                                                                            </div>\r\n                                                                        </td>\r\n                                                                    </tr>\r\n                                                                </tbody>\r\n                                                            </table>\r\n                                                            <button ws-onclick=\"AddProperty\" class=\"add is-small\">add ...</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </wcomp-tabstrip>\r\n                                            </wcomp-splitter>\r\n                                        </wcomp-splitter>\r\n                                    </First>\r\n                                    <Second>\r\n                                        <div style=\"\r\n                                            overflow: hidden;\r\n                                            display: grid;\r\n                                            grid-template-columns: 100%;\r\n                                            grid-template-rows: repeat(15, calc(100% / 15));\r\n                                            bxackground-color: #eee;\r\n                                            box-sizing: border-box;\r\n                                            padding : 5px;\r\n                                            grid-gap: 5px;\r\n                                            margin-right: 21px;\r\n                                       \"  class=\"absolute\" ws-hole=\"Actions\" >\r\n                                            <button ws-template=\"Action\"         ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\"          >${Name}</button>\r\n                                            <button ws-template=\"ActionDisabled\" ws-onclick=\"Click\" class=\"btn\" type=\"button\" id=\"\" disabled >${Name}</button>\r\n                                        </div>\r\n                                    </Second>\r\n                                </ws-FixedSplitterVer>\r\n                        </Second>\r\n                    </ws-FixedSplitterHor>\r\n                </div>\r\n                <style style=\"display: none\">\r\n                        .Hidden     { display   : none         }\r\n                        table th,table td { padding:0 5px 0 5px; text-overflow: ellipsis }\r\n                        td input.form-control { \r\n                            padding    : 0px; \r\n                            font-family: monospace;\r\n                            font-size  :   small;\r\n                            margin-top :   0px;\r\n                            margin-left: -2px;\r\n                            width      : 100%\r\n                        }\r\n                        td select {\r\n                            font-size : smaller;\r\n                            max-width : 8ch;\r\n                        }\r\n                        xtextarea {\r\n                           resize : none;\r\n                        }\r\n                        .tab-content {\r\n                            overflow: hidden\r\n                        }\r\n                        .tab-children {\r\n                            position:relative;\r\n                        }\r\n                        .tab-children>div>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        .relative {\r\n                            position:relative;\r\n                        }\r\n                        .relative>* {\r\n                            position:absolute;\r\n                            height: 100%;\r\n                            width:  100%;\r\n                            display: grid;\r\n                        }\r\n                        table.table-striped    tbody tr:nth-child(even) { background: #EEE  }\r\n                        table.table-striped    tbody tr:nth-child(odd ) { background: #FFF  }\r\n                        table.table-striped    tbody input              { background: transparent; border: none}\r\n                        table.table-striped    tbody select             { background: transparent; border: none}\r\n                        table.table-nonstriped tbody tr:nth-child(even) { background: inherit }\r\n                        table.table-nonstriped tbody tr:nth-child(odd ) { background: inherit }\r\n                        table.table            tbody tr.hover           { border    : solid thin transparent; } \r\n                        table.table            tbody tr.hover:hover     { border    : solid thin blue     ; } \r\n                        table.table            tbody th:hover           { background: gray; cursor: pointer }\r\n                        table.table            tbody tr.hover:hover>td  { border-top: solid thin blue     ; \r\n                                                                   border-bottom: solid thin blue     ; } \r\n                        table.table            tbody tr.selected { background   : #b9eeff             ; }\r\n                        table.table            tbody tr.formula.selected { background: #20f7f7             ; }\r\n                        thead { color: gray }\r\n                        h3 { \r\n                            color: gray;\r\n                            line-height: 1em;\r\n                        }\r\n                        button       { border: solid thin transparent ; border-radius: 3px; }\r\n                        button:hover { border: solid thin blue }\r\n                        .indenter { position  : absolute; \r\n                                    top:0px; bottom:0px; left:0px; \r\n                                    background: white; color:white;\r\n                                    border-right: gray thin dotted;\r\n                                    }\r\n                        body {\r\n                            color      : #333;\r\n                            font-size  : small;\r\n                            font-family: monospace;\r\n                            line-height: 1.2;\r\n                        }\r\n                        .mainTitle {  \r\n                            font-size: 48px;\r\n                            font-weight: 500;\r\n                            color: gray;\r\n                            margin-top: -12px;\r\n                        }\r\n                        .CodeMirror {\r\n                            height: 100%;\r\n                        }\r\n                        \r\n                      \r\n                        body { margin: 0px }     \r\n                             \r\n                        div textarea {\r\n                            font-family     : monospace;\r\n                        }\r\n                        .code-editor-list-tile {\r\n                            white-space     : nowrap; \r\n                            border-style    : solid none none;\r\n                            border-color    : white;\r\n                            border-width    : 1px;\r\n                            background-color: #D8D8D8;\r\n                            display         : flex;\r\n                        }\r\n                        .code-editor-list-text{\r\n                            padding         : 1px 10px 1px 5px;\r\n                            overflow        : hidden;\r\n                            text-overflow   : ellipsis;\r\n                            white-space     : nowrap;\r\n                            flex            : 1;\r\n                        }\r\n                        \r\n                        .code-editor-list-tile span.node.ErrorMsg {\r\n                            background-color: red\r\n                        }\r\n                        .code-editor-list-tile span.node.expanded::before {\r\n                            content: \"-\"\r\n                        }\r\n                        .code-editor-list-tile span.node.collapsed::before {\r\n                            content: \"+\"\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor {\r\n                            font-weight     : bold;\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.indirect-predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        .code-editor-list-tile.included-predecessor {\r\n                            color           : chocolate;\r\n                        }\r\n                        .code-editor-list-tile.selected {\r\n                            background-color: #77F;\r\n                            color           : white;\r\n                        }\r\n                        .code-editor-list-tile.codeSnippet {\r\n                            text-decoration: underline\r\n                        }\r\n                        .code-editor-list-tile:hover {\r\n                            background      : lightgray;\r\n                        }\r\n                        .code-editor-list-tile.selected:hover {\r\n                            background      : blue;\r\n                        }\r\n                        .code-editor-list-tile>.predecessor {\r\n                            font-weight     : bold;\r\n                            border-style    : inset;\r\n                            border-width    : 1px;\r\n                            text-align      : center;\r\n                            color           : transparent;\r\n                        }\r\n                        .code-editor-list-tile.direct-predecessor>.predecessor {\r\n                            color           : blue;\r\n                        }\r\n                        \r\n                        .CodeMirror { height: 100%; }\r\n                        \r\n                        .node {\r\n                            background-color: white; \r\n                            width           : 2ch; \r\n                            color           : #A03; \r\n                            font-weight     : bold; \r\n                            text-align      : center;\r\n                            font-family     : arial;\r\n                        }\r\n                        .Warning { text-decoration: underline lightblue } \r\n                        .Error   { text-decoration: underline red       } \r\n                        \r\n                    </style>\r\n            </div>\r\n            ";J.unselectorV=new _9.New(A.Const(null),a.ignore);J.plugin=new i.New();J.def=(cE=n.newCalc(),o.New(new I({$:0,$0:"00000000-0000-0000-0000-000000000000"}),cE.valorA,cE.valorB,cE.valorC));J.list0=m.getDocInt(n.def(),n.newCalc,function(cJ,cK,cL,cM){function cN(cP,cQ){return W.Element("li",cP,cQ);}function cO(cP,cQ,cR,cS){return n.calcUI(false,cP,cQ,cR,cS);}return((((cz.Curried(e.wrapUI,3,[function(cP){return function(cQ){return cN(cP,cQ);};},function(cP,cQ,cR){return function(cS){return cO(cP,cQ,cR,cS);};}]))(cJ))(cK))(cL))(cM);});J.list2=m.getDocGuidId(n.def(),n.newCalc,function(cJ,cK,cL,cM){function cN(cP,cQ){return W.Element("li",cP,cQ);}function cO(cP,cQ,cR,cS){return n.calcUIDet(true,cP,cQ,cR,cS);}return((((cz.Curried(e.wrapUI,3,[function(cP){return function(cQ){return cN(cP,cQ);};},function(cP,cQ,cR){return function(cS){return cO(cP,cQ,cR,cS);};}]))(cJ))(cK))(cL))(cM);});J.list3=l.getDoc(function(cJ){return cJ.id;},n.def(),n.newCalc,function(cJ,cK){function cL(cM,cN){return W.Element("li",cM,cN);}return((cz.Curried(e.wrapUI,3,[function(cM){return function(cN){return cL(cM,cN);};},function(cM,cN,cO){return function(cP){return n.calcUIEdit(cM,cN,cO,cP);};}]))(cJ))(cK);});J.list1=(cF=n.list0(),(m.setCurrentDoc(function(cJ,cK,cL,cM){return n.calcUIDet(false,cJ,cK,cL,cM);}))(cF));cG=L.ofArray([n.newCalc(),n.newCalc()]);m.addElements(n.list1(),cG);cH=L.ofArray([n.newCalc(),n.newCalc()]);l.addElements(n.list3(),cH);f.addPlugIn2((cI=f.plugin(),cI.Merge(cI.Merge(cI.Merge(cI.AddDocF(cI.Name(cI.Yield(),"Calc"),"main",function(){return W.Concat([e.orderedList(n.list1().doc),n.list1().get_CurrentDoc(),e.orderedList(n.list2().doc),e.newButton(n.list2().add),e.orderedList(n.list3().doc),e.newButton(n.list3().add)]);}),"calc1_",n.list1().PlugIn(e.selectorLensInt)),"calc2_",n.list2().PlugIn(e.selectorLensGuidId)),"calc3_",n.list3().PlugIn(e.selectorLensGuidId))));k.addLayout0(Q.newLyt("CalcLyt","\r\n                    split horizontal 0-50-100 AppFramework.AppFwkClient main\r\n                    main div \"overflow:auto\" Calc.main \r\n                "));};K.choose=function(cE,cF){return K.collect(function(cG){var cH;cH=cE(cG);return cH==null?M.Empty:L.ofArray([cH.$0]);},cF);};K.iter=function(cE,cF){var cG;cG=$.Get(cF);try{while(cG.MoveNext())cE(cG.Current());}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};K.collect=function(cE,cF){return K.concat(K.map(cE,cF));};K.delay=function(cE){return{GetEnumerator:function(){return $.Get(cE());}};};K.append=function(cE,cF){return{GetEnumerator:function(){var cG,cH;cG=$.Get(cE);cH=[true];return new bF.New(cG,null,function(cI){var cJ;return cI.s.MoveNext()?(cI.c=cI.s.Current(),true):(cJ=cI.s,!_0.Equals(cJ,null)?cJ.Dispose():void 0,cI.s=null,cH[0]&&(cH[0]=false,cI.s=$.Get(cF),cI.s.MoveNext()?(cI.c=cI.s.Current(),true):(cI.s.Dispose(),cI.s=null,false)));},function(cI){var cJ;cJ=cI.s;!_0.Equals(cJ,null)?cJ.Dispose():void 0;});}};};K.fold=function(cE,cF,cG){var cH,cI;cH=cF;cI=$.Get(cG);try{while(cI.MoveNext())cH=cE(cH,cI.Current());return cH;}finally{if(typeof cI=="object"&&"Dispose"in cI)cI.Dispose();}};K.map=function(cE,cF){return{GetEnumerator:function(){var cG;cG=$.Get(cF);return new bF.New(null,null,function(cH){return cG.MoveNext()&&(cH.c=cE(cG.Current()),true);},function(){cG.Dispose();});}};};K.concat=function(cE){return{GetEnumerator:function(){var cF;cF=$.Get(cE);return new bF.New(null,null,function(cG){var cH;while(true){cH=cG.s;if(_0.Equals(cH,null)){if(cF.MoveNext()){cG.s=$.Get(cF.Current());cG=cG;}else{cF.Dispose();return false;}}else if(cH.MoveNext()){cG.c=cH.Current();return true;}else{cG.Dispose();cG.s=null;cG=cG;}}},function(cG){var cH;cH=cG.s;!_0.Equals(cH,null)?cH.Dispose():void 0;!_0.Equals(cF,null)?cF.Dispose():void 0;});}};};K.groupBy=function(cE,cF){return K.delay(function(){return O.groupBy(cE,O.ofSeq(cF));});};K.tryFind=function(cE,cF){var cG,cH,cI;cG=$.Get(cF);try{cH=null;while(cH==null&&cG.MoveNext()){cI=cG.Current();cE(cI)?cH={$:1,$0:cI}:void 0;}return cH;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};K.tryFindIndex=function(cE,cF){var cG,cH,cI;cG=$.Get(cF);try{cH=true;cI=0;while(cH&&cG.MoveNext())if(cE(cG.Current()))cH=false;else cI=cI+1;return cH?null:{$:1,$0:cI};}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};K.filter=function(cE,cF){return{GetEnumerator:function(){var cG;cG=$.Get(cF);return new bF.New(null,null,function(cH){var cI,cJ,cK;cI=cG.MoveNext();cJ=cG.Current();cK=false;while(cI)if(cE(cJ)){cH.c=cJ;cK=true;cI=false;}else if(cG.MoveNext())cJ=cG.Current();else cI=false;return cK;},function(){cG.Dispose();});}};};K.pairwise=function(cE){return K.map(function(cF){return[O.get(cF,0),O.get(cF,1)];},K.windowed(2,cE));};K.indexed=function(cE){return K.mapi(function(cF,cG){return[cF,cG];},cE);};K.isEmpty=function(cE){var cF;cF=$.Get(cE);try{return!cF.MoveNext();}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};K.head=function(cE){var cF;cF=$.Get(cE);try{return cF.MoveNext()?cF.Current():K.insufficient();}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};K.distinctBy=function(cE,cF){return{GetEnumerator:function(){var cG,cH;cG=$.Get(cF);cH=new bI.New$3();return new bF.New(null,null,function(cI){var cJ,cK;if(cG.MoveNext()){cJ=cG.Current();cK=cH.Add(cE(cJ));while(!cK&&cG.MoveNext()){cJ=cG.Current();cK=cH.Add(cE(cJ));}return cK&&(cI.c=cJ,true);}else return false;},function(){cG.Dispose();});}};};K.init=function(cE,cF){return K.take(cE,K.initInfinite(cF));};K.tryPick=function(cE,cF){var cG,cH;cG=$.Get(cF);try{cH=null;while(_0.Equals(cH,null)&&cG.MoveNext())cH=cE(cG.Current());return cH;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};K.windowed=function(cE,cF){cE<=0?x.FailWith("The input must be positive."):void 0;return K.delay(function(){return K.enumUsing($.Get(cF),function(cG){var cH;cH=[];return K.append(K.enumWhile(function(){return cH.length<cE&&cG.MoveNext();},K.delay(function(){cH.push(cG.Current());return[];})),K.delay(function(){return cH.length===cE?K.append([cH.slice(0)],K.delay(function(){return K.enumWhile(function(){return cG.MoveNext();},K.delay(function(){cH.shift();cH.push(cG.Current());return[cH.slice(0)];}));})):[];}));});});};K.mapi=function(cE,cF){return K.map2(cE,K.initInfinite(a.id),cF);};K.skip=function(cE,cF){return{GetEnumerator:function(){var cG;cG=$.Get(cF);return new bF.New(true,null,function(cH){var cI,cJ;if(cH.s){for(cI=1,cJ=cE;cI<=cJ;cI++)if(!cG.MoveNext())K.insufficient();cH.s=false;}else null;return cG.MoveNext()&&(cH.c=cG.Current(),true);},function(){cG.Dispose();});}};};K.nth=function(cE,cF){var cG,cH;if(cE<0)x.FailWith("negative index requested");cG=-1;cH=$.Get(cF);try{while(cG<cE){!cH.MoveNext()?K.insufficient():void 0;cG=cG+1;}return cH.Current();}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}};K.take=function(cE,cF){cE<0?K.nonNegative():void 0;return{GetEnumerator:function(){var cG;cG=[$.Get(cF)];return new bF.New(0,null,function(cH){var cI;cH.s=cH.s+1;return cH.s>cE?false:(cI=cG[0],_0.Equals(cI,null)?K.insufficient():cI.MoveNext()?(cH.c=cI.Current(),cH.s===cE?(cI.Dispose(),cG[0]=null):void 0,true):(cI.Dispose(),cG[0]=null,K.insufficient()));},function(){var cH;cH=cG[0];!_0.Equals(cH,null)?cH.Dispose():void 0;});}};};K.initInfinite=function(cE){return{GetEnumerator:function(){return new bF.New(0,null,function(cF){cF.c=cE(cF.s);cF.s=cF.s+1;return true;},void 0);}};};K.map2=function(cE,cF,cG){return{GetEnumerator:function(){var cH,cI;cH=$.Get(cF);cI=$.Get(cG);return new bF.New(null,null,function(cJ){return cH.MoveNext()&&cI.MoveNext()&&(cJ.c=cE(cH.Current(),cI.Current()),true);},function(){cH.Dispose();cI.Dispose();});}};};K.sortBy=function(cE,cF){return K.delay(function(){var cG;cG=O.ofSeq(cF);O.sortInPlaceBy(cE,cG);return cG;});};K.max=function(cE){var cF,cG,cH;cF=$.Get(cE);try{if(!cF.MoveNext())K.seqEmpty();cG=cF.Current();while(cF.MoveNext()){cH=cF.Current();_0.Compare(cH,cG)===1?cG=cH:void 0;}return cG;}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};K.seqEmpty=function(){return x.FailWith("The input sequence was empty.");};K.forall=function(cE,cF){return!K.exists(function(cG){return!cE(cG);},cF);};K.exists=function(cE,cF){var cG,cH;cG=$.Get(cF);try{cH=false;while(!cH&&cG.MoveNext())cH=cE(cG.Current());return cH;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};M=L.T=cz.Class({GetEnumerator:function(){return new bF.New(this,null,function(cE){var cF;cF=cE.s;return cF.$==0?false:(cE.c=cF.$0,cE.s=cF.$1,true);},void 0);},GetEnumerator0:function(){return $.Get(this);}},null,M);M.Empty=new M({$:0});N.New=function(cE,cF,cG,cH,cI,cJ){return{plgName:cE,plgVars:cF,plgViews:cG,plgDocs:cH,plgActions:cI,plgQueries:cJ};};O.map=function(cE,cF){var cG,cH,cI;cG=new a.Array(cF.length);for(cH=0,cI=cF.length-1;cH<=cI;cH++)cG[cH]=cE(cF[cH]);return cG;};O.exists=function(cE,cF){var cG,cH,cI,cJ;cG=false;cH=0;cJ=O.length(cF);while(!cG&&cH<cJ)if(cE(cF[cH]))cG=true;else cH=cH+1;return cG;};O.tryFindIndex=function(cE,cF){var cG,cH;cG=null;cH=0;while(cH<cF.length&&cG==null){cE(cF[cH])?cG={$:1,$0:cH}:void 0;cH=cH+1;}return cG;};O.ofList=function(cE){var cF,cG;cG=[];cF=cE;while(!(cF.$==0)){cG.push(L.head(cF));cF=L.tail(cF);}return cG;};O.tryPick=function(cE,cF){var cG,cH,cI;cG=null;cH=0;while(cH<cF.length&&cG==null){cI=cE(cF[cH]);cI!=null&&cI.$==1?cG=cI:void 0;cH=cH+1;}return cG;};O.tryFind=function(cE,cF){var cG,cH;cG=null;cH=0;while(cH<cF.length&&cG==null){cE(cF[cH])?cG={$:1,$0:cF[cH]}:void 0;cH=cH+1;}return cG;};O.ofSeq=function(cE){var cF,cG;if(cE instanceof a.Array)return cE.slice();else if(cE instanceof M)return O.ofList(cE);else{cF=[];cG=$.Get(cE);try{while(cG.MoveNext())cF.push(cG.Current());return cF;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}}};O.choose=function(cE,cF){var cG,cH,cI,cJ;cG=[];for(cH=0,cI=cF.length-1;cH<=cI;cH++){cJ=cE(cF[cH]);cJ==null?void 0:cG.push(cJ.$0);}return cG;};O.concat=function(cE){return a.Array.prototype.concat.apply([],O.ofSeq(cE));};O.filter=function(cE,cF){var cG,cH,cI;cG=[];for(cH=0,cI=cF.length-1;cH<=cI;cH++)if(cE(cF[cH]))cG.push(cF[cH]);return cG;};O.iter=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cE(cF[cG]);};O.forall=function(cE,cF){var cG,cH,cI,cJ;cG=true;cH=0;cJ=O.length(cF);while(cG&&cH<cJ)if(cE(cF[cH]))cH=cH+1;else cG=false;return cG;};O.create=function(cE,cF){var cG,cH,cI;cG=new a.Array(cE);for(cH=0,cI=cE-1;cH<=cI;cH++)cG[cH]=cF;return cG;};O.pick=function(cE,cF){var cG;cG=O.tryPick(cE,cF);return cG==null?x.FailWith("KeyNotFoundException"):cG.$0;};O.foldBack=function(cE,cF,cG){var cH,cI,cJ,cK,cL;cH=cG;cJ=cF.length;for(cK=1,cL=cJ;cK<=cL;cK++)cH=cE(cF[cJ-cK],cH);return cH;};O.sortInPlaceBy=function(cE,cF){O.mapInPlace(function(cG){return cG[0];},O.mapiInPlace(function(cG,cH){return[cH,[cE(cH),cG]];},cF).sort(function(cG,cH){return _0.Compare(cG[1],cH[1]);}));};O.find=function(cE,cF){var cG;cG=O.tryFind(cE,cF);return cG==null?x.FailWith("KeyNotFoundException"):cG.$0;};O.init=function(cE,cF){var cG,cH,cI;cE<0?x.FailWith("Negative size given."):null;cG=new a.Array(cE);for(cH=0,cI=cE-1;cH<=cI;cH++)cG[cH]=cF(cH);return cG;};P.Create=function(cE){return bb.New(false,cE,P.forceLazy);};P.forceLazy=function(){var cE;cE=this.v();this.c=true;this.v=cE;this.f=P.cachedLazy;return cE;};P.cachedLazy=function(){return this.v;};Q.turnToView=function(cE){return W.EmbedView(A.Map(cE,y.mainDocV().get_View()));};Q.addLayout=function(cE){A.Sink(function(cF){var cG;cG=Q.createEntries(cE.lytName,cF);y.addPlugIn(N.New(cE.lytName,O.ofSeq(K.delay(function(){return K.append([y.newVar("Layout",cE.lytDefinition)],K.delay(function(){return Q.getVarEntries(cG);}));})),O.ofSeq(K.delay(function(){return Q.getViewEntries(cG);})),O.ofSeq(K.delay(function(){return K.append(Q.getDocEntries(cG),K.delay(function(){var cH;return K.append([y.newDocF("InputFile",{$:4,$0:(cH=cE.lytName,cz.Curried(Q.inputFile,4,[cH])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],K.delay(function(){var cI;return K.append([y.newDocF("InputLabel",{$:3,$0:(cI=cE.lytName,cz.Curried(Q.inputLabel,3,[cI])),$1:"attrs",$2:"Label",$3:"Var"})],K.delay(function(){var cJ;return K.append([y.newDocF("HtmlDoc",{$:1,$0:(cJ=cE.lytName,function(cK){return Q.htmlDoc(cJ,cK);}),$1:"html"})],K.delay(function(){return[y.newDocF("none",{$:1,$0:Q.none,$1:"x"})];}));}));}));}));})),O.ofSeq(K.delay(function(){return Q.getActionEntries(cG);})),O.ofSeq(K.delay(function(){return Q.getQueryEntries(cG);}))));y.mainDocV().Set(y.mainDocV().Get());},cE.lytDefinition.get_View());};Q.newLyt=function(cE,cF){return Z.New(cE,D.Create$1(cF));};Q.createEntries=function(cE,cF){return Q.processLines(function(cG){return Q.createEntryO(cE,cG);},bl.splitByChar("\n",cF));};Q.getVarEntries=function(cE){function cF(cG){return cG[1];}return K.map(function(cG){return K.last(cF(cG));},K.groupBy(function(cG){return cG.varName;},K.choose(function(cG){return cG.$==0?{$:1,$0:cG.$0}:null;},cE)));};Q.getViewEntries=function(cE){function cF(cG){return cG[1];}return K.map(function(cG){return K.last(cF(cG));},K.groupBy(function(cG){return cG.viwName;},K.choose(function(cG){return cG.$==1?{$:1,$0:cG.$0}:null;},cE)));};Q.getDocEntries=function(cE){function cF(cG){return cG[1];}return K.map(function(cG){return K.last(cF(cG));},K.groupBy(function(cG){return cG.docName;},K.choose(function(cG){return cG.$==2?{$:1,$0:cG.$0}:null;},cE)));};Q.inputFile=function(cE,cF,cG,cH,cI){var cJ,cK,cL,cM;cJ=(cK=(cL=((Q.splitName())(cE))(cH),y.tryGetAct(cL[0],cL[1])),cK==null?null:{$:1,$0:(cM=cK.$0,W.Element("div",Q.getAttrs(cE,cF,true),[W.Element("div",[_8.Create("class","input-group")],[W.Element("span",[_8.Create("class","input-group-btn")],[W.Element("label",[_8.Create("class","btn")],[Q.getText(cE,cG,true),W.Element("input",[_8.Create("class","form-control"),_8.Create("type","file"),_6.Style("display","none"),_8.HandlerImpl("click",function(cN){return function(){cN.value="";};}),_8.HandlerImpl("change",function(cN){return function(){return y.callFunction(cN,null,cM.actFunction);};})],[])])]),cI!==""?Q.singleDoc(cE,L.ofArray([[cI,false]])):W.get_Empty()])]))});return cJ==null?Q.errDoc((function(cN){return function(cO){return cN("Action not found "+H.toSafe(cO));};}(a.id))(cH)):cJ.$0;};Q.inputLabel=function(cE,cF,cG,cH){var cI,cJ,cK;cI=(cJ=(cK=((Q.splitName())(cE))(cH),y.tryGetVar(cK[0],cK[1])),cJ==null?null:{$:1,$0:W.Element("div",Q.getAttrs(cE,cF,true),[W.Element("div",[_8.Create("class","input-group")],[W.Element("span",[_8.Create("class","input-group-addon")],[Q.getText(cE,cG,true)]),W.Input([_8.Create("class","form-control")],cJ.$0.varVar)])])});return cI==null?Q.errDoc((function(cL){return function(cM){return cL("Var not found "+H.toSafe(cM));};}(a.id))(cH)):cI.$0;};Q.htmlDoc=function(cE,cF){var cG;cG=Q.getTextData(cE,cF);return cG.$==1?W.BindView(W.Verbatim,cG.$0):cG.$==2?Q.errDoc((function(cH){return function(cI){return cH("HtmlDoc: unexpected action "+by.p$1(cI));};}(a.id))(cG.$0)):W.Verbatim(cG.$0);};Q.none=function(cE){return W.Element("span",[],[]);};Q.getActionEntries=function(cE){function cF(cG){return cG[1];}return K.map(function(cG){return K.last(cF(cG));},K.groupBy(function(cG){return cG.actName;},K.choose(function(cG){return cG.$==3?{$:1,$0:cG.$0}:null;},cE)));};Q.getQueryEntries=function(cE){function cF(cG){return cG[1];}return K.map(function(cG){return K.last(cF(cG));},K.groupBy(function(cG){return cG.qryName;},K.choose(function(cG){return cG.$==4?{$:1,$0:cG.$0}:null;},cE)));};Q.createSplitter=function(cE,cF,cG,cH,cI){var cJ;cJ=Q.pairOfDocs(cE,cI);return cH.$==1?Q.variableSplitter(cG,cH.$0,cH.$1,cH.$2,cJ[0],cJ[1]):Q.fixedSplitter(cG,cH.$0,cH.$1,cJ[0],cJ[1]);};Q.createButton=function(cE,cF,cG,cH,cI){return Q.turnToView(function(){var cJ,cK,cL,cM,cN;function cO(cP,cQ){return y.callFunction(null,null,cP.actFunction);}cJ=(cK=(cL=(cM=((Q.splitName())(cE))(cG),y.tryGetAct(cM[0],cM[1])),cL==null?null:{$:1,$0:(cN=cL.$0,function(cP){return cO(cN,cP);})}),cK==null?a.ignore:cK.$0);return W.Button(cI[0],Q.getAttrs(cE,cH[0],cH[1]),cJ);});};Q.createInput=function(cE,cF,cG,cH){return Q.turnToView(function(){var cI,cJ,cK,cL,cM;cI=(cJ=(cK=((Q.splitName())(cE))(cG),y.tryGetVoV(cK[0],cK[1])),(cL=(cM=Q.getAttrs(cE,cH[0],cH[1]),function(cN){return W.Input(cM,cN);}),cJ==null?null:{$:1,$0:cL(cJ.$0)}));return cI==null?Q.errDoc((function(cN){return function(cO){return cN("Missing var: "+H.toSafe(cO));};}(a.id))(cG)):cI.$0;});};Q.createTextArea=function(cE,cF,cG,cH){return Q.turnToView(function(){var cI,cJ,cK,cL,cM;cI=(cJ=(cK=((Q.splitName())(cE))(cG),y.tryGetVoV(cK[0],cK[1])),(cL=(cM=Q.getAttrs(cE,cH[0],cH[1]),function(cN){return W.InputArea(cM,cN);}),cJ==null?null:{$:1,$0:cL(cJ.$0)}));return cI==null?Q.errDoc((function(cN){return function(cO){return cN("Missing var: "+H.toSafe(cO));};}(a.id))(cG)):cI.$0;});};Q.createElement=function(cE,cF,cG,cH,cI){var cJ;cJ=[Q.turnToView(function(){return W.Concat(Q.getDocs(cE,cI));})];return W.Element(cG,Q.getAttrs(cE,cH[0],cH[1]),cJ);};Q.createDoc=function(cE,cF,cG,cH){return Q.turnToView(function(){var cI,cJ,cK;cI=(cJ=(cK=((Q.splitName())(cE))(cG),y.tryGetDoc(cK[0],cK[1])),cJ==null?null:{$:1,$0:Q.getDocFinal(cH,cJ.$0)});return cI==null?Q.errDoc((function(cL){return function(cM){return cL("Missing doc: "+H.toSafe(cM));};}(a.id))(cG)):cI.$0;});};Q.createTemplate=function(cE,cF,cG,cH,cI){return Q.turnToView(function(){var cJ,cK,cL,cM,cN,cO;cL=Q.getAttrs(cE,cH[0],cH[1]);_5.LoadLocalTemplates("local");function cP(cR,cS){var cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4;cT=Q.Identifier(cS[0],cS[1]);return cT!=null&&cT.$==1?(cU=cT.$0,cV=cR[0],cW=(cX=(cY=(cZ=((Q.splitName())(cE))(cU),y.tryGetDoc(cZ[0],cZ[1])),cY==null?null:{$:1,$0:{$:0,$0:cV.toLowerCase(),$1:(Q.getDocF(M.Empty,cY.$0))[0]}}),cX==null?(c0=(c1=((Q.splitName())(cE))(cU),y.tryGetVar(c1[0],c1[1])),c0==null?null:{$:1,$0:{$:8,$0:cV.toLowerCase(),$1:c0.$0.varVar}}):cX),cW==null?{$:0,$0:cV.toLowerCase(),$1:Q.errDoc((function(c5){return function(c6){return c5("Missing element: "+H.toSafe(c6));};}(a.id))(cU))}:cW.$0):(c2=cR[0],c3=Q.getTextData(cE,cS[0]),c3.$==1?{$:2,$0:c2.toLowerCase(),$1:c3.$0}:c3.$==2?(c4=c3.$0,{$:4,$0:c2.toLowerCase(),$1:function(c5){return function(c6){return y.callFunction(c5,c6,c4.actFunction);};}}):{$:1,$0:c2.toLowerCase(),$1:c3.$0});}function cQ(cR,cS){return cR%2===0;}try{cK={$:1,$0:(cM=(cN=K.map(function(cR){return cP(cR[0],cR[1]);},K.map(function(cR){return cR[1];},K.filter(function(cR){return cQ(cR[0],cR[1]);},K.indexed(K.pairwise(cI))))),(K.isEmpty(cL)?a.id:(cO=[{$:3,$0:"attrs",$1:_8.Concat(cL)}],function(cR){return K.append(cO,cR);}))(cN)),_5.NamedTemplate("local",{$:1,$0:cG[0].toLowerCase()},cM))};}catch(cR){cK=null;}return cK==null?Q.errDoc((function(cS){return function(cT){return cS("Missing template: "+H.toSafe(cT));};}(a.id))(cG[0])):cK.$0;});};Q.createConcat=function(cE,cF,cG){return Q.turnToView(function(){return W.Concat(Q.getDocs(cE,cG));});};Q.createVar=function(cE,cF,cG){return D.Create$1(cG);};Q.createView=function(cE,cF,cG,cH){return A.Bind(function(){var cI,cK;function cJ(cL,cM){var cN,cO,cP,cQ,cR,cS,cT,cU,cV;cN=Q.Identifier(cL,cM);return cN!=null&&cN.$==1?(cO=cN.$0,(cP=(cQ=(cR=(cS=((Q.splitName())(cE))(cO),y.tryGetDoc(cS[0],cS[1])),cR==null?null:{$:1,$0:A.Const((Q.getDocF(M.Empty,cR.$0))[0])}),cQ==null?(cT=(cU=((Q.splitName())(cE))(cO),y.tryGetWoW(cU[0],cU[1])),cT==null?null:{$:1,$0:A.Map(a.id,cT.$0)}):cQ),cP==null?A.Const((function(cW){return function(cX){return cW("Missing element: "+H.toSafe(cX));};}(a.id))(cO)):cP.$0)):(cV=Q.getTextData(cE,cL),cV.$==1?A.Map(a.id,cV.$0):cV.$==2?A.Const(cV.$0):A.Const(cV.$0));}cK=Q.findJSEntry(cG);if(cK!=null&&cK.$==1){if(!(cK.$0 instanceof a.Function))return A.Const((function(cL){return function(cM){return cL("Not a JavaScript function: "+H.toSafe(cM));};}(a.id))(cG));else if(cK!=null&&cK.$==1){cI=cK.$0;return cH.$==0?A.Const(cI()):A.Map(function(cL){return cI.apply(null,cL);},A.Sequence(K.map(function(cL){return cJ(cL[0],cL[1]);},cH)));}else throw new bM.New("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\LayoutEngine\\src\\LayoutEngine.fs",1232,27);}else return A.Const((function(cL){return function(cM){return cL("Missing JavaScript function: "+H.toSafe(cM));};}(a.id))(cG));},y.mainDocV().get_View());};Q.addNewLayout=function(cE,cF){var cG,cH;Q.addLayout((cG=(cH=!_0.Equals(cF,null)?cF:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(bl.unindentStr())(cH)),Q.newLyt(!_0.Equals(cF,null)?cE:"Lyt_"+_.Replace(a.String(_2.NewGuid()),"-",""),cG)));};Q.processLines=function(cE,cF){function cG(cH){var cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV;cI=K.tryHead(cH);return cI!=null&&cI.$==1?(cJ=cI.$0,(cK=Q.splitTokens(cJ),cK.$==1&&(cM=(cN=cK.$0,Q.Identifier(cN[0],cN[1])),cM!=null&&cM.$==1&&(cK.$1.$==1&&((cO=cK.$1.$0,Q.Vertical(cO[0],cO[1])).$==2&&(cK.$1.$1.$==0&&(cL=cM.$0,true)))))?(cP=Q.getExtraLines(function(cW){return _.StartsWith(_.Trim(cW),"|");},cH),cG((bU.createLayoutDefinitions(cL,bU.extractNodes(cP[0])))[1].concat(cP[1]))):cK.$==0?cG(bm.array(cH,{$:1,$0:1},null)):(cQ=Q.getExtraLines(function(cW){return _.StartsWith(_.Trim(cW),":");},cH),(cR=cQ[1],(cS=cQ[0],O.length(cS)>0?((function(cW){return function(cX){return cW("l = ;"+H.toSafe(cX)+";");};}(function(cW){cx.log(cW);}))(cJ),cT=Q.createLines(K.nth(0,_.SplitChars(cJ,[" "],1)),1,[],[],1,cS),cU=cT[0],cV=cT[1],cG(O.ofSeq(K.delay(function(){return K.append([cJ+" "+_.concat(" ",cU)],K.delay(function(){return K.append(cV,K.delay(function(){return cR;}));}));})))):O.ofSeq(K.delay(function(){var cW;return K.append((cW=cE(cJ),cW!=null&&cW.$==1?[cW.$0]:[]),K.delay(function(){return cG(cR);}));}))))))):[];}return cG(cF);};Q.createEntryO=function(cE,cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM;try{cG=Q.splitTokens(cF);return cG.$==1&&(cI=(cJ=cG.$0,Q.Identifier(cJ[0],cJ[1])),cI!=null&&cI.$==1&&(cG.$1.$==1&&((cK=cG.$1.$0,Q.Vertical(cK[0],cK[1])).$==0&&(cG.$1.$1.$==1&&(cL=(cM=cG.$1.$1.$0,Q.Measures$1(cM[0],cM[1])),cL!=null&&cL.$==1&&(cH=[cG.$1.$1.$1,cL.$0,cI.$0],true))))))?(cN=cH[2],Q.entryDoc(cN,(Q.createSplitterM())([cE,cN,true,cH[1],cH[0]]))):cG.$==1&&(cP=(cQ=cG.$0,Q.Identifier(cQ[0],cQ[1])),cP!=null&&cP.$==1&&(cG.$1.$==1&&((cR=cG.$1.$0,Q.Vertical(cR[0],cR[1])).$==1&&(cG.$1.$1.$==1&&(cS=(cT=cG.$1.$1.$0,Q.Measures$1(cT[0],cT[1])),cS!=null&&cS.$==1&&(cO=[cG.$1.$1.$1,cS.$0,cP.$0],true))))))?(cU=cO[2],Q.entryDoc(cU,(Q.createSplitterM())([cE,cU,false,cO[1],cO[0]]))):cG.$==1&&(cW=(cX=cG.$0,Q.Identifier(cX[0],cX[1])),cW!=null&&cW.$==1&&(cG.$1.$==1&&((cY=cG.$1.$0,Q.Button(cY[0],cY[1])).$==0&&(cG.$1.$1.$==1&&(cZ=(c0=cG.$1.$1.$0,Q.Identifier(c0[0],c0[1])),cZ!=null&&cZ.$==1&&(cG.$1.$1.$1.$==1&&(cG.$1.$1.$1.$1.$==1&&(cG.$1.$1.$1.$1.$1.$==0&&(cV=[cZ.$0,cG.$1.$1.$1.$0,cW.$0,cG.$1.$1.$1.$1.$0],true)))))))))?(c1=cV[2],Q.entryDoc(c1,(Q.createButtonM())([cE,c1,cV[0],cV[1],cV[3]]))):cG.$==1&&(c3=(c4=cG.$0,Q.Identifier(c4[0],c4[1])),c3!=null&&c3.$==1&&(cG.$1.$==1&&((c5=cG.$1.$0,Q.Button(c5[0],c5[1])).$==1&&(cG.$1.$1.$==1&&(c6=(c7=cG.$1.$1.$0,Q.Identifier(c7[0],c7[1])),c6!=null&&c6.$==1&&(cG.$1.$1.$1.$==1&&(cG.$1.$1.$1.$1.$==0&&(c2=[cG.$1.$1.$1.$0,c3.$0,c6.$0],true))))))))?(c8=c2[1],Q.entryDoc(c8,(Q.createInputM())([cE,c8,c2[2],c2[0]]))):cG.$==1&&(c_=(c$=cG.$0,Q.Identifier(c$[0],c$[1])),c_!=null&&c_.$==1&&(cG.$1.$==1&&((da=cG.$1.$0,Q.Button(da[0],da[1])).$==2&&(cG.$1.$1.$==1&&(db=(dc=cG.$1.$1.$0,Q.Identifier(dc[0],dc[1])),db!=null&&db.$==1&&(cG.$1.$1.$1.$==1&&(cG.$1.$1.$1.$1.$==0&&(c9=[cG.$1.$1.$1.$0,c_.$0,db.$0],true))))))))?(dd=c9[1],Q.entryDoc(dd,(Q.createTextAreaM())([cE,dd,c9[2],c9[0]]))):cG.$==1&&(df=(dg=cG.$0,Q.Identifier(dg[0],dg[1])),df!=null&&df.$==1&&(cG.$1.$==1&&((dh=cG.$1.$0,Q.Var(dh[0],dh[1])).$==0&&(cG.$1.$1.$==1&&(cG.$1.$1.$1.$==0&&(de=[df.$0,cG.$1.$1.$0],true))))))?(di=de[0],Q.entryVar(di,(Q.createVarM())([cE,di,de[1][0]]))):cG.$==1&&(dk=(dl=cG.$0,Q.Identifier(dl[0],dl[1])),dk!=null&&dk.$==1&&(cG.$1.$==1&&((dm=cG.$1.$0,Q.Var(dm[0],dm[1])).$==1&&(cG.$1.$1.$==1&&(dj=[cG.$1.$1.$0,dk.$0,cG.$1.$1.$1],true)))))?(dn=dj[1],Q.entryDoc(dn,(Q.createDocM())([cE,dn,dj[0][0],dj[2]]))):cG.$==1&&(dp=(dq=cG.$0,Q.Identifier(dq[0],dq[1])),dp!=null&&dp.$==1&&(cG.$1.$==1&&((dr=cG.$1.$0,Q.Var(dr[0],dr[1])).$==2&&(cG.$1.$1.$==1&&(_do=[cG.$1.$1.$0,dp.$0,cG.$1.$1.$1],true)))))?(ds=_do[1],Q.entryView(ds,(Q.createViewM())([cE,ds,_do[0][0],_do[2]]))):cG.$==1&&(du=(dv=cG.$0,Q.Identifier(dv[0],dv[1])),du!=null&&du.$==1&&(cG.$1.$==1&&((dw=cG.$1.$0,Q.Vertical(dw[0],dw[1])).$==4&&(cG.$1.$1.$==1&&(cG.$1.$1.$1.$==1&&(dt=[cG.$1.$1.$1.$0,cG.$1.$1.$1.$1,du.$0,cG.$1.$1.$0],true))))))?(dx=dt[2],Q.entryDoc(dx,(Q.createTemplateM())([cE,dx,dt[3],dt[0],dt[1]]))):cG.$==1&&(dz=(dA=cG.$0,Q.Identifier(dA[0],dA[1])),dz!=null&&dz.$==1&&(cG.$1.$==1&&((dB=cG.$1.$0,Q.Var(dB[0],dB[1])).$==3&&(dy=[cG.$1.$1,dz.$0],true))))?(dC=dy[1],Q.entryDoc(dC,(Q.createConcatM())([cE,dC,dy[0]]))):cG.$==1&&(dE=(dF=cG.$0,Q.Identifier(dF[0],dF[1])),dE!=null&&dE.$==1&&(cG.$1.$==1&&((dG=cG.$1.$0,Q.Vertical(dG[0],dG[1])).$==3&&(cG.$1.$1.$==1&&(cG.$1.$1.$1.$==1&&(cG.$1.$1.$1.$1.$==1&&(dD=[cG.$1.$1.$1.$1.$0,cG.$1.$1.$0,cG.$1.$1.$1.$1.$1,dE.$0,cG.$1.$1.$1.$0],true)))))))?null:cG.$==1&&(dI=(dJ=cG.$0,Q.Identifier(dJ[0],dJ[1])),dI!=null&&dI.$==1&&(cG.$1.$==1&&(dK=(dL=cG.$1.$0,Q.Vertical(dL[0],dL[1])),dK.$==5&&(cG.$1.$1.$==1&&(dH=[cG.$1.$1.$0,cG.$1.$1.$1,dK.$0,dI.$0],true)))))?(dM=dH[3],Q.entryDoc(dM,(Q.createElementM())([cE,dM,dH[2],dH[0],dH[1]]))):null;}catch(dN){((function(dO){return function(dP){return dO(H.prettyPrint(dP));};}(function(dO){cx.log(dO);}))(dN));return null;}};Q.splitName=function(){_3.$cctor();return _3.splitName;};Q.getAttrs=function(cE,cF,cG){var cH;cH=[cF,cG];return L.ofSeq(K.delay(function(){return K.append(K.choose(function(cI){var cJ,cK,cL,cM,cN,cO;return!_0.Equals(cI,null)&&cI.length===2&&(cK=O.get(cI,1),_.Trim(O.get(cI,0))!==""&&_.Trim(cK)!=="")?(cL=O.get(cI,1),(cM=O.get(cI,0),{$:1,$0:(cN=Q.getTextData(cE,_.Trim(cL)),cN.$==1?_6.Dynamic(_.Trim(cM),cN.$0):cN.$==2?(cO=cN.$0,_6.Handler(_.Trim(cM),function(cP){return function(cQ){return y.callFunction(cP,cQ,cO.actFunction);};})):_8.Create(_.Trim(cM),_.Trim(cN.$0)))})):null;},K.map(function(cI){return bl.splitByChar("=",cI);},bl.splitByChar(";",cH[0]))),K.delay(function(){return K.choose(function(cI){var cJ,cK,cL,cM,cN;return!_0.Equals(cI,null)&&cI.length===2&&(cK=O.get(cI,1),_.Trim(O.get(cI,0))!==""&&_.Trim(cK)!=="")?(cL=O.get(cI,1),(cM=O.get(cI,0),{$:1,$0:(cN=Q.getTextData(cE,_.Trim(cL)),cN.$==1?_6.DynamicStyle(_.Trim(cM),cN.$0):cN.$==2?_6.Style(_.Trim(cM),(function(cO){return function(cP){return cO("${"+H.toSafe(cP)+"}");};}(a.id))(cN.$0.actName)):_6.Style(_.Trim(cM),_.Trim(cN.$0)))})):null;},K.map(function(cI){return bl.splitByChar(":",cI);},bl.splitByChar(";",cH[0])));}));}));};Q.getText=function(cE,cF,cG){var cH,cI,cJ,cK,cL,cM,cN,cO,cP;cH=Q.Identifier(cF,cG);return cH!=null&&cH.$==1?(cI=cH.$0,(cJ=((Q.splitName())(cE))(cI),(cK=cJ[0],(cL=cJ[1],(cM=(cN=y.tryGetViw(cK,cL),cN==null?null:{$:1,$0:W.TextView(cN.$0.viwView)}),cM==null?(cO=(cP=y.tryGetVar(cK,cL),cP==null?null:{$:1,$0:W.TextView(cP.$0.varVar.get_View())}),cO==null?W.TextNode(cI):cO.$0):cM.$0))))):W.TextNode(cF);};Q.singleDoc=function(cE,cF){return W.EmbedView(A.Map(function(cG){var cH;return cG.$==1&&(cG.$1.$==0&&(cH=cG.$0,true))?cH:Q.errDoc((function(cI){return function(cJ){return cI("expected exactly 1 element "+H.printList(function(cK){return"("+H.prettyPrint(cK[0])+", "+H.prettyPrint(cK[1])+")";},cJ));};}(a.id))(cF));},A.Map(function(){return Q.getDocs(cE,cF);},y.mainDocV().get_View())));};Q.errDoc=function(cE){return W.Element("div",[],[W.TextNode(cE)]);};Q.getTextData=function(cE,cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;cG=(cH=bl.delimitedO("@{","}",cF),cH==null?null:{$:1,$0:(cI=cH.$0,(cJ=cI[0],(cK=cI[1],(cL=cI[2],(cM=((Q.splitName())(cE))(cK),(cN=cM[0],(cO=cM[1],(cP=(cQ=y.tryGetWoW(cN,cO),cQ==null?null:{$:1,$0:function(cT){var cU,cV;cV=Q.getTextData(cE,cL);switch(cJ===""?cV.$==1?(cU=cV.$0,2):cV.$==2?(cU=cV.$0,3):cV.$0===""?0:(cU=cV.$0,1):cV.$==1?(cU=cV.$0,2):cV.$==2?(cU=cV.$0,3):(cU=cV.$0,1)){case 0:return{$:1,$0:cT};case 1:return{$:1,$0:A.Map(function(cW){return cJ+cW+cU;},cT)};case 2:return{$:1,$0:A.Map2(function(cW,cX){return cJ+cW+cX;},cT,cU)};case 3:return{$:2,$0:cU};}}(cQ.$0)}),cP==null?(cR=(cS=y.tryGetAct(cN,cO),cS==null?null:{$:1,$0:{$:2,$0:cS.$0}}),cR==null?{$:0,$0:((((cz.Curried(function(cT,cU,cV,cW){return cT(H.toSafe(cU)+" ${Missing "+H.toSafe(cV)+"}"+H.toSafe(cW));},4))(a.id))(cJ))(cK))(cL)}:cR.$0):cP.$0))))))))});return cG==null?{$:0,$0:cF}:cG.$0;};Q.pairOfDocs=function(cE,cF){var cG;cG=A.Map(function(cH){var cI;return cH.$==1&&(cH.$1.$==1&&(cH.$1.$1.$==0&&(cI=[cH.$0,cH.$1.$0],true)))?[cI[0],cI[1]]:[Q.errDoc((function(cJ){return function(cK){return cJ("splitter expects exactly 2 elements "+H.printList(function(cL){return"("+H.prettyPrint(cL[0])+", "+H.prettyPrint(cL[1])+")";},cK));};}(a.id))(cF)),Q.errDoc("part 2")];},A.Map(function(){return Q.getDocs(cE,cF);},y.mainDocV().get_View()));return[W.EmbedView(A.Map(function(cH){return cH[0];},cG)),W.EmbedView(A.Map(function(cH){return cH[1];},cG))];};Q.variableSplitter=function(cE,cF,cG,cH,cI,cJ){return W.Element("wcomp-splitter",L.ofSeq(K.delay(function(){return K.append(cE?[_8.Create("vertical","")]:[],K.delay(function(){return K.append([_8.Create("min",a.String(cF))],K.delay(function(){return K.append([_8.Create("value",a.String(cG))],K.delay(function(){return[_8.Create("max",a.String(cH))];}));}));}));})),L.ofArray([cI,cJ]));};Q.fixedSplitter=function(cE,cF,cG,cH,cI){var cJ,cK,cL,cM,cN,cO,cP;cJ=(((cG?cz.Curried3(function(cQ,cR,cS){return cQ(cR.toFixed(6)+"px calc(100% - "+cS.toFixed(6)+"px)");}):cz.Curried3(function(cQ,cR,cS){return cQ("calc(100% - "+cR.toFixed(6)+"px) "+cS.toFixed(6)+"px");}))(a.id))(cF))(cF);return cE?(cK=bv.Make().WithHole({$:1,$0:"partsizes",$1:cJ}).WithHole({$:0,$0:"first",$1:cH}).WithHole({$:0,$0:"second",$1:cI}),(cL=bw.CompleteHoles(cK.k,cK.h,[]),(cM=new bu.New(cL[1],bx.fixedsplitterver(cL[0])),(cK.i=cM,cM)))).get_Doc():(cN=bv.Make().WithHole({$:1,$0:"partsizes",$1:cJ}).WithHole({$:0,$0:"first",$1:cH}).WithHole({$:0,$0:"second",$1:cI}),(cO=bw.CompleteHoles(cN.k,cN.h,[]),(cP=new bu.New(cO[1],bx.fixedsplitterhor(cO[0])),(cN.i=cP,cP)))).get_Doc();};Q.getDocs=function(cE,cF){var cG;return cF.$==0?M.Empty:(cG=Q.getOneDoc(cE,cF),new M({$:1,$0:cG[0],$1:Q.getDocs(cE,cG[1])}));};Q.getDocFinal=function(cE,cF){var cG;cG=Q.getDocF(cE,cF);return cG[1].$==0?cG[0]:Q.errDoc((((cz.Curried3(function(cH,cI,cJ){return cH("Too many parameters "+by.p(cI)+" "+H.printList(function(cK){return"("+H.prettyPrint(cK[0])+", "+H.prettyPrint(cK[1])+")";},cJ));}))(a.id))(cF))(cE));};Q.Identifier=function(cE,cF){var cG,cH,cI;return(cH=v.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",cE),cH!=null&&cH.$==1&&((cI=cH.$0,!_0.Equals(cI,null)&&cI.length===1)&&(cF?false:(cG=O.get(cH.$0,0),true))))?{$:1,$0:cG}:null;};Q.getDocF=function(cE,cF){var cG,cH;cH=cF.docDoc;switch(cH.$==1?cE.$==1?(cG=[cH.$0,cE.$0[0],cE.$1],1):6:cH.$==2?cE.$==1?cE.$1.$==1?(cG=[cH.$0,cE.$0[0],cE.$1.$0[0],cE.$1.$1],2):6:6:cH.$==3?cE.$==1?cE.$1.$==1?cE.$1.$1.$==1?(cG=[cH.$0,cE.$0[0],cE.$1.$0[0],cE.$1.$1.$0[0],cE.$1.$1.$1],3):6:6:6:cH.$==4?cE.$==1?cE.$1.$==1?cE.$1.$1.$==1?cE.$1.$1.$1.$==1?(cG=[cH.$0,cE.$0[0],cE.$1.$0[0],cE.$1.$1.$0[0],cE.$1.$1.$1.$0[0],cE.$1.$1.$1.$1],4):6:6:6:6:cH.$==5?cE.$==1?cE.$1.$==1?cE.$1.$1.$==1?cE.$1.$1.$1.$==1?cE.$1.$1.$1.$1.$==1?(cG=[cH.$0,cE.$0[0],cE.$1.$0[0],cE.$1.$1.$0[0],cE.$1.$1.$1.$0[0],cE.$1.$1.$1.$1.$0[0],cE.$1.$1.$1.$1.$1],5):6:6:6:6:6:(cG=[cH.$0,cE],0)){case 0:return[cG[0].f(),cG[1]];case 1:return[cG[0](cG[1]),cG[2]];case 2:return[(cG[0](cG[1]))(cG[2]),cG[3]];case 3:return[((cG[0](cG[1]))(cG[2]))(cG[3]),cG[4]];case 4:return[(((cG[0](cG[1]))(cG[2]))(cG[3]))(cG[4]),cG[5]];case 5:return[((((cG[0](cG[1]))(cG[2]))(cG[3]))(cG[4]))(cG[5]),cG[6]];case 6:return[W.Element("div",[],[W.TextNode((((cz.Curried3(function(cI,cJ,cK){return cI("Parameters do not coincide with definition "+by.p(cJ)+" - "+H.printList(function(cL){return"("+H.prettyPrint(cL[0])+", "+H.prettyPrint(cL[1])+")";},cK));}))(a.id))(cF))(cE))]),M.Empty];}};Q.findJSEntry=function(cE){return K.fold(function(cF,cG){var cH;return cF==null?null:(cH=cF.$0,!cH[cG]?null:{$:1,$0:cH[cG]});},{$:1,$0:a},bl.splitByChar(".",cE));};Q.splitTokens=function(cE){return L.ofSeq(K.collect(a.id,K.mapi(function(cF,cG){var cH;return cF%2===1?[[cG,true]]:(cH=_.Trim(cG),cH===""?[]:O.map(function(cI){return[cI,false];},_.SplitChars(cH,[" "],1)));},bl.splitByChar("\"",cE))));};Q.Vertical=function(cE,cF){var cG,cH,cI,cJ,cK,cL;return(cF?false:cE==="vertical")?{$:0,$0:null}:(cF?false:cE==="horizontal")?{$:1,$0:null}:(cF?false:cE==="layout")?{$:2,$0:null}:(cF?false:cE==="grid")?{$:3,$0:null}:(cF?false:cE==="template")?{$:4,$0:null}:(cL=Q.Identifier(cE,cF),cL!=null&&cL.$==1?{$:5,$0:cL.$0}:{$:6,$0:null});};Q.getExtraLines=function(cE,cF){var cG,cH,cI,cJ;cG=(cH=(cI=K.tryFindIndex(function(cK){return _.Trim(cK)!==""&&!cE(cK);},K.skip(1,cF)),cI==null?null:{$:1,$0:1+cI.$0}),(cJ=O.length(cF),cH==null?cJ:cH.$0));return[bm.array(cF,{$:1,$0:1},{$:1,$0:cG-1}),bm.array(cF,{$:1,$0:cG},null)];};Q.createLines=function(cE,cF,cG,cH,cI,cJ){var cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;cK=_.replicate(cF,":");cL=":"+cK;cM=K.tryHead(cJ);return cM!=null&&cM.$==1?(cN=bl.StartsWith(cK,_.Trim(cM.$0)),cN!=null&&cN.$==1?(cO=cN.$0,(cP=Q.getExtraLines(function(cU){return _.StartsWith(_.Trim(cU),cL);},cJ),(cQ=(((cz.Curried3(function(cU,cV,cW){return cU(H.toSafe(cV)+"_"+a.String(cW));}))(a.id))(cE))(cI),(cR=Q.createLines(cQ,cF+1,[],[],1,cP[0]),(cS=cR[1],(cT=cR[0],Q.createLines(cE,cF,O.ofSeq(K.delay(function(){return K.append(cG,K.delay(function(){return[cQ];}));})),O.ofSeq(K.delay(function(){return K.append(cH,K.delay(function(){return K.append([cQ+" "+cO+" "+_.concat(" ",cT)],K.delay(function(){return cS;}));}));})),cI+1,cP[1]))))))):[cG,cH]):[cG,cH];};Q.Measures$1=function(cE,cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;cG=[cE,cF];return cG[1]?null:(cH=bl.splitByChar("-",cG[0]),!_0.Equals(cH,null)&&cH.length===1&&(cJ=(F.Double())(O.get(cH,0)),cJ!=null&&cJ.$==1&&(cI=cJ.$0,true))?{$:1,$0:new b_({$:0,$0:cI,$1:true})}:!_0.Equals(cH,null)&&cH.length===2&&(O.get(cH,0)===""&&(cL=(F.Double())(O.get(cH,1)),cL!=null&&cL.$==1&&(cK=cL.$0,true)))?{$:1,$0:new b_({$:0,$0:cK,$1:false})}:!_0.Equals(cH,null)&&cH.length===3&&(cN=(F.Double())(O.get(cH,0)),cN!=null&&cN.$==1&&(cO=(F.Double())(O.get(cH,1)),cO!=null&&cO.$==1&&(cP=(F.Double())(O.get(cH,2)),cP!=null&&cP.$==1&&(cM=[cP.$0,cN.$0,cO.$0],true))))?{$:1,$0:new b_({$:1,$0:cM[1],$1:cM[2],$2:cM[0]})}:null);};Q.entryDoc=function(cE,cF){return{$:1,$0:{$:2,$0:y.newDoc(cE,P.Create(function(){return cF;}))}};};Q.createSplitterM=function(){_3.$cctor();return _3.createSplitterM;};Q.Button=function(cE,cF){var cG,cH,cI,cJ;return(cF?false:cE==="button")?{$:0,$0:null}:(cF?false:cE==="input")?{$:1,$0:null}:(cF?false:cE==="textarea")?{$:2,$0:null}:(cF?false:cE==="select")?{$:3,$0:null}:{$:4,$0:null};};Q.createButtonM=function(){_3.$cctor();return _3.createButtonM;};Q.createInputM=function(){_3.$cctor();return _3.createInputM;};Q.createTextAreaM=function(){_3.$cctor();return _3.createTextAreaM;};Q.Var=function(cE,cF){var cG,cH,cI,cJ;return(cF?false:cE==="Var")?{$:0,$0:null}:(cF?false:cE==="Doc")?{$:1,$0:null}:(cF?false:cE==="View")?{$:2,$0:null}:(cF?false:cE==="concat")?{$:3,$0:null}:{$:4,$0:null};};Q.entryVar=function(cE,cF){return{$:1,$0:{$:0,$0:y.newVar(cE,cF)}};};Q.createVarM=function(){_3.$cctor();return _3.createVarM;};Q.createDocM=function(){_3.$cctor();return _3.createDocM;};Q.entryView=function(cE,cF){return{$:1,$0:{$:1,$0:y.newViw(cE,cF)}};};Q.createViewM=function(){_3.$cctor();return _3.createViewM;};Q.createTemplateM=function(){_3.$cctor();return _3.createTemplateM;};Q.createConcatM=function(){_3.$cctor();return _3.createConcatM;};Q.createElementM=function(){_3.$cctor();return _3.createElementM;};Q.getOneDoc=function(cE,cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU;return cF.$==1&&(cH=(cI=cF.$0,Q.Identifier(cI[0],cI[1])),cH!=null&&cH.$==1&&(cG=[cH.$0,cF.$1],true))?(cJ=cG[0],(cK=cG[1],(cL=((Q.splitName())(cE))(cJ),(cM=cL[0],(cN=cL[1],(cO=(cP=y.tryGetDoc(cM,cN),cP==null?null:{$:1,$0:Q.getDocF(cK,cP.$0)}),cO==null?(cQ=(cR=y.tryGetWoW(cM,cN),cR==null?null:{$:1,$0:[W.TextView(cR.$0),cK]}),cQ==null?[Q.errDoc((cS=(function(cV){return function(cW){return cV("Missing doc: "+H.toSafe(cW));};}(a.id))(cJ),(E.print(cS),cS))),cK]:cQ.$0):cO.$0)))))):cF.$==0?[W.get_Empty(),M.Empty]:(cT=cF.$1,(cU=Q.getTextData(cE,cF.$0[0]),cU.$==1?[W.TextView(cU.$0),cT]:cU.$==2?[Q.errDoc((function(cV){return function(cW){return cV("Unexpected action: "+H.toSafe(cW));};}(a.id))(cU.$0.actName)),cT]:[W.TextNode(cU.$0),cT]));};R.New=function(cE,cF){return{qryName:cE,qryFunction:cF};};S.New=function(cE,cF,cG){return{actName:cE,actFunction:cF,actEnabled:cG};};T.New=function(cE,cF){return{docName:cE,docDoc:cF};};U.New=function(cE,cF){return{viwName:cE,viwView:cF};};V.New=function(cE,cF){return{varName:cE,varVar:cF};};W=z.Doc=cz.Class({},h,W);W.Concat=function(cE){var cF;cF=bd.ofSeqNonCopying(cE);return bd.TreeReduce(W.get_Empty(),W.Append,cF);};W.RunAppend=function(cE,cF){var cG;cG=self.document.createTextNode("");cE.appendChild(cG);W.RunBefore(cG,cF);};W.TextNode=function(cE){return W.Mk({$:5,$0:bC.CreateText(cE)},A.Const());};W.Input=function(cE,cF){return W.InputInternal("input",function(){return K.append(cE,[_6.Value(cF)]);});};W.Button=function(cE,cF,cG){var cH;cH=_8.Concat(cF);return bP.New(W.Clickable("button",cG),cH,W.TextNode(cE));};W.Append=function(cE,cF){return W.Mk({$:0,$0:cE.docNode,$1:cF.docNode},A.Map2Unit(cE.updates,cF.updates));};W.get_Empty=function(){return W.Mk(null,A.Const());};W.BindView=function(cE,cF){return W.EmbedView(A.Map(cE,cF));};W.RunBefore=function(cE,cF){var cG;cG=self.document.createTextNode("");cE.parentNode.insertBefore(cG,cE);W.RunBetween(cG,cE,cF);};W.Element=function(cE,cF,cG){var cH,cI;cH=_8.Concat(cF);cI=W.Concat(cG);return bP.New(bC.CreateElement(cE),cH,cI);};W.Mk=function(cE,cF){return new W.New(cE,cF);};W.InputInternal=function(cE,cF){var cG;cG=bC.CreateElement(cE);return bP.New(cG,_8.Concat(cF(cG)),W.get_Empty());};W.Clickable=function(cE,cF){var cG;cG=bC.CreateElement(cE);cG.addEventListener("click",function(cH){cH.preventDefault();return cF();},false);return cG;};W.TextView=function(cE){var cF;cF=bQ.CreateTextNode();return W.Mk({$:4,$0:cF},A.Map(function(cG){bQ.UpdateTextNode(cF,cG);},cE));};W.EmbedView=function(cE){var cF;cF=bQ.CreateEmbedNode();return W.Mk({$:2,$0:cF},A.Map(a.ignore,A.Bind(function(cG){bQ.UpdateEmbedNode(cF,cG.docNode);return cG.updates;},cE)));};W.Verbatim=function(cE){var cF;return W.Mk(bd.MapTreeReduce(function(cG){return _0.Equals(cG.nodeType,q.TEXT_NODE)?{$:5,$0:cG}:{$:1,$0:bQ.CreateElemNode(cG,bB.EmptyAttr(),null)};},null,function(cG,cH){return{$:0,$0:cG,$1:cH};},(cF=cB.parseHTML(cE),_0.Equals(cF,null)?[]:cF)),A.Const());};W.Flatten=function(cE){return W.EmbedView(A.Map(W.Concat,cE));};W.RunBetween=function(cE,cF,cG){var cH;bQ.LinkPrevElement(cF,cG.docNode);cH=bQ.CreateDelimitedRunState(cE,cF,cG.docNode);A.Sink(b5.get_UseAnimations()||b6.BatchUpdatesEnabled()?b7.StartProcessor(bQ.PerformAnimatedUpdate(false,cH,cG.docNode)):function(){bQ.PerformSyncUpdate(false,cH,cG.docNode);},cG.updates);};W.Run=function(cE,cF){bQ.LinkElement(cE,cF.docNode);W.RunInPlace(false,cE,cF);};W.ConvertBy=function(cE,cF,cG){return W.Flatten(A.MapSeqCachedBy(cE,cF,cG));};W.InputArea=function(cE,cF){return W.InputInternal("textarea",function(){return K.append(cE,[_6.Value(cF)]);});};W.RunInPlace=function(cE,cF,cG){var cH;cH=bQ.CreateRunState(cF,cG.docNode);A.Sink(b5.get_UseAnimations()||b6.BatchUpdatesEnabled()?b7.StartProcessor(bQ.PerformAnimatedUpdate(cE,cH,cG.docNode)):function(){bQ.PerformSyncUpdate(cE,cH,cG.docNode);},cG.updates);};W.New=cz.Ctor(function(cE,cF){h.New.call(this);this.docNode=cE;this.updates=cF;},W);X=z.ListModel=cz.Class({TryFindByKeyAsView:function(cE){var cF;cF=this;return function(){var cG,cH,cI;cG=(cH=null,[cF.it.TryGetValue(cE,{get:function(){return cH;},set:function(cJ){cH=cJ;}}),cH]);return cG[0]?cG[1]:(cI=_7.New({$:2,$0:cF.TryFindByKey(cE),$1:[]}),(cF.it.Add(cE,cI),cI));};},ContainsKey:function(cE){var cF;cF=this;return O.exists(function(cG){return _0.Equals(cF.key(cG),cE);},this["var"].Get());},RemoveByKey:function(cE){var cF;cF=this;this["var"].Set(this.storage.SRemoveIf(function(cG){return _0.Equals(cF.key(cG),cE);},this["var"].Get()));this.ObsoleteKey(cE);},AppendMany:function(cE){var cF,cG;function cH(cI,cJ){var cK,cL;cK=cF.key(cJ);cF.ObsoleteKey(cK);cL=O.tryFindIndex(function(cM){return _0.Equals(cF.key(cM),cK);},cI);return cL==null?(cG.push(cJ),cI):cF.storage.SSetAt(cL.$0,cJ,cI);}cF=this;cG=[];this["var"].Set(this.storage.SAppendMany(cG,(((cz.Curried3(K.fold))(cH))(this["var"].Get()))(cE)));},TryFindByKey:function(cE){var cF;cF=this;return O.tryFind(function(cG){return _0.Equals(cF.key(cG),cE);},this["var"].Get());},Append:function(cE){var cF,cG,cH,cI;cF=this;cG=this["var"].Get();cH=this.key(cE);cI=O.tryFindIndex(function(cJ){return _0.Equals(cF.key(cJ),cH);},cG);cI!=null&&cI.$==1?this["var"].Set(this.storage.SSetAt(cI.$0,cE,cG)):this["var"].Set(this.storage.SAppend(cE,cG));this.ObsoleteKey(cH);},ObsoleteKey:function(cE){var cF,cG;cF=(cG=null,[this.it.TryGetValue(cE,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG]);cF[0]?(_7.Obsolete(cF[1]),this.it.Remove(cE)):void 0;},MapLens:function(cE){var cF;cF=this;return A.MapSeqCachedViewBy(cF.key,function(cG,cH){return cE(cG,cF["LensInto'"](a.id,function(cI,cJ){return cJ;},cG,cH));},this["var"].get_View());},"LensInto'":function(cE,cF,cG,cH){var cI,cJ,cK;cI=this;cJ=bk.Id();cK=new G({Get:function(){return cE(cI.FindByKey(cG));},Set:function(cL){return cI.UpdateBy(function(cM){return{$:1,$0:cF(cM,cL)};},cG);},SetFinal:function(cL){return this.Set(cL);},Update:function(cL){return cI.UpdateBy(function(cM){return{$:1,$0:cF(cM,cL(cE(cM)))};},cG);},UpdateMaybe:function(cL){return cI.UpdateBy(function(cM){var cN;cN=cL(cE(cM));return cN==null?null:{$:1,$0:cF(cM,cN.$0)};},cG);},get_View:function(){return cH;},get_Id:function(){return cJ;}});G.New.call(cK);return cK;},FindByKey:function(cE){var cF;cF=this;return O.find(function(cG){return _0.Equals(cF.key(cG),cE);},this["var"].Get());},UpdateBy:function(cE,cF){var cG,cH,cI,cJ,cK;cG=this;cH=this["var"].Get();cI=O.tryFindIndex(function(cL){return _0.Equals(cG.key(cL),cF);},cH);cI!=null&&cI.$==1?(cJ=cI.$0,cK=cE(O.get(cH,cJ)),cK!=null&&cK.$==1?(this["var"].Set(this.storage.SSetAt(cJ,cK.$0,cH)),this.ObsoleteKey(cF)):void 0):void 0;},GetEnumerator:function(){return $.Get(this["var"].Get());},GetEnumerator0:function(){return $.Get0(this["var"].Get());}},h,X);X.New$1=cz.Ctor(function(cE){X.New$2.call(this,cE,[]);},X);X.New=cz.Ctor(function(cE,cF){X.New$3.call(this,cE,D.Create$1(O.ofSeq(K.distinctBy(cE,cF.SInit()))),cF);},X);X.New$2=cz.Ctor(function(cE,cF){var cG;cG=O.ofSeq(cF);X.New$3.call(this,cE,D.Create$1(cG),bg.InMemory(cG));},X);X.New$3=cz.Ctor(function(cE,cF,cG){h.New.call(this);this.key=cE;this["var"]=cF;this.storage=cG;this.v=A.Map(function(cH){return cH.slice();},this["var"].get_View());this.it=new bf.New$5();},X);Y.insertWO=function(cE){return cE==null?A.Const(null):A.Map(function(cF){return{$:1,$0:cF};},cE.$0);};Z.New=function(cE,cF){return{lytName:cE,lytDefinition:cF};};X.Create=function(cE,cF){return X.CreateWithStorage(cE,bg.InMemory(O.ofSeq(cF)));};X.CreateWithStorage=function(cE,cF){return new X.New(cE,cF);};_0.Equals=function(cE,cF){var cG,cH,cI,cJ;if(cE===cF)return true;else{cG=typeof cE;if(cG=="object"){if(cE===null||cE===void 0||cF===null||cF===void 0)return false;else if("Equals"in cE)return cE.Equals(cF);else if(cE instanceof a.Array&&cF instanceof a.Array)return _0.arrayEquals(cE,cF);else if(cE instanceof a.Date&&cF instanceof a.Date)return _0.dateEquals(cE,cF);else{cH=[true];for(var cK in cE)if(function(cL){cH[0]=!cE.hasOwnProperty(cL)||cF.hasOwnProperty(cL)&&_0.Equals(cE[cL],cF[cL]);return!cH[0];}(cK))break;if(cH[0]){for(var cL in cF)if(function(cM){cH[0]=!cF.hasOwnProperty(cM)||cE.hasOwnProperty(cM);return!cH[0];}(cL))break;}return cH[0];}}else return cG=="function"&&("$Func"in cE?cE.$Func===cF.$Func&&cE.$Target===cF.$Target:"$Invokes"in cE&&"$Invokes"in cF&&_0.arrayEquals(cE.$Invokes,cF.$Invokes));}};_0.arrayEquals=function(cE,cF){var cG,cH;if(O.length(cE)===O.length(cF)){cG=true;cH=0;while(cG&&cH<O.length(cE)){!_0.Equals(O.get(cE,cH),O.get(cF,cH))?cG=false:void 0;cH=cH+1;}return cG;}else return false;};_0.dateEquals=function(cE,cF){return cE.getTime()===cF.getTime();};_0.Compare=function(cE,cF){var cG,cH,cI,cJ,cK,cL;if(cE===cF)return 0;else{cH=typeof cE;switch(cH=="function"?1:cH=="boolean"?2:cH=="number"?2:cH=="string"?2:cH=="object"?3:0){case 0:return typeof cF=="undefined"?0:-1;case 1:return x.FailWith("Cannot compare function values.");case 2:return cE<cF?-1:1;case 3:if(cE===null)cI=-1;else if(cF===null)cI=1;else if("CompareTo"in cE)cI=cE.CompareTo(cF);else if("CompareTo0"in cE)cI=cE.CompareTo0(cF);else if(cE instanceof a.Array&&cF instanceof a.Array)cI=_0.compareArrays(cE,cF);else if(cE instanceof a.Date&&cF instanceof a.Date)cI=_0.compareDates(cE,cF);else{cJ=[0];for(var cM in cE)if(function(cN){return!cE.hasOwnProperty(cN)?false:!cF.hasOwnProperty(cN)?(cJ[0]=1,true):(cJ[0]=_0.Compare(cE[cN],cF[cN]),cJ[0]!==0);}(cM))break;if(cJ[0]===0){for(var cN in cF)if(function(cO){return!cF.hasOwnProperty(cO)?false:!cE.hasOwnProperty(cO)&&(cJ[0]=-1,true);}(cN))break;}cI=cJ[0];}return cI;}}};_0.compareArrays=function(cE,cF){var cG,cH;if(O.length(cE)<O.length(cF))return -1;else if(O.length(cE)>O.length(cF))return 1;else{cG=0;cH=0;while(cG===0&&cH<O.length(cE)){cG=_0.Compare(O.get(cE,cH),O.get(cF,cH));cH=cH+1;}return cG;}};_0.compareDates=function(cE,cF){return _0.Compare(cE.getTime(),cF.getTime());};_0.Hash=function(cE){var cF;cF=typeof cE;return cF=="function"?0:cF=="boolean"?cE?1:0:cF=="number"?cE:cF=="string"?_0.hashString(cE):cF=="object"?cE==null?0:cE instanceof a.Array?_0.hashArray(cE):_0.hashObject(cE):0;};_0.hashString=function(cE){var cF,cG,cH;if(cE===null)return 0;else{cF=5381;for(cG=0,cH=cE.length-1;cG<=cH;cG++)cF=_0.hashMix(cF,cE[cG].charCodeAt());return cF;}};_0.hashArray=function(cE){var cF,cG,cH;cF=-34948909;for(cG=0,cH=O.length(cE)-1;cG<=cH;cG++)cF=_0.hashMix(cF,_0.Hash(O.get(cE,cG)));return cF;};_0.hashObject=function(cE){var cF,cG;if("GetHashCode"in cE)return cE.GetHashCode();else{cF=[0];for(var cH in cE)if(function(cI){cF[0]=_0.hashMix(_0.hashMix(cF[0],_0.hashString(cI)),_0.Hash(cE[cI]));return false;}(cH))break;return cF[0];}};_0.hashMix=function(cE,cF){return(cE<<5)+cE+cF;};_2.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cE){var cF,cG;cF=cA.random()*16|0;cG=cE=="x"?cF:cF&3|8;return cG.toString(16);});};_2.TryParse=function(cE,cF){try{cF.set(_2.Parse(cE));return true;}catch(cG){return false;}};_2.Parse=function(cE){var cF,cG,cH;try{return _2.ParseExact(cE,"D");}catch(cI){try{cF=_2.ParseExact(cE,"B");}catch(cJ){try{cG=_2.ParseExact(cE,"P");}catch(cK){try{cH=_2.ParseExact(cE,"N");}catch(cL){cH=_2.ParseExact(cE,"X");}cG=cH;}cF=cG;}return cF;}};_2.ParseExact=function(cE,cF){var cG,cH,cI,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;function cJ(cU){var cV,cW,cX,cY;for(cV=0,cW=35;cV<=cW;cV++){cV===8||(cV===13||(cV===18||cV===23))?cU[cV]!=="-"?_2.ShapeError():void 0:(cY=cU[cV],!("0"<=cY&&cY<="9"||"a"<=cY&&cY<="f")?_2.ShapeError():void 0);}return cU;}cK=cF.toUpperCase();if(cK==="N"){cL=_.Trim(cE).toLowerCase();if(cL.length!==32)_2.ShapeError();for(cM=0,cN=31;cM<=cN;cM++){cO=cL[cM];!("0"<=cO&&cO<="9"||"a"<=cO&&cO<="f")?_2.ShapeError():void 0;}return _.Substring(cL,0,8)+"-"+_.Substring(cL,8,4)+"-"+_.Substring(cL,12,4)+"-"+_.Substring(cL,16,4)+"-"+cL.substring(20);}else if(cK==="D"){cG=_.Trim(cE).toLowerCase();cG.length!==36?_2.ShapeError():void 0;return cJ(cG);}else if(cK==="B"){cH=_.Trim(cE).toLowerCase();cH.length!==38||cH[0]!=="{"||cH[17]!=="}"?_2.ShapeError():void 0;return cJ(_.Substring(cH,1,36));}else if(cK==="P"){cI=_.Trim(cE).toLowerCase();cI.length!==38||cI[0]!=="("||cI[17]!==")"?_2.ShapeError():void 0;return cJ(_.Substring(cI,1,36));}else if(cK==="X"){cP=_.Trim(cE).toLowerCase();if(cP.length!==68)_2.ShapeError();for(cQ=0,cR=67;cQ<=cR;cQ++){switch(cQ){case 26:case 0:if(cP[cQ]!=="{")_2.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cP[cQ]!=="0")_2.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cP[cQ]!=="x")_2.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cP[cQ]!==",")_2.ShapeError();break;case 67:case 66:if(cP[cQ]!=="{")_2.ShapeError();break;default:cT=cP[cQ];!("0"<=cT&&cT<="9"||"a"<=cT&&cT<="f")?_2.ShapeError():void 0;break;}}return _.Substring(cP,3,8)+"-"+_.Substring(cP,14,4)+"-"+_.Substring(cP,21,4)+"-"+_.Substring(cP,29,2)+_.Substring(cP,34,2)+"-"+_.Substring(cP,39,2)+_.Substring(cP,44,2)+_.Substring(cP,49,2)+_.Substring(cP,54,2)+_.Substring(cP,59,2)+_.Substring(cP,64,2);}else return _2.FormatError();};_2.ShapeError=function(){throw new ci.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_2.FormatError=function(){throw new ci.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_3.$cctor=function(){var cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da;_3.$cctor=a.ignore;function db(dL){return _.concat("\n",dL);}function dc(dL){return bl.splitByChar("\n",dL);}function dd(dL){var dM,dN;return bm.array(dL,{$:1,$0:0},{$:1,$0:(dM=0,(dN=O.length(dL)-2,_0.Compare(dM,dN)===1?dM:dN))});}function de(dL){return _.concat("\n",dL);}function df(dL){return dL+"T00:00:00";}function dg(dL){var dM;function dN(dP){return y.plugIns().TryFindByKey(dP);}function dO(dP){var dQ;dQ=y.defaultPlugIn();return dP==null?dQ:dP.$0;}dM=function(dP){return dP==null?null:dN(dP.$0);};return function(dP){return dO(dM(dP));};}function dh(dL){var dM;dM=null;return cI.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function di(dL,dM){cI.set_Item(dL,dM);return dM;}function dj(dL,dM){var dN;dN=dh(dL);return dN==null?di(dL,dM(dL)):dN.$0;}function dk(dL){var dM;dM=null;return cL.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dl(dL,dM){cL.set_Item(dL,dM);return dM;}function dm(dL,dM){var dN;dN=dk(dL);return dN==null?dl(dL,dM(dL)):dN.$0;}function dn(dL){var dM;dM=null;return cO.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function _do(dL,dM){cO.set_Item(dL,dM);return dM;}function dp(dL,dM){var dN;dN=dn(dL);return dN==null?_do(dL,dM(dL)):dN.$0;}function dq(dL){var dM;dM=null;return cR.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dr(dL,dM){cR.set_Item(dL,dM);return dM;}function ds(dL,dM){var dN;dN=dq(dL);return dN==null?dr(dL,dM(dL)):dN.$0;}function dt(dL){var dM;dM=null;return cU.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function du(dL,dM){cU.set_Item(dL,dM);return dM;}function dv(dL,dM){var dN;dN=dt(dL);return dN==null?du(dL,dM(dL)):dN.$0;}function dw(dL){var dM;dM=null;return cX.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dx(dL,dM){cX.set_Item(dL,dM);return dM;}function dy(dL,dM){var dN;dN=dw(dL);return dN==null?dx(dL,dM(dL)):dN.$0;}function dz(dL){var dM;dM=null;return c0.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dA(dL,dM){c0.set_Item(dL,dM);return dM;}function dB(dL,dM){var dN;dN=dz(dL);return dN==null?dA(dL,dM(dL)):dN.$0;}function dC(dL){var dM;dM=null;return c3.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dD(dL,dM){c3.set_Item(dL,dM);return dM;}function dE(dL,dM){var dN;dN=dC(dL);return dN==null?dD(dL,dM(dL)):dN.$0;}function dF(dL){var dM;dM=null;return c6.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dG(dL,dM){c6.set_Item(dL,dM);return dM;}function dH(dL,dM){var dN;dN=dF(dL);return dN==null?dG(dL,dM(dL)):dN.$0;}function dI(dL){var dM;dM=null;return c9.TryGetValue(dL,{get:function(){return dM;},set:function(dN){dM=dN;}})?{$:1,$0:dM}:null;}function dJ(dL,dM){c9.set_Item(dL,dM);return dM;}function dK(dL,dM){var dN;dN=dI(dL);return dN==null?dJ(dL,dM(dL)):dN.$0;}_3.unindentStr=function(dL){return db(bl.unindent(dL));};_3.skipLastLine=(cE=function(dL){return dd(dc(dL));},function(dL){return de(cE(dL));});_3.parseDateO2=(cF=F.tryParseWith(function(dL){var dM,dN;dM=0;return[(dN=bH.TryParse(dL),dN!=null&&dN.$==1&&(dM=dN.$0,true)),dM];}),function(dL){return cF(df(dL));});_3.parseDateO=F.tryParseWith(function(dL){var dM,dN;dM=0;return[(dN=bH.TryParse(dL),dN!=null&&dN.$==1&&(dM=dN.$0,true)),dM];});_3.parseIntO=F.tryParseWith(function(dL){var dM;dM=0;return[bn.TryParseInt32(dL,{get:function(){return dM;},set:function(dN){dM=dN;}}),dM];});_3.parseInt64O=F.tryParseWith(function(dL){var dM;dM=0;return[bn.TryParseInt64(dL,{get:function(){return dM;},set:function(dN){dM=dN;}}),dM];});_3.parseSingleO=F.tryParseWith(function(dL){var dM,dN;dM=0;return[(dN=a.Number(dL),a.isNaN(dN)?false:(dM=dN,true)),dM];});_3.parseDoubleO=F.tryParseWith(function(dL){var dM,dN;dM=0;return[(dN=a.Number(dL),a.isNaN(dN)?false:(dM=dN,true)),dM];});_3.parseGuidO=F.tryParseWith(function(dL){var dM;dM=null;return[_2.TryParse(dL,{get:function(){return dM;},set:function(dN){dM=dN;}}),dM];});_3["|Date|_|"]=F.parseDateO();_3["|Int|_|"]=F.parseIntO();_3["|Int64|_|"]=F.parseInt64O();_3["|Single|_|"]=F.parseSingleO();_3["|Double|_|"]=F.parseDoubleO();_3["|Guid|_|"]=F.parseGuidO();_3.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";_3.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";_3.observers=M.Empty;_3.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";_3.init=P.Create(function(){var dL;dL=new bq.New();bo.defineWebComponent("wcomp-tabstrip",bq.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});_3.layoutHorizontal=cz.Curried(function(dL,dM,dN,dO,dP){return W.get_Empty();},5);_3.layoutVertical=cz.Curried(function(dL,dM,dN,dO,dP){return W.get_Empty();},5);_3.plugIns=new X.New$1(function(dL){return dL.plgName;});_3.mainDocV=D.Create$1("AppFramework.AppFwkClient");_3.TemplateFileName="..\\website\\AppFramework.html";_3.defaultPlugIn=N.New("",[],[],[],[],[]);_3.selectionPlugInO=D.Create$1({$:1,$0:"AppFramework"});_3.currentPlugInW=(cG=y.selectionPlugInO().get_View(),A.Map2(function(dL,dM){return(dg(dL))(dM);},y.plugIns().v,cG));_3.currentPlugInV=new _9.New(y.currentPlugInW(),function(dL){y.plugIns().Append(dL);});_3.AppFwkClient=P.Create(function(){var dL,dM,dN,dO,dP,dQ,dR,dS,dT;return(dL=(dM=y.renderQueries(),(dN=y.renderActions(),(dO=y.renderDocs(),(dP=y.renderViews(),(dQ=y.renderVars(),(dR=y.renderPlugIns(),bv.Make().WithHole({$:0,$0:"plugins",$1:dR})).WithHole({$:2,$0:"pluginname",$1:A.Map(function(dU){return dU.plgName;},y.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:dQ})).WithHole({$:0,$0:"views",$1:dP})).WithHole({$:0,$0:"docs",$1:dO})).WithHole({$:0,$0:"actions",$1:dN})).WithHole({$:0,$0:"queries",$1:dM})),(dS=bw.CompleteHoles(dL.k,dL.h,[]),(dT=new bu.New(dS[1],bx.appfwkclient(dS[0])),(dL.i=dT,dT)))).get_Doc();});_3.actHello=y.newAct("Hello",function(){self.alert("Hello!");});_3.qryDocs=y.newQry("getDocNames",function(){return O.ofSeq(K.collect(function(dL){return K.map(function(dM){return dL.plgName+"."+dM.docName;},dL.plgDocs);},(y.plugIns())["var"].Get()));});y.plugIns().Append(N.New("AppFramework",[y.newVar("mainDocV",y.mainDocV())],[],[y.newDoc("AppFwkClient",y.AppFwkClient())],[y.actHello()],[y.qryDocs()]));_3.getMainDoc=P.Create(function(){bA.init(cz.Curried(y.horizontal,5),cz.Curried(y.vertical,5));bp.init().f();return y.mainDoc();});_3.splitName=y.splitName;_3.createSplitterM=(cH=(cI=new bf.New$5(),[[dh,function(dL){return function(dM){return dj(dL,dM);};}],function(){cI.Clear();}]),(cJ=cH[0][1],[function(dL){return(cJ(dL))(function(dM){return Q.createSplitter(dM[0],dM[1],dM[2],dM[3],dM[4]);});},cH[1]]))[0];_3.createButtonM=(cK=(cL=new bf.New$5(),[[dk,function(dL){return function(dM){return dm(dL,dM);};}],function(){cL.Clear();}]),(cM=cK[0][1],[function(dL){return(cM(dL))(function(dM){return Q.createButton(dM[0],dM[1],dM[2],dM[3],dM[4]);});},cK[1]]))[0];_3.createInputM=(cN=(cO=new bf.New$5(),[[dn,function(dL){return function(dM){return dp(dL,dM);};}],function(){cO.Clear();}]),(cP=cN[0][1],[function(dL){return(cP(dL))(function(dM){return Q.createInput(dM[0],dM[1],dM[2],dM[3]);});},cN[1]]))[0];_3.createTextAreaM=(cQ=(cR=new bf.New$5(),[[dq,function(dL){return function(dM){return ds(dL,dM);};}],function(){cR.Clear();}]),(cS=cQ[0][1],[function(dL){return(cS(dL))(function(dM){return Q.createTextArea(dM[0],dM[1],dM[2],dM[3]);});},cQ[1]]))[0];_3.createElementM=(cT=(cU=new bf.New$5(),[[dt,function(dL){return function(dM){return dv(dL,dM);};}],function(){cU.Clear();}]),(cV=cT[0][1],[function(dL){return(cV(dL))(function(dM){return Q.createElement(dM[0],dM[1],dM[2],dM[3],dM[4]);});},cT[1]]))[0];_3.createDocM=(cW=(cX=new bf.New$5(),[[dw,function(dL){return function(dM){return dy(dL,dM);};}],function(){cX.Clear();}]),(cY=cW[0][1],[function(dL){return(cY(dL))(function(dM){return Q.createDoc(dM[0],dM[1],dM[2],dM[3]);});},cW[1]]))[0];_3.createTemplateM=(cZ=(c0=new bf.New$5(),[[dz,function(dL){return function(dM){return dB(dL,dM);};}],function(){c0.Clear();}]),(c1=cZ[0][1],[function(dL){return(c1(dL))(function(dM){return Q.createTemplate(dM[0],dM[1],dM[2],dM[3],dM[4]);});},cZ[1]]))[0];_3.createConcatM=(c2=(c3=new bf.New$5(),[[dC,function(dL){return function(dM){return dE(dL,dM);};}],function(){c3.Clear();}]),(c4=c2[0][1],[function(dL){return(c4(dL))(function(dM){return Q.createConcat(dM[0],dM[1],dM[2]);});},c2[1]]))[0];_3.createVarM=(c5=(c6=new bf.New$5(),[[dF,function(dL){return function(dM){return dH(dL,dM);};}],function(){c6.Clear();}]),(c7=c5[0][1],[function(dL){return(c7(dL))(function(dM){return Q.createVar(dM[0],dM[1],dM[2]);});},c5[1]]))[0];_3.createViewM=(c8=(c9=new bf.New$5(),[[dI,function(dL){return function(dM){return dK(dL,dM);};}],function(){c9.Clear();}]),(c_=c8[0][1],[function(dL){return(c_(dL))(function(dM){return Q.createView(dM[0],dM[1],dM[2],dM[3]);});},c8[1]]))[0];c$=y.tryGetPlugIn("AppFramework");c$==null?void 0:(da=c$.$0,y.addPlugIn(N.New(da.plgName,da.plgVars,da.plgViews,da.plgDocs,da.plgActions.concat([y.newActF("AddLayout",{$:2,$0:function(dL){return function(dM){return Q.addNewLayout(dL,dM);};},$1:"[Name]",$2:"[Layout]"})]),da.plgQueries)));};_5.LoadLocalTemplates=function(cE){!_5.LocalTemplatesLoaded()?(_5.set_LocalTemplatesLoaded(true),_5.LoadNestedTemplates(self.document.body,"")):void 0;_5.LoadedTemplates().set_Item(cE,_5.LoadedTemplateFile(""));};_5.LocalTemplatesLoaded=function(){bN.$cctor();return bN.LocalTemplatesLoaded;};_5.set_LocalTemplatesLoaded=function(cE){bN.$cctor();bN.LocalTemplatesLoaded=cE;};_5.LoadNestedTemplates=function(cE,cF){var cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU;function cG(cV){var cW,cX;if(!cH.ContainsKey(cV)){cW=(cX=null,[cI.TryGetValue(cV,{get:function(){return cX;},set:function(cY){cX=cY;}}),cX]);cW[0]?(cU.Add(cV),cI.Remove(cV),_5.PrepareTemplateStrict(cF,{$:1,$0:cV},cW[1][0],{$:1,$0:cW[1][1]},{$:1,$0:cG})):cx.warn(cU.Contains(cV)?"Encountered loop when instantiating "+cV:"Local template does not exist: "+cV);}}cH=_5.LoadedTemplateFile(cF);cI=new bf.New$5();cJ=cE.querySelectorAll("[ws-template]");for(cK=0,cL=cJ.length-1;cK<=cL;cK++){cM=cJ[cK];cN=cM.getAttribute("ws-template").toLowerCase();cM.removeAttribute("ws-template");cI.set_Item(cN,[[cM],_5.FakeRootSingle(cM)]);}cO=cE.querySelectorAll("[ws-children-template]");for(cP=0,cQ=cO.length-1;cP<=cQ;cP++){cR=cO[cP];cS=cR.getAttribute("ws-children-template").toLowerCase();cR.removeAttribute("ws-children-template");cI.set_Item(cS,(cT=bC.ChildrenArray(cR),[cT,_5.FakeRoot(cT)]));}cU=new bI.New$3();while(cI.count>0)cG(K.head(cI.get_Keys()));};_5.LoadedTemplates=function(){bN.$cctor();return bN.LoadedTemplates;};_5.LoadedTemplateFile=function(cE){var cF,cG,cH;cF=(cG=null,[_5.LoadedTemplates().TryGetValue(cE,{get:function(){return cG;},set:function(cI){cG=cI;}}),cG]);return cF[0]?cF[1]:(cH=new bf.New$5(),(_5.LoadedTemplates().set_Item(cE,cH),cH));};_5.FakeRootSingle=function(cE){var cF,cG,cH;cE.removeAttribute("ws-template");cF=cE.getAttribute("ws-replace");cF===null?void 0:(cE.removeAttribute("ws-replace"),cG=cE.parentNode,_0.Equals(cG,null)?void 0:(cH=self.document.createElement(cE.tagName),cH.setAttribute("ws-replace",cF),cG.replaceChild(cH,cE)));return _5.FakeRoot([cE]);};_5.FakeRoot=function(cE){var cF,cG,cH;cF=self.document.createElement("div");for(cG=0,cH=cE.length-1;cG<=cH;cG++)cF.appendChild(O.get(cE,cG));return cF;};_5.PrepareTemplateStrict=function(cE,cF,cG,cH,cI){var cJ,cK;function cL(cQ,cR){var cS,cT,cU,cV,cW,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg;function cX(dh){}while(true)switch(cQ){case 0:if(cR!==null){cS=cR.nextSibling;if(_0.Equals(cR.nodeType,q.TEXT_NODE))b3.convertTextNode(cR);else if(_0.Equals(cR.nodeType,q.ELEMENT_NODE))cN(cR);cR=cS;}else return null;break;case 1:cY=bm.string(cR.nodeName,{$:1,$0:3},null).toLowerCase();cZ=(cT=cY.indexOf("."),cT===-1?[cE,cY]:[bm.string(cY,null,{$:1,$0:cT-1}),bm.string(cY,{$:1,$0:cT+1},null)]);c0=cZ[1];c1=cZ[0];if(c1!==""&&!_5.LoadedTemplates().ContainsKey(c1))return b3.failNotLoaded(c0);else{if(c1===""&&cI!=null)cI.$0(c0);c2=_5.LoadedTemplates().get_Item(c1);if(!c2.ContainsKey(c0))return b3.failNotLoaded(c0);else{c3=c2.get_Item(c0);c4=c3.cloneNode(true);c5=new bI.New$3();c6=new bf.New$5();c7=cR.attributes;for(c8=0,c9=c7.length-1;c8<=c9;c8++){c_=c7.item(c8).name.toLowerCase();c6.set_Item(c_,(c$=c7.item(c8).nodeValue,c$===""?c_:c$.toLowerCase()));!c5.Add(c_)?cx.warn("Hole mapped twice",c_):void 0;}for(da=0,db=cR.childNodes.length-1;da<=db;da++){dc=cR.childNodes[da];_0.Equals(dc.nodeType,q.ELEMENT_NODE)?!c5.Add(dc.nodeName.toLowerCase())?cx.warn("Hole filled twice",c0):void 0:void 0;}dd=cR.childNodes.length===1&&_0.Equals(cR.firstChild.nodeType,q.TEXT_NODE);if(dd){cV=b3.fillTextHole(c4,cR.firstChild.textContent,c0);((function(dh){return function(di){if(di!=null)dh(di.$0);};}((cW=function(dh){return function(di){return dh.Add(di);};}(c5),function(dh){return cX(cW(dh));})))(cV));}b3.removeHolesExcept(c4,c5);if(!dd){for(de=0,df=cR.childNodes.length-1;de<=df;de++){dg=cR.childNodes[de];_0.Equals(dg.nodeType,q.ELEMENT_NODE)?dg.hasAttributes()?b3.fillInstanceAttrs(c4,dg):cM(c4,dg):void 0;}}b3.mapHoles(c4,c6);b3.fill(c4,cR.parentNode,cR);cR.parentNode.removeChild(cR);return;}}break;}}function cM(cQ,cR){var cS,cU,cV;function cT(cW,cX){var cY,cZ,c0;if(cU==="title"&&cR.hasChildNodes()){cY=cB.parseHTML(cR.textContent);cR.removeChild(cR.firstChild);for(cZ=0,c0=cY.length-1;cZ<=c0;cZ++)cR.appendChild(O.get(cY,cZ));}else null;cN(cR);return b3.fill(cR,cW,cX);}cU=cR.nodeName.toLowerCase();bC.IterSelector(cQ,"[ws-attr-holes]",function(cW){var cX,cY,cZ,c0,c1;cX=_.SplitChars(cW.getAttribute("ws-attr-holes"),[" "],1);for(cY=0,cZ=cX.length-1;cY<=cZ;cY++){c0=O.get(cX,cY);cW.setAttribute(c0,(c1=new a.RegExp("\\${"+cU+"}","ig"),cW.getAttribute(c0).replace(c1,cR.textContent)));}});cV=cQ.querySelector("[ws-hole="+cU+"]");if(_0.Equals(cV,null)){cS=cQ.querySelector("[ws-replace="+cU+"]");return _0.Equals(cS,null)?null:(cT(cS.parentNode,cS),void cS.parentNode.removeChild(cS));}else{while(cV.hasChildNodes())cV.removeChild(cV.lastChild);cV.removeAttribute("ws-hole");return cT(cV,null);}}function cN(cQ){if(_.StartsWith(cQ.nodeName.toLowerCase(),"ws-"))cP(cQ);else{b3.convertAttrs(cQ);cO(cQ.firstChild);}}function cO(cQ){return cL(0,cQ);}function cP(cQ){return cL(1,cQ);}cJ=cH==null?_5.FakeRoot(cG):cH.$0;cK=(cF==null?"":cF.$0).toLowerCase();_5.LoadedTemplateFile(cE).set_Item(cK,cJ);O.length(cG)>0?(function(cQ){var cR,cS,cT,cU;while(true){cR=cQ.querySelector("[ws-template]");if(_0.Equals(cR,null)){cS=cQ.querySelector("[ws-children-template]");if(_0.Equals(cS,null))return null;else{cT=cS.getAttribute("ws-children-template");cS.removeAttribute("ws-children-template");_5.PrepareTemplateStrict(cE,{$:1,$0:cT},bC.ChildrenArray(cS),null,null);cQ=cQ;}}else{cU=cR.getAttribute("ws-template");(_5.PrepareSingleTemplate(cE,{$:1,$0:cU},cR))(null);cQ=cQ;}}}(cJ),cO(O.get(cG,0))):void 0;};_5.NamedTemplate=function(cE,cF,cG){var cH,cI;cH=(cI=null,[_5.LoadedTemplateFile(cE).TryGetValue(cF==null?"":cF.$0,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI]);return cH[0]?_5.ChildrenTemplate(cH[1].cloneNode(true),cG):(cx.warn("Local template doesn't exist",cF),W.get_Empty());};_5.PrepareSingleTemplate=function(cE,cF,cG){var cH,cI,cJ;cH=_5.FakeRootSingle(cG);cI=[cG];cJ={$:1,$0:cH};return function(cK){_5.PrepareTemplateStrict(cE,cF,cI,cJ,cK);};};_5.ChildrenTemplate=function(cE,cF){var cG,cH,cI,cJ,cK;cG=_5.InlineTemplate(cE,cF);cH=cG[1];cI=cG[0];cJ=cI.Els;return!_0.Equals(cJ,null)&&cJ.length===1&&(O.get(cJ,0)instanceof q&&(_0.Equals(O.get(cJ,0).nodeType,q.ELEMENT_NODE)&&(cK=O.get(cJ,0),true)))?bP.TreeNode(cI,cH):W.Mk({$:6,$0:cI},cH);};_5.TextHoleRE=function(){bN.$cctor();return bN.TextHoleRE;};_5.InlineTemplate=function(cE,cF){var cG,cH,cI,cJ,cM,cN,cO,cP,cQ,cR,cS;function cK(cT,cU){var cV,cW,cX;cV=bB.Insert(cT,cU);cN.push(bB.Updates(cV));cO.push([cT,cV]);cW=cz.GetOptional(cV.OnAfterRender);return cW==null?null:(cX=cW.$0,void cP.push(function(){cX(cT);}));}function cL(cT){var cU,cV;cU=(cV=null,[cQ.TryGetValue(cT,{get:function(){return cV;},set:function(cW){cV=cW;}}),cV]);return cU[0]?cU[1].$==0?{$:1,$0:cU[1].$1}:cU[1].$==1?{$:1,$0:W.TextNode(cU[1].$1)}:cU[1].$==2?{$:1,$0:W.TextView(cU[1].$1)}:cU[1].$==8?{$:1,$0:W.TextView(cU[1].$1.get_View())}:cU[1].$==9?{$:1,$0:W.TextView(A.Map(a.String,cU[1].$1.get_View()))}:cU[1].$==10?{$:1,$0:W.TextView(A.Map(function(cW){return cW.get_Input();},cU[1].$1.get_View()))}:cU[1].$==11?{$:1,$0:W.TextView(A.Map(a.String,cU[1].$1.get_View()))}:cU[1].$==12?{$:1,$0:W.TextView(A.Map(function(cW){return cW.get_Input();},cU[1].$1.get_View()))}:cU[1].$==13?{$:1,$0:W.TextView(A.Map(a.String,cU[1].$1.get_View()))}:(cx.warn("Content hole filled with attribute data",cT),null):null;}cM=[];cN=[];cO=[];cP=[];cQ=new bf.New$5();cR=$.Get(cF);try{while(cR.MoveNext()){cS=cR.Current();cQ.set_Item(cS.$0,cS);}}finally{if(typeof cR=="object"&&"Dispose"in cR)cR.Dispose();}cG=bC.ChildrenArray(cE);bC.IterSelector(cE,"[ws-hole]",function(cT){var cU,cV,cW;cW=cT.getAttribute("ws-hole");cT.removeAttribute("ws-hole");while(cT.hasChildNodes())cT.removeChild(cT.lastChild);cU=cL(cW);cU!=null&&cU.$==1?(cV=cU.$0,bQ.LinkElement(cT,cV.docNode),cM.push(bD.New(bB.Empty(cT),cV.docNode,null,cT,bk.Int(),null)),cN.push(cV.updates)):void 0;});bC.IterSelector(cE,"[ws-replace]",function(cT){var cU,cV,cW,cX,cY,cZ;cU=cL(cT.getAttribute("ws-replace"));cU!=null&&cU.$==1?(cV=cU.$0,cW=cT.parentNode,cX=self.document.createTextNode(""),cW.replaceChild(cX,cT),cY=bQ.InsertBeforeDelim(cX,cV.docNode),cZ=O.tryFindIndex(function(c0){return cT===c0;},cG),cZ==null?void 0:O.set(cG,cZ.$0,cV.docNode),cM.push(bD.New(bB.Empty(cW),cV.docNode,{$:1,$0:[cY,cX]},cW,bk.Int(),null)),cN.push(cV.updates)):void 0;});bC.IterSelector(cE,"[ws-attr]",function(cT){var cU,cV,cW;cU=cT.getAttribute("ws-attr");cT.removeAttribute("ws-attr");cV=(cW=null,[cQ.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?cV[1].$==3?cK(cT,cV[1].$1):cx.warn("Attribute hole filled with non-attribute data",cU):void 0;});bC.IterSelector(cE,"[ws-on]",function(cT){cK(cT,_8.Concat(O.choose(function(cU){var cV,cW,cX;cV=_.SplitChars(cU,[":"],1);cW=(cX=null,[cQ.TryGetValue(O.get(cV,1),{get:function(){return cX;},set:function(cY){cX=cY;}}),cX]);return cW[0]?cW[1].$==4?{$:1,$0:_6.Handler(O.get(cV,0),cW[1].$1)}:cW[1].$==5?{$:1,$0:_8.Handler(O.get(cV,0),cW[1].$2)}:(cx.warn("Event hole on"+O.get(cV,0)+" filled with non-event data",O.get(cV,1)),null):null;},_.SplitChars(cT.getAttribute("ws-on"),[" "],1))));cT.removeAttribute("ws-on");});bC.IterSelector(cE,"[ws-onafterrender]",function(cT){var cU,cV,cW;cU=cT.getAttribute("ws-onafterrender");cV=(cW=null,[cQ.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?cV[1].$==6?(cT.removeAttribute("ws-onafterrender"),cK(cT,_6.OnAfterRender(cV[1].$1))):cV[1].$==7?(cT.removeAttribute("ws-onafterrender"),cK(cT,_6.OnAfterRender(cV[1].$1))):cx.warn("onafterrender hole filled with non-onafterrender data",cU):void 0;});bC.IterSelector(cE,"[ws-var]",function(cT){var cU,cV,cW;cU=cT.getAttribute("ws-var");cT.removeAttribute("ws-var");cV=(cW=null,[cQ.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?cV[1].$==8?cK(cT,_6.Value(cV[1].$1)):cV[1].$==9?cK(cT,_6.Checked(cV[1].$1)):cV[1].$==10?cK(cT,_6.IntValue(cV[1].$1)):cV[1].$==11?cK(cT,_6.IntValueUnchecked(cV[1].$1)):cV[1].$==12?cK(cT,_6.FloatValue(cV[1].$1)):cV[1].$==13?cK(cT,_6.FloatValueUnchecked(cV[1].$1)):cx.warn("Var hole filled with non-Var data",cU):void 0;});bC.IterSelector(cE,"[ws-attr-holes]",function(cT){var cU,cV,cW,cX;cU=new a.RegExp(_5.TextHoleRE(),"g");cV=_.SplitChars(cT.getAttribute("ws-attr-holes"),[" "],1);cT.removeAttribute("ws-attr-holes");for(cW=0,cX=cV.length-1;cW<=cX;cW++)(function(){var cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_;c7=O.get(cV,cW);c8=cT.getAttribute(c7);cY=null;cZ=0;c9=[];while(cY=cU.exec(c8),cY!==null){c_=bm.string(c8,{$:1,$0:cZ},{$:1,$0:cU.lastIndex-O.get(cY,0).length-1});cZ=cU.lastIndex;c9.push([c_,O.get(cY,1)]);}c1=bm.string(c8,{$:1,$0:cZ},null);cU.lastIndex=0;c2=O.foldBack(function(c$,da){return(function(db){var dc,dd;dc=db[0];dd=db[1];return function(de){var df,dg,dh,di,dj;df=de[0];dg=de[1];dh=(di=(dj=null,[cQ.TryGetValue(dd,{get:function(){return dj;},set:function(dk){dj=dk;}}),dj]),di[0]?di[1].$==1?{$:0,$0:di[1].$1}:di[1].$==2?{$:1,$0:di[1].$1}:di[1].$==8?{$:1,$0:di[1].$1.get_View()}:di[1].$==9?{$:1,$0:A.Map(a.String,di[1].$1.get_View())}:di[1].$==10?{$:1,$0:A.Map(function(dk){return dk.get_Input();},di[1].$1.get_View())}:di[1].$==11?{$:1,$0:A.Map(a.String,di[1].$1.get_View())}:di[1].$==12?{$:1,$0:A.Map(function(dk){return dk.get_Input();},di[1].$1.get_View())}:di[1].$==13?{$:1,$0:A.Map(a.String,di[1].$1.get_View())}:(cx.warn("Attribute value hole filled with non-text data",dd),{$:0,$0:""}):{$:0,$0:""});return dh.$==1?[dc,new M({$:1,$0:df===""?dh.$0:A.Map(function(dk){return dk+df;},dh.$0),$1:dg})]:[dc+dh.$0+df,dg];};}(c$))(da);},c9,[c1,M.Empty]);return cK(cT,c2[1].$==1?c2[1].$1.$==1?c2[1].$1.$1.$==1?c2[1].$1.$1.$1.$==0?(c3=c2[0],_6.Dynamic(c7,A.Map3(function(c$,da,db){return c3+c$+da+db;},c2[1].$0,c2[1].$1.$0,c2[1].$1.$1.$0))):(c4=c2[0],_6.Dynamic(c7,A.Map(function(c$){return c4+_.concat("",c$);},A.Sequence(c2[1])))):(c5=c2[0],_6.Dynamic(c7,A.Map2(function(c$,da){return c5+c$+da;},c2[1].$0,c2[1].$1.$0))):c2[0]===""?_6.Dynamic(c7,c2[1].$0):(c6=c2[0],_6.Dynamic(c7,A.Map(function(c$){return c6+c$;},c2[1].$0))):_8.Create(c7,c2[0]));}());});return[cz.DeleteEmptyFields({Els:cG,Dirty:true,Holes:cM,Attrs:cO,Render:(cH=cP.length==0?null:{$:1,$0:function(cT){O.iter(function(cU){cU(cT);},cP);}},cH?cH.$0:void 0),El:(cI=!_0.Equals(cG,null)&&cG.length===1&&(O.get(cG,0)instanceof q&&(O.get(cG,0)instanceof a.Element&&(cJ=O.get(cG,0),true)))?{$:1,$0:cJ}:null,cI?cI.$0:void 0)},["Render","El"]),bd.TreeReduce(A.Const(),A.Map2Unit,cN)];};_6.DynamicPred=function(cE,cF,cG){function cH(cI,cJ){return cJ[0]?bC.SetAttr(cI,cE,cJ[1]):bC.RemoveAttr(cI,cE);}return bB.Dynamic(A.Map2(function(cI,cJ){return[cI,cJ];},cF,cG),function(cI){return function(cJ){return cH(cI,cJ);};});};_6.Dynamic=function(cE,cF){return bB.Dynamic(cF,function(cG){return function(cH){return bC.SetAttr(cG,cE,cH);};});};_6.Value=function(cE){function cF(cG){return{$:1,$0:cG};}return _6.CustomValue(cE,a.id,function(cG){return cF(a.id(cG));});};_6.Style=function(cE,cF){return bB.Static(function(cG){bC.SetStyle(cG,cE,cF);});};_6.CustomValue=function(cE,cF,cG){return _6.CustomVar(cE,function(cH,cI){cH.value=cF(cI);},function(cH){return cG(cH.value);});};_6.Handler=function(cE,cF){return bB.Static(function(cG){cG.addEventListener(cE,function(cH){return(cF(cG))(cH);},false);});};_6.DynamicStyle=function(cE,cF){return bB.Dynamic(cF,function(cG){return function(cH){return bC.SetStyle(cG,cE,cH);};});};_6.CustomVar=function(cE,cF,cG){function cH(cJ,cK){return cE.UpdateMaybe(function(cL){var cM,cN;cM=cG(cJ);return cM!=null&&cM.$==1&&(!_0.Equals(cM.$0,cL)&&(cN=[cM,cM.$0],true))?cN[0]:null;});}function cI(cJ,cK){var cL,cM;cL=cG(cJ);return cL!=null&&cL.$==1&&(_0.Equals(cL.$0,cK)&&(cM=cL.$0,true))?null:cF(cJ,cK);}return _8.Concat([_6.Handler("change",function(cJ){return function(cK){return cH(cJ,cK);};}),_6.Handler("input",function(cJ){return function(cK){return cH(cJ,cK);};}),_6.Handler("keypress",function(cJ){return function(cK){return cH(cJ,cK);};}),_6.DynamicCustom(function(cJ){return function(cK){return cI(cJ,cK);};},cE.get_View())]);};_6.DynamicCustom=function(cE,cF){return bB.Dynamic(cF,cE);};_6.OnAfterRender=function(cE){return new _8({$:4,$0:cE});};_6.Checked=function(cE){function cF(cG,cH){return!_0.Equals(cE.Get(),cG.checked)?cE.Set(cG.checked):null;}return _8.Concat([_6.DynamicProp("checked",cE.get_View()),_6.Handler("change",function(cG){return function(cH){return cF(cG,cH);};})]);};_6.IntValue=function(cE){return _6.CustomVar(cE,function(cF,cG){var cH;cH=cG.get_Input();return cF.value!==cH?void(cF.value=cH):null;},function(cF){var cG,cH,cI;cG=cF.value;return{$:1,$0:ct.isBlank(cG)?(cF.checkValidity?cF.checkValidity():true)?new bZ({$:2,$0:cG}):new bZ({$:1,$0:cG}):(cH=(cI=0,[bn.TryParseInt32(cG,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI]),cH[0]?new bZ({$:0,$0:cH[1],$1:cG}):new bZ({$:1,$0:cG}))};});};_6.IntValueUnchecked=function(cE){return _6.CustomValue(cE,a.String,function(cF){var cG;return ct.isBlank(cF)?{$:1,$0:0}:(cG=+cF,cG!==cG>>0?null:{$:1,$0:cG});});};_6.FloatValue=function(cE){return _6.CustomVar(cE,function(cF,cG){var cH;cH=cG.get_Input();return cF.value!==cH?void(cF.value=cH):null;},function(cF){var cG,cH;cG=cF.value;return{$:1,$0:ct.isBlank(cG)?(cF.checkValidity?cF.checkValidity():true)?new bZ({$:2,$0:cG}):new bZ({$:1,$0:cG}):(cH=+cG,a.isNaN(cH)?new bZ({$:1,$0:cG}):new bZ({$:0,$0:cH,$1:cG}))};});};_6.FloatValueUnchecked=function(cE){return _6.CustomValue(cE,a.String,function(cF){var cG;return ct.isBlank(cF)?{$:1,$0:0}:(cG=+cF,a.isNaN(cG)?null:{$:1,$0:cG});});};_6.DynamicProp=function(cE,cF){return bB.Dynamic(cF,function(cG){return function(cH){cG[cE]=cH;};});};_7.Map=function(cE,cF){var cG,cH;cG=cF.s;return cG!=null&&cG.$==0?_7.New({$:0,$0:cE(cG.$0)}):(cH=_7.New({$:3,$0:[],$1:[]}),(_7.When(cF,function(cI){_7.MarkDone(cH,cF,cE(cI));},cH),cH));};_7.WhenRun=function(cE,cF,cG){var cH;cH=cE.s;cH==null?cG():cH!=null&&cH.$==2?(cH.$1.push(cG),cF(cH.$0)):cH!=null&&cH.$==3?(cH.$0.push(cF),cH.$1.push(cG)):cF(cH.$0);};_7.Map2=function(cE,cF,cG){var cH,cI,cJ;function cK(cL){var cM,cN,cO;if(!(cM=cJ.s,cM!=null&&cM.$==0||cM!=null&&cM.$==2)){cN=_7.ValueAndForever(cF);cO=_7.ValueAndForever(cG);cN!=null&&cN.$==1?cO!=null&&cO.$==1?cN.$0[1]&&cO.$0[1]?_7.MarkForever(cJ,cE(cN.$0[0],cO.$0[0])):_7.MarkReady(cJ,cE(cN.$0[0],cO.$0[0])):void 0:void 0;}}cH=cF.s;cI=cG.s;return cH!=null&&cH.$==0?cI!=null&&cI.$==0?_7.New({$:0,$0:cE(cH.$0,cI.$0)}):_7.Map2Opt1(cE,cH.$0,cG):cI!=null&&cI.$==0?_7.Map2Opt2(cE,cI.$0,cF):(cJ=_7.New({$:3,$0:[],$1:[]}),(_7.When(cF,cK,cJ),_7.When(cG,cK,cJ),cJ));};_7.WhenObsoleteRun=function(cE,cF){var cG;cG=cE.s;cG==null?cF():cG!=null&&cG.$==2?cG.$1.push(cF):cG!=null&&cG.$==3?cG.$1.push(cF):void 0;};_7.When=function(cE,cF,cG){var cH;cH=cE.s;cH==null?_7.Obsolete(cG):cH!=null&&cH.$==2?(_7.EnqueueSafe(cH.$1,cG),cF(cH.$0)):cH!=null&&cH.$==3?(cH.$0.push(cF),_7.EnqueueSafe(cH.$1,cG)):cF(cH.$0);};_7.MarkDone=function(cE,cF,cG){var cH;if(cH=cF.s,cH!=null&&cH.$==0)_7.MarkForever(cE,cG);else _7.MarkReady(cE,cG);};_7.Join=function(cE){var cF;cF=_7.New({$:3,$0:[],$1:[]});_7.When(cE,function(cG){var cH;cH=cG();_7.When(cH,function(cI){var cJ,cK;if((cJ=cH.s,cJ!=null&&cJ.$==0)&&(cK=cE.s,cK!=null&&cK.$==0))_7.MarkForever(cF,cI);else _7.MarkReady(cF,cI);},cF);},cF);return cF;};_7.Map2Opt1=function(cE,cF,cG){return _7.Map(function(cH){return cE(cF,cH);},cG);};_7.Map2Opt2=function(cE,cF,cG){return _7.Map(function(cH){return cE(cH,cF);},cG);};_7.ValueAndForever=function(cE){var cF;cF=cE.s;return cF!=null&&cF.$==0?{$:1,$0:[cF.$0,true]}:cF!=null&&cF.$==2?{$:1,$0:[cF.$0,false]}:null;};_7.MarkForever=function(cE,cF){var cG,cH,cI,cJ;cG=cE.s;if(cG!=null&&cG.$==3){cE.s={$:0,$0:cF};cH=cG.$0;for(cI=0,cJ=O.length(cH)-1;cI<=cJ;cI++)(O.get(cH,cI))(cF);}else void 0;};_7.MarkReady=function(cE,cF){var cG,cH,cI,cJ;cG=cE.s;if(cG!=null&&cG.$==3){cE.s={$:2,$0:cF,$1:cG.$1};cH=cG.$0;for(cI=0,cJ=O.length(cH)-1;cI<=cJ;cI++)(O.get(cH,cI))(cF);}else void 0;};_7.TryGet=function(cE){var cF,cG;cF=cE.s;return(cF!=null&&cF.$==0?(cG=cF.$0,true):cF!=null&&cF.$==2&&(cG=cF.$0,true))?{$:1,$0:cG}:null;};_7.EnqueueSafe=function(cE,cF){var cG,cH,cI,cJ;cE.push(cF);if(cE.length%20===0){cG=cE.slice(0);ch.Clear(cE);for(cH=0,cI=O.length(cG)-1;cH<=cI;cH++){cJ=O.get(cG,cH);typeof cJ=="object"?function(cK){if(cK.s)cE.push(cK);}(cJ):function(cK){cE.push(cK);}(cJ);}}else void 0;};_7.Map2Unit=function(cE,cF){var cG,cH,cI;function cJ(){var cK,cL,cM;if(!(cK=cI.s,cK!=null&&cK.$==0||cK!=null&&cK.$==2)){cL=_7.ValueAndForever(cE);cM=_7.ValueAndForever(cF);cL!=null&&cL.$==1?cM!=null&&cM.$==1?cL.$0[1]&&cM.$0[1]?_7.MarkForever(cI,null):_7.MarkReady(cI,null):void 0:void 0;}}cG=cE.s;cH=cF.s;return cG!=null&&cG.$==0?cH!=null&&cH.$==0?_7.New({$:0,$0:null}):cF:cH!=null&&cH.$==0?cE:(cI=_7.New({$:3,$0:[],$1:[]}),(_7.When(cE,cJ,cI),_7.When(cF,cJ,cI),cI));};_7.Sequence=function(cE){var cF,cG,cH;function cI(cJ){var cK;if(cH[0]===0){cK=O.map(function(cL){var cM;cM=cL.s;return cM!=null&&cM.$==0?cM.$0:cM!=null&&cM.$==2?cM.$0:x.FailWith("value not found by View.Sequence");},cF);O.forall(function(cL){var cM;cM=cL.s;return cM!=null&&cM.$==0;},cF)?_7.MarkForever(cG,cK):_7.MarkReady(cG,cK);}else cH[0]--;}cF=O.ofSeq(cE);return cF.length==0?_7.New({$:0,$0:[]}):(cG=_7.New({$:3,$0:[],$1:[]}),(cH=[O.length(cF)-1],(O.iter(function(cJ){_7.When(cJ,cI,cG);},cF),cG)));};_7.Copy=function(cE){var cF,cG,cH;cF=cE.s;return cF==null?cE:cF!=null&&cF.$==2?(cG=_7.New({$:2,$0:cF.$0,$1:[]}),(_7.WhenObsolete(cE,cG),cG)):cF!=null&&cF.$==3?(cH=_7.New({$:3,$0:[],$1:[]}),(_7.When(cE,function(cI){_7.MarkDone(cH,cE,cI);},cH),cH)):cE;};_7.WhenObsolete=function(cE,cF){var cG;cG=cE.s;cG==null?_7.Obsolete(cF):cG!=null&&cG.$==2?_7.EnqueueSafe(cG.$1,cF):cG!=null&&cG.$==3?_7.EnqueueSafe(cG.$1,cF):void 0;};_7.Map3=function(cE,cF,cG,cH){var cI,cJ,cK,cL;function cM(cN){var cO,cP,cQ,cR;if(!(cO=cL.s,cO!=null&&cO.$==0||cO!=null&&cO.$==2)){cP=_7.ValueAndForever(cF);cQ=_7.ValueAndForever(cG);cR=_7.ValueAndForever(cH);cP!=null&&cP.$==1?cQ!=null&&cQ.$==1?cR!=null&&cR.$==1?cP.$0[1]&&cQ.$0[1]&&cR.$0[1]?_7.MarkForever(cL,cE(cP.$0[0],cQ.$0[0],cR.$0[0])):_7.MarkReady(cL,cE(cP.$0[0],cQ.$0[0],cR.$0[0])):void 0:void 0:void 0;}}cI=cF.s;cJ=cG.s;cK=cH.s;return cI!=null&&cI.$==0?cJ!=null&&cJ.$==0?cK!=null&&cK.$==0?_7.New({$:0,$0:cE(cI.$0,cJ.$0,cK.$0)}):_7.Map3Opt1(cE,cI.$0,cJ.$0,cH):cK!=null&&cK.$==0?_7.Map3Opt2(cE,cI.$0,cK.$0,cG):_7.Map3Opt3(cE,cI.$0,cG,cH):cJ!=null&&cJ.$==0?cK!=null&&cK.$==0?_7.Map3Opt4(cE,cJ.$0,cK.$0,cF):_7.Map3Opt5(cE,cJ.$0,cF,cH):cK!=null&&cK.$==0?_7.Map3Opt6(cE,cK.$0,cF,cG):(cL=_7.New({$:3,$0:[],$1:[]}),(_7.When(cF,cM,cL),_7.When(cG,cM,cL),_7.When(cH,cM,cL),cL));};_7.Map3Opt1=function(cE,cF,cG,cH){return _7.Map(function(cI){return cE(cF,cG,cI);},cH);};_7.Map3Opt2=function(cE,cF,cG,cH){return _7.Map(function(cI){return cE(cF,cI,cG);},cH);};_7.Map3Opt3=function(cE,cF,cG,cH){return _7.Map2(function(cI,cJ){return cE(cF,cI,cJ);},cG,cH);};_7.Map3Opt4=function(cE,cF,cG,cH){return _7.Map(function(cI){return cE(cI,cF,cG);},cH);};_7.Map3Opt5=function(cE,cF,cG,cH){return _7.Map2(function(cI,cJ){return cE(cI,cF,cJ);},cG,cH);};_7.Map3Opt6=function(cE,cF,cG,cH){return _7.Map2(function(cI,cJ){return cE(cI,cJ,cF);},cG,cH);};_8=z.AttrProxy=cz.Class({},null,_8);_8.Create=function(cE,cF){return bB.Static(function(cG){bC.SetAttr(cG,cE,cF);});};_8.HandlerImpl=function(cE,cF){return bB.Static(function(cG){cG.addEventListener(cE,function(cH){return(cF(cG))(cH);},false);});};_8.Concat=function(cE){var cF;cF=bd.ofSeqNonCopying(cE);return bd.TreeReduce(bB.EmptyAttr(),_8.Append,cF);};_8.Append=function(cE,cF){return bB.AppendTree(cE,cF);};_8.Handler=function(cE,cF){return _8.HandlerImpl(cE,cF);};_9=z.FromView=cz.Class({Set:function(cE){this.set(cE);},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cE){var cF;A.Get((cF=this.set,function(cG){return cF(cE(cG));}),this.view);},UpdateMaybe:function(cE){var cF;cF=this;A.Get(function(cG){var cH;cH=cE(cG);cH!=null&&cH.$==1?cF.set(cH.$0):void 0;},this.view);}},G,_9);_9.New=cz.Ctor(function(cE,cF){var cG,cH;cG=this;G.New.call(this);this.set=cF;this.id=bk.Int();this.current=(cH=A.TryGet(cE),cH==null?null:cH.$0);this.view=A.Map(function(cI){cG.current=cI;return cI;},cE);},_9);O.get=function(cE,cF){O.checkBounds(cE,cF);return cE[cF];};O.length=function(cE){return cE.dims===2?cE.length*cE.length:cE.length;};O.checkBounds=function(cE,cF){if(cF<0||cF>=cE.length)x.FailWith("Index was outside the bounds of the array.");};O.set=function(cE,cF,cG){O.checkBounds(cE,cF);cE[cF]=cG;};_.concat=function(cE,cF){return O.ofSeq(cF).join(cE);};_.SplitChars=function(cE,cF,cG){return _.Split(cE,new a.RegExp("["+_.RegexEscape(cF.join(""))+"]"),cG);};_.Trim=function(cE){return cE.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};_.StartsWith=function(cE,cF){return cE.substring(0,cF.length)==cF;};_.Replace=function(cE,cF,cG){function cH(cI){var cJ,cK,cL;cJ=cI.indexOf(cF);return cJ!==-1?(cK=_.ReplaceOnce(cI,cF,cG),(cL=cJ+cG.length,_.Substring(cK,0,cJ+cG.length)+cH(cK.substring(cL)))):cI;}return cH(cE);};_.replicate=function(cE,cF){return O.create(cE,cF).join("");};_.Split=function(cE,cF,cG){return cG===1?O.filter(function(cH){return cH!=="";},_.SplitWith(cE,cF)):_.SplitWith(cE,cF);};_.RegexEscape=function(cE){return cE.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_.ReplaceOnce=function(cE,cF,cG){return cE.replace(cF,cG);};_.SplitWith=function(cE,cF){return cE.split(cF);};_.Substring=function(cE,cF,cG){return cE.substr(cF,cG);};_.SplitStrings=function(cE,cF,cG){return _.Split(cE,new a.RegExp(_.concat("|",O.map(_.RegexEscape,cF))),cG);};_.forall=function(cE,cF){return K.forall(cE,_.protect(cF));};_.protect=function(cE){return cE===null?"":cE;};L.ofArray=function(cE){var cF,cG,cH;cF=M.Empty;for(cG=O.length(cE)-1,cH=0;cG>=cH;cG--)cF=new M({$:1,$0:O.get(cE,cG),$1:cF});return cF;};L.ofSeq=function(cE){var cF,cG,cH,cI,cJ,cK;if(cE instanceof M)return cE;else if(cE instanceof a.Array)return L.ofArray(cE);else{cF=$.Get(cE);try{cH=cF.MoveNext();if(!cH)cG=M.Empty;else{cJ=new M({$:1});cI=cJ;while(cH){cI.$0=cF.Current();cF.MoveNext()?cI=(cK=new M({$:1}),cI.$1=cK,cK):cH=false;}cI.$1=M.Empty;cG=cJ;}return cG;}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}}};L.head=function(cE){return cE.$==1?cE.$0:L.listEmpty();};L.tail=function(cE){return cE.$==1?cE.$1:L.listEmpty();};L.listEmpty=function(){return x.FailWith("The input list was empty.");};$.Get=function(cE){return cE instanceof a.Array?$.ArrayEnumerator(cE):_0.Equals(typeof cE,"string")?$.StringEnumerator(cE):cE.GetEnumerator();};$.ArrayEnumerator=function(cE){return new bF.New(0,null,function(cF){var cG;cG=cF.s;return cG<O.length(cE)&&(cF.c=O.get(cE,cG),cF.s=cG+1,true);},void 0);};$.StringEnumerator=function(cE){return new bF.New(0,null,function(cF){var cG;cG=cF.s;return cG<cE.length&&(cF.c=cE[cG],cF.s=cG+1,true);},void 0);};$.Get0=function(cE){return cE instanceof a.Array?$.ArrayEnumerator(cE):_0.Equals(typeof cE,"string")?$.StringEnumerator(cE):"GetEnumerator0"in cE?cE.GetEnumerator0():cE.GetEnumerator();};bb.New=function(cE,cF,cG){return{c:cE,v:cF,f:cG};};A=z.View=cz.Class({},null,A);K.tryHead=function(cE){var cF;cF=$.Get(cE);try{return cF.MoveNext()?{$:1,$0:cF.Current()}:null;}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};O.groupBy=function(cE,cF){var cG,cH,cI,cJ,cK,cL;cG=new bf.New$5();cH=[];for(cI=0,cJ=O.length(cF)-1;cI<=cJ;cI++){cK=cF[cI];cL=cE(cK);cG.ContainsKey(cL)?cG.get_Item(cL).push(cK):(cH.push(cL),cG.Add(cL,[cK]));}O.mapInPlace(function(cM){return[cM,cG.get_Item(cM)];},cH);return cH;};K.last=function(cE){var cF,cG;cF=$.Get(cE);try{if(!cF.MoveNext())cG=K.insufficient();else{while(cF.MoveNext());cG=cF.Current();}return cG;}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};K.insufficient=function(){return x.FailWith("The input sequence has an insufficient number of elements.");};O.mapInPlace=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cF[cG]=cE(cF[cG]);};K.nonNegative=function(){return x.FailWith("The input must be non-negative.");};K.tryItem=function(cE,cF){var cG,cH,cI;if(cE<0)return null;else{cG=0;cH=$.Get(cF);try{cI=true;while(cI&&cG<=cE)if(cH.MoveNext())cG=cG+1;else cI=false;return cI?{$:1,$0:cH.Current()}:null;}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}}};O.mapiInPlace=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cF[cG]=cE(cG,cF[cG]);return cF;};bd.ofSeqNonCopying=function(cE){var cF,cG;if(cE instanceof a.Array)return cE;else if(cE instanceof M)return O.ofList(cE);else if(cE===null)return[];else{cF=[];cG=$.Get(cE);try{while(cG.MoveNext())cF.push(cG.Current());return cF;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}}};bd.TreeReduce=function(cE,cF,cG){var cH;function cI(cJ,cK){var cL,cM;return cK<=0?cE:cK===1&&(cJ>=0&&cJ<cH)?O.get(cG,cJ):(cM=cK/2>>0,cF(cI(cJ,cM),cI(cJ+cM,cK-cM)));}cH=O.length(cG);return cI(0,cH);};bd.MapTreeReduce=function(cE,cF,cG,cH){var cI;function cJ(cK,cL){var cM,cN;return cL<=0?cF:cL===1&&(cK>=0&&cK<cI)?cE(O.get(cH,cK)):(cN=cL/2>>0,cG(cJ(cK,cN),cJ(cK+cN,cL-cN)));}cI=O.length(cH);return cJ(0,cI);};bd.mapInPlace=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cF[cG]=cE(cF[cG]);return cF;};bf=be.Dictionary=cz.Class({TryGetValue:function(cE,cF){var cG,cH,cI;cG=this;cH=this.data[this.hash(cE)];return cH==null?false:(cI=O.tryPick(function(cJ){var cK;cK=x.KeyValue(cJ);return cG.equals.apply(null,[cK[0],cE])?{$:1,$0:cK[1]}:null;},cH),cI!=null&&cI.$==1&&(cF.set(cI.$0),true));},Add:function(cE,cF){this.add(cE,cF);},set_Item:function(cE,cF){this.set(cE,cF);},add:function(cE,cF){var cG,cH,cI;cG=this;cH=this.hash(cE);cI=this.data[cH];cI==null?(this.count=this.count+1,this.data[cH]=new a.Array({K:cE,V:cF})):(O.exists(function(cJ){return cG.equals.apply(null,[(x.KeyValue(cJ))[0],cE]);},cI)?bT.alreadyAdded():void 0,this.count=this.count+1,cI.push({K:cE,V:cF}));},Remove:function(cE){return this.remove(cE);},ContainsKey:function(cE){var cF,cG;cF=this;cG=this.data[this.hash(cE)];return cG==null?false:O.exists(function(cH){return cF.equals.apply(null,[(x.KeyValue(cH))[0],cE]);},cG);},get_Keys:function(){return new b4.New(this);},set:function(cE,cF){var cG,cH,cI,cJ;cG=this;cH=this.hash(cE);cI=this.data[cH];cI==null?(this.count=this.count+1,this.data[cH]=new a.Array({K:cE,V:cF})):(cJ=O.tryFindIndex(function(cK){return cG.equals.apply(null,[(x.KeyValue(cK))[0],cE]);},cI),cJ==null?(this.count=this.count+1,cI.push({K:cE,V:cF})):cI[cJ.$0]={K:cE,V:cF});},remove:function(cE){var cF,cG,cH,cI;cF=this;cG=this.hash(cE);cH=this.data[cG];return cH==null?false:(cI=O.filter(function(cJ){return!cF.equals.apply(null,[(x.KeyValue(cJ))[0],cE]);},cH),O.length(cI)<cH.length&&(this.count=this.count-1,this.data[cG]=cI,true));},get_Item:function(cE){return this.get(cE);},get:function(cE){var cF,cG;cF=this;cG=this.data[this.hash(cE)];return cG==null?bT.notPresent():O.pick(function(cH){var cI;cI=x.KeyValue(cH);return cF.equals.apply(null,[cI[0],cE])?{$:1,$0:cI[1]}:null;},cG);},Clear:function(){this.data=[];this.count=0;},GetEnumerator:function(){return $.Get0(this);},GetEnumerator0:function(){return $.Get0(O.concat(t.GetFieldValues(this.data)));}},h,bf);bf.New$5=cz.Ctor(function(){bf.New$6.call(this,[],_0.Equals,_0.Hash);},bf);bf.New$6=cz.Ctor(function(cE,cF,cG){var cH,cI;h.New.call(this);this.equals=cF;this.hash=cG;this.count=0;this.data=[];cH=$.Get(cE);try{while(cH.MoveNext()){cI=cH.Current();this.set(cI.K,cI.V);}}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}},bf);_7.Obsolete=function(cE){var cF,cG,cH,cI,cJ;cG=cE.s;if(cG==null||(cG!=null&&cG.$==2?(cF=cG.$1,false):cG!=null&&cG.$==3?(cF=cG.$1,false):true))void 0;else{cE.s=null;for(cH=0,cI=O.length(cF)-1;cH<=cI;cH++){cJ=O.get(cF,cH);typeof cJ=="object"?function(cK){_7.Obsolete(cK);}(cJ):cJ();}}};_7.New=function(cE){return{s:cE};};bg.InMemory=function(cE){return new bG.New(cE);};bh=z.ConcreteVar=cz.Class({Set:function(cE){if(this.isConst)(function(cF){return cF("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cF){cx.log(cF);}));else{_7.Obsolete(this.snap);this.current=cE;this.snap=_7.New({$:2,$0:cE,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cE){this.Set(cE(this.Get()));},UpdateMaybe:function(cE){var cF;cF=cE(this.Get());cF!=null&&cF.$==1?this.Set(cF.$0):void 0;}},G,bh);bh.New=cz.Ctor(function(cE,cF,cG){var cH;cH=this;G.New.call(this);this.isConst=cE;this.current=cG;this.snap=cF;this.view=function(){return cH.snap;};this.id=bk.Int();},bh);bi=be.List=cz.Class({GetEnumerator:function(){return $.Get(this);},GetEnumerator0:function(){return $.Get0(this);}},null,bi);bk.Id=function(){bk.set_counter(bk.counter()+1);return"uid"+a.String(bk.counter());};bk.Int=function(){bk.set_counter(bk.counter()+1);return bk.counter();};bk.set_counter=function(cE){bV.$cctor();bV.counter=cE;};bk.counter=function(){bV.$cctor();return bV.counter;};bl.unindent=function(cE){var cF,cG,cH,cI;cF=_.SplitChars(cE,["\n"],0);cG=(cH=K.tryFindIndex(function(cJ){return" "!==cJ;},(cI=K.tryFind(function(cJ){return _.Trim(cJ)!=="";},cF),cI==null?"":cI.$0)),cH==null?0:cH.$0);return K.filter(function(cJ){return!_.StartsWith(cJ,"# 1 ");},K.map(function(cJ){return cJ.length<=cG?"":cJ.substring(cG);},cF));};bl.splitByChar=function(cE,cF){return _.SplitChars(cF,[cE],0);};bl.unindentStr=function(){_3.$cctor();return _3.unindentStr;};bl.delimitedO=function(cE,cF,cG){var cH,cI,cJ,cK,cL;cH=bl.splitInTwoO(cE,cG);return cH==null?null:(cI=cH.$0,(cJ=cI[0],(cK=bl.splitInTwoO(cF,cI[1]),cK==null?null:{$:1,$0:(cL=cK.$0,[cJ,cL[0],cL[1]])})));};bl.StartsWith=function(cE,cF){return _.StartsWith(cF,cE)?{$:1,$0:bm.string(cF,{$:1,$0:cE.length},null)}:null;};bl.splitInTwoO=function(cE,cF){var cG;cG=cF.indexOf(cE);return cG===-1?null:{$:1,$0:[E["String.Left"](cF,cG),cF.substring(cG+cE.length)]};};bm.array=function(cE,cF,cG){return cF==null?cG!=null&&cG.$==1?cE.slice(0,cG.$0+1):[]:cG==null?cE.slice(cF.$0):cE.slice(cF.$0,cG.$0+1);};bm.string=function(cE,cF,cG){return cF==null?cG!=null&&cG.$==1?cE.slice(0,cG.$0+1):"":cG==null?cE.slice(cF.$0):cE.slice(cF.$0,cG.$0+1);};bn.TryParseInt32=function(cE,cF){return bn.TryParse(cE,-2147483648,2147483647,cF);};bn.TryParseInt64=function(cE,cF){return bn.TryParse(cE,-9223372036854775808,9223372036854775807,cF);};bq=bp.WcTabStripT=cz.Class({connectedCallback:function(){var cE,cF,cG,cH;function cI(){var cJ,cK,cL;cK=!cF.hasAttribute("bottom");cL=L.ofSeq(K.delay(function(){return K.collect(function(cM){var cN;cN=cF.childNodes[cM-1];return _0.Equals(cN.nodeType,q.ELEMENT_NODE)?[[cN.hasAttribute("tabname")?cN.getAttribute("tabname"):(function(cO){return function(cP){return cO("Tab "+a.String(cP));};}(a.id))(cM),cN]]:[];},x.range(1,cF.childNodes.length));}));while(cH.childNodes.length>0)cH.removeChild(cH.lastChild);cJ=bp.tabStrip(cE.selected,cK,true,cL,W.Element("slot",M.Empty,M.Empty));_5.LoadLocalTemplates("");W.Run(cH,cJ);}cE=this;!this.added?(cF=this,cG=cF.attachShadow({mode:"open"}),cH=self.document.createElement("div"),cG.appendChild(cH),cI(),cF.addEventListener("DOMSubtreeModified",E.delayed(50,cI)),this.added=true):void 0;}},h,bq);bq.Constructor=function(){var cE,cF;cE=(cF=cC.construct(self.HTMLElement,[],this.__proto__.constructor),cF);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(cE);return cE;};bq.New=cz.Ctor(function(){h.New.call(this);this.added=false;this.selected=D.Create$1(1);(function(cE){return cE("WcTabStripT initializer");}(function(cE){cx.log(cE);}));},bq);bo.defineWebComponent=function(cE,cF,cG){try{cx.log("defineWebComponent: "+cE);bc.setPrototypeOf(cG.prototype,self.HTMLElement.prototype);bc.setPrototypeOf(cG,self.HTMLElement);bc.setPrototypeOf(cF.prototype,cG.prototype);self.customElements.define(cE,cF);}catch(cH){(function(cI){return cI("Failed to define WebComponent. Not supported.");}(function(cI){cx.log(cI);}));}};bu=bt.TemplateInstance=cz.Class({get_Doc:function(){return this.doc;}},h,bu);bu.New=cz.Ctor(function(cE,cF){h.New.call(this);this.doc=cF;this.allVars=cE.$==0?cE.$0:x.FailWith("Should not happen");},bu);bv=bt.ProviderBuilder=cz.Class({WithHole:function(cE){this.h.push(cE);return this;}},null,bv);bv.Make=function(){var cE;return bv.New(null,(cE=_2.NewGuid(),a.String(cE)),[]);};bv.New=function(cE,cF,cG){return new bv({i:cE,k:cF,h:cG});};bw.CompleteHoles=function(cE,cF,cG){var cI,cJ,cK,cL,cM,cN;function cH(cO,cP){var cQ,cR,cS,cT;return cJ.Contains(cO)?null:(cQ=cP===0?(cR=D.Create$1(""),[{$:8,$0:cO,$1:cR},cR]):cP===1?(cS=D.Create$1(0),[{$:13,$0:cO,$1:cS},cS]):cP===2?(cT=D.Create$1(false),[{$:9,$0:cO,$1:cT},cT]):x.FailWith("Invalid value type"),(cI.set_Item(cO,cQ[1]),{$:1,$0:cQ[0]}));}cI=new bf.New$5();cJ=new bI.New$3();cK=$.Get(cF);try{while(cK.MoveNext()){cL=cK.Current();(cL.$==8?(cM=[cL.$0,bJ.Box(cL.$1)],true):cL.$==11?(cM=[cL.$0,bJ.Box(cL.$1)],true):cL.$==10?(cM=[cL.$0,bJ.Box(cL.$1)],true):cL.$==13?(cM=[cL.$0,bJ.Box(cL.$1)],true):cL.$==12?(cM=[cL.$0,bJ.Box(cL.$1)],true):cL.$==9&&(cM=[cL.$0,bJ.Box(cL.$1)],true))?(cN=cM[0],cJ.Add(cN),cI.set_Item(cN,cM[1])):void 0;}}finally{if(typeof cK=="object"&&"Dispose"in cK)cK.Dispose();}return[K.append(cF,O.choose(function(cO){return cH(cO[0],cO[1]);},cG)),{$:0,$0:cI}];};bw.EventQ2=function(cE,cF,cG,cH){return{$:5,$0:cF,$1:true,$2:function(cI){return function(cJ){return cH({Vars:cG(),Target:cI,Event:cJ});};}};};bx.appfwkclient=function(cE){bx.fixedsplitterhor();bx.fixedsplitterver();_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},cE):void 0;};by.p$1=function(cE){return"{"+("actName = "+H.prettyPrint(cE.actName))+"; "+("actFunction = "+bz.p$1(cE.actFunction))+"; "+("actEnabled = "+bz.p$2(cE.actEnabled))+"}";};bx.tile=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"tile"},cE):void 0;};bx.namevalueinput=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},cE):void 0;};bx.namevalue=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"namevalue"},cE):void 0;};bx.action=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"action"},cE):void 0;};bx.actiondisabled=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},cE):void 0;};bx.fixedsplitterhor=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},cE):void 0;};bx.fixedsplitterver=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},cE):void 0;};bx.wcompsplitterhor=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},cE):void 0;};bx.wcompsplitterver=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},cE):void 0;};bx.appframework=function(cE){_5.LoadLocalTemplates("appframework");return cE?_5.NamedTemplate("appframework",{$:1,$0:"appframework"},cE):void 0;};bz.p$1=function(cE){return cE.$==2?"FunAct2 (<fun>, "+H.prettyPrint(cE.$1)+", "+H.prettyPrint(cE.$2)+")":cE.$==1?"FunAct1 (<fun>, "+H.prettyPrint(cE.$1)+")":"FunAct0 <fun>";};bz.p$2=function(cE){return"View <fun>";};by.p=function(cE){return"{"+("docName = "+H.prettyPrint(cE.docName))+"; "+("docDoc = "+bz.p(cE.docDoc))+"}";};bz.p=function(cE){return cE.$==5?"FunDoc5 (<fun>, "+H.prettyPrint(cE.$1)+", "+H.prettyPrint(cE.$2)+", "+H.prettyPrint(cE.$3)+", "+H.prettyPrint(cE.$4)+", "+H.prettyPrint(cE.$5)+")":cE.$==4?"FunDoc4 (<fun>, "+H.prettyPrint(cE.$1)+", "+H.prettyPrint(cE.$2)+", "+H.prettyPrint(cE.$3)+", "+H.prettyPrint(cE.$4)+")":cE.$==3?"FunDoc3 (<fun>, "+H.prettyPrint(cE.$1)+", "+H.prettyPrint(cE.$2)+", "+H.prettyPrint(cE.$3)+")":cE.$==2?"FunDoc2 (<fun>, "+H.prettyPrint(cE.$1)+", "+H.prettyPrint(cE.$2)+")":cE.$==1?"FunDoc1 (<fun>, "+H.prettyPrint(cE.$1)+")":"LazyDoc "+H.prettyPrint(cE.$0);};bA.init=function(cE,cF){var cG;cG=new bK.New();bA.set_layoutHorizontal(cE);bA.set_layoutVertical(cF);bo.defineWebComponent("wcomp-splitter",bK.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};bA.set_layoutHorizontal=function(cE){_3.$cctor();_3.layoutHorizontal=cE;};bA.set_layoutVertical=function(cE){_3.$cctor();_3.layoutVertical=cE;};bA.layoutVertical=function(){_3.$cctor();return _3.layoutVertical;};bA.layoutHorizontal=function(){_3.$cctor();return _3.layoutHorizontal;};bp.init=function(){_3.$cctor();return _3.init;};bp.tabStrip=function(cE,cF,cG,cH,cI){var cJ;cJ=W.Element("div",[_8.Create("class",(((cz.Curried3(function(cK,cL,cM){return cK("tab-strip "+H.toSafe(cL)+" "+H.toSafe(cM));}))(a.id))(cF?"top":"bottom"))(cG?"horizontal":"vertical"))],L.ofSeq(K.delay(function(){return K.collect(function(cK){var cL;cL=cK[0];return[bX.New$1().Content(W.Element("div",[_6.Dynamic("class",A.Map(function(cM){return"tab"+(cM===cL+1?" selected":"");},cE.get_View())),_8.Create("draggable","true"),_8.HandlerImpl("click",function(){return function(){return cE.Set(cL+1);};})],[W.TextNode(cK[1][0])]))];},K.indexed(cH));})));return W.Element("div",[_8.Create("class","tab-panel")],L.ofSeq(K.delay(function(){return K.append(cF?[cJ]:[],K.delay(function(){return K.append([W.Element("div",[_8.Create("class","tab-content")],[cI])],K.delay(function(){return K.append(!cF?[cJ]:[],K.delay(function(){return K.append([W.Element("style",M.Empty,L.ofArray([W.TextNode(bp.css())]))],K.delay(function(){return[W.Element("style",M.Empty,L.ofArray([W.TextView(A.Map(function(cK){return function(cL){return cK("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(cL)+")) { display: grid }\r\n                                           ");};}(a.id),cE.get_View()))]))];}));}));}));}));})));};bp.css=function(){_3.$cctor();return _3.css;};bB.Dynamic=function(cE,cF){return new _8({$:1,$0:new bO.New(cE,cF)});};bB.Static=function(cE){return new _8({$:3,$0:cE});};bB.Updates=function(cE){return bd.MapTreeReduce(function(cF){return cF.NChanged();},A.Const(),A.Map2Unit,cE.DynNodes);};bB.AppendTree=function(cE,cF){var cG;return cE===null?cF:cF===null?cE:(cG=new _8({$:2,$0:cE,$1:cF}),(bB.SetFlags(cG,bB.Flags(cE)|bB.Flags(cF)),cG));};bB.EmptyAttr=function(){cg.$cctor();return cg.EmptyAttr;};bB.Insert=function(cE,cF){var cG,cH,cI;function cJ(cK){if(!(cK===null))if(cK!=null&&cK.$==1)cG.push(cK.$0);else if(cK!=null&&cK.$==2){cJ(cK.$0);cJ(cK.$1);}else if(cK!=null&&cK.$==3)cK.$0(cE);else if(cK!=null&&cK.$==4)cH.push(cK.$0);}cG=[];cH=[];cJ(cF);cI=cG.slice(0);return bS.New(cE,bB.Flags(cF),cI,cH.length===0?null:{$:1,$0:function(cK){K.iter(function(cL){cL(cK);},cH);}});};bB.SetFlags=function(cE,cF){cE.flags=cF;};bB.Flags=function(cE){return cE!==null&&cE.hasOwnProperty("flags")?cE.flags:0;};bB.HasExitAnim=function(cE){var cF;cF=2;return(cE.DynFlags&cF)===cF;};bB.GetExitAnim=function(cE){return bB.GetAnim(cE,function(cF,cG){return cF.NGetExitAnim(cG);});};bB.HasEnterAnim=function(cE){var cF;cF=1;return(cE.DynFlags&cF)===cF;};bB.GetEnterAnim=function(cE){return bB.GetAnim(cE,function(cF,cG){return cF.NGetEnterAnim(cG);});};bB.HasChangeAnim=function(cE){var cF;cF=4;return(cE.DynFlags&cF)===cF;};bB.GetChangeAnim=function(cE){return bB.GetAnim(cE,function(cF,cG){return cF.NGetChangeAnim(cG);});};bB.Empty=function(cE){return bS.New(cE,0,[],null);};bB.GetAnim=function(cE,cF){return b5.Concat(O.map(function(cG){return cF(cG,cE.DynElem);},cE.DynNodes));};bB.Sync=function(cE,cF){O.iter(function(cG){cG.NSync(cE);},cF.DynNodes);};bC.SetAttr=function(cE,cF,cG){cE.setAttribute(cF,cG);};bC.RemoveAttr=function(cE,cF){cE.removeAttribute(cF);};bC.CreateText=function(cE){return bC.Doc().createTextNode(cE);};bC.ChildrenArray=function(cE){var cF,cG,cH;cF=[];for(cG=0,cH=cE.childNodes.length-1;cG<=cH;cG++)cF.push(cE.childNodes[cG]);return cF;};bC.CreateElement=function(cE){return bC.Doc().createElement(cE);};bC.Doc=function(){b8.$cctor();return b8.Doc;};bC.SetStyle=function(cE,cF,cG){bC.SetProperty(cE.style,cF,cG);};bC.IterSelector=function(cE,cF,cG){var cH,cI,cJ;cH=cE.querySelectorAll(cF);for(cI=0,cJ=cH.length-1;cI<=cJ;cI++)cG(cH[cI]);};bC.SetProperty=function(cE,cF,cG){return cE.setProperty(cF,cG);};bC.RemoveClass=function(cE,cF){var cG;bC.setClass(cE,(cG=bC.clsRE(cF),bC.getClass(cE).replace(cG,function(cH,cI,cJ){return cI===""||cJ===""?"":" ";})));};bC.AddClass=function(cE,cF){var cG;cG=bC.getClass(cE);cG===""?bC.setClass(cE,cF):!bC.clsRE(cF).test(cG)?bC.setClass(cE,cG+" "+cF):void 0;};bC.InsertAt=function(cE,cF,cG){var cH;if(!(cG.parentNode===cE&&cF===(cH=cG.nextSibling,_0.Equals(cH,null)?null:cH)))cE.insertBefore(cG,cF);};bC.setClass=function(cE,cF){if(cE instanceof a.SVGElement)cE.setAttribute("class",cF);else cE.className=cF;};bC.getClass=function(cE){return cE instanceof a.SVGElement?cE.getAttribute("class"):cE.className;};bC.clsRE=function(cE){return new a.RegExp("(\\s+|^)"+cE+"(?:\\s+"+cE+")*(\\s+|$)","g");};bC.RemoveNode=function(cE,cF){if(cF.parentNode===cE)cE.removeChild(cF);};bD=z.DocElemNode=cz.Class({Equals:function(cE){return this.ElKey===cE.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bD);bD.New=function(cE,cF,cG,cH,cI,cJ){var cK;return new bD((cK={Attr:cE,Children:cF,El:cH,ElKey:cI},(cz.SetOptional(cK,"Delimiters",cG),cz.SetOptional(cK,"Render",cJ),cK)));};bF=$.T=cz.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},h,bF);bF.New=cz.Ctor(function(cE,cF,cG,cH){h.New.call(this);this.s=cE;this.c=cF;this.n=cG;this.d=cH;},bF);bG=bg.ArrayStorage=cz.Class({SRemoveIf:function(cE,cF){return O.filter(function(cG){return!cE(cG);},cF);},SAppendMany:function(cE,cF){var cG;cG=bd.ofSeqNonCopying(cE);cF.push.apply(cF,cG);return cF;},SSetAt:function(cE,cF,cG){O.set(cG,cE,cF);return cG;},SAppend:function(cE,cF){cF.push(cE);return cF;},SInit:function(){return this.init;}},h,bG);bG.New=cz.Ctor(function(cE){h.New.call(this);this.init=cE;},bG);bH.TryParse=function(cE){var cF;cF=cD.parse(cE);return a.isNaN(cF)?null:{$:1,$0:cF};};bn.TryParse=function(cE,cF,cG,cH){var cI,cJ;cI=+cE;cJ=cI===cI-cI%1&&cI>=cF&&cI<=cG;cJ?cH.set(cI):void 0;return cJ;};E.delayed=function(cE,cF){var cG;cG=[null];return function(cH){var cI,cJ;cI=cG[0];cI==null?void 0:cI.$0.Cancel$1();cG[0]={$:1,$0:new bY.New()};ca.Start((cJ=null,ca.Delay(function(){return ca.Bind(ca.Sleep(cE),function(){cF(cH);return ca.Zero();});})),{$:1,$0:cG[0].$0});};};E.print=function(cE){if(typeof cE=="string")((function(cF){return function(cG){return cF(H.toSafe(cG));};}(function(cF){cx.log(cF);}))(cE));else((function(cF){return function(cG){return cF(H.prettyPrint(cG));};}(function(cF){cx.log(cF);}))(cE));};E["String.Left"]=function(cE,cF){return cF<0?E["String.Substring2"](cE,0,cE.length+cF):E["String.Substring2"](cE,0,cF);};E["String.Substring2"]=function(cE,cF,cG){var cH,cI;while(true){if(cG<=0)return"";else if(cF<0){cH=cF;cF=0;cG=cG+cH;}else return cF>=cE.length?"":_.Substring(cE,cF,(cI=cE.length-cF,_0.Compare(cG,cI)===-1?cG:cI));}};bI=be.HashSet=cz.Class({Add:function(cE){return this.add(cE);},Contains:function(cE){var cF;cF=this.data[this.hash(cE)];return cF==null?false:this.arrContains(cE,cF);},add:function(cE){var cF,cG;cF=this.hash(cE);cG=this.data[cF];return cG==null?(this.data[cF]=[cE],this.count=this.count+1,true):this.arrContains(cE,cG)?false:(cG.push(cE),this.count=this.count+1,true);},arrContains:function(cE,cF){var cG,cH,cI,cJ;cG=true;cH=0;cJ=cF.length;while(cG&&cH<cJ)if(this.equals.apply(null,[cF[cH],cE]))cG=false;else cH=cH+1;return!cG;},ExceptWith:function(cE){var cF;cF=$.Get(cE);try{while(cF.MoveNext())this.Remove(cF.Current());}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cE){var cF,cG,cH,cI;cF=0;cG=co.concat(this.data);for(cH=0,cI=cG.length-1;cH<=cI;cH++)O.set(cE,cH,cG[cH]);},IntersectWith:function(cE){var cF,cG,cH,cI,cJ;cF=new bI.New$4(cE,this.equals,this.hash);cG=co.concat(this.data);for(cH=0,cI=cG.length-1;cH<=cI;cH++){cJ=cG[cH];!cF.Contains(cJ)?this.Remove(cJ):void 0;}},Remove:function(cE){var cF;cF=this.data[this.hash(cE)];return cF==null?false:this.arrRemove(cE,cF)&&(this.count=this.count-1,true);},arrRemove:function(cE,cF){var cG,cH,cI,cJ;cG=true;cH=0;cJ=cF.length;while(cG&&cH<cJ)if(this.equals.apply(null,[cF[cH],cE])){cF.splice.apply(cF,[cH,1]);cG=false;}else cH=cH+1;return!cG;},GetEnumerator:function(){return $.Get(co.concat(this.data));},GetEnumerator0:function(){return $.Get(co.concat(this.data));}},h,bI);bI.New$3=cz.Ctor(function(){bI.New$4.call(this,[],_0.Equals,_0.Hash);},bI);bI.New$4=cz.Ctor(function(cE,cF,cG){var cH;h.New.call(this);this.equals=cF;this.hash=cG;this.data=[];this.count=0;cH=$.Get(cE);try{while(cH.MoveNext())this.add(cH.Current());}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}},bI);bI.New$2=cz.Ctor(function(cE){bI.New$4.call(this,cE,_0.Equals,_0.Hash);},bI);bJ.Box=a.id;bK=bA.WcSplitterT=cz.Class({connectedCallback:function(){var cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;function cU(c2){var c3,c4,c5,c6;c3=cL?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];c4=a.parseFloat("0"+cB(c2.parentElement.parentElement).css(c3[0]));c5=a.parseFloat("0"+cB(c2.parentElement.parentElement).css(c3[1]));cO.Set(a.parseFloat("0"+cB(c2.parentElement.parentElement).css(c3[2])));cN[0]=c4+c5;c6=cE.getBoundingClientRect();return cL?cK?[c6.width,c6.height]:[-c6.width,c6.height]:cK?[c6.height,c6.width]:[-c6.height,c6.width];}function cV(c2){return cL?c2.clientX:c2.clientY;}function cW(c2){var c3,c4;c3=(cV(c2)-cR[0])*100/cM[0][0]+cQ[0];cJ.Set((c4=_0.Compare(cH,c3)===1?cH:c3,_0.Compare(cI,c4)===-1?cI:c4));}function cX(){if(cP[0]){cP[0]=false;self.removeEventListener("mousemove",cW,false);self.removeEventListener("mouseup",cX,false);}}function cY(c2){var c3,c4;if(!cP[0]){cP[0]=true;cQ[0]=cJ.Get();cR[0]=cV(c2);cM[0]=(c3=(c4=cS[0],c4==null?null:{$:1,$0:cU(c4.$0)}),c3==null?[100,500]:c3.$0);self.addEventListener("mousemove",cW,false);self.addEventListener("mouseup",cX,false);c2.preventDefault();}}function cZ(c2,c3,c4,c5){return[(c2-c3-c4)*c5/100,(c2-c3-c4)*(100-c5)/100];}function c0(c2,c3){return(((((cz.Curried(function(c4,c5,c6,c7,c8){return c4(" "+c5.toFixed(2)+"px "+c6.toFixed(2)+"px ; "+H.toSafe(c7)+" : "+c8.toFixed(2)+"px; ");},5))(a.id))(c2))(c3))(cL?"height":"width"))(cM[0][1]);}function c1(){var c2;c2=cS[0];c2==null?void 0:cM[0]=cU(c2.$0);cJ.Set(cJ.Get());}if(!this.added){cE=this;cF=cE.attachShadow({mode:"open"});cG=self.document.createElement("div");cH=cE.hasAttribute("min")?a.parseFloat(cE.getAttribute("min")):4;cI=cE.hasAttribute("max")?a.parseFloat(cE.getAttribute("max")):96;cJ=D.Create$1(cE.hasAttribute("value")?a.parseFloat(cE.getAttribute("value")):50);cK=!cE.hasAttribute("second");cL=cE.hasAttribute("vertical");cM=[[0,0]];cN=[0];cO=D.Create$1(0);cP=[false];cQ=[0];cR=[0];cS=[null];cT=(((((cL?bA.layoutVertical():bA.layoutHorizontal())(A.Map(function(c2){var c3;c3=cZ(cM[0][0],cO.Get(),cN[0],c2);return c0.apply(null,c3);},cJ.get_View())))(function(){b2.addResizeObserver(c1,cE);c1();}))(function(c2){cS[0]={$:1,$0:c2};c1();}))(function(c2){cY(c2);}))(A.Map(function(c2){return function(c3){return c2(H.prettyPrint(c3)+"px");};}(a.id),cO.get_View()));_5.LoadLocalTemplates("");W.Run(cG,cT);cF.appendChild(cG.firstChild);this.added=true;}}},h,bK);bK.Constructor=function(){var cE,cF;cE=(cF=cC.construct(self.HTMLElement,[],this.__proto__.constructor),cF);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(cE);return cE;};bK.New=cz.Ctor(function(){h.New.call(this);this.added=false;(function(cE){return cE("WcSplitterT initializer");}(function(cE){cx.log(cE);}));},bK);bM=g.MatchFailureException=cz.Class({},bL,bM);bM.New=cz.Ctor(function(cE,cF,cG){this.message=cE+" at "+a.String(cF)+":"+a.String(cG);bc.setPrototypeOf(this,bM.prototype);},bM);bN.$cctor=function(){bN.$cctor=a.ignore;bN.LoadedTemplates=new bf.New$5();bN.LocalTemplatesLoaded=false;bN.TextHoleRE="\\${([^}]+)}";};bO=z.DynamicAttrNode=cz.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cE){return b5.get_Empty();},NGetEnterAnim:function(cE){return b5.get_Empty();},NGetChangeAnim:function(cE){return b5.get_Empty();},NSync:function(cE){if(this.dirty){(this.push(cE))(this.value);this.dirty=false;}}},h,bO);bO.New=cz.Ctor(function(cE,cF){var cG;cG=this;h.New.call(this);this.push=cF;this.value=void 0;this.dirty=false;this.updates=A.Map(function(cH){cG.value=cH;cG.dirty=true;},cE);},bO);bP=z.Elt=cz.Class({on:function(cE,cF){var cG;cG=this;this.elt.addEventListener(cE,function(cH){return cF(cG.elt,cH);},false);return this;}},W,bP);bP.New=function(cE,cF,cG){var cH,cI;cH=bQ.CreateElemNode(cE,cF,cG.docNode);cI=b9.Create(cG.updates);return new bP.New$1({$:1,$0:cH},A.Map2Unit(bB.Updates(cH.Attr),cI.v),cE,cI);};bP.TreeNode=function(cE,cF){var cG,cH;function cI(cJ){return cJ[1];}cG=b9.Create(cF);return new bP.New$1({$:6,$0:cE},A.Map2Unit((cH=O.map(function(cJ){return bB.Updates(cI(cJ));},cE.Attrs),bd.TreeReduce(A.Const(),A.Map2Unit,cH)),cG.v),O.get(cE.Els,0),cG);};bP.New$1=cz.Ctor(function(cE,cF,cG,cH){W.New.call(this,cE,cF);this.docNode$1=cE;this.updates$1=cF;this.elt=cG;this.rvUpdates=cH;},bP);bQ.CreateTextNode=function(){return{Text:bC.CreateText(""),Dirty:false,Value:""};};bQ.UpdateTextNode=function(cE,cF){cE.Value=cF;cE.Dirty=true;};bQ.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bQ.UpdateEmbedNode=function(cE,cF){cE.Current=cF;cE.Dirty=true;};bQ.CreateElemNode=function(cE,cF,cG){var cH;bQ.LinkElement(cE,cG);cH=bB.Insert(cE,cF);return bD.New(cH,cG,null,cE,bk.Int(),cz.GetOptional(cH.OnAfterRender));};bQ.LinkPrevElement=function(cE,cF){bQ.InsertDoc(cE.parentNode,cF,cE);};bQ.CreateDelimitedRunState=function(cE,cF,cG){return cc.New(cd.get_Empty(),bQ.CreateDelimitedElemNode(cE,cF,bB.EmptyAttr(),cG));};bQ.PerformAnimatedUpdate=function(cE,cF,cG){var cH;return b5.get_UseAnimations()?(cH=null,ca.Delay(function(){var cI,cJ,cK;cI=cd.FindAll(cG);cJ=bQ.ComputeChangeAnim(cF,cI);cK=bQ.ComputeEnterAnim(cF,cI);return ca.Bind(b5.Play(b5.Append(cJ,bQ.ComputeExitAnim(cF,cI))),function(){return ca.Bind(bQ.SyncElemNodesNextFrame(cE,cF),function(){return ca.Bind(b5.Play(cK),function(){cF.PreviousNodes=cI;return ca.Return(null);});});});})):bQ.SyncElemNodesNextFrame(cE,cF);};bQ.PerformSyncUpdate=function(cE,cF,cG){var cH;cH=cd.FindAll(cG);bQ.SyncElemNode(cE,cF.Top);cF.PreviousNodes=cH;};bQ.LinkElement=function(cE,cF){bQ.InsertDoc(cE,cF,null);};bQ.InsertDoc=function(cE,cF,cG){var cH;return cF!=null&&cF.$==1?bQ.InsertNode(cE,cF.$0.El,cG):cF!=null&&cF.$==2?(cH=cF.$0,(cH.Dirty=false,bQ.InsertDoc(cE,cH.Current,cG))):cF==null?cG:cF!=null&&cF.$==4?bQ.InsertNode(cE,cF.$0.Text,cG):cF!=null&&cF.$==5?bQ.InsertNode(cE,cF.$0,cG):cF!=null&&cF.$==6?O.foldBack(function(cI,cJ){return cI==null||cI.constructor===bc?bQ.InsertDoc(cE,cI,cJ):bQ.InsertNode(cE,cI,cJ);},cF.$0.Els,cG):bQ.InsertDoc(cE,cF.$0,bQ.InsertDoc(cE,cF.$1,cG));};bQ.CreateDelimitedElemNode=function(cE,cF,cG,cH){var cI,cJ;cI=cE.parentNode;bQ.LinkPrevElement(cF,cH);cJ=bB.Insert(cI,cG);return bD.New(cJ,cH,{$:1,$0:[cE,cF]},cI,bk.Int(),cz.GetOptional(cJ.OnAfterRender));};bQ.SyncElemNodesNextFrame=function(cE,cF){function cG(cH){a.requestAnimationFrame(function(){bQ.SyncElemNode(cE,cF.Top);cH();});}return b6.BatchUpdatesEnabled()?ca.FromContinuations(function(cH,cI,cJ){return cG.apply(null,[cH,cI,cJ]);}):(bQ.SyncElemNode(cE,cF.Top),ca.Return(null));};bQ.ComputeExitAnim=function(cE,cF){return b5.Concat(O.map(function(cG){return bB.GetExitAnim(cG.Attr);},cd.ToArray(cd.Except(cF,cd.Filter(function(cG){return bB.HasExitAnim(cG.Attr);},cE.PreviousNodes)))));};bQ.ComputeEnterAnim=function(cE,cF){return b5.Concat(O.map(function(cG){return bB.GetEnterAnim(cG.Attr);},cd.ToArray(cd.Except(cE.PreviousNodes,cd.Filter(function(cG){return bB.HasEnterAnim(cG.Attr);},cF)))));};bQ.ComputeChangeAnim=function(cE,cF){var cG;function cH(cI){return bB.HasChangeAnim(cI.Attr);}cG=function(cI){return cd.Filter(cH,cI);};return b5.Concat(O.map(function(cI){return bB.GetChangeAnim(cI.Attr);},cd.ToArray(cd.Intersect(cG(cE.PreviousNodes),cG(cF)))));};bQ.SyncElemNode=function(cE,cF){!cE?bQ.SyncElement(cF):void 0;bQ.Sync(cF.Children);bQ.AfterRender(cF);};bQ.CreateRunState=function(cE,cF){return cc.New(cd.get_Empty(),bQ.CreateElemNode(cE,bB.EmptyAttr(),cF));};bQ.InsertNode=function(cE,cF,cG){bC.InsertAt(cE,cG,cF);return cF;};bQ.SyncElement=function(cE){function cF(cG){function cH(cI){var cJ,cK;return cI!=null&&cI.$==0?cH(cI.$0)||cH(cI.$1):cI!=null&&cI.$==2?(cJ=cI.$0,cJ.Dirty||cH(cJ.Current)):cI!=null&&cI.$==6&&(cK=cI.$0,cK.Dirty||O.exists(cF,cK.Holes));}return cH(cG.Children);}bB.Sync(cE.El,cE.Attr);cF(cE)?bQ.DoSyncElement(cE):void 0;};bQ.Sync=function(cE){var cF,cG;if(cE!=null&&cE.$==1)bQ.SyncElemNode(false,cE.$0);else if(cE!=null&&cE.$==2)bQ.Sync(cE.$0.Current);else if(cE==null);else if(cE!=null&&cE.$==5);else if(cE!=null&&cE.$==4){cF=cE.$0;cF.Dirty?(cF.Text.nodeValue=cF.Value,cF.Dirty=false):void 0;}else if(cE!=null&&cE.$==6){cG=cE.$0;O.iter(function(cH){bQ.SyncElemNode(false,cH);},cG.Holes);O.iter(function(cH){bB.Sync(cH[0],cH[1]);},cG.Attrs);bQ.AfterRender(cG);}else{bQ.Sync(cE.$0);bQ.Sync(cE.$1);}};bQ.AfterRender=function(cE){var cF;cF=cz.GetOptional(cE.Render);cF!=null&&cF.$==1?(cF.$0(cE.El),cz.SetOptional(cE,"Render",null)):void 0;};bQ.InsertBeforeDelim=function(cE,cF){var cG,cH;cG=cE.parentNode;cH=self.document.createTextNode("");cG.insertBefore(cH,cE);bQ.LinkPrevElement(cE,cF);return cH;};bQ.DoSyncElement=function(cE){var cF,cG,cH;function cI(cJ,cK){var cL,cM;return cJ!=null&&cJ.$==1?cJ.$0.El:cJ!=null&&cJ.$==2?(cL=cJ.$0,cL.Dirty?(cL.Dirty=false,bQ.InsertDoc(cF,cL.Current,cK)):cI(cL.Current,cK)):cJ==null?cK:cJ!=null&&cJ.$==4?cJ.$0.Text:cJ!=null&&cJ.$==5?cJ.$0:cJ!=null&&cJ.$==6?(cM=cJ.$0,(cM.Dirty?cM.Dirty=false:void 0,O.foldBack(function(cN,cO){return cN==null||cN.constructor===bc?cI(cN,cO):cN;},cM.Els,cK))):cI(cJ.$0,cI(cJ.$1,cK));}cF=cE.El;cu.Iter((cG=cE.El,function(cJ){bC.RemoveNode(cG,cJ);}),cu.Except(cu.DocChildren(cE),cu.Children(cE.El,cz.GetOptional(cE.Delimiters))));cI(cE.Children,(cH=cz.GetOptional(cE.Delimiters),cH!=null&&cH.$==1?cH.$0[1]:null));};bS.New=function(cE,cF,cG,cH){var cI;cI={DynElem:cE,DynFlags:cF,DynNodes:cG};cz.SetOptional(cI,"OnAfterRender",cH);return cI;};bT.alreadyAdded=function(){return x.FailWith("An item with the same key has already been added.");};bT.notPresent=function(){return x.FailWith("The given key was not present in the dictionary.");};bU.extractNodes=function(cE){var cF,cG;function cH(cI,cJ,cK,cL){var cM,cN,cO,cP,cQ,cR;cM=bU.extractNodes(cK);cN=bU.extractNodes(cL);return(cM.$==0?(cP=cM.$0,!_0.Equals(cP,null)&&cP.length===0)?(cO=cN,true):cN.$==0?(cQ=cN.$0,!_0.Equals(cQ,null)&&cQ.length===0)?(cO=cM,true):(cO=[cM,cN],false):(cO=[cM,cN],false):cN.$==0?(cR=cN.$0,!_0.Equals(cR,null)&&cR.length===0)?(cO=cM,true):(cO=[cM,cN],false):(cO=[cM,cN],false))?cO:{$:1,$0:{$:0,$0:cI,$1:cJ,$2:cO[0],$3:cO[1]}};}cF=bU.horizontalSplit(cE);return cF!=null&&cF.$==1?cH(false,cF.$0[2],cF.$0[0],cF.$0[1]):(cG=bU.verticalSplit(cE),cG!=null&&cG.$==1?cH(true,cG.$0[2],cG.$0[0],cG.$0[1]):{$:0,$0:bU.cleanSpaces(cE)});};bU.createLayoutDefinitions=function(cE,cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;return cF.$==1?(cG=cF.$0.$0,(cH=cF.$0.$1,(cI=bU.createLayoutDefinitions(cE+"_1",cF.$0.$2),(cJ=cI[0],(cK=cI[1],(cL=bU.createLayoutDefinitions(cE+"_2",cF.$0.$3),(cM=cL[0],(cN=cL[1],[cE,O.ofSeq(K.delay(function(){return K.append([_.concat(" ",L.ofArray([cE,cG?"vertical":"horizontal",a.String(cH),cJ,cM]))],K.delay(function(){return K.append(cK,K.delay(function(){return cN;}));}));}))])))))))):(cO=cF.$0,!_0.Equals(cO,null)&&cO.length===0)?["___",[]]:(cP=cF.$0,!_0.Equals(cP,null)&&cP.length===1)?[O.get(cF.$0,0),[]]:[cE,[cE+" div \"\" "+_.concat(" ",cF.$0)]];};bU.horizontalSplit=function(cE){var cF,cG,cH,cI,cJ;function cK(cL,cM){var cN,cO,cP,cQ;cN=v.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",cM);return cN!=null&&cN.$==1?{$:1,$0:[[cL,(cO=(cP=K.tryItem(1,cN.$0),cP==null?null:bU.extractMeasuresO(_.Replace(_.Replace(cP.$0,"^",""),"v","-"))),(cQ=new b_({$:1,$0:5,$1:50,$2:95}),cO==null?cQ:cO.$0))],cM.indexOf("-")]}:null;}cF=(cG=K.tryHead(K.sortBy(function(cL){return cL[1];},K.choose(function(cL){return cK(cL[0],cL[1]);},K.indexed(cE)))),cG==null?null:{$:1,$0:cG.$0[0]});return cF==null?null:{$:1,$0:(cH=cF.$0,(cI=cH[0],(cJ=cH[1],[bm.array(cE,null,{$:1,$0:cI-1}),bm.array(cE,{$:1,$0:cI+1},null),cJ])))};};bU.verticalSplit=function(cE){var cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;function cP(cS,cT){var cU,cV,cW;return(cV=v.REGEX$1("^ *\\|+ *$","",cT),cV!=null&&cV.$==1&&(cW=cV.$0,!_0.Equals(cW,null)&&cW.length===1))?{$:1,$0:[cS,cT.indexOf("|")]}:null;}function cQ(cS){return _0.Equals(null,cS);}function cR(cS){return _0.Equals(null,cS);}cF=bU.transpose(cE);cG=(cH=(cI=K.tryHead(K.sortBy(function(cS){return cS[1];},K.choose(function(cS){return cP(cS[0],cS[1]);},K.indexed(cF)))),cI==null?null:{$:1,$0:cI.$0[0]}),cH==null?null:{$:1,$0:(cJ=cH.$0,[bU.transpose(bm.array(cF,null,{$:1,$0:cJ-1})),bU.transpose(bm.array(cF,{$:1,$0:cJ+1},null))])});return cG==null?null:{$:1,$0:(cK=cG.$0,(cL=cK[0],(cM=cK[1],[O.filter(function(cS){return cQ(bU.extractMeasuresO(cS));},cL),O.filter(function(cS){return cR(bU.extractMeasuresO(cS));},cM),(cN=K.tryHead(K.delay(function(){return K.append(K.choose(bU.extractMeasuresO,cL),K.delay(function(){return K.map(function(cS){return cS.$==0?cS.$1?new b_({$:0,$0:cS.$0,$1:false}):cS:cS;},K.choose(bU.extractMeasuresO,cM));}));})),(cO=new b_({$:1,$0:5,$1:50,$2:95}),cN==null?cO:cN.$0))])))};};bU.cleanSpaces=function(cE){return O.filter(function(cF){var cG;return!(cG=(F.Int())(cF),cG!=null&&cG.$==1);},_.SplitStrings(_.concat(" ",cE),[" "],1));};bU.extractMeasuresO=function(cE){var cF,cG,cH,cI,cJ,cK,cL;cF=_.SplitChars(cE,[" "],1);return!_0.Equals(cF,null)&&cF.length===1&&(cH=(F.Int())(O.get(cF,0)),cH!=null&&cH.$==1&&(cG=cH.$0,true))?{$:1,$0:new b_({$:0,$0:cA.abs(cG),$1:cG>=0})}:!_0.Equals(cF,null)&&cF.length===3&&(cJ=(F.Int())(O.get(cF,0)),cJ!=null&&cJ.$==1&&(cK=(F.Int())(O.get(cF,1)),cK!=null&&cK.$==1&&(cL=(F.Int())(O.get(cF,2)),cL!=null&&cL.$==1&&(cI=[cL.$0,cJ.$0,cK.$0],true))))?{$:1,$0:new b_({$:1,$0:cI[1],$1:cI[2],$2:cI[0]})}:null;};bU.transpose=function(cE){var cF;cF=K.max(K.map(function(cG){return cG.length;},cE));return O.ofSeq(K.delay(function(){return K.map(function(cG){return O.ofSeq(K.delay(function(){return K.map(function(cH){return cH.length>cG?cH[cG]:" ";},cE);})).join("");},x.range(0,cF-1));}));};bV.$cctor=function(){bV.$cctor=a.ignore;bV.counter=0;};bX=bW.Hoverable=cz.Class({Content:function(cE){return cE.on("mouseenter",function(){return bC.AddClass(cE.elt,"hovering");}).on("mouseleave",function(){return bC.RemoveClass(cE.elt,"hovering");});}},null,bX);bX.New$1=function(){return bX.New(D.Create$1(false));};bX.New=function(cE){return new bX({hover:cE});};bY=g.CancellationTokenSource=cz.Class({Cancel$1:function(){var cE;if(!this.c){this.c=true;cE=O.choose(function(cF){try{cF();return null;}catch(cG){return{$:1,$0:cG};}},this.r);if(O.length(cE)>0)throw new b$.New$3(cE);else void 0;}}},h,bY);bY.New=cz.Ctor(function(){h.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bY);bZ=z.CheckedInput=cz.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bZ);b2.addResizeObserver=function(cE,cF){var cG,cH,cI,cJ;try{cG=!(!a.ResizeObserver);}catch(cK){cG=false;}if(cG){cH=new a.ResizeObserver(cE);b2.set_observers(new M({$:1,$0:cH,$1:b2.observers()}));cH.observe(cF);}else{cI=b2.dimsChanged(cF);ca.Start((cJ=null,ca.Delay(function(){return ca.While(function(){return cF.isConnected;},ca.Delay(function(){return ca.Bind(ca.Sleep(110),function(){return cI()?(cE(),ca.Zero()):ca.Zero();});}));})),null);}};b2.set_observers=function(cE){_3.$cctor();_3.observers=cE;};b2.observers=function(){_3.$cctor();return _3.observers;};b2.dimsChanged=function(cE){var cF;cF=[cE.getBoundingClientRect()];return function(){var cG;cG=cE.getBoundingClientRect();return _0.Equals(b2.domRect2Tuple(cF[0]),b2.domRect2Tuple(cG))?false:(cF[0]=cG,true);};};b2.domRect2Tuple=function(cE){return[cE.top,cE.left,cE.width,cE.height];};v.REGEX$1=function(cE,cF,cG){var cH;return cG===null?null:(cH=(new a.String(cG)).match(new a.RegExp(cE,cF)),_0.Equals(cH,null)?null:!_0.Equals(cH,null)&&cH.length===0?null:{$:1,$0:cH});};b3.convertTextNode=function(cE){var cF,cG,cH,cI,cJ,cK;cF=null;cG=0;cI=cE.textContent;cJ=new a.RegExp(_5.TextHoleRE(),"g");while(cF=cJ.exec(cI),cF!==null){cE.parentNode.insertBefore(self.document.createTextNode(bm.string(cI,{$:1,$0:cG},{$:1,$0:cJ.lastIndex-O.get(cF,0).length-1})),cE);cG=cJ.lastIndex;cK=self.document.createElement("span");cK.setAttribute("ws-replace",O.get(cF,1).toLowerCase());cE.parentNode.insertBefore(cK,cE);}cJ.lastIndex=0;cE.textContent=bm.string(cI,{$:1,$0:cG},null);};b3.failNotLoaded=function(cE){cx.warn("Instantiating non-loaded template",cE);};b3.fillTextHole=function(cE,cF,cG){var cH;cH=cE.querySelector("[ws-replace]");return _0.Equals(cH,null)?(cx.warn("Filling non-existent text hole",cG),null):(cH.parentNode.replaceChild(new a.Text(cF),cH),{$:1,$0:cH.getAttribute("ws-replace")});};b3.removeHolesExcept=function(cE,cF){function cG(cH){bC.IterSelector(cE,"["+cH+"]",function(cI){if(!cF.Contains(cI.getAttribute(cH)))cI.removeAttribute(cH);});}cG("ws-attr");cG("ws-onafterrender");cG("ws-var");bC.IterSelector(cE,"[ws-hole]",function(cH){if(!cF.Contains(cH.getAttribute("ws-hole"))){cH.removeAttribute("ws-hole");while(cH.hasChildNodes())cH.removeChild(cH.lastChild);}});bC.IterSelector(cE,"[ws-replace]",function(cH){if(!cF.Contains(cH.getAttribute("ws-replace")))cH.parentNode.removeChild(cH);});bC.IterSelector(cE,"[ws-on]",function(cH){cH.setAttribute("ws-on",_.concat(" ",O.filter(function(cI){return cF.Contains(O.get(_.SplitChars(cI,[":"],1),1));},_.SplitChars(cH.getAttribute("ws-on"),[" "],1))));});bC.IterSelector(cE,"[ws-attr-holes]",function(cH){var cI,cJ,cK,cL,cM;cI=_.SplitChars(cH.getAttribute("ws-attr-holes"),[" "],1);for(cJ=0,cK=cI.length-1;cJ<=cK;cJ++){cL=O.get(cI,cJ);cH.setAttribute(cL,(cM=new a.RegExp(_5.TextHoleRE(),"g"),cH.getAttribute(cL).replace(cM,function(cN,cO){return cF.Contains(cO)?cN:"";})));}});};b3.fillInstanceAttrs=function(cE,cF){var cG,cH,cI,cJ,cK;b3.convertAttrs(cF);cG=cF.nodeName.toLowerCase();cH=cE.querySelector("[ws-attr="+cG+"]");if(_0.Equals(cH,null))cx.warn("Filling non-existent attr hole",cG);else{cH.removeAttribute("ws-attr");for(cI=0,cJ=cF.attributes.length-1;cI<=cJ;cI++){cK=cF.attributes.item(cI);cK.name==="class"&&cH.hasAttribute("class")?cH.setAttribute("class",cH.getAttribute("class")+" "+cK.nodeValue):cH.setAttribute(cK.name,cK.nodeValue);}}};b3.mapHoles=function(cE,cF){function cG(cH){bC.IterSelector(cE,"["+cH+"]",function(cI){var cJ,cK;cJ=(cK=null,[cF.TryGetValue(cI.getAttribute(cH).toLowerCase(),{get:function(){return cK;},set:function(cL){cK=cL;}}),cK]);cJ[0]?cI.setAttribute(cH,cJ[1]):void 0;});}cG("ws-hole");cG("ws-replace");cG("ws-attr");cG("ws-onafterrender");cG("ws-var");bC.IterSelector(cE,"[ws-on]",function(cH){cH.setAttribute("ws-on",_.concat(" ",O.map(function(cI){var cJ,cK,cL;cJ=_.SplitChars(cI,[":"],1);cK=(cL=null,[cF.TryGetValue(O.get(cJ,1),{get:function(){return cL;},set:function(cM){cL=cM;}}),cL]);return cK[0]?O.get(cJ,0)+":"+cK[1]:cI;},_.SplitChars(cH.getAttribute("ws-on"),[" "],1))));});bC.IterSelector(cE,"[ws-attr-holes]",function(cH){var cI,cJ,cK;cI=_.SplitChars(cH.getAttribute("ws-attr-holes"),[" "],1);for(cJ=0,cK=cI.length-1;cJ<=cK;cJ++)(function(){var cL;function cM(cN,cO){var cP;cP=x.KeyValue(cO);return cN.replace(new a.RegExp("\\${"+cP[0]+"}","ig"),"${"+cP[1]+"}");}cL=O.get(cI,cJ);return cH.setAttribute(cL,(((cz.Curried3(K.fold))(cM))(cH.getAttribute(cL)))(cF));}());});};b3.fill=function(cE,cF,cG){while(true)if(cE.hasChildNodes())cG=cF.insertBefore(cE.lastChild,cG);else return null;};b3.convertAttrs=function(cE){var cG,cH,cI,cJ,cK,cL,cM,cN;function cF(cO){var cP;cP=cE.getAttribute(cO);cP===null?void 0:cE.setAttribute(cO,cP.toLowerCase());}cG=cE.attributes;cH=[];cI=[];cJ=[];for(cK=0,cL=cG.length-1;cK<=cL;cK++){cM=cG.item(cK);_.StartsWith(cM.nodeName,"ws-on")&&cM.nodeName!=="ws-onafterrender"&&cM.nodeName!=="ws-on"?(cH.push(cM.nodeName),cI.push(bm.string(cM.nodeName,{$:1,$0:"ws-on".length},null)+":"+cM.nodeValue.toLowerCase())):!_.StartsWith(cM.nodeName,"ws-")&&(new a.RegExp(_5.TextHoleRE())).test(cM.nodeValue)?(cM.nodeValue=(cN=new a.RegExp(_5.TextHoleRE(),"g"),cM.nodeValue.replace(cN,function(cO,cP){return"${"+cP.toLowerCase()+"}";})),cJ.push(cM.nodeName)):void 0;}!(cI.length==0)?cE.setAttribute("ws-on",_.concat(" ",cI)):void 0;!(cJ.length==0)?cE.setAttribute("ws-attr-holes",_.concat(" ",cJ)):void 0;cF("ws-hole");cF("ws-replace");cF("ws-attr");cF("ws-onafterrender");cF("ws-var");O.iter(function(cO){cE.removeAttribute(cO);},cH);};b4=be.KeyCollection=cz.Class({GetEnumerator$1:function(){return $.Get(K.map(function(cE){return cE.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},h,b4);b4.New=cz.Ctor(function(cE){h.New.call(this);this.d=cE;},b4);b5.get_UseAnimations=function(){return ce.UseAnimations();};b5.Play=function(cE){var cF;cF=null;return ca.Delay(function(){return ca.Bind(b5.Run(a.ignore,ce.Actions(cE)),function(){ce.Finalize(cE);return ca.Return(null);});});};b5.Append=function(cE,cF){return{$:0,$0:cn.Append(cE.$0,cF.$0)};};b5.Run=function(cE,cF){var cG;function cH(cI){function cJ(cK,cL){var cM;cM=cL-cK;cF.Compute(cM);cE();return cM<=cG?void a.requestAnimationFrame(function(cN){cJ(cK,cN);}):cI();}a.requestAnimationFrame(function(cK){cJ(cK,cK);});}cG=cF.Duration;return cG===0?ca.Zero():ca.FromContinuations(function(cI,cJ,cK){return cH.apply(null,[cI,cJ,cK]);});};b5.Concat=function(cE){return{$:0,$0:cn.Concat(K.map(ce.List,cE))};};b5.get_Empty=function(){return{$:0,$0:cn.Empty()};};b6.BatchUpdatesEnabled=function(){cf.$cctor();return cf.BatchUpdatesEnabled;};b7.StartProcessor=function(cE){var cF;function cG(){var cH;cH=null;return ca.Delay(function(){return ca.Bind(cE,function(){var cI;cI=cF[0];return cI===1?(cF[0]=0,ca.Zero()):cI===2?(cF[0]=1,cG()):ca.Zero();});});}cF=[0];return function(){var cH;cH=cF[0];cH===0?(cF[0]=1,ca.Start(cG(),null)):cH===1?cF[0]=2:void 0;};};b8.$cctor=function(){b8.$cctor=a.ignore;b8.Doc=self.document;};b9=z.Updates=cz.Class({},null,b9);b9.Create=function(cE){var cF;cF=null;cF=b9.New(cE,null,function(){var cG;cG=cF.s;return cG===null?(cG=_7.Copy(cF.c()),cF.s=cG,_7.WhenObsoleteRun(cG,function(){cF.s=null;}),cG):cG;});return cF;};b9.New=function(cE,cF,cG){return new b9({c:cE,s:cF,v:cG});};b_=Q.Measures=cz.Class({toString:function(){return this.$==1?((((cz.Curried(function(cE,cF,cG,cH){return cE(a.String(cF)+"-"+a.String(cG)+"-"+a.String(cH));},4))(a.id))(x.toInt(this.$0)))(x.toInt(this.$1)))(x.toInt(this.$2)):a.String(x.toInt(this.$1?this.$0:-this.$0));}},null,b_);b$=g.AggregateException=cz.Class({},bL,b$);b$.New$3=cz.Ctor(function(cE){b$.New$4.call(this,"One or more errors occurred.",cE);},b$);b$.New$4=cz.Ctor(function(cE,cF){this.message=cE;bc.setPrototypeOf(this,b$.prototype);this.innerExceptions=cF;},b$);ca.Start=function(cE,cF){var cG,cH;cG=(cH=(ca.defCTS())[0],cF==null?cH:cF.$0);ca.scheduler().Fork(function(){if(!cG.c)cE(ck.New(function(cI){if(cI.$==1)ca.UncaughtAsyncError(cI.$0);},cG));});};ca.Delay=function(cE){return function(cF){try{(cE(null))(cF);}catch(cG){cF.k({$:1,$0:cG});}};};ca.Bind=function(cE,cF){return ca.checkCancel(function(cG){cE(ck.New(function(cH){var cI;if(cH.$==0){cI=cH.$0;ca.scheduler().Fork(function(){try{(cF(cI))(cG);}catch(cJ){cG.k({$:1,$0:cJ});}});}else ca.scheduler().Fork(function(){cG.k(cH);});},cG.ct));});};ca.Sleep=function(cE){return function(cF){var cG,cH;cG=void 0;cH=void 0;cG=a.setTimeout(function(){cH.Dispose();ca.scheduler().Fork(function(){cF.k({$:0,$0:null});});},cE);cH=ca.Register(cF.ct,function(){a.clearTimeout(cG);ca.scheduler().Fork(function(){ca.cancel(cF);});});};};ca.Zero=function(){cl.$cctor();return cl.Zero;};ca.defCTS=function(){cl.$cctor();return cl.defCTS;};ca.UncaughtAsyncError=function(cE){cx.log("WebSharper: Uncaught asynchronous exception",cE);};ca.checkCancel=function(cE){return function(cF){if(cF.ct.c)ca.cancel(cF);else cE(cF);};};ca.Register=function(cE,cF){var cG;return cE===ca.noneCT()?{Dispose:function(){return null;}}:(cG=cE.r.push(cF)-1,{Dispose:function(){return O.set(cE.r,cG,a.ignore);}});};ca.cancel=function(cE){cE.k({$:2,$0:new cq.New(cE.ct)});};ca.While=function(cE,cF){return cE()?ca.Bind(cF,function(){return ca.While(cE,cF);}):ca.Return();};ca.Return=function(cE){return function(cF){cF.k({$:0,$0:cE});};};ca.scheduler=function(){cl.$cctor();return cl.scheduler;};ca.noneCT=function(){cl.$cctor();return cl.noneCT;};ca.FromContinuations=function(cE){return function(cF){var cG;function cH(cI){if(cG[0])x.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cG[0]=true;ca.scheduler().Fork(cI);}}cG=[false];cE(function(cI){cH(function(){cF.k({$:0,$0:cI});});},function(cI){cH(function(){cF.k({$:1,$0:cI});});},function(cI){cH(function(){cF.k({$:2,$0:cI});});});};};K.enumUsing=function(cE,cF){return{GetEnumerator:function(){var cG;try{cG=$.Get(cF(cE));}catch(cH){cE.Dispose();throw cH;}return new bF.New(null,null,function(cI){return cG.MoveNext()&&(cI.c=cG.Current(),true);},function(){cG.Dispose();cE.Dispose();});}};};K.enumWhile=function(cE,cF){return{GetEnumerator:function(){return new bF.New(null,null,function(cG){var cH;while(true){cH=cG.s;if(_0.Equals(cH,null)){if(cE()){cG.s=$.Get(cF);cG=cG;}else return false;}else if(cH.MoveNext()){cG.c=cH.Current();return true;}else{cH.Dispose();cG.s=null;cG=cG;}}},function(cG){var cH;cH=cG.s;!_0.Equals(cH,null)?cH.Dispose():void 0;});}};};cc.New=function(cE,cF){return{PreviousNodes:cE,Top:cF};};cd.get_Empty=function(){return{$:0,$0:new bI.New$3()};};cd.FindAll=function(cE){var cF;function cG(cI){if(cI!=null&&cI.$==0){cG(cI.$0);cG(cI.$1);}else if(cI!=null&&cI.$==1)cH(cI.$0);else if(cI!=null&&cI.$==2)cG(cI.$0.Current);else if(cI!=null&&cI.$==6)O.iter(cH,cI.$0.Holes);}function cH(cI){cF.push(cI);cG(cI.Children);}cF=[];cG(cE);return{$:0,$0:new bI.New$2(cF)};};cd.Filter=function(cE,cF){return{$:0,$0:cs.Filter(cE,cF.$0)};};cd.Except=function(cE,cF){return{$:0,$0:cs.Except(cE.$0,cF.$0)};};cd.ToArray=function(cE){return cs.ToArray(cE.$0);};cd.Intersect=function(cE,cF){return{$:0,$0:cs.Intersect(cE.$0,cF.$0)};};ce.UseAnimations=function(){cm.$cctor();return cm.UseAnimations;};ce.Actions=function(cE){return ce.ConcatActions(O.choose(function(cF){return cF.$==1?{$:1,$0:cF.$0}:null;},cn.ToArray(cE.$0)));};ce.Finalize=function(cE){O.iter(function(cF){if(cF.$==0)cF.$0();},cn.ToArray(cE.$0));};ce.ConcatActions=function(cE){var cF,cG,cH,cI;cF=bd.ofSeqNonCopying(cE);cG=O.length(cF);return cG===0?ce.Const():cG===1?O.get(cF,0):(cH=K.max(K.map(function(cJ){return cJ.Duration;},cF)),(cI=O.map(function(cJ){return ce.Prolong(cH,cJ);},cF),ce.Def(cH,function(cJ){O.iter(function(cK){cK.Compute(cJ);},cI);})));};ce.List=function(cE){return cE.$0;};ce.Const=function(cE){return ce.Def(0,function(){return cE;});};ce.Def=function(cE,cF){return{Compute:cF,Duration:cE};};ce.Prolong=function(cE,cF){var cG,cH,cI;cG=cF.Compute;cH=cF.Duration;cI=P.Create(function(){return cF.Compute(cF.Duration);});return{Compute:function(cJ){return cJ>=cH?cI.f():cG(cJ);},Duration:cE};};cf.$cctor=function(){cf.$cctor=a.ignore;cf.BatchUpdatesEnabled=true;};cg.$cctor=function(){cg.$cctor=a.ignore;cg.EmptyAttr=null;};ch.Clear=function(cE){cE.splice(0,O.length(cE));};ci=g.FormatException=cz.Class({},bL,ci);ci.New$1=cz.Ctor(function(cE){this.message=cE;bc.setPrototypeOf(this,ci.prototype);},ci);cj.New=function(cE,cF){return{c:cE,r:cF};};ck.New=function(cE,cF){return{k:cE,ct:cF};};cl.$cctor=function(){cl.$cctor=a.ignore;cl.noneCT=cj.New(false,[]);cl.scheduler=new cp.New();cl.defCTS=[new bY.New()];cl.Zero=ca.Return();cl.GetCT=function(cE){cE.k({$:0,$0:cE.ct});};};cm.$cctor=function(){cm.$cctor=a.ignore;cm.CubicInOut=cr.Custom(function(cE){var cF;cF=cE*cE;return 3*cF-2*(cF*cE);});cm.UseAnimations=true;};cn.Append=function(cE,cF){return cE.$==0?cF:cF.$==0?cE:{$:2,$0:cE,$1:cF};};cn.ToArray=function(cE){var cF;function cG(cH){if(cH.$==1)cF.push(cH.$0);else if(cH.$==2){cG(cH.$0);cG(cH.$1);}else if(cH.$==3)O.iter(function(cI){cF.push(cI);},cH.$0);}cF=[];cG(cE);return cF.slice(0);};cn.Concat=function(cE){var cF;cF=bd.ofSeqNonCopying(cE);return bd.TreeReduce(cn.Empty(),cn.Append,cF);};cn.Empty=function(){cw.$cctor();return cw.Empty;};co.concat=function(cE){var cF,cG;cF=[];for(var cH in cE)cF.push.apply(cF,cE[cH]);return cF;};cp=ca.Scheduler=cz.Class({Fork:function(cE){var cF;cF=this;this.robin.push(cE);this.idle?(this.idle=false,a.setTimeout(function(){cF.tick();},0)):void 0;},tick:function(){var cE,cF,cG;cF=this;cG=cD.now();cE=true;while(cE)if(this.robin.length===0){this.idle=true;cE=false;}else{(this.robin.shift())();cD.now()-cG>40?(a.setTimeout(function(){cF.tick();},0),cE=false):void 0;}}},h,cp);cp.New=cz.Ctor(function(){h.New.call(this);this.idle=true;this.robin=[];},cp);cq=g.OperationCanceledException=cz.Class({},bL,cq);cq.New=cz.Ctor(function(cE){cq.New$1.call(this,"The operation was canceled.",null,cE);},cq);cq.New$1=cz.Ctor(function(cE,cF,cG){this.message=cE;this.inner=cF;bc.setPrototypeOf(this,cq.prototype);this.ct=cG;},cq);cr=z.Easing=cz.Class({},h,cr);cr.Custom=function(cE){return new cr.New(cE);};cr.New=cz.Ctor(function(cE){h.New.call(this);this.transformTime=cE;},cr);cs.Filter=function(cE,cF){return new bI.New$2(O.filter(cE,cs.ToArray(cF)));};cs.Except=function(cE,cF){var cG;cG=new bI.New$2(cs.ToArray(cF));cG.ExceptWith(cs.ToArray(cE));return cG;};cs.ToArray=function(cE){var cF;cF=O.create(cE.get_Count(),void 0);cE.CopyTo(cF);return cF;};cs.Intersect=function(cE,cF){var cG;cG=new bI.New$2(cs.ToArray(cE));cG.IntersectWith(cs.ToArray(cF));return cG;};ct.isBlank=function(cE){return _.forall(cv.IsWhiteSpace,cE);};cu.Children=function(cE,cF){var cG,cH,cI;if(cF!=null&&cF.$==1){cI=[];cG=cF.$0[0].nextSibling;while(cG!==cF.$0[1]){cI.push(cG);cG=cG.nextSibling;}return{$:0,$0:cI};}else return{$:0,$0:O.init(cE.childNodes.length,(cH=cE.childNodes,function(cJ){return cH[cJ];}))};};cu.Except=function(cE,cF){var cG;cG=cE.$0;return{$:0,$0:O.filter(function(cH){return O.forall(function(cI){return!(cH===cI);},cG);},cF.$0)};};cu.Iter=function(cE,cF){O.iter(cE,cF.$0);};cu.DocChildren=function(cE){var cF;function cG(cH){if(cH!=null&&cH.$==2)cG(cH.$0.Current);else if(cH!=null&&cH.$==1)cF.push(cH.$0.El);else if(cH==null);else if(cH!=null&&cH.$==5)cF.push(cH.$0);else if(cH!=null&&cH.$==4)cF.push(cH.$0.Text);else if(cH!=null&&cH.$==6)O.iter(function(cI){if(cI==null||cI.constructor===bc)cG(cI);else cF.push(cI);},cH.$0.Els);else{cG(cH.$0);cG(cH.$1);}}cF=[];cG(cE.Children);return{$:0,$0:bd.ofSeqNonCopying(cF)};};cv.IsWhiteSpace=function(cE){return cE.match(new a.RegExp("\\s"))!==null;};cw.$cctor=function(){cw.$cctor=a.ignore;cw.Empty={$:0};};cz.OnLoad(function(){d.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

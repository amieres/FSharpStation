function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;a=self;b=a.FsRoot=a.FsRoot||{};c=b.LibraryJS=b.LibraryJS||{};d=c.Monaco=c.Monaco||{};e=d.Position=d.Position||{};f=d.Range=d.Range||{};g=d.Location=d.Location||{};h=d.MarkDownString=d.MarkDownString||{};i=d.MarkerData=d.MarkerData||{};j=d.CompletionItem=d.CompletionItem||{};k=d.Hover=d.Hover||{};l=a.WebSharper=a.WebSharper||{};m=l.Obj=l.Obj||{};n=d.Editor=d.Editor||{};o=d.MonacoConfig=d.MonacoConfig||{};p=c.MonacoGenAdapter=c.MonacoGenAdapter||{};q=p.MonacoRT=p.MonacoRT||{};r=p.CompletionItemProvider=p.CompletionItemProvider||{};s=p.HoverProvider=p.HoverProvider||{};t=p.DefinitionProvider=p.DefinitionProvider||{};u=b.TestingJS=b.TestingJS||{};v=u.Monaco=u.Monaco||{};w=l.UI=l.UI||{};x=w.Var=w.Var||{};y=w.View=w.View||{};z=l.Operators=l.Operators||{};A=l.Unchecked=l.Unchecked||{};B=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};C=a.EventTarget;D=c.ResizeObserver=c.ResizeObserver||{};E=c.GenEditor=c.GenEditor||{};F=w.Var$1=w.Var$1||{};G=E.Position=E.Position||{};H=b.Library=b.Library||{};I=H.Monads=H.Monads||{};J=I.AsyncResultMAutoOpen=I.AsyncResultMAutoOpen||{};K=I.AsyncResultM=I.AsyncResultM||{};L=K.AsyncResultMBuilder=K.AsyncResultMBuilder||{};M=l.Arrays=l.Arrays||{};N=E.Completion=E.Completion||{};O=c.Promise=c.Promise||{};P=E.GenEditor=E.GenEditor||{};Q=l.Seq=l.Seq||{};R=E.Annotation=E.Annotation||{};S=E.GenEditorHook=E.GenEditorHook||{};T=E.AnnotationType=E.AnnotationType||{};U=l.Utils=l.Utils||{};V=w.HtmlModule=w.HtmlModule||{};W=V.attr=V.attr||{};X=a.Node;Y=l.JavaScript=l.JavaScript||{};Z=Y.JS=Y.JS||{};_0=w.Snap=w.Snap||{};_1=I.Result=I.Result||{};_2=_1.Builder=_1.Builder||{};_3=I.ResultM=I.ResultM||{};_4=_3.Builder=_3.Builder||{};_5=H.String=H.String||{};_6=l.Strings=l.Strings||{};_7=l.Slice=l.Slice||{};_8=l.List=l.List||{};_9=_8.T=_8.T||{};_=Y.Pervasives=Y.Pervasives||{};$=l.Concurrency=l.Concurrency||{};ba=w.AttrProxy=w.AttrProxy||{};bb=w.Doc=w.Doc||{};bc=w.ConcreteVar=w.ConcreteVar||{};bd=w.Abbrev=w.Abbrev||{};be=bd.Fresh=bd.Fresh||{};bf=a.Object;bg=H.ResultMessage=H.ResultMessage||{};bh=l.Enumerator=l.Enumerator||{};bi=bh.T=bh.T||{};bj=w.Client=w.Client||{};bk=bj.Templates=bj.Templates||{};bl=a.WindowOrWorkerGlobalScope;bm=$.AsyncBody=$.AsyncBody||{};bn=bd.Async=bd.Async||{};bo=w.Attrs=w.Attrs||{};bp=w.DomUtility=w.DomUtility||{};bq=w.AttrModule=w.AttrModule||{};br=w.Docs=w.Docs||{};bs=l.Collections=l.Collections||{};bt=bs.Dictionary=bs.Dictionary||{};bu=$.CT=$.CT||{};bv=$.Scheduler=$.Scheduler||{};bw=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bx=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};by=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bz=bs.HashSet=bs.HashSet||{};bA=w.An=w.An||{};bB=bj.Settings=bj.Settings||{};bC=bd.Mailbox=bd.Mailbox||{};bD=a.Error;bE=l.OperationCanceledException=l.OperationCanceledException||{};bF=w.Elt=w.Elt||{};bG=w.Array=w.Array||{};bH=l.CancellationTokenSource=l.CancellationTokenSource||{};bI=w.DocElemNode=w.DocElemNode||{};bJ=a.CharacterData;bK=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bL=bs.DictionaryUtil=bs.DictionaryUtil||{};bM=bk.Prepare=bk.Prepare||{};bN=bs.KeyCollection=bs.KeyCollection||{};bO=bj.Docs=bj.Docs||{};bP=bO.RunState=bO.RunState||{};bQ=bO.NodeSet=bO.NodeSet||{};bR=w.Anims=w.Anims||{};bS=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bT=w.Updates=w.Updates||{};bU=bj.Attrs=bj.Attrs||{};bV=bU.Dyn=bU.Dyn||{};bW=l.Queue=l.Queue||{};bX=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bY=w.AppendList=w.AppendList||{};bZ=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};b0=w.Easing=w.Easing||{};b1=bd.HashSet=bd.HashSet||{};b2=bs.HashSetUtil=bs.HashSetUtil||{};b3=w.DynamicAttrNode=w.DynamicAttrNode||{};b4=bO.DomNodes=bO.DomNodes||{};b5=l.Lazy=l.Lazy||{};b6=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b7=l.LazyExtensionsProxy=l.LazyExtensionsProxy||{};b8=b7.LazyRecord=b7.LazyRecord||{};b9=a.IntelliFactory;b_=b9&&b9.Runtime;b$=a.Math;ca=a.console;cb=a.jQuery;cc=a.Date;d.newVar=function(cd){return o.New(cd,a.ignore,null,null,y.Const(false),null,null);};d.loader=function(){B.$cctor();return B.loader;};d.render=function(cd){var ce;return bb.Async((ce=null,$.Delay(function(){return $.Bind(d.loader(),function(){return $.Return(bb.Element("div",[ba.OnAfterRenderImpl(function(cf){var cg,ch,ci;cg=(ch=cf.parentElement,self.monaco.editor.create(ch,cd.options,cd.overrides));D.addResizeObserver(function(){cg.layout();},cf.parentElement);cf.parentNode.removeChild(cf);cd.editorO={$:1,$0:cg};ci=cd.onRender;ci==null?void 0:ci.$0(cg);E.bindVarEditor(function(cj){cg.onDidChangeModelContent(cj);},function(){return cg.getValue();},function(cj){cg.setValue(cj);},cd.onChange,cd["var"]);})],[]));});})));};d.setVar=function(cd,ce){return o.New(cd,ce.onChange,ce.onRender,ce.editorO,ce.disabled,ce.options,ce.overrides);};d.onChange=function(cd,ce){return o.New(ce["var"],cd,ce.onRender,ce.editorO,ce.disabled,ce.options,ce.overrides);};d.onRender=function(cd,ce){return o.New(ce["var"],ce.onChange,{$:1,$0:cd},ce.editorO,ce.disabled,ce.options,ce.overrides);};d.disabled=function(cd,ce){return o.New(ce["var"],ce.onChange,ce.onRender,ce.editorO,cd,ce.options,ce.overrides);};d["var"]=function(cd){return cd["var"];};d.newText=function(cd){return d.newVar(F.Create$1(cd));};d.newVarO=function(cd){var ce;ce=d.newVar(F.Lens(cd,function(cf){return cf==null?"":cf.$0;},function(cf,cg){return cf==null?null:{$:1,$0:cg};}));return d.disabled(y.Map(function(cf){return cf==null;},cd.get_View()),ce);};e.New=function(cd,ce){return{column:cd,lineNumber:ce};};f.New=function(cd,ce,cf,cg){return{startColumn:cd,endColumn:ce,startLineNumber:cf,endLineNumber:cg};};g.New=function(cd,ce){return{range:cd,uri:ce};};h.New=function(cd,ce){return{value:cd,isTrusted:ce};};i.New=function(cd,ce,cf,cg,ch,ci){return{startColumn:cd,endColumn:ce,startLineNumber:cf,endLineNumber:cg,severity:ch,message:ci};};j.New=function(cd,ce,cf){return{kind:cd,label:ce,detail:cf};};k.New=function(cd,ce){return{contents:cd,range:ce};};m=l.Obj=b_.Class({Equals:function(cd){return this===cd;},GetHashCode:function(){return -1;}},null,m);m.New=b_.Ctor(function(){},m);n=d.Editor=b_.Class({},m,n);n.New=b_.Ctor(function(){m.New.call(this);},n);o.New=function(cd,ce,cf,cg,ch,ci,cj){return{"var":cd,onChange:ce,onRender:cf,editorO:cg,disabled:ch,options:ci,overrides:cj};};p.iterEditor=function(cd,ce){var cf;cf=cd.editorO;cf!=null&&cf.$==1?ce(cf.$0):void 0;};p.mapEditor=function(cd,ce){var cf;cf=cd.editorO;return cf!=null&&cf.$==1?{$:1,$0:ce(cf.$0)}:null;};p.bindEditor=function(cd,ce){var cf;cf=cd.editorO;return cf!=null&&cf.$==1?ce(cf.$0):null;};p.posGen2Ed=function(cd){return e.New(cd.col,cd.line);};p.posEd2Gen=function(cd){return G.New(cd.lineNumber,cd.column);};p.indexFromPos=function(cd,ce){var cf;cf=p.mapEditor(cd,function(cg){return cg.getModel().getOffsetAt(p.posGen2Ed(ce));});return cf==null?-1:cf.$0;};p.posFromIndex=function(cd,ce){var cf;cf=p.mapEditor(cd,function(cg){return p.posEd2Gen(cg.getModel().getPositionAt(ce));});return cf==null?G.New(1,1):cf.$0;};p.convertGlyphChar=function(cd){return cd==="C"?6:cd==="E"?12:cd==="S"?11:cd==="I"?7:cd==="N"?8:cd==="M"?1:cd==="P"?9:cd==="F"?4:cd==="T"?6:cd==="K"?13:0;};p.generateDoc=function(cd,ce,cf){var cg;return bb.Async((cg=null,$.Delay(function(){return $.Bind(d.loader(),function(){return $.Return(bb.Element("div",[ba.OnAfterRenderImpl(function(ch){var ci,cj,ck,cl,cm,cn,co,cp;ci=(cj=ch.parentElement,self.monaco.editor.create(cj,cd.options,cd.overrides));D.addResizeObserver(function(){ci.layout();},ch.parentElement);ch.parentNode.removeChild(ch);cd.editorO={$:1,$0:ci};cf(ci);ci.onDidChangeModelContent(cd.onChange);ck=ce.toolTip;ck==null?void 0:(cl=new s.New(ck.$0(ce)),self.monaco.languages.registerHoverProvider("fsharp",cl));cm=ce.declaration;cm==null?void 0:(cn=new t.New(cm.$0(ce)),self.monaco.languages.registerDefinitionProvider("fsharp",cn));co=ce.autoCompletion;co==null?void 0:(cp=new r.New(co.$0(ce)),self.monaco.languages.registerCompletionItemProvider("fsharp",cp));})],[]));});})));};p.getUri=function(cd){var ce;ce=p.mapEditor(cd,function(cf){return a.String(cf.getModel().uri);});return ce==null?"":ce.$0;};p.setUri=function(cd,ce){p.iterEditor(cd,function(cf){cf.getModel().uri=self.monaco.Uri.parse(ce);});};p.getValue=function(cd){var ce;ce=p.mapEditor(cd,function(cf){return cf.getValue();});return ce==null?"":ce.$0;};p.setValue=function(cd,ce){p.iterEditor(cd,function(cf){cf.setValue(ce);});};p.getWordAt=function(cd,ce){return p.bindEditor(cd,function(cf){var cg;cg=cf.getModel().getWordAtPosition(e.New(ce.col,ce.line));return!cg?null:{$:1,$0:[cg.word,G.New(ce.line,cg.startColumn)]};});};p.showAnnotations=function(cd,ce){p.iterEditor(cd,function(cf){var cg,ch;cg=M.ofSeq(Q.map(function(ci){var cj;return i.New(ci.startP.col,ci.endP.col,ci.startP.line,ci.endP.line,(cj=ci.severity,cj.$==0?8:cj.$==1?4:cj.$==3?1:2),ci.message);},ce));ch=cf.getModel();self.monaco.editor.setModelMarkers(ch,"annotations",cg);});};p.newHook=function(cd){function ce(cf,cg){return p.generateDoc(cd,cf,cg);}return S.New(function(cf){return function(cg){return ce(cf,cg);};},function(){return p.getValue(cd);},function(cf){p.setValue(cd,cf);},a.ignore,function(cf){p.showAnnotations(cd,cf);},function(cf){return p.posFromIndex(cd,cf);},function(cf){return p.indexFromPos(cd,cf);},function(cf){return p.getWordAt(cd,cf);},function(){return p.getUri(cd);},function(cf){p.setUri(cd,cf);},function(cf){cd.onChange=cf;});};p.newRT=function(cd,ce){return q.New(null,a.ignore,cd,ce);};p.newVar=function(cd,ce,cf){return E.newVar(p.newHook(p.newRT(cd,ce)),cf);};q.New=function(cd,ce,cf,cg){return{editorO:cd,onChange:ce,options:cf,overrides:cg};};r=p.CompletionItemProvider=b_.Class({provideCompletionItems:function(cd,ce,cf,cg){var ch,ci;ch=this;return O.ofAsyncResultM((ci=J.asyncResultM(),ci.Run(ci.Delay(function(){return J["AsyncResultMBuilder.Bind"](ci,ch.autoComplete(G.New(ce.lineNumber,ce.column)),function(cj){return ci.Return(M.map(function(ck){return j.New(p.convertGlyphChar(ck.kind),ck.label,ck.detail);},cj));});}))));},resolveCompletionItem:function(cd,ce){return j.New(cd.kind,cd.label,"more details");}},m,r);r.New=b_.Ctor(function(cd){m.New.call(this);this.autoComplete=cd;},r);s=p.HoverProvider=b_.Class({provideHover:function(cd,ce,cf){var cg,ch;cg=this;return O.ofAsyncResultM((ch=J.asyncResultM(),ch.Run(ch.Delay(function(){return J["AsyncResultMBuilder.Bind"](ch,cg.toolTip(G.New(ce.lineNumber,ce.column)),function(ci){return ci!=null&&ci.$==1?ch.Return(k.New([h.New(ci.$0,true)],null)):ch.Return(null);});}))));}},m,s);s.New=b_.Ctor(function(cd){m.New.call(this);this.toolTip=cd;},s);t=p.DefinitionProvider=b_.Class({provideDefinition:function(cd,ce,cf){var cg,ch;cg=this;return O.ofAsyncResultM((ch=J.asyncResultM(),ch.Run(ch.Delay(function(){return J["AsyncResultMBuilder.Bind"](ch,cg.declaration(G.New(ce.lineNumber,ce.column)),function(ci){var cj;return ci!=null&&ci.$==1?(cj=ci.$0[0],ch.Return(g.New(f.New(cj.col,cj.col,cj.line,cj.line),self.monaco.Uri.parse(ci.$0[1])))):ch.Return(null);});}))));}},m,t);t.New=b_.Ctor(function(cd){m.New.call(this);this.declaration=cd;},t);v.annotationsV=function(){B.$cctor();return B.annotationsV;};v.transformAnnotations=function(cd){var ce,cf;function cg(ch,ci,cj,ck,cl,cm){return R.New(G.New(ci,cj),G.New(ck,cl),ch==="Err"?T.Error:ch==="Warn"?T.Warning:ch==="Hint"?T.Hint:{$:4,$0:ch},cm);}ce="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\)\\: \"([^\"]+?)\"\\.";return Q.map(function(ch){return cg(ch[0],ch[1],ch[2],ch[3],ch[4],ch[5]);},Q.choose(function(ch){var ci,cj,ck;return(cj=c.REGEX$1(ce,"",ch),cj!=null&&cj.$==1&&((ck=cj.$0,!A.Equals(ck,null)&&ck.length===7)&&(ci=[M.get(cj.$0,3),M.get(cj.$0,2),M.get(cj.$0,6),M.get(cj.$0,5),M.get(cj.$0,4),M.get(cj.$0,1)],true)))?{$:1,$0:[ci[5],z.toInt(a.Number(ci[1])),z.toInt(a.Number(ci[0])),z.toInt(a.Number(ci[4])),z.toInt(a.Number(ci[3])),ci[2]]}:null;},(cf=c.REGEX$1(ce,"g",cd),cf!=null&&cf.$==1?cf.$0:[])));};v.monacoNew=function(cd){return E.onRender(function(ce){var cf,cg;cf=ce.editorO;cf==null?void 0:(cg=cf.$0.getModel(),self.monaco.editor.setModelLanguage(cg,"fsharp"));self.monaco.editor.setTheme("vs-dark");},p.newVar(function(){return{};},function(){return{};},cd));};v.toolTip=function(cd,ce){var cf;cf=null;return $.Delay(function(){var cg;cg=cd.editorHook.getWordAt(ce);return cg!=null&&cg.$==1?$.Return({$:1,$0:(function(ch){return function(ci){return ch("The word is: "+U.toSafe(ci));};}(a.id))(cg.$0[0])}):$.Return(null);});};v.declaration=function(cd,ce){var cf;cf=null;return $.Delay(function(){var cg,ch,ci,cj;cg=cd.editorHook.getWordAt(ce);return cg!=null&&cg.$==1?(ch=cd.editorO.$0.getModel(),(ci=ch.findMatches(cg.$0[0],false,false,true," <>()+-=.,/#@$%^&*\"",false,1),M.length(ci)===0?$.Return(null):$.Return({$:1,$0:[(cj=M.get(ci,0).range.startColumn,G.New(M.get(ci,0).range.startLineNumber,cj)),a.String(ch.uri)]}))):$.Return(null);});};v.autoCompletion=function(cd,ce){var cf;cf=null;return $.Delay(function(){return $.Return([N.New("F","Hello","",[ce,ce]),N.New("F","How","",[ce,ce]),N.New("F","Are","",[ce,ce]),N.New("F","You","",[ce,ce])]);});};v.main=function(){var cd,ce,cf,cg,ch;cd=F.Create$1("Hello there.\nHello there.\nHello there.\nHello there.\n");ce=(cf=v.monacoNew(cd),P.New(cf["var"],cf.disabled,y.Map(v.transformAnnotations,v.annotationsV().get_View()),cf.onChange,cf.onRender,{$:1,$0:function(ci){return function(cj){return v.autoCompletion(ci,cj);};}},{$:1,$0:function(ci){return function(cj){return v.toolTip(ci,cj);};}},{$:1,$0:function(ci){return function(cj){return v.declaration(ci,cj);};}},cf.editorO,cf.editorHook));cg=bb.Element("div",[],[bb.Element("div",[ba.Create("style","height: 400px; width: 800px")],[E.generateDoc(ce)]),bb.Element("div",[],[bb.TextNode("These are the annotations that create tooltips, warnings and errors:")]),bb.InputArea([ba.Create("style","height: 100px; width: 600px")],F.Lens(v.annotationsV(),a.id,function(ci,cj){return cj;})),bb.Element("div",[],[bb.TextView(cd.get_View())])]);ch=self.document.body;bk.LoadLocalTemplates("");bb.Run(ch,cg);};x=w.Var=b_.Class({},m,x);x.New=b_.Ctor(function(){m.New.call(this);},x);y=w.View=b_.Class({},null,y);z.toInt=function(cd){var ce;ce=z.toUInt(cd);return ce>=2147483648?ce-4294967296:ce;};z.toUInt=function(cd){return(cd<0?b$.ceil(cd):b$.floor(cd))>>>0;};z.FailWith=function(cd){throw new bD(cd);};z.KeyValue=function(cd){return[cd.K,cd.V];};y.Const=function(cd){var ce;ce=_0.New({$:0,$0:cd});return function(){return ce;};};y.Map=function(cd,ce){return y.CreateLazy(function(){return _0.Map(cd,ce());});};y.Sink=function(cd,ce){function cf(){_0.WhenRun(ce(),cd,function(){$.scheduler().Fork(cf);});}$.scheduler().Fork(cf);};y.CreateLazy=function(cd){var ce;ce={c:null,o:cd};return function(){var cf,cg;cf=ce.c;return cf===null?(cf=ce.o(),ce.c=cf,(cg=cf.s,cg!=null&&cg.$==0)?ce.o=null:_0.WhenObsoleteRun(cf,function(){ce.c=null;}),cf):cf;};};y.MapAsync=function(cd,ce){return y.CreateLazy(function(){return _0.MapAsync(cd,ce());});};y.Bind=function(cd,ce){return y.Join(y.Map(cd,ce));};y.Join=function(cd){return y.CreateLazy(function(){return _0.Join(cd());});};y.Map2Unit=function(cd,ce){return y.CreateLazy(function(){return _0.Map2Unit(cd(),ce());});};A.Equals=function(cd,ce){var cf,cg,ch,ci;if(cd===ce)return true;else{cf=typeof cd;if(cf=="object"){if(cd===null||cd===void 0||ce===null||ce===void 0)return false;else if("Equals"in cd)return cd.Equals(ce);else if(cd instanceof a.Array&&ce instanceof a.Array)return A.arrayEquals(cd,ce);else if(cd instanceof a.Date&&ce instanceof a.Date)return A.dateEquals(cd,ce);else{cg=[true];for(var cj in cd)if(function(ck){cg[0]=!cd.hasOwnProperty(ck)||ce.hasOwnProperty(ck)&&A.Equals(cd[ck],ce[ck]);return!cg[0];}(cj))break;if(cg[0]){for(var ck in ce)if(function(cl){cg[0]=!ce.hasOwnProperty(cl)||cd.hasOwnProperty(cl);return!cg[0];}(ck))break;}return cg[0];}}else return cf=="function"&&("$Func"in cd?cd.$Func===ce.$Func&&cd.$Target===ce.$Target:"$Invokes"in cd&&"$Invokes"in ce&&A.arrayEquals(cd.$Invokes,ce.$Invokes));}};A.arrayEquals=function(cd,ce){var cf,cg;if(M.length(cd)===M.length(ce)){cf=true;cg=0;while(cf&&cg<M.length(cd)){!A.Equals(M.get(cd,cg),M.get(ce,cg))?cf=false:void 0;cg=cg+1;}return cf;}else return false;};A.dateEquals=function(cd,ce){return cd.getTime()===ce.getTime();};A.Compare=function(cd,ce){var cf,cg,ch,ci,cj,ck;if(cd===ce)return 0;else{cg=typeof cd;switch(cg=="function"?1:cg=="boolean"?2:cg=="number"?2:cg=="string"?2:cg=="object"?3:0){case 0:return typeof ce=="undefined"?0:-1;case 1:return z.FailWith("Cannot compare function values.");case 2:return cd<ce?-1:1;case 3:if(cd===null)ch=-1;else if(ce===null)ch=1;else if("CompareTo"in cd)ch=cd.CompareTo(ce);else if("CompareTo0"in cd)ch=cd.CompareTo0(ce);else if(cd instanceof a.Array&&ce instanceof a.Array)ch=A.compareArrays(cd,ce);else if(cd instanceof a.Date&&ce instanceof a.Date)ch=A.compareDates(cd,ce);else{ci=[0];for(var cl in cd)if(function(cm){return!cd.hasOwnProperty(cm)?false:!ce.hasOwnProperty(cm)?(ci[0]=1,true):(ci[0]=A.Compare(cd[cm],ce[cm]),ci[0]!==0);}(cl))break;if(ci[0]===0){for(var cm in ce)if(function(cn){return!ce.hasOwnProperty(cn)?false:!cd.hasOwnProperty(cn)&&(ci[0]=-1,true);}(cm))break;}ch=ci[0];}return ch;}}};A.compareArrays=function(cd,ce){var cf,cg;if(M.length(cd)<M.length(ce))return -1;else if(M.length(cd)>M.length(ce))return 1;else{cf=0;cg=0;while(cf===0&&cg<M.length(cd)){cf=A.Compare(M.get(cd,cg),M.get(ce,cg));cg=cg+1;}return cf;}};A.compareDates=function(cd,ce){return A.Compare(cd.getTime(),ce.getTime());};A.Hash=function(cd){var ce;ce=typeof cd;return ce=="function"?0:ce=="boolean"?cd?1:0:ce=="number"?cd:ce=="string"?A.hashString(cd):ce=="object"?cd==null?0:cd instanceof a.Array?A.hashArray(cd):A.hashObject(cd):0;};A.hashString=function(cd){var ce,cf,cg;if(cd===null)return 0;else{ce=5381;for(cf=0,cg=cd.length-1;cf<=cg;cf++)ce=A.hashMix(ce,cd[cf].charCodeAt());return ce;}};A.hashArray=function(cd){var ce,cf,cg;ce=-34948909;for(cf=0,cg=M.length(cd)-1;cf<=cg;cf++)ce=A.hashMix(ce,A.Hash(M.get(cd,cf)));return ce;};A.hashObject=function(cd){var ce,cf;if("GetHashCode"in cd)return cd.GetHashCode();else{ce=[0];for(var cg in cd)if(function(ch){ce[0]=A.hashMix(A.hashMix(ce[0],A.hashString(ch)),A.Hash(cd[ch]));return false;}(cg))break;return ce[0];}};A.hashMix=function(cd,ce){return(cd<<5)+cd+ce;};B.$cctor=function(){var cd,ce;B.$cctor=a.ignore;function cf(cj){return _6.concat("\n",cj);}function cg(cj){return _5.splitByChar("\n",cj);}function ch(cj){var ck,cl;return _7.array(cj,{$:1,$0:0},{$:1,$0:(ck=0,(cl=M.length(cj)-2,A.Compare(ck,cl)===1?ck:cl))});}function ci(cj){return _6.concat("\n",cj);}B.rtn=function(cj){return[cj];};B.result=new _2.New();B.result$1=_1.result();B.resultM=new _4.New();B.asyncResultM=new L.New();B.unindentStr=function(cj){return cf(_5.unindent(cj));};B.skipLastLine=(cd=function(cj){return ch(cg(cj));},function(cj){return ci(cd(cj));});B.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";B.observers=_9.Empty;B.loader=(ce=null,$.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return $.Bind($.FromContinuations(function(cj,ck){return self.require(["vs/editor/editor.main"],cj,ck);}),function(){return $.Return(null);});}));B.annotationsV=F.Create$1("Err (1, 7) - (1, 12): \"This shows over there as an error\".\nWarn (2, 7) - (2, 12): \"This shows over there as a warning\".\nInfo (3, 7) - (3, 12): \"This shows over there as information\".\nHint (4, 7) - (4, 12): \"This shows over there as a hint\".");};D.addResizeObserver=function(cd,ce){var cf,cg,ch,ci;try{cf=!(!a.ResizeObserver);}catch(cj){cf=false;}if(cf){cg=new a.ResizeObserver(cd);D.set_observers(new _9({$:1,$0:cg,$1:D.observers()}));cg.observe(ce);}else{ch=D.dimsChanged(ce);$.Start((ci=null,$.Delay(function(){return $.While(function(){return ce.isConnected;},$.Delay(function(){return $.Bind($.Sleep(110),function(){return ch()?(cd(),$.Zero()):$.Zero();});}));})),null);}};D.set_observers=function(cd){B.$cctor();B.observers=cd;};D.observers=function(){B.$cctor();return B.observers;};D.dimsChanged=function(cd){var ce;ce=[cd.getBoundingClientRect()];return function(){var cf;cf=cd.getBoundingClientRect();return A.Equals(D.domRect2Tuple(ce[0]),D.domRect2Tuple(cf))?false:(ce[0]=cf,true);};};D.domRect2Tuple=function(cd){return[cd.top,cd.left,cd.width,cd.height];};E.bindVarEditor=function(cd,ce,cf,cg,ch){var ci,cj;ci=[0];cj=[0];cd(function(){var ck;ck=ce();!A.Equals(ch.Get(),ck)?(ci[0]=ci[0]+1,ch.Set(ck),cg(ck)):void 0;});y.Sink(function(){if(ci[0]>cj[0])cj[0]=ci[0];else if(!A.Equals(ce(),ch.Get()))cf(ch.Get());},ch.get_View());};E.newVar=function(cd,ce){return P.New(ce,y.Const(false),y.Const([]),null,a.ignore,null,null,null,null,cd);};E.onRender=function(cd,ce){return P.New(ce["var"],ce.disabled,ce.annotations,ce.onChange,cd,ce.autoCompletion,ce.toolTip,ce.declaration,ce.editorO,ce.editorHook);};E.generateDoc=function(cd){var ce,cf,cg;ce=(cf=(cg=cd.onChange,cg==null?null:{$:1,$0:cg.$0(cd)}),cf==null?a.ignore:cf.$0);return(cd.editorHook.generateDoc(cd))(function(ch){cd.editorO={$:1,$0:ch};E.bindVarEditor(cd.editorHook.hookOnChange,cd.editorHook.getValue,cd.editorHook.setValue,ce,cd["var"]);y.Sink(cd.editorHook.showAnnotations,cd.annotations);y.Sink(cd.editorHook.setDisabled,cd.disabled);cd.onRender(cd);});};F=w.Var$1=b_.Class({},m,F);F.Create$1=function(cd){return new bc.New(false,_0.New({$:2,$0:cd,$1:[]}),cd);};F.Lens=function(cd,ce,cf){var cg,ch,ci;cg=be.Id();ch=y.Map(ce,cd.get_View());ci=new x({Get:function(){return ce(cd.Get());},Set:function(cj){return cd.Update(function(ck){return cf(ck,cj);});},SetFinal:function(cj){return this.Set(cj);},Update:function(cj){return cd.Update(function(ck){return cf(ck,cj(ce(ck)));});},UpdateMaybe:function(cj){return cd.UpdateMaybe(function(ck){var cl;cl=cj(ce(ck));return cl==null?null:{$:1,$0:cf(ck,cl.$0)};});},get_View:function(){return ch;},get_Id:function(){return cg;}});x.New.call(ci);return ci;};G.New=function(cd,ce){return{line:cd,col:ce};};J.asyncResultM=function(){B.$cctor();return B.asyncResultM;};J["AsyncResultMBuilder.Bind"]=function(cd,ce,cf){function cg(ch){return $.Return(ch);}return K.bind(cf,$.Bind(ce,function(ch){return cg(I.OkM$1(ch));}));};L=K.AsyncResultMBuilder=b_.Class({Run:function(cd){return K.bind(cd,K.rtn());},Delay:a.id,Return:function(cd){return K.rtn(cd);}},m,L);L.New=b_.Ctor(function(){m.New.call(this);},L);M.map=function(cd,ce){var cf,cg,ch;cf=new a.Array(ce.length);for(cg=0,ch=ce.length-1;cg<=ch;cg++)cf[cg]=cd(ce[cg]);return cf;};M.ofSeq=function(cd){var ce,cf;if(cd instanceof a.Array)return cd.slice();else if(cd instanceof _9)return M.ofList(cd);else{ce=[];cf=bh.Get(cd);try{while(cf.MoveNext())ce.push(cf.Current());return ce;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}}};M.ofList=function(cd){var ce,cf;cf=[];ce=cd;while(!(ce.$==0)){cf.push(_8.head(ce));ce=_8.tail(ce);}return cf;};M.exists=function(cd,ce){var cf,cg,ch,ci;cf=false;cg=0;ci=M.length(ce);while(!cf&&cg<ci)if(cd(ce[cg]))cf=true;else cg=cg+1;return cf;};M.tryPick=function(cd,ce){var cf,cg,ch;cf=null;cg=0;while(cg<ce.length&&cf==null){ch=cd(ce[cg]);ch!=null&&ch.$==1?cf=ch:void 0;cg=cg+1;}return cf;};M.tryFindIndex=function(cd,ce){var cf,cg;cf=null;cg=0;while(cg<ce.length&&cf==null){cd(ce[cg])?cf={$:1,$0:cg}:void 0;cg=cg+1;}return cf;};M.foldBack=function(cd,ce,cf){var cg,ch,ci,cj,ck;cg=cf;ci=ce.length;for(cj=1,ck=ci;cj<=ck;cj++)cg=cd(ce[ci-cj],cg);return cg;};M.filter=function(cd,ce){var cf,cg,ch;cf=[];for(cg=0,ch=ce.length-1;cg<=ch;cg++)if(cd(ce[cg]))cf.push(ce[cg]);return cf;};M.iter=function(cd,ce){var cf,cg;for(cf=0,cg=ce.length-1;cf<=cg;cf++)cd(ce[cf]);};M.pick=function(cd,ce){var cf;cf=M.tryPick(cd,ce);return cf==null?z.FailWith("KeyNotFoundException"):cf.$0;};M.choose=function(cd,ce){var cf,cg,ch,ci;cf=[];for(cg=0,ch=ce.length-1;cg<=ch;cg++){ci=cd(ce[cg]);ci==null?void 0:cf.push(ci.$0);}return cf;};M.concat=function(cd){return a.Array.prototype.concat.apply([],M.ofSeq(cd));};M.create=function(cd,ce){var cf,cg,ch;cf=new a.Array(cd);for(cg=0,ch=cd-1;cg<=ch;cg++)cf[cg]=ce;return cf;};M.init=function(cd,ce){var cf,cg,ch;cd<0?z.FailWith("Negative size given."):null;cf=new a.Array(cd);for(cg=0,ch=cd-1;cg<=ch;cg++)cf[cg]=ce(cg);return cf;};M.forall=function(cd,ce){var cf,cg,ch,ci;cf=true;cg=0;ci=M.length(ce);while(cf&&cg<ci)if(cd(ce[cg]))cg=cg+1;else cf=false;return cf;};N.New=function(cd,ce,cf,cg){return{kind:cd,label:ce,detail:cf,replace:cg};};O.ofAsyncResultM=function(cd){return new a.Promise(function(ce,cf){$.StartWithContinuations(cd,function(cg){var ch;ch=I.OkM(cg);ch.$==1?cf(bg.summarized(ch.$0)):ce(ch.$0[0]);},function(cg){cf(cg);},function(cg){cf(cg);},null);});};P.New=function(cd,ce,cf,cg,ch,ci,cj,ck,cl,cm){return{"var":cd,disabled:ce,annotations:cf,onChange:cg,onRender:ch,autoCompletion:ci,toolTip:cj,declaration:ck,editorO:cl,editorHook:cm};};c.REGEX$1=function(cd,ce,cf){var cg;return cf===null?null:(cg=(new a.String(cf)).match(new a.RegExp(cd,ce)),A.Equals(cg,null)?null:!A.Equals(cg,null)&&cg.length===0?null:{$:1,$0:cg});};Q.map=function(cd,ce){return{GetEnumerator:function(){var cf;cf=bh.Get(ce);return new bi.New(null,null,function(cg){return cf.MoveNext()&&(cg.c=cd(cf.Current()),true);},function(){cf.Dispose();});}};};Q.choose=function(cd,ce){return Q.collect(function(cf){var cg;cg=cd(cf);return cg==null?_9.Empty:_8.ofArray([cg.$0]);},ce);};Q.collect=function(cd,ce){return Q.concat(Q.map(cd,ce));};Q.tryFind=function(cd,ce){var cf,cg,ch;cf=bh.Get(ce);try{cg=null;while(cg==null&&cf.MoveNext()){ch=cf.Current();cd(ch)?cg={$:1,$0:ch}:void 0;}return cg;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};Q.tryFindIndex=function(cd,ce){var cf,cg,ch;cf=bh.Get(ce);try{cg=true;ch=0;while(cg&&cf.MoveNext())if(cd(cf.Current()))cg=false;else ch=ch+1;return cg?null:{$:1,$0:ch};}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};Q.filter=function(cd,ce){return{GetEnumerator:function(){var cf;cf=bh.Get(ce);return new bi.New(null,null,function(cg){var ch,ci,cj;ch=cf.MoveNext();ci=cf.Current();cj=false;while(ch)if(cd(ci)){cg.c=ci;cj=true;ch=false;}else if(cf.MoveNext())ci=cf.Current();else ch=false;return cj;},function(){cf.Dispose();});}};};Q.concat=function(cd){return{GetEnumerator:function(){var ce;ce=bh.Get(cd);return new bi.New(null,null,function(cf){var cg;while(true){cg=cf.s;if(A.Equals(cg,null)){if(ce.MoveNext()){cf.s=bh.Get(ce.Current());cf=cf;}else{ce.Dispose();return false;}}else if(cg.MoveNext()){cf.c=cg.Current();return true;}else{cf.Dispose();cf.s=null;cf=cf;}}},function(cf){var cg;cg=cf.s;!A.Equals(cg,null)?cg.Dispose():void 0;!A.Equals(ce,null)?ce.Dispose():void 0;});}};};Q.append=function(cd,ce){return{GetEnumerator:function(){var cf,cg;cf=bh.Get(cd);cg=[true];return new bi.New(cf,null,function(ch){var ci;return ch.s.MoveNext()?(ch.c=ch.s.Current(),true):(ci=ch.s,!A.Equals(ci,null)?ci.Dispose():void 0,ch.s=null,cg[0]&&(cg[0]=false,ch.s=bh.Get(ce),ch.s.MoveNext()?(ch.c=ch.s.Current(),true):(ch.s.Dispose(),ch.s=null,false)));},function(ch){var ci;ci=ch.s;!A.Equals(ci,null)?ci.Dispose():void 0;});}};};Q.head=function(cd){var ce;ce=bh.Get(cd);try{return ce.MoveNext()?ce.Current():Q.insufficient();}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};Q.fold=function(cd,ce,cf){var cg,ch;cg=ce;ch=bh.Get(cf);try{while(ch.MoveNext())cg=cd(cg,ch.Current());return cg;}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}};Q.iter=function(cd,ce){var cf;cf=bh.Get(ce);try{while(cf.MoveNext())cd(cf.Current());}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};Q.max=function(cd){var ce,cf,cg;ce=bh.Get(cd);try{if(!ce.MoveNext())Q.seqEmpty();cf=ce.Current();while(ce.MoveNext()){cg=ce.Current();A.Compare(cg,cf)===1?cf=cg:void 0;}return cf;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};Q.seqEmpty=function(){return z.FailWith("The input sequence was empty.");};R.New=function(cd,ce,cf,cg){return{startP:cd,endP:ce,severity:cf,message:cg};};S.New=function(cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn){return{generateDoc:cd,getValue:ce,setValue:cf,setDisabled:cg,showAnnotations:ch,posFromIndex:ci,indexFromPos:cj,getWordAt:ck,getUri:cl,setUri:cm,hookOnChange:cn};};M.get=function(cd,ce){M.checkBounds(cd,ce);return cd[ce];};M.checkBounds=function(cd,ce){if(ce<0||ce>=cd.length)z.FailWith("Index was outside the bounds of the array.");};M.length=function(cd){return cd.dims===2?cd.length*cd.length:cd.length;};M.set=function(cd,ce,cf){M.checkBounds(cd,ce);cd[ce]=cf;};T.Error={$:0};T.Warning={$:1};T.Hint={$:3};U.toSafe=function(cd){return cd==null?"":cd;};W=V.attr=b_.Class({},m,W);Z.GetFieldValues=function(cd){var ce,cf;ce=[];for(var cg in cd)ce.push(cd[cg]);return ce;};_0.Map=function(cd,ce){var cf,cg;cf=ce.s;return cf!=null&&cf.$==0?_0.New({$:0,$0:cd(cf.$0)}):(cg=_0.New({$:3,$0:[],$1:[]}),(_0.When(ce,function(ch){_0.MarkDone(cg,ce,cd(ch));},cg),cg));};_0.WhenRun=function(cd,ce,cf){var cg;cg=cd.s;cg==null?cf():cg!=null&&cg.$==2?(cg.$1.push(cf),ce(cg.$0)):cg!=null&&cg.$==3?(cg.$0.push(ce),cg.$1.push(cf)):ce(cg.$0);};_0.WhenObsoleteRun=function(cd,ce){var cf;cf=cd.s;cf==null?ce():cf!=null&&cf.$==2?cf.$1.push(ce):cf!=null&&cf.$==3?cf.$1.push(ce):void 0;};_0.When=function(cd,ce,cf){var cg;cg=cd.s;cg==null?_0.Obsolete(cf):cg!=null&&cg.$==2?(_0.EnqueueSafe(cg.$1,cf),ce(cg.$0)):cg!=null&&cg.$==3?(cg.$0.push(ce),_0.EnqueueSafe(cg.$1,cf)):ce(cg.$0);};_0.MarkDone=function(cd,ce,cf){var cg;if(cg=ce.s,cg!=null&&cg.$==0)_0.MarkForever(cd,cf);else _0.MarkReady(cd,cf);};_0.MapAsync=function(cd,ce){var cf;cf=_0.New({$:3,$0:[],$1:[]});_0.When(ce,function(cg){bn.StartTo(cd(cg),function(ch){_0.MarkDone(cf,ce,ch);});},cf);return cf;};_0.EnqueueSafe=function(cd,ce){var cf,cg,ch,ci;cd.push(ce);if(cd.length%20===0){cf=cd.slice(0);bW.Clear(cd);for(cg=0,ch=M.length(cf)-1;cg<=ch;cg++){ci=M.get(cf,cg);typeof ci=="object"?function(cj){if(cj.s)cd.push(cj);}(ci):function(cj){cd.push(cj);}(ci);}}else void 0;};_0.MarkForever=function(cd,ce){var cf,cg,ch,ci;cf=cd.s;if(cf!=null&&cf.$==3){cd.s={$:0,$0:ce};cg=cf.$0;for(ch=0,ci=M.length(cg)-1;ch<=ci;ch++)(M.get(cg,ch))(ce);}else void 0;};_0.MarkReady=function(cd,ce){var cf,cg,ch,ci;cf=cd.s;if(cf!=null&&cf.$==3){cd.s={$:2,$0:ce,$1:cf.$1};cg=cf.$0;for(ch=0,ci=M.length(cg)-1;ch<=ci;ch++)(M.get(cg,ch))(ce);}else void 0;};_0.Join=function(cd){var ce;ce=_0.New({$:3,$0:[],$1:[]});_0.When(cd,function(cf){var cg;cg=cf();_0.When(cg,function(ch){var ci,cj;if((ci=cg.s,ci!=null&&ci.$==0)&&(cj=cd.s,cj!=null&&cj.$==0))_0.MarkForever(ce,ch);else _0.MarkReady(ce,ch);},ce);},ce);return ce;};_0.Copy=function(cd){var ce,cf,cg;ce=cd.s;return ce==null?cd:ce!=null&&ce.$==2?(cf=_0.New({$:2,$0:ce.$0,$1:[]}),(_0.WhenObsolete(cd,cf),cf)):ce!=null&&ce.$==3?(cg=_0.New({$:3,$0:[],$1:[]}),(_0.When(cd,function(ch){_0.MarkDone(cg,cd,ch);},cg),cg)):cd;};_0.Map2Unit=function(cd,ce){var cf,cg,ch;function ci(){var cj,ck,cl;if(!(cj=ch.s,cj!=null&&cj.$==0||cj!=null&&cj.$==2)){ck=_0.ValueAndForever(cd);cl=_0.ValueAndForever(ce);ck!=null&&ck.$==1?cl!=null&&cl.$==1?ck.$0[1]&&cl.$0[1]?_0.MarkForever(ch,null):_0.MarkReady(ch,null):void 0:void 0;}}cf=cd.s;cg=ce.s;return cf!=null&&cf.$==0?cg!=null&&cg.$==0?_0.New({$:0,$0:null}):ce:cg!=null&&cg.$==0?cd:(ch=_0.New({$:3,$0:[],$1:[]}),(_0.When(cd,ci,ch),_0.When(ce,ci,ch),ch));};_0.WhenObsolete=function(cd,ce){var cf;cf=cd.s;cf==null?_0.Obsolete(ce):cf!=null&&cf.$==2?_0.EnqueueSafe(cf.$1,ce):cf!=null&&cf.$==3?_0.EnqueueSafe(cf.$1,ce):void 0;};_0.ValueAndForever=function(cd){var ce;ce=cd.s;return ce!=null&&ce.$==0?{$:1,$0:[ce.$0,true]}:ce!=null&&ce.$==2?{$:1,$0:[ce.$0,false]}:null;};_2=_1.Builder=b_.Class({},m,_2);_2.New=b_.Ctor(function(){m.New.call(this);},_2);_1.result=function(){B.$cctor();return B.result;};_4=_3.Builder=b_.Class({},m,_4);_4.New=b_.Ctor(function(){m.New.call(this);},_4);_5.unindent=function(cd){var ce,cf,cg,ch;ce=_6.SplitChars(cd,["\n"],0);cf=(cg=Q.tryFindIndex(function(ci){return" "!==ci;},(ch=Q.tryFind(function(ci){return _6.Trim(ci)!=="";},ce),ch==null?"":ch.$0)),cg==null?0:cg.$0);return Q.filter(function(ci){return!_6.StartsWith(ci,"# 1 ");},Q.map(function(ci){return ci.length<=cf?"":ci.substring(cf);},ce));};_5.splitByChar=function(cd,ce){return _6.SplitChars(ce,[cd],0);};_6.concat=function(cd,ce){return M.ofSeq(ce).join(cd);};_6.SplitChars=function(cd,ce,cf){return _6.Split(cd,new a.RegExp("["+_6.RegexEscape(ce.join(""))+"]"),cf);};_6.Trim=function(cd){return cd.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};_6.StartsWith=function(cd,ce){return cd.substring(0,ce.length)==ce;};_6.Split=function(cd,ce,cf){return cf===1?M.filter(function(cg){return cg!=="";},_6.SplitWith(cd,ce)):_6.SplitWith(cd,ce);};_6.RegexEscape=function(cd){return cd.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_6.SplitWith=function(cd,ce){return cd.split(ce);};_7.array=function(cd,ce,cf){return ce==null?cf!=null&&cf.$==1?cd.slice(0,cf.$0+1):[]:cf==null?cd.slice(ce.$0):cd.slice(ce.$0,cf.$0+1);};_7.string=function(cd,ce,cf){return ce==null?cf!=null&&cf.$==1?cd.slice(0,cf.$0+1):"":cf==null?cd.slice(ce.$0):cd.slice(ce.$0,cf.$0+1);};_9=_8.T=b_.Class({GetEnumerator:function(){return new bi.New(this,null,function(cd){var ce;ce=cd.s;return ce.$==0?false:(cd.c=ce.$0,cd.s=ce.$1,true);},void 0);},GetEnumerator0:function(){return bh.Get(this);}},null,_9);_9.Empty=new _9({$:0});_.NewFromSeq=function(cd){var ce,cf,cg;ce={};cf=bh.Get(cd);try{while(cf.MoveNext()){cg=cf.Current();ce[cg[0]]=cg[1];}}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}return ce;};$.Delay=function(cd){return function(ce){try{(cd(null))(ce);}catch(cf){ce.k({$:1,$0:cf});}};};$.Bind=function(cd,ce){return $.checkCancel(function(cf){cd(bm.New(function(cg){var ch;if(cg.$==0){ch=cg.$0;$.scheduler().Fork(function(){try{(ce(ch))(cf);}catch(ci){cf.k({$:1,$0:ci});}});}else $.scheduler().Fork(function(){cf.k(cg);});},cf.ct));});};$.Return=function(cd){return function(ce){ce.k({$:0,$0:cd});};};$.FromContinuations=function(cd){return function(ce){var cf;function cg(ch){if(cf[0])z.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cf[0]=true;$.scheduler().Fork(ch);}}cf=[false];cd(function(ch){cg(function(){ce.k({$:0,$0:ch});});},function(ch){cg(function(){ce.k({$:1,$0:ch});});},function(ch){cg(function(){ce.k({$:2,$0:ch});});});};};$.checkCancel=function(cd){return function(ce){if(ce.ct.c)$.cancel(ce);else cd(ce);};};$.While=function(cd,ce){return cd()?$.Bind(ce,function(){return $.While(cd,ce);}):$.Return();};$.Sleep=function(cd){return function(ce){var cf,cg;cf=void 0;cg=void 0;cf=a.setTimeout(function(){cg.Dispose();$.scheduler().Fork(function(){ce.k({$:0,$0:null});});},cd);cg=$.Register(ce.ct,function(){a.clearTimeout(cf);$.scheduler().Fork(function(){$.cancel(ce);});});};};$.Zero=function(){bw.$cctor();return bw.Zero;};$.Start=function(cd,ce){var cf,cg;cf=(cg=($.defCTS())[0],ce==null?cg:ce.$0);$.scheduler().Fork(function(){if(!cf.c)cd(bm.New(function(ch){if(ch.$==1)$.UncaughtAsyncError(ch.$0);},cf));});};$.StartWithContinuations=function(cd,ce,cf,cg,ch){var ci,cj;ci=(cj=($.defCTS())[0],ch==null?cj:ch.$0);!ci.c?cd(bm.New(function(ck){if(ck.$==1)cf(ck.$0);else if(ck.$==2)cg(ck.$0);else ce(ck.$0);},ci)):void 0;};$.cancel=function(cd){cd.k({$:2,$0:new bE.New(cd.ct)});};$.scheduler=function(){bw.$cctor();return bw.scheduler;};$.Register=function(cd,ce){var cf;return cd===$.noneCT()?{Dispose:function(){return null;}}:(cf=cd.r.push(ce)-1,{Dispose:function(){return M.set(cd.r,cf,a.ignore);}});};$.defCTS=function(){bw.$cctor();return bw.defCTS;};$.UncaughtAsyncError=function(cd){ca.log("WebSharper: Uncaught asynchronous exception",cd);};$.TryWith=function(cd,ce){return function(cf){cd(bm.New(function(cg){if(cg.$==0)cf.k({$:0,$0:cg.$0});else if(cg.$==1)try{(ce(cg.$0))(cf);}catch(ch){cf.k(cg);}else cf.k(cg);},cf.ct));};};$.noneCT=function(){bw.$cctor();return bw.noneCT;};ba=w.AttrProxy=b_.Class({},null,ba);ba.OnAfterRenderImpl=function(cd){return new ba({$:4,$0:cd});};ba.Create=function(cd,ce){return bo.Static(function(cf){bp.SetAttr(cf,cd,ce);});};ba.Concat=function(cd){var ce;ce=bG.ofSeqNonCopying(cd);return bG.TreeReduce(bo.EmptyAttr(),ba.Append,ce);};ba.Append=function(cd,ce){return bo.AppendTree(cd,ce);};bb=w.Doc=b_.Class({},m,bb);bb.Async=function(cd){return bb.EmbedView(y.MapAsync(a.id,y.Const(cd)));};bb.TextNode=function(cd){return bb.Mk({$:5,$0:bp.CreateText(cd)},y.Const());};bb.InputArea=function(cd,ce){return bb.InputInternal("textarea",function(){return Q.append(cd,[bq.Value(ce)]);});};bb.TextView=function(cd){var ce;ce=br.CreateTextNode();return bb.Mk({$:4,$0:ce},y.Map(function(cf){br.UpdateTextNode(ce,cf);},cd));};bb.Run=function(cd,ce){br.LinkElement(cd,ce.docNode);bb.RunInPlace(false,cd,ce);};bb.Element=function(cd,ce,cf){var cg,ch;cg=ba.Concat(ce);ch=bb.Concat(cf);return bF.New(bp.CreateElement(cd),cg,ch);};bb.EmbedView=function(cd){var ce;ce=br.CreateEmbedNode();return bb.Mk({$:2,$0:ce},y.Map(a.ignore,y.Bind(function(cf){br.UpdateEmbedNode(ce,cf.docNode);return cf.updates;},cd)));};bb.Mk=function(cd,ce){return new bb.New(cd,ce);};bb.InputInternal=function(cd,ce){var cf;cf=bp.CreateElement(cd);return bF.New(cf,ba.Concat(ce(cf)),bb.get_Empty());};bb.RunInPlace=function(cd,ce,cf){var cg;cg=br.CreateRunState(ce,cf.docNode);y.Sink(bA.get_UseAnimations()||bB.BatchUpdatesEnabled()?bC.StartProcessor(br.PerformAnimatedUpdate(cd,cg,cf.docNode)):function(){br.PerformSyncUpdate(cd,cg,cf.docNode);},cf.updates);};bb.Concat=function(cd){var ce;ce=bG.ofSeqNonCopying(cd);return bG.TreeReduce(bb.get_Empty(),bb.Append,ce);};bb.get_Empty=function(){return bb.Mk(null,y.Const());};bb.Append=function(cd,ce){return bb.Mk({$:0,$0:cd.docNode,$1:ce.docNode},y.Map2Unit(cd.updates,ce.updates));};bb.New=b_.Ctor(function(cd,ce){m.New.call(this);this.docNode=cd;this.updates=ce;},bb);bc=w.ConcreteVar=b_.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cd){this.Set(cd(this.Get()));},Set:function(cd){if(this.isConst)(function(ce){return ce("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(ce){ca.log(ce);}));else{_0.Obsolete(this.snap);this.current=cd;this.snap=_0.New({$:2,$0:cd,$1:[]});}},UpdateMaybe:function(cd){var ce;ce=cd(this.Get());ce!=null&&ce.$==1?this.Set(ce.$0):void 0;}},x,bc);bc.New=b_.Ctor(function(cd,ce,cf){var cg;cg=this;x.New.call(this);this.isConst=cd;this.current=cf;this.snap=ce;this.view=function(){return cg.snap;};this.id=be.Int();},bc);be.Id=function(){be.set_counter(be.counter()+1);return"uid"+a.String(be.counter());};be.Int=function(){be.set_counter(be.counter()+1);return be.counter();};be.set_counter=function(cd){bx.$cctor();bx.counter=cd;};be.counter=function(){bx.$cctor();return bx.counter;};K.rtn=function(cd){return $.Return(I.OkM$1(cd));};K.bind=function(cd,ce){var cf;cf=null;return $.Delay(function(){return $.TryWith($.Delay(function(){return $.Bind(ce,function(cg){var ch,ci;function cj(cl){return _3.addMsg(ci,cl);}function ck(cl){return $.Return(cl);}ch=I.OkM(cg);return ch.$==1?$.Return(I.ErrorM(ch.$0)):(ci=ch.$0[1],$.Bind(cd(ch.$0[0]),function(cl){return ck(cj(cl));}));});}),function(cg){return $.Return(I.ErrorM(new bg({$:5,$0:cg.message,$1:cg.stack})));});});};I.OkM$1=function(cd){return{$:0,$0:{$:1,$0:cd},$1:bg.NoMsg};};I.OkM=function(cd){return cd.$0==null?{$:1,$0:cd.$1}:{$:0,$0:[cd.$0.$0,cd.$1]};};I.ErrorM=function(cd){return{$:0,$0:null,$1:cd};};bg.summarized=function(cd){return bg.summarizedF(function(){return[1,0,0];},cd);};bg.summarizedF=function(cd,ce){return _6.concat("\n",Q.filter(function(cf){return""!==cf;},_8.ofArray([a.String(ce),bg.summaryF(cd,ce)])));};bg.addMsg=function(cd,ce){return cd.$==0?ce:cd.$==6?ce.$==0?cd:ce.$==6?new bg({$:6,$0:cd.$0.concat(ce.$0)}):new bg({$:6,$0:cd.$0.concat([ce])}):ce.$==0?cd:ce.$==6?new bg({$:6,$0:[cd].concat(ce.$0)}):new bg({$:6,$0:[cd,ce]});};bg.summaryF=function(cd,ce){var cf,cg;cg=bg.countF(cd,ce);switch(cg[0]===0?cg[1]===0?0:cg[1]===1?cg[2]===0?0:(cf=cg[1],2):(cf=cg[1],2):cg[0]===1?cg[1]===0?cg[2]===0?0:(cf=cg[0],1):(cf=[cg[0],cg[1]],3):cg[1]===0?(cf=cg[0],1):(cf=[cg[0],cg[1]],3)){case 0:return"";case 1:return(function(ch){return function(ci){return ch("Errors   : "+a.String(ci)+"\n");};}(a.id))(cf);case 2:return(function(ch){return function(ci){return ch("Warnings : "+a.String(ci)+"\n");};}(a.id))(cf);case 3:return(((b_.Curried3(function(ch,ci,cj){return ch("Errors   : "+a.String(ci)+", Warnings: "+a.String(cj)+"\n");}))(a.id))(cf[0]))(cf[1]);}};bg.countF=function(cd,ce){function cf(cg,ch,ci){return function(cj){return[cg+cj[0],ch+cj[1],ci+cj[2]];};}return ce.$==0?[0,0,0]:ce.$==3?[0,0,1]:ce.$==2?[0,1,0]:ce.$==4?cd(ce.$0):ce.$==6?Q.fold(function(cg,ch){return(function(ci){return cf(ci[0],ci[1],ci[2]);}(cg))(ch);},[0,0,0],Q.map(function(cg){return bg.countF(cd,cg);},bg.exclnoMsg(ce.$0))):[1,0,0];};bg.exclnoMsg=function(cd){function ce(cf){return!cf;}return Q.filter(function(cf){return ce(bg.noMsg(cf));},cd);};bg.noMsg=function(cd){return cd.$==0;};bh.Get=function(cd){return cd instanceof a.Array?bh.ArrayEnumerator(cd):A.Equals(typeof cd,"string")?bh.StringEnumerator(cd):cd.GetEnumerator();};bh.ArrayEnumerator=function(cd){return new bi.New(0,null,function(ce){var cf;cf=ce.s;return cf<M.length(cd)&&(ce.c=M.get(cd,cf),ce.s=cf+1,true);},void 0);};bh.StringEnumerator=function(cd){return new bi.New(0,null,function(ce){var cf;cf=ce.s;return cf<cd.length&&(ce.c=cd[cf],ce.s=cf+1,true);},void 0);};bh.Get0=function(cd){return cd instanceof a.Array?bh.ArrayEnumerator(cd):A.Equals(typeof cd,"string")?bh.StringEnumerator(cd):"GetEnumerator0"in cd?cd.GetEnumerator0():cd.GetEnumerator();};bi=bh.T=b_.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},m,bi);bi.New=b_.Ctor(function(cd,ce,cf,cg){m.New.call(this);this.s=cd;this.c=ce;this.n=cf;this.d=cg;},bi);_8.ofArray=function(cd){var ce,cf,cg;ce=_9.Empty;for(cf=M.length(cd)-1,cg=0;cf>=cg;cf--)ce=new _9({$:1,$0:M.get(cd,cf),$1:ce});return ce;};_8.head=function(cd){return cd.$==1?cd.$0:_8.listEmpty();};_8.tail=function(cd){return cd.$==1?cd.$1:_8.listEmpty();};_8.listEmpty=function(){return z.FailWith("The input list was empty.");};bk.LoadLocalTemplates=function(cd){!bk.LocalTemplatesLoaded()?(bk.set_LocalTemplatesLoaded(true),bk.LoadNestedTemplates(self.document.body,"")):void 0;bk.LoadedTemplates().set_Item(cd,bk.LoadedTemplateFile(""));};bk.LocalTemplatesLoaded=function(){by.$cctor();return by.LocalTemplatesLoaded;};bk.set_LocalTemplatesLoaded=function(cd){by.$cctor();by.LocalTemplatesLoaded=cd;};bk.LoadNestedTemplates=function(cd,ce){var cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct;function cf(cu){var cv,cw;if(!cg.ContainsKey(cu)){cv=(cw=null,[ch.TryGetValue(cu,{get:function(){return cw;},set:function(cx){cw=cx;}}),cw]);cv[0]?(ct.Add(cu),ch.Remove(cu),bk.PrepareTemplateStrict(ce,{$:1,$0:cu},cv[1][0],{$:1,$0:cv[1][1]},{$:1,$0:cf})):ca.warn(ct.Contains(cu)?"Encountered loop when instantiating "+cu:"Local template does not exist: "+cu);}}cg=bk.LoadedTemplateFile(ce);ch=new bt.New$5();ci=cd.querySelectorAll("[ws-template]");for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=ci[cj];cm=cl.getAttribute("ws-template").toLowerCase();cl.removeAttribute("ws-template");ch.set_Item(cm,[[cl],bk.FakeRootSingle(cl)]);}cn=cd.querySelectorAll("[ws-children-template]");for(co=0,cp=cn.length-1;co<=cp;co++){cq=cn[co];cr=cq.getAttribute("ws-children-template").toLowerCase();cq.removeAttribute("ws-children-template");ch.set_Item(cr,(cs=bp.ChildrenArray(cq),[cs,bk.FakeRoot(cs)]));}ct=new bz.New$3();while(ch.count>0)cf(Q.head(ch.get_Keys()));};bk.LoadedTemplates=function(){by.$cctor();return by.LoadedTemplates;};bk.LoadedTemplateFile=function(cd){var ce,cf,cg;ce=(cf=null,[bk.LoadedTemplates().TryGetValue(cd,{get:function(){return cf;},set:function(ch){cf=ch;}}),cf]);return ce[0]?ce[1]:(cg=new bt.New$5(),(bk.LoadedTemplates().set_Item(cd,cg),cg));};bk.FakeRootSingle=function(cd){var ce,cf,cg;cd.removeAttribute("ws-template");ce=cd.getAttribute("ws-replace");ce===null?void 0:(cd.removeAttribute("ws-replace"),cf=cd.parentNode,A.Equals(cf,null)?void 0:(cg=self.document.createElement(cd.tagName),cg.setAttribute("ws-replace",ce),cf.replaceChild(cg,cd)));return bk.FakeRoot([cd]);};bk.FakeRoot=function(cd){var ce,cf,cg;ce=self.document.createElement("div");for(cf=0,cg=cd.length-1;cf<=cg;cf++)ce.appendChild(M.get(cd,cf));return ce;};bk.PrepareTemplateStrict=function(cd,ce,cf,cg,ch){var ci,cj;function ck(cp,cq){var cr,cs,ct,cu,cv,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR;function cw(cS){}while(true)switch(cp){case 0:if(cq!==null){cr=cq.nextSibling;if(A.Equals(cq.nodeType,X.TEXT_NODE))bM.convertTextNode(cq);else if(A.Equals(cq.nodeType,X.ELEMENT_NODE))cm(cq);cq=cr;}else return null;break;case 1:cx=_7.string(cq.nodeName,{$:1,$0:3},null).toLowerCase();cy=(cs=cx.indexOf("."),cs===-1?[cd,cx]:[_7.string(cx,null,{$:1,$0:cs-1}),_7.string(cx,{$:1,$0:cs+1},null)]);cz=cy[1];cA=cy[0];if(cA!==""&&!bk.LoadedTemplates().ContainsKey(cA))return bM.failNotLoaded(cz);else{if(cA===""&&ch!=null)ch.$0(cz);cB=bk.LoadedTemplates().get_Item(cA);if(!cB.ContainsKey(cz))return bM.failNotLoaded(cz);else{cC=cB.get_Item(cz);cD=cC.cloneNode(true);cE=new bz.New$3();cF=new bt.New$5();cG=cq.attributes;for(cH=0,cI=cG.length-1;cH<=cI;cH++){cJ=cG.item(cH).name.toLowerCase();cF.set_Item(cJ,(cK=cG.item(cH).nodeValue,cK===""?cJ:cK.toLowerCase()));!cE.Add(cJ)?ca.warn("Hole mapped twice",cJ):void 0;}for(cL=0,cM=cq.childNodes.length-1;cL<=cM;cL++){cN=cq.childNodes[cL];A.Equals(cN.nodeType,X.ELEMENT_NODE)?!cE.Add(cN.nodeName.toLowerCase())?ca.warn("Hole filled twice",cz):void 0:void 0;}cO=cq.childNodes.length===1&&A.Equals(cq.firstChild.nodeType,X.TEXT_NODE);if(cO){cu=bM.fillTextHole(cD,cq.firstChild.textContent,cz);((function(cS){return function(cT){if(cT!=null)cS(cT.$0);};}((cv=function(cS){return function(cT){return cS.Add(cT);};}(cE),function(cS){return cw(cv(cS));})))(cu));}bM.removeHolesExcept(cD,cE);if(!cO){for(cP=0,cQ=cq.childNodes.length-1;cP<=cQ;cP++){cR=cq.childNodes[cP];A.Equals(cR.nodeType,X.ELEMENT_NODE)?cR.hasAttributes()?bM.fillInstanceAttrs(cD,cR):cl(cD,cR):void 0;}}bM.mapHoles(cD,cF);bM.fill(cD,cq.parentNode,cq);cq.parentNode.removeChild(cq);return;}}break;}}function cl(cp,cq){var cr,ct,cu;function cs(cv,cw){var cx,cy,cz;if(ct==="title"&&cq.hasChildNodes()){cx=cb.parseHTML(cq.textContent);cq.removeChild(cq.firstChild);for(cy=0,cz=cx.length-1;cy<=cz;cy++)cq.appendChild(M.get(cx,cy));}else null;cm(cq);return bM.fill(cq,cv,cw);}ct=cq.nodeName.toLowerCase();bp.IterSelector(cp,"[ws-attr-holes]",function(cv){var cw,cx,cy,cz,cA;cw=_6.SplitChars(cv.getAttribute("ws-attr-holes"),[" "],1);for(cx=0,cy=cw.length-1;cx<=cy;cx++){cz=M.get(cw,cx);cv.setAttribute(cz,(cA=new a.RegExp("\\${"+ct+"}","ig"),cv.getAttribute(cz).replace(cA,cq.textContent)));}});cu=cp.querySelector("[ws-hole="+ct+"]");if(A.Equals(cu,null)){cr=cp.querySelector("[ws-replace="+ct+"]");return A.Equals(cr,null)?null:(cs(cr.parentNode,cr),void cr.parentNode.removeChild(cr));}else{while(cu.hasChildNodes())cu.removeChild(cu.lastChild);cu.removeAttribute("ws-hole");return cs(cu,null);}}function cm(cp){if(_6.StartsWith(cp.nodeName.toLowerCase(),"ws-"))co(cp);else{bM.convertAttrs(cp);cn(cp.firstChild);}}function cn(cp){return ck(0,cp);}function co(cp){return ck(1,cp);}ci=cg==null?bk.FakeRoot(cf):cg.$0;cj=(ce==null?"":ce.$0).toLowerCase();bk.LoadedTemplateFile(cd).set_Item(cj,ci);M.length(cf)>0?(function(cp){var cq,cr,cs,ct;while(true){cq=cp.querySelector("[ws-template]");if(A.Equals(cq,null)){cr=cp.querySelector("[ws-children-template]");if(A.Equals(cr,null))return null;else{cs=cr.getAttribute("ws-children-template");cr.removeAttribute("ws-children-template");bk.PrepareTemplateStrict(cd,{$:1,$0:cs},bp.ChildrenArray(cr),null,null);cp=cp;}}else{ct=cq.getAttribute("ws-template");(bk.PrepareSingleTemplate(cd,{$:1,$0:ct},cq))(null);cp=cp;}}}(ci),cn(M.get(cf,0))):void 0;};bk.PrepareSingleTemplate=function(cd,ce,cf){var cg,ch,ci;cg=bk.FakeRootSingle(cf);ch=[cf];ci={$:1,$0:cg};return function(cj){bk.PrepareTemplateStrict(cd,ce,ch,ci,cj);};};bk.TextHoleRE=function(){by.$cctor();return by.TextHoleRE;};bm.New=function(cd,ce){return{k:cd,ct:ce};};bn.StartTo=function(cd,ce){$.StartWithContinuations(cd,ce,function(cf){bn.OnError(cf);},a.ignore,null);};bn.OnError=function(cd){return ca.log("WebSharper UI: Uncaught asynchronous exception",cd);};_0.Obsolete=function(cd){var ce,cf,cg,ch,ci;cf=cd.s;if(cf==null||(cf!=null&&cf.$==2?(ce=cf.$1,false):cf!=null&&cf.$==3?(ce=cf.$1,false):true))void 0;else{cd.s=null;for(cg=0,ch=M.length(ce)-1;cg<=ch;cg++){ci=M.get(ce,cg);typeof ci=="object"?function(cj){_0.Obsolete(cj);}(ci):ci();}}};_0.New=function(cd){return{s:cd};};_3.addMsg=function(cd,ce){return _3.mapMessage(function(cf){return bg.addMsg(cd,cf);},ce);};_3.mapMessage=function(cd,ce){return{$:0,$0:ce.$0,$1:cd(ce.$1)};};bg=H.ResultMessage=b_.Class({toString:function(){return this.$==1?(function(cd){return function(ce){return cd("Error    : "+U.toSafe(ce));};}(a.id))(this.$0):this.$==2?(function(cd){return function(ce){return cd("Warning  : "+U.toSafe(ce));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(cd){return function(ce){return cd(a.String(ce));};}(a.id))(this.$0):this.$==5?(((b_.Curried3(function(cd,ce,cf){return cd("Exception: "+U.toSafe(ce)+", "+U.toSafe(cf));}))(a.id))(this.$0))(this.$1):this.$==6?_6.concat("\n",Q.map(a.String,Q.filter(function(cd){return cd.$!=0;},this.$0))):"";}},null,bg);bg.NoMsg=new bg({$:0});bo.Static=function(cd){return new ba({$:3,$0:cd});};bo.Updates=function(cd){return bG.MapTreeReduce(function(ce){return ce.NChanged();},y.Const(),y.Map2Unit,cd.DynNodes);};bo.AppendTree=function(cd,ce){var cf;return cd===null?ce:ce===null?cd:(cf=new ba({$:2,$0:cd,$1:ce}),(bo.SetFlags(cf,bo.Flags(cd)|bo.Flags(ce)),cf));};bo.EmptyAttr=function(){bZ.$cctor();return bZ.EmptyAttr;};bo.Insert=function(cd,ce){var cf,cg,ch;function ci(cj){if(!(cj===null))if(cj!=null&&cj.$==1)cf.push(cj.$0);else if(cj!=null&&cj.$==2){ci(cj.$0);ci(cj.$1);}else if(cj!=null&&cj.$==3)cj.$0(cd);else if(cj!=null&&cj.$==4)cg.push(cj.$0);}cf=[];cg=[];ci(ce);ch=cf.slice(0);return bV.New(cd,bo.Flags(ce),ch,cg.length===0?null:{$:1,$0:function(cj){Q.iter(function(ck){ck(cj);},cg);}});};bo.HasExitAnim=function(cd){var ce;ce=2;return(cd.DynFlags&ce)===ce;};bo.GetExitAnim=function(cd){return bo.GetAnim(cd,function(ce,cf){return ce.NGetExitAnim(cf);});};bo.HasEnterAnim=function(cd){var ce;ce=1;return(cd.DynFlags&ce)===ce;};bo.GetEnterAnim=function(cd){return bo.GetAnim(cd,function(ce,cf){return ce.NGetEnterAnim(cf);});};bo.HasChangeAnim=function(cd){var ce;ce=4;return(cd.DynFlags&ce)===ce;};bo.GetChangeAnim=function(cd){return bo.GetAnim(cd,function(ce,cf){return ce.NGetChangeAnim(cf);});};bo.SetFlags=function(cd,ce){cd.flags=ce;};bo.Flags=function(cd){return cd!==null&&cd.hasOwnProperty("flags")?cd.flags:0;};bo.Dynamic=function(cd,ce){return new ba({$:1,$0:new b3.New(cd,ce)});};bo.GetAnim=function(cd,ce){return bA.Concat(M.map(function(cf){return ce(cf,cd.DynElem);},cd.DynNodes));};bo.Sync=function(cd,ce){M.iter(function(cf){cf.NSync(cd);},ce.DynNodes);};bp.SetAttr=function(cd,ce,cf){cd.setAttribute(ce,cf);};bp.CreateText=function(cd){return bp.Doc().createTextNode(cd);};bp.CreateElement=function(cd){return bp.Doc().createElement(cd);};bp.Doc=function(){bK.$cctor();return bK.Doc;};bp.ChildrenArray=function(cd){var ce,cf,cg;ce=[];for(cf=0,cg=cd.childNodes.length-1;cf<=cg;cf++)ce.push(cd.childNodes[cf]);return ce;};bp.IterSelector=function(cd,ce,cf){var cg,ch,ci;cg=cd.querySelectorAll(ce);for(ch=0,ci=cg.length-1;ch<=ci;ch++)cf(cg[ch]);};bp.InsertAt=function(cd,ce,cf){var cg;if(!(cf.parentNode===cd&&ce===(cg=cf.nextSibling,A.Equals(cg,null)?null:cg)))cd.insertBefore(cf,ce);};bp.RemoveNode=function(cd,ce){if(ce.parentNode===cd)cd.removeChild(ce);};bq.Value=function(cd){function ce(cf){return{$:1,$0:cf};}return bq.CustomValue(cd,a.id,function(cf){return ce(a.id(cf));});};bq.CustomValue=function(cd,ce,cf){return bq.CustomVar(cd,function(cg,ch){cg.value=ce(ch);},function(cg){return cf(cg.value);});};bq.CustomVar=function(cd,ce,cf){function cg(ci,cj){return cd.UpdateMaybe(function(ck){var cl,cm;cl=cf(ci);return cl!=null&&cl.$==1&&(!A.Equals(cl.$0,ck)&&(cm=[cl,cl.$0],true))?cm[0]:null;});}function ch(ci,cj){var ck,cl;ck=cf(ci);return ck!=null&&ck.$==1&&(A.Equals(ck.$0,cj)&&(cl=ck.$0,true))?null:ce(ci,cj);}return ba.Concat([bq.Handler("change",function(ci){return function(cj){return cg(ci,cj);};}),bq.Handler("input",function(ci){return function(cj){return cg(ci,cj);};}),bq.Handler("keypress",function(ci){return function(cj){return cg(ci,cj);};}),bq.DynamicCustom(function(ci){return function(cj){return ch(ci,cj);};},cd.get_View())]);};bq.Handler=function(cd,ce){return bo.Static(function(cf){cf.addEventListener(cd,function(cg){return(ce(cf))(cg);},false);});};bq.DynamicCustom=function(cd,ce){return bo.Dynamic(ce,cd);};br.CreateTextNode=function(){return{Text:bp.CreateText(""),Dirty:false,Value:""};};br.UpdateTextNode=function(cd,ce){cd.Value=ce;cd.Dirty=true;};br.LinkElement=function(cd,ce){br.InsertDoc(cd,ce,null);};br.CreateEmbedNode=function(){return{Current:null,Dirty:false};};br.UpdateEmbedNode=function(cd,ce){cd.Current=ce;cd.Dirty=true;};br.InsertDoc=function(cd,ce,cf){var cg;return ce!=null&&ce.$==1?br.InsertNode(cd,ce.$0.El,cf):ce!=null&&ce.$==2?(cg=ce.$0,(cg.Dirty=false,br.InsertDoc(cd,cg.Current,cf))):ce==null?cf:ce!=null&&ce.$==4?br.InsertNode(cd,ce.$0.Text,cf):ce!=null&&ce.$==5?br.InsertNode(cd,ce.$0,cf):ce!=null&&ce.$==6?M.foldBack(function(ch,ci){return ch==null||ch.constructor===bf?br.InsertDoc(cd,ch,ci):br.InsertNode(cd,ch,ci);},ce.$0.Els,cf):br.InsertDoc(cd,ce.$0,br.InsertDoc(cd,ce.$1,cf));};br.CreateRunState=function(cd,ce){return bP.New(bQ.get_Empty(),br.CreateElemNode(cd,bo.EmptyAttr(),ce));};br.PerformAnimatedUpdate=function(cd,ce,cf){var cg;return bA.get_UseAnimations()?(cg=null,$.Delay(function(){var ch,ci,cj;ch=bQ.FindAll(cf);ci=br.ComputeChangeAnim(ce,ch);cj=br.ComputeEnterAnim(ce,ch);return $.Bind(bA.Play(bA.Append(ci,br.ComputeExitAnim(ce,ch))),function(){return $.Bind(br.SyncElemNodesNextFrame(cd,ce),function(){return $.Bind(bA.Play(cj),function(){ce.PreviousNodes=ch;return $.Return(null);});});});})):br.SyncElemNodesNextFrame(cd,ce);};br.PerformSyncUpdate=function(cd,ce,cf){var cg;cg=bQ.FindAll(cf);br.SyncElemNode(cd,ce.Top);ce.PreviousNodes=cg;};br.InsertNode=function(cd,ce,cf){bp.InsertAt(cd,cf,ce);return ce;};br.CreateElemNode=function(cd,ce,cf){var cg;br.LinkElement(cd,cf);cg=bo.Insert(cd,ce);return bI.New(cg,cf,null,cd,be.Int(),b_.GetOptional(cg.OnAfterRender));};br.SyncElemNodesNextFrame=function(cd,ce){function cf(cg){a.requestAnimationFrame(function(){br.SyncElemNode(cd,ce.Top);cg();});}return bB.BatchUpdatesEnabled()?$.FromContinuations(function(cg,ch,ci){return cf.apply(null,[cg,ch,ci]);}):(br.SyncElemNode(cd,ce.Top),$.Return(null));};br.ComputeExitAnim=function(cd,ce){return bA.Concat(M.map(function(cf){return bo.GetExitAnim(cf.Attr);},bQ.ToArray(bQ.Except(ce,bQ.Filter(function(cf){return bo.HasExitAnim(cf.Attr);},cd.PreviousNodes)))));};br.ComputeEnterAnim=function(cd,ce){return bA.Concat(M.map(function(cf){return bo.GetEnterAnim(cf.Attr);},bQ.ToArray(bQ.Except(cd.PreviousNodes,bQ.Filter(function(cf){return bo.HasEnterAnim(cf.Attr);},ce)))));};br.ComputeChangeAnim=function(cd,ce){var cf;function cg(ch){return bo.HasChangeAnim(ch.Attr);}cf=function(ch){return bQ.Filter(cg,ch);};return bA.Concat(M.map(function(ch){return bo.GetChangeAnim(ch.Attr);},bQ.ToArray(bQ.Intersect(cf(cd.PreviousNodes),cf(ce)))));};br.SyncElemNode=function(cd,ce){!cd?br.SyncElement(ce):void 0;br.Sync(ce.Children);br.AfterRender(ce);};br.SyncElement=function(cd){function ce(cf){function cg(ch){var ci,cj;return ch!=null&&ch.$==0?cg(ch.$0)||cg(ch.$1):ch!=null&&ch.$==2?(ci=ch.$0,ci.Dirty||cg(ci.Current)):ch!=null&&ch.$==6&&(cj=ch.$0,cj.Dirty||M.exists(ce,cj.Holes));}return cg(cf.Children);}bo.Sync(cd.El,cd.Attr);ce(cd)?br.DoSyncElement(cd):void 0;};br.Sync=function(cd){var ce,cf;if(cd!=null&&cd.$==1)br.SyncElemNode(false,cd.$0);else if(cd!=null&&cd.$==2)br.Sync(cd.$0.Current);else if(cd==null);else if(cd!=null&&cd.$==5);else if(cd!=null&&cd.$==4){ce=cd.$0;ce.Dirty?(ce.Text.nodeValue=ce.Value,ce.Dirty=false):void 0;}else if(cd!=null&&cd.$==6){cf=cd.$0;M.iter(function(cg){br.SyncElemNode(false,cg);},cf.Holes);M.iter(function(cg){bo.Sync(cg[0],cg[1]);},cf.Attrs);br.AfterRender(cf);}else{br.Sync(cd.$0);br.Sync(cd.$1);}};br.AfterRender=function(cd){var ce;ce=b_.GetOptional(cd.Render);ce!=null&&ce.$==1?(ce.$0(cd.El),b_.SetOptional(cd,"Render",null)):void 0;};br.DoSyncElement=function(cd){var ce,cf,cg;function ch(ci,cj){var ck,cl;return ci!=null&&ci.$==1?ci.$0.El:ci!=null&&ci.$==2?(ck=ci.$0,ck.Dirty?(ck.Dirty=false,br.InsertDoc(ce,ck.Current,cj)):ch(ck.Current,cj)):ci==null?cj:ci!=null&&ci.$==4?ci.$0.Text:ci!=null&&ci.$==5?ci.$0:ci!=null&&ci.$==6?(cl=ci.$0,(cl.Dirty?cl.Dirty=false:void 0,M.foldBack(function(cm,cn){return cm==null||cm.constructor===bf?ch(cm,cn):cm;},cl.Els,cj))):ch(ci.$0,ch(ci.$1,cj));}ce=cd.El;b4.Iter((cf=cd.El,function(ci){bp.RemoveNode(cf,ci);}),b4.Except(b4.DocChildren(cd),b4.Children(cd.El,b_.GetOptional(cd.Delimiters))));ch(cd.Children,(cg=b_.GetOptional(cd.Delimiters),cg!=null&&cg.$==1?cg.$0[1]:null));};bt=bs.Dictionary=b_.Class({set_Item:function(cd,ce){this.set(cd,ce);},ContainsKey:function(cd){var ce,cf;ce=this;cf=this.data[this.hash(cd)];return cf==null?false:M.exists(function(cg){return ce.equals.apply(null,[(z.KeyValue(cg))[0],cd]);},cf);},TryGetValue:function(cd,ce){var cf,cg,ch;cf=this;cg=this.data[this.hash(cd)];return cg==null?false:(ch=M.tryPick(function(ci){var cj;cj=z.KeyValue(ci);return cf.equals.apply(null,[cj[0],cd])?{$:1,$0:cj[1]}:null;},cg),ch!=null&&ch.$==1&&(ce.set(ch.$0),true));},Remove:function(cd){return this.remove(cd);},get_Keys:function(){return new bN.New(this);},set:function(cd,ce){var cf,cg,ch,ci;cf=this;cg=this.hash(cd);ch=this.data[cg];ch==null?(this.count=this.count+1,this.data[cg]=new a.Array({K:cd,V:ce})):(ci=M.tryFindIndex(function(cj){return cf.equals.apply(null,[(z.KeyValue(cj))[0],cd]);},ch),ci==null?(this.count=this.count+1,ch.push({K:cd,V:ce})):ch[ci.$0]={K:cd,V:ce});},remove:function(cd){var ce,cf,cg,ch;ce=this;cf=this.hash(cd);cg=this.data[cf];return cg==null?false:(ch=M.filter(function(ci){return!ce.equals.apply(null,[(z.KeyValue(ci))[0],cd]);},cg),M.length(ch)<cg.length&&(this.count=this.count-1,this.data[cf]=ch,true));},get_Item:function(cd){return this.get(cd);},get:function(cd){var ce,cf;ce=this;cf=this.data[this.hash(cd)];return cf==null?bL.notPresent():M.pick(function(cg){var ch;ch=z.KeyValue(cg);return ce.equals.apply(null,[ch[0],cd])?{$:1,$0:ch[1]}:null;},cf);},GetEnumerator:function(){return bh.Get0(this);},GetEnumerator0:function(){return bh.Get0(M.concat(Z.GetFieldValues(this.data)));}},m,bt);bt.New$5=b_.Ctor(function(){bt.New$6.call(this,[],A.Equals,A.Hash);},bt);bt.New$6=b_.Ctor(function(cd,ce,cf){var cg,ch;m.New.call(this);this.equals=ce;this.hash=cf;this.count=0;this.data=[];cg=bh.Get(cd);try{while(cg.MoveNext()){ch=cg.Current();this.set(ch.K,ch.V);}}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}},bt);bu.New=function(cd,ce){return{c:cd,r:ce};};bv=$.Scheduler=b_.Class({Fork:function(cd){var ce;ce=this;this.robin.push(cd);this.idle?(this.idle=false,a.setTimeout(function(){ce.tick();},0)):void 0;},tick:function(){var cd,ce,cf;ce=this;cf=cc.now();cd=true;while(cd)if(this.robin.length===0){this.idle=true;cd=false;}else{(this.robin.shift())();cc.now()-cf>40?(a.setTimeout(function(){ce.tick();},0),cd=false):void 0;}}},m,bv);bv.New=b_.Ctor(function(){m.New.call(this);this.idle=true;this.robin=[];},bv);bw.$cctor=function(){bw.$cctor=a.ignore;bw.noneCT=bu.New(false,[]);bw.scheduler=new bv.New();bw.defCTS=[new bH.New()];bw.Zero=$.Return();bw.GetCT=function(cd){cd.k({$:0,$0:cd.ct});};};bx.$cctor=function(){bx.$cctor=a.ignore;bx.counter=0;};by.$cctor=function(){by.$cctor=a.ignore;by.LoadedTemplates=new bt.New$5();by.LocalTemplatesLoaded=false;by.TextHoleRE="\\${([^}]+)}";};bz=bs.HashSet=b_.Class({Add:function(cd){return this.add(cd);},Contains:function(cd){var ce;ce=this.data[this.hash(cd)];return ce==null?false:this.arrContains(cd,ce);},add:function(cd){var ce,cf;ce=this.hash(cd);cf=this.data[ce];return cf==null?(this.data[ce]=[cd],this.count=this.count+1,true):this.arrContains(cd,cf)?false:(cf.push(cd),this.count=this.count+1,true);},arrContains:function(cd,ce){var cf,cg,ch,ci;cf=true;cg=0;ci=ce.length;while(cf&&cg<ci)if(this.equals.apply(null,[ce[cg],cd]))cf=false;else cg=cg+1;return!cf;},ExceptWith:function(cd){var ce;ce=bh.Get(cd);try{while(ce.MoveNext())this.Remove(ce.Current());}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cd){var ce,cf,cg,ch;ce=0;cf=b2.concat(this.data);for(cg=0,ch=cf.length-1;cg<=ch;cg++)M.set(cd,cg,cf[cg]);},IntersectWith:function(cd){var ce,cf,cg,ch,ci;ce=new bz.New$4(cd,this.equals,this.hash);cf=b2.concat(this.data);for(cg=0,ch=cf.length-1;cg<=ch;cg++){ci=cf[cg];!ce.Contains(ci)?this.Remove(ci):void 0;}},Remove:function(cd){var ce;ce=this.data[this.hash(cd)];return ce==null?false:this.arrRemove(cd,ce)&&(this.count=this.count-1,true);},arrRemove:function(cd,ce){var cf,cg,ch,ci;cf=true;cg=0;ci=ce.length;while(cf&&cg<ci)if(this.equals.apply(null,[ce[cg],cd])){ce.splice.apply(ce,[cg,1]);cf=false;}else cg=cg+1;return!cf;},GetEnumerator:function(){return bh.Get(b2.concat(this.data));},GetEnumerator0:function(){return bh.Get(b2.concat(this.data));}},m,bz);bz.New$3=b_.Ctor(function(){bz.New$4.call(this,[],A.Equals,A.Hash);},bz);bz.New$4=b_.Ctor(function(cd,ce,cf){var cg;m.New.call(this);this.equals=ce;this.hash=cf;this.data=[];this.count=0;cg=bh.Get(cd);try{while(cg.MoveNext())this.add(cg.Current());}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}},bz);bz.New$2=b_.Ctor(function(cd){bz.New$4.call(this,cd,A.Equals,A.Hash);},bz);bA.get_UseAnimations=function(){return bR.UseAnimations();};bA.Play=function(cd){var ce;ce=null;return $.Delay(function(){return $.Bind(bA.Run(a.ignore,bR.Actions(cd)),function(){bR.Finalize(cd);return $.Return(null);});});};bA.Append=function(cd,ce){return{$:0,$0:bY.Append(cd.$0,ce.$0)};};bA.Run=function(cd,ce){var cf;function cg(ch){function ci(cj,ck){var cl;cl=ck-cj;ce.Compute(cl);cd();return cl<=cf?void a.requestAnimationFrame(function(cm){ci(cj,cm);}):ch();}a.requestAnimationFrame(function(cj){ci(cj,cj);});}cf=ce.Duration;return cf===0?$.Zero():$.FromContinuations(function(ch,ci,cj){return cg.apply(null,[ch,ci,cj]);});};bA.Concat=function(cd){return{$:0,$0:bY.Concat(Q.map(bR.List,cd))};};bA.get_Empty=function(){return{$:0,$0:bY.Empty()};};bB.BatchUpdatesEnabled=function(){bS.$cctor();return bS.BatchUpdatesEnabled;};bC.StartProcessor=function(cd){var ce;function cf(){var cg;cg=null;return $.Delay(function(){return $.Bind(cd,function(){var ch;ch=ce[0];return ch===1?(ce[0]=0,$.Zero()):ch===2?(ce[0]=1,cf()):$.Zero();});});}ce=[0];return function(){var cg;cg=ce[0];cg===0?(ce[0]=1,$.Start(cf(),null)):cg===1?ce[0]=2:void 0;};};bE=l.OperationCanceledException=b_.Class({},bD,bE);bE.New=b_.Ctor(function(cd){bE.New$1.call(this,"The operation was canceled.",null,cd);},bE);bE.New$1=b_.Ctor(function(cd,ce,cf){this.message=cd;this.inner=ce;bf.setPrototypeOf(this,bE.prototype);this.ct=cf;},bE);bF=w.Elt=b_.Class({},bb,bF);bF.New=function(cd,ce,cf){var cg,ch;cg=br.CreateElemNode(cd,ce,cf.docNode);ch=bT.Create(cf.updates);return new bF.New$1({$:1,$0:cg},y.Map2Unit(bo.Updates(cg.Attr),ch.v),cd,ch);};bF.New$1=b_.Ctor(function(cd,ce,cf,cg){bb.New.call(this,cd,ce);this.docNode$1=cd;this.updates$1=ce;this.elt=cf;this.rvUpdates=cg;},bF);bG.ofSeqNonCopying=function(cd){var ce,cf;if(cd instanceof a.Array)return cd;else if(cd instanceof _9)return M.ofList(cd);else if(cd===null)return[];else{ce=[];cf=bh.Get(cd);try{while(cf.MoveNext())ce.push(cf.Current());return ce;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}}};bG.TreeReduce=function(cd,ce,cf){var cg;function ch(ci,cj){var ck,cl;return cj<=0?cd:cj===1&&(ci>=0&&ci<cg)?M.get(cf,ci):(cl=cj/2>>0,ce(ch(ci,cl),ch(ci+cl,cj-cl)));}cg=M.length(cf);return ch(0,cg);};bG.MapTreeReduce=function(cd,ce,cf,cg){var ch;function ci(cj,ck){var cl,cm;return ck<=0?ce:ck===1&&(cj>=0&&cj<ch)?cd(M.get(cg,cj)):(cm=ck/2>>0,cf(ci(cj,cm),ci(cj+cm,ck-cm)));}ch=M.length(cg);return ci(0,ch);};bH=l.CancellationTokenSource=b_.Class({},m,bH);bH.New=b_.Ctor(function(){m.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bH);bI=w.DocElemNode=b_.Class({Equals:function(cd){return this.ElKey===cd.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bI);bI.New=function(cd,ce,cf,cg,ch,ci){var cj;return new bI((cj={Attr:cd,Children:ce,El:cg,ElKey:ch},(b_.SetOptional(cj,"Delimiters",cf),b_.SetOptional(cj,"Render",ci),cj)));};bK.$cctor=function(){bK.$cctor=a.ignore;bK.Doc=self.document;};bL.notPresent=function(){return z.FailWith("The given key was not present in the dictionary.");};bM.convertTextNode=function(cd){var ce,cf,cg,ch,ci,cj;ce=null;cf=0;ch=cd.textContent;ci=new a.RegExp(bk.TextHoleRE(),"g");while(ce=ci.exec(ch),ce!==null){cd.parentNode.insertBefore(self.document.createTextNode(_7.string(ch,{$:1,$0:cf},{$:1,$0:ci.lastIndex-M.get(ce,0).length-1})),cd);cf=ci.lastIndex;cj=self.document.createElement("span");cj.setAttribute("ws-replace",M.get(ce,1).toLowerCase());cd.parentNode.insertBefore(cj,cd);}ci.lastIndex=0;cd.textContent=_7.string(ch,{$:1,$0:cf},null);};bM.failNotLoaded=function(cd){ca.warn("Instantiating non-loaded template",cd);};bM.fillTextHole=function(cd,ce,cf){var cg;cg=cd.querySelector("[ws-replace]");return A.Equals(cg,null)?(ca.warn("Filling non-existent text hole",cf),null):(cg.parentNode.replaceChild(new a.Text(ce),cg),{$:1,$0:cg.getAttribute("ws-replace")});};bM.removeHolesExcept=function(cd,ce){function cf(cg){bp.IterSelector(cd,"["+cg+"]",function(ch){if(!ce.Contains(ch.getAttribute(cg)))ch.removeAttribute(cg);});}cf("ws-attr");cf("ws-onafterrender");cf("ws-var");bp.IterSelector(cd,"[ws-hole]",function(cg){if(!ce.Contains(cg.getAttribute("ws-hole"))){cg.removeAttribute("ws-hole");while(cg.hasChildNodes())cg.removeChild(cg.lastChild);}});bp.IterSelector(cd,"[ws-replace]",function(cg){if(!ce.Contains(cg.getAttribute("ws-replace")))cg.parentNode.removeChild(cg);});bp.IterSelector(cd,"[ws-on]",function(cg){cg.setAttribute("ws-on",_6.concat(" ",M.filter(function(ch){return ce.Contains(M.get(_6.SplitChars(ch,[":"],1),1));},_6.SplitChars(cg.getAttribute("ws-on"),[" "],1))));});bp.IterSelector(cd,"[ws-attr-holes]",function(cg){var ch,ci,cj,ck,cl;ch=_6.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=M.get(ch,ci);cg.setAttribute(ck,(cl=new a.RegExp(bk.TextHoleRE(),"g"),cg.getAttribute(ck).replace(cl,function(cm,cn){return ce.Contains(cn)?cm:"";})));}});};bM.fillInstanceAttrs=function(cd,ce){var cf,cg,ch,ci,cj;bM.convertAttrs(ce);cf=ce.nodeName.toLowerCase();cg=cd.querySelector("[ws-attr="+cf+"]");if(A.Equals(cg,null))ca.warn("Filling non-existent attr hole",cf);else{cg.removeAttribute("ws-attr");for(ch=0,ci=ce.attributes.length-1;ch<=ci;ch++){cj=ce.attributes.item(ch);cj.name==="class"&&cg.hasAttribute("class")?cg.setAttribute("class",cg.getAttribute("class")+" "+cj.nodeValue):cg.setAttribute(cj.name,cj.nodeValue);}}};bM.mapHoles=function(cd,ce){function cf(cg){bp.IterSelector(cd,"["+cg+"]",function(ch){var ci,cj;ci=(cj=null,[ce.TryGetValue(ch.getAttribute(cg).toLowerCase(),{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);ci[0]?ch.setAttribute(cg,ci[1]):void 0;});}cf("ws-hole");cf("ws-replace");cf("ws-attr");cf("ws-onafterrender");cf("ws-var");bp.IterSelector(cd,"[ws-on]",function(cg){cg.setAttribute("ws-on",_6.concat(" ",M.map(function(ch){var ci,cj,ck;ci=_6.SplitChars(ch,[":"],1);cj=(ck=null,[ce.TryGetValue(M.get(ci,1),{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]);return cj[0]?M.get(ci,0)+":"+cj[1]:ch;},_6.SplitChars(cg.getAttribute("ws-on"),[" "],1))));});bp.IterSelector(cd,"[ws-attr-holes]",function(cg){var ch,ci,cj;ch=_6.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);for(ci=0,cj=ch.length-1;ci<=cj;ci++)(function(){var ck;function cl(cm,cn){var co;co=z.KeyValue(cn);return cm.replace(new a.RegExp("\\${"+co[0]+"}","ig"),"${"+co[1]+"}");}ck=M.get(ch,ci);return cg.setAttribute(ck,(((b_.Curried3(Q.fold))(cl))(cg.getAttribute(ck)))(ce));}());});};bM.fill=function(cd,ce,cf){while(true)if(cd.hasChildNodes())cf=ce.insertBefore(cd.lastChild,cf);else return null;};bM.convertAttrs=function(cd){var cf,cg,ch,ci,cj,ck,cl,cm;function ce(cn){var co;co=cd.getAttribute(cn);co===null?void 0:cd.setAttribute(cn,co.toLowerCase());}cf=cd.attributes;cg=[];ch=[];ci=[];for(cj=0,ck=cf.length-1;cj<=ck;cj++){cl=cf.item(cj);_6.StartsWith(cl.nodeName,"ws-on")&&cl.nodeName!=="ws-onafterrender"&&cl.nodeName!=="ws-on"?(cg.push(cl.nodeName),ch.push(_7.string(cl.nodeName,{$:1,$0:"ws-on".length},null)+":"+cl.nodeValue.toLowerCase())):!_6.StartsWith(cl.nodeName,"ws-")&&(new a.RegExp(bk.TextHoleRE())).test(cl.nodeValue)?(cl.nodeValue=(cm=new a.RegExp(bk.TextHoleRE(),"g"),cl.nodeValue.replace(cm,function(cn,co){return"${"+co.toLowerCase()+"}";})),ci.push(cl.nodeName)):void 0;}!(ch.length==0)?cd.setAttribute("ws-on",_6.concat(" ",ch)):void 0;!(ci.length==0)?cd.setAttribute("ws-attr-holes",_6.concat(" ",ci)):void 0;ce("ws-hole");ce("ws-replace");ce("ws-attr");ce("ws-onafterrender");ce("ws-var");M.iter(function(cn){cd.removeAttribute(cn);},cg);};Q.insufficient=function(){return z.FailWith("The input sequence has an insufficient number of elements.");};bN=bs.KeyCollection=b_.Class({GetEnumerator$1:function(){return bh.Get(Q.map(function(cd){return cd.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},m,bN);bN.New=b_.Ctor(function(cd){m.New.call(this);this.d=cd;},bN);bP.New=function(cd,ce){return{PreviousNodes:cd,Top:ce};};bQ.get_Empty=function(){return{$:0,$0:new bz.New$3()};};bQ.FindAll=function(cd){var ce;function cf(ch){if(ch!=null&&ch.$==0){cf(ch.$0);cf(ch.$1);}else if(ch!=null&&ch.$==1)cg(ch.$0);else if(ch!=null&&ch.$==2)cf(ch.$0.Current);else if(ch!=null&&ch.$==6)M.iter(cg,ch.$0.Holes);}function cg(ch){ce.push(ch);cf(ch.Children);}ce=[];cf(cd);return{$:0,$0:new bz.New$2(ce)};};bQ.Filter=function(cd,ce){return{$:0,$0:b1.Filter(cd,ce.$0)};};bQ.Except=function(cd,ce){return{$:0,$0:b1.Except(cd.$0,ce.$0)};};bQ.ToArray=function(cd){return b1.ToArray(cd.$0);};bQ.Intersect=function(cd,ce){return{$:0,$0:b1.Intersect(cd.$0,ce.$0)};};bR.UseAnimations=function(){bX.$cctor();return bX.UseAnimations;};bR.Actions=function(cd){return bR.ConcatActions(M.choose(function(ce){return ce.$==1?{$:1,$0:ce.$0}:null;},bY.ToArray(cd.$0)));};bR.Finalize=function(cd){M.iter(function(ce){if(ce.$==0)ce.$0();},bY.ToArray(cd.$0));};bR.ConcatActions=function(cd){var ce,cf,cg,ch;ce=bG.ofSeqNonCopying(cd);cf=M.length(ce);return cf===0?bR.Const():cf===1?M.get(ce,0):(cg=Q.max(Q.map(function(ci){return ci.Duration;},ce)),(ch=M.map(function(ci){return bR.Prolong(cg,ci);},ce),bR.Def(cg,function(ci){M.iter(function(cj){cj.Compute(ci);},ch);})));};bR.List=function(cd){return cd.$0;};bR.Const=function(cd){return bR.Def(0,function(){return cd;});};bR.Def=function(cd,ce){return{Compute:ce,Duration:cd};};bR.Prolong=function(cd,ce){var cf,cg,ch;cf=ce.Compute;cg=ce.Duration;ch=b5.Create(function(){return ce.Compute(ce.Duration);});return{Compute:function(ci){return ci>=cg?ch.f():cf(ci);},Duration:cd};};bS.$cctor=function(){bS.$cctor=a.ignore;bS.BatchUpdatesEnabled=true;};bT=w.Updates=b_.Class({},null,bT);bT.Create=function(cd){var ce;ce=null;ce=bT.New(cd,null,function(){var cf;cf=ce.s;return cf===null?(cf=_0.Copy(ce.c()),ce.s=cf,_0.WhenObsoleteRun(cf,function(){ce.s=null;}),cf):cf;});return ce;};bT.New=function(cd,ce,cf){return new bT({c:cd,s:ce,v:cf});};bV.New=function(cd,ce,cf,cg){var ch;ch={DynElem:cd,DynFlags:ce,DynNodes:cf};b_.SetOptional(ch,"OnAfterRender",cg);return ch;};bW.Clear=function(cd){cd.splice(0,M.length(cd));};bX.$cctor=function(){bX.$cctor=a.ignore;bX.CubicInOut=b0.Custom(function(cd){var ce;ce=cd*cd;return 3*ce-2*(ce*cd);});bX.UseAnimations=true;};bY.Append=function(cd,ce){return cd.$==0?ce:ce.$==0?cd:{$:2,$0:cd,$1:ce};};bY.ToArray=function(cd){var ce;function cf(cg){if(cg.$==1)ce.push(cg.$0);else if(cg.$==2){cf(cg.$0);cf(cg.$1);}else if(cg.$==3)M.iter(function(ch){ce.push(ch);},cg.$0);}ce=[];cf(cd);return ce.slice(0);};bY.Concat=function(cd){var ce;ce=bG.ofSeqNonCopying(cd);return bG.TreeReduce(bY.Empty(),bY.Append,ce);};bY.Empty=function(){b6.$cctor();return b6.Empty;};bZ.$cctor=function(){bZ.$cctor=a.ignore;bZ.EmptyAttr=null;};b0=w.Easing=b_.Class({},m,b0);b0.Custom=function(cd){return new b0.New(cd);};b0.New=b_.Ctor(function(cd){m.New.call(this);this.transformTime=cd;},b0);b1.Filter=function(cd,ce){return new bz.New$2(M.filter(cd,b1.ToArray(ce)));};b1.Except=function(cd,ce){var cf;cf=new bz.New$2(b1.ToArray(ce));cf.ExceptWith(b1.ToArray(cd));return cf;};b1.ToArray=function(cd){var ce;ce=M.create(cd.get_Count(),void 0);cd.CopyTo(ce);return ce;};b1.Intersect=function(cd,ce){var cf;cf=new bz.New$2(b1.ToArray(cd));cf.IntersectWith(b1.ToArray(ce));return cf;};b2.concat=function(cd){var ce,cf;ce=[];for(var cg in cd)ce.push.apply(ce,cd[cg]);return ce;};b3=w.DynamicAttrNode=b_.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cd){return bA.get_Empty();},NGetEnterAnim:function(cd){return bA.get_Empty();},NGetChangeAnim:function(cd){return bA.get_Empty();},NSync:function(cd){if(this.dirty){(this.push(cd))(this.value);this.dirty=false;}}},m,b3);b3.New=b_.Ctor(function(cd,ce){var cf;cf=this;m.New.call(this);this.push=ce;this.value=void 0;this.dirty=false;this.updates=y.Map(function(cg){cf.value=cg;cf.dirty=true;},cd);},b3);b4.Children=function(cd,ce){var cf,cg,ch;if(ce!=null&&ce.$==1){ch=[];cf=ce.$0[0].nextSibling;while(cf!==ce.$0[1]){ch.push(cf);cf=cf.nextSibling;}return{$:0,$0:ch};}else return{$:0,$0:M.init(cd.childNodes.length,(cg=cd.childNodes,function(ci){return cg[ci];}))};};b4.Except=function(cd,ce){var cf;cf=cd.$0;return{$:0,$0:M.filter(function(cg){return M.forall(function(ch){return!(cg===ch);},cf);},ce.$0)};};b4.Iter=function(cd,ce){M.iter(cd,ce.$0);};b4.DocChildren=function(cd){var ce;function cf(cg){if(cg!=null&&cg.$==2)cf(cg.$0.Current);else if(cg!=null&&cg.$==1)ce.push(cg.$0.El);else if(cg==null);else if(cg!=null&&cg.$==5)ce.push(cg.$0);else if(cg!=null&&cg.$==4)ce.push(cg.$0.Text);else if(cg!=null&&cg.$==6)M.iter(function(ch){if(ch==null||ch.constructor===bf)cf(ch);else ce.push(ch);},cg.$0.Els);else{cf(cg.$0);cf(cg.$1);}}ce=[];cf(cd.Children);return{$:0,$0:bG.ofSeqNonCopying(ce)};};b5.Create=function(cd){return b8.New(false,cd,b5.forceLazy);};b5.forceLazy=function(){var cd;cd=this.v();this.c=true;this.v=cd;this.f=b5.cachedLazy;return cd;};b5.cachedLazy=function(){return this.v;};b6.$cctor=function(){b6.$cctor=a.ignore;b6.Empty={$:0};};b8.New=function(cd,ce,cf){return{c:cd,v:ce,f:cf};};b_.OnLoad(function(){v.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

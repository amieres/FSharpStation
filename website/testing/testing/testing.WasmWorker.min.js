function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
importScripts(["//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"]);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
importScripts(["https://code.jquery.com/jquery-3.1.1.min.js"]);
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;a=self;b=a.FsRoot=a.FsRoot||{};c=b.WSFramework=b.WSFramework||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Var=g.Var||{};i=b.WasmLoader=b.WasmLoader||{};j=g.View=g.View||{};k=a.EventTarget;l=a.WindowOrWorkerGlobalScope;m=a.WorkerGlobalScope;n=i.WWorker=i.WWorker||{};o=i.WasmLoad=i.WasmLoad||{};p=i.Remoting=i.Remoting||{};q=p.IMessagingO=p.IMessagingO||{};r=b.AssemblyData=b.AssemblyData||{};s=i.UI=i.UI||{};t=a.Node;u=d.JavaScript=d.JavaScript||{};v=u.JS=u.JS||{};w=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};x=g.Snap=g.Snap||{};y=d.Arrays=d.Arrays||{};z=a.Event;A=d.Utils=d.Utils||{};B=i.WasmStatus=i.WasmStatus||{};C=u.Pervasives=u.Pervasives||{};D=b.LibraryJS=b.LibraryJS||{};E=D.Pojo=D.Pojo||{};F=o.GlobalModule=o.GlobalModule||{};G=d.Seq=d.Seq||{};H=g.ListModel=g.ListModel||{};I=g.HtmlModule=g.HtmlModule||{};J=I.attr=I.attr||{};K=g.Doc=g.Doc||{};L=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};M=a.GeneratedPrintf=a.GeneratedPrintf||{};N=d.Remoting=d.Remoting||{};O=N.AjaxRemotingProvider=N.AjaxRemotingProvider||{};P=g.Client=g.Client||{};Q=P.Templates=P.Templates||{};R=r.AssemblyRef=r.AssemblyRef||{};S=b.Library=b.Library||{};T=S.String=S.String||{};U=d.Strings=d.Strings||{};V=d.Slice=d.Slice||{};W=S.ParseO=S.ParseO||{};X=d.Unchecked=d.Unchecked||{};Y=d.Numeric=d.Numeric||{};Z=a.System=a.System||{};_0=Z.Guid=Z.Guid||{};_1=g.Var$1=g.Var$1||{};_2=d.Collections=d.Collections||{};_3=_2.Dictionary=_2.Dictionary||{};_4=d.List=d.List||{};_5=_4.T=_4.T||{};_6=r.AssemblyDef=r.AssemblyDef||{};_7=b.WSFrameworkTest=b.WSFrameworkTest||{};_8=d.Concurrency=d.Concurrency||{};_9=p.CustomXhrProvider=p.CustomXhrProvider||{};_=o.Require=o.Require||{};$=b.WsTranslator=b.WsTranslator||{};ba=a.XMLHttpRequestEventTarget;bb=a.ArrayBufferView;bc=d.Enumerator=d.Enumerator||{};bd=g.AttrProxy=g.AttrProxy||{};be=g.Array=g.Array||{};bf=r.AssemblyName=r.AssemblyName||{};bg=g.ViewBuilder=g.ViewBuilder||{};bh=g.Docs=g.Docs||{};bi=r.LoadAsm=r.LoadAsm||{};bj=d.DateUtil=d.DateUtil||{};bk=g.ConcreteVar=g.ConcreteVar||{};bl=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};bm=_2.DictionaryUtil=_2.DictionaryUtil||{};bn=p.ReturnQueue=p.ReturnQueue||{};bo=bc.T=bc.T||{};bp=g.Storage=g.Storage||{};bq=r.ModuleDef=r.ModuleDef||{};br=r.JSCode=r.JSCode||{};bs=_8.AsyncBody=_8.AsyncBody||{};bt=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bu=a.StartupCode$WsTranslator$WsTranslator=a.StartupCode$WsTranslator$WsTranslator||{};bv=a.Object;bw=_8.CT=_8.CT||{};bx=g.DomUtility=g.DomUtility||{};by=g.AttrModule=g.AttrModule||{};bz=g.Attrs=g.Attrs||{};bA=r.TypeName=r.TypeName||{};bB=r.TypeRef=r.TypeRef||{};bC=r.MethodDef=r.MethodDef||{};bD=r.ModuleName=r.ModuleName||{};bE=r.MethodName=r.MethodName||{};bF=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bG=_2.HashSet=_2.HashSet||{};bH=g.An=g.An||{};bI=P.Settings=P.Settings||{};bJ=g.Abbrev=g.Abbrev||{};bK=bJ.Mailbox=bJ.Mailbox||{};bL=a.FSharp=a.FSharp||{};bM=bL.Data=bL.Data||{};bN=bM.Runtime=bM.Runtime||{};bO=bN.IO=bN.IO||{};bP=bJ.Fresh=bJ.Fresh||{};bQ=N.XhrProvider=N.XhrProvider||{};bR=bp.ArrayStorage=bp.ArrayStorage||{};bS=g.DocElemNode=g.DocElemNode||{};bT=a.CharacterData;bU=_8.Scheduler=_8.Scheduler||{};bV=a.Error;bW=d.OperationCanceledException=d.OperationCanceledException||{};bX=d.CancellationTokenSource=d.CancellationTokenSource||{};bY=g.Elt=g.Elt||{};bZ=Q.Prepare=Q.Prepare||{};b0=_2.KeyCollection=_2.KeyCollection||{};b1=P.Docs=P.Docs||{};b2=b1.RunState=b1.RunState||{};b3=b1.NodeSet=b1.NodeSet||{};b4=g.Anims=g.Anims||{};b5=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};b6=d.Data=d.Data||{};b7=b6.TxtRuntime=b6.TxtRuntime||{};b8=b6.Pervasives=b6.Pervasives||{};b9=P.Attrs=P.Attrs||{};b_=b9.Dyn=b9.Dyn||{};b$=d.Json=d.Json||{};ca=g.Updates=g.Updates||{};cb=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cc=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cd=g.AppendList=g.AppendList||{};ce=d.FormatException=d.FormatException||{};cf=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};cg=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};ch=d.Queue=d.Queue||{};ci=g.Easing=g.Easing||{};cj=bJ.HashSet=bJ.HashSet||{};ck=_2.HashSetUtil=_2.HashSetUtil||{};cl=b1.DomNodes=b1.DomNodes||{};cm=g.DynamicAttrNode=g.DynamicAttrNode||{};cn=d.Lazy=d.Lazy||{};co=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cp=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};cq=cp.LazyRecord=cp.LazyRecord||{};cr=a.IntelliFactory;cs=cr&&cr.Runtime;ct=a.Date;cu=a.console;cv=a.JSON;cw=a.jQuery;cx=a.Math;c.main=function(){var cy,cz;if(!(!self.document))if(r.alreadyLoaded()){cy=K.Element("div",[],[c.mainDocInput(),r.assembliesDoc(),s.mainDoc(),K.Element("div",[],[c.mainSubDoc()])]);cz=self.document.body;Q.LoadLocalTemplates("");K.Run(cz,cy);}else r.loadTesting();};c.mainDocInput=function(){return K.Element("div",[],[K.Input([bd.Create("style","width: 100%")],c.mainDocNameVar())]);};c.mainSubDoc=function(){w.$cctor();return w.mainSubDoc;};c.mainDocNameVar=function(){w.$cctor();return w.mainDocNameVar$1;};c.mainDocVar=function(){w.$cctor();return w.mainDocVar;};e.FailWith=function(cy){throw new bV(cy);};e.KeyValue=function(cy){return[cy.K,cy.V];};f=d.Obj=cs.Class({Equals:function(cy){return this===cy;},GetHashCode:function(){return -1;}},null,f);f.New=cs.Ctor(function(){},f);h=g.Var=cs.Class({},f,h);h.New=cs.Ctor(function(){f.New.call(this);},h);i.wasmStatusV=function(){w.$cctor();return w.wasmStatusV;};i.printfn=function(cy){return cy(p.messaging().wprintfn);};j.Sink=function(cy,cz){function cA(){x.WhenRun(cz(),cy,function(){_8.scheduler().Fork(cA);});}_8.scheduler().Fork(cA);};j.Map=function(cy,cz){return j.CreateLazy(function(){return x.Map(cy,cz());});};j.get_Do=function(){return bg.B;};j.CreateLazy=function(cy){var cz;cz={c:null,o:cy};return function(){var cA,cB;cA=cz.c;return cA===null?(cA=cz.o(),cz.c=cA,(cB=cA.s,cB!=null&&cB.$==0)?cz.o=null:x.WhenObsoleteRun(cA,function(){cz.c=null;}),cA):cA;};};j.Map2Unit=function(cy,cz){return j.CreateLazy(function(){return x.Map2Unit(cy(),cz());});};j.Const=function(cy){var cz;cz=x.New({$:0,$0:cy});return function(){return cz;};};j.Bind=function(cy,cz){return j.Join(j.Map(cy,cz));};j.Join=function(cy){return j.CreateLazy(function(){return x.Join(cy());});};j.MapSeqCachedViewBy=function(cy,cz,cA){var cB;cB=[new _3.New$5()];return j.Map(function(cC){var cD,cE,cF;cD=cB[0];cE=new _3.New$5();cF=be.mapInPlace(function(cG){var cH,cI,cJ;cH=cy(cG);cI=cD.ContainsKey(cH)?(cJ=cD.get_Item(cH),(_1.Set(cJ.r,cG),cJ)):j.ConvertSeqNode(function(cK){return cz(cH,cK);},cG);cE.set_Item(cH,cI);return cI.e;},y.ofSeq(cC));cB[0]=cE;return cF;},cA);};j.ConvertSeqNode=function(cy,cz){var cA,cB;cA=_1.Create$1(cz);cB=cA.get_View();return{e:cy(cB),r:cA,w:cB};};n.receiveMessage=function(cy,cz){var cA;cA=cz.data;cA.$==1?(i.printfn(function(cB){return function(cC){return cB(A.toSafe(cC));};}))(cA.$0):cA.$==2?cy(cA.$0):p.callRunRpc(cA.$0,cA.$1);};n.terminate=function(){var cy;if(cy=n.workerO(),cy!=null&&cy.$==1){n.workerO().$0.terminate();n.set_workerO(null);i.printfn(function(cz){return cz("Worker terminated!");});i.wasmStatusV().Set(B.WasmNotLoaded);}else i.printfn(function(cz){return cz("Worker is not present");});};n.fromWorker=function(cy){var cz,cA;cz=cy.data;cz.$==1?p.returnExn0(cz.$0,cz.$1):cz.$==2?(i.printfn(function(cB){return function(cC){return cB(A.toSafe(cC));};}))(cz.$0):cz.$==3?(cA=cz.$0,!X.Equals(i.wasmStatusV().Get(),cA)?i.wasmStatusV().Set(cA):void 0):p.returnValue0(cz.$0,cz.$1);};n.set_workerO=function(cy){w.$cctor();w.workerO=cy;};n.workerO=function(){w.$cctor();return w.workerO;};o.loadInThisThread=function(cy){var cz,cA,cB;cA=!self.document;cB=i.wasmStatusV().Get();switch(cA?cB.$==3?1:cB.$==1?2:cB.$==2?4:cB.$==0?6:0:cB.$==1?1:cB.$==3?3:cB.$==4?5:cB.$==0?6:0){case 0:null;break;case 1:i.printfn(function(cC){return cC("WASM is loading");});break;case 2:i.printfn(function(cC){return cC("WASM is loading in the main thread");});break;case 3:i.printfn(function(cC){return cC("WASM is loading in a WebWorker");});break;case 4:i.printfn(function(cC){return cC("WASM is loaded in the main thread");});break;case 5:i.printfn(function(cC){return cC("WASM is loaded in a WebWorker");});break;case 6:_8.Start(_8.FromContinuations(function(cC){var cD;function cE(){o.bindWasm();i.printfn(function(cF){return cF("WASM Initialized!");});i.wasmStatusV().Set(!self.document?B.WasmWorkerLoaded:B.WasmLoaded);cC();}return _8.Start((cD=null,_8.Delay(function(){i.printfn(function(cF){return cF("Loading WASM. Hold on, this will take a while...");});i.wasmStatusV().Set(!self.document?B.WasmWorkerLoading:B.WasmLoading);return _8.Bind(_8.Sleep(50),function(){return _8.Combine(!(!self.document)?(p.installProvider(),_8.Zero()):_8.Zero(),_8.Delay(function(){self.App=E.newPojo([["init",cE]]);return _8.Bind(o.requireJsA([o.rootPath()+"mono-config.js"]),function(){return _8.Bind(o.requireJsA([o.rootPath()+"runtime.js"]),function(){var cF,cG;cF=i.printfn(function(cH){return function(cI){return cH(A.toSafe(cI));};});self.Module.print=cF;cG=i.printfn(function(cH){return function(cI){return cH(A.toSafe(cI));};});self.Module.printErr=cG;self.Module.preRun=[function(){o.preloadFiles(o.filesToPreload(cy));}];return _8.Bind(o.requireJsA([o.rootPath()+"dotnet.js"]),function(){return _8.Zero();});});});}));});})),null);}),null);break;}};o.requireJsA=function(cy){return _8.FromContinuations(function(cz){return a.requirejs(y.ofSeq(cy),cz);});};o.rootPath=function(){w.$cctor();return w.rootPath;};o.filesToPreload=function(cy){return _4.ofSeq(G.delay(function(){return G.append($.dlls(),G.delay(function(){return y.choose(function(cz){var cA;cA=T.StartsWith("-r:",cz);return cA!=null&&cA.$==1?{$:1,$0:cA.$0}:null;},U.SplitChars(cy,["\n"],0));}));}));};o.preloadFiles=function(cy){var cz,cA,cB,cC,cD,cE;self.Browser=E.newPojo([["init",a.ignore],["asyncLoad",function(cF,cG,cH){var cI;cI=new self.XMLHttpRequest();cI.open("GET",cF,true);cI.responseType="arraybuffer";cI.onload=function(){return cI.status===200||cI.status===0&&!X.Equals(cI.response,null)?cG(new a.Uint8Array(cI.response)):cH();};cI.onerror=function(){return cH();};return cI.send(null);}]]);self.Module.preloadPlugins=[];cz=G.cache(G.distinct(G.map(function(cF){return[U.concat("/",V.array(cF,null,{$:1,$0:y.length(cF)-2})),G.last(cF)];},G.map(function(cF){return y.map(U.Trim,cF);},G.map(function(cF){return U.SplitChars(U.Replace(cF,"\\","/"),["/"],0);},cy)))));G.iter(function(cF){try{self.FS.mkdir(cF);}catch(cG){null;}},G.distinct(G.map(function(cF){return cF[0];},cz)));cA=bc.Get(cz);try{while(cA.MoveNext()){cB=cA.Current();cC=cB[1];cD=cB[0];cE=U.Replace(o.rootPath()+cD+"/"+cC,"//","/");(i.printfn(function(cF){return function(cG){return cF("Preloading "+A.toSafe(cG));};}))(cE);self.FS.createPreloadedFile(cD,cC,cE,1,a.$op21);}}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};o.bindWasm=function(){G.iter(function(cy){o.bindStaticMethod(cy[0],cy[1],cy[2]);},_4.ofArray([["WsTranslator","FsRoot.WsTranslator","runRpc"]]));};o.loadWasmInWorker=function(cy){var cz;if(!self.document)i.printfn(function(cA){return cA("Already in a worker cannot load Wasm in another worker");});else if(i.wasmStatusV().Get().$!==0)(i.printfn(function(cA){return function(cB){return cA("Wasm is already "+L.p(cB));};}))(i.wasmStatusV().Get());else{i.wasmStatusV().Set(B.WasmLoading);i.printfn(function(cA){return cA("Initiating WebWorker");});cz=new a.Worker(cs.ScriptPath("testing","testing.WasmWorker.js"));cz.postMessage({$:2,$0:cy});cz.onmessage=n.fromWorker;n.set_workerO({$:1,$0:cz});p.set_messaging(q.New(function(cA){return function(cB){return cz.postMessage({$:0,$0:cA,$1:cB});};},function(cA){p.returnValue0(cA[0],cA[1]);},function(cA){p.returnExn0(cA[0],cA[1]);},p.messaging().wprintfn));p.installProvider();}};o.bindStaticMethod=function(cy,cz,cA){var cB;self[((((cs.Curried(function(cC,cD,cE,cF){return cC("WASM_"+A.toSafe(cD)+"_"+A.toSafe(cE)+"_"+A.toSafe(cF));},4))(a.id))(cy))(U.Replace(cz,".","_")))(cA)]=(cB=((((cs.Curried(function(cC,cD,cE,cF){return cC("["+A.toSafe(cD)+"]"+A.toSafe(cE)+":"+A.toSafe(cF));},4))(a.id))(cy))(cz))(cA),self.Module.mono_bind_static_method(cB));};p.set_messaging=function(cy){w.$cctor();w.messaging=cy;};p.returnValue=function(cy,cz){p.messaging().returnValue([cy,cz]);};p.returnExn=function(cy,cz){p.messaging().returnExn([cy,cz]);};p.callRunRpc=function(cy,cz){(p.messaging().runRpc(cy))(cz);};p.installProvider=function(){N.set_AjaxProvider(new _9.New());};p.messaging=function(){w.$cctor();return w.messaging;};p.returnValue0=function(cy,cz){var cA,cB,cC;cA=bn.tryGet(cy);cA==null?void 0:(cB=cA.$0,cC=cB[0],cB[1],cC(cz));};p.returnExn0=function(cy,cz){p.returnExnExn(cy,new bV(cz));};p.returnExnExn=function(cy,cz){var cA,cB;cA=bn.tryGet(cy);cA==null?void 0:(cB=cA.$0,cB[0],cB[1](cz));};p.getHeaderRpc=function(cy){return cy["x-websharper-rpc"];};q.New=function(cy,cz,cA,cB){return{runRpc:cy,returnValue:cz,returnExn:cA,wprintfn:cB};};r.alreadyLoaded=function(){return G.length((r.assemblies())["var"].Get())>0;};r.assembliesDoc=function(){return K.Concat([K.Button("Load module:",[],function(){r.loadThisModule();}),K.Input([],r.thisModuleV()),r.listAssembliesDoc(),r.currentAssembly(),r.styleDoc()]);};r.loadTesting=function(){_8.Start(r.loadAssembly(new R({$:0,$0:(function(cy){return function(cz){return cy("testing.asm?q="+A.prettyPrint(cz));};}(a.id))(ct.now())})),null);};r.assemblies=function(){w.$cctor();return w.assemblies;};r.loadThisModule=function(){_8.Start(r.loadAssembly(new R({$:0,$0:r.thisModuleV().Get()})),null);};r.thisModuleV=function(){w.$cctor();return w.thisModuleV;};r.listAssembliesDoc=function(){var cy;function cz(cA,cB){return K.Element("tr",[],[K.Element("td",[r.click(function(){r.selectedAssembly().Set({$:1,$0:cA});})],[K.TextView(j.Map(function(cC){return cC.name.get_Id();},cB))])]);}return K.Element("table",[],[(cy=r.assemblies(),K.ConvertSeqBy(cy.key,function(cA){return function(cB){return cz(cA,cB);};},cy["var"].get_View()))]);};r.currentAssembly=function(){var cy;return K.BindView(a.id,(cy=j.get_Do(),j.Bind(function(cz){return cz!=null&&cz.$==1?j.Bind(function(cA){return cA!=null&&cA.$==1?j.Const(r.assemblyDoc(cA.$0)):j.Const(K.get_Empty());},r.assemblies().TryFindByKeyAsView(cz.$0)):j.Const(K.get_Empty());},r.selectedAssembly().get_View())));};r.styleDoc=function(){return K.Element("style",_5.Empty,_4.ofArray([K.TextNode("\r\n                    .wsfmwk-alternate > * :nth-child(even) {background: #CCF}\r\n                    .wsfmwk-alternate > * :nth-child(odd ) {background: #CFC}\r\n                    .wsfmwk-alternate td { border: white ; border-style: solid ; border-width: thin}\r\n                    .wsfmwk-alternate tr { border: white ; border-style: solid ; border-width: thin}\r\n                ")]));};r.loadAssembly=function(cy){var cz;cz=null;return _8.Delay(function(){return _8.Bind(r["loadAssembly'"](r.isLoaded,function(cA){r.loadDef(cA);},function(cA){return bi.fetchAsmData(r.Folder(),cA);},cy),function(){var cA;cA=y.ofSeq((r.assemblies())["var"].Get());self.IntelliFactory.Runtime.Start();r.saveAssemblies(cA);return _8.Zero();});});};r.click=function(cy){return bd.HandlerImpl("click",function(){return function(){return cy();};});};r.selectedAssembly=function(){w.$cctor();return w.selectedAssembly;};r.assemblyDoc=function(cy){var cz,cA;function cB(cG,cH){return K.get_Empty();}function cC(cG,cH){if(cH.retType.name.get_Id()!=="Var<string>")return K.get_Empty();else try{return K.Input(_5.Empty,a["eval"]((((cs.Curried3(function(cI,cJ,cK){return cI(A.toSafe(cJ)+"."+A.toSafe(cK)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id())));}catch(cI){return K.TextNode(cI.message);}}function cD(cG,cH){var cI,cJ;if(cH.retType.name.get_Id().indexOf("<")!=-1)return K.get_Empty();else{try{cI=(cJ=a["eval"]((((cs.Curried3(function(cK,cL,cM){return cK(A.toSafe(cL)+"."+A.toSafe(cM)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id())),(function(cK){return function(cL){return cK(A.prettyPrint(cL));};}(a.id))(cJ));}catch(cK){cI=cK.message;}return K.TextNode(cI);}}function cE(cG,cH){return K.Concat([K.Button("Show",[],function(){var cI,cJ;cI=(cJ=(((cs.Curried3(function(cK,cL,cM){return cK(A.toSafe(cL)+"."+A.toSafe(cM)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id()),(function(cK){return function(cL){return cK("WebSharper.UI.Doc.Concat(["+A.toSafe(cL)+"])");};}(a.id))(cJ));_7.mainDocNameVar().Set(cI);}),K.Button("Add",[],function(){var cI,cJ,cK;cI=_7.mainDocNameVar().Get();cJ=(cK=(((cs.Curried3(function(cL,cM,cN){return cL(A.toSafe(cM)+"."+A.toSafe(cN)+"()");}))(a.id))(cG.name.get_Id2()))(cH.name.get_Id()),(((cs.Curried3(function(cL,cM,cN){return cL(A.toSafe(cM)+", "+A.toSafe(cN)+"])");}))(a.id))(V.string(cI,null,{$:1,$0:cI.length-3})))(cK));_7.mainDocNameVar().Set(cJ);})]);}function cF(cG,cH){var cI;cI=cH[1];return[[cH[0],function(cJ){return cI(cJ)&&!cG(cJ);}],function(cJ){return cI(cJ)||cG(cJ);}];}cz=(cA=_4.ofArray([[function(cG){return function(cH){return cC(cG,cH);};},function(cG){return U.StartsWith(cG.retType.name.get_Id(),"Var<")&&cG.isField;}],[function(cG){return function(cH){return cB(cG,cH);};},function(cG){return U.StartsWith(cG.retType.name.get_Id(),"View<")&&cG.isField;}],[function(cG){return function(cH){return cD(cG,cH);};},function(cG){return cG.retType.name.get_Id()!=="Doc"&&cG.isField&&!(cG.retType.name.get_Id().indexOf("->")!=-1);}],[function(cG){return function(cH){return cE(cG,cH);};},function(cG){return cG.retType.name.get_Id()==="Doc"&&(cG.isField||G.isEmpty(cG.parms));}],[function(cG){return function(cH){return cB(cG,cH);};},function(){return true;}]]),(((cs.Curried3(G.mapFold))(cF))(function(){return false;}))(cA))[0];return K.Concat([K.Element("h3",[],[K.TextNode(cy.name.get_Id())]),K.Element("div",[by.Class("wsfmwk-alternate")],_4.ofSeq(G.delay(function(){return G.collect(function(cG){var cH;cH=cG[0];return[r.methodRows(cG[1],cy,function(cI,cJ){return(cH(cI))(cJ);})];},cz);})))]);};r["loadAssembly'"]=function(cy,cz,cA,cB){var cC;cC=null;return _8.Delay(function(){return cy(cB)?_8.Zero():_8.Bind(cA(cB),function(cD){return _8.Combine(_8.For(cD.dependencies,function(cE){return _8.Bind(r["loadAssembly'"](cy,cz,cA,cE),function(){return _8.Return(null);});}),_8.Delay(function(){cz(cD);return _8.Zero();}));});});};r.isLoaded=function(cy){return r.assemblies().TryFind(function(cz){return X.Equals(cz.self,cy);})!=null;};r.loadDef=function(cy){var cz;try{cz=_4.ofSeq((r.assemblies())["var"].Get());a["eval"]((((cs.Curried3(function(cA,cB,cC){return cA("console.log('loading "+A.toSafe(cB)+" ...');"+A.toSafe(cC));}))(a.id))(cy.name.get_Id()))(cy.javaScript.get_Id()));r.assemblies().Set(new _5({$:1,$0:cy,$1:cz}));}catch(cA){((function(cB){return function(cC){return cB(A.prettyPrint(cC));};}(function(cB){cu.log(cB);}))(cA));}};r.Folder=function(){w.$cctor();return w.Folder;};r.saveAssemblies=function(cy){r.assemblies().Set(cy);};r.methodRows=function(cy,cz,cA){return K.Element("table",[bd.Create("style","font-family: monospace")],_4.ofSeq(G.delay(function(){return G.collect(function(cB){var cC;cC=G.filter(cy,cB.methods);return G.length(cC)>0?[K.Element("tr",[],_4.ofSeq(G.delay(function(){return[K.Element("td",[],_4.ofSeq(G.delay(function(){return G.append([K.Element("b",[],[K.TextNode(cB.name.get_Id2())])],G.delay(function(){return G.collect(function(cD){var cE;return[K.Element("tr",[r.click(function(){r.selectedMethod().Set({$:1,$0:[cB.name,cD.name]});})],[K.Element("td",[],[K.TextNode(cD.name.get_Id())]),K.Element("td",[],[K.TextNode(cD.isField?"":(cE=U.concat(", ",G.map(function(cF){return cF.name.get_Id();},cD.parms)),(function(cF){return function(cG){return cF("("+A.toSafe(cG)+")");};}(a.id))(cE)))]),K.Element("td",[r.nobr()],[K.TextNode(cD.isField?":":" -> ")]),K.Element("td",[],[K.TextNode(cD.retType.name.get_Id())]),K.Element("td",[],[cA(cB,cD)])])];},cC);}));})))];})))]:[];},cz.modules);})));};r.nobr=function(){return bd.Create("style","white-space: nowrap");};r.selectedMethod=function(){w.$cctor();return w.selectedMethod;};s.mainDoc=function(){var cy,cz;return K.Element("div",[],[K.Element("h1",[],[K.TextNode("HELLO WASM!")]),K.Element("h2",[],[K.TextView(j.Map(function(cA){return(function(cB){return function(cC){return cB(L.p(cC));};}(a.id))(cA);},i.wasmStatusV().get_View()))]),K.Element("span",[],[K.Button("Load as Worker",[],function(){o.loadWasmInWorker(s.optsV().Get());}),K.Button("Load in Main thread",[],function(){o.loadInThisThread(s.optsV().Get());}),K.Button("Terminate Worker",[],function(){n.terminate();})]),K.Element("div",[],[K.InputArea([],s.codeV()),K.InputArea([],s.optsV())]),K.Element("span",[],[K.Button("Check",[],function(){s.callWasmA(function(cA){return s.parseAndCheckProject(cA[0],cA[1],cA[2]);},s.getParms());}),K.Button("Translate",[],function(){s.clean();i.printfn(function(cA){return cA("Initiating translation:");});s.callWasmA(function(cA){return s.translateToJs(cA[0],cA[1],cA[2]);},s.getParms());}),K.Button("Dir",[],function(){s.callWasmA(function(cA){return(new O.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.dirRpc:-1181784350",[cA]);},"/");}),K.Button("Clean",[],function(){s.clean();})]),s.showMessages("Fsc Messages",function(cA){return function(cB){return cA(A.prettyPrint(cB));};}(a.id),s.fsErrsV().get_View()),s.showMessages("Ws  Errors",(cy=function(cA){return function(cB){return cA("("+L.p$1(cB[0])+", "+L.p$2(cB[1])+")");};}(a.id),function(cA){return cy([cA[0],cA[1]]);}),s.wsErrsV().get_View()),s.showMessages("Ws  Warnings",(cz=function(cA){return function(cB){return cA("("+L.p$1(cB[0])+", "+L.p$3(cB[1])+")");};}(a.id),function(cA){return cz([cA[0],cA[1]]);}),s.wsWrnsV().get_View()),K.Element("div",[bd.Create("style","font-family: monospace; white-space:pre")],[K.TextView(s.detailsV().get_View())])]);};s.optsV=function(){w.$cctor();return w.optsV;};s.codeV=function(){w.$cctor();return w.codeV;};s.callWasmA=function(cy,cz){var cA;_8.Start((cA=null,_8.Delay(function(){return _8.Combine(i.wasmStatusV().Get().$===0?(o.loadWasmInWorker(s.optsV().Get()),_8.Zero()):_8.Zero(),_8.Delay(function(){return _8.Bind(_8.Sleep(50),function(){return _8.Combine(_8.While(function(){var cB;cB=i.wasmStatusV().Get();return cB.$==2?false:cB.$!=4;},_8.Delay(function(){i.printfn(function(cB){return cB("Waiting for WASM to load...");});return _8.Bind(_8.Sleep(2000),function(){return _8.Return(null);});})),_8.Delay(function(){return _8.Bind(cy(cz),function(){return _8.Return(null);});}));});}));})),null);};s.parseAndCheckProject=function(cy,cz,cA){var cB;cB=null;return _8.Delay(function(){return _8.Bind((new O.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.parseAndCheckProjectRpc:-1474163089",[cy,cz,cA]),function(cC){var cD;s.fsErrsV().Set(y.ofSeq(cC[0]));s.wsErrsV().Set([]);s.wsWrnsV().Set([]);cD=(function(cE){return function(cF){return cE("("+A.prettyPrint(cF[0])+", "+A.printArray(A.prettyPrint,cF[1])+")");};}(a.id))([cC[2],cC[1]]);s.detailsV().Set(cD);return _8.Zero();});});};s.getParms=function(){return["WasmTest",y.filter(function(cy){return U.Trim(cy)!=="";},U.SplitChars("fsc.exe\n"+s.optsV().Get(),["\n"],0)),s.codeV().Get()];};s.clean=function(){s.detailsV().Set("");};s.translateToJs=function(cy,cz,cA){var cB;cB=null;return _8.Delay(function(){return _8.Bind((new O.New()).Async("WsTranslator:FsRoot.WsTranslator+Rpc.translateFsToJsRpc:957452724",[cy,cz,cA]),function(cC){var cD;cD=cC[1];s.fsErrsV().Set(cC[0]);return cD==null?(s.clean(),s.wsErrsV().Set([]),s.wsWrnsV().Set([]),_8.Zero()):(s.detailsV().Set(cD.$0[0]),s.wsErrsV().Set(y.ofSeq(cD.$0[1])),s.wsWrnsV().Set(y.ofSeq(cD.$0[2])),_8.Zero());});});};s.showMessages=function(cy,cz,cA){return K.BindView(function(cB){return y.length(cB)===0?K.get_Empty():K.Element("div",[],[K.TextNode(cy),K.Element("ol",[],[K.Concat(G.map(function(cC){return K.Element("li",[],[K.TextNode(cz(cC))]);},cB))])]);},cA);};s.fsErrsV=function(){w.$cctor();return w.fsErrsV;};s.wsErrsV=function(){w.$cctor();return w.wsErrsV;};s.wsWrnsV=function(){w.$cctor();return w.wsWrnsV;};s.detailsV=function(){w.$cctor();return w.detailsV;};v.GetFields=function(cy){var cz,cA;cz=[];for(var cB in cy)cz.push([cB,cy[cB]]);return cz;};v.GetFieldValues=function(cy){var cz,cA;cz=[];for(var cB in cy)cz.push(cy[cB]);return cz;};w.$cctor=function(){var cy,cz;w.$cctor=a.ignore;function cA(cF){return U.concat("\n",cF);}function cB(cF){return T.splitByChar("\n",cF);}function cC(cF){var cG,cH;return V.array(cF,{$:1,$0:0},{$:1,$0:(cG=0,(cH=y.length(cF)-2,X.Compare(cG,cH)===1?cG:cH))});}function cD(cF){return U.concat("\n",cF);}function cE(cF){return cF+"T00:00:00";}w.unindentStr=function(cF){return cA(T.unindent(cF));};w.skipLastLine=(cy=function(cF){return cC(cB(cF));},function(cF){return cD(cy(cF));});w.parseDateO2=(cz=W.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=bj.TryParse(cF),cH!=null&&cH.$==1&&(cG=cH.$0,true)),cG];}),function(cF){return cz(cE(cF));});w.parseDateO=W.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=bj.TryParse(cF),cH!=null&&cH.$==1&&(cG=cH.$0,true)),cG];});w.parseIntO=W.tryParseWith(function(cF){var cG;cG=0;return[Y.TryParseInt32(cF,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG];});w.parseInt64O=W.tryParseWith(function(cF){var cG;cG=0;return[Y.TryParseInt64(cF,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG];});w.parseSingleO=W.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=a.Number(cF),a.isNaN(cH)?false:(cG=cH,true)),cG];});w.parseDoubleO=W.tryParseWith(function(cF){var cG,cH;cG=0;return[(cH=a.Number(cF),a.isNaN(cH)?false:(cG=cH,true)),cG];});w.parseGuidO=W.tryParseWith(function(cF){var cG;cG=null;return[_0.TryParse(cF,{get:function(){return cG;},set:function(cH){cG=cH;}}),cG];});w["|Date|_|"]=W.parseDateO();w["|Int|_|"]=W.parseIntO();w["|Int64|_|"]=W.parseInt64O();w["|Single|_|"]=W.parseSingleO();w["|Double|_|"]=W.parseDoubleO();w["|Guid|_|"]=W.parseGuidO();w.wasmStatusV=_1.Create$1(B.WasmNotLoaded);w.originalProvider=N.AjaxProvider();w.queues=new _3.New$5();w.messaging=q.New(function(cF){return function(cG){return self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(cF,cG);};},function(cF){p.returnValue0(cF[0],cF[1]);},function(cF){p.returnExn0(cF[0],cF[1]);},function(cF){return function(cG){return cF("EARLY PRINTING!: "+A.toSafe(cG));};}(function(cF){cu.log(cF);}));w.workerO=null;w.rootPath="/WASM/publish/";w.detailsV=_1.Create$1("");w.fsErrsV=_1.Create$1([]);w.wsErrsV=_1.Create$1([]);w.wsWrnsV=_1.Create$1([]);w.codeV=_1.Create$1("\r\n    open WebSharper\r\n    open WebSharper.UI\r\n    open WebSharper.UI.Html\r\n    \r\n    let name = Var.Create \"World\"\r\n    \r\n    [< Inline \"'Hello inline '\" >]\r\n    let bDoc() = \"Hello\"\r\n    \r\n    let cDoc() = text name.V\r\n    \r\n    let aDoc() = \r\n        div [] [\r\n            text <| bDoc()\r\n            cDoc()\r\n        ]\r\n    \r\n            ");w.optsV=_1.Create$1(U.concat("\n",G.map(U.Trim,U.SplitChars("\r\n                                    /tmp/source.fsx\r\n                                    -o:source.exe\r\n                                    --simpleresolution\r\n                                    --nowarn:3186\r\n                                    --optimize-\r\n                                    --noframework\r\n                                    --fullpaths\r\n                                    --warn:3\r\n                                    --target:exe\r\n                                    -r:/dlls/WebSharper.Core.dll\r\n                                    -r:/dlls/WebSharper.UI.dll\r\n                                    -r:/dlls/WebSharper.Sitelets.dll\r\n                                    -r:/managed/FSharp.Core.dll\r\n                                    -r:/managed/mscorlib.dll\r\n                                    -r:/managed/netstandard.dll\r\n                                    -r:/managed/System.dll\r\n                                    -r:/managed/System.Core.dll\r\n                                    -r:/managed/System.IO.dll\r\n                                    -r:/managed/System.Runtime.dll\r\n                                    -r:/managed/System.Net.Http.dll\r\n                                    -r:/managed/System.Threading.dll\r\n                                    -r:/managed/System.Numerics.dll\r\n                                ",["\n"],0))));!(!self.document)?p.set_messaging(q.New(p.messaging().runRpc,p.messaging().returnValue,p.messaging().returnExn,function(cF){var cG;cu.log(cF);cG=s.detailsV().Get();s.detailsV().Set(cG+(cG===""?"":"\n")+cF);})):void 0;w.testVar=_1.Create$1("Hello WSFrameWork");w.mainDocNameVar=_1.Create$1("FsRoot.TestingJS.WSFrameworkTest.mainDoc()");w.assemblies=H.Create(function(cF){return cF.name;},_5.Empty);w.Folder="/EPFileX/Assemblies/";w.thisModuleV=_1.Create$1("Covid.asm");w.selectedAssembly=_1.Create$1(null);w.selectedMethod=_1.Create$1(null);w.mainDocNameVar$1=_7.mainDocNameVar();w.mainDocVar=_1.Create$1(K.Element("h1",[],[K.TextNode("mainDocVar not initialized")]));j.Sink(function(cF){var cG;try{cG=a["eval"](cF);cG instanceof K?c.mainDocVar().Set(cG):typeof cG=="string"?c.mainDocVar().Set(K.TextNode(cG)):cG instanceof h?c.mainDocVar().Set(K.TextView(cG.get_View())):cG instanceof j?c.mainDocVar().Set(K.TextView(cG)):cu.log("mainDocNameVar type mismatch: ",cG);}catch(cH){((function(cI){return function(cJ){return cI(A.prettyPrint(cJ));};}(function(cI){cu.log(cI);}))(cH));}},c.mainDocNameVar().get_View());w.mainSubDoc=K.BindView(a.id,c.mainDocVar().get_View());};x.WhenRun=function(cy,cz,cA){var cB;cB=cy.s;cB==null?cA():cB!=null&&cB.$==2?(cB.$1.push(cA),cz(cB.$0)):cB!=null&&cB.$==3?(cB.$0.push(cz),cB.$1.push(cA)):cz(cB.$0);};x.Map=function(cy,cz){var cA,cB;cA=cz.s;return cA!=null&&cA.$==0?x.New({$:0,$0:cy(cA.$0)}):(cB=x.New({$:3,$0:[],$1:[]}),(x.When(cz,function(cC){x.MarkDone(cB,cz,cy(cC));},cB),cB));};x.WhenObsoleteRun=function(cy,cz){var cA;cA=cy.s;cA==null?cz():cA!=null&&cA.$==2?cA.$1.push(cz):cA!=null&&cA.$==3?cA.$1.push(cz):void 0;};x.When=function(cy,cz,cA){var cB;cB=cy.s;cB==null?x.Obsolete(cA):cB!=null&&cB.$==2?(x.EnqueueSafe(cB.$1,cA),cz(cB.$0)):cB!=null&&cB.$==3?(cB.$0.push(cz),x.EnqueueSafe(cB.$1,cA)):cz(cB.$0);};x.MarkDone=function(cy,cz,cA){var cB;if(cB=cz.s,cB!=null&&cB.$==0)x.MarkForever(cy,cA);else x.MarkReady(cy,cA);};x.Map2Unit=function(cy,cz){var cA,cB,cC;function cD(){var cE,cF,cG;if(!(cE=cC.s,cE!=null&&cE.$==0||cE!=null&&cE.$==2)){cF=x.ValueAndForever(cy);cG=x.ValueAndForever(cz);cF!=null&&cF.$==1?cG!=null&&cG.$==1?cF.$0[1]&&cG.$0[1]?x.MarkForever(cC,null):x.MarkReady(cC,null):void 0:void 0;}}cA=cy.s;cB=cz.s;return cA!=null&&cA.$==0?cB!=null&&cB.$==0?x.New({$:0,$0:null}):cz:cB!=null&&cB.$==0?cy:(cC=x.New({$:3,$0:[],$1:[]}),(x.When(cy,cD,cC),x.When(cz,cD,cC),cC));};x.EnqueueSafe=function(cy,cz){var cA,cB,cC,cD;cy.push(cz);if(cy.length%20===0){cA=cy.slice(0);ch.Clear(cy);for(cB=0,cC=y.length(cA)-1;cB<=cC;cB++){cD=y.get(cA,cB);typeof cD=="object"?function(cE){if(cE.s)cy.push(cE);}(cD):function(cE){cy.push(cE);}(cD);}}else void 0;};x.MarkForever=function(cy,cz){var cA,cB,cC,cD;cA=cy.s;if(cA!=null&&cA.$==3){cy.s={$:0,$0:cz};cB=cA.$0;for(cC=0,cD=y.length(cB)-1;cC<=cD;cC++)(y.get(cB,cC))(cz);}else void 0;};x.MarkReady=function(cy,cz){var cA,cB,cC,cD;cA=cy.s;if(cA!=null&&cA.$==3){cy.s={$:2,$0:cz,$1:cA.$1};cB=cA.$0;for(cC=0,cD=y.length(cB)-1;cC<=cD;cC++)(y.get(cB,cC))(cz);}else void 0;};x.ValueAndForever=function(cy){var cz;cz=cy.s;return cz!=null&&cz.$==0?{$:1,$0:[cz.$0,true]}:cz!=null&&cz.$==2?{$:1,$0:[cz.$0,false]}:null;};x.Join=function(cy){var cz;cz=x.New({$:3,$0:[],$1:[]});x.When(cy,function(cA){var cB;cB=cA();x.When(cB,function(cC){var cD,cE;if((cD=cB.s,cD!=null&&cD.$==0)&&(cE=cy.s,cE!=null&&cE.$==0))x.MarkForever(cz,cC);else x.MarkReady(cz,cC);},cz);},cz);return cz;};x.Copy=function(cy){var cz,cA,cB;cz=cy.s;return cz==null?cy:cz!=null&&cz.$==2?(cA=x.New({$:2,$0:cz.$0,$1:[]}),(x.WhenObsolete(cy,cA),cA)):cz!=null&&cz.$==3?(cB=x.New({$:3,$0:[],$1:[]}),(x.When(cy,function(cC){x.MarkDone(cB,cy,cC);},cB),cB)):cy;};x.WhenObsolete=function(cy,cz){var cA;cA=cy.s;cA==null?x.Obsolete(cz):cA!=null&&cA.$==2?x.EnqueueSafe(cA.$1,cz):cA!=null&&cA.$==3?x.EnqueueSafe(cA.$1,cz):void 0;};y.length=function(cy){return cy.dims===2?cy.length*cy.length:cy.length;};y.get=function(cy,cz){y.checkBounds(cy,cz);return cy[cz];};y.set=function(cy,cz,cA){y.checkBounds(cy,cz);cy[cz]=cA;};y.checkBounds=function(cy,cz){if(cz<0||cz>=cy.length)e.FailWith("Index was outside the bounds of the array.");};A.toSafe=function(cy){return cy==null?"":cy;};A.prettyPrint=function(cy){var cz,cA;function cB(cC,cD){return cC+" = "+A.prettyPrint(cD);}return cy===null?"null":(cz=typeof cy,cz=="string"?"\""+cy+"\"":cz=="object"?cy instanceof a.Array?"[|"+U.concat("; ",y.map(A.prettyPrint,cy))+"|]":(cA=a.String(cy),cA==="[object Object]"?"{"+U.concat("; ",y.map(function(cC){return cB(cC[0],cC[1]);},v.GetFields(cy)))+"}":cA):a.String(cy));};A.printArray=function(cy,cz){return cz===null?"null":"[|"+U.concat("; ",y.map(cy,cz))+"|]";};A.printList=function(cy,cz){return"["+U.concat("; ",G.map(cy,cz))+"]";};B.WasmWorkerLoading={$:3};B.WasmLoading={$:1};B.WasmWorkerLoaded={$:4};B.WasmLoaded={$:2};B.WasmNotLoaded={$:0};C.NewFromSeq=function(cy){var cz,cA,cB;cz={};cA=bc.Get(cy);try{while(cA.MoveNext()){cB=cA.Current();cz[cB[0]]=cB[1];}}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}return cz;};E.newPojo=function(cy){var cz,cA;function cB(cD,cE){return function(cF){return E.addProp(cD,cE,cF);};}function cC(cD){}cz={};G.iter((cA=function(cD){return(function(cE){return cB(cE[0],cE[1]);}(cD))(cz);},function(cD){return cC(cA(cD));}),cy);return cz;};E.addProp=function(cy,cz,cA){cA[cy]=cz;return cA;};F=o.GlobalModule=cs.Class({},f,F);G.length=function(cy){var cz,cA;cz=0;cA=bc.Get(cy);try{while(cA.MoveNext())cz=cz+1;return cz;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};G.map=function(cy,cz){return{GetEnumerator:function(){var cA;cA=bc.Get(cz);return new bo.New(null,null,function(cB){return cA.MoveNext()&&(cB.c=cy(cA.Current()),true);},function(){cA.Dispose();});}};};G.iter=function(cy,cz){var cA;cA=bc.Get(cz);try{while(cA.MoveNext())cy(cA.Current());}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};G.delay=function(cy){return{GetEnumerator:function(){return bc.Get(cy());}};};G.append=function(cy,cz){return{GetEnumerator:function(){var cA,cB;cA=bc.Get(cy);cB=[true];return new bo.New(cA,null,function(cC){var cD;return cC.s.MoveNext()?(cC.c=cC.s.Current(),true):(cD=cC.s,!X.Equals(cD,null)?cD.Dispose():void 0,cC.s=null,cB[0]&&(cB[0]=false,cC.s=bc.Get(cz),cC.s.MoveNext()?(cC.c=cC.s.Current(),true):(cC.s.Dispose(),cC.s=null,false)));},function(cC){var cD;cD=cC.s;!X.Equals(cD,null)?cD.Dispose():void 0;});}};};G.distinct=function(cy){return G.distinctBy(a.id,cy);};G.cache=function(cy){var cz,cA;cz=[];cA=[bc.Get(cy)];return{GetEnumerator:function(){return new bo.New(0,null,function(cB){var cC;return cB.s<cz.length?(cB.c=cz[cB.s],cB.s=cB.s+1,true):(cC=cA[0],X.Equals(cC,null)?false:cC.MoveNext()?(cB.s=cB.s+1,cB.c=cC.Current(),cz.push(cB.c),true):(cC.Dispose(),cA[0]=null,false));},void 0);}};};G.tryFind=function(cy,cz){var cA,cB,cC;cA=bc.Get(cz);try{cB=null;while(cB==null&&cA.MoveNext()){cC=cA.Current();cy(cC)?cB={$:1,$0:cC}:void 0;}return cB;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};G.tryFindIndex=function(cy,cz){var cA,cB,cC;cA=bc.Get(cz);try{cB=true;cC=0;while(cB&&cA.MoveNext())if(cy(cA.Current()))cB=false;else cC=cC+1;return cB?null:{$:1,$0:cC};}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}};G.filter=function(cy,cz){return{GetEnumerator:function(){var cA;cA=bc.Get(cz);return new bo.New(null,null,function(cB){var cC,cD,cE;cC=cA.MoveNext();cD=cA.Current();cE=false;while(cC)if(cy(cD)){cB.c=cD;cE=true;cC=false;}else if(cA.MoveNext())cD=cA.Current();else cC=false;return cE;},function(){cA.Dispose();});}};};G.distinctBy=function(cy,cz){return{GetEnumerator:function(){var cA,cB;cA=bc.Get(cz);cB=new bG.New$3();return new bo.New(null,null,function(cC){var cD,cE;if(cA.MoveNext()){cD=cA.Current();cE=cB.Add(cy(cD));while(!cE&&cA.MoveNext()){cD=cA.Current();cE=cB.Add(cy(cD));}return cE&&(cC.c=cD,true);}else return false;},function(){cA.Dispose();});}};};G.collect=function(cy,cz){return G.concat(G.map(cy,cz));};G.mapFold=function(cy,cz,cA){return y.mapFold(cy,cz,y.ofSeq(cA));};G.isEmpty=function(cy){var cz;cz=bc.Get(cy);try{return!cz.MoveNext();}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};G.head=function(cy){var cz;cz=bc.Get(cy);try{return cz.MoveNext()?cz.Current():G.insufficient();}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};G.concat=function(cy){return{GetEnumerator:function(){var cz;cz=bc.Get(cy);return new bo.New(null,null,function(cA){var cB;while(true){cB=cA.s;if(X.Equals(cB,null)){if(cz.MoveNext()){cA.s=bc.Get(cz.Current());cA=cA;}else{cz.Dispose();return false;}}else if(cB.MoveNext()){cA.c=cB.Current();return true;}else{cA.Dispose();cA.s=null;cA=cA;}}},function(cA){var cB;cB=cA.s;!X.Equals(cB,null)?cB.Dispose():void 0;!X.Equals(cz,null)?cz.Dispose():void 0;});}};};G.fold=function(cy,cz,cA){var cB,cC;cB=cz;cC=bc.Get(cA);try{while(cC.MoveNext())cB=cy(cB,cC.Current());return cB;}finally{if(typeof cC=="object"&&"Dispose"in cC)cC.Dispose();}};G.max=function(cy){var cz,cA,cB;cz=bc.Get(cy);try{if(!cz.MoveNext())G.seqEmpty();cA=cz.Current();while(cz.MoveNext()){cB=cz.Current();X.Compare(cB,cA)===1?cA=cB:void 0;}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};G.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};H=g.ListModel=cs.Class({TryFindByKeyAsView:function(cy){var cz;cz=this;return function(){var cA,cB,cC;cA=(cB=null,[cz.it.TryGetValue(cy,{get:function(){return cB;},set:function(cD){cB=cD;}}),cB]);return cA[0]?cA[1]:(cC=x.New({$:2,$0:cz.TryFindByKey(cy),$1:[]}),(cz.it.Add(cy,cC),cC));};},TryFindByKey:function(cy){var cz;cz=this;return y.tryFind(function(cA){return X.Equals(cz.key(cA),cy);},this["var"].Get());},TryFind:function(cy){return y.tryFind(cy,this["var"].Get());},Set:function(cy){this["var"].Set(this.storage.SSet(cy));this.ObsoleteAll();},ObsoleteAll:function(){G.iter(function(cy){x.Obsolete(cy.V);},this.it);this.it.Clear();},GetEnumerator:function(){return bc.Get(this["var"].Get());},GetEnumerator0:function(){return bc.Get0(this["var"].Get());}},f,H);H.New=cs.Ctor(function(cy,cz){H.New$3.call(this,cy,_1.Create$1(y.ofSeq(G.distinctBy(cy,cz.SInit()))),cz);},H);H.New$3=cs.Ctor(function(cy,cz,cA){f.New.call(this);this.key=cy;this["var"]=cz;this.storage=cA;this.v=j.Map(function(cB){return cB.slice();},this["var"].get_View());this.it=new _3.New$5();},H);J=I.attr=cs.Class({},f,J);K=g.Doc=cs.Class({},f,K);K.Concat=function(cy){var cz;cz=be.ofSeqNonCopying(cy);return be.TreeReduce(K.get_Empty(),K.Append,cz);};K.Run=function(cy,cz){bh.LinkElement(cy,cz.docNode);K.RunInPlace(false,cy,cz);};K.Element=function(cy,cz,cA){var cB,cC;cB=bd.Concat(cz);cC=K.Concat(cA);return bY.New(bx.CreateElement(cy),cB,cC);};K.Input=function(cy,cz){return K.InputInternal("input",function(){return G.append(cy,[by.Value(cz)]);});};K.Append=function(cy,cz){return K.Mk({$:0,$0:cy.docNode,$1:cz.docNode},j.Map2Unit(cy.updates,cz.updates));};K.get_Empty=function(){return K.Mk(null,j.Const());};K.Button=function(cy,cz,cA){var cB;cB=bd.Concat(cz);return bY.New(K.Clickable("button",cA),cB,K.TextNode(cy));};K.TextNode=function(cy){return K.Mk({$:5,$0:bx.CreateText(cy)},j.Const());};K.InputArea=function(cy,cz){return K.InputInternal("textarea",function(){return G.append(cy,[by.Value(cz)]);});};K.TextView=function(cy){var cz;cz=bh.CreateTextNode();return K.Mk({$:4,$0:cz},j.Map(function(cA){bh.UpdateTextNode(cz,cA);},cy));};K.RunInPlace=function(cy,cz,cA){var cB;cB=bh.CreateRunState(cz,cA.docNode);j.Sink(bH.get_UseAnimations()||bI.BatchUpdatesEnabled()?bK.StartProcessor(bh.PerformAnimatedUpdate(cy,cB,cA.docNode)):function(){bh.PerformSyncUpdate(cy,cB,cA.docNode);},cA.updates);};K.BindView=function(cy,cz){return K.EmbedView(j.Map(cy,cz));};K.InputInternal=function(cy,cz){var cA;cA=bx.CreateElement(cy);return bY.New(cA,bd.Concat(cz(cA)),K.get_Empty());};K.Mk=function(cy,cz){return new K.New(cy,cz);};K.Clickable=function(cy,cz){var cA;cA=bx.CreateElement(cy);cA.addEventListener("click",function(cB){cB.preventDefault();return cz();},false);return cA;};K.EmbedView=function(cy){var cz;cz=bh.CreateEmbedNode();return K.Mk({$:2,$0:cz},j.Map(a.ignore,j.Bind(function(cA){bh.UpdateEmbedNode(cz,cA.docNode);return cA.updates;},cy)));};K.ConvertSeqBy=function(cy,cz,cA){return K.Flatten(j.MapSeqCachedViewBy(cy,function(cB,cC){return(cz(cB))(cC);},cA));};K.Flatten=function(cy){return K.EmbedView(j.Map(K.Concat,cy));};K.New=cs.Ctor(function(cy,cz){f.New.call(this);this.docNode=cy;this.updates=cz;},K);L.p=function(cy){return cy.$==4?"WasmWorkerLoaded":cy.$==3?"WasmWorkerLoading":cy.$==2?"WasmLoaded":cy.$==1?"WasmLoading":"WasmNotLoaded";};L.p$1=function(cy){return cy==null?"null":"Some "+M.p(cy.$0);};L.p$2=function(cy){return cy.$==6?"FieldNotFound ("+A.prettyPrint(cy.$0)+", "+A.prettyPrint(cy.$1)+")":cy.$==5?"ConstructorNotFound ("+A.prettyPrint(cy.$0)+", "+A.prettyPrint(cy.$1)+", "+A.printList(A.prettyPrint,cy.$2)+")":cy.$==4?"MethodNameNotFound ("+A.prettyPrint(cy.$0)+", "+A.prettyPrint(cy.$1)+", "+A.printList(A.prettyPrint,cy.$2)+")":cy.$==3?"MethodNotFound ("+A.prettyPrint(cy.$0)+", "+A.prettyPrint(cy.$1)+", "+A.printList(A.prettyPrint,cy.$2)+")":cy.$==2?"TypeNotFound "+A.prettyPrint(cy.$0):cy.$==1?"NameConflict ("+A.prettyPrint(cy.$0)+", "+A.prettyPrint(cy.$1)+")":"SourceError "+A.prettyPrint(cy.$0);};L.p$3=function(cy){return cy.$==1?"PublicProxy "+A.prettyPrint(cy.$0):"SourceWarning "+A.prettyPrint(cy.$0);};M.p=function(cy){return"{"+("FileName = "+A.prettyPrint(cy.FileName))+"; "+("Start = "+("("+A.prettyPrint(cy.Start[0])+", "+A.prettyPrint(cy.Start[1])+")"))+"; "+("End = "+("("+A.prettyPrint(cy.End[0])+", "+A.prettyPrint(cy.End[1])+")"))+"}";};O=N.AjaxRemotingProvider=cs.Class({AsyncBase:function(cy,cz){var cA,cB;cA=this;cB=null;return _8.Delay(function(){var cC,cD;cC=N.makeHeaders(cy);cD=N.makePayload(cz);return _8.Bind(_8.GetCT(),function(cE){return _8.FromContinuations(function(cF,cG,cH){var cI,cJ,cK;function cL(cM){return cI[0]?(cI[0]=false,cH(new bW.New(cE))):null;}cI=[true];cJ=_8.Register(cE,function(){cL();});cK=cA.get_EndPoint();return N.AjaxProvider().Async(cK,cC,cD,function(cM){if(cI[0]){cI[0]=false;cJ.Dispose();cF(b$.Activate(cv.parse(cM)));}},function(cM){if(cI[0]){cI[0]=false;cJ.Dispose();cG(cM);}});});});});},get_EndPoint:function(){return N.EndPoint();},Async:function(cy,cz){return this.AsyncBase(cy,cz);}},f,O);O.New=cs.Ctor(function(){f.New.call(this);},O);Q.LoadLocalTemplates=function(cy){!Q.LocalTemplatesLoaded()?(Q.set_LocalTemplatesLoaded(true),Q.LoadNestedTemplates(self.document.body,"")):void 0;Q.LoadedTemplates().set_Item(cy,Q.LoadedTemplateFile(""));};Q.LocalTemplatesLoaded=function(){bF.$cctor();return bF.LocalTemplatesLoaded;};Q.set_LocalTemplatesLoaded=function(cy){bF.$cctor();bF.LocalTemplatesLoaded=cy;};Q.LoadNestedTemplates=function(cy,cz){var cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;function cA(cP){var cQ,cR;if(!cB.ContainsKey(cP)){cQ=(cR=null,[cC.TryGetValue(cP,{get:function(){return cR;},set:function(cS){cR=cS;}}),cR]);cQ[0]?(cO.Add(cP),cC.Remove(cP),Q.PrepareTemplateStrict(cz,{$:1,$0:cP},cQ[1][0],{$:1,$0:cQ[1][1]},{$:1,$0:cA})):cu.warn(cO.Contains(cP)?"Encountered loop when instantiating "+cP:"Local template does not exist: "+cP);}}cB=Q.LoadedTemplateFile(cz);cC=new _3.New$5();cD=cy.querySelectorAll("[ws-template]");for(cE=0,cF=cD.length-1;cE<=cF;cE++){cG=cD[cE];cH=cG.getAttribute("ws-template").toLowerCase();cG.removeAttribute("ws-template");cC.set_Item(cH,[[cG],Q.FakeRootSingle(cG)]);}cI=cy.querySelectorAll("[ws-children-template]");for(cJ=0,cK=cI.length-1;cJ<=cK;cJ++){cL=cI[cJ];cM=cL.getAttribute("ws-children-template").toLowerCase();cL.removeAttribute("ws-children-template");cC.set_Item(cM,(cN=bx.ChildrenArray(cL),[cN,Q.FakeRoot(cN)]));}cO=new bG.New$3();while(cC.count>0)cA(G.head(cC.get_Keys()));};Q.LoadedTemplates=function(){bF.$cctor();return bF.LoadedTemplates;};Q.LoadedTemplateFile=function(cy){var cz,cA,cB;cz=(cA=null,[Q.LoadedTemplates().TryGetValue(cy,{get:function(){return cA;},set:function(cC){cA=cC;}}),cA]);return cz[0]?cz[1]:(cB=new _3.New$5(),(Q.LoadedTemplates().set_Item(cy,cB),cB));};Q.FakeRootSingle=function(cy){var cz,cA,cB;cy.removeAttribute("ws-template");cz=cy.getAttribute("ws-replace");cz===null?void 0:(cy.removeAttribute("ws-replace"),cA=cy.parentNode,X.Equals(cA,null)?void 0:(cB=self.document.createElement(cy.tagName),cB.setAttribute("ws-replace",cz),cA.replaceChild(cB,cy)));return Q.FakeRoot([cy]);};Q.FakeRoot=function(cy){var cz,cA,cB;cz=self.document.createElement("div");for(cA=0,cB=cy.length-1;cA<=cB;cA++)cz.appendChild(y.get(cy,cA));return cz;};Q.PrepareTemplateStrict=function(cy,cz,cA,cB,cC){var cD,cE;function cF(cK,cL){var cM,cN,cO,cP,cQ,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da;function cR(db){}while(true)switch(cK){case 0:if(cL!==null){cM=cL.nextSibling;if(X.Equals(cL.nodeType,t.TEXT_NODE))bZ.convertTextNode(cL);else if(X.Equals(cL.nodeType,t.ELEMENT_NODE))cH(cL);cL=cM;}else return null;break;case 1:cS=V.string(cL.nodeName,{$:1,$0:3},null).toLowerCase();cT=(cN=cS.indexOf("."),cN===-1?[cy,cS]:[V.string(cS,null,{$:1,$0:cN-1}),V.string(cS,{$:1,$0:cN+1},null)]);cU=cT[1];cV=cT[0];if(cV!==""&&!Q.LoadedTemplates().ContainsKey(cV))return bZ.failNotLoaded(cU);else{if(cV===""&&cC!=null)cC.$0(cU);cW=Q.LoadedTemplates().get_Item(cV);if(!cW.ContainsKey(cU))return bZ.failNotLoaded(cU);else{cX=cW.get_Item(cU);cY=cX.cloneNode(true);cZ=new bG.New$3();c0=new _3.New$5();c1=cL.attributes;for(c2=0,c3=c1.length-1;c2<=c3;c2++){c4=c1.item(c2).name.toLowerCase();c0.set_Item(c4,(c5=c1.item(c2).nodeValue,c5===""?c4:c5.toLowerCase()));!cZ.Add(c4)?cu.warn("Hole mapped twice",c4):void 0;}for(c6=0,c7=cL.childNodes.length-1;c6<=c7;c6++){c8=cL.childNodes[c6];X.Equals(c8.nodeType,t.ELEMENT_NODE)?!cZ.Add(c8.nodeName.toLowerCase())?cu.warn("Hole filled twice",cU):void 0:void 0;}c9=cL.childNodes.length===1&&X.Equals(cL.firstChild.nodeType,t.TEXT_NODE);if(c9){cP=bZ.fillTextHole(cY,cL.firstChild.textContent,cU);((function(db){return function(dc){if(dc!=null)db(dc.$0);};}((cQ=function(db){return function(dc){return db.Add(dc);};}(cZ),function(db){return cR(cQ(db));})))(cP));}bZ.removeHolesExcept(cY,cZ);if(!c9){for(c_=0,c$=cL.childNodes.length-1;c_<=c$;c_++){da=cL.childNodes[c_];X.Equals(da.nodeType,t.ELEMENT_NODE)?da.hasAttributes()?bZ.fillInstanceAttrs(cY,da):cG(cY,da):void 0;}}bZ.mapHoles(cY,c0);bZ.fill(cY,cL.parentNode,cL);cL.parentNode.removeChild(cL);return;}}break;}}function cG(cK,cL){var cM,cO,cP;function cN(cQ,cR){var cS,cT,cU;if(cO==="title"&&cL.hasChildNodes()){cS=cw.parseHTML(cL.textContent);cL.removeChild(cL.firstChild);for(cT=0,cU=cS.length-1;cT<=cU;cT++)cL.appendChild(y.get(cS,cT));}else null;cH(cL);return bZ.fill(cL,cQ,cR);}cO=cL.nodeName.toLowerCase();bx.IterSelector(cK,"[ws-attr-holes]",function(cQ){var cR,cS,cT,cU,cV;cR=U.SplitChars(cQ.getAttribute("ws-attr-holes"),[" "],1);for(cS=0,cT=cR.length-1;cS<=cT;cS++){cU=y.get(cR,cS);cQ.setAttribute(cU,(cV=new a.RegExp("\\${"+cO+"}","ig"),cQ.getAttribute(cU).replace(cV,cL.textContent)));}});cP=cK.querySelector("[ws-hole="+cO+"]");if(X.Equals(cP,null)){cM=cK.querySelector("[ws-replace="+cO+"]");return X.Equals(cM,null)?null:(cN(cM.parentNode,cM),void cM.parentNode.removeChild(cM));}else{while(cP.hasChildNodes())cP.removeChild(cP.lastChild);cP.removeAttribute("ws-hole");return cN(cP,null);}}function cH(cK){if(U.StartsWith(cK.nodeName.toLowerCase(),"ws-"))cJ(cK);else{bZ.convertAttrs(cK);cI(cK.firstChild);}}function cI(cK){return cF(0,cK);}function cJ(cK){return cF(1,cK);}cD=cB==null?Q.FakeRoot(cA):cB.$0;cE=(cz==null?"":cz.$0).toLowerCase();Q.LoadedTemplateFile(cy).set_Item(cE,cD);y.length(cA)>0?(function(cK){var cL,cM,cN,cO;while(true){cL=cK.querySelector("[ws-template]");if(X.Equals(cL,null)){cM=cK.querySelector("[ws-children-template]");if(X.Equals(cM,null))return null;else{cN=cM.getAttribute("ws-children-template");cM.removeAttribute("ws-children-template");Q.PrepareTemplateStrict(cy,{$:1,$0:cN},bx.ChildrenArray(cM),null,null);cK=cK;}}else{cO=cL.getAttribute("ws-template");(Q.PrepareSingleTemplate(cy,{$:1,$0:cO},cL))(null);cK=cK;}}}(cD),cI(y.get(cA,0))):void 0;};Q.PrepareSingleTemplate=function(cy,cz,cA){var cB,cC,cD;cB=Q.FakeRootSingle(cA);cC=[cA];cD={$:1,$0:cB};return function(cE){Q.PrepareTemplateStrict(cy,cz,cC,cD,cE);};};Q.TextHoleRE=function(){bF.$cctor();return bF.TextHoleRE;};R=r.AssemblyRef=cs.Class({},null,R);T.unindent=function(cy){var cz,cA,cB,cC;cz=U.SplitChars(cy,["\n"],0);cA=(cB=G.tryFindIndex(function(cD){return" "!==cD;},(cC=G.tryFind(function(cD){return U.Trim(cD)!=="";},cz),cC==null?"":cC.$0)),cB==null?0:cB.$0);return G.filter(function(cD){return!U.StartsWith(cD,"# 1 ");},G.map(function(cD){return cD.length<=cA?"":cD.substring(cA);},cz));};T.splitByChar=function(cy,cz){return U.SplitChars(cz,[cy],0);};T.StartsWith=function(cy,cz){return U.StartsWith(cz,cy)?{$:1,$0:V.string(cz,{$:1,$0:cy.length},null)}:null;};U.concat=function(cy,cz){return y.ofSeq(cz).join(cy);};U.SplitChars=function(cy,cz,cA){return U.Split(cy,new a.RegExp("["+U.RegexEscape(cz.join(""))+"]"),cA);};U.Trim=function(cy){return cy.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};U.Replace=function(cy,cz,cA){function cB(cC){var cD,cE,cF;cD=cC.indexOf(cz);return cD!==-1?(cE=U.ReplaceOnce(cC,cz,cA),(cF=cD+cA.length,U.Substring(cE,0,cD+cA.length)+cB(cE.substring(cF)))):cC;}return cB(cy);};U.StartsWith=function(cy,cz){return cy.substring(0,cz.length)==cz;};U.Split=function(cy,cz,cA){return cA===1?y.filter(function(cB){return cB!=="";},U.SplitWith(cy,cz)):U.SplitWith(cy,cz);};U.RegexEscape=function(cy){return cy.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};U.ReplaceOnce=function(cy,cz,cA){return cy.replace(cz,cA);};U.SplitWith=function(cy,cz){return cy.split(cz);};U.Substring=function(cy,cz,cA){return cy.substr(cz,cA);};U.ReplaceChar=function(cy,cz,cA){return U.Replace(cy,cz,cA);};V.array=function(cy,cz,cA){return cz==null?cA!=null&&cA.$==1?cy.slice(0,cA.$0+1):[]:cA==null?cy.slice(cz.$0):cy.slice(cz.$0,cA.$0+1);};V.string=function(cy,cz,cA){return cz==null?cA!=null&&cA.$==1?cy.slice(0,cA.$0+1):"":cA==null?cy.slice(cz.$0):cy.slice(cz.$0,cA.$0+1);};W.tryParseWith=function(cy){function cz(cA,cB){return cA?{$:1,$0:cB}:null;}return function(cA){return cz.apply(null,cy(cA));};};W.parseDateO=function(){w.$cctor();return w.parseDateO;};W.parseIntO=function(){w.$cctor();return w.parseIntO;};W.parseInt64O=function(){w.$cctor();return w.parseInt64O;};W.parseSingleO=function(){w.$cctor();return w.parseSingleO;};W.parseDoubleO=function(){w.$cctor();return w.parseDoubleO;};W.parseGuidO=function(){w.$cctor();return w.parseGuidO;};X.Equals=function(cy,cz){var cA,cB,cC,cD;if(cy===cz)return true;else{cA=typeof cy;if(cA=="object"){if(cy===null||cy===void 0||cz===null||cz===void 0)return false;else if("Equals"in cy)return cy.Equals(cz);else if(cy instanceof a.Array&&cz instanceof a.Array)return X.arrayEquals(cy,cz);else if(cy instanceof ct&&cz instanceof ct)return X.dateEquals(cy,cz);else{cB=[true];for(var cE in cy)if(function(cF){cB[0]=!cy.hasOwnProperty(cF)||cz.hasOwnProperty(cF)&&X.Equals(cy[cF],cz[cF]);return!cB[0];}(cE))break;if(cB[0]){for(var cF in cz)if(function(cG){cB[0]=!cz.hasOwnProperty(cG)||cy.hasOwnProperty(cG);return!cB[0];}(cF))break;}return cB[0];}}else return cA=="function"&&("$Func"in cy?cy.$Func===cz.$Func&&cy.$Target===cz.$Target:"$Invokes"in cy&&"$Invokes"in cz&&X.arrayEquals(cy.$Invokes,cz.$Invokes));}};X.Compare=function(cy,cz){var cA,cB,cC,cD,cE,cF;if(cy===cz)return 0;else{cB=typeof cy;switch(cB=="function"?1:cB=="boolean"?2:cB=="number"?2:cB=="string"?2:cB=="object"?3:0){case 0:return typeof cz=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return cy<cz?-1:1;case 3:if(cy===null)cC=-1;else if(cz===null)cC=1;else if("CompareTo"in cy)cC=cy.CompareTo(cz);else if("CompareTo0"in cy)cC=cy.CompareTo0(cz);else if(cy instanceof a.Array&&cz instanceof a.Array)cC=X.compareArrays(cy,cz);else if(cy instanceof ct&&cz instanceof ct)cC=X.compareDates(cy,cz);else{cD=[0];for(var cG in cy)if(function(cH){return!cy.hasOwnProperty(cH)?false:!cz.hasOwnProperty(cH)?(cD[0]=1,true):(cD[0]=X.Compare(cy[cH],cz[cH]),cD[0]!==0);}(cG))break;if(cD[0]===0){for(var cH in cz)if(function(cI){return!cz.hasOwnProperty(cI)?false:!cy.hasOwnProperty(cI)&&(cD[0]=-1,true);}(cH))break;}cC=cD[0];}return cC;}}};X.arrayEquals=function(cy,cz){var cA,cB;if(y.length(cy)===y.length(cz)){cA=true;cB=0;while(cA&&cB<y.length(cy)){!X.Equals(y.get(cy,cB),y.get(cz,cB))?cA=false:void 0;cB=cB+1;}return cA;}else return false;};X.dateEquals=function(cy,cz){return cy.getTime()===cz.getTime();};X.compareArrays=function(cy,cz){var cA,cB;if(y.length(cy)<y.length(cz))return -1;else if(y.length(cy)>y.length(cz))return 1;else{cA=0;cB=0;while(cA===0&&cB<y.length(cy)){cA=X.Compare(y.get(cy,cB),y.get(cz,cB));cB=cB+1;}return cA;}};X.compareDates=function(cy,cz){return X.Compare(cy.getTime(),cz.getTime());};X.Hash=function(cy){var cz;cz=typeof cy;return cz=="function"?0:cz=="boolean"?cy?1:0:cz=="number"?cy:cz=="string"?X.hashString(cy):cz=="object"?cy==null?0:cy instanceof a.Array?X.hashArray(cy):X.hashObject(cy):0;};X.hashString=function(cy){var cz,cA,cB;if(cy===null)return 0;else{cz=5381;for(cA=0,cB=cy.length-1;cA<=cB;cA++)cz=X.hashMix(cz,cy[cA].charCodeAt());return cz;}};X.hashArray=function(cy){var cz,cA,cB;cz=-34948909;for(cA=0,cB=y.length(cy)-1;cA<=cB;cA++)cz=X.hashMix(cz,X.Hash(y.get(cy,cA)));return cz;};X.hashObject=function(cy){var cz,cA;if("GetHashCode"in cy)return cy.GetHashCode();else{cz=[0];for(var cB in cy)if(function(cC){cz[0]=X.hashMix(X.hashMix(cz[0],X.hashString(cC)),X.Hash(cy[cC]));return false;}(cB))break;return cz[0];}};X.hashMix=function(cy,cz){return(cy<<5)+cy+cz;};Y.TryParseInt32=function(cy,cz){return Y.TryParse(cy,-2147483648,2147483647,cz);};Y.TryParseInt64=function(cy,cz){return Y.TryParse(cy,-9223372036854775808,9223372036854775807,cz);};_0.TryParse=function(cy,cz){try{cz.set(_0.Parse(cy));return true;}catch(cA){return false;}};_0.Parse=function(cy){var cz,cA,cB;try{return _0.ParseExact(cy,"D");}catch(cC){try{cz=_0.ParseExact(cy,"B");}catch(cD){try{cA=_0.ParseExact(cy,"P");}catch(cE){try{cB=_0.ParseExact(cy,"N");}catch(cF){cB=_0.ParseExact(cy,"X");}cA=cB;}cz=cA;}return cz;}};_0.ParseExact=function(cy,cz){var cA,cB,cC,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;function cD(cO){var cP,cQ,cR,cS;for(cP=0,cQ=35;cP<=cQ;cP++){cP===8||(cP===13||(cP===18||cP===23))?cO[cP]!=="-"?_0.ShapeError():void 0:(cS=cO[cP],!("0"<=cS&&cS<="9"||"a"<=cS&&cS<="f")?_0.ShapeError():void 0);}return cO;}cE=cz.toUpperCase();if(cE==="N"){cF=U.Trim(cy).toLowerCase();if(cF.length!==32)_0.ShapeError();for(cG=0,cH=31;cG<=cH;cG++){cI=cF[cG];!("0"<=cI&&cI<="9"||"a"<=cI&&cI<="f")?_0.ShapeError():void 0;}return U.Substring(cF,0,8)+"-"+U.Substring(cF,8,4)+"-"+U.Substring(cF,12,4)+"-"+U.Substring(cF,16,4)+"-"+cF.substring(20);}else if(cE==="D"){cA=U.Trim(cy).toLowerCase();cA.length!==36?_0.ShapeError():void 0;return cD(cA);}else if(cE==="B"){cB=U.Trim(cy).toLowerCase();cB.length!==38||cB[0]!=="{"||cB[17]!=="}"?_0.ShapeError():void 0;return cD(U.Substring(cB,1,36));}else if(cE==="P"){cC=U.Trim(cy).toLowerCase();cC.length!==38||cC[0]!=="("||cC[17]!==")"?_0.ShapeError():void 0;return cD(U.Substring(cC,1,36));}else if(cE==="X"){cJ=U.Trim(cy).toLowerCase();if(cJ.length!==68)_0.ShapeError();for(cK=0,cL=67;cK<=cL;cK++){switch(cK){case 26:case 0:if(cJ[cK]!=="{")_0.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cJ[cK]!=="0")_0.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cJ[cK]!=="x")_0.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cJ[cK]!==",")_0.ShapeError();break;case 67:case 66:if(cJ[cK]!=="{")_0.ShapeError();break;default:cN=cJ[cK];!("0"<=cN&&cN<="9"||"a"<=cN&&cN<="f")?_0.ShapeError():void 0;break;}}return U.Substring(cJ,3,8)+"-"+U.Substring(cJ,14,4)+"-"+U.Substring(cJ,21,4)+"-"+U.Substring(cJ,29,2)+U.Substring(cJ,34,2)+"-"+U.Substring(cJ,39,2)+U.Substring(cJ,44,2)+U.Substring(cJ,49,2)+U.Substring(cJ,54,2)+U.Substring(cJ,59,2)+U.Substring(cJ,64,2);}else return _0.FormatError();};_0.ShapeError=function(){throw new ce.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_0.FormatError=function(){throw new ce.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_0.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cy){var cz,cA;cz=cx.random()*16|0;cA=cy=="x"?cz:cz&3|8;return cA.toString(16);});};_1=g.Var$1=cs.Class({},f,_1);_1.Create$1=function(cy){return new bk.New(false,x.New({$:2,$0:cy,$1:[]}),cy);};_1.Set=function(cy,cz){cy.Set(cz);};N.AjaxProvider=function(){bl.$cctor();return bl.AjaxProvider;};N.set_AjaxProvider=function(cy){bl.$cctor();bl.AjaxProvider=cy;};N.makePayload=function(cy){return cv.stringify(cy);};N.makeHeaders=function(cy){return{"content-type":"application/json","x-websharper-rpc":cy};};N.EndPoint=function(){bl.$cctor();return bl.EndPoint;};N.ajax=function(cy,cz,cA,cB,cC,cD,cE){var cF,cG,cH;cF=new a.XMLHttpRequest();cG=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");cF.open("POST",cz,cy);if(cy==true)cF.withCredentials=true;for(var cJ in cA)cF.setRequestHeader(cJ,cA[cJ]);if(cG)cF.setRequestHeader("x-csrftoken",cG);function cI(){var cK;if(cF.status==200)cC(cF.responseText);else if(cE&&cF.status==403&&cF.responseText=="CSRF")cE();else{cK="Response status is not 200: ";cD(new bV(cK+cF.status));}}if("onload"in cF)cF.onload=cF.onerror=cF.onabort=cI;else cF.onreadystatechange=function(){if(cF.readyState==4)cI();};cF.send(cB);};_3=_2.Dictionary=cs.Class({set_Item:function(cy,cz){this.set(cy,cz);},TryGetValue:function(cy,cz){var cA,cB,cC;cA=this;cB=this.data[this.hash(cy)];return cB==null?false:(cC=y.tryPick(function(cD){var cE;cE=e.KeyValue(cD);return cA.equals.apply(null,[cE[0],cy])?{$:1,$0:cE[1]}:null;},cB),cC!=null&&cC.$==1&&(cz.set(cC.$0),true));},Add:function(cy,cz){this.add(cy,cz);},ContainsKey:function(cy){var cz,cA;cz=this;cA=this.data[this.hash(cy)];return cA==null?false:y.exists(function(cB){return cz.equals.apply(null,[(e.KeyValue(cB))[0],cy]);},cA);},Remove:function(cy){return this.remove(cy);},get_Keys:function(){return new b0.New(this);},set:function(cy,cz){var cA,cB,cC,cD;cA=this;cB=this.hash(cy);cC=this.data[cB];cC==null?(this.count=this.count+1,this.data[cB]=new a.Array({K:cy,V:cz})):(cD=y.tryFindIndex(function(cE){return cA.equals.apply(null,[(e.KeyValue(cE))[0],cy]);},cC),cD==null?(this.count=this.count+1,cC.push({K:cy,V:cz})):cC[cD.$0]={K:cy,V:cz});},add:function(cy,cz){var cA,cB,cC;cA=this;cB=this.hash(cy);cC=this.data[cB];cC==null?(this.count=this.count+1,this.data[cB]=new a.Array({K:cy,V:cz})):(y.exists(function(cD){return cA.equals.apply(null,[(e.KeyValue(cD))[0],cy]);},cC)?bm.alreadyAdded():void 0,this.count=this.count+1,cC.push({K:cy,V:cz}));},remove:function(cy){var cz,cA,cB,cC;cz=this;cA=this.hash(cy);cB=this.data[cA];return cB==null?false:(cC=y.filter(function(cD){return!cz.equals.apply(null,[(e.KeyValue(cD))[0],cy]);},cB),y.length(cC)<cB.length&&(this.count=this.count-1,this.data[cA]=cC,true));},get_Item:function(cy){return this.get(cy);},get:function(cy){var cz,cA;cz=this;cA=this.data[this.hash(cy)];return cA==null?bm.notPresent():y.pick(function(cB){var cC;cC=e.KeyValue(cB);return cz.equals.apply(null,[cC[0],cy])?{$:1,$0:cC[1]}:null;},cA);},Clear:function(){this.data=[];this.count=0;},GetEnumerator:function(){return bc.Get0(this);},GetEnumerator0:function(){return bc.Get0(y.concat(v.GetFieldValues(this.data)));}},f,_3);_3.New$5=cs.Ctor(function(){_3.New$6.call(this,[],X.Equals,X.Hash);},_3);_3.New$6=cs.Ctor(function(cy,cz,cA){var cB,cC;f.New.call(this);this.equals=cz;this.hash=cA;this.count=0;this.data=[];cB=bc.Get(cy);try{while(cB.MoveNext()){cC=cB.Current();this.set(cC.K,cC.V);}}finally{if(typeof cB=="object"&&"Dispose"in cB)cB.Dispose();}},_3);H.Create=function(cy,cz){return H.CreateWithStorage(cy,bp.InMemory(y.ofSeq(cz)));};H.CreateWithStorage=function(cy,cz){return new H.New(cy,cz);};_5=_4.T=cs.Class({GetEnumerator:function(){return new bo.New(this,null,function(cy){var cz;cz=cy.s;return cz.$==0?false:(cy.c=cz.$0,cy.s=cz.$1,true);},void 0);},GetEnumerator0:function(){return bc.Get(this);}},null,_5);_5.Empty=new _5({$:0});_6.New=function(cy,cz,cA,cB,cC){return{name:cy,self:cz,modules:cA,dependencies:cB,javaScript:cC};};_7.mainDocNameVar=function(){w.$cctor();return w.mainDocNameVar;};j=g.View=cs.Class({},null,j);x.Obsolete=function(cy){var cz,cA,cB,cC,cD;cA=cy.s;if(cA==null||(cA!=null&&cA.$==2?(cz=cA.$1,false):cA!=null&&cA.$==3?(cz=cA.$1,false):true))void 0;else{cy.s=null;for(cB=0,cC=y.length(cz)-1;cB<=cC;cB++){cD=y.get(cz,cB);typeof cD=="object"?function(cE){x.Obsolete(cE);}(cD):cD();}}};x.New=function(cy){return{s:cy};};_8.FromContinuations=function(cy){return function(cz){var cA;function cB(cC){if(cA[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cA[0]=true;_8.scheduler().Fork(cC);}}cA=[false];cy(function(cC){cB(function(){cz.k({$:0,$0:cC});});},function(cC){cB(function(){cz.k({$:1,$0:cC});});},function(cC){cB(function(){cz.k({$:2,$0:cC});});});};};_8.Delay=function(cy){return function(cz){try{(cy(null))(cz);}catch(cA){cz.k({$:1,$0:cA});}};};_8.Bind=function(cy,cz){return _8.checkCancel(function(cA){cy(bs.New(function(cB){var cC;if(cB.$==0){cC=cB.$0;_8.scheduler().Fork(function(){try{(cz(cC))(cA);}catch(cD){cA.k({$:1,$0:cD});}});}else _8.scheduler().Fork(function(){cA.k(cB);});},cA.ct));});};_8.Sleep=function(cy){return function(cz){var cA,cB;cA=void 0;cB=void 0;cA=a.setTimeout(function(){cB.Dispose();_8.scheduler().Fork(function(){cz.k({$:0,$0:null});});},cy);cB=_8.Register(cz.ct,function(){a.clearTimeout(cA);_8.scheduler().Fork(function(){_8.cancel(cz);});});};};_8.Combine=function(cy,cz){return _8.Bind(cy,function(){return cz;});};_8.Zero=function(){bt.$cctor();return bt.Zero;};_8.Start=function(cy,cz){var cA,cB;cA=(cB=(_8.defCTS())[0],cz==null?cB:cz.$0);_8.scheduler().Fork(function(){if(!cA.c)cy(bs.New(function(cC){if(cC.$==1)_8.UncaughtAsyncError(cC.$0);},cA));});};_8.checkCancel=function(cy){return function(cz){if(cz.ct.c)_8.cancel(cz);else cy(cz);};};_8.Register=function(cy,cz){var cA;return cy===_8.noneCT()?{Dispose:function(){return null;}}:(cA=cy.r.push(cz)-1,{Dispose:function(){return y.set(cy.r,cA,a.ignore);}});};_8.cancel=function(cy){cy.k({$:2,$0:new bW.New(cy.ct)});};_8.defCTS=function(){bt.$cctor();return bt.defCTS;};_8.UncaughtAsyncError=function(cy){cu.log("WebSharper: Uncaught asynchronous exception",cy);};_8.While=function(cy,cz){return cy()?_8.Bind(cz,function(){return _8.While(cy,cz);}):_8.Return();};_8.Return=function(cy){return function(cz){cz.k({$:0,$0:cy});};};_8.scheduler=function(){bt.$cctor();return bt.scheduler;};_8.noneCT=function(){bt.$cctor();return bt.noneCT;};_8.For=function(cy,cz){return _8.Using(bc.Get(cy),function(cA){return _8.While(function(){return cA.MoveNext();},_8.Delay(function(){return cz(cA.Current());}));});};_8.Using=function(cy,cz){return _8.TryFinally(cz(cy),function(){cy.Dispose();});};_8.GetCT=function(){bt.$cctor();return bt.GetCT;};_8.TryFinally=function(cy,cz){return function(cA){cy(bs.New(function(cB){try{cz();cA.k(cB);}catch(cC){cA.k({$:1,$0:cC});}},cA.ct));};};_8.TryWith=function(cy,cz){return function(cA){cy(bs.New(function(cB){if(cB.$==0)cA.k({$:0,$0:cB.$0});else if(cB.$==1)try{(cz(cB.$0))(cA);}catch(cC){cA.k(cB);}else cA.k(cB);},cA.ct));};};_9=p.CustomXhrProvider=cs.Class({Async:function(cy,cz,cA,cB,cC){var cD;_8.Start((cD=null,_8.Delay(function(){var cE;cE=p.getHeaderRpc(cz);bn.add(cE,[cB,cC]);return _8.TryWith(_8.Delay(function(){p.callRunRpc(cE,cA);return _8.Zero();}),function(cF){p.returnExnExn(cE,cF);return _8.Zero();});})),null);}},f,_9);_9.New=cs.Ctor(function(){f.New.call(this);},_9);_=o.Require=cs.Class({},f,_);$.dlls=function(){bu.$cctor();return bu.dlls;};y.choose=function(cy,cz){var cA,cB,cC,cD;cA=[];for(cB=0,cC=cz.length-1;cB<=cC;cB++){cD=cy(cz[cB]);cD==null?void 0:cA.push(cD.$0);}return cA;};y.map=function(cy,cz){var cA,cB,cC;cA=new a.Array(cz.length);for(cB=0,cC=cz.length-1;cB<=cC;cB++)cA[cB]=cy(cz[cB]);return cA;};y.filter=function(cy,cz){var cA,cB,cC;cA=[];for(cB=0,cC=cz.length-1;cB<=cC;cB++)if(cy(cz[cB]))cA.push(cz[cB]);return cA;};y.ofSeq=function(cy){var cz,cA;if(cy instanceof a.Array)return cy.slice();else if(cy instanceof _5)return y.ofList(cy);else{cz=[];cA=bc.Get(cy);try{while(cA.MoveNext())cz.push(cA.Current());return cz;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}}};y.ofList=function(cy){var cz,cA;cA=[];cz=cy;while(!(cz.$==0)){cA.push(_4.head(cz));cz=_4.tail(cz);}return cA;};y.tryPick=function(cy,cz){var cA,cB,cC;cA=null;cB=0;while(cB<cz.length&&cA==null){cC=cy(cz[cB]);cC!=null&&cC.$==1?cA=cC:void 0;cB=cB+1;}return cA;};y.tryFind=function(cy,cz){var cA,cB;cA=null;cB=0;while(cB<cz.length&&cA==null){cy(cz[cB])?cA={$:1,$0:cz[cB]}:void 0;cB=cB+1;}return cA;};y.exists=function(cy,cz){var cA,cB,cC,cD;cA=false;cB=0;cD=y.length(cz);while(!cA&&cB<cD)if(cy(cz[cB]))cA=true;else cB=cB+1;return cA;};y.tryFindIndex=function(cy,cz){var cA,cB;cA=null;cB=0;while(cB<cz.length&&cA==null){cy(cz[cB])?cA={$:1,$0:cB}:void 0;cB=cB+1;}return cA;};y.foldBack=function(cy,cz,cA){var cB,cC,cD,cE,cF;cB=cA;cD=cz.length;for(cE=1,cF=cD;cE<=cF;cE++)cB=cy(cz[cD-cE],cB);return cB;};y.concat=function(cy){return a.Array.prototype.concat.apply([],y.ofSeq(cy));};y.iter=function(cy,cz){var cA,cB;for(cA=0,cB=cz.length-1;cA<=cB;cA++)cy(cz[cA]);};y.pick=function(cy,cz){var cA;cA=y.tryPick(cy,cz);return cA==null?e.FailWith("KeyNotFoundException"):cA.$0;};y.create=function(cy,cz){var cA,cB,cC;cA=new a.Array(cy);for(cB=0,cC=cy-1;cB<=cC;cB++)cA[cB]=cz;return cA;};y.init=function(cy,cz){var cA,cB,cC;cy<0?e.FailWith("Negative size given."):null;cA=new a.Array(cy);for(cB=0,cC=cy-1;cB<=cC;cB++)cA[cB]=cz(cB);return cA;};y.forall=function(cy,cz){var cA,cB,cC,cD;cA=true;cB=0;cD=y.length(cz);while(cA&&cB<cD)if(cy(cz[cB]))cB=cB+1;else cA=false;return cA;};_4.ofArray=function(cy){var cz,cA,cB;cz=_5.Empty;for(cA=y.length(cy)-1,cB=0;cA>=cB;cA--)cz=new _5({$:1,$0:y.get(cy,cA),$1:cz});return cz;};_4.ofSeq=function(cy){var cz,cA,cB,cC,cD,cE;if(cy instanceof _5)return cy;else if(cy instanceof a.Array)return _4.ofArray(cy);else{cz=bc.Get(cy);try{cB=cz.MoveNext();if(!cB)cA=_5.Empty;else{cD=new _5({$:1});cC=cD;while(cB){cC.$0=cz.Current();cz.MoveNext()?cC=(cE=new _5({$:1}),cC.$1=cE,cE):cB=false;}cC.$1=_5.Empty;cA=cD;}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}}};_4.head=function(cy){return cy.$==1?cy.$0:_4.listEmpty();};_4.tail=function(cy){return cy.$==1?cy.$1:_4.listEmpty();};_4.listEmpty=function(){return e.FailWith("The input list was empty.");};bc.Get=function(cy){return cy instanceof a.Array?bc.ArrayEnumerator(cy):X.Equals(typeof cy,"string")?bc.StringEnumerator(cy):cy.GetEnumerator();};bc.ArrayEnumerator=function(cy){return new bo.New(0,null,function(cz){var cA;cA=cz.s;return cA<y.length(cy)&&(cz.c=y.get(cy,cA),cz.s=cA+1,true);},void 0);};bc.StringEnumerator=function(cy){return new bo.New(0,null,function(cz){var cA;cA=cz.s;return cA<cy.length&&(cz.c=cy[cA],cz.s=cA+1,true);},void 0);};bc.Get0=function(cy){return cy instanceof a.Array?bc.ArrayEnumerator(cy):X.Equals(typeof cy,"string")?bc.StringEnumerator(cy):"GetEnumerator0"in cy?cy.GetEnumerator0():cy.GetEnumerator();};bd=g.AttrProxy=cs.Class({},null,bd);bd.Create=function(cy,cz){return bz.Static(function(cA){bx.SetAttr(cA,cy,cz);});};bd.Concat=function(cy){var cz;cz=be.ofSeqNonCopying(cy);return be.TreeReduce(bz.EmptyAttr(),bd.Append,cz);};bd.Append=function(cy,cz){return bz.AppendTree(cy,cz);};bd.HandlerImpl=function(cy,cz){return bz.Static(function(cA){cA.addEventListener(cy,function(cB){return(cz(cA))(cB);},false);});};be.ofSeqNonCopying=function(cy){var cz,cA;if(cy instanceof a.Array)return cy;else if(cy instanceof _5)return y.ofList(cy);else if(cy===null)return[];else{cz=[];cA=bc.Get(cy);try{while(cA.MoveNext())cz.push(cA.Current());return cz;}finally{if(typeof cA=="object"&&"Dispose"in cA)cA.Dispose();}}};be.TreeReduce=function(cy,cz,cA){var cB;function cC(cD,cE){var cF,cG;return cE<=0?cy:cE===1&&(cD>=0&&cD<cB)?y.get(cA,cD):(cG=cE/2>>0,cz(cC(cD,cG),cC(cD+cG,cE-cG)));}cB=y.length(cA);return cC(0,cB);};be.MapTreeReduce=function(cy,cz,cA,cB){var cC;function cD(cE,cF){var cG,cH;return cF<=0?cz:cF===1&&(cE>=0&&cE<cC)?cy(y.get(cB,cE)):(cH=cF/2>>0,cA(cD(cE,cH),cD(cE+cH,cF-cH)));}cC=y.length(cB);return cD(0,cC);};be.mapInPlace=function(cy,cz){var cA,cB;for(cA=0,cB=cz.length-1;cA<=cB;cA++)cz[cA]=cy(cz[cA]);return cz;};bf=r.AssemblyName=cs.Class({get_Id:function(){return this.$0;}},null,bf);bg.B={$:0};bh.LinkElement=function(cy,cz){bh.InsertDoc(cy,cz,null);};bh.CreateTextNode=function(){return{Text:bx.CreateText(""),Dirty:false,Value:""};};bh.UpdateTextNode=function(cy,cz){cy.Value=cz;cy.Dirty=true;};bh.InsertDoc=function(cy,cz,cA){var cB;return cz!=null&&cz.$==1?bh.InsertNode(cy,cz.$0.El,cA):cz!=null&&cz.$==2?(cB=cz.$0,(cB.Dirty=false,bh.InsertDoc(cy,cB.Current,cA))):cz==null?cA:cz!=null&&cz.$==4?bh.InsertNode(cy,cz.$0.Text,cA):cz!=null&&cz.$==5?bh.InsertNode(cy,cz.$0,cA):cz!=null&&cz.$==6?y.foldBack(function(cC,cD){return cC==null||cC.constructor===bv?bh.InsertDoc(cy,cC,cD):bh.InsertNode(cy,cC,cD);},cz.$0.Els,cA):bh.InsertDoc(cy,cz.$0,bh.InsertDoc(cy,cz.$1,cA));};bh.CreateRunState=function(cy,cz){return b2.New(b3.get_Empty(),bh.CreateElemNode(cy,bz.EmptyAttr(),cz));};bh.PerformAnimatedUpdate=function(cy,cz,cA){var cB;return bH.get_UseAnimations()?(cB=null,_8.Delay(function(){var cC,cD,cE;cC=b3.FindAll(cA);cD=bh.ComputeChangeAnim(cz,cC);cE=bh.ComputeEnterAnim(cz,cC);return _8.Bind(bH.Play(bH.Append(cD,bh.ComputeExitAnim(cz,cC))),function(){return _8.Bind(bh.SyncElemNodesNextFrame(cy,cz),function(){return _8.Bind(bH.Play(cE),function(){cz.PreviousNodes=cC;return _8.Return(null);});});});})):bh.SyncElemNodesNextFrame(cy,cz);};bh.PerformSyncUpdate=function(cy,cz,cA){var cB;cB=b3.FindAll(cA);bh.SyncElemNode(cy,cz.Top);cz.PreviousNodes=cB;};bh.InsertNode=function(cy,cz,cA){bx.InsertAt(cy,cA,cz);return cz;};bh.CreateElemNode=function(cy,cz,cA){var cB;bh.LinkElement(cy,cA);cB=bz.Insert(cy,cz);return bS.New(cB,cA,null,cy,bP.Int(),cs.GetOptional(cB.OnAfterRender));};bh.SyncElemNodesNextFrame=function(cy,cz){function cA(cB){a.requestAnimationFrame(function(){bh.SyncElemNode(cy,cz.Top);cB();});}return bI.BatchUpdatesEnabled()?_8.FromContinuations(function(cB,cC,cD){return cA.apply(null,[cB,cC,cD]);}):(bh.SyncElemNode(cy,cz.Top),_8.Return(null));};bh.ComputeExitAnim=function(cy,cz){return bH.Concat(y.map(function(cA){return bz.GetExitAnim(cA.Attr);},b3.ToArray(b3.Except(cz,b3.Filter(function(cA){return bz.HasExitAnim(cA.Attr);},cy.PreviousNodes)))));};bh.ComputeEnterAnim=function(cy,cz){return bH.Concat(y.map(function(cA){return bz.GetEnterAnim(cA.Attr);},b3.ToArray(b3.Except(cy.PreviousNodes,b3.Filter(function(cA){return bz.HasEnterAnim(cA.Attr);},cz)))));};bh.ComputeChangeAnim=function(cy,cz){var cA;function cB(cC){return bz.HasChangeAnim(cC.Attr);}cA=function(cC){return b3.Filter(cB,cC);};return bH.Concat(y.map(function(cC){return bz.GetChangeAnim(cC.Attr);},b3.ToArray(b3.Intersect(cA(cy.PreviousNodes),cA(cz)))));};bh.SyncElemNode=function(cy,cz){!cy?bh.SyncElement(cz):void 0;bh.Sync(cz.Children);bh.AfterRender(cz);};bh.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bh.UpdateEmbedNode=function(cy,cz){cy.Current=cz;cy.Dirty=true;};bh.SyncElement=function(cy){function cz(cA){function cB(cC){var cD,cE;return cC!=null&&cC.$==0?cB(cC.$0)||cB(cC.$1):cC!=null&&cC.$==2?(cD=cC.$0,cD.Dirty||cB(cD.Current)):cC!=null&&cC.$==6&&(cE=cC.$0,cE.Dirty||y.exists(cz,cE.Holes));}return cB(cA.Children);}bz.Sync(cy.El,cy.Attr);cz(cy)?bh.DoSyncElement(cy):void 0;};bh.Sync=function(cy){var cz,cA;if(cy!=null&&cy.$==1)bh.SyncElemNode(false,cy.$0);else if(cy!=null&&cy.$==2)bh.Sync(cy.$0.Current);else if(cy==null);else if(cy!=null&&cy.$==5);else if(cy!=null&&cy.$==4){cz=cy.$0;cz.Dirty?(cz.Text.nodeValue=cz.Value,cz.Dirty=false):void 0;}else if(cy!=null&&cy.$==6){cA=cy.$0;y.iter(function(cB){bh.SyncElemNode(false,cB);},cA.Holes);y.iter(function(cB){bz.Sync(cB[0],cB[1]);},cA.Attrs);bh.AfterRender(cA);}else{bh.Sync(cy.$0);bh.Sync(cy.$1);}};bh.AfterRender=function(cy){var cz;cz=cs.GetOptional(cy.Render);cz!=null&&cz.$==1?(cz.$0(cy.El),cs.SetOptional(cy,"Render",null)):void 0;};bh.DoSyncElement=function(cy){var cz,cA,cB;function cC(cD,cE){var cF,cG;return cD!=null&&cD.$==1?cD.$0.El:cD!=null&&cD.$==2?(cF=cD.$0,cF.Dirty?(cF.Dirty=false,bh.InsertDoc(cz,cF.Current,cE)):cC(cF.Current,cE)):cD==null?cE:cD!=null&&cD.$==4?cD.$0.Text:cD!=null&&cD.$==5?cD.$0:cD!=null&&cD.$==6?(cG=cD.$0,(cG.Dirty?cG.Dirty=false:void 0,y.foldBack(function(cH,cI){return cH==null||cH.constructor===bv?cC(cH,cI):cH;},cG.Els,cE))):cC(cD.$0,cC(cD.$1,cE));}cz=cy.El;cl.Iter((cA=cy.El,function(cD){bx.RemoveNode(cA,cD);}),cl.Except(cl.DocChildren(cy),cl.Children(cy.El,cs.GetOptional(cy.Delimiters))));cC(cy.Children,(cB=cs.GetOptional(cy.Delimiters),cB!=null&&cB.$==1?cB.$0[1]:null));};bi.fetchAsmData=function(cy,cz){var cA,cB;cA=cz.$0;cB=null;return _8.Delay(function(){return _8.Bind(b7.AsyncMap(bO.asyncReadTextAtRuntime(false,"D:\\Abe\\CIPHERWorkspace\\FSharpStation\\src","","JSON","",cA.indexOf("/")!=-1?cA:cy+cA),function(cC){return X.Equals(typeof cC,"string")?cv.parse(cC):cC;}),function(cC){var cD,cE,cF,cG,cH,cI,cJ,cK;return _8.Return((cD=new bf({$:0,$0:(cF=(cE="asName",cE in cC?{$:1,$0:cC[cE]}:null),cF==null?null:cF.$0)}),(cG=new R({$:0,$0:cA}),(cH=new br({$:0,$0:(cJ=(cI="js",cI in cC?{$:1,$0:cC[cI]}:null),cJ==null?null:cJ.$0)}),(cK=y.map(function(cL){return new R({$:0,$0:cL});},cC.dependencies),_6.New(cD,cG,y.map(function(cL){var cM,cN;return bq.New(new bD({$:0,$0:(cN=(cM="moName",cM in cL?{$:1,$0:cL[cM]}:null),cN==null?null:cN.$0)}),y.map(function(cO){var cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1;cP=new bE({$:0,$0:(cR=(cQ="meName",cQ in cO?{$:1,$0:cO[cQ]}:null),cR==null?null:cR.$0)});cS=(cT=(cU="isField",cU in cO?{$:1,$0:cO[cU]}:null),(cV=cT==null?null:{$:1,$0:1*cT.$0},cV==null?null:cV.$0))===1;return bC.New(cP,bB.New(new bA({$:0,$0:(cY=(cW=cO.type,(cX="tName",cX in cW?{$:1,$0:cW[cX]}:null)),cY==null?null:cY.$0)}),new bf({$:0,$0:(c1=(cZ=cO.type,(c0="asm",c0 in cZ?{$:1,$0:cZ[c0]}:null)),c1==null?null:c1.$0)})),y.map(function(c2){var c3,c4,c5,c6;return bB.New(new bA({$:0,$0:(c4=(c3="tName",c3 in c2?{$:1,$0:c2[c3]}:null),c4==null?null:c4.$0)}),new bf({$:0,$0:(c6=(c5="asm",c5 in c2?{$:1,$0:c2[c5]}:null),c6==null?null:c6.$0)}));},cO.parms),cS);},cL.methods));},cC.modules),cK,cH))))));});});};bj.TryParse=function(cy){var cz;cz=ct.parse(cy);return a.isNaN(cz)?null:{$:1,$0:cz};};Y.TryParse=function(cy,cz,cA,cB){var cC,cD;cC=+cy;cD=cC===cC-cC%1&&cC>=cz&&cC<=cA;cD?cB.set(cC):void 0;return cD;};bk=g.ConcreteVar=cs.Class({get_View:function(){return this.view;},Set:function(cy){if(this.isConst)(function(cz){return cz("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cz){cu.log(cz);}));else{x.Obsolete(this.snap);this.current=cy;this.snap=x.New({$:2,$0:cy,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(cy){var cz;cz=cy(this.Get());cz!=null&&cz.$==1?this.Set(cz.$0):void 0;}},h,bk);bk.New=cs.Ctor(function(cy,cz,cA){var cB;cB=this;h.New.call(this);this.isConst=cy;this.current=cA;this.snap=cz;this.view=function(){return cB.snap;};this.id=bP.Int();},bk);bl.$cctor=function(){bl.$cctor=a.ignore;bl.EndPoint="?";bl.AjaxProvider=new bQ.New();};bm.alreadyAdded=function(){return e.FailWith("An item with the same key has already been added.");};bm.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};bn.tryGet=function(cy){var cz,cA,cB,cC;cz=bn.tryGetS(cy);return cz==null?null:(cA=cz.$0,(cB=G.tryHead(cA),cB!=null&&cB.$==1?(cC=V.array(cA,{$:1,$0:1},null),(bn.queues().Remove(cy),bn.queues().Add(cy,cC),{$:1,$0:cB.$0})):null));};bn.tryGetS=function(cy){return(W.tryParseWith(function(cz){var cA;cA=null;return[bn.queues().TryGetValue(cz,{get:function(){return cA;},set:function(cB){cA=cB;}}),cA];}))(cy);};bn.queues=function(){w.$cctor();return w.queues;};bn.add=function(cy,cz){var cA,cB;cA=(cB=bn.tryGetS(cy),cB==null?[cz]:(bn.queues().Remove(cy),cB.$0.concat([cz])));bn.queues().Add(cy,cA);};bo=bc.T=cs.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,bo);bo.New=cs.Ctor(function(cy,cz,cA,cB){f.New.call(this);this.s=cy;this.c=cz;this.n=cA;this.d=cB;},bo);bp.InMemory=function(cy){return new bR.New(cy);};bq.New=function(cy,cz){return{name:cy,methods:cz};};br=r.JSCode=cs.Class({get_Id:function(){return this.$0;}},null,br);bs.New=function(cy,cz){return{k:cy,ct:cz};};bt.$cctor=function(){bt.$cctor=a.ignore;bt.noneCT=bw.New(false,[]);bt.scheduler=new bU.New();bt.defCTS=[new bX.New()];bt.Zero=_8.Return();bt.GetCT=function(cy){cy.k({$:0,$0:cy.ct});};};bu.$cctor=function(){bu.$cctor=a.ignore;bu.dlls=["/dlls/WebSharper.Main.dll","/dlls/WebSharper.Collections.dll","/dlls/WebSharper.Control.dll","/dlls/WebSharper.Web.dll","/dlls/WebSharper.Sitelets.dll","/dlls/WebSharper.UI.dll","/dlls/WebSharper.UI.Templating.Runtime.dll","/dlls/WebSharper.Data.dll"];};G.last=function(cy){var cz,cA;cz=bc.Get(cy);try{if(!cz.MoveNext())cA=G.insufficient();else{while(cz.MoveNext());cA=cz.Current();}return cA;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};G.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};y.mapFold=function(cy,cz,cA){var cB,cC,cD,cE,cF;cC=new a.Array(cA.length);cB=cz;for(cD=0,cE=cA.length-1;cD<=cE;cD++){cF=cy(cB,cA[cD]);cC[cD]=cF[0];cB=cF[1];}return[cC,cB];};G.tryHead=function(cy){var cz;cz=bc.Get(cy);try{return cz.MoveNext()?{$:1,$0:cz.Current()}:null;}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}};bw.New=function(cy,cz){return{c:cy,r:cz};};bx.CreateElement=function(cy){return bx.Doc().createElement(cy);};bx.SetAttr=function(cy,cz,cA){cy.setAttribute(cz,cA);};bx.CreateText=function(cy){return bx.Doc().createTextNode(cy);};bx.ChildrenArray=function(cy){var cz,cA,cB;cz=[];for(cA=0,cB=cy.childNodes.length-1;cA<=cB;cA++)cz.push(cy.childNodes[cA]);return cz;};bx.Doc=function(){cb.$cctor();return cb.Doc;};bx.IterSelector=function(cy,cz,cA){var cB,cC,cD;cB=cy.querySelectorAll(cz);for(cC=0,cD=cB.length-1;cC<=cD;cC++)cA(cB[cC]);};bx.AddClass=function(cy,cz){var cA;cA=bx.getClass(cy);cA===""?bx.setClass(cy,cz):!bx.clsRE(cz).test(cA)?bx.setClass(cy,cA+" "+cz):void 0;};bx.RemoveClass=function(cy,cz){var cA;bx.setClass(cy,(cA=bx.clsRE(cz),bx.getClass(cy).replace(cA,function(cB,cC,cD){return cC===""||cD===""?"":" ";})));};bx.InsertAt=function(cy,cz,cA){var cB;if(!(cA.parentNode===cy&&cz===(cB=cA.nextSibling,X.Equals(cB,null)?null:cB)))cy.insertBefore(cA,cz);};bx.getClass=function(cy){return cy instanceof a.SVGElement?cy.getAttribute("class"):cy.className;};bx.setClass=function(cy,cz){if(cy instanceof a.SVGElement)cy.setAttribute("class",cz);else cy.className=cz;};bx.clsRE=function(cy){return new a.RegExp("(\\s+|^)"+cy+"(?:\\s+"+cy+")*(\\s+|$)","g");};bx.RemoveNode=function(cy,cz){if(cz.parentNode===cy)cy.removeChild(cz);};by.Value=function(cy){function cz(cA){return{$:1,$0:cA};}return by.CustomValue(cy,a.id,function(cA){return cz(a.id(cA));});};by.Class=function(cy){return by.ClassPred(cy,true);};by.CustomValue=function(cy,cz,cA){return by.CustomVar(cy,function(cB,cC){cB.value=cz(cC);},function(cB){return cA(cB.value);});};by.ClassPred=function(cy,cz){return bz.Static(function(cA){if(cz)bx.AddClass(cA,cy);else bx.RemoveClass(cA,cy);});};by.CustomVar=function(cy,cz,cA){function cB(cD,cE){return cy.UpdateMaybe(function(cF){var cG,cH;cG=cA(cD);return cG!=null&&cG.$==1&&(!X.Equals(cG.$0,cF)&&(cH=[cG,cG.$0],true))?cH[0]:null;});}function cC(cD,cE){var cF,cG;cF=cA(cD);return cF!=null&&cF.$==1&&(X.Equals(cF.$0,cE)&&(cG=cF.$0,true))?null:cz(cD,cE);}return bd.Concat([by.Handler("change",function(cD){return function(cE){return cB(cD,cE);};}),by.Handler("input",function(cD){return function(cE){return cB(cD,cE);};}),by.Handler("keypress",function(cD){return function(cE){return cB(cD,cE);};}),by.DynamicCustom(function(cD){return function(cE){return cC(cD,cE);};},cy.get_View())]);};by.Handler=function(cy,cz){return bz.Static(function(cA){cA.addEventListener(cy,function(cB){return(cz(cA))(cB);},false);});};by.DynamicCustom=function(cy,cz){return bz.Dynamic(cz,cy);};bz.Static=function(cy){return new bd({$:3,$0:cy});};bz.Updates=function(cy){return be.MapTreeReduce(function(cz){return cz.NChanged();},j.Const(),j.Map2Unit,cy.DynNodes);};bz.AppendTree=function(cy,cz){var cA;return cy===null?cz:cz===null?cy:(cA=new bd({$:2,$0:cy,$1:cz}),(bz.SetFlags(cA,bz.Flags(cy)|bz.Flags(cz)),cA));};bz.EmptyAttr=function(){cg.$cctor();return cg.EmptyAttr;};bz.Insert=function(cy,cz){var cA,cB,cC;function cD(cE){if(!(cE===null))if(cE!=null&&cE.$==1)cA.push(cE.$0);else if(cE!=null&&cE.$==2){cD(cE.$0);cD(cE.$1);}else if(cE!=null&&cE.$==3)cE.$0(cy);else if(cE!=null&&cE.$==4)cB.push(cE.$0);}cA=[];cB=[];cD(cz);cC=cA.slice(0);return b_.New(cy,bz.Flags(cz),cC,cB.length===0?null:{$:1,$0:function(cE){G.iter(function(cF){cF(cE);},cB);}});};bz.HasExitAnim=function(cy){var cz;cz=2;return(cy.DynFlags&cz)===cz;};bz.GetExitAnim=function(cy){return bz.GetAnim(cy,function(cz,cA){return cz.NGetExitAnim(cA);});};bz.HasEnterAnim=function(cy){var cz;cz=1;return(cy.DynFlags&cz)===cz;};bz.GetEnterAnim=function(cy){return bz.GetAnim(cy,function(cz,cA){return cz.NGetEnterAnim(cA);});};bz.HasChangeAnim=function(cy){var cz;cz=4;return(cy.DynFlags&cz)===cz;};bz.GetChangeAnim=function(cy){return bz.GetAnim(cy,function(cz,cA){return cz.NGetChangeAnim(cA);});};bz.SetFlags=function(cy,cz){cy.flags=cz;};bz.Flags=function(cy){return cy!==null&&cy.hasOwnProperty("flags")?cy.flags:0;};bz.GetAnim=function(cy,cz){return bH.Concat(y.map(function(cA){return cz(cA,cy.DynElem);},cy.DynNodes));};bz.Sync=function(cy,cz){y.iter(function(cA){cA.NSync(cy);},cz.DynNodes);};bz.Dynamic=function(cy,cz){return new bd({$:1,$0:new cm.New(cy,cz)});};bA=r.TypeName=cs.Class({get_Id:function(){return this.$0;}},null,bA);bB.New=function(cy,cz){return{name:cy,asm:cz};};bC.New=function(cy,cz,cA,cB){return{name:cy,retType:cz,parms:cA,isField:cB};};bD=r.ModuleName=cs.Class({get_Id2:function(){return U.Replace(this.get_Id(),"+",".");},get_Id:function(){return this.$0;}},null,bD);bE=r.MethodName=cs.Class({get_Id:function(){return this.$0;}},null,bE);bF.$cctor=function(){bF.$cctor=a.ignore;bF.LoadedTemplates=new _3.New$5();bF.LocalTemplatesLoaded=false;bF.TextHoleRE="\\${([^}]+)}";};bG=_2.HashSet=cs.Class({Add:function(cy){return this.add(cy);},Contains:function(cy){var cz;cz=this.data[this.hash(cy)];return cz==null?false:this.arrContains(cy,cz);},add:function(cy){var cz,cA;cz=this.hash(cy);cA=this.data[cz];return cA==null?(this.data[cz]=[cy],this.count=this.count+1,true):this.arrContains(cy,cA)?false:(cA.push(cy),this.count=this.count+1,true);},arrContains:function(cy,cz){var cA,cB,cC,cD;cA=true;cB=0;cD=cz.length;while(cA&&cB<cD)if(this.equals.apply(null,[cz[cB],cy]))cA=false;else cB=cB+1;return!cA;},ExceptWith:function(cy){var cz;cz=bc.Get(cy);try{while(cz.MoveNext())this.Remove(cz.Current());}finally{if(typeof cz=="object"&&"Dispose"in cz)cz.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cy){var cz,cA,cB,cC;cz=0;cA=ck.concat(this.data);for(cB=0,cC=cA.length-1;cB<=cC;cB++)y.set(cy,cB,cA[cB]);},IntersectWith:function(cy){var cz,cA,cB,cC,cD;cz=new bG.New$4(cy,this.equals,this.hash);cA=ck.concat(this.data);for(cB=0,cC=cA.length-1;cB<=cC;cB++){cD=cA[cB];!cz.Contains(cD)?this.Remove(cD):void 0;}},Remove:function(cy){var cz;cz=this.data[this.hash(cy)];return cz==null?false:this.arrRemove(cy,cz)&&(this.count=this.count-1,true);},arrRemove:function(cy,cz){var cA,cB,cC,cD;cA=true;cB=0;cD=cz.length;while(cA&&cB<cD)if(this.equals.apply(null,[cz[cB],cy])){cz.splice.apply(cz,[cB,1]);cA=false;}else cB=cB+1;return!cA;},GetEnumerator:function(){return bc.Get(ck.concat(this.data));},GetEnumerator0:function(){return bc.Get(ck.concat(this.data));}},f,bG);bG.New$3=cs.Ctor(function(){bG.New$4.call(this,[],X.Equals,X.Hash);},bG);bG.New$4=cs.Ctor(function(cy,cz,cA){var cB;f.New.call(this);this.equals=cz;this.hash=cA;this.data=[];this.count=0;cB=bc.Get(cy);try{while(cB.MoveNext())this.add(cB.Current());}finally{if(typeof cB=="object"&&"Dispose"in cB)cB.Dispose();}},bG);bG.New$2=cs.Ctor(function(cy){bG.New$4.call(this,cy,X.Equals,X.Hash);},bG);bH.get_UseAnimations=function(){return b4.UseAnimations();};bH.Play=function(cy){var cz;cz=null;return _8.Delay(function(){return _8.Bind(bH.Run(a.ignore,b4.Actions(cy)),function(){b4.Finalize(cy);return _8.Return(null);});});};bH.Append=function(cy,cz){return{$:0,$0:cd.Append(cy.$0,cz.$0)};};bH.Run=function(cy,cz){var cA;function cB(cC){function cD(cE,cF){var cG;cG=cF-cE;cz.Compute(cG);cy();return cG<=cA?void a.requestAnimationFrame(function(cH){cD(cE,cH);}):cC();}a.requestAnimationFrame(function(cE){cD(cE,cE);});}cA=cz.Duration;return cA===0?_8.Zero():_8.FromContinuations(function(cC,cD,cE){return cB.apply(null,[cC,cD,cE]);});};bH.Concat=function(cy){return{$:0,$0:cd.Concat(G.map(b4.List,cy))};};bH.get_Empty=function(){return{$:0,$0:cd.Empty()};};bI.BatchUpdatesEnabled=function(){b5.$cctor();return b5.BatchUpdatesEnabled;};bK.StartProcessor=function(cy){var cz;function cA(){var cB;cB=null;return _8.Delay(function(){return _8.Bind(cy,function(){var cC;cC=cz[0];return cC===1?(cz[0]=0,_8.Zero()):cC===2?(cz[0]=1,cA()):_8.Zero();});});}cz=[0];return function(){var cB;cB=cz[0];cB===0?(cz[0]=1,_8.Start(cA(),null)):cB===1?cz[0]=2:void 0;};};bO.asyncReadTextAtRuntime=function(cy,cz,cA,cB,cC,cD){function cE(cF,cG){var cH,cI,cJ,cK,cL;cH=(cI=cD.toLowerCase(),U.StartsWith(cI,"jsonp|")?[cD.substring(6),true]:U.StartsWith(cI,"json|")?[cD.substring(5),false]:[cD,false]);cJ=(cK={},cK.dataType="json",cK.success=function(cM){return cF(cM);},cK.error=function(cM,cN,cO){return cG(new bV(cO));},cK);cH[1]?(cL=b8.randomFunctionName(),cJ.dataType="jsonp",cJ.jsonp="prefix",cJ.jsonpCallback="jsonp"+cL):void 0;cw.ajax(cH[0],cJ);}return _8.FromContinuations(function(cF,cG,cH){return cE.apply(null,[cF,cG,cH]);});};bP.Int=function(){bP.set_counter(bP.counter()+1);return bP.counter();};bP.set_counter=function(cy){cf.$cctor();cf.counter=cy;};bP.counter=function(){cf.$cctor();return cf.counter;};bQ=N.XhrProvider=cs.Class({Async:function(cy,cz,cA,cB,cC){N.ajax(true,cy,cz,cA,cB,cC,function(){N.ajax(true,cy,cz,cA,cB,cC,void 0);});}},f,bQ);bQ.New=cs.Ctor(function(){f.New.call(this);},bQ);bR=bp.ArrayStorage=cs.Class({SSet:function(cy){return y.ofSeq(cy);},SInit:function(){return this.init;}},f,bR);bR.New=cs.Ctor(function(cy){f.New.call(this);this.init=cy;},bR);bS=g.DocElemNode=cs.Class({Equals:function(cy){return this.ElKey===cy.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bS);bS.New=function(cy,cz,cA,cB,cC,cD){var cE;return new bS((cE={Attr:cy,Children:cz,El:cB,ElKey:cC},(cs.SetOptional(cE,"Delimiters",cA),cs.SetOptional(cE,"Render",cD),cE)));};bU=_8.Scheduler=cs.Class({Fork:function(cy){var cz;cz=this;this.robin.push(cy);this.idle?(this.idle=false,a.setTimeout(function(){cz.tick();},0)):void 0;},tick:function(){var cy,cz,cA;cz=this;cA=ct.now();cy=true;while(cy)if(this.robin.length===0){this.idle=true;cy=false;}else{(this.robin.shift())();ct.now()-cA>40?(a.setTimeout(function(){cz.tick();},0),cy=false):void 0;}}},f,bU);bU.New=cs.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bU);bW=d.OperationCanceledException=cs.Class({},bV,bW);bW.New=cs.Ctor(function(cy){bW.New$1.call(this,"The operation was canceled.",null,cy);},bW);bW.New$1=cs.Ctor(function(cy,cz,cA){this.message=cy;this.inner=cz;bv.setPrototypeOf(this,bW.prototype);this.ct=cA;},bW);bX=d.CancellationTokenSource=cs.Class({},f,bX);bX.New=cs.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bX);bY=g.Elt=cs.Class({},K,bY);bY.New=function(cy,cz,cA){var cB,cC;cB=bh.CreateElemNode(cy,cz,cA.docNode);cC=ca.Create(cA.updates);return new bY.New$1({$:1,$0:cB},j.Map2Unit(bz.Updates(cB.Attr),cC.v),cy,cC);};bY.New$1=cs.Ctor(function(cy,cz,cA,cB){K.New.call(this,cy,cz);this.docNode$1=cy;this.updates$1=cz;this.elt=cA;this.rvUpdates=cB;},bY);bZ.convertTextNode=function(cy){var cz,cA,cB,cC,cD,cE;cz=null;cA=0;cC=cy.textContent;cD=new a.RegExp(Q.TextHoleRE(),"g");while(cz=cD.exec(cC),cz!==null){cy.parentNode.insertBefore(self.document.createTextNode(V.string(cC,{$:1,$0:cA},{$:1,$0:cD.lastIndex-y.get(cz,0).length-1})),cy);cA=cD.lastIndex;cE=self.document.createElement("span");cE.setAttribute("ws-replace",y.get(cz,1).toLowerCase());cy.parentNode.insertBefore(cE,cy);}cD.lastIndex=0;cy.textContent=V.string(cC,{$:1,$0:cA},null);};bZ.failNotLoaded=function(cy){cu.warn("Instantiating non-loaded template",cy);};bZ.fillTextHole=function(cy,cz,cA){var cB;cB=cy.querySelector("[ws-replace]");return X.Equals(cB,null)?(cu.warn("Filling non-existent text hole",cA),null):(cB.parentNode.replaceChild(new a.Text(cz),cB),{$:1,$0:cB.getAttribute("ws-replace")});};bZ.removeHolesExcept=function(cy,cz){function cA(cB){bx.IterSelector(cy,"["+cB+"]",function(cC){if(!cz.Contains(cC.getAttribute(cB)))cC.removeAttribute(cB);});}cA("ws-attr");cA("ws-onafterrender");cA("ws-var");bx.IterSelector(cy,"[ws-hole]",function(cB){if(!cz.Contains(cB.getAttribute("ws-hole"))){cB.removeAttribute("ws-hole");while(cB.hasChildNodes())cB.removeChild(cB.lastChild);}});bx.IterSelector(cy,"[ws-replace]",function(cB){if(!cz.Contains(cB.getAttribute("ws-replace")))cB.parentNode.removeChild(cB);});bx.IterSelector(cy,"[ws-on]",function(cB){cB.setAttribute("ws-on",U.concat(" ",y.filter(function(cC){return cz.Contains(y.get(U.SplitChars(cC,[":"],1),1));},U.SplitChars(cB.getAttribute("ws-on"),[" "],1))));});bx.IterSelector(cy,"[ws-attr-holes]",function(cB){var cC,cD,cE,cF,cG;cC=U.SplitChars(cB.getAttribute("ws-attr-holes"),[" "],1);for(cD=0,cE=cC.length-1;cD<=cE;cD++){cF=y.get(cC,cD);cB.setAttribute(cF,(cG=new a.RegExp(Q.TextHoleRE(),"g"),cB.getAttribute(cF).replace(cG,function(cH,cI){return cz.Contains(cI)?cH:"";})));}});};bZ.fillInstanceAttrs=function(cy,cz){var cA,cB,cC,cD,cE;bZ.convertAttrs(cz);cA=cz.nodeName.toLowerCase();cB=cy.querySelector("[ws-attr="+cA+"]");if(X.Equals(cB,null))cu.warn("Filling non-existent attr hole",cA);else{cB.removeAttribute("ws-attr");for(cC=0,cD=cz.attributes.length-1;cC<=cD;cC++){cE=cz.attributes.item(cC);cE.name==="class"&&cB.hasAttribute("class")?cB.setAttribute("class",cB.getAttribute("class")+" "+cE.nodeValue):cB.setAttribute(cE.name,cE.nodeValue);}}};bZ.mapHoles=function(cy,cz){function cA(cB){bx.IterSelector(cy,"["+cB+"]",function(cC){var cD,cE;cD=(cE=null,[cz.TryGetValue(cC.getAttribute(cB).toLowerCase(),{get:function(){return cE;},set:function(cF){cE=cF;}}),cE]);cD[0]?cC.setAttribute(cB,cD[1]):void 0;});}cA("ws-hole");cA("ws-replace");cA("ws-attr");cA("ws-onafterrender");cA("ws-var");bx.IterSelector(cy,"[ws-on]",function(cB){cB.setAttribute("ws-on",U.concat(" ",y.map(function(cC){var cD,cE,cF;cD=U.SplitChars(cC,[":"],1);cE=(cF=null,[cz.TryGetValue(y.get(cD,1),{get:function(){return cF;},set:function(cG){cF=cG;}}),cF]);return cE[0]?y.get(cD,0)+":"+cE[1]:cC;},U.SplitChars(cB.getAttribute("ws-on"),[" "],1))));});bx.IterSelector(cy,"[ws-attr-holes]",function(cB){var cC,cD,cE;cC=U.SplitChars(cB.getAttribute("ws-attr-holes"),[" "],1);for(cD=0,cE=cC.length-1;cD<=cE;cD++)(function(){var cF;function cG(cH,cI){var cJ;cJ=e.KeyValue(cI);return cH.replace(new a.RegExp("\\${"+cJ[0]+"}","ig"),"${"+cJ[1]+"}");}cF=y.get(cC,cD);return cB.setAttribute(cF,(((cs.Curried3(G.fold))(cG))(cB.getAttribute(cF)))(cz));}());});};bZ.fill=function(cy,cz,cA){while(true)if(cy.hasChildNodes())cA=cz.insertBefore(cy.lastChild,cA);else return null;};bZ.convertAttrs=function(cy){var cA,cB,cC,cD,cE,cF,cG,cH;function cz(cI){var cJ;cJ=cy.getAttribute(cI);cJ===null?void 0:cy.setAttribute(cI,cJ.toLowerCase());}cA=cy.attributes;cB=[];cC=[];cD=[];for(cE=0,cF=cA.length-1;cE<=cF;cE++){cG=cA.item(cE);U.StartsWith(cG.nodeName,"ws-on")&&cG.nodeName!=="ws-onafterrender"&&cG.nodeName!=="ws-on"?(cB.push(cG.nodeName),cC.push(V.string(cG.nodeName,{$:1,$0:"ws-on".length},null)+":"+cG.nodeValue.toLowerCase())):!U.StartsWith(cG.nodeName,"ws-")&&(new a.RegExp(Q.TextHoleRE())).test(cG.nodeValue)?(cG.nodeValue=(cH=new a.RegExp(Q.TextHoleRE(),"g"),cG.nodeValue.replace(cH,function(cI,cJ){return"${"+cJ.toLowerCase()+"}";})),cD.push(cG.nodeName)):void 0;}!(cC.length==0)?cy.setAttribute("ws-on",U.concat(" ",cC)):void 0;!(cD.length==0)?cy.setAttribute("ws-attr-holes",U.concat(" ",cD)):void 0;cz("ws-hole");cz("ws-replace");cz("ws-attr");cz("ws-onafterrender");cz("ws-var");y.iter(function(cI){cy.removeAttribute(cI);},cB);};b0=_2.KeyCollection=cs.Class({GetEnumerator$1:function(){return bc.Get(G.map(function(cy){return cy.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,b0);b0.New=cs.Ctor(function(cy){f.New.call(this);this.d=cy;},b0);b2.New=function(cy,cz){return{PreviousNodes:cy,Top:cz};};b3.get_Empty=function(){return{$:0,$0:new bG.New$3()};};b3.FindAll=function(cy){var cz;function cA(cC){if(cC!=null&&cC.$==0){cA(cC.$0);cA(cC.$1);}else if(cC!=null&&cC.$==1)cB(cC.$0);else if(cC!=null&&cC.$==2)cA(cC.$0.Current);else if(cC!=null&&cC.$==6)y.iter(cB,cC.$0.Holes);}function cB(cC){cz.push(cC);cA(cC.Children);}cz=[];cA(cy);return{$:0,$0:new bG.New$2(cz)};};b3.Filter=function(cy,cz){return{$:0,$0:cj.Filter(cy,cz.$0)};};b3.Except=function(cy,cz){return{$:0,$0:cj.Except(cy.$0,cz.$0)};};b3.ToArray=function(cy){return cj.ToArray(cy.$0);};b3.Intersect=function(cy,cz){return{$:0,$0:cj.Intersect(cy.$0,cz.$0)};};b4.UseAnimations=function(){cc.$cctor();return cc.UseAnimations;};b4.Actions=function(cy){return b4.ConcatActions(y.choose(function(cz){return cz.$==1?{$:1,$0:cz.$0}:null;},cd.ToArray(cy.$0)));};b4.Finalize=function(cy){y.iter(function(cz){if(cz.$==0)cz.$0();},cd.ToArray(cy.$0));};b4.ConcatActions=function(cy){var cz,cA,cB,cC;cz=be.ofSeqNonCopying(cy);cA=y.length(cz);return cA===0?b4.Const():cA===1?y.get(cz,0):(cB=G.max(G.map(function(cD){return cD.Duration;},cz)),(cC=y.map(function(cD){return b4.Prolong(cB,cD);},cz),b4.Def(cB,function(cD){y.iter(function(cE){cE.Compute(cD);},cC);})));};b4.List=function(cy){return cy.$0;};b4.Const=function(cy){return b4.Def(0,function(){return cy;});};b4.Def=function(cy,cz){return{Compute:cz,Duration:cy};};b4.Prolong=function(cy,cz){var cA,cB,cC;cA=cz.Compute;cB=cz.Duration;cC=cn.Create(function(){return cz.Compute(cz.Duration);});return{Compute:function(cD){return cD>=cB?cC.f():cA(cD);},Duration:cy};};b5.$cctor=function(){b5.$cctor=a.ignore;b5.BatchUpdatesEnabled=true;};b7.AsyncMap=function(cy,cz){var cA;cA=null;return _8.Delay(function(){return _8.Bind(cy,function(cB){return _8.Return(cz(cB));});});};b8.randomFunctionName=function(){var cy;return U.ReplaceChar((cy=_0.NewGuid(),a.String(cy)).toLowerCase(),"-","_");};b_.New=function(cy,cz,cA,cB){var cC;cC={DynElem:cy,DynFlags:cz,DynNodes:cA};cs.SetOptional(cC,"OnAfterRender",cB);return cC;};b$.Activate=function(cy){var cz,cB,cC,cD,cE,cF,cG;function cA(cH){var cI,cJ,cK,cL,cM;if(X.Equals(cH,null))return cH;else if(typeof cH=="object"){if(cH instanceof a.Array)return b$.shallowMap(cA,cH);else{cI=b$.shallowMap(cA,cH.$V);cJ=cH.$T;if(cJ===void 0)return cI;else{cK=y.get(cB,cJ);if(cK===1)return _4.ofArray(cI);else if(cK===2)return self.WebSharper.Decimal.CreateDecimalBits(cI);else{cL=new(y.get(cB,cJ))();for(var cN in cI)if(function(cO){cL[cO]=cI[cO];return false;}(cN))break;return cL;}}}}else return cH;}cB=cy?cy.$TYPES:void 0;if(cB===void 0)cz=cy;else{for(cC=0,cD=y.length(cB)-1;cC<=cD;cC++){cG=y.get(cB,cC);switch(!X.Equals(cG,null)&&cG.length===3?y.get(cG,0)==="WebSharper"?y.get(cG,1)==="List"?y.get(cG,2)==="T"?0:(cF=cG,2):(cF=cG,2):(cF=cG,2):!X.Equals(cG,null)&&cG.length===2?y.get(cG,0)==="WebSharper"?y.get(cG,1)==="Decimal"?1:(cF=cG,2):(cF=cG,2):(cF=cG,2)){case 0:cE=1;break;case 1:cE=2;break;case 2:cE=b$.lookup(cF);break;}y.set(cB,cC,cE);}cz=cy.$DATA;}return cA(cz);};b$.shallowMap=function(cy,cz){var cA,cB;if(cz instanceof a.Array)return y.map(cy,cz);else if(typeof cz=="object"){cA={};for(var cC in cz)if(function(cD){cA[cD]=cy(cz[cD]);return false;}(cC))break;return cA;}else return cz;};b$.lookup=function(cy){var cz,cA,cB,cC,cD;cB=y.length(cy);cz=self;cA=0;while(cA<cB){cC=y.get(cy,cA);cD=cz[cC];!X.Equals(typeof cD,void 0)?(cz=cD,cA=cA+1):e.FailWith("Invalid server reply. Failed to find type: "+cC);}return cz;};ca=g.Updates=cs.Class({},null,ca);ca.Create=function(cy){var cz;cz=null;cz=ca.New(cy,null,function(){var cA;cA=cz.s;return cA===null?(cA=x.Copy(cz.c()),cz.s=cA,x.WhenObsoleteRun(cA,function(){cz.s=null;}),cA):cA;});return cz;};ca.New=function(cy,cz,cA){return new ca({c:cy,s:cz,v:cA});};cb.$cctor=function(){cb.$cctor=a.ignore;cb.Doc=self.document;};cc.$cctor=function(){cc.$cctor=a.ignore;cc.CubicInOut=ci.Custom(function(cy){var cz;cz=cy*cy;return 3*cz-2*(cz*cy);});cc.UseAnimations=true;};cd.Append=function(cy,cz){return cy.$==0?cz:cz.$==0?cy:{$:2,$0:cy,$1:cz};};cd.ToArray=function(cy){var cz;function cA(cB){if(cB.$==1)cz.push(cB.$0);else if(cB.$==2){cA(cB.$0);cA(cB.$1);}else if(cB.$==3)y.iter(function(cC){cz.push(cC);},cB.$0);}cz=[];cA(cy);return cz.slice(0);};cd.Concat=function(cy){var cz;cz=be.ofSeqNonCopying(cy);return be.TreeReduce(cd.Empty(),cd.Append,cz);};cd.Empty=function(){co.$cctor();return co.Empty;};ce=d.FormatException=cs.Class({},bV,ce);ce.New$1=cs.Ctor(function(cy){this.message=cy;bv.setPrototypeOf(this,ce.prototype);},ce);cf.$cctor=function(){cf.$cctor=a.ignore;cf.counter=0;};cg.$cctor=function(){cg.$cctor=a.ignore;cg.EmptyAttr=null;};ch.Clear=function(cy){cy.splice(0,y.length(cy));};ci=g.Easing=cs.Class({},f,ci);ci.Custom=function(cy){return new ci.New(cy);};ci.New=cs.Ctor(function(cy){f.New.call(this);this.transformTime=cy;},ci);cj.Filter=function(cy,cz){return new bG.New$2(y.filter(cy,cj.ToArray(cz)));};cj.Except=function(cy,cz){var cA;cA=new bG.New$2(cj.ToArray(cz));cA.ExceptWith(cj.ToArray(cy));return cA;};cj.ToArray=function(cy){var cz;cz=y.create(cy.get_Count(),void 0);cy.CopyTo(cz);return cz;};cj.Intersect=function(cy,cz){var cA;cA=new bG.New$2(cj.ToArray(cy));cA.IntersectWith(cj.ToArray(cz));return cA;};ck.concat=function(cy){var cz,cA;cz=[];for(var cB in cy)cz.push.apply(cz,cy[cB]);return cz;};cl.Children=function(cy,cz){var cA,cB,cC;if(cz!=null&&cz.$==1){cC=[];cA=cz.$0[0].nextSibling;while(cA!==cz.$0[1]){cC.push(cA);cA=cA.nextSibling;}return{$:0,$0:cC};}else return{$:0,$0:y.init(cy.childNodes.length,(cB=cy.childNodes,function(cD){return cB[cD];}))};};cl.Except=function(cy,cz){var cA;cA=cy.$0;return{$:0,$0:y.filter(function(cB){return y.forall(function(cC){return!(cB===cC);},cA);},cz.$0)};};cl.Iter=function(cy,cz){y.iter(cy,cz.$0);};cl.DocChildren=function(cy){var cz;function cA(cB){if(cB!=null&&cB.$==2)cA(cB.$0.Current);else if(cB!=null&&cB.$==1)cz.push(cB.$0.El);else if(cB==null);else if(cB!=null&&cB.$==5)cz.push(cB.$0);else if(cB!=null&&cB.$==4)cz.push(cB.$0.Text);else if(cB!=null&&cB.$==6)y.iter(function(cC){if(cC==null||cC.constructor===bv)cA(cC);else cz.push(cC);},cB.$0.Els);else{cA(cB.$0);cA(cB.$1);}}cz=[];cA(cy.Children);return{$:0,$0:be.ofSeqNonCopying(cz)};};cm=g.DynamicAttrNode=cs.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cy){return bH.get_Empty();},NGetEnterAnim:function(cy){return bH.get_Empty();},NGetChangeAnim:function(cy){return bH.get_Empty();},NSync:function(cy){if(this.dirty){(this.push(cy))(this.value);this.dirty=false;}}},f,cm);cm.New=cs.Ctor(function(cy,cz){var cA;cA=this;f.New.call(this);this.push=cz;this.value=void 0;this.dirty=false;this.updates=j.Map(function(cB){cA.value=cB;cA.dirty=true;},cy);},cm);cn.Create=function(cy){return cq.New(false,cy,cn.forceLazy);};cn.forceLazy=function(){var cy;cy=this.v();this.c=true;this.v=cy;this.f=cn.cachedLazy;return cy;};cn.cachedLazy=function(){return this.v;};co.$cctor=function(){co.$cctor=a.ignore;co.Empty={$:0};};cq.New=function(cy,cz,cA){return{c:cy,v:cz,f:cA};};j.Sink(function(cy){a.postMessage({$:3,$0:cy});},i.wasmStatusV().get_View());a.onmessage=function(cy){return n.receiveMessage(function(cz){o.loadInThisThread(cz);},cy);};p.set_messaging(q.New(function(cy){return function(cz){return self.WASM_WsTranslator_FsRoot_WsTranslator_runRpc(cy,cz);};},function(cy){a.postMessage({$:0,$0:cy[0],$1:cy[1]});},function(cy){a.postMessage({$:1,$0:cy[0],$1:cy[1]});},function(cy){a.postMessage({$:2,$0:cy});}));}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptSkipAssemblyDir = true;
  IntelliFactory.Runtime.Start();
}

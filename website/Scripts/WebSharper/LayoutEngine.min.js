(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.String=c.String||{};e=c.ParseO=c.ParseO||{};f=b.LibraryJS=b.LibraryJS||{};g=f.REGEX=f.REGEX||{};h=f.Hoverable=f.Hoverable||{};i=h.Hoverable=h.Hoverable||{};j=f.ResizeObserver=f.ResizeObserver||{};k=a.WebSharper;l=k&&k.Obj;m=f.WebComponent=f.WebComponent||{};n=m.WcTabStrip=m.WcTabStrip||{};o=n.WcTabStripT=n.WcTabStripT||{};p=m.WcSplitter=m.WcSplitter||{};q=p.WcSplitterT=p.WcSplitterT||{};r=f.AppFramework=f.AppFramework||{};s=r.PlugInVar=r.PlugInVar||{};t=r.PlugInView=r.PlugInView||{};u=r.PlugInDoc=r.PlugInDoc||{};v=r.PlugInAction=r.PlugInAction||{};w=r.PlugInQuery=r.PlugInQuery||{};x=r.PlugIn=r.PlugIn||{};y=f.LayoutEngine=f.LayoutEngine||{};z=f.LayoutEngineModule=f.LayoutEngineModule||{};A=z.Measures=z.Measures||{};B=z.Layout=z.Layout||{};C=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};D=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};E=a.GeneratedPrintf=a.GeneratedPrintf||{};F=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};G=k&&k.Strings;H=k&&k.Slice;I=k&&k.Seq;J=k&&k.Arrays;K=k&&k.Char;L=k&&k.List;M=k&&k.Unchecked;N=k&&k.CancellationTokenSource;O=k&&k.Concurrency;P=k&&k.Utils;Q=a.console;R=a.IntelliFactory;S=R&&R.Runtime;T=k&&k.UI;U=T&&T.DomUtility;V=T&&T.Doc;W=T&&T.View;X=T&&T.AttrModule;Y=T&&T.AttrProxy;Z=T&&T.Var$1;_0=a.Node;_1=k&&k.Operators;_2=T&&T.Client;_3=_2&&_2.Templates;_4=a.Reflect;_5=a.Object;_6=T&&T.FromView;_7=T&&T.Templating;_8=_7&&_7.Runtime;_9=_8&&_8.Server;_=_9&&_9.ProviderBuilder;$=_9&&_9.Handler;ba=_9&&_9.TemplateInstance;bb=a.Math;bc=a.System;bd=bc&&bc.Guid;be=k&&k.Lazy;bf=k&&k.DateUtil;bg=k&&k.Numeric;bh=T&&T.ListModel;bi=k&&k.Collections;bj=bi&&bi.Dictionary;d.EndsWith=function(bk,bl){return G.EndsWith(bl,bk)?{$:1,$0:H.string(bl,{$:1,$0:0},{$:1,$0:bl.length-bk.length-1})}:null;};d.StartsWith=function(bk,bl){return G.StartsWith(bl,bk)?{$:1,$0:H.string(bl,{$:1,$0:bk.length},null)}:null;};d.skipLastLine=function(){C.$cctor();return C.skipLastLine;};d.indentStr=function(bk){function bl(bn){return d.indent(bk,bn);}function bm(bn){return G.concat("\n",bn);}return function(bn){return bm(bl(bn));};};d.unindentStr=function(){C.$cctor();return C.unindentStr;};d.indent=function(bk,bl){var bm,bn;bm=G.SplitChars(bl,["\n"],0);return I.map((bn=G.replicate(bk," "),function(bo){return bn+bo;}),bm);};d.unindent=function(bk){var bl,bm,bn,bo;bl=G.SplitChars(bk,["\n"],0);bm=(bn=I.tryFindIndex(function(bp){return" "!==bp;},(bo=I.tryFind(function(bp){return G.Trim(bp)!=="";},bl),bo==null?"":bo.$0)),bn==null?0:bn.$0);return I.filter(function(bp){return!G.StartsWith(bp,"# 1 ");},I.map(function(bp){return bp.length<=bm?"":bp.substring(bm);},bl));};d.skipFirstLine=function(bk){var bl;bl=bk.indexOf("\n");return bl<0?"":H.string(bk,{$:1,$0:bl+1},null);};d.append=function(bk,bl){return bk+bl;};d.trim=function(bk){return G.Trim(bk);};d.contains=function(bk,bl){return bl.indexOf(bk)!=-1;};d.delimitedO=function(bk,bl,bm){var bn,bo,bp,bq,br;bn=d.splitInTwoO(bk,bm);return bn==null?null:(bo=bn.$0,(bp=bo[0],(bq=d.splitInTwoO(bl,bo[1]),bq==null?null:{$:1,$0:(br=bq.$0,[bp,br[0],br[1]])})));};d.splitInTwoO=function(bk,bl){var bm;bm=bl.indexOf(bk);return bm===-1?null:{$:1,$0:[c["String.Left"](bl,bm),bl.substring(bm+bk.length)]};};d.splitByChar=function(bk,bl){return G.SplitChars(bl,[bk],0);};e.Guid=function(){C.$cctor();return C["|Guid|_|"];};e.Double=function(){C.$cctor();return C["|Double|_|"];};e.Single=function(){C.$cctor();return C["|Single|_|"];};e.Int64=function(){C.$cctor();return C["|Int64|_|"];};e.Int=function(){C.$cctor();return C["|Int|_|"];};e.Date=function(){C.$cctor();return C["|Date|_|"];};e.parseGuidO=function(){C.$cctor();return C.parseGuidO;};e.parseDoubleO=function(){C.$cctor();return C.parseDoubleO;};e.parseSingleO=function(){C.$cctor();return C.parseSingleO;};e.parseInt64O=function(){C.$cctor();return C.parseInt64O;};e.parseIntO=function(){C.$cctor();return C.parseIntO;};e.parseDateO=function(){C.$cctor();return C.parseDateO;};e.parseDateO2=function(){C.$cctor();return C.parseDateO2;};e.tryParseWith=function(bk){function bl(bm,bn){return bm?{$:1,$0:bn}:null;}return function(bm){return bl.apply(null,bk(bm));};};c["String.get_toUnderscore"]=function(bk,bl){return J.ofSeq(I.collect(a.id,I.mapi(function(bm,bn){return bm>0&&K.IsUpper(bn)?L.ofArray(["_",bn]):L.ofArray([bn]);},bk))).join("");};c["String.Right"]=function(bk,bl){var bm,bn;return c["String.Substring2"](bk,(bm=0,(bn=bk.length-bl,M.Compare(bm,bn)===1?bm:bn)),bk.length);};c["String.Left"]=function(bk,bl){return bl<0?c["String.Substring2"](bk,0,bk.length+bl):c["String.Substring2"](bk,0,bl);};c["String.Substring2"]=function(bk,bl,bm){var bn,bo;while(true){if(bm<=0)return"";else if(bl<0){bn=bl;bl=0;bm=bm+bn;}else return bl>=bk.length?"":G.Substring(bk,bl,(bo=bk.length-bl,M.Compare(bm,bo)===-1?bm:bo));}};c.delayed=function(bk,bl){var bm;bm=[null];return function(bn){var bo,bp;bo=bm[0];bo==null?void 0:bo.$0.Cancel$1();bm[0]={$:1,$0:new N.New()};O.Start((bp=null,O.Delay(function(){return O.Bind(O.Sleep(bk),function(){bl(bn);return O.Zero();});})),{$:1,$0:bm[0].$0});};};c.print=function(bk){if(typeof bk=="string")((function(bl){return function(bm){return bl(P.toSafe(bm));};}(function(bl){Q.log(bl);}))(bk));else((function(bl){return function(bm){return bl(P.prettyPrint(bm));};}(function(bl){Q.log(bl);}))(bk));};c.Error=function(bk){return{$:1,$0:bk};};g.Identifier=function(bk){var bl,bm,bn;return(bm=f.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",bk),bm!=null&&bm.$==1&&((bn=bm.$0,!M.Equals(bn,null)&&bn.length===1)&&(bl=J.get(bm.$0,0),true)))?{$:1,$0:bl}:null;};g.getEndWord=function(bk,bl){var bm,bn;bm=f.REGEX$1("^([a-zA-Z_]\\w*)","g",bk.substring(bl));return bm!=null&&bm.$==1?(bn=bm.$0,!M.Equals(bn,null)&&bn.length===1)?J.get(bm.$0,0):"":"";};g.getStartWord=function(bk,bl){var bm,bn;bm=f.REGEX$1("([a-zA-Z_]\\w*)$","g",G.Substring(bk,0,bl));return bm!=null&&bm.$==1?(bn=bm.$0,!M.Equals(bn,null)&&bn.length===1)?J.get(bm.$0,0):"":"";};i=h.Hoverable=S.Class({Content:function(bk){return bk.on("mouseenter",function(){return U.AddClass(bk.elt,"hovering");}).on("mouseleave",function(){return U.RemoveClass(bk.elt,"hovering");});},Content$1:function(bk){return V.Element("div",this.get_Attributes(),bk);},get_Attributes:function(){var bk,bl;bk=this;return L.ofArray([(bl=W.Const("hovering"),X.DynamicPred("class",this.hover.get_View(),bl)),Y.HandlerImpl("mouseenter",function(){return function(){return bk.hover.Set(true);};}),Y.HandlerImpl("mouseleave",function(){return function(){return bk.hover.Set(false);};})]);}},null,i);i.get_Demo=function(){return i.New$1().Content(V.Element("div",[Y.Create("style","flex-flow: column;")],[V.TextNode("Hover over me!")]));};i.Content$302$81=S.Curried3(function(bk,bl,bm){return U.RemoveClass(bk.elt,"hovering");});i.get_Attributes$298$69=S.Curried3(function(bk,bl,bm){return bk.hover.Set(false);});i.get_Attributes$297$69=S.Curried3(function(bk,bl,bm){return bk.hover.Set(true);});i.New$1=function(){return i.New(Z.Create$1(false));};i.New=function(bk){return new i({hover:bk});};h.hoverable=function(bk){return i.New$1().Content(bk);};j.addResizeObserver=function(bk,bl){var bm,bn,bo,bp;try{bm=!(!a.ResizeObserver);}catch(bq){bm=false;}if(bm){bn=new a.ResizeObserver(bk);j.set_observers(new L.T({$:1,$0:bn,$1:j.observers()}));bn.observe(bl);}else{bo=j.dimsChanged(bl);O.Start((bp=null,O.Delay(function(){return O.While(function(){return bl.isConnected;},O.Delay(function(){return O.Bind(O.Sleep(110),function(){return bo()?(bk(),O.Zero()):O.Zero();});}));})),null);}};j.dimsChanged=function(bk){var bl;bl=[bk.getBoundingClientRect()];return function(){var bm;bm=bk.getBoundingClientRect();return M.Equals(j.domRect2Tuple(bl[0]),j.domRect2Tuple(bm))?false:(bl[0]=bm,true);};};j.domRect2Tuple=function(bk){return[bk.top,bk.left,bk.width,bk.height];};j.observers=function(){C.$cctor();return C.observers;};j.set_observers=function(bk){C.$cctor();C.observers=bk;};o=n.WcTabStripT=S.Class({connectedCallback:function(){var bk,bl,bm,bn;function bo(){var bp,bq,br;bq=!bl.hasAttribute("bottom");br=L.ofSeq(I.delay(function(){return I.collect(function(bs){var bt;bt=bl.childNodes[bs-1];return M.Equals(bt.nodeType,_0.ELEMENT_NODE)?[[bt.hasAttribute("tabname")?bt.getAttribute("tabname"):(function(bu){return function(bv){return bu("Tab "+a.String(bv));};}(a.id))(bs),bt]]:[];},_1.range(1,bl.childNodes.length));}));while(bn.childNodes.length>0)bn.removeChild(bn.lastChild);bp=n.tabStrip(bk.selected,bq,true,br,V.Element("slot",L.T.Empty,L.T.Empty));_3.LoadLocalTemplates("");V.Run(bn,bp);}bk=this;!this.added?(bl=this,bm=bl.attachShadow({mode:"open"}),bn=self.document.createElement("div"),bm.appendChild(bn),bo(),bl.addEventListener("DOMSubtreeModified",c.delayed(50,bo)),this.added=true):void 0;}},l,o);o.Constructor=function(){var bk,bl;bk=(bl=_4.construct(self.HTMLElement,[],this.__proto__.constructor),bl);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(bk);return bk;};o.New=S.Ctor(function(){l.New.call(this);this.added=false;this.selected=Z.Create$1(1);(function(bk){return bk("WcTabStripT initializer");}(function(bk){Q.log(bk);}));},o);n.init=function(){C.$cctor();return C.init;};n.tabStrip$444$64=function(bk,bl){return function(){return function(){return bl.Set(bk+1);};};};n.tabStrip=function(bk,bl,bm,bn,bo){var bp;bp=V.Element("div",[Y.Create("class",(((S.Curried3(function(bq,br,bs){return bq("tab-strip "+P.toSafe(br)+" "+P.toSafe(bs));}))(a.id))(bl?"top":"bottom"))(bm?"horizontal":"vertical"))],L.ofSeq(I.delay(function(){return I.collect(function(bq){var br;br=bq[0];return[i.New$1().Content(V.Element("div",[X.Dynamic("class",W.Map(function(bs){return"tab"+(bs===br+1?" selected":"");},bk.get_View())),Y.Create("draggable","true"),Y.HandlerImpl("click",function(){return function(){return bk.Set(br+1);};})],[V.TextNode(bq[1][0])]))];},I.indexed(bn));})));return V.Element("div",[Y.Create("class","tab-panel")],L.ofSeq(I.delay(function(){return I.append(bl?[bp]:[],I.delay(function(){return I.append([V.Element("div",[Y.Create("class","tab-content")],[bo])],I.delay(function(){return I.append(!bl?[bp]:[],I.delay(function(){return I.append([V.Element("style",L.T.Empty,L.ofArray([V.TextNode(n.css())]))],I.delay(function(){return[V.Element("style",L.T.Empty,L.ofArray([V.TextView(W.Map(function(bq){return function(br){return bq("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(br)+")) { display: grid }\r\n                                           ");};}(a.id),bk.get_View()))]))];}));}));}));}));})));};n.css=function(){C.$cctor();return C.css;};q=p.WcSplitterT=S.Class({connectedCallback:function(){var bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz;function bA(bI){var bJ,bK,bL,bM;bJ=br?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];bK=a.parseFloat("0"+a.jQuery(bI.parentElement.parentElement).css(bJ[0]));bL=a.parseFloat("0"+a.jQuery(bI.parentElement.parentElement).css(bJ[1]));bu.Set(a.parseFloat("0"+a.jQuery(bI.parentElement.parentElement).css(bJ[2])));bt[0]=bK+bL;bM=bk.getBoundingClientRect();return br?bq?[bM.width,bM.height]:[-bM.width,bM.height]:bq?[bM.height,bM.width]:[-bM.height,bM.width];}function bB(bI){return br?bI.clientX:bI.clientY;}function bC(bI){var bJ,bK;bJ=(bB(bI)-bx[0])*100/bs[0][0]+bw[0];bp.Set((bK=M.Compare(bn,bJ)===1?bn:bJ,M.Compare(bo,bK)===-1?bo:bK));}function bD(){if(bv[0]){bv[0]=false;self.removeEventListener("mousemove",bC,false);self.removeEventListener("mouseup",bD,false);}}function bE(bI){var bJ,bK;if(!bv[0]){bv[0]=true;bw[0]=bp.Get();bx[0]=bB(bI);bs[0]=(bJ=(bK=by[0],bK==null?null:{$:1,$0:bA(bK.$0)}),bJ==null?[100,500]:bJ.$0);self.addEventListener("mousemove",bC,false);self.addEventListener("mouseup",bD,false);bI.preventDefault();}}function bF(bI,bJ,bK,bL){return[(bI-bJ-bK)*bL/100,(bI-bJ-bK)*(100-bL)/100];}function bG(bI,bJ){return(((((S.Curried(function(bK,bL,bM,bN,bO){return bK(" "+bL.toFixed(2)+"px "+bM.toFixed(2)+"px ; "+P.toSafe(bN)+" : "+bO.toFixed(2)+"px; ");},5))(a.id))(bI))(bJ))(br?"height":"width"))(bs[0][1]);}function bH(){var bI;bI=by[0];bI==null?void 0:bs[0]=bA(bI.$0);bp.Set(bp.Get());}if(!this.added){bk=this;bl=bk.attachShadow({mode:"open"});bm=self.document.createElement("div");bn=bk.hasAttribute("min")?a.parseFloat(bk.getAttribute("min")):4;bo=bk.hasAttribute("max")?a.parseFloat(bk.getAttribute("max")):96;bp=Z.Create$1(bk.hasAttribute("value")?a.parseFloat(bk.getAttribute("value")):50);bq=!bk.hasAttribute("second");br=bk.hasAttribute("vertical");bs=[[0,0]];bt=[0];bu=Z.Create$1(0);bv=[false];bw=[0];bx=[0];by=[null];bz=(((((br?p.layoutVertical():p.layoutHorizontal())(W.Map(function(bI){var bJ;bJ=bF(bs[0][0],bu.Get(),bt[0],bI);return bG.apply(null,bJ);},bp.get_View())))(function(){j.addResizeObserver(bH,bk);bH();}))(function(bI){by[0]={$:1,$0:bI};bH();}))(function(bI){bE(bI);}))(W.Map(function(bI){return function(bJ){return bI(P.prettyPrint(bJ)+"px");};}(a.id),bu.get_View()));_3.LoadLocalTemplates("");V.Run(bm,bz);bl.appendChild(bm.firstChild);this.added=true;}}},l,q);q.Constructor=function(){var bk,bl;bk=(bl=_4.construct(self.HTMLElement,[],this.__proto__.constructor),bl);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(bk);return bk;};q.New=S.Ctor(function(){l.New.call(this);this.added=false;(function(bk){return bk("WcSplitterT initializer");}(function(bk){Q.log(bk);}));},q);p.init=function(bk,bl){var bm;bm=new q.New();p.set_layoutHorizontal(bk);p.set_layoutVertical(bl);m.defineWebComponent("wcomp-splitter",q.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};p.layoutVertical=function(){C.$cctor();return C.layoutVertical;};p.set_layoutVertical=function(bk){C.$cctor();C.layoutVertical=bk;};p.layoutHorizontal=function(){C.$cctor();return C.layoutHorizontal;};p.set_layoutHorizontal=function(bk){C.$cctor();C.layoutHorizontal=bk;};m.defineWebComponent=function(bk,bl,bm){try{Q.log("defineWebComponent: "+bk);_5.setPrototypeOf(bm.prototype,self.HTMLElement.prototype);_5.setPrototypeOf(bm,self.HTMLElement);_5.setPrototypeOf(bl.prototype,bm.prototype);self.customElements.define(bk,bl);}catch(bn){(function(bo){return bo("Failed to define WebComponent. Not supported.");}(function(bo){Q.log(bo);}));}};s.New=function(bk,bl){return{varName:bk,varVar:bl};};t.New=function(bk,bl){return{viwName:bk,viwView:bl};};u.New=function(bk,bl){return{docName:bk,docDoc:bl};};v.New=function(bk,bl,bm){return{actName:bk,actFunction:bl,actEnabled:bm};};w.New=function(bk,bl){return{qryName:bk,qryFunction:bl};};x.New=function(bk,bl,bm,bn,bo,bp){return{plgName:bk,plgVars:bl,plgViews:bm,plgDocs:bn,plgActions:bo,plgQueries:bp};};r.addPlugIn=function(bk){r.plugIns().Append(bk);r.mainDocV().Set(r.mainDocV().Get());};r.getMainDoc=function(){C.$cctor();return C.getMainDoc;};r.qryDocs=function(){C.$cctor();return C.qryDocs;};r.actHello=function(){C.$cctor();return C.actHello;};r.tryGetWoW=function(bk,bl){var bm,bn,bo;bm=(bn=r.tryGetViw(bk,bl),bn==null?null:{$:1,$0:{$:1,$0:bn.$0.viwView}});return bm==null?(bo=r.tryGetVar(bk,bl),bo==null?null:{$:1,$0:bo.$0.varVar.get_View()}):bm.$0;};r.tryGetVoV=function(bk,bl){var bm,bn,bo;bm=(bn=r.tryGetVar(bk,bl),bn==null?null:{$:1,$0:{$:1,$0:bn.$0.varVar}});return bm==null?(bo=r.tryGetViw(bk,bl),bo==null?null:{$:1,$0:new _6.New(bo.$0.viwView,a.ignore)}):bm.$0;};r.tryGetDoc=function(bk,bl){var bm;bm=r.tryGetPlugIn(bk);return bm==null?null:J.tryFind(function(bn){return bn.docName===bl;},bm.$0.plgDocs);};r.tryGetQry=function(bk,bl){var bm;bm=r.tryGetPlugIn(bk);return bm==null?null:J.tryFind(function(bn){return bn.qryName===bl;},bm.$0.plgQueries);};r.tryGetAct=function(bk,bl){var bm;bm=r.tryGetPlugIn(bk);return bm==null?null:J.tryFind(function(bn){return bn.actName===bl;},bm.$0.plgActions);};r.tryGetViw=function(bk,bl){var bm;bm=r.tryGetPlugIn(bk);return bm==null?null:J.tryFind(function(bn){return bn.viwName===bl;},bm.$0.plgViews);};r.tryGetVar=function(bk,bl){var bm;bm=r.tryGetPlugIn(bk);return bm==null?null:J.tryFind(function(bn){return bn.varName===bl;},bm.$0.plgVars);};r.tryGetPlugIn=function(bk){return r.plugIns().TryFindByKey(bk);};r.newDocF=function(bk,bl){return u.New(bk,bl);};r.newActF=function(bk,bl){return v.New(bk,bl,W.Const(true));};r.newAct=function(bk,bl){return v.New(bk,{$:0,$0:bl},W.Const(true));};r.newQry=function(bk,bl){return w.New(bk,bl);};r.newDoc=function(bk,bl){return u.New(bk,{$:0,$0:bl});};r.newViw=function(bk,bl){return t.New(bk,bl);};r.newVar=function(bk,bl){return s.New(bk,bl);};r.vertical$817$39=function(bk){return function(bl){bk(bl.Event);};};r.vertical$816$39=a.id;r.vertical$815$39=a.id;r.vertical=function(bk,bl,bm,bn,bo){var bp,bq,br,bs;return(bp=(bq=_.Make().WithHole({$:2,$0:"partsizes",$1:bk}).WithHole({$:7,$0:"afterrender",$1:bl}).WithHole({$:7,$0:"afterrendersp",$1:bm}),bq.WithHole($.EventQ2(bq.k,"mousedown",function(){return bq.i;},function(bt){bn(bt.Event);}))).WithHole({$:2,$0:"gap",$1:bo}),(br=$.CompleteHoles(bp.k,bp.h,[]),(bs=new ba.New(br[1],D.wcompsplitterver(br[0])),(bp.i=bs,bs)))).get_Doc();};r.horizontal$809$39=function(bk){return function(bl){bk(bl.Event);};};r.horizontal$808$39=a.id;r.horizontal$807$39=a.id;r.horizontal=function(bk,bl,bm,bn,bo){var bp,bq,br,bs;return(bp=(bq=_.Make().WithHole({$:2,$0:"partsizes",$1:bk}).WithHole({$:7,$0:"afterrender",$1:bl}).WithHole({$:7,$0:"afterrendersp",$1:bm}),bq.WithHole($.EventQ2(bq.k,"mousedown",function(){return bq.i;},function(bt){bn(bt.Event);}))).WithHole({$:2,$0:"gap",$1:bo}),(br=$.CompleteHoles(bp.k,bp.h,[]),(bs=new ba.New(br[1],D.wcompsplitterhor(br[0])),(bp.i=bs,bs)))).get_Doc();};r.mainDoc$798$42=function(){return function(){r.mainDocV().Set("AppFramework.AppFwkClient");};};r.mainDoc=function(){var bk,bl,bm,bn,bo,bp;return(bk=(bl=r.getMainClientDoc(),(bm=(bn=r.mainDocV().get_View(),_.Make().WithHole({$:2,$0:"maindoc",$1:bn})),bm.WithHole($.EventQ2(bm.k,"goclient",function(){return bm.i;},function(){r.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:bl})),(bo=$.CompleteHoles(bk.k,bk.h,[]),(bp=new ba.New(bo[1],D.appframework(bo[0])),(bk.i=bp,bp)))).get_Doc();};r.getMainClientDoc=function(){var bk;return V.EmbedView((bk=r.plugIns().v,W.Map2(function(bl,bm){var bn,bo;bn=I.tryPick(function(bp){var bq;bq=I.tryFind(function(br){return bp.plgName===bl||bp.plgName+"."+br.docName===bl;},bp.plgDocs);return bq==null?null:{$:1,$0:r.getLazyDoc(bq.$0)};},bm);bo=r.AppFwkClient().f();return bn==null?bo:bn.$0;},r.mainDocV().get_View(),bk)));};r.getLazyDoc=function(bk){var bl;bl=bk.docDoc;return bl.$==0?bl.$0.f():V.Element("div",[],[V.TextNode((function(bm){return function(bn){return bm("Doc with parameters not allowed here: "+E.p(bn));};}(a.id))(bk))]);};r.AppFwkClient=function(){C.$cctor();return C.AppFwkClient;};r.renderQueries$764$39=function(bk){return function(){a.alert(bk.qryFunction(null));};};r.renderQueries=function(){function bk(bm,bn){return[bm.plgName,bn.qryName];}function bl(bm,bn){var bo,bp,bq,br;return(bo=(bp=_.Make().WithHole({$:1,$0:"name",$1:bn.qryName}),bp.WithHole($.EventQ2(bp.k,"select",function(){return bp.i;},function(){a.alert(bn.qryFunction(null));}))),(bq=$.CompleteHoles(bo.k,bo.h,[]),(br=new ba.New(bq[1],D.tile(bq[0])),(bo.i=br,br)))).get_Doc();}return V.ConvertBy(function(bm){return bk(bm[0],bm[1]);},function(bm){return bl(bm[0],bm[1]);},W.Map(function(bm){return I.map(function(bn){return[bm,bn];},bm.plgQueries);},r.currentPlugInW()));};r.renderActions$753$51=function(bk){return function(bl){r.callFunction(bl,null,bk.actFunction);};};r.renderActions$749$51=function(bk){return function(bl){r.callFunction(bl,null,bk.actFunction);};};r.renderActions=function(){function bk(bm,bn){return[bm.plgName,bn.actName];}function bl(bm,bn){var bo,bp,bq,br;bo=(bp=bn.actFunction,bp.$==1?(bq=G.concat(", ",L.ofArray([bp.$1])),(function(bs){return function(bt){return bs("("+P.toSafe(bt)+")");};}(a.id))(bq)):bp.$==2?(br=G.concat(", ",L.ofArray([bp.$1,bp.$2])),(function(bs){return function(bt){return bs("("+P.toSafe(bt)+")");};}(a.id))(br)):"");return V.EmbedView(W.Map(function(bs){var bt,bu,bv,bw,bx,by,bz,bA;return bs?(bt=(bu=_.Make().WithHole({$:1,$0:"name",$1:bn.actName+bo}),bu.WithHole($.EventQ2(bu.k,"click",function(){return bu.i;},function(bB){r.callFunction(bB,null,bn.actFunction);}))),(bv=$.CompleteHoles(bt.k,bt.h,[]),(bw=new ba.New(bv[1],D.action(bv[0])),(bt.i=bw,bw)))).get_Doc():(bx=(by=_.Make().WithHole({$:1,$0:"name",$1:bn.actName}),by.WithHole($.EventQ2(by.k,"click",function(){return by.i;},function(bB){r.callFunction(bB,null,bn.actFunction);}))),(bz=$.CompleteHoles(bx.k,bx.h,[]),(bA=new ba.New(bz[1],D.actiondisabled(bz[0])),(bx.i=bA,bA)))).get_Doc();},bn.actEnabled));}return V.ConvertBy(function(bm){return bk(bm[0],bm[1]);},function(bm){return bl(bm[0],bm[1]);},W.Map(function(bm){return I.map(function(bn){return[bm,bn];},bm.plgActions);},r.currentPlugInW()));};r.callFunction=function(bk,bl,bm){if(bm.$==1)bm.$0(bk);else if(bm.$==2)(bm.$0(bk))(bl);else bm.$0();};r.renderDocs$727$39=function(bk){return function(){W.Get(function(bl){r.mainDocV().Set(bl.plgName+"."+bk.docName);},r.currentPlugInW());};};r.renderDocs=function(){function bk(bm,bn){return[bm.plgName,bn.docName];}function bl(bm,bn){var bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by;return(bo=(bp=(bq=bn.docName+(br=bn.docDoc,br.$==1?(bs=G.concat(", ",L.ofArray([br.$1])),(function(bz){return function(bA){return bz("("+P.toSafe(bA)+")");};}(a.id))(bs)):br.$==2?(bt=G.concat(", ",L.ofArray([br.$1,br.$2])),(function(bz){return function(bA){return bz("("+P.toSafe(bA)+")");};}(a.id))(bt)):br.$==3?(bu=G.concat(", ",L.ofArray([br.$1,br.$2,br.$3])),(function(bz){return function(bA){return bz("("+P.toSafe(bA)+")");};}(a.id))(bu)):br.$==4?(bv=G.concat(", ",L.ofArray([br.$1,br.$2,br.$3,br.$4])),(function(bz){return function(bA){return bz("("+P.toSafe(bA)+")");};}(a.id))(bv)):br.$==5?(bw=G.concat(", ",L.ofArray([br.$1,br.$2,br.$3,br.$4,br.$5])),(function(bz){return function(bA){return bz("("+P.toSafe(bA)+")");};}(a.id))(bw)):""),_.Make().WithHole({$:1,$0:"name",$1:bq})),bp.WithHole($.EventQ2(bp.k,"select",function(){return bp.i;},function(){W.Get(function(bz){r.mainDocV().Set(bz.plgName+"."+bn.docName);},r.currentPlugInW());}))),(bx=$.CompleteHoles(bo.k,bo.h,[]),(by=new ba.New(bx[1],D.tile(bx[0])),(bo.i=by,by)))).get_Doc();}return V.ConvertBy(function(bm){return bk(bm[0],bm[1]);},function(bm){return bl(bm[0],bm[1]);},W.Map(function(bm){return I.map(function(bn){return[bm,bn];},bm.plgDocs);},r.currentPlugInW()));};r.renderViews=function(){function bk(bm,bn){return[bm.plgName,bn.viwName];}function bl(bm,bn){var bo,bp,bq;return(bo=_.Make().WithHole({$:1,$0:"name",$1:bn.viwName}).WithHole({$:2,$0:"value",$1:bn.viwView}),(bp=$.CompleteHoles(bo.k,bo.h,[]),(bq=new ba.New(bp[1],D.namevalue(bp[0])),(bo.i=bq,bq)))).get_Doc();}return V.ConvertBy(function(bm){return bk(bm[0],bm[1]);},function(bm){return bl(bm[0],bm[1]);},W.Map(function(bm){return I.map(function(bn){return[bm,bn];},bm.plgViews);},r.currentPlugInW()));};r.renderVars=function(){function bk(bm,bn){return[bm.plgName,bn.varName];}function bl(bm,bn){var bo,bp,bq;return(bo=_.Make().WithHole({$:1,$0:"name",$1:bn.varName}).WithHole({$:8,$0:"value",$1:bn.varVar}),(bp=$.CompleteHoles(bo.k,bo.h,[["value",0]]),(bq=new ba.New(bp[1],D.namevalueinput(bp[0])),(bo.i=bq,bq)))).get_Doc();}return V.ConvertBy(function(bm){return bk(bm[0],bm[1]);},function(bm){return bl(bm[0],bm[1]);},W.Map(function(bm){return I.map(function(bn){return[bm,bn];},bm.plgVars);},r.currentPlugInW()));};r.renderPlugIns$689$35=function(bk){return function(){r.selectionPlugInO().Set({$:1,$0:bk});};};r.renderPlugIns=function(){return V.Flatten(r.plugIns().MapLens(function(bk){var bl,bm,bn,bo;return(bl=(bm=_.Make().WithHole({$:1,$0:"name",$1:bk}),bm.WithHole($.EventQ2(bm.k,"select",function(){return bm.i;},function(){r.selectionPlugInO().Set({$:1,$0:bk});}))).WithHole({$:2,$0:"selected",$1:W.Map(function(bp){return M.Equals(bp,{$:1,$0:bk})?"selected":"";},r.selectionPlugInO().get_View())}),(bn=$.CompleteHoles(bl.k,bl.h,[]),(bo=new ba.New(bn[1],D.tile(bn[0])),(bl.i=bo,bo)))).get_Doc();}));};r.currentPlugInV=function(){C.$cctor();return C.currentPlugInV;};r.currentPlugInW=function(){C.$cctor();return C.currentPlugInW;};r.selectionPlugInO=function(){C.$cctor();return C.selectionPlugInO;};r.splitName=function(bk){function bl(bn){return d.splitByChar(".",bn);}function bm(bn){return J.length(bn)===1?[bk,J.get(bn,0)]:[J.get(bn,0),J.get(bn,1)];}return function(bn){return bm(bl(bn));};};r.defaultPlugIn=function(){C.$cctor();return C.defaultPlugIn;};r.TemplateFileName=function(){C.$cctor();return C.TemplateFileName;};r.mainDocV=function(){C.$cctor();return C.mainDocV;};r.plugIns=function(){C.$cctor();return C.plugIns;};y.New=function(bk,bl){return{lytName:bk,lytDefinition:bl};};A=z.Measures=S.Class({toString:function(){return this.$==1?((((S.Curried(function(bk,bl,bm,bn){return bk(a.String(bl)+"-"+a.String(bm)+"-"+a.String(bn));},4))(a.id))(_1.toInt(this.$0)))(_1.toInt(this.$1)))(_1.toInt(this.$2)):a.String(_1.toInt(this.$1?this.$0:-this.$0));}},null,A);B.createLayoutDefinitions=function(bk,bl){var bm,bn,bo,bp,bq,br,bs,bt,bu,bv;return bl.$==1?(bm=bl.$0.$0,(bn=bl.$0.$1,(bo=B.createLayoutDefinitions(bk+"_1",bl.$0.$2),(bp=bo[0],(bq=bo[1],(br=B.createLayoutDefinitions(bk+"_2",bl.$0.$3),(bs=br[0],(bt=br[1],[bk,J.ofSeq(I.delay(function(){return I.append([G.concat(" ",L.ofArray([bk,bm?"vertical":"horizontal",a.String(bn),bp,bs]))],I.delay(function(){return I.append(bq,I.delay(function(){return bt;}));}));}))])))))))):(bu=bl.$0,!M.Equals(bu,null)&&bu.length===0)?["___",[]]:(bv=bl.$0,!M.Equals(bv,null)&&bv.length===1)?[J.get(bl.$0,0),[]]:[bk,[bk+" div \"\" "+G.concat(" ",bl.$0)]];};B.extractNodes=function(bk){var bl,bm;function bn(bo,bp,bq,br){var bs,bt,bu,bv,bw,bx;bs=B.extractNodes(bq);bt=B.extractNodes(br);return(bs.$==0?(bv=bs.$0,!M.Equals(bv,null)&&bv.length===0)?(bu=bt,true):bt.$==0?(bw=bt.$0,!M.Equals(bw,null)&&bw.length===0)?(bu=bs,true):(bu=[bs,bt],false):(bu=[bs,bt],false):bt.$==0?(bx=bt.$0,!M.Equals(bx,null)&&bx.length===0)?(bu=bs,true):(bu=[bs,bt],false):(bu=[bs,bt],false))?bu:{$:1,$0:{$:0,$0:bo,$1:bp,$2:bu[0],$3:bu[1]}};}bl=B.horizontalSplit(bk);return bl!=null&&bl.$==1?bn(false,bl.$0[2],bl.$0[0],bl.$0[1]):(bm=B.verticalSplit(bk),bm!=null&&bm.$==1?bn(true,bm.$0[2],bm.$0[0],bm.$0[1]):{$:0,$0:B.cleanSpaces(bk)});};B.cleanSpaces=function(bk){return J.filter(function(bl){var bm;return!(bm=(e.Int())(bl),bm!=null&&bm.$==1);},G.SplitStrings(G.concat(" ",bk),[" "],1));};B.verticalSplit=function(bk){var bl,bm,bn,bo,bp,bq,br,bs,bt,bu;function bv(by,bz){var bA,bB,bC;return(bB=f.REGEX$1("^ *\\|+ *$","",bz),bB!=null&&bB.$==1&&(bC=bB.$0,!M.Equals(bC,null)&&bC.length===1))?{$:1,$0:[by,bz.indexOf("|")]}:null;}function bw(by){return M.Equals(null,by);}function bx(by){return M.Equals(null,by);}bl=B.transpose(bk);bm=(bn=(bo=I.tryHead(I.sortBy(function(by){return by[1];},I.choose(function(by){return bv(by[0],by[1]);},I.indexed(bl)))),bo==null?null:{$:1,$0:bo.$0[0]}),bn==null?null:{$:1,$0:(bp=bn.$0,[B.transpose(H.array(bl,null,{$:1,$0:bp-1})),B.transpose(H.array(bl,{$:1,$0:bp+1},null))])});return bm==null?null:{$:1,$0:(bq=bm.$0,(br=bq[0],(bs=bq[1],[J.filter(function(by){return bw(B.extractMeasuresO(by));},br),J.filter(function(by){return bx(B.extractMeasuresO(by));},bs),(bt=I.tryHead(I.delay(function(){return I.append(I.choose(B.extractMeasuresO,br),I.delay(function(){return I.map(function(by){return by.$==0?by.$1?new A({$:0,$0:by.$0,$1:false}):by:by;},I.choose(B.extractMeasuresO,bs));}));})),(bu=new A({$:1,$0:5,$1:50,$2:95}),bt==null?bu:bt.$0))])))};};B.transpose=function(bk){var bl;bl=I.max(I.map(function(bm){return bm.length;},bk));return J.ofSeq(I.delay(function(){return I.map(function(bm){return J.ofSeq(I.delay(function(){return I.map(function(bn){return bn.length>bm?bn[bm]:" ";},bk);})).join("");},_1.range(0,bl-1));}));};B.horizontalSplit=function(bk){var bl,bm,bn,bo,bp;function bq(br,bs){var bt,bu,bv,bw;bt=f.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",bs);return bt!=null&&bt.$==1?{$:1,$0:[[br,(bu=(bv=I.tryItem(1,bt.$0),bv==null?null:B.extractMeasuresO(G.Replace(G.Replace(bv.$0,"^",""),"v","-"))),(bw=new A({$:1,$0:5,$1:50,$2:95}),bu==null?bw:bu.$0))],bs.indexOf("-")]}:null;}bl=(bm=I.tryHead(I.sortBy(function(br){return br[1];},I.choose(function(br){return bq(br[0],br[1]);},I.indexed(bk)))),bm==null?null:{$:1,$0:bm.$0[0]});return bl==null?null:{$:1,$0:(bn=bl.$0,(bo=bn[0],(bp=bn[1],[H.array(bk,null,{$:1,$0:bo-1}),H.array(bk,{$:1,$0:bo+1},null),bp])))};};B.extractMeasuresO=function(bk){var bl,bm,bn,bo,bp,bq,br;bl=G.SplitChars(bk,[" "],1);return!M.Equals(bl,null)&&bl.length===1&&(bn=(e.Int())(J.get(bl,0)),bn!=null&&bn.$==1&&(bm=bn.$0,true))?{$:1,$0:new A({$:0,$0:bb.abs(bm),$1:bm>=0})}:!M.Equals(bl,null)&&bl.length===3&&(bp=(e.Int())(J.get(bl,0)),bp!=null&&bp.$==1&&(bq=(e.Int())(J.get(bl,1)),bq!=null&&bq.$==1&&(br=(e.Int())(J.get(bl,2)),br!=null&&br.$==1&&(bo=[br.$0,bp.$0,bq.$0],true))))?{$:1,$0:new A({$:1,$0:bo[1],$1:bo[2],$2:bo[0]})}:null;};z.addNewLayout=function(bk,bl){var bm,bn;z.addLayout((bm=(bn=!M.Equals(bl,null)?bl:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(d.unindentStr())(bn)),z.newLyt(!M.Equals(bl,null)?bk:"Lyt_"+G.Replace(a.String(bd.NewGuid()),"-",""),bm)));};z.newLyt=function(bk,bl){return y.New(bk,Z.Create$1(bl));};z.addLayout=function(bk){W.Sink(function(bl){var bm;bm=z.createEntries(bk.lytName,bl);r.addPlugIn(x.New(bk.lytName,J.ofSeq(I.delay(function(){return I.append([r.newVar("Layout",bk.lytDefinition)],I.delay(function(){return z.getVarEntries(bm);}));})),[],J.ofSeq(I.delay(function(){return I.append(z.getDocEntries(bm),I.delay(function(){var bn;return I.append([r.newDocF("InputFile",{$:4,$0:(bn=bk.lytName,S.Curried(z.inputFile,4,[bn])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],I.delay(function(){var bo;return I.append([r.newDocF("InputLabel",{$:3,$0:(bo=bk.lytName,S.Curried(z.inputLabel,3,[bo])),$1:"attrs",$2:"Label",$3:"Var"})],I.delay(function(){var bp;return I.append([r.newDocF("HtmlDoc",{$:1,$0:(bp=bk.lytName,function(bq){return z.htmlDoc(bp,bq);}),$1:"html"})],I.delay(function(){return[r.newDocF("none",{$:1,$0:z.none,$1:"x"})];}));}));}));}));})),[],[]));r.mainDocV().Set(r.mainDocV().Get());},bk.lytDefinition.get_View());};z.htmlDoc=function(bk,bl){var bm;bm=z.getTextData(bk,bl);return bm.$==1?V.BindView(V.Verbatim,bm.$0):bm.$==2?z.errDoc((function(bn){return function(bo){return bn("HtmlDoc: unexpected action "+E.p$1(bo));};}(a.id))(bm.$0)):V.Verbatim(bm.$0);};z.none=function(bk){return V.Element("span",[],[]);};z.inputLabel=function(bk,bl,bm,bn){var bo,bp,bq;bo=(bp=(bq=((z.splitName())(bk))(bn),r.tryGetVar(bq[0],bq[1])),bp==null?null:{$:1,$0:V.Element("div",z.getAttrs(bk,bl,true),[V.Element("div",[Y.Create("class","input-group")],[V.Element("span",[Y.Create("class","input-group-addon")],[z.getText(bk,bm,true)]),V.Input([Y.Create("class","form-control")],bp.$0.varVar)])])});return bo==null?z.errDoc((function(br){return function(bs){return br("Var not found "+P.toSafe(bs));};}(a.id))(bn)):bo.$0;};z.inputFile$1440$69=S.Curried3(function(bk,bl,bm){return r.callFunction(bl,null,bk.actFunction);});z.inputFile$1439$69=S.Curried3(function(bk,bl,bm){bl.value="";});z.inputFile=function(bk,bl,bm,bn,bo){var bp,bq,br,bs;bp=(bq=(br=((z.splitName())(bk))(bn),r.tryGetAct(br[0],br[1])),bq==null?null:{$:1,$0:(bs=bq.$0,V.Element("div",z.getAttrs(bk,bl,true),[V.Element("div",[Y.Create("class","input-group")],[V.Element("span",[Y.Create("class","input-group-btn")],[V.Element("label",[Y.Create("class","btn")],[z.getText(bk,bm,true),V.Element("input",[Y.Create("class","form-control"),Y.Create("type","file"),X.Style("display","none"),Y.HandlerImpl("click",function(bt){return function(){bt.value="";};}),Y.HandlerImpl("change",function(bt){return function(){return r.callFunction(bt,null,bs.actFunction);};})],[])])]),bo!==""?z.singleDoc(bk,L.ofArray([[bo,false]])):V.get_Empty()])]))});return bp==null?z.errDoc((function(bt){return function(bu){return bt("Action not found "+P.toSafe(bu));};}(a.id))(bn)):bp.$0;};z.getVarEntries=function(bk){function bl(bm){return bm[1];}return I.map(function(bm){return I.last(bl(bm));},I.groupBy(function(bm){return bm.varName;},I.choose(function(bm){return bm.$==0?{$:1,$0:bm.$0}:null;},bk)));};z.getDocEntries=function(bk){function bl(bm){return bm[1];}return I.map(function(bm){return I.last(bl(bm));},I.groupBy(function(bm){return bm.docName;},I.choose(function(bm){return bm.$==2?{$:1,$0:bm.$0}:null;},bk)));};z.getText=function(bk,bl,bm){var bn,bo,bp,bq,br,bs,bt,bu,bv;bn=z.Identifier(bl,bm);return bn!=null&&bn.$==1?(bo=bn.$0,(bp=((z.splitName())(bk))(bo),(bq=bp[0],(br=bp[1],(bs=(bt=r.tryGetViw(bq,br),bt==null?null:{$:1,$0:V.TextView(bt.$0.viwView)}),bs==null?(bu=(bv=r.tryGetVar(bq,br),bv==null?null:{$:1,$0:V.TextView(bv.$0.varVar.get_View())}),bu==null?V.TextNode(bo):bu.$0):bs.$0))))):V.TextNode(bl);};z.createEntries=function(bk,bl){return z.processLines(function(bm){return z.createEntryO(bk,bm);},d.splitByChar("\n",bl));};z.processLines=function(bk,bl){function bm(bn){var bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB;bo=I.tryHead(bn);return bo!=null&&bo.$==1?(bp=bo.$0,(bq=z.splitTokens(bp),bq.$==1&&(bs=(bt=bq.$0,z.Identifier(bt[0],bt[1])),bs!=null&&bs.$==1&&(bq.$1.$==1&&((bu=bq.$1.$0,z.Vertical(bu[0],bu[1])).$==2&&(bq.$1.$1.$==0&&(br=bs.$0,true)))))?(bv=z.getExtraLines(function(bC){return G.StartsWith(G.Trim(bC),"|");},bn),bm((B.createLayoutDefinitions(br,B.extractNodes(bv[0])))[1].concat(bv[1]))):bq.$==0?bm(H.array(bn,{$:1,$0:1},null)):(bw=z.getExtraLines(function(bC){return G.StartsWith(G.Trim(bC),":");},bn),(bx=bw[1],(by=bw[0],J.length(by)>0?((function(bC){return function(bD){return bC("l = ;"+P.toSafe(bD)+";");};}(function(bC){Q.log(bC);}))(bp),bz=z.createLines(I.nth(0,G.SplitChars(bp,[" "],1)),1,[],[],1,by),bA=bz[0],bB=bz[1],bm(J.ofSeq(I.delay(function(){return I.append([bp+" "+G.concat(" ",bA)],I.delay(function(){return I.append(bB,I.delay(function(){return bx;}));}));})))):J.ofSeq(I.delay(function(){var bC;return I.append((bC=bk(bp),bC!=null&&bC.$==1?[bC.$0]:[]),I.delay(function(){return bm(bx);}));}))))))):[];}return bm(bl);};z.createLines=function(bk,bl,bm,bn,bo,bp){var bq,br,bs,bt,bu,bv,bw,bx,by,bz;bq=G.replicate(bl,":");br=":"+bq;bs=I.tryHead(bp);return bs!=null&&bs.$==1?(bt=d.StartsWith(bq,G.Trim(bs.$0)),bt!=null&&bt.$==1?(bu=bt.$0,(bv=z.getExtraLines(function(bA){return G.StartsWith(G.Trim(bA),br);},bp),(bw=(((S.Curried3(function(bA,bB,bC){return bA(P.toSafe(bB)+"_"+a.String(bC));}))(a.id))(bk))(bo),(bx=z.createLines(bw,bl+1,[],[],1,bv[0]),(by=bx[1],(bz=bx[0],z.createLines(bk,bl,J.ofSeq(I.delay(function(){return I.append(bm,I.delay(function(){return[bw];}));})),J.ofSeq(I.delay(function(){return I.append(bn,I.delay(function(){return I.append([bw+" "+bu+" "+G.concat(" ",bz)],I.delay(function(){return by;}));}));})),bo+1,bv[1]))))))):[bm,bn]):[bm,bn];};z.getExtraLines=function(bk,bl){var bm,bn,bo,bp;bm=(bn=(bo=I.tryFindIndex(function(bq){return G.Trim(bq)!==""&&!bk(bq);},I.skip(1,bl)),bo==null?null:{$:1,$0:1+bo.$0}),(bp=J.length(bl),bn==null?bp:bn.$0));return[H.array(bl,{$:1,$0:1},{$:1,$0:bm-1}),H.array(bl,{$:1,$0:bm},null)];};z.createEntryO=function(bk,bl){var bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;try{bm=z.splitTokens(bl);return bm.$==1&&(bo=(bp=bm.$0,z.Identifier(bp[0],bp[1])),bo!=null&&bo.$==1&&(bm.$1.$==1&&((bq=bm.$1.$0,z.Vertical(bq[0],bq[1])).$==0&&(bm.$1.$1.$==1&&(br=(bs=bm.$1.$1.$0,z.Measures$1(bs[0],bs[1])),br!=null&&br.$==1&&(bn=[bm.$1.$1.$1,br.$0,bo.$0],true))))))?(bt=bn[2],z.entryDoc(bt,(z.createSplitterM())([bk,bt,true,bn[1],bn[0]]))):bm.$==1&&(bv=(bw=bm.$0,z.Identifier(bw[0],bw[1])),bv!=null&&bv.$==1&&(bm.$1.$==1&&((bx=bm.$1.$0,z.Vertical(bx[0],bx[1])).$==1&&(bm.$1.$1.$==1&&(by=(bz=bm.$1.$1.$0,z.Measures$1(bz[0],bz[1])),by!=null&&by.$==1&&(bu=[bm.$1.$1.$1,by.$0,bv.$0],true))))))?(bA=bu[2],z.entryDoc(bA,(z.createSplitterM())([bk,bA,false,bu[1],bu[0]]))):bm.$==1&&(bC=(bD=bm.$0,z.Identifier(bD[0],bD[1])),bC!=null&&bC.$==1&&(bm.$1.$==1&&((bE=bm.$1.$0,z.Var(bE[0],bE[1])).$==2&&(bm.$1.$1.$==1&&(bF=(bG=bm.$1.$1.$0,z.Identifier(bG[0],bG[1])),bF!=null&&bF.$==1&&(bm.$1.$1.$1.$==1&&(bm.$1.$1.$1.$1.$==1&&(bm.$1.$1.$1.$1.$1.$==0&&(bB=[bF.$0,bm.$1.$1.$1.$0,bC.$0,bm.$1.$1.$1.$1.$0],true)))))))))?(bH=bB[2],z.entryDoc(bH,(z.createButtonM())([bk,bH,bB[0],bB[1],bB[3]]))):bm.$==1&&(bJ=(bK=bm.$0,z.Identifier(bK[0],bK[1])),bJ!=null&&bJ.$==1&&(bm.$1.$==1&&((bL=bm.$1.$0,z.Var(bL[0],bL[1])).$==3&&(bm.$1.$1.$==1&&(bM=(bN=bm.$1.$1.$0,z.Identifier(bN[0],bN[1])),bM!=null&&bM.$==1&&(bm.$1.$1.$1.$==1&&(bm.$1.$1.$1.$1.$==0&&(bI=[bm.$1.$1.$1.$0,bJ.$0,bM.$0],true))))))))?(bO=bI[1],z.entryDoc(bO,(z.createInputM())([bk,bO,bI[2],bI[0]]))):bm.$==1&&(bQ=(bR=bm.$0,z.Identifier(bR[0],bR[1])),bQ!=null&&bQ.$==1&&(bm.$1.$==1&&((bS=bm.$1.$0,z.Var(bS[0],bS[1])).$==4&&(bm.$1.$1.$==1&&(bT=(bU=bm.$1.$1.$0,z.Identifier(bU[0],bU[1])),bT!=null&&bT.$==1&&(bm.$1.$1.$1.$==1&&(bm.$1.$1.$1.$1.$==0&&(bP=[bm.$1.$1.$1.$0,bQ.$0,bT.$0],true))))))))?(bV=bP[1],z.entryDoc(bV,(z.createTextAreaM())([bk,bV,bP[2],bP[0]]))):bm.$==1&&(bX=(bY=bm.$0,z.Identifier(bY[0],bY[1])),bX!=null&&bX.$==1&&(bm.$1.$==1&&((bZ=bm.$1.$0,z.Var(bZ[0],bZ[1])).$==0&&(bm.$1.$1.$==1&&(bm.$1.$1.$1.$==0&&(bW=[bX.$0,bm.$1.$1.$0],true))))))?(b0=bW[0],z.entryVar(b0,(z.createVarM())([bk,b0,bW[1][0]]))):bm.$==1&&(b2=(b3=bm.$0,z.Identifier(b3[0],b3[1])),b2!=null&&b2.$==1&&(bm.$1.$==1&&((b4=bm.$1.$0,z.Var(b4[0],b4[1])).$==1&&(bm.$1.$1.$==1&&(b1=[bm.$1.$1.$0,b2.$0,bm.$1.$1.$1],true)))))?(b5=b1[1],z.entryDoc(b5,(z.createDocM())([bk,b5,b1[0][0],b1[2]]))):bm.$==1&&(b7=(b8=bm.$0,z.Identifier(b8[0],b8[1])),b7!=null&&b7.$==1&&(bm.$1.$==1&&((b9=bm.$1.$0,z.Vertical(b9[0],b9[1])).$==4&&(bm.$1.$1.$==1&&(bm.$1.$1.$1.$==1&&(b6=[bm.$1.$1.$1.$0,bm.$1.$1.$1.$1,b7.$0,bm.$1.$1.$0],true))))))?(b_=b6[2],z.entryDoc(b_,(z.createTemplateM())([bk,b_,b6[3],b6[0],b6[1]]))):bm.$==1&&(ca=(cb=bm.$0,z.Identifier(cb[0],cb[1])),ca!=null&&ca.$==1&&(bm.$1.$==1&&((cc=bm.$1.$0,z.Concat(cc[0],cc[1])).$==0&&(b$=[bm.$1.$1,ca.$0],true))))?(cd=b$[1],z.entryDoc(cd,(z.createConcatM())([bk,cd,b$[0]]))):bm.$==1&&(cf=(cg=bm.$0,z.Identifier(cg[0],cg[1])),cf!=null&&cf.$==1&&(bm.$1.$==1&&((ch=bm.$1.$0,z.Vertical(ch[0],ch[1])).$==3&&(bm.$1.$1.$==1&&(bm.$1.$1.$1.$==1&&(bm.$1.$1.$1.$1.$==1&&(ce=[bm.$1.$1.$1.$1.$0,bm.$1.$1.$0,bm.$1.$1.$1.$1.$1,cf.$0,bm.$1.$1.$1.$0],true)))))))?null:bm.$==1&&(cj=(ck=bm.$0,z.Identifier(ck[0],ck[1])),cj!=null&&cj.$==1&&(bm.$1.$==1&&(cl=(cm=bm.$1.$0,z.Vertical(cm[0],cm[1])),cl.$==5&&(bm.$1.$1.$==1&&(ci=[bm.$1.$1.$0,bm.$1.$1.$1,cl.$0,cj.$0],true)))))?(cn=ci[3],z.entryDoc(cn,(z.createElementM())([bk,cn,ci[2],ci[0],ci[1]]))):null;}catch(co){((function(cp){return function(cq){return cp(P.prettyPrint(cq));};}(function(cp){Q.log(cp);}))(co));return null;}};z.entryVar=function(bk,bl){return{$:1,$0:{$:0,$0:r.newVar(bk,bl)}};};z.entryDoc=function(bk,bl){return{$:1,$0:{$:2,$0:r.newDoc(bk,be.Create(function(){return bl;}))}};};z.createVarM=function(){C.$cctor();return C.createVarM;};z.createConcatM=function(){C.$cctor();return C.createConcatM;};z.createTemplateM=function(){C.$cctor();return C.createTemplateM;};z.createDocM=function(){C.$cctor();return C.createDocM;};z.createElementM=function(){C.$cctor();return C.createElementM;};z.createTextAreaM=function(){C.$cctor();return C.createTextAreaM;};z.createInputM=function(){C.$cctor();return C.createInputM;};z.createButtonM=function(){C.$cctor();return C.createButtonM;};z.createSplitterM=function(){C.$cctor();return C.createSplitterM;};z.createVar=function(bk,bl,bm){return Z.Create$1(bm);};z.createConcat=function(bk,bl,bm){return z.turnToView(function(){return V.Concat(z.getDocs(bk,bm));});};z.createTemplate=function(bk,bl,bm,bn,bo){return z.turnToView(function(){var bp,bq,br,bs,bt,bu;br=z.getAttrs(bk,bn[0],bn[1]);_3.LoadLocalTemplates("local");function bv(bx,by){var bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK;bz=z.Identifier(by[0],by[1]);return bz!=null&&bz.$==1?(bA=bz.$0,bB=bx[0],bC=(bD=(bE=(bF=((z.splitName())(bk))(bA),r.tryGetDoc(bF[0],bF[1])),bE==null?null:{$:1,$0:{$:0,$0:bB.toLowerCase(),$1:(z.getDocF(L.T.Empty,bE.$0))[0]}}),bD==null?(bG=(bH=((z.splitName())(bk))(bA),r.tryGetVar(bH[0],bH[1])),bG==null?null:{$:1,$0:{$:8,$0:bB.toLowerCase(),$1:bG.$0.varVar}}):bD),bC==null?{$:0,$0:bB.toLowerCase(),$1:z.errDoc((function(bL){return function(bM){return bL("Missing element: "+P.toSafe(bM));};}(a.id))(bA))}:bC.$0):(bI=bx[0],bJ=z.getTextData(bk,by[0]),bJ.$==1?{$:2,$0:bI.toLowerCase(),$1:bJ.$0}:bJ.$==2?(bK=bJ.$0,{$:4,$0:bI.toLowerCase(),$1:function(bL){return function(bM){return r.callFunction(bL,bM,bK.actFunction);};}}):{$:1,$0:bI.toLowerCase(),$1:bJ.$0});}function bw(bx,by){return bx%2===0;}try{bq={$:1,$0:(bs=(bt=I.map(function(bx){return bv(bx[0],bx[1]);},I.map(function(bx){return bx[1];},I.filter(function(bx){return bw(bx[0],bx[1]);},I.indexed(I.pairwise(bo))))),(I.isEmpty(br)?a.id:(bu=[{$:3,$0:"attrs",$1:Y.Concat(br)}],function(bx){return I.append(bu,bx);}))(bt)),_3.NamedTemplate("local",{$:1,$0:bm[0].toLowerCase()},bs))};}catch(bx){bq=null;}return bq==null?z.errDoc((function(by){return function(bz){return by("Missing template: "+P.toSafe(bz));};}(a.id))(bm[0])):bq.$0;});};z.createDoc=function(bk,bl,bm,bn){return z.turnToView(function(){var bo,bp,bq;bo=(bp=(bq=((z.splitName())(bk))(bm),r.tryGetDoc(bq[0],bq[1])),bp==null?null:{$:1,$0:z.getDocFinal(bn,bp.$0)});return bo==null?z.errDoc((function(br){return function(bs){return br("Missing doc: "+P.toSafe(bs));};}(a.id))(bm)):bo.$0;});};z.createTextArea=function(bk,bl,bm,bn){return z.turnToView(function(){var bo,bp,bq,br,bs;bo=(bp=(bq=((z.splitName())(bk))(bm),r.tryGetVoV(bq[0],bq[1])),(br=(bs=z.getAttrs(bk,bn[0],bn[1]),function(bt){return V.InputArea(bs,bt);}),bp==null?null:{$:1,$0:br(bp.$0)}));return bo==null?z.errDoc((function(bt){return function(bu){return bt("Missing var: "+P.toSafe(bu));};}(a.id))(bm)):bo.$0;});};z.createInput=function(bk,bl,bm,bn){return z.turnToView(function(){var bo,bp,bq,br,bs;bo=(bp=(bq=((z.splitName())(bk))(bm),r.tryGetVoV(bq[0],bq[1])),(br=(bs=z.getAttrs(bk,bn[0],bn[1]),function(bt){return V.Input(bs,bt);}),bp==null?null:{$:1,$0:br(bp.$0)}));return bo==null?z.errDoc((function(bt){return function(bu){return bt("Missing var: "+P.toSafe(bu));};}(a.id))(bm)):bo.$0;});};z.createButton=function(bk,bl,bm,bn,bo){return z.turnToView(function(){var bp,bq,br,bs,bt;function bu(bv,bw){return r.callFunction(null,null,bv.actFunction);}bp=(bq=(br=(bs=((z.splitName())(bk))(bm),r.tryGetAct(bs[0],bs[1])),br==null?null:{$:1,$0:(bt=br.$0,function(bv){return bu(bt,bv);})}),bq==null?a.ignore:bq.$0);return V.Button(bo[0],z.getAttrs(bk,bn[0],bn[1]),bp);});};z.createElement=function(bk,bl,bm,bn,bo){var bp;bp=[z.turnToView(function(){return V.Concat(z.getDocs(bk,bo));})];return V.Element(bm,z.getAttrs(bk,bn[0],bn[1]),bp);};z.createSplitter=function(bk,bl,bm,bn,bo){var bp;bp=z.pairOfDocs(bk,bo);return bn.$==1?z.variableSplitter(bm,bn.$0,bn.$1,bn.$2,bp[0],bp[1]):z.fixedSplitter(bm,bn.$0,bn.$1,bp[0],bp[1]);};z.singleDoc=function(bk,bl){return V.EmbedView(W.Map(function(bm){var bn;return bm.$==1&&(bm.$1.$==0&&(bn=bm.$0,true))?bn:z.errDoc((function(bo){return function(bp){return bo("expected exactly 1 element "+P.printList(function(bq){return"("+P.prettyPrint(bq[0])+", "+P.prettyPrint(bq[1])+")";},bp));};}(a.id))(bl));},W.Map(function(){return z.getDocs(bk,bl);},r.mainDocV().get_View())));};z.pairOfDocs=function(bk,bl){var bm;bm=W.Map(function(bn){var bo;return bn.$==1&&(bn.$1.$==1&&(bn.$1.$1.$==0&&(bo=[bn.$0,bn.$1.$0],true)))?[bo[0],bo[1]]:[z.errDoc((function(bp){return function(bq){return bp("splitter expects exactly 2 elements "+P.printList(function(br){return"("+P.prettyPrint(br[0])+", "+P.prettyPrint(br[1])+")";},bq));};}(a.id))(bl)),z.errDoc("part 2")];},W.Map(function(){return z.getDocs(bk,bl);},r.mainDocV().get_View()));return[V.EmbedView(W.Map(function(bn){return bn[0];},bm)),V.EmbedView(W.Map(function(bn){return bn[1];},bm))];};z.getDocs=function(bk,bl){var bm;return bl.$==0?L.T.Empty:(bm=z.getOneDoc(bk,bl),new L.T({$:1,$0:bm[0],$1:z.getDocs(bk,bm[1])}));};z.getOneDoc=function(bk,bl){var bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;return bl.$==1&&(bn=(bo=bl.$0,z.Identifier(bo[0],bo[1])),bn!=null&&bn.$==1&&(bm=[bn.$0,bl.$1],true))?(bp=bm[0],(bq=bm[1],(br=((z.splitName())(bk))(bp),(bs=br[0],(bt=br[1],(bu=(bv=r.tryGetDoc(bs,bt),bv==null?null:{$:1,$0:z.getDocF(bq,bv.$0)}),bu==null?(bw=(bx=r.tryGetWoW(bs,bt),bx==null?null:{$:1,$0:[V.TextView(bx.$0),bq]}),bw==null?[z.errDoc((by=(function(bB){return function(bC){return bB("Missing doc: "+P.toSafe(bC));};}(a.id))(bp),(c.print(by),by))),bq]:bw.$0):bu.$0)))))):bl.$==0?[V.get_Empty(),L.T.Empty]:(bz=bl.$1,(bA=z.getTextData(bk,bl.$0[0]),bA.$==1?[V.TextView(bA.$0),bz]:bA.$==2?[z.errDoc((function(bB){return function(bC){return bB("Unexpected action: "+P.toSafe(bC));};}(a.id))(bA.$0.actName)),bz]:[V.TextNode(bA.$0),bz]));};z.turnToView=function(bk){return V.EmbedView(W.Map(bk,r.mainDocV().get_View()));};z.getDocFinal=function(bk,bl){var bm;bm=z.getDocF(bk,bl);return bm[1].$==0?bm[0]:z.errDoc((((S.Curried3(function(bn,bo,bp){return bn("Too many parameters "+E.p(bo)+" "+P.printList(function(bq){return"("+P.prettyPrint(bq[0])+", "+P.prettyPrint(bq[1])+")";},bp));}))(a.id))(bl))(bk));};z.getDocF=function(bk,bl){var bm,bn;bn=bl.docDoc;switch(bn.$==1?bk.$==1?(bm=[bn.$0,bk.$0[0],bk.$1],1):6:bn.$==2?bk.$==1?bk.$1.$==1?(bm=[bn.$0,bk.$0[0],bk.$1.$0[0],bk.$1.$1],2):6:6:bn.$==3?bk.$==1?bk.$1.$==1?bk.$1.$1.$==1?(bm=[bn.$0,bk.$0[0],bk.$1.$0[0],bk.$1.$1.$0[0],bk.$1.$1.$1],3):6:6:6:bn.$==4?bk.$==1?bk.$1.$==1?bk.$1.$1.$==1?bk.$1.$1.$1.$==1?(bm=[bn.$0,bk.$0[0],bk.$1.$0[0],bk.$1.$1.$0[0],bk.$1.$1.$1.$0[0],bk.$1.$1.$1.$1],4):6:6:6:6:bn.$==5?bk.$==1?bk.$1.$==1?bk.$1.$1.$==1?bk.$1.$1.$1.$==1?bk.$1.$1.$1.$1.$==1?(bm=[bn.$0,bk.$0[0],bk.$1.$0[0],bk.$1.$1.$0[0],bk.$1.$1.$1.$0[0],bk.$1.$1.$1.$1.$0[0],bk.$1.$1.$1.$1.$1],5):6:6:6:6:6:(bm=[bn.$0,bk],0)){case 0:return[bm[0].f(),bm[1]];case 1:return[bm[0](bm[1]),bm[2]];case 2:return[(bm[0](bm[1]))(bm[2]),bm[3]];case 3:return[((bm[0](bm[1]))(bm[2]))(bm[3]),bm[4]];case 4:return[(((bm[0](bm[1]))(bm[2]))(bm[3]))(bm[4]),bm[5]];case 5:return[((((bm[0](bm[1]))(bm[2]))(bm[3]))(bm[4]))(bm[5]),bm[6]];case 6:return[V.Element("div",[],[V.TextNode((((S.Curried3(function(bo,bp,bq){return bo("Parameters do not coincide with definition "+E.p(bp)+" - "+P.printList(function(br){return"("+P.prettyPrint(br[0])+", "+P.prettyPrint(br[1])+")";},bq));}))(a.id))(bl))(bk))]),L.T.Empty];}};z.getAttrs=function(bk,bl,bm){var bn;bn=[bl,bm];return L.ofSeq(I.delay(function(){return I.append(I.choose(function(bo){var bp,bq,br,bs,bt,bu;return!M.Equals(bo,null)&&bo.length===2&&(bq=J.get(bo,1),G.Trim(J.get(bo,0))!==""&&G.Trim(bq)!=="")?(br=J.get(bo,1),(bs=J.get(bo,0),{$:1,$0:(bt=z.getTextData(bk,G.Trim(br)),bt.$==1?X.Dynamic(G.Trim(bs),bt.$0):bt.$==2?(bu=bt.$0,X.Handler(G.Trim(bs),function(bv){return function(bw){return r.callFunction(bv,bw,bu.actFunction);};})):Y.Create(G.Trim(bs),G.Trim(bt.$0)))})):null;},I.map(function(bo){return d.splitByChar("=",bo);},d.splitByChar(";",bn[0]))),I.delay(function(){return I.choose(function(bo){var bp,bq,br,bs,bt;return!M.Equals(bo,null)&&bo.length===2&&(bq=J.get(bo,1),G.Trim(J.get(bo,0))!==""&&G.Trim(bq)!=="")?(br=J.get(bo,1),(bs=J.get(bo,0),{$:1,$0:(bt=z.getTextData(bk,G.Trim(br)),bt.$==1?X.DynamicStyle(G.Trim(bs),bt.$0):bt.$==2?X.Style(G.Trim(bs),(function(bu){return function(bv){return bu("${"+P.toSafe(bv)+"}");};}(a.id))(bt.$0.actName)):X.Style(G.Trim(bs),G.Trim(bt.$0)))})):null;},I.map(function(bo){return d.splitByChar(":",bo);},d.splitByChar(";",bn[0])));}));}));};z.getTextData=function(bk,bl){var bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by;bm=(bn=d.delimitedO("@{","}",bl),bn==null?null:{$:1,$0:(bo=bn.$0,(bp=bo[0],(bq=bo[1],(br=bo[2],(bs=((z.splitName())(bk))(bq),(bt=bs[0],(bu=bs[1],(bv=(bw=r.tryGetWoW(bt,bu),bw==null?null:{$:1,$0:function(bz){var bA,bB;bB=z.getTextData(bk,br);switch(bp===""?bB.$==1?(bA=bB.$0,2):bB.$==2?(bA=bB.$0,3):bB.$0===""?0:(bA=bB.$0,1):bB.$==1?(bA=bB.$0,2):bB.$==2?(bA=bB.$0,3):(bA=bB.$0,1)){case 0:return{$:1,$0:bz};case 1:return{$:1,$0:W.Map(function(bC){return bp+bC+bA;},bz)};case 2:return{$:1,$0:W.Map2(function(bC,bD){return bp+bC+bD;},bz,bA)};case 3:return{$:2,$0:bA};}}(bw.$0)}),bv==null?(bx=(by=r.tryGetAct(bt,bu),by==null?null:{$:1,$0:{$:2,$0:by.$0}}),bx==null?{$:0,$0:((((S.Curried(function(bz,bA,bB,bC){return bz(P.toSafe(bA)+" ${Missing "+P.toSafe(bB)+"}"+P.toSafe(bC));},4))(a.id))(bp))(bq))(br)}:bx.$0):bv.$0))))))))});return bm==null?{$:0,$0:bl}:bm.$0;};z.splitName=function(){C.$cctor();return C.splitName;};z.splitTokens=function(bk){return L.ofSeq(I.collect(a.id,I.mapi(function(bl,bm){var bn;return bl%2===1?[[bm,true]]:(bn=G.Trim(bm),bn===""?[]:J.map(function(bo){return[bo,false];},G.SplitChars(bn,[" "],1)));},d.splitByChar("\"",bk))));};z.errDoc=function(bk){return V.Element("div",[],[V.TextNode(bk)]);};z.variableSplitter=function(bk,bl,bm,bn,bo,bp){return V.Element("wcomp-splitter",L.ofSeq(I.delay(function(){return I.append(bk?[Y.Create("vertical","")]:[],I.delay(function(){return I.append([Y.Create("min",a.String(bl))],I.delay(function(){return I.append([Y.Create("value",a.String(bm))],I.delay(function(){return[Y.Create("max",a.String(bn))];}));}));}));})),L.ofArray([bo,bp]));};z.fixedSplitter=function(bk,bl,bm,bn,bo){var bp,bq,br,bs,bt,bu,bv;bp=(((bm?S.Curried3(function(bw,bx,by){return bw(bx.toFixed(6)+"px calc(100% - "+by.toFixed(6)+"px)");}):S.Curried3(function(bw,bx,by){return bw("calc(100% - "+bx.toFixed(6)+"px) "+by.toFixed(6)+"px");}))(a.id))(bl))(bl);return bk?(bq=_.Make().WithHole({$:1,$0:"partsizes",$1:bp}).WithHole({$:0,$0:"first",$1:bn}).WithHole({$:0,$0:"second",$1:bo}),(br=$.CompleteHoles(bq.k,bq.h,[]),(bs=new ba.New(br[1],D.fixedsplitterver(br[0])),(bq.i=bs,bs)))).get_Doc():(bt=_.Make().WithHole({$:1,$0:"partsizes",$1:bp}).WithHole({$:0,$0:"first",$1:bn}).WithHole({$:0,$0:"second",$1:bo}),(bu=$.CompleteHoles(bt.k,bt.h,[]),(bv=new ba.New(bu[1],D.fixedsplitterhor(bu[0])),(bt.i=bv,bv)))).get_Doc();};z.Measures$1=function(bk,bl){var bm,bn,bo,bp,bq,br,bs,bt,bu,bv;bm=[bk,bl];return bm[1]?null:(bn=d.splitByChar("-",bm[0]),!M.Equals(bn,null)&&bn.length===1&&(bp=(e.Double())(J.get(bn,0)),bp!=null&&bp.$==1&&(bo=bp.$0,true))?{$:1,$0:new A({$:0,$0:bo,$1:true})}:!M.Equals(bn,null)&&bn.length===2&&(J.get(bn,0)===""&&(br=(e.Double())(J.get(bn,1)),br!=null&&br.$==1&&(bq=br.$0,true)))?{$:1,$0:new A({$:0,$0:bq,$1:false})}:!M.Equals(bn,null)&&bn.length===3&&(bt=(e.Double())(J.get(bn,0)),bt!=null&&bt.$==1&&(bu=(e.Double())(J.get(bn,1)),bu!=null&&bu.$==1&&(bv=(e.Double())(J.get(bn,2)),bv!=null&&bv.$==1&&(bs=[bv.$0,bt.$0,bu.$0],true))))?{$:1,$0:new A({$:1,$0:bs[1],$1:bs[2],$2:bs[0]})}:null);};z.Concat=function(bk,bl){var bm;return(bl?false:bk==="concat")?{$:0,$0:null}:{$:1,$0:null};};z.Var=function(bk,bl){var bm,bn,bo,bp,bq,br;return(bl?false:bk==="Var")?{$:0,$0:null}:(bl?false:bk==="Doc")?{$:1,$0:null}:(bl?false:bk==="button")?{$:2,$0:null}:(bl?false:bk==="input")?{$:3,$0:null}:(bl?false:bk==="textarea")?{$:4,$0:null}:(bl?false:bk==="select")?{$:5,$0:null}:{$:6,$0:null};};z.Vertical=function(bk,bl){var bm,bn,bo,bp,bq,br;return(bl?false:bk==="vertical")?{$:0,$0:null}:(bl?false:bk==="horizontal")?{$:1,$0:null}:(bl?false:bk==="layout")?{$:2,$0:null}:(bl?false:bk==="grid")?{$:3,$0:null}:(bl?false:bk==="template")?{$:4,$0:null}:(br=z.Identifier(bk,bl),br!=null&&br.$==1?{$:5,$0:br.$0}:{$:6,$0:null});};z.Identifier=function(bk,bl){var bm,bn,bo;return(bn=f.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",bk),bn!=null&&bn.$==1&&((bo=bn.$0,!M.Equals(bo,null)&&bo.length===1)&&(bl?false:(bm=J.get(bn.$0,0),true))))?{$:1,$0:bm}:null;};f.rexEmail=function(){C.$cctor();return C.rexEmail;};f.rexGuid=function(){C.$cctor();return C.rexGuid;};f.REGEX$1=function(bk,bl,bm){var bn;return bm===null?null:(bn=(new a.String(bm)).match(new a.RegExp(bk,bl)),M.Equals(bn,null)?null:!M.Equals(bn,null)&&bn.length===0?null:{$:1,$0:bn});};C.$cctor=function(){var bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP;C.$cctor=a.ignore;function bQ(cl){return G.concat("\n",cl);}function bR(cl){return d.splitByChar("\n",cl);}function bS(cl){var cm,cn;return H.array(cl,{$:1,$0:0},{$:1,$0:(cm=0,(cn=J.length(cl)-2,M.Compare(cm,cn)===1?cm:cn))});}function bT(cl){return G.concat("\n",cl);}function bU(cl){return cl+"T00:00:00";}function bV(cl){var cm;function cn(cp){return r.plugIns().TryFindByKey(cp);}function co(cp){var cq;cq=r.defaultPlugIn();return cp==null?cq:cp.$0;}cm=function(cp){return cp==null?null:cn(cp.$0);};return function(cp){return co(cm(cp));};}function bW(cl){var cm;cm=null;return bo.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function bX(cl,cm){bo.set_Item(cl,cm);return cm;}function bY(cl,cm){var cn;cn=bW(cl);return cn==null?bX(cl,cm(cl)):cn.$0;}function bZ(cl){var cm;cm=null;return br.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function b0(cl,cm){br.set_Item(cl,cm);return cm;}function b1(cl,cm){var cn;cn=bZ(cl);return cn==null?b0(cl,cm(cl)):cn.$0;}function b2(cl){var cm;cm=null;return bu.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function b3(cl,cm){bu.set_Item(cl,cm);return cm;}function b4(cl,cm){var cn;cn=b2(cl);return cn==null?b3(cl,cm(cl)):cn.$0;}function b5(cl){var cm;cm=null;return bx.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function b6(cl,cm){bx.set_Item(cl,cm);return cm;}function b7(cl,cm){var cn;cn=b5(cl);return cn==null?b6(cl,cm(cl)):cn.$0;}function b8(cl){var cm;cm=null;return bA.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function b9(cl,cm){bA.set_Item(cl,cm);return cm;}function b_(cl,cm){var cn;cn=b8(cl);return cn==null?b9(cl,cm(cl)):cn.$0;}function b$(cl){var cm;cm=null;return bD.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function ca(cl,cm){bD.set_Item(cl,cm);return cm;}function cb(cl,cm){var cn;cn=b$(cl);return cn==null?ca(cl,cm(cl)):cn.$0;}function cc(cl){var cm;cm=null;return bG.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function cd(cl,cm){bG.set_Item(cl,cm);return cm;}function ce(cl,cm){var cn;cn=cc(cl);return cn==null?cd(cl,cm(cl)):cn.$0;}function cf(cl){var cm;cm=null;return bJ.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function cg(cl,cm){bJ.set_Item(cl,cm);return cm;}function ch(cl,cm){var cn;cn=cf(cl);return cn==null?cg(cl,cm(cl)):cn.$0;}function ci(cl){var cm;cm=null;return bM.TryGetValue(cl,{get:function(){return cm;},set:function(cn){cm=cn;}})?{$:1,$0:cm}:null;}function cj(cl,cm){bM.set_Item(cl,cm);return cm;}function ck(cl,cm){var cn;cn=ci(cl);return cn==null?cj(cl,cm(cl)):cn.$0;}C.unindentStr=function(cl){return bQ(d.unindent(cl));};C.skipLastLine=(bk=function(cl){return bS(bR(cl));},function(cl){return bT(bk(cl));});C.parseDateO2=(bl=e.tryParseWith(function(cl){var cm,cn;cm=0;return[(cn=bf.TryParse(cl),cn!=null&&cn.$==1&&(cm=cn.$0,true)),cm];}),function(cl){return bl(bU(cl));});C.parseDateO=e.tryParseWith(function(cl){var cm,cn;cm=0;return[(cn=bf.TryParse(cl),cn!=null&&cn.$==1&&(cm=cn.$0,true)),cm];});C.parseIntO=e.tryParseWith(function(cl){var cm;cm=0;return[bg.TryParseInt32(cl,{get:function(){return cm;},set:function(cn){cm=cn;}}),cm];});C.parseInt64O=e.tryParseWith(function(cl){var cm;cm=0;return[bg.TryParseInt64(cl,{get:function(){return cm;},set:function(cn){cm=cn;}}),cm];});C.parseSingleO=e.tryParseWith(function(cl){var cm,cn;cm=0;return[(cn=a.Number(cl),a.isNaN(cn)?false:(cm=cn,true)),cm];});C.parseDoubleO=e.tryParseWith(function(cl){var cm,cn;cm=0;return[(cn=a.Number(cl),a.isNaN(cn)?false:(cm=cn,true)),cm];});C.parseGuidO=e.tryParseWith(function(cl){var cm;cm=null;return[bd.TryParse(cl,{get:function(){return cm;},set:function(cn){cm=cn;}}),cm];});C["|Date|_|"]=e.parseDateO();C["|Int|_|"]=e.parseIntO();C["|Int64|_|"]=e.parseInt64O();C["|Single|_|"]=e.parseSingleO();C["|Double|_|"]=e.parseDoubleO();C["|Guid|_|"]=e.parseGuidO();C.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";C.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";C.observers=L.T.Empty;C.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";C.init=be.Create(function(){var cl;cl=new o.New();m.defineWebComponent("wcomp-tabstrip",o.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});C.layoutHorizontal=S.Curried(function(cl,cm,cn,co,cp){return V.get_Empty();},5);C.layoutVertical=S.Curried(function(cl,cm,cn,co,cp){return V.get_Empty();},5);C.plugIns=new bh.New$1(function(cl){return cl.plgName;});C.mainDocV=Z.Create$1("AppFramework.AppFwkClient");C.TemplateFileName="..\\website\\AppFramework.html";C.defaultPlugIn=x.New("",[],[],[],[],[]);C.selectionPlugInO=Z.Create$1({$:1,$0:"AppFramework"});C.currentPlugInW=(bm=r.selectionPlugInO().get_View(),W.Map2(function(cl,cm){return(bV(cl))(cm);},r.plugIns().v,bm));C.currentPlugInV=new _6.New(r.currentPlugInW(),function(cl){r.plugIns().Append(cl);});C.AppFwkClient=be.Create(function(){var cl,cm,cn,co,cp,cq,cr,cs,ct;return(cl=(cm=r.renderQueries(),(cn=r.renderActions(),(co=r.renderDocs(),(cp=r.renderViews(),(cq=r.renderVars(),(cr=r.renderPlugIns(),_.Make().WithHole({$:0,$0:"plugins",$1:cr})).WithHole({$:2,$0:"pluginname",$1:W.Map(function(cu){return cu.plgName;},r.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:cq})).WithHole({$:0,$0:"views",$1:cp})).WithHole({$:0,$0:"docs",$1:co})).WithHole({$:0,$0:"actions",$1:cn})).WithHole({$:0,$0:"queries",$1:cm})),(cs=$.CompleteHoles(cl.k,cl.h,[]),(ct=new ba.New(cs[1],D.appfwkclient(cs[0])),(cl.i=ct,ct)))).get_Doc();});C.actHello=r.newAct("Hello",function(){self.alert("Hello!");});C.qryDocs=r.newQry("getDocNames",function(){return J.ofSeq(I.collect(function(cl){return I.map(function(cm){return cl.plgName+"."+cm.docName;},cl.plgDocs);},(r.plugIns())["var"].Get()));});r.plugIns().Append(x.New("AppFramework",[r.newVar("mainDocV",r.mainDocV())],[],[r.newDoc("AppFwkClient",r.AppFwkClient())],[r.actHello()],[r.qryDocs()]));C.getMainDoc=be.Create(function(){p.init(S.Curried(r.horizontal,5),S.Curried(r.vertical,5));n.init().f();return r.mainDoc();});C.splitName=r.splitName;C.createSplitterM=(bn=(bo=new bj.New$5(),[[bW,function(cl){return function(cm){return bY(cl,cm);};}],function(){bo.Clear();}]),(bp=bn[0][1],[function(cl){return(bp(cl))(function(cm){return z.createSplitter(cm[0],cm[1],cm[2],cm[3],cm[4]);});},bn[1]]))[0];C.createButtonM=(bq=(br=new bj.New$5(),[[bZ,function(cl){return function(cm){return b1(cl,cm);};}],function(){br.Clear();}]),(bs=bq[0][1],[function(cl){return(bs(cl))(function(cm){return z.createButton(cm[0],cm[1],cm[2],cm[3],cm[4]);});},bq[1]]))[0];C.createInputM=(bt=(bu=new bj.New$5(),[[b2,function(cl){return function(cm){return b4(cl,cm);};}],function(){bu.Clear();}]),(bv=bt[0][1],[function(cl){return(bv(cl))(function(cm){return z.createInput(cm[0],cm[1],cm[2],cm[3]);});},bt[1]]))[0];C.createTextAreaM=(bw=(bx=new bj.New$5(),[[b5,function(cl){return function(cm){return b7(cl,cm);};}],function(){bx.Clear();}]),(by=bw[0][1],[function(cl){return(by(cl))(function(cm){return z.createTextArea(cm[0],cm[1],cm[2],cm[3]);});},bw[1]]))[0];C.createElementM=(bz=(bA=new bj.New$5(),[[b8,function(cl){return function(cm){return b_(cl,cm);};}],function(){bA.Clear();}]),(bB=bz[0][1],[function(cl){return(bB(cl))(function(cm){return z.createElement(cm[0],cm[1],cm[2],cm[3],cm[4]);});},bz[1]]))[0];C.createDocM=(bC=(bD=new bj.New$5(),[[b$,function(cl){return function(cm){return cb(cl,cm);};}],function(){bD.Clear();}]),(bE=bC[0][1],[function(cl){return(bE(cl))(function(cm){return z.createDoc(cm[0],cm[1],cm[2],cm[3]);});},bC[1]]))[0];C.createTemplateM=(bF=(bG=new bj.New$5(),[[cc,function(cl){return function(cm){return ce(cl,cm);};}],function(){bG.Clear();}]),(bH=bF[0][1],[function(cl){return(bH(cl))(function(cm){return z.createTemplate(cm[0],cm[1],cm[2],cm[3],cm[4]);});},bF[1]]))[0];C.createConcatM=(bI=(bJ=new bj.New$5(),[[cf,function(cl){return function(cm){return ch(cl,cm);};}],function(){bJ.Clear();}]),(bK=bI[0][1],[function(cl){return(bK(cl))(function(cm){return z.createConcat(cm[0],cm[1],cm[2]);});},bI[1]]))[0];C.createVarM=(bL=(bM=new bj.New$5(),[[ci,function(cl){return function(cm){return ck(cl,cm);};}],function(){bM.Clear();}]),(bN=bL[0][1],[function(cl){return(bN(cl))(function(cm){return z.createVar(cm[0],cm[1],cm[2]);});},bL[1]]))[0];bO=r.tryGetPlugIn("AppFramework");bO==null?void 0:(bP=bO.$0,r.addPlugIn(x.New(bP.plgName,bP.plgVars,bP.plgViews,bP.plgDocs,bP.plgActions.concat([r.newActF("AddLayout",{$:2,$0:function(cl){return function(cm){return z.addNewLayout(cl,cm);};},$1:"[Name]",$2:"[Layout]"})]),bP.plgQueries)));};D.wcompsplitterver=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},bk):void 0;};D.wcompsplitterhor=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},bk):void 0;};D.appframework=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"appframework"},bk):void 0;};E.p=function(bk){return"{"+("docName = "+P.prettyPrint(bk.docName))+"; "+("docDoc = "+F.p(bk.docDoc))+"}";};F.p=function(bk){return bk.$==5?"FunDoc5 (<fun>, "+P.prettyPrint(bk.$1)+", "+P.prettyPrint(bk.$2)+", "+P.prettyPrint(bk.$3)+", "+P.prettyPrint(bk.$4)+", "+P.prettyPrint(bk.$5)+")":bk.$==4?"FunDoc4 (<fun>, "+P.prettyPrint(bk.$1)+", "+P.prettyPrint(bk.$2)+", "+P.prettyPrint(bk.$3)+", "+P.prettyPrint(bk.$4)+")":bk.$==3?"FunDoc3 (<fun>, "+P.prettyPrint(bk.$1)+", "+P.prettyPrint(bk.$2)+", "+P.prettyPrint(bk.$3)+")":bk.$==2?"FunDoc2 (<fun>, "+P.prettyPrint(bk.$1)+", "+P.prettyPrint(bk.$2)+")":bk.$==1?"FunDoc1 (<fun>, "+P.prettyPrint(bk.$1)+")":"LazyDoc "+P.prettyPrint(bk.$0);};D.tile=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"tile"},bk):void 0;};D.actiondisabled=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},bk):void 0;};D.action=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"action"},bk):void 0;};D.namevalue=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"namevalue"},bk):void 0;};D.namevalueinput=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},bk):void 0;};E.p$1=function(bk){return"{"+("actName = "+P.prettyPrint(bk.actName))+"; "+("actFunction = "+F.p$1(bk.actFunction))+"; "+("actEnabled = "+F.p$2(bk.actEnabled))+"}";};F.p$2=function(bk){return"View <fun>";};F.p$1=function(bk){return bk.$==2?"FunAct2 (<fun>, "+P.prettyPrint(bk.$1)+", "+P.prettyPrint(bk.$2)+")":bk.$==1?"FunAct1 (<fun>, "+P.prettyPrint(bk.$1)+")":"FunAct0 <fun>";};D.fixedsplitterhor=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},bk):void 0;};D.fixedsplitterver=function(bk){_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},bk):void 0;};D.appfwkclient=function(bk){D.fixedsplitterhor();D.fixedsplitterver();_3.LoadLocalTemplates("appframework");return bk?_3.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},bk):void 0;};}());

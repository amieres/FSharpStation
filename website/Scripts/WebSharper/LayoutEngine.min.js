(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.String=c.String||{};e=c.ParseO=c.ParseO||{};f=b.LibraryJS=b.LibraryJS||{};g=f.REGEX=f.REGEX||{};h=f.Hoverable=f.Hoverable||{};i=h.Hoverable=h.Hoverable||{};j=f.ResizeObserver=f.ResizeObserver||{};k=a.WebSharper;l=k&&k.Obj;m=f.WebComponent=f.WebComponent||{};n=m.WcTabStrip=m.WcTabStrip||{};o=n.WcTabStripT=n.WcTabStripT||{};p=m.WcSplitter=m.WcSplitter||{};q=p.WcSplitterT=p.WcSplitterT||{};r=f.AppFramework=f.AppFramework||{};s=r.PlugInVar=r.PlugInVar||{};t=r.PlugInView=r.PlugInView||{};u=r.PlugInDoc=r.PlugInDoc||{};v=r.PlugInAction=r.PlugInAction||{};w=r.PlugInQuery=r.PlugInQuery||{};x=r.PlugIn=r.PlugIn||{};y=f.LayoutEngine=f.LayoutEngine||{};z=f.LayoutEngineModule=f.LayoutEngineModule||{};A=z.Measures=z.Measures||{};B=z.Layout=z.Layout||{};C=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};D=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};E=a.GeneratedPrintf=a.GeneratedPrintf||{};F=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};G=k&&k.Strings;H=k&&k.Slice;I=k&&k.Seq;J=k&&k.Unchecked;K=k&&k.CancellationTokenSource;L=k&&k.Concurrency;M=k&&k.Utils;N=a.console;O=k&&k.Arrays;P=a.IntelliFactory;Q=P&&P.Runtime;R=k&&k.UI;S=R&&R.DomUtility;T=R&&R.Doc;U=k&&k.List;V=R&&R.View;W=R&&R.AttrModule;X=R&&R.AttrProxy;Y=R&&R.Var$1;Z=a.Node;_0=k&&k.Operators;_1=R&&R.Client;_2=_1&&_1.Templates;_3=a.Reflect;_4=a.Object;_5=R&&R.FromView;_6=R&&R.Templating;_7=_6&&_6.Runtime;_8=_7&&_7.Server;_9=_8&&_8.ProviderBuilder;_=_8&&_8.Handler;$=_8&&_8.TemplateInstance;ba=a.Math;bb=a.System;bc=bb&&bb.Guid;bd=k&&k.Lazy;be=k&&k.DateUtil;bf=k&&k.Numeric;bg=R&&R.ListModel;bh=k&&k.Collections;bi=bh&&bh.Dictionary;d.EndsWith=function(bj,bk){return G.EndsWith(bk,bj)?{$:1,$0:H.string(bk,{$:1,$0:0},{$:1,$0:bk.length-bj.length-1})}:null;};d.StartsWith=function(bj,bk){return G.StartsWith(bk,bj)?{$:1,$0:H.string(bk,{$:1,$0:bj.length},null)}:null;};d.skipLastLine=function(){C.$cctor();return C.skipLastLine;};d.indentStr=function(bj){function bk(bm){return d.indent(bj,bm);}function bl(bm){return G.concat("\n",bm);}return function(bm){return bl(bk(bm));};};d.unindentStr=function(){C.$cctor();return C.unindentStr;};d.indent=function(bj,bk){var bl,bm;bl=G.SplitChars(bk,["\n"],0);return I.map((bm=G.replicate(bj," "),function(bn){return bm+bn;}),bl);};d.unindent=function(bj){var bk,bl,bm,bn;bk=G.SplitChars(bj,["\n"],0);bl=(bm=I.tryFindIndex(function(bo){return" "!==bo;},(bn=I.tryFind(function(bo){return G.Trim(bo)!=="";},bk),bn==null?"":bn.$0)),bm==null?0:bm.$0);return I.filter(function(bo){return!G.StartsWith(bo,"# 1 ");},I.map(function(bo){return bo.length<=bl?"":bo.substring(bl);},bk));};d.skipFirstLine=function(bj){var bk;bk=bj.indexOf("\n");return bk<0?"":H.string(bj,{$:1,$0:bk+1},null);};d.append=function(bj,bk){return bj+bk;};d.trim=function(bj){return G.Trim(bj);};d.contains=function(bj,bk){return bk.indexOf(bj)!=-1;};d.delimitedO=function(bj,bk,bl){var bm,bn,bo,bp,bq;bm=d.splitInTwoO(bj,bl);return bm==null?null:(bn=bm.$0,(bo=bn[0],(bp=d.splitInTwoO(bk,bn[1]),bp==null?null:{$:1,$0:(bq=bp.$0,[bo,bq[0],bq[1]])})));};d.splitInTwoO=function(bj,bk){var bl;bl=bk.indexOf(bj);return bl===-1?null:{$:1,$0:[c["String.Left"](bk,bl),bk.substring(bl+bj.length)]};};d.splitByChar=function(bj,bk){return G.SplitChars(bk,[bj],0);};e.Guid=function(){C.$cctor();return C["|Guid|_|"];};e.Double=function(){C.$cctor();return C["|Double|_|"];};e.Single=function(){C.$cctor();return C["|Single|_|"];};e.Int64=function(){C.$cctor();return C["|Int64|_|"];};e.Int=function(){C.$cctor();return C["|Int|_|"];};e.Date=function(){C.$cctor();return C["|Date|_|"];};e.parseGuidO=function(){C.$cctor();return C.parseGuidO;};e.parseDoubleO=function(){C.$cctor();return C.parseDoubleO;};e.parseSingleO=function(){C.$cctor();return C.parseSingleO;};e.parseInt64O=function(){C.$cctor();return C.parseInt64O;};e.parseIntO=function(){C.$cctor();return C.parseIntO;};e.parseDateO=function(){C.$cctor();return C.parseDateO;};e.parseDateO2=function(){C.$cctor();return C.parseDateO2;};e.tryParseWith=function(bj){function bk(bl,bm){return bl?{$:1,$0:bm}:null;}return function(bl){return bk.apply(null,bj(bl));};};c["String.Right"]=function(bj,bk){var bl,bm;return c["String.Substring2"](bj,(bl=0,(bm=bj.length-bk,J.Compare(bl,bm)===1?bl:bm)),bj.length);};c["String.Left"]=function(bj,bk){return bk<0?c["String.Substring2"](bj,0,bj.length+bk):c["String.Substring2"](bj,0,bk);};c["String.Substring2"]=function(bj,bk,bl){var bm,bn;while(true){if(bl<=0)return"";else if(bk<0){bm=bk;bk=0;bl=bl+bm;}else return bk>=bj.length?"":G.Substring(bj,bk,(bn=bj.length-bk,J.Compare(bl,bn)===-1?bl:bn));}};c.delayed=function(bj,bk){var bl;bl=[null];return function(bm){var bn,bo;bn=bl[0];bn==null?void 0:bn.$0.Cancel$1();bl[0]={$:1,$0:new K.New()};L.Start((bo=null,L.Delay(function(){return L.Bind(L.Sleep(bj),function(){bk(bm);return L.Zero();});})),{$:1,$0:bl[0].$0});};};c.print=function(bj){if(typeof bj=="string")((function(bk){return function(bl){return bk(M.toSafe(bl));};}(function(bk){N.log(bk);}))(bj));else((function(bk){return function(bl){return bk(M.prettyPrint(bl));};}(function(bk){N.log(bk);}))(bj));};c.Error=function(bj){return{$:1,$0:bj};};g.Identifier=function(bj){var bk,bl,bm;return(bl=f.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",bj),bl!=null&&bl.$==1&&((bm=bl.$0,!J.Equals(bm,null)&&bm.length===1)&&(bk=O.get(bl.$0,0),true)))?{$:1,$0:bk}:null;};g.getEndWord=function(bj,bk){var bl,bm;bl=f.REGEX$1("^([a-zA-Z_]\\w*)","g",bj.substring(bk));return bl!=null&&bl.$==1?(bm=bl.$0,!J.Equals(bm,null)&&bm.length===1)?O.get(bl.$0,0):"":"";};g.getStartWord=function(bj,bk){var bl,bm;bl=f.REGEX$1("([a-zA-Z_]\\w*)$","g",G.Substring(bj,0,bk));return bl!=null&&bl.$==1?(bm=bl.$0,!J.Equals(bm,null)&&bm.length===1)?O.get(bl.$0,0):"":"";};i=h.Hoverable=Q.Class({Content:function(bj){return bj.on("mouseenter",function(){return S.AddClass(bj.elt,"hovering");}).on("mouseleave",function(){return S.RemoveClass(bj.elt,"hovering");});},Content$1:function(bj){return T.Element("div",this.get_Attributes(),bj);},get_Attributes:function(){var bj,bk;bj=this;return U.ofArray([(bk=V.Const("hovering"),W.DynamicPred("class",this.hover.get_View(),bk)),X.HandlerImpl("mouseenter",function(){return function(){return bj.hover.Set(true);};}),X.HandlerImpl("mouseleave",function(){return function(){return bj.hover.Set(false);};})]);}},null,i);i.get_Demo=function(){return i.New$1().Content(T.Element("div",[X.Create("style","flex-flow: column;")],[T.TextNode("Hover over me!")]));};i.Content$289$81=Q.Curried3(function(bj,bk,bl){return S.RemoveClass(bj.elt,"hovering");});i.get_Attributes$285$69=Q.Curried3(function(bj,bk,bl){return bj.hover.Set(false);});i.get_Attributes$284$69=Q.Curried3(function(bj,bk,bl){return bj.hover.Set(true);});i.New$1=function(){return i.New(Y.Create$1(false));};i.New=function(bj){return new i({hover:bj});};h.hoverable=function(bj){return i.New$1().Content(bj);};j.addResizeObserver=function(bj,bk){var bl,bm,bn,bo;try{bl=!(!a.ResizeObserver);}catch(bp){bl=false;}if(bl){bm=new a.ResizeObserver(bj);j.set_observers(new U.T({$:1,$0:bm,$1:j.observers()}));bm.observe(bk);}else{bn=j.dimsChanged(bk);L.Start((bo=null,L.Delay(function(){return L.While(function(){return bk.isConnected;},L.Delay(function(){return L.Bind(L.Sleep(110),function(){return bn()?(bj(),L.Zero()):L.Zero();});}));})),null);}};j.dimsChanged=function(bj){var bk;bk=[bj.getBoundingClientRect()];return function(){var bl;bl=bj.getBoundingClientRect();return J.Equals(j.domRect2Tuple(bk[0]),j.domRect2Tuple(bl))?false:(bk[0]=bl,true);};};j.domRect2Tuple=function(bj){return[bj.top,bj.left,bj.width,bj.height];};j.observers=function(){C.$cctor();return C.observers;};j.set_observers=function(bj){C.$cctor();C.observers=bj;};o=n.WcTabStripT=Q.Class({connectedCallback:function(){var bj,bk,bl,bm;function bn(){var bo,bp,bq;bp=!bk.hasAttribute("bottom");bq=U.ofSeq(I.delay(function(){return I.collect(function(br){var bs;bs=bk.childNodes[br-1];return J.Equals(bs.nodeType,Z.ELEMENT_NODE)?[[bs.hasAttribute("tabname")?bs.getAttribute("tabname"):(function(bt){return function(bu){return bt("Tab "+a.String(bu));};}(a.id))(br),bs]]:[];},_0.range(1,bk.childNodes.length));}));while(bm.childNodes.length>0)bm.removeChild(bm.lastChild);bo=n.tabStrip(bj.selected,bp,true,bq,T.Element("slot",U.T.Empty,U.T.Empty));_2.LoadLocalTemplates("");T.Run(bm,bo);}bj=this;!this.added?(bk=this,bl=bk.attachShadow({mode:"open"}),bm=self.document.createElement("div"),bl.appendChild(bm),bn(),bk.addEventListener("DOMSubtreeModified",c.delayed(50,bn)),this.added=true):void 0;}},l,o);o.Constructor=function(){var bj,bk;bj=(bk=_3.construct(self.HTMLElement,[],this.__proto__.constructor),bk);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(bj);return bj;};o.New=Q.Ctor(function(){l.New.call(this);this.added=false;this.selected=Y.Create$1(1);(function(bj){return bj("WcTabStripT initializer");}(function(bj){N.log(bj);}));},o);n.init=function(){C.$cctor();return C.init;};n.tabStrip$431$64=function(bj,bk){return function(){return function(){return bk.Set(bj+1);};};};n.tabStrip=function(bj,bk,bl,bm,bn){var bo;bo=T.Element("div",[X.Create("class",(((Q.Curried3(function(bp,bq,br){return bp("tab-strip "+M.toSafe(bq)+" "+M.toSafe(br));}))(a.id))(bk?"top":"bottom"))(bl?"horizontal":"vertical"))],U.ofSeq(I.delay(function(){return I.collect(function(bp){var bq;bq=bp[0];return[i.New$1().Content(T.Element("div",[W.Dynamic("class",V.Map(function(br){return"tab"+(br===bq+1?" selected":"");},bj.get_View())),X.Create("draggable","true"),X.HandlerImpl("click",function(){return function(){return bj.Set(bq+1);};})],[T.TextNode(bp[1][0])]))];},I.indexed(bm));})));return T.Element("div",[X.Create("class","tab-panel")],U.ofSeq(I.delay(function(){return I.append(bk?[bo]:[],I.delay(function(){return I.append([T.Element("div",[X.Create("class","tab-content")],[bn])],I.delay(function(){return I.append(!bk?[bo]:[],I.delay(function(){return I.append([T.Element("style",U.T.Empty,U.ofArray([T.TextNode(n.css())]))],I.delay(function(){return[T.Element("style",U.T.Empty,U.ofArray([T.TextView(V.Map(function(bp){return function(bq){return bp("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(bq)+")) { display: grid }\r\n                                           ");};}(a.id),bj.get_View()))]))];}));}));}));}));})));};n.css=function(){C.$cctor();return C.css;};q=p.WcSplitterT=Q.Class({connectedCallback:function(){var bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by;function bz(bH){var bI,bJ,bK,bL;bI=bq?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];bJ=a.parseFloat("0"+a.jQuery(bH.parentElement.parentElement).css(bI[0]));bK=a.parseFloat("0"+a.jQuery(bH.parentElement.parentElement).css(bI[1]));bt.Set(a.parseFloat("0"+a.jQuery(bH.parentElement.parentElement).css(bI[2])));bs[0]=bJ+bK;bL=bj.getBoundingClientRect();return bq?bp?[bL.width,bL.height]:[-bL.width,bL.height]:bp?[bL.height,bL.width]:[-bL.height,bL.width];}function bA(bH){return bq?bH.clientX:bH.clientY;}function bB(bH){var bI,bJ;bI=(bA(bH)-bw[0])*100/br[0][0]+bv[0];bo.Set((bJ=J.Compare(bm,bI)===1?bm:bI,J.Compare(bn,bJ)===-1?bn:bJ));}function bC(){if(bu[0]){bu[0]=false;self.removeEventListener("mousemove",bB,false);self.removeEventListener("mouseup",bC,false);}}function bD(bH){var bI,bJ;if(!bu[0]){bu[0]=true;bv[0]=bo.Get();bw[0]=bA(bH);br[0]=(bI=(bJ=bx[0],bJ==null?null:{$:1,$0:bz(bJ.$0)}),bI==null?[100,500]:bI.$0);self.addEventListener("mousemove",bB,false);self.addEventListener("mouseup",bC,false);bH.preventDefault();}}function bE(bH,bI,bJ,bK){return[(bH-bI-bJ)*bK/100,(bH-bI-bJ)*(100-bK)/100];}function bF(bH,bI){return(((((Q.Curried(function(bJ,bK,bL,bM,bN){return bJ(" "+bK.toFixed(2)+"px "+bL.toFixed(2)+"px ; "+M.toSafe(bM)+" : "+bN.toFixed(2)+"px; ");},5))(a.id))(bH))(bI))(bq?"height":"width"))(br[0][1]);}function bG(){var bH;bH=bx[0];bH==null?void 0:br[0]=bz(bH.$0);bo.Set(bo.Get());}if(!this.added){bj=this;bk=bj.attachShadow({mode:"open"});bl=self.document.createElement("div");bm=bj.hasAttribute("min")?a.parseFloat(bj.getAttribute("min")):4;bn=bj.hasAttribute("max")?a.parseFloat(bj.getAttribute("max")):96;bo=Y.Create$1(bj.hasAttribute("value")?a.parseFloat(bj.getAttribute("value")):50);bp=!bj.hasAttribute("second");bq=bj.hasAttribute("vertical");br=[[0,0]];bs=[0];bt=Y.Create$1(0);bu=[false];bv=[0];bw=[0];bx=[null];by=(((((bq?p.layoutVertical():p.layoutHorizontal())(V.Map(function(bH){var bI;bI=bE(br[0][0],bt.Get(),bs[0],bH);return bF.apply(null,bI);},bo.get_View())))(function(){j.addResizeObserver(bG,bj);bG();}))(function(bH){bx[0]={$:1,$0:bH};bG();}))(function(bH){bD(bH);}))(V.Map(function(bH){return function(bI){return bH(M.prettyPrint(bI)+"px");};}(a.id),bt.get_View()));_2.LoadLocalTemplates("");T.Run(bl,by);bk.appendChild(bl.firstChild);this.added=true;}}},l,q);q.Constructor=function(){var bj,bk;bj=(bk=_3.construct(self.HTMLElement,[],this.__proto__.constructor),bk);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(bj);return bj;};q.New=Q.Ctor(function(){l.New.call(this);this.added=false;(function(bj){return bj("WcSplitterT initializer");}(function(bj){N.log(bj);}));},q);p.init=function(bj,bk){var bl;bl=new q.New();p.set_layoutHorizontal(bj);p.set_layoutVertical(bk);m.defineWebComponent("wcomp-splitter",q.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};p.layoutVertical=function(){C.$cctor();return C.layoutVertical;};p.set_layoutVertical=function(bj){C.$cctor();C.layoutVertical=bj;};p.layoutHorizontal=function(){C.$cctor();return C.layoutHorizontal;};p.set_layoutHorizontal=function(bj){C.$cctor();C.layoutHorizontal=bj;};m.defineWebComponent=function(bj,bk,bl){try{N.log("defineWebComponent: "+bj);_4.setPrototypeOf(bl.prototype,self.HTMLElement.prototype);_4.setPrototypeOf(bl,self.HTMLElement);_4.setPrototypeOf(bk.prototype,bl.prototype);self.customElements.define(bj,bk);}catch(bm){(function(bn){return bn("Failed to define WebComponent. Not supported.");}(function(bn){N.log(bn);}));}};s.New=function(bj,bk){return{varName:bj,varVar:bk};};t.New=function(bj,bk){return{viwName:bj,viwView:bk};};u.New=function(bj,bk){return{docName:bj,docDoc:bk};};v.New=function(bj,bk,bl){return{actName:bj,actFunction:bk,actEnabled:bl};};w.New=function(bj,bk){return{qryName:bj,qryFunction:bk};};x.New=function(bj,bk,bl,bm,bn,bo){return{plgName:bj,plgVars:bk,plgViews:bl,plgDocs:bm,plgActions:bn,plgQueries:bo};};r.addPlugIn=function(bj){r.plugIns().Append(bj);r.mainDocV().Set(r.mainDocV().Get());};r.getMainDoc=function(){C.$cctor();return C.getMainDoc;};r.qryDocs=function(){C.$cctor();return C.qryDocs;};r.actHello=function(){C.$cctor();return C.actHello;};r.tryGetWoW=function(bj,bk){var bl,bm,bn;bl=(bm=r.tryGetViw(bj,bk),bm==null?null:{$:1,$0:{$:1,$0:bm.$0.viwView}});return bl==null?(bn=r.tryGetVar(bj,bk),bn==null?null:{$:1,$0:bn.$0.varVar.get_View()}):bl.$0;};r.tryGetVoV=function(bj,bk){var bl,bm,bn;bl=(bm=r.tryGetVar(bj,bk),bm==null?null:{$:1,$0:{$:1,$0:bm.$0.varVar}});return bl==null?(bn=r.tryGetViw(bj,bk),bn==null?null:{$:1,$0:new _5.New(bn.$0.viwView,a.ignore)}):bl.$0;};r.tryGetDoc=function(bj,bk){var bl;bl=r.tryGetPlugIn(bj);return bl==null?null:O.tryFind(function(bm){return bm.docName===bk;},bl.$0.plgDocs);};r.tryGetQry=function(bj,bk){var bl;bl=r.tryGetPlugIn(bj);return bl==null?null:O.tryFind(function(bm){return bm.qryName===bk;},bl.$0.plgQueries);};r.tryGetAct=function(bj,bk){var bl;bl=r.tryGetPlugIn(bj);return bl==null?null:O.tryFind(function(bm){return bm.actName===bk;},bl.$0.plgActions);};r.tryGetViw=function(bj,bk){var bl;bl=r.tryGetPlugIn(bj);return bl==null?null:O.tryFind(function(bm){return bm.viwName===bk;},bl.$0.plgViews);};r.tryGetVar=function(bj,bk){var bl;bl=r.tryGetPlugIn(bj);return bl==null?null:O.tryFind(function(bm){return bm.varName===bk;},bl.$0.plgVars);};r.tryGetPlugIn=function(bj){return r.plugIns().TryFindByKey(bj);};r.newDocF=function(bj,bk){return u.New(bj,bk);};r.newActF=function(bj,bk){return v.New(bj,bk,V.Const(true));};r.newAct=function(bj,bk){return v.New(bj,{$:0,$0:bk},V.Const(true));};r.newQry=function(bj,bk){return w.New(bj,bk);};r.newDoc=function(bj,bk){return u.New(bj,{$:0,$0:bk});};r.newViw=function(bj,bk){return t.New(bj,bk);};r.newVar=function(bj,bk){return s.New(bj,bk);};r.vertical$804$39=function(bj){return function(bk){bj(bk.Event);};};r.vertical$803$39=a.id;r.vertical$802$39=a.id;r.vertical=function(bj,bk,bl,bm,bn){var bo,bp,bq,br;return(bo=(bp=_9.Make().WithHole({$:2,$0:"partsizes",$1:bj}).WithHole({$:7,$0:"afterrender",$1:bk}).WithHole({$:7,$0:"afterrendersp",$1:bl}),bp.WithHole(_.EventQ2(bp.k,"mousedown",function(){return bp.i;},function(bs){bm(bs.Event);}))).WithHole({$:2,$0:"gap",$1:bn}),(bq=_.CompleteHoles(bo.k,bo.h,[]),(br=new $.New(bq[1],D.wcompsplitterver(bq[0])),(bo.i=br,br)))).get_Doc();};r.horizontal$796$39=function(bj){return function(bk){bj(bk.Event);};};r.horizontal$795$39=a.id;r.horizontal$794$39=a.id;r.horizontal=function(bj,bk,bl,bm,bn){var bo,bp,bq,br;return(bo=(bp=_9.Make().WithHole({$:2,$0:"partsizes",$1:bj}).WithHole({$:7,$0:"afterrender",$1:bk}).WithHole({$:7,$0:"afterrendersp",$1:bl}),bp.WithHole(_.EventQ2(bp.k,"mousedown",function(){return bp.i;},function(bs){bm(bs.Event);}))).WithHole({$:2,$0:"gap",$1:bn}),(bq=_.CompleteHoles(bo.k,bo.h,[]),(br=new $.New(bq[1],D.wcompsplitterhor(bq[0])),(bo.i=br,br)))).get_Doc();};r.mainDoc$785$42=function(){return function(){r.mainDocV().Set("AppFramework.AppFwkClient");};};r.mainDoc=function(){var bj,bk,bl,bm,bn,bo;return(bj=(bk=r.getMainClientDoc(),(bl=(bm=r.mainDocV().get_View(),_9.Make().WithHole({$:2,$0:"maindoc",$1:bm})),bl.WithHole(_.EventQ2(bl.k,"goclient",function(){return bl.i;},function(){r.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:bk})),(bn=_.CompleteHoles(bj.k,bj.h,[]),(bo=new $.New(bn[1],D.appframework(bn[0])),(bj.i=bo,bo)))).get_Doc();};r.getMainClientDoc=function(){var bj;return T.EmbedView((bj=r.plugIns().v,V.Map2(function(bk,bl){var bm,bn;bm=I.tryPick(function(bo){var bp;bp=I.tryFind(function(bq){return bo.plgName===bk||bo.plgName+"."+bq.docName===bk;},bo.plgDocs);return bp==null?null:{$:1,$0:r.getLazyDoc(bp.$0)};},bl);bn=r.AppFwkClient().f();return bm==null?bn:bm.$0;},r.mainDocV().get_View(),bj)));};r.getLazyDoc=function(bj){var bk;bk=bj.docDoc;return bk.$==0?bk.$0.f():T.Element("div",[],[T.TextNode((function(bl){return function(bm){return bl("Doc with parameters not allowed here: "+E.p(bm));};}(a.id))(bj))]);};r.AppFwkClient=function(){C.$cctor();return C.AppFwkClient;};r.renderQueries$751$39=function(bj){return function(){a.alert(bj.qryFunction(null));};};r.renderQueries=function(){function bj(bl,bm){return[bl.plgName,bm.qryName];}function bk(bl,bm){var bn,bo,bp,bq;return(bn=(bo=_9.Make().WithHole({$:1,$0:"name",$1:bm.qryName}),bo.WithHole(_.EventQ2(bo.k,"select",function(){return bo.i;},function(){a.alert(bm.qryFunction(null));}))),(bp=_.CompleteHoles(bn.k,bn.h,[]),(bq=new $.New(bp[1],D.tile(bp[0])),(bn.i=bq,bq)))).get_Doc();}return T.ConvertBy(function(bl){return bj(bl[0],bl[1]);},function(bl){return bk(bl[0],bl[1]);},V.Map(function(bl){return I.map(function(bm){return[bl,bm];},bl.plgQueries);},r.currentPlugInW()));};r.renderActions$740$51=function(bj){return function(bk){r.callFunction(bk,null,bj.actFunction);};};r.renderActions$736$51=function(bj){return function(bk){r.callFunction(bk,null,bj.actFunction);};};r.renderActions=function(){function bj(bl,bm){return[bl.plgName,bm.actName];}function bk(bl,bm){var bn,bo,bp,bq;bn=(bo=bm.actFunction,bo.$==1?(bp=G.concat(", ",U.ofArray([bo.$1])),(function(br){return function(bs){return br("("+M.toSafe(bs)+")");};}(a.id))(bp)):bo.$==2?(bq=G.concat(", ",U.ofArray([bo.$1,bo.$2])),(function(br){return function(bs){return br("("+M.toSafe(bs)+")");};}(a.id))(bq)):"");return T.EmbedView(V.Map(function(br){var bs,bt,bu,bv,bw,bx,by,bz;return br?(bs=(bt=_9.Make().WithHole({$:1,$0:"name",$1:bm.actName+bn}),bt.WithHole(_.EventQ2(bt.k,"click",function(){return bt.i;},function(bA){r.callFunction(bA,null,bm.actFunction);}))),(bu=_.CompleteHoles(bs.k,bs.h,[]),(bv=new $.New(bu[1],D.action(bu[0])),(bs.i=bv,bv)))).get_Doc():(bw=(bx=_9.Make().WithHole({$:1,$0:"name",$1:bm.actName}),bx.WithHole(_.EventQ2(bx.k,"click",function(){return bx.i;},function(bA){r.callFunction(bA,null,bm.actFunction);}))),(by=_.CompleteHoles(bw.k,bw.h,[]),(bz=new $.New(by[1],D.actiondisabled(by[0])),(bw.i=bz,bz)))).get_Doc();},bm.actEnabled));}return T.ConvertBy(function(bl){return bj(bl[0],bl[1]);},function(bl){return bk(bl[0],bl[1]);},V.Map(function(bl){return I.map(function(bm){return[bl,bm];},bl.plgActions);},r.currentPlugInW()));};r.callFunction=function(bj,bk,bl){if(bl.$==1)bl.$0(bj);else if(bl.$==2)(bl.$0(bj))(bk);else bl.$0();};r.renderDocs$714$39=function(bj){return function(){V.Get(function(bk){r.mainDocV().Set(bk.plgName+"."+bj.docName);},r.currentPlugInW());};};r.renderDocs=function(){function bj(bl,bm){return[bl.plgName,bm.docName];}function bk(bl,bm){var bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx;return(bn=(bo=(bp=bm.docName+(bq=bm.docDoc,bq.$==1?(br=G.concat(", ",U.ofArray([bq.$1])),(function(by){return function(bz){return by("("+M.toSafe(bz)+")");};}(a.id))(br)):bq.$==2?(bs=G.concat(", ",U.ofArray([bq.$1,bq.$2])),(function(by){return function(bz){return by("("+M.toSafe(bz)+")");};}(a.id))(bs)):bq.$==3?(bt=G.concat(", ",U.ofArray([bq.$1,bq.$2,bq.$3])),(function(by){return function(bz){return by("("+M.toSafe(bz)+")");};}(a.id))(bt)):bq.$==4?(bu=G.concat(", ",U.ofArray([bq.$1,bq.$2,bq.$3,bq.$4])),(function(by){return function(bz){return by("("+M.toSafe(bz)+")");};}(a.id))(bu)):bq.$==5?(bv=G.concat(", ",U.ofArray([bq.$1,bq.$2,bq.$3,bq.$4,bq.$5])),(function(by){return function(bz){return by("("+M.toSafe(bz)+")");};}(a.id))(bv)):""),_9.Make().WithHole({$:1,$0:"name",$1:bp})),bo.WithHole(_.EventQ2(bo.k,"select",function(){return bo.i;},function(){V.Get(function(by){r.mainDocV().Set(by.plgName+"."+bm.docName);},r.currentPlugInW());}))),(bw=_.CompleteHoles(bn.k,bn.h,[]),(bx=new $.New(bw[1],D.tile(bw[0])),(bn.i=bx,bx)))).get_Doc();}return T.ConvertBy(function(bl){return bj(bl[0],bl[1]);},function(bl){return bk(bl[0],bl[1]);},V.Map(function(bl){return I.map(function(bm){return[bl,bm];},bl.plgDocs);},r.currentPlugInW()));};r.renderViews=function(){function bj(bl,bm){return[bl.plgName,bm.viwName];}function bk(bl,bm){var bn,bo,bp;return(bn=_9.Make().WithHole({$:1,$0:"name",$1:bm.viwName}).WithHole({$:2,$0:"value",$1:bm.viwView}),(bo=_.CompleteHoles(bn.k,bn.h,[]),(bp=new $.New(bo[1],D.namevalue(bo[0])),(bn.i=bp,bp)))).get_Doc();}return T.ConvertBy(function(bl){return bj(bl[0],bl[1]);},function(bl){return bk(bl[0],bl[1]);},V.Map(function(bl){return I.map(function(bm){return[bl,bm];},bl.plgViews);},r.currentPlugInW()));};r.renderVars=function(){function bj(bl,bm){return[bl.plgName,bm.varName];}function bk(bl,bm){var bn,bo,bp;return(bn=_9.Make().WithHole({$:1,$0:"name",$1:bm.varName}).WithHole({$:8,$0:"value",$1:bm.varVar}),(bo=_.CompleteHoles(bn.k,bn.h,[["value",0]]),(bp=new $.New(bo[1],D.namevalueinput(bo[0])),(bn.i=bp,bp)))).get_Doc();}return T.ConvertBy(function(bl){return bj(bl[0],bl[1]);},function(bl){return bk(bl[0],bl[1]);},V.Map(function(bl){return I.map(function(bm){return[bl,bm];},bl.plgVars);},r.currentPlugInW()));};r.renderPlugIns$676$35=function(bj){return function(){r.selectionPlugInO().Set({$:1,$0:bj});};};r.renderPlugIns=function(){return T.Flatten(r.plugIns().MapLens(function(bj){var bk,bl,bm,bn;return(bk=(bl=_9.Make().WithHole({$:1,$0:"name",$1:bj}),bl.WithHole(_.EventQ2(bl.k,"select",function(){return bl.i;},function(){r.selectionPlugInO().Set({$:1,$0:bj});}))).WithHole({$:2,$0:"selected",$1:V.Map(function(bo){return J.Equals(bo,{$:1,$0:bj})?"selected":"";},r.selectionPlugInO().get_View())}),(bm=_.CompleteHoles(bk.k,bk.h,[]),(bn=new $.New(bm[1],D.tile(bm[0])),(bk.i=bn,bn)))).get_Doc();}));};r.currentPlugInV=function(){C.$cctor();return C.currentPlugInV;};r.currentPlugInW=function(){C.$cctor();return C.currentPlugInW;};r.selectionPlugInO=function(){C.$cctor();return C.selectionPlugInO;};r.splitName=function(bj){function bk(bm){return d.splitByChar(".",bm);}function bl(bm){return O.length(bm)===1?[bj,O.get(bm,0)]:[O.get(bm,0),O.get(bm,1)];}return function(bm){return bl(bk(bm));};};r.defaultPlugIn=function(){C.$cctor();return C.defaultPlugIn;};r.TemplateFileName=function(){C.$cctor();return C.TemplateFileName;};r.mainDocV=function(){C.$cctor();return C.mainDocV;};r.plugIns=function(){C.$cctor();return C.plugIns;};y.New=function(bj,bk){return{lytName:bj,lytDefinition:bk};};A=z.Measures=Q.Class({toString:function(){return this.$==1?((((Q.Curried(function(bj,bk,bl,bm){return bj(a.String(bk)+"-"+a.String(bl)+"-"+a.String(bm));},4))(a.id))(_0.toInt(this.$0)))(_0.toInt(this.$1)))(_0.toInt(this.$2)):a.String(_0.toInt(this.$1?this.$0:-this.$0));}},null,A);B.createLayoutDefinitions=function(bj,bk){var bl,bm,bn,bo,bp,bq,br,bs,bt,bu;return bk.$==1?(bl=bk.$0.$0,(bm=bk.$0.$1,(bn=B.createLayoutDefinitions(bj+"_1",bk.$0.$2),(bo=bn[0],(bp=bn[1],(bq=B.createLayoutDefinitions(bj+"_2",bk.$0.$3),(br=bq[0],(bs=bq[1],[bj,O.ofSeq(I.delay(function(){return I.append([G.concat(" ",U.ofArray([bj,bl?"vertical":"horizontal",a.String(bm),bo,br]))],I.delay(function(){return I.append(bp,I.delay(function(){return bs;}));}));}))])))))))):(bt=bk.$0,!J.Equals(bt,null)&&bt.length===0)?["___",[]]:(bu=bk.$0,!J.Equals(bu,null)&&bu.length===1)?[O.get(bk.$0,0),[]]:[bj,[bj+" div \"\" "+G.concat(" ",bk.$0)]];};B.extractNodes=function(bj){var bk,bl;function bm(bn,bo,bp,bq){var br,bs,bt,bu,bv,bw;br=B.extractNodes(bp);bs=B.extractNodes(bq);return(br.$==0?(bu=br.$0,!J.Equals(bu,null)&&bu.length===0)?(bt=bs,true):bs.$==0?(bv=bs.$0,!J.Equals(bv,null)&&bv.length===0)?(bt=br,true):(bt=[br,bs],false):(bt=[br,bs],false):bs.$==0?(bw=bs.$0,!J.Equals(bw,null)&&bw.length===0)?(bt=br,true):(bt=[br,bs],false):(bt=[br,bs],false))?bt:{$:1,$0:{$:0,$0:bn,$1:bo,$2:bt[0],$3:bt[1]}};}bk=B.horizontalSplit(bj);return bk!=null&&bk.$==1?bm(false,bk.$0[2],bk.$0[0],bk.$0[1]):(bl=B.verticalSplit(bj),bl!=null&&bl.$==1?bm(true,bl.$0[2],bl.$0[0],bl.$0[1]):{$:0,$0:B.cleanSpaces(bj)});};B.cleanSpaces=function(bj){return O.filter(function(bk){var bl;return!(bl=(e.Int())(bk),bl!=null&&bl.$==1);},G.SplitStrings(G.concat(" ",bj),[" "],1));};B.verticalSplit=function(bj){var bk,bl,bm,bn,bo,bp,bq,br,bs,bt;function bu(bx,by){var bz,bA,bB;return(bA=f.REGEX$1("^ *\\|+ *$","",by),bA!=null&&bA.$==1&&(bB=bA.$0,!J.Equals(bB,null)&&bB.length===1))?{$:1,$0:[bx,by.indexOf("|")]}:null;}function bv(bx){return J.Equals(null,bx);}function bw(bx){return J.Equals(null,bx);}bk=B.transpose(bj);bl=(bm=(bn=I.tryHead(I.sortBy(function(bx){return bx[1];},I.choose(function(bx){return bu(bx[0],bx[1]);},I.indexed(bk)))),bn==null?null:{$:1,$0:bn.$0[0]}),bm==null?null:{$:1,$0:(bo=bm.$0,[B.transpose(H.array(bk,null,{$:1,$0:bo-1})),B.transpose(H.array(bk,{$:1,$0:bo+1},null))])});return bl==null?null:{$:1,$0:(bp=bl.$0,(bq=bp[0],(br=bp[1],[O.filter(function(bx){return bv(B.extractMeasuresO(bx));},bq),O.filter(function(bx){return bw(B.extractMeasuresO(bx));},br),(bs=I.tryHead(I.delay(function(){return I.append(I.choose(B.extractMeasuresO,bq),I.delay(function(){return I.map(function(bx){return bx.$==0?bx.$1?new A({$:0,$0:bx.$0,$1:false}):bx:bx;},I.choose(B.extractMeasuresO,br));}));})),(bt=new A({$:1,$0:5,$1:50,$2:95}),bs==null?bt:bs.$0))])))};};B.transpose=function(bj){var bk;bk=I.max(I.map(function(bl){return bl.length;},bj));return O.ofSeq(I.delay(function(){return I.map(function(bl){return O.ofSeq(I.delay(function(){return I.map(function(bm){return bm.length>bl?bm[bl]:" ";},bj);})).join("");},_0.range(0,bk-1));}));};B.horizontalSplit=function(bj){var bk,bl,bm,bn,bo;function bp(bq,br){var bs,bt,bu,bv;bs=f.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",br);return bs!=null&&bs.$==1?{$:1,$0:[[bq,(bt=(bu=I.tryItem(1,bs.$0),bu==null?null:B.extractMeasuresO(G.Replace(G.Replace(bu.$0,"^",""),"v","-"))),(bv=new A({$:1,$0:5,$1:50,$2:95}),bt==null?bv:bt.$0))],br.indexOf("-")]}:null;}bk=(bl=I.tryHead(I.sortBy(function(bq){return bq[1];},I.choose(function(bq){return bp(bq[0],bq[1]);},I.indexed(bj)))),bl==null?null:{$:1,$0:bl.$0[0]});return bk==null?null:{$:1,$0:(bm=bk.$0,(bn=bm[0],(bo=bm[1],[H.array(bj,null,{$:1,$0:bn-1}),H.array(bj,{$:1,$0:bn+1},null),bo])))};};B.extractMeasuresO=function(bj){var bk,bl,bm,bn,bo,bp,bq;bk=G.SplitChars(bj,[" "],1);return!J.Equals(bk,null)&&bk.length===1&&(bm=(e.Int())(O.get(bk,0)),bm!=null&&bm.$==1&&(bl=bm.$0,true))?{$:1,$0:new A({$:0,$0:ba.abs(bl),$1:bl>=0})}:!J.Equals(bk,null)&&bk.length===3&&(bo=(e.Int())(O.get(bk,0)),bo!=null&&bo.$==1&&(bp=(e.Int())(O.get(bk,1)),bp!=null&&bp.$==1&&(bq=(e.Int())(O.get(bk,2)),bq!=null&&bq.$==1&&(bn=[bq.$0,bo.$0,bp.$0],true))))?{$:1,$0:new A({$:1,$0:bn[1],$1:bn[2],$2:bn[0]})}:null;};z.addNewLayout=function(bj,bk){var bl,bm;z.addLayout((bl=(bm=!J.Equals(bk,null)?bk:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(d.unindentStr())(bm)),z.newLyt(!J.Equals(bk,null)?bj:"Lyt_"+G.Replace(a.String(bc.NewGuid()),"-",""),bl)));};z.newLyt=function(bj,bk){return y.New(bj,Y.Create$1(bk));};z.addLayout=function(bj){V.Sink(function(bk){var bl;bl=z.createEntries(bj.lytName,bk);r.addPlugIn(x.New(bj.lytName,O.ofSeq(I.delay(function(){return I.append([r.newVar("Layout",bj.lytDefinition)],I.delay(function(){return z.getVarEntries(bl);}));})),[],O.ofSeq(I.delay(function(){return I.append(z.getDocEntries(bl),I.delay(function(){var bm;return I.append([r.newDocF("InputFile",{$:4,$0:(bm=bj.lytName,Q.Curried(z.inputFile,4,[bm])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],I.delay(function(){var bn;return I.append([r.newDocF("InputLabel",{$:3,$0:(bn=bj.lytName,Q.Curried(z.inputLabel,3,[bn])),$1:"attrs",$2:"Label",$3:"Var"})],I.delay(function(){return[r.newDocF("none",{$:1,$0:z.none,$1:"x"})];}));}));}));})),[],[]));r.mainDocV().Set(r.mainDocV().Get());},bj.lytDefinition.get_View());};z.none=function(bj){return T.Element("span",[],[]);};z.inputLabel=function(bj,bk,bl,bm){var bn,bo,bp;bn=(bo=(bp=((z.splitName())(bj))(bm),r.tryGetVar(bp[0],bp[1])),bo==null?null:{$:1,$0:T.Element("div",z.getAttrs(bj,bk,true),[T.Element("div",[X.Create("class","input-group")],[T.Element("span",[X.Create("class","input-group-addon")],[z.getText(bj,bl,true)]),T.Input([X.Create("class","form-control")],bo.$0.varVar)])])});return bn==null?z.errDoc((function(bq){return function(br){return bq("Var not found "+M.toSafe(br));};}(a.id))(bm)):bn.$0;};z.inputFile$1427$69=Q.Curried3(function(bj,bk,bl){return r.callFunction(bk,null,bj.actFunction);});z.inputFile$1426$69=Q.Curried3(function(bj,bk,bl){bk.value="";});z.inputFile=function(bj,bk,bl,bm,bn){var bo,bp,bq,br;bo=(bp=(bq=((z.splitName())(bj))(bm),r.tryGetAct(bq[0],bq[1])),bp==null?null:{$:1,$0:(br=bp.$0,T.Element("div",z.getAttrs(bj,bk,true),[T.Element("div",[X.Create("class","input-group")],[T.Element("span",[X.Create("class","input-group-btn")],[T.Element("label",[X.Create("class","btn")],[z.getText(bj,bl,true),T.Element("input",[X.Create("class","form-control"),X.Create("type","file"),W.Style("display","none"),X.HandlerImpl("click",function(bs){return function(){bs.value="";};}),X.HandlerImpl("change",function(bs){return function(){return r.callFunction(bs,null,br.actFunction);};})],[])])]),bn!==""?z.singleDoc(bj,U.ofArray([[bn,false]])):T.get_Empty()])]))});return bo==null?z.errDoc((function(bs){return function(bt){return bs("Action not found "+M.toSafe(bt));};}(a.id))(bm)):bo.$0;};z.getVarEntries=function(bj){function bk(bl){return bl[1];}return I.map(function(bl){return I.last(bk(bl));},I.groupBy(function(bl){return bl.varName;},I.choose(function(bl){return bl.$==0?{$:1,$0:bl.$0}:null;},bj)));};z.getDocEntries=function(bj){function bk(bl){return bl[1];}return I.map(function(bl){return I.last(bk(bl));},I.groupBy(function(bl){return bl.docName;},I.choose(function(bl){return bl.$==2?{$:1,$0:bl.$0}:null;},bj)));};z.getText=function(bj,bk,bl){var bm,bn,bo,bp,bq,br,bs,bt,bu;bm=z.Identifier(bk,bl);return bm!=null&&bm.$==1?(bn=bm.$0,(bo=((z.splitName())(bj))(bn),(bp=bo[0],(bq=bo[1],(br=(bs=r.tryGetViw(bp,bq),bs==null?null:{$:1,$0:T.TextView(bs.$0.viwView)}),br==null?(bt=(bu=r.tryGetVar(bp,bq),bu==null?null:{$:1,$0:T.TextView(bu.$0.varVar.get_View())}),bt==null?T.TextNode(bn):bt.$0):br.$0))))):T.TextNode(bk);};z.createEntries=function(bj,bk){return z.processLines(function(bl){return z.createEntryO(bj,bl);},d.splitByChar("\n",bk));};z.processLines=function(bj,bk){function bl(bm){var bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;bn=I.tryHead(bm);return bn!=null&&bn.$==1?(bo=bn.$0,(bp=z.splitTokens(bo),bp.$==1&&(br=(bs=bp.$0,z.Identifier(bs[0],bs[1])),br!=null&&br.$==1&&(bp.$1.$==1&&((bt=bp.$1.$0,z.Vertical(bt[0],bt[1])).$==2&&(bp.$1.$1.$==0&&(bq=br.$0,true)))))?(bu=z.getExtraLines(function(bB){return G.StartsWith(G.Trim(bB),"|");},bm),bl((B.createLayoutDefinitions(bq,B.extractNodes(bu[0])))[1].concat(bu[1]))):bp.$==0?bl(H.array(bm,{$:1,$0:1},null)):(bv=z.getExtraLines(function(bB){return G.StartsWith(G.Trim(bB),":");},bm),(bw=bv[1],(bx=bv[0],O.length(bx)>0?((function(bB){return function(bC){return bB("l = ;"+M.toSafe(bC)+";");};}(function(bB){N.log(bB);}))(bo),by=z.createLines(I.nth(0,G.SplitChars(bo,[" "],1)),1,[],[],1,bx),bz=by[0],bA=by[1],bl(O.ofSeq(I.delay(function(){return I.append([bo+" "+G.concat(" ",bz)],I.delay(function(){return I.append(bA,I.delay(function(){return bw;}));}));})))):O.ofSeq(I.delay(function(){var bB;return I.append((bB=bj(bo),bB!=null&&bB.$==1?[bB.$0]:[]),I.delay(function(){return bl(bw);}));}))))))):[];}return bl(bk);};z.createLines=function(bj,bk,bl,bm,bn,bo){var bp,bq,br,bs,bt,bu,bv,bw,bx,by;bp=G.replicate(bk,":");bq=":"+bp;br=I.tryHead(bo);return br!=null&&br.$==1?(bs=d.StartsWith(bp,G.Trim(br.$0)),bs!=null&&bs.$==1?(bt=bs.$0,(bu=z.getExtraLines(function(bz){return G.StartsWith(G.Trim(bz),bq);},bo),(bv=(((Q.Curried3(function(bz,bA,bB){return bz(M.toSafe(bA)+"_"+a.String(bB));}))(a.id))(bj))(bn),(bw=z.createLines(bv,bk+1,[],[],1,bu[0]),(bx=bw[1],(by=bw[0],z.createLines(bj,bk,O.ofSeq(I.delay(function(){return I.append(bl,I.delay(function(){return[bv];}));})),O.ofSeq(I.delay(function(){return I.append(bm,I.delay(function(){return I.append([bv+" "+bt+" "+G.concat(" ",by)],I.delay(function(){return bx;}));}));})),bn+1,bu[1]))))))):[bl,bm]):[bl,bm];};z.getExtraLines=function(bj,bk){var bl,bm,bn,bo;bl=(bm=(bn=I.tryFindIndex(function(bp){return G.Trim(bp)!==""&&!bj(bp);},I.skip(1,bk)),bn==null?null:{$:1,$0:1+bn.$0}),(bo=O.length(bk),bm==null?bo:bm.$0));return[H.array(bk,{$:1,$0:1},{$:1,$0:bl-1}),H.array(bk,{$:1,$0:bl},null)];};z.createEntryO=function(bj,bk){var bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;try{bl=z.splitTokens(bk);return bl.$==1&&(bn=(bo=bl.$0,z.Identifier(bo[0],bo[1])),bn!=null&&bn.$==1&&(bl.$1.$==1&&((bp=bl.$1.$0,z.Vertical(bp[0],bp[1])).$==0&&(bl.$1.$1.$==1&&(bq=(br=bl.$1.$1.$0,z.Measures$1(br[0],br[1])),bq!=null&&bq.$==1&&(bm=[bl.$1.$1.$1,bq.$0,bn.$0],true))))))?(bs=bm[2],z.entryDoc(bs,(z.createSplitterM())([bj,bs,true,bm[1],bm[0]]))):bl.$==1&&(bu=(bv=bl.$0,z.Identifier(bv[0],bv[1])),bu!=null&&bu.$==1&&(bl.$1.$==1&&((bw=bl.$1.$0,z.Vertical(bw[0],bw[1])).$==1&&(bl.$1.$1.$==1&&(bx=(by=bl.$1.$1.$0,z.Measures$1(by[0],by[1])),bx!=null&&bx.$==1&&(bt=[bl.$1.$1.$1,bx.$0,bu.$0],true))))))?(bz=bt[2],z.entryDoc(bz,(z.createSplitterM())([bj,bz,false,bt[1],bt[0]]))):bl.$==1&&(bB=(bC=bl.$0,z.Identifier(bC[0],bC[1])),bB!=null&&bB.$==1&&(bl.$1.$==1&&((bD=bl.$1.$0,z.Var(bD[0],bD[1])).$==2&&(bl.$1.$1.$==1&&(bE=(bF=bl.$1.$1.$0,z.Identifier(bF[0],bF[1])),bE!=null&&bE.$==1&&(bl.$1.$1.$1.$==1&&(bl.$1.$1.$1.$1.$==1&&(bl.$1.$1.$1.$1.$1.$==0&&(bA=[bE.$0,bl.$1.$1.$1.$0,bB.$0,bl.$1.$1.$1.$1.$0],true)))))))))?(bG=bA[2],z.entryDoc(bG,(z.createButtonM())([bj,bG,bA[0],bA[1],bA[3]]))):bl.$==1&&(bI=(bJ=bl.$0,z.Identifier(bJ[0],bJ[1])),bI!=null&&bI.$==1&&(bl.$1.$==1&&((bK=bl.$1.$0,z.Var(bK[0],bK[1])).$==3&&(bl.$1.$1.$==1&&(bL=(bM=bl.$1.$1.$0,z.Identifier(bM[0],bM[1])),bL!=null&&bL.$==1&&(bl.$1.$1.$1.$==1&&(bl.$1.$1.$1.$1.$==0&&(bH=[bl.$1.$1.$1.$0,bI.$0,bL.$0],true))))))))?(bN=bH[1],z.entryDoc(bN,(z.createInputM())([bj,bN,bH[2],bH[0]]))):bl.$==1&&(bP=(bQ=bl.$0,z.Identifier(bQ[0],bQ[1])),bP!=null&&bP.$==1&&(bl.$1.$==1&&((bR=bl.$1.$0,z.Var(bR[0],bR[1])).$==4&&(bl.$1.$1.$==1&&(bS=(bT=bl.$1.$1.$0,z.Identifier(bT[0],bT[1])),bS!=null&&bS.$==1&&(bl.$1.$1.$1.$==1&&(bl.$1.$1.$1.$1.$==0&&(bO=[bl.$1.$1.$1.$0,bP.$0,bS.$0],true))))))))?(bU=bO[1],z.entryDoc(bU,(z.createTextAreaM())([bj,bU,bO[2],bO[0]]))):bl.$==1&&(bW=(bX=bl.$0,z.Identifier(bX[0],bX[1])),bW!=null&&bW.$==1&&(bl.$1.$==1&&((bY=bl.$1.$0,z.Var(bY[0],bY[1])).$==0&&(bl.$1.$1.$==1&&(bl.$1.$1.$1.$==0&&(bV=[bW.$0,bl.$1.$1.$0],true))))))?(bZ=bV[0],z.entryVar(bZ,(z.createVarM())([bj,bZ,bV[1][0]]))):bl.$==1&&(b1=(b2=bl.$0,z.Identifier(b2[0],b2[1])),b1!=null&&b1.$==1&&(bl.$1.$==1&&((b3=bl.$1.$0,z.Var(b3[0],b3[1])).$==1&&(bl.$1.$1.$==1&&(b0=[bl.$1.$1.$0,b1.$0,bl.$1.$1.$1],true)))))?(b4=b0[1],z.entryDoc(b4,(z.createDocM())([bj,b4,b0[0][0],b0[2]]))):bl.$==1&&(b6=(b7=bl.$0,z.Identifier(b7[0],b7[1])),b6!=null&&b6.$==1&&(bl.$1.$==1&&((b8=bl.$1.$0,z.Vertical(b8[0],b8[1])).$==4&&(bl.$1.$1.$==1&&(bl.$1.$1.$1.$==1&&(b5=[bl.$1.$1.$1.$0,bl.$1.$1.$1.$1,b6.$0,bl.$1.$1.$0],true))))))?(b9=b5[2],z.entryDoc(b9,(z.createTemplateM())([bj,b9,b5[3],b5[0],b5[1]]))):bl.$==1&&(b$=(ca=bl.$0,z.Identifier(ca[0],ca[1])),b$!=null&&b$.$==1&&(bl.$1.$==1&&((cb=bl.$1.$0,z.Concat(cb[0],cb[1])).$==0&&(b_=[bl.$1.$1,b$.$0],true))))?(cc=b_[1],z.entryDoc(cc,(z.createConcatM())([bj,cc,b_[0]]))):bl.$==1&&(ce=(cf=bl.$0,z.Identifier(cf[0],cf[1])),ce!=null&&ce.$==1&&(bl.$1.$==1&&((cg=bl.$1.$0,z.Vertical(cg[0],cg[1])).$==3&&(bl.$1.$1.$==1&&(bl.$1.$1.$1.$==1&&(bl.$1.$1.$1.$1.$==1&&(cd=[bl.$1.$1.$1.$1.$0,bl.$1.$1.$0,bl.$1.$1.$1.$1.$1,ce.$0,bl.$1.$1.$1.$0],true)))))))?null:bl.$==1&&(ci=(cj=bl.$0,z.Identifier(cj[0],cj[1])),ci!=null&&ci.$==1&&(bl.$1.$==1&&(ck=(cl=bl.$1.$0,z.Vertical(cl[0],cl[1])),ck.$==5&&(bl.$1.$1.$==1&&(ch=[bl.$1.$1.$0,bl.$1.$1.$1,ck.$0,ci.$0],true)))))?(cm=ch[3],z.entryDoc(cm,(z.createElementM())([bj,cm,ch[2],ch[0],ch[1]]))):null;}catch(cn){((function(co){return function(cp){return co(M.prettyPrint(cp));};}(function(co){N.log(co);}))(cn));return null;}};z.entryVar=function(bj,bk){return{$:1,$0:{$:0,$0:r.newVar(bj,bk)}};};z.entryDoc=function(bj,bk){return{$:1,$0:{$:2,$0:r.newDoc(bj,bd.Create(function(){return bk;}))}};};z.createVarM=function(){C.$cctor();return C.createVarM;};z.createConcatM=function(){C.$cctor();return C.createConcatM;};z.createTemplateM=function(){C.$cctor();return C.createTemplateM;};z.createDocM=function(){C.$cctor();return C.createDocM;};z.createElementM=function(){C.$cctor();return C.createElementM;};z.createTextAreaM=function(){C.$cctor();return C.createTextAreaM;};z.createInputM=function(){C.$cctor();return C.createInputM;};z.createButtonM=function(){C.$cctor();return C.createButtonM;};z.createSplitterM=function(){C.$cctor();return C.createSplitterM;};z.createVar=function(bj,bk,bl){return Y.Create$1(bl);};z.createConcat=function(bj,bk,bl){return z.turnToView(function(){return T.Concat(z.getDocs(bj,bl));});};z.createTemplate=function(bj,bk,bl,bm,bn){return z.turnToView(function(){var bo,bp,bq,br,bs,bt;bq=z.getAttrs(bj,bm[0],bm[1]);_2.LoadLocalTemplates("local");function bu(bw,bx){var by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ;by=z.Identifier(bx[0],bx[1]);return by!=null&&by.$==1?(bz=by.$0,bA=bw[0],bB=(bC=(bD=(bE=((z.splitName())(bj))(bz),r.tryGetDoc(bE[0],bE[1])),bD==null?null:{$:1,$0:{$:0,$0:bA,$1:(z.getDocF(U.T.Empty,bD.$0))[0]}}),bC==null?(bF=(bG=((z.splitName())(bj))(bz),r.tryGetVar(bG[0],bG[1])),bF==null?null:{$:1,$0:{$:8,$0:bA,$1:bF.$0.varVar}}):bC),bB==null?{$:0,$0:bA,$1:z.errDoc((function(bK){return function(bL){return bK("Missing element: "+M.toSafe(bL));};}(a.id))(bz))}:bB.$0):(bH=bw[0],bI=z.getTextData(bj,bx[0]),bI.$==1?{$:2,$0:bH,$1:bI.$0}:bI.$==2?(bJ=bI.$0,{$:4,$0:bH,$1:function(bK){return function(bL){return r.callFunction(bK,bL,bJ.actFunction);};}}):{$:1,$0:bH,$1:bI.$0});}function bv(bw,bx){return bw%2===0;}try{bp={$:1,$0:(br=(bs=I.map(function(bw){return bu(bw[0],bw[1]);},I.map(function(bw){return bw[1];},I.filter(function(bw){return bv(bw[0],bw[1]);},I.indexed(I.pairwise(bn))))),(I.isEmpty(bq)?a.id:(bt=[{$:3,$0:"attrs",$1:X.Concat(bq)}],function(bw){return I.append(bt,bw);}))(bs)),_2.NamedTemplate("local",{$:1,$0:bl[0]},br))};}catch(bw){bp=null;}return bp==null?z.errDoc((function(bx){return function(by){return bx("Missing template: "+M.toSafe(by));};}(a.id))(bl[0])):bp.$0;});};z.createDoc=function(bj,bk,bl,bm){return z.turnToView(function(){var bn,bo,bp;bn=(bo=(bp=((z.splitName())(bj))(bl),r.tryGetDoc(bp[0],bp[1])),bo==null?null:{$:1,$0:z.getDocFinal(bm,bo.$0)});return bn==null?z.errDoc((function(bq){return function(br){return bq("Missing doc: "+M.toSafe(br));};}(a.id))(bl)):bn.$0;});};z.createTextArea=function(bj,bk,bl,bm){return z.turnToView(function(){var bn,bo,bp,bq,br;bn=(bo=(bp=((z.splitName())(bj))(bl),r.tryGetVoV(bp[0],bp[1])),(bq=(br=z.getAttrs(bj,bm[0],bm[1]),function(bs){return T.InputArea(br,bs);}),bo==null?null:{$:1,$0:bq(bo.$0)}));return bn==null?z.errDoc((function(bs){return function(bt){return bs("Missing var: "+M.toSafe(bt));};}(a.id))(bl)):bn.$0;});};z.createInput=function(bj,bk,bl,bm){return z.turnToView(function(){var bn,bo,bp,bq,br;bn=(bo=(bp=((z.splitName())(bj))(bl),r.tryGetVoV(bp[0],bp[1])),(bq=(br=z.getAttrs(bj,bm[0],bm[1]),function(bs){return T.Input(br,bs);}),bo==null?null:{$:1,$0:bq(bo.$0)}));return bn==null?z.errDoc((function(bs){return function(bt){return bs("Missing var: "+M.toSafe(bt));};}(a.id))(bl)):bn.$0;});};z.createButton=function(bj,bk,bl,bm,bn){return z.turnToView(function(){var bo,bp,bq,br,bs;function bt(bu,bv){return r.callFunction(null,null,bu.actFunction);}bo=(bp=(bq=(br=((z.splitName())(bj))(bl),r.tryGetAct(br[0],br[1])),bq==null?null:{$:1,$0:(bs=bq.$0,function(bu){return bt(bs,bu);})}),bp==null?a.ignore:bp.$0);return T.Button(bn[0],z.getAttrs(bj,bm[0],bm[1]),bo);});};z.createElement=function(bj,bk,bl,bm,bn){var bo;bo=[z.turnToView(function(){return T.Concat(z.getDocs(bj,bn));})];return T.Element(bl,z.getAttrs(bj,bm[0],bm[1]),bo);};z.createSplitter=function(bj,bk,bl,bm,bn){var bo;bo=z.pairOfDocs(bj,bn);return bm.$==1?z.variableSplitter(bl,bm.$0,bm.$1,bm.$2,bo[0],bo[1]):z.fixedSplitter(bl,bm.$0,bm.$1,bo[0],bo[1]);};z.singleDoc=function(bj,bk){return T.EmbedView(V.Map(function(bl){var bm;return bl.$==1&&(bl.$1.$==0&&(bm=bl.$0,true))?bm:z.errDoc((function(bn){return function(bo){return bn("expected exactly 1 element "+M.printList(function(bp){return"("+M.prettyPrint(bp[0])+", "+M.prettyPrint(bp[1])+")";},bo));};}(a.id))(bk));},V.Map(function(){return z.getDocs(bj,bk);},r.mainDocV().get_View())));};z.pairOfDocs=function(bj,bk){var bl;bl=V.Map(function(bm){var bn;return bm.$==1&&(bm.$1.$==1&&(bm.$1.$1.$==0&&(bn=[bm.$0,bm.$1.$0],true)))?[bn[0],bn[1]]:[z.errDoc((function(bo){return function(bp){return bo("splitter expects exactly 2 elements "+M.printList(function(bq){return"("+M.prettyPrint(bq[0])+", "+M.prettyPrint(bq[1])+")";},bp));};}(a.id))(bk)),z.errDoc("part 2")];},V.Map(function(){return z.getDocs(bj,bk);},r.mainDocV().get_View()));return[T.EmbedView(V.Map(function(bm){return bm[0];},bl)),T.EmbedView(V.Map(function(bm){return bm[1];},bl))];};z.getDocs=function(bj,bk){var bl;return bk.$==0?U.T.Empty:(bl=z.getOneDoc(bj,bk),new U.T({$:1,$0:bl[0],$1:z.getDocs(bj,bl[1])}));};z.getOneDoc=function(bj,bk){var bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz;return bk.$==1&&(bm=(bn=bk.$0,z.Identifier(bn[0],bn[1])),bm!=null&&bm.$==1&&(bl=[bm.$0,bk.$1],true))?(bo=bl[0],(bp=bl[1],(bq=((z.splitName())(bj))(bo),(br=bq[0],(bs=bq[1],(bt=(bu=r.tryGetDoc(br,bs),bu==null?null:{$:1,$0:z.getDocF(bp,bu.$0)}),bt==null?(bv=(bw=r.tryGetWoW(br,bs),bw==null?null:{$:1,$0:[T.TextView(bw.$0),bp]}),bv==null?[z.errDoc((bx=(function(bA){return function(bB){return bA("Missing doc: "+M.toSafe(bB));};}(a.id))(bo),(c.print(bx),bx))),bp]:bv.$0):bt.$0)))))):bk.$==0?[T.get_Empty(),U.T.Empty]:(by=bk.$1,(bz=z.getTextData(bj,bk.$0[0]),bz.$==1?[T.TextView(bz.$0),by]:bz.$==2?[z.errDoc((function(bA){return function(bB){return bA("Unexpected action: "+M.toSafe(bB));};}(a.id))(bz.$0.actName)),by]:[T.TextNode(bz.$0),by]));};z.turnToView=function(bj){return T.EmbedView(V.Map(bj,r.mainDocV().get_View()));};z.getDocFinal=function(bj,bk){var bl;bl=z.getDocF(bj,bk);return bl[1].$==0?bl[0]:z.errDoc((((Q.Curried3(function(bm,bn,bo){return bm("Too many parameters "+E.p(bn)+" "+M.printList(function(bp){return"("+M.prettyPrint(bp[0])+", "+M.prettyPrint(bp[1])+")";},bo));}))(a.id))(bk))(bj));};z.getDocF=function(bj,bk){var bl,bm;bm=bk.docDoc;switch(bm.$==1?bj.$==1?(bl=[bm.$0,bj.$0[0],bj.$1],1):6:bm.$==2?bj.$==1?bj.$1.$==1?(bl=[bm.$0,bj.$0[0],bj.$1.$0[0],bj.$1.$1],2):6:6:bm.$==3?bj.$==1?bj.$1.$==1?bj.$1.$1.$==1?(bl=[bm.$0,bj.$0[0],bj.$1.$0[0],bj.$1.$1.$0[0],bj.$1.$1.$1],3):6:6:6:bm.$==4?bj.$==1?bj.$1.$==1?bj.$1.$1.$==1?bj.$1.$1.$1.$==1?(bl=[bm.$0,bj.$0[0],bj.$1.$0[0],bj.$1.$1.$0[0],bj.$1.$1.$1.$0[0],bj.$1.$1.$1.$1],4):6:6:6:6:bm.$==5?bj.$==1?bj.$1.$==1?bj.$1.$1.$==1?bj.$1.$1.$1.$==1?bj.$1.$1.$1.$1.$==1?(bl=[bm.$0,bj.$0[0],bj.$1.$0[0],bj.$1.$1.$0[0],bj.$1.$1.$1.$0[0],bj.$1.$1.$1.$1.$0[0],bj.$1.$1.$1.$1.$1],5):6:6:6:6:6:(bl=[bm.$0,bj],0)){case 0:return[bl[0].f(),bl[1]];case 1:return[bl[0](bl[1]),bl[2]];case 2:return[(bl[0](bl[1]))(bl[2]),bl[3]];case 3:return[((bl[0](bl[1]))(bl[2]))(bl[3]),bl[4]];case 4:return[(((bl[0](bl[1]))(bl[2]))(bl[3]))(bl[4]),bl[5]];case 5:return[((((bl[0](bl[1]))(bl[2]))(bl[3]))(bl[4]))(bl[5]),bl[6]];case 6:return[T.Element("div",[],[T.TextNode((((Q.Curried3(function(bn,bo,bp){return bn("Parameters do not coincide with definition "+E.p(bo)+" - "+M.printList(function(bq){return"("+M.prettyPrint(bq[0])+", "+M.prettyPrint(bq[1])+")";},bp));}))(a.id))(bk))(bj))]),U.T.Empty];}};z.getAttrs=function(bj,bk,bl){var bm;bm=[bk,bl];return U.ofSeq(I.delay(function(){return I.append(I.choose(function(bn){var bo,bp,bq,br,bs,bt;return!J.Equals(bn,null)&&bn.length===2&&(bp=O.get(bn,1),G.Trim(O.get(bn,0))!==""&&G.Trim(bp)!=="")?(bq=O.get(bn,1),(br=O.get(bn,0),{$:1,$0:(bs=z.getTextData(bj,G.Trim(bq)),bs.$==1?W.Dynamic(G.Trim(br),bs.$0):bs.$==2?(bt=bs.$0,W.Handler(G.Trim(br),function(bu){return function(bv){return r.callFunction(bu,bv,bt.actFunction);};})):X.Create(G.Trim(br),G.Trim(bs.$0)))})):null;},I.map(function(bn){return d.splitByChar("=",bn);},d.splitByChar(";",bm[0]))),I.delay(function(){return I.choose(function(bn){var bo,bp,bq,br,bs;return!J.Equals(bn,null)&&bn.length===2&&(bp=O.get(bn,1),G.Trim(O.get(bn,0))!==""&&G.Trim(bp)!=="")?(bq=O.get(bn,1),(br=O.get(bn,0),{$:1,$0:(bs=z.getTextData(bj,G.Trim(bq)),bs.$==1?W.DynamicStyle(G.Trim(br),bs.$0):bs.$==2?W.Style(G.Trim(br),(function(bt){return function(bu){return bt("${"+M.toSafe(bu)+"}");};}(a.id))(bs.$0.actName)):W.Style(G.Trim(br),G.Trim(bs.$0)))})):null;},I.map(function(bn){return d.splitByChar(":",bn);},d.splitByChar(";",bm[0])));}));}));};z.getTextData=function(bj,bk){var bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx;bl=(bm=d.delimitedO("@{","}",bk),bm==null?null:{$:1,$0:(bn=bm.$0,(bo=bn[0],(bp=bn[1],(bq=bn[2],(br=((z.splitName())(bj))(bp),(bs=br[0],(bt=br[1],(bu=(bv=r.tryGetWoW(bs,bt),bv==null?null:{$:1,$0:function(by){var bz,bA;bA=z.getTextData(bj,bq);switch(bo===""?bA.$==1?(bz=bA.$0,2):bA.$==2?(bz=bA.$0,3):bA.$0===""?0:(bz=bA.$0,1):bA.$==1?(bz=bA.$0,2):bA.$==2?(bz=bA.$0,3):(bz=bA.$0,1)){case 0:return{$:1,$0:by};case 1:return{$:1,$0:V.Map(function(bB){return bo+bB+bz;},by)};case 2:return{$:1,$0:V.Map2(function(bB,bC){return bo+bB+bC;},by,bz)};case 3:return{$:2,$0:bz};}}(bv.$0)}),bu==null?(bw=(bx=r.tryGetAct(bs,bt),bx==null?null:{$:1,$0:{$:2,$0:bx.$0}}),bw==null?{$:0,$0:((((Q.Curried(function(by,bz,bA,bB){return by(M.toSafe(bz)+" ${Missing "+M.toSafe(bA)+"}"+M.toSafe(bB));},4))(a.id))(bo))(bp))(bq)}:bw.$0):bu.$0))))))))});return bl==null?{$:0,$0:bk}:bl.$0;};z.splitName=function(){C.$cctor();return C.splitName;};z.splitTokens=function(bj){return U.ofSeq(I.collect(a.id,I.mapi(function(bk,bl){var bm;return bk%2===1?[[bl,true]]:(bm=G.Trim(bl),bm===""?[]:O.map(function(bn){return[bn,false];},G.SplitChars(bm,[" "],1)));},d.splitByChar("\"",bj))));};z.errDoc=function(bj){return T.Element("div",[],[T.TextNode(bj)]);};z.variableSplitter=function(bj,bk,bl,bm,bn,bo){return T.Element("wcomp-splitter",U.ofSeq(I.delay(function(){return I.append(bj?[X.Create("vertical","")]:[],I.delay(function(){return I.append([X.Create("min",a.String(bk))],I.delay(function(){return I.append([X.Create("value",a.String(bl))],I.delay(function(){return[X.Create("max",a.String(bm))];}));}));}));})),U.ofArray([bn,bo]));};z.fixedSplitter=function(bj,bk,bl,bm,bn){var bo,bp,bq,br,bs,bt,bu;bo=(((bl?Q.Curried3(function(bv,bw,bx){return bv(bw.toFixed(6)+"px calc(100% - "+bx.toFixed(6)+"px)");}):Q.Curried3(function(bv,bw,bx){return bv("calc(100% - "+bw.toFixed(6)+"px) "+bx.toFixed(6)+"px");}))(a.id))(bk))(bk);return bj?(bp=_9.Make().WithHole({$:1,$0:"partsizes",$1:bo}).WithHole({$:0,$0:"first",$1:bm}).WithHole({$:0,$0:"second",$1:bn}),(bq=_.CompleteHoles(bp.k,bp.h,[]),(br=new $.New(bq[1],D.fixedsplitterver(bq[0])),(bp.i=br,br)))).get_Doc():(bs=_9.Make().WithHole({$:1,$0:"partsizes",$1:bo}).WithHole({$:0,$0:"first",$1:bm}).WithHole({$:0,$0:"second",$1:bn}),(bt=_.CompleteHoles(bs.k,bs.h,[]),(bu=new $.New(bt[1],D.fixedsplitterhor(bt[0])),(bs.i=bu,bu)))).get_Doc();};z.Measures$1=function(bj,bk){var bl,bm,bn,bo,bp,bq,br,bs,bt,bu;bl=[bj,bk];return bl[1]?null:(bm=d.splitByChar("-",bl[0]),!J.Equals(bm,null)&&bm.length===1&&(bo=(e.Double())(O.get(bm,0)),bo!=null&&bo.$==1&&(bn=bo.$0,true))?{$:1,$0:new A({$:0,$0:bn,$1:true})}:!J.Equals(bm,null)&&bm.length===2&&(O.get(bm,0)===""&&(bq=(e.Double())(O.get(bm,1)),bq!=null&&bq.$==1&&(bp=bq.$0,true)))?{$:1,$0:new A({$:0,$0:bp,$1:false})}:!J.Equals(bm,null)&&bm.length===3&&(bs=(e.Double())(O.get(bm,0)),bs!=null&&bs.$==1&&(bt=(e.Double())(O.get(bm,1)),bt!=null&&bt.$==1&&(bu=(e.Double())(O.get(bm,2)),bu!=null&&bu.$==1&&(br=[bu.$0,bs.$0,bt.$0],true))))?{$:1,$0:new A({$:1,$0:br[1],$1:br[2],$2:br[0]})}:null);};z.Concat=function(bj,bk){var bl;return(bk?false:bj==="concat")?{$:0,$0:null}:{$:1,$0:null};};z.Var=function(bj,bk){var bl,bm,bn,bo,bp,bq;return(bk?false:bj==="Var")?{$:0,$0:null}:(bk?false:bj==="Doc")?{$:1,$0:null}:(bk?false:bj==="button")?{$:2,$0:null}:(bk?false:bj==="input")?{$:3,$0:null}:(bk?false:bj==="textarea")?{$:4,$0:null}:(bk?false:bj==="select")?{$:5,$0:null}:{$:6,$0:null};};z.Vertical=function(bj,bk){var bl,bm,bn,bo,bp,bq;return(bk?false:bj==="vertical")?{$:0,$0:null}:(bk?false:bj==="horizontal")?{$:1,$0:null}:(bk?false:bj==="layout")?{$:2,$0:null}:(bk?false:bj==="grid")?{$:3,$0:null}:(bk?false:bj==="template")?{$:4,$0:null}:(bq=z.Identifier(bj,bk),bq!=null&&bq.$==1?{$:5,$0:bq.$0}:{$:6,$0:null});};z.Identifier=function(bj,bk){var bl,bm,bn;return(bm=f.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",bj),bm!=null&&bm.$==1&&((bn=bm.$0,!J.Equals(bn,null)&&bn.length===1)&&(bk?false:(bl=O.get(bm.$0,0),true))))?{$:1,$0:bl}:null;};f.rexGuid=function(){C.$cctor();return C.rexGuid;};f.REGEX$1=function(bj,bk,bl){var bm;return bl===null?null:(bm=(new a.String(bl)).match(new a.RegExp(bj,bk)),J.Equals(bm,null)?null:!J.Equals(bm,null)&&bm.length===0?null:{$:1,$0:bm});};C.$cctor=function(){var bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO;C.$cctor=a.ignore;function bP(ck){return G.concat("\n",ck);}function bQ(ck){return d.splitByChar("\n",ck);}function bR(ck){var cl,cm;return H.array(ck,{$:1,$0:0},{$:1,$0:(cl=0,(cm=O.length(ck)-2,J.Compare(cl,cm)===1?cl:cm))});}function bS(ck){return G.concat("\n",ck);}function bT(ck){return ck+"T00:00:00";}function bU(ck){var cl;function cm(co){return r.plugIns().TryFindByKey(co);}function cn(co){var cp;cp=r.defaultPlugIn();return co==null?cp:co.$0;}cl=function(co){return co==null?null:cm(co.$0);};return function(co){return cn(cl(co));};}function bV(ck){var cl;cl=null;return bn.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function bW(ck,cl){bn.set_Item(ck,cl);return cl;}function bX(ck,cl){var cm;cm=bV(ck);return cm==null?bW(ck,cl(ck)):cm.$0;}function bY(ck){var cl;cl=null;return bq.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function bZ(ck,cl){bq.set_Item(ck,cl);return cl;}function b0(ck,cl){var cm;cm=bY(ck);return cm==null?bZ(ck,cl(ck)):cm.$0;}function b1(ck){var cl;cl=null;return bt.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function b2(ck,cl){bt.set_Item(ck,cl);return cl;}function b3(ck,cl){var cm;cm=b1(ck);return cm==null?b2(ck,cl(ck)):cm.$0;}function b4(ck){var cl;cl=null;return bw.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function b5(ck,cl){bw.set_Item(ck,cl);return cl;}function b6(ck,cl){var cm;cm=b4(ck);return cm==null?b5(ck,cl(ck)):cm.$0;}function b7(ck){var cl;cl=null;return bz.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function b8(ck,cl){bz.set_Item(ck,cl);return cl;}function b9(ck,cl){var cm;cm=b7(ck);return cm==null?b8(ck,cl(ck)):cm.$0;}function b_(ck){var cl;cl=null;return bC.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function b$(ck,cl){bC.set_Item(ck,cl);return cl;}function ca(ck,cl){var cm;cm=b_(ck);return cm==null?b$(ck,cl(ck)):cm.$0;}function cb(ck){var cl;cl=null;return bF.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function cc(ck,cl){bF.set_Item(ck,cl);return cl;}function cd(ck,cl){var cm;cm=cb(ck);return cm==null?cc(ck,cl(ck)):cm.$0;}function ce(ck){var cl;cl=null;return bI.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function cf(ck,cl){bI.set_Item(ck,cl);return cl;}function cg(ck,cl){var cm;cm=ce(ck);return cm==null?cf(ck,cl(ck)):cm.$0;}function ch(ck){var cl;cl=null;return bL.TryGetValue(ck,{get:function(){return cl;},set:function(cm){cl=cm;}})?{$:1,$0:cl}:null;}function ci(ck,cl){bL.set_Item(ck,cl);return cl;}function cj(ck,cl){var cm;cm=ch(ck);return cm==null?ci(ck,cl(ck)):cm.$0;}C.unindentStr=function(ck){return bP(d.unindent(ck));};C.skipLastLine=(bj=function(ck){return bR(bQ(ck));},function(ck){return bS(bj(ck));});C.parseDateO2=(bk=e.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=be.TryParse(ck),cm!=null&&cm.$==1&&(cl=cm.$0,true)),cl];}),function(ck){return bk(bT(ck));});C.parseDateO=e.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=be.TryParse(ck),cm!=null&&cm.$==1&&(cl=cm.$0,true)),cl];});C.parseIntO=e.tryParseWith(function(ck){var cl;cl=0;return[bf.TryParseInt32(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});C.parseInt64O=e.tryParseWith(function(ck){var cl;cl=0;return[bf.TryParseInt64(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});C.parseSingleO=e.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=a.Number(ck),a.isNaN(cm)?false:(cl=cm,true)),cl];});C.parseDoubleO=e.tryParseWith(function(ck){var cl,cm;cl=0;return[(cm=a.Number(ck),a.isNaN(cm)?false:(cl=cm,true)),cl];});C.parseGuidO=e.tryParseWith(function(ck){var cl;cl=null;return[bc.TryParse(ck,{get:function(){return cl;},set:function(cm){cl=cm;}}),cl];});C["|Date|_|"]=e.parseDateO();C["|Int|_|"]=e.parseIntO();C["|Int64|_|"]=e.parseInt64O();C["|Single|_|"]=e.parseSingleO();C["|Double|_|"]=e.parseDoubleO();C["|Guid|_|"]=e.parseGuidO();C.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";C.observers=U.T.Empty;C.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";C.init=bd.Create(function(){var ck;ck=new o.New();m.defineWebComponent("wcomp-tabstrip",o.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});C.layoutHorizontal=Q.Curried(function(ck,cl,cm,cn,co){return T.get_Empty();},5);C.layoutVertical=Q.Curried(function(ck,cl,cm,cn,co){return T.get_Empty();},5);C.plugIns=new bg.New$1(function(ck){return ck.plgName;});C.mainDocV=Y.Create$1("AppFramework.AppFwkClient");C.TemplateFileName="..\\website\\AppFramework.html";C.defaultPlugIn=x.New("",[],[],[],[],[]);C.selectionPlugInO=Y.Create$1({$:1,$0:"AppFramework"});C.currentPlugInW=(bl=r.selectionPlugInO().get_View(),V.Map2(function(ck,cl){return(bU(ck))(cl);},r.plugIns().v,bl));C.currentPlugInV=new _5.New(r.currentPlugInW(),function(ck){r.plugIns().Append(ck);});C.AppFwkClient=bd.Create(function(){var ck,cl,cm,cn,co,cp,cq,cr,cs;return(ck=(cl=r.renderQueries(),(cm=r.renderActions(),(cn=r.renderDocs(),(co=r.renderViews(),(cp=r.renderVars(),(cq=r.renderPlugIns(),_9.Make().WithHole({$:0,$0:"plugins",$1:cq})).WithHole({$:2,$0:"pluginname",$1:V.Map(function(ct){return ct.plgName;},r.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:cp})).WithHole({$:0,$0:"views",$1:co})).WithHole({$:0,$0:"docs",$1:cn})).WithHole({$:0,$0:"actions",$1:cm})).WithHole({$:0,$0:"queries",$1:cl})),(cr=_.CompleteHoles(ck.k,ck.h,[]),(cs=new $.New(cr[1],D.appfwkclient(cr[0])),(ck.i=cs,cs)))).get_Doc();});C.actHello=r.newAct("Hello",function(){self.alert("Hello!");});C.qryDocs=r.newQry("getDocNames",function(){return O.ofSeq(I.collect(function(ck){return I.map(function(cl){return ck.plgName+"."+cl.docName;},ck.plgDocs);},(r.plugIns())["var"].Get()));});r.plugIns().Append(x.New("AppFramework",[r.newVar("mainDocV",r.mainDocV())],[],[r.newDoc("AppFwkClient",r.AppFwkClient())],[r.actHello()],[r.qryDocs()]));C.getMainDoc=bd.Create(function(){p.init(Q.Curried(r.horizontal,5),Q.Curried(r.vertical,5));n.init().f();return r.mainDoc();});C.splitName=r.splitName;C.createSplitterM=(bm=(bn=new bi.New$5(),[[bV,function(ck){return function(cl){return bX(ck,cl);};}],function(){bn.Clear();}]),(bo=bm[0][1],[function(ck){return(bo(ck))(function(cl){return z.createSplitter(cl[0],cl[1],cl[2],cl[3],cl[4]);});},bm[1]]))[0];C.createButtonM=(bp=(bq=new bi.New$5(),[[bY,function(ck){return function(cl){return b0(ck,cl);};}],function(){bq.Clear();}]),(br=bp[0][1],[function(ck){return(br(ck))(function(cl){return z.createButton(cl[0],cl[1],cl[2],cl[3],cl[4]);});},bp[1]]))[0];C.createInputM=(bs=(bt=new bi.New$5(),[[b1,function(ck){return function(cl){return b3(ck,cl);};}],function(){bt.Clear();}]),(bu=bs[0][1],[function(ck){return(bu(ck))(function(cl){return z.createInput(cl[0],cl[1],cl[2],cl[3]);});},bs[1]]))[0];C.createTextAreaM=(bv=(bw=new bi.New$5(),[[b4,function(ck){return function(cl){return b6(ck,cl);};}],function(){bw.Clear();}]),(bx=bv[0][1],[function(ck){return(bx(ck))(function(cl){return z.createTextArea(cl[0],cl[1],cl[2],cl[3]);});},bv[1]]))[0];C.createElementM=(by=(bz=new bi.New$5(),[[b7,function(ck){return function(cl){return b9(ck,cl);};}],function(){bz.Clear();}]),(bA=by[0][1],[function(ck){return(bA(ck))(function(cl){return z.createElement(cl[0],cl[1],cl[2],cl[3],cl[4]);});},by[1]]))[0];C.createDocM=(bB=(bC=new bi.New$5(),[[b_,function(ck){return function(cl){return ca(ck,cl);};}],function(){bC.Clear();}]),(bD=bB[0][1],[function(ck){return(bD(ck))(function(cl){return z.createDoc(cl[0],cl[1],cl[2],cl[3]);});},bB[1]]))[0];C.createTemplateM=(bE=(bF=new bi.New$5(),[[cb,function(ck){return function(cl){return cd(ck,cl);};}],function(){bF.Clear();}]),(bG=bE[0][1],[function(ck){return(bG(ck))(function(cl){return z.createTemplate(cl[0],cl[1],cl[2],cl[3],cl[4]);});},bE[1]]))[0];C.createConcatM=(bH=(bI=new bi.New$5(),[[ce,function(ck){return function(cl){return cg(ck,cl);};}],function(){bI.Clear();}]),(bJ=bH[0][1],[function(ck){return(bJ(ck))(function(cl){return z.createConcat(cl[0],cl[1],cl[2]);});},bH[1]]))[0];C.createVarM=(bK=(bL=new bi.New$5(),[[ch,function(ck){return function(cl){return cj(ck,cl);};}],function(){bL.Clear();}]),(bM=bK[0][1],[function(ck){return(bM(ck))(function(cl){return z.createVar(cl[0],cl[1],cl[2]);});},bK[1]]))[0];bN=r.tryGetPlugIn("AppFramework");bN==null?void 0:(bO=bN.$0,r.addPlugIn(x.New(bO.plgName,bO.plgVars,bO.plgViews,bO.plgDocs,bO.plgActions.concat([r.newActF("AddLayout",{$:2,$0:function(ck){return function(cl){return z.addNewLayout(ck,cl);};},$1:"[Name]",$2:"[Layout]"})]),bO.plgQueries)));};D.wcompsplitterver=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},bj):void 0;};D.wcompsplitterhor=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},bj):void 0;};D.appframework=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"appframework"},bj):void 0;};E.p=function(bj){return"{"+("docName = "+M.prettyPrint(bj.docName))+"; "+("docDoc = "+F.p(bj.docDoc))+"}";};F.p=function(bj){return bj.$==5?"FunDoc5 (<fun>, "+M.prettyPrint(bj.$1)+", "+M.prettyPrint(bj.$2)+", "+M.prettyPrint(bj.$3)+", "+M.prettyPrint(bj.$4)+", "+M.prettyPrint(bj.$5)+")":bj.$==4?"FunDoc4 (<fun>, "+M.prettyPrint(bj.$1)+", "+M.prettyPrint(bj.$2)+", "+M.prettyPrint(bj.$3)+", "+M.prettyPrint(bj.$4)+")":bj.$==3?"FunDoc3 (<fun>, "+M.prettyPrint(bj.$1)+", "+M.prettyPrint(bj.$2)+", "+M.prettyPrint(bj.$3)+")":bj.$==2?"FunDoc2 (<fun>, "+M.prettyPrint(bj.$1)+", "+M.prettyPrint(bj.$2)+")":bj.$==1?"FunDoc1 (<fun>, "+M.prettyPrint(bj.$1)+")":"LazyDoc "+M.prettyPrint(bj.$0);};D.tile=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"tile"},bj):void 0;};D.actiondisabled=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},bj):void 0;};D.action=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"action"},bj):void 0;};D.namevalue=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"namevalue"},bj):void 0;};D.namevalueinput=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},bj):void 0;};D.fixedsplitterhor=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},bj):void 0;};D.fixedsplitterver=function(bj){_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},bj):void 0;};D.appfwkclient=function(bj){D.fixedsplitterhor();D.fixedsplitterver();_2.LoadLocalTemplates("appframework");return bj?_2.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},bj):void 0;};}());

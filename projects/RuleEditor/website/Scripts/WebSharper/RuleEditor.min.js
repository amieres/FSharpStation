(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.ResultMessage=c.ResultMessage||{};e=c.ResultMessageHelpers=c.ResultMessageHelpers||{};f=c.Monads=c.Monads||{};g=f.Seq=f.Seq||{};h=f.Option=f.Option||{};i=f.Async=f.Async||{};j=a.WebSharper;k=j&&j.Obj;l=f.Result=f.Result||{};m=l.Builder=l.Builder||{};n=l.Operators=l.Operators||{};o=f.FusionM=f.FusionM||{};p=o.Operators=o.Operators||{};q=o.Builder=o.Builder||{};r=q.Builder=q.Builder||{};s=f.Eff=f.Eff||{};t=s.Eff=s.Eff||{};u=s.Done=s.Done||{};v=t.LambdaT=t.LambdaT||{};w=s.Operators=s.Operators||{};x=s.EffBuilder=s.EffBuilder||{};y=s.Reader=s.Reader||{};z=y.Ask=y.Ask||{};A=s.Rsl=s.Rsl||{};B=A.Fail=A.Fail||{};C=f.FusionAsyncM=f.FusionAsyncM||{};D=C.Operators=C.Operators||{};E=C.Builder=C.Builder||{};F=E.Builder=E.Builder||{};G=c.Array=c.Array||{};H=c.ParseO=c.ParseO||{};I=c.MailboxProcessorExt=c.MailboxProcessorExt||{};J=c.Mailbox=c.Mailbox||{};K=J.StateFull=J.StateFull||{};L=c.Hole=c.Hole||{};M=c.TreeEff=c.TreeEff||{};N=M.Node=M.Node||{};O=b.LibraryJS=b.LibraryJS||{};P=O.View=O.View||{};Q=O.Var=O.Var||{};R=O.ListModel=O.ListModel||{};S=O.LoadFiles=O.LoadFiles||{};T=O.REGEX=O.REGEX||{};U=O.ResizeObserver=O.ResizeObserver||{};V=O.Monaco=O.Monaco||{};W=V.Position=V.Position||{};X=V.Range=V.Range||{};Y=V.Uri=V.Uri||{};Z=V.Location=V.Location||{};_0=V.FindMatch=V.FindMatch||{};_1=V.WordAtPosition=V.WordAtPosition||{};_2=V.Model=V.Model||{};_3=V.MarkDownString=V.MarkDownString||{};_4=V.MarkerData=V.MarkerData||{};_5=V.CompletionItem=V.CompletionItem||{};_6=V.Hover=V.Hover||{};_7=V.Editor=V.Editor||{};_8=V.MonacoConfig=V.MonacoConfig||{};_9=b.Library2=b.Library2||{};_=_9.WebSockets=_9.WebSockets||{};$=_.Address=_.Address||{};ba=_.BrokerRequest=_.BrokerRequest||{};bb=_.MessageType=_.MessageType||{};bc=_.BrokerMessage=_.BrokerMessage||{};bd=_.Replier=_.Replier||{};be=_.MessageGeneric=_.MessageGeneric||{};bf=b.CalculationModel=b.CalculationModel||{};bg=bf.CalculationModel=bf.CalculationModel||{};bh=bg.DimType=bg.DimType||{};bi=bg.CubeType=bg.CubeType||{};bj=bg.AttType=bg.AttType||{};bk=bg.ElmType=bg.ElmType||{};bl=bg.ModId=bg.ModId||{};bm=bg.AttId=bg.AttId||{};bn=bg.ElmId=bg.ElmId||{};bo=bg.CubId=bg.CubId||{};bp=bg.DimId=bg.DimId||{};bq=bg.CalId=bg.CalId||{};br=bg.TotId=bg.TotId||{};bs=bg.ForId=bg.ForId||{};bt=bg.RulId=bg.RulId||{};bu=bg.Attribute=bg.Attribute||{};bv=bg.Element=bg.Element||{};bw=bg.Dimension=bg.Dimension||{};bx=bg.UnaryOp=bg.UnaryOp||{};by=bg.Operator=bg.Operator||{};bz=bg.ExpressionText=bg.ExpressionText||{};bA=bg.ExpressionNumber=bg.ExpressionNumber||{};bB=bg.ExpressionAny=bg.ExpressionAny||{};bC=bg.Slice=bg.Slice||{};bD=bg.ForType=bg.ForType||{};bE=bg.Formula=bg.Formula||{};bF=bg.Calculation=bg.Calculation||{};bG=bg.Total=bg.Total||{};bH=bg.RuleKey=bg.RuleKey||{};bI=bg.Cube=bg.Cube||{};bJ=bg.Rule=bg.Rule||{};bK=bg.RuleMsg=bg.RuleMsg||{};bL=bg.Model=bg.Model||{};bM=bg.HelperTypeN=bg.HelperTypeN||{};bN=bg.HelperTypeT=bg.HelperTypeT||{};bO=bg.HelperTypeA=bg.HelperTypeA||{};bP=bg.Model0=bg.Model0||{};bQ=bg.ElementModule=bg.ElementModule||{};bR=bg.ElmReferenceModule=bg.ElmReferenceModule||{};bS=bg.SliceModule=bg.SliceModule||{};bT=bg.DimensionModule=bg.DimensionModule||{};bU=bg.CubeModule=bg.CubeModule||{};bV=bg.CalculationModule=bg.CalculationModule||{};bW=bg.TotalModule=bg.TotalModule||{};bX=bg.ModelModule=bg.ModelModule||{};bY=bg.FormulaModule=bg.FormulaModule||{};bZ=bg.RuleModule=bg.RuleModule||{};b0=bg.AttributeModule=bg.AttributeModule||{};b1=b.RuleEditor=b.RuleEditor||{};b2=b1.Templating=b1.Templating||{};b3=b1.Tree=b1.Tree||{};b4=b3.Weight=b3.Weight||{};b5=b3.TreeNode=b3.TreeNode||{};b6=b3.TreeCollection=b3.TreeCollection||{};b7=b1.TreeNode=b1.TreeNode||{};b8=b1.Monaco=b1.Monaco||{};b9=b8.HoverProvider=b8.HoverProvider||{};b_=b8.CompletionItemProvider=b8.CompletionItemProvider||{};b$=b8.DefinitionProvider=b8.DefinitionProvider||{};ca=b1.Version=b1.Version||{};cb=b1.VersionModule=b1.VersionModule||{};cc=b1.ModelUI=b1.ModelUI||{};cd=b1.MsgModel=b1.MsgModel||{};ce=b1.ModelUIModule=b1.ModelUIModule||{};cf=b1.Global=b1.Global||{};cg=b1.Render=b1.Render||{};ch=b1.DragDrop=b1.DragDrop||{};ci=ch.DragInfo=ch.DragInfo||{};cj=b1.TableDimensions=b1.TableDimensions||{};ck=b1.TableCalculations=b1.TableCalculations||{};cl=b1.MainProgram=b1.MainProgram||{};cm=b1.UpdateModelUI=b1.UpdateModelUI||{};cn=a.StartupCode$RuleEditor$RuleEditor=a.StartupCode$RuleEditor$RuleEditor||{};co=a.RuleEditor_GeneratedPrintf=a.RuleEditor_GeneratedPrintf||{};cp=a.RuleEditor_Templates=a.RuleEditor_Templates||{};cq=a.IntelliFactory;cr=cq&&cq.Runtime;cs=j&&j.Utils;ct=j&&j.Strings;cu=j&&j.Seq;cv=j&&j.List;cw=j&&j.Arrays;cx=j&&j.Concurrency;cy=j&&j.Enumerator;cz=j&&j.Result;cA=j&&j.Operators;cB=j&&j.Unchecked;cC=j&&j.Slice;cD=j&&j.Control;cE=cD&&cD.MailboxProcessor;cF=a.console;cG=j&&j.UI;cH=cG&&cG.View;cI=cG&&cG.Var;cJ=cG&&cG.FromView;cK=cG&&cG.Doc;cL=cG&&cG.Var$1;cM=cG&&cG.AttrProxy;cN=a.System;cO=cN&&cN.Guid;cP=j&&j.Collections;cQ=cP&&cP.FSharpMap;cR=cP&&cP.FSharpSet;cS=cP&&cP.Set;cT=cP&&cP.Map;cU=a.Date;cV=cG&&cG.Templating;cW=cV&&cV.Runtime;cX=cW&&cW.Server;cY=cX&&cX.ProviderBuilder;cZ=cX&&cX.Handler;c0=cX&&cX.TemplateInstance;c1=O&&O.AppFramework;c2=c1&&c1.PlugIn;c3=j&&j.Lazy;c4=O&&O.LayoutEngineModule;c5=j&&j.DateUtil;c6=j&&j.Numeric;c7=cG&&cG.ListModel;c8=cG&&cG.Client;c9=c8&&c8.Templates;d=c.ResultMessage=cr.Class({toString:function(){return this.$==1?(function(c_){return function(c$){return c_("Error    : "+cs.toSafe(c$));};}(a.id))(this.$0):this.$==2?(function(c_){return function(c$){return c_("Warning  : "+cs.toSafe(c$));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(c_){return function(c$){return c_(a.String(c$));};}(a.id))(this.$0):this.$==5?(((cr.Curried3(function(c_,c$,da){return c_("Exception: "+cs.toSafe(c$)+", "+cs.toSafe(da));}))(a.id))(this.$0))(this.$1):this.$==6?ct.concat("\n",cu.map(a.String,cu.filter(function(c_){return c_.$!=0;},this.$0))):"";}},null,d);d.NoMsg=new d({$:0});e.infof=function(c_){return c_(function(c$){return new d({$:3,$0:c$});});};e.warningf=function(c_){return c_(function(c$){return new d({$:2,$0:c$});});};e.errorMsgf=function(c_){return c_(function(c$){return new d({$:1,$0:c$});});};d.summarizedI=function(c_){return d.summarizedF(function(){return[0,0,1];},c_);};d.summarizedW=function(c_){return d.summarizedF(function(){return[0,1,0];},c_);};d.summarized=function(c_){return d.summarizedF(function(){return[1,0,0];},c_);};d.summarizedF=function(c_,c$){return ct.concat("\n",cu.filter(function(da){return""!==da;},cv.ofArray([a.String(c$),d.summaryF(c_,c$)])));};d.summaryF=function(c_,c$){var da,db;db=d.countF(c_,c$);switch(db[0]===0?db[1]===0?0:db[1]===1?db[2]===0?0:(da=db[1],2):(da=db[1],2):db[0]===1?db[1]===0?db[2]===0?0:(da=db[0],1):(da=[db[0],db[1]],3):db[1]===0?(da=db[0],1):(da=[db[0],db[1]],3)){case 0:return"";case 1:return(function(dc){return function(dd){return dc("Errors   : "+a.String(dd)+"\n");};}(a.id))(da);case 2:return(function(dc){return function(dd){return dc("Warnings : "+a.String(dd)+"\n");};}(a.id))(da);case 3:return(((cr.Curried3(function(dc,dd,de){return dc("Errors   : "+a.String(dd)+", Warnings: "+a.String(de)+"\n");}))(a.id))(da[0]))(da[1]);}};d.reduceMsgs=function(c_){return cu.fold(d.addMsg,d.NoMsg,c_);};d.addMsg=function(c_,c$){return c_.$==0?c$:c_.$==6?c$.$==0?c_:c$.$==6?new d({$:6,$0:c_.$0.concat(c$.$0)}):new d({$:6,$0:c_.$0.concat([c$])}):c$.$==0?c_:c$.$==6?new d({$:6,$0:[c_].concat(c$.$0)}):new d({$:6,$0:[c_,c$]});};d.countI=function(c_){return d.countF(function(){return[0,0,1];},c_);};d.countW=function(c_){return d.countF(function(){return[0,1,0];},c_);};d.count=function(c_){return d.countF(function(){return[1,0,0];},c_);};d.countF=function(c_,c$){function da(db,dc,dd){return function(de){return[db+de[0],dc+de[1],dd+de[2]];};}return c$.$==0?[0,0,0]:c$.$==3?[0,0,1]:c$.$==2?[0,1,0]:c$.$==4?c_(c$.$0):c$.$==6?cu.fold(function(db,dc){return(function(dd){return da(dd[0],dd[1],dd[2]);}(db))(dc);},[0,0,0],cu.map(function(db){return d.countF(c_,db);},d.exclnoMsg(c$.$0))):[1,0,0];};d.isFatalW=function(c_){return d.isFatalF(function(){return false;},c_);};d.isFatal=function(c_){return d.isFatalF(function(){return true;},c_);};d.isFatalF=function(c_,c$){return c$.$==0?false:c$.$==3?false:c$.$==2?false:c$.$==4?c_(c$.$0):c$.$==6?cu.exists(function(da){return d.isFatalF(c_,da);},c$.$0):true;};d.isWarningOrInfoW=function(c_){return d.isWarningOrInfoF(function(){return true;},c_);};d.isWarningOrInfo=function(c_){return d.isWarningOrInfoF(function(){return false;},c_);};d.isWarningOrInfoF=function(c_,c$){return c$.$==2||(c$.$==4?c_(c$.$0):c$.$==6&&cu.forall(function(da){return d.isWarningOrInfoF(c_,da)||d.isInfoF(c_,da);},d.exclnoMsg(c$.$0)));};d.isInfoI=function(c_){return d.isInfoF(function(){return true;},c_);};d.isInfo=function(c_){return d.isInfoF(function(){return false;},c_);};d.isInfoF=function(c_,c$){return c$.$==3||(c$.$==4?c_(c$.$0):c$.$==6&&cu.forall(function(da){return d.isInfoF(c_,da);},d.exclnoMsg(c$.$0)));};d.freeMessageI=function(c_){var c$;function da(db){return new d({$:3,$0:db});}return d.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};d.freeMessageW=function(c_){var c$;function da(db){return new d({$:2,$0:db});}return d.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};d.freeMessage=function(c_){var c$;function da(db){return new d({$:1,$0:db});}return d.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};d.freeMessageF=function(c_,c$){return d.bindMessage(c_,c$);};d.bindMessage=function(c_,c$){return c$.$==4?c_(c$.$0):c$.$==1?new d({$:1,$0:c$.$0}):c$.$==3?new d({$:3,$0:c$.$0}):c$.$==2?new d({$:2,$0:c$.$0}):c$.$==5?new d({$:5,$0:c$.$0,$1:c$.$1}):c$.$==6?new d({$:6,$0:cw.map(function(da){return d.bindMessage(c_,da);},c$.$0)}):d.NoMsg;};d.exclnoMsg=function(c_){function c$(da){return!da;}return cu.filter(function(da){return c$(d.noMsg(da));},c_);};d.noMsg=function(c_){return c_.$==0;};g.absorbR=function(c_){return cu.choose(function(c$){return c$.$==0?{$:1,$0:c$.$0}:null;},c_);};g.absorbO=function(c_){return cu.choose(a.id,c_);};g.insertR=function(c_){return c_.$==0?cu.map(function(c$){return{$:0,$0:c$};},c_.$0):(g.rtn())(c.Error$1(c_.$0));};g.insertO=function(c_){var c$;c$=c_==null?null:{$:1,$0:cu.map(function(da){return{$:1,$0:da};},c_.$0)};return c$==null?(g.rtn())(null):c$.$0;};g.rtn=function(){cn.$cctor();return cn.rtn;};h.absorbR=function(c_){var c$,da;return c_!=null&&c_.$==1&&(da=c_.$0,da.$==0&&(c$=da.$0,true))?{$:1,$0:c$}:null;};h.insertR=function(c_){var c$;return c_.$==0?(c$=c_.$0,c$==null?null:{$:1,$0:{$:0,$0:c$.$0}}):h.rtn(c.Error$1(c_.$0));};h.sequenceSeq=function(c_){return h.traverseSeq(a.id,c_);};h.traverseSeq=function(c_,c$){var da;da=cw.foldBack(function(db,dc){return h.op_GreaterGreaterEquals(c_(db),function(dd){return h.op_GreaterGreaterEquals(dc,function(de){return h.rtn(new cv.T({$:1,$0:dd,$1:de}));});});},cw.ofSeq(c$),h.rtn(cv.T.Empty));return da==null?null:{$:1,$0:da.$0};};h.op_GreaterGreaterEquals=function(c_,c$){return c_==null?null:c$(c_.$0);};h.bindNone=function(c_,c$){return c$!=null&&c$.$==1?{$:1,$0:c$.$0}:c_();};h.mapNone=function(c_,c$){return c$==null?c_():c$.$0;};h.apply=function(c_,c$){var da;return c_!=null&&c_.$==1&&(c$!=null&&c$.$==1&&(da=[c_.$0,c$.$0],true))?{$:1,$0:da[0](da[1])}:null;};h.join=function(c_){return c_==null?null:c_.$0;};h.iter=function(c_){function c$(db){return db==null?null:{$:1,$0:c_(db.$0)};}function da(db){if(db==null);}return function(db){return da(c$(db));};};h.rtn=function(c_){return{$:1,$0:c_};};i.insertR=function(c_){function c$(db){return{$:0,$0:db};}function da(db){return cx.Return(db);}return c_.$==0?cx.Bind(c_.$0,function(db){return da(c$(db));}):cx.Return(c.Error$1(c_.$0));};i.insertO=function(c_){var c$;function da(dc){return{$:1,$0:dc};}function db(dc){return cx.Return(dc);}c$=c_==null?null:{$:1,$0:cx.Bind(c_.$0,function(dc){return db(da(dc));})};return c$==null?cx.Return(null):c$.$0;};i.sequenceSeq=function(c_){return i.traverseSeq(a.id,c_);};i.traverseSeq=function(c_,c$){function da(db){return cx.Return(db);}return cx.Bind(cw.foldBack(function(db,dc){return i.op_GreaterGreaterEquals(c_(db),function(dd){return i.op_GreaterGreaterEquals(dc,function(de){return cx.Return(new cv.T({$:1,$0:dd,$1:de}));});});},cw.ofSeq(c$),cx.Return(cv.T.Empty)),function(db){return da(a.id(db));});};i.op_GreaterGreaterEquals=function(c_,c$){return cx.Bind(c_,c$);};i.sleepThen=function(c_,c$){var da;da=null;return cx.Delay(function(){return cx.Bind(cx.Sleep(c$),function(){return cx.Return(c_());});});};i.apply=function(c_,c$){var da;da=null;return cx.Delay(function(){return cx.Bind(cx.StartChild(c_,null),function(db){return cx.Bind(cx.StartChild(c$,null),function(dc){return cx.Bind(db,function(dd){return cx.Bind(dc,function(de){return cx.Return(dd(de));});});});});});};m=l.Builder=cr.Class({For:function(c_,c$){var da;da=this;return this.Using(cy.Get(c_),function(db){return da.While(function(){return db.MoveNext();},da.Delay(function(){return c$(db.Current());}));});},While:function(c_,c$){function da(db,dc){return db()?cz.Bind(function(){return da(db,dc);},dc()):l.rtn();}return da(c_,c$);},Using:function(c_,c$){try{return c$(c_);}finally{c_.Dispose();}},TryFinally:function(c_,c$){try{return c_();}finally{c$();}},TryWith:function(c_,c$){try{return c_();}catch(da){return c$(da);}},Run:function(c_){return l.bindP(c_,{$:0,$0:null});},Combine:function(c_,c$){return cz.Bind(c$,c_);},Delay:a.id,Zero:function(){return l.rtn();},Bind:function(c_,c$){return cz.Bind(c$,c_);},ReturnFrom:a.id,Return:function(c_){return l.rtn(c_);}},k,m);m.New=cr.Ctor(function(){k.New.call(this);},m);n.result=function(){cn.$cctor();return cn.result$1;};n.rtn=function(c_){return l.rtn(c_);};n.op_GreaterEqualsGreater=function(c_,c$,da){return n.op_GreaterGreaterEquals(c_(da),c$);};n.op_RightShift=function(c_,c$,da){return n.op_BarGreaterGreater(c_(da),c$);};n.op_GreaterGreaterEquals=function(c_,c$){return l.bindP(c$,c_);};n.op_BarGreaterGreater=function(c_,c$){return l.mapP(c$,c_);};l.result=function(){cn.$cctor();return cn.result;};l.sequenceSeq=function(c_){return l.traverseSeq(a.id,c_);};l.traverseSeq=function(c_,c$){return cz.Map(a.id,cw.foldBack(function(da,db){return l.op_GreaterGreaterEquals(c_(da),function(dc){return l.op_GreaterGreaterEquals(db,function(dd){return l.rtn(new cv.T({$:1,$0:dc,$1:dd}));});});},cw.ofSeq(c$),l.rtn(cv.T.Empty)));};l.op_GreaterGreaterEquals=function(c_,c$){return cz.Bind(c$,c_);};l.absorbO=function(c_,c$){return l.bindP(function(da){return l.ofOption(c_,da);},c$);};l.insertO=function(c_){var c$;c$=c_==null?null:{$:1,$0:cz.Map(function(da){return{$:1,$0:da};},c_.$0)};return c$==null?{$:0,$0:null}:c$.$0;};l.ofOption=function(c_,c$){var da;da=c$==null?null:{$:1,$0:{$:0,$0:c$.$0}};return da==null?function(db){return c.Error$1(c_(db));}():da.$0;};l.get=function(c_){return l.defaultWith(function(c$){return cA.FailWith(a.String(c$));},c_);};l.iter=function(c_,c$,da){l.defaultWith(c_,l.mapP(c$,da));};l.mapP=function(c_,c$){return l.bindP(function(da){return l.rtn(c_(da));},c$);};l.bindP=function(c_,c$){if(c$.$==1)return c.Error$1(c$.$0);else try{return c_(c$.$0);}catch(da){return c.Error$1(new d({$:5,$0:da.message,$1:da.stack}));}};l.failIfFalse=function(c_,c$){return!c$?c.Error$1(c_):{$:0,$0:null};};l.failIfTrue=function(c_,c$){return c$?c.Error$1(c_):{$:0,$0:null};};l.defaultValue=function(c_,c$){return c$.$==1?c_:c$.$0;};l.defaultWith=function(c_,c$){return c$.$==1?c_(c$.$0):c$.$0;};l.toOption=function(c_){return c_.$==0?{$:1,$0:c_.$0}:null;};l.rtn=function(c_){return{$:0,$0:c_};};l.freeMessage=function(c_){return c_.$==1?c.Error$1(d.freeMessage(c_.$0)):{$:0,$0:c_.$0};};p.rtn=function(c_){return o.rtn(c_);};p.op_GreaterEqualsGreater=function(c_,c$,da){return p.op_GreaterGreaterEquals(c_(da),c$);};p.op_RightShift=function(c_,c$,da){return p.op_BarGreaterGreater(c_(da),c$);};p.op_GreaterGreaterEquals=function(c_,c$){return o.bind(c$,c_);};p.op_BarGreaterGreater=function(c_,c$){return o.map(c$,c_);};p.op_LessMultiplyGreater=function(c_,c$){return o.apply(c_,c$);};r=q.Builder=cr.Class({For:function(c_,c$){var da;da=this;return this.Using(cy.Get(c_),function(db){return da.While(function(){return db.MoveNext();},da.Delay(function(){return c$(db.Current());}));});},Using:function(c_,c$){return this.TryFinally(function(){return c$(c_);},function(){if(!cB.Equals(c_,null))c_.Dispose();});},TryFinally:function(c_,c$){return o.wrap(function(da){try{return(o.getFun(c_()))(da);}finally{c$();}});},TryWith:function(c_,c$){return o.wrap(function(da){try{return(o.getFun(c_()))(da);}catch(db){return c$(db);}});},While:function(c_,c$){function da(db,dc){return db()?o.bind(function(){return da(db,dc);},dc()):o.rtn();}return da(c_,c$);},Run:function(c_){return o.wrap(function(c$){return(o.getFun(c_()))(c$);});},Combine:function(c_,c$){return o.bind(c$,c_);},Delay:a.id,Zero:function(){return o.rtn();},Bind:function(c_,c$){return o.bind(c$,c_);},ReturnFrom:function(c_){return o.from(c_);},Return:function(c_){return o.rtn(c_);}},k,r);r.New=cr.Ctor(function(){k.New.call(this);},r);o.fusion=function(){cn.$cctor();return cn.fusion;};o.absorbO=function(c_,c$){return o.absorbR(o.map(function(da){return l.ofOption(c_,da);},c$));};o.absorbR=function(c_){return o.bind(o.ofResultRM,c_);};o.insertSnd=function(c_,c$){return o.map(function(da){return[da,c$];},c_);};o.insertFst=function(c_,c$){return o.map(function(da){return[c_,da];},c$);};o.insertR=function(c_){return c_.$==0?o.map(function(c$){return{$:0,$0:c$};},c_.$0):o.rtn(c.Error$1(c_.$0));};o.insertO=function(c_){var c$;c$=c_==null?null:{$:1,$0:o.map(function(da){return{$:1,$0:da};},c_.$0)};return c$==null?o.rtn(null):c$.$0;};o.iterResultPrint=function(c_){function c$(da){c.print$1(da);}o.iterReader(function(da){return c$(d.summarized(da));},function(da){c.print$1(da);},null,c_);};o.iterResult=function(c_,c$,da){o.iterReader(c_,c$,null,da);};o.runResult=function(c_){return o.runReader(null,c_);};o.runReader=function(c_,c$){var da,db,dc;da=o.run(c_,c$);db=da[2];return l.ofOption(function(){return db;},(dc=da[0],dc==null?null:{$:1,$0:[dc.$0,db]}));};o.mapReader=function(c_,c$){return o.mapState(function(){return c_;},a.id,c$);};o.readerFun=function(c_){return o.map(c_,o.getS());};o.sequenceSeq=function(c_){return o.traverseSeq(a.id,c_);};o.traverseSeq=function(c_,c$){return o.map(a.id,cw.foldBack(function(da,db){return o.op_GreaterGreaterEquals(c_(da),function(dc){return o.op_GreaterGreaterEquals(db,function(dd){return o.rtn(new cv.T({$:1,$0:dc,$1:dd}));});});},cw.ofSeq(c$),o.rtn(cv.T.Empty)));};o.op_GreaterGreaterEquals=function(c_,c$){return o.bind(c$,c_);};o.apply=function(c_,c$){return o.bind(function(da){return o.map(da,c$);},c_);};o.memoizeRm=function(c_,c$,da){return{$:0,$0:function(db){var dc,dd,de,df,dg;function dh(di,dj){return(de(di))(function(){return dj;});}dc=db[0];dd=c_(dc);de=dd[1];return o.run(dc,(df=(dg=dd[0](da),dg==null?null:{$:1,$0:o.rtn(dg.$0)}),df==null?o.map(function(di){return dh(da,di);},c$(da)):df.$0));}};};o.iterReader=function(c_,c$,da,db){var dc,dd;dc=o.run(da,o.map(c$,db));dd=dc[2];(h.iter(a.ignore))(dc[0]);dd.$!==0?c_(dd):void 0;};o.mapState=function(c_,c$,da){return{$:0,$0:function(db){var dc,dd;dc=db[0];dd=(o.getFun(da))([c_(dc),db[1]]);return[dd[0],c$(dc,dd[1]),dd[2]];}};};o.freeMessageW=function(c_){var c$;function da(db){return new d({$:2,$0:db});}return o.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};o.freeMessage=function(c_){var c$;function da(db){return new d({$:1,$0:db});}return o.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};o.freeMessageF=function(c_,c$){return{$:0,$0:function(da){var db,dc,dd;db=da[0];dc=da[1];try{dd=c$.$0([db,d.freeMessage(dc)]);return[dd[0],dd[1],d.freeMessageF(c_,dd[2])];}catch(de){return[null,db,d.freeMessage(d.addMsg(dc,new d({$:5,$0:de.message,$1:de.stack})))];}}};};o.ofFusionM=function(c_){return o.from(c_);};o.ofResultMessage=function(c_){return o.OkFMsg(null,c_);};o.ofMessage=function(c_){return o.OkFMsg(null,new d({$:4,$0:c_}));};o.ofOption=function(c_,c$){return c$==null?o.ErrorF(c_()):o.OkF(c$.$0);};o.ofResult=function(c_){return c_.$==1?o.ErrorF(new d({$:1,$0:(function(c$){return function(da){return c$(cs.prettyPrint(da));};}(a.id))(c_.$0)})):o.OkF(c_.$0);};o.ofResultS=function(c_){return c_.$==1?o.ErrorF(new d({$:1,$0:c_.$0})):o.OkF(c_.$0);};o.ofResultM=function(c_){return c_.$==1?o.ErrorF(new d({$:4,$0:c_.$0})):o.OkF(c_.$0);};o.ofResultRM=function(c_){return c_.$==1?o.ErrorF(c_.$0):o.OkF(c_.$0);};o.inling=function(c_,c$){return{$:0,$0:function(da){var db,dc,dd;db=da[0];dc=da[1];try{dd=c$.$0([db,dc]);return[{$:1,$0:dd[0]},dd[1],dd[2]];}catch(de){return[null,db,d.addMsg(dc,new d({$:5,$0:de.message,$1:de.stack}))];}}};};o.check=function(){return{$:0,$0:function(c_){return[d.isFatal(c_[1])?null:{$:1,$0:null},c_[0],d.NoMsg];}};};o.putS=function(c_){return{$:0,$0:function(){return[{$:1,$0:null},c_,d.NoMsg];}};};o.getR=function(){return{$:0,$0:function(c_){return[{$:1,$0:c_[1]},c_[0],d.NoMsg];}};};o.getS=function(){return{$:0,$0:function(c_){var c$;c$=c_[0];return[{$:1,$0:c$},c$,d.NoMsg];}};};o.ErrorF=function(c_){return{$:0,$0:function(c$){return[null,c$[0],c_];}};};o.OkFMsg=function(c_,c$){return{$:0,$0:function(da){return[{$:1,$0:c_},da[0],c$];}};};o.OkF=function(c_){return{$:0,$0:function(c$){return[{$:1,$0:c_},c$[0],d.NoMsg];}};};o.run=function(c_,c$){return(o.getFun(c$))([c_,d.NoMsg]);};o.from=a.id;o.getFun=function(c_){return c_.$0;};o.wrap=function(c_){return{$:0,$0:c_};};o.map=function(c_,c$){return o.bind(function(da){return o.rtn(c_(da));},c$);};o.bind=function(c_,c$){return{$:0,$0:function(da){var db,dc,dd,de,df,dg,dh;db=da[0];dc=da[1];try{dd=c$.$0([db,dc]);de=dd[0];df=dd[1];dg=dd[2];return de!=null&&de.$==1?(dh=c_(de.$0).$0([df,d.addMsg(dc,dg)]),[dh[0],dh[1],d.addMsg(dg,dh[2])]):[null,df,dg];}catch(di){return[null,db,d.addMsg(dc,new d({$:5,$0:di.message,$1:di.stack}))];}}};};o.rtn=function(c_){return{$:0,$0:function(c$){return[{$:1,$0:c_},c$[0],d.NoMsg];}};};t=s.Eff=cr.Class({get_Cont:function(){return this.$0;}},null,t);u=s.Done=cr.Class({get_Value:function(){return this.v;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(c_){return this;}},k,u);u.New=cr.Ctor(function(c_){k.New.call(this);this.v=c_;},u);v=t.LambdaT=cr.Class({FsRoot_Library_Monads_Eff_Lambda$Invoke:function(c_){var c$;c$=this.loop;return function(da){return c$(c_(da));};}},k,v);v.New=cr.Ctor(function(c_){k.New.call(this);this.loop=c_;},v);t.runResult=function(c_){var c$;try{c$=(c_.get_Cont())(t["done'"]);return c$ instanceof u?{$:0,$0:c$.get_Value()}:c.Error$1((e.errorMsgf(function(da){return function(db){return da("Unhandled effect "+cs.prettyPrint(db)+" expecting");};}))(c$));}catch(da){return c.Error$1(new d({$:5,$0:da.message,$1:da.stack}));}};t.run=function(c_){var c$;c$=(c_.get_Cont())(t["done'"]);return c$ instanceof u?c$.get_Value():(function(da){return function(db){return da("Unhandled effect "+cs.prettyPrint(db));};}(cA.FailWith))(c$);};t["return'"]=function(c_){return new t({$:0,$0:function(){return t["done'"](c_);}});};t["done'"]=function(c_){return new u.New(c_);};t.unpack=function(c_,c$){return c$.FsRoot_Library_Monads_Eff_Effect$UnPack(new v.New(c_));};w.rtn=function(c_){return s.rtn(c_);};w.op_GreaterEqualsGreater=function(c_,c$,da){return w.op_GreaterGreaterEquals(c_(da),c$);};w.op_RightShift=function(c_,c$,da){return w.op_BarGreaterGreater(c_(da),c$);};w.op_GreaterGreaterEquals=function(c_,c$){return s.bind(c$,c_);};w.op_BarGreaterGreater=function(c_,c$){return s.map(c$,c_);};w.op_LessMultiplyGreater=function(c_,c$){return s.apply(c_,c$);};x=s.EffBuilder=cr.Class({For:function(c_,c$){var da;da=this;return this.Using(cy.Get(c_),function(db){return da.While(function(){return db.MoveNext();},function(){return da.Delay(function(){return c$(db.Current());});});});},Using:function(c_,c$){return this.TryFinally(function(){return c$(c_);},function(){if(!cB.Equals(c_,null))c_.Dispose();});},TryFinally:function(c_,c$){return new t({$:0,$0:function(da){try{return c_().$0(da);}finally{c$();}}});},TryWith:function(c_,c$){return new t({$:0,$0:function(da){try{return c_().$0(da);}catch(db){return c$(db).$0(da);}}});},While:function(c_,c$){function da(db,dc){return db()?s.bind(function(){return da(db,dc);},dc()):w.rtn();}return da(c_,c$);},Delay:function(c_){return new t({$:0,$0:function(c$){return c_().$0(c$);}});},Combine:function(c_,c$){return this.Bind(c_,function(){return c$;});},Bind:function(c_,c$){return s.bind(c$,c_);},ReturnFrom:a.id,Return:function(c_){return w.rtn(c_);},Zero:function(){return w.rtn();}},k,x);x.New=cr.Ctor(function(){k.New.call(this);},x);z=y.Ask=cr.Class({get_K:function(){return this.k;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(c_){return new z.New(c_.FsRoot_Library_Monads_Eff_Lambda$Invoke(this.k));}},k,z);z.New=cr.Ctor(function(c_){k.New.call(this);this.k=c_;},z);y.readerFun=function(c_){return s.map(c_,y.ask());};y.readerHandler=function(c_,c$){function da(db){return db instanceof z?da((db.get_K())(c_)):t.unpack(da,db);}return new t({$:0,$0:function(){return da((c$.get_Cont())(t["done'"]));}});};y.ask=function(){return new t({$:0,$0:function(c_){return new z.New(c_);}});};B=A.Fail=cr.Class({get_K:function(){return this.k;},get_Value:function(){return this.v;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(c_){return new B.New(this.v,c_.FsRoot_Library_Monads_Eff_Lambda$Invoke(this.k));}},k,B);B.New=cr.Ctor(function(c_,c$){k.New.call(this);this.v=c_;this.k=c$;},B);A.absorbO=function(c_,c$){return A.absorbR(s.map(function(da){return l.ofOption(c_,da);},c$));};A.absorbR=function(c_){return s.bind(A.ofResult,c_);};A.RslHandler=function(c_){function c$(da,db){return db instanceof u?da({$:0,$0:db.get_Value()}):db instanceof B?da(c.Error$1(db.get_Value())):t.unpack(function(dc){return c$(da,dc);},db);}return new t({$:0,$0:function(da){return c$(da,(c_.get_Cont())(t["done'"]));}});};A.ofResult=function(c_){var c$;c$=s.eff();return c$.Delay(function(){return c_.$==1?c$.Bind(A.fail(c_.$0),function(){return c$.Return(null);}):c$.Return(c_.$0);});};A.fail=function(c_){return new t({$:0,$0:function(c$){return new B.New(c_,c$);}});};s.eff=function(){cn.$cctor();return cn.eff;};s.insertSnd=function(c_,c$){return s.map(function(da){return[da,c$];},c_);};s.insertFst=function(c_,c$){return s.map(function(da){return[c_,da];},c$);};s.insertR=function(c_){return c_.$==0?s.map(function(c$){return{$:0,$0:c$};},c_.$0):w.rtn(c.Error$1(c_.$0));};s.insertO=function(c_){var c$;c$=c_==null?null:{$:1,$0:s.map(function(da){return{$:1,$0:da};},c_.$0)};return c$==null?w.rtn(null):c$.$0;};s.sequenceSeq=function(c_){return s.traverseSeq(a.id,c_);};s.traverseSeq=function(c_,c$){return s.map(a.id,cw.foldBack(function(da,db){return w.op_GreaterGreaterEquals(c_(da),function(dc){return w.op_GreaterGreaterEquals(db,function(dd){return w.rtn(new cv.T({$:1,$0:dc,$1:dd}));});});},cw.ofSeq(c$),w.rtn(cv.T.Empty)));};s.apply=function(c_,c$){return s.bind(function(da){return s.map(da,c$);},c_);};s.map=function(c_,c$){return s.bind(function(da){return s.rtn(c_(da));},c$);};s.bind=function(c_,c$){return new t({$:0,$0:function(da){return c$.$0(function(db){return c_(db).$0(da);});}});};s.rtn=function(c_){return new t({$:0,$0:function(c$){return c$(c_);}});};D.rtn=function(c_){return C.rtn(c_);};D.op_GreaterEqualsGreater=function(c_,c$,da){return D.op_GreaterGreaterEquals(c_(da),c$);};D.op_RightShift=function(c_,c$,da){return D.op_BarGreaterGreater(c_(da),c$);};D.op_GreaterGreaterEquals=function(c_,c$){return C.bind(c$,c_);};D.op_BarGreaterGreater=function(c_,c$){return C.map(c$,c_);};D.op_LessMultiplyGreater=function(c_,c$){return C.apply(c_,c$);};F=E.Builder=cr.Class({For:function(c_,c$){var da;da=this;return this.Using(cy.Get(c_),function(db){return da.While(function(){return db.MoveNext();},da.Delay(function(){return c$(db.Current());}));});},Using:function(c_,c$){function da(db,dc){return cx.Using(c_,function(dd){return(C.getFun(c$(dd)))([db,dc]);});}return C.wrap(function(db){return da(db[0],db[1]);});},TryFinally:function(c_,c$){function da(db,dc){return cx.TryFinally((C.getFun(c_()))([db,dc]),c$);}return C.wrap(function(db){return da(db[0],db[1]);});},TryWith:function(c_,c$){function da(db,dc){return cx.TryWith((C.getFun(c_()))([db,dc]),c$);}return C.wrap(function(db){return da(db[0],db[1]);});},While:function(c_,c$){function da(db,dc){return db()?C.bind(function(){return da(db,dc);},dc()):C.rtn();}return da(c_,c$);},Run:function(c_){return C.wrap(function(c$){return(C.getFun(c_()))(c$);});},Combine:function(c_,c$){return C.bind(c$,c_);},Delay:a.id,Zero:function(){return C.rtn();},Bind:function(c_,c$){return C.bind(c$,c_);},ReturnFrom:function(c_){return C.from(c_);},Return:function(c_){return C.rtn(c_);}},k,F);F.New=cr.Ctor(function(){k.New.call(this);},F);C.fusion=function(){cn.$cctor();return cn.fusion$1;};C.iterResultPrintA=function(c_){function c$(da){c.print$1(da);}C.iterReaderA(function(da){return c$(d.summarized(da));},function(da){c.print$1(da);},null,c_);};C.iterResultPrint=function(c_){function c$(da){c.print$1(da);}C.iterReader(function(da){return c$(d.summarized(da));},function(da){c.print$1(da);},null,c_);};C.iterResultA=function(c_,c$,da){C.iterReaderA(c_,c$,null,da);};C.iterResult=function(c_,c$,da){C.iterReader(c_,c$,null,da);};C.runResult=function(c_){return C.runReader(null,c_);};C.runReader=function(c_,c$){function da(dc,dd,de){return l.ofOption(function(){return de;},dc==null?null:{$:1,$0:[dc.$0,de]});}function db(dc){return cx.Return(dc);}return cx.Bind(C.run(c_,c$),function(dc){return db(da.apply(null,dc));});};C.mapReader=function(c_,c$){return C.mapState(function(){return c_;},a.id,c$);};C.absorbO=function(c_,c$){return C.absorbR(C.map(function(da){return l.ofOption(c_,da);},c$));};C.absorbR=function(c_){return C.bind(C.ofResultRM,c_);};C.insertSnd=function(c_,c$){return C.map(function(da){return[da,c$];},c_);};C.insertFst=function(c_,c$){return C.map(function(da){return[c_,da];},c$);};C.insertR=function(c_){return c_.$==0?C.map(function(c$){return{$:0,$0:c$};},c_.$0):C.rtn(c.Error$1(c_.$0));};C.insertO=function(c_){var c$;c$=c_==null?null:{$:1,$0:C.map(function(da){return{$:1,$0:da};},c_.$0)};return c$==null?C.rtn(null):c$.$0;};C.readerFun=function(c_){return C.map(c_,C.getS());};C.freeMessageW=function(c_){var c$;function da(db){return new d({$:2,$0:db});}return C.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};C.freeMessage=function(c_){var c$;function da(db){return new d({$:1,$0:db});}return C.freeMessageF((c$=function(db){return function(dc){return db(a.String(dc));};}(a.id),function(db){return da(c$(db));}),c_);};C.sequenceSeq=function(c_){return C.traverseSeq(a.id,c_);};C.traverseSeq=function(c_,c$){return C.map(a.id,cw.foldBack(function(da,db){return C.op_GreaterGreaterEquals(c_(da),function(dc){return C.op_GreaterGreaterEquals(db,function(dd){return C.rtn(new cv.T({$:1,$0:dc,$1:dd}));});});},cw.ofSeq(c$),C.rtn(cv.T.Empty)));};C.op_GreaterGreaterEquals=function(c_,c$){return C.bind(c$,c_);};C.apply=function(c_,c$){return C.bind(function(da){return C.map(da,c$);},c_);};C.memoizeRm=function(c_,c$,da){return{$:0,$0:function(db){var dc,dd;dc=db[0];dd=null;return cx.Delay(function(){var de,df,dg,dh;function di(dj,dk){return(df(dj))(function(){return dk;});}de=c_(dc);df=de[1];return C.run(dc,(dg=(dh=de[0](da),dh==null?null:{$:1,$0:C.rtn(dh.$0)}),dg==null?C.map(function(dj){return di(da,dj);},c$(da)):dg.$0));});}};};C.iterReaderA=function(c_,c$,da,db){function dc(de,df,dg){(h.iter(a.ignore))(de);dg.$!==0?c_(dg):void 0;}function dd(de){return cx.Return(de);}cx.Start(cx.Bind(C.run(da,C.map(c$,db)),function(de){return dd(dc.apply(null,de));}),null);};C.iterReader=function(c_,c$,da,db){var dc;dc=C.run(da,C.map(c$,db));throw"iterS cannot be used in JavaScript!";};C.mapState=function(c_,c$,da){return{$:0,$0:function(db){var dc,dd,de;dc=db[0];dd=db[1];de=null;return cx.Delay(function(){return cx.Bind((C.getFun(da))([c_(dc),dd]),function(df){return cx.Return([df[0],c$(dc,df[1]),df[2]]);});});}};};C.freeMessageF=function(c_,c$){return{$:0,$0:function(da){var db,dc,dd;db=da[0];dc=da[1];dd=null;return cx.Delay(function(){return cx.TryWith(cx.Delay(function(){return cx.Bind(c$.$0([db,d.freeMessage(dc)]),function(de){return cx.Return([de[0],de[1],d.freeMessageF(c_,de[2])]);});}),function(de){return cx.Return([null,db,d.freeMessage(d.addMsg(dc,new d({$:5,$0:de.message,$1:de.stack})))]);});});}};};C.ofFusionM=function(c_){var c$;c$=c_.$0;return{$:0,$0:function(da){return cx.Return(c$([da[0],da[1]]));}};};C.ofAsyncResultRM=function(c_){return C.bind(C.ofResultRM,C.ofAsync(c_));};C.ofAsync=function(c_){return{$:0,$0:function(c$){var da;function db(dd){return[{$:1,$0:dd},da,d.NoMsg];}function dc(dd){return cx.Return(dd);}da=c$[0];return cx.Bind(c_,function(dd){return dc(db(dd));});}};};C.ofResultMessage=function(c_){return C.OkFMsg(null,c_);};C.ofMessage=function(c_){return C.OkFMsg(null,new d({$:4,$0:c_}));};C.ofOption=function(c_,c$){var da;da=c$==null?null:{$:1,$0:C.OkF(c$.$0)};return da==null?function(db){return C.ErrorF(c_(db));}():da.$0;};C.ofResult=function(c_){return c_.$==1?C.ErrorF(new d({$:1,$0:(function(c$){return function(da){return c$(cs.prettyPrint(da));};}(a.id))(c_.$0)})):C.OkF(c_.$0);};C.ofResultS=function(c_){return c_.$==1?C.ErrorF(new d({$:1,$0:c_.$0})):C.OkF(c_.$0);};C.ofResultM=function(c_){return c_.$==1?C.ErrorF(new d({$:4,$0:c_.$0})):C.OkF(c_.$0);};C.ofResultRM=function(c_){return c_.$==1?C.ErrorF(c_.$0):C.OkF(c_.$0);};C.getOption=function(c_){return{$:0,$0:function(c$){var da,db,dc;da=c$[0];db=c$[1];dc=null;return cx.Delay(function(){return cx.TryWith(cx.Delay(function(){return cx.Bind(c_.$0([da,db]),function(dd){return cx.Return([{$:1,$0:dd[0]},dd[1],dd[2]]);});}),function(dd){return cx.Return([null,da,d.addMsg(db,new d({$:5,$0:dd.message,$1:dd.stack}))]);});});}};};C.check=function(){return{$:0,$0:function(c_){return cx.Return([d.isFatal(c_[1])?null:{$:1,$0:null},c_[0],d.NoMsg]);}};};C.putS=function(c_){return{$:0,$0:function(){return cx.Return([{$:1,$0:null},c_,d.NoMsg]);}};};C.getR=function(){return{$:0,$0:function(c_){return cx.Return([{$:1,$0:c_[1]},c_[0],d.NoMsg]);}};};C.getS=function(){return{$:0,$0:function(c_){var c$;c$=c_[0];return cx.Return([{$:1,$0:c$},c$,d.NoMsg]);}};};C.ErrorF=function(c_){return{$:0,$0:function(c$){return cx.Return([null,c$[0],c_]);}};};C.OkFMsg=function(c_,c$){return{$:0,$0:function(da){return cx.Return([{$:1,$0:c_},da[0],c$]);}};};C.OkF=function(c_){return{$:0,$0:function(c$){return cx.Return([{$:1,$0:c_},c$[0],d.NoMsg]);}};};C.run=function(c_,c$){return(C.getFun(c$))([c_,d.NoMsg]);};C.from=a.id;C.getFun=function(c_){return c_.$0;};C.wrap=function(c_){return{$:0,$0:c_};};C.map=function(c_,c$){return C.bind(function(da){return C.rtn(c_(da));},c$);};C.bind=function(c_,c$){return{$:0,$0:function(da){var db,dc,dd;db=da[0];dc=da[1];dd=null;return cx.Delay(function(){return cx.TryWith(cx.Delay(function(){return cx.Bind(c$.$0([db,dc]),function(de){var df,dg,dh;df=de[0];dg=de[1];dh=de[2];return df!=null&&df.$==1?cx.Bind(c_(df.$0).$0([dg,d.addMsg(dc,dh)]),function(di){return cx.Return([di[0],di[1],d.addMsg(dh,di[2])]);}):cx.Return([null,dg,dh]);});}),function(de){return cx.Return([null,db,d.addMsg(dc,new d({$:5,$0:de.message,$1:de.stack}))]);});});}};};C.rtn=function(c_){return{$:0,$0:function(c$){return cx.Return([{$:1,$0:c_},c$[0],d.NoMsg]);}};};G.replace=function(c_,c$,da){return cw.ofSeq(cu.delay(function(){return cu.append(c_>0?cC.array(da,null,{$:1,$0:c_-1}):[],cu.delay(function(){return cu.append([c$],cu.delay(function(){return c_<cw.length(da)?cC.array(da,{$:1,$0:c_+1},null):[];}));}));}));};H.Guid$1=function(){cn.$cctor();return cn["|Guid|_|"];};H.Double$1=function(){cn.$cctor();return cn["|Double|_|"];};H.Single$1=function(){cn.$cctor();return cn["|Single|_|"];};H.Int$1=function(){cn.$cctor();return cn["|Int|_|"];};H.Date$1=function(){cn.$cctor();return cn["|Date|_|"];};H.parseGuidO$1=function(){cn.$cctor();return cn.parseGuidO;};H.parseDoubleO$1=function(){cn.$cctor();return cn.parseDoubleO;};H.parseSingleO$1=function(){cn.$cctor();return cn.parseSingleO;};H.parseIntO$1=function(){cn.$cctor();return cn.parseIntO;};H.parseDateO$1=function(){cn.$cctor();return cn.parseDateO;};H.tryParseWith$1=function(c_){function c$(da,db){return da?{$:1,$0:db}:null;}return function(da){return c$.apply(null,c_(da));};};I.PostAndAsyncReply=function(c_,c$,da){return c_.PostAndAsyncReply(function(db){return[db,c$];},da);};K.applyReply=function(c_,c$){return K.applyReplyA(function(da){var db;db=null;return cx.Delay(function(){return cx.Return(c_(da));});},c$);};K.applyReplyA=function(c_,c$){return c$.PostAndAsyncReply(function(da){return function(db){var dc;dc=null;return cx.Delay(function(){return cx.Bind(c_(db),function(dd){da(dd[1]);return cx.Return(dd[0]);});});};},null);};K.apply=function(c_,c$){K.applyA(function(da){var db;db=null;return cx.Delay(function(){return cx.Return(c_(da));});},c$);};K.applyA=function(c_,c$){c$.mailbox.AddLast(function(da){var db;db=null;return cx.Delay(function(){return c_(da);});});c$.resume();};K.setState=function(c_,c$){c$.mailbox.AddLast(function(){var da;da=null;return cx.Delay(function(){return cx.Return(c_);});});c$.resume();};K.getStateA=function(c_){return c_.PostAndAsyncReply(function(c$){return function(da){var db;db=null;return cx.Delay(function(){c$(da);return cx.Return(da);});};},null);};J.defHandler=function(c_,c$){c.print$1(c_);return c$;};J.stateFull=function(c_,c$){return cE.Start(function(da){function db(dc){var dd;dd=null;return cx.Delay(function(){return cx.TryWith(cx.Delay(function(){return cx.Bind(da.Receive(null),function(de){return cx.Bind(de(dc),function(df){return db(df);});});}),function(de){return db(c_(de,dc));});});}return db(c$);},null);};J.fold=function(c_,c$,da){return J.foldA(c_,function(db,dc){var dd;dd=null;return cx.Delay(function(){return cx.Return(c$(db,dc));});},da);};J.foldA=function(c_,c$,da){return cE.Start(function(db){function dc(dd){var de;de=null;return cx.Delay(function(){return cx.TryWith(cx.Delay(function(){return cx.Bind(db.Receive(null),function(df){return cx.Bind(c$(dd,df),function(dg){return dc(dg);});});}),function(df){return dc(c_(df,dd));});});}return dc(da);},null);};J.call=function(c_,c$){return J.callA(c_,function(da){var db;db=null;return cx.Delay(function(){return cx.Return(c$(da));});});};J.callA=function(c_,c$){return J.iterA(c_,function(da){var db,dc,dd;db=da[0];dc=da[1];dd=null;return cx.Delay(function(){return cx.Bind(c$(dc),function(de){db(de);return cx.Zero();});});});};J.iter=function(c_,c$){return J.iterA(c_,function(da){var db;db=null;return cx.Delay(function(){c$(da);return cx.Zero();});});};J.iterA=function(c_,c$){return cE.Start(function(da){var db;db=null;return cx.Delay(function(){return cx.While(function(){return true;},cx.Delay(function(){return cx.TryWith(cx.Delay(function(){return cx.Bind(da.Receive(null),function(dc){return cx.Bind(c$(dc),function(){return cx.Return(null);});});}),function(dc){c_(dc);return cx.Zero();});}));});},null);};L.Hole={$:0};N.New=function(c_,c$,da,db,dc,dd,de,df){return{id:c_,getData:c$,isExpandedEf:da,canHaveChildrenEf:db,childrenEf:dc,pathEf:dd,parentOEf:de,newChildrenEf:df};};M.removeNodeOutdentChildren=function(c_,c$){var da;function db(dc,dd){return w.op_GreaterGreaterEquals(dc,function(de){return M.outdentNode(dd,de);});}return w.op_GreaterGreaterEquals(w.op_GreaterGreaterEquals(c_.childrenEf(),(da=w.rtn(c$),function(dc){return cu.fold(db,da,dc);})),function(dc){return M.removeNode(c_,dc);});};M.outdentNode=function(c_,c$){var da;function db(dc){return M.moveToSibling(true,c_,dc,c$);}return w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(c_.parentOEf(c$),function(dc){return dc==null?null:{$:1,$0:db(dc.$0)};}),(da=w.rtn(c$),function(dc){return dc==null?da:dc.$0;}));};M.indentNode=function(c_,c$){var da;function db(dd){return!cB.Equals(c_.id(),dd.id());}function dc(dd,de){return w.op_GreaterGreaterEquals(de.canHaveChildrenEf(),function(df){return df?w.rtn({$:1,$0:de}):dd;});}return w.op_GreaterGreaterEquals(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(c_.parentOEf(c$),function(dd){return dd!=null&&dd.$==1?w.op_BarGreaterGreater(dd.$0.childrenEf(),function(de){var df;df=cw.ofSeq(de);return df;}):w.rtn(c$);}),function(dd){return cu.takeWhile(db,dd);}),(da=w.rtn(null),function(dd){return cu.fold(dc,da,dd);})),function(dd){var de;return dd!=null&&dd.$==1?(de=dd.$0,w.op_GreaterGreaterEquals(M.removeNode(c_,c$),function(df){return M.addChild(true,c_,de,df);})):w.rtn(c$);});};M.addChild=function(c_,c$,da,db){var dc;dc=s.eff();return dc.Delay(function(){return dc.Bind(da.pathEf(),function(dd){function de(df){var dg,dh;return cB.Equals(df.id(),da.id())?c_?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(df.childrenEf(),cw.ofSeq),(dg=cv.ofArray([c$]),function(di){return cu.append(di,dg);})),cw.ofSeq),df.newChildrenEf):w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(df.childrenEf(),cw.ofSeq),(dh=cv.ofArray([c$]),function(di){return cu.append(dh,di);})),cw.ofSeq),df.newChildrenEf):cv.contains(df.id(),dd)?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(df.childrenEf(),cw.ofSeq),function(di){return cu.map(de,di);}),s.sequenceSeq),cw.ofSeq),df.newChildrenEf):w.rtn(df);}return dc.ReturnFrom(s.sequenceSeq(cu.map(de,db)));});});};M.moveToSibling2=function(c_,c$,da,db){var dc;dc=s.eff();return dc.Delay(function(){return dc.Bind(M.tryFindId(c$,db),function(dd){var de;return dd!=null&&dd.$==1?(de=dd.$0,dc.Bind(M.tryFindId(da,db),function(df){return df!=null&&df.$==1?dc.ReturnFrom(M.moveToSibling(c_,de,df.$0,db)):dc.Return(db);})):dc.Return(db);});});};M.moveToSibling=function(c_,c$,da,db){return w.op_GreaterGreaterEquals(M.removeNode(c$,db),function(dc){return M.addSibling(c_,c$,da,dc);});};M.tryFindId=function(c_,c$){return M.tryFind(function(da){return cB.Equals(da.id(),c_);},c$);};M.tryFind=function(c_,c$){function da(db,dc){return w.op_GreaterGreaterEquals(db,function(dd){var de;return dd==null?c_(dc)?w.rtn({$:1,$0:dc}):w.op_GreaterGreaterEquals(dc.childrenEf(),(de=w.rtn(null),function(df){return cu.fold(da,de,df);})):w.rtn({$:1,$0:dd.$0});});}return cu.fold(da,w.rtn(null),c$);};M.addSibling=function(c_,c$,da,db){function dc(dd){return cB.Equals(dd.id(),da.id());}return w.op_GreaterGreaterEquals(da.pathEf(),function(dd){var de,df;function dg(dh){return cB.Equals(dh.id(),df)?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(dh.childrenEf(),cw.ofSeq),function(di){return M.addToParent(c_,dc,c$,dh,di);}):cv.contains(dh.id(),de)?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dh.childrenEf(),cw.ofSeq),function(di){return cu.map(dg,di);}),s.sequenceSeq),cw.ofSeq),dh.newChildrenEf):w.rtn(dh);}return dd.$==1?(de=dd.$1,(df=dd.$0,s.sequenceSeq(cu.map(dg,db)))):w.rtn(M.addNodeToSeq(c_,dc,c$,db));});};M.addToParent=function(c_,c$,da,db,dc){return db.newChildrenEf(cw.ofSeq(M.addNodeToSeq(c_,c$,da,dc)));};M.addNodeToSeq=function(c_,c$,da,db){return cv.ofSeq(cu.delay(function(){return cu.collect(function(dc){return c$(dc)?c_?cu.append([dc],cu.delay(function(){return[da];})):cu.append([da],cu.delay(function(){return[dc];})):[dc];},db);}));};M.removeNodes=function(c_,c$){var da;da=s.eff();return da.Delay(function(){function db(dc,dd){var de;de=s.eff();return de.Delay(function(){return de.Bind(dc,function(df){var dg,dh;dg=df[1];dh=df[0];return de.Bind(w.op_BarGreaterGreater(dd.childrenEf(),cw.ofSeq),function(di){return de.Bind(cu.fold(db,w.rtn([cv.T.Empty,dg]),di),function(dj){var dk,dl;dk=dj[1];dl=dj[0];return c_(dd)?de.Return([dh,cv.append(dl,dk)]):de.Bind(dd.newChildrenEf(cw.ofSeq(cu.rev(dl))),function(dm){return de.Return([new cv.T({$:1,$0:dm,$1:dh}),dk]);});});});});});}return da.Bind(cu.fold(db,w.rtn([cv.T.Empty,cv.T.Empty]),c$),function(dc){return da.Return(cv.rev(cv.append(dc[1],dc[0])));});});};M.removeNode=function(c_,c$){var da;da=s.eff();return da.Delay(function(){return da.Bind(c_.pathEf(),function(db){function dc(dd){var de;de=s.eff();return de.Delay(function(){return cB.Equals(dd.id(),c_.id())?(function(df){return df("found it");}(function(df){cF.log(df);}),de.Return(null)):cv.contains(dd.id(),db)?(function(df){return df("deeper");}(function(df){cF.log(df);}),de.ReturnFrom(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dd.childrenEf(),cw.ofSeq),function(df){return cu.map(dc,df);}),s.sequenceSeq),function(df){return cu.choose(a.id,df);}),cw.ofSeq),dd.newChildrenEf),function(df){return{$:1,$0:df};}))):(function(df){return df("not");}(function(df){cF.log(df);}),de.Return({$:1,$0:dd}));});}((function(dd){return function(de){return dd("path = "+cs.printList(cs.prettyPrint,de));};}(function(dd){cF.log(dd);}))(db));return da.ReturnFrom(w.op_BarGreaterGreater(s.sequenceSeq(cu.map(dc,c$)),function(dd){return cu.choose(a.id,dd);}));});});};M.listNodes=function(c_,c$){return w.op_BarGreaterGreater(s.sequenceSeq(cu.map(function(da){return w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(da.isExpandedEf(),function(db){var dc;return db?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(da.childrenEf(),cw.ofSeq),(dc=c_+1,function(dd){return M.listNodes(dc,dd);})):w.rtn([]);}),function(db){return cu.append([[da,c_]],db);});},c$)),function(da){return cu.collect(a.id,da);});};c.print$1=function(c_){if(typeof c_=="string")((function(c$){return function(da){return c$(cs.toSafe(da));};}(function(c$){cF.log(c$);}))(c_));else((function(c$){return function(da){return c$(cs.prettyPrint(da));};}(function(c$){cF.log(c$);}))(c_));};c.Error$1=function(c_){return{$:1,$0:c_};};P.sequenceSeq=function(c_){return P.traverseSeq(a.id,c_);};P.traverseSeq=function(c_,c$){return P.map(a.id,cw.foldBack(function(da,db){return P.op_GreaterGreaterEquals(c_(da),function(dc){return P.op_GreaterGreaterEquals(db,function(dd){return P.rtn(new cv.T({$:1,$0:dc,$1:dd}));});});},cw.ofSeq(c$),P.rtn(cv.T.Empty)));};P.op_GreaterGreaterEquals=function(c_,c$){return P.bind(c$,c_);};P.rtn=function(c_){return cH.Const(c_);};P.map=function(c_,c$){return cH.Map(c_,c$);};P.bind=function(c_,c$){return cH.Bind(c_,c$);};P.insertWO=function(c_){return c_==null?cH.Const(null):cH.Map(function(c$){return{$:1,$0:c$};},c_.$0);};Q.lensView=function(c_,c$,da,db){var dc,dd,de;dc=Q.freshId();dd=cH.Map2(function(df){return c_(df);},db.get_View(),da);de=new cG.Var({Get:function(){return c_(db.Get());},Set:function(df){return db.Update(function(dg){return c$(dg,df);});},SetFinal:function(df){return this.Set(df);},Update:function(df){return db.Update(function(dg){return c$(dg,df(c_(dg)));});},UpdateMaybe:function(df){return db.UpdateMaybe(function(dg){var dh;dh=df(c_(dg));return dh==null?null:{$:1,$0:c$(dg,dh.$0)};});},get_View:function(){return dd;},get_Id:function(){return dc;}});cI.New.call(de);return de;};Q.freshId=function(){Q.set_counter(Q.counter()+1);return"varuid"+a.String(Q.counter());};Q.counter=function(){cn.$cctor();return cn.counter;};Q.set_counter=function(c_){cn.$cctor();cn.counter=c_;};R.currentLens=function(c_,c$,da){return R["currentLensUpd'"](c_,c$,function(db){da.UpdateBy(function(){return da.TryFindByKey(da.key(db))==null?null:{$:1,$0:db};},da.key(db));},da);};R["currentLensUpd'"]=function(c_,c$,da,db){return new cJ.New(cH.Map2(function(dc,dd){var de;de=dd==null?null:db.TryFindByKey(dd.$0);return de==null?c_:de.$0;},db.v,c$),da);};R.currentLensUpd=function(c_,c$,da,db){var dc;function dd(df){return db.TryFindByKey(df);}function de(df){return df==null?c_:df.$0;}return Q.lensView((dc=function(df){return df==null?null:dd(df.$0);},function(df){return de(dc(df));}),function(df,dg){(h.iter(da(dg)))(df);return df;},db.v,c$);};R.lensDef=function(c_,c$,da){function db(dc){return dc==null?c_:dc.$0;}return R["lensIntoO'"](da,db,function(){return a.id;},c$,cH.Map(db,da.TryFindByKeyAsView(c$)));};R.docLensMapViewO=function(c_,c$,da,db){function dc(dd,de){return da(dd,R["lensIntoO'"](db,function(df){return df==null?c_:df.$0;},function(){return a.id;},dd,de));}return cK.ConvertSeqBy(db.key,function(dd){return function(de){return dc(dd,de);};},cH.Map(c$,db.v));};R.docLensMapView=function(c_,c$,da){function db(dc,dd){return c$(dc,R["lensInto'"](da,a.id,function(){return a.id;},dc,dd));}return cK.ConvertSeqBy(da.key,function(dc){return function(dd){return db(dc,dd);};},cH.Map(c_,da.v));};R["lensIntoO'"]=function(c_,c$,da,db,dc){var dd,de;dd=Q.freshId();de=new cI({Get:function(){return c$(c_.TryFindByKey(db));},Set:function(df){return c_.UpdateBy(function(dg){return{$:1,$0:(da(dg))(df)};},db);},Update:function(df){return c_.UpdateBy(function(dg){var dh;return{$:1,$0:(dh=df(c$({$:1,$0:dg})),(da(dg))(dh))};},db);},UpdateMaybe:function(df){return c_.UpdateBy(function(dg){var dh,di;dh=df(c$({$:1,$0:dg}));di=da(dg);return dh==null?null:{$:1,$0:di(dh.$0)};},db);},SetFinal:function(df){return this.Set(df);},get_View:function(){return dc;},get_Id:function(){return dd;}});cI.New.call(de);return de;};R["lensInto'"]=function(c_,c$,da,db,dc){var dd,de;dd=Q.freshId();de=new cI({Get:function(){return c$(c_.FindByKey(db));},Set:function(df){return c_.UpdateBy(function(dg){return{$:1,$0:(da(dg))(df)};},db);},Update:function(df){return c_.UpdateBy(function(dg){var dh;return{$:1,$0:(dh=df(c$(dg)),(da(dg))(dh))};},db);},UpdateMaybe:function(df){return c_.UpdateBy(function(dg){var dh,di;dh=df(c$(dg));di=da(dg);return dh==null?null:{$:1,$0:di(dh.$0)};},db);},SetFinal:function(df){return this.Set(df);},get_View:function(){return dc;},get_Id:function(){return dd;}});cI.New.call(de);return de;};S.LoadFilesAsync=function(c_){var c$;c$=null;return cx.Delay(function(){return cx.For(c_,function(da){return cx.Bind(S.LoadFile(da),function(){return cx.Return(null);});});});};S.LoadFile=function(c_){var c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm;function dn(dp,dq){return ct.EndsWith(dq,dp)?{$:1,$0:null}:null;}function _do(dp,dq){try{dl.onload=dp;self.document.head.appendChild(dl);}catch(dr){dq(dr);}}c$=(da=((dc=dn(".js",c_),dc!=null&&dc.$==1)?!self.document.querySelector("script[src='"+c_+"']")||((dd=dn(".fsx",c_),dd!=null&&dd.$==1)?!self.document.querySelector("script[src='"+c_+"']")||(de=dn(".fs",c_),de!=null&&de.$==1)&&!self.document.querySelector("script[src='"+c_+"']"):(df=dn(".fs",c_),df!=null&&df.$==1)&&!self.document.querySelector("script[src='"+c_+"']")):(dg=dn(".fsx",c_),dg!=null&&dg.$==1)?!self.document.querySelector("script[src='"+c_+"']")||(dh=dn(".fs",c_),dh!=null&&dh.$==1)&&!self.document.querySelector("script[src='"+c_+"']"):(di=dn(".fs",c_),di!=null&&di.$==1)&&!self.document.querySelector("script[src='"+c_+"']"))?{$:1,$0:S.createScript(c_)}:(dj=dn(".css",c_),dj!=null&&dj.$==1)?{$:1,$0:S.createCss(c_)}:(dk=dn(".html",c_),dk!=null&&dk.$==1)?{$:1,$0:S.createHtml(c_)}:null,da==null?null:{$:1,$0:(dl=da.$0,cx.FromContinuations(function(dp,dq,dr){return _do.apply(null,[dp,dq,dr]);}))});return c$==null?(dm=null,cx.Delay(function(){return cx.Return(null);})):c$.$0;};S.createHtml=function(c_){var c$;c$=self.document.createElement("link");c$.setAttribute("rel","import");c$.setAttribute("type","text/html");c$.setAttribute("href",c_);return c$;};S.createCss=function(c_){var c$;c$=self.document.createElement("link");c$.setAttribute("rel","stylesheet");c$.setAttribute("type","text/css");c$.setAttribute("href",c_);return c$;};S.createScript=function(c_){var c$;c$=self.document.createElement("script");c$.setAttribute("type","text/javascript");c$.setAttribute("src",c_);return c$;};T.Identifier$1=function(c_){var c$,da,db;return(da=O.REGEX$2("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",c_),da!=null&&da.$==1&&((db=da.$0,!cB.Equals(db,null)&&db.length===1)&&(c$=cw.get(da.$0,0),true)))?{$:1,$0:c$}:null;};T.getEndWord$1=function(c_,c$){var da,db;da=O.REGEX$2("^([a-zA-Z_]\\w*)","g",c_.substring(c$));return da!=null&&da.$==1?(db=da.$0,!cB.Equals(db,null)&&db.length===1)?cw.get(da.$0,0):"":"";};T.getStartWord$1=function(c_,c$){var da,db;da=O.REGEX$2("([a-zA-Z_]\\w*)$","g",ct.Substring(c_,0,c$));return da!=null&&da.$==1?(db=da.$0,!cB.Equals(db,null)&&db.length===1)?cw.get(da.$0,0):"":"";};U.addResizeObserver$1=function(c_,c$){var da,db,dc,dd;try{da=!(!a.ResizeObserver);}catch(de){da=false;}if(da){db=new a.ResizeObserver(c_);U.set_observers$1(new cv.T({$:1,$0:db,$1:U.observers$1()}));db.observe(c$);}else{dc=U.dimsChanged$1(c$);cx.Start((dd=null,cx.Delay(function(){return cx.While(function(){return c$.isConnected;},cx.Delay(function(){return cx.Bind(cx.Sleep(110),function(){return dc()?(c_(),cx.Zero()):cx.Zero();});}));})),null);}};U.dimsChanged$1=function(c_){var c$;c$=[c_.getBoundingClientRect()];return function(){var da;da=c_.getBoundingClientRect();return cB.Equals(U.domRect2Tuple$1(c$[0]),U.domRect2Tuple$1(da))?false:(c$[0]=da,true);};};U.domRect2Tuple$1=function(c_){return[c_.top,c_.left,c_.width,c_.height];};U.observers$1=function(){cn.$cctor();return cn.observers;};U.set_observers$1=function(c_){cn.$cctor();cn.observers=c_;};W.New=function(c_,c$){return{column:c_,lineNumber:c$};};X.New=function(c_,c$,da,db){return{startColumn:c_,endColumn:c$,startLineNumber:da,endLineNumber:db};};Y.New=function(c_,c$,da,db,dc,dd){return{authority:c_,fragment:c$,fsPath:da,path:db,query:dc,scheme:dd};};Z.New=function(c_,c$){return{range:c_,uri:c$};};_0.New=function(c_,c$){return{matches:c_,range:c$};};_1.New=function(c_,c$,da){return{endColumn:c_,startColumn:c$,word:da};};_2.New=function(c_){return{uri:c_};};_3.New=function(c_,c$){return{value:c_,isTrusted:c$};};_4.New=function(c_,c$,da,db,dc,dd){return{startColumn:c_,endColumn:c$,startLineNumber:da,endLineNumber:db,severity:dc,message:dd};};_5.New=function(c_,c$,da){return{kind:c_,label:c$,detail:da};};_6.New=function(c_,c$){return{contents:c_,range:c$};};_7=V.Editor=cr.Class({},k,_7);_7.New=cr.Ctor(function(){k.New.call(this);},_7);_8.New=function(c_,c$,da,db,dc,dd,de){return{"var":c_,onChange:c$,onRender:da,editorO:db,disabled:dc,options:dd,overrides:de};};V.newVarO=function(c_){var c$;c$=V.newVar(cL.Lens(c_,function(da){return da==null?"":da.$0;},function(da,db){return da==null?null:{$:1,$0:db};}));return V.disabled(cH.Map(function(da){return da==null;},c_.get_View()),c$);};V.newText=function(c_){return V.newVar(cL.Create$1(c_));};V["var"]=function(c_){return c_["var"];};V.disabled=function(c_,c$){return _8.New(c$["var"],c$.onChange,c$.onRender,c$.editorO,c_,c$.options,c$.overrides);};V.onRender=function(c_,c$){return _8.New(c$["var"],c$.onChange,{$:1,$0:c_},c$.editorO,c$.disabled,c$.options,c$.overrides);};V.onChange=function(c_,c$){return _8.New(c$["var"],c_,c$.onRender,c$.editorO,c$.disabled,c$.options,c$.overrides);};V.setVar=function(c_,c$){return _8.New(c_,c$.onChange,c$.onRender,c$.editorO,c$.disabled,c$.options,c$.overrides);};V.render$1552$48=function(c_){return function(c$){var da,db;da=(db=c$.parentElement,self.monaco.editor.create(db,c_.options,c_.overrides));U.addResizeObserver$1(function(){da.layout();},c$.parentElement);c$.parentNode.removeChild(c$);c_.editorO={$:1,$0:da};(h.iter(function(dc){dc(da);}))(c_.onRender);O.bindVarEditor(function(dc){da.onDidChangeModelContent(dc);},function(){return da.getValue();},function(dc){da.setValue(dc);},c_.onChange,c_["var"]);};};V.render=function(c_){var c$;return cK.Async((c$=null,cx.Delay(function(){return cx.Bind(V.loader(),function(){return cx.Return(cK.Element("div",[cM.OnAfterRenderImpl(function(da){var db,dc;db=(dc=da.parentElement,self.monaco.editor.create(dc,c_.options,c_.overrides));U.addResizeObserver$1(function(){db.layout();},da.parentElement);da.parentNode.removeChild(da);c_.editorO={$:1,$0:db};(h.iter(function(dd){dd(db);}))(c_.onRender);O.bindVarEditor(function(dd){db.onDidChangeModelContent(dd);},function(){return db.getValue();},function(dd){db.setValue(dd);},c_.onChange,c_["var"]);})],[]));});})));};V.loader=function(){cn.$cctor();return cn.loader;};V.newVar=function(c_){return _8.New(c_,a.ignore,null,null,cH.Const(false),null,null);};O.rexGuid$1=function(){cn.$cctor();return cn.rexGuid;};O.REGEX$2=function(c_,c$,da){var db;return da===null?null:(db=(new a.String(da)).match(new a.RegExp(c_,c$)),cB.Equals(db,null)?null:!cB.Equals(db,null)&&db.length===0?null:{$:1,$0:db});};O.bindVarEditor=function(c_,c$,da,db,dc){var dd,de;dd=[0];de=[0];c_(function(){var df;df=c$();dc.Get()!==df?(dd[0]=dd[0]+1,dc.Set(df),db()):void 0;});cH.Sink(function(){if(dd[0]>de[0])de[0]=dd[0];else if(c$()!==dc.Get())da(dc.Get());},dc.get_View());};$=_.Address=cr.Class({get_txt:function(){return this.$0;}},null,$);ba.BRGetProcessId={$:1};ba.BRGetConnections={$:0};bb.MsgRequestForEcho={$:5};bb.MsgRequestForId={$:4};bb.MsgFromBroker={$:3};bb.MsgReply={$:2};bb.MsgRequest={$:1};bb.MsgInformation={$:0};bc.BMReceiverCantReply={$:4};bc.BMOnlyBrokerShouldUse={$:1};bc.BMOk={$:0};bd.Receiver={$:2};bd.Broker={$:1};bd.NoReply={$:0};be.New=function(c_,c$,da,db,dc,dd,de){return{from:c_,destination:c$,msgType:da,subtype:db,id:dc,payload:dd,replier:de};};_.makeReply=function(c_){return _.replier(bd.NoReply,_.msgType(bb.MsgReply,c_));};_.mapPayload=function(c_,c$){return be.New(c$.from,c$.destination,c$.msgType,c$.subtype,c$.id,c_(c$.payload),c$.replier);};_.msgId=function(c_,c$){return be.New(c$.from,c$.destination,c$.msgType,c$.subtype,c_,c$.payload,c$.replier);};_.replier=function(c_,c$){return be.New(c$.from,c$.destination,c$.msgType,c$.subtype,c$.id,c$.payload,c_);};_.subtype=function(c_,c$){return be.New(c$.from,c$.destination,c$.msgType,c_,c$.id,c$.payload,c$.replier);};_.msgType=function(c_,c$){return be.New(c$.from,c$.destination,c_,c$.subtype,c$.id,c$.payload,c$.replier);};_.destination=function(c_,c$){return be.New(c$.from,c_,c$.msgType,c$.subtype,c$.id,c$.payload,c$.replier);};_.from=function(c_,c$){return be.New(c_,c$.destination,c$.msgType,c$.subtype,c$.id,c$.payload,c$.replier);};_.MessageBrokerAddress=function(){cn.$cctor();return cn.MessageBrokerAddress;};_.MessageBrokerId=function(){cn.$cctor();return cn.MessageBrokerId;};bh.DtOther={$:6};bh.DtMeasure={$:5};bh.DtCalc={$:4};bh.DtTCalc={$:3};bh.DtVersion={$:2};bh.DtTime={$:1};bh.DtDataType={$:0};bi.CtFreeze={$:2};bi.CtCalc={$:1};bi.CtOther={$:0};bj.AtNumber={$:1};bj.AtString={$:0};bk.EtNumber={$:1};bk.EtString={$:0};bl=bg.ModId=cr.Class({get_Id:function(){return this.$0;}},null,bl);bm=bg.AttId=cr.Class({get_Id:function(){return this.$0;}},null,bm);bn=bg.ElmId=cr.Class({get_Id:function(){return this.$0;}},null,bn);bo=bg.CubId=cr.Class({get_Id:function(){return this.$0;}},null,bo);bp=bg.DimId=cr.Class({get_Id:function(){return this.$0;}},null,bp);bq=bg.CalId=cr.Class({get_Id:function(){return this.$0;}},null,bq);br=bg.TotId=cr.Class({get_Id:function(){return this.$0;}},null,br);bs=bg.ForId=cr.Class({get_Id:function(){return this.$0;}},null,bs);bt=bg.RulId=cr.Class({get_Id:function(){return this.$0;}},null,bt);bu.New=function(c_,c$,da,db){return{attId:c_,attName:c$,attType:da,attTableNum:db};};bv.New=function(c_,c$,da,db,dc,dd,de){return{elmId:c_,elmDim:c$,elmType:da,elmName:db,elmDescription:dc,elmAttributes:dd,elmParents:de};};bw.New=function(c_,c$,da,db,dc,dd,de,df,dg,dh,di){return{dimId:c_,dimName:c$,dimPrefix:da,dimOrder:db,dimExclude:dc,dimFreeze:dd,dimType:de,defaultElm:df,dimElements:dg,dimAttributes:dh,isCalcDim:di};};bx.UoPlus={$:1};bx.UoMinus={$:0};by.OpOr={$:11};by.OpAnd={$:10};by.OpLE={$:9};by.OpLT={$:8};by.OpGE={$:7};by.OpGT={$:6};by.OpNE={$:5};by.OpEQ={$:4};by.OpDivide={$:3};by.OpMultiply={$:2};by.OpSubtract={$:1};by.OpAdd={$:0};bz.ExtStet={$:1};bz.ExtNA={$:0};bA.ExnStet={$:1};bA.ExnNA={$:0};bB.ExiStet={$:1};bB.ExiNA={$:0};bC.New=function(c_,c$,da){return{sliDims:c_,calculation:c$,cube:da};};bD.ForAll={$:2};bD.ForConsolidated={$:1};bD.ForBase={$:0};bE.New=function(c_,c$,da,db,dc,dd,de,df){return{forId:c_,forDestDecl:c$,forDestination:da,forDescription:db,forText:dc,forExpression:dd,forType:de,forOrder:df};};bF.New=function(c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj){return{calId:c_,calName:c$,calDescription:da,calOrder:db,format:dc,isText:dd,isInput:de,isBalance:df,calDims:dg,calFormulas:dh,cubIdO:di,properties:dj};};bG.New=function(c_,c$,da,db,dc){return{totId:c_,totName:c$,totOrder:da,totFormat:db,children:dc};};bH.ConsolidatedRuleKey={$:6};bH.InputRuleKey={$:5};bH.ActualRuleKey={$:4};bI.New=function(c_,c$,da,db,dc,dd,de){return{cubId:c_,cubName:c$,cubRules:da,cubRuleXmls:db,cubDims:dc,measureDim:dd,cubType:de};};bJ.New=function(c_,c$,da,db,dc,dd,de,df){return{rulId:c_,rulSourceId:c$,rulDescription:da,rulDestination:db,rulExpression:dc,rulType:dd,rulOrder:de,rulXml:df};};bK.GetInitModelStats={$:0};bL.New=function(c_,c$,da,db,dc,dd){return{modId:c_,server:c$,actualElem:da,modDims:db,modCubes:dc,modCalculations:dd};};bM.HelperTypeN={$:0};bM.op_AmpPercentGreater=function(c_,c$){return c$;};bM.op_AmpPercentGreater$1=function(c_,c$){return{$:2,$0:bg.calcSlice(c$)};};bM.op_AmpPercentGreater$2=function(c_,c$){return{$:2,$0:c$};};bM.op_AmpPercentGreater$3=function(c_,c$){return{$:3,$0:c$};};bM.op_AmpPercentGreater$4=function(c_,c$){return{$:3,$0:c$};};bM.op_AmpPercentGreater$5=function(c_,c$){return{$:3,$0:c$?1:0};};bN.HelperTypeT={$:0};bN.op_AmpAmpGreater=function(c_,c$){return c$;};bN.op_AmpAmpGreater$1=function(c_,c$){return{$:2,$0:bg.calcSlice(c$)};};bN.op_AmpAmpGreater$2=function(c_,c$){return{$:2,$0:c$};};bN.op_AmpAmpGreater$3=function(c_,c$){return{$:5,$0:c$.dimId};};bN.op_AmpAmpGreater$4=function(c_,c$){return{$:3,$0:c$};};bO.HelperTypeA={$:0};bP.getDimR=function(c_,c$){return l.ofOption(function(){return{$:0,$0:c_};},bP.getDimO(c_,c$));};bP.getDimO=function(c_,c$){return cu.tryFind(function(da){return cB.Equals(da.dimId,c_);},c$.modDims);};bP.getCubeO=function(c_,c$){return cu.tryFind(function(da){return cB.Equals(da.cubId,c_);},c$.modCubes);};bQ.newElement=function(c_){return bv.New(new bn({$:0,$0:cO.NewGuid()}),new bp({$:0,$0:cO.NewGuid()}),bk.EtString,c_,c_,new cQ.New([]),[]);};bR.dimId=function(c_){return c_.$==1?c_.$0:c_.$0;};bS.containsDim=function(c_,c$){return c$.sliDims.ContainsKey(c_);};bS.addRef=function(c_,c$){return bC.New(c$.sliDims.Add(bR.dimId(c_),c_),c$.calculation,c$.cube);};bS.forAll=function(){cn.$cctor();return cn.forAll;};bS.newSlice=function(c_){return bC.New(new cQ.New(cu.map(function(c$){return[bR.dimId(c$),c$];},c_)),null,null);};bT.filterSort=function(c_){var c$;c$=bT.filter(c_);return function(da){return bT.sort(c$(da));};};bT.sort=function(c_){return cu.sortBy(function(c$){return c$.dimOrder;},c_);};bT.filter=function(c_){function c$(da){return cu.contains(da.dimType,c_);}return function(da){return cu.filter(c$,da);};};bT.setName=function(c_,c$){return bw.New(c$.dimId,c_,c$.dimPrefix,c$.dimOrder,c$.dimExclude,c$.dimFreeze,c$.dimType,c$.defaultElm,c$.dimElements,c$.dimAttributes,c$.isCalcDim);};bT.dType=function(c_,c$){return bw.New(c$.dimId,c$.dimName,c$.dimPrefix,c$.dimOrder,c$.dimExclude,c$.dimFreeze,c_,c$.defaultElm,c$.dimElements,c$.dimAttributes,c$.isCalcDim);};bT.prefix=function(c_,c$){return bw.New(c$.dimId,c$.dimName,c_,c$.dimOrder,c$.dimExclude,c$.dimFreeze,c$.dimType,c$.defaultElm,c$.dimElements,c$.dimAttributes,c$.isCalcDim);};bT.New=function(c_){return bT.newDimension(new bp({$:0,$0:cO.NewGuid()}),c_,false);};bT.newDimensionCalc=function(c_,c$){return bT.newDimension(c_,c$,true);};bT.newDimensionNonCalc=function(c_,c$){return bT.newDimension(c_,c$,false);};bT.newDimension=function(c_,c$,da){return bw.New(c_,c$,"","",false,false,bh.DtOther,null,[],[],da);};bT.getElementR=function(c_,c$){return l.ofOption(function(){return{$:2,$0:c$.dimName,$1:c_};},bT.getElementO(c_,c$));};bT.getElementO=function(c_,c$){return cu.tryFind(function(da){return cB.Equals(da.elmId,c_);},c$.dimElements);};bU.measureDimNameR=function(c_,c$){return cz.Map(function(da){return da.dimName;},bU.measureDimR(c_,c$));};bU.measureDimR=function(c_,c$){return cz.Bind(function(da){return bP.getDimR(da,c_);},l.ofOption(function(){return{$:4,$0:c$.cubName};},c$.measureDim));};bU.measureDimO=function(c_,c$){var da;da=c$.measureDim;return da==null?null:bP.getDimO(da.$0,c_);};bU.dims=function(c_,c$){return cw.filter(function(da){var db;return cw.exists((db=da.dimId,function(dc){return cB.Equals(db,dc);}),c$.cubDims);},c_.modDims);};bU.forElr=function(c_,c$){var da;da=bU.slice(c$);return bC.New(bg.Map_adds(cv.map(function(db){return[bR.dimId(db),db];},c_),bU.slice(c$).sliDims),da.calculation,da.cube);};bU.addRules=function(c_,c$){return bI.New(c$.cubId,c$.cubName,cu.fold(function(da,db){return da.Add(db[0],db[1]);},c$.cubRules,c_),c$.cubRuleXmls,c$.cubDims,c$.measureDim,c$.cubType);};bU.addRule=function(c_,c$,da){return bI.New(da.cubId,da.cubName,da.cubRules.Add(c_,c$),da.cubRuleXmls,da.cubDims,da.measureDim,da.cubType);};bU.New=function(){return(((bU.newCube(""))([]))(null))(bi.CtOther);};bU.newCubeDims=function(c_,c$,da){return(((bU.newCube(c_))(cw.ofSeq(cu.map(function(db){return db.dimId;},c$))))(da))(bi.CtOther);};bU.newCubeCalc=function(c_,c$,da){return(((bU.newCube(c_))(c$))(da))(bi.CtCalc);};bU.newCube=function(c_){var c$;c$=new bo({$:0,$0:cO.NewGuid()});return cr.Curried(bU.newCubeId,3,[c$,c_]);};bU.newCubeId=function(c_,c$,da,db,dc){return bI.New(c_,c$,new cQ.New([]),new cQ.New([]),da,db,dc);};bU.isCalcCube=function(c_){return c_.cubType.$===1;};bU.containsDim=function(c_,c$){return cu.contains(c_,c$.cubDims);};bU.slice=function(c_){return bC.New(new cQ.New([]),null,{$:1,$0:c_.cubId});};bV.sort=function(c_){return cu.sortBy(function(c$){return c$.calOrder;},c_);};bV.cubeR=function(c_){return(bg.ofOptF(function(){return(function(c$){return function(da){return c$("Calculation '"+cs.toSafe(da)+"' has no cube");};}(a.id))(c_.calName);}))(c_.cubIdO);};bV.withCube=function(c_,c$,da){var db,dc;db=(dc=c$.cube,dc==null?null:bP.getCubeO(dc.$0,c_));return db==null?null:da(db.$0);};bV.addFormulas=function(c_,c$){return cu.isEmpty(c_)?c$:bF.New(c$.calId,c$.calName,c$.calDescription,c$.calOrder,c$.format,c$.isText,c$.isInput,c$.isBalance,c$.calDims,c$.calFormulas.concat(cw.ofSeq(c_)),c$.cubIdO,c$.properties);};bV.forSlice=function(c_,c$){var da;da=bV.slice(c$);return bC.New(bg.Map_adds(cv.map(function(db){return[bR.dimId(db),db];},c_),bV.slice(c$).sliDims),da.calculation,da.cube);};bV.addFormula=function(c_,c$){return bF.New(c$.calId,c$.calName,c$.calDescription,c$.calOrder,c$.format,c$.isText,c$.isInput,c$.isBalance,c$.calDims,c$.calFormulas.concat([c_]),c$.cubIdO,c$.properties);};bV.setOrder=function(c_,c$){return bF.New(c$.calId,c$.calName,c$.calDescription,c_,c$.format,c$.isText,c$.isInput,c$.isBalance,c$.calDims,c$.calFormulas,c$.cubIdO,c$.properties);};bV.setIsText=function(c_,c$){return bF.New(c$.calId,c$.calName,c$.calDescription,c$.calOrder,c$.format,c_,c$.isInput,c$.isBalance,c$.calDims,c$.calFormulas,c$.cubIdO,c$.properties);};bV.setName=function(c_,c$){return bF.New(c$.calId,c_,c$.calDescription,c$.calOrder,c$.format,c$.isText,c$.isInput,c$.isBalance,c$.calDims,c$.calFormulas,c$.cubIdO,c$.properties);};bV.New=function(){return bV.newInput(new bq({$:0,$0:cO.NewGuid()}),"",[]);};bV.newCalc=function(c_,c$,da){var db;db=bV.newInput(c_,c$,da);return bF.New(db.calId,db.calName,db.calDescription,db.calOrder,db.format,db.isText,false,db.isBalance,db.calDims,db.calFormulas,db.cubIdO,db.properties);};bV.newInput=function(c_,c$,da){return bF.New(c_,ct.Trim(ct.Replace(c$,"_"," ")),"","","#,##0.00",false,true,false,new cR.New(da),[],null,new cQ.New([]));};bV.calcType=function(c_){return c_.isInput?"INPUT":"CALC";};bV.slice=function(c_){return bg.calcSlice(c_);};bW.New=function(){return bW.newTotal("");};bW.newTotal=function(c_){return bG.New(new br({$:0,$0:cO.NewGuid()}),c_,"","",[]);};bX.addRules=function(c_,c$){return cu.fold(function(da,db){var dc,dd;function de(df,dg,dh){return[dg,dh];}dc=(dd=((bX.getCubeO())(db[0]))(da),dd==null?null:{$:1,$0:bX.setCube(bU.addRules(cu.map(function(df){return de(df[0],df[1],df[2]);},db[1]),dd.$0),da)});return dc==null?da:dc.$0;},c$,cu.groupBy(function(da){return a.id(da[0],da[1],da[2]);},c_));};bX.prepareModel=function(c_){return bX.fixCalcsAndCubes(bX.fixForDimensions(c_));};bX.fixCalcsAndCubes=function(c_){var c$,da;function db(dd){return bX.getCalcCube(dd,c_);}function dc(dd){return dd==null;}c$=cw.filter(function(dd){var de;return(de=dd.cubIdO,de==null?null:((bX.getCubeO())(de.$0))(c_))==null;},c_.modCalculations);return cu.isEmpty(c$)?c_:(da=cu.fold(function(dd,de){return bX.newCalcCube(de,dd);},c_,cu.filter(function(dd){return dc(db(dd));},cu.distinct(cu.map(function(dd){return dd.calDims;},c$)))),bL.New(da.modId,da.server,da.actualElem,da.modDims,da.modCubes,cw.map(function(dd){var de,df,dg,dh;de=(df=cu.tryFind(function(di){return cB.Equals(di.calId,dd.calId);},c$),df==null?null:{$:1,$0:(dg=df.$0,bF.New(dg.calId,dg.calName,dg.calDescription,dg.calOrder,dg.format,dg.isText,dg.isInput,dg.isBalance,dg.calDims,dg.calFormulas,(dh=bX.getCalcCube(dg.calDims,da),dh==null?null:{$:1,$0:dh.$0.cubId}),dg.properties))});return de==null?dd:de.$0;},da.modCalculations)));};bX.newCalcCube=function(c_,c$){var da,db,dc;da=bX.autoName(c_,c$);db=bT.newDimensionCalc(new bp({$:0,$0:cO.NewGuid()}),bX.measurePrefix()+da);dc=cw.ofSeq(cu.map(function(dd){return dd.dimId;},cu.append(bX.orderedDims(c_,c$),cv.ofArray([db]))));return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims.concat([db]),c$.modCubes.concat([bU.newCubeCalc(bX.cubePrefix()+da,dc,{$:1,$0:db.dimId})]),c$.modCalculations);};bX.fixForDimensions=function(c_){return bL.New(c_.modId,c_.server,c_.actualElem,c_.modDims,c_.modCubes,cw.map(function(c$){return bF.New(c$.calId,c$.calName,c$.calDescription,c$.calOrder,c$.format,c$.isText,c$.isInput,c$.isBalance,cS.Filter(function(da){return cu.exists(function(db){return cB.Equals(da,db);},bX.dimIds(c_));},c$.calDims),c$.calFormulas,c$.cubIdO,c$.properties);},c_.modCalculations));};bX.dimIds=function(c_){return cw.map(function(c$){return c$.dimId;},c_.modDims);};bX.autoName=function(c_,c$){var da,db,dc;da=ct.concat("",cu.map(function(dd){return dd.dimPrefix;},bX.orderedDims(c_,c$)));db=cu.choose(function(dd){var de,df;de=bX.cubePrefix()+da;return dd.cubName===de?{$:1,$0:-1}:ct.StartsWith(dd.cubName,de)?(df=cC.string(dd.cubName,{$:1,$0:da.length+1},null),(H.parseIntO$1())(df)):null;},c$.modCubes);return da+(cu.isEmpty(db)?"":(dc=1+cu.max(db),(function(dd){return function(de){return dd(a.String(de));};}(a.id))(dc)));};bX.orderedDims=function(c_,c$){return cu.filter(function(da){var db;return cu.exists((db=da.dimId,function(dc){return cB.Equals(db,dc);}),c_);},c$.modDims);};bX.measurePrefix=function(){cn.$cctor();return cn.measurePrefix;};bX.cubePrefix=function(){cn.$cctor();return cn.cubePrefix;};bX.dimCombinations=function(c_){return cu.distinct(cu.map(function(c$){return c$.calDims;},c_.modCalculations));};bX.withDims=function(c_,c$,da){return bX.withDimsO(c_,c$,cr.Curried(function(db,dc,dd,de){return{$:1,$0:da(db,dc,dd,de)};},4));};bX.withDimsO=function(c_,c$,da){var db;return h.join(h.apply(h.apply(h.apply(h.apply({$:1,$0:da},(db=c$.measureDim,db==null?null:((bX.getDimO())(db.$0))(c_))),bX.dataTypeDimO(c_)),bX.versionDimO(c_)),bX.timeDimO(c_)));};bX.setCube=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims,cw.map(function(da){return cB.Equals(da.cubId,c_.cubId)?c_:da;},c$.modCubes),c$.modCalculations);};bX.getCalcCube=function(c_,c$){return cu.tryFind(function(da){return cB.Equals(new cR.New(cu.filter(function(db){return!cB.Equals({$:1,$0:db},da.measureDim);},da.cubDims)),c_);},cu.filter(bU.isCalcCube,c$.modCubes));};bX.isActualCalcO=function(c_){return bX.pickCalcO("IsActual",c_);};bX.versionDimO=function(c_){return bX.pickDimO(bh.DtVersion,c_);};bX.timeDimO=function(c_){return bX.pickDimO(bh.DtTime,c_);};bX.dataTypeDimO=function(c_){return bX.pickDimO(bh.DtDataType,c_);};bX.tCalcDimO=function(c_){return bX.pickDimO(bh.DtTCalc,c_);};bX.freezeCubeO=function(c_){return bX.pickCubeO(bi.CtFreeze,c_);};bX.pickCalcO=function(c_,c$){return cu.tryPick(function(da){return da.calName===c_?{$:1,$0:da}:null;},c$.modCalculations);};bX.pickDimO=function(c_,c$){return cu.tryPick(function(da){return cB.Equals(da.dimType,c_)?{$:1,$0:da}:null;},c$.modDims);};bX.pickCubeO=function(c_,c$){return cu.tryPick(function(da){return cB.Equals(da.cubType,c_)?{$:1,$0:da}:null;},c$.modCubes);};bX.getCubeR=function(c_,c$){return l.ofOption(function(){return{$:3,$0:c_};},((bX.getCubeO())(c_))(c$));};bX.getCalcR=function(c_,c$){return l.ofOption(function(){return{$:5,$0:c_};},bX.getCalcO(c_,c$));};bX.getCubeO=function(){cn.$cctor();return cn.getCubeO;};bX.getCalcO=function(c_,c$){return cu.tryFind(function(da){return cB.Equals(da.calId,c_);},c$.modCalculations);};bX.getDimR=function(){cn.$cctor();return cn.getDimR;};bX.getDimO=function(){cn.$cctor();return cn.getDimO;};bX.addForm=function(c_,c$,da){return bL.New(da.modId,da.server,da.actualElem,da.modDims,da.modCubes,cw.map(function(db){return cB.Equals(db.calId,c_)?bV.addFormula(c$,db):db;},da.modCalculations));};bX.addCube=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims,c$.modCubes.concat([c_]),c$.modCalculations);};bX.addDim=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims.concat([c_]),c$.modCubes,c$.modCalculations);};bX.addCalc=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims,c$.modCubes,c$.modCalculations.concat([c_]));};bX.addForms=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims,c$.modCubes,cw.map(function(da){var db,dc;function dd(de){return de[0];}return bV.addFormulas(cu.map(function(de){return de[1];},cu.filter((db=(dc=da.calId,function(de){return cB.Equals(dc,de);}),function(de){return db(dd(de));}),c_)),da);},c$.modCalculations));};bX.addCubes=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims,bX.mergeBy(function(da){return da.cubId;},c_,c$.modCubes),c$.modCalculations);};bX.addDims=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,bX.mergeBy(function(da){return da.dimId;},c_,c$.modDims),c$.modCubes,c$.modCalculations);};bX.addCalcs=function(c_,c$){return bL.New(c$.modId,c$.server,c$.actualElem,c$.modDims,c$.modCubes,bX.mergeBy(function(da){return da.calId;},c_,c$.modCalculations));};bX.mergeBy=function(c_,c$,da){return cw.ofSeq(c$).concat(cw.filter(function(db){return!cu.contains(c_(db),cu.map(c_,c$));},da));};bY.getDimDest=function(c_,c$){return cu.tryPick(function(da){return cB.Equals(bR.dimId(da),c_.dimId)?{$:1,$0:da}:null;},c$.forDestination);};bY.setOrder=function(c_,c$){return bE.New(c$.forId,c$.forDestDecl,c$.forDestination,c$.forDescription,c$.forText,c$.forExpression,c$.forType,c_);};bY.setText=function(c_,c$){return bE.New(c$.forId,c$.forDestDecl,c$.forDestination,c$.forDescription,c_,c$.forExpression,c$.forType,c$.forOrder);};bY.conso=function(c_){return bE.New(c_.forId,c_.forDestDecl,c_.forDestination,c_.forDescription,c_.forText,c_.forExpression,bD.ForConsolidated,c_.forOrder);};bZ.conso=function(c_){return bJ.New(c_.rulId,c_.rulSourceId,c_.rulDescription,c_.rulDestination,c_.rulExpression,bD.ForConsolidated,c_.rulOrder,c_.rulXml);};bZ.New=function(){return bJ.New(new bt({$:0,$0:cO.NewGuid()}),null,"",cv.T.Empty,bB.ExiStet,bD.ForBase,"","");};b0.New=function(){return bu.New(new bm({$:0,$0:cO.NewGuid()}),"",bj.AtString,1);};bg.ofOptS=function(c_){function c$(){return new d({$:4,$0:c_});}return function(da){return l.ofOption(c$,da);};};bg.ofOptF=function(c_){function c$(){return new d({$:4,$0:c_()});}return function(da){return l.ofOption(c$,da);};};bg.calcSlice=function(c_){return bC.New(new cQ.New([]),{$:1,$0:c_.calId},null);};bg.Map_adds=function(c_,c$){return new cQ.New(cu.append(cT.ToSeq(c$),c_));};bg.Xmodel=function(){cn.$cctor();return cn.Xmodel;};b2.TemplatesFileName=function(){cn.$cctor();return cn.TemplatesFileName;};b2.rootdir=function(){cn.$cctor();return cn.rootdir;};b4.Subtract={$:2};b4.Add={$:1};b4.Zero={$:0};b5.New=function(c_,c$,da,db,dc){return{nid:c_,expanded:c$,element:da,children:db,weight:dc};};b6.New=function(c_,c$,da,db){return{getParentO:c_,getNode:c$,getPath:da,setChildren:db};};b3.setChildrenEf=function(c_,c$){return w.op_BarGreaterGreater(y.ask(),function(da){return(da.setChildren(c$))(c_);});};b3.getPathEf=function(c_){return w.op_BarGreaterGreater(y.ask(),function(c$){return c$.getPath(c_);});};b3.getNodeEf=function(c_){return w.op_BarGreaterGreater(y.ask(),function(c$){return c$.getNode(c_);});};b3.getParentOEf=function(c_){return w.op_BarGreaterGreater(y.ask(),function(c$){return c$.getParentO(c_);});};b7.tryFindNodeCIdEf=function(c_,c$){return b7.tryFindTreeNodeEf(b7.forCId(function(da){return cB.Equals(c_,da);}),c$);};b7.tryFindNodeTIdEf=function(c_,c$){return b7.tryFindTreeNodeEf(b7.forTId(function(da){return cB.Equals(c_,da);}),c$);};b7.tryFindSelChildEf=function(c_,c$){return w.op_BarGreaterGreater(b7.tryFindSelNodeEf(c_,c$),function(da){return da==null?null:{$:1,$0:b7.getElement(da.$0)};});};b7.tryFindSelNodeEf=function(c_,c$){var da;return w.op_BarGreaterGreater(s.insertO((da=c_==null?null:{$:1,$0:c_.$0[0]},da==null?null:{$:1,$0:b7.tryFindNodeEf(da.$0,c$)})),function(db){return db==null?null:a.id(db.$0);});};b7.tryFindNodeEf=function(c_,c$){return b7.tryFindTreeNodeEf(function(da){return cB.Equals(da.nid,c_);},c$);};b7.tryFindTreeNodeEf=function(c_,c$){return w.op_BarGreaterGreater(M.tryFind(function(da){return c_(b7.fromNode(da));},cu.map(b7.treenode,c$)),function(da){return da==null?null:{$:1,$0:b7.fromNode(da.$0)};});};b7.forCId=function(c_){var c$,da;function db(dd){return dd==null?null:{$:1,$0:c_(dd.$0)};}function dc(dd){return dd==null?false:dd.$0;}c$=(da=function(dd){return b7.getCId(b7.getElement(dd));},function(dd){return db(da(dd));});return function(dd){return dc(c$(dd));};};b7.forTId=function(c_){var c$,da;function db(dd){return dd==null?null:{$:1,$0:c_(dd.$0)};}function dc(dd){return dd==null?false:dd.$0;}c$=(da=function(dd){return b7.getTId(b7.getElement(dd));},function(dd){return db(da(dd));});return function(dd){return dc(c$(dd));};};b7.getCId=function(c_){return c_.$==0?{$:1,$0:c_.$0}:null;};b7.getTId=function(c_){return c_.$==1?{$:1,$0:c_.$0}:null;};b7.getElement=function(c_){return c_.element;};b7.removeNodesEf=function(c_,c$){return w.op_BarGreaterGreater(M.removeNodes(function(da){return c_(b7.fromNode(da));},cu.map(b7.treenode,c$)),b7.fromSeqNode);};b7.newNodeTot=function(c_){return b7.newTreeNode({$:1,$0:c_});};b7.newNodeCalc=function(c_){return b7.newTreeNode({$:0,$0:c_});};b7.newTreeNode=function(c_){return b5.New({$:0,$0:cO.NewGuid()},true,c_,[],b4.Add);};b7.fromSeqNode=function(c_){return cu.map(b7.fromNode,c_);};b7.treenode=function(c_){return N.New(function(){return c_.nid;},function(){return c_;},function(){return w.rtn(c_.expanded);},function(){return w.rtn(c_.element.$!=0);},function(){return w.rtn(cu.map(b7.treenode,c_.children));},function(){return b3.getPathEf(c_.nid);},function(){return w.op_BarGreaterGreater(b3.getParentOEf(c_.nid),function(c$){return c$==null?null:{$:1,$0:b7.treenode(c$.$0)};});},function(){return w.rtn(b7.treenode(c_));});};b7.fromNode=function(c_){return c_.getData();};b9=b8.HoverProvider=cr.Class({provideHover:function(c_,c$,da){var db,dc;db=c_.getWordAtPosition(c$);return!db?null:_6.New([_3.New((dc=db.word,(function(dd){return function(de){return dd("The word is: "+cs.toSafe(de));};}(a.id))(dc)),true)],X.New(db.startColumn,db.endColumn,c$.lineNumber,c$.lineNumber));}},k,b9);b9.New=cr.Ctor(function(c_){k.New.call(this);},b9);b_=b8.CompletionItemProvider=cr.Class({resolveCompletionItem:function(c_,c$){return _5.New(c_.kind,c_.label,"more details");},provideCompletionItems:function(c_,c$,da,db){var dc;dc=c_.getWordAtPosition(c$);return!dc?null:[_5.New(2,"Hello",""),_5.New(2,"How",""),_5.New(2,"Are",""),_5.New(2,"You",""),_5.New(2,dc.word,"")];}},k,b_);b_.New=cr.Ctor(function(c_){k.New.call(this);},b_);b$=b8.DefinitionProvider=cr.Class({provideDefinition:function(c_,c$,da){var db,dc;db=c_.getWordAtPosition(c$);return!db?null:(dc=c_.findMatches(db.word,false,false,true," <>()+-=.,/#@$%^&*\"",false,1),cw.length(dc)===0?null:Z.New(cw.get(dc,0).range,c_.uri));}},k,b$);b$.New=cr.Ctor(function(c_){k.New.call(this);},b$);b8.monacoNew=function(c_,c$,da,db){return V.onRender(function(dc){var dd,de,df,dg;function dh(dm,dn,_do){return de.provideHover(dm,dn,_do);}function di(dm,dn,_do,dp){return df.provideCompletionItems(dm,dn,_do,dp);}function dj(dm,dn){return df.resolveCompletionItem(dm,dn);}function dk(dm,dn,_do){return dg.provideDefinition(dm,dn,_do);}function dl(dm){var dn;dn=dc.getModel();self.monaco.editor.setModelMarkers(dn,"annotations",dm);}dd=dc.getModel();self.monaco.editor.setModelLanguage(dd,"fsharp");self.monaco.editor.setTheme("vs-dark");de=new b9.New(dc);df=new b_.New(dc);dg=new b$.New(dc);c.print$1(function(dm){return dh(dm[0],dm[1],dm[2]);});c.print$1(function(dm){return di(dm[0],dm[1],dm[2],dm[3]);});c.print$1(function(dm){return dj(dm[0],dm[1]);});c.print$1(function(dm){return dk(dm[0],dm[1],dm[2]);});self.monaco.languages.registerHoverProvider("fsharp",de);self.monaco.languages.registerCompletionItemProvider("fsharp",df);self.monaco.languages.registerDefinitionProvider("fsharp",dg);(h.iter(function(dm){cH.Sink(dl,dm);}))(c$);},V.newVar(c_));};b8.transformAnnotations=function(c_){var c$,da;function db(dc,dd,de,df,dg,dh){return _4.New(de,dg,dd,df,dc==="Err"?8:dc==="Warn"?4:dc==="Hint"?1:2,dh);}c$="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\)\\: \"([^\"]+?)\"\\.";return cw.map(function(dc){return db(dc[0],dc[1],dc[2],dc[3],dc[4],dc[5]);},cw.choose(function(dc){var dd,de,df;return(de=O.REGEX$2(c$,"",dc),de!=null&&de.$==1&&((df=de.$0,!cB.Equals(df,null)&&df.length===7)&&(dd=[cw.get(de.$0,3),cw.get(de.$0,2),cw.get(de.$0,6),cw.get(de.$0,5),cw.get(de.$0,4),cw.get(de.$0,1)],true)))?{$:1,$0:[dd[5],cA.toInt(a.Number(dd[1])),cA.toInt(a.Number(dd[0])),cA.toInt(a.Number(dd[4])),cA.toInt(a.Number(dd[3])),dd[2]]}:null;},(da=O.REGEX$2(c$,"g",c_),da!=null&&da.$==1?da.$0:[])));};b8.annotationsV=function(){cn.$cctor();return cn.annotationsV;};ca.New=function(c_,c$,da,db){return{major:c_,minor:c$,majorDate:da,minorDate:db};};cb.incrementMajor=function(c_){return ca.New(c_.major+1,0,function(c$){return c$.getFullYear()+"-"+("0"+(c$.getMonth()+1)).slice(-2)+"-"+("0"+c$.getDay()).slice(-2)+" "+("0"+c$.getHours()).slice(-2)+":"+("0"+c$.getMinutes()).slice(-2)+":"+("0"+c$.getSeconds()).slice(-2)+":"+("00"+c$.getMilliseconds()).slice(-3);}(new a.Date(cU.now())),function(c$){return c$.getFullYear()+"-"+("0"+(c$.getMonth()+1)).slice(-2)+"-"+("0"+c$.getDay()).slice(-2)+" "+("0"+c$.getHours()).slice(-2)+":"+("0"+c$.getMinutes()).slice(-2)+":"+("0"+c$.getSeconds()).slice(-2)+":"+("00"+c$.getMilliseconds()).slice(-3);}(new cU(cU.now())));};cb.incrementMinor=function(c_){return ca.New(c_.major,c_.minor+1,c_.majorDate,function(c$){return c$.getFullYear()+"-"+("0"+(c$.getMonth()+1)).slice(-2)+"-"+("0"+c$.getDay()).slice(-2)+" "+("0"+c$.getHours()).slice(-2)+":"+("0"+c$.getMinutes()).slice(-2)+":"+("0"+c$.getSeconds()).slice(-2)+":"+("00"+c$.getMilliseconds()).slice(-3);}(new cU(cU.now())));};cb.New=function(){return ca.New(0,0,"","");};cc.New=function(c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp){return{treeHierarchy:c_,calculations:c$,totals:da,dimensions:db,cubes:dc,globalDefs:dd,server:de,selection:df,selectedDim:dg,selectedCube:dh,collapsed:di,cubePrefix:dj,measurePrefix:dk,outputMsgs:dl,codeFS:dm,parserMsgs:dn,fileName:_do,version:dp};};cd.NoOp={$:28};cd.AddDimension={$:17};cd.AddCalculation={$:3};cd.AddTotal={$:0};ce.getDimsCubeO=a.id;ce.setHierarchy=function(c_,c$){c_.treeHierarchy.Set(cw.ofSeq(c$));};ce.refreshNow=function(){cn.$cctor();return cn.refreshNow;};ce.refreshView=function(){cn.$cctor();return cn.refreshView;};ce.isNodeFormSelected=function(c_,c$,da){return cB.Equals(da,{$:1,$0:[c$,{$:1,$0:c_}]});};ce.nonFormulaV=function(){cn.$cctor();return cn.nonFormulaV;};ce.nonCalculationV=function(){cn.$cctor();return cn.nonCalculationV;};ce.nonTotalV=function(){cn.$cctor();return cn.nonTotalV;};ce.nonFormula=function(){cn.$cctor();return cn.nonFormula;};ce.nonCalculation=function(){cn.$cctor();return cn.nonCalculation;};ce.nonTotal=function(){cn.$cctor();return cn.nonTotal;};ce.selectedString=function(c_,c$){return cH.Map(function(da){return da?c_:"";},c$);};ce.isNodeSelected=function(c_,c$){var da;da=c$==null?null:{$:1,$0:cB.Equals(c_,c$.$0[0])};return da==null?false:da.$0;};cf.appendParser=function(c_){cf.appendText(cf.model().parserMsgs,c_);};cf.appendMsgs=function(c_){cf.appendText(cf.model().outputMsgs,c_);};cf.appendText=function(c_,c$){var da;c_.Set((da=c_.Get(),da===""?c$:c$===""?da:da+"\n"+c$));};cf.processor=function(){cn.$cctor();return cn.processor;};cf.set_processor=function(c_){cn.$cctor();cn.processor=c_;};cf.model=function(){cn.$cctor();return cn.model;};cg.dtypes=function(){cn.$cctor();return cn.dtypes;};cg.formTypeV=function(c_){return cL.Lens(cL.Lens(c_,function(c$){return c$.forType;},function(c$,da){return bE.New(c$.forId,c$.forDestDecl,c$.forDestination,c$.forDescription,c$.forText,c$.forExpression,da,c$.forOrder);}),function(c$){return cC.string((function(da){return function(db){return da(co.p(db));};}(a.id))(c$),{$:1,$0:3},null);},function(c$,da){return da==="Base"?bD.ForBase:da==="Consolidated"?bD.ForConsolidated:bD.ForAll;});};cg.calcTypeV=function(c_){return cL.Lens(cL.Lens(c_,function(c$){return c$.isInput;},function(c$,da){return bF.New(c$.calId,c$.calName,c$.calDescription,c$.calOrder,c$.format,c$.isText,da,c$.isBalance,c$.calDims,c$.calFormulas,c$.cubIdO,c$.properties);}),function(c$){return c$?"Input":"Calc";},function(c$,da){return da!=="Calc";});};cg.currentFormV=function(){cn.$cctor();return cn.currentFormV;};cg.lensForm=function(c_,c$){var da,db,dc;da=cL.Lens(c_,function(dd){return dd.calFormulas;},function(dd,de){return bF.New(dd.calId,dd.calName,dd.calDescription,dd.calOrder,dd.format,dd.isText,dd.isInput,dd.isBalance,dd.calDims,de,dd.cubIdO,dd.properties);});db=(dc=cH.get_Do(),cH.Bind(function(dd){var de,df;return cH.Const((de=c$(),de==null?null:(df=de.$0,cB.Equals(dd.calId,ce.nonCalculation().calId)?null:cu.tryFind(function(dg){return cB.Equals(dg.forId,df);},dd.calFormulas))));},c_.get_View()));return new cJ.New((cg.mapDefW(ce.nonFormula()))(db),function(dd){var de;cx.Start((de=null,cx.Delay(function(){return cx.Bind(cH.GetAsync(db),function(df){var dg;return df==null?cx.Zero():(dg=cu.tryFindIndex(function(dh){return cB.Equals(dh.forId,dd.forId);},da.Get()),(h.iter(function(dh){da.Set(G.replace(dh,dd,da.Get()));}))(dg),cx.Zero());});})),null);});};cg.currentCalcV=function(){cn.$cctor();return cn.currentCalcV;};cg.setCurrentCalc=function(c_){var c$;cx.Start((c$=null,cx.Delay(function(){return cx.Bind(cH.GetAsync(cg.currentCalcOW()),function(da){return da==null?cx.Zero():(cf.model().calculations.Append(c_),cx.Zero());});})),null);};cg.currentCalcOW=function(){cn.$cctor();return cn.currentCalcOW;};cg.tryFindNode=function(c_){return function(c$){return b7.tryFindNodeEf(c_,c$);};};cg.iterEff=function(c_,c$){cg.runEff(s.map(c_,c$));};cg.runEff=function(c_){return t.run(y.readerHandler(cg.getTreeEffReaderResource(),c_));};cg.getTreeEffReaderResource=function(){return b6.New(function(){return(function(c_){return function(c$){return c_("Incomplete hole '"+cs.toSafe(c$)+"'");};}(cA.FailWith))("Tree.getParentO ");},function(){return(function(c_){return function(c$){return c_("Incomplete hole '"+cs.toSafe(c$)+"'");};}(cA.FailWith))("Tree.getNode    ");},function(){return(function(c_){return function(c$){return c_("Incomplete hole '"+cs.toSafe(c$)+"'");};}(cA.FailWith))("Tree.getPath    ");},function(){return function(){return(function(c_){return function(c$){return c_("Incomplete hole '"+cs.toSafe(c$)+"'");};}(cA.FailWith))("Tree.setChildren");};});};cg.zx=function(){cn.$cctor();return cn.zx;};cg.mapDefW=function(c_){function c$(da){return da==null?c_:da.$0;}return function(da){return cH.Map(c$,da);};};cg.scrollIntoView=function(c_,c$){cH.Sink(function(da){if(da)c$.scrollIntoViewIfNeeded();},c_);};ci.DragNone={$:0};ch.isDragForm=function(c_,c$){return ch.getDragFormO(c_,c$)!=null;};ch.getDragNIdO=function(c_){var c$;return ch.drag().$==1&&(!cB.Equals(ch.drag().$0,c_)&&(c$=ch.drag().$0,true))?{$:1,$0:c$}:null;};ch.getDragFormO=function(c_,c$){var da,db,dc;return ch.drag().$==2&&((db=ch.drag().$1,(dc=ch.drag().$0,!cB.Equals(c$,db.forId)&&cB.Equals(dc,c_)))&&(da=[ch.drag().$0,ch.drag().$1],true))?{$:1,$0:da[1]}:null;};ch.setDragForm=function(c_,c$){ch.set_drag({$:2,$0:c_,$1:c$});};ch.setDragNode=function(c_){ch.set_drag({$:1,$0:c_});};ch.setDragNone=function(){ch.set_drag(ci.DragNone);};ch.drag=function(){cn.$cctor();return cn.drag;};ch.set_drag=function(c_){cn.$cctor();cn.drag=c_;};cj.tableDimensions$2974$48=function(c_){return function(){(cf.processor())({$:19,$0:c_});};};cj.tableDimensions$2973$48=function(c_){return function(){(cf.processor())({$:18,$0:c_});};};cj.tableDimensions=function(){var c_,c$,da,db,dc;return(c_=(c$=(da=cf.model().dimensions,R.docLensMapView(bT.filterSort(cj.dtypes()),function(dd,de){var df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq;function dr(ds){return cC.string(ds,{$:1,$0:2},null);}return(df=(dg=(dh=(di=cL.Lens(de,function(ds){return ds.dimFreeze;},function(ds,dt){return bw.New(ds.dimId,ds.dimName,ds.dimPrefix,ds.dimOrder,ds.dimExclude,dt,ds.dimType,ds.defaultElm,ds.dimElements,ds.dimAttributes,ds.isCalcDim);}),(dj=cL.Lens(de,function(ds){return ds.dimExclude;},function(ds,dt){return bw.New(ds.dimId,ds.dimName,ds.dimPrefix,ds.dimOrder,dt,ds.dimFreeze,ds.dimType,ds.defaultElm,ds.dimElements,ds.dimAttributes,ds.isCalcDim);}),(dk=cL.Lens(cL.Lens(de,function(ds){return ds.dimType;},function(ds,dt){return bw.New(ds.dimId,ds.dimName,ds.dimPrefix,ds.dimOrder,ds.dimExclude,ds.dimFreeze,dt,ds.defaultElm,ds.dimElements,ds.dimAttributes,ds.isCalcDim);}),(dl=function(ds){return function(dt){return ds(co.p$1(dt));};}(a.id),function(ds){return dr(dl(ds));}),function(ds,dt){return dt==="DataType"?bh.DtDataType:dt==="Time"?bh.DtTime:dt==="Version"?bh.DtVersion:bh.DtOther;}),(dm=cL.Lens(de,function(ds){return ds.dimOrder;},function(ds,dt){return bw.New(ds.dimId,ds.dimName,ds.dimPrefix,dt,ds.dimExclude,ds.dimFreeze,ds.dimType,ds.defaultElm,ds.dimElements,ds.dimAttributes,ds.isCalcDim);}),(dn=cL.Lens(de,function(ds){return ds.dimPrefix;},function(ds,dt){return bw.New(ds.dimId,ds.dimName,dt,ds.dimOrder,ds.dimExclude,ds.dimFreeze,ds.dimType,ds.defaultElm,ds.dimElements,ds.dimAttributes,ds.isCalcDim);}),(_do=cL.Lens(de,function(ds){return ds.dimName;},function(ds,dt){return bw.New(ds.dimId,dt,ds.dimPrefix,ds.dimOrder,ds.dimExclude,ds.dimFreeze,ds.dimType,ds.defaultElm,ds.dimElements,ds.dimAttributes,ds.isCalcDim);}),cY.Make().WithHole({$:8,$0:"name",$1:_do})).WithHole({$:8,$0:"abbreviation",$1:dn})).WithHole({$:8,$0:"order",$1:dm})).WithHole({$:8,$0:"type",$1:dk})).WithHole({$:9,$0:"excludename",$1:dj})).WithHole({$:9,$0:"includefreeze",$1:di})),dh.WithHole(cZ.EventQ2(dh.k,"remove",function(){return dh.i;},function(){(cf.processor())({$:18,$0:dd});}))),dg.WithHole(cZ.EventQ2(dg.k,"select",function(){return dg.i;},function(){(cf.processor())({$:19,$0:dd});}))),(dp=cZ.CompleteHoles(df.k,df.h,[["name",0],["abbreviation",0],["order",0],["type",0],["excludename",2],["includefreeze",2]]),(dq=new c0.New(dp[1],cp.dimensionrow(dp[0])),(df.i=dq,dq)))).get_Doc();},da)),cY.Make().WithHole({$:0,$0:"tbody",$1:c$})),(db=cZ.CompleteHoles(c_.k,c_.h,[]),(dc=new c0.New(db[1],cp.dimensiontable(db[0])),(c_.i=dc,dc)))).get_Doc();};cj.dtypes=function(){cn.$cctor();return cn.dtypes$1;};ck.tableCalculations=function(){var c_,c$,da,db;return(c_=(c$=cK.Convert(function(dc){return ck.rowTreeNode(dc[0],dc[1],dc[2]);},cH.Map(function(dc){function dd(de,df){return[de.id(),b7.fromNode(de).element,df];}return cu.map(function(de){return dd(de[0],de[1]);},cg.runEff(M.listNodes(0,cu.map(b7.treenode,dc))));},cf.model().treeHierarchy.get_View())),cY.Make().WithHole({$:0,$0:"tbody",$1:c$})),(da=cZ.CompleteHoles(c_.k,c_.h,[]),(db=new c0.New(da[1],cp.calculationtable(da[0])),(c_.i=db,db)))).get_Doc();};ck.rowTreeNode$3051$39=function(c_){return function(c$){cg.scrollIntoView(c_,c$);};};ck.rowTreeNode$3049$39=function(c_){return function(c$){var da;c$.Event.preventDefault();da=ch.getDragNIdO(c_);(h.iter(function(db){(cf.processor())({$:16,$0:true,$1:db,$2:c_});}))(da);};};ck.rowTreeNode$3048$39=function(c_){return function(c$){if(ch.getDragNIdO(c_)!=null)c$.Event.preventDefault();};};ck.rowTreeNode$3047$39=function(c_){return function(c$){ch.setDragNode(c_);c$.Event.stopPropagation();};};ck.rowTreeNode$3046$39=function(c_){return function(){cH.Get(h.iter(function(c$){(cf.processor())({$:14,$0:!c$.expanded,$1:c$.nid});}),c_);};};ck.rowTreeNode$3045$39=function(c_){return function(){(cf.processor())({$:13,$0:c_});};};ck.rowTreeNode$3044$39=function(c_){return function(){(cf.processor())({$:2,$0:c_});};};ck.rowTreeNode$3030$39=function(c_){return function(c$){cg.scrollIntoView(c_,c$);};};ck.rowTreeNode$3028$39=function(c_){return function(c$){var da;c$.Event.preventDefault();da=ch.getDragNIdO(c_);(h.iter(function(db){(cf.processor())({$:16,$0:true,$1:db,$2:c_});}))(da);};};ck.rowTreeNode$3027$39=function(c_){return function(c$){if(ch.getDragNIdO(c_)!=null)c$.Event.preventDefault();};};ck.rowTreeNode$3026$39=function(c_){return function(c$){ch.setDragNode(c_);c$.Event.stopPropagation();};};ck.rowTreeNode$3024$39=function(c_,c$){return function(){cH.Get(function(da){if(!da)(cf.processor())({$:13,$0:c$});},c_);};};ck.rowTreeNode$3023$39=function(c_){return function(){(cf.processor())({$:7,$0:c_});};};ck.rowTreeNode=function(c_,c$,da){var db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO;db=(function(dP){return function(dQ){return dP(a.String(dQ)+"em");};}(a.id))(da);dc=cH.Map(function(dP){return ce.isNodeSelected(c_,dP);},cf.model().selection.get_View());return c$.$==1?(dd=c$.$0,(de=cf.model().totals,R.lensDef(ce.nonTotal(),dd,de),df=(dg=cf.model().totals,R.lensDef(ce.nonTotal(),dd,dg)),dh=cH.Map(function(dP){return cg.runEff(b7.tryFindNodeEf(c_,dP));},cf.model().treeHierarchy.get_View()),di=cH.Map(function(dP){var dQ;dQ=dP==null?null:{$:1,$0:dP.$0.expanded?"-":"+"};return dQ==null?"*":dQ.$0;},dh),(dj=(dk=(dl=(dm=(dn=(_do=(dp=(dq=cL.Lens(df,function(dP){return dP.totOrder;},function(dP,dQ){return bG.New(dP.totId,dP.totName,dQ,dP.totFormat,dP.children);}),(dr=cL.Lens(df,function(dP){return dP.totFormat;},function(dP,dQ){return bG.New(dP.totId,dP.totName,dP.totOrder,dQ,dP.children);}),(ds=cL.Lens(df,function(dP){return dP.totName;},function(dP,dQ){return bG.New(dP.totId,dQ,dP.totOrder,dP.totFormat,dP.children);}),(dt=ce.selectedString("selected",dc),cY.Make().WithHole({$:2,$0:"selectedmark",$1:di}).WithHole({$:2,$0:"selected",$1:dt})).WithHole({$:1,$0:"indent",$1:db}).WithHole({$:8,$0:"totname",$1:ds})).WithHole({$:8,$0:"format",$1:dr})).WithHole({$:8,$0:"ordertot",$1:dq})),dp.WithHole(cZ.EventQ2(dp.k,"remove",function(){return dp.i;},function(){(cf.processor())({$:2,$0:dd});}))),_do.WithHole(cZ.EventQ2(_do.k,"select",function(){return _do.i;},function(){(cf.processor())({$:13,$0:c_});}))),dn.WithHole(cZ.EventQ2(dn.k,"collapse",function(){return dn.i;},function(){cH.Get(h.iter(function(dP){(cf.processor())({$:14,$0:!dP.expanded,$1:dP.nid});}),dh);}))),dm.WithHole(cZ.EventQ2(dm.k,"drag",function(){return dm.i;},function(dP){ch.setDragNode(c_);dP.Event.stopPropagation();}))),dl.WithHole(cZ.EventQ2(dl.k,"dragover",function(){return dl.i;},function(dP){if(ch.getDragNIdO(c_)!=null)dP.Event.preventDefault();}))),dk.WithHole(cZ.EventQ2(dk.k,"drop",function(){return dk.i;},function(dP){var dQ;dP.Event.preventDefault();dQ=ch.getDragNIdO(c_);(h.iter(function(dR){(cf.processor())({$:16,$0:true,$1:dR,$2:c_});}))(dQ);}))).WithHole({$:7,$0:"afterrender",$1:function(dP){cg.scrollIntoView(dc,dP);}}),(du=cZ.CompleteHoles(dj.k,dj.h,[["totname",0],["ordertot",0],["format",0]]),(dv=new c0.New(du[1],cp.totalrow(du[0])),(dj.i=dv,dv)))).get_Doc())):(dw=c$.$0,(dx=(dy=cf.model().calculations,R.lensDef(ce.nonCalculation(),dw,dy)),(dz=cK.Convert(function(dP){return ck.rowFormula(c_,dx,dP);},cH.Map(function(dP){return cu.map(function(dQ){return dQ.forId;},dP.calFormulas);},dx.get_View())),(dA=(dB=(dC=(dD=(dE=(dF=(dG=cg.calcTypeV(dx),(dH=cL.Lens(dx,function(dP){return dP.calOrder;},function(dP,dQ){return bF.New(dP.calId,dP.calName,dP.calDescription,dQ,dP.format,dP.isText,dP.isInput,dP.isBalance,dP.calDims,dP.calFormulas,dP.cubIdO,dP.properties);}),(dI=cL.Lens(dx,function(dP){return dP.isBalance;},function(dP,dQ){return bF.New(dP.calId,dP.calName,dP.calDescription,dP.calOrder,dP.format,dP.isText,dP.isInput,dQ,dP.calDims,dP.calFormulas,dP.cubIdO,dP.properties);}),(dJ=cL.Lens(dx,function(dP){return dP.isText;},function(dP,dQ){return bF.New(dP.calId,dP.calName,dP.calDescription,dP.calOrder,dP.format,dQ,dP.isInput,dP.isBalance,dP.calDims,dP.calFormulas,dP.cubIdO,dP.properties);}),(dK=cL.Lens(dx,function(dP){return dP.format;},function(dP,dQ){return bF.New(dP.calId,dP.calName,dP.calDescription,dP.calOrder,dQ,dP.isText,dP.isInput,dP.isBalance,dP.calDims,dP.calFormulas,dP.cubIdO,dP.properties);}),(dL=cL.Lens(dx,function(dP){return dP.calName;},function(dP,dQ){return bF.New(dP.calId,dQ,dP.calDescription,dP.calOrder,dP.format,dP.isText,dP.isInput,dP.isBalance,dP.calDims,dP.calFormulas,dP.cubIdO,dP.properties);}),(dM=ce.selectedString("selected",dc),cY.Make().WithHole({$:1,$0:"selectedmark",$1:""}).WithHole({$:2,$0:"selected",$1:dM})).WithHole({$:1,$0:"indent",$1:db}).WithHole({$:8,$0:"calcname",$1:dL})).WithHole({$:8,$0:"format",$1:dK})).WithHole({$:9,$0:"istext",$1:dJ})).WithHole({$:9,$0:"isbalance",$1:dI})).WithHole({$:8,$0:"ordercalc",$1:dH})).WithHole({$:8,$0:"calctype",$1:dG})),dF.WithHole(cZ.EventQ2(dF.k,"remove",function(){return dF.i;},function(){(cf.processor())({$:7,$0:dw});}))),dE.WithHole(cZ.EventQ2(dE.k,"select",function(){return dE.i;},function(){cH.Get(function(dP){if(!dP)(cf.processor())({$:13,$0:c_});},dc);}))).WithHole({$:0,$0:"formulas",$1:dz}),dD.WithHole(cZ.EventQ2(dD.k,"drag",function(){return dD.i;},function(dP){ch.setDragNode(c_);dP.Event.stopPropagation();}))),dC.WithHole(cZ.EventQ2(dC.k,"dragover",function(){return dC.i;},function(dP){if(ch.getDragNIdO(c_)!=null)dP.Event.preventDefault();}))),dB.WithHole(cZ.EventQ2(dB.k,"drop",function(){return dB.i;},function(dP){var dQ;dP.Event.preventDefault();dQ=ch.getDragNIdO(c_);(h.iter(function(dR){(cf.processor())({$:16,$0:true,$1:dR,$2:c_});}))(dQ);}))).WithHole({$:7,$0:"afterrender",$1:function(dP){cg.scrollIntoView(dc,dP);}}),(dN=cZ.CompleteHoles(dA.k,dA.h,[["calcname",0],["calctype",0],["ordercalc",0],["format",0],["istext",2],["isbalance",2]]),(dO=new c0.New(dN[1],cp.calculationrow(dN[0])),(dA.i=dO,dO)))).get_Doc())));};ck.rowFormula$3005$35=function(c_){return function(c$){cg.scrollIntoView(c_,c$);};};ck.rowFormula$3003$35=function(c_,c$,da){return function(db){var dc,dd,de;function df(dh){return dh.forId;}function dg(dh){da.Set(dh);}db.Event.preventDefault();dc=ch.getDragFormO(c_,c$);(h.iter((dd=(de=da.Get(),function(dh){var di,dj,dk,dl;function dm(dn){return cB.Equals(c$,dn);}return cw.ofSeq(cu.collect(a.id,(di=cw.ofSeq(cu.filter((dj=(dk=df(dh),function(dn){return!cB.Equals(dk,dn);}),function(dn){return dj(df(dn));}),de)),(dl=cw.splitAt(cw.findIndex(function(dn){return dm(df(dn));},di),di),cv.ofArray([dl[0],[dh],dl[1]])))));}),function(dh){return dg(dd(dh));})))(dc);};};ck.rowFormula$3002$35=function(c_,c$){return function(da){if(ch.isDragForm(c_,c$))da.Event.preventDefault();};};ck.rowFormula$3001$35=function(c_,c$){return function(da){ch.setDragForm(c_,c$.Get());da.Event.stopPropagation();};};ck.rowFormula$3000$35=function(c_,c$){return function(){(cf.processor())({$:12,$0:c_,$1:c$});};};ck.rowFormula$2999$35=function(c_){return function(){(cf.processor())({$:10,$0:c_});};};ck.rowFormula=function(c_,c$,da){var db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr;db=c$.Get().calId;dc=cL.Lens(c$,function(ds){return ds.calFormulas;},function(ds,dt){return bF.New(ds.calId,ds.calName,ds.calDescription,ds.calOrder,ds.format,ds.isText,ds.isInput,ds.isBalance,ds.calDims,dt,ds.cubIdO,ds.properties);});dd=cg.lensForm(c$,function(){return{$:1,$0:da};});de=cH.Map(function(ds){return ce.isNodeFormSelected(da,c_,ds);},cf.model().selection.get_View());df=cH.Map2(function(ds,dt){return ct.concat(", ",cu.map(function(du){var dv;return(((cr.Curried3(function(dw,dx,dy){return dw(cs.toSafe(dx)+":"+cs.toSafe(dy));}))(a.id))((dv=cu.tryFind(function(dw){return cB.Equals(dw.dimId,du.K);},dt),dv!=null&&dv.$==1?dv.$0.dimName:"")))(du.V);},ds.forDestDecl));},dd.get_View(),cf.model().dimensions.v);return(dg=(dh=(di=(dj=(dk=(dl=(dm=cg.formTypeV(dd),(dn=cL.Lens(dd,function(ds){return ds.forText;},function(ds,dt){return bE.New(ds.forId,ds.forDestDecl,ds.forDestination,ds.forDescription,dt,ds.forExpression,ds.forType,ds.forOrder);}),(_do=ce.selectedString("selected",de),(dp=ce.selectedString(">",de),cY.Make().WithHole({$:2,$0:"selectedmark",$1:dp})).WithHole({$:2,$0:"selected",$1:_do})).WithHole({$:2,$0:"formulafor",$1:df}).WithHole({$:8,$0:"formula",$1:dn})).WithHole({$:8,$0:"formtype",$1:dm})),dl.WithHole(cZ.EventQ2(dl.k,"remove",function(){return dl.i;},function(){(cf.processor())({$:10,$0:da});}))),dk.WithHole(cZ.EventQ2(dk.k,"select",function(){return dk.i;},function(){(cf.processor())({$:12,$0:da,$1:c_});}))),dj.WithHole(cZ.EventQ2(dj.k,"drag",function(){return dj.i;},function(ds){ch.setDragForm(db,dd.Get());ds.Event.stopPropagation();}))),di.WithHole(cZ.EventQ2(di.k,"dragover",function(){return di.i;},function(ds){if(ch.isDragForm(db,da))ds.Event.preventDefault();}))),dh.WithHole(cZ.EventQ2(dh.k,"drop",function(){return dh.i;},function(ds){var dt,du,dv;function dw(dy){return dy.forId;}function dx(dy){dc.Set(dy);}ds.Event.preventDefault();dt=ch.getDragFormO(db,da);(h.iter((du=(dv=dc.Get(),function(dy){var dz,dA,dB,dC;function dD(dE){return cB.Equals(da,dE);}return cw.ofSeq(cu.collect(a.id,(dz=cw.ofSeq(cu.filter((dA=(dB=dw(dy),function(dE){return!cB.Equals(dB,dE);}),function(dE){return dA(dw(dE));}),dv)),(dC=cw.splitAt(cw.findIndex(function(dE){return dD(dw(dE));},dz),dz),cv.ofArray([dC[0],[dy],dC[1]])))));}),function(dy){return dx(du(dy));})))(dt);}))).WithHole({$:7,$0:"afterrender",$1:function(ds){cg.scrollIntoView(de,ds);}}),(dq=cZ.CompleteHoles(dg.k,dg.h,[["formtype",0],["formula",0]]),(dr=new c0.New(dq[1],cp.formularow(dq[0])),(dg.i=dr,dr)))).get_Doc();};cl.mainProgram=function(){var c_,c$,da,db,dc,dd;c1.addPlugIn(c2.New("RuleEditor",[c1.newVar("fileName",cf.model().fileName),c1.newVar("Server",cf.model().server)],[],[c1.newDoc("globalDefs",c3.Create(b1.globalDefs)),c1.newDoc("Dimensions",c3.Create(cj.tableDimensions)),c1.newDoc("Calculations",c3.Create(ck.tableCalculations))],[c1.newActF("LoadFile",{$:1,$0:function(de){(cf.processor())({$:27,$0:de});},$1:"FileElement"}),c1.newActF("SaveAs",{$:1,$0:function(de){(cf.processor())({$:26,$0:de});},$1:"FileElement"}),c1.newAct("AddDimension",function(){(cf.processor())(cd.AddDimension);}),c1.newAct("AddCalculation",function(){(cf.processor())(cd.AddCalculation);}),c1.newAct("AddTotal",function(){(cf.processor())(cd.AddTotal);}),c1.newAct("AddDimension",function(){(cf.processor())(cd.AddDimension);})],[]));c4.addLayout((c_=(c$=self.document.getElementById("GlobalLayout"),cB.Equals(c$,null)?"\r\n                    menuEditor       horizontal  65       menuLogo                  editorMessages\r\n                    double           horizontal  0-50-100 AppFramework.AppFwkClient menuEditor\r\n                    menuLogo         vertical    350      logo                      menu\r\n                    logo             span       \"margin:0; color:gray; font-size: 55px; font-weight:530\" \"F# Station\"\r\n                    editorMessages   horizontal 10-83-100 editorButtons             messages\r\n                    messages         vertical   0-50-100  messagesLeft              messagesRight\r\n                    editorButtons    vertical -200 snippetsSnippet buttons\r\n                    buttons div      \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\" btnSaveAs none x btnAddSnippet btnDeleteSnippet btnIndentIn btnIndentOut none x btnRunFS none x btnAbortFsi\r\n                    snippetsSnippet  vertical   0-20-100  snippets                  editorProperties\r\n                    snippets         horizontal 20        \"${FSharpStation.CurrentPath}\" FSharpStation.Snippets\r\n                    editorProperties vertical   0-100-100 snippet                   properties\r\n                    properties       div        \"\"        FSharpStation.Properties\r\n                    snippet          horizontal 35        Name                      FSharpStation.editor\r\n                    menu             span  \"\" btnLoad btnImport\r\n        \r\n                    btnSaveAs        button FSharpStation.SaveAs         \"class=btn ${FSharpStation.SaveNeeded}\" \"Save as...    \"\r\n                    btnAddDimension  button RuleEditor.AddDimension      \"\"                  \"Add Dimension \"\r\n                    btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\r\n                    btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\r\n                    btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\r\n                    btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\r\n                    btnAbortFsi      button FSharpStation.AbortFsi       \"\"                  \"Abort Fsi     \"\r\n        \r\n                    messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\r\n                    messagesRight    wcomp-tabstrip                      \"\"                  Parser\r\n        \r\n                    Output           textarea  FSharpStation.Output      \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \r\n                    FsCode           textarea  FSharpStation.FsCode      \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \r\n                    Parser           textarea  FSharpStation.Parser      \"tabname=Parser ; placeholder=Parser messages; dblclick=${FSharpStation.JumpTo} ; spellcheck=false\" \r\n                    Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\r\n                    btnLoad          Doc       InputFile                 \"\"     \"Load File...\" FSharpStation.LoadFile  FileName\r\n                    btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\r\n                    FileName         div                                 \"class=form-control\"  FSharpStation.fileName\r\n                   ":c$.textContent),c4.newLyt(cl.RuleEditorLyt(),c_)));da=(db=null,(dc=cl.RuleEditorLyt(),db==null?dc:db.$0));c1.mainDocV().Set(da);return cK.Async((dd=null,cx.Delay(function(){return cx.Return(c1.getMainDoc().f());})));};cl.scrollToBottom=function(c_,c$){var da;cx.Start((da=null,cx.Delay(function(){return cx.Bind(cx.Sleep(100),function(){c_.scrollTop=c_.scrollHeight;return cx.Zero();});})),null);};cl.RuleEditorLyt=function(){cn.$cctor();return cn.RuleEditorLyt;};cm.updateModel=function(c_,c$){if(cm.updateModelR(c_,c$))(ce.refreshNow())();};cm.updateModelR=function(c_,c$){var da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do;return c$.$==3?(da=bV.New(),(c_.calculations.Append(da),db=b7.newNodeCalc(da.calId),c_.treeHierarchy.Set([db].concat(c_.treeHierarchy.Get())),cm.updateModelR(c_,{$:13,$0:db.nid}))):c$.$==0?(dc=bW.New(),(c_.totals.Append(dc),dd=b7.newNodeTot(dc.totId),c_.treeHierarchy.Set([dd].concat(c_.treeHierarchy.Get())),cm.updateModelR(c_,{$:13,$0:dd.nid}))):c$.$==9?(de=c$.$0,cB.Equals(de,ce.nonCalculation().calId)?false:(df=bE.New(new bs({$:0,$0:cO.NewGuid()}),new cQ.New([]),cv.T.Empty,"","",bB.ExiStet,bD.ForBase,""),(dg=c_.calculations.TryFindByKey(de),(h.iter(function(dp){c_.calculations.Append(bF.New(dp.calId,dp.calName,dp.calDescription,dp.calOrder,dp.format,dp.isText,dp.isInput,dp.isBalance,dp.calDims,dp.calFormulas.concat([df]),dp.cubIdO,dp.properties));}))(dg),dh=(di=cg.runEff((dj=c_.treeHierarchy.Get(),b7.tryFindSelNodeEf(c_.selection.Get(),dj))),di==null?null:{$:1,$0:cm.updateModelR(c_,{$:12,$0:df.forId,$1:di.$0.nid})}),dh==null||dh.$0))):c$.$==17?(dk=bT.New(""),(c_.dimensions.Append(dk),cm.updateModelR(c_,{$:19,$0:dk.dimId}))):c$.$==7?(dl=c$.$0,(dm=null,cB.Equals(c_.selection.Get(),dm)?void 0:c_.selection.Set(dm),c_.calculations.RemoveByKey(dl),cu.iter((dn=c_.totals,function(dp){dn.Append(dp);}),cu.choose(function(dp){var dq;function dr(ds,dt){return cB.Equals(dt,{$:0,$0:dl});}dq=cw.partition(function(ds){return dr(ds[0],ds[1]);},dp.children);return cw.length(dq[0])===0?null:{$:1,$0:bG.New(dp.totId,dp.totName,dp.totOrder,dp.totFormat,dq[1])};},c_.totals["var"].Get())),ce.setHierarchy(c_,cg.runEff((_do=c_.treeHierarchy.Get(),b7.removeNodesEf(b7.forCId(function(dp){return cB.Equals(dl,dp);}),_do)))),true)):((function(dp){return function(dq){return dp("Msg not implemented: "+co.p$2(dq));};}(function(dp){cF.log(dp);}))(c$),false);};b1.globalDefs=function(){return V.render(b8.monacoNew(cf.model().globalDefs,null,null,null));};cn.$cctor=function(){var c_,c$,da,db,dc,dd,de;cn.$cctor=a.ignore;cn.rtn=function(df){return[df];};cn.result=new m.New();cn.result$1=l.result();cn.fusion=new r.New();cn.eff=new x.New();cn.fusion$1=new F.New();cn.parseDateO=H.tryParseWith$1(function(df){var dg,dh;dg=0;return[(dh=c5.TryParse(df),dh!=null&&dh.$==1&&(dg=dh.$0,true)),dg];});cn.parseIntO=H.tryParseWith$1(function(df){var dg;dg=0;return[c6.TryParseInt32(df,{get:function(){return dg;},set:function(dh){dg=dh;}}),dg];});cn.parseSingleO=H.tryParseWith$1(function(df){var dg,dh;dg=0;return[(dh=a.Number(df),a.isNaN(dh)?false:(dg=dh,true)),dg];});cn.parseDoubleO=H.tryParseWith$1(function(df){var dg,dh;dg=0;return[(dh=a.Number(df),a.isNaN(dh)?false:(dg=dh,true)),dg];});cn.parseGuidO=H.tryParseWith$1(function(df){var dg;dg=null;return[cO.TryParse(df,{get:function(){return dg;},set:function(dh){dg=dh;}}),dg];});cn["|Date|_|"]=H.parseDateO$1();cn["|Int|_|"]=H.parseIntO$1();cn["|Single|_|"]=H.parseSingleO$1();cn["|Double|_|"]=H.parseDoubleO$1();cn["|Guid|_|"]=H.parseGuidO$1();cn.counter=1;cn.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";cn.observers=cv.T.Empty;cn.loader=(c_=null,cx.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cx.Bind(cx.FromContinuations(function(df,dg){return self.require(["vs/editor/editor.main"],df,dg);}),function(){return cx.Return(null);});}));cn.MessageBrokerId="<MessageBroker>";cn.MessageBrokerAddress=new $({$:0,$0:_.MessageBrokerId()});cn.Xmodel=bL.New(new bl({$:0,$0:cO.NewGuid()}),"local\\Budget","Actual",[],[],[]);cn.forAll=bC.New(new cQ.New([]),null,null);cn.getDimO=function(df){return function(dg){return bP.getDimO(df,dg);};};cn.getDimR=function(df){return function(dg){return bP.getDimR(df,dg);};};cn.getCubeO=function(df){return function(dg){return bP.getCubeO(df,dg);};};cn.cubePrefix="Z";cn.measurePrefix="M";cn.rootdir="..\\website";cn.TemplatesFileName="..\\website"+"\\Templates.html";((function(df){return function(dg){return df(cs.toSafe(dg));};}(function(df){cF.log(df);}))("..\\website\\Templates.html"));cn.annotationsV=cL.Create$1("Err (1, 7) - (1, 12): \"This shows over there as an error\".\nWarn (2, 7) - (2, 12): \"This shows over there as a warning\".\nInfo (3, 7) - (3, 12): \"This shows over there as information\".\nHint (4, 7) - (4, 12): \"This shows over there as a hint\".");cn.nonTotal=(c$=bW.New(),bG.New(new br({$:0,$0:"00000000-0000-0000-0000-000000000000"}),c$.totName,c$.totOrder,c$.totFormat,c$.children));cn.nonCalculation=(da=bV.New(),bF.New(new bq({$:0,$0:"00000000-0000-0000-0000-000000000000"}),da.calName,da.calDescription,da.calOrder,da.format,da.isText,da.isInput,da.isBalance,da.calDims,da.calFormulas,da.cubIdO,da.properties));cn.nonFormula=(db=bE.New(new bs({$:0,$0:cO.NewGuid()}),new cQ.New([]),cv.T.Empty,"","",bB.ExiStet,bD.ForBase,""),bE.New(new bs({$:0,$0:"00000000-0000-0000-0000-000000000000"}),db.forDestDecl,db.forDestination,db.forDescription,db.forText,db.forExpression,db.forType,db.forOrder));cn.nonTotalV=cL.Lens(cL.Create$1(ce.nonFormula()),a.id,a.id);cn.nonCalculationV=cL.Lens(cL.Create$1(ce.nonCalculation()),a.id,a.id);cn.nonFormulaV=cL.Lens(cL.Create$1(ce.nonFormula()),a.id,a.id);dd=(dc=cL.Create$1(),[dc.get_View(),function(){dc.Set(null);}]);cn.refreshView=dd[0];cn.refreshNow=dd[1];cn.model=cc.New(cL.Create$1([]),c7.Create(function(df){return df.calId;},[]),c7.Create(function(df){return df.totId;},[]),c7.Create(function(df){return df.dimId;},[]),c7.Create(function(df){return df.cubId;},[]),cL.Create$1(""),cL.Create$1(""),cL.Create$1(null),cL.Create$1(null),cL.Create$1(null),c7.Create(a.id,[]),cL.Create$1("Z"),cL.Create$1("M"),cL.Create$1(""),cL.Create$1(""),cL.Create$1(""),cL.Create$1("NewFile.json"),cL.Create$1(cb.New()));cn.processor=a.ignore;cn.zx=b5.New({$:0,$0:"00000000-0000-0000-0000-000000000000"},false,{$:0,$0:new bq({$:0,$0:"00000000-0000-0000-0000-000000000000"})},[],b4.Add);cn.currentCalcOW=(de=cH.get_Do(),cH.Bind(function(df){return cH.Bind(function(dg){return cH.Bind(function(dh){var di,dj,dk,dl;return cH.Const((di=(dj=cg.runEff(b7.tryFindSelNodeEf(dg,df)),dj==null?null:(dk=dj.$0.element,dk.$==0?{$:1,$0:dk.$0}:null)),di==null?null:(dl=di.$0,cu.tryFind(function(dm){return cB.Equals(dm.calId,dl);},dh))));},cf.model().calculations.v);},cf.model().selection.get_View());},cf.model().treeHierarchy.get_View()));cn.currentCalcV=new cJ.New((cg.mapDefW(ce.nonCalculation()))(cg.currentCalcOW()),function(df){cg.setCurrentCalc(df);});cn.currentFormV=cg.lensForm(cg.currentCalcV(),function(){var df;df=cf.model().selection.Get();return df==null?null:df.$0[1];});cn.dtypes=cv.ofArray([bh.DtDataType,bh.DtTime,bh.DtVersion,bh.DtOther]);cn.drag=ci.DragNone;cn.dtypes$1=cv.ofArray([bh.DtDataType,bh.DtTime,bh.DtVersion,bh.DtOther]);cn.RuleEditorLyt="RuleEditorLyt";cf.set_processor(function(df){cm.updateModel(cf.model(),df);});};co.p=function(c_){return c_.$==2?"ForAll":c_.$==1?"ForConsolidated":"ForBase";};cp.dimensiontable=function(c_){c9.LoadLocalTemplates("templates");return c_?c9.NamedTemplate("templates",{$:1,$0:"dimensiontable"},c_):void 0;};cp.dimensionrow=function(c_){c9.LoadLocalTemplates("templates");return c_?c9.NamedTemplate("templates",{$:1,$0:"dimensionrow"},c_):void 0;};co.p$1=function(c_){return c_.$==6?"DtOther":c_.$==5?"DtMeasure":c_.$==4?"DtCalc":c_.$==3?"DtTCalc":c_.$==2?"DtVersion":c_.$==1?"DtTime":"DtDataType";};cp.calculationtable=function(c_){c9.LoadLocalTemplates("templates");return c_?c9.NamedTemplate("templates",{$:1,$0:"calculationtable"},c_):void 0;};cp.calculationrow=function(c_){c9.LoadLocalTemplates("templates");return c_?c9.NamedTemplate("templates",{$:1,$0:"calculationrow"},c_):void 0;};cp.totalrow=function(c_){c9.LoadLocalTemplates("templates");return c_?c9.NamedTemplate("templates",{$:1,$0:"totalrow"},c_):void 0;};cp.formularow=function(c_){c9.LoadLocalTemplates("templates");return c_?c9.NamedTemplate("templates",{$:1,$0:"formularow"},c_):void 0;};co.p$2=function(c_){return c_.$==28?"NoOp":c_.$==27?"LoadTextFile "+cs.prettyPrint(c_.$0):c_.$==26?"SaveTextFile "+cs.prettyPrint(c_.$0):c_.$==25?"SetForDest ("+co.p$5(c_.$0)+", "+co.p$6(c_.$1)+", "+co.p$8(c_.$2)+", "+cs.prettyPrint(c_.$3)+")":c_.$==24?"RemoveForDest ("+co.p$5(c_.$0)+", "+co.p$6(c_.$1)+", "+co.p$8(c_.$2)+")":c_.$==23?"AddCalcDim ("+co.p$5(c_.$0)+", "+co.p$8(c_.$1)+")":c_.$==22?"RemoveCalcDim ("+co.p$5(c_.$0)+", "+co.p$8(c_.$1)+")":c_.$==21?"RemoveFormDim ("+co.p$6(c_.$0)+", "+co.p$8(c_.$1)+")":c_.$==20?"AddFormDim ("+co.p$6(c_.$0)+", "+co.p$8(c_.$1)+", "+cs.prettyPrint(c_.$2)+")":c_.$==19?"SelectDimension "+co.p$8(c_.$0):c_.$==18?"RemoveDimension "+co.p$8(c_.$0):c_.$==17?"AddDimension":c_.$==16?"MoveNode ("+cs.prettyPrint(c_.$0)+", "+co.p$7(c_.$1)+", "+co.p$7(c_.$2)+")":c_.$==15?"IndentNode ("+cs.prettyPrint(c_.$0)+", "+co.p$7(c_.$1)+")":c_.$==14?"ExpandNode ("+cs.prettyPrint(c_.$0)+", "+co.p$7(c_.$1)+")":c_.$==13?"SelectNode "+co.p$7(c_.$0):c_.$==12?"SelectFormNode ("+co.p$6(c_.$0)+", "+co.p$7(c_.$1)+")":c_.$==11?"SelectFormula "+co.p$6(c_.$0):c_.$==10?"RemoveFormula "+co.p$6(c_.$0):c_.$==9?"AddFormula "+co.p$5(c_.$0):c_.$==8?"SelectCalculation "+co.p$5(c_.$0):c_.$==7?"RemoveCalculation "+co.p$5(c_.$0):c_.$==6?"AddCube ("+cs.prettyPrint(c_.$0)+", "+cs.prettyPrint(c_.$1)+")":c_.$==5?"RenameCube ("+co.p$4(c_.$0)+", "+cs.prettyPrint(c_.$1)+")":c_.$==4?"RemoveCube "+co.p$4(c_.$0):c_.$==3?"AddCalculation":c_.$==2?"RemoveTotal "+co.p$3(c_.$0):c_.$==1?"SelectTotal "+co.p$3(c_.$0):"AddTotal";};co.p$7=function(c_){return"TreeNodeId "+cs.prettyPrint(c_.$0);};co.p$8=function(c_){return"DimId "+cs.prettyPrint(c_.$0);};co.p$6=function(c_){return"ForId "+cs.prettyPrint(c_.$0);};co.p$5=function(c_){return"CalId "+cs.prettyPrint(c_.$0);};co.p$4=function(c_){return"CubId "+cs.prettyPrint(c_.$0);};co.p$3=function(c_){return"TotId "+cs.prettyPrint(c_.$0);};}());

//# sourceMappingURL=RuleEditor.min.map
#nowarn "3242"
////-d:FSharpStation1614783634688 -d:WEBSHARPER
//#I @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1"
//#I @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\Facades"
//#I @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461"
//#I @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461"
//#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\System.Core.dll"
//#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\System.dll"
//#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\System.Web.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Core.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Core.JavaScript.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Collections.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.InterfaceGenerator.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Main.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.JQuery.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.JavaScript.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Web.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Sitelets.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Control.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\HtmlAgilityPack.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.Templating.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.Templating.Runtime.dll"
//#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.Templating.Common.dll"
//#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\mscorlib.dll"
//#nowarn "3242"
/// Root namespace for all code
//#define FSharpStation1614783634688
#if !NOFSROOT
#if INTERACTIVE
module FsRoot   =
#else
#if DLL
namespace FsRootDll
#else
namespace FsRoot
#endif
#endif
#endif
    #if !NETSTANDARD20
    
    //#I @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1"
    //#I @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\Facades"
    ////#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\mscorlib.dll"
    //#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\System.Core.dll"
    //#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\System.dll"
    //#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\System.Web.dll"
    
    #if WEBSHARPER
    #if WEBSHARPER47
    //#I @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461"
    //#I @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper.UI\lib\net461"
    
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Core.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Core.JavaScript.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Collections.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.InterfaceGenerator.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Main.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.JQuery.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.JavaScript.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Web.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Sitelets.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper\lib\net461\WebSharper.Control.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper.UI\lib\net461\HtmlAgilityPack.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper.UI\lib\net461\WebSharper.UI.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper.UI\lib\net461\WebSharper.UI.Templating.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper.UI\lib\net461\WebSharper.UI.Templating.Runtime.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper47\WebSharper.UI\lib\net461\WebSharper.UI.Templating.Common.dll"
    #else
    //#I @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461"
    //#I @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461"
    
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Core.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Core.JavaScript.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Collections.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.InterfaceGenerator.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Main.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.JQuery.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.JavaScript.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Web.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Sitelets.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper\lib\net461\WebSharper.Control.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\HtmlAgilityPack.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.Templating.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.Templating.Runtime.dll"
    //#r @"D:\Abe\CIPHERWorkspace\FSharpStation\packages\WebSharper.UI\lib\net461\WebSharper.UI.Templating.Common.dll"
    #endif
    #endif
    #endif
    #if WEBSHARPER
    //#nowarn "3242" 
    
    open WebSharper
    //open WebSharper.JavaScript
    open WebSharper.UI
    open WebSharper.UI.Client
    type on   = WebSharper.UI.Html.on
    type attr = WebSharper.UI.Html.attr
    #else
    /// dummy WebSharper definition in order to avoid having to use #if WEBSHARPER all the time
    module WebSharper =
        type RpcAttribute() =
            inherit System.Attribute()
            let a = 1
        type JavaScriptAttribute(translate:bool) =
            inherit System.Attribute()
            let a = 1
            new() = JavaScriptAttribute true
        type JavaScriptExportAttribute(translate:bool) =
            inherit System.Attribute()
            let a = 1
            new() = JavaScriptExportAttribute true
        type InlineAttribute(code:string) =
            inherit System.Attribute()
            let a = 1
            new() = InlineAttribute ""
        type DirectAttribute(code:string) =
            inherit System.Attribute()
            let a = 1
    
    open WebSharper
    
    #endif
    
        //#define WEBSHARPER
        
        //#r @"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6.1\mscorlib.dll"
        
        [< JavaScriptExport >]
        module TestingJS =
        
        
            module SuperDoc =
                open WebSharper.UI
            
                type IView = abstract GetView : unit -> View<string>
            
                type SuperDocCtor = SuperDocCtor of (Attr seq -> Doc seq -> Doc) * SuperAttr [] * SuperDoc []
                    with 
                        member this.getSuperDoc() = this |> function
                                SuperDocCtor(f, atts, docs) -> 
                                    SuperDoc(fun () ->  f 
                                                            (atts |> Array.map (fun (SuperAttr sa) -> sa() ))
                                                            (docs |> Array.map (fun (SuperDoc  sd) -> sd() ))
                                    )
                        member this.applyChildren children =
                            children
                            |> Seq.fold (fun state (t:#ITransformSuperDocCtor) -> t.Transform state) this
                        member this.getSuperDoc children = (this.applyChildren children).getSuperDoc()
                        static member New f = SuperDocCtor(f,[||],[||])
            
                and SuperDoc  = 
                    SuperDoc of (unit -> Doc)
                        member this.Transform (SuperDocCtor(f, atts, docs)) = SuperDocCtor(f, atts, Array.append docs (Array.singleton this) )
                        interface ITransformSuperDocCtor with member this.Transform c = this.Transform c
                        member this.T     = this :> ITransformSuperDocCtor
                        member this.Doc() = match this with SuperDoc f -> f()
                        [< Inline >] static member inline ( +  ) (a:SuperDoc, b:     string ) = [| a.T ; (SuperText b).T |]
                        [< Inline >] static member inline ( +  ) (a:SuperDoc, b:View<string>) = [| a.T ; (SuperView b).T |]
                        [< Inline >] static member inline ( +  ) (a:SuperDoc, b:Var< string>) = [| a.T ; (SuperVar  b).T |]
                        [< Inline >] static member inline ( +  ) (a:SuperDoc, b:SuperText   ) = [| a.T ;            b .T |]
                        [< Inline >] static member inline ( +  ) (a:SuperDoc, b:SuperAttr   ) = [| a.T ;            b .T |]
                        [< Inline >] static member inline ( +  ) (a:SuperDoc, b:SuperDoc    ) = [| a.T ;            b .T |]
                        [< Inline >] static member inline ( +  ) (l:ITransformSuperDocCtor [], b:SuperDoc) : ITransformSuperDocCtor [] = Array.append l [| b.T |]
                        [< Inline >] static member inline ( ++ ) (l:ITransformSuperDocCtor [], b:SuperDoc) : ITransformSuperDocCtor [] = Array.append l [| b.T |]
                        [< Inline >] static member inline ( ++ ) (a:SuperDoc, b:_           ) = a + SuperText " " + b
            
                and SuperAttr = 
                    SuperAttr of (unit -> Attr)
                        member this.Transform (SuperDocCtor(f, atts, docs)) = SuperDocCtor(f, Array.append atts (Array.singleton this), docs )
                        interface ITransformSuperDocCtor with member this.Transform c = this.Transform c
                        member this.T = this :> ITransformSuperDocCtor
                        [< Inline >] static member inline ( +  ) (a:SuperAttr, b:     string ) = [| a.T ; (SuperText b).T |]
                        [< Inline >] static member inline ( +  ) (a:SuperAttr, b:View<string>) = [| a.T ; (SuperView b).T |]
                        [< Inline >] static member inline ( +  ) (a:SuperAttr, b:Var< string>) = [| a.T ; (SuperVar  b).T |]
                        [< Inline >] static member inline ( +  ) (a:SuperAttr, b:SuperText   ) = [| a.T ;            b .T |]
                        [< Inline >] static member inline ( +  ) (a:SuperAttr, b:SuperAttr   ) = [| a.T ;            b .T |]
                        [< Inline >] static member inline ( +  ) (a:SuperAttr, b:SuperDoc    ) = [| a.T ;            b .T |]
                        [< Inline >] static member inline ( +  ) (l:ITransformSuperDocCtor[], b:SuperAttr) : ITransformSuperDocCtor[] = Array.append l [| b.T |]
            //            [< Inline >] static member inline ( ++ ) (l:ITransformSuperDocCtor[], b:SuperAttr) : ITransformSuperDocCtor[] = Array.append l [| b.T |]
            //            [< Inline >] static member inline ( ++ ) (a:SuperAttr, b:_           ) = a + SuperText " " + b
            
                and  ITransformSuperDocCtor = abstract Transform: SuperDocCtor -> SuperDocCtor
            
                and SuperText =
                | SuperText of               string 
                | SuperView of          View<string>
                | SuperVar  of          Var< string>
                    member this.Transform (SuperDocCtor(f, atts, docs)) = 
                        SuperDocCtor(f, atts,
                            match this with
                            | SuperText t -> fun () -> t      |> Html.text    
                            | SuperView w -> fun () -> w      |> Html.textView
                            | SuperVar  v -> fun () -> v.View |> Html.textView
                            |> SuperDoc
                            |> Array.singleton
                            |> Array.append docs
                        )
                    member this.T = this :> ITransformSuperDocCtor
                    member this.V =
                        match this with
                        | SuperView w -> Var.Make w ignore
                        | SuperVar  v -> v
                        | SuperText t -> Var.Make (View.Const t) ignore
                    member this.Txt() =
                        match this with
                        | SuperView w -> w                
                        | SuperVar  v -> v.View           
                        | SuperText t -> t                    |> View.Const
                    interface IView                  with member this.GetView  () = this.Txt()
                    interface ITransformSuperDocCtor with member this.Transform c = this.Transform c
                    //member this.Map   f = this.Txt().Map  f |> SuperView
                    //member this.BindW f = this.Txt().Bind f |> SuperView
                    //member this.Bind  f p = (this.Txt().Bind f p).Txt() |> SuperView
                    [< Inline >] static member inline ( +  ) (a:     string , b:SuperText) =           b.Txt()   |> View.Map (fun   b -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:View<string>, b:SuperText) = (a      , b.Txt()) ||> View.Map2(fun a b -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:Var< string>, b:SuperText) = (a.View , b.Txt()) ||> View.Map2(fun a b -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:SuperText, b:     string ) =  a.Txt()            |> View.Map (fun a   -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:SuperText, b:View<string>) = (a.Txt(), b      ) ||> View.Map2(fun a b -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:SuperText, b:Var< string>) = (a.Txt(), b.View ) ||> View.Map2(fun a b -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:SuperText, b:SuperText   ) = (a.Txt(), b.Txt()) ||> View.Map2(fun a b -> a + b ) |> SuperView
                    [< Inline >] static member inline ( +  ) (a:SuperText, b:SuperAttr   ) = [| a.T ;            b .T |]
                    [< Inline >] static member inline ( +  ) (a:SuperText, b:SuperDoc    ) = [| a.T ;            b .T |]
                    [< Inline >] static member inline ( +  ) (l:ITransformSuperDocCtor [], b:              SuperText) : ITransformSuperDocCtor[] = Array.append l [| b.T |]
                    [< Inline >] static member inline ( ++ ) (l:ITransformSuperDocCtor [], b:     string            ) : ITransformSuperDocCtor[] = Array.append l [| (SuperText (         ((+)" ") b     )).T |]
                    [< Inline >] static member inline ( ++ ) (l:ITransformSuperDocCtor [], b:View<string>           ) : ITransformSuperDocCtor[] = Array.append l [| (SuperView (View.Map ((+)" ") b     )).T |]
                    [< Inline >] static member inline ( ++ ) (l:ITransformSuperDocCtor [], b:Var< string>           ) : ITransformSuperDocCtor[] = Array.append l [| (SuperView (View.Map ((+)" ") b.View)).T |]
                    [< Inline >] static member inline ( ++ ) (l:ITransformSuperDocCtor [], b:              SuperText) : ITransformSuperDocCtor[] = Array.append l [| b.T |]
                    [< Inline >] static member inline ( ++ ) (a:SuperText, b:SuperText   ) = (a.Txt(), b.Txt()) ||> View.Map2(         sprintf "%s %s"     ) |> SuperView
                    [< Inline >] static member inline ( ++ ) (a:SuperText, b:     string ) =  a.Txt()            |> View.Map (fun a -> sprintf "%s %s" a b ) |> SuperView
                    [< Inline >] static member inline ( ++ ) (a:SuperText, b:View<string>) = (a.Txt(), b      ) ||> View.Map2(         sprintf "%s %s"     ) |> SuperView
                    [< Inline >] static member inline ( ++ ) (a:SuperText, b:Var< string>) = (a.Txt(), b.View ) ||> View.Map2(         sprintf "%s %s"     ) |> SuperView
                    [< Inline >] static member inline ( ++ ) (a:     string , b:SuperText) =           b.Txt()   |> View.Map (fun b -> sprintf "%s %s" a b ) |> SuperView
                    [< Inline >] static member inline ( ++ ) (a:View<string>, b:SuperText) = (a      , b.Txt()) ||> View.Map2(         sprintf "%s %s"     ) |> SuperView
                    [< Inline >] static member inline ( ++ ) (a:Var< string>, b:SuperText) = (a.View , b.Txt()) ||> View.Map2(         sprintf "%s %s"     ) |> SuperView
            
                let W (x:Var<string>) = { new IView with member __.GetView() = x.View }
            
                let mapW f (x:#IView) = x.GetView() |> View.Map f |> SuperView
            
                let TA    f a = SuperAttr    (fun () -> f a)
                let TT      a = SuperText    a
                let TW      a = SuperView    a
                let TV      a = SuperVar     a
                let ( ! )   a = View.Const   a
                let ( * ) f a = View.Apply f a
            
                let inline getSuperDoc (s:SuperDocCtor) = s.getSuperDoc()
            
                //let mainDoc() : SuperDoc = SuperNone
            
                let worldW = TT "World"
                let nameV  = Var.Create "Abe"
            
                let helloW = worldW  |> mapW (sprintf "Hello %s!"     )
                let iAmW   = W nameV |> mapW (sprintf "My name is %s.")
            
                let helloIamW = ! (sprintf "Hello %s!, my name is %s.") * worldW.Txt() * nameV.View
            
                let colorW =  ! (sprintf "color:%s") * nameV.View
            
                let superElt f children : SuperDoc = (SuperDocCtor(f, [||], [||]) ).getSuperDoc children
            
                let inline T (p:#ITransformSuperDocCtor) : ITransformSuperDocCtor = p :> ITransformSuperDocCtor
            
                open WebSharper.JavaScript
            
                let div p = superElt Html.div p
            
                let HelloWorld  = div [ helloW ++ iAmW ]
            
                let HelloWorld2 = 
                    div [ 
                        T  HelloWorld
                        T  helloW
                        T  iAmW
                        T (div [ "Hello" + worldW + "!, my name is" + nameV + "."  ])
                    ]
            
                let input (v:Var<string>) children = SuperDocCtor((fun attrs docs -> Doc.Input attrs v), [||], [||] ).getSuperDoc children
            
                let eventClick act = SuperAttr(fun () -> Html.on.click act)
                let htmlF   f   children = SuperDocCtor.New(f                                     ).getSuperDoc children
                let htmlTag tag children = SuperDocCtor.New(fun a d -> Doc.Element tag a d  :> Doc).getSuperDoc children
            
                let button0 act children = SuperDocCtor.New(Html.button                           ).getSuperDoc (Seq.append [ eventClick act ] children)
                let inline button    ch  = htmlF Html.button ch
            
                let helloAct _ _ = sprintf "Hello %s!"           nameV.Value |> JS.Alert 
                let hiAct    _ _ = sprintf "Hi %s, How are you?" nameV.Value |> JS.Alert 
                let buttonHello  = htmlTag   "button" ("Say Hello to my little" ++ TV nameV + eventClick helloAct + TA attr.style "font-weight:800" + TA attr.styleDyn colorW )
                let buttonHi     =            button  ("Hi" ++ TV nameV ++ "How are you?"   + eventClick hiAct   )
                let buttonMore   = htmlF Html.button  ("Hi" ++ TV nameV ++ "How are you?"   + eventClick hiAct   )
                //button (fun _ _ -> sprintf "Hello %s!" nameV.Value |> JS.Alert ) [ -"Say Hello to " + nameV ]
            
                let inpName      = input nameV []
             
                let HelloWorld3  = div [ SuperView helloIamW  ]
                let HelloWorld4  = div ( HelloWorld ++ helloW ++ iAmW ++ HelloWorld )
                let mainDoc      = div ( HelloWorld +  HelloWorld2 + HelloWorld3 + HelloWorld4 + inpName ++ buttonHello ++ buttonHi )
            
                [< SPAEntryPoint >]
                let main() =
                    mainDoc.Doc()
                    |> Doc.Run JS.Document.Body
                    
            
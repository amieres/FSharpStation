(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.ResultMessage=c.ResultMessage||{};e=c.Monads=c.Monads||{};f=e.Seq=e.Seq||{};g=e.Option=e.Option||{};h=e.Async=e.Async||{};i=a.WebSharper;j=i&&i.Obj;k=e.Result=e.Result||{};l=k.Builder=k.Builder||{};m=k.Operators=k.Operators||{};n=e.FusionM=e.FusionM||{};o=n.Operators=n.Operators||{};p=n.Builder=n.Builder||{};q=p.Builder=p.Builder||{};r=e.FusionAsyncM=e.FusionAsyncM||{};s=r.Operators=r.Operators||{};t=r.Builder=r.Builder||{};u=t.Builder=t.Builder||{};v=e.AsyncResult=e.AsyncResult||{};w=e.AsyncResultBuilder=e.AsyncResultBuilder||{};x=e.AsyncResultBuilderP=e.AsyncResultBuilderP||{};y=e.Extensions=e.Extensions||{};z=c.String=c.String||{};A=c.ParseO=c.ParseO||{};B=c.MailboxProcessorExt=c.MailboxProcessorExt||{};C=c.Mailbox=c.Mailbox||{};D=C.StateFull=C.StateFull||{};E=c.ResourceAgentState=c.ResourceAgentState||{};F=c.ResourceAgent=c.ResourceAgent||{};G=c.AgentReaderM=c.AgentReaderM||{};H=c.CommArgRoot=c.CommArgRoot||{};I=H.CommArg=H.CommArg||{};J=H.CommArgCollection=H.CommArgCollection||{};K=H.TypedCommArg=H.TypedCommArg||{};L=H.CommArgModule=H.CommArgModule||{};M=c.FsCodeModule=c.FsCodeModule||{};N=M.PreproDirective=M.PreproDirective||{};O=c.SnippetId=c.SnippetId||{};P=c.Snippet=c.Snippet||{};Q=c.SnippetCollection=c.SnippetCollection||{};R=c.SnippetModule=c.SnippetModule||{};S=c.Hole=c.Hole||{};T=c.TreeReader=c.TreeReader||{};U=T.Node=T.Node||{};V=b.LibraryJS=b.LibraryJS||{};W=V.Promise=V.Promise||{};X=V.View=V.View||{};Y=V.Serializer=V.Serializer||{};Z=V.LoadFiles=V.LoadFiles||{};_0=V.REGEX=V.REGEX||{};_1=V.Hoverable=V.Hoverable||{};_2=_1.Hoverable=_1.Hoverable||{};_3=V.ResizeObserver=V.ResizeObserver||{};_4=V.WebComponent=V.WebComponent||{};_5=_4.WcTabStrip=_4.WcTabStrip||{};_6=_5.WcTabStripT=_5.WcTabStripT||{};_7=_4.WcSplitter=_4.WcSplitter||{};_8=_7.WcSplitterT=_7.WcSplitterT||{};_9=V.Monaco=V.Monaco||{};_=_9.Position=_9.Position||{};$=_9.Range=_9.Range||{};ba=_9.Uri=_9.Uri||{};bb=_9.Location=_9.Location||{};bc=_9.FindMatch=_9.FindMatch||{};bd=_9.WordAtPosition=_9.WordAtPosition||{};be=_9.Model=_9.Model||{};bf=_9.MarkDownString=_9.MarkDownString||{};bg=_9.MarkerData=_9.MarkerData||{};bh=_9.CompletionItem=_9.CompletionItem||{};bi=_9.Hover=_9.Hover||{};bj=_9.Editor=_9.Editor||{};bk=_9.MonacoConfig=_9.MonacoConfig||{};bl=b.Library2=b.Library2||{};bm=bl.FsiAgent=bl.FsiAgent||{};bn=bl.WebSockets=bl.WebSockets||{};bo=bn.Address=bn.Address||{};bp=bn.BrokerRequest=bn.BrokerRequest||{};bq=bn.MessageType=bn.MessageType||{};br=bn.BrokerMessage=bn.BrokerMessage||{};bs=bn.Replier=bn.Replier||{};bt=bn.MessageGeneric=bn.MessageGeneric||{};bu=bn.ClientTypeFSharp=bn.ClientTypeFSharp||{};bv=bn.ClientTypeFSStation=bn.ClientTypeFSStation||{};bw=bn.ClientTypeJScript=bn.ClientTypeJScript||{};bx=bn.ReplyHandler=bn.ReplyHandler||{};by=bx.Handler=bx.Handler||{};bz=bn.WSMessagingClient=bn.WSMessagingClient||{};bA=bl.FSMessage=bl.FSMessage||{};bB=bl.FsAutoComplete=bl.FsAutoComplete||{};bC=bB.CommTypes=bB.CommTypes||{};bD=bC.ResponseError=bC.ResponseError||{};bE=bC.Location=bC.Location||{};bF=bC.CompletionResponse=bC.CompletionResponse||{};bG=bC.OverloadDescription=bC.OverloadDescription||{};bH=bC.OverloadParameter=bC.OverloadParameter||{};bI=bC.Overload=bC.Overload||{};bJ=bC.Parameter=bC.Parameter||{};bK=bC.SignatureData=bC.SignatureData||{};bL=bC.MethodResponse=bC.MethodResponse||{};bM=bC.SymbolUseRange=bC.SymbolUseRange||{};bN=bC.SymbolUseResponse=bC.SymbolUseResponse||{};bO=bC.HelpTextResponse=bC.HelpTextResponse||{};bP=bC.CompilerLocationResponse=bC.CompilerLocationResponse||{};bQ=bC.FSharpErrorInfo=bC.FSharpErrorInfo||{};bR=bC.ErrorResponse=bC.ErrorResponse||{};bS=bC.Colorization=bC.Colorization||{};bT=bC.Declaration=bC.Declaration||{};bU=bC.DeclarationResponse=bC.DeclarationResponse||{};bV=bC.OpenNamespace=bC.OpenNamespace||{};bW=bC.QualifySymbol=bC.QualifySymbol||{};bX=bC.ResolveNamespaceResponse=bC.ResolveNamespaceResponse||{};bY=bC.UnionCaseResponse=bC.UnionCaseResponse||{};bZ=bB.MsgTypes=bB.MsgTypes||{};b0=bZ.ParseRequest=bZ.ParseRequest||{};b1=bZ.DeclarationsRequest=bZ.DeclarationsRequest||{};b2=bZ.CompletionRequest=bZ.CompletionRequest||{};b3=bZ.PositionRequest=bZ.PositionRequest||{};b4=bZ.ProjectRequest=bZ.ProjectRequest||{};b5=bZ.LintRequest=bZ.LintRequest||{};b6=bZ.HelptextRequest=bZ.HelptextRequest||{};b7=bZ.WorkspacePeekRequest=bZ.WorkspacePeekRequest||{};b8=bB.Calls=bB.Calls||{};b9=b.FSharpStation=b.FSharpStation||{};b_=b9.FStation=b9.FStation||{};b$=b9.Snippets=b9.Snippets||{};ca=b9.DragDrop=b9.DragDrop||{};cb=ca.DragInfo=ca.DragInfo||{};cc=b9.Templating=b9.Templating||{};cd=b9.RenderSnippets=b9.RenderSnippets||{};ce=b9.RenderProperties=b9.RenderProperties||{};cf=b9.Monaco=b9.Monaco||{};cg=cf.HoverProvider=cf.HoverProvider||{};ch=cf.CompletionItemProvider=cf.CompletionItemProvider||{};ci=cf.DefinitionProvider=cf.DefinitionProvider||{};cj=cf.MonacoOptions=cf.MonacoOptions||{};ck=cf.ITextModelService=cf.ITextModelService||{};cl=b9.JumpTo=b9.JumpTo||{};cm=b9.CustomAction=b9.CustomAction||{};cn=b9.Serializer=b9.Serializer||{};co=cn.Model=cn.Model||{};cp=b9.LoadSave=b9.LoadSave||{};cq=b9.Importer=b9.Importer||{};cr=b9.MainProgram=b9.MainProgram||{};cs=b9.Messaging=b9.Messaging||{};ct=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};cu=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};cv=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};cw=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};cx=a.FSharpStation_Templates=a.FSharpStation_Templates||{};cy=a.GeneratedPrintf=a.GeneratedPrintf||{};cz=a.IntelliFactory;cA=cz&&cz.Runtime;cB=i&&i.Utils;cC=i&&i.Strings;cD=i&&i.Seq;cE=i&&i.Arrays;cF=i&&i.List;cG=i&&i.Concurrency;cH=i&&i.Enumerator;cI=i&&i.Result;cJ=i&&i.Operators;cK=i&&i.Unchecked;cL=i&&i.Slice;cM=i&&i.Control;cN=cM&&cM.MailboxProcessor;cO=a.System;cP=cO&&cO.Guid;cQ=i&&i.Collections;cR=cQ&&cQ.FSharpSet;cS=i&&i.Option;cT=i&&i.CancellationTokenSource;cU=a.console;cV=i&&i.UI;cW=cV&&cV.View;cX=cV&&cV.Var$1;cY=cQ&&cQ.FSharpMap;cZ=cQ&&cQ.BalancedTree;c0=cV&&cV.DomUtility;c1=cV&&cV.Doc;c2=cV&&cV.AttrModule;c3=cV&&cV.AttrProxy;c4=a.Node;c5=cV&&cV.Client;c6=c5&&c5.Templates;c7=a.Reflect;c8=a.Object;c9=cQ&&cQ.Map;c_=a.JSON;c$=i&&i.TimeoutException;da=i&&i.ClientSideJson;db=da&&da.Provider;dc=i&&i.Owin;dd=dc&&dc.WebSocket;de=dd&&dd.Client;df=de&&de.WithEncoding;dg=dd&&dd.Endpoint;dh=a.location;di=i&&i.Remoting;dj=di&&di.AjaxRemotingProvider;dk=cV&&cV.FromView;dl=cV&&cV.Templating;dm=dl&&dl.Runtime;dn=dm&&dm.Server;_do=dn&&dn.ProviderBuilder;dp=dn&&dn.Handler;dq=dn&&dn.TemplateInstance;dr=i&&i.JavaScript;ds=dr&&dr.Promise;dt=V&&V.AppFramework;du=a.Date;dv=dt&&dt.PlugIn;dw=i&&i.Lazy;dx=V&&V.LayoutEngineModule;dy=i&&i.DateUtil;dz=i&&i.Numeric;dA=cV&&cV.ListModel;dB=cQ&&cQ.Dictionary;dC=a.LayoutEngine_Templates;d=c.ResultMessage=cA.Class({toString:function(){return this.$==1?(function(dD){return function(dE){return dD("Error    : "+cB.toSafe(dE));};}(a.id))(this.$0):this.$==2?(function(dD){return function(dE){return dD("Warning  : "+cB.toSafe(dE));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(dD){return function(dE){return dD(a.String(dE));};}(a.id))(this.$0):this.$==5?(((cA.Curried3(function(dD,dE,dF){return dD("Exception: "+cB.toSafe(dE)+", "+cB.toSafe(dF));}))(a.id))(this.$0))(this.$1):this.$==6?cC.concat("\n",cD.map(a.String,cD.filter(function(dD){return dD.$!=0;},this.$0))):"";}},null,d);d.NoMsg=new d({$:0});d.summarizedI=function(dD){return d.summarizedF(function(){return[0,0,1];},dD);};d.summarizedW=function(dD){return d.summarizedF(function(){return[0,1,0];},dD);};d.summarized=function(dD){return d.summarizedF(function(){return[1,0,0];},dD);};d.summarizedF=function(dD,dE){return d.summaryF(dD,dE)+a.String(dE);};d.summaryF=function(dD,dE){var dF,dG;dG=d.countF(dD,dE);switch(dG[0]===0?dG[1]===0?0:dG[1]===1?dG[2]===0?0:(dF=dG[1],2):(dF=dG[1],2):dG[0]===1?dG[1]===0?dG[2]===0?0:(dF=dG[0],1):(dF=[dG[0],dG[1]],3):dG[1]===0?(dF=dG[0],1):(dF=[dG[0],dG[1]],3)){case 0:return"";case 1:return(function(dH){return function(dI){return dH("Errors   : "+a.String(dI)+"\n");};}(a.id))(dF);case 2:return(function(dH){return function(dI){return dH("Warnings : "+a.String(dI)+"\n");};}(a.id))(dF);case 3:return(((cA.Curried3(function(dH,dI,dJ){return dH("Errors   : "+a.String(dI)+", Warnings: "+a.String(dJ)+"\n");}))(a.id))(dF[0]))(dF[1]);}};d.reduceMsgs=function(dD){return cD.fold(d.addMsg,d.NoMsg,dD);};d.addMsg=function(dD,dE){return dD.$==0?dE:dD.$==6?dE.$==0?dD:dE.$==6?new d({$:6,$0:dD.$0.concat(dE.$0)}):new d({$:6,$0:dD.$0.concat([dE])}):dE.$==0?dD:dE.$==6?new d({$:6,$0:[dD].concat(dE.$0)}):new d({$:6,$0:[dD,dE]});};d.countI=function(dD){return d.countF(function(){return[0,0,1];},dD);};d.countW=function(dD){return d.countF(function(){return[0,1,0];},dD);};d.count=function(dD){return d.countF(function(){return[1,0,0];},dD);};d.countF=function(dD,dE){function dF(dG,dH,dI){return function(dJ){return[dG+dJ[0],dH+dJ[1],dI+dJ[2]];};}return dE.$==0?[0,0,0]:dE.$==3?[0,0,1]:dE.$==2?[0,1,0]:dE.$==4?dD(dE.$0):dE.$==6?cD.fold(function(dG,dH){return(function(dI){return dF(dI[0],dI[1],dI[2]);}(dG))(dH);},[0,0,0],cD.map(function(dG){return d.countF(dD,dG);},d.exclnoMsg(dE.$0))):[1,0,0];};d.isFatalW=function(dD){return d.isFatalF(function(){return false;},dD);};d.isFatal=function(dD){return d.isFatalF(function(){return true;},dD);};d.isFatalF=function(dD,dE){return dE.$==0?false:dE.$==3?false:dE.$==2?false:dE.$==4?dD(dE.$0):dE.$==6?cD.exists(function(dF){return d.isFatalF(dD,dF);},dE.$0):true;};d.isWarningOrInfoW=function(dD){return d.isWarningOrInfoF(function(){return true;},dD);};d.isWarningOrInfo=function(dD){return d.isWarningOrInfoF(function(){return false;},dD);};d.isWarningOrInfoF=function(dD,dE){return dE.$==2||(dE.$==4?dD(dE.$0):dE.$==6&&cD.forall(function(dF){return d.isWarningOrInfoF(dD,dF)||d.isInfoF(dD,dF);},d.exclnoMsg(dE.$0)));};d.isInfoI=function(dD){return d.isInfoF(function(){return true;},dD);};d.isInfo=function(dD){return d.isInfoF(function(){return false;},dD);};d.isInfoF=function(dD,dE){return dE.$==3||(dE.$==4?dD(dE.$0):dE.$==6&&cD.forall(function(dF){return d.isInfoF(dD,dF);},d.exclnoMsg(dE.$0)));};d.freeMessageI=function(dD){var dE;function dF(dG){return new d({$:3,$0:dG});}return d.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};d.freeMessageW=function(dD){var dE;function dF(dG){return new d({$:2,$0:dG});}return d.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};d.freeMessage=function(dD){var dE;function dF(dG){return new d({$:1,$0:dG});}return d.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};d.freeMessageF=function(dD,dE){return d.bindMessage(dD,dE);};d.bindMessage=function(dD,dE){return dE.$==4?dD(dE.$0):dE.$==1?new d({$:1,$0:dE.$0}):dE.$==3?new d({$:3,$0:dE.$0}):dE.$==2?new d({$:2,$0:dE.$0}):dE.$==5?new d({$:5,$0:dE.$0,$1:dE.$1}):dE.$==6?new d({$:6,$0:cE.map(function(dF){return d.bindMessage(dD,dF);},dE.$0)}):d.NoMsg;};d.exclnoMsg=function(dD){function dE(dF){return!dF;}return cD.filter(function(dF){return dE(d.noMsg(dF));},dD);};d.noMsg=function(dD){return dD.$==0;};f.absorbR=function(dD){return cD.choose(function(dE){return dE.$==0?{$:1,$0:dE.$0}:null;},dD);};f.absorbO=function(dD){return cD.choose(a.id,dD);};f.insertR=function(dD){return dD.$==0?cD.map(function(dE){return{$:0,$0:dE};},dD.$0):(f.rtn())(c.Error$1(dD.$0));};f.insertO=function(dD){var dE;dE=dD==null?null:{$:1,$0:cD.map(function(dF){return{$:1,$0:dF};},dD.$0)};return dE==null?(f.rtn())(null):dE.$0;};f.rtn=function(){ct.$cctor();return ct.rtn;};g.absorbR=function(dD){var dE,dF;return dD!=null&&dD.$==1&&(dF=dD.$0,dF.$==0&&(dE=dF.$0,true))?{$:1,$0:dE}:null;};g.insertR=function(dD){var dE;return dD.$==0?(dE=dD.$0,dE==null?null:{$:1,$0:{$:0,$0:dE.$0}}):g.rtn(c.Error$1(dD.$0));};g.sequenceSeq=function(dD){return g.traverseSeq(a.id,dD);};g.traverseSeq=function(dD,dE){var dF;dF=cE.foldBack(function(dG,dH){return g.op_GreaterGreaterEquals(dD(dG),function(dI){return g.op_GreaterGreaterEquals(dH,function(dJ){return g.rtn(new cF.T({$:1,$0:dI,$1:dJ}));});});},cE.ofSeq(dE),g.rtn(cF.T.Empty));return dF==null?null:{$:1,$0:dF.$0};};g.op_GreaterGreaterEquals=function(dD,dE){return dD==null?null:dE(dD.$0);};g.bindNone=function(dD,dE){return dE!=null&&dE.$==1?{$:1,$0:dE.$0}:dD();};g.mapNone=function(dD,dE){return dE==null?dD():dE.$0;};g.iter=function(dD){function dE(dG){return dG==null?null:{$:1,$0:dD(dG.$0)};}function dF(dG){if(dG==null);}return function(dG){return dF(dE(dG));};};g.rtn=function(dD){return{$:1,$0:dD};};h.insertR=function(dD){function dE(dG){return{$:0,$0:dG};}function dF(dG){return cG.Return(dG);}return dD.$==0?cG.Bind(dD.$0,function(dG){return dF(dE(dG));}):cG.Return(c.Error$1(dD.$0));};h.insertO=function(dD){var dE;function dF(dH){return{$:1,$0:dH};}function dG(dH){return cG.Return(dH);}dE=dD==null?null:{$:1,$0:cG.Bind(dD.$0,function(dH){return dG(dF(dH));})};return dE==null?cG.Return(null):dE.$0;};h.sequenceSeq=function(dD){return h.traverseSeq(a.id,dD);};h.traverseSeq=function(dD,dE){function dF(dG){return cG.Return(dG);}return cG.Bind(cE.foldBack(function(dG,dH){return h.op_GreaterGreaterEquals(dD(dG),function(dI){return h.op_GreaterGreaterEquals(dH,function(dJ){return cG.Return(new cF.T({$:1,$0:dI,$1:dJ}));});});},cE.ofSeq(dE),cG.Return(cF.T.Empty)),function(dG){return dF(a.id(dG));});};h.op_GreaterGreaterEquals=function(dD,dE){return cG.Bind(dD,dE);};h.sleepThen=function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.Bind(cG.Sleep(dE),function(){return cG.Return(dD());});});};h.apply=function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.Bind(cG.StartChild(dD,null),function(dG){return cG.Bind(cG.StartChild(dE,null),function(dH){return cG.Bind(dG,function(dI){return cG.Bind(dH,function(dJ){return cG.Return(dI(dJ));});});});});});};l=k.Builder=cA.Class({For:function(dD,dE){var dF;dF=this;return this.Using(cH.Get(dD),function(dG){return dF.While(function(){return dG.MoveNext();},dF.Delay(function(){return dE(dG.Current());}));});},While:function(dD,dE){function dF(dG,dH){return dG()?cI.Bind(function(){return dF(dG,dH);},dH()):k.rtn();}return dF(dD,dE);},Using:function(dD,dE){try{return dE(dD);}finally{dD.Dispose();}},TryFinally:function(dD,dE){try{return dD();}finally{dE();}},TryWith:function(dD,dE){try{return dD();}catch(dF){return dE(dF);}},Run:function(dD){return k.bindP(dD,{$:0,$0:null});},Combine:function(dD,dE){return cI.Bind(dE,dD);},Delay:a.id,Zero:function(){return k.rtn();},Bind:function(dD,dE){return k.bindP(dE,dD);},ReturnFrom:a.id,Return:function(dD){return k.rtn(dD);}},j,l);l.New=cA.Ctor(function(){j.New.call(this);},l);m.result=function(){ct.$cctor();return ct.result$1;};m.rtn=function(dD){return k.rtn(dD);};m.op_GreaterEqualsGreater=function(dD,dE,dF){return m.op_GreaterGreaterEquals(dD(dF),dE);};m.op_RightShift=function(dD,dE,dF){return m.op_BarGreaterGreater(dD(dF),dE);};m.op_GreaterGreaterEquals=function(dD,dE){return k.bindP(dE,dD);};m.op_BarGreaterGreater=function(dD,dE){return k.mapP(dE,dD);};k.result=function(){ct.$cctor();return ct.result;};k.sequenceSeq=function(dD){return k.traverseSeq(a.id,dD);};k.traverseSeq=function(dD,dE){return cI.Map(a.id,cE.foldBack(function(dF,dG){return k.op_GreaterGreaterEquals(dD(dF),function(dH){return k.op_GreaterGreaterEquals(dG,function(dI){return k.rtn(new cF.T({$:1,$0:dH,$1:dI}));});});},cE.ofSeq(dE),k.rtn(cF.T.Empty)));};k.op_GreaterGreaterEquals=function(dD,dE){return cI.Bind(dE,dD);};k.absorbO=function(dD,dE){return k.bindP(function(dF){return k.ofOption(dD,dF);},dE);};k.insertO=function(dD){var dE;dE=dD==null?null:{$:1,$0:cI.Map(function(dF){return{$:1,$0:dF};},dD.$0)};return dE==null?{$:0,$0:null}:dE.$0;};k.ofOption=function(dD,dE){var dF;dF=dE==null?null:{$:1,$0:{$:0,$0:dE.$0}};return dF==null?function(dG){return c.Error$1(dD(dG));}():dF.$0;};k.get=function(dD){return k.defaultWith(function(dE){return cJ.FailWith(a.String(dE));},dD);};k.iter=function(dD,dE,dF){k.defaultWith(dD,k.mapP(dE,dF));};k.mapP=function(dD,dE){return k.bindP(function(dF){return k.rtn(dD(dF));},dE);};k.bindP=function(dD,dE){if(dE.$==1)return c.Error$1(dE.$0);else try{return dD(dE.$0);}catch(dF){return c.Error$1(new d({$:5,$0:dF.message,$1:dF.stack}));}};k.failIfFalse=function(dD,dE){return!dE?c.Error$1(dD):{$:0,$0:null};};k.failIfTrue=function(dD,dE){return dE?c.Error$1(dD):{$:0,$0:null};};k.defaultValue=function(dD,dE){return dE.$==1?dD:dE.$0;};k.defaultWith=function(dD,dE){return dE.$==1?dD(dE.$0):dE.$0;};k.toOption=function(dD){return dD.$==0?{$:1,$0:dD.$0}:null;};k.rtn=function(dD){return{$:0,$0:dD};};k.freeMessage=function(dD){return dD.$==1?c.Error$1(d.freeMessage(dD.$0)):{$:0,$0:dD.$0};};o.rtn=function(dD){return n.rtn(dD);};o.op_GreaterEqualsGreater=function(dD,dE,dF){return o.op_GreaterGreaterEquals(dD(dF),dE);};o.op_RightShift=function(dD,dE,dF){return o.op_BarGreaterGreater(dD(dF),dE);};o.op_GreaterGreaterEquals=function(dD,dE){return n.bind(dE,dD);};o.op_BarGreaterGreater=function(dD,dE){return n.map(dE,dD);};o.op_LessMultiplyGreater=function(dD,dE){return n.apply(dD,dE);};q=p.Builder=cA.Class({For:function(dD,dE){var dF;dF=this;return this.Using(cH.Get(dD),function(dG){return dF.While(function(){return dG.MoveNext();},dF.Delay(function(){return dE(dG.Current());}));});},Using:function(dD,dE){return this.TryFinally(function(){return dE(dD);},function(){if(!cK.Equals(dD,null))dD.Dispose();});},TryFinally:function(dD,dE){return n.wrap(function(dF){try{return(n.getFun(dD()))(dF);}finally{dE();}});},TryWith:function(dD,dE){return n.wrap(function(dF){try{return(n.getFun(dD()))(dF);}catch(dG){return dE(dG);}});},While:function(dD,dE){function dF(dG,dH){return dG()?n.bind(function(){return dF(dG,dH);},dH()):n.rtn();}return dF(dD,dE);},Run:function(dD){return n.wrap(function(dE){return(n.getFun(dD()))(dE);});},Combine:function(dD,dE){return n.bind(dE,dD);},Delay:a.id,Zero:function(){return n.rtn();},Bind:function(dD,dE){return n.bind(dE,dD);},ReturnFrom:function(dD){return n.from(dD);},Return:function(dD){return n.rtn(dD);}},j,q);q.New=cA.Ctor(function(){j.New.call(this);},q);n.fusion=function(){ct.$cctor();return ct.fusion;};n.absorbO=function(dD,dE){return n.absorbR(n.map(function(dF){return k.ofOption(dD,dF);},dE));};n.absorbR=function(dD){return n.bind(n.ofResultRM,dD);};n.insertSnd=function(dD,dE){return n.map(function(dF){return[dF,dE];},dD);};n.insertFst=function(dD,dE){return n.map(function(dF){return[dD,dF];},dE);};n.insertR=function(dD){return dD.$==0?n.map(function(dE){return{$:0,$0:dE};},dD.$0):n.rtn(c.Error$1(dD.$0));};n.insertO=function(dD){var dE;dE=dD==null?null:{$:1,$0:n.map(function(dF){return{$:1,$0:dF};},dD.$0)};return dE==null?n.rtn(null):dE.$0;};n.iterResultPrint=function(dD){function dE(dF){c.print$1(dF);}n.iterReader(function(dF){return dE(d.summarized(dF));},function(dF){c.print$1(dF);},null,dD);};n.iterResult=function(dD,dE,dF){n.iterReader(dD,dE,null,dF);};n.runResult=function(dD){return n.runReader(null,dD);};n.runReader=function(dD,dE){var dF,dG,dH;dF=n.run(dD,dE);dG=dF[2];return k.ofOption(function(){return dG;},(dH=dF[0],dH==null?null:{$:1,$0:[dH.$0,dG]}));};n.mapReader=function(dD,dE){return n.mapState(function(){return dD;},a.id,dE);};n.readerFun=function(dD){return n.map(dD,n.getS());};n.sequenceSeq=function(dD){return n.traverseSeq(a.id,dD);};n.traverseSeq=function(dD,dE){return n.map(a.id,cE.foldBack(function(dF,dG){return n.op_GreaterGreaterEquals(dD(dF),function(dH){return n.op_GreaterGreaterEquals(dG,function(dI){return n.rtn(new cF.T({$:1,$0:dH,$1:dI}));});});},cE.ofSeq(dE),n.rtn(cF.T.Empty)));};n.op_GreaterGreaterEquals=function(dD,dE){return n.bind(dE,dD);};n.apply=function(dD,dE){return n.bind(function(dF){return n.map(dF,dE);},dD);};n.memoizeRm=function(dD,dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ,dK,dL;function dM(dN,dO){return(dJ(dN))(function(){return dO;});}dH=dG[0];dI=dD(dH);dJ=dI[1];return n.run(dH,(dK=(dL=dI[0](dF),dL==null?null:{$:1,$0:n.rtn(dL.$0)}),dK==null?n.map(function(dN){return dM(dF,dN);},dE(dF)):dK.$0));}};};n.iterReader=function(dD,dE,dF,dG){var dH,dI;dH=n.run(dF,n.map(dE,dG));dI=dH[2];(g.iter(a.ignore))(dH[0]);dI.$!==0?dD(dI):void 0;};n.mapState=function(dD,dE,dF){return{$:0,$0:function(dG){var dH,dI;dH=dG[0];dI=(n.getFun(dF))([dD(dH),dG[1]]);return[dI[0],dE(dH,dI[1]),dI[2]];}};};n.freeMessageW=function(dD){var dE;function dF(dG){return new d({$:2,$0:dG});}return n.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};n.freeMessage=function(dD){var dE;function dF(dG){return new d({$:1,$0:dG});}return n.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};n.freeMessageF=function(dD,dE){return{$:0,$0:function(dF){var dG,dH,dI;dG=dF[0];dH=dF[1];try{dI=dE.$0([dG,d.freeMessage(dH)]);return[dI[0],dI[1],d.freeMessageF(dD,dI[2])];}catch(dJ){return[null,dG,d.freeMessage(d.addMsg(dH,new d({$:5,$0:dJ.message,$1:dJ.stack})))];}}};};n.ofFusionM=function(dD){return n.from(dD);};n.ofResultMessage=function(dD){return n.OkFMsg(null,dD);};n.ofMessage=function(dD){return n.OkFMsg(null,new d({$:4,$0:dD}));};n.ofOption=function(dD,dE){return dE==null?n.ErrorF(dD()):n.OkF(dE.$0);};n.ofResult=function(dD){return dD.$==1?n.ErrorF(new d({$:1,$0:(function(dE){return function(dF){return dE(cB.prettyPrint(dF));};}(a.id))(dD.$0)})):n.OkF(dD.$0);};n.ofResultS=function(dD){return dD.$==1?n.ErrorF(new d({$:1,$0:dD.$0})):n.OkF(dD.$0);};n.ofResultM=function(dD){return dD.$==1?n.ErrorF(new d({$:4,$0:dD.$0})):n.OkF(dD.$0);};n.ofResultRM=function(dD){return dD.$==1?n.ErrorF(dD.$0):n.OkF(dD.$0);};n.inling=function(dD,dE){return{$:0,$0:function(dF){var dG,dH,dI;dG=dF[0];dH=dF[1];try{dI=dE.$0([dG,dH]);return[{$:1,$0:dI[0]},dI[1],dI[2]];}catch(dJ){return[null,dG,d.addMsg(dH,new d({$:5,$0:dJ.message,$1:dJ.stack}))];}}};};n.check=function(){return{$:0,$0:function(dD){return[d.isFatal(dD[1])?null:{$:1,$0:null},dD[0],d.NoMsg];}};};n.putS=function(dD){return{$:0,$0:function(){return[{$:1,$0:null},dD,d.NoMsg];}};};n.getR=function(){return{$:0,$0:function(dD){return[{$:1,$0:dD[1]},dD[0],d.NoMsg];}};};n.getS=function(){return{$:0,$0:function(dD){var dE;dE=dD[0];return[{$:1,$0:dE},dE,d.NoMsg];}};};n.ErrorF=function(dD){return{$:0,$0:function(dE){return[null,dE[0],dD];}};};n.OkFMsg=function(dD,dE){return{$:0,$0:function(dF){return[{$:1,$0:dD},dF[0],dE];}};};n.OkF=function(dD){return{$:0,$0:function(dE){return[{$:1,$0:dD},dE[0],d.NoMsg];}};};n.run=function(dD,dE){return(n.getFun(dE))([dD,d.NoMsg]);};n.from=a.id;n.getFun=function(dD){return dD.$0;};n.wrap=function(dD){return{$:0,$0:dD};};n.map=function(dD,dE){return n.bind(function(dF){return n.rtn(dD(dF));},dE);};n.bind=function(dD,dE){return{$:0,$0:function(dF){var dG,dH,dI,dJ,dK,dL,dM;dG=dF[0];dH=dF[1];try{dI=dE.$0([dG,dH]);dJ=dI[0];dK=dI[1];dL=dI[2];return dJ!=null&&dJ.$==1?(dM=dD(dJ.$0).$0([dK,d.addMsg(dH,dL)]),[dM[0],dM[1],d.addMsg(dL,dM[2])]):[null,dK,dL];}catch(dN){return[null,dG,d.addMsg(dH,new d({$:5,$0:dN.message,$1:dN.stack}))];}}};};n.rtn=function(dD){return{$:0,$0:function(dE){return[{$:1,$0:dD},dE[0],d.NoMsg];}};};s.rtn=function(dD){return r.rtn(dD);};s.op_GreaterEqualsGreater=function(dD,dE,dF){return s.op_GreaterGreaterEquals(dD(dF),dE);};s.op_RightShift=function(dD,dE,dF){return s.op_BarGreaterGreater(dD(dF),dE);};s.op_GreaterGreaterEquals=function(dD,dE){return r.bind(dE,dD);};s.op_BarGreaterGreater=function(dD,dE){return r.map(dE,dD);};s.op_LessMultiplyGreater=function(dD,dE){return r.apply(dD,dE);};u=t.Builder=cA.Class({For:function(dD,dE){var dF;dF=this;return this.Using(cH.Get(dD),function(dG){return dF.While(function(){return dG.MoveNext();},dF.Delay(function(){return dE(dG.Current());}));});},Using:function(dD,dE){function dF(dG,dH){return cG.Using(dD,function(dI){return(r.getFun(dE(dI)))([dG,dH]);});}return r.wrap(function(dG){return dF(dG[0],dG[1]);});},TryFinally:function(dD,dE){function dF(dG,dH){return cG.TryFinally((r.getFun(dD()))([dG,dH]),dE);}return r.wrap(function(dG){return dF(dG[0],dG[1]);});},TryWith:function(dD,dE){function dF(dG,dH){return cG.TryWith((r.getFun(dD()))([dG,dH]),dE);}return r.wrap(function(dG){return dF(dG[0],dG[1]);});},While:function(dD,dE){function dF(dG,dH){return dG()?r.bind(function(){return dF(dG,dH);},dH()):r.rtn();}return dF(dD,dE);},Run:function(dD){return r.wrap(function(dE){return(r.getFun(dD()))(dE);});},Combine:function(dD,dE){return r.bind(dE,dD);},Delay:a.id,Zero:function(){return r.rtn();},Bind:function(dD,dE){return r.bind(dE,dD);},ReturnFrom:function(dD){return r.from(dD);},Return:function(dD){return r.rtn(dD);}},j,u);u.New=cA.Ctor(function(){j.New.call(this);},u);r.fusion=function(){ct.$cctor();return ct.fusion$1;};r.iterResultPrintA=function(dD){function dE(dF){c.print$1(dF);}r.iterReaderA(function(dF){return dE(d.summarized(dF));},function(dF){c.print$1(dF);},null,dD);};r.iterResultPrint=function(dD){function dE(dF){c.print$1(dF);}r.iterReader(function(dF){return dE(d.summarized(dF));},function(dF){c.print$1(dF);},null,dD);};r.iterResultA=function(dD,dE,dF){r.iterReaderA(dD,dE,null,dF);};r.iterResult=function(dD,dE,dF){r.iterReader(dD,dE,null,dF);};r.runResult=function(dD){return r.runReader(null,dD);};r.runReader=function(dD,dE){function dF(dH,dI,dJ){return k.ofOption(function(){return dJ;},dH==null?null:{$:1,$0:[dH.$0,dJ]});}function dG(dH){return cG.Return(dH);}return cG.Bind(r.run(dD,dE),function(dH){return dG(dF.apply(null,dH));});};r.mapReader=function(dD,dE){return r.mapState(function(){return dD;},a.id,dE);};r.absorbO=function(dD,dE){return r.absorbR(r.map(function(dF){return k.ofOption(dD,dF);},dE));};r.absorbR=function(dD){return r.bind(r.ofResultRM,dD);};r.insertSnd=function(dD,dE){return r.map(function(dF){return[dF,dE];},dD);};r.insertFst=function(dD,dE){return r.map(function(dF){return[dD,dF];},dE);};r.insertR=function(dD){return dD.$==0?r.map(function(dE){return{$:0,$0:dE};},dD.$0):r.rtn(c.Error$1(dD.$0));};r.insertO=function(dD){var dE;dE=dD==null?null:{$:1,$0:r.map(function(dF){return{$:1,$0:dF};},dD.$0)};return dE==null?r.rtn(null):dE.$0;};r.readerFun=function(dD){return r.map(dD,r.getS());};r.freeMessageW=function(dD){var dE;function dF(dG){return new d({$:2,$0:dG});}return r.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};r.freeMessage=function(dD){var dE;function dF(dG){return new d({$:1,$0:dG});}return r.freeMessageF((dE=function(dG){return function(dH){return dG(a.String(dH));};}(a.id),function(dG){return dF(dE(dG));}),dD);};r.sequenceSeq=function(dD){return r.traverseSeq(a.id,dD);};r.traverseSeq=function(dD,dE){return r.map(a.id,cE.foldBack(function(dF,dG){return r.op_GreaterGreaterEquals(dD(dF),function(dH){return r.op_GreaterGreaterEquals(dG,function(dI){return r.rtn(new cF.T({$:1,$0:dH,$1:dI}));});});},cE.ofSeq(dE),r.rtn(cF.T.Empty)));};r.op_GreaterGreaterEquals=function(dD,dE){return r.bind(dE,dD);};r.apply=function(dD,dE){return r.bind(function(dF){return r.map(dF,dE);},dD);};r.memoizeRm=function(dD,dE,dF){return{$:0,$0:function(dG){var dH,dI;dH=dG[0];dI=null;return cG.Delay(function(){var dJ,dK,dL,dM;function dN(dO,dP){return(dK(dO))(function(){return dP;});}dJ=dD(dH);dK=dJ[1];return r.run(dH,(dL=(dM=dJ[0](dF),dM==null?null:{$:1,$0:r.rtn(dM.$0)}),dL==null?r.map(function(dO){return dN(dF,dO);},dE(dF)):dL.$0));});}};};r.iterReaderA=function(dD,dE,dF,dG){function dH(dJ,dK,dL){(g.iter(a.ignore))(dJ);dL.$!==0?dD(dL):void 0;}function dI(dJ){return cG.Return(dJ);}cG.Start(cG.Bind(r.run(dF,r.map(dE,dG)),function(dJ){return dI(dH.apply(null,dJ));}),null);};r.iterReader=function(dD,dE,dF,dG){var dH;dH=r.run(dF,r.map(dE,dG));throw"iterS cannot be used in JavaScript!";};r.mapState=function(dD,dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ;dH=dG[0];dI=dG[1];dJ=null;return cG.Delay(function(){return cG.Bind((r.getFun(dF))([dD(dH),dI]),function(dK){return cG.Return([dK[0],dE(dH,dK[1]),dK[2]]);});});}};};r.freeMessageF=function(dD,dE){return{$:0,$0:function(dF){var dG,dH,dI;dG=dF[0];dH=dF[1];dI=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dE.$0([dG,d.freeMessage(dH)]),function(dJ){return cG.Return([dJ[0],dJ[1],d.freeMessageF(dD,dJ[2])]);});}),function(dJ){return cG.Return([null,dG,d.freeMessage(d.addMsg(dH,new d({$:5,$0:dJ.message,$1:dJ.stack})))]);});});}};};r.ofAsyncResultRM=function(dD){return r.bind(r.ofResultRM,r.ofAsync(dD));};r.ofAsync=function(dD){return{$:0,$0:function(dE){var dF;function dG(dI){return[{$:1,$0:dI},dF,d.NoMsg];}function dH(dI){return cG.Return(dI);}dF=dE[0];return cG.Bind(dD,function(dI){return dH(dG(dI));});}};};r.ofFusionM=function(dD){var dE;dE=dD.$0;return{$:0,$0:function(dF){return cG.Return(dE([dF[0],dF[1]]));}};};r.ofResultMessage=function(dD){return r.OkFMsg(null,dD);};r.ofMessage=function(dD){return r.OkFMsg(null,new d({$:4,$0:dD}));};r.ofOption=function(dD,dE){var dF;dF=dE==null?null:{$:1,$0:r.OkF(dE.$0)};return dF==null?function(dG){return r.ErrorF(dD(dG));}():dF.$0;};r.ofResult=function(dD){return dD.$==1?r.ErrorF(new d({$:1,$0:(function(dE){return function(dF){return dE(cB.prettyPrint(dF));};}(a.id))(dD.$0)})):r.OkF(dD.$0);};r.ofResultS=function(dD){return dD.$==1?r.ErrorF(new d({$:1,$0:dD.$0})):r.OkF(dD.$0);};r.ofResultM=function(dD){return dD.$==1?r.ErrorF(new d({$:4,$0:dD.$0})):r.OkF(dD.$0);};r.ofResultRM=function(dD){return dD.$==1?r.ErrorF(dD.$0):r.OkF(dD.$0);};r.getOption=function(dD){return{$:0,$0:function(dE){var dF,dG,dH;dF=dE[0];dG=dE[1];dH=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dD.$0([dF,dG]),function(dI){return cG.Return([{$:1,$0:dI[0]},dI[1],dI[2]]);});}),function(dI){return cG.Return([null,dF,d.addMsg(dG,new d({$:5,$0:dI.message,$1:dI.stack}))]);});});}};};r.check=function(){return{$:0,$0:function(dD){return cG.Return([d.isFatal(dD[1])?null:{$:1,$0:null},dD[0],d.NoMsg]);}};};r.putS=function(dD){return{$:0,$0:function(){return cG.Return([{$:1,$0:null},dD,d.NoMsg]);}};};r.getR=function(){return{$:0,$0:function(dD){return cG.Return([{$:1,$0:dD[1]},dD[0],d.NoMsg]);}};};r.getS=function(){return{$:0,$0:function(dD){var dE;dE=dD[0];return cG.Return([{$:1,$0:dE},dE,d.NoMsg]);}};};r.ErrorF=function(dD){return{$:0,$0:function(dE){return cG.Return([null,dE[0],dD]);}};};r.OkFMsg=function(dD,dE){return{$:0,$0:function(dF){return cG.Return([{$:1,$0:dD},dF[0],dE]);}};};r.OkF=function(dD){return{$:0,$0:function(dE){return cG.Return([{$:1,$0:dD},dE[0],d.NoMsg]);}};};r.run=function(dD,dE){return(r.getFun(dE))([dD,d.NoMsg]);};r.from=a.id;r.getFun=function(dD){return dD.$0;};r.wrap=function(dD){return{$:0,$0:dD};};r.map=function(dD,dE){return r.bind(function(dF){return r.rtn(dD(dF));},dE);};r.bind=function(dD,dE){return{$:0,$0:function(dF){var dG,dH,dI;dG=dF[0];dH=dF[1];dI=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dE.$0([dG,dH]),function(dJ){var dK,dL,dM;dK=dJ[0];dL=dJ[1];dM=dJ[2];return dK!=null&&dK.$==1?cG.Bind(dD(dK.$0).$0([dL,d.addMsg(dH,dM)]),function(dN){return cG.Return([dN[0],dN[1],d.addMsg(dM,dN[2])]);}):cG.Return([null,dL,dM]);});}),function(dJ){return cG.Return([null,dG,d.addMsg(dH,new d({$:5,$0:dJ.message,$1:dJ.stack}))]);});});}};};r.rtn=function(dD){return{$:0,$0:function(dE){return cG.Return([{$:1,$0:dD},dE[0],d.NoMsg]);}};};v.absorbO=function(dD,dE){function dF(dH){return k.absorbO(dD,dH);}function dG(dH){return cG.Return(dH);}return cG.Bind(dE,function(dH){return dG(dF(dH));});};v.absorbR=function(dD){var dE;function dF(dG){return cG.Return(dG);}return cG.Bind(dD,(dE=function(dG){return k.bindP(a.id,dG);},function(dG){return dF(dE(dG));}));};v.insertR=function(dD){return dD.$==0?v.map(function(dE){return{$:0,$0:dE};},dD.$0):v.rtn(c.Error$1(dD.$0));};v.insertO=function(dD){var dE;dE=dD==null?null:{$:1,$0:v.map(function(dF){return{$:1,$0:dF};},dD.$0)};return dE==null?v.rtn(null):dE.$0;};v.sequenceSeq=function(dD){return v.traverseSeq(a.id,dD);};v.traverseSeq=function(dD,dE){return v.map(a.id,cE.foldBack(function(dF,dG){return v.op_GreaterGreaterEquals(dD(dF),function(dH){return v.op_GreaterGreaterEquals(dG,function(dI){return v.rtn(new cF.T({$:1,$0:dH,$1:dI}));});});},cE.ofSeq(dE),v.rtn(cF.T.Empty)));};v.op_GreaterGreaterEquals=function(dD,dE){return v.bind(dE,dD);};v.whileLoop=function(dD,dE){return dD()?v.bind(function(){return v.whileLoop(dD,dE);},dE()):v.rtn();};v.mapP=function(dD,dE){return v.bindP(function(dF){return v.rtn(dD(dF));},dE);};v.map=function(dD,dE){return v.bind(function(dF){return v.rtn(dD(dF));},dE);};v.bindP=function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dE,function(dG){return dG.$==1?cG.Return(c.Error$1(dG.$0)):dD(dG.$0);});}),function(dG){return cG.Return(c.Error$1(new d({$:5,$0:dG.message,$1:dG.stack})));});});};v.bind=function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.Bind(dE,function(dG){var dH,dI;return dG.$==1?(dH=dG.$0,(dI=null,cG.Delay(function(){return cG.Return(c.Error$1(dH));}))):dD(dG.$0);});});};v.iterA=function(dD,dE,dF){function dG(dI){k.iter(dD,dE,dI);}function dH(dI){return cG.Return(dI);}cG.Start(cG.Bind(dF,function(dI){return dH(dG(dI));}),null);};v.iterS=function(dD,dE,dF){throw"iterS cannot be used in JavaScript!";};v.rtnR=function(dD){return cG.Return(dD);};v.rtn=function(dD){return cG.Return({$:0,$0:dD});};v.freeMessage=function(dD){function dE(dF){return cG.Return(dF);}return cG.Bind(dD,function(dF){return dE(k.freeMessage(dF));});};v.mapError=function(dD,dE){function dF(dH){return cI.MapError(dD,dH);}function dG(dH){return cG.Return(dH);}return cG.Bind(dE,function(dH){return dG(dF(dH));});};w=e.AsyncResultBuilder=cA.Class({For:function(dD,dE){var dF;dF=this;return this.Using(cH.Get(dD),function(dG){return dF.While(function(){return dG.MoveNext();},dF.Delay(function(){return dE(dG.Current());}));});},While:function(dD,dE){return v.whileLoop(dD,dE);},Using:function(dD,dE){return cG.Using(dD,dE);},TryFinally:function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.TryFinally(cG.Delay(function(){return dD();}),function(){dE();});});},TryWith:function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return dD();}),function(dG){return dE(dG);});});},Run:function(dD){return dD();},Delay:a.id,Combine:function(dD,dE){return v.bind(dE,v.rtnR(dD));},Combine$1:function(dD,dE){return v.bind(dE,dD);},Bind:function(dD,dE){return v.bind(dE,v.rtnR(dD));},Bind$1:function(dD,dE){return v.bind(dE,dD);},Zero:function(){return v.rtn();},Return:function(dD){return v.rtn(dD);},ReturnFrom:function(dD){return v.rtnR(dD);},ReturnFrom$1:a.id},j,w);w.New=cA.Ctor(function(){j.New.call(this);},w);x=e.AsyncResultBuilderP=cA.Class({For:function(dD,dE){var dF;dF=this;return this.Using(cH.Get(dD),function(dG){return dF.While(function(){return dG.MoveNext();},dF.Delay(function(){return dE(dG.Current());}));});},While:function(dD,dE){return v.whileLoop(dD,dE);},Using:function(dD,dE){return cG.Using(dD,dE);},TryFinally:function(dD,dE){var dF;dF=null;return cG.Delay(function(){try{return dD();}finally{dE();}});},TryWith:function(dD,dE){var dF;dF=null;return cG.Delay(function(){try{return dD();}catch(dG){return dE(dG);}});},Run:function(dD){return v.bindP(dD,v.rtn());},Delay:a.id,Combine:function(dD,dE){return v.bindP(dE,v.rtnR(dD));},Combine$1:function(dD,dE){return v.bindP(dE,dD);},Bind:function(dD,dE){return v.bindP(dE,v.rtnR(dD));},Bind$1:function(dD,dE){return v.bindP(dE,dD);},Zero:function(){return v.rtn();},Return:function(dD){return v.rtn(dD);},ReturnFrom:function(dD){return v.rtnR(dD);},ReturnFrom$1:a.id},j,x);x.New=cA.Ctor(function(){j.New.call(this);},x);y["AsyncResultBuilderP.Combine"]=function(dD,dE,dF){function dG(dI){return{$:0,$0:dI};}function dH(dI){return cG.Return(dI);}return v.bindP(dF,cG.Bind(dE,function(dI){return dH(dG(dI));}));};y["AsyncResultBuilderP.Bind"]=function(dD,dE,dF){function dG(dI){return{$:0,$0:dI};}function dH(dI){return cG.Return(dI);}return v.bindP(dF,cG.Bind(dE,function(dI){return dH(dG(dI));}));};y["AsyncResultBuilderP.ReturnFrom"]=function(dD,dE){function dF(dH){return{$:0,$0:dH};}function dG(dH){return cG.Return(dH);}return cG.Bind(dE,function(dH){return dG(dF(dH));});};y["AsyncResultBuilder.Combine"]=function(dD,dE,dF){function dG(dI){return{$:0,$0:dI};}function dH(dI){return cG.Return(dI);}return v.bind(dF,cG.Bind(dE,function(dI){return dH(dG(dI));}));};y["AsyncResultBuilder.Bind"]=function(dD,dE,dF){function dG(dI){return{$:0,$0:dI};}function dH(dI){return cG.Return(dI);}return v.bind(dF,cG.Bind(dE,function(dI){return dH(dG(dI));}));};y["AsyncResultBuilder.ReturnFrom"]=function(dD,dE){function dF(dH){return{$:0,$0:dH};}function dG(dH){return cG.Return(dH);}return cG.Bind(dE,function(dH){return dG(dF(dH));});};e.asyncResultP=function(){ct.$cctor();return ct.asyncResultP;};e.asyncResult=function(){ct.$cctor();return ct.asyncResult;};z.EndsWith$1=function(dD,dE){return cC.EndsWith(dE,dD)?{$:1,$0:cL.string(dE,{$:1,$0:0},{$:1,$0:dE.length-dD.length-1})}:null;};z.StartsWith$1=function(dD,dE){return cC.StartsWith(dE,dD)?{$:1,$0:cL.string(dE,{$:1,$0:dD.length},null)}:null;};z.skipLastLine$1=function(){ct.$cctor();return ct.skipLastLine;};z.indentStr$1=function(dD){function dE(dG){return z.indent$1(dD,dG);}function dF(dG){return cC.concat("\n",dG);}return function(dG){return dF(dE(dG));};};z.unindentStr$1=function(){ct.$cctor();return ct.unindentStr;};z.indent$1=function(dD,dE){var dF,dG;dF=cC.SplitChars(dE,["\n"],0);return cD.map((dG=cC.replicate(dD," "),function(dH){return dG+dH;}),dF);};z.unindent$1=function(dD){var dE,dF,dG,dH;dE=cC.SplitChars(dD,["\n"],0);dF=(dG=cD.tryFindIndex(function(dI){return" "!==dI;},(dH=cD.tryFind(function(dI){return cC.Trim(dI)!=="";},dE),dH==null?"":dH.$0)),dG==null?0:dG.$0);return cD.filter(function(dI){return!cC.StartsWith(dI,"# 1 ");},cD.map(function(dI){return dI.length<=dF?"":dI.substring(dF);},dE));};z.skipFirstLine$1=function(dD){var dE;dE=dD.indexOf("\n");return dE<0?"":cL.string(dD,{$:1,$0:dE+1},null);};z.append$1=function(dD,dE){return dD+dE;};z.trim$1=function(dD){return cC.Trim(dD);};z.contains$1=function(dD,dE){return dE.indexOf(dD)!=-1;};z.delimitedO$1=function(dD,dE,dF){var dG,dH,dI,dJ,dK;dG=z.splitInTwoO$1(dD,dF);return dG==null?null:(dH=dG.$0,(dI=dH[0],(dJ=z.splitInTwoO$1(dE,dH[1]),dJ==null?null:{$:1,$0:(dK=dJ.$0,[dI,dK[0],dK[1]])})));};z.splitInTwoO$1=function(dD,dE){var dF;dF=dE.indexOf(dD);return dF===-1?null:{$:1,$0:[c["String.Left$1"](dE,dF),dE.substring(dF+dD.length)]};};z.splitByChar$1=function(dD,dE){return cC.SplitChars(dE,[dD],0);};A.Guid$1=function(){ct.$cctor();return ct["|Guid|_|"];};A.Double$1=function(){ct.$cctor();return ct["|Double|_|"];};A.Single$1=function(){ct.$cctor();return ct["|Single|_|"];};A.Int$1=function(){ct.$cctor();return ct["|Int|_|"];};A.Date$1=function(){ct.$cctor();return ct["|Date|_|"];};A.parseGuidO$1=function(){ct.$cctor();return ct.parseGuidO;};A.parseDoubleO$1=function(){ct.$cctor();return ct.parseDoubleO;};A.parseSingleO$1=function(){ct.$cctor();return ct.parseSingleO;};A.parseIntO$1=function(){ct.$cctor();return ct.parseIntO;};A.parseDateO$1=function(){ct.$cctor();return ct.parseDateO;};A.tryParseWith$1=function(dD){function dE(dF,dG){return dF?{$:1,$0:dG}:null;}return function(dF){return dE.apply(null,dD(dF));};};B.PostAndAsyncReply=function(dD,dE,dF){return dD.PostAndAsyncReply(function(dG){return[dG,dE];},dF);};D.applyReply=function(dD,dE){return D.applyReplyA(function(dF){var dG;dG=null;return cG.Delay(function(){return cG.Return(dD(dF));});},dE);};D.applyReplyA=function(dD,dE){return dE.PostAndAsyncReply(function(dF){return function(dG){var dH;dH=null;return cG.Delay(function(){return cG.Bind(dD(dG),function(dI){dF(dI[1]);return cG.Return(dI[0]);});});};},null);};D.apply=function(dD,dE){D.applyA(function(dF){var dG;dG=null;return cG.Delay(function(){return cG.Return(dD(dF));});},dE);};D.applyA=function(dD,dE){dE.mailbox.AddLast(function(dF){var dG;dG=null;return cG.Delay(function(){return dD(dF);});});dE.resume();};D.setState=function(dD,dE){dE.mailbox.AddLast(function(){var dF;dF=null;return cG.Delay(function(){return cG.Return(dD);});});dE.resume();};D.getStateA=function(dD){return dD.PostAndAsyncReply(function(dE){return function(dF){var dG;dG=null;return cG.Delay(function(){dE(dF);return cG.Return(dF);});};},null);};C.defHandler=function(dD,dE){c.print$1(dD);return dE;};C.stateFull=function(dD,dE){return cN.Start(function(dF){function dG(dH){var dI;dI=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dF.Receive(null),function(dJ){return cG.Bind(dJ(dH),function(dK){return dG(dK);});});}),function(dJ){return dG(dD(dJ,dH));});});}return dG(dE);},null);};C.fold=function(dD,dE,dF){return C.foldA(dD,function(dG,dH){var dI;dI=null;return cG.Delay(function(){return cG.Return(dE(dG,dH));});},dF);};C.foldA=function(dD,dE,dF){return cN.Start(function(dG){function dH(dI){var dJ;dJ=null;return cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dG.Receive(null),function(dK){return cG.Bind(dE(dI,dK),function(dL){return dH(dL);});});}),function(dK){return dH(dD(dK,dI));});});}return dH(dF);},null);};C.call=function(dD,dE){return C.callA(dD,function(dF){var dG;dG=null;return cG.Delay(function(){return cG.Return(dE(dF));});});};C.callA=function(dD,dE){return C.iterA(dD,function(dF){var dG,dH,dI;dG=dF[0];dH=dF[1];dI=null;return cG.Delay(function(){return cG.Bind(dE(dH),function(dJ){dG(dJ);return cG.Zero();});});});};C.iter=function(dD,dE){return C.iterA(dD,function(dF){var dG;dG=null;return cG.Delay(function(){dE(dF);return cG.Zero();});});};C.iterA=function(dD,dE){return cN.Start(function(dF){var dG;dG=null;return cG.Delay(function(){return cG.While(function(){return true;},cG.Delay(function(){return cG.TryWith(cG.Delay(function(){return cG.Bind(dF.Receive(null),function(dH){return cG.Bind(dE(dH),function(){return cG.Return(null);});});}),function(dH){dD(dH);return cG.Zero();});}));});},null);};E.New=function(dD,dE,dF,dG){return{useCount:dD,limitCount:dE,resource:dF,configuration:dG};};F=c.ResourceAgent=cA.Class({increment:function(dD){var dE,dF;dE=this;return(this.respawnRightAfter?(dF=dD.configuration,function(dG){return dE.check(dF,dG);}):a.id)(E.New(dD.useCount+1,dD.limitCount,dD.resource,dD.configuration));},check:function(dD,dE){return dE.useCount<dE.limitCount&&this.alive(dE.resource)&&cK.Equals(dD,dE.configuration)?dE:this.respawn(E.New(dE.useCount,dE.limitCount,dE.resource,dD));},respawn:function(dD){this.clean(dD.resource);return E.New(0,dD.limitCount,this.ctor(dD.configuration),dD.configuration);},Respawn:function(){var dD;dD=this;D.apply(function(dE){return dD.respawn(dE);},this.agent);},set_Configuration:function(dD){var dE;dE=this;!cK.Equals(dD,this.get_Configuration())?D.apply(function(dF){return dE.respawn(E.New(dF.useCount,dF.limitCount,dF.resource,dD));},this.agent):void 0;},set_LimitCount:function(dD){D.apply(function(dE){return E.New(dE.useCount,dD,dE.resource,dE.configuration);},this.agent);},get_Configuration:function(){return this.get_State().configuration;},get_LimitCount:function(){return this.get_State().limitCount;},get_State:function(){throw"getState not available in JavaScript";},AsyncProcessA:function(dD,dE){var dF;dF=this;return D.applyReplyA(function(dG){var dH;dH=null;return cG.Delay(function(){var dI;dI=dF.check(dE==null?dG.configuration:dE.$0,dG);return cG.Bind(dD(dI.resource),function(dJ){return cG.Return([dF.increment(dI),dJ]);});});},this.agent);},ProcessA:function(dD,dE){return this.AsyncProcessA(function(dF){var dG;dG=null;return cG.Delay(function(){return cG.Return(dD(dF));});},dE);},Dispose:function(){try{this.clean(this.get_State().resource);}catch(dD){null;}}},j,F);F.New=cA.Ctor(function(dD,dE,dF,dG,dH,dI){var dJ;dJ=this;j.New.call(this);this.ctor=dE;this.clean=dG==null?a.ignore:dG.$0;this.alive=dH==null?function(){return true;}:dH.$0;this.respawnRightAfter=dI==null||dI.$0;this.agent=C.stateFull(function(dK,dL){c.print$1(dK);return dJ.respawn(dL);},E.New(0,dD,this.ctor(dF),dF));},F);G.runSameConfig=function(dD,dE){return r.runReader([dD,dD.get_Configuration()],dE);};G.run=function(dD,dE,dF){return r.runReader([dD,dE],dF);};G.ofResourceRm=function(dD){var dE;dE=dD.$0;return{$:0,$0:function(dF){var dG,dH,dI,dJ;dG=dF[0];dH=dF[1];dI=dG[1];dJ=dG[0];return dJ.AsyncProcessA(function(dK){var dL;dL=null;return cG.Delay(function(){return cG.Bind(dE([dK,dH]),function(dM){return cG.Return([dM[0],[dJ,dI],dM[2]]);});});},{$:1,$0:dI});}};};G.createAgentRm=function(dD,dE){return s.op_GreaterGreaterEquals(r.readerFun(function(dF){return dF[0].AsyncProcessA(function(dG){return dD(dG,dE);},{$:1,$0:dF[1]});}),r.ofAsync);};I.New=function(dD,dE,dF,dG){return{cargId:dD,name:dE,unique:dF,build:dG};};J=H.CommArgCollection=cA.Class({get_CommArgs:function(){return this.$0;}},null,J);J.op_Addition=function(dD,dE){return J.addPairs(dE.$0,dD);};J.op_Addition$1=function(dD,dE){return J.addPair(dE[0],dE[1],dD);};J.op_Addition$2=function(dD,dE){return J.addPairs(dE,dD);};K=H.TypedCommArg=cA.Class({get_CommArg:function(){return this.$0;}},null,K);K.op_DivisionAssignment=function(dD,dE){return[dD.$0,o.op_BarGreaterGreater(o.op_BarGreaterGreater(n.getS(),dE),a.id)];};K.op_DivisionAssignment$1=function(dD,dE){return[dD.$0,o.op_BarGreaterGreater(dE,a.id)];};K.op_DivisionAssignment$2=function(dD,dE){return[dD.$0,o.op_BarGreaterGreater(o.rtn(dE),a.id)];};L.getFloatR=function(dD,dE){return dD.$0.build.$==3?{$:0,$0:dE}:c.Error$1(new d({$:1,$0:"expecting TFloat"}));};L.getBoolR=function(dD,dE){return dD.$0.build.$==2?{$:0,$0:dE}:c.Error$1(new d({$:1,$0:"expecting TBool"}));};L.getStringR=function(dD,dE){return dD.$0.build.$==1?{$:0,$0:dE}:c.Error$1(new d({$:1,$0:"expecting TString"}));};L.getIntR=function(dD,dE){return dD.$0.build.$==0?{$:0,$0:dE}:c.Error$1(new d({$:1,$0:"expecting TInt"}));};L.argumentTRm=function(dD,dE){return L.argumentRm(dD,dE);};L.argumentRm=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(dE,function(dG){var dH;return dF.Return((dH=dD.build,dH.$==1?dH.$0(dG):dH.$==2?dH.$0(dG):dH.$==3?dH.$0(dG):dH.$0(dG)));});}));};L.NewFloat=function(dD,dE,dF){return new K({$:0,$0:L.New0(dD,dE,{$:3,$0:dF})});};L.NewBool=function(dD,dE,dF){return new K({$:0,$0:L.New0(dD,dE,{$:2,$0:dF})});};L.NewString=function(dD,dE,dF){return new K({$:0,$0:L.New0(dD,dE,{$:1,$0:dF})});};L.NewInt=function(dD,dE,dF){return new K({$:0,$0:L.New0(dD,dE,{$:0,$0:dF})});};L.New0=function(dD,dE,dF){return I.New({$:0,$0:cP.NewGuid()},dD,dE,dF);};J.addPairs=function(dD,dE){return J.append(dE,new J({$:0,$0:dD}));};J.append=function(dD,dE){var dF,dG;function dH(dI,dJ){return function(dK){return J.addPair(dI,dJ,dK);};}dF=(dG=function(dI){return dH.apply(null,a.id(dI));},function(dI){return function(dJ){return(dG(dJ))(dI);};});return cD.fold(function(dI,dJ){return(dF(dI))(dJ);},dD,dE.get_CommArgs());};J.addPair=function(dD,dE,dF){function dG(dH,dI){return!cK.Equals(dH.cargId,dD.cargId);}return new J({$:0,$0:cE.ofSeq(cD.append((dD.unique?function(dH){return cD.filter(function(dI){return dG(dI[0],dI[1]);},dH);}:a.id)(dF.$0),cF.ofArray([[dD,dE]])))});};J.getBoolR=function(dD,dE,dF){var dG,dH;dG=n.run(dF,J.getBoolRm(dD,dE));dH=dG[2];return k.ofOption(function(){return dH;},dG[0]);};J.getBoolRm=function(dD,dE){return o.op_BarGreaterGreater(J.tryGetBoolORm(dE),function(dF){return dF==null?dD:dF.$0;});};J.getFloatRm=function(dD){function dE(){return J.argumentNotFound(dD,void 0);}return o.op_GreaterGreaterEquals(J.tryGetFloatORm(dD),function(dF){return n.ofOption(dE,dF);});};J.getStringRm=function(dD){function dE(){return J.argumentNotFound(dD,void 0);}return o.op_GreaterGreaterEquals(J.tryGetStringORm(dD),function(dF){return n.ofOption(dE,dF);});};J.getIntRm=function(dD){function dE(){return J.argumentNotFound(dD,void 0);}return o.op_GreaterGreaterEquals(J.tryGetIntORm(dD),function(dF){return n.ofOption(dE,dF);});};J.findArgRm=function(dD){function dE(){return J.argumentNotFound(dD,void 0);}return o.op_GreaterGreaterEquals(J.tryFindArgORm(dD),function(dF){return n.ofOption(dE,dF);});};J.tryGetFloatORm=function(dD){function dE(dF,dG){return L.getFloatR(dD,dG);}return o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(J.tryFindArgORm(dD),function(dF){var dG;return dF==null?null:{$:1,$0:(dG=dF.$0,dE(dG[0],dG[1]))};}),k.insertO),n.ofResultRM);};J.tryGetBoolORm=function(dD){function dE(dF,dG){return L.getBoolR(dD,dG);}return o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(J.tryFindArgORm(dD),function(dF){var dG;return dF==null?null:{$:1,$0:(dG=dF.$0,dE(dG[0],dG[1]))};}),k.insertO),n.ofResultRM);};J.tryGetStringORm=function(dD){function dE(dF,dG){return L.getStringR(dD,dG);}return o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(J.tryFindArgORm(dD),function(dF){var dG;return dF==null?null:{$:1,$0:(dG=dF.$0,dE(dG[0],dG[1]))};}),k.insertO),n.ofResultRM);};J.tryGetIntORm=function(dD){function dE(dF,dG){return L.getIntR(dD,dG);}return o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(J.tryFindArgORm(dD),function(dF){var dG;return dF==null?null:{$:1,$0:(dG=dF.$0,dE(dG[0],dG[1]))};}),k.insertO),n.ofResultRM);};J.tryFindArgORm=function(dD){return o.op_GreaterGreaterEquals(n.readerFun(function(dE){var dF,dG;return n.insertO((dF=J.tryFindArgO(dD,dE),dF==null?null:{$:1,$0:(dG=dF.$0,n.insertFst(dG[0],dG[1]))}));}),a.id);};J.tryFindArgO=function(dD,dE){var dF;dF=dD.$0;return cD.tryFind(function(dG){return cK.Equals(dG[0].cargId,dF.cargId);},dE.$0);};J.argumentNotFound=function(dD,dE){return new d({$:1,$0:(function(dF){return function(dG){return dF("argument not found: "+cB.toSafe(dG));};}(a.id))(dD.$0.name)});};J.containsAnyOfRm=function(dD){return n.readerFun(function(dE){function dF(dG,dH){return dD.Contains(dG.cargId);}return cD.exists(function(dG){return dF(dG[0],dG[1]);},dE.$0);});};J.argumentsRm=function(dD){return o.op_GreaterGreaterEquals(J.filterRm(dD),function(dE){return n.traverseSeq(function(dF){return L.argumentTRm(dF[0],dF[1]);},dE);});};J.filterRm=function(dD){return n.readerFun(function(dE){return cD.filter(dD,dE.$0);});};J.existsRm=function(dD){return n.readerFun(function(dE){return cD.exists(dD,dE.$0);});};J.argsRm=function(){return n.readerFun(function(dD){return dD.$0;});};J.contains=function(dD,dE){function dF(dG,dH){return dG.cargId;}return cD.contains(dD.$0.cargId,cD.map(function(dG){return dF(dG[0],dG[1]);},dE.$0));};J.trueForAll=function(dD){return true;};N.NoPrepo={$:12};N.PrepoEndIf={$:9};N.PrepoElse={$:8};M.getSourceDir=function(dD,dE){var dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO;dF=cE.get(dE,0);dG=cE.tryItem(1,dE);return(dI=z.StartsWith$1("////#cd @\"",dF),dI!=null&&dI.$==1?(dH=dI.$0,true):dG!=null&&dG.$==1&&(dJ=z.StartsWith$1("////#cd @\"",dG.$0),dJ!=null&&dJ.$==1&&(dH=dJ.$0,true)))?(dK=cC.Trim(dH),(dM=z.EndsWith$1("\"",dK),dM!=null&&dM.$==1?dL=dM.$0:dL=dK,(dN=z.StartsWith$1("\\",dL),dN!=null&&dN.$==1)?dL:(dO=z.StartsWith$1("/",dL),dO!=null&&dO.$==1)?dL:cK.Equals(cD.tryItem(1,dL),{$:1,$0:":"})?dL:dD+"/"+dL)):dD;};M.separateDirectives=function(dD){var dE,dF,dG,dH,dI;function dJ(dT){return dT[1];}function dK(dT){return dT.$==1?{$:1,$0:dT.$0}:null;}function dL(dT){return dT[1];}function dM(dT){return dT.$==2?{$:1,$0:dT.$0}:null;}function dN(dT){return dT[1];}function dO(dT){return dT.$==6?{$:1,$0:dT.$0}:null;}function dP(dT){return dT[1];}function dQ(dT){return dT.$==5?{$:1,$0:dT.$0}:null;}function dR(dT){return dT[1];}function dS(dT){return dT.$==0?{$:1,$0:dT.$0}:null;}dE=cE.ofSeq(cD.distinct(cD.choose(function(dT){return dK(dJ(dT));},dD)));dF=cE.ofSeq(cD.distinct(cD.choose(function(dT){return dM(dL(dT));},dD)));dG=cE.ofSeq(cD.distinct(cD.choose(function(dT){return dO(dN(dT));},dD)));dH=cE.ofSeq(cD.distinct(cD.choose(function(dT){return dQ(dP(dT));},dD)));dI=cD.tryHead(cD.choose(function(dT){return dS(dR(dT));},dD));return[cE.ofSeq(cD.map(function(dT){return dT[0];},dD)),dE,dF,dG,dH,dI];};M.separatePrepros=function(dD){function dE(dH){var dI;dI=cD.tryLast(cC.SplitStrings(cC.Trim(dH),["\""],1));return dI==null?dH:dI.$0;}function dF(dH){var dI;dI=cD.tryHead(cC.SplitStrings(cC.Trim(dH),["#define "],1));return dI==null?"":dI.$0;}function dG(dH){return"//"+dH;}return cE.map(function(dH){var dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV;dI=true;return dI&&cC.StartsWith(dH,"#define")?[dG(dH),{$:2,$0:dF(dH)}]:dI&&cC.StartsWith(dH,"#cd")?[dG(dH),{$:0,$0:dE(dH)}]:dI&&cC.StartsWith(dH,"#r")?[dG(dH),{$:1,$0:dE(dH)}]:dI&&cC.StartsWith(dH,"#load")?[dG(dH),{$:3,$0:dE(dH)}]:dI&&cC.StartsWith(dH,"#nowarn")?[dG(dH),{$:5,$0:dE(dH)}]:dI&&cC.StartsWith(cC.Trim(dH),"# ")?[dG(dH),{$:4,$0:dE(dH)}]:dI&&cC.StartsWith(cC.Trim(dH),"#line")?[dG(dH),{$:4,$0:dE(dH)}]:dI&&cC.StartsWith(dH,"#I")?[dG(dH),{$:6,$0:dE(dH)}]:dI&&cC.StartsWith(dH,"#if")?[dH,{$:7,$0:dH}]:dI&&cC.StartsWith(dH,"#else")?[dH,N.PrepoElse]:dI&&cC.StartsWith(dH,"#endif")?[dH,N.PrepoEndIf]:dI&&cC.StartsWith(dH,"#light")?[dH,{$:10,$0:false}]:dI&&cC.StartsWith(dH,"#")?[dG(dH),{$:11,$0:dH}]:[dH,N.NoPrepo];},dD);};M.extractDefines=function(dD){var dE;dE=dD.$0;return cC.StartsWith(dE,"////-d:")?cL.string(dE,{$:1,$0:4},{$:1,$0:dE.indexOf("\n")-1}):"";};O=c.SnippetId=cA.Class({get_Id:function(){return this.$0;}},null,O);O.get_Empty=function(){return new O({$:0,$0:"00000000-0000-0000-0000-000000000000"});};P.New=function(dD,dE,dF,dG,dH,dI,dJ){return{snpId:dD,snpName:dE,snpContent:dF,snpParentIdO:dG,snpPredIds:dH,snpProperties:dI,snpGeneration:dJ};};Q.New=function(dD,dE,dF,dG,dH,dI){return{generation:dD,ordered:dE,fetcher:dF,predecesorsCache:dG,reducedCache:dH,prepCode:dI};};R.codeFsxRm=function(dD){return o.op_BarGreaterGreater(R.fastCodeRm({$:1,$0:dD},{$:1,$0:dD}),function(dE){return dE[0];});};R.fastCodeRm=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(R.fastReducedRm(dD,dE),function(dG){return dF.Return(R.finishCode(dG[0],dG[1],dG[2],dG[3],dG[4],dG[5],dG[6]));});}));};R.fastReducedRm=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(n.insertO(dD==null?null:{$:1,$0:R.snippetORm(dD.$0)}),function(dG){return dF.Bind(n.insertO(dE==null?null:{$:1,$0:R.snippetORm(dE.$0)}),function(dH){var dI,dJ,dK,dL;dI=dG==null?null:dG.$0;dJ=dH==null?null:dH.$0;return(dJ!=null&&dJ.$==1?dI!=null&&dI.$==1?(dK=[dI.$0,dJ.$0],false):true:true)?dF.ReturnFrom(R.reducedCodeRm([])):(dL=dK[0],dF.Bind(R.uniquePredsRm(dK[1]),function(dM){var dN;dN=new cR.New(dM);return dF.Bind((R.reducedOthersORmMemo())([true,dL.snpId,dN]),function(dO){return dF.Bind((R.reducedOthersORmMemo())([false,dL.snpId,dN]),function(dP){return dF.Bind(R.separateCodeRm(dL),function(dQ){var dR,dS,dT,dU;dR=(dS=dO==null?null:{$:1,$0:(function(dV){var dW,dX,dY,dZ,d0,d1,d2;dW=dV[0];dX=dV[1];dY=dV[2];dZ=dV[3];d0=dV[4];d1=dV[5];d2=dV[6];return function(d3){return R.addSeps(dW,dX,dY,dZ,d0,d1,d2,d3[0],d3[1],d3[2],d3[3],d3[4],d3[5],d3[6]);};}(dO.$0))(dQ)},dS==null?dQ:dS.$0);return dF.Return((dT=dP==null?null:{$:1,$0:(dU=dP.$0,R.addSeps(dR[0],dR[1],dR[2],dR[3],dR[4],dR[5],dR[6],dU[0],dU[1],dU[2],dU[3],dU[4],dU[5],dU[6]))},dT==null?dR:dT.$0));});});});}));});});}));};R.reducedOthersORmMemo=function(){function dD(dE){return dE.reducedCache();}return function(dE){return n.memoizeRm(dD,function(dF){return R.reducedOthersORm(dF[0],dF[1],dF[2]);},dE);};};R.reducedOthersORm=function(dD,dE,dF){var dG;dG=n.fusion();return dG.Run(dG.Delay(function(){function dH(dI){return!cK.Equals(dI.snpId,dE)&&dF.Contains(dI.snpId);}return dG.Bind(o.op_BarGreaterGreater(o.op_BarGreaterGreater(R.orderedRm(),(dD?function(dI){return function(dJ){return cD.takeWhile(dI,dJ);};}:function(dI){return function(dJ){return cD.skipWhile(dI,dJ);};})(function(dI){return!cK.Equals(dI.snpId,dE);})),function(dI){return cD.filter(dH,dI);}),function(dI){return cD.isEmpty(dI)?dG.Return(null):dG.Bind(R.reducedCodeRm(dI),function(dJ){return dG.Return({$:1,$0:dJ});});});}));};R.finishCode=function(dD,dE,dF,dG,dH,dI,dJ){var dK,dL;dK=cC.concat(" ",cD.map(function(dM){return"-d:"+dM;},cD.sort(dG)));dL=cF.ofSeq(cD.delay(function(){return cD.append(dK!==""?["////"+dK]:[],cD.delay(function(){return cD.append(dJ!=null?[(function(dM){return function(dN){return dM("////#cd @\""+cB.toSafe(dN)+"\"");};}(a.id))(dJ.$0)]:[],cD.delay(function(){return cD.append(cD.map(function(dM){return function(dN){return dM("#I @\""+cB.toSafe(dN)+"\"");};}(a.id),dH),cD.delay(function(){return cD.append(cD.map(function(dM){return function(dN){return dM("#r @\""+cB.toSafe(dN)+"\"");};}(a.id),dF),cD.delay(function(){return cD.map(function(dM){return function(dN){return dM("#nowarn \""+cB.toSafe(dN)+"\"");};}(a.id),dI);}));}));}));}));}));return[cC.concat("\n",cD.append(dL,dE)),cE.ofSeq((cD.mapFold(function(dM,dN){var dO;dO=dN[2];return[[[dN[0],dN[1]],[dN[3],dM,dM+dO]],dM+dO];},dL.get_Length(),dD))[0])];};R.reducedCodeRm=function(dD){var dE;dE=n.fusion();return dE.Run(dE.Delay(function(){return dE.Bind(n.traverseSeq(R.separateCodeRm,dD),function(dF){var dG;return dE.Return((dG=cD.reduce(function(dH,dI){return(function(dJ){var dK,dL,dM,dN,dO,dP,dQ;dK=dJ[0];dL=dJ[1];dM=dJ[2];dN=dJ[3];dO=dJ[4];dP=dJ[5];dQ=dJ[6];return function(dR){return R.addSeps(dK,dL,dM,dN,dO,dP,dQ,dR[0],dR[1],dR[2],dR[3],dR[4],dR[5],dR[6]);};}(dH))(dI);},cD.isEmpty(dF)?[[[],[],[],[],[],[],null]]:dF),[dG[0],[cC.concat("\n",dG[1])],dG[2],dG[3],dG[4],dG[5],dG[6]]));});}));};R.addSeps=function(dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ){return[dD.concat(dK),dE.concat(dL),cE.ofSeq(cD.distinct(cD.append(dF,dM))),cE.ofSeq(cD.distinct(cD.append(dG,dN))),cE.ofSeq(cD.distinct(cD.append(dH,dO))),cE.ofSeq(cD.distinct(cD.append(dI,dP))),dJ==null?dQ:dJ];};R.separateCodeRm=function(dD){var dE;dE=n.fusion();return dE.Run(dE.Delay(function(){return dE.Bind(R.indentRm(dD),function(dF){var dG;function dH(dI,dJ){return[cC.replicate(dF," ")+dI,dJ];}dG=(dF===0?[a.id,""]:[function(dI){return cE.map(function(dJ){return dH(dJ[0],dJ[1]);},dI);},(function(dI){return function(dJ){return dI("("+a.String(dJ)+")");};}(a.id))(dF)])[0];return dE.Bind(R.prepareCodeRm(dD),function(dI){var dJ,dK;dJ=M.separateDirectives(dG(M.separatePrepros(cC.SplitChars(dI,["\n"],0))));dK=dJ[0];return dE.Return([[[dD.snpId,R.snippetName(dD.snpName,dD.snpContent),cE.length(dK),dF]],dK,dJ[1],dJ[2],dJ[3],dJ[4],dJ[5]]);});});}));};R.ancestorsRm=function(dD){function dE(dF,dG){var dH;dH=n.fusion();return dH.Run(dH.Delay(function(){return dH.Bind(R.parentORm(dF),function(dI){var dJ;return dI==null?dH.Return(dG):(dJ=dI.$0,dH.ReturnFrom(dE(dJ,new cF.T({$:1,$0:dJ,$1:dG}))));});}));}return dE(dD,cF.T.Empty);};R.levelRm=function(dD){function dE(dF,dG){var dH;dH=n.fusion();return dH.Run(dH.Delay(function(){return dH.Bind(R.parentORm(dF),function(dI){return dI!=null&&dI.$==1?dH.ReturnFrom(dE(dI.$0,dG+1)):dH.Return(dG);});}));}return dE(dD,0);};R.indentRm=function(dD){function dE(dF){var dG;dG=n.fusion();return dG.Run(dG.Delay(function(){var dH,dI,dJ,dK;dH=(dI=R.propertyPairO("IndentChildren",dF),dI!=null&&dI.$==1?[(A.parseIntO$1())(dI.$0[0]),(A.parseIntO$1())(dI.$0[1])]:[null,null]);dJ=dH[1];dK=dH[0];return dG.Bind(R.parentORm(dF),function(dL){return dL==null?dG.Return([0,[dK==null?4:dK.$0,dJ==null?4:dJ.$0]]):dG.Bind(dE(dL.$0),function(dM){var dN,dO;dN=dM[1][1];dO=dM[1][0];return dG.Return([dO,[dO+(dK==null?dN:dK.$0),dJ==null?dN:dJ.$0]]);});});}));}return o.op_BarGreaterGreater(dE(dD),function(dF){return dF[0];});};R.propertyHierORm=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){var dG,dH;dG=R.propertyO(dD,dE);return dG==null?dF.Bind(R.parentORm(dE),function(dI){return dI==null?dF.Return(null):dF.Bind(R.propertyHierORm(dD,dI.$0),function(dJ){var dK,dL,dM;return dF.Return(dJ==null?null:{$:1,$0:(dK=dJ.$0,(dL=dK[0],(dM=dK[1][1],[dL,[dM,dM]])))});});}):dF.Return({$:1,$0:[dE,(dH=cC.SplitStrings(dG.$0,["|-|"],1),[cE.get(dH,0),cE.length(dH)>1?cE.get(dH,1):cE.get(dH,0)])]});}));};R.modifiedRecRm=function(dD){var dE;dE=n.fusion();return dE.Run(dE.Delay(function(){return dE.Bind(R.modifiedRm(dD),function(dF){return dF?dE.Return(true):dE.Bind(R.uniquePredsRm(dD),function(dG){return dE.Bind(n.sequenceSeq(cD.map(R.snippetORm,dG)),function(dH){return dE.Bind(n.sequenceSeq(cD.map(R.modifiedRm,cD.choose(a.id,dH))),function(dI){return dE.Return(cD.contains(true,dI));});});});});}));};R.predsGenerationRm=function(dD){var dE;dE=n.fusion();return dE.Run(dE.Delay(function(){return dE.Bind(o.op_GreaterGreaterEquals(R.uniquePredsRm(dD),function(dF){return n.traverseSeq(R.snippetRm,dF);}),function(dF){return dE.Return(cD.max(cD.map(function(dG){return dG.snpGeneration;},dF)));});}));};R.uniquePredsRm=function(dD){return(R.predsLRmMemo())(dD.snpId);};R.predsLRmMemo=function(){function dD(dE){return dE.predecesorsCache();}return function(dE){return n.memoizeRm(dD,R.predsLRm,dE);};};R.predsLRm=function(dD){var dE;dE=n.fusion();return dE.Run(dE.Delay(function(){var dF,dG;dF=cF.ofArray([dD]);dG=cF.T.Empty;return dE.Combine(dE.While(function(){return!(dF.$==0);},dE.Delay(function(){var dH,dI;return dF.$==1?(dH=dF.$1,(dI=dF.$0,cF.contains(dI,dG)?(dF=dH,dE.Zero()):dE.Bind(R.snippetORm(dI),function(dJ){var dK,dL;dF=cF.append(dH,(dK=dJ==null?null:{$:1,$0:(dL=dJ.$0,cF.append(cF.ofSeq(dL.snpPredIds),cS.toList(dL.snpParentIdO)))},dK==null?cF.T.Empty:dK.$0));dG=new cF.T({$:1,$0:dI,$1:dG});return dE.Zero();}))):dE.Zero();})),dE.Delay(function(){return dE.Return(dG);}));}));};R.snippetFromRefORm=function(dD){return dD.$==1?R.snippetFromPathORm(dD.$0):R.snippetORm(dD.$0);};R.snippetFromPathORm=function(dD){var dE;dE=n.fusion();return dE.Run(dE.Delay(function(){return dE.Bind(R.orderedRm(),function(dF){function dG(dH,dI){return function(dJ){return dH.length===0?[null,[[],dI]]:R.snippetName(dJ.snpName,dJ.snpContent)!==cE.get(dH,0)||!cK.Equals(dJ.snpParentIdO,dI)?[null,[dH,dI]]:dH.length>1?[null,[cL.array(dH,{$:1,$0:1},null),{$:1,$0:dJ.snpId}]]:[{$:1,$0:dJ},[[],dI]];};}return dE.Return(cD.tryHead(cD.choose(a.id,(cD.mapFold(function(dH,dI){return(function(dJ){return dG(dJ[0],dJ[1]);}(dH))(dI);},[dD,null],dF))[0])));});}));};R.pathRm=function(dD){var dE;function dF(dG){return o.op_BarGreaterGreater(R.pathRm(dG.snpId),function(dH){return new cF.T({$:1,$0:dG.snpId,$1:dH});});}return o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(R.snippetORm(dD),function(dG){return dG==null?null:{$:1,$0:R.parentORm(dG.$0)};}),n.insertO),function(dG){return dG==null?null:a.id(dG.$0);}),function(dG){return dG==null?null:{$:1,$0:dF(dG.$0)};}),n.insertO),(dE=cF.T.Empty,function(dG){return dG==null?dE:dG.$0;}));};R.snippetNameRm=function(dD){return o.op_BarGreaterGreater(R.snippetRm(dD),function(dE){return R.snippetName(dE.snpName,dE.snpContent);});};R.snippetRm=function(dD){return n.absorbO(function(){return new d({$:1,$0:(function(dE){return function(dF){return dE("Snippet not found "+cw.p(dF));};}(a.id))(dD)});},R.snippetORm(dD));};R.prepareCodeRm=function(dD){return n.readerFun(function(dE){return dE.prepCode(dD);});};R.orderedRm=function(){return n.readerFun(function(dD){return dD.ordered;});};R.childrenRm=function(dD){return n.readerFun(function(dE){return cD.filter(function(dF){return cK.Equals(dF.snpParentIdO,{$:1,$0:dD});},dE.ordered);});};R.modifiedRm=function(dD){return n.readerFun(function(dE){return dD.snpGeneration>dE.generation;});};R.maxGenerationRm=function(){return n.readerFun(function(dD){return cD.max(cD.map(function(dE){return dE.snpGeneration;},dD.ordered));});};R.predecessorsRm=function(dD){return n.readerFun(function(dE){return cD.choose(dE.fetcher,dD.snpPredIds);});};R.parentORm=function(dD){return n.readerFun(function(dE){var dF;dF=dD.snpParentIdO;return dF==null?null:dE.fetcher(dF.$0);});};R.snippetORm=function(dD){return n.readerFun(function(dE){return dE.fetcher(dD);});};R.propertyPairO=function(dD,dE){var dF,dG,dH,dI;dF=R.propertyO(dD,dE);return dF==null?null:{$:1,$0:(dG=cC.SplitStrings(dF.$0,[R.tieFighter()],1),[cE.get(dG,0),(dH=cE.tryItem(1,dG),(dI=cE.get(dG,0),dH==null?dI:dH.$0))])};};R.tieFighter=function(){ct.$cctor();return ct.tieFighter;};R.propertyO=function(dD,dE){function dF(dG,dH){return dG===dD?{$:1,$0:dH}:null;}return cE.tryPick(function(dG){return dF(dG[0],dG[1]);},dE.snpProperties);};R.nameSanitized=function(dD){var dE,dF;dE=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return cC.Filter(function(dG){return!cE.contains(dG,dE);},dD.snpName)+" "+(dF=dD.snpId.get_Id(),a.String(dF));};R.snippetName=function(dD,dE){var dF;return dD!==""?dD:(dF=cD.tryHead(cD.filter(function(dG){return!(cC.StartsWith(dG,"#")||cC.StartsWith(dG,"[<")||cC.StartsWith(dG,"//"));},cD.map(cC.Trim,cC.SplitChars(dE,["\n"],1)))),dF==null?"<empty>":dF.$0);};R.defaultSnippet=function(){ct.$cctor();return ct.defaultSnippet;};R.New=function(dD,dE,dF){return P.New(new O({$:0,$0:cP.NewGuid()}),dD,dE,dF,new cR.New$1(null),[],(R.getNextGeneration())());};R.getNextGeneration=function(){ct.$cctor();return ct.getNextGeneration;};R.setGeneration=function(){ct.$cctor();return ct.setGeneration;};S.Hole={$:0};U.New=function(dD,dE,dF,dG,dH,dI,dJ){return{id:dD,isExpandedRm:dE,canHaveChildrenRm:dF,childrenRm:dG,pathRm:dH,parentORm:dI,newChildrenRm:dJ};};T.removeNodeOutdentChildren=function(dD,dE){var dF;function dG(dH,dI){return o.op_GreaterGreaterEquals(dH,function(dJ){return T.outdentNode(dI,dJ);});}return o.op_GreaterGreaterEquals(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(dD.childrenRm(),cE.ofSeq),(dF=o.rtn(dE),function(dH){return cD.fold(dG,dF,dH);})),function(dH){return T.removeNode(dD,dH);});};T.outdentNode=function(dD,dE){var dF;function dG(dH){return T.moveToSibling(true,dD,dH,dE);}return o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(dD.parentORm(dE),function(dH){return dH==null?null:{$:1,$0:dG(dH.$0)};}),(dF=o.rtn(dE),function(dH){return dH==null?dF:dH.$0;}));};T.indentNode=function(dD,dE){var dF;function dG(dI){return!cK.Equals(dD.id(),dI.id());}function dH(dI,dJ){return o.op_GreaterGreaterEquals(dJ.canHaveChildrenRm(),function(dK){return dK?o.rtn({$:1,$0:dJ}):dI;});}return o.op_GreaterGreaterEquals(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(dD.parentORm(dE),function(dI){return dI!=null&&dI.$==1?o.op_BarGreaterGreater(dI.$0.childrenRm(),function(dJ){var dK;dK=cE.ofSeq(dJ);return dK;}):o.rtn(dE);}),function(dI){return cD.takeWhile(dG,dI);}),(dF=o.rtn(null),function(dI){return cD.fold(dH,dF,dI);})),function(dI){var dJ;return dI!=null&&dI.$==1?(dJ=dI.$0,o.op_GreaterGreaterEquals(T.removeNode(dD,dE),function(dK){return T.addChild(true,dD,dJ,dK);})):o.rtn(dE);});};T.addChild=function(dD,dE,dF,dG){var dH;dH=n.fusion();return dH.Run(dH.Delay(function(){return dH.Bind(dF.pathRm(),function(dI){function dJ(dK){var dL,dM;return cK.Equals(dK.id(),dF.id())?dD?o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater(dK.childrenRm(),cE.ofSeq),(dL=cF.ofArray([dE]),function(dN){return cD.append(dN,dL);})),cE.ofSeq),dK.newChildrenRm):o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater(dK.childrenRm(),cE.ofSeq),(dM=cF.ofArray([dE]),function(dN){return cD.append(dM,dN);})),cE.ofSeq),dK.newChildrenRm):cF.contains(dK.id(),dI)?o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(dK.childrenRm(),cE.ofSeq),function(dN){return cD.map(dJ,dN);}),n.sequenceSeq),cE.ofSeq),dK.newChildrenRm):o.rtn(dK);}return dH.ReturnFrom(n.sequenceSeq(cD.map(dJ,dG)));});}));};T.moveToSibling2=function(dD,dE,dF,dG){var dH;dH=n.fusion();return dH.Run(dH.Delay(function(){return dH.Bind(T.tryFindId(dE,dG),function(dI){var dJ;return dI!=null&&dI.$==1?(dJ=dI.$0,dH.Bind(T.tryFindId(dF,dG),function(dK){return dK!=null&&dK.$==1?dH.ReturnFrom(T.moveToSibling(dD,dJ,dK.$0,dG)):dH.Return(dG);})):dH.Return(dG);});}));};T.moveToSibling=function(dD,dE,dF,dG){return o.op_GreaterGreaterEquals(T.removeNode(dE,dG),function(dH){return T.addSibling(dD,dE,dF,dH);});};T.tryFindId=function(dD,dE){return T.tryFind(function(dF){return cK.Equals(dF.id(),dD);},dE);};T.tryFind=function(dD,dE){function dF(dG,dH){return o.op_GreaterGreaterEquals(dG,function(dI){var dJ;return dI==null?dD(dH)?o.rtn({$:1,$0:dH}):o.op_GreaterGreaterEquals(dH.childrenRm(),(dJ=o.rtn(null),function(dK){return cD.fold(dF,dJ,dK);})):o.rtn({$:1,$0:dI.$0});});}return cD.fold(dF,o.rtn(null),dE);};T.addSibling=function(dD,dE,dF,dG){function dH(dI){return cK.Equals(dI.id(),dF.id());}return o.op_GreaterGreaterEquals(dF.pathRm(),function(dI){var dJ,dK;function dL(dM){return cK.Equals(dM.id(),dK)?o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(dM.childrenRm(),cE.ofSeq),function(dN){return T.addToParent(dD,dH,dE,dM,dN);}):cF.contains(dM.id(),dJ)?o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(dM.childrenRm(),cE.ofSeq),function(dN){return cD.map(dL,dN);}),n.sequenceSeq),cE.ofSeq),dM.newChildrenRm):o.rtn(dM);}return dI.$==1?(dJ=dI.$1,(dK=dI.$0,n.sequenceSeq(cD.map(dL,dG)))):o.rtn(T.addNodeToSeq(dD,dH,dE,dG));});};T.addToParent=function(dD,dE,dF,dG,dH){return dG.newChildrenRm(cE.ofSeq(T.addNodeToSeq(dD,dE,dF,dH)));};T.addNodeToSeq=function(dD,dE,dF,dG){return cF.ofSeq(cD.delay(function(){return cD.collect(function(dH){return dE(dH)?dD?cD.append([dH],cD.delay(function(){return[dF];})):cD.append([dF],cD.delay(function(){return[dH];})):[dH];},dG);}));};T.removeNodes=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){function dG(dH,dI){var dJ;dJ=n.fusion();return dJ.Run(dJ.Delay(function(){return dJ.Bind(dH,function(dK){var dL,dM;dL=dK[1];dM=dK[0];return dJ.Bind(o.op_BarGreaterGreater(dI.childrenRm(),cE.ofSeq),function(dN){return dJ.Bind(cD.fold(dG,o.rtn([cF.T.Empty,dL]),dN),function(dO){var dP,dQ;dP=dO[1];dQ=dO[0];return dD(dI)?dJ.Return([dM,cF.append(dQ,dP)]):dJ.Bind(dI.newChildrenRm(cE.ofSeq(cD.rev(dQ))),function(dR){return dJ.Return([new cF.T({$:1,$0:dR,$1:dM}),dP]);});});});});}));}return dF.Bind(cD.fold(dG,o.rtn([cF.T.Empty,cF.T.Empty]),dE),function(dH){return dF.Return(cF.rev(cF.append(dH[1],dH[0])));});}));};T.removeNode=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(dD.pathRm(),function(dG){function dH(dI){var dJ;dJ=n.fusion();return dJ.Run(dJ.Delay(function(){return cK.Equals(dI.id(),dD.id())?dJ.Return(null):cF.contains(dI.id(),dG)?dJ.ReturnFrom(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(o.op_BarGreaterGreater(dI.childrenRm(),cE.ofSeq),function(dK){return cD.map(dH,dK);}),n.sequenceSeq),function(dK){return cD.choose(a.id,dK);}),cE.ofSeq),dI.newChildrenRm),function(dK){return{$:1,$0:dK};})):dJ.Return({$:1,$0:dI});}));}return dF.ReturnFrom(o.op_BarGreaterGreater(n.sequenceSeq(cD.map(dH,dE)),function(dI){return cD.choose(a.id,dI);}));});}));};T.listNodes=function(dD,dE){return o.op_BarGreaterGreater(n.sequenceSeq(cD.map(function(dF){return o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(dF.isExpandedRm(),function(dG){var dH;return dG?o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(dF.childrenRm(),cE.ofSeq),(dH=dD+1,function(dI){return T.listNodes(dH,dI);})):o.rtn([]);}),function(dG){return cD.append([[dF,dD]],dG);});},dE)),function(dF){return cD.collect(a.id,dF);});};c["String.Right$1"]=function(dD,dE){var dF,dG;return c["String.Substring2$1"](dD,(dF=0,(dG=dD.length-dE,cK.Compare(dF,dG)===1?dF:dG)),dD.length);};c["String.Left$1"]=function(dD,dE){return c["String.Substring2$1"](dD,0,dE);};c["String.Substring2$1"]=function(dD,dE,dF){var dG,dH;while(true){if(dF<=0)return"";else if(dE<0){dG=dE;dE=0;dF=dF+dG;}else return dE>=dD.length?"":cC.Substring(dD,dE,(dH=dD.length-dE,cK.Compare(dF,dH)===-1?dF:dH));}};c.delayed$1=function(dD,dE){var dF;dF=[null];return function(dG){var dH,dI;dH=dF[0];dH==null?void 0:dH.$0.Cancel$1();dF[0]={$:1,$0:new cT.New()};cG.Start((dI=null,cG.Delay(function(){return cG.Bind(cG.Sleep(dD),function(){dE(dG);return cG.Zero();});})),{$:1,$0:dF[0].$0});};};c.print$1=function(dD){if(typeof dD=="string")((function(dE){return function(dF){return dE(cB.toSafe(dF));};}(function(dE){cU.log(dE);}))(dD));else((function(dE){return function(dF){return dE(cB.prettyPrint(dF));};}(function(dE){cU.log(dE);}))(dD));};c.Error$1=function(dD){return{$:1,$0:dD};};W.ofAsyncResult=function(dD){return new a.Promise(function(dE,dF){cG.StartWithContinuations(dD,function(dG){if(dG.$==1)dF((function(dH){return function(dI){return dH(cB.prettyPrint(dI));};}(a.id))(dG.$0));else dE(dG.$0);},function(dG){dF(dG);},function(dG){dF(dG);},null);});};X.sequenceSeq=function(dD){return X.traverseSeq(a.id,dD);};X.traverseSeq=function(dD,dE){return X.map(a.id,cE.foldBack(function(dF,dG){return X.op_GreaterGreaterEquals(dD(dF),function(dH){return X.op_GreaterGreaterEquals(dG,function(dI){return X.rtn(new cF.T({$:1,$0:dH,$1:dI}));});});},cE.ofSeq(dE),X.rtn(cF.T.Empty)));};X.op_GreaterGreaterEquals=function(dD,dE){return X.bind(dE,dD);};X.rtn=function(dD){return cW.Const(dD);};X.map=function(dD,dE){return cW.Map(dD,dE);};X.bind=function(dD,dE){return cW.Bind(dD,dE);};X.insertWO=function(dD){return dD==null?cW.Const(null):cW.Map(function(dE){return{$:1,$0:dE};},dD.$0);};Y.serLMdField=function(dD,dE,dF,dG){var dH;function dI(dJ,dK){dE(dJ).Set(dH[1](dK));return dJ;}dH=Y.serSeq(dF,dG);return[dD,function(dJ){var dK;dK=(dE(dJ))["var"].Get();return dH[0](dK);},function(dJ){return function(dK){return dI(dJ,dK);};}];};Y.serVarField=function(dD,dE,dF,dG){var dH;function dI(dJ){return dJ.Get();}return[dD,(dH=function(dJ){return dI(dE(dJ));},function(dJ){return dF(dH(dJ));}),function(dJ){return function(dK){cX.Set(dE(dJ),dG(dK));return dJ;};}];};Y.serMap=function(dD,dE,dF,dG){var dH,dI,dJ,dK,dL;function dM(dO){return[dO.K,dO.V];}function dN(dO){return new cY.New(dO);}dH=(dI=Y.serDup(dD,dE,dF,dG),Y.serSeq(dI[0],dI[1]));return[(dJ=function(dO){return cD.map(dM,dO);},(dK=dH[0],function(dO){return dK(dJ(dO));})),(dL=dH[1],function(dO){return dN(dL(dO));})];};Y.serDup=function(dD,dE,dF,dG){var dH,dI,dJ;function dK(dM){return[dH[1](null),dI[1](null)];}function dL(dM){return[dH[1](cE.get(dM,0)),dI[1](cE.get(dM,1))];}dH=[dD,dE];dI=[dF,dG];return[function(dM){return(((cA.Curried3(function(dN,dO,dP){return dN("["+cB.toSafe(dO)+", "+cB.toSafe(dP)+"]");}))(a.id))(dH[0](dM[0])))(dI[0](dM[1]));},(dJ=function(dM){return Y.ifUndefF(dK,dL,dM);},function(dM){return dJ(a.id(dM));})];};Y.serOpt=function(dD,dE){var dF,dG,dH,dI,dJ,dK;function dL(dO){return dO==null?"null":dO.$0;}function dM(dO){return null;}function dN(dO){return{$:1,$0:dO};}dF=[dD,dE];return[(dG=(dH=dF[0],function(dO){return dO==null?null:{$:1,$0:dH(dO.$0)};}),function(dO){return dL(dG(dO));}),(dI=(dJ=(dK=dF[1],function(dO){return dN(dK(dO));}),function(dO){return Y.ifUndefF(dM,dJ,dO);}),function(dO){return dI(a.id(dO));})];};Y.serSet=function(dD,dE){var dF,dG,dH,dI,dJ,dK,dL;function dM(dO){return[];}function dN(dO){return new cR.New(dO);}dF=[dD,dE];return[(dG=(dH=dF[0],function(dO){return new cR.New$1(cZ.OfSeq(cD.map(dH,dO)));}),function(dO){return Y.sprintA(dG(dO));}),(dI=(dJ=(dK=(dL=dF[1],function(dO){return cD.map(dL,dO);}),function(dO){return Y.ifUndefF(dM,dK,dO);}),function(dO){return dJ(a.id(dO));}),function(dO){return dN(dI(dO));})];};Y.serLst=function(dD,dE){var dF,dG,dH,dI,dJ,dK,dL;function dM(dN){return[];}dF=[dD,dE];return[(dG=(dH=dF[0],function(dN){return cF.map(dH,dN);}),function(dN){return Y.sprintA(dG(dN));}),(dI=(dJ=(dK=(dL=dF[1],function(dN){return cD.map(dL,dN);}),function(dN){return Y.ifUndefF(dM,dK,dN);}),function(dN){return dJ(a.id(dN));}),function(dN){return cF.ofSeq(dI(dN));})];};Y.serArr=function(dD,dE){var dF,dG,dH,dI,dJ,dK,dL;function dM(dN){return[];}dF=[dD,dE];return[(dG=(dH=dF[0],function(dN){return cE.map(dH,dN);}),function(dN){return Y.sprintA(dG(dN));}),(dI=(dJ=(dK=(dL=dF[1],function(dN){return cD.map(dL,dN);}),function(dN){return Y.ifUndefF(dM,dK,dN);}),function(dN){return dJ(a.id(dN));}),function(dN){return cE.ofSeq(dI(dN));})];};Y.serSeq=function(dD,dE){var dF,dG,dH,dI,dJ,dK;function dL(dM){return[];}dF=[dD,dE];return[(dG=(dH=dF[0],function(dM){return cD.map(dH,dM);}),function(dM){return Y.sprintA(dG(dM));}),(dI=(dJ=(dK=dF[1],function(dM){return cD.map(dK,dM);}),function(dM){return Y.ifUndefF(dL,dJ,dM);}),function(dM){return dI(a.id(dM));})];};Y.serField=function(dD,dE,dF,dG,dH){return[dD,function(dI){return dG(dE(dI));},function(dI){return function(dJ){return dF(dH(dJ),dI);};}];};Y.serString=function(){ct.$cctor();return ct.serString;};Y.serBool=function(){ct.$cctor();return ct.serBool;};Y.serInt=function(){ct.$cctor();return ct.serInt;};Y.serFloat=function(){ct.$cctor();return ct.serFloat;};Y.sprintA=function(dD){var dE;dE=cC.concat(", ",dD);return(function(dF){return function(dG){return dF("["+cB.toSafe(dG)+"]");};}(a.id))(dE);};Y.deserGuid=function(){ct.$cctor();return ct.deserGuid;};Y.Exists=function(dD,dE){return!dE[dD]?null:{$:1,$0:dE[dD]};};Y.ifUndefF=function(dD,dE,dF){return!dF?dD(dF):dE(dF);};Y.ifUndef=function(dD,dE){return!dE?dD:dE;};Z.LoadFilesAsync=function(dD){var dE;dE=null;return cG.Delay(function(){return cG.For(dD,function(dF){return cG.Bind(Z.LoadFile(dF),function(){return cG.Return(null);});});});};Z.LoadFile=function(dD){var dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR;function dS(dU,dV){return cC.EndsWith(dV,dU)?{$:1,$0:null}:null;}function dT(dU,dV){try{dQ.onload=dU;self.document.head.appendChild(dQ);}catch(dW){dV(dW);}}dE=(dF=((dH=dS(".js",dD),dH!=null&&dH.$==1)?!self.document.querySelector("script[src='"+dD+"']")||((dI=dS(".fsx",dD),dI!=null&&dI.$==1)?!self.document.querySelector("script[src='"+dD+"']")||(dJ=dS(".fs",dD),dJ!=null&&dJ.$==1)&&!self.document.querySelector("script[src='"+dD+"']"):(dK=dS(".fs",dD),dK!=null&&dK.$==1)&&!self.document.querySelector("script[src='"+dD+"']")):(dL=dS(".fsx",dD),dL!=null&&dL.$==1)?!self.document.querySelector("script[src='"+dD+"']")||(dM=dS(".fs",dD),dM!=null&&dM.$==1)&&!self.document.querySelector("script[src='"+dD+"']"):(dN=dS(".fs",dD),dN!=null&&dN.$==1)&&!self.document.querySelector("script[src='"+dD+"']"))?{$:1,$0:Z.createScript(dD)}:(dO=dS(".css",dD),dO!=null&&dO.$==1)?{$:1,$0:Z.createCss(dD)}:(dP=dS(".html",dD),dP!=null&&dP.$==1)?{$:1,$0:Z.createHtml(dD)}:null,dF==null?null:{$:1,$0:(dQ=dF.$0,cG.FromContinuations(function(dU,dV,dW){return dT.apply(null,[dU,dV,dW]);}))});return dE==null?(dR=null,cG.Delay(function(){return cG.Return(null);})):dE.$0;};Z.createHtml=function(dD){var dE;dE=self.document.createElement("link");dE.setAttribute("rel","import");dE.setAttribute("type","text/html");dE.setAttribute("href",dD);return dE;};Z.createCss=function(dD){var dE;dE=self.document.createElement("link");dE.setAttribute("rel","stylesheet");dE.setAttribute("type","text/css");dE.setAttribute("href",dD);return dE;};Z.createScript=function(dD){var dE;dE=self.document.createElement("script");dE.setAttribute("type","text/javascript");dE.setAttribute("src",dD);return dE;};_0.Identifier$1=function(dD){var dE,dF,dG;return(dF=V.REGEX$2("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",dD),dF!=null&&dF.$==1&&((dG=dF.$0,!cK.Equals(dG,null)&&dG.length===1)&&(dE=cE.get(dF.$0,0),true)))?{$:1,$0:dE}:null;};_0.getEndWord$1=function(dD,dE){var dF,dG;dF=V.REGEX$2("^([a-zA-Z_]\\w*)","g",dD.substring(dE));return dF!=null&&dF.$==1?(dG=dF.$0,!cK.Equals(dG,null)&&dG.length===1)?cE.get(dF.$0,0):"":"";};_0.getStartWord$1=function(dD,dE){var dF,dG;dF=V.REGEX$2("([a-zA-Z_]\\w*)$","g",cC.Substring(dD,0,dE));return dF!=null&&dF.$==1?(dG=dF.$0,!cK.Equals(dG,null)&&dG.length===1)?cE.get(dF.$0,0):"":"";};_2=_1.Hoverable=cA.Class({Content:function(dD){return dD.on("mouseenter",function(){return c0.AddClass(dD.elt,"hovering");}).on("mouseleave",function(){return c0.RemoveClass(dD.elt,"hovering");});},Content$1:function(dD){return c1.Element("div",this.get_Attributes(),dD);},get_Attributes:function(){var dD,dE;dD=this;return cF.ofArray([(dE=cW.Const("hovering"),c2.DynamicPred("class",this.hover.get_View(),dE)),c3.HandlerImpl("mouseenter",function(){return function(){return dD.hover.Set(true);};}),c3.HandlerImpl("mouseleave",function(){return function(){return dD.hover.Set(false);};})]);}},null,_2);_2.get_Demo$1=function(){return _2.New$3().Content(c1.Element("div",[c3.Create("style","flex-flow: column;")],[c1.TextNode("Hover over me!")]));};_2.Content$2316$81=cA.Curried3(function(dD,dE,dF){return c0.RemoveClass(dD.elt,"hovering");});_2.get_Attributes$2312$69=cA.Curried3(function(dD,dE,dF){return dD.hover.Set(false);});_2.get_Attributes$2311$69=cA.Curried3(function(dD,dE,dF){return dD.hover.Set(true);});_2.New$3=function(){return _2.New$2(cX.Create$1(false));};_2.New$2=function(dD){return new _2({hover:dD});};_1.hoverable$1=function(dD){return _2.New$3().Content(dD);};_3.addResizeObserver$1=function(dD,dE){var dF,dG,dH,dI;try{dF=!(!a.ResizeObserver);}catch(dJ){dF=false;}if(dF){dG=new a.ResizeObserver(dD);_3.set_observers$1(new cF.T({$:1,$0:dG,$1:_3.observers$1()}));dG.observe(dE);}else{dH=_3.dimsChanged$1(dE);cG.Start((dI=null,cG.Delay(function(){return cG.While(function(){return dE.isConnected;},cG.Delay(function(){return cG.Bind(cG.Sleep(110),function(){return dH()?(dD(),cG.Zero()):cG.Zero();});}));})),null);}};_3.dimsChanged$1=function(dD){var dE;dE=[dD.getBoundingClientRect()];return function(){var dF;dF=dD.getBoundingClientRect();return cK.Equals(_3.domRect2Tuple$1(dE[0]),_3.domRect2Tuple$1(dF))?false:(dE[0]=dF,true);};};_3.domRect2Tuple$1=function(dD){return[dD.top,dD.left,dD.width,dD.height];};_3.observers$1=function(){ct.$cctor();return ct.observers;};_3.set_observers$1=function(dD){ct.$cctor();ct.observers=dD;};_6=_5.WcTabStripT=cA.Class({connectedCallback:function(){var dD,dE,dF,dG;function dH(){var dI,dJ,dK;dJ=!dE.hasAttribute("bottom");dK=cF.ofSeq(cD.delay(function(){return cD.collect(function(dL){var dM;dM=dE.childNodes[dL-1];return cK.Equals(dM.nodeType,c4.ELEMENT_NODE)?[[dM.hasAttribute("tabname")?dM.getAttribute("tabname"):(function(dN){return function(dO){return dN("Tab "+a.String(dO));};}(a.id))(dL),dM]]:[];},cJ.range(1,dE.childNodes.length));}));while(dG.childNodes.length>0)dG.removeChild(dG.lastChild);dI=_5.tabStrip$1(dD.selected,dJ,true,dK,c1.Element("slot",cF.T.Empty,cF.T.Empty));c6.LoadLocalTemplates("");c1.Run(dG,dI);}dD=this;!this.added?(dE=this,dF=dE.attachShadow({mode:"open"}),dG=self.document.createElement("div"),dF.appendChild(dG),dH(),dE.addEventListener("DOMSubtreeModified",c.delayed$1(50,dH)),this.added=true):void 0;}},j,_6);_6.Constructor$1=function(){var dD,dE;dD=(dE=c7.construct(self.HTMLElement,[],this.__proto__.constructor),dE);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dD);return dD;};_6.New$1=cA.Ctor(function(){j.New.call(this);this.added=false;this.selected=cX.Create$1(1);(function(dD){return dD("WcTabStripT initializer");}(function(dD){cU.log(dD);}));},_6);_5.init$1=function(){ct.$cctor();return ct.init;};_5.tabStrip$2454$64=function(dD,dE){return function(){return function(){return dE.Set(dD+1);};};};_5.tabStrip$1=function(dD,dE,dF,dG,dH){var dI;dI=c1.Element("div",[c3.Create("class",(((cA.Curried3(function(dJ,dK,dL){return dJ("tab-strip "+cB.toSafe(dK)+" "+cB.toSafe(dL));}))(a.id))(dE?"top":"bottom"))(dF?"horizontal":"vertical"))],cF.ofSeq(cD.delay(function(){return cD.collect(function(dJ){var dK;dK=dJ[0];return[_2.New$3().Content(c1.Element("div",[c2.Dynamic("class",cW.Map(function(dL){return"tab"+(dL===dK+1?" selected":"");},dD.get_View())),c3.Create("draggable","true"),c3.HandlerImpl("click",function(){return function(){return dD.Set(dK+1);};})],[c1.TextNode(dJ[1][0])]))];},cD.indexed(dG));})));return c1.Element("div",[c3.Create("class","tab-panel")],cF.ofSeq(cD.delay(function(){return cD.append(dE?[dI]:[],cD.delay(function(){return cD.append([c1.Element("div",[c3.Create("class","tab-content")],[dH])],cD.delay(function(){return cD.append(!dE?[dI]:[],cD.delay(function(){return cD.append([c1.Element("style",cF.T.Empty,cF.ofArray([c1.TextNode(_5.css$1())]))],cD.delay(function(){return[c1.Element("style",cF.T.Empty,cF.ofArray([c1.TextView(cW.Map(function(dJ){return function(dK){return dJ("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(dK)+")) { display: grid }\r\n                                           ");};}(a.id),dD.get_View()))]))];}));}));}));}));})));};_5.css$1=function(){ct.$cctor();return ct.css;};_8=_7.WcSplitterT=cA.Class({connectedCallback:function(){var dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS;function dT(d1){var d2,d3,d4,d5;d2=dK?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];d3=a.parseFloat("0"+a.jQuery(d1.parentElement.parentElement).css(d2[0]));d4=a.parseFloat("0"+a.jQuery(d1.parentElement.parentElement).css(d2[1]));dN.Set(a.parseFloat("0"+a.jQuery(d1.parentElement.parentElement).css(d2[2])));dM[0]=d3+d4;d5=dD.getBoundingClientRect();return dK?dJ?[d5.width,d5.height]:[-d5.width,d5.height]:dJ?[d5.height,d5.width]:[-d5.height,d5.width];}function dU(d1){return dK?d1.clientX:d1.clientY;}function dV(d1){var d2,d3;d2=(dU(d1)-dQ[0])*100/dL[0][0]+dP[0];dI.Set((d3=cK.Compare(dG,d2)===1?dG:d2,cK.Compare(dH,d3)===-1?dH:d3));}function dW(){if(dO[0]){dO[0]=false;self.removeEventListener("mousemove",dV,false);self.removeEventListener("mouseup",dW,false);}}function dX(d1){var d2,d3;if(!dO[0]){dO[0]=true;dP[0]=dI.Get();dQ[0]=dU(d1);dL[0]=(d2=(d3=dR[0],d3==null?null:{$:1,$0:dT(d3.$0)}),d2==null?[100,500]:d2.$0);self.addEventListener("mousemove",dV,false);self.addEventListener("mouseup",dW,false);d1.preventDefault();}}function dY(d1,d2,d3,d4){return[(d1-d2-d3)*d4/100,(d1-d2-d3)*(100-d4)/100];}function dZ(d1,d2){return(((((cA.Curried(function(d3,d4,d5,d6,d7){return d3(" "+d4.toFixed(2)+"px "+d5.toFixed(2)+"px ; "+cB.toSafe(d6)+" : "+d7.toFixed(2)+"px; ");},5))(a.id))(d1))(d2))(dK?"height":"width"))(dL[0][1]);}function d0(){var d1;d1=dR[0];(g.iter(function(d2){dL[0]=dT(d2);}))(d1);dI.Set(dI.Get());}if(!this.added){dD=this;dE=dD.attachShadow({mode:"open"});dF=self.document.createElement("div");dG=dD.hasAttribute("min")?a.parseFloat(dD.getAttribute("min")):4;dH=dD.hasAttribute("max")?a.parseFloat(dD.getAttribute("max")):96;dI=cX.Create$1(dD.hasAttribute("value")?a.parseFloat(dD.getAttribute("value")):50);dJ=!dD.hasAttribute("second");dK=dD.hasAttribute("vertical");dL=[[0,0]];dM=[0];dN=cX.Create$1(0);dO=[false];dP=[0];dQ=[0];dR=[null];dS=(((((dK?_7.layoutVertical$1():_7.layoutHorizontal$1())(cW.Map(function(d1){var d2;d2=dY(dL[0][0],dN.Get(),dM[0],d1);return dZ.apply(null,d2);},dI.get_View())))(function(){_3.addResizeObserver$1(d0,dD);d0();}))(function(d1){dR[0]={$:1,$0:d1};d0();}))(function(d1){dX(d1);}))(cW.Map(function(d1){return function(d2){return d1(cB.prettyPrint(d2)+"px");};}(a.id),dN.get_View()));c6.LoadLocalTemplates("");c1.Run(dF,dS);dE.appendChild(dF.firstChild);this.added=true;}}},j,_8);_8.Constructor$1=function(){var dD,dE;dD=(dE=c7.construct(self.HTMLElement,[],this.__proto__.constructor),dE);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dD);return dD;};_8.New$1=cA.Ctor(function(){j.New.call(this);this.added=false;(function(dD){return dD("WcSplitterT initializer");}(function(dD){cU.log(dD);}));},_8);_7.init$1=function(dD,dE){var dF,dG,dH;dF=new _8.New$1();_7.set_layoutHorizontal$1(dD);_7.set_layoutVertical$1(dE);dG="wcomp-splitter";dH=self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New;cU.log("defineWebComponent: "+dG);c8.setPrototypeOf(dH.prototype,self.HTMLElement.prototype);c8.setPrototypeOf(dH,self.HTMLElement);c8.setPrototypeOf(_8.Constructor$1.prototype,dH.prototype);self.customElements.define(dG,_8.Constructor$1);};_7.layoutVertical$1=function(){ct.$cctor();return ct.layoutVertical;};_7.set_layoutVertical$1=function(dD){ct.$cctor();ct.layoutVertical=dD;};_7.layoutHorizontal$1=function(){ct.$cctor();return ct.layoutHorizontal;};_7.set_layoutHorizontal$1=function(dD){ct.$cctor();ct.layoutHorizontal=dD;};_.New=function(dD,dE){return{column:dD,lineNumber:dE};};$.New=function(dD,dE,dF,dG){return{startColumn:dD,endColumn:dE,startLineNumber:dF,endLineNumber:dG};};ba.New=function(dD,dE,dF,dG,dH,dI){return{authority:dD,fragment:dE,fsPath:dF,path:dG,query:dH,scheme:dI};};bb.New=function(dD,dE){return{range:dD,uri:dE};};bc.New=function(dD,dE){return{matches:dD,range:dE};};bd.New=function(dD,dE,dF){return{endColumn:dD,startColumn:dE,word:dF};};be.New=function(dD){return{uri:dD};};bf.New=function(dD,dE){return{value:dD,isTrusted:dE};};bg.New=function(dD,dE,dF,dG,dH,dI){return{startColumn:dD,endColumn:dE,startLineNumber:dF,endLineNumber:dG,severity:dH,message:dI};};bh.New=function(dD,dE,dF){return{kind:dD,label:dE,detail:dF};};bi.New=function(dD,dE){return{contents:dD,range:dE};};bj=_9.Editor=cA.Class({},j,bj);bj.New=cA.Ctor(function(){j.New.call(this);},bj);bk.New=function(dD,dE,dF,dG,dH,dI,dJ){return{"var":dD,onChange:dE,onRender:dF,editorO:dG,disabled:dH,options:dI,overrides:dJ};};_9.newVarO=function(dD){var dE;dE=_9.newVar(cX.Lens(dD,function(dF){return dF==null?"":dF.$0;},function(dF,dG){return dF==null?null:{$:1,$0:dG};}));return _9.disabled(cW.Map(function(dF){return dF==null;},dD.get_View()),dE);};_9.newText=function(dD){return _9.newVar(cX.Create$1(dD));};_9["var"]=function(dD){return dD["var"];};_9.disabled=function(dD,dE){return bk.New(dE["var"],dE.onChange,dE.onRender,dE.editorO,dD,dE.options,dE.overrides);};_9.onRender=function(dD,dE){return bk.New(dE["var"],dE.onChange,{$:1,$0:dD},dE.editorO,dE.disabled,dE.options,dE.overrides);};_9.onChange=function(dD,dE){return bk.New(dE["var"],dD,dE.onRender,dE.editorO,dE.disabled,dE.options,dE.overrides);};_9.setVar=function(dD,dE){return bk.New(dD,dE.onChange,dE.onRender,dE.editorO,dE.disabled,dE.options,dE.overrides);};_9.render$2804$42=function(dD){return function(dE){var dF;cG.Start((dF=null,cG.Delay(function(){return cG.Bind(_9.loader(),function(){var dG,dH;dG=(dH=dE.parentElement,self.monaco.editor.create(dH,dD.options,dD.overrides));_3.addResizeObserver$1(function(){dG.layout();},dE.parentElement);dE.parentNode.removeChild(dE);dD.editorO={$:1,$0:dG};(g.iter(function(dI){dI(dG);}))(dD.onRender);V.bindVarEditor(function(dI){dG.onDidChangeModelContent(dI);},function(){return dG.getValue();},function(dI){dG.setValue(dI);},dD.onChange,dD["var"]);return cG.Zero();});})),null);};};_9.render=function(dD){return c1.Element("div",[c3.OnAfterRenderImpl(function(dE){var dF;cG.Start((dF=null,cG.Delay(function(){return cG.Bind(_9.loader(),function(){var dG,dH;dG=(dH=dE.parentElement,self.monaco.editor.create(dH,dD.options,dD.overrides));_3.addResizeObserver$1(function(){dG.layout();},dE.parentElement);dE.parentNode.removeChild(dE);dD.editorO={$:1,$0:dG};(g.iter(function(dI){dI(dG);}))(dD.onRender);V.bindVarEditor(function(dI){dG.onDidChangeModelContent(dI);},function(){return dG.getValue();},function(dI){dG.setValue(dI);},dD.onChange,dD["var"]);return cG.Zero();});})),null);})],[]);};_9.loader=function(){ct.$cctor();return ct.loader;};_9.newVar=function(dD){return bk.New(dD,a.ignore,null,null,cW.Const(false),null,null);};V.rexGuid$1=function(){ct.$cctor();return ct.rexGuid;};V.REGEX$2=function(dD,dE,dF){var dG;if(dF===null)return null;else try{dG=(new a.String(dF)).match(new a.RegExp(dD,dE));return cK.Equals(dG,null)?null:!cK.Equals(dG,null)&&dG.length===0?null:{$:1,$0:dG};}catch(dH){return null;}};V.bindVarEditor=function(dD,dE,dF,dG,dH){var dI,dJ;dI=[0];dJ=[0];dD(function(){var dK;dK=dE();dH.Get()!==dK?(dI[0]=dI[0]+1,dH.Set(dK),dG()):void 0;});cW.Sink(function(){if(dI[0]>dJ[0])dJ[0]=dI[0];else if(dE()!==dH.Get())dF(dH.Get());},dH.get_View());};bm.extractConfig=function(dD,dE){var dF;dF=dE.$0;return{$:0,$0:M.getSourceDir(dD,z.splitByChar$1("\n",dF)),$1:" --nologo --quiet "+M.extractDefines({$:0,$0:dF})};};bo=bn.Address=cA.Class({get_txt:function(){return this.$0;}},null,bo);bp.BRGetProcessId={$:1};bp.BRGetConnections={$:0};bq.MsgRequestForEcho={$:5};bq.MsgRequestForId={$:4};bq.MsgFromBroker={$:3};bq.MsgReply={$:2};bq.MsgRequest={$:1};bq.MsgInformation={$:0};br.BMReceiverCantReply={$:4};br.BMOnlyBrokerShouldUse={$:1};br.BMOk={$:0};bs.Receiver={$:2};bs.Broker={$:1};bs.NoReply={$:0};bt.New=function(dD,dE,dF,dG,dH,dI,dJ){return{from:dD,destination:dE,msgType:dF,subtype:dG,id:dH,payload:dI,replier:dJ};};bu.FSharp={$:0};bv.FSStation={$:0};bw.JScript={$:0};by=bx.Handler=cA.Class({Cancel:function(dD,dE){var dF;dF=this.waitingAgent;dF.mailbox.AddLast({$:3,$0:dD,$1:dE});dF.resume();},Raise:function(dD,dE){var dF;dF=this.waitingAgent;dF.mailbox.AddLast({$:2,$0:dD,$1:dE});dF.resume();},Reply:function(dD,dE){var dF;dF=this.waitingAgent;dF.mailbox.AddLast({$:1,$0:dD,$1:dE});dF.resume();},Add:function(dD,dE){var dF;dF=this.waitingAgent;dF.mailbox.AddLast({$:0,$0:dD,$1:dE});dF.resume();}},j,by);by.New=cA.Ctor(function(dD){j.New.call(this);this.waitingAgent=C.fold(C.defHandler,function(dE,dF){var dG,dH,dI;function dJ(dK,dL,dM){var dN,dO;dN=(dO=c9.TryFind(dK,dE),dO==null?null:{$:1,$0:dL(dO.$0)});dN==null?dM():void 0;return dE.Remove(dK);}return dF.$==1?(dG=dF.$1,dJ(dF.$0,function(dK){dK[0](dG);},function(){dD(dG);})):dF.$==2?(dH=dF.$1,dJ(dF.$0,function(dK){dK[1](dH);},a.ignore)):dF.$==3?(dI=dF.$1,dJ(dF.$0,function(dK){dK[2](dI);},a.ignore)):dE.Add(dF.$0,dF.$1);},new cY.New([]));},by);bz=bn.WSMessagingClient=cA.Class({sendMsg:function(dD){var dE,dF;dE=this;dF=e.asyncResult();return dF.Run(dF.Delay(function(){return dD.replier.$===0?dF.Bind$1(dE.sendAndForget(dD),function(){return dF.Return("");}):dF.ReturnFrom$1(dE.sendGetReply(dD));}));},getProcessId:function(){var dD,dE;dD=this;dE=e.asyncResult();return dE.Run(dE.Delay(function(){var dF,dG;return dE.Bind$1(dD.sendGetReply((dF=bn.MessageBrokerAddress(),(dG=c_.stringify((cu.j$9())(bp.BRGetProcessId)),bt.New(new bo({$:0,$0:""}),dF,bq.MsgRequest,"",cP.NewGuid(),dG,bs.NoReply)))),function(dH){var dI;dI=(cv.j$7())(c_.parse(dH));return dI.$==1?dE.Return(dI.$0):dE.ReturnFrom({$:1,$0:new d({$:4,$0:{$:6,$0:(function(dJ){return function(dK){return dJ(cw.p$4(dK));};}(a.id))(dI)}})});});}));},getListeners:function(){var dD,dE;dD=this;dE=e.asyncResult();return dE.Run(dE.Delay(function(){var dF,dG;return dE.Bind$1(dD.sendGetReply((dF=bn.MessageBrokerAddress(),(dG=c_.stringify((cu.j$9())(bp.BRGetConnections)),bt.New(new bo({$:0,$0:""}),dF,bq.MsgRequest,"",cP.NewGuid(),dG,bs.NoReply)))),function(dH){var dI;dI=(cv.j$7())(c_.parse(dH));return dI.$==0?dE.Return(dI.$0):dE.ReturnFrom({$:1,$0:new d({$:4,$0:{$:6,$0:(function(dJ){return function(dK){return dJ(cw.p$4(dK));};}(a.id))(dI)}})});});}));},sendGetReply:function(dD){var dE,dF;dE=this;dF=e.asyncResult();return dF.Run(dF.Delay(function(){return dF.Bind$1(dE.sendAndReply(bs.Receiver,dD),function(dG){var dH;return dF.Bind((dH=dG.msgType,dH.$==2?{$:0,$0:dG.payload}:dH.$==3?{$:1,$0:new d({$:4,$0:(cv.j$8())(c_.parse(dG.payload))})}:{$:1,$0:new d({$:4,$0:{$:5,$0:dG.msgType}})}),function(dI){return dF.Return(dI);});});}));},sendAndVerify:function(dD){var dE,dF;dE=this;dF=e.asyncResult();return dF.Run(dF.Delay(function(){return dF.Bind$1(dE.sendAndReply(bs.Broker,dD),function(dG){var dH;return dF.Bind(dG.msgType.$==3?(dH=(cv.j$8())(c_.parse(dG.payload)),dH.$===0?{$:0,$0:null}:{$:1,$0:new d({$:4,$0:dH})}):{$:1,$0:new d({$:4,$0:{$:5,$0:dG.msgType}})},function(){return dF.Return();});});}));},sendAndReply:function(dD,dE){var dF,dG;dF=this;dG=e.asyncResult();return dG.Run(dG.Delay(function(){return dG.Bind$1(dF.getServer(),function(dH){return y["AsyncResultBuilder.ReturnFrom"](dG,cG.FromContinuations(function(dI,dJ,dK){var dL;dF.waiting.Add(dE.id,[dI,dJ,dK]);dF.postR(dH,dD,dE);return dF.wsTimeout>0?cG.Start((dL=null,cG.Delay(function(){return cG.Bind(cG.Sleep(dF.wsTimeout),function(){dF.waiting.Raise(dE.id,new c$.New$1((((cA.Curried3(function(dM,dN,dO){return dM("Did not receive reply in "+a.String(dN)+" seconds for Message: "+cy.p(dO));}))(a.id))(dF.wsTimeout/1000>>0))(dE)));return cG.Zero();});})),null):null;}));});}));},sendAndForget:function(dD){var dE,dF;dE=this;dF=e.asyncResult();return dF.Run(dF.Delay(function(){return dF.Bind$1(dE.getServer(),function(dG){dE.postR(dG,bs.NoReply,dD);return dF.Zero();});}));},postR:function(dD,dE,dF){try{dD.FsRoot_Library2_WebSockets_IServer$Post(bn.replier(dE,bn.from(this.clientAddress,dF)));}catch(dG){this.serverO=null;throw dG;}},getServer:function(){return this.checkServer.PostAndAsyncReply(function(dD){return[dD,null];},null);},connectToWebSocketServer:function(){var dD,dE;dD=this;(function(dF){return dF("in connectToWebSocketServer");}(function(dF){cU.log(dF);}));dE=null;return cG.Delay(function(){return cG.Bind(((dD.connectStateful(dD.wsEndPoint))(dD.clientId))(function(dF){var dG;dG=null;return cG.Delay(function(){return cG.Return([0,function(dH){return function(dI){var dJ;dJ=null;return cG.Delay(function(){return cG.Combine(cG.TryWith(cG.Delay(function(){return dI.$==2?((function(dK){return function(dL){return dK("WebSocket "+cB.toSafe(dL)+" connection open.");};}(function(dK){cU.log(dK);}))(dD.clientId),dD.serverO={$:1,$0:dF},cG.Zero()):dI.$==3?((function(dK){return function(dL){return dK("WebSocket "+cB.toSafe(dL)+" connection closed.");};}(function(dK){cU.log(dK);}))(dD.clientId),dD.close(),cG.Zero()):dI.$==1?((function(dK){return function(dL){return dK("WebSocket "+cB.toSafe(dL)+" connection error!");};}(function(dK){cU.log(dK);}))(dD.clientId),cG.Zero()):(dD.processMessage(dI.$0),cG.Zero());}),function(dK){(((cA.Curried3(function(dL,dM,dN){return dL("msg: "+cw.p$8(dM)+" \nexn:"+cB.prettyPrint(dN));}))(function(dL){cU.log(dL);}))(dI))(dK);return cG.Zero();}),cG.Delay(function(){return cG.Return(dH);}));});};}]);});}),function(){(function(dF){return dF("connectToWebSocketServer with server");}(function(dF){cU.log(dF);}));return cG.Zero();});});},processMessage:function(dD){var dE,dF,dG,dH,dI,dL;dF=this;dG=dD.msgType;function dJ(dM){dF.reply(dM);}function dK(dM){return cG.Return(dM);}switch(dG.$==2?0:dG.$==0?1:dG.$==1?2:dG.$==5?3:dG.$==4?4:0){case 0:this.processReply(dD);break;case 1:(((cA.Curried3(function(dM,dN,dO){return dM("Information from '"+cB.toSafe(dN)+"': "+cB.toSafe(dO));}))(function(dM){cU.log(dM);}))(dD.from.get_txt()))(((db.Id())())(c_.parse(dD.payload)));break;case 2:dH=this.payloadProcessorO;dH!=null&&dH.$==1?cG.Start(cG.Bind(dF.mapPayloadWrap(dH.$0,dD),(dI=function(dM){return dJ(bn.makeReply(dM));},function(dM){return dK(dI(dM));})),null):dD.replier.$===2?null:null;break;case 3:dF.reply(bn.msgType(bq.MsgInformation,bn.mapPayload(a.id,dD)));break;case 4:dF.reply(bn.msgType(bq.MsgInformation,(dL=bn.makeReply(dD),bt.New(dL.from,dL.destination,dL.msgType,dL.subtype,dL.id,c_.stringify(((db.Id())())(this.clientId)),dL.replier))));break;}},mapPayloadWrap:function(dD,dE){var dF;dF=null;return cG.Delay(function(){return cG.Bind(dD(dE.payload),function(dG){return cG.Return(bn.mapPayload(function(){return dG;},dE));});});},processReply:function(dD){this.waiting.Reply(dD.id,dD);},close:function(){var dD,dE;dD=this;dE=this.serverO;(g.iter(function(dF){dF.FsRoot_Library2_WebSockets_IServer$Close();dD.serverO=null;}))(dE);},reply:function(dD){var dE,dF;dE=this;dF=this.serverO;(g.iter(function(dG){dG.FsRoot_Library2_WebSockets_IServer$Post(bn.destination(dD.from,bn.from(dE.clientAddress,dD)));}))(dF);},set_Out:function(dD){this.out=dD;},SendMsg:function(dD){return this.sendMsg(dD);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBProcessId:function(){return this.getProcessId();},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},j,bz);bz.New=cA.Ctor(function(dD,dE,dF){bz.New$1.call(this,cA.Curried3(function(dG,dH,dI){function dJ(dL){}function dK(dL){return cG.Return(dL);}return cG.Bind(df.ConnectStateful(function(dL){return c_.stringify((cu.j())(dL));},function(dL){return(cv.j())(c_.parse(dL));},dg.CreateRemote((((cA.Curried3(function(dL,dM,dN){return dL("ws://"+cB.toSafe(dM)+"?ClientId="+cB.toSafe(dN));}))(a.id))(dG))(dH),{$:1,$0:dd.JsonEncoding.Readable}),function(dL){var dM;return dI((dM={FsRoot_Library2_WebSockets_IServer$Post:function(dN){return dL.Post(dN);},FsRoot_Library2_WebSockets_IServer$Close:function(){return dL.get_Connection().close(1000);}},(j.New.call(dM),dM)));}),function(dL){return dK(dJ(dL));});}),dD,dE,dF);},bz);bz.New$1=cA.Ctor(function(dD,dE,dF,dG){var dH,dI;dH=this;j.New.call(this);this.connectStateful=dD;this.clientId=dE;this.wsEndPoint=(dI=bn.extractEndPoint()+"/ws",dG==null?dI:dG.$0);this.clientAddress=new bo({$:0,$0:this.clientId});this.wsTimeout=dF==null?60000:dF.$0;this.out=function(dJ){return function(dK){return dJ(cB.toSafe(dK));};}(function(dJ){cU.log(dJ);});this.serverO=null;this.payloadProcessorO=null;this.waiting=new by.New(function(dJ){(((cA.Curried3(function(dK,dL,dM){return dK("Reply from '"+cB.toSafe(dL)+"': "+cB.toSafe(dM));}))(function(dK){cU.log(dK);}))(dJ.from.get_txt()))(dJ.payload);});this.checkServer=C.callA(function(dJ){c.print$1(dJ);},function(){var dJ;dJ=null;return cG.Delay(function(){(function(dK){return dK("getServer");}(function(dK){cU.log(dK);}));return cG.Combine(dH.serverO==null?(function(dK){return dK("getServer Connecting");}(function(dK){cU.log(dK);}),cG.Bind(dH.connectToWebSocketServer(),function(){return cG.Bind(cG.Sleep(200),function(){return cG.Return(null);});})):cG.Zero(),cG.Delay(function(){return cG.Return(k.ofOption(function(){return new d({$:1,$0:"could not connect to Server"});},dH.serverO));}));});});},bz);bn.extractEndPoint=function(){return cE.get(cC.SplitChars(dh.href.substring(dh.href.indexOf("//")+2),["/"],0),0);};bn.makeReply=function(dD){return bn.replier(bs.NoReply,bn.msgType(bq.MsgReply,dD));};bn.mapPayload=function(dD,dE){return bt.New(dE.from,dE.destination,dE.msgType,dE.subtype,dE.id,dD(dE.payload),dE.replier);};bn.msgId=function(dD,dE){return bt.New(dE.from,dE.destination,dE.msgType,dE.subtype,dD,dE.payload,dE.replier);};bn.replier=function(dD,dE){return bt.New(dE.from,dE.destination,dE.msgType,dE.subtype,dE.id,dE.payload,dD);};bn.subtype=function(dD,dE){return bt.New(dE.from,dE.destination,dE.msgType,dD,dE.id,dE.payload,dE.replier);};bn.msgType=function(dD,dE){return bt.New(dE.from,dE.destination,dD,dE.subtype,dE.id,dE.payload,dE.replier);};bn.destination=function(dD,dE){return bt.New(dE.from,dD,dE.msgType,dE.subtype,dE.id,dE.payload,dE.replier);};bn.from=function(dD,dE){return bt.New(dD,dE.destination,dE.msgType,dE.subtype,dE.id,dE.payload,dE.replier);};bn.MessageBrokerAddress=function(){ct.$cctor();return ct.MessageBrokerAddress;};bn.MessageBrokerId=function(){ct.$cctor();return ct.MessageBrokerId;};bA.MsgGetUrl={$:5};bA.MsgGetId={$:0};bD.New=function(dD,dE){return{Code:dD,Message:dE};};bE.New=function(dD,dE,dF){return{File:dD,Line:dE,Column:dF};};bF.New=function(dD,dE,dF,dG){return{Name:dD,ReplacementText:dE,Glyph:dF,GlyphChar:dG};};bG.New=function(dD,dE,dF){return{Signature:dD,Comment:dE,Footer:dF};};bH.New=function(dD,dE,dF,dG){return{Name:dD,CanonicalTypeTextForSorting:dE,Display:dF,Description:dG};};bI.New=function(dD,dE,dF,dG){return{Tip:dD,TypeText:dE,Parameters:dF,IsStaticArguments:dG};};bJ.New=function(dD,dE){return{Name:dD,Type:dE};};bK.New=function(dD,dE){return{OutputType:dD,Parameters:dE};};bL.New=function(dD,dE,dF){return{Name:dD,CurrentParameter:dE,Overloads:dF};};bM.New=function(dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN){return{FileName:dD,StartLine:dE,StartColumn:dF,EndLine:dG,EndColumn:dH,IsFromDefinition:dI,IsFromAttribute:dJ,IsFromComputationExpression:dK,IsFromDispatchSlotImplementation:dL,IsFromPattern:dM,IsFromType:dN};};bN.New=function(dD,dE){return{Name:dD,Uses:dE};};bO.New=function(dD,dE){return{Name:dD,Overloads:dE};};bP.New=function(dD,dE,dF){return{Fsc:dD,Fsi:dE,MSBuild:dF};};bQ.New=function(dD,dE,dF,dG,dH,dI,dJ,dK){return{FileName:dD,StartLine:dE,EndLine:dF,StartColumn:dG,EndColumn:dH,Severity:dI,Message:dJ,Subcategory:dK};};bR.New=function(dD,dE){return{File:dD,Errors:dE};};bS.New=function(dD){return{Kind:dD};};bT.New=function(dD,dE,dF,dG,dH,dI,dJ,dK){return{UniqueName:dD,Name:dE,Glyph:dF,GlyphChar:dG,IsTopLevel:dH,File:dI,EnclosingEntity:dJ,IsAbstract:dK};};bU.New=function(dD,dE){return{Declaration:dD,Nested:dE};};bV.New=function(dD,dE,dF,dG,dH,dI){return{Namespace:dD,Name:dE,Type:dF,Line:dG,Column:dH,MultipleNames:dI};};bW.New=function(dD,dE){return{Name:dD,Qualifier:dE};};bX.New=function(dD,dE,dF){return{Opens:dD,Qualifies:dE,Word:dF};};bY.New=function(dD){return{Text:dD};};b0.New=function(dD,dE,dF,dG){return{FileName:dD,IsAsync:dE,Lines:dF,Version:dG};};b1.New=function(dD,dE,dF){return{FileName:dD,Lines:dE,Version:dF};};b2.New=function(dD,dE,dF,dG,dH,dI){return{FileName:dD,SourceLine:dE,Line:dF,Column:dG,Filter:dH,IncludeKeywords:dI};};b3.New=function(dD,dE,dF,dG){return{FileName:dD,Line:dE,Column:dF,Filter:dG};};b4.New=function(dD){return{FileName:dD};};b5.New=function(dD){return{FileName:dD};};b6.New=function(dD){return{Symbol:dD};};b7.New=function(dD,dE,dF){return{Directory:dD,Deep:dE,ExcludedDirs:dF};};b8.symbolUseProject=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("symboluseproject",function(dH){return dH.$==4?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.symbolUse=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("symboluse",function(dH){return dH.$==4?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.helpText=function(dD){return b8.FSAutocompleteCall("helptext",function(dE){return dE.$==2?{$:1,$0:dE.$0}:null;},{$:6,$0:b6.New(dD)});};b8.declarations=function(dD,dE,dF){return b8.FSAutocompleteCall("declarations",function(dG){return dG.$==10?{$:1,$0:dG.$0}:null;},{$:1,$0:b1.New(dD,dE,dF)});};b8.findDeclaration=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("finddeclaration",function(dH){return dH.$==9?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.findTypeDecl=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("findtypedeclaration",function(dH){return dH.$==9?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.completion=function(dD,dE,dF,dG,dH,dI){return b8.FSAutocompleteCall("completion",function(dJ){return dJ.$==3?{$:1,$0:dJ.$0}:null;},{$:2,$0:b2.New(dF,dD,dG,dH,dI,dE)});};b8.signatureData=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("signatureData",function(dH){return dH.$==13?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.signature=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("signature",function(dH){return dH.$==12?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.toolTip=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("tooltip",function(dH){return dH.$==11?{$:1,$0:dH.$0}:null;},{$:3,$0:b3.New(dD,dE,dF,dG)});};b8.parseCode=function(dD,dE,dF,dG){return b8.FSAutocompleteCall("parse",function(dH){return dH.$==7?{$:1,$0:dH.$0}:null;},{$:0,$0:b0.New(dD,dF,dE,dG)});};b8.FSAutocompleteCall=function(dD,dE,dF){var dG;dG=e.asyncResult();return dG.Run(dG.Delay(function(){return dG.Bind$1((new dj.New()).Async("FSharpStation:FsRoot.Library2+FsAutoComplete.FSAutocompleteCall0:-1842881046",[dD,dF]),function(dH){var dI,dJ;function dK(dL){return dL!=null;}dI=cE.partition(function(dL){return dK(dE(dL));},dH);dJ=dI[1];return dG.Bind(k.ofOption(function(){return new d({$:4,$0:dJ});},cD.tryHead(cD.choose(dE,dI[0]))),function(dL){return dG.Return([dL,dJ]);});});}));};b_.appendMsgs=function(dD){b_.appendText(b_.outputMsgs(),dD);};b_.appendText=function(dD,dE){var dF;dD.Set((dF=dD.Get(),dF===""?dE:dE===""?dF:dF+"\n"+dE));};b_.outputMsgs=function(){ct.$cctor();return ct.outputMsgs;};b_.annotationsV=function(){ct.$cctor();return ct.annotationsV;};b_.srcDir=function(){ct.$cctor();return ct.srcDir;};b_.set_srcDir=function(dD){ct.$cctor();ct.srcDir=dD;};b_.rootDir=function(){ct.$cctor();return ct.rootDir;};b_.set_rootDir=function(dD){ct.$cctor();ct.rootDir=dD;};b_.id=function(){ct.$cctor();return ct.id;};b$.setProperty=function(dD,dE,dF){function dG(dI){return dI[0];}function dH(dI){return dE!==dI;}b$.setSnippet(P.New(dD.snpId,dD.snpName,dD.snpContent,dD.snpParentIdO,dD.snpPredIds,cE.ofSeq(cD.append(cD.filter(function(dI){return dH(dG(dI));},dD.snpProperties),cF.ofArray([[dE,dF]]))),dD.snpGeneration));};b$.expandParents=function(dD){b$.iterReader(o.op_BarGreaterGreater(R.pathRm(dD),function(dE){var dF;dF=cR.op_Subtraction(b$.collapsedV().Get(),new cR.New(dE));b$.collapsedV().Set(dF);}));};b$.toggleCollapse=function(dD){var dE;dE=((b$.collapsedV().Get().Contains(dD)?function(dF){return function(dG){return dG.Remove(dF);};}:function(dF){return function(dG){return dG.Add(dF);};})(dD))(b$.collapsedV().Get());b$.collapsedV().Set(dE);};b$.newSnippet=function(dD){var dE;dE=R.New("","",null);b$.iterReader(o.op_BarGreaterGreater(b$.addSnippetRm(dE),function(){b$.currentSnippetIdOV().Set({$:1,$0:dE.snpId});}));};b$.addSnippetRm=function(dD){var dE,dF,dG;b$.snippets().Append(dD);dE=(dF=b$.hierarchy().Get(),cD.append([b$.treenode(dD.snpId)],dF));return o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(n.insertO((dG=b$.currentSnippetIdOV().Get(),dG==null?null:{$:1,$0:R.snippetORm(dG.$0)})),function(dH){return dH==null?null:a.id(dH.$0);}),function(dH){return dH!=null&&dH.$==1?T.moveToSibling2(true,dD.snpId,dH.$0.snpId,dE):o.rtn(dE);}),cE.ofSeq),function(dH){b$.hierarchy().Set(dH);});};b$.setSnippetsGen=function(dD,dE){function dF(dG){return b$.treenode(dG.snpId);}b$.collapsedV().Set(dE);b$.snippets().Set(dD);b$.updateGeneration();b$.iterReader(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater(n.sequenceSeq(cD.map(function(dG){return o.op_BarGreaterGreater(R.parentORm(dG),function(dH){return dH==null?{$:1,$0:dG}:null;});},dD)),function(dG){return cD.choose(a.id,dG);}),function(dG){return cD.map(dF,dG);}),cE.ofSeq),function(dG){b$.hierarchy().Set(dG);}));};b$.updateGeneration=function(){var dD;b$.iterReader((dD=n.fusion(),dD.Run(dD.Delay(function(){return dD.Bind(R.maxGenerationRm(),function(dE){b$.generation().Set(dE);return dD.Zero();});}))));};b$.moveNode=function(dD,dE){b$.iterReader(o.op_BarGreaterGreater(o.op_BarGreaterGreater(T.moveToSibling2(false,dD,dE,b$.hierarchy().Get()),cE.ofSeq),function(dF){b$.hierarchy().Set(dF);}));};b$.indentOut=function(dD){var dE;dE=b$.currentSnippetIdOV().Get();(g.iter(function(dF){var dG;b$.iterReader(o.op_BarGreaterGreater(o.op_BarGreaterGreater((dG=b$.hierarchy().Get(),T.outdentNode(b$.treenode(dF),dG)),cE.ofSeq),function(dH){b$.hierarchy().Set(dH);}));}))(dE);};b$.indentIn=function(dD){var dE;dE=b$.currentSnippetIdOV().Get();(g.iter(function(dF){var dG;b$.iterReader(o.op_BarGreaterGreater(o.op_BarGreaterGreater((dG=b$.hierarchy().Get(),T.indentNode(b$.treenode(dF),dG)),cE.ofSeq),function(dH){b$.hierarchy().Set(dH);}));}))(dE);};b$.deleteCurrentSnippet=function(dD){var dE;dE=b$.currentSnippetIdOV().Get();(g.iter(function(dF){var dG;b$.iterReader(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater((dG=b$.hierarchy().Get(),T.removeNodeOutdentChildren(b$.treenode(dF),dG)),cE.ofSeq),function(dH){b$.hierarchy().Set(dH);}),function(){b$.snippets().RemoveByKey(dF);}));}))(dE);};b$.expandClassW=function(dD){var dE;dE=b$.snippets().v;return cW.Map2(function(){return b$.runReader(b$.handleError,b$.expandClassRm(dD));},b$.collapsedV().get_View(),dE);};b$.expandClassRm=function(dD){return o.op_GreaterGreaterEquals(R.childrenRm(dD),function(dE){return cD.isEmpty(dE)?o.rtn(""):o.op_BarGreaterGreater(b$.treenode(dD).isExpandedRm(),function(dF){return dF?"expanded":"collapsed";});});};b$.togglePredecessor=function(dD){var dE,dF;dE=cX.Lens(b$.currentSnippetV(),function(dG){return dG.snpPredIds;},function(dG,dH){return P.New(dG.snpId,dG.snpName,dG.snpContent,dG.snpParentIdO,dH,dG.snpProperties,dG.snpGeneration);});dE.Set((dF=dE.Get(),((dE.Get().Contains(dD)?function(dG){return function(dH){return dH.Remove(dG);};}:function(dG){return function(dH){return dH.Add(dG);};})(dD))(dF)));b$.clearPredsCache();};b$.isIncludedPredecessorW=function(dD){return cW.Map(function(dE){return b$.runReader(function(){return false;},o.op_BarGreaterGreater(R.uniquePredsRm(dE),function(dF){return cD.contains(dD,dF);}));},b$.codeSnippetW());};b$.isIndirectPredecessorW=function(dD){return cW.Map(function(dE){return b$.runReader(function(){return false;},o.op_BarGreaterGreater(R.uniquePredsRm(dE),function(dF){return cD.contains(dD,dF);}));},b$.currentSnippetW());};b$.treenode=function(dD){return U.New(function(){return dD;},function(){return o.rtn(!b$.collapsedV().Get().Contains(dD));},function(){return o.rtn(true);},function(){function dE(dF){return b$.treenode(dF.snpId);}return o.op_BarGreaterGreater(R.childrenRm(dD),function(dF){return cD.map(dE,dF);});},function(){return R.pathRm(dD);},function(){function dE(dF){return dF.snpParentIdO;}return o.op_BarGreaterGreater(o.op_BarGreaterGreater(R.snippetORm(dD),function(dF){return dF==null?null:dE(dF.$0);}),function(dF){return dF==null?null:{$:1,$0:b$.treenode(dF.$0)};});},function(dE){return o.op_BarGreaterGreater(b$.setChildrenRm(dD,dE),function(){return b$.treenode(dD);});});};b$.setChildrenRm=function(dD,dE){var dF;dF=n.fusion();return dF.Run(dF.Delay(function(){var dG,dH,dI,dJ,dK,dL;dG=cE.map(function(dM){return dM.id();},dE);cD.iter(function(dM){b$.setSnippet(dM);},cD.map(function(dM){return P.New(dM.snpId,dM.snpName,dM.snpContent,{$:1,$0:dD},dM.snpPredIds,dM.snpProperties,dM.snpGeneration);},cD.filter(function(dM){return!cK.Equals(dM.snpParentIdO,{$:1,$0:dD})&&cE.contains(dM.snpId,dG);},b$.snippets())));cD.iter(function(dM){b$.setSnippet(dM);},cD.map(function(dM){return P.New(dM.snpId,dM.snpName,dM.snpContent,null,dM.snpPredIds,dM.snpProperties,dM.snpGeneration);},cD.filter(function(dM){return cK.Equals(dM.snpParentIdO,{$:1,$0:dD})&&!cE.contains(dM.snpId,dG);},b$.snippets())));b$.clearPredsCache();dH=cE.partition(function(dM){return b$.isDescendantOf(dD,dM.snpId);},cE.ofSeq((b$.snippets())["var"].Get()));dI=dH[1];dJ=dH[0];dK=cE.findIndex(function(dM){return cK.Equals(dM.snpId,dD);},dI);dL=cE.ofSeq(cD.delay(function(){return cD.append(cL.array(dI,{$:1,$0:0},{$:1,$0:dK}),cD.delay(function(){return cD.append(cD.collect(function(dM){return cD.append([cD.find(function(dN){return cK.Equals(dN.snpId,dM);},dJ)],cD.delay(function(){return cD.filter(function(dN){return b$.isDescendantOf(dM,dN.snpId);},dJ);}));},dG),cD.delay(function(){return cL.array(dI,{$:1,$0:dK+1},null);}));}));}));b$.snippets().Set(dL);return dF.Zero();}));};b$.currentLayoutJSDW=function(){ct.$cctor();return ct.currentLayoutJSDW;};b$.currentLayoutDW=function(){ct.$cctor();return ct.currentLayoutDW;};b$.currentPathW=function(){ct.$cctor();return ct.currentPathW;};b$.SaveAsClassW=function(){ct.$cctor();return ct.SaveAsClassW;};b$.hasChangedW=function(dD){return cW.Map(function(dE){return dE<dD.snpGeneration;},b$.generation().get_View());};b$.codeStartsW=function(){ct.$cctor();return ct.codeStartsW;};b$.FsCodeW=function(){ct.$cctor();return ct.FsCodeW;};b$.codeAndStartsW=function(){ct.$cctor();return ct.codeAndStartsW;};b$.getHierarchyW=function(){ct.$cctor();return ct.getHierarchyW;};b$.findSnippetV=function(dD){return new dk.New(b$.findSnippetW(dD),function(dE){b$.setSnippet(dE);});};b$.findSnippetW=function(dD){return cW.Map(function(dE){var dF;dF=R.defaultSnippet();return dE==null?dF:dE.$0;},b$.snippets().TryFindByKeyAsView(dD));};b$.codeSnippetClassW=function(dD){return cW.Map(function(dE){return cK.Equals({$:1,$0:dD},dE)?"codeSnippet":"";},b$.codeSnippetIdOV().get_View());};b$.selectedClassW=function(dD){return cW.Map(function(dE){return cK.Equals({$:1,$0:dD},dE)?"selected":"";},b$.currentSnippetIdOV().get_View());};b$.currentSnippetV=function(){ct.$cctor();return ct.currentSnippetV;};b$.codeSnippetW=function(){ct.$cctor();return ct.codeSnippetW;};b$.currentSnippetW=function(){ct.$cctor();return ct.currentSnippetW;};b$.CurrentSnippetIdW=function(){ct.$cctor();return ct.CurrentSnippetIdW;};b$.isDescendantOf=function(dD,dE){var dF,dG,dH;return cK.Equals(dE,dD)?false:(dF=(dG=(b$.getParentIdO())(dE),dG==null?null:{$:1,$0:(dH=dG.$0,cK.Equals(dH,dD)||b$.isDescendantOf(dD,dH))}),dF==null?false:dF.$0);};b$.getParentIdO=function(){ct.$cctor();return ct.getParentIdO;};b$.getParentIdONotMemo=function(dD){var dE;dE=b$.snippets().TryFindByKey(dD);return dE==null?null:dE.$0.snpParentIdO;};b$.getSnippetsGen=function(){return[(b$.snippets())["var"].Get(),b$.generation().Get(),b$.collapsedV().Get()];};b$.setSnippet=function(dD){if(!cK.Equals(dD.snpId.get_Id(),"00000000-0000-0000-0000-000000000000"))b$.snippets().Append(P.New(dD.snpId,dD.snpName,dD.snpContent,dD.snpParentIdO,dD.snpPredIds,dD.snpProperties,b$.runReader(function(dE){c.print$1(dE);return 999;},R.maxGenerationRm())+1));};b$.setCurrentSnippetIdO=function(dD){b$.currentSnippetIdOV().Set(dD);};b$.runReader=function(dD,dE){return k.defaultWith(dD,b$.runReaderResult(dE));};b$.runReaderResult=function(dD){return cI.Map(function(dE){return dE[0];},n.runReader(b$.snippetsColl(),dD));};b$.iterReader=function(dD){n.iterReader(function(dE){b$.handleError(dE);},a.ignore,b$.snippetsColl(),dD);};b$.handleError=function(dD){throw new a.Error(a.String(dD));};b$.snippetsColl=function(){return Q.New(b$.generation().Get(),(b$.snippets())["var"].Get(),function(dD){return b$.snippets().TryFindByKey(dD);},b$.predsCache,b$.reducCache,b$.prepCode);};b$.prepCode=function(dD){return cC.Replace(cC.Replace(dD.snpContent,"##"+"FSHARPSTATION_ID"+"##",b_.id()),"##"+"FSHARPSTATION_ENDPOINT"+"##",self.location.href);};b$.clearPredsCache=function(){(b$.clearPreds())();(b$.clearReduc())();(b$.clearParent())();};b$.clearParent=function(){ct.$cctor();return ct.clearParent;};b$.parentCache=function(){ct.$cctor();return ct.parentCache;};b$.clearReduc=function(){ct.$cctor();return ct.clearReduc;};b$.reducCache=function(){ct.$cctor();return ct.reducCache;};b$.clearPreds=function(){ct.$cctor();return ct.clearPreds;};b$.predsCache=function(){ct.$cctor();return ct.predsCache;};b$.collapsedV=function(){ct.$cctor();return ct.collapsedV;};b$.codeSnippetIdOV=function(){ct.$cctor();return ct.codeSnippetIdOV;};b$.currentSnippetIdOV=function(){ct.$cctor();return ct.currentSnippetIdOV;};b$.generation=function(){ct.$cctor();return ct.generation;};b$.hierarchy=function(){ct.$cctor();return ct.hierarchy;};b$.snippets=function(){ct.$cctor();return ct.snippets;};cb.DragNone={$:0};ca.getDragNIdO=function(dD){var dE;return ca.drag().$==1&&(!cK.Equals(ca.drag().$0,dD)&&(dE=ca.drag().$0,true))?{$:1,$0:dE}:null;};ca.setDragNode=function(dD){ca.set_drag({$:1,$0:dD});};ca.setDragNone=function(){ca.set_drag(cb.DragNone);};ca.drag=function(){ct.$cctor();return ct.drag;};ca.set_drag=function(dD){ct.$cctor();ct.drag=dD;};cc.TemplatesFileName=function(){ct.$cctor();return ct.TemplatesFileName;};cc.rootdir=function(){ct.$cctor();return ct.rootdir;};cd.render=function(){var dD,dE,dF,dG;return(dD=(dE=cd.snippets(),_do.Make().WithHole({$:0,$0:"snippets",$1:dE})),(dF=dp.CompleteHoles(dD.k,dD.h,[]),(dG=new dq.New(dF[1],cx.snippetlist(dF[0])),(dD.i=dG,dG)))).get_Doc();};cd.snippets$4304$40=function(dD){return function(dE){var dF;dE.Event.preventDefault();dF=ca.getDragNIdO(dD);(g.iter(function(dG){b$.moveNode(dG,dD);}))(dF);};};cd.snippets$4303$40=function(dD){return function(dE){if(ca.getDragNIdO(dD)!=null)dE.Event.preventDefault();};};cd.snippets$4302$40=function(dD){return function(dE){ca.setDragNode(dD);dE.Event.stopPropagation();};};cd.snippets$4301$40=function(dD){return function(){b$.toggleCollapse(dD);};};cd.snippets$4300$40=function(dD){return function(){b$.togglePredecessor(dD);};};cd.snippets$4299$40=function(dD){var dE;dE=cW.Map(function(dF){return""!==dF;},b$.selectedClassW(dD));return function(dF){return cd.scrollIntoView(dE,dF);};};cd.snippets$4298$40=function(dD){return function(){b$.setCurrentSnippetIdO({$:1,$0:dD});};};cd.snippets=function(){function dD(dE,dF){var dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ;function d0(d1){return d1?"ErrorMsg":"";}dG=(dH=cW.get_Do(),cW.Bind(function(d1){return cW.Bind(function(d2){return cW.Const((d2?"*":"")+R.snippetName(d1.snpName,d1.snpContent));},b$.hasChangedW(d1));},b$.findSnippetW(dE)));dI=cW.Apply(cW.Map2(function(d1,d2){return function(d3){return d1.snpPredIds.Contains(dE)?"direct-predecessor":d2?"indirect-predecessor":d3?"included-predecessor":"";};},b$.currentSnippetV().get_View(),b$.isIndirectPredecessorW(dE)),b$.isIncludedPredecessorW(dE));dJ=(dK=b_.annotationsV().get_View(),cW.Map((dL=(dM=(dN=dE.get_Id(),a.String(dN)),function(d1){return z.contains$1(dM,d1);}),function(d1){return d0(dL(d1));}),dK));return(dO=(dP=(dQ=(dR=(dS=(dT=(dU=(dV=cW.Map(function(d1){return""!==d1;},b$.selectedClassW(dE)),function(d1){return cd.scrollIntoView(dV,d1);}),(dW=(dX=b$.expandClassW(dE),_do.Make().WithHole({$:2,$0:"name",$1:dG}).WithHole({$:1,$0:"indent",$1:a.String(dF)}).WithHole({$:2,$0:"parent",$1:dX})).WithHole({$:2,$0:"predecessor",$1:dI}).WithHole({$:2,$0:"selected",$1:cW.Map2(function(d1,d2){return cC.concat(" ",cF.ofArray([d1,d2]));},b$.selectedClassW(dE),b$.codeSnippetClassW(dE))}).WithHole({$:2,$0:"errormsg",$1:dJ}),dW.WithHole(dp.EventQ2(dW.k,"select",function(){return dW.i;},function(){b$.setCurrentSnippetIdO({$:1,$0:dE});}))).WithHole({$:7,$0:"afterrender",$1:dU})),dT.WithHole(dp.EventQ2(dT.k,"togglepred",function(){return dT.i;},function(){b$.togglePredecessor(dE);}))),dS.WithHole(dp.EventQ2(dS.k,"togglecollapse",function(){return dS.i;},function(){b$.toggleCollapse(dE);}))),dR.WithHole(dp.EventQ2(dR.k,"drag",function(){return dR.i;},function(d1){ca.setDragNode(dE);d1.Event.stopPropagation();}))),dQ.WithHole(dp.EventQ2(dQ.k,"dragover",function(){return dQ.i;},function(d1){if(ca.getDragNIdO(dE)!=null)d1.Event.preventDefault();}))),dP.WithHole(dp.EventQ2(dP.k,"drop",function(){return dP.i;},function(d1){var d2;d1.Event.preventDefault();d2=ca.getDragNIdO(dE);(g.iter(function(d3){b$.moveNode(d3,dE);}))(d2);}))),(dY=dp.CompleteHoles(dO.k,dO.h,[]),(dZ=new dq.New(dY[1],cx.snippet(dY[0])),(dO.i=dZ,dZ)))).get_Doc();}return c1.Convert(function(dE){return dD(dE[0],dE[1]);},b$.getHierarchyW());};cd.scrollIntoView=function(dD,dE){cW.Sink(function(dF){if(dF)dE.scrollIntoViewIfNeeded();},dD);};ce.render$4343$34=function(){return function(){ce.addProperty();};};ce.render=function(){var dD,dE,dF,dG,dH;return(dD=(dE=(dF=ce.properties(),_do.Make().WithHole({$:0,$0:"properties",$1:dF})),dE.WithHole(dp.EventQ2(dE.k,"addproperty",function(){return dE.i;},function(){ce.addProperty();}))),(dG=dp.CompleteHoles(dD.k,dD.h,[]),(dH=new dq.New(dG[1],cx.propertytable(dG[0])),(dD.i=dH,dH)))).get_Doc();};ce.properties$4336$33=function(dD){return function(){ce.remProperty(dD);};};ce.properties=function(){var dD;function dE(dG,dH){cE.set(dD.Get(),dG,[dH,(cE.get(dD.Get(),dG))[1]]);return dD.Set(dD.Get());}function dF(dG,dH){return(cE.get(dD.Get(),dG))[1].length>1000?null:(cE.set(dD.Get(),dG,[(cE.get(dD.Get(),dG))[0],dH]),dD.Set(dD.Get()));}dD=cX.Lens(b$.currentSnippetV(),function(dG){return dG.snpProperties;},function(dG,dH){return P.New(dG.snpId,dG.snpName,dG.snpContent,dG.snpParentIdO,dG.snpPredIds,dH,dG.snpGeneration);});return c1.Convert(function(dG){var dH,dI,dJ,dK,dL,dM;dH=new dk.New(cW.Map(function(dN){return(cE.get(dN,dG))[0];},dD.get_View()),function(dN){return dE(dG,dN);});dI=new dk.New(cW.Map(function(dN){var dO;dO=(cE.get(dN,dG))[1];return dO.length>1000?(((cA.Curried3(function(dP,dQ,dR){return dP(cB.toSafe(dQ)+"...<"+a.String(dR)+" chars>");}))(a.id))(cL.string(dO,{$:1,$0:0},{$:1,$0:100})))(dO.length):dO;},dD.get_View()),function(dN){return dF(dG,dN);});return(dJ=(dK=_do.Make().WithHole({$:8,$0:"name",$1:dH}).WithHole({$:8,$0:"value",$1:dI}),dK.WithHole(dp.EventQ2(dK.k,"remove",function(){return dK.i;},function(){ce.remProperty(dG);}))),(dL=dp.CompleteHoles(dJ.k,dJ.h,[["name",0],["value",0]]),(dM=new dq.New(dL[1],cx.property(dL[0])),(dJ.i=dM,dM)))).get_Doc();},cW.Map(function(dG){return cE.ofSeq(cJ.range(0,cE.length(dG)-1));},dD.get_View()));};ce.remProperty=function(dD){var dE;b$.currentSnippetV().Set((dE=b$.currentSnippetV().Get(),P.New(dE.snpId,dE.snpName,dE.snpContent,dE.snpParentIdO,dE.snpPredIds,cL.array(b$.currentSnippetV().Get().snpProperties,{$:1,$0:0},{$:1,$0:dD-1}).concat(cL.array(b$.currentSnippetV().Get().snpProperties,{$:1,$0:dD+1},null)),dE.snpGeneration)));};ce.addProperty=function(){var dD;b$.currentSnippetV().Set((dD=b$.currentSnippetV().Get(),P.New(dD.snpId,dD.snpName,dD.snpContent,dD.snpParentIdO,dD.snpPredIds,b$.currentSnippetV().Get().snpProperties.concat([["",""]]),dD.snpGeneration)));};cg=cf.HoverProvider=cA.Class({provideHover:function(dD,dE,dF){var dG;return W.ofAsyncResult((dG=e.asyncResult(),dG.Run(dG.Delay(function(){var dH;dH=cf.getIndentAndFirst();return dG.Bind$1(b8.toolTip(cf.fileName(),dE.lineNumber+dH[1],dE.column+dH[0],""),function(dI){return y["AsyncResultBuilder.Bind"](dG,cf.overDescriptions(dI[0]),function(dJ){return dG.Return(bi.New(cE.ofSeq(cD.map(function(dK){return bf.New((c.print$1(dK),dK),true);},dJ)),null));});});}))));}},j,cg);cg.New=cA.Ctor(function(dD){j.New.call(this);},cg);ch=cf.CompletionItemProvider=cA.Class({resolveCompletionItem:function(dD,dE){var dF;function dG(dI){return dI.$==1?cJ.FailWith((function(dJ){return function(dK){return dJ(cw.p$9(dK));};}(a.id))(dI.$0)):dI.$0;}function dH(dI){return cG.Return(dI);}return ds.OfAsync(cG.Bind((dF=e.asyncResult(),dF.Run(dF.Delay(function(){return dF.Bind$1(b8.helpText(dD.label),function(dI){return dF.Return(bh.New(dD.kind,dD.label,cC.concat("\n",cD.collect(function(dJ){return cF.ofSeq(cD.delay(function(){return cD.append(!(!dJ.Signature)?[dJ.Signature]:[],cD.delay(function(){return cD.append(!(!dJ.Comment)?[dJ.Comment]:[],cD.delay(function(){return!(!dJ.Footer)?[dJ.Footer]:[];}));}));}));},cD.collect(a.id,dI[0].Overloads)))));});}))),function(dI){return dH(dG(dI));}));},provideCompletionItems:function(dD,dE,dF,dG){var dH;function dI(dK){return dK.$==1?cJ.FailWith((function(dL){return function(dM){return dL(cw.p$9(dM));};}(a.id))(dK.$0)):dK.$0;}function dJ(dK){return cG.Return(dK);}return ds.OfAsync(cG.Bind((dH=e.asyncResult(),dH.Run(dH.Delay(function(){var dK,dL;dK=cf.getIndentAndFirst();dL=dK[0];return dH.Bind$1(b8.completion(cC.replicate(dL," ")+dD.getLineContent(dE.lineNumber),true,cf.fileName(),dE.lineNumber+dK[1],dE.column+dL,"Contains"),function(dM){return dH.Return(cE.map(function(dN){return bh.New(cf.convertGlyphChar(dN.GlyphChar),dN.Name,"");},dM[0]));});}))),function(dK){return dJ(dI(dK));}));}},j,ch);ch.New=cA.Ctor(function(dD){j.New.call(this);},ch);ci=cf.DefinitionProvider=cA.Class({provideDefinition:function(dD,dE,dF){var dG;function dH(dJ){return dJ.$==1?cJ.FailWith((function(dK){return function(dL){return dK(cw.p$9(dL));};}(a.id))(dJ.$0)):dJ.$0;}function dI(dJ){return cG.Return(dJ);}return ds.OfAsync(cG.Bind((dG=e.asyncResult(),dG.Run(dG.Delay(function(){var dJ;dJ=cf.getIndentAndFirst();return dG.Bind$1(b8.findDeclaration(cf.fileName(),dE.lineNumber+dJ[1],dE.column+dJ[0],""),function(dK){var dL,dM,dN,dO,dP,dQ,dR,dS;dL=dK[0];dM=cf.getSnipIdIndentAndFirst(dL.Line);dN=dM[0];dO=dM[1];dP=dM[2];dQ=(dR="snpId:"+(dS=dN.get_Id(),a.String(dS)),self.monaco.Uri.parse(dR));cf.getSnippetModel(dN);return dG.Return(bb.New($.New(dL.Column-dO,dL.Column-dO,dL.Line-dP,dL.Line-dP),dQ));});}))),function(dJ){return dI(dH(dJ));}));}},j,ci);ci.New=cA.Ctor(function(dD){j.New.call(this);},ci);cj.New=function(dD,dE){return{fontSize:dD,lineHeight:dE};};ck.New=function(dD,dE){return{setEditor:dD,createModelReference:dE};};cf["goto"]=function(dD,dE,dF){var dG;dG=null;return cG.Delay(function(){var dH,dI;dH=(dI=cf.editorConfigO(),dI==null?null:dI.$0.editorO);return dH!=null&&dH.$==1?cG.Bind(cf.gotoEditor(dH.$0,dD,dE,dF),function(){return cG.Return(null);}):cG.Zero();});};cf.getEditorConfigO=function(){var dD;dD={$:1,$0:cf.monacoNew(cX.Lens(b$.currentSnippetV(),function(dE){return dE.snpContent;},function(dE,dF){return P.New(dE.snpId,dE.snpName,dF,dE.snpParentIdO,dE.snpPredIds,dE.snpProperties,dE.snpGeneration);}),{$:1,$0:cW.Map2(cf.transformAnnotations,b$.currentSnippetW(),b_.annotationsV().get_View())},null,null)};cf.set_editorConfigO(dD);return dD;};cf.editorConfigO=function(){ct.$cctor();return ct.editorConfigO;};cf.set_editorConfigO=function(dD){ct.$cctor();ct.editorConfigO=dD;};cf.parse=function(dD,dE){var dF;v.iterA(function(dG){c.print$1(dG);},function(){c.print$1();},(dF=e.asyncResult(),dF.Run(dF.Delay(function(){var dG,dH;dG="Parsing...\n"+z.skipFirstLine$1(b_.annotationsV().Get());b_.annotationsV().Set(dG);cf.startsV().Set(dE);dH=z.splitByChar$1("\n",dD);cf.set_fileName(M.getSourceDir(b_.srcDir(),dH)+"/"+b_.id()+".fsx");return dF.Bind$1(b8.parseCode(cf.fileName(),dH,true,0),function(dI){var dJ;dJ=cC.concat("\n",cD.append(cF.ofArray(["Parsed!"]),cD.map(function(dK){var dL,dM,dN,dO,dP;function dQ(dR,dS){return dK.StartLine>dS[1]&&dK.StartLine<=dS[2];}dL=(dM=cD.tryFind(function(dR){return dQ(dR[0],dR[1]);},dE),(cf.defaultStart())(dM));dN=dL[1][0];dO=dL[1][1];return((((((((((cA.Curried(function(dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0){return dR(cB.toSafe(dS)+" ("+a.String(dT)+", "+a.String(dU)+") - ("+a.String(dV)+", "+a.String(dW)+") "+cB.toSafe(dX)+"("+cB.toSafe(dY)+") \""+cB.toSafe(dZ)+": "+cB.toSafe(d0)+"\".");},10))(a.id))(dK.Severity==="Error"?"Err":"Warn"))(dK.StartLine-dO))(dK.StartColumn-dN))(dK.EndLine-dO))(dK.EndColumn-dN))(dL[0][1]))((dP=dL[0][0].get_Id(),a.String(dP))))(dK.Subcategory))(dK.Message);},dI[0].Errors)));b_.annotationsV().Set(dJ);cD.iter(function(dK){c.print$1(dK);},dI[1]);return dF.Zero();});}))));};cf.monacoNew=function(dD,dE,dF,dG){var dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW;dU=_9.newVar(dD);dM=dU.editorO;dN=cf.newPojo([["fontSize",12],["lineHeight",14]]);dV=a.require("vs/editor/standalone/browser/standaloneServices");dW=new dV.StaticServices.codeEditorService._factory();dW.openCodeEditor=cf.openCodeEditor;dT=dW;dS=["codeEditorService",dT];dQ=[dS,["textModelResolverService",cf.textModelResolverService()]];dO=cf.newPojo(dQ);dI=bk.New(dU["var"],dU.onChange,dU.onRender,dM,dU.disabled,dN,dO);return _9.onRender(function(dX){var dY,dZ,d0,d1;function d2(d7,d8,d9){return dZ.provideHover(d7,d8,d9);}function d3(d7,d8,d9,d_){return d0.provideCompletionItems(d7,d8,d9,d_);}function d4(d7,d8){return d0.resolveCompletionItem(d7,d8);}function d5(d7,d8,d9){return d1.provideDefinition(d7,d8,d9);}function d6(d7){var d8;d8=dX.getModel();self.monaco.editor.setModelMarkers(d8,"annotations",d7);}dY=dX.getModel();self.monaco.editor.setModelLanguage(dY,"fsharp");self.monaco.editor.setTheme("vs");dZ=new cg.New(dX);d0=new ch.New(dX);d1=new ci.New(dX);c.print$1(function(d7){return d2(d7[0],d7[1],d7[2]);});c.print$1(function(d7){return d3(d7[0],d7[1],d7[2],d7[3]);});c.print$1(function(d7){return d4(d7[0],d7[1]);});c.print$1(function(d7){return d5(d7[0],d7[1],d7[2]);});self.monaco.languages.registerHoverProvider("fsharp",dZ);self.monaco.languages.registerCompletionItemProvider("fsharp",d0);self.monaco.languages.registerDefinitionProvider("fsharp",d1);(g.iter(function(d7){cW.Sink(d6,d7);}))(dE);},dI);};cf.textModelResolverService=function(){var dD;dD=null;return ck.New(function(dE){dD={$:1,$0:dE};},function(dE){var dF;return ds.OfAsync((dF=null,cG.Delay(function(){var dG,dH,dI,dJ;dI=cf.getSnippetModel(dE);dJ=self.require("vs/base/common/lifecycle");dH=new dJ.ImmortalReference(dI);return cG.Return(dH);})));});};cf.openCodeEditor=function(dD,dE,dF){var dG;return ds.OfAsync((dG=null,cG.Delay(function(){var dH,dI;dH=dD.resource.path;dI=(A.Guid$1())(dH);return dI!=null&&dI.$==1?cG.Bind(cf.gotoEditor(dE,new O({$:0,$0:dI.$0}),dD.options.selection.startLineNumber,dD.options.selection.startColumn),function(){return cG.Return(dE);}):cG.Return(null);})));};cf.gotoEditor=function(dD,dE,dF,dG){var dH;dH=null;return cG.Delay(function(){b$.expandParents(dE);b$.setCurrentSnippetIdO({$:1,$0:dE});return cG.Bind(cG.Sleep(200),function(){dD.focus();dD.setPosition(_.New(dG,dF));dD.revealPositionInCenter(_.New(dG,dF));return cG.Zero();});});};cf.newPojo=function(dD){var dE,dF;function dG(dI,dJ){return function(dK){return cf.addProp(dI,dJ,dK);};}function dH(dI){}dE={};cD.iter((dF=function(dI){return(function(dJ){return dG(dJ[0],dJ[1]);}(dI))(dE);},function(dI){return dH(dF(dI));}),dD);return dE;};cf.addProp=function(dD,dE,dF){dF[dD]=dE;return dF;};cf.transformAnnotations=function(dD,dE){var dF,dG;function dH(dI,dJ,dK,dL,dM,dN,dO){var dP;return!cK.Equals((dP=(A.parseGuidO$1())(dN),dP==null?null:{$:1,$0:new O({$:0,$0:dP.$0})}),{$:1,$0:dD.snpId})?null:{$:1,$0:bg.New(dK,dM,dJ,dL,dI==="Err"?8:dI==="Warn"?4:dI==="Hint"?1:2,dO)};}dF="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*\\("+V.rexGuid$1()+"\\) \"([^\"]+?)\"\\.";return cE.choose(function(dI){return dH(dI[0],dI[1],dI[2],dI[3],dI[4],dI[5],dI[6]);},cE.choose(function(dI){var dJ,dK,dL;return(dK=V.REGEX$2(dF,"",dI),dK!=null&&dK.$==1&&((dL=dK.$0,!cK.Equals(dL,null)&&dL.length===8)&&(dJ=[cE.get(dK.$0,3),cE.get(dK.$0,2),cE.get(dK.$0,6),cE.get(dK.$0,7),cE.get(dK.$0,5),cE.get(dK.$0,4),cE.get(dK.$0,1)],true)))?{$:1,$0:[dJ[6],cJ.toInt(a.Number(dJ[1])),cJ.toInt(a.Number(dJ[0])),cJ.toInt(a.Number(dJ[5])),cJ.toInt(a.Number(dJ[4])),dJ[2],dJ[3]]}:null;},(dG=V.REGEX$2(dF,"g",dE),dG!=null&&dG.$==1?dG.$0:[])));};cf.convertGlyphChar=function(dD){return dD==="C"?6:dD==="E"?12:dD==="S"?11:dD==="I"?7:dD==="N"?8:dD==="M"?1:dD==="P"?9:dD==="F"?4:dD==="T"?6:dD==="K"?13:0;};cf.fileName=function(){ct.$cctor();return ct.fileName;};cf.set_fileName=function(dD){ct.$cctor();ct.fileName=dD;};cf.overDescriptions=function(dD){return h.sequenceSeq(cD.collect(function(dE){return cF.ofSeq(cD.delay(function(){return cD.append(!(!dE.Signature)?[cG.Return("```\n"+dE.Signature+"\n```")]:[],cD.delay(function(){function dF(dG){return cG.Return(dG);}return cD.append(!(!dE.Comment)?[cG.Bind((new dj.New()).Async("FSharpStation:FsRoot.FSharpStation+Markdown.createCommentBlock:-1840423385",[dE.Comment]),function(dG){return dF(cf.fixMarkDown(dG));})]:[],cD.delay(function(){return!(!dE.Footer)?[cG.Return(cf.fixMarkDown(dE.Footer))]:[];}));}));}));},cD.collect(a.id,dD)));};cf.fixMarkDown=function(dD){return cC.concat("\n\n",cD.map(function(dE){var dF;dF=cD.length(cD.takeWhile(function(dG){return" "===dG;},dE));return cC.replicate(dF,"&nbsp;")+cL.string(dE,{$:1,$0:dF},null);},cD.map(function(dE){return cC.Replace(dE,"\u0009","- ");},z.splitByChar$1("\n",dD))));};cf.getSnippetModel=function(dD){var dE,dF,dG;dE=(dF="snpId:"+(dG=dD.get_Id(),a.String(dG)),self.monaco.Uri.parse(dF));return cf.getModelUri(b$.runReader(function(dH){return cJ.FailWith(a.String(dH));},R.snippetRm(dD)).snpContent,dE);};cf.getModelUri=function(dD,dE){var dF,dG,dH;dF=(dG=(dH=self.monaco.editor.getModel(dE),!dH?null:{$:1,$0:dH}),dG==null?self.monaco.editor.createModel("","fsharp",dE):dG.$0);dF.getValue()!==dD?dF.setValue(dD):void 0;return dF;};cf.getSnipIdIndentAndFirst=function(dD){var dE,dF;function dG(dH,dI){return dD>=dI[1]&&dD<=dI[2];}dE=(dF=cD.tryFind(function(dH){return dG(dH[0],dH[1]);},cf.startsV().Get()),(cf.defaultStart())(dF));return[dE[0][0],dE[1][0],dE[1][1]];};cf.getIndentAndFirst=function(){var dD,dE,dF,dG;function dH(dK){return dK[0];}function dI(dK){return dK[0];}function dJ(dK){return cK.Equals(dD,dK);}dD=b$.currentSnippetV().Get().snpId;dE=(dF=cD.tryFind((dG=function(dK){return dI(dH(dK));},function(dK){return dJ(dG(dK));}),cf.startsV().Get()),(cf.defaultStart())(dF));return[dE[1][0],dE[1][1]];};cf.defaultStart=function(){ct.$cctor();return ct.defaultStart;};cf.startsV=function(){ct.$cctor();return ct.startsV;};cl.jumpToRef=function(dD){var dE,dF;function dG(dH,dI,dJ){return dF>=dI&&dF<dJ?{$:1,$0:dH}:null;}dE=dD.value;dF=dD.selectionStart;cl.jumpToLine(cD.pick(function(dH){return dG(dH[0],dH[1],dH[2]);},(cD.mapFold(function(dH,dI){return[[dI,dH,dH+dI.length+1],dH+dI.length+1];},0,cC.SplitChars(dE,["\n"],0)))[0]));};cl.jumpToLine=function(dD){var dE,dF,dG,dH,dI;dE=V.REGEX$2(cl.rexGuid(),"",dD);dE!=null&&dE.$==1?(dF=dE.$0,!cK.Equals(dF,null)&&dF.length===6)?(dG=cE.get(dE.$0,2),dH=cE.get(dE.$0,5),dI=cE.get(dE.$0,1),cG.Start(cf["goto"](new O({$:0,$0:dH}),cJ.toInt(a.Number(dI)),cJ.toInt(a.Number(dG))),null)):void 0:void 0;};cl.rexGuid=function(){ct.$cctor();return ct.rexGuid$1;};cm.buttonClick=function(dD){cm.actionClick(cC.Trim(dD.textContent));};cm.actionClick=function(dD){var dE;dE=cm.actionClickRm(dD);r.iterReaderA(function(dF){c.print$1(dF);},function(dF){c.print$1(dF);},b$.snippetsColl(),dE);};cm.actionClickRm=function(dD){var dE;dE=r.fusion();return dE.Run(dE.Delay(function(){var dF;dF=(function(dG){return function(dH){return dG("Action "+cB.toSafe(dH)+" ...");};}(a.id))(dD);b_.outputMsgs().Set(dF);return dE.Bind(cm.getBaseSnippet(),function(dG){function dH(dI){return cm.fetchValue(dD,dI);}return dE.Bind(s.op_BarGreaterGreater(cm.getCode(dG,dD),function(dI){return cm.translateString(dH,dI);}),function(dI){return dE.Bind(r.ofAsync((new dj.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bo({$:0,$0:b_.id()})])),function(){return dE.Bind(s.op_BarGreaterGreater(r.ofFusionM(R.fastCodeRm({$:1,$0:dG.snpId},{$:1,$0:dG.snpId})),function(dJ){return dJ[0];}),function(dJ){return dE.Bind(r.ofFusionM(R.predsGenerationRm(dG)),function(dK){return dE.ReturnFrom(r.ofAsync((new dj.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCodeWithPresence:854633647",[b_.srcDir(),(function(dL){return function(dM){return dL(cw.p(dM));};}(a.id))(dG.snpId),a.String(dK),{$:0,$0:dJ},{$:0,$0:dI}])));});});});});});}));};cm.fetchValue=function(dD,dE){var dF,dG,dH;return dE==="button"?dD:(dF=(dG=(dH=(dt.splitName("Snp_"+cC.Replace(a.String(b$.currentSnippetV().Get().snpId.get_Id()),"-","")))(dE),dt.tryGetWoW(dH[0],dH[1])),dG==null?null:cW.TryGet(dG.$0)),dF==null?(function(dI){return function(dJ){return dI("$[not found:"+cB.toSafe(dJ)+"]");};}(a.id))(dE):dF.$0);};cm.getCode=function(dD,dE){var dF;dF=r.fusion();return dF.Run(dF.Delay(function(){var dG;function dH(dI,dJ){return dI+dJ;}return dF.Bind(s.op_BarGreaterGreater(s.op_BarGreaterGreater(cm.propO(dD,"Open"),(dG=function(dI){return dH(dI,"\n");},function(dI){return dI==null?null:{$:1,$0:dG(dI.$0)};})),function(dI){return dI==null?"":dI.$0;}),function(dI){return dF.Bind(cm.propO(dD,dE),function(dJ){return dJ==null?cC.StartsWith(dE,":")?dF.Return(dI+cL.string(dE,{$:1,$0:1},null)):dF.Bind(s.op_BarGreaterGreater(cm.propO(dD,"action-template"),function(dK){return dK==null?"${button}() |> printfn \"%A\"":dK.$0;}),function(dK){var dL;return dF.Return((dL=(z.indentStr$1(4))(dI+dK),(((cA.Curried3(function(dM,dN,dO){return dM("module Call"+cB.toSafe(dN)+" =\n"+cB.toSafe(dO));}))(a.id))(a.String(du.now())))(dL)));}):dF.Return(dI+dJ.$0);});});}));};cm.getBaseSnippet=function(){var dD;dD=r.fusion();return dD.Run(dD.Delay(function(){var dE;dE=b$.currentSnippetV().Get();return dD.Bind(cm.propO(dE,"BaseSnippet"),function(dF){return dD.ReturnFrom(s.op_BarGreaterGreater(s.op_BarGreaterGreater(r.insertO(dF==null?null:{$:1,$0:r.ofFusionM(R.snippetFromRefORm({$:1,$0:cC.SplitChars(dF.$0,["/"],0)}))}),function(dG){return dG==null?null:dG.$0;}),function(dG){return dG==null?dE:dG.$0;}));});}));};cm.translateString=function(dD,dE){function dF(dG,dH){var dI;dI=z.delimitedO$1("${","}",dH);return dI!=null&&dI.$==1?dF(dG+dI.$0[0],dD(dI.$0[1])+dI.$0[2]):dG+dH;}return dF("",dE);};cm.propO=function(dD,dE){function dF(dG,dH){return dH[0];}return s.op_BarGreaterGreater(r.ofFusionM(R.propertyHierORm(dE,dD)),function(dG){var dH;return dG==null?null:{$:1,$0:(dH=dG.$0,dF(dH[0],dH[1]))};});};co.New=function(dD,dE,dF){return{snippets:dD,generation:dE,collapsed:dF};};cn.serModel=function(){ct.$cctor();return ct.serModel;};cn.getModel=function(dD,dE,dF){return co.New(cE.ofSeq(dD),dE,dF);};cn.serSnippet=function(){ct.$cctor();return ct.serSnippet;};cn.serSnippetId=function(){ct.$cctor();return ct.serSnippetId;};cp.saveAs=function(){var dD,dE,dF,dG;dD=(dE=cD.last(cC.SplitChars(cp.fileName().Get(),["/","\\"],0)),dE===""?"noname.snippets":dE);a.saveAs(new a.Blob([(dF=(dG=b$.getSnippetsGen(),cn.getModel(dG[0],dG[1],dG[2])),(cn.serModel())[0](dF))],{type:"text/plain;charset=utf-8"}),dD);b$.updateGeneration();};cp.loadTextFile=function(dD){var dE,dF;if(cp.canLoad()){dE=dD.files;dE.length>0?(dF=new a.FileReader(),dF.onload=function(dG){return cp.parseText(dG.target.result);},cp.fileName().Set(dE.item(0).name),dF.readAsText(dE.item(0))):void 0;}};cp.parseText=function(dD){var dE,dF;try{dE=(dF=c_.parse(dD),(cn.serModel())[1](dF));b$.setSnippetsGen(dE.snippets,dE.collapsed);}catch(dG){a.alert(a.String(dG));((function(dH){return function(dI){return dH(cB.prettyPrint(dI));};}(function(dH){cU.log(dH);}))(dG));}};cp.canLoad=function(){return cK.Equals(cW.TryGet(b$.SaveAsClassW()),{$:1,$0:""})||a.confirm("Changes have not been saved, do you really want to load?");};cp.fileName=function(){ct.$cctor();return ct.fileName$1;};cq.importFile=function(dD){var dE,dF;if(cp.canLoad()){dE=dD.files;dE.length>0?(dF=new a.FileReader(),dF.onload=function(dG){return cq.parseText(dG.target.result);},dF.readAsText(dE.item(0))):void 0;}};cq.parseText=function(dD){var dE;try{b$.setSnippetsGen((dE=c_.parse(dD),(cq.serSnippets())[1](dE)),new cR.New$1(null));}catch(dF){a.alert(a.String(dF));((function(dG){return function(dH){return dG(cB.prettyPrint(dH));};}(function(dG){cU.log(dG);}))(dF));}};cq.serSnippets=function(){ct.$cctor();return ct.serSnippets;};cq.serSnippet2=function(){ct.$cctor();return ct.serSnippet2;};cq.serSnippetId2=function(){ct.$cctor();return ct.serSnippetId2;};cr.mainProgram=function(){var dD,dE,dF,dG,dH,dI;dt.addPlugIn(dv.New("FSharpStation",[dt.newVar("fileName",cp.fileName()),dt.newVar("SnippetName",cX.Lens(b$.currentSnippetV(),function(dJ){return dJ.snpName;},function(dJ,dK){return P.New(dJ.snpId,dK,dJ.snpContent,dJ.snpParentIdO,dJ.snpPredIds,dJ.snpProperties,dJ.snpGeneration);})),dt.newVar("Content",cX.Lens(b$.currentSnippetV(),function(dJ){return dJ.snpContent;},function(dJ,dK){return P.New(dJ.snpId,dJ.snpName,dK,dJ.snpParentIdO,dJ.snpPredIds,dJ.snpProperties,dJ.snpGeneration);})),dt.newVar("Output",b_.outputMsgs()),dt.newVar("Parser",b_.annotationsV())],[dt.newViw("FsCode",b$.FsCodeW()),dt.newViw("SaveNeeded",b$.SaveAsClassW()),dt.newViw("CurrentPath",b$.currentPathW())],[dt.newDoc("mainDoc",dw.Create(cr.mainDoc)),dt.newDoc("editor",dw.Create(function(){var dJ,dK,dL;return c1.Element("div",[],[(dJ=(dK=cf.getEditorConfigO(),dK==null?null:{$:1,$0:_9.render(dK.$0)}),(dL=c1.get_Empty(),dJ==null?dL:dJ.$0))]);})),dt.newDoc("Snippets",dw.Create(cd.render)),dt.newDoc("Properties",dw.Create(ce.render)),dt.newDoc("ButtonsRight",dw.Create(cr.buttonsRight))],[dt.newAct("AddSnippet",function(){b$.newSnippet();}),dt.newAct("RemoveSnippet",function(){cr.deleteSnippet();}),dt.newAct("IndentIn",function(){b$.indentIn();}),dt.newAct("IndentOut",function(){b$.indentOut();}),dt.newAct("AddProperty",function(){ce.addProperty();}),dt.newAct("SaveAs",function(){cp.saveAs();}),dt.newAct("RunFS",function(){cr.runFsCode();}),dt.newActF("LoadFile",{$:1,$0:function(dJ){cp.loadTextFile(dJ);},$1:"FileElement"}),dt.newActF("Import",{$:1,$0:function(dJ){cq.importFile(dJ);},$1:"FileElement"}),dt.newActF("JumpTo",{$:1,$0:function(dJ){cl.jumpToRef(dJ);},$1:"textarea"}),dt.newActF("ButtonClick",{$:1,$0:function(dJ){cm.buttonClick(dJ);},$1:"button"}),dt.newActF("ActionClick",{$:1,$0:function(dJ){cm.actionClick(dJ);},$1:"name"})],[]));dx.addLayout((dD=(z.unindentStr())("\n        \n                    menuEditor       horizontal  65       menuLogo                  editorMessages\n                    double           horizontal  0-50-100 AppFramework.AppFwkClient menuEditor\n                    menuLogo         vertical    350      logo                      menu\n                    logo             span       \"margin:0; color:gray; font-size: 55px; font-weight:530\" \"F# Station\"\n                    editorMessages   horizontal 10-83-100 editorButtons             messages\n                    messages         vertical   0-50-100  messagesLeft              messagesRight\n                    editorButtons    vertical -200 snippetsSnippet buttons\n                    buttons div      \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\" btnSaveAs none x btnAddSnippet btnDeleteSnippet btnIndentIn btnIndentOut none x btnRunFS\n                    snippetsSnippet  vertical   0-20-100  snippets                  editorProperties\n                    snippets         horizontal 20        \"${FSharpStation.CurrentPath}\" FSharpStation.Snippets\n                    editorProperties vertical   0-100-100 snippet                   properties\n                    properties       div        \"\"        FSharpStation.Properties\n                    snippet          horizontal 35        Name                      FSharpStation.editor\n                    menu             span  \"\" btnLoad btnImport\n                    \n                    btnSaveAs        button FSharpStation.SaveAs         \"class=btn ${FSharpStation.SaveNeeded}\" \"Save as...    \"\n                    btnAddSnippet    button FSharpStation.AddSnippet     \"\"                  \"Add Snippet   \"\n                    btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\n                    btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\n                    btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\n                    btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\n         \n                    messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\n                    messagesRight    wcomp-tabstrip                      \"\"                  Parser\n         \n                    Output           textarea  FSharpStation.Output      \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \n                    FsCode           textarea  FSharpStation.FsCode      \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \n                    Parser           textarea  FSharpStation.Parser      \"tabname=Parser ; placeholder=Parser messages; dblclick=${FSharpStation.JumpTo} ; spellcheck=false\" \n                    Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\n                    btnLoad          Doc       InputFile                 \"\"     \"Load File...\" FSharpStation.LoadFile  FileName\n                    btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\n                    FileName         div                                 \"class=form-control\"  FSharpStation.fileName\n                "),dx.newLyt(cr.FStationLyt(),dD)));cW.Sink(function(dJ){(g.iter(function(dK){try{self["eval"].apply(self,["CIPHERSpaceLoadFilesDoAfter(function(){IntelliFactory.Runtime.Start()})"]);self["eval"].apply(self,[dK[1]]);}catch(dL){c.print(dL);}}))(dJ);},(dE=b$.currentLayoutJSDW(),(dF=[cX.Create$1(null)],(cW.Sink(function(dJ){if(!cK.Equals(dF[0].Get(),dJ))dF[0].Set(dJ);},dE),dF[0].get_View()))));cW.Sink(function(dJ){var dK,dL,dM,dN,dO,dP;dK=(dL=dJ==null?null:(dM=dJ.$0,(dN=dM[0],(dO=dM[1],(dx.addLayout(dx.newLyt(dN,dO)),dO===""?null:{$:1,$0:dN})))),(dP=cr.FStationLyt(),dL==null?dP:dL.$0));dt.mainDocV().Set(dK);},(dG=b$.currentLayoutDW(),(dH=[cX.Create$1(null)],(cW.Sink(function(dJ){if(!cK.Equals(dH[0].Get(),dJ))dH[0].Set(dJ);},dG),dH[0].get_View()))));return c1.Async((dI=null,cG.Delay(function(){return cG.Bind(_9.loader(),function(){var dJ,dK,dL;dJ=(dK=cf.getEditorConfigO(),dK==null?null:{$:1,$0:_9.render(dK.$0)});dL=c1.get_Empty();dJ==null?void 0:void 0;return cG.Return(dt.getMainDoc().f());});})));};cr.mainDoc$4999$78=a.id;cr.mainDoc$4991$39=function(){return function(dD){cl.jumpToRef(dD.Target);};};cr.mainDoc$4990$39=function(){return function(dD){dD.Target.value="";};};cr.mainDoc$4989$39=function(){return function(dD){cq.importFile(dD.Target);};};cr.mainDoc$4988$39=function(){return function(dD){dD.Target.value="";};};cr.mainDoc$4987$39=function(){return function(dD){cp.loadTextFile(dD.Target);};};cr.mainDoc=function(){var dD,dE,dF,dG,dH,dI,dJ,dK;dD=cr.hookDoc("FSharpStation","ButtonsRight",function(dL,dM){return dL.WithHole({$:0,$0:"buttonsright",$1:dM});},cr.hookDoc("FSharpStation","Properties",function(dL,dM){return dL.WithHole({$:0,$0:"properties",$1:dM});},cr.hookDoc("FSharpStation","Snippets",function(dL,dM){return dL.WithHole({$:0,$0:"snippets",$1:dM});},cr.hookDoc("FSharpStation","editor",function(dL,dM){return dL.WithHole({$:0,$0:"codeeditor",$1:dM});},cr.hookAct("FSharpStation","SaveAs",function(dL,dM){return dL.WithHole(dp.EventQ2(dL.k,"saveas",function(){return dL.i;},dM));},cr.hookViw("FSharpStation","SaveNeeded",function(dL,dM){return dL.WithHole({$:2,$0:"saveasclass",$1:dM});},cr.hookViw("FSharpStation","FSCode",function(dL,dM){return dL.WithHole({$:8,$0:"fscode",$1:new dk.New(dM,a.ignore)});},cr.hookVar("FSharpStation","Parser",function(dL,dM){return dL.WithHole({$:8,$0:"parser",$1:dM});},cr.hookVar("FSharpStation","Output",function(dL,dM){return dL.WithHole({$:8,$0:"output",$1:dM});},cr.hookVar("FSharpStation","SnippetName",function(dL,dM){return dL.WithHole({$:8,$0:"name",$1:dM});},cr.hookVar("FSharpStation","fileName",function(dL,dM){return dL.WithHole({$:8,$0:"filename",$1:dM});},(dE=(dF=(dG=(dH=(dI=_do.Make(),dI.WithHole(dp.EventQ2(dI.k,"loadfilechanged",function(){return dI.i;},function(dL){cp.loadTextFile(dL.Target);}))),dH.WithHole(dp.EventQ2(dH.k,"loadfileclear",function(){return dH.i;},function(dL){dL.Target.value="";}))),dG.WithHole(dp.EventQ2(dG.k,"importfilechanged",function(){return dG.i;},function(dL){cq.importFile(dL.Target);}))),dF.WithHole(dp.EventQ2(dF.k,"importfileclear",function(){return dF.i;},function(dL){dL.Target.value="";}))),dE.WithHole(dp.EventQ2(dE.k,"jumpref",function(){return dE.i;},function(dL){cl.jumpToRef(dL.Target);}))))))))))))));return(dJ=dp.CompleteHoles(dD.k,dD.h,[["filename",0],["name",0],["output",0],["fscode",0],["parser",0]]),(dK=new dq.New(dJ[1],cx.layout(dJ[0])),(dD.i=dK,dK))).get_Doc();};cr.buttonsRight$4973$74=a.id;cr.buttonsRight$4972$74=a.id;cr.buttonsRight$4971$74=a.id;cr.buttonsRight$4970$74=a.id;cr.buttonsRight$4969$74=a.id;cr.buttonsRight=function(){var dD,dE,dF;dD=cr.hookAct("FSharpStation","RunFS",function(dG,dH){return dG.WithHole(dp.EventQ2(dG.k,"runfs",function(){return dG.i;},dH));},cr.hookAct("FSharpStation","IndentOut",function(dG,dH){return dG.WithHole(dp.EventQ2(dG.k,"indentout",function(){return dG.i;},dH));},cr.hookAct("FSharpStation","IndentIn",function(dG,dH){return dG.WithHole(dp.EventQ2(dG.k,"indentin",function(){return dG.i;},dH));},cr.hookAct("FSharpStation","RemoveSnippet",function(dG,dH){return dG.WithHole(dp.EventQ2(dG.k,"removesnippet",function(){return dG.i;},dH));},cr.hookAct("FSharpStation","AddSnippet",function(dG,dH){return dG.WithHole(dp.EventQ2(dG.k,"addsnippet",function(){return dG.i;},dH));},_do.Make())))));return(dE=dp.CompleteHoles(dD.k,dD.h,[]),(dF=new dq.New(dE[1],cx.buttonsright(dE[0])),(dD.i=dF,dF))).get_Doc();};cr.hookDoc=function(dD,dE,dF,dG){var dH,dI,dJ;dH=(dI=dt.tryGetDoc(dD,dE),dI==null?null:{$:1,$0:(dJ=dI.$0,((((cA.Curried3(function(dK,dL,dM){return dK("Doc    "+cB.toSafe(dL)+"."+cB.toSafe(dM)+" hooked");}))(function(dK){cU.log(dK);}))(dD))(dE),dF(dG,c1.EmbedView(cW.Map(function(){return dt.getLazyDoc(dJ);},dt.mainDocV().get_View())))))});return dH==null?((((cA.Curried3(function(dK,dL,dM){return dK("Doc    "+cB.toSafe(dL)+"."+cB.toSafe(dM)+" not found");}))(function(dK){cU.log(dK);}))(dD))(dE),dG):dH.$0;};cr.hookAct=function(dD,dE,dF,dG){var dH,dI,dJ;dH=(dI=dt.tryGetAct(dD,dE),dI==null?null:{$:1,$0:(dJ=dI.$0,((((cA.Curried3(function(dK,dL,dM){return dK("Action "+cB.toSafe(dL)+"."+cB.toSafe(dM)+" hooked");}))(function(dK){cU.log(dK);}))(dD))(dE),dF(dG,function(){dt.callFunction(null,null,dJ.actFunction);})))});return dH==null?((((cA.Curried3(function(dK,dL,dM){return dK("Action "+cB.toSafe(dL)+"."+cB.toSafe(dM)+" not found");}))(function(dK){cU.log(dK);}))(dD))(dE),dG):dH.$0;};cr.hookViw=function(dD,dE,dF,dG){var dH,dI;dH=(dI=dt.tryGetViw(dD,dE),dI==null?null:{$:1,$0:((((cA.Curried3(function(dJ,dK,dL){return dJ("View   "+cB.toSafe(dK)+"."+cB.toSafe(dL)+" hooked");}))(function(dJ){cU.log(dJ);}))(dD))(dE),dF(dG,dI.$0.viwView))});return dH==null?((((cA.Curried3(function(dJ,dK,dL){return dJ("View   "+cB.toSafe(dK)+"."+cB.toSafe(dL)+" not found");}))(function(dJ){cU.log(dJ);}))(dD))(dE),dG):dH.$0;};cr.hookVar=function(dD,dE,dF,dG){var dH,dI;dH=(dI=dt.tryGetVar(dD,dE),dI==null?null:{$:1,$0:((((cA.Curried3(function(dJ,dK,dL){return dJ("Var    "+cB.toSafe(dK)+"."+cB.toSafe(dL)+" hooked");}))(function(dJ){cU.log(dJ);}))(dD))(dE),dF(dG,dI.$0.varVar))});return dH==null?((((cA.Curried3(function(dJ,dK,dL){return dJ("Var    "+cB.toSafe(dK)+"."+cB.toSafe(dL)+" not found");}))(function(dJ){cU.log(dJ);}))(dD))(dE),dG):dH.$0;};cr.FStationLyt=function(){ct.$cctor();return ct.FStationLyt;};cr.deleteSnippet=function(){var dD;dD=b$.currentSnippetV().Get();!cK.Equals(dD.snpId,O.get_Empty())&&a.confirm((function(dE){return function(dF){return dE("Do you want to delete "+cB.toSafe(dF)+"?");};}(a.id))(R.snippetName(dD.snpName,dD.snpContent)))?b$.deleteCurrentSnippet():void 0;};cr.runFsCode=function(){var dD;function dE(dF){b_.appendMsgs(cC.Replace(dF,"xXxYyYyhH","Done!"));}dD=cW.TryGet(b$.FsCodeW());(g.iter(function(dF){var dG,dH,dI;dG=(dH=r.fusion(),dH.Run(dH.Delay(function(){b_.outputMsgs().Set("Running F#...");return dH.Bind(r.ofAsync((new dj.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bo({$:0,$0:b_.id()})])),function(){return dH.ReturnFrom(r.ofAsync((new dj.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCode:-623788033",[b_.srcDir(),{$:0,$0:dF}])));});})));r.iterResultA((dI=function(dJ){return function(dK){return dJ("Error:\n"+cw.p$1(dK));};}(a.id),function(dJ){return dE(dI(dJ));}),a.ignore,dG);}))(dD);};cs.processMessage=function(dD){var dE;return cG.Return(b$.runReaderResult((dE=n.fusion(),dE.Run(dE.Delay(function(){var dF,dG,dH,dI,dJ,dK,dL,dM,dN;function dO(dP){b$.setProperty(dP,dM,dN);return"Ok";}switch(dD.$==1?(dF=dD.$0,1):dD.$==2?(dF=dD.$0,2):dD.$==3?(dF=dD.$0,3):dD.$==4?(dG=dD.$0,!cK.Equals(dG,null)&&dG.length===2?cE.get(dD.$0,0)==="AddOutput"?(dF=cE.get(dD.$0,1),4):cE.get(dD.$0,0)==="ExecJS"?(dF=cE.get(dD.$0,1),5):(dF=[cE.get(dD.$0,0),cE.get(dD.$0,1)],8):(dH=dD.$0,!cK.Equals(dH,null)&&dH.length===4?cE.get(dD.$0,0)==="SetProperty"?(dF=[cE.get(dD.$0,1),cE.get(dD.$0,2),cE.get(dD.$0,3)],6):11:(dI=dD.$0,!cK.Equals(dI,null)&&dI.length===1?(dF=cE.get(dD.$0,0),7):(dJ=dD.$0,!cK.Equals(dJ,null)&&dJ.length===3?(dF=[cE.get(dD.$0,0),cE.get(dD.$0,1),cE.get(dD.$0,2)],9):11)))):dD.$==5?10:0){case 0:return dE.Return({$:0,$0:b_.id()});case 1:return dE.Bind(n.traverseSeq(R.snippetFromRefORm,dF),function(dP){return dE.Return({$:1,$0:cE.ofSeq(cD.choose(a.id,dP))});});case 2:b$.clearPredsCache();return dE.Bind(n.absorbO(function(){return new d({$:1,$0:(function(dP){return function(dQ){return dP("Snippet not found "+cw.p$2(dQ));};}(a.id))(dF)});},R.snippetFromRefORm(dF)),function(dP){return dE.ReturnFrom(o.op_BarGreaterGreater(o.op_BarGreaterGreater(R.fastCodeRm({$:1,$0:dP.snpId},{$:1,$0:dP.snpId}),function(dQ){return dQ[0];}),function(dQ){return{$:0,$0:dQ};}));});case 3:b$.clearPredsCache();return dE.Return(S.Hole.TODO_GetPredecessors);case 4:b_.appendMsgs(dF);return dE.Return({$:0,$0:"Ok"});case 5:dK=self["eval"].apply(self,[dF]);dK===null?void 0:void 0;return dE.Return({$:0,$0:"Ok"});case 6:dL=dF[0];dM=dF[1];dN=dF[2];return dE.Bind(n.absorbO(function(){return new d({$:1,$0:(function(dP){return function(dQ){return dP("Snippet not found: "+cB.toSafe(dQ));};}(a.id))(dL)});},o.op_BarGreaterGreater(R.snippetFromRefORm({$:1,$0:cC.SplitChars(dL,["/"],0)}),function(dP){return dP==null?null:{$:1,$0:dO(dP.$0)};})),function(dP){return dE.Return({$:0,$0:dP});});case 7:return dE.ReturnFrom(cs.actionCall(dF,null,null));case 8:return dE.ReturnFrom(cs.actionCall(dF[0],dF[1],null));case 9:return dE.ReturnFrom(cs.actionCall(dF[0],dF[1],dF[2]));case 10:return dE.Return({$:0,$0:self.document.baseURI});case 11:return dE.Return(S.Hole[(function(dP){return function(dQ){return dP("TODO message: "+cw.p$3(dQ));};}(a.id))(dD)]);}})))));};cs.actionCall=function(dD,dE,dF){var dG;dG=n.fusion();return dG.Run(dG.Delay(function(){var dH,dI;dH=(dI=(dt.splitName(cr.FStationLyt()))(dD),dt.tryGetAct(dI[0],dI[1]));return dH!=null&&dH.$==1?(dt.callFunction(dE,dF,dH.$0.actFunction),dG.Return({$:0,$0:"Ok"})):dG.ReturnFrom(n.ofResultRM(c.Error(new d({$:1,$0:(function(dJ){return function(dK){return dJ("Action "+cB.toSafe(dK)+" not found");};}(a.id))(dD)}))));}));};cs.wsStationClient=function(){ct.$cctor();return ct.wsStationClient;};ct.$cctor=function(){var dE,dI,dJ,dO,dP,dQ,dU,dV,dZ,d0,d4,d5,d6,d7,d9,d_,eb,ec,ef,ei,ej,el,em,en,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV;ct.$cctor=a.ignore;ct.rtn=function(eW){return[eW];};ct.result=new l.New();ct.result$1=k.result();ct.fusion=new q.New();ct.fusion$1=new u.New();ct.asyncResult=new w.New();ct.asyncResultP=new x.New();function dD(eW){return cC.concat("\n",eW);}ct.unindentStr=function(eW){return dD(z.unindent$1(eW));};function dF(eW){return z.splitByChar$1("\n",eW);}function dG(eW){var eX,eY;return cL.array(eW,{$:1,$0:0},{$:1,$0:(eX=0,(eY=cE.length(eW)-2,cK.Compare(eX,eY)===1?eX:eY))});}function dH(eW){return cC.concat("\n",eW);}ct.skipLastLine=(dE=function(eW){return dG(dF(eW));},function(eW){return dH(dE(eW));});ct.parseDateO=A.tryParseWith$1(function(eW){var eX,eY;eX=0;return[(eY=dy.TryParse(eW),eY!=null&&eY.$==1&&(eX=eY.$0,true)),eX];});ct.parseIntO=A.tryParseWith$1(function(eW){var eX;eX=0;return[dz.TryParseInt32(eW,{get:function(){return eX;},set:function(eY){eX=eY;}}),eX];});ct.parseSingleO=A.tryParseWith$1(function(eW){var eX,eY;eX=0;return[(eY=a.Number(eW),a.isNaN(eY)?false:(eX=eY,true)),eX];});ct.parseDoubleO=A.tryParseWith$1(function(eW){var eX,eY;eX=0;return[(eY=a.Number(eW),a.isNaN(eY)?false:(eX=eY,true)),eX];});ct.parseGuidO=A.tryParseWith$1(function(eW){var eX;eX=null;return[cP.TryParse(eW,{get:function(){return eX;},set:function(eY){eX=eY;}}),eX];});ct["|Date|_|"]=A.parseDateO$1();ct["|Int|_|"]=A.parseIntO$1();ct["|Single|_|"]=A.parseSingleO$1();ct["|Double|_|"]=A.parseDoubleO$1();ct["|Guid|_|"]=A.parseGuidO$1();dJ=(dI=1,[function(){dI=dI+1;return dI;},function(eW){dI=eW;}]);ct.setGeneration=dJ[1];ct.getNextGeneration=dJ[0];ct.defaultSnippet=P.New(new O({$:0,$0:"00000000-0000-0000-0000-000000000000"}),"","",null,new cR.New$1(null),[],0);ct.tieFighter="|"+"-"+"|";ct.deserGuid=function(eW){return Y.ifUndef("00000000-0000-0000-0000-000000000000",eW);};function dK(eW){return Y.ifUndef(0,eW);}ct.serFloat=[function(eW){return(function(eX){return function(eY){return eX(cB.prettyPrint(eY));};}(a.id))(eW);},function(eW){return dK(a.id(eW));}];function dL(eW){return Y.ifUndef(0,eW);}ct.serInt=[function(eW){return(function(eX){return function(eY){return eX(cB.prettyPrint(eY));};}(a.id))(eW);},function(eW){return dL(a.id(eW));}];function dM(eW){return Y.ifUndef(false,eW);}ct.serBool=[function(eW){return(function(eX){return function(eY){return eX(cB.prettyPrint(eY));};}(a.id))(eW);},function(eW){return dM(a.id(eW));}];function dN(eW){return Y.ifUndef("",eW);}ct.serString=[function(eW){return c_.stringify(((db.Id())())(eW));},function(eW){return dN(a.id(eW));}];ct.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";ct.observers=cF.T.Empty;ct.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";ct.init=dw.Create(function(){var eW,eX,eY;eW=new _6.New$1();eX="wcomp-tabstrip";eY=self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New;cU.log("defineWebComponent: "+eX);c8.setPrototypeOf(eY.prototype,self.HTMLElement.prototype);c8.setPrototypeOf(eY,self.HTMLElement);c8.setPrototypeOf(_6.Constructor$1.prototype,eY.prototype);self.customElements.define(eX,_6.Constructor$1);});ct.layoutHorizontal=cA.Curried(function(eW,eX,eY,eZ,e0){return c1.get_Empty();},5);ct.layoutVertical=cA.Curried(function(eW,eX,eY,eZ,e0){return c1.get_Empty();},5);ct.loader=(dO=null,cG.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cG.Bind(cG.FromContinuations(function(eW,eX){return self.require(["vs/editor/editor.main"],eW,eX);}),function(){return cG.Return(null);});}));ct.MessageBrokerId="<MessageBroker>";ct.MessageBrokerAddress=new bo({$:0,$0:bn.MessageBrokerId()});ct.id="FSharpStation"+a.String(du.now());ct.rootDir=".";ct.srcDir=".";cG.Start((dP=null,cG.Delay(function(){return cG.Bind((new dj.New()).Async("FSharpStation:FsRoot.FSharpStation+FStation.getRootDir:-447555547",[]),function(eW){b_.set_rootDir(eW+"/"+"..");b_.set_srcDir(eW+"/"+"..\\src");(((cA.Curried3(function(eX,eY,eZ){return eX("fileName = "+cB.toSafe(eY)+"\\"+cB.toSafe(eZ)+".fsx");}))(function(eX){cU.log(eX);}))(b_.srcDir()))(b_.id());return cG.Zero();});})),null);ct.annotationsV=cX.Create$1("");ct.outputMsgs=cX.Create$1("");ct.snippets=new dA.New$1(function(eW){return eW.snpId;});ct.hierarchy=cX.Create$1([]);ct.generation=cX.Create$1(5);ct.currentSnippetIdOV=cX.Create$1(null);ct.codeSnippetIdOV=cX.Create$1(null);ct.collapsedV=cX.Create$1(new cR.New$1(null));function dR(eW){var eX;eX=null;return dQ.TryGetValue(eW,{get:function(){return eX;},set:function(eY){eX=eY;}})?{$:1,$0:eX}:null;}function dS(eW,eX){dQ.set_Item(eW,eX);return eX;}function dT(eW,eX){var eY;eY=dR(eW);return eY==null?dS(eW,eX(eW)):eY.$0;}dU=(dQ=new dB.New$5(),[[dR,function(eW){return function(eX){return dT(eW,eX);};}],function(){dQ.Clear();}]);ct.predsCache=dU[0];ct.clearPreds=dU[1];function dW(eW){var eX;eX=null;return dV.TryGetValue(eW,{get:function(){return eX;},set:function(eY){eX=eY;}})?{$:1,$0:eX}:null;}function dX(eW,eX){dV.set_Item(eW,eX);return eX;}function dY(eW,eX){var eY;eY=dW(eW);return eY==null?dX(eW,eX(eW)):eY.$0;}dZ=(dV=new dB.New$5(),[[dW,function(eW){return function(eX){return dY(eW,eX);};}],function(){dV.Clear();}]);ct.reducCache=dZ[0];ct.clearReduc=dZ[1];function d1(eW){var eX;eX=null;return d0.TryGetValue(eW,{get:function(){return eX;},set:function(eY){eX=eY;}})?{$:1,$0:eX}:null;}function d2(eW,eX){d0.set_Item(eW,eX);return eX;}function d3(eW,eX){var eY;eY=d1(eW);return eY==null?d2(eW,eX(eW)):eY.$0;}d4=(d0=new dB.New$5(),[[d1,function(eW){return function(eX){return d3(eW,eX);};}],function(){d0.Clear();}]);ct.parentCache=d4[0];ct.clearParent=d4[1];ct.getParentIdO=(d5=(b$.parentCache())[1],function(eW){return(d5(eW))(b$.getParentIdONotMemo);});cW.Sink(function(eW){var eX,eY;if(eW!=null&&eW.$==1){eX=eW.$0;eY=b$.codeSnippetIdOV().Get();eY!=null&&eY.$==1?(b$.iterReader(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_BarGreaterGreater(o.op_GreaterGreaterEquals(o.op_BarGreaterGreater(R.snippetORm(eY.$0),function(eZ){return eZ==null?null:{$:1,$0:R.uniquePredsRm(eZ.$0)};}),n.insertO),cS.toList),function(eZ){return cF.collect(a.id,eZ);}),function(eZ){return cF.contains(eX,eZ);}),function(eZ){if(eZ);else b$.codeSnippetIdOV().Set({$:1,$0:eX});})),b$.clearPredsCache()):b$.codeSnippetIdOV().Set({$:1,$0:eX});}},b$.currentSnippetIdOV().get_View());function d8(eW){return eW.id();}cW.Sink(function(eW){var eX;b$.clearPredsCache();eX=cE.ofSeq(cD.delay(function(){return cD.collect(function(eY){return cD.append([b$.snippets().FindByKey(eY)],cD.delay(function(){return cD.filter(function(eZ){return b$.isDescendantOf(eY,eZ.snpId);},(b$.snippets())["var"].Get());}));},eW);}));b$.snippets().Set(eX);},(d6=cW.Map(function(eW){return cE.map(d8,eW);},b$.hierarchy().get_View()),(d7=[cX.Create$1(null)],(cW.Sink(function(eW){if(!cK.Equals(d7[0].Get(),eW))d7[0].Set(eW);},d6),d7[0].get_View()))));ct.CurrentSnippetIdW=cW.Map(function(eW){var eX;eX=R.defaultSnippet().snpId;return eW==null?eX:eW.$0;},b$.currentSnippetIdOV().get_View());function d$(eW){var eX;eX=R.defaultSnippet();return eW==null?eX:eW.$0;}function ea(eW){return b$.snippets().TryFindByKeyAsView(eW);}ct.currentSnippetW=cW.Map((d9=function(eW){return eW==null?null:a.id(eW.$0);},function(eW){return d$(d9(eW));}),cW.Bind((d_=function(eW){return eW==null?null:{$:1,$0:ea(eW.$0)};},function(eW){return X.insertWO(d_(eW));}),b$.currentSnippetIdOV().get_View()));function ed(eW){var eX;eX=R.defaultSnippet();return eW==null?eX:eW.$0;}function ee(eW){return b$.snippets().TryFindByKeyAsView(eW);}ct.codeSnippetW=cW.Map((eb=function(eW){return eW==null?null:a.id(eW.$0);},function(eW){return ed(eb(eW));}),cW.Bind((ec=function(eW){return eW==null?null:{$:1,$0:ee(eW.$0)};},function(eW){return X.insertWO(ec(eW));}),b$.codeSnippetIdOV().get_View()));ct.currentSnippetV=new dk.New(b$.currentSnippetW(),function(eW){b$.setSnippet(eW);});function eg(eW,eX){return[eW.id(),eX];}function eh(eW){function eX(eZ){return T.listNodes(0,eZ);}function eY(eZ){return b$.runReader(b$.handleError,eZ);}return function(eZ){return eY(eX(eZ));};}ct.getHierarchyW=cW.Map(cE.ofSeq,cW.Map(function(eW){return cD.map(function(eX){return eg(eX[0],eX[1]);},eW);},(ef=b$.hierarchy().get_View(),cW.Map2(function(eW,eX){return(eh(eW))(eX);},b$.collapsedV().get_View(),ef))));function ek(eW,eX){var eY;eY=null;return cG.Delay(function(){return cG.Bind(cG.Sleep(350),function(){return cG.Return(b$.runReader(b$.handleError,R.fastCodeRm(b$.currentSnippetIdOV().Get(),b$.codeSnippetIdOV().Get())));});});}ct.codeAndStartsW=(ei=b$.codeSnippetW(),(ej=b$.snippets().v,(((cA.Curried3(cW.MapAsync2))(ek))(ei))(ej)));ct.FsCodeW=cW.Map(function(eW){return eW[0];},b$.codeAndStartsW());ct.codeStartsW=cW.Map(function(eW){return eW[1];},b$.codeAndStartsW());ct.SaveAsClassW=cW.Map2(function(eW,eX){return cD.exists(function(eY){return eY.snpGeneration>eX;},eW)?"btn-primary":"";},b$.snippets().v,b$.generation().get_View());ct.currentPathW=cW.Map(function(eW){var eX;return b$.runReader(function(){return"";},(eX=n.fusion(),eX.Run(eX.Delay(function(){return eX.Bind(R.pathRm(eW.snpId),function(eY){return eX.Bind(n.traverseSeq(R.snippetNameRm,new cF.T({$:1,$0:eW.snpId,$1:eY})),function(eZ){return eX.Return(cC.concat("/",cD.rev(eZ)));});});}))));},b$.currentSnippetW());ct.currentLayoutDW=cW.Map(function(eW){var eX;return b$.runReader(function(){return null;},(eX=n.fusion(),eX.Run(eX.Delay(function(){function eY(eZ,e0){var e1;e1=cD.mapi(function(e2,e3){return(((cA.Curried3(function(e4,e5,e6){return e4("btn"+a.String(e5)+" button \"click=${FSharpStation.ButtonClick}\" "+cB.prettyPrint(e6));}))(a.id))(e2))(e3);},cD.filter(function(e2){return cC.Trim(e2)!=="";},cC.SplitChars(cC.Trim(e0[0]),["\n"],0)));return["Snp_"+cC.Replace(a.String(eZ.snpId.get_Id()),"-",""),cC.concat("\n",cF.ofSeq(cD.delay(function(){return cD.append(["editorButtons vertical 0-85-100 FStationLyt.menuEditor buttons"],cD.delay(function(){return cD.append(e1,cD.delay(function(){var e2,e3;return[(e2=cC.concat(" ",(e3=cF.ofSeq(cJ.range(0,cD.length(e1)-1)),cD.map(function(e4){return function(e5){return e4("btn"+a.String(e5));};}(a.id),e3))),(function(e4){return function(e5){return e4("buttons div \"\" "+cB.toSafe(e5)+" ");};}(a.id))(e2))];}));}));})))];}return eX.Bind(o.op_BarGreaterGreater(R.propertyHierORm("Buttons",eW),function(eZ){var e0;return eZ==null?null:{$:1,$0:(e0=eZ.$0,eY(e0[0],e0[1]))};}),function(eZ){function e0(e2,e3){var e4,e5,e6;e4=e3[0];return["Snp_"+cC.Replace(a.String(e2.snpId.get_Id()),"-",""),(e5=eZ==null?null:{$:1,$0:(e6=eZ.$0,(e6[0],cC.concat("\n",cF.ofArray([e4,e6[1]]))))},e5==null?e4:e5.$0)];}function e1(){return eZ;}return eX.ReturnFrom(o.op_BarGreaterGreater(o.op_BarGreaterGreater(R.propertyHierORm("Layout",eW),function(e2){var e3;return e2==null?null:{$:1,$0:(e3=e2.$0,e0(e3[0],e3[1]))};}),function(e2){return g.bindNone(e1,e2);}));});}))));},b$.currentSnippetW());ct.currentLayoutJSDW=cW.Map(function(eW){function eX(eY,eZ){return[eY.snpId,eZ[0]];}return b$.runReader(function(){return null;},o.op_BarGreaterGreater(R.propertyHierORm("LayoutJS",eW),function(eY){var eZ;return eY==null?null:{$:1,$0:(eZ=eY.$0,eX(eZ[0],eZ[1]))};}));},b$.currentSnippetW());ct.drag=cb.DragNone;ct.rootdir="..\\website";ct.TemplatesFileName="..\\website"+"\\Templates.html";((function(eW){return function(eX){return eW(cB.toSafe(eX));};}(function(eW){cU.log(eW);}))("..\\website\\Templates.html"));ct.startsV=cX.Create$1([]);ct.defaultStart=(el=[[O.get_Empty(),""],[0,1,0]],function(eW){return eW==null?el:eW.$0;});ct.fileName="none.fsx";ct.editorConfigO=null;cW.Sink(function(eW){var eX,eY;try{eX=(eY=cf.editorConfigO(),eY==null?null:eY.$0.editorO);(g.iter(function(eZ){eZ.setModel(cf.getSnippetModel(eW));b_.annotationsV().Set(b_.annotationsV().Get());}))(eX);}catch(eZ){null;}},b$.CurrentSnippetIdW());ct.rexGuid$1="\\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";function eo(eW){return eW.$0;}function ep(eW){return new O({$:0,$0:eW});}ct.serSnippetId=(em=cE.head(cC.SplitChars((function(eW){return function(eX){return eW(cw.p(eX));};}(a.id))(ep("00000000-0000-0000-0000-000000000000")),[" "],0)),(en=(function(eW){return function(eX){return eW(cB.prettyPrint(eX));};}(a.id))(em),[function(eW){var eX;eX=eo(eW);return(((cA.Curried3(function(eY,eZ,e0){return eY("{"+cC.PadLeft(cB.toSafe(eZ),10)+" :"+cB.prettyPrint(e0)+"}");}))(a.id))(en))(eX);},function(eW){var eX;return ep((eX=eW[em],(Y.deserGuid())(eX)));}]));ct.serSnippet=(eq=[(er=cn.serSnippetId(),Y.serField("snpId",function(eW){return eW.snpId;},function(eW,eX){return P.New(eW,eX.snpName,eX.snpContent,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},er[0],er[1])),(es=Y.serString(),Y.serField("snpName",function(eW){return eW.snpName;},function(eW,eX){return P.New(eX.snpId,eW,eX.snpContent,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},es[0],es[1])),(et=Y.serString(),Y.serField("snpContent",function(eW){return eW.snpContent;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eW,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},et[0],et[1])),(eu=(ev=cn.serSnippetId(),Y.serOpt(ev[0],ev[1])),Y.serField("snpParentIdO",function(eW){return eW.snpParentIdO;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eX.snpContent,eW,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},eu[0],eu[1])),(ew=(ex=cn.serSnippetId(),Y.serSet(ex[0],ex[1])),Y.serField("snpPredIds",function(eW){return eW.snpPredIds;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eX.snpContent,eX.snpParentIdO,eW,eX.snpProperties,eX.snpGeneration);},ew[0],ew[1])),(ey=(ez=(eA=Y.serString(),Y.serDup((Y.serString())[0],(Y.serString())[1],eA[0],eA[1])),Y.serArr(ez[0],ez[1])),Y.serField("snpProperties",function(eW){return eW.snpProperties;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eX.snpContent,eX.snpParentIdO,eX.snpPredIds,eW,eX.snpGeneration);},ey[0],ey[1])),(eB=Y.serInt(),Y.serField("snpGeneration",function(eW){return eW.snpGeneration;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eX.snpContent,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eW);},eB[0],eB[1]))],(eC=R.New("","",null),[function(eW){var eX;function eY(eZ,e0,e1){return(((cA.Curried3(function(e2,e3,e4){return e2(cB.prettyPrint(e3)+": "+cB.toSafe(e4));}))(a.id))(eZ))(e0(eW));}eX=cC.concat(", ",cD.map(function(eZ){return eY(eZ[0],eZ[1],eZ[2]);},eq));return(function(eZ){return function(e0){return eZ("{"+cB.toSafe(e0)+"}");};}(a.id))(eX);},function(eW){return!eW?eC:cD.fold(function(eX,eY){return(eY[2](eX))(eW[eY[0]]);},eC,eq);}]));ct.serModel=(eD=[(eE=(eF=cn.serSnippet(),Y.serArr(eF[0],eF[1])),Y.serField("snippets",function(eW){return eW.snippets;},function(eW,eX){return co.New(eW,eX.generation,eX.collapsed);},eE[0],eE[1])),(eG=Y.serInt(),Y.serField("generation",function(eW){return eW.generation;},function(eW,eX){return co.New(eX.snippets,eW,eX.collapsed);},eG[0],eG[1])),(eH=(eI=cn.serSnippetId(),Y.serSet(eI[0],eI[1])),Y.serField("collapsed",function(eW){return eW.collapsed;},function(eW,eX){return co.New(eX.snippets,eX.generation,eW);},eH[0],eH[1]))],(eJ=co.New([],0,new cR.New$1(null)),[function(eW){var eX;function eY(eZ,e0,e1){return(((cA.Curried3(function(e2,e3,e4){return e2(cB.prettyPrint(e3)+": "+cB.toSafe(e4));}))(a.id))(eZ))(e0(eW));}eX=cC.concat(", ",cD.map(function(eZ){return eY(eZ[0],eZ[1],eZ[2]);},eD));return(function(eZ){return function(e0){return eZ("{"+cB.toSafe(e0)+"}");};}(a.id))(eX);},function(eW){return!eW?eJ:cD.fold(function(eX,eY){return(eY[2](eX))(eW[eY[0]]);},eJ,eD);}]));ct.fileName$1=cX.Create$1("");ct.serSnippetId2=[function(eW){return(function(eX){return function(eY){return eX(cB.prettyPrint(eY));};}(a.id))(eW);},function(eW){var eX;return new O({$:0,$0:(eX=eW.Item,(Y.deserGuid())(eX))});}];ct.serSnippet2=(eK=[(eL=cq.serSnippetId2(),Y.serField("id",function(eW){return eW.snpId;},function(eW,eX){return P.New(cK.Equals(eW,O.get_Empty())?new O({$:0,$0:cP.NewGuid()}):eW,eX.snpName,eX.snpContent,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},eL[0],eL[1])),(eM=Y.serString(),Y.serField("name",function(eW){return eW.snpName;},function(eW,eX){return P.New(eX.snpId,eW,eX.snpContent,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},eM[0],eM[1])),(eN=Y.serString(),Y.serField("content",function(eW){return eW.snpContent;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eW,eX.snpParentIdO,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},eN[0],eN[1])),(eO=(eP=cq.serSnippetId2(),Y.serOpt(eP[0],eP[1])),Y.serField("parent",function(eW){return eW.snpParentIdO;},function(eW,eX){return P.New(eX.snpId,eX.snpName,eX.snpContent,cK.Equals(eW,{$:1,$0:O.get_Empty()})?null:eW,eX.snpPredIds,eX.snpProperties,eX.snpGeneration);},eO[0],eO[1])),(eQ=(eR=cq.serSnippetId2(),Y.serArr(eR[0],eR[1])),Y.serField("predecessors",function(eW){return cE.ofSeq(eW.snpPredIds);},function(eW,eX){return P.New(eX.snpId,eX.snpName,eX.snpContent,eX.snpParentIdO,new cR.New(eW),eX.snpProperties,eX.snpGeneration);},eQ[0],eQ[1]))],(eS=R.New("","",null),[function(eW){var eX;function eY(eZ,e0,e1){return(((cA.Curried3(function(e2,e3,e4){return e2(cB.prettyPrint(e3)+": "+cB.toSafe(e4));}))(a.id))(eZ))(e0(eW));}eX=cC.concat(", ",cD.map(function(eZ){return eY(eZ[0],eZ[1],eZ[2]);},eK));return(function(eZ){return function(e0){return eZ("{"+cB.toSafe(e0)+"}");};}(a.id))(eX);},function(eW){return!eW?eS:cD.fold(function(eX,eY){return(eY[2](eX))(eW[eY[0]]);},eS,eK);}]));ct.serSnippets=(eT=cq.serSnippet2(),Y.serArr(eT[0],eT[1]));ct.FStationLyt="FStationLyt";eU=b$.codeAndStartsW();cW.Sink(c.delayed(300,function(eW){cf.parse(eW[0],eW[1]);}),eU);cW.Sink(function(eW){self.onbeforeunload=eW!==""?function(eX){eX.returnValue="Changes you made may not be saved.";}:null;},b$.SaveAsClassW());ct.wsStationClient=new bz.New(b_.id(),null,null);cG.Start((eV=null,cG.Delay(function(){return cG.Bind(cG.Sleep(1000),function(){return cG.While(function(){return true;},cG.Delay(function(){return cG.TryWith(cG.Delay(function(){var eW,eX,eY,eZ,e0,e1;function e2(e6){return(cv.j$4())(c_.parse(e6));}function e3(e6){return c_.stringify((cu.j$4())(e6));}function e4(e6){return cG.Return(e6);}function e5(e6){cJ.FailWith(e6);}eW=cs.wsStationClient();eW.payloadProcessorO={$:1,$0:(eX=function(e6){return cs.processMessage(e2(e6));},(eY=(eZ=function(e6){return e4(e3(e6));},function(e6){return cG.Bind(e6,eZ);}),function(e6){return eY(eX(e6));}))};v.iterA(function(e6){return e5(a.String(e6));},a.ignore,eW.sendAndForget(bn.msgType(bq.MsgInformation,(e0=bn.MessageBrokerAddress(),(e1=c_.stringify(((db.Id())())("Registering Processor")),bt.New(new bo({$:0,$0:""}),e0,bq.MsgRequest,"",cP.NewGuid(),e1,bs.NoReply))))));return cG.Bind(cG.Sleep(60000),function(){return cG.Return(null);});}),function(eW){((function(eX){return function(eY){return eX(cB.toSafe(eY));};}(function(eX){cU.log(eX);}))(eW.message));return cG.Bind(cG.Sleep(1000),function(){return cG.Return(null);});});}));});})),null);};cu.j$4=function(){return cu._v$4?cu._v$4:cu._v$4=(db.EncodeUnion(void 0,"$",[[0,[["$0","ResultValue",cu.j$6,0]]],[1,[["$0","ErrorValue",cu.j$5,0]]]]))();};cv.j$5=function(){return cv._v$5?cv._v$5:cv._v$5=(db.DecodeUnion(void 0,"$",[[0,[["$0","Item",cv.j$6,0]]],[1,[["$0","Item",db.DecodeArray(db.Id()),0]]]]))();};cv.j$4=function(){return cv._v$4?cv._v$4:cv._v$4=(db.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",db.DecodeArray(cv.j$5),0]]],[2,[["$0","Item",cv.j$5,0]]],[3,[["$0","Item",cv.j$5,0]]],[4,[["$0","Item",db.DecodeArray(db.Id()),0]]],[5,[]]]))();};cv.j$6=function(){return cv._v$6?cv._v$6:cv._v$6=(db.DecodeUnion(O,"$",[[0,[["$0","Item",db.Id(),0]]]]))();};cw.p=function(dD){return"SnippetId "+cB.prettyPrint(dD.$0);};cu.j$5=function(){return cu._v$5?cu._v$5:cu._v$5=(db.EncodeUnion(d,"$",[[0,[]],[1,[["$0","Item",db.Id(),0]]],[2,[["$0","Item",db.Id(),0]]],[3,[["$0","Item",db.Id(),0]]],[4,[["$0","Item",db.Id(),0]]],[5,[["$0","Item1",db.Id(),0],["$1","Item2",db.Id(),0]]],[6,[["$0","Item",db.EncodeArray(cu.j$5),0]]]]))();};cu.j$6=function(){return cu._v$6?cu._v$6:cu._v$6=(db.EncodeUnion(void 0,"$",[[0,[["$0","Item",db.Id(),0]]],[1,[["$0","Item",db.EncodeArray(cu.j$7),0]]]]))();};cu.j$7=function(){return cu._v$7?cu._v$7:cu._v$7=(db.EncodeRecord(void 0,[["snpId",cu.j$8,0],["snpName",db.Id(),0],["snpContent",db.Id(),0],["snpParentIdO",cu.j$8,1],["snpPredIds",db.EncodeSet(cu.j$8),0],["snpProperties",db.EncodeArray(db.EncodeTuple([db.Id(),db.Id()])),0],["snpGeneration",db.Id(),0]]))();};cu.j$8=function(){return cu._v$8?cu._v$8:cu._v$8=(db.EncodeUnion(O,"$",[[0,[["$0","Item",db.Id(),0]]]]))();};cx.snippetlist=function(dD){c6.LoadLocalTemplates("templates");return dD?c6.NamedTemplate("templates",{$:1,$0:"snippetlist"},dD):void 0;};cx.snippet=function(dD){c6.LoadLocalTemplates("templates");return dD?c6.NamedTemplate("templates",{$:1,$0:"snippet"},dD):void 0;};cx.propertytable=function(dD){c6.LoadLocalTemplates("templates");return dD?c6.NamedTemplate("templates",{$:1,$0:"propertytable"},dD):void 0;};cx.property=function(dD){c6.LoadLocalTemplates("templates");return dD?c6.NamedTemplate("templates",{$:1,$0:"property"},dD):void 0;};cx.layout=function(dD){dC.fixedsplitterhor();dC.fixedsplitterver();c6.LoadLocalTemplates("templates");return dD?c6.NamedTemplate("templates",{$:1,$0:"layout"},dD):void 0;};cx.buttonsright=function(dD){c6.LoadLocalTemplates("templates");return dD?c6.NamedTemplate("templates",{$:1,$0:"buttonsright"},dD):void 0;};cw.p$1=function(dD){return dD.$==6?"RMessages "+cB.printArray(function(dE){return cw.p$1(dE);},dD.$0):dD.$==5?"ExceptMsg ("+cB.prettyPrint(dD.$0)+", "+cB.prettyPrint(dD.$1)+")":dD.$==4?"Message "+cB.prettyPrint(dD.$0):dD.$==3?"Info "+cB.prettyPrint(dD.$0):dD.$==2?"Warning "+cB.prettyPrint(dD.$0):dD.$==1?"ErrorMsg "+cB.prettyPrint(dD.$0):"NoMsg";};cw.p$2=function(dD){return dD.$==1?"RefSnippetPath "+cB.printArray(cB.prettyPrint,dD.$0):"RefSnippetId "+cw.p(dD.$0);};cw.p$3=function(dD){return dD.$==5?"MsgGetUrl":dD.$==4?"MsgAction "+cB.printArray(cB.prettyPrint,dD.$0):dD.$==3?"MsgGetPredecessors "+cw.p$2(dD.$0):dD.$==2?"MsgGetCode "+cw.p$2(dD.$0):dD.$==1?"MsgGetSnippets "+cB.printArray(function(dE){return cw.p$2(dE);},dD.$0):"MsgGetId";};cu.j$9=function(){return cu._v$9?cu._v$9:cu._v$9=(db.EncodeUnion(void 0,"type",[["BRGetConnections",[]],["BRGetProcessId",[]]]))();};cw.p$4=function(dD){return dD.$==2?"BRString "+cB.prettyPrint(dD.$0):dD.$==1?"BRPid "+cB.prettyPrint(dD.$0):"BRConnections "+cB.printArray(cB.prettyPrint,dD.$0);};cv.j$7=function(){return cv._v$7?cv._v$7:cv._v$7=(db.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",db.DecodeArray(db.Id()),0]]],["BRPid",[["$0","Item",db.Id(),0]]],["BRString",[["$0","Item",db.Id(),0]]]]))();};cv.j$8=function(){return cv._v$8?cv._v$8:cv._v$8=(db.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",cv.j$1,0]]],["BMWebSocketError",[["$0","Item",db.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",cv.j$2,0]]],["BMUnexpectedResponse",[["$0","Item",db.Id(),0]]]]))();};cw.p$7=function(dD){return dD.$==2?"Receiver":dD.$==1?"Broker":"NoReply";};cw.p$6=function(dD){return dD.$==5?"MsgRequestForEcho":dD.$==4?"MsgRequestForId":dD.$==3?"MsgFromBroker":dD.$==2?"MsgReply":dD.$==1?"MsgRequest":"MsgInformation";};cy.p=function(dD){return"{"+("from = "+cw.p$5(dD.from))+"; "+("destination = "+cw.p$5(dD.destination))+"; "+("msgType = "+cw.p$6(dD.msgType))+"; "+("subtype = "+cB.prettyPrint(dD.subtype))+"; "+("id = "+cB.prettyPrint(dD.id))+"; "+("payload = "+cB.prettyPrint(dD.payload))+"; "+("replier = "+cw.p$7(dD.replier))+"}";};cw.p$5=function(dD){return"Address "+cB.prettyPrint(dD.$0);};cw.p$8=function(dD){return dD.$==3?"Close":dD.$==2?"Open":dD.$==1?"Error":"Message "+cy.p(dD.$0);};cw.p$9=function(dD){return dD.$==6?"RMessages "+cB.printArray(function(dE){return cw.p$9(dE);},dD.$0):dD.$==5?"ExceptMsg ("+cB.prettyPrint(dD.$0)+", "+cB.prettyPrint(dD.$1)+")":dD.$==4?"Message "+cB.printArray(function(dE){return cw.p$10(dE);},dD.$0):dD.$==3?"Info "+cB.prettyPrint(dD.$0):dD.$==2?"Warning "+cB.prettyPrint(dD.$0):dD.$==1?"ErrorMsg "+cB.prettyPrint(dD.$0):"NoMsg";};cw.p$10=function(dD){return dD.$==17?"KMultiple "+cB.printArray(function(dE){return cw.p$10(dE);},dD.$0):dD.$==16?"KUnionCase "+cy.p$22(dD.$0):dD.$==15?"KNamespaces "+cy.p$19(dD.$0):dD.$==14?"KCompilerLocation "+cy.p$18(dD.$0):dD.$==13?"KSignatureData "+cy.p$16(dD.$0):dD.$==12?"KTypeSig "+cB.prettyPrint(dD.$0):dD.$==11?"KToolTip "+cB.printArray(function(dE){return cB.printArray(function(dF){return cy.p$3(dF);},dE);},dD.$0):dD.$==10?"KDeclarations "+cB.printArray(function(dE){return cy.p$14(dE);},dD.$0):dD.$==9?"KFindDecl "+cy.p$13(dD.$0):dD.$==8?"KColorizations "+cB.printList(function(dE){return cy.p$12(dE);},dD.$0):dD.$==7?"KErrors "+cy.p$10(dD.$0):dD.$==6?"KMethod "+cy.p$7(dD.$0):dD.$==5?"KHelp "+cB.prettyPrint(dD.$0):dD.$==4?"KSymbolUse "+cy.p$5(dD.$0):dD.$==3?"KCompletion "+cB.printArray(function(dE){return cy.p$4(dE);},dD.$0):dD.$==2?"KHelpText "+cy.p$2(dD.$0):dD.$==1?"KError "+cy.p$1(dD.$0):"KInfo "+cB.prettyPrint(dD.$0);};cy.p$22=function(dD){return"{"+("Text = "+cB.prettyPrint(dD.Text))+"}";};cy.p$21=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("Qualifier = "+cB.prettyPrint(dD.Qualifier))+"}";};cy.p$20=function(dD){return"{"+("Namespace = "+cB.prettyPrint(dD.Namespace))+"; "+("Name = "+cB.prettyPrint(dD.Name))+"; "+("Type = "+cB.prettyPrint(dD.Type))+"; "+("Line = "+cB.prettyPrint(dD.Line))+"; "+("Column = "+cB.prettyPrint(dD.Column))+"; "+("MultipleNames = "+cB.prettyPrint(dD.MultipleNames))+"}";};cy.p$18=function(dD){return"{"+("Fsc = "+cB.prettyPrint(dD.Fsc))+"; "+("Fsi = "+cB.prettyPrint(dD.Fsi))+"; "+("MSBuild = "+cB.prettyPrint(dD.MSBuild))+"}";};cy.p$16=function(dD){return"{"+("OutputType = "+cB.prettyPrint(dD.OutputType))+"; "+("Parameters = "+cB.printList(function(dE){return cB.printList(function(dF){return cy.p$17(dF);},dE);},dD.Parameters))+"}";};cy.p$19=function(dD){return"{"+("Opens = "+cB.printArray(function(dE){return cy.p$20(dE);},dD.Opens))+"; "+("Qualifies = "+cB.printArray(function(dE){return cy.p$21(dE);},dD.Qualifies))+"; "+("Word = "+cB.prettyPrint(dD.Word))+"}";};cy.p$17=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("Type = "+cB.prettyPrint(dD.Type))+"}";};cy.p$14=function(dD){return"{"+("Declaration = "+cy.p$15(dD.Declaration))+"; "+("Nested = "+cB.printArray(function(dE){return cy.p$15(dE);},dD.Nested))+"}";};cy.p$13=function(dD){return"{"+("File = "+cB.prettyPrint(dD.File))+"; "+("Line = "+cB.prettyPrint(dD.Line))+"; "+("Column = "+cB.prettyPrint(dD.Column))+"}";};cy.p$15=function(dD){return"{"+("UniqueName = "+cB.prettyPrint(dD.UniqueName))+"; "+("Name = "+cB.prettyPrint(dD.Name))+"; "+("Glyph = "+cB.prettyPrint(dD.Glyph))+"; "+("GlyphChar = "+cB.prettyPrint(dD.GlyphChar))+"; "+("IsTopLevel = "+cB.prettyPrint(dD.IsTopLevel))+"; "+("File = "+cB.prettyPrint(dD.File))+"; "+("EnclosingEntity = "+cB.prettyPrint(dD.EnclosingEntity))+"; "+("IsAbstract = "+cB.prettyPrint(dD.IsAbstract))+"}";};cy.p$12=function(dD){return"{"+("Kind = "+cB.prettyPrint(dD.Kind))+"}";};cy.p$10=function(dD){return"{"+("File = "+cB.prettyPrint(dD.File))+"; "+("Errors = "+cB.printArray(function(dE){return cy.p$11(dE);},dD.Errors))+"}";};cy.p$11=function(dD){return"{"+("FileName = "+cB.prettyPrint(dD.FileName))+"; "+("StartLine = "+cB.prettyPrint(dD.StartLine))+"; "+("EndLine = "+cB.prettyPrint(dD.EndLine))+"; "+("StartColumn = "+cB.prettyPrint(dD.StartColumn))+"; "+("EndColumn = "+cB.prettyPrint(dD.EndColumn))+"; "+("Severity = "+cB.prettyPrint(dD.Severity))+"; "+("Message = "+cB.prettyPrint(dD.Message))+"; "+("Subcategory = "+cB.prettyPrint(dD.Subcategory))+"}";};cy.p$7=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("CurrentParameter = "+cB.prettyPrint(dD.CurrentParameter))+"; "+("Overloads = "+cB.printList(function(dE){return cy.p$8(dE);},dD.Overloads))+"}";};cy.p$8=function(dD){return"{"+("Tip = "+cB.printList(function(dE){return cB.printList(function(dF){return cy.p$3(dF);},dE);},dD.Tip))+"; "+("TypeText = "+cB.prettyPrint(dD.TypeText))+"; "+("Parameters = "+cB.printList(function(dE){return cy.p$9(dE);},dD.Parameters))+"; "+("IsStaticArguments = "+cB.prettyPrint(dD.IsStaticArguments))+"}";};cy.p$9=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("CanonicalTypeTextForSorting = "+cB.prettyPrint(dD.CanonicalTypeTextForSorting))+"; "+("Display = "+cB.prettyPrint(dD.Display))+"; "+("Description = "+cB.prettyPrint(dD.Description))+"}";};cy.p$5=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("Uses = "+cB.printList(function(dE){return cy.p$6(dE);},dD.Uses))+"}";};cy.p$6=function(dD){return"{"+("FileName = "+cB.prettyPrint(dD.FileName))+"; "+("StartLine = "+cB.prettyPrint(dD.StartLine))+"; "+("StartColumn = "+cB.prettyPrint(dD.StartColumn))+"; "+("EndLine = "+cB.prettyPrint(dD.EndLine))+"; "+("EndColumn = "+cB.prettyPrint(dD.EndColumn))+"; "+("IsFromDefinition = "+cB.prettyPrint(dD.IsFromDefinition))+"; "+("IsFromAttribute = "+cB.prettyPrint(dD.IsFromAttribute))+"; "+("IsFromComputationExpression = "+cB.prettyPrint(dD.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+cB.prettyPrint(dD.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+cB.prettyPrint(dD.IsFromPattern))+"; "+("IsFromType = "+cB.prettyPrint(dD.IsFromType))+"}";};cy.p$4=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("ReplacementText = "+cB.prettyPrint(dD.ReplacementText))+"; "+("Glyph = "+cB.prettyPrint(dD.Glyph))+"; "+("GlyphChar = "+cB.prettyPrint(dD.GlyphChar))+"}";};cy.p$2=function(dD){return"{"+("Name = "+cB.prettyPrint(dD.Name))+"; "+("Overloads = "+cB.printList(function(dE){return cB.printList(function(dF){return cy.p$3(dF);},dE);},dD.Overloads))+"}";};cy.p$3=function(dD){return"{"+("Signature = "+cB.prettyPrint(dD.Signature))+"; "+("Comment = "+cB.prettyPrint(dD.Comment))+"; "+("Footer = "+cB.prettyPrint(dD.Footer))+"}";};cy.p$1=function(dD){return"{"+("Code = "+cB.prettyPrint(dD.Code))+"; "+("Message = "+cB.prettyPrint(dD.Message))+"}";};cu.j$1=function(){return cu._v$1?cu._v$1:cu._v$1=(db.EncodeUnion(bo,"$",[[0,[["$0","address",db.Id(),0]]]]))();};cu.j$2=function(){return cu._v$2?cu._v$2:cu._v$2=(db.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cu.j$3=function(){return cu._v$3?cu._v$3:cu._v$3=(db.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cu.j=function(){return cu._v?cu._v:cu._v=(db.EncodeRecord(void 0,[["from",cu.j$1,0],["destination",cu.j$1,0],["msgType",cu.j$2,0],["subtype",db.Id(),0],["id",db.Id(),0],["payload",db.Id(),0],["replier",cu.j$3,0]]))();};cv.j$1=function(){return cv._v$1?cv._v$1:cv._v$1=(db.DecodeUnion(bo,"$",[[0,[["$0","address",db.Id(),0]]]]))();};cv.j$2=function(){return cv._v$2?cv._v$2:cv._v$2=(db.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cv.j$3=function(){return cv._v$3?cv._v$3:cv._v$3=(db.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cv.j=function(){return cv._v?cv._v:cv._v=(db.DecodeRecord(void 0,[["from",cv.j$1,0],["destination",cv.j$1,0],["msgType",cv.j$2,0],["subtype",db.Id(),0],["id",db.Id(),0],["payload",db.Id(),0],["replier",cv.j$3,0]]))();};}());

//# sourceMappingURL=FSharpStation.min.map
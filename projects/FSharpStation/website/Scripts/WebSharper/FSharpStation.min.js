(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.ResultMessage=c.ResultMessage||{};e=c.ResultMessageHelpers=c.ResultMessageHelpers||{};f=c.Monads=c.Monads||{};g=f.Seq=f.Seq||{};h=f.Option=f.Option||{};i=f.Async=f.Async||{};j=a.WebSharper;k=j&&j.Obj;l=f.Result=f.Result||{};m=l.Builder=l.Builder||{};n=l.Operators=l.Operators||{};o=l.BuilderP=l.BuilderP||{};p=f.FusionM=f.FusionM||{};q=p.Operators=p.Operators||{};r=p.Builder=p.Builder||{};s=r.Builder=r.Builder||{};t=f.FusionAsyncM=f.FusionAsyncM||{};u=t.Operators=t.Operators||{};v=t.Builder=t.Builder||{};w=v.Builder=v.Builder||{};x=f.ResultM=f.ResultM||{};y=x.Builder=x.Builder||{};z=x.Operators=x.Operators||{};A=f.ResultMAutoOpen=f.ResultMAutoOpen||{};B=f.AsyncResult=f.AsyncResult||{};C=f.AsyncResultBuilder=f.AsyncResultBuilder||{};D=f.AsyncResultBuilderP=f.AsyncResultBuilderP||{};E=f.Extensions=f.Extensions||{};F=f.AsyncResultM=f.AsyncResultM||{};G=F.AsyncResultMBuilder=F.AsyncResultMBuilder||{};H=F.Operators=F.Operators||{};I=f.AsyncResultMAutoOpen=f.AsyncResultMAutoOpen||{};J=c.String=c.String||{};K=c.ParseO=c.ParseO||{};L=c.MailboxProcessorExt=c.MailboxProcessorExt||{};M=c.Mailbox=c.Mailbox||{};N=M.StateFull=M.StateFull||{};O=c.ResourceAgentState=c.ResourceAgentState||{};P=c.ResourceAgent=c.ResourceAgent||{};Q=c.AgentReaderM=c.AgentReaderM||{};R=c.CommArgRoot=c.CommArgRoot||{};S=R.CommArg=R.CommArg||{};T=R.CommArgCollection=R.CommArgCollection||{};U=R.TypedCommArg=R.TypedCommArg||{};V=R.CommArgModule=R.CommArgModule||{};W=c.FsCodeModule=c.FsCodeModule||{};X=W.PreproDirective=W.PreproDirective||{};Y=W.PrepState=W.PrepState||{};Z=c.SnippetId=c.SnippetId||{};_0=c.Snippet=c.Snippet||{};_1=c.SnippetCollection=c.SnippetCollection||{};_2=c.SnippetModule=c.SnippetModule||{};_3=c.Hole=c.Hole||{};_4=c.TreeReader=c.TreeReader||{};_5=_4.Node=_4.Node||{};_6=b.LibraryJS=b.LibraryJS||{};_7=_6.Promise=_6.Promise||{};_8=_6.PromiseM=_6.PromiseM||{};_9=_6.View=_6.View||{};_=_6.Pojo=_6.Pojo||{};$=_6.GenEditor=_6.GenEditor||{};ba=$.Position=$.Position||{};bb=$.AnnotationType=$.AnnotationType||{};bc=$.Annotation=$.Annotation||{};bd=$.Completion=$.Completion||{};be=$.GenEditorHook=$.GenEditorHook||{};bf=$.GenEditor=$.GenEditor||{};bg=_6.Serializer=_6.Serializer||{};bh=_6.REGEX=_6.REGEX||{};bi=_6.Hoverable=_6.Hoverable||{};bj=bi.Hoverable=bi.Hoverable||{};bk=_6.ResizeObserver=_6.ResizeObserver||{};bl=_6.WebComponent=_6.WebComponent||{};bm=bl.WcTabStrip=bl.WcTabStrip||{};bn=bm.WcTabStripT=bm.WcTabStripT||{};bo=bl.WcSplitter=bl.WcSplitter||{};bp=bo.WcSplitterT=bo.WcSplitterT||{};bq=_6.Monaco=_6.Monaco||{};br=bq.Position=bq.Position||{};bs=bq.Range=bq.Range||{};bt=bq.Uri=bq.Uri||{};bu=bq.Location=bq.Location||{};bv=bq.FindMatch=bq.FindMatch||{};bw=bq.WordAtPosition=bq.WordAtPosition||{};bx=bq.Model=bq.Model||{};by=bq.MarkDownString=bq.MarkDownString||{};bz=bq.MarkerData=bq.MarkerData||{};bA=bq.CompletionItem=bq.CompletionItem||{};bB=bq.Hover=bq.Hover||{};bC=bq.Editor=bq.Editor||{};bD=bq.MonacoConfig=bq.MonacoConfig||{};bE=_6.MonacoGenAdapter=_6.MonacoGenAdapter||{};bF=bE.MonacoRT=bE.MonacoRT||{};bG=bE.CompletionItemProvider=bE.CompletionItemProvider||{};bH=bE.HoverProvider=bE.HoverProvider||{};bI=bE.DefinitionProvider=bE.DefinitionProvider||{};bJ=b.Library2=b.Library2||{};bK=bJ.FsiAgent=bJ.FsiAgent||{};bL=bJ.WebSockets=bJ.WebSockets||{};bM=bL.Address=bL.Address||{};bN=bL.BrokerRequest=bL.BrokerRequest||{};bO=bL.MessageType=bL.MessageType||{};bP=bL.BrokerMessage=bL.BrokerMessage||{};bQ=bL.Replier=bL.Replier||{};bR=bL.MessageGeneric=bL.MessageGeneric||{};bS=bL.ClientTypeFSharp=bL.ClientTypeFSharp||{};bT=bL.ClientTypeFSStation=bL.ClientTypeFSStation||{};bU=bL.ClientTypeJScript=bL.ClientTypeJScript||{};bV=bL.ReplyHandler=bL.ReplyHandler||{};bW=bV.Handler=bV.Handler||{};bX=bL.WSMessagingClient=bL.WSMessagingClient||{};bY=bJ.FSMessage=bJ.FSMessage||{};bZ=bJ.FsAutoComplete=bJ.FsAutoComplete||{};b0=bZ.CommTypes=bZ.CommTypes||{};b1=b0.ResponseError=b0.ResponseError||{};b2=b0.Location=b0.Location||{};b3=b0.CompletionResponse=b0.CompletionResponse||{};b4=b0.OverloadDescription=b0.OverloadDescription||{};b5=b0.OverloadParameter=b0.OverloadParameter||{};b6=b0.Overload=b0.Overload||{};b7=b0.Parameter=b0.Parameter||{};b8=b0.SignatureData=b0.SignatureData||{};b9=b0.MethodResponse=b0.MethodResponse||{};b_=b0.SymbolUseRange=b0.SymbolUseRange||{};b$=b0.SymbolUseResponse=b0.SymbolUseResponse||{};ca=b0.HelpTextResponse=b0.HelpTextResponse||{};cb=b0.CompilerLocationResponse=b0.CompilerLocationResponse||{};cc=b0.FSharpErrorInfo=b0.FSharpErrorInfo||{};cd=b0.ErrorResponse=b0.ErrorResponse||{};ce=b0.Colorization=b0.Colorization||{};cf=b0.Declaration=b0.Declaration||{};cg=b0.DeclarationResponse=b0.DeclarationResponse||{};ch=b0.OpenNamespace=b0.OpenNamespace||{};ci=b0.QualifySymbol=b0.QualifySymbol||{};cj=b0.ResolveNamespaceResponse=b0.ResolveNamespaceResponse||{};ck=b0.UnionCaseResponse=b0.UnionCaseResponse||{};cl=bZ.MsgTypes=bZ.MsgTypes||{};cm=cl.ParseRequest=cl.ParseRequest||{};cn=cl.DeclarationsRequest=cl.DeclarationsRequest||{};co=cl.CompletionRequest=cl.CompletionRequest||{};cp=cl.PositionRequest=cl.PositionRequest||{};cq=cl.ProjectRequest=cl.ProjectRequest||{};cr=cl.LintRequest=cl.LintRequest||{};cs=cl.HelptextRequest=cl.HelptextRequest||{};ct=cl.WorkspacePeekRequest=cl.WorkspacePeekRequest||{};cu=bZ.Calls=bZ.Calls||{};cv=b.FSharpStation=b.FSharpStation||{};cw=cv.FStation=cv.FStation||{};cx=cv.Snippets=cv.Snippets||{};cy=cv.DragDrop=cv.DragDrop||{};cz=cy.DragInfo=cy.DragInfo||{};cA=cv.Templating=cv.Templating||{};cB=cv.RenderSnippets=cv.RenderSnippets||{};cC=cv.RenderProperties=cv.RenderProperties||{};cD=cv.Monaco=cv.Monaco||{};cE=cD.HoverProvider=cD.HoverProvider||{};cF=cD.CompletionItemProvider=cD.CompletionItemProvider||{};cG=cD.DefinitionProvider=cD.DefinitionProvider||{};cH=cD.MonacoOptions=cD.MonacoOptions||{};cI=cD.ITextModelService=cD.ITextModelService||{};cJ=cv.JumpTo=cv.JumpTo||{};cK=cv.CustomAction=cv.CustomAction||{};cL=cv.Serializer=cv.Serializer||{};cM=cL.Model=cL.Model||{};cN=cv.LoadSave=cv.LoadSave||{};cO=cv.Importer=cv.Importer||{};cP=cv.MainProgram=cv.MainProgram||{};cQ=cP.EndPoint=cP.EndPoint||{};cR=cv.Messaging=cv.Messaging||{};cS=cv.Server=cv.Server||{};cT=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};cU=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};cV=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};cW=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};cX=a.FSharpStation_Router=a.FSharpStation_Router||{};cY=a.FSharpStation_Templates=a.FSharpStation_Templates||{};cZ=a.GeneratedPrintf=a.GeneratedPrintf||{};c0=a.IntelliFactory;c1=c0&&c0.Runtime;c2=j&&j.Utils;c3=j&&j.Strings;c4=j&&j.Seq;c5=j&&j.List;c6=j&&j.Arrays;c7=j&&j.Concurrency;c8=j&&j.Enumerator;c9=j&&j.Result;c_=j&&j.Operators;c$=j&&j.Unchecked;da=j&&j.Slice;db=j&&j.Control;dc=db&&db.MailboxProcessor;dd=a.System;de=dd&&dd.Guid;df=j&&j.Collections;dg=df&&df.FSharpSet;dh=j&&j.Option;di=a.Date;dj=j&&j.Char;dk=j&&j.CancellationTokenSource;dl=a.console;dm=j&&j.UI;dn=dm&&dm.View;_do=dm&&dm.Var$1;dp=df&&df.FSharpMap;dq=df&&df.BalancedTree;dr=dm&&dm.DomUtility;ds=dm&&dm.Doc;dt=dm&&dm.AttrModule;du=dm&&dm.AttrProxy;dv=a.Node;dw=dm&&dm.Client;dx=dw&&dw.Templates;dy=a.Reflect;dz=a.Object;dA=df&&df.Map;dB=a.JSON;dC=j&&j.TimeoutException;dD=j&&j.ClientSideJson;dE=dD&&dD.Provider;dF=j&&j.Owin;dG=dF&&dF.WebSocket;dH=dG&&dG.Client;dI=dH&&dH.WithEncoding;dJ=dG&&dG.Endpoint;dK=a.location;dL=j&&j.Remoting;dM=dL&&dL.AjaxRemotingProvider;dN=dm&&dm.FromView;dO=dm&&dm.Templating;dP=dO&&dO.Runtime;dQ=dP&&dP.Server;dR=dQ&&dQ.ProviderBuilder;dS=dQ&&dQ.Handler;dT=dQ&&dQ.TemplateInstance;dU=j&&j.JavaScript;dV=dU&&dU.Promise;dW=a.FsRootDll;dX=dW&&dW.LibraryJS;dY=dX&&dX.AppFramework;dZ=dY&&dY.PlugIn;d0=dm&&dm.ListModel;d1=j&&j.Lazy;d2=dX&&dX.LayoutEngineModule;d3=j&&j.DateUtil;d4=j&&j.Numeric;d5=df&&df.Dictionary;d6=dm&&dm.Router;d7=j&&j.Sitelets;d8=d7&&d7.RouterOperators;d=c.ResultMessage=c1.Class({toString:function(){return this.$==1?(function(d9){return function(d_){return d9("Error    : "+c2.toSafe(d_));};}(a.id))(this.$0):this.$==2?(function(d9){return function(d_){return d9("Warning  : "+c2.toSafe(d_));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(d9){return function(d_){return d9(a.String(d_));};}(a.id))(this.$0):this.$==5?(((c1.Curried3(function(d9,d_,d$){return d9("Exception: "+c2.toSafe(d_)+", "+c2.toSafe(d$));}))(a.id))(this.$0))(this.$1):this.$==6?c3.concat("\n",c4.map(a.String,c4.filter(function(d9){return d9.$!=0;},this.$0))):"";}},null,d);d.NoMsg=new d({$:0});e.infof=function(d9){return d9(function(d_){return new d({$:3,$0:d_});});};e.warningf=function(d9){return d9(function(d_){return new d({$:2,$0:d_});});};e.errorMsgf=function(d9){return d9(function(d_){return new d({$:1,$0:d_});});};d.summarizedI=function(d9){return d.summarizedF(function(){return[0,0,1];},d9);};d.summarizedW=function(d9){return d.summarizedF(function(){return[0,1,0];},d9);};d.summarized=function(d9){return d.summarizedF(function(){return[1,0,0];},d9);};d.summarizedF=function(d9,d_){return c3.concat("\n",c4.filter(function(d$){return""!==d$;},c5.ofArray([a.String(d_),d.summaryF(d9,d_)])));};d.summaryF=function(d9,d_){var d$,ea;ea=d.countF(d9,d_);switch(ea[0]===0?ea[1]===0?0:ea[1]===1?ea[2]===0?0:(d$=ea[1],2):(d$=ea[1],2):ea[0]===1?ea[1]===0?ea[2]===0?0:(d$=ea[0],1):(d$=[ea[0],ea[1]],3):ea[1]===0?(d$=ea[0],1):(d$=[ea[0],ea[1]],3)){case 0:return"";case 1:return(function(eb){return function(ec){return eb("Errors   : "+a.String(ec)+"\n");};}(a.id))(d$);case 2:return(function(eb){return function(ec){return eb("Warnings : "+a.String(ec)+"\n");};}(a.id))(d$);case 3:return(((c1.Curried3(function(eb,ec,ed){return eb("Errors   : "+a.String(ec)+", Warnings: "+a.String(ed)+"\n");}))(a.id))(d$[0]))(d$[1]);}};d.reduceMsgs=function(d9){return c4.fold(d.addMsg,d.NoMsg,d9);};d.addMsg=function(d9,d_){return d9.$==0?d_:d9.$==6?d_.$==0?d9:d_.$==6?new d({$:6,$0:d9.$0.concat(d_.$0)}):new d({$:6,$0:d9.$0.concat([d_])}):d_.$==0?d9:d_.$==6?new d({$:6,$0:[d9].concat(d_.$0)}):new d({$:6,$0:[d9,d_]});};d.countI=function(d9){return d.countF(function(){return[0,0,1];},d9);};d.countW=function(d9){return d.countF(function(){return[0,1,0];},d9);};d.count=function(d9){return d.countF(function(){return[1,0,0];},d9);};d.countF=function(d9,d_){function d$(ea,eb,ec){return function(ed){return[ea+ed[0],eb+ed[1],ec+ed[2]];};}return d_.$==0?[0,0,0]:d_.$==3?[0,0,1]:d_.$==2?[0,1,0]:d_.$==4?d9(d_.$0):d_.$==6?c4.fold(function(ea,eb){return(function(ec){return d$(ec[0],ec[1],ec[2]);}(ea))(eb);},[0,0,0],c4.map(function(ea){return d.countF(d9,ea);},d.exclnoMsg(d_.$0))):[1,0,0];};d.isFatalW=function(d9){return d.isFatalF(function(){return false;},d9);};d.isFatal=function(d9){return d.isFatalF(function(){return true;},d9);};d.isFatalF=function(d9,d_){return d_.$==0?false:d_.$==3?false:d_.$==2?false:d_.$==4?d9(d_.$0):d_.$==6?c4.exists(function(d$){return d.isFatalF(d9,d$);},d_.$0):true;};d.isWarningOrInfoW=function(d9){return d.isWarningOrInfoF(function(){return true;},d9);};d.isWarningOrInfo=function(d9){return d.isWarningOrInfoF(function(){return false;},d9);};d.isWarningOrInfoF=function(d9,d_){return d_.$==2||(d_.$==4?d9(d_.$0):d_.$==6&&c4.forall(function(d$){return d.isWarningOrInfoF(d9,d$)||d.isInfoF(d9,d$);},d.exclnoMsg(d_.$0)));};d.isInfoI=function(d9){return d.isInfoF(function(){return true;},d9);};d.isInfo=function(d9){return d.isInfoF(function(){return false;},d9);};d.isInfoF=function(d9,d_){return d_.$==3||(d_.$==4?d9(d_.$0):d_.$==6&&c4.forall(function(d$){return d.isInfoF(d9,d$);},d.exclnoMsg(d_.$0)));};d.freeMessageI=function(d9){var d_;function d$(ea){return new d({$:3,$0:ea});}return d.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};d.freeMessageW=function(d9){var d_;function d$(ea){return new d({$:2,$0:ea});}return d.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};d.freeMessage=function(d9){var d_;function d$(ea){return new d({$:1,$0:ea});}return d.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};d.freeMessageF=function(d9,d_){return d.bindMessage(d9,d_);};d.bindMessage=function(d9,d_){return d_.$==4?d9(d_.$0):d_.$==1?new d({$:1,$0:d_.$0}):d_.$==3?new d({$:3,$0:d_.$0}):d_.$==2?new d({$:2,$0:d_.$0}):d_.$==5?new d({$:5,$0:d_.$0,$1:d_.$1}):d_.$==6?new d({$:6,$0:c6.map(function(d$){return d.bindMessage(d9,d$);},d_.$0)}):d.NoMsg;};d.exclnoMsg=function(d9){function d_(d$){return!d$;}return c4.filter(function(d$){return d_(d.noMsg(d$));},d9);};d.noMsg=function(d9){return d9.$==0;};g.ofOption=function(d9){return d9==null?[]:[d9.$0];};g.absorbR=function(d9){return c4.choose(function(d_){return d_.$==0?{$:1,$0:d_.$0}:null;},d9);};g.absorbO=function(d9){return c4.choose(a.id,d9);};g.insertR=function(d9){return d9.$==0?c4.map(function(d_){return{$:0,$0:d_};},d9.$0):(g.rtn())(c.Error(d9.$0));};g.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:c4.map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?(g.rtn())(null):d_.$0;};g.rtn=function(){cT.$cctor();return cT.rtn;};h.absorbR=function(d9){var d_,d$;return d9!=null&&d9.$==1&&(d$=d9.$0,d$.$==0&&(d_=d$.$0,true))?{$:1,$0:d_}:null;};h.insertR=function(d9){var d_;return d9.$==0?(d_=d9.$0,d_==null?null:{$:1,$0:{$:0,$0:d_.$0}}):h.rtn(c.Error(d9.$0));};h.sequenceSeq=function(d9){return h.traverseSeq(a.id,d9);};h.traverseSeq=function(d9,d_){var d$;d$=c6.foldBack(function(ea,eb){return h.op_GreaterGreaterEquals(d9(ea),function(ec){return h.op_GreaterGreaterEquals(eb,function(ed){return h.rtn(new c5.T({$:1,$0:ec,$1:ed}));});});},c6.ofSeq(d_),h.rtn(c5.T.Empty));return d$==null?null:{$:1,$0:d$.$0};};h.op_GreaterGreaterEquals=function(d9,d_){return d9==null?null:d_(d9.$0);};h.bindNone=function(d9,d_){return d_!=null&&d_.$==1?{$:1,$0:d_.$0}:d9();};h.mapNone=function(d9,d_){return d_==null?d9():d_.$0;};h.apply=function(d9,d_){var d$;return d9!=null&&d9.$==1&&(d_!=null&&d_.$==1&&(d$=[d9.$0,d_.$0],true))?{$:1,$0:d$[0](d$[1])}:null;};h.join=function(d9){return d9==null?null:d9.$0;};h.iter=function(d9){function d_(ea){return ea==null?null:{$:1,$0:d9(ea.$0)};}function d$(ea){if(ea==null);}return function(ea){return d$(d_(ea));};};h.rtn=function(d9){return{$:1,$0:d9};};i.insertR=function(d9){function d_(ea){return{$:0,$0:ea};}function d$(ea){return c7.Return(ea);}return d9.$==0?c7.Bind(d9.$0,function(ea){return d$(d_(ea));}):c7.Return(c.Error(d9.$0));};i.insertO=function(d9){var d_;function d$(eb){return{$:1,$0:eb};}function ea(eb){return c7.Return(eb);}d_=d9==null?null:{$:1,$0:c7.Bind(d9.$0,function(eb){return ea(d$(eb));})};return d_==null?c7.Return(null):d_.$0;};i.sequenceSeq=function(d9){return i.traverseSeq(a.id,d9);};i.traverseSeq=function(d9,d_){function d$(ea){return c7.Return(ea);}return c7.Bind(c6.foldBack(function(ea,eb){return i.op_GreaterGreaterEquals(d9(ea),function(ec){return i.op_GreaterGreaterEquals(eb,function(ed){return c7.Return(new c5.T({$:1,$0:ec,$1:ed}));});});},c6.ofSeq(d_),c7.Return(c5.T.Empty)),function(ea){return d$(a.id(ea));});};i.op_GreaterGreaterEquals=function(d9,d_){return c7.Bind(d9,d_);};i.sleepThen=function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.Bind(c7.Sleep(d_),function(){return c7.Return(d9());});});};i.apply=function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.Bind(c7.StartChild(d9,null),function(ea){return c7.Bind(c7.StartChild(d_,null),function(eb){return c7.Bind(ea,function(ec){return c7.Bind(eb,function(ed){return c7.Return(ec(ed));});});});});});};m=l.Builder=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},While:function(d9,d_){function d$(ea,eb){return ea()?c9.Bind(function(){return d$(ea,eb);},eb()):l.rtn();}return d$(d9,d_);},Using:function(d9,d_){try{return d_(d9);}finally{d9.Dispose();}},TryFinally:function(d9,d_){try{return d9();}finally{d_();}},TryWith:function(d9,d_){try{return d9();}catch(d$){return d_(d$);}},Run:function(d9){return c9.Bind(d9,{$:0,$0:null});},Combine:function(d9,d_){return c9.Bind(d_,d9);},Delay:a.id,Zero:function(){return l.rtn();},Bind:function(d9,d_){return c9.Bind(d_,d9);},ReturnFrom:a.id,Return:function(d9){return l.rtn(d9);}},k,m);m.New=c1.Ctor(function(){k.New.call(this);},m);n.result=function(){cT.$cctor();return cT.result$1;};n.rtn=function(d9){return l.rtn(d9);};n.op_GreaterEqualsGreater=function(d9,d_,d$){return n.op_GreaterGreaterEquals(d9(d$),d_);};n.op_RightShift=function(d9,d_,d$){return n.op_BarGreaterGreater(d9(d$),d_);};n.op_GreaterGreaterEquals=function(d9,d_){return c9.Bind(d_,d9);};n.op_BarGreaterGreater=function(d9,d_){return c9.Map(d_,d9);};o=l.BuilderP=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},While:function(d9,d_){function d$(ea,eb){return ea()?c9.Bind(function(){return d$(ea,eb);},eb()):l.rtn();}return d$(d9,d_);},Using:function(d9,d_){try{return d_(d9);}finally{d9.Dispose();}},TryFinally:function(d9,d_){try{return d9();}finally{d_();}},TryWith:function(d9,d_){try{return d9();}catch(d$){return d_(d$);}},Run:function(d9){return l.bindP(d9,{$:0,$0:null});},Combine:function(d9,d_){return c9.Bind(d_,d9);},Delay:a.id,Zero:function(){return l.rtn();},Bind:function(d9,d_){return c9.Bind(d_,d9);},ReturnFrom:a.id,Return:function(d9){return l.rtn(d9);}},k,o);o.New=c1.Ctor(function(){k.New.call(this);},o);l.resultP=function(){cT.$cctor();return cT.resultP;};l.iterP=function(d9,d_,d$){l.defaultWith(d9,l.mapP(d_,d$));};l.mapP=function(d9,d_){return l.bindP(function(d$){return l.rtn(d9(d$));},d_);};l.bindP=function(d9,d_){if(d_.$==1)return c.Error(d_.$0);else try{return d9(d_.$0);}catch(d$){return c.Error(new d({$:5,$0:d$.message,$1:d$.stack}));}};l.freeMessage=function(d9){return d9.$==1?c.Error(d.freeMessage(d9.$0)):{$:0,$0:d9.$0};};l.result=function(){cT.$cctor();return cT.result;};l.sequenceSeq=function(d9){return l.traverseSeq(a.id,d9);};l.traverseSeq=function(d9,d_){return c9.Map(a.id,c6.foldBack(function(d$,ea){return l.op_GreaterGreaterEquals(d9(d$),function(eb){return l.op_GreaterGreaterEquals(ea,function(ec){return l.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),l.rtn(c5.T.Empty)));};l.op_GreaterGreaterEquals=function(d9,d_){return c9.Bind(d_,d9);};l.absorbO=function(d9,d_){return c9.Bind(function(d$){return l.ofOption(d9,d$);},d_);};l.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:c9.Map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?{$:0,$0:null}:d_.$0;};l.ofOption=function(d9,d_){var d$;d$=d_==null?null:{$:1,$0:{$:0,$0:d_.$0}};return d$==null?function(ea){return c.Error(d9(ea));}():d$.$0;};l.get=function(d9){return l.defaultWith(function(d_){return c_.FailWith(a.String(d_));},d9);};l.iter=function(d9,d_,d$){l.defaultWith(d9,c9.Map(d_,d$));};l.failIfFalse=function(d9,d_){return!d_?c.Error(d9):{$:0,$0:null};};l.failIfTrue=function(d9,d_){return d_?c.Error(d9):{$:0,$0:null};};l.defaultValue=function(d9,d_){return d_.$==1?d9:d_.$0;};l.defaultWith=function(d9,d_){return d_.$==1?d9(d_.$0):d_.$0;};l.toOption=function(d9){return d9.$==0?{$:1,$0:d9.$0}:null;};l.flatten=function(d9){return c9.Bind(a.id,d9);};l.join=function(d9){return c9.Bind(a.id,d9);};l.rtn=function(d9){return{$:0,$0:d9};};l.errorf=function(d9){return d9(c.Error);};q.rtn=function(d9){return p.rtn(d9);};q.op_GreaterEqualsGreater=function(d9,d_,d$){return q.op_GreaterGreaterEquals(d9(d$),d_);};q.op_RightShift=function(d9,d_,d$){return q.op_BarGreaterGreater(d9(d$),d_);};q.op_GreaterGreaterEquals=function(d9,d_){return p.bind(d_,d9);};q.op_BarGreaterGreater=function(d9,d_){return p.map(d_,d9);};q.op_LessMultiplyGreater=function(d9,d_){return p.apply(d9,d_);};s=r.Builder=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},Using:function(d9,d_){return this.TryFinally(function(){return d_(d9);},function(){if(!c$.Equals(d9,null))d9.Dispose();});},TryFinally:function(d9,d_){return p.wrap(function(d$){try{return(p.getFun(d9()))(d$);}finally{d_();}});},TryWith:function(d9,d_){return p.wrap(function(d$){try{return(p.getFun(d9()))(d$);}catch(ea){return d_(ea);}});},While:function(d9,d_){function d$(ea,eb){return ea()?p.bind(function(){return d$(ea,eb);},eb()):p.rtn();}return d$(d9,d_);},Run:function(d9){return p.wrap(function(d_){return(p.getFun(d9()))(d_);});},Combine:function(d9,d_){return p.bind(d_,d9);},Delay:a.id,Zero:function(){return p.rtn();},Bind:function(d9,d_){return p.bind(d_,d9);},ReturnFrom:function(d9){return p.from(d9);},Return:function(d9){return p.rtn(d9);}},k,s);s.New=c1.Ctor(function(){k.New.call(this);},s);p.fusion=function(){cT.$cctor();return cT.fusion;};p.absorbO=function(d9,d_){return p.absorbR(p.map(function(d$){return l.ofOption(d9,d$);},d_));};p.absorbR=function(d9){return p.bind(p.ofResultRM,d9);};p.insertSnd=function(d9,d_){return p.map(function(d$){return[d$,d_];},d9);};p.insertFst=function(d9,d_){return p.map(function(d$){return[d9,d$];},d_);};p.insertR=function(d9){return d9.$==0?p.map(function(d_){return{$:0,$0:d_};},d9.$0):p.rtn(c.Error(d9.$0));};p.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:p.map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?p.rtn(null):d_.$0;};p.iterResultPrint=function(d9){function d_(d$){c.print(d$);}p.iterReader(function(d$){return d_(d.summarized(d$));},function(d$){c.print(d$);},null,d9);};p.iterResult=function(d9,d_,d$){p.iterReader(d9,d_,null,d$);};p.runResult=function(d9){return p.runReader(null,d9);};p.runReader=function(d9,d_){var d$,ea,eb;d$=p.run(d9,d_);ea=d$[2];return l.ofOption(function(){return ea;},(eb=d$[0],eb==null?null:{$:1,$0:[eb.$0,ea]}));};p.mapReader=function(d9,d_){return p.mapState(function(){return d9;},a.id,d_);};p.readerFun=function(d9){return p.map(d9,p.getS());};p.sequenceSeq=function(d9){return p.traverseSeq(a.id,d9);};p.traverseSeq=function(d9,d_){return p.map(a.id,c6.foldBack(function(d$,ea){return p.op_GreaterGreaterEquals(d9(d$),function(eb){return p.op_GreaterGreaterEquals(ea,function(ec){return p.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),p.rtn(c5.T.Empty)));};p.op_GreaterGreaterEquals=function(d9,d_){return p.bind(d_,d9);};p.apply=function(d9,d_){return p.bind(function(d$){return p.map(d$,d_);},d9);};p.memoizeRm=function(d9,d_,d$){return{$:0,$0:function(ea){var eb,ec,ed,ee,ef;function eg(eh,ei){return(ed(eh))(function(){return ei;});}eb=ea[0];ec=d9(eb);ed=ec[1];return p.run(eb,(ee=(ef=ec[0](d$),ef==null?null:{$:1,$0:p.rtn(ef.$0)}),ee==null?p.map(function(eh){return eg(d$,eh);},d_(d$)):ee.$0));}};};p.iterReader=function(d9,d_,d$,ea){var eb,ec;eb=p.run(d$,p.map(d_,ea));ec=eb[2];(h.iter(a.ignore))(eb[0]);ec.$!==0?d9(ec):void 0;};p.mapState=function(d9,d_,d$){return{$:0,$0:function(ea){var eb,ec;eb=ea[0];ec=(p.getFun(d$))([d9(eb),ea[1]]);return[ec[0],d_(eb,ec[1]),ec[2]];}};};p.freeMessageW=function(d9){var d_;function d$(ea){return new d({$:2,$0:ea});}return p.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};p.freeMessage=function(d9){var d_;function d$(ea){return new d({$:1,$0:ea});}return p.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};p.freeMessageF=function(d9,d_){return{$:0,$0:function(d$){var ea,eb,ec;ea=d$[0];eb=d$[1];try{ec=d_.$0([ea,d.freeMessage(eb)]);return[ec[0],ec[1],d.freeMessageF(d9,ec[2])];}catch(ed){return[null,ea,d.freeMessage(d.addMsg(eb,new d({$:5,$0:ed.message,$1:ed.stack})))];}}};};p.ofFusionM=function(d9){return p.from(d9);};p.ofResultMessage=function(d9){return p.OkFMsg(null,d9);};p.ofMessage=function(d9){return p.OkFMsg(null,new d({$:4,$0:d9}));};p.ofOption=function(d9,d_){return d_==null?p.ErrorF(d9()):p.OkF(d_.$0);};p.ofResult=function(d9){return d9.$==1?p.ErrorF(new d({$:1,$0:(function(d_){return function(d$){return d_(c2.prettyPrint(d$));};}(a.id))(d9.$0)})):p.OkF(d9.$0);};p.ofResultS=function(d9){return d9.$==1?p.ErrorF(new d({$:1,$0:d9.$0})):p.OkF(d9.$0);};p.ofResultM=function(d9){return d9.$==1?p.ErrorF(new d({$:4,$0:d9.$0})):p.OkF(d9.$0);};p.ofResultRM=function(d9){return d9.$==1?p.ErrorF(d9.$0):p.OkF(d9.$0);};p.inling=function(d9,d_){return{$:0,$0:function(d$){var ea,eb,ec;ea=d$[0];eb=d$[1];try{ec=d_.$0([ea,eb]);return[{$:1,$0:ec[0]},ec[1],ec[2]];}catch(ed){return[null,ea,d.addMsg(eb,new d({$:5,$0:ed.message,$1:ed.stack}))];}}};};p.check=function(){return{$:0,$0:function(d9){return[d.isFatal(d9[1])?null:{$:1,$0:null},d9[0],d.NoMsg];}};};p.putS=function(d9){return{$:0,$0:function(){return[{$:1,$0:null},d9,d.NoMsg];}};};p.getR=function(){return{$:0,$0:function(d9){return[{$:1,$0:d9[1]},d9[0],d.NoMsg];}};};p.getS=function(){return{$:0,$0:function(d9){var d_;d_=d9[0];return[{$:1,$0:d_},d_,d.NoMsg];}};};p.ErrorF=function(d9){return{$:0,$0:function(d_){return[null,d_[0],d9];}};};p.OkFMsg=function(d9,d_){return{$:0,$0:function(d$){return[{$:1,$0:d9},d$[0],d_];}};};p.OkF=function(d9){return{$:0,$0:function(d_){return[{$:1,$0:d9},d_[0],d.NoMsg];}};};p.run=function(d9,d_){return(p.getFun(d_))([d9,d.NoMsg]);};p.from=a.id;p.getFun=function(d9){return d9.$0;};p.wrap=function(d9){return{$:0,$0:d9};};p.map=function(d9,d_){return p.bind(function(d$){return p.rtn(d9(d$));},d_);};p.bind=function(d9,d_){return{$:0,$0:function(d$){var ea,eb,ec,ed,ee,ef,eg;ea=d$[0];eb=d$[1];try{ec=d_.$0([ea,eb]);ed=ec[0];ee=ec[1];ef=ec[2];return ed!=null&&ed.$==1?(eg=d9(ed.$0).$0([ee,d.addMsg(eb,ef)]),[eg[0],eg[1],d.addMsg(ef,eg[2])]):[null,ee,ef];}catch(eh){return[null,ea,d.addMsg(eb,new d({$:5,$0:eh.message,$1:eh.stack}))];}}};};p.rtn=function(d9){return{$:0,$0:function(d_){return[{$:1,$0:d9},d_[0],d.NoMsg];}};};u.rtn=function(d9){return t.rtn(d9);};u.op_GreaterEqualsGreater=function(d9,d_,d$){return u.op_GreaterGreaterEquals(d9(d$),d_);};u.op_RightShift=function(d9,d_,d$){return u.op_BarGreaterGreater(d9(d$),d_);};u.op_GreaterGreaterEquals=function(d9,d_){return t.bind(d_,d9);};u.op_BarGreaterGreater=function(d9,d_){return t.map(d_,d9);};u.op_LessMultiplyGreater=function(d9,d_){return t.apply(d9,d_);};w=v.Builder=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},Using:function(d9,d_){function d$(ea,eb){return c7.Using(d9,function(ec){return(t.getFun(d_(ec)))([ea,eb]);});}return t.wrap(function(ea){return d$(ea[0],ea[1]);});},TryFinally:function(d9,d_){function d$(ea,eb){return c7.TryFinally((t.getFun(d9()))([ea,eb]),d_);}return t.wrap(function(ea){return d$(ea[0],ea[1]);});},TryWith:function(d9,d_){function d$(ea,eb){return c7.TryWith((t.getFun(d9()))([ea,eb]),d_);}return t.wrap(function(ea){return d$(ea[0],ea[1]);});},While:function(d9,d_){function d$(ea,eb){return ea()?t.bind(function(){return d$(ea,eb);},eb()):t.rtn();}return d$(d9,d_);},Run:function(d9){return t.wrap(function(d_){return(t.getFun(d9()))(d_);});},Combine:function(d9,d_){return t.bind(d_,d9);},Delay:a.id,Zero:function(){return t.rtn();},Bind:function(d9,d_){return t.bind(d_,d9);},ReturnFrom:function(d9){return t.from(d9);},Return:function(d9){return t.rtn(d9);}},k,w);w.New=c1.Ctor(function(){k.New.call(this);},w);t.fusion=function(){cT.$cctor();return cT.fusion$1;};t.iterResultPrintA=function(d9){function d_(d$){c.print(d$);}t.iterReaderA(function(d$){return d_(d.summarized(d$));},function(d$){c.print(d$);},null,d9);};t.iterResultPrint=function(d9){function d_(d$){c.print(d$);}t.iterReader(function(d$){return d_(d.summarized(d$));},function(d$){c.print(d$);},null,d9);};t.iterResultA=function(d9,d_,d$){t.iterReaderA(d9,d_,null,d$);};t.iterResult=function(d9,d_,d$){t.iterReader(d9,d_,null,d$);};t.runResult=function(d9){return t.runReader(null,d9);};t.runReader=function(d9,d_){function d$(eb,ec,ed){return l.ofOption(function(){return ed;},eb==null?null:{$:1,$0:[eb.$0,ed]});}function ea(eb){return c7.Return(eb);}return c7.Bind(t.run(d9,d_),function(eb){return ea(d$.apply(null,eb));});};t.mapReader=function(d9,d_){return t.mapState(function(){return d9;},a.id,d_);};t.absorbO=function(d9,d_){return t.absorbR(t.map(function(d$){return l.ofOption(d9,d$);},d_));};t.absorbR=function(d9){return t.bind(t.ofResultRM,d9);};t.insertSnd=function(d9,d_){return t.map(function(d$){return[d$,d_];},d9);};t.insertFst=function(d9,d_){return t.map(function(d$){return[d9,d$];},d_);};t.insertR=function(d9){return d9.$==0?t.map(function(d_){return{$:0,$0:d_};},d9.$0):t.rtn(c.Error(d9.$0));};t.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:t.map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?t.rtn(null):d_.$0;};t.readerFun=function(d9){return t.map(d9,t.getS());};t.freeMessageW=function(d9){var d_;function d$(ea){return new d({$:2,$0:ea});}return t.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};t.freeMessage=function(d9){var d_;function d$(ea){return new d({$:1,$0:ea});}return t.freeMessageF((d_=function(ea){return function(eb){return ea(a.String(eb));};}(a.id),function(ea){return d$(d_(ea));}),d9);};t.sequenceSeq=function(d9){return t.traverseSeq(a.id,d9);};t.traverseSeq=function(d9,d_){return t.map(a.id,c6.foldBack(function(d$,ea){return t.op_GreaterGreaterEquals(d9(d$),function(eb){return t.op_GreaterGreaterEquals(ea,function(ec){return t.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),t.rtn(c5.T.Empty)));};t.op_GreaterGreaterEquals=function(d9,d_){return t.bind(d_,d9);};t.apply=function(d9,d_){return t.bind(function(d$){return t.map(d$,d_);},d9);};t.memoizeRm=function(d9,d_,d$){return{$:0,$0:function(ea){var eb,ec;eb=ea[0];ec=null;return c7.Delay(function(){var ed,ee,ef,eg;function eh(ei,ej){return(ee(ei))(function(){return ej;});}ed=d9(eb);ee=ed[1];return t.run(eb,(ef=(eg=ed[0](d$),eg==null?null:{$:1,$0:t.rtn(eg.$0)}),ef==null?t.map(function(ei){return eh(d$,ei);},d_(d$)):ef.$0));});}};};t.iterReaderA=function(d9,d_,d$,ea){function eb(ed,ee,ef){(h.iter(a.ignore))(ed);ef.$!==0?d9(ef):void 0;}function ec(ed){return c7.Return(ed);}c7.Start(c7.Bind(t.run(d$,t.map(d_,ea)),function(ed){return ec(eb.apply(null,ed));}),null);};t.iterReader=function(d9,d_,d$,ea){var eb;eb=t.run(d$,t.map(d_,ea));throw"iterS cannot be used in JavaScript!";};t.mapState=function(d9,d_,d$){return{$:0,$0:function(ea){var eb,ec,ed;eb=ea[0];ec=ea[1];ed=null;return c7.Delay(function(){return c7.Bind((t.getFun(d$))([d9(eb),ec]),function(ee){return c7.Return([ee[0],d_(eb,ee[1]),ee[2]]);});});}};};t.freeMessageF=function(d9,d_){return{$:0,$0:function(d$){var ea,eb,ec;ea=d$[0];eb=d$[1];ec=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d_.$0([ea,d.freeMessage(eb)]),function(ed){return c7.Return([ed[0],ed[1],d.freeMessageF(d9,ed[2])]);});}),function(ed){return c7.Return([null,ea,d.freeMessage(d.addMsg(eb,new d({$:5,$0:ed.message,$1:ed.stack})))]);});});}};};t.ofFusionM=function(d9){var d_;d_=d9.$0;return{$:0,$0:function(d$){return c7.Return(d_([d$[0],d$[1]]));}};};t.ofAsyncResultRM=function(d9){return t.bind(t.ofResultRM,t.ofAsync(d9));};t.ofAsync=function(d9){return{$:0,$0:function(d_){var d$;function ea(ec){return[{$:1,$0:ec},d$,d.NoMsg];}function eb(ec){return c7.Return(ec);}d$=d_[0];return c7.Bind(d9,function(ec){return eb(ea(ec));});}};};t.ofResultMessage=function(d9){return t.OkFMsg(null,d9);};t.ofMessage=function(d9){return t.OkFMsg(null,new d({$:4,$0:d9}));};t.ofOption=function(d9,d_){var d$;d$=d_==null?null:{$:1,$0:t.OkF(d_.$0)};return d$==null?function(ea){return t.ErrorF(d9(ea));}():d$.$0;};t.ofResult=function(d9){return d9.$==1?t.ErrorF(new d({$:1,$0:(function(d_){return function(d$){return d_(c2.prettyPrint(d$));};}(a.id))(d9.$0)})):t.OkF(d9.$0);};t.ofResultS=function(d9){return d9.$==1?t.ErrorF(new d({$:1,$0:d9.$0})):t.OkF(d9.$0);};t.ofResultM=function(d9){return d9.$==1?t.ErrorF(new d({$:4,$0:d9.$0})):t.OkF(d9.$0);};t.ofResultRM=function(d9){return d9.$==1?t.ErrorF(d9.$0):t.OkF(d9.$0);};t.getOption=function(d9){return{$:0,$0:function(d_){var d$,ea,eb;d$=d_[0];ea=d_[1];eb=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d9.$0([d$,ea]),function(ec){return c7.Return([{$:1,$0:ec[0]},ec[1],ec[2]]);});}),function(ec){return c7.Return([null,d$,d.addMsg(ea,new d({$:5,$0:ec.message,$1:ec.stack}))]);});});}};};t.check=function(){return{$:0,$0:function(d9){return c7.Return([d.isFatal(d9[1])?null:{$:1,$0:null},d9[0],d.NoMsg]);}};};t.putS=function(d9){return{$:0,$0:function(){return c7.Return([{$:1,$0:null},d9,d.NoMsg]);}};};t.getR=function(){return{$:0,$0:function(d9){return c7.Return([{$:1,$0:d9[1]},d9[0],d.NoMsg]);}};};t.getS=function(){return{$:0,$0:function(d9){var d_;d_=d9[0];return c7.Return([{$:1,$0:d_},d_,d.NoMsg]);}};};t.ErrorF=function(d9){return{$:0,$0:function(d_){return c7.Return([null,d_[0],d9]);}};};t.OkFMsg=function(d9,d_){return{$:0,$0:function(d$){return c7.Return([{$:1,$0:d9},d$[0],d_]);}};};t.OkF=function(d9){return{$:0,$0:function(d_){return c7.Return([{$:1,$0:d9},d_[0],d.NoMsg]);}};};t.run=function(d9,d_){return(t.getFun(d_))([d9,d.NoMsg]);};t.from=a.id;t.getFun=function(d9){return d9.$0;};t.wrap=function(d9){return{$:0,$0:d9};};t.map=function(d9,d_){return t.bind(function(d$){return t.rtn(d9(d$));},d_);};t.bind=function(d9,d_){return{$:0,$0:function(d$){var ea,eb,ec;ea=d$[0];eb=d$[1];ec=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d_.$0([ea,eb]),function(ed){var ee,ef,eg;ee=ed[0];ef=ed[1];eg=ed[2];return ee!=null&&ee.$==1?c7.Bind(d9(ee.$0).$0([ef,d.addMsg(eb,eg)]),function(eh){return c7.Return([eh[0],eh[1],d.addMsg(eg,eh[2])]);}):c7.Return([null,ef,eg]);});}),function(ed){return c7.Return([null,ea,d.addMsg(eb,new d({$:5,$0:ed.message,$1:ed.stack}))]);});});}};};t.rtn=function(d9){return{$:0,$0:function(d_){return c7.Return([{$:1,$0:d9},d_[0],d.NoMsg]);}};};y=x.Builder=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},While:function(d9,d_){function d$(ea,eb){return ea()?x.bind(function(){return d$(ea,eb);},eb()):x.rtn();}return d$(d9,d_);},Using:function(d9,d_){try{return d_(d9);}finally{d9.Dispose();}},TryFinally:function(d9,d_){try{return d9();}finally{d_();}},TryWith:function(d9,d_){try{return d9();}catch(d$){return d_(d$);}},Run:function(d9){return x.bindP(d9,f.OkM$1());},Combine:function(d9,d_){return x.bind(d_,d9);},Delay:a.id,Zero:function(){return x.rtn();},Bind:function(d9,d_){return x.bindM(d_,d9);},Bind$1:function(d9,d_){return x.bindP(d_,d9);},ReturnFrom:function(d9){return x.rtnM(d9);},ReturnFrom$1:a.id,ReturnFrom$2:a.id,Return:function(d9){return x.rtn(d9);}},k,y);y.New=c1.Ctor(function(){k.New.call(this);},y);z.rtn=function(d9){return x.rtn(d9);};z.op_GreaterEqualsGreater=function(d9,d_,d$){return z.op_GreaterGreaterEquals(d9(d$),d_);};z.op_RightShift=function(d9,d_,d$){return z.op_BarGreaterGreater(d9(d$),d_);};z.op_GreaterGreaterEquals=function(d9,d_){return x.bindP(d_,d9);};z.op_BarGreaterGreater=function(d9,d_){return x.mapP(d_,d9);};x.sequenceSeq=function(d9){return x.traverseSeq(a.id,d9);};x.traverseSeq=function(d9,d_){return x.map(a.id,c6.foldBack(function(d$,ea){return x.op_GreaterGreaterEquals(d9(d$),function(eb){return x.op_GreaterGreaterEquals(ea,function(ec){return x.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),x.rtn(c5.T.Empty)));};x.op_GreaterGreaterEquals=function(d9,d_){return x.bind(d_,d9);};x.failIfFatalMsgW=function(d9){var d_;d_=f.OkM(d9);return d_.$==0?d.isFatalW(d_.$0[1])?f.ErrorM(d_.$0[1]):d9:d9;};x.failIfFatalMsg=function(d9){var d_;d_=f.OkM(d9);return d_.$==0?d.isFatal(d_.$0[1])?f.ErrorM(d_.$0[1]):d9:d9;};x.failIfFatalMsgF=function(d9,d_){var d$;d$=f.OkM(d_);return d$.$==0?d.isFatalF(d9,d$.$0[1])?f.ErrorM(d$.$0[1]):d_:d_;};x.addMsg=function(d9,d_){return x.mapMessage(function(d$){return d.addMsg(d9,d$);},d_);};x.absorbO=function(d9,d_){return x.bindP(function(d$){return x.ofOption(d9,d$);},d_);};x.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:x.map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?f.OkM$1(null):d_.$0;};x.ofResult=function(d9){return x.rtnr(d9);};x.ofOption=function(d9,d_){var d$;d$=d_==null?null:{$:1,$0:f.OkM$1(d_.$0)};return d$==null?function(ea){return f.ErrorM(d9(ea));}():d$.$0;};x.get=function(d9){return x.defaultWith(function(d_){return c_.FailWith(a.String(d_));},d9);};x.iter=function(d9,d_,d$){var ea;ea=x.mapP(d_,d$);ea.$0==null?d9(ea.$1):void 0;};x.mapP=function(d9,d_){return x.bindP(function(d$){return x.rtn(d9(d$));},d_);};x.check=function(d9,d_){var d$;return(d$=d_.$0,d$!=null&&d$.$==1)?d.isFatalF(d9.$0,d_.$1)?f.ErrorM(d_.$1):d_:d_;};x.bindM=function(d9,d_){return x.bindP(d9,x.rtnM(d_));};x.bindP=function(d9,d_){var d$;if(d_.$0==null)return{$:0,$0:null,$1:d_.$1};else{d$=d_.$1;try{return x.mapMessage(function(ea){return d.addMsg(d$,ea);},d9(d_.$0.$0));}catch(ea){return f.ErrorM(new d({$:5,$0:ea.message,$1:ea.stack}));}}};x.bind=function(d9,d_){var d$;return d_.$0==null?{$:0,$0:null,$1:d_.$1}:(d$=d_.$1,x.mapMessage(function(ea){return d.addMsg(d$,ea);},d9(d_.$0.$0)));};x.mapMessage=function(d9,d_){return{$:0,$0:d_.$0,$1:d9(d_.$1)};};x.map=function(d9,d_){var d$;return{$:0,$0:(d$=d_.$0,d$==null?null:{$:1,$0:d9(d$.$0)}),$1:d_.$1};};x.defaultValue=function(d9,d_){return l.defaultValue(d9,x.toResult(d_));};x.defaultWith=function(d9,d_){return l.defaultWith(d9,x.toResult(d_));};x.toOption=function(d9){return d9.$0;};x.toResultD=function(d9){return d9.$0==null?c.Error(d9.$1):{$:0,$0:[d9.$0.$0,d9.$1]};};x.toResult=function(d9){return d9.$0==null?c.Error(d9.$1):{$:0,$0:d9.$0.$0};};x.freeMessage=function(d9){return d9.$==1?c.Error(d.freeMessage(d9.$0)):{$:0,$0:d9.$0};};x.rtnr=function(d9){return l.defaultWith(f.ErrorM,c9.Map(f.OkM$1,d9));};x.rtnM=function(d9){return f.OkMWithMsg(null,d9);};x.rtn=function(d9){return f.OkM$1(d9);};x.checkErrorW=function(){return{$:0,$0:function(){return false;}};};x.checkError=function(){return{$:0,$0:function(){return true;}};};A.resultM=function(){cT.$cctor();return cT.resultM;};B.absorbO=function(d9,d_){function d$(eb){return l.absorbO(d9,eb);}function ea(eb){return c7.Return(eb);}return c7.Bind(d_,function(eb){return ea(d$(eb));});};B.absorbR=function(d9){function d_(d$){return c7.Return(d$);}return c7.Bind(d9,function(d$){return d_(l.join(d$));});};B.insertR=function(d9){return d9.$==0?B.map(function(d_){return{$:0,$0:d_};},d9.$0):B.rtn(c.Error(d9.$0));};B.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:B.map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?B.rtn(null):d_.$0;};B.sequenceSeq=function(d9){return B.traverseSeq(a.id,d9);};B.traverseSeq=function(d9,d_){return B.map(a.id,c6.foldBack(function(d$,ea){return B.op_GreaterGreaterEquals(d9(d$),function(eb){return B.op_GreaterGreaterEquals(ea,function(ec){return B.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),B.rtn(c5.T.Empty)));};B.op_GreaterGreaterEquals=function(d9,d_){return B.bind(d_,d9);};B.whileLoop=function(d9,d_){return d9()?B.bind(function(){return B.whileLoop(d9,d_);},d_()):B.rtn();};B.mapP=function(d9,d_){return B.bindP(function(d$){return B.rtn(d9(d$));},d_);};B.map=function(d9,d_){return B.bind(function(d$){return B.rtn(d9(d$));},d_);};B.bindP=function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d_,function(ea){return ea.$==1?c7.Return(c.Error(ea.$0)):d9(ea.$0);});}),function(ea){return c7.Return(c.Error(new d({$:5,$0:ea.message,$1:ea.stack})));});});};B.bind=function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.Bind(d_,function(ea){return ea.$==1?c7.Return(c.Error(ea.$0)):d9(ea.$0);});});};B.iterA=function(d9,d_,d$){function ea(ec){l.iter(d9,d_,ec);}function eb(ec){return c7.Return(ec);}c7.Start(c7.Bind(d$,function(ec){return eb(ea(ec));}),null);};B.iterS=function(d9,d_,d$){throw"iterS cannot be used in JavaScript!";};B.rtnR=function(d9){return c7.Return(d9);};B.rtn=function(d9){return c7.Return({$:0,$0:d9});};B.freeMessage=function(d9){function d_(d$){return c7.Return(d$);}return c7.Bind(d9,function(d$){return d_(l.freeMessage(d$));});};B.mapError=function(d9,d_){function d$(eb){return c9.MapError(d9,eb);}function ea(eb){return c7.Return(eb);}return c7.Bind(d_,function(eb){return ea(d$(eb));});};C=f.AsyncResultBuilder=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},While:function(d9,d_){return B.whileLoop(d9,d_);},Using:function(d9,d_){return c7.Using(d9,d_);},TryFinally:function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.TryFinally(c7.Delay(function(){return d9();}),function(){d_();});});},TryWith:function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return d9();}),function(ea){return d_(ea);});});},Run:function(d9){return B.bind(d9,B.rtn());},Delay:a.id,Combine:function(d9,d_){return B.bind(d_,B.rtnR(d9));},Combine$1:function(d9,d_){return B.bind(d_,d9);},Bind:function(d9,d_){return B.bind(d_,B.rtnR(d9));},Bind$1:function(d9,d_){return B.bind(d_,d9);},Zero:function(){return B.rtn();},Return:function(d9){return B.rtn(d9);},ReturnFrom:function(d9){return B.rtnR(d9);},ReturnFrom$1:a.id},k,C);C.New=c1.Ctor(function(){k.New.call(this);},C);D=f.AsyncResultBuilderP=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},While:function(d9,d_){return B.whileLoop(d9,d_);},Using:function(d9,d_){return c7.Using(d9,d_);},TryFinally:function(d9,d_){var d$;d$=null;return c7.Delay(function(){try{return d9();}finally{d_();}});},TryWith:function(d9,d_){var d$;d$=null;return c7.Delay(function(){try{return d9();}catch(ea){return d_(ea);}});},Run:function(d9){return B.bindP(d9,B.rtn());},Delay:a.id,Combine:function(d9,d_){return B.bindP(d_,B.rtnR(d9));},Combine$1:function(d9,d_){return B.bindP(d_,d9);},Bind:function(d9,d_){return B.bindP(d_,B.rtnR(d9));},Bind$1:function(d9,d_){return B.bindP(d_,d9);},Zero:function(){return B.rtn();},Return:function(d9){return B.rtn(d9);},ReturnFrom:function(d9){return B.rtnR(d9);},ReturnFrom$1:a.id},k,D);D.New=c1.Ctor(function(){k.New.call(this);},D);E["AsyncResultBuilderP.Combine"]=function(d9,d_,d$){function ea(ec){return{$:0,$0:ec};}function eb(ec){return c7.Return(ec);}return B.bindP(d$,c7.Bind(d_,function(ec){return eb(ea(ec));}));};E["AsyncResultBuilderP.Bind"]=function(d9,d_,d$){function ea(ec){return{$:0,$0:ec};}function eb(ec){return c7.Return(ec);}return B.bindP(d$,c7.Bind(d_,function(ec){return eb(ea(ec));}));};E["AsyncResultBuilderP.ReturnFrom"]=function(d9,d_){function d$(eb){return{$:0,$0:eb};}function ea(eb){return c7.Return(eb);}return c7.Bind(d_,function(eb){return ea(d$(eb));});};E["AsyncResultBuilder.Combine"]=function(d9,d_,d$){function ea(ec){return{$:0,$0:ec};}function eb(ec){return c7.Return(ec);}return B.bind(d$,c7.Bind(d_,function(ec){return eb(ea(ec));}));};E["AsyncResultBuilder.Bind"]=function(d9,d_,d$){function ea(ec){return{$:0,$0:ec};}function eb(ec){return c7.Return(ec);}return B.bind(d$,c7.Bind(d_,function(ec){return eb(ea(ec));}));};E["AsyncResultBuilder.ReturnFrom"]=function(d9,d_){function d$(eb){return{$:0,$0:eb};}function ea(eb){return c7.Return(eb);}return c7.Bind(d_,function(eb){return ea(d$(eb));});};G=F.AsyncResultMBuilder=c1.Class({For:function(d9,d_){var d$;d$=this;return this.Using(c8.Get(d9),function(ea){return d$.While(function(){return ea.MoveNext();},d$.Delay(function(){return d_(ea.Current());}));});},While:function(d9,d_){return F.whileLoop(d9,d_);},Using:function(d9,d_){return c7.Using(d9,d_);},TryFinally:function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.TryFinally(c7.Delay(function(){return d9();}),function(){d_();});});},TryWith:function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return d9();}),function(ea){return d_(ea);});});},Run:function(d9){return F.bind(d9,F.rtn());},Delay:a.id,Combine:function(d9,d_){return F.bind(d_,F.rtnR(d9));},Combine$1:function(d9,d_){return F.bind(d_,d9);},Bind:function(d9,d_){return F.bindrA(d_,d9);},Bind$1:function(d9,d_){return F.bindR(d_,d9);},Bind$2:function(d9,d_){return F.bindM(d_,d9);},Bind$3:function(d9,d_){return F.bindr(d_,d9);},Bind$4:function(d9,d_){return F.bind(d_,d9);},Zero:function(){return F.rtn();},Return:function(d9){return F.rtn(d9);},ReturnFrom:function(d9){return F.rtnrA(d9);},ReturnFrom$1:function(d9){return F.rtnR(d9);},ReturnFrom$2:function(d9){return F.rtnM(d9);},ReturnFrom$3:function(d9){return F.rtnr(d9);},ReturnFrom$4:a.id},k,G);G.New=c1.Ctor(function(){k.New.call(this);},G);H.rtn=function(d9){return F.rtn(d9);};H.op_GreaterEqualsGreater=function(d9,d_,d$){return H.op_GreaterGreaterEquals(d9(d$),d_);};H.op_GreaterMinusGreater=function(d9,d_,d$){return H.op_BarGreaterGreater(d9(d$),d_);};H.op_GreaterGreaterEquals=function(d9,d_){return F.bind(d_,d9);};H.op_BarGreaterGreater=function(d9,d_){return F.map(d_,d9);};F.getResultM=function(d9){function d_(d$){return c7.Return(d$);}return c7.Bind(d9,function(d$){return d_(f.OkM$1(d$));});};F.absorbO=function(d9,d_){function d$(eb){return x.absorbO(d9,eb);}function ea(eb){return c7.Return(eb);}return c7.Bind(d_,function(eb){return ea(d$(eb));});};F.absorbR=function(d9){var d_;function d$(ea){return c7.Return(ea);}return c7.Bind(d9,(d_=function(ea){return x.bindP(a.id,ea);},function(ea){return d$(d_(ea));}));};F.insertR=function(d9){return d9.$==0?F.map(function(d_){return{$:0,$0:d_};},d9.$0):F.rtn(c.Error(d9.$0));};F.insertO=function(d9){var d_;d_=d9==null?null:{$:1,$0:F.map(function(d$){return{$:1,$0:d$};},d9.$0)};return d_==null?F.rtn(null):d_.$0;};F.sequenceSeq=function(d9){return F.traverseSeq(a.id,d9);};F.traverseSeq=function(d9,d_){return F.map(a.id,c6.foldBack(function(d$,ea){return F.op_GreaterGreaterEquals(d9(d$),function(eb){return F.op_GreaterGreaterEquals(ea,function(ec){return F.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),F.rtn(c5.T.Empty)));};F.op_GreaterGreaterEquals=function(d9,d_){return F.bind(d_,d9);};F.whileLoop=function(d9,d_){return d9()?F.bind(function(){return F.whileLoop(d9,d_);},d_()):F.rtn();};F.map=function(d9,d_){return F.bind(function(d$){return F.rtn(d9(d$));},d_);};F.bindR=function(d9,d_){return F.bind(d9,F.rtnR(d_));};F.bindrA=function(d9,d_){return F.bind(d9,F.rtnrA(d_));};F.bindM=function(d9,d_){return F.bind(d9,F.rtnM(d_));};F.bindr=function(d9,d_){return F.bind(d9,F.rtnr(d_));};F.bind=function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d_,function(ea){var eb,ec;function ed(ef){return x.addMsg(ec,ef);}function ee(ef){return c7.Return(ef);}eb=f.OkM(ea);return eb.$==1?c7.Return(f.ErrorM(eb.$0)):(ec=eb.$0[1],c7.Bind(d9(eb.$0[0]),function(ef){return ee(ed(ef));}));});}),function(ea){return c7.Return(f.ErrorM(new d({$:5,$0:ea.message,$1:ea.stack})));});});};F.iterpA=function(d9,d_){function d$(ea){c.print(ea);}F.iterA(function(ea){return d$(d.summarized(ea));},d9,d_);};F.iterpS=function(d9,d_){function d$(ea){c.print(ea);}F.iterS(function(ea){return d$(d.summarized(ea));},d9,d_);};F.iterA=function(d9,d_,d$){function ea(ec){x.iter(d9,d_,ec);}function eb(ec){return c7.Return(ec);}c7.Start(c7.Bind(d$,function(ec){return eb(ea(ec));}),null);};F.iterS=function(d9,d_,d$){throw"iterS cannot be used in JavaScript!";};F.errorMsgf=function(d9){var d_;function d$(eb){return new d({$:1,$0:eb});}function ea(eb){return c7.Return(eb);}return d9((d_=function(eb){return f.ErrorM(d$(eb));},function(eb){return ea(d_(eb));}));};F.rtnrA=function(d9){function d_(d$){return c7.Return(d$);}return c7.Bind(d9,function(d$){return d_(x.ofResult(d$));});};F.rtnM=function(d9){return c7.Return(x.rtnM(d9));};F.rtnR=function(d9){return c7.Return(d9);};F.rtnr=function(d9){return c7.Return(x.rtnr(d9));};F.rtn=function(d9){return c7.Return(f.OkM$1(d9));};F.freeMessage=function(d9){function d_(d$){return c7.Return(d$);}return c7.Bind(d9,function(d$){return d_(x.freeMessage(d$));});};F.mapError=function(d9,d_){function d$(eb){return x.mapMessage(d9,eb);}function ea(eb){return c7.Return(eb);}return c7.Bind(d_,function(eb){return ea(d$(eb));});};I["AsyncResultMBuilder.Combine"]=function(d9,d_,d$){function ea(eb){return c7.Return(eb);}return F.bind(d$,c7.Bind(d_,function(eb){return ea(f.OkM$1(eb));}));};I["AsyncResultMBuilder.Bind"]=function(d9,d_,d$){function ea(eb){return c7.Return(eb);}return F.bind(d$,c7.Bind(d_,function(eb){return ea(f.OkM$1(eb));}));};I["AsyncResultMBuilder.ReturnFrom"]=function(d9,d_){function d$(ea){return c7.Return(ea);}return c7.Bind(d_,function(ea){return d$(f.OkM$1(ea));});};I.asyncResultM=function(){cT.$cctor();return cT.asyncResultM;};f.asyncResultP=function(){cT.$cctor();return cT.asyncResultP;};f.asyncResult=function(){cT.$cctor();return cT.asyncResult;};f.OkM=function(d9){return d9.$0==null?{$:1,$0:d9.$1}:{$:0,$0:[d9.$0.$0,d9.$1]};};f.ErrorM=function(d9){return{$:0,$0:null,$1:d9};};f.OkMWithMsg=function(d9,d_){return{$:0,$0:{$:1,$0:d9},$1:d_};};f.OkM$1=function(d9){return{$:0,$0:{$:1,$0:d9},$1:d.NoMsg};};J.thousands=function(d9){var d_,d$,ea;d_=a.String(d9);d$=d_.length%3;ea=d$===0?3:d$;return c3.concat(",",c5.ofSeq(c4.delay(function(){return c4.append([da.string(d_,{$:1,$0:0},{$:1,$0:ea-1})],c4.delay(function(){return c4.map(function(eb){return da.string(d_,{$:1,$0:eb*3+ea},{$:1,$0:eb*3+ea+2});},c_.range(0,((d_.length-ea)/3>>0)-1));}));})));};J.EndsWith=function(d9,d_){return c3.EndsWith(d_,d9)?{$:1,$0:da.string(d_,{$:1,$0:0},{$:1,$0:d_.length-d9.length-1})}:null;};J.StartsWith=function(d9,d_){return c3.StartsWith(d_,d9)?{$:1,$0:da.string(d_,{$:1,$0:d9.length},null)}:null;};J.skipLastLine=function(){cT.$cctor();return cT.skipLastLine;};J.indentStr=function(d9){function d_(ea){return J.indent(d9,ea);}function d$(ea){return c3.concat("\n",ea);}return function(ea){return d$(d_(ea));};};J.unindentStr=function(){cT.$cctor();return cT.unindentStr;};J.indent=function(d9,d_){var d$,ea;d$=c3.SplitChars(d_,["\n"],0);return c4.map((ea=c3.replicate(d9," "),function(eb){return ea+eb;}),d$);};J.unindent=function(d9){var d_,d$,ea,eb;d_=c3.SplitChars(d9,["\n"],0);d$=(ea=c4.tryFindIndex(function(ec){return" "!==ec;},(eb=c4.tryFind(function(ec){return c3.Trim(ec)!=="";},d_),eb==null?"":eb.$0)),ea==null?0:ea.$0);return c4.filter(function(ec){return!c3.StartsWith(ec,"# 1 ");},c4.map(function(ec){return ec.length<=d$?"":ec.substring(d$);},d_));};J.skipFirstLine=function(d9){var d_;d_=d9.indexOf("\n");return d_<0?"":da.string(d9,{$:1,$0:d_+1},null);};J.append=function(d9,d_){return d9+d_;};J.trim=function(d9){return c3.Trim(d9);};J.contains=function(d9,d_){return d_.indexOf(d9)!=-1;};J.delimitedO=function(d9,d_,d$){var ea,eb,ec,ed,ee;ea=J.splitInTwoO(d9,d$);return ea==null?null:(eb=ea.$0,(ec=eb[0],(ed=J.splitInTwoO(d_,eb[1]),ed==null?null:{$:1,$0:(ee=ed.$0,[ec,ee[0],ee[1]])})));};J.splitInTwoO=function(d9,d_){var d$;d$=d_.indexOf(d9);return d$===-1?null:{$:1,$0:[c["String.Left"](d_,d$),d_.substring(d$+d9.length)]};};J.splitByChar=function(d9,d_){return c3.SplitChars(d_,[d9],0);};K.Guid=function(){cT.$cctor();return cT["|Guid|_|"];};K.Double=function(){cT.$cctor();return cT["|Double|_|"];};K.Single=function(){cT.$cctor();return cT["|Single|_|"];};K.Int64=function(){cT.$cctor();return cT["|Int64|_|"];};K.Int=function(){cT.$cctor();return cT["|Int|_|"];};K.Date=function(){cT.$cctor();return cT["|Date|_|"];};K.parseGuidO=function(){cT.$cctor();return cT.parseGuidO;};K.parseDoubleO=function(){cT.$cctor();return cT.parseDoubleO;};K.parseSingleO=function(){cT.$cctor();return cT.parseSingleO;};K.parseInt64O=function(){cT.$cctor();return cT.parseInt64O;};K.parseIntO=function(){cT.$cctor();return cT.parseIntO;};K.parseDateO=function(){cT.$cctor();return cT.parseDateO;};K.parseDateO2=function(){cT.$cctor();return cT.parseDateO2;};K.tryParseWith=function(d9){function d_(d$,ea){return d$?{$:1,$0:ea}:null;}return function(d$){return d_.apply(null,d9(d$));};};L.PostAndAsyncReply=function(d9,d_,d$){return d9.PostAndAsyncReply(function(ea){return[ea,d_];},d$);};N.applyReply=function(d9,d_){return N.applyReplyA(function(d$){var ea;ea=null;return c7.Delay(function(){return c7.Return(d9(d$));});},d_);};N.applyReplyA=function(d9,d_){return d_.PostAndAsyncReply(function(d$){return function(ea){var eb;eb=null;return c7.Delay(function(){return c7.Bind(d9(ea),function(ec){d$(ec[1]);return c7.Return(ec[0]);});});};},null);};N.apply=function(d9,d_){N.applyA(function(d$){var ea;ea=null;return c7.Delay(function(){return c7.Return(d9(d$));});},d_);};N.applyA=function(d9,d_){d_.mailbox.AddLast(function(d$){var ea;ea=null;return c7.Delay(function(){return d9(d$);});});d_.resume();};N.setState=function(d9,d_){d_.mailbox.AddLast(function(){var d$;d$=null;return c7.Delay(function(){return c7.Return(d9);});});d_.resume();};N.getStateA=function(d9){return d9.PostAndAsyncReply(function(d_){return function(d$){var ea;ea=null;return c7.Delay(function(){d_(d$);return c7.Return(d$);});};},null);};M.defHandler=function(d9,d_){c.print(d9);return d_;};M.stateFull=function(d9,d_){return dc.Start(function(d$){function ea(eb){var ec;ec=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d$.Receive(null),function(ed){return c7.Bind(ed(eb),function(ee){return ea(ee);});});}),function(ed){return ea(d9(ed,eb));});});}return ea(d_);},null);};M.fold=function(d9,d_,d$){return M.foldA(d9,function(ea,eb){var ec;ec=null;return c7.Delay(function(){return c7.Return(d_(ea,eb));});},d$);};M.foldA=function(d9,d_,d$){return dc.Start(function(ea){function eb(ec){var ed;ed=null;return c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(ea.Receive(null),function(ee){return c7.Bind(d_(ec,ee),function(ef){return eb(ef);});});}),function(ee){return eb(d9(ee,ec));});});}return eb(d$);},null);};M.call=function(d9,d_){return M.callA(d9,function(d$){var ea;ea=null;return c7.Delay(function(){return c7.Return(d_(d$));});});};M.callA=function(d9,d_){return M.iterA(d9,function(d$){var ea,eb,ec;ea=d$[0];eb=d$[1];ec=null;return c7.Delay(function(){return c7.Bind(d_(eb),function(ed){ea(ed);return c7.Zero();});});});};M.iter=function(d9,d_){return M.iterA(d9,function(d$){var ea;ea=null;return c7.Delay(function(){d_(d$);return c7.Zero();});});};M.iterA=function(d9,d_){return dc.Start(function(d$){var ea;ea=null;return c7.Delay(function(){return c7.While(function(){return true;},c7.Delay(function(){return c7.TryWith(c7.Delay(function(){return c7.Bind(d$.Receive(null),function(eb){return c7.Bind(d_(eb),function(){return c7.Return(null);});});}),function(eb){d9(eb);return c7.Zero();});}));});},null);};O.New=function(d9,d_,d$,ea){return{useCount:d9,limitCount:d_,resource:d$,configuration:ea};};P=c.ResourceAgent=c1.Class({increment:function(d9){var d_,d$;d_=this;return(this.respawnRightAfter?(d$=d9.configuration,function(ea){return d_.check(d$,ea);}):a.id)(O.New(d9.useCount+1,d9.limitCount,d9.resource,d9.configuration));},check:function(d9,d_){return d_.useCount<d_.limitCount&&this.alive(d_.resource)&&c$.Equals(d9,d_.configuration)?d_:this.respawn(O.New(d_.useCount,d_.limitCount,d_.resource,d9));},respawn:function(d9){this.clean(d9.resource);return O.New(0,d9.limitCount,this.ctor(d9.configuration),d9.configuration);},Respawn:function(){var d9;d9=this;N.apply(function(d_){return d9.respawn(d_);},this.agent);},set_Configuration:function(d9){var d_;d_=this;!c$.Equals(d9,this.get_Configuration())?N.apply(function(d$){return d_.respawn(O.New(d$.useCount,d$.limitCount,d$.resource,d9));},this.agent):void 0;},set_LimitCount:function(d9){N.apply(function(d_){return O.New(d_.useCount,d9,d_.resource,d_.configuration);},this.agent);},get_Configuration:function(){return this.get_State().configuration;},get_LimitCount:function(){return this.get_State().limitCount;},get_State:function(){throw"getState not available in JavaScript";},ProcessA:function(d9,d_){return this.AsyncProcessA(function(d$){var ea;ea=null;return c7.Delay(function(){return c7.Return(d9(d$));});},d_);},AsyncProcessA:function(d9,d_){var d$;d$=this;return N.applyReplyA(function(ea){var eb;eb=null;return c7.Delay(function(){var ec;ec=d$.check(d_==null?ea.configuration:d_.$0,ea);return c7.Bind(d9(ec.resource),function(ed){return c7.Return([d$.increment(ec),ed]);});});},this.agent);},Dispose:function(){try{this.clean(this.get_State().resource);}catch(d9){null;}}},k,P);P.New=c1.Ctor(function(d9,d_,d$,ea,eb,ec){var ed;ed=this;k.New.call(this);this.ctor=d_;this.clean=ea==null?a.ignore:ea.$0;this.alive=eb==null?function(){return true;}:eb.$0;this.respawnRightAfter=ec==null||ec.$0;this.agent=M.stateFull(function(ee,ef){c.print(ee);return ed.respawn(ef);},O.New(0,d9,this.ctor(d$),d$));},P);Q.runSameConfig=function(d9,d_){return t.runReader([d9,d9.get_Configuration()],d_);};Q.run=function(d9,d_,d$){return t.runReader([d9,d_],d$);};Q.ofResourceRm=function(d9){var d_;d_=d9.$0;return{$:0,$0:function(d$){var ea,eb,ec,ed;ea=d$[0];eb=d$[1];ec=ea[1];ed=ea[0];return ed.AsyncProcessA(function(ee){var ef;ef=null;return c7.Delay(function(){return c7.Bind(d_([ee,eb]),function(eg){return c7.Return([eg[0],[ed,ec],eg[2]]);});});},{$:1,$0:ec});}};};Q.createAgentRm=function(d9,d_){return u.op_GreaterGreaterEquals(t.readerFun(function(d$){return d$[0].AsyncProcessA(function(ea){return d9(ea,d_);},{$:1,$0:d$[1]});}),t.ofAsync);};S.New=function(d9,d_,d$,ea){return{cargId:d9,name:d_,unique:d$,build:ea};};T=R.CommArgCollection=c1.Class({get_CommArgs:function(){return this.$0;}},null,T);T.op_Addition=function(d9,d_){return T.addPairs(d_.$0,d9);};T.op_Addition$1=function(d9,d_){return T.addPair(d_[0],d_[1],d9);};T.op_Addition$2=function(d9,d_){return T.addPairs(d_,d9);};U=R.TypedCommArg=c1.Class({get_CommArg:function(){return this.$0;}},null,U);U.op_DivisionAssignment=function(d9,d_){return[d9.$0,q.op_BarGreaterGreater(q.op_BarGreaterGreater(p.getS(),d_),a.id)];};U.op_DivisionAssignment$1=function(d9,d_){return[d9.$0,q.op_BarGreaterGreater(d_,a.id)];};U.op_DivisionAssignment$2=function(d9,d_){return[d9.$0,q.op_BarGreaterGreater(q.rtn(d_),a.id)];};V.getFloatR=function(d9,d_){return d9.$0.build.$==3?{$:0,$0:d_}:c.Error(new d({$:1,$0:"expecting TFloat"}));};V.getBoolR=function(d9,d_){return d9.$0.build.$==2?{$:0,$0:d_}:c.Error(new d({$:1,$0:"expecting TBool"}));};V.getStringR=function(d9,d_){return d9.$0.build.$==1?{$:0,$0:d_}:c.Error(new d({$:1,$0:"expecting TString"}));};V.getIntR=function(d9,d_){return d9.$0.build.$==0?{$:0,$0:d_}:c.Error(new d({$:1,$0:"expecting TInt"}));};V.argumentTRm=function(d9,d_){return V.argumentRm(d9,d_);};V.argumentRm=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){return d$.Bind(d_,function(ea){var eb;return d$.Return((eb=d9.build,eb.$==1?eb.$0(ea):eb.$==2?eb.$0(ea):eb.$==3?eb.$0(ea):eb.$0(ea)));});}));};V.NewFloat=function(d9,d_,d$){return new U({$:0,$0:V.New0(d9,d_,{$:3,$0:d$})});};V.NewBool=function(d9,d_,d$){return new U({$:0,$0:V.New0(d9,d_,{$:2,$0:d$})});};V.NewString=function(d9,d_,d$){return new U({$:0,$0:V.New0(d9,d_,{$:1,$0:d$})});};V.NewInt=function(d9,d_,d$){return new U({$:0,$0:V.New0(d9,d_,{$:0,$0:d$})});};V.New0=function(d9,d_,d$){return S.New({$:0,$0:de.NewGuid()},d9,d_,d$);};T.addPairs=function(d9,d_){return T.append(d_,new T({$:0,$0:d9}));};T.append=function(d9,d_){var d$,ea;function eb(ec,ed){return function(ee){return T.addPair(ec,ed,ee);};}d$=(ea=function(ec){return eb.apply(null,a.id(ec));},function(ec){return function(ed){return(ea(ed))(ec);};});return c4.fold(function(ec,ed){return(d$(ec))(ed);},d9,d_.get_CommArgs());};T.addPair=function(d9,d_,d$){function ea(eb,ec){return!c$.Equals(eb.cargId,d9.cargId);}return new T({$:0,$0:c6.ofSeq(c4.append((d9.unique?function(eb){return c4.filter(function(ec){return ea(ec[0],ec[1]);},eb);}:a.id)(d$.$0),c5.ofArray([[d9,d_]])))});};T.getBoolR=function(d9,d_,d$){var ea,eb;ea=p.run(d$,T.getBoolRm(d9,d_));eb=ea[2];return l.ofOption(function(){return eb;},ea[0]);};T.getBoolRm=function(d9,d_){return q.op_BarGreaterGreater(T.tryGetBoolORm(d_),function(d$){return d$==null?d9:d$.$0;});};T.getFloatRm=function(d9){function d_(){return T.argumentNotFound(d9,void 0);}return q.op_GreaterGreaterEquals(T.tryGetFloatORm(d9),function(d$){return p.ofOption(d_,d$);});};T.getStringRm=function(d9){function d_(){return T.argumentNotFound(d9,void 0);}return q.op_GreaterGreaterEquals(T.tryGetStringORm(d9),function(d$){return p.ofOption(d_,d$);});};T.getIntRm=function(d9){function d_(){return T.argumentNotFound(d9,void 0);}return q.op_GreaterGreaterEquals(T.tryGetIntORm(d9),function(d$){return p.ofOption(d_,d$);});};T.findArgRm=function(d9){function d_(){return T.argumentNotFound(d9,void 0);}return q.op_GreaterGreaterEquals(T.tryFindArgORm(d9),function(d$){return p.ofOption(d_,d$);});};T.tryGetFloatORm=function(d9){function d_(d$,ea){return V.getFloatR(d9,ea);}return q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(T.tryFindArgORm(d9),function(d$){var ea;return d$==null?null:{$:1,$0:(ea=d$.$0,d_(ea[0],ea[1]))};}),l.insertO),p.ofResultRM);};T.tryGetBoolORm=function(d9){function d_(d$,ea){return V.getBoolR(d9,ea);}return q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(T.tryFindArgORm(d9),function(d$){var ea;return d$==null?null:{$:1,$0:(ea=d$.$0,d_(ea[0],ea[1]))};}),l.insertO),p.ofResultRM);};T.tryGetStringORm=function(d9){function d_(d$,ea){return V.getStringR(d9,ea);}return q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(T.tryFindArgORm(d9),function(d$){var ea;return d$==null?null:{$:1,$0:(ea=d$.$0,d_(ea[0],ea[1]))};}),l.insertO),p.ofResultRM);};T.tryGetIntORm=function(d9){function d_(d$,ea){return V.getIntR(d9,ea);}return q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(T.tryFindArgORm(d9),function(d$){var ea;return d$==null?null:{$:1,$0:(ea=d$.$0,d_(ea[0],ea[1]))};}),l.insertO),p.ofResultRM);};T.tryFindArgORm=function(d9){return q.op_GreaterGreaterEquals(p.readerFun(function(d_){var d$,ea;return p.insertO((d$=T.tryFindArgO(d9,d_),d$==null?null:{$:1,$0:(ea=d$.$0,p.insertFst(ea[0],ea[1]))}));}),a.id);};T.tryFindArgO=function(d9,d_){var d$;d$=d9.$0;return c4.tryFind(function(ea){return c$.Equals(ea[0].cargId,d$.cargId);},d_.$0);};T.argumentNotFound=function(d9,d_){return new d({$:1,$0:(function(d$){return function(ea){return d$("argument not found: "+c2.toSafe(ea));};}(a.id))(d9.$0.name)});};T.containsAnyOfRm=function(d9){return p.readerFun(function(d_){function d$(ea,eb){return d9.Contains(ea.cargId);}return c4.exists(function(ea){return d$(ea[0],ea[1]);},d_.$0);});};T.argumentsRm=function(d9){return q.op_GreaterGreaterEquals(T.filterRm(d9),function(d_){return p.traverseSeq(function(d$){return V.argumentTRm(d$[0],d$[1]);},d_);});};T.filterRm=function(d9){return p.readerFun(function(d_){return c4.filter(d9,d_.$0);});};T.existsRm=function(d9){return p.readerFun(function(d_){return c4.exists(d9,d_.$0);});};T.argsRm=function(){return p.readerFun(function(d9){return d9.$0;});};T.contains=function(d9,d_){function d$(ea,eb){return ea.cargId;}return c4.contains(d9.$0.cargId,c4.map(function(ea){return d$(ea[0],ea[1]);},d_.$0));};T.trueForAll=function(d9){return true;};X.NoPrepo={$:13};X.PrepoEndIf={$:10};X.PrepoElse={$:9};Y.LevelZero={$:0};W.getSourceDir=function(d9,d_){var d$,ea,eb,ec,ed,ee,ef,eg,eh,ei;d$=c6.get(d_,0);ea=c6.tryItem(1,d_);return(ec=J.StartsWith("////#cd @\"",d$),ec!=null&&ec.$==1?(eb=ec.$0,true):ea!=null&&ea.$==1&&(ed=J.StartsWith("////#cd @\"",ea.$0),ed!=null&&ed.$==1&&(eb=ed.$0,true)))?(ee=c3.Trim(eb),(eg=J.EndsWith("\"",ee),eg!=null&&eg.$==1?ef=eg.$0:ef=ee,(eh=J.StartsWith("\\",ef),eh!=null&&eh.$==1)?ef:(ei=J.StartsWith("/",ef),ei!=null&&ei.$==1)?ef:c$.Equals(c4.tryItem(1,ef),{$:1,$0:":"})?ef:d9+"/"+ef)):d9;};W.separateDirectives=function(d9){var d_,d$;d_=c6.ofSeq(c4.distinct(c4.choose(function(ea){return ea.$==2?{$:1,$0:ea.$0}:null;},d9)));d$=W.filterPreps(d9);return[c6.ofSeq(c4.distinct(c4.choose(function(ea){return ea.$==1?{$:1,$0:ea.$0}:null;},d$))),d_,c6.ofSeq(c4.distinct(c4.choose(function(ea){return ea.$==6?{$:1,$0:ea.$0}:null;},d$))),c6.ofSeq(c4.distinct(c4.choose(function(ea){return ea.$==5?{$:1,$0:ea.$0}:null;},d$))),c4.tryHead(c4.choose(function(ea){return ea.$==0?{$:1,$0:ea.$0}:null;},d$))];};W.getTopDirectives=function(d9){var d_;d_=c6.ofSeq(c4.filter(function(d$){return d$.$==2||(d$.$==1||(d$.$==6||(d$.$==5||(d$.$==0||(d$.$==7||(d$.$==10||(d$.$==8||d$.$==9)))))));},c4.map(function(d$){return d$[1];},d9)));return[c6.ofSeq(c4.map(function(d$){return d$[0];},d9)),d_];};W.filterPreps=function(d9){var d_;function d$(eb){var ec;ec=c4.contains(c3.Trim(c3.Replace(eb,"!","")),d_);return(c3.StartsWith(c3.Trim(eb),"!")?function(ed){return!ed;}:a.id)(ec);}function ea(eb,ec){var ed;switch(eb.$==0?ec.$==7?(ed=ec.$0,0):ec.$==10?2:7:eb.$==2?ec.$==7?1:ec.$==10?2:ec.$==8?(ed=[ec.$0,eb.$0],4):ec.$==9?(ed=eb.$0,5):8:eb.$==3?ec.$==7?1:ec.$==10?2:ec.$==8?(ed=eb.$0,6):ec.$==9?(ed=eb.$0,6):8:ec.$==7?(ed=ec.$0,0):ec.$==10?2:ec.$==8?(ed=eb.$0,3):ec.$==9?(ed=eb.$0,3):7){case 0:return[null,d$(ed)?{$:1,$0:eb}:{$:2,$0:eb}];case 1:return[null,{$:3,$0:eb}];case 2:return[null,W.prev(eb)];case 3:return[null,{$:3,$0:ed}];case 4:return[null,d$(ed[0])?{$:1,$0:eb}:{$:2,$0:ed[1]}];case 5:return[null,{$:1,$0:ed}];case 6:return[null,{$:3,$0:ed}];case 7:return[{$:1,$0:ec},eb];case 8:return[null,eb];}}d_=c6.ofSeq(c4.distinct(c4.choose(function(eb){return eb.$==2?{$:1,$0:eb.$0}:null;},d9)));return c6.ofSeq(c4.choose(a.id,((((c1.Curried3(c4.mapFold))(ea))(Y.LevelZero))(d9))[0]));};W.prev=function(d9){return d9.$==1?d9.$0:d9.$==2?d9.$0:d9.$==3?d9.$0:Y.LevelZero;};W.isActive=function(d9){return d9.$==1||(d9.$==2?false:d9.$!=3);};W.separatePrepros=function(d9){function d_(eb){var ec;ec=c4.tryLast(c3.SplitStrings(c3.Trim(eb),["\""],1));return ec==null?eb:ec.$0;}function d$(eb){var ec,ed;return c3.Trim((ec=(ed=J.splitInTwoO(" ",c3.Trim(eb)),ed==null?null:{$:1,$0:ed.$0[1]}),ec==null?"":ec.$0));}function ea(eb){return"//"+eb;}return c6.map(function(eb){var ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq;ec=true;return ec&&c3.StartsWith(eb,"#define")?[ea(eb),{$:2,$0:d$(eb)}]:ec&&c3.StartsWith(eb,"#cd")?[ea(eb),{$:0,$0:d_(eb)}]:ec&&c3.StartsWith(eb,"#r")?[ea(eb),{$:1,$0:d_(eb)}]:ec&&c3.StartsWith(eb,"#load")?[ea(eb),{$:3,$0:d_(eb)}]:ec&&c3.StartsWith(eb,"#nowarn")?[ea(eb),{$:5,$0:d_(eb)}]:ec&&c3.StartsWith(c3.Trim(eb),"# ")?[ea(eb),{$:4,$0:d_(eb)}]:ec&&c3.StartsWith(c3.Trim(eb),"#line")?[ea(eb),{$:4,$0:d_(eb)}]:ec&&c3.StartsWith(eb,"#I")?[ea(eb),{$:6,$0:d_(eb)}]:ec&&c3.StartsWith(eb,"#if")?[eb,{$:7,$0:d$(eb)}]:ec&&c3.StartsWith(eb,"#elif")?[eb,{$:8,$0:d$(eb)}]:ec&&c3.StartsWith(eb,"#else")?[eb,X.PrepoElse]:ec&&c3.StartsWith(eb,"#endif")?[eb,X.PrepoEndIf]:ec&&c3.StartsWith(eb,"#light")?[eb,{$:11,$0:false}]:ec&&c3.StartsWith(eb,"#")?[ea(eb),{$:12,$0:eb}]:[eb,X.NoPrepo];},d9);};W.extractDefines=function(d9){var d_;d_=d9.$0;return c3.StartsWith(d_,"////-d:")?da.string(d_,{$:1,$0:4},{$:1,$0:d_.indexOf("\n")-1}):"";};Z=c.SnippetId=c1.Class({get_Id:function(){return this.$0;}},null,Z);Z.get_Empty=function(){return new Z({$:0,$0:"00000000-0000-0000-0000-000000000000"});};_0.New=function(d9,d_,d$,ea,eb,ec,ed){return{snpId:d9,snpName:d_,snpContent:d$,snpParentIdO:ea,snpPredIds:eb,snpProperties:ec,snpModified:ed};};_1.New=function(d9,d_,d$,ea,eb,ec){return{generation:d9,ordered:d_,fetcher:d$,predecesorsCache:ea,reducedCache:eb,prepCode:ec};};_2.codeFsxRm=function(d9){return q.op_BarGreaterGreater(_2.fastCodeRm({$:1,$0:d9},{$:1,$0:d9}),function(d_){return d_[0];});};_2.fastCodeRm=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){return d$.Bind(_2.fastReducedRm(d9,d_),function(ea){return d$.Return(_2.finishCode(ea[0],ea[1],ea[2]));});}));};_2.fastReducedRm=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){return d$.Bind(p.insertO(d9==null?null:{$:1,$0:_2.snippetORm(d9.$0)}),function(ea){return d$.Bind(p.insertO(d_==null?null:{$:1,$0:_2.snippetORm(d_.$0)}),function(eb){var ec,ed,ee,ef;ec=ea==null?null:ea.$0;ed=eb==null?null:eb.$0;return(ed!=null&&ed.$==1?ec!=null&&ec.$==1?(ee=[ec.$0,ed.$0],false):true:true)?d$.ReturnFrom(_2.reducedCodeRm([])):(ef=ee[0],d$.Bind(_2.uniquePredsRm(ee[1]),function(eg){var eh;eh=new dg.New(eg);return d$.Bind((_2.reducedOthersORmMemo())([true,ef.snpId,eh]),function(ei){return d$.Bind((_2.reducedOthersORmMemo())([false,ef.snpId,eh]),function(ej){return d$.Bind(_2.separateCodeRm(ef),function(ek){var el,em,en,eo;el=(em=ei==null?null:{$:1,$0:(function(ep){var eq,er,es;eq=ep[0];er=ep[1];es=ep[2];return function(et){return _2.addSeps(eq,er,es,et[0],et[1],et[2]);};}(ei.$0))(ek)},em==null?ek:em.$0);return d$.Return((en=ej==null?null:{$:1,$0:(eo=ej.$0,_2.addSeps(el[0],el[1],el[2],eo[0],eo[1],eo[2]))},en==null?el:en.$0));});});});}));});});}));};_2.reducedOthersORmMemo=function(){function d9(d_){return d_.reducedCache();}return function(d_){return p.memoizeRm(d9,function(d$){return _2.reducedOthersORm(d$[0],d$[1],d$[2]);},d_);};};_2.reducedOthersORm=function(d9,d_,d$){var ea;ea=p.fusion();return ea.Run(ea.Delay(function(){function eb(ec){return!c$.Equals(ec.snpId,d_)&&d$.Contains(ec.snpId);}return ea.Bind(q.op_BarGreaterGreater(q.op_BarGreaterGreater(_2.orderedRm(),(d9?function(ec){return function(ed){return c4.takeWhile(ec,ed);};}:function(ec){return function(ed){return c4.skipWhile(ec,ed);};})(function(ec){return!c$.Equals(ec.snpId,d_);})),function(ec){return c4.filter(eb,ec);}),function(ec){return c4.isEmpty(ec)?ea.Return(null):ea.Bind(_2.reducedCodeRm(ec),function(ed){return ea.Return({$:1,$0:ed});});});}));};_2.finishCode=function(d9,d_,d$){var ea,eb,ec,ed,ee,ef,eg;ea=W.separateDirectives(d$);eb=ea[2];ec=ea[3];ed=ea[4];ee=ea[0];ef=c3.concat(" ",c4.map(function(eh){return"-d:"+eh;},c4.sort(ea[1])));eg=c5.ofSeq(c4.delay(function(){return c4.append(ef!==""?["////"+ef]:[],c4.delay(function(){return c4.append(ed!=null?[(function(eh){return function(ei){return eh("////#cd @\""+c2.toSafe(ei)+"\"");};}(a.id))(ed.$0)]:[],c4.delay(function(){return c4.append(c4.map(function(eh){return function(ei){return eh("#I @\""+c2.toSafe(ei)+"\"");};}(a.id),eb),c4.delay(function(){return c4.append(c4.map(function(eh){return function(ei){return eh("#r @\""+c2.toSafe(ei)+"\"");};}(a.id),ee),c4.delay(function(){return c4.map(function(eh){return function(ei){return eh("#nowarn \""+c2.toSafe(ei)+"\"");};}(a.id),ec);}));}));}));}));}));return[c3.concat("\n",c4.append(eg,d_)),c6.ofSeq((c4.mapFold(function(eh,ei){var ej;ej=ei[2];return[[[ei[0],ei[1]],[ei[3],eh,eh+ej]],eh+ej];},eg.get_Length(),d9))[0])];};_2.reducedCodeRm=function(d9){var d_;d_=p.fusion();return d_.Run(d_.Delay(function(){return d_.Bind(p.traverseSeq(_2.separateCodeRm,d9),function(d$){var ea;return d_.Return((ea=c4.reduce(function(eb,ec){return(function(ed){var ee,ef,eg;ee=ed[0];ef=ed[1];eg=ed[2];return function(eh){return _2.addSeps(ee,ef,eg,eh[0],eh[1],eh[2]);};}(eb))(ec);},c4.isEmpty(d$)?[[[],[],[]]]:d$),[ea[0],[c3.concat("\n",ea[1])],ea[2]]));});}));};_2.addSeps=function(d9,d_,d$,ea,eb,ec){return[d9.concat(ea),d_.concat(eb),d$.concat(ec)];};_2.separateCodeRm=function(d9){var d_;d_=p.fusion();return d_.Run(d_.Delay(function(){return d_.Bind(_2.indentRm(d9),function(d$){var ea;function eb(ec,ed){return[c3.replicate(d$," ")+ec,ed];}ea=(d$===0?[a.id,""]:[function(ec){return c6.map(function(ed){return eb(ed[0],ed[1]);},ec);},(function(ec){return function(ed){return ec("("+a.String(ed)+")");};}(a.id))(d$)])[0];return d_.Bind(_2.prepareCodeRm(d9),function(ec){var ed,ee;ed=W.getTopDirectives(ea(W.separatePrepros(c3.SplitChars(ec,["\n"],0))));ee=ed[0];return d_.Return([[[d9.snpId,_2.snippetName(d9.snpName,d9.snpContent),c6.length(ee),d$]],ee,ed[1]]);});});}));};_2.ancestorsRm=function(d9){function d_(d$,ea){var eb;eb=p.fusion();return eb.Run(eb.Delay(function(){return eb.Bind(_2.parentORm(d$),function(ec){var ed;return ec==null?eb.Return(ea):(ed=ec.$0,eb.ReturnFrom(d_(ed,new c5.T({$:1,$0:ed,$1:ea}))));});}));}return d_(d9,c5.T.Empty);};_2.levelRm=function(d9){function d_(d$,ea){var eb;eb=p.fusion();return eb.Run(eb.Delay(function(){return eb.Bind(_2.parentORm(d$),function(ec){return ec!=null&&ec.$==1?eb.ReturnFrom(d_(ec.$0,ea+1)):eb.Return(ea);});}));}return d_(d9,0);};_2.indentRm=function(d9){function d_(d$){var ea;ea=p.fusion();return ea.Run(ea.Delay(function(){var eb,ec,ed,ee;eb=(ec=_2.propertyPairO("IndentChildren",d$),ec!=null&&ec.$==1?[(K.parseIntO())(ec.$0[0]),(K.parseIntO())(ec.$0[1])]:[null,null]);ed=eb[1];ee=eb[0];return ea.Bind(_2.parentORm(d$),function(ef){return ef==null?ea.Return([0,[ee==null?4:ee.$0,ed==null?4:ed.$0]]):ea.Bind(d_(ef.$0),function(eg){var eh,ei;eh=eg[1][1];ei=eg[1][0];return ea.Return([ei,[ei+(ee==null?eh:ee.$0),ed==null?eh:ed.$0]]);});});}));}return q.op_BarGreaterGreater(d_(d9),function(d$){return d$[0];});};_2.propertyHierORm=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){var ea;ea=_2.propertyO(d9,d_);return ea==null?d$.Bind(_2.parentORm(d_),function(eb){return eb==null?d$.Return(null):d$.Bind(_2.propertyHierORm(d9,eb.$0),function(ec){var ed,ee,ef;return d$.Return(ec==null?null:{$:1,$0:(ed=ec.$0,(ee=ed[0],(ef=ed[1][1],[ee,[ef,ef]])))});});}):d$.Return({$:1,$0:[d_,_2.propertyPair(ea.$0)]});}));};_2.modifiedRecRm=function(d9){var d_;d_=p.fusion();return d_.Run(d_.Delay(function(){return d_.Bind(_2.modifiedRm(d9),function(d$){return d$?d_.Return(true):d_.Bind(_2.uniquePredsRm(d9),function(ea){return d_.Bind(p.sequenceSeq(c4.map(_2.snippetORm,ea)),function(eb){return d_.Bind(p.sequenceSeq(c4.map(_2.modifiedRm,c4.choose(a.id,eb))),function(ec){return d_.Return(c4.contains(true,ec));});});});});}));};_2.predsGenerationRm=function(d9){var d_;d_=p.fusion();return d_.Run(d_.Delay(function(){return d_.Bind(q.op_GreaterGreaterEquals(_2.uniquePredsRm(d9),function(d$){return p.traverseSeq(_2.snippetRm,d$);}),function(d$){return d_.Return(c4.max(c4.map(function(ea){return ea.snpModified;},d$)));});}));};_2.uniquePredsRm=function(d9){return(_2.predsLRmMemo())(d9.snpId);};_2.predsLRmMemo=function(){function d9(d_){return d_.predecesorsCache();}return function(d_){return p.memoizeRm(d9,_2.predsLRm,d_);};};_2.predsLRm=function(d9){var d_;d_=p.fusion();return d_.Run(d_.Delay(function(){var d$,ea;d$=c5.ofArray([d9]);ea=c5.T.Empty;return d_.Combine(d_.While(function(){return!(d$.$==0);},d_.Delay(function(){var eb,ec;return d$.$==1?(eb=d$.$1,(ec=d$.$0,c5.contains(ec,ea)?(d$=eb,d_.Zero()):d_.Bind(_2.snippetORm(ec),function(ed){var ee,ef;d$=c5.append(eb,(ee=ed==null?null:{$:1,$0:(ef=ed.$0,c5.append(c5.ofSeq(ef.snpPredIds),dh.toList(ef.snpParentIdO)))},ee==null?c5.T.Empty:ee.$0));ea=new c5.T({$:1,$0:ec,$1:ea});return d_.Zero();}))):d_.Zero();})),d_.Delay(function(){return d_.Return(ea);}));}));};_2.snippetFromRefORm=function(d9){return d9.$==1?_2.snippetFromPathORm(d9.$0):_2.snippetORm(d9.$0);};_2.snippetFromPathORm=function(d9){var d_;d_=p.fusion();return d_.Run(d_.Delay(function(){return d_.Bind(_2.orderedRm(),function(d$){function ea(eb,ec){return function(ed){return eb.length===0?[null,[[],ec]]:_2.snippetName(ed.snpName,ed.snpContent)!==c6.get(eb,0)||!c$.Equals(ed.snpParentIdO,ec)?[null,[eb,ec]]:eb.length>1?[null,[da.array(eb,{$:1,$0:1},null),{$:1,$0:ed.snpId}]]:[{$:1,$0:ed},[[],ec]];};}return d_.Return(c4.tryHead(c4.choose(a.id,(c4.mapFold(function(eb,ec){return(function(ed){return ea(ed[0],ed[1]);}(eb))(ec);},[d9,null],d$))[0])));});}));};_2.pathRm=function(d9){var d_;function d$(ea){return q.op_BarGreaterGreater(_2.pathRm(ea.snpId),function(eb){return new c5.T({$:1,$0:ea.snpId,$1:eb});});}return q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(_2.snippetORm(d9),function(ea){return ea==null?null:{$:1,$0:_2.parentORm(ea.$0)};}),p.insertO),function(ea){return ea==null?null:a.id(ea.$0);}),function(ea){return ea==null?null:{$:1,$0:d$(ea.$0)};}),p.insertO),(d_=c5.T.Empty,function(ea){return ea==null?d_:ea.$0;}));};_2.snippetNameRm=function(d9){return q.op_BarGreaterGreater(_2.snippetRm(d9),function(d_){return _2.snippetName(d_.snpName,d_.snpContent);});};_2.snippetRm=function(d9){return p.absorbO(function(){return new d({$:1,$0:(function(d_){return function(d$){return d_("Snippet not found "+cW.p(d$));};}(a.id))(d9)});},_2.snippetORm(d9));};_2.prepareCodeRm=function(d9){return p.readerFun(function(d_){return d_.prepCode(d9);});};_2.orderedRm=function(){return p.readerFun(function(d9){return d9.ordered;});};_2.childrenRm=function(d9){return p.readerFun(function(d_){return c4.filter(function(d$){return c$.Equals(d$.snpParentIdO,{$:1,$0:d9});},d_.ordered);});};_2.modifiedRm=function(d9){return p.readerFun(function(d_){return d9.snpModified>d_.generation;});};_2.maxGenerationRm=function(){return p.readerFun(function(d9){return c4.max(c4.map(function(d_){return d_.snpModified;},d9.ordered));});};_2.predecessorsRm=function(d9){return p.readerFun(function(d_){return c4.choose(d_.fetcher,d9.snpPredIds);});};_2.parentORm=function(d9){return p.readerFun(function(d_){var d$;d$=d9.snpParentIdO;return d$==null?null:d_.fetcher(d$.$0);});};_2.snippetORm=function(d9){return p.readerFun(function(d_){return d_.fetcher(d9);});};_2.propertyPairO=function(d9,d_){var d$;d$=_2.propertyO(d9,d_);return d$==null?null:{$:1,$0:_2.propertyPair(d$.$0)};};_2.propertyPair=function(d9){var d_,d$,ea;d_=c3.SplitStrings(d9,[_2.tieFighter()],0);return[c6.get(d_,0),(d$=c6.tryItem(1,d_),(ea=c6.get(d_,0),d$==null?ea:d$.$0))];};_2.tieFighter=function(){cT.$cctor();return cT.tieFighter;};_2.propertyO=function(d9,d_){function d$(ea,eb){return ea===d9?{$:1,$0:eb}:null;}return c6.tryPick(function(ea){return d$(ea[0],ea[1]);},d_.snpProperties);};_2.nameSanitized=function(d9){var d_,d$;d_=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return c3.Filter(function(ea){return!c6.contains(ea,d_);},d9.snpName)+" "+(d$=d9.snpId.get_Id(),a.String(d$));};_2.snippetName=function(d9,d_){var d$;return d9!==""?d9:(d$=c4.tryHead(c4.filter(function(ea){return!(c3.StartsWith(ea,"#")||c3.StartsWith(ea,"[<")||c3.StartsWith(ea,"//"));},c4.map(c3.Trim,c3.SplitChars(d_,["\n"],1)))),d$==null?"<empty>":d$.$0);};_2.defaultSnippet=function(){cT.$cctor();return cT.defaultSnippet;};_2.New=function(d9,d_,d$){return _0.New(new Z({$:0,$0:de.NewGuid()}),d9,d_,d$,new dg.New$1(null),[],_2.getNextModified());};_2.getNextModified=function(){return di.now();};_3.Hole={$:0};_5.New=function(d9,d_,d$,ea,eb,ec,ed){return{id:d9,isExpandedRm:d_,canHaveChildrenRm:d$,childrenRm:ea,pathRm:eb,parentORm:ec,newChildrenRm:ed};};_4.removeNodeOutdentChildren=function(d9,d_){var d$;function ea(eb,ec){return q.op_GreaterGreaterEquals(eb,function(ed){return _4.outdentNode(ec,ed);});}return q.op_GreaterGreaterEquals(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(d9.childrenRm(),c6.ofSeq),(d$=q.rtn(d_),function(eb){return c4.fold(ea,d$,eb);})),function(eb){return _4.removeNode(d9,eb);});};_4.outdentNode=function(d9,d_){var d$;function ea(eb){return _4.moveToSibling(true,d9,eb,d_);}return q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(d9.parentORm(d_),function(eb){return eb==null?null:{$:1,$0:ea(eb.$0)};}),(d$=q.rtn(d_),function(eb){return eb==null?d$:eb.$0;}));};_4.indentNode=function(d9,d_){var d$;function ea(ec){return!c$.Equals(d9.id(),ec.id());}function eb(ec,ed){return q.op_GreaterGreaterEquals(ed.canHaveChildrenRm(),function(ee){return ee?q.rtn({$:1,$0:ed}):ec;});}return q.op_GreaterGreaterEquals(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(d9.parentORm(d_),function(ec){return ec!=null&&ec.$==1?q.op_BarGreaterGreater(ec.$0.childrenRm(),function(ed){var ee;ee=c6.ofSeq(ed);return ee;}):q.rtn(d_);}),function(ec){return c4.takeWhile(ea,ec);}),(d$=q.rtn(null),function(ec){return c4.fold(eb,d$,ec);})),function(ec){var ed;return ec!=null&&ec.$==1?(ed=ec.$0,q.op_GreaterGreaterEquals(_4.removeNode(d9,d_),function(ee){return _4.addChild(true,d9,ed,ee);})):q.rtn(d_);});};_4.addChild=function(d9,d_,d$,ea){var eb;eb=p.fusion();return eb.Run(eb.Delay(function(){return eb.Bind(d$.pathRm(),function(ec){function ed(ee){var ef,eg;return c$.Equals(ee.id(),d$.id())?d9?q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater(ee.childrenRm(),c6.ofSeq),(ef=c5.ofArray([d_]),function(eh){return c4.append(eh,ef);})),c6.ofSeq),ee.newChildrenRm):q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater(ee.childrenRm(),c6.ofSeq),(eg=c5.ofArray([d_]),function(eh){return c4.append(eg,eh);})),c6.ofSeq),ee.newChildrenRm):c5.contains(ee.id(),ec)?q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(ee.childrenRm(),c6.ofSeq),function(eh){return c4.map(ed,eh);}),p.sequenceSeq),c6.ofSeq),ee.newChildrenRm):q.rtn(ee);}return eb.ReturnFrom(p.sequenceSeq(c4.map(ed,ea)));});}));};_4.moveToSibling2=function(d9,d_,d$,ea){var eb;eb=p.fusion();return eb.Run(eb.Delay(function(){return eb.Bind(_4.tryFindId(d_,ea),function(ec){var ed;return ec!=null&&ec.$==1?(ed=ec.$0,eb.Bind(_4.tryFindId(d$,ea),function(ee){return ee!=null&&ee.$==1?eb.ReturnFrom(_4.moveToSibling(d9,ed,ee.$0,ea)):eb.Return(ea);})):eb.Return(ea);});}));};_4.moveToSibling=function(d9,d_,d$,ea){return q.op_GreaterGreaterEquals(_4.removeNode(d_,ea),function(eb){return _4.addSibling(d9,d_,d$,eb);});};_4.tryFindId=function(d9,d_){return _4.tryFind(function(d$){return c$.Equals(d$.id(),d9);},d_);};_4.tryFind=function(d9,d_){function d$(ea,eb){return q.op_GreaterGreaterEquals(ea,function(ec){var ed;return ec==null?d9(eb)?q.rtn({$:1,$0:eb}):q.op_GreaterGreaterEquals(eb.childrenRm(),(ed=q.rtn(null),function(ee){return c4.fold(d$,ed,ee);})):q.rtn({$:1,$0:ec.$0});});}return c4.fold(d$,q.rtn(null),d_);};_4.addSibling=function(d9,d_,d$,ea){function eb(ec){return c$.Equals(ec.id(),d$.id());}return q.op_GreaterGreaterEquals(d$.pathRm(),function(ec){var ed,ee;function ef(eg){return c$.Equals(eg.id(),ee)?q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(eg.childrenRm(),c6.ofSeq),function(eh){return _4.addToParent(d9,eb,d_,eg,eh);}):c5.contains(eg.id(),ed)?q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(eg.childrenRm(),c6.ofSeq),function(eh){return c4.map(ef,eh);}),p.sequenceSeq),c6.ofSeq),eg.newChildrenRm):q.rtn(eg);}return ec.$==1?(ed=ec.$1,(ee=ec.$0,p.sequenceSeq(c4.map(ef,ea)))):q.rtn(_4.addNodeToSeq(d9,eb,d_,ea));});};_4.addToParent=function(d9,d_,d$,ea,eb){return ea.newChildrenRm(c6.ofSeq(_4.addNodeToSeq(d9,d_,d$,eb)));};_4.addNodeToSeq=function(d9,d_,d$,ea){return c5.ofSeq(c4.delay(function(){return c4.collect(function(eb){return d_(eb)?d9?c4.append([eb],c4.delay(function(){return[d$];})):c4.append([d$],c4.delay(function(){return[eb];})):[eb];},ea);}));};_4.removeNodes=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){function ea(eb,ec){var ed;ed=p.fusion();return ed.Run(ed.Delay(function(){return ed.Bind(eb,function(ee){var ef,eg;ef=ee[1];eg=ee[0];return ed.Bind(q.op_BarGreaterGreater(ec.childrenRm(),c6.ofSeq),function(eh){return ed.Bind(c4.fold(ea,q.rtn([c5.T.Empty,ef]),eh),function(ei){var ej,ek;ej=ei[1];ek=ei[0];return d9(ec)?ed.Return([eg,c5.append(ek,ej)]):ed.Bind(ec.newChildrenRm(c6.ofSeq(c4.rev(ek))),function(el){return ed.Return([new c5.T({$:1,$0:el,$1:eg}),ej]);});});});});}));}return d$.Bind(c4.fold(ea,q.rtn([c5.T.Empty,c5.T.Empty]),d_),function(eb){return d$.Return(c5.rev(c5.append(eb[1],eb[0])));});}));};_4.removeNode=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){return d$.Bind(d9.pathRm(),function(ea){function eb(ec){var ed;ed=p.fusion();return ed.Run(ed.Delay(function(){return c$.Equals(ec.id(),d9.id())?ed.Return(null):c5.contains(ec.id(),ea)?ed.ReturnFrom(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(q.op_BarGreaterGreater(ec.childrenRm(),c6.ofSeq),function(ee){return c4.map(eb,ee);}),p.sequenceSeq),function(ee){return c4.choose(a.id,ee);}),c6.ofSeq),ec.newChildrenRm),function(ee){return{$:1,$0:ee};})):ed.Return({$:1,$0:ec});}));}return d$.ReturnFrom(q.op_BarGreaterGreater(p.sequenceSeq(c4.map(eb,d_)),function(ec){return c4.choose(a.id,ec);}));});}));};_4.listNodes=function(d9,d_){return q.op_BarGreaterGreater(p.sequenceSeq(c4.map(function(d$){return q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(d$.isExpandedRm(),function(ea){var eb;return ea?q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(d$.childrenRm(),c6.ofSeq),(eb=d9+1,function(ec){return _4.listNodes(eb,ec);})):q.rtn([]);}),function(ea){return c4.append([[d$,d9]],ea);});},d_)),function(d$){return c4.collect(a.id,d$);});};c["String.get_toUnderscore"]=function(d9,d_){return c6.ofSeq(c4.collect(a.id,c4.mapi(function(d$,ea){return d$>0&&dj.IsUpper(ea)?c5.ofArray(["_",ea]):c5.ofArray([ea]);},d9))).join("");};c["String.Right"]=function(d9,d_){var d$,ea;return c["String.Substring2"](d9,(d$=0,(ea=d9.length-d_,c$.Compare(d$,ea)===1?d$:ea)),d9.length);};c["String.Left"]=function(d9,d_){return d_<0?c["String.Substring2"](d9,0,d9.length+d_):c["String.Substring2"](d9,0,d_);};c["String.Substring2"]=function(d9,d_,d$){var ea,eb;while(true){if(d$<=0)return"";else if(d_>=d9.length)return"";else if(d_<0){ea=d_;d_=0;d$=d$+ea;}else return c3.Substring(d9,d_,(eb=d9.length-d_,c$.Compare(d$,eb)===-1?d$:eb));}};c.delayed=function(d9,d_){var d$;d$=[null];return function(ea){var eb,ec;eb=d$[0];eb==null?void 0:eb.$0.Cancel$1();d$[0]={$:1,$0:new dk.New()};c7.Start((ec=null,c7.Delay(function(){return c7.Bind(c7.Sleep(d9),function(){d_(ea);return c7.Zero();});})),{$:1,$0:d$[0].$0});};};c.print=function(d9){if(typeof d9=="string")((function(d_){return function(d$){return d_(c2.toSafe(d$));};}(function(d_){dl.log(d_);}))(d9));else((function(d_){return function(d$){return d_(c2.prettyPrint(d$));};}(function(d_){dl.log(d_);}))(d9));};c.Error=function(d9){return{$:1,$0:d9};};_7.ofAsyncResult=function(d9){return new a.Promise(function(d_,d$){c7.StartWithContinuations(d9,function(ea){if(ea.$==1)d$((function(eb){return function(ec){return eb(c2.prettyPrint(ec));};}(a.id))(ea.$0));else d_(ea.$0);},function(ea){d$(ea);},function(ea){d$(ea);},null);});};_8.ofAsyncResultM=function(d9){return new a.Promise(function(d_,d$){c7.StartWithContinuations(d9,function(ea){var eb;eb=f.OkM(ea);eb.$==1?d$(d.summarized(eb.$0)):d_(eb.$0[0]);},function(ea){d$(ea);},function(ea){d$(ea);},null);});};_9.sequenceListApp=function(d9){return _9.traverseListApp(a.id,d9);};_9.traverseListApp=function(d9,d_){function d$(ea,eb){return new c5.T({$:1,$0:ea,$1:eb});}return c5.foldBack(function(ea,eb){return _9.op_LessMultiplyGreater(_9.op_LessMultiplyGreater(_9.rtn(function(ec){return function(ed){return d$(ec,ed);};}),d9(ea)),eb);},d_,_9.rtn(c5.T.Empty));};_9.op_LessMultiplyGreater=function(d9,d_){return dn.Apply(d9,d_);};_9.sequenceSeq=function(d9){return _9.traverseSeq(a.id,d9);};_9.traverseSeq=function(d9,d_){return _9.map(a.id,c6.foldBack(function(d$,ea){return _9.op_GreaterGreaterEquals(d9(d$),function(eb){return _9.op_GreaterGreaterEquals(ea,function(ec){return _9.rtn(new c5.T({$:1,$0:eb,$1:ec}));});});},c6.ofSeq(d_),_9.rtn(c5.T.Empty)));};_9.op_GreaterGreaterEquals=function(d9,d_){return _9.bind(d_,d9);};_9.rtn=function(d9){return dn.Const(d9);};_9.map=function(d9,d_){return dn.Map(d9,d_);};_9.bind=function(d9,d_){return dn.Bind(d9,d_);};_9.insertWO=function(d9){return d9==null?dn.Const(null):dn.Map(function(d_){return{$:1,$0:d_};},d9.$0);};_.newPojoOpt=function(d9){function d_(d$,ea){return ea==null?null:{$:1,$0:[d$,ea.$0]};}return _.newPojo(c4.choose(function(d$){return d_(d$[0],d$[1]);},d9));};_.newPojo=function(d9){var d_,d$;function ea(ec,ed){return function(ee){return _.addProp(ec,ed,ee);};}function eb(ec){}d_={};c4.iter((d$=function(ec){return(function(ed){return ea(ed[0],ed[1]);}(ec))(d_);},function(ec){return eb(d$(ec));}),d9);return d_;};_.addProp=function(d9,d_,d$){d$[d9]=d_;return d$;};ba.New=function(d9,d_){return{line:d9,col:d_};};bb.Hint={$:3};bb.Info={$:2};bb.Warning={$:1};bb.Error={$:0};bc.New=function(d9,d_,d$,ea){return{startP:d9,endP:d_,severity:d$,message:ea};};bd.New=function(d9,d_,d$,ea){return{kind:d9,label:d_,detail:d$,replace:ea};};be.New=function(d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei){return{generateDoc:d9,getValue:d_,setValue:d$,setDisabled:ea,showAnnotations:eb,posFromIndex:ec,indexFromPos:ed,getWordAt:ee,getSelectionText:ef,getUri:eg,setUri:eh,hookOnChange:ei};};bf.New=function(d9,d_,d$,ea,eb,ec,ed,ee,ef,eg){return{"var":d9,disabled:d_,annotations:d$,onChange:ea,onRender:eb,autoCompletion:ec,toolTip:ed,declaration:ee,editorO:ef,editorHook:eg};};$.generateDoc=function(d9){var d_,d$,ea;d_=(d$=(ea=d9.onChange,ea==null?null:{$:1,$0:ea.$0(d9)}),d$==null?a.ignore:d$.$0);return(d9.editorHook.generateDoc(d9))(function(eb){d9.editorO={$:1,$0:eb};$.bindVarEditor(d9.editorHook.hookOnChange,d9.editorHook.getValue,d9.editorHook.setValue,d_,d9["var"]);dn.Sink(d9.editorHook.showAnnotations,d9.annotations);dn.Sink(d9.editorHook.setDisabled,d9.disabled);d9.onRender(d9);});};$.bindVarEditor=function(d9,d_,d$,ea,eb){var ec,ed;ec=[0];ed=[0];d9(function(){var ee;ee=d_();!c$.Equals(eb.Get(),ee)?(ec[0]=ec[0]+1,eb.Set(ee),ea(ee)):void 0;});dn.Sink(function(){if(ec[0]>ed[0])ed[0]=ec[0];else if(!c$.Equals(d_(),eb.Get()))d$(eb.Get());},eb.get_View());};$.newVarO=function(d9,d_){var d$;d$=$.newVar(d9,_do.Lens(d_,function(ea){return ea==null?"":ea.$0;},function(ea,eb){return ea==null?null:{$:1,$0:eb};}));return $.disabled(dn.Map(function(ea){return ea==null;},d_.get_View()),d$);};$.newText=function(d9,d_){return $.newVar(d9,_do.Create$1(d_));};$.newVar=function(d9,d_){return bf.New(d_,dn.Const(false),dn.Const([]),null,a.ignore,null,null,null,null,d9);};$["var"]=function(d9){return d9["var"];};$.disabled=function(d9,d_){return bf.New(d_["var"],d9,d_.annotations,d_.onChange,d_.onRender,d_.autoCompletion,d_.toolTip,d_.declaration,d_.editorO,d_.editorHook);};$.onRender=function(d9,d_){return bf.New(d_["var"],d_.disabled,d_.annotations,d_.onChange,d9,d_.autoCompletion,d_.toolTip,d_.declaration,d_.editorO,d_.editorHook);};$.onChange=function(d9,d_){return bf.New(d_["var"],d_.disabled,d_.annotations,d9,d_.onRender,d_.autoCompletion,d_.toolTip,d_.declaration,d_.editorO,d_.editorHook);};$.setVar=function(d9,d_){return bf.New(d9,d_.disabled,d_.annotations,d_.onChange,d_.onRender,d_.autoCompletion,d_.toolTip,d_.declaration,d_.editorO,d_.editorHook);};bg.serLMdField=function(d9,d_,d$,ea){var eb;function ec(ed,ee){d_(ed).Set(eb[1](ee));return ed;}eb=bg.serSeq(d$,ea);return[d9,function(ed){var ee;ee=(d_(ed))["var"].Get();return eb[0](ee);},function(ed){return function(ee){return ec(ed,ee);};}];};bg.serVarField=function(d9,d_,d$,ea){var eb;function ec(ed){return ed.Get();}return[d9,(eb=function(ed){return ec(d_(ed));},function(ed){return d$(eb(ed));}),function(ed){return function(ee){_do.Set(d_(ed),ea(ee));return ed;};}];};bg.serMap=function(d9,d_,d$,ea){var eb,ec,ed,ee,ef;function eg(ei){return[ei.K,ei.V];}function eh(ei){return new dp.New(ei);}eb=(ec=bg.serDup(d9,d_,d$,ea),bg.serSeq(ec[0],ec[1]));return[(ed=function(ei){return c4.map(eg,ei);},(ee=eb[0],function(ei){return ee(ed(ei));})),(ef=eb[1],function(ei){return eh(ef(ei));})];};bg.serDup=function(d9,d_,d$,ea){var eb,ec,ed;function ee(eg){return[eb[1](null),ec[1](null)];}function ef(eg){return[eb[1](c6.get(eg,0)),ec[1](c6.get(eg,1))];}eb=[d9,d_];ec=[d$,ea];return[function(eg){return(((c1.Curried3(function(eh,ei,ej){return eh("["+c2.toSafe(ei)+", "+c2.toSafe(ej)+"]");}))(a.id))(eb[0](eg[0])))(ec[0](eg[1]));},(ed=function(eg){return bg.ifUndefF(ee,ef,eg);},function(eg){return ed(a.id(eg));})];};bg.serOpt=function(d9,d_){var d$,ea,eb,ec,ed,ee;function ef(ei){return ei==null?"null":ei.$0;}function eg(ei){return null;}function eh(ei){return{$:1,$0:ei};}d$=[d9,d_];return[(ea=(eb=d$[0],function(ei){return ei==null?null:{$:1,$0:eb(ei.$0)};}),function(ei){return ef(ea(ei));}),(ec=(ed=(ee=d$[1],function(ei){return eh(ee(ei));}),function(ei){return bg.ifUndefF(eg,ed,ei);}),function(ei){return ec(a.id(ei));})];};bg.serSet=function(d9,d_){var d$,ea,eb,ec,ed,ee,ef;function eg(ei){return[];}function eh(ei){return new dg.New(ei);}d$=[d9,d_];return[(ea=(eb=d$[0],function(ei){return new dg.New$1(dq.OfSeq(c4.map(eb,ei)));}),function(ei){return bg.sprintA(ea(ei));}),(ec=(ed=(ee=(ef=d$[1],function(ei){return c4.map(ef,ei);}),function(ei){return bg.ifUndefF(eg,ee,ei);}),function(ei){return ed(a.id(ei));}),function(ei){return eh(ec(ei));})];};bg.serLst=function(d9,d_){var d$,ea,eb,ec,ed,ee,ef;function eg(eh){return[];}d$=[d9,d_];return[(ea=(eb=d$[0],function(eh){return c5.map(eb,eh);}),function(eh){return bg.sprintA(ea(eh));}),(ec=(ed=(ee=(ef=d$[1],function(eh){return c4.map(ef,eh);}),function(eh){return bg.ifUndefF(eg,ee,eh);}),function(eh){return ed(a.id(eh));}),function(eh){return c5.ofSeq(ec(eh));})];};bg.serArr=function(d9,d_){var d$,ea,eb,ec,ed,ee,ef;function eg(eh){return[];}d$=[d9,d_];return[(ea=(eb=d$[0],function(eh){return c6.map(eb,eh);}),function(eh){return bg.sprintA(ea(eh));}),(ec=(ed=(ee=(ef=d$[1],function(eh){return c4.map(ef,eh);}),function(eh){return bg.ifUndefF(eg,ee,eh);}),function(eh){return ed(a.id(eh));}),function(eh){return c6.ofSeq(ec(eh));})];};bg.serSeq=function(d9,d_){var d$,ea,eb,ec,ed,ee;function ef(eg){return[];}d$=[d9,d_];return[(ea=(eb=d$[0],function(eg){return c4.map(eb,eg);}),function(eg){return bg.sprintA(ea(eg));}),(ec=(ed=(ee=d$[1],function(eg){return c4.map(ee,eg);}),function(eg){return bg.ifUndefF(ef,ed,eg);}),function(eg){return ec(a.id(eg));})];};bg.serFieldO=function(d9,d_,d$,ea,eb){function ec(ed){return ed==null?null:{$:1,$0:ea(ed.$0)};}return[d9,function(ed){return ec(d_(ed));},function(ed){return function(ee){return d$(!ee?null:{$:1,$0:eb(ee)},ed);};}];};bg.serField=function(d9,d_,d$,ea,eb){var ec;function ed(ee){return{$:1,$0:ee};}return[d9,(ec=function(ee){return ea(d_(ee));},function(ee){return ed(ec(ee));}),function(ee){return function(ef){return d$(eb(ef),ee);};}];};bg.serDate=function(){cT.$cctor();return cT.serDate;};bg.serString=function(){cT.$cctor();return cT.serString;};bg.serBool=function(){cT.$cctor();return cT.serBool;};bg.serInt=function(){cT.$cctor();return cT.serInt;};bg.serFloat=function(){cT.$cctor();return cT.serFloat;};bg.sprintA=function(d9){var d_;d_=c3.concat(", ",d9);return(function(d$){return function(ea){return d$("["+c2.toSafe(ea)+"]");};}(a.id))(d_);};bg.deserGuid=function(){cT.$cctor();return cT.deserGuid;};bg.Exists=function(d9,d_){return!d_[d9]?null:{$:1,$0:d_[d9]};};bg.ifUndefF=function(d9,d_,d$){return!d$?d9(d$):d_(d$);};bg.ifUndef=function(d9,d_){return!d_?d9:d_;};bh.Identifier=function(d9){var d_,d$,ea;return(d$=_6.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",d9),d$!=null&&d$.$==1&&((ea=d$.$0,!c$.Equals(ea,null)&&ea.length===1)&&(d_=c6.get(d$.$0,0),true)))?{$:1,$0:d_}:null;};bh.getEndWord=function(d9,d_){var d$,ea;d$=_6.REGEX$1("^([a-zA-Z_]\\w*)","g",d9.substring(d_));return d$!=null&&d$.$==1?(ea=d$.$0,!c$.Equals(ea,null)&&ea.length===1)?c6.get(d$.$0,0):"":"";};bh.getStartWord=function(d9,d_){var d$,ea;d$=_6.REGEX$1("([a-zA-Z_]\\w*)$","g",c3.Substring(d9,0,d_));return d$!=null&&d$.$==1?(ea=d$.$0,!c$.Equals(ea,null)&&ea.length===1)?c6.get(d$.$0,0):"":"";};bj=bi.Hoverable=c1.Class({Content:function(d9){return d9.on("mouseenter",function(){return dr.AddClass(d9.elt,"hovering");}).on("mouseleave",function(){return dr.RemoveClass(d9.elt,"hovering");});},Content$1:function(d9){return ds.Element("div",this.get_Attributes(),d9);},get_Attributes:function(){var d9,d_;d9=this;return c5.ofArray([(d_=dn.Const("hovering"),dt.DynamicPred("class",this.hover.get_View(),d_)),du.HandlerImpl("mouseenter",function(){return function(){return d9.hover.Set(true);};}),du.HandlerImpl("mouseleave",function(){return function(){return d9.hover.Set(false);};})]);}},null,bj);bj.get_Demo=function(){return bj.New$1().Content(ds.Element("div",[du.Create("style","flex-flow: column;")],[ds.TextNode("Hover over me!")]));};bj.Content$2789$81=c1.Curried3(function(d9,d_,d$){return dr.RemoveClass(d9.elt,"hovering");});bj.get_Attributes$2785$69=c1.Curried3(function(d9,d_,d$){return d9.hover.Set(false);});bj.get_Attributes$2784$69=c1.Curried3(function(d9,d_,d$){return d9.hover.Set(true);});bj.New$1=function(){return bj.New(_do.Create$1(false));};bj.New=function(d9){return new bj({hover:d9});};bi.hoverable=function(d9){return bj.New$1().Content(d9);};bk.addResizeObserver=function(d9,d_){var d$,ea,eb,ec;try{d$=!(!a.ResizeObserver);}catch(ed){d$=false;}if(d$){ea=new a.ResizeObserver(d9);bk.set_observers(new c5.T({$:1,$0:ea,$1:bk.observers()}));ea.observe(d_);}else{eb=bk.dimsChanged(d_);c7.Start((ec=null,c7.Delay(function(){return c7.While(function(){return d_.isConnected;},c7.Delay(function(){return c7.Bind(c7.Sleep(110),function(){return eb()?(d9(),c7.Zero()):c7.Zero();});}));})),null);}};bk.dimsChanged=function(d9){var d_;d_=[d9.getBoundingClientRect()];return function(){var d$;d$=d9.getBoundingClientRect();return c$.Equals(bk.domRect2Tuple(d_[0]),bk.domRect2Tuple(d$))?false:(d_[0]=d$,true);};};bk.domRect2Tuple=function(d9){return[d9.top,d9.left,d9.width,d9.height];};bk.observers=function(){cT.$cctor();return cT.observers;};bk.set_observers=function(d9){cT.$cctor();cT.observers=d9;};bn=bm.WcTabStripT=c1.Class({connectedCallback:function(){var d9,d_,d$,ea;function eb(){var ec,ed,ee;ed=!d_.hasAttribute("bottom");ee=c5.ofSeq(c4.delay(function(){return c4.collect(function(ef){var eg;eg=d_.childNodes[ef-1];return c$.Equals(eg.nodeType,dv.ELEMENT_NODE)?[[eg.hasAttribute("tabname")?eg.getAttribute("tabname"):(function(eh){return function(ei){return eh("Tab "+a.String(ei));};}(a.id))(ef),eg]]:[];},c_.range(1,d_.childNodes.length));}));while(ea.childNodes.length>0)ea.removeChild(ea.lastChild);ec=bm.tabStrip(d9.selected,ed,true,ee,ds.Element("slot",c5.T.Empty,c5.T.Empty));dx.LoadLocalTemplates("");ds.Run(ea,ec);}d9=this;!this.added?(d_=this,d$=d_.attachShadow({mode:"open"}),ea=self.document.createElement("div"),d$.appendChild(ea),eb(),d_.addEventListener("DOMSubtreeModified",c.delayed(50,eb)),this.added=true):void 0;}},k,bn);bn.Constructor=function(){var d9,d_;d9=(d_=dy.construct(self.HTMLElement,[],this.__proto__.constructor),d_);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(d9);return d9;};bn.New=c1.Ctor(function(){k.New.call(this);this.added=false;this.selected=_do.Create$1(1);(function(d9){return d9("WcTabStripT initializer");}(function(d9){dl.log(d9);}));},bn);bm.init=function(){cT.$cctor();return cT.init;};bm.tabStrip$2933$64=function(d9,d_){return function(){return function(){return d_.Set(d9+1);};};};bm.tabStrip=function(d9,d_,d$,ea,eb){var ec;ec=ds.Element("div",[du.Create("class",(((c1.Curried3(function(ed,ee,ef){return ed("tab-strip "+c2.toSafe(ee)+" "+c2.toSafe(ef));}))(a.id))(d_?"top":"bottom"))(d$?"horizontal":"vertical"))],c5.ofSeq(c4.delay(function(){return c4.collect(function(ed){var ee;ee=ed[0];return[bj.New$1().Content(ds.Element("div",[dt.Dynamic("class",dn.Map(function(ef){return"tab"+(ef===ee+1?" selected":"");},d9.get_View())),du.Create("draggable","true"),du.HandlerImpl("click",function(){return function(){return d9.Set(ee+1);};})],[ds.TextNode(ed[1][0])]))];},c4.indexed(ea));})));return ds.Element("div",[du.Create("class","tab-panel")],c5.ofSeq(c4.delay(function(){return c4.append(d_?[ec]:[],c4.delay(function(){return c4.append([ds.Element("div",[du.Create("class","tab-content")],[eb])],c4.delay(function(){return c4.append(!d_?[ec]:[],c4.delay(function(){return c4.append([ds.Element("style",c5.T.Empty,c5.ofArray([ds.TextNode(bm.css())]))],c4.delay(function(){return[ds.Element("style",c5.T.Empty,c5.ofArray([ds.TextView(dn.Map(function(ed){return function(ee){return ed("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(ee)+")) { display: grid }\r\n                                           ");};}(a.id),d9.get_View()))]))];}));}));}));}));})));};bm.css=function(){cT.$cctor();return cT.css;};bp=bo.WcSplitterT=c1.Class({connectedCallback:function(){var d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em;function en(ev){var ew,ex,ey,ez;ew=ee?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];ex=a.parseFloat("0"+a.jQuery(ev.parentElement.parentElement).css(ew[0]));ey=a.parseFloat("0"+a.jQuery(ev.parentElement.parentElement).css(ew[1]));eh.Set(a.parseFloat("0"+a.jQuery(ev.parentElement.parentElement).css(ew[2])));eg[0]=ex+ey;ez=d9.getBoundingClientRect();return ee?ed?[ez.width,ez.height]:[-ez.width,ez.height]:ed?[ez.height,ez.width]:[-ez.height,ez.width];}function eo(ev){return ee?ev.clientX:ev.clientY;}function ep(ev){var ew,ex;ew=(eo(ev)-ek[0])*100/ef[0][0]+ej[0];ec.Set((ex=c$.Compare(ea,ew)===1?ea:ew,c$.Compare(eb,ex)===-1?eb:ex));}function eq(){if(ei[0]){ei[0]=false;self.removeEventListener("mousemove",ep,false);self.removeEventListener("mouseup",eq,false);}}function er(ev){var ew,ex;if(!ei[0]){ei[0]=true;ej[0]=ec.Get();ek[0]=eo(ev);ef[0]=(ew=(ex=el[0],ex==null?null:{$:1,$0:en(ex.$0)}),ew==null?[100,500]:ew.$0);self.addEventListener("mousemove",ep,false);self.addEventListener("mouseup",eq,false);ev.preventDefault();}}function es(ev,ew,ex,ey){return[(ev-ew-ex)*ey/100,(ev-ew-ex)*(100-ey)/100];}function et(ev,ew){return(((((c1.Curried(function(ex,ey,ez,eA,eB){return ex(" "+ey.toFixed(2)+"px "+ez.toFixed(2)+"px ; "+c2.toSafe(eA)+" : "+eB.toFixed(2)+"px; ");},5))(a.id))(ev))(ew))(ee?"height":"width"))(ef[0][1]);}function eu(){var ev;ev=el[0];(h.iter(function(ew){ef[0]=en(ew);}))(ev);ec.Set(ec.Get());}if(!this.added){d9=this;d_=d9.attachShadow({mode:"open"});d$=self.document.createElement("div");ea=d9.hasAttribute("min")?a.parseFloat(d9.getAttribute("min")):4;eb=d9.hasAttribute("max")?a.parseFloat(d9.getAttribute("max")):96;ec=_do.Create$1(d9.hasAttribute("value")?a.parseFloat(d9.getAttribute("value")):50);ed=!d9.hasAttribute("second");ee=d9.hasAttribute("vertical");ef=[[0,0]];eg=[0];eh=_do.Create$1(0);ei=[false];ej=[0];ek=[0];el=[null];em=(((((ee?bo.layoutVertical():bo.layoutHorizontal())(dn.Map(function(ev){var ew;ew=es(ef[0][0],eh.Get(),eg[0],ev);return et.apply(null,ew);},ec.get_View())))(function(){bk.addResizeObserver(eu,d9);eu();}))(function(ev){el[0]={$:1,$0:ev};eu();}))(function(ev){er(ev);}))(dn.Map(function(ev){return function(ew){return ev(c2.prettyPrint(ew)+"px");};}(a.id),eh.get_View()));dx.LoadLocalTemplates("");ds.Run(d$,em);d_.appendChild(d$.firstChild);this.added=true;}}},k,bp);bp.Constructor=function(){var d9,d_;d9=(d_=dy.construct(self.HTMLElement,[],this.__proto__.constructor),d_);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(d9);return d9;};bp.New=c1.Ctor(function(){k.New.call(this);this.added=false;(function(d9){return d9("WcSplitterT initializer");}(function(d9){dl.log(d9);}));},bp);bo.init=function(d9,d_){var d$;d$=new bp.New();bo.set_layoutHorizontal(d9);bo.set_layoutVertical(d_);bl.defineWebComponent("wcomp-splitter",bp.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};bo.layoutVertical=function(){cT.$cctor();return cT.layoutVertical;};bo.set_layoutVertical=function(d9){cT.$cctor();cT.layoutVertical=d9;};bo.layoutHorizontal=function(){cT.$cctor();return cT.layoutHorizontal;};bo.set_layoutHorizontal=function(d9){cT.$cctor();cT.layoutHorizontal=d9;};bl.defineWebComponent=function(d9,d_,d$){try{dl.log("defineWebComponent: "+d9);dz.setPrototypeOf(d$.prototype,self.HTMLElement.prototype);dz.setPrototypeOf(d$,self.HTMLElement);dz.setPrototypeOf(d_.prototype,d$.prototype);self.customElements.define(d9,d_);}catch(ea){(function(eb){return eb("Failed to define WebComponent. Not supported.");}(function(eb){dl.log(eb);}));}};br.New=function(d9,d_){return{column:d9,lineNumber:d_};};bs.New=function(d9,d_,d$,ea){return{startColumn:d9,endColumn:d_,startLineNumber:d$,endLineNumber:ea};};bt.New=function(d9,d_,d$,ea,eb,ec){return{authority:d9,fragment:d_,fsPath:d$,path:ea,query:eb,scheme:ec};};bu.New=function(d9,d_){return{range:d9,uri:d_};};bv.New=function(d9,d_){return{matches:d9,range:d_};};bw.New=function(d9,d_,d$){return{endColumn:d9,startColumn:d_,word:d$};};bx.New=function(d9){return{uri:d9};};by.New=function(d9,d_){return{value:d9,isTrusted:d_};};bz.New=function(d9,d_,d$,ea,eb,ec){return{startColumn:d9,endColumn:d_,startLineNumber:d$,endLineNumber:ea,severity:eb,message:ec};};bA.New=function(d9,d_,d$){return{kind:d9,label:d_,detail:d$};};bB.New=function(d9,d_){return{contents:d9,range:d_};};bC=bq.Editor=c1.Class({},k,bC);bC.New=c1.Ctor(function(){k.New.call(this);},bC);bD.New=function(d9,d_,d$,ea,eb,ec,ed){return{"var":d9,onChange:d_,onRender:d$,editorO:ea,disabled:eb,options:ec,overrides:ed};};bq.newVarO=function(d9){var d_;d_=bq.newVar(_do.Lens(d9,function(d$){return d$==null?"":d$.$0;},function(d$,ea){return d$==null?null:{$:1,$0:ea};}));return bq.disabled(dn.Map(function(d$){return d$==null;},d9.get_View()),d_);};bq.newText=function(d9){return bq.newVar(_do.Create$1(d9));};bq["var"]=function(d9){return d9["var"];};bq.disabled=function(d9,d_){return bD.New(d_["var"],d_.onChange,d_.onRender,d_.editorO,d9,d_.options,d_.overrides);};bq.onRender=function(d9,d_){return bD.New(d_["var"],d_.onChange,{$:1,$0:d9},d_.editorO,d_.disabled,d_.options,d_.overrides);};bq.onChange=function(d9,d_){return bD.New(d_["var"],d9,d_.onRender,d_.editorO,d_.disabled,d_.options,d_.overrides);};bq.setVar=function(d9,d_){return bD.New(d9,d_.onChange,d_.onRender,d_.editorO,d_.disabled,d_.options,d_.overrides);};bq.render$3302$48=function(d9){return function(d_){var d$,ea;d$=(ea=d_.parentElement,self.monaco.editor.create(ea,d9.options,d9.overrides));bk.addResizeObserver(function(){d$.layout();},d_.parentElement);d_.parentNode.removeChild(d_);d9.editorO={$:1,$0:d$};(h.iter(function(eb){eb(d$);}))(d9.onRender);$.bindVarEditor(function(eb){d$.onDidChangeModelContent(eb);},function(){return d$.getValue();},function(eb){d$.setValue(eb);},d9.onChange,d9["var"]);};};bq.render=function(d9){var d_;return ds.Async((d_=null,c7.Delay(function(){return c7.Bind(bq.loader(),function(){return c7.Return(ds.Element("div",[du.OnAfterRenderImpl(function(d$){var ea,eb;ea=(eb=d$.parentElement,self.monaco.editor.create(eb,d9.options,d9.overrides));bk.addResizeObserver(function(){ea.layout();},d$.parentElement);d$.parentNode.removeChild(d$);d9.editorO={$:1,$0:ea};(h.iter(function(ec){ec(ea);}))(d9.onRender);$.bindVarEditor(function(ec){ea.onDidChangeModelContent(ec);},function(){return ea.getValue();},function(ec){ea.setValue(ec);},d9.onChange,d9["var"]);})],[]));});})));};bq.loader=function(){cT.$cctor();return cT.loader;};bq.newVar=function(d9){return bD.New(d9,a.ignore,null,null,dn.Const(false),null,null);};bF.New=function(d9,d_,d$,ea){return{editorO:d9,onChange:d_,options:d$,overrides:ea};};bG=bE.CompletionItemProvider=c1.Class({resolveCompletionItem:function(d9,d_){return bA.New(d9.kind,d9.label,"more details");},provideCompletionItems:function(d9,d_,d$,ea){var eb,ec;eb=this;return _8.ofAsyncResultM((ec=I.asyncResultM(),ec.Run(ec.Delay(function(){return I["AsyncResultMBuilder.Bind"](ec,eb.autoComplete(ba.New(d_.lineNumber,d_.column)),function(ed){return ec.Return(c6.map(function(ee){return bA.New(bE.convertGlyphChar(ee.kind),ee.label,ee.detail);},ed));});}))));}},k,bG);bG.New=c1.Ctor(function(d9){k.New.call(this);this.autoComplete=d9;},bG);bH=bE.HoverProvider=c1.Class({provideHover:function(d9,d_,d$){var ea,eb;ea=this;return _8.ofAsyncResultM((eb=I.asyncResultM(),eb.Run(eb.Delay(function(){return I["AsyncResultMBuilder.Bind"](eb,ea.toolTip(ba.New(d_.lineNumber,d_.column)),function(ec){return ec!=null&&ec.$==1?eb.Return(bB.New([by.New(ec.$0,true)],null)):eb.Return(null);});}))));}},k,bH);bH.New=c1.Ctor(function(d9){k.New.call(this);this.toolTip=d9;},bH);bI=bE.DefinitionProvider=c1.Class({provideDefinition:function(d9,d_,d$){var ea,eb;ea=this;return _8.ofAsyncResultM((eb=I.asyncResultM(),eb.Run(eb.Delay(function(){return I["AsyncResultMBuilder.Bind"](eb,ea.declaration(ba.New(d_.lineNumber,d_.column)),function(ec){var ed;return ec!=null&&ec.$==1?(ed=ec.$0[0],eb.Return(bu.New(bs.New(ed.col,ed.col,ed.line,ed.line),self.monaco.Uri.parse(ec.$0[1])))):eb.Return(null);});}))));}},k,bI);bI.New=c1.Ctor(function(d9){k.New.call(this);this.declaration=d9;},bI);bE.newVar=function(d9,d_,d$){return $.newVar(bE.newHook(bE.newRT(d9,d_)),d$);};bE.newRT=function(d9,d_){return bF.New(null,a.ignore,d9,d_);};bE.newHook=function(d9){function d_(d$,ea){return bE.generateDoc(d9,d$,ea);}return be.New(function(d$){return function(ea){return d_(d$,ea);};},function(){return bE.getValue(d9);},function(d$){bE.setValue(d9,d$);},a.ignore,function(d$){bE.showAnnotations(d9,d$);},function(d$){return bE.posFromIndex(d9,d$);},function(d$){return bE.indexFromPos(d9,d$);},function(d$){return bE.getWordAt(d9,d$);},function(){return bE.getSelect(d9);},function(){return bE.getUri(d9);},function(d$){bE.setUri(d9,d$);},function(d$){d9.onChange=d$;});};bE.showAnnotations=function(d9,d_){bE.iterEditor(d9,function(d$){var ea,eb;ea=c6.ofSeq(c4.map(function(ec){var ed;return bz.New(ec.startP.col,ec.endP.col,ec.startP.line,ec.endP.line,(ed=ec.severity,ed.$==0?8:ed.$==1?4:ed.$==3?1:2),ec.message);},d_));eb=d$.getModel();self.monaco.editor.setModelMarkers(eb,"annotations",ea);});};bE.getSelect=function(d9){var d_;d_=bE.mapEditor(d9,function(d$){var ea;ea=d$.getSelection();return d$.getModel().getValueInRange(ea);});return d_==null?"":d_.$0;};bE.getWordAt=function(d9,d_){return bE.bindEditor(d9,function(d$){var ea;ea=d$.getModel().getWordAtPosition(br.New(d_.col,d_.line));return!ea?null:{$:1,$0:[ea.word,ba.New(d_.line,ea.startColumn)]};});};bE.setValue=function(d9,d_){bE.iterEditor(d9,function(d$){d$.setValue(d_);});};bE.getValue=function(d9){var d_;d_=bE.mapEditor(d9,function(d$){return d$.getValue();});return d_==null?"":d_.$0;};bE.setUri=function(d9,d_){bE.iterEditor(d9,function(d$){d$.getModel().uri=self.monaco.Uri.parse(d_);});};bE.getUri=function(d9){var d_;d_=bE.mapEditor(d9,function(d$){return a.String(d$.getModel().uri);});return d_==null?"":d_.$0;};bE.generateDoc$3444$48=function(d9,d_,d$){return function(ea){var eb,ec;eb=(ec=ea.parentElement,self.monaco.editor.create(ec,d9.options,d9.overrides));bk.addResizeObserver(function(){eb.layout();},ea.parentElement);ea.parentNode.removeChild(ea);d9.editorO={$:1,$0:eb};d_(eb);eb.onDidChangeModelContent(d9.onChange);(h.iter(function(ed){var ee;ee=new bH.New(ed(d$));self.monaco.languages.registerHoverProvider("fsharp",ee);}))(d$.toolTip);(h.iter(function(ed){var ee;ee=new bI.New(ed(d$));self.monaco.languages.registerDefinitionProvider("fsharp",ee);}))(d$.declaration);(h.iter(function(ed){var ee;ee=new bG.New(ed(d$));self.monaco.languages.registerCompletionItemProvider("fsharp",ee);}))(d$.autoCompletion);};};bE.generateDoc=function(d9,d_,d$){var ea;return ds.Async((ea=null,c7.Delay(function(){return c7.Bind(bq.loader(),function(){return c7.Return(ds.Element("div",[du.OnAfterRenderImpl(function(eb){var ec,ed;ec=(ed=eb.parentElement,self.monaco.editor.create(ed,d9.options,d9.overrides));bk.addResizeObserver(function(){ec.layout();},eb.parentElement);eb.parentNode.removeChild(eb);d9.editorO={$:1,$0:ec};d$(ec);ec.onDidChangeModelContent(d9.onChange);(h.iter(function(ee){var ef;ef=new bH.New(ee(d_));self.monaco.languages.registerHoverProvider("fsharp",ef);}))(d_.toolTip);(h.iter(function(ee){var ef;ef=new bI.New(ee(d_));self.monaco.languages.registerDefinitionProvider("fsharp",ef);}))(d_.declaration);(h.iter(function(ee){var ef;ef=new bG.New(ee(d_));self.monaco.languages.registerCompletionItemProvider("fsharp",ef);}))(d_.autoCompletion);})],[]));});})));};bE.convertGlyphChar=function(d9){return d9==="C"?6:d9==="E"?12:d9==="S"?11:d9==="I"?7:d9==="N"?8:d9==="M"?1:d9==="P"?9:d9==="F"?4:d9==="T"?6:d9==="K"?13:0;};bE.posFromIndex=function(d9,d_){var d$;d$=bE.mapEditor(d9,function(ea){return bE.posEd2Gen(ea.getModel().getPositionAt(d_));});return d$==null?ba.New(1,1):d$.$0;};bE.indexFromPos=function(d9,d_){var d$;d$=bE.mapEditor(d9,function(ea){return ea.getModel().getOffsetAt(bE.posGen2Ed(d_));});return d$==null?-1:d$.$0;};bE.posEd2Gen=function(d9){return ba.New(d9.lineNumber,d9.column);};bE.posGen2Ed=function(d9){return br.New(d9.col,d9.line);};bE.bindEditor=function(d9,d_){var d$;d$=d9.editorO;return d$!=null&&d$.$==1?d_(d$.$0):null;};bE.mapEditor=function(d9,d_){var d$;d$=d9.editorO;return d$!=null&&d$.$==1?{$:1,$0:d_(d$.$0)}:null;};bE.iterEditor=function(d9,d_){var d$;d$=d9.editorO;d$!=null&&d$.$==1?d_(d$.$0):void 0;};_6.rexEmail=function(){cT.$cctor();return cT.rexEmail;};_6.rexGuid=function(){cT.$cctor();return cT.rexGuid;};_6.REGEX$1=function(d9,d_,d$){var ea;return d$===null?null:(ea=(new a.String(d$)).match(new a.RegExp(d9,d_)),c$.Equals(ea,null)?null:!c$.Equals(ea,null)&&ea.length===0?null:{$:1,$0:ea});};bK.extractConfig=function(d9,d_){var d$,ea;d$=d_.$0;return{$:0,$0:W.getSourceDir(d9,J.splitByChar("\n",d$)),$1:(ea=new dg.New(J.splitByChar(" ",W.extractDefines({$:0,$0:d$}))),new dg.New$1(dq.OfSeq(c4.append(new dg.New(c5.ofArray([" --nologo","--quiet "])),ea))))};};bM=bL.Address=c1.Class({get_txt:function(){return this.$0;}},null,bM);bN.BRGetProcessId={$:1};bN.BRGetConnections={$:0};bO.MsgRequestForEcho={$:5};bO.MsgRequestForId={$:4};bO.MsgFromBroker={$:3};bO.MsgReply={$:2};bO.MsgRequest={$:1};bO.MsgInformation={$:0};bP.BMReceiverCantReply={$:4};bP.BMOnlyBrokerShouldUse={$:1};bP.BMOk={$:0};bQ.Receiver={$:2};bQ.Broker={$:1};bQ.NoReply={$:0};bR.New=function(d9,d_,d$,ea,eb,ec,ed){return{from:d9,destination:d_,msgType:d$,subtype:ea,id:eb,payload:ec,replier:ed};};bS.FSharp={$:0};bT.FSStation={$:0};bU.JScript={$:0};bW=bV.Handler=c1.Class({Cancel:function(d9,d_){var d$;d$=this.waitingAgent;d$.mailbox.AddLast({$:3,$0:d9,$1:d_});d$.resume();},Raise:function(d9,d_){var d$;d$=this.waitingAgent;d$.mailbox.AddLast({$:2,$0:d9,$1:d_});d$.resume();},Reply:function(d9,d_){var d$;d$=this.waitingAgent;d$.mailbox.AddLast({$:1,$0:d9,$1:d_});d$.resume();},Add:function(d9,d_){var d$;d$=this.waitingAgent;d$.mailbox.AddLast({$:0,$0:d9,$1:d_});d$.resume();}},k,bW);bW.New=c1.Ctor(function(d9){k.New.call(this);this.waitingAgent=M.fold(M.defHandler,function(d_,d$){var ea,eb,ec;function ed(ee,ef,eg){var eh,ei;eh=(ei=dA.TryFind(ee,d_),ei==null?null:{$:1,$0:ef(ei.$0)});eh==null?eg():void 0;return d_.Remove(ee);}return d$.$==1?(ea=d$.$1,ed(d$.$0,function(ee){ee[0](ea);},function(){d9(ea);})):d$.$==2?(eb=d$.$1,ed(d$.$0,function(ee){ee[1](eb);},a.ignore)):d$.$==3?(ec=d$.$1,ed(d$.$0,function(ee){ee[2](ec);},a.ignore)):d_.Add(d$.$0,d$.$1);},new dp.New([]));},bW);bX=bL.WSMessagingClient=c1.Class({sendMsg:function(d9){var d_,d$;d_=this;d$=f.asyncResult();return d$.Run(d$.Delay(function(){return d9.replier.$===0?d$.Bind$1(d_.sendAndForget(d9),function(){return d$.Return("");}):d$.ReturnFrom$1(d_.sendGetReply(d9));}));},getProcessId:function(){var d9,d_;d9=this;d_=f.asyncResult();return d_.Run(d_.Delay(function(){var d$,ea;return d_.Bind$1(d9.sendGetReply((d$=bL.MessageBrokerAddress(),(ea=dB.stringify((cU.j$9())(bN.BRGetProcessId)),bR.New(new bM({$:0,$0:""}),d$,bO.MsgRequest,"",de.NewGuid(),ea,bQ.NoReply)))),function(eb){var ec;ec=(cV.j$7())(dB.parse(eb));return ec.$==1?d_.Return(ec.$0):d_.ReturnFrom({$:1,$0:new d({$:4,$0:{$:6,$0:(function(ed){return function(ee){return ed(cW.p$4(ee));};}(a.id))(ec)}})});});}));},getListeners:function(){var d9,d_;d9=this;d_=f.asyncResult();return d_.Run(d_.Delay(function(){var d$,ea;return d_.Bind$1(d9.sendGetReply((d$=bL.MessageBrokerAddress(),(ea=dB.stringify((cU.j$9())(bN.BRGetConnections)),bR.New(new bM({$:0,$0:""}),d$,bO.MsgRequest,"",de.NewGuid(),ea,bQ.NoReply)))),function(eb){var ec;ec=(cV.j$7())(dB.parse(eb));return ec.$==0?d_.Return(ec.$0):d_.ReturnFrom({$:1,$0:new d({$:4,$0:{$:6,$0:(function(ed){return function(ee){return ed(cW.p$4(ee));};}(a.id))(ec)}})});});}));},sendGetReply:function(d9){var d_,d$;d_=this;d$=f.asyncResult();return d$.Run(d$.Delay(function(){return d$.Bind$1(d_.sendAndReply(bQ.Receiver,d9),function(ea){var eb;return d$.Bind((eb=ea.msgType,eb.$==2?{$:0,$0:ea.payload}:eb.$==3?{$:1,$0:new d({$:4,$0:(cV.j$8())(dB.parse(ea.payload))})}:{$:1,$0:new d({$:4,$0:{$:5,$0:ea.msgType}})}),function(ec){return d$.Return(ec);});});}));},sendAndVerify:function(d9){var d_,d$;d_=this;d$=f.asyncResult();return d$.Run(d$.Delay(function(){return d$.Bind$1(d_.sendAndReply(bQ.Broker,d9),function(ea){var eb;return d$.Bind(ea.msgType.$==3?(eb=(cV.j$8())(dB.parse(ea.payload)),eb.$===0?{$:0,$0:null}:{$:1,$0:new d({$:4,$0:eb})}):{$:1,$0:new d({$:4,$0:{$:5,$0:ea.msgType}})},function(){return d$.Return();});});}));},sendAndReply:function(d9,d_){var d$,ea;d$=this;ea=f.asyncResult();return ea.Run(ea.Delay(function(){return ea.Bind$1(d$.getServer(),function(eb){return E["AsyncResultBuilder.ReturnFrom"](ea,c7.FromContinuations(function(ec,ed,ee){var ef;d$.waiting.Add(d_.id,[ec,ed,ee]);d$.postR(eb,d9,d_);return d$.wsTimeout>0?c7.Start((ef=null,c7.Delay(function(){return c7.Bind(c7.Sleep(d$.wsTimeout),function(){d$.waiting.Raise(d_.id,new dC.New$1((((c1.Curried3(function(eg,eh,ei){return eg("Did not receive reply in "+a.String(eh)+" seconds for Message: "+cZ.p(ei));}))(a.id))(d$.wsTimeout/1000>>0))(d_)));return c7.Zero();});})),null):null;}));});}));},sendAndForget:function(d9){var d_,d$;d_=this;d$=f.asyncResult();return d$.Run(d$.Delay(function(){return d$.Bind$1(d_.getServer(),function(ea){d_.postR(ea,bQ.NoReply,d9);return d$.Zero();});}));},postR:function(d9,d_,d$){try{d9.FsRoot_Library2_WebSockets_IServer$Post(bL.replier(d_,bL.from(this.clientAddress,d$)));}catch(ea){this.serverO=null;throw ea;}},getServer:function(){return this.checkServer.PostAndAsyncReply(function(d9){return[d9,null];},null);},connectToWebSocketServer:function(){var d9,d_;d9=this;(function(d$){return d$("in connectToWebSocketServer");}(function(d$){dl.log(d$);}));d_=null;return c7.Delay(function(){return c7.Bind(((d9.connectStateful(d9.wsEndPoint))(d9.clientId))(function(d$){var ea;ea=null;return c7.Delay(function(){return c7.Return([0,function(eb){return function(ec){var ed;ed=null;return c7.Delay(function(){return c7.Combine(c7.TryWith(c7.Delay(function(){return ec.$==2?((function(ee){return function(ef){return ee("WebSocket "+c2.toSafe(ef)+" connection open.");};}(function(ee){dl.log(ee);}))(d9.clientId),d9.serverO={$:1,$0:d$},c7.Zero()):ec.$==3?((function(ee){return function(ef){return ee("WebSocket "+c2.toSafe(ef)+" connection closed.");};}(function(ee){dl.log(ee);}))(d9.clientId),d9.close(),c7.Zero()):ec.$==1?((function(ee){return function(ef){return ee("WebSocket "+c2.toSafe(ef)+" connection error!");};}(function(ee){dl.log(ee);}))(d9.clientId),c7.Zero()):(d9.processMessage(ec.$0),c7.Zero());}),function(ee){(((c1.Curried3(function(ef,eg,eh){return ef("msg: "+cW.p$8(eg)+" \nexn:"+c2.prettyPrint(eh));}))(function(ef){dl.log(ef);}))(ec))(ee);return c7.Zero();}),c7.Delay(function(){return c7.Return(eb);}));});};}]);});}),function(){(function(d$){return d$("connectToWebSocketServer with server");}(function(d$){dl.log(d$);}));return c7.Zero();});});},processMessage:function(d9){var d_,d$,ea,eb,ec,ef;d$=this;ea=d9.msgType;function ed(eg){d$.reply(eg);}function ee(eg){return c7.Return(eg);}switch(ea.$==2?0:ea.$==0?1:ea.$==1?2:ea.$==5?3:ea.$==4?4:0){case 0:this.processReply(d9);break;case 1:(((c1.Curried3(function(eg,eh,ei){return eg("Information from '"+c2.toSafe(eh)+"': "+c2.toSafe(ei));}))(function(eg){dl.log(eg);}))(d9.from.get_txt()))(((dE.Id())())(dB.parse(d9.payload)));break;case 2:eb=this.payloadProcessorO;eb!=null&&eb.$==1?c7.Start(c7.Bind(d$.mapPayloadWrap(eb.$0,d9),(ec=function(eg){return ed(bL.makeReply(eg));},function(eg){return ee(ec(eg));})),null):d9.replier.$===2?null:null;break;case 3:d$.reply(bL.msgType(bO.MsgInformation,bL.mapPayload(a.id,d9)));break;case 4:d$.reply(bL.msgType(bO.MsgInformation,(ef=bL.makeReply(d9),bR.New(ef.from,ef.destination,ef.msgType,ef.subtype,ef.id,dB.stringify(((dE.Id())())(this.clientId)),ef.replier))));break;}},mapPayloadWrap:function(d9,d_){var d$;d$=null;return c7.Delay(function(){return c7.Bind(d9(d_.payload),function(ea){return c7.Return(bL.mapPayload(function(){return ea;},d_));});});},processReply:function(d9){this.waiting.Reply(d9.id,d9);},close:function(){var d9,d_;d9=this;d_=this.serverO;(h.iter(function(d$){d$.FsRoot_Library2_WebSockets_IServer$Close();d9.serverO=null;}))(d_);},reply:function(d9){var d_,d$;d_=this;d$=this.serverO;(h.iter(function(ea){ea.FsRoot_Library2_WebSockets_IServer$Post(bL.destination(d9.from,bL.from(d_.clientAddress,d9)));}))(d$);},set_Out:function(d9){this.out=d9;},SendMsg:function(d9){return this.sendMsg(d9);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBProcessId:function(){return this.getProcessId();},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},k,bX);bX.New=c1.Ctor(function(d9,d_,d$){bX.New$1.call(this,c1.Curried3(function(ea,eb,ec){function ed(ef){}function ee(ef){return c7.Return(ef);}return c7.Bind(dI.ConnectStateful(function(ef){return dB.stringify((cU.j())(ef));},function(ef){return(cV.j())(dB.parse(ef));},dJ.CreateRemote((((c1.Curried3(function(ef,eg,eh){return ef("ws://"+c2.toSafe(eg)+"?ClientId="+c2.toSafe(eh));}))(a.id))(ea))(eb),{$:1,$0:dG.JsonEncoding.Readable}),function(ef){var eg;return ec((eg={FsRoot_Library2_WebSockets_IServer$Post:function(eh){return ef.Post(eh);},FsRoot_Library2_WebSockets_IServer$Close:function(){return ef.get_Connection().close(1000);}},(k.New.call(eg),eg)));}),function(ef){return ee(ed(ef));});}),d9,d_,d$);},bX);bX.New$1=c1.Ctor(function(d9,d_,d$,ea){var eb,ec;eb=this;k.New.call(this);this.connectStateful=d9;this.clientId=d_;this.wsEndPoint=(ec=bL.extractEndPoint()+"/ws",ea==null?ec:ea.$0);this.clientAddress=new bM({$:0,$0:this.clientId});this.wsTimeout=d$==null?60000:d$.$0;this.out=function(ed){return function(ee){return ed(c2.toSafe(ee));};}(function(ed){dl.log(ed);});this.serverO=null;this.payloadProcessorO=null;this.waiting=new bW.New(function(ed){(((c1.Curried3(function(ee,ef,eg){return ee("Reply from '"+c2.toSafe(ef)+"': "+c2.toSafe(eg));}))(function(ee){dl.log(ee);}))(ed.from.get_txt()))(ed.payload);});this.checkServer=M.callA(function(ed){c.print(ed);},function(){var ed;ed=null;return c7.Delay(function(){return c7.Combine(eb.serverO==null?(function(ee){return ee("getServer Connecting");}(function(ee){dl.log(ee);}),c7.Bind(eb.connectToWebSocketServer(),function(){return c7.Bind(c7.Sleep(200),function(){return c7.Return(null);});})):c7.Zero(),c7.Delay(function(){return c7.Return(l.ofOption(function(){return new d({$:1,$0:"could not connect to Server"});},eb.serverO));}));});});},bX);bL.extractEndPoint=function(){return c6.get(c3.SplitChars(dK.href.substring(dK.href.indexOf("//")+2),["/"],0),0);};bL.makeReply=function(d9){return bL.replier(bQ.NoReply,bL.msgType(bO.MsgReply,d9));};bL.mapPayload=function(d9,d_){return bR.New(d_.from,d_.destination,d_.msgType,d_.subtype,d_.id,d9(d_.payload),d_.replier);};bL.msgId=function(d9,d_){return bR.New(d_.from,d_.destination,d_.msgType,d_.subtype,d9,d_.payload,d_.replier);};bL.replier=function(d9,d_){return bR.New(d_.from,d_.destination,d_.msgType,d_.subtype,d_.id,d_.payload,d9);};bL.subtype=function(d9,d_){return bR.New(d_.from,d_.destination,d_.msgType,d9,d_.id,d_.payload,d_.replier);};bL.msgType=function(d9,d_){return bR.New(d_.from,d_.destination,d9,d_.subtype,d_.id,d_.payload,d_.replier);};bL.destination=function(d9,d_){return bR.New(d_.from,d9,d_.msgType,d_.subtype,d_.id,d_.payload,d_.replier);};bL.from=function(d9,d_){return bR.New(d9,d_.destination,d_.msgType,d_.subtype,d_.id,d_.payload,d_.replier);};bL.MessageBrokerAddress=function(){cT.$cctor();return cT.MessageBrokerAddress;};bL.MessageBrokerId=function(){cT.$cctor();return cT.MessageBrokerId;};bY.MsgGetUrl={$:5};bY.MsgGetId={$:0};b1.New=function(d9,d_){return{Code:d9,Message:d_};};b2.New=function(d9,d_,d$){return{File:d9,Line:d_,Column:d$};};b3.New=function(d9,d_,d$,ea){return{Name:d9,ReplacementText:d_,Glyph:d$,GlyphChar:ea};};b4.New=function(d9,d_,d$){return{Signature:d9,Comment:d_,Footer:d$};};b5.New=function(d9,d_,d$,ea){return{Name:d9,CanonicalTypeTextForSorting:d_,Display:d$,Description:ea};};b6.New=function(d9,d_,d$,ea){return{Tip:d9,TypeText:d_,Parameters:d$,IsStaticArguments:ea};};b7.New=function(d9,d_){return{Name:d9,Type:d_};};b8.New=function(d9,d_){return{OutputType:d9,Parameters:d_};};b9.New=function(d9,d_,d$){return{Name:d9,CurrentParameter:d_,Overloads:d$};};b_.New=function(d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh){return{FileName:d9,StartLine:d_,StartColumn:d$,EndLine:ea,EndColumn:eb,IsFromDefinition:ec,IsFromAttribute:ed,IsFromComputationExpression:ee,IsFromDispatchSlotImplementation:ef,IsFromPattern:eg,IsFromType:eh};};b$.New=function(d9,d_){return{Name:d9,Uses:d_};};ca.New=function(d9,d_){return{Name:d9,Overloads:d_};};cb.New=function(d9,d_,d$){return{Fsc:d9,Fsi:d_,MSBuild:d$};};cc.New=function(d9,d_,d$,ea,eb,ec,ed,ee){return{FileName:d9,StartLine:d_,EndLine:d$,StartColumn:ea,EndColumn:eb,Severity:ec,Message:ed,Subcategory:ee};};cd.New=function(d9,d_){return{File:d9,Errors:d_};};ce.New=function(d9){return{Kind:d9};};cf.New=function(d9,d_,d$,ea,eb,ec,ed,ee){return{UniqueName:d9,Name:d_,Glyph:d$,GlyphChar:ea,IsTopLevel:eb,File:ec,EnclosingEntity:ed,IsAbstract:ee};};cg.New=function(d9,d_){return{Declaration:d9,Nested:d_};};ch.New=function(d9,d_,d$,ea,eb,ec){return{Namespace:d9,Name:d_,Type:d$,Line:ea,Column:eb,MultipleNames:ec};};ci.New=function(d9,d_){return{Name:d9,Qualifier:d_};};cj.New=function(d9,d_,d$){return{Opens:d9,Qualifies:d_,Word:d$};};ck.New=function(d9){return{Text:d9};};cm.New=function(d9,d_,d$,ea){return{FileName:d9,IsAsync:d_,Lines:d$,Version:ea};};cn.New=function(d9,d_,d$){return{FileName:d9,Lines:d_,Version:d$};};co.New=function(d9,d_,d$,ea,eb,ec){return{FileName:d9,SourceLine:d_,Line:d$,Column:ea,Filter:eb,IncludeKeywords:ec};};cp.New=function(d9,d_,d$,ea){return{FileName:d9,Line:d_,Column:d$,Filter:ea};};cq.New=function(d9){return{FileName:d9};};cr.New=function(d9){return{FileName:d9};};cs.New=function(d9){return{Symbol:d9};};ct.New=function(d9,d_,d$){return{Directory:d9,Deep:d_,ExcludedDirs:d$};};cu.symbolUseProject=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("symboluseproject",function(eb){return eb.$==4?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.symbolUse=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("symboluse",function(eb){return eb.$==4?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.helpText=function(d9){return cu.FSAutocompleteCall("helptext",function(d_){return d_.$==2?{$:1,$0:d_.$0}:null;},{$:6,$0:cs.New(d9)});};cu.declarations=function(d9,d_,d$){return cu.FSAutocompleteCall("declarations",function(ea){return ea.$==10?{$:1,$0:ea.$0}:null;},{$:1,$0:cn.New(d9,d_,d$)});};cu.findDeclaration=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("finddeclaration",function(eb){return eb.$==9?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.findTypeDecl=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("findtypedeclaration",function(eb){return eb.$==9?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.completion=function(d9,d_,d$,ea,eb,ec){return cu.FSAutocompleteCall("completion",function(ed){return ed.$==3?{$:1,$0:ed.$0}:null;},{$:2,$0:co.New(d$,d9,ea,eb,ec,d_)});};cu.signatureData=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("signatureData",function(eb){return eb.$==13?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.signature=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("signature",function(eb){return eb.$==12?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.toolTip=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("tooltip",function(eb){return eb.$==11?{$:1,$0:eb.$0}:null;},{$:3,$0:cp.New(d9,d_,d$,ea)});};cu.parseCode=function(d9,d_,d$,ea){return cu.FSAutocompleteCall("parse",function(eb){return eb.$==7?{$:1,$0:eb.$0}:null;},{$:0,$0:cm.New(d9,d$,d_,ea)});};cu.FSAutocompleteCall=function(d9,d_,d$){var ea;ea=f.asyncResult();return ea.Run(ea.Delay(function(){return ea.Bind$1((new dM.New()).Async("FSharpStation:FsRoot.Library2+FsAutoComplete.FSAutocompleteCall0:-1842881046",[d9,d$]),function(eb){var ec,ed;function ee(ef){return ef!=null;}ec=c6.partition(function(ef){return ee(d_(ef));},eb);ed=ec[1];return ea.Bind(l.ofOption(function(){return new d({$:4,$0:ed});},c4.tryHead(c4.choose(d_,ec[0]))),function(ef){return ea.Return([ef,ed]);});});}));};cw.appendMsgs=function(d9){cw.appendText(cw.outputMsgs(),d9);};cw.appendText=function(d9,d_){var d$;d9.Set((d$=d9.Get(),d$===""?d_:d_===""?d$:d$+"\n"+d_));};cw.outputMsgs=function(){cT.$cctor();return cT.outputMsgs;};cw.annotationsV=function(){cT.$cctor();return cT.annotationsV;};cw.srcDir=function(){cT.$cctor();return cT.srcDir;};cw.set_srcDir=function(d9){cT.$cctor();cT.srcDir=d9;};cw.rootDir=function(){cT.$cctor();return cT.rootDir;};cw.set_rootDir=function(d9){cT.$cctor();cT.rootDir=d9;};cw.id=function(){cT.$cctor();return cT.id;};cx.setProperty=function(d9,d_,d$){function ea(ec){return ec[0];}function eb(ec){return d_!==ec;}if(c4.contains([d_,d$],d9.snpProperties));else{cx.setSnippet(_0.New(d9.snpId,d9.snpName,d9.snpContent,d9.snpParentIdO,d9.snpPredIds,c6.ofSeq(c4.append(c4.filter(function(ec){return eb(ea(ec));},d9.snpProperties),c5.ofArray([[d_,d$]]))),d9.snpModified));}};cx.toggleCollapse=function(d9){var d_;d_=((cx.collapsedV().Get().Contains(d9)?function(d$){return function(ea){return ea.Remove(d$);};}:function(d$){return function(ea){return ea.Add(d$);};})(d9))(cx.collapsedV().Get());cx.collapsedV().Set(d_);};cx.newSnippet=function(d9){var d_;d_=_2.New("","",null);cx.iterReader(q.op_BarGreaterGreater(cx.addSnippetRm(d_),function(){cx.currentSnippetIdOV().Set({$:1,$0:d_.snpId});}));};cx.addSnippetRm=function(d9){var d_,d$,ea;cx.snippets().Append(d9);d_=(d$=cx.hierarchy().Get(),c4.append([cx.treenode(d9.snpId)],d$));return q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(p.insertO((ea=cx.currentSnippetIdOV().Get(),ea==null?null:{$:1,$0:_2.snippetORm(ea.$0)})),function(eb){return eb==null?null:a.id(eb.$0);}),function(eb){return eb!=null&&eb.$==1?_4.moveToSibling2(true,d9.snpId,eb.$0.snpId,d_):q.rtn(d_);}),c6.ofSeq),function(eb){cx.hierarchy().Set(eb);});};cx.setSnippetsGen=function(d9,d_){function d$(ea){return cx.treenode(ea.snpId);}cx.collapsedV().Set(d_);cx.snippets().Set(d9);cx.updateGeneration();cx.iterReader(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater(p.sequenceSeq(c4.map(function(ea){return q.op_BarGreaterGreater(_2.parentORm(ea),function(eb){return eb==null?{$:1,$0:ea}:null;});},d9)),function(ea){return c4.choose(a.id,ea);}),function(ea){return c4.map(d$,ea);}),c6.ofSeq),function(ea){cx.hierarchy().Set(ea);}));};cx.updateGeneration=function(){var d9;cx.iterReader((d9=p.fusion(),d9.Run(d9.Delay(function(){return d9.Bind(_2.maxGenerationRm(),function(d_){cx.generation().Set(d_);return d9.Zero();});}))));};cx.moveNode=function(d9,d_){cx.iterReader(q.op_BarGreaterGreater(q.op_BarGreaterGreater(_4.moveToSibling2(false,d9,d_,cx.hierarchy().Get()),c6.ofSeq),function(d$){cx.hierarchy().Set(d$);}));};cx.indentOut=function(d9){var d_;d_=cx.currentSnippetIdOV().Get();(h.iter(function(d$){var ea;cx.iterReader(q.op_BarGreaterGreater(q.op_BarGreaterGreater((ea=cx.hierarchy().Get(),_4.outdentNode(cx.treenode(d$),ea)),c6.ofSeq),function(eb){cx.hierarchy().Set(eb);}));}))(d_);};cx.indentIn=function(d9){var d_;d_=cx.currentSnippetIdOV().Get();(h.iter(function(d$){var ea;cx.iterReader(q.op_BarGreaterGreater(q.op_BarGreaterGreater((ea=cx.hierarchy().Get(),_4.indentNode(cx.treenode(d$),ea)),c6.ofSeq),function(eb){cx.hierarchy().Set(eb);}));}))(d_);};cx.deleteCurrentSnippet=function(d9){var d_;d_=cx.currentSnippetIdOV().Get();(h.iter(function(d$){var ea;cx.iterReader(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater((ea=cx.hierarchy().Get(),_4.removeNodeOutdentChildren(cx.treenode(d$),ea)),c6.ofSeq),function(eb){cx.hierarchy().Set(eb);}),function(){cx.snippets().RemoveByKey(d$);}));}))(d_);};cx.expandClassW=function(d9){var d_;d_=cx.snippets().v;return dn.Map2(function(){return cx.runReader(cx.handleError,cx.expandClassRm(d9));},cx.collapsedV().get_View(),d_);};cx.expandClassRm=function(d9){return q.op_GreaterGreaterEquals(_2.childrenRm(d9),function(d_){return c4.isEmpty(d_)?q.rtn(""):q.op_BarGreaterGreater(cx.treenode(d9).isExpandedRm(),function(d$){return d$?"expanded":"collapsed";});});};cx.togglePredecessor=function(d9){var d_,d$;d_=_do.Lens(cx.currentSnippetV(),function(ea){return ea.snpPredIds;},function(ea,eb){return _0.New(ea.snpId,ea.snpName,ea.snpContent,ea.snpParentIdO,eb,ea.snpProperties,ea.snpModified);});d_.Set((d$=d_.Get(),((d_.Get().Contains(d9)?function(ea){return function(eb){return eb.Remove(ea);};}:function(ea){return function(eb){return eb.Add(ea);};})(d9))(d$)));cx.clearPredsCache();};cx.isIncludedPredecessorW=function(d9){return dn.Map(function(d_){return cx.runReader(function(){return false;},q.op_BarGreaterGreater(_2.uniquePredsRm(d_),function(d$){return c4.contains(d9,d$);}));},cx.codeSnippetW());};cx.isIndirectPredecessorW=function(d9){return dn.Map(function(d_){return cx.runReader(function(){return false;},q.op_BarGreaterGreater(_2.uniquePredsRm(d_),function(d$){return c4.contains(d9,d$);}));},cx.currentSnippetW());};cx.treenode=function(d9){return _5.New(function(){return d9;},function(){return q.rtn(!cx.collapsedV().Get().Contains(d9));},function(){return q.rtn(true);},function(){function d_(d$){return cx.treenode(d$.snpId);}return q.op_BarGreaterGreater(_2.childrenRm(d9),function(d$){return c4.map(d_,d$);});},function(){return _2.pathRm(d9);},function(){function d_(d$){return d$.snpParentIdO;}return q.op_BarGreaterGreater(q.op_BarGreaterGreater(_2.snippetORm(d9),function(d$){return d$==null?null:d_(d$.$0);}),function(d$){return d$==null?null:{$:1,$0:cx.treenode(d$.$0)};});},function(d_){return q.op_BarGreaterGreater(cx.setChildrenRm(d9,d_),function(){return cx.treenode(d9);});});};cx.setChildrenRm=function(d9,d_){var d$;d$=p.fusion();return d$.Run(d$.Delay(function(){var ea,eb,ec,ed,ee,ef;ea=c6.map(function(eg){return eg.id();},d_);c4.iter(function(eg){cx.setSnippet(eg);},c4.map(function(eg){return _0.New(eg.snpId,eg.snpName,eg.snpContent,{$:1,$0:d9},eg.snpPredIds,eg.snpProperties,eg.snpModified);},c4.filter(function(eg){return!c$.Equals(eg.snpParentIdO,{$:1,$0:d9})&&c6.contains(eg.snpId,ea);},cx.snippets())));c4.iter(function(eg){cx.setSnippet(eg);},c4.map(function(eg){return _0.New(eg.snpId,eg.snpName,eg.snpContent,null,eg.snpPredIds,eg.snpProperties,eg.snpModified);},c4.filter(function(eg){return c$.Equals(eg.snpParentIdO,{$:1,$0:d9})&&!c6.contains(eg.snpId,ea);},cx.snippets())));cx.clearPredsCache();eb=c6.partition(function(eg){return cx.isDescendantOf(d9,eg.snpId);},c6.ofSeq((cx.snippets())["var"].Get()));ec=eb[1];ed=eb[0];ee=c6.findIndex(function(eg){return c$.Equals(eg.snpId,d9);},ec);ef=c6.ofSeq(c4.delay(function(){return c4.append(da.array(ec,{$:1,$0:0},{$:1,$0:ee}),c4.delay(function(){return c4.append(c4.collect(function(eg){return c4.append([c4.find(function(eh){return c$.Equals(eh.snpId,eg);},ed)],c4.delay(function(){return c4.filter(function(eh){return cx.isDescendantOf(eg,eh.snpId);},ed);}));},ea),c4.delay(function(){return da.array(ec,{$:1,$0:ee+1},null);}));}));}));cx.snippets().Set(ef);return d$.Zero();}));};cx.currentLayoutJSDW=function(){cT.$cctor();return cT.currentLayoutJSDW;};cx.currentLayoutDW=function(){cT.$cctor();return cT.currentLayoutDW;};cx.currentPathW=function(){cT.$cctor();return cT.currentPathW;};cx.SaveAsClassW=function(){cT.$cctor();return cT.SaveAsClassW;};cx.hasChangedW=function(d9){return dn.Map(function(d_){return d_<d9.snpModified;},cx.generation().get_View());};cx.codeStartsW=function(){cT.$cctor();return cT.codeStartsW;};cx.FsCodeW=function(){cT.$cctor();return cT.FsCodeW;};cx.codeAndStartsW=function(){cT.$cctor();return cT.codeAndStartsW;};cx.getHierarchyW=function(){cT.$cctor();return cT.getHierarchyW;};cx.findSnippetV=function(d9){return new dN.New(cx.findSnippetW(d9),function(d_){cx.setSnippet(d_);});};cx.findSnippetW=function(d9){return dn.Map(function(d_){var d$;d$=_2.defaultSnippet();return d_==null?d$:d_.$0;},cx.snippets().TryFindByKeyAsView(d9));};cx.codeSnippetClassW=function(d9){return dn.Map(function(d_){return c$.Equals({$:1,$0:d9},d_)?"codeSnippet":"";},cx.codeSnippetIdOV().get_View());};cx.selectedClassW=function(d9){return dn.Map(function(d_){return c$.Equals({$:1,$0:d9},d_)?"selected":"";},cx.currentSnippetIdOV().get_View());};cx.currentSnippetV=function(){cT.$cctor();return cT.currentSnippetV;};cx.codeSnippetW=function(){cT.$cctor();return cT.codeSnippetW;};cx.currentSnippetW=function(){cT.$cctor();return cT.currentSnippetW;};cx.CurrentSnippetIdW=function(){cT.$cctor();return cT.CurrentSnippetIdW;};cx.isDescendantOf=function(d9,d_){var d$,ea,eb;return c$.Equals(d_,d9)?false:(d$=(ea=(cx.getParentIdO())(d_),ea==null?null:{$:1,$0:(eb=ea.$0,c$.Equals(eb,d9)||cx.isDescendantOf(d9,eb))}),d$==null?false:d$.$0);};cx.getParentIdO=function(){cT.$cctor();return cT.getParentIdO;};cx.getParentIdONotMemo=function(d9){var d_;d_=cx.snippets().TryFindByKey(d9);return d_==null?null:d_.$0.snpParentIdO;};cx.getSnippetsGen=function(){return[(cx.snippets())["var"].Get(),cx.generation().Get(),cx.collapsedV().Get()];};cx.setSnippet=function(d9){if(!c$.Equals(d9.snpId.get_Id(),"00000000-0000-0000-0000-000000000000"))cx.snippets().Append(_0.New(d9.snpId,d9.snpName,d9.snpContent,d9.snpParentIdO,d9.snpPredIds,d9.snpProperties,di.now()));};cx.setCurrentSnippetIdO=function(d9){(h.iter(function(d_){cx.expandParents(d_);}))(d9);cx.currentSnippetIdOV().Set(d9);};cx.expandParents=function(d9){cx.iterReader(q.op_BarGreaterGreater(_2.pathRm(d9),function(d_){var d$;d$=dg.op_Subtraction(cx.collapsedV().Get(),new dg.New(d_));cx.collapsedV().Set(d$);}));};cx.runReader=function(d9,d_){return l.defaultWith(d9,cx.runReaderResult(d_));};cx.runReaderResult=function(d9){return c9.Map(function(d_){return d_[0];},p.runReader(cx.snippetsColl(),d9));};cx.iterReader=function(d9){p.iterReader(function(d_){cx.handleError(d_);},a.ignore,cx.snippetsColl(),d9);};cx.handleError=function(d9){throw new a.Error(a.String(d9));};cx.snippetsColl=function(){return _1.New(cx.generation().Get(),c4.delay(function(){return(cx.snippets())["var"].Get();}),function(d9){return cx.snippets().TryFindByKey(d9);},cx.predsCache,cx.reducCache,cx.prepCode);};cx.prepCode=function(d9){return cx.prepAnyCode(d9.snpContent);};cx.prepAnyCode=function(d9){return c3.Replace(c3.Replace(c3.Replace(d9,"##"+"FSHARPSTATION_ID"+"##",cw.id()),"##"+"FSHARPSTATION_ENDPOINT"+"##",self.location.href),"##"+"FSHOME"+"##",cw.rootDir());};cx.clearPredsCache=function(){(cx.clearPreds())();(cx.clearReduc())();(cx.clearParent())();};cx.clearParent=function(){cT.$cctor();return cT.clearParent;};cx.parentCache=function(){cT.$cctor();return cT.parentCache;};cx.clearReduc=function(){cT.$cctor();return cT.clearReduc;};cx.reducCache=function(){cT.$cctor();return cT.reducCache;};cx.clearPreds=function(){cT.$cctor();return cT.clearPreds;};cx.predsCache=function(){cT.$cctor();return cT.predsCache;};cx.collapsedV=function(){cT.$cctor();return cT.collapsedV;};cx.codeSnippetIdOV=function(){cT.$cctor();return cT.codeSnippetIdOV;};cx.currentSnippetIdOV=function(){cT.$cctor();return cT.currentSnippetIdOV;};cx.generation=function(){cT.$cctor();return cT.generation;};cx.hierarchy=function(){cT.$cctor();return cT.hierarchy;};cx.snippets=function(){cT.$cctor();return cT.snippets;};cz.DragNone={$:0};cy.getDragNIdO=function(d9){var d_;return cy.drag().$==1&&(!c$.Equals(cy.drag().$0,d9)&&(d_=cy.drag().$0,true))?{$:1,$0:d_}:null;};cy.setDragNode=function(d9){cy.set_drag({$:1,$0:d9});};cy.setDragNone=function(){cy.set_drag(cz.DragNone);};cy.drag=function(){cT.$cctor();return cT.drag;};cy.set_drag=function(d9){cT.$cctor();cT.drag=d9;};cA.TemplatesFileName=function(){cT.$cctor();return cT.TemplatesFileName;};cA.rootdir=function(){cT.$cctor();return cT.rootdir;};cB.render=function(){var d9,d_,d$,ea;return(d9=(d_=cB.snippets(),dR.Make().WithHole({$:0,$0:"snippets",$1:d_})),(d$=dS.CompleteHoles(d9.k,d9.h,[]),(ea=new dT.New(d$[1],cY.snippetlist(d$[0])),(d9.i=ea,ea)))).get_Doc();};cB.snippets$5070$40=function(d9){return function(d_){var d$;d_.Event.preventDefault();d$=cy.getDragNIdO(d9);(h.iter(function(ea){cx.moveNode(ea,d9);}))(d$);};};cB.snippets$5069$40=function(d9){return function(d_){if(cy.getDragNIdO(d9)!=null)d_.Event.preventDefault();};};cB.snippets$5068$40=function(d9){return function(d_){cy.setDragNode(d9);d_.Event.stopPropagation();};};cB.snippets$5067$40=function(d9){return function(){cx.toggleCollapse(d9);};};cB.snippets$5066$40=function(d9){return function(){cx.togglePredecessor(d9);};};cB.snippets$5065$40=function(d9){var d_;d_=dn.Map(function(d$){return""!==d$;},cx.selectedClassW(d9));return function(d$){return cB.scrollIntoView(d_,d$);};};cB.snippets$5064$40=function(d9){return function(){cx.setCurrentSnippetIdO({$:1,$0:d9});};};cB.snippets=function(){function d9(d_,d$){var ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et;function eu(ev){return ev?"ErrorMsg":"";}ea=(eb=dn.get_Do(),dn.Bind(function(ev){return dn.Bind(function(ew){return dn.Const((ew?"*":"")+_2.snippetName(ev.snpName,ev.snpContent));},cx.hasChangedW(ev));},cx.findSnippetW(d_)));ec=dn.Apply(dn.Map2(function(ev,ew){return function(ex){return ev.snpPredIds.Contains(d_)?"direct-predecessor":ew?"indirect-predecessor":ex?"included-predecessor":"";};},cx.currentSnippetV().get_View(),cx.isIndirectPredecessorW(d_)),cx.isIncludedPredecessorW(d_));ed=(ee=cw.annotationsV().get_View(),dn.Map((ef=(eg=(eh=d_.get_Id(),a.String(eh)),function(ev){return J.contains(eg,ev);}),function(ev){return eu(ef(ev));}),ee));return(ei=(ej=(ek=(el=(em=(en=(eo=(ep=dn.Map(function(ev){return""!==ev;},cx.selectedClassW(d_)),function(ev){return cB.scrollIntoView(ep,ev);}),(eq=(er=cx.expandClassW(d_),dR.Make().WithHole({$:2,$0:"name",$1:ea}).WithHole({$:1,$0:"indent",$1:a.String(d$)}).WithHole({$:2,$0:"parent",$1:er})).WithHole({$:2,$0:"predecessor",$1:ec}).WithHole({$:2,$0:"selected",$1:dn.Map2(function(ev,ew){return c3.concat(" ",c5.ofArray([ev,ew]));},cx.selectedClassW(d_),cx.codeSnippetClassW(d_))}).WithHole({$:2,$0:"errormsg",$1:ed}),eq.WithHole(dS.EventQ2(eq.k,"select",function(){return eq.i;},function(){cx.setCurrentSnippetIdO({$:1,$0:d_});}))).WithHole({$:7,$0:"afterrender",$1:eo})),en.WithHole(dS.EventQ2(en.k,"togglepred",function(){return en.i;},function(){cx.togglePredecessor(d_);}))),em.WithHole(dS.EventQ2(em.k,"togglecollapse",function(){return em.i;},function(){cx.toggleCollapse(d_);}))),el.WithHole(dS.EventQ2(el.k,"drag",function(){return el.i;},function(ev){cy.setDragNode(d_);ev.Event.stopPropagation();}))),ek.WithHole(dS.EventQ2(ek.k,"dragover",function(){return ek.i;},function(ev){if(cy.getDragNIdO(d_)!=null)ev.Event.preventDefault();}))),ej.WithHole(dS.EventQ2(ej.k,"drop",function(){return ej.i;},function(ev){var ew;ev.Event.preventDefault();ew=cy.getDragNIdO(d_);(h.iter(function(ex){cx.moveNode(ex,d_);}))(ew);}))),(es=dS.CompleteHoles(ei.k,ei.h,[]),(et=new dT.New(es[1],cY.snippet(es[0])),(ei.i=et,et)))).get_Doc();}return ds.Convert(function(d_){return d9(d_[0],d_[1]);},cx.getHierarchyW());};cB.scrollIntoView=function(d9,d_){dn.Sink(function(d$){if(d$)try{d_.scrollIntoViewIfNeeded();}catch(ea){((function(eb){return function(ec){return eb(c2.prettyPrint(ec));};}(function(eb){dl.log(eb);}))(ea));}},d9);};cC.render$5109$34=function(){return function(){cC.addProperty();};};cC.render=function(){var d9,d_,d$,ea,eb;return(d9=(d_=(d$=cC.properties(),dR.Make().WithHole({$:0,$0:"properties",$1:d$})),d_.WithHole(dS.EventQ2(d_.k,"addproperty",function(){return d_.i;},function(){cC.addProperty();}))),(ea=dS.CompleteHoles(d9.k,d9.h,[]),(eb=new dT.New(ea[1],cY.propertytable(ea[0])),(d9.i=eb,eb)))).get_Doc();};cC.properties$5102$33=function(d9){return function(){cC.remProperty(d9);};};cC.properties=function(){var d9;function d_(ea,eb){c6.set(d9.Get(),ea,[eb,(c6.get(d9.Get(),ea))[1]]);return d9.Set(d9.Get());}function d$(ea,eb){return(c6.get(d9.Get(),ea))[1].length>1000?null:(c6.set(d9.Get(),ea,[(c6.get(d9.Get(),ea))[0],eb]),d9.Set(d9.Get()));}d9=_do.Lens(cx.currentSnippetV(),function(ea){return ea.snpProperties;},function(ea,eb){return _0.New(ea.snpId,ea.snpName,ea.snpContent,ea.snpParentIdO,ea.snpPredIds,eb,ea.snpModified);});return ds.Convert(function(ea){var eb,ec,ed,ee,ef,eg;eb=new dN.New(dn.Map(function(eh){return(c6.get(eh,ea))[0];},d9.get_View()),function(eh){return d_(ea,eh);});ec=new dN.New(dn.Map(function(eh){var ei;ei=(c6.get(eh,ea))[1];return ei.length>1000?(((c1.Curried3(function(ej,ek,el){return ej(c2.toSafe(ek)+"...<"+a.String(el)+" chars>");}))(a.id))(da.string(ei,{$:1,$0:0},{$:1,$0:100})))(ei.length):ei;},d9.get_View()),function(eh){return d$(ea,eh);});return(ed=(ee=dR.Make().WithHole({$:8,$0:"name",$1:eb}).WithHole({$:8,$0:"value",$1:ec}),ee.WithHole(dS.EventQ2(ee.k,"remove",function(){return ee.i;},function(){cC.remProperty(ea);}))),(ef=dS.CompleteHoles(ed.k,ed.h,[["name",0],["value",0]]),(eg=new dT.New(ef[1],cY.property(ef[0])),(ed.i=eg,eg)))).get_Doc();},dn.Map(function(ea){return c6.ofSeq(c_.range(0,c6.length(ea)-1));},d9.get_View()));};cC.remProperty=function(d9){var d_;cx.currentSnippetV().Set((d_=cx.currentSnippetV().Get(),_0.New(d_.snpId,d_.snpName,d_.snpContent,d_.snpParentIdO,d_.snpPredIds,da.array(cx.currentSnippetV().Get().snpProperties,{$:1,$0:0},{$:1,$0:d9-1}).concat(da.array(cx.currentSnippetV().Get().snpProperties,{$:1,$0:d9+1},null)),d_.snpModified)));};cC.addProperty=function(){var d9;cx.currentSnippetV().Set((d9=cx.currentSnippetV().Get(),_0.New(d9.snpId,d9.snpName,d9.snpContent,d9.snpParentIdO,d9.snpPredIds,cx.currentSnippetV().Get().snpProperties.concat([["",""]]),d9.snpModified)));};cE=cD.HoverProvider=c1.Class({provideHover:function(d9,d_,d$){var ea;return _7.ofAsyncResult((ea=f.asyncResult(),ea.Run(ea.Delay(function(){var eb;eb=cD.getIndentAndFirst();return ea.Bind$1(cu.toolTip(cD.fileName(),d_.lineNumber+eb[1],d_.column+eb[0],""),function(ec){return E["AsyncResultBuilder.Bind"](ea,cD.overDescriptions(ec[0]),function(ed){return ea.Return(bB.New(c6.ofSeq(c4.map(function(ee){return by.New((c.print(ee),ee),true);},ed)),null));});});}))));}},k,cE);cE.New=c1.Ctor(function(d9){k.New.call(this);},cE);cF=cD.CompletionItemProvider=c1.Class({resolveCompletionItem:function(d9,d_){var d$;function ea(ec){return ec.$==1?c_.FailWith((function(ed){return function(ee){return ed(cW.p$9(ee));};}(a.id))(ec.$0)):ec.$0;}function eb(ec){return c7.Return(ec);}return dV.OfAsync(c7.Bind((d$=f.asyncResult(),d$.Run(d$.Delay(function(){return d$.Bind$1(cu.helpText(d9.label),function(ec){return d$.Return(bA.New(d9.kind,d9.label,c3.concat("\n",c4.collect(function(ed){return c5.ofSeq(c4.delay(function(){return c4.append(!(!ed.Signature)?[ed.Signature]:[],c4.delay(function(){return c4.append(!(!ed.Comment)?[ed.Comment]:[],c4.delay(function(){return!(!ed.Footer)?[ed.Footer]:[];}));}));}));},c4.collect(a.id,ec[0].Overloads)))));});}))),function(ec){return eb(ea(ec));}));},provideCompletionItems:function(d9,d_,d$,ea){var eb;function ec(ee){return ee.$==1?c_.FailWith((function(ef){return function(eg){return ef(cW.p$9(eg));};}(a.id))(ee.$0)):ee.$0;}function ed(ee){return c7.Return(ee);}return dV.OfAsync(c7.Bind((eb=f.asyncResult(),eb.Run(eb.Delay(function(){var ee,ef;ee=cD.getIndentAndFirst();ef=ee[0];return eb.Bind$1(cu.completion(c3.replicate(ef," ")+d9.getLineContent(d_.lineNumber),true,cD.fileName(),d_.lineNumber+ee[1],d_.column+ef,"Contains"),function(eg){return eb.Return(c6.map(function(eh){return bA.New(cD.convertGlyphChar(eh.GlyphChar),eh.Name,"");},eg[0]));});}))),function(ee){return ed(ec(ee));}));}},k,cF);cF.New=c1.Ctor(function(d9){k.New.call(this);},cF);cG=cD.DefinitionProvider=c1.Class({provideDefinition:function(d9,d_,d$){var ea;function eb(ed){return ed.$==1?c_.FailWith((function(ee){return function(ef){return ee(cW.p$9(ef));};}(a.id))(ed.$0)):ed.$0;}function ec(ed){return c7.Return(ed);}return dV.OfAsync(c7.Bind((ea=f.asyncResult(),ea.Run(ea.Delay(function(){var ed;ed=cD.getIndentAndFirst();return ea.Bind$1(cu.findDeclaration(cD.fileName(),d_.lineNumber+ed[1],d_.column+ed[0],""),function(ee){var ef,eg,eh,ei,ej,ek,el,em;ef=ee[0];eg=cD.getSnipIdIndentAndFirst(ef.Line);eh=eg[0];ei=eg[1];ej=eg[2];ek=(el="snpId:"+(em=eh.get_Id(),a.String(em)),self.monaco.Uri.parse(el));cD.getSnippetModel(eh);return ea.Return(bu.New(bs.New(ef.Column-ei,ef.Column-ei,ef.Line-ej,ef.Line-ej),ek));});}))),function(ed){return ec(eb(ed));}));}},k,cG);cG.New=c1.Ctor(function(d9){k.New.call(this);},cG);cH.New=function(d9,d_){return{fontSize:d9,lineHeight:d_};};cI.New=function(d9,d_){return{setEditor:d9,createModelReference:d_};};cD.getSelection=function(){var d9,d_,d$,ea;d9=(d_=cD.editorConfigO(),d_==null?null:d_.$0.editorO);return d9!=null&&d9.$==1?(d$=d9.$0,(ea=d$.getSelection(),d$.getModel().getValueInRange(ea))):"";};cD["goto"]=function(d9,d_,d$){var ea;ea=null;return c7.Delay(function(){var eb,ec;eb=(ec=cD.editorConfigO(),ec==null?null:ec.$0.editorO);return eb!=null&&eb.$==1?c7.Bind(cD.gotoEditor(eb.$0,d9,d_,d$),function(){return c7.Return(null);}):c7.Zero();});};cD.editorDoc=function(){var d9;return ds.Async((d9=null,c7.Delay(function(){return c7.Bind(bq.loader(),function(){return c7.Bind(cD.monacoNew(_do.Lens(cx.currentSnippetV(),function(d_){return d_.snpContent;},function(d_,d$){return _0.New(d_.snpId,d_.snpName,d$,d_.snpParentIdO,d_.snpPredIds,d_.snpProperties,d_.snpModified);}),{$:1,$0:dn.Map2(cD.transformAnnotations,cx.currentSnippetW(),cw.annotationsV().get_View())},null,null),function(d_){cD.set_editorConfigO({$:1,$0:d_});return c7.Return(bq.render(d_));});});})));};cD.editorConfigO=function(){cT.$cctor();return cT.editorConfigO;};cD.set_editorConfigO=function(d9){cT.$cctor();cT.editorConfigO=d9;};cD.parse=function(d9,d_){var d$;B.iterA(function(ea){c.print(ea);},function(){c.print();},(d$=f.asyncResult(),d$.Run(d$.Delay(function(){var ea,eb;ea="Parsing...\n"+J.skipFirstLine(cw.annotationsV().Get());cw.annotationsV().Set(ea);cD.startsV().Set(d_);eb=J.splitByChar("\n",d9);cD.set_fileName(W.getSourceDir(cw.srcDir(),eb)+"/"+cw.id()+".fsx");return d$.Bind$1(cu.parseCode(cD.fileName(),eb,true,0),function(ec){var ed;ed=c3.concat("\n",c4.append(c5.ofArray(["Parsed!"]),c4.map(function(ee){var ef,eg,eh,ei,ej;function ek(el,em){return ee.StartLine>em[1]&&ee.StartLine<=em[2];}ef=(eg=c4.tryFind(function(el){return ek(el[0],el[1]);},d_),(cD.defaultStart())(eg));eh=ef[1][0];ei=ef[1][1];return((((((((((c1.Curried(function(el,em,en,eo,ep,eq,er,es,et,eu){return el(c2.toSafe(em)+" ("+a.String(en)+", "+a.String(eo)+") - ("+a.String(ep)+", "+a.String(eq)+") "+c2.toSafe(er)+"("+c2.toSafe(es)+") \""+c2.toSafe(et)+": "+c2.toSafe(eu)+"\".");},10))(a.id))(ee.Severity==="Error"?"Err":"Warn"))(ee.StartLine-ei))(ee.StartColumn-eh))(ee.EndLine-ei))(ee.EndColumn-eh))(ef[0][1]))((ej=ef[0][0].get_Id(),a.String(ej))))(ee.Subcategory))(ee.Message);},ec[0].Errors)));cw.annotationsV().Set(ed);c4.iter(function(ee){c.print(ee);},ec[1]);return d$.Zero();});}))));};cD.monacoNew=function(d9,d_,d$,ea){var eb;eb=null;return c7.Delay(function(){var ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu;es=bq.newVar(d9);ek=es.editorO;el=_.newPojo([["fontSize",12],["lineHeight",14]]);et=a.require("vs/editor/standalone/browser/standaloneServices");eu=new et.StaticServices.codeEditorService._factory();eu.openCodeEditor=cD.openCodeEditor;er=eu;eq=["codeEditorService",er];eo=[eq,["textModelResolverService",cD.textModelResolverService()]];em=_.newPojo(eo);eg=bD.New(es["var"],es.onChange,es.onRender,ek,es.disabled,el,em);ee=bq.onRender(function(ev){var ew,ex,ey,ez;function eA(eF,eG,eH){return ex.provideHover(eF,eG,eH);}function eB(eF,eG,eH,eI){return ey.provideCompletionItems(eF,eG,eH,eI);}function eC(eF,eG){return ey.resolveCompletionItem(eF,eG);}function eD(eF,eG,eH){return ez.provideDefinition(eF,eG,eH);}function eE(eF){var eG;eG=ev.getModel();self.monaco.editor.setModelMarkers(eG,"annotations",eF);}ew=ev.getModel();self.monaco.editor.setModelLanguage(ew,"fsharp");self.monaco.editor.setTheme("vs");ex=new cE.New(ev);ey=new cF.New(ev);ez=new cG.New(ev);c.print(function(eF){return eA(eF[0],eF[1],eF[2]);});c.print(function(eF){return eB(eF[0],eF[1],eF[2],eF[3]);});c.print(function(eF){return eC(eF[0],eF[1]);});c.print(function(eF){return eD(eF[0],eF[1],eF[2]);});self.monaco.languages.registerHoverProvider("fsharp",ex);self.monaco.languages.registerCompletionItemProvider("fsharp",ey);self.monaco.languages.registerDefinitionProvider("fsharp",ez);(h.iter(function(eF){dn.Sink(eE,eF);}))(d_);},eg);return c7.Return(ee);});};cD.textModelResolverService=function(){var d9;d9=null;return cI.New(function(d_){d9={$:1,$0:d_};},function(d_){var d$;return dV.OfAsync((d$=null,c7.Delay(function(){var ea,eb,ec,ed;ec=cD.getSnippetModel(d_);ed=self.require("vs/base/common/lifecycle");eb=new ed.ImmortalReference(ec);return c7.Return(eb);})));});};cD.openCodeEditor=function(d9,d_,d$){var ea;return dV.OfAsync((ea=null,c7.Delay(function(){var eb,ec;eb=d9.resource.path;ec=(K.Guid())(eb);return ec!=null&&ec.$==1?c7.Bind(cD.gotoEditor(d_,new Z({$:0,$0:ec.$0}),d9.options.selection.startLineNumber,d9.options.selection.startColumn),function(){return c7.Return(d_);}):c7.Return(null);})));};cD.gotoEditor=function(d9,d_,d$,ea){var eb;eb=null;return c7.Delay(function(){cx.setCurrentSnippetIdO({$:1,$0:d_});return c7.Bind(c7.Sleep(200),function(){d9.focus();d9.setPosition(br.New(ea,d$));d9.revealPositionInCenter(br.New(ea,d$));return c7.Zero();});});};cD.transformAnnotations=function(d9,d_){var d$,ea;function eb(ec,ed,ee,ef,eg,eh,ei){var ej;return!c$.Equals((ej=(K.parseGuidO())(eh),ej==null?null:{$:1,$0:new Z({$:0,$0:ej.$0})}),{$:1,$0:d9.snpId})?null:{$:1,$0:bz.New(ee,eg,ed,ef,ec==="Err"?8:ec==="Warn"?4:ec==="Hint"?1:2,ei)};}d$="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*\\("+_6.rexGuid()+"\\) \"([^\"]+?)\"\\.";return c6.choose(function(ec){return eb(ec[0],ec[1],ec[2],ec[3],ec[4],ec[5],ec[6]);},c6.choose(function(ec){var ed,ee,ef;return(ee=_6.REGEX$1(d$,"",ec),ee!=null&&ee.$==1&&((ef=ee.$0,!c$.Equals(ef,null)&&ef.length===8)&&(ed=[c6.get(ee.$0,3),c6.get(ee.$0,2),c6.get(ee.$0,6),c6.get(ee.$0,7),c6.get(ee.$0,5),c6.get(ee.$0,4),c6.get(ee.$0,1)],true)))?{$:1,$0:[ed[6],c_.toInt(a.Number(ed[1])),c_.toInt(a.Number(ed[0])),c_.toInt(a.Number(ed[5])),c_.toInt(a.Number(ed[4])),ed[2],ed[3]]}:null;},(ea=_6.REGEX$1(d$,"g",d_),ea!=null&&ea.$==1?ea.$0:[])));};cD.convertGlyphChar=function(d9){return d9==="C"?6:d9==="E"?12:d9==="S"?11:d9==="I"?7:d9==="N"?8:d9==="M"?1:d9==="P"?9:d9==="F"?4:d9==="T"?6:d9==="K"?13:0;};cD.fileName=function(){cT.$cctor();return cT.fileName;};cD.set_fileName=function(d9){cT.$cctor();cT.fileName=d9;};cD.overDescriptions=function(d9){return i.sequenceSeq(c4.collect(function(d_){return c5.ofSeq(c4.delay(function(){return c4.append(!(!d_.Signature)?[c7.Return("```\n"+d_.Signature+"\n```")]:[],c4.delay(function(){function d$(ea){return c7.Return(ea);}return c4.append(!(!d_.Comment)?[c7.Bind((new dM.New()).Async("FSharpStation:FsRoot.FSharpStation+Markdown.createCommentBlock:-1840423385",[d_.Comment]),function(ea){return d$(cD.fixMarkDown(ea));})]:[],c4.delay(function(){return!(!d_.Footer)?[c7.Return(cD.fixMarkDown(d_.Footer))]:[];}));}));}));},c4.collect(a.id,d9)));};cD.fixMarkDown=function(d9){return c3.concat("\n\n",c4.map(function(d_){var d$;d$=c4.length(c4.takeWhile(function(ea){return" "===ea;},d_));return c3.replicate(d$,"&nbsp;")+da.string(d_,{$:1,$0:d$},null);},c4.map(function(d_){return c3.Replace(d_,"\u0009","- ");},J.splitByChar("\n",d9))));};cD.getSnippetModel=function(d9){var d_,d$,ea;d_=(d$="snpId:"+(ea=d9.get_Id(),a.String(ea)),self.monaco.Uri.parse(d$));return cD.getModelUri(cx.runReader(function(eb){return c_.FailWith(a.String(eb));},_2.snippetRm(d9)).snpContent,d_);};cD.getModelUri=function(d9,d_){var d$,ea,eb;d$=(ea=(eb=self.monaco.editor.getModel(d_),!eb?null:{$:1,$0:eb}),ea==null?self.monaco.editor.createModel("","fsharp",d_):ea.$0);d$.getValue()!==d9?d$.setValue(d9):void 0;return d$;};cD.getSnipIdIndentAndFirst=function(d9){var d_,d$;function ea(eb,ec){return d9>=ec[1]&&d9<=ec[2];}d_=(d$=c4.tryFind(function(eb){return ea(eb[0],eb[1]);},cD.startsV().Get()),(cD.defaultStart())(d$));return[d_[0][0],d_[1][0],d_[1][1]];};cD.getIndentAndFirst=function(){var d9,d_,d$,ea;function eb(ee){return ee[0];}function ec(ee){return ee[0];}function ed(ee){return c$.Equals(d9,ee);}d9=cx.currentSnippetV().Get().snpId;d_=(d$=c4.tryFind((ea=function(ee){return ec(eb(ee));},function(ee){return ed(ea(ee));}),cD.startsV().Get()),(cD.defaultStart())(d$));return[d_[1][0],d_[1][1]];};cD.defaultStart=function(){cT.$cctor();return cT.defaultStart;};cD.startsV=function(){cT.$cctor();return cT.startsV;};cJ.jumpToRef=function(d9){var d_,d$;function ea(eb,ec,ed){return d$>=ec&&d$<ed?{$:1,$0:eb}:null;}d_=d9.value;d$=d9.selectionStart;cJ.jumpToLine(c4.pick(function(eb){return ea(eb[0],eb[1],eb[2]);},(c4.mapFold(function(eb,ec){return[[ec,eb,eb+ec.length+1],eb+ec.length+1];},0,c3.SplitChars(d_,["\n"],0)))[0]));};cJ.jumpToLine=function(d9){var d_,d$,ea,eb,ec;d_=_6.REGEX$1(cJ.rexGuid(),"",d9);d_!=null&&d_.$==1?(d$=d_.$0,!c$.Equals(d$,null)&&d$.length===6)?(ea=c6.get(d_.$0,2),eb=c6.get(d_.$0,5),ec=c6.get(d_.$0,1),c7.Start(cD["goto"](new Z({$:0,$0:eb}),c_.toInt(a.Number(ec)),c_.toInt(a.Number(ea))),null)):void 0:void 0;};cJ.rexGuid=function(){cT.$cctor();return cT.rexGuid$1;};cK.setScrollToBottom=function(){cT.$cctor();return cT.setScrollToBottom;};cK.scrollToBottom=function(d9){var d_;c7.Start((d_=null,c7.Delay(function(){return c7.Bind(c7.Sleep(100),function(){d9.scrollTop=d9.scrollHeight;return c7.Zero();});})),null);};cK.setCurrentProperty=function(d9,d_){cx.setProperty(cx.currentSnippetV().Get(),d9,d_);};cK.getCurrentProperty=function(d9){var d_;return B.absorbO(function(){return(e.errorMsgf(function(d$){return function(ea){return d$("Property "+c2.toSafe(ea)+" not found");};}))(d9);},B.map(function(d$){return d$[0];},(d_=cK.propO(cx.currentSnippetV().Get(),d9),t.runReader(cx.snippetsColl(),d_))));};cK.buttonClick=function(d9){cK.actionClick(c3.Trim(d9.textContent));};cK.actionClick=function(d9){var d_;d_=cK.actionClickRm(d9);t.iterReaderA(function(d$){c.print(d$);},function(d$){c.print(d$);},cx.snippetsColl(),d_);};cK.actionSnp=function(d9,d_){var d$;d$=cK.actionSnpRm(d9,d_);t.iterReaderA(function(ea){c.print(ea);},function(ea){c.print(ea);},cx.snippetsColl(),d$);};cK.actionSnpRm=function(d9,d_){var d$;d$=t.fusion();return d$.Run(d$.Delay(function(){return d$.Bind(t.ofFusionM(_2.snippetFromRefORm({$:1,$0:c3.SplitChars(d9,["/"],0)})),function(ea){var eb;function ec(ed){return cK.fetchValue(d_,ed);}return ea!=null&&ea.$==1?(eb=ea.$0,d$.Bind(u.op_BarGreaterGreater(cK.getCode(eb,d_),function(ed){return cK.translateString(ec,ed);}),function(ed){return d$.Bind(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bM({$:0,$0:cw.id()})])),function(){return d$.Bind(u.op_BarGreaterGreater(t.ofFusionM(_2.fastCodeRm({$:1,$0:eb.snpId},{$:1,$0:eb.snpId})),function(ee){return ee[0];}),function(ee){return d$.Bind(t.ofFusionM(_2.predsGenerationRm(eb)),function(ef){return d$.ReturnFrom(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCodeWithPresence:854633647",[cw.srcDir(),(function(eg){return function(eh){return eg(cW.p(eh));};}(a.id))(eb.snpId),(new di(ef)).toLocaleString(),{$:0,$0:ee},{$:0,$0:ed}])));});});});})):d$.ReturnFrom(t.ofResultRM({$:1,$0:new d({$:1,$0:(function(ed){return function(ee){return ed("Snippet "+c2.toSafe(ee)+" not found");};}(a.id))(d9)})}));});}));};cK.setSnippetContent=function(d9,d_){var d$,ea;d$=(ea=t.fusion(),ea.Run(ea.Delay(function(){return ea.Bind(t.ofFusionM(_2.snippetFromRefORm({$:1,$0:c3.SplitChars(d9,["/"],0)})),function(eb){var ec;return eb!=null&&eb.$==1?(ec=eb.$0,(cx.setSnippet(_0.New(ec.snpId,ec.snpName,d_,ec.snpParentIdO,ec.snpPredIds,ec.snpProperties,ec.snpModified)),ea.Zero())):ea.ReturnFrom(t.ofResultRM({$:1,$0:new d({$:1,$0:(function(ed){return function(ee){return ed("Snippet "+c2.toSafe(ee)+" not found");};}(a.id))(d9)})}));});})));t.iterReaderA(function(eb){c.print(eb);},function(){c.print();},cx.snippetsColl(),d$);};cK.actionClickRm=function(d9){var d_;d_=t.fusion();return d_.Run(d_.Delay(function(){var d$;d$=(function(ea){return function(eb){return ea("Action "+c2.toSafe(eb)+" ...");};}(a.id))(d9);cw.outputMsgs().Set(d$);return d_.Bind(cK.getBaseSnippet(),function(ea){function eb(ec){return cK.fetchValue(d9,ec);}return d_.Bind(u.op_BarGreaterGreater(cK.getCode(ea,d9),function(ec){return cK.translateString(eb,ec);}),function(ec){return d_.Bind(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bM({$:0,$0:cw.id()})])),function(){return d_.Bind(u.op_BarGreaterGreater(t.ofFusionM(_2.fastCodeRm({$:1,$0:ea.snpId},{$:1,$0:ea.snpId})),function(ed){return ed[0];}),function(ed){return d_.Bind(t.ofFusionM(_2.predsGenerationRm(ea)),function(ee){return d_.ReturnFrom(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCodeWithPresence:854633647",[cw.srcDir(),(function(ef){return function(eg){return ef(cW.p(eg));};}(a.id))(ea.snpId),(new di(ee)).toLocaleString(),{$:0,$0:ed},{$:0,$0:ec}])));});});});});});}));};cK.fetchValue=function(d9,d_){var d$,ea,eb;return d_==="button"?d9:(d$=(ea=(eb=(dY.splitName(new dY.PlugInName({$:0,$0:"Snp_"+c3.Replace(a.String(cx.currentSnippetV().Get().snpId.get_Id()),"-","")})))(d_),dY.tryGetWoW(eb[0],eb[1])),ea==null?null:dn.TryGet(ea.$0)),d$==null?(function(ec){return function(ed){return ec("$[not found:"+c2.toSafe(ed)+"]");};}(a.id))(d_):d$.$0);};cK.getCode=function(d9,d_){var d$;d$=t.fusion();return d$.Run(d$.Delay(function(){var ea;return d$.Bind((ea=t.fusion(),ea.Run(ea.Delay(function(){return ea.Bind(cK.propO(d9,d_),function(eb){return eb==null?c3.StartsWith(d_,":")?ea.Return(da.string(d_,{$:1,$0:1},null)):ea.Bind(cK.propO(d9,"action-template"),function(ec){return ea.Return(ec==null?"${button}() |> printfn \"%A\"":ec.$0);}):ea.Return(eb.$0);});}))),function(eb){return d$.Bind(cK.codeModule(d9,eb),function(ec){return d$.Return(cx.prepAnyCode(ec));});});}));};cK.codeModule=function(d9,d_){var d$;d$=t.fusion();return d$.Run(d$.Delay(function(){return d$.Bind(cK.propO(d9,"Open"),function(ea){var eb;return ea!=null&&ea.$==1?d$.Return((eb=(J.indentStr(4))(ea.$0+"\n"+d_),(((c1.Curried3(function(ec,ed,ee){return ec("module Call"+c2.toSafe(ed)+" =\n"+c2.toSafe(ee));}))(a.id))(a.String(di.now())))(eb))):d$.Return(d_);});}));};cK.getBaseSnippet=function(){var d9;d9=t.fusion();return d9.Run(d9.Delay(function(){var d_;d_=cx.currentSnippetV().Get();return d9.Bind(cK.propO(d_,"BaseSnippet"),function(d$){return d9.ReturnFrom(u.op_BarGreaterGreater(u.op_BarGreaterGreater(t.insertO(d$==null?null:{$:1,$0:t.ofFusionM(_2.snippetFromRefORm({$:1,$0:c3.SplitChars(d$.$0,["/"],0)}))}),function(ea){return ea==null?null:ea.$0;}),function(ea){return ea==null?d_:ea.$0;}));});}));};cK.translateString=function(d9,d_){function d$(ea,eb){var ec;ec=J.delimitedO("${","}",eb);return ec!=null&&ec.$==1?d$(ea+ec.$0[0],d9(ec.$0[1])+ec.$0[2]):ea+eb;}return d$("",d_);};cK.propO=function(d9,d_){function d$(ea,eb){return eb[0];}return u.op_BarGreaterGreater(t.ofFusionM(_2.propertyHierORm(d_,d9)),function(ea){var eb;return ea==null?null:{$:1,$0:(eb=ea.$0,d$(eb[0],eb[1]))};});};cM.New=function(d9,d_,d$){return{snippets:d9,modified:d_,collapsed:d$};};cL.serModel=function(){cT.$cctor();return cT.serModel;};cL.getModel=function(d9,d_,d$){return cM.New(c6.ofSeq(d9),d_,d$);};cL.serSnippet=function(){cT.$cctor();return cT.serSnippet;};cL.serSnippetId=function(){cT.$cctor();return cT.serSnippetId;};cN.saveAs=function(){var d9,d_,d$,ea;d9=(d_=c4.last(c3.SplitChars(cN.fileName().Get(),["/","\\"],0)),d_===""?"noname.snippets":d_);a.saveAs(new a.Blob([(d$=(ea=cx.getSnippetsGen(),cL.getModel(ea[0],ea[1],ea[2])),(cL.serModel())[0](d$))],{type:"text/plain;charset=utf-8"}),d9);cx.updateGeneration();};cN.loadTextFile=function(d9){var d_,d$;if(cN.canLoad()){d_=d9.files;d_.length>0?(d$=new a.FileReader(),d$.onload=function(ea){return cN.parseText(ea.target.result);},cN.fileName().Set(d_.item(0).name),d$.readAsText(d_.item(0))):void 0;}};cN.parseText=function(d9){var d_,d$;try{d_=(d$=dB.parse(d9),(cL.serModel())[1](d$));cx.setSnippetsGen(d_.snippets,d_.collapsed);}catch(ea){a.alert(a.String(ea));((function(eb){return function(ec){return eb(c2.prettyPrint(ec));};}(function(eb){dl.log(eb);}))(ea));}};cN.canLoad=function(){return c$.Equals(dn.TryGet(cx.SaveAsClassW()),{$:1,$0:""})||a.confirm("Changes have not been saved, do you really want to load?");};cN.fileName=function(){cT.$cctor();return cT.fileName$1;};cO.importFile=function(d9){var d_,d$;if(cN.canLoad()){d_=d9.files;d_.length>0?(d$=new a.FileReader(),d$.onload=function(ea){return cO.parseText(ea.target.result);},d$.readAsText(d_.item(0))):void 0;}};cO.parseText=function(d9){var d_;try{cx.setSnippetsGen((d_=dB.parse(d9),(cO.serSnippets())[1](d_)),new dg.New$1(null));}catch(d$){a.alert(a.String(d$));((function(ea){return function(eb){return ea(c2.prettyPrint(eb));};}(function(ea){dl.log(ea);}))(d$));}};cO.serSnippets=function(){cT.$cctor();return cT.serSnippets;};cO.serSnippet2=function(){cT.$cctor();return cT.serSnippet2;};cO.serSnippetId2=function(){cT.$cctor();return cT.serSnippetId2;};cQ.NoSnippet={$:2};cP.mainProgram=function(){var d9,d_,d$,ea,eb,ec,ed,ee,ef;dY.addPlugIn(dZ.New(new dY.PlugInName({$:0,$0:"FSharpStation"}),d0.Create(function(eg){return eg.varName;},[dY.newVar(new dY.PlgElemName({$:0,$0:"fileName"}),cN.fileName()),dY.newVar(new dY.PlgElemName({$:0,$0:"SnippetName"}),_do.Lens(cx.currentSnippetV(),function(eg){return eg.snpName;},function(eg,eh){return _0.New(eg.snpId,eh,eg.snpContent,eg.snpParentIdO,eg.snpPredIds,eg.snpProperties,eg.snpModified);})),dY.newVar(new dY.PlgElemName({$:0,$0:"Content"}),_do.Lens(cx.currentSnippetV(),function(eg){return eg.snpContent;},function(eg,eh){return _0.New(eg.snpId,eg.snpName,eh,eg.snpParentIdO,eg.snpPredIds,eg.snpProperties,eg.snpModified);})),dY.newVar(new dY.PlgElemName({$:0,$0:"Output"}),cw.outputMsgs()),dY.newVar(new dY.PlgElemName({$:0,$0:"Parser"}),cw.annotationsV())]),d0.Create(function(eg){return eg.viwName;},[dY.newViw(new dY.PlgElemName({$:0,$0:"FsCode"}),cx.FsCodeW()),dY.newViw(new dY.PlgElemName({$:0,$0:"SaveNeeded"}),cx.SaveAsClassW()),dY.newViw(new dY.PlgElemName({$:0,$0:"CurrentPath"}),cx.currentPathW()),dY.newViw(new dY.PlgElemName({$:0,$0:"FStationId"}),dn.Const(cw.id())),dY.newViw(new dY.PlgElemName({$:0,$0:"CurrentSid"}),dn.Map(function(eg){return a.String(eg.get_Id());},cx.CurrentSnippetIdW()))]),d0.Create(function(eg){return eg.docName;},[dY.newDoc(new dY.PlgElemName({$:0,$0:"mainDoc"}),d1.Create(cP.mainDoc)),dY.newDoc(new dY.PlgElemName({$:0,$0:"editor"}),d1.Create(function(){return ds.Element("div",[],[cD.editorDoc()]);})),dY.newDoc(new dY.PlgElemName({$:0,$0:"Snippets"}),d1.Create(cB.render)),dY.newDoc(new dY.PlgElemName({$:0,$0:"Properties"}),d1.Create(cC.render)),dY.newDoc(new dY.PlgElemName({$:0,$0:"ButtonsRight"}),d1.Create(cP.buttonsRight))]),d0.Create(function(eg){return eg.actName;},[dY.newAct(new dY.PlgElemName({$:0,$0:"AddSnippet"}),function(){cx.newSnippet();}),dY.newAct(new dY.PlgElemName({$:0,$0:"RemoveSnippet"}),function(){cP.deleteSnippet();}),dY.newAct(new dY.PlgElemName({$:0,$0:"IndentIn"}),function(){cx.indentIn();}),dY.newAct(new dY.PlgElemName({$:0,$0:"IndentOut"}),function(){cx.indentOut();}),dY.newAct(new dY.PlgElemName({$:0,$0:"AddProperty"}),function(){cC.addProperty();}),dY.newAct(new dY.PlgElemName({$:0,$0:"SaveAs"}),function(){cN.saveAs();}),dY.newAct(new dY.PlgElemName({$:0,$0:"RunFS"}),function(){cP.runFsCode();}),dY.newAct(new dY.PlgElemName({$:0,$0:"SelectionToFsi"}),function(){cP.selectionToFsi();}),dY.newAct(new dY.PlgElemName({$:0,$0:"AbortFsi"}),function(){(new dM.New()).Send("FSharpStation:FsRoot.Library2+FsiAgent.abortFsiExe:6",[]);}),dY.newAct(new dY.PlgElemName({$:0,$0:"DisposeFsi"}),function(){(new dM.New()).Send("FSharpStation:FsRoot.Library2+FsiAgent.disposeFsiExe:6",[]);}),dY.newActF(new dY.PlgElemName({$:0,$0:"LoadFile"}),{$:1,$0:function(eg){cN.loadTextFile(eg);},$1:"FileElement"}),dY.newActF(new dY.PlgElemName({$:0,$0:"Import"}),{$:1,$0:function(eg){cO.importFile(eg);},$1:"FileElement"}),dY.newActF(new dY.PlgElemName({$:0,$0:"JumpTo"}),{$:1,$0:function(eg){cJ.jumpToRef(eg);},$1:"textarea"}),dY.newActF(new dY.PlgElemName({$:0,$0:"ButtonClick"}),{$:1,$0:function(eg){cK.buttonClick(eg);},$1:"button"}),dY.newActF(new dY.PlgElemName({$:0,$0:"ActionClick"}),{$:1,$0:function(eg){cK.actionClick(eg);},$1:"name"}),dY.newActF(new dY.PlgElemName({$:0,$0:"SetScrollToBottom"}),{$:1,$0:function(eg){(cK.setScrollToBottom())(eg);},$1:"textarea"}),dY.newActF(new dY.PlgElemName({$:0,$0:"ActionSnp"}),{$:2,$0:function(eg){return function(eh){return cK.actionSnp(eg,eh);};},$1:"snpPath",$2:"name"}),dY.newActF(new dY.PlgElemName({$:0,$0:"setCurrentProperty"}),{$:2,$0:function(eg){return function(eh){return cK.setCurrentProperty(eg,eh);};},$1:"name",$2:"value"}),dY.newActF(new dY.PlgElemName({$:0,$0:"setSnippetContent"}),{$:2,$0:function(eg){return function(eh){return cK.setSnippetContent(eg,eh);};},$1:"path",$2:"value"})]),d0.Create(function(eg){return eg.qryName;},[dY.newQry(new dY.PlgElemName({$:0,$0:"PropertyRA"}),cK.getCurrentProperty)])));d2.addLayout((d9=(d_=self.document.getElementById("GlobalLayout"),c$.Equals(d_,null)?"\n                    menuEditor       horizontal  65       menuLogo                  editorMessages\n                    double           horizontal  0-50-100 AppFramework.AppFwkClient menuEditor\n                    menuLogo         vertical    350      logo                      menu\n                    logo             span       \"margin:0; color:gray; font-size: 55px; font-weight:530\" \"F# Station\"\n                    editorMessages   horizontal 10-83-100 editorButtons             messages\n                    messages         vertical   0-50-100  messagesLeft              messagesRight\n                    editorButtons    vertical -120 snippetsSnippet buttons\n                    buttons div      \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\" btnSaveAs none x btnAddSnippet btnDeleteSnippet btnIndentIn btnIndentOut none x btnRunFS btnInputFsi btnAbortFsi\n                    snippetsSnippet  vertical   0-20-100  snippets                  editorProperties\n                    snippets         horizontal 20        \"${FSharpStation.CurrentPath}\" FSharpStation.Snippets\n                    editorProperties vertical   0-100-100 snippet                   properties\n                    properties       div        \"\"        FSharpStation.Properties\n                    snippet          horizontal 35        Name                      FSharpStation.editor\n                    menu             span  \"\" btnLoad btnImport\n        \n                    btnSaveAs        button FSharpStation.SaveAs         \"class=btn ${FSharpStation.SaveNeeded}\" \"Save as...    \"\n                    btnAddSnippet    button FSharpStation.AddSnippet     \"\"                  \"Add Snippet   \"\n                    btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\n                    btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\n                    btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\n                    btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\n                    btnInputFsi      button FSharpStation.selectionToFsi   \"\"                  \"selection |> Fsi\"\n                    btnAbortFsi      button FSharpStation.AbortFsi       \"\"                  \"Abort Fsi     \"\n        \n                    messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\n                    messagesRight    wcomp-tabstrip                      \"\"                  Parser\n        \n                    Output           textarea  FSharpStation.Output      \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \n                    FsCode           textarea  FSharpStation.FsCode      \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \n                    Parser           textarea  FSharpStation.Parser      \"tabname=Parser ; placeholder=Parser messages; dblclick=${FSharpStation.JumpTo} ; spellcheck=false\" \n                    Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\n                    btnLoad          Doc       InputFile                 \"\"     \"Load File...\" FSharpStation.LoadFile  FileName\n                    btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\n                    FileName         div                                 \"class=form-control\"  FSharpStation.fileName\n                  ":d_.textContent),d2.newLyt(cP.FStationLyt(),d9)));dn.Sink(function(eg){(h.iter(function(eh){try{self["eval"].apply(self,["CIPHERSpaceLoadFilesDoAfter(function(){IntelliFactory.Runtime.Start()})"]);self["eval"].apply(self,[eh[1]]);}catch(ei){c.print(ei);}}))(eg);},(d$=cx.currentLayoutJSDW(),(ea=[_do.Create$1(null)],(dn.Sink(function(eg){if(!c$.Equals(ea[0].Get(),eg))ea[0].Set(eg);},d$),ea[0].get_View()))));dn.Sink(function(eg){var eh,ei,ej,ek,el,em;eh=(ei=eg==null?null:(ej=eg.$0,(ek=ej[0],(el=ej[1],(d2.addLayout(d2.newLyt(new dY.PlugInName({$:0,$0:ek}),el)),el===""?null:{$:1,$0:ek})))),(em=cP.FStationLyt().get_Id(),ei==null?em:ei.$0));dY.mainDocV().Set(eh);},(eb=cx.currentLayoutDW(),(ec=[_do.Create$1(null)],(dn.Sink(function(eg){if(!c$.Equals(ec[0].Get(),eg))ec[0].Set(eg);},eb),ec[0].get_View()))));dn.Sink(function(eg){var eh;c7.Start((eh=null,c7.Delay(function(){return c7.Bind(c7.Sleep(500),function(){self.document.title=eg;return c7.Zero();});})),null);},cx.currentPathW());ed=(ee=dY.getMainDoc().f(),dR.Make().WithHole({$:0,$0:"maincontent",$1:ee}));ef=dS.CompleteHoles(ed.k,ed.h,[]);ed.i=new dT.New(ef[1],dx.RunFullDocTemplate(ef[0]));};cP.mainDoc$5873$78=a.id;cP.mainDoc$5864$39=function(){return function(d9){cJ.jumpToRef(d9.Target);};};cP.mainDoc$5863$39=function(){return function(d9){d9.Target.value="";};};cP.mainDoc$5862$39=function(){return function(d9){cO.importFile(d9.Target);};};cP.mainDoc$5861$39=function(){return function(d9){d9.Target.value="";};};cP.mainDoc$5860$39=function(){return function(d9){cN.loadTextFile(d9.Target);};};cP.mainDoc=function(){var d9,d_,d$,ea,eb,ec,ed,ee;d9=cP.hookDoc("FSharpStation","ButtonsRight",function(ef,eg){return ef.WithHole({$:0,$0:"buttonsright",$1:eg});},cP.hookDoc("FSharpStation","Properties",function(ef,eg){return ef.WithHole({$:0,$0:"properties",$1:eg});},cP.hookDoc("FSharpStation","Snippets",function(ef,eg){return ef.WithHole({$:0,$0:"snippets",$1:eg});},cP.hookDoc("FSharpStation","editor",function(ef,eg){return ef.WithHole({$:0,$0:"codeeditor",$1:eg});},cP.hookAct("FSharpStation","SaveAs",function(ef,eg){return ef.WithHole(dS.EventQ2(ef.k,"saveas",function(){return ef.i;},eg));},cP.hookViw("FSharpStation","SaveNeeded",function(ef,eg){return ef.WithHole({$:2,$0:"saveasclass",$1:eg});},cP.hookViw("FSharpStation","FSCode",function(ef,eg){return ef.WithHole({$:8,$0:"fscode",$1:new dN.New(eg,a.ignore)});},cP.hookVar("FSharpStation","Parser",function(ef,eg){return ef.WithHole({$:8,$0:"parser",$1:eg});},cP.hookVar("FSharpStation","Output",function(ef,eg){return ef.WithHole({$:8,$0:"output",$1:eg});},cP.hookVar("FSharpStation","SnippetName",function(ef,eg){return ef.WithHole({$:8,$0:"name",$1:eg});},cP.hookVar("FSharpStation","fileName",function(ef,eg){return ef.WithHole({$:8,$0:"filename",$1:eg});},(d_=(d$=(ea=(eb=(ec=dR.Make(),ec.WithHole(dS.EventQ2(ec.k,"loadfilechanged",function(){return ec.i;},function(ef){cN.loadTextFile(ef.Target);}))),eb.WithHole(dS.EventQ2(eb.k,"loadfileclear",function(){return eb.i;},function(ef){ef.Target.value="";}))),ea.WithHole(dS.EventQ2(ea.k,"importfilechanged",function(){return ea.i;},function(ef){cO.importFile(ef.Target);}))),d$.WithHole(dS.EventQ2(d$.k,"importfileclear",function(){return d$.i;},function(ef){ef.Target.value="";}))),d_.WithHole(dS.EventQ2(d_.k,"jumpref",function(){return d_.i;},function(ef){cJ.jumpToRef(ef.Target);}))))))))))))));return(ed=dS.CompleteHoles(d9.k,d9.h,[["filename",0],["name",0],["output",0],["fscode",0],["parser",0]]),(ee=new dT.New(ed[1],cY.layout(ed[0])),(d9.i=ee,ee))).get_Doc();};cP.buttonsRight$5846$74=a.id;cP.buttonsRight$5845$74=a.id;cP.buttonsRight$5844$74=a.id;cP.buttonsRight$5843$74=a.id;cP.buttonsRight$5842$74=a.id;cP.buttonsRight=function(){var d9,d_,d$;d9=cP.hookAct("FSharpStation","RunFS",function(ea,eb){return ea.WithHole(dS.EventQ2(ea.k,"runfs",function(){return ea.i;},eb));},cP.hookAct("FSharpStation","IndentOut",function(ea,eb){return ea.WithHole(dS.EventQ2(ea.k,"indentout",function(){return ea.i;},eb));},cP.hookAct("FSharpStation","IndentIn",function(ea,eb){return ea.WithHole(dS.EventQ2(ea.k,"indentin",function(){return ea.i;},eb));},cP.hookAct("FSharpStation","RemoveSnippet",function(ea,eb){return ea.WithHole(dS.EventQ2(ea.k,"removesnippet",function(){return ea.i;},eb));},cP.hookAct("FSharpStation","AddSnippet",function(ea,eb){return ea.WithHole(dS.EventQ2(ea.k,"addsnippet",function(){return ea.i;},eb));},dR.Make())))));return(d_=dS.CompleteHoles(d9.k,d9.h,[]),(d$=new dT.New(d_[1],cY.buttonsright(d_[0])),(d9.i=d$,d$))).get_Doc();};cP.hookDoc=function(d9,d_,d$,ea){var eb,ec,ed;eb=(ec=dY.tryGetDoc(new dY.PlugInName({$:0,$0:d9}),new dY.PlgElemName({$:0,$0:d_})),ec==null?null:{$:1,$0:(ed=ec.$0,((((c1.Curried3(function(ee,ef,eg){return ee("Doc    "+c2.toSafe(ef)+"."+c2.toSafe(eg)+" hooked");}))(function(ee){dl.log(ee);}))(d9))(d_),d$(ea,ds.EmbedView(dn.Map(function(){return dY.getLazyDoc(ed);},dY.mainDocV().get_View())))))});return eb==null?((((c1.Curried3(function(ee,ef,eg){return ee("Doc    "+c2.toSafe(ef)+"."+c2.toSafe(eg)+" not found");}))(function(ee){dl.log(ee);}))(d9))(d_),ea):eb.$0;};cP.hookAct=function(d9,d_,d$,ea){var eb,ec,ed;eb=(ec=dY.tryGetAct(new dY.PlugInName({$:0,$0:d9}),new dY.PlgElemName({$:0,$0:d_})),ec==null?null:{$:1,$0:(ed=ec.$0,((((c1.Curried3(function(ee,ef,eg){return ee("Action "+c2.toSafe(ef)+"."+c2.toSafe(eg)+" hooked");}))(function(ee){dl.log(ee);}))(d9))(d_),d$(ea,function(){dY.callFunction(null,null,ed.actFunction);})))});return eb==null?((((c1.Curried3(function(ee,ef,eg){return ee("Action "+c2.toSafe(ef)+"."+c2.toSafe(eg)+" not found");}))(function(ee){dl.log(ee);}))(d9))(d_),ea):eb.$0;};cP.hookViw=function(d9,d_,d$,ea){var eb,ec;eb=(ec=dY.tryGetViw(new dY.PlugInName({$:0,$0:d9}),new dY.PlgElemName({$:0,$0:d_})),ec==null?null:{$:1,$0:((((c1.Curried3(function(ed,ee,ef){return ed("View   "+c2.toSafe(ee)+"."+c2.toSafe(ef)+" hooked");}))(function(ed){dl.log(ed);}))(d9))(d_),d$(ea,ec.$0.viwView))});return eb==null?((((c1.Curried3(function(ed,ee,ef){return ed("View   "+c2.toSafe(ee)+"."+c2.toSafe(ef)+" not found");}))(function(ed){dl.log(ed);}))(d9))(d_),ea):eb.$0;};cP.hookVar=function(d9,d_,d$,ea){var eb,ec;eb=(ec=dY.tryGetVar(new dY.PlugInName({$:0,$0:d9}),new dY.PlgElemName({$:0,$0:d_})),ec==null?null:{$:1,$0:((((c1.Curried3(function(ed,ee,ef){return ed("Var    "+c2.toSafe(ee)+"."+c2.toSafe(ef)+" hooked");}))(function(ed){dl.log(ed);}))(d9))(d_),d$(ea,ec.$0.varVar))});return eb==null?((((c1.Curried3(function(ed,ee,ef){return ed("Var    "+c2.toSafe(ee)+"."+c2.toSafe(ef)+" not found");}))(function(ed){dl.log(ed);}))(d9))(d_),ea):eb.$0;};cP.FStationLyt=function(){cT.$cctor();return cT.FStationLyt;};cP.deleteSnippet=function(){var d9;d9=cx.currentSnippetV().Get();!c$.Equals(d9.snpId,Z.get_Empty())&&a.confirm((function(d_){return function(d$){return d_("Do you want to delete "+c2.toSafe(d$)+"?");};}(a.id))(_2.snippetName(d9.snpName,d9.snpContent)))?cx.deleteCurrentSnippet():void 0;};cP.selectionToFsi=function(){var d9,d_,d$;function ea(eb){cw.appendMsgs(c3.Replace(eb,"xXxYyYyhH","Done!"));}d9=(d_=t.fusion(),d_.Run(d_.Delay(function(){return d_.Bind(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bM({$:0,$0:cw.id()})])),function(){var eb;return d_.Bind((eb=cD.getSelection(),t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.sendFsiInput:-1181784350",[eb+";;"]))),function(){return d_.Return();});});})));t.iterResultA((d$=function(eb){return function(ec){return eb("Error:\n"+cW.p$1(ec));};}(a.id),function(eb){return ea(d$(eb));}),a.ignore,d9);};cP.runFsCode=function(){var d9;function d_(d$){cw.appendMsgs(c3.Replace(d$,"xXxYyYyhH","Done!"));}d9=dn.TryGet(cx.FsCodeW());(h.iter(function(d$){var ea,eb,ec;ea=(eb=t.fusion(),eb.Run(eb.Delay(function(){cw.outputMsgs().Set("Running F#...");return eb.Bind(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bM({$:0,$0:cw.id()})])),function(){return eb.ReturnFrom(t.ofAsync((new dM.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCode:-623788033",[cw.srcDir(),{$:0,$0:d$}])));});})));t.iterResultA((ec=function(ed){return function(ee){return ed("Error:\n"+cW.p$1(ee));};}(a.id),function(ed){return d_(ec(ed));}),a.ignore,ea);}))(d9);};cP.endPointV=function(){cT.$cctor();return cT.endPointV;};cR.processMessage=function(d9){var d_,d$;return B.map(function(ea){return ea[0];},(d_=(d$=t.fusion(),d$.Run(d$.Delay(function(){var ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el;function em(eo){cx.setProperty(eo,ek,el);return"Ok";}switch(d9.$==1?(ea=d9.$0,1):d9.$==2?(ea=d9.$0,2):d9.$==8?(ea=d9.$0,3):d9.$==3?(ea=d9.$0,4):d9.$==4?(eb=d9.$0,!c$.Equals(eb,null)&&eb.length===2?c6.get(d9.$0,0)==="AddOutput"?(ea=c6.get(d9.$0,1),5):c6.get(d9.$0,0)==="ExecJS"?(ea=c6.get(d9.$0,1),6):(ea=[c6.get(d9.$0,0),c6.get(d9.$0,1)],9):(ec=d9.$0,!c$.Equals(ec,null)&&ec.length===4?c6.get(d9.$0,0)==="SetProperty"?(ea=[c6.get(d9.$0,1),c6.get(d9.$0,2),c6.get(d9.$0,3)],7):14:(ed=d9.$0,!c$.Equals(ed,null)&&ed.length===1?(ea=c6.get(d9.$0,0),8):(ee=d9.$0,!c$.Equals(ee,null)&&ee.length===3?(ea=[c6.get(d9.$0,0),c6.get(d9.$0,1),c6.get(d9.$0,2)],10):14)))):d9.$==6?(ea=d9.$0,11):d9.$==7?(ea=[d9.$1,d9.$0],12):d9.$==5?13:0){case 0:return d$.Return({$:0,$0:cw.id()});case 1:return d$.Bind(t.traverseSeq(function(en){return t.ofFusionM(_2.snippetFromRefORm(en));},ea),function(en){return d$.Return({$:1,$0:c6.ofSeq(c4.choose(a.id,en))});});case 2:cx.clearPredsCache();return d$.Bind(t.absorbO(function(){return new d({$:1,$0:(function(en){return function(eo){return en("Snippet not found "+cW.p$2(eo));};}(a.id))(ea)});},t.ofFusionM(_2.snippetFromRefORm(ea))),function(en){return d$.ReturnFrom(u.op_BarGreaterGreater(u.op_BarGreaterGreater(t.ofFusionM(_2.fastCodeRm({$:1,$0:en.snpId},{$:1,$0:en.snpId})),function(eo){return eo[0];}),function(eo){return{$:0,$0:eo};}));});case 3:return d$.Bind(t.absorbO(function(){return new d({$:1,$0:(function(en){return function(eo){return en("Snippet not found "+cW.p$2(eo));};}(a.id))(ea)});},t.ofFusionM(_2.snippetFromRefORm(ea))),function(en){return d$.Bind(t.ofFusionM(_2.predsLRm(en.snpId)),function(eo){return d$.Bind(t.traverseSeq(function(ep){return t.ofFusionM(_2.snippetORm(ep));},eo),function(ep){function eq(er){return er.snpModified;}return d$.Return({$:2,$0:c4.max(c4.choose(function(er){return er==null?null:{$:1,$0:eq(er.$0)};},ep))});});});});case 4:return d$.Bind(t.absorbO(function(){return new d({$:1,$0:(function(en){return function(eo){return en("Snippet not found "+cW.p$2(eo));};}(a.id))(ea)});},t.ofFusionM(_2.snippetFromRefORm(ea))),function(en){return d$.Bind(t.ofFusionM(_2.predsLRm(en.snpId)),function(eo){return d$.Bind(t.traverseSeq(function(ep){return t.ofFusionM(_2.snippetORm(ep));},eo),function(ep){return d$.Return({$:1,$0:c6.ofSeq(c4.choose(a.id,ep))});});});});case 5:cw.appendMsgs(ea);return d$.Return({$:0,$0:"Ok"});case 6:try{eh={$:0,$0:(ei=self["eval"].apply(self,[ea]),c$.Equals(ei,null)?"":(function(en){return function(eo){return en(c2.prettyPrint(eo));};}(a.id))(ei))};}catch(en){eh={$:1,$0:new d({$:5,$0:en.message,$1:en.stack})};}eg=t.ofResultRM(eh);return d$.Bind(eg,function(eo){return d$.Return({$:0,$0:eo});});case 7:ej=ea[0];ek=ea[1];el=ea[2];return d$.Bind(t.absorbO(function(){return new d({$:1,$0:(function(eo){return function(ep){return eo("Snippet not found: "+c2.toSafe(ep));};}(a.id))(ej)});},u.op_BarGreaterGreater(t.ofFusionM(_2.snippetFromRefORm({$:1,$0:c3.SplitChars(ej,["/"],0)})),function(eo){return eo==null?null:{$:1,$0:em(eo.$0)};})),function(eo){return d$.Return({$:0,$0:eo});});case 8:return d$.ReturnFrom(cR.actionCall(ea,null,null));case 9:return d$.ReturnFrom(cR.actionCall(ea[0],ea[1],null));case 10:return d$.ReturnFrom(cR.actionCall(ea[0],ea[1],ea[2]));case 11:return d$.ReturnFrom(cR.getValue(ea));case 12:return d$.ReturnFrom(cR.setValue(ea[1],ea[0]));case 13:return d$.Return({$:0,$0:self.document.baseURI});case 14:return d$.Return(_3.Hole[(function(eo){return function(ep){return eo("TODO message: "+cW.p$3(ep));};}(a.id))(d9)]);}}))),t.runReader(cx.snippetsColl(),d_)));};cR.setValue=function(d9,d_){var d$;d$=t.fusion();return d$.Run(d$.Delay(function(){var ea,eb;ea=(eb=(dY.splitName(cP.FStationLyt()))(d9),dY.tryGetVar(eb[0],eb[1]));return ea!=null&&ea.$==1?(ea.$0.varVar.Set(d_),d$.Return({$:0,$0:"Ok"})):d$.ReturnFrom(t.ofResultRM({$:1,$0:new d({$:1,$0:(function(ec){return function(ed){return ec("Var "+c2.toSafe(ed)+" not found");};}(a.id))(d9)})}));}));};cR.getValue=function(d9){var d_;d_=t.fusion();return d_.Run(d_.Delay(function(){var d$,ea;d$=(ea=(dY.splitName(cP.FStationLyt()))(d9),dY.tryGetWoW(ea[0],ea[1]));return d$!=null&&d$.$==1?d_.Bind(t.ofAsync(dn.GetAsync(d$.$0)),function(eb){return d_.Return({$:0,$0:eb});}):d_.ReturnFrom(t.ofResultRM({$:1,$0:new d({$:1,$0:(function(eb){return function(ec){return eb("Var or View "+c2.toSafe(ec)+" not found");};}(a.id))(d9)})}));}));};cR.actionCall=function(d9,d_,d$){var ea;ea=t.fusion();return ea.Run(ea.Delay(function(){var eb,ec;eb=(ec=(dY.splitName(cP.FStationLyt()))(d9),dY.tryGetAct(ec[0],ec[1]));return eb!=null&&eb.$==1?(dY.callFunction(d_,d$,eb.$0.actFunction),ea.Return({$:0,$0:"Ok"})):ea.ReturnFrom(t.ofResultRM({$:1,$0:new d({$:1,$0:(function(ed){return function(ee){return ed("Action "+c2.toSafe(ee)+" not found");};}(a.id))(d9)})}));}));};cR.wsStationClient=function(){cT.$cctor();return cT.wsStationClient;};cS.content$6139$54=function(){cP.mainProgram();return ds.TextNode("Initialized");};cT.$cctor=function(){var d_,ec,ei,el,em,en,er,es,ew,ex,eB,eC,eD,eE,eG,eH,eK,eL,eO,eR,eS,eU,eV,eW,eX,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fA,fB;cT.$cctor=a.ignore;cT.rtn=function(fC){return[fC];};cT.result=new m.New();cT.result$1=l.result();cT.resultP=new o.New();cT.fusion=new s.New();cT.fusion$1=new w.New();cT.resultM=new y.New();cT.asyncResult=new C.New();cT.asyncResultP=new D.New();cT.asyncResultM=new G.New();function d9(fC){return c3.concat("\n",fC);}cT.unindentStr=function(fC){return d9(J.unindent(fC));};function d$(fC){return J.splitByChar("\n",fC);}function ea(fC){var fD,fE;return da.array(fC,{$:1,$0:0},{$:1,$0:(fD=0,(fE=c6.length(fC)-2,c$.Compare(fD,fE)===1?fD:fE))});}function eb(fC){return c3.concat("\n",fC);}cT.skipLastLine=(d_=function(fC){return ea(d$(fC));},function(fC){return eb(d_(fC));});function ed(fC){return fC+"T00:00:00";}cT.parseDateO2=(ec=K.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=d3.TryParse(fC),fE!=null&&fE.$==1&&(fD=fE.$0,true)),fD];}),function(fC){return ec(ed(fC));});cT.parseDateO=K.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=d3.TryParse(fC),fE!=null&&fE.$==1&&(fD=fE.$0,true)),fD];});cT.parseIntO=K.tryParseWith(function(fC){var fD;fD=0;return[d4.TryParseInt32(fC,{get:function(){return fD;},set:function(fE){fD=fE;}}),fD];});cT.parseInt64O=K.tryParseWith(function(fC){var fD;fD=0;return[d4.TryParseInt64(fC,{get:function(){return fD;},set:function(fE){fD=fE;}}),fD];});cT.parseSingleO=K.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=a.Number(fC),a.isNaN(fE)?false:(fD=fE,true)),fD];});cT.parseDoubleO=K.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=a.Number(fC),a.isNaN(fE)?false:(fD=fE,true)),fD];});cT.parseGuidO=K.tryParseWith(function(fC){var fD;fD=null;return[de.TryParse(fC,{get:function(){return fD;},set:function(fE){fD=fE;}}),fD];});cT["|Date|_|"]=K.parseDateO();cT["|Int|_|"]=K.parseIntO();cT["|Int64|_|"]=K.parseInt64O();cT["|Single|_|"]=K.parseSingleO();cT["|Double|_|"]=K.parseDoubleO();cT["|Guid|_|"]=K.parseGuidO();cT.defaultSnippet=_0.New(new Z({$:0,$0:"00000000-0000-0000-0000-000000000000"}),"","",null,new dg.New$1(null),[],(new di(0)).getTime());cT.tieFighter="|"+"-"+"|";cT.deserGuid=function(fC){return bg.ifUndef("00000000-0000-0000-0000-000000000000",fC);};function ee(fC){return bg.ifUndef(0,fC);}cT.serFloat=[function(fC){return(function(fD){return function(fE){return fD(c2.prettyPrint(fE));};}(a.id))(fC);},function(fC){return ee(a.id(fC));}];function ef(fC){return bg.ifUndef(0,fC);}cT.serInt=[function(fC){return(function(fD){return function(fE){return fD(c2.prettyPrint(fE));};}(a.id))(fC);},function(fC){return ef(a.id(fC));}];function eg(fC){return bg.ifUndef(false,fC);}cT.serBool=[function(fC){return(function(fD){return function(fE){return fD(c2.prettyPrint(fE));};}(a.id))(fC);},function(fC){return eg(a.id(fC));}];function eh(fC){return bg.ifUndef("",fC);}cT.serString=[function(fC){return dB.stringify(((dE.Id())())(fC));},function(fC){return eh(a.id(fC));}];function ej(fC){return(function(fD){return function(fE){return fD(c2.prettyPrint(fE));};}(a.id))(fC);}function ek(fC){return bg.ifUndef(0,fC);}cT.serDate=[function(fC){return ej(a.id(fC));},(ei=function(fC){return ek(a.id(fC));},function(fC){var fD;fD=ei(fC);return fD;})];cT.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";cT.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";cT.observers=c5.T.Empty;cT.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";cT.init=d1.Create(function(){var fC;fC=new bn.New();bl.defineWebComponent("wcomp-tabstrip",bn.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});cT.layoutHorizontal=c1.Curried(function(fC,fD,fE,fF,fG){return ds.get_Empty();},5);cT.layoutVertical=c1.Curried(function(fC,fD,fE,fF,fG){return ds.get_Empty();},5);cT.loader=(el=null,c7.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return c7.Bind(c7.FromContinuations(function(fC,fD){return self.require(["vs/editor/editor.main"],fC,fD);}),function(){return c7.Return(null);});}));cT.MessageBrokerId="<MessageBroker>";cT.MessageBrokerAddress=new bM({$:0,$0:bL.MessageBrokerId()});cT.id="FSharpStation"+a.String(di.now());cT.rootDir=".";cT.srcDir=".";c7.Start((em=null,c7.Delay(function(){return c7.Bind((new dM.New()).Async("FSharpStation:FsRoot.FSharpStation+FStation.getRootDirs:-589054433",[]),function(fC){cw.set_rootDir(fC[1]);cw.set_srcDir(fC[2]);(((c1.Curried3(function(fD,fE,fF){return fD("fileName = "+c2.toSafe(fE)+"\\"+c2.toSafe(fF)+".fsx");}))(function(fD){dl.log(fD);}))(cw.srcDir()))(cw.id());return c7.Zero();});})),null);cT.annotationsV=_do.Create$1("");cT.outputMsgs=_do.Create$1("");cT.snippets=new d0.New$1(function(fC){return fC.snpId;});cT.hierarchy=_do.Create$1([]);cT.generation=_do.Create$1(-8640000000000000);cT.currentSnippetIdOV=_do.Create$1(null);cT.codeSnippetIdOV=_do.Create$1(null);cT.collapsedV=_do.Create$1(new dg.New$1(null));function eo(fC){var fD;fD=null;return en.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function ep(fC,fD){en.set_Item(fC,fD);return fD;}function eq(fC,fD){var fE;fE=eo(fC);return fE==null?ep(fC,fD(fC)):fE.$0;}er=(en=new d5.New$5(),[[eo,function(fC){return function(fD){return eq(fC,fD);};}],function(){en.Clear();}]);cT.predsCache=er[0];cT.clearPreds=er[1];function et(fC){var fD;fD=null;return es.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function eu(fC,fD){es.set_Item(fC,fD);return fD;}function ev(fC,fD){var fE;fE=et(fC);return fE==null?eu(fC,fD(fC)):fE.$0;}ew=(es=new d5.New$5(),[[et,function(fC){return function(fD){return ev(fC,fD);};}],function(){es.Clear();}]);cT.reducCache=ew[0];cT.clearReduc=ew[1];function ey(fC){var fD;fD=null;return ex.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function ez(fC,fD){ex.set_Item(fC,fD);return fD;}function eA(fC,fD){var fE;fE=ey(fC);return fE==null?ez(fC,fD(fC)):fE.$0;}eB=(ex=new d5.New$5(),[[ey,function(fC){return function(fD){return eA(fC,fD);};}],function(){ex.Clear();}]);cT.parentCache=eB[0];cT.clearParent=eB[1];cT.getParentIdO=(eC=(cx.parentCache())[1],function(fC){return(eC(fC))(cx.getParentIdONotMemo);});dn.Sink(function(fC){var fD,fE;if(fC!=null&&fC.$==1){fD=fC.$0;fE=cx.codeSnippetIdOV().Get();fE!=null&&fE.$==1?(cx.iterReader(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_BarGreaterGreater(q.op_GreaterGreaterEquals(q.op_BarGreaterGreater(_2.snippetORm(fE.$0),function(fF){return fF==null?null:{$:1,$0:_2.uniquePredsRm(fF.$0)};}),p.insertO),dh.toList),function(fF){return c5.collect(a.id,fF);}),function(fF){return c5.contains(fD,fF);}),function(fF){if(fF);else cx.codeSnippetIdOV().Set({$:1,$0:fD});})),cx.clearPredsCache()):cx.codeSnippetIdOV().Set({$:1,$0:fD});}},cx.currentSnippetIdOV().get_View());function eF(fC){return fC.id();}dn.Sink(function(fC){var fD;cx.clearPredsCache();fD=c6.ofSeq(c4.delay(function(){return c4.collect(function(fE){return c4.append([cx.snippets().FindByKey(fE)],c4.delay(function(){return c4.filter(function(fF){return cx.isDescendantOf(fE,fF.snpId);},(cx.snippets())["var"].Get());}));},fC);}));cx.snippets().Set(fD);},(eD=dn.Map(function(fC){return c6.map(eF,fC);},cx.hierarchy().get_View()),(eE=[_do.Create$1(null)],(dn.Sink(function(fC){if(!c$.Equals(eE[0].Get(),fC))eE[0].Set(fC);},eD),eE[0].get_View()))));cT.CurrentSnippetIdW=dn.Map(function(fC){var fD;fD=_2.defaultSnippet().snpId;return fC==null?fD:fC.$0;},cx.currentSnippetIdOV().get_View());function eI(fC){var fD;fD=_2.defaultSnippet();return fC==null?fD:fC.$0;}function eJ(fC){return cx.snippets().TryFindByKeyAsView(fC);}cT.currentSnippetW=dn.Map((eG=function(fC){return fC==null?null:a.id(fC.$0);},function(fC){return eI(eG(fC));}),dn.Bind((eH=function(fC){return fC==null?null:{$:1,$0:eJ(fC.$0)};},function(fC){return _9.insertWO(eH(fC));}),cx.currentSnippetIdOV().get_View()));function eM(fC){var fD;fD=_2.defaultSnippet();return fC==null?fD:fC.$0;}function eN(fC){return cx.snippets().TryFindByKeyAsView(fC);}cT.codeSnippetW=dn.Map((eK=function(fC){return fC==null?null:a.id(fC.$0);},function(fC){return eM(eK(fC));}),dn.Bind((eL=function(fC){return fC==null?null:{$:1,$0:eN(fC.$0)};},function(fC){return _9.insertWO(eL(fC));}),cx.codeSnippetIdOV().get_View()));cT.currentSnippetV=new dN.New(cx.currentSnippetW(),function(fC){cx.setSnippet(fC);});function eP(fC,fD){return[fC.id(),fD];}function eQ(fC){function fD(fF){return _4.listNodes(0,fF);}function fE(fF){return cx.runReader(cx.handleError,fF);}return function(fF){return fE(fD(fF));};}cT.getHierarchyW=dn.Map(c6.ofSeq,dn.Map(function(fC){return c4.map(function(fD){return eP(fD[0],fD[1]);},fC);},(eO=cx.hierarchy().get_View(),dn.Map2(function(fC,fD){return(eQ(fC))(fD);},cx.collapsedV().get_View(),eO))));function eT(fC,fD){var fE;fE=null;return c7.Delay(function(){return c7.Bind(c7.Sleep(350),function(){return c7.Return(cx.runReader(cx.handleError,_2.fastCodeRm(cx.currentSnippetIdOV().Get(),cx.codeSnippetIdOV().Get())));});});}cT.codeAndStartsW=(eR=cx.codeSnippetW(),(eS=cx.snippets().v,(((c1.Curried3(dn.MapAsync2))(eT))(eR))(eS)));cT.FsCodeW=dn.Map(function(fC){return fC[0];},cx.codeAndStartsW());cT.codeStartsW=dn.Map(function(fC){return fC[1];},cx.codeAndStartsW());cT.SaveAsClassW=dn.Map2(function(fC,fD){return c4.exists(function(fE){return fE.snpModified>fD;},fC)?"btn-primary":"";},cx.snippets().v,cx.generation().get_View());cT.currentPathW=dn.Map(function(fC){var fD;return cx.runReader(function(){return"";},(fD=p.fusion(),fD.Run(fD.Delay(function(){return fD.Bind(_2.pathRm(fC.snpId),function(fE){return fD.Bind(p.traverseSeq(_2.snippetNameRm,new c5.T({$:1,$0:fC.snpId,$1:fE})),function(fF){return fD.Return(c3.concat("/",c4.rev(fF)));});});}))));},cx.currentSnippetW());cT.currentLayoutDW=dn.Map(function(fC){var fD;return cx.runReader(function(){return null;},(fD=p.fusion(),fD.Run(fD.Delay(function(){function fE(fF,fG){var fH,fI,fJ,fK;fH=(fI=c3.SplitChars(c3.Trim(fG[0]),["\n"],0),c3.StartsWith(c6.get(fI,0),"\"")?[da.array(fI,{$:1,$0:1},null),c6.get(fI,0)]:[fI,"\"\""]);fJ=fH[1];fK=c4.mapi(function(fL,fM){var fN;fN=c3.StartsWith(fM,":")?da.string(fM,{$:1,$0:1},null):(function(fO){return function(fP){return fO("button \"click=@{FSharpStation.ButtonClick}\" "+c2.prettyPrint(fP));};}(a.id))(fM);return(((c1.Curried3(function(fO,fP,fQ){return fO("btn"+a.String(fP)+" "+c2.toSafe(fQ));}))(a.id))(fL))(fN);},c4.filter(function(fL){return c3.Trim(fL)!=="";},fH[0]));return["Snp_"+c3.Replace(a.String(fF.snpId.get_Id()),"-",""),c3.concat("\n",c5.ofSeq(c4.delay(function(){return c4.append(["editorButtons vertical 0-85-100 FStationLyt.menuEditor buttons"],c4.delay(function(){return c4.append(fK,c4.delay(function(){var fL,fM;return[(fL=c3.concat(" ",(fM=c5.ofSeq(c_.range(0,c4.length(fK)-1)),c4.map(function(fN){return function(fO){return fN("btn"+a.String(fO));};}(a.id),fM))),(((c1.Curried3(function(fN,fO,fP){return fN("buttons div "+c2.toSafe(fO)+" "+c2.toSafe(fP)+" ");}))(a.id))(fJ))(fL))];}));}));})))];}return fD.Bind(q.op_BarGreaterGreater(_2.propertyHierORm("Buttons",fC),function(fF){var fG;return fF==null?null:{$:1,$0:(fG=fF.$0,fE(fG[0],fG[1]))};}),function(fF){function fG(fI,fJ){var fK,fL,fM;fK=fJ[0];return["Snp_"+c3.Replace(a.String(fI.snpId.get_Id()),"-",""),(fL=fF==null?null:{$:1,$0:(fM=fF.$0,(fM[0],c3.concat("\n",c5.ofArray([fK,fM[1]]))))},fL==null?fK:fL.$0)];}function fH(){return fF;}return fD.ReturnFrom(q.op_BarGreaterGreater(q.op_BarGreaterGreater(_2.propertyHierORm("Layout",fC),function(fI){var fJ;return fI==null?null:{$:1,$0:(fJ=fI.$0,fG(fJ[0],fJ[1]))};}),function(fI){return h.bindNone(fH,fI);}));});}))));},cx.currentSnippetW());cT.currentLayoutJSDW=dn.Map(function(fC){function fD(fE,fF){return[fE.snpId,fF[0]];}return cx.runReader(function(){return null;},q.op_BarGreaterGreater(_2.propertyHierORm("LayoutJS",fC),function(fE){var fF;return fE==null?null:{$:1,$0:(fF=fE.$0,fD(fF[0],fF[1]))};}));},cx.currentSnippetW());cT.drag=cz.DragNone;cT.rootdir="..\\website";cT.TemplatesFileName="..\\website"+"\\Templates.html";((function(fC){return function(fD){return fC(c2.toSafe(fD));};}(function(fC){dl.log(fC);}))("..\\website\\Templates.html"));cT.startsV=_do.Create$1([]);cT.defaultStart=(eU=[[Z.get_Empty(),""],[0,1,0]],function(fC){return fC==null?eU:fC.$0;});cT.fileName="none.fsx";cT.editorConfigO=null;dn.Sink(function(fC){var fD,fE;try{fD=(fE=cD.editorConfigO(),fE==null?null:fE.$0.editorO);(h.iter(function(fF){fF.setModel(cD.getSnippetModel(fC));cw.annotationsV().Set(cw.annotationsV().Get());}))(fD);}catch(fF){null;}},cx.CurrentSnippetIdW());cT.rexGuid$1="\\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";cT.setScrollToBottom=(eV=null,dn.Sink(function(){(h.iter(function(fC){cK.scrollToBottom(fC);}))(eV);},cw.outputMsgs().get_View()),function(fC){eV={$:1,$0:fC};(function(fD){return fD("setScrollToBottom");}(function(fD){dl.log(fD);}));});function eY(fC){return fC.$0;}function eZ(fC){return new Z({$:0,$0:fC});}cT.serSnippetId=(eW=c6.head(c3.SplitChars((function(fC){return function(fD){return fC(cW.p(fD));};}(a.id))(eZ("00000000-0000-0000-0000-000000000000")),[" "],0)),(eX=(function(fC){return function(fD){return fC(c2.prettyPrint(fD));};}(a.id))(eW),[function(fC){var fD;fD=eY(fC);return(((c1.Curried3(function(fE,fF,fG){return fE("{"+c3.PadLeft(c2.toSafe(fF),10)+" :"+c2.prettyPrint(fG)+"}");}))(a.id))(eX))(fD);},function(fC){var fD;return eZ((fD=fC[eW],(bg.deserGuid())(fD)));}]));cT.serSnippet=(e0=[(e1=cL.serSnippetId(),bg.serField("snpId",function(fC){return fC.snpId;},function(fC,fD){return _0.New(fC,fD.snpName,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fD.snpModified);},e1[0],e1[1])),(e2=bg.serString(),bg.serField("snpName",function(fC){return fC.snpName;},function(fC,fD){return _0.New(fD.snpId,fC,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fD.snpModified);},e2[0],e2[1])),(e3=bg.serString(),bg.serField("snpContent",function(fC){return fC.snpContent;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fC,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fD.snpModified);},e3[0],e3[1])),(e4=(e5=cL.serSnippetId(),bg.serOpt(e5[0],e5[1])),bg.serField("snpParentIdO",function(fC){return fC.snpParentIdO;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fD.snpContent,fC,fD.snpPredIds,fD.snpProperties,fD.snpModified);},e4[0],e4[1])),(e6=(e7=cL.serSnippetId(),bg.serSet(e7[0],e7[1])),bg.serField("snpPredIds",function(fC){return fC.snpPredIds;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fD.snpContent,fD.snpParentIdO,fC,fD.snpProperties,fD.snpModified);},e6[0],e6[1])),(e8=(e9=(e_=bg.serString(),bg.serDup((bg.serString())[0],(bg.serString())[1],e_[0],e_[1])),bg.serArr(e9[0],e9[1])),bg.serField("snpProperties",function(fC){return fC.snpProperties;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fC,fD.snpModified);},e8[0],e8[1])),(e$=bg.serInt(),bg.serFieldO("snpGeneration",function(){return null;},function(fC,fD){return fC!=null&&fC.$==1?_0.New(fD.snpId,fD.snpName,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,(new di(0)).getTime()+fC.$0*3600000):fD;},e$[0],e$[1])),(fa=bg.serDate(),bg.serField("snpModified",function(fC){return fC.snpModified;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fC);},fa[0],fa[1]))],(fb=_2.New("","",null),[function(fC){var fD;function fE(fF,fG,fH){var fI,fJ;fI=fG(fC);fJ=((c1.Curried3(function(fK,fL,fM){return fK(c2.prettyPrint(fL)+": "+c2.toSafe(fM));}))(a.id))(fF);return fI==null?null:{$:1,$0:fJ(fI.$0)};}fD=c3.concat(", ",c4.choose(function(fF){return fE(fF[0],fF[1],fF[2]);},e0));return(function(fF){return function(fG){return fF("{"+c2.toSafe(fG)+"}");};}(a.id))(fD);},function(fC){return!fC?fb:c4.fold(function(fD,fE){return(fE[2](fD))(fC[fE[0]]);},fb,e0);}]));cT.serModel=(fc=[(fd=(fe=cL.serSnippet(),bg.serArr(fe[0],fe[1])),bg.serField("snippets",function(fC){return fC.snippets;},function(fC,fD){return cM.New(fC,fD.modified,fD.collapsed);},fd[0],fd[1])),(ff=bg.serInt(),bg.serFieldO("generation",function(){return null;},function(fC,fD){return fC!=null&&fC.$==1?cM.New(fD.snippets,(new di(0)).getTime()+fC.$0*3600000,fD.collapsed):fD;},ff[0],ff[1])),(fg=bg.serDate(),bg.serField("modified",function(fC){return fC.modified;},function(fC,fD){return cM.New(fD.snippets,fC,fD.collapsed);},fg[0],fg[1])),(fh=(fi=cL.serSnippetId(),bg.serSet(fi[0],fi[1])),bg.serField("collapsed",function(fC){return fC.collapsed;},function(fC,fD){return cM.New(fD.snippets,fD.modified,fC);},fh[0],fh[1]))],(fj=cM.New([],(new di(0)).getTime(),new dg.New$1(null)),[function(fC){var fD;function fE(fF,fG,fH){var fI,fJ;fI=fG(fC);fJ=((c1.Curried3(function(fK,fL,fM){return fK(c2.prettyPrint(fL)+": "+c2.toSafe(fM));}))(a.id))(fF);return fI==null?null:{$:1,$0:fJ(fI.$0)};}fD=c3.concat(", ",c4.choose(function(fF){return fE(fF[0],fF[1],fF[2]);},fc));return(function(fF){return function(fG){return fF("{"+c2.toSafe(fG)+"}");};}(a.id))(fD);},function(fC){return!fC?fj:c4.fold(function(fD,fE){return(fE[2](fD))(fC[fE[0]]);},fj,fc);}]));cT.fileName$1=_do.Create$1("");cT.serSnippetId2=[function(fC){return(function(fD){return function(fE){return fD(c2.prettyPrint(fE));};}(a.id))(fC);},function(fC){var fD;return new Z({$:0,$0:(fD=fC.Item,(bg.deserGuid())(fD))});}];cT.serSnippet2=(fk=[(fl=cO.serSnippetId2(),bg.serField("id",function(fC){return fC.snpId;},function(fC,fD){return _0.New(c$.Equals(fC,Z.get_Empty())?new Z({$:0,$0:de.NewGuid()}):fC,fD.snpName,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fD.snpModified);},fl[0],fl[1])),(fm=bg.serString(),bg.serField("name",function(fC){return fC.snpName;},function(fC,fD){return _0.New(fD.snpId,fC,fD.snpContent,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fD.snpModified);},fm[0],fm[1])),(fn=bg.serString(),bg.serField("content",function(fC){return fC.snpContent;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fC,fD.snpParentIdO,fD.snpPredIds,fD.snpProperties,fD.snpModified);},fn[0],fn[1])),(fo=(fp=cO.serSnippetId2(),bg.serOpt(fp[0],fp[1])),bg.serField("parent",function(fC){return fC.snpParentIdO;},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fD.snpContent,c$.Equals(fC,{$:1,$0:Z.get_Empty()})?null:fC,fD.snpPredIds,fD.snpProperties,fD.snpModified);},fo[0],fo[1])),(fq=(fr=cO.serSnippetId2(),bg.serArr(fr[0],fr[1])),bg.serField("predecessors",function(fC){return c6.ofSeq(fC.snpPredIds);},function(fC,fD){return _0.New(fD.snpId,fD.snpName,fD.snpContent,fD.snpParentIdO,new dg.New(fC),fD.snpProperties,fD.snpModified);},fq[0],fq[1]))],(fs=_2.New("","",null),[function(fC){var fD;function fE(fF,fG,fH){var fI,fJ;fI=fG(fC);fJ=((c1.Curried3(function(fK,fL,fM){return fK(c2.prettyPrint(fL)+": "+c2.toSafe(fM));}))(a.id))(fF);return fI==null?null:{$:1,$0:fJ(fI.$0)};}fD=c3.concat(", ",c4.choose(function(fF){return fE(fF[0],fF[1],fF[2]);},fk));return(function(fF){return function(fG){return fF("{"+c2.toSafe(fG)+"}");};}(a.id))(fD);},function(fC){return!fC?fs:c4.fold(function(fD,fE){return(fE[2](fD))(fC[fE[0]]);},fs,fk);}]));cT.serSnippets=(ft=cO.serSnippet2(),bg.serArr(ft[0],ft[1]));cT.endPointV=d6.InstallHash(cQ.NoSnippet,cX.r());function fw(fC){var fD;return fC.$==0?_9.rtn({$:1,$0:new Z({$:0,$0:fC.$0})}):fC.$==1?(fD=fC.$0,dn.Map(function(fE){function fF(fG){return fG.snpId;}return fE===c3.concat("/",fD)?cx.currentSnippetIdOV().Get():cx.runReader(cx.handleError,p.map(function(fG){return fG==null?null:{$:1,$0:fF(fG.$0)};},_2.snippetFromPathORm(fD)));},cx.currentPathW())):_9.rtn(null);}function fx(fC){if(!c$.Equals(cx.currentSnippetIdOV().Get(),fC))cx.setCurrentSnippetIdO(fC);}function fy(fC){var fD;return fC!=null&&fC.$==1?(fD=fC.$0.$0,dn.Map(function(fE){return c$.Equals({$:1,$0:c3.SplitChars(fE,["/"],0)},cP.endPointV().Get())?cP.endPointV().Get():{$:0,$0:fD};},cx.currentPathW())):_9.rtn(cQ.NoSnippet);}function fz(fC){if(!c$.Equals(cP.endPointV().Get(),fC))cP.endPointV().Set(fC);}dn.Sink((fu=function(fC){dn.Get(fx,fC);},function(fC){return fu(fw(fC));}),cP.endPointV().get_View());dn.Sink((fv=function(fC){dn.Get(fz,fC);},function(fC){return fv(fy(fC));}),cx.currentSnippetIdOV().get_View());cT.FStationLyt=new dY.PlugInName({$:0,$0:"FStationLyt"});fA=cx.codeAndStartsW();dn.Sink(c.delayed(300,function(fC){cD.parse(fC[0],fC[1]);}),fA);dn.Sink(function(fC){self.onbeforeunload=fC!==""?function(fD){fD.returnValue="Changes you made may not be saved.";}:null;},cx.SaveAsClassW());cT.wsStationClient=new bX.New(cw.id(),null,null);c7.Start((fB=null,c7.Delay(function(){return c7.Bind(c7.Sleep(1000),function(){return c7.While(function(){return true;},c7.Delay(function(){return c7.TryWith(c7.Delay(function(){var fC,fD,fE,fF,fG,fH;function fI(fM){return(cV.j$4())(dB.parse(fM));}function fJ(fM){return dB.stringify((cU.j$4())(fM));}function fK(fM){return c7.Return(fM);}function fL(fM){c_.FailWith(fM);}fC=cR.wsStationClient();fC.payloadProcessorO={$:1,$0:(fD=function(fM){return cR.processMessage(fI(fM));},(fE=(fF=function(fM){return fK(fJ(fM));},function(fM){return c7.Bind(fM,fF);}),function(fM){return fE(fD(fM));}))};B.iterA(function(fM){return fL(a.String(fM));},a.ignore,fC.sendAndForget(bL.msgType(bO.MsgInformation,(fG=bL.MessageBrokerAddress(),(fH=dB.stringify(((dE.Id())())("Registering Processor")),bR.New(new bM({$:0,$0:""}),fG,bO.MsgRequest,"",de.NewGuid(),fH,bQ.NoReply))))));return c7.Bind(c7.Sleep(60000),function(){return c7.Return(null);});}),function(fC){((function(fD){return function(fE){return fD(c2.toSafe(fE));};}(function(fD){dl.log(fD);}))(fC.message));return c7.Bind(c7.Sleep(1000),function(){return c7.Return(null);});});}));});})),null);};cU.j$4=function(){return cU._v$4?cU._v$4:cU._v$4=(dE.EncodeUnion(void 0,"$",[[0,[["$0","ResultValue",cU.j$6,0]]],[1,[["$0","ErrorValue",cU.j$5,0]]]]))();};cU.j$6=function(){return cU._v$6?cU._v$6:cU._v$6=(dE.EncodeUnion(void 0,"$",[[0,[["$0","Item",dE.Id(),0]]],[1,[["$0","Item",dE.EncodeArray(cU.j$7),0]]],[2,[["$0","Item",dE.EncodeDateTime(),0]]]]))();};cV.j$6=function(){return cV._v$6?cV._v$6:cV._v$6=(dE.DecodeUnion(Z,"$",[[0,[["$0","Item",dE.Id(),0]]]]))();};cV.j$5=function(){return cV._v$5?cV._v$5:cV._v$5=(dE.DecodeUnion(void 0,"$",[[0,[["$0","Item",cV.j$6,0]]],[1,[["$0","Item",dE.DecodeArray(dE.Id()),0]]]]))();};cW.p=function(d9){return"SnippetId "+c2.prettyPrint(d9.$0);};cX.r=function(){return d8.JSUnion(void 0,[[null,[[null,["Snippet"]]],[d8.rGuid()]],[null,[[null,["Path"]]],[d8.rWildcardArray(d8.rString())]],[null,[[null,[]]],[]]]);};cU.j$5=function(){return cU._v$5?cU._v$5:cU._v$5=(dE.EncodeUnion(d,"$",[[0,[]],[1,[["$0","Item",dE.Id(),0]]],[2,[["$0","Item",dE.Id(),0]]],[3,[["$0","Item",dE.Id(),0]]],[4,[["$0","Item",dE.Id(),0]]],[5,[["$0","Item1",dE.Id(),0],["$1","Item2",dE.Id(),0]]],[6,[["$0","Item",dE.EncodeArray(cU.j$5),0]]]]))();};cU.j$7=function(){return cU._v$7?cU._v$7:cU._v$7=(dE.EncodeRecord(void 0,[["snpId",cU.j$8,0],["snpName",dE.Id(),0],["snpContent",dE.Id(),0],["snpParentIdO",cU.j$8,1],["snpPredIds",dE.EncodeSet(cU.j$8),0],["snpProperties",dE.EncodeArray(dE.EncodeTuple([dE.Id(),dE.Id()])),0],["snpModified",dE.EncodeDateTime(),0]]))();};cU.j$8=function(){return cU._v$8?cU._v$8:cU._v$8=(dE.EncodeUnion(Z,"$",[[0,[["$0","Item",dE.Id(),0]]]]))();};cY.snippetlist=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"snippetlist"},d9):void 0;};cY.snippet=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"snippet"},d9):void 0;};cY.propertytable=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"propertytable"},d9):void 0;};cY.property=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"property"},d9):void 0;};cY.layout=function(d9){cY.fixedsplitterhor();cY.fixedsplitterver();dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"layout"},d9):void 0;};cY.fixedsplitterver=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"fixedsplitterver"},d9):void 0;};cY.fixedsplitterhor=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"fixedsplitterhor"},d9):void 0;};cY.buttonsright=function(d9){dx.LoadLocalTemplates("templates");return d9?dx.NamedTemplate("templates",{$:1,$0:"buttonsright"},d9):void 0;};cW.p$1=function(d9){return d9.$==6?"RMessages "+c2.printArray(function(d_){return cW.p$1(d_);},d9.$0):d9.$==5?"ExceptMsg ("+c2.prettyPrint(d9.$0)+", "+c2.prettyPrint(d9.$1)+")":d9.$==4?"Message "+c2.prettyPrint(d9.$0):d9.$==3?"Info "+c2.prettyPrint(d9.$0):d9.$==2?"Warning "+c2.prettyPrint(d9.$0):d9.$==1?"ErrorMsg "+c2.prettyPrint(d9.$0):"NoMsg";};cW.p$3=function(d9){return d9.$==8?"MsgGetModified "+cW.p$2(d9.$0):d9.$==7?"MsgSetValue ("+c2.prettyPrint(d9.$0)+", "+c2.prettyPrint(d9.$1)+")":d9.$==6?"MsgGetValue "+c2.prettyPrint(d9.$0):d9.$==5?"MsgGetUrl":d9.$==4?"MsgAction "+c2.printArray(c2.prettyPrint,d9.$0):d9.$==3?"MsgGetPredecessors "+cW.p$2(d9.$0):d9.$==2?"MsgGetCode "+cW.p$2(d9.$0):d9.$==1?"MsgGetSnippets "+c2.printArray(function(d_){return cW.p$2(d_);},d9.$0):"MsgGetId";};cW.p$2=function(d9){return d9.$==1?"RefSnippetPath "+c2.printArray(c2.prettyPrint,d9.$0):"RefSnippetId "+cW.p(d9.$0);};cU.j$9=function(){return cU._v$9?cU._v$9:cU._v$9=(dE.EncodeUnion(void 0,"type",[["BRGetConnections",[]],["BRGetProcessId",[]]]))();};cW.p$4=function(d9){return d9.$==2?"BRString "+c2.prettyPrint(d9.$0):d9.$==1?"BRPid "+c2.prettyPrint(d9.$0):"BRConnections "+c2.printArray(c2.prettyPrint,d9.$0);};cV.j$7=function(){return cV._v$7?cV._v$7:cV._v$7=(dE.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",dE.DecodeArray(dE.Id()),0]]],["BRPid",[["$0","Item",dE.Id(),0]]],["BRString",[["$0","Item",dE.Id(),0]]]]))();};cV.j$8=function(){return cV._v$8?cV._v$8:cV._v$8=(dE.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",cV.j$1,0]]],["BMWebSocketError",[["$0","Item",dE.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",cV.j$2,0]]],["BMUnexpectedResponse",[["$0","Item",dE.Id(),0]]]]))();};cW.p$7=function(d9){return d9.$==2?"Receiver":d9.$==1?"Broker":"NoReply";};cW.p$6=function(d9){return d9.$==5?"MsgRequestForEcho":d9.$==4?"MsgRequestForId":d9.$==3?"MsgFromBroker":d9.$==2?"MsgReply":d9.$==1?"MsgRequest":"MsgInformation";};cZ.p=function(d9){return"{"+("from = "+cW.p$5(d9.from))+"; "+("destination = "+cW.p$5(d9.destination))+"; "+("msgType = "+cW.p$6(d9.msgType))+"; "+("subtype = "+c2.prettyPrint(d9.subtype))+"; "+("id = "+c2.prettyPrint(d9.id))+"; "+("payload = "+c2.prettyPrint(d9.payload))+"; "+("replier = "+cW.p$7(d9.replier))+"}";};cW.p$5=function(d9){return"Address "+c2.prettyPrint(d9.$0);};cW.p$8=function(d9){return d9.$==3?"Close":d9.$==2?"Open":d9.$==1?"Error":"Message "+cZ.p(d9.$0);};cW.p$9=function(d9){return d9.$==6?"RMessages "+c2.printArray(function(d_){return cW.p$9(d_);},d9.$0):d9.$==5?"ExceptMsg ("+c2.prettyPrint(d9.$0)+", "+c2.prettyPrint(d9.$1)+")":d9.$==4?"Message "+c2.printArray(function(d_){return cW.p$10(d_);},d9.$0):d9.$==3?"Info "+c2.prettyPrint(d9.$0):d9.$==2?"Warning "+c2.prettyPrint(d9.$0):d9.$==1?"ErrorMsg "+c2.prettyPrint(d9.$0):"NoMsg";};cW.p$10=function(d9){return d9.$==17?"KMultiple "+c2.printArray(function(d_){return cW.p$10(d_);},d9.$0):d9.$==16?"KUnionCase "+cZ.p$22(d9.$0):d9.$==15?"KNamespaces "+cZ.p$19(d9.$0):d9.$==14?"KCompilerLocation "+cZ.p$18(d9.$0):d9.$==13?"KSignatureData "+cZ.p$16(d9.$0):d9.$==12?"KTypeSig "+c2.prettyPrint(d9.$0):d9.$==11?"KToolTip "+c2.printArray(function(d_){return c2.printArray(function(d$){return cZ.p$3(d$);},d_);},d9.$0):d9.$==10?"KDeclarations "+c2.printArray(function(d_){return cZ.p$14(d_);},d9.$0):d9.$==9?"KFindDecl "+cZ.p$13(d9.$0):d9.$==8?"KColorizations "+c2.printList(function(d_){return cZ.p$12(d_);},d9.$0):d9.$==7?"KErrors "+cZ.p$10(d9.$0):d9.$==6?"KMethod "+cZ.p$7(d9.$0):d9.$==5?"KHelp "+c2.prettyPrint(d9.$0):d9.$==4?"KSymbolUse "+cZ.p$5(d9.$0):d9.$==3?"KCompletion "+c2.printArray(function(d_){return cZ.p$4(d_);},d9.$0):d9.$==2?"KHelpText "+cZ.p$2(d9.$0):d9.$==1?"KError "+cZ.p$1(d9.$0):"KInfo "+c2.prettyPrint(d9.$0);};cZ.p$22=function(d9){return"{"+("Text = "+c2.prettyPrint(d9.Text))+"}";};cZ.p$21=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("Qualifier = "+c2.prettyPrint(d9.Qualifier))+"}";};cZ.p$20=function(d9){return"{"+("Namespace = "+c2.prettyPrint(d9.Namespace))+"; "+("Name = "+c2.prettyPrint(d9.Name))+"; "+("Type = "+c2.prettyPrint(d9.Type))+"; "+("Line = "+c2.prettyPrint(d9.Line))+"; "+("Column = "+c2.prettyPrint(d9.Column))+"; "+("MultipleNames = "+c2.prettyPrint(d9.MultipleNames))+"}";};cZ.p$18=function(d9){return"{"+("Fsc = "+c2.prettyPrint(d9.Fsc))+"; "+("Fsi = "+c2.prettyPrint(d9.Fsi))+"; "+("MSBuild = "+c2.prettyPrint(d9.MSBuild))+"}";};cZ.p$16=function(d9){return"{"+("OutputType = "+c2.prettyPrint(d9.OutputType))+"; "+("Parameters = "+c2.printList(function(d_){return c2.printList(function(d$){return cZ.p$17(d$);},d_);},d9.Parameters))+"}";};cZ.p$19=function(d9){return"{"+("Opens = "+c2.printArray(function(d_){return cZ.p$20(d_);},d9.Opens))+"; "+("Qualifies = "+c2.printArray(function(d_){return cZ.p$21(d_);},d9.Qualifies))+"; "+("Word = "+c2.prettyPrint(d9.Word))+"}";};cZ.p$17=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("Type = "+c2.prettyPrint(d9.Type))+"}";};cZ.p$14=function(d9){return"{"+("Declaration = "+cZ.p$15(d9.Declaration))+"; "+("Nested = "+c2.printArray(function(d_){return cZ.p$15(d_);},d9.Nested))+"}";};cZ.p$13=function(d9){return"{"+("File = "+c2.prettyPrint(d9.File))+"; "+("Line = "+c2.prettyPrint(d9.Line))+"; "+("Column = "+c2.prettyPrint(d9.Column))+"}";};cZ.p$15=function(d9){return"{"+("UniqueName = "+c2.prettyPrint(d9.UniqueName))+"; "+("Name = "+c2.prettyPrint(d9.Name))+"; "+("Glyph = "+c2.prettyPrint(d9.Glyph))+"; "+("GlyphChar = "+c2.prettyPrint(d9.GlyphChar))+"; "+("IsTopLevel = "+c2.prettyPrint(d9.IsTopLevel))+"; "+("File = "+c2.prettyPrint(d9.File))+"; "+("EnclosingEntity = "+c2.prettyPrint(d9.EnclosingEntity))+"; "+("IsAbstract = "+c2.prettyPrint(d9.IsAbstract))+"}";};cZ.p$12=function(d9){return"{"+("Kind = "+c2.prettyPrint(d9.Kind))+"}";};cZ.p$10=function(d9){return"{"+("File = "+c2.prettyPrint(d9.File))+"; "+("Errors = "+c2.printArray(function(d_){return cZ.p$11(d_);},d9.Errors))+"}";};cZ.p$11=function(d9){return"{"+("FileName = "+c2.prettyPrint(d9.FileName))+"; "+("StartLine = "+c2.prettyPrint(d9.StartLine))+"; "+("EndLine = "+c2.prettyPrint(d9.EndLine))+"; "+("StartColumn = "+c2.prettyPrint(d9.StartColumn))+"; "+("EndColumn = "+c2.prettyPrint(d9.EndColumn))+"; "+("Severity = "+c2.prettyPrint(d9.Severity))+"; "+("Message = "+c2.prettyPrint(d9.Message))+"; "+("Subcategory = "+c2.prettyPrint(d9.Subcategory))+"}";};cZ.p$7=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("CurrentParameter = "+c2.prettyPrint(d9.CurrentParameter))+"; "+("Overloads = "+c2.printList(function(d_){return cZ.p$8(d_);},d9.Overloads))+"}";};cZ.p$8=function(d9){return"{"+("Tip = "+c2.printList(function(d_){return c2.printList(function(d$){return cZ.p$3(d$);},d_);},d9.Tip))+"; "+("TypeText = "+c2.prettyPrint(d9.TypeText))+"; "+("Parameters = "+c2.printList(function(d_){return cZ.p$9(d_);},d9.Parameters))+"; "+("IsStaticArguments = "+c2.prettyPrint(d9.IsStaticArguments))+"}";};cZ.p$9=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("CanonicalTypeTextForSorting = "+c2.prettyPrint(d9.CanonicalTypeTextForSorting))+"; "+("Display = "+c2.prettyPrint(d9.Display))+"; "+("Description = "+c2.prettyPrint(d9.Description))+"}";};cZ.p$5=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("Uses = "+c2.printList(function(d_){return cZ.p$6(d_);},d9.Uses))+"}";};cZ.p$6=function(d9){return"{"+("FileName = "+c2.prettyPrint(d9.FileName))+"; "+("StartLine = "+c2.prettyPrint(d9.StartLine))+"; "+("StartColumn = "+c2.prettyPrint(d9.StartColumn))+"; "+("EndLine = "+c2.prettyPrint(d9.EndLine))+"; "+("EndColumn = "+c2.prettyPrint(d9.EndColumn))+"; "+("IsFromDefinition = "+c2.prettyPrint(d9.IsFromDefinition))+"; "+("IsFromAttribute = "+c2.prettyPrint(d9.IsFromAttribute))+"; "+("IsFromComputationExpression = "+c2.prettyPrint(d9.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+c2.prettyPrint(d9.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+c2.prettyPrint(d9.IsFromPattern))+"; "+("IsFromType = "+c2.prettyPrint(d9.IsFromType))+"}";};cZ.p$4=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("ReplacementText = "+c2.prettyPrint(d9.ReplacementText))+"; "+("Glyph = "+c2.prettyPrint(d9.Glyph))+"; "+("GlyphChar = "+c2.prettyPrint(d9.GlyphChar))+"}";};cZ.p$2=function(d9){return"{"+("Name = "+c2.prettyPrint(d9.Name))+"; "+("Overloads = "+c2.printList(function(d_){return c2.printList(function(d$){return cZ.p$3(d$);},d_);},d9.Overloads))+"}";};cZ.p$3=function(d9){return"{"+("Signature = "+c2.prettyPrint(d9.Signature))+"; "+("Comment = "+c2.prettyPrint(d9.Comment))+"; "+("Footer = "+c2.prettyPrint(d9.Footer))+"}";};cZ.p$1=function(d9){return"{"+("Code = "+c2.prettyPrint(d9.Code))+"; "+("Message = "+c2.prettyPrint(d9.Message))+"}";};cU.j$1=function(){return cU._v$1?cU._v$1:cU._v$1=(dE.EncodeUnion(bM,"$",[[0,[["$0","address",dE.Id(),0]]]]))();};cU.j$2=function(){return cU._v$2?cU._v$2:cU._v$2=(dE.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cU.j$3=function(){return cU._v$3?cU._v$3:cU._v$3=(dE.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cU.j=function(){return cU._v?cU._v:cU._v=(dE.EncodeRecord(void 0,[["from",cU.j$1,0],["destination",cU.j$1,0],["msgType",cU.j$2,0],["subtype",dE.Id(),0],["id",dE.Id(),0],["payload",dE.Id(),0],["replier",cU.j$3,0]]))();};cV.j$1=function(){return cV._v$1?cV._v$1:cV._v$1=(dE.DecodeUnion(bM,"$",[[0,[["$0","address",dE.Id(),0]]]]))();};cV.j$2=function(){return cV._v$2?cV._v$2:cV._v$2=(dE.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cV.j$3=function(){return cV._v$3?cV._v$3:cV._v$3=(dE.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cV.j=function(){return cV._v?cV._v:cV._v=(dE.DecodeRecord(void 0,[["from",cV.j$1,0],["destination",cV.j$1,0],["msgType",cV.j$2,0],["subtype",dE.Id(),0],["id",dE.Id(),0],["payload",dE.Id(),0],["replier",cV.j$3,0]]))();};cV.j$4=function(){return cV._v$4?cV._v$4:cV._v$4=(dE.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",dE.DecodeArray(cV.j$5),0]]],[2,[["$0","Item",cV.j$5,0]]],[3,[["$0","Item",cV.j$5,0]]],[4,[["$0","Item",dE.DecodeArray(dE.Id()),0]]],[5,[]],[6,[["$0","Item",dE.Id(),0]]],[7,[["$0","Item1",dE.Id(),0],["$1","Item2",dE.Id(),0]]],[8,[["$0","Item",cV.j$5,0]]]]))();};}());

//# sourceMappingURL=FSharpStation.min.map
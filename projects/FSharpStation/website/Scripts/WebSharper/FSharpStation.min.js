(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.ResultMessage=c.ResultMessage||{};e=c.ResultMessageHelpers=c.ResultMessageHelpers||{};f=c.Monads=c.Monads||{};g=f.Seq=f.Seq||{};h=f.Option=f.Option||{};i=f.Async=f.Async||{};j=a.WebSharper;k=j&&j.Obj;l=f.Result=f.Result||{};m=l.Builder=l.Builder||{};n=l.Operators=l.Operators||{};o=f.FusionM=f.FusionM||{};p=o.Operators=o.Operators||{};q=o.Builder=o.Builder||{};r=q.Builder=q.Builder||{};s=f.FusionAsyncM=f.FusionAsyncM||{};t=s.Operators=s.Operators||{};u=s.Builder=s.Builder||{};v=u.Builder=u.Builder||{};w=f.AsyncResult=f.AsyncResult||{};x=f.AsyncResultBuilder=f.AsyncResultBuilder||{};y=f.AsyncResultBuilderP=f.AsyncResultBuilderP||{};z=f.Extensions=f.Extensions||{};A=c.String=c.String||{};B=c.ParseO=c.ParseO||{};C=c.MailboxProcessorExt=c.MailboxProcessorExt||{};D=c.Mailbox=c.Mailbox||{};E=D.StateFull=D.StateFull||{};F=c.ResourceAgentState=c.ResourceAgentState||{};G=c.ResourceAgent=c.ResourceAgent||{};H=c.AgentReaderM=c.AgentReaderM||{};I=c.CommArgRoot=c.CommArgRoot||{};J=I.CommArg=I.CommArg||{};K=I.CommArgCollection=I.CommArgCollection||{};L=I.TypedCommArg=I.TypedCommArg||{};M=I.CommArgModule=I.CommArgModule||{};N=c.FsCodeModule=c.FsCodeModule||{};O=N.PreproDirective=N.PreproDirective||{};P=c.SnippetId=c.SnippetId||{};Q=c.Snippet=c.Snippet||{};R=c.SnippetCollection=c.SnippetCollection||{};S=c.SnippetModule=c.SnippetModule||{};T=c.Hole=c.Hole||{};U=c.TreeReader=c.TreeReader||{};V=U.Node=U.Node||{};W=b.LibraryJS=b.LibraryJS||{};X=W.Promise=W.Promise||{};Y=W.View=W.View||{};Z=W.Serializer=W.Serializer||{};_0=W.LoadFiles=W.LoadFiles||{};_1=W.REGEX=W.REGEX||{};_2=W.Hoverable=W.Hoverable||{};_3=_2.Hoverable=_2.Hoverable||{};_4=W.ResizeObserver=W.ResizeObserver||{};_5=W.WebComponent=W.WebComponent||{};_6=_5.WcTabStrip=_5.WcTabStrip||{};_7=_6.WcTabStripT=_6.WcTabStripT||{};_8=_5.WcSplitter=_5.WcSplitter||{};_9=_8.WcSplitterT=_8.WcSplitterT||{};_=W.Monaco=W.Monaco||{};$=_.Position=_.Position||{};ba=_.Range=_.Range||{};bb=_.Uri=_.Uri||{};bc=_.Location=_.Location||{};bd=_.FindMatch=_.FindMatch||{};be=_.WordAtPosition=_.WordAtPosition||{};bf=_.Model=_.Model||{};bg=_.MarkDownString=_.MarkDownString||{};bh=_.MarkerData=_.MarkerData||{};bi=_.CompletionItem=_.CompletionItem||{};bj=_.Hover=_.Hover||{};bk=_.Editor=_.Editor||{};bl=_.MonacoConfig=_.MonacoConfig||{};bm=b.Library2=b.Library2||{};bn=bm.FsiAgent=bm.FsiAgent||{};bo=bm.WebSockets=bm.WebSockets||{};bp=bo.Address=bo.Address||{};bq=bo.BrokerRequest=bo.BrokerRequest||{};br=bo.MessageType=bo.MessageType||{};bs=bo.BrokerMessage=bo.BrokerMessage||{};bt=bo.Replier=bo.Replier||{};bu=bo.MessageGeneric=bo.MessageGeneric||{};bv=bo.ClientTypeFSharp=bo.ClientTypeFSharp||{};bw=bo.ClientTypeFSStation=bo.ClientTypeFSStation||{};bx=bo.ClientTypeJScript=bo.ClientTypeJScript||{};by=bo.ReplyHandler=bo.ReplyHandler||{};bz=by.Handler=by.Handler||{};bA=bo.WSMessagingClient=bo.WSMessagingClient||{};bB=bm.FSMessage=bm.FSMessage||{};bC=bm.FsAutoComplete=bm.FsAutoComplete||{};bD=bC.CommTypes=bC.CommTypes||{};bE=bD.ResponseError=bD.ResponseError||{};bF=bD.Location=bD.Location||{};bG=bD.CompletionResponse=bD.CompletionResponse||{};bH=bD.OverloadDescription=bD.OverloadDescription||{};bI=bD.OverloadParameter=bD.OverloadParameter||{};bJ=bD.Overload=bD.Overload||{};bK=bD.Parameter=bD.Parameter||{};bL=bD.SignatureData=bD.SignatureData||{};bM=bD.MethodResponse=bD.MethodResponse||{};bN=bD.SymbolUseRange=bD.SymbolUseRange||{};bO=bD.SymbolUseResponse=bD.SymbolUseResponse||{};bP=bD.HelpTextResponse=bD.HelpTextResponse||{};bQ=bD.CompilerLocationResponse=bD.CompilerLocationResponse||{};bR=bD.FSharpErrorInfo=bD.FSharpErrorInfo||{};bS=bD.ErrorResponse=bD.ErrorResponse||{};bT=bD.Colorization=bD.Colorization||{};bU=bD.Declaration=bD.Declaration||{};bV=bD.DeclarationResponse=bD.DeclarationResponse||{};bW=bD.OpenNamespace=bD.OpenNamespace||{};bX=bD.QualifySymbol=bD.QualifySymbol||{};bY=bD.ResolveNamespaceResponse=bD.ResolveNamespaceResponse||{};bZ=bD.UnionCaseResponse=bD.UnionCaseResponse||{};b0=bC.MsgTypes=bC.MsgTypes||{};b1=b0.ParseRequest=b0.ParseRequest||{};b2=b0.DeclarationsRequest=b0.DeclarationsRequest||{};b3=b0.CompletionRequest=b0.CompletionRequest||{};b4=b0.PositionRequest=b0.PositionRequest||{};b5=b0.ProjectRequest=b0.ProjectRequest||{};b6=b0.LintRequest=b0.LintRequest||{};b7=b0.HelptextRequest=b0.HelptextRequest||{};b8=b0.WorkspacePeekRequest=b0.WorkspacePeekRequest||{};b9=bC.Calls=bC.Calls||{};b_=b.FSharpStation=b.FSharpStation||{};b$=b_.FStation=b_.FStation||{};ca=b_.Snippets=b_.Snippets||{};cb=b_.DragDrop=b_.DragDrop||{};cc=cb.DragInfo=cb.DragInfo||{};cd=b_.Templating=b_.Templating||{};ce=b_.RenderSnippets=b_.RenderSnippets||{};cf=b_.RenderProperties=b_.RenderProperties||{};cg=b_.Monaco=b_.Monaco||{};ch=cg.HoverProvider=cg.HoverProvider||{};ci=cg.CompletionItemProvider=cg.CompletionItemProvider||{};cj=cg.DefinitionProvider=cg.DefinitionProvider||{};ck=cg.MonacoOptions=cg.MonacoOptions||{};cl=cg.ITextModelService=cg.ITextModelService||{};cm=b_.JumpTo=b_.JumpTo||{};cn=b_.CustomAction=b_.CustomAction||{};co=b_.Serializer=b_.Serializer||{};cp=co.Model=co.Model||{};cq=b_.LoadSave=b_.LoadSave||{};cr=b_.Importer=b_.Importer||{};cs=b_.MainProgram=b_.MainProgram||{};ct=b_.Messaging=b_.Messaging||{};cu=a.StartupCode$FSharpStation$FSharpStation=a.StartupCode$FSharpStation$FSharpStation||{};cv=a.FSharpStation_JsonEncoder=a.FSharpStation_JsonEncoder||{};cw=a.FSharpStation_JsonDecoder=a.FSharpStation_JsonDecoder||{};cx=a.FSharpStation_GeneratedPrintf=a.FSharpStation_GeneratedPrintf||{};cy=a.FSharpStation_Templates=a.FSharpStation_Templates||{};cz=a.GeneratedPrintf=a.GeneratedPrintf||{};cA=a.IntelliFactory;cB=cA&&cA.Runtime;cC=j&&j.Utils;cD=j&&j.Strings;cE=j&&j.Seq;cF=j&&j.Arrays;cG=j&&j.List;cH=j&&j.Concurrency;cI=j&&j.Enumerator;cJ=j&&j.Result;cK=j&&j.Operators;cL=j&&j.Unchecked;cM=j&&j.Slice;cN=j&&j.Control;cO=cN&&cN.MailboxProcessor;cP=a.System;cQ=cP&&cP.Guid;cR=j&&j.Collections;cS=cR&&cR.FSharpSet;cT=j&&j.Option;cU=j&&j.CancellationTokenSource;cV=a.console;cW=j&&j.UI;cX=cW&&cW.View;cY=cW&&cW.Var$1;cZ=cR&&cR.FSharpMap;c0=cR&&cR.BalancedTree;c1=cW&&cW.DomUtility;c2=cW&&cW.Doc;c3=cW&&cW.AttrModule;c4=cW&&cW.AttrProxy;c5=a.Node;c6=cW&&cW.Client;c7=c6&&c6.Templates;c8=a.Reflect;c9=a.Object;c_=cR&&cR.Map;c$=a.JSON;da=j&&j.TimeoutException;db=j&&j.ClientSideJson;dc=db&&db.Provider;dd=j&&j.Owin;de=dd&&dd.WebSocket;df=de&&de.Client;dg=df&&df.WithEncoding;dh=de&&de.Endpoint;di=a.location;dj=j&&j.Remoting;dk=dj&&dj.AjaxRemotingProvider;dl=cW&&cW.FromView;dm=cW&&cW.Templating;dn=dm&&dm.Runtime;_do=dn&&dn.Server;dp=_do&&_do.ProviderBuilder;dq=_do&&_do.Handler;dr=_do&&_do.TemplateInstance;ds=j&&j.JavaScript;dt=ds&&ds.Promise;du=W&&W.AppFramework;dv=a.Date;dw=du&&du.PlugIn;dx=j&&j.Lazy;dy=W&&W.LayoutEngineModule;dz=j&&j.DateUtil;dA=j&&j.Numeric;dB=cW&&cW.ListModel;dC=cR&&cR.Dictionary;dD=a.LayoutEngine_Templates;d=c.ResultMessage=cB.Class({toString:function(){return this.$==1?(function(dE){return function(dF){return dE("Error    : "+cC.toSafe(dF));};}(a.id))(this.$0):this.$==2?(function(dE){return function(dF){return dE("Warning  : "+cC.toSafe(dF));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(dE){return function(dF){return dE(a.String(dF));};}(a.id))(this.$0):this.$==5?(((cB.Curried3(function(dE,dF,dG){return dE("Exception: "+cC.toSafe(dF)+", "+cC.toSafe(dG));}))(a.id))(this.$0))(this.$1):this.$==6?cD.concat("\n",cE.map(a.String,cE.filter(function(dE){return dE.$!=0;},this.$0))):"";}},null,d);d.NoMsg=new d({$:0});e.infof=function(dE){return dE(function(dF){return new d({$:3,$0:dF});});};e.warningf=function(dE){return dE(function(dF){return new d({$:2,$0:dF});});};e.errorMsgf=function(dE){return dE(function(dF){return new d({$:1,$0:dF});});};d.summarizedI=function(dE){return d.summarizedF(function(){return[0,0,1];},dE);};d.summarizedW=function(dE){return d.summarizedF(function(){return[0,1,0];},dE);};d.summarized=function(dE){return d.summarizedF(function(){return[1,0,0];},dE);};d.summarizedF=function(dE,dF){return d.summaryF(dE,dF)+a.String(dF);};d.summaryF=function(dE,dF){var dG,dH;dH=d.countF(dE,dF);switch(dH[0]===0?dH[1]===0?0:dH[1]===1?dH[2]===0?0:(dG=dH[1],2):(dG=dH[1],2):dH[0]===1?dH[1]===0?dH[2]===0?0:(dG=dH[0],1):(dG=[dH[0],dH[1]],3):dH[1]===0?(dG=dH[0],1):(dG=[dH[0],dH[1]],3)){case 0:return"";case 1:return(function(dI){return function(dJ){return dI("Errors   : "+a.String(dJ)+"\n");};}(a.id))(dG);case 2:return(function(dI){return function(dJ){return dI("Warnings : "+a.String(dJ)+"\n");};}(a.id))(dG);case 3:return(((cB.Curried3(function(dI,dJ,dK){return dI("Errors   : "+a.String(dJ)+", Warnings: "+a.String(dK)+"\n");}))(a.id))(dG[0]))(dG[1]);}};d.reduceMsgs=function(dE){return cE.fold(d.addMsg,d.NoMsg,dE);};d.addMsg=function(dE,dF){return dE.$==0?dF:dE.$==6?dF.$==0?dE:dF.$==6?new d({$:6,$0:dE.$0.concat(dF.$0)}):new d({$:6,$0:dE.$0.concat([dF])}):dF.$==0?dE:dF.$==6?new d({$:6,$0:[dE].concat(dF.$0)}):new d({$:6,$0:[dE,dF]});};d.countI=function(dE){return d.countF(function(){return[0,0,1];},dE);};d.countW=function(dE){return d.countF(function(){return[0,1,0];},dE);};d.count=function(dE){return d.countF(function(){return[1,0,0];},dE);};d.countF=function(dE,dF){function dG(dH,dI,dJ){return function(dK){return[dH+dK[0],dI+dK[1],dJ+dK[2]];};}return dF.$==0?[0,0,0]:dF.$==3?[0,0,1]:dF.$==2?[0,1,0]:dF.$==4?dE(dF.$0):dF.$==6?cE.fold(function(dH,dI){return(function(dJ){return dG(dJ[0],dJ[1],dJ[2]);}(dH))(dI);},[0,0,0],cE.map(function(dH){return d.countF(dE,dH);},d.exclnoMsg(dF.$0))):[1,0,0];};d.isFatalW=function(dE){return d.isFatalF(function(){return false;},dE);};d.isFatal=function(dE){return d.isFatalF(function(){return true;},dE);};d.isFatalF=function(dE,dF){return dF.$==0?false:dF.$==3?false:dF.$==2?false:dF.$==4?dE(dF.$0):dF.$==6?cE.exists(function(dG){return d.isFatalF(dE,dG);},dF.$0):true;};d.isWarningOrInfoW=function(dE){return d.isWarningOrInfoF(function(){return true;},dE);};d.isWarningOrInfo=function(dE){return d.isWarningOrInfoF(function(){return false;},dE);};d.isWarningOrInfoF=function(dE,dF){return dF.$==2||(dF.$==4?dE(dF.$0):dF.$==6&&cE.forall(function(dG){return d.isWarningOrInfoF(dE,dG)||d.isInfoF(dE,dG);},d.exclnoMsg(dF.$0)));};d.isInfoI=function(dE){return d.isInfoF(function(){return true;},dE);};d.isInfo=function(dE){return d.isInfoF(function(){return false;},dE);};d.isInfoF=function(dE,dF){return dF.$==3||(dF.$==4?dE(dF.$0):dF.$==6&&cE.forall(function(dG){return d.isInfoF(dE,dG);},d.exclnoMsg(dF.$0)));};d.freeMessageI=function(dE){var dF;function dG(dH){return new d({$:3,$0:dH});}return d.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};d.freeMessageW=function(dE){var dF;function dG(dH){return new d({$:2,$0:dH});}return d.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};d.freeMessage=function(dE){var dF;function dG(dH){return new d({$:1,$0:dH});}return d.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};d.freeMessageF=function(dE,dF){return d.bindMessage(dE,dF);};d.bindMessage=function(dE,dF){return dF.$==4?dE(dF.$0):dF.$==1?new d({$:1,$0:dF.$0}):dF.$==3?new d({$:3,$0:dF.$0}):dF.$==2?new d({$:2,$0:dF.$0}):dF.$==5?new d({$:5,$0:dF.$0,$1:dF.$1}):dF.$==6?new d({$:6,$0:cF.map(function(dG){return d.bindMessage(dE,dG);},dF.$0)}):d.NoMsg;};d.exclnoMsg=function(dE){function dF(dG){return!dG;}return cE.filter(function(dG){return dF(d.noMsg(dG));},dE);};d.noMsg=function(dE){return dE.$==0;};g.absorbR=function(dE){return cE.choose(function(dF){return dF.$==0?{$:1,$0:dF.$0}:null;},dE);};g.absorbO=function(dE){return cE.choose(a.id,dE);};g.insertR=function(dE){return dE.$==0?cE.map(function(dF){return{$:0,$0:dF};},dE.$0):(g.rtn())(c.Error$1(dE.$0));};g.insertO=function(dE){var dF;dF=dE==null?null:{$:1,$0:cE.map(function(dG){return{$:1,$0:dG};},dE.$0)};return dF==null?(g.rtn())(null):dF.$0;};g.rtn=function(){cu.$cctor();return cu.rtn;};h.absorbR=function(dE){var dF,dG;return dE!=null&&dE.$==1&&(dG=dE.$0,dG.$==0&&(dF=dG.$0,true))?{$:1,$0:dF}:null;};h.insertR=function(dE){var dF;return dE.$==0?(dF=dE.$0,dF==null?null:{$:1,$0:{$:0,$0:dF.$0}}):h.rtn(c.Error$1(dE.$0));};h.sequenceSeq=function(dE){return h.traverseSeq(a.id,dE);};h.traverseSeq=function(dE,dF){var dG;dG=cF.foldBack(function(dH,dI){return h.op_GreaterGreaterEquals(dE(dH),function(dJ){return h.op_GreaterGreaterEquals(dI,function(dK){return h.rtn(new cG.T({$:1,$0:dJ,$1:dK}));});});},cF.ofSeq(dF),h.rtn(cG.T.Empty));return dG==null?null:{$:1,$0:dG.$0};};h.op_GreaterGreaterEquals=function(dE,dF){return dE==null?null:dF(dE.$0);};h.bindNone=function(dE,dF){return dF!=null&&dF.$==1?{$:1,$0:dF.$0}:dE();};h.mapNone=function(dE,dF){return dF==null?dE():dF.$0;};h.apply=function(dE,dF){var dG;return dE!=null&&dE.$==1&&(dF!=null&&dF.$==1&&(dG=[dE.$0,dF.$0],true))?{$:1,$0:dG[0](dG[1])}:null;};h.join=function(dE){return dE==null?null:dE.$0;};h.iter=function(dE){function dF(dH){return dH==null?null:{$:1,$0:dE(dH.$0)};}function dG(dH){if(dH==null);}return function(dH){return dG(dF(dH));};};h.rtn=function(dE){return{$:1,$0:dE};};i.insertR=function(dE){function dF(dH){return{$:0,$0:dH};}function dG(dH){return cH.Return(dH);}return dE.$==0?cH.Bind(dE.$0,function(dH){return dG(dF(dH));}):cH.Return(c.Error$1(dE.$0));};i.insertO=function(dE){var dF;function dG(dI){return{$:1,$0:dI};}function dH(dI){return cH.Return(dI);}dF=dE==null?null:{$:1,$0:cH.Bind(dE.$0,function(dI){return dH(dG(dI));})};return dF==null?cH.Return(null):dF.$0;};i.sequenceSeq=function(dE){return i.traverseSeq(a.id,dE);};i.traverseSeq=function(dE,dF){function dG(dH){return cH.Return(dH);}return cH.Bind(cF.foldBack(function(dH,dI){return i.op_GreaterGreaterEquals(dE(dH),function(dJ){return i.op_GreaterGreaterEquals(dI,function(dK){return cH.Return(new cG.T({$:1,$0:dJ,$1:dK}));});});},cF.ofSeq(dF),cH.Return(cG.T.Empty)),function(dH){return dG(a.id(dH));});};i.op_GreaterGreaterEquals=function(dE,dF){return cH.Bind(dE,dF);};i.sleepThen=function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.Bind(cH.Sleep(dF),function(){return cH.Return(dE());});});};i.apply=function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.Bind(cH.StartChild(dE,null),function(dH){return cH.Bind(cH.StartChild(dF,null),function(dI){return cH.Bind(dH,function(dJ){return cH.Bind(dI,function(dK){return cH.Return(dJ(dK));});});});});});};m=l.Builder=cB.Class({For:function(dE,dF){var dG;dG=this;return this.Using(cI.Get(dE),function(dH){return dG.While(function(){return dH.MoveNext();},dG.Delay(function(){return dF(dH.Current());}));});},While:function(dE,dF){function dG(dH,dI){return dH()?cJ.Bind(function(){return dG(dH,dI);},dI()):l.rtn();}return dG(dE,dF);},Using:function(dE,dF){try{return dF(dE);}finally{dE.Dispose();}},TryFinally:function(dE,dF){try{return dE();}finally{dF();}},TryWith:function(dE,dF){try{return dE();}catch(dG){return dF(dG);}},Run:function(dE){return l.bindP(dE,{$:0,$0:null});},Combine:function(dE,dF){return cJ.Bind(dF,dE);},Delay:a.id,Zero:function(){return l.rtn();},Bind:function(dE,dF){return l.bindP(dF,dE);},ReturnFrom:a.id,Return:function(dE){return l.rtn(dE);}},k,m);m.New=cB.Ctor(function(){k.New.call(this);},m);n.result=function(){cu.$cctor();return cu.result$1;};n.rtn=function(dE){return l.rtn(dE);};n.op_GreaterEqualsGreater=function(dE,dF,dG){return n.op_GreaterGreaterEquals(dE(dG),dF);};n.op_RightShift=function(dE,dF,dG){return n.op_BarGreaterGreater(dE(dG),dF);};n.op_GreaterGreaterEquals=function(dE,dF){return l.bindP(dF,dE);};n.op_BarGreaterGreater=function(dE,dF){return l.mapP(dF,dE);};l.result=function(){cu.$cctor();return cu.result;};l.sequenceSeq=function(dE){return l.traverseSeq(a.id,dE);};l.traverseSeq=function(dE,dF){return cJ.Map(a.id,cF.foldBack(function(dG,dH){return l.op_GreaterGreaterEquals(dE(dG),function(dI){return l.op_GreaterGreaterEquals(dH,function(dJ){return l.rtn(new cG.T({$:1,$0:dI,$1:dJ}));});});},cF.ofSeq(dF),l.rtn(cG.T.Empty)));};l.op_GreaterGreaterEquals=function(dE,dF){return cJ.Bind(dF,dE);};l.absorbO=function(dE,dF){return l.bindP(function(dG){return l.ofOption(dE,dG);},dF);};l.insertO=function(dE){var dF;dF=dE==null?null:{$:1,$0:cJ.Map(function(dG){return{$:1,$0:dG};},dE.$0)};return dF==null?{$:0,$0:null}:dF.$0;};l.ofOption=function(dE,dF){var dG;dG=dF==null?null:{$:1,$0:{$:0,$0:dF.$0}};return dG==null?function(dH){return c.Error$1(dE(dH));}():dG.$0;};l.get=function(dE){return l.defaultWith(function(dF){return cK.FailWith(a.String(dF));},dE);};l.iter=function(dE,dF,dG){l.defaultWith(dE,l.mapP(dF,dG));};l.mapP=function(dE,dF){return l.bindP(function(dG){return l.rtn(dE(dG));},dF);};l.bindP=function(dE,dF){if(dF.$==1)return c.Error$1(dF.$0);else try{return dE(dF.$0);}catch(dG){return c.Error$1(new d({$:5,$0:dG.message,$1:dG.stack}));}};l.failIfFalse=function(dE,dF){return!dF?c.Error$1(dE):{$:0,$0:null};};l.failIfTrue=function(dE,dF){return dF?c.Error$1(dE):{$:0,$0:null};};l.defaultValue=function(dE,dF){return dF.$==1?dE:dF.$0;};l.defaultWith=function(dE,dF){return dF.$==1?dE(dF.$0):dF.$0;};l.toOption=function(dE){return dE.$==0?{$:1,$0:dE.$0}:null;};l.rtn=function(dE){return{$:0,$0:dE};};l.freeMessage=function(dE){return dE.$==1?c.Error$1(d.freeMessage(dE.$0)):{$:0,$0:dE.$0};};p.rtn=function(dE){return o.rtn(dE);};p.op_GreaterEqualsGreater=function(dE,dF,dG){return p.op_GreaterGreaterEquals(dE(dG),dF);};p.op_RightShift=function(dE,dF,dG){return p.op_BarGreaterGreater(dE(dG),dF);};p.op_GreaterGreaterEquals=function(dE,dF){return o.bind(dF,dE);};p.op_BarGreaterGreater=function(dE,dF){return o.map(dF,dE);};p.op_LessMultiplyGreater=function(dE,dF){return o.apply(dE,dF);};r=q.Builder=cB.Class({For:function(dE,dF){var dG;dG=this;return this.Using(cI.Get(dE),function(dH){return dG.While(function(){return dH.MoveNext();},dG.Delay(function(){return dF(dH.Current());}));});},Using:function(dE,dF){return this.TryFinally(function(){return dF(dE);},function(){if(!cL.Equals(dE,null))dE.Dispose();});},TryFinally:function(dE,dF){return o.wrap(function(dG){try{return(o.getFun(dE()))(dG);}finally{dF();}});},TryWith:function(dE,dF){return o.wrap(function(dG){try{return(o.getFun(dE()))(dG);}catch(dH){return dF(dH);}});},While:function(dE,dF){function dG(dH,dI){return dH()?o.bind(function(){return dG(dH,dI);},dI()):o.rtn();}return dG(dE,dF);},Run:function(dE){return o.wrap(function(dF){return(o.getFun(dE()))(dF);});},Combine:function(dE,dF){return o.bind(dF,dE);},Delay:a.id,Zero:function(){return o.rtn();},Bind:function(dE,dF){return o.bind(dF,dE);},ReturnFrom:function(dE){return o.from(dE);},Return:function(dE){return o.rtn(dE);}},k,r);r.New=cB.Ctor(function(){k.New.call(this);},r);o.fusion=function(){cu.$cctor();return cu.fusion;};o.absorbO=function(dE,dF){return o.absorbR(o.map(function(dG){return l.ofOption(dE,dG);},dF));};o.absorbR=function(dE){return o.bind(o.ofResultRM,dE);};o.insertSnd=function(dE,dF){return o.map(function(dG){return[dG,dF];},dE);};o.insertFst=function(dE,dF){return o.map(function(dG){return[dE,dG];},dF);};o.insertR=function(dE){return dE.$==0?o.map(function(dF){return{$:0,$0:dF};},dE.$0):o.rtn(c.Error$1(dE.$0));};o.insertO=function(dE){var dF;dF=dE==null?null:{$:1,$0:o.map(function(dG){return{$:1,$0:dG};},dE.$0)};return dF==null?o.rtn(null):dF.$0;};o.iterResultPrint=function(dE){function dF(dG){c.print$1(dG);}o.iterReader(function(dG){return dF(d.summarized(dG));},function(dG){c.print$1(dG);},null,dE);};o.iterResult=function(dE,dF,dG){o.iterReader(dE,dF,null,dG);};o.runResult=function(dE){return o.runReader(null,dE);};o.runReader=function(dE,dF){var dG,dH,dI;dG=o.run(dE,dF);dH=dG[2];return l.ofOption(function(){return dH;},(dI=dG[0],dI==null?null:{$:1,$0:[dI.$0,dH]}));};o.mapReader=function(dE,dF){return o.mapState(function(){return dE;},a.id,dF);};o.readerFun=function(dE){return o.map(dE,o.getS());};o.sequenceSeq=function(dE){return o.traverseSeq(a.id,dE);};o.traverseSeq=function(dE,dF){return o.map(a.id,cF.foldBack(function(dG,dH){return o.op_GreaterGreaterEquals(dE(dG),function(dI){return o.op_GreaterGreaterEquals(dH,function(dJ){return o.rtn(new cG.T({$:1,$0:dI,$1:dJ}));});});},cF.ofSeq(dF),o.rtn(cG.T.Empty)));};o.op_GreaterGreaterEquals=function(dE,dF){return o.bind(dF,dE);};o.apply=function(dE,dF){return o.bind(function(dG){return o.map(dG,dF);},dE);};o.memoizeRm=function(dE,dF,dG){return{$:0,$0:function(dH){var dI,dJ,dK,dL,dM;function dN(dO,dP){return(dK(dO))(function(){return dP;});}dI=dH[0];dJ=dE(dI);dK=dJ[1];return o.run(dI,(dL=(dM=dJ[0](dG),dM==null?null:{$:1,$0:o.rtn(dM.$0)}),dL==null?o.map(function(dO){return dN(dG,dO);},dF(dG)):dL.$0));}};};o.iterReader=function(dE,dF,dG,dH){var dI,dJ;dI=o.run(dG,o.map(dF,dH));dJ=dI[2];(h.iter(a.ignore))(dI[0]);dJ.$!==0?dE(dJ):void 0;};o.mapState=function(dE,dF,dG){return{$:0,$0:function(dH){var dI,dJ;dI=dH[0];dJ=(o.getFun(dG))([dE(dI),dH[1]]);return[dJ[0],dF(dI,dJ[1]),dJ[2]];}};};o.freeMessageW=function(dE){var dF;function dG(dH){return new d({$:2,$0:dH});}return o.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};o.freeMessage=function(dE){var dF;function dG(dH){return new d({$:1,$0:dH});}return o.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};o.freeMessageF=function(dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ;dH=dG[0];dI=dG[1];try{dJ=dF.$0([dH,d.freeMessage(dI)]);return[dJ[0],dJ[1],d.freeMessageF(dE,dJ[2])];}catch(dK){return[null,dH,d.freeMessage(d.addMsg(dI,new d({$:5,$0:dK.message,$1:dK.stack})))];}}};};o.ofFusionM=function(dE){return o.from(dE);};o.ofResultMessage=function(dE){return o.OkFMsg(null,dE);};o.ofMessage=function(dE){return o.OkFMsg(null,new d({$:4,$0:dE}));};o.ofOption=function(dE,dF){return dF==null?o.ErrorF(dE()):o.OkF(dF.$0);};o.ofResult=function(dE){return dE.$==1?o.ErrorF(new d({$:1,$0:(function(dF){return function(dG){return dF(cC.prettyPrint(dG));};}(a.id))(dE.$0)})):o.OkF(dE.$0);};o.ofResultS=function(dE){return dE.$==1?o.ErrorF(new d({$:1,$0:dE.$0})):o.OkF(dE.$0);};o.ofResultM=function(dE){return dE.$==1?o.ErrorF(new d({$:4,$0:dE.$0})):o.OkF(dE.$0);};o.ofResultRM=function(dE){return dE.$==1?o.ErrorF(dE.$0):o.OkF(dE.$0);};o.inling=function(dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ;dH=dG[0];dI=dG[1];try{dJ=dF.$0([dH,dI]);return[{$:1,$0:dJ[0]},dJ[1],dJ[2]];}catch(dK){return[null,dH,d.addMsg(dI,new d({$:5,$0:dK.message,$1:dK.stack}))];}}};};o.check=function(){return{$:0,$0:function(dE){return[d.isFatal(dE[1])?null:{$:1,$0:null},dE[0],d.NoMsg];}};};o.putS=function(dE){return{$:0,$0:function(){return[{$:1,$0:null},dE,d.NoMsg];}};};o.getR=function(){return{$:0,$0:function(dE){return[{$:1,$0:dE[1]},dE[0],d.NoMsg];}};};o.getS=function(){return{$:0,$0:function(dE){var dF;dF=dE[0];return[{$:1,$0:dF},dF,d.NoMsg];}};};o.ErrorF=function(dE){return{$:0,$0:function(dF){return[null,dF[0],dE];}};};o.OkFMsg=function(dE,dF){return{$:0,$0:function(dG){return[{$:1,$0:dE},dG[0],dF];}};};o.OkF=function(dE){return{$:0,$0:function(dF){return[{$:1,$0:dE},dF[0],d.NoMsg];}};};o.run=function(dE,dF){return(o.getFun(dF))([dE,d.NoMsg]);};o.from=a.id;o.getFun=function(dE){return dE.$0;};o.wrap=function(dE){return{$:0,$0:dE};};o.map=function(dE,dF){return o.bind(function(dG){return o.rtn(dE(dG));},dF);};o.bind=function(dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ,dK,dL,dM,dN;dH=dG[0];dI=dG[1];try{dJ=dF.$0([dH,dI]);dK=dJ[0];dL=dJ[1];dM=dJ[2];return dK!=null&&dK.$==1?(dN=dE(dK.$0).$0([dL,d.addMsg(dI,dM)]),[dN[0],dN[1],d.addMsg(dM,dN[2])]):[null,dL,dM];}catch(dO){return[null,dH,d.addMsg(dI,new d({$:5,$0:dO.message,$1:dO.stack}))];}}};};o.rtn=function(dE){return{$:0,$0:function(dF){return[{$:1,$0:dE},dF[0],d.NoMsg];}};};t.rtn=function(dE){return s.rtn(dE);};t.op_GreaterEqualsGreater=function(dE,dF,dG){return t.op_GreaterGreaterEquals(dE(dG),dF);};t.op_RightShift=function(dE,dF,dG){return t.op_BarGreaterGreater(dE(dG),dF);};t.op_GreaterGreaterEquals=function(dE,dF){return s.bind(dF,dE);};t.op_BarGreaterGreater=function(dE,dF){return s.map(dF,dE);};t.op_LessMultiplyGreater=function(dE,dF){return s.apply(dE,dF);};v=u.Builder=cB.Class({For:function(dE,dF){var dG;dG=this;return this.Using(cI.Get(dE),function(dH){return dG.While(function(){return dH.MoveNext();},dG.Delay(function(){return dF(dH.Current());}));});},Using:function(dE,dF){function dG(dH,dI){return cH.Using(dE,function(dJ){return(s.getFun(dF(dJ)))([dH,dI]);});}return s.wrap(function(dH){return dG(dH[0],dH[1]);});},TryFinally:function(dE,dF){function dG(dH,dI){return cH.TryFinally((s.getFun(dE()))([dH,dI]),dF);}return s.wrap(function(dH){return dG(dH[0],dH[1]);});},TryWith:function(dE,dF){function dG(dH,dI){return cH.TryWith((s.getFun(dE()))([dH,dI]),dF);}return s.wrap(function(dH){return dG(dH[0],dH[1]);});},While:function(dE,dF){function dG(dH,dI){return dH()?s.bind(function(){return dG(dH,dI);},dI()):s.rtn();}return dG(dE,dF);},Run:function(dE){return s.wrap(function(dF){return(s.getFun(dE()))(dF);});},Combine:function(dE,dF){return s.bind(dF,dE);},Delay:a.id,Zero:function(){return s.rtn();},Bind:function(dE,dF){return s.bind(dF,dE);},ReturnFrom:function(dE){return s.from(dE);},Return:function(dE){return s.rtn(dE);}},k,v);v.New=cB.Ctor(function(){k.New.call(this);},v);s.fusion=function(){cu.$cctor();return cu.fusion$1;};s.iterResultPrintA=function(dE){function dF(dG){c.print$1(dG);}s.iterReaderA(function(dG){return dF(d.summarized(dG));},function(dG){c.print$1(dG);},null,dE);};s.iterResultPrint=function(dE){function dF(dG){c.print$1(dG);}s.iterReader(function(dG){return dF(d.summarized(dG));},function(dG){c.print$1(dG);},null,dE);};s.iterResultA=function(dE,dF,dG){s.iterReaderA(dE,dF,null,dG);};s.iterResult=function(dE,dF,dG){s.iterReader(dE,dF,null,dG);};s.runResult=function(dE){return s.runReader(null,dE);};s.runReader=function(dE,dF){function dG(dI,dJ,dK){return l.ofOption(function(){return dK;},dI==null?null:{$:1,$0:[dI.$0,dK]});}function dH(dI){return cH.Return(dI);}return cH.Bind(s.run(dE,dF),function(dI){return dH(dG.apply(null,dI));});};s.mapReader=function(dE,dF){return s.mapState(function(){return dE;},a.id,dF);};s.absorbO=function(dE,dF){return s.absorbR(s.map(function(dG){return l.ofOption(dE,dG);},dF));};s.absorbR=function(dE){return s.bind(s.ofResultRM,dE);};s.insertSnd=function(dE,dF){return s.map(function(dG){return[dG,dF];},dE);};s.insertFst=function(dE,dF){return s.map(function(dG){return[dE,dG];},dF);};s.insertR=function(dE){return dE.$==0?s.map(function(dF){return{$:0,$0:dF};},dE.$0):s.rtn(c.Error$1(dE.$0));};s.insertO=function(dE){var dF;dF=dE==null?null:{$:1,$0:s.map(function(dG){return{$:1,$0:dG};},dE.$0)};return dF==null?s.rtn(null):dF.$0;};s.readerFun=function(dE){return s.map(dE,s.getS());};s.freeMessageW=function(dE){var dF;function dG(dH){return new d({$:2,$0:dH});}return s.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};s.freeMessage=function(dE){var dF;function dG(dH){return new d({$:1,$0:dH});}return s.freeMessageF((dF=function(dH){return function(dI){return dH(a.String(dI));};}(a.id),function(dH){return dG(dF(dH));}),dE);};s.sequenceSeq=function(dE){return s.traverseSeq(a.id,dE);};s.traverseSeq=function(dE,dF){return s.map(a.id,cF.foldBack(function(dG,dH){return s.op_GreaterGreaterEquals(dE(dG),function(dI){return s.op_GreaterGreaterEquals(dH,function(dJ){return s.rtn(new cG.T({$:1,$0:dI,$1:dJ}));});});},cF.ofSeq(dF),s.rtn(cG.T.Empty)));};s.op_GreaterGreaterEquals=function(dE,dF){return s.bind(dF,dE);};s.apply=function(dE,dF){return s.bind(function(dG){return s.map(dG,dF);},dE);};s.memoizeRm=function(dE,dF,dG){return{$:0,$0:function(dH){var dI,dJ;dI=dH[0];dJ=null;return cH.Delay(function(){var dK,dL,dM,dN;function dO(dP,dQ){return(dL(dP))(function(){return dQ;});}dK=dE(dI);dL=dK[1];return s.run(dI,(dM=(dN=dK[0](dG),dN==null?null:{$:1,$0:s.rtn(dN.$0)}),dM==null?s.map(function(dP){return dO(dG,dP);},dF(dG)):dM.$0));});}};};s.iterReaderA=function(dE,dF,dG,dH){function dI(dK,dL,dM){(h.iter(a.ignore))(dK);dM.$!==0?dE(dM):void 0;}function dJ(dK){return cH.Return(dK);}cH.Start(cH.Bind(s.run(dG,s.map(dF,dH)),function(dK){return dJ(dI.apply(null,dK));}),null);};s.iterReader=function(dE,dF,dG,dH){var dI;dI=s.run(dG,s.map(dF,dH));throw"iterS cannot be used in JavaScript!";};s.mapState=function(dE,dF,dG){return{$:0,$0:function(dH){var dI,dJ,dK;dI=dH[0];dJ=dH[1];dK=null;return cH.Delay(function(){return cH.Bind((s.getFun(dG))([dE(dI),dJ]),function(dL){return cH.Return([dL[0],dF(dI,dL[1]),dL[2]]);});});}};};s.freeMessageF=function(dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ;dH=dG[0];dI=dG[1];dJ=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dF.$0([dH,d.freeMessage(dI)]),function(dK){return cH.Return([dK[0],dK[1],d.freeMessageF(dE,dK[2])]);});}),function(dK){return cH.Return([null,dH,d.freeMessage(d.addMsg(dI,new d({$:5,$0:dK.message,$1:dK.stack})))]);});});}};};s.ofAsyncResultRM=function(dE){return s.bind(s.ofResultRM,s.ofAsync(dE));};s.ofAsync=function(dE){return{$:0,$0:function(dF){var dG;function dH(dJ){return[{$:1,$0:dJ},dG,d.NoMsg];}function dI(dJ){return cH.Return(dJ);}dG=dF[0];return cH.Bind(dE,function(dJ){return dI(dH(dJ));});}};};s.ofFusionM=function(dE){var dF;dF=dE.$0;return{$:0,$0:function(dG){return cH.Return(dF([dG[0],dG[1]]));}};};s.ofResultMessage=function(dE){return s.OkFMsg(null,dE);};s.ofMessage=function(dE){return s.OkFMsg(null,new d({$:4,$0:dE}));};s.ofOption=function(dE,dF){var dG;dG=dF==null?null:{$:1,$0:s.OkF(dF.$0)};return dG==null?function(dH){return s.ErrorF(dE(dH));}():dG.$0;};s.ofResult=function(dE){return dE.$==1?s.ErrorF(new d({$:1,$0:(function(dF){return function(dG){return dF(cC.prettyPrint(dG));};}(a.id))(dE.$0)})):s.OkF(dE.$0);};s.ofResultS=function(dE){return dE.$==1?s.ErrorF(new d({$:1,$0:dE.$0})):s.OkF(dE.$0);};s.ofResultM=function(dE){return dE.$==1?s.ErrorF(new d({$:4,$0:dE.$0})):s.OkF(dE.$0);};s.ofResultRM=function(dE){return dE.$==1?s.ErrorF(dE.$0):s.OkF(dE.$0);};s.getOption=function(dE){return{$:0,$0:function(dF){var dG,dH,dI;dG=dF[0];dH=dF[1];dI=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dE.$0([dG,dH]),function(dJ){return cH.Return([{$:1,$0:dJ[0]},dJ[1],dJ[2]]);});}),function(dJ){return cH.Return([null,dG,d.addMsg(dH,new d({$:5,$0:dJ.message,$1:dJ.stack}))]);});});}};};s.check=function(){return{$:0,$0:function(dE){return cH.Return([d.isFatal(dE[1])?null:{$:1,$0:null},dE[0],d.NoMsg]);}};};s.putS=function(dE){return{$:0,$0:function(){return cH.Return([{$:1,$0:null},dE,d.NoMsg]);}};};s.getR=function(){return{$:0,$0:function(dE){return cH.Return([{$:1,$0:dE[1]},dE[0],d.NoMsg]);}};};s.getS=function(){return{$:0,$0:function(dE){var dF;dF=dE[0];return cH.Return([{$:1,$0:dF},dF,d.NoMsg]);}};};s.ErrorF=function(dE){return{$:0,$0:function(dF){return cH.Return([null,dF[0],dE]);}};};s.OkFMsg=function(dE,dF){return{$:0,$0:function(dG){return cH.Return([{$:1,$0:dE},dG[0],dF]);}};};s.OkF=function(dE){return{$:0,$0:function(dF){return cH.Return([{$:1,$0:dE},dF[0],d.NoMsg]);}};};s.run=function(dE,dF){return(s.getFun(dF))([dE,d.NoMsg]);};s.from=a.id;s.getFun=function(dE){return dE.$0;};s.wrap=function(dE){return{$:0,$0:dE};};s.map=function(dE,dF){return s.bind(function(dG){return s.rtn(dE(dG));},dF);};s.bind=function(dE,dF){return{$:0,$0:function(dG){var dH,dI,dJ;dH=dG[0];dI=dG[1];dJ=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dF.$0([dH,dI]),function(dK){var dL,dM,dN;dL=dK[0];dM=dK[1];dN=dK[2];return dL!=null&&dL.$==1?cH.Bind(dE(dL.$0).$0([dM,d.addMsg(dI,dN)]),function(dO){return cH.Return([dO[0],dO[1],d.addMsg(dN,dO[2])]);}):cH.Return([null,dM,dN]);});}),function(dK){return cH.Return([null,dH,d.addMsg(dI,new d({$:5,$0:dK.message,$1:dK.stack}))]);});});}};};s.rtn=function(dE){return{$:0,$0:function(dF){return cH.Return([{$:1,$0:dE},dF[0],d.NoMsg]);}};};w.absorbO=function(dE,dF){function dG(dI){return l.absorbO(dE,dI);}function dH(dI){return cH.Return(dI);}return cH.Bind(dF,function(dI){return dH(dG(dI));});};w.absorbR=function(dE){var dF;function dG(dH){return cH.Return(dH);}return cH.Bind(dE,(dF=function(dH){return l.bindP(a.id,dH);},function(dH){return dG(dF(dH));}));};w.insertR=function(dE){return dE.$==0?w.map(function(dF){return{$:0,$0:dF};},dE.$0):w.rtn(c.Error$1(dE.$0));};w.insertO=function(dE){var dF;dF=dE==null?null:{$:1,$0:w.map(function(dG){return{$:1,$0:dG};},dE.$0)};return dF==null?w.rtn(null):dF.$0;};w.sequenceSeq=function(dE){return w.traverseSeq(a.id,dE);};w.traverseSeq=function(dE,dF){return w.map(a.id,cF.foldBack(function(dG,dH){return w.op_GreaterGreaterEquals(dE(dG),function(dI){return w.op_GreaterGreaterEquals(dH,function(dJ){return w.rtn(new cG.T({$:1,$0:dI,$1:dJ}));});});},cF.ofSeq(dF),w.rtn(cG.T.Empty)));};w.op_GreaterGreaterEquals=function(dE,dF){return w.bind(dF,dE);};w.whileLoop=function(dE,dF){return dE()?w.bind(function(){return w.whileLoop(dE,dF);},dF()):w.rtn();};w.mapP=function(dE,dF){return w.bindP(function(dG){return w.rtn(dE(dG));},dF);};w.map=function(dE,dF){return w.bind(function(dG){return w.rtn(dE(dG));},dF);};w.bindP=function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dF,function(dH){return dH.$==1?cH.Return(c.Error$1(dH.$0)):dE(dH.$0);});}),function(dH){return cH.Return(c.Error$1(new d({$:5,$0:dH.message,$1:dH.stack})));});});};w.bind=function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.Bind(dF,function(dH){var dI,dJ;return dH.$==1?(dI=dH.$0,(dJ=null,cH.Delay(function(){return cH.Return(c.Error$1(dI));}))):dE(dH.$0);});});};w.iterA=function(dE,dF,dG){function dH(dJ){l.iter(dE,dF,dJ);}function dI(dJ){return cH.Return(dJ);}cH.Start(cH.Bind(dG,function(dJ){return dI(dH(dJ));}),null);};w.iterS=function(dE,dF,dG){throw"iterS cannot be used in JavaScript!";};w.rtnR=function(dE){return cH.Return(dE);};w.rtn=function(dE){return cH.Return({$:0,$0:dE});};w.freeMessage=function(dE){function dF(dG){return cH.Return(dG);}return cH.Bind(dE,function(dG){return dF(l.freeMessage(dG));});};w.mapError=function(dE,dF){function dG(dI){return cJ.MapError(dE,dI);}function dH(dI){return cH.Return(dI);}return cH.Bind(dF,function(dI){return dH(dG(dI));});};x=f.AsyncResultBuilder=cB.Class({For:function(dE,dF){var dG;dG=this;return this.Using(cI.Get(dE),function(dH){return dG.While(function(){return dH.MoveNext();},dG.Delay(function(){return dF(dH.Current());}));});},While:function(dE,dF){return w.whileLoop(dE,dF);},Using:function(dE,dF){return cH.Using(dE,dF);},TryFinally:function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.TryFinally(cH.Delay(function(){return dE();}),function(){dF();});});},TryWith:function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return dE();}),function(dH){return dF(dH);});});},Run:function(dE){return dE();},Delay:a.id,Combine:function(dE,dF){return w.bind(dF,w.rtnR(dE));},Combine$1:function(dE,dF){return w.bind(dF,dE);},Bind:function(dE,dF){return w.bind(dF,w.rtnR(dE));},Bind$1:function(dE,dF){return w.bind(dF,dE);},Zero:function(){return w.rtn();},Return:function(dE){return w.rtn(dE);},ReturnFrom:function(dE){return w.rtnR(dE);},ReturnFrom$1:a.id},k,x);x.New=cB.Ctor(function(){k.New.call(this);},x);y=f.AsyncResultBuilderP=cB.Class({For:function(dE,dF){var dG;dG=this;return this.Using(cI.Get(dE),function(dH){return dG.While(function(){return dH.MoveNext();},dG.Delay(function(){return dF(dH.Current());}));});},While:function(dE,dF){return w.whileLoop(dE,dF);},Using:function(dE,dF){return cH.Using(dE,dF);},TryFinally:function(dE,dF){var dG;dG=null;return cH.Delay(function(){try{return dE();}finally{dF();}});},TryWith:function(dE,dF){var dG;dG=null;return cH.Delay(function(){try{return dE();}catch(dH){return dF(dH);}});},Run:function(dE){return w.bindP(dE,w.rtn());},Delay:a.id,Combine:function(dE,dF){return w.bindP(dF,w.rtnR(dE));},Combine$1:function(dE,dF){return w.bindP(dF,dE);},Bind:function(dE,dF){return w.bindP(dF,w.rtnR(dE));},Bind$1:function(dE,dF){return w.bindP(dF,dE);},Zero:function(){return w.rtn();},Return:function(dE){return w.rtn(dE);},ReturnFrom:function(dE){return w.rtnR(dE);},ReturnFrom$1:a.id},k,y);y.New=cB.Ctor(function(){k.New.call(this);},y);z["AsyncResultBuilderP.Combine"]=function(dE,dF,dG){function dH(dJ){return{$:0,$0:dJ};}function dI(dJ){return cH.Return(dJ);}return w.bindP(dG,cH.Bind(dF,function(dJ){return dI(dH(dJ));}));};z["AsyncResultBuilderP.Bind"]=function(dE,dF,dG){function dH(dJ){return{$:0,$0:dJ};}function dI(dJ){return cH.Return(dJ);}return w.bindP(dG,cH.Bind(dF,function(dJ){return dI(dH(dJ));}));};z["AsyncResultBuilderP.ReturnFrom"]=function(dE,dF){function dG(dI){return{$:0,$0:dI};}function dH(dI){return cH.Return(dI);}return cH.Bind(dF,function(dI){return dH(dG(dI));});};z["AsyncResultBuilder.Combine"]=function(dE,dF,dG){function dH(dJ){return{$:0,$0:dJ};}function dI(dJ){return cH.Return(dJ);}return w.bind(dG,cH.Bind(dF,function(dJ){return dI(dH(dJ));}));};z["AsyncResultBuilder.Bind"]=function(dE,dF,dG){function dH(dJ){return{$:0,$0:dJ};}function dI(dJ){return cH.Return(dJ);}return w.bind(dG,cH.Bind(dF,function(dJ){return dI(dH(dJ));}));};z["AsyncResultBuilder.ReturnFrom"]=function(dE,dF){function dG(dI){return{$:0,$0:dI};}function dH(dI){return cH.Return(dI);}return cH.Bind(dF,function(dI){return dH(dG(dI));});};f.asyncResultP=function(){cu.$cctor();return cu.asyncResultP;};f.asyncResult=function(){cu.$cctor();return cu.asyncResult;};A.EndsWith$1=function(dE,dF){return cD.EndsWith(dF,dE)?{$:1,$0:cM.string(dF,{$:1,$0:0},{$:1,$0:dF.length-dE.length-1})}:null;};A.StartsWith$1=function(dE,dF){return cD.StartsWith(dF,dE)?{$:1,$0:cM.string(dF,{$:1,$0:dE.length},null)}:null;};A.skipLastLine$1=function(){cu.$cctor();return cu.skipLastLine;};A.indentStr$1=function(dE){function dF(dH){return A.indent$1(dE,dH);}function dG(dH){return cD.concat("\n",dH);}return function(dH){return dG(dF(dH));};};A.unindentStr$1=function(){cu.$cctor();return cu.unindentStr;};A.indent$1=function(dE,dF){var dG,dH;dG=cD.SplitChars(dF,["\n"],0);return cE.map((dH=cD.replicate(dE," "),function(dI){return dH+dI;}),dG);};A.unindent$1=function(dE){var dF,dG,dH,dI;dF=cD.SplitChars(dE,["\n"],0);dG=(dH=cE.tryFindIndex(function(dJ){return" "!==dJ;},(dI=cE.tryFind(function(dJ){return cD.Trim(dJ)!=="";},dF),dI==null?"":dI.$0)),dH==null?0:dH.$0);return cE.filter(function(dJ){return!cD.StartsWith(dJ,"# 1 ");},cE.map(function(dJ){return dJ.length<=dG?"":dJ.substring(dG);},dF));};A.skipFirstLine$1=function(dE){var dF;dF=dE.indexOf("\n");return dF<0?"":cM.string(dE,{$:1,$0:dF+1},null);};A.append$1=function(dE,dF){return dE+dF;};A.trim$1=function(dE){return cD.Trim(dE);};A.contains$1=function(dE,dF){return dF.indexOf(dE)!=-1;};A.delimitedO$1=function(dE,dF,dG){var dH,dI,dJ,dK,dL;dH=A.splitInTwoO$1(dE,dG);return dH==null?null:(dI=dH.$0,(dJ=dI[0],(dK=A.splitInTwoO$1(dF,dI[1]),dK==null?null:{$:1,$0:(dL=dK.$0,[dJ,dL[0],dL[1]])})));};A.splitInTwoO$1=function(dE,dF){var dG;dG=dF.indexOf(dE);return dG===-1?null:{$:1,$0:[c["String.Left$1"](dF,dG),dF.substring(dG+dE.length)]};};A.splitByChar$1=function(dE,dF){return cD.SplitChars(dF,[dE],0);};B.Guid$1=function(){cu.$cctor();return cu["|Guid|_|"];};B.Double$1=function(){cu.$cctor();return cu["|Double|_|"];};B.Single$1=function(){cu.$cctor();return cu["|Single|_|"];};B.Int$1=function(){cu.$cctor();return cu["|Int|_|"];};B.Date$1=function(){cu.$cctor();return cu["|Date|_|"];};B.parseGuidO$1=function(){cu.$cctor();return cu.parseGuidO;};B.parseDoubleO$1=function(){cu.$cctor();return cu.parseDoubleO;};B.parseSingleO$1=function(){cu.$cctor();return cu.parseSingleO;};B.parseIntO$1=function(){cu.$cctor();return cu.parseIntO;};B.parseDateO$1=function(){cu.$cctor();return cu.parseDateO;};B.tryParseWith$1=function(dE){function dF(dG,dH){return dG?{$:1,$0:dH}:null;}return function(dG){return dF.apply(null,dE(dG));};};C.PostAndAsyncReply=function(dE,dF,dG){return dE.PostAndAsyncReply(function(dH){return[dH,dF];},dG);};E.applyReply=function(dE,dF){return E.applyReplyA(function(dG){var dH;dH=null;return cH.Delay(function(){return cH.Return(dE(dG));});},dF);};E.applyReplyA=function(dE,dF){return dF.PostAndAsyncReply(function(dG){return function(dH){var dI;dI=null;return cH.Delay(function(){return cH.Bind(dE(dH),function(dJ){dG(dJ[1]);return cH.Return(dJ[0]);});});};},null);};E.apply=function(dE,dF){E.applyA(function(dG){var dH;dH=null;return cH.Delay(function(){return cH.Return(dE(dG));});},dF);};E.applyA=function(dE,dF){dF.mailbox.AddLast(function(dG){var dH;dH=null;return cH.Delay(function(){return dE(dG);});});dF.resume();};E.setState=function(dE,dF){dF.mailbox.AddLast(function(){var dG;dG=null;return cH.Delay(function(){return cH.Return(dE);});});dF.resume();};E.getStateA=function(dE){return dE.PostAndAsyncReply(function(dF){return function(dG){var dH;dH=null;return cH.Delay(function(){dF(dG);return cH.Return(dG);});};},null);};D.defHandler=function(dE,dF){c.print$1(dE);return dF;};D.stateFull=function(dE,dF){return cO.Start(function(dG){function dH(dI){var dJ;dJ=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dG.Receive(null),function(dK){return cH.Bind(dK(dI),function(dL){return dH(dL);});});}),function(dK){return dH(dE(dK,dI));});});}return dH(dF);},null);};D.fold=function(dE,dF,dG){return D.foldA(dE,function(dH,dI){var dJ;dJ=null;return cH.Delay(function(){return cH.Return(dF(dH,dI));});},dG);};D.foldA=function(dE,dF,dG){return cO.Start(function(dH){function dI(dJ){var dK;dK=null;return cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dH.Receive(null),function(dL){return cH.Bind(dF(dJ,dL),function(dM){return dI(dM);});});}),function(dL){return dI(dE(dL,dJ));});});}return dI(dG);},null);};D.call=function(dE,dF){return D.callA(dE,function(dG){var dH;dH=null;return cH.Delay(function(){return cH.Return(dF(dG));});});};D.callA=function(dE,dF){return D.iterA(dE,function(dG){var dH,dI,dJ;dH=dG[0];dI=dG[1];dJ=null;return cH.Delay(function(){return cH.Bind(dF(dI),function(dK){dH(dK);return cH.Zero();});});});};D.iter=function(dE,dF){return D.iterA(dE,function(dG){var dH;dH=null;return cH.Delay(function(){dF(dG);return cH.Zero();});});};D.iterA=function(dE,dF){return cO.Start(function(dG){var dH;dH=null;return cH.Delay(function(){return cH.While(function(){return true;},cH.Delay(function(){return cH.TryWith(cH.Delay(function(){return cH.Bind(dG.Receive(null),function(dI){return cH.Bind(dF(dI),function(){return cH.Return(null);});});}),function(dI){dE(dI);return cH.Zero();});}));});},null);};F.New=function(dE,dF,dG,dH){return{useCount:dE,limitCount:dF,resource:dG,configuration:dH};};G=c.ResourceAgent=cB.Class({increment:function(dE){var dF,dG;dF=this;return(this.respawnRightAfter?(dG=dE.configuration,function(dH){return dF.check(dG,dH);}):a.id)(F.New(dE.useCount+1,dE.limitCount,dE.resource,dE.configuration));},check:function(dE,dF){return dF.useCount<dF.limitCount&&this.alive(dF.resource)&&cL.Equals(dE,dF.configuration)?dF:this.respawn(F.New(dF.useCount,dF.limitCount,dF.resource,dE));},respawn:function(dE){this.clean(dE.resource);return F.New(0,dE.limitCount,this.ctor(dE.configuration),dE.configuration);},Respawn:function(){var dE;dE=this;E.apply(function(dF){return dE.respawn(dF);},this.agent);},set_Configuration:function(dE){var dF;dF=this;!cL.Equals(dE,this.get_Configuration())?E.apply(function(dG){return dF.respawn(F.New(dG.useCount,dG.limitCount,dG.resource,dE));},this.agent):void 0;},set_LimitCount:function(dE){E.apply(function(dF){return F.New(dF.useCount,dE,dF.resource,dF.configuration);},this.agent);},get_Configuration:function(){return this.get_State().configuration;},get_LimitCount:function(){return this.get_State().limitCount;},get_State:function(){throw"getState not available in JavaScript";},ProcessA:function(dE,dF){return this.AsyncProcessA(function(dG){var dH;dH=null;return cH.Delay(function(){return cH.Return(dE(dG));});},dF);},AsyncProcessA:function(dE,dF){var dG;dG=this;return E.applyReplyA(function(dH){var dI;dI=null;return cH.Delay(function(){var dJ;dJ=dG.check(dF==null?dH.configuration:dF.$0,dH);return cH.Bind(dE(dJ.resource),function(dK){return cH.Return([dG.increment(dJ),dK]);});});},this.agent);},Dispose:function(){try{this.clean(this.get_State().resource);}catch(dE){null;}}},k,G);G.New=cB.Ctor(function(dE,dF,dG,dH,dI,dJ){var dK;dK=this;k.New.call(this);this.ctor=dF;this.clean=dH==null?a.ignore:dH.$0;this.alive=dI==null?function(){return true;}:dI.$0;this.respawnRightAfter=dJ==null||dJ.$0;this.agent=D.stateFull(function(dL,dM){c.print$1(dL);return dK.respawn(dM);},F.New(0,dE,this.ctor(dG),dG));},G);H.runSameConfig=function(dE,dF){return s.runReader([dE,dE.get_Configuration()],dF);};H.run=function(dE,dF,dG){return s.runReader([dE,dF],dG);};H.ofResourceRm=function(dE){var dF;dF=dE.$0;return{$:0,$0:function(dG){var dH,dI,dJ,dK;dH=dG[0];dI=dG[1];dJ=dH[1];dK=dH[0];return dK.AsyncProcessA(function(dL){var dM;dM=null;return cH.Delay(function(){return cH.Bind(dF([dL,dI]),function(dN){return cH.Return([dN[0],[dK,dJ],dN[2]]);});});},{$:1,$0:dJ});}};};H.createAgentRm=function(dE,dF){return t.op_GreaterGreaterEquals(s.readerFun(function(dG){return dG[0].AsyncProcessA(function(dH){return dE(dH,dF);},{$:1,$0:dG[1]});}),s.ofAsync);};J.New=function(dE,dF,dG,dH){return{cargId:dE,name:dF,unique:dG,build:dH};};K=I.CommArgCollection=cB.Class({get_CommArgs:function(){return this.$0;}},null,K);K.op_Addition=function(dE,dF){return K.addPairs(dF.$0,dE);};K.op_Addition$1=function(dE,dF){return K.addPair(dF[0],dF[1],dE);};K.op_Addition$2=function(dE,dF){return K.addPairs(dF,dE);};L=I.TypedCommArg=cB.Class({get_CommArg:function(){return this.$0;}},null,L);L.op_DivisionAssignment=function(dE,dF){return[dE.$0,p.op_BarGreaterGreater(p.op_BarGreaterGreater(o.getS(),dF),a.id)];};L.op_DivisionAssignment$1=function(dE,dF){return[dE.$0,p.op_BarGreaterGreater(dF,a.id)];};L.op_DivisionAssignment$2=function(dE,dF){return[dE.$0,p.op_BarGreaterGreater(p.rtn(dF),a.id)];};M.getFloatR=function(dE,dF){return dE.$0.build.$==3?{$:0,$0:dF}:c.Error$1(new d({$:1,$0:"expecting TFloat"}));};M.getBoolR=function(dE,dF){return dE.$0.build.$==2?{$:0,$0:dF}:c.Error$1(new d({$:1,$0:"expecting TBool"}));};M.getStringR=function(dE,dF){return dE.$0.build.$==1?{$:0,$0:dF}:c.Error$1(new d({$:1,$0:"expecting TString"}));};M.getIntR=function(dE,dF){return dE.$0.build.$==0?{$:0,$0:dF}:c.Error$1(new d({$:1,$0:"expecting TInt"}));};M.argumentTRm=function(dE,dF){return M.argumentRm(dE,dF);};M.argumentRm=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){return dG.Bind(dF,function(dH){var dI;return dG.Return((dI=dE.build,dI.$==1?dI.$0(dH):dI.$==2?dI.$0(dH):dI.$==3?dI.$0(dH):dI.$0(dH)));});}));};M.NewFloat=function(dE,dF,dG){return new L({$:0,$0:M.New0(dE,dF,{$:3,$0:dG})});};M.NewBool=function(dE,dF,dG){return new L({$:0,$0:M.New0(dE,dF,{$:2,$0:dG})});};M.NewString=function(dE,dF,dG){return new L({$:0,$0:M.New0(dE,dF,{$:1,$0:dG})});};M.NewInt=function(dE,dF,dG){return new L({$:0,$0:M.New0(dE,dF,{$:0,$0:dG})});};M.New0=function(dE,dF,dG){return J.New({$:0,$0:cQ.NewGuid()},dE,dF,dG);};K.addPairs=function(dE,dF){return K.append(dF,new K({$:0,$0:dE}));};K.append=function(dE,dF){var dG,dH;function dI(dJ,dK){return function(dL){return K.addPair(dJ,dK,dL);};}dG=(dH=function(dJ){return dI.apply(null,a.id(dJ));},function(dJ){return function(dK){return(dH(dK))(dJ);};});return cE.fold(function(dJ,dK){return(dG(dJ))(dK);},dE,dF.get_CommArgs());};K.addPair=function(dE,dF,dG){function dH(dI,dJ){return!cL.Equals(dI.cargId,dE.cargId);}return new K({$:0,$0:cF.ofSeq(cE.append((dE.unique?function(dI){return cE.filter(function(dJ){return dH(dJ[0],dJ[1]);},dI);}:a.id)(dG.$0),cG.ofArray([[dE,dF]])))});};K.getBoolR=function(dE,dF,dG){var dH,dI;dH=o.run(dG,K.getBoolRm(dE,dF));dI=dH[2];return l.ofOption(function(){return dI;},dH[0]);};K.getBoolRm=function(dE,dF){return p.op_BarGreaterGreater(K.tryGetBoolORm(dF),function(dG){return dG==null?dE:dG.$0;});};K.getFloatRm=function(dE){function dF(){return K.argumentNotFound(dE,void 0);}return p.op_GreaterGreaterEquals(K.tryGetFloatORm(dE),function(dG){return o.ofOption(dF,dG);});};K.getStringRm=function(dE){function dF(){return K.argumentNotFound(dE,void 0);}return p.op_GreaterGreaterEquals(K.tryGetStringORm(dE),function(dG){return o.ofOption(dF,dG);});};K.getIntRm=function(dE){function dF(){return K.argumentNotFound(dE,void 0);}return p.op_GreaterGreaterEquals(K.tryGetIntORm(dE),function(dG){return o.ofOption(dF,dG);});};K.findArgRm=function(dE){function dF(){return K.argumentNotFound(dE,void 0);}return p.op_GreaterGreaterEquals(K.tryFindArgORm(dE),function(dG){return o.ofOption(dF,dG);});};K.tryGetFloatORm=function(dE){function dF(dG,dH){return M.getFloatR(dE,dH);}return p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(K.tryFindArgORm(dE),function(dG){var dH;return dG==null?null:{$:1,$0:(dH=dG.$0,dF(dH[0],dH[1]))};}),l.insertO),o.ofResultRM);};K.tryGetBoolORm=function(dE){function dF(dG,dH){return M.getBoolR(dE,dH);}return p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(K.tryFindArgORm(dE),function(dG){var dH;return dG==null?null:{$:1,$0:(dH=dG.$0,dF(dH[0],dH[1]))};}),l.insertO),o.ofResultRM);};K.tryGetStringORm=function(dE){function dF(dG,dH){return M.getStringR(dE,dH);}return p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(K.tryFindArgORm(dE),function(dG){var dH;return dG==null?null:{$:1,$0:(dH=dG.$0,dF(dH[0],dH[1]))};}),l.insertO),o.ofResultRM);};K.tryGetIntORm=function(dE){function dF(dG,dH){return M.getIntR(dE,dH);}return p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(K.tryFindArgORm(dE),function(dG){var dH;return dG==null?null:{$:1,$0:(dH=dG.$0,dF(dH[0],dH[1]))};}),l.insertO),o.ofResultRM);};K.tryFindArgORm=function(dE){return p.op_GreaterGreaterEquals(o.readerFun(function(dF){var dG,dH;return o.insertO((dG=K.tryFindArgO(dE,dF),dG==null?null:{$:1,$0:(dH=dG.$0,o.insertFst(dH[0],dH[1]))}));}),a.id);};K.tryFindArgO=function(dE,dF){var dG;dG=dE.$0;return cE.tryFind(function(dH){return cL.Equals(dH[0].cargId,dG.cargId);},dF.$0);};K.argumentNotFound=function(dE,dF){return new d({$:1,$0:(function(dG){return function(dH){return dG("argument not found: "+cC.toSafe(dH));};}(a.id))(dE.$0.name)});};K.containsAnyOfRm=function(dE){return o.readerFun(function(dF){function dG(dH,dI){return dE.Contains(dH.cargId);}return cE.exists(function(dH){return dG(dH[0],dH[1]);},dF.$0);});};K.argumentsRm=function(dE){return p.op_GreaterGreaterEquals(K.filterRm(dE),function(dF){return o.traverseSeq(function(dG){return M.argumentTRm(dG[0],dG[1]);},dF);});};K.filterRm=function(dE){return o.readerFun(function(dF){return cE.filter(dE,dF.$0);});};K.existsRm=function(dE){return o.readerFun(function(dF){return cE.exists(dE,dF.$0);});};K.argsRm=function(){return o.readerFun(function(dE){return dE.$0;});};K.contains=function(dE,dF){function dG(dH,dI){return dH.cargId;}return cE.contains(dE.$0.cargId,cE.map(function(dH){return dG(dH[0],dH[1]);},dF.$0));};K.trueForAll=function(dE){return true;};O.NoPrepo={$:12};O.PrepoEndIf={$:9};O.PrepoElse={$:8};N.getSourceDir=function(dE,dF){var dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP;dG=cF.get(dF,0);dH=cF.tryItem(1,dF);return(dJ=A.StartsWith$1("////#cd @\"",dG),dJ!=null&&dJ.$==1?(dI=dJ.$0,true):dH!=null&&dH.$==1&&(dK=A.StartsWith$1("////#cd @\"",dH.$0),dK!=null&&dK.$==1&&(dI=dK.$0,true)))?(dL=cD.Trim(dI),(dN=A.EndsWith$1("\"",dL),dN!=null&&dN.$==1?dM=dN.$0:dM=dL,(dO=A.StartsWith$1("\\",dM),dO!=null&&dO.$==1)?dM:(dP=A.StartsWith$1("/",dM),dP!=null&&dP.$==1)?dM:cL.Equals(cE.tryItem(1,dM),{$:1,$0:":"})?dM:dE+"/"+dM)):dE;};N.separateDirectives=function(dE){var dF,dG,dH,dI,dJ;function dK(dU){return dU[1];}function dL(dU){return dU.$==1?{$:1,$0:dU.$0}:null;}function dM(dU){return dU[1];}function dN(dU){return dU.$==2?{$:1,$0:dU.$0}:null;}function dO(dU){return dU[1];}function dP(dU){return dU.$==6?{$:1,$0:dU.$0}:null;}function dQ(dU){return dU[1];}function dR(dU){return dU.$==5?{$:1,$0:dU.$0}:null;}function dS(dU){return dU[1];}function dT(dU){return dU.$==0?{$:1,$0:dU.$0}:null;}dF=cF.ofSeq(cE.distinct(cE.choose(function(dU){return dL(dK(dU));},dE)));dG=cF.ofSeq(cE.distinct(cE.choose(function(dU){return dN(dM(dU));},dE)));dH=cF.ofSeq(cE.distinct(cE.choose(function(dU){return dP(dO(dU));},dE)));dI=cF.ofSeq(cE.distinct(cE.choose(function(dU){return dR(dQ(dU));},dE)));dJ=cE.tryHead(cE.choose(function(dU){return dT(dS(dU));},dE));return[cF.ofSeq(cE.map(function(dU){return dU[0];},dE)),dF,dG,dH,dI,dJ];};N.separatePrepros=function(dE){function dF(dI){var dJ;dJ=cE.tryLast(cD.SplitStrings(cD.Trim(dI),["\""],1));return dJ==null?dI:dJ.$0;}function dG(dI){var dJ;dJ=cE.tryHead(cD.SplitStrings(cD.Trim(dI),["#define "],1));return dJ==null?"":dJ.$0;}function dH(dI){return"//"+dI;}return cF.map(function(dI){var dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW;dJ=true;return dJ&&cD.StartsWith(dI,"#define")?[dH(dI),{$:2,$0:dG(dI)}]:dJ&&cD.StartsWith(dI,"#cd")?[dH(dI),{$:0,$0:dF(dI)}]:dJ&&cD.StartsWith(dI,"#r")?[dH(dI),{$:1,$0:dF(dI)}]:dJ&&cD.StartsWith(dI,"#load")?[dH(dI),{$:3,$0:dF(dI)}]:dJ&&cD.StartsWith(dI,"#nowarn")?[dH(dI),{$:5,$0:dF(dI)}]:dJ&&cD.StartsWith(cD.Trim(dI),"# ")?[dH(dI),{$:4,$0:dF(dI)}]:dJ&&cD.StartsWith(cD.Trim(dI),"#line")?[dH(dI),{$:4,$0:dF(dI)}]:dJ&&cD.StartsWith(dI,"#I")?[dH(dI),{$:6,$0:dF(dI)}]:dJ&&cD.StartsWith(dI,"#if")?[dI,{$:7,$0:dI}]:dJ&&cD.StartsWith(dI,"#else")?[dI,O.PrepoElse]:dJ&&cD.StartsWith(dI,"#endif")?[dI,O.PrepoEndIf]:dJ&&cD.StartsWith(dI,"#light")?[dI,{$:10,$0:false}]:dJ&&cD.StartsWith(dI,"#")?[dH(dI),{$:11,$0:dI}]:[dI,O.NoPrepo];},dE);};N.extractDefines=function(dE){var dF;dF=dE.$0;return cD.StartsWith(dF,"////-d:")?cM.string(dF,{$:1,$0:4},{$:1,$0:dF.indexOf("\n")-1}):"";};P=c.SnippetId=cB.Class({get_Id:function(){return this.$0;}},null,P);P.get_Empty=function(){return new P({$:0,$0:"00000000-0000-0000-0000-000000000000"});};Q.New=function(dE,dF,dG,dH,dI,dJ,dK){return{snpId:dE,snpName:dF,snpContent:dG,snpParentIdO:dH,snpPredIds:dI,snpProperties:dJ,snpGeneration:dK};};R.New=function(dE,dF,dG,dH,dI,dJ){return{generation:dE,ordered:dF,fetcher:dG,predecesorsCache:dH,reducedCache:dI,prepCode:dJ};};S.codeFsxRm=function(dE){return p.op_BarGreaterGreater(S.fastCodeRm({$:1,$0:dE},{$:1,$0:dE}),function(dF){return dF[0];});};S.fastCodeRm=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){return dG.Bind(S.fastReducedRm(dE,dF),function(dH){return dG.Return(S.finishCode(dH[0],dH[1],dH[2],dH[3],dH[4],dH[5],dH[6]));});}));};S.fastReducedRm=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){return dG.Bind(o.insertO(dE==null?null:{$:1,$0:S.snippetORm(dE.$0)}),function(dH){return dG.Bind(o.insertO(dF==null?null:{$:1,$0:S.snippetORm(dF.$0)}),function(dI){var dJ,dK,dL,dM;dJ=dH==null?null:dH.$0;dK=dI==null?null:dI.$0;return(dK!=null&&dK.$==1?dJ!=null&&dJ.$==1?(dL=[dJ.$0,dK.$0],false):true:true)?dG.ReturnFrom(S.reducedCodeRm([])):(dM=dL[0],dG.Bind(S.uniquePredsRm(dL[1]),function(dN){var dO;dO=new cS.New(dN);return dG.Bind((S.reducedOthersORmMemo())([true,dM.snpId,dO]),function(dP){return dG.Bind((S.reducedOthersORmMemo())([false,dM.snpId,dO]),function(dQ){return dG.Bind(S.separateCodeRm(dM),function(dR){var dS,dT,dU,dV;dS=(dT=dP==null?null:{$:1,$0:(function(dW){var dX,dY,dZ,d0,d1,d2,d3;dX=dW[0];dY=dW[1];dZ=dW[2];d0=dW[3];d1=dW[4];d2=dW[5];d3=dW[6];return function(d4){return S.addSeps(dX,dY,dZ,d0,d1,d2,d3,d4[0],d4[1],d4[2],d4[3],d4[4],d4[5],d4[6]);};}(dP.$0))(dR)},dT==null?dR:dT.$0);return dG.Return((dU=dQ==null?null:{$:1,$0:(dV=dQ.$0,S.addSeps(dS[0],dS[1],dS[2],dS[3],dS[4],dS[5],dS[6],dV[0],dV[1],dV[2],dV[3],dV[4],dV[5],dV[6]))},dU==null?dS:dU.$0));});});});}));});});}));};S.reducedOthersORmMemo=function(){function dE(dF){return dF.reducedCache();}return function(dF){return o.memoizeRm(dE,function(dG){return S.reducedOthersORm(dG[0],dG[1],dG[2]);},dF);};};S.reducedOthersORm=function(dE,dF,dG){var dH;dH=o.fusion();return dH.Run(dH.Delay(function(){function dI(dJ){return!cL.Equals(dJ.snpId,dF)&&dG.Contains(dJ.snpId);}return dH.Bind(p.op_BarGreaterGreater(p.op_BarGreaterGreater(S.orderedRm(),(dE?function(dJ){return function(dK){return cE.takeWhile(dJ,dK);};}:function(dJ){return function(dK){return cE.skipWhile(dJ,dK);};})(function(dJ){return!cL.Equals(dJ.snpId,dF);})),function(dJ){return cE.filter(dI,dJ);}),function(dJ){return cE.isEmpty(dJ)?dH.Return(null):dH.Bind(S.reducedCodeRm(dJ),function(dK){return dH.Return({$:1,$0:dK});});});}));};S.finishCode=function(dE,dF,dG,dH,dI,dJ,dK){var dL,dM;dL=cD.concat(" ",cE.map(function(dN){return"-d:"+dN;},cE.sort(dH)));dM=cG.ofSeq(cE.delay(function(){return cE.append(dL!==""?["////"+dL]:[],cE.delay(function(){return cE.append(dK!=null?[(function(dN){return function(dO){return dN("////#cd @\""+cC.toSafe(dO)+"\"");};}(a.id))(dK.$0)]:[],cE.delay(function(){return cE.append(cE.map(function(dN){return function(dO){return dN("#I @\""+cC.toSafe(dO)+"\"");};}(a.id),dI),cE.delay(function(){return cE.append(cE.map(function(dN){return function(dO){return dN("#r @\""+cC.toSafe(dO)+"\"");};}(a.id),dG),cE.delay(function(){return cE.map(function(dN){return function(dO){return dN("#nowarn \""+cC.toSafe(dO)+"\"");};}(a.id),dJ);}));}));}));}));}));return[cD.concat("\n",cE.append(dM,dF)),cF.ofSeq((cE.mapFold(function(dN,dO){var dP;dP=dO[2];return[[[dO[0],dO[1]],[dO[3],dN,dN+dP]],dN+dP];},dM.get_Length(),dE))[0])];};S.reducedCodeRm=function(dE){var dF;dF=o.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(o.traverseSeq(S.separateCodeRm,dE),function(dG){var dH;return dF.Return((dH=cE.reduce(function(dI,dJ){return(function(dK){var dL,dM,dN,dO,dP,dQ,dR;dL=dK[0];dM=dK[1];dN=dK[2];dO=dK[3];dP=dK[4];dQ=dK[5];dR=dK[6];return function(dS){return S.addSeps(dL,dM,dN,dO,dP,dQ,dR,dS[0],dS[1],dS[2],dS[3],dS[4],dS[5],dS[6]);};}(dI))(dJ);},cE.isEmpty(dG)?[[[],[],[],[],[],[],null]]:dG),[dH[0],[cD.concat("\n",dH[1])],dH[2],dH[3],dH[4],dH[5],dH[6]]));});}));};S.addSeps=function(dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR){return[dE.concat(dL),dF.concat(dM),cF.ofSeq(cE.distinct(cE.append(dG,dN))),cF.ofSeq(cE.distinct(cE.append(dH,dO))),cF.ofSeq(cE.distinct(cE.append(dI,dP))),cF.ofSeq(cE.distinct(cE.append(dJ,dQ))),dK==null?dR:dK];};S.separateCodeRm=function(dE){var dF;dF=o.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(S.indentRm(dE),function(dG){var dH;function dI(dJ,dK){return[cD.replicate(dG," ")+dJ,dK];}dH=(dG===0?[a.id,""]:[function(dJ){return cF.map(function(dK){return dI(dK[0],dK[1]);},dJ);},(function(dJ){return function(dK){return dJ("("+a.String(dK)+")");};}(a.id))(dG)])[0];return dF.Bind(S.prepareCodeRm(dE),function(dJ){var dK,dL;dK=N.separateDirectives(dH(N.separatePrepros(cD.SplitChars(dJ,["\n"],0))));dL=dK[0];return dF.Return([[[dE.snpId,S.snippetName(dE.snpName,dE.snpContent),cF.length(dL),dG]],dL,dK[1],dK[2],dK[3],dK[4],dK[5]]);});});}));};S.ancestorsRm=function(dE){function dF(dG,dH){var dI;dI=o.fusion();return dI.Run(dI.Delay(function(){return dI.Bind(S.parentORm(dG),function(dJ){var dK;return dJ==null?dI.Return(dH):(dK=dJ.$0,dI.ReturnFrom(dF(dK,new cG.T({$:1,$0:dK,$1:dH}))));});}));}return dF(dE,cG.T.Empty);};S.levelRm=function(dE){function dF(dG,dH){var dI;dI=o.fusion();return dI.Run(dI.Delay(function(){return dI.Bind(S.parentORm(dG),function(dJ){return dJ!=null&&dJ.$==1?dI.ReturnFrom(dF(dJ.$0,dH+1)):dI.Return(dH);});}));}return dF(dE,0);};S.indentRm=function(dE){function dF(dG){var dH;dH=o.fusion();return dH.Run(dH.Delay(function(){var dI,dJ,dK,dL;dI=(dJ=S.propertyPairO("IndentChildren",dG),dJ!=null&&dJ.$==1?[(B.parseIntO$1())(dJ.$0[0]),(B.parseIntO$1())(dJ.$0[1])]:[null,null]);dK=dI[1];dL=dI[0];return dH.Bind(S.parentORm(dG),function(dM){return dM==null?dH.Return([0,[dL==null?4:dL.$0,dK==null?4:dK.$0]]):dH.Bind(dF(dM.$0),function(dN){var dO,dP;dO=dN[1][1];dP=dN[1][0];return dH.Return([dP,[dP+(dL==null?dO:dL.$0),dK==null?dO:dK.$0]]);});});}));}return p.op_BarGreaterGreater(dF(dE),function(dG){return dG[0];});};S.propertyHierORm=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){var dH,dI;dH=S.propertyO(dE,dF);return dH==null?dG.Bind(S.parentORm(dF),function(dJ){return dJ==null?dG.Return(null):dG.Bind(S.propertyHierORm(dE,dJ.$0),function(dK){var dL,dM,dN;return dG.Return(dK==null?null:{$:1,$0:(dL=dK.$0,(dM=dL[0],(dN=dL[1][1],[dM,[dN,dN]])))});});}):dG.Return({$:1,$0:[dF,(dI=cD.SplitStrings(dH.$0,["|-|"],1),[cF.get(dI,0),cF.length(dI)>1?cF.get(dI,1):cF.get(dI,0)])]});}));};S.modifiedRecRm=function(dE){var dF;dF=o.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(S.modifiedRm(dE),function(dG){return dG?dF.Return(true):dF.Bind(S.uniquePredsRm(dE),function(dH){return dF.Bind(o.sequenceSeq(cE.map(S.snippetORm,dH)),function(dI){return dF.Bind(o.sequenceSeq(cE.map(S.modifiedRm,cE.choose(a.id,dI))),function(dJ){return dF.Return(cE.contains(true,dJ));});});});});}));};S.predsGenerationRm=function(dE){var dF;dF=o.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(p.op_GreaterGreaterEquals(S.uniquePredsRm(dE),function(dG){return o.traverseSeq(S.snippetRm,dG);}),function(dG){return dF.Return(cE.max(cE.map(function(dH){return dH.snpGeneration;},dG)));});}));};S.uniquePredsRm=function(dE){return(S.predsLRmMemo())(dE.snpId);};S.predsLRmMemo=function(){function dE(dF){return dF.predecesorsCache();}return function(dF){return o.memoizeRm(dE,S.predsLRm,dF);};};S.predsLRm=function(dE){var dF;dF=o.fusion();return dF.Run(dF.Delay(function(){var dG,dH;dG=cG.ofArray([dE]);dH=cG.T.Empty;return dF.Combine(dF.While(function(){return!(dG.$==0);},dF.Delay(function(){var dI,dJ;return dG.$==1?(dI=dG.$1,(dJ=dG.$0,cG.contains(dJ,dH)?(dG=dI,dF.Zero()):dF.Bind(S.snippetORm(dJ),function(dK){var dL,dM;dG=cG.append(dI,(dL=dK==null?null:{$:1,$0:(dM=dK.$0,cG.append(cG.ofSeq(dM.snpPredIds),cT.toList(dM.snpParentIdO)))},dL==null?cG.T.Empty:dL.$0));dH=new cG.T({$:1,$0:dJ,$1:dH});return dF.Zero();}))):dF.Zero();})),dF.Delay(function(){return dF.Return(dH);}));}));};S.snippetFromRefORm=function(dE){return dE.$==1?S.snippetFromPathORm(dE.$0):S.snippetORm(dE.$0);};S.snippetFromPathORm=function(dE){var dF;dF=o.fusion();return dF.Run(dF.Delay(function(){return dF.Bind(S.orderedRm(),function(dG){function dH(dI,dJ){return function(dK){return dI.length===0?[null,[[],dJ]]:S.snippetName(dK.snpName,dK.snpContent)!==cF.get(dI,0)||!cL.Equals(dK.snpParentIdO,dJ)?[null,[dI,dJ]]:dI.length>1?[null,[cM.array(dI,{$:1,$0:1},null),{$:1,$0:dK.snpId}]]:[{$:1,$0:dK},[[],dJ]];};}return dF.Return(cE.tryHead(cE.choose(a.id,(cE.mapFold(function(dI,dJ){return(function(dK){return dH(dK[0],dK[1]);}(dI))(dJ);},[dE,null],dG))[0])));});}));};S.pathRm=function(dE){var dF;function dG(dH){return p.op_BarGreaterGreater(S.pathRm(dH.snpId),function(dI){return new cG.T({$:1,$0:dH.snpId,$1:dI});});}return p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(S.snippetORm(dE),function(dH){return dH==null?null:{$:1,$0:S.parentORm(dH.$0)};}),o.insertO),function(dH){return dH==null?null:a.id(dH.$0);}),function(dH){return dH==null?null:{$:1,$0:dG(dH.$0)};}),o.insertO),(dF=cG.T.Empty,function(dH){return dH==null?dF:dH.$0;}));};S.snippetNameRm=function(dE){return p.op_BarGreaterGreater(S.snippetRm(dE),function(dF){return S.snippetName(dF.snpName,dF.snpContent);});};S.snippetRm=function(dE){return o.absorbO(function(){return new d({$:1,$0:(function(dF){return function(dG){return dF("Snippet not found "+cx.p(dG));};}(a.id))(dE)});},S.snippetORm(dE));};S.prepareCodeRm=function(dE){return o.readerFun(function(dF){return dF.prepCode(dE);});};S.orderedRm=function(){return o.readerFun(function(dE){return dE.ordered;});};S.childrenRm=function(dE){return o.readerFun(function(dF){return cE.filter(function(dG){return cL.Equals(dG.snpParentIdO,{$:1,$0:dE});},dF.ordered);});};S.modifiedRm=function(dE){return o.readerFun(function(dF){return dE.snpGeneration>dF.generation;});};S.maxGenerationRm=function(){return o.readerFun(function(dE){return cE.max(cE.map(function(dF){return dF.snpGeneration;},dE.ordered));});};S.predecessorsRm=function(dE){return o.readerFun(function(dF){return cE.choose(dF.fetcher,dE.snpPredIds);});};S.parentORm=function(dE){return o.readerFun(function(dF){var dG;dG=dE.snpParentIdO;return dG==null?null:dF.fetcher(dG.$0);});};S.snippetORm=function(dE){return o.readerFun(function(dF){return dF.fetcher(dE);});};S.propertyPairO=function(dE,dF){var dG,dH,dI,dJ;dG=S.propertyO(dE,dF);return dG==null?null:{$:1,$0:(dH=cD.SplitStrings(dG.$0,[S.tieFighter()],1),[cF.get(dH,0),(dI=cF.tryItem(1,dH),(dJ=cF.get(dH,0),dI==null?dJ:dI.$0))])};};S.tieFighter=function(){cu.$cctor();return cu.tieFighter;};S.propertyO=function(dE,dF){function dG(dH,dI){return dH===dE?{$:1,$0:dI}:null;}return cF.tryPick(function(dH){return dG(dH[0],dH[1]);},dF.snpProperties);};S.nameSanitized=function(dE){var dF,dG;dF=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return cD.Filter(function(dH){return!cF.contains(dH,dF);},dE.snpName)+" "+(dG=dE.snpId.get_Id(),a.String(dG));};S.snippetName=function(dE,dF){var dG;return dE!==""?dE:(dG=cE.tryHead(cE.filter(function(dH){return!(cD.StartsWith(dH,"#")||cD.StartsWith(dH,"[<")||cD.StartsWith(dH,"//"));},cE.map(cD.Trim,cD.SplitChars(dF,["\n"],1)))),dG==null?"<empty>":dG.$0);};S.defaultSnippet=function(){cu.$cctor();return cu.defaultSnippet;};S.New=function(dE,dF,dG){return Q.New(new P({$:0,$0:cQ.NewGuid()}),dE,dF,dG,new cS.New$1(null),[],(S.getNextGeneration())());};S.getNextGeneration=function(){cu.$cctor();return cu.getNextGeneration;};S.setGeneration=function(){cu.$cctor();return cu.setGeneration;};T.Hole={$:0};V.New=function(dE,dF,dG,dH,dI,dJ,dK){return{id:dE,isExpandedRm:dF,canHaveChildrenRm:dG,childrenRm:dH,pathRm:dI,parentORm:dJ,newChildrenRm:dK};};U.removeNodeOutdentChildren=function(dE,dF){var dG;function dH(dI,dJ){return p.op_GreaterGreaterEquals(dI,function(dK){return U.outdentNode(dJ,dK);});}return p.op_GreaterGreaterEquals(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(dE.childrenRm(),cF.ofSeq),(dG=p.rtn(dF),function(dI){return cE.fold(dH,dG,dI);})),function(dI){return U.removeNode(dE,dI);});};U.outdentNode=function(dE,dF){var dG;function dH(dI){return U.moveToSibling(true,dE,dI,dF);}return p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(dE.parentORm(dF),function(dI){return dI==null?null:{$:1,$0:dH(dI.$0)};}),(dG=p.rtn(dF),function(dI){return dI==null?dG:dI.$0;}));};U.indentNode=function(dE,dF){var dG;function dH(dJ){return!cL.Equals(dE.id(),dJ.id());}function dI(dJ,dK){return p.op_GreaterGreaterEquals(dK.canHaveChildrenRm(),function(dL){return dL?p.rtn({$:1,$0:dK}):dJ;});}return p.op_GreaterGreaterEquals(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(dE.parentORm(dF),function(dJ){return dJ!=null&&dJ.$==1?p.op_BarGreaterGreater(dJ.$0.childrenRm(),function(dK){var dL;dL=cF.ofSeq(dK);return dL;}):p.rtn(dF);}),function(dJ){return cE.takeWhile(dH,dJ);}),(dG=p.rtn(null),function(dJ){return cE.fold(dI,dG,dJ);})),function(dJ){var dK;return dJ!=null&&dJ.$==1?(dK=dJ.$0,p.op_GreaterGreaterEquals(U.removeNode(dE,dF),function(dL){return U.addChild(true,dE,dK,dL);})):p.rtn(dF);});};U.addChild=function(dE,dF,dG,dH){var dI;dI=o.fusion();return dI.Run(dI.Delay(function(){return dI.Bind(dG.pathRm(),function(dJ){function dK(dL){var dM,dN;return cL.Equals(dL.id(),dG.id())?dE?p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater(dL.childrenRm(),cF.ofSeq),(dM=cG.ofArray([dF]),function(dO){return cE.append(dO,dM);})),cF.ofSeq),dL.newChildrenRm):p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater(dL.childrenRm(),cF.ofSeq),(dN=cG.ofArray([dF]),function(dO){return cE.append(dN,dO);})),cF.ofSeq),dL.newChildrenRm):cG.contains(dL.id(),dJ)?p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(dL.childrenRm(),cF.ofSeq),function(dO){return cE.map(dK,dO);}),o.sequenceSeq),cF.ofSeq),dL.newChildrenRm):p.rtn(dL);}return dI.ReturnFrom(o.sequenceSeq(cE.map(dK,dH)));});}));};U.moveToSibling2=function(dE,dF,dG,dH){var dI;dI=o.fusion();return dI.Run(dI.Delay(function(){return dI.Bind(U.tryFindId(dF,dH),function(dJ){var dK;return dJ!=null&&dJ.$==1?(dK=dJ.$0,dI.Bind(U.tryFindId(dG,dH),function(dL){return dL!=null&&dL.$==1?dI.ReturnFrom(U.moveToSibling(dE,dK,dL.$0,dH)):dI.Return(dH);})):dI.Return(dH);});}));};U.moveToSibling=function(dE,dF,dG,dH){return p.op_GreaterGreaterEquals(U.removeNode(dF,dH),function(dI){return U.addSibling(dE,dF,dG,dI);});};U.tryFindId=function(dE,dF){return U.tryFind(function(dG){return cL.Equals(dG.id(),dE);},dF);};U.tryFind=function(dE,dF){function dG(dH,dI){return p.op_GreaterGreaterEquals(dH,function(dJ){var dK;return dJ==null?dE(dI)?p.rtn({$:1,$0:dI}):p.op_GreaterGreaterEquals(dI.childrenRm(),(dK=p.rtn(null),function(dL){return cE.fold(dG,dK,dL);})):p.rtn({$:1,$0:dJ.$0});});}return cE.fold(dG,p.rtn(null),dF);};U.addSibling=function(dE,dF,dG,dH){function dI(dJ){return cL.Equals(dJ.id(),dG.id());}return p.op_GreaterGreaterEquals(dG.pathRm(),function(dJ){var dK,dL;function dM(dN){return cL.Equals(dN.id(),dL)?p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(dN.childrenRm(),cF.ofSeq),function(dO){return U.addToParent(dE,dI,dF,dN,dO);}):cG.contains(dN.id(),dK)?p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(dN.childrenRm(),cF.ofSeq),function(dO){return cE.map(dM,dO);}),o.sequenceSeq),cF.ofSeq),dN.newChildrenRm):p.rtn(dN);}return dJ.$==1?(dK=dJ.$1,(dL=dJ.$0,o.sequenceSeq(cE.map(dM,dH)))):p.rtn(U.addNodeToSeq(dE,dI,dF,dH));});};U.addToParent=function(dE,dF,dG,dH,dI){return dH.newChildrenRm(cF.ofSeq(U.addNodeToSeq(dE,dF,dG,dI)));};U.addNodeToSeq=function(dE,dF,dG,dH){return cG.ofSeq(cE.delay(function(){return cE.collect(function(dI){return dF(dI)?dE?cE.append([dI],cE.delay(function(){return[dG];})):cE.append([dG],cE.delay(function(){return[dI];})):[dI];},dH);}));};U.removeNodes=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){function dH(dI,dJ){var dK;dK=o.fusion();return dK.Run(dK.Delay(function(){return dK.Bind(dI,function(dL){var dM,dN;dM=dL[1];dN=dL[0];return dK.Bind(p.op_BarGreaterGreater(dJ.childrenRm(),cF.ofSeq),function(dO){return dK.Bind(cE.fold(dH,p.rtn([cG.T.Empty,dM]),dO),function(dP){var dQ,dR;dQ=dP[1];dR=dP[0];return dE(dJ)?dK.Return([dN,cG.append(dR,dQ)]):dK.Bind(dJ.newChildrenRm(cF.ofSeq(cE.rev(dR))),function(dS){return dK.Return([new cG.T({$:1,$0:dS,$1:dN}),dQ]);});});});});}));}return dG.Bind(cE.fold(dH,p.rtn([cG.T.Empty,cG.T.Empty]),dF),function(dI){return dG.Return(cG.rev(cG.append(dI[1],dI[0])));});}));};U.removeNode=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){return dG.Bind(dE.pathRm(),function(dH){function dI(dJ){var dK;dK=o.fusion();return dK.Run(dK.Delay(function(){return cL.Equals(dJ.id(),dE.id())?dK.Return(null):cG.contains(dJ.id(),dH)?dK.ReturnFrom(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(p.op_BarGreaterGreater(dJ.childrenRm(),cF.ofSeq),function(dL){return cE.map(dI,dL);}),o.sequenceSeq),function(dL){return cE.choose(a.id,dL);}),cF.ofSeq),dJ.newChildrenRm),function(dL){return{$:1,$0:dL};})):dK.Return({$:1,$0:dJ});}));}return dG.ReturnFrom(p.op_BarGreaterGreater(o.sequenceSeq(cE.map(dI,dF)),function(dJ){return cE.choose(a.id,dJ);}));});}));};U.listNodes=function(dE,dF){return p.op_BarGreaterGreater(o.sequenceSeq(cE.map(function(dG){return p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(dG.isExpandedRm(),function(dH){var dI;return dH?p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(dG.childrenRm(),cF.ofSeq),(dI=dE+1,function(dJ){return U.listNodes(dI,dJ);})):p.rtn([]);}),function(dH){return cE.append([[dG,dE]],dH);});},dF)),function(dG){return cE.collect(a.id,dG);});};c["String.Right$1"]=function(dE,dF){var dG,dH;return c["String.Substring2$1"](dE,(dG=0,(dH=dE.length-dF,cL.Compare(dG,dH)===1?dG:dH)),dE.length);};c["String.Left$1"]=function(dE,dF){return c["String.Substring2$1"](dE,0,dF);};c["String.Substring2$1"]=function(dE,dF,dG){var dH,dI;while(true){if(dG<=0)return"";else if(dF<0){dH=dF;dF=0;dG=dG+dH;}else return dF>=dE.length?"":cD.Substring(dE,dF,(dI=dE.length-dF,cL.Compare(dG,dI)===-1?dG:dI));}};c.delayed$1=function(dE,dF){var dG;dG=[null];return function(dH){var dI,dJ;dI=dG[0];dI==null?void 0:dI.$0.Cancel$1();dG[0]={$:1,$0:new cU.New()};cH.Start((dJ=null,cH.Delay(function(){return cH.Bind(cH.Sleep(dE),function(){dF(dH);return cH.Zero();});})),{$:1,$0:dG[0].$0});};};c.print$1=function(dE){if(typeof dE=="string")((function(dF){return function(dG){return dF(cC.toSafe(dG));};}(function(dF){cV.log(dF);}))(dE));else((function(dF){return function(dG){return dF(cC.prettyPrint(dG));};}(function(dF){cV.log(dF);}))(dE));};c.Error$1=function(dE){return{$:1,$0:dE};};X.ofAsyncResult=function(dE){return new a.Promise(function(dF,dG){cH.StartWithContinuations(dE,function(dH){if(dH.$==1)dG((function(dI){return function(dJ){return dI(cC.prettyPrint(dJ));};}(a.id))(dH.$0));else dF(dH.$0);},function(dH){dG(dH);},function(dH){dG(dH);},null);});};Y.sequenceSeq=function(dE){return Y.traverseSeq(a.id,dE);};Y.traverseSeq=function(dE,dF){return Y.map(a.id,cF.foldBack(function(dG,dH){return Y.op_GreaterGreaterEquals(dE(dG),function(dI){return Y.op_GreaterGreaterEquals(dH,function(dJ){return Y.rtn(new cG.T({$:1,$0:dI,$1:dJ}));});});},cF.ofSeq(dF),Y.rtn(cG.T.Empty)));};Y.op_GreaterGreaterEquals=function(dE,dF){return Y.bind(dF,dE);};Y.rtn=function(dE){return cX.Const(dE);};Y.map=function(dE,dF){return cX.Map(dE,dF);};Y.bind=function(dE,dF){return cX.Bind(dE,dF);};Y.insertWO=function(dE){return dE==null?cX.Const(null):cX.Map(function(dF){return{$:1,$0:dF};},dE.$0);};Z.serLMdField=function(dE,dF,dG,dH){var dI;function dJ(dK,dL){dF(dK).Set(dI[1](dL));return dK;}dI=Z.serSeq(dG,dH);return[dE,function(dK){var dL;dL=(dF(dK))["var"].Get();return dI[0](dL);},function(dK){return function(dL){return dJ(dK,dL);};}];};Z.serVarField=function(dE,dF,dG,dH){var dI;function dJ(dK){return dK.Get();}return[dE,(dI=function(dK){return dJ(dF(dK));},function(dK){return dG(dI(dK));}),function(dK){return function(dL){cY.Set(dF(dK),dH(dL));return dK;};}];};Z.serMap=function(dE,dF,dG,dH){var dI,dJ,dK,dL,dM;function dN(dP){return[dP.K,dP.V];}function dO(dP){return new cZ.New(dP);}dI=(dJ=Z.serDup(dE,dF,dG,dH),Z.serSeq(dJ[0],dJ[1]));return[(dK=function(dP){return cE.map(dN,dP);},(dL=dI[0],function(dP){return dL(dK(dP));})),(dM=dI[1],function(dP){return dO(dM(dP));})];};Z.serDup=function(dE,dF,dG,dH){var dI,dJ,dK;function dL(dN){return[dI[1](null),dJ[1](null)];}function dM(dN){return[dI[1](cF.get(dN,0)),dJ[1](cF.get(dN,1))];}dI=[dE,dF];dJ=[dG,dH];return[function(dN){return(((cB.Curried3(function(dO,dP,dQ){return dO("["+cC.toSafe(dP)+", "+cC.toSafe(dQ)+"]");}))(a.id))(dI[0](dN[0])))(dJ[0](dN[1]));},(dK=function(dN){return Z.ifUndefF(dL,dM,dN);},function(dN){return dK(a.id(dN));})];};Z.serOpt=function(dE,dF){var dG,dH,dI,dJ,dK,dL;function dM(dP){return dP==null?"null":dP.$0;}function dN(dP){return null;}function dO(dP){return{$:1,$0:dP};}dG=[dE,dF];return[(dH=(dI=dG[0],function(dP){return dP==null?null:{$:1,$0:dI(dP.$0)};}),function(dP){return dM(dH(dP));}),(dJ=(dK=(dL=dG[1],function(dP){return dO(dL(dP));}),function(dP){return Z.ifUndefF(dN,dK,dP);}),function(dP){return dJ(a.id(dP));})];};Z.serSet=function(dE,dF){var dG,dH,dI,dJ,dK,dL,dM;function dN(dP){return[];}function dO(dP){return new cS.New(dP);}dG=[dE,dF];return[(dH=(dI=dG[0],function(dP){return new cS.New$1(c0.OfSeq(cE.map(dI,dP)));}),function(dP){return Z.sprintA(dH(dP));}),(dJ=(dK=(dL=(dM=dG[1],function(dP){return cE.map(dM,dP);}),function(dP){return Z.ifUndefF(dN,dL,dP);}),function(dP){return dK(a.id(dP));}),function(dP){return dO(dJ(dP));})];};Z.serLst=function(dE,dF){var dG,dH,dI,dJ,dK,dL,dM;function dN(dO){return[];}dG=[dE,dF];return[(dH=(dI=dG[0],function(dO){return cG.map(dI,dO);}),function(dO){return Z.sprintA(dH(dO));}),(dJ=(dK=(dL=(dM=dG[1],function(dO){return cE.map(dM,dO);}),function(dO){return Z.ifUndefF(dN,dL,dO);}),function(dO){return dK(a.id(dO));}),function(dO){return cG.ofSeq(dJ(dO));})];};Z.serArr=function(dE,dF){var dG,dH,dI,dJ,dK,dL,dM;function dN(dO){return[];}dG=[dE,dF];return[(dH=(dI=dG[0],function(dO){return cF.map(dI,dO);}),function(dO){return Z.sprintA(dH(dO));}),(dJ=(dK=(dL=(dM=dG[1],function(dO){return cE.map(dM,dO);}),function(dO){return Z.ifUndefF(dN,dL,dO);}),function(dO){return dK(a.id(dO));}),function(dO){return cF.ofSeq(dJ(dO));})];};Z.serSeq=function(dE,dF){var dG,dH,dI,dJ,dK,dL;function dM(dN){return[];}dG=[dE,dF];return[(dH=(dI=dG[0],function(dN){return cE.map(dI,dN);}),function(dN){return Z.sprintA(dH(dN));}),(dJ=(dK=(dL=dG[1],function(dN){return cE.map(dL,dN);}),function(dN){return Z.ifUndefF(dM,dK,dN);}),function(dN){return dJ(a.id(dN));})];};Z.serField=function(dE,dF,dG,dH,dI){return[dE,function(dJ){return dH(dF(dJ));},function(dJ){return function(dK){return dG(dI(dK),dJ);};}];};Z.serString=function(){cu.$cctor();return cu.serString;};Z.serBool=function(){cu.$cctor();return cu.serBool;};Z.serInt=function(){cu.$cctor();return cu.serInt;};Z.serFloat=function(){cu.$cctor();return cu.serFloat;};Z.sprintA=function(dE){var dF;dF=cD.concat(", ",dE);return(function(dG){return function(dH){return dG("["+cC.toSafe(dH)+"]");};}(a.id))(dF);};Z.deserGuid=function(){cu.$cctor();return cu.deserGuid;};Z.Exists=function(dE,dF){return!dF[dE]?null:{$:1,$0:dF[dE]};};Z.ifUndefF=function(dE,dF,dG){return!dG?dE(dG):dF(dG);};Z.ifUndef=function(dE,dF){return!dF?dE:dF;};_0.LoadFilesAsync=function(dE){var dF;dF=null;return cH.Delay(function(){return cH.For(dE,function(dG){return cH.Bind(_0.LoadFile(dG),function(){return cH.Return(null);});});});};_0.LoadFile=function(dE){var dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS;function dT(dV,dW){return cD.EndsWith(dW,dV)?{$:1,$0:null}:null;}function dU(dV,dW){try{dR.onload=dV;self.document.head.appendChild(dR);}catch(dX){dW(dX);}}dF=(dG=((dI=dT(".js",dE),dI!=null&&dI.$==1)?!self.document.querySelector("script[src='"+dE+"']")||((dJ=dT(".fsx",dE),dJ!=null&&dJ.$==1)?!self.document.querySelector("script[src='"+dE+"']")||(dK=dT(".fs",dE),dK!=null&&dK.$==1)&&!self.document.querySelector("script[src='"+dE+"']"):(dL=dT(".fs",dE),dL!=null&&dL.$==1)&&!self.document.querySelector("script[src='"+dE+"']")):(dM=dT(".fsx",dE),dM!=null&&dM.$==1)?!self.document.querySelector("script[src='"+dE+"']")||(dN=dT(".fs",dE),dN!=null&&dN.$==1)&&!self.document.querySelector("script[src='"+dE+"']"):(dO=dT(".fs",dE),dO!=null&&dO.$==1)&&!self.document.querySelector("script[src='"+dE+"']"))?{$:1,$0:_0.createScript(dE)}:(dP=dT(".css",dE),dP!=null&&dP.$==1)?{$:1,$0:_0.createCss(dE)}:(dQ=dT(".html",dE),dQ!=null&&dQ.$==1)?{$:1,$0:_0.createHtml(dE)}:null,dG==null?null:{$:1,$0:(dR=dG.$0,cH.FromContinuations(function(dV,dW,dX){return dU.apply(null,[dV,dW,dX]);}))});return dF==null?(dS=null,cH.Delay(function(){return cH.Return(null);})):dF.$0;};_0.createHtml=function(dE){var dF;dF=self.document.createElement("link");dF.setAttribute("rel","import");dF.setAttribute("type","text/html");dF.setAttribute("href",dE);return dF;};_0.createCss=function(dE){var dF;dF=self.document.createElement("link");dF.setAttribute("rel","stylesheet");dF.setAttribute("type","text/css");dF.setAttribute("href",dE);return dF;};_0.createScript=function(dE){var dF;dF=self.document.createElement("script");dF.setAttribute("type","text/javascript");dF.setAttribute("src",dE);return dF;};_1.Identifier$1=function(dE){var dF,dG,dH;return(dG=W.REGEX$2("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",dE),dG!=null&&dG.$==1&&((dH=dG.$0,!cL.Equals(dH,null)&&dH.length===1)&&(dF=cF.get(dG.$0,0),true)))?{$:1,$0:dF}:null;};_1.getEndWord$1=function(dE,dF){var dG,dH;dG=W.REGEX$2("^([a-zA-Z_]\\w*)","g",dE.substring(dF));return dG!=null&&dG.$==1?(dH=dG.$0,!cL.Equals(dH,null)&&dH.length===1)?cF.get(dG.$0,0):"":"";};_1.getStartWord$1=function(dE,dF){var dG,dH;dG=W.REGEX$2("([a-zA-Z_]\\w*)$","g",cD.Substring(dE,0,dF));return dG!=null&&dG.$==1?(dH=dG.$0,!cL.Equals(dH,null)&&dH.length===1)?cF.get(dG.$0,0):"":"";};_3=_2.Hoverable=cB.Class({Content:function(dE){return dE.on("mouseenter",function(){return c1.AddClass(dE.elt,"hovering");}).on("mouseleave",function(){return c1.RemoveClass(dE.elt,"hovering");});},Content$1:function(dE){return c2.Element("div",this.get_Attributes(),dE);},get_Attributes:function(){var dE,dF;dE=this;return cG.ofArray([(dF=cX.Const("hovering"),c3.DynamicPred("class",this.hover.get_View(),dF)),c4.HandlerImpl("mouseenter",function(){return function(){return dE.hover.Set(true);};}),c4.HandlerImpl("mouseleave",function(){return function(){return dE.hover.Set(false);};})]);}},null,_3);_3.get_Demo$1=function(){return _3.New$3().Content(c2.Element("div",[c4.Create("style","flex-flow: column;")],[c2.TextNode("Hover over me!")]));};_3.Content$2339$81=cB.Curried3(function(dE,dF,dG){return c1.RemoveClass(dE.elt,"hovering");});_3.get_Attributes$2335$69=cB.Curried3(function(dE,dF,dG){return dE.hover.Set(false);});_3.get_Attributes$2334$69=cB.Curried3(function(dE,dF,dG){return dE.hover.Set(true);});_3.New$3=function(){return _3.New$2(cY.Create$1(false));};_3.New$2=function(dE){return new _3({hover:dE});};_2.hoverable$1=function(dE){return _3.New$3().Content(dE);};_4.addResizeObserver$1=function(dE,dF){var dG,dH,dI,dJ;try{dG=!(!a.ResizeObserver);}catch(dK){dG=false;}if(dG){dH=new a.ResizeObserver(dE);_4.set_observers$1(new cG.T({$:1,$0:dH,$1:_4.observers$1()}));dH.observe(dF);}else{dI=_4.dimsChanged$1(dF);cH.Start((dJ=null,cH.Delay(function(){return cH.While(function(){return dF.isConnected;},cH.Delay(function(){return cH.Bind(cH.Sleep(110),function(){return dI()?(dE(),cH.Zero()):cH.Zero();});}));})),null);}};_4.dimsChanged$1=function(dE){var dF;dF=[dE.getBoundingClientRect()];return function(){var dG;dG=dE.getBoundingClientRect();return cL.Equals(_4.domRect2Tuple$1(dF[0]),_4.domRect2Tuple$1(dG))?false:(dF[0]=dG,true);};};_4.domRect2Tuple$1=function(dE){return[dE.top,dE.left,dE.width,dE.height];};_4.observers$1=function(){cu.$cctor();return cu.observers;};_4.set_observers$1=function(dE){cu.$cctor();cu.observers=dE;};_7=_6.WcTabStripT=cB.Class({connectedCallback:function(){var dE,dF,dG,dH;function dI(){var dJ,dK,dL;dK=!dF.hasAttribute("bottom");dL=cG.ofSeq(cE.delay(function(){return cE.collect(function(dM){var dN;dN=dF.childNodes[dM-1];return cL.Equals(dN.nodeType,c5.ELEMENT_NODE)?[[dN.hasAttribute("tabname")?dN.getAttribute("tabname"):(function(dO){return function(dP){return dO("Tab "+a.String(dP));};}(a.id))(dM),dN]]:[];},cK.range(1,dF.childNodes.length));}));while(dH.childNodes.length>0)dH.removeChild(dH.lastChild);dJ=_6.tabStrip$1(dE.selected,dK,true,dL,c2.Element("slot",cG.T.Empty,cG.T.Empty));c7.LoadLocalTemplates("");c2.Run(dH,dJ);}dE=this;!this.added?(dF=this,dG=dF.attachShadow({mode:"open"}),dH=self.document.createElement("div"),dG.appendChild(dH),dI(),dF.addEventListener("DOMSubtreeModified",c.delayed$1(50,dI)),this.added=true):void 0;}},k,_7);_7.Constructor$1=function(){var dE,dF;dE=(dF=c8.construct(self.HTMLElement,[],this.__proto__.constructor),dF);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dE);return dE;};_7.New$1=cB.Ctor(function(){k.New.call(this);this.added=false;this.selected=cY.Create$1(1);(function(dE){return dE("WcTabStripT initializer");}(function(dE){cV.log(dE);}));},_7);_6.init$1=function(){cu.$cctor();return cu.init;};_6.tabStrip$2477$64=function(dE,dF){return function(){return function(){return dF.Set(dE+1);};};};_6.tabStrip$1=function(dE,dF,dG,dH,dI){var dJ;dJ=c2.Element("div",[c4.Create("class",(((cB.Curried3(function(dK,dL,dM){return dK("tab-strip "+cC.toSafe(dL)+" "+cC.toSafe(dM));}))(a.id))(dF?"top":"bottom"))(dG?"horizontal":"vertical"))],cG.ofSeq(cE.delay(function(){return cE.collect(function(dK){var dL;dL=dK[0];return[_3.New$3().Content(c2.Element("div",[c3.Dynamic("class",cX.Map(function(dM){return"tab"+(dM===dL+1?" selected":"");},dE.get_View())),c4.Create("draggable","true"),c4.HandlerImpl("click",function(){return function(){return dE.Set(dL+1);};})],[c2.TextNode(dK[1][0])]))];},cE.indexed(dH));})));return c2.Element("div",[c4.Create("class","tab-panel")],cG.ofSeq(cE.delay(function(){return cE.append(dF?[dJ]:[],cE.delay(function(){return cE.append([c2.Element("div",[c4.Create("class","tab-content")],[dI])],cE.delay(function(){return cE.append(!dF?[dJ]:[],cE.delay(function(){return cE.append([c2.Element("style",cG.T.Empty,cG.ofArray([c2.TextNode(_6.css$1())]))],cE.delay(function(){return[c2.Element("style",cG.T.Empty,cG.ofArray([c2.TextView(cX.Map(function(dK){return function(dL){return dK("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(dL)+")) { display: grid }\r\n                                           ");};}(a.id),dE.get_View()))]))];}));}));}));}));})));};_6.css$1=function(){cu.$cctor();return cu.css;};_9=_8.WcSplitterT=cB.Class({connectedCallback:function(){var dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT;function dU(d2){var d3,d4,d5,d6;d3=dL?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];d4=a.parseFloat("0"+a.jQuery(d2.parentElement.parentElement).css(d3[0]));d5=a.parseFloat("0"+a.jQuery(d2.parentElement.parentElement).css(d3[1]));dO.Set(a.parseFloat("0"+a.jQuery(d2.parentElement.parentElement).css(d3[2])));dN[0]=d4+d5;d6=dE.getBoundingClientRect();return dL?dK?[d6.width,d6.height]:[-d6.width,d6.height]:dK?[d6.height,d6.width]:[-d6.height,d6.width];}function dV(d2){return dL?d2.clientX:d2.clientY;}function dW(d2){var d3,d4;d3=(dV(d2)-dR[0])*100/dM[0][0]+dQ[0];dJ.Set((d4=cL.Compare(dH,d3)===1?dH:d3,cL.Compare(dI,d4)===-1?dI:d4));}function dX(){if(dP[0]){dP[0]=false;self.removeEventListener("mousemove",dW,false);self.removeEventListener("mouseup",dX,false);}}function dY(d2){var d3,d4;if(!dP[0]){dP[0]=true;dQ[0]=dJ.Get();dR[0]=dV(d2);dM[0]=(d3=(d4=dS[0],d4==null?null:{$:1,$0:dU(d4.$0)}),d3==null?[100,500]:d3.$0);self.addEventListener("mousemove",dW,false);self.addEventListener("mouseup",dX,false);d2.preventDefault();}}function dZ(d2,d3,d4,d5){return[(d2-d3-d4)*d5/100,(d2-d3-d4)*(100-d5)/100];}function d0(d2,d3){return(((((cB.Curried(function(d4,d5,d6,d7,d8){return d4(" "+d5.toFixed(2)+"px "+d6.toFixed(2)+"px ; "+cC.toSafe(d7)+" : "+d8.toFixed(2)+"px; ");},5))(a.id))(d2))(d3))(dL?"height":"width"))(dM[0][1]);}function d1(){var d2;d2=dS[0];(h.iter(function(d3){dM[0]=dU(d3);}))(d2);dJ.Set(dJ.Get());}if(!this.added){dE=this;dF=dE.attachShadow({mode:"open"});dG=self.document.createElement("div");dH=dE.hasAttribute("min")?a.parseFloat(dE.getAttribute("min")):4;dI=dE.hasAttribute("max")?a.parseFloat(dE.getAttribute("max")):96;dJ=cY.Create$1(dE.hasAttribute("value")?a.parseFloat(dE.getAttribute("value")):50);dK=!dE.hasAttribute("second");dL=dE.hasAttribute("vertical");dM=[[0,0]];dN=[0];dO=cY.Create$1(0);dP=[false];dQ=[0];dR=[0];dS=[null];dT=(((((dL?_8.layoutVertical$1():_8.layoutHorizontal$1())(cX.Map(function(d2){var d3;d3=dZ(dM[0][0],dO.Get(),dN[0],d2);return d0.apply(null,d3);},dJ.get_View())))(function(){_4.addResizeObserver$1(d1,dE);d1();}))(function(d2){dS[0]={$:1,$0:d2};d1();}))(function(d2){dY(d2);}))(cX.Map(function(d2){return function(d3){return d2(cC.prettyPrint(d3)+"px");};}(a.id),dO.get_View()));c7.LoadLocalTemplates("");c2.Run(dG,dT);dF.appendChild(dG.firstChild);this.added=true;}}},k,_9);_9.Constructor$1=function(){var dE,dF;dE=(dF=c8.construct(self.HTMLElement,[],this.__proto__.constructor),dF);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dE);return dE;};_9.New$1=cB.Ctor(function(){k.New.call(this);this.added=false;(function(dE){return dE("WcSplitterT initializer");}(function(dE){cV.log(dE);}));},_9);_8.init$1=function(dE,dF){var dG,dH,dI;dG=new _9.New$1();_8.set_layoutHorizontal$1(dE);_8.set_layoutVertical$1(dF);dH="wcomp-splitter";dI=self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New;cV.log("defineWebComponent: "+dH);c9.setPrototypeOf(dI.prototype,self.HTMLElement.prototype);c9.setPrototypeOf(dI,self.HTMLElement);c9.setPrototypeOf(_9.Constructor$1.prototype,dI.prototype);self.customElements.define(dH,_9.Constructor$1);};_8.layoutVertical$1=function(){cu.$cctor();return cu.layoutVertical;};_8.set_layoutVertical$1=function(dE){cu.$cctor();cu.layoutVertical=dE;};_8.layoutHorizontal$1=function(){cu.$cctor();return cu.layoutHorizontal;};_8.set_layoutHorizontal$1=function(dE){cu.$cctor();cu.layoutHorizontal=dE;};$.New=function(dE,dF){return{column:dE,lineNumber:dF};};ba.New=function(dE,dF,dG,dH){return{startColumn:dE,endColumn:dF,startLineNumber:dG,endLineNumber:dH};};bb.New=function(dE,dF,dG,dH,dI,dJ){return{authority:dE,fragment:dF,fsPath:dG,path:dH,query:dI,scheme:dJ};};bc.New=function(dE,dF){return{range:dE,uri:dF};};bd.New=function(dE,dF){return{matches:dE,range:dF};};be.New=function(dE,dF,dG){return{endColumn:dE,startColumn:dF,word:dG};};bf.New=function(dE){return{uri:dE};};bg.New=function(dE,dF){return{value:dE,isTrusted:dF};};bh.New=function(dE,dF,dG,dH,dI,dJ){return{startColumn:dE,endColumn:dF,startLineNumber:dG,endLineNumber:dH,severity:dI,message:dJ};};bi.New=function(dE,dF,dG){return{kind:dE,label:dF,detail:dG};};bj.New=function(dE,dF){return{contents:dE,range:dF};};bk=_.Editor=cB.Class({},k,bk);bk.New=cB.Ctor(function(){k.New.call(this);},bk);bl.New=function(dE,dF,dG,dH,dI,dJ,dK){return{"var":dE,onChange:dF,onRender:dG,editorO:dH,disabled:dI,options:dJ,overrides:dK};};_.newVarO=function(dE){var dF;dF=_.newVar(cY.Lens(dE,function(dG){return dG==null?"":dG.$0;},function(dG,dH){return dG==null?null:{$:1,$0:dH};}));return _.disabled(cX.Map(function(dG){return dG==null;},dE.get_View()),dF);};_.newText=function(dE){return _.newVar(cY.Create$1(dE));};_["var"]=function(dE){return dE["var"];};_.disabled=function(dE,dF){return bl.New(dF["var"],dF.onChange,dF.onRender,dF.editorO,dE,dF.options,dF.overrides);};_.onRender=function(dE,dF){return bl.New(dF["var"],dF.onChange,{$:1,$0:dE},dF.editorO,dF.disabled,dF.options,dF.overrides);};_.onChange=function(dE,dF){return bl.New(dF["var"],dE,dF.onRender,dF.editorO,dF.disabled,dF.options,dF.overrides);};_.setVar=function(dE,dF){return bl.New(dE,dF.onChange,dF.onRender,dF.editorO,dF.disabled,dF.options,dF.overrides);};_.render$2828$42=function(dE){return function(dF){var dG;cH.Start((dG=null,cH.Delay(function(){return cH.Bind(_.loader(),function(){var dH,dI;dH=(dI=dF.parentElement,self.monaco.editor.create(dI,dE.options,dE.overrides));_4.addResizeObserver$1(function(){dH.layout();},dF.parentElement);dF.parentNode.removeChild(dF);dE.editorO={$:1,$0:dH};(h.iter(function(dJ){dJ(dH);}))(dE.onRender);W.bindVarEditor(function(dJ){dH.onDidChangeModelContent(dJ);},function(){return dH.getValue();},function(dJ){dH.setValue(dJ);},dE.onChange,dE["var"]);return cH.Zero();});})),null);};};_.render=function(dE){return c2.Element("div",[c4.OnAfterRenderImpl(function(dF){var dG;cH.Start((dG=null,cH.Delay(function(){return cH.Bind(_.loader(),function(){var dH,dI;dH=(dI=dF.parentElement,self.monaco.editor.create(dI,dE.options,dE.overrides));_4.addResizeObserver$1(function(){dH.layout();},dF.parentElement);dF.parentNode.removeChild(dF);dE.editorO={$:1,$0:dH};(h.iter(function(dJ){dJ(dH);}))(dE.onRender);W.bindVarEditor(function(dJ){dH.onDidChangeModelContent(dJ);},function(){return dH.getValue();},function(dJ){dH.setValue(dJ);},dE.onChange,dE["var"]);return cH.Zero();});})),null);})],[]);};_.loader=function(){cu.$cctor();return cu.loader;};_.newVar=function(dE){return bl.New(dE,a.ignore,null,null,cX.Const(false),null,null);};W.rexGuid$1=function(){cu.$cctor();return cu.rexGuid;};W.REGEX$2=function(dE,dF,dG){var dH;if(dG===null)return null;else try{dH=(new a.String(dG)).match(new a.RegExp(dE,dF));return cL.Equals(dH,null)?null:!cL.Equals(dH,null)&&dH.length===0?null:{$:1,$0:dH};}catch(dI){return null;}};W.bindVarEditor=function(dE,dF,dG,dH,dI){var dJ,dK;dJ=[0];dK=[0];dE(function(){var dL;dL=dF();dI.Get()!==dL?(dJ[0]=dJ[0]+1,dI.Set(dL),dH()):void 0;});cX.Sink(function(){if(dJ[0]>dK[0])dK[0]=dJ[0];else if(dF()!==dI.Get())dG(dI.Get());},dI.get_View());};bn.extractConfig=function(dE,dF){var dG,dH;dG=dF.$0;return{$:0,$0:N.getSourceDir(dE,A.splitByChar$1("\n",dG)),$1:(dH=new cS.New(A.splitByChar$1(" ",N.extractDefines({$:0,$0:dG}))),new cS.New$1(c0.OfSeq(cE.append(new cS.New(cG.ofArray([" --nologo","--quiet "])),dH))))};};bp=bo.Address=cB.Class({get_txt:function(){return this.$0;}},null,bp);bq.BRGetProcessId={$:1};bq.BRGetConnections={$:0};br.MsgRequestForEcho={$:5};br.MsgRequestForId={$:4};br.MsgFromBroker={$:3};br.MsgReply={$:2};br.MsgRequest={$:1};br.MsgInformation={$:0};bs.BMReceiverCantReply={$:4};bs.BMOnlyBrokerShouldUse={$:1};bs.BMOk={$:0};bt.Receiver={$:2};bt.Broker={$:1};bt.NoReply={$:0};bu.New=function(dE,dF,dG,dH,dI,dJ,dK){return{from:dE,destination:dF,msgType:dG,subtype:dH,id:dI,payload:dJ,replier:dK};};bv.FSharp={$:0};bw.FSStation={$:0};bx.JScript={$:0};bz=by.Handler=cB.Class({Cancel:function(dE,dF){var dG;dG=this.waitingAgent;dG.mailbox.AddLast({$:3,$0:dE,$1:dF});dG.resume();},Raise:function(dE,dF){var dG;dG=this.waitingAgent;dG.mailbox.AddLast({$:2,$0:dE,$1:dF});dG.resume();},Reply:function(dE,dF){var dG;dG=this.waitingAgent;dG.mailbox.AddLast({$:1,$0:dE,$1:dF});dG.resume();},Add:function(dE,dF){var dG;dG=this.waitingAgent;dG.mailbox.AddLast({$:0,$0:dE,$1:dF});dG.resume();}},k,bz);bz.New=cB.Ctor(function(dE){k.New.call(this);this.waitingAgent=D.fold(D.defHandler,function(dF,dG){var dH,dI,dJ;function dK(dL,dM,dN){var dO,dP;dO=(dP=c_.TryFind(dL,dF),dP==null?null:{$:1,$0:dM(dP.$0)});dO==null?dN():void 0;return dF.Remove(dL);}return dG.$==1?(dH=dG.$1,dK(dG.$0,function(dL){dL[0](dH);},function(){dE(dH);})):dG.$==2?(dI=dG.$1,dK(dG.$0,function(dL){dL[1](dI);},a.ignore)):dG.$==3?(dJ=dG.$1,dK(dG.$0,function(dL){dL[2](dJ);},a.ignore)):dF.Add(dG.$0,dG.$1);},new cZ.New([]));},bz);bA=bo.WSMessagingClient=cB.Class({sendMsg:function(dE){var dF,dG;dF=this;dG=f.asyncResult();return dG.Run(dG.Delay(function(){return dE.replier.$===0?dG.Bind$1(dF.sendAndForget(dE),function(){return dG.Return("");}):dG.ReturnFrom$1(dF.sendGetReply(dE));}));},getProcessId:function(){var dE,dF;dE=this;dF=f.asyncResult();return dF.Run(dF.Delay(function(){var dG,dH;return dF.Bind$1(dE.sendGetReply((dG=bo.MessageBrokerAddress(),(dH=c$.stringify((cv.j$9())(bq.BRGetProcessId)),bu.New(new bp({$:0,$0:""}),dG,br.MsgRequest,"",cQ.NewGuid(),dH,bt.NoReply)))),function(dI){var dJ;dJ=(cw.j$7())(c$.parse(dI));return dJ.$==1?dF.Return(dJ.$0):dF.ReturnFrom({$:1,$0:new d({$:4,$0:{$:6,$0:(function(dK){return function(dL){return dK(cx.p$4(dL));};}(a.id))(dJ)}})});});}));},getListeners:function(){var dE,dF;dE=this;dF=f.asyncResult();return dF.Run(dF.Delay(function(){var dG,dH;return dF.Bind$1(dE.sendGetReply((dG=bo.MessageBrokerAddress(),(dH=c$.stringify((cv.j$9())(bq.BRGetConnections)),bu.New(new bp({$:0,$0:""}),dG,br.MsgRequest,"",cQ.NewGuid(),dH,bt.NoReply)))),function(dI){var dJ;dJ=(cw.j$7())(c$.parse(dI));return dJ.$==0?dF.Return(dJ.$0):dF.ReturnFrom({$:1,$0:new d({$:4,$0:{$:6,$0:(function(dK){return function(dL){return dK(cx.p$4(dL));};}(a.id))(dJ)}})});});}));},sendGetReply:function(dE){var dF,dG;dF=this;dG=f.asyncResult();return dG.Run(dG.Delay(function(){return dG.Bind$1(dF.sendAndReply(bt.Receiver,dE),function(dH){var dI;return dG.Bind((dI=dH.msgType,dI.$==2?{$:0,$0:dH.payload}:dI.$==3?{$:1,$0:new d({$:4,$0:(cw.j$8())(c$.parse(dH.payload))})}:{$:1,$0:new d({$:4,$0:{$:5,$0:dH.msgType}})}),function(dJ){return dG.Return(dJ);});});}));},sendAndVerify:function(dE){var dF,dG;dF=this;dG=f.asyncResult();return dG.Run(dG.Delay(function(){return dG.Bind$1(dF.sendAndReply(bt.Broker,dE),function(dH){var dI;return dG.Bind(dH.msgType.$==3?(dI=(cw.j$8())(c$.parse(dH.payload)),dI.$===0?{$:0,$0:null}:{$:1,$0:new d({$:4,$0:dI})}):{$:1,$0:new d({$:4,$0:{$:5,$0:dH.msgType}})},function(){return dG.Return();});});}));},sendAndReply:function(dE,dF){var dG,dH;dG=this;dH=f.asyncResult();return dH.Run(dH.Delay(function(){return dH.Bind$1(dG.getServer(),function(dI){return z["AsyncResultBuilder.ReturnFrom"](dH,cH.FromContinuations(function(dJ,dK,dL){var dM;dG.waiting.Add(dF.id,[dJ,dK,dL]);dG.postR(dI,dE,dF);return dG.wsTimeout>0?cH.Start((dM=null,cH.Delay(function(){return cH.Bind(cH.Sleep(dG.wsTimeout),function(){dG.waiting.Raise(dF.id,new da.New$1((((cB.Curried3(function(dN,dO,dP){return dN("Did not receive reply in "+a.String(dO)+" seconds for Message: "+cz.p(dP));}))(a.id))(dG.wsTimeout/1000>>0))(dF)));return cH.Zero();});})),null):null;}));});}));},sendAndForget:function(dE){var dF,dG;dF=this;dG=f.asyncResult();return dG.Run(dG.Delay(function(){return dG.Bind$1(dF.getServer(),function(dH){dF.postR(dH,bt.NoReply,dE);return dG.Zero();});}));},postR:function(dE,dF,dG){try{dE.FsRoot_Library2_WebSockets_IServer$Post(bo.replier(dF,bo.from(this.clientAddress,dG)));}catch(dH){this.serverO=null;throw dH;}},getServer:function(){return this.checkServer.PostAndAsyncReply(function(dE){return[dE,null];},null);},connectToWebSocketServer:function(){var dE,dF;dE=this;(function(dG){return dG("in connectToWebSocketServer");}(function(dG){cV.log(dG);}));dF=null;return cH.Delay(function(){return cH.Bind(((dE.connectStateful(dE.wsEndPoint))(dE.clientId))(function(dG){var dH;dH=null;return cH.Delay(function(){return cH.Return([0,function(dI){return function(dJ){var dK;dK=null;return cH.Delay(function(){return cH.Combine(cH.TryWith(cH.Delay(function(){return dJ.$==2?((function(dL){return function(dM){return dL("WebSocket "+cC.toSafe(dM)+" connection open.");};}(function(dL){cV.log(dL);}))(dE.clientId),dE.serverO={$:1,$0:dG},cH.Zero()):dJ.$==3?((function(dL){return function(dM){return dL("WebSocket "+cC.toSafe(dM)+" connection closed.");};}(function(dL){cV.log(dL);}))(dE.clientId),dE.close(),cH.Zero()):dJ.$==1?((function(dL){return function(dM){return dL("WebSocket "+cC.toSafe(dM)+" connection error!");};}(function(dL){cV.log(dL);}))(dE.clientId),cH.Zero()):(dE.processMessage(dJ.$0),cH.Zero());}),function(dL){(((cB.Curried3(function(dM,dN,dO){return dM("msg: "+cx.p$8(dN)+" \nexn:"+cC.prettyPrint(dO));}))(function(dM){cV.log(dM);}))(dJ))(dL);return cH.Zero();}),cH.Delay(function(){return cH.Return(dI);}));});};}]);});}),function(){(function(dG){return dG("connectToWebSocketServer with server");}(function(dG){cV.log(dG);}));return cH.Zero();});});},processMessage:function(dE){var dF,dG,dH,dI,dJ,dM;dG=this;dH=dE.msgType;function dK(dN){dG.reply(dN);}function dL(dN){return cH.Return(dN);}switch(dH.$==2?0:dH.$==0?1:dH.$==1?2:dH.$==5?3:dH.$==4?4:0){case 0:this.processReply(dE);break;case 1:(((cB.Curried3(function(dN,dO,dP){return dN("Information from '"+cC.toSafe(dO)+"': "+cC.toSafe(dP));}))(function(dN){cV.log(dN);}))(dE.from.get_txt()))(((dc.Id())())(c$.parse(dE.payload)));break;case 2:dI=this.payloadProcessorO;dI!=null&&dI.$==1?cH.Start(cH.Bind(dG.mapPayloadWrap(dI.$0,dE),(dJ=function(dN){return dK(bo.makeReply(dN));},function(dN){return dL(dJ(dN));})),null):dE.replier.$===2?null:null;break;case 3:dG.reply(bo.msgType(br.MsgInformation,bo.mapPayload(a.id,dE)));break;case 4:dG.reply(bo.msgType(br.MsgInformation,(dM=bo.makeReply(dE),bu.New(dM.from,dM.destination,dM.msgType,dM.subtype,dM.id,c$.stringify(((dc.Id())())(this.clientId)),dM.replier))));break;}},mapPayloadWrap:function(dE,dF){var dG;dG=null;return cH.Delay(function(){return cH.Bind(dE(dF.payload),function(dH){return cH.Return(bo.mapPayload(function(){return dH;},dF));});});},processReply:function(dE){this.waiting.Reply(dE.id,dE);},close:function(){var dE,dF;dE=this;dF=this.serverO;(h.iter(function(dG){dG.FsRoot_Library2_WebSockets_IServer$Close();dE.serverO=null;}))(dF);},reply:function(dE){var dF,dG;dF=this;dG=this.serverO;(h.iter(function(dH){dH.FsRoot_Library2_WebSockets_IServer$Post(bo.destination(dE.from,bo.from(dF.clientAddress,dE)));}))(dG);},set_Out:function(dE){this.out=dE;},SendMsg:function(dE){return this.sendMsg(dE);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBProcessId:function(){return this.getProcessId();},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},k,bA);bA.New=cB.Ctor(function(dE,dF,dG){bA.New$1.call(this,cB.Curried3(function(dH,dI,dJ){function dK(dM){}function dL(dM){return cH.Return(dM);}return cH.Bind(dg.ConnectStateful(function(dM){return c$.stringify((cv.j())(dM));},function(dM){return(cw.j())(c$.parse(dM));},dh.CreateRemote((((cB.Curried3(function(dM,dN,dO){return dM("ws://"+cC.toSafe(dN)+"?ClientId="+cC.toSafe(dO));}))(a.id))(dH))(dI),{$:1,$0:de.JsonEncoding.Readable}),function(dM){var dN;return dJ((dN={FsRoot_Library2_WebSockets_IServer$Post:function(dO){return dM.Post(dO);},FsRoot_Library2_WebSockets_IServer$Close:function(){return dM.get_Connection().close(1000);}},(k.New.call(dN),dN)));}),function(dM){return dL(dK(dM));});}),dE,dF,dG);},bA);bA.New$1=cB.Ctor(function(dE,dF,dG,dH){var dI,dJ;dI=this;k.New.call(this);this.connectStateful=dE;this.clientId=dF;this.wsEndPoint=(dJ=bo.extractEndPoint()+"/ws",dH==null?dJ:dH.$0);this.clientAddress=new bp({$:0,$0:this.clientId});this.wsTimeout=dG==null?60000:dG.$0;this.out=function(dK){return function(dL){return dK(cC.toSafe(dL));};}(function(dK){cV.log(dK);});this.serverO=null;this.payloadProcessorO=null;this.waiting=new bz.New(function(dK){(((cB.Curried3(function(dL,dM,dN){return dL("Reply from '"+cC.toSafe(dM)+"': "+cC.toSafe(dN));}))(function(dL){cV.log(dL);}))(dK.from.get_txt()))(dK.payload);});this.checkServer=D.callA(function(dK){c.print$1(dK);},function(){var dK;dK=null;return cH.Delay(function(){(function(dL){return dL("getServer");}(function(dL){cV.log(dL);}));return cH.Combine(dI.serverO==null?(function(dL){return dL("getServer Connecting");}(function(dL){cV.log(dL);}),cH.Bind(dI.connectToWebSocketServer(),function(){return cH.Bind(cH.Sleep(200),function(){return cH.Return(null);});})):cH.Zero(),cH.Delay(function(){return cH.Return(l.ofOption(function(){return new d({$:1,$0:"could not connect to Server"});},dI.serverO));}));});});},bA);bo.extractEndPoint=function(){return cF.get(cD.SplitChars(di.href.substring(di.href.indexOf("//")+2),["/"],0),0);};bo.makeReply=function(dE){return bo.replier(bt.NoReply,bo.msgType(br.MsgReply,dE));};bo.mapPayload=function(dE,dF){return bu.New(dF.from,dF.destination,dF.msgType,dF.subtype,dF.id,dE(dF.payload),dF.replier);};bo.msgId=function(dE,dF){return bu.New(dF.from,dF.destination,dF.msgType,dF.subtype,dE,dF.payload,dF.replier);};bo.replier=function(dE,dF){return bu.New(dF.from,dF.destination,dF.msgType,dF.subtype,dF.id,dF.payload,dE);};bo.subtype=function(dE,dF){return bu.New(dF.from,dF.destination,dF.msgType,dE,dF.id,dF.payload,dF.replier);};bo.msgType=function(dE,dF){return bu.New(dF.from,dF.destination,dE,dF.subtype,dF.id,dF.payload,dF.replier);};bo.destination=function(dE,dF){return bu.New(dF.from,dE,dF.msgType,dF.subtype,dF.id,dF.payload,dF.replier);};bo.from=function(dE,dF){return bu.New(dE,dF.destination,dF.msgType,dF.subtype,dF.id,dF.payload,dF.replier);};bo.MessageBrokerAddress=function(){cu.$cctor();return cu.MessageBrokerAddress;};bo.MessageBrokerId=function(){cu.$cctor();return cu.MessageBrokerId;};bB.MsgGetUrl={$:5};bB.MsgGetId={$:0};bE.New=function(dE,dF){return{Code:dE,Message:dF};};bF.New=function(dE,dF,dG){return{File:dE,Line:dF,Column:dG};};bG.New=function(dE,dF,dG,dH){return{Name:dE,ReplacementText:dF,Glyph:dG,GlyphChar:dH};};bH.New=function(dE,dF,dG){return{Signature:dE,Comment:dF,Footer:dG};};bI.New=function(dE,dF,dG,dH){return{Name:dE,CanonicalTypeTextForSorting:dF,Display:dG,Description:dH};};bJ.New=function(dE,dF,dG,dH){return{Tip:dE,TypeText:dF,Parameters:dG,IsStaticArguments:dH};};bK.New=function(dE,dF){return{Name:dE,Type:dF};};bL.New=function(dE,dF){return{OutputType:dE,Parameters:dF};};bM.New=function(dE,dF,dG){return{Name:dE,CurrentParameter:dF,Overloads:dG};};bN.New=function(dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO){return{FileName:dE,StartLine:dF,StartColumn:dG,EndLine:dH,EndColumn:dI,IsFromDefinition:dJ,IsFromAttribute:dK,IsFromComputationExpression:dL,IsFromDispatchSlotImplementation:dM,IsFromPattern:dN,IsFromType:dO};};bO.New=function(dE,dF){return{Name:dE,Uses:dF};};bP.New=function(dE,dF){return{Name:dE,Overloads:dF};};bQ.New=function(dE,dF,dG){return{Fsc:dE,Fsi:dF,MSBuild:dG};};bR.New=function(dE,dF,dG,dH,dI,dJ,dK,dL){return{FileName:dE,StartLine:dF,EndLine:dG,StartColumn:dH,EndColumn:dI,Severity:dJ,Message:dK,Subcategory:dL};};bS.New=function(dE,dF){return{File:dE,Errors:dF};};bT.New=function(dE){return{Kind:dE};};bU.New=function(dE,dF,dG,dH,dI,dJ,dK,dL){return{UniqueName:dE,Name:dF,Glyph:dG,GlyphChar:dH,IsTopLevel:dI,File:dJ,EnclosingEntity:dK,IsAbstract:dL};};bV.New=function(dE,dF){return{Declaration:dE,Nested:dF};};bW.New=function(dE,dF,dG,dH,dI,dJ){return{Namespace:dE,Name:dF,Type:dG,Line:dH,Column:dI,MultipleNames:dJ};};bX.New=function(dE,dF){return{Name:dE,Qualifier:dF};};bY.New=function(dE,dF,dG){return{Opens:dE,Qualifies:dF,Word:dG};};bZ.New=function(dE){return{Text:dE};};b1.New=function(dE,dF,dG,dH){return{FileName:dE,IsAsync:dF,Lines:dG,Version:dH};};b2.New=function(dE,dF,dG){return{FileName:dE,Lines:dF,Version:dG};};b3.New=function(dE,dF,dG,dH,dI,dJ){return{FileName:dE,SourceLine:dF,Line:dG,Column:dH,Filter:dI,IncludeKeywords:dJ};};b4.New=function(dE,dF,dG,dH){return{FileName:dE,Line:dF,Column:dG,Filter:dH};};b5.New=function(dE){return{FileName:dE};};b6.New=function(dE){return{FileName:dE};};b7.New=function(dE){return{Symbol:dE};};b8.New=function(dE,dF,dG){return{Directory:dE,Deep:dF,ExcludedDirs:dG};};b9.symbolUseProject=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("symboluseproject",function(dI){return dI.$==4?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.symbolUse=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("symboluse",function(dI){return dI.$==4?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.helpText=function(dE){return b9.FSAutocompleteCall("helptext",function(dF){return dF.$==2?{$:1,$0:dF.$0}:null;},{$:6,$0:b7.New(dE)});};b9.declarations=function(dE,dF,dG){return b9.FSAutocompleteCall("declarations",function(dH){return dH.$==10?{$:1,$0:dH.$0}:null;},{$:1,$0:b2.New(dE,dF,dG)});};b9.findDeclaration=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("finddeclaration",function(dI){return dI.$==9?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.findTypeDecl=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("findtypedeclaration",function(dI){return dI.$==9?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.completion=function(dE,dF,dG,dH,dI,dJ){return b9.FSAutocompleteCall("completion",function(dK){return dK.$==3?{$:1,$0:dK.$0}:null;},{$:2,$0:b3.New(dG,dE,dH,dI,dJ,dF)});};b9.signatureData=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("signatureData",function(dI){return dI.$==13?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.signature=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("signature",function(dI){return dI.$==12?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.toolTip=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("tooltip",function(dI){return dI.$==11?{$:1,$0:dI.$0}:null;},{$:3,$0:b4.New(dE,dF,dG,dH)});};b9.parseCode=function(dE,dF,dG,dH){return b9.FSAutocompleteCall("parse",function(dI){return dI.$==7?{$:1,$0:dI.$0}:null;},{$:0,$0:b1.New(dE,dG,dF,dH)});};b9.FSAutocompleteCall=function(dE,dF,dG){var dH;dH=f.asyncResult();return dH.Run(dH.Delay(function(){return dH.Bind$1((new dk.New()).Async("FSharpStation:FsRoot.Library2+FsAutoComplete.FSAutocompleteCall0:-1842881046",[dE,dG]),function(dI){var dJ,dK;function dL(dM){return dM!=null;}dJ=cF.partition(function(dM){return dL(dF(dM));},dI);dK=dJ[1];return dH.Bind(l.ofOption(function(){return new d({$:4,$0:dK});},cE.tryHead(cE.choose(dF,dJ[0]))),function(dM){return dH.Return([dM,dK]);});});}));};b$.appendMsgs=function(dE){b$.appendText(b$.outputMsgs(),dE);};b$.appendText=function(dE,dF){var dG;dE.Set((dG=dE.Get(),dG===""?dF:dF===""?dG:dG+"\n"+dF));};b$.outputMsgs=function(){cu.$cctor();return cu.outputMsgs;};b$.annotationsV=function(){cu.$cctor();return cu.annotationsV;};b$.srcDir=function(){cu.$cctor();return cu.srcDir;};b$.set_srcDir=function(dE){cu.$cctor();cu.srcDir=dE;};b$.rootDir=function(){cu.$cctor();return cu.rootDir;};b$.set_rootDir=function(dE){cu.$cctor();cu.rootDir=dE;};b$.id=function(){cu.$cctor();return cu.id;};ca.setProperty=function(dE,dF,dG){function dH(dJ){return dJ[0];}function dI(dJ){return dF!==dJ;}ca.setSnippet(Q.New(dE.snpId,dE.snpName,dE.snpContent,dE.snpParentIdO,dE.snpPredIds,cF.ofSeq(cE.append(cE.filter(function(dJ){return dI(dH(dJ));},dE.snpProperties),cG.ofArray([[dF,dG]]))),dE.snpGeneration));};ca.expandParents=function(dE){ca.iterReader(p.op_BarGreaterGreater(S.pathRm(dE),function(dF){var dG;dG=cS.op_Subtraction(ca.collapsedV().Get(),new cS.New(dF));ca.collapsedV().Set(dG);}));};ca.toggleCollapse=function(dE){var dF;dF=((ca.collapsedV().Get().Contains(dE)?function(dG){return function(dH){return dH.Remove(dG);};}:function(dG){return function(dH){return dH.Add(dG);};})(dE))(ca.collapsedV().Get());ca.collapsedV().Set(dF);};ca.newSnippet=function(dE){var dF;dF=S.New("","",null);ca.iterReader(p.op_BarGreaterGreater(ca.addSnippetRm(dF),function(){ca.currentSnippetIdOV().Set({$:1,$0:dF.snpId});}));};ca.addSnippetRm=function(dE){var dF,dG,dH;ca.snippets().Append(dE);dF=(dG=ca.hierarchy().Get(),cE.append([ca.treenode(dE.snpId)],dG));return p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(o.insertO((dH=ca.currentSnippetIdOV().Get(),dH==null?null:{$:1,$0:S.snippetORm(dH.$0)})),function(dI){return dI==null?null:a.id(dI.$0);}),function(dI){return dI!=null&&dI.$==1?U.moveToSibling2(true,dE.snpId,dI.$0.snpId,dF):p.rtn(dF);}),cF.ofSeq),function(dI){ca.hierarchy().Set(dI);});};ca.setSnippetsGen=function(dE,dF){function dG(dH){return ca.treenode(dH.snpId);}ca.collapsedV().Set(dF);ca.snippets().Set(dE);ca.updateGeneration();ca.iterReader(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater(o.sequenceSeq(cE.map(function(dH){return p.op_BarGreaterGreater(S.parentORm(dH),function(dI){return dI==null?{$:1,$0:dH}:null;});},dE)),function(dH){return cE.choose(a.id,dH);}),function(dH){return cE.map(dG,dH);}),cF.ofSeq),function(dH){ca.hierarchy().Set(dH);}));};ca.updateGeneration=function(){var dE;ca.iterReader((dE=o.fusion(),dE.Run(dE.Delay(function(){return dE.Bind(S.maxGenerationRm(),function(dF){ca.generation().Set(dF);return dE.Zero();});}))));};ca.moveNode=function(dE,dF){ca.iterReader(p.op_BarGreaterGreater(p.op_BarGreaterGreater(U.moveToSibling2(false,dE,dF,ca.hierarchy().Get()),cF.ofSeq),function(dG){ca.hierarchy().Set(dG);}));};ca.indentOut=function(dE){var dF;dF=ca.currentSnippetIdOV().Get();(h.iter(function(dG){var dH;ca.iterReader(p.op_BarGreaterGreater(p.op_BarGreaterGreater((dH=ca.hierarchy().Get(),U.outdentNode(ca.treenode(dG),dH)),cF.ofSeq),function(dI){ca.hierarchy().Set(dI);}));}))(dF);};ca.indentIn=function(dE){var dF;dF=ca.currentSnippetIdOV().Get();(h.iter(function(dG){var dH;ca.iterReader(p.op_BarGreaterGreater(p.op_BarGreaterGreater((dH=ca.hierarchy().Get(),U.indentNode(ca.treenode(dG),dH)),cF.ofSeq),function(dI){ca.hierarchy().Set(dI);}));}))(dF);};ca.deleteCurrentSnippet=function(dE){var dF;dF=ca.currentSnippetIdOV().Get();(h.iter(function(dG){var dH;ca.iterReader(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater((dH=ca.hierarchy().Get(),U.removeNodeOutdentChildren(ca.treenode(dG),dH)),cF.ofSeq),function(dI){ca.hierarchy().Set(dI);}),function(){ca.snippets().RemoveByKey(dG);}));}))(dF);};ca.expandClassW=function(dE){var dF;dF=ca.snippets().v;return cX.Map2(function(){return ca.runReader(ca.handleError,ca.expandClassRm(dE));},ca.collapsedV().get_View(),dF);};ca.expandClassRm=function(dE){return p.op_GreaterGreaterEquals(S.childrenRm(dE),function(dF){return cE.isEmpty(dF)?p.rtn(""):p.op_BarGreaterGreater(ca.treenode(dE).isExpandedRm(),function(dG){return dG?"expanded":"collapsed";});});};ca.togglePredecessor=function(dE){var dF,dG;dF=cY.Lens(ca.currentSnippetV(),function(dH){return dH.snpPredIds;},function(dH,dI){return Q.New(dH.snpId,dH.snpName,dH.snpContent,dH.snpParentIdO,dI,dH.snpProperties,dH.snpGeneration);});dF.Set((dG=dF.Get(),((dF.Get().Contains(dE)?function(dH){return function(dI){return dI.Remove(dH);};}:function(dH){return function(dI){return dI.Add(dH);};})(dE))(dG)));ca.clearPredsCache();};ca.isIncludedPredecessorW=function(dE){return cX.Map(function(dF){return ca.runReader(function(){return false;},p.op_BarGreaterGreater(S.uniquePredsRm(dF),function(dG){return cE.contains(dE,dG);}));},ca.codeSnippetW());};ca.isIndirectPredecessorW=function(dE){return cX.Map(function(dF){return ca.runReader(function(){return false;},p.op_BarGreaterGreater(S.uniquePredsRm(dF),function(dG){return cE.contains(dE,dG);}));},ca.currentSnippetW());};ca.treenode=function(dE){return V.New(function(){return dE;},function(){return p.rtn(!ca.collapsedV().Get().Contains(dE));},function(){return p.rtn(true);},function(){function dF(dG){return ca.treenode(dG.snpId);}return p.op_BarGreaterGreater(S.childrenRm(dE),function(dG){return cE.map(dF,dG);});},function(){return S.pathRm(dE);},function(){function dF(dG){return dG.snpParentIdO;}return p.op_BarGreaterGreater(p.op_BarGreaterGreater(S.snippetORm(dE),function(dG){return dG==null?null:dF(dG.$0);}),function(dG){return dG==null?null:{$:1,$0:ca.treenode(dG.$0)};});},function(dF){return p.op_BarGreaterGreater(ca.setChildrenRm(dE,dF),function(){return ca.treenode(dE);});});};ca.setChildrenRm=function(dE,dF){var dG;dG=o.fusion();return dG.Run(dG.Delay(function(){var dH,dI,dJ,dK,dL,dM;dH=cF.map(function(dN){return dN.id();},dF);cE.iter(function(dN){ca.setSnippet(dN);},cE.map(function(dN){return Q.New(dN.snpId,dN.snpName,dN.snpContent,{$:1,$0:dE},dN.snpPredIds,dN.snpProperties,dN.snpGeneration);},cE.filter(function(dN){return!cL.Equals(dN.snpParentIdO,{$:1,$0:dE})&&cF.contains(dN.snpId,dH);},ca.snippets())));cE.iter(function(dN){ca.setSnippet(dN);},cE.map(function(dN){return Q.New(dN.snpId,dN.snpName,dN.snpContent,null,dN.snpPredIds,dN.snpProperties,dN.snpGeneration);},cE.filter(function(dN){return cL.Equals(dN.snpParentIdO,{$:1,$0:dE})&&!cF.contains(dN.snpId,dH);},ca.snippets())));ca.clearPredsCache();dI=cF.partition(function(dN){return ca.isDescendantOf(dE,dN.snpId);},cF.ofSeq((ca.snippets())["var"].Get()));dJ=dI[1];dK=dI[0];dL=cF.findIndex(function(dN){return cL.Equals(dN.snpId,dE);},dJ);dM=cF.ofSeq(cE.delay(function(){return cE.append(cM.array(dJ,{$:1,$0:0},{$:1,$0:dL}),cE.delay(function(){return cE.append(cE.collect(function(dN){return cE.append([cE.find(function(dO){return cL.Equals(dO.snpId,dN);},dK)],cE.delay(function(){return cE.filter(function(dO){return ca.isDescendantOf(dN,dO.snpId);},dK);}));},dH),cE.delay(function(){return cM.array(dJ,{$:1,$0:dL+1},null);}));}));}));ca.snippets().Set(dM);return dG.Zero();}));};ca.currentLayoutJSDW=function(){cu.$cctor();return cu.currentLayoutJSDW;};ca.currentLayoutDW=function(){cu.$cctor();return cu.currentLayoutDW;};ca.currentPathW=function(){cu.$cctor();return cu.currentPathW;};ca.SaveAsClassW=function(){cu.$cctor();return cu.SaveAsClassW;};ca.hasChangedW=function(dE){return cX.Map(function(dF){return dF<dE.snpGeneration;},ca.generation().get_View());};ca.codeStartsW=function(){cu.$cctor();return cu.codeStartsW;};ca.FsCodeW=function(){cu.$cctor();return cu.FsCodeW;};ca.codeAndStartsW=function(){cu.$cctor();return cu.codeAndStartsW;};ca.getHierarchyW=function(){cu.$cctor();return cu.getHierarchyW;};ca.findSnippetV=function(dE){return new dl.New(ca.findSnippetW(dE),function(dF){ca.setSnippet(dF);});};ca.findSnippetW=function(dE){return cX.Map(function(dF){var dG;dG=S.defaultSnippet();return dF==null?dG:dF.$0;},ca.snippets().TryFindByKeyAsView(dE));};ca.codeSnippetClassW=function(dE){return cX.Map(function(dF){return cL.Equals({$:1,$0:dE},dF)?"codeSnippet":"";},ca.codeSnippetIdOV().get_View());};ca.selectedClassW=function(dE){return cX.Map(function(dF){return cL.Equals({$:1,$0:dE},dF)?"selected":"";},ca.currentSnippetIdOV().get_View());};ca.currentSnippetV=function(){cu.$cctor();return cu.currentSnippetV;};ca.codeSnippetW=function(){cu.$cctor();return cu.codeSnippetW;};ca.currentSnippetW=function(){cu.$cctor();return cu.currentSnippetW;};ca.CurrentSnippetIdW=function(){cu.$cctor();return cu.CurrentSnippetIdW;};ca.isDescendantOf=function(dE,dF){var dG,dH,dI;return cL.Equals(dF,dE)?false:(dG=(dH=(ca.getParentIdO())(dF),dH==null?null:{$:1,$0:(dI=dH.$0,cL.Equals(dI,dE)||ca.isDescendantOf(dE,dI))}),dG==null?false:dG.$0);};ca.getParentIdO=function(){cu.$cctor();return cu.getParentIdO;};ca.getParentIdONotMemo=function(dE){var dF;dF=ca.snippets().TryFindByKey(dE);return dF==null?null:dF.$0.snpParentIdO;};ca.getSnippetsGen=function(){return[(ca.snippets())["var"].Get(),ca.generation().Get(),ca.collapsedV().Get()];};ca.setSnippet=function(dE){if(!cL.Equals(dE.snpId.get_Id(),"00000000-0000-0000-0000-000000000000"))ca.snippets().Append(Q.New(dE.snpId,dE.snpName,dE.snpContent,dE.snpParentIdO,dE.snpPredIds,dE.snpProperties,ca.runReader(function(dF){c.print$1(dF);return 999;},S.maxGenerationRm())+1));};ca.setCurrentSnippetIdO=function(dE){ca.currentSnippetIdOV().Set(dE);};ca.runReader=function(dE,dF){return l.defaultWith(dE,ca.runReaderResult(dF));};ca.runReaderResult=function(dE){return cJ.Map(function(dF){return dF[0];},o.runReader(ca.snippetsColl(),dE));};ca.iterReader=function(dE){o.iterReader(function(dF){ca.handleError(dF);},a.ignore,ca.snippetsColl(),dE);};ca.handleError=function(dE){throw new a.Error(a.String(dE));};ca.snippetsColl=function(){return R.New(ca.generation().Get(),(ca.snippets())["var"].Get(),function(dE){return ca.snippets().TryFindByKey(dE);},ca.predsCache,ca.reducCache,ca.prepCode);};ca.prepCode=function(dE){return cD.Replace(cD.Replace(dE.snpContent,"##"+"FSHARPSTATION_ID"+"##",b$.id()),"##"+"FSHARPSTATION_ENDPOINT"+"##",self.location.href);};ca.clearPredsCache=function(){(ca.clearPreds())();(ca.clearReduc())();(ca.clearParent())();};ca.clearParent=function(){cu.$cctor();return cu.clearParent;};ca.parentCache=function(){cu.$cctor();return cu.parentCache;};ca.clearReduc=function(){cu.$cctor();return cu.clearReduc;};ca.reducCache=function(){cu.$cctor();return cu.reducCache;};ca.clearPreds=function(){cu.$cctor();return cu.clearPreds;};ca.predsCache=function(){cu.$cctor();return cu.predsCache;};ca.collapsedV=function(){cu.$cctor();return cu.collapsedV;};ca.codeSnippetIdOV=function(){cu.$cctor();return cu.codeSnippetIdOV;};ca.currentSnippetIdOV=function(){cu.$cctor();return cu.currentSnippetIdOV;};ca.generation=function(){cu.$cctor();return cu.generation;};ca.hierarchy=function(){cu.$cctor();return cu.hierarchy;};ca.snippets=function(){cu.$cctor();return cu.snippets;};cc.DragNone={$:0};cb.getDragNIdO=function(dE){var dF;return cb.drag().$==1&&(!cL.Equals(cb.drag().$0,dE)&&(dF=cb.drag().$0,true))?{$:1,$0:dF}:null;};cb.setDragNode=function(dE){cb.set_drag({$:1,$0:dE});};cb.setDragNone=function(){cb.set_drag(cc.DragNone);};cb.drag=function(){cu.$cctor();return cu.drag;};cb.set_drag=function(dE){cu.$cctor();cu.drag=dE;};cd.TemplatesFileName=function(){cu.$cctor();return cu.TemplatesFileName;};cd.rootdir=function(){cu.$cctor();return cu.rootdir;};ce.render=function(){var dE,dF,dG,dH;return(dE=(dF=ce.snippets(),dp.Make().WithHole({$:0,$0:"snippets",$1:dF})),(dG=dq.CompleteHoles(dE.k,dE.h,[]),(dH=new dr.New(dG[1],cy.snippetlist(dG[0])),(dE.i=dH,dH)))).get_Doc();};ce.snippets$4369$40=function(dE){return function(dF){var dG;dF.Event.preventDefault();dG=cb.getDragNIdO(dE);(h.iter(function(dH){ca.moveNode(dH,dE);}))(dG);};};ce.snippets$4368$40=function(dE){return function(dF){if(cb.getDragNIdO(dE)!=null)dF.Event.preventDefault();};};ce.snippets$4367$40=function(dE){return function(dF){cb.setDragNode(dE);dF.Event.stopPropagation();};};ce.snippets$4366$40=function(dE){return function(){ca.toggleCollapse(dE);};};ce.snippets$4365$40=function(dE){return function(){ca.togglePredecessor(dE);};};ce.snippets$4364$40=function(dE){var dF;dF=cX.Map(function(dG){return""!==dG;},ca.selectedClassW(dE));return function(dG){return ce.scrollIntoView(dF,dG);};};ce.snippets$4363$40=function(dE){return function(){ca.setCurrentSnippetIdO({$:1,$0:dE});};};ce.snippets=function(){function dE(dF,dG){var dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0;function d1(d2){return d2?"ErrorMsg":"";}dH=(dI=cX.get_Do(),cX.Bind(function(d2){return cX.Bind(function(d3){return cX.Const((d3?"*":"")+S.snippetName(d2.snpName,d2.snpContent));},ca.hasChangedW(d2));},ca.findSnippetW(dF)));dJ=cX.Apply(cX.Map2(function(d2,d3){return function(d4){return d2.snpPredIds.Contains(dF)?"direct-predecessor":d3?"indirect-predecessor":d4?"included-predecessor":"";};},ca.currentSnippetV().get_View(),ca.isIndirectPredecessorW(dF)),ca.isIncludedPredecessorW(dF));dK=(dL=b$.annotationsV().get_View(),cX.Map((dM=(dN=(dO=dF.get_Id(),a.String(dO)),function(d2){return A.contains$1(dN,d2);}),function(d2){return d1(dM(d2));}),dL));return(dP=(dQ=(dR=(dS=(dT=(dU=(dV=(dW=cX.Map(function(d2){return""!==d2;},ca.selectedClassW(dF)),function(d2){return ce.scrollIntoView(dW,d2);}),(dX=(dY=ca.expandClassW(dF),dp.Make().WithHole({$:2,$0:"name",$1:dH}).WithHole({$:1,$0:"indent",$1:a.String(dG)}).WithHole({$:2,$0:"parent",$1:dY})).WithHole({$:2,$0:"predecessor",$1:dJ}).WithHole({$:2,$0:"selected",$1:cX.Map2(function(d2,d3){return cD.concat(" ",cG.ofArray([d2,d3]));},ca.selectedClassW(dF),ca.codeSnippetClassW(dF))}).WithHole({$:2,$0:"errormsg",$1:dK}),dX.WithHole(dq.EventQ2(dX.k,"select",function(){return dX.i;},function(){ca.setCurrentSnippetIdO({$:1,$0:dF});}))).WithHole({$:7,$0:"afterrender",$1:dV})),dU.WithHole(dq.EventQ2(dU.k,"togglepred",function(){return dU.i;},function(){ca.togglePredecessor(dF);}))),dT.WithHole(dq.EventQ2(dT.k,"togglecollapse",function(){return dT.i;},function(){ca.toggleCollapse(dF);}))),dS.WithHole(dq.EventQ2(dS.k,"drag",function(){return dS.i;},function(d2){cb.setDragNode(dF);d2.Event.stopPropagation();}))),dR.WithHole(dq.EventQ2(dR.k,"dragover",function(){return dR.i;},function(d2){if(cb.getDragNIdO(dF)!=null)d2.Event.preventDefault();}))),dQ.WithHole(dq.EventQ2(dQ.k,"drop",function(){return dQ.i;},function(d2){var d3;d2.Event.preventDefault();d3=cb.getDragNIdO(dF);(h.iter(function(d4){ca.moveNode(d4,dF);}))(d3);}))),(dZ=dq.CompleteHoles(dP.k,dP.h,[]),(d0=new dr.New(dZ[1],cy.snippet(dZ[0])),(dP.i=d0,d0)))).get_Doc();}return c2.Convert(function(dF){return dE(dF[0],dF[1]);},ca.getHierarchyW());};ce.scrollIntoView=function(dE,dF){cX.Sink(function(dG){if(dG)dF.scrollIntoViewIfNeeded();},dE);};cf.render$4408$34=function(){return function(){cf.addProperty();};};cf.render=function(){var dE,dF,dG,dH,dI;return(dE=(dF=(dG=cf.properties(),dp.Make().WithHole({$:0,$0:"properties",$1:dG})),dF.WithHole(dq.EventQ2(dF.k,"addproperty",function(){return dF.i;},function(){cf.addProperty();}))),(dH=dq.CompleteHoles(dE.k,dE.h,[]),(dI=new dr.New(dH[1],cy.propertytable(dH[0])),(dE.i=dI,dI)))).get_Doc();};cf.properties$4401$33=function(dE){return function(){cf.remProperty(dE);};};cf.properties=function(){var dE;function dF(dH,dI){cF.set(dE.Get(),dH,[dI,(cF.get(dE.Get(),dH))[1]]);return dE.Set(dE.Get());}function dG(dH,dI){return(cF.get(dE.Get(),dH))[1].length>1000?null:(cF.set(dE.Get(),dH,[(cF.get(dE.Get(),dH))[0],dI]),dE.Set(dE.Get()));}dE=cY.Lens(ca.currentSnippetV(),function(dH){return dH.snpProperties;},function(dH,dI){return Q.New(dH.snpId,dH.snpName,dH.snpContent,dH.snpParentIdO,dH.snpPredIds,dI,dH.snpGeneration);});return c2.Convert(function(dH){var dI,dJ,dK,dL,dM,dN;dI=new dl.New(cX.Map(function(dO){return(cF.get(dO,dH))[0];},dE.get_View()),function(dO){return dF(dH,dO);});dJ=new dl.New(cX.Map(function(dO){var dP;dP=(cF.get(dO,dH))[1];return dP.length>1000?(((cB.Curried3(function(dQ,dR,dS){return dQ(cC.toSafe(dR)+"...<"+a.String(dS)+" chars>");}))(a.id))(cM.string(dP,{$:1,$0:0},{$:1,$0:100})))(dP.length):dP;},dE.get_View()),function(dO){return dG(dH,dO);});return(dK=(dL=dp.Make().WithHole({$:8,$0:"name",$1:dI}).WithHole({$:8,$0:"value",$1:dJ}),dL.WithHole(dq.EventQ2(dL.k,"remove",function(){return dL.i;},function(){cf.remProperty(dH);}))),(dM=dq.CompleteHoles(dK.k,dK.h,[["name",0],["value",0]]),(dN=new dr.New(dM[1],cy.property(dM[0])),(dK.i=dN,dN)))).get_Doc();},cX.Map(function(dH){return cF.ofSeq(cK.range(0,cF.length(dH)-1));},dE.get_View()));};cf.remProperty=function(dE){var dF;ca.currentSnippetV().Set((dF=ca.currentSnippetV().Get(),Q.New(dF.snpId,dF.snpName,dF.snpContent,dF.snpParentIdO,dF.snpPredIds,cM.array(ca.currentSnippetV().Get().snpProperties,{$:1,$0:0},{$:1,$0:dE-1}).concat(cM.array(ca.currentSnippetV().Get().snpProperties,{$:1,$0:dE+1},null)),dF.snpGeneration)));};cf.addProperty=function(){var dE;ca.currentSnippetV().Set((dE=ca.currentSnippetV().Get(),Q.New(dE.snpId,dE.snpName,dE.snpContent,dE.snpParentIdO,dE.snpPredIds,ca.currentSnippetV().Get().snpProperties.concat([["",""]]),dE.snpGeneration)));};ch=cg.HoverProvider=cB.Class({provideHover:function(dE,dF,dG){var dH;return X.ofAsyncResult((dH=f.asyncResult(),dH.Run(dH.Delay(function(){var dI;dI=cg.getIndentAndFirst();return dH.Bind$1(b9.toolTip(cg.fileName(),dF.lineNumber+dI[1],dF.column+dI[0],""),function(dJ){return z["AsyncResultBuilder.Bind"](dH,cg.overDescriptions(dJ[0]),function(dK){return dH.Return(bj.New(cF.ofSeq(cE.map(function(dL){return bg.New((c.print$1(dL),dL),true);},dK)),null));});});}))));}},k,ch);ch.New=cB.Ctor(function(dE){k.New.call(this);},ch);ci=cg.CompletionItemProvider=cB.Class({resolveCompletionItem:function(dE,dF){var dG;function dH(dJ){return dJ.$==1?cK.FailWith((function(dK){return function(dL){return dK(cx.p$9(dL));};}(a.id))(dJ.$0)):dJ.$0;}function dI(dJ){return cH.Return(dJ);}return dt.OfAsync(cH.Bind((dG=f.asyncResult(),dG.Run(dG.Delay(function(){return dG.Bind$1(b9.helpText(dE.label),function(dJ){return dG.Return(bi.New(dE.kind,dE.label,cD.concat("\n",cE.collect(function(dK){return cG.ofSeq(cE.delay(function(){return cE.append(!(!dK.Signature)?[dK.Signature]:[],cE.delay(function(){return cE.append(!(!dK.Comment)?[dK.Comment]:[],cE.delay(function(){return!(!dK.Footer)?[dK.Footer]:[];}));}));}));},cE.collect(a.id,dJ[0].Overloads)))));});}))),function(dJ){return dI(dH(dJ));}));},provideCompletionItems:function(dE,dF,dG,dH){var dI;function dJ(dL){return dL.$==1?cK.FailWith((function(dM){return function(dN){return dM(cx.p$9(dN));};}(a.id))(dL.$0)):dL.$0;}function dK(dL){return cH.Return(dL);}return dt.OfAsync(cH.Bind((dI=f.asyncResult(),dI.Run(dI.Delay(function(){var dL,dM;dL=cg.getIndentAndFirst();dM=dL[0];return dI.Bind$1(b9.completion(cD.replicate(dM," ")+dE.getLineContent(dF.lineNumber),true,cg.fileName(),dF.lineNumber+dL[1],dF.column+dM,"Contains"),function(dN){return dI.Return(cF.map(function(dO){return bi.New(cg.convertGlyphChar(dO.GlyphChar),dO.Name,"");},dN[0]));});}))),function(dL){return dK(dJ(dL));}));}},k,ci);ci.New=cB.Ctor(function(dE){k.New.call(this);},ci);cj=cg.DefinitionProvider=cB.Class({provideDefinition:function(dE,dF,dG){var dH;function dI(dK){return dK.$==1?cK.FailWith((function(dL){return function(dM){return dL(cx.p$9(dM));};}(a.id))(dK.$0)):dK.$0;}function dJ(dK){return cH.Return(dK);}return dt.OfAsync(cH.Bind((dH=f.asyncResult(),dH.Run(dH.Delay(function(){var dK;dK=cg.getIndentAndFirst();return dH.Bind$1(b9.findDeclaration(cg.fileName(),dF.lineNumber+dK[1],dF.column+dK[0],""),function(dL){var dM,dN,dO,dP,dQ,dR,dS,dT;dM=dL[0];dN=cg.getSnipIdIndentAndFirst(dM.Line);dO=dN[0];dP=dN[1];dQ=dN[2];dR=(dS="snpId:"+(dT=dO.get_Id(),a.String(dT)),self.monaco.Uri.parse(dS));cg.getSnippetModel(dO);return dH.Return(bc.New(ba.New(dM.Column-dP,dM.Column-dP,dM.Line-dQ,dM.Line-dQ),dR));});}))),function(dK){return dJ(dI(dK));}));}},k,cj);cj.New=cB.Ctor(function(dE){k.New.call(this);},cj);ck.New=function(dE,dF){return{fontSize:dE,lineHeight:dF};};cl.New=function(dE,dF){return{setEditor:dE,createModelReference:dF};};cg["goto"]=function(dE,dF,dG){var dH;dH=null;return cH.Delay(function(){var dI,dJ;dI=(dJ=cg.editorConfigO(),dJ==null?null:dJ.$0.editorO);return dI!=null&&dI.$==1?cH.Bind(cg.gotoEditor(dI.$0,dE,dF,dG),function(){return cH.Return(null);}):cH.Zero();});};cg.getEditorConfigO=function(){var dE;dE={$:1,$0:cg.monacoNew(cY.Lens(ca.currentSnippetV(),function(dF){return dF.snpContent;},function(dF,dG){return Q.New(dF.snpId,dF.snpName,dG,dF.snpParentIdO,dF.snpPredIds,dF.snpProperties,dF.snpGeneration);}),{$:1,$0:cX.Map2(cg.transformAnnotations,ca.currentSnippetW(),b$.annotationsV().get_View())},null,null)};cg.set_editorConfigO(dE);return dE;};cg.editorConfigO=function(){cu.$cctor();return cu.editorConfigO;};cg.set_editorConfigO=function(dE){cu.$cctor();cu.editorConfigO=dE;};cg.parse=function(dE,dF){var dG;w.iterA(function(dH){c.print$1(dH);},function(){c.print$1();},(dG=f.asyncResult(),dG.Run(dG.Delay(function(){var dH,dI;dH="Parsing...\n"+A.skipFirstLine$1(b$.annotationsV().Get());b$.annotationsV().Set(dH);cg.startsV().Set(dF);dI=A.splitByChar$1("\n",dE);cg.set_fileName(N.getSourceDir(b$.srcDir(),dI)+"/"+b$.id()+".fsx");return dG.Bind$1(b9.parseCode(cg.fileName(),dI,true,0),function(dJ){var dK;dK=cD.concat("\n",cE.append(cG.ofArray(["Parsed!"]),cE.map(function(dL){var dM,dN,dO,dP,dQ;function dR(dS,dT){return dL.StartLine>dT[1]&&dL.StartLine<=dT[2];}dM=(dN=cE.tryFind(function(dS){return dR(dS[0],dS[1]);},dF),(cg.defaultStart())(dN));dO=dM[1][0];dP=dM[1][1];return((((((((((cB.Curried(function(dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1){return dS(cC.toSafe(dT)+" ("+a.String(dU)+", "+a.String(dV)+") - ("+a.String(dW)+", "+a.String(dX)+") "+cC.toSafe(dY)+"("+cC.toSafe(dZ)+") \""+cC.toSafe(d0)+": "+cC.toSafe(d1)+"\".");},10))(a.id))(dL.Severity==="Error"?"Err":"Warn"))(dL.StartLine-dP))(dL.StartColumn-dO))(dL.EndLine-dP))(dL.EndColumn-dO))(dM[0][1]))((dQ=dM[0][0].get_Id(),a.String(dQ))))(dL.Subcategory))(dL.Message);},dJ[0].Errors)));b$.annotationsV().Set(dK);cE.iter(function(dL){c.print$1(dL);},dJ[1]);return dG.Zero();});}))));};cg.monacoNew=function(dE,dF,dG,dH){var dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX;dV=_.newVar(dE);dN=dV.editorO;dO=cg.newPojo([["fontSize",12],["lineHeight",14]]);dW=a.require("vs/editor/standalone/browser/standaloneServices");dX=new dW.StaticServices.codeEditorService._factory();dX.openCodeEditor=cg.openCodeEditor;dU=dX;dT=["codeEditorService",dU];dR=[dT,["textModelResolverService",cg.textModelResolverService()]];dP=cg.newPojo(dR);dJ=bl.New(dV["var"],dV.onChange,dV.onRender,dN,dV.disabled,dO,dP);return _.onRender(function(dY){var dZ,d0,d1,d2;function d3(d8,d9,d_){return d0.provideHover(d8,d9,d_);}function d4(d8,d9,d_,d$){return d1.provideCompletionItems(d8,d9,d_,d$);}function d5(d8,d9){return d1.resolveCompletionItem(d8,d9);}function d6(d8,d9,d_){return d2.provideDefinition(d8,d9,d_);}function d7(d8){var d9;d9=dY.getModel();self.monaco.editor.setModelMarkers(d9,"annotations",d8);}dZ=dY.getModel();self.monaco.editor.setModelLanguage(dZ,"fsharp");self.monaco.editor.setTheme("vs");d0=new ch.New(dY);d1=new ci.New(dY);d2=new cj.New(dY);c.print$1(function(d8){return d3(d8[0],d8[1],d8[2]);});c.print$1(function(d8){return d4(d8[0],d8[1],d8[2],d8[3]);});c.print$1(function(d8){return d5(d8[0],d8[1]);});c.print$1(function(d8){return d6(d8[0],d8[1],d8[2]);});self.monaco.languages.registerHoverProvider("fsharp",d0);self.monaco.languages.registerCompletionItemProvider("fsharp",d1);self.monaco.languages.registerDefinitionProvider("fsharp",d2);(h.iter(function(d8){cX.Sink(d7,d8);}))(dF);},dJ);};cg.textModelResolverService=function(){var dE;dE=null;return cl.New(function(dF){dE={$:1,$0:dF};},function(dF){var dG;return dt.OfAsync((dG=null,cH.Delay(function(){var dH,dI,dJ,dK;dJ=cg.getSnippetModel(dF);dK=self.require("vs/base/common/lifecycle");dI=new dK.ImmortalReference(dJ);return cH.Return(dI);})));});};cg.openCodeEditor=function(dE,dF,dG){var dH;return dt.OfAsync((dH=null,cH.Delay(function(){var dI,dJ;dI=dE.resource.path;dJ=(B.Guid$1())(dI);return dJ!=null&&dJ.$==1?cH.Bind(cg.gotoEditor(dF,new P({$:0,$0:dJ.$0}),dE.options.selection.startLineNumber,dE.options.selection.startColumn),function(){return cH.Return(dF);}):cH.Return(null);})));};cg.gotoEditor=function(dE,dF,dG,dH){var dI;dI=null;return cH.Delay(function(){ca.expandParents(dF);ca.setCurrentSnippetIdO({$:1,$0:dF});return cH.Bind(cH.Sleep(200),function(){dE.focus();dE.setPosition($.New(dH,dG));dE.revealPositionInCenter($.New(dH,dG));return cH.Zero();});});};cg.newPojo=function(dE){var dF,dG;function dH(dJ,dK){return function(dL){return cg.addProp(dJ,dK,dL);};}function dI(dJ){}dF={};cE.iter((dG=function(dJ){return(function(dK){return dH(dK[0],dK[1]);}(dJ))(dF);},function(dJ){return dI(dG(dJ));}),dE);return dF;};cg.addProp=function(dE,dF,dG){dG[dE]=dF;return dG;};cg.transformAnnotations=function(dE,dF){var dG,dH;function dI(dJ,dK,dL,dM,dN,dO,dP){var dQ;return!cL.Equals((dQ=(B.parseGuidO$1())(dO),dQ==null?null:{$:1,$0:new P({$:0,$0:dQ.$0})}),{$:1,$0:dE.snpId})?null:{$:1,$0:bh.New(dL,dN,dK,dM,dJ==="Err"?8:dJ==="Warn"?4:dJ==="Hint"?1:2,dP)};}dG="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*\\("+W.rexGuid$1()+"\\) \"([^\"]+?)\"\\.";return cF.choose(function(dJ){return dI(dJ[0],dJ[1],dJ[2],dJ[3],dJ[4],dJ[5],dJ[6]);},cF.choose(function(dJ){var dK,dL,dM;return(dL=W.REGEX$2(dG,"",dJ),dL!=null&&dL.$==1&&((dM=dL.$0,!cL.Equals(dM,null)&&dM.length===8)&&(dK=[cF.get(dL.$0,3),cF.get(dL.$0,2),cF.get(dL.$0,6),cF.get(dL.$0,7),cF.get(dL.$0,5),cF.get(dL.$0,4),cF.get(dL.$0,1)],true)))?{$:1,$0:[dK[6],cK.toInt(a.Number(dK[1])),cK.toInt(a.Number(dK[0])),cK.toInt(a.Number(dK[5])),cK.toInt(a.Number(dK[4])),dK[2],dK[3]]}:null;},(dH=W.REGEX$2(dG,"g",dF),dH!=null&&dH.$==1?dH.$0:[])));};cg.convertGlyphChar=function(dE){return dE==="C"?6:dE==="E"?12:dE==="S"?11:dE==="I"?7:dE==="N"?8:dE==="M"?1:dE==="P"?9:dE==="F"?4:dE==="T"?6:dE==="K"?13:0;};cg.fileName=function(){cu.$cctor();return cu.fileName;};cg.set_fileName=function(dE){cu.$cctor();cu.fileName=dE;};cg.overDescriptions=function(dE){return i.sequenceSeq(cE.collect(function(dF){return cG.ofSeq(cE.delay(function(){return cE.append(!(!dF.Signature)?[cH.Return("```\n"+dF.Signature+"\n```")]:[],cE.delay(function(){function dG(dH){return cH.Return(dH);}return cE.append(!(!dF.Comment)?[cH.Bind((new dk.New()).Async("FSharpStation:FsRoot.FSharpStation+Markdown.createCommentBlock:-1840423385",[dF.Comment]),function(dH){return dG(cg.fixMarkDown(dH));})]:[],cE.delay(function(){return!(!dF.Footer)?[cH.Return(cg.fixMarkDown(dF.Footer))]:[];}));}));}));},cE.collect(a.id,dE)));};cg.fixMarkDown=function(dE){return cD.concat("\n\n",cE.map(function(dF){var dG;dG=cE.length(cE.takeWhile(function(dH){return" "===dH;},dF));return cD.replicate(dG,"&nbsp;")+cM.string(dF,{$:1,$0:dG},null);},cE.map(function(dF){return cD.Replace(dF,"\u0009","- ");},A.splitByChar$1("\n",dE))));};cg.getSnippetModel=function(dE){var dF,dG,dH;dF=(dG="snpId:"+(dH=dE.get_Id(),a.String(dH)),self.monaco.Uri.parse(dG));return cg.getModelUri(ca.runReader(function(dI){return cK.FailWith(a.String(dI));},S.snippetRm(dE)).snpContent,dF);};cg.getModelUri=function(dE,dF){var dG,dH,dI;dG=(dH=(dI=self.monaco.editor.getModel(dF),!dI?null:{$:1,$0:dI}),dH==null?self.monaco.editor.createModel("","fsharp",dF):dH.$0);dG.getValue()!==dE?dG.setValue(dE):void 0;return dG;};cg.getSnipIdIndentAndFirst=function(dE){var dF,dG;function dH(dI,dJ){return dE>=dJ[1]&&dE<=dJ[2];}dF=(dG=cE.tryFind(function(dI){return dH(dI[0],dI[1]);},cg.startsV().Get()),(cg.defaultStart())(dG));return[dF[0][0],dF[1][0],dF[1][1]];};cg.getIndentAndFirst=function(){var dE,dF,dG,dH;function dI(dL){return dL[0];}function dJ(dL){return dL[0];}function dK(dL){return cL.Equals(dE,dL);}dE=ca.currentSnippetV().Get().snpId;dF=(dG=cE.tryFind((dH=function(dL){return dJ(dI(dL));},function(dL){return dK(dH(dL));}),cg.startsV().Get()),(cg.defaultStart())(dG));return[dF[1][0],dF[1][1]];};cg.defaultStart=function(){cu.$cctor();return cu.defaultStart;};cg.startsV=function(){cu.$cctor();return cu.startsV;};cm.jumpToRef=function(dE){var dF,dG;function dH(dI,dJ,dK){return dG>=dJ&&dG<dK?{$:1,$0:dI}:null;}dF=dE.value;dG=dE.selectionStart;cm.jumpToLine(cE.pick(function(dI){return dH(dI[0],dI[1],dI[2]);},(cE.mapFold(function(dI,dJ){return[[dJ,dI,dI+dJ.length+1],dI+dJ.length+1];},0,cD.SplitChars(dF,["\n"],0)))[0]));};cm.jumpToLine=function(dE){var dF,dG,dH,dI,dJ;dF=W.REGEX$2(cm.rexGuid(),"",dE);dF!=null&&dF.$==1?(dG=dF.$0,!cL.Equals(dG,null)&&dG.length===6)?(dH=cF.get(dF.$0,2),dI=cF.get(dF.$0,5),dJ=cF.get(dF.$0,1),cH.Start(cg["goto"](new P({$:0,$0:dI}),cK.toInt(a.Number(dJ)),cK.toInt(a.Number(dH))),null)):void 0:void 0;};cm.rexGuid=function(){cu.$cctor();return cu.rexGuid$1;};cn.buttonClick=function(dE){cn.actionClick(cD.Trim(dE.textContent));};cn.actionClick=function(dE){var dF;dF=cn.actionClickRm(dE);s.iterReaderA(function(dG){c.print$1(dG);},function(dG){c.print$1(dG);},ca.snippetsColl(),dF);};cn.actionClickRm=function(dE){var dF;dF=s.fusion();return dF.Run(dF.Delay(function(){var dG;dG=(function(dH){return function(dI){return dH("Action "+cC.toSafe(dI)+" ...");};}(a.id))(dE);b$.outputMsgs().Set(dG);return dF.Bind(cn.getBaseSnippet(),function(dH){function dI(dJ){return cn.fetchValue(dE,dJ);}return dF.Bind(t.op_BarGreaterGreater(cn.getCode(dH,dE),function(dJ){return cn.translateString(dI,dJ);}),function(dJ){return dF.Bind(s.ofAsync((new dk.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bp({$:0,$0:b$.id()})])),function(){return dF.Bind(t.op_BarGreaterGreater(s.ofFusionM(S.fastCodeRm({$:1,$0:dH.snpId},{$:1,$0:dH.snpId})),function(dK){return dK[0];}),function(dK){return dF.Bind(s.ofFusionM(S.predsGenerationRm(dH)),function(dL){return dF.ReturnFrom(s.ofAsync((new dk.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCodeWithPresence:854633647",[b$.srcDir(),(function(dM){return function(dN){return dM(cx.p(dN));};}(a.id))(dH.snpId),a.String(dL),{$:0,$0:dK},{$:0,$0:dJ}])));});});});});});}));};cn.fetchValue=function(dE,dF){var dG,dH,dI;return dF==="button"?dE:(dG=(dH=(dI=(du.splitName("Snp_"+cD.Replace(a.String(ca.currentSnippetV().Get().snpId.get_Id()),"-","")))(dF),du.tryGetWoW(dI[0],dI[1])),dH==null?null:cX.TryGet(dH.$0)),dG==null?(function(dJ){return function(dK){return dJ("$[not found:"+cC.toSafe(dK)+"]");};}(a.id))(dF):dG.$0);};cn.getCode=function(dE,dF){var dG;dG=s.fusion();return dG.Run(dG.Delay(function(){var dH;function dI(dJ,dK){return dJ+dK;}return dG.Bind(t.op_BarGreaterGreater(t.op_BarGreaterGreater(cn.propO(dE,"Open"),(dH=function(dJ){return dI(dJ,"\n");},function(dJ){return dJ==null?null:{$:1,$0:dH(dJ.$0)};})),function(dJ){return dJ==null?"":dJ.$0;}),function(dJ){return dG.Bind(cn.propO(dE,dF),function(dK){return dK==null?cD.StartsWith(dF,":")?dG.Return(dJ+cM.string(dF,{$:1,$0:1},null)):dG.Bind(t.op_BarGreaterGreater(cn.propO(dE,"action-template"),function(dL){return dL==null?"${button}() |> printfn \"%A\"":dL.$0;}),function(dL){var dM;return dG.Return((dM=(A.indentStr$1(4))(dJ+dL),(((cB.Curried3(function(dN,dO,dP){return dN("module Call"+cC.toSafe(dO)+" =\n"+cC.toSafe(dP));}))(a.id))(a.String(dv.now())))(dM)));}):dG.Return(dJ+dK.$0);});});}));};cn.getBaseSnippet=function(){var dE;dE=s.fusion();return dE.Run(dE.Delay(function(){var dF;dF=ca.currentSnippetV().Get();return dE.Bind(cn.propO(dF,"BaseSnippet"),function(dG){return dE.ReturnFrom(t.op_BarGreaterGreater(t.op_BarGreaterGreater(s.insertO(dG==null?null:{$:1,$0:s.ofFusionM(S.snippetFromRefORm({$:1,$0:cD.SplitChars(dG.$0,["/"],0)}))}),function(dH){return dH==null?null:dH.$0;}),function(dH){return dH==null?dF:dH.$0;}));});}));};cn.translateString=function(dE,dF){function dG(dH,dI){var dJ;dJ=A.delimitedO$1("${","}",dI);return dJ!=null&&dJ.$==1?dG(dH+dJ.$0[0],dE(dJ.$0[1])+dJ.$0[2]):dH+dI;}return dG("",dF);};cn.propO=function(dE,dF){function dG(dH,dI){return dI[0];}return t.op_BarGreaterGreater(s.ofFusionM(S.propertyHierORm(dF,dE)),function(dH){var dI;return dH==null?null:{$:1,$0:(dI=dH.$0,dG(dI[0],dI[1]))};});};cp.New=function(dE,dF,dG){return{snippets:dE,generation:dF,collapsed:dG};};co.serModel=function(){cu.$cctor();return cu.serModel;};co.getModel=function(dE,dF,dG){return cp.New(cF.ofSeq(dE),dF,dG);};co.serSnippet=function(){cu.$cctor();return cu.serSnippet;};co.serSnippetId=function(){cu.$cctor();return cu.serSnippetId;};cq.saveAs=function(){var dE,dF,dG,dH;dE=(dF=cE.last(cD.SplitChars(cq.fileName().Get(),["/","\\"],0)),dF===""?"noname.snippets":dF);a.saveAs(new a.Blob([(dG=(dH=ca.getSnippetsGen(),co.getModel(dH[0],dH[1],dH[2])),(co.serModel())[0](dG))],{type:"text/plain;charset=utf-8"}),dE);ca.updateGeneration();};cq.loadTextFile=function(dE){var dF,dG;if(cq.canLoad()){dF=dE.files;dF.length>0?(dG=new a.FileReader(),dG.onload=function(dH){return cq.parseText(dH.target.result);},cq.fileName().Set(dF.item(0).name),dG.readAsText(dF.item(0))):void 0;}};cq.parseText=function(dE){var dF,dG;try{dF=(dG=c$.parse(dE),(co.serModel())[1](dG));ca.setSnippetsGen(dF.snippets,dF.collapsed);}catch(dH){a.alert(a.String(dH));((function(dI){return function(dJ){return dI(cC.prettyPrint(dJ));};}(function(dI){cV.log(dI);}))(dH));}};cq.canLoad=function(){return cL.Equals(cX.TryGet(ca.SaveAsClassW()),{$:1,$0:""})||a.confirm("Changes have not been saved, do you really want to load?");};cq.fileName=function(){cu.$cctor();return cu.fileName$1;};cr.importFile=function(dE){var dF,dG;if(cq.canLoad()){dF=dE.files;dF.length>0?(dG=new a.FileReader(),dG.onload=function(dH){return cr.parseText(dH.target.result);},dG.readAsText(dF.item(0))):void 0;}};cr.parseText=function(dE){var dF;try{ca.setSnippetsGen((dF=c$.parse(dE),(cr.serSnippets())[1](dF)),new cS.New$1(null));}catch(dG){a.alert(a.String(dG));((function(dH){return function(dI){return dH(cC.prettyPrint(dI));};}(function(dH){cV.log(dH);}))(dG));}};cr.serSnippets=function(){cu.$cctor();return cu.serSnippets;};cr.serSnippet2=function(){cu.$cctor();return cu.serSnippet2;};cr.serSnippetId2=function(){cu.$cctor();return cu.serSnippetId2;};cs.mainProgram=function(){var dE,dF,dG,dH,dI,dJ;du.addPlugIn(dw.New("FSharpStation",[du.newVar("fileName",cq.fileName()),du.newVar("SnippetName",cY.Lens(ca.currentSnippetV(),function(dK){return dK.snpName;},function(dK,dL){return Q.New(dK.snpId,dL,dK.snpContent,dK.snpParentIdO,dK.snpPredIds,dK.snpProperties,dK.snpGeneration);})),du.newVar("Content",cY.Lens(ca.currentSnippetV(),function(dK){return dK.snpContent;},function(dK,dL){return Q.New(dK.snpId,dK.snpName,dL,dK.snpParentIdO,dK.snpPredIds,dK.snpProperties,dK.snpGeneration);})),du.newVar("Output",b$.outputMsgs()),du.newVar("Parser",b$.annotationsV())],[du.newViw("FsCode",ca.FsCodeW()),du.newViw("SaveNeeded",ca.SaveAsClassW()),du.newViw("CurrentPath",ca.currentPathW()),du.newViw("FStationId",cX.Const(b$.id()))],[du.newDoc("mainDoc",dx.Create(cs.mainDoc)),du.newDoc("editor",dx.Create(function(){var dK,dL,dM;return c2.Element("div",[],[(dK=(dL=cg.getEditorConfigO(),dL==null?null:{$:1,$0:_.render(dL.$0)}),(dM=c2.get_Empty(),dK==null?dM:dK.$0))]);})),du.newDoc("Snippets",dx.Create(ce.render)),du.newDoc("Properties",dx.Create(cf.render)),du.newDoc("ButtonsRight",dx.Create(cs.buttonsRight))],[du.newAct("AddSnippet",function(){ca.newSnippet();}),du.newAct("RemoveSnippet",function(){cs.deleteSnippet();}),du.newAct("IndentIn",function(){ca.indentIn();}),du.newAct("IndentOut",function(){ca.indentOut();}),du.newAct("AddProperty",function(){cf.addProperty();}),du.newAct("SaveAs",function(){cq.saveAs();}),du.newAct("RunFS",function(){cs.runFsCode();}),du.newAct("AbortFsi",function(){(new dk.New()).Send("FSharpStation:FsRoot.Library2+FsiAgent.abortFsiExe:6",[]);}),du.newAct("DisposeFsi",function(){(new dk.New()).Send("FSharpStation:FsRoot.Library2+FsiAgent.disposeFsiExe:6",[]);}),du.newActF("LoadFile",{$:1,$0:function(dK){cq.loadTextFile(dK);},$1:"FileElement"}),du.newActF("Import",{$:1,$0:function(dK){cr.importFile(dK);},$1:"FileElement"}),du.newActF("JumpTo",{$:1,$0:function(dK){cm.jumpToRef(dK);},$1:"textarea"}),du.newActF("ButtonClick",{$:1,$0:function(dK){cn.buttonClick(dK);},$1:"button"}),du.newActF("ActionClick",{$:1,$0:function(dK){cn.actionClick(dK);},$1:"name"})],[]));dy.addLayout((dE=(A.unindentStr())("\n                    menuEditor       horizontal  65       menuLogo                  editorMessages\n                    double           horizontal  0-50-100 AppFramework.AppFwkClient menuEditor\n                    menuLogo         vertical    350      logo                      menu\n                    logo             span       \"margin:0; color:gray; font-size: 55px; font-weight:530\" \"F# Station\"\n                    editorMessages   horizontal 10-83-100 editorButtons             messages\n                    messages         vertical   0-50-100  messagesLeft              messagesRight\n                    editorButtons    vertical -200 snippetsSnippet buttons\n                    buttons div      \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\" btnSaveAs none x btnAddSnippet btnDeleteSnippet btnIndentIn btnIndentOut none x btnRunFS none x btnAbortFsi\n                    snippetsSnippet  vertical   0-20-100  snippets                  editorProperties\n                    snippets         horizontal 20        \"${FSharpStation.CurrentPath}\" FSharpStation.Snippets\n                    editorProperties vertical   0-100-100 snippet                   properties\n                    properties       div        \"\"        FSharpStation.Properties\n                    snippet          horizontal 35        Name                      FSharpStation.editor\n                    menu             span  \"\" btnLoad btnImport\n        \n                    btnSaveAs        button FSharpStation.SaveAs         \"class=btn ${FSharpStation.SaveNeeded}\" \"Save as...    \"\n                    btnAddSnippet    button FSharpStation.AddSnippet     \"\"                  \"Add Snippet   \"\n                    btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\n                    btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\n                    btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\n                    btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\n                    btnAbortFsi      button FSharpStation.AbortFsi       \"\"                  \"Abort Fsi     \"\n        \n                    messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\n                    messagesRight    wcomp-tabstrip                      \"\"                  Parser\n        \n                    Output           textarea  FSharpStation.Output      \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \n                    FsCode           textarea  FSharpStation.FsCode      \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \n                    Parser           textarea  FSharpStation.Parser      \"tabname=Parser ; placeholder=Parser messages; dblclick=${FSharpStation.JumpTo} ; spellcheck=false\" \n                    Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\n                    btnLoad          Doc       InputFile                 \"\"     \"Load File...\" FSharpStation.LoadFile  FileName\n                    btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\n                    FileName         div                                 \"class=form-control\"  FSharpStation.fileName\n                "),dy.newLyt(cs.FStationLyt(),dE)));cX.Sink(function(dK){(h.iter(function(dL){try{self["eval"].apply(self,["CIPHERSpaceLoadFilesDoAfter(function(){IntelliFactory.Runtime.Start()})"]);self["eval"].apply(self,[dL[1]]);}catch(dM){c.print(dM);}}))(dK);},(dF=ca.currentLayoutJSDW(),(dG=[cY.Create$1(null)],(cX.Sink(function(dK){if(!cL.Equals(dG[0].Get(),dK))dG[0].Set(dK);},dF),dG[0].get_View()))));cX.Sink(function(dK){var dL,dM,dN,dO,dP,dQ;dL=(dM=dK==null?null:(dN=dK.$0,(dO=dN[0],(dP=dN[1],(dy.addLayout(dy.newLyt(dO,dP)),dP===""?null:{$:1,$0:dO})))),(dQ=cs.FStationLyt(),dM==null?dQ:dM.$0));du.mainDocV().Set(dL);},(dH=ca.currentLayoutDW(),(dI=[cY.Create$1(null)],(cX.Sink(function(dK){if(!cL.Equals(dI[0].Get(),dK))dI[0].Set(dK);},dH),dI[0].get_View()))));return c2.Async((dJ=null,cH.Delay(function(){return cH.Bind(_.loader(),function(){var dK,dL,dM;dK=(dL=cg.getEditorConfigO(),dL==null?null:{$:1,$0:_.render(dL.$0)});dM=c2.get_Empty();dK==null?void 0:void 0;return cH.Return(du.getMainDoc().f());});})));};cs.mainDoc$5064$78=a.id;cs.mainDoc$5056$39=function(){return function(dE){cm.jumpToRef(dE.Target);};};cs.mainDoc$5055$39=function(){return function(dE){dE.Target.value="";};};cs.mainDoc$5054$39=function(){return function(dE){cr.importFile(dE.Target);};};cs.mainDoc$5053$39=function(){return function(dE){dE.Target.value="";};};cs.mainDoc$5052$39=function(){return function(dE){cq.loadTextFile(dE.Target);};};cs.mainDoc=function(){var dE,dF,dG,dH,dI,dJ,dK,dL;dE=cs.hookDoc("FSharpStation","ButtonsRight",function(dM,dN){return dM.WithHole({$:0,$0:"buttonsright",$1:dN});},cs.hookDoc("FSharpStation","Properties",function(dM,dN){return dM.WithHole({$:0,$0:"properties",$1:dN});},cs.hookDoc("FSharpStation","Snippets",function(dM,dN){return dM.WithHole({$:0,$0:"snippets",$1:dN});},cs.hookDoc("FSharpStation","editor",function(dM,dN){return dM.WithHole({$:0,$0:"codeeditor",$1:dN});},cs.hookAct("FSharpStation","SaveAs",function(dM,dN){return dM.WithHole(dq.EventQ2(dM.k,"saveas",function(){return dM.i;},dN));},cs.hookViw("FSharpStation","SaveNeeded",function(dM,dN){return dM.WithHole({$:2,$0:"saveasclass",$1:dN});},cs.hookViw("FSharpStation","FSCode",function(dM,dN){return dM.WithHole({$:8,$0:"fscode",$1:new dl.New(dN,a.ignore)});},cs.hookVar("FSharpStation","Parser",function(dM,dN){return dM.WithHole({$:8,$0:"parser",$1:dN});},cs.hookVar("FSharpStation","Output",function(dM,dN){return dM.WithHole({$:8,$0:"output",$1:dN});},cs.hookVar("FSharpStation","SnippetName",function(dM,dN){return dM.WithHole({$:8,$0:"name",$1:dN});},cs.hookVar("FSharpStation","fileName",function(dM,dN){return dM.WithHole({$:8,$0:"filename",$1:dN});},(dF=(dG=(dH=(dI=(dJ=dp.Make(),dJ.WithHole(dq.EventQ2(dJ.k,"loadfilechanged",function(){return dJ.i;},function(dM){cq.loadTextFile(dM.Target);}))),dI.WithHole(dq.EventQ2(dI.k,"loadfileclear",function(){return dI.i;},function(dM){dM.Target.value="";}))),dH.WithHole(dq.EventQ2(dH.k,"importfilechanged",function(){return dH.i;},function(dM){cr.importFile(dM.Target);}))),dG.WithHole(dq.EventQ2(dG.k,"importfileclear",function(){return dG.i;},function(dM){dM.Target.value="";}))),dF.WithHole(dq.EventQ2(dF.k,"jumpref",function(){return dF.i;},function(dM){cm.jumpToRef(dM.Target);}))))))))))))));return(dK=dq.CompleteHoles(dE.k,dE.h,[["filename",0],["name",0],["output",0],["fscode",0],["parser",0]]),(dL=new dr.New(dK[1],cy.layout(dK[0])),(dE.i=dL,dL))).get_Doc();};cs.buttonsRight$5038$74=a.id;cs.buttonsRight$5037$74=a.id;cs.buttonsRight$5036$74=a.id;cs.buttonsRight$5035$74=a.id;cs.buttonsRight$5034$74=a.id;cs.buttonsRight=function(){var dE,dF,dG;dE=cs.hookAct("FSharpStation","RunFS",function(dH,dI){return dH.WithHole(dq.EventQ2(dH.k,"runfs",function(){return dH.i;},dI));},cs.hookAct("FSharpStation","IndentOut",function(dH,dI){return dH.WithHole(dq.EventQ2(dH.k,"indentout",function(){return dH.i;},dI));},cs.hookAct("FSharpStation","IndentIn",function(dH,dI){return dH.WithHole(dq.EventQ2(dH.k,"indentin",function(){return dH.i;},dI));},cs.hookAct("FSharpStation","RemoveSnippet",function(dH,dI){return dH.WithHole(dq.EventQ2(dH.k,"removesnippet",function(){return dH.i;},dI));},cs.hookAct("FSharpStation","AddSnippet",function(dH,dI){return dH.WithHole(dq.EventQ2(dH.k,"addsnippet",function(){return dH.i;},dI));},dp.Make())))));return(dF=dq.CompleteHoles(dE.k,dE.h,[]),(dG=new dr.New(dF[1],cy.buttonsright(dF[0])),(dE.i=dG,dG))).get_Doc();};cs.hookDoc=function(dE,dF,dG,dH){var dI,dJ,dK;dI=(dJ=du.tryGetDoc(dE,dF),dJ==null?null:{$:1,$0:(dK=dJ.$0,((((cB.Curried3(function(dL,dM,dN){return dL("Doc    "+cC.toSafe(dM)+"."+cC.toSafe(dN)+" hooked");}))(function(dL){cV.log(dL);}))(dE))(dF),dG(dH,c2.EmbedView(cX.Map(function(){return du.getLazyDoc(dK);},du.mainDocV().get_View())))))});return dI==null?((((cB.Curried3(function(dL,dM,dN){return dL("Doc    "+cC.toSafe(dM)+"."+cC.toSafe(dN)+" not found");}))(function(dL){cV.log(dL);}))(dE))(dF),dH):dI.$0;};cs.hookAct=function(dE,dF,dG,dH){var dI,dJ,dK;dI=(dJ=du.tryGetAct(dE,dF),dJ==null?null:{$:1,$0:(dK=dJ.$0,((((cB.Curried3(function(dL,dM,dN){return dL("Action "+cC.toSafe(dM)+"."+cC.toSafe(dN)+" hooked");}))(function(dL){cV.log(dL);}))(dE))(dF),dG(dH,function(){du.callFunction(null,null,dK.actFunction);})))});return dI==null?((((cB.Curried3(function(dL,dM,dN){return dL("Action "+cC.toSafe(dM)+"."+cC.toSafe(dN)+" not found");}))(function(dL){cV.log(dL);}))(dE))(dF),dH):dI.$0;};cs.hookViw=function(dE,dF,dG,dH){var dI,dJ;dI=(dJ=du.tryGetViw(dE,dF),dJ==null?null:{$:1,$0:((((cB.Curried3(function(dK,dL,dM){return dK("View   "+cC.toSafe(dL)+"."+cC.toSafe(dM)+" hooked");}))(function(dK){cV.log(dK);}))(dE))(dF),dG(dH,dJ.$0.viwView))});return dI==null?((((cB.Curried3(function(dK,dL,dM){return dK("View   "+cC.toSafe(dL)+"."+cC.toSafe(dM)+" not found");}))(function(dK){cV.log(dK);}))(dE))(dF),dH):dI.$0;};cs.hookVar=function(dE,dF,dG,dH){var dI,dJ;dI=(dJ=du.tryGetVar(dE,dF),dJ==null?null:{$:1,$0:((((cB.Curried3(function(dK,dL,dM){return dK("Var    "+cC.toSafe(dL)+"."+cC.toSafe(dM)+" hooked");}))(function(dK){cV.log(dK);}))(dE))(dF),dG(dH,dJ.$0.varVar))});return dI==null?((((cB.Curried3(function(dK,dL,dM){return dK("Var    "+cC.toSafe(dL)+"."+cC.toSafe(dM)+" not found");}))(function(dK){cV.log(dK);}))(dE))(dF),dH):dI.$0;};cs.FStationLyt=function(){cu.$cctor();return cu.FStationLyt;};cs.deleteSnippet=function(){var dE;dE=ca.currentSnippetV().Get();!cL.Equals(dE.snpId,P.get_Empty())&&a.confirm((function(dF){return function(dG){return dF("Do you want to delete "+cC.toSafe(dG)+"?");};}(a.id))(S.snippetName(dE.snpName,dE.snpContent)))?ca.deleteCurrentSnippet():void 0;};cs.runFsCode=function(){var dE;function dF(dG){b$.appendMsgs(cD.Replace(dG,"xXxYyYyhH","Done!"));}dE=cX.TryGet(ca.FsCodeW());(h.iter(function(dG){var dH,dI,dJ;dH=(dI=s.fusion(),dI.Run(dI.Delay(function(){b$.outputMsgs().Set("Running F#...");return dI.Bind(s.ofAsync((new dk.New()).Async("FSharpStation:FsRoot.Library2+FSharpStationClient.setAddress:-574353144",[new bp({$:0,$0:b$.id()})])),function(){return dI.ReturnFrom(s.ofAsync((new dk.New()).Async("FSharpStation:FsRoot.Library2+FsiAgent.evalCode:-623788033",[b$.srcDir(),{$:0,$0:dG}])));});})));s.iterResultA((dJ=function(dK){return function(dL){return dK("Error:\n"+cx.p$1(dL));};}(a.id),function(dK){return dF(dJ(dK));}),a.ignore,dH);}))(dE);};ct.processMessage=function(dE){var dF;return cH.Return(ca.runReaderResult((dF=o.fusion(),dF.Run(dF.Delay(function(){var dG,dH,dI,dJ,dK,dL,dM,dN,dO;function dP(dQ){ca.setProperty(dQ,dN,dO);return"Ok";}switch(dE.$==1?(dG=dE.$0,1):dE.$==2?(dG=dE.$0,2):dE.$==3?(dG=dE.$0,3):dE.$==4?(dH=dE.$0,!cL.Equals(dH,null)&&dH.length===2?cF.get(dE.$0,0)==="AddOutput"?(dG=cF.get(dE.$0,1),4):cF.get(dE.$0,0)==="ExecJS"?(dG=cF.get(dE.$0,1),5):(dG=[cF.get(dE.$0,0),cF.get(dE.$0,1)],8):(dI=dE.$0,!cL.Equals(dI,null)&&dI.length===4?cF.get(dE.$0,0)==="SetProperty"?(dG=[cF.get(dE.$0,1),cF.get(dE.$0,2),cF.get(dE.$0,3)],6):11:(dJ=dE.$0,!cL.Equals(dJ,null)&&dJ.length===1?(dG=cF.get(dE.$0,0),7):(dK=dE.$0,!cL.Equals(dK,null)&&dK.length===3?(dG=[cF.get(dE.$0,0),cF.get(dE.$0,1),cF.get(dE.$0,2)],9):11)))):dE.$==5?10:0){case 0:return dF.Return({$:0,$0:b$.id()});case 1:return dF.Bind(o.traverseSeq(S.snippetFromRefORm,dG),function(dQ){return dF.Return({$:1,$0:cF.ofSeq(cE.choose(a.id,dQ))});});case 2:ca.clearPredsCache();return dF.Bind(o.absorbO(function(){return new d({$:1,$0:(function(dQ){return function(dR){return dQ("Snippet not found "+cx.p$2(dR));};}(a.id))(dG)});},S.snippetFromRefORm(dG)),function(dQ){return dF.ReturnFrom(p.op_BarGreaterGreater(p.op_BarGreaterGreater(S.fastCodeRm({$:1,$0:dQ.snpId},{$:1,$0:dQ.snpId}),function(dR){return dR[0];}),function(dR){return{$:0,$0:dR};}));});case 3:ca.clearPredsCache();return dF.Return(T.Hole.TODO_GetPredecessors);case 4:b$.appendMsgs(dG);return dF.Return({$:0,$0:"Ok"});case 5:dL=self["eval"].apply(self,[dG]);dL===null?void 0:void 0;return dF.Return({$:0,$0:"Ok"});case 6:dM=dG[0];dN=dG[1];dO=dG[2];return dF.Bind(o.absorbO(function(){return new d({$:1,$0:(function(dQ){return function(dR){return dQ("Snippet not found: "+cC.toSafe(dR));};}(a.id))(dM)});},p.op_BarGreaterGreater(S.snippetFromRefORm({$:1,$0:cD.SplitChars(dM,["/"],0)}),function(dQ){return dQ==null?null:{$:1,$0:dP(dQ.$0)};})),function(dQ){return dF.Return({$:0,$0:dQ});});case 7:return dF.ReturnFrom(ct.actionCall(dG,null,null));case 8:return dF.ReturnFrom(ct.actionCall(dG[0],dG[1],null));case 9:return dF.ReturnFrom(ct.actionCall(dG[0],dG[1],dG[2]));case 10:return dF.Return({$:0,$0:self.document.baseURI});case 11:return dF.Return(T.Hole[(function(dQ){return function(dR){return dQ("TODO message: "+cx.p$3(dR));};}(a.id))(dE)]);}})))));};ct.actionCall=function(dE,dF,dG){var dH;dH=o.fusion();return dH.Run(dH.Delay(function(){var dI,dJ;dI=(dJ=(du.splitName(cs.FStationLyt()))(dE),du.tryGetAct(dJ[0],dJ[1]));return dI!=null&&dI.$==1?(du.callFunction(dF,dG,dI.$0.actFunction),dH.Return({$:0,$0:"Ok"})):dH.ReturnFrom(o.ofResultRM(c.Error(new d({$:1,$0:(function(dK){return function(dL){return dK("Action "+cC.toSafe(dL)+" not found");};}(a.id))(dE)}))));}));};ct.wsStationClient=function(){cu.$cctor();return cu.wsStationClient;};cu.$cctor=function(){var dF,dJ,dK,dP,dQ,dR,dV,dW,d0,d1,d5,d6,d7,d8,d_,d$,ec,ed,eg,ej,ek,em,en,eo,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW;cu.$cctor=a.ignore;cu.rtn=function(eX){return[eX];};cu.result=new m.New();cu.result$1=l.result();cu.fusion=new r.New();cu.fusion$1=new v.New();cu.asyncResult=new x.New();cu.asyncResultP=new y.New();function dE(eX){return cD.concat("\n",eX);}cu.unindentStr=function(eX){return dE(A.unindent$1(eX));};function dG(eX){return A.splitByChar$1("\n",eX);}function dH(eX){var eY,eZ;return cM.array(eX,{$:1,$0:0},{$:1,$0:(eY=0,(eZ=cF.length(eX)-2,cL.Compare(eY,eZ)===1?eY:eZ))});}function dI(eX){return cD.concat("\n",eX);}cu.skipLastLine=(dF=function(eX){return dH(dG(eX));},function(eX){return dI(dF(eX));});cu.parseDateO=B.tryParseWith$1(function(eX){var eY,eZ;eY=0;return[(eZ=dz.TryParse(eX),eZ!=null&&eZ.$==1&&(eY=eZ.$0,true)),eY];});cu.parseIntO=B.tryParseWith$1(function(eX){var eY;eY=0;return[dA.TryParseInt32(eX,{get:function(){return eY;},set:function(eZ){eY=eZ;}}),eY];});cu.parseSingleO=B.tryParseWith$1(function(eX){var eY,eZ;eY=0;return[(eZ=a.Number(eX),a.isNaN(eZ)?false:(eY=eZ,true)),eY];});cu.parseDoubleO=B.tryParseWith$1(function(eX){var eY,eZ;eY=0;return[(eZ=a.Number(eX),a.isNaN(eZ)?false:(eY=eZ,true)),eY];});cu.parseGuidO=B.tryParseWith$1(function(eX){var eY;eY=null;return[cQ.TryParse(eX,{get:function(){return eY;},set:function(eZ){eY=eZ;}}),eY];});cu["|Date|_|"]=B.parseDateO$1();cu["|Int|_|"]=B.parseIntO$1();cu["|Single|_|"]=B.parseSingleO$1();cu["|Double|_|"]=B.parseDoubleO$1();cu["|Guid|_|"]=B.parseGuidO$1();dK=(dJ=1,[function(){dJ=dJ+1;return dJ;},function(eX){dJ=eX;}]);cu.setGeneration=dK[1];cu.getNextGeneration=dK[0];cu.defaultSnippet=Q.New(new P({$:0,$0:"00000000-0000-0000-0000-000000000000"}),"","",null,new cS.New$1(null),[],0);cu.tieFighter="|"+"-"+"|";cu.deserGuid=function(eX){return Z.ifUndef("00000000-0000-0000-0000-000000000000",eX);};function dL(eX){return Z.ifUndef(0,eX);}cu.serFloat=[function(eX){return(function(eY){return function(eZ){return eY(cC.prettyPrint(eZ));};}(a.id))(eX);},function(eX){return dL(a.id(eX));}];function dM(eX){return Z.ifUndef(0,eX);}cu.serInt=[function(eX){return(function(eY){return function(eZ){return eY(cC.prettyPrint(eZ));};}(a.id))(eX);},function(eX){return dM(a.id(eX));}];function dN(eX){return Z.ifUndef(false,eX);}cu.serBool=[function(eX){return(function(eY){return function(eZ){return eY(cC.prettyPrint(eZ));};}(a.id))(eX);},function(eX){return dN(a.id(eX));}];function dO(eX){return Z.ifUndef("",eX);}cu.serString=[function(eX){return c$.stringify(((dc.Id())())(eX));},function(eX){return dO(a.id(eX));}];cu.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";cu.observers=cG.T.Empty;cu.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";cu.init=dx.Create(function(){var eX,eY,eZ;eX=new _7.New$1();eY="wcomp-tabstrip";eZ=self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New;cV.log("defineWebComponent: "+eY);c9.setPrototypeOf(eZ.prototype,self.HTMLElement.prototype);c9.setPrototypeOf(eZ,self.HTMLElement);c9.setPrototypeOf(_7.Constructor$1.prototype,eZ.prototype);self.customElements.define(eY,_7.Constructor$1);});cu.layoutHorizontal=cB.Curried(function(eX,eY,eZ,e0,e1){return c2.get_Empty();},5);cu.layoutVertical=cB.Curried(function(eX,eY,eZ,e0,e1){return c2.get_Empty();},5);cu.loader=(dP=null,cH.Delay(function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cH.Bind(cH.FromContinuations(function(eX,eY){return self.require(["vs/editor/editor.main"],eX,eY);}),function(){return cH.Return(null);});}));cu.MessageBrokerId="<MessageBroker>";cu.MessageBrokerAddress=new bp({$:0,$0:bo.MessageBrokerId()});cu.id="FSharpStation"+a.String(dv.now());cu.rootDir=".";cu.srcDir=".";cH.Start((dQ=null,cH.Delay(function(){return cH.Bind((new dk.New()).Async("FSharpStation:FsRoot.FSharpStation+FStation.getRootDir:-447555547",[]),function(eX){b$.set_rootDir(eX+"/"+"..");b$.set_srcDir(eX+"/"+"..\\src");(((cB.Curried3(function(eY,eZ,e0){return eY("fileName = "+cC.toSafe(eZ)+"\\"+cC.toSafe(e0)+".fsx");}))(function(eY){cV.log(eY);}))(b$.srcDir()))(b$.id());return cH.Zero();});})),null);cu.annotationsV=cY.Create$1("");cu.outputMsgs=cY.Create$1("");cu.snippets=new dB.New$1(function(eX){return eX.snpId;});cu.hierarchy=cY.Create$1([]);cu.generation=cY.Create$1(5);cu.currentSnippetIdOV=cY.Create$1(null);cu.codeSnippetIdOV=cY.Create$1(null);cu.collapsedV=cY.Create$1(new cS.New$1(null));function dS(eX){var eY;eY=null;return dR.TryGetValue(eX,{get:function(){return eY;},set:function(eZ){eY=eZ;}})?{$:1,$0:eY}:null;}function dT(eX,eY){dR.set_Item(eX,eY);return eY;}function dU(eX,eY){var eZ;eZ=dS(eX);return eZ==null?dT(eX,eY(eX)):eZ.$0;}dV=(dR=new dC.New$5(),[[dS,function(eX){return function(eY){return dU(eX,eY);};}],function(){dR.Clear();}]);cu.predsCache=dV[0];cu.clearPreds=dV[1];function dX(eX){var eY;eY=null;return dW.TryGetValue(eX,{get:function(){return eY;},set:function(eZ){eY=eZ;}})?{$:1,$0:eY}:null;}function dY(eX,eY){dW.set_Item(eX,eY);return eY;}function dZ(eX,eY){var eZ;eZ=dX(eX);return eZ==null?dY(eX,eY(eX)):eZ.$0;}d0=(dW=new dC.New$5(),[[dX,function(eX){return function(eY){return dZ(eX,eY);};}],function(){dW.Clear();}]);cu.reducCache=d0[0];cu.clearReduc=d0[1];function d2(eX){var eY;eY=null;return d1.TryGetValue(eX,{get:function(){return eY;},set:function(eZ){eY=eZ;}})?{$:1,$0:eY}:null;}function d3(eX,eY){d1.set_Item(eX,eY);return eY;}function d4(eX,eY){var eZ;eZ=d2(eX);return eZ==null?d3(eX,eY(eX)):eZ.$0;}d5=(d1=new dC.New$5(),[[d2,function(eX){return function(eY){return d4(eX,eY);};}],function(){d1.Clear();}]);cu.parentCache=d5[0];cu.clearParent=d5[1];cu.getParentIdO=(d6=(ca.parentCache())[1],function(eX){return(d6(eX))(ca.getParentIdONotMemo);});cX.Sink(function(eX){var eY,eZ;if(eX!=null&&eX.$==1){eY=eX.$0;eZ=ca.codeSnippetIdOV().Get();eZ!=null&&eZ.$==1?(ca.iterReader(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_BarGreaterGreater(p.op_GreaterGreaterEquals(p.op_BarGreaterGreater(S.snippetORm(eZ.$0),function(e0){return e0==null?null:{$:1,$0:S.uniquePredsRm(e0.$0)};}),o.insertO),cT.toList),function(e0){return cG.collect(a.id,e0);}),function(e0){return cG.contains(eY,e0);}),function(e0){if(e0);else ca.codeSnippetIdOV().Set({$:1,$0:eY});})),ca.clearPredsCache()):ca.codeSnippetIdOV().Set({$:1,$0:eY});}},ca.currentSnippetIdOV().get_View());function d9(eX){return eX.id();}cX.Sink(function(eX){var eY;ca.clearPredsCache();eY=cF.ofSeq(cE.delay(function(){return cE.collect(function(eZ){return cE.append([ca.snippets().FindByKey(eZ)],cE.delay(function(){return cE.filter(function(e0){return ca.isDescendantOf(eZ,e0.snpId);},(ca.snippets())["var"].Get());}));},eX);}));ca.snippets().Set(eY);},(d7=cX.Map(function(eX){return cF.map(d9,eX);},ca.hierarchy().get_View()),(d8=[cY.Create$1(null)],(cX.Sink(function(eX){if(!cL.Equals(d8[0].Get(),eX))d8[0].Set(eX);},d7),d8[0].get_View()))));cu.CurrentSnippetIdW=cX.Map(function(eX){var eY;eY=S.defaultSnippet().snpId;return eX==null?eY:eX.$0;},ca.currentSnippetIdOV().get_View());function ea(eX){var eY;eY=S.defaultSnippet();return eX==null?eY:eX.$0;}function eb(eX){return ca.snippets().TryFindByKeyAsView(eX);}cu.currentSnippetW=cX.Map((d_=function(eX){return eX==null?null:a.id(eX.$0);},function(eX){return ea(d_(eX));}),cX.Bind((d$=function(eX){return eX==null?null:{$:1,$0:eb(eX.$0)};},function(eX){return Y.insertWO(d$(eX));}),ca.currentSnippetIdOV().get_View()));function ee(eX){var eY;eY=S.defaultSnippet();return eX==null?eY:eX.$0;}function ef(eX){return ca.snippets().TryFindByKeyAsView(eX);}cu.codeSnippetW=cX.Map((ec=function(eX){return eX==null?null:a.id(eX.$0);},function(eX){return ee(ec(eX));}),cX.Bind((ed=function(eX){return eX==null?null:{$:1,$0:ef(eX.$0)};},function(eX){return Y.insertWO(ed(eX));}),ca.codeSnippetIdOV().get_View()));cu.currentSnippetV=new dl.New(ca.currentSnippetW(),function(eX){ca.setSnippet(eX);});function eh(eX,eY){return[eX.id(),eY];}function ei(eX){function eY(e0){return U.listNodes(0,e0);}function eZ(e0){return ca.runReader(ca.handleError,e0);}return function(e0){return eZ(eY(e0));};}cu.getHierarchyW=cX.Map(cF.ofSeq,cX.Map(function(eX){return cE.map(function(eY){return eh(eY[0],eY[1]);},eX);},(eg=ca.hierarchy().get_View(),cX.Map2(function(eX,eY){return(ei(eX))(eY);},ca.collapsedV().get_View(),eg))));function el(eX,eY){var eZ;eZ=null;return cH.Delay(function(){return cH.Bind(cH.Sleep(350),function(){return cH.Return(ca.runReader(ca.handleError,S.fastCodeRm(ca.currentSnippetIdOV().Get(),ca.codeSnippetIdOV().Get())));});});}cu.codeAndStartsW=(ej=ca.codeSnippetW(),(ek=ca.snippets().v,(((cB.Curried3(cX.MapAsync2))(el))(ej))(ek)));cu.FsCodeW=cX.Map(function(eX){return eX[0];},ca.codeAndStartsW());cu.codeStartsW=cX.Map(function(eX){return eX[1];},ca.codeAndStartsW());cu.SaveAsClassW=cX.Map2(function(eX,eY){return cE.exists(function(eZ){return eZ.snpGeneration>eY;},eX)?"btn-primary":"";},ca.snippets().v,ca.generation().get_View());cu.currentPathW=cX.Map(function(eX){var eY;return ca.runReader(function(){return"";},(eY=o.fusion(),eY.Run(eY.Delay(function(){return eY.Bind(S.pathRm(eX.snpId),function(eZ){return eY.Bind(o.traverseSeq(S.snippetNameRm,new cG.T({$:1,$0:eX.snpId,$1:eZ})),function(e0){return eY.Return(cD.concat("/",cE.rev(e0)));});});}))));},ca.currentSnippetW());cu.currentLayoutDW=cX.Map(function(eX){var eY;return ca.runReader(function(){return null;},(eY=o.fusion(),eY.Run(eY.Delay(function(){function eZ(e0,e1){var e2,e3,e4,e5;e2=(e3=cD.SplitChars(cD.Trim(e1[0]),["\n"],0),cD.StartsWith(cF.get(e3,0),"\"")?[cM.array(e3,{$:1,$0:1},null),cF.get(e3,0)]:[e3,"\"\""]);e4=e2[1];e5=cE.mapi(function(e6,e7){var e8;e8=cD.StartsWith(e7,":")?cM.string(e7,{$:1,$0:1},null):(function(e9){return function(e_){return e9("button \"click=${FSharpStation.ButtonClick}\" "+cC.prettyPrint(e_));};}(a.id))(e7);return(((cB.Curried3(function(e9,e_,e$){return e9("btn"+a.String(e_)+" "+cC.toSafe(e$));}))(a.id))(e6))(e8);},cE.filter(function(e6){return cD.Trim(e6)!=="";},e2[0]));return["Snp_"+cD.Replace(a.String(e0.snpId.get_Id()),"-",""),cD.concat("\n",cG.ofSeq(cE.delay(function(){return cE.append(["editorButtons vertical 0-85-100 FStationLyt.menuEditor buttons"],cE.delay(function(){return cE.append(e5,cE.delay(function(){var e6,e7;return[(e6=cD.concat(" ",(e7=cG.ofSeq(cK.range(0,cE.length(e5)-1)),cE.map(function(e8){return function(e9){return e8("btn"+a.String(e9));};}(a.id),e7))),(((cB.Curried3(function(e8,e9,e_){return e8("buttons div "+cC.toSafe(e9)+" "+cC.toSafe(e_)+" ");}))(a.id))(e4))(e6))];}));}));})))];}return eY.Bind(p.op_BarGreaterGreater(S.propertyHierORm("Buttons",eX),function(e0){var e1;return e0==null?null:{$:1,$0:(e1=e0.$0,eZ(e1[0],e1[1]))};}),function(e0){function e1(e3,e4){var e5,e6,e7;e5=e4[0];return["Snp_"+cD.Replace(a.String(e3.snpId.get_Id()),"-",""),(e6=e0==null?null:{$:1,$0:(e7=e0.$0,(e7[0],cD.concat("\n",cG.ofArray([e5,e7[1]]))))},e6==null?e5:e6.$0)];}function e2(){return e0;}return eY.ReturnFrom(p.op_BarGreaterGreater(p.op_BarGreaterGreater(S.propertyHierORm("Layout",eX),function(e3){var e4;return e3==null?null:{$:1,$0:(e4=e3.$0,e1(e4[0],e4[1]))};}),function(e3){return h.bindNone(e2,e3);}));});}))));},ca.currentSnippetW());cu.currentLayoutJSDW=cX.Map(function(eX){function eY(eZ,e0){return[eZ.snpId,e0[0]];}return ca.runReader(function(){return null;},p.op_BarGreaterGreater(S.propertyHierORm("LayoutJS",eX),function(eZ){var e0;return eZ==null?null:{$:1,$0:(e0=eZ.$0,eY(e0[0],e0[1]))};}));},ca.currentSnippetW());cu.drag=cc.DragNone;cu.rootdir="..\\website";cu.TemplatesFileName="..\\website"+"\\Templates.html";((function(eX){return function(eY){return eX(cC.toSafe(eY));};}(function(eX){cV.log(eX);}))("..\\website\\Templates.html"));cu.startsV=cY.Create$1([]);cu.defaultStart=(em=[[P.get_Empty(),""],[0,1,0]],function(eX){return eX==null?em:eX.$0;});cu.fileName="none.fsx";cu.editorConfigO=null;cX.Sink(function(eX){var eY,eZ;try{eY=(eZ=cg.editorConfigO(),eZ==null?null:eZ.$0.editorO);(h.iter(function(e0){e0.setModel(cg.getSnippetModel(eX));b$.annotationsV().Set(b$.annotationsV().Get());}))(eY);}catch(e0){null;}},ca.CurrentSnippetIdW());cu.rexGuid$1="\\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";function ep(eX){return eX.$0;}function eq(eX){return new P({$:0,$0:eX});}cu.serSnippetId=(en=cF.head(cD.SplitChars((function(eX){return function(eY){return eX(cx.p(eY));};}(a.id))(eq("00000000-0000-0000-0000-000000000000")),[" "],0)),(eo=(function(eX){return function(eY){return eX(cC.prettyPrint(eY));};}(a.id))(en),[function(eX){var eY;eY=ep(eX);return(((cB.Curried3(function(eZ,e0,e1){return eZ("{"+cD.PadLeft(cC.toSafe(e0),10)+" :"+cC.prettyPrint(e1)+"}");}))(a.id))(eo))(eY);},function(eX){var eY;return eq((eY=eX[en],(Z.deserGuid())(eY)));}]));cu.serSnippet=(er=[(es=co.serSnippetId(),Z.serField("snpId",function(eX){return eX.snpId;},function(eX,eY){return Q.New(eX,eY.snpName,eY.snpContent,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},es[0],es[1])),(et=Z.serString(),Z.serField("snpName",function(eX){return eX.snpName;},function(eX,eY){return Q.New(eY.snpId,eX,eY.snpContent,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},et[0],et[1])),(eu=Z.serString(),Z.serField("snpContent",function(eX){return eX.snpContent;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eX,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},eu[0],eu[1])),(ev=(ew=co.serSnippetId(),Z.serOpt(ew[0],ew[1])),Z.serField("snpParentIdO",function(eX){return eX.snpParentIdO;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eY.snpContent,eX,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},ev[0],ev[1])),(ex=(ey=co.serSnippetId(),Z.serSet(ey[0],ey[1])),Z.serField("snpPredIds",function(eX){return eX.snpPredIds;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eY.snpContent,eY.snpParentIdO,eX,eY.snpProperties,eY.snpGeneration);},ex[0],ex[1])),(ez=(eA=(eB=Z.serString(),Z.serDup((Z.serString())[0],(Z.serString())[1],eB[0],eB[1])),Z.serArr(eA[0],eA[1])),Z.serField("snpProperties",function(eX){return eX.snpProperties;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eY.snpContent,eY.snpParentIdO,eY.snpPredIds,eX,eY.snpGeneration);},ez[0],ez[1])),(eC=Z.serInt(),Z.serField("snpGeneration",function(eX){return eX.snpGeneration;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eY.snpContent,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eX);},eC[0],eC[1]))],(eD=S.New("","",null),[function(eX){var eY;function eZ(e0,e1,e2){return(((cB.Curried3(function(e3,e4,e5){return e3(cC.prettyPrint(e4)+": "+cC.toSafe(e5));}))(a.id))(e0))(e1(eX));}eY=cD.concat(", ",cE.map(function(e0){return eZ(e0[0],e0[1],e0[2]);},er));return(function(e0){return function(e1){return e0("{"+cC.toSafe(e1)+"}");};}(a.id))(eY);},function(eX){return!eX?eD:cE.fold(function(eY,eZ){return(eZ[2](eY))(eX[eZ[0]]);},eD,er);}]));cu.serModel=(eE=[(eF=(eG=co.serSnippet(),Z.serArr(eG[0],eG[1])),Z.serField("snippets",function(eX){return eX.snippets;},function(eX,eY){return cp.New(eX,eY.generation,eY.collapsed);},eF[0],eF[1])),(eH=Z.serInt(),Z.serField("generation",function(eX){return eX.generation;},function(eX,eY){return cp.New(eY.snippets,eX,eY.collapsed);},eH[0],eH[1])),(eI=(eJ=co.serSnippetId(),Z.serSet(eJ[0],eJ[1])),Z.serField("collapsed",function(eX){return eX.collapsed;},function(eX,eY){return cp.New(eY.snippets,eY.generation,eX);},eI[0],eI[1]))],(eK=cp.New([],0,new cS.New$1(null)),[function(eX){var eY;function eZ(e0,e1,e2){return(((cB.Curried3(function(e3,e4,e5){return e3(cC.prettyPrint(e4)+": "+cC.toSafe(e5));}))(a.id))(e0))(e1(eX));}eY=cD.concat(", ",cE.map(function(e0){return eZ(e0[0],e0[1],e0[2]);},eE));return(function(e0){return function(e1){return e0("{"+cC.toSafe(e1)+"}");};}(a.id))(eY);},function(eX){return!eX?eK:cE.fold(function(eY,eZ){return(eZ[2](eY))(eX[eZ[0]]);},eK,eE);}]));cu.fileName$1=cY.Create$1("");cu.serSnippetId2=[function(eX){return(function(eY){return function(eZ){return eY(cC.prettyPrint(eZ));};}(a.id))(eX);},function(eX){var eY;return new P({$:0,$0:(eY=eX.Item,(Z.deserGuid())(eY))});}];cu.serSnippet2=(eL=[(eM=cr.serSnippetId2(),Z.serField("id",function(eX){return eX.snpId;},function(eX,eY){return Q.New(cL.Equals(eX,P.get_Empty())?new P({$:0,$0:cQ.NewGuid()}):eX,eY.snpName,eY.snpContent,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},eM[0],eM[1])),(eN=Z.serString(),Z.serField("name",function(eX){return eX.snpName;},function(eX,eY){return Q.New(eY.snpId,eX,eY.snpContent,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},eN[0],eN[1])),(eO=Z.serString(),Z.serField("content",function(eX){return eX.snpContent;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eX,eY.snpParentIdO,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},eO[0],eO[1])),(eP=(eQ=cr.serSnippetId2(),Z.serOpt(eQ[0],eQ[1])),Z.serField("parent",function(eX){return eX.snpParentIdO;},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eY.snpContent,cL.Equals(eX,{$:1,$0:P.get_Empty()})?null:eX,eY.snpPredIds,eY.snpProperties,eY.snpGeneration);},eP[0],eP[1])),(eR=(eS=cr.serSnippetId2(),Z.serArr(eS[0],eS[1])),Z.serField("predecessors",function(eX){return cF.ofSeq(eX.snpPredIds);},function(eX,eY){return Q.New(eY.snpId,eY.snpName,eY.snpContent,eY.snpParentIdO,new cS.New(eX),eY.snpProperties,eY.snpGeneration);},eR[0],eR[1]))],(eT=S.New("","",null),[function(eX){var eY;function eZ(e0,e1,e2){return(((cB.Curried3(function(e3,e4,e5){return e3(cC.prettyPrint(e4)+": "+cC.toSafe(e5));}))(a.id))(e0))(e1(eX));}eY=cD.concat(", ",cE.map(function(e0){return eZ(e0[0],e0[1],e0[2]);},eL));return(function(e0){return function(e1){return e0("{"+cC.toSafe(e1)+"}");};}(a.id))(eY);},function(eX){return!eX?eT:cE.fold(function(eY,eZ){return(eZ[2](eY))(eX[eZ[0]]);},eT,eL);}]));cu.serSnippets=(eU=cr.serSnippet2(),Z.serArr(eU[0],eU[1]));cu.FStationLyt="FStationLyt";eV=ca.codeAndStartsW();cX.Sink(c.delayed(300,function(eX){cg.parse(eX[0],eX[1]);}),eV);cX.Sink(function(eX){self.onbeforeunload=eX!==""?function(eY){eY.returnValue="Changes you made may not be saved.";}:null;},ca.SaveAsClassW());cu.wsStationClient=new bA.New(b$.id(),null,null);cH.Start((eW=null,cH.Delay(function(){return cH.Bind(cH.Sleep(1000),function(){return cH.While(function(){return true;},cH.Delay(function(){return cH.TryWith(cH.Delay(function(){var eX,eY,eZ,e0,e1,e2;function e3(e7){return(cw.j$4())(c$.parse(e7));}function e4(e7){return c$.stringify((cv.j$4())(e7));}function e5(e7){return cH.Return(e7);}function e6(e7){cK.FailWith(e7);}eX=ct.wsStationClient();eX.payloadProcessorO={$:1,$0:(eY=function(e7){return ct.processMessage(e3(e7));},(eZ=(e0=function(e7){return e5(e4(e7));},function(e7){return cH.Bind(e7,e0);}),function(e7){return eZ(eY(e7));}))};w.iterA(function(e7){return e6(a.String(e7));},a.ignore,eX.sendAndForget(bo.msgType(br.MsgInformation,(e1=bo.MessageBrokerAddress(),(e2=c$.stringify(((dc.Id())())("Registering Processor")),bu.New(new bp({$:0,$0:""}),e1,br.MsgRequest,"",cQ.NewGuid(),e2,bt.NoReply))))));return cH.Bind(cH.Sleep(60000),function(){return cH.Return(null);});}),function(eX){((function(eY){return function(eZ){return eY(cC.toSafe(eZ));};}(function(eY){cV.log(eY);}))(eX.message));return cH.Bind(cH.Sleep(1000),function(){return cH.Return(null);});});}));});})),null);};cv.j$4=function(){return cv._v$4?cv._v$4:cv._v$4=(dc.EncodeUnion(void 0,"$",[[0,[["$0","ResultValue",cv.j$6,0]]],[1,[["$0","ErrorValue",cv.j$5,0]]]]))();};cw.j$5=function(){return cw._v$5?cw._v$5:cw._v$5=(dc.DecodeUnion(void 0,"$",[[0,[["$0","Item",cw.j$6,0]]],[1,[["$0","Item",dc.DecodeArray(dc.Id()),0]]]]))();};cw.j$4=function(){return cw._v$4?cw._v$4:cw._v$4=(dc.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",dc.DecodeArray(cw.j$5),0]]],[2,[["$0","Item",cw.j$5,0]]],[3,[["$0","Item",cw.j$5,0]]],[4,[["$0","Item",dc.DecodeArray(dc.Id()),0]]],[5,[]]]))();};cw.j$6=function(){return cw._v$6?cw._v$6:cw._v$6=(dc.DecodeUnion(P,"$",[[0,[["$0","Item",dc.Id(),0]]]]))();};cx.p=function(dE){return"SnippetId "+cC.prettyPrint(dE.$0);};cv.j$5=function(){return cv._v$5?cv._v$5:cv._v$5=(dc.EncodeUnion(d,"$",[[0,[]],[1,[["$0","Item",dc.Id(),0]]],[2,[["$0","Item",dc.Id(),0]]],[3,[["$0","Item",dc.Id(),0]]],[4,[["$0","Item",dc.Id(),0]]],[5,[["$0","Item1",dc.Id(),0],["$1","Item2",dc.Id(),0]]],[6,[["$0","Item",dc.EncodeArray(cv.j$5),0]]]]))();};cv.j$6=function(){return cv._v$6?cv._v$6:cv._v$6=(dc.EncodeUnion(void 0,"$",[[0,[["$0","Item",dc.Id(),0]]],[1,[["$0","Item",dc.EncodeArray(cv.j$7),0]]]]))();};cv.j$7=function(){return cv._v$7?cv._v$7:cv._v$7=(dc.EncodeRecord(void 0,[["snpId",cv.j$8,0],["snpName",dc.Id(),0],["snpContent",dc.Id(),0],["snpParentIdO",cv.j$8,1],["snpPredIds",dc.EncodeSet(cv.j$8),0],["snpProperties",dc.EncodeArray(dc.EncodeTuple([dc.Id(),dc.Id()])),0],["snpGeneration",dc.Id(),0]]))();};cv.j$8=function(){return cv._v$8?cv._v$8:cv._v$8=(dc.EncodeUnion(P,"$",[[0,[["$0","Item",dc.Id(),0]]]]))();};cy.snippetlist=function(dE){c7.LoadLocalTemplates("templates");return dE?c7.NamedTemplate("templates",{$:1,$0:"snippetlist"},dE):void 0;};cy.snippet=function(dE){c7.LoadLocalTemplates("templates");return dE?c7.NamedTemplate("templates",{$:1,$0:"snippet"},dE):void 0;};cy.propertytable=function(dE){c7.LoadLocalTemplates("templates");return dE?c7.NamedTemplate("templates",{$:1,$0:"propertytable"},dE):void 0;};cy.property=function(dE){c7.LoadLocalTemplates("templates");return dE?c7.NamedTemplate("templates",{$:1,$0:"property"},dE):void 0;};cy.layout=function(dE){dD.fixedsplitterhor();dD.fixedsplitterver();c7.LoadLocalTemplates("templates");return dE?c7.NamedTemplate("templates",{$:1,$0:"layout"},dE):void 0;};cy.buttonsright=function(dE){c7.LoadLocalTemplates("templates");return dE?c7.NamedTemplate("templates",{$:1,$0:"buttonsright"},dE):void 0;};cx.p$1=function(dE){return dE.$==6?"RMessages "+cC.printArray(function(dF){return cx.p$1(dF);},dE.$0):dE.$==5?"ExceptMsg ("+cC.prettyPrint(dE.$0)+", "+cC.prettyPrint(dE.$1)+")":dE.$==4?"Message "+cC.prettyPrint(dE.$0):dE.$==3?"Info "+cC.prettyPrint(dE.$0):dE.$==2?"Warning "+cC.prettyPrint(dE.$0):dE.$==1?"ErrorMsg "+cC.prettyPrint(dE.$0):"NoMsg";};cx.p$2=function(dE){return dE.$==1?"RefSnippetPath "+cC.printArray(cC.prettyPrint,dE.$0):"RefSnippetId "+cx.p(dE.$0);};cx.p$3=function(dE){return dE.$==5?"MsgGetUrl":dE.$==4?"MsgAction "+cC.printArray(cC.prettyPrint,dE.$0):dE.$==3?"MsgGetPredecessors "+cx.p$2(dE.$0):dE.$==2?"MsgGetCode "+cx.p$2(dE.$0):dE.$==1?"MsgGetSnippets "+cC.printArray(function(dF){return cx.p$2(dF);},dE.$0):"MsgGetId";};cv.j$9=function(){return cv._v$9?cv._v$9:cv._v$9=(dc.EncodeUnion(void 0,"type",[["BRGetConnections",[]],["BRGetProcessId",[]]]))();};cx.p$4=function(dE){return dE.$==2?"BRString "+cC.prettyPrint(dE.$0):dE.$==1?"BRPid "+cC.prettyPrint(dE.$0):"BRConnections "+cC.printArray(cC.prettyPrint,dE.$0);};cw.j$7=function(){return cw._v$7?cw._v$7:cw._v$7=(dc.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",dc.DecodeArray(dc.Id()),0]]],["BRPid",[["$0","Item",dc.Id(),0]]],["BRString",[["$0","Item",dc.Id(),0]]]]))();};cw.j$8=function(){return cw._v$8?cw._v$8:cw._v$8=(dc.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",cw.j$1,0]]],["BMWebSocketError",[["$0","Item",dc.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",cw.j$2,0]]],["BMUnexpectedResponse",[["$0","Item",dc.Id(),0]]]]))();};cx.p$7=function(dE){return dE.$==2?"Receiver":dE.$==1?"Broker":"NoReply";};cx.p$6=function(dE){return dE.$==5?"MsgRequestForEcho":dE.$==4?"MsgRequestForId":dE.$==3?"MsgFromBroker":dE.$==2?"MsgReply":dE.$==1?"MsgRequest":"MsgInformation";};cz.p=function(dE){return"{"+("from = "+cx.p$5(dE.from))+"; "+("destination = "+cx.p$5(dE.destination))+"; "+("msgType = "+cx.p$6(dE.msgType))+"; "+("subtype = "+cC.prettyPrint(dE.subtype))+"; "+("id = "+cC.prettyPrint(dE.id))+"; "+("payload = "+cC.prettyPrint(dE.payload))+"; "+("replier = "+cx.p$7(dE.replier))+"}";};cx.p$5=function(dE){return"Address "+cC.prettyPrint(dE.$0);};cx.p$8=function(dE){return dE.$==3?"Close":dE.$==2?"Open":dE.$==1?"Error":"Message "+cz.p(dE.$0);};cx.p$9=function(dE){return dE.$==6?"RMessages "+cC.printArray(function(dF){return cx.p$9(dF);},dE.$0):dE.$==5?"ExceptMsg ("+cC.prettyPrint(dE.$0)+", "+cC.prettyPrint(dE.$1)+")":dE.$==4?"Message "+cC.printArray(function(dF){return cx.p$10(dF);},dE.$0):dE.$==3?"Info "+cC.prettyPrint(dE.$0):dE.$==2?"Warning "+cC.prettyPrint(dE.$0):dE.$==1?"ErrorMsg "+cC.prettyPrint(dE.$0):"NoMsg";};cx.p$10=function(dE){return dE.$==17?"KMultiple "+cC.printArray(function(dF){return cx.p$10(dF);},dE.$0):dE.$==16?"KUnionCase "+cz.p$22(dE.$0):dE.$==15?"KNamespaces "+cz.p$19(dE.$0):dE.$==14?"KCompilerLocation "+cz.p$18(dE.$0):dE.$==13?"KSignatureData "+cz.p$16(dE.$0):dE.$==12?"KTypeSig "+cC.prettyPrint(dE.$0):dE.$==11?"KToolTip "+cC.printArray(function(dF){return cC.printArray(function(dG){return cz.p$3(dG);},dF);},dE.$0):dE.$==10?"KDeclarations "+cC.printArray(function(dF){return cz.p$14(dF);},dE.$0):dE.$==9?"KFindDecl "+cz.p$13(dE.$0):dE.$==8?"KColorizations "+cC.printList(function(dF){return cz.p$12(dF);},dE.$0):dE.$==7?"KErrors "+cz.p$10(dE.$0):dE.$==6?"KMethod "+cz.p$7(dE.$0):dE.$==5?"KHelp "+cC.prettyPrint(dE.$0):dE.$==4?"KSymbolUse "+cz.p$5(dE.$0):dE.$==3?"KCompletion "+cC.printArray(function(dF){return cz.p$4(dF);},dE.$0):dE.$==2?"KHelpText "+cz.p$2(dE.$0):dE.$==1?"KError "+cz.p$1(dE.$0):"KInfo "+cC.prettyPrint(dE.$0);};cz.p$22=function(dE){return"{"+("Text = "+cC.prettyPrint(dE.Text))+"}";};cz.p$21=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("Qualifier = "+cC.prettyPrint(dE.Qualifier))+"}";};cz.p$20=function(dE){return"{"+("Namespace = "+cC.prettyPrint(dE.Namespace))+"; "+("Name = "+cC.prettyPrint(dE.Name))+"; "+("Type = "+cC.prettyPrint(dE.Type))+"; "+("Line = "+cC.prettyPrint(dE.Line))+"; "+("Column = "+cC.prettyPrint(dE.Column))+"; "+("MultipleNames = "+cC.prettyPrint(dE.MultipleNames))+"}";};cz.p$18=function(dE){return"{"+("Fsc = "+cC.prettyPrint(dE.Fsc))+"; "+("Fsi = "+cC.prettyPrint(dE.Fsi))+"; "+("MSBuild = "+cC.prettyPrint(dE.MSBuild))+"}";};cz.p$16=function(dE){return"{"+("OutputType = "+cC.prettyPrint(dE.OutputType))+"; "+("Parameters = "+cC.printList(function(dF){return cC.printList(function(dG){return cz.p$17(dG);},dF);},dE.Parameters))+"}";};cz.p$19=function(dE){return"{"+("Opens = "+cC.printArray(function(dF){return cz.p$20(dF);},dE.Opens))+"; "+("Qualifies = "+cC.printArray(function(dF){return cz.p$21(dF);},dE.Qualifies))+"; "+("Word = "+cC.prettyPrint(dE.Word))+"}";};cz.p$17=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("Type = "+cC.prettyPrint(dE.Type))+"}";};cz.p$14=function(dE){return"{"+("Declaration = "+cz.p$15(dE.Declaration))+"; "+("Nested = "+cC.printArray(function(dF){return cz.p$15(dF);},dE.Nested))+"}";};cz.p$13=function(dE){return"{"+("File = "+cC.prettyPrint(dE.File))+"; "+("Line = "+cC.prettyPrint(dE.Line))+"; "+("Column = "+cC.prettyPrint(dE.Column))+"}";};cz.p$15=function(dE){return"{"+("UniqueName = "+cC.prettyPrint(dE.UniqueName))+"; "+("Name = "+cC.prettyPrint(dE.Name))+"; "+("Glyph = "+cC.prettyPrint(dE.Glyph))+"; "+("GlyphChar = "+cC.prettyPrint(dE.GlyphChar))+"; "+("IsTopLevel = "+cC.prettyPrint(dE.IsTopLevel))+"; "+("File = "+cC.prettyPrint(dE.File))+"; "+("EnclosingEntity = "+cC.prettyPrint(dE.EnclosingEntity))+"; "+("IsAbstract = "+cC.prettyPrint(dE.IsAbstract))+"}";};cz.p$12=function(dE){return"{"+("Kind = "+cC.prettyPrint(dE.Kind))+"}";};cz.p$10=function(dE){return"{"+("File = "+cC.prettyPrint(dE.File))+"; "+("Errors = "+cC.printArray(function(dF){return cz.p$11(dF);},dE.Errors))+"}";};cz.p$11=function(dE){return"{"+("FileName = "+cC.prettyPrint(dE.FileName))+"; "+("StartLine = "+cC.prettyPrint(dE.StartLine))+"; "+("EndLine = "+cC.prettyPrint(dE.EndLine))+"; "+("StartColumn = "+cC.prettyPrint(dE.StartColumn))+"; "+("EndColumn = "+cC.prettyPrint(dE.EndColumn))+"; "+("Severity = "+cC.prettyPrint(dE.Severity))+"; "+("Message = "+cC.prettyPrint(dE.Message))+"; "+("Subcategory = "+cC.prettyPrint(dE.Subcategory))+"}";};cz.p$7=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("CurrentParameter = "+cC.prettyPrint(dE.CurrentParameter))+"; "+("Overloads = "+cC.printList(function(dF){return cz.p$8(dF);},dE.Overloads))+"}";};cz.p$8=function(dE){return"{"+("Tip = "+cC.printList(function(dF){return cC.printList(function(dG){return cz.p$3(dG);},dF);},dE.Tip))+"; "+("TypeText = "+cC.prettyPrint(dE.TypeText))+"; "+("Parameters = "+cC.printList(function(dF){return cz.p$9(dF);},dE.Parameters))+"; "+("IsStaticArguments = "+cC.prettyPrint(dE.IsStaticArguments))+"}";};cz.p$9=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("CanonicalTypeTextForSorting = "+cC.prettyPrint(dE.CanonicalTypeTextForSorting))+"; "+("Display = "+cC.prettyPrint(dE.Display))+"; "+("Description = "+cC.prettyPrint(dE.Description))+"}";};cz.p$5=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("Uses = "+cC.printList(function(dF){return cz.p$6(dF);},dE.Uses))+"}";};cz.p$6=function(dE){return"{"+("FileName = "+cC.prettyPrint(dE.FileName))+"; "+("StartLine = "+cC.prettyPrint(dE.StartLine))+"; "+("StartColumn = "+cC.prettyPrint(dE.StartColumn))+"; "+("EndLine = "+cC.prettyPrint(dE.EndLine))+"; "+("EndColumn = "+cC.prettyPrint(dE.EndColumn))+"; "+("IsFromDefinition = "+cC.prettyPrint(dE.IsFromDefinition))+"; "+("IsFromAttribute = "+cC.prettyPrint(dE.IsFromAttribute))+"; "+("IsFromComputationExpression = "+cC.prettyPrint(dE.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+cC.prettyPrint(dE.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+cC.prettyPrint(dE.IsFromPattern))+"; "+("IsFromType = "+cC.prettyPrint(dE.IsFromType))+"}";};cz.p$4=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("ReplacementText = "+cC.prettyPrint(dE.ReplacementText))+"; "+("Glyph = "+cC.prettyPrint(dE.Glyph))+"; "+("GlyphChar = "+cC.prettyPrint(dE.GlyphChar))+"}";};cz.p$2=function(dE){return"{"+("Name = "+cC.prettyPrint(dE.Name))+"; "+("Overloads = "+cC.printList(function(dF){return cC.printList(function(dG){return cz.p$3(dG);},dF);},dE.Overloads))+"}";};cz.p$3=function(dE){return"{"+("Signature = "+cC.prettyPrint(dE.Signature))+"; "+("Comment = "+cC.prettyPrint(dE.Comment))+"; "+("Footer = "+cC.prettyPrint(dE.Footer))+"}";};cz.p$1=function(dE){return"{"+("Code = "+cC.prettyPrint(dE.Code))+"; "+("Message = "+cC.prettyPrint(dE.Message))+"}";};cv.j$1=function(){return cv._v$1?cv._v$1:cv._v$1=(dc.EncodeUnion(bp,"$",[[0,[["$0","address",dc.Id(),0]]]]))();};cv.j$2=function(){return cv._v$2?cv._v$2:cv._v$2=(dc.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cv.j$3=function(){return cv._v$3?cv._v$3:cv._v$3=(dc.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cv.j=function(){return cv._v?cv._v:cv._v=(dc.EncodeRecord(void 0,[["from",cv.j$1,0],["destination",cv.j$1,0],["msgType",cv.j$2,0],["subtype",dc.Id(),0],["id",dc.Id(),0],["payload",dc.Id(),0],["replier",cv.j$3,0]]))();};cw.j$1=function(){return cw._v$1?cw._v$1:cw._v$1=(dc.DecodeUnion(bp,"$",[[0,[["$0","address",dc.Id(),0]]]]))();};cw.j$2=function(){return cw._v$2?cw._v$2:cw._v$2=(dc.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cw.j$3=function(){return cw._v$3?cw._v$3:cw._v$3=(dc.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cw.j=function(){return cw._v?cw._v:cw._v=(dc.DecodeRecord(void 0,[["from",cw.j$1,0],["destination",cw.j$1,0],["msgType",cw.j$2,0],["subtype",dc.Id(),0],["id",dc.Id(),0],["payload",dc.Id(),0],["replier",cw.j$3,0]]))();};}());

//# sourceMappingURL=FSharpStation.min.map
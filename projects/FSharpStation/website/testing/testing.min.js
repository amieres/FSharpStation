function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq;a=self;b=a.FsRoot=a.FsRoot||{};c=b.LibraryJS=b.LibraryJS||{};d=c.WebComponent=c.WebComponent||{};e=d.WcTabStrip=d.WcTabStrip||{};f=a.WebSharper=a.WebSharper||{};g=f.Obj=f.Obj||{};h=e.WcTabStripT=e.WcTabStripT||{};i=d.WcSplitter=d.WcSplitter||{};j=i.WcSplitterT=i.WcSplitterT||{};k=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};l=f.Operators=f.Operators||{};m=f.UI=f.UI||{};n=m.HtmlModule=m.HtmlModule||{};o=n.attr=n.attr||{};p=f.Utils=f.Utils||{};q=f.Seq=f.Seq||{};r=c.Hoverable=c.Hoverable||{};s=r.Hoverable=r.Hoverable||{};t=m.View=m.View||{};u=m.Var=m.Var||{};v=m.Doc=m.Doc||{};w=f.List=f.List||{};x=w.T=w.T||{};y=f.Numeric=f.Numeric||{};z=m.Var$1=m.Var$1||{};A=f.JavaScript=f.JavaScript||{};B=A.Pervasives=A.Pervasives||{};C=a.EventTarget;D=a.Node;E=A.JS=A.JS||{};F=f.Unchecked=f.Unchecked||{};G=f.Arrays=f.Arrays||{};H=b.Library=b.Library||{};I=a.Event;J=a.UIEvent;K=f.Option=f.Option||{};L=c.ResizeObserver=c.ResizeObserver||{};M=H.Monads=H.Monads||{};N=M.Result=M.Result||{};O=N.Builder=N.Builder||{};P=M.AsyncResultBuilder=M.AsyncResultBuilder||{};Q=M.AsyncResultBuilderP=M.AsyncResultBuilderP||{};R=M.ReaderMonads=M.ReaderMonads||{};S=R.ReaderMBasic=R.ReaderMBasic||{};T=S.Builder=S.Builder||{};U=R.ReaderMResult=R.ReaderMResult||{};V=U.Builder=U.Builder||{};W=R.ReaderMAsyncResult=R.ReaderMAsyncResult||{};X=W.Builder=W.Builder||{};Y=H.String=H.String||{};Z=f.Strings=f.Strings||{};_0=f.Slice=f.Slice||{};_1=H.ParseO=H.ParseO||{};_2=a.System=a.System||{};_3=_2.Guid=_2.Guid||{};_4=H.SnippetModule=H.SnippetModule||{};_5=H.Snippet=H.Snippet||{};_6=H.SnippetId=H.SnippetId||{};_7=H.SnippetCollection=H.SnippetCollection||{};_8=c.Serializer=c.Serializer||{};_9=f.Json=f.Json||{};_=f.ClientSideJson=f.ClientSideJson||{};$=_.Provider=_.Provider||{};ba=f.Lazy=f.Lazy||{};bb=c.LoadFiles=c.LoadFiles||{};bc=c.Monaco=c.Monaco||{};bd=bc.Editor=bc.Editor||{};be=b.Library2=b.Library2||{};bf=be.WebSockets=be.WebSockets||{};bg=bf.Address=bf.Address||{};bh=b.FSharpStation=b.FSharpStation||{};bi=bh.FStation=bh.FStation||{};bj=f.Remoting=f.Remoting||{};bk=bj.AjaxRemotingProvider=bj.AjaxRemotingProvider||{};bl=m.ListModel=m.ListModel||{};bm=bh.Snippets=bh.Snippets||{};bn=U.Operators=U.Operators||{};bo=c.View=c.View||{};bp=H.TreeReader=H.TreeReader||{};bq=bh.DragDrop=bh.DragDrop||{};br=bq.DragInfo=bq.DragInfo||{};bs=bh.Monaco=bh.Monaco||{};bt=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};bu=a.testing_JsonEncoder=a.testing_JsonEncoder||{};bv=a.testing_JsonDecoder=a.testing_JsonDecoder||{};bw=a.GeneratedPrintf=a.GeneratedPrintf||{};bx=bh.Serializer=bh.Serializer||{};by=bx.Model=bx.Model||{};bz=bh.Importer=bh.Importer||{};bA=f.Collections=f.Collections||{};bB=bA.FSharpSet=bA.FSharpSet||{};bC=a.WindowOrWorkerGlobalScope;bD=bf.WSMessagingClient=bf.WSMessagingClient||{};bE=bh.Messaging=bh.Messaging||{};bF=H.ResultMessage=H.ResultMessage||{};bG=m.AttrProxy=m.AttrProxy||{};bH=f.Enumerator=f.Enumerator||{};bI=m.Elt=m.Elt||{};bJ=m.AttrModule=m.AttrModule||{};bK=m.Snap=m.Snap||{};bL=bH.T=bH.T||{};bM=m.DomUtility=m.DomUtility||{};bN=m.ConcreteVar=m.ConcreteVar||{};bO=m.Client=m.Client||{};bP=bO.Templates=bO.Templates||{};bQ=f.CancellationTokenSource=f.CancellationTokenSource||{};bR=f.DateUtil=f.DateUtil||{};bS=bA.BalancedTree=bA.BalancedTree||{};bT=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};bU=bT.LazyRecord=bT.LazyRecord||{};bV=f.Concurrency=f.Concurrency||{};bW=bA.Dictionary=bA.Dictionary||{};bX=m.Abbrev=m.Abbrev||{};bY=bX.Async=bX.Async||{};bZ=a.Object;b0=m.FromView=m.FromView||{};b1=H.FsCodeModule=H.FsCodeModule||{};b2=be.FsAutoComplete=be.FsAutoComplete||{};b3=b2.Calls=b2.Calls||{};b4=M.AsyncResult=M.AsyncResult||{};b5=bf.MessageType=bf.MessageType||{};b6=H.Hole=H.Hole||{};b7=bh.MainProgram=bh.MainProgram||{};b8=m.Attrs=m.Attrs||{};b9=m.Array=m.Array||{};b_=m.Docs=m.Docs||{};b$=bX.Fresh=bX.Fresh||{};ca=a.Error;cb=f.AggregateException=f.AggregateException||{};cc=bV.AsyncBody=bV.AsyncBody||{};cd=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};ce=bV.CT=bV.CT||{};cf=m.Storage=m.Storage||{};cg=bS.Tree=bS.Tree||{};ch=bA.DictionaryUtil=bA.DictionaryUtil||{};ci=f.Result=f.Result||{};cj=bf.ReplyHandler=bf.ReplyHandler||{};ck=cj.Handler=cj.Handler||{};cl=f.Control=f.Control||{};cm=cl.MailboxProcessor=cl.MailboxProcessor||{};cn=bf.MessageGeneric=bf.MessageGeneric||{};co=H.Mailbox=H.Mailbox||{};cp=f.Owin=f.Owin||{};cq=cp.WebSocket=cp.WebSocket||{};cr=cq.Client=cq.Client||{};cs=bf.Replier=bf.Replier||{};ct=cq.Endpoint=cq.Endpoint||{};cu=cq.JsonEncoding=cq.JsonEncoding||{};cv=cr.WebSocketServer=cr.WebSocketServer||{};cw=m.Updates=m.Updates||{};cx=m.DynamicAttrNode=m.DynamicAttrNode||{};cy=m.DocElemNode=m.DocElemNode||{};cz=a.CharacterData;cA=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cB=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};cC=bA.HashSet=bA.HashSet||{};cD=m.An=m.An||{};cE=bO.Settings=bO.Settings||{};cF=bX.Mailbox=bX.Mailbox||{};cG=bV.Scheduler=bV.Scheduler||{};cH=cf.ArrayStorage=cf.ArrayStorage||{};cI=f.OperationCanceledException=f.OperationCanceledException||{};cJ=cl.FSharpEvent=cl.FSharpEvent||{};cK=bA.LinkedList=bA.LinkedList||{};cL=bA.Map=bA.Map||{};cM=cr.WithEncoding=cr.WithEncoding||{};cN=bO.Attrs=bO.Attrs||{};cO=cN.Dyn=cN.Dyn||{};cP=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cQ=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};cR=bP.Prepare=bP.Prepare||{};cS=bA.KeyCollection=bA.KeyCollection||{};cT=bO.Docs=bO.Docs||{};cU=cT.RunState=cT.RunState||{};cV=cT.NodeSet=cT.NodeSet||{};cW=m.Anims=m.Anims||{};cX=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cY=f.FormatException=f.FormatException||{};cZ=b1.PreproDirective=b1.PreproDirective||{};c0=cl.Event=cl.Event||{};c1=c0.Event=c0.Event||{};c2=bA.FSharpMap=bA.FSharpMap||{};c3=f.TimeoutException=f.TimeoutException||{};c4=f.Queue=f.Queue||{};c5=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};c6=m.AppendList=m.AppendList||{};c7=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};c8=bA.List=bA.List||{};c9=bA.Pair=bA.Pair||{};c_=bA.MapUtil=bA.MapUtil||{};c$=cq.Async=cq.Async||{};da=cr.Message=cr.Message||{};db=m.Easing=m.Easing||{};dc=bX.HashSet=bX.HashSet||{};dd=bj.XhrProvider=bj.XhrProvider||{};de=bA.LinkedListEnumerator=bA.LinkedListEnumerator||{};df=bA.HashSetUtil=bA.HashSetUtil||{};dg=cT.DomNodes=cT.DomNodes||{};dh=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};di=a.IntelliFactory;dj=di&&di.Runtime;dk=a.Reflect;dl=a.console;dm=a.JSON;dn=a.Date;_do=a.Math;dp=a.location;dq=a.jQuery;e.css$1=function(){k.$cctor();return k.css;};e.tabStrip$1=function(dr,ds,dt,du,dv){var dw;dw=v.Element("div",[bG.Create("class",(((dj.Curried3(function(dx,dy,dz){return dx("tab-strip "+p.toSafe(dy)+" "+p.toSafe(dz));}))(a.id))(ds?"top":"bottom"))(dt?"horizontal":"vertical"))],w.ofSeq(q.delay(function(){return q.collect(function(dx){var dy;dy=dx[0];return[s.New$3().Content(v.Element("div",[bJ.Dynamic("class",t.Map(function(dz){return"tab"+(dz===dy+1?" selected":"");},dr.get_View())),bG.Create("draggable","true"),bG.HandlerImpl("click",function(){return function(){return dr.Set(dy+1);};})],[v.TextNode(dx[1][0])]))];},q.indexed(du));})));return v.Element("div",[bG.Create("class","tab-panel")],w.ofSeq(q.delay(function(){return q.append(ds?[dw]:[],q.delay(function(){return q.append([v.Element("div",[bG.Create("class","tab-content")],[dv])],q.delay(function(){return q.append(!ds?[dw]:[],q.delay(function(){return q.append([v.Element("style",x.Empty,w.ofArray([v.TextNode(e.css$1())]))],q.delay(function(){return[v.Element("style",x.Empty,w.ofArray([v.TextView(t.Map(function(dx){return function(dy){return dx("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(dy)+")) { display: grid }\r\n                                           ");};}(a.id),dr.get_View()))]))];}));}));}));}));})));};e.init$1=function(){k.$cctor();return k.init;};g=f.Obj=dj.Class({Equals:function(dr){return this===dr;},GetHashCode:function(){return -1;}},null,g);g.New=dj.Ctor(function(){},g);h=e.WcTabStripT=dj.Class({connectedCallback:function(){var dr,ds,dt,du;function dv(){var dw,dx,dy;dx=!ds.hasAttribute("bottom");dy=w.ofSeq(q.delay(function(){return q.collect(function(dz){var dA;dA=ds.childNodes[dz-1];return F.Equals(dA.nodeType,D.ELEMENT_NODE)?[[dA.hasAttribute("tabname")?dA.getAttribute("tabname"):(function(dB){return function(dC){return dB("Tab "+a.String(dC));};}(a.id))(dz),dA]]:[];},l.range(1,ds.childNodes.length));}));while(du.childNodes.length>0)du.removeChild(du.lastChild);dw=e.tabStrip$1(dr.selected,dx,true,dy,v.Element("slot",x.Empty,x.Empty));bP.LoadLocalTemplates("");v.Run(du,dw);}dr=this;!this.added?(ds=this,dt=ds.attachShadow({mode:"open"}),du=self.document.createElement("div"),dt.appendChild(du),dv(),ds.addEventListener("DOMSubtreeModified",H.delayed$1(50,dv)),this.added=true):void 0;}},g,h);h.Constructor$1=function(){var dr,ds;dr=(ds=dk.construct(self.HTMLElement,[],this.__proto__.constructor),ds);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dr);return dr;};h.New$1=dj.Ctor(function(){g.New.call(this);this.added=false;this.selected=z.Create$1(1);(function(dr){return dr("WcTabStripT initializer");}(function(dr){dl.log(dr);}));},h);i.set_layoutHorizontal$1=function(dr){k.$cctor();k.layoutHorizontal=dr;};i.layoutHorizontal$1=function(){k.$cctor();return k.layoutHorizontal;};i.set_layoutVertical$1=function(dr){k.$cctor();k.layoutVertical=dr;};i.layoutVertical$1=function(){k.$cctor();return k.layoutVertical;};i.init$1=function(dr,ds){var dt,du,dv;dt=new j.New$1();i.set_layoutHorizontal$1(dr);i.set_layoutVertical$1(ds);du="wcomp-splitter";dv=self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New;dl.log("defineWebComponent: "+du);bZ.setPrototypeOf(dv.prototype,self.HTMLElement.prototype);bZ.setPrototypeOf(dv,self.HTMLElement);bZ.setPrototypeOf(j.Constructor$1.prototype,dv.prototype);self.customElements.define(du,j.Constructor$1);};j=i.WcSplitterT=dj.Class({connectedCallback:function(){var dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG;function dH(dP){var dQ,dR,dS,dT;dQ=dy?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];dR=a.parseFloat("0"+a.jQuery(dP.parentElement.parentElement).css(dQ[0]));dS=a.parseFloat("0"+a.jQuery(dP.parentElement.parentElement).css(dQ[1]));dB.Set(a.parseFloat("0"+a.jQuery(dP.parentElement.parentElement).css(dQ[2])));dA[0]=dR+dS;dT=dr.getBoundingClientRect();return dy?dx?[dT.width,dT.height]:[-dT.width,dT.height]:dx?[dT.height,dT.width]:[-dT.height,dT.width];}function dI(dP){return dy?dP.clientX:dP.clientY;}function dJ(dP){var dQ,dR;dQ=(dI(dP)-dE[0])*100/dz[0][0]+dD[0];dw.Set((dR=F.Compare(du,dQ)===1?du:dQ,F.Compare(dv,dR)===-1?dv:dR));}function dK(){if(dC[0]){dC[0]=false;self.removeEventListener("mousemove",dJ,false);self.removeEventListener("mouseup",dK,false);}}function dL(dP){var dQ,dR;if(!dC[0]){dC[0]=true;dD[0]=dw.Get();dE[0]=dI(dP);dz[0]=(dQ=(dR=dF[0],dR==null?null:{$:1,$0:dH(dR.$0)}),dQ==null?[100,500]:dQ.$0);self.addEventListener("mousemove",dJ,false);self.addEventListener("mouseup",dK,false);dP.preventDefault();}}function dM(dP,dQ,dR,dS){return[(dP-dQ-dR)*dS/100,(dP-dQ-dR)*(100-dS)/100];}function dN(dP,dQ){return(((((dj.Curried(function(dR,dS,dT,dU,dV){return dR(" "+dS.toFixed(2)+"px "+dT.toFixed(2)+"px ; "+p.toSafe(dU)+" : "+dV.toFixed(2)+"px; ");},5))(a.id))(dP))(dQ))(dy?"height":"width"))(dz[0][1]);}function dO(){var dP;dP=dF[0];dP==null?void 0:dz[0]=dH(dP.$0);dw.Set(dw.Get());}if(!this.added){dr=this;ds=dr.attachShadow({mode:"open"});dt=self.document.createElement("div");du=dr.hasAttribute("min")?a.parseFloat(dr.getAttribute("min")):4;dv=dr.hasAttribute("max")?a.parseFloat(dr.getAttribute("max")):96;dw=z.Create$1(dr.hasAttribute("value")?a.parseFloat(dr.getAttribute("value")):50);dx=!dr.hasAttribute("second");dy=dr.hasAttribute("vertical");dz=[[0,0]];dA=[0];dB=z.Create$1(0);dC=[false];dD=[0];dE=[0];dF=[null];dG=(((((dy?i.layoutVertical$1():i.layoutHorizontal$1())(t.Map(function(dP){var dQ;dQ=dM(dz[0][0],dB.Get(),dA[0],dP);return dN.apply(null,dQ);},dw.get_View())))(function(){L.addResizeObserver$1(dO,dr);dO();}))(function(dP){dF[0]={$:1,$0:dP};dO();}))(function(dP){dL(dP);}))(t.Map(function(dP){return function(dQ){return dP(p.prettyPrint(dQ)+"px");};}(a.id),dB.get_View()));bP.LoadLocalTemplates("");v.Run(dt,dG);ds.appendChild(dt.firstChild);this.added=true;}}},g,j);j.Constructor$1=function(){var dr,ds;dr=(ds=dk.construct(self.HTMLElement,[],this.__proto__.constructor),ds);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dr);return dr;};j.New$1=dj.Ctor(function(){g.New.call(this);this.added=false;(function(dr){return dr("WcSplitterT initializer");}(function(dr){dl.log(dr);}));},j);k.$cctor=function(){var ds,dw,dx,dE,dF,dG,dI,dJ,dL,dM,dO,dP,dQ,dR,dS,dT,dV,dW,dZ,d0,d3,d6,d7,d9,d_,d$,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH;k.$cctor=a.ignore;k.rtn=function(eI){return[eI];};k.result=new O.New();k.result$1=N.result();k.asyncResult=new P.New();k.asyncResultP=new Q.New();k.reader=new T.New();k.reader$1=S.reader();k.reader$2=new V.New();k.reader$3=U.reader();k.reader$4=new X.New();k.reader$5=W.reader();function dr(eI){return Z.concat("\n",eI);}k.unindentStr=function(eI){return dr(Y.unindent$1(eI));};function dt(eI){return Y.splitByChar$1("\n",eI);}function du(eI){var eJ,eK;return _0.array(eI,{$:1,$0:0},{$:1,$0:(eJ=0,(eK=G.length(eI)-2,F.Compare(eJ,eK)===1?eJ:eK))});}function dv(eI){return Z.concat("\n",eI);}k.skipLastLine=(ds=function(eI){return du(dt(eI));},function(eI){return dv(ds(eI));});k.parseDateO=_1.tryParseWith$1(function(eI){var eJ,eK;eJ=0;return[(eK=bR.TryParse(eI),eK!=null&&eK.$==1&&(eJ=eK.$0,true)),eJ];});k.parseIntO=_1.tryParseWith$1(function(eI){var eJ;eJ=0;return[y.TryParseInt32(eI,{get:function(){return eJ;},set:function(eK){eJ=eK;}}),eJ];});k.parseSingleO=_1.tryParseWith$1(function(eI){var eJ,eK;eJ=0;return[(eK=a.Number(eI),a.isNaN(eK)?false:(eJ=eK,true)),eJ];});k.parseDoubleO=_1.tryParseWith$1(function(eI){var eJ,eK;eJ=0;return[(eK=a.Number(eI),a.isNaN(eK)?false:(eJ=eK,true)),eJ];});k.parseGuidO=_1.tryParseWith$1(function(eI){var eJ;eJ=null;return[_3.TryParse(eI,{get:function(){return eJ;},set:function(eK){eJ=eK;}}),eJ];});k["|Date|_|"]=_1.parseDateO$1();k["|Int|_|"]=_1.parseIntO$1();k["|Single|_|"]=_1.parseSingleO$1();k["|Double|_|"]=_1.parseDoubleO$1();k["|Guid|_|"]=_1.parseGuidO$1();dx=(dw=1,[function(){dw=dw+1;return dw;},function(eI){dw=eI;}]);k.setGeneration=dx[1];k.getNextGeneration=dx[0];k.defaultSnippet=_5.New(new _6({$:0,$0:"00000000-0000-0000-0000-000000000000"}),"","",null,new bB.New$1(null),[],0);function dy(eI){return eI.predecesorsCache();}k.predsLRmMemo=function(eI){return U.memoizeRm(dy,_4.predsLRm,eI);};function dz(eI){return eI.reducedCache();}k.reducedOthersORmMemo=function(eI){return U.memoizeRm(dz,function(eJ){return _4.reducedOthersORm(eJ[0],eJ[1],eJ[2]);},eI);};k.deserGuid=function(eI){return _8.ifUndef("00000000-0000-0000-0000-000000000000",eI);};function dA(eI){return _8.ifUndef(0,eI);}k.serFloat=[function(eI){return(function(eJ){return function(eK){return eJ(p.prettyPrint(eK));};}(a.id))(eI);},function(eI){return dA(a.id(eI));}];function dB(eI){return _8.ifUndef(0,eI);}k.serInt=[function(eI){return(function(eJ){return function(eK){return eJ(p.prettyPrint(eK));};}(a.id))(eI);},function(eI){return dB(a.id(eI));}];function dC(eI){return _8.ifUndef(false,eI);}k.serBool=[function(eI){return(function(eJ){return function(eK){return eJ(p.prettyPrint(eK));};}(a.id))(eI);},function(eI){return dC(a.id(eI));}];function dD(eI){return _8.ifUndef("",eI);}k.serString=[function(eI){return dm.stringify((($.Id())())(eI));},function(eI){return dD(a.id(eI));}];k.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";k.observers=x.Empty;k.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";k.init=ba.Create(function(){var eI,eJ,eK;eI=new h.New$1();eJ="wcomp-tabstrip";eK=self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New;dl.log("defineWebComponent: "+eJ);bZ.setPrototypeOf(eK.prototype,self.HTMLElement.prototype);bZ.setPrototypeOf(eK,self.HTMLElement);bZ.setPrototypeOf(h.Constructor$1.prototype,eK.prototype);self.customElements.define(eJ,h.Constructor$1);});k.layoutHorizontal=dj.Curried(function(eI,eJ,eK,eL,eM){return v.get_Empty();},5);k.layoutVertical=dj.Curried(function(eI,eJ,eK,eL,eM){return v.get_Empty();},5);k.includes=["/EPFileX/monaco/package/min/vs/loader.js"];k.loader=(dE=null,bV.Delay(function(){return bV.Bind(bb.LoadFilesAsync(bc.includes()),function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return bV.Bind(bV.FromContinuations(function(eI,eJ){return self.require(["vs/editor/editor.main"],eI,eJ);}),function(){return bV.Return(null);});});}));k.MessageBrokerId="<MessageBroker>";k.MessageBrokerAddress=new bg({$:0,$0:bf.MessageBrokerId()});k.id="FSharpStation"+a.String(dn.now());k.rootDir=".";k.srcDir=".";bV.Start((dF=null,bV.Delay(function(){return bV.Bind((new bk.New()).Async("testing:FsRoot.FSharpStation+FStation.getRootDir:-447555547",[]),function(eI){bi.set_rootDir(eI+"/"+"..");bi.set_srcDir(eI+"/"+"..\\src");(((dj.Curried3(function(eJ,eK,eL){return eJ("fileName = "+p.toSafe(eK)+"\\"+p.toSafe(eL)+".fsx");}))(function(eJ){dl.log(eJ);}))(bi.srcDir()))(bi.id());return bV.Zero();});})),null);k.annotationsV=z.Create$1("");k.snippets=new bl.New$1(function(eI){return eI.snpId;});k.hierarchy=z.Create$1([]);k.generation=z.Create$1(5);k.currentSnippetIdOV=z.Create$1(null);k.codeSnippetIdOV=z.Create$1(null);k.collapsedV=z.Create$1(new bB.New$1(null));function dH(eI,eJ){dG.set_Item(eI,eJ);return eJ;}dI=(dG=new bW.New$5(),[[function(eI){var eJ;eJ=null;return dG.TryGetValue(eI,{get:function(){return eJ;},set:function(eK){eJ=eK;}})?{$:1,$0:eJ}:null;},function(eI){return function(eJ){return dH(eI,eJ);};}],function(){dG.Clear();}]);k.predsCache=dI[0];k.clearPreds=dI[1];function dK(eI,eJ){dJ.set_Item(eI,eJ);return eJ;}dL=(dJ=new bW.New$5(),[[function(eI){var eJ;eJ=null;return dJ.TryGetValue(eI,{get:function(){return eJ;},set:function(eK){eJ=eK;}})?{$:1,$0:eJ}:null;},function(eI){return function(eJ){return dK(eI,eJ);};}],function(){dJ.Clear();}]);k.reducCache=dL[0];k.clearReduc=dL[1];function dN(eI,eJ){dM.set_Item(eI,eJ);return eJ;}dO=(dM=new bW.New$5(),[[function(eI){var eJ;eJ=null;return dM.TryGetValue(eI,{get:function(){return eJ;},set:function(eK){eJ=eK;}})?{$:1,$0:eJ}:null;},function(eI){return function(eJ){return dN(eI,eJ);};}],function(){dM.Clear();}]);k.parentCache=dO[0];k.clearParent=dO[1];k.getParentIdO=(dP=bm.parentCache(),(dQ=dP[1],(dR=dP[0],function(eI){var eJ,eK;eJ=dR(eI);return eJ==null?(eK=bm.getParentIdONotMemo(eI),(dQ(eI))(eK)):eJ.$0;})));t.Sink(function(eI){var eJ,eK;if(eI!=null&&eI.$==1){eJ=eI.$0;eK=bm.codeSnippetIdOV().Get();eK!=null&&eK.$==1?(bm.iterReader(bn.op_BarGreaterGreater(bn.op_BarGreaterGreater(bn.op_BarGreaterGreater(bn.op_BarGreaterGreater(bn.op_GreaterGreaterEquals(bn.op_BarGreaterGreater(_4.snippetORm(eK.$0),function(eL){return eL==null?null:{$:1,$0:_4.uniquePredsRm(eL.$0)};}),U.insertO),K.toList),function(eL){return w.collect(a.id,eL);}),function(eL){return w.contains(eJ,eL);}),function(eL){if(eL);else bm.codeSnippetIdOV().Set({$:1,$0:eJ});})),bm.clearPredsCache()):bm.codeSnippetIdOV().Set({$:1,$0:eJ});}},bm.currentSnippetIdOV().get_View());function dU(eI){return eI.id();}t.Sink(function(eI){var eJ;bm.clearPredsCache();eJ=G.ofSeq(q.delay(function(){return q.collect(function(eK){return q.append([bm.snippets().FindByKey(eK)],q.delay(function(){return q.filter(function(eL){return bm.isDescendantOf(eK,eL.snpId);},(bm.snippets())["var"].Get());}));},eI);}));bm.snippets().Set(eJ);},(dS=t.Map(function(eI){return G.map(dU,eI);},bm.hierarchy().get_View()),(dT=[z.Create$1(null)],(t.Sink(function(eI){if(!F.Equals(dT[0].Get(),eI))dT[0].Set(eI);},dS),dT[0].get_View()))));k.CurrentSnippetIdW=t.Map(function(eI){var eJ;eJ=_4.defaultSnippet().snpId;return eI==null?eJ:eI.$0;},bm.currentSnippetIdOV().get_View());function dX(eI){var eJ;eJ=_4.defaultSnippet();return eI==null?eJ:eI.$0;}function dY(eI){return bm.snippets().TryFindByKeyAsView(eI);}k.currentSnippetW=t.Map((dV=function(eI){return eI==null?null:a.id(eI.$0);},function(eI){return dX(dV(eI));}),t.Bind((dW=function(eI){return eI==null?null:{$:1,$0:dY(eI.$0)};},function(eI){return bo.insertWO(dW(eI));}),bm.currentSnippetIdOV().get_View()));function d1(eI){var eJ;eJ=_4.defaultSnippet();return eI==null?eJ:eI.$0;}function d2(eI){return bm.snippets().TryFindByKeyAsView(eI);}k.codeSnippetW=t.Map((dZ=function(eI){return eI==null?null:a.id(eI.$0);},function(eI){return d1(dZ(eI));}),t.Bind((d0=function(eI){return eI==null?null:{$:1,$0:d2(eI.$0)};},function(eI){return bo.insertWO(d0(eI));}),bm.codeSnippetIdOV().get_View()));k.currentSnippetV=new b0.New(bm.currentSnippetW(),function(eI){bm.setSnippet(eI);});function d4(eI,eJ){return[eI.id(),eJ];}function d5(eI){function eJ(eL){return bp.listNodes(0,eL);}function eK(eL){return bm.runReader(bm.handleError,eL);}return function(eL){return eK(eJ(eL));};}k.getHierarchyW=t.Map(G.ofSeq,t.Map(function(eI){return q.map(function(eJ){return d4(eJ[0],eJ[1]);},eI);},(d3=bm.hierarchy().get_View(),t.Map2(function(eI,eJ){return(d5(eI))(eJ);},bm.collapsedV().get_View(),d3))));function d8(eI,eJ){var eK;eK=null;return bV.Delay(function(){return bV.Bind(bV.Sleep(350),function(){return bV.Return(bm.runReader(bm.handleError,_4.fastCodeRm(bm.currentSnippetIdOV().Get(),bm.codeSnippetIdOV().Get())));});});}k.codeAndStartsW=(d6=bm.codeSnippetW(),(d7=bm.snippets().v,(((dj.Curried3(t.MapAsync2))(d8))(d6))(d7)));k.FsCodeW=t.Map(function(eI){return eI[0];},bm.codeAndStartsW());k.codeStartsW=t.Map(function(eI){return eI[1];},bm.codeAndStartsW());k.SaveAsClassW=t.Map2(function(eI,eJ){return q.exists(function(eK){return eK.snpGeneration>eJ;},eI)?"btn-primary":"";},bm.snippets().v,bm.generation().get_View());k.drag=br.DragNone;k.rootdir="..\\website";k.TemplatesFileName="..\\website"+"\\Templates.html";((function(eI){return function(eJ){return eI(p.toSafe(eJ));};}(function(eI){dl.log(eI);}))("..\\website\\Templates.html"));k.startsV=z.Create$1([]);k.defaultStart=(d9=[[_6.get_Empty(),""],[0,1,0]],function(eI){return eI==null?d9:eI.$0;});k.fileName="none.fsx";k.editorConfigO=null;t.Sink(function(eI){var eJ,eK;try{eJ=(eK=bs.editorConfigO(),eK==null?null:eK.$0.editorO);eJ==null?null:(eJ.$0.setModel(bs.getSnippetModel(eI)),bi.annotationsV().Set(bi.annotationsV().Get()));}catch(eL){null;}},bm.CurrentSnippetIdW());k.rexGuid$1="\\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";function ea(eI){return eI.$0;}function eb(eI){return new _6({$:0,$0:eI});}k.serSnippetId=(d_=G.head(Z.SplitChars((function(eI){return function(eJ){return eI(bt.p(eJ));};}(a.id))(eb("00000000-0000-0000-0000-000000000000")),[" "],0)),(d$=(function(eI){return function(eJ){return eI(p.prettyPrint(eJ));};}(a.id))(d_),[function(eI){var eJ;eJ=ea(eI);return(((dj.Curried3(function(eK,eL,eM){return eK("{"+Z.PadLeft(p.toSafe(eL),10)+" :"+p.prettyPrint(eM)+"}");}))(a.id))(d$))(eJ);},function(eI){var eJ;return eb((eJ=eI[d_],(_8.deserGuid())(eJ)));}]));k.serSnippet=(ec=[(ed=bx.serSnippetId(),_8.serField("snpId",function(eI){return eI.snpId;},function(eI,eJ){return _5.New(eI,eJ.snpName,eJ.snpContent,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},ed[0],ed[1])),(ee=_8.serString(),_8.serField("snpName",function(eI){return eI.snpName;},function(eI,eJ){return _5.New(eJ.snpId,eI,eJ.snpContent,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},ee[0],ee[1])),(ef=_8.serString(),_8.serField("snpContent",function(eI){return eI.snpContent;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eI,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},ef[0],ef[1])),(eg=(eh=bx.serSnippetId(),_8.serOpt(eh[0],eh[1])),_8.serField("snpParentIdO",function(eI){return eI.snpParentIdO;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eJ.snpContent,eI,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},eg[0],eg[1])),(ei=(ej=bx.serSnippetId(),_8.serSet(ej[0],ej[1])),_8.serField("snpPredIds",function(eI){return eI.snpPredIds;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eJ.snpContent,eJ.snpParentIdO,eI,eJ.snpProperties,eJ.snpGeneration);},ei[0],ei[1])),(ek=(el=(em=_8.serString(),_8.serDup((_8.serString())[0],(_8.serString())[1],em[0],em[1])),_8.serArr(el[0],el[1])),_8.serField("snpProperties",function(eI){return eI.snpProperties;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eJ.snpContent,eJ.snpParentIdO,eJ.snpPredIds,eI,eJ.snpGeneration);},ek[0],ek[1])),(en=_8.serInt(),_8.serField("snpGeneration",function(eI){return eI.snpGeneration;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eJ.snpContent,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eI);},en[0],en[1]))],(eo=_4.New("","",null),[function(eI){var eJ;function eK(eL,eM,eN){return(((dj.Curried3(function(eO,eP,eQ){return eO(p.prettyPrint(eP)+": "+p.toSafe(eQ));}))(a.id))(eL))(eM(eI));}eJ=Z.concat(", ",q.map(function(eL){return eK(eL[0],eL[1],eL[2]);},ec));return(function(eL){return function(eM){return eL("{"+p.toSafe(eM)+"}");};}(a.id))(eJ);},function(eI){return!eI?eo:q.fold(function(eJ,eK){return(eK[2](eJ))(eI[eK[0]]);},eo,ec);}]));k.serModel=(ep=[(eq=(er=bx.serSnippet(),_8.serArr(er[0],er[1])),_8.serField("snippets",function(eI){return eI.snippets;},function(eI,eJ){return by.New(eI,eJ.generation,eJ.collapsed);},eq[0],eq[1])),(es=_8.serInt(),_8.serField("generation",function(eI){return eI.generation;},function(eI,eJ){return by.New(eJ.snippets,eI,eJ.collapsed);},es[0],es[1])),(et=(eu=bx.serSnippetId(),_8.serSet(eu[0],eu[1])),_8.serField("collapsed",function(eI){return eI.collapsed;},function(eI,eJ){return by.New(eJ.snippets,eJ.generation,eI);},et[0],et[1]))],(ev=by.New([],0,new bB.New$1(null)),[function(eI){var eJ;function eK(eL,eM,eN){return(((dj.Curried3(function(eO,eP,eQ){return eO(p.prettyPrint(eP)+": "+p.toSafe(eQ));}))(a.id))(eL))(eM(eI));}eJ=Z.concat(", ",q.map(function(eL){return eK(eL[0],eL[1],eL[2]);},ep));return(function(eL){return function(eM){return eL("{"+p.toSafe(eM)+"}");};}(a.id))(eJ);},function(eI){return!eI?ev:q.fold(function(eJ,eK){return(eK[2](eJ))(eI[eK[0]]);},ev,ep);}]));k.fileName$1=z.Create$1("");k.serSnippetId2=[function(eI){return(function(eJ){return function(eK){return eJ(p.prettyPrint(eK));};}(a.id))(eI);},function(eI){var eJ;return new _6({$:0,$0:(eJ=eI.Item,(_8.deserGuid())(eJ))});}];k.serSnippet2=(ew=[(ex=bz.serSnippetId2(),_8.serField("id",function(eI){return eI.snpId;},function(eI,eJ){return _5.New(F.Equals(eI,_6.get_Empty())?new _6({$:0,$0:_3.NewGuid()}):eI,eJ.snpName,eJ.snpContent,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},ex[0],ex[1])),(ey=_8.serString(),_8.serField("name",function(eI){return eI.snpName;},function(eI,eJ){return _5.New(eJ.snpId,eI,eJ.snpContent,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},ey[0],ey[1])),(ez=_8.serString(),_8.serField("content",function(eI){return eI.snpContent;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eI,eJ.snpParentIdO,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},ez[0],ez[1])),(eA=(eB=bz.serSnippetId2(),_8.serOpt(eB[0],eB[1])),_8.serField("parent",function(eI){return eI.snpParentIdO;},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eJ.snpContent,F.Equals(eI,{$:1,$0:_6.get_Empty()})?null:eI,eJ.snpPredIds,eJ.snpProperties,eJ.snpGeneration);},eA[0],eA[1])),(eC=(eD=bz.serSnippetId2(),_8.serArr(eD[0],eD[1])),_8.serField("predecessors",function(eI){return G.ofSeq(eI.snpPredIds);},function(eI,eJ){return _5.New(eJ.snpId,eJ.snpName,eJ.snpContent,eJ.snpParentIdO,new bB.New(eI),eJ.snpProperties,eJ.snpGeneration);},eC[0],eC[1]))],(eE=_4.New("","",null),[function(eI){var eJ;function eK(eL,eM,eN){return(((dj.Curried3(function(eO,eP,eQ){return eO(p.prettyPrint(eP)+": "+p.toSafe(eQ));}))(a.id))(eL))(eM(eI));}eJ=Z.concat(", ",q.map(function(eL){return eK(eL[0],eL[1],eL[2]);},ew));return(function(eL){return function(eM){return eL("{"+p.toSafe(eM)+"}");};}(a.id))(eJ);},function(eI){return!eI?eE:q.fold(function(eJ,eK){return(eK[2](eJ))(eI[eK[0]]);},eE,ew);}]));k.serSnippets=(eF=bz.serSnippet2(),_8.serArr(eF[0],eF[1]));k.outputMsgs=z.Create$1("");eG=bm.codeAndStartsW();t.Sink(H.delayed(300,function(eI){bs.parse(eI[0],eI[1]);}),eG);t.Sink(function(eI){self.onbeforeunload=eI!==""?function(eJ){eJ.returnValue="Changes you made may not be saved.";}:null;},bm.SaveAsClassW());k.wsStationClient=new bD.New(bi.id(),null,null);bV.Start((eH=null,bV.Delay(function(){return bV.Bind(bV.Sleep(1000),function(){return bV.While(function(){return true;},bV.Delay(function(){return bV.TryWith(bV.Delay(function(){var eI,eJ,eK,eL,eM,eN;function eO(eS){return(bv.j$4())(dm.parse(eS));}function eP(eS){return dm.stringify((bu.j$4())(eS));}function eQ(eS){return bV.Return(eS);}function eR(eS){l.FailWith(eS);}eI=bE.wsStationClient();eI.payloadProcessorO={$:1,$0:(eJ=function(eS){return bE.processMessage(eO(eS));},(eK=(eL=function(eS){return eQ(eP(eS));},function(eS){return bV.Bind(eS,eL);}),function(eS){return eK(eJ(eS));}))};b4.iterA(function(eS){return eR(a.String(eS));},a.ignore,eI.sendAndForget(bf.msgType(b5.MsgInformation,(eM=bf.MessageBrokerAddress(),(eN=dm.stringify((($.Id())())("Registering Processor")),cn.New(new bg({$:0,$0:""}),eM,b5.MsgRequest,"",_3.NewGuid(),eN,cs.NoReply))))));return bV.Bind(bV.Sleep(60000),function(){return bV.Return(null);});}),function(eI){((function(eJ){return function(eK){return eJ(p.toSafe(eK));};}(function(eJ){dl.log(eJ);}))(eI.message));return bV.Bind(bV.Sleep(1000),function(){return bV.Return(null);});});}));});})),null);};l.range=function(dr,ds){var dt;dt=1+ds-dr;return dt<=0?[]:q.init(dt,function(du){return du+dr;});};l.FailWith=function(dr){throw new ca(dr);};l.KeyValue=function(dr){return[dr.K,dr.V];};o=n.attr=dj.Class({},g,o);p.toSafe=function(dr){return dr==null?"":dr;};p.prettyPrint=function(dr){var ds,dt;function du(dv,dw){return dv+" = "+p.prettyPrint(dw);}return dr===null?"null":(ds=typeof dr,ds=="string"?"\""+dr+"\"":ds=="object"?dr instanceof a.Array?"[|"+Z.concat("; ",G.map(p.prettyPrint,dr))+"|]":(dt=a.String(dr),dt==="[object Object]"?"{"+Z.concat("; ",G.map(function(dv){return du(dv[0],dv[1]);},E.GetFields(dr)))+"}":dt):a.String(dr));};p.printArray=function(dr,ds){return ds===null?"null":"[|"+Z.concat("; ",G.map(dr,ds))+"|]";};q.delay=function(dr){return{GetEnumerator:function(){return bH.Get(dr());}};};q.collect=function(dr,ds){return q.concat(q.map(dr,ds));};q.indexed=function(dr){return q.mapi(function(ds,dt){return[ds,dt];},dr);};q.append=function(dr,ds){return{GetEnumerator:function(){var dt,du;dt=bH.Get(dr);du=[true];return new bL.New(dt,null,function(dv){var dw;return dv.s.MoveNext()?(dv.c=dv.s.Current(),true):(dw=dv.s,!F.Equals(dw,null)?dw.Dispose():void 0,dv.s=null,du[0]&&(du[0]=false,dv.s=bH.Get(ds),dv.s.MoveNext()?(dv.c=dv.s.Current(),true):(dv.s.Dispose(),dv.s=null,false)));},function(dv){var dw;dw=dv.s;!F.Equals(dw,null)?dw.Dispose():void 0;});}};};q.filter=function(dr,ds){return{GetEnumerator:function(){var dt;dt=bH.Get(ds);return new bL.New(null,null,function(du){var dv,dw,dx;dv=dt.MoveNext();dw=dt.Current();dx=false;while(dv)if(dr(dw)){du.c=dw;dx=true;dv=false;}else if(dt.MoveNext())dw=dt.Current();else dv=false;return dx;},function(){dt.Dispose();});}};};q.map=function(dr,ds){return{GetEnumerator:function(){var dt;dt=bH.Get(ds);return new bL.New(null,null,function(du){return dt.MoveNext()&&(du.c=dr(dt.Current()),true);},function(){dt.Dispose();});}};};q.exists=function(dr,ds){var dt,du;dt=bH.Get(ds);try{du=false;while(!du&&dt.MoveNext())du=dr(dt.Current());return du;}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}};q.concat=function(dr){return{GetEnumerator:function(){var ds;ds=bH.Get(dr);return new bL.New(null,null,function(dt){var du;while(true){du=dt.s;if(F.Equals(du,null)){if(ds.MoveNext()){dt.s=bH.Get(ds.Current());dt=dt;}else{ds.Dispose();return false;}}else if(du.MoveNext()){dt.c=du.Current();return true;}else{dt.Dispose();dt.s=null;dt=dt;}}},function(dt){var du;du=dt.s;!F.Equals(du,null)?du.Dispose():void 0;!F.Equals(ds,null)?ds.Dispose():void 0;});}};};q.mapi=function(dr,ds){return q.map2(dr,q.initInfinite(a.id),ds);};q.init=function(dr,ds){return q.take(dr,q.initInfinite(ds));};q.tryFind=function(dr,ds){var dt,du,dv;dt=bH.Get(ds);try{du=null;while(du==null&&dt.MoveNext()){dv=dt.Current();dr(dv)?du={$:1,$0:dv}:void 0;}return du;}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}};q.tryFindIndex=function(dr,ds){var dt,du,dv;dt=bH.Get(ds);try{du=true;dv=0;while(du&&dt.MoveNext())if(dr(dt.Current()))du=false;else dv=dv+1;return du?null:{$:1,$0:dv};}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}};q.isEmpty=function(dr){var ds;ds=bH.Get(dr);try{return!ds.MoveNext();}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}};q.takeWhile=function(dr,ds){return q.delay(function(){return q.enumUsing(bH.Get(ds),function(dt){return q.enumWhile(function(){return dt.MoveNext()&&dr(dt.Current());},q.delay(function(){return[dt.Current()];}));});});};q.skipWhile=function(dr,ds){return{GetEnumerator:function(){var dt;dt=bH.Get(ds);return new bL.New(true,null,function(du){var dv,dw;if(du.s){dv=true;dw=false;while(dv)if(dt.MoveNext()){if(!dr(dt.Current()))dv=false;}else{dv=false;dw=true;}du.s=false;return dw?false:(du.c=dt.Current(),true);}else return dt.MoveNext()&&(du.c=dt.Current(),true);},function(){dt.Dispose();});}};};q.fold=function(dr,ds,dt){var du,dv;du=ds;dv=bH.Get(dt);try{while(dv.MoveNext())du=dr(du,dv.Current());return du;}finally{if(typeof dv=="object"&&"Dispose"in dv)dv.Dispose();}};q.iter=function(dr,ds){var dt;dt=bH.Get(ds);try{while(dt.MoveNext())dr(dt.Current());}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}};q.choose=function(dr,ds){return q.collect(function(dt){var du;du=dr(dt);return du==null?x.Empty:w.ofArray([du.$0]);},ds);};q.map2=function(dr,ds,dt){return{GetEnumerator:function(){var du,dv;du=bH.Get(ds);dv=bH.Get(dt);return new bL.New(null,null,function(dw){return du.MoveNext()&&dv.MoveNext()&&(dw.c=dr(du.Current(),dv.Current()),true);},function(){du.Dispose();dv.Dispose();});}};};q.initInfinite=function(dr){return{GetEnumerator:function(){return new bL.New(0,null,function(ds){ds.c=dr(ds.s);ds.s=ds.s+1;return true;},void 0);}};};q.take=function(dr,ds){dr<0?q.nonNegative():void 0;return{GetEnumerator:function(){var dt;dt=[bH.Get(ds)];return new bL.New(0,null,function(du){var dv;du.s=du.s+1;return du.s>dr?false:(dv=dt[0],F.Equals(dv,null)?q.insufficient():dv.MoveNext()?(du.c=dv.Current(),du.s===dr?(dv.Dispose(),dt[0]=null):void 0,true):(dv.Dispose(),dt[0]=null,q.insufficient()));},function(){var du;du=dt[0];!F.Equals(du,null)?du.Dispose():void 0;});}};};q.reduce=function(dr,ds){var dt,du;dt=bH.Get(ds);try{if(!dt.MoveNext())q.seqEmpty();du=dt.Current();while(dt.MoveNext())du=dr(du,dt.Current());return du;}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}};q.sort=function(dr){return q.sortBy(a.id,dr);};q.mapFold=function(dr,ds,dt){return G.mapFold(dr,ds,G.ofSeq(dt));};q.distinct=function(dr){return q.distinctBy(a.id,dr);};q.head=function(dr){var ds;ds=bH.Get(dr);try{return ds.MoveNext()?ds.Current():q.insufficient();}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}};q.forall2=function(dr,ds,dt){return!q.exists2(function(du,dv){return!dr(du,dv);},ds,dt);};q.compareWith=function(dr,ds,dt){var du,dv,dw,dx,dy;du=bH.Get(ds);try{dw=bH.Get(dt);try{dx=0;dy=true;while(dy&&dx===0)if(du.MoveNext())dx=dw.MoveNext()?dr(du.Current(),dw.Current()):1;else if(dw.MoveNext())dx=-1;else dy=false;dv=dx;}finally{if(typeof dw=="object"&&"Dispose"in dw)dw.Dispose();}return dv;}finally{if(typeof du=="object"&&"Dispose"in du)du.Dispose();}};q.seqEmpty=function(){return l.FailWith("The input sequence was empty.");};q.sortBy=function(dr,ds){return q.delay(function(){var dt;dt=G.ofSeq(ds);G.sortInPlaceBy(dr,dt);return dt;});};q.distinctBy=function(dr,ds){return{GetEnumerator:function(){var dt,du;dt=bH.Get(ds);du=new cC.New$3();return new bL.New(null,null,function(dv){var dw,dx;if(dt.MoveNext()){dw=dt.Current();dx=du.Add(dr(dw));while(!dx&&dt.MoveNext()){dw=dt.Current();dx=du.Add(dr(dw));}return dx&&(dv.c=dw,true);}else return false;},function(){dt.Dispose();});}};};q.exists2=function(dr,ds,dt){var du,dv,dw,dx;du=bH.Get(ds);try{dw=bH.Get(dt);try{dx=false;while(!dx&&du.MoveNext()&&dw.MoveNext())dx=dr(du.Current(),dw.Current());dv=dx;}finally{if(typeof dw=="object"&&"Dispose"in dw)dw.Dispose();}return dv;}finally{if(typeof du=="object"&&"Dispose"in du)du.Dispose();}};q.max=function(dr){var ds,dt,du;ds=bH.Get(dr);try{if(!ds.MoveNext())q.seqEmpty();dt=ds.Current();while(ds.MoveNext()){du=ds.Current();F.Compare(du,dt)===1?dt=du:void 0;}return dt;}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}};q.unfold=function(dr,ds){return{GetEnumerator:function(){return new bL.New(ds,null,function(dt){var du;du=dr(dt.s);return du==null?false:(dt.c=du.$0[0],dt.s=du.$0[1],true);},void 0);}};};s=r.Hoverable=dj.Class({Content:function(dr){return dr.on("mouseenter",function(){return bM.AddClass(dr.elt,"hovering");}).on("mouseleave",function(){return bM.RemoveClass(dr.elt,"hovering");});}},null,s);s.New$3=function(){return s.New$2(z.Create$1(false));};s.New$2=function(dr){return new s({hover:dr});};t.Map=function(dr,ds){return t.CreateLazy(function(){return bK.Map(dr,ds());});};t.Sink=function(dr,ds){function dt(){bK.WhenRun(ds(),dr,function(){bV.scheduler().Fork(dt);});}bV.scheduler().Fork(dt);};t.Bind=function(dr,ds){return t.Join(t.Map(dr,ds));};t.Map2=function(dr,ds,dt){return t.CreateLazy(function(){return bK.Map2(dr,ds(),dt());});};t.MapAsync2=function(dr,ds,dt){return t.MapAsync(a.id,t.Map2(dr,ds,dt));};t.CreateLazy=function(dr){var ds;ds={c:null,o:dr};return function(){var dt,du;dt=ds.c;return dt===null?(dt=ds.o(),ds.c=dt,(du=dt.s,du!=null&&du.$==0)?ds.o=null:bK.WhenObsoleteRun(dt,function(){ds.c=null;}),dt):dt;};};t.Const=function(dr){var ds;ds=bK.New({$:0,$0:dr});return function(){return ds;};};t.Join=function(dr){return t.CreateLazy(function(){return bK.Join(dr());});};t.MapAsync=function(dr,ds){return t.CreateLazy(function(){return bK.MapAsync(dr,ds());});};t.TryGet=function(dr){return bK.TryGet(dr());};t.Map2Unit=function(dr,ds){return t.CreateLazy(function(){return bK.Map2Unit(dr(),ds());});};u=m.Var=dj.Class({},g,u);u.New=dj.Ctor(function(){g.New.call(this);},u);v=m.Doc=dj.Class({},g,v);v.Element=function(dr,ds,dt){var du,dv;du=bG.Concat(ds);dv=v.Concat(dt);return bI.New(bM.CreateElement(dr),du,dv);};v.get_Empty=function(){return v.Mk(null,t.Const());};v.TextNode=function(dr){return v.Mk({$:5,$0:bM.CreateText(dr)},t.Const());};v.Concat=function(dr){var ds;ds=b9.ofSeqNonCopying(dr);return b9.TreeReduce(v.get_Empty(),v.Append,ds);};v.TextView=function(dr){var ds;ds=b_.CreateTextNode();return v.Mk({$:4,$0:ds},t.Map(function(dt){b_.UpdateTextNode(ds,dt);},dr));};v.Run=function(dr,ds){b_.LinkElement(dr,ds.docNode);v.RunInPlace(false,dr,ds);};v.Mk=function(dr,ds){return new v.New(dr,ds);};v.Append=function(dr,ds){return v.Mk({$:0,$0:dr.docNode,$1:ds.docNode},t.Map2Unit(dr.updates,ds.updates));};v.RunInPlace=function(dr,ds,dt){var du;du=b_.CreateRunState(ds,dt.docNode);t.Sink(cD.get_UseAnimations()||cE.BatchUpdatesEnabled()?cF.StartProcessor(b_.PerformAnimatedUpdate(dr,du,dt.docNode)):function(){b_.PerformSyncUpdate(dr,du,dt.docNode);},dt.updates);};v.New=dj.Ctor(function(dr,ds){g.New.call(this);this.docNode=dr;this.updates=ds;},v);w.ofArray=function(dr){var ds,dt,du;ds=x.Empty;for(dt=G.length(dr)-1,du=0;dt>=du;dt--)ds=new x({$:1,$0:G.get(dr,dt),$1:ds});return ds;};w.collect=function(dr,ds){return w.ofSeq(q.collect(dr,ds));};w.contains=function(dr,ds){var dt,du;dt=false;du=ds;while(!dt&&du.$==1){dt=F.Equals(dr,du.$0);du=du.$1;}return dt;};w.ofSeq=function(dr){var ds,dt,du,dv,dw,dx;if(dr instanceof x)return dr;else if(dr instanceof a.Array)return w.ofArray(dr);else{ds=bH.Get(dr);try{du=ds.MoveNext();if(!du)dt=x.Empty;else{dw=new x({$:1});dv=dw;while(du){dv.$0=ds.Current();ds.MoveNext()?dv=(dx=new x({$:1}),dv.$1=dx,dx):du=false;}dv.$1=x.Empty;dt=dw;}return dt;}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}}};w.append=function(dr,ds){var dt,du,dv,dw,dx;if(dr.$==0)return ds;else if(ds.$==0)return dr;else{dw=new x({$:1});dt=dw;du=dr;dv=true;while(dv){dt.$0=du.$0;du=du.$1;du.$==0?dv=false:dt=(dx=new x({$:1}),dt.$1=dx,dx);}dt.$1=ds;return dw;}};w.length=function(dr){var ds,dt;ds=dr;dt=0;while(ds.$==1){ds=w.tail(ds);dt=dt+1;}return dt;};w.head=function(dr){return dr.$==1?dr.$0:w.listEmpty();};w.tail=function(dr){return dr.$==1?dr.$1:w.listEmpty();};w.listEmpty=function(){return l.FailWith("The input list was empty.");};x=w.T=dj.Class({get_Length:function(){return w.length(this);},GetEnumerator:function(){return new bL.New(this,null,function(dr){var ds;ds=dr.s;return ds.$==0?false:(dr.c=ds.$0,dr.s=ds.$1,true);},void 0);},GetEnumerator0:function(){return bH.Get(this);}},null,x);x.Empty=new x({$:0});y.TryParseInt32=function(dr,ds){return y.TryParse(dr,-2147483648,2147483647,ds);};z=m.Var$1=dj.Class({},g,z);z.Create$1=function(dr){return new bN.New(false,bK.New({$:2,$0:dr,$1:[]}),dr);};B.NewFromSeq=function(dr){var ds,dt,du;ds={};dt=bH.Get(dr);try{while(dt.MoveNext()){du=dt.Current();ds[du[0]]=du[1];}}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}return ds;};E.GetFields=function(dr){var ds,dt;ds=[];for(var du in dr)ds.push([du,dr[du]]);return ds;};E.GetFieldValues=function(dr){var ds,dt;ds=[];for(var du in dr)ds.push(dr[du]);return ds;};F.Equals=function(dr,ds){var dt,du,dv,dw;if(dr===ds)return true;else{dt=typeof dr;if(dt=="object"){if(dr===null||dr===void 0||ds===null||ds===void 0)return false;else if("Equals"in dr)return dr.Equals(ds);else if(dr instanceof a.Array&&ds instanceof a.Array)return F.arrayEquals(dr,ds);else if(dr instanceof dn&&ds instanceof dn)return F.dateEquals(dr,ds);else{du=[true];for(var dx in dr)if(function(dy){du[0]=!dr.hasOwnProperty(dy)||ds.hasOwnProperty(dy)&&F.Equals(dr[dy],ds[dy]);return!du[0];}(dx))break;if(du[0]){for(var dy in ds)if(function(dz){du[0]=!ds.hasOwnProperty(dz)||dr.hasOwnProperty(dz);return!du[0];}(dy))break;}return du[0];}}else return dt=="function"&&("$Func"in dr?dr.$Func===ds.$Func&&dr.$Target===ds.$Target:"$Invokes"in dr&&"$Invokes"in ds&&F.arrayEquals(dr.$Invokes,ds.$Invokes));}};F.arrayEquals=function(dr,ds){var dt,du;if(G.length(dr)===G.length(ds)){dt=true;du=0;while(dt&&du<G.length(dr)){!F.Equals(G.get(dr,du),G.get(ds,du))?dt=false:void 0;du=du+1;}return dt;}else return false;};F.dateEquals=function(dr,ds){return dr.getTime()===ds.getTime();};F.Compare=function(dr,ds){var dt,du,dv,dw,dx,dy;if(dr===ds)return 0;else{du=typeof dr;switch(du=="function"?1:du=="boolean"?2:du=="number"?2:du=="string"?2:du=="object"?3:0){case 0:return typeof ds=="undefined"?0:-1;case 1:return l.FailWith("Cannot compare function values.");case 2:return dr<ds?-1:1;case 3:if(dr===null)dv=-1;else if(ds===null)dv=1;else if("CompareTo"in dr)dv=dr.CompareTo(ds);else if("CompareTo0"in dr)dv=dr.CompareTo0(ds);else if(dr instanceof a.Array&&ds instanceof a.Array)dv=F.compareArrays(dr,ds);else if(dr instanceof dn&&ds instanceof dn)dv=F.compareDates(dr,ds);else{dw=[0];for(var dz in dr)if(function(dA){return!dr.hasOwnProperty(dA)?false:!ds.hasOwnProperty(dA)?(dw[0]=1,true):(dw[0]=F.Compare(dr[dA],ds[dA]),dw[0]!==0);}(dz))break;if(dw[0]===0){for(var dA in ds)if(function(dB){return!ds.hasOwnProperty(dB)?false:!dr.hasOwnProperty(dB)&&(dw[0]=-1,true);}(dA))break;}dv=dw[0];}return dv;}}};F.compareArrays=function(dr,ds){var dt,du;if(G.length(dr)<G.length(ds))return -1;else if(G.length(dr)>G.length(ds))return 1;else{dt=0;du=0;while(dt===0&&du<G.length(dr)){dt=F.Compare(G.get(dr,du),G.get(ds,du));du=du+1;}return dt;}};F.compareDates=function(dr,ds){return F.Compare(dr.getTime(),ds.getTime());};F.Hash=function(dr){var ds;ds=typeof dr;return ds=="function"?0:ds=="boolean"?dr?1:0:ds=="number"?dr:ds=="string"?F.hashString(dr):ds=="object"?dr==null?0:dr instanceof a.Array?F.hashArray(dr):F.hashObject(dr):0;};F.hashString=function(dr){var ds,dt,du;if(dr===null)return 0;else{ds=5381;for(dt=0,du=dr.length-1;dt<=du;dt++)ds=F.hashMix(ds,dr[dt].charCodeAt());return ds;}};F.hashArray=function(dr){var ds,dt,du;ds=-34948909;for(dt=0,du=G.length(dr)-1;dt<=du;dt++)ds=F.hashMix(ds,F.Hash(G.get(dr,dt)));return ds;};F.hashObject=function(dr){var ds,dt;if("GetHashCode"in dr)return dr.GetHashCode();else{ds=[0];for(var du in dr)if(function(dv){ds[0]=F.hashMix(F.hashMix(ds[0],F.hashString(dv)),F.Hash(dr[dv]));return false;}(du))break;return ds[0];}};F.hashMix=function(dr,ds){return(dr<<5)+dr+ds;};G.get=function(dr,ds){G.checkBounds(dr,ds);return dr[ds];};G.length=function(dr){return dr.dims===2?dr.length*dr.length:dr.length;};G.checkBounds=function(dr,ds){if(ds<0||ds>=dr.length)l.FailWith("Index was outside the bounds of the array.");};G.set=function(dr,ds,dt){G.checkBounds(dr,ds);dr[ds]=dt;};H.delayed$1=function(dr,ds){var dt;dt=[null];return function(du){var dv,dw;dv=dt[0];dv==null?void 0:dv.$0.Cancel$1();dt[0]={$:1,$0:new bQ.New()};bV.Start((dw=null,bV.Delay(function(){return bV.Bind(bV.Sleep(dr),function(){ds(du);return bV.Zero();});})),{$:1,$0:dt[0].$0});};};H.print=function(dr){((function(ds){return function(dt){return ds(p.prettyPrint(dt));};}(function(ds){dl.log(ds);}))(dr));};H.Error$1=function(dr){return{$:1,$0:dr};};K.toList=function(dr){return dr==null?x.Empty:w.ofArray([dr.$0]);};L.addResizeObserver$1=function(dr,ds){var dt,du,dv,dw;try{dt=!(!a.ResizeObserver);}catch(dx){dt=false;}if(dt){du=new a.ResizeObserver(dr);L.set_observers$1(new x({$:1,$0:du,$1:L.observers$1()}));du.observe(ds);}else{dv=L.dimsChanged$1(ds);bV.Start((dw=null,bV.Delay(function(){return bV.While(function(){return ds.isConnected;},bV.Delay(function(){return bV.Bind(bV.Sleep(110),function(){return dv()?(dr(),bV.Zero()):bV.Zero();});}));})),null);}};L.set_observers$1=function(dr){k.$cctor();k.observers=dr;};L.observers$1=function(){k.$cctor();return k.observers;};L.dimsChanged$1=function(dr){var ds;ds=[dr.getBoundingClientRect()];return function(){var dt;dt=dr.getBoundingClientRect();return F.Equals(L.domRect2Tuple$1(ds[0]),L.domRect2Tuple$1(dt))?false:(ds[0]=dt,true);};};L.domRect2Tuple$1=function(dr){return[dr.top,dr.left,dr.width,dr.height];};O=N.Builder=dj.Class({},g,O);O.New=dj.Ctor(function(){g.New.call(this);},O);N.result=function(){k.$cctor();return k.result;};N.defaultWith=function(dr,ds){return ds.$==1?dr(ds.$0):ds.$0;};N.rtn=function(dr){return{$:0,$0:dr};};N.iter=function(dr,ds,dt){N.defaultWith(dr,N.mapP(ds,dt));};N.ofOption=function(dr,ds){var dt;dt=ds==null?null:{$:1,$0:{$:0,$0:ds.$0}};return dt==null?function(du){return H.Error$1(dr(du));}():dt.$0;};N.mapP=function(dr,ds){return N.bindP(function(dt){return N.rtn(dr(dt));},ds);};N.bindP=function(dr,ds){if(ds.$==1)return H.Error$1(ds.$0);else try{return dr(ds.$0);}catch(dt){return H.Error$1(new bF({$:3,$0:dt.message,$1:dt.stack}));}};P=M.AsyncResultBuilder=dj.Class({Run:function(dr){return dr();},Delay:a.id,Bind$1:function(dr,ds){return b4.bind(ds,dr);},Zero:function(){return b4.rtn();},Bind:function(dr,ds){return b4.bind(ds,b4.rtnR(dr));},Return:function(dr){return b4.rtn(dr);}},g,P);P.New=dj.Ctor(function(){g.New.call(this);},P);Q=M.AsyncResultBuilderP=dj.Class({},g,Q);Q.New=dj.Ctor(function(){g.New.call(this);},Q);T=S.Builder=dj.Class({},g,T);T.New=dj.Ctor(function(){g.New.call(this);},T);S.reader=function(){k.$cctor();return k.reader;};V=U.Builder=dj.Class({Run:function(dr){return U.delayRun(dr);},Delay:a.id,Combine:function(dr,ds){return U.bind(ds,dr);},While:function(dr,ds){function dt(du,dv){return du()?U.bind(function(){return dt(du,dv);},dv()):U.rtn();}return dt(dr,ds);},Zero:function(){return U.rtn();},Bind:function(dr,ds){return U.bind(ds,dr);},Return:function(dr){return U.rtn(dr);},ReturnFrom$1:a.id},g,V);V.New=dj.Ctor(function(){g.New.call(this);},V);U.reader=function(){k.$cctor();return k.reader$2;};U.memoizeRm=function(dr,ds,dt){return U.wrap(function(du){var dv,dw,dx,dy;dv=dr(du);return U.run(du,(dw=(dx=dv[0](dt),dx==null?null:{$:1,$0:U.rtn(dx.$0)}),dw==null?(dy=ds(dt),U.map(dv[1](dt),dy)):dw.$0));});};U.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:U.map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?U.rtn(null):ds.$0;};U.rtn=function(dr){return U.wrap(function(){return N.rtn(dr);});};U.map=function(dr,ds){return U.bind(function(dt){return U.rtn(dr(dt));},ds);};U.run=function(dr,ds){return(U.getFun(ds))(dr);};U.wrap=function(dr){return{$:0,$0:dr};};U.bind=function(dr,ds){return U.wrap(function(dt){return ci.Bind(function(du){return(U.getFun(dr(du)))(dt);},(U.getFun(ds))(dt));});};U.ofFun=function(dr){return U.wrap(function(ds){return N.rtn(dr(ds));});};U.iter=function(dr,ds,dt,du){N.iter(dr,ds,U.run(dt,du));};U.sequenceSeq=function(dr){return U.traverseSeq(a.id,dr);};U.traverseSeq=function(dr,ds){return U.map(a.id,G.foldBack(function(dt,du){return U.op_GreaterGreaterEquals(dr(dt),function(dv){return U.op_GreaterGreaterEquals(du,function(dw){return U.rtn(new x({$:1,$0:dv,$1:dw}));});});},G.ofSeq(ds),U.rtn(x.Empty)));};U.absorbO=function(dr,ds){return U.absorbR(U.map(function(dt){return N.ofOption(dr,dt);},ds));};U.getFun=function(dr){return dr.$0;};U.delayRun=function(dr){return U.wrap(function(ds){return(U.getFun(dr()))(ds);});};U.op_GreaterGreaterEquals=function(dr,ds){return U.bind(ds,dr);};U.absorbR=function(dr){return U.bind(U.rtnR,dr);};U.rtnR=function(dr){return U.wrap(function(){return dr;});};X=W.Builder=dj.Class({},g,X);X.New=dj.Ctor(function(){g.New.call(this);},X);W.reader=function(){k.$cctor();return k.reader$4;};Y.unindent$1=function(dr){var ds,dt,du,dv;ds=Z.SplitChars(dr,["\n"],0);dt=(du=q.tryFindIndex(function(dw){return" "!==dw;},(dv=q.tryFind(function(dw){return Z.Trim(dw)!=="";},ds),dv==null?"":dv.$0)),du==null?0:du.$0);return q.filter(function(dw){return!Z.StartsWith(dw,"# 1 ");},q.map(function(dw){return dw.length<=dt?"":dw.substring(dt);},ds));};Y.splitByChar$1=function(dr,ds){return Z.SplitChars(ds,[dr],0);};Y.skipFirstLine$1=function(dr){var ds;ds=dr.indexOf("\n");return ds<0?"":_0.string(dr,{$:1,$0:ds+1},null);};Y.StartsWith$1=function(dr,ds){return Z.StartsWith(ds,dr)?{$:1,$0:_0.string(ds,{$:1,$0:dr.length},null)}:null;};Y.EndsWith$1=function(dr,ds){return Z.EndsWith(ds,dr)?{$:1,$0:_0.string(ds,{$:1,$0:0},{$:1,$0:ds.length-dr.length-1})}:null;};Z.concat=function(dr,ds){return G.ofSeq(ds).join(dr);};Z.PadLeft=function(dr,ds){return Z.PadLeftWith(dr,ds," ");};Z.SplitChars=function(dr,ds,dt){return Z.Split(dr,new a.RegExp("["+Z.RegexEscape(ds.join(""))+"]"),dt);};Z.Trim=function(dr){return dr.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};Z.StartsWith=function(dr,ds){return dr.substring(0,ds.length)==ds;};Z.PadLeftWith=function(dr,ds,dt){return ds>dr.length?a.Array(ds-dr.length+1).join(dt)+dr:dr;};Z.Split=function(dr,ds,dt){return dt===1?G.filter(function(du){return du!=="";},Z.SplitWith(dr,ds)):Z.SplitWith(dr,ds);};Z.RegexEscape=function(dr){return dr.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};Z.replicate=function(dr,ds){return G.create(dr,ds).join("");};Z.EndsWith=function(dr,ds){return dr.substring(dr.length-ds.length)==ds;};Z.SplitWith=function(dr,ds){return dr.split(ds);};Z.Substring=function(dr,ds,dt){return dr.substr(ds,dt);};Z.Replace=function(dr,ds,dt){function du(dv){var dw,dx,dy;dw=dv.indexOf(ds);return dw!==-1?(dx=Z.ReplaceOnce(dv,ds,dt),(dy=dw+dt.length,Z.Substring(dx,0,dw+dt.length)+du(dx.substring(dy)))):dv;}return du(dr);};Z.SplitStrings=function(dr,ds,dt){return Z.Split(dr,new a.RegExp(Z.concat("|",G.map(Z.RegexEscape,ds))),dt);};Z.ReplaceOnce=function(dr,ds,dt){return dr.replace(ds,dt);};_0.array=function(dr,ds,dt){return ds==null?dt!=null&&dt.$==1?dr.slice(0,dt.$0+1):[]:dt==null?dr.slice(ds.$0):dr.slice(ds.$0,dt.$0+1);};_0.string=function(dr,ds,dt){return ds==null?dt!=null&&dt.$==1?dr.slice(0,dt.$0+1):"":dt==null?dr.slice(ds.$0):dr.slice(ds.$0,dt.$0+1);};_1.tryParseWith$1=function(dr){function ds(dt,du){return dt?{$:1,$0:du}:null;}return function(dt){return ds.apply(null,dr(dt));};};_1.parseDateO$1=function(){k.$cctor();return k.parseDateO;};_1.parseIntO$1=function(){k.$cctor();return k.parseIntO;};_1.parseSingleO$1=function(){k.$cctor();return k.parseSingleO;};_1.parseDoubleO$1=function(){k.$cctor();return k.parseDoubleO;};_1.parseGuidO$1=function(){k.$cctor();return k.parseGuidO;};_3.TryParse=function(dr,ds){try{ds.set(_3.Parse(dr));return true;}catch(dt){return false;}};_3.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(dr){var ds,dt;ds=_do.random()*16|0;dt=dr=="x"?ds:ds&3|8;return dt.toString(16);});};_3.Parse=function(dr){var ds,dt,du;try{return _3.ParseExact(dr,"D");}catch(dv){try{ds=_3.ParseExact(dr,"B");}catch(dw){try{dt=_3.ParseExact(dr,"P");}catch(dx){try{du=_3.ParseExact(dr,"N");}catch(dy){du=_3.ParseExact(dr,"X");}dt=du;}ds=dt;}return ds;}};_3.ParseExact=function(dr,ds){var dt,du,dv,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG;function dw(dH){var dI,dJ,dK,dL;for(dI=0,dJ=35;dI<=dJ;dI++){dI===8||(dI===13||(dI===18||dI===23))?dH[dI]!=="-"?_3.ShapeError():void 0:(dL=dH[dI],!("0"<=dL&&dL<="9"||"a"<=dL&&dL<="f")?_3.ShapeError():void 0);}return dH;}dx=ds.toUpperCase();if(dx==="N"){dy=Z.Trim(dr).toLowerCase();if(dy.length!==32)_3.ShapeError();for(dz=0,dA=31;dz<=dA;dz++){dB=dy[dz];!("0"<=dB&&dB<="9"||"a"<=dB&&dB<="f")?_3.ShapeError():void 0;}return Z.Substring(dy,0,8)+"-"+Z.Substring(dy,8,4)+"-"+Z.Substring(dy,12,4)+"-"+Z.Substring(dy,16,4)+"-"+dy.substring(20);}else if(dx==="D"){dt=Z.Trim(dr).toLowerCase();dt.length!==36?_3.ShapeError():void 0;return dw(dt);}else if(dx==="B"){du=Z.Trim(dr).toLowerCase();du.length!==38||du[0]!=="{"||du[17]!=="}"?_3.ShapeError():void 0;return dw(Z.Substring(du,1,36));}else if(dx==="P"){dv=Z.Trim(dr).toLowerCase();dv.length!==38||dv[0]!=="("||dv[17]!==")"?_3.ShapeError():void 0;return dw(Z.Substring(dv,1,36));}else if(dx==="X"){dC=Z.Trim(dr).toLowerCase();if(dC.length!==68)_3.ShapeError();for(dD=0,dE=67;dD<=dE;dD++){switch(dD){case 26:case 0:if(dC[dD]!=="{")_3.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(dC[dD]!=="0")_3.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(dC[dD]!=="x")_3.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(dC[dD]!==",")_3.ShapeError();break;case 67:case 66:if(dC[dD]!=="{")_3.ShapeError();break;default:dG=dC[dD];!("0"<=dG&&dG<="9"||"a"<=dG&&dG<="f")?_3.ShapeError():void 0;break;}}return Z.Substring(dC,3,8)+"-"+Z.Substring(dC,14,4)+"-"+Z.Substring(dC,21,4)+"-"+Z.Substring(dC,29,2)+Z.Substring(dC,34,2)+"-"+Z.Substring(dC,39,2)+Z.Substring(dC,44,2)+Z.Substring(dC,49,2)+Z.Substring(dC,54,2)+Z.Substring(dC,59,2)+Z.Substring(dC,64,2);}else return _3.FormatError();};_3.ShapeError=function(){throw new cY.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_3.FormatError=function(){throw new cY.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_4.predsLRm=function(dr){var ds;ds=bn.reader();return ds.Run(ds.Delay(function(){var dt,du;dt=w.ofArray([dr]);du=x.Empty;return ds.Combine(ds.While(function(){return!(dt.$==0);},ds.Delay(function(){var dv,dw;return dt.$==1?(dv=dt.$1,(dw=dt.$0,w.contains(dw,du)?(dt=dv,ds.Zero()):ds.Bind(_4.snippetORm(dw),function(dx){var dy,dz;dt=w.append(dv,(dy=dx==null?null:{$:1,$0:(dz=dx.$0,w.append(w.ofSeq(dz.snpPredIds),K.toList(dz.snpParentIdO)))},dy==null?x.Empty:dy.$0));du=new x({$:1,$0:dw,$1:du});return ds.Zero();}))):ds.Zero();})),ds.Delay(function(){return ds.Return(du);}));}));};_4.reducedOthersORm=function(dr,ds,dt){var du;du=bn.reader();return du.Run(du.Delay(function(){function dv(dw){return!F.Equals(dw.snpId,ds)&&dt.Contains(dw.snpId);}return du.Bind(bn.op_BarGreaterGreater(bn.op_BarGreaterGreater(_4.orderedRm(),(dr?function(dw){return function(dx){return q.takeWhile(dw,dx);};}:function(dw){return function(dx){return q.skipWhile(dw,dx);};})(function(dw){return!F.Equals(dw.snpId,ds);})),function(dw){return q.filter(dv,dw);}),function(dw){return q.isEmpty(dw)?du.Return(null):du.Bind(_4.reducedCodeRm(dw),function(dx){return du.Return({$:1,$0:dx});});});}));};_4.snippetORm=function(dr){return U.ofFun(function(ds){return ds.fetcher(dr);});};_4.uniquePredsRm=function(dr){return(_4.predsLRmMemo())(dr.snpId);};_4.defaultSnippet=function(){k.$cctor();return k.defaultSnippet;};_4.fastCodeRm=function(dr,ds){var dt;dt=bn.reader();return dt.Run(dt.Delay(function(){return dt.Bind(_4.fastReducedRm(dr,ds),function(du){return dt.Return(_4.finishCode(du[0],du[1],du[2],du[3],du[4],du[5],du[6]));});}));};_4.New=function(dr,ds,dt){return _5.New(new _6({$:0,$0:_3.NewGuid()}),dr,ds,dt,new bB.New$1(null),[],(_4.getNextGeneration())());};_4.orderedRm=function(){return U.ofFun(function(dr){return dr.ordered;});};_4.reducedCodeRm=function(dr){var ds;ds=bn.reader();return ds.Run(ds.Delay(function(){return ds.Bind(U.traverseSeq(_4.separateCodeRm,dr),function(dt){var du;return ds.Return((du=q.reduce(function(dv,dw){return(function(dx){var dy,dz,dA,dB,dC,dD,dE;dy=dx[0];dz=dx[1];dA=dx[2];dB=dx[3];dC=dx[4];dD=dx[5];dE=dx[6];return function(dF){return _4.addSeps(dy,dz,dA,dB,dC,dD,dE,dF[0],dF[1],dF[2],dF[3],dF[4],dF[5],dF[6]);};}(dv))(dw);},q.isEmpty(dt)?[[[],[],[],[],[],[],null]]:dt),[du[0],[Z.concat("\n",du[1])],du[2],du[3],du[4],du[5],du[6]]));});}));};_4.predsLRmMemo=function(){k.$cctor();return k.predsLRmMemo;};_4.fastReducedRm=function(dr,ds){var dt;dt=bn.reader();return dt.Run(dt.Delay(function(){return dt.Bind(U.insertO(dr==null?null:{$:1,$0:_4.snippetORm(dr.$0)}),function(du){return dt.Bind(U.insertO(ds==null?null:{$:1,$0:_4.snippetORm(ds.$0)}),function(dv){var dw,dx,dy,dz;dw=du==null?null:du.$0;dx=dv==null?null:dv.$0;return(dx!=null&&dx.$==1?dw!=null&&dw.$==1?(dy=[dw.$0,dx.$0],false):true:true)?dt.ReturnFrom$1(_4.reducedCodeRm([])):(dz=dy[0],dt.Bind(_4.uniquePredsRm(dy[1]),function(dA){var dB;dB=new bB.New(dA);return dt.Bind((_4.reducedOthersORmMemo())([true,dz.snpId,dB]),function(dC){return dt.Bind((_4.reducedOthersORmMemo())([false,dz.snpId,dB]),function(dD){return dt.Bind(_4.separateCodeRm(dz),function(dE){var dF,dG,dH,dI;dF=(dG=dC==null?null:{$:1,$0:(function(dJ){var dK,dL,dM,dN,dO,dP,dQ;dK=dJ[0];dL=dJ[1];dM=dJ[2];dN=dJ[3];dO=dJ[4];dP=dJ[5];dQ=dJ[6];return function(dR){return _4.addSeps(dK,dL,dM,dN,dO,dP,dQ,dR[0],dR[1],dR[2],dR[3],dR[4],dR[5],dR[6]);};}(dC.$0))(dE)},dG==null?dE:dG.$0);return dt.Return((dH=dD==null?null:{$:1,$0:(dI=dD.$0,_4.addSeps(dF[0],dF[1],dF[2],dF[3],dF[4],dF[5],dF[6],dI[0],dI[1],dI[2],dI[3],dI[4],dI[5],dI[6]))},dH==null?dF:dH.$0));});});});}));});});}));};_4.finishCode=function(dr,ds,dt,du,dv,dw,dx){var dy,dz;dy=Z.concat(" ",q.map(function(dA){return"-d:"+dA;},q.sort(du)));dz=w.ofSeq(q.delay(function(){return q.append(dy!==""?["////"+dy]:[],q.delay(function(){return q.append(dx!=null?[(function(dA){return function(dB){return dA("////#cd @\""+p.toSafe(dB)+"\"");};}(a.id))(dx.$0)]:[],q.delay(function(){return q.append(q.map(function(dA){return function(dB){return dA("#I @\""+p.toSafe(dB)+"\"");};}(a.id),dv),q.delay(function(){return q.append(q.map(function(dA){return function(dB){return dA("#r @\""+p.toSafe(dB)+"\"");};}(a.id),dt),q.delay(function(){return q.map(function(dA){return function(dB){return dA("#nowarn \""+p.toSafe(dB)+"\"");};}(a.id),dw);}));}));}));}));}));return[Z.concat("\n",q.append(dz,ds)),G.ofSeq((q.mapFold(function(dA,dB){var dC;dC=dB[2];return[[[dB[0],dB[1]],[dB[3],dA,dA+dC]],dA+dC];},dz.get_Length(),dr))[0])];};_4.snippetRm=function(dr){return U.absorbO(function(){return new bF({$:0,$0:(function(ds){return function(dt){return ds("Snippet not found "+bt.p(dt));};}(a.id))(dr)});},_4.snippetORm(dr));};_4.getNextGeneration=function(){k.$cctor();return k.getNextGeneration;};_4.snippetFromRefORm=function(dr){return dr.$==1?_4.snippetFromPathORm(dr.$0):_4.snippetORm(dr.$0);};_4.separateCodeRm=function(dr){var ds;ds=bn.reader();return ds.Run(ds.Delay(function(){return ds.Bind(_4.indentRm(dr),function(dt){var du;function dv(dw,dx){return[Z.replicate(dt," ")+dw,dx];}du=(dt===0?[a.id,""]:[function(dw){return G.map(function(dx){return dv(dx[0],dx[1]);},dw);},(function(dw){return function(dx){return dw("("+a.String(dx)+")");};}(a.id))(dt)])[0];return ds.Bind(_4.prepareCodeRm(dr),function(dw){var dx,dy;dx=b1.separateDirectives(du(b1.separatePrepros(Z.SplitChars(dw,["\n"],0))));dy=dx[0];return ds.Return([[[dr.snpId,_4.snippetName(dr.snpName,dr.snpContent),G.length(dy),dt]],dy,dx[1],dx[2],dx[3],dx[4],dx[5]]);});});}));};_4.addSeps=function(dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE){return[dr.concat(dy),ds.concat(dz),G.ofSeq(q.distinct(q.append(dt,dA))),G.ofSeq(q.distinct(q.append(du,dB))),G.ofSeq(q.distinct(q.append(dv,dC))),G.ofSeq(q.distinct(q.append(dw,dD))),dx==null?dE:dx];};_4.reducedOthersORmMemo=function(){k.$cctor();return k.reducedOthersORmMemo;};_4.snippetFromPathORm=function(dr){var ds;ds=bn.reader();return ds.Run(ds.Delay(function(){return ds.Bind(_4.orderedRm(),function(dt){function du(dv,dw){return function(dx){return dv.length===0?[null,[[],dw]]:_4.snippetName(dx.snpName,dx.snpContent)!==G.get(dv,0)||!F.Equals(dx.snpParentIdO,dw)?[null,[dv,dw]]:dv.length>1?[null,[_0.array(dv,{$:1,$0:1},null),{$:1,$0:dx.snpId}]]:[{$:1,$0:dx},[[],dw]];};}return ds.Return(q.tryHead(q.choose(a.id,(q.mapFold(function(dv,dw){return(function(dx){return du(dx[0],dx[1]);}(dv))(dw);},[dr,null],dt))[0])));});}));};_4.indentRm=function(dr){function ds(dt){var du;du=bn.reader();return du.Run(du.Delay(function(){var dv,dw,dx,dy;dv=(dw=_4.propertyPairO("IndentChildren",dt),dw!=null&&dw.$==1?[(_1.parseIntO$1())(dw.$0[0]),(_1.parseIntO$1())(dw.$0[1])]:[null,null]);dx=dv[1];dy=dv[0];return du.Bind(_4.parentORm(dt),function(dz){return dz==null?du.Return([0,[dy==null?4:dy.$0,dx==null?4:dx.$0]]):du.Bind(ds(dz.$0),function(dA){var dB,dC;dB=dA[1][1];dC=dA[1][0];return du.Return([dC,[dC+(dy==null?dB:dy.$0),dx==null?dB:dx.$0]]);});});}));}return U.map(function(dt){return dt[0];},ds(dr));};_4.prepareCodeRm=function(dr){return U.ofFun(function(ds){return ds.prepCode(dr);});};_4.snippetName=function(dr,ds){var dt;return dr!==""?dr:(dt=q.tryHead(q.filter(function(du){return!(Z.StartsWith(du,"#")||Z.StartsWith(du,"[<")||Z.StartsWith(du,"//"));},q.map(Z.Trim,Z.SplitChars(ds,["\n"],1)))),dt==null?"<empty>":dt.$0);};_4.propertyPairO=function(dr,ds){var dt,du,dv,dw;dt=_4.propertyO(dr,ds);return dt==null?null:{$:1,$0:(du=Z.SplitStrings(dt.$0,["|-|"],1),[G.get(du,0),(dv=G.tryItem(1,du),(dw=G.get(du,0),dv==null?dw:dv.$0))])};};_4.parentORm=function(dr){return U.ofFun(function(ds){var dt;dt=dr.snpParentIdO;return dt==null?null:ds.fetcher(dt.$0);});};_4.propertyO=function(dr,ds){function dt(du,dv){return du===dr?{$:1,$0:dv}:null;}return G.tryPick(function(du){return dt(du[0],du[1]);},ds.snpProperties);};_5.New=function(dr,ds,dt,du,dv,dw,dx){return{snpId:dr,snpName:ds,snpContent:dt,snpParentIdO:du,snpPredIds:dv,snpProperties:dw,snpGeneration:dx};};_6=H.SnippetId=dj.Class({get_Id:function(){return this.$0;}},null,_6);_6.get_Empty=function(){return new _6({$:0,$0:"00000000-0000-0000-0000-000000000000"});};G.map=function(dr,ds){var dt,du,dv;dt=new a.Array(ds.length);for(du=0,dv=ds.length-1;du<=dv;du++)dt[du]=dr(ds[du]);return dt;};G.ofSeq=function(dr){var ds,dt;if(dr instanceof a.Array)return dr.slice();else if(dr instanceof x)return G.ofList(dr);else{ds=[];dt=bH.Get(dr);try{while(dt.MoveNext())ds.push(dt.Current());return ds;}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}}};G.find=function(dr,ds){var dt;dt=G.tryFind(dr,ds);return dt==null?l.FailWith("KeyNotFoundException"):dt.$0;};G.head=function(dr){G.nonEmpty(dr);return dr[0];};G.choose=function(dr,ds){var dt,du,dv,dw;dt=[];for(du=0,dv=ds.length-1;du<=dv;du++){dw=dr(ds[du]);dw==null?void 0:dt.push(dw.$0);}return dt;};G.tryPick=function(dr,ds){var dt,du,dv;dt=null;du=0;while(du<ds.length&&dt==null){dv=dr(ds[du]);dv!=null&&dv.$==1?dt=dv:void 0;du=du+1;}return dt;};G.tryFind=function(dr,ds){var dt,du;dt=null;du=0;while(du<ds.length&&dt==null){dr(ds[du])?dt={$:1,$0:ds[du]}:void 0;du=du+1;}return dt;};G.ofList=function(dr){var ds,dt;dt=[];ds=dr;while(!(ds.$==0)){dt.push(w.head(ds));ds=w.tail(ds);}return dt;};G.nonEmpty=function(dr){if(dr.length===0)l.FailWith("The input array was empty.");};G.sortInPlace=function(dr){G.mapInPlace(function(ds){return ds[0];},G.mapiInPlace(function(ds,dt){return[dt,ds];},dr).sort(F.Compare));};G.tryItem=function(dr,ds){return ds.length<=dr||dr<0?null:{$:1,$0:ds[dr]};};G.foldBack=function(dr,ds,dt){var du,dv,dw,dx,dy;du=dt;dw=ds.length;for(dx=1,dy=dw;dx<=dy;dx++)du=dr(ds[dw-dx],du);return du;};G.iter=function(dr,ds){var dt,du;for(dt=0,du=ds.length-1;dt<=du;dt++)dr(ds[dt]);};G.findIndex=function(dr,ds){var dt;dt=G.tryFindIndex(dr,ds);return dt==null?l.FailWith("KeyNotFoundException"):dt.$0;};G.tryFindIndex=function(dr,ds){var dt,du;dt=null;du=0;while(du<ds.length&&dt==null){dr(ds[du])?dt={$:1,$0:du}:void 0;du=du+1;}return dt;};G.exists=function(dr,ds){var dt,du,dv,dw;dt=false;du=0;dw=G.length(ds);while(!dt&&du<dw)if(dr(ds[du]))dt=true;else du=du+1;return dt;};G.partition=function(dr,ds){var dt,du,dv,dw;dt=[];du=[];for(dv=0,dw=ds.length-1;dv<=dw;dv++)if(dr(ds[dv]))dt.push(ds[dv]);else du.push(ds[dv]);return[dt,du];};G.filter=function(dr,ds){var dt,du,dv;dt=[];for(du=0,dv=ds.length-1;du<=dv;du++)if(dr(ds[du]))dt.push(ds[du]);return dt;};G.create=function(dr,ds){var dt,du,dv;dt=new a.Array(dr);for(du=0,dv=dr-1;du<=dv;du++)dt[du]=ds;return dt;};G.sortInPlaceBy=function(dr,ds){G.mapInPlace(function(dt){return dt[0];},G.mapiInPlace(function(dt,du){return[du,[dr(du),dt]];},ds).sort(function(dt,du){return F.Compare(dt[1],du[1]);}));};G.map2=function(dr,ds,dt){var du,dv,dw;G.checkLength(ds,dt);du=new a.Array(dt.length);for(dv=0,dw=dt.length-1;dv<=dw;dv++)du[dv]=dr(ds[dv],dt[dv]);return du;};G.concat=function(dr){return a.Array.prototype.concat.apply([],G.ofSeq(dr));};G.checkLength=function(dr,ds){if(dr.length!==ds.length)l.FailWith("The arrays have different lengths.");};G.pick=function(dr,ds){var dt;dt=G.tryPick(dr,ds);return dt==null?l.FailWith("KeyNotFoundException"):dt.$0;};G.init=function(dr,ds){var dt,du,dv;dr<0?l.FailWith("Negative size given."):null;dt=new a.Array(dr);for(du=0,dv=dr-1;du<=dv;du++)dt[du]=ds(du);return dt;};G.forall=function(dr,ds){var dt,du,dv,dw;dt=true;du=0;dw=G.length(ds);while(dt&&du<dw)if(dr(ds[du]))du=du+1;else dt=false;return dt;};_7.New=function(dr,ds,dt,du,dv,dw){return{generation:dr,ordered:ds,fetcher:dt,predecesorsCache:du,reducedCache:dv,prepCode:dw};};_8.ifUndef=function(dr,ds){return!ds?dr:ds;};_8.serField=function(dr,ds,dt,du,dv){return[dr,function(dw){return du(ds(dw));},function(dw){return function(dx){return dt(dv(dx),dw);};}];};_8.serString=function(){k.$cctor();return k.serString;};_8.serOpt=function(dr,ds){var dt,du,dv,dw,dx,dy;function dz(dC){return dC==null?"null":dC.$0;}function dA(dC){return null;}function dB(dC){return{$:1,$0:dC};}dt=[dr,ds];return[(du=(dv=dt[0],function(dC){return dC==null?null:{$:1,$0:dv(dC.$0)};}),function(dC){return dz(du(dC));}),(dw=(dx=(dy=dt[1],function(dC){return dB(dy(dC));}),function(dC){return _8.ifUndefF(dA,dx,dC);}),function(dC){return dw(a.id(dC));})];};_8.serSet=function(dr,ds){var dt,du,dv,dw,dx,dy,dz;function dA(dC){return[];}function dB(dC){return new bB.New(dC);}dt=[dr,ds];return[(du=(dv=dt[0],function(dC){return new bB.New$1(bS.OfSeq(q.map(dv,dC)));}),function(dC){return _8.sprintA(du(dC));}),(dw=(dx=(dy=(dz=dt[1],function(dC){return q.map(dz,dC);}),function(dC){return _8.ifUndefF(dA,dy,dC);}),function(dC){return dx(a.id(dC));}),function(dC){return dB(dw(dC));})];};_8.serDup=function(dr,ds,dt,du){var dv,dw,dx;function dy(dA){return[dv[1](null),dw[1](null)];}function dz(dA){return[dv[1](G.get(dA,0)),dw[1](G.get(dA,1))];}dv=[dr,ds];dw=[dt,du];return[function(dA){return(((dj.Curried3(function(dB,dC,dD){return dB("["+p.toSafe(dC)+", "+p.toSafe(dD)+"]");}))(a.id))(dv[0](dA[0])))(dw[0](dA[1]));},(dx=function(dA){return _8.ifUndefF(dy,dz,dA);},function(dA){return dx(a.id(dA));})];};_8.serArr=function(dr,ds){var dt,du,dv,dw,dx,dy,dz;function dA(dB){return[];}dt=[dr,ds];return[(du=(dv=dt[0],function(dB){return G.map(dv,dB);}),function(dB){return _8.sprintA(du(dB));}),(dw=(dx=(dy=(dz=dt[1],function(dB){return q.map(dz,dB);}),function(dB){return _8.ifUndefF(dA,dy,dB);}),function(dB){return dx(a.id(dB));}),function(dB){return G.ofSeq(dw(dB));})];};_8.serInt=function(){k.$cctor();return k.serInt;};_8.deserGuid=function(){k.$cctor();return k.deserGuid;};_8.ifUndefF=function(dr,ds,dt){return!dt?dr(dt):ds(dt);};_8.sprintA=function(dr){var ds;ds=Z.concat(", ",dr);return(function(dt){return function(du){return dt("["+p.toSafe(du)+"]");};}(a.id))(ds);};_9.Activate=function(dr){var ds,du,dv,dw,dx,dy,dz;function dt(dA){var dB,dC,dD,dE,dF;if(F.Equals(dA,null))return dA;else if(typeof dA=="object"){if(dA instanceof a.Array)return _9.shallowMap(dt,dA);else{dB=_9.shallowMap(dt,dA.$V);dC=dA.$T;if(dC===void 0)return dB;else{dD=G.get(du,dC);if(dD===1)return w.ofArray(dB);else if(dD===2)return self.WebSharper.Decimal.CreateDecimalBits(dB);else{dE=new(G.get(du,dC))();for(var dG in dB)if(function(dH){dE[dH]=dB[dH];return false;}(dG))break;return dE;}}}}else return dA;}du=dr?dr.$TYPES:void 0;if(du===void 0)ds=dr;else{for(dv=0,dw=G.length(du)-1;dv<=dw;dv++){dz=G.get(du,dv);switch(!F.Equals(dz,null)&&dz.length===3?G.get(dz,0)==="WebSharper"?G.get(dz,1)==="List"?G.get(dz,2)==="T"?0:(dy=dz,2):(dy=dz,2):(dy=dz,2):!F.Equals(dz,null)&&dz.length===2?G.get(dz,0)==="WebSharper"?G.get(dz,1)==="Decimal"?1:(dy=dz,2):(dy=dz,2):(dy=dz,2)){case 0:dx=1;break;case 1:dx=2;break;case 2:dx=_9.lookup(dy);break;}G.set(du,dv,dx);}ds=dr.$DATA;}return dt(ds);};_9.shallowMap=function(dr,ds){var dt,du;if(ds instanceof a.Array)return G.map(dr,ds);else if(typeof ds=="object"){dt={};for(var dv in ds)if(function(dw){dt[dw]=dr(ds[dw]);return false;}(dv))break;return dt;}else return ds;};_9.lookup=function(dr){var ds,dt,du,dv,dw;du=G.length(dr);ds=self;dt=0;while(dt<du){dv=G.get(dr,dt);dw=ds[dv];!F.Equals(typeof dw,void 0)?(ds=dw,dt=dt+1):l.FailWith("Invalid server reply. Failed to find type: "+dv);}return ds;};$.Id=dj.Curried3(function(dr,ds,dt){return dt;});$.EncodeUnion=function(dr,ds,dt){return function(){return function(du){var dv,dw;function dx(dy,dz,dA,dB){var dC,dD,dE;if(dy===null){dC=(dA(null))(du.$0);for(var dF in dC)if(function(dG){dv[dG]=dC[dG];return false;}(dF))break;}else if(dB===0)dv[dz]=(dA(null))(du[dy]);else if(dB===1){dE=du[dy];dE==null?void 0:dv[dz]=(dA(null))(dE.$0);}else l.FailWith("Invalid field option kind");}return typeof du==="object"&&du!=null?(dv={},(dw=G.get(dt,du.$),(F.Equals(typeof ds,"string")?dv[ds]=dw[0]:void 0,G.iter(function(dy){return dx(dy[0],dy[1],dy[2],dy[3]);},dw[1]),dv))):du;};};};$.DecodeUnion=function(dr,ds,dt){return function(){return function(du){var dv,dw,dz,dA,dB;function dx(dC,dD){return dC===dw;}function dy(dC,dD,dE,dF){var dG;if(dC===null){dG=(dE(null))(du);dD?delete dG[ds]:void 0;dz.$0=dG;}else if(dF===0)dz[dC]=(dE(null))(du[dD]);else if(dF===1)dz[dC]=du.hasOwnProperty(dD)?{$:1,$0:(dE(null))(du[dD])}:null;else l.FailWith("Invalid field option kind");}if(typeof du==="object"&&du!=null){dz=dr===void 0?{}:new dr();if(F.Equals(typeof ds,"string"))dv=(dw=du[ds],G.findIndex(function(dC){return dx(dC[0],dC[1]);},dt));else{dA=[void 0];for(var dC in ds)if(function(dD){return du.hasOwnProperty(dD)&&(dA[0]=ds[dD],true);}(dC))break;dv=dA[0];}dz.$=dv;G.iter(function(dD){return dy(dD[0],dD[1],dD[2],dD[3]);},(G.get(dt,dv))[1]);return dz;}else return du;};};};$.DecodeArray=function(dr){return $.EncodeArray(dr);};$.EncodeArray=dj.Curried3(function(dr,ds,dt){return G.map(dr(),dt);});$.EncodeRecord=function(dr,ds){return function(){return function(dt){var du;function dv(dw,dx,dy){var dz;if(dy===0)du[dw]=(dx(null))(dt[dw]);else if(dy===1){dz=dt[dw];dz==null?void 0:du[dw]=(dx(null))(dz.$0);}else if(dy===2){if(dt.hasOwnProperty(dw))du[dw]=(dx(null))(dt[dw]);}else if(dy===3){if(dt[dw]===void 0)du[dw]=(dx(null))(dt[dw]);}else l.FailWith("Invalid field option kind");}du={};G.iter(function(dw){return dv(dw[0],dw[1],dw[2]);},ds);return du;};};};$.DecodeRecord=function(dr,ds){return function(){return function(dt){var du;function dv(dw,dx,dy){if(dy===0){if(dt.hasOwnProperty(dw))du[dw]=(dx(null))(dt[dw]);else l.FailWith("Missing mandatory field: "+dw);}else if(dy===1)du[dw]=dt.hasOwnProperty(dw)?{$:1,$0:(dx(null))(dt[dw])}:null;else if(dy===2){if(dt.hasOwnProperty(dw))du[dw]=(dx(null))(dt[dw]);}else if(dy===3){if(dt[dw]===void 0)du[dw]=(dx(null))(dt[dw]);}else l.FailWith("Invalid field option kind");}du=dr===void 0?{}:new dr();G.iter(function(dw){return dv(dw[0],dw[1],dw[2]);},ds);return du;};};};$.EncodeSet=dj.Curried3(function(dr,ds,dt){var du,dv;du=[];dv=dr();q.iter(function(dw){du.push(dv(dw));},dt);return du;});$.EncodeTuple=dj.Curried3(function(dr,ds,dt){return G.map2(function(du,dv){return(du(null))(dv);},dr,dt);});ba.Create=function(dr){return bU.New(false,dr,ba.forceLazy);};ba.forceLazy=function(){var dr;dr=this.v();this.c=true;this.v=dr;this.f=ba.cachedLazy;return dr;};ba.cachedLazy=function(){return this.v;};bb.LoadFilesAsync=function(dr){var ds;ds=null;return bV.Delay(function(){return bV.For(dr,function(dt){return bV.Bind(bb.LoadFile(dt),function(){return bV.Return(null);});});});};bb.LoadFile=function(dr){var ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF;function dG(dI,dJ){return Z.EndsWith(dJ,dI)?{$:1,$0:null}:null;}function dH(dI,dJ){try{dE.onload=dI;self.document.head.appendChild(dE);}catch(dK){dJ(dK);}}ds=(dt=((dv=dG(".js",dr),dv!=null&&dv.$==1)?!self.document.querySelector("script[src='"+dr+"']")||((dw=dG(".fsx",dr),dw!=null&&dw.$==1)?!self.document.querySelector("script[src='"+dr+"']")||(dx=dG(".fs",dr),dx!=null&&dx.$==1)&&!self.document.querySelector("script[src='"+dr+"']"):(dy=dG(".fs",dr),dy!=null&&dy.$==1)&&!self.document.querySelector("script[src='"+dr+"']")):(dz=dG(".fsx",dr),dz!=null&&dz.$==1)?!self.document.querySelector("script[src='"+dr+"']")||(dA=dG(".fs",dr),dA!=null&&dA.$==1)&&!self.document.querySelector("script[src='"+dr+"']"):(dB=dG(".fs",dr),dB!=null&&dB.$==1)&&!self.document.querySelector("script[src='"+dr+"']"))?{$:1,$0:bb.createScript(dr)}:(dC=dG(".css",dr),dC!=null&&dC.$==1)?{$:1,$0:bb.createCss(dr)}:(dD=dG(".html",dr),dD!=null&&dD.$==1)?{$:1,$0:bb.createHtml(dr)}:null,dt==null?null:{$:1,$0:(dE=dt.$0,bV.FromContinuations(function(dI,dJ,dK){return dH.apply(null,[dI,dJ,dK]);}))});return ds==null?(dF=null,bV.Delay(function(){return bV.Return(null);})):ds.$0;};bb.createScript=function(dr){var ds;ds=self.document.createElement("script");ds.setAttribute("type","text/javascript");ds.setAttribute("src",dr);return ds;};bb.createCss=function(dr){var ds;ds=self.document.createElement("link");ds.setAttribute("rel","stylesheet");ds.setAttribute("type","text/css");ds.setAttribute("href",dr);return ds;};bb.createHtml=function(dr){var ds;ds=self.document.createElement("link");ds.setAttribute("rel","import");ds.setAttribute("type","text/html");ds.setAttribute("href",dr);return ds;};bc.includes=function(){k.$cctor();return k.includes;};bd=bc.Editor=dj.Class({},g,bd);bg=bf.Address=dj.Class({get_txt:function(){return this.$0;}},null,bg);bf.MessageBrokerId=function(){k.$cctor();return k.MessageBrokerId;};bf.MessageBrokerAddress=function(){k.$cctor();return k.MessageBrokerAddress;};bf.msgType=function(dr,ds){return cn.New(ds.from,ds.destination,dr,ds.subtype,ds.id,ds.payload,ds.replier);};bf.extractEndPoint=function(){return G.get(Z.SplitChars(dp.href.substring(dp.href.indexOf("//")+2),["/"],0),0);};bf.from=function(dr,ds){return cn.New(dr,ds.destination,ds.msgType,ds.subtype,ds.id,ds.payload,ds.replier);};bf.replier=function(dr,ds){return cn.New(ds.from,ds.destination,ds.msgType,ds.subtype,ds.id,ds.payload,dr);};bf.makeReply=function(dr){return bf.replier(cs.NoReply,bf.msgType(b5.MsgReply,dr));};bf.mapPayload=function(dr,ds){return cn.New(ds.from,ds.destination,ds.msgType,ds.subtype,ds.id,dr(ds.payload),ds.replier);};bf.destination=function(dr,ds){return cn.New(ds.from,dr,ds.msgType,ds.subtype,ds.id,ds.payload,ds.replier);};bi.set_rootDir=function(dr){k.$cctor();k.rootDir=dr;};bi.set_srcDir=function(dr){k.$cctor();k.srcDir=dr;};bi.srcDir=function(){k.$cctor();return k.srcDir;};bi.id=function(){k.$cctor();return k.id;};bi.annotationsV=function(){k.$cctor();return k.annotationsV;};bk=bj.AjaxRemotingProvider=dj.Class({AsyncBase:function(dr,ds){var dt,du;dt=this;du=null;return bV.Delay(function(){var dv,dw;dv=bj.makeHeaders(dr);dw=bj.makePayload(ds);return bV.Bind(bV.GetCT(),function(dx){return bV.FromContinuations(function(dy,dz,dA){var dB,dC,dD;function dE(dF){return dB[0]?(dB[0]=false,dA(new cI.New(dx))):null;}dB=[true];dC=bV.Register(dx,function(){dE();});dD=dt.get_EndPoint();return bj.AjaxProvider().Async(dD,dv,dw,function(dF){if(dB[0]){dB[0]=false;dC.Dispose();dy(_9.Activate(dm.parse(dF)));}},function(dF){if(dB[0]){dB[0]=false;dC.Dispose();dz(dF);}});});});});},get_EndPoint:function(){return bj.EndPoint();},Async:function(dr,ds){return this.AsyncBase(dr,ds);}},g,bk);bk.New=dj.Ctor(function(){g.New.call(this);},bk);bl=m.ListModel=dj.Class({FindByKey:function(dr){var ds;ds=this;return G.find(function(dt){return F.Equals(ds.key(dt),dr);},this["var"].Get());},Set:function(dr){this["var"].Set(this.storage.SSet(dr));this.ObsoleteAll();},TryFindByKeyAsView:function(dr){var ds;ds=this;return function(){var dt,du,dv;dt=(du=null,[ds.it.TryGetValue(dr,{get:function(){return du;},set:function(dw){du=dw;}}),du]);return dt[0]?dt[1]:(dv=bK.New({$:2,$0:ds.TryFindByKey(dr),$1:[]}),(ds.it.Add(dr,dv),dv));};},TryFindByKey:function(dr){var ds;ds=this;return G.tryFind(function(dt){return F.Equals(ds.key(dt),dr);},this["var"].Get());},ObsoleteAll:function(){q.iter(function(dr){bK.Obsolete(dr.V);},this.it);this.it.Clear();},Append:function(dr){var ds,dt,du,dv;ds=this;dt=this["var"].Get();du=this.key(dr);dv=G.tryFindIndex(function(dw){return F.Equals(ds.key(dw),du);},dt);dv!=null&&dv.$==1?this["var"].Set(this.storage.SSetAt(dv.$0,dr,dt)):this["var"].Set(this.storage.SAppend(dr,dt));this.ObsoleteKey(du);},ObsoleteKey:function(dr){var ds,dt;ds=(dt=null,[this.it.TryGetValue(dr,{get:function(){return dt;},set:function(du){dt=du;}}),dt]);ds[0]?(bK.Obsolete(ds[1]),this.it.Remove(dr)):void 0;},GetEnumerator:function(){return bH.Get(this["var"].Get());},GetEnumerator0:function(){return bH.Get0(this["var"].Get());}},g,bl);bl.New$1=dj.Ctor(function(dr){bl.New$2.call(this,dr,[]);},bl);bl.New$2=dj.Ctor(function(dr,ds){var dt;dt=G.ofSeq(ds);bl.New$3.call(this,dr,z.Create$1(dt),cf.InMemory(dt));},bl);bl.New$3=dj.Ctor(function(dr,ds,dt){g.New.call(this);this.key=dr;this["var"]=ds;this.storage=dt;this.v=t.Map(function(du){return du.slice();},this["var"].get_View());this.it=new bW.New$5();},bl);bm.getParentIdONotMemo=function(dr){var ds;ds=bm.snippets().TryFindByKey(dr);return ds==null?null:ds.$0.snpParentIdO;};bm.parentCache=function(){k.$cctor();return k.parentCache;};bm.currentSnippetIdOV=function(){k.$cctor();return k.currentSnippetIdOV;};bm.codeSnippetIdOV=function(){k.$cctor();return k.codeSnippetIdOV;};bm.iterReader=function(dr){U.iter(function(ds){bm.handleError(ds);},a.ignore,bm.snippetsColl(),dr);};bm.clearPredsCache=function(){(bm.clearPreds())();(bm.clearReduc())();(bm.clearParent())();};bm.hierarchy=function(){k.$cctor();return k.hierarchy;};bm.snippets=function(){k.$cctor();return k.snippets;};bm.isDescendantOf=function(dr,ds){var dt,du,dv;return F.Equals(ds,dr)?false:(dt=(du=(bm.getParentIdO())(ds),du==null?null:{$:1,$0:(dv=du.$0,F.Equals(dv,dr)||bm.isDescendantOf(dr,dv))}),dt==null?false:dt.$0);};bm.setSnippet=function(dr){if(!F.Equals(dr.snpId.get_Id(),"00000000-0000-0000-0000-000000000000"))bm.snippets().Append(_5.New(dr.snpId,dr.snpName,dr.snpContent,dr.snpParentIdO,dr.snpPredIds,dr.snpProperties,bm.generation().Get()+1));};bm.currentSnippetW=function(){k.$cctor();return k.currentSnippetW;};bm.collapsedV=function(){k.$cctor();return k.collapsedV;};bm.runReader=function(dr,ds){return N.defaultWith(dr,bm.runReaderResult(ds));};bm.handleError=function(dr){throw new ca(a.String(dr));};bm.codeSnippetW=function(){k.$cctor();return k.codeSnippetW;};bm.codeAndStartsW=function(){k.$cctor();return k.codeAndStartsW;};bm.generation=function(){k.$cctor();return k.generation;};bm.CurrentSnippetIdW=function(){k.$cctor();return k.CurrentSnippetIdW;};bm.SaveAsClassW=function(){k.$cctor();return k.SaveAsClassW;};bm.snippetsColl=function(){return _7.New(bm.generation().Get(),(bm.snippets())["var"].Get(),function(dr){return bm.snippets().TryFindByKey(dr);},bm.predsCache,bm.reducCache,bm.prepCode);};bm.clearPreds=function(){k.$cctor();return k.clearPreds;};bm.clearReduc=function(){k.$cctor();return k.clearReduc;};bm.clearParent=function(){k.$cctor();return k.clearParent;};bm.getParentIdO=function(){k.$cctor();return k.getParentIdO;};bm.runReaderResult=function(dr){return U.run(bm.snippetsColl(),dr);};bm.predsCache=function(){k.$cctor();return k.predsCache;};bm.reducCache=function(){k.$cctor();return k.reducCache;};bm.prepCode=function(dr){return Z.Replace(Z.Replace(dr.snpContent,"##"+"FSHARPSTATION_ID"+"##",bi.id()),"##"+"FSHARPSTATION_ENDPOINT"+"##",self.location.href);};bn.op_BarGreaterGreater=function(dr,ds){return U.map(ds,dr);};bn.op_GreaterGreaterEquals=function(dr,ds){return U.bind(ds,dr);};bn.reader=function(){k.$cctor();return k.reader$3;};bn.rtn=function(dr){return U.rtn(dr);};bo.insertWO=function(dr){return dr==null?t.Const(null):t.Map(function(ds){return{$:1,$0:ds};},dr.$0);};bp.listNodes=function(dr,ds){return bn.op_BarGreaterGreater(U.sequenceSeq(q.map(function(dt){return bn.op_BarGreaterGreater(bn.op_GreaterGreaterEquals(dt.isExpandedRm(),function(du){var dv;return du?bn.op_GreaterGreaterEquals(bn.op_BarGreaterGreater(dt.childrenRm(),G.ofSeq),(dv=dr+1,function(dw){return bp.listNodes(dv,dw);})):bn.rtn([]);}),function(du){return q.append([[dt,dr]],du);});},ds)),function(dt){return q.collect(a.id,dt);});};br.DragNone={$:0};bs.editorConfigO=function(){k.$cctor();return k.editorConfigO;};bs.getSnippetModel=function(dr){var ds,dt,du;ds=(dt="snpId:"+(du=dr.get_Id(),a.String(du)),self.monaco.Uri.parse(dt));return bs.getModelUri(bm.runReader(function(dv){return l.FailWith(a.String(dv));},_4.snippetRm(dr)).snpContent,ds);};bs.parse=function(dr,ds){var dt;b4.iterA(function(du){H.print(du);},function(){H.print();},(dt=M.asyncResult(),dt.Run(dt.Delay(function(){var du,dv;du="Parsing...\n"+Y.skipFirstLine$1(bi.annotationsV().Get());bi.annotationsV().Set(du);bs.startsV().Set(ds);dv=Y.splitByChar$1("\n",dr);bs.set_fileName(b1.getSourceDir(bi.srcDir(),dv)+"/"+bi.id()+".fsx");return dt.Bind$1(b3.parseCode(bs.fileName(),dv,true,0),function(dw){var dx;dx=Z.concat("\n",q.append(w.ofArray(["Parsed!"]),q.map(function(dy){var dz,dA,dB,dC,dD;function dE(dF,dG){return dy.StartLine>dG[1]&&dy.StartLine<=dG[2];}dz=(dA=q.tryFind(function(dF){return dE(dF[0],dF[1]);},ds),(bs.defaultStart())(dA));dB=dz[1][0];dC=dz[1][1];return((((((((((dj.Curried(function(dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO){return dF(p.toSafe(dG)+" ("+a.String(dH)+", "+a.String(dI)+") - ("+a.String(dJ)+", "+a.String(dK)+") "+p.toSafe(dL)+"("+p.toSafe(dM)+") \""+p.toSafe(dN)+": "+p.toSafe(dO)+"\".");},10))(a.id))(dy.Severity==="Error"?"Err":"Warn"))(dy.StartLine-dC))(dy.StartColumn-dB))(dy.EndLine-dC))(dy.EndColumn-dB))(dz[0][1]))((dD=dz[0][0].get_Id(),a.String(dD))))(dy.Subcategory))(dy.Message);},dw[0].Errors)));bi.annotationsV().Set(dx);q.iter(function(dy){H.print(dy);},dw[1]);return dt.Zero();});}))));};bs.getModelUri=function(dr,ds){var dt,du,dv;dt=(du=(dv=self.monaco.editor.getModel(ds),!dv?null:{$:1,$0:dv}),du==null?self.monaco.editor.createModel("","fsharp",ds):du.$0);dt.getValue()!==dr?dt.setValue(dr):void 0;return dt;};bs.startsV=function(){k.$cctor();return k.startsV;};bs.set_fileName=function(dr){k.$cctor();k.fileName=dr;};bs.fileName=function(){k.$cctor();return k.fileName;};bs.defaultStart=function(){k.$cctor();return k.defaultStart;};bt.p=function(dr){return"SnippetId "+p.prettyPrint(dr.$0);};bu.j$4=function(){return bu._v$4?bu._v$4:bu._v$4=($.EncodeUnion(void 0,"$",[[0,[["$0","ResultValue",bu.j$6,0]]],[1,[["$0","ErrorValue",bu.j$5,0]]]]))();};bv.j$4=function(){return bv._v$4?bv._v$4:bv._v$4=($.DecodeUnion(void 0,"$",[[0,[]],[1,[["$0","Item",$.DecodeArray(bv.j$5),0]]],[2,[["$0","Item",bv.j$5,0]]],[3,[["$0","Item",bv.j$5,0]]],[4,[["$0","Item",$.DecodeArray($.Id()),0]]],[5,[]]]))();};bt.p$3=function(dr){return dr.$==1?"RefSnippetPath "+p.printArray(p.prettyPrint,dr.$0):"RefSnippetId "+bt.p(dr.$0);};bt.p$4=function(dr){return dr.$==5?"MsgGetUrl":dr.$==4?"MsgAction "+p.printArray(p.prettyPrint,dr.$0):dr.$==3?"MsgGetPredecessors "+bt.p$3(dr.$0):dr.$==2?"MsgGetCode "+bt.p$3(dr.$0):dr.$==1?"MsgGetSnippets "+p.printArray(function(ds){return bt.p$3(ds);},dr.$0):"MsgGetId";};bu.j$6=function(){return bu._v$6?bu._v$6:bu._v$6=($.EncodeUnion(void 0,"$",[[0,[["$0","Item",$.Id(),0]]],[1,[["$0","Item",$.EncodeArray(bu.j$7),0]]]]))();};bu.j$5=function(){return bu._v$5?bu._v$5:bu._v$5=($.EncodeUnion(bF,"$",[[0,[["$0","Item",$.Id(),0]]],[1,[["$0","Item",$.Id(),0]]],[2,[["$0","Item",$.Id(),0]]],[3,[["$0","Item1",$.Id(),0],["$1","Item2",$.Id(),0]]]]))();};bv.j$5=function(){return bv._v$5?bv._v$5:bv._v$5=($.DecodeUnion(void 0,"$",[[0,[["$0","Item",bv.j$6,0]]],[1,[["$0","Item",$.DecodeArray($.Id()),0]]]]))();};bu.j=function(){return bu._v?bu._v:bu._v=($.EncodeRecord(void 0,[["from",bu.j$1,0],["destination",bu.j$1,0],["msgType",bu.j$2,0],["subtype",$.Id(),0],["id",$.Id(),0],["payload",$.Id(),0],["replier",bu.j$3,0]]))();};bv.j=function(){return bv._v?bv._v:bv._v=($.DecodeRecord(void 0,[["from",bv.j$1,0],["destination",bv.j$1,0],["msgType",bv.j$2,0],["subtype",$.Id(),0],["id",$.Id(),0],["payload",$.Id(),0],["replier",bv.j$3,0]]))();};bu.j$7=function(){return bu._v$7?bu._v$7:bu._v$7=($.EncodeRecord(void 0,[["snpId",bu.j$8,0],["snpName",$.Id(),0],["snpContent",$.Id(),0],["snpParentIdO",bu.j$8,1],["snpPredIds",$.EncodeSet(bu.j$8),0],["snpProperties",$.EncodeArray($.EncodeTuple([$.Id(),$.Id()])),0],["snpGeneration",$.Id(),0]]))();};bv.j$6=function(){return bv._v$6?bv._v$6:bv._v$6=($.DecodeUnion(_6,"$",[[0,[["$0","Item",$.Id(),0]]]]))();};bt.p$9=function(dr){return dr.$==3?"Close":dr.$==2?"Open":dr.$==1?"Error":"Message "+bw.p(dr.$0);};bu.j$1=function(){return bu._v$1?bu._v$1:bu._v$1=($.EncodeUnion(bg,"$",[[0,[["$0","address",$.Id(),0]]]]))();};bu.j$2=function(){return bu._v$2?bu._v$2:bu._v$2=($.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};bu.j$3=function(){return bu._v$3?bu._v$3:bu._v$3=($.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};bv.j$1=function(){return bv._v$1?bv._v$1:bv._v$1=($.DecodeUnion(bg,"$",[[0,[["$0","address",$.Id(),0]]]]))();};bv.j$2=function(){return bv._v$2?bv._v$2:bv._v$2=($.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};bv.j$3=function(){return bv._v$3?bv._v$3:bv._v$3=($.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};bu.j$8=function(){return bu._v$8?bu._v$8:bu._v$8=($.EncodeUnion(_6,"$",[[0,[["$0","Item",$.Id(),0]]]]))();};bw.p=function(dr){return"{"+("from = "+bt.p$6(dr.from))+"; "+("destination = "+bt.p$6(dr.destination))+"; "+("msgType = "+bt.p$7(dr.msgType))+"; "+("subtype = "+p.prettyPrint(dr.subtype))+"; "+("id = "+p.prettyPrint(dr.id))+"; "+("payload = "+p.prettyPrint(dr.payload))+"; "+("replier = "+bt.p$8(dr.replier))+"}";};bt.p$6=function(dr){return"Address "+p.prettyPrint(dr.$0);};bt.p$7=function(dr){return dr.$==5?"MsgRequestForEcho":dr.$==4?"MsgRequestForId":dr.$==3?"MsgFromBroker":dr.$==2?"MsgReply":dr.$==1?"MsgRequest":"MsgInformation";};bt.p$8=function(dr){return dr.$==2?"Receiver":dr.$==1?"Broker":"NoReply";};bx.serSnippetId=function(){k.$cctor();return k.serSnippetId;};bx.serSnippet=function(){k.$cctor();return k.serSnippet;};by.New=function(dr,ds,dt){return{snippets:dr,generation:ds,collapsed:dt};};bz.serSnippetId2=function(){k.$cctor();return k.serSnippetId2;};bz.serSnippet2=function(){k.$cctor();return k.serSnippet2;};bB=bA.FSharpSet=dj.Class({Equals:function(dr){return this.get_Count()===dr.get_Count()&&q.forall2(F.Equals,this,dr);},Contains:function(dr){return bS.Contains(dr,this.tree);},get_Count:function(){var dr;dr=this.tree;return dr==null?0:dr.Count;},GetEnumerator$1:function(){return bH.Get(bS.Enumerate(false,this.tree));},GetHashCode:function(){return -1741749453+F.Hash(G.ofSeq(this));},CompareTo0:function(dr){return q.compareWith(F.Compare,this,dr);},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,bB);bB.New=dj.Ctor(function(dr){bB.New$1.call(this,bS.OfSeq(dr));},bB);bB.New$1=dj.Ctor(function(dr){g.New.call(this);this.tree=dr;},bB);H.delayed=function(dr,ds){var dt;dt=[null];return function(du){var dv,dw;dv=dt[0];dv==null?void 0:dv.$0.Cancel$1();dt[0]={$:1,$0:new bQ.New()};bV.Start((dw=null,bV.Delay(function(){return bV.Bind(bV.Sleep(dr),function(){ds(du);return bV.Zero();});})),{$:1,$0:dt[0].$0});};};bD=bf.WSMessagingClient=dj.Class({sendAndForget:function(dr){var ds,dt;ds=this;dt=M.asyncResult();return dt.Run(dt.Delay(function(){return dt.Bind$1(ds.getServer(),function(du){ds.postR(du,cs.NoReply,dr);return dt.Zero();});}));},connectToWebSocketServer:function(){var dr,ds;dr=this;(function(dt){return dt("in connectToWebSocketServer");}(function(dt){dl.log(dt);}));ds=null;return bV.Delay(function(){return bV.Bind(((dr.connectStateful(dr.wsEndPoint))(dr.clientId))(function(dt){var du;du=null;return bV.Delay(function(){return bV.Return([0,function(dv){return function(dw){var dx;dx=null;return bV.Delay(function(){return bV.Combine(bV.TryWith(bV.Delay(function(){return dw.$==2?((function(dy){return function(dz){return dy("WebSocket "+p.toSafe(dz)+" connection open.");};}(function(dy){dl.log(dy);}))(dr.clientId),dr.serverO={$:1,$0:dt},bV.Zero()):dw.$==3?((function(dy){return function(dz){return dy("WebSocket "+p.toSafe(dz)+" connection closed.");};}(function(dy){dl.log(dy);}))(dr.clientId),dr.close(),bV.Zero()):dw.$==1?((function(dy){return function(dz){return dy("WebSocket "+p.toSafe(dz)+" connection error!");};}(function(dy){dl.log(dy);}))(dr.clientId),bV.Zero()):(dr.processMessage(dw.$0),bV.Zero());}),function(dy){(((dj.Curried3(function(dz,dA,dB){return dz("msg: "+bt.p$9(dA)+" \nexn:"+p.prettyPrint(dB));}))(function(dz){dl.log(dz);}))(dw))(dy);return bV.Zero();}),bV.Delay(function(){return bV.Return(dv);}));});};}]);});}),function(){(function(dt){return dt("connectToWebSocketServer with server");}(function(dt){dl.log(dt);}));return bV.Zero();});});},getServer:function(){return this.checkServer.PostAndAsyncReply(function(dr){return[dr,null];},null);},postR:function(dr,ds,dt){try{dr.FsRoot_Library2_WebSockets_IServer$Post(bf.replier(ds,bf.from(this.clientAddress,dt)));}catch(du){this.serverO=null;throw du;}},close:function(){var dr;dr=this.serverO;dr==null?void 0:(dr.$0.FsRoot_Library2_WebSockets_IServer$Close(),this.serverO=null);},processMessage:function(dr){var ds,dt,du,dv,dw,dz;dt=this;du=dr.msgType;function dx(dA){dt.reply(dA);}function dy(dA){return bV.Return(dA);}switch(du.$==2?0:du.$==0?1:du.$==1?2:du.$==5?3:du.$==4?4:0){case 0:this.processReply(dr);break;case 1:(((dj.Curried3(function(dA,dB,dC){return dA("Information from '"+p.toSafe(dB)+"': "+p.toSafe(dC));}))(function(dA){dl.log(dA);}))(dr.from.get_txt()))((($.Id())())(dm.parse(dr.payload)));break;case 2:dv=this.payloadProcessorO;dv!=null&&dv.$==1?bV.Start(bV.Bind(dt.mapPayloadWrap(dv.$0,dr),(dw=function(dA){return dx(bf.makeReply(dA));},function(dA){return dy(dw(dA));})),null):dr.replier.$===2?null:null;break;case 3:dt.reply(bf.msgType(b5.MsgInformation,bf.mapPayload(a.id,dr)));break;case 4:dt.reply(bf.msgType(b5.MsgInformation,(dz=bf.makeReply(dr),cn.New(dz.from,dz.destination,dz.msgType,dz.subtype,dz.id,dm.stringify((($.Id())())(this.clientId)),dz.replier))));break;}},processReply:function(dr){this.waiting.Reply(dr.id,dr);},mapPayloadWrap:function(dr,ds){var dt;dt=null;return bV.Delay(function(){return bV.Bind(dr(ds.payload),function(du){return bV.Return(bf.mapPayload(function(){return du;},ds));});});},reply:function(dr){var ds;ds=this.serverO;ds==null?void 0:ds.$0.FsRoot_Library2_WebSockets_IServer$Post(bf.destination(dr.from,bf.from(this.clientAddress,dr)));},Dispose:function(){this.close();}},g,bD);bD.New=dj.Ctor(function(dr,ds,dt){bD.New$1.call(this,dj.Curried3(function(du,dv,dw){function dx(dz){}function dy(dz){return bV.Return(dz);}return bV.Bind(cM.ConnectStateful(function(dz){return dm.stringify((bu.j())(dz));},function(dz){return(bv.j())(dm.parse(dz));},ct.CreateRemote((((dj.Curried3(function(dz,dA,dB){return dz("ws://"+p.toSafe(dA)+"?ClientId="+p.toSafe(dB));}))(a.id))(du))(dv),{$:1,$0:cu.Readable}),function(dz){var dA;return dw((dA={FsRoot_Library2_WebSockets_IServer$Post:function(dB){return dz.Post(dB);},FsRoot_Library2_WebSockets_IServer$Close:function(){return dz.get_Connection().close(1000);}},(g.New.call(dA),dA)));}),function(dz){return dy(dx(dz));});}),dr,ds,dt);},bD);bD.New$1=dj.Ctor(function(dr,ds,dt,du){var dv,dw;dv=this;g.New.call(this);this.connectStateful=dr;this.clientId=ds;this.wsEndPoint=(dw=bf.extractEndPoint()+"/ws",du==null?dw:du.$0);this.clientAddress=new bg({$:0,$0:this.clientId});this.wsTimeout=dt==null?60000:dt.$0;this.out=function(dx){return function(dy){return dx(p.toSafe(dy));};}(function(dx){dl.log(dx);});this.serverO=null;this.payloadProcessorO=null;this.waiting=new ck.New(function(dx){(((dj.Curried3(function(dy,dz,dA){return dy("Reply from '"+p.toSafe(dz)+"': "+p.toSafe(dA));}))(function(dy){dl.log(dy);}))(dx.from.get_txt()))(dx.payload);});this.checkServer=co.callA(function(dx){H.print(dx);},function(){var dx;dx=null;return bV.Delay(function(){(function(dy){return dy("getServer");}(function(dy){dl.log(dy);}));return bV.Combine(dv.serverO==null?(function(dy){return dy("getServer Connecting");}(function(dy){dl.log(dy);}),bV.Bind(dv.connectToWebSocketServer(),function(){return bV.Bind(bV.Sleep(200),function(){return bV.Return(null);});})):bV.Zero(),bV.Delay(function(){return bV.Return(N.ofOption(function(){return new bF({$:0,$0:"could not connect to Server"});},dv.serverO));}));});});},bD);bE.processMessage=function(dr){var ds;return bV.Return(bm.runReaderResult((ds=bn.reader(),ds.Run(ds.Delay(function(){var dt,du;switch(dr.$==1?(dt=dr.$0,1):dr.$==2?(dt=dr.$0,2):dr.$==3?(dt=dr.$0,3):dr.$==4?(du=dr.$0,!F.Equals(du,null)&&du.length===2?G.get(dr.$0,0)==="AddOutput"?(dt=G.get(dr.$0,1),4):6:6):dr.$==5?5:0){case 0:return ds.Return({$:0,$0:bi.id()});case 1:return ds.Bind(U.traverseSeq(_4.snippetFromRefORm,dt),function(dv){return ds.Return({$:1,$0:G.ofSeq(q.choose(a.id,dv))});});case 2:bm.clearPredsCache();return ds.Bind(U.absorbO(function(){return new bF({$:0,$0:(function(dv){return function(dw){return dv("Snippet not found "+bt.p$3(dw));};}(a.id))(dt)});},_4.snippetFromRefORm(dt)),function(dv){return ds.ReturnFrom$1(bn.op_BarGreaterGreater(bn.op_BarGreaterGreater(_4.fastCodeRm({$:1,$0:dv.snpId},{$:1,$0:dv.snpId}),function(dw){return dw[0];}),function(dw){return{$:0,$0:dw};}));});case 3:bm.clearPredsCache();return ds.Return(b6.Hole.TODO_GetPredecessors);case 4:b7.appendMsgs(dt);return ds.Return({$:0,$0:"Ok"});case 5:return ds.Return({$:0,$0:self.document.baseURI});case 6:return ds.Return(b6.Hole[(function(dv){return function(dw){return dv("TODO message: "+bt.p$4(dw));};}(a.id))(dr)]);}})))));};bE.wsStationClient=function(){k.$cctor();return k.wsStationClient;};bF=H.ResultMessage=dj.Class({toString:function(){return this.$==1?(function(dr){return function(ds){return dr("Warning  : "+p.toSafe(ds));};}(a.id))(this.$0):this.$==2?(function(dr){return function(ds){return dr(a.String(ds));};}(a.id))(this.$0):this.$==3?(((dj.Curried3(function(dr,ds,dt){return dr("Exception: "+p.toSafe(ds)+", "+p.toSafe(dt));}))(a.id))(this.$0))(this.$1):(function(dr){return function(ds){return dr("Error    : "+p.toSafe(ds));};}(a.id))(this.$0);}},null,bF);bG=m.AttrProxy=dj.Class({},null,bG);bG.Create=function(dr,ds){return b8.Static(function(dt){bM.SetAttr(dt,dr,ds);});};bG.HandlerImpl=function(dr,ds){return b8.Static(function(dt){dt.addEventListener(dr,function(du){return(ds(dt))(du);},false);});};bG.Concat=function(dr){var ds;ds=b9.ofSeqNonCopying(dr);return b9.TreeReduce(b8.EmptyAttr(),bG.Append,ds);};bG.Append=function(dr,ds){return b8.AppendTree(dr,ds);};bH.Get=function(dr){return dr instanceof a.Array?bH.ArrayEnumerator(dr):F.Equals(typeof dr,"string")?bH.StringEnumerator(dr):dr.GetEnumerator();};bH.ArrayEnumerator=function(dr){return new bL.New(0,null,function(ds){var dt;dt=ds.s;return dt<G.length(dr)&&(ds.c=G.get(dr,dt),ds.s=dt+1,true);},void 0);};bH.StringEnumerator=function(dr){return new bL.New(0,null,function(ds){var dt;dt=ds.s;return dt<dr.length&&(ds.c=dr[dt],ds.s=dt+1,true);},void 0);};bH.Get0=function(dr){return dr instanceof a.Array?bH.ArrayEnumerator(dr):F.Equals(typeof dr,"string")?bH.StringEnumerator(dr):"GetEnumerator0"in dr?dr.GetEnumerator0():dr.GetEnumerator();};bI=m.Elt=dj.Class({on:function(dr,ds){var dt;dt=this;this.elt.addEventListener(dr,function(du){return ds(dt.elt,du);},false);return this;}},v,bI);bI.New=function(dr,ds,dt){var du,dv;du=b_.CreateElemNode(dr,ds,dt.docNode);dv=cw.Create(dt.updates);return new bI.New$1({$:1,$0:du},t.Map2Unit(b8.Updates(du.Attr),dv.v),dr,dv);};bI.New$1=dj.Ctor(function(dr,ds,dt,du){v.New.call(this,dr,ds);this.docNode$1=dr;this.updates$1=ds;this.elt=dt;this.rvUpdates=du;},bI);bJ.Dynamic=function(dr,ds){return b8.Dynamic(ds,function(dt){return function(du){return bM.SetAttr(dt,dr,du);};});};bK.Map=function(dr,ds){var dt,du;dt=ds.s;return dt!=null&&dt.$==0?bK.New({$:0,$0:dr(dt.$0)}):(du=bK.New({$:3,$0:[],$1:[]}),(bK.When(ds,function(dv){bK.MarkDone(du,ds,dr(dv));},du),du));};bK.WhenRun=function(dr,ds,dt){var du;du=dr.s;du==null?dt():du!=null&&du.$==2?(du.$1.push(dt),ds(du.$0)):du!=null&&du.$==3?(du.$0.push(ds),du.$1.push(dt)):ds(du.$0);};bK.Map2=function(dr,ds,dt){var du,dv,dw;function dx(dy){var dz,dA,dB;if(!(dz=dw.s,dz!=null&&dz.$==0||dz!=null&&dz.$==2)){dA=bK.ValueAndForever(ds);dB=bK.ValueAndForever(dt);dA!=null&&dA.$==1?dB!=null&&dB.$==1?dA.$0[1]&&dB.$0[1]?bK.MarkForever(dw,dr(dA.$0[0],dB.$0[0])):bK.MarkReady(dw,dr(dA.$0[0],dB.$0[0])):void 0:void 0;}}du=ds.s;dv=dt.s;return du!=null&&du.$==0?dv!=null&&dv.$==0?bK.New({$:0,$0:dr(du.$0,dv.$0)}):bK.Map2Opt1(dr,du.$0,dt):dv!=null&&dv.$==0?bK.Map2Opt2(dr,dv.$0,ds):(dw=bK.New({$:3,$0:[],$1:[]}),(bK.When(ds,dx,dw),bK.When(dt,dx,dw),dw));};bK.WhenObsoleteRun=function(dr,ds){var dt;dt=dr.s;dt==null?ds():dt!=null&&dt.$==2?dt.$1.push(ds):dt!=null&&dt.$==3?dt.$1.push(ds):void 0;};bK.When=function(dr,ds,dt){var du;du=dr.s;du==null?bK.Obsolete(dt):du!=null&&du.$==2?(bK.EnqueueSafe(du.$1,dt),ds(du.$0)):du!=null&&du.$==3?(du.$0.push(ds),bK.EnqueueSafe(du.$1,dt)):ds(du.$0);};bK.MarkDone=function(dr,ds,dt){var du;if(du=ds.s,du!=null&&du.$==0)bK.MarkForever(dr,dt);else bK.MarkReady(dr,dt);};bK.Join=function(dr){var ds;ds=bK.New({$:3,$0:[],$1:[]});bK.When(dr,function(dt){var du;du=dt();bK.When(du,function(dv){var dw,dx;if((dw=du.s,dw!=null&&dw.$==0)&&(dx=dr.s,dx!=null&&dx.$==0))bK.MarkForever(ds,dv);else bK.MarkReady(ds,dv);},ds);},ds);return ds;};bK.Map2Opt1=function(dr,ds,dt){return bK.Map(function(du){return dr(ds,du);},dt);};bK.Map2Opt2=function(dr,ds,dt){return bK.Map(function(du){return dr(du,ds);},dt);};bK.ValueAndForever=function(dr){var ds;ds=dr.s;return ds!=null&&ds.$==0?{$:1,$0:[ds.$0,true]}:ds!=null&&ds.$==2?{$:1,$0:[ds.$0,false]}:null;};bK.MarkForever=function(dr,ds){var dt,du,dv,dw;dt=dr.s;if(dt!=null&&dt.$==3){dr.s={$:0,$0:ds};du=dt.$0;for(dv=0,dw=G.length(du)-1;dv<=dw;dv++)(G.get(du,dv))(ds);}else void 0;};bK.MarkReady=function(dr,ds){var dt,du,dv,dw;dt=dr.s;if(dt!=null&&dt.$==3){dr.s={$:2,$0:ds,$1:dt.$1};du=dt.$0;for(dv=0,dw=G.length(du)-1;dv<=dw;dv++)(G.get(du,dv))(ds);}else void 0;};bK.MapAsync=function(dr,ds){var dt;dt=bK.New({$:3,$0:[],$1:[]});bK.When(ds,function(du){bY.StartTo(dr(du),function(dv){bK.MarkDone(dt,ds,dv);});},dt);return dt;};bK.EnqueueSafe=function(dr,ds){var dt,du,dv,dw;dr.push(ds);if(dr.length%20===0){dt=dr.slice(0);c4.Clear(dr);for(du=0,dv=G.length(dt)-1;du<=dv;du++){dw=G.get(dt,du);typeof dw=="object"?function(dx){if(dx.s)dr.push(dx);}(dw):function(dx){dr.push(dx);}(dw);}}else void 0;};bK.TryGet=function(dr){var ds,dt;ds=dr.s;return(ds!=null&&ds.$==0?(dt=ds.$0,true):ds!=null&&ds.$==2&&(dt=ds.$0,true))?{$:1,$0:dt}:null;};bK.Copy=function(dr){var ds,dt,du;ds=dr.s;return ds==null?dr:ds!=null&&ds.$==2?(dt=bK.New({$:2,$0:ds.$0,$1:[]}),(bK.WhenObsolete(dr,dt),dt)):ds!=null&&ds.$==3?(du=bK.New({$:3,$0:[],$1:[]}),(bK.When(dr,function(dv){bK.MarkDone(du,dr,dv);},du),du)):dr;};bK.Map2Unit=function(dr,ds){var dt,du,dv;function dw(){var dx,dy,dz;if(!(dx=dv.s,dx!=null&&dx.$==0||dx!=null&&dx.$==2)){dy=bK.ValueAndForever(dr);dz=bK.ValueAndForever(ds);dy!=null&&dy.$==1?dz!=null&&dz.$==1?dy.$0[1]&&dz.$0[1]?bK.MarkForever(dv,null):bK.MarkReady(dv,null):void 0:void 0;}}dt=dr.s;du=ds.s;return dt!=null&&dt.$==0?du!=null&&du.$==0?bK.New({$:0,$0:null}):ds:du!=null&&du.$==0?dr:(dv=bK.New({$:3,$0:[],$1:[]}),(bK.When(dr,dw,dv),bK.When(ds,dw,dv),dv));};bK.WhenObsolete=function(dr,ds){var dt;dt=dr.s;dt==null?bK.Obsolete(ds):dt!=null&&dt.$==2?bK.EnqueueSafe(dt.$1,ds):dt!=null&&dt.$==3?bK.EnqueueSafe(dt.$1,ds):void 0;};bL=bH.T=dj.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,bL);bL.New=dj.Ctor(function(dr,ds,dt,du){g.New.call(this);this.s=dr;this.c=ds;this.n=dt;this.d=du;},bL);bM.CreateElement=function(dr){return bM.Doc().createElement(dr);};bM.SetAttr=function(dr,ds,dt){dr.setAttribute(ds,dt);};bM.CreateText=function(dr){return bM.Doc().createTextNode(dr);};bM.Doc=function(){cA.$cctor();return cA.Doc;};bM.RemoveClass=function(dr,ds){var dt;bM.setClass(dr,(dt=bM.clsRE(ds),bM.getClass(dr).replace(dt,function(du,dv,dw){return dv===""||dw===""?"":" ";})));};bM.AddClass=function(dr,ds){var dt;dt=bM.getClass(dr);dt===""?bM.setClass(dr,ds):!bM.clsRE(ds).test(dt)?bM.setClass(dr,dt+" "+ds):void 0;};bM.ChildrenArray=function(dr){var ds,dt,du;ds=[];for(dt=0,du=dr.childNodes.length-1;dt<=du;dt++)ds.push(dr.childNodes[dt]);return ds;};bM.setClass=function(dr,ds){if(dr instanceof a.SVGElement)dr.setAttribute("class",ds);else dr.className=ds;};bM.getClass=function(dr){return dr instanceof a.SVGElement?dr.getAttribute("class"):dr.className;};bM.clsRE=function(dr){return new a.RegExp("(\\s+|^)"+dr+"(?:\\s+"+dr+")*(\\s+|$)","g");};bM.IterSelector=function(dr,ds,dt){var du,dv,dw;du=dr.querySelectorAll(ds);for(dv=0,dw=du.length-1;dv<=dw;dv++)dt(du[dv]);};bM.InsertAt=function(dr,ds,dt){var du;if(!(dt.parentNode===dr&&ds===(du=dt.nextSibling,F.Equals(du,null)?null:du)))dr.insertBefore(dt,ds);};bM.RemoveNode=function(dr,ds){if(ds.parentNode===dr)dr.removeChild(ds);};bN=m.ConcreteVar=dj.Class({get_View:function(){return this.view;},Set:function(dr){if(this.isConst)(function(ds){return ds("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(ds){dl.log(ds);}));else{bK.Obsolete(this.snap);this.current=dr;this.snap=bK.New({$:2,$0:dr,$1:[]});}},Get:function(){return this.current;}},u,bN);bN.New=dj.Ctor(function(dr,ds,dt){var du;du=this;u.New.call(this);this.isConst=dr;this.current=dt;this.snap=ds;this.view=function(){return du.snap;};this.id=b$.Int();},bN);bP.LoadLocalTemplates=function(dr){!bP.LocalTemplatesLoaded()?(bP.set_LocalTemplatesLoaded(true),bP.LoadNestedTemplates(self.document.body,"")):void 0;bP.LoadedTemplates().set_Item(dr,bP.LoadedTemplateFile(""));};bP.LocalTemplatesLoaded=function(){cB.$cctor();return cB.LocalTemplatesLoaded;};bP.set_LocalTemplatesLoaded=function(dr){cB.$cctor();cB.LocalTemplatesLoaded=dr;};bP.LoadNestedTemplates=function(dr,ds){var du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH;function dt(dI){var dJ,dK;if(!du.ContainsKey(dI)){dJ=(dK=null,[dv.TryGetValue(dI,{get:function(){return dK;},set:function(dL){dK=dL;}}),dK]);dJ[0]?(dH.Add(dI),dv.Remove(dI),bP.PrepareTemplateStrict(ds,{$:1,$0:dI},dJ[1][0],{$:1,$0:dJ[1][1]},{$:1,$0:dt})):dl.warn(dH.Contains(dI)?"Encountered loop when instantiating "+dI:"Local template does not exist: "+dI);}}du=bP.LoadedTemplateFile(ds);dv=new bW.New$5();dw=dr.querySelectorAll("[ws-template]");for(dx=0,dy=dw.length-1;dx<=dy;dx++){dz=dw[dx];dA=dz.getAttribute("ws-template").toLowerCase();dz.removeAttribute("ws-template");dv.set_Item(dA,[[dz],bP.FakeRootSingle(dz)]);}dB=dr.querySelectorAll("[ws-children-template]");for(dC=0,dD=dB.length-1;dC<=dD;dC++){dE=dB[dC];dF=dE.getAttribute("ws-children-template").toLowerCase();dE.removeAttribute("ws-children-template");dv.set_Item(dF,(dG=bM.ChildrenArray(dE),[dG,bP.FakeRoot(dG)]));}dH=new cC.New$3();while(dv.count>0)dt(q.head(dv.get_Keys()));};bP.LoadedTemplates=function(){cB.$cctor();return cB.LoadedTemplates;};bP.LoadedTemplateFile=function(dr){var ds,dt,du;ds=(dt=null,[bP.LoadedTemplates().TryGetValue(dr,{get:function(){return dt;},set:function(dv){dt=dv;}}),dt]);return ds[0]?ds[1]:(du=new bW.New$5(),(bP.LoadedTemplates().set_Item(dr,du),du));};bP.FakeRootSingle=function(dr){var ds,dt,du;dr.removeAttribute("ws-template");ds=dr.getAttribute("ws-replace");ds===null?void 0:(dr.removeAttribute("ws-replace"),dt=dr.parentNode,F.Equals(dt,null)?void 0:(du=self.document.createElement(dr.tagName),du.setAttribute("ws-replace",ds),dt.replaceChild(du,dr)));return bP.FakeRoot([dr]);};bP.FakeRoot=function(dr){var ds,dt,du;ds=self.document.createElement("div");for(dt=0,du=dr.length-1;dt<=du;dt++)ds.appendChild(G.get(dr,dt));return ds;};bP.PrepareTemplateStrict=function(dr,ds,dt,du,dv){var dw,dx;function dy(dD,dE){var dF,dG,dH,dI,dJ,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5;function dK(d6){}while(true)switch(dD){case 0:if(dE!==null){dF=dE.nextSibling;if(F.Equals(dE.nodeType,D.TEXT_NODE))cR.convertTextNode(dE);else if(F.Equals(dE.nodeType,D.ELEMENT_NODE))dA(dE);dE=dF;}else return null;break;case 1:dL=_0.string(dE.nodeName,{$:1,$0:3},null).toLowerCase();dM=(dG=dL.indexOf("."),dG===-1?[dr,dL]:[_0.string(dL,null,{$:1,$0:dG-1}),_0.string(dL,{$:1,$0:dG+1},null)]);dN=dM[1];dO=dM[0];if(dO!==""&&!bP.LoadedTemplates().ContainsKey(dO))return cR.failNotLoaded(dN);else{if(dO===""&&dv!=null)dv.$0(dN);dP=bP.LoadedTemplates().get_Item(dO);if(!dP.ContainsKey(dN))return cR.failNotLoaded(dN);else{dQ=dP.get_Item(dN);dR=dQ.cloneNode(true);dS=new cC.New$3();dT=new bW.New$5();dU=dE.attributes;for(dV=0,dW=dU.length-1;dV<=dW;dV++){dX=dU.item(dV).name.toLowerCase();dT.set_Item(dX,(dY=dU.item(dV).nodeValue,dY===""?dX:dY.toLowerCase()));!dS.Add(dX)?dl.warn("Hole mapped twice",dX):void 0;}for(dZ=0,d0=dE.childNodes.length-1;dZ<=d0;dZ++){d1=dE.childNodes[dZ];F.Equals(d1.nodeType,D.ELEMENT_NODE)?!dS.Add(d1.nodeName.toLowerCase())?dl.warn("Hole filled twice",dN):void 0:void 0;}d2=dE.childNodes.length===1&&F.Equals(dE.firstChild.nodeType,D.TEXT_NODE);if(d2){dI=cR.fillTextHole(dR,dE.firstChild.textContent,dN);((function(d6){return function(d7){if(d7!=null)d6(d7.$0);};}((dJ=function(d6){return function(d7){return d6.Add(d7);};}(dS),function(d6){return dK(dJ(d6));})))(dI));}cR.removeHolesExcept(dR,dS);if(!d2){for(d3=0,d4=dE.childNodes.length-1;d3<=d4;d3++){d5=dE.childNodes[d3];F.Equals(d5.nodeType,D.ELEMENT_NODE)?d5.hasAttributes()?cR.fillInstanceAttrs(dR,d5):dz(dR,d5):void 0;}}cR.mapHoles(dR,dT);cR.fill(dR,dE.parentNode,dE);dE.parentNode.removeChild(dE);return;}}break;}}function dz(dD,dE){var dF,dH,dI;function dG(dJ,dK){var dL,dM,dN;if(dH==="title"&&dE.hasChildNodes()){dL=dq.parseHTML(dE.textContent);dE.removeChild(dE.firstChild);for(dM=0,dN=dL.length-1;dM<=dN;dM++)dE.appendChild(G.get(dL,dM));}else null;dA(dE);return cR.fill(dE,dJ,dK);}dH=dE.nodeName.toLowerCase();bM.IterSelector(dD,"[ws-attr-holes]",function(dJ){var dK,dL,dM,dN,dO;dK=Z.SplitChars(dJ.getAttribute("ws-attr-holes"),[" "],1);for(dL=0,dM=dK.length-1;dL<=dM;dL++){dN=G.get(dK,dL);dJ.setAttribute(dN,(dO=new a.RegExp("\\${"+dH+"}","ig"),dJ.getAttribute(dN).replace(dO,dE.textContent)));}});dI=dD.querySelector("[ws-hole="+dH+"]");if(F.Equals(dI,null)){dF=dD.querySelector("[ws-replace="+dH+"]");return F.Equals(dF,null)?null:(dG(dF.parentNode,dF),void dF.parentNode.removeChild(dF));}else{while(dI.hasChildNodes())dI.removeChild(dI.lastChild);dI.removeAttribute("ws-hole");return dG(dI,null);}}function dA(dD){if(Z.StartsWith(dD.nodeName.toLowerCase(),"ws-"))dC(dD);else{cR.convertAttrs(dD);dB(dD.firstChild);}}function dB(dD){return dy(0,dD);}function dC(dD){return dy(1,dD);}dw=du==null?bP.FakeRoot(dt):du.$0;dx=(ds==null?"":ds.$0).toLowerCase();bP.LoadedTemplateFile(dr).set_Item(dx,dw);G.length(dt)>0?(function(dD){var dE,dF,dG,dH;while(true){dE=dD.querySelector("[ws-template]");if(F.Equals(dE,null)){dF=dD.querySelector("[ws-children-template]");if(F.Equals(dF,null))return null;else{dG=dF.getAttribute("ws-children-template");dF.removeAttribute("ws-children-template");bP.PrepareTemplateStrict(dr,{$:1,$0:dG},bM.ChildrenArray(dF),null,null);dD=dD;}}else{dH=dE.getAttribute("ws-template");(bP.PrepareSingleTemplate(dr,{$:1,$0:dH},dE))(null);dD=dD;}}}(dw),dB(G.get(dt,0))):void 0;};bP.PrepareSingleTemplate=function(dr,ds,dt){var du,dv,dw;du=bP.FakeRootSingle(dt);dv=[dt];dw={$:1,$0:du};return function(dx){bP.PrepareTemplateStrict(dr,ds,dv,dw,dx);};};bP.TextHoleRE=function(){cB.$cctor();return cB.TextHoleRE;};bQ=f.CancellationTokenSource=dj.Class({Cancel$1:function(){var dr;if(!this.c){this.c=true;dr=G.choose(function(ds){try{ds();return null;}catch(dt){return{$:1,$0:dt};}},this.r);if(G.length(dr)>0)throw new cb.New$3(dr);else void 0;}}},g,bQ);bQ.New=dj.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bQ);bR.TryParse=function(dr){var ds;ds=dn.parse(dr);return a.isNaN(ds)?null:{$:1,$0:ds};};y.TryParse=function(dr,ds,dt,du){var dv,dw;dv=+dr;dw=dv===dv-dv%1&&dv>=ds&&dv<=dt;dw?du.set(dv):void 0;return dw;};bS.OfSeq=function(dr){var ds;ds=G.ofSeq(q.distinct(dr));G.sortInPlace(ds);return bS.Build(ds,0,ds.length-1);};bS.Contains=function(dr,ds){return!((bS.Lookup(dr,ds))[0]==null);};bS.Build=function(dr,ds,dt){var du,dv,dw;return dt-ds+1<=0?null:(du=(ds+dt)/2>>0,(dv=bS.Build(dr,ds,du-1),(dw=bS.Build(dr,du+1,dt),bS.Branch(G.get(dr,du),dv,dw))));};bS.Lookup=function(dr,ds){var dt,du,dv,dw;dt=[];du=ds;dv=true;while(dv)if(du==null)dv=false;else{dw=F.Compare(dr,du.Node);dw===0?dv=false:dw===1?(dt.unshift([true,du.Node,du.Left]),du=du.Right):(dt.unshift([false,du.Node,du.Right]),du=du.Left);}return[du,dt];};bS.Branch=function(dr,ds,dt){var du,dv;return cg.New(dr,ds,dt,1+(du=ds==null?0:ds.Height,(dv=dt==null?0:dt.Height,F.Compare(du,dv)===1?du:dv)),1+(ds==null?0:ds.Count)+(dt==null?0:dt.Count));};bS.TryFind=function(dr,ds){var dt;dt=(bS.Lookup(dr,ds))[0];return dt==null?null:{$:1,$0:dt.Node};};bS.Remove=function(dr,ds){var dt,du,dv,dw;dt=bS.Lookup(dr,ds);du=dt[0];dv=dt[1];return du==null?ds:du.Right==null?bS.Rebuild(dv,du.Left):du.Left==null?bS.Rebuild(dv,du.Right):bS.Rebuild(dv,(dw=G.ofSeq(q.append(bS.Enumerate(false,du.Left),bS.Enumerate(false,du.Right))),bS.Build(dw,0,dw.length-1)));};bS.Add=function(dr,ds){return bS.Put(function(dt,du){return du;},dr,ds);};bS.Enumerate=function(dr,ds){function dt(du,dv){var dw;while(true)if(du==null)return dv.$==1?{$:1,$0:[dv.$0[0],[dv.$0[1],dv.$1]]}:null;else if(dr){dw=du;du=dw.Right;dv=new x({$:1,$0:[dw.Node,dw.Left],$1:dv});}else{dw=du;du=dw.Left;dv=new x({$:1,$0:[dw.Node,dw.Right],$1:dv});}}return q.unfold(function(du){return dt(du[0],du[1]);},[ds,x.Empty]);};bS.Rebuild=function(dr,ds){var dt,dv,dw,dx,dy,dz,dA,dB,dC,dD;function du(dE){return dE==null?0:dE.Height;}dt=ds;for(dv=0,dw=G.length(dr)-1;dv<=dw;dv++){dt=(dx=G.get(dr,dv),dx[0]?(dy=dx[1],(dz=dx[2],du(dt)>du(dz)+1?du(dt.Left)===du(dt.Right)+1?(dA=dt.Left,bS.Branch(dA.Node,bS.Branch(dy,dz,dA.Left),bS.Branch(dt.Node,dA.Right,dt.Right))):bS.Branch(dt.Node,bS.Branch(dy,dz,dt.Left),dt.Right):bS.Branch(dy,dz,dt))):(dB=dx[1],(dC=dx[2],du(dt)>du(dC)+1?du(dt.Right)===du(dt.Left)+1?(dD=dt.Right,bS.Branch(dD.Node,bS.Branch(dt.Node,dt.Left,dD.Left),bS.Branch(dB,dD.Right,dC))):bS.Branch(dt.Node,dt.Left,bS.Branch(dB,dt.Right,dC)):bS.Branch(dB,dt,dC))));}return dt;};bS.Put=function(dr,ds,dt){var du,dv;du=bS.Lookup(ds,dt);dv=du[0];return dv==null?bS.Rebuild(du[1],bS.Branch(ds,null,null)):bS.Rebuild(du[1],bS.Branch(dr(dv.Node,ds),dv.Left,dv.Right));};bU.New=function(dr,ds,dt){return{c:dr,v:ds,f:dt};};bV.Delay=function(dr){return function(ds){try{(dr(null))(ds);}catch(dt){ds.k({$:1,$0:dt});}};};bV.Bind=function(dr,ds){return bV.checkCancel(function(dt){dr(cc.New(function(du){var dv;if(du.$==0){dv=du.$0;bV.scheduler().Fork(function(){try{(ds(dv))(dt);}catch(dw){dt.k({$:1,$0:dw});}});}else bV.scheduler().Fork(function(){dt.k(du);});},dt.ct));});};bV.FromContinuations=function(dr){return function(ds){var dt;function du(dv){if(dt[0])l.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{dt[0]=true;bV.scheduler().Fork(dv);}}dt=[false];dr(function(dv){du(function(){ds.k({$:0,$0:dv});});},function(dv){du(function(){ds.k({$:1,$0:dv});});},function(dv){du(function(){ds.k({$:2,$0:dv});});});};};bV.Return=function(dr){return function(ds){ds.k({$:0,$0:dr});};};bV.Zero=function(){cd.$cctor();return cd.Zero;};bV.Start=function(dr,ds){var dt,du;dt=(du=(bV.defCTS())[0],ds==null?du:ds.$0);bV.scheduler().Fork(function(){if(!dt.c)dr(cc.New(function(dv){if(dv.$==1)bV.UncaughtAsyncError(dv.$0);},dt));});};bV.Sleep=function(dr){return function(ds){var dt,du;dt=void 0;du=void 0;dt=a.setTimeout(function(){du.Dispose();bV.scheduler().Fork(function(){ds.k({$:0,$0:null});});},dr);du=bV.Register(ds.ct,function(){a.clearTimeout(dt);bV.scheduler().Fork(function(){bV.cancel(ds);});});};};bV.While=function(dr,ds){return dr()?bV.Bind(ds,function(){return bV.While(dr,ds);}):bV.Return();};bV.TryWith=function(dr,ds){return function(dt){dr(cc.New(function(du){if(du.$==0)dt.k({$:0,$0:du.$0});else if(du.$==1)try{(ds(du.$0))(dt);}catch(dv){dt.k(du);}else dt.k(du);},dt.ct));};};bV.checkCancel=function(dr){return function(ds){if(ds.ct.c)bV.cancel(ds);else dr(ds);};};bV.For=function(dr,ds){return bV.Using(bH.Get(dr),function(dt){return bV.While(function(){return dt.MoveNext();},bV.Delay(function(){return ds(dt.Current());}));});};bV.defCTS=function(){cd.$cctor();return cd.defCTS;};bV.UncaughtAsyncError=function(dr){dl.log("WebSharper: Uncaught asynchronous exception",dr);};bV.Register=function(dr,ds){var dt;return dr===bV.noneCT()?{Dispose:function(){return null;}}:(dt=dr.r.push(ds)-1,{Dispose:function(){return G.set(dr.r,dt,a.ignore);}});};bV.cancel=function(dr){dr.k({$:2,$0:new cI.New(dr.ct)});};bV.scheduler=function(){cd.$cctor();return cd.scheduler;};bV.Using=function(dr,ds){return bV.TryFinally(ds(dr),function(){dr.Dispose();});};bV.noneCT=function(){cd.$cctor();return cd.noneCT;};bV.Combine=function(dr,ds){return bV.Bind(dr,function(){return ds;});};bV.TryFinally=function(dr,ds){return function(dt){dr(cc.New(function(du){try{ds();dt.k(du);}catch(dv){dt.k({$:1,$0:dv});}},dt.ct));};};bV.GetCT=function(){cd.$cctor();return cd.GetCT;};bV.StartWithContinuations=function(dr,ds,dt,du,dv){var dw,dx;dw=(dx=(bV.defCTS())[0],dv==null?dx:dv.$0);!dw.c?dr(cc.New(function(dy){if(dy.$==1)dt(dy.$0);else if(dy.$==2)du(dy.$0);else ds(dy.$0);},dw)):void 0;};bW=bA.Dictionary=dj.Class({Clear:function(){this.data=[];this.count=0;},set_Item:function(dr,ds){this.set(dr,ds);},TryGetValue:function(dr,ds){var dt,du,dv;dt=this;du=this.data[this.hash(dr)];return du==null?false:(dv=G.tryPick(function(dw){var dx;dx=l.KeyValue(dw);return dt.equals.apply(null,[dx[0],dr])?{$:1,$0:dx[1]}:null;},du),dv!=null&&dv.$==1&&(ds.set(dv.$0),true));},Add:function(dr,ds){this.add(dr,ds);},set:function(dr,ds){var dt,du,dv,dw;dt=this;du=this.hash(dr);dv=this.data[du];dv==null?(this.count=this.count+1,this.data[du]=new a.Array({K:dr,V:ds})):(dw=G.tryFindIndex(function(dx){return dt.equals.apply(null,[(l.KeyValue(dx))[0],dr]);},dv),dw==null?(this.count=this.count+1,dv.push({K:dr,V:ds})):dv[dw.$0]={K:dr,V:ds});},add:function(dr,ds){var dt,du,dv;dt=this;du=this.hash(dr);dv=this.data[du];dv==null?(this.count=this.count+1,this.data[du]=new a.Array({K:dr,V:ds})):(G.exists(function(dw){return dt.equals.apply(null,[(l.KeyValue(dw))[0],dr]);},dv)?ch.alreadyAdded():void 0,this.count=this.count+1,dv.push({K:dr,V:ds}));},ContainsKey:function(dr){var ds,dt;ds=this;dt=this.data[this.hash(dr)];return dt==null?false:G.exists(function(du){return ds.equals.apply(null,[(l.KeyValue(du))[0],dr]);},dt);},Remove:function(dr){return this.remove(dr);},get_Keys:function(){return new cS.New(this);},remove:function(dr){var ds,dt,du,dv;ds=this;dt=this.hash(dr);du=this.data[dt];return du==null?false:(dv=G.filter(function(dw){return!ds.equals.apply(null,[(l.KeyValue(dw))[0],dr]);},du),G.length(dv)<du.length&&(this.count=this.count-1,this.data[dt]=dv,true));},get_Item:function(dr){return this.get(dr);},get:function(dr){var ds,dt;ds=this;dt=this.data[this.hash(dr)];return dt==null?ch.notPresent():G.pick(function(du){var dv;dv=l.KeyValue(du);return ds.equals.apply(null,[dv[0],dr])?{$:1,$0:dv[1]}:null;},dt);},GetEnumerator:function(){return bH.Get0(this);},GetEnumerator0:function(){return bH.Get0(G.concat(E.GetFieldValues(this.data)));}},g,bW);bW.New$5=dj.Ctor(function(){bW.New$6.call(this,[],F.Equals,F.Hash);},bW);bW.New$6=dj.Ctor(function(dr,ds,dt){var du,dv;g.New.call(this);this.equals=ds;this.hash=dt;this.count=0;this.data=[];du=bH.Get(dr);try{while(du.MoveNext()){dv=du.Current();this.set(dv.K,dv.V);}}finally{if(typeof du=="object"&&"Dispose"in du)du.Dispose();}},bW);bY.StartTo=function(dr,ds){bV.StartWithContinuations(dr,ds,function(dt){bY.OnError(dt);},a.ignore,null);};bY.OnError=function(dr){return dl.log("WebSharper UI: Uncaught asynchronous exception",dr);};b0=m.FromView=dj.Class({get_View:function(){return this.view;},Set:function(dr){this.set(dr);},Get:function(){return this.current;}},u,b0);b0.New=dj.Ctor(function(dr,ds){var dt,du;dt=this;u.New.call(this);this.set=ds;this.id=b$.Int();this.current=(du=t.TryGet(dr),du==null?null:du.$0);this.view=t.Map(function(dv){dt.current=dv;return dv;},dr);},b0);t=m.View=dj.Class({},null,t);M.asyncResult=function(){k.$cctor();return k.asyncResult;};b1.getSourceDir=function(dr,ds){var dt,du,dv,dw,dx,dy,dz,dA,dB,dC;dt=G.get(ds,0);du=G.tryItem(1,ds);return(dw=Y.StartsWith$1("////#cd @\"",dt),dw!=null&&dw.$==1?(dv=dw.$0,true):du!=null&&du.$==1&&(dx=Y.StartsWith$1("////#cd @\"",du.$0),dx!=null&&dx.$==1&&(dv=dx.$0,true)))?(dy=Z.Trim(dv),(dA=Y.EndsWith$1("\"",dy),dA!=null&&dA.$==1?dz=dA.$0:dz=dy,(dB=Y.StartsWith$1("\\",dz),dB!=null&&dB.$==1)?dz:(dC=Y.StartsWith$1("/",dz),dC!=null&&dC.$==1)?dz:F.Equals(q.tryItem(1,dz),{$:1,$0:":"})?dz:dr+"/"+dz)):dr;};b1.separatePrepros=function(dr){function ds(dv){var dw;dw=q.tryLast(Z.SplitStrings(Z.Trim(dv),["\""],1));return dw==null?dv:dw.$0;}function dt(dv){var dw;dw=q.tryHead(Z.SplitStrings(Z.Trim(dv),["#define "],1));return dw==null?"":dw.$0;}function du(dv){return"//"+dv;}return G.map(function(dv){var dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ;dw=true;return dw&&Z.StartsWith(dv,"#define")?[du(dv),{$:2,$0:dt(dv)}]:dw&&Z.StartsWith(dv,"#cd")?[du(dv),{$:0,$0:ds(dv)}]:dw&&Z.StartsWith(dv,"#r")?[du(dv),{$:1,$0:ds(dv)}]:dw&&Z.StartsWith(dv,"#load")?[du(dv),{$:3,$0:ds(dv)}]:dw&&Z.StartsWith(dv,"#nowarn")?[du(dv),{$:5,$0:ds(dv)}]:dw&&Z.StartsWith(Z.Trim(dv),"# ")?[du(dv),{$:4,$0:ds(dv)}]:dw&&Z.StartsWith(Z.Trim(dv),"#line")?[du(dv),{$:4,$0:ds(dv)}]:dw&&Z.StartsWith(dv,"#I")?[du(dv),{$:6,$0:ds(dv)}]:dw&&Z.StartsWith(dv,"#if")?[dv,{$:7,$0:dv}]:dw&&Z.StartsWith(dv,"#else")?[dv,cZ.PrepoElse]:dw&&Z.StartsWith(dv,"#endif")?[dv,cZ.PrepoEndIf]:dw&&Z.StartsWith(dv,"#light")?[dv,{$:10,$0:false}]:dw&&Z.StartsWith(dv,"#")?[du(dv),{$:11,$0:dv}]:[dv,cZ.NoPrepo];},dr);};b1.separateDirectives=function(dr){var ds,dt,du,dv,dw;function dx(dH){return dH[1];}function dy(dH){return dH.$==1?{$:1,$0:dH.$0}:null;}function dz(dH){return dH[1];}function dA(dH){return dH.$==2?{$:1,$0:dH.$0}:null;}function dB(dH){return dH[1];}function dC(dH){return dH.$==6?{$:1,$0:dH.$0}:null;}function dD(dH){return dH[1];}function dE(dH){return dH.$==5?{$:1,$0:dH.$0}:null;}function dF(dH){return dH[1];}function dG(dH){return dH.$==0?{$:1,$0:dH.$0}:null;}ds=G.ofSeq(q.distinct(q.choose(function(dH){return dy(dx(dH));},dr)));dt=G.ofSeq(q.distinct(q.choose(function(dH){return dA(dz(dH));},dr)));du=G.ofSeq(q.distinct(q.choose(function(dH){return dC(dB(dH));},dr)));dv=G.ofSeq(q.distinct(q.choose(function(dH){return dE(dD(dH));},dr)));dw=q.tryHead(q.choose(function(dH){return dG(dF(dH));},dr));return[G.ofSeq(q.map(function(dH){return dH[0];},dr)),ds,dt,du,dv,dw];};b3.parseCode=function(dr,ds,dt,du){return b3.FSAutocompleteCall("parse",function(dv){return dv.$==7?{$:1,$0:dv.$0}:null;},{$:0,$0:{FileName:dr,IsAsync:dt,Lines:ds,Version:du}});};b3.FSAutocompleteCall=function(dr,ds,dt){var du;du=M.asyncResult();return du.Run(du.Delay(function(){return du.Bind$1((new bk.New()).Async("testing:FsRoot.Library2+FsAutoComplete.FSAutocompleteCall0:-923365271",[dr,dt]),function(dv){var dw,dx;function dy(dz){return dz!=null;}dw=G.partition(function(dz){return dy(ds(dz));},dv);dx=dw[1];return du.Bind(N.ofOption(function(){return new bF({$:2,$0:dx});},q.tryHead(q.choose(ds,dw[0]))),function(dz){return du.Return([dz,dx]);});});}));};b4.iterA=function(dr,ds,dt){function du(dw){N.iter(dr,ds,dw);}function dv(dw){return bV.Return(dw);}bV.Start(bV.Bind(dt,function(dw){return dv(du(dw));}),null);};b4.bind=function(dr,ds){var dt;dt=null;return bV.Delay(function(){return bV.Bind(ds,function(du){var dv,dw;return du.$==1?(dv=du.$0,(dw=null,bV.Delay(function(){return bV.Return(H.Error$1(dv));}))):dr(du.$0);});});};b4.rtn=function(dr){return bV.Return({$:0,$0:dr});};b4.rtnR=function(dr){return bV.Return(dr);};b5.MsgInformation={$:0};b5.MsgRequest={$:1};b5.MsgReply={$:2};b6.Hole={$:0};b7.appendMsgs=function(dr){b7.appendText(b7.outputMsgs(),dr);};b7.appendText=function(dr,ds){var dt;dr.Set((dt=dr.Get(),dt===""?ds:ds===""?dt:dt+"\n"+ds));};b7.outputMsgs=function(){k.$cctor();return k.outputMsgs;};b8.Static=function(dr){return new bG({$:3,$0:dr});};b8.Dynamic=function(dr,ds){return new bG({$:1,$0:new cx.New(dr,ds)});};b8.Updates=function(dr){return b9.MapTreeReduce(function(ds){return ds.NChanged();},t.Const(),t.Map2Unit,dr.DynNodes);};b8.AppendTree=function(dr,ds){var dt;return dr===null?ds:ds===null?dr:(dt=new bG({$:2,$0:dr,$1:ds}),(b8.SetFlags(dt,b8.Flags(dr)|b8.Flags(ds)),dt));};b8.EmptyAttr=function(){cP.$cctor();return cP.EmptyAttr;};b8.Insert=function(dr,ds){var dt,du,dv;function dw(dx){if(!(dx===null))if(dx!=null&&dx.$==1)dt.push(dx.$0);else if(dx!=null&&dx.$==2){dw(dx.$0);dw(dx.$1);}else if(dx!=null&&dx.$==3)dx.$0(dr);else if(dx!=null&&dx.$==4)du.push(dx.$0);}dt=[];du=[];dw(ds);dv=dt.slice(0);return cO.New(dr,b8.Flags(ds),dv,du.length===0?null:{$:1,$0:function(dx){q.iter(function(dy){dy(dx);},du);}});};b8.SetFlags=function(dr,ds){dr.flags=ds;};b8.Flags=function(dr){return dr!==null&&dr.hasOwnProperty("flags")?dr.flags:0;};b8.HasExitAnim=function(dr){var ds;ds=2;return(dr.DynFlags&ds)===ds;};b8.GetExitAnim=function(dr){return b8.GetAnim(dr,function(ds,dt){return ds.NGetExitAnim(dt);});};b8.HasEnterAnim=function(dr){var ds;ds=1;return(dr.DynFlags&ds)===ds;};b8.GetEnterAnim=function(dr){return b8.GetAnim(dr,function(ds,dt){return ds.NGetEnterAnim(dt);});};b8.HasChangeAnim=function(dr){var ds;ds=4;return(dr.DynFlags&ds)===ds;};b8.GetChangeAnim=function(dr){return b8.GetAnim(dr,function(ds,dt){return ds.NGetChangeAnim(dt);});};b8.GetAnim=function(dr,ds){return cD.Concat(G.map(function(dt){return ds(dt,dr.DynElem);},dr.DynNodes));};b8.Sync=function(dr,ds){G.iter(function(dt){dt.NSync(dr);},ds.DynNodes);};bK.Obsolete=function(dr){var ds,dt,du,dv,dw;dt=dr.s;if(dt==null||(dt!=null&&dt.$==2?(ds=dt.$1,false):dt!=null&&dt.$==3?(ds=dt.$1,false):true))void 0;else{dr.s=null;for(du=0,dv=G.length(ds)-1;du<=dv;du++){dw=G.get(ds,du);typeof dw=="object"?function(dx){bK.Obsolete(dx);}(dw):dw();}}};bK.New=function(dr){return{s:dr};};b9.ofSeqNonCopying=function(dr){var ds,dt;if(dr instanceof a.Array)return dr;else if(dr instanceof x)return G.ofList(dr);else if(dr===null)return[];else{ds=[];dt=bH.Get(dr);try{while(dt.MoveNext())ds.push(dt.Current());return ds;}finally{if(typeof dt=="object"&&"Dispose"in dt)dt.Dispose();}}};b9.TreeReduce=function(dr,ds,dt){var du;function dv(dw,dx){var dy,dz;return dx<=0?dr:dx===1&&(dw>=0&&dw<du)?G.get(dt,dw):(dz=dx/2>>0,ds(dv(dw,dz),dv(dw+dz,dx-dz)));}du=G.length(dt);return dv(0,du);};b9.MapTreeReduce=function(dr,ds,dt,du){var dv;function dw(dx,dy){var dz,dA;return dy<=0?ds:dy===1&&(dx>=0&&dx<dv)?dr(G.get(du,dx)):(dA=dy/2>>0,dt(dw(dx,dA),dw(dx+dA,dy-dA)));}dv=G.length(du);return dw(0,dv);};b_.CreateTextNode=function(){return{Text:bM.CreateText(""),Dirty:false,Value:""};};b_.UpdateTextNode=function(dr,ds){dr.Value=ds;dr.Dirty=true;};b_.LinkElement=function(dr,ds){b_.InsertDoc(dr,ds,null);};b_.CreateElemNode=function(dr,ds,dt){var du;b_.LinkElement(dr,dt);du=b8.Insert(dr,ds);return cy.New(du,dt,null,dr,b$.Int(),dj.GetOptional(du.OnAfterRender));};b_.InsertDoc=function(dr,ds,dt){var du;return ds!=null&&ds.$==1?b_.InsertNode(dr,ds.$0.El,dt):ds!=null&&ds.$==2?(du=ds.$0,(du.Dirty=false,b_.InsertDoc(dr,du.Current,dt))):ds==null?dt:ds!=null&&ds.$==4?b_.InsertNode(dr,ds.$0.Text,dt):ds!=null&&ds.$==5?b_.InsertNode(dr,ds.$0,dt):ds!=null&&ds.$==6?G.foldBack(function(dv,dw){return dv==null||dv.constructor===bZ?b_.InsertDoc(dr,dv,dw):b_.InsertNode(dr,dv,dw);},ds.$0.Els,dt):b_.InsertDoc(dr,ds.$0,b_.InsertDoc(dr,ds.$1,dt));};b_.CreateRunState=function(dr,ds){return cU.New(cV.get_Empty(),b_.CreateElemNode(dr,b8.EmptyAttr(),ds));};b_.PerformAnimatedUpdate=function(dr,ds,dt){var du;return cD.get_UseAnimations()?(du=null,bV.Delay(function(){var dv,dw,dx;dv=cV.FindAll(dt);dw=b_.ComputeChangeAnim(ds,dv);dx=b_.ComputeEnterAnim(ds,dv);return bV.Bind(cD.Play(cD.Append(dw,b_.ComputeExitAnim(ds,dv))),function(){return bV.Bind(b_.SyncElemNodesNextFrame(dr,ds),function(){return bV.Bind(cD.Play(dx),function(){ds.PreviousNodes=dv;return bV.Return(null);});});});})):b_.SyncElemNodesNextFrame(dr,ds);};b_.PerformSyncUpdate=function(dr,ds,dt){var du;du=cV.FindAll(dt);b_.SyncElemNode(dr,ds.Top);ds.PreviousNodes=du;};b_.InsertNode=function(dr,ds,dt){bM.InsertAt(dr,dt,ds);return ds;};b_.SyncElemNodesNextFrame=function(dr,ds){function dt(du){a.requestAnimationFrame(function(){b_.SyncElemNode(dr,ds.Top);du();});}return cE.BatchUpdatesEnabled()?bV.FromContinuations(function(du,dv,dw){return dt.apply(null,[du,dv,dw]);}):(b_.SyncElemNode(dr,ds.Top),bV.Return(null));};b_.ComputeExitAnim=function(dr,ds){return cD.Concat(G.map(function(dt){return b8.GetExitAnim(dt.Attr);},cV.ToArray(cV.Except(ds,cV.Filter(function(dt){return b8.HasExitAnim(dt.Attr);},dr.PreviousNodes)))));};b_.ComputeEnterAnim=function(dr,ds){return cD.Concat(G.map(function(dt){return b8.GetEnterAnim(dt.Attr);},cV.ToArray(cV.Except(dr.PreviousNodes,cV.Filter(function(dt){return b8.HasEnterAnim(dt.Attr);},ds)))));};b_.ComputeChangeAnim=function(dr,ds){var dt;function du(dv){return b8.HasChangeAnim(dv.Attr);}dt=function(dv){return cV.Filter(du,dv);};return cD.Concat(G.map(function(dv){return b8.GetChangeAnim(dv.Attr);},cV.ToArray(cV.Intersect(dt(dr.PreviousNodes),dt(ds)))));};b_.SyncElemNode=function(dr,ds){!dr?b_.SyncElement(ds):void 0;b_.Sync(ds.Children);b_.AfterRender(ds);};b_.SyncElement=function(dr){function ds(dt){function du(dv){var dw,dx;return dv!=null&&dv.$==0?du(dv.$0)||du(dv.$1):dv!=null&&dv.$==2?(dw=dv.$0,dw.Dirty||du(dw.Current)):dv!=null&&dv.$==6&&(dx=dv.$0,dx.Dirty||G.exists(ds,dx.Holes));}return du(dt.Children);}b8.Sync(dr.El,dr.Attr);ds(dr)?b_.DoSyncElement(dr):void 0;};b_.Sync=function(dr){var ds,dt;if(dr!=null&&dr.$==1)b_.SyncElemNode(false,dr.$0);else if(dr!=null&&dr.$==2)b_.Sync(dr.$0.Current);else if(dr==null);else if(dr!=null&&dr.$==5);else if(dr!=null&&dr.$==4){ds=dr.$0;ds.Dirty?(ds.Text.nodeValue=ds.Value,ds.Dirty=false):void 0;}else if(dr!=null&&dr.$==6){dt=dr.$0;G.iter(function(du){b_.SyncElemNode(false,du);},dt.Holes);G.iter(function(du){b8.Sync(du[0],du[1]);},dt.Attrs);b_.AfterRender(dt);}else{b_.Sync(dr.$0);b_.Sync(dr.$1);}};b_.AfterRender=function(dr){var ds;ds=dj.GetOptional(dr.Render);ds!=null&&ds.$==1?(ds.$0(dr.El),dj.SetOptional(dr,"Render",null)):void 0;};b_.DoSyncElement=function(dr){var ds,dt,du;function dv(dw,dx){var dy,dz;return dw!=null&&dw.$==1?dw.$0.El:dw!=null&&dw.$==2?(dy=dw.$0,dy.Dirty?(dy.Dirty=false,b_.InsertDoc(ds,dy.Current,dx)):dv(dy.Current,dx)):dw==null?dx:dw!=null&&dw.$==4?dw.$0.Text:dw!=null&&dw.$==5?dw.$0:dw!=null&&dw.$==6?(dz=dw.$0,(dz.Dirty?dz.Dirty=false:void 0,G.foldBack(function(dA,dB){return dA==null||dA.constructor===bZ?dv(dA,dB):dA;},dz.Els,dx))):dv(dw.$0,dv(dw.$1,dx));}ds=dr.El;dg.Iter((dt=dr.El,function(dw){bM.RemoveNode(dt,dw);}),dg.Except(dg.DocChildren(dr),dg.Children(dr.El,dj.GetOptional(dr.Delimiters))));dv(dr.Children,(du=dj.GetOptional(dr.Delimiters),du!=null&&du.$==1?du.$0[1]:null));};b$.Int=function(){b$.set_counter(b$.counter()+1);return b$.counter();};b$.set_counter=function(dr){cQ.$cctor();cQ.counter=dr;};b$.counter=function(){cQ.$cctor();return cQ.counter;};cb=f.AggregateException=dj.Class({},ca,cb);cb.New$3=dj.Ctor(function(dr){cb.New$4.call(this,"One or more errors occurred.",dr);},cb);cb.New$4=dj.Ctor(function(dr,ds){this.message=dr;bZ.setPrototypeOf(this,cb.prototype);this.innerExceptions=ds;},cb);q.enumUsing=function(dr,ds){return{GetEnumerator:function(){var dt;try{dt=bH.Get(ds(dr));}catch(du){dr.Dispose();throw du;}return new bL.New(null,null,function(dv){return dt.MoveNext()&&(dv.c=dt.Current(),true);},function(){dt.Dispose();dr.Dispose();});}};};q.enumWhile=function(dr,ds){return{GetEnumerator:function(){return new bL.New(null,null,function(dt){var du;while(true){du=dt.s;if(F.Equals(du,null)){if(dr()){dt.s=bH.Get(ds);dt=dt;}else return false;}else if(du.MoveNext()){dt.c=du.Current();return true;}else{du.Dispose();dt.s=null;dt=dt;}}},function(dt){var du;du=dt.s;!F.Equals(du,null)?du.Dispose():void 0;});}};};cc.New=function(dr,ds){return{k:dr,ct:ds};};cd.$cctor=function(){cd.$cctor=a.ignore;cd.noneCT=ce.New(false,[]);cd.scheduler=new cG.New();cd.defCTS=[new bQ.New()];cd.Zero=bV.Return();cd.GetCT=function(dr){dr.k({$:0,$0:dr.ct});};};ce.New=function(dr,ds){return{c:dr,r:ds};};cf.InMemory=function(dr){return new cH.New(dr);};cg.New=function(dr,ds,dt,du,dv){return{Node:dr,Left:ds,Right:dt,Height:du,Count:dv};};ch.alreadyAdded=function(){return l.FailWith("An item with the same key has already been added.");};ch.notPresent=function(){return l.FailWith("The given key was not present in the dictionary.");};ci.Bind=function(dr,ds){return ds.$==1?{$:1,$0:ds.$0}:dr(ds.$0);};ck=cj.Handler=dj.Class({Reply:function(dr,ds){var dt;dt=this.waitingAgent;dt.mailbox.AddLast({$:1,$0:dr,$1:ds});dt.resume();}},g,ck);ck.New=dj.Ctor(function(dr){g.New.call(this);this.waitingAgent=co.fold(co.defHandler,function(ds,dt){var du,dv,dw;function dx(dy,dz,dA){var dB,dC;dB=(dC=cL.TryFind(dy,ds),dC==null?null:{$:1,$0:dz(dC.$0)});dB==null?dA():void 0;return ds.Remove(dy);}return dt.$==1?(du=dt.$1,dx(dt.$0,function(dy){dy[0](du);},function(){dr(du);})):dt.$==2?(dv=dt.$1,dx(dt.$0,function(dy){dy[1](dv);},a.ignore)):dt.$==3?(dw=dt.$1,dx(dt.$0,function(dy){dy[2](dw);},a.ignore)):ds.Add(dt.$0,dt.$1);},new c2.New([]));},ck);cm=cl.MailboxProcessor=dj.Class({PostAndAsyncReply:function(dr,ds){var dt,du;dt=this;du=null;return bV.Delay(function(){return bV.Bind(dt.PostAndTryAsyncReply(dr,ds),function(dv){var dw,dx;if(dv!=null&&dv.$==1)dx=dv.$0;else throw new c3.New();return bV.Return(dx);});});},Receive:function(dr){var ds,dt;ds=this;dt=null;return bV.Delay(function(){return bV.Bind(ds.TryReceive(dr),function(du){var dv,dw;if(du!=null&&du.$==1)dw=du.$0;else throw new c3.New();return bV.Return(dw);});});},PostAndTryAsyncReply:function(dr,ds){var dt,du,dv;function dw(dx){var dz;function dy(dA){return{$:1,$0:dA};}if(du<0){dt.mailbox.AddLast(dr(function(dA){return dx(dy(dA));}));dt.resume();}else{dz=[true];dt.mailbox.AddLast(dr(function(dA){if(dz[0]){dz[0]=false;dx({$:1,$0:dA});}}));dt.resume();a.setTimeout(function(){if(dz[0]){dz[0]=false;dx(null);}},du);}}dt=this;du=(dv=this.get_DefaultTimeout(),ds==null?dv:ds.$0);return bV.FromContinuations(function(dx,dy,dz){return dw.apply(null,[dx,dy,dz]);});},Start:function(){var dr,ds;dr=this;this.started?l.FailWith("The MailboxProcessor has already been started."):(this.started=true,dr.startAsync((ds=null,bV.Delay(function(){return bV.TryWith(bV.Delay(function(){return bV.Bind(dr.initial(dr),function(){return bV.Return(null);});}),function(dt){dr.errorEvent.event.Trigger(dt);return bV.Zero();});}))));},TryReceive:function(dr){var ds,dt,du;function dv(dw){var dx,dy,dz,dA;if(F.Equals(ds.mailbox.n,null)){if(dt<0){ds.savedCont={$:1,$0:(dx=null,bV.Delay(function(){dw({$:1,$0:ds.dequeue()});return bV.Zero();}))};}else{dy=[true];dz=a.setTimeout(function(){if(dy[0]){dy[0]=false;ds.savedCont=null;dw(null);}},dt);ds.savedCont={$:1,$0:(dA=null,bV.Delay(function(){return dy[0]?(dy[0]=false,a.clearTimeout(dz),dw({$:1,$0:ds.dequeue()}),bV.Zero()):bV.Zero();}))};}}else dw({$:1,$0:ds.dequeue()});}ds=this;dt=(du=this.get_DefaultTimeout(),dr==null?du:dr.$0);return bV.FromContinuations(function(dw,dx,dy){return dv.apply(null,[dw,dx,dy]);});},get_DefaultTimeout:function(){return this.DefaultTimeout;},resume:function(){var dr;dr=this.savedCont;dr!=null&&dr.$==1?(this.savedCont=null,this.startAsync(dr.$0)):void 0;},startAsync:function(dr){bV.Start(dr,this.token);},dequeue:function(){var dr;dr=this.mailbox.n.v;this.mailbox.RemoveFirst();return dr;}},g,cm);cm.Start=function(dr,ds){var dt;dt=new cm.New(dr,ds);dt.Start();return dt;};cm.New=dj.Ctor(function(dr,ds){var dt,du;function dv(dw){return dt.resume();}dt=this;g.New.call(this);this.initial=dr;this.token=ds;this.started=false;this.errorEvent=new cJ.New();this.mailbox=new cK.New();this.savedCont=null;du=this.token;du==null?void 0:bV.Register(du.$0,function(){dv();});this.DefaultTimeout=-1;},cm);cn.New=function(dr,ds,dt,du,dv,dw,dx){return{from:dr,destination:ds,msgType:dt,subtype:du,id:dv,payload:dw,replier:dx};};co.callA=function(dr,ds){return co.iterA(dr,function(dt){var du,dv,dw;du=dt[0];dv=dt[1];dw=null;return bV.Delay(function(){return bV.Bind(ds(dv),function(dx){du(dx);return bV.Zero();});});});};co.fold=function(dr,ds,dt){return co.foldA(dr,function(du,dv){var dw;dw=null;return bV.Delay(function(){return bV.Return(ds(du,dv));});},dt);};co.defHandler=function(dr,ds){H.print(dr);return ds;};co.iterA=function(dr,ds){return cm.Start(function(dt){var du;du=null;return bV.Delay(function(){return bV.While(function(){return true;},bV.Delay(function(){return bV.TryWith(bV.Delay(function(){return bV.Bind(dt.Receive(null),function(dv){return bV.Bind(ds(dv),function(){return bV.Return(null);});});}),function(dv){dr(dv);return bV.Zero();});}));});},null);};co.foldA=function(dr,ds,dt){return cm.Start(function(du){function dv(dw){var dx;dx=null;return bV.Delay(function(){return bV.TryWith(bV.Delay(function(){return bV.Bind(du.Receive(null),function(dy){return bV.Bind(ds(dw,dy),function(dz){return dv(dz);});});}),function(dy){return dv(dr(dy,dw));});});}return dv(dt);},null);};cr.getEncoding=function(dr,ds,dt){var du,dv;function dw(dx){return dm.parse(dx);}du=dt.$==0?[function(dx){return dm.stringify(dx);},function(dx){return _9.Activate(dw(dx));}]:[dr,ds];dv=du[1];return[du[0],function(dx){return dv(dx.data);}];};cr.cacheSocket=function(dr,ds){var dt,du;dt=[];du=[false];dr.onopen=function(){dt.push(da.Open);du[0]=true;};dr.onclose=function(){return dt.push(da.Close);};dr.onmessage=function(dv){return dt.push({$:0,$0:ds(dv)});};dr.onerror=function(){return dt.push(da.Error);};return function(dv){q.iter(dv,dt);return du[0];};};cs.NoReply={$:0};ct.CreateRemote=function(dr,ds){return ct.New(dr,"",ds==null?cu.Typed:ds.$0);};ct.New=function(dr,ds,dt){return{URI:dr,Route:ds,JsonEncoding:dt};};cu=cq.JsonEncoding=dj.Class({},null,cu);cu.Readable=new cu({$:1});cu.Typed=new cu({$:0});cv=cr.WebSocketServer=dj.Class({Post:function(dr){this.conn.send(this.encode(dr));},get_Connection:function(){return this.conn;}},g,cv);cv.New=dj.Ctor(function(dr,ds){g.New.call(this);this.conn=dr;this.encode=ds;},cv);cw=m.Updates=dj.Class({},null,cw);cw.Create=function(dr){var ds;ds=null;ds=cw.New(dr,null,function(){var dt;dt=ds.s;return dt===null?(dt=bK.Copy(ds.c()),ds.s=dt,bK.WhenObsoleteRun(dt,function(){ds.s=null;}),dt):dt;});return ds;};cw.New=function(dr,ds,dt){return new cw({c:dr,s:ds,v:dt});};cx=m.DynamicAttrNode=dj.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(dr){return cD.get_Empty();},NGetEnterAnim:function(dr){return cD.get_Empty();},NGetChangeAnim:function(dr){return cD.get_Empty();},NSync:function(dr){if(this.dirty){(this.push(dr))(this.value);this.dirty=false;}}},g,cx);cx.New=dj.Ctor(function(dr,ds){var dt;dt=this;g.New.call(this);this.push=ds;this.value=void 0;this.dirty=false;this.updates=t.Map(function(du){dt.value=du;dt.dirty=true;},dr);},cx);cy=m.DocElemNode=dj.Class({Equals:function(dr){return this.ElKey===dr.ElKey;},GetHashCode:function(){return this.ElKey;}},null,cy);cy.New=function(dr,ds,dt,du,dv,dw){var dx;return new cy((dx={Attr:dr,Children:ds,El:du,ElKey:dv},(dj.SetOptional(dx,"Delimiters",dt),dj.SetOptional(dx,"Render",dw),dx)));};cA.$cctor=function(){cA.$cctor=a.ignore;cA.Doc=self.document;};cB.$cctor=function(){cB.$cctor=a.ignore;cB.LoadedTemplates=new bW.New$5();cB.LocalTemplatesLoaded=false;cB.TextHoleRE="\\${([^}]+)}";};cC=bA.HashSet=dj.Class({Add:function(dr){return this.add(dr);},Contains:function(dr){var ds;ds=this.data[this.hash(dr)];return ds==null?false:this.arrContains(dr,ds);},add:function(dr){var ds,dt;ds=this.hash(dr);dt=this.data[ds];return dt==null?(this.data[ds]=[dr],this.count=this.count+1,true):this.arrContains(dr,dt)?false:(dt.push(dr),this.count=this.count+1,true);},arrContains:function(dr,ds){var dt,du,dv,dw;dt=true;du=0;dw=ds.length;while(dt&&du<dw)if(this.equals.apply(null,[ds[du],dr]))dt=false;else du=du+1;return!dt;},ExceptWith:function(dr){var ds;ds=bH.Get(dr);try{while(ds.MoveNext())this.Remove(ds.Current());}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(dr){var ds,dt,du,dv;ds=0;dt=df.concat(this.data);for(du=0,dv=dt.length-1;du<=dv;du++)G.set(dr,du,dt[du]);},IntersectWith:function(dr){var ds,dt,du,dv,dw;ds=new cC.New$4(dr,this.equals,this.hash);dt=df.concat(this.data);for(du=0,dv=dt.length-1;du<=dv;du++){dw=dt[du];!ds.Contains(dw)?this.Remove(dw):void 0;}},Remove:function(dr){var ds;ds=this.data[this.hash(dr)];return ds==null?false:this.arrRemove(dr,ds)&&(this.count=this.count-1,true);},arrRemove:function(dr,ds){var dt,du,dv,dw;dt=true;du=0;dw=ds.length;while(dt&&du<dw)if(this.equals.apply(null,[ds[du],dr])){ds.splice.apply(ds,[du,1]);dt=false;}else du=du+1;return!dt;},GetEnumerator:function(){return bH.Get(df.concat(this.data));},GetEnumerator0:function(){return bH.Get(df.concat(this.data));}},g,cC);cC.New$3=dj.Ctor(function(){cC.New$4.call(this,[],F.Equals,F.Hash);},cC);cC.New$4=dj.Ctor(function(dr,ds,dt){var du;g.New.call(this);this.equals=ds;this.hash=dt;this.data=[];this.count=0;du=bH.Get(dr);try{while(du.MoveNext())this.add(du.Current());}finally{if(typeof du=="object"&&"Dispose"in du)du.Dispose();}},cC);cC.New$2=dj.Ctor(function(dr){cC.New$4.call(this,dr,F.Equals,F.Hash);},cC);cD.get_UseAnimations=function(){return cW.UseAnimations();};cD.Play=function(dr){var ds;ds=null;return bV.Delay(function(){return bV.Bind(cD.Run(a.ignore,cW.Actions(dr)),function(){cW.Finalize(dr);return bV.Return(null);});});};cD.Append=function(dr,ds){return{$:0,$0:c6.Append(dr.$0,ds.$0)};};cD.Run=function(dr,ds){var dt;function du(dv){function dw(dx,dy){var dz;dz=dy-dx;ds.Compute(dz);dr();return dz<=dt?void a.requestAnimationFrame(function(dA){dw(dx,dA);}):dv();}a.requestAnimationFrame(function(dx){dw(dx,dx);});}dt=ds.Duration;return dt===0?bV.Zero():bV.FromContinuations(function(dv,dw,dx){return du.apply(null,[dv,dw,dx]);});};cD.Concat=function(dr){return{$:0,$0:c6.Concat(q.map(cW.List,dr))};};cD.get_Empty=function(){return{$:0,$0:c6.Empty()};};cE.BatchUpdatesEnabled=function(){cX.$cctor();return cX.BatchUpdatesEnabled;};cF.StartProcessor=function(dr){var ds;function dt(){var du;du=null;return bV.Delay(function(){return bV.Bind(dr,function(){var dv;dv=ds[0];return dv===1?(ds[0]=0,bV.Zero()):dv===2?(ds[0]=1,dt()):bV.Zero();});});}ds=[0];return function(){var du;du=ds[0];du===0?(ds[0]=1,bV.Start(dt(),null)):du===1?ds[0]=2:void 0;};};q.nonNegative=function(){return l.FailWith("The input must be non-negative.");};q.insufficient=function(){return l.FailWith("The input sequence has an insufficient number of elements.");};G.mapFold=function(dr,ds,dt){var du,dv,dw,dx,dy;dv=new a.Array(dt.length);du=ds;for(dw=0,dx=dt.length-1;dw<=dx;dw++){dy=dr(du,dt[dw]);dv[dw]=dy[0];du=dy[1];}return[dv,du];};G.mapiInPlace=function(dr,ds){var dt,du;for(dt=0,du=ds.length-1;dt<=du;dt++)ds[dt]=dr(dt,ds[dt]);return ds;};G.mapInPlace=function(dr,ds){var dt,du;for(dt=0,du=ds.length-1;dt<=du;dt++)ds[dt]=dr(ds[dt]);};q.tryItem=function(dr,ds){var dt,du,dv;if(dr<0)return null;else{dt=0;du=bH.Get(ds);try{dv=true;while(dv&&dt<=dr)if(du.MoveNext())dt=dt+1;else dv=false;return dv?{$:1,$0:du.Current()}:null;}finally{if(typeof du=="object"&&"Dispose"in du)du.Dispose();}}};q.tryHead=function(dr){var ds;ds=bH.Get(dr);try{return ds.MoveNext()?{$:1,$0:ds.Current()}:null;}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}};q.tryLast=function(dr){var ds,dt;ds=bH.Get(dr);try{if(ds.MoveNext()){while(ds.MoveNext());dt={$:1,$0:ds.Current()};}else dt=null;return dt;}finally{if(typeof ds=="object"&&"Dispose"in ds)ds.Dispose();}};cG=bV.Scheduler=dj.Class({Fork:function(dr){var ds;ds=this;this.robin.push(dr);this.idle?(this.idle=false,a.setTimeout(function(){ds.tick();},0)):void 0;},tick:function(){var dr,ds,dt;ds=this;dt=dn.now();dr=true;while(dr)if(this.robin.length===0){this.idle=true;dr=false;}else{(this.robin.shift())();dn.now()-dt>40?(a.setTimeout(function(){ds.tick();},0),dr=false):void 0;}}},g,cG);cG.New=dj.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},cG);cH=cf.ArrayStorage=dj.Class({SSet:function(dr){return G.ofSeq(dr);},SSetAt:function(dr,ds,dt){G.set(dt,dr,ds);return dt;},SAppend:function(dr,ds){ds.push(dr);return ds;}},g,cH);cH.New=dj.Ctor(function(dr){g.New.call(this);this.init=dr;},cH);cI=f.OperationCanceledException=dj.Class({},ca,cI);cI.New=dj.Ctor(function(dr){cI.New$1.call(this,"The operation was canceled.",null,dr);},cI);cI.New$1=dj.Ctor(function(dr,ds,dt){this.message=dr;this.inner=ds;bZ.setPrototypeOf(this,cI.prototype);this.ct=dt;},cI);cJ=cl.FSharpEvent=dj.Class({},g,cJ);cJ.New=dj.Ctor(function(){g.New.call(this);this.event=c1.New([]);},cJ);cK=bA.LinkedList=dj.Class({GetEnumerator$1:function(){return new de.New(this);},AddLast:function(dr){var ds;return this.c===0?(ds={p:null,n:null,v:dr},(this.n=ds,this.p=this.n,this.c=1,ds)):this.AddAfter(this.p,dr);},RemoveFirst:function(){this.Remove$1(this.n);},AddAfter:function(dr,ds){var dt,du;dt=dr.n;du={p:dr,n:dt,v:ds};F.Equals(dr.n,null)?this.p=du:void 0;dr.n=du;!F.Equals(dt,null)?dt.p=du:void 0;this.c=this.c+1;return du;},Remove$1:function(dr){var ds,dt;ds=dr.p;dt=dr.n;F.Equals(ds,null)?this.n=dt:ds.n=dt;F.Equals(dt,null)?this.p=ds:dt.p=ds;this.c=this.c-1;},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,cK);cK.New=dj.Ctor(function(){cK.New$1.call(this,[]);},cK);cK.New$1=dj.Ctor(function(dr){var ds,dt;g.New.call(this);this.c=0;this.n=null;this.p=null;ds=bH.Get(dr);ds.MoveNext()?(this.n={p:null,n:null,v:ds.Current()},this.p=this.n,this.c=1):void 0;while(ds.MoveNext()){dt={p:this.p,n:null,v:ds.Current()};this.p.n=dt;this.p=dt;this.c=this.c+1;}},cK);cL.TryFind=function(dr,ds){return ds.TryFind(dr);};cM.ConnectStateful=function(dr,ds,dt,du){return cM.FromWebSocketStateful(dr,ds,new a.WebSocket(dt.URI),du,dt.JsonEncoding);};cM.FromWebSocketStateful=function(dr,ds,dt,du,dv){var dw,dx,dy,dz,dA;dw=cr.getEncoding(dr,ds,dv);dx=dw[1];dy=cr.cacheSocket(dt,dx);dz=new cv.New(dt,dw[0]);dA=null;return bV.Delay(function(){return bV.Bind(du(dz),function(dB){var dC,dD;function dE(dF,dG){var dH;dH=dy(function(dI){dD.mailbox.AddLast(dI);dD.resume();});dt.onopen=function(){dD.mailbox.AddLast(da.Open);dD.resume();return dF(dz);};dt.onclose=function(){dD.mailbox.AddLast(da.Close);return dD.resume();};dt.onmessage=function(dI){dD.mailbox.AddLast({$:0,$0:dx(dI)});return dD.resume();};dt.onerror=function(){dD.mailbox.AddLast(da.Error);dD.resume();return dG(new ca("Could not connect to the server."));};dH?dF(dz):void 0;}dC=dB[1];dD=c$.FoldAgent(dB[0],function(dF,dG){return(dC(dF))(dG);});return bV.FromContinuations(function(dF,dG,dH){return dE.apply(null,[dF,dG,dH]);});});});};cO.New=function(dr,ds,dt,du){var dv;dv={DynElem:dr,DynFlags:ds,DynNodes:dt};dj.SetOptional(dv,"OnAfterRender",du);return dv;};cP.$cctor=function(){cP.$cctor=a.ignore;cP.EmptyAttr=null;};cQ.$cctor=function(){cQ.$cctor=a.ignore;cQ.counter=0;};cR.convertTextNode=function(dr){var ds,dt,du,dv,dw,dx;ds=null;dt=0;dv=dr.textContent;dw=new a.RegExp(bP.TextHoleRE(),"g");while(ds=dw.exec(dv),ds!==null){dr.parentNode.insertBefore(self.document.createTextNode(_0.string(dv,{$:1,$0:dt},{$:1,$0:dw.lastIndex-G.get(ds,0).length-1})),dr);dt=dw.lastIndex;dx=self.document.createElement("span");dx.setAttribute("ws-replace",G.get(ds,1).toLowerCase());dr.parentNode.insertBefore(dx,dr);}dw.lastIndex=0;dr.textContent=_0.string(dv,{$:1,$0:dt},null);};cR.failNotLoaded=function(dr){dl.warn("Instantiating non-loaded template",dr);};cR.fillTextHole=function(dr,ds,dt){var du;du=dr.querySelector("[ws-replace]");return F.Equals(du,null)?(dl.warn("Filling non-existent text hole",dt),null):(du.parentNode.replaceChild(new a.Text(ds),du),{$:1,$0:du.getAttribute("ws-replace")});};cR.removeHolesExcept=function(dr,ds){function dt(du){bM.IterSelector(dr,"["+du+"]",function(dv){if(!ds.Contains(dv.getAttribute(du)))dv.removeAttribute(du);});}dt("ws-attr");dt("ws-onafterrender");dt("ws-var");bM.IterSelector(dr,"[ws-hole]",function(du){if(!ds.Contains(du.getAttribute("ws-hole"))){du.removeAttribute("ws-hole");while(du.hasChildNodes())du.removeChild(du.lastChild);}});bM.IterSelector(dr,"[ws-replace]",function(du){if(!ds.Contains(du.getAttribute("ws-replace")))du.parentNode.removeChild(du);});bM.IterSelector(dr,"[ws-on]",function(du){du.setAttribute("ws-on",Z.concat(" ",G.filter(function(dv){return ds.Contains(G.get(Z.SplitChars(dv,[":"],1),1));},Z.SplitChars(du.getAttribute("ws-on"),[" "],1))));});bM.IterSelector(dr,"[ws-attr-holes]",function(du){var dv,dw,dx,dy,dz;dv=Z.SplitChars(du.getAttribute("ws-attr-holes"),[" "],1);for(dw=0,dx=dv.length-1;dw<=dx;dw++){dy=G.get(dv,dw);du.setAttribute(dy,(dz=new a.RegExp(bP.TextHoleRE(),"g"),du.getAttribute(dy).replace(dz,function(dA,dB){return ds.Contains(dB)?dA:"";})));}});};cR.fillInstanceAttrs=function(dr,ds){var dt,du,dv,dw,dx;cR.convertAttrs(ds);dt=ds.nodeName.toLowerCase();du=dr.querySelector("[ws-attr="+dt+"]");if(F.Equals(du,null))dl.warn("Filling non-existent attr hole",dt);else{du.removeAttribute("ws-attr");for(dv=0,dw=ds.attributes.length-1;dv<=dw;dv++){dx=ds.attributes.item(dv);dx.name==="class"&&du.hasAttribute("class")?du.setAttribute("class",du.getAttribute("class")+" "+dx.nodeValue):du.setAttribute(dx.name,dx.nodeValue);}}};cR.mapHoles=function(dr,ds){function dt(du){bM.IterSelector(dr,"["+du+"]",function(dv){var dw,dx;dw=(dx=null,[ds.TryGetValue(dv.getAttribute(du).toLowerCase(),{get:function(){return dx;},set:function(dy){dx=dy;}}),dx]);dw[0]?dv.setAttribute(du,dw[1]):void 0;});}dt("ws-hole");dt("ws-replace");dt("ws-attr");dt("ws-onafterrender");dt("ws-var");bM.IterSelector(dr,"[ws-on]",function(du){du.setAttribute("ws-on",Z.concat(" ",G.map(function(dv){var dw,dx,dy;dw=Z.SplitChars(dv,[":"],1);dx=(dy=null,[ds.TryGetValue(G.get(dw,1),{get:function(){return dy;},set:function(dz){dy=dz;}}),dy]);return dx[0]?G.get(dw,0)+":"+dx[1]:dv;},Z.SplitChars(du.getAttribute("ws-on"),[" "],1))));});bM.IterSelector(dr,"[ws-attr-holes]",function(du){var dv,dw,dx;dv=Z.SplitChars(du.getAttribute("ws-attr-holes"),[" "],1);for(dw=0,dx=dv.length-1;dw<=dx;dw++)(function(){var dy;function dz(dA,dB){var dC;dC=l.KeyValue(dB);return dA.replace(new a.RegExp("\\${"+dC[0]+"}","ig"),"${"+dC[1]+"}");}dy=G.get(dv,dw);return du.setAttribute(dy,(((dj.Curried3(q.fold))(dz))(du.getAttribute(dy)))(ds));}());});};cR.fill=function(dr,ds,dt){while(true)if(dr.hasChildNodes())dt=ds.insertBefore(dr.lastChild,dt);else return null;};cR.convertAttrs=function(dr){var dt,du,dv,dw,dx,dy,dz,dA;function ds(dB){var dC;dC=dr.getAttribute(dB);dC===null?void 0:dr.setAttribute(dB,dC.toLowerCase());}dt=dr.attributes;du=[];dv=[];dw=[];for(dx=0,dy=dt.length-1;dx<=dy;dx++){dz=dt.item(dx);Z.StartsWith(dz.nodeName,"ws-on")&&dz.nodeName!=="ws-onafterrender"&&dz.nodeName!=="ws-on"?(du.push(dz.nodeName),dv.push(_0.string(dz.nodeName,{$:1,$0:"ws-on".length},null)+":"+dz.nodeValue.toLowerCase())):!Z.StartsWith(dz.nodeName,"ws-")&&(new a.RegExp(bP.TextHoleRE())).test(dz.nodeValue)?(dz.nodeValue=(dA=new a.RegExp(bP.TextHoleRE(),"g"),dz.nodeValue.replace(dA,function(dB,dC){return"${"+dC.toLowerCase()+"}";})),dw.push(dz.nodeName)):void 0;}!(dv.length==0)?dr.setAttribute("ws-on",Z.concat(" ",dv)):void 0;!(dw.length==0)?dr.setAttribute("ws-attr-holes",Z.concat(" ",dw)):void 0;ds("ws-hole");ds("ws-replace");ds("ws-attr");ds("ws-onafterrender");ds("ws-var");G.iter(function(dB){dr.removeAttribute(dB);},du);};cS=bA.KeyCollection=dj.Class({GetEnumerator$1:function(){return bH.Get(q.map(function(dr){return dr.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,cS);cS.New=dj.Ctor(function(dr){g.New.call(this);this.d=dr;},cS);cU.New=function(dr,ds){return{PreviousNodes:dr,Top:ds};};cV.get_Empty=function(){return{$:0,$0:new cC.New$3()};};cV.FindAll=function(dr){var ds;function dt(dv){if(dv!=null&&dv.$==0){dt(dv.$0);dt(dv.$1);}else if(dv!=null&&dv.$==1)du(dv.$0);else if(dv!=null&&dv.$==2)dt(dv.$0.Current);else if(dv!=null&&dv.$==6)G.iter(du,dv.$0.Holes);}function du(dv){ds.push(dv);dt(dv.Children);}ds=[];dt(dr);return{$:0,$0:new cC.New$2(ds)};};cV.Filter=function(dr,ds){return{$:0,$0:dc.Filter(dr,ds.$0)};};cV.Except=function(dr,ds){return{$:0,$0:dc.Except(dr.$0,ds.$0)};};cV.ToArray=function(dr){return dc.ToArray(dr.$0);};cV.Intersect=function(dr,ds){return{$:0,$0:dc.Intersect(dr.$0,ds.$0)};};cW.UseAnimations=function(){c5.$cctor();return c5.UseAnimations;};cW.Actions=function(dr){return cW.ConcatActions(G.choose(function(ds){return ds.$==1?{$:1,$0:ds.$0}:null;},c6.ToArray(dr.$0)));};cW.Finalize=function(dr){G.iter(function(ds){if(ds.$==0)ds.$0();},c6.ToArray(dr.$0));};cW.ConcatActions=function(dr){var ds,dt,du,dv;ds=b9.ofSeqNonCopying(dr);dt=G.length(ds);return dt===0?cW.Const():dt===1?G.get(ds,0):(du=q.max(q.map(function(dw){return dw.Duration;},ds)),(dv=G.map(function(dw){return cW.Prolong(du,dw);},ds),cW.Def(du,function(dw){G.iter(function(dx){dx.Compute(dw);},dv);})));};cW.List=function(dr){return dr.$0;};cW.Const=function(dr){return cW.Def(0,function(){return dr;});};cW.Def=function(dr,ds){return{Compute:ds,Duration:dr};};cW.Prolong=function(dr,ds){var dt,du,dv;dt=ds.Compute;du=ds.Duration;dv=ba.Create(function(){return ds.Compute(ds.Duration);});return{Compute:function(dw){return dw>=du?dv.f():dt(dw);},Duration:dr};};cX.$cctor=function(){cX.$cctor=a.ignore;cX.BatchUpdatesEnabled=true;};bj.AjaxProvider=function(){c7.$cctor();return c7.AjaxProvider;};bj.makePayload=function(dr){return dm.stringify(dr);};bj.makeHeaders=function(dr){return{"content-type":"application/json","x-websharper-rpc":dr};};bj.EndPoint=function(){c7.$cctor();return c7.EndPoint;};bj.ajax=function(dr,ds,dt,du,dv,dw,dx){var dy,dz,dA;dy=new a.XMLHttpRequest();dz=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");dy.open("POST",ds,dr);if(dr==true)dy.withCredentials=true;for(var dC in dt)dy.setRequestHeader(dC,dt[dC]);if(dz)dy.setRequestHeader("x-csrftoken",dz);function dB(){var dD;if(dy.status==200)dv(dy.responseText);else if(dx&&dy.status==403&&dy.responseText=="CSRF")dx();else{dD="Response status is not 200: ";dw(new ca(dD+dy.status));}}if("onload"in dy)dy.onload=dy.onerror=dy.onabort=dB;else dy.onreadystatechange=function(){if(dy.readyState==4)dB();};dy.send(du);};cY=f.FormatException=dj.Class({},ca,cY);cY.New$1=dj.Ctor(function(dr){this.message=dr;bZ.setPrototypeOf(this,cY.prototype);},cY);cZ.PrepoElse={$:8};cZ.PrepoEndIf={$:9};cZ.NoPrepo={$:12};c1=c0.Event=dj.Class({Trigger:function(dr){var ds,dt,du;ds=this.Handlers.slice();for(dt=0,du=ds.length-1;dt<=du;dt++)(G.get(ds,dt))(null,dr);},Dispose:a.ignore},null,c1);c1.New=function(dr){return new c1({Handlers:dr});};c2=bA.FSharpMap=dj.Class({TryFind:function(dr){var ds;ds=bS.TryFind(c9.New(dr,void 0),this.tree);return ds==null?null:{$:1,$0:ds.$0.Value};},Remove:function(dr){return new c2.New$1(bS.Remove(c9.New(dr,void 0),this.tree));},Add:function(dr,ds){return new c2.New$1(bS.Add(c9.New(dr,ds),this.tree));},Equals:function(dr){return this.get_Count()===dr.get_Count()&&q.forall2(F.Equals,this,dr);},GetHashCode:function(){return F.Hash(G.ofSeq(this));},get_Count:function(){var dr;dr=this.tree;return dr==null?0:dr.Count;},GetEnumerator$1:function(){return bH.Get(q.map(function(dr){return{K:dr.Key,V:dr.Value};},bS.Enumerate(false,this.tree)));},CompareTo0:function(dr){return q.compareWith(F.Compare,this,dr);},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,c2);c2.New=dj.Ctor(function(dr){c2.New$1.call(this,c_.fromSeq(dr));},c2);c2.New$1=dj.Ctor(function(dr){g.New.call(this);this.tree=dr;},c2);c3=f.TimeoutException=dj.Class({},ca,c3);c3.New=dj.Ctor(function(){c3.New$1.call(this,"The operation has timed out.");},c3);c3.New$1=dj.Ctor(function(dr){this.message=dr;bZ.setPrototypeOf(this,c3.prototype);},c3);c4.Clear=function(dr){dr.splice(0,G.length(dr));};c5.$cctor=function(){c5.$cctor=a.ignore;c5.CubicInOut=db.Custom(function(dr){var ds;ds=dr*dr;return 3*ds-2*(ds*dr);});c5.UseAnimations=true;};c6.Append=function(dr,ds){return dr.$==0?ds:ds.$==0?dr:{$:2,$0:dr,$1:ds};};c6.ToArray=function(dr){var ds;function dt(du){if(du.$==1)ds.push(du.$0);else if(du.$==2){dt(du.$0);dt(du.$1);}else if(du.$==3)G.iter(function(dv){ds.push(dv);},du.$0);}ds=[];dt(dr);return ds.slice(0);};c6.Concat=function(dr){var ds;ds=b9.ofSeqNonCopying(dr);return b9.TreeReduce(c6.Empty(),c6.Append,ds);};c6.Empty=function(){dh.$cctor();return dh.Empty;};c7.$cctor=function(){c7.$cctor=a.ignore;c7.EndPoint="?";c7.AjaxProvider=new dd.New();};c8=bA.List=dj.Class({GetEnumerator:function(){return bH.Get(this);},GetEnumerator0:function(){return bH.Get0(this);}},null,c8);c9=bA.Pair=dj.Class({Equals:function(dr){return F.Equals(this.Key,dr.Key);},GetHashCode:function(){return F.Hash(this.Key);},CompareTo0:function(dr){return F.Compare(this.Key,dr.Key);}},null,c9);c9.New=function(dr,ds){return new c9({Key:dr,Value:ds});};c_.fromSeq=function(dr){var ds;ds=G.ofSeq(q.delay(function(){return q.collect(function(dt){return[c9.New(dt[0],dt[1])];},q.distinctBy(function(dt){return dt[0];},dr));}));G.sortInPlace(ds);return bS.Build(ds,0,ds.length-1);};c$.FoldAgent=function(dr,ds){return cm.Start(function(dt){function du(dv){var dw;dw=null;return bV.Delay(function(){return bV.Bind(dt.Receive(null),function(dx){return bV.Bind(ds(dv,dx),function(dy){return du(dy);});});});}return du(dr);},null);};da.Open={$:2};da.Close={$:3};da.Error={$:1};db=m.Easing=dj.Class({},g,db);db.Custom=function(dr){return new db.New(dr);};db.New=dj.Ctor(function(dr){g.New.call(this);this.transformTime=dr;},db);dc.Filter=function(dr,ds){return new cC.New$2(G.filter(dr,dc.ToArray(ds)));};dc.Except=function(dr,ds){var dt;dt=new cC.New$2(dc.ToArray(ds));dt.ExceptWith(dc.ToArray(dr));return dt;};dc.ToArray=function(dr){var ds;ds=G.create(dr.get_Count(),void 0);dr.CopyTo(ds);return ds;};dc.Intersect=function(dr,ds){var dt;dt=new cC.New$2(dc.ToArray(dr));dt.IntersectWith(dc.ToArray(ds));return dt;};dd=bj.XhrProvider=dj.Class({Async:function(dr,ds,dt,du,dv){bj.ajax(true,dr,ds,dt,du,dv,function(){bj.ajax(true,dr,ds,dt,du,dv,void 0);});}},g,dd);dd.New=dj.Ctor(function(){g.New.call(this);},dd);de=bA.LinkedListEnumerator=dj.Class({MoveNext:function(){this.c=this.c.n;return!F.Equals(this.c,null);},Current:function(){return this.c.v;},Dispose:a.ignore},g,de);de.New=dj.Ctor(function(dr){g.New.call(this);this.c=dr;},de);df.concat=function(dr){var ds,dt;ds=[];for(var du in dr)ds.push.apply(ds,dr[du]);return ds;};dg.Children=function(dr,ds){var dt,du,dv;if(ds!=null&&ds.$==1){dv=[];dt=ds.$0[0].nextSibling;while(dt!==ds.$0[1]){dv.push(dt);dt=dt.nextSibling;}return{$:0,$0:dv};}else return{$:0,$0:G.init(dr.childNodes.length,(du=dr.childNodes,function(dw){return du[dw];}))};};dg.Except=function(dr,ds){var dt;dt=dr.$0;return{$:0,$0:G.filter(function(du){return G.forall(function(dv){return!(du===dv);},dt);},ds.$0)};};dg.Iter=function(dr,ds){G.iter(dr,ds.$0);};dg.DocChildren=function(dr){var ds;function dt(du){if(du!=null&&du.$==2)dt(du.$0.Current);else if(du!=null&&du.$==1)ds.push(du.$0.El);else if(du==null);else if(du!=null&&du.$==5)ds.push(du.$0);else if(du!=null&&du.$==4)ds.push(du.$0.Text);else if(du!=null&&du.$==6)G.iter(function(dv){if(dv==null||dv.constructor===bZ)dt(dv);else ds.push(dv);},du.$0.Els);else{dt(du.$0);dt(du.$1);}}ds=[];dt(dr.Children);return{$:0,$0:b9.ofSeqNonCopying(ds)};};dh.$cctor=function(){dh.$cctor=a.ignore;dh.Empty={$:0};};}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map

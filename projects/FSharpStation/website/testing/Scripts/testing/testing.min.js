(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.ResultMessage=c.ResultMessage||{};e=c.Monads=c.Monads||{};f=e.Seq=e.Seq||{};g=e.Async=e.Async||{};h=a.WebSharper;i=h&&h.Obj;j=e.Result=e.Result||{};k=j.Builder=j.Builder||{};l=j.Operators=j.Operators||{};m=e.AsyncResult=e.AsyncResult||{};n=e.AsyncResultBuilder=e.AsyncResultBuilder||{};o=e.AsyncResultBuilderP=e.AsyncResultBuilderP||{};p=e.Extensions=e.Extensions||{};q=e.ReaderMonads=e.ReaderMonads||{};r=q.ReaderMBasic=q.ReaderMBasic||{};s=r.Builder=r.Builder||{};t=r.Operators=r.Operators||{};u=q.ReaderMResult=q.ReaderMResult||{};v=u.Builder=u.Builder||{};w=u.Operators=u.Operators||{};x=q.ReaderMAsyncResult=q.ReaderMAsyncResult||{};y=x.Builder=x.Builder||{};z=x.Operators=x.Operators||{};A=c.String=c.String||{};B=c.ParseO=c.ParseO||{};C=c.MailboxProcessorExt=c.MailboxProcessorExt||{};D=c.Mailbox=c.Mailbox||{};E=D.StateFull=D.StateFull||{};F=c.ResourceAgentState=c.ResourceAgentState||{};G=c.ResourceAgent=c.ResourceAgent||{};H=c.AgentReaderM=c.AgentReaderM||{};I=c.CommArgRoot=c.CommArgRoot||{};J=I.CommArg=I.CommArg||{};K=I.CommArgCollection=I.CommArgCollection||{};L=I.TypedCommArg=I.TypedCommArg||{};M=I.CommArgModule=I.CommArgModule||{};N=c.FsCodeModule=c.FsCodeModule||{};O=N.PreproDirective=N.PreproDirective||{};P=c.SnippetId=c.SnippetId||{};Q=c.Snippet=c.Snippet||{};R=c.SnippetCollection=c.SnippetCollection||{};S=c.SnippetModule=c.SnippetModule||{};T=c.TreeReader=c.TreeReader||{};U=T.Node=T.Node||{};V=b.LibraryJS=b.LibraryJS||{};W=V.Promise=V.Promise||{};X=V.View=V.View||{};Y=V.Serializer=V.Serializer||{};Z=V.LoadFiles=V.LoadFiles||{};_0=V.REGEX=V.REGEX||{};_1=V.Hoverable=V.Hoverable||{};_2=_1.Hoverable=_1.Hoverable||{};_3=V.ResizeObserver=V.ResizeObserver||{};_4=V.WebComponent=V.WebComponent||{};_5=_4.WcTabStrip=_4.WcTabStrip||{};_6=_5.WcTabStripT=_5.WcTabStripT||{};_7=_4.WcSplitter=_4.WcSplitter||{};_8=_7.WcSplitterT=_7.WcSplitterT||{};_9=V.Monaco=V.Monaco||{};_=_9.Position=_9.Position||{};$=_9.Range=_9.Range||{};ba=_9.Uri=_9.Uri||{};bb=_9.Location=_9.Location||{};bc=_9.FindMatch=_9.FindMatch||{};bd=_9.WordAtPosition=_9.WordAtPosition||{};be=_9.Model=_9.Model||{};bf=_9.MarkDownString=_9.MarkDownString||{};bg=_9.MarkerData=_9.MarkerData||{};bh=_9.CompletionItem=_9.CompletionItem||{};bi=_9.Hover=_9.Hover||{};bj=_9.Editor=_9.Editor||{};bk=_9.MonacoConfig=_9.MonacoConfig||{};bl=b.Library2=b.Library2||{};bm=bl.FsiAgent=bl.FsiAgent||{};bn=bl.WebSockets=bl.WebSockets||{};bo=bn.Address=bn.Address||{};bp=bn.BrokerRequest=bn.BrokerRequest||{};bq=bn.MessageType=bn.MessageType||{};br=bn.BrokerMessage=bn.BrokerMessage||{};bs=bn.Replier=bn.Replier||{};bt=bn.MessageGeneric=bn.MessageGeneric||{};bu=bn.ClientTypeFSharp=bn.ClientTypeFSharp||{};bv=bn.ClientTypeFSStation=bn.ClientTypeFSStation||{};bw=bn.ClientTypeJScript=bn.ClientTypeJScript||{};bx=bn.ReplyHandler=bn.ReplyHandler||{};by=bx.Handler=bx.Handler||{};bz=bn.WSMessagingClient=bn.WSMessagingClient||{};bA=bl.FsAutoComplete=bl.FsAutoComplete||{};bB=bA.CommTypes=bA.CommTypes||{};bC=bB.ResponseError=bB.ResponseError||{};bD=bB.Location=bB.Location||{};bE=bB.CompletionResponse=bB.CompletionResponse||{};bF=bB.OverloadDescription=bB.OverloadDescription||{};bG=bB.OverloadParameter=bB.OverloadParameter||{};bH=bB.Overload=bB.Overload||{};bI=bB.Parameter=bB.Parameter||{};bJ=bB.SignatureData=bB.SignatureData||{};bK=bB.MethodResponse=bB.MethodResponse||{};bL=bB.SymbolUseRange=bB.SymbolUseRange||{};bM=bB.SymbolUseResponse=bB.SymbolUseResponse||{};bN=bB.HelpTextResponse=bB.HelpTextResponse||{};bO=bB.CompilerLocationResponse=bB.CompilerLocationResponse||{};bP=bB.FSharpErrorInfo=bB.FSharpErrorInfo||{};bQ=bB.ErrorResponse=bB.ErrorResponse||{};bR=bB.Colorization=bB.Colorization||{};bS=bB.Declaration=bB.Declaration||{};bT=bB.DeclarationResponse=bB.DeclarationResponse||{};bU=bB.OpenNamespace=bB.OpenNamespace||{};bV=bB.QualifySymbol=bB.QualifySymbol||{};bW=bB.ResolveNamespaceResponse=bB.ResolveNamespaceResponse||{};bX=bB.UnionCaseResponse=bB.UnionCaseResponse||{};bY=bA.Calls=bA.Calls||{};bZ=b.FSharpStation=b.FSharpStation||{};b0=bZ.FStation=bZ.FStation||{};b1=bZ.Snippets=bZ.Snippets||{};b2=bZ.DragDrop=bZ.DragDrop||{};b3=b2.DragInfo=b2.DragInfo||{};b4=bZ.Templating=bZ.Templating||{};b5=bZ.RenderSnippets=bZ.RenderSnippets||{};b6=bZ.RenderProperties=bZ.RenderProperties||{};b7=bZ.Monaco=bZ.Monaco||{};b8=b7.HoverProvider=b7.HoverProvider||{};b9=b7.CompletionItemProvider=b7.CompletionItemProvider||{};b_=b7.DefinitionProvider=b7.DefinitionProvider||{};b$=b7.MonacoOptions=b7.MonacoOptions||{};ca=b7.ITextModelService=b7.ITextModelService||{};cb=bZ.JumpTo=bZ.JumpTo||{};cc=bZ.Serializer=bZ.Serializer||{};cd=cc.Model=cc.Model||{};ce=bZ.LoadSave=bZ.LoadSave||{};cf=bZ.Importer=bZ.Importer||{};cg=bZ.MainProgram=bZ.MainProgram||{};ch=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};ci=a.testing_GeneratedPrintf=a.testing_GeneratedPrintf||{};cj=a.testing_Templates=a.testing_Templates||{};ck=a.testing_JsonEncoder=a.testing_JsonEncoder||{};cl=a.testing_JsonDecoder=a.testing_JsonDecoder||{};cm=a.GeneratedPrintf=a.GeneratedPrintf||{};cn=a.IntelliFactory;co=cn&&cn.Runtime;cp=h&&h.Utils;cq=h&&h.Seq;cr=h&&h.Concurrency;cs=h&&h.Arrays;ct=h&&h.List;cu=h&&h.Enumerator;cv=h&&h.Result;cw=h&&h.Operators;cx=h&&h.Strings;cy=h&&h.Slice;cz=h&&h.Control;cA=cz&&cz.MailboxProcessor;cB=h&&h.Unchecked;cC=a.System;cD=cC&&cC.Guid;cE=h&&h.Collections;cF=cE&&cE.FSharpSet;cG=h&&h.Option;cH=h&&h.CancellationTokenSource;cI=a.console;cJ=h&&h.UI;cK=cJ&&cJ.View;cL=cJ&&cJ.Var$1;cM=cE&&cE.FSharpMap;cN=cE&&cE.BalancedTree;cO=cJ&&cJ.DomUtility;cP=cJ&&cJ.Doc;cQ=cJ&&cJ.AttrModule;cR=cJ&&cJ.AttrProxy;cS=a.Node;cT=cJ&&cJ.Client;cU=cT&&cT.Templates;cV=a.Reflect;cW=a.Object;cX=cE&&cE.Map;cY=a.JSON;cZ=h&&h.TimeoutException;c0=h&&h.ClientSideJson;c1=c0&&c0.Provider;c2=h&&h.Owin;c3=c2&&c2.WebSocket;c4=c3&&c3.Client;c5=c4&&c4.WithEncoding;c6=c3&&c3.Endpoint;c7=a.location;c8=h&&h.Remoting;c9=c8&&c8.AjaxRemotingProvider;c_=cJ&&cJ.FromView;c$=cJ&&cJ.Templating;da=c$&&c$.Runtime;db=da&&da.Server;dc=db&&db.ProviderBuilder;dd=db&&db.Handler;de=db&&db.TemplateInstance;df=h&&h.JavaScript;dg=df&&df.Promise;dh=V&&V.AppFramework;di=dh&&dh.PlugIn;dj=h&&h.Lazy;dk=V&&V.LayoutEngineModule;dl=h&&h.DateUtil;dm=h&&h.Numeric;dn=a.Date;_do=cJ&&cJ.ListModel;dp=cE&&cE.Dictionary;dq=a.LayoutEngine_Templates;d=c.ResultMessage=co.Class({toString:function(){return this.$==1?(function(dr){return function(ds){return dr("Warning  : "+cp.toSafe(ds));};}(a.id))(this.$0):this.$==2?(function(dr){return function(ds){return dr(a.String(ds));};}(a.id))(this.$0):this.$==3?(((co.Curried3(function(dr,ds,dt){return dr("Exception: "+cp.toSafe(ds)+", "+cp.toSafe(dt));}))(a.id))(this.$0))(this.$1):(function(dr){return function(ds){return dr("Error    : "+cp.toSafe(ds));};}(a.id))(this.$0);}},null,d);f.absorbR=function(dr){return cq.choose(function(ds){return ds.$==0?{$:1,$0:ds.$0}:null;},dr);};f.absorbO=function(dr){return cq.choose(a.id,dr);};f.insertR=function(dr){return dr.$==0?cq.map(function(ds){return{$:0,$0:ds};},dr.$0):(f.rtn())(c.Error$1(dr.$0));};f.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:cq.map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?(f.rtn())(null):ds.$0;};f.rtn=function(){ch.$cctor();return ch.rtn;};g.insertR=function(dr){function ds(du){return{$:0,$0:du};}function dt(du){return cr.Return(du);}return dr.$==0?cr.Bind(dr.$0,function(du){return dt(ds(du));}):cr.Return(c.Error$1(dr.$0));};g.insertO=function(dr){var ds;function dt(dv){return{$:1,$0:dv};}function du(dv){return cr.Return(dv);}ds=dr==null?null:{$:1,$0:cr.Bind(dr.$0,function(dv){return du(dt(dv));})};return ds==null?cr.Return(null):ds.$0;};g.sequenceSeq=function(dr){return g.traverseSeq(a.id,dr);};g.traverseSeq=function(dr,ds){function dt(du){return cr.Return(du);}return cr.Bind(cs.foldBack(function(du,dv){return g.op_GreaterGreaterEquals(dr(du),function(dw){return g.op_GreaterGreaterEquals(dv,function(dx){return cr.Return(new ct.T({$:1,$0:dw,$1:dx}));});});},cs.ofSeq(ds),cr.Return(ct.T.Empty)),function(du){return dt(a.id(du));});};g.op_GreaterGreaterEquals=function(dr,ds){return cr.Bind(dr,ds);};g.sleepThen=function(dr,ds){var dt;dt=null;return cr.Delay(function(){return cr.Bind(cr.Sleep(ds),function(){return cr.Return(dr());});});};g.apply=function(dr,ds){var dt;dt=null;return cr.Delay(function(){return cr.Bind(cr.StartChild(dr,null),function(du){return cr.Bind(cr.StartChild(ds,null),function(dv){return cr.Bind(du,function(dw){return cr.Bind(dv,function(dx){return cr.Return(dw(dx));});});});});});};k=j.Builder=co.Class({For:function(dr,ds){var dt;dt=this;return this.Using(cu.Get(dr),function(du){return dt.While(function(){return du.MoveNext();},dt.Delay(function(){return ds(du.Current());}));});},While:function(dr,ds){function dt(du,dv){return du()?cv.Bind(function(){return dt(du,dv);},dv()):j.rtn();}return dt(dr,ds);},Using:function(dr,ds){try{return ds(dr);}finally{dr.Dispose();}},TryFinally:function(dr,ds){try{return dr();}finally{ds();}},TryWith:function(dr,ds){try{return dr();}catch(dt){return ds(dt);}},Run:function(dr){return j.bindP(dr,{$:0,$0:null});},Combine:function(dr,ds){return cv.Bind(ds,dr);},Delay:a.id,Zero:function(){return j.rtn();},Bind:function(dr,ds){return j.bindP(ds,dr);},ReturnFrom:a.id,Return:function(dr){return j.rtn(dr);}},i,k);k.New=co.Ctor(function(){i.New.call(this);},k);l.result=function(){ch.$cctor();return ch.result$1;};l.rtn=function(dr){return j.rtn(dr);};l.op_GreaterEqualsGreater=function(dr,ds,dt){return l.op_GreaterGreaterEquals(dr(dt),ds);};l.op_RightShift=function(dr,ds,dt){return l.op_BarGreaterGreater(dr(dt),ds);};l.op_GreaterGreaterEquals=function(dr,ds){return j.bindP(ds,dr);};l.op_BarGreaterGreater=function(dr,ds){return j.mapP(ds,dr);};j.result=function(){ch.$cctor();return ch.result;};j.sequenceSeq=function(dr){return j.traverseSeq(a.id,dr);};j.traverseSeq=function(dr,ds){return cv.Map(a.id,cs.foldBack(function(dt,du){return j.op_GreaterGreaterEquals(dr(dt),function(dv){return j.op_GreaterGreaterEquals(du,function(dw){return j.rtn(new ct.T({$:1,$0:dv,$1:dw}));});});},cs.ofSeq(ds),j.rtn(ct.T.Empty)));};j.op_GreaterGreaterEquals=function(dr,ds){return cv.Bind(ds,dr);};j.absorbO=function(dr,ds){return j.bindP(function(dt){return j.ofOption(dr,dt);},ds);};j.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:cv.Map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?{$:0,$0:null}:ds.$0;};j.ofOption=function(dr,ds){var dt;dt=ds==null?null:{$:1,$0:{$:0,$0:ds.$0}};return dt==null?function(du){return c.Error$1(dr(du));}():dt.$0;};j.get=function(dr){return j.defaultWith(function(ds){return cw.FailWith(a.String(ds));},dr);};j.iter=function(dr,ds,dt){j.defaultWith(dr,j.mapP(ds,dt));};j.mapP=function(dr,ds){return j.bindP(function(dt){return j.rtn(dr(dt));},ds);};j.bindP=function(dr,ds){if(ds.$==1)return c.Error$1(ds.$0);else try{return dr(ds.$0);}catch(dt){return c.Error$1(new d({$:3,$0:dt.message,$1:dt.stack}));}};j.defaultValue=function(dr,ds){return ds.$==1?dr:ds.$0;};j.defaultWith=function(dr,ds){return ds.$==1?dr(ds.$0):ds.$0;};j.toOption=function(dr){return dr.$==0?{$:1,$0:dr.$0}:null;};j.rtn=function(dr){return{$:0,$0:dr};};m.absorbO=function(dr,ds){function dt(dv){return j.absorbO(dr,dv);}function du(dv){return cr.Return(dv);}return cr.Bind(ds,function(dv){return du(dt(dv));});};m.absorbR=function(dr){var ds;function dt(du){return cr.Return(du);}return cr.Bind(dr,(ds=function(du){return j.bindP(a.id,du);},function(du){return dt(ds(du));}));};m.insertR=function(dr){return dr.$==0?m.map(function(ds){return{$:0,$0:ds};},dr.$0):m.rtn(c.Error$1(dr.$0));};m.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:m.map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?m.rtn(null):ds.$0;};m.sequenceSeq=function(dr){return m.traverseSeq(a.id,dr);};m.traverseSeq=function(dr,ds){return m.map(a.id,cs.foldBack(function(dt,du){return m.op_GreaterGreaterEquals(dr(dt),function(dv){return m.op_GreaterGreaterEquals(du,function(dw){return m.rtn(new ct.T({$:1,$0:dv,$1:dw}));});});},cs.ofSeq(ds),m.rtn(ct.T.Empty)));};m.op_GreaterGreaterEquals=function(dr,ds){return m.bind(ds,dr);};m.whileLoop=function(dr,ds){return dr()?m.bind(function(){return m.whileLoop(dr,ds);},ds()):m.rtn();};m.mapP=function(dr,ds){return m.bindP(function(dt){return m.rtn(dr(dt));},ds);};m.map=function(dr,ds){return m.bind(function(dt){return m.rtn(dr(dt));},ds);};m.bindP=function(dr,ds){var dt;dt=null;return cr.Delay(function(){return cr.TryWith(cr.Delay(function(){return cr.Bind(ds,function(du){return du.$==1?cr.Return(c.Error$1(du.$0)):dr(du.$0);});}),function(du){return cr.Return(c.Error$1(new d({$:3,$0:du.message,$1:du.stack})));});});};m.bind=function(dr,ds){var dt;dt=null;return cr.Delay(function(){return cr.Bind(ds,function(du){var dv,dw;return du.$==1?(dv=du.$0,(dw=null,cr.Delay(function(){return cr.Return(c.Error$1(dv));}))):dr(du.$0);});});};m.iterA=function(dr,ds,dt){function du(dw){j.iter(dr,ds,dw);}function dv(dw){return cr.Return(dw);}cr.Start(cr.Bind(dt,function(dw){return dv(du(dw));}),null);};m.iterS=function(dr,ds,dt){throw"iterS cannot be used in JavaScript!";};m.rtnR=function(dr){return cr.Return(dr);};m.rtn=function(dr){return cr.Return({$:0,$0:dr});};n=e.AsyncResultBuilder=co.Class({For:function(dr,ds){var dt;dt=this;return this.Using(cu.Get(dr),function(du){return dt.While(function(){return du.MoveNext();},dt.Delay(function(){return ds(du.Current());}));});},While:function(dr,ds){return m.whileLoop(dr,ds);},Using:function(dr,ds){return cr.Using(dr,ds);},TryFinally:function(dr,ds){var dt;dt=null;return cr.Delay(function(){try{return dr();}finally{ds();}});},TryWith:function(dr,ds){var dt;dt=null;return cr.Delay(function(){try{return dr();}catch(du){return ds(du);}});},Run:function(dr){return dr();},Delay:a.id,Combine:function(dr,ds){return m.bind(ds,m.rtnR(dr));},Combine$1:function(dr,ds){return m.bind(ds,dr);},Bind:function(dr,ds){return m.bind(ds,m.rtnR(dr));},Bind$1:function(dr,ds){return m.bind(ds,dr);},Zero:function(){return m.rtn();},Return:function(dr){return m.rtn(dr);},ReturnFrom:function(dr){return m.rtnR(dr);},ReturnFrom$1:a.id},i,n);n.New=co.Ctor(function(){i.New.call(this);},n);o=e.AsyncResultBuilderP=co.Class({For:function(dr,ds){var dt;dt=this;return this.Using(cu.Get(dr),function(du){return dt.While(function(){return du.MoveNext();},dt.Delay(function(){return ds(du.Current());}));});},While:function(dr,ds){return m.whileLoop(dr,ds);},Using:function(dr,ds){return cr.Using(dr,ds);},TryFinally:function(dr,ds){var dt;dt=null;return cr.Delay(function(){try{return dr();}finally{ds();}});},TryWith:function(dr,ds){var dt;dt=null;return cr.Delay(function(){try{return dr();}catch(du){return ds(du);}});},Run:function(dr){return m.bindP(dr,m.rtn());},Delay:a.id,Combine:function(dr,ds){return m.bindP(ds,m.rtnR(dr));},Combine$1:function(dr,ds){return m.bindP(ds,dr);},Bind:function(dr,ds){return m.bindP(ds,m.rtnR(dr));},Bind$1:function(dr,ds){return m.bindP(ds,dr);},Zero:function(){return m.rtn();},Return:function(dr){return m.rtn(dr);},ReturnFrom:function(dr){return m.rtnR(dr);},ReturnFrom$1:a.id},i,o);o.New=co.Ctor(function(){i.New.call(this);},o);p["AsyncResultBuilderP.Combine"]=function(dr,ds,dt){function du(dw){return{$:0,$0:dw};}function dv(dw){return cr.Return(dw);}return m.bindP(dt,cr.Bind(ds,function(dw){return dv(du(dw));}));};p["AsyncResultBuilderP.Bind"]=function(dr,ds,dt){function du(dw){return{$:0,$0:dw};}function dv(dw){return cr.Return(dw);}return m.bindP(dt,cr.Bind(ds,function(dw){return dv(du(dw));}));};p["AsyncResultBuilderP.ReturnFrom"]=function(dr,ds){function dt(dv){return{$:0,$0:dv};}function du(dv){return cr.Return(dv);}return cr.Bind(ds,function(dv){return du(dt(dv));});};p["AsyncResultBuilder.Combine"]=function(dr,ds,dt){function du(dw){return{$:0,$0:dw};}function dv(dw){return cr.Return(dw);}return m.bind(dt,cr.Bind(ds,function(dw){return dv(du(dw));}));};p["AsyncResultBuilder.Bind"]=function(dr,ds,dt){function du(dw){return{$:0,$0:dw};}function dv(dw){return cr.Return(dw);}return m.bind(dt,cr.Bind(ds,function(dw){return dv(du(dw));}));};p["AsyncResultBuilder.ReturnFrom"]=function(dr,ds){function dt(dv){return{$:0,$0:dv};}function du(dv){return cr.Return(dv);}return cr.Bind(ds,function(dv){return du(dt(dv));});};s=r.Builder=co.Class({For:function(dr,ds){var dt;dt=this;return this.Using(cu.Get(dr),function(du){return dt.While(function(){return du.MoveNext();},dt.Delay(function(){return ds(du.Current());}));});},Using:function(dr,ds){return r.wrap(function(dt){try{return r.run(dt,ds(dr));}finally{dr.Dispose();}});},TryFinally:function(dr,ds){return r.wrap(function(dt){try{return r.run(dt,dr());}finally{ds();}});},TryWith:function(dr,ds){return r.wrap(function(dt){try{return r.run(dt,dr());}catch(du){return ds(du);}});},While:function(dr,ds){function dt(du,dv){return du()?r.bind(function(){return dt(du,dv);},dv()):r.rtn();}return dt(dr,ds);},Run:function(dr){return r.delayRun(dr);},Combine:function(dr,ds){return r.bind(ds,dr);},Delay:a.id,Zero:function(){return r.rtn();},Bind:function(dr,ds){return r.bind(ds,dr);},ReturnFrom:a.id,Return:function(dr){return r.rtn(dr);}},i,s);s.New=co.Ctor(function(){i.New.call(this);},s);t.reader=function(){ch.$cctor();return ch.reader$1;};t.rtn=function(dr){return r.rtn(dr);};t.op_GreaterEqualsGreater=function(dr,ds,dt){return t.op_GreaterGreaterEquals(dr(dt),ds);};t.op_RightShift=function(dr,ds,dt){return t.op_BarGreaterGreater(dr(dt),ds);};t.op_GreaterGreaterEquals=function(dr,ds){return r.bind(ds,dr);};t.op_BarGreaterGreater=function(dr,ds){return r.map(ds,dr);};t.op_LessMultiplyGreater=function(dr,ds){return r.apply(dr,ds);};r.reader=function(){ch.$cctor();return ch.reader;};r.memoizeRm=function(dr,ds,dt){return r.wrap(function(du){var dv,dw,dx;dv=dr(du);dw=dv[0](dt);return dw==null?(dx=(r.getFun(ds(dt)))(du),(dv[1](dt))(dx)):dw.$0;});};r.iter=function(dr,ds){function dt(du){return r.run(ds,du);}return function(du){return dr(dt(du));};};r.absorbO=function(dr,ds){return r.absorbR(r.map(function(dt){return j.ofOption(dr,dt);},ds));};r.absorbR=function(dr){return r.map(j.get,dr);};r.insertSnd=function(dr,ds){return r.map(function(dt){return[dt,ds];},dr);};r.insertFst=function(dr,ds){return r.map(function(dt){return[dr,dt];},ds);};r.insertR=function(dr){return dr.$==0?r.map(function(ds){return{$:0,$0:ds};},dr.$0):r.rtn(c.Error$1(dr.$0));};r.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:r.map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?r.rtn(null):ds.$0;};r.sequenceSeq=function(dr){return r.traverseSeq(a.id,dr);};r.traverseSeq=function(dr,ds){return r.map(a.id,cs.foldBack(function(dt,du){return r.op_GreaterGreaterEquals(dr(dt),function(dv){return r.op_GreaterGreaterEquals(du,function(dw){return r.rtn(new ct.T({$:1,$0:dv,$1:dw}));});});},cs.ofSeq(ds),r.rtn(ct.T.Empty)));};r.op_GreaterGreaterEquals=function(dr,ds){return r.bind(ds,dr);};r.run=function(dr,ds){return(r.getFun(ds))(dr);};r.apply=function(dr,ds){return r.bind(function(dt){return r.map(dt,ds);},dr);};r.map=function(dr,ds){return r.bind(function(dt){return r.rtn(dr(dt));},ds);};r.delayRun=function(dr){return r.wrap(function(ds){return(r.getFun(dr()))(ds);});};r.bind=function(dr,ds){return r.wrap(function(dt){return(r.getFun(dr((r.getFun(ds))(dt))))(dt);});};r.rtn=function(dr){return r.wrap(function(){return dr;});};r.ofFun=function(dr){return r.wrap(dr);};r.getFun=function(dr){return dr.$0;};r.wrap=function(dr){return{$:0,$0:dr};};v=u.Builder=co.Class({For:function(dr,ds){var dt;dt=this;return this.Using(cu.Get(dr),function(du){return dt.While(function(){return du.MoveNext();},dt.Delay(function(){return ds(du.Current());}));});},Using:function(dr,ds){return u.wrap(function(dt){try{return u.run(dt,ds(dr));}finally{dr.Dispose();}});},TryFinally:function(dr,ds){return u.wrap(function(dt){try{return u.run(dt,dr());}finally{ds();}});},TryWith:function(dr,ds){return u.wrap(function(dt){try{return u.run(dt,dr());}catch(du){return ds(du);}});},While:function(dr,ds){function dt(du,dv){return du()?u.bind(function(){return dt(du,dv);},dv()):u.rtn();}return dt(dr,ds);},Run:function(dr){return u.delayRun(dr);},Combine:function(dr,ds){return u.bind(ds,dr);},Delay:a.id,Zero:function(){return u.rtn();},Bind:function(dr,ds){return u.bind(ds,dr);},ReturnFrom:function(dr){return u.rtnR(dr);},ReturnFrom$1:a.id,Return:function(dr){return u.rtn(dr);}},i,v);v.New=co.Ctor(function(){i.New.call(this);},v);w.reader=function(){ch.$cctor();return ch.reader$3;};w.rtn=function(dr){return u.rtn(dr);};w.op_GreaterEqualsGreater=function(dr,ds,dt){return w.op_GreaterGreaterEquals(dr(dt),ds);};w.op_RightShift=function(dr,ds,dt){return w.op_BarGreaterGreater(dr(dt),ds);};w.op_GreaterGreaterEquals=function(dr,ds){return u.bind(ds,dr);};w.op_BarGreaterGreater=function(dr,ds){return u.map(ds,dr);};w.op_LessMultiplyGreater=function(dr,ds){return u.apply(dr,ds);};u.reader=function(){ch.$cctor();return ch.reader$2;};u.memoizeRm=function(dr,ds,dt){return u.wrap(function(du){var dv,dw,dx,dy;dv=dr(du);return u.run(du,(dw=(dx=dv[0](dt),dx==null?null:{$:1,$0:u.rtn(dx.$0)}),dw==null?(dy=ds(dt),u.map(dv[1](dt),dy)):dw.$0));});};u.iter=function(dr,ds,dt,du){j.iter(dr,ds,u.run(dt,du));};u.absorbO=function(dr,ds){return u.absorbR(u.map(function(dt){return j.ofOption(dr,dt);},ds));};u.absorbR=function(dr){return u.bind(u.rtnR,dr);};u.insertSnd=function(dr,ds){return u.map(function(dt){return[dt,ds];},dr);};u.insertFst=function(dr,ds){return u.map(function(dt){return[dr,dt];},ds);};u.insertR=function(dr){return dr.$==0?u.map(function(ds){return{$:0,$0:ds};},dr.$0):u.rtn(c.Error$1(dr.$0));};u.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:u.map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?u.rtn(null):ds.$0;};u.sequenceSeq=function(dr){return u.traverseSeq(a.id,dr);};u.traverseSeq=function(dr,ds){return u.map(a.id,cs.foldBack(function(dt,du){return u.op_GreaterGreaterEquals(dr(dt),function(dv){return u.op_GreaterGreaterEquals(du,function(dw){return u.rtn(new ct.T({$:1,$0:dv,$1:dw}));});});},cs.ofSeq(ds),u.rtn(ct.T.Empty)));};u.op_GreaterGreaterEquals=function(dr,ds){return u.bind(ds,dr);};u.run=function(dr,ds){return(u.getFun(ds))(dr);};u.getResult2=function(dr){return u.map(function(ds){return{$:0,$0:ds};},dr);};u.getResult=function(dr){return{$:0,$0:function(ds){return{$:0,$0:(u.getFun(dr))(ds)};}};};u.apply=function(dr,ds){return u.bind(function(dt){return u.map(dt,ds);},dr);};u.map=function(dr,ds){return u.bind(function(dt){return u.rtn(dr(dt));},ds);};u.delayRun=function(dr){return u.wrap(function(ds){return(u.getFun(dr()))(ds);});};u.bindR=function(dr,ds){return u.bind(dr,u.rtnR(ds));};u.bind=function(dr,ds){return u.wrap(function(dt){return cv.Bind(function(du){return(u.getFun(dr(du)))(dt);},(u.getFun(ds))(dt));});};u.rtnR=function(dr){return u.wrap(function(){return dr;});};u.rtn=function(dr){return u.wrap(function(){return j.rtn(dr);});};u.ofFun=function(dr){return u.wrap(function(ds){return j.rtn(dr(ds));});};u.getFun=function(dr){return dr.$0;};u.wrap=function(dr){return{$:0,$0:dr};};y=x.Builder=co.Class({For:function(dr,ds){var dt;dt=this;return this.Using(cu.Get(dr),function(du){return dt.While(function(){return du.MoveNext();},dt.Delay(function(){return ds(du.Current());}));});},Using:function(dr,ds){return x.wrap(function(dt){function du(dv){return x.run(dt,dv);}return cr.Using(dr,function(dv){return du(ds(dv));});});},TryFinally:function(dr,ds){return x.wrap(function(dt){return cr.TryFinally(x.run(dt,dr()),ds);});},TryWith:function(dr,ds){return x.wrap(function(dt){return cr.TryWith(x.run(dt,dr()),ds);});},While:function(dr,ds){function dt(du,dv){return du()?x.bind(function(){return dt(du,dv);},dv()):x.rtn();}return dt(dr,ds);},Run:function(dr){return x.delayRun(dr);},Combine:function(dr,ds){return x.bind(ds,dr);},Delay:a.id,Zero:function(){return x.rtn();},Bind:function(dr,ds){return x.bindRmr(ds,dr);},Bind$1:function(dr,ds){return x.bindRA(ds,dr);},Bind$2:function(dr,ds){return x.bindA(ds,dr);},Bind$3:function(dr,ds){return x.bindR(ds,dr);},Bind$4:function(dr,ds){return x.bind(ds,dr);},ReturnFrom:function(dr){return x.rtnRmr(dr);},ReturnFrom$1:function(dr){return x.rtnRA(dr);},ReturnFrom$2:function(dr){return x.rtnA(dr);},ReturnFrom$3:function(dr){return x.rtnR(dr);},ReturnFrom$4:a.id,Return:function(dr){return x.rtn(dr);}},i,y);y.New=co.Ctor(function(){i.New.call(this);},y);z.reader=function(){ch.$cctor();return ch.reader$5;};z.rtn=function(dr){return x.rtn(dr);};z.op_GreaterEqualsGreater=function(dr,ds,dt){return z.op_GreaterGreaterEquals(dr(dt),ds);};z.op_RightShift=function(dr,ds,dt){return z.op_BarGreaterGreater(dr(dt),ds);};z.op_GreaterGreaterEquals=function(dr,ds){return x.bind(ds,dr);};z.op_BarGreaterGreater=function(dr,ds){return x.map(ds,dr);};z.op_LessMultiplyGreater=function(dr,ds){return x.apply(dr,ds);};x.reader=function(){ch.$cctor();return ch.reader$4;};x.memoizeRm=function(dr,ds,dt){return x.wrap(function(du){var dv,dw,dx;dv=dr(du);dw=dv[0](dt);return dw==null?(dx=(x.getFun(ds(dt)))(du),(dv[1](dt))(dx)):dw.$0;});};x.iterS=function(dr,ds,dt){function du(dw){return x.run(dt,dw);}function dv(dw){m.iterS(dr,ds,dw);}return function(dw){return dv(du(dw));};};x.iterA=function(dr,ds,dt){function du(dw){return x.run(dt,dw);}function dv(dw){m.iterA(dr,ds,dw);}return function(dw){return dv(du(dw));};};x.absorbO=function(dr,ds){return x.absorbR(x.map(function(dt){return j.ofOption(dr,dt);},ds));};x.absorbR=function(dr){return x.bind(x.rtnR,dr);};x.insertSnd=function(dr,ds){return x.map(function(dt){return[dt,ds];},dr);};x.insertFst=function(dr,ds){return x.map(function(dt){return[dr,dt];},ds);};x.insertR=function(dr){return dr.$==0?x.map(function(ds){return{$:0,$0:ds};},dr.$0):x.rtn(c.Error$1(dr.$0));};x.insertO=function(dr){var ds;ds=dr==null?null:{$:1,$0:x.map(function(dt){return{$:1,$0:dt};},dr.$0)};return ds==null?x.rtn(null):ds.$0;};x.sequenceSeq=function(dr){return x.traverseSeq(a.id,dr);};x.traverseSeq=function(dr,ds){return x.map(a.id,cs.foldBack(function(dt,du){return x.op_GreaterGreaterEquals(dr(dt),function(dv){return x.op_GreaterGreaterEquals(du,function(dw){return x.rtn(new ct.T({$:1,$0:dv,$1:dw}));});});},cs.ofSeq(ds),x.rtn(ct.T.Empty)));};x.op_GreaterGreaterEquals=function(dr,ds){return x.bind(ds,dr);};x.run=function(dr,ds){return(x.getFun(ds))(dr);};x.getAsyncResult=function(dr){return{$:0,$0:function(ds){return m.mapP(m.rtn,(x.getFun(dr))(ds));}};};x.getAsync=function(dr){return{$:0,$0:function(ds){return m.mapP(function(dt){return cr.Return(dt);},(x.getFun(dr))(ds));}};};x.getResult=function(dr){return{$:0,$0:function(ds){function dt(dv){return{$:0,$0:dv};}function du(dv){return cr.Return(dv);}return cr.Bind((x.getFun(dr))(ds),function(dv){return du(dt(dv));});}};};x.apply=function(dr,ds){return x.bind(function(dt){return x.map(dt,ds);},dr);};x.map=function(dr,ds){return x.bind(function(dt){return x.rtn(dr(dt));},ds);};x.delayRun=function(dr){return x.wrap(function(ds){return(x.getFun(dr()))(ds);});};x.bindRmr=function(dr,ds){return x.bind(dr,x.rtnRmr(ds));};x.bindRA=function(dr,ds){return x.bind(dr,x.rtnRA(ds));};x.bindA=function(dr,ds){return x.bind(dr,x.rtnA(ds));};x.bindR=function(dr,ds){return x.bind(dr,x.rtnR(ds));};x.bind=function(dr,ds){return x.wrap(function(dt){return m.bindP(function(du){return(x.getFun(dr(du)))(dt);},(x.getFun(ds))(dt));});};x.rtnRmr=function(dr){return x.wrap(function(ds){return cr.Return((u.getFun(dr))(ds));});};x.rtnRA=function(dr){return x.wrap(function(){return dr;});};x.rtnA=function(dr){return x.wrap(function(){function ds(du){return{$:0,$0:du};}function dt(du){return cr.Return(du);}return cr.Bind(dr,function(du){return dt(ds(du));});});};x.rtnR=function(dr){return x.wrap(function(){return cr.Return(dr);});};x.rtn=function(dr){return x.wrap(function(){return m.rtn(dr);});};x.ofFun=function(dr){return x.wrap(function(ds){return m.rtn(dr(ds));});};x.getFun=function(dr){return dr.$0;};x.wrap=function(dr){return{$:0,$0:dr};};e.asyncResultP=function(){ch.$cctor();return ch.asyncResultP;};e.asyncResult=function(){ch.$cctor();return ch.asyncResult;};A.EndsWith$1=function(dr,ds){return cx.EndsWith(ds,dr)?{$:1,$0:cy.string(ds,{$:1,$0:0},{$:1,$0:ds.length-dr.length-1})}:null;};A.StartsWith$1=function(dr,ds){return cx.StartsWith(ds,dr)?{$:1,$0:cy.string(ds,{$:1,$0:dr.length},null)}:null;};A.skipLastLine$1=function(){ch.$cctor();return ch.skipLastLine;};A.indentStr$1=function(dr){function ds(du){return A.indent$1(dr,du);}function dt(du){return cx.concat("\n",du);}return function(du){return dt(ds(du));};};A.unindentStr$1=function(){ch.$cctor();return ch.unindentStr;};A.indent$1=function(dr,ds){var dt,du;dt=cx.SplitChars(ds,["\n"],0);return cq.map((du=cx.replicate(dr," "),function(dv){return du+dv;}),dt);};A.unindent$1=function(dr){var ds,dt,du,dv;ds=cx.SplitChars(dr,["\n"],0);dt=(du=cq.tryFindIndex(function(dw){return" "!==dw;},(dv=cq.tryFind(function(dw){return cx.Trim(dw)!=="";},ds),dv==null?"":dv.$0)),du==null?0:du.$0);return cq.filter(function(dw){return!cx.StartsWith(dw,"# 1 ");},cq.map(function(dw){return dw.length<=dt?"":dw.substring(dt);},ds));};A.skipFirstLine$1=function(dr){var ds;ds=dr.indexOf("\n");return ds<0?"":cy.string(dr,{$:1,$0:ds+1},null);};A.append$1=function(dr,ds){return dr+ds;};A.trim$1=function(dr){return cx.Trim(dr);};A.contains$1=function(dr,ds){return ds.indexOf(dr)!=-1;};A.delimitedO$1=function(dr,ds,dt){var du,dv,dw,dx,dy;du=A.splitInTwoO$1(dr,dt);return du==null?null:(dv=du.$0,(dw=dv[0],(dx=A.splitInTwoO$1(ds,dv[1]),dx==null?null:{$:1,$0:(dy=dx.$0,[dw,dy[0],dy[1]])})));};A.splitInTwoO$1=function(dr,ds){var dt;dt=ds.indexOf(dr);return dt===-1?null:{$:1,$0:[c["String.Left$1"](ds,dt),ds.substring(dt+dr.length)]};};A.splitByChar$1=function(dr,ds){return cx.SplitChars(ds,[dr],0);};B.Guid$1=function(){ch.$cctor();return ch["|Guid|_|"];};B.Double$1=function(){ch.$cctor();return ch["|Double|_|"];};B.Single$1=function(){ch.$cctor();return ch["|Single|_|"];};B.Int$1=function(){ch.$cctor();return ch["|Int|_|"];};B.Date$1=function(){ch.$cctor();return ch["|Date|_|"];};B.parseGuidO$1=function(){ch.$cctor();return ch.parseGuidO;};B.parseDoubleO$1=function(){ch.$cctor();return ch.parseDoubleO;};B.parseSingleO$1=function(){ch.$cctor();return ch.parseSingleO;};B.parseIntO$1=function(){ch.$cctor();return ch.parseIntO;};B.parseDateO$1=function(){ch.$cctor();return ch.parseDateO;};B.tryParseWith$1=function(dr){function ds(dt,du){return dt?{$:1,$0:du}:null;}return function(dt){return ds.apply(null,dr(dt));};};C.PostAndAsyncReply=function(dr,ds,dt){return dr.PostAndAsyncReply(function(du){return[du,ds];},dt);};E.applyReply=function(dr,ds){return E.applyReplyA(function(dt){var du;du=null;return cr.Delay(function(){return cr.Return(dr(dt));});},ds);};E.applyReplyA=function(dr,ds){return ds.PostAndAsyncReply(function(dt){return function(du){var dv;dv=null;return cr.Delay(function(){return cr.Bind(dr(du),function(dw){dt(dw[1]);return cr.Return(dw[0]);});});};},null);};E.apply=function(dr,ds){E.applyA(function(dt){var du;du=null;return cr.Delay(function(){return cr.Return(dr(dt));});},ds);};E.applyA=function(dr,ds){ds.mailbox.AddLast(function(dt){var du;du=null;return cr.Delay(function(){return dr(dt);});});ds.resume();};E.setState=function(dr,ds){ds.mailbox.AddLast(function(){var dt;dt=null;return cr.Delay(function(){return cr.Return(dr);});});ds.resume();};E.getStateA=function(dr){return dr.PostAndAsyncReply(function(ds){return function(dt){var du;du=null;return cr.Delay(function(){ds(dt);return cr.Return(dt);});};},null);};D.defHandler=function(dr,ds){c.print(dr);return ds;};D.stateFull=function(dr,ds){return cA.Start(function(dt){function du(dv){var dw;dw=null;return cr.Delay(function(){return cr.TryWith(cr.Delay(function(){return cr.Bind(dt.Receive(null),function(dx){return cr.Bind(dx(dv),function(dy){return du(dy);});});}),function(dx){return du(dr(dx,dv));});});}return du(ds);},null);};D.fold=function(dr,ds,dt){return D.foldA(dr,function(du,dv){var dw;dw=null;return cr.Delay(function(){return cr.Return(ds(du,dv));});},dt);};D.foldA=function(dr,ds,dt){return cA.Start(function(du){function dv(dw){var dx;dx=null;return cr.Delay(function(){return cr.TryWith(cr.Delay(function(){return cr.Bind(du.Receive(null),function(dy){return cr.Bind(ds(dw,dy),function(dz){return dv(dz);});});}),function(dy){return dv(dr(dy,dw));});});}return dv(dt);},null);};D.call=function(dr,ds){return D.callA(dr,function(dt){var du;du=null;return cr.Delay(function(){return cr.Return(ds(dt));});});};D.callA=function(dr,ds){return D.iterA(dr,function(dt){var du,dv,dw;du=dt[0];dv=dt[1];dw=null;return cr.Delay(function(){return cr.Bind(ds(dv),function(dx){du(dx);return cr.Zero();});});});};D.iter=function(dr,ds){return D.iterA(dr,function(dt){var du;du=null;return cr.Delay(function(){ds(dt);return cr.Zero();});});};D.iterA=function(dr,ds){return cA.Start(function(dt){var du;du=null;return cr.Delay(function(){return cr.While(function(){return true;},cr.Delay(function(){return cr.TryWith(cr.Delay(function(){return cr.Bind(dt.Receive(null),function(dv){return cr.Bind(ds(dv),function(){return cr.Return(null);});});}),function(dv){dr(dv);return cr.Zero();});}));});},null);};F.New=function(dr,ds,dt,du){return{useCount:dr,limitCount:ds,resource:dt,configuration:du};};G=c.ResourceAgent=co.Class({increment:function(dr){var ds,dt;ds=this;return(this.respawnRightAfter?(dt=dr.configuration,function(du){return ds.check(dt,du);}):a.id)(F.New(dr.useCount+1,dr.limitCount,dr.resource,dr.configuration));},check:function(dr,ds){return ds.useCount<ds.limitCount&&this.alive(ds.resource)&&cB.Equals(dr,ds.configuration)?ds:this.respawn(F.New(ds.useCount,ds.limitCount,ds.resource,dr));},respawn:function(dr){this.clean(dr.resource);return F.New(0,dr.limitCount,this.ctor(dr.configuration),dr.configuration);},Respawn:function(){var dr;dr=this;E.apply(function(ds){return dr.respawn(ds);},this.agent);},set_Configuration:function(dr){var ds;ds=this;!cB.Equals(dr,this.get_Configuration())?E.apply(function(dt){return ds.respawn(F.New(dt.useCount,dt.limitCount,dt.resource,dr));},this.agent):void 0;},set_LimitCount:function(dr){E.apply(function(ds){return F.New(ds.useCount,dr,ds.resource,ds.configuration);},this.agent);},get_Configuration:function(){return this.get_State().configuration;},get_LimitCount:function(){return this.get_State().limitCount;},get_State:function(){throw"getState not available in JavaScript";},AsyncProcessA:function(dr,ds){var dt;dt=this;return E.applyReplyA(function(du){var dv;dv=null;return cr.Delay(function(){var dw;dw=dt.check(ds==null?du.configuration:ds.$0,du);return cr.Bind(dr(dw.resource),function(dx){return cr.Return([dt.increment(dw),dx]);});});},this.agent);},ProcessA:function(dr,ds){return this.AsyncProcessA(function(dt){var du;du=null;return cr.Delay(function(){return cr.Return(dr(dt));});},ds);},Dispose:function(){try{this.clean(this.get_State().resource);}catch(dr){null;}}},i,G);G.New=co.Ctor(function(dr,ds,dt,du,dv,dw){var dx;dx=this;i.New.call(this);this.ctor=ds;this.clean=du==null?a.ignore:du.$0;this.alive=dv==null?function(){return true;}:dv.$0;this.respawnRightAfter=dw==null||dw.$0;this.agent=D.stateFull(function(dy,dz){c.print(dy);return dx.respawn(dz);},F.New(0,dr,this.ctor(dt),dt));},G);H.runSameConfig=function(dr,ds){return x.run([dr,dr.get_Configuration()],ds);};H.run=function(dr,ds,dt){return x.run([dr,ds],dt);};H.fromResourceRm=function(dr){return x.wrap(function(ds){return ds[0].AsyncProcessA(x.getFun(dr),{$:1,$0:ds[1]});});};H.createAgentRm=function(dr,ds){return x.ofFun(function(dt){return dt[0].AsyncProcessA(function(du){return dr(du,ds);},{$:1,$0:dt[1]});});};J.New=function(dr,ds,dt,du){return{cargId:dr,name:ds,unique:dt,build:du};};K=I.CommArgCollection=co.Class({get_CommArgs:function(){return this.$0;}},null,K);K.op_Addition=function(dr,ds){return K.addPairs(ds.$0,dr);};K.op_Addition$1=function(dr,ds){return K.addPair(ds[0],ds[1],dr);};K.op_Addition$2=function(dr,ds){return K.addPairs(ds,dr);};L=I.TypedCommArg=co.Class({get_CommArg:function(){return this.$0;}},null,L);L.op_DivisionAssignment=function(dr,ds){return[dr.$0,u.map(a.id,u.ofFun(ds))];};L.op_DivisionAssignment$1=function(dr,ds){return[dr.$0,u.map(a.id,ds)];};L.op_DivisionAssignment$2=function(dr,ds){return[dr.$0,u.map(a.id,u.rtn(ds))];};M.getFloatR=function(dr,ds){return dr.$0.build.$==3?{$:0,$0:ds}:c.Error$1(new d({$:0,$0:"expecting TFloat"}));};M.getBoolR=function(dr,ds){return dr.$0.build.$==2?{$:0,$0:ds}:c.Error$1(new d({$:0,$0:"expecting TBool"}));};M.getStringR=function(dr,ds){return dr.$0.build.$==1?{$:0,$0:ds}:c.Error$1(new d({$:0,$0:"expecting TString"}));};M.getIntR=function(dr,ds){return dr.$0.build.$==0?{$:0,$0:ds}:c.Error$1(new d({$:0,$0:"expecting TInt"}));};M.argumentTRm=function(dr,ds){return M.argumentRm(dr,ds);};M.argumentRm=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){return dt.Bind(ds,function(du){var dv;return dt.Return((dv=dr.build,dv.$==1?dv.$0(du):dv.$==2?dv.$0(du):dv.$==3?dv.$0(du):dv.$0(du)));});}));};M.NewFloat=function(dr,ds,dt){return new L({$:0,$0:M.New0(dr,ds,{$:3,$0:dt})});};M.NewBool=function(dr,ds,dt){return new L({$:0,$0:M.New0(dr,ds,{$:2,$0:dt})});};M.NewString=function(dr,ds,dt){return new L({$:0,$0:M.New0(dr,ds,{$:1,$0:dt})});};M.NewInt=function(dr,ds,dt){return new L({$:0,$0:M.New0(dr,ds,{$:0,$0:dt})});};M.New0=function(dr,ds,dt){return J.New({$:0,$0:cD.NewGuid()},dr,ds,dt);};K.addPairs=function(dr,ds){return K.append(ds,new K({$:0,$0:dr}));};K.append=function(dr,ds){var dt,du;function dv(dw,dx){return function(dy){return K.addPair(dw,dx,dy);};}dt=(du=function(dw){return dv.apply(null,a.id(dw));},function(dw){return function(dx){return(du(dx))(dw);};});return cq.fold(function(dw,dx){return(dt(dw))(dx);},dr,ds.get_CommArgs());};K.addPair=function(dr,ds,dt){function du(dv,dw){return!cB.Equals(dv.cargId,dr.cargId);}return new K({$:0,$0:cs.ofSeq(cq.append((dr.unique?function(dv){return cq.filter(function(dw){return du(dw[0],dw[1]);},dv);}:a.id)(dt.$0),ct.ofArray([[dr,ds]])))});};K.getBoolRm=function(dr,ds){return w.op_BarGreaterGreater(K.tryGetBoolORm(ds),function(dt){return dt==null?dr:dt.$0;});};K.getFloatRm=function(dr){return u.absorbO(function(){return K.argumentNotFound(dr,void 0);},K.tryGetFloatORm(dr));};K.getStringRm=function(dr){return u.absorbO(function(){return K.argumentNotFound(dr,void 0);},K.tryGetStringORm(dr));};K.getIntRm=function(dr){return u.absorbO(function(){return K.argumentNotFound(dr,void 0);},K.tryGetIntORm(dr));};K.findArgRm=function(dr){return u.absorbO(function(){return K.argumentNotFound(dr,void 0);},K.tryFindArgORm(dr));};K.tryGetFloatORm=function(dr){function ds(dt,du){return M.getFloatR(dr,du);}return u.absorbR(w.op_BarGreaterGreater(w.op_BarGreaterGreater(K.tryFindArgORm(dr),function(dt){var du;return dt==null?null:{$:1,$0:(du=dt.$0,ds(du[0],du[1]))};}),j.insertO));};K.tryGetBoolORm=function(dr){function ds(dt,du){return M.getBoolR(dr,du);}return u.absorbR(w.op_BarGreaterGreater(w.op_BarGreaterGreater(K.tryFindArgORm(dr),function(dt){var du;return dt==null?null:{$:1,$0:(du=dt.$0,ds(du[0],du[1]))};}),j.insertO));};K.tryGetStringORm=function(dr){function ds(dt,du){return M.getStringR(dr,du);}return u.absorbR(w.op_BarGreaterGreater(w.op_BarGreaterGreater(K.tryFindArgORm(dr),function(dt){var du;return dt==null?null:{$:1,$0:(du=dt.$0,ds(du[0],du[1]))};}),j.insertO));};K.tryGetIntORm=function(dr){function ds(dt,du){return M.getIntR(dr,du);}return u.absorbR(w.op_BarGreaterGreater(w.op_BarGreaterGreater(K.tryFindArgORm(dr),function(dt){var du;return dt==null?null:{$:1,$0:(du=dt.$0,ds(du[0],du[1]))};}),j.insertO));};K.tryFindArgORm=function(dr){return u.bind(a.id,u.ofFun(function(ds){var dt,du;return u.insertO((dt=K.tryFindArgO(dr,ds),dt==null?null:{$:1,$0:(du=dt.$0,u.insertFst(du[0],du[1]))}));}));};K.tryFindArgO=function(dr,ds){var dt;dt=dr.$0;return cq.tryFind(function(du){return cB.Equals(du[0].cargId,dt.cargId);},ds.$0);};K.argumentNotFound=function(dr,ds){return new d({$:0,$0:(function(dt){return function(du){return dt("argument not found: "+cp.toSafe(du));};}(a.id))(dr.$0.name)});};K.containsAnyOfRm=function(dr){return u.ofFun(function(ds){function dt(du,dv){return dr.Contains(du.cargId);}return cq.exists(function(du){return dt(du[0],du[1]);},ds.$0);});};K.argumentsRm=function(dr){return w.op_GreaterGreaterEquals(K.filterRm(dr),function(ds){return u.traverseSeq(function(dt){return M.argumentTRm(dt[0],dt[1]);},ds);});};K.filterRm=function(dr){return u.ofFun(function(ds){return cq.filter(dr,ds.$0);});};K.existsRm=function(dr){return u.ofFun(function(ds){return cq.exists(dr,ds.$0);});};K.argsRm=function(){return u.ofFun(function(dr){return dr.$0;});};K.contains=function(dr,ds){function dt(du,dv){return du.cargId;}return cq.contains(dr.$0.cargId,cq.map(function(du){return dt(du[0],du[1]);},ds.$0));};K.trueForAll=function(dr){return true;};O.NoPrepo={$:12};O.PrepoEndIf={$:9};O.PrepoElse={$:8};N.getSourceDir=function(dr,ds){var dt,du,dv,dw,dx,dy,dz,dA,dB,dC;dt=cs.get(ds,0);du=cs.tryItem(1,ds);return(dw=A.StartsWith$1("////#cd @\"",dt),dw!=null&&dw.$==1?(dv=dw.$0,true):du!=null&&du.$==1&&(dx=A.StartsWith$1("////#cd @\"",du.$0),dx!=null&&dx.$==1&&(dv=dx.$0,true)))?(dy=cx.Trim(dv),(dA=A.EndsWith$1("\"",dy),dA!=null&&dA.$==1?dz=dA.$0:dz=dy,(dB=A.StartsWith$1("\\",dz),dB!=null&&dB.$==1)?dz:(dC=A.StartsWith$1("/",dz),dC!=null&&dC.$==1)?dz:cB.Equals(cq.tryItem(1,dz),{$:1,$0:":"})?dz:dr+"/"+dz)):dr;};N.separateDirectives=function(dr){var ds,dt,du,dv,dw;function dx(dH){return dH[1];}function dy(dH){return dH.$==1?{$:1,$0:dH.$0}:null;}function dz(dH){return dH[1];}function dA(dH){return dH.$==2?{$:1,$0:dH.$0}:null;}function dB(dH){return dH[1];}function dC(dH){return dH.$==6?{$:1,$0:dH.$0}:null;}function dD(dH){return dH[1];}function dE(dH){return dH.$==5?{$:1,$0:dH.$0}:null;}function dF(dH){return dH[1];}function dG(dH){return dH.$==0?{$:1,$0:dH.$0}:null;}ds=cs.ofSeq(cq.distinct(cq.choose(function(dH){return dy(dx(dH));},dr)));dt=cs.ofSeq(cq.distinct(cq.choose(function(dH){return dA(dz(dH));},dr)));du=cs.ofSeq(cq.distinct(cq.choose(function(dH){return dC(dB(dH));},dr)));dv=cs.ofSeq(cq.distinct(cq.choose(function(dH){return dE(dD(dH));},dr)));dw=cq.tryHead(cq.choose(function(dH){return dG(dF(dH));},dr));return[cs.ofSeq(cq.map(function(dH){return dH[0];},dr)),ds,dt,du,dv,dw];};N.separatePrepros=function(dr){function ds(dv){var dw;dw=cq.tryLast(cx.SplitStrings(cx.Trim(dv),["\""],1));return dw==null?dv:dw.$0;}function dt(dv){var dw;dw=cq.tryHead(cx.SplitStrings(cx.Trim(dv),["#define "],1));return dw==null?"":dw.$0;}function du(dv){return"//"+dv;}return cs.map(function(dv){var dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ;dw=true;return dw&&cx.StartsWith(dv,"#define")?[du(dv),{$:2,$0:dt(dv)}]:dw&&cx.StartsWith(dv,"#cd")?[du(dv),{$:0,$0:ds(dv)}]:dw&&cx.StartsWith(dv,"#r")?[du(dv),{$:1,$0:ds(dv)}]:dw&&cx.StartsWith(dv,"#load")?[du(dv),{$:3,$0:ds(dv)}]:dw&&cx.StartsWith(dv,"#nowarn")?[du(dv),{$:5,$0:ds(dv)}]:dw&&cx.StartsWith(cx.Trim(dv),"# ")?[du(dv),{$:4,$0:ds(dv)}]:dw&&cx.StartsWith(cx.Trim(dv),"#line")?[du(dv),{$:4,$0:ds(dv)}]:dw&&cx.StartsWith(dv,"#I")?[du(dv),{$:6,$0:ds(dv)}]:dw&&cx.StartsWith(dv,"#if")?[dv,{$:7,$0:dv}]:dw&&cx.StartsWith(dv,"#else")?[dv,O.PrepoElse]:dw&&cx.StartsWith(dv,"#endif")?[dv,O.PrepoEndIf]:dw&&cx.StartsWith(dv,"#light")?[dv,{$:10,$0:false}]:dw&&cx.StartsWith(dv,"#")?[du(dv),{$:11,$0:dv}]:[dv,O.NoPrepo];},dr);};N.extractDefines=function(dr){var ds;ds=dr.$0;return cx.StartsWith(ds,"////-d:")?cy.string(ds,{$:1,$0:4},{$:1,$0:ds.indexOf("\n")-1}):"";};P=c.SnippetId=co.Class({get_Id:function(){return this.$0;}},null,P);P.get_Empty=function(){return new P({$:0,$0:"00000000-0000-0000-0000-000000000000"});};Q.New=function(dr,ds,dt,du,dv,dw,dx){return{snpId:dr,snpName:ds,snpContent:dt,snpParentIdO:du,snpPredIds:dv,snpProperties:dw,snpGeneration:dx};};R.New=function(dr,ds,dt,du,dv,dw){return{generation:dr,ordered:ds,fetcher:dt,predecesorsCache:du,reducedCache:dv,prepCode:dw};};S.codeFsxRm=function(dr){return u.map(function(ds){return ds[0];},S.fastCodeRm({$:1,$0:dr},{$:1,$0:dr}));};S.fastCodeRm=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){return dt.Bind(S.fastReducedRm(dr,ds),function(du){return dt.Return(S.finishCode(du[0],du[1],du[2],du[3],du[4],du[5],du[6]));});}));};S.fastReducedRm=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){return dt.Bind(u.insertO(dr==null?null:{$:1,$0:S.snippetORm(dr.$0)}),function(du){return dt.Bind(u.insertO(ds==null?null:{$:1,$0:S.snippetORm(ds.$0)}),function(dv){var dw,dx,dy,dz;dw=du==null?null:du.$0;dx=dv==null?null:dv.$0;return(dx!=null&&dx.$==1?dw!=null&&dw.$==1?(dy=[dw.$0,dx.$0],false):true:true)?dt.ReturnFrom$1(S.reducedCodeRm([])):(dz=dy[0],dt.Bind(S.uniquePredsRm(dy[1]),function(dA){var dB;dB=new cF.New(dA);return dt.Bind((S.reducedOthersORmMemo())([true,dz.snpId,dB]),function(dC){return dt.Bind((S.reducedOthersORmMemo())([false,dz.snpId,dB]),function(dD){return dt.Bind(S.separateCodeRm(dz),function(dE){var dF,dG,dH,dI;dF=(dG=dC==null?null:{$:1,$0:(function(dJ){var dK,dL,dM,dN,dO,dP,dQ;dK=dJ[0];dL=dJ[1];dM=dJ[2];dN=dJ[3];dO=dJ[4];dP=dJ[5];dQ=dJ[6];return function(dR){return S.addSeps(dK,dL,dM,dN,dO,dP,dQ,dR[0],dR[1],dR[2],dR[3],dR[4],dR[5],dR[6]);};}(dC.$0))(dE)},dG==null?dE:dG.$0);return dt.Return((dH=dD==null?null:{$:1,$0:(dI=dD.$0,S.addSeps(dF[0],dF[1],dF[2],dF[3],dF[4],dF[5],dF[6],dI[0],dI[1],dI[2],dI[3],dI[4],dI[5],dI[6]))},dH==null?dF:dH.$0));});});});}));});});}));};S.reducedOthersORmMemo=function(){ch.$cctor();return ch.reducedOthersORmMemo;};S.reducedOthersORm=function(dr,ds,dt){var du;du=w.reader();return du.Run(du.Delay(function(){function dv(dw){return!cB.Equals(dw.snpId,ds)&&dt.Contains(dw.snpId);}return du.Bind(w.op_BarGreaterGreater(w.op_BarGreaterGreater(S.orderedRm(),(dr?function(dw){return function(dx){return cq.takeWhile(dw,dx);};}:function(dw){return function(dx){return cq.skipWhile(dw,dx);};})(function(dw){return!cB.Equals(dw.snpId,ds);})),function(dw){return cq.filter(dv,dw);}),function(dw){return cq.isEmpty(dw)?du.Return(null):du.Bind(S.reducedCodeRm(dw),function(dx){return du.Return({$:1,$0:dx});});});}));};S.finishCode=function(dr,ds,dt,du,dv,dw,dx){var dy,dz;dy=cx.concat(" ",cq.map(function(dA){return"-d:"+dA;},cq.sort(du)));dz=ct.ofSeq(cq.delay(function(){return cq.append(dy!==""?["////"+dy]:[],cq.delay(function(){return cq.append(dx!=null?[(function(dA){return function(dB){return dA("////#cd @\""+cp.toSafe(dB)+"\"");};}(a.id))(dx.$0)]:[],cq.delay(function(){return cq.append(cq.map(function(dA){return function(dB){return dA("#I @\""+cp.toSafe(dB)+"\"");};}(a.id),dv),cq.delay(function(){return cq.append(cq.map(function(dA){return function(dB){return dA("#r @\""+cp.toSafe(dB)+"\"");};}(a.id),dt),cq.delay(function(){return cq.map(function(dA){return function(dB){return dA("#nowarn \""+cp.toSafe(dB)+"\"");};}(a.id),dw);}));}));}));}));}));return[cx.concat("\n",cq.append(dz,ds)),cs.ofSeq((cq.mapFold(function(dA,dB){var dC;dC=dB[2];return[[[dB[0],dB[1]],[dB[3],dA,dA+dC]],dA+dC];},dz.get_Length(),dr))[0])];};S.reducedCodeRm=function(dr){var ds;ds=w.reader();return ds.Run(ds.Delay(function(){return ds.Bind(u.traverseSeq(S.separateCodeRm,dr),function(dt){var du;return ds.Return((du=cq.reduce(function(dv,dw){return(function(dx){var dy,dz,dA,dB,dC,dD,dE;dy=dx[0];dz=dx[1];dA=dx[2];dB=dx[3];dC=dx[4];dD=dx[5];dE=dx[6];return function(dF){return S.addSeps(dy,dz,dA,dB,dC,dD,dE,dF[0],dF[1],dF[2],dF[3],dF[4],dF[5],dF[6]);};}(dv))(dw);},cq.isEmpty(dt)?[[[],[],[],[],[],[],null]]:dt),[du[0],[cx.concat("\n",du[1])],du[2],du[3],du[4],du[5],du[6]]));});}));};S.addSeps=function(dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE){return[dr.concat(dy),ds.concat(dz),cs.ofSeq(cq.distinct(cq.append(dt,dA))),cs.ofSeq(cq.distinct(cq.append(du,dB))),cs.ofSeq(cq.distinct(cq.append(dv,dC))),cs.ofSeq(cq.distinct(cq.append(dw,dD))),dx==null?dE:dx];};S.separateCodeRm=function(dr){var ds;ds=w.reader();return ds.Run(ds.Delay(function(){return ds.Bind(S.indentRm(dr),function(dt){var du;function dv(dw,dx){return[cx.replicate(dt," ")+dw,dx];}du=(dt===0?[a.id,""]:[function(dw){return cs.map(function(dx){return dv(dx[0],dx[1]);},dw);},(function(dw){return function(dx){return dw("("+a.String(dx)+")");};}(a.id))(dt)])[0];return ds.Bind(S.prepareCodeRm(dr),function(dw){var dx,dy;dx=N.separateDirectives(du(N.separatePrepros(cx.SplitChars(dw,["\n"],0))));dy=dx[0];return ds.Return([[[dr.snpId,S.snippetName(dr.snpName,dr.snpContent),cs.length(dy),dt]],dy,dx[1],dx[2],dx[3],dx[4],dx[5]]);});});}));};S.ancestorsRm=function(dr){function ds(dt,du){var dv;dv=w.reader();return dv.Run(dv.Delay(function(){return dv.Bind(S.parentORm(dt),function(dw){var dx;return dw==null?dv.Return(du):(dx=dw.$0,dv.ReturnFrom$1(ds(dx,new ct.T({$:1,$0:dx,$1:du}))));});}));}return ds(dr,ct.T.Empty);};S.levelRm=function(dr){function ds(dt,du){var dv;dv=w.reader();return dv.Run(dv.Delay(function(){return dv.Bind(S.parentORm(dt),function(dw){return dw!=null&&dw.$==1?dv.ReturnFrom$1(ds(dw.$0,du+1)):dv.Return(du);});}));}return ds(dr,0);};S.indentRm=function(dr){function ds(dt){var du;du=w.reader();return du.Run(du.Delay(function(){var dv,dw,dx,dy;dv=(dw=S.propertyPairO("IndentChildren",dt),dw!=null&&dw.$==1?[(B.parseIntO$1())(dw.$0[0]),(B.parseIntO$1())(dw.$0[1])]:[null,null]);dx=dv[1];dy=dv[0];return du.Bind(S.parentORm(dt),function(dz){return dz==null?du.Return([0,[dy==null?4:dy.$0,dx==null?4:dx.$0]]):du.Bind(ds(dz.$0),function(dA){var dB,dC;dB=dA[1][1];dC=dA[1][0];return du.Return([dC,[dC+(dy==null?dB:dy.$0),dx==null?dB:dx.$0]]);});});}));}return u.map(function(dt){return dt[0];},ds(dr));};S.propertyHierORm=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){var du,dv;du=S.propertyO(dr,ds);return du==null?dt.Bind(S.parentORm(ds),function(dw){return dw==null?dt.Return(null):dt.Bind(S.propertyHierORm(dr,dw.$0),function(dx){var dy,dz;return dt.Return(dx==null?null:{$:1,$0:(dy=dx.$0,(dy[0],dz=dy[1],[dz,dz]))});});}):dt.Return({$:1,$0:(dv=cx.SplitStrings(du.$0,["|-|"],1),[cs.get(dv,0),cs.length(dv)>0?cs.get(dv,1):cs.get(dv,0)])});}));};S.modifiedRecRm=function(dr){var ds;ds=w.reader();return ds.Run(ds.Delay(function(){return ds.Bind(S.modifiedRm(dr),function(dt){return dt?ds.Return(true):ds.Bind(S.uniquePredsRm(dr),function(du){return ds.Bind(u.sequenceSeq(cq.map(S.snippetORm,du)),function(dv){return ds.Bind(u.sequenceSeq(cq.map(S.modifiedRm,cq.choose(a.id,dv))),function(dw){return ds.Return(cq.contains(true,dw));});});});});}));};S.uniquePredsRm=function(dr){return(S.predsLRmMemo())(dr.snpId);};S.predsLRmMemo=function(){ch.$cctor();return ch.predsLRmMemo;};S.predsLRm=function(dr){var ds;ds=w.reader();return ds.Run(ds.Delay(function(){var dt,du;dt=ct.ofArray([dr]);du=ct.T.Empty;return ds.Combine(ds.While(function(){return!(dt.$==0);},ds.Delay(function(){var dv,dw;return dt.$==1?(dv=dt.$1,(dw=dt.$0,ct.contains(dw,du)?(dt=dv,ds.Zero()):ds.Bind(S.snippetORm(dw),function(dx){var dy,dz;dt=ct.append(dv,(dy=dx==null?null:{$:1,$0:(dz=dx.$0,ct.append(ct.ofSeq(dz.snpPredIds),cG.toList(dz.snpParentIdO)))},dy==null?ct.T.Empty:dy.$0));du=new ct.T({$:1,$0:dw,$1:du});return ds.Zero();}))):ds.Zero();})),ds.Delay(function(){return ds.Return(du);}));}));};S.snippetFromRefORm=function(dr){return dr.$==1?S.snippetFromPathORm(dr.$0):S.snippetORm(dr.$0);};S.snippetFromPathORm=function(dr){var ds;ds=w.reader();return ds.Run(ds.Delay(function(){return ds.Bind(S.orderedRm(),function(dt){function du(dv,dw){return function(dx){return dv.length===0?[null,[[],dw]]:S.snippetName(dx.snpName,dx.snpContent)!==cs.get(dv,0)||!cB.Equals(dx.snpParentIdO,dw)?[null,[dv,dw]]:dv.length>1?[null,[cy.array(dv,{$:1,$0:1},null),{$:1,$0:dx.snpId}]]:[{$:1,$0:dx},[[],dw]];};}return ds.Return(cq.tryHead(cq.choose(a.id,(cq.mapFold(function(dv,dw){return(function(dx){return du(dx[0],dx[1]);}(dv))(dw);},[dr,null],dt))[0])));});}));};S.pathRm=function(dr){var ds;function dt(du){return w.op_BarGreaterGreater(S.pathRm(du.snpId),function(dv){return new ct.T({$:1,$0:du.snpId,$1:dv});});}return w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(S.snippetORm(dr),function(du){return du==null?null:{$:1,$0:S.parentORm(du.$0)};}),u.insertO),function(du){return du==null?null:a.id(du.$0);}),function(du){return du==null?null:{$:1,$0:dt(du.$0)};}),u.insertO),(ds=ct.T.Empty,function(du){return du==null?ds:du.$0;}));};S.snippetRm=function(dr){return u.absorbO(function(){return new d({$:0,$0:(function(ds){return function(dt){return ds("Snippet not found "+ci.p(dt));};}(a.id))(dr)});},S.snippetORm(dr));};S.prepareCodeRm=function(dr){return u.ofFun(function(ds){return ds.prepCode(dr);});};S.orderedRm=function(){return u.ofFun(function(dr){return dr.ordered;});};S.childrenRm=function(dr){return u.ofFun(function(ds){return cq.filter(function(dt){return cB.Equals(dt.snpParentIdO,{$:1,$0:dr});},ds.ordered);});};S.modifiedRm=function(dr){return u.ofFun(function(ds){return dr.snpGeneration>ds.generation;});};S.maxGenerationRm=function(){return u.ofFun(function(dr){return cq.max(cq.map(function(ds){return ds.snpGeneration;},dr.ordered));});};S.predecessorsRm=function(dr){return u.ofFun(function(ds){return cq.choose(ds.fetcher,dr.snpPredIds);});};S.parentORm=function(dr){return u.ofFun(function(ds){var dt;dt=dr.snpParentIdO;return dt==null?null:ds.fetcher(dt.$0);});};S.snippetORm=function(dr){return u.ofFun(function(ds){return ds.fetcher(dr);});};S.propertyPairO=function(dr,ds){var dt,du,dv,dw;dt=S.propertyO(dr,ds);return dt==null?null:{$:1,$0:(du=cx.SplitStrings(dt.$0,["|-|"],1),[cs.get(du,0),(dv=cs.tryItem(1,du),(dw=cs.get(du,0),dv==null?dw:dv.$0))])};};S.propertyO=function(dr,ds){function dt(du,dv){return du===dr?{$:1,$0:dv}:null;}return cs.tryPick(function(du){return dt(du[0],du[1]);},ds.snpProperties);};S.nameSanitized=function(dr){var ds,dt;ds=["\"","<",">","|","\u0000","\u0001","\u0002","\u0003","\u0004","\u0005","\u0006","\u0007","\u0008","\u0009","\n","\u000b","\u000c","\r","\u000e","\u000f","\u0010","\u0011","\u0012","\u0013","\u0014","\u0015","\u0016","\u0017","\u0018","\u0019","\u001a","\u001b","\u001c","\u001d","\u001e","\u001f",":","*","?","\\","/"];return cx.Filter(function(du){return!cs.contains(du,ds);},dr.snpName)+" "+(dt=dr.snpId.get_Id(),a.String(dt));};S.snippetName=function(dr,ds){var dt;return dr!==""?dr:(dt=cq.tryHead(cq.filter(function(du){return!(cx.StartsWith(du,"#")||cx.StartsWith(du,"[<")||cx.StartsWith(du,"//"));},cq.map(cx.Trim,cx.SplitChars(ds,["\n"],1)))),dt==null?"<empty>":dt.$0);};S.defaultSnippet=function(){ch.$cctor();return ch.defaultSnippet;};S.New=function(dr,ds,dt){return Q.New(new P({$:0,$0:cD.NewGuid()}),dr,ds,dt,new cF.New$1(null),[],(S.getNextGeneration())());};S.getNextGeneration=function(){ch.$cctor();return ch.getNextGeneration;};S.setGeneration=function(){ch.$cctor();return ch.setGeneration;};U.New=function(dr,ds,dt,du,dv,dw,dx){return{id:dr,isExpandedRm:ds,canHaveChildrenRm:dt,childrenRm:du,pathRm:dv,parentORm:dw,newChildrenRm:dx};};T.removeNodeOutdentChildren=function(dr,ds){var dt;function du(dv,dw){return w.op_GreaterGreaterEquals(dv,function(dx){return T.outdentNode(dw,dx);});}return w.op_GreaterGreaterEquals(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(dr.childrenRm(),cs.ofSeq),(dt=w.rtn(ds),function(dv){return cq.fold(du,dt,dv);})),function(dv){return T.removeNode(dr,dv);});};T.outdentNode=function(dr,ds){var dt;function du(dv){return T.moveToSibling(true,dr,dv,ds);}return w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(dr.parentORm(ds),function(dv){return dv==null?null:{$:1,$0:du(dv.$0)};}),(dt=w.rtn(ds),function(dv){return dv==null?dt:dv.$0;}));};T.indentNode=function(dr,ds){var dt;function du(dw){return!cB.Equals(dr.id(),dw.id());}function dv(dw,dx){return w.op_GreaterGreaterEquals(dx.canHaveChildrenRm(),function(dy){return dy?w.rtn({$:1,$0:dx}):dw;});}return w.op_GreaterGreaterEquals(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(dr.parentORm(ds),function(dw){return dw!=null&&dw.$==1?w.op_BarGreaterGreater(dw.$0.childrenRm(),function(dx){var dy;dy=cs.ofSeq(dx);return dy;}):w.rtn(ds);}),function(dw){return cq.takeWhile(du,dw);}),(dt=w.rtn(null),function(dw){return cq.fold(dv,dt,dw);})),function(dw){var dx;return dw!=null&&dw.$==1?(dx=dw.$0,w.op_GreaterGreaterEquals(T.removeNode(dr,ds),function(dy){return T.addChild(true,dr,dx,dy);})):w.rtn(ds);});};T.addChild=function(dr,ds,dt,du){var dv;dv=w.reader();return dv.Run(dv.Delay(function(){return dv.Bind(dt.pathRm(),function(dw){function dx(dy){var dz,dA;return cB.Equals(dy.id(),dt.id())?dr?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dy.childrenRm(),cs.ofSeq),(dz=ct.ofArray([ds]),function(dB){return cq.append(dB,dz);})),cs.ofSeq),dy.newChildrenRm):w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dy.childrenRm(),cs.ofSeq),(dA=ct.ofArray([ds]),function(dB){return cq.append(dA,dB);})),cs.ofSeq),dy.newChildrenRm):ct.contains(dy.id(),dw)?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dy.childrenRm(),cs.ofSeq),function(dB){return cq.map(dx,dB);}),u.sequenceSeq),cs.ofSeq),dy.newChildrenRm):w.rtn(dy);}return dv.ReturnFrom$1(u.sequenceSeq(cq.map(dx,du)));});}));};T.moveToSibling2=function(dr,ds,dt,du){var dv;dv=w.reader();return dv.Run(dv.Delay(function(){return dv.Bind(T.tryFindId(ds,du),function(dw){var dx;return dw!=null&&dw.$==1?(dx=dw.$0,dv.Bind(T.tryFindId(dt,du),function(dy){return dy!=null&&dy.$==1?dv.ReturnFrom$1(T.moveToSibling(dr,dx,dy.$0,du)):dv.Return(du);})):dv.Return(du);});}));};T.moveToSibling=function(dr,ds,dt,du){return w.op_GreaterGreaterEquals(T.removeNode(ds,du),function(dv){return T.addSibling(dr,ds,dt,dv);});};T.tryFindId=function(dr,ds){return T.tryFind(function(dt){return cB.Equals(dt.id(),dr);},ds);};T.tryFind=function(dr,ds){function dt(du,dv){return w.op_GreaterGreaterEquals(du,function(dw){var dx;return dw==null?dr(dv)?w.rtn({$:1,$0:dv}):w.op_GreaterGreaterEquals(dv.childrenRm(),(dx=w.rtn(null),function(dy){return cq.fold(dt,dx,dy);})):w.rtn({$:1,$0:dw.$0});});}return cq.fold(dt,w.rtn(null),ds);};T.addSibling=function(dr,ds,dt,du){function dv(dw){return cB.Equals(dw.id(),dt.id());}return w.op_GreaterGreaterEquals(dt.pathRm(),function(dw){var dx,dy;function dz(dA){return cB.Equals(dA.id(),dy)?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(dA.childrenRm(),cs.ofSeq),function(dB){return T.addToParent(dr,dv,ds,dA,dB);}):ct.contains(dA.id(),dx)?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dA.childrenRm(),cs.ofSeq),function(dB){return cq.map(dz,dB);}),u.sequenceSeq),cs.ofSeq),dA.newChildrenRm):w.rtn(dA);}return dw.$==1?(dx=dw.$1,(dy=dw.$0,u.sequenceSeq(cq.map(dz,du)))):w.rtn(T.addNodeToSeq(dr,dv,ds,du));});};T.addToParent=function(dr,ds,dt,du,dv){return du.newChildrenRm(cs.ofSeq(T.addNodeToSeq(dr,ds,dt,dv)));};T.addNodeToSeq=function(dr,ds,dt,du){return ct.ofSeq(cq.delay(function(){return cq.collect(function(dv){return ds(dv)?dr?cq.append([dv],cq.delay(function(){return[dt];})):cq.append([dt],cq.delay(function(){return[dv];})):[dv];},du);}));};T.removeNodes=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){function du(dv,dw){var dx;dx=w.reader();return dx.Run(dx.Delay(function(){return dx.Bind(dv,function(dy){var dz,dA;dz=dy[1];dA=dy[0];return dx.Bind(w.op_BarGreaterGreater(dw.childrenRm(),cs.ofSeq),function(dB){return dx.Bind(cq.fold(du,w.rtn([ct.T.Empty,dz]),dB),function(dC){var dD,dE;dD=dC[1];dE=dC[0];return dr(dw)?dx.Return([dA,ct.append(dE,dD)]):dx.Bind(dw.newChildrenRm(cs.ofSeq(cq.rev(dE))),function(dF){return dx.Return([new ct.T({$:1,$0:dF,$1:dA}),dD]);});});});});}));}return dt.Bind(cq.fold(du,w.rtn([ct.T.Empty,ct.T.Empty]),ds),function(dv){return dt.Return(ct.rev(ct.append(dv[1],dv[0])));});}));};T.removeNode=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){return dt.Bind(dr.pathRm(),function(du){function dv(dw){var dx;dx=w.reader();return dx.Run(dx.Delay(function(){return cB.Equals(dw.id(),dr.id())?dx.Return(null):ct.contains(dw.id(),du)?dx.ReturnFrom$1(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(w.op_BarGreaterGreater(dw.childrenRm(),cs.ofSeq),function(dy){return cq.map(dv,dy);}),u.sequenceSeq),function(dy){return cq.choose(a.id,dy);}),cs.ofSeq),dw.newChildrenRm),function(dy){return{$:1,$0:dy};})):dx.Return({$:1,$0:dw});}));}return dt.ReturnFrom$1(w.op_BarGreaterGreater(u.sequenceSeq(cq.map(dv,ds)),function(dw){return cq.choose(a.id,dw);}));});}));};T.listNodes=function(dr,ds){return w.op_BarGreaterGreater(u.sequenceSeq(cq.map(function(dt){return w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(dt.isExpandedRm(),function(du){var dv;return du?w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(dt.childrenRm(),cs.ofSeq),(dv=dr+1,function(dw){return T.listNodes(dv,dw);})):w.rtn([]);}),function(du){return cq.append([[dt,dr]],du);});},ds)),function(dt){return cq.collect(a.id,dt);});};c["String.Right$1"]=function(dr,ds){var dt,du;return c["String.Substring2$1"](dr,(dt=0,(du=dr.length-ds,cB.Compare(dt,du)===1?dt:du)),dr.length);};c["String.Left$1"]=function(dr,ds){return c["String.Substring2$1"](dr,0,ds);};c["String.Substring2$1"]=function(dr,ds,dt){var du,dv;while(true){if(dt<=0)return"";else if(ds<0){du=ds;ds=0;dt=dt+du;}else return ds>=dr.length?"":cx.Substring(dr,ds,(dv=dr.length-ds,cB.Compare(dt,dv)===-1?dt:dv));}};c.delayed$1=function(dr,ds){var dt;dt=[null];return function(du){var dv,dw;dv=dt[0];dv==null?void 0:dv.$0.Cancel$1();dt[0]={$:1,$0:new cH.New()};cr.Start((dw=null,cr.Delay(function(){return cr.Bind(cr.Sleep(dr),function(){ds(du);return cr.Zero();});})),{$:1,$0:dt[0].$0});};};c.print=function(dr){((function(ds){return function(dt){return ds(cp.prettyPrint(dt));};}(function(ds){cI.log(ds);}))(dr));};c.Error$1=function(dr){return{$:1,$0:dr};};W.ofAsyncResult=function(dr){return new a.Promise(function(ds,dt){cr.StartWithContinuations(dr,function(du){if(du.$==1)dt((function(dv){return function(dw){return dv(cp.prettyPrint(dw));};}(a.id))(du.$0));else ds(du.$0);},function(du){dt(du);},function(du){dt(du);},null);});};X.sequenceSeq=function(dr){return X.traverseSeq(a.id,dr);};X.traverseSeq=function(dr,ds){return X.map(a.id,cs.foldBack(function(dt,du){return X.op_GreaterGreaterEquals(dr(dt),function(dv){return X.op_GreaterGreaterEquals(du,function(dw){return X.rtn(new ct.T({$:1,$0:dv,$1:dw}));});});},cs.ofSeq(ds),X.rtn(ct.T.Empty)));};X.op_GreaterGreaterEquals=function(dr,ds){return X.bind(ds,dr);};X.rtn=function(dr){return cK.Const(dr);};X.map=function(dr,ds){return cK.Map(dr,ds);};X.bind=function(dr,ds){return cK.Bind(dr,ds);};X.insertWO=function(dr){return dr==null?cK.Const(null):cK.Map(function(ds){return{$:1,$0:ds};},dr.$0);};Y.serLMdField=function(dr,ds,dt,du){var dv;function dw(dx,dy){ds(dx).Set(dv[1](dy));return dx;}dv=Y.serSeq(dt,du);return[dr,function(dx){var dy;dy=(ds(dx))["var"].Get();return dv[0](dy);},function(dx){return function(dy){return dw(dx,dy);};}];};Y.serVarField=function(dr,ds,dt,du){var dv;function dw(dx){return dx.Get();}return[dr,(dv=function(dx){return dw(ds(dx));},function(dx){return dt(dv(dx));}),function(dx){return function(dy){cL.Set(ds(dx),du(dy));return dx;};}];};Y.serMap=function(dr,ds,dt,du){var dv,dw,dx,dy,dz;function dA(dC){return[dC.K,dC.V];}function dB(dC){return new cM.New(dC);}dv=(dw=Y.serDup(dr,ds,dt,du),Y.serSeq(dw[0],dw[1]));return[(dx=function(dC){return cq.map(dA,dC);},(dy=dv[0],function(dC){return dy(dx(dC));})),(dz=dv[1],function(dC){return dB(dz(dC));})];};Y.serDup=function(dr,ds,dt,du){var dv,dw,dx;function dy(dA){return[dv[1](null),dw[1](null)];}function dz(dA){return[dv[1](cs.get(dA,0)),dw[1](cs.get(dA,1))];}dv=[dr,ds];dw=[dt,du];return[function(dA){return(((co.Curried3(function(dB,dC,dD){return dB("["+cp.toSafe(dC)+", "+cp.toSafe(dD)+"]");}))(a.id))(dv[0](dA[0])))(dw[0](dA[1]));},(dx=function(dA){return Y.ifUndefF(dy,dz,dA);},function(dA){return dx(a.id(dA));})];};Y.serOpt=function(dr,ds){var dt,du,dv,dw,dx,dy;function dz(dC){return dC==null?"null":dC.$0;}function dA(dC){return null;}function dB(dC){return{$:1,$0:dC};}dt=[dr,ds];return[(du=(dv=dt[0],function(dC){return dC==null?null:{$:1,$0:dv(dC.$0)};}),function(dC){return dz(du(dC));}),(dw=(dx=(dy=dt[1],function(dC){return dB(dy(dC));}),function(dC){return Y.ifUndefF(dA,dx,dC);}),function(dC){return dw(a.id(dC));})];};Y.serSet=function(dr,ds){var dt,du,dv,dw,dx,dy,dz;function dA(dC){return[];}function dB(dC){return new cF.New(dC);}dt=[dr,ds];return[(du=(dv=dt[0],function(dC){return new cF.New$1(cN.OfSeq(cq.map(dv,dC)));}),function(dC){return Y.sprintA(du(dC));}),(dw=(dx=(dy=(dz=dt[1],function(dC){return cq.map(dz,dC);}),function(dC){return Y.ifUndefF(dA,dy,dC);}),function(dC){return dx(a.id(dC));}),function(dC){return dB(dw(dC));})];};Y.serLst=function(dr,ds){var dt,du,dv,dw,dx,dy,dz;function dA(dB){return[];}dt=[dr,ds];return[(du=(dv=dt[0],function(dB){return ct.map(dv,dB);}),function(dB){return Y.sprintA(du(dB));}),(dw=(dx=(dy=(dz=dt[1],function(dB){return cq.map(dz,dB);}),function(dB){return Y.ifUndefF(dA,dy,dB);}),function(dB){return dx(a.id(dB));}),function(dB){return ct.ofSeq(dw(dB));})];};Y.serArr=function(dr,ds){var dt,du,dv,dw,dx,dy,dz;function dA(dB){return[];}dt=[dr,ds];return[(du=(dv=dt[0],function(dB){return cs.map(dv,dB);}),function(dB){return Y.sprintA(du(dB));}),(dw=(dx=(dy=(dz=dt[1],function(dB){return cq.map(dz,dB);}),function(dB){return Y.ifUndefF(dA,dy,dB);}),function(dB){return dx(a.id(dB));}),function(dB){return cs.ofSeq(dw(dB));})];};Y.serSeq=function(dr,ds){var dt,du,dv,dw,dx,dy;function dz(dA){return[];}dt=[dr,ds];return[(du=(dv=dt[0],function(dA){return cq.map(dv,dA);}),function(dA){return Y.sprintA(du(dA));}),(dw=(dx=(dy=dt[1],function(dA){return cq.map(dy,dA);}),function(dA){return Y.ifUndefF(dz,dx,dA);}),function(dA){return dw(a.id(dA));})];};Y.serField=function(dr,ds,dt,du,dv){return[dr,function(dw){return du(ds(dw));},function(dw){return function(dx){return dt(dv(dx),dw);};}];};Y.serString=function(){ch.$cctor();return ch.serString;};Y.serBool=function(){ch.$cctor();return ch.serBool;};Y.serInt=function(){ch.$cctor();return ch.serInt;};Y.serFloat=function(){ch.$cctor();return ch.serFloat;};Y.sprintA=function(dr){var ds;ds=cx.concat(", ",dr);return(function(dt){return function(du){return dt("["+cp.toSafe(du)+"]");};}(a.id))(ds);};Y.deserGuid=function(){ch.$cctor();return ch.deserGuid;};Y.Exists=function(dr,ds){return!ds[dr]?null:{$:1,$0:ds[dr]};};Y.ifUndefF=function(dr,ds,dt){return!dt?dr(dt):ds(dt);};Y.ifUndef=function(dr,ds){return!ds?dr:ds;};Z.LoadFilesAsync=function(dr){var ds;ds=null;return cr.Delay(function(){return cr.For(dr,function(dt){return cr.Bind(Z.LoadFile(dt),function(){return cr.Return(null);});});});};Z.LoadFile=function(dr){var ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF;function dG(dI,dJ){return cx.EndsWith(dJ,dI)?{$:1,$0:null}:null;}function dH(dI,dJ){try{dE.onload=dI;self.document.head.appendChild(dE);}catch(dK){dJ(dK);}}ds=(dt=((dv=dG(".js",dr),dv!=null&&dv.$==1)?!self.document.querySelector("script[src='"+dr+"']")||((dw=dG(".fsx",dr),dw!=null&&dw.$==1)?!self.document.querySelector("script[src='"+dr+"']")||(dx=dG(".fs",dr),dx!=null&&dx.$==1)&&!self.document.querySelector("script[src='"+dr+"']"):(dy=dG(".fs",dr),dy!=null&&dy.$==1)&&!self.document.querySelector("script[src='"+dr+"']")):(dz=dG(".fsx",dr),dz!=null&&dz.$==1)?!self.document.querySelector("script[src='"+dr+"']")||(dA=dG(".fs",dr),dA!=null&&dA.$==1)&&!self.document.querySelector("script[src='"+dr+"']"):(dB=dG(".fs",dr),dB!=null&&dB.$==1)&&!self.document.querySelector("script[src='"+dr+"']"))?{$:1,$0:Z.createScript(dr)}:(dC=dG(".css",dr),dC!=null&&dC.$==1)?{$:1,$0:Z.createCss(dr)}:(dD=dG(".html",dr),dD!=null&&dD.$==1)?{$:1,$0:Z.createHtml(dr)}:null,dt==null?null:{$:1,$0:(dE=dt.$0,cr.FromContinuations(function(dI,dJ,dK){return dH.apply(null,[dI,dJ,dK]);}))});return ds==null?(dF=null,cr.Delay(function(){return cr.Return(null);})):ds.$0;};Z.createHtml=function(dr){var ds;ds=self.document.createElement("link");ds.setAttribute("rel","import");ds.setAttribute("type","text/html");ds.setAttribute("href",dr);return ds;};Z.createCss=function(dr){var ds;ds=self.document.createElement("link");ds.setAttribute("rel","stylesheet");ds.setAttribute("type","text/css");ds.setAttribute("href",dr);return ds;};Z.createScript=function(dr){var ds;ds=self.document.createElement("script");ds.setAttribute("type","text/javascript");ds.setAttribute("src",dr);return ds;};_0.getEndWord$1=function(dr,ds){var dt,du;dt=V.REGEX$2("^([a-zA-Z_]\\w*)","g",dr.substring(ds));return dt!=null&&dt.$==1?(du=dt.$0,!cB.Equals(du,null)&&du.length===1)?cs.get(dt.$0,0):"":"";};_0.getStartWord$1=function(dr,ds){var dt,du;dt=V.REGEX$2("([a-zA-Z_]\\w*)$","g",cx.Substring(dr,0,ds));return dt!=null&&dt.$==1?(du=dt.$0,!cB.Equals(du,null)&&du.length===1)?cs.get(dt.$0,0):"":"";};_2=_1.Hoverable=co.Class({Content:function(dr){return dr.on("mouseenter",function(){return cO.AddClass(dr.elt,"hovering");}).on("mouseleave",function(){return cO.RemoveClass(dr.elt,"hovering");});},Content$1:function(dr){return cP.Element("div",this.get_Attributes(),dr);},get_Attributes:function(){var dr,ds;dr=this;return ct.ofArray([(ds=cK.Const("hovering"),cQ.DynamicPred("class",this.hover.get_View(),ds)),cR.HandlerImpl("mouseenter",function(){return function(){return dr.hover.Set(true);};}),cR.HandlerImpl("mouseleave",function(){return function(){return dr.hover.Set(false);};})]);}},null,_2);_2.get_Demo$1=function(){return _2.New$3().Content(cP.Element("div",[cR.Create("style","flex-flow: column;")],[cP.TextNode("Hover over me!")]));};_2.Content$2076$81=co.Curried3(function(dr,ds,dt){return cO.RemoveClass(dr.elt,"hovering");});_2.get_Attributes$2072$69=co.Curried3(function(dr,ds,dt){return dr.hover.Set(false);});_2.get_Attributes$2071$69=co.Curried3(function(dr,ds,dt){return dr.hover.Set(true);});_2.New$3=function(){return _2.New$2(cL.Create$1(false));};_2.New$2=function(dr){return new _2({hover:dr});};_1.hoverable$1=function(dr){return _2.New$3().Content(dr);};_3.addResizeObserver$1=function(dr,ds){var dt,du,dv,dw;try{dt=!(!a.ResizeObserver);}catch(dx){dt=false;}if(dt){du=new a.ResizeObserver(dr);_3.set_observers$1(new ct.T({$:1,$0:du,$1:_3.observers$1()}));du.observe(ds);}else{dv=_3.dimsChanged$1(ds);cr.Start((dw=null,cr.Delay(function(){return cr.While(function(){return ds.isConnected;},cr.Delay(function(){return cr.Bind(cr.Sleep(110),function(){return dv()?(dr(),cr.Zero()):cr.Zero();});}));})),null);}};_3.dimsChanged$1=function(dr){var ds;ds=[dr.getBoundingClientRect()];return function(){var dt;dt=dr.getBoundingClientRect();return cB.Equals(_3.domRect2Tuple$1(ds[0]),_3.domRect2Tuple$1(dt))?false:(ds[0]=dt,true);};};_3.domRect2Tuple$1=function(dr){return[dr.top,dr.left,dr.width,dr.height];};_3.observers$1=function(){ch.$cctor();return ch.observers;};_3.set_observers$1=function(dr){ch.$cctor();ch.observers=dr;};_6=_5.WcTabStripT=co.Class({connectedCallback:function(){var dr,ds,dt,du;function dv(){var dw,dx,dy;dx=!ds.hasAttribute("bottom");dy=ct.ofSeq(cq.delay(function(){return cq.collect(function(dz){var dA;dA=ds.childNodes[dz-1];return cB.Equals(dA.nodeType,cS.ELEMENT_NODE)?[[dA.hasAttribute("tabname")?dA.getAttribute("tabname"):(function(dB){return function(dC){return dB("Tab "+a.String(dC));};}(a.id))(dz),dA]]:[];},cw.range(1,ds.childNodes.length));}));while(du.childNodes.length>0)du.removeChild(du.lastChild);dw=_5.tabStrip$1(dr.selected,dx,true,dy,cP.Element("slot",ct.T.Empty,ct.T.Empty));cU.LoadLocalTemplates("");cP.Run(du,dw);}dr=this;!this.added?(ds=this,dt=ds.attachShadow({mode:"open"}),du=self.document.createElement("div"),dt.appendChild(du),dv(),ds.addEventListener("DOMSubtreeModified",c.delayed$1(50,dv)),this.added=true):void 0;}},i,_6);_6.Constructor$1=function(){var dr,ds;dr=(ds=cV.construct(self.HTMLElement,[],this.__proto__.constructor),ds);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(dr);return dr;};_6.New$1=co.Ctor(function(){i.New.call(this);this.added=false;this.selected=cL.Create$1(1);(function(dr){return dr("WcTabStripT initializer");}(function(dr){cI.log(dr);}));},_6);_5.init$1=function(){ch.$cctor();return ch.init;};_5.tabStrip$2214$64=function(dr,ds){return function(){return function(){return ds.Set(dr+1);};};};_5.tabStrip$1=function(dr,ds,dt,du,dv){var dw;dw=cP.Element("div",[cR.Create("class",(((co.Curried3(function(dx,dy,dz){return dx("tab-strip "+cp.toSafe(dy)+" "+cp.toSafe(dz));}))(a.id))(ds?"top":"bottom"))(dt?"horizontal":"vertical"))],ct.ofSeq(cq.delay(function(){return cq.collect(function(dx){var dy;dy=dx[0];return[_2.New$3().Content(cP.Element("div",[cQ.Dynamic("class",cK.Map(function(dz){return"tab"+(dz===dy+1?" selected":"");},dr.get_View())),cR.Create("draggable","true"),cR.HandlerImpl("click",function(){return function(){return dr.Set(dy+1);};})],[cP.TextNode(dx[1][0])]))];},cq.indexed(du));})));return cP.Element("div",[cR.Create("class","tab-panel")],ct.ofSeq(cq.delay(function(){return cq.append(ds?[dw]:[],cq.delay(function(){return cq.append([cP.Element("div",[cR.Create("class","tab-content")],[dv])],cq.delay(function(){return cq.append(!ds?[dw]:[],cq.delay(function(){return cq.append([cP.Element("style",ct.T.Empty,ct.ofArray([cP.TextNode(_5.css$1())]))],cq.delay(function(){return[cP.Element("style",ct.T.Empty,ct.ofArray([cP.TextView(cK.Map(function(dx){return function(dy){return dx("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(dy)+")) { display: grid }\r\n                                           ");};}(a.id),dr.get_View()))]))];}));}));}));}));})));};_5.css$1=function(){ch.$cctor();return ch.css;};_8=_7.WcSplitterT=co.Class({connectedCallback:function(){var dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG;function dH(dP){var dQ,dR,dS,dT;dQ=dy?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];dR=a.parseFloat("0"+a.jQuery(dP.parentElement.parentElement).css(dQ[0]));dS=a.parseFloat("0"+a.jQuery(dP.parentElement.parentElement).css(dQ[1]));dB.Set(a.parseFloat("0"+a.jQuery(dP.parentElement.parentElement).css(dQ[2])));dA[0]=dR+dS;dT=dr.getBoundingClientRect();return dy?dx?[dT.width,dT.height]:[-dT.width,dT.height]:dx?[dT.height,dT.width]:[-dT.height,dT.width];}function dI(dP){return dy?dP.clientX:dP.clientY;}function dJ(dP){var dQ,dR;dQ=(dI(dP)-dE[0])*100/dz[0][0]+dD[0];dw.Set((dR=cB.Compare(du,dQ)===1?du:dQ,cB.Compare(dv,dR)===-1?dv:dR));}function dK(){if(dC[0]){dC[0]=false;self.removeEventListener("mousemove",dJ,false);self.removeEventListener("mouseup",dK,false);}}function dL(dP){var dQ,dR;if(!dC[0]){dC[0]=true;dD[0]=dw.Get();dE[0]=dI(dP);dz[0]=(dQ=(dR=dF[0],dR==null?null:{$:1,$0:dH(dR.$0)}),dQ==null?[100,500]:dQ.$0);self.addEventListener("mousemove",dJ,false);self.addEventListener("mouseup",dK,false);dP.preventDefault();}}function dM(dP,dQ,dR,dS){return[(dP-dQ-dR)*dS/100,(dP-dQ-dR)*(100-dS)/100];}function dN(dP,dQ){return(((((co.Curried(function(dR,dS,dT,dU,dV){return dR(" "+dS.toFixed(2)+"px "+dT.toFixed(2)+"px ; "+cp.toSafe(dU)+" : "+dV.toFixed(2)+"px; ");},5))(a.id))(dP))(dQ))(dy?"height":"width"))(dz[0][1]);}function dO(){var dP;dP=dF[0];dP==null?void 0:dz[0]=dH(dP.$0);dw.Set(dw.Get());}if(!this.added){dr=this;ds=dr.attachShadow({mode:"open"});dt=self.document.createElement("div");du=dr.hasAttribute("min")?a.parseFloat(dr.getAttribute("min")):4;dv=dr.hasAttribute("max")?a.parseFloat(dr.getAttribute("max")):96;dw=cL.Create$1(dr.hasAttribute("value")?a.parseFloat(dr.getAttribute("value")):50);dx=!dr.hasAttribute("second");dy=dr.hasAttribute("vertical");dz=[[0,0]];dA=[0];dB=cL.Create$1(0);dC=[false];dD=[0];dE=[0];dF=[null];dG=(((((dy?_7.layoutVertical$1():_7.layoutHorizontal$1())(cK.Map(function(dP){var dQ;dQ=dM(dz[0][0],dB.Get(),dA[0],dP);return dN.apply(null,dQ);},dw.get_View())))(function(){_3.addResizeObserver$1(dO,dr);dO();}))(function(dP){dF[0]={$:1,$0:dP};dO();}))(function(dP){dL(dP);}))(cK.Map(function(dP){return function(dQ){return dP(cp.prettyPrint(dQ)+"px");};}(a.id),dB.get_View()));cU.LoadLocalTemplates("");cP.Run(dt,dG);ds.appendChild(dt.firstChild);this.added=true;}}},i,_8);_8.Constructor$1=function(){var dr,ds;dr=(ds=cV.construct(self.HTMLElement,[],this.__proto__.constructor),ds);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(dr);return dr;};_8.New$1=co.Ctor(function(){i.New.call(this);this.added=false;(function(dr){return dr("WcSplitterT initializer");}(function(dr){cI.log(dr);}));},_8);_7.init$1=function(dr,ds){var dt,du,dv;dt=new _8.New$1();_7.set_layoutHorizontal$1(dr);_7.set_layoutVertical$1(ds);du="wcomp-splitter";dv=self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New;cI.log("defineWebComponent: "+du);cW.setPrototypeOf(dv.prototype,self.HTMLElement.prototype);cW.setPrototypeOf(dv,self.HTMLElement);cW.setPrototypeOf(_8.Constructor$1.prototype,dv.prototype);self.customElements.define(du,_8.Constructor$1);};_7.layoutVertical$1=function(){ch.$cctor();return ch.layoutVertical;};_7.set_layoutVertical$1=function(dr){ch.$cctor();ch.layoutVertical=dr;};_7.layoutHorizontal$1=function(){ch.$cctor();return ch.layoutHorizontal;};_7.set_layoutHorizontal$1=function(dr){ch.$cctor();ch.layoutHorizontal=dr;};_.New=function(dr,ds){return{column:dr,lineNumber:ds};};$.New=function(dr,ds,dt,du){return{startColumn:dr,endColumn:ds,startLineNumber:dt,endLineNumber:du};};ba.New=function(dr,ds,dt,du,dv,dw){return{authority:dr,fragment:ds,fsPath:dt,path:du,query:dv,scheme:dw};};bb.New=function(dr,ds){return{range:dr,uri:ds};};bc.New=function(dr,ds){return{matches:dr,range:ds};};bd.New=function(dr,ds,dt){return{endColumn:dr,startColumn:ds,word:dt};};be.New=function(dr){return{uri:dr};};bf.New=function(dr,ds){return{value:dr,isTrusted:ds};};bg.New=function(dr,ds,dt,du,dv,dw){return{startColumn:dr,endColumn:ds,startLineNumber:dt,endLineNumber:du,severity:dv,message:dw};};bh.New=function(dr,ds,dt){return{kind:dr,label:ds,detail:dt};};bi.New=function(dr,ds){return{contents:dr,range:ds};};bj=_9.Editor=co.Class({},i,bj);bj.New=co.Ctor(function(){i.New.call(this);},bj);bk.New=function(dr,ds,dt,du,dv,dw,dx){return{"var":dr,onChange:ds,onRender:dt,editorO:du,disabled:dv,options:dw,overrides:dx};};_9.newVarO=function(dr){var ds;ds=_9.newVar(cL.Lens(dr,function(dt){return dt==null?"":dt.$0;},function(dt,du){return dt==null?null:{$:1,$0:du};}));return _9.disabled(cK.Map(function(dt){return dt==null;},dr.get_View()),ds);};_9.newText=function(dr){return _9.newVar(cL.Create$1(dr));};_9["var"]=function(dr){return dr["var"];};_9.disabled=function(dr,ds){return bk.New(ds["var"],ds.onChange,ds.onRender,ds.editorO,dr,ds.options,ds.overrides);};_9.onRender=function(dr,ds){return bk.New(ds["var"],ds.onChange,{$:1,$0:dr},ds.editorO,ds.disabled,ds.options,ds.overrides);};_9.onChange=function(dr,ds){return bk.New(ds["var"],dr,ds.onRender,ds.editorO,ds.disabled,ds.options,ds.overrides);};_9.setVar=function(dr,ds){return bk.New(dr,ds.onChange,ds.onRender,ds.editorO,ds.disabled,ds.options,ds.overrides);};_9.render$2558$42=function(dr){return function(ds){var dt;cr.Start((dt=null,cr.Delay(function(){return cr.Bind(_9.loader(),function(){var du,dv,dw;du=(dv=ds.parentElement,self.monaco.editor.create(dv,dr.options,dr.overrides));_3.addResizeObserver$1(function(){du.layout();},ds.parentElement);ds.parentNode.removeChild(ds);dr.editorO={$:1,$0:du};dw=dr.onRender;dw==null?void 0:dw.$0(du);V.bindVarEditor(function(dx){du.onDidChangeModelContent(dx);},function(){return du.getValue();},function(dx){du.setValue(dx);},dr.onChange,dr["var"]);return cr.Zero();});})),null);};};_9.render=function(dr){return cP.Element("div",[cR.OnAfterRenderImpl(function(ds){var dt;cr.Start((dt=null,cr.Delay(function(){return cr.Bind(_9.loader(),function(){var du,dv,dw;du=(dv=ds.parentElement,self.monaco.editor.create(dv,dr.options,dr.overrides));_3.addResizeObserver$1(function(){du.layout();},ds.parentElement);ds.parentNode.removeChild(ds);dr.editorO={$:1,$0:du};dw=dr.onRender;dw==null?void 0:dw.$0(du);V.bindVarEditor(function(dx){du.onDidChangeModelContent(dx);},function(){return du.getValue();},function(dx){du.setValue(dx);},dr.onChange,dr["var"]);return cr.Zero();});})),null);})],[]);};_9.loader=function(){ch.$cctor();return ch.loader;};_9.includes=function(){ch.$cctor();return ch.includes;};_9.newVar=function(dr){return bk.New(dr,a.ignore,null,null,cK.Const(false),null,null);};V.rexGuid$1=function(){ch.$cctor();return ch.rexGuid;};V.REGEX$2=function(dr,ds,dt){var du;if(dt===null)return null;else try{du=(new a.String(dt)).match(new a.RegExp(dr,ds));return cB.Equals(du,null)?null:!cB.Equals(du,null)&&du.length===0?null:{$:1,$0:du};}catch(dv){return null;}};V.bindVarEditor=function(dr,ds,dt,du,dv){var dw,dx;dw=[0];dx=[0];dr(function(){var dy;dy=ds();dv.Get()!==dy?(dw[0]=dw[0]+1,dv.Set(dy),du()):void 0;});cK.Sink(function(){if(dw[0]>dx[0])dx[0]=dw[0];else if(ds()!==dv.Get())dt(dv.Get());},dv.get_View());};bm.extractConfig=function(dr,ds){var dt;dt=ds.$0;return{$:0,$0:N.getSourceDir(dr,A.splitByChar$1("\n",dt)),$1:" --nologo --quiet "+N.extractDefines({$:0,$0:dt})};};bo=bn.Address=co.Class({get_txt:function(){return this.$0;}},null,bo);bp.BRGetProcessId={$:1};bp.BRGetConnections={$:0};bq.MsgRequestForEcho={$:5};bq.MsgRequestForId={$:4};bq.MsgFromBroker={$:3};bq.MsgReply={$:2};bq.MsgRequest={$:1};bq.MsgInformation={$:0};br.BMReceiverCantReply={$:4};br.BMOnlyBrokerShouldUse={$:1};br.BMOk={$:0};bs.Receiver={$:2};bs.Broker={$:1};bs.NoReply={$:0};bt.New=function(dr,ds,dt,du,dv,dw,dx){return{from:dr,destination:ds,msgType:dt,subtype:du,id:dv,payload:dw,replier:dx};};bu.FSharp={$:0};bv.FSStation={$:0};bw.JScript={$:0};by=bx.Handler=co.Class({Cancel:function(dr,ds){var dt;dt=this.waitingAgent;dt.mailbox.AddLast({$:3,$0:dr,$1:ds});dt.resume();},Raise:function(dr,ds){var dt;dt=this.waitingAgent;dt.mailbox.AddLast({$:2,$0:dr,$1:ds});dt.resume();},Reply:function(dr,ds){var dt;dt=this.waitingAgent;dt.mailbox.AddLast({$:1,$0:dr,$1:ds});dt.resume();},Add:function(dr,ds){var dt;dt=this.waitingAgent;dt.mailbox.AddLast({$:0,$0:dr,$1:ds});dt.resume();}},i,by);by.New=co.Ctor(function(dr){i.New.call(this);this.waitingAgent=D.fold(D.defHandler,function(ds,dt){var du,dv,dw;function dx(dy,dz,dA){var dB,dC;dB=(dC=cX.TryFind(dy,ds),dC==null?null:{$:1,$0:dz(dC.$0)});dB==null?dA():void 0;return ds.Remove(dy);}return dt.$==1?(du=dt.$1,dx(dt.$0,function(dy){dy[0](du);},function(){dr(du);})):dt.$==2?(dv=dt.$1,dx(dt.$0,function(dy){dy[1](dv);},a.ignore)):dt.$==3?(dw=dt.$1,dx(dt.$0,function(dy){dy[2](dw);},a.ignore)):ds.Add(dt.$0,dt.$1);},new cM.New([]));},by);bz=bn.WSMessagingClient=co.Class({sendMsg:function(dr){var ds,dt;ds=this;dt=e.asyncResult();return dt.Run(dt.Delay(function(){return dr.replier.$===0?dt.Bind$1(ds.sendAndForget(dr),function(){return dt.Return("");}):dt.ReturnFrom$1(ds.sendGetReply(dr));}));},getProcessId:function(){var dr,ds;dr=this;ds=e.asyncResult();return ds.Run(ds.Delay(function(){var dt,du;return ds.Bind$1(dr.sendGetReply((dt=bn.MessageBrokerAddress(),(du=cY.stringify((ck.j$4())(bp.BRGetProcessId)),bt.New(new bo({$:0,$0:""}),dt,bq.MsgRequest,"",cD.NewGuid(),du,bs.NoReply)))),function(dv){var dw;dw=(cl.j$4())(cY.parse(dv));return dw.$==1?ds.Return(dw.$0):ds.ReturnFrom({$:1,$0:new d({$:2,$0:{$:6,$0:(function(dx){return function(dy){return dx(ci.p$3(dy));};}(a.id))(dw)}})});});}));},getListeners:function(){var dr,ds;dr=this;ds=e.asyncResult();return ds.Run(ds.Delay(function(){var dt,du;return ds.Bind$1(dr.sendGetReply((dt=bn.MessageBrokerAddress(),(du=cY.stringify((ck.j$4())(bp.BRGetConnections)),bt.New(new bo({$:0,$0:""}),dt,bq.MsgRequest,"",cD.NewGuid(),du,bs.NoReply)))),function(dv){var dw;dw=(cl.j$4())(cY.parse(dv));return dw.$==0?ds.Return(dw.$0):ds.ReturnFrom({$:1,$0:new d({$:2,$0:{$:6,$0:(function(dx){return function(dy){return dx(ci.p$3(dy));};}(a.id))(dw)}})});});}));},sendGetReply:function(dr){var ds,dt;ds=this;dt=e.asyncResult();return dt.Run(dt.Delay(function(){return dt.Bind$1(ds.sendAndReply(bs.Receiver,dr),function(du){var dv;return dt.Bind((dv=du.msgType,dv.$==2?{$:0,$0:du.payload}:dv.$==3?{$:1,$0:new d({$:2,$0:(cl.j$5())(cY.parse(du.payload))})}:{$:1,$0:new d({$:2,$0:{$:5,$0:du.msgType}})}),function(dw){return dt.Return(dw);});});}));},sendAndVerify:function(dr){var ds,dt;ds=this;dt=e.asyncResult();return dt.Run(dt.Delay(function(){return dt.Bind$1(ds.sendAndReply(bs.Broker,dr),function(du){var dv;return dt.Bind(du.msgType.$==3?(dv=(cl.j$5())(cY.parse(du.payload)),dv.$===0?{$:0,$0:null}:{$:1,$0:new d({$:2,$0:dv})}):{$:1,$0:new d({$:2,$0:{$:5,$0:du.msgType}})},function(){return dt.Return();});});}));},sendAndReply:function(dr,ds){var dt,du;dt=this;du=e.asyncResult();return du.Run(du.Delay(function(){return du.Bind$1(dt.getServer(),function(dv){return p["AsyncResultBuilder.ReturnFrom"](du,cr.FromContinuations(function(dw,dx,dy){var dz;dt.waiting.Add(ds.id,[dw,dx,dy]);dt.postR(dv,dr,ds);return dt.wsTimeout>0?cr.Start((dz=null,cr.Delay(function(){return cr.Bind(cr.Sleep(dt.wsTimeout),function(){dt.waiting.Raise(ds.id,new cZ.New$1((((co.Curried3(function(dA,dB,dC){return dA("Did not receive reply in "+a.String(dB)+" seconds for Message: "+cm.p(dC));}))(a.id))(dt.wsTimeout/1000>>0))(ds)));return cr.Zero();});})),null):null;}));});}));},sendAndForget:function(dr){var ds,dt;ds=this;dt=e.asyncResult();return dt.Run(dt.Delay(function(){return dt.Bind$1(ds.getServer(),function(du){ds.postR(du,bs.NoReply,dr);return dt.Zero();});}));},postR:function(dr,ds,dt){try{dr.FsRoot_Library2_WebSockets_IServer$Post(bn.replier(ds,bn.from(this.clientAddress,dt)));}catch(du){this.serverO=null;throw du;}},getServer:function(){return this.checkServer.PostAndAsyncReply(function(dr){return[dr,null];},null);},connectToWebSocketServer:function(){var dr,ds;dr=this;(function(dt){return dt("in connectToWebSocketServer");}(function(dt){cI.log(dt);}));ds=null;return cr.Delay(function(){return cr.Bind(((dr.connectStateful(dr.wsEndPoint))(dr.clientId))(function(dt){var du;du=null;return cr.Delay(function(){return cr.Return([0,function(dv){return function(dw){var dx;dx=null;return cr.Delay(function(){return cr.Combine(cr.TryWith(cr.Delay(function(){return dw.$==2?((function(dy){return function(dz){return dy("WebSocket "+cp.toSafe(dz)+" connection open.");};}(function(dy){cI.log(dy);}))(dr.clientId),dr.serverO={$:1,$0:dt},cr.Zero()):dw.$==3?((function(dy){return function(dz){return dy("WebSocket "+cp.toSafe(dz)+" connection closed.");};}(function(dy){cI.log(dy);}))(dr.clientId),dr.close(),cr.Zero()):dw.$==1?((function(dy){return function(dz){return dy("WebSocket "+cp.toSafe(dz)+" connection error!");};}(function(dy){cI.log(dy);}))(dr.clientId),cr.Zero()):(dr.processMessage(dw.$0),cr.Zero());}),function(dy){(((co.Curried3(function(dz,dA,dB){return dz("msg: "+ci.p$7(dA)+" \nexn:"+cp.prettyPrint(dB));}))(function(dz){cI.log(dz);}))(dw))(dy);return cr.Zero();}),cr.Delay(function(){return cr.Return(dv);}));});};}]);});}),function(){(function(dt){return dt("connectToWebSocketServer with server");}(function(dt){cI.log(dt);}));return cr.Zero();});});},processMessage:function(dr){var ds,dt,du,dv,dw,dz;dt=this;du=dr.msgType;function dx(dA){dt.reply(dA);}function dy(dA){return cr.Return(dA);}switch(du.$==2?0:du.$==0?1:du.$==1?2:du.$==5?3:du.$==4?4:0){case 0:this.processReply(dr);break;case 1:(((co.Curried3(function(dA,dB,dC){return dA("Information from '"+cp.toSafe(dB)+"': "+cp.toSafe(dC));}))(function(dA){cI.log(dA);}))(dr.from.get_txt()))(((c1.Id())())(cY.parse(dr.payload)));break;case 2:dv=this.payloadProcessorO;dv!=null&&dv.$==1?cr.Start(cr.Bind(dt.mapPayloadWrap(dv.$0,dr),(dw=function(dA){return dx(bn.makeReply(dA));},function(dA){return dy(dw(dA));})),null):dr.replier.$===2?null:null;break;case 3:dt.reply(bn.msgType(bq.MsgInformation,bn.mapPayload(a.id,dr)));break;case 4:dt.reply(bn.msgType(bq.MsgInformation,(dz=bn.makeReply(dr),bt.New(dz.from,dz.destination,dz.msgType,dz.subtype,dz.id,cY.stringify(((c1.Id())())(this.clientId)),dz.replier))));break;}},mapPayloadWrap:function(dr,ds){var dt;dt=null;return cr.Delay(function(){return cr.Bind(dr(ds.payload),function(du){return cr.Return(bn.mapPayload(function(){return du;},ds));});});},processReply:function(dr){this.waiting.Reply(dr.id,dr);},close:function(){var dr;dr=this.serverO;dr==null?void 0:(dr.$0.FsRoot_Library2_WebSockets_IServer$Close(),this.serverO=null);},reply:function(dr){var ds;ds=this.serverO;ds==null?void 0:ds.$0.FsRoot_Library2_WebSockets_IServer$Post(bn.destination(dr.from,bn.from(this.clientAddress,dr)));},set_Out:function(dr){this.out=dr;},SendMsg:function(dr){return this.sendMsg(dr);},get_ClientId:function(){return this.clientId;},get_EndPoint:function(){return this.wsEndPoint;},get_MBProcessId:function(){return this.getProcessId();},get_MBListeners:function(){return this.getListeners();},Dispose:function(){this.close();}},i,bz);bz.New=co.Ctor(function(dr,ds,dt){bz.New$1.call(this,co.Curried3(function(du,dv,dw){function dx(dz){}function dy(dz){return cr.Return(dz);}return cr.Bind(c5.ConnectStateful(function(dz){return cY.stringify((ck.j())(dz));},function(dz){return(cl.j())(cY.parse(dz));},c6.CreateRemote((((co.Curried3(function(dz,dA,dB){return dz("ws://"+cp.toSafe(dA)+"?ClientId="+cp.toSafe(dB));}))(a.id))(du))(dv),{$:1,$0:c3.JsonEncoding.Readable}),function(dz){var dA;return dw((dA={FsRoot_Library2_WebSockets_IServer$Post:function(dB){return dz.Post(dB);},FsRoot_Library2_WebSockets_IServer$Close:function(){return dz.get_Connection().close(1000);}},(i.New.call(dA),dA)));}),function(dz){return dy(dx(dz));});}),dr,ds,dt);},bz);bz.New$1=co.Ctor(function(dr,ds,dt,du){var dv,dw;dv=this;i.New.call(this);this.connectStateful=dr;this.clientId=ds;this.wsEndPoint=(dw=bn.extractEndPoint()+"/ws",du==null?dw:du.$0);this.clientAddress=new bo({$:0,$0:this.clientId});this.wsTimeout=dt==null?60000:dt.$0;this.out=function(dx){return function(dy){return dx(cp.toSafe(dy));};}(function(dx){cI.log(dx);});this.serverO=null;this.payloadProcessorO=null;this.waiting=new by.New(function(dx){(((co.Curried3(function(dy,dz,dA){return dy("Reply from '"+cp.toSafe(dz)+"': "+cp.toSafe(dA));}))(function(dy){cI.log(dy);}))(dx.from.get_txt()))(dx.payload);});this.checkServer=D.callA(function(dx){c.print(dx);},function(){var dx;dx=null;return cr.Delay(function(){(function(dy){return dy("getServer");}(function(dy){cI.log(dy);}));return cr.Combine(dv.serverO==null?(function(dy){return dy("getServer Connecting");}(function(dy){cI.log(dy);}),cr.Bind(dv.connectToWebSocketServer(),function(){return cr.Bind(cr.Sleep(200),function(){return cr.Return(null);});})):cr.Zero(),cr.Delay(function(){return cr.Return(j.ofOption(function(){return new d({$:0,$0:"could not connect to Server"});},dv.serverO));}));});});},bz);bn.extractEndPoint=function(){return cs.get(cx.SplitChars(c7.href.substring(c7.href.indexOf("//")+2),["/"],0),0);};bn.makeReply=function(dr){return bn.replier(bs.NoReply,bn.msgType(bq.MsgReply,dr));};bn.mapPayload=function(dr,ds){return bt.New(ds.from,ds.destination,ds.msgType,ds.subtype,ds.id,dr(ds.payload),ds.replier);};bn.msgId=function(dr,ds){return bt.New(ds.from,ds.destination,ds.msgType,ds.subtype,dr,ds.payload,ds.replier);};bn.replier=function(dr,ds){return bt.New(ds.from,ds.destination,ds.msgType,ds.subtype,ds.id,ds.payload,dr);};bn.subtype=function(dr,ds){return bt.New(ds.from,ds.destination,ds.msgType,dr,ds.id,ds.payload,ds.replier);};bn.msgType=function(dr,ds){return bt.New(ds.from,ds.destination,dr,ds.subtype,ds.id,ds.payload,ds.replier);};bn.destination=function(dr,ds){return bt.New(ds.from,dr,ds.msgType,ds.subtype,ds.id,ds.payload,ds.replier);};bn.from=function(dr,ds){return bt.New(dr,ds.destination,ds.msgType,ds.subtype,ds.id,ds.payload,ds.replier);};bn.MessageBrokerAddress=function(){ch.$cctor();return ch.MessageBrokerAddress;};bn.MessageBrokerId=function(){ch.$cctor();return ch.MessageBrokerId;};bC.New=function(dr,ds){return{Code:dr,Message:ds};};bD.New=function(dr,ds,dt){return{File:dr,Line:ds,Column:dt};};bE.New=function(dr,ds,dt,du){return{Name:dr,ReplacementText:ds,Glyph:dt,GlyphChar:du};};bF.New=function(dr,ds,dt){return{Signature:dr,Comment:ds,Footer:dt};};bG.New=function(dr,ds,dt,du){return{Name:dr,CanonicalTypeTextForSorting:ds,Display:dt,Description:du};};bH.New=function(dr,ds,dt,du){return{Tip:dr,TypeText:ds,Parameters:dt,IsStaticArguments:du};};bI.New=function(dr,ds){return{Name:dr,Type:ds};};bJ.New=function(dr,ds){return{OutputType:dr,Parameters:ds};};bK.New=function(dr,ds,dt){return{Name:dr,CurrentParameter:ds,Overloads:dt};};bL.New=function(dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB){return{FileName:dr,StartLine:ds,StartColumn:dt,EndLine:du,EndColumn:dv,IsFromDefinition:dw,IsFromAttribute:dx,IsFromComputationExpression:dy,IsFromDispatchSlotImplementation:dz,IsFromPattern:dA,IsFromType:dB};};bM.New=function(dr,ds){return{Name:dr,Uses:ds};};bN.New=function(dr,ds){return{Name:dr,Overloads:ds};};bO.New=function(dr,ds,dt){return{Fsc:dr,Fsi:ds,MSBuild:dt};};bP.New=function(dr,ds,dt,du,dv,dw,dx,dy){return{FileName:dr,StartLine:ds,EndLine:dt,StartColumn:du,EndColumn:dv,Severity:dw,Message:dx,Subcategory:dy};};bQ.New=function(dr,ds){return{File:dr,Errors:ds};};bR.New=function(dr){return{Kind:dr};};bS.New=function(dr,ds,dt,du,dv,dw,dx,dy){return{UniqueName:dr,Name:ds,Glyph:dt,GlyphChar:du,IsTopLevel:dv,File:dw,EnclosingEntity:dx,IsAbstract:dy};};bT.New=function(dr,ds){return{Declaration:dr,Nested:ds};};bU.New=function(dr,ds,dt,du,dv,dw){return{Namespace:dr,Name:ds,Type:dt,Line:du,Column:dv,MultipleNames:dw};};bV.New=function(dr,ds){return{Name:dr,Qualifier:ds};};bW.New=function(dr,ds,dt){return{Opens:dr,Qualifies:ds,Word:dt};};bX.New=function(dr){return{Text:dr};};bY.symbolUseProject=function(dr,ds,dt,du){return bY.FSAutocompleteCall("symboluseproject",function(dv){return dv.$==4?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.symbolUse=function(dr,ds,dt,du){return bY.FSAutocompleteCall("symboluse",function(dv){return dv.$==4?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.helpText=function(dr){return bY.FSAutocompleteCall("helptext",function(ds){return ds.$==2?{$:1,$0:ds.$0}:null;},{$:6,$0:{Symbol:dr}});};bY.declarations=function(dr,ds,dt){return bY.FSAutocompleteCall("declarations",function(du){return du.$==10?{$:1,$0:du.$0}:null;},{$:1,$0:{FileName:dr,Lines:ds,Version:dt}});};bY.findDeclaration=function(dr,ds,dt,du){return bY.FSAutocompleteCall("finddeclaration",function(dv){return dv.$==9?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.findTypeDecl=function(dr,ds,dt,du){return bY.FSAutocompleteCall("findtypedeclaration",function(dv){return dv.$==9?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.completion=function(dr,ds,dt,du,dv,dw){return bY.FSAutocompleteCall("completion",function(dx){return dx.$==3?{$:1,$0:dx.$0}:null;},{$:2,$0:{FileName:dt,SourceLine:dr,Line:du,Column:dv,Filter:dw,IncludeKeywords:ds}});};bY.signatureData=function(dr,ds,dt,du){return bY.FSAutocompleteCall("signatureData",function(dv){return dv.$==13?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.signature=function(dr,ds,dt,du){return bY.FSAutocompleteCall("signature",function(dv){return dv.$==12?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.toolTip=function(dr,ds,dt,du){return bY.FSAutocompleteCall("tooltip",function(dv){return dv.$==11?{$:1,$0:dv.$0}:null;},{$:3,$0:{FileName:dr,Line:ds,Column:dt,Filter:du}});};bY.parseCode=function(dr,ds,dt,du){return bY.FSAutocompleteCall("parse",function(dv){return dv.$==7?{$:1,$0:dv.$0}:null;},{$:0,$0:{FileName:dr,IsAsync:dt,Lines:ds,Version:du}});};bY.FSAutocompleteCall=function(dr,ds,dt){var du;du=e.asyncResult();return du.Run(du.Delay(function(){return du.Bind$1((new c9.New()).Async("testing:FsRoot.Library2+FsAutoComplete.FSAutocompleteCall0:-923365271",[dr,dt]),function(dv){var dw,dx;function dy(dz){return dz!=null;}dw=cs.partition(function(dz){return dy(ds(dz));},dv);dx=dw[1];return du.Bind(j.ofOption(function(){return new d({$:2,$0:dx});},cq.tryHead(cq.choose(ds,dw[0]))),function(dz){return du.Return([dz,dx]);});});}));};b0.annotationsV=function(){ch.$cctor();return ch.annotationsV;};b0.srcDir=function(){ch.$cctor();return ch.srcDir;};b0.set_srcDir=function(dr){ch.$cctor();ch.srcDir=dr;};b0.rootDir=function(){ch.$cctor();return ch.rootDir;};b0.set_rootDir=function(dr){ch.$cctor();ch.rootDir=dr;};b0.id=function(){ch.$cctor();return ch.id;};b1.expandParents=function(dr){b1.iterReader(w.op_BarGreaterGreater(S.pathRm(dr),function(ds){var dt;dt=cF.op_Subtraction(b1.collapsedV().Get(),new cF.New(ds));b1.collapsedV().Set(dt);}));};b1.toggleCollapse=function(dr){var ds;ds=((b1.collapsedV().Get().Contains(dr)?function(dt){return function(du){return du.Remove(dt);};}:function(dt){return function(du){return du.Add(dt);};})(dr))(b1.collapsedV().Get());b1.collapsedV().Set(ds);};b1.newSnippet=function(dr){var ds;ds=S.New("","",null);b1.iterReader(w.op_BarGreaterGreater(b1.addSnippetRm(ds),function(){b1.currentSnippetIdOV().Set({$:1,$0:ds.snpId});}));};b1.addSnippetRm=function(dr){var ds,dt,du;b1.snippets().Append(dr);ds=(dt=b1.hierarchy().Get(),cq.append([b1.treenode(dr.snpId)],dt));return w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(u.insertO((du=b1.currentSnippetIdOV().Get(),du==null?null:{$:1,$0:S.snippetORm(du.$0)})),function(dv){return dv==null?null:a.id(dv.$0);}),function(dv){return dv!=null&&dv.$==1?T.moveToSibling2(true,dr.snpId,dv.$0.snpId,ds):w.rtn(ds);}),cs.ofSeq),function(dv){b1.hierarchy().Set(dv);});};b1.setSnippetsGen=function(dr,ds){function dt(du){return b1.treenode(du.snpId);}b1.collapsedV().Set(ds);b1.snippets().Set(dr);b1.updateGeneration();b1.iterReader(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(u.sequenceSeq(cq.map(function(du){return w.op_BarGreaterGreater(S.parentORm(du),function(dv){return dv==null?{$:1,$0:du}:null;});},dr)),function(du){return cq.choose(a.id,du);}),function(du){return cq.map(dt,du);}),cs.ofSeq),function(du){b1.hierarchy().Set(du);}));};b1.updateGeneration=function(){var dr;b1.iterReader((dr=w.reader(),dr.Run(dr.Delay(function(){return dr.Bind(S.maxGenerationRm(),function(ds){b1.generation().Set(ds);return dr.Zero();});}))));};b1.moveNode=function(dr,ds){b1.iterReader(w.op_BarGreaterGreater(w.op_BarGreaterGreater(T.moveToSibling2(false,dr,ds,b1.hierarchy().Get()),cs.ofSeq),function(dt){b1.hierarchy().Set(dt);}));};b1.indentOut=function(dr){var ds,dt;ds=b1.currentSnippetIdOV().Get();ds==null?void 0:b1.iterReader(w.op_BarGreaterGreater(w.op_BarGreaterGreater((dt=b1.hierarchy().Get(),T.outdentNode(b1.treenode(ds.$0),dt)),cs.ofSeq),function(du){b1.hierarchy().Set(du);}));};b1.indentIn=function(dr){var ds,dt;ds=b1.currentSnippetIdOV().Get();ds==null?void 0:b1.iterReader(w.op_BarGreaterGreater(w.op_BarGreaterGreater((dt=b1.hierarchy().Get(),T.indentNode(b1.treenode(ds.$0),dt)),cs.ofSeq),function(du){b1.hierarchy().Set(du);}));};b1.deleteCurrentSnippet=function(dr){var ds,dt,du;ds=b1.currentSnippetIdOV().Get();ds==null?void 0:(dt=ds.$0,b1.iterReader(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater((du=b1.hierarchy().Get(),T.removeNodeOutdentChildren(b1.treenode(dt),du)),cs.ofSeq),function(dv){b1.hierarchy().Set(dv);}),function(){b1.snippets().RemoveByKey(dt);})));};b1.expandClassW=function(dr){var ds;ds=b1.snippets().v;return cK.Map2(function(){return b1.runReader(b1.handleError,b1.expandClassRm(dr));},b1.collapsedV().get_View(),ds);};b1.expandClassRm=function(dr){return w.op_GreaterGreaterEquals(S.childrenRm(dr),function(ds){return cq.isEmpty(ds)?w.rtn(""):w.op_BarGreaterGreater(b1.treenode(dr).isExpandedRm(),function(dt){return dt?"expanded":"collapsed";});});};b1.togglePredecessor=function(dr){var ds,dt;ds=cL.Lens(b1.currentSnippetV(),function(du){return du.snpPredIds;},function(du,dv){return Q.New(du.snpId,du.snpName,du.snpContent,du.snpParentIdO,dv,du.snpProperties,du.snpGeneration);});ds.Set((dt=ds.Get(),((ds.Get().Contains(dr)?function(du){return function(dv){return dv.Remove(du);};}:function(du){return function(dv){return dv.Add(du);};})(dr))(dt)));b1.clearPredsCache();};b1.isIncludedPredecessorW=function(dr){return cK.Map(function(ds){return b1.runReader(function(){return false;},w.op_BarGreaterGreater(S.uniquePredsRm(ds),function(dt){return cq.contains(dr,dt);}));},b1.codeSnippetW());};b1.isIndirectPredecessorW=function(dr){return cK.Map(function(ds){return b1.runReader(function(){return false;},w.op_BarGreaterGreater(S.uniquePredsRm(ds),function(dt){return cq.contains(dr,dt);}));},b1.currentSnippetW());};b1.treenode=function(dr){return U.New(function(){return dr;},function(){return w.rtn(!b1.collapsedV().Get().Contains(dr));},function(){return w.rtn(true);},function(){function ds(dt){return b1.treenode(dt.snpId);}return w.op_BarGreaterGreater(S.childrenRm(dr),function(dt){return cq.map(ds,dt);});},function(){return S.pathRm(dr);},function(){function ds(dt){return dt.snpParentIdO;}return w.op_BarGreaterGreater(w.op_BarGreaterGreater(S.snippetORm(dr),function(dt){return dt==null?null:ds(dt.$0);}),function(dt){return dt==null?null:{$:1,$0:b1.treenode(dt.$0)};});},function(ds){return w.op_BarGreaterGreater(b1.setChildrenRm(dr,ds),function(){return b1.treenode(dr);});});};b1.setChildrenRm=function(dr,ds){var dt;dt=w.reader();return dt.Run(dt.Delay(function(){var du,dv,dw,dx,dy,dz;du=cs.map(function(dA){return dA.id();},ds);cq.iter(function(dA){b1.setSnippet(dA);},cq.map(function(dA){return Q.New(dA.snpId,dA.snpName,dA.snpContent,{$:1,$0:dr},dA.snpPredIds,dA.snpProperties,dA.snpGeneration);},cq.filter(function(dA){return!cB.Equals(dA.snpParentIdO,{$:1,$0:dr})&&cs.contains(dA.snpId,du);},b1.snippets())));cq.iter(function(dA){b1.setSnippet(dA);},cq.map(function(dA){return Q.New(dA.snpId,dA.snpName,dA.snpContent,null,dA.snpPredIds,dA.snpProperties,dA.snpGeneration);},cq.filter(function(dA){return cB.Equals(dA.snpParentIdO,{$:1,$0:dr})&&!cs.contains(dA.snpId,du);},b1.snippets())));b1.clearPredsCache();dv=cs.partition(function(dA){return b1.isDescendantOf(dr,dA.snpId);},cs.ofSeq((b1.snippets())["var"].Get()));dw=dv[1];dx=dv[0];dy=cs.findIndex(function(dA){return cB.Equals(dA.snpId,dr);},dw);dz=cs.ofSeq(cq.delay(function(){return cq.append(cy.array(dw,{$:1,$0:0},{$:1,$0:dy}),cq.delay(function(){return cq.append(cq.collect(function(dA){return cq.append([cq.find(function(dB){return cB.Equals(dB.snpId,dA);},dx)],cq.delay(function(){return cq.filter(function(dB){return b1.isDescendantOf(dA,dB.snpId);},dx);}));},du),cq.delay(function(){return cy.array(dw,{$:1,$0:dy+1},null);}));}));}));b1.snippets().Set(dz);return dt.Zero();}));};b1.SaveAsClassW=function(){ch.$cctor();return ch.SaveAsClassW;};b1.hasChangedW=function(dr){return cK.Map(function(ds){return ds<dr.snpGeneration;},b1.generation().get_View());};b1.codeStartsW=function(){ch.$cctor();return ch.codeStartsW;};b1.FsCodeW=function(){ch.$cctor();return ch.FsCodeW;};b1.codeAndStartsW=function(){ch.$cctor();return ch.codeAndStartsW;};b1.getHierarchyW=function(){ch.$cctor();return ch.getHierarchyW;};b1.findSnippetV=function(dr){return new c_.New(b1.findSnippetW(dr),function(ds){b1.setSnippet(ds);});};b1.findSnippetW=function(dr){return cK.Map(function(ds){var dt;dt=S.defaultSnippet();return ds==null?dt:ds.$0;},b1.snippets().TryFindByKeyAsView(dr));};b1.codeSnippetClassW=function(dr){return cK.Map(function(ds){return cB.Equals({$:1,$0:dr},ds)?"codeSnippet":"";},b1.codeSnippetIdOV().get_View());};b1.selectedClassW=function(dr){return cK.Map(function(ds){return cB.Equals({$:1,$0:dr},ds)?"selected":"";},b1.currentSnippetIdOV().get_View());};b1.currentSnippetV=function(){ch.$cctor();return ch.currentSnippetV;};b1.codeSnippetW=function(){ch.$cctor();return ch.codeSnippetW;};b1.currentSnippetW=function(){ch.$cctor();return ch.currentSnippetW;};b1.CurrentSnippetIdW=function(){ch.$cctor();return ch.CurrentSnippetIdW;};b1.isDescendantOf=function(dr,ds){var dt,du,dv;return cB.Equals(ds,dr)?false:(dt=(du=(b1.getParentIdO())(ds),du==null?null:{$:1,$0:(dv=du.$0,cB.Equals(dv,dr)||b1.isDescendantOf(dr,dv))}),dt==null?false:dt.$0);};b1.getParentIdO=function(){ch.$cctor();return ch.getParentIdO;};b1.getParentIdONotMemo=function(dr){var ds;ds=b1.snippets().TryFindByKey(dr);return ds==null?null:ds.$0.snpParentIdO;};b1.getSnippetsGen=function(){return[(b1.snippets())["var"].Get(),b1.generation().Get(),b1.collapsedV().Get()];};b1.setSnippet=function(dr){if(!cB.Equals(dr.snpId.get_Id(),"00000000-0000-0000-0000-000000000000"))b1.snippets().Append(Q.New(dr.snpId,dr.snpName,dr.snpContent,dr.snpParentIdO,dr.snpPredIds,dr.snpProperties,b1.generation().Get()+1));};b1.setCurrentSnippetIdO=function(dr){b1.currentSnippetIdOV().Set(dr);};b1.runReader=function(dr,ds){return j.defaultWith(dr,b1.runReaderResult(ds));};b1.runReaderResult=function(dr){return u.run(b1.snippetsColl(),dr);};b1.iterReader=function(dr){u.iter(function(ds){b1.handleError(ds);},a.ignore,b1.snippetsColl(),dr);};b1.handleError=function(dr){throw new a.Error(a.String(dr));};b1.snippetsColl=function(){return R.New(b1.generation().Get(),(b1.snippets())["var"].Get(),function(dr){return b1.snippets().TryFindByKey(dr);},b1.predsCache,b1.reducCache,b1.prepCode);};b1.prepCode=function(dr){return cx.Replace(cx.Replace(dr.snpContent,"##"+"FSHARPSTATION_ID"+"##",b0.id()),"##"+"FSHARPSTATION_ENDPOINT"+"##",self.location.href);};b1.clearPredsCache=function(){(b1.clearPreds())();(b1.clearReduc())();(b1.clearParent())();};b1.clearParent=function(){ch.$cctor();return ch.clearParent;};b1.parentCache=function(){ch.$cctor();return ch.parentCache;};b1.clearReduc=function(){ch.$cctor();return ch.clearReduc;};b1.reducCache=function(){ch.$cctor();return ch.reducCache;};b1.clearPreds=function(){ch.$cctor();return ch.clearPreds;};b1.predsCache=function(){ch.$cctor();return ch.predsCache;};b1.collapsedV=function(){ch.$cctor();return ch.collapsedV;};b1.codeSnippetIdOV=function(){ch.$cctor();return ch.codeSnippetIdOV;};b1.currentSnippetIdOV=function(){ch.$cctor();return ch.currentSnippetIdOV;};b1.generation=function(){ch.$cctor();return ch.generation;};b1.hierarchy=function(){ch.$cctor();return ch.hierarchy;};b1.snippets=function(){ch.$cctor();return ch.snippets;};b3.DragNone={$:0};b2.getDragNIdO=function(dr){var ds;return b2.drag().$==1&&(!cB.Equals(b2.drag().$0,dr)&&(ds=b2.drag().$0,true))?{$:1,$0:ds}:null;};b2.setDragNode=function(dr){b2.set_drag({$:1,$0:dr});};b2.setDragNone=function(){b2.set_drag(b3.DragNone);};b2.drag=function(){ch.$cctor();return ch.drag;};b2.set_drag=function(dr){ch.$cctor();ch.drag=dr;};b4.TemplatesFileName=function(){ch.$cctor();return ch.TemplatesFileName;};b4.rootdir=function(){ch.$cctor();return ch.rootdir;};b5.render=function(){var dr,ds,dt,du;return(dr=(ds=b5.snippets(),dc.Make().WithHole({$:0,$0:"snippets",$1:ds})),(dt=dd.CompleteHoles(dr.k,dr.h,[]),(du=new de.New(dt[1],cj.snippetlist(dt[0])),(dr.i=du,du)))).get_Doc();};b5.snippets$3862$40=function(dr){return function(ds){var dt;ds.Event.preventDefault();dt=b2.getDragNIdO(dr);dt==null?void 0:b1.moveNode(dt.$0,dr);};};b5.snippets$3861$40=function(dr){return function(ds){if(b2.getDragNIdO(dr)!=null)ds.Event.preventDefault();};};b5.snippets$3860$40=function(dr){return function(ds){b2.setDragNode(dr);ds.Event.stopPropagation();};};b5.snippets$3859$40=function(dr){return function(){b1.toggleCollapse(dr);};};b5.snippets$3858$40=function(dr){return function(){b1.togglePredecessor(dr);};};b5.snippets$3857$40=function(dr){var ds;ds=cK.Map(function(dt){return""!==dt;},b1.selectedClassW(dr));return function(dt){return b5.scrollIntoView(ds,dt);};};b5.snippets$3856$40=function(dr){return function(){b1.setCurrentSnippetIdO({$:1,$0:dr});};};b5.snippets=function(){function dr(ds,dt){var du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN;function dO(dP){return dP?"ErrorMsg":"";}du=(dv=cK.get_Do(),cK.Bind(function(dP){return cK.Bind(function(dQ){return cK.Const((dQ?"*":"")+S.snippetName(dP.snpName,dP.snpContent));},b1.hasChangedW(dP));},b1.findSnippetW(ds)));dw=cK.Apply(cK.Map2(function(dP,dQ){return function(dR){return dP.snpPredIds.Contains(ds)?"direct-predecessor":dQ?"indirect-predecessor":dR?"included-predecessor":"";};},b1.currentSnippetV().get_View(),b1.isIndirectPredecessorW(ds)),b1.isIncludedPredecessorW(ds));dx=(dy=b0.annotationsV().get_View(),cK.Map((dz=(dA=(dB=ds.get_Id(),a.String(dB)),function(dP){return A.contains$1(dA,dP);}),function(dP){return dO(dz(dP));}),dy));return(dC=(dD=(dE=(dF=(dG=(dH=(dI=(dJ=cK.Map(function(dP){return""!==dP;},b1.selectedClassW(ds)),function(dP){return b5.scrollIntoView(dJ,dP);}),(dK=(dL=b1.expandClassW(ds),dc.Make().WithHole({$:2,$0:"name",$1:du}).WithHole({$:1,$0:"indent",$1:a.String(dt)}).WithHole({$:2,$0:"parent",$1:dL})).WithHole({$:2,$0:"predecessor",$1:dw}).WithHole({$:2,$0:"selected",$1:cK.Map2(function(dP,dQ){return cx.concat(" ",ct.ofArray([dP,dQ]));},b1.selectedClassW(ds),b1.codeSnippetClassW(ds))}).WithHole({$:2,$0:"errormsg",$1:dx}),dK.WithHole(dd.EventQ2(dK.k,"select",function(){return dK.i;},function(){b1.setCurrentSnippetIdO({$:1,$0:ds});}))).WithHole({$:7,$0:"afterrender",$1:dI})),dH.WithHole(dd.EventQ2(dH.k,"togglepred",function(){return dH.i;},function(){b1.togglePredecessor(ds);}))),dG.WithHole(dd.EventQ2(dG.k,"togglecollapse",function(){return dG.i;},function(){b1.toggleCollapse(ds);}))),dF.WithHole(dd.EventQ2(dF.k,"drag",function(){return dF.i;},function(dP){b2.setDragNode(ds);dP.Event.stopPropagation();}))),dE.WithHole(dd.EventQ2(dE.k,"dragover",function(){return dE.i;},function(dP){if(b2.getDragNIdO(ds)!=null)dP.Event.preventDefault();}))),dD.WithHole(dd.EventQ2(dD.k,"drop",function(){return dD.i;},function(dP){var dQ;dP.Event.preventDefault();dQ=b2.getDragNIdO(ds);dQ==null?void 0:b1.moveNode(dQ.$0,ds);}))),(dM=dd.CompleteHoles(dC.k,dC.h,[]),(dN=new de.New(dM[1],cj.snippet(dM[0])),(dC.i=dN,dN)))).get_Doc();}return cP.Convert(function(ds){return dr(ds[0],ds[1]);},b1.getHierarchyW());};b5.scrollIntoView=function(dr,ds){cK.Sink(function(dt){if(dt)ds.scrollIntoViewIfNeeded();},dr);};b6.render$3899$34=function(){return function(){b6.addProperty();};};b6.render=function(){var dr,ds,dt,du,dv;return(dr=(ds=(dt=b6.properties(),dc.Make().WithHole({$:0,$0:"properties",$1:dt})),ds.WithHole(dd.EventQ2(ds.k,"addproperty",function(){return ds.i;},function(){b6.addProperty();}))),(du=dd.CompleteHoles(dr.k,dr.h,[]),(dv=new de.New(du[1],cj.propertytable(du[0])),(dr.i=dv,dv)))).get_Doc();};b6.properties$3892$33=function(dr){return function(){b6.remProperty(dr);};};b6.properties=function(){var dr;function ds(du,dv){cs.set(dr.Get(),du,[dv,(cs.get(dr.Get(),du))[1]]);return dr.Set(dr.Get());}function dt(du,dv){cs.set(dr.Get(),du,[(cs.get(dr.Get(),du))[0],dv]);return dr.Set(dr.Get());}dr=cL.Lens(b1.currentSnippetV(),function(du){return du.snpProperties;},function(du,dv){return Q.New(du.snpId,du.snpName,du.snpContent,du.snpParentIdO,du.snpPredIds,dv,du.snpGeneration);});return cP.Convert(function(du){var dv,dw,dx,dy,dz,dA;dv=new c_.New(cK.Map(function(dB){return(cs.get(dB,du))[0];},dr.get_View()),function(dB){return ds(du,dB);});dw=new c_.New(cK.Map(function(dB){return(cs.get(dB,du))[1];},dr.get_View()),function(dB){return dt(du,dB);});return(dx=(dy=dc.Make().WithHole({$:8,$0:"name",$1:dv}).WithHole({$:8,$0:"value",$1:dw}),dy.WithHole(dd.EventQ2(dy.k,"remove",function(){return dy.i;},function(){b6.remProperty(du);}))),(dz=dd.CompleteHoles(dx.k,dx.h,[["name",0],["value",0]]),(dA=new de.New(dz[1],cj.property(dz[0])),(dx.i=dA,dA)))).get_Doc();},cK.Map(function(du){return cs.ofSeq(cw.range(0,cs.length(du)-1));},dr.get_View()));};b6.remProperty=function(dr){var ds;b1.currentSnippetV().Set((ds=b1.currentSnippetV().Get(),Q.New(ds.snpId,ds.snpName,ds.snpContent,ds.snpParentIdO,ds.snpPredIds,cy.array(b1.currentSnippetV().Get().snpProperties,{$:1,$0:0},{$:1,$0:dr-1}).concat(cy.array(b1.currentSnippetV().Get().snpProperties,{$:1,$0:dr+1},null)),ds.snpGeneration)));};b6.addProperty=function(){var dr;b1.currentSnippetV().Set((dr=b1.currentSnippetV().Get(),Q.New(dr.snpId,dr.snpName,dr.snpContent,dr.snpParentIdO,dr.snpPredIds,b1.currentSnippetV().Get().snpProperties.concat([["",""]]),dr.snpGeneration)));};b8=b7.HoverProvider=co.Class({provideHover:function(dr,ds,dt){var du;return W.ofAsyncResult((du=e.asyncResult(),du.Run(du.Delay(function(){var dv;dv=b7.getIndentAndFirst();return du.Bind$1(bY.toolTip(b7.fileName(),ds.lineNumber+dv[1],ds.column+dv[0],""),function(dw){return p["AsyncResultBuilder.Bind"](du,b7.overDescriptions(dw[0]),function(dx){return du.Return(bi.New(cs.ofSeq(cq.map(function(dy){return bf.New((c.print(dy),dy),true);},dx)),null));});});}))));}},i,b8);b8.New=co.Ctor(function(dr){i.New.call(this);},b8);b9=b7.CompletionItemProvider=co.Class({resolveCompletionItem:function(dr,ds){var dt;function du(dw){return dw.$==1?cw.FailWith((function(dx){return function(dy){return dx(ci.p$8(dy));};}(a.id))(dw.$0)):dw.$0;}function dv(dw){return cr.Return(dw);}return dg.OfAsync(cr.Bind((dt=e.asyncResult(),dt.Run(dt.Delay(function(){return dt.Bind$1(bY.helpText(dr.label),function(dw){return dt.Return(bh.New(dr.kind,dr.label,cx.concat("\n",cq.collect(function(dx){return ct.ofSeq(cq.delay(function(){return cq.append(!(!dx.Signature)?[dx.Signature]:[],cq.delay(function(){return cq.append(!(!dx.Comment)?[dx.Comment]:[],cq.delay(function(){return!(!dx.Footer)?[dx.Footer]:[];}));}));}));},cq.collect(a.id,dw[0].Overloads)))));});}))),function(dw){return dv(du(dw));}));},provideCompletionItems:function(dr,ds,dt,du){var dv;function dw(dy){return dy.$==1?cw.FailWith((function(dz){return function(dA){return dz(ci.p$8(dA));};}(a.id))(dy.$0)):dy.$0;}function dx(dy){return cr.Return(dy);}return dg.OfAsync(cr.Bind((dv=e.asyncResult(),dv.Run(dv.Delay(function(){var dy,dz;dy=b7.getIndentAndFirst();dz=dy[0];return dv.Bind$1(bY.completion(cx.replicate(dz," ")+dr.getLineContent(ds.lineNumber),true,b7.fileName(),ds.lineNumber+dy[1],ds.column+dz,"Contains"),function(dA){return dv.Return(cs.map(function(dB){return bh.New(b7.convertGlyphChar(dB.GlyphChar),dB.Name,"");},dA[0]));});}))),function(dy){return dx(dw(dy));}));}},i,b9);b9.New=co.Ctor(function(dr){i.New.call(this);},b9);b_=b7.DefinitionProvider=co.Class({provideDefinition:function(dr,ds,dt){var du;function dv(dx){return dx.$==1?cw.FailWith((function(dy){return function(dz){return dy(ci.p$8(dz));};}(a.id))(dx.$0)):dx.$0;}function dw(dx){return cr.Return(dx);}return dg.OfAsync(cr.Bind((du=e.asyncResult(),du.Run(du.Delay(function(){var dx;dx=b7.getIndentAndFirst();return du.Bind$1(bY.findDeclaration(b7.fileName(),ds.lineNumber+dx[1],ds.column+dx[0],""),function(dy){var dz,dA,dB,dC,dD,dE,dF,dG;dz=dy[0];dA=b7.getSnipIdIndentAndFirst(dz.Line);dB=dA[0];dC=dA[1];dD=dA[2];dE=(dF="snpId:"+(dG=dB.get_Id(),a.String(dG)),self.monaco.Uri.parse(dF));b7.getSnippetModel(dB);return du.Return(bb.New($.New(dz.Column-dC,dz.Column-dC,dz.Line-dD,dz.Line-dD),dE));});}))),function(dx){return dw(dv(dx));}));}},i,b_);b_.New=co.Ctor(function(dr){i.New.call(this);},b_);b$.New=function(dr,ds){return{fontSize:dr,lineHeight:ds};};ca.New=function(dr,ds){return{setEditor:dr,createModelReference:ds};};b7["goto"]=function(dr,ds,dt){var du;du=null;return cr.Delay(function(){var dv,dw;dv=(dw=b7.editorConfigO(),dw==null?null:dw.$0.editorO);return dv!=null&&dv.$==1?cr.Bind(b7.gotoEditor(dv.$0,dr,ds,dt),function(){return cr.Return(null);}):cr.Zero();});};b7.getEditorConfigO=function(){var dr;dr={$:1,$0:b7.monacoNew(cL.Lens(b1.currentSnippetV(),function(ds){return ds.snpContent;},function(ds,dt){return Q.New(ds.snpId,ds.snpName,dt,ds.snpParentIdO,ds.snpPredIds,ds.snpProperties,ds.snpGeneration);}),{$:1,$0:cK.Map2(b7.transformAnnotations,b1.currentSnippetW(),b0.annotationsV().get_View())},null,null)};b7.set_editorConfigO(dr);return dr;};b7.editorConfigO=function(){ch.$cctor();return ch.editorConfigO;};b7.set_editorConfigO=function(dr){ch.$cctor();ch.editorConfigO=dr;};b7.parse=function(dr,ds){var dt;m.iterA(function(du){c.print(du);},function(){c.print();},(dt=e.asyncResult(),dt.Run(dt.Delay(function(){var du,dv;du="Parsing...\n"+A.skipFirstLine$1(b0.annotationsV().Get());b0.annotationsV().Set(du);b7.startsV().Set(ds);dv=A.splitByChar$1("\n",dr);b7.set_fileName(N.getSourceDir(b0.srcDir(),dv)+"/"+b0.id()+".fsx");return dt.Bind$1(bY.parseCode(b7.fileName(),dv,true,0),function(dw){var dx;dx=cx.concat("\n",cq.append(ct.ofArray(["Parsed!"]),cq.map(function(dy){var dz,dA,dB,dC,dD;function dE(dF,dG){return dy.StartLine>dG[1]&&dy.StartLine<=dG[2];}dz=(dA=cq.tryFind(function(dF){return dE(dF[0],dF[1]);},ds),(b7.defaultStart())(dA));dB=dz[1][0];dC=dz[1][1];return((((((((((co.Curried(function(dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO){return dF(cp.toSafe(dG)+" ("+a.String(dH)+", "+a.String(dI)+") - ("+a.String(dJ)+", "+a.String(dK)+") "+cp.toSafe(dL)+"("+cp.toSafe(dM)+") \""+cp.toSafe(dN)+": "+cp.toSafe(dO)+"\".");},10))(a.id))(dy.Severity==="Error"?"Err":"Warn"))(dy.StartLine-dC))(dy.StartColumn-dB))(dy.EndLine-dC))(dy.EndColumn-dB))(dz[0][1]))((dD=dz[0][0].get_Id(),a.String(dD))))(dy.Subcategory))(dy.Message);},dw[0].Errors)));b0.annotationsV().Set(dx);cq.iter(function(dy){c.print(dy);},dw[1]);return dt.Zero();});}))));};b7.monacoNew=function(dr,ds,dt,du){var dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK;dI=_9.newVar(dr);dA=dI.editorO;dB=b7.newPojo([["fontSize",12],["lineHeight",14]]);dJ=a.require("vs/editor/standalone/browser/standaloneServices");dK=new dJ.StaticServices.codeEditorService._factory();dK.openCodeEditor=b7.openCodeEditor;dH=dK;dG=["codeEditorService",dH];dE=[dG,["textModelResolverService",b7.textModelResolverService()]];dC=b7.newPojo(dE);dw=bk.New(dI["var"],dI.onChange,dI.onRender,dA,dI.disabled,dB,dC);return _9.onRender(function(dL){var dM,dN,dO,dP;function dQ(dU,dV,dW){return dN.provideHover(dU,dV,dW);}function dR(dU,dV,dW,dX){return dO.provideCompletionItems(dU,dV,dW,dX);}function dS(dU,dV){return dO.resolveCompletionItem(dU,dV);}function dT(dU,dV,dW){return dP.provideDefinition(dU,dV,dW);}dM=dL.getModel();self.monaco.editor.setModelLanguage(dM,"fsharp");self.monaco.editor.setTheme("vs");dN=new b8.New(dL);dO=new b9.New(dL);dP=new b_.New(dL);c.print(function(dU){return dQ(dU[0],dU[1],dU[2]);});c.print(function(dU){return dR(dU[0],dU[1],dU[2],dU[3]);});c.print(function(dU){return dS(dU[0],dU[1]);});c.print(function(dU){return dT(dU[0],dU[1],dU[2]);});self.monaco.languages.registerHoverProvider("fsharp",dN);self.monaco.languages.registerCompletionItemProvider("fsharp",dO);self.monaco.languages.registerDefinitionProvider("fsharp",dP);ds==null?void 0:cK.Sink(function(dU){var dV;dV=dL.getModel();self.monaco.editor.setModelMarkers(dV,"annotations",dU);},ds.$0);},dw);};b7.textModelResolverService=function(){var dr;dr=null;return ca.New(function(ds){dr={$:1,$0:ds};},function(ds){var dt;return dg.OfAsync((dt=null,cr.Delay(function(){var du,dv,dw,dx;dw=b7.getSnippetModel(ds);dx=self.require("vs/base/common/lifecycle");dv=new dx.ImmortalReference(dw);return cr.Return(dv);})));});};b7.openCodeEditor=function(dr,ds,dt){var du;return dg.OfAsync((du=null,cr.Delay(function(){var dv,dw;dv=dr.resource.path;dw=(B.Guid$1())(dv);return dw!=null&&dw.$==1?cr.Bind(b7.gotoEditor(ds,new P({$:0,$0:dw.$0}),dr.options.selection.startLineNumber,dr.options.selection.startColumn),function(){return cr.Return(ds);}):cr.Return(null);})));};b7.gotoEditor=function(dr,ds,dt,du){var dv;dv=null;return cr.Delay(function(){b1.expandParents(ds);b1.setCurrentSnippetIdO({$:1,$0:ds});return cr.Bind(cr.Sleep(200),function(){dr.focus();dr.setPosition(_.New(du,dt));dr.revealPositionInCenter(_.New(du,dt));return cr.Zero();});});};b7.newPojo=function(dr){var ds,dt;function du(dw,dx){return function(dy){return b7.addProp(dw,dx,dy);};}function dv(dw){}ds={};cq.iter((dt=function(dw){return(function(dx){return du(dx[0],dx[1]);}(dw))(ds);},function(dw){return dv(dt(dw));}),dr);return ds;};b7.addProp=function(dr,ds,dt){dt[dr]=ds;return dt;};b7.transformAnnotations=function(dr,ds){var dt,du;function dv(dw,dx,dy,dz,dA,dB,dC){var dD;return!cB.Equals((dD=(B.parseGuidO$1())(dB),dD==null?null:{$:1,$0:new P({$:0,$0:dD.$0})}),{$:1,$0:dr.snpId})?null:{$:1,$0:bg.New(dy,dA,dx,dz,dw==="Err"?8:dw==="Warn"?4:dw==="Hint"?1:2,dC)};}dt="(Err|Warn|Info|Hint) \\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*\\("+V.rexGuid$1()+"\\) \"([^\"]+?)\"\\.";return cs.choose(function(dw){return dv(dw[0],dw[1],dw[2],dw[3],dw[4],dw[5],dw[6]);},cs.choose(function(dw){var dx,dy,dz;return(dy=V.REGEX$2(dt,"",dw),dy!=null&&dy.$==1&&((dz=dy.$0,!cB.Equals(dz,null)&&dz.length===8)&&(dx=[cs.get(dy.$0,3),cs.get(dy.$0,2),cs.get(dy.$0,6),cs.get(dy.$0,7),cs.get(dy.$0,5),cs.get(dy.$0,4),cs.get(dy.$0,1)],true)))?{$:1,$0:[dx[6],cw.toInt(a.Number(dx[1])),cw.toInt(a.Number(dx[0])),cw.toInt(a.Number(dx[5])),cw.toInt(a.Number(dx[4])),dx[2],dx[3]]}:null;},(du=V.REGEX$2(dt,"g",ds),du!=null&&du.$==1?du.$0:[])));};b7.convertGlyphChar=function(dr){return dr==="C"?6:dr==="E"?12:dr==="S"?11:dr==="I"?7:dr==="N"?8:dr==="M"?1:dr==="P"?9:dr==="F"?4:dr==="T"?6:dr==="K"?13:0;};b7.fileName=function(){ch.$cctor();return ch.fileName;};b7.set_fileName=function(dr){ch.$cctor();ch.fileName=dr;};b7.overDescriptions=function(dr){return g.sequenceSeq(cq.collect(function(ds){return ct.ofSeq(cq.delay(function(){return cq.append(!(!ds.Signature)?[cr.Return("```\n"+ds.Signature+"\n```")]:[],cq.delay(function(){function dt(du){return cr.Return(du);}return cq.append(!(!ds.Comment)?[cr.Bind((new c9.New()).Async("testing:FsRoot.FSharpStation+Markdown.createCommentBlock:-1840423385",[ds.Comment]),function(du){return dt(b7.fixMarkDown(du));})]:[],cq.delay(function(){return!(!ds.Footer)?[cr.Return(b7.fixMarkDown(ds.Footer))]:[];}));}));}));},cq.collect(a.id,dr)));};b7.fixMarkDown=function(dr){return cx.concat("\n\n",cq.map(function(ds){var dt;dt=cq.length(cq.takeWhile(function(du){return" "===du;},ds));return cx.replicate(dt,"&nbsp;")+cy.string(ds,{$:1,$0:dt},null);},cq.map(function(ds){return cx.Replace(ds,"\u0009","- ");},A.splitByChar$1("\n",dr))));};b7.getSnippetModel=function(dr){var ds,dt,du;ds=(dt="snpId:"+(du=dr.get_Id(),a.String(du)),self.monaco.Uri.parse(dt));return b7.getModelUri(b1.runReader(function(dv){return cw.FailWith(a.String(dv));},S.snippetRm(dr)).snpContent,ds);};b7.getModelUri=function(dr,ds){var dt,du,dv;dt=(du=(dv=self.monaco.editor.getModel(ds),!dv?null:{$:1,$0:dv}),du==null?self.monaco.editor.createModel("","fsharp",ds):du.$0);dt.getValue()!==dr?dt.setValue(dr):void 0;return dt;};b7.getSnipIdIndentAndFirst=function(dr){var ds,dt;function du(dv,dw){return dr>=dw[1]&&dr<=dw[2];}ds=(dt=cq.tryFind(function(dv){return du(dv[0],dv[1]);},b7.startsV().Get()),(b7.defaultStart())(dt));return[ds[0][0],ds[1][0],ds[1][1]];};b7.getIndentAndFirst=function(){var dr,ds,dt,du;function dv(dy){return dy[0];}function dw(dy){return dy[0];}function dx(dy){return cB.Equals(dr,dy);}dr=b1.currentSnippetV().Get().snpId;ds=(dt=cq.tryFind((du=function(dy){return dw(dv(dy));},function(dy){return dx(du(dy));}),b7.startsV().Get()),(b7.defaultStart())(dt));return[ds[1][0],ds[1][1]];};b7.defaultStart=function(){ch.$cctor();return ch.defaultStart;};b7.startsV=function(){ch.$cctor();return ch.startsV;};cb.jumpToRef=function(dr){var ds,dt;function du(dv,dw,dx){return dt>=dw&&dt<dx?{$:1,$0:dv}:null;}ds=dr.value;dt=dr.selectionStart;cb.jumpToLine(cq.pick(function(dv){return du(dv[0],dv[1],dv[2]);},(cq.mapFold(function(dv,dw){return[[dw,dv,dv+dw.length+1],dv+dw.length+1];},0,cx.SplitChars(ds,["\n"],0)))[0]));};cb.jumpToLine=function(dr){var ds,dt,du,dv,dw;ds=V.REGEX$2(cb.rexGuid(),"",dr);ds!=null&&ds.$==1?(dt=ds.$0,!cB.Equals(dt,null)&&dt.length===6)?(du=cs.get(ds.$0,2),dv=cs.get(ds.$0,5),dw=cs.get(ds.$0,1),cr.Start(b7["goto"](new P({$:0,$0:dv}),cw.toInt(a.Number(dw)),cw.toInt(a.Number(du))),null)):void 0:void 0;};cb.rexGuid=function(){ch.$cctor();return ch.rexGuid$1;};cd.New=function(dr,ds,dt){return{snippets:dr,generation:ds,collapsed:dt};};cc.serModel=function(){ch.$cctor();return ch.serModel;};cc.getModel=function(dr,ds,dt){return cd.New(cs.ofSeq(dr),ds,dt);};cc.serSnippet=function(){ch.$cctor();return ch.serSnippet;};cc.serSnippetId=function(){ch.$cctor();return ch.serSnippetId;};ce.saveAs=function(){var dr,ds,dt,du;dr=(ds=cq.last(cx.SplitChars(ce.fileName().Get(),["/","\\"],0)),ds===""?"noname.snippets":ds);a.saveAs(new a.Blob([(dt=(du=b1.getSnippetsGen(),cc.getModel(du[0],du[1],du[2])),(cc.serModel())[0](dt))],{type:"text/plain;charset=utf-8"}),dr);b1.updateGeneration();};ce.loadTextFile=function(dr){var ds,dt;if(ce.canLoad()){ds=dr.files;ds.length>0?(dt=new a.FileReader(),dt.onload=function(du){return ce.parseText(du.target.result);},ce.fileName().Set(ds.item(0).name),dt.readAsText(ds.item(0))):void 0;}};ce.parseText=function(dr){var ds,dt;try{ds=(dt=cY.parse(dr),(cc.serModel())[1](dt));b1.setSnippetsGen(ds.snippets,ds.collapsed);}catch(du){a.alert(a.String(du));((function(dv){return function(dw){return dv(cp.prettyPrint(dw));};}(function(dv){cI.log(dv);}))(du));}};ce.canLoad=function(){return cB.Equals(cK.TryGet(b1.SaveAsClassW()),{$:1,$0:""})||a.confirm("Changes have not been saved, do you really want to load?");};ce.fileName=function(){ch.$cctor();return ch.fileName$1;};cf.importFile=function(dr){var ds,dt;if(ce.canLoad()){ds=dr.files;ds.length>0?(dt=new a.FileReader(),dt.onload=function(du){return cf.parseText(du.target.result);},dt.readAsText(ds.item(0))):void 0;}};cf.parseText=function(dr){var ds;try{b1.setSnippetsGen((ds=cY.parse(dr),(cf.serSnippets())[1](ds)),new cF.New$1(null));}catch(dt){a.alert(a.String(dt));((function(du){return function(dv){return du(cp.prettyPrint(dv));};}(function(du){cI.log(du);}))(dt));}};cf.serSnippets=function(){ch.$cctor();return ch.serSnippets;};cf.serSnippet2=function(){ch.$cctor();return ch.serSnippet2;};cf.serSnippetId2=function(){ch.$cctor();return ch.serSnippetId2;};cg.mainProgram=function(){var dr;dh.plugIns().Append(di.New("FSharpStation",[dh.newVar("fileName",ce.fileName()),dh.newVar("SnippetName",cL.Lens(b1.currentSnippetV(),function(ds){return ds.snpName;},function(ds,dt){return Q.New(ds.snpId,dt,ds.snpContent,ds.snpParentIdO,ds.snpPredIds,ds.snpProperties,ds.snpGeneration);})),dh.newVar("Content",cL.Lens(b1.currentSnippetV(),function(ds){return ds.snpContent;},function(ds,dt){return Q.New(ds.snpId,ds.snpName,dt,ds.snpParentIdO,ds.snpPredIds,ds.snpProperties,ds.snpGeneration);})),dh.newVar("Output",cg.outputMsgs()),dh.newVar("Parser",b0.annotationsV())],[dh.newViw("FsCode",b1.FsCodeW()),dh.newViw("SaveNeeded",b1.SaveAsClassW())],[dh.newDoc("mainDoc",dj.Create(cg.mainDoc)),dh.newDoc("editor",dj.Create(function(){var ds,dt,du;return cP.Element("div",[],[(ds=(dt=b7.getEditorConfigO(),dt==null?null:{$:1,$0:_9.render(dt.$0)}),(du=cP.get_Empty(),ds==null?du:ds.$0))]);})),dh.newDoc("Snippets",dj.Create(b5.render)),dh.newDoc("Properties",dj.Create(b6.render)),dh.newDoc("ButtonsRight",dj.Create(cg.buttonsRight))],[dh.newAct("AddSnippet",function(){b1.newSnippet();}),dh.newAct("RemoveSnippet",function(){cg.deleteSnippet();}),dh.newAct("IndentIn",function(){b1.indentIn();}),dh.newAct("IndentOut",function(){b1.indentOut();}),dh.newAct("AddProperty",function(){b6.addProperty();}),dh.newAct("SaveAs",function(){ce.saveAs();}),dh.newAct("RunFS",function(){cg.runFsCode();}),dh.newActF("LoadFile",{$:1,$0:function(ds){ce.loadTextFile(ds);},$1:"FileElement"}),dh.newActF("Import",{$:1,$0:function(ds){cf.importFile(ds);},$1:"FileElement"}),dh.newActF("JumpTo",{$:1,$0:function(ds){cb.jumpToRef(ds);},$1:"textarea"})],[]));dk.addLayout(dk.newLyt("FStationLyt",(A.unindentStr())("\n                    double           horizontal  0-50-100 AppFramework.AppFwkClient menuEditor\n        \n                    menuEditor       horizontal  65       menuLogo                  editorMessages\n                    menuLogo         vertical    350      logo                      menu\n                    logo             span       \"margin:0; color:gray; font-size: 55px; font-weight:530\" \"F# Station\"\n                    editorMessages   horizontal 10-83-100 editorButtons             messages\n                    messages         vertical   0-50-100  messagesLeft              messagesRight\n                    editorButtons    vertical -200 snippetsSnippet buttons\n                    buttons div      \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\" btnSaveAs none x btnAddSnippet btnDeleteSnippet btnIndentIn btnIndentOut none x btnRunFS\n                    snippetsSnippet  vertical   0-20-100  FSharpStation.Snippets    editorProperties\n                    editorProperties vertical   0-100-100 snippet                   properties\n                    properties       div        \"\"        FSharpStation.Properties\n                    snippet          horizontal 35        Name                      FSharpStation.editor\n                    menu             span  \"\" btnLoad btnImport\n                    \n                    btnSaveAs        button FSharpStation.SaveAs         \"class=btn ${FSharpStation.SaveNeeded}\" \"Save as...    \"\n                    btnAddSnippet    button FSharpStation.AddSnippet     \"\"                  \"Add Snippet   \"\n                    btnDeleteSnippet button FSharpStation.DeleteSnippet  \"\"                  \"Delete Snippet\"\n                    btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\n                    btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\n                    btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\n         \n                    messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\n                    messagesRight    wcomp-tabstrip                      \"\"                  Parser\n         \n                    Output           textarea  FSharpStation.Output      \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \n                    FsCode           textarea  FSharpStation.FsCode      \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \n                    Parser           textarea  FSharpStation.Parser      \"tabname=Parser ; placeholder=Parser messages; dblclick=${FSharpStation.JumpTo} ; spellcheck=false\" \n                    Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\n                    btnLoad          Doc       InputFile                 \"\"     \"Load File...\" FSharpStation.LoadFile  FileName\n                    btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\n                    FileName         div                                 \"class=form-control\"  FSharpStation.fileName\n                ")));dh.mainDocV().Set("FStationLyt.menuEditor");return cP.Async((dr=null,cr.Delay(function(){return cr.Bind(_9.loader(),function(){var ds,dt,du;ds=(dt=b7.getEditorConfigO(),dt==null?null:{$:1,$0:_9.render(dt.$0)});du=cP.get_Empty();ds==null?void 0:void 0;return cr.Return(dh.getMainDoc().f());});})));};cg.mainDoc$4497$78=a.id;cg.mainDoc$4489$39=function(){return function(dr){cb.jumpToRef(dr.Target);};};cg.mainDoc$4488$39=function(){return function(dr){dr.Target.value="";};};cg.mainDoc$4487$39=function(){return function(dr){cf.importFile(dr.Target);};};cg.mainDoc$4486$39=function(){return function(dr){dr.Target.value="";};};cg.mainDoc$4485$39=function(){return function(dr){ce.loadTextFile(dr.Target);};};cg.mainDoc=function(){var dr,ds,dt,du,dv,dw,dx,dy;dr=cg.hookDoc("FSharpStation","ButtonsRight",function(dz,dA){return dz.WithHole({$:0,$0:"buttonsright",$1:dA});},cg.hookDoc("FSharpStation","Properties",function(dz,dA){return dz.WithHole({$:0,$0:"properties",$1:dA});},cg.hookDoc("FSharpStation","Snippets",function(dz,dA){return dz.WithHole({$:0,$0:"snippets",$1:dA});},cg.hookDoc("FSharpStation","editor",function(dz,dA){return dz.WithHole({$:0,$0:"codeeditor",$1:dA});},cg.hookAct("FSharpStation","SaveAs",function(dz,dA){return dz.WithHole(dd.EventQ2(dz.k,"saveas",function(){return dz.i;},dA));},cg.hookViw("FSharpStation","SaveNeeded",function(dz,dA){return dz.WithHole({$:2,$0:"saveasclass",$1:dA});},cg.hookViw("FSharpStation","FSCode",function(dz,dA){return dz.WithHole({$:8,$0:"fscode",$1:new c_.New(dA,a.ignore)});},cg.hookVar("FSharpStation","Parser",function(dz,dA){return dz.WithHole({$:8,$0:"parser",$1:dA});},cg.hookVar("FSharpStation","Output",function(dz,dA){return dz.WithHole({$:8,$0:"output",$1:dA});},cg.hookVar("FSharpStation","SnippetName",function(dz,dA){return dz.WithHole({$:8,$0:"name",$1:dA});},cg.hookVar("FSharpStation","fileName",function(dz,dA){return dz.WithHole({$:8,$0:"filename",$1:dA});},(ds=(dt=(du=(dv=(dw=dc.Make(),dw.WithHole(dd.EventQ2(dw.k,"loadfilechanged",function(){return dw.i;},function(dz){ce.loadTextFile(dz.Target);}))),dv.WithHole(dd.EventQ2(dv.k,"loadfileclear",function(){return dv.i;},function(dz){dz.Target.value="";}))),du.WithHole(dd.EventQ2(du.k,"importfilechanged",function(){return du.i;},function(dz){cf.importFile(dz.Target);}))),dt.WithHole(dd.EventQ2(dt.k,"importfileclear",function(){return dt.i;},function(dz){dz.Target.value="";}))),ds.WithHole(dd.EventQ2(ds.k,"jumpref",function(){return ds.i;},function(dz){cb.jumpToRef(dz.Target);}))))))))))))));return(dx=dd.CompleteHoles(dr.k,dr.h,[["filename",0],["name",0],["output",0],["fscode",0],["parser",0]]),(dy=new de.New(dx[1],cj.layout(dx[0])),(dr.i=dy,dy))).get_Doc();};cg.buttonsRight$4471$74=a.id;cg.buttonsRight$4470$74=a.id;cg.buttonsRight$4469$74=a.id;cg.buttonsRight$4468$74=a.id;cg.buttonsRight$4467$74=a.id;cg.buttonsRight=function(){var dr,ds,dt;dr=cg.hookAct("FSharpStation","RunFS",function(du,dv){return du.WithHole(dd.EventQ2(du.k,"runfs",function(){return du.i;},dv));},cg.hookAct("FSharpStation","IndentOut",function(du,dv){return du.WithHole(dd.EventQ2(du.k,"indentout",function(){return du.i;},dv));},cg.hookAct("FSharpStation","IndentIn",function(du,dv){return du.WithHole(dd.EventQ2(du.k,"indentin",function(){return du.i;},dv));},cg.hookAct("FSharpStation","RemoveSnippet",function(du,dv){return du.WithHole(dd.EventQ2(du.k,"removesnippet",function(){return du.i;},dv));},cg.hookAct("FSharpStation","AddSnippet",function(du,dv){return du.WithHole(dd.EventQ2(du.k,"addsnippet",function(){return du.i;},dv));},dc.Make())))));return(ds=dd.CompleteHoles(dr.k,dr.h,[]),(dt=new de.New(ds[1],cj.buttonsright(ds[0])),(dr.i=dt,dt))).get_Doc();};cg.hookDoc=function(dr,ds,dt,du){var dv,dw,dx;dv=(dw=dh.tryGetDoc(dr,ds),dw==null?null:{$:1,$0:(dx=dw.$0,((((co.Curried3(function(dy,dz,dA){return dy("Doc    "+cp.toSafe(dz)+"."+cp.toSafe(dA)+" hooked");}))(function(dy){cI.log(dy);}))(dr))(ds),dt(du,cP.EmbedView(cK.Map(function(){return dh.getLazyDoc(dx);},dh.mainDocV().get_View())))))});return dv==null?((((co.Curried3(function(dy,dz,dA){return dy("Doc    "+cp.toSafe(dz)+"."+cp.toSafe(dA)+" not found");}))(function(dy){cI.log(dy);}))(dr))(ds),du):dv.$0;};cg.hookAct=function(dr,ds,dt,du){var dv,dw,dx;dv=(dw=dh.tryGetAct(dr,ds),dw==null?null:{$:1,$0:(dx=dw.$0,((((co.Curried3(function(dy,dz,dA){return dy("Action "+cp.toSafe(dz)+"."+cp.toSafe(dA)+" hooked");}))(function(dy){cI.log(dy);}))(dr))(ds),dt(du,function(){dh.callFunction(null,null,dx.actFunction);})))});return dv==null?((((co.Curried3(function(dy,dz,dA){return dy("Action "+cp.toSafe(dz)+"."+cp.toSafe(dA)+" not found");}))(function(dy){cI.log(dy);}))(dr))(ds),du):dv.$0;};cg.hookViw=function(dr,ds,dt,du){var dv,dw;dv=(dw=dh.tryGetViw(dr,ds),dw==null?null:{$:1,$0:((((co.Curried3(function(dx,dy,dz){return dx("View   "+cp.toSafe(dy)+"."+cp.toSafe(dz)+" hooked");}))(function(dx){cI.log(dx);}))(dr))(ds),dt(du,dw.$0.viwView))});return dv==null?((((co.Curried3(function(dx,dy,dz){return dx("View   "+cp.toSafe(dy)+"."+cp.toSafe(dz)+" not found");}))(function(dx){cI.log(dx);}))(dr))(ds),du):dv.$0;};cg.hookVar=function(dr,ds,dt,du){var dv,dw;dv=(dw=dh.tryGetVar(dr,ds),dw==null?null:{$:1,$0:((((co.Curried3(function(dx,dy,dz){return dx("Var    "+cp.toSafe(dy)+"."+cp.toSafe(dz)+" hooked");}))(function(dx){cI.log(dx);}))(dr))(ds),dt(du,dw.$0.varVar))});return dv==null?((((co.Curried3(function(dx,dy,dz){return dx("Var    "+cp.toSafe(dy)+"."+cp.toSafe(dz)+" not found");}))(function(dx){cI.log(dx);}))(dr))(ds),du):dv.$0;};cg.deleteSnippet=function(){var dr;dr=b1.currentSnippetV().Get();!cB.Equals(dr.snpId,P.get_Empty())&&a.confirm((function(ds){return function(dt){return ds("Do you want to delete "+cp.toSafe(dt)+"?");};}(a.id))(S.snippetName(dr.snpName,dr.snpContent)))?b1.deleteCurrentSnippet():void 0;};cg.runFsCode=function(){var dr,ds,dt,du,dv;function dw(dx){cg.appendMsgs(cx.Replace(dx,"xXxYyYyhH","Done!"));}dr=cK.TryGet(b1.FsCodeW());dr==null?void 0:(ds=dr.$0,dt=(du=e.asyncResultP(),du.Run(du.Delay(function(){var dx;cg.outputMsgs().Set("Running F#...");return p["AsyncResultBuilderP.Bind"](du,(dx=new bo({$:0,$0:b0.id()}),(new c9.New()).Async("testing:FsRoot.Library2+FSharpStationClient.setAddress:-1109087578",[dx])),function(){return du.ReturnFrom$1((new c9.New()).Async("testing:FsRoot.Library2+FsiAgent.evalCode:-1828949195",[b0.srcDir(),{$:0,$0:ds}]));});}))),m.iterA((dv=function(dx){return function(dy){return dx("Error:\n"+ci.p$1(dy));};}(a.id),function(dx){return dw(dv(dx));}),a.ignore,dt));};cg.appendMsgs=function(dr){cg.appendText(cg.outputMsgs(),dr);};cg.outputMsgs=function(){ch.$cctor();return ch.outputMsgs;};cg.appendText=function(dr,ds){var dt;dr.Set((dt=dr.Get(),dt===""?ds:ds===""?dt:dt+"\n"+ds));};ch.$cctor=function(){var ds,dw,dx,dE,dF,dG,dI,dJ,dL,dM,dO,dP,dQ,dR,dS,dT,dV,dW,dZ,d0,d3,d6,d7,d9,d_,d$,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG;ch.$cctor=a.ignore;ch.rtn=function(eH){return[eH];};ch.result=new k.New();ch.result$1=j.result();ch.asyncResult=new n.New();ch.asyncResultP=new o.New();ch.reader=new s.New();ch.reader$1=r.reader();ch.reader$2=new v.New();ch.reader$3=u.reader();ch.reader$4=new y.New();ch.reader$5=x.reader();function dr(eH){return cx.concat("\n",eH);}ch.unindentStr=function(eH){return dr(A.unindent$1(eH));};function dt(eH){return A.splitByChar$1("\n",eH);}function du(eH){var eI,eJ;return cy.array(eH,{$:1,$0:0},{$:1,$0:(eI=0,(eJ=cs.length(eH)-2,cB.Compare(eI,eJ)===1?eI:eJ))});}function dv(eH){return cx.concat("\n",eH);}ch.skipLastLine=(ds=function(eH){return du(dt(eH));},function(eH){return dv(ds(eH));});ch.parseDateO=B.tryParseWith$1(function(eH){var eI,eJ;eI=0;return[(eJ=dl.TryParse(eH),eJ!=null&&eJ.$==1&&(eI=eJ.$0,true)),eI];});ch.parseIntO=B.tryParseWith$1(function(eH){var eI;eI=0;return[dm.TryParseInt32(eH,{get:function(){return eI;},set:function(eJ){eI=eJ;}}),eI];});ch.parseSingleO=B.tryParseWith$1(function(eH){var eI,eJ;eI=0;return[(eJ=a.Number(eH),a.isNaN(eJ)?false:(eI=eJ,true)),eI];});ch.parseDoubleO=B.tryParseWith$1(function(eH){var eI,eJ;eI=0;return[(eJ=a.Number(eH),a.isNaN(eJ)?false:(eI=eJ,true)),eI];});ch.parseGuidO=B.tryParseWith$1(function(eH){var eI;eI=null;return[cD.TryParse(eH,{get:function(){return eI;},set:function(eJ){eI=eJ;}}),eI];});ch["|Date|_|"]=B.parseDateO$1();ch["|Int|_|"]=B.parseIntO$1();ch["|Single|_|"]=B.parseSingleO$1();ch["|Double|_|"]=B.parseDoubleO$1();ch["|Guid|_|"]=B.parseGuidO$1();dx=(dw=1,[function(){dw=dw+1;return dw;},function(eH){dw=eH;}]);ch.setGeneration=dx[1];ch.getNextGeneration=dx[0];ch.defaultSnippet=Q.New(new P({$:0,$0:"00000000-0000-0000-0000-000000000000"}),"","",null,new cF.New$1(null),[],0);function dy(eH){return eH.predecesorsCache();}ch.predsLRmMemo=function(eH){return u.memoizeRm(dy,S.predsLRm,eH);};function dz(eH){return eH.reducedCache();}ch.reducedOthersORmMemo=function(eH){return u.memoizeRm(dz,function(eI){return S.reducedOthersORm(eI[0],eI[1],eI[2]);},eH);};ch.deserGuid=function(eH){return Y.ifUndef("00000000-0000-0000-0000-000000000000",eH);};function dA(eH){return Y.ifUndef(0,eH);}ch.serFloat=[function(eH){return(function(eI){return function(eJ){return eI(cp.prettyPrint(eJ));};}(a.id))(eH);},function(eH){return dA(a.id(eH));}];function dB(eH){return Y.ifUndef(0,eH);}ch.serInt=[function(eH){return(function(eI){return function(eJ){return eI(cp.prettyPrint(eJ));};}(a.id))(eH);},function(eH){return dB(a.id(eH));}];function dC(eH){return Y.ifUndef(false,eH);}ch.serBool=[function(eH){return(function(eI){return function(eJ){return eI(cp.prettyPrint(eJ));};}(a.id))(eH);},function(eH){return dC(a.id(eH));}];function dD(eH){return Y.ifUndef("",eH);}ch.serString=[function(eH){return cY.stringify(((c1.Id())())(eH));},function(eH){return dD(a.id(eH));}];ch.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";ch.observers=ct.T.Empty;ch.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";ch.init=dj.Create(function(){var eH,eI,eJ;eH=new _6.New$1();eI="wcomp-tabstrip";eJ=self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New;cI.log("defineWebComponent: "+eI);cW.setPrototypeOf(eJ.prototype,self.HTMLElement.prototype);cW.setPrototypeOf(eJ,self.HTMLElement);cW.setPrototypeOf(_6.Constructor$1.prototype,eJ.prototype);self.customElements.define(eI,_6.Constructor$1);});ch.layoutHorizontal=co.Curried(function(eH,eI,eJ,eK,eL){return cP.get_Empty();},5);ch.layoutVertical=co.Curried(function(eH,eI,eJ,eK,eL){return cP.get_Empty();},5);ch.includes=["/EPFileX/monaco/package/min/vs/loader.js"];ch.loader=(dE=null,cr.Delay(function(){return cr.Bind(Z.LoadFilesAsync(_9.includes()),function(){self.require.config({paths:{vs:"/EPFileX/monaco/package/min/vs"}});return cr.Bind(cr.FromContinuations(function(eH,eI){return self.require(["vs/editor/editor.main"],eH,eI);}),function(){return cr.Return(null);});});}));ch.MessageBrokerId="<MessageBroker>";ch.MessageBrokerAddress=new bo({$:0,$0:bn.MessageBrokerId()});ch.id="FSharpStation"+a.String(dn.now());ch.rootDir=".";ch.srcDir=".";cr.Start((dF=null,cr.Delay(function(){return cr.Bind((new c9.New()).Async("testing:FsRoot.FSharpStation+FStation.getRootDir:-447555547",[]),function(eH){b0.set_rootDir(eH+"/"+"..");b0.set_srcDir(eH+"/"+"..\\src");(((co.Curried3(function(eI,eJ,eK){return eI("fileName = "+cp.toSafe(eJ)+"\\"+cp.toSafe(eK)+".fsx");}))(function(eI){cI.log(eI);}))(b0.srcDir()))(b0.id());return cr.Zero();});})),null);ch.annotationsV=cL.Create$1("");ch.snippets=new _do.New$1(function(eH){return eH.snpId;});ch.hierarchy=cL.Create$1([]);ch.generation=cL.Create$1(5);ch.currentSnippetIdOV=cL.Create$1(null);ch.codeSnippetIdOV=cL.Create$1(null);ch.collapsedV=cL.Create$1(new cF.New$1(null));function dH(eH,eI){dG.set_Item(eH,eI);return eI;}dI=(dG=new dp.New$5(),[[function(eH){var eI;eI=null;return dG.TryGetValue(eH,{get:function(){return eI;},set:function(eJ){eI=eJ;}})?{$:1,$0:eI}:null;},function(eH){return function(eI){return dH(eH,eI);};}],function(){dG.Clear();}]);ch.predsCache=dI[0];ch.clearPreds=dI[1];function dK(eH,eI){dJ.set_Item(eH,eI);return eI;}dL=(dJ=new dp.New$5(),[[function(eH){var eI;eI=null;return dJ.TryGetValue(eH,{get:function(){return eI;},set:function(eJ){eI=eJ;}})?{$:1,$0:eI}:null;},function(eH){return function(eI){return dK(eH,eI);};}],function(){dJ.Clear();}]);ch.reducCache=dL[0];ch.clearReduc=dL[1];function dN(eH,eI){dM.set_Item(eH,eI);return eI;}dO=(dM=new dp.New$5(),[[function(eH){var eI;eI=null;return dM.TryGetValue(eH,{get:function(){return eI;},set:function(eJ){eI=eJ;}})?{$:1,$0:eI}:null;},function(eH){return function(eI){return dN(eH,eI);};}],function(){dM.Clear();}]);ch.parentCache=dO[0];ch.clearParent=dO[1];ch.getParentIdO=(dP=b1.parentCache(),(dQ=dP[1],(dR=dP[0],function(eH){var eI,eJ;eI=dR(eH);return eI==null?(eJ=b1.getParentIdONotMemo(eH),(dQ(eH))(eJ)):eI.$0;})));cK.Sink(function(eH){var eI,eJ;if(eH!=null&&eH.$==1){eI=eH.$0;eJ=b1.codeSnippetIdOV().Get();eJ!=null&&eJ.$==1?(b1.iterReader(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_BarGreaterGreater(w.op_GreaterGreaterEquals(w.op_BarGreaterGreater(S.snippetORm(eJ.$0),function(eK){return eK==null?null:{$:1,$0:S.uniquePredsRm(eK.$0)};}),u.insertO),cG.toList),function(eK){return ct.collect(a.id,eK);}),function(eK){return ct.contains(eI,eK);}),function(eK){if(eK);else b1.codeSnippetIdOV().Set({$:1,$0:eI});})),b1.clearPredsCache()):b1.codeSnippetIdOV().Set({$:1,$0:eI});}},b1.currentSnippetIdOV().get_View());function dU(eH){return eH.id();}cK.Sink(function(eH){var eI;b1.clearPredsCache();eI=cs.ofSeq(cq.delay(function(){return cq.collect(function(eJ){return cq.append([b1.snippets().FindByKey(eJ)],cq.delay(function(){return cq.filter(function(eK){return b1.isDescendantOf(eJ,eK.snpId);},(b1.snippets())["var"].Get());}));},eH);}));b1.snippets().Set(eI);},(dS=cK.Map(function(eH){return cs.map(dU,eH);},b1.hierarchy().get_View()),(dT=[cL.Create$1(null)],(cK.Sink(function(eH){if(!cB.Equals(dT[0].Get(),eH))dT[0].Set(eH);},dS),dT[0].get_View()))));ch.CurrentSnippetIdW=cK.Map(function(eH){var eI;eI=S.defaultSnippet().snpId;return eH==null?eI:eH.$0;},b1.currentSnippetIdOV().get_View());function dX(eH){var eI;eI=S.defaultSnippet();return eH==null?eI:eH.$0;}function dY(eH){return b1.snippets().TryFindByKeyAsView(eH);}ch.currentSnippetW=cK.Map((dV=function(eH){return eH==null?null:a.id(eH.$0);},function(eH){return dX(dV(eH));}),cK.Bind((dW=function(eH){return eH==null?null:{$:1,$0:dY(eH.$0)};},function(eH){return X.insertWO(dW(eH));}),b1.currentSnippetIdOV().get_View()));function d1(eH){var eI;eI=S.defaultSnippet();return eH==null?eI:eH.$0;}function d2(eH){return b1.snippets().TryFindByKeyAsView(eH);}ch.codeSnippetW=cK.Map((dZ=function(eH){return eH==null?null:a.id(eH.$0);},function(eH){return d1(dZ(eH));}),cK.Bind((d0=function(eH){return eH==null?null:{$:1,$0:d2(eH.$0)};},function(eH){return X.insertWO(d0(eH));}),b1.codeSnippetIdOV().get_View()));ch.currentSnippetV=new c_.New(b1.currentSnippetW(),function(eH){b1.setSnippet(eH);});function d4(eH,eI){return[eH.id(),eI];}function d5(eH){function eI(eK){return T.listNodes(0,eK);}function eJ(eK){return b1.runReader(b1.handleError,eK);}return function(eK){return eJ(eI(eK));};}ch.getHierarchyW=cK.Map(cs.ofSeq,cK.Map(function(eH){return cq.map(function(eI){return d4(eI[0],eI[1]);},eH);},(d3=b1.hierarchy().get_View(),cK.Map2(function(eH,eI){return(d5(eH))(eI);},b1.collapsedV().get_View(),d3))));function d8(eH,eI){var eJ;eJ=null;return cr.Delay(function(){return cr.Bind(cr.Sleep(350),function(){return cr.Return(b1.runReader(b1.handleError,S.fastCodeRm(b1.currentSnippetIdOV().Get(),b1.codeSnippetIdOV().Get())));});});}ch.codeAndStartsW=(d6=b1.codeSnippetW(),(d7=b1.snippets().v,(((co.Curried3(cK.MapAsync2))(d8))(d6))(d7)));ch.FsCodeW=cK.Map(function(eH){return eH[0];},b1.codeAndStartsW());ch.codeStartsW=cK.Map(function(eH){return eH[1];},b1.codeAndStartsW());ch.SaveAsClassW=cK.Map2(function(eH,eI){return cq.exists(function(eJ){return eJ.snpGeneration>eI;},eH)?"btn-primary":"";},b1.snippets().v,b1.generation().get_View());ch.drag=b3.DragNone;ch.rootdir="..\\website";ch.TemplatesFileName="..\\website"+"\\Templates.html";((function(eH){return function(eI){return eH(cp.toSafe(eI));};}(function(eH){cI.log(eH);}))("..\\website\\Templates.html"));ch.startsV=cL.Create$1([]);ch.defaultStart=(d9=[[P.get_Empty(),""],[0,1,0]],function(eH){return eH==null?d9:eH.$0;});ch.fileName="none.fsx";ch.editorConfigO=null;cK.Sink(function(eH){var eI,eJ;try{eI=(eJ=b7.editorConfigO(),eJ==null?null:eJ.$0.editorO);eI==null?null:(eI.$0.setModel(b7.getSnippetModel(eH)),b0.annotationsV().Set(b0.annotationsV().Get()));}catch(eK){null;}},b1.CurrentSnippetIdW());ch.rexGuid$1="\\((\\d+)\\,\\s*(\\d+)\\) - \\((\\d+)\\,\\s*(\\d+)\\).*([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";function ea(eH){return eH.$0;}function eb(eH){return new P({$:0,$0:eH});}ch.serSnippetId=(d_=cs.head(cx.SplitChars((function(eH){return function(eI){return eH(ci.p(eI));};}(a.id))(eb("00000000-0000-0000-0000-000000000000")),[" "],0)),(d$=(function(eH){return function(eI){return eH(cp.prettyPrint(eI));};}(a.id))(d_),[function(eH){var eI;eI=ea(eH);return(((co.Curried3(function(eJ,eK,eL){return eJ("{"+cx.PadLeft(cp.toSafe(eK),10)+" :"+cp.prettyPrint(eL)+"}");}))(a.id))(d$))(eI);},function(eH){var eI;return eb((eI=eH[d_],(Y.deserGuid())(eI)));}]));ch.serSnippet=(ec=[(ed=cc.serSnippetId(),Y.serField("snpId",function(eH){return eH.snpId;},function(eH,eI){return Q.New(eH,eI.snpName,eI.snpContent,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},ed[0],ed[1])),(ee=Y.serString(),Y.serField("snpName",function(eH){return eH.snpName;},function(eH,eI){return Q.New(eI.snpId,eH,eI.snpContent,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},ee[0],ee[1])),(ef=Y.serString(),Y.serField("snpContent",function(eH){return eH.snpContent;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eH,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},ef[0],ef[1])),(eg=(eh=cc.serSnippetId(),Y.serOpt(eh[0],eh[1])),Y.serField("snpParentIdO",function(eH){return eH.snpParentIdO;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eI.snpContent,eH,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},eg[0],eg[1])),(ei=(ej=cc.serSnippetId(),Y.serSet(ej[0],ej[1])),Y.serField("snpPredIds",function(eH){return eH.snpPredIds;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eI.snpContent,eI.snpParentIdO,eH,eI.snpProperties,eI.snpGeneration);},ei[0],ei[1])),(ek=(el=(em=Y.serString(),Y.serDup((Y.serString())[0],(Y.serString())[1],em[0],em[1])),Y.serArr(el[0],el[1])),Y.serField("snpProperties",function(eH){return eH.snpProperties;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eI.snpContent,eI.snpParentIdO,eI.snpPredIds,eH,eI.snpGeneration);},ek[0],ek[1])),(en=Y.serInt(),Y.serField("snpGeneration",function(eH){return eH.snpGeneration;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eI.snpContent,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eH);},en[0],en[1]))],(eo=S.New("","",null),[function(eH){var eI;function eJ(eK,eL,eM){return(((co.Curried3(function(eN,eO,eP){return eN(cp.prettyPrint(eO)+": "+cp.toSafe(eP));}))(a.id))(eK))(eL(eH));}eI=cx.concat(", ",cq.map(function(eK){return eJ(eK[0],eK[1],eK[2]);},ec));return(function(eK){return function(eL){return eK("{"+cp.toSafe(eL)+"}");};}(a.id))(eI);},function(eH){return!eH?eo:cq.fold(function(eI,eJ){return(eJ[2](eI))(eH[eJ[0]]);},eo,ec);}]));ch.serModel=(ep=[(eq=(er=cc.serSnippet(),Y.serArr(er[0],er[1])),Y.serField("snippets",function(eH){return eH.snippets;},function(eH,eI){return cd.New(eH,eI.generation,eI.collapsed);},eq[0],eq[1])),(es=Y.serInt(),Y.serField("generation",function(eH){return eH.generation;},function(eH,eI){return cd.New(eI.snippets,eH,eI.collapsed);},es[0],es[1])),(et=(eu=cc.serSnippetId(),Y.serSet(eu[0],eu[1])),Y.serField("collapsed",function(eH){return eH.collapsed;},function(eH,eI){return cd.New(eI.snippets,eI.generation,eH);},et[0],et[1]))],(ev=cd.New([],0,new cF.New$1(null)),[function(eH){var eI;function eJ(eK,eL,eM){return(((co.Curried3(function(eN,eO,eP){return eN(cp.prettyPrint(eO)+": "+cp.toSafe(eP));}))(a.id))(eK))(eL(eH));}eI=cx.concat(", ",cq.map(function(eK){return eJ(eK[0],eK[1],eK[2]);},ep));return(function(eK){return function(eL){return eK("{"+cp.toSafe(eL)+"}");};}(a.id))(eI);},function(eH){return!eH?ev:cq.fold(function(eI,eJ){return(eJ[2](eI))(eH[eJ[0]]);},ev,ep);}]));ch.fileName$1=cL.Create$1("");ch.serSnippetId2=[function(eH){return(function(eI){return function(eJ){return eI(cp.prettyPrint(eJ));};}(a.id))(eH);},function(eH){var eI;return new P({$:0,$0:(eI=eH.Item,(Y.deserGuid())(eI))});}];ch.serSnippet2=(ew=[(ex=cf.serSnippetId2(),Y.serField("id",function(eH){return eH.snpId;},function(eH,eI){return Q.New(cB.Equals(eH,P.get_Empty())?new P({$:0,$0:cD.NewGuid()}):eH,eI.snpName,eI.snpContent,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},ex[0],ex[1])),(ey=Y.serString(),Y.serField("name",function(eH){return eH.snpName;},function(eH,eI){return Q.New(eI.snpId,eH,eI.snpContent,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},ey[0],ey[1])),(ez=Y.serString(),Y.serField("content",function(eH){return eH.snpContent;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eH,eI.snpParentIdO,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},ez[0],ez[1])),(eA=(eB=cf.serSnippetId2(),Y.serOpt(eB[0],eB[1])),Y.serField("parent",function(eH){return eH.snpParentIdO;},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eI.snpContent,cB.Equals(eH,{$:1,$0:P.get_Empty()})?null:eH,eI.snpPredIds,eI.snpProperties,eI.snpGeneration);},eA[0],eA[1])),(eC=(eD=cf.serSnippetId2(),Y.serArr(eD[0],eD[1])),Y.serField("predecessors",function(eH){return cs.ofSeq(eH.snpPredIds);},function(eH,eI){return Q.New(eI.snpId,eI.snpName,eI.snpContent,eI.snpParentIdO,new cF.New(eH),eI.snpProperties,eI.snpGeneration);},eC[0],eC[1]))],(eE=S.New("","",null),[function(eH){var eI;function eJ(eK,eL,eM){return(((co.Curried3(function(eN,eO,eP){return eN(cp.prettyPrint(eO)+": "+cp.toSafe(eP));}))(a.id))(eK))(eL(eH));}eI=cx.concat(", ",cq.map(function(eK){return eJ(eK[0],eK[1],eK[2]);},ew));return(function(eK){return function(eL){return eK("{"+cp.toSafe(eL)+"}");};}(a.id))(eI);},function(eH){return!eH?eE:cq.fold(function(eI,eJ){return(eJ[2](eI))(eH[eJ[0]]);},eE,ew);}]));ch.serSnippets=(eF=cf.serSnippet2(),Y.serArr(eF[0],eF[1]));ch.outputMsgs=cL.Create$1("");eG=b1.codeAndStartsW();cK.Sink(c.delayed(300,function(eH){b7.parse(eH[0],eH[1]);}),eG);cK.Sink(function(eH){self.onbeforeunload=eH!==""?function(eI){eI.returnValue="Changes you made may not be saved.";}:null;},b1.SaveAsClassW());};ci.p=function(dr){return"SnippetId "+cp.prettyPrint(dr.$0);};cj.snippetlist=function(dr){cU.LoadLocalTemplates("templates");return dr?cU.NamedTemplate("templates",{$:1,$0:"snippetlist"},dr):void 0;};cj.snippet=function(dr){cU.LoadLocalTemplates("templates");return dr?cU.NamedTemplate("templates",{$:1,$0:"snippet"},dr):void 0;};cj.propertytable=function(dr){cU.LoadLocalTemplates("templates");return dr?cU.NamedTemplate("templates",{$:1,$0:"propertytable"},dr):void 0;};cj.property=function(dr){cU.LoadLocalTemplates("templates");return dr?cU.NamedTemplate("templates",{$:1,$0:"property"},dr):void 0;};cj.layout=function(dr){dq.fixedsplitterhor();dq.fixedsplitterver();cU.LoadLocalTemplates("templates");return dr?cU.NamedTemplate("templates",{$:1,$0:"layout"},dr):void 0;};cj.buttonsright=function(dr){cU.LoadLocalTemplates("templates");return dr?cU.NamedTemplate("templates",{$:1,$0:"buttonsright"},dr):void 0;};ci.p$1=function(dr){return dr.$==3?"ExceptMsg ("+cp.prettyPrint(dr.$0)+", "+cp.prettyPrint(dr.$1)+")":dr.$==2?"Message "+ci.p$2(dr.$0):dr.$==1?"Warning "+cp.prettyPrint(dr.$0):"ErrorMsg "+cp.prettyPrint(dr.$0);};ci.p$2=function(dr){return dr.$==3?"ShellCrashed ("+cp.prettyPrint(dr.$0)+", "+cp.prettyPrint(dr.$1)+")":dr.$==2?"ShellNoExit ("+cp.prettyPrint(dr.$0)+", "+cp.prettyPrint(dr.$1)+")":dr.$==1?"ShellExit ("+cp.prettyPrint(dr.$0)+", "+cp.prettyPrint(dr.$1)+", "+cp.prettyPrint(dr.$2)+")":"ShellDidNotStart";};ck.j$4=function(){return ck._v$4?ck._v$4:ck._v$4=(c1.EncodeUnion(void 0,"type",[["BRGetConnections",[]],["BRGetProcessId",[]]]))();};ci.p$3=function(dr){return dr.$==2?"BRString "+cp.prettyPrint(dr.$0):dr.$==1?"BRPid "+cp.prettyPrint(dr.$0):"BRConnections "+cp.printArray(cp.prettyPrint,dr.$0);};cl.j$4=function(){return cl._v$4?cl._v$4:cl._v$4=(c1.DecodeUnion(void 0,"type",[["BRConnections",[["$0","Item",c1.DecodeArray(c1.Id()),0]]],["BRPid",[["$0","Item",c1.Id(),0]]],["BRString",[["$0","Item",c1.Id(),0]]]]))();};cl.j$5=function(){return cl._v$5?cl._v$5:cl._v$5=(c1.DecodeUnion(void 0,"type",[["BMOk",[]],["BMOnlyBrokerShouldUse",[]],["BMDestinationNotFound",[["$0","Item",cl.j$1,0]]],["BMWebSocketError",[["$0","Item",c1.Id(),0]]],["BMReceiverCantReply",[]],["BMUnexpectedMsgType",[["$0","Item",cl.j$2,0]]],["BMUnexpectedResponse",[["$0","Item",c1.Id(),0]]]]))();};ci.p$6=function(dr){return dr.$==2?"Receiver":dr.$==1?"Broker":"NoReply";};ci.p$5=function(dr){return dr.$==5?"MsgRequestForEcho":dr.$==4?"MsgRequestForId":dr.$==3?"MsgFromBroker":dr.$==2?"MsgReply":dr.$==1?"MsgRequest":"MsgInformation";};cm.p=function(dr){return"{"+("from = "+ci.p$4(dr.from))+"; "+("destination = "+ci.p$4(dr.destination))+"; "+("msgType = "+ci.p$5(dr.msgType))+"; "+("subtype = "+cp.prettyPrint(dr.subtype))+"; "+("id = "+cp.prettyPrint(dr.id))+"; "+("payload = "+cp.prettyPrint(dr.payload))+"; "+("replier = "+ci.p$6(dr.replier))+"}";};ci.p$4=function(dr){return"Address "+cp.prettyPrint(dr.$0);};ci.p$7=function(dr){return dr.$==3?"Close":dr.$==2?"Open":dr.$==1?"Error":"Message "+cm.p(dr.$0);};ci.p$8=function(dr){return dr.$==3?"ExceptMsg ("+cp.prettyPrint(dr.$0)+", "+cp.prettyPrint(dr.$1)+")":dr.$==2?"Message "+cp.printArray(function(ds){return ci.p$9(ds);},dr.$0):dr.$==1?"Warning "+cp.prettyPrint(dr.$0):"ErrorMsg "+cp.prettyPrint(dr.$0);};ci.p$9=function(dr){return dr.$==17?"KMultiple "+cp.printArray(function(ds){return ci.p$9(ds);},dr.$0):dr.$==16?"KUnionCase "+cm.p$22(dr.$0):dr.$==15?"KNamespaces "+cm.p$19(dr.$0):dr.$==14?"KCompilerLocation "+cm.p$18(dr.$0):dr.$==13?"KSignatureData "+cm.p$16(dr.$0):dr.$==12?"KTypeSig "+cp.prettyPrint(dr.$0):dr.$==11?"KToolTip "+cp.printArray(function(ds){return cp.printArray(function(dt){return cm.p$3(dt);},ds);},dr.$0):dr.$==10?"KDeclarations "+cp.printArray(function(ds){return cm.p$14(ds);},dr.$0):dr.$==9?"KFindDecl "+cm.p$13(dr.$0):dr.$==8?"KColorizations "+cp.printList(function(ds){return cm.p$12(ds);},dr.$0):dr.$==7?"KErrors "+cm.p$10(dr.$0):dr.$==6?"KMethod "+cm.p$7(dr.$0):dr.$==5?"KHelp "+cp.prettyPrint(dr.$0):dr.$==4?"KSymbolUse "+cm.p$5(dr.$0):dr.$==3?"KCompletion "+cp.printArray(function(ds){return cm.p$4(ds);},dr.$0):dr.$==2?"KHelpText "+cm.p$2(dr.$0):dr.$==1?"KError "+cm.p$1(dr.$0):"KInfo "+cp.prettyPrint(dr.$0);};cm.p$22=function(dr){return"{"+("Text = "+cp.prettyPrint(dr.Text))+"}";};cm.p$21=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("Qualifier = "+cp.prettyPrint(dr.Qualifier))+"}";};cm.p$20=function(dr){return"{"+("Namespace = "+cp.prettyPrint(dr.Namespace))+"; "+("Name = "+cp.prettyPrint(dr.Name))+"; "+("Type = "+cp.prettyPrint(dr.Type))+"; "+("Line = "+cp.prettyPrint(dr.Line))+"; "+("Column = "+cp.prettyPrint(dr.Column))+"; "+("MultipleNames = "+cp.prettyPrint(dr.MultipleNames))+"}";};cm.p$18=function(dr){return"{"+("Fsc = "+cp.prettyPrint(dr.Fsc))+"; "+("Fsi = "+cp.prettyPrint(dr.Fsi))+"; "+("MSBuild = "+cp.prettyPrint(dr.MSBuild))+"}";};cm.p$16=function(dr){return"{"+("OutputType = "+cp.prettyPrint(dr.OutputType))+"; "+("Parameters = "+cp.printList(function(ds){return cp.printList(function(dt){return cm.p$17(dt);},ds);},dr.Parameters))+"}";};cm.p$19=function(dr){return"{"+("Opens = "+cp.printArray(function(ds){return cm.p$20(ds);},dr.Opens))+"; "+("Qualifies = "+cp.printArray(function(ds){return cm.p$21(ds);},dr.Qualifies))+"; "+("Word = "+cp.prettyPrint(dr.Word))+"}";};cm.p$17=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("Type = "+cp.prettyPrint(dr.Type))+"}";};cm.p$14=function(dr){return"{"+("Declaration = "+cm.p$15(dr.Declaration))+"; "+("Nested = "+cp.printArray(function(ds){return cm.p$15(ds);},dr.Nested))+"}";};cm.p$13=function(dr){return"{"+("File = "+cp.prettyPrint(dr.File))+"; "+("Line = "+cp.prettyPrint(dr.Line))+"; "+("Column = "+cp.prettyPrint(dr.Column))+"}";};cm.p$15=function(dr){return"{"+("UniqueName = "+cp.prettyPrint(dr.UniqueName))+"; "+("Name = "+cp.prettyPrint(dr.Name))+"; "+("Glyph = "+cp.prettyPrint(dr.Glyph))+"; "+("GlyphChar = "+cp.prettyPrint(dr.GlyphChar))+"; "+("IsTopLevel = "+cp.prettyPrint(dr.IsTopLevel))+"; "+("File = "+cp.prettyPrint(dr.File))+"; "+("EnclosingEntity = "+cp.prettyPrint(dr.EnclosingEntity))+"; "+("IsAbstract = "+cp.prettyPrint(dr.IsAbstract))+"}";};cm.p$12=function(dr){return"{"+("Kind = "+cp.prettyPrint(dr.Kind))+"}";};cm.p$10=function(dr){return"{"+("File = "+cp.prettyPrint(dr.File))+"; "+("Errors = "+cp.printArray(function(ds){return cm.p$11(ds);},dr.Errors))+"}";};cm.p$11=function(dr){return"{"+("FileName = "+cp.prettyPrint(dr.FileName))+"; "+("StartLine = "+cp.prettyPrint(dr.StartLine))+"; "+("EndLine = "+cp.prettyPrint(dr.EndLine))+"; "+("StartColumn = "+cp.prettyPrint(dr.StartColumn))+"; "+("EndColumn = "+cp.prettyPrint(dr.EndColumn))+"; "+("Severity = "+cp.prettyPrint(dr.Severity))+"; "+("Message = "+cp.prettyPrint(dr.Message))+"; "+("Subcategory = "+cp.prettyPrint(dr.Subcategory))+"}";};cm.p$7=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("CurrentParameter = "+cp.prettyPrint(dr.CurrentParameter))+"; "+("Overloads = "+cp.printList(function(ds){return cm.p$8(ds);},dr.Overloads))+"}";};cm.p$8=function(dr){return"{"+("Tip = "+cp.printList(function(ds){return cp.printList(function(dt){return cm.p$3(dt);},ds);},dr.Tip))+"; "+("TypeText = "+cp.prettyPrint(dr.TypeText))+"; "+("Parameters = "+cp.printList(function(ds){return cm.p$9(ds);},dr.Parameters))+"; "+("IsStaticArguments = "+cp.prettyPrint(dr.IsStaticArguments))+"}";};cm.p$9=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("CanonicalTypeTextForSorting = "+cp.prettyPrint(dr.CanonicalTypeTextForSorting))+"; "+("Display = "+cp.prettyPrint(dr.Display))+"; "+("Description = "+cp.prettyPrint(dr.Description))+"}";};cm.p$5=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("Uses = "+cp.printList(function(ds){return cm.p$6(ds);},dr.Uses))+"}";};cm.p$6=function(dr){return"{"+("FileName = "+cp.prettyPrint(dr.FileName))+"; "+("StartLine = "+cp.prettyPrint(dr.StartLine))+"; "+("StartColumn = "+cp.prettyPrint(dr.StartColumn))+"; "+("EndLine = "+cp.prettyPrint(dr.EndLine))+"; "+("EndColumn = "+cp.prettyPrint(dr.EndColumn))+"; "+("IsFromDefinition = "+cp.prettyPrint(dr.IsFromDefinition))+"; "+("IsFromAttribute = "+cp.prettyPrint(dr.IsFromAttribute))+"; "+("IsFromComputationExpression = "+cp.prettyPrint(dr.IsFromComputationExpression))+"; "+("IsFromDispatchSlotImplementation = "+cp.prettyPrint(dr.IsFromDispatchSlotImplementation))+"; "+("IsFromPattern = "+cp.prettyPrint(dr.IsFromPattern))+"; "+("IsFromType = "+cp.prettyPrint(dr.IsFromType))+"}";};cm.p$4=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("ReplacementText = "+cp.prettyPrint(dr.ReplacementText))+"; "+("Glyph = "+cp.prettyPrint(dr.Glyph))+"; "+("GlyphChar = "+cp.prettyPrint(dr.GlyphChar))+"}";};cm.p$2=function(dr){return"{"+("Name = "+cp.prettyPrint(dr.Name))+"; "+("Overloads = "+cp.printList(function(ds){return cp.printList(function(dt){return cm.p$3(dt);},ds);},dr.Overloads))+"}";};cm.p$3=function(dr){return"{"+("Signature = "+cp.prettyPrint(dr.Signature))+"; "+("Comment = "+cp.prettyPrint(dr.Comment))+"; "+("Footer = "+cp.prettyPrint(dr.Footer))+"}";};cm.p$1=function(dr){return"{"+("Code = "+cp.prettyPrint(dr.Code))+"; "+("Message = "+cp.prettyPrint(dr.Message))+"}";};ck.j$1=function(){return ck._v$1?ck._v$1:ck._v$1=(c1.EncodeUnion(bo,"$",[[0,[["$0","address",c1.Id(),0]]]]))();};ck.j$2=function(){return ck._v$2?ck._v$2:ck._v$2=(c1.EncodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};ck.j$3=function(){return ck._v$3?ck._v$3:ck._v$3=(c1.EncodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};ck.j=function(){return ck._v?ck._v:ck._v=(c1.EncodeRecord(void 0,[["from",ck.j$1,0],["destination",ck.j$1,0],["msgType",ck.j$2,0],["subtype",c1.Id(),0],["id",c1.Id(),0],["payload",c1.Id(),0],["replier",ck.j$3,0]]))();};cl.j$1=function(){return cl._v$1?cl._v$1:cl._v$1=(c1.DecodeUnion(bo,"$",[[0,[["$0","address",c1.Id(),0]]]]))();};cl.j$2=function(){return cl._v$2?cl._v$2:cl._v$2=(c1.DecodeUnion(void 0,"type",[["MsgInformation",[]],["MsgRequest",[]],["MsgReply",[]],["MsgFromBroker",[]],["MsgRequestForId",[]],["MsgRequestForEcho",[]]]))();};cl.j$3=function(){return cl._v$3?cl._v$3:cl._v$3=(c1.DecodeUnion(void 0,"type",[["NoReply",[]],["Broker",[]],["Receiver",[]]]))();};cl.j=function(){return cl._v?cl._v:cl._v=(c1.DecodeRecord(void 0,[["from",cl.j$1,0],["destination",cl.j$1,0],["msgType",cl.j$2,0],["subtype",c1.Id(),0],["id",c1.Id(),0],["payload",c1.Id(),0],["replier",cl.j$3,0]]))();};}());

function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA;a=self;b=a.FsRoot=a.FsRoot||{};c=b.ProzperServer=b.ProzperServer||{};d=c.ClientSide=c.ClientSide||{};e=d.MainProgram=d.MainProgram||{};f=a.WebSharper=a.WebSharper||{};g=f.Obj=f.Obj||{};h=f.UI=f.UI||{};i=h.Var$1=h.Var$1||{};j=b.LibraryJS=b.LibraryJS||{};k=j.AppFramework=j.AppFramework||{};l=k.PlugIn=k.PlugIn||{};m=d.ModeloUI=d.ModeloUI||{};n=m.Aliado=m.Aliado||{};o=f.Operators=f.Operators||{};p=h.View=h.View||{};q=h.Var=h.Var||{};r=f.Lazy=f.Lazy||{};s=m.RenderAliados=m.RenderAliados||{};t=m.RenderAliado=m.RenderAliado||{};u=m.FormaRegistro=m.FormaRegistro||{};v=m.FormaDatos=m.FormaDatos||{};w=m.FormaContactos=m.FormaContactos||{};x=m.FormaFormasPago=m.FormaFormasPago||{};y=m.ReporteConsolidado=m.ReporteConsolidado||{};z=m.TablaPagos=m.TablaPagos||{};A=m.ListaDocs=m.ListaDocs||{};B=m.FormaAutorizacion=m.FormaAutorizacion||{};C=m.FormaContrato=m.FormaContrato||{};D=m.Transacciones=m.Transacciones||{};E=m.Pendientes=m.Pendientes||{};F=a.EventTarget;G=a.Node;H=f.JavaScript=f.JavaScript||{};I=H.JS=H.JS||{};J=f.Unchecked=f.Unchecked||{};K=j.LayoutEngineModule=j.LayoutEngineModule||{};L=f.Option=f.Option||{};M=c.TypesV0=c.TypesV0||{};N=M.Aliado=M.Aliado||{};O=c.Aliado=c.Aliado||{};P=h.Templating=h.Templating||{};Q=P.Runtime=P.Runtime||{};R=Q.Server=Q.Server||{};S=R.TemplateInstance=R.TemplateInstance||{};T=f.Arrays=f.Arrays||{};U=R.ProviderBuilder=R.ProviderBuilder||{};V=R.Handler=R.Handler||{};W=a.prozperProd$js_Templates=a.prozperProd$js_Templates||{};X=a.prozperProd$js_GeneratedPrintf=a.prozperProd$js_GeneratedPrintf||{};Y=a.prozperProd$js_Router=a.prozperProd$js_Router||{};Z=h.Doc=h.Doc||{};_0=m.Rpc=m.Rpc||{};_1=M.IdAliado=M.IdAliado||{};_2=M.Modelo=M.Modelo||{};_3=h.ConcreteVar=h.ConcreteVar||{};_4=h.Snap=h.Snap||{};_5=a.StartupCode$prozperProd_js$prozperProd_js=a.StartupCode$prozperProd_js$prozperProd_js||{};_6=h.ListModel=h.ListModel||{};_7=k.PlugInVar=k.PlugInVar||{};_8=k.PlugInView=k.PlugInView||{};_9=k.PlugInDoc=k.PlugInDoc||{};_=H.Pervasives=H.Pervasives||{};$=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};ba=$.LazyRecord=$.LazyRecord||{};bb=a.ProzperServer_GeneratedPrintf=a.ProzperServer_GeneratedPrintf||{};bc=f.Seq=f.Seq||{};bd=b.Library=b.Library||{};be=bd.SortWith=bd.SortWith||{};bf=O.Buscar=O.Buscar||{};bg=f.Collections=f.Collections||{};bh=bg.FSharpSet=bg.FSharpSet||{};bi=bg.Set=bg.Set||{};bj=f.Strings=f.Strings||{};bk=M.CorreoElectronico=M.CorreoElectronico||{};bl=m.DatosPersonales=m.DatosPersonales||{};bm=m.CorreoElectronico=m.CorreoElectronico||{};bn=m.Telefono=m.Telefono||{};bo=m.Direccion=m.Direccion||{};bp=bd.Monads=bd.Monads||{};bq=bp.AsyncResultBuilder=bp.AsyncResultBuilder||{};br=m.Refresh=m.Refresh||{};bs=a.System=a.System||{};bt=bs.Guid=bs.Guid||{};bu=m.VariousUI=m.VariousUI||{};bv=h.HtmlModule=h.HtmlModule||{};bw=bv.attr=bv.attr||{};bx=h.ViewBuilder=h.ViewBuilder||{};by=M.StatusAliado=M.StatusAliado||{};bz=f.List=f.List||{};bA=M.CuentaBancaria=M.CuentaBancaria||{};bB=M.RoutingNumber=M.RoutingNumber||{};bC=M.NumeroCuenta=M.NumeroCuenta||{};bD=f.Utils=f.Utils||{};bE=M.FormaPago=M.FormaPago||{};bF=bp.Result=bp.Result||{};bG=M.Archivo=M.Archivo||{};bH=bp.Extensions=bp.Extensions||{};bI=j.ListModel=j.ListModel||{};bJ=j.Date=j.Date||{};bK=bd.String=bd.String||{};bL=M.TipoArchivo=M.TipoArchivo||{};bM=M.StatusArchivo=M.StatusArchivo||{};bN=a.Blob;bO=M.CuentaPago=M.CuentaPago||{};bP=m.FormaFirma=m.FormaFirma||{};bQ=M.PremisasCalculo=M.PremisasCalculo||{};bR=k.PlugInAction=k.PlugInAction||{};bS=d.Msal=d.Msal||{};bT=a.WindowOrWorkerGlobalScope;bU=j.LayoutEngine=j.LayoutEngine||{};bV=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};bW=M.IdForAuthorize=M.IdForAuthorize||{};bX=M.DatosPersonales=M.DatosPersonales||{};bY=M.DiaPago=M.DiaPago||{};bZ=M.TipoAliado=M.TipoAliado||{};b0=f.Numeric=f.Numeric||{};b1=a.StartupCode$ProzperServer$ProzperServer=a.StartupCode$ProzperServer$ProzperServer||{};b2=bg.List=bg.List||{};b3=bg.Dictionary=bg.Dictionary||{};b4=bg.HashSet=bg.HashSet||{};b5=Q.Client=Q.Client||{};b6=h.Abbrev=h.Abbrev||{};b7=b6.Async=b6.Async||{};b8=b6.Fresh=b6.Fresh||{};b9=bF.Builder=bF.Builder||{};b_=bF.BuilderP=bF.BuilderP||{};b$=bp.Eff=bp.Eff||{};ca=b$.EffBuilder=b$.EffBuilder||{};cb=bp.AsyncResultBuilderP=bp.AsyncResultBuilderP||{};cc=f.Slice=f.Slice||{};cd=j.Msal=j.Msal||{};ce=cd.Policy=cd.Policy||{};cf=cd.Configuration=cd.Configuration||{};cg=cd.AuthOptions=cd.AuthOptions||{};ch=f.Control=f.Control||{};ci=ch.MailboxProcessor=ch.MailboxProcessor||{};cj=bd.Mailbox=bd.Mailbox||{};ck=m.EndPoint=m.EndPoint||{};cl=h.Router=h.Router||{};cm=f.Remoting=f.Remoting||{};cn=c.Rpc0=c.Rpc0||{};co=M.IdPayment=M.IdPayment||{};cp=k.PlugInQuery=k.PlugInQuery||{};cq=bg.FSharpMap=bg.FSharpMap||{};cr=f.Enumerator=f.Enumerator||{};cs=cr.T=cr.T||{};ct=bg.BalancedTree=bg.BalancedTree||{};cu=bz.T=bz.T||{};cv=M.Genero=M.Genero||{};cw=bd.ParseO=bd.ParseO||{};cx=M.Pais=M.Pais||{};cy=M.Telefono=M.Telefono||{};cz=M.TipoTelefono=M.TipoTelefono||{};cA=M.Direccion=M.Direccion||{};cB=M.TipoDireccion=M.TipoDireccion||{};cC=M.Estado=M.Estado||{};cD=M.ZonaPostal=M.ZonaPostal||{};cE=bp.AsyncResult=bp.AsyncResult||{};cF=cm.AjaxRemotingProvider=cm.AjaxRemotingProvider||{};cG=bd.Array=bd.Array||{};cH=M.TarjetaCredito=M.TarjetaCredito||{};cI=M.Subscripcion=M.Subscripcion||{};cJ=M.NumeroTarjeta=M.NumeroTarjeta||{};cK=m.CuentaBancaria=m.CuentaBancaria||{};cL=m.TarjetaCredito=m.TarjetaCredito||{};cM=a.Object;cN=h.FromView=h.FromView||{};cO=f.Concurrency=f.Concurrency||{};cP=h.AttrProxy=h.AttrProxy||{};cQ=h.Array=h.Array||{};cR=M.TipoCuenta=M.TipoCuenta||{};cS=h.Storage=h.Storage||{};cT=h.AttrModule=h.AttrModule||{};cU=a.GeneratedPrintf=a.GeneratedPrintf||{};cV=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};cW=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};cX=j.WebComponent=j.WebComponent||{};cY=cX.WcTabStrip=cX.WcTabStrip||{};cZ=cY.WcTabStripT=cY.WcTabStripT||{};c0=cX.WcSplitter=cX.WcSplitter||{};c1=bd.Serializer=bd.Serializer||{};c2=M.Expiracion=M.Expiracion||{};c3=M.TipoTarjeta=M.TipoTarjeta||{};c4=bg.DictionaryUtil=bg.DictionaryUtil||{};c5=h.CheckedInput=h.CheckedInput||{};c6=h.Client=h.Client||{};c7=c6.Templates=c6.Templates||{};c8=j.Pojo=j.Pojo||{};c9=a.Error;c_=f.TimeoutException=f.TimeoutException||{};c$=H.Promise=H.Promise||{};da=f.Sitelets=f.Sitelets||{};db=da.RouterOperators=da.RouterOperators||{};dc=da.RouterModule=da.RouterModule||{};dd=da.Route=da.Route||{};de=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};df=bg.MapUtil=bg.MapUtil||{};dg=ct.Tree=ct.Tree||{};dh=M.IdAddress=M.IdAddress||{};di=M.IdSubscription=M.IdSubscription||{};dj=h.Docs=h.Docs||{};dk=cO.AsyncBody=cO.AsyncBody||{};dl=cO.CT=cO.CT||{};dm=h.Attrs=h.Attrs||{};dn=h.DomUtility=h.DomUtility||{};_do=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};dp=cS.ArrayStorage=cS.ArrayStorage||{};dq=j.Var=j.Var||{};dr=M.ConceptoPago=M.ConceptoPago||{};ds=E.Enlace=E.Enlace||{};dt=K.Layout=K.Layout||{};du=f.DateUtil=f.DateUtil||{};dv=c0.WcSplitterT=c0.WcSplitterT||{};dw=h.DocElemNode=h.DocElemNode||{};dx=a.CharacterData;dy=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};dz=ch.FSharpEvent=ch.FSharpEvent||{};dA=bg.LinkedList=bg.LinkedList||{};dB=cd.AuthenticationParameters=cd.AuthenticationParameters||{};dC=cd.Account=cd.Account||{};dD=da.Router=da.Router||{};dE=da.List=da.List||{};dF=cm.XhrProvider=cm.XhrProvider||{};dG=bg.Pair=bg.Pair||{};dH=f.Result=f.Result||{};dI=cO.Scheduler=cO.Scheduler||{};dJ=f.CancellationTokenSource=f.CancellationTokenSource||{};dK=h.DynamicAttrNode=h.DynamicAttrNode||{};dL=K.Measures=K.Measures||{};dM=j.Hoverable=j.Hoverable||{};dN=dM.Hoverable=dM.Hoverable||{};dO=a.Event;dP=a.UIEvent;dQ=j.ResizeObserver=j.ResizeObserver||{};dR=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};dS=h.Elt=h.Elt||{};dT=c6.Attrs=c6.Attrs||{};dU=dT.Dyn=dT.Dyn||{};dV=c7.Prepare=c7.Prepare||{};dW=h.An=h.An||{};dX=c6.Settings=c6.Settings||{};dY=b6.Mailbox=b6.Mailbox||{};dZ=bg.HashSetUtil=bg.HashSetUtil||{};d0=ch.Event=ch.Event||{};d1=d0.Event=d0.Event||{};d2=H.NonStandardPromiseRejectionException=H.NonStandardPromiseRejectionException||{};d3=a.StartupCode$WebSharper_Sitelets$Router=a.StartupCode$WebSharper_Sitelets$Router||{};d4=bg.Map=bg.Map||{};d5=f.OperationCanceledException=f.OperationCanceledException||{};d6=f.Queue=f.Queue||{};d7=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};d8=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};d9=f.AggregateException=f.AggregateException||{};d_=bg.KeyCollection=bg.KeyCollection||{};d$=h.Updates=h.Updates||{};ea=c6.Docs=c6.Docs||{};eb=ea.RunState=ea.RunState||{};ec=ea.NodeSet=ea.NodeSet||{};ed=h.Anims=h.Anims||{};ee=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};ef=f.Char=f.Char||{};eg=f.Json=f.Json||{};eh=da.StringEncoding=da.StringEncoding||{};ei=f.FormatException=f.FormatException||{};ej=h.String=h.String||{};ek=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};el=h.AppendList=h.AppendList||{};em=bg.LinkedListEnumerator=bg.LinkedListEnumerator||{};en=da.PathUtil=da.PathUtil||{};eo=h.Easing=h.Easing||{};ep=b6.HashSet=b6.HashSet||{};eq=ea.DomNodes=ea.DomNodes||{};er=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};es=a.IntelliFactory;et=es&&es.Runtime;eu=a.Math;ev=a.jQuery;ew=a.console;ex=a.Date;ey=a.JSON;ez=a.Reflect;eA=a.String;e.mainProgram=function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT;eB=i.Create$1(e.appName());eC=p.Map(function(eU){return e.mesToString(eU.periodoActual);},m.modeloV().get_View());eD=p.Map(function(eU){return a.String(eU.anoActual);},m.modeloV().get_View());eE=p.Map(function(eU){return O.nombre2(eU.datosPersonales);},m.aliadoW());eF=p.Map(function(eU){return eU.id.get_Id();},m.aliadoW());eG=p.Map(function(eU){return a.String(eU.status);},m.aliadoW());eH=p.Map(function(eU){return a.String(eU.comision);},m.aliadoW());eI=p.Map(function(eU){return a.String(eU.nReferidos);},m.aliadoW());k.addPlugIn(l.New(e.appName(),[k.newVar("title",eB),k.newVar("contentVar",m.contentVar()),k.newVar("invitaciones",m.invitacionesV()),k.newVar("influencer",e.influencerV())],[k.newViw("mesActual",eC),k.newViw("anoActual",eD),k.newViw("aliado",eE),k.newViw("idAliado",eF),k.newViw("status",eG),k.newViw("comision",eH),k.newViw("datos",eI),k.newViw("emailsInvitar",m.emailsInvitarW()),k.newViw("invitacionesDisabled",m.invitacionesDisabledW()),k.newViw("VideoW",p.Map(function(eU){return eU.$==5?eU.$0:"";},m.endPointV().get_View())),k.newViw("influencerClassW",e.influencerClassW())],[k.newDoc("Aliados",r.Create(s.aliados)),k.newDoc("Aliado",r.Create(t.aliado)),k.newDoc("Calculo",r.Create(t.calculo)),k.newDoc("FormaRegistro",r.Create(u.formaDoc)),k.newDoc("FormaDatos",r.Create(v.formaDoc)),k.newDoc("FormaContactos",r.Create(w.formaDoc)),k.newDoc("FormaFormasPago",r.Create(x.formaDoc)),k.newDoc("contentDoc",r.Create(e.getContentDoc)),k.newDoc("ReporteConsolidado",r.Create(y.consolidado)),k.newDoc("TablaPagos",r.Create(z.comisiones)),k.newDoc("ListaDocs",r.Create(A.listaDocs)),k.newDoc("FormaAutorizacion",r.Create(B.formaAutorizacion)),k.newDoc("FormaContrato",r.Create(C.formaContrato)),k.newDoc("Transacciones",r.Create(D.transacciones)),k.newDoc("Pendientes",r.Create(function(){return E.pendientes(m.aliadoW());}))],[k.newAct("Logout",function(){e.logout();}),k.newAct("LogIn",function(){e.login();}),k.newAct("enviarInvitaciones",function(){e.enviarCorreosInvitacion();}),k.newAct("gotoInfluencer",function(){e.gotoInfluencer();})],[]));K.addLayout((eJ=(eK=self.document.getElementById("GlobalLayout"),J.Equals(eK,null)?"\r\n                            menuEditor layout\r\n                            |          main\r\n            \r\n                            main div \"\"\r\n                            :                 template  header     \"id=header\"           brand  brandV   logout \"@{Prozper.Logout}\" afiliado \"@{Prozper.aliado}\"\r\n                            :                 Doc       Prozper.contentDoc\r\n                            :                 template  sidedrawer \"id=sidedrawer\"       brand  brandV   idaliado \"@{Prozper.idAliado}\" \r\n                            :                 template  footer     \"id=footer\"           brand  brandV   madeby \"CIPHER Bsc\" madebylink \"www.cipherbsc.com\"\r\n             \r\n                            mainContent          template  content    \"id=content-wrapper\"  content aliados                  fecha \"@{Prozper.mesActual} @{Prozper.anoActual}\" idaliado \"@{Prozper.aliado}\"\r\n                            cntFormaRegistro     template  content    \"id=content-wrapper\"  content Prozper.FormaRegistro    titulo \"Referido por: @{Prozper.aliado}\"  \r\n                            cntFormaDatos        template  content    \"id=content-wrapper\"  content Prozper.FormaDatos       titulo \" \"\r\n                            cntFormaContactos    template  content    \"id=content-wrapper\"  content Prozper.FormaContactos   titulo \" \" \r\n                            cntFormaFormasPago   template  content    \"id=content-wrapper\"  content Prozper.FormaFormasPago  titulo \" \" \r\n                            cntFormaCuentas      template  content    \"id=content-wrapper\"  content ProzperLyt.FormaCuentas  titulo \" \"  \r\n                            cntFormaDocumentos   template  content    \"id=content-wrapper\"  content Prozper.FormaDocumentos  titulo \" \"  \r\n                            cntFormaNoUser       template  content    \"id=content-wrapper\"  content botonLogin               titulo \" \"  \r\n                            cntFormaInvitaciones template  content    \"id=content-wrapper\"  content invitaciones             titulo \" \"  \r\n            \r\n                            aliados          div       \"class=row\"\r\n                            :                div       \"class=mui-col-md-6\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar;max-height:550px;overflow:auto\" Prozper.Aliados\r\n                            :                div       \"class=mui-col-md-6\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar;max-height:550px;overflow:auto\" Aliado Comisiones\r\n                            brandV           Var       \"Prozper\"\r\n            \r\n                            botonLogin       div       \"class=row\"\r\n                            :                div       \"class=mui-col-md-6\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar;max-height:550px;overflow:auto\" \r\n                            :::              button    Prozper.LogIn \"class=mui-btn mui-btn--primary\" \"Ingresar al Sistema\"\r\n            \r\n                            invitaciones     div       \"class=row\"\r\n                            :                div       \"class=mui-col-md-6 mui-col-md-offset-1\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar; max-height:550px ; overflow:auto\" \r\n                            :::              h1        \"\" \"Enviar Invitaciones\"\r\n                            :::              textarea  Prozper.invitaciones  \"width:100% ; height:30rem; placeholder=Copie aqui las direcciones de correo electronico\" \r\n                            :                div       \"white-space: pre-wrap\" \"@{Prozper.emailsInvitar}\"\r\n                            :                button    Prozper.enviarInvitaciones \"class=mui-btn mui-btn--raised mui-btn--primary;@{Prozper.invitacionesDisabled}\" \"Enviar\"\r\n            \r\n                            Aliado           div       \"class=mui-col-md-8\"\r\n                            :                Doc Prozper.Aliado\r\n            \r\n                            Comisiones       template    tablacomisiones \"class=mui-col-md-3\"  tbody filasComisiones\r\n                            filasComisiones  concat      \"\"\r\n                            :                template    filacomision    \"\"  periodo \"Ene 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Feb 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Mar 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Abr 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"May 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Jun 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Jul 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Ago 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Sep 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Oct 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Nov 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Dec 2018\" comision \"$1,000\"\r\n                    \r\n                            menuEditorx      horizontal  65          menuLogo                  editorMessages\r\n                            double           horizontal  0-50-100    AppFramework.AppFwkClient menuEditor\r\n                            menuLogo         vertical    350         logo                      menu\r\n                            logo             span       \"margin:0;   color:gray; font-size: 55px; font-weight:530\" \"StackOverflow\"\r\n                            editorMessages   horizontal  10-83-100   editorButtons             messages\r\n                            messages         vertical    0-50-100    messagesLeft              messagesRight\r\n                            editorButtons    vertical    150 buttons snippetsSnippet \r\n                            snippetsSnippet  vertical    0-20-100    snippets                  editorProperties\r\n                            snippets         horizontal  20          \"@{FSharpStation.CurrentPath}\" tblDimensions2\r\n                            editorProperties vertical    0-100-100   snippet                   properties\r\n                            properties       div        \"\"           FSharpStation.Properties\r\n                            snippet          horizontal  35          Name                      FSharpStation.editor\r\n                            menu             span       \"display: grid; grid-template-columns: 30% 20% 20% 10%; grid-gap: 25px; margin:5px; grid-template-rows:50px\" inpServer btnLoad btnSaveAs\r\n                             \r\n                            severalTabs      wcomp-tabstrip  \"\" \r\n                            :                div \"tabname=Dimensions\" \r\n                            ::               div \"\" btnAddDimension RuleEditor.Dimensions\r\n                            :                div \"tabname=Cubes\"\r\n                            :                div \"tabname=Global Definitions\" RuleEditor.globalDefs\r\n                    \r\n                            btnSaveAs        button RuleEditor.SaveAs         \"class=btn @{RuleEditor.SaveNeeded}\" \"Save as...    \"\r\n                            btnAddDimension  button RuleEditor.AddDimension      \"\"                  \"new dim...\"\r\n                            btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\r\n                            btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\r\n                            btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\r\n                            btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\r\n                            btnAbortFsi      button FSharpStation.AbortFsi       \"\"                  \"Abort Fsi     \"\r\n                    \r\n                            messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\r\n                            messagesRight    wcomp-tabstrip                      \"\"                  Parser\r\n                    \r\n                            buttons          div \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\"\r\n                            :                button RuleEditor.AddCalculation    \"\"                 \"Add Calculation\"\r\n                            :                button RuleEditor.AddTotal          \"\"                 \"Add Total\"\r\n                            :                Doc       none x\r\n                            :                button RuleEditor.IndentIn          \"\"                  \"Indent In  >> \"\r\n                            :                button RuleEditor.IndentOut         \"\"                  \"Indent Out << \"\r\n                    \r\n                            Output           textarea  RuleEditor.Output         \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \r\n                            FsCode           textarea  RuleEditor.CodeFS         \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \r\n                            Parser           textarea  RuleEditor.Parser         \"tabname=Parser ; placeholder=Parser messages; dblclick=@{FSharpStation.JumpTo} ; spellcheck=false\" \r\n                            Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\r\n                            inpServer        Doc       InputLabel                \"\"     \"Server:\"      RuleEditor.Server\r\n                            btnLoad          Doc       InputFile                 \"\"     \"Load File...\" RuleEditor.LoadFile  FileName\r\n                            btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\r\n                            FileName         div                                 \"class=form-control\"  RuleEditor.fileName\r\n            \r\n                       ":eK.textContent),K.newLyt(e.layoutName(),eJ)));eL=(eM=null,(eN=e.layoutName(),eM==null?eN:eM.$0));k.mainDocV().Set(eL);Z.BindView(function(eU){var eV,eW,eX;return J.Equals(eU.id,O.empty().id)?(eV=U.Make(),(eW=V.CompleteHoles(eV.k,eV.h,[]),(eX=new S.New(eW[1],W.opcionesadministrador(eW[0])),(eV.i=eX,eX)))).get_Doc():Z.get_Empty();},m.aliadoW());eO=(eP=(eQ=e.getDocView(e.layoutName(),"headerCenter"),(eR=e.getMenuDoc(),(eS=e.getContentDoc(),U.Make().WithHole({$:0,$0:"maincontent",$1:eS})).WithHole({$:0,$0:"menu",$1:eR})).WithHole({$:0,$0:"headercenter",$1:eQ})),eP.WithHole(V.EventQ2(eP.k,"logout",function(){return eP.i;},function(){e.logout();}))).WithHole({$:2,$0:"cortina",$1:p.Map(function(eU){return eU>0?"mui-overlay":"not-mui-overlay";},_0.llamadas())});eT=V.CompleteHoles(eO.k,eO.h,[]);eO.i=new S.New(eT[1],c7.RunFullDocTemplate(eT[0]));p.Sink(function(eU){self.document.title=eU;},eB.get_View());};e.appName=function(){_5.$cctor();return _5.appName;};e.influencerV=function(){_5.$cctor();return _5.influencerV;};e.influencerClassW=function(){_5.$cctor();return _5.influencerClassW;};e.getContentDoc=function(){return Z.EmbedView(p.Map(function(eB){return e.getDoc(e.appName(),eB);},m.contentVar().get_View()));};e.logout=function(){bS.logout();};e.login=function(){bS.logout();};e.enviarCorreosInvitacion=function(){var eB;_0.iterA((eB=bp.asyncResult(),eB.Run(eB.Delay(function(){return bH["AsyncResultBuilder.Bind"](eB,p.GetAsync(m.emailsInvitarW()),function(eC){return bH["AsyncResultBuilder.Bind"](eB,p.GetAsync(p.Map(function(eD){return eD.id.get_Id();},m.aliadoW())),function(){var eD;eD=T.filter(function(eE){return bj.Trim(eE)!=="";},bj.SplitChars(eC,["\n"],0));return eB.Bind$1(_0.enviarCorreosInvitacion("Invitacion a Prozper",eD),function(){var eE;eE=T.length(eD);return eE===0?(a.alert("Ningun correo valido ha sido encontrado"),eB.Zero()):eE===1?(a.alert("Invitacion ha sido enviada"),eB.Zero()):(a.alert("Invitaciones han sido enviadas"),eB.Zero());});});});}))));};e.gotoInfluencer=function(){var eB;cO.Start((eB=null,cO.Delay(function(){return cO.Bind(_0.obtenerIdInfluyente(e.influencerV().Get()),function(eC){return eC.$==0?(self.location.href="/Register/"+e.influencerV().Get(),cO.Zero()):(self.alert("Código inválido:"+e.influencerV().Get()),cO.Zero());});})),null);};e.layoutName=function(){_5.$cctor();return _5.layoutName;};e.getMenuDoc=function(){return Z.EmbedView(p.Map2(function(eB,eC){var eD;eD=eB!=null&&eB.$==1?J.Equals(eC.id,O.empty().id)?"ProzperLyt.mnuAdministrador":"ProzperLyt.mnuUsuario":"ProzperLyt.mnuNoUsuario";return e.getDoc(e.appName(),eD);},bS.userO().get_View(),m.aliadoW()));};e.getDocView=function(eB,eC){return K.turnToView(function(){return e.getDoc(eB,eC);});};e.mesToString=function(eB){return eB===1?"Ene":eB===2?"Feb":eB===3?"Mar":eB===4?"Abr":eB===5?"May":eB===6?"Jun":eB===7?"Jul":eB===8?"Ago":eB===9?"Sep":eB===10?"Oct":eB===11?"Nov":eB===12?"Dic":"---";};e.getDoc=function(eB,eC){var eD,eE,eF;eD=(eE=(eF=((K.splitName())(eB))(eC),k.tryGetDoc(eF[0],eF[1])),eE==null?null:{$:1,$0:K.getDocFinal(cu.Empty,eE.$0)});return eD==null?K.errDoc((function(eG){return function(eH){return eG("Doc not found "+bD.toSafe(eH));};}(a.id))(eC)):eD.$0;};g=f.Obj=et.Class({Equals:function(eB){return this===eB;},GetHashCode:function(){return -1;}},null,g);g.New=et.Ctor(function(){},g);i=h.Var$1=et.Class({},g,i);i.Create$1=function(eB){return new _3.New(false,_4.New({$:2,$0:eB,$1:[]}),eB);};i.Lens=function(eB,eC,eD){var eE,eF,eG;eE=b8.Id();eF=p.Map(eC,eB.get_View());eG=new q({Get:function(){return eC(eB.Get());},Set:function(eH){return eB.Update(function(eI){return eD(eI,eH);});},SetFinal:function(eH){return this.Set(eH);},Update:function(eH){return eB.Update(function(eI){return eD(eI,eH(eC(eI)));});},UpdateMaybe:function(eH){return eB.UpdateMaybe(function(eI){var eJ;eJ=eH(eC(eI));return eJ==null?null:{$:1,$0:eD(eI,eJ.$0)};});},get_View:function(){return eF;},get_Id:function(){return eE;}});q.New.call(eG);return eG;};i.Set=function(eB,eC){eB.Set(eC);};k.addPlugIn=function(eB){k.plugIns().Append(eB);k.mainDocV().Set(k.mainDocV().Get());};k.newVar=function(eB,eC){return _7.New(eB,eC);};k.newViw=function(eB,eC){return _8.New(eB,eC);};k.newDoc=function(eB,eC){return _9.New(eB,{$:0,$0:eC});};k.newAct=function(eB,eC){return bR.New(eB,{$:0,$0:eC},p.Const(true));};k.mainDocV=function(){bV.$cctor();return bV.mainDocV;};k.plugIns=function(){bV.$cctor();return bV.plugIns;};k.newDocF=function(eB,eC){return _9.New(eB,eC);};k.tryGetDoc=function(eB,eC){var eD;eD=k.tryGetPlugIn(eB);return eD==null?null:T.tryFind(function(eE){return eE.docName===eC;},eD.$0.plgDocs);};k.tryGetAct=function(eB,eC){var eD;eD=k.tryGetPlugIn(eB);return eD==null?null:T.tryFind(function(eE){return eE.actName===eC;},eD.$0.plgActions);};k.callFunction=function(eB,eC,eD){if(eD.$==1)eD.$0(eB);else if(eD.$==2)(eD.$0(eB))(eC);else eD.$0();};k.tryGetVar=function(eB,eC){var eD;eD=k.tryGetPlugIn(eB);return eD==null?null:T.tryFind(function(eE){return eE.varName===eC;},eD.$0.plgVars);};k.selectionPlugInO=function(){bV.$cctor();return bV.selectionPlugInO;};k.defaultPlugIn=function(){bV.$cctor();return bV.defaultPlugIn;};k.currentPlugInW=function(){bV.$cctor();return bV.currentPlugInW;};k.renderPlugIns=function(){return Z.Flatten(k.plugIns().MapLens(function(eB){var eC,eD,eE,eF;return(eC=(eD=U.Make().WithHole({$:1,$0:"name",$1:eB}),eD.WithHole(V.EventQ2(eD.k,"select",function(){return eD.i;},function(){k.selectionPlugInO().Set({$:1,$0:eB});}))).WithHole({$:2,$0:"selected",$1:p.Map(function(eG){return J.Equals(eG,{$:1,$0:eB})?"selected":"";},k.selectionPlugInO().get_View())}),(eE=V.CompleteHoles(eC.k,eC.h,[]),(eF=new S.New(eE[1],cV.tile(eE[0])),(eC.i=eF,eF)))).get_Doc();}));};k.renderVars=function(){function eB(eD,eE){return[eD.plgName,eE.varName];}function eC(eD,eE){var eF,eG,eH;return(eF=U.Make().WithHole({$:1,$0:"name",$1:eE.varName}).WithHole({$:8,$0:"value",$1:eE.varVar}),(eG=V.CompleteHoles(eF.k,eF.h,[["value",0]]),(eH=new S.New(eG[1],cV.namevalueinput(eG[0])),(eF.i=eH,eH)))).get_Doc();}return Z.ConvertBy(function(eD){return eB(eD[0],eD[1]);},function(eD){return eC(eD[0],eD[1]);},p.Map(function(eD){return bc.map(function(eE){return[eD,eE];},eD.plgVars);},k.currentPlugInW()));};k.renderViews=function(){function eB(eD,eE){return[eD.plgName,eE.viwName];}function eC(eD,eE){var eF,eG,eH;return(eF=U.Make().WithHole({$:1,$0:"name",$1:eE.viwName}).WithHole({$:2,$0:"value",$1:eE.viwView}),(eG=V.CompleteHoles(eF.k,eF.h,[]),(eH=new S.New(eG[1],cV.namevalue(eG[0])),(eF.i=eH,eH)))).get_Doc();}return Z.ConvertBy(function(eD){return eB(eD[0],eD[1]);},function(eD){return eC(eD[0],eD[1]);},p.Map(function(eD){return bc.map(function(eE){return[eD,eE];},eD.plgViews);},k.currentPlugInW()));};k.renderDocs=function(){function eB(eD,eE){return[eD.plgName,eE.docName];}function eC(eD,eE){var eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;return(eF=(eG=(eH=eE.docName+(eI=eE.docDoc,eI.$==1?(eJ=bj.concat(", ",bz.ofArray([eI.$1])),(function(eQ){return function(eR){return eQ("("+bD.toSafe(eR)+")");};}(a.id))(eJ)):eI.$==2?(eK=bj.concat(", ",bz.ofArray([eI.$1,eI.$2])),(function(eQ){return function(eR){return eQ("("+bD.toSafe(eR)+")");};}(a.id))(eK)):eI.$==3?(eL=bj.concat(", ",bz.ofArray([eI.$1,eI.$2,eI.$3])),(function(eQ){return function(eR){return eQ("("+bD.toSafe(eR)+")");};}(a.id))(eL)):eI.$==4?(eM=bj.concat(", ",bz.ofArray([eI.$1,eI.$2,eI.$3,eI.$4])),(function(eQ){return function(eR){return eQ("("+bD.toSafe(eR)+")");};}(a.id))(eM)):eI.$==5?(eN=bj.concat(", ",bz.ofArray([eI.$1,eI.$2,eI.$3,eI.$4,eI.$5])),(function(eQ){return function(eR){return eQ("("+bD.toSafe(eR)+")");};}(a.id))(eN)):""),U.Make().WithHole({$:1,$0:"name",$1:eH})),eG.WithHole(V.EventQ2(eG.k,"select",function(){return eG.i;},function(){p.Get(function(eQ){k.mainDocV().Set(eQ.plgName+"."+eE.docName);},k.currentPlugInW());}))),(eO=V.CompleteHoles(eF.k,eF.h,[]),(eP=new S.New(eO[1],cV.tile(eO[0])),(eF.i=eP,eP)))).get_Doc();}return Z.ConvertBy(function(eD){return eB(eD[0],eD[1]);},function(eD){return eC(eD[0],eD[1]);},p.Map(function(eD){return bc.map(function(eE){return[eD,eE];},eD.plgDocs);},k.currentPlugInW()));};k.renderActions=function(){function eB(eD,eE){return[eD.plgName,eE.actName];}function eC(eD,eE){var eF,eG,eH,eI;eF=(eG=eE.actFunction,eG.$==1?(eH=bj.concat(", ",bz.ofArray([eG.$1])),(function(eJ){return function(eK){return eJ("("+bD.toSafe(eK)+")");};}(a.id))(eH)):eG.$==2?(eI=bj.concat(", ",bz.ofArray([eG.$1,eG.$2])),(function(eJ){return function(eK){return eJ("("+bD.toSafe(eK)+")");};}(a.id))(eI)):"");return Z.EmbedView(p.Map(function(eJ){var eK,eL,eM,eN,eO,eP,eQ,eR;return eJ?(eK=(eL=U.Make().WithHole({$:1,$0:"name",$1:eE.actName+eF}),eL.WithHole(V.EventQ2(eL.k,"click",function(){return eL.i;},function(eS){k.callFunction(eS,null,eE.actFunction);}))),(eM=V.CompleteHoles(eK.k,eK.h,[]),(eN=new S.New(eM[1],cV.action(eM[0])),(eK.i=eN,eN)))).get_Doc():(eO=(eP=U.Make().WithHole({$:1,$0:"name",$1:eE.actName}),eP.WithHole(V.EventQ2(eP.k,"click",function(){return eP.i;},function(eS){k.callFunction(eS,null,eE.actFunction);}))),(eQ=V.CompleteHoles(eO.k,eO.h,[]),(eR=new S.New(eQ[1],cV.actiondisabled(eQ[0])),(eO.i=eR,eR)))).get_Doc();},eE.actEnabled));}return Z.ConvertBy(function(eD){return eB(eD[0],eD[1]);},function(eD){return eC(eD[0],eD[1]);},p.Map(function(eD){return bc.map(function(eE){return[eD,eE];},eD.plgActions);},k.currentPlugInW()));};k.renderQueries=function(){function eB(eD,eE){return[eD.plgName,eE.qryName];}function eC(eD,eE){var eF,eG,eH,eI;return(eF=(eG=U.Make().WithHole({$:1,$0:"name",$1:eE.qryName}),eG.WithHole(V.EventQ2(eG.k,"select",function(){return eG.i;},function(){a.alert(eE.qryFunction(null));}))),(eH=V.CompleteHoles(eF.k,eF.h,[]),(eI=new S.New(eH[1],cV.tile(eH[0])),(eF.i=eI,eI)))).get_Doc();}return Z.ConvertBy(function(eD){return eB(eD[0],eD[1]);},function(eD){return eC(eD[0],eD[1]);},p.Map(function(eD){return bc.map(function(eE){return[eD,eE];},eD.plgQueries);},k.currentPlugInW()));};k.newQry=function(eB,eC){return cp.New(eB,eC);};k.AppFwkClient=function(){bV.$cctor();return bV.AppFwkClient;};k.actHello=function(){bV.$cctor();return bV.actHello;};k.qryDocs=function(){bV.$cctor();return bV.qryDocs;};k.horizontal=function(eB,eC,eD,eE,eF){var eG,eH,eI,eJ;return(eG=(eH=U.Make().WithHole({$:2,$0:"partsizes",$1:eB}).WithHole({$:7,$0:"afterrender",$1:eC}).WithHole({$:7,$0:"afterrendersp",$1:eD}),eH.WithHole(V.EventQ2(eH.k,"mousedown",function(){return eH.i;},function(eK){eE(eK.Event);}))).WithHole({$:2,$0:"gap",$1:eF}),(eI=V.CompleteHoles(eG.k,eG.h,[]),(eJ=new S.New(eI[1],cV.wcompsplitterhor(eI[0])),(eG.i=eJ,eJ)))).get_Doc();};k.vertical=function(eB,eC,eD,eE,eF){var eG,eH,eI,eJ;return(eG=(eH=U.Make().WithHole({$:2,$0:"partsizes",$1:eB}).WithHole({$:7,$0:"afterrender",$1:eC}).WithHole({$:7,$0:"afterrendersp",$1:eD}),eH.WithHole(V.EventQ2(eH.k,"mousedown",function(){return eH.i;},function(eK){eE(eK.Event);}))).WithHole({$:2,$0:"gap",$1:eF}),(eI=V.CompleteHoles(eG.k,eG.h,[]),(eJ=new S.New(eI[1],cV.wcompsplitterver(eI[0])),(eG.i=eJ,eJ)))).get_Doc();};k.mainDoc=function(){var eB,eC,eD,eE,eF,eG;return(eB=(eC=k.getMainClientDoc(),(eD=(eE=k.mainDocV().get_View(),U.Make().WithHole({$:2,$0:"maindoc",$1:eE})),eD.WithHole(V.EventQ2(eD.k,"goclient",function(){return eD.i;},function(){k.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:eC})),(eF=V.CompleteHoles(eB.k,eB.h,[]),(eG=new S.New(eF[1],cV.appframework(eF[0])),(eB.i=eG,eG)))).get_Doc();};k.splitName=function(eB){function eC(eE){return bK.splitByChar(".",eE);}function eD(eE){return T.length(eE)===1?[eB,T.get(eE,0)]:[T.get(eE,0),T.get(eE,1)];}return function(eE){return eD(eC(eE));};};k.tryGetPlugIn=function(eB){return k.plugIns().TryFindByKey(eB);};k.newActF=function(eB,eC){return bR.New(eB,eC,p.Const(true));};k.tryGetViw=function(eB,eC){var eD;eD=k.tryGetPlugIn(eB);return eD==null?null:T.tryFind(function(eE){return eE.viwName===eC;},eD.$0.plgViews);};k.tryGetWoW=function(eB,eC){var eD,eE,eF;eD=(eE=k.tryGetViw(eB,eC),eE==null?null:{$:1,$0:{$:1,$0:eE.$0.viwView}});return eD==null?(eF=k.tryGetVar(eB,eC),eF==null?null:{$:1,$0:eF.$0.varVar.get_View()}):eD.$0;};k.getMainClientDoc=function(){var eB;return Z.EmbedView((eB=k.plugIns().v,p.Map2(function(eC,eD){var eE,eF;eE=bc.tryPick(function(eG){var eH;eH=bc.tryFind(function(eI){return eG.plgName===eC||eG.plgName+"."+eI.docName===eC;},eG.plgDocs);return eH==null?null:{$:1,$0:k.getLazyDoc(eH.$0)};},eD);eF=k.AppFwkClient().f();return eE==null?eF:eE.$0;},k.mainDocV().get_View(),eB)));};k.tryGetVoV=function(eB,eC){var eD,eE,eF;eD=(eE=k.tryGetVar(eB,eC),eE==null?null:{$:1,$0:{$:1,$0:eE.$0.varVar}});return eD==null?(eF=k.tryGetViw(eB,eC),eF==null?null:{$:1,$0:new cN.New(eF.$0.viwView,a.ignore)}):eD.$0;};k.getLazyDoc=function(eB){var eC;eC=eB.docDoc;return eC.$==0?eC.$0.f():Z.Element("div",[],[Z.TextNode((function(eD){return function(eE){return eD("Doc with parameters not allowed here: "+cU.p(eE));};}(a.id))(eB))]);};l.New=function(eB,eC,eD,eE,eF,eG){return{plgName:eB,plgVars:eC,plgViews:eD,plgDocs:eE,plgActions:eF,plgQueries:eG};};m.contentVar=function(){_5.$cctor();return _5.contentVar;};m.invitacionesV=function(){_5.$cctor();return _5.invitacionesV;};m.emailsInvitarW=function(){_5.$cctor();return _5.emailsInvitarW;};m.invitacionesDisabledW=function(){_5.$cctor();return _5.invitacionesDisabledW;};m.endPointV=function(){_5.$cctor();return _5.endPointV;};m.aliadoW=function(){_5.$cctor();return _5.aliadoW;};m.modeloV=function(){_5.$cctor();return _5.modeloV;};m.selAliadoIdOV=function(){_5.$cctor();return _5.selAliadoIdOV;};m.money=function(eB){return"$"+m.separate(a.String(eB),cu.Empty);};m.selAliadoIdDoc=function(eB){var eC;return Z.BindView(a.id,(eC=p.get_Do(),p.Bind(function(eD){return p.Bind(function(eE){var eF,eG;eF=eE==null?null:(eG=eE.$0,bc.tryFind(function(eH){return J.Equals(eH.id,eG);},eD.aliados));return p.Const(eF!=null&&eF.$==1?eB(p.Const(eF.$0)):Z.get_Empty());},m.selAliadoIdOV().get_View());},m.modeloV().get_View())));};m.aliadoIdDoc=function(eB){var eC;return Z.BindView(a.id,(eC=p.get_Do(),p.Bind(function(eD){var eE,eF;eE=eD.idAliado;eF=bc.tryFind(function(eG){return J.Equals(eG.id,eE);},eD.aliados);return p.Const(eF!=null&&eF.$==1?eB(p.Const(eF.$0)):Z.get_Empty());},m.modeloV().get_View())));};n.get_LoggedId=function(){var eB,eC;return new _1({$:0,$0:(eB=(eC=bS.userO().Get(),eC==null?null:{$:1,$0:eC.$0.idToken.oid}),eB==null?"":eB.$0)});};m.separate=function(eB,eC){var eD;while(true)if(eB==="")return(function(eE){return function(eF){return bj.concat(eE,eF);};}(","))(eC);else{eD=eB;eB=bd["String.Left$1"](eD,-3);eC=new cu({$:1,$0:bd["String.Right$1"](eD,3),$1:eC});}};m.formasPagoAliadoV=function(){_5.$cctor();return _5.formasPagoAliadoV;};o.FailWith=function(eB){throw new c9(eB);};o.range=function(eB,eC){var eD;eD=1+eC-eB;return eD<=0?[]:bc.init(eD,function(eE){return eE+eB;});};o.toInt=function(eB){var eC;eC=o.toUInt(eB);return eC>=2147483648?eC-4294967296:eC;};o.toUInt=function(eB){return(eB<0?eu.ceil(eB):eu.floor(eB))>>>0;};o.KeyValue=function(eB){return[eB.K,eB.V];};p.Map=function(eB,eC){return p.CreateLazy(function(){return _4.Map(eB,eC());});};p.Sink=function(eB,eC){function eD(){_4.WhenRun(eC(),eB,function(){cO.scheduler().Fork(eD);});}cO.scheduler().Fork(eD);};p.CreateLazy=function(eB){var eC;eC={c:null,o:eB};return function(){var eD,eE;eD=eC.c;return eD===null?(eD=eC.o(),eC.c=eD,(eE=eD.s,eE!=null&&eE.$==0)?eC.o=null:_4.WhenObsoleteRun(eD,function(){eC.c=null;}),eD):eD;};};p.Map2=function(eB,eC,eD){return p.CreateLazy(function(){return _4.Map2(eB,eC(),eD());});};p.Apply=function(eB,eC){return p.Map2(function(eD,eE){return eD(eE);},eB,eC);};p.Map3=function(eB,eC,eD,eE){return p.CreateLazy(function(){return _4.Map3(eB,eC(),eD(),eE());});};p.get_Do=function(){return bx.B;};p.Const=function(eB){var eC;eC=_4.New({$:0,$0:eB});return function(){return eC;};};p.MapAsync=function(eB,eC){return p.CreateLazy(function(){return _4.MapAsync(eB,eC());});};p.GetAsync=function(eB){return cO.FromContinuations(function(eC){return p.Get(eC,eB);});};p.Get=function(eB,eC){var eD;function eE(){_4.WhenRun(eC(),function(eF){if(!eD[0]){eD[0]=true;eB(eF);}},function(){if(!eD[0])eE();});}eD=[false];eE();};p.TryGet=function(eB){return _4.TryGet(eB());};p.Bind=function(eB,eC){return p.Join(p.Map(eB,eC));};p.MapSeqCachedViewBy=function(eB,eC,eD){var eE;eE=[new b3.New$5()];return p.Map(function(eF){var eG,eH,eI;eG=eE[0];eH=new b3.New$5();eI=cQ.mapInPlace(function(eJ){var eK,eL,eM;eK=eB(eJ);eL=eG.ContainsKey(eK)?(eM=eG.get_Item(eK),(i.Set(eM.r,eJ),eM)):p.ConvertSeqNode(function(eN){return eC(eK,eN);},eJ);eH.set_Item(eK,eL);return eL.e;},T.ofSeq(eF));eE[0]=eH;return eI;},eD);};p.Join=function(eB){return p.CreateLazy(function(){return _4.Join(eB());});};p.Map2Unit=function(eB,eC){return p.CreateLazy(function(){return _4.Map2Unit(eB(),eC());});};p.ConvertSeqNode=function(eB,eC){var eD,eE;eD=i.Create$1(eC);eE=eD.get_View();return{e:eB(eE),r:eD,w:eE};};p.MapSeqCachedBy=function(eB,eC,eD){var eE;eE=[new b3.New$5()];return p.Map(function(eF){var eG,eH,eI;eG=eE[0];eH=new b3.New$5();eI=cQ.mapInPlace(function(eJ){var eK,eL;eK=eB(eJ);eL=eG.ContainsKey(eK)?eG.get_Item(eK):eC(eJ);eH.set_Item(eK,eL);return eL;},T.ofSeq(eF));eE[0]=eH;return eI;},eD);};p.Sequence=function(eB){return p.CreateLazy(function(){return _4.Sequence(bc.map(function(eC){return eC();},eB));});};q=h.Var=et.Class({},g,q);q.New=et.Ctor(function(){g.New.call(this);},q);r.Create=function(eB){return ba.New(false,eB,r.forceLazy);};r.forceLazy=function(){var eB;eB=this.v();this.c=true;this.v=eB;this.f=r.cachedLazy;return eB;};r.cachedLazy=function(){return this.v;};r.CreateFromValue=function(eB){return ba.New(true,eB,r.cachedLazy);};s.aliados=function(){var eB,eC,eD,eE,eF,eG,eH;function eI(eR){var eS,eT;eS=(eT=eC.Get(),eT==null?null:{$:1,$0:eT.$0(eR)});return eS==null?[]:eS.$0;}function eJ(eR){return eR.nReferidos===0?"-":(((et.Curried3(function(eS,eT,eU){return eS(a.String(eT)+"/"+a.String(eU));}))(a.id))(eR.nRefActivos))(eR.nReferidos);}function eK(eR){return eR.nDescendientes===0?"-":(((et.Curried3(function(eS,eT,eU){return eS(a.String(eT)+"/"+a.String(eU));}))(a.id))(eR.nDescActivos))(eR.nDescendientes);}function eL(eR){return eR===0?"-":m.money(eR);}function eM(eR){return p.Map(function(eS){return bc.isEmpty(eI(eR))?"":J.Equals(eS==null?null:{$:1,$0:eS.$0.Contains(eR)},{$:1,$0:true})?"Expandido":"Colapsado";},eB.get_View());}function eN(eR){var eS,eT,eU;eB.Set({$:1,$0:((J.Equals((eS=eB.Get(),eS==null?null:{$:1,$0:eS.$0.Contains(eR)}),{$:1,$0:true})?function(eV){return function(eW){return eW.Remove(eV);};}:function(eV){return function(eW){return eW.Add(eV);};})(eR))((eT=eB.Get(),(eU=new bh.New$1(null),eT==null?eU:eT.$0)))});}function eO(eR){m.selAliadoIdOV().Set({$:1,$0:eR});}function eP(eR){var eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e$,fa;function e5(fb){return fb.comision;}function e6(fb){return fb.status;}function e7(fb){return[fb.nRefActivos,fb.nReferidos];}function e8(fb){return[fb.nDescActivos,fb.nDescendientes];}function e9(fb){return O.nombre(fb.datosPersonales);}function e_(fb){return bc.delay(function(){return bc.append([fb],bc.delay(function(){var fc,fd;return(fc=(fd=eB.Get(),fd==null?null:{$:1,$0:fd.$0.Contains(fb.id)}),fc==null?false:fc.$0)?bc.collect(e_,fa.hijos(fb)):[];}));});}e$=(eS=(eT=(eU=(eV=(eW=(et.Curried3(be.desc))(e5),eX=(et.Curried3(be.asc))(e6),et.Curried(be.op_AmpGreater,2,[function(fb,fc){return(eW(fb))(fc);},function(fb,fc){return(eX(fb))(fc);}])),eY=(et.Curried3(be.desc))(e7),et.Curried(be.op_AmpGreater,2,[function(fb,fc){return(eV(fb))(fc);},function(fb,fc){return(eY(fb))(fc);}])),eZ=(et.Curried3(be.desc))(e8),et.Curried(be.op_AmpGreater,2,[function(fb,fc){return(eU(fb))(fc);},function(fb,fc){return(eZ(fb))(fc);}])),e0=(et.Curried3(be.asc))(e9),et.Curried(be.op_AmpGreater,2,[function(fb,fc){return(eT(fb))(fc);},function(fb,fc){return(e0(fb))(fc);}])),bc.sortWith(function(fb,fc){return(eS(fb))(fc);},eR));fa=O.busqueda(e$);eC.Set({$:1,$0:fa.hijosDe});try{e2=bc.min(bc.map(function(fb){return fb.nivel;},e$));}catch(fb){e2=1;}e3=bc.filter(function(fc){return fc.nivel===e2;},e$);bc.isEmpty(e3)?eB.Set(null):eB.Get()==null?(eB.Set({$:1,$0:new bh.New(bc.map(function(fc){return fc.id;},e3))}),e4=bc.tryHead(bc.map(function(fc){return fc.id;},e3)),e4==null?void 0:eO(e4.$0)):void 0;return bc.delay(function(){return bc.collect(e_,e3);});}function eQ(eR,eS){var eT,eU,eV,eW,eX,eY;return(eT=(eU=(eV=(eW=eM(eR),U.Make().WithHole({$:2,$0:"nombre",$1:p.Map(function(eZ){return O.nombre(eZ.datosPersonales);},eS)}).WithHole({$:2,$0:"status",$1:p.Map(function(eZ){return(function(e0){return function(e1){return e0(bb.p(e1));};}(a.id))(eZ.status);},eS)}).WithHole({$:2,$0:"tipo",$1:p.Map(function(eZ){return(function(e0){return function(e1){return e0(bb.p$1(e1));};}(a.id))(eZ.tipo);},eS)}).WithHole({$:2,$0:"nivel",$1:p.Map(function(eZ){return a.String(eZ.nivel);},eS)}).WithHole({$:2,$0:"referidos",$1:p.Map(eJ,eS)}).WithHole({$:2,$0:"descendientes",$1:p.Map(eK,eS)}).WithHole({$:2,$0:"comision",$1:p.Map(function(eZ){return eL(eZ.comision);},eS)}).WithHole({$:2,$0:"expandido",$1:eW})),eV.WithHole(V.EventQ2(eV.k,"expandir",function(){return eV.i;},function(){eN(eR);}))).WithHole({$:2,$0:"seleccionado",$1:p.Map(function(eZ){return J.Equals({$:1,$0:eR},eZ)?"seleccionado":"";},m.selAliadoIdOV().get_View())}),eU.WithHole(V.EventQ2(eU.k,"seleccionar",function(){return eU.i;},function(){eO(eR);}))),(eX=V.CompleteHoles(eT.k,eT.h,[]),(eY=new S.New(eX[1],W.filaaliado(eX[0])),(eT.i=eY,eY)))).get_Doc();}eB=i.Create$1(null);eC=i.Create$1(null);return(eD=(eE=Z.ConvertSeqBy(function(eR){return eR.id;},function(eR){return function(eS){return eQ(eR,eS);};},(eF=p.Map(function(eR){return eR.aliados;},m.modeloV().get_View()),p.Map2(function(eR,eS){return eP(eS);},eB.get_View(),eF))),U.Make().WithHole({$:0,$0:"tbody",$1:eE})),(eG=V.CompleteHoles(eD.k,eD.h,[]),(eH=new S.New(eG[1],W.tablaaliados(eG[0])),(eD.i=eH,eH)))).get_Doc();};t.aliado=function(){function eB(eC){var eD;eD=bc.tryPick(function(eE){return eE.$==1?{$:1,$0:eE.$0.email}:null;},eC.contactos);return eD==null?"correo no encontrado!":eD.$0;}return m.selAliadoIdDoc(function(eC){var eD,eE,eF,eG;return(eD=(eE=t.calculo(),U.Make().WithHole({$:2,$0:"nombre",$1:p.Map(function(eH){return O.nombre2(eH.datosPersonales);},eC)}).WithHole({$:2,$0:"status",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(bb.p(eJ));};}(a.id))(eH.status);},eC)}).WithHole({$:2,$0:"tipo",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(bb.p$1(eJ));};}(a.id))(eH.tipo);},eC)}).WithHole({$:2,$0:"contacto",$1:p.Map(eB,eC)}).WithHole({$:0,$0:"calculo",$1:eE})),(eF=V.CompleteHoles(eD.k,eD.h,[]),(eG=new S.New(eF[1],W.aliado(eF[0])),(eD.i=eG,eG)))).get_Doc();});};t.calculo=function(){var eB,eC;eB=p.Map(function(eD){return eD.premisas;},m.modeloV().get_View());eC=p.Map(function(eD){return eD.aliados;},m.modeloV().get_View());p.Map2(function(eD,eE){return bc.tryFind(function(eF){return J.Equals(eF.id,eD);},eE);},p.Map(function(eD){return eD.idAliado;},m.modeloV().get_View()),eC);return m.selAliadoIdDoc(function(eD){var eE,eF,eG,eH,eI;eE=p.Map2(O.comision,eB,eD);eF=p.Map2(O.premisas,eB,eD);return(eG=U.Make().WithHole({$:2,$0:"referidos",$1:p.Map(function(eJ){return(function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.nReferidos);},eD)}).WithHole({$:2,$0:"refactivos",$1:p.Map(function(eJ){return(function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.nRefActivos);},eD)}).WithHole({$:2,$0:"comreferido",$1:p.Map(function(eJ){return(function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.nRefActivos);},eD)}).WithHole({$:2,$0:"descendientes",$1:p.Map(function(eJ){return(function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.nDescendientes);},eD)}).WithHole({$:2,$0:"desactivos",$1:p.Map(function(eJ){return(function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.nDescActivos);},eD)}).WithHole({$:2,$0:"comision",$1:p.Map(function(eJ){return m.money(eJ[0]+eJ[1]);},eE)}).WithHole({$:2,$0:"comreferido",$1:p.Map(function(eJ){return m.money(eJ[0]);},eE)}).WithHole({$:2,$0:"comdescendiente",$1:p.Map(function(eJ){return m.money(eJ[1]);},eE)}).WithHole({$:2,$0:"porreferido",$1:p.Map(function(eJ){return m.money(eJ[0]);},eF)}).WithHole({$:2,$0:"pordescendiente",$1:p.Map(function(eJ){return m.money(eJ[1]);},eF)}),(eH=V.CompleteHoles(eG.k,eG.h,[]),(eI=new S.New(eH[1],W.calculo(eH[0])),(eG.i=eI,eI)))).get_Doc();});};u.formaDoc=function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;eB=i.Create$1("");eC=i.Create$1(false);eD=i.Create$1(null);eE=i.Create$1(null);eF=i.Create$1(null);eG=i.Create$1(null);eH=bl.formaDoc(eD);eI=bm.formaDoc(eE);eJ=bn.formaDoc(eF);eK=bo.formaDoc(eG);eL=(eM=(eN=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eQ,eR){return eQ?eR:"";},eC.get_View(),eB.get_View())}).WithHole({$:0,$0:"datospersonales",$1:eH[1]}).WithHole({$:0,$0:"correo",$1:eI[1]}).WithHole({$:0,$0:"telefono",$1:eJ[1]}).WithHole({$:0,$0:"direccion",$1:eK[1]}),eN.WithHole(V.EventQ2(eN.k,"registrarse",function(){return eN.i;},function(){var eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0;eC.Set(true);eQ=eB.Get();bj.Trim(eQ)!==""?a.alert(eQ):(eR=eD.Get(),eS=eE.Get(),eT=eF.Get(),eU=eG.Get(),eR!=null&&eR.$==1&&(eS!=null&&eS.$==1&&(eT!=null&&eT.$==1&&(eU!=null&&eU.$==1&&(eV=[eS.$0,eR.$0,eU.$0,eT.$0],true))))?(eW=eV[0],eX=eV[1],eY=eV[2],eZ=eV[3],_0.iterA((e0=bp.asyncResult(),e0.Run(e0.Delay(function(){var e1;return e0.Bind$1(_0.ejecutarDataEventoNuevo({$:3,$0:[new _1({$:0,$0:bj.Substring(bj.Replace((e1=bt.NewGuid(),a.String(e1)),"-",""),0,20)}),eX,{$:1,$0:m.modeloV().Get().idAliado},[{$:1,$0:eW},{$:2,$0:eZ},{$:0,$0:eY}]]}),function(e2){br.refrescarData(true);a.alert((function(e3){return function(e4){return e3(X.p$3(e4));};}(a.id))(e2));return e0.Zero();});}))))):a.alert("Error not caught FormaRegistro"));}))),(eO=V.CompleteHoles(eM.k,eM.h,[]),(eP=new S.New(eO[1],W.formaregistro(eO[0])),(eM.i=eP,eP))));p.Sink(function(eQ){eB.Set(eQ);},p.Apply(p.Apply(p.Map2(function(eQ,eR){return function(eS){return function(eT){var eU;eU=bj.concat(", ",bc.delay(function(){return bc.append(eQ,bc.delay(function(){return bc.append(eR,bc.delay(function(){return bc.append(eS,bc.delay(function(){return eT;}));}));}));}));return eU!==""?"Campos requeridos: "+eU:"";};};},eH[0],eI[0]),eJ[0]),eK[0]));return eL.get_Doc();};v.formaDoc=function(){return m.aliadoIdDoc(v.formaAliado);};v.formaAliado=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK;function eL(eN){return{$:1,$0:eN};}function eM(eN){eE.Set(eN);}eC=i.Create$1("");eD=i.Create$1(false);eE=i.Create$1(null);p.Sink(function(eN){return eM(eL(eN));},p.Map(function(eN){return eN.datosPersonales;},eB));eF=bl.formaDoc(eE);eG=(eH=(eI=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eN,eO){return eN?eO:"";},eD.get_View(),eC.get_View())}).WithHole({$:2,$0:"changed",$1:p.Map2(function(eN,eO){return J.Equals({$:1,$0:eN.datosPersonales},eO)?"":"mui-btn--primary";},eB,eE.get_View())}).WithHole({$:0,$0:"datospersonales",$1:eF[1]}),eI.WithHole(V.EventQ2(eI.k,"salvar",function(){return eI.i;},function(){var eN,eO,eP,eQ,eR,eS,eT;eD.Set(true);eN=eC.Get();bj.Trim(eN)!==""?a.alert(eN):(eO=eE.Get(),eP=p.TryGet(eB),eO!=null&&eO.$==1&&(eP!=null&&eP.$==1&&(eQ=[eP.$0,eO.$0],true))?(eR=eQ[0],eS=eQ[1],_0.iterA((eT=bp.asyncResult(),eT.Run(eT.Delay(function(){return eT.Bind$1(_0.ejecutarDataEventoNuevo({$:4,$0:[eR.id,eS]}),function(eU){br.refrescarData(true);a.alert((function(eV){return function(eW){return eV(X.p$3(eW));};}(a.id))(eU));return eT.Zero();});}))))):a.alert("Error not caught FormaDatos"));}))),(eJ=V.CompleteHoles(eH.k,eH.h,[]),(eK=new S.New(eJ[1],W.formadatospersonales(eJ[0])),(eH.i=eK,eK))));p.Sink(function(eN){eC.Set(eN);},p.Map(function(eN){var eO;eO=bj.concat(", ",bc.delay(function(){return eN;}));return eO!==""?"Campos requeridos: "+eO:"";},eF[0]));return eG.get_Doc();};w.formaDoc=function(){return m.aliadoIdDoc(w.formaContactos);};w.formaContactos=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV;function eW(eX,eY){return function(eZ){return new cN.New(p.Map(function(e0){var e1;e1=bc.tryItem(eZ,e0);return e1==null?null:eX(e1.$0);},eE.get_View()),function(e0){if(e0!=null&&e0.$==1)eE.Set(cG.replace(eZ,eY(e0.$0),eE.Get()));});};}eC=i.Create$1("");eD=i.Create$1(false);eE=i.Create$1([]);p.Sink(function(eX){eE.Set(eX);},p.Map(function(eX){return eX.contactos;},eB));eF=p.Map(bc.indexed,eE.get_View());eG=[function(eX){return eX.$==2?{$:1,$0:eX.$0}:null;},function(eX){return{$:2,$0:eX};}];eH=[function(eX){return eX.$==1?{$:1,$0:eX.$0}:null;},function(eX){return{$:1,$0:eX};}];eI=[function(eX){return eX.$==0?{$:1,$0:eX.$0}:null;},function(eX){return{$:0,$0:eX};}];eJ=p.Map(function(eX){function eY(eZ,e0){return eG[0](e0)==null?null:{$:1,$0:eZ};}return bc.choose(function(eZ){return eY(eZ[0],eZ[1]);},eX);},eF);eK=p.Map(function(eX){function eY(eZ,e0){return eH[0](e0)==null?null:{$:1,$0:eZ};}return bc.choose(function(eZ){return eY(eZ[0],eZ[1]);},eX);},eF);eL=p.Map(function(eX){function eY(eZ,e0){return eI[0](e0)==null?null:{$:1,$0:eZ};}return bc.choose(function(eZ){return eY(eZ[0],eZ[1]);},eX);},eF);eM=Z.ConvertBy(a.id,function(eX){return bu.removeButton(function(){eE.Set(cG.remove(eX,eE.Get()));},(bn.formaDoc((function(eY){return eW(eY[0],eY[1]);}(eG))(eX)))[1]);},eJ);eN=Z.ConvertBy(a.id,function(eX){return bu.removeButton(function(){eE.Set(cG.remove(eX,eE.Get()));},(bm.formaDoc((function(eY){return eW(eY[0],eY[1]);}(eH))(eX)))[1]);},eK);eO=Z.ConvertBy(a.id,function(eX){return bu.removeButton(function(){eE.Set(cG.remove(eX,eE.Get()));},(bo.formaDoc((function(eY){return eW(eY[0],eY[1]);}(eI))(eX)))[1]);},eL);return(eP=(eQ=(eR=(eS=(eT=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eX,eY){return eX?eY:"";},eD.get_View(),eC.get_View())}).WithHole({$:2,$0:"changed",$1:p.Map2(function(eX,eY){return J.Equals(eX.contactos,eY)?"":"mui-btn--primary";},eB,eE.get_View())}).WithHole({$:0,$0:"telefonos",$1:eM}).WithHole({$:0,$0:"correos",$1:eN}).WithHole({$:0,$0:"direcciones",$1:eO}),eT.WithHole(V.EventQ2(eT.k,"mastelefono",function(){return eT.i;},function(){eE.Set(eE.Get().concat([{$:2,$0:M.telVacio()}]));}))),eS.WithHole(V.EventQ2(eS.k,"mascorreo",function(){return eS.i;},function(){eE.Set(eE.Get().concat([{$:1,$0:M.correoVacio()}]));}))),eR.WithHole(V.EventQ2(eR.k,"masdireccion",function(){return eR.i;},function(){eE.Set(eE.Get().concat([{$:0,$0:M.dirVacio()}]));}))),eQ.WithHole(V.EventQ2(eQ.k,"salvar",function(){return eQ.i;},function(){var eX,eY,eZ,e0;eD.Set(true);eX=eC.Get();bj.Trim(eX)!==""?a.alert(eX):(eY=p.TryGet(eB),eY!=null&&eY.$==1?(eZ=eY.$0,_0.iterA((e0=bp.asyncResult(),e0.Run(e0.Delay(function(){return e0.Bind$1(_0.ejecutarDataEventoNuevo({$:5,$0:[eZ.id,eE.Get()]}),function(e1){br.refrescarData(true);a.alert((function(e2){return function(e3){return e2(X.p$3(e3));};}(a.id))(e1));return e0.Zero();});}))))):a.alert("Error not caught FormaDatos"));}))),(eU=V.CompleteHoles(eP.k,eP.h,[]),(eV=new S.New(eU[1],W.formacontactos(eU[0])),(eP.i=eV,eV)))).get_Doc();};x.formaDoc=function(){return m.aliadoIdDoc(x.formaFormasPago);};x.formaFormasPago=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;function eQ(eV,eW){return function(eX){return new cN.New(p.Map(function(eY){var eZ;eZ=bc.tryItem(eX,eY);return eZ==null?null:eV(eZ.$0);},eE.get_View()),function(eY){var eZ;if(eY!=null&&eY.$==1){eZ=eY.$0;eE.Set(cG.replace(eX,(eW(T.get(eE.Get(),eX)))(bu.fst3(eZ[0],eZ[1],eZ[2])),eE.Get()));}});};}function eR(eV){var eW;_0.iterA((eW=bp.asyncResult(),eW.Run(eW.Delay(function(){return eW.Bind(eV.authorizeIdR,function(eX){return eW.Bind$1(_0.validarFormaPago(eX),function(eY){a.alert(eY);return eW.Zero();});});}))));}function eS(eV,eW){return bu.removeButton(function(){eE.Set(cG.remove(eV,eE.Get()));},Z.Concat(bz.ofSeq(bc.delay(function(){return bc.append([Z.Button("AUTORIZAR DEBITO",[cP.Create("class","mui-btn mui-btn--raised mui-btn--primary"),cP.Create("title","Autorizar pago recurrente"),cT.Dynamic("style",p.Map(function(eX){return T.get(eX,eV).authorizeIdR.$==0?"":"display:None";},eE.get_View()))],function(){var eX,eY,eZ,e0,e1;eY=T.get(eE.Get(),eV).authorizeIdR;eZ=T.get(eE.Get(),eV).cuentaPago;switch(eY.$==0?eZ.$==0?(eX=[eY.$0,eZ.$0.titular],1):eZ.$==1?(eX=[eY.$0,eZ.$0.titular],1):2:(eX=eY.$0,0)){case 0:a.alert("Pago no está verificado en Authorize: "+eX);break;case 1:e0={$:1,$0:T.get(eE.Get(),eV).cuentaPago};B.cuentaPagoO().Set(e0);e1=eW();B.cuentaAutorizar().Set(e1);B.titular().Set(eX[1]);B.set_pid(eX[0]);m.endPointV().Set({$:3,$0:"ProzperLyt.cntAutorizacion"});break;case 2:a.alert("Autorizacion no esta implementada");break;}})],bc.delay(function(){return bc.append([Z.Element("br",[],[])],bc.delay(function(){return bc.append([Z.Element("br",[],[])],bc.delay(function(){return bc.append([eW()],bc.delay(function(){return bc.append([Z.BindView(a.id,p.Map(function(eX){var eY;eY=T.get(eX,eV).subscripcion;return eY!=null&&eY.$==1?Z.Element("div",[],[Z.TextNode((function(eZ){return function(e0){return eZ("Subscripcion: "+bD.toSafe(e0));};}(a.id))(eY.$0.get_Short()))]):Z.get_Empty();},eE.get_View()))],bc.delay(function(){return[Z.Button("validar",[cP.Create("title","validar forma de pago"),cT.Dynamic("style",p.Map(function(eX){return T.get(eX,eV).authorizeIdR.$==0?"":"display:None";},eE.get_View()))],function(){eR(T.get(eE.Get(),eV));})];}));}));}));}));}));}))));}function eT(eV){return bE.New("",bd.Error$1(""),eV,null);}function eU(eV){return new bh.New(bc.choose(function(eW){var eX;eX=eW.authorizeIdR;return eX.$==0?{$:1,$0:eX.$0}:null;},eV));}eC=i.Create$1("");eD=i.Create$1(false);eE=i.Create$1([]);p.Sink(function(eV){eE.Set(eV);},m.formasPagoAliadoV().get_View());x.refrescarFormasPago();eF=p.Map(bc.indexed,eE.get_View());eG=p.Map(function(eV){function eW(eX,eY){return(x.ftar())[0](eY)==null?null:{$:1,$0:eX};}return bc.choose(function(eX){return eW(eX[0],eX[1]);},eV);},eF);eH=p.Map(function(eV){function eW(eX,eY){return(x.fcta())[0](eY)==null?null:{$:1,$0:eX};}return bc.choose(function(eX){return eW(eX[0],eX[1]);},eV);},eF);eI=Z.ConvertBy(a.id,function(eV){var eW;return eS(eV,(eW=(function(eX){return eQ(eX[0],eX[1]);}(x.ftar()))(eV),function(){return(cL.formaDocO(eW))[1];}));},eG);eJ=Z.ConvertBy(a.id,function(eV){var eW;return eS(eV,(eW=(function(eX){return eQ(eX[0],eX[1]);}(x.fcta()))(eV),function(){return(cK.formaDocO(eW))[1];}));},eH);return(eK=(eL=(eM=(eN=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eV,eW){return eV?eW:"";},eD.get_View(),eC.get_View())}).WithHole({$:0,$0:"tarjetas",$1:eI}).WithHole({$:0,$0:"cuentas",$1:eJ}),eN.WithHole(V.EventQ2(eN.k,"mastarjeta",function(){return eN.i;},function(){eE.Set(eE.Get().concat([eT(new bO({$:1,$0:M.tarVacio()}))]));}))),eM.WithHole(V.EventQ2(eM.k,"mascuenta",function(){return eM.i;},function(){eE.Set(eE.Get().concat([eT(new bO({$:0,$0:M.ctaVacio()}))]));}))).WithHole({$:2,$0:"changed",$1:p.Map2(function(eV,eW){return J.Equals(eV,eW)?"":"mui-btn--primary";},m.formasPagoAliadoV().get_View(),eE.get_View())}),eL.WithHole(V.EventQ2(eL.k,"salvar",function(){return eL.i;},function(){var eV,eW,eX;eD.Set(true);eV=eC.Get();bj.Trim(eV)!==""?a.alert(eV):(eW=p.TryGet(eB),eW!=null&&eW.$==1?_0.iterA((eX=bp.asyncResult(),eX.Run(eX.Delay(function(){return eX.Combine$1(eX.For(bh.op_Subtraction(eU(m.formasPagoAliadoV().Get()),eU(eE.Get())),function(eY){return eX.Bind$1(_0.borrarFormaPago(eY),function(){return eX.Zero();});}),eX.Delay(function(){return eX.Combine$1(eX.For(eE.Get(),function(eY){var eZ,e0,e1,e2;eZ=(e0=eY.cuentaPago,e0.$==1&&(!(e0.$0.numero.get_Id().indexOf("X")!=-1)&&(e1=e0.$0,true))?{$:1,$0:_0.registrarTarjeta(e1)}:e0.$==0&&(!(e0.$0.numero.get_Id().indexOf("X")!=-1)&&(e2=e0.$0,true))?{$:1,$0:_0.registrarCuenta(e2)}:null);return eZ!=null&&eZ.$==1?eX.Bind$1(eZ.$0,function(){return eX.Zero();}):eX.Zero();}),eX.Delay(function(){x.refrescarFormasPago();br.refrescarData(true);return eX.Zero();}));}));})))):a.alert("Error not caught FormaDatos"));}))),(eO=V.CompleteHoles(eK.k,eK.h,[]),(eP=new S.New(eO[1],W.formacuentas(eO[0])),(eK.i=eP,eP)))).get_Doc();};x.msg=function(eB){var eC;eC=eB.authorizeIdR;return eC.$==0?(function(eD){return function(eE){return eD("Cuenta verificada: "+X.p$4(eE));};}(a.id))(eC.$0):eC.$0===""?"La cuenta aun no ha sido verificada":eC.$0;};x.refrescarFormasPago=function(){_0.iterA(cE.map(function(eB){m.formasPagoAliadoV().Set(eB);},_0.obtenerFormasDePago()));};x.fcta=function(){_5.$cctor();return _5.fcta;};x.ftar=function(){_5.$cctor();return _5.ftar;};y.consolidado=function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0;function e1(e$){function fa(fb,fc,fd){return fd(e$);}return T.map(function(fb){return fa(fb[0],fb[1],fb[2]);},y.definicion());}function e2(e$,fa,fb){return function(fc){var fd;fd=fc[0];return[fd===e$?1:fd<e$?fd+1:fd,e$===fd&&e$===1?!fc[1]:fc[1],fc[2]];};}function e3(e$){var fa;eC.Set((fa=eC.Get(),T.map(e2.apply(null,e$),fa)));}function e4(e$,fa){return eB.Set(T.map(function(fb){return J.Equals(fb.id,e$)?fa(fb):fb;},eB.Get()));}function e5(e$,fa){return e4(e$,function(fb){return N.New(fb.id,fb.idPadreO,fb.idForAuthorize,fb.influyente,fb.datosPersonales,fb.contactos,fb.identificacion,fb.isInternal,by.tryParse(fa),fb.diaPago,fb.tipo,fb.fechaRegistro,fb.fechaStatus,fb.nReferidos,fb.nRefActivos,fb.nDescendientes,fb.nDescActivos,fb.comision,fb.nivel,fb.documentos,fb.docPendientes);});}function e6(e$,fa){return e4(e$,function(fb){return N.New(fb.id,fb.idPadreO,fb.idForAuthorize,bj.Trim(fa)===""?null:{$:1,$0:bj.Trim(fa)},fb.datosPersonales,fb.contactos,fb.identificacion,fb.isInternal,fb.status,fb.diaPago,fb.tipo,fb.fechaRegistro,fb.fechaStatus,fb.nReferidos,fb.nRefActivos,fb.nDescendientes,fb.nDescActivos,fb.comision,fb.nivel,fb.documentos,fb.docPendientes);});}function e7(e$,fa){var fb;fb=fa===""?null:{$:1,$0:new _1({$:0,$0:fa})};return e4(e$,function(fc){return N.New(fc.id,fb,fc.idForAuthorize,fc.influyente,fc.datosPersonales,fc.contactos,fc.identificacion,fc.isInternal,fc.status,fc.diaPago,fc.tipo,fc.fechaRegistro,fc.fechaStatus,fc.nReferidos,fc.nRefActivos,fc.nDescendientes,fc.nDescActivos,fc.comision,fc.nivel,fc.documentos,fc.docPendientes);});}function e8(e$){return bc.tryFind(function(fa){return J.Equals(fa.id,e$);},m.modeloV().Get().aliados);}function e9(){var e$;_0.iterA((e$=bp.asyncResult(),e$.Run(e$.Delay(function(){return e$.Combine$1(e$.For(eB.Get(),function(fa){var fb,fc;fb=e8(fa.id);return fb!=null&&fb.$==1?(fc=fb.$0,!J.Equals(fa.status,fc.status)||!J.Equals(fa.idPadreO,fc.idPadreO)||!J.Equals(fa.influyente,fc.influyente)?e$.Bind$1(_0.ejecutarDataEventoNuevo({$:8,$0:[fa.id,fa.status,fa.idPadreO,fa.influyente]}),function(){return e$.Zero();}):e$.Zero()):e$.Zero();}),e$.Delay(function(){br.refrescarData(true);return e$.Zero();}));}))));}function e_(e$,fa){var fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm;return(fb=(fc=(fd=Z.BindView(a.id,p.Map(function(fn){return J.Equals(fn,{$:1,$0:new _1({$:0,$0:e$})})?eH.f():Z.get_Empty();},A.expandedOV().get_View())),(fe=Z.BindView(bu.crearOptions,bu.statuses().get_View()),(ff=new cN.New(p.Map(function(fn){return T.get(fn,y.i_influyente());},fa),(fg=new _1({$:0,$0:e$}),function(fn){return e6(fg,fn);})),(fh=new cN.New(p.Map(function(fn){return T.get(fn,y.i_status());},fa),(fi=new _1({$:0,$0:e$}),function(fn){return e5(fi,fn);})),(fj=new cN.New(p.Map(function(fn){return T.get(fn,y.i_referido());},fa),(fk=new _1({$:0,$0:e$}),function(fn){return e7(fk,fn);})),U.Make().WithHole({$:2,$0:"nombre",$1:p.Map(function(fn){return T.get(fn,y.i_nombre());},fa)}).WithHole({$:2,$0:"correo",$1:p.Map(function(fn){return T.get(fn,y.i_correo());},fa)}).WithHole({$:2,$0:"tipo",$1:p.Map(function(fn){return T.get(fn,y.i_tipo());},fa)}).WithHole({$:8,$0:"referido",$1:fj})).WithHole({$:8,$0:"status",$1:fh})).WithHole({$:8,$0:"influyente",$1:ff})).WithHole({$:0,$0:"statuses",$1:fe})).WithHole({$:2,$0:"nivel",$1:p.Map(function(fn){return T.get(fn,y.i_nivel());},fa)}).WithHole({$:2,$0:"referidos",$1:p.Map(function(fn){return T.get(fn,y.i_referidos());},fa)}).WithHole({$:2,$0:"descendientes",$1:p.Map(function(fn){return T.get(fn,y.i_descendientes());},fa)}).WithHole({$:2,$0:"comision",$1:p.Map(function(fn){return T.get(fn,y.i_comision());},fa)}).WithHole({$:2,$0:"diapago",$1:p.Map(function(fn){return T.get(fn,y.i_diaPago());},fa)}).WithHole({$:2,$0:"desde",$1:p.Map(function(fn){return T.get(fn,y.i_desde());},fa)}).WithHole({$:2,$0:"id",$1:p.Map(function(fn){return T.get(fn,y.i_Id());},fa)}).WithHole({$:0,$0:"detalles",$1:fd})),fc.WithHole(V.EventQ2(fc.k,"expandfiles",function(){return fc.i;},function(){var fn;cO.Start((fn=null,cO.Delay(function(){return cO.Bind((_0.addLlamadas())(1),function(){var fo;fo=J.Equals(A.expandedOV().Get(),{$:1,$0:new _1({$:0,$0:e$})})?null:{$:1,$0:new _1({$:0,$0:e$})};A.expandedOV().Set(fo);return cO.Bind((_0.addLlamadas())(-1),function(){return cO.Return(null);});});})),null);}))).WithHole({$:2,$0:"expanded",$1:p.Map(function(fn){return T.get(fn,y.i_archivos());},fa)}),(fl=V.CompleteHoles(fb.k,fb.h,[["status",0],["influyente",0],["referido",0]]),(fm=new S.New(fl[1],W.filaconsolidado(fl[0])),(fb.i=fm,fm)))).get_Doc();}eB=i.Create$1([]);p.Sink(function(e$){eB.Set(e$);},p.Map(function(e$){return e$.aliados;},m.modeloV().get_View()));eC=i.Create$1(T.mapi(function(e$,fa){return[fa[0],fa[1],function(fb){return T.get(fb,e$).toUpperCase();}];},y.definicion()));eD=i.Create$1("");eE=Z.BindView(function(e$){return bu.crearOptions2(bc.map(function(fa){return[O.nombre2(fa.datosPersonales),fa.id.get_Id()];},e$.aliados));},m.modeloV().get_View());eF=Z.BindView(a.id,(eG=p.get_Do(),p.Bind(function(e$){var fa;return e$!=null&&e$.$==1?(fa=e$.$0,p.Bind(function(fb){var fc;fc=bc.tryFind(function(fd){return J.Equals(fd.id,fa);},fb);return fc!=null&&fc.$==1?p.Const(E.pendientes(p.Const(fc.$0))):p.Const(Z.get_Empty());},eB.get_View())):p.Const(Z.get_Empty());},A.expandedOV().get_View())));eH=r.Create(function(){return Z.Element("tr",[cP.Create("bgcolor","beige")],[Z.Element("td",[cP.Create("colspan","12")],[eF,A.listaDocs()])]);});return(eI=(eJ=Z.ConvertSeqBy(function(e$){return T.get(e$,y.i_Id());},function(e$){return function(fa){return e_(e$,fa);};},p.Map3(function(e$,fa,fb){var fc,fd,fe;function ff(fi,fj,fk){return fk;}function fg(fi,fj,fk,fl){return be.op_AmpGreater(function(fm,fn){return(fi(fm))(fn);},function(fm,fn){return(fj(fm))(fn);},fk,fl);}function fh(fi,fj,fk){return(fj?et.Curried3(be.asc):et.Curried3(be.desc))(fk);}fc=bj.Trim(fb).toUpperCase();fd=T.map(function(fi){return ff(fi[0],fi[1],fi[2]);},a.id(fa));fe=T.reduce(function(fi,fj){return et.Curried(fg,2,[fi,fj]);},T.map(function(fi){return fh(fi[0],fi[1],fi[2]);},T.sortBy(function(fi){return a.id(fi[0],fi[1],fi[2]);},a.id(fa))));return bc.sortWith(function(fi,fj){return(fe(fi))(fj);},bc.filter(function(fi){return fc===""||bc.exists(function(fj){return fj(fi).indexOf(fc)!=-1;},fd);},bc.map(e1,e$)));},p.Map(function(e$){return e$.aliados;},m.modeloV().get_View()),eC.get_View(),eD.get_View())),(eK=(eL=(eM=(eN=(eO=(eP=(eQ=(eR=(eS=(eT=(eU=(eV=(eW=(eX=(eY=U.Make(),eY.WithHole(V.EventQ2(eY.k,"salvar",function(){return eY.i;},function(){e9();}))),eX.WithHole(V.EventQ2(eX.k,"cancelar",function(){return eX.i;},function(){eB.Set(m.modeloV().Get().aliados);}))).WithHole({$:2,$0:"changed",$1:p.Map2(function(e$,fa){return J.Equals(e$.aliados,fa)?"":"mui-btn--primary";},m.modeloV().get_View(),eB.get_View())}).WithHole({$:8,$0:"filtro",$1:eD}).WithHole({$:0,$0:"referidores",$1:eE}),eW.WithHole(V.EventQ2(eW.k,"sort_archivos",function(){return eW.i;},function(){e3(T.get(eC.Get(),y.i_archivos()));}))),eV.WithHole(V.EventQ2(eV.k,"sort_nombre",function(){return eV.i;},function(){e3(T.get(eC.Get(),y.i_nombre()));}))),eU.WithHole(V.EventQ2(eU.k,"sort_correo",function(){return eU.i;},function(){e3(T.get(eC.Get(),y.i_correo()));}))),eT.WithHole(V.EventQ2(eT.k,"sort_status",function(){return eT.i;},function(){e3(T.get(eC.Get(),y.i_status()));}))),eS.WithHole(V.EventQ2(eS.k,"sort_influyente",function(){return eS.i;},function(){e3(T.get(eC.Get(),y.i_influyente()));}))),eR.WithHole(V.EventQ2(eR.k,"sort_tipo",function(){return eR.i;},function(){e3(T.get(eC.Get(),y.i_tipo()));}))),eQ.WithHole(V.EventQ2(eQ.k,"sort_referido",function(){return eQ.i;},function(){e3(T.get(eC.Get(),y.i_referido()));}))),eP.WithHole(V.EventQ2(eP.k,"sort_nivel",function(){return eP.i;},function(){e3(T.get(eC.Get(),y.i_nivel()));}))),eO.WithHole(V.EventQ2(eO.k,"sort_referidos",function(){return eO.i;},function(){e3(T.get(eC.Get(),y.i_referidos()));}))),eN.WithHole(V.EventQ2(eN.k,"sort_descendientes",function(){return eN.i;},function(){e3(T.get(eC.Get(),y.i_descendientes()));}))),eM.WithHole(V.EventQ2(eM.k,"sort_comision",function(){return eM.i;},function(){e3(T.get(eC.Get(),y.i_comision()));}))),eL.WithHole(V.EventQ2(eL.k,"sort_diapago",function(){return eL.i;},function(){e3(T.get(eC.Get(),y.i_diaPago()));}))),eK.WithHole(V.EventQ2(eK.k,"sort_desde",function(){return eK.i;},function(){e3(T.get(eC.Get(),y.i_desde()));}))).WithHole({$:2,$0:"flecha_archivos",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_archivos());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_nombre",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_nombre());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_correo",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_correo());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_status",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_status());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_influyente",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_influyente());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_tipo",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_tipo());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_referido",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_referido());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_nivel",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_nivel());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_referidos",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_referidos());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_descendientes",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_descendientes());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_comision",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_comision());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_diapago",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_diaPago());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:2,$0:"flecha_desde",$1:p.Map(function(e$){var fa;fa=T.get(e$,y.i_desde());return y.flecha(fa[0],fa[1],fa[2]);},eC.get_View())}).WithHole({$:0,$0:"tbody",$1:eJ})),(eZ=V.CompleteHoles(eI.k,eI.h,[["filtro",0]]),(e0=new S.New(eZ[1],W.consolidado(eZ[0])),(eI.i=e0,e0)))).get_Doc();};y.definicion=function(){_5.$cctor();return _5.definicion;};y.i_desde=function(){_5.$cctor();return _5.i_desde;};y.flecha=function(eB,eC,eD){return eB===1?eC?"\u2191":"\u2193":"";};y.i_diaPago=function(){_5.$cctor();return _5.i_diaPago;};y.i_comision=function(){_5.$cctor();return _5.i_comision;};y.i_descendientes=function(){_5.$cctor();return _5.i_descendientes;};y.i_referidos=function(){_5.$cctor();return _5.i_referidos;};y.i_nivel=function(){_5.$cctor();return _5.i_nivel;};y.i_referido=function(){_5.$cctor();return _5.i_referido;};y.i_tipo=function(){_5.$cctor();return _5.i_tipo;};y.i_influyente=function(){_5.$cctor();return _5.i_influyente;};y.i_status=function(){_5.$cctor();return _5.i_status;};y.i_correo=function(){_5.$cctor();return _5.i_correo;};y.i_nombre=function(){_5.$cctor();return _5.i_nombre;};y.i_archivos=function(){_5.$cctor();return _5.i_archivos;};y.i_Id=function(){_5.$cctor();return _5.i_Id;};y.agregarCampo=function(eB,eC,eD){y.set_definicion(y.definicion().concat([[eB,eC,eD]]));return T.length(y.definicion())-1;};y.nombreReferidor=function(eB){var eC,eD,eE;eC=(eD=eB==null?null:(eE=eB.$0,bc.tryFind(function(eF){return J.Equals(eF.id,eE);},m.modeloV().Get().aliados)),eD==null?null:{$:1,$0:O.nombre(eD.$0.datosPersonales)});return eC==null?"-":eC.$0;};y.referidos=function(eB){return eB.nReferidos===0?"-":(((et.Curried3(function(eC,eD,eE){return eC(a.String(eD)+"/"+a.String(eE));}))(a.id))(eB.nRefActivos))(eB.nReferidos);};y.descendientes=function(eB){return eB.nDescendientes===0?"-":(((et.Curried3(function(eC,eD,eE){return eC(a.String(eD)+"/"+a.String(eE));}))(a.id))(eB.nDescActivos))(eB.nDescendientes);};y.comision=function(eB){return eB===0?"-":m.money(eB);};y.set_definicion=function(eB){_5.$cctor();_5.definicion=eB;};z.comisiones=function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM;function eN(eR,eS){return eS===""?eR:eS;}function eO(){var eR;cO.Start((eR=null,cO.Delay(function(){return cO.Bind(p.GetAsync(eB),function(eS){a.saveAs(new bN([bj.concat("\r\n",bc.map(function(eT){var eU,eV;eU=eT[0];eV=eT[1];return(((((((et.Curried(function(eW,eX,eY,eZ,e0,e1,e2){return eW(bD.toSafe(eX)+","+bD.toSafe(eY)+","+bD.toSafe(eZ)+","+bD.toSafe(e0)+","+bD.prettyPrint(e1)+","+bD.prettyPrint(e2));},7))(a.id))("22"))(eN("----------",eV.numero.get_Id())))(eN("----------",eV.routing.get_Id())))((function(eW){return function(eX){return eW(a.String(eX)+".00");};}(a.id))(eU.comision)))("----------"))(eV.titular===""?O.nombre2(eU.datosPersonales):eV.titular);},eS))],{type:"text/plain;charset=utf-8"}),"pagos.csv");return cO.Zero();});})),null);}function eP(eR,eS){return eR.id;}function eQ(eR,eS){var eT,eU,eV,eW,eX;eT=p.Map(function(eY){return eY[0];},eS);eU=p.Map(function(eY){return eY[1];},eS);return(eV=U.Make().WithHole({$:1,$0:"codigo",$1:"22"}).WithHole({$:2,$0:"cuenta",$1:p.Map(function(eY){return eN("----------",eY.numero.get_Id());},eU)}).WithHole({$:2,$0:"aba",$1:p.Map(function(eY){return eN("----------",eY.routing.get_Id());},eU)}).WithHole({$:2,$0:"monto",$1:p.Map(function(eY){return(function(eZ){return function(e0){return eZ(a.String(e0)+".00");};}(a.id))(eY.comision);},eT)}).WithHole({$:1,$0:"identificacion",$1:"---------"}).WithHole({$:2,$0:"nombre",$1:p.Map2(function(eY,eZ){return eN(O.nombre2(eY.datosPersonales),eZ.titular);},eT,eU)}),(eW=V.CompleteHoles(eV.k,eV.h,[]),(eX=new S.New(eW[1],W.filapago(eW[0])),(eV.i=eX,eX)))).get_Doc();}eB=p.MapAsync(function(eR){var eS,eT,eU;function eV(eW){return cO.Return(eW);}return cO.Bind((eS=bp.asyncResult(),eS.Run(eS.Delay(function(){var eW;eW=bc.filter(function(eX){return eX.comision>0;},eR);return eS.Bind$1(_0.obtenerFormasDePagoPara(T.ofSeq(bc.map(function(eX){return eX.id;},eW))),function(eX){function eY(e0,e1){return J.Equals(e0.id,e1[0])?{$:1,$0:[e0,e1[1]]}:null;}function eZ(e0,e1){var e2,e3;return[e0,(e2=bc.tryPick(function(e4){var e5;e5=e4.cuentaPago;return e5.$==0?{$:1,$0:e5.$0}:null;},e1),(e3=M.ctaVacio(),e2==null?e3:e2.$0))];}return eS.Return(bc.choose(function(e0){return eY(e0[0],e0[1]);},bc.zip(eW,bc.map(function(e0){return eZ(e0[0],e0[1]);},eX))));});}))),(eT=(eU=[],function(eW){return bF.defaultValue$1(eU,eW);}),function(eW){return eV(eT(eW));}));},p.Map(function(eR){return eR.aliados;},m.modeloV().get_View()));return(eC=(eD=bz.ofArray([(eE=U.Make().WithHole({$:2,$0:"codigo",$1:p.Map(function(eR){return(function(eS){return function(eT){return eS(a.String(eT));};}(a.id))(bc.length(eR));},eB)}).WithHole({$:1,$0:"cuenta",$1:""}).WithHole({$:1,$0:"aba",$1:""}).WithHole({$:2,$0:"monto",$1:p.Map(function(eR){function eS(eT,eU){return eT.comision;}return(function(eT){return function(eU){return eT(a.String(eU)+".00");};}(a.id))(bc.sumBy(function(eT){return eS(eT[0],eT[1]);},eR));},eB)}).WithHole({$:1,$0:"identificacion",$1:""}).WithHole({$:1,$0:"nombre",$1:""}),(eF=V.CompleteHoles(eE.k,eE.h,[]),(eG=new S.New(eF[1],W.filapago(eF[0])),(eE.i=eG,eG)))).get_Doc(),(eH=U.Make().WithHole({$:1,$0:"codigo",$1:""}).WithHole({$:1,$0:"cuenta",$1:""}).WithHole({$:1,$0:"aba",$1:""}).WithHole({$:1,$0:"monto",$1:"--------------------"}).WithHole({$:1,$0:"identificacion",$1:""}).WithHole({$:1,$0:"nombre",$1:""}),(eI=V.CompleteHoles(eH.k,eH.h,[]),(eJ=new S.New(eI[1],W.filapago(eI[0])),(eH.i=eJ,eJ)))).get_Doc(),Z.ConvertSeqBy(function(eR){return eP(eR[0],eR[1]);},function(eR){return function(eS){return eQ(eR,eS);};},eB)]),(eK=U.Make(),eK.WithHole(V.EventQ2(eK.k,"exportar",function(){return eK.i;},function(){eO();}))).WithHole({$:0,$0:"tbody",$1:Z.Concat(eD)})),(eL=V.CompleteHoles(eC.k,eC.h,[]),(eM=new S.New(eL[1],W.tablapagos(eL[0])),(eC.i=eM,eM)))).get_Doc();};A.listaDocs=function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ;function eK(){var eN;_0.iterA((eN=bp.asyncResult(),eN.Run(eN.Delay(function(){eC.Set([]);eB.Set([]);return bH["AsyncResultBuilder.Bind"](eN,p.GetAsync(A.aliadoIdW()),function(eO){return eN.Bind$1(_0.obtenerListaDocs(eO),function(eP){eC.Set(eP);eB.Set(eP);return eN.Zero();});});}))));}function eL(eN){return function(eO,eP){var eQ;return _0.iterA((eQ=bp.asyncResult(),eQ.Run(eQ.Delay(function(){eK();return eQ.Bind$1(_0.ejecutarDataEventoNuevo({$:9,$0:[new _1({$:0,$0:eN}),T.ofSeq(eB["var"].Get())]}),function(){br.refrescarData(true);a.alert(eP);return eQ.Zero();});}))));};}function eM(eN,eO){var eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY;eN.preventDefault();eT=a.jQuery("#SubirDocumentos");eU=new a.FormData();eV=eT.serializeArray();for(eW=0,eX=eV.length-1;eW<=eX;eW++){eY=T.get(eV,eW);eU.append(eY.name,eY.value);}eQ=eT.children("input[type=file]").first().get(0).files.item(0);eR=eQ.name;eU.append("file",eQ);ev.ajax((eS={},eS.type="POST",eS.url="/api/subir/"+eO+"/"+eR,eS.data=eU,eS.contentType=false,eS.processData=false,eS.success=eL(eO),eS));}eB=_6.Create(function(eN){return eN.nombre;},[]);eC=_6.Create(function(eN){return eN.nombre;},[]);p.Sink(function(eN){if(!J.Equals(eN,new _1({$:0,$0:""})))eK();},A.aliadoIdW());return(eD=(eE=(eF=Z.EmbedView(p.Map(bu.crearOptions,bu.tiposAr().get_View())),(eG=(eH=bI.docLensMapView(a.id,function(eN,eO){var eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5;eP=p.Map(function(e6){return J.Equals(e6.idAliado,n.get_LoggedId());},eO.get_View());eQ=(eR=(eS=p.Map(function(e6){return e6.get_Id();},A.aliadoIdW()),U.Make().WithHole({$:2,$0:"idaliado",$1:eS})).WithHole({$:2,$0:"archivo",$1:p.Map(function(e6){return e6.nombre;},eO.get_View())}).WithHole({$:2,$0:"nombre",$1:p.Map(function(e6){return e6.nombre;},eO.get_View())}),(eT=V.CompleteHoles(eR.k,eR.h,[]),(eU=new S.New(eT[1],W.enlacedocumento(eT[0])),(eR.i=eU,eU)))).get_Doc();return(eV=(eW=cT.DynamicPred("disabled",eP,p.Const("")),(eX=Z.EmbedView(p.Map(bu.crearOptions,bu.statusAr().get_View())),(eY=new cN.New(p.Map(function(e6){return a.String(e6.status);},eO.get_View()),(eZ=(e0=i.Lens(eO,function(e6){return e6.status;},function(e6,e7){return bG.New(e6.idAliado,e6.tipo,e6.nombre,e6.modificado,e6.tamano,e7,e6.comentario);}),function(e6){e0.Set(e6);}),function(e6){return eZ(bM.Parse(e6));})),(e1=new cN.New(p.Map(function(e6){return a.String(e6.tipo);},eO.get_View()),(e2=(e3=i.Lens(eO,function(e6){return e6.tipo;},function(e6,e7){return bG.New(e6.idAliado,e7,e6.nombre,e6.modificado,e6.tamano,e6.status,e6.comentario);}),function(e6){e3.Set(e6);}),function(e6){return e2(bL.Parse(e6));})),U.Make().WithHole({$:0,$0:"enlace",$1:eQ}).WithHole({$:8,$0:"tipo",$1:e1})).WithHole({$:8,$0:"status",$1:eY})).WithHole({$:2,$0:"tamano",$1:p.Map(function(e6){return bK.thousands$1(e6.tamano);},eO.get_View())}).WithHole({$:2,$0:"modificado",$1:p.Map(function(e6){return bJ.toYYYYMMDDHHMM$1("-",e6.modificado);},eO.get_View())}).WithHole({$:0,$0:"statuses",$1:eX})).WithHole({$:3,$0:"disabled",$1:eW})),(e4=V.CompleteHoles(eV.k,eV.h,[["tipo",0],["status",0]]),(e5=new S.New(e4[1],W.filadocs(e4[0])),(eV.i=e5,e5)))).get_Doc();},eB),U.Make().WithHole({$:0,$0:"tbody",$1:eH})),eG.WithHole(V.EventQ2(eG.k,"subir",function(){return eG.i;},function(eN){var eO;p.Get((eO=eN.Event,function(eP){return eM(eO,eP);}),p.Map(function(eP){return eP.get_Id();},A.aliadoIdW()));}))).WithHole({$:0,$0:"tiposarchivo",$1:eF})).WithHole({$:2,$0:"changed",$1:p.Map2(function(eN,eO){return J.Equals(eN,eO)?"":"mui-btn--primary";},eC.v,eB.v)}),eE.WithHole(V.EventQ2(eE.k,"salvar",function(){return eE.i;},function(){var eN;_0.iterA((eN=bp.asyncResult(),eN.Run(eN.Delay(function(){var eO;eO=T.ofSeq(bc.filter(function(eP){return!J.Equals(bc.tryFind(function(eQ){return eQ.nombre===eP.nombre;},eC["var"].Get()),{$:1,$0:eP});},eB["var"].Get()));return!bc.isEmpty(eO)?bH["AsyncResultBuilder.Bind"](eN,p.GetAsync(A.aliadoIdW()),function(eP){return eN.Bind$1(_0.ejecutarDataEventoNuevo({$:9,$0:[eP,eO]}),function(eQ){eK();br.refrescarData(true);a.alert((function(eR){return function(eS){return eR(X.p$3(eS));};}(a.id))(eQ));return eN.Zero();});}):eN.Zero();}))));}))),(eI=V.CompleteHoles(eD.k,eD.h,[]),(eJ=new S.New(eI[1],W.subirdocumentos(eI[0])),(eD.i=eJ,eJ)))).get_Doc();};A.expandedOV=function(){_5.$cctor();return _5.expandedOV;};A.aliadoIdW=function(){_5.$cctor();return _5.aliadoIdW;};B.formaAutorizacion=function(){var eB,eC,eD,eE,eF,eG,eH,eI;eB=(eC=(eD=Z.EmbedView(B.cuentaAutorizar().get_View()),U.Make().WithHole({$:2,$0:"titular",$1:B.titular().get_View()}).WithHole({$:2,$0:"montoafiliacion",$1:p.Map(function(eJ){return(function(eK){return function(eL){return eK("$"+a.String(eL)+".00");};}(a.id))(eJ.premisas.montoAfiliacion);},m.modeloV().get_View())}).WithHole({$:2,$0:"dia",$1:p.Map(function(eJ){return a.String(O.dia(eJ.diaPago));},m.aliadoW())}).WithHole({$:0,$0:"cuentadebitar",$1:eD})),(eE=V.CompleteHoles(eC.k,eC.h,[]),(eF=new S.New(eE[1],W.autorizacionpago(eE[0])),(eC.i=eF,eF)))).get_Doc();eG=(eH=(eI=B.cuentaPagoO().Get(),eI==null?null:{$:1,$0:eI.$0.get_AutorizacionPre()}),eH==null?"Autorizacion -- ------":eH.$0);return bP.formaFirma(B.titular().get_View(),eB,bL.Autorizacion,B.actualizarSubscripcion,eG);};B.cuentaPagoO=function(){_5.$cctor();return _5.cuentaPagoO;};B.actualizarSubscripcion=function(){var eB;eB=_0.actualizarSubscripcion(B.pid());return cE.map(function(eC){return function(eD){return eC("Subscripción #"+bD.toSafe(eD)+" creada.");};}(a.id),eB);};B.titular=function(){_5.$cctor();return _5.titular;};B.cuentaAutorizar=function(){_5.$cctor();return _5.cuentaAutorizar;};B.set_pid=function(eB){_5.$cctor();_5.pid=eB;};B.pid=function(){_5.$cctor();return _5.pid;};C.formaContrato=function(){var eB,eC,eD,eE;eB=p.Map(function(eF){return O.nombre2(eF.datosPersonales);},m.aliadoW());return bP.formaFirma(eB,(eC=U.Make().WithHole({$:2,$0:"aliado",$1:eB}),(eD=V.CompleteHoles(eC.k,eC.h,[]),(eE=new S.New(eD[1],W.contrato(eD[0])),(eC.i=eE,eE)))).get_Doc(),bL.Contrato,C.firmarContrato,"Contrato");};C.firmarContrato=function(){return cE.rtn("Contrato firmado!");};D.transacciones=function(){return m.selAliadoIdDoc(D.docTransacciones);};D.docTransacciones=function(eB){var eC,eD,eE,eF;function eG(eI,eJ){var eK,eL,eM;return(eK=U.Make().WithHole({$:2,$0:"fecha",$1:p.Map(function(eN){return bJ.toYYYYMMDDHHMM$1("-",eN.fechaPago);},eJ)}).WithHole({$:2,$0:"transid",$1:p.Map(function(eN){return eN.transaccion;},eJ)}).WithHole({$:2,$0:"cuenta",$1:p.Map(function(eN){return a.String(eN.concepto);},eJ)}).WithHole({$:2,$0:"status",$1:p.Map(function(eN){return eN.statusTran;},eJ)}).WithHole({$:2,$0:"monto",$1:p.Map(function(eN){return(function(eO){return function(eP){return eO(eP.toFixed(2));};}(a.id))(eN.monto/100);},eJ)}),(eL=V.CompleteHoles(eK.k,eK.h,[]),(eM=new S.New(eL[1],W.transaccion(eL[0])),(eK.i=eM,eM)))).get_Doc();}function eH(eI,eJ){return bc.sortBy(function(eK){return eK.fechaPago;},bc.filter(function(eK){return J.Equals(eK.idAliado,eJ.id);},eI));}return(eC=(eD=Z.ConvertSeqBy(function(eI){return eI.transaccion;},function(eI){return function(eJ){return eG(eI,eJ);};},(((et.Curried3(p.Map2))(eH))(D.transaccionesW()))(eB)),U.Make().WithHole({$:0,$0:"tbody",$1:eD})),(eE=V.CompleteHoles(eC.k,eC.h,[]),(eF=new S.New(eE[1],W.transacciones(eE[0])),(eC.i=eF,eF)))).get_Doc();};D.transaccionesW=function(){_5.$cctor();return _5.transaccionesW;};E.pendientes=function(eB){return Z.BindView(a.id,p.MapAsync(function(eC){var eD;eD=null;return cO.Delay(function(){return cO.Bind(E.chequearStatusAliado(eC,_0.obtenerListaDocs(eC.id),_0.obtenerFormasDePagoId(eC.id)),function(eE){var eF,eG,eH,eI,eJ;return eE.$==0&&bc.isEmpty(eE.$0)?cO.Return(Z.get_Empty()):eE.$==1?cO.Return(Z.TextNode(eE.$0)):cO.Return((eG=(eH=Z.Concat(bc.map(E.pendiente,eE.$0)),U.Make().WithHole({$:0,$0:"pasos",$1:eH})),(eI=V.CompleteHoles(eG.k,eG.h,[]),(eJ=new S.New(eI[1],W.pendientes(eI[0])),(eG.i=eJ,eJ)))).get_Doc());});});},eB));};E.chequearStatusAliado=function(eB,eC,eD){var eE;eE=bp.asyncResult();return eE.Run(eE.Delay(function(){return eB.status.$==0?eE.Bind$1(eC,function(eF){return eE.Bind$1(eD,function(eG){var eH;eH=bc.filter(function(eI){return eI.authorizeIdR.$==0;},eG);return eE.Return(bz.ofSeq(bc.delay(function(){var eI;return bc.append(E.chequearArchivos((eI=bL.Contrato,function(eJ){return E.esArchivoTipo(eI,eJ);}),E.firmarContrato,eF),bc.delay(function(){return bc.append(E.chequearCuentas(function(){return true;},E.agregarCuenta,eG),bc.delay(function(){return bc.append(bc.length(eH)>0?E.chequearArchivos(function(eJ){return E.esAutorizacion(eH,eJ);},E.firmarAutorizacion,eF):[],bc.delay(function(){var eJ;return bc.append(E.chequearArchivos((eJ=bL.FormaW9,function(eK){return E.esArchivoTipo(eJ,eK);}),function(){return E.subirArchivoTipo(bL.FormaW9);},eF),bc.delay(function(){var eK;return bc.append(E.chequearArchivos((eK=bL.FormaW8BEN,function(eL){return E.esArchivoTipo(eK,eL);}),function(){return E.subirArchivoTipo(bL.FormaW8BEN);},eF),bc.delay(function(){return E.chequearArchivos(E.esIdentificacion,E.subirIdentificacion,eF);}));}));}));}));}));})));});}):eE.Return(cu.Empty);}));};E.pendiente=function(eB){return Z.Element("li",[],eB);};E.chequearArchivos=function(eB,eC,eD){var eE,eF,eG;eE=E.filtroArchivo(eB,eD);return!J.Equals(eE,null)&&eE.length===0?[eC()]:(eF=bc.tryFind(function(eH){return eH.status.$===1;},eE),eF==null?(eG=bc.map(E.verificarArchivo,eE),bc.exists(function(eH){return eH.status.$!==2;},eE)?eG:bc.append(eG,[eC()])):[E.verificarArchivo(eF.$0)]);};E.firmarContrato=function(){return bz.ofArray([Z.Element("i",[cP.Create("class","far fa-square")],[]),Z.TextNode(" Firmar "),E.enlace(ds.FormaContrato(),"Contrato")]);};E.esArchivoTipo=function(eB,eC){return J.Equals(eC.tipo,eB);};E.chequearCuentas=function(eB,eC,eD){var eE;eE=E.filtroCuenta(eB,eD);return!J.Equals(eE,null)&&eE.length===0?[eC()]:bc.map(E.verificarCuenta,eE);};E.agregarCuenta=function(){return bz.ofArray([Z.Element("i",[cP.Create("class","far fa-square")],[]),Z.TextNode(" Agregar Forma de pago: "),E.enlace(ds.FormasPago(),"Tarjeta de Credito o Cuenta Bancaria")]);};E.firmarAutorizacion=function(){return bz.ofArray([Z.Element("i",[cP.Create("class","far fa-square")],[]),Z.TextNode(" Firmar "),E.enlace(ds.FormasPago(),"Autorizacion (Haga click en: AUTORIZAR DEBITO)")]);};E.esAutorizacion=function(eB,eC){return eC.tipo.$===1&&bc.exists(function(eD){return eC.nombre.indexOf(eD.cuentaPago.get_MaskedCuenta())!=-1;},eB);};E.subirArchivoTipo=function(eB){var eC;eC=E.tarchivo2String(eB);return bz.ofArray([Z.Element("i",[cP.Create("class","far fa-square")],[]),E.enlace(ds.Subir()," Subir "+eC[0][0]+"."),E.enlace(eC[1],"(Descargar aqui)")]);};E.esIdentificacion=function(eB){var eC;eC=eB.tipo;return eC.$==2||(eC.$==3||eC.$==4);};E.subirIdentificacion=function(){return bz.ofArray([Z.Element("i",[cP.Create("class","far fa-square")],[]),E.enlace(ds.Subir()," Subir "),Z.TextNode("documento de identidad: "),E.enlace(ds.Subir(),"Cedula, Pasaporte, Licencia de Conducir")]);};E.filtroArchivo=function(eB,eC){return T.ofSeq(bc.filter(eB,bc.filter(function(eD){return eD.status.$!==3&&eD.status.$!==4;},eC)));};E.verificarArchivo=function(eB){var eC;eC=eB.status;return eC.$==1?bz.ofArray([Z.Element("i",[cP.Create("class","fas fa-check-double")],[]),Z.TextNode(" "),E.enlaceArchivo(eB),Z.TextNode((function(eD){return function(eE){return eD(" Verificad"+bD.toSafe(eE));};}(a.id))(E.sufijo(eB)))]):eC.$==2?bz.ofArray([Z.Element("i",[cP.Create("class","fas fa-times-circle")],[]),Z.TextNode(" "),E.enlaceArchivo(eB),Z.TextNode((function(eD){return function(eE){return eD(" Rechazad"+bD.toSafe(eE));};}(a.id))(E.sufijo(eB)))]):E.pendienteArchivo(eB);};E.enlace=function(eB,eC){return Z.Element("a",[cP.Create("href",eB)],[Z.TextNode(eC)]);};E.filtroCuenta=function(eB,eC){return T.ofSeq(bc.filter(eB,eC));};E.verificarCuenta=function(eB){var eC,eD,eE,eF;eC=(eD=(eE=eB.subscripcion,eE==null?null:{$:1,$0:"Subscripción: "+eE.$0.get_Short()}),eD==null?"":eD.$0);eF=eB.authorizeIdR;return eF.$==1?bz.ofArray([Z.Element("i",[cP.Create("class","far fa-square")],[]),Z.TextNode(((((et.Curried(function(eG,eH,eI,eJ){return eG(" "+bD.toSafe(eH)+" "+bD.toSafe(eI)+" NO REGISTRADA en Authorize ("+bD.toSafe(eJ)+")");},4))(a.id))(eB.cuentaPago.get_TipoLargo()))(eB.cuentaPago.get_MaskedCuenta()))(eF.$0))]):bz.ofArray([Z.Element("i",[cP.Create("class","far fa-check-square")],[]),Z.TextNode((((((et.Curried(function(eG,eH,eI,eJ,eK){return eG(" "+bD.toSafe(eH)+" "+bD.toSafe(eI)+" Registrada. ("+bD.toSafe(eJ)+") "+bD.toSafe(eK));},5))(a.id))(eB.cuentaPago.get_TipoLargo()))(eB.cuentaPago.get_MaskedCuenta()))(eF.$0.get_Id()))(eC))]);};E.tarchivo2String=function(eB){return eB.$==6?[["Formulario W-8BEN","o"],ds.FormaW8BEN()]:eB.$==1?[["Autorización de pago","a"],ds.FormasPago()]:eB.$==0?[["Contrato","o"],ds.FormaContrato()]:eB.$==3?[["Cedula","a"],ds.Subir()]:eB.$==4?[["Licencia de Conducir","a"],ds.Subir()]:eB.$==2?[["Pasaporte","o"],ds.Subir()]:eB.$==7?[[eB.$0,"o(a)"],ds.Subir()]:[["Formulario W-9","o"],ds.FormaW9()];};E.enlaceArchivo=function(eB){var eC,eD,eE,eF;return(eC=(eD=(E.tarchivo2String(eB.tipo))[0][0],U.Make().WithHole({$:1,$0:"idaliado",$1:eB.idAliado.get_Id()}).WithHole({$:1,$0:"archivo",$1:eB.nombre}).WithHole({$:1,$0:"title",$1:eB.nombre}).WithHole({$:1,$0:"nombre",$1:eD})),(eE=V.CompleteHoles(eC.k,eC.h,[]),(eF=new S.New(eE[1],W.enlacedocumento(eE[0])),(eC.i=eF,eF)))).get_Doc();};E.sufijo=function(eB){return(E.tarchivo2String(eB.tipo))[0][1];};E.pendienteArchivo=function(eB){return bz.ofArray([Z.Element("i",[cP.Create("class","far fa-check-square")],[]),Z.TextNode(" "),E.enlaceArchivo(eB),Z.TextNode((function(eC){return function(eD){return eC(" subid"+bD.toSafe(eD)+". ");};}(a.id))(E.sufijo(eB))),Z.Element("i",[cP.Create("class","far fa-square")],[]),Z.TextNode(" Pendiente de Verificacion")]);};I.GetFields=function(eB){var eC,eD;eC=[];for(var eE in eB)eC.push([eE,eB[eE]]);return eC;};I.GetFieldValues=function(eB){var eC,eD;eC=[];for(var eE in eB)eC.push(eB[eE]);return eC;};J.Equals=function(eB,eC){var eD,eE,eF,eG;if(eB===eC)return true;else{eD=typeof eB;if(eD=="object"){if(eB===null||eB===void 0||eC===null||eC===void 0)return false;else if("Equals"in eB)return eB.Equals(eC);else if(eB instanceof a.Array&&eC instanceof a.Array)return J.arrayEquals(eB,eC);else if(eB instanceof a.Date&&eC instanceof a.Date)return J.dateEquals(eB,eC);else{eE=[true];for(var eH in eB)if(function(eI){eE[0]=!eB.hasOwnProperty(eI)||eC.hasOwnProperty(eI)&&J.Equals(eB[eI],eC[eI]);return!eE[0];}(eH))break;if(eE[0]){for(var eI in eC)if(function(eJ){eE[0]=!eC.hasOwnProperty(eJ)||eB.hasOwnProperty(eJ);return!eE[0];}(eI))break;}return eE[0];}}else return eD=="function"&&("$Func"in eB?eB.$Func===eC.$Func&&eB.$Target===eC.$Target:"$Invokes"in eB&&"$Invokes"in eC&&J.arrayEquals(eB.$Invokes,eC.$Invokes));}};J.arrayEquals=function(eB,eC){var eD,eE;if(T.length(eB)===T.length(eC)){eD=true;eE=0;while(eD&&eE<T.length(eB)){!J.Equals(T.get(eB,eE),T.get(eC,eE))?eD=false:void 0;eE=eE+1;}return eD;}else return false;};J.dateEquals=function(eB,eC){return eB.getTime()===eC.getTime();};J.Compare=function(eB,eC){var eD,eE,eF,eG,eH,eI;if(eB===eC)return 0;else{eE=typeof eB;switch(eE=="function"?1:eE=="boolean"?2:eE=="number"?2:eE=="string"?2:eE=="object"?3:0){case 0:return typeof eC=="undefined"?0:-1;case 1:return o.FailWith("Cannot compare function values.");case 2:return eB<eC?-1:1;case 3:if(eB===null)eF=-1;else if(eC===null)eF=1;else if("CompareTo"in eB)eF=eB.CompareTo(eC);else if("CompareTo0"in eB)eF=eB.CompareTo0(eC);else if(eB instanceof a.Array&&eC instanceof a.Array)eF=J.compareArrays(eB,eC);else if(eB instanceof a.Date&&eC instanceof a.Date)eF=J.compareDates(eB,eC);else{eG=[0];for(var eJ in eB)if(function(eK){return!eB.hasOwnProperty(eK)?false:!eC.hasOwnProperty(eK)?(eG[0]=1,true):(eG[0]=J.Compare(eB[eK],eC[eK]),eG[0]!==0);}(eJ))break;if(eG[0]===0){for(var eK in eC)if(function(eL){return!eC.hasOwnProperty(eL)?false:!eB.hasOwnProperty(eL)&&(eG[0]=-1,true);}(eK))break;}eF=eG[0];}return eF;}}};J.compareArrays=function(eB,eC){var eD,eE;if(T.length(eB)<T.length(eC))return -1;else if(T.length(eB)>T.length(eC))return 1;else{eD=0;eE=0;while(eD===0&&eE<T.length(eB)){eD=J.Compare(T.get(eB,eE),T.get(eC,eE));eE=eE+1;}return eD;}};J.compareDates=function(eB,eC){return J.Compare(eB.getTime(),eC.getTime());};J.Hash=function(eB){var eC;eC=typeof eB;return eC=="function"?0:eC=="boolean"?eB?1:0:eC=="number"?eB:eC=="string"?J.hashString(eB):eC=="object"?eB==null?0:eB instanceof a.Array?J.hashArray(eB):J.hashObject(eB):0;};J.hashString=function(eB){var eC,eD,eE;if(eB===null)return 0;else{eC=5381;for(eD=0,eE=eB.length-1;eD<=eE;eD++)eC=J.hashMix(eC,eB[eD].charCodeAt());return eC;}};J.hashArray=function(eB){var eC,eD,eE;eC=-34948909;for(eD=0,eE=T.length(eB)-1;eD<=eE;eD++)eC=J.hashMix(eC,J.Hash(T.get(eB,eD)));return eC;};J.hashObject=function(eB){var eC,eD;if("GetHashCode"in eB)return eB.GetHashCode();else{eC=[0];for(var eE in eB)if(function(eF){eC[0]=J.hashMix(J.hashMix(eC[0],J.hashString(eF)),J.Hash(eB[eF]));return false;}(eE))break;return eC[0];}};J.hashMix=function(eB,eC){return(eB<<5)+eB+eC;};K.newLyt=function(eB,eC){return bU.New(eB,i.Create$1(eC));};K.addLayout=function(eB){p.Sink(function(eC){var eD;eD=K.createEntries(eB.lytName,eC);k.addPlugIn(l.New(eB.lytName,T.ofSeq(bc.delay(function(){return bc.append([k.newVar("Layout",eB.lytDefinition)],bc.delay(function(){return K.getVarEntries(eD);}));})),[],T.ofSeq(bc.delay(function(){return bc.append(K.getDocEntries(eD),bc.delay(function(){var eE;return bc.append([k.newDocF("InputFile",{$:4,$0:(eE=eB.lytName,et.Curried(K.inputFile,4,[eE])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],bc.delay(function(){var eF;return bc.append([k.newDocF("InputLabel",{$:3,$0:(eF=eB.lytName,et.Curried(K.inputLabel,3,[eF])),$1:"attrs",$2:"Label",$3:"Var"})],bc.delay(function(){var eG;return bc.append([k.newDocF("HtmlDoc",{$:1,$0:(eG=eB.lytName,function(eH){return K.htmlDoc(eG,eH);}),$1:"html"})],bc.delay(function(){return[k.newDocF("none",{$:1,$0:K.none,$1:"x"})];}));}));}));}));})),[],[]));k.mainDocV().Set(k.mainDocV().Get());},eB.lytDefinition.get_View());};K.createEntries=function(eB,eC){return K.processLines(function(eD){return K.createEntryO(eB,eD);},bK.splitByChar("\n",eC));};K.getVarEntries=function(eB){function eC(eD){return eD[1];}return bc.map(function(eD){return bc.last(eC(eD));},bc.groupBy(function(eD){return eD.varName;},bc.choose(function(eD){return eD.$==0?{$:1,$0:eD.$0}:null;},eB)));};K.getDocEntries=function(eB){function eC(eD){return eD[1];}return bc.map(function(eD){return bc.last(eC(eD));},bc.groupBy(function(eD){return eD.docName;},bc.choose(function(eD){return eD.$==2?{$:1,$0:eD.$0}:null;},eB)));};K.inputFile=function(eB,eC,eD,eE,eF){var eG,eH,eI,eJ;eG=(eH=(eI=((K.splitName())(eB))(eE),k.tryGetAct(eI[0],eI[1])),eH==null?null:{$:1,$0:(eJ=eH.$0,Z.Element("div",K.getAttrs(eB,eC,true),[Z.Element("div",[cP.Create("class","input-group")],[Z.Element("span",[cP.Create("class","input-group-btn")],[Z.Element("label",[cP.Create("class","btn")],[K.getText(eB,eD,true),Z.Element("input",[cP.Create("class","form-control"),cP.Create("type","file"),cT.Style("display","none"),cP.HandlerImpl("click",function(eK){return function(){eK.value="";};}),cP.HandlerImpl("change",function(eK){return function(){return k.callFunction(eK,null,eJ.actFunction);};})],[])])]),eF!==""?K.singleDoc(eB,bz.ofArray([[eF,false]])):Z.get_Empty()])]))});return eG==null?K.errDoc((function(eK){return function(eL){return eK("Action not found "+bD.toSafe(eL));};}(a.id))(eE)):eG.$0;};K.inputLabel=function(eB,eC,eD,eE){var eF,eG,eH;eF=(eG=(eH=((K.splitName())(eB))(eE),k.tryGetVar(eH[0],eH[1])),eG==null?null:{$:1,$0:Z.Element("div",K.getAttrs(eB,eC,true),[Z.Element("div",[cP.Create("class","input-group")],[Z.Element("span",[cP.Create("class","input-group-addon")],[K.getText(eB,eD,true)]),Z.Input([cP.Create("class","form-control")],eG.$0.varVar)])])});return eF==null?K.errDoc((function(eI){return function(eJ){return eI("Var not found "+bD.toSafe(eJ));};}(a.id))(eE)):eF.$0;};K.htmlDoc=function(eB,eC){var eD;eD=K.getTextData(eB,eC);return eD.$==1?Z.BindView(Z.Verbatim,eD.$0):eD.$==2?K.errDoc((function(eE){return function(eF){return eE("HtmlDoc: unexpected action "+cU.p$1(eF));};}(a.id))(eD.$0)):Z.Verbatim(eD.$0);};K.none=function(eB){return Z.Element("span",[],[]);};K.turnToView=function(eB){return Z.EmbedView(p.Map(eB,k.mainDocV().get_View()));};K.splitName=function(){bV.$cctor();return bV.splitName;};K.getDocFinal=function(eB,eC){var eD;eD=K.getDocF(eB,eC);return eD[1].$==0?eD[0]:K.errDoc((((et.Curried3(function(eE,eF,eG){return eE("Too many parameters "+cU.p(eF)+" "+bD.printList(function(eH){return"("+bD.prettyPrint(eH[0])+", "+bD.prettyPrint(eH[1])+")";},eG));}))(a.id))(eC))(eB));};K.errDoc=function(eB){return Z.Element("div",[],[Z.TextNode(eB)]);};K.processLines=function(eB,eC){function eD(eE){var eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS;eF=bc.tryHead(eE);return eF!=null&&eF.$==1?(eG=eF.$0,(eH=K.splitTokens(eG),eH.$==1&&(eJ=(eK=eH.$0,K.Identifier(eK[0],eK[1])),eJ!=null&&eJ.$==1&&(eH.$1.$==1&&((eL=eH.$1.$0,K.Vertical(eL[0],eL[1])).$==2&&(eH.$1.$1.$==0&&(eI=eJ.$0,true)))))?(eM=K.getExtraLines(function(eT){return bj.StartsWith(bj.Trim(eT),"|");},eE),eD((dt.createLayoutDefinitions(eI,dt.extractNodes(eM[0])))[1].concat(eM[1]))):eH.$==0?eD(cc.array(eE,{$:1,$0:1},null)):(eN=K.getExtraLines(function(eT){return bj.StartsWith(bj.Trim(eT),":");},eE),(eO=eN[1],(eP=eN[0],T.length(eP)>0?((function(eT){return function(eU){return eT("l = ;"+bD.toSafe(eU)+";");};}(function(eT){ew.log(eT);}))(eG),eQ=K.createLines(bc.nth(0,bj.SplitChars(eG,[" "],1)),1,[],[],1,eP),eR=eQ[0],eS=eQ[1],eD(T.ofSeq(bc.delay(function(){return bc.append([eG+" "+bj.concat(" ",eR)],bc.delay(function(){return bc.append(eS,bc.delay(function(){return eO;}));}));})))):T.ofSeq(bc.delay(function(){var eT;return bc.append((eT=eB(eG),eT!=null&&eT.$==1?[eT.$0]:[]),bc.delay(function(){return eD(eO);}));}))))))):[];}return eD(eC);};K.createEntryO=function(eB,eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE;try{eD=K.splitTokens(eC);return eD.$==1&&(eF=(eG=eD.$0,K.Identifier(eG[0],eG[1])),eF!=null&&eF.$==1&&(eD.$1.$==1&&((eH=eD.$1.$0,K.Vertical(eH[0],eH[1])).$==0&&(eD.$1.$1.$==1&&(eI=(eJ=eD.$1.$1.$0,K.Measures$1(eJ[0],eJ[1])),eI!=null&&eI.$==1&&(eE=[eD.$1.$1.$1,eI.$0,eF.$0],true))))))?(eK=eE[2],K.entryDoc(eK,(K.createSplitterM())([eB,eK,true,eE[1],eE[0]]))):eD.$==1&&(eM=(eN=eD.$0,K.Identifier(eN[0],eN[1])),eM!=null&&eM.$==1&&(eD.$1.$==1&&((eO=eD.$1.$0,K.Vertical(eO[0],eO[1])).$==1&&(eD.$1.$1.$==1&&(eP=(eQ=eD.$1.$1.$0,K.Measures$1(eQ[0],eQ[1])),eP!=null&&eP.$==1&&(eL=[eD.$1.$1.$1,eP.$0,eM.$0],true))))))?(eR=eL[2],K.entryDoc(eR,(K.createSplitterM())([eB,eR,false,eL[1],eL[0]]))):eD.$==1&&(eT=(eU=eD.$0,K.Identifier(eU[0],eU[1])),eT!=null&&eT.$==1&&(eD.$1.$==1&&((eV=eD.$1.$0,K.Var(eV[0],eV[1])).$==2&&(eD.$1.$1.$==1&&(eW=(eX=eD.$1.$1.$0,K.Identifier(eX[0],eX[1])),eW!=null&&eW.$==1&&(eD.$1.$1.$1.$==1&&(eD.$1.$1.$1.$1.$==1&&(eD.$1.$1.$1.$1.$1.$==0&&(eS=[eW.$0,eD.$1.$1.$1.$0,eT.$0,eD.$1.$1.$1.$1.$0],true)))))))))?(eY=eS[2],K.entryDoc(eY,(K.createButtonM())([eB,eY,eS[0],eS[1],eS[3]]))):eD.$==1&&(e0=(e1=eD.$0,K.Identifier(e1[0],e1[1])),e0!=null&&e0.$==1&&(eD.$1.$==1&&((e2=eD.$1.$0,K.Var(e2[0],e2[1])).$==3&&(eD.$1.$1.$==1&&(e3=(e4=eD.$1.$1.$0,K.Identifier(e4[0],e4[1])),e3!=null&&e3.$==1&&(eD.$1.$1.$1.$==1&&(eD.$1.$1.$1.$1.$==0&&(eZ=[eD.$1.$1.$1.$0,e0.$0,e3.$0],true))))))))?(e5=eZ[1],K.entryDoc(e5,(K.createInputM())([eB,e5,eZ[2],eZ[0]]))):eD.$==1&&(e7=(e8=eD.$0,K.Identifier(e8[0],e8[1])),e7!=null&&e7.$==1&&(eD.$1.$==1&&((e9=eD.$1.$0,K.Var(e9[0],e9[1])).$==4&&(eD.$1.$1.$==1&&(e_=(e$=eD.$1.$1.$0,K.Identifier(e$[0],e$[1])),e_!=null&&e_.$==1&&(eD.$1.$1.$1.$==1&&(eD.$1.$1.$1.$1.$==0&&(e6=[eD.$1.$1.$1.$0,e7.$0,e_.$0],true))))))))?(fa=e6[1],K.entryDoc(fa,(K.createTextAreaM())([eB,fa,e6[2],e6[0]]))):eD.$==1&&(fc=(fd=eD.$0,K.Identifier(fd[0],fd[1])),fc!=null&&fc.$==1&&(eD.$1.$==1&&((fe=eD.$1.$0,K.Var(fe[0],fe[1])).$==0&&(eD.$1.$1.$==1&&(eD.$1.$1.$1.$==0&&(fb=[fc.$0,eD.$1.$1.$0],true))))))?(ff=fb[0],K.entryVar(ff,(K.createVarM())([eB,ff,fb[1][0]]))):eD.$==1&&(fh=(fi=eD.$0,K.Identifier(fi[0],fi[1])),fh!=null&&fh.$==1&&(eD.$1.$==1&&((fj=eD.$1.$0,K.Var(fj[0],fj[1])).$==1&&(eD.$1.$1.$==1&&(fg=[eD.$1.$1.$0,fh.$0,eD.$1.$1.$1],true)))))?(fk=fg[1],K.entryDoc(fk,(K.createDocM())([eB,fk,fg[0][0],fg[2]]))):eD.$==1&&(fm=(fn=eD.$0,K.Identifier(fn[0],fn[1])),fm!=null&&fm.$==1&&(eD.$1.$==1&&((fo=eD.$1.$0,K.Vertical(fo[0],fo[1])).$==4&&(eD.$1.$1.$==1&&(eD.$1.$1.$1.$==1&&(fl=[eD.$1.$1.$1.$0,eD.$1.$1.$1.$1,fm.$0,eD.$1.$1.$0],true))))))?(fp=fl[2],K.entryDoc(fp,(K.createTemplateM())([eB,fp,fl[3],fl[0],fl[1]]))):eD.$==1&&(fr=(fs=eD.$0,K.Identifier(fs[0],fs[1])),fr!=null&&fr.$==1&&(eD.$1.$==1&&((ft=eD.$1.$0,K.Concat(ft[0],ft[1])).$==0&&(fq=[eD.$1.$1,fr.$0],true))))?(fu=fq[1],K.entryDoc(fu,(K.createConcatM())([eB,fu,fq[0]]))):eD.$==1&&(fw=(fx=eD.$0,K.Identifier(fx[0],fx[1])),fw!=null&&fw.$==1&&(eD.$1.$==1&&((fy=eD.$1.$0,K.Vertical(fy[0],fy[1])).$==3&&(eD.$1.$1.$==1&&(eD.$1.$1.$1.$==1&&(eD.$1.$1.$1.$1.$==1&&(fv=[eD.$1.$1.$1.$1.$0,eD.$1.$1.$0,eD.$1.$1.$1.$1.$1,fw.$0,eD.$1.$1.$1.$0],true)))))))?null:eD.$==1&&(fA=(fB=eD.$0,K.Identifier(fB[0],fB[1])),fA!=null&&fA.$==1&&(eD.$1.$==1&&(fC=(fD=eD.$1.$0,K.Vertical(fD[0],fD[1])),fC.$==5&&(eD.$1.$1.$==1&&(fz=[eD.$1.$1.$0,eD.$1.$1.$1,fC.$0,fA.$0],true)))))?(fE=fz[3],K.entryDoc(fE,(K.createElementM())([eB,fE,fz[2],fz[0],fz[1]]))):null;}catch(fF){((function(fG){return function(fH){return fG(bD.prettyPrint(fH));};}(function(fG){ew.log(fG);}))(fF));return null;}};K.getAttrs=function(eB,eC,eD){var eE;eE=[eC,eD];return bz.ofSeq(bc.delay(function(){return bc.append(bc.choose(function(eF){var eG,eH,eI,eJ,eK,eL;return!J.Equals(eF,null)&&eF.length===2&&(eH=T.get(eF,1),bj.Trim(T.get(eF,0))!==""&&bj.Trim(eH)!=="")?(eI=T.get(eF,1),(eJ=T.get(eF,0),{$:1,$0:(eK=K.getTextData(eB,bj.Trim(eI)),eK.$==1?cT.Dynamic(bj.Trim(eJ),eK.$0):eK.$==2?(eL=eK.$0,cT.Handler(bj.Trim(eJ),function(eM){return function(eN){return k.callFunction(eM,eN,eL.actFunction);};})):cP.Create(bj.Trim(eJ),bj.Trim(eK.$0)))})):null;},bc.map(function(eF){return bK.splitByChar("=",eF);},bK.splitByChar(";",eE[0]))),bc.delay(function(){return bc.choose(function(eF){var eG,eH,eI,eJ,eK;return!J.Equals(eF,null)&&eF.length===2&&(eH=T.get(eF,1),bj.Trim(T.get(eF,0))!==""&&bj.Trim(eH)!=="")?(eI=T.get(eF,1),(eJ=T.get(eF,0),{$:1,$0:(eK=K.getTextData(eB,bj.Trim(eI)),eK.$==1?cT.DynamicStyle(bj.Trim(eJ),eK.$0):eK.$==2?cT.Style(bj.Trim(eJ),(function(eL){return function(eM){return eL("${"+bD.toSafe(eM)+"}");};}(a.id))(eK.$0.actName)):cT.Style(bj.Trim(eJ),bj.Trim(eK.$0)))})):null;},bc.map(function(eF){return bK.splitByChar(":",eF);},bK.splitByChar(";",eE[0])));}));}));};K.getText=function(eB,eC,eD){var eE,eF,eG,eH,eI,eJ,eK,eL,eM;eE=K.Identifier(eC,eD);return eE!=null&&eE.$==1?(eF=eE.$0,(eG=((K.splitName())(eB))(eF),(eH=eG[0],(eI=eG[1],(eJ=(eK=k.tryGetViw(eH,eI),eK==null?null:{$:1,$0:Z.TextView(eK.$0.viwView)}),eJ==null?(eL=(eM=k.tryGetVar(eH,eI),eM==null?null:{$:1,$0:Z.TextView(eM.$0.varVar.get_View())}),eL==null?Z.TextNode(eF):eL.$0):eJ.$0))))):Z.TextNode(eC);};K.singleDoc=function(eB,eC){return Z.EmbedView(p.Map(function(eD){var eE;return eD.$==1&&(eD.$1.$==0&&(eE=eD.$0,true))?eE:K.errDoc((function(eF){return function(eG){return eF("expected exactly 1 element "+bD.printList(function(eH){return"("+bD.prettyPrint(eH[0])+", "+bD.prettyPrint(eH[1])+")";},eG));};}(a.id))(eC));},p.Map(function(){return K.getDocs(eB,eC);},k.mainDocV().get_View())));};K.getTextData=function(eB,eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;eD=(eE=bK.delimitedO("@{","}",eC),eE==null?null:{$:1,$0:(eF=eE.$0,(eG=eF[0],(eH=eF[1],(eI=eF[2],(eJ=((K.splitName())(eB))(eH),(eK=eJ[0],(eL=eJ[1],(eM=(eN=k.tryGetWoW(eK,eL),eN==null?null:{$:1,$0:function(eQ){var eR,eS;eS=K.getTextData(eB,eI);switch(eG===""?eS.$==1?(eR=eS.$0,2):eS.$==2?(eR=eS.$0,3):eS.$0===""?0:(eR=eS.$0,1):eS.$==1?(eR=eS.$0,2):eS.$==2?(eR=eS.$0,3):(eR=eS.$0,1)){case 0:return{$:1,$0:eQ};case 1:return{$:1,$0:p.Map(function(eT){return eG+eT+eR;},eQ)};case 2:return{$:1,$0:p.Map2(function(eT,eU){return eG+eT+eU;},eQ,eR)};case 3:return{$:2,$0:eR};}}(eN.$0)}),eM==null?(eO=(eP=k.tryGetAct(eK,eL),eP==null?null:{$:1,$0:{$:2,$0:eP.$0}}),eO==null?{$:0,$0:((((et.Curried(function(eQ,eR,eS,eT){return eQ(bD.toSafe(eR)+" ${Missing "+bD.toSafe(eS)+"}"+bD.toSafe(eT));},4))(a.id))(eG))(eH))(eI)}:eO.$0):eM.$0))))))))});return eD==null?{$:0,$0:eC}:eD.$0;};K.createSplitter=function(eB,eC,eD,eE,eF){var eG;eG=K.pairOfDocs(eB,eF);return eE.$==1?K.variableSplitter(eD,eE.$0,eE.$1,eE.$2,eG[0],eG[1]):K.fixedSplitter(eD,eE.$0,eE.$1,eG[0],eG[1]);};K.createButton=function(eB,eC,eD,eE,eF){return K.turnToView(function(){var eG,eH,eI,eJ,eK;function eL(eM,eN){return k.callFunction(null,null,eM.actFunction);}eG=(eH=(eI=(eJ=((K.splitName())(eB))(eD),k.tryGetAct(eJ[0],eJ[1])),eI==null?null:{$:1,$0:(eK=eI.$0,function(eM){return eL(eK,eM);})}),eH==null?a.ignore:eH.$0);return Z.Button(eF[0],K.getAttrs(eB,eE[0],eE[1]),eG);});};K.createInput=function(eB,eC,eD,eE){return K.turnToView(function(){var eF,eG,eH,eI,eJ;eF=(eG=(eH=((K.splitName())(eB))(eD),k.tryGetVoV(eH[0],eH[1])),(eI=(eJ=K.getAttrs(eB,eE[0],eE[1]),function(eK){return Z.Input(eJ,eK);}),eG==null?null:{$:1,$0:eI(eG.$0)}));return eF==null?K.errDoc((function(eK){return function(eL){return eK("Missing var: "+bD.toSafe(eL));};}(a.id))(eD)):eF.$0;});};K.createTextArea=function(eB,eC,eD,eE){return K.turnToView(function(){var eF,eG,eH,eI,eJ;eF=(eG=(eH=((K.splitName())(eB))(eD),k.tryGetVoV(eH[0],eH[1])),(eI=(eJ=K.getAttrs(eB,eE[0],eE[1]),function(eK){return Z.InputArea(eJ,eK);}),eG==null?null:{$:1,$0:eI(eG.$0)}));return eF==null?K.errDoc((function(eK){return function(eL){return eK("Missing var: "+bD.toSafe(eL));};}(a.id))(eD)):eF.$0;});};K.createElement=function(eB,eC,eD,eE,eF){var eG;eG=[K.turnToView(function(){return Z.Concat(K.getDocs(eB,eF));})];return Z.Element(eD,K.getAttrs(eB,eE[0],eE[1]),eG);};K.createDoc=function(eB,eC,eD,eE){return K.turnToView(function(){var eF,eG,eH;eF=(eG=(eH=((K.splitName())(eB))(eD),k.tryGetDoc(eH[0],eH[1])),eG==null?null:{$:1,$0:K.getDocFinal(eE,eG.$0)});return eF==null?K.errDoc((function(eI){return function(eJ){return eI("Missing doc: "+bD.toSafe(eJ));};}(a.id))(eD)):eF.$0;});};K.createTemplate=function(eB,eC,eD,eE,eF){return K.turnToView(function(){var eG,eH,eI,eJ,eK,eL;eI=K.getAttrs(eB,eE[0],eE[1]);c7.LoadLocalTemplates("local");function eM(eO,eP){var eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1;eQ=K.Identifier(eP[0],eP[1]);return eQ!=null&&eQ.$==1?(eR=eQ.$0,eS=eO[0],eT=(eU=(eV=(eW=((K.splitName())(eB))(eR),k.tryGetDoc(eW[0],eW[1])),eV==null?null:{$:1,$0:{$:0,$0:eS.toLowerCase(),$1:(K.getDocF(cu.Empty,eV.$0))[0]}}),eU==null?(eX=(eY=((K.splitName())(eB))(eR),k.tryGetVar(eY[0],eY[1])),eX==null?null:{$:1,$0:{$:8,$0:eS.toLowerCase(),$1:eX.$0.varVar}}):eU),eT==null?{$:0,$0:eS.toLowerCase(),$1:K.errDoc((function(e2){return function(e3){return e2("Missing element: "+bD.toSafe(e3));};}(a.id))(eR))}:eT.$0):(eZ=eO[0],e0=K.getTextData(eB,eP[0]),e0.$==1?{$:2,$0:eZ.toLowerCase(),$1:e0.$0}:e0.$==2?(e1=e0.$0,{$:4,$0:eZ.toLowerCase(),$1:function(e2){return function(e3){return k.callFunction(e2,e3,e1.actFunction);};}}):{$:1,$0:eZ.toLowerCase(),$1:e0.$0});}function eN(eO,eP){return eO%2===0;}try{eH={$:1,$0:(eJ=(eK=bc.map(function(eO){return eM(eO[0],eO[1]);},bc.map(function(eO){return eO[1];},bc.filter(function(eO){return eN(eO[0],eO[1]);},bc.indexed(bc.pairwise(eF))))),(bc.isEmpty(eI)?a.id:(eL=[{$:3,$0:"attrs",$1:cP.Concat(eI)}],function(eO){return bc.append(eL,eO);}))(eK)),c7.NamedTemplate("local",{$:1,$0:eD[0].toLowerCase()},eJ))};}catch(eO){eH=null;}return eH==null?K.errDoc((function(eP){return function(eQ){return eP("Missing template: "+bD.toSafe(eQ));};}(a.id))(eD[0])):eH.$0;});};K.createConcat=function(eB,eC,eD){return K.turnToView(function(){return Z.Concat(K.getDocs(eB,eD));});};K.createVar=function(eB,eC,eD){return i.Create$1(eD);};K.addNewLayout=function(eB,eC){var eD,eE;K.addLayout((eD=(eE=!J.Equals(eC,null)?eC:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(bK.unindentStr())(eE)),K.newLyt(!J.Equals(eC,null)?eB:"Lyt_"+bj.Replace(a.String(bt.NewGuid()),"-",""),eD)));};K.getDocF=function(eB,eC){var eD,eE;eE=eC.docDoc;switch(eE.$==1?eB.$==1?(eD=[eE.$0,eB.$0[0],eB.$1],1):6:eE.$==2?eB.$==1?eB.$1.$==1?(eD=[eE.$0,eB.$0[0],eB.$1.$0[0],eB.$1.$1],2):6:6:eE.$==3?eB.$==1?eB.$1.$==1?eB.$1.$1.$==1?(eD=[eE.$0,eB.$0[0],eB.$1.$0[0],eB.$1.$1.$0[0],eB.$1.$1.$1],3):6:6:6:eE.$==4?eB.$==1?eB.$1.$==1?eB.$1.$1.$==1?eB.$1.$1.$1.$==1?(eD=[eE.$0,eB.$0[0],eB.$1.$0[0],eB.$1.$1.$0[0],eB.$1.$1.$1.$0[0],eB.$1.$1.$1.$1],4):6:6:6:6:eE.$==5?eB.$==1?eB.$1.$==1?eB.$1.$1.$==1?eB.$1.$1.$1.$==1?eB.$1.$1.$1.$1.$==1?(eD=[eE.$0,eB.$0[0],eB.$1.$0[0],eB.$1.$1.$0[0],eB.$1.$1.$1.$0[0],eB.$1.$1.$1.$1.$0[0],eB.$1.$1.$1.$1.$1],5):6:6:6:6:6:(eD=[eE.$0,eB],0)){case 0:return[eD[0].f(),eD[1]];case 1:return[eD[0](eD[1]),eD[2]];case 2:return[(eD[0](eD[1]))(eD[2]),eD[3]];case 3:return[((eD[0](eD[1]))(eD[2]))(eD[3]),eD[4]];case 4:return[(((eD[0](eD[1]))(eD[2]))(eD[3]))(eD[4]),eD[5]];case 5:return[((((eD[0](eD[1]))(eD[2]))(eD[3]))(eD[4]))(eD[5]),eD[6]];case 6:return[Z.Element("div",[],[Z.TextNode((((et.Curried3(function(eF,eG,eH){return eF("Parameters do not coincide with definition "+cU.p(eG)+" - "+bD.printList(function(eI){return"("+bD.prettyPrint(eI[0])+", "+bD.prettyPrint(eI[1])+")";},eH));}))(a.id))(eC))(eB))]),cu.Empty];}};K.splitTokens=function(eB){return bz.ofSeq(bc.collect(a.id,bc.mapi(function(eC,eD){var eE;return eC%2===1?[[eD,true]]:(eE=bj.Trim(eD),eE===""?[]:T.map(function(eF){return[eF,false];},bj.SplitChars(eE,[" "],1)));},bK.splitByChar("\"",eB))));};K.Identifier=function(eB,eC){var eD,eE,eF;return(eE=j.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",eB),eE!=null&&eE.$==1&&((eF=eE.$0,!J.Equals(eF,null)&&eF.length===1)&&(eC?false:(eD=T.get(eE.$0,0),true))))?{$:1,$0:eD}:null;};K.Vertical=function(eB,eC){var eD,eE,eF,eG,eH,eI;return(eC?false:eB==="vertical")?{$:0,$0:null}:(eC?false:eB==="horizontal")?{$:1,$0:null}:(eC?false:eB==="layout")?{$:2,$0:null}:(eC?false:eB==="grid")?{$:3,$0:null}:(eC?false:eB==="template")?{$:4,$0:null}:(eI=K.Identifier(eB,eC),eI!=null&&eI.$==1?{$:5,$0:eI.$0}:{$:6,$0:null});};K.getExtraLines=function(eB,eC){var eD,eE,eF,eG;eD=(eE=(eF=bc.tryFindIndex(function(eH){return bj.Trim(eH)!==""&&!eB(eH);},bc.skip(1,eC)),eF==null?null:{$:1,$0:1+eF.$0}),(eG=T.length(eC),eE==null?eG:eE.$0));return[cc.array(eC,{$:1,$0:1},{$:1,$0:eD-1}),cc.array(eC,{$:1,$0:eD},null)];};K.createLines=function(eB,eC,eD,eE,eF,eG){var eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ;eH=bj.replicate(eC,":");eI=":"+eH;eJ=bc.tryHead(eG);return eJ!=null&&eJ.$==1?(eK=bK.StartsWith(eH,bj.Trim(eJ.$0)),eK!=null&&eK.$==1?(eL=eK.$0,(eM=K.getExtraLines(function(eR){return bj.StartsWith(bj.Trim(eR),eI);},eG),(eN=(((et.Curried3(function(eR,eS,eT){return eR(bD.toSafe(eS)+"_"+a.String(eT));}))(a.id))(eB))(eF),(eO=K.createLines(eN,eC+1,[],[],1,eM[0]),(eP=eO[1],(eQ=eO[0],K.createLines(eB,eC,T.ofSeq(bc.delay(function(){return bc.append(eD,bc.delay(function(){return[eN];}));})),T.ofSeq(bc.delay(function(){return bc.append(eE,bc.delay(function(){return bc.append([eN+" "+eL+" "+bj.concat(" ",eQ)],bc.delay(function(){return eP;}));}));})),eF+1,eM[1]))))))):[eD,eE]):[eD,eE];};K.Measures$1=function(eB,eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM;eD=[eB,eC];return eD[1]?null:(eE=bK.splitByChar("-",eD[0]),!J.Equals(eE,null)&&eE.length===1&&(eG=(cw.Double())(T.get(eE,0)),eG!=null&&eG.$==1&&(eF=eG.$0,true))?{$:1,$0:new dL({$:0,$0:eF,$1:true})}:!J.Equals(eE,null)&&eE.length===2&&(T.get(eE,0)===""&&(eI=(cw.Double())(T.get(eE,1)),eI!=null&&eI.$==1&&(eH=eI.$0,true)))?{$:1,$0:new dL({$:0,$0:eH,$1:false})}:!J.Equals(eE,null)&&eE.length===3&&(eK=(cw.Double())(T.get(eE,0)),eK!=null&&eK.$==1&&(eL=(cw.Double())(T.get(eE,1)),eL!=null&&eL.$==1&&(eM=(cw.Double())(T.get(eE,2)),eM!=null&&eM.$==1&&(eJ=[eM.$0,eK.$0,eL.$0],true))))?{$:1,$0:new dL({$:1,$0:eJ[1],$1:eJ[2],$2:eJ[0]})}:null);};K.entryDoc=function(eB,eC){return{$:1,$0:{$:2,$0:k.newDoc(eB,r.Create(function(){return eC;}))}};};K.createSplitterM=function(){bV.$cctor();return bV.createSplitterM;};K.Var=function(eB,eC){var eD,eE,eF,eG,eH,eI;return(eC?false:eB==="Var")?{$:0,$0:null}:(eC?false:eB==="Doc")?{$:1,$0:null}:(eC?false:eB==="button")?{$:2,$0:null}:(eC?false:eB==="input")?{$:3,$0:null}:(eC?false:eB==="textarea")?{$:4,$0:null}:(eC?false:eB==="select")?{$:5,$0:null}:{$:6,$0:null};};K.createButtonM=function(){bV.$cctor();return bV.createButtonM;};K.createInputM=function(){bV.$cctor();return bV.createInputM;};K.createTextAreaM=function(){bV.$cctor();return bV.createTextAreaM;};K.entryVar=function(eB,eC){return{$:1,$0:{$:0,$0:k.newVar(eB,eC)}};};K.createVarM=function(){bV.$cctor();return bV.createVarM;};K.createDocM=function(){bV.$cctor();return bV.createDocM;};K.createTemplateM=function(){bV.$cctor();return bV.createTemplateM;};K.Concat=function(eB,eC){var eD;return(eC?false:eB==="concat")?{$:0,$0:null}:{$:1,$0:null};};K.createConcatM=function(){bV.$cctor();return bV.createConcatM;};K.createElementM=function(){bV.$cctor();return bV.createElementM;};K.getDocs=function(eB,eC){var eD;return eC.$==0?cu.Empty:(eD=K.getOneDoc(eB,eC),new cu({$:1,$0:eD[0],$1:K.getDocs(eB,eD[1])}));};K.pairOfDocs=function(eB,eC){var eD;eD=p.Map(function(eE){var eF;return eE.$==1&&(eE.$1.$==1&&(eE.$1.$1.$==0&&(eF=[eE.$0,eE.$1.$0],true)))?[eF[0],eF[1]]:[K.errDoc((function(eG){return function(eH){return eG("splitter expects exactly 2 elements "+bD.printList(function(eI){return"("+bD.prettyPrint(eI[0])+", "+bD.prettyPrint(eI[1])+")";},eH));};}(a.id))(eC)),K.errDoc("part 2")];},p.Map(function(){return K.getDocs(eB,eC);},k.mainDocV().get_View()));return[Z.EmbedView(p.Map(function(eE){return eE[0];},eD)),Z.EmbedView(p.Map(function(eE){return eE[1];},eD))];};K.variableSplitter=function(eB,eC,eD,eE,eF,eG){return Z.Element("wcomp-splitter",bz.ofSeq(bc.delay(function(){return bc.append(eB?[cP.Create("vertical","")]:[],bc.delay(function(){return bc.append([cP.Create("min",a.String(eC))],bc.delay(function(){return bc.append([cP.Create("value",a.String(eD))],bc.delay(function(){return[cP.Create("max",a.String(eE))];}));}));}));})),bz.ofArray([eF,eG]));};K.fixedSplitter=function(eB,eC,eD,eE,eF){var eG,eH,eI,eJ,eK,eL,eM;eG=(((eD?et.Curried3(function(eN,eO,eP){return eN(eO.toFixed(6)+"px calc(100% - "+eP.toFixed(6)+"px)");}):et.Curried3(function(eN,eO,eP){return eN("calc(100% - "+eO.toFixed(6)+"px) "+eP.toFixed(6)+"px");}))(a.id))(eC))(eC);return eB?(eH=U.Make().WithHole({$:1,$0:"partsizes",$1:eG}).WithHole({$:0,$0:"first",$1:eE}).WithHole({$:0,$0:"second",$1:eF}),(eI=V.CompleteHoles(eH.k,eH.h,[]),(eJ=new S.New(eI[1],cV.fixedsplitterver(eI[0])),(eH.i=eJ,eJ)))).get_Doc():(eK=U.Make().WithHole({$:1,$0:"partsizes",$1:eG}).WithHole({$:0,$0:"first",$1:eE}).WithHole({$:0,$0:"second",$1:eF}),(eL=V.CompleteHoles(eK.k,eK.h,[]),(eM=new S.New(eL[1],cV.fixedsplitterhor(eL[0])),(eK.i=eM,eM)))).get_Doc();};K.getOneDoc=function(eB,eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR;return eC.$==1&&(eE=(eF=eC.$0,K.Identifier(eF[0],eF[1])),eE!=null&&eE.$==1&&(eD=[eE.$0,eC.$1],true))?(eG=eD[0],(eH=eD[1],(eI=((K.splitName())(eB))(eG),(eJ=eI[0],(eK=eI[1],(eL=(eM=k.tryGetDoc(eJ,eK),eM==null?null:{$:1,$0:K.getDocF(eH,eM.$0)}),eL==null?(eN=(eO=k.tryGetWoW(eJ,eK),eO==null?null:{$:1,$0:[Z.TextView(eO.$0),eH]}),eN==null?[K.errDoc((eP=(function(eS){return function(eT){return eS("Missing doc: "+bD.toSafe(eT));};}(a.id))(eG),(bd.print(eP),eP))),eH]:eN.$0):eL.$0)))))):eC.$==0?[Z.get_Empty(),cu.Empty]:(eQ=eC.$1,(eR=K.getTextData(eB,eC.$0[0]),eR.$==1?[Z.TextView(eR.$0),eQ]:eR.$==2?[K.errDoc((function(eS){return function(eT){return eS("Unexpected action: "+bD.toSafe(eT));};}(a.id))(eR.$0.actName)),eQ]:[Z.TextNode(eR.$0),eQ]));};L.ofObj=function(eB){return eB==null?null:{$:1,$0:eB};};N.New=function(eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV){return{id:eB,idPadreO:eC,idForAuthorize:eD,influyente:eE,datosPersonales:eF,contactos:eG,identificacion:eH,isInternal:eI,status:eJ,diaPago:eK,tipo:eL,fechaRegistro:eM,fechaStatus:eN,nReferidos:eO,nRefActivos:eP,nDescendientes:eQ,nDescActivos:eR,comision:eS,nivel:eT,documentos:eU,docPendientes:eV};};O.empty=function(){b1.$cctor();return b1.empty;};O.nombre2=function(eB){var eC,eD;return(eC=(eD=eB.titulo,eD==null?null:{$:1,$0:" "+eD.$0}),eC==null?"":eC.$0)+bj.Trim(eB.nombre1+" "+eB.nombre2)+" "+bj.Trim(eB.apellido1+" "+eB.apellido2);};O.nombre=function(eB){var eC,eD;return(eC=(eD=eB.titulo,eD==null?null:{$:1,$0:" "+eD.$0}),eC==null?"":eC.$0)+(eB.apellido1===""?"":bj.Trim(eB.apellido1+" "+eB.apellido2)+", ")+eB.nombre1+" "+eB.nombre2;};O.busqueda=function(eB){var eC,eD;function eE(eK,eL){return[eK,T.ofSeq(bc.map(function(eM){return eM[1];},eL))];}function eF(eK){var eL,eM;eL=(eM=null,[eD.TryGetValue(eK,{get:function(){return eM;},set:function(eN){eM=eN;}}),eM]);return eL[0]?{$:1,$0:eL[1]}:null;}function eG(eK){var eL,eM;eL=(eM=null,[eC.TryGetValue({$:1,$0:eK},{get:function(){return eM;},set:function(eN){eM=eN;}}),eM]);return eL[0]?eL[1]:[];}function eH(eK){var eL,eM;eL=(eM=eK==null?null:eF(eK.$0),eM==null?null:{$:1,$0:1+eH(eM.$0.idPadreO)});return eL==null?0:eL.$0;}function eI(eK){return T.choose(eF,eG(eK.id));}function eJ(eK){return T.ofSeq(bc.delay(function(){return bc.collect(function(eL){return bc.append([eL],bc.delay(function(){return eJ(eL);}));},eI(eK));}));}eC=new cq.New(bc.map(function(eK){return eE(eK[0],eK[1]);},bc.groupBy(function(eK){return eK[0];},bc.map(function(eK){return[eK.idPadreO,eK.id];},eB))));eD=new cq.New(bc.map(function(eK){return[eK.id,eK];},eB));return bf.New(eG,eH,function(eK){try{return eD.get_Item(eK);}catch(eL){return(function(eM){return function(eN){return eM("buscarAliado failed: "+bb.p$11(eN));};}(o.FailWith))(eK);}},eF,eI,eJ);};O.comision=function(eB,eC){var eD;eD=O.premisas(eB,eC);return[eC.nRefActivos*eD[0],eC.nDescActivos*eD[1]];};O.premisas=function(eB,eC){var eD;eD=eC.tipo.$==0?[eB.comisionReferidosMaster,eB.comisionDescendientesMaster]:[eB.comisionReferidosRegular,eB.comisionDescendientesRegular];return eC.status.$==1?[eD[0],eD[1]]:[0,0];};O.dia=function(eB){return eB.$==1?5:eB.$==2?10:eB.$==3?15:eB.$==4?20:eB.$==5?25:1;};O.correo=function(eB){var eC;eC=bc.tryHead(bc.choose(function(eD){return eD.$==1?{$:1,$0:eD.$0.email}:null;},eB.contactos));return eC==null?"":eC.$0;};S=R.TemplateInstance=et.Class({get_Doc:function(){return this.doc;},Hole:function(eB){return this.allVars.get_Item(eB);}},g,S);S.New=et.Ctor(function(eB,eC){g.New.call(this);this.doc=eC;this.allVars=eB.$==0?eB.$0:o.FailWith("Should not happen");},S);T.get=function(eB,eC){T.checkBounds(eB,eC);return eB[eC];};T.checkBounds=function(eB,eC){if(eC<0||eC>=eB.length)o.FailWith("Index was outside the bounds of the array.");};T.length=function(eB){return eB.dims===2?eB.length*eB.length:eB.length;};T.set=function(eB,eC,eD){T.checkBounds(eB,eC);eB[eC]=eD;};U=R.ProviderBuilder=et.Class({WithHole:function(eB){this.h.push(eB);return this;}},null,U);U.Make=function(){var eB;return U.New(null,(eB=bt.NewGuid(),a.String(eB)),[]);};U.New=function(eB,eC,eD){return new U({i:eB,k:eC,h:eD});};V.CompleteHoles=function(eB,eC,eD){var eF,eG,eH,eI,eJ,eK;function eE(eL,eM){var eN,eO,eP,eQ;return eG.Contains(eL)?null:(eN=eM===0?(eO=i.Create$1(""),[{$:8,$0:eL,$1:eO},eO]):eM===1?(eP=i.Create$1(0),[{$:13,$0:eL,$1:eP},eP]):eM===2?(eQ=i.Create$1(false),[{$:9,$0:eL,$1:eQ},eQ]):o.FailWith("Invalid value type"),(eF.set_Item(eL,eN[1]),{$:1,$0:eN[0]}));}eF=new b3.New$5();eG=new b4.New$3();eH=cr.Get(eC);try{while(eH.MoveNext()){eI=eH.Current();(eI.$==8?(eJ=[eI.$0,b5.Box(eI.$1)],true):eI.$==11?(eJ=[eI.$0,b5.Box(eI.$1)],true):eI.$==10?(eJ=[eI.$0,b5.Box(eI.$1)],true):eI.$==13?(eJ=[eI.$0,b5.Box(eI.$1)],true):eI.$==12?(eJ=[eI.$0,b5.Box(eI.$1)],true):eI.$==9&&(eJ=[eI.$0,b5.Box(eI.$1)],true))?(eK=eJ[0],eG.Add(eK),eF.set_Item(eK,eJ[1])):void 0;}}finally{if(typeof eH=="object"&&"Dispose"in eH)eH.Dispose();}return[bc.append(eC,T.choose(function(eL){return eE(eL[0],eL[1]);},eD)),{$:0,$0:eF}];};V.EventQ2=function(eB,eC,eD,eE){return{$:5,$0:eC,$1:true,$2:function(eF){return function(eG){return eE({Vars:eD(),Target:eF,Event:eG});};}};};W.opcionesadministrador=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"opcionesadministrador"},eB):void 0;};W.filaaliado=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"filaaliado"},eB):void 0;};W.tablaaliados=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"tablaaliados"},eB):void 0;};W.aliado=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"aliado"},eB):void 0;};W.calculo=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"calculo"},eB):void 0;};X.p$3=function(eB){return eB.$==2?"Mensaje "+bD.prettyPrint(eB.$0):eB.$==1?"NuevoRegistro "+bD.prettyPrint(eB.$0):"ROk";};W.formaregistro=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"formaregistro"},eB):void 0;};W.filaconsolidado=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"filaconsolidado"},eB):void 0;};W.consolidado=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"consolidado"},eB):void 0;};W.filapago=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"filapago"},eB):void 0;};W.tablapagos=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"tablapagos"},eB):void 0;};W.filadocs=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"filadocs"},eB):void 0;};W.enlacedocumento=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"enlacedocumento"},eB):void 0;};W.subirdocumentos=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"subirdocumentos"},eB):void 0;};W.autorizacionpago=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"autorizacionpago"},eB):void 0;};W.contrato=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"contrato"},eB):void 0;};W.pendientes=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"pendientes"},eB):void 0;};Y.r=function(){return db.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["NoUser"]]],[]],[null,[[null,["PreRegister"]]],[]],[null,[[null,["Content"]]],[db.rString()]],[null,[[null,["Pdf"]]],[db.rWildcard()]],[null,[[null,["Video"]]],[db.rWildcard()]]]);};X.p=function(eB){return eB.$==5?"Dia25":eB.$==4?"Dia20":eB.$==3?"Dia15":eB.$==2?"Dia10":eB.$==1?"Dia05":"Dia01";};W.datospersonales=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"datospersonales"},eB):void 0;};X.p$2=function(eB){return eB.$==2?"Empresa":eB.$==1?"Femenino":"Masculino";};W.correo=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"correo"},eB):void 0;};W.telefono=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"telefono"},eB):void 0;};W.direccion=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"direccion"},eB):void 0;};W.formadatospersonales=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"formadatospersonales"},eB):void 0;};W.formacontactos=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"formacontactos"},eB):void 0;};W.formacuentas=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"formacuentas"},eB):void 0;};W.formafirma=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"formafirma"},eB):void 0;};W.transaccion=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"transaccion"},eB):void 0;};W.transacciones=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"transacciones"},eB):void 0;};X.p$4=function(eB){return"IdPayment "+bD.prettyPrint(eB.$0);};W.cuentabancaria=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"cuentabancaria"},eB):void 0;};W.tarjetacredito=function(eB){c7.LoadLocalTemplates("indexdes");return eB?c7.NamedTemplate("indexdes",{$:1,$0:"tarjetacredito"},eB):void 0;};X.p$1=function(eB){return eB.$==3?"ResetPassword":eB.$==2?"EditProfile":eB.$==1?"SignUp":"SignIn";};Z=h.Doc=et.Class({},g,Z);Z.get_Empty=function(){return Z.Mk(null,p.Const());};Z.Concat=function(eB){var eC;eC=cQ.ofSeqNonCopying(eB);return cQ.TreeReduce(Z.get_Empty(),Z.Append,eC);};Z.BindView=function(eB,eC){return Z.EmbedView(p.Map(eB,eC));};Z.Mk=function(eB,eC){return new Z.New(eB,eC);};Z.ConvertSeqBy=function(eB,eC,eD){return Z.Flatten(p.MapSeqCachedViewBy(eB,function(eE,eF){return(eC(eE))(eF);},eD));};Z.EmbedView=function(eB){var eC;eC=dj.CreateEmbedNode();return Z.Mk({$:2,$0:eC},p.Map(a.ignore,p.Bind(function(eD){dj.UpdateEmbedNode(eC,eD.docNode);return eD.updates;},eB)));};Z.Append=function(eB,eC){return Z.Mk({$:0,$0:eB.docNode,$1:eC.docNode},p.Map2Unit(eB.updates,eC.updates));};Z.TextNode=function(eB){return Z.Mk({$:5,$0:dn.CreateText(eB)},p.Const());};Z.Verbatim=function(eB){var eC;return Z.Mk(cQ.MapTreeReduce(function(eD){return J.Equals(eD.nodeType,G.TEXT_NODE)?{$:5,$0:eD}:{$:1,$0:dj.CreateElemNode(eD,dm.EmptyAttr(),null)};},null,function(eD,eE){return{$:0,$0:eD,$1:eE};},(eC=ev.parseHTML(eB),J.Equals(eC,null)?[]:eC)),p.Const());};Z.Flatten=function(eB){return Z.EmbedView(p.Map(Z.Concat,eB));};Z.ConvertBy=function(eB,eC,eD){return Z.Flatten(p.MapSeqCachedBy(eB,eC,eD));};Z.Button=function(eB,eC,eD){var eE;eE=cP.Concat(eC);return dS.New(Z.Clickable("button",eD),eE,Z.TextNode(eB));};Z.Element=function(eB,eC,eD){var eE,eF;eE=cP.Concat(eC);eF=Z.Concat(eD);return dS.New(dn.CreateElement(eB),eE,eF);};Z.Input=function(eB,eC){return Z.InputInternal("input",function(){return bc.append(eB,[cT.Value(eC)]);});};Z.RunInPlace=function(eB,eC,eD){var eE;eE=dj.CreateRunState(eC,eD.docNode);p.Sink(dW.get_UseAnimations()||dX.BatchUpdatesEnabled()?dY.StartProcessor(dj.PerformAnimatedUpdate(eB,eE,eD.docNode)):function(){dj.PerformSyncUpdate(eB,eE,eD.docNode);},eD.updates);};Z.Clickable=function(eB,eC){var eD;eD=dn.CreateElement(eB);eD.addEventListener("click",function(eE){eE.preventDefault();return eC();},false);return eD;};Z.TextView=function(eB){var eC;eC=dj.CreateTextNode();return Z.Mk({$:4,$0:eC},p.Map(function(eD){dj.UpdateTextNode(eC,eD);},eB));};Z.InputInternal=function(eB,eC){var eD;eD=dn.CreateElement(eB);return dS.New(eD,cP.Concat(eC(eD)),Z.get_Empty());};Z.Run=function(eB,eC){dj.LinkElement(eB,eC.docNode);Z.RunInPlace(false,eB,eC);};Z.InputArea=function(eB,eC){return Z.InputInternal("textarea",function(){return bc.append(eB,[cT.Value(eC)]);});};Z.New=et.Ctor(function(eB,eC){g.New.call(this);this.docNode=eB;this.updates=eC;},Z);_0.llamadas=function(){_5.$cctor();return _5.llamadas;};_0.ejecutarDataEventoNuevo=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.ejecutarDataEventoNuevo:181407377",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.iterA=function(eB){cE.iterA(function(eC){a.alert(eC);},a.ignore,eB);};_0.addLlamadas=function(){_5.$cctor();return _5.addLlamadas;};_0.obtenerFormasDePagoPara=function(eB){var eC;function eD(eE,eF){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerFormasDePagoPara:-1929458241",[eE,eF]);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerListaDocs=function(eB){var eC;function eD(eE,eF){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerListaDocs:-881142106",[eE,eF]);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerFormasDePagoId=function(eB){var eC;function eD(eE,eF){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerFormasDePagoId:2063455187",[eE,eF]);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.enviarCorreosInvitacion=function(eB,eC){var eD,eE;function eF(eG,eH){return(function(eI){var eJ;eJ=n.get_LoggedId();return function(eK){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.enviarCorreosInvitacion:1622714317",[eI,eJ,eK[0],eK[1]]);};}(eG))(eH);}eD=[eB,eC];eE=bp.asyncResult();return eE.Run(eE.Delay(function(){return eE.TryFinally(eE.Delay(function(){return bH["AsyncResultBuilder.Bind"](eE,(_0.addLlamadas())(1),function(){function eG(eH){return cO.Return(eH);}return eE.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eH){return eG(bF.rtn$1(eH));})),function(eH){return eE.ReturnFrom$1(eF(eH,eD));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerIdInfluyente=function(eB){var eC;function eD(eE){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerIdInfluyente:231616815",[eE]);}eC=null;return cO.Delay(function(){return cO.TryFinally(cO.Delay(function(){return cO.Bind((_0.addLlamadas())(1),function(){return eD(eB);});}),function(){cO.Start((_0.addLlamadas())(-1),null);});});};_0.obtenerUnions=function(){var eB;function eC(){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerUnions:-1742744641",[]);}eB=null;return cO.Delay(function(){return cO.TryFinally(cO.Delay(function(){return cO.Bind((_0.addLlamadas())(1),function(){return eC(void 0);});}),function(){cO.Start((_0.addLlamadas())(-1),null);});});};_0.obtenerTransaccionesPara=function(eB){var eC,eD;function eE(eF,eG){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerTransaccionesPara:-1914339047",[eF,eG]);}eC=n.get_LoggedId();eD=bp.asyncResult();return eD.Run(eD.Delay(function(){return eD.TryFinally(eD.Delay(function(){return bH["AsyncResultBuilder.Bind"](eD,(_0.addLlamadas())(1),function(){function eF(eG){return cO.Return(eG);}return eD.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eG){return eF(bF.rtn$1(eG));})),function(eG){return eD.ReturnFrom$1(eE(eG,eC));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.agregarUsuarioSiEsNuevo=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.agregarUsuarioSiEsNuevo:1579629588",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerEstadoParaUsuario=function(eB){var eC,eD;function eE(eF,eG){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerEstadoParaUsuario:-1561662925",[eF,eG]);}eC=n.get_LoggedId();eD=bp.asyncResult();return eD.Run(eD.Delay(function(){return eD.TryFinally(eD.Delay(function(){return bH["AsyncResultBuilder.Bind"](eD,(_0.addLlamadas())(1),function(){function eF(eG){return cO.Return(eG);}return eD.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eG){return eF(bF.rtn$1(eG));})),function(eG){return eD.ReturnFrom$1(eE(eG,eC));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.borrarFormaPago=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.borrarFormaPago:-384331266",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.registrarTarjeta=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.registrarTarjeta:-1859341136",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.registrarCuenta=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.registrarCuenta:244739382",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.validarFormaPago=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.validarFormaPago:-384331266",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.actualizarSubscripcion=function(eB){var eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.actualizarSubscripcion:-384331266",[eG,eH,eI]);};}(eE))(eF);}eC=bp.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bH["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cO.Return(eF);}return eC.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eF){return eE(bF.rtn$1(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerFormasDePago=function(){var eB;function eC(eD,eE){return(new cF.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerFormasDePagoId:2063455187",[eD,n.get_LoggedId()]);}eB=bp.asyncResult();return eB.Run(eB.Delay(function(){return eB.TryFinally(eB.Delay(function(){return bH["AsyncResultBuilder.Bind"](eB,(_0.addLlamadas())(1),function(){function eD(eE){return cO.Return(eE);}return eB.Bind$1(cE.absorbO(function(){self.location.href="/Login";return"User not logged in";},cO.Bind((bS.getTokenO())(),function(eE){return eD(bF.rtn$1(eE));})),function(eE){return eB.ReturnFrom$1(eC(eE,void 0));});});}),function(){cO.Start((_0.addLlamadas())(-1),null);});}));};_1=M.IdAliado=et.Class({get_Id:function(){return this.$0;}},null,_1);_2.New=function(eB,eC,eD,eE,eF,eG){return{idAliado:eB,aliados:eC,anoActual:eD,periodoActual:eE,premisas:eF,nevento:eG};};_3=h.ConcreteVar=et.Class({get_View:function(){return this.view;},Set:function(eB){if(this.isConst)(function(eC){return eC("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(eC){ew.log(eC);}));else{_4.Obsolete(this.snap);this.current=eB;this.snap=_4.New({$:2,$0:eB,$1:[]});}},Get:function(){return this.current;},Update:function(eB){this.Set(eB(this.Get()));},UpdateMaybe:function(eB){var eC;eC=eB(this.Get());eC!=null&&eC.$==1?this.Set(eC.$0):void 0;}},q,_3);_3.New=et.Ctor(function(eB,eC,eD){var eE;eE=this;q.New.call(this);this.isConst=eB;this.current=eD;this.snap=eC;this.view=function(){return eE.snap;};this.id=b8.Int();},_3);_4.Map=function(eB,eC){var eD,eE;eD=eC.s;return eD!=null&&eD.$==0?_4.New({$:0,$0:eB(eD.$0)}):(eE=_4.New({$:3,$0:[],$1:[]}),(_4.When(eC,function(eF){_4.MarkDone(eE,eC,eB(eF));},eE),eE));};_4.WhenRun=function(eB,eC,eD){var eE;eE=eB.s;eE==null?eD():eE!=null&&eE.$==2?(eE.$1.push(eD),eC(eE.$0)):eE!=null&&eE.$==3?(eE.$0.push(eC),eE.$1.push(eD)):eC(eE.$0);};_4.WhenObsoleteRun=function(eB,eC){var eD;eD=eB.s;eD==null?eC():eD!=null&&eD.$==2?eD.$1.push(eC):eD!=null&&eD.$==3?eD.$1.push(eC):void 0;};_4.When=function(eB,eC,eD){var eE;eE=eB.s;eE==null?_4.Obsolete(eD):eE!=null&&eE.$==2?(_4.EnqueueSafe(eE.$1,eD),eC(eE.$0)):eE!=null&&eE.$==3?(eE.$0.push(eC),_4.EnqueueSafe(eE.$1,eD)):eC(eE.$0);};_4.MarkDone=function(eB,eC,eD){var eE;if(eE=eC.s,eE!=null&&eE.$==0)_4.MarkForever(eB,eD);else _4.MarkReady(eB,eD);};_4.Map2=function(eB,eC,eD){var eE,eF,eG;function eH(eI){var eJ,eK,eL;if(!(eJ=eG.s,eJ!=null&&eJ.$==0||eJ!=null&&eJ.$==2)){eK=_4.ValueAndForever(eC);eL=_4.ValueAndForever(eD);eK!=null&&eK.$==1?eL!=null&&eL.$==1?eK.$0[1]&&eL.$0[1]?_4.MarkForever(eG,eB(eK.$0[0],eL.$0[0])):_4.MarkReady(eG,eB(eK.$0[0],eL.$0[0])):void 0:void 0;}}eE=eC.s;eF=eD.s;return eE!=null&&eE.$==0?eF!=null&&eF.$==0?_4.New({$:0,$0:eB(eE.$0,eF.$0)}):_4.Map2Opt1(eB,eE.$0,eD):eF!=null&&eF.$==0?_4.Map2Opt2(eB,eF.$0,eC):(eG=_4.New({$:3,$0:[],$1:[]}),(_4.When(eC,eH,eG),_4.When(eD,eH,eG),eG));};_4.Map3=function(eB,eC,eD,eE){var eF,eG,eH,eI;function eJ(eK){var eL,eM,eN,eO;if(!(eL=eI.s,eL!=null&&eL.$==0||eL!=null&&eL.$==2)){eM=_4.ValueAndForever(eC);eN=_4.ValueAndForever(eD);eO=_4.ValueAndForever(eE);eM!=null&&eM.$==1?eN!=null&&eN.$==1?eO!=null&&eO.$==1?eM.$0[1]&&eN.$0[1]&&eO.$0[1]?_4.MarkForever(eI,eB(eM.$0[0],eN.$0[0],eO.$0[0])):_4.MarkReady(eI,eB(eM.$0[0],eN.$0[0],eO.$0[0])):void 0:void 0:void 0;}}eF=eC.s;eG=eD.s;eH=eE.s;return eF!=null&&eF.$==0?eG!=null&&eG.$==0?eH!=null&&eH.$==0?_4.New({$:0,$0:eB(eF.$0,eG.$0,eH.$0)}):_4.Map3Opt1(eB,eF.$0,eG.$0,eE):eH!=null&&eH.$==0?_4.Map3Opt2(eB,eF.$0,eH.$0,eD):_4.Map3Opt3(eB,eF.$0,eD,eE):eG!=null&&eG.$==0?eH!=null&&eH.$==0?_4.Map3Opt4(eB,eG.$0,eH.$0,eC):_4.Map3Opt5(eB,eG.$0,eC,eE):eH!=null&&eH.$==0?_4.Map3Opt6(eB,eH.$0,eC,eD):(eI=_4.New({$:3,$0:[],$1:[]}),(_4.When(eC,eJ,eI),_4.When(eD,eJ,eI),_4.When(eE,eJ,eI),eI));};_4.MapAsync=function(eB,eC){var eD;eD=_4.New({$:3,$0:[],$1:[]});_4.When(eC,function(eE){b7.StartTo(eB(eE),function(eF){_4.MarkDone(eD,eC,eF);});},eD);return eD;};_4.EnqueueSafe=function(eB,eC){var eD,eE,eF,eG;eB.push(eC);if(eB.length%20===0){eD=eB.slice(0);d6.Clear(eB);for(eE=0,eF=T.length(eD)-1;eE<=eF;eE++){eG=T.get(eD,eE);typeof eG=="object"?function(eH){if(eH.s)eB.push(eH);}(eG):function(eH){eB.push(eH);}(eG);}}else void 0;};_4.MarkForever=function(eB,eC){var eD,eE,eF,eG;eD=eB.s;if(eD!=null&&eD.$==3){eB.s={$:0,$0:eC};eE=eD.$0;for(eF=0,eG=T.length(eE)-1;eF<=eG;eF++)(T.get(eE,eF))(eC);}else void 0;};_4.MarkReady=function(eB,eC){var eD,eE,eF,eG;eD=eB.s;if(eD!=null&&eD.$==3){eB.s={$:2,$0:eC,$1:eD.$1};eE=eD.$0;for(eF=0,eG=T.length(eE)-1;eF<=eG;eF++)(T.get(eE,eF))(eC);}else void 0;};_4.Map2Opt1=function(eB,eC,eD){return _4.Map(function(eE){return eB(eC,eE);},eD);};_4.Map2Opt2=function(eB,eC,eD){return _4.Map(function(eE){return eB(eE,eC);},eD);};_4.ValueAndForever=function(eB){var eC;eC=eB.s;return eC!=null&&eC.$==0?{$:1,$0:[eC.$0,true]}:eC!=null&&eC.$==2?{$:1,$0:[eC.$0,false]}:null;};_4.TryGet=function(eB){var eC,eD;eC=eB.s;return(eC!=null&&eC.$==0?(eD=eC.$0,true):eC!=null&&eC.$==2&&(eD=eC.$0,true))?{$:1,$0:eD}:null;};_4.Map3Opt1=function(eB,eC,eD,eE){return _4.Map(function(eF){return eB(eC,eD,eF);},eE);};_4.Map3Opt2=function(eB,eC,eD,eE){return _4.Map(function(eF){return eB(eC,eF,eD);},eE);};_4.Map3Opt3=function(eB,eC,eD,eE){return _4.Map2(function(eF,eG){return eB(eC,eF,eG);},eD,eE);};_4.Map3Opt4=function(eB,eC,eD,eE){return _4.Map(function(eF){return eB(eF,eC,eD);},eE);};_4.Map3Opt5=function(eB,eC,eD,eE){return _4.Map2(function(eF,eG){return eB(eF,eC,eG);},eD,eE);};_4.Map3Opt6=function(eB,eC,eD,eE){return _4.Map2(function(eF,eG){return eB(eF,eG,eC);},eD,eE);};_4.Join=function(eB){var eC;eC=_4.New({$:3,$0:[],$1:[]});_4.When(eB,function(eD){var eE;eE=eD();_4.When(eE,function(eF){var eG,eH;if((eG=eE.s,eG!=null&&eG.$==0)&&(eH=eB.s,eH!=null&&eH.$==0))_4.MarkForever(eC,eF);else _4.MarkReady(eC,eF);},eC);},eC);return eC;};_4.Map2Unit=function(eB,eC){var eD,eE,eF;function eG(){var eH,eI,eJ;if(!(eH=eF.s,eH!=null&&eH.$==0||eH!=null&&eH.$==2)){eI=_4.ValueAndForever(eB);eJ=_4.ValueAndForever(eC);eI!=null&&eI.$==1?eJ!=null&&eJ.$==1?eI.$0[1]&&eJ.$0[1]?_4.MarkForever(eF,null):_4.MarkReady(eF,null):void 0:void 0;}}eD=eB.s;eE=eC.s;return eD!=null&&eD.$==0?eE!=null&&eE.$==0?_4.New({$:0,$0:null}):eC:eE!=null&&eE.$==0?eB:(eF=_4.New({$:3,$0:[],$1:[]}),(_4.When(eB,eG,eF),_4.When(eC,eG,eF),eF));};_4.Sequence=function(eB){var eC,eD,eE;function eF(eG){var eH;if(eE[0]===0){eH=T.map(function(eI){var eJ;eJ=eI.s;return eJ!=null&&eJ.$==0?eJ.$0:eJ!=null&&eJ.$==2?eJ.$0:o.FailWith("value not found by View.Sequence");},eC);T.forall(function(eI){var eJ;eJ=eI.s;return eJ!=null&&eJ.$==0;},eC)?_4.MarkForever(eD,eH):_4.MarkReady(eD,eH);}else eE[0]--;}eC=T.ofSeq(eB);return eC.length==0?_4.New({$:0,$0:[]}):(eD=_4.New({$:3,$0:[],$1:[]}),(eE=[T.length(eC)-1],(T.iter(function(eG){_4.When(eG,eF,eD);},eC),eD)));};_4.Copy=function(eB){var eC,eD,eE;eC=eB.s;return eC==null?eB:eC!=null&&eC.$==2?(eD=_4.New({$:2,$0:eC.$0,$1:[]}),(_4.WhenObsolete(eB,eD),eD)):eC!=null&&eC.$==3?(eE=_4.New({$:3,$0:[],$1:[]}),(_4.When(eB,function(eF){_4.MarkDone(eE,eB,eF);},eE),eE)):eB;};_4.WhenObsolete=function(eB,eC){var eD;eD=eB.s;eD==null?_4.Obsolete(eC):eD!=null&&eD.$==2?_4.EnqueueSafe(eD.$1,eC):eD!=null&&eD.$==3?_4.EnqueueSafe(eD.$1,eC):void 0;};_5.$cctor=function(){var eC,eG,eH,eI,eJ,eK,eL,eM,eR,eS,eT,eU,eV,eW;_5.$cctor=a.ignore;_5.rtn=function(eX){return[eX];};_5.result=new b9.New$1();_5.result$1=bF.result$1();_5.resultP=new b_.New();_5.eff=new ca.New$1();_5.asyncResult=new bq.New();_5.asyncResultP=new cb.New();function eB(eX){return bj.concat("\n",eX);}_5.unindentStr=function(eX){return eB(bK.unindent$1(eX));};function eD(eX){return bK.splitByChar$1("\n",eX);}function eE(eX){var eY,eZ;return cc.array(eX,{$:1,$0:0},{$:1,$0:(eY=0,(eZ=T.length(eX)-2,J.Compare(eY,eZ)===1?eY:eZ))});}function eF(eX){return bj.concat("\n",eX);}_5.skipLastLine=(eC=function(eX){return eE(eD(eX));},function(eX){return eF(eC(eX));});_5.counter=1;_5.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";_5.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";_5.policies=bz.ofArray([ce.SignIn,ce.SignUp,ce.EditProfile,ce.ResetPassword]);_5.rootdir="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\ProzperServer\\website";_5.TemplatesFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\ProzperServer\\website"+"\\indexDes.html";((function(eX){return function(eY){return eX(bD.toSafe(eY));};}(function(eX){ew.log(eX);}))("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\ProzperServer\\website\\indexDes.html"));_5.appId=bj.StartsWith(self.location.host,"prozper0")?"76703639-1d21-4bc3-bd46-c764f5ea78ee":"70ad4f9b-9a2b-409e-9c1e-d04dbb2e7cf2";_5.applicationId=bS.storeValue("applicationId",bS.appId());_5.tenantName=bS.storeValue("tenantName","prozper");_5.ref=bS.storeValue("ref","");_5.extraQueryParms=bS.storeValue("extraQueryParms","mkt=es-us");_5.refreshBefore=bS.storeValue("refreshBefore","0");_5.createOnStart=bS.storeValue("createOnStart","1");_5.forceLogin=bS.storeValue("forceLogin","1");_5.signInPolicy=bS.storeValue("signInPolicy","B2C_1_SignIn");_5.signUpPolicy=bS.storeValue("signUpPolicy","B2C_1_Registrarse");_5.editProfilePolicy=bS.storeValue("editProfilePolicy","B2C_1_EditarPerfil");_5.resetPasswordPolicy=bS.storeValue("resetPasswordPolicy","B2C_1_PasswordReset");_5.policyType=bS.storeValue("policyType","SignIn");eG=bS.storageGetItem("preambleState");eG==="InPreamble"||(eG===""||eG===null)?bS.storeValue("preambleState","GoToSignIn"):void 0;_5.authority=bS.getAuthority(bS.tenantName(),bS.signInPolicy());_5.userO=i.Create$1(null);_5.agent=r.Create(function(){var eX,eY;eX=(eY=cf.New$1({$:1,$0:cg.New$1(bS.applicationId(),{$:1,$0:bS.authority()},{$:1,$0:false},null,null,null)},null,null,null),new self.Msal.UserAgentApplication(eY));eX.handleRedirectCallback(function(eZ,e0){bS.redirectCallback(eZ,e0);});return eX;});_5.getTokenO=(eI=cj.callA(function(eX){bd.print$1(eX);},bS.getTokenO0),function(){return eI.PostAndAsyncReply(function(eX){return[eX,null];},null);});_5.modeloV=i.Create$1(_2.New(new _1({$:0,$0:":"}),[],(eJ=ex.now(),(new ex(eJ)).getFullYear()),(eK=ex.now(),(new ex(eK)).getMonth()+1),M.premisasCalculo(),-2));_5.formasPagoAliadoV=i.Create$1([]);_5.invitacionesV=i.Create$1("");function eN(eX){var eY;eY=j.REGEX$2(j.rexEmail$1(),"gi",eX);return eY!=null&&eY.$==1?eY.$0:[];}function eO(eX){return bj.concat("\n",eX);}_5.emailsInvitarW=p.Map((eL=(eM=function(eX){return bc.distinct(eN(eX));},function(eX){return bc.sort(eM(eX));}),function(eX){return eO(eL(eX));}),m.invitacionesV().get_View());_5.invitacionesDisabledW=p.Map(function(eX){return eX===""?"disabled":"";},m.emailsInvitarW());_5.selAliadoIdOV=i.Create$1(null);_5.refAliadoIdOV=i.Create$1(null);_5.endPointV=cl.InstallHash(ck.DefaultEP,Y.r());p.Sink(function(eX){if(eX.$==1);else if(eX.$==2);else if(eX.$==4)a.showPDF(eX.$0);else if(eX.$==5)a.playVideo();else bS.checkUser();},m.endPointV().get_View());function eP(eX){return eX==="ProzperLyt.mainContent"?ck.DefaultEP:{$:3,$0:eX};}function eQ(eX){if(!J.Equals(m.endPointV().Get(),eX))m.endPointV().Set(eX);}_5.contentVar=new cN.New(p.Map2(function(eX,eY){var eZ,e0;return eY.$==0&&!J.Equals(bS.userO().Get(),null)?"ProzperLyt.mainContent":eY.$==3&&(!J.Equals(bS.userO().Get(),null)&&(e0=eY.$0,true))?e0:eY.$==2?"ProzperLyt.cntPreRegister":eY.$==4?"ProzperLyt.cntPDF":eY.$==5?"ProzperLyt.cntVideo":"ProzperLyt.cntFormaNoUser";},bS.userO().get_View(),m.endPointV().get_View()),function(eX){return eQ(eP(eX));});_5.aliadoW=(eR=p.get_Do(),p.Bind(function(eX){var eY,eZ;eY=eX.idAliado;eZ=bc.tryFind(function(e0){return J.Equals(e0.id,eY);},eX.aliados);return p.Const(eZ!=null&&eZ.$==1?eZ.$0:O.empty());},m.modeloV().get_View()));eT=(eS=i.Create$1(0),[eS.get_View(),function(eX){var eY;eY=null;return cO.Delay(function(){eS.Set(eS.Get()+eX);return cO.Bind(cO.Sleep(50),function(){return cO.Return(null);});});}]);_5.llamadas=eT[0];_5.addLlamadas=eT[1];cm.set_EndPoint(cn.serverEndPoint().f()+"rpc/rpc");_5.shouldRefresh=true;p.Sink(function(){br.refrescarData(true);},bS.userO().get_View());cO.Start((eU=null,cO.Delay(function(){return cO.While(function(){return true;},cO.Delay(function(){return cO.Bind(cO.Sleep(5*60*1000),function(){return cO.Return(null);});}));})),null);try{self.document.addEventListener("visibilityChange",function(){return null;},false);}catch(eX){null;}_5.paises=i.Create$1([]);_5.estados=i.Create$1([]);_5.tiposDir=i.Create$1([]);_5.tiposTel=i.Create$1([]);_5.generos=i.Create$1([]);_5.tiposCta=i.Create$1([]);_5.tiposTar=i.Create$1([]);_5.statuses=i.Create$1([]);_5.aniosV=i.Create$1([]);_5.mesesV=i.Create$1([]);_5.tiposAr=i.Create$1([]);_5.statusAr=i.Create$1([]);_0.iterA((eV=bp.asyncResult(),eV.Run(eV.Delay(function(){return eV.Bind$1(_0.obtenerUnions(),function(eY){bu.paises().Set(eY[0]);bu.estados().Set(eY[1]);bu.tiposDir().Set(eY[2]);bu.tiposTel().Set(eY[3]);bu.generos().Set(eY[4]);bu.tiposCta().Set(eY[5]);bu.tiposTar().Set(eY[6]);bu.statuses().Set(eY[7]);bu.aniosV().Set(eY[9]);bu.mesesV().Set(eY[8]);bu.tiposAr().Set(eY[10]);bu.statusAr().Set(eY[11]);return eV.Zero();});}))));_5.ftel=[function(eY){return eY.$==2?{$:1,$0:eY.$0}:null;},function(eY){return{$:2,$0:eY};}];_5.fcor=[function(eY){return eY.$==1?{$:1,$0:eY.$0}:null;},function(eY){return{$:1,$0:eY};}];_5.fdir=[function(eY){return eY.$==0?{$:1,$0:eY.$0}:null;},function(eY){return{$:0,$0:eY};}];_5.mensajes=i.Create$1("");_5.firmanteV=i.Create$1("");_5.fechaHoraV=i.Create$1("");_5.locationV=i.Create$1({});_5.firmadoV=i.Create$1(false);cO.Start((eW=null,cO.Delay(function(){return cO.While(function(){return true;},cO.Delay(function(){return cO.Bind(cO.Sleep(1000),function(){var eY;eY=bd["String.Left$1"](function(eZ){return eZ.getFullYear()+"-"+("0"+(eZ.getMonth()+1)).slice(-2)+"-"+("0"+eZ.getDate()).slice(-2)+" "+("0"+eZ.getHours()).slice(-2)+":"+("0"+eZ.getMinutes()).slice(-2)+":"+("0"+eZ.getSeconds()).slice(-2)+":"+("00"+eZ.getMilliseconds()).slice(-3);}(new ex(ex.now())),19);bP.fechaHoraV().Set(eY);return cO.Zero();});}));})),null);_5.uploaded=function(eY,eZ){return bd.print$1(eZ);};_5.cuentaPagoO=i.Create$1(null);_5.cuentaAutorizar=i.Create$1(Z.TextNode("No hay cuenta seleccionada"));_5.titular=i.Create$1("");_5.pid=new co({$:0,$0:""});_5.ftar=[function(eY){var eZ;eZ=eY.cuentaPago;return eZ.$==1?{$:1,$0:[eZ.$0,x.msg(eY),eY.authorizeIdR.$==0]}:null;},function(eY){return function(eZ){var e0;e0=new bO({$:1,$0:eZ});return bE.New(eY.nombre,bd.Error$1(""),e0,eY.subscripcion);};}];_5.fcta=[function(eY){var eZ;eZ=eY.cuentaPago;return eZ.$==0?{$:1,$0:[eZ.$0,x.msg(eY),eY.authorizeIdR.$==0]}:null;},function(eY){return function(eZ){var e0;e0=new bO({$:0,$0:eZ});return bE.New(eY.nombre,bd.Error$1(""),e0,eY.subscripcion);};}];_5.transaccionesW=p.MapAsync(function(){var eY,eZ;function e0(e1){return cO.Return(e1);}return cO.Bind(_0.obtenerTransaccionesPara(n.get_LoggedId()),(eY=(eZ=[],function(e1){return bF.defaultValue$1(eZ,e1);}),function(e1){return e0(eY(e1));}));},m.modeloV().get_View());_5.expandedOV=i.Create$1(null);_5.aliadoIdW=p.Map2(function(eY,eZ){return eY==null?eZ.id:eY.$0;},A.expandedOV().get_View(),m.aliadoW());_5.FormaW9="/#/Pdf/blob/Inscripcion/07 Form W-9.pdf";_5.FormaW8BEN="/#/Pdf/blob/Inscripcion/05 Form W-8BEN.pdf";_5.FormasPago="/#/Content/ProzperLyt.cntFormaFormasPago";_5.FormaContrato="/#/Content/ProzperLyt.cntFormaContrato";_5.Subir="/#/Content/ProzperLyt.cntSubirDocumentos";_5.definicion=[];_5.i_archivos=y.agregarCampo(1,false,function(eY){return eY.docPendientes===0?(function(eZ){return function(e0){return eZ(bj.PadLeft(a.String(e0),2));};}(a.id))(eY.documentos):(((et.Curried3(function(eZ,e0,e1){return eZ("("+bj.PadLeft(a.String(e0),2)+")"+bj.PadLeft(a.String(e1),2));}))(a.id))(eY.docPendientes))(eY.documentos);});_5.i_nombre=y.agregarCampo(14,true,function(eY){return O.nombre(eY.datosPersonales);});_5.i_correo=y.agregarCampo(13,true,O.correo);_5.i_status=y.agregarCampo(3,true,function(eY){return(function(eZ){return function(e0){return eZ(bb.p(e0));};}(a.id))(eY.status);});_5.i_influyente=y.agregarCampo(4,false,function(eY){var eZ;eZ=eY.influyente;return eZ==null?"":eZ.$0;});_5.i_tipo=y.agregarCampo(5,true,function(eY){return(function(eZ){return function(e0){return eZ(bb.p$1(e0));};}(a.id))(eY.tipo);});_5.i_referido=y.agregarCampo(6,true,function(eY){return y.nombreReferidor(eY.idPadreO);});_5.i_nivel=y.agregarCampo(7,true,function(eY){return(function(eZ){return function(e0){return eZ(bj.PadLeft(a.String(e0),9));};}(a.id))(eY.nivel);});_5.i_referidos=y.agregarCampo(8,true,function(eY){return(function(eZ){return function(e0){return eZ(bj.PadLeft(bD.toSafe(e0),9));};}(a.id))(y.referidos(eY));});_5.i_descendientes=y.agregarCampo(2,false,function(eY){return(function(eZ){return function(e0){return eZ(bj.PadLeft(bD.toSafe(e0),9));};}(a.id))(y.descendientes(eY));});_5.i_comision=y.agregarCampo(9,true,function(eY){return(function(eZ){return function(e0){return eZ(bj.PadLeft(bD.toSafe(e0),9));};}(a.id))(y.comision(eY.comision));});_5.i_diaPago=y.agregarCampo(10,true,function(eY){return bd["String.Right$1"]((function(eZ){return function(e0){return eZ(X.p(e0));};}(a.id))(eY.diaPago),2);});_5.i_desde=y.agregarCampo(11,true,function(eY){return bJ.toYYYYMMDD$1("-",eY.fechaRegistro);});_5.i_Id=y.agregarCampo(12,true,function(eY){return(function(eZ){return function(e0){return eZ(bD.toSafe(e0));};}(a.id))(eY.id.get_Id());});_5.layoutName="ProzperLyt";_5.appName="Prozper";_5.influencerV=i.Create$1("");_5.influencerClassW=p.MapAsync(function(eY){var eZ;eZ=null;return cO.Delay(function(){return cO.Bind(_0.obtenerIdInfluyente(eY),function(e0){return e0.$==0?cO.Return("mui-btn--primary"):cO.Return("");});});},e.influencerV().get_View());};_6=h.ListModel=et.Class({Set:function(eB){this["var"].Set(this.storage.SSet(eB));this.ObsoleteAll();},Append:function(eB){var eC,eD,eE,eF;eC=this;eD=this["var"].Get();eE=this.key(eB);eF=T.tryFindIndex(function(eG){return J.Equals(eC.key(eG),eE);},eD);eF!=null&&eF.$==1?this["var"].Set(this.storage.SSetAt(eF.$0,eB,eD)):this["var"].Set(this.storage.SAppend(eB,eD));this.ObsoleteKey(eE);},ObsoleteAll:function(){bc.iter(function(eB){_4.Obsolete(eB.V);},this.it);this.it.Clear();},TryFindByKey:function(eB){var eC;eC=this;return T.tryFind(function(eD){return J.Equals(eC.key(eD),eB);},this["var"].Get());},ObsoleteKey:function(eB){var eC,eD;eC=(eD=null,[this.it.TryGetValue(eB,{get:function(){return eD;},set:function(eE){eD=eE;}}),eD]);eC[0]?(_4.Obsolete(eC[1]),this.it.Remove(eB)):void 0;},FindByKey:function(eB){var eC;eC=this;return T.find(function(eD){return J.Equals(eC.key(eD),eB);},this["var"].Get());},UpdateBy:function(eB,eC){var eD,eE,eF,eG,eH;eD=this;eE=this["var"].Get();eF=T.tryFindIndex(function(eI){return J.Equals(eD.key(eI),eC);},eE);eF!=null&&eF.$==1?(eG=eF.$0,eH=eB(T.get(eE,eG)),eH!=null&&eH.$==1?(this["var"].Set(this.storage.SSetAt(eG,eH.$0,eE)),this.ObsoleteKey(eC)):void 0):void 0;},MapLens:function(eB){var eC;eC=this;return p.MapSeqCachedViewBy(eC.key,function(eD,eE){return eB(eD,eC["LensInto'"](a.id,function(eF,eG){return eG;},eD,eE));},this["var"].get_View());},"LensInto'":function(eB,eC,eD,eE){var eF,eG,eH;eF=this;eG=b8.Id();eH=new q({Get:function(){return eB(eF.FindByKey(eD));},Set:function(eI){return eF.UpdateBy(function(eJ){return{$:1,$0:eC(eJ,eI)};},eD);},SetFinal:function(eI){return this.Set(eI);},Update:function(eI){return eF.UpdateBy(function(eJ){return{$:1,$0:eC(eJ,eI(eB(eJ)))};},eD);},UpdateMaybe:function(eI){return eF.UpdateBy(function(eJ){var eK;eK=eI(eB(eJ));return eK==null?null:{$:1,$0:eC(eJ,eK.$0)};},eD);},get_View:function(){return eE;},get_Id:function(){return eG;}});q.New.call(eH);return eH;},GetEnumerator:function(){return cr.Get(this["var"].Get());},GetEnumerator0:function(){return cr.Get0(this["var"].Get());}},g,_6);_6.New$1=et.Ctor(function(eB){_6.New$2.call(this,eB,[]);},_6);_6.New=et.Ctor(function(eB,eC){_6.New$3.call(this,eB,i.Create$1(T.ofSeq(bc.distinctBy(eB,eC.SInit()))),eC);},_6);_6.New$2=et.Ctor(function(eB,eC){var eD;eD=T.ofSeq(eC);_6.New$3.call(this,eB,i.Create$1(eD),cS.InMemory(eD));},_6);_6.New$3=et.Ctor(function(eB,eC,eD){g.New.call(this);this.key=eB;this["var"]=eC;this.storage=eD;this.v=p.Map(function(eE){return eE.slice();},this["var"].get_View());this.it=new b3.New$5();},_6);_7.New=function(eB,eC){return{varName:eB,varVar:eC};};_8.New=function(eB,eC){return{viwName:eB,viwView:eC};};_9.New=function(eB,eC){return{docName:eB,docDoc:eC};};_.NewFromSeq=function(eB){var eC,eD,eE;eC={};eD=cr.Get(eB);try{while(eD.MoveNext()){eE=eD.Current();eC[eE[0]]=eE[1];}}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}return eC;};ba.New=function(eB,eC,eD){return{c:eB,v:eC,f:eD};};bb.p$1=function(eB){return eB.$==1?"Regular":"Master";};bb.p=function(eB){return eB.$==3?"Cancelado":eB.$==2?"Inactivo":eB.$==1?"Activo":"CuentaCreada";};bb.p$11=function(eB){return"IdAliado "+bD.prettyPrint(eB.$0);};bb.p$2=function(eB){return eB.$==3?"OtroP "+bD.prettyPrint(eB.$0):eB.$==2?"Argentina":eB.$==1?"Venezuela":"USA";};bb.p$7=function(eB){return eB.$==2?"Otra "+bD.prettyPrint(eB.$0):eB.$==1?"Corriente":"Ahorro";};bb.p$4=function(eB){return eB.$==7?"Otro "+bD.prettyPrint(eB.$0):eB.$==6?"FormaW8BEN":eB.$==5?"FormaW9":eB.$==4?"LicenciaConducir":eB.$==3?"Cedula":eB.$==2?"Pasaporte":eB.$==1?"Autorizacion":"Contrato";};bb.p$5=function(eB){return eB.$==5?"Cambiado":eB.$==4?"Cancelado":eB.$==3?"Expirado":eB.$==2?"Rechazado":eB.$==1?"Verificado":"Subido";};bb.p$3=function(eB){return eB.$==2?"OtroS "+bD.prettyPrint(eB.$0):eB.$==1?"Florida":"Texas";};bb.p$10=function(eB){return eB.$==3?"Voip":eB.$==2?"Habitacion":eB.$==1?"Oficina":"Movil";};bb.p$9=function(eB){return eB.$==3?"Otro "+bD.prettyPrint(eB.$0):eB.$==2?"ServicioPostal":eB.$==1?"Oficina":"Habitacion";};bb.p$6=function(eB){return eB.$==3?"Otra "+bD.prettyPrint(eB.$0):eB.$==2?"Amex":eB.$==1?"MasterCard":"Visa";};bb.p$8=function(eB){return eB.$==2?"Otro "+bD.prettyPrint(eB.$0):eB.$==1?"PagoComision":"PagoAfiliacion";};bc.sortWith=function(eB,eC){return bc.delay(function(){var eD;eD=T.ofSeq(eC);T.sortInPlaceWith(eB,eD);return eD;});};bc.filter=function(eB,eC){return{GetEnumerator:function(){var eD;eD=cr.Get(eC);return new cs.New(null,null,function(eE){var eF,eG,eH;eF=eD.MoveNext();eG=eD.Current();eH=false;while(eF)if(eB(eG)){eE.c=eG;eH=true;eF=false;}else if(eD.MoveNext())eG=eD.Current();else eF=false;return eH;},function(){eD.Dispose();});}};};bc.isEmpty=function(eB){var eC;eC=cr.Get(eB);try{return!eC.MoveNext();}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bc.map=function(eB,eC){return{GetEnumerator:function(){var eD;eD=cr.Get(eC);return new cs.New(null,null,function(eE){return eD.MoveNext()&&(eE.c=eB(eD.Current()),true);},function(){eD.Dispose();});}};};bc.delay=function(eB){return{GetEnumerator:function(){return cr.Get(eB());}};};bc.append=function(eB,eC){return{GetEnumerator:function(){var eD,eE;eD=cr.Get(eB);eE=[true];return new cs.New(eD,null,function(eF){var eG;return eF.s.MoveNext()?(eF.c=eF.s.Current(),true):(eG=eF.s,!J.Equals(eG,null)?eG.Dispose():void 0,eF.s=null,eE[0]&&(eE[0]=false,eF.s=cr.Get(eC),eF.s.MoveNext()?(eF.c=eF.s.Current(),true):(eF.s.Dispose(),eF.s=null,false)));},function(eF){var eG;eG=eF.s;!J.Equals(eG,null)?eG.Dispose():void 0;});}};};bc.collect=function(eB,eC){return bc.concat(bc.map(eB,eC));};bc.min=function(eB){var eC,eD,eE;eC=cr.Get(eB);try{if(!eC.MoveNext())bc.seqEmpty();eD=eC.Current();while(eC.MoveNext()){eE=eC.Current();J.Compare(eE,eD)===-1?eD=eE:void 0;}return eD;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bc.tryPick=function(eB,eC){var eD,eE;eD=cr.Get(eC);try{eE=null;while(J.Equals(eE,null)&&eD.MoveNext())eE=eB(eD.Current());return eE;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bc.tryFind=function(eB,eC){var eD,eE,eF;eD=cr.Get(eC);try{eE=null;while(eE==null&&eD.MoveNext()){eF=eD.Current();eB(eF)?eE={$:1,$0:eF}:void 0;}return eE;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bc.exists=function(eB,eC){var eD,eE;eD=cr.Get(eC);try{eE=false;while(!eE&&eD.MoveNext())eE=eB(eD.Current());return eE;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bc.sumBy=function(eB,eC){return bc.fold(function(eD,eE){return eD+eB(eE);},0,eC);};bc.length=function(eB){var eC,eD;eC=0;eD=cr.Get(eB);try{while(eD.MoveNext())eC=eC+1;return eC;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bc.zip=function(eB,eC){return bc.map2(function(eD,eE){return[eD,eE];},eB,eC);};bc.choose=function(eB,eC){return bc.collect(function(eD){var eE;eE=eB(eD);return eE==null?cu.Empty:bz.ofArray([eE.$0]);},eC);};bc.distinct=function(eB){return bc.distinctBy(a.id,eB);};bc.sort=function(eB){return bc.sortBy(a.id,eB);};bc.groupBy=function(eB,eC){return bc.delay(function(){return T.groupBy(eB,T.ofSeq(eC));});};bc.concat=function(eB){return{GetEnumerator:function(){var eC;eC=cr.Get(eB);return new cs.New(null,null,function(eD){var eE;while(true){eE=eD.s;if(J.Equals(eE,null)){if(eC.MoveNext()){eD.s=cr.Get(eC.Current());eD=eD;}else{eC.Dispose();return false;}}else if(eE.MoveNext()){eD.c=eE.Current();return true;}else{eD.Dispose();eD.s=null;eD=eD;}}},function(eD){var eE;eE=eD.s;!J.Equals(eE,null)?eE.Dispose():void 0;!J.Equals(eC,null)?eC.Dispose():void 0;});}};};bc.seqEmpty=function(){return o.FailWith("The input sequence was empty.");};bc.indexed=function(eB){return bc.mapi(function(eC,eD){return[eC,eD];},eB);};bc.fold=function(eB,eC,eD){var eE,eF;eE=eC;eF=cr.Get(eD);try{while(eF.MoveNext())eE=eB(eE,eF.Current());return eE;}finally{if(typeof eF=="object"&&"Dispose"in eF)eF.Dispose();}};bc.map2=function(eB,eC,eD){return{GetEnumerator:function(){var eE,eF;eE=cr.Get(eC);eF=cr.Get(eD);return new cs.New(null,null,function(eG){return eE.MoveNext()&&eF.MoveNext()&&(eG.c=eB(eE.Current(),eF.Current()),true);},function(){eE.Dispose();eF.Dispose();});}};};bc.sortBy=function(eB,eC){return bc.delay(function(){var eD;eD=T.ofSeq(eC);T.sortInPlaceBy(eB,eD);return eD;});};bc.tryFindIndex=function(eB,eC){var eD,eE,eF;eD=cr.Get(eC);try{eE=true;eF=0;while(eE&&eD.MoveNext())if(eB(eD.Current()))eE=false;else eF=eF+1;return eE?null:{$:1,$0:eF};}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bc.distinctBy=function(eB,eC){return{GetEnumerator:function(){var eD,eE;eD=cr.Get(eC);eE=new b4.New$3();return new cs.New(null,null,function(eF){var eG,eH;if(eD.MoveNext()){eG=eD.Current();eH=eE.Add(eB(eG));while(!eH&&eD.MoveNext()){eG=eD.Current();eH=eE.Add(eB(eG));}return eH&&(eF.c=eG,true);}else return false;},function(){eD.Dispose();});}};};bc.mapi=function(eB,eC){return bc.map2(eB,bc.initInfinite(a.id),eC);};bc.iter=function(eB,eC){var eD;eD=cr.Get(eC);try{while(eD.MoveNext())eB(eD.Current());}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bc.init=function(eB,eC){return bc.take(eB,bc.initInfinite(eC));};bc.pairwise=function(eB){return bc.map(function(eC){return[T.get(eC,0),T.get(eC,1)];},bc.windowed(2,eB));};bc.forall2=function(eB,eC,eD){return!bc.exists2(function(eE,eF){return!eB(eE,eF);},eC,eD);};bc.iteri=function(eB,eC){var eD,eE;eD=0;eE=cr.Get(eC);try{while(eE.MoveNext()){eB(eD,eE.Current());eD=eD+1;}}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}};bc.initInfinite=function(eB){return{GetEnumerator:function(){return new cs.New(0,null,function(eC){eC.c=eB(eC.s);eC.s=eC.s+1;return true;},void 0);}};};bc.take=function(eB,eC){eB<0?bc.nonNegative():void 0;return{GetEnumerator:function(){var eD;eD=[cr.Get(eC)];return new cs.New(0,null,function(eE){var eF;eE.s=eE.s+1;return eE.s>eB?false:(eF=eD[0],J.Equals(eF,null)?bc.insufficient():eF.MoveNext()?(eE.c=eF.Current(),eE.s===eB?(eF.Dispose(),eD[0]=null):void 0,true):(eF.Dispose(),eD[0]=null,bc.insufficient()));},function(){var eE;eE=eD[0];!J.Equals(eE,null)?eE.Dispose():void 0;});}};};bc.skip=function(eB,eC){return{GetEnumerator:function(){var eD;eD=cr.Get(eC);return new cs.New(true,null,function(eE){var eF,eG;if(eE.s){for(eF=1,eG=eB;eF<=eG;eF++)if(!eD.MoveNext())bc.insufficient();eE.s=false;}else null;return eD.MoveNext()&&(eE.c=eD.Current(),true);},function(){eD.Dispose();});}};};bc.nth=function(eB,eC){var eD,eE;if(eB<0)o.FailWith("negative index requested");eD=-1;eE=cr.Get(eC);try{while(eD<eB){!eE.MoveNext()?bc.insufficient():void 0;eD=eD+1;}return eE.Current();}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}};bc.windowed=function(eB,eC){eB<=0?o.FailWith("The input must be positive."):void 0;return bc.delay(function(){return bc.enumUsing(cr.Get(eC),function(eD){var eE;eE=[];return bc.append(bc.enumWhile(function(){return eE.length<eB&&eD.MoveNext();},bc.delay(function(){eE.push(eD.Current());return[];})),bc.delay(function(){return eE.length===eB?bc.append([eE.slice(0)],bc.delay(function(){return bc.enumWhile(function(){return eD.MoveNext();},bc.delay(function(){eE.shift();eE.push(eD.Current());return[eE.slice(0)];}));})):[];}));});});};bc.head=function(eB){var eC;eC=cr.Get(eB);try{return eC.MoveNext()?eC.Current():bc.insufficient();}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bc.exists2=function(eB,eC,eD){var eE,eF,eG,eH;eE=cr.Get(eC);try{eG=cr.Get(eD);try{eH=false;while(!eH&&eE.MoveNext()&&eG.MoveNext())eH=eB(eE.Current(),eG.Current());eF=eH;}finally{if(typeof eG=="object"&&"Dispose"in eG)eG.Dispose();}return eF;}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}};bc.compareWith=function(eB,eC,eD){var eE,eF,eG,eH,eI;eE=cr.Get(eC);try{eG=cr.Get(eD);try{eH=0;eI=true;while(eI&&eH===0)if(eE.MoveNext())eH=eG.MoveNext()?eB(eE.Current(),eG.Current()):1;else if(eG.MoveNext())eH=-1;else eI=false;eF=eH;}finally{if(typeof eG=="object"&&"Dispose"in eG)eG.Dispose();}return eF;}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}};bc.unfold=function(eB,eC){return{GetEnumerator:function(){return new cs.New(eC,null,function(eD){var eE;eE=eB(eD.s);return eE==null?false:(eD.c=eE.$0[0],eD.s=eE.$0[1],true);},void 0);}};};bc.max=function(eB){var eC,eD,eE;eC=cr.Get(eB);try{if(!eC.MoveNext())bc.seqEmpty();eD=eC.Current();while(eC.MoveNext()){eE=eC.Current();J.Compare(eE,eD)===1?eD=eE:void 0;}return eD;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bc.forall=function(eB,eC){return!bc.exists(function(eD){return!eB(eD);},eC);};be.op_AmpGreater=function(eB,eC,eD,eE){var eF;eF=eB(eD,eE);return eF===0?eC(eD,eE):eF;};be.asc=function(eB,eC,eD){return J.Compare(eB(eC),eB(eD));};be.desc=function(eB,eC,eD){return J.Compare(eB(eD),eB(eC));};bf.New=function(eB,eC,eD,eE,eF,eG){return{hijosDe:eB,nivelDe:eC,aliado:eD,aliadoO:eE,hijos:eF,descendientes:eG};};bh=bg.FSharpSet=et.Class({Contains:function(eB){return ct.Contains(eB,this.tree);},Remove:function(eB){return new bh.New$1(ct.Remove(eB,this.tree));},Add:function(eB){return new bh.New$1(ct.Add(eB,this.tree));},Equals:function(eB){return this.get_Count()===eB.get_Count()&&bc.forall2(J.Equals,this,eB);},GetEnumerator$1:function(){return cr.Get(ct.Enumerate(false,this.tree));},get_Count:function(){var eB;eB=this.tree;return eB==null?0:eB.Count;},GetHashCode:function(){return -1741749453+J.Hash(T.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(eB){return bc.compareWith(J.Compare,this,eB);},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,bh);bh.op_Subtraction=function(eB,eC){return bi.Filter(function(eD){return!eC.Contains(eD);},eB);};bh.New=et.Ctor(function(eB){bh.New$1.call(this,ct.OfSeq(eB));},bh);bh.New$1=et.Ctor(function(eB){g.New.call(this);this.tree=eB;},bh);bi.Filter=function(eB,eC){var eD;return new bh.New$1((eD=T.ofSeq(bc.filter(eB,eC)),ct.Build(eD,0,eD.length-1)));};bj.PadLeft=function(eB,eC){return bj.PadLeftWith(eB,eC," ");};bj.concat=function(eB,eC){return T.ofSeq(eC).join(eB);};bj.PadLeftWith=function(eB,eC,eD){return eC>eB.length?a.Array(eC-eB.length+1).join(eD)+eB:eB;};bj.Trim=function(eB){return eB.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bj.Substring=function(eB,eC,eD){return eB.substr(eC,eD);};bj.Replace=function(eB,eC,eD){function eE(eF){var eG,eH,eI;eG=eF.indexOf(eC);return eG!==-1?(eH=bj.ReplaceOnce(eF,eC,eD),(eI=eG+eD.length,bj.Substring(eH,0,eG+eD.length)+eE(eH.substring(eI)))):eF;}return eE(eB);};bj.SplitChars=function(eB,eC,eD){return bj.Split(eB,new a.RegExp("["+bj.RegexEscape(eC.join(""))+"]"),eD);};bj.StartsWith=function(eB,eC){return eB.substring(0,eC.length)==eC;};bj.ReplaceOnce=function(eB,eC,eD){return eB.replace(eC,eD);};bj.Split=function(eB,eC,eD){return eD===1?T.filter(function(eE){return eE!=="";},bj.SplitWith(eB,eC)):bj.SplitWith(eB,eC);};bj.RegexEscape=function(eB){return eB.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bj.SplitWith=function(eB,eC){return eB.split(eC);};bj.replicate=function(eB,eC){return T.create(eB,eC).join("");};bj.IsNullOrEmpty=function(eB){return eB==null||eB=="";};bj.ReplaceChar=function(eB,eC,eD){return bj.Replace(eB,eC,eD);};bj.SplitStrings=function(eB,eC,eD){return bj.Split(eB,new a.RegExp(bj.concat("|",T.map(bj.RegexEscape,eC))),eD);};bj.forall=function(eB,eC){return bc.forall(eB,bj.protect(eC));};bj.protect=function(eB){return eB===null?"":eB;};bj.Join=function(eB,eC){return eC.join(eB);};bk=M.CorreoElectronico=et.Class({toString:function(){return this.email;}},null,bk);bk.New=function(eB,eC,eD){return new bk({email:eB,enviado:eC,recibido:eD});};bl.formaDoc=function(eB){var eC,eD,eE,eF,eG,eH;eC=(eD=(eE=Z.EmbedView(p.Map(bu.crearOptions,bu.generos().get_View())),U.Make().WithHole({$:0,$0:"generos",$1:eE})),(eF=V.CompleteHoles(eD.k,eD.h,[["nombres",0],["apellidos",0],["fechanacimiento",0],["genero",0]]),(eG=new S.New(eF[1],W.datospersonales(eF[0])),(eD.i=eG,eG))));p.Sink(function(eI){var eJ;if(eI!=null&&eI.$==1){eJ=eI.$0;eC.Hole("nombres").Set(bj.Trim(eJ.nombre1+" "+eJ.nombre2));eC.Hole("apellidos").Set(bj.Trim(eJ.apellido1+" "+eJ.apellido2));eC.Hole("fechanacimiento").Set(bJ.toYYYYMMDD$1("-",eJ.fechaNacimiento));eC.Hole("genero").Set((function(eK){return function(eL){return eK(X.p$2(eL));};}(a.id))(eJ.genero));}},eB.get_View());eH=p.Apply(p.Apply(p.Map2(function(eI,eJ){return function(eK){return function(eL){return bc.map(function(eM){return eM[1];},bc.filter(function(eM){return eM[0];},bz.ofArray([[bj.Trim(eI)==="","Nombres"],[bj.Trim(eJ)==="","Apellidos"],[bj.Trim(eK)==="","Fecha de Nacimiento"],[bj.Trim(eL)==="","Genero"]])));};};},eC.Hole("nombres").get_View(),eC.Hole("apellidos").get_View()),eC.Hole("fechanacimiento").get_View()),eC.Hole("genero").get_View());p.Sink(function(eI){if(!J.Equals(eB.Get(),eI))eB.Set(eI);},p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eI,eJ){return et.Curried(function(eK,eL,eM,eN,eO){return!bc.isEmpty(eI)?null:bu.alertIfNone("Genero",cv.tryParse(eJ),function(eP){return bu.alertIfNone("Fecha incorrecta",(cw.parseDateO2())(eK),function(eQ){return{$:1,$0:bX.New(null,T.get(bj.SplitChars(bj.Trim(eL),[" "],0),0),bj.concat(" ",cc.array(bj.SplitChars(bj.Trim(eM),[" "],0),{$:1,$0:1},null)),T.get(bj.SplitChars(bj.Trim(eN),[" "],0),0),bj.concat(" ",cc.array(bj.SplitChars(bj.Trim(eO),[" "],0),{$:1,$0:1},null)),new cx({$:3,$0:""}),eP,eQ)};});});},5);},eH,eC.Hole("genero").get_View()),eC.Hole("fechanacimiento").get_View()),eC.Hole("nombres").get_View()),eC.Hole("nombres").get_View()),eC.Hole("apellidos").get_View()),eC.Hole("apellidos").get_View()));return[eH,eC.get_Doc()];};bm.formaDoc=function(eB){var eC,eD,eE,eF,eG,eH,eI;eC=i.Create$1("");eD=(eE=U.Make().WithHole({$:2,$0:"mensaje",$1:eC.get_View()}),(eF=V.CompleteHoles(eE.k,eE.h,[["correo",0],["confirmarcorreo",0]]),(eG=new S.New(eF[1],W.correo(eF[0])),(eE.i=eG,eG))));eH=eB.Get();eH!=null&&eH.$==1?eD.Hole("confirmarcorreo").Set(a.String(eH.$0)):void 0;p.Sink(function(eJ){eC.Set(eJ);},p.Apply(p.Apply(p.Map2(function(eJ,eK){return function(eL){return function(eM){return bj.Trim(eJ)===""||bj.Trim(eK)===""||bj.Trim(eL)===bj.Trim(eM)?"":"Correos no son iguales";};};},eD.Hole("correo").get_View(),eD.Hole("confirmarcorreo").get_View()),eD.Hole("correo").get_View()),eD.Hole("confirmarcorreo").get_View()));p.Sink(function(eJ){if(eJ!=null&&eJ.$==1)eD.Hole("correo").Set(eJ.$0.email);},eB.get_View());eI=p.Apply(p.Apply(p.Map2(function(eJ,eK){return function(eL){return function(eM){return bc.map(function(eN){return eN[1];},bc.filter(function(eN){return eN[0];},bz.ofArray([[bj.Trim(eJ)==="","Correo"],[bj.Trim(eK)==="","ConfirmarCorreo"],[eL!=="",eM]])));};};},eD.Hole("correo").get_View(),eD.Hole("confirmarcorreo").get_View()),eC.get_View()),eC.get_View());p.Sink(function(eJ){if(!J.Equals(eB.Get(),eJ))eB.Set(eJ);},p.Map2(function(eJ,eK){var eL,eM,eN,eO;return!bc.isEmpty(eJ)?null:(eL=(eM=eB.Get(),(eN={$:1,$0:M.correoVacio()},eM==null?eN:eM)),eL==null?null:{$:1,$0:(eO=eL.$0,bk.New(eK,eO.enviado,eO.recibido))});},eI,eD.Hole("correo").get_View()));return[eI,eD.get_Doc()];};bn.formaDoc=function(eB){var eC,eD,eE,eF,eG,eH;eC=(eD=(eE=Z.EmbedView(p.Map(bu.crearOptions,bu.tiposTel().get_View())),U.Make().WithHole({$:0,$0:"tipos",$1:eE})),(eF=V.CompleteHoles(eD.k,eD.h,[["tipotelefono",0],["codigopais",0],["codigoarea",0],["telefono",0],["extension",0]]),(eG=new S.New(eF[1],W.telefono(eF[0])),(eD.i=eG,eG))));p.Sink(function(eI){var eJ;if(eI!=null&&eI.$==1){eJ=eI.$0;eC.Hole("codigoarea").Set(eJ.codigoArea);eC.Hole("codigopais").Set(eJ.codigoPais);eC.Hole("telefono").Set(eJ.numero);eC.Hole("extension").Set(eJ.extension);eC.Hole("tipotelefono").Set((function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.tipoTelefono));}},eB.get_View());eH=p.Apply(p.Map2(function(eI,eJ){return function(eK){return bc.map(function(eL){return eL[1];},bc.filter(function(eL){return eL[0];},bz.ofArray([[bj.Trim(eI)==="","CodigoPais"],[bj.Trim(eJ)==="","Telefono"],[bj.Trim(eK)==="","TipoTelefono"]])));};},eC.Hole("codigopais").get_View(),eC.Hole("telefono").get_View()),eC.Hole("tipotelefono").get_View());p.Sink(function(eI){if(!J.Equals(eB.Get(),eI))eB.Set(eI);},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eI,eJ){return et.Curried(function(eK,eL,eM,eN){return!bc.isEmpty(eI)?null:bu.alertIfNone("TipoTelefono",(cz.get_tryParse())(bj.Trim(eJ)),function(eO){var eP;return{$:1,$0:(eP=bj.Trim(eK),cy.New(eO,bj.Trim(eL),eP,bj.Trim(eM),bj.Trim(eN),false))};});},4);},eH,eC.Hole("tipotelefono").get_View()),eC.Hole("codigoarea").get_View()),eC.Hole("codigopais").get_View()),eC.Hole("telefono").get_View()),eC.Hole("extension").get_View()));return[eH,eC.get_Doc()];};bo.formaDoc=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ;eC=(eD=(eE=Z.EmbedView(p.Map(bu.crearOptions,bu.tiposDir().get_View())),(eF=Z.EmbedView(p.Map(bu.crearOptions,bu.estados().get_View())),(eG=Z.EmbedView(p.Map(bu.crearOptions,bu.paises().get_View())),U.Make().WithHole({$:0,$0:"paises",$1:eG})).WithHole({$:0,$0:"estados",$1:eF})).WithHole({$:0,$0:"tipos",$1:eE})),(eH=V.CompleteHoles(eD.k,eD.h,[["tipodireccion",0],["direccion1",0],["direccion2",0],["ciudad",0],["estado",0],["codigopostal",0],["pais",0]]),(eI=new S.New(eH[1],W.direccion(eH[0])),(eD.i=eI,eI))));p.Sink(function(eK){var eL;if(eK!=null&&eK.$==1){eL=eK.$0;eC.Hole("direccion1").Set(eL.linea1);eC.Hole("direccion2").Set(eL.linea2);eC.Hole("ciudad").Set(eL.ciudad);eC.Hole("estado").Set((function(eM){return function(eN){return eM(a.String(eN));};}(a.id))(eL.estado));eC.Hole("pais").Set((function(eM){return function(eN){return eM(a.String(eN));};}(a.id))(eL.pais));eC.Hole("codigopostal").Set((function(eM){return function(eN){return eM(a.String(eN));};}(a.id))(eL.zonaPostal));eC.Hole("tipodireccion").Set((function(eM){return function(eN){return eM(a.String(eN));};}(a.id))(eL.tipoDireccion));}},eB.get_View());eJ=p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eK,eL){return et.Curried(function(eM,eN,eO,eP){return bc.map(function(eQ){return eQ[1];},bc.filter(function(eQ){return eQ[0];},bz.ofArray([[bj.Trim(eK)==="","Direccion1"],[bj.Trim(eL)==="","Ciudad"],[bj.Trim(eM)==="","Estado"],[bj.Trim(eN)==="","Pais"],[bj.Trim(eO)==="","CodigoPostal"],[bj.Trim(eP)==="","TipoDireccion"]])));},4);},eC.Hole("direccion1").get_View(),eC.Hole("ciudad").get_View()),eC.Hole("estado").get_View()),eC.Hole("pais").get_View()),eC.Hole("codigopostal").get_View()),eC.Hole("tipodireccion").get_View());p.Sink(function(eK){if(!J.Equals(eB.Get(),eK))eB.Set(eK);},p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eK,eL){return et.Curried(function(eM,eN,eO,eP,eQ,eR,eS){return!bc.isEmpty(eK)?null:bu.alertIfNone("TipoDireccion",cB.tryParse(bj.Trim(eL)),function(eT){return bu.alertIfNone("Estado",cC.tryParse(bj.Trim(eM)),function(eU){return bu.alertIfNone("Pais",cx.tryParse(bj.Trim(eN)),function(eV){return bu.alertIfNone("CodigoPostal",cD.tryParse(bj.Trim(eO)),function(eW){var eX;return{$:1,$0:cA.New((eX=eS==null?null:{$:1,$0:eS.$0.authorizeIdR},eX==null?bd.Error$1(""):eX.$0),eT,bj.Trim(eP),bj.Trim(eQ),bj.Trim(eR),eU,eV,eW)};});});});});},7);},eJ,eC.Hole("tipodireccion").get_View()),eC.Hole("estado").get_View()),eC.Hole("pais").get_View()),eC.Hole("codigopostal").get_View()),eC.Hole("direccion1").get_View()),eC.Hole("direccion2").get_View()),eC.Hole("ciudad").get_View()),eB.get_View()));return[eJ,eC.get_Doc()];};bp.asyncResult=function(){_5.$cctor();return _5.asyncResult;};bq=bp.AsyncResultBuilder=et.Class({Run:function(eB){return cE.bind(eB,cE.rtn());},Delay:a.id,Bind$1:function(eB,eC){return cE.bind(eC,eB);},Zero:function(){return cE.rtn();},Combine$1:function(eB,eC){return cE.bind(eC,eB);},For:function(eB,eC){var eD;eD=this;return this.Using(cr.Get(eB),function(eE){return eD.While(function(){return eE.MoveNext();},eD.Delay(function(){return eC(eE.Current());}));});},Return:function(eB){return cE.rtn(eB);},Bind:function(eB,eC){return cE.bind(eC,cE.rtnR(eB));},Using:function(eB,eC){return cO.Using(eB,eC);},While:function(eB,eC){return cE.whileLoop(eB,eC);},TryFinally:function(eB,eC){var eD;eD=null;return cO.Delay(function(){return cO.TryFinally(cO.Delay(function(){return eB();}),function(){eC();});});},ReturnFrom$1:a.id},g,bq);bq.New=et.Ctor(function(){g.New.call(this);},bq);br.refrescarData=function(eB){var eC,eD,eE;eB?br.set_shouldRefresh(true):void 0;eC=bS.userO().Get();eC!=null&&eC.$==1?(eD=eC.$0,_0.iterA((eE=bp.asyncResult(),eE.Run(eE.Delay(function(){return eE.Combine$1(bS.referidoPor()!==""?eE.Bind$1(_0.agregarUsuarioSiEsNuevo(bS.claims(eD)),function(){return eE.Return();}):eE.Zero(),eE.Delay(function(){return!self.document.hidden?br.shouldRefresh()?eE.Bind$1(_0.obtenerEstadoParaUsuario(),function(eF){br.set_shouldRefresh(false);m.modeloV().Set(eF);return eE.Zero();}):eE.Zero():eE.Zero();}));}))))):m.modeloV().Set(M.modeloVacio());};br.set_shouldRefresh=function(eB){_5.$cctor();_5.shouldRefresh=eB;};br.shouldRefresh=function(){_5.$cctor();return _5.shouldRefresh;};bt.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(eB){var eC,eD;eC=eu.random()*16|0;eD=eB=="x"?eC:eC&3|8;return eD.toString(16);});};bt.TryParse=function(eB,eC){try{eC.set(bt.Parse(eB));return true;}catch(eD){return false;}};bt.Parse=function(eB){var eC,eD,eE;try{return bt.ParseExact(eB,"D");}catch(eF){try{eC=bt.ParseExact(eB,"B");}catch(eG){try{eD=bt.ParseExact(eB,"P");}catch(eH){try{eE=bt.ParseExact(eB,"N");}catch(eI){eE=bt.ParseExact(eB,"X");}eD=eE;}eC=eD;}return eC;}};bt.ParseExact=function(eB,eC){var eD,eE,eF,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ;function eG(eR){var eS,eT,eU,eV;for(eS=0,eT=35;eS<=eT;eS++){eS===8||(eS===13||(eS===18||eS===23))?eR[eS]!=="-"?bt.ShapeError():void 0:(eV=eR[eS],!("0"<=eV&&eV<="9"||"a"<=eV&&eV<="f")?bt.ShapeError():void 0);}return eR;}eH=eC.toUpperCase();if(eH==="N"){eI=bj.Trim(eB).toLowerCase();if(eI.length!==32)bt.ShapeError();for(eJ=0,eK=31;eJ<=eK;eJ++){eL=eI[eJ];!("0"<=eL&&eL<="9"||"a"<=eL&&eL<="f")?bt.ShapeError():void 0;}return bj.Substring(eI,0,8)+"-"+bj.Substring(eI,8,4)+"-"+bj.Substring(eI,12,4)+"-"+bj.Substring(eI,16,4)+"-"+eI.substring(20);}else if(eH==="D"){eD=bj.Trim(eB).toLowerCase();eD.length!==36?bt.ShapeError():void 0;return eG(eD);}else if(eH==="B"){eE=bj.Trim(eB).toLowerCase();eE.length!==38||eE[0]!=="{"||eE[17]!=="}"?bt.ShapeError():void 0;return eG(bj.Substring(eE,1,36));}else if(eH==="P"){eF=bj.Trim(eB).toLowerCase();eF.length!==38||eF[0]!=="("||eF[17]!==")"?bt.ShapeError():void 0;return eG(bj.Substring(eF,1,36));}else if(eH==="X"){eM=bj.Trim(eB).toLowerCase();if(eM.length!==68)bt.ShapeError();for(eN=0,eO=67;eN<=eO;eN++){switch(eN){case 26:case 0:if(eM[eN]!=="{")bt.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(eM[eN]!=="0")bt.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(eM[eN]!=="x")bt.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(eM[eN]!==",")bt.ShapeError();break;case 67:case 66:if(eM[eN]!=="{")bt.ShapeError();break;default:eQ=eM[eN];!("0"<=eQ&&eQ<="9"||"a"<=eQ&&eQ<="f")?bt.ShapeError():void 0;break;}}return bj.Substring(eM,3,8)+"-"+bj.Substring(eM,14,4)+"-"+bj.Substring(eM,21,4)+"-"+bj.Substring(eM,29,2)+bj.Substring(eM,34,2)+"-"+bj.Substring(eM,39,2)+bj.Substring(eM,44,2)+bj.Substring(eM,49,2)+bj.Substring(eM,54,2)+bj.Substring(eM,59,2)+bj.Substring(eM,64,2);}else return bt.FormatError();};bt.ShapeError=function(){throw new ei.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bt.FormatError=function(){throw new ei.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};T.mapi=function(eB,eC){var eD,eE,eF;eD=new a.Array(eC.length);for(eE=0,eF=eC.length-1;eE<=eF;eE++)eD[eE]=eB(eE,eC[eE]);return eD;};T.map=function(eB,eC){var eD,eE,eF;eD=new a.Array(eC.length);for(eE=0,eF=eC.length-1;eE<=eF;eE++)eD[eE]=eB(eC[eE]);return eD;};T.sortBy=function(eB,eC){return T.map(function(eD){return eD[0];},T.mapi(function(eD,eE){return[eE,[eB(eE),eD]];},eC).sort(function(eD,eE){return J.Compare(eD[1],eE[1]);}));};T.reduce=function(eB,eC){var eD,eE,eF;T.nonEmpty(eC);eD=eC[0];for(eE=1,eF=eC.length-1;eE<=eF;eE++)eD=eB(eD,eC[eE]);return eD;};T.filter=function(eB,eC){var eD,eE,eF;eD=[];for(eE=0,eF=eC.length-1;eE<=eF;eE++)if(eB(eC[eE]))eD.push(eC[eE]);return eD;};T.choose=function(eB,eC){var eD,eE,eF,eG;eD=[];for(eE=0,eF=eC.length-1;eE<=eF;eE++){eG=eB(eC[eE]);eG==null?void 0:eD.push(eG.$0);}return eD;};T.ofSeq=function(eB){var eC,eD;if(eB instanceof a.Array)return eB.slice();else if(eB instanceof cu)return T.ofList(eB);else{eC=[];eD=cr.Get(eB);try{while(eD.MoveNext())eC.push(eD.Current());return eC;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}}};T.sortInPlaceWith=function(eB,eC){eC.sort(eB);};T.nonEmpty=function(eB){if(eB.length===0)o.FailWith("The input array was empty.");};T.tryFindIndex=function(eB,eC){var eD,eE;eD=null;eE=0;while(eE<eC.length&&eD==null){eB(eC[eE])?eD={$:1,$0:eE}:void 0;eE=eE+1;}return eD;};T.ofList=function(eB){var eC,eD;eD=[];eC=eB;while(!(eC.$==0)){eD.push(bz.head(eC));eC=bz.tail(eC);}return eD;};T.sortInPlace=function(eB){T.mapInPlace(function(eC){return eC[0];},T.mapiInPlace(function(eC,eD){return[eD,eC];},eB).sort(J.Compare));};T.tryFind=function(eB,eC){var eD,eE;eD=null;eE=0;while(eE<eC.length&&eD==null){eB(eC[eE])?eD={$:1,$0:eC[eE]}:void 0;eE=eE+1;}return eD;};T.sortInPlaceBy=function(eB,eC){T.mapInPlace(function(eD){return eD[0];},T.mapiInPlace(function(eD,eE){return[eE,[eB(eE),eD]];},eC).sort(function(eD,eE){return J.Compare(eD[1],eE[1]);}));};T.map2=function(eB,eC,eD){var eE,eF,eG;T.checkLength(eC,eD);eE=new a.Array(eD.length);for(eF=0,eG=eD.length-1;eF<=eG;eF++)eE[eF]=eB(eC[eF],eD[eF]);return eE;};T.forall=function(eB,eC){var eD,eE,eF,eG;eD=true;eE=0;eG=T.length(eC);while(eD&&eE<eG)if(eB(eC[eE]))eE=eE+1;else eD=false;return eD;};T.init=function(eB,eC){var eD,eE,eF;eB<0?o.FailWith("Negative size given."):null;eD=new a.Array(eB);for(eE=0,eF=eB-1;eE<=eF;eE++)eD[eE]=eC(eE);return eD;};T.find=function(eB,eC){var eD;eD=T.tryFind(eB,eC);return eD==null?o.FailWith("KeyNotFoundException"):eD.$0;};T.tryPick=function(eB,eC){var eD,eE,eF;eD=null;eE=0;while(eE<eC.length&&eD==null){eF=eB(eC[eE]);eF!=null&&eF.$==1?eD=eF:void 0;eE=eE+1;}return eD;};T.concat=function(eB){return a.Array.prototype.concat.apply([],T.ofSeq(eB));};T.checkLength=function(eB,eC){if(eB.length!==eC.length)o.FailWith("The arrays have different lengths.");};T.exists=function(eB,eC){var eD,eE,eF,eG;eD=false;eE=0;eG=T.length(eC);while(!eD&&eE<eG)if(eB(eC[eE]))eD=true;else eE=eE+1;return eD;};T.pick=function(eB,eC){var eD;eD=T.tryPick(eB,eC);return eD==null?o.FailWith("KeyNotFoundException"):eD.$0;};T.create=function(eB,eC){var eD,eE,eF;eD=new a.Array(eB);for(eE=0,eF=eB-1;eE<=eF;eE++)eD[eE]=eC;return eD;};T.foldBack=function(eB,eC,eD){var eE,eF,eG,eH,eI;eE=eD;eG=eC.length;for(eH=1,eI=eG;eH<=eI;eH++)eE=eB(eC[eG-eH],eE);return eE;};T.iter=function(eB,eC){var eD,eE;for(eD=0,eE=eC.length-1;eD<=eE;eD++)eB(eC[eD]);};bu.statuses=function(){_5.$cctor();return _5.statuses;};bu.crearOptions=function(eB){return Z.Concat(bc.map(bu.crearOption,eB));};bu.crearOptions2=function(eB){return Z.Concat(bc.map(function(eC){return bu.crearOption2(eC[0],eC[1]);},eB));};bu.statusAr=function(){_5.$cctor();return _5.statusAr;};bu.tiposAr=function(){_5.$cctor();return _5.tiposAr;};bu.paises=function(){_5.$cctor();return _5.paises;};bu.estados=function(){_5.$cctor();return _5.estados;};bu.tiposDir=function(){_5.$cctor();return _5.tiposDir;};bu.tiposTel=function(){_5.$cctor();return _5.tiposTel;};bu.generos=function(){_5.$cctor();return _5.generos;};bu.tiposCta=function(){_5.$cctor();return _5.tiposCta;};bu.tiposTar=function(){_5.$cctor();return _5.tiposTar;};bu.aniosV=function(){_5.$cctor();return _5.aniosV;};bu.mesesV=function(){_5.$cctor();return _5.mesesV;};bu.alertIfNone=function(eB,eC,eD){return eC!=null&&eC.$==1?eD(eC.$0):(a.alert("Error not caught: "+eB),null);};bu.removeButton=function(eB,eC){return Z.Element("form",[cP.Create("class","mui-panel")],[eC,Z.Button("borrar",[cP.Create("title","borrar")],eB)]);};bu.fst3=a.id;bu.crearOption=function(eB){return Z.Element("option",[],[Z.TextNode(eB)]);};bu.crearOption2=function(eB,eC){return Z.Element("option",[cP.Create("value",eC)],[Z.TextNode(eB)]);};bu.thr3=function(eB,eC,eD){return eD;};bu.snd3=function(eB,eC,eD){return eC;};bw=bv.attr=et.Class({},g,bw);bx.B={$:0};by=M.StatusAliado=et.Class({toString:function(){return(function(eB){return function(eC){return eB(bb.p(eC));};}(a.id))(this);}},null,by);by.tryParse=function(eB){var eC;eC=bj.Trim(eB).toUpperCase();return eC==="CUENTACREADA"?by.CuentaCreada:eC==="ACTIVO"?by.Activo:eC==="CANCELADO"?by.Cancelado:by.Inactivo;};by.CuentaCreada=new by({$:0});by.Activo=new by({$:1});by.Cancelado=new by({$:3});by.Inactivo=new by({$:2});bz.ofArray=function(eB){var eC,eD,eE;eC=cu.Empty;for(eD=T.length(eB)-1,eE=0;eD>=eE;eD--)eC=new cu({$:1,$0:T.get(eB,eD),$1:eC});return eC;};bz.ofSeq=function(eB){var eC,eD,eE,eF,eG,eH;if(eB instanceof cu)return eB;else if(eB instanceof a.Array)return bz.ofArray(eB);else{eC=cr.Get(eB);try{eE=eC.MoveNext();if(!eE)eD=cu.Empty;else{eG=new cu({$:1});eF=eG;while(eE){eF.$0=eC.Current();eC.MoveNext()?eF=(eH=new cu({$:1}),eF.$1=eH,eH):eE=false;}eF.$1=cu.Empty;eD=eG;}return eD;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}}};bz.rev=function(eB){var eC,eD;eC=cu.Empty;eD=eB;while(eD.$==1){eC=new cu({$:1,$0:eD.$0,$1:eC});eD=eD.$1;}return eC;};bz.head=function(eB){return eB.$==1?eB.$0:bz.listEmpty();};bz.tail=function(eB){return eB.$==1?eB.$1:bz.listEmpty();};bz.listEmpty=function(){return o.FailWith("The input list was empty.");};bz.iter=function(eB,eC){var eD;eD=eC;while(eD.$==1){eB(bz.head(eD));eD=bz.tail(eD);}};bA.New=function(eB,eC,eD,eE,eF){return{titular:eB,banco:eC,tipo:eD,numero:eE,routing:eF};};bB=M.RoutingNumber=et.Class({get_Id:function(){return this.$0;}},null,bB);bC=M.NumeroCuenta=et.Class({get_Id:function(){return this.$0;}},null,bC);bD.toSafe=function(eB){return eB==null?"":eB;};bD.prettyPrint=function(eB){var eC,eD;function eE(eF,eG){return eF+" = "+bD.prettyPrint(eG);}return eB===null?"null":(eC=typeof eB,eC=="string"?"\""+eB+"\"":eC=="object"?eB instanceof a.Array?"[|"+bj.concat("; ",T.map(bD.prettyPrint,eB))+"|]":(eD=a.String(eB),eD==="[object Object]"?"{"+bj.concat("; ",T.map(function(eF){return eE(eF[0],eF[1]);},I.GetFields(eB)))+"}":eD):a.String(eB));};bD.padNumLeft=function(eB,eC){var eD;eD=T.get(eB,0);return eD===" "||eD==="+"||eD==="-"?eD+bj.PadLeftWith(eB.substr(1),eC-1,"0"):bj.PadLeftWith(eB,eC,"0");};bD.printList=function(eB,eC){return"["+bj.concat("; ",bc.map(eB,eC))+"]";};bE.New=function(eB,eC,eD,eE){return{nombre:eB,authorizeIdR:eC,cuentaPago:eD,subscripcion:eE};};M.ctaVacio=function(){b1.$cctor();return b1.ctaVacio;};M.premisasCalculo=function(){b1.$cctor();return b1.premisasCalculo;};M.correoVacio=function(){b1.$cctor();return b1.correoVacio;};M.modeloVacio=function(){b1.$cctor();return b1.modeloVacio;};M.telVacio=function(){b1.$cctor();return b1.telVacio;};M.dirVacio=function(){b1.$cctor();return b1.dirVacio;};M.tarVacio=function(){b1.$cctor();return b1.tarVacio;};bF.defaultValue$1=function(eB,eC){return eC.$==1?eB:eC.$0;};bF.result$1=function(){_5.$cctor();return _5.result;};bF.rtn$1=function(eB){return{$:0,$0:eB};};bF.iter$1=function(eB,eC,eD){bF.defaultWith$1(eB,dH.Map(eC,eD));};bF.absorbO$1=function(eB,eC){return dH.Bind(function(eD){return bF.ofOption$1(eB,eD);},eC);};bF.defaultWith$1=function(eB,eC){return eC.$==1?eB(eC.$0):eC.$0;};bF.ofOption$1=function(eB,eC){var eD;eD=eC==null?null:{$:1,$0:{$:0,$0:eC.$0}};return eD==null?function(eE){return bd.Error$1(eB(eE));}():eD.$0;};_6.Create=function(eB,eC){return _6.CreateWithStorage(eB,cS.InMemory(T.ofSeq(eC)));};_6.CreateWithStorage=function(eB,eC){return new _6.New(eB,eC);};bG.New=function(eB,eC,eD,eE,eF,eG,eH){return{idAliado:eB,tipo:eC,nombre:eD,modificado:eE,tamano:eF,status:eG,comentario:eH};};bH["AsyncResultBuilder.Bind"]=function(eB,eC,eD){function eE(eG){return{$:0,$0:eG};}function eF(eG){return cO.Return(eG);}return cE.bind(eD,cO.Bind(eC,function(eG){return eF(eE(eG));}));};bI.docLensMapView=function(eB,eC,eD){function eE(eF,eG){return eC(eF,bI["lensInto'"](eD,a.id,function(){return a.id;},eF,eG));}return Z.ConvertSeqBy(eD.key,function(eF){return function(eG){return eE(eF,eG);};},p.Map(eB,eD.v));};bI["lensInto'"]=function(eB,eC,eD,eE,eF){var eG,eH;eG=dq.freshId();eH=new q({Get:function(){return eC(eB.FindByKey(eE));},Set:function(eI){return eB.UpdateBy(function(eJ){return{$:1,$0:(eD(eJ))(eI)};},eE);},Update:function(eI){return eB.UpdateBy(function(eJ){var eK;return{$:1,$0:(eK=eI(eC(eJ)),(eD(eJ))(eK))};},eE);},UpdateMaybe:function(eI){return eB.UpdateBy(function(eJ){var eK,eL;eK=eI(eC(eJ));eL=eD(eJ);return eK==null?null:{$:1,$0:eL(eK.$0)};},eE);},SetFinal:function(eI){return this.Set(eI);},get_View:function(){return eF;},get_Id:function(){return eG;}});q.New.call(eH);return eH;};bJ.toYYYYMMDDHHMM$1=function(eB,eC){return(((et.Curried3(function(eD,eE,eF){return eD(bD.toSafe(eE)+" "+bD.toSafe(eF));}))(a.id))(bJ.toYYYYMMDD$1(eB,eC)))(bJ.toHHMM$1(eC));};bJ.toYYYYMMDD$1=function(eB,eC){return((((((et.Curried(function(eD,eE,eF,eG,eH,eI){return eD(a.String(eE)+bD.toSafe(eF)+bD.padNumLeft(a.String(eG),2)+bD.toSafe(eH)+bD.padNumLeft(a.String(eI),2));},6))(a.id))((new ex(eC)).getFullYear()))(eB))((new ex(eC)).getMonth()+1))(eB))((new ex(eC)).getDate());};bJ.toHHMM$1=function(eB){return(((et.Curried3(function(eC,eD,eE){return eC(bD.padNumLeft(a.String(eD),2)+":"+bD.padNumLeft(a.String(eE),2));}))(a.id))((new ex(eB)).getHours()))((new ex(eB)).getMinutes());};bK.thousands$1=function(eB){var eC,eD,eE;eC=a.String(eB);eD=eC.length%3;eE=eD===0?3:eD;return bj.concat(",",bz.ofSeq(bc.delay(function(){return bc.append([cc.string(eC,{$:1,$0:0},{$:1,$0:eE-1})],bc.delay(function(){return bc.map(function(eF){return cc.string(eC,{$:1,$0:eF*3+eE},{$:1,$0:eF*3+eE+2});},o.range(0,((eC.length-eE)/3>>0)-1));}));})));};bK.unindent$1=function(eB){var eC,eD,eE,eF;eC=bj.SplitChars(eB,["\n"],0);eD=(eE=bc.tryFindIndex(function(eG){return" "!==eG;},(eF=bc.tryFind(function(eG){return bj.Trim(eG)!=="";},eC),eF==null?"":eF.$0)),eE==null?0:eE.$0);return bc.filter(function(eG){return!bj.StartsWith(eG,"# 1 ");},bc.map(function(eG){return eG.length<=eD?"":eG.substring(eD);},eC));};bK.splitByChar$1=function(eB,eC){return bj.SplitChars(eC,[eB],0);};bL=M.TipoArchivo=et.Class({toString:function(){return this.$==7?this.$0:(function(eB){return function(eC){return eB(bb.p$4(eC));};}(a.id))(this);}},null,bL);bL.Parse=function(eB){var eC;eC=bK.StartsWith("Otro ",eB);return eC!=null&&eC.$==1?new bL({$:7,$0:eC.$0}):eB==="Contrato"?bL.Contrato:eB==="FormaW9"?bL.FormaW9:eB==="FormaW8BEN"?bL.FormaW8BEN:eB==="Autorizacion"?bL.Autorizacion:eB==="Pasaporte"?bL.Pasaporte:eB==="Cedula"?bL.Cedula:eB==="LicenciaConducir"?bL.LicenciaConducir:new bL({$:7,$0:bj.Trim(eB)});};bL.Autorizacion=new bL({$:1});bL.Contrato=new bL({$:0});bL.FormaW9=new bL({$:5});bL.FormaW8BEN=new bL({$:6});bL.Pasaporte=new bL({$:2});bL.Cedula=new bL({$:3});bL.LicenciaConducir=new bL({$:4});bM=M.StatusArchivo=et.Class({toString:function(){return(function(eB){return function(eC){return eB(bb.p$5(eC));};}(a.id))(this);}},null,bM);bM.Parse=function(eB){return eB==="Cambiado"?bM.Cambiado:eB==="Expirado"?bM.Expirado:eB==="Cancelado"?bM.Cancelado:eB==="Verificado"?bM.Verificado:eB==="Rechazado"?bM.Rechazado:bM.Subido;};bM.Cambiado=new bM({$:5});bM.Expirado=new bM({$:3});bM.Cancelado=new bM({$:4});bM.Verificado=new bM({$:1});bM.Rechazado=new bM({$:2});bM.Subido=new bM({$:0});p=h.View=et.Class({get_V:function(){return o.FailWith("View<'T>.V can only be called in an argument to a V-enabled function or if 'T = Doc.");}},null,p);bO=M.CuentaPago=et.Class({get_AutorizacionPre:function(){return(((et.Curried3(function(eB,eC,eD){return eB("Autorizacion "+bD.toSafe(eC)+" "+bD.toSafe(eD));}))(a.id))(this.get_TipoCorto()))(this.get_MaskedCuenta());},get_TipoCorto:function(){return this.$==0?"CB":this.$==2?"TE":"TC";},get_MaskedCuenta:function(){return this.$==0?this.$0.numero.get_Id():this.$==2?this.$0:this.$0.numero.get_Id();},get_TipoLargo:function(){return this.$==0?"Cuenta Bancaria":this.$==2?"Transferencia Electronica":"Tarjeta de Credito";}},null,bO);bP.formaFirma=function(eB,eC,eD,eE,eF){var eG,eH,eI,eJ,eK,eL,eM;function eN(){var eO;_0.iterA((eO=bp.asyncResult(),eO.Run(eO.Delay(function(){return bP.mensajes().Get()!==""?(a.alert(bP.mensajes().Get()),eO.Zero()):eO.Bind$1(bP.subirScreenShot(eD,eF),function(){return eO.Bind$1(cE.map(function(eP){a.alert(eP);},eE()),function(){m.endPointV().Set(ck.DefaultEP);return eO.Zero();});});}))));}eG=i.Create$1(false);eH=(eI=(eJ=n.get_LoggedId().get_Id(),(eK=U.Make().WithHole({$:2,$0:"firmarclass",$1:p.Map(function(eO){return eO===""?"mui-btn--primary":"";},bP.mensajes().get_View())}).WithHole({$:2,$0:"mensaje",$1:bP.mensajes().get_View()}).WithHole({$:0,$0:"contenido",$1:eC}).WithHole({$:9,$0:"acepto",$1:i.Lens(eG,a.id,function(eO,eP){return eP;})}),eK.WithHole(V.EventQ2(eK.k,"firmar",function(){return eK.i;},function(){eN();}))).WithHole({$:2,$0:"datetime",$1:bP.fechaHoraV().get_View()}).WithHole({$:1,$0:"idloggedin",$1:eJ})).WithHole({$:2,$0:"textobotonfirmar",$1:p.Map(function(eO){return eO?"FIRMADO!":"Firmar y Procesar";},bP.firmadoV().get_View())}),(eL=V.CompleteHoles(eI.k,eI.h,[["firmante",0],["fecha",0],["acepto",2]]),(eM=new S.New(eL[1],W.formafirma(eL[0])),(eI.i=eM,eM))));p.Sink(function(eO){bP.mensajes().Set(eO);},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eO,eP){return et.Curried(function(eQ,eR,eS,eT){return bj.concat(", ",bc.map(function(eU){return eU[1];},bc.filter(function(eU){return eU[0];},bz.ofArray([[bj.Trim(eO)!==eP.toUpperCase(),"Nombre en MAYUSCULAS debe coincidir"],[eQ!==bd["String.Left$1"](eR,10),"Introduzca fecha de hoy (YYYY-MM-DD)"],[!J.Equals(eS,true),"Acepte los terminos indicados"],[!J.Equals(n.get_LoggedId(),eT.id),"El documento solo debe ser firmado por el titular de la cuenta"]]))));},4);},eH.Hole("firmante").get_View(),eB),eH.Hole("fecha").get_View()),bP.fechaHoraV().get_View()),eH.Hole("acepto").get_View()),m.aliadoW()));return eH.get_Doc();};bP.fechaHoraV=function(){_5.$cctor();return _5.fechaHoraV;};bP.firmadoV=function(){_5.$cctor();return _5.firmadoV;};bP.mensajes=function(){_5.$cctor();return _5.mensajes;};bP.subirScreenShot=function(eB,eC){var eD;eD=null;return cO.Delay(function(){return cO.TryFinally(cO.Delay(function(){bP.firmadoV().Set(true);return cO.Bind(cO.FromContinuations(function(eE){ev.getJSON("https://ipapi.co/json/",function(eF){eE(eF);});}),function(eE){bc.iter(function(eF){eE[eF]=self.navigator[eF];},bz.ofArray(["appVersion","platform","product","productSub","vendor","languages"]));a.obj2Table(eE);return cO.Bind(cO.Sleep(100),function(){return cO.Bind(c$.AsAsync(a.html2canvas(self.document.querySelector("#FormaFirma"))),function(eF){var eG;self.document.body.appendChild(eF);eG=(((et.Curried3(function(eH,eI,eJ){return eH(bD.toSafe(eI)+" "+bD.toSafe(eJ)+".png");}))(a.id))(eC))(bj.Replace(bP.fechaHoraV().Get(),":","."));bP.toBlob(eF,function(eH){var eI,eJ;eI=new a.FormData();eI.append("fname",eG);eI.append("data",eH);ev.ajax((eJ={},eJ.type="POST",eJ.url="/api/subir/"+m.modeloV().Get().idAliado.get_Id()+"/"+eG,eJ.data=eI,eJ.contentType=false,eJ.processData=false,eJ.success=bP.uploaded(),eJ));});self.document.body.removeChild(eF);return _0.ejecutarDataEventoNuevo({$:9,$0:[n.get_LoggedId(),[bG.New(m.modeloV().Get().idAliado,eB,eG,ex.now(),0,bM.Subido,"Firma Electronica")]]});});});});}),function(){br.refrescarData(true);bP.firmadoV().Set(false);});});};bP.toBlob=function(eB,eC){if(!(!eB.toBlob))eB.toBlob(eC);else if(!(!eB.msToBlob))eC(eB.msToBlob());else a.alert("Browser no es compatible: toBlob");};bP.uploaded=function(){_5.$cctor();return _5.uploaded;};bQ.New=function(eB,eC,eD,eE,eF,eG,eH,eI){return{comisionReferidosRegular:eB,comisionReferidosMaster:eC,comisionDescendientesMaster:eD,comisionDescendientesRegular:eE,montoAfiliacion:eF,numeroReferidosMaster:eG,diaCorte1:eH,diaCorte2:eI};};bR.New=function(eB,eC,eD){return{actName:eB,actFunction:eC,actEnabled:eD};};bS.logout=function(){bS.executePolicy(true,ce.SignIn);};bS.userO=function(){_5.$cctor();return _5.userO;};bS.storeValue=function(eB,eC){self.localStorage.setItem(eB,eC);return eC;};bS.appId=function(){_5.$cctor();return _5.appId;};bS.storageGetItem=function(eB){return self.localStorage.getItem(eB);};bS.getAuthority=function(eB,eC){return((((et.Curried(function(eD,eE,eF,eG){return eD("https://"+bD.toSafe(eE)+".b2clogin.com/tfp/"+bD.toSafe(eF)+".onmicrosoft.com/"+bD.toSafe(eG));},4))(a.id))(eB))(eB))(eC);};bS.tenantName=function(){_5.$cctor();return _5.tenantName;};bS.signInPolicy=function(){_5.$cctor();return _5.signInPolicy;};bS.applicationId=function(){_5.$cctor();return _5.applicationId;};bS.authority=function(){_5.$cctor();return _5.authority;};bS.redirectCallback=function(eB,eC){try{!J.Equals(eB,null)?ew.log(["redirectCallback ERROR: ",eB]):void 0;!J.Equals(eC,null)?ew.log(["redirectCallback: ",eC]):null;}catch(eD){(((et.Curried3(function(eE,eF,eG){return eE(bD.prettyPrint(eF)+" "+bD.toSafe(eG));}))(function(eE){ew.log(eE);}))(eD))(eD.stack);}};bS.getTokenO0=function(){var eB;eB=null;return cO.Delay(function(){function eC(eD,eE){return J.Equals(eE,null)?(ew.log(eD+" token is null!!"),null):{$:1,$0:eE};}return bS.userO().Get()==null?(ew.log("getTokenO0 (4): No user connected!"),cO.Return(null)):cO.TryWith(cO.Delay(function(){return cO.Bind(c$.AsAsync(bS.agent().f().acquireTokenSilent(bS.authParms())),function(eD){return cO.Return(eC("getTokenO0 (0): ",eD.accessToken));});}),function(eD){ew.log(["getTokenO0 (1): ",eD.message]);return cO.TryWith(cO.Delay(function(){return cO.Bind(cO.FromContinuations(function(eE,eF){bS.agent().f().handleRedirectCallback(function(eG,eH){try{!J.Equals(eG,null)?(ew.log(["redirectCallback ERROR: ",eG]),eF(new c9(eG.errorMessage))):!J.Equals(eH,null)?(ew.log(["redirectCallback: ",eH]),eE(eH)):null;}catch(eI){(((et.Curried3(function(eJ,eK,eL){return eJ(bD.prettyPrint(eK)+" "+bD.toSafe(eL));}))(function(eJ){ew.log(eJ);}))(eI))(eI.stack);}});return bS.agent().f().acquireTokenRedirect(bS.authParms());}),function(eE){return cO.Return(eC("getTokenO0 (2): ",eE.accessToken));});}),function(eE){ew.log(["getTokenO0 (3): ",eE.message]);return cO.Return(null);});});});};bS.checkUser=function(){var eB;cO.Start((eB=null,cO.Delay(function(){return cO.Bind(cO.Sleep(100),function(){return cO.While(function(){return true;},cO.Delay(function(){var eC,eD;eC=(eD=bS.agent().f().getAccount(),J.Equals(eD,null)?null:{$:1,$0:eD});return cO.Combine(bS.getId(eC)!==bS.getId(bS.userO().Get())?(bS.userO().Set(eC),cO.Zero()):cO.Zero(),cO.Delay(function(){return cO.Combine(J.Equals(bS.userO().Get(),null)?(bS.executePolicy(false,ce.SignIn),cO.Zero()):cO.Zero(),cO.Delay(function(){return cO.Bind(cO.Sleep(9000),function(){return cO.Return(null);});}));}));}));});})),null);};bS.referidoPor=function(){return bS.storageGetItem("referidoPor");};bS.claims=function(eB){var eC;eC=[["oid",eB.idToken.oid],["city",eB.idToken.city],["country",eB.idToken.country],["extension_DateOfBirth",eB.idToken.extension_DateOfBirth],["given_name",eB.idToken.given_name],["postalCode",eB.idToken.postalCode],["state",eB.idToken.state],["streetAddress",eB.idToken.streetAddress],["family_name",eB.idToken.family_name],["emails",T.get(eB.idToken.emails,0)],["referidoPor",bS.referidoPor()]];bS.storageSetItem("referidoPor","");return eC;};bS.executePolicy=function(eB,eC){bS.storeValue("forceLogin",eB?"1":"0");bS.storeValue("goInsideLink",self.location.href);bS.storeValue("policyType",a.String(eC));self.location.replace("blob/Msal.html");};bS.authParms=function(){return dB.New$1(null,null,null,null,null,null,null,null,{$:1,$0:[(((et.Curried3(function(eB,eC,eD){return eB("https://"+bD.toSafe(eC)+".onmicrosoft.com/"+bD.toSafe(eD)+"/user_impersonation");}))(a.id))(bS.tenantName()))(bS.appId()),(((et.Curried3(function(eB,eC,eD){return eB("https://"+bD.toSafe(eC)+".onmicrosoft.com/"+bD.toSafe(eD)+"/Prozper.Admin");}))(a.id))(bS.tenantName()))(bS.appId())]},null,null);};bS.agent=function(){_5.$cctor();return _5.agent;};bS.getId=function(eB){var eC;eC=eB==null?null:{$:1,$0:eB.$0.idToken.oid};return eC==null?"":eC.$0;};bS.getTokenO=function(){_5.$cctor();return _5.getTokenO;};bS.storageSetItem=function(eB,eC){self.localStorage.setItem(eB,eC);};bU.New=function(eB,eC){return{lytName:eB,lytDefinition:eC};};bV.$cctor=function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6;bV.$cctor=a.ignore;function e7(fC){return bj.concat("\n",fC);}function e8(fC){return bK.splitByChar("\n",fC);}function e9(fC){var fD,fE;return cc.array(fC,{$:1,$0:0},{$:1,$0:(fD=0,(fE=T.length(fC)-2,J.Compare(fD,fE)===1?fD:fE))});}function e_(fC){return bj.concat("\n",fC);}function e$(fC){return fC+"T00:00:00";}function fa(fC){var fD;function fE(fG){return k.plugIns().TryFindByKey(fG);}function fF(fG){var fH;fH=k.defaultPlugIn();return fG==null?fH:fG.$0;}fD=function(fG){return fG==null?null:fE(fG.$0);};return function(fG){return fF(fD(fG));};}function fb(fC){var fD;fD=null;return eF.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fc(fC,fD){eF.set_Item(fC,fD);return fD;}function fd(fC,fD){var fE;fE=fb(fC);return fE==null?fc(fC,fD(fC)):fE.$0;}function fe(fC){var fD;fD=null;return eI.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function ff(fC,fD){eI.set_Item(fC,fD);return fD;}function fg(fC,fD){var fE;fE=fe(fC);return fE==null?ff(fC,fD(fC)):fE.$0;}function fh(fC){var fD;fD=null;return eL.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fi(fC,fD){eL.set_Item(fC,fD);return fD;}function fj(fC,fD){var fE;fE=fh(fC);return fE==null?fi(fC,fD(fC)):fE.$0;}function fk(fC){var fD;fD=null;return eO.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fl(fC,fD){eO.set_Item(fC,fD);return fD;}function fm(fC,fD){var fE;fE=fk(fC);return fE==null?fl(fC,fD(fC)):fE.$0;}function fn(fC){var fD;fD=null;return eR.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fo(fC,fD){eR.set_Item(fC,fD);return fD;}function fp(fC,fD){var fE;fE=fn(fC);return fE==null?fo(fC,fD(fC)):fE.$0;}function fq(fC){var fD;fD=null;return eU.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fr(fC,fD){eU.set_Item(fC,fD);return fD;}function fs(fC,fD){var fE;fE=fq(fC);return fE==null?fr(fC,fD(fC)):fE.$0;}function ft(fC){var fD;fD=null;return eX.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fu(fC,fD){eX.set_Item(fC,fD);return fD;}function fv(fC,fD){var fE;fE=ft(fC);return fE==null?fu(fC,fD(fC)):fE.$0;}function fw(fC){var fD;fD=null;return e0.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fx(fC,fD){e0.set_Item(fC,fD);return fD;}function fy(fC,fD){var fE;fE=fw(fC);return fE==null?fx(fC,fD(fC)):fE.$0;}function fz(fC){var fD;fD=null;return e3.TryGetValue(fC,{get:function(){return fD;},set:function(fE){fD=fE;}})?{$:1,$0:fD}:null;}function fA(fC,fD){e3.set_Item(fC,fD);return fD;}function fB(fC,fD){var fE;fE=fz(fC);return fE==null?fA(fC,fD(fC)):fE.$0;}bV.unindentStr=function(fC){return e7(bK.unindent(fC));};bV.skipLastLine=(eB=function(fC){return e9(e8(fC));},function(fC){return e_(eB(fC));});bV.parseDateO2=(eC=cw.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=du.TryParse(fC),fE!=null&&fE.$==1&&(fD=fE.$0,true)),fD];}),function(fC){return eC(e$(fC));});bV.parseDateO=cw.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=du.TryParse(fC),fE!=null&&fE.$==1&&(fD=fE.$0,true)),fD];});bV.parseIntO=cw.tryParseWith(function(fC){var fD;fD=0;return[b0.TryParseInt32(fC,{get:function(){return fD;},set:function(fE){fD=fE;}}),fD];});bV.parseInt64O=cw.tryParseWith(function(fC){var fD;fD=0;return[b0.TryParseInt64(fC,{get:function(){return fD;},set:function(fE){fD=fE;}}),fD];});bV.parseSingleO=cw.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=a.Number(fC),a.isNaN(fE)?false:(fD=fE,true)),fD];});bV.parseDoubleO=cw.tryParseWith(function(fC){var fD,fE;fD=0;return[(fE=a.Number(fC),a.isNaN(fE)?false:(fD=fE,true)),fD];});bV.parseGuidO=cw.tryParseWith(function(fC){var fD;fD=null;return[bt.TryParse(fC,{get:function(){return fD;},set:function(fE){fD=fE;}}),fD];});bV["|Date|_|"]=cw.parseDateO();bV["|Int|_|"]=cw.parseIntO();bV["|Int64|_|"]=cw.parseInt64O();bV["|Single|_|"]=cw.parseSingleO();bV["|Double|_|"]=cw.parseDoubleO();bV["|Guid|_|"]=cw.parseGuidO();bV.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bV.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";bV.observers=cu.Empty;bV.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";bV.init=r.Create(function(){var fC;fC=new cZ.New();cX.defineWebComponent("wcomp-tabstrip",cZ.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});bV.layoutHorizontal=et.Curried(function(fC,fD,fE,fF,fG){return Z.get_Empty();},5);bV.layoutVertical=et.Curried(function(fC,fD,fE,fF,fG){return Z.get_Empty();},5);bV.plugIns=new _6.New$1(function(fC){return fC.plgName;});bV.mainDocV=i.Create$1("AppFramework.AppFwkClient");bV.TemplateFileName="..\\website\\AppFramework.html";bV.defaultPlugIn=l.New("",[],[],[],[],[]);bV.selectionPlugInO=i.Create$1({$:1,$0:"AppFramework"});bV.currentPlugInW=(eD=k.selectionPlugInO().get_View(),p.Map2(function(fC,fD){return(fa(fC))(fD);},k.plugIns().v,eD));bV.currentPlugInV=new cN.New(k.currentPlugInW(),function(fC){k.plugIns().Append(fC);});bV.AppFwkClient=r.Create(function(){var fC,fD,fE,fF,fG,fH,fI,fJ,fK;return(fC=(fD=k.renderQueries(),(fE=k.renderActions(),(fF=k.renderDocs(),(fG=k.renderViews(),(fH=k.renderVars(),(fI=k.renderPlugIns(),U.Make().WithHole({$:0,$0:"plugins",$1:fI})).WithHole({$:2,$0:"pluginname",$1:p.Map(function(fL){return fL.plgName;},k.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:fH})).WithHole({$:0,$0:"views",$1:fG})).WithHole({$:0,$0:"docs",$1:fF})).WithHole({$:0,$0:"actions",$1:fE})).WithHole({$:0,$0:"queries",$1:fD})),(fJ=V.CompleteHoles(fC.k,fC.h,[]),(fK=new S.New(fJ[1],cV.appfwkclient(fJ[0])),(fC.i=fK,fK)))).get_Doc();});bV.actHello=k.newAct("Hello",function(){self.alert("Hello!");});bV.qryDocs=k.newQry("getDocNames",function(){return T.ofSeq(bc.collect(function(fC){return bc.map(function(fD){return fC.plgName+"."+fD.docName;},fC.plgDocs);},(k.plugIns())["var"].Get()));});k.plugIns().Append(l.New("AppFramework",[k.newVar("mainDocV",k.mainDocV())],[],[k.newDoc("AppFwkClient",k.AppFwkClient())],[k.actHello()],[k.qryDocs()]));bV.getMainDoc=r.Create(function(){c0.init(et.Curried(k.horizontal,5),et.Curried(k.vertical,5));cY.init().f();return k.mainDoc();});bV.splitName=k.splitName;bV.createSplitterM=(eE=(eF=new b3.New$5(),[[fb,function(fC){return function(fD){return fd(fC,fD);};}],function(){eF.Clear();}]),(eG=eE[0][1],[function(fC){return(eG(fC))(function(fD){return K.createSplitter(fD[0],fD[1],fD[2],fD[3],fD[4]);});},eE[1]]))[0];bV.createButtonM=(eH=(eI=new b3.New$5(),[[fe,function(fC){return function(fD){return fg(fC,fD);};}],function(){eI.Clear();}]),(eJ=eH[0][1],[function(fC){return(eJ(fC))(function(fD){return K.createButton(fD[0],fD[1],fD[2],fD[3],fD[4]);});},eH[1]]))[0];bV.createInputM=(eK=(eL=new b3.New$5(),[[fh,function(fC){return function(fD){return fj(fC,fD);};}],function(){eL.Clear();}]),(eM=eK[0][1],[function(fC){return(eM(fC))(function(fD){return K.createInput(fD[0],fD[1],fD[2],fD[3]);});},eK[1]]))[0];bV.createTextAreaM=(eN=(eO=new b3.New$5(),[[fk,function(fC){return function(fD){return fm(fC,fD);};}],function(){eO.Clear();}]),(eP=eN[0][1],[function(fC){return(eP(fC))(function(fD){return K.createTextArea(fD[0],fD[1],fD[2],fD[3]);});},eN[1]]))[0];bV.createElementM=(eQ=(eR=new b3.New$5(),[[fn,function(fC){return function(fD){return fp(fC,fD);};}],function(){eR.Clear();}]),(eS=eQ[0][1],[function(fC){return(eS(fC))(function(fD){return K.createElement(fD[0],fD[1],fD[2],fD[3],fD[4]);});},eQ[1]]))[0];bV.createDocM=(eT=(eU=new b3.New$5(),[[fq,function(fC){return function(fD){return fs(fC,fD);};}],function(){eU.Clear();}]),(eV=eT[0][1],[function(fC){return(eV(fC))(function(fD){return K.createDoc(fD[0],fD[1],fD[2],fD[3]);});},eT[1]]))[0];bV.createTemplateM=(eW=(eX=new b3.New$5(),[[ft,function(fC){return function(fD){return fv(fC,fD);};}],function(){eX.Clear();}]),(eY=eW[0][1],[function(fC){return(eY(fC))(function(fD){return K.createTemplate(fD[0],fD[1],fD[2],fD[3],fD[4]);});},eW[1]]))[0];bV.createConcatM=(eZ=(e0=new b3.New$5(),[[fw,function(fC){return function(fD){return fy(fC,fD);};}],function(){e0.Clear();}]),(e1=eZ[0][1],[function(fC){return(e1(fC))(function(fD){return K.createConcat(fD[0],fD[1],fD[2]);});},eZ[1]]))[0];bV.createVarM=(e2=(e3=new b3.New$5(),[[fz,function(fC){return function(fD){return fB(fC,fD);};}],function(){e3.Clear();}]),(e4=e2[0][1],[function(fC){return(e4(fC))(function(fD){return K.createVar(fD[0],fD[1],fD[2]);});},e2[1]]))[0];e5=k.tryGetPlugIn("AppFramework");e5==null?void 0:(e6=e5.$0,k.addPlugIn(l.New(e6.plgName,e6.plgVars,e6.plgViews,e6.plgDocs,e6.plgActions.concat([k.newActF("AddLayout",{$:2,$0:function(fC){return function(fD){return K.addNewLayout(fC,fD);};},$1:"[Name]",$2:"[Layout]"})]),e6.plgQueries)));};bW=M.IdForAuthorize=et.Class({},null,bW);bX.New=function(eB,eC,eD,eE,eF,eG,eH,eI){return{titulo:eB,nombre1:eC,nombre2:eD,apellido1:eE,apellido2:eF,nacionalidad:eG,genero:eH,fechaNacimiento:eI};};bY.Dia01={$:0};bZ=M.TipoAliado=et.Class({toString:function(){return(function(eB){return function(eC){return eB(bb.p$1(eC));};}(a.id))(this);}},null,bZ);bZ.Regular=new bZ({$:1});b0.TryParseInt32=function(eB,eC){return b0.TryParse(eB,-2147483648,2147483647,eC);};b1.$cctor=function(){var eB,eC,eD,eE,eF;b1.$cctor=a.ignore;function eG(eL){return bj.concat("\n",eL);}function eH(eL){return bK.splitByChar("\n",eL);}function eI(eL){var eM,eN;return cc.array(eL,{$:1,$0:0},{$:1,$0:(eM=0,(eN=T.length(eL)-2,J.Compare(eM,eN)===1?eM:eN))});}function eJ(eL){return bj.concat("\n",eL);}function eK(eL){return eL+"T00:00:00";}b1.rtn=function(eL){return[eL];};b1.result=new b9.New();b1.result$1=bF.result();b1.eff=new ca.New();b1.unindentStr=function(eL){return eG(bK.unindent(eL));};b1.skipLastLine=(eB=function(eL){return eI(eH(eL));},function(eL){return eJ(eB(eL));});b1.parseDateO2=(eC=cw.tryParseWith(function(eL){var eM,eN;eM=0;return[(eN=du.TryParse(eL),eN!=null&&eN.$==1&&(eM=eN.$0,true)),eM];}),function(eL){return eC(eK(eL));});b1.parseDateO=cw.tryParseWith(function(eL){var eM,eN;eM=0;return[(eN=du.TryParse(eL),eN!=null&&eN.$==1&&(eM=eN.$0,true)),eM];});b1.parseIntO=cw.tryParseWith(function(eL){var eM;eM=0;return[b0.TryParseInt32(eL,{get:function(){return eM;},set:function(eN){eM=eN;}}),eM];});b1.parseInt64O=cw.tryParseWith(function(eL){var eM;eM=0;return[b0.TryParseInt64(eL,{get:function(){return eM;},set:function(eN){eM=eN;}}),eM];});b1.parseSingleO=cw.tryParseWith(function(eL){var eM,eN;eM=0;return[(eN=a.Number(eL),a.isNaN(eN)?false:(eM=eN,true)),eM];});b1.parseDoubleO=cw.tryParseWith(function(eL){var eM,eN;eM=0;return[(eN=a.Number(eL),a.isNaN(eN)?false:(eM=eN,true)),eM];});b1.parseGuidO=cw.tryParseWith(function(eL){var eM;eM=null;return[bt.TryParse(eL,{get:function(){return eM;},set:function(eN){eM=eN;}}),eM];});b1["|Date|_|"]=cw.parseDateO();b1["|Int|_|"]=cw.parseIntO();b1["|Int64|_|"]=cw.parseInt64O();b1["|Single|_|"]=cw.parseSingleO();b1["|Double|_|"]=cw.parseDoubleO();b1["|Guid|_|"]=cw.parseGuidO();b1.serString=[c1.toJsonString,function(eL){return eL.tryString();}];b1.serFloat=[function(eL){return(function(eM){return function(eN){return eM(bD.prettyPrint(eN));};}(a.id))(eL);},function(eL){return eL.tryFloat();}];b1.serInt=[function(eL){return(function(eM){return function(eN){return eM(bD.prettyPrint(eN));};}(a.id))(eL);},function(eL){var eM;eM=eL.tryInt();return eM==null?null:{$:1,$0:o.toInt(eM.$0)};}];b1.serInt64=[a.String,function(eL){return eL.tryInt();}];b1.serBool=[function(eL){return(function(eM){return function(eN){return eM(bD.prettyPrint(eN));};}(a.id))(eL);},function(eL){return eL.tryBool();}];b1.serDate=[function(eL){return a.String(a.id(eL));},function(eL){var eM;eM=eL.tryInt();return eM==null?null:{$:1,$0:eM.$0};}];b1.serTypedRegisters=new b3.New$5();b1.premisasCalculo=bQ.New(15,25,25,0,75,31,26,28);b1.telVacio=cy.New(cz.Movil,"","","","",false);b1.dirVacio=cA.New(bd.Error(""),cB.Habitacion,"","","",new cC({$:2,$0:""}),new cx({$:3,$0:""}),new cD({$:0,$0:""}));b1.tarVacio=cH.New("",c3.Visa,new cJ({$:0,$0:""}),c2.New(2000,1));b1.ctaVacio=bA.New("","",cR.Ahorro,new bC({$:0,$0:""}),new bB({$:0,$0:""}));b1.modeloVacio=_2.New(new _1({$:0,$0:""}),[],(eD=ex.now(),(new ex(eD)).getFullYear()),(eE=ex.now(),(new ex(eE)).getMonth()+1),M.premisasCalculo(),0);b1.correoVacio=bk.New("",null,null);b1.empty=(eF=bX.New(null,"","","","",cx.USA,cv.Masculino,(new ex(2000,1-1,1)).getTime()),N.New(new _1({$:0,$0:""}),null,null,null,eF,[],[],false,by.Inactivo,bY.Dia01,bZ.Regular,(new ex(2000,1-1,1)).getTime(),(new ex(2000,1-1,1)).getTime(),0,0,0,0,0,0,0,0));b1.serverEndPoint=r.Create(function(){return self.location.protocol==="http:"?"http://localhost:7071/api/":(function(eL){return function(eM){return eL("https://"+bD.toSafe(eM)+"/api/");};}(a.id))(self.location.host);});b1.originalProvider=cm.AjaxProvider();b1.getTokenOA=function(){var eL;eL=null;return cO.Delay(function(){return cO.Return(null);});};};b2=bg.List=et.Class({GetEnumerator:function(){return cr.Get(this);},GetEnumerator0:function(){return cr.Get0(this);}},null,b2);b3=bg.Dictionary=et.Class({set_Item:function(eB,eC){this.set(eB,eC);},set:function(eB,eC){var eD,eE,eF,eG;eD=this;eE=this.hash(eB);eF=this.data[eE];eF==null?(this.count=this.count+1,this.data[eE]=new a.Array({K:eB,V:eC})):(eG=T.tryFindIndex(function(eH){return eD.equals.apply(null,[(o.KeyValue(eH))[0],eB]);},eF),eG==null?(this.count=this.count+1,eF.push({K:eB,V:eC})):eF[eG.$0]={K:eB,V:eC});},get_Item:function(eB){return this.get(eB);},Clear:function(){this.data=[];this.count=0;},TryGetValue:function(eB,eC){var eD,eE,eF;eD=this;eE=this.data[this.hash(eB)];return eE==null?false:(eF=T.tryPick(function(eG){var eH;eH=o.KeyValue(eG);return eD.equals.apply(null,[eH[0],eB])?{$:1,$0:eH[1]}:null;},eE),eF!=null&&eF.$==1&&(eC.set(eF.$0),true));},Remove:function(eB){return this.remove(eB);},ContainsKey:function(eB){var eC,eD;eC=this;eD=this.data[this.hash(eB)];return eD==null?false:T.exists(function(eE){return eC.equals.apply(null,[(o.KeyValue(eE))[0],eB]);},eD);},Add:function(eB,eC){this.add(eB,eC);},get:function(eB){var eC,eD;eC=this;eD=this.data[this.hash(eB)];return eD==null?c4.notPresent():T.pick(function(eE){var eF;eF=o.KeyValue(eE);return eC.equals.apply(null,[eF[0],eB])?{$:1,$0:eF[1]}:null;},eD);},get_Keys:function(){return new d_.New(this);},remove:function(eB){var eC,eD,eE,eF;eC=this;eD=this.hash(eB);eE=this.data[eD];return eE==null?false:(eF=T.filter(function(eG){return!eC.equals.apply(null,[(o.KeyValue(eG))[0],eB]);},eE),T.length(eF)<eE.length&&(this.count=this.count-1,this.data[eD]=eF,true));},add:function(eB,eC){var eD,eE,eF;eD=this;eE=this.hash(eB);eF=this.data[eE];eF==null?(this.count=this.count+1,this.data[eE]=new a.Array({K:eB,V:eC})):(T.exists(function(eG){return eD.equals.apply(null,[(o.KeyValue(eG))[0],eB]);},eF)?c4.alreadyAdded():void 0,this.count=this.count+1,eF.push({K:eB,V:eC}));},GetEnumerator:function(){return cr.Get0(this);},GetEnumerator0:function(){return cr.Get0(T.concat(I.GetFieldValues(this.data)));}},g,b3);b3.New$5=et.Ctor(function(){b3.New$6.call(this,[],J.Equals,J.Hash);},b3);b3.New$6=et.Ctor(function(eB,eC,eD){var eE,eF;g.New.call(this);this.equals=eC;this.hash=eD;this.count=0;this.data=[];eE=cr.Get(eB);try{while(eE.MoveNext()){eF=eE.Current();this.set(eF.K,eF.V);}}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}},b3);b4=bg.HashSet=et.Class({Add:function(eB){return this.add(eB);},Contains:function(eB){var eC;eC=this.data[this.hash(eB)];return eC==null?false:this.arrContains(eB,eC);},add:function(eB){var eC,eD;eC=this.hash(eB);eD=this.data[eC];return eD==null?(this.data[eC]=[eB],this.count=this.count+1,true):this.arrContains(eB,eD)?false:(eD.push(eB),this.count=this.count+1,true);},arrContains:function(eB,eC){var eD,eE,eF,eG;eD=true;eE=0;eG=eC.length;while(eD&&eE<eG)if(this.equals.apply(null,[eC[eE],eB]))eD=false;else eE=eE+1;return!eD;},ExceptWith:function(eB){var eC;eC=cr.Get(eB);try{while(eC.MoveNext())this.Remove(eC.Current());}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(eB){var eC,eD,eE,eF;eC=0;eD=dZ.concat(this.data);for(eE=0,eF=eD.length-1;eE<=eF;eE++)T.set(eB,eE,eD[eE]);},IntersectWith:function(eB){var eC,eD,eE,eF,eG;eC=new b4.New$4(eB,this.equals,this.hash);eD=dZ.concat(this.data);for(eE=0,eF=eD.length-1;eE<=eF;eE++){eG=eD[eE];!eC.Contains(eG)?this.Remove(eG):void 0;}},Remove:function(eB){var eC;eC=this.data[this.hash(eB)];return eC==null?false:this.arrRemove(eB,eC)&&(this.count=this.count-1,true);},arrRemove:function(eB,eC){var eD,eE,eF,eG;eD=true;eE=0;eG=eC.length;while(eD&&eE<eG)if(this.equals.apply(null,[eC[eE],eB])){eC.splice.apply(eC,[eE,1]);eD=false;}else eE=eE+1;return!eD;},GetEnumerator:function(){return cr.Get(dZ.concat(this.data));},GetEnumerator0:function(){return cr.Get(dZ.concat(this.data));}},g,b4);b4.New$3=et.Ctor(function(){b4.New$4.call(this,[],J.Equals,J.Hash);},b4);b4.New$4=et.Ctor(function(eB,eC,eD){var eE;g.New.call(this);this.equals=eC;this.hash=eD;this.data=[];this.count=0;eE=cr.Get(eB);try{while(eE.MoveNext())this.add(eE.Current());}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}},b4);b4.New$2=et.Ctor(function(eB){b4.New$4.call(this,eB,J.Equals,J.Hash);},b4);b5.Box=a.id;b7.StartTo=function(eB,eC){cO.StartWithContinuations(eB,eC,function(eD){b7.OnError(eD);},a.ignore,null);};b7.OnError=function(eB){return ew.log("WebSharper UI: Uncaught asynchronous exception",eB);};b0.TryParseInt64=function(eB,eC){return b0.TryParse(eB,-9223372036854775808,9223372036854775807,eC);};b8.Int=function(){b8.set_counter(b8.counter()+1);return b8.counter();};b8.Id=function(){b8.set_counter(b8.counter()+1);return"uid"+a.String(b8.counter());};b8.set_counter=function(eB){dy.$cctor();dy.counter=eB;};b8.counter=function(){dy.$cctor();return dy.counter;};b9=bF.Builder=et.Class({},g,b9);b9.New$1=et.Ctor(function(){g.New.call(this);},b9);b_=bF.BuilderP=et.Class({},g,b_);b_.New=et.Ctor(function(){g.New.call(this);},b_);ca=b$.EffBuilder=et.Class({},g,ca);ca.New$1=et.Ctor(function(){g.New.call(this);},ca);cb=bp.AsyncResultBuilderP=et.Class({},g,cb);cb.New=et.Ctor(function(){g.New.call(this);},cb);cc.array=function(eB,eC,eD){return eC==null?eD!=null&&eD.$==1?eB.slice(0,eD.$0+1):[]:eD==null?eB.slice(eC.$0):eB.slice(eC.$0,eD.$0+1);};cc.string=function(eB,eC,eD){return eC==null?eD!=null&&eD.$==1?eB.slice(0,eD.$0+1):"":eD==null?eB.slice(eC.$0):eB.slice(eC.$0,eD.$0+1);};ce=cd.Policy=et.Class({toString:function(){return bj.ReplaceChar(bd["String.get_toUnderscore$1"]((function(eB){return function(eC){return eB(X.p$1(eC));};}(a.id))(this)),"_"," ");}},null,ce);ce.SignIn=new ce({$:0});ce.SignUp=new ce({$:1});ce.EditProfile=new ce({$:2});ce.ResetPassword=new ce({$:3});cf.New$1=function(eB,eC,eD,eE){return c8.newPojoOpt([cd.op_EqualsEqualsGreater("auth",eB),cd.op_EqualsEqualsGreater("cache",eC),cd.op_EqualsEqualsGreater("system",eD),cd.op_EqualsEqualsGreater("framework",eE)]);};cg.New$1=function(eB,eC,eD,eE,eF,eG){return c8.newPojoOpt([cd.op_MinusMinusGreater("clientId",eB),cd.op_EqualsEqualsGreater("authority",eC),cd.op_EqualsEqualsGreater("validateAuthority",eD),cd.op_EqualsEqualsGreater("redirectUri",eE),cd.op_EqualsEqualsGreater("postLogoutRedirectUri",eF),cd.op_EqualsEqualsGreater("navigateToLoginRequestUrl",eG)]);};ci=ch.MailboxProcessor=et.Class({PostAndAsyncReply:function(eB,eC){var eD,eE;eD=this;eE=null;return cO.Delay(function(){return cO.Bind(eD.PostAndTryAsyncReply(eB,eC),function(eF){var eG,eH;if(eF!=null&&eF.$==1)eH=eF.$0;else throw new c_.New();return cO.Return(eH);});});},PostAndTryAsyncReply:function(eB,eC){var eD,eE,eF;function eG(eH){var eJ;function eI(eK){return{$:1,$0:eK};}if(eE<0){eD.mailbox.AddLast(eB(function(eK){return eH(eI(eK));}));eD.resume();}else{eJ=[true];eD.mailbox.AddLast(eB(function(eK){if(eJ[0]){eJ[0]=false;eH({$:1,$0:eK});}}));eD.resume();a.setTimeout(function(){if(eJ[0]){eJ[0]=false;eH(null);}},eE);}}eD=this;eE=(eF=this.get_DefaultTimeout(),eC==null?eF:eC.$0);return cO.FromContinuations(function(eH,eI,eJ){return eG.apply(null,[eH,eI,eJ]);});},get_DefaultTimeout:function(){return this.DefaultTimeout;},Receive:function(eB){var eC,eD;eC=this;eD=null;return cO.Delay(function(){return cO.Bind(eC.TryReceive(eB),function(eE){var eF,eG;if(eE!=null&&eE.$==1)eG=eE.$0;else throw new c_.New();return cO.Return(eG);});});},resume:function(){var eB;eB=this.savedCont;eB!=null&&eB.$==1?(this.savedCont=null,this.startAsync(eB.$0)):void 0;},Start:function(){var eB,eC;eB=this;this.started?o.FailWith("The MailboxProcessor has already been started."):(this.started=true,eB.startAsync((eC=null,cO.Delay(function(){return cO.TryWith(cO.Delay(function(){return cO.Bind(eB.initial(eB),function(){return cO.Return(null);});}),function(eD){eB.errorEvent.event.Trigger(eD);return cO.Zero();});}))));},TryReceive:function(eB){var eC,eD,eE;function eF(eG){var eH,eI,eJ,eK;if(J.Equals(eC.mailbox.n,null)){if(eD<0){eC.savedCont={$:1,$0:(eH=null,cO.Delay(function(){eG({$:1,$0:eC.dequeue()});return cO.Zero();}))};}else{eI=[true];eJ=a.setTimeout(function(){if(eI[0]){eI[0]=false;eC.savedCont=null;eG(null);}},eD);eC.savedCont={$:1,$0:(eK=null,cO.Delay(function(){return eI[0]?(eI[0]=false,a.clearTimeout(eJ),eG({$:1,$0:eC.dequeue()}),cO.Zero()):cO.Zero();}))};}}else eG({$:1,$0:eC.dequeue()});}eC=this;eD=(eE=this.get_DefaultTimeout(),eB==null?eE:eB.$0);return cO.FromContinuations(function(eG,eH,eI){return eF.apply(null,[eG,eH,eI]);});},startAsync:function(eB){cO.Start(eB,this.token);},dequeue:function(){var eB;eB=this.mailbox.n.v;this.mailbox.RemoveFirst();return eB;}},g,ci);ci.Start=function(eB,eC){var eD;eD=new ci.New(eB,eC);eD.Start();return eD;};ci.New=et.Ctor(function(eB,eC){var eD,eE;function eF(eG){return eD.resume();}eD=this;g.New.call(this);this.initial=eB;this.token=eC;this.started=false;this.errorEvent=new dz.New();this.mailbox=new dA.New();this.savedCont=null;eE=this.token;eE==null?void 0:cO.Register(eE.$0,function(){eF();});this.DefaultTimeout=-1;},ci);cj.callA=function(eB,eC){return cj.iterA(eB,function(eD){var eE,eF,eG;eE=eD[0];eF=eD[1];eG=null;return cO.Delay(function(){return cO.Bind(eC(eF),function(eH){eE(eH);return cO.Zero();});});});};cj.iterA=function(eB,eC){return ci.Start(function(eD){var eE;eE=null;return cO.Delay(function(){return cO.While(function(){return true;},cO.Delay(function(){return cO.TryWith(cO.Delay(function(){return cO.Bind(eD.Receive(null),function(eF){return cO.Bind(eC(eF),function(){return cO.Return(null);});});}),function(eF){eB(eF);return cO.Zero();});}));});},null);};bd.print$1=function(eB){if(typeof eB=="string")((function(eC){return function(eD){return eC(bD.toSafe(eD));};}(function(eC){ew.log(eC);}))(eB));else((function(eC){return function(eD){return eC(bD.prettyPrint(eD));};}(function(eC){ew.log(eC);}))(eB));};bd["String.Left$1"]=function(eB,eC){return eC<0?bd["String.Substring2$1"](eB,0,eB.length+eC):bd["String.Substring2$1"](eB,0,eC);};bd.Error$1=function(eB){return{$:1,$0:eB};};bd["String.Right$1"]=function(eB,eC){var eD,eE;return bd["String.Substring2$1"](eB,(eD=0,(eE=eB.length-eC,J.Compare(eD,eE)===1?eD:eE)),eB.length);};bd["String.Substring2$1"]=function(eB,eC,eD){var eE,eF;while(true){if(eD<=0)return"";else if(eC<0){eE=eC;eC=0;eD=eD+eE;}else return eC>=eB.length?"":bj.Substring(eB,eC,(eF=eB.length-eC,J.Compare(eD,eF)===-1?eD:eF));}};bd["String.get_toUnderscore$1"]=function(eB,eC){return T.ofSeq(bc.collect(a.id,bc.mapi(function(eD,eE){return eD>0&&ef.IsUpper(eE)?bz.ofArray(["_",eE]):bz.ofArray([eE]);},eB))).join("");};j.REGEX$2=function(eB,eC,eD){var eE;return eD===null?null:(eE=(new a.String(eD)).match(new a.RegExp(eB,eC)),J.Equals(eE,null)?null:!J.Equals(eE,null)&&eE.length===0?null:{$:1,$0:eE});};j.rexEmail$1=function(){_5.$cctor();return _5.rexEmail;};ck.DefaultEP={$:0};cl.InstallHash=function(eB,eC){var eD;eD=i.Create$1(cl.getCurrentHash(function(eE){return dc.Parse(eC,dd.FromHash(eE,{$:1,$0:true}));},eB));cl.InstallHashInto(eD,eB,eC);return eD;};cl.InstallHashInto=function(eB,eC,eD){function eE(eH){return dc.Parse(eD,dd.FromHash(eH,{$:1,$0:true}));}function eF(){return cl.getCurrentHash(eE,eC);}function eG(eH){if(!J.Equals(eB.Get(),eH))eB.Set(eH);}self.addEventListener("popstate",function(){return eG(eF());},false);self.addEventListener("hashchange",function(){return eG(eF());},false);self.document.body.addEventListener("click",function(eH){var eI,eJ,eK;eI=(eJ=cl.findLinkHref(eH.target),eJ==null?null:(eK=eJ.$0,bj.StartsWith(eK,"#")?eE(eK):null));return eI==null?null:(eG(eI.$0),eH.preventDefault());},false);p.Sink(function(eH){var eI;if(!J.Equals(eH,eF())){eI=dc.HashLink(eD,eH);self.history.pushState(null,null,eI);}},eB.get_View());};cl.getCurrentHash=function(eB,eC){var eD,eE;eD=self.location.hash;eE=eB(eD);return eE==null?((function(eF){return function(eG){return eF("Failed to parse route: "+bD.toSafe(eG));};}(function(eF){ew.log(eF);}))(eD),eC):eE.$0;};cl.findLinkHref=function(eB){while(true)if(eB.tagName==="A")return L.ofObj(eB.getAttribute("href"));else if(eB===self.document.body)return null;else eB=eB.parentNode;};cm.set_EndPoint=function(eB){de.$cctor();de.EndPoint=eB;};cm.AjaxProvider=function(){de.$cctor();return de.AjaxProvider;};cm.makePayload=function(eB){return ey.stringify(eB);};cm.makeHeaders=function(eB){return{"content-type":"application/json","x-websharper-rpc":eB};};cm.EndPoint=function(){de.$cctor();return de.EndPoint;};cm.ajax=function(eB,eC,eD,eE,eF,eG,eH){var eI,eJ,eK;eI=new a.XMLHttpRequest();eJ=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");eI.open("POST",eC,eB);if(eB==true)eI.withCredentials=true;for(var eM in eD)eI.setRequestHeader(eM,eD[eM]);if(eJ)eI.setRequestHeader("x-csrftoken",eJ);function eL(){var eN;if(eI.status==200)eF(eI.responseText);else if(eH&&eI.status==403&&eI.responseText=="CSRF")eH();else{eN="Response status is not 200: ";eG(new c9(eN+eI.status));}}if("onload"in eI)eI.onload=eI.onerror=eI.onabort=eL;else eI.onreadystatechange=function(){if(eI.readyState==4)eL();};eI.send(eE);};cn.serverEndPoint=function(){b1.$cctor();return b1.serverEndPoint;};co=M.IdPayment=et.Class({get_Id:function(){return this.$0;}},null,co);cp.New=function(eB,eC){return{qryName:eB,qryFunction:eC};};_4.Obsolete=function(eB){var eC,eD,eE,eF,eG;eD=eB.s;if(eD==null||(eD!=null&&eD.$==2?(eC=eD.$1,false):eD!=null&&eD.$==3?(eC=eD.$1,false):true))void 0;else{eB.s=null;for(eE=0,eF=T.length(eC)-1;eE<=eF;eE++){eG=T.get(eC,eE);typeof eG=="object"?function(eH){_4.Obsolete(eH);}(eG):eG();}}};_4.New=function(eB){return{s:eB};};cq=bg.FSharpMap=et.Class({TryGetValue:function(eB,eC){var eD;eD=this.TryFind(eB);return eD!=null&&eD.$==1&&(eC.set(eD.$0),true);},get_Item:function(eB){var eC;eC=this.TryFind(eB);return eC==null?o.FailWith("The given key was not present in the dictionary."):eC.$0;},TryFind:function(eB){var eC;eC=ct.TryFind(dG.New(eB,void 0),this.tree);return eC==null?null:{$:1,$0:eC.$0.Value};},Equals:function(eB){return this.get_Count()===eB.get_Count()&&bc.forall2(J.Equals,this,eB);},GetEnumerator$1:function(){return cr.Get(bc.map(function(eB){return{K:eB.Key,V:eB.Value};},ct.Enumerate(false,this.tree)));},get_Count:function(){var eB;eB=this.tree;return eB==null?0:eB.Count;},GetHashCode:function(){return J.Hash(T.ofSeq(this));},Add:function(eB,eC){return new cq.New$1(ct.Add(dG.New(eB,eC),this.tree));},get_IsEmpty:function(){return this.tree==null;},get_Tree:function(){return this.tree;},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(eB){return bc.compareWith(J.Compare,this,eB);},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,cq);cq.New=et.Ctor(function(eB){cq.New$1.call(this,df.fromSeq(eB));},cq);cq.New$1=et.Ctor(function(eB){g.New.call(this);this.tree=eB;},cq);cr.Get=function(eB){return eB instanceof a.Array?cr.ArrayEnumerator(eB):J.Equals(typeof eB,"string")?cr.StringEnumerator(eB):eB.GetEnumerator();};cr.ArrayEnumerator=function(eB){return new cs.New(0,null,function(eC){var eD;eD=eC.s;return eD<T.length(eB)&&(eC.c=T.get(eB,eD),eC.s=eD+1,true);},void 0);};cr.StringEnumerator=function(eB){return new cs.New(0,null,function(eC){var eD;eD=eC.s;return eD<eB.length&&(eC.c=eB[eD],eC.s=eD+1,true);},void 0);};cr.Get0=function(eB){return eB instanceof a.Array?cr.ArrayEnumerator(eB):J.Equals(typeof eB,"string")?cr.StringEnumerator(eB):"GetEnumerator0"in eB?eB.GetEnumerator0():eB.GetEnumerator();};cs=cr.T=et.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,cs);cs.New=et.Ctor(function(eB,eC,eD,eE){g.New.call(this);this.s=eB;this.c=eC;this.n=eD;this.d=eE;},cs);ct.OfSeq=function(eB){var eC;eC=T.ofSeq(bc.distinct(eB));T.sortInPlace(eC);return ct.Build(eC,0,eC.length-1);};ct.Contains=function(eB,eC){return!((ct.Lookup(eB,eC))[0]==null);};ct.Remove=function(eB,eC){var eD,eE,eF,eG;eD=ct.Lookup(eB,eC);eE=eD[0];eF=eD[1];return eE==null?eC:eE.Right==null?ct.Rebuild(eF,eE.Left):eE.Left==null?ct.Rebuild(eF,eE.Right):ct.Rebuild(eF,(eG=T.ofSeq(bc.append(ct.Enumerate(false,eE.Left),ct.Enumerate(false,eE.Right))),ct.Build(eG,0,eG.length-1)));};ct.Add=function(eB,eC){return ct.Put(function(eD,eE){return eE;},eB,eC);};ct.TryFind=function(eB,eC){var eD;eD=(ct.Lookup(eB,eC))[0];return eD==null?null:{$:1,$0:eD.Node};};ct.Build=function(eB,eC,eD){var eE,eF,eG;return eD-eC+1<=0?null:(eE=(eC+eD)/2>>0,(eF=ct.Build(eB,eC,eE-1),(eG=ct.Build(eB,eE+1,eD),ct.Branch(T.get(eB,eE),eF,eG))));};ct.Lookup=function(eB,eC){var eD,eE,eF,eG;eD=[];eE=eC;eF=true;while(eF)if(eE==null)eF=false;else{eG=J.Compare(eB,eE.Node);eG===0?eF=false:eG===1?(eD.unshift([true,eE.Node,eE.Left]),eE=eE.Right):(eD.unshift([false,eE.Node,eE.Right]),eE=eE.Left);}return[eE,eD];};ct.Rebuild=function(eB,eC){var eD,eF,eG,eH,eI,eJ,eK,eL,eM,eN;function eE(eO){return eO==null?0:eO.Height;}eD=eC;for(eF=0,eG=T.length(eB)-1;eF<=eG;eF++){eD=(eH=T.get(eB,eF),eH[0]?(eI=eH[1],(eJ=eH[2],eE(eD)>eE(eJ)+1?eE(eD.Left)===eE(eD.Right)+1?(eK=eD.Left,ct.Branch(eK.Node,ct.Branch(eI,eJ,eK.Left),ct.Branch(eD.Node,eK.Right,eD.Right))):ct.Branch(eD.Node,ct.Branch(eI,eJ,eD.Left),eD.Right):ct.Branch(eI,eJ,eD))):(eL=eH[1],(eM=eH[2],eE(eD)>eE(eM)+1?eE(eD.Right)===eE(eD.Left)+1?(eN=eD.Right,ct.Branch(eN.Node,ct.Branch(eD.Node,eD.Left,eN.Left),ct.Branch(eL,eN.Right,eM))):ct.Branch(eD.Node,eD.Left,ct.Branch(eL,eD.Right,eM)):ct.Branch(eL,eD,eM))));}return eD;};ct.Put=function(eB,eC,eD){var eE,eF;eE=ct.Lookup(eC,eD);eF=eE[0];return eF==null?ct.Rebuild(eE[1],ct.Branch(eC,null,null)):ct.Rebuild(eE[1],ct.Branch(eB(eF.Node,eC),eF.Left,eF.Right));};ct.Branch=function(eB,eC,eD){var eE,eF;return dg.New(eB,eC,eD,1+(eE=eC==null?0:eC.Height,(eF=eD==null?0:eD.Height,J.Compare(eE,eF)===1?eE:eF)),1+(eC==null?0:eC.Count)+(eD==null?0:eD.Count));};ct.Enumerate=function(eB,eC){function eD(eE,eF){var eG;while(true)if(eE==null)return eF.$==1?{$:1,$0:[eF.$0[0],[eF.$0[1],eF.$1]]}:null;else if(eB){eG=eE;eE=eG.Right;eF=new cu({$:1,$0:[eG.Node,eG.Left],$1:eF});}else{eG=eE;eE=eG.Left;eF=new cu({$:1,$0:[eG.Node,eG.Right],$1:eF});}}return bc.unfold(function(eE){return eD(eE[0],eE[1]);},[eC,cu.Empty]);};bc.tryHead=function(eB){var eC;eC=cr.Get(eB);try{return eC.MoveNext()?{$:1,$0:eC.Current()}:null;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};T.groupBy=function(eB,eC){var eD,eE,eF,eG,eH,eI;eD=new b3.New$5();eE=[];for(eF=0,eG=T.length(eC)-1;eF<=eG;eF++){eH=eC[eF];eI=eB(eH);eD.ContainsKey(eI)?eD.get_Item(eI).push(eH):(eE.push(eI),eD.Add(eI,[eH]));}T.mapInPlace(function(eJ){return[eJ,eD.get_Item(eJ)];},eE);return eE;};bc.tryItem=function(eB,eC){var eD,eE,eF;if(eB<0)return null;else{eD=0;eE=cr.Get(eC);try{eF=true;while(eF&&eD<=eB)if(eE.MoveNext())eD=eD+1;else eF=false;return eF?{$:1,$0:eE.Current()}:null;}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}}};bc.last=function(eB){var eC,eD;eC=cr.Get(eB);try{if(!eC.MoveNext())eD=bc.insufficient();else{while(eC.MoveNext());eD=eC.Current();}return eD;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};T.mapInPlace=function(eB,eC){var eD,eE;for(eD=0,eE=eC.length-1;eD<=eE;eD++)eC[eD]=eB(eC[eD]);};T.mapiInPlace=function(eB,eC){var eD,eE;for(eD=0,eE=eC.length-1;eD<=eE;eD++)eC[eD]=eB(eD,eC[eD]);return eC;};bc.insufficient=function(){return o.FailWith("The input sequence has an insufficient number of elements.");};bc.nonNegative=function(){return o.FailWith("The input must be non-negative.");};cu=bz.T=et.Class({GetEnumerator:function(){return new cs.New(this,null,function(eB){var eC;eC=eB.s;return eC.$==0?false:(eB.c=eC.$0,eB.s=eC.$1,true);},void 0);},GetEnumerator0:function(){return cr.Get(this);}},null,cu);cu.Empty=new cu({$:0});cv.tryParse=function(eB){var eC;eC=bj.Trim(eB);return eC==="Masculino"?{$:1,$0:cv.Masculino}:eC==="Femenino"?{$:1,$0:cv.Femenino}:eC==="Empresa"?{$:1,$0:cv.Empresa}:null;};cv.Masculino={$:0};cv.Femenino={$:1};cv.Empresa={$:2};cw.parseDateO2=function(){b1.$cctor();return b1.parseDateO2;};cw.tryParseWith=function(eB){function eC(eD,eE){return eD?{$:1,$0:eE}:null;}return function(eD){return eC.apply(null,eB(eD));};};cw.parseDateO=function(){b1.$cctor();return b1.parseDateO;};cw.parseIntO=function(){b1.$cctor();return b1.parseIntO;};cw.parseInt64O=function(){b1.$cctor();return b1.parseInt64O;};cw.parseSingleO=function(){b1.$cctor();return b1.parseSingleO;};cw.parseDoubleO=function(){b1.$cctor();return b1.parseDoubleO;};cw.parseGuidO=function(){b1.$cctor();return b1.parseGuidO;};cx=M.Pais=et.Class({toString:function(){return this.$==3?this.$0:(function(eB){return function(eC){return eB(bb.p$2(eC));};}(a.id))(this);}},null,cx);cx.tryParse=function(eB){var eC,eD;eD=bj.Trim(eB).toUpperCase();switch(eD){case"":return null;case"USA":case"AMERICA":case"E.E.U.U.":case"US":case"UNITED STATES OF AMERICA":case"UNITED STATES":case"EEUU":return{$:1,$0:cx.USA};case"VENEZUELA":return{$:1,$0:cx.Venezuela};case"ARGENTINA":return{$:1,$0:cx.Argentina};default:return{$:1,$0:new cx({$:3,$0:bj.Trim(eB)})};}};cx.USA=new cx({$:0});cx.Venezuela=new cx({$:1});cx.Argentina=new cx({$:2});cy.New=function(eB,eC,eD,eE,eF,eG){return{tipoTelefono:eB,codigoPais:eC,codigoArea:eD,numero:eE,extension:eF,mensajes:eG};};cz=M.TipoTelefono=et.Class({toString:function(){return(function(eB){return function(eC){return eB(bb.p$10(eC));};}(a.id))(this);}},null,cz);cz.get_tryParse=function(){return function(eB){return eB==="Movil"?{$:1,$0:cz.Movil}:eB==="Oficina"?{$:1,$0:cz.Oficina}:eB==="Habitacion"?{$:1,$0:cz.Habitacion}:null;};};cz.Movil=new cz({$:0});cz.Oficina=new cz({$:1});cz.Habitacion=new cz({$:2});cA.New=function(eB,eC,eD,eE,eF,eG,eH,eI){return{authorizeIdR:eB,tipoDireccion:eC,linea1:eD,linea2:eE,ciudad:eF,estado:eG,pais:eH,zonaPostal:eI};};cB=M.TipoDireccion=et.Class({toString:function(){return this.$==3?this.$0:(function(eB){return function(eC){return eB(bb.p$9(eC));};}(a.id))(this);}},null,cB);cB.tryParse=function(eB){var eC;eC=bj.Trim(eB);return eC===""?null:eC==="Habitacion"?{$:1,$0:cB.Habitacion}:eC==="Oficina"?{$:1,$0:cB.Oficina}:eC==="ServicioPostal"?{$:1,$0:cB.ServicioPostal}:{$:1,$0:new cB({$:3,$0:eC})};};cB.Habitacion=new cB({$:0});cB.Oficina=new cB({$:1});cB.ServicioPostal=new cB({$:2});cC=M.Estado=et.Class({toString:function(){return this.$==2?this.$0:(function(eB){return function(eC){return eB(bb.p$3(eC));};}(a.id))(this);}},null,cC);cC.tryParse=function(eB){var eC,eD;eD=bj.Trim(eB).toUpperCase();switch(eD){case"":return null;case"TEXAS":case"TX":return{$:1,$0:cC.Texas};case"FLORIDA":case"FL":return{$:1,$0:cC.Florida};default:return{$:1,$0:new cC({$:2,$0:bj.Trim(eB)})};}};cC.Texas=new cC({$:0});cC.Florida=new cC({$:1});cD=M.ZonaPostal=et.Class({toString:function(){return this.$0;}},null,cD);cD.tryParse=function(eB){return bj.Trim(eB)!==""?{$:1,$0:new cD({$:0,$0:bj.Trim(eB)})}:null;};cE.rtn=function(eB){return cO.Return({$:0,$0:eB});};cE.bind=function(eB,eC){var eD;eD=null;return cO.Delay(function(){return cO.Bind(eC,function(eE){return eE.$==1?cO.Return(bd.Error$1(eE.$0)):eB(eE.$0);});});};cE.iterA=function(eB,eC,eD){function eE(eG){bF.iter$1(eB,eC,eG);}function eF(eG){return cO.Return(eG);}cO.Start(cO.Bind(eD,function(eG){return eF(eE(eG));}),null);};cE.map=function(eB,eC){return cE.bind(function(eD){return cE.rtn(eB(eD));},eC);};cE.absorbO=function(eB,eC){function eD(eF){return bF.absorbO$1(eB,eF);}function eE(eF){return cO.Return(eF);}return cO.Bind(eC,function(eF){return eE(eD(eF));});};cE.rtnR=function(eB){return cO.Return(eB);};cE.whileLoop=function(eB,eC){return eB()?cE.bind(function(){return cE.whileLoop(eB,eC);},eC()):cE.rtn();};cF=cm.AjaxRemotingProvider=et.Class({AsyncBase:function(eB,eC){var eD,eE;eD=this;eE=null;return cO.Delay(function(){var eF,eG;eF=cm.makeHeaders(eB);eG=cm.makePayload(eC);return cO.Bind(cO.GetCT(),function(eH){return cO.FromContinuations(function(eI,eJ,eK){var eL,eM,eN;function eO(eP){return eL[0]?(eL[0]=false,eK(new d5.New(eH))):null;}eL=[true];eM=cO.Register(eH,function(){eO();});eN=eD.get_EndPoint();return cm.AjaxProvider().Async(eN,eF,eG,function(eP){if(eL[0]){eL[0]=false;eM.Dispose();eI(eg.Activate(ey.parse(eP)));}},function(eP){if(eL[0]){eL[0]=false;eM.Dispose();eJ(eP);}});});});});},get_EndPoint:function(){return cm.EndPoint();},Async:function(eB,eC){return this.AsyncBase(eB,eC);}},g,cF);cF.New=et.Ctor(function(){g.New.call(this);},cF);cG.replace=function(eB,eC,eD){return T.ofSeq(bc.delay(function(){return bc.append(eB>0?cc.array(eD,null,{$:1,$0:eB-1}):[],bc.delay(function(){return bc.append([eC],bc.delay(function(){return eB<T.length(eD)?cc.array(eD,{$:1,$0:eB+1},null):[];}));}));}));};cG.remove=function(eB,eC){return T.ofSeq(bc.delay(function(){return bc.append(eB>0?cc.array(eC,null,{$:1,$0:eB-1}):[],bc.delay(function(){return eB<T.length(eC)?cc.array(eC,{$:1,$0:eB+1},null):[];}));}));};cH.New=function(eB,eC,eD,eE){return{titular:eB,tipoTarjeta:eC,numero:eD,expiracion:eE};};cI=M.Subscripcion=et.Class({get_Short:function(){return((((((et.Curried(function(eB,eC,eD,eE,eF,eG){return eB(bD.toSafe(eC)+" "+bD.toSafe(eD)+" $"+a.String(eE)+".00 "+bD.toSafe(eF)+" "+a.String(eG));},6))(a.id))(this.idSubscripcion.get_Id()))(bJ.toYYYYMMDD("-",this.inicio)))(this.monto))(this.descripcion))(this.status);}},null,cI);cJ=M.NumeroTarjeta=et.Class({get_Id:function(){return this.$0;}},null,cJ);cK.formaDocO=function(eB){var eC;return cK.formaDoc(i.Lens(eB,(eC=[M.ctaVacio(),"",false],function(eD){return eD==null?eC:eD.$0;}),function(eD,eE){return{$:1,$0:eE};}));};cK.formaDoc=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN;function eO(eP,eQ,eR){eD.Hole("titular").Set(eP.titular);eD.Hole("banco").Set(eP.banco);eD.Hole("tipocuenta").Set((function(eS){return function(eT){return eS(a.String(eT));};}(a.id))(eP.tipo));eD.Hole("numero").Set(eP.numero.$0);eD.Hole("routing").Set(eP.routing.$0);}eC=p.Map(function(eP){return bu.thr3(eP[0],eP[1],eP[2]);},eB.get_View());eD=(eE=(eF=cT.DynamicPred("disabled",eC,p.Const("")),(eG=cT.DynamicPred("disabled",eC,p.Const("")),(eH=cT.DynamicPred("disabled",eC,p.Const("")),(eI=cT.DynamicPred("disabled",eC,p.Const("")),(eJ=cT.DynamicPred("disabled",eC,p.Const("")),(eK=Z.EmbedView(p.Map(bu.crearOptions,bu.tiposCta().get_View())),U.Make().WithHole({$:0,$0:"tiposcuenta",$1:eK})).WithHole({$:2,$0:"mensaje",$1:p.Map(function(eP){return bu.snd3(eP[0],eP[1],eP[2]);},eB.get_View())}).WithHole({$:3,$0:"disabled1",$1:eJ})).WithHole({$:3,$0:"disabled2",$1:eI})).WithHole({$:3,$0:"disabled3",$1:eH})).WithHole({$:3,$0:"disabled4",$1:eG})).WithHole({$:3,$0:"disabled5",$1:eF})),(eL=V.CompleteHoles(eE.k,eE.h,[["tipocuenta",0],["titular",0],["numero",0],["banco",0],["routing",0]]),(eM=new S.New(eL[1],W.cuentabancaria(eL[0])),(eE.i=eM,eM))));p.Sink(function(eP){return eO(eP[0],eP[1],eP[2]);},eB.get_View());eN=p.Apply(p.Apply(p.Map2(function(eP,eQ){return function(eR){return function(eS){return bc.map(function(eT){return eT[1];},bc.filter(function(eT){return eT[0];},bz.ofArray([[bj.Trim(eP)==="","Titular"],[bj.Trim(eQ)==="","Banco"],[bj.Trim(eR)==="","Numero de Cuenta"],[bj.Trim(eS)==="","ABA/Routing Number"]])));};};},eD.Hole("titular").get_View(),eD.Hole("banco").get_View()),eD.Hole("numero").get_View()),eD.Hole("routing").get_View());p.Sink(function(eP){var eQ,eR;if(eP!=null&&eP.$==1){eQ=eP.$0;!J.Equals((eR=eB.Get(),bu.fst3(eR[0],eR[1],eR[2])),eQ)?eB.Set([eQ,"",false]):void 0;}},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eP,eQ){return et.Curried(function(eR,eS,eT,eU){return!bc.isEmpty(eP)?null:bu.alertIfNone("TipoCuenta",cR.tryParse(bj.Trim(eQ)),function(eV){var eW;return{$:1,$0:(eW=bj.Trim(eR),bA.New(bj.Trim(eS),eW,eV,new bC({$:0,$0:bj.Trim(eT)}),new bB({$:0,$0:bj.Trim(eU)})))};});},4);},eN,eD.Hole("tipocuenta").get_View()),eD.Hole("banco").get_View()),eD.Hole("titular").get_View()),eD.Hole("numero").get_View()),eD.Hole("routing").get_View()));return[eN,eD.get_Doc()];};cL.formaDocO=function(eB){var eC;return cL.formaDoc(i.Lens(eB,(eC=[M.tarVacio(),"",false],function(eD){return eD==null?eC:eD.$0;}),function(eD,eE){return{$:1,$0:eE};}));};cL.formaDoc=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ;function eR(eS,eT,eU){var eV;eD.Hole("titular").Set(eS.titular);eD.Hole("tipotarjeta").Set((function(eW){return function(eX){return eW(a.String(eX));};}(a.id))(eS.tipoTarjeta));eD.Hole("numero").Set(eS.numero.$0);eD.Hole("aniovenc").Set((function(eW){return function(eX){return eW(bD.padNumLeft(a.String(eX),4));};}(a.id))(eS.expiracion.anio));eD.Hole("mesvenc").Set((eV=eS.expiracion.mes,eV===1?"Enero":eV===2?"Febrero":eV===3?"Marzo":eV===4?"Abril":eV===5?"Mayo":eV===6?"Junio":eV===7?"Julio":eV===8?"Agosto":eV===9?"Septiembre":eV===10?"Octubre":eV===11?"Noviembre":eV===12?"Diciembre":"XX"));}eC=p.Map(function(eS){return bu.thr3(eS[0],eS[1],eS[2]);},eB.get_View());eD=(eE=(eF=cT.Dynamic("style",p.Map(function(eS){return eS?"display:None":"";},eC)),(eG=cT.DynamicPred("disabled",eC,p.Const("")),(eH=cT.DynamicPred("disabled",eC,p.Const("")),(eI=cT.DynamicPred("disabled",eC,p.Const("")),(eJ=cT.DynamicPred("disabled",eC,p.Const("")),(eK=cT.DynamicPred("disabled",eC,p.Const("")),(eL=Z.EmbedView(p.Map(function(eS){return bu.crearOptions(bc.map(a.String,eS));},bu.mesesV().get_View())),(eM=Z.EmbedView(p.Map(function(eS){return bu.crearOptions(bc.map(a.String,eS));},bu.aniosV().get_View())),(eN=Z.EmbedView(p.Map(bu.crearOptions,bu.tiposTar().get_View())),U.Make().WithHole({$:0,$0:"tipostarjeta",$1:eN})).WithHole({$:2,$0:"mensaje",$1:p.Map(function(eS){return bu.snd3(eS[0],eS[1],eS[2]);},eB.get_View())}).WithHole({$:0,$0:"anios",$1:eM})).WithHole({$:0,$0:"meses",$1:eL})).WithHole({$:3,$0:"disabled1",$1:eK})).WithHole({$:3,$0:"disabled2",$1:eJ})).WithHole({$:3,$0:"disabled3",$1:eI})).WithHole({$:3,$0:"disabled4",$1:eH})).WithHole({$:3,$0:"disabled5",$1:eG})).WithHole({$:3,$0:"visible",$1:eF})),(eO=V.CompleteHoles(eE.k,eE.h,[["tipotarjeta",0],["titular",0],["numero",0],["aniovenc",0],["mesvenc",0]]),(eP=new S.New(eO[1],W.tarjetacredito(eO[0])),(eE.i=eP,eP))));p.Sink(function(eS){return eR(eS[0],eS[1],eS[2]);},eB.get_View());eQ=p.Apply(p.Apply(p.Apply(p.Map2(function(eS,eT){return et.Curried3(function(eU,eV,eW){return bc.map(function(eX){return eX[1];},bc.filter(function(eX){return eX[0];},bz.ofArray([[bj.Trim(eS)==="","Titular"],[bj.Trim(eT)==="","TipoTarjeta"],[bj.Trim(eU)==="","Numero"],[bj.Trim(eV)==="","Ano de Vencimiento"],[bj.Trim(eW)==="","Mes de Vencimiento"]])));});},eD.Hole("titular").get_View(),eD.Hole("tipotarjeta").get_View()),eD.Hole("numero").get_View()),eD.Hole("aniovenc").get_View()),eD.Hole("mesvenc").get_View());p.Sink(function(eS){var eT,eU;if(eS!=null&&eS.$==1){eT=eS.$0;!J.Equals((eU=eB.Get(),bu.fst3(eU[0],eU[1],eU[2])),eT)?eB.Set([eT,"",false]):void 0;}},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eS,eT){return et.Curried(function(eU,eV,eW,eX){return!bc.isEmpty(eS)?null:bu.alertIfNone("Tipo Tarjeta",c3.tryParse(bj.Trim(eT)),function(eY){var eZ,e0,e1;return{$:1,$0:cH.New(bj.Trim(eU),eY,new cJ({$:0,$0:bj.Trim(eV)}),c2.New((eZ=(e0=bj.Trim(eW),(cw.parseIntO())(e0)),eZ==null?0:eZ.$0),(e1=bj.Trim(eX),e1==="Febrero"?2:e1==="Marzo"?3:e1==="Abril"?4:e1==="Mayo"?5:e1==="Junio"?6:e1==="Julio"?7:e1==="Agosto"?8:e1==="Septiembre"?9:e1==="Octubre"?10:e1==="Noviembre"?11:e1==="Diciembre"?12:1)))};});},4);},eQ,eD.Hole("tipotarjeta").get_View()),eD.Hole("titular").get_View()),eD.Hole("numero").get_View()),eD.Hole("aniovenc").get_View()),eD.Hole("mesvenc").get_View()));return[eQ,eD.get_Doc()];};cN=h.FromView=et.Class({get_View:function(){return this.view;},Set:function(eB){this.set(eB);},Get:function(){return this.current;},Update:function(eB){var eC;p.Get((eC=this.set,function(eD){return eC(eB(eD));}),this.view);},UpdateMaybe:function(eB){var eC;eC=this;p.Get(function(eD){var eE;eE=eB(eD);eE!=null&&eE.$==1?eC.set(eE.$0):void 0;},this.view);}},q,cN);cN.New=et.Ctor(function(eB,eC){var eD,eE;eD=this;q.New.call(this);this.set=eC;this.id=b8.Int();this.current=(eE=p.TryGet(eB),eE==null?null:eE.$0);this.view=p.Map(function(eF){eD.current=eF;return eF;},eB);},cN);cO.Delay=function(eB){return function(eC){try{(eB(null))(eC);}catch(eD){eC.k({$:1,$0:eD});}};};cO.Bind=function(eB,eC){return cO.checkCancel(function(eD){eB(dk.New(function(eE){var eF;if(eE.$==0){eF=eE.$0;cO.scheduler().Fork(function(){try{(eC(eF))(eD);}catch(eG){eD.k({$:1,$0:eG});}});}else cO.scheduler().Fork(function(){eD.k(eE);});},eD.ct));});};cO.Return=function(eB){return function(eC){eC.k({$:0,$0:eB});};};cO.Start=function(eB,eC){var eD,eE;eD=(eE=(cO.defCTS())[0],eC==null?eE:eC.$0);cO.scheduler().Fork(function(){if(!eD.c)eB(dk.New(function(eF){if(eF.$==1)cO.UncaughtAsyncError(eF.$0);},eD));});};cO.Zero=function(){_do.$cctor();return _do.Zero;};cO.Sleep=function(eB){return function(eC){var eD,eE;eD=void 0;eE=void 0;eD=a.setTimeout(function(){eE.Dispose();cO.scheduler().Fork(function(){eC.k({$:0,$0:null});});},eB);eE=cO.Register(eC.ct,function(){a.clearTimeout(eD);cO.scheduler().Fork(function(){cO.cancel(eC);});});};};cO.While=function(eB,eC){return eB()?cO.Bind(eC,function(){return cO.While(eB,eC);}):cO.Return();};cO.checkCancel=function(eB){return function(eC){if(eC.ct.c)cO.cancel(eC);else eB(eC);};};cO.defCTS=function(){_do.$cctor();return _do.defCTS;};cO.UncaughtAsyncError=function(eB){ew.log("WebSharper: Uncaught asynchronous exception",eB);};cO.FromContinuations=function(eB){return function(eC){var eD;function eE(eF){if(eD[0])o.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{eD[0]=true;cO.scheduler().Fork(eF);}}eD=[false];eB(function(eF){eE(function(){eC.k({$:0,$0:eF});});},function(eF){eE(function(){eC.k({$:1,$0:eF});});},function(eF){eE(function(){eC.k({$:2,$0:eF});});});};};cO.TryWith=function(eB,eC){return function(eD){eB(dk.New(function(eE){if(eE.$==0)eD.k({$:0,$0:eE.$0});else if(eE.$==1)try{(eC(eE.$0))(eD);}catch(eF){eD.k(eE);}else eD.k(eE);},eD.ct));};};cO.Combine=function(eB,eC){return cO.Bind(eB,function(){return eC;});};cO.Register=function(eB,eC){var eD;return eB===cO.noneCT()?{Dispose:function(){return null;}}:(eD=eB.r.push(eC)-1,{Dispose:function(){return T.set(eB.r,eD,a.ignore);}});};cO.cancel=function(eB){eB.k({$:2,$0:new d5.New(eB.ct)});};cO.scheduler=function(){_do.$cctor();return _do.scheduler;};cO.Using=function(eB,eC){return cO.TryFinally(eC(eB),function(){eB.Dispose();});};cO.TryFinally=function(eB,eC){return function(eD){eB(dk.New(function(eE){try{eC();eD.k(eE);}catch(eF){eD.k({$:1,$0:eF});}},eD.ct));};};cO.noneCT=function(){_do.$cctor();return _do.noneCT;};cO.StartWithContinuations=function(eB,eC,eD,eE,eF){var eG,eH;eG=(eH=(cO.defCTS())[0],eF==null?eH:eF.$0);!eG.c?eB(dk.New(function(eI){if(eI.$==1)eD(eI.$0);else if(eI.$==2)eE(eI.$0);else eC(eI.$0);},eG)):void 0;};cO.GetCT=function(){_do.$cctor();return _do.GetCT;};cP=h.AttrProxy=et.Class({},null,cP);cP.Create=function(eB,eC){return dm.Static(function(eD){dn.SetAttr(eD,eB,eC);});};cP.HandlerImpl=function(eB,eC){return dm.Static(function(eD){eD.addEventListener(eB,function(eE){return(eC(eD))(eE);},false);});};cP.Concat=function(eB){var eC;eC=cQ.ofSeqNonCopying(eB);return cQ.TreeReduce(dm.EmptyAttr(),cP.Append,eC);};cP.Append=function(eB,eC){return dm.AppendTree(eB,eC);};cP.Handler=function(eB,eC){return cP.HandlerImpl(eB,eC);};cQ.ofSeqNonCopying=function(eB){var eC,eD;if(eB instanceof a.Array)return eB;else if(eB instanceof cu)return T.ofList(eB);else if(eB===null)return[];else{eC=[];eD=cr.Get(eB);try{while(eD.MoveNext())eC.push(eD.Current());return eC;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}}};cQ.TreeReduce=function(eB,eC,eD){var eE;function eF(eG,eH){var eI,eJ;return eH<=0?eB:eH===1&&(eG>=0&&eG<eE)?T.get(eD,eG):(eJ=eH/2>>0,eC(eF(eG,eJ),eF(eG+eJ,eH-eJ)));}eE=T.length(eD);return eF(0,eE);};cQ.MapTreeReduce=function(eB,eC,eD,eE){var eF;function eG(eH,eI){var eJ,eK;return eI<=0?eC:eI===1&&(eH>=0&&eH<eF)?eB(T.get(eE,eH)):(eK=eI/2>>0,eD(eG(eH,eK),eG(eH+eK,eI-eK)));}eF=T.length(eE);return eG(0,eF);};cQ.mapInPlace=function(eB,eC){var eD,eE;for(eD=0,eE=eC.length-1;eD<=eE;eD++)eC[eD]=eB(eC[eD]);return eC;};cR=M.TipoCuenta=et.Class({toString:function(){return this.$==2?this.$0:(function(eB){return function(eC){return eB(bb.p$7(eC));};}(a.id))(this);}},null,cR);cR.Ahorro=new cR({$:0});cR.tryParse=function(eB){var eC,eD;eD=bj.Trim(eB).toUpperCase();switch(eD){case"":return null;case"AHORRO":case"SAVINGS":return{$:1,$0:cR.Ahorro};case"CORRIENTE":case"CHECKING":return{$:1,$0:cR.Corriente};default:return{$:1,$0:new cR({$:2,$0:bj.Trim(eB)})};}};cR.Corriente=new cR({$:1});cS.InMemory=function(eB){return new dp.New(eB);};bK.StartsWith=function(eB,eC){return bj.StartsWith(eC,eB)?{$:1,$0:cc.string(eC,{$:1,$0:eB.length},null)}:null;};bK.unindent=function(eB){var eC,eD,eE,eF;eC=bj.SplitChars(eB,["\n"],0);eD=(eE=bc.tryFindIndex(function(eG){return" "!==eG;},(eF=bc.tryFind(function(eG){return bj.Trim(eG)!=="";},eC),eF==null?"":eF.$0)),eE==null?0:eE.$0);return bc.filter(function(eG){return!bj.StartsWith(eG,"# 1 ");},bc.map(function(eG){return eG.length<=eD?"":eG.substring(eD);},eC));};bK.splitByChar=function(eB,eC){return bj.SplitChars(eC,[eB],0);};cT.DynamicPred=function(eB,eC,eD){function eE(eF,eG){return eG[0]?dn.SetAttr(eF,eB,eG[1]):dn.RemoveAttr(eF,eB);}return dm.Dynamic(p.Map2(function(eF,eG){return[eF,eG];},eC,eD),function(eF){return function(eG){return eE(eF,eG);};});};cT.Style=function(eB,eC){return dm.Static(function(eD){dn.SetStyle(eD,eB,eC);});};cT.Dynamic=function(eB,eC){return dm.Dynamic(eC,function(eD){return function(eE){return dn.SetAttr(eD,eB,eE);};});};cT.Handler=function(eB,eC){return dm.Static(function(eD){eD.addEventListener(eB,function(eE){return(eC(eD))(eE);},false);});};cT.DynamicStyle=function(eB,eC){return dm.Dynamic(eC,function(eD){return function(eE){return dn.SetStyle(eD,eB,eE);};});};cT.Value=function(eB){function eC(eD){return{$:1,$0:eD};}return cT.CustomValue(eB,a.id,function(eD){return eC(a.id(eD));});};cT.CustomValue=function(eB,eC,eD){return cT.CustomVar(eB,function(eE,eF){eE.value=eC(eF);},function(eE){return eD(eE.value);});};cT.OnAfterRender=function(eB){return new cP({$:4,$0:eB});};cT.Checked=function(eB){function eC(eD,eE){return!J.Equals(eB.Get(),eD.checked)?eB.Set(eD.checked):null;}return cP.Concat([cT.DynamicProp("checked",eB.get_View()),cT.Handler("change",function(eD){return function(eE){return eC(eD,eE);};})]);};cT.IntValue=function(eB){return cT.CustomVar(eB,function(eC,eD){var eE;eE=eD.get_Input();return eC.value!==eE?void(eC.value=eE):null;},function(eC){var eD,eE,eF;eD=eC.value;return{$:1,$0:ej.isBlank(eD)?(eC.checkValidity?eC.checkValidity():true)?new c5({$:2,$0:eD}):new c5({$:1,$0:eD}):(eE=(eF=0,[b0.TryParseInt32(eD,{get:function(){return eF;},set:function(eG){eF=eG;}}),eF]),eE[0]?new c5({$:0,$0:eE[1],$1:eD}):new c5({$:1,$0:eD}))};});};cT.IntValueUnchecked=function(eB){return cT.CustomValue(eB,a.String,function(eC){var eD;return ej.isBlank(eC)?{$:1,$0:0}:(eD=+eC,eD!==eD>>0?null:{$:1,$0:eD});});};cT.FloatValue=function(eB){return cT.CustomVar(eB,function(eC,eD){var eE;eE=eD.get_Input();return eC.value!==eE?void(eC.value=eE):null;},function(eC){var eD,eE;eD=eC.value;return{$:1,$0:ej.isBlank(eD)?(eC.checkValidity?eC.checkValidity():true)?new c5({$:2,$0:eD}):new c5({$:1,$0:eD}):(eE=+eD,a.isNaN(eE)?new c5({$:1,$0:eD}):new c5({$:0,$0:eE,$1:eD}))};});};cT.FloatValueUnchecked=function(eB){return cT.CustomValue(eB,a.String,function(eC){var eD;return ej.isBlank(eC)?{$:1,$0:0}:(eD=+eC,a.isNaN(eD)?null:{$:1,$0:eD});});};cT.CustomVar=function(eB,eC,eD){function eE(eG,eH){return eB.UpdateMaybe(function(eI){var eJ,eK;eJ=eD(eG);return eJ!=null&&eJ.$==1&&(!J.Equals(eJ.$0,eI)&&(eK=[eJ,eJ.$0],true))?eK[0]:null;});}function eF(eG,eH){var eI,eJ;eI=eD(eG);return eI!=null&&eI.$==1&&(J.Equals(eI.$0,eH)&&(eJ=eI.$0,true))?null:eC(eG,eH);}return cP.Concat([cT.Handler("change",function(eG){return function(eH){return eE(eG,eH);};}),cT.Handler("input",function(eG){return function(eH){return eE(eG,eH);};}),cT.Handler("keypress",function(eG){return function(eH){return eE(eG,eH);};}),cT.DynamicCustom(function(eG){return function(eH){return eF(eG,eH);};},eB.get_View())]);};cT.DynamicProp=function(eB,eC){return dm.Dynamic(eC,function(eD){return function(eE){eD[eB]=eE;};});};cT.DynamicCustom=function(eB,eC){return dm.Dynamic(eC,eB);};bK.splitByChar=function(eB,eC){return bj.SplitChars(eC,[eB],0);};bK.unindent=function(eB){var eC,eD,eE,eF;eC=bj.SplitChars(eB,["\n"],0);eD=(eE=bc.tryFindIndex(function(eG){return" "!==eG;},(eF=bc.tryFind(function(eG){return bj.Trim(eG)!=="";},eC),eF==null?"":eF.$0)),eE==null?0:eE.$0);return bc.filter(function(eG){return!bj.StartsWith(eG,"# 1 ");},bc.map(function(eG){return eG.length<=eD?"":eG.substring(eD);},eC));};bK.delimitedO=function(eB,eC,eD){var eE,eF,eG,eH,eI;eE=bK.splitInTwoO(eB,eD);return eE==null?null:(eF=eE.$0,(eG=eF[0],(eH=bK.splitInTwoO(eC,eF[1]),eH==null?null:{$:1,$0:(eI=eH.$0,[eG,eI[0],eI[1]])})));};bK.unindentStr=function(){bV.$cctor();return bV.unindentStr;};bK.StartsWith=function(eB,eC){return bj.StartsWith(eC,eB)?{$:1,$0:cc.string(eC,{$:1,$0:eB.length},null)}:null;};bK.splitInTwoO=function(eB,eC){var eD;eD=eC.indexOf(eB);return eD===-1?null:{$:1,$0:[bd["String.Left"](eC,eD),eC.substring(eD+eB.length)]};};cU.p$1=function(eB){return"{"+("actName = "+bD.prettyPrint(eB.actName))+"; "+("actFunction = "+cW.p$1(eB.actFunction))+"; "+("actEnabled = "+cW.p$2(eB.actEnabled))+"}";};cV.appfwkclient=function(eB){cV.fixedsplitterhor();cV.fixedsplitterver();c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},eB):void 0;};cU.p=function(eB){return"{"+("docName = "+bD.prettyPrint(eB.docName))+"; "+("docDoc = "+cW.p(eB.docDoc))+"}";};cW.p$1=function(eB){return eB.$==2?"FunAct2 (<fun>, "+bD.prettyPrint(eB.$1)+", "+bD.prettyPrint(eB.$2)+")":eB.$==1?"FunAct1 (<fun>, "+bD.prettyPrint(eB.$1)+")":"FunAct0 <fun>";};cW.p$2=function(eB){return"View <fun>";};cV.tile=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"tile"},eB):void 0;};cV.namevalueinput=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},eB):void 0;};cV.namevalue=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"namevalue"},eB):void 0;};cV.action=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"action"},eB):void 0;};cV.actiondisabled=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},eB):void 0;};cV.fixedsplitterhor=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},eB):void 0;};cV.fixedsplitterver=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},eB):void 0;};cV.wcompsplitterhor=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},eB):void 0;};cV.wcompsplitterver=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},eB):void 0;};cV.appframework=function(eB){c7.LoadLocalTemplates("appframework");return eB?c7.NamedTemplate("appframework",{$:1,$0:"appframework"},eB):void 0;};cW.p=function(eB){return eB.$==5?"FunDoc5 (<fun>, "+bD.prettyPrint(eB.$1)+", "+bD.prettyPrint(eB.$2)+", "+bD.prettyPrint(eB.$3)+", "+bD.prettyPrint(eB.$4)+", "+bD.prettyPrint(eB.$5)+")":eB.$==4?"FunDoc4 (<fun>, "+bD.prettyPrint(eB.$1)+", "+bD.prettyPrint(eB.$2)+", "+bD.prettyPrint(eB.$3)+", "+bD.prettyPrint(eB.$4)+")":eB.$==3?"FunDoc3 (<fun>, "+bD.prettyPrint(eB.$1)+", "+bD.prettyPrint(eB.$2)+", "+bD.prettyPrint(eB.$3)+")":eB.$==2?"FunDoc2 (<fun>, "+bD.prettyPrint(eB.$1)+", "+bD.prettyPrint(eB.$2)+")":eB.$==1?"FunDoc1 (<fun>, "+bD.prettyPrint(eB.$1)+")":"LazyDoc "+bD.prettyPrint(eB.$0);};cw.tryParseWith=function(eB){function eC(eD,eE){return eD?{$:1,$0:eE}:null;}return function(eD){return eC.apply(null,eB(eD));};};cw.parseDateO=function(){bV.$cctor();return bV.parseDateO;};cw.parseIntO=function(){bV.$cctor();return bV.parseIntO;};cw.parseInt64O=function(){bV.$cctor();return bV.parseInt64O;};cw.parseSingleO=function(){bV.$cctor();return bV.parseSingleO;};cw.parseDoubleO=function(){bV.$cctor();return bV.parseDoubleO;};cw.parseGuidO=function(){bV.$cctor();return bV.parseGuidO;};cw.Double=function(){bV.$cctor();return bV["|Double|_|"];};cw.Int=function(){bV.$cctor();return bV["|Int|_|"];};cZ=cY.WcTabStripT=et.Class({connectedCallback:function(){var eB,eC,eD,eE;function eF(){var eG,eH,eI;eH=!eC.hasAttribute("bottom");eI=bz.ofSeq(bc.delay(function(){return bc.collect(function(eJ){var eK;eK=eC.childNodes[eJ-1];return J.Equals(eK.nodeType,G.ELEMENT_NODE)?[[eK.hasAttribute("tabname")?eK.getAttribute("tabname"):(function(eL){return function(eM){return eL("Tab "+a.String(eM));};}(a.id))(eJ),eK]]:[];},o.range(1,eC.childNodes.length));}));while(eE.childNodes.length>0)eE.removeChild(eE.lastChild);eG=cY.tabStrip(eB.selected,eH,true,eI,Z.Element("slot",cu.Empty,cu.Empty));c7.LoadLocalTemplates("");Z.Run(eE,eG);}eB=this;!this.added?(eC=this,eD=eC.attachShadow({mode:"open"}),eE=self.document.createElement("div"),eD.appendChild(eE),eF(),eC.addEventListener("DOMSubtreeModified",bd.delayed(50,eF)),this.added=true):void 0;}},g,cZ);cZ.Constructor=function(){var eB,eC;eB=(eC=ez.construct(self.HTMLElement,[],this.__proto__.constructor),eC);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(eB);return eB;};cZ.New=et.Ctor(function(){g.New.call(this);this.added=false;this.selected=i.Create$1(1);(function(eB){return eB("WcTabStripT initializer");}(function(eB){ew.log(eB);}));},cZ);cX.defineWebComponent=function(eB,eC,eD){try{ew.log("defineWebComponent: "+eB);cM.setPrototypeOf(eD.prototype,self.HTMLElement.prototype);cM.setPrototypeOf(eD,self.HTMLElement);cM.setPrototypeOf(eC.prototype,eD.prototype);self.customElements.define(eB,eC);}catch(eE){(function(eF){return eF("Failed to define WebComponent. Not supported.");}(function(eF){ew.log(eF);}));}};c0.init=function(eB,eC){var eD;eD=new dv.New();c0.set_layoutHorizontal(eB);c0.set_layoutVertical(eC);cX.defineWebComponent("wcomp-splitter",dv.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};c0.set_layoutHorizontal=function(eB){bV.$cctor();bV.layoutHorizontal=eB;};c0.set_layoutVertical=function(eB){bV.$cctor();bV.layoutVertical=eB;};c0.layoutVertical=function(){bV.$cctor();return bV.layoutVertical;};c0.layoutHorizontal=function(){bV.$cctor();return bV.layoutHorizontal;};cY.init=function(){bV.$cctor();return bV.init;};cY.tabStrip=function(eB,eC,eD,eE,eF){var eG;eG=Z.Element("div",[cP.Create("class",(((et.Curried3(function(eH,eI,eJ){return eH("tab-strip "+bD.toSafe(eI)+" "+bD.toSafe(eJ));}))(a.id))(eC?"top":"bottom"))(eD?"horizontal":"vertical"))],bz.ofSeq(bc.delay(function(){return bc.collect(function(eH){var eI;eI=eH[0];return[dN.New$1().Content(Z.Element("div",[cT.Dynamic("class",p.Map(function(eJ){return"tab"+(eJ===eI+1?" selected":"");},eB.get_View())),cP.Create("draggable","true"),cP.HandlerImpl("click",function(){return function(){return eB.Set(eI+1);};})],[Z.TextNode(eH[1][0])]))];},bc.indexed(eE));})));return Z.Element("div",[cP.Create("class","tab-panel")],bz.ofSeq(bc.delay(function(){return bc.append(eC?[eG]:[],bc.delay(function(){return bc.append([Z.Element("div",[cP.Create("class","tab-content")],[eF])],bc.delay(function(){return bc.append(!eC?[eG]:[],bc.delay(function(){return bc.append([Z.Element("style",cu.Empty,bz.ofArray([Z.TextNode(cY.css())]))],bc.delay(function(){return[Z.Element("style",cu.Empty,bz.ofArray([Z.TextView(p.Map(function(eH){return function(eI){return eH("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(eI)+")) { display: grid }\r\n                                           ");};}(a.id),eB.get_View()))]))];}));}));}));}));})));};cY.css=function(){bV.$cctor();return bV.css;};b9=bF.Builder=et.Class({},g,b9);b9.New=et.Ctor(function(){g.New.call(this);},b9);bF.result=function(){b1.$cctor();return b1.result;};ca=b$.EffBuilder=et.Class({},g,ca);ca.New=et.Ctor(function(){g.New.call(this);},ca);c1.toJsonString=function(eB){return T.ofSeq(bc.delay(function(){return bc.append(["\""],bc.delay(function(){return bc.append(!bj.IsNullOrEmpty(eB)?bc.collect(function(eC){var eD,eE;eD=eB[eC];eE=eD.charCodeAt();return eE>=0&&eE<=7||eE===11||eE>=14&&eE<=31?(function(eF){return function(eG){return eF("\\u"+bD.padNumLeft(eG.toString(16),4));};}(a.id))(eE):eD==="\u0008"?"\\b":eD==="\u0009"?"\\t":eD==="\n"?"\\n":eD==="\u000c"?"\\f":eD==="\r"?"\\r":eD==="\""?"\\\"":eD==="\\"?"\\\\":[eD];},o.range(0,eB.length-1)):[],bc.delay(function(){return["\""];}));}));})).join("");};bd.Error=function(eB){return{$:1,$0:eB};};c2=M.Expiracion=et.Class({},null,c2);c2.New=function(eB,eC){return new c2({anio:eB,mes:eC});};c3=M.TipoTarjeta=et.Class({toString:function(){return this.$==3?this.$0:(function(eB){return function(eC){return eB(bb.p$6(eC));};}(a.id))(this);}},null,c3);c3.Visa=new c3({$:0});c3.tryParse=function(eB){var eC,eD;eD=bj.Trim(eB).toUpperCase();switch(eD){case"":return null;case"VISA":return{$:1,$0:c3.Visa};case"MASTERCARD":return{$:1,$0:c3.MasterCard};case"AMERICAN EXPRESS":case"AMEX":return{$:1,$0:c3.Amex};default:return{$:1,$0:new c3({$:3,$0:bj.Trim(eB)})};}};c3.MasterCard=new c3({$:1});c3.Amex=new c3({$:2});c4.notPresent=function(){return o.FailWith("The given key was not present in the dictionary.");};c4.alreadyAdded=function(){return o.FailWith("An item with the same key has already been added.");};c5=h.CheckedInput=et.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,c5);c7.LoadLocalTemplates=function(eB){!c7.LocalTemplatesLoaded()?(c7.set_LocalTemplatesLoaded(true),c7.LoadNestedTemplates(self.document.body,"")):void 0;c7.LoadedTemplates().set_Item(eB,c7.LoadedTemplateFile(""));};c7.NamedTemplate=function(eB,eC,eD){var eE,eF;eE=(eF=null,[c7.LoadedTemplateFile(eB).TryGetValue(eC==null?"":eC.$0,{get:function(){return eF;},set:function(eG){eF=eG;}}),eF]);return eE[0]?c7.ChildrenTemplate(eE[1].cloneNode(true),eD):(ew.warn("Local template doesn't exist",eC),Z.get_Empty());};c7.RunFullDocTemplate=function(eB){var eC,eD;c7.LoadLocalTemplates("");c7.PrepareTemplateStrict("",null,dn.ChildrenArray(self.document.body),{$:1,$0:self.document.body},null);eC=c7.ChildrenTemplate(self.document.body,eB);eD=self.document.body;(function(eE){Z.RunInPlace(true,eD,eE);}(eC));return eC;};c7.LocalTemplatesLoaded=function(){dR.$cctor();return dR.LocalTemplatesLoaded;};c7.set_LocalTemplatesLoaded=function(eB){dR.$cctor();dR.LocalTemplatesLoaded=eB;};c7.LoadNestedTemplates=function(eB,eC){var eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR;function eD(eS){var eT,eU;if(!eE.ContainsKey(eS)){eT=(eU=null,[eF.TryGetValue(eS,{get:function(){return eU;},set:function(eV){eU=eV;}}),eU]);eT[0]?(eR.Add(eS),eF.Remove(eS),c7.PrepareTemplateStrict(eC,{$:1,$0:eS},eT[1][0],{$:1,$0:eT[1][1]},{$:1,$0:eD})):ew.warn(eR.Contains(eS)?"Encountered loop when instantiating "+eS:"Local template does not exist: "+eS);}}eE=c7.LoadedTemplateFile(eC);eF=new b3.New$5();eG=eB.querySelectorAll("[ws-template]");for(eH=0,eI=eG.length-1;eH<=eI;eH++){eJ=eG[eH];eK=eJ.getAttribute("ws-template").toLowerCase();eJ.removeAttribute("ws-template");eF.set_Item(eK,[[eJ],c7.FakeRootSingle(eJ)]);}eL=eB.querySelectorAll("[ws-children-template]");for(eM=0,eN=eL.length-1;eM<=eN;eM++){eO=eL[eM];eP=eO.getAttribute("ws-children-template").toLowerCase();eO.removeAttribute("ws-children-template");eF.set_Item(eP,(eQ=dn.ChildrenArray(eO),[eQ,c7.FakeRoot(eQ)]));}eR=new b4.New$3();while(eF.count>0)eD(bc.head(eF.get_Keys()));};c7.LoadedTemplates=function(){dR.$cctor();return dR.LoadedTemplates;};c7.LoadedTemplateFile=function(eB){var eC,eD,eE;eC=(eD=null,[c7.LoadedTemplates().TryGetValue(eB,{get:function(){return eD;},set:function(eF){eD=eF;}}),eD]);return eC[0]?eC[1]:(eE=new b3.New$5(),(c7.LoadedTemplates().set_Item(eB,eE),eE));};c7.ChildrenTemplate=function(eB,eC){var eD,eE,eF,eG,eH;eD=c7.InlineTemplate(eB,eC);eE=eD[1];eF=eD[0];eG=eF.Els;return!J.Equals(eG,null)&&eG.length===1&&(T.get(eG,0)instanceof G&&(J.Equals(T.get(eG,0).nodeType,G.ELEMENT_NODE)&&(eH=T.get(eG,0),true)))?dS.TreeNode(eF,eE):Z.Mk({$:6,$0:eF},eE);};c7.PrepareTemplateStrict=function(eB,eC,eD,eE,eF){var eG,eH;function eI(eN,eO){var eP,eQ,eR,eS,eT,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd;function eU(fe){}while(true)switch(eN){case 0:if(eO!==null){eP=eO.nextSibling;if(J.Equals(eO.nodeType,G.TEXT_NODE))dV.convertTextNode(eO);else if(J.Equals(eO.nodeType,G.ELEMENT_NODE))eK(eO);eO=eP;}else return null;break;case 1:eV=cc.string(eO.nodeName,{$:1,$0:3},null).toLowerCase();eW=(eQ=eV.indexOf("."),eQ===-1?[eB,eV]:[cc.string(eV,null,{$:1,$0:eQ-1}),cc.string(eV,{$:1,$0:eQ+1},null)]);eX=eW[1];eY=eW[0];if(eY!==""&&!c7.LoadedTemplates().ContainsKey(eY))return dV.failNotLoaded(eX);else{if(eY===""&&eF!=null)eF.$0(eX);eZ=c7.LoadedTemplates().get_Item(eY);if(!eZ.ContainsKey(eX))return dV.failNotLoaded(eX);else{e0=eZ.get_Item(eX);e1=e0.cloneNode(true);e2=new b4.New$3();e3=new b3.New$5();e4=eO.attributes;for(e5=0,e6=e4.length-1;e5<=e6;e5++){e7=e4.item(e5).name.toLowerCase();e3.set_Item(e7,(e8=e4.item(e5).nodeValue,e8===""?e7:e8.toLowerCase()));!e2.Add(e7)?ew.warn("Hole mapped twice",e7):void 0;}for(e9=0,e_=eO.childNodes.length-1;e9<=e_;e9++){e$=eO.childNodes[e9];J.Equals(e$.nodeType,G.ELEMENT_NODE)?!e2.Add(e$.nodeName.toLowerCase())?ew.warn("Hole filled twice",eX):void 0:void 0;}fa=eO.childNodes.length===1&&J.Equals(eO.firstChild.nodeType,G.TEXT_NODE);if(fa){eS=dV.fillTextHole(e1,eO.firstChild.textContent,eX);((function(fe){return function(ff){if(ff!=null)fe(ff.$0);};}((eT=function(fe){return function(ff){return fe.Add(ff);};}(e2),function(fe){return eU(eT(fe));})))(eS));}dV.removeHolesExcept(e1,e2);if(!fa){for(fb=0,fc=eO.childNodes.length-1;fb<=fc;fb++){fd=eO.childNodes[fb];J.Equals(fd.nodeType,G.ELEMENT_NODE)?fd.hasAttributes()?dV.fillInstanceAttrs(e1,fd):eJ(e1,fd):void 0;}}dV.mapHoles(e1,e3);dV.fill(e1,eO.parentNode,eO);eO.parentNode.removeChild(eO);return;}}break;}}function eJ(eN,eO){var eP,eR,eS;function eQ(eT,eU){var eV,eW,eX;if(eR==="title"&&eO.hasChildNodes()){eV=ev.parseHTML(eO.textContent);eO.removeChild(eO.firstChild);for(eW=0,eX=eV.length-1;eW<=eX;eW++)eO.appendChild(T.get(eV,eW));}else null;eK(eO);return dV.fill(eO,eT,eU);}eR=eO.nodeName.toLowerCase();dn.IterSelector(eN,"[ws-attr-holes]",function(eT){var eU,eV,eW,eX,eY;eU=bj.SplitChars(eT.getAttribute("ws-attr-holes"),[" "],1);for(eV=0,eW=eU.length-1;eV<=eW;eV++){eX=T.get(eU,eV);eT.setAttribute(eX,(eY=new a.RegExp("\\${"+eR+"}","ig"),eT.getAttribute(eX).replace(eY,eO.textContent)));}});eS=eN.querySelector("[ws-hole="+eR+"]");if(J.Equals(eS,null)){eP=eN.querySelector("[ws-replace="+eR+"]");return J.Equals(eP,null)?null:(eQ(eP.parentNode,eP),void eP.parentNode.removeChild(eP));}else{while(eS.hasChildNodes())eS.removeChild(eS.lastChild);eS.removeAttribute("ws-hole");return eQ(eS,null);}}function eK(eN){if(bj.StartsWith(eN.nodeName.toLowerCase(),"ws-"))eM(eN);else{dV.convertAttrs(eN);eL(eN.firstChild);}}function eL(eN){return eI(0,eN);}function eM(eN){return eI(1,eN);}eG=eE==null?c7.FakeRoot(eD):eE.$0;eH=(eC==null?"":eC.$0).toLowerCase();c7.LoadedTemplateFile(eB).set_Item(eH,eG);T.length(eD)>0?(function(eN){var eO,eP,eQ,eR;while(true){eO=eN.querySelector("[ws-template]");if(J.Equals(eO,null)){eP=eN.querySelector("[ws-children-template]");if(J.Equals(eP,null))return null;else{eQ=eP.getAttribute("ws-children-template");eP.removeAttribute("ws-children-template");c7.PrepareTemplateStrict(eB,{$:1,$0:eQ},dn.ChildrenArray(eP),null,null);eN=eN;}}else{eR=eO.getAttribute("ws-template");(c7.PrepareSingleTemplate(eB,{$:1,$0:eR},eO))(null);eN=eN;}}}(eG),eL(T.get(eD,0))):void 0;};c7.FakeRootSingle=function(eB){var eC,eD,eE;eB.removeAttribute("ws-template");eC=eB.getAttribute("ws-replace");eC===null?void 0:(eB.removeAttribute("ws-replace"),eD=eB.parentNode,J.Equals(eD,null)?void 0:(eE=self.document.createElement(eB.tagName),eE.setAttribute("ws-replace",eC),eD.replaceChild(eE,eB)));return c7.FakeRoot([eB]);};c7.FakeRoot=function(eB){var eC,eD,eE;eC=self.document.createElement("div");for(eD=0,eE=eB.length-1;eD<=eE;eD++)eC.appendChild(T.get(eB,eD));return eC;};c7.InlineTemplate=function(eB,eC){var eD,eE,eF,eG,eJ,eK,eL,eM,eN,eO,eP;function eH(eQ,eR){var eS,eT,eU;eS=dm.Insert(eQ,eR);eK.push(dm.Updates(eS));eL.push([eQ,eS]);eT=et.GetOptional(eS.OnAfterRender);return eT==null?null:(eU=eT.$0,void eM.push(function(){eU(eQ);}));}function eI(eQ){var eR,eS;eR=(eS=null,[eN.TryGetValue(eQ,{get:function(){return eS;},set:function(eT){eS=eT;}}),eS]);return eR[0]?eR[1].$==0?{$:1,$0:eR[1].$1}:eR[1].$==1?{$:1,$0:Z.TextNode(eR[1].$1)}:eR[1].$==2?{$:1,$0:Z.TextView(eR[1].$1)}:eR[1].$==8?{$:1,$0:Z.TextView(eR[1].$1.get_View())}:eR[1].$==9?{$:1,$0:Z.TextView(p.Map(a.String,eR[1].$1.get_View()))}:eR[1].$==10?{$:1,$0:Z.TextView(p.Map(function(eT){return eT.get_Input();},eR[1].$1.get_View()))}:eR[1].$==11?{$:1,$0:Z.TextView(p.Map(a.String,eR[1].$1.get_View()))}:eR[1].$==12?{$:1,$0:Z.TextView(p.Map(function(eT){return eT.get_Input();},eR[1].$1.get_View()))}:eR[1].$==13?{$:1,$0:Z.TextView(p.Map(a.String,eR[1].$1.get_View()))}:(ew.warn("Content hole filled with attribute data",eQ),null):null;}eJ=[];eK=[];eL=[];eM=[];eN=new b3.New$5();eO=cr.Get(eC);try{while(eO.MoveNext()){eP=eO.Current();eN.set_Item(eP.$0,eP);}}finally{if(typeof eO=="object"&&"Dispose"in eO)eO.Dispose();}eD=dn.ChildrenArray(eB);dn.IterSelector(eB,"[ws-hole]",function(eQ){var eR,eS,eT;eT=eQ.getAttribute("ws-hole");eQ.removeAttribute("ws-hole");while(eQ.hasChildNodes())eQ.removeChild(eQ.lastChild);eR=eI(eT);eR!=null&&eR.$==1?(eS=eR.$0,dj.LinkElement(eQ,eS.docNode),eJ.push(dw.New(dm.Empty(eQ),eS.docNode,null,eQ,b8.Int(),null)),eK.push(eS.updates)):void 0;});dn.IterSelector(eB,"[ws-replace]",function(eQ){var eR,eS,eT,eU,eV,eW;eR=eI(eQ.getAttribute("ws-replace"));eR!=null&&eR.$==1?(eS=eR.$0,eT=eQ.parentNode,eU=self.document.createTextNode(""),eT.replaceChild(eU,eQ),eV=dj.InsertBeforeDelim(eU,eS.docNode),eW=T.tryFindIndex(function(eX){return eQ===eX;},eD),eW==null?void 0:T.set(eD,eW.$0,eS.docNode),eJ.push(dw.New(dm.Empty(eT),eS.docNode,{$:1,$0:[eV,eU]},eT,b8.Int(),null)),eK.push(eS.updates)):void 0;});dn.IterSelector(eB,"[ws-attr]",function(eQ){var eR,eS,eT;eR=eQ.getAttribute("ws-attr");eQ.removeAttribute("ws-attr");eS=(eT=null,[eN.TryGetValue(eR,{get:function(){return eT;},set:function(eU){eT=eU;}}),eT]);eS[0]?eS[1].$==3?eH(eQ,eS[1].$1):ew.warn("Attribute hole filled with non-attribute data",eR):void 0;});dn.IterSelector(eB,"[ws-on]",function(eQ){eH(eQ,cP.Concat(T.choose(function(eR){var eS,eT,eU;eS=bj.SplitChars(eR,[":"],1);eT=(eU=null,[eN.TryGetValue(T.get(eS,1),{get:function(){return eU;},set:function(eV){eU=eV;}}),eU]);return eT[0]?eT[1].$==4?{$:1,$0:cT.Handler(T.get(eS,0),eT[1].$1)}:eT[1].$==5?{$:1,$0:cP.Handler(T.get(eS,0),eT[1].$2)}:(ew.warn("Event hole on"+T.get(eS,0)+" filled with non-event data",T.get(eS,1)),null):null;},bj.SplitChars(eQ.getAttribute("ws-on"),[" "],1))));eQ.removeAttribute("ws-on");});dn.IterSelector(eB,"[ws-onafterrender]",function(eQ){var eR,eS,eT;eR=eQ.getAttribute("ws-onafterrender");eS=(eT=null,[eN.TryGetValue(eR,{get:function(){return eT;},set:function(eU){eT=eU;}}),eT]);eS[0]?eS[1].$==6?(eQ.removeAttribute("ws-onafterrender"),eH(eQ,cT.OnAfterRender(eS[1].$1))):eS[1].$==7?(eQ.removeAttribute("ws-onafterrender"),eH(eQ,cT.OnAfterRender(eS[1].$1))):ew.warn("onafterrender hole filled with non-onafterrender data",eR):void 0;});dn.IterSelector(eB,"[ws-var]",function(eQ){var eR,eS,eT;eR=eQ.getAttribute("ws-var");eQ.removeAttribute("ws-var");eS=(eT=null,[eN.TryGetValue(eR,{get:function(){return eT;},set:function(eU){eT=eU;}}),eT]);eS[0]?eS[1].$==8?eH(eQ,cT.Value(eS[1].$1)):eS[1].$==9?eH(eQ,cT.Checked(eS[1].$1)):eS[1].$==10?eH(eQ,cT.IntValue(eS[1].$1)):eS[1].$==11?eH(eQ,cT.IntValueUnchecked(eS[1].$1)):eS[1].$==12?eH(eQ,cT.FloatValue(eS[1].$1)):eS[1].$==13?eH(eQ,cT.FloatValueUnchecked(eS[1].$1)):ew.warn("Var hole filled with non-Var data",eR):void 0;});dn.IterSelector(eB,"[ws-attr-holes]",function(eQ){var eR,eS,eT,eU;eR=new a.RegExp(c7.TextHoleRE(),"g");eS=bj.SplitChars(eQ.getAttribute("ws-attr-holes"),[" "],1);eQ.removeAttribute("ws-attr-holes");for(eT=0,eU=eS.length-1;eT<=eU;eT++)(function(){var eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7;e4=T.get(eS,eT);e5=eQ.getAttribute(e4);eV=null;eW=0;e6=[];while(eV=eR.exec(e5),eV!==null){e7=cc.string(e5,{$:1,$0:eW},{$:1,$0:eR.lastIndex-T.get(eV,0).length-1});eW=eR.lastIndex;e6.push([e7,T.get(eV,1)]);}eY=cc.string(e5,{$:1,$0:eW},null);eR.lastIndex=0;eZ=T.foldBack(function(e8,e9){return(function(e_){var e$,fa;e$=e_[0];fa=e_[1];return function(fb){var fc,fd,fe,ff,fg;fc=fb[0];fd=fb[1];fe=(ff=(fg=null,[eN.TryGetValue(fa,{get:function(){return fg;},set:function(fh){fg=fh;}}),fg]),ff[0]?ff[1].$==1?{$:0,$0:ff[1].$1}:ff[1].$==2?{$:1,$0:ff[1].$1}:ff[1].$==8?{$:1,$0:ff[1].$1.get_View()}:ff[1].$==9?{$:1,$0:p.Map(a.String,ff[1].$1.get_View())}:ff[1].$==10?{$:1,$0:p.Map(function(fh){return fh.get_Input();},ff[1].$1.get_View())}:ff[1].$==11?{$:1,$0:p.Map(a.String,ff[1].$1.get_View())}:ff[1].$==12?{$:1,$0:p.Map(function(fh){return fh.get_Input();},ff[1].$1.get_View())}:ff[1].$==13?{$:1,$0:p.Map(a.String,ff[1].$1.get_View())}:(ew.warn("Attribute value hole filled with non-text data",fa),{$:0,$0:""}):{$:0,$0:""});return fe.$==1?[e$,new cu({$:1,$0:fc===""?fe.$0:p.Map(function(fh){return fh+fc;},fe.$0),$1:fd})]:[e$+fe.$0+fc,fd];};}(e8))(e9);},e6,[eY,cu.Empty]);return eH(eQ,eZ[1].$==1?eZ[1].$1.$==1?eZ[1].$1.$1.$==1?eZ[1].$1.$1.$1.$==0?(e0=eZ[0],cT.Dynamic(e4,p.Map3(function(e8,e9,e_){return e0+e8+e9+e_;},eZ[1].$0,eZ[1].$1.$0,eZ[1].$1.$1.$0))):(e1=eZ[0],cT.Dynamic(e4,p.Map(function(e8){return e1+bj.concat("",e8);},p.Sequence(eZ[1])))):(e2=eZ[0],cT.Dynamic(e4,p.Map2(function(e8,e9){return e2+e8+e9;},eZ[1].$0,eZ[1].$1.$0))):eZ[0]===""?cT.Dynamic(e4,eZ[1].$0):(e3=eZ[0],cT.Dynamic(e4,p.Map(function(e8){return e3+e8;},eZ[1].$0))):cP.Create(e4,eZ[0]));}());});return[et.DeleteEmptyFields({Els:eD,Dirty:true,Holes:eJ,Attrs:eL,Render:(eE=eM.length==0?null:{$:1,$0:function(eQ){T.iter(function(eR){eR(eQ);},eM);}},eE?eE.$0:void 0),El:(eF=!J.Equals(eD,null)&&eD.length===1&&(T.get(eD,0)instanceof G&&(T.get(eD,0)instanceof a.Element&&(eG=T.get(eD,0),true)))?{$:1,$0:eG}:null,eF?eF.$0:void 0)},["Render","El"]),cQ.TreeReduce(p.Const(),p.Map2Unit,eK)];};c7.PrepareSingleTemplate=function(eB,eC,eD){var eE,eF,eG;eE=c7.FakeRootSingle(eD);eF=[eD];eG={$:1,$0:eE};return function(eH){c7.PrepareTemplateStrict(eB,eC,eF,eG,eH);};};c7.TextHoleRE=function(){dR.$cctor();return dR.TextHoleRE;};c8.newPojoOpt=function(eB){function eC(eD,eE){return eE==null?null:{$:1,$0:[eD,eE.$0]};}return c8.newPojo(bc.choose(function(eD){return eC(eD[0],eD[1]);},eB));};c8.newPojo=function(eB){var eC,eD;function eE(eG,eH){return function(eI){return c8.addProp(eG,eH,eI);};}function eF(eG){}eC={};bc.iter((eD=function(eG){return(function(eH){return eE(eH[0],eH[1]);}(eG))(eC);},function(eG){return eF(eD(eG));}),eB);return eC;};c8.addProp=function(eB,eC,eD){eD[eB]=eC;return eD;};cd.op_EqualsEqualsGreater=function(eB,eC){return[eB,eC==null?null:{$:1,$0:eC.$0}];};cd.op_MinusMinusGreater=function(eB,eC){return[eB,{$:1,$0:eC}];};c_=f.TimeoutException=et.Class({},c9,c_);c_.New=et.Ctor(function(){c_.New$1.call(this,"The operation has timed out.");},c_);c_.New$1=et.Ctor(function(eB){this.message=eB;cM.setPrototypeOf(this,c_.prototype);},c_);c$.AsAsync=function(eB){return cO.FromContinuations(function(eC,eD){eB.then(eC,function(eE){return eD(c$.unwrapExn(eE));});});};c$.unwrapExn=function(eB){return eB instanceof c9?eB:new d2.New(eB);};db.JSUnion=function(eB,eC){var eD;function eE(eI){var eJ;function eK(eL){return eL!=null&&eL.$==1&&J.Equals(eI,eL.$0);}eJ=bc.tryFindIndex(function(eL){return eK(eL[0]);},eC);return eJ!=null&&eJ.$==1?eJ.$0:eI.$;}function eF(eI,eJ){return T.init(T.length((T.get(eC,eI))[2]),function(eK){return eJ["$"+a.String(eK)];});}function eG(eI,eJ){var eK,eL,eM;eK=eB==null?{}:new eB();eL=T.get(eC,eI);return(eM=eL[0],eM!=null&&eM.$==1)?eL[0].$0:(eK.$=eI,bc.iteri(function(eN,eO){eK["$"+a.String(eN)]=eO;},eJ),eK);}function eH(eI,eJ){var eK;function eL(eM,eN){return[eI,eM,eN,eK];}eK=eJ[2];return bc.map(function(eM){return eL(eM[0],eM[1]);},eJ[1]);}eD=bc.collect(function(eI){return eH(eI[0],eI[1]);},bc.indexed(eC));return dD.New$1(function(eI){function eJ(eK,eL,eM,eN){var eO,eP,eQ;function eR(eS,eT,eU){var eV;function eW(eX,eY){return eR(eV,eX,new cu({$:1,$0:eY,$1:eU}));}return eS.$==1?(eV=eS.$1,bc.collect(function(eX){return eW(eX[0],eX[1]);},eS.$0.Parse(eT))):[[eT,eG(eK,T.ofList(bz.rev(eU)))]];}return db.isCorrectMethod(eL,eI.Method)?(eO=dE.startsWith(bz.ofArray(eM),eI.Segments),eO==null?[]:(eP=eO.$0,(eQ=bz.ofArray(eN),eQ.$==0?[[dd.New(eP,eI.QueryArgs,eI.FormData,eI.Method,eI.Body),eG(eK,[])]]:eR(eQ,dd.New(eP,eI.QueryArgs,eI.FormData,eI.Method,eI.Body),cu.Empty)))):[];}return bc.collect(function(eK){return eJ(eK[0],eK[1],eK[2],eK[3]);},eD);},function(eI){var eJ,eK,eL,eM,eN,eO;function eP(eQ,eR){return eR.Write(eQ);}eJ=eE(eI);eK=T.get(eC,eJ);eL=eK[2];eM=T.get(eK[1],0);eN=[dd.Segment(bz.ofArray(eM[1]),eM[0])];return!J.Equals(eL,null)&&eL.length===0?{$:1,$0:eN}:(eO=(((et.Curried3(T.map2))(eP))(eF(eJ,eI)))(eL),T.forall(function(eQ){return eQ!=null;},eO)?{$:1,$0:bc.append(eN,bc.collect(function(eQ){return eQ.$0;},eO))}:null);});};db.isCorrectMethod=function(eB,eC){return eC!=null&&eC.$==1?eB!=null&&eB.$==1?J.Equals(eC.$0,eB.$0):true:!(eB!=null&&eB.$==1);};db.rString=function(){d3.$cctor();return d3.rString;};db.rWildcard=function(){d3.$cctor();return d3.rWildcard;};dc.Parse=function(eB,eC){function eD(eE,eF){return eE.Segments.$==0?{$:1,$0:eF}:null;}return bc.tryPick(function(eE){return eD(eE[0],eE[1]);},eB.Parse(eC));};dc.HashLink=function(eB,eC){return"#"+dc.Link(eB,eC);};dc.Link=function(eB,eC){var eD;eD=dc.Write(eB,eC);return eD==null?"":eD.$0.ToLink();};dc.Write=function(eB,eC){var eD;eD=eB.Write(eC);return eD==null?null:{$:1,$0:dd.Combine(eD.$0)};};dd=da.Route=et.Class({ToLink:function(){return en.WriteLink(this.Segments,this.QueryArgs);}},null,dd);dd.FromHash=function(eB,eC){var eD,eE;eD=eB.indexOf("#");return eD===-1?dd.get_Empty():(eE=eB.substring(eD+1),eC!=null&&eC.$0?eE===""||eE==="/"?dd.get_Empty():bj.StartsWith(eE,"/")?dd.FromUrl(eE.substring(1),{$:1,$0:true}):dd.Segment$2(eE):dd.FromUrl(eB.substring(eD),{$:1,$0:false}));};dd.Segment=function(eB,eC){var eD;eD=dd.get_Empty();return dd.New(eB,eD.QueryArgs,eD.FormData,eC,eD.Body);};dd.get_Empty=function(){return dd.New(cu.Empty,new cq.New([]),new cq.New([]),null,r.CreateFromValue(null));};dd.FromUrl=function(eB,eC){var eD,eE,eF;eD=(eE=eB.indexOf("?"),eE===-1?[eB,new cq.New([])]:[bj.Substring(eB,0,eE),dd.ParseQuery(eB.substring(eE+1))]);eF=dd.get_Empty();return dd.New(bz.ofArray(bj.SplitChars(eD[0],["/"],eC!=null&&eC.$0?0:1)),eD[1],eF.FormData,eF.Method,eF.Body);};dd.Segment$2=function(eB){var eC;eC=dd.get_Empty();return dd.New(bz.ofArray([eB]),eC.QueryArgs,eC.FormData,eC.Method,eC.Body);};dd.ParseQuery=function(eB){return d4.OfArray(T.ofSeq(T.choose(function(eC){var eD,eE;eD=bj.SplitChars(eC,["="],0);return!J.Equals(eD,null)&&eD.length===2?(eE=T.get(eD,1),{$:1,$0:[T.get(eD,0),eE]}):((function(eF){return function(eG){return eF("wrong format for query argument: "+bD.toSafe(eG));};}(function(eF){ew.log(eF);}))(eC),null);},bj.SplitChars(eB,["&"],0))));};dd.Combine=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL;eI=T.ofSeq(eB);eJ=T.length(eI);if(eJ===0)return dd.get_Empty();else if(eJ===1)return T.get(eI,0);else{eC=null;eD=null;eK=[];eE=new cq.New([]);eF=new cq.New([]);eG=0;eL=T.length(eI);while(eG<eL)(function(){var eM,eN,eO;eM=T.get(eI,eG);eN=eM.Method;eN!=null&&eN.$==1?eC=eN:void 0;eO=eM.Body.f();eO===null?void 0:eD=eO;eE=d4.FoldBack(function(eP,eQ,eR){return eR.Add(eP,eQ);},eE,eM.QueryArgs);eF=d4.FoldBack(function(eP,eQ,eR){return eR.Add(eP,eQ);},eF,eM.FormData);bz.iter(function(eP){eK.push(eP);},eM.Segments);eG=eG+1;}());return dd.New(bz.ofSeq(eK),eE,eF,eC,r.CreateFromValue(eD));}};dd.New=function(eB,eC,eD,eE,eF){return new dd({Segments:eB,QueryArgs:eC,FormData:eD,Method:eE,Body:eF});};de.$cctor=function(){de.$cctor=a.ignore;de.EndPoint="?";de.AjaxProvider=new dF.New();};df.fromSeq=function(eB){var eC;eC=T.ofSeq(bc.delay(function(){return bc.collect(function(eD){return[dG.New(eD[0],eD[1])];},bc.distinctBy(function(eD){return eD[0];},eB));}));T.sortInPlace(eC);return ct.Build(eC,0,eC.length-1);};dg.New=function(eB,eC,eD,eE,eF){return{Node:eB,Left:eC,Right:eD,Height:eE,Count:eF};};dh=M.IdAddress=et.Class({},null,dh);di=M.IdSubscription=et.Class({get_Id:function(){return this.$0;}},null,di);bJ.toYYYYMMDD=function(eB,eC){return((((((et.Curried(function(eD,eE,eF,eG,eH,eI){return eD(a.String(eE)+bD.toSafe(eF)+bD.padNumLeft(a.String(eG),2)+bD.toSafe(eH)+bD.padNumLeft(a.String(eI),2));},6))(a.id))((new ex(eC)).getFullYear()))(eB))((new ex(eC)).getMonth()+1))(eB))((new ex(eC)).getDate());};dj.CreateEmbedNode=function(){return{Current:null,Dirty:false};};dj.UpdateEmbedNode=function(eB,eC){eB.Current=eC;eB.Dirty=true;};dj.CreateElemNode=function(eB,eC,eD){var eE;dj.LinkElement(eB,eD);eE=dm.Insert(eB,eC);return dw.New(eE,eD,null,eB,b8.Int(),et.GetOptional(eE.OnAfterRender));};dj.LinkElement=function(eB,eC){dj.InsertDoc(eB,eC,null);};dj.CreateRunState=function(eB,eC){return eb.New(ec.get_Empty(),dj.CreateElemNode(eB,dm.EmptyAttr(),eC));};dj.PerformAnimatedUpdate=function(eB,eC,eD){var eE;return dW.get_UseAnimations()?(eE=null,cO.Delay(function(){var eF,eG,eH;eF=ec.FindAll(eD);eG=dj.ComputeChangeAnim(eC,eF);eH=dj.ComputeEnterAnim(eC,eF);return cO.Bind(dW.Play(dW.Append(eG,dj.ComputeExitAnim(eC,eF))),function(){return cO.Bind(dj.SyncElemNodesNextFrame(eB,eC),function(){return cO.Bind(dW.Play(eH),function(){eC.PreviousNodes=eF;return cO.Return(null);});});});})):dj.SyncElemNodesNextFrame(eB,eC);};dj.PerformSyncUpdate=function(eB,eC,eD){var eE;eE=ec.FindAll(eD);dj.SyncElemNode(eB,eC.Top);eC.PreviousNodes=eE;};dj.CreateTextNode=function(){return{Text:dn.CreateText(""),Dirty:false,Value:""};};dj.UpdateTextNode=function(eB,eC){eB.Value=eC;eB.Dirty=true;};dj.InsertDoc=function(eB,eC,eD){var eE;return eC!=null&&eC.$==1?dj.InsertNode(eB,eC.$0.El,eD):eC!=null&&eC.$==2?(eE=eC.$0,(eE.Dirty=false,dj.InsertDoc(eB,eE.Current,eD))):eC==null?eD:eC!=null&&eC.$==4?dj.InsertNode(eB,eC.$0.Text,eD):eC!=null&&eC.$==5?dj.InsertNode(eB,eC.$0,eD):eC!=null&&eC.$==6?T.foldBack(function(eF,eG){return eF==null||eF.constructor===cM?dj.InsertDoc(eB,eF,eG):dj.InsertNode(eB,eF,eG);},eC.$0.Els,eD):dj.InsertDoc(eB,eC.$0,dj.InsertDoc(eB,eC.$1,eD));};dj.InsertBeforeDelim=function(eB,eC){var eD,eE;eD=eB.parentNode;eE=self.document.createTextNode("");eD.insertBefore(eE,eB);dj.LinkPrevElement(eB,eC);return eE;};dj.SyncElemNodesNextFrame=function(eB,eC){function eD(eE){a.requestAnimationFrame(function(){dj.SyncElemNode(eB,eC.Top);eE();});}return dX.BatchUpdatesEnabled()?cO.FromContinuations(function(eE,eF,eG){return eD.apply(null,[eE,eF,eG]);}):(dj.SyncElemNode(eB,eC.Top),cO.Return(null));};dj.ComputeExitAnim=function(eB,eC){return dW.Concat(T.map(function(eD){return dm.GetExitAnim(eD.Attr);},ec.ToArray(ec.Except(eC,ec.Filter(function(eD){return dm.HasExitAnim(eD.Attr);},eB.PreviousNodes)))));};dj.ComputeEnterAnim=function(eB,eC){return dW.Concat(T.map(function(eD){return dm.GetEnterAnim(eD.Attr);},ec.ToArray(ec.Except(eB.PreviousNodes,ec.Filter(function(eD){return dm.HasEnterAnim(eD.Attr);},eC)))));};dj.ComputeChangeAnim=function(eB,eC){var eD;function eE(eF){return dm.HasChangeAnim(eF.Attr);}eD=function(eF){return ec.Filter(eE,eF);};return dW.Concat(T.map(function(eF){return dm.GetChangeAnim(eF.Attr);},ec.ToArray(ec.Intersect(eD(eB.PreviousNodes),eD(eC)))));};dj.SyncElemNode=function(eB,eC){!eB?dj.SyncElement(eC):void 0;dj.Sync(eC.Children);dj.AfterRender(eC);};dj.InsertNode=function(eB,eC,eD){dn.InsertAt(eB,eD,eC);return eC;};dj.LinkPrevElement=function(eB,eC){dj.InsertDoc(eB.parentNode,eC,eB);};dj.SyncElement=function(eB){function eC(eD){function eE(eF){var eG,eH;return eF!=null&&eF.$==0?eE(eF.$0)||eE(eF.$1):eF!=null&&eF.$==2?(eG=eF.$0,eG.Dirty||eE(eG.Current)):eF!=null&&eF.$==6&&(eH=eF.$0,eH.Dirty||T.exists(eC,eH.Holes));}return eE(eD.Children);}dm.Sync(eB.El,eB.Attr);eC(eB)?dj.DoSyncElement(eB):void 0;};dj.Sync=function(eB){var eC,eD;if(eB!=null&&eB.$==1)dj.SyncElemNode(false,eB.$0);else if(eB!=null&&eB.$==2)dj.Sync(eB.$0.Current);else if(eB==null);else if(eB!=null&&eB.$==5);else if(eB!=null&&eB.$==4){eC=eB.$0;eC.Dirty?(eC.Text.nodeValue=eC.Value,eC.Dirty=false):void 0;}else if(eB!=null&&eB.$==6){eD=eB.$0;T.iter(function(eE){dj.SyncElemNode(false,eE);},eD.Holes);T.iter(function(eE){dm.Sync(eE[0],eE[1]);},eD.Attrs);dj.AfterRender(eD);}else{dj.Sync(eB.$0);dj.Sync(eB.$1);}};dj.AfterRender=function(eB){var eC;eC=et.GetOptional(eB.Render);eC!=null&&eC.$==1?(eC.$0(eB.El),et.SetOptional(eB,"Render",null)):void 0;};dj.DoSyncElement=function(eB){var eC,eD,eE;function eF(eG,eH){var eI,eJ;return eG!=null&&eG.$==1?eG.$0.El:eG!=null&&eG.$==2?(eI=eG.$0,eI.Dirty?(eI.Dirty=false,dj.InsertDoc(eC,eI.Current,eH)):eF(eI.Current,eH)):eG==null?eH:eG!=null&&eG.$==4?eG.$0.Text:eG!=null&&eG.$==5?eG.$0:eG!=null&&eG.$==6?(eJ=eG.$0,(eJ.Dirty?eJ.Dirty=false:void 0,T.foldBack(function(eK,eL){return eK==null||eK.constructor===cM?eF(eK,eL):eK;},eJ.Els,eH))):eF(eG.$0,eF(eG.$1,eH));}eC=eB.El;eq.Iter((eD=eB.El,function(eG){dn.RemoveNode(eD,eG);}),eq.Except(eq.DocChildren(eB),eq.Children(eB.El,et.GetOptional(eB.Delimiters))));eF(eB.Children,(eE=et.GetOptional(eB.Delimiters),eE!=null&&eE.$==1?eE.$0[1]:null));};dk.New=function(eB,eC){return{k:eB,ct:eC};};dl.New=function(eB,eC){return{c:eB,r:eC};};dm.Static=function(eB){return new cP({$:3,$0:eB});};dm.Dynamic=function(eB,eC){return new cP({$:1,$0:new dK.New(eB,eC)});};dm.Insert=function(eB,eC){var eD,eE,eF;function eG(eH){if(!(eH===null))if(eH!=null&&eH.$==1)eD.push(eH.$0);else if(eH!=null&&eH.$==2){eG(eH.$0);eG(eH.$1);}else if(eH!=null&&eH.$==3)eH.$0(eB);else if(eH!=null&&eH.$==4)eE.push(eH.$0);}eD=[];eE=[];eG(eC);eF=eD.slice(0);return dU.New(eB,dm.Flags(eC),eF,eE.length===0?null:{$:1,$0:function(eH){bc.iter(function(eI){eI(eH);},eE);}});};dm.EmptyAttr=function(){d8.$cctor();return d8.EmptyAttr;};dm.Flags=function(eB){return eB!==null&&eB.hasOwnProperty("flags")?eB.flags:0;};dm.AppendTree=function(eB,eC){var eD;return eB===null?eC:eC===null?eB:(eD=new cP({$:2,$0:eB,$1:eC}),(dm.SetFlags(eD,dm.Flags(eB)|dm.Flags(eC)),eD));};dm.Updates=function(eB){return cQ.MapTreeReduce(function(eC){return eC.NChanged();},p.Const(),p.Map2Unit,eB.DynNodes);};dm.Empty=function(eB){return dU.New(eB,0,[],null);};dm.SetFlags=function(eB,eC){eB.flags=eC;};dm.HasExitAnim=function(eB){var eC;eC=2;return(eB.DynFlags&eC)===eC;};dm.GetExitAnim=function(eB){return dm.GetAnim(eB,function(eC,eD){return eC.NGetExitAnim(eD);});};dm.HasEnterAnim=function(eB){var eC;eC=1;return(eB.DynFlags&eC)===eC;};dm.GetEnterAnim=function(eB){return dm.GetAnim(eB,function(eC,eD){return eC.NGetEnterAnim(eD);});};dm.HasChangeAnim=function(eB){var eC;eC=4;return(eB.DynFlags&eC)===eC;};dm.GetChangeAnim=function(eB){return dm.GetAnim(eB,function(eC,eD){return eC.NGetChangeAnim(eD);});};dm.GetAnim=function(eB,eC){return dW.Concat(T.map(function(eD){return eC(eD,eB.DynElem);},eB.DynNodes));};dm.Sync=function(eB,eC){T.iter(function(eD){eD.NSync(eB);},eC.DynNodes);};dn.SetAttr=function(eB,eC,eD){eB.setAttribute(eC,eD);};dn.RemoveAttr=function(eB,eC){eB.removeAttribute(eC);};dn.CreateText=function(eB){return dn.Doc().createTextNode(eB);};dn.SetStyle=function(eB,eC,eD){dn.SetProperty(eB.style,eC,eD);};dn.ChildrenArray=function(eB){var eC,eD,eE;eC=[];for(eD=0,eE=eB.childNodes.length-1;eD<=eE;eD++)eC.push(eB.childNodes[eD]);return eC;};dn.CreateElement=function(eB){return dn.Doc().createElement(eB);};dn.Doc=function(){d7.$cctor();return d7.Doc;};dn.SetProperty=function(eB,eC,eD){return eB.setProperty(eC,eD);};dn.IterSelector=function(eB,eC,eD){var eE,eF,eG;eE=eB.querySelectorAll(eC);for(eF=0,eG=eE.length-1;eF<=eG;eF++)eD(eE[eF]);};dn.InsertAt=function(eB,eC,eD){var eE;if(!(eD.parentNode===eB&&eC===(eE=eD.nextSibling,J.Equals(eE,null)?null:eE)))eB.insertBefore(eD,eC);};dn.RemoveClass=function(eB,eC){var eD;dn.setClass(eB,(eD=dn.clsRE(eC),dn.getClass(eB).replace(eD,function(eE,eF,eG){return eF===""||eG===""?"":" ";})));};dn.AddClass=function(eB,eC){var eD;eD=dn.getClass(eB);eD===""?dn.setClass(eB,eC):!dn.clsRE(eC).test(eD)?dn.setClass(eB,eD+" "+eC):void 0;};dn.setClass=function(eB,eC){if(eB instanceof a.SVGElement)eB.setAttribute("class",eC);else eB.className=eC;};dn.getClass=function(eB){return eB instanceof a.SVGElement?eB.getAttribute("class"):eB.className;};dn.clsRE=function(eB){return new a.RegExp("(\\s+|^)"+eB+"(?:\\s+"+eB+")*(\\s+|$)","g");};dn.RemoveNode=function(eB,eC){if(eC.parentNode===eB)eB.removeChild(eC);};_do.$cctor=function(){_do.$cctor=a.ignore;_do.noneCT=dl.New(false,[]);_do.scheduler=new dI.New();_do.defCTS=[new dJ.New()];_do.Zero=cO.Return();_do.GetCT=function(eB){eB.k({$:0,$0:eB.ct});};};dp=cS.ArrayStorage=et.Class({SSet:function(eB){return T.ofSeq(eB);},SSetAt:function(eB,eC,eD){T.set(eD,eB,eC);return eD;},SAppend:function(eB,eC){eC.push(eB);return eC;},SInit:function(){return this.init;}},g,dp);dp.New=et.Ctor(function(eB){g.New.call(this);this.init=eB;},dp);dq.freshId=function(){dq.set_counter(dq.counter()+1);return"varuid"+a.String(dq.counter());};dq.set_counter=function(eB){_5.$cctor();_5.counter=eB;};dq.counter=function(){_5.$cctor();return _5.counter;};dr=M.ConceptoPago=et.Class({toString:function(){return this.$==2?this.$0:(function(eB){return function(eC){return eB(bb.p$8(eC));};}(a.id))(this);}},null,dr);ds.FormaContrato=function(){_5.$cctor();return _5.FormaContrato;};ds.FormasPago=function(){_5.$cctor();return _5.FormasPago;};ds.Subir=function(){_5.$cctor();return _5.Subir;};ds.FormaW8BEN=function(){_5.$cctor();return _5.FormaW8BEN;};ds.FormaW9=function(){_5.$cctor();return _5.FormaW9;};dt.extractNodes=function(eB){var eC,eD;function eE(eF,eG,eH,eI){var eJ,eK,eL,eM,eN,eO;eJ=dt.extractNodes(eH);eK=dt.extractNodes(eI);return(eJ.$==0?(eM=eJ.$0,!J.Equals(eM,null)&&eM.length===0)?(eL=eK,true):eK.$==0?(eN=eK.$0,!J.Equals(eN,null)&&eN.length===0)?(eL=eJ,true):(eL=[eJ,eK],false):(eL=[eJ,eK],false):eK.$==0?(eO=eK.$0,!J.Equals(eO,null)&&eO.length===0)?(eL=eJ,true):(eL=[eJ,eK],false):(eL=[eJ,eK],false))?eL:{$:1,$0:{$:0,$0:eF,$1:eG,$2:eL[0],$3:eL[1]}};}eC=dt.horizontalSplit(eB);return eC!=null&&eC.$==1?eE(false,eC.$0[2],eC.$0[0],eC.$0[1]):(eD=dt.verticalSplit(eB),eD!=null&&eD.$==1?eE(true,eD.$0[2],eD.$0[0],eD.$0[1]):{$:0,$0:dt.cleanSpaces(eB)});};dt.createLayoutDefinitions=function(eB,eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM;return eC.$==1?(eD=eC.$0.$0,(eE=eC.$0.$1,(eF=dt.createLayoutDefinitions(eB+"_1",eC.$0.$2),(eG=eF[0],(eH=eF[1],(eI=dt.createLayoutDefinitions(eB+"_2",eC.$0.$3),(eJ=eI[0],(eK=eI[1],[eB,T.ofSeq(bc.delay(function(){return bc.append([bj.concat(" ",bz.ofArray([eB,eD?"vertical":"horizontal",a.String(eE),eG,eJ]))],bc.delay(function(){return bc.append(eH,bc.delay(function(){return eK;}));}));}))])))))))):(eL=eC.$0,!J.Equals(eL,null)&&eL.length===0)?["___",[]]:(eM=eC.$0,!J.Equals(eM,null)&&eM.length===1)?[T.get(eC.$0,0),[]]:[eB,[eB+" div \"\" "+bj.concat(" ",eC.$0)]];};dt.horizontalSplit=function(eB){var eC,eD,eE,eF,eG;function eH(eI,eJ){var eK,eL,eM,eN;eK=j.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",eJ);return eK!=null&&eK.$==1?{$:1,$0:[[eI,(eL=(eM=bc.tryItem(1,eK.$0),eM==null?null:dt.extractMeasuresO(bj.Replace(bj.Replace(eM.$0,"^",""),"v","-"))),(eN=new dL({$:1,$0:5,$1:50,$2:95}),eL==null?eN:eL.$0))],eJ.indexOf("-")]}:null;}eC=(eD=bc.tryHead(bc.sortBy(function(eI){return eI[1];},bc.choose(function(eI){return eH(eI[0],eI[1]);},bc.indexed(eB)))),eD==null?null:{$:1,$0:eD.$0[0]});return eC==null?null:{$:1,$0:(eE=eC.$0,(eF=eE[0],(eG=eE[1],[cc.array(eB,null,{$:1,$0:eF-1}),cc.array(eB,{$:1,$0:eF+1},null),eG])))};};dt.verticalSplit=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL;function eM(eP,eQ){var eR,eS,eT;return(eS=j.REGEX$1("^ *\\|+ *$","",eQ),eS!=null&&eS.$==1&&(eT=eS.$0,!J.Equals(eT,null)&&eT.length===1))?{$:1,$0:[eP,eQ.indexOf("|")]}:null;}function eN(eP){return J.Equals(null,eP);}function eO(eP){return J.Equals(null,eP);}eC=dt.transpose(eB);eD=(eE=(eF=bc.tryHead(bc.sortBy(function(eP){return eP[1];},bc.choose(function(eP){return eM(eP[0],eP[1]);},bc.indexed(eC)))),eF==null?null:{$:1,$0:eF.$0[0]}),eE==null?null:{$:1,$0:(eG=eE.$0,[dt.transpose(cc.array(eC,null,{$:1,$0:eG-1})),dt.transpose(cc.array(eC,{$:1,$0:eG+1},null))])});return eD==null?null:{$:1,$0:(eH=eD.$0,(eI=eH[0],(eJ=eH[1],[T.filter(function(eP){return eN(dt.extractMeasuresO(eP));},eI),T.filter(function(eP){return eO(dt.extractMeasuresO(eP));},eJ),(eK=bc.tryHead(bc.delay(function(){return bc.append(bc.choose(dt.extractMeasuresO,eI),bc.delay(function(){return bc.map(function(eP){return eP.$==0?eP.$1?new dL({$:0,$0:eP.$0,$1:false}):eP:eP;},bc.choose(dt.extractMeasuresO,eJ));}));})),(eL=new dL({$:1,$0:5,$1:50,$2:95}),eK==null?eL:eK.$0))])))};};dt.cleanSpaces=function(eB){return T.filter(function(eC){var eD;return!(eD=(cw.Int())(eC),eD!=null&&eD.$==1);},bj.SplitStrings(bj.concat(" ",eB),[" "],1));};dt.extractMeasuresO=function(eB){var eC,eD,eE,eF,eG,eH,eI;eC=bj.SplitChars(eB,[" "],1);return!J.Equals(eC,null)&&eC.length===1&&(eE=(cw.Int())(T.get(eC,0)),eE!=null&&eE.$==1&&(eD=eE.$0,true))?{$:1,$0:new dL({$:0,$0:eu.abs(eD),$1:eD>=0})}:!J.Equals(eC,null)&&eC.length===3&&(eG=(cw.Int())(T.get(eC,0)),eG!=null&&eG.$==1&&(eH=(cw.Int())(T.get(eC,1)),eH!=null&&eH.$==1&&(eI=(cw.Int())(T.get(eC,2)),eI!=null&&eI.$==1&&(eF=[eI.$0,eG.$0,eH.$0],true))))?{$:1,$0:new dL({$:1,$0:eF[1],$1:eF[2],$2:eF[0]})}:null;};dt.transpose=function(eB){var eC;eC=bc.max(bc.map(function(eD){return eD.length;},eB));return T.ofSeq(bc.delay(function(){return bc.map(function(eD){return T.ofSeq(bc.delay(function(){return bc.map(function(eE){return eE.length>eD?eE[eD]:" ";},eB);})).join("");},o.range(0,eC-1));}));};du.TryParse=function(eB){var eC;eC=ex.parse(eB);return a.isNaN(eC)?null:{$:1,$0:eC};};b0.TryParse=function(eB,eC,eD,eE){var eF,eG;eF=+eB;eG=eF===eF-eF%1&&eF>=eC&&eF<=eD;eG?eE.set(eF):void 0;return eG;};b0.TryParseBool=function(eB,eC){var eD;eD=eB.toLowerCase();return eD==="true"?(eC.set(true),true):eD==="false"&&(eC.set(false),true);};bd.delayed=function(eB,eC){var eD;eD=[null];return function(eE){var eF,eG;eF=eD[0];eF==null?void 0:eF.$0.Cancel$1();eD[0]={$:1,$0:new dJ.New()};cO.Start((eG=null,cO.Delay(function(){return cO.Bind(cO.Sleep(eB),function(){eC(eE);return cO.Zero();});})),{$:1,$0:eD[0].$0});};};bd.print=function(eB){if(typeof eB=="string")((function(eC){return function(eD){return eC(bD.toSafe(eD));};}(function(eC){ew.log(eC);}))(eB));else((function(eC){return function(eD){return eC(bD.prettyPrint(eD));};}(function(eC){ew.log(eC);}))(eB));};bd["String.Left"]=function(eB,eC){return eC<0?bd["String.Substring2"](eB,0,eB.length+eC):bd["String.Substring2"](eB,0,eC);};bd["String.Substring2"]=function(eB,eC,eD){var eE,eF;while(true){if(eD<=0)return"";else if(eC<0){eE=eC;eC=0;eD=eD+eE;}else return eC>=eB.length?"":bj.Substring(eB,eC,(eF=eB.length-eC,J.Compare(eD,eF)===-1?eD:eF));}};dv=c0.WcSplitterT=et.Class({connectedCallback:function(){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ;function eR(eZ){var e0,e1,e2,e3;e0=eI?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];e1=a.parseFloat("0"+ev(eZ.parentElement.parentElement).css(e0[0]));e2=a.parseFloat("0"+ev(eZ.parentElement.parentElement).css(e0[1]));eL.Set(a.parseFloat("0"+ev(eZ.parentElement.parentElement).css(e0[2])));eK[0]=e1+e2;e3=eB.getBoundingClientRect();return eI?eH?[e3.width,e3.height]:[-e3.width,e3.height]:eH?[e3.height,e3.width]:[-e3.height,e3.width];}function eS(eZ){return eI?eZ.clientX:eZ.clientY;}function eT(eZ){var e0,e1;e0=(eS(eZ)-eO[0])*100/eJ[0][0]+eN[0];eG.Set((e1=J.Compare(eE,e0)===1?eE:e0,J.Compare(eF,e1)===-1?eF:e1));}function eU(){if(eM[0]){eM[0]=false;self.removeEventListener("mousemove",eT,false);self.removeEventListener("mouseup",eU,false);}}function eV(eZ){var e0,e1;if(!eM[0]){eM[0]=true;eN[0]=eG.Get();eO[0]=eS(eZ);eJ[0]=(e0=(e1=eP[0],e1==null?null:{$:1,$0:eR(e1.$0)}),e0==null?[100,500]:e0.$0);self.addEventListener("mousemove",eT,false);self.addEventListener("mouseup",eU,false);eZ.preventDefault();}}function eW(eZ,e0,e1,e2){return[(eZ-e0-e1)*e2/100,(eZ-e0-e1)*(100-e2)/100];}function eX(eZ,e0){return(((((et.Curried(function(e1,e2,e3,e4,e5){return e1(" "+e2.toFixed(2)+"px "+e3.toFixed(2)+"px ; "+bD.toSafe(e4)+" : "+e5.toFixed(2)+"px; ");},5))(a.id))(eZ))(e0))(eI?"height":"width"))(eJ[0][1]);}function eY(){var eZ;eZ=eP[0];eZ==null?void 0:eJ[0]=eR(eZ.$0);eG.Set(eG.Get());}if(!this.added){eB=this;eC=eB.attachShadow({mode:"open"});eD=self.document.createElement("div");eE=eB.hasAttribute("min")?a.parseFloat(eB.getAttribute("min")):4;eF=eB.hasAttribute("max")?a.parseFloat(eB.getAttribute("max")):96;eG=i.Create$1(eB.hasAttribute("value")?a.parseFloat(eB.getAttribute("value")):50);eH=!eB.hasAttribute("second");eI=eB.hasAttribute("vertical");eJ=[[0,0]];eK=[0];eL=i.Create$1(0);eM=[false];eN=[0];eO=[0];eP=[null];eQ=(((((eI?c0.layoutVertical():c0.layoutHorizontal())(p.Map(function(eZ){var e0;e0=eW(eJ[0][0],eL.Get(),eK[0],eZ);return eX.apply(null,e0);},eG.get_View())))(function(){dQ.addResizeObserver(eY,eB);eY();}))(function(eZ){eP[0]={$:1,$0:eZ};eY();}))(function(eZ){eV(eZ);}))(p.Map(function(eZ){return function(e0){return eZ(bD.prettyPrint(e0)+"px");};}(a.id),eL.get_View()));c7.LoadLocalTemplates("");Z.Run(eD,eQ);eC.appendChild(eD.firstChild);this.added=true;}}},g,dv);dv.Constructor=function(){var eB,eC;eB=(eC=ez.construct(self.HTMLElement,[],this.__proto__.constructor),eC);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(eB);return eB;};dv.New=et.Ctor(function(){g.New.call(this);this.added=false;(function(eB){return eB("WcSplitterT initializer");}(function(eB){ew.log(eB);}));},dv);dw=h.DocElemNode=et.Class({Equals:function(eB){return this.ElKey===eB.ElKey;},GetHashCode:function(){return this.ElKey;}},null,dw);dw.New=function(eB,eC,eD,eE,eF,eG){var eH;return new dw((eH={Attr:eB,Children:eC,El:eE,ElKey:eF},(et.SetOptional(eH,"Delimiters",eD),et.SetOptional(eH,"Render",eG),eH)));};dy.$cctor=function(){dy.$cctor=a.ignore;dy.counter=0;};dz=ch.FSharpEvent=et.Class({},g,dz);dz.New=et.Ctor(function(){g.New.call(this);this.event=d1.New([]);},dz);dA=bg.LinkedList=et.Class({AddLast:function(eB){var eC;return this.c===0?(eC={p:null,n:null,v:eB},(this.n=eC,this.p=this.n,this.c=1,eC)):this.AddAfter(this.p,eB);},GetEnumerator$1:function(){return new em.New(this);},AddAfter:function(eB,eC){var eD,eE;eD=eB.n;eE={p:eB,n:eD,v:eC};J.Equals(eB.n,null)?this.p=eE:void 0;eB.n=eE;!J.Equals(eD,null)?eD.p=eE:void 0;this.c=this.c+1;return eE;},RemoveFirst:function(){this.Remove$1(this.n);},Remove$1:function(eB){var eC,eD;eC=eB.p;eD=eB.n;J.Equals(eC,null)?this.n=eD:eC.n=eD;J.Equals(eD,null)?this.p=eC:eD.p=eC;this.c=this.c-1;},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,dA);dA.New=et.Ctor(function(){dA.New$1.call(this,[]);},dA);dA.New$1=et.Ctor(function(eB){var eC,eD;g.New.call(this);this.c=0;this.n=null;this.p=null;eC=cr.Get(eB);eC.MoveNext()?(this.n={p:null,n:null,v:eC.Current()},this.p=this.n,this.c=1):void 0;while(eC.MoveNext()){eD={p:this.p,n:null,v:eC.Current()};this.p.n=eD;this.p=eD;this.c=this.c+1;}},dA);dB.New$1=function(eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL){return c8.newPojoOpt([cd.op_EqualsEqualsGreater("account",eB),cd.op_EqualsEqualsGreater("authority",eC),cd.op_EqualsEqualsGreater("claimsRequest",eD),cd.op_EqualsEqualsGreater("correlationId",eE),cd.op_EqualsEqualsGreater("extraQueryParameters",eF),cd.op_EqualsEqualsGreater("extraScopesToConsent",eG),cd.op_EqualsEqualsGreater("loginHint",eH),cd.op_EqualsEqualsGreater("prompt",eI),cd.op_EqualsEqualsGreater("scopes",eJ),cd.op_EqualsEqualsGreater("sid",eK),cd.op_EqualsEqualsGreater("state",eL)]);};dC=cd.Account=et.Class({},g,dC);dD.New$1=function(eB,eC){return{Parse:eB,Write:eC};};dE.startsWith=function(eB,eC){var eD;switch(eB.$==1?eC.$==1?J.Equals(eB.$0,eC.$0)?(eD=[eC.$0,eC.$1,eB.$0,eB.$1],1):2:2:0){case 0:return{$:1,$0:eC};case 1:return dE.startsWith(eD[3],eD[1]);case 2:return null;}};dF=cm.XhrProvider=et.Class({Async:function(eB,eC,eD,eE,eF){cm.ajax(true,eB,eC,eD,eE,eF,function(){cm.ajax(true,eB,eC,eD,eE,eF,void 0);});}},g,dF);dF.New=et.Ctor(function(){g.New.call(this);},dF);dG=bg.Pair=et.Class({Equals:function(eB){return J.Equals(this.Key,eB.Key);},GetHashCode:function(){return J.Hash(this.Key);},CompareTo0:function(eB){return J.Compare(this.Key,eB.Key);}},null,dG);dG.New=function(eB,eC){return new dG({Key:eB,Value:eC});};dH.Map=function(eB,eC){return eC.$==1?{$:1,$0:eC.$0}:{$:0,$0:eB(eC.$0)};};dH.Bind=function(eB,eC){return eC.$==1?{$:1,$0:eC.$0}:eB(eC.$0);};dI=cO.Scheduler=et.Class({Fork:function(eB){var eC;eC=this;this.robin.push(eB);this.idle?(this.idle=false,a.setTimeout(function(){eC.tick();},0)):void 0;},tick:function(){var eB,eC,eD;eC=this;eD=ex.now();eB=true;while(eB)if(this.robin.length===0){this.idle=true;eB=false;}else{(this.robin.shift())();ex.now()-eD>40?(a.setTimeout(function(){eC.tick();},0),eB=false):void 0;}}},g,dI);dI.New=et.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},dI);dJ=f.CancellationTokenSource=et.Class({Cancel$1:function(){var eB;if(!this.c){this.c=true;eB=T.choose(function(eC){try{eC();return null;}catch(eD){return{$:1,$0:eD};}},this.r);if(T.length(eB)>0)throw new d9.New$3(eB);else void 0;}}},g,dJ);dJ.New=et.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},dJ);dK=h.DynamicAttrNode=et.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(eB){return dW.get_Empty();},NGetEnterAnim:function(eB){return dW.get_Empty();},NGetChangeAnim:function(eB){return dW.get_Empty();},NSync:function(eB){if(this.dirty){(this.push(eB))(this.value);this.dirty=false;}}},g,dK);dK.New=et.Ctor(function(eB,eC){var eD;eD=this;g.New.call(this);this.push=eC;this.value=void 0;this.dirty=false;this.updates=p.Map(function(eE){eD.value=eE;eD.dirty=true;},eB);},dK);j.REGEX$1=function(eB,eC,eD){var eE;return eD===null?null:(eE=(new a.String(eD)).match(new a.RegExp(eB,eC)),J.Equals(eE,null)?null:!J.Equals(eE,null)&&eE.length===0?null:{$:1,$0:eE});};dL=K.Measures=et.Class({toString:function(){return this.$==1?((((et.Curried(function(eB,eC,eD,eE){return eB(a.String(eC)+"-"+a.String(eD)+"-"+a.String(eE));},4))(a.id))(o.toInt(this.$0)))(o.toInt(this.$1)))(o.toInt(this.$2)):a.String(o.toInt(this.$1?this.$0:-this.$0));}},null,dL);dN=dM.Hoverable=et.Class({Content:function(eB){return eB.on("mouseenter",function(){return dn.AddClass(eB.elt,"hovering");}).on("mouseleave",function(){return dn.RemoveClass(eB.elt,"hovering");});}},null,dN);dN.New$1=function(){return dN.New(i.Create$1(false));};dN.New=function(eB){return new dN({hover:eB});};dQ.addResizeObserver=function(eB,eC){var eD,eE,eF,eG;try{eD=!(!a.ResizeObserver);}catch(eH){eD=false;}if(eD){eE=new a.ResizeObserver(eB);dQ.set_observers(new cu({$:1,$0:eE,$1:dQ.observers()}));eE.observe(eC);}else{eF=dQ.dimsChanged(eC);cO.Start((eG=null,cO.Delay(function(){return cO.While(function(){return eC.isConnected;},cO.Delay(function(){return cO.Bind(cO.Sleep(110),function(){return eF()?(eB(),cO.Zero()):cO.Zero();});}));})),null);}};dQ.set_observers=function(eB){bV.$cctor();bV.observers=eB;};dQ.observers=function(){bV.$cctor();return bV.observers;};dQ.dimsChanged=function(eB){var eC;eC=[eB.getBoundingClientRect()];return function(){var eD;eD=eB.getBoundingClientRect();return J.Equals(dQ.domRect2Tuple(eC[0]),dQ.domRect2Tuple(eD))?false:(eC[0]=eD,true);};};dQ.domRect2Tuple=function(eB){return[eB.top,eB.left,eB.width,eB.height];};dR.$cctor=function(){dR.$cctor=a.ignore;dR.LoadedTemplates=new b3.New$5();dR.LocalTemplatesLoaded=false;dR.TextHoleRE="\\${([^}]+)}";};dS=h.Elt=et.Class({on:function(eB,eC){var eD;eD=this;this.elt.addEventListener(eB,function(eE){return eC(eD.elt,eE);},false);return this;}},Z,dS);dS.TreeNode=function(eB,eC){var eD,eE;function eF(eG){return eG[1];}eD=d$.Create(eC);return new dS.New$1({$:6,$0:eB},p.Map2Unit((eE=T.map(function(eG){return dm.Updates(eF(eG));},eB.Attrs),cQ.TreeReduce(p.Const(),p.Map2Unit,eE)),eD.v),T.get(eB.Els,0),eD);};dS.New=function(eB,eC,eD){var eE,eF;eE=dj.CreateElemNode(eB,eC,eD.docNode);eF=d$.Create(eD.updates);return new dS.New$1({$:1,$0:eE},p.Map2Unit(dm.Updates(eE.Attr),eF.v),eB,eF);};dS.New$1=et.Ctor(function(eB,eC,eD,eE){Z.New.call(this,eB,eC);this.docNode$1=eB;this.updates$1=eC;this.elt=eD;this.rvUpdates=eE;},dS);dU.New=function(eB,eC,eD,eE){var eF;eF={DynElem:eB,DynFlags:eC,DynNodes:eD};et.SetOptional(eF,"OnAfterRender",eE);return eF;};dV.convertTextNode=function(eB){var eC,eD,eE,eF,eG,eH;eC=null;eD=0;eF=eB.textContent;eG=new a.RegExp(c7.TextHoleRE(),"g");while(eC=eG.exec(eF),eC!==null){eB.parentNode.insertBefore(self.document.createTextNode(cc.string(eF,{$:1,$0:eD},{$:1,$0:eG.lastIndex-T.get(eC,0).length-1})),eB);eD=eG.lastIndex;eH=self.document.createElement("span");eH.setAttribute("ws-replace",T.get(eC,1).toLowerCase());eB.parentNode.insertBefore(eH,eB);}eG.lastIndex=0;eB.textContent=cc.string(eF,{$:1,$0:eD},null);};dV.failNotLoaded=function(eB){ew.warn("Instantiating non-loaded template",eB);};dV.fillTextHole=function(eB,eC,eD){var eE;eE=eB.querySelector("[ws-replace]");return J.Equals(eE,null)?(ew.warn("Filling non-existent text hole",eD),null):(eE.parentNode.replaceChild(new a.Text(eC),eE),{$:1,$0:eE.getAttribute("ws-replace")});};dV.removeHolesExcept=function(eB,eC){function eD(eE){dn.IterSelector(eB,"["+eE+"]",function(eF){if(!eC.Contains(eF.getAttribute(eE)))eF.removeAttribute(eE);});}eD("ws-attr");eD("ws-onafterrender");eD("ws-var");dn.IterSelector(eB,"[ws-hole]",function(eE){if(!eC.Contains(eE.getAttribute("ws-hole"))){eE.removeAttribute("ws-hole");while(eE.hasChildNodes())eE.removeChild(eE.lastChild);}});dn.IterSelector(eB,"[ws-replace]",function(eE){if(!eC.Contains(eE.getAttribute("ws-replace")))eE.parentNode.removeChild(eE);});dn.IterSelector(eB,"[ws-on]",function(eE){eE.setAttribute("ws-on",bj.concat(" ",T.filter(function(eF){return eC.Contains(T.get(bj.SplitChars(eF,[":"],1),1));},bj.SplitChars(eE.getAttribute("ws-on"),[" "],1))));});dn.IterSelector(eB,"[ws-attr-holes]",function(eE){var eF,eG,eH,eI,eJ;eF=bj.SplitChars(eE.getAttribute("ws-attr-holes"),[" "],1);for(eG=0,eH=eF.length-1;eG<=eH;eG++){eI=T.get(eF,eG);eE.setAttribute(eI,(eJ=new a.RegExp(c7.TextHoleRE(),"g"),eE.getAttribute(eI).replace(eJ,function(eK,eL){return eC.Contains(eL)?eK:"";})));}});};dV.fillInstanceAttrs=function(eB,eC){var eD,eE,eF,eG,eH;dV.convertAttrs(eC);eD=eC.nodeName.toLowerCase();eE=eB.querySelector("[ws-attr="+eD+"]");if(J.Equals(eE,null))ew.warn("Filling non-existent attr hole",eD);else{eE.removeAttribute("ws-attr");for(eF=0,eG=eC.attributes.length-1;eF<=eG;eF++){eH=eC.attributes.item(eF);eH.name==="class"&&eE.hasAttribute("class")?eE.setAttribute("class",eE.getAttribute("class")+" "+eH.nodeValue):eE.setAttribute(eH.name,eH.nodeValue);}}};dV.mapHoles=function(eB,eC){function eD(eE){dn.IterSelector(eB,"["+eE+"]",function(eF){var eG,eH;eG=(eH=null,[eC.TryGetValue(eF.getAttribute(eE).toLowerCase(),{get:function(){return eH;},set:function(eI){eH=eI;}}),eH]);eG[0]?eF.setAttribute(eE,eG[1]):void 0;});}eD("ws-hole");eD("ws-replace");eD("ws-attr");eD("ws-onafterrender");eD("ws-var");dn.IterSelector(eB,"[ws-on]",function(eE){eE.setAttribute("ws-on",bj.concat(" ",T.map(function(eF){var eG,eH,eI;eG=bj.SplitChars(eF,[":"],1);eH=(eI=null,[eC.TryGetValue(T.get(eG,1),{get:function(){return eI;},set:function(eJ){eI=eJ;}}),eI]);return eH[0]?T.get(eG,0)+":"+eH[1]:eF;},bj.SplitChars(eE.getAttribute("ws-on"),[" "],1))));});dn.IterSelector(eB,"[ws-attr-holes]",function(eE){var eF,eG,eH;eF=bj.SplitChars(eE.getAttribute("ws-attr-holes"),[" "],1);for(eG=0,eH=eF.length-1;eG<=eH;eG++)(function(){var eI;function eJ(eK,eL){var eM;eM=o.KeyValue(eL);return eK.replace(new a.RegExp("\\${"+eM[0]+"}","ig"),"${"+eM[1]+"}");}eI=T.get(eF,eG);return eE.setAttribute(eI,(((et.Curried3(bc.fold))(eJ))(eE.getAttribute(eI)))(eC));}());});};dV.fill=function(eB,eC,eD){while(true)if(eB.hasChildNodes())eD=eC.insertBefore(eB.lastChild,eD);else return null;};dV.convertAttrs=function(eB){var eD,eE,eF,eG,eH,eI,eJ,eK;function eC(eL){var eM;eM=eB.getAttribute(eL);eM===null?void 0:eB.setAttribute(eL,eM.toLowerCase());}eD=eB.attributes;eE=[];eF=[];eG=[];for(eH=0,eI=eD.length-1;eH<=eI;eH++){eJ=eD.item(eH);bj.StartsWith(eJ.nodeName,"ws-on")&&eJ.nodeName!=="ws-onafterrender"&&eJ.nodeName!=="ws-on"?(eE.push(eJ.nodeName),eF.push(cc.string(eJ.nodeName,{$:1,$0:"ws-on".length},null)+":"+eJ.nodeValue.toLowerCase())):!bj.StartsWith(eJ.nodeName,"ws-")&&(new a.RegExp(c7.TextHoleRE())).test(eJ.nodeValue)?(eJ.nodeValue=(eK=new a.RegExp(c7.TextHoleRE(),"g"),eJ.nodeValue.replace(eK,function(eL,eM){return"${"+eM.toLowerCase()+"}";})),eG.push(eJ.nodeName)):void 0;}!(eF.length==0)?eB.setAttribute("ws-on",bj.concat(" ",eF)):void 0;!(eG.length==0)?eB.setAttribute("ws-attr-holes",bj.concat(" ",eG)):void 0;eC("ws-hole");eC("ws-replace");eC("ws-attr");eC("ws-onafterrender");eC("ws-var");T.iter(function(eL){eB.removeAttribute(eL);},eE);};dW.get_UseAnimations=function(){return ed.UseAnimations();};dW.Play=function(eB){var eC;eC=null;return cO.Delay(function(){return cO.Bind(dW.Run(a.ignore,ed.Actions(eB)),function(){ed.Finalize(eB);return cO.Return(null);});});};dW.Append=function(eB,eC){return{$:0,$0:el.Append(eB.$0,eC.$0)};};dW.Run=function(eB,eC){var eD;function eE(eF){function eG(eH,eI){var eJ;eJ=eI-eH;eC.Compute(eJ);eB();return eJ<=eD?void a.requestAnimationFrame(function(eK){eG(eH,eK);}):eF();}a.requestAnimationFrame(function(eH){eG(eH,eH);});}eD=eC.Duration;return eD===0?cO.Zero():cO.FromContinuations(function(eF,eG,eH){return eE.apply(null,[eF,eG,eH]);});};dW.Concat=function(eB){return{$:0,$0:el.Concat(bc.map(ed.List,eB))};};dW.get_Empty=function(){return{$:0,$0:el.Empty()};};dX.BatchUpdatesEnabled=function(){ee.$cctor();return ee.BatchUpdatesEnabled;};dY.StartProcessor=function(eB){var eC;function eD(){var eE;eE=null;return cO.Delay(function(){return cO.Bind(eB,function(){var eF;eF=eC[0];return eF===1?(eC[0]=0,cO.Zero()):eF===2?(eC[0]=1,eD()):cO.Zero();});});}eC=[0];return function(){var eE;eE=eC[0];eE===0?(eC[0]=1,cO.Start(eD(),null)):eE===1?eC[0]=2:void 0;};};dZ.concat=function(eB){var eC,eD;eC=[];for(var eE in eB)eC.push.apply(eC,eB[eE]);return eC;};d1=d0.Event=et.Class({Trigger:function(eB){var eC,eD,eE;eC=this.Handlers.slice();for(eD=0,eE=eC.length-1;eD<=eE;eD++)(T.get(eC,eD))(null,eB);},Dispose:a.ignore},null,d1);d1.New=function(eB){return new d1({Handlers:eB});};d2=H.NonStandardPromiseRejectionException=et.Class({},c9,d2);d2.New=et.Ctor(function(eB){this.message="Promise rejected";cM.setPrototypeOf(this,d2.prototype);this.reason=eB;},d2);d3.$cctor=function(){d3.$cctor=a.ignore;function eB(eC){var eD,eE;eD=(eE=0,[b0.TryParseInt32(eC,{get:function(){return eE;},set:function(eF){eE=eF;}}),eE]);return eD[0]?{$:1,$0:eD[1]}:null;}d3.Empty=dD.New$1(function(){return[];},function(){return null;});d3.rRoot=dD.New(function(eC){return[eC];},[]);d3.rString=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=eh.read(eD.$0),eE!=null&&eE.$==1?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE.$0]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(eC==null?"null":eh.write(eC))]};});d3.rChar=dD.New$1(function(eC){var eD,eE,eF;eD=eC.Segments;return eD.$==1?(eE=eh.read(eD.$0),eE!=null&&eE.$==1&&(eE.$0.length===1&&(eF=eE.$0,true))?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),ef.Parse(eF)]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(eC)]};});d3.rGuid=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=null,bt.TryParse(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rInt=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseInt32(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rDouble=dD.New$1(function(eC){var eD,eE,eF;eD=eC.Segments;return eD.$==1?(eE=0,(eF=a.Number(eD.$0),a.isNaN(eF)?false:(eE=eF,true))?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rSByte=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseSByte(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rByte=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseByte(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rInt16=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseInt16(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rUInt16=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseUInt16(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rUInt=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseUInt32(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rInt64=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseInt64(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rUInt64=dD.New$1(function(eC){var eD,eE;eD=eC.Segments;return eD.$==1?(eE=0,b0.TryParseUInt64(eD.$0,{get:function(){return eE;},set:function(eF){eE=eF;}})?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rSingle=dD.New$1(function(eC){var eD,eE,eF;eD=eC.Segments;return eD.$==1?(eE=0,(eF=a.Number(eD.$0),a.isNaN(eF)?false:(eE=eF,true))?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(a.String(eC))]};});d3.rBool=dD.New$1(function(eC){var eD,eE,eF;eD=eC.Segments;return eD.$==1?(eE=(eF=null,[b0.TryParseBool(eD.$0,{get:function(){return eF;},set:function(eG){eF=eG;}}),eF]),eE[0]?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),eE[1]]]:[]):[];},function(eC){return{$:1,$0:[dd.Segment$2(eC?"True":"False")]};});d3.rWildcard=dD.New$1(function(eC){return[[dd.New(cu.Empty,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),bj.concat("/",eC.Segments)]];},function(eC){return{$:1,$0:[dd.Segment$2(eC)]};});d3.rDateTime=dD.New$1(function(eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL;eD=eC.Segments;return eD.$==1?(eE=eD.$0,eE.length===19&&eE[4]==="-"&&eE[7]==="-"&&eE[10]==="-"&&eE[13]==="."&&eE[16]==="."?(eF=eB(cc.string(eE,{$:1,$0:0},{$:1,$0:3})),(eG=eB(cc.string(eE,{$:1,$0:5},{$:1,$0:6})),(eH=eB(cc.string(eE,{$:1,$0:8},{$:1,$0:9})),(eI=eB(cc.string(eE,{$:1,$0:11},{$:1,$0:12})),(eJ=eB(cc.string(eE,{$:1,$0:14},{$:1,$0:15})),(eK=eB(cc.string(eE,{$:1,$0:17},{$:1,$0:18})),eF!=null&&eF.$==1&&(eG!=null&&eG.$==1&&(eH!=null&&eH.$==1&&(eI!=null&&eI.$==1&&(eJ!=null&&eJ.$==1&&(eK!=null&&eK.$==1&&(eL=[eH.$0,eI.$0,eG.$0,eJ.$0,eK.$0,eF.$0],true))))))?[[dd.New(eD.$1,eC.QueryArgs,eC.FormData,eC.Method,eC.Body),(new ex(eL[5],eL[2]-1,eL[0],eL[1],eL[3],eL[4])).getTime()]]:[])))))):[]):[];},function(eC){var eD,eE;function eF(eG){var eH;eH=a.String(eG);return eH.length===1?"0"+eH:eH;}return{$:1,$0:[dd.Segment$2((eD=a.String((new ex(eC)).getFullYear()),(eE=eD.length,eE===1?"000"+eD:eE===2?"00"+eD:eE===3?"0"+eD:eD))+"-"+eF((new ex(eC)).getMonth()+1)+"-"+eF((new ex(eC)).getDate())+"-"+eF((new ex(eC)).getHours())+"."+eF((new ex(eC)).getMinutes())+"."+eF((new ex(eC)).getSeconds()))]};});};d4.OfArray=function(eB){return new cq.New$1(ct.OfSeq(bc.map(function(eC){return dG.New(eC[0],eC[1]);},eB)));};d4.FoldBack=function(eB,eC,eD){return bc.fold(function(eE,eF){return eB(eF.Key,eF.Value,eE);},eD,ct.Enumerate(true,eC.get_Tree()));};d4.ToSeq=function(eB){return bc.map(function(eC){return[eC.Key,eC.Value];},ct.Enumerate(false,eB.get_Tree()));};d5=f.OperationCanceledException=et.Class({},c9,d5);d5.New=et.Ctor(function(eB){d5.New$1.call(this,"The operation was canceled.",null,eB);},d5);d5.New$1=et.Ctor(function(eB,eC,eD){this.message=eB;this.inner=eC;cM.setPrototypeOf(this,d5.prototype);this.ct=eD;},d5);d6.Clear=function(eB){eB.splice(0,T.length(eB));};d7.$cctor=function(){d7.$cctor=a.ignore;d7.Doc=self.document;};d8.$cctor=function(){d8.$cctor=a.ignore;d8.EmptyAttr=null;};d9=f.AggregateException=et.Class({},c9,d9);d9.New$3=et.Ctor(function(eB){d9.New$4.call(this,"One or more errors occurred.",eB);},d9);d9.New$4=et.Ctor(function(eB,eC){this.message=eB;cM.setPrototypeOf(this,d9.prototype);this.innerExceptions=eC;},d9);bc.enumUsing=function(eB,eC){return{GetEnumerator:function(){var eD;try{eD=cr.Get(eC(eB));}catch(eE){eB.Dispose();throw eE;}return new cs.New(null,null,function(eF){return eD.MoveNext()&&(eF.c=eD.Current(),true);},function(){eD.Dispose();eB.Dispose();});}};};bc.enumWhile=function(eB,eC){return{GetEnumerator:function(){return new cs.New(null,null,function(eD){var eE;while(true){eE=eD.s;if(J.Equals(eE,null)){if(eB()){eD.s=cr.Get(eC);eD=eD;}else return false;}else if(eE.MoveNext()){eD.c=eE.Current();return true;}else{eE.Dispose();eD.s=null;eD=eD;}}},function(eD){var eE;eE=eD.s;!J.Equals(eE,null)?eE.Dispose():void 0;});}};};d_=bg.KeyCollection=et.Class({GetEnumerator$1:function(){return cr.Get(bc.map(function(eB){return eB.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,d_);d_.New=et.Ctor(function(eB){g.New.call(this);this.d=eB;},d_);d$=h.Updates=et.Class({},null,d$);d$.Create=function(eB){var eC;eC=null;eC=d$.New(eB,null,function(){var eD;eD=eC.s;return eD===null?(eD=_4.Copy(eC.c()),eC.s=eD,_4.WhenObsoleteRun(eD,function(){eC.s=null;}),eD):eD;});return eC;};d$.New=function(eB,eC,eD){return new d$({c:eB,s:eC,v:eD});};eb.New=function(eB,eC){return{PreviousNodes:eB,Top:eC};};ec.get_Empty=function(){return{$:0,$0:new b4.New$3()};};ec.FindAll=function(eB){var eC;function eD(eF){if(eF!=null&&eF.$==0){eD(eF.$0);eD(eF.$1);}else if(eF!=null&&eF.$==1)eE(eF.$0);else if(eF!=null&&eF.$==2)eD(eF.$0.Current);else if(eF!=null&&eF.$==6)T.iter(eE,eF.$0.Holes);}function eE(eF){eC.push(eF);eD(eF.Children);}eC=[];eD(eB);return{$:0,$0:new b4.New$2(eC)};};ec.Filter=function(eB,eC){return{$:0,$0:ep.Filter(eB,eC.$0)};};ec.Except=function(eB,eC){return{$:0,$0:ep.Except(eB.$0,eC.$0)};};ec.ToArray=function(eB){return ep.ToArray(eB.$0);};ec.Intersect=function(eB,eC){return{$:0,$0:ep.Intersect(eB.$0,eC.$0)};};ed.UseAnimations=function(){ek.$cctor();return ek.UseAnimations;};ed.Actions=function(eB){return ed.ConcatActions(T.choose(function(eC){return eC.$==1?{$:1,$0:eC.$0}:null;},el.ToArray(eB.$0)));};ed.Finalize=function(eB){T.iter(function(eC){if(eC.$==0)eC.$0();},el.ToArray(eB.$0));};ed.ConcatActions=function(eB){var eC,eD,eE,eF;eC=cQ.ofSeqNonCopying(eB);eD=T.length(eC);return eD===0?ed.Const():eD===1?T.get(eC,0):(eE=bc.max(bc.map(function(eG){return eG.Duration;},eC)),(eF=T.map(function(eG){return ed.Prolong(eE,eG);},eC),ed.Def(eE,function(eG){T.iter(function(eH){eH.Compute(eG);},eF);})));};ed.List=function(eB){return eB.$0;};ed.Const=function(eB){return ed.Def(0,function(){return eB;});};ed.Def=function(eB,eC){return{Compute:eC,Duration:eB};};ed.Prolong=function(eB,eC){var eD,eE,eF;eD=eC.Compute;eE=eC.Duration;eF=r.Create(function(){return eC.Compute(eC.Duration);});return{Compute:function(eG){return eG>=eE?eF.f():eD(eG);},Duration:eB};};ee.$cctor=function(){ee.$cctor=a.ignore;ee.BatchUpdatesEnabled=true;};ef.IsUpper=function(eB){return eB>="A"&&eB<="Z";};ef.Parse=function(eB){return eB.length===1?eB:o.FailWith("String must be exactly one character long.");};ef.IsWhiteSpace=function(eB){return eB.match(new a.RegExp("\\s"))!==null;};eg.Activate=function(eB){var eC,eE,eF,eG,eH,eI,eJ;function eD(eK){var eL,eM,eN,eO,eP;if(J.Equals(eK,null))return eK;else if(typeof eK=="object"){if(eK instanceof a.Array)return eg.shallowMap(eD,eK);else{eL=eg.shallowMap(eD,eK.$V);eM=eK.$T;if(eM===void 0)return eL;else{eN=T.get(eE,eM);if(eN===1)return bz.ofArray(eL);else if(eN===2)return self.WebSharper.Decimal.CreateDecimalBits(eL);else{eO=new(T.get(eE,eM))();for(var eQ in eL)if(function(eR){eO[eR]=eL[eR];return false;}(eQ))break;return eO;}}}}else return eK;}eE=eB?eB.$TYPES:void 0;if(eE===void 0)eC=eB;else{for(eF=0,eG=T.length(eE)-1;eF<=eG;eF++){eJ=T.get(eE,eF);switch(!J.Equals(eJ,null)&&eJ.length===3?T.get(eJ,0)==="WebSharper"?T.get(eJ,1)==="List"?T.get(eJ,2)==="T"?0:(eI=eJ,2):(eI=eJ,2):(eI=eJ,2):!J.Equals(eJ,null)&&eJ.length===2?T.get(eJ,0)==="WebSharper"?T.get(eJ,1)==="Decimal"?1:(eI=eJ,2):(eI=eJ,2):(eI=eJ,2)){case 0:eH=1;break;case 1:eH=2;break;case 2:eH=eg.lookup(eI);break;}T.set(eE,eF,eH);}eC=eB.$DATA;}return eD(eC);};eg.shallowMap=function(eB,eC){var eD,eE;if(eC instanceof a.Array)return T.map(eB,eC);else if(typeof eC=="object"){eD={};for(var eF in eC)if(function(eG){eD[eG]=eB(eC[eG]);return false;}(eF))break;return eD;}else return eC;};eg.lookup=function(eB){var eC,eD,eE,eF,eG;eE=T.length(eB);eC=self;eD=0;while(eD<eE){eF=T.get(eB,eD);eG=eC[eF];!J.Equals(typeof eG,void 0)?(eC=eG,eD=eD+1):o.FailWith("Invalid server reply. Failed to find type: "+eF);}return eC;};dD.New=function(eB,eC){return{Parse:eB,Segment:eC};};eh.read=function(eB){var eC;eC=[];return function(eD){var eE;while(true){eE=eh.readEscapedFromChars(eD);if(eE[0]===-2)return null;else if(eE[0]===-1)return{$:1,$0:(function(eF){return function(eG){return bj.concat(eF,eG);};}(""))(eC)};else{eC.push(eA.fromCharCode(eE[0]));eD=eE[1];}}}(bz.ofSeq(bc.map(function(eD){return eD.charCodeAt();},eB)));};eh.write=function(eB){return bj.concat("",bc.mapi(function(eC,eD){return eh.writeEscapedAsString(eC+1===eB.length,eD);},eB));};eh.readEscapedFromChars=function(eB){var eC,eD,eE,eF,eG,eH,eI,eJ;function eK(){var eM,eN;return eC.$==1?(eM=eC.$1,(eN=eC.$0,(eC=eM,eN))):-1;}function eL(eM){return eM>="0".charCodeAt()&&eM<="9".charCodeAt()?eM-"0".charCodeAt():eM>="a".charCodeAt()&&eM<="f".charCodeAt()?eM-"a".charCodeAt()+10:eM>="A".charCodeAt()&&eM<="F".charCodeAt()?eM-"A".charCodeAt()+10:-2;}eC=eB;return[(eD=eK(),eD==="~".charCodeAt()?(eE=eK(),eE==="u".charCodeAt()?(eF=eK(),(eG=eK(),(eH=eK(),(eI=eK(),eF>=0&&eG>=0&&eH>=0&&eI>=0?eh.op_PlusPlus(eh.op_PlusPlus(eh.op_PlusPlus(eL(eF),eL(eG)),eL(eH)),eL(eI)):-2)))):(eJ=eK(),eE>=0&&eJ>=0?eh.op_PlusPlus(eL(eE),eL(eJ)):-2)):eD),eC];};eh.writeEscapedAsString=function(eB,eC){var eD;eD=eC.charCodeAt();return eh.isUnreserved(eB,eC)?eC:eD<256?"~"+bj.PadLeftWith(eD.toString(16),2,"0"):"~u"+bj.PadLeftWith(eD.toString(16),4,"0");};eh.op_PlusPlus=function(eB,eC){return(eB<<4)+eC;};eh.isUnreserved=function(eB,eC){return eC==="-"||(eC==="."?!eB:eC==="_"||(eC>="A"&&eC<="Z"||(eC>="a"&&eC<="z"||eC>="0"&&eC<="9")));};b0.TryParseSByte=function(eB,eC){return b0.TryParse(eB,-128,127,eC);};b0.TryParseByte=function(eB,eC){return b0.TryParse(eB,0,255,eC);};b0.TryParseInt16=function(eB,eC){return b0.TryParse(eB,-32768,32767,eC);};b0.TryParseUInt16=function(eB,eC){return b0.TryParse(eB,0,65535,eC);};b0.TryParseUInt32=function(eB,eC){return b0.TryParse(eB,0,4294967295,eC);};b0.TryParseUInt64=function(eB,eC){return b0.TryParse(eB,0,18446744073709551615,eC);};ei=f.FormatException=et.Class({},c9,ei);ei.New$1=et.Ctor(function(eB){this.message=eB;cM.setPrototypeOf(this,ei.prototype);},ei);ej.isBlank=function(eB){return bj.forall(ef.IsWhiteSpace,eB);};ek.$cctor=function(){ek.$cctor=a.ignore;ek.CubicInOut=eo.Custom(function(eB){var eC;eC=eB*eB;return 3*eC-2*(eC*eB);});ek.UseAnimations=true;};el.Append=function(eB,eC){return eB.$==0?eC:eC.$==0?eB:{$:2,$0:eB,$1:eC};};el.ToArray=function(eB){var eC;function eD(eE){if(eE.$==1)eC.push(eE.$0);else if(eE.$==2){eD(eE.$0);eD(eE.$1);}else if(eE.$==3)T.iter(function(eF){eC.push(eF);},eE.$0);}eC=[];eD(eB);return eC.slice(0);};el.Concat=function(eB){var eC;eC=cQ.ofSeqNonCopying(eB);return cQ.TreeReduce(el.Empty(),el.Append,eC);};el.Empty=function(){er.$cctor();return er.Empty;};em=bg.LinkedListEnumerator=et.Class({MoveNext:function(){this.c=this.c.n;return!J.Equals(this.c,null);},Current:function(){return this.c.v;},Dispose:a.ignore},g,em);em.New=et.Ctor(function(eB){g.New.call(this);this.c=eB;},em);en.WriteLink=function(eB,eC){var eD;eD=eC.get_IsEmpty()?"":"?"+en.WriteQuery(eC);return"/"+en.Concat(eB)+eD;};en.Concat=function(eB){var eC,eD;eC=[];eD=true;bz.iter(function(eE){if(!bj.IsNullOrEmpty(eE)){eD?eD=false:eC.push("/");eC.push(eE);}},eB);return bj.Join("",T.ofSeq(eC));};en.WriteQuery=function(eB){function eC(eD,eE){return eD+"="+eE;}return bj.concat("&",bc.map(function(eD){return eC(eD[0],eD[1]);},d4.ToSeq(eB)));};eo=h.Easing=et.Class({},g,eo);eo.Custom=function(eB){return new eo.New(eB);};eo.New=et.Ctor(function(eB){g.New.call(this);this.transformTime=eB;},eo);ep.Filter=function(eB,eC){return new b4.New$2(T.filter(eB,ep.ToArray(eC)));};ep.Except=function(eB,eC){var eD;eD=new b4.New$2(ep.ToArray(eC));eD.ExceptWith(ep.ToArray(eB));return eD;};ep.ToArray=function(eB){var eC;eC=T.create(eB.get_Count(),void 0);eB.CopyTo(eC);return eC;};ep.Intersect=function(eB,eC){var eD;eD=new b4.New$2(ep.ToArray(eB));eD.IntersectWith(ep.ToArray(eC));return eD;};eq.Children=function(eB,eC){var eD,eE,eF;if(eC!=null&&eC.$==1){eF=[];eD=eC.$0[0].nextSibling;while(eD!==eC.$0[1]){eF.push(eD);eD=eD.nextSibling;}return{$:0,$0:eF};}else return{$:0,$0:T.init(eB.childNodes.length,(eE=eB.childNodes,function(eG){return eE[eG];}))};};eq.Except=function(eB,eC){var eD;eD=eB.$0;return{$:0,$0:T.filter(function(eE){return T.forall(function(eF){return!(eE===eF);},eD);},eC.$0)};};eq.Iter=function(eB,eC){T.iter(eB,eC.$0);};eq.DocChildren=function(eB){var eC;function eD(eE){if(eE!=null&&eE.$==2)eD(eE.$0.Current);else if(eE!=null&&eE.$==1)eC.push(eE.$0.El);else if(eE==null);else if(eE!=null&&eE.$==5)eC.push(eE.$0);else if(eE!=null&&eE.$==4)eC.push(eE.$0.Text);else if(eE!=null&&eE.$==6)T.iter(function(eF){if(eF==null||eF.constructor===cM)eD(eF);else eC.push(eF);},eE.$0.Els);else{eD(eE.$0);eD(eE.$1);}}eC=[];eD(eB.Children);return{$:0,$0:cQ.ofSeqNonCopying(eC)};};er.$cctor=function(){er.$cctor=a.ignore;er.Empty={$:0};};et.OnLoad(function(){e.mainProgram();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=prozperProd.js.min.map

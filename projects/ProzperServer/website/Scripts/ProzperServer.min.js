function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey;a=self;b=a.FsRoot=a.FsRoot||{};c=b.ProzperServer=b.ProzperServer||{};d=c.ClientSide=c.ClientSide||{};e=d.MainProgram=d.MainProgram||{};f=a.WebSharper=a.WebSharper||{};g=f.Obj=f.Obj||{};h=f.UI=f.UI||{};i=h.Var$1=h.Var$1||{};j=b.LibraryJS=b.LibraryJS||{};k=j.AppFramework=j.AppFramework||{};l=k.PlugIn=k.PlugIn||{};m=d.ModeloUI=d.ModeloUI||{};n=m.Aliado=m.Aliado||{};o=f.Operators=f.Operators||{};p=h.View=h.View||{};q=h.Var=h.Var||{};r=f.Lazy=f.Lazy||{};s=m.RenderAliados=m.RenderAliados||{};t=m.RenderAliado=m.RenderAliado||{};u=m.FormaRegistro=m.FormaRegistro||{};v=m.FormaDatos=m.FormaDatos||{};w=m.FormaContactos=m.FormaContactos||{};x=m.FormaFormasPago=m.FormaFormasPago||{};y=m.ReporteConsolidado=m.ReporteConsolidado||{};z=m.TablaPagos=m.TablaPagos||{};A=m.ListaDocs=m.ListaDocs||{};B=m.FormaAutorizacion=m.FormaAutorizacion||{};C=m.FormaContrato=m.FormaContrato||{};D=m.Transacciones=m.Transacciones||{};E=m.Pendientes=m.Pendientes||{};F=a.EventTarget;G=a.Node;H=f.JavaScript=f.JavaScript||{};I=H.JS=H.JS||{};J=f.Unchecked=f.Unchecked||{};K=j.LayoutEngineModule=j.LayoutEngineModule||{};L=f.Option=f.Option||{};M=c.TypesV0=c.TypesV0||{};N=M.Aliado=M.Aliado||{};O=c.Aliado=c.Aliado||{};P=h.Templating=h.Templating||{};Q=P.Runtime=P.Runtime||{};R=Q.Server=Q.Server||{};S=R.TemplateInstance=R.TemplateInstance||{};T=f.Arrays=f.Arrays||{};U=R.ProviderBuilder=R.ProviderBuilder||{};V=R.Handler=R.Handler||{};W=a.ProzperServer_Templates=a.ProzperServer_Templates||{};X=a.ProzperServer_GeneratedPrintf=a.ProzperServer_GeneratedPrintf||{};Y=a.ProzperServer_Router=a.ProzperServer_Router||{};Z=h.Doc=h.Doc||{};_0=m.Rpc=m.Rpc||{};_1=M.IdAliado=M.IdAliado||{};_2=M.Modelo=M.Modelo||{};_3=h.ConcreteVar=h.ConcreteVar||{};_4=h.Snap=h.Snap||{};_5=a.StartupCode$ProzperServer$ProzperServer=a.StartupCode$ProzperServer$ProzperServer||{};_6=h.ListModel=h.ListModel||{};_7=k.PlugInVar=k.PlugInVar||{};_8=k.PlugInView=k.PlugInView||{};_9=k.PlugInDoc=k.PlugInDoc||{};_=H.Pervasives=H.Pervasives||{};$=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};ba=$.LazyRecord=$.LazyRecord||{};bb=f.Seq=f.Seq||{};bc=b.Library=b.Library||{};bd=bc.SortWith=bc.SortWith||{};be=O.Buscar=O.Buscar||{};bf=f.Collections=f.Collections||{};bg=bf.FSharpSet=bf.FSharpSet||{};bh=bf.Set=bf.Set||{};bi=f.Strings=f.Strings||{};bj=M.CorreoElectronico=M.CorreoElectronico||{};bk=m.DatosPersonales=m.DatosPersonales||{};bl=m.CorreoElectronico=m.CorreoElectronico||{};bm=m.Telefono=m.Telefono||{};bn=m.Direccion=m.Direccion||{};bo=bc.Monads=bc.Monads||{};bp=bo.AsyncResultBuilder=bo.AsyncResultBuilder||{};bq=m.Refresh=m.Refresh||{};br=a.System=a.System||{};bs=br.Guid=br.Guid||{};bt=m.VariousUI=m.VariousUI||{};bu=h.HtmlModule=h.HtmlModule||{};bv=bu.attr=bu.attr||{};bw=h.ViewBuilder=h.ViewBuilder||{};bx=M.StatusAliado=M.StatusAliado||{};by=f.List=f.List||{};bz=M.CuentaBancaria=M.CuentaBancaria||{};bA=M.RoutingNumber=M.RoutingNumber||{};bB=M.NumeroCuenta=M.NumeroCuenta||{};bC=f.Utils=f.Utils||{};bD=M.FormaPago=M.FormaPago||{};bE=bo.Result=bo.Result||{};bF=M.Archivo=M.Archivo||{};bG=bo.Extensions=bo.Extensions||{};bH=j.ListModel=j.ListModel||{};bI=j.Date=j.Date||{};bJ=bc.String=bc.String||{};bK=M.TipoArchivo=M.TipoArchivo||{};bL=M.StatusArchivo=M.StatusArchivo||{};bM=a.Blob;bN=M.CuentaPago=M.CuentaPago||{};bO=m.FormaFirma=m.FormaFirma||{};bP=M.PremisasCalculo=M.PremisasCalculo||{};bQ=k.PlugInAction=k.PlugInAction||{};bR=d.Msal=d.Msal||{};bS=a.WindowOrWorkerGlobalScope;bT=j.LayoutEngine=j.LayoutEngine||{};bU=a.StartupCode$LayoutEngine$LayoutEngine=a.StartupCode$LayoutEngine$LayoutEngine||{};bV=M.IdForAuthorize=M.IdForAuthorize||{};bW=M.DatosPersonales=M.DatosPersonales||{};bX=M.DiaPago=M.DiaPago||{};bY=M.TipoAliado=M.TipoAliado||{};bZ=f.Numeric=f.Numeric||{};b0=bf.List=bf.List||{};b1=bf.Dictionary=bf.Dictionary||{};b2=bf.HashSet=bf.HashSet||{};b3=Q.Client=Q.Client||{};b4=h.Abbrev=h.Abbrev||{};b5=b4.Async=b4.Async||{};b6=b4.Fresh=b4.Fresh||{};b7=bE.Builder=bE.Builder||{};b8=bE.BuilderP=bE.BuilderP||{};b9=bo.Eff=bo.Eff||{};b_=b9.EffBuilder=b9.EffBuilder||{};b$=bo.AsyncResultBuilderP=bo.AsyncResultBuilderP||{};ca=f.Slice=f.Slice||{};cb=bc.ParseO=bc.ParseO||{};cc=bc.Serializer=bc.Serializer||{};cd=j.Msal=j.Msal||{};ce=cd.Policy=cd.Policy||{};cf=M.Telefono=M.Telefono||{};cg=M.TipoTelefono=M.TipoTelefono||{};ch=M.Direccion=M.Direccion||{};ci=M.TipoDireccion=M.TipoDireccion||{};cj=M.Estado=M.Estado||{};ck=M.Pais=M.Pais||{};cl=M.ZonaPostal=M.ZonaPostal||{};cm=M.TarjetaCredito=M.TarjetaCredito||{};cn=M.Expiracion=M.Expiracion||{};co=M.NumeroTarjeta=M.NumeroTarjeta||{};cp=M.TipoTarjeta=M.TipoTarjeta||{};cq=M.TipoCuenta=M.TipoCuenta||{};cr=M.Genero=M.Genero||{};cs=f.Remoting=f.Remoting||{};ct=cd.Configuration=cd.Configuration||{};cu=cd.AuthOptions=cd.AuthOptions||{};cv=f.Control=f.Control||{};cw=cv.MailboxProcessor=cv.MailboxProcessor||{};cx=bc.Mailbox=bc.Mailbox||{};cy=m.EndPoint=m.EndPoint||{};cz=h.Router=h.Router||{};cA=c.Rpc0=c.Rpc0||{};cB=M.IdPayment=M.IdPayment||{};cC=k.PlugInQuery=k.PlugInQuery||{};cD=bf.FSharpMap=bf.FSharpMap||{};cE=f.Enumerator=f.Enumerator||{};cF=cE.T=cE.T||{};cG=bf.BalancedTree=bf.BalancedTree||{};cH=by.T=by.T||{};cI=bo.AsyncResult=bo.AsyncResult||{};cJ=cs.AjaxRemotingProvider=cs.AjaxRemotingProvider||{};cK=bc.Array=bc.Array||{};cL=M.Subscripcion=M.Subscripcion||{};cM=m.CuentaBancaria=m.CuentaBancaria||{};cN=m.TarjetaCredito=m.TarjetaCredito||{};cO=a.Object;cP=h.FromView=h.FromView||{};cQ=f.Concurrency=f.Concurrency||{};cR=h.AttrProxy=h.AttrProxy||{};cS=h.Array=h.Array||{};cT=h.Storage=h.Storage||{};cU=h.AttrModule=h.AttrModule||{};cV=a.GeneratedPrintf=a.GeneratedPrintf||{};cW=a.LayoutEngine_Templates=a.LayoutEngine_Templates||{};cX=a.LayoutEngine_GeneratedPrintf=a.LayoutEngine_GeneratedPrintf||{};cY=j.WebComponent=j.WebComponent||{};cZ=cY.WcTabStrip=cY.WcTabStrip||{};c0=cZ.WcTabStripT=cZ.WcTabStripT||{};c1=cY.WcSplitter=cY.WcSplitter||{};c2=bf.DictionaryUtil=bf.DictionaryUtil||{};c3=h.CheckedInput=h.CheckedInput||{};c4=h.Client=h.Client||{};c5=c4.Templates=c4.Templates||{};c6=f.DateUtil=f.DateUtil||{};c7=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};c8=j.Pojo=j.Pojo||{};c9=a.Error;c_=f.TimeoutException=f.TimeoutException||{};c$=H.Promise=H.Promise||{};da=f.Sitelets=f.Sitelets||{};db=da.RouterOperators=da.RouterOperators||{};dc=da.RouterModule=da.RouterModule||{};dd=da.Route=da.Route||{};de=bf.MapUtil=bf.MapUtil||{};df=cG.Tree=cG.Tree||{};dg=M.IdAddress=M.IdAddress||{};dh=M.IdSubscription=M.IdSubscription||{};di=h.Docs=h.Docs||{};dj=cQ.AsyncBody=cQ.AsyncBody||{};dk=cQ.CT=cQ.CT||{};dl=h.Attrs=h.Attrs||{};dm=h.DomUtility=h.DomUtility||{};dn=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_do=cT.ArrayStorage=cT.ArrayStorage||{};dp=j.Var=j.Var||{};dq=M.ConceptoPago=M.ConceptoPago||{};dr=E.Enlace=E.Enlace||{};ds=K.Layout=K.Layout||{};dt=c1.WcSplitterT=c1.WcSplitterT||{};du=h.DocElemNode=h.DocElemNode||{};dv=a.CharacterData;dw=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};dx=cs.XhrProvider=cs.XhrProvider||{};dy=cv.FSharpEvent=cv.FSharpEvent||{};dz=bf.LinkedList=bf.LinkedList||{};dA=cd.AuthenticationParameters=cd.AuthenticationParameters||{};dB=cd.Account=cd.Account||{};dC=da.Router=da.Router||{};dD=da.List=da.List||{};dE=bf.Pair=bf.Pair||{};dF=f.Result=f.Result||{};dG=cQ.Scheduler=cQ.Scheduler||{};dH=f.CancellationTokenSource=f.CancellationTokenSource||{};dI=h.DynamicAttrNode=h.DynamicAttrNode||{};dJ=K.Measures=K.Measures||{};dK=j.Hoverable=j.Hoverable||{};dL=dK.Hoverable=dK.Hoverable||{};dM=a.Event;dN=a.UIEvent;dO=j.ResizeObserver=j.ResizeObserver||{};dP=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};dQ=h.Elt=h.Elt||{};dR=c4.Attrs=c4.Attrs||{};dS=dR.Dyn=dR.Dyn||{};dT=c5.Prepare=c5.Prepare||{};dU=h.An=h.An||{};dV=c4.Settings=c4.Settings||{};dW=b4.Mailbox=b4.Mailbox||{};dX=bf.HashSetUtil=bf.HashSetUtil||{};dY=cv.Event=cv.Event||{};dZ=dY.Event=dY.Event||{};d0=H.NonStandardPromiseRejectionException=H.NonStandardPromiseRejectionException||{};d1=a.StartupCode$WebSharper_Sitelets$Router=a.StartupCode$WebSharper_Sitelets$Router||{};d2=bf.Map=bf.Map||{};d3=f.OperationCanceledException=f.OperationCanceledException||{};d4=f.Queue=f.Queue||{};d5=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};d6=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};d7=f.AggregateException=f.AggregateException||{};d8=bf.KeyCollection=bf.KeyCollection||{};d9=h.Updates=h.Updates||{};d_=c4.Docs=c4.Docs||{};d$=d_.RunState=d_.RunState||{};ea=d_.NodeSet=d_.NodeSet||{};eb=h.Anims=h.Anims||{};ec=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};ed=f.Char=f.Char||{};ee=f.Json=f.Json||{};ef=f.FormatException=f.FormatException||{};eg=da.StringEncoding=da.StringEncoding||{};eh=h.String=h.String||{};ei=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};ej=h.AppendList=h.AppendList||{};ek=bf.LinkedListEnumerator=bf.LinkedListEnumerator||{};el=da.PathUtil=da.PathUtil||{};em=h.Easing=h.Easing||{};en=b4.HashSet=b4.HashSet||{};eo=d_.DomNodes=d_.DomNodes||{};ep=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};eq=a.IntelliFactory;er=eq&&eq.Runtime;es=a.Math;et=a.jQuery;eu=a.console;ev=a.Date;ew=a.JSON;ex=a.Reflect;ey=a.String;e.mainProgram=function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR;ez=i.Create$1(e.appName());eA=p.Map(function(eS){return e.mesToString(eS.periodoActual);},m.modeloV().get_View());eB=p.Map(function(eS){return a.String(eS.anoActual);},m.modeloV().get_View());eC=p.Map(function(eS){return O.nombre2(eS.datosPersonales);},m.aliadoW());eD=p.Map(function(eS){return eS.id.get_Id();},m.aliadoW());eE=p.Map(function(eS){return a.String(eS.status);},m.aliadoW());eF=p.Map(function(eS){return a.String(eS.comision);},m.aliadoW());eG=p.Map(function(eS){return a.String(eS.nReferidos);},m.aliadoW());k.addPlugIn(l.New(e.appName(),[k.newVar("title",ez),k.newVar("contentVar",m.contentVar()),k.newVar("invitaciones",m.invitacionesV()),k.newVar("influencer",e.influencerV())],[k.newViw("mesActual",eA),k.newViw("anoActual",eB),k.newViw("aliado",eC),k.newViw("idAliado",eD),k.newViw("status",eE),k.newViw("comision",eF),k.newViw("datos",eG),k.newViw("emailsInvitar",m.emailsInvitarW()),k.newViw("invitacionesDisabled",m.invitacionesDisabledW()),k.newViw("VideoW",p.Map(function(eS){return eS.$==5?eS.$0:"";},m.endPointV().get_View())),k.newViw("influencerClassW",e.influencerClassW())],[k.newDoc("Aliados",r.Create(s.aliados)),k.newDoc("Aliado",r.Create(t.aliado)),k.newDoc("Calculo",r.Create(t.calculo)),k.newDoc("FormaRegistro",r.Create(u.formaDoc)),k.newDoc("FormaDatos",r.Create(v.formaDoc)),k.newDoc("FormaContactos",r.Create(w.formaDoc)),k.newDoc("FormaFormasPago",r.Create(x.formaDoc)),k.newDoc("contentDoc",r.Create(e.getContentDoc)),k.newDoc("ReporteConsolidado",r.Create(y.consolidado)),k.newDoc("TablaPagos",r.Create(z.comisiones)),k.newDoc("ListaDocs",r.Create(A.listaDocs)),k.newDoc("FormaAutorizacion",r.Create(B.formaAutorizacion)),k.newDoc("FormaContrato",r.Create(C.formaContrato)),k.newDoc("Transacciones",r.Create(D.transacciones)),k.newDoc("Pendientes",r.Create(function(){return E.pendientes(m.aliadoW());}))],[k.newAct("Logout",function(){e.logout();}),k.newAct("LogIn",function(){e.login();}),k.newAct("enviarInvitaciones",function(){e.enviarCorreosInvitacion();}),k.newAct("gotoInfluencer",function(){e.gotoInfluencer();})],[]));K.addLayout((eH=(eI=self.document.getElementById("GlobalLayout"),J.Equals(eI,null)?"\r\n                            menuEditor layout\r\n                            |          main\r\n            \r\n                            main div \"\"\r\n                            :                 template  header     \"id=header\"           brand  brandV   logout \"@{Prozper.Logout}\" afiliado \"@{Prozper.aliado}\"\r\n                            :                 Doc       Prozper.contentDoc\r\n                            :                 template  sidedrawer \"id=sidedrawer\"       brand  brandV   idaliado \"@{Prozper.idAliado}\" \r\n                            :                 template  footer     \"id=footer\"           brand  brandV   madeby \"CIPHER Bsc\" madebylink \"www.cipherbsc.com\"\r\n             \r\n                            mainContent          template  content    \"id=content-wrapper\"  content aliados                  fecha \"@{Prozper.mesActual} @{Prozper.anoActual}\" idaliado \"@{Prozper.aliado}\"\r\n                            cntFormaRegistro     template  content    \"id=content-wrapper\"  content Prozper.FormaRegistro    titulo \"Referido por: @{Prozper.aliado}\"  \r\n                            cntFormaDatos        template  content    \"id=content-wrapper\"  content Prozper.FormaDatos       titulo \" \"\r\n                            cntFormaContactos    template  content    \"id=content-wrapper\"  content Prozper.FormaContactos   titulo \" \" \r\n                            cntFormaFormasPago   template  content    \"id=content-wrapper\"  content Prozper.FormaFormasPago  titulo \" \" \r\n                            cntFormaCuentas      template  content    \"id=content-wrapper\"  content ProzperLyt.FormaCuentas  titulo \" \"  \r\n                            cntFormaDocumentos   template  content    \"id=content-wrapper\"  content Prozper.FormaDocumentos  titulo \" \"  \r\n                            cntFormaNoUser       template  content    \"id=content-wrapper\"  content botonLogin               titulo \" \"  \r\n                            cntFormaInvitaciones template  content    \"id=content-wrapper\"  content invitaciones             titulo \" \"  \r\n            \r\n                            aliados          div       \"class=row\"\r\n                            :                div       \"class=mui-col-md-6\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar;max-height:550px;overflow:auto\" Prozper.Aliados\r\n                            :                div       \"class=mui-col-md-6\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar;max-height:550px;overflow:auto\" Aliado Comisiones\r\n                            brandV           Var       \"Prozper\"\r\n            \r\n                            botonLogin       div       \"class=row\"\r\n                            :                div       \"class=mui-col-md-6\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar;max-height:550px;overflow:auto\" \r\n                            :::              button    Prozper.LogIn \"class=mui-btn mui-btn--primary\" \"Ingresar al Sistema\"\r\n            \r\n                            invitaciones     div       \"class=row\"\r\n                            :                div       \"class=mui-col-md-6 mui-col-md-offset-1\"\r\n                            ::               div       \"class=mui-panel mui--z5 scrollbar; max-height:550px ; overflow:auto\" \r\n                            :::              h1        \"\" \"Enviar Invitaciones\"\r\n                            :::              textarea  Prozper.invitaciones  \"width:100% ; height:30rem; placeholder=Copie aqui las direcciones de correo electronico\" \r\n                            :                div       \"white-space: pre-wrap\" \"@{Prozper.emailsInvitar}\"\r\n                            :                button    Prozper.enviarInvitaciones \"class=mui-btn mui-btn--raised mui-btn--primary;@{Prozper.invitacionesDisabled}\" \"Enviar\"\r\n            \r\n                            Aliado           div       \"class=mui-col-md-8\"\r\n                            :                Doc Prozper.Aliado\r\n            \r\n                            Comisiones       template    tablacomisiones \"class=mui-col-md-3\"  tbody filasComisiones\r\n                            filasComisiones  concat      \"\"\r\n                            :                template    filacomision    \"\"  periodo \"Ene 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Feb 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Mar 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Abr 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"May 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Jun 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Jul 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Ago 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Sep 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Oct 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Nov 2018\" comision \"$1,000\"\r\n                            :                template    filacomision    \"\"  periodo \"Dec 2018\" comision \"$1,000\"\r\n                    \r\n                            menuEditorx      horizontal  65          menuLogo                  editorMessages\r\n                            double           horizontal  0-50-100    AppFramework.AppFwkClient menuEditor\r\n                            menuLogo         vertical    350         logo                      menu\r\n                            logo             span       \"margin:0;   color:gray; font-size: 55px; font-weight:530\" \"StackOverflow\"\r\n                            editorMessages   horizontal  10-83-100   editorButtons             messages\r\n                            messages         vertical    0-50-100    messagesLeft              messagesRight\r\n                            editorButtons    vertical    150 buttons snippetsSnippet \r\n                            snippetsSnippet  vertical    0-20-100    snippets                  editorProperties\r\n                            snippets         horizontal  20          \"@{FSharpStation.CurrentPath}\" tblDimensions2\r\n                            editorProperties vertical    0-100-100   snippet                   properties\r\n                            properties       div        \"\"           FSharpStation.Properties\r\n                            snippet          horizontal  35          Name                      FSharpStation.editor\r\n                            menu             span       \"display: grid; grid-template-columns: 30% 20% 20% 10%; grid-gap: 25px; margin:5px; grid-template-rows:50px\" inpServer btnLoad btnSaveAs\r\n                             \r\n                            severalTabs      wcomp-tabstrip  \"\" \r\n                            :                div \"tabname=Dimensions\" \r\n                            ::               div \"\" btnAddDimension RuleEditor.Dimensions\r\n                            :                div \"tabname=Cubes\"\r\n                            :                div \"tabname=Global Definitions\" RuleEditor.globalDefs\r\n                    \r\n                            btnSaveAs        button RuleEditor.SaveAs         \"class=btn @{RuleEditor.SaveNeeded}\" \"Save as...    \"\r\n                            btnAddDimension  button RuleEditor.AddDimension      \"\"                  \"new dim...\"\r\n                            btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\r\n                            btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\r\n                            btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\r\n                            btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\r\n                            btnAbortFsi      button FSharpStation.AbortFsi       \"\"                  \"Abort Fsi     \"\r\n                    \r\n                            messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\r\n                            messagesRight    wcomp-tabstrip                      \"\"                  Parser\r\n                    \r\n                            buttons          div \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\"\r\n                            :                button RuleEditor.AddCalculation    \"\"                 \"Add Calculation\"\r\n                            :                button RuleEditor.AddTotal          \"\"                 \"Add Total\"\r\n                            :                Doc       none x\r\n                            :                button RuleEditor.IndentIn          \"\"                  \"Indent In  >> \"\r\n                            :                button RuleEditor.IndentOut         \"\"                  \"Indent Out << \"\r\n                    \r\n                            Output           textarea  RuleEditor.Output         \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \r\n                            FsCode           textarea  RuleEditor.CodeFS         \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \r\n                            Parser           textarea  RuleEditor.Parser         \"tabname=Parser ; placeholder=Parser messages; dblclick=@{FSharpStation.JumpTo} ; spellcheck=false\" \r\n                            Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\r\n                            inpServer        Doc       InputLabel                \"\"     \"Server:\"      RuleEditor.Server\r\n                            btnLoad          Doc       InputFile                 \"\"     \"Load File...\" RuleEditor.LoadFile  FileName\r\n                            btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\r\n                            FileName         div                                 \"class=form-control\"  RuleEditor.fileName\r\n            \r\n                       ":eI.textContent),K.newLyt(e.layoutName(),eH)));eJ=(eK=null,(eL=e.layoutName(),eK==null?eL:eK.$0));k.mainDocV().Set(eJ);Z.BindView(function(eS){var eT,eU,eV;return J.Equals(eS.id,O.empty().id)?(eT=U.Make(),(eU=V.CompleteHoles(eT.k,eT.h,[]),(eV=new S.New(eU[1],W.opcionesadministrador(eU[0])),(eT.i=eV,eV)))).get_Doc():Z.get_Empty();},m.aliadoW());eM=(eN=(eO=e.getDocView(e.layoutName(),"headerCenter"),(eP=e.getMenuDoc(),(eQ=e.getContentDoc(),U.Make().WithHole({$:0,$0:"maincontent",$1:eQ})).WithHole({$:0,$0:"menu",$1:eP})).WithHole({$:0,$0:"headercenter",$1:eO})),eN.WithHole(V.EventQ2(eN.k,"logout",function(){return eN.i;},function(){e.logout();}))).WithHole({$:2,$0:"cortina",$1:p.Map(function(eS){return eS>0?"mui-overlay":"not-mui-overlay";},_0.llamadas())});eR=V.CompleteHoles(eM.k,eM.h,[]);eM.i=new S.New(eR[1],c5.RunFullDocTemplate(eR[0]));p.Sink(function(eS){self.document.title=eS;},ez.get_View());};e.appName=function(){_5.$cctor();return _5.appName;};e.influencerV=function(){_5.$cctor();return _5.influencerV;};e.influencerClassW=function(){_5.$cctor();return _5.influencerClassW;};e.getContentDoc=function(){return Z.EmbedView(p.Map(function(ez){return e.getDoc(e.appName(),ez);},m.contentVar().get_View()));};e.logout=function(){bR.logout();};e.login=function(){bR.logout();};e.enviarCorreosInvitacion=function(){var ez;_0.iterA((ez=bo.asyncResult(),ez.Run(ez.Delay(function(){return bG["AsyncResultBuilder.Bind"](ez,p.GetAsync(m.emailsInvitarW()),function(eA){return bG["AsyncResultBuilder.Bind"](ez,p.GetAsync(p.Map(function(eB){return eB.id.get_Id();},m.aliadoW())),function(){var eB;eB=T.filter(function(eC){return bi.Trim(eC)!=="";},bi.SplitChars(eA,["\n"],0));return ez.Bind$1(_0.enviarCorreosInvitacion("Invitacion a Prozper",eB),function(){var eC;eC=T.length(eB);return eC===0?(a.alert("Ningun correo valido ha sido encontrado"),ez.Zero()):eC===1?(a.alert("Invitacion ha sido enviada"),ez.Zero()):(a.alert("Invitaciones han sido enviadas"),ez.Zero());});});});}))));};e.gotoInfluencer=function(){var ez;cQ.Start((ez=null,cQ.Delay(function(){return cQ.Bind(_0.obtenerIdInfluyente(e.influencerV().Get()),function(eA){return eA.$==0?(self.location.href="/Register/"+e.influencerV().Get(),cQ.Zero()):(self.alert("Código inválido:"+e.influencerV().Get()),cQ.Zero());});})),null);};e.layoutName=function(){_5.$cctor();return _5.layoutName;};e.getMenuDoc=function(){return Z.EmbedView(p.Map2(function(ez,eA){var eB;eB=ez!=null&&ez.$==1?J.Equals(eA.id,O.empty().id)?"ProzperLyt.mnuAdministrador":"ProzperLyt.mnuUsuario":"ProzperLyt.mnuNoUsuario";return e.getDoc(e.appName(),eB);},bR.userO().get_View(),m.aliadoW()));};e.getDocView=function(ez,eA){return K.turnToView(function(){return e.getDoc(ez,eA);});};e.mesToString=function(ez){return ez===1?"Ene":ez===2?"Feb":ez===3?"Mar":ez===4?"Abr":ez===5?"May":ez===6?"Jun":ez===7?"Jul":ez===8?"Ago":ez===9?"Sep":ez===10?"Oct":ez===11?"Nov":ez===12?"Dic":"---";};e.getDoc=function(ez,eA){var eB,eC,eD;eB=(eC=(eD=((K.splitName())(ez))(eA),k.tryGetDoc(eD[0],eD[1])),eC==null?null:{$:1,$0:K.getDocFinal(cH.Empty,eC.$0)});return eB==null?K.errDoc((function(eE){return function(eF){return eE("Doc not found "+bC.toSafe(eF));};}(a.id))(eA)):eB.$0;};g=f.Obj=er.Class({Equals:function(ez){return this===ez;},GetHashCode:function(){return -1;}},null,g);g.New=er.Ctor(function(){},g);i=h.Var$1=er.Class({},g,i);i.Create$1=function(ez){return new _3.New(false,_4.New({$:2,$0:ez,$1:[]}),ez);};i.Lens=function(ez,eA,eB){var eC,eD,eE;eC=b6.Id();eD=p.Map(eA,ez.get_View());eE=new q({Get:function(){return eA(ez.Get());},Set:function(eF){return ez.Update(function(eG){return eB(eG,eF);});},SetFinal:function(eF){return this.Set(eF);},Update:function(eF){return ez.Update(function(eG){return eB(eG,eF(eA(eG)));});},UpdateMaybe:function(eF){return ez.UpdateMaybe(function(eG){var eH;eH=eF(eA(eG));return eH==null?null:{$:1,$0:eB(eG,eH.$0)};});},get_View:function(){return eD;},get_Id:function(){return eC;}});q.New.call(eE);return eE;};i.Set=function(ez,eA){ez.Set(eA);};k.addPlugIn=function(ez){k.plugIns().Append(ez);k.mainDocV().Set(k.mainDocV().Get());};k.newVar=function(ez,eA){return _7.New(ez,eA);};k.newViw=function(ez,eA){return _8.New(ez,eA);};k.newDoc=function(ez,eA){return _9.New(ez,{$:0,$0:eA});};k.newAct=function(ez,eA){return bQ.New(ez,{$:0,$0:eA},p.Const(true));};k.mainDocV=function(){bU.$cctor();return bU.mainDocV;};k.plugIns=function(){bU.$cctor();return bU.plugIns;};k.newDocF=function(ez,eA){return _9.New(ez,eA);};k.tryGetDoc=function(ez,eA){var eB;eB=k.tryGetPlugIn(ez);return eB==null?null:T.tryFind(function(eC){return eC.docName===eA;},eB.$0.plgDocs);};k.tryGetAct=function(ez,eA){var eB;eB=k.tryGetPlugIn(ez);return eB==null?null:T.tryFind(function(eC){return eC.actName===eA;},eB.$0.plgActions);};k.callFunction=function(ez,eA,eB){if(eB.$==1)eB.$0(ez);else if(eB.$==2)(eB.$0(ez))(eA);else eB.$0();};k.tryGetVar=function(ez,eA){var eB;eB=k.tryGetPlugIn(ez);return eB==null?null:T.tryFind(function(eC){return eC.varName===eA;},eB.$0.plgVars);};k.selectionPlugInO=function(){bU.$cctor();return bU.selectionPlugInO;};k.defaultPlugIn=function(){bU.$cctor();return bU.defaultPlugIn;};k.currentPlugInW=function(){bU.$cctor();return bU.currentPlugInW;};k.renderPlugIns=function(){return Z.Flatten(k.plugIns().MapLens(function(ez){var eA,eB,eC,eD;return(eA=(eB=U.Make().WithHole({$:1,$0:"name",$1:ez}),eB.WithHole(V.EventQ2(eB.k,"select",function(){return eB.i;},function(){k.selectionPlugInO().Set({$:1,$0:ez});}))).WithHole({$:2,$0:"selected",$1:p.Map(function(eE){return J.Equals(eE,{$:1,$0:ez})?"selected":"";},k.selectionPlugInO().get_View())}),(eC=V.CompleteHoles(eA.k,eA.h,[]),(eD=new S.New(eC[1],cW.tile(eC[0])),(eA.i=eD,eD)))).get_Doc();}));};k.renderVars=function(){function ez(eB,eC){return[eB.plgName,eC.varName];}function eA(eB,eC){var eD,eE,eF;return(eD=U.Make().WithHole({$:1,$0:"name",$1:eC.varName}).WithHole({$:8,$0:"value",$1:eC.varVar}),(eE=V.CompleteHoles(eD.k,eD.h,[["value",0]]),(eF=new S.New(eE[1],cW.namevalueinput(eE[0])),(eD.i=eF,eF)))).get_Doc();}return Z.ConvertBy(function(eB){return ez(eB[0],eB[1]);},function(eB){return eA(eB[0],eB[1]);},p.Map(function(eB){return bb.map(function(eC){return[eB,eC];},eB.plgVars);},k.currentPlugInW()));};k.renderViews=function(){function ez(eB,eC){return[eB.plgName,eC.viwName];}function eA(eB,eC){var eD,eE,eF;return(eD=U.Make().WithHole({$:1,$0:"name",$1:eC.viwName}).WithHole({$:2,$0:"value",$1:eC.viwView}),(eE=V.CompleteHoles(eD.k,eD.h,[]),(eF=new S.New(eE[1],cW.namevalue(eE[0])),(eD.i=eF,eF)))).get_Doc();}return Z.ConvertBy(function(eB){return ez(eB[0],eB[1]);},function(eB){return eA(eB[0],eB[1]);},p.Map(function(eB){return bb.map(function(eC){return[eB,eC];},eB.plgViews);},k.currentPlugInW()));};k.renderDocs=function(){function ez(eB,eC){return[eB.plgName,eC.docName];}function eA(eB,eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN;return(eD=(eE=(eF=eC.docName+(eG=eC.docDoc,eG.$==1?(eH=bi.concat(", ",by.ofArray([eG.$1])),(function(eO){return function(eP){return eO("("+bC.toSafe(eP)+")");};}(a.id))(eH)):eG.$==2?(eI=bi.concat(", ",by.ofArray([eG.$1,eG.$2])),(function(eO){return function(eP){return eO("("+bC.toSafe(eP)+")");};}(a.id))(eI)):eG.$==3?(eJ=bi.concat(", ",by.ofArray([eG.$1,eG.$2,eG.$3])),(function(eO){return function(eP){return eO("("+bC.toSafe(eP)+")");};}(a.id))(eJ)):eG.$==4?(eK=bi.concat(", ",by.ofArray([eG.$1,eG.$2,eG.$3,eG.$4])),(function(eO){return function(eP){return eO("("+bC.toSafe(eP)+")");};}(a.id))(eK)):eG.$==5?(eL=bi.concat(", ",by.ofArray([eG.$1,eG.$2,eG.$3,eG.$4,eG.$5])),(function(eO){return function(eP){return eO("("+bC.toSafe(eP)+")");};}(a.id))(eL)):""),U.Make().WithHole({$:1,$0:"name",$1:eF})),eE.WithHole(V.EventQ2(eE.k,"select",function(){return eE.i;},function(){p.Get(function(eO){k.mainDocV().Set(eO.plgName+"."+eC.docName);},k.currentPlugInW());}))),(eM=V.CompleteHoles(eD.k,eD.h,[]),(eN=new S.New(eM[1],cW.tile(eM[0])),(eD.i=eN,eN)))).get_Doc();}return Z.ConvertBy(function(eB){return ez(eB[0],eB[1]);},function(eB){return eA(eB[0],eB[1]);},p.Map(function(eB){return bb.map(function(eC){return[eB,eC];},eB.plgDocs);},k.currentPlugInW()));};k.renderActions=function(){function ez(eB,eC){return[eB.plgName,eC.actName];}function eA(eB,eC){var eD,eE,eF,eG;eD=(eE=eC.actFunction,eE.$==1?(eF=bi.concat(", ",by.ofArray([eE.$1])),(function(eH){return function(eI){return eH("("+bC.toSafe(eI)+")");};}(a.id))(eF)):eE.$==2?(eG=bi.concat(", ",by.ofArray([eE.$1,eE.$2])),(function(eH){return function(eI){return eH("("+bC.toSafe(eI)+")");};}(a.id))(eG)):"");return Z.EmbedView(p.Map(function(eH){var eI,eJ,eK,eL,eM,eN,eO,eP;return eH?(eI=(eJ=U.Make().WithHole({$:1,$0:"name",$1:eC.actName+eD}),eJ.WithHole(V.EventQ2(eJ.k,"click",function(){return eJ.i;},function(eQ){k.callFunction(eQ,null,eC.actFunction);}))),(eK=V.CompleteHoles(eI.k,eI.h,[]),(eL=new S.New(eK[1],cW.action(eK[0])),(eI.i=eL,eL)))).get_Doc():(eM=(eN=U.Make().WithHole({$:1,$0:"name",$1:eC.actName}),eN.WithHole(V.EventQ2(eN.k,"click",function(){return eN.i;},function(eQ){k.callFunction(eQ,null,eC.actFunction);}))),(eO=V.CompleteHoles(eM.k,eM.h,[]),(eP=new S.New(eO[1],cW.actiondisabled(eO[0])),(eM.i=eP,eP)))).get_Doc();},eC.actEnabled));}return Z.ConvertBy(function(eB){return ez(eB[0],eB[1]);},function(eB){return eA(eB[0],eB[1]);},p.Map(function(eB){return bb.map(function(eC){return[eB,eC];},eB.plgActions);},k.currentPlugInW()));};k.renderQueries=function(){function ez(eB,eC){return[eB.plgName,eC.qryName];}function eA(eB,eC){var eD,eE,eF,eG;return(eD=(eE=U.Make().WithHole({$:1,$0:"name",$1:eC.qryName}),eE.WithHole(V.EventQ2(eE.k,"select",function(){return eE.i;},function(){a.alert(eC.qryFunction(null));}))),(eF=V.CompleteHoles(eD.k,eD.h,[]),(eG=new S.New(eF[1],cW.tile(eF[0])),(eD.i=eG,eG)))).get_Doc();}return Z.ConvertBy(function(eB){return ez(eB[0],eB[1]);},function(eB){return eA(eB[0],eB[1]);},p.Map(function(eB){return bb.map(function(eC){return[eB,eC];},eB.plgQueries);},k.currentPlugInW()));};k.newQry=function(ez,eA){return cC.New(ez,eA);};k.AppFwkClient=function(){bU.$cctor();return bU.AppFwkClient;};k.actHello=function(){bU.$cctor();return bU.actHello;};k.qryDocs=function(){bU.$cctor();return bU.qryDocs;};k.horizontal=function(ez,eA,eB,eC,eD){var eE,eF,eG,eH;return(eE=(eF=U.Make().WithHole({$:2,$0:"partsizes",$1:ez}).WithHole({$:7,$0:"afterrender",$1:eA}).WithHole({$:7,$0:"afterrendersp",$1:eB}),eF.WithHole(V.EventQ2(eF.k,"mousedown",function(){return eF.i;},function(eI){eC(eI.Event);}))).WithHole({$:2,$0:"gap",$1:eD}),(eG=V.CompleteHoles(eE.k,eE.h,[]),(eH=new S.New(eG[1],cW.wcompsplitterhor(eG[0])),(eE.i=eH,eH)))).get_Doc();};k.vertical=function(ez,eA,eB,eC,eD){var eE,eF,eG,eH;return(eE=(eF=U.Make().WithHole({$:2,$0:"partsizes",$1:ez}).WithHole({$:7,$0:"afterrender",$1:eA}).WithHole({$:7,$0:"afterrendersp",$1:eB}),eF.WithHole(V.EventQ2(eF.k,"mousedown",function(){return eF.i;},function(eI){eC(eI.Event);}))).WithHole({$:2,$0:"gap",$1:eD}),(eG=V.CompleteHoles(eE.k,eE.h,[]),(eH=new S.New(eG[1],cW.wcompsplitterver(eG[0])),(eE.i=eH,eH)))).get_Doc();};k.mainDoc=function(){var ez,eA,eB,eC,eD,eE;return(ez=(eA=k.getMainClientDoc(),(eB=(eC=k.mainDocV().get_View(),U.Make().WithHole({$:2,$0:"maindoc",$1:eC})),eB.WithHole(V.EventQ2(eB.k,"goclient",function(){return eB.i;},function(){k.mainDocV().Set("AppFramework.AppFwkClient");}))).WithHole({$:0,$0:"mainclient",$1:eA})),(eD=V.CompleteHoles(ez.k,ez.h,[]),(eE=new S.New(eD[1],cW.appframework(eD[0])),(ez.i=eE,eE)))).get_Doc();};k.splitName=function(ez){function eA(eC){return bJ.splitByChar(".",eC);}function eB(eC){return T.length(eC)===1?[ez,T.get(eC,0)]:[T.get(eC,0),T.get(eC,1)];}return function(eC){return eB(eA(eC));};};k.tryGetPlugIn=function(ez){return k.plugIns().TryFindByKey(ez);};k.newActF=function(ez,eA){return bQ.New(ez,eA,p.Const(true));};k.tryGetViw=function(ez,eA){var eB;eB=k.tryGetPlugIn(ez);return eB==null?null:T.tryFind(function(eC){return eC.viwName===eA;},eB.$0.plgViews);};k.tryGetWoW=function(ez,eA){var eB,eC,eD;eB=(eC=k.tryGetViw(ez,eA),eC==null?null:{$:1,$0:{$:1,$0:eC.$0.viwView}});return eB==null?(eD=k.tryGetVar(ez,eA),eD==null?null:{$:1,$0:eD.$0.varVar.get_View()}):eB.$0;};k.getMainClientDoc=function(){var ez;return Z.EmbedView((ez=k.plugIns().v,p.Map2(function(eA,eB){var eC,eD;eC=bb.tryPick(function(eE){var eF;eF=bb.tryFind(function(eG){return eE.plgName===eA||eE.plgName+"."+eG.docName===eA;},eE.plgDocs);return eF==null?null:{$:1,$0:k.getLazyDoc(eF.$0)};},eB);eD=k.AppFwkClient().f();return eC==null?eD:eC.$0;},k.mainDocV().get_View(),ez)));};k.tryGetVoV=function(ez,eA){var eB,eC,eD;eB=(eC=k.tryGetVar(ez,eA),eC==null?null:{$:1,$0:{$:1,$0:eC.$0.varVar}});return eB==null?(eD=k.tryGetViw(ez,eA),eD==null?null:{$:1,$0:new cP.New(eD.$0.viwView,a.ignore)}):eB.$0;};k.getLazyDoc=function(ez){var eA;eA=ez.docDoc;return eA.$==0?eA.$0.f():Z.Element("div",[],[Z.TextNode((function(eB){return function(eC){return eB("Doc with parameters not allowed here: "+cV.p(eC));};}(a.id))(ez))]);};l.New=function(ez,eA,eB,eC,eD,eE){return{plgName:ez,plgVars:eA,plgViews:eB,plgDocs:eC,plgActions:eD,plgQueries:eE};};m.contentVar=function(){_5.$cctor();return _5.contentVar;};m.invitacionesV=function(){_5.$cctor();return _5.invitacionesV;};m.emailsInvitarW=function(){_5.$cctor();return _5.emailsInvitarW;};m.invitacionesDisabledW=function(){_5.$cctor();return _5.invitacionesDisabledW;};m.endPointV=function(){_5.$cctor();return _5.endPointV;};m.aliadoW=function(){_5.$cctor();return _5.aliadoW;};m.modeloV=function(){_5.$cctor();return _5.modeloV;};m.selAliadoIdOV=function(){_5.$cctor();return _5.selAliadoIdOV;};m.money=function(ez){return"$"+m.separate(a.String(ez),cH.Empty);};m.selAliadoIdDoc=function(ez){var eA;return Z.BindView(a.id,(eA=p.get_Do(),p.Bind(function(eB){return p.Bind(function(eC){var eD,eE;eD=eC==null?null:(eE=eC.$0,bb.tryFind(function(eF){return J.Equals(eF.id,eE);},eB.aliados));return p.Const(eD!=null&&eD.$==1?ez(p.Const(eD.$0)):Z.get_Empty());},m.selAliadoIdOV().get_View());},m.modeloV().get_View())));};m.aliadoIdDoc=function(ez){var eA;return Z.BindView(a.id,(eA=p.get_Do(),p.Bind(function(eB){var eC,eD;eC=eB.idAliado;eD=bb.tryFind(function(eE){return J.Equals(eE.id,eC);},eB.aliados);return p.Const(eD!=null&&eD.$==1?ez(p.Const(eD.$0)):Z.get_Empty());},m.modeloV().get_View())));};n.get_LoggedId=function(){var ez,eA;return new _1({$:0,$0:(ez=(eA=bR.userO().Get(),eA==null?null:{$:1,$0:eA.$0.idToken.oid}),ez==null?"":ez.$0)});};m.separate=function(ez,eA){var eB;while(true)if(ez==="")return(function(eC){return function(eD){return bi.concat(eC,eD);};}(","))(eA);else{eB=ez;ez=bc["String.Left$1"](eB,-3);eA=new cH({$:1,$0:bc["String.Right$1"](eB,3),$1:eA});}};m.formasPagoAliadoV=function(){_5.$cctor();return _5.formasPagoAliadoV;};o.FailWith=function(ez){throw new c9(ez);};o.toInt=function(ez){var eA;eA=o.toUInt(ez);return eA>=2147483648?eA-4294967296:eA;};o.range=function(ez,eA){var eB;eB=1+eA-ez;return eB<=0?[]:bb.init(eB,function(eC){return eC+ez;});};o.toUInt=function(ez){return(ez<0?es.ceil(ez):es.floor(ez))>>>0;};o.KeyValue=function(ez){return[ez.K,ez.V];};p.Map=function(ez,eA){return p.CreateLazy(function(){return _4.Map(ez,eA());});};p.Sink=function(ez,eA){function eB(){_4.WhenRun(eA(),ez,function(){cQ.scheduler().Fork(eB);});}cQ.scheduler().Fork(eB);};p.CreateLazy=function(ez){var eA;eA={c:null,o:ez};return function(){var eB,eC;eB=eA.c;return eB===null?(eB=eA.o(),eA.c=eB,(eC=eB.s,eC!=null&&eC.$==0)?eA.o=null:_4.WhenObsoleteRun(eB,function(){eA.c=null;}),eB):eB;};};p.Map2=function(ez,eA,eB){return p.CreateLazy(function(){return _4.Map2(ez,eA(),eB());});};p.Apply=function(ez,eA){return p.Map2(function(eB,eC){return eB(eC);},ez,eA);};p.Map3=function(ez,eA,eB,eC){return p.CreateLazy(function(){return _4.Map3(ez,eA(),eB(),eC());});};p.get_Do=function(){return bw.B;};p.Const=function(ez){var eA;eA=_4.New({$:0,$0:ez});return function(){return eA;};};p.MapAsync=function(ez,eA){return p.CreateLazy(function(){return _4.MapAsync(ez,eA());});};p.GetAsync=function(ez){return cQ.FromContinuations(function(eA){return p.Get(eA,ez);});};p.Get=function(ez,eA){var eB;function eC(){_4.WhenRun(eA(),function(eD){if(!eB[0]){eB[0]=true;ez(eD);}},function(){if(!eB[0])eC();});}eB=[false];eC();};p.TryGet=function(ez){return _4.TryGet(ez());};p.Bind=function(ez,eA){return p.Join(p.Map(ez,eA));};p.MapSeqCachedViewBy=function(ez,eA,eB){var eC;eC=[new b1.New$5()];return p.Map(function(eD){var eE,eF,eG;eE=eC[0];eF=new b1.New$5();eG=cS.mapInPlace(function(eH){var eI,eJ,eK;eI=ez(eH);eJ=eE.ContainsKey(eI)?(eK=eE.get_Item(eI),(i.Set(eK.r,eH),eK)):p.ConvertSeqNode(function(eL){return eA(eI,eL);},eH);eF.set_Item(eI,eJ);return eJ.e;},T.ofSeq(eD));eC[0]=eF;return eG;},eB);};p.Join=function(ez){return p.CreateLazy(function(){return _4.Join(ez());});};p.Map2Unit=function(ez,eA){return p.CreateLazy(function(){return _4.Map2Unit(ez(),eA());});};p.ConvertSeqNode=function(ez,eA){var eB,eC;eB=i.Create$1(eA);eC=eB.get_View();return{e:ez(eC),r:eB,w:eC};};p.MapSeqCachedBy=function(ez,eA,eB){var eC;eC=[new b1.New$5()];return p.Map(function(eD){var eE,eF,eG;eE=eC[0];eF=new b1.New$5();eG=cS.mapInPlace(function(eH){var eI,eJ;eI=ez(eH);eJ=eE.ContainsKey(eI)?eE.get_Item(eI):eA(eH);eF.set_Item(eI,eJ);return eJ;},T.ofSeq(eD));eC[0]=eF;return eG;},eB);};p.Sequence=function(ez){return p.CreateLazy(function(){return _4.Sequence(bb.map(function(eA){return eA();},ez));});};q=h.Var=er.Class({},g,q);q.New=er.Ctor(function(){g.New.call(this);},q);r.Create=function(ez){return ba.New(false,ez,r.forceLazy);};r.forceLazy=function(){var ez;ez=this.v();this.c=true;this.v=ez;this.f=r.cachedLazy;return ez;};r.cachedLazy=function(){return this.v;};r.CreateFromValue=function(ez){return ba.New(true,ez,r.cachedLazy);};s.aliados=function(){var ez,eA,eB,eC,eD,eE,eF;function eG(eP){var eQ,eR;eQ=(eR=eA.Get(),eR==null?null:{$:1,$0:eR.$0(eP)});return eQ==null?[]:eQ.$0;}function eH(eP){return eP.nReferidos===0?"-":(((er.Curried3(function(eQ,eR,eS){return eQ(a.String(eR)+"/"+a.String(eS));}))(a.id))(eP.nRefActivos))(eP.nReferidos);}function eI(eP){return eP.nDescendientes===0?"-":(((er.Curried3(function(eQ,eR,eS){return eQ(a.String(eR)+"/"+a.String(eS));}))(a.id))(eP.nDescActivos))(eP.nDescendientes);}function eJ(eP){return eP===0?"-":m.money(eP);}function eK(eP){return p.Map(function(eQ){return bb.isEmpty(eG(eP))?"":J.Equals(eQ==null?null:{$:1,$0:eQ.$0.Contains(eP)},{$:1,$0:true})?"Expandido":"Colapsado";},ez.get_View());}function eL(eP){var eQ,eR,eS;ez.Set({$:1,$0:((J.Equals((eQ=ez.Get(),eQ==null?null:{$:1,$0:eQ.$0.Contains(eP)}),{$:1,$0:true})?function(eT){return function(eU){return eU.Remove(eT);};}:function(eT){return function(eU){return eU.Add(eT);};})(eP))((eR=ez.Get(),(eS=new bg.New$1(null),eR==null?eS:eR.$0)))});}function eM(eP){m.selAliadoIdOV().Set({$:1,$0:eP});}function eN(eP){var eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e9,e_;function e3(e$){return e$.comision;}function e4(e$){return e$.status;}function e5(e$){return[e$.nRefActivos,e$.nReferidos];}function e6(e$){return[e$.nDescActivos,e$.nDescendientes];}function e7(e$){return O.nombre(e$.datosPersonales);}function e8(e$){return bb.delay(function(){return bb.append([e$],bb.delay(function(){var fa,fb;return(fa=(fb=ez.Get(),fb==null?null:{$:1,$0:fb.$0.Contains(e$.id)}),fa==null?false:fa.$0)?bb.collect(e8,e_.hijos(e$)):[];}));});}e9=(eQ=(eR=(eS=(eT=(eU=(er.Curried3(bd.desc))(e3),eV=(er.Curried3(bd.asc))(e4),er.Curried(bd.op_AmpGreater,2,[function(e$,fa){return(eU(e$))(fa);},function(e$,fa){return(eV(e$))(fa);}])),eW=(er.Curried3(bd.desc))(e5),er.Curried(bd.op_AmpGreater,2,[function(e$,fa){return(eT(e$))(fa);},function(e$,fa){return(eW(e$))(fa);}])),eX=(er.Curried3(bd.desc))(e6),er.Curried(bd.op_AmpGreater,2,[function(e$,fa){return(eS(e$))(fa);},function(e$,fa){return(eX(e$))(fa);}])),eY=(er.Curried3(bd.asc))(e7),er.Curried(bd.op_AmpGreater,2,[function(e$,fa){return(eR(e$))(fa);},function(e$,fa){return(eY(e$))(fa);}])),bb.sortWith(function(e$,fa){return(eQ(e$))(fa);},eP));e_=O.busqueda(e9);eA.Set({$:1,$0:e_.hijosDe});try{e0=bb.min(bb.map(function(e$){return e$.nivel;},e9));}catch(e$){e0=1;}e1=bb.filter(function(fa){return fa.nivel===e0;},e9);bb.isEmpty(e1)?ez.Set(null):ez.Get()==null?(ez.Set({$:1,$0:new bg.New(bb.map(function(fa){return fa.id;},e1))}),e2=bb.tryHead(bb.map(function(fa){return fa.id;},e1)),e2==null?void 0:eM(e2.$0)):void 0;return bb.delay(function(){return bb.collect(e8,e1);});}function eO(eP,eQ){var eR,eS,eT,eU,eV,eW;return(eR=(eS=(eT=(eU=eK(eP),U.Make().WithHole({$:2,$0:"nombre",$1:p.Map(function(eX){return O.nombre(eX.datosPersonales);},eQ)}).WithHole({$:2,$0:"status",$1:p.Map(function(eX){return(function(eY){return function(eZ){return eY(X.p(eZ));};}(a.id))(eX.status);},eQ)}).WithHole({$:2,$0:"tipo",$1:p.Map(function(eX){return(function(eY){return function(eZ){return eY(X.p$1(eZ));};}(a.id))(eX.tipo);},eQ)}).WithHole({$:2,$0:"nivel",$1:p.Map(function(eX){return a.String(eX.nivel);},eQ)}).WithHole({$:2,$0:"referidos",$1:p.Map(eH,eQ)}).WithHole({$:2,$0:"descendientes",$1:p.Map(eI,eQ)}).WithHole({$:2,$0:"comision",$1:p.Map(function(eX){return eJ(eX.comision);},eQ)}).WithHole({$:2,$0:"expandido",$1:eU})),eT.WithHole(V.EventQ2(eT.k,"expandir",function(){return eT.i;},function(){eL(eP);}))).WithHole({$:2,$0:"seleccionado",$1:p.Map(function(eX){return J.Equals({$:1,$0:eP},eX)?"seleccionado":"";},m.selAliadoIdOV().get_View())}),eS.WithHole(V.EventQ2(eS.k,"seleccionar",function(){return eS.i;},function(){eM(eP);}))),(eV=V.CompleteHoles(eR.k,eR.h,[]),(eW=new S.New(eV[1],W.filaaliado(eV[0])),(eR.i=eW,eW)))).get_Doc();}ez=i.Create$1(null);eA=i.Create$1(null);return(eB=(eC=Z.ConvertSeqBy(function(eP){return eP.id;},function(eP){return function(eQ){return eO(eP,eQ);};},(eD=p.Map(function(eP){return eP.aliados;},m.modeloV().get_View()),p.Map2(function(eP,eQ){return eN(eQ);},ez.get_View(),eD))),U.Make().WithHole({$:0,$0:"tbody",$1:eC})),(eE=V.CompleteHoles(eB.k,eB.h,[]),(eF=new S.New(eE[1],W.tablaaliados(eE[0])),(eB.i=eF,eF)))).get_Doc();};t.aliado=function(){function ez(eA){var eB;eB=bb.tryPick(function(eC){return eC.$==1?{$:1,$0:eC.$0.email}:null;},eA.contactos);return eB==null?"correo no encontrado!":eB.$0;}return m.selAliadoIdDoc(function(eA){var eB,eC,eD,eE;return(eB=(eC=t.calculo(),U.Make().WithHole({$:2,$0:"nombre",$1:p.Map(function(eF){return O.nombre2(eF.datosPersonales);},eA)}).WithHole({$:2,$0:"status",$1:p.Map(function(eF){return(function(eG){return function(eH){return eG(X.p(eH));};}(a.id))(eF.status);},eA)}).WithHole({$:2,$0:"tipo",$1:p.Map(function(eF){return(function(eG){return function(eH){return eG(X.p$1(eH));};}(a.id))(eF.tipo);},eA)}).WithHole({$:2,$0:"contacto",$1:p.Map(ez,eA)}).WithHole({$:0,$0:"calculo",$1:eC})),(eD=V.CompleteHoles(eB.k,eB.h,[]),(eE=new S.New(eD[1],W.aliado(eD[0])),(eB.i=eE,eE)))).get_Doc();});};t.calculo=function(){var ez,eA;ez=p.Map(function(eB){return eB.premisas;},m.modeloV().get_View());eA=p.Map(function(eB){return eB.aliados;},m.modeloV().get_View());p.Map2(function(eB,eC){return bb.tryFind(function(eD){return J.Equals(eD.id,eB);},eC);},p.Map(function(eB){return eB.idAliado;},m.modeloV().get_View()),eA);return m.selAliadoIdDoc(function(eB){var eC,eD,eE,eF,eG;eC=p.Map2(O.comision,ez,eB);eD=p.Map2(O.premisas,ez,eB);return(eE=U.Make().WithHole({$:2,$0:"referidos",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(a.String(eJ));};}(a.id))(eH.nReferidos);},eB)}).WithHole({$:2,$0:"refactivos",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(a.String(eJ));};}(a.id))(eH.nRefActivos);},eB)}).WithHole({$:2,$0:"comreferido",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(a.String(eJ));};}(a.id))(eH.nRefActivos);},eB)}).WithHole({$:2,$0:"descendientes",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(a.String(eJ));};}(a.id))(eH.nDescendientes);},eB)}).WithHole({$:2,$0:"desactivos",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI(a.String(eJ));};}(a.id))(eH.nDescActivos);},eB)}).WithHole({$:2,$0:"comision",$1:p.Map(function(eH){return m.money(eH[0]+eH[1]);},eC)}).WithHole({$:2,$0:"comreferido",$1:p.Map(function(eH){return m.money(eH[0]);},eC)}).WithHole({$:2,$0:"comdescendiente",$1:p.Map(function(eH){return m.money(eH[1]);},eC)}).WithHole({$:2,$0:"porreferido",$1:p.Map(function(eH){return m.money(eH[0]);},eD)}).WithHole({$:2,$0:"pordescendiente",$1:p.Map(function(eH){return m.money(eH[1]);},eD)}),(eF=V.CompleteHoles(eE.k,eE.h,[]),(eG=new S.New(eF[1],W.calculo(eF[0])),(eE.i=eG,eG)))).get_Doc();});};u.formaDoc=function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN;ez=i.Create$1("");eA=i.Create$1(false);eB=i.Create$1(null);eC=i.Create$1(null);eD=i.Create$1(null);eE=i.Create$1(null);eF=bk.formaDoc(eB);eG=bl.formaDoc(eC);eH=bm.formaDoc(eD);eI=bn.formaDoc(eE);eJ=(eK=(eL=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eO,eP){return eO?eP:"";},eA.get_View(),ez.get_View())}).WithHole({$:0,$0:"datospersonales",$1:eF[1]}).WithHole({$:0,$0:"correo",$1:eG[1]}).WithHole({$:0,$0:"telefono",$1:eH[1]}).WithHole({$:0,$0:"direccion",$1:eI[1]}),eL.WithHole(V.EventQ2(eL.k,"registrarse",function(){return eL.i;},function(){var eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY;eA.Set(true);eO=ez.Get();bi.Trim(eO)!==""?a.alert(eO):(eP=eB.Get(),eQ=eC.Get(),eR=eD.Get(),eS=eE.Get(),eP!=null&&eP.$==1&&(eQ!=null&&eQ.$==1&&(eR!=null&&eR.$==1&&(eS!=null&&eS.$==1&&(eT=[eQ.$0,eP.$0,eS.$0,eR.$0],true))))?(eU=eT[0],eV=eT[1],eW=eT[2],eX=eT[3],_0.iterA((eY=bo.asyncResult(),eY.Run(eY.Delay(function(){var eZ;return eY.Bind$1(_0.ejecutarDataEventoNuevo({$:3,$0:[new _1({$:0,$0:bi.Substring(bi.Replace((eZ=bs.NewGuid(),a.String(eZ)),"-",""),0,20)}),eV,{$:1,$0:m.modeloV().Get().idAliado},[{$:1,$0:eU},{$:2,$0:eX},{$:0,$0:eW}]]}),function(e0){bq.refrescarData(true);a.alert((function(e1){return function(e2){return e1(X.p$15(e2));};}(a.id))(e0));return eY.Zero();});}))))):a.alert("Error not caught FormaRegistro"));}))),(eM=V.CompleteHoles(eK.k,eK.h,[]),(eN=new S.New(eM[1],W.formaregistro(eM[0])),(eK.i=eN,eN))));p.Sink(function(eO){ez.Set(eO);},p.Apply(p.Apply(p.Map2(function(eO,eP){return function(eQ){return function(eR){var eS;eS=bi.concat(", ",bb.delay(function(){return bb.append(eO,bb.delay(function(){return bb.append(eP,bb.delay(function(){return bb.append(eQ,bb.delay(function(){return eR;}));}));}));}));return eS!==""?"Campos requeridos: "+eS:"";};};},eF[0],eG[0]),eH[0]),eI[0]));return eJ.get_Doc();};v.formaDoc=function(){return m.aliadoIdDoc(v.formaAliado);};v.formaAliado=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI;function eJ(eL){return{$:1,$0:eL};}function eK(eL){eC.Set(eL);}eA=i.Create$1("");eB=i.Create$1(false);eC=i.Create$1(null);p.Sink(function(eL){return eK(eJ(eL));},p.Map(function(eL){return eL.datosPersonales;},ez));eD=bk.formaDoc(eC);eE=(eF=(eG=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eL,eM){return eL?eM:"";},eB.get_View(),eA.get_View())}).WithHole({$:2,$0:"changed",$1:p.Map2(function(eL,eM){return J.Equals({$:1,$0:eL.datosPersonales},eM)?"":"mui-btn--primary";},ez,eC.get_View())}).WithHole({$:0,$0:"datospersonales",$1:eD[1]}),eG.WithHole(V.EventQ2(eG.k,"salvar",function(){return eG.i;},function(){var eL,eM,eN,eO,eP,eQ,eR;eB.Set(true);eL=eA.Get();bi.Trim(eL)!==""?a.alert(eL):(eM=eC.Get(),eN=p.TryGet(ez),eM!=null&&eM.$==1&&(eN!=null&&eN.$==1&&(eO=[eN.$0,eM.$0],true))?(eP=eO[0],eQ=eO[1],_0.iterA((eR=bo.asyncResult(),eR.Run(eR.Delay(function(){return eR.Bind$1(_0.ejecutarDataEventoNuevo({$:4,$0:[eP.id,eQ]}),function(eS){bq.refrescarData(true);a.alert((function(eT){return function(eU){return eT(X.p$15(eU));};}(a.id))(eS));return eR.Zero();});}))))):a.alert("Error not caught FormaDatos"));}))),(eH=V.CompleteHoles(eF.k,eF.h,[]),(eI=new S.New(eH[1],W.formadatospersonales(eH[0])),(eF.i=eI,eI))));p.Sink(function(eL){eA.Set(eL);},p.Map(function(eL){var eM;eM=bi.concat(", ",bb.delay(function(){return eL;}));return eM!==""?"Campos requeridos: "+eM:"";},eD[0]));return eE.get_Doc();};w.formaDoc=function(){return m.aliadoIdDoc(w.formaContactos);};w.formaContactos=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT;function eU(eV,eW){return function(eX){return new cP.New(p.Map(function(eY){var eZ;eZ=bb.tryItem(eX,eY);return eZ==null?null:eV(eZ.$0);},eC.get_View()),function(eY){if(eY!=null&&eY.$==1)eC.Set(cK.replace(eX,eW(eY.$0),eC.Get()));});};}eA=i.Create$1("");eB=i.Create$1(false);eC=i.Create$1([]);p.Sink(function(eV){eC.Set(eV);},p.Map(function(eV){return eV.contactos;},ez));eD=p.Map(bb.indexed,eC.get_View());eE=[function(eV){return eV.$==2?{$:1,$0:eV.$0}:null;},function(eV){return{$:2,$0:eV};}];eF=[function(eV){return eV.$==1?{$:1,$0:eV.$0}:null;},function(eV){return{$:1,$0:eV};}];eG=[function(eV){return eV.$==0?{$:1,$0:eV.$0}:null;},function(eV){return{$:0,$0:eV};}];eH=p.Map(function(eV){function eW(eX,eY){return eE[0](eY)==null?null:{$:1,$0:eX};}return bb.choose(function(eX){return eW(eX[0],eX[1]);},eV);},eD);eI=p.Map(function(eV){function eW(eX,eY){return eF[0](eY)==null?null:{$:1,$0:eX};}return bb.choose(function(eX){return eW(eX[0],eX[1]);},eV);},eD);eJ=p.Map(function(eV){function eW(eX,eY){return eG[0](eY)==null?null:{$:1,$0:eX};}return bb.choose(function(eX){return eW(eX[0],eX[1]);},eV);},eD);eK=Z.ConvertBy(a.id,function(eV){return bt.removeButton(function(){eC.Set(cK.remove(eV,eC.Get()));},(bm.formaDoc((function(eW){return eU(eW[0],eW[1]);}(eE))(eV)))[1]);},eH);eL=Z.ConvertBy(a.id,function(eV){return bt.removeButton(function(){eC.Set(cK.remove(eV,eC.Get()));},(bl.formaDoc((function(eW){return eU(eW[0],eW[1]);}(eF))(eV)))[1]);},eI);eM=Z.ConvertBy(a.id,function(eV){return bt.removeButton(function(){eC.Set(cK.remove(eV,eC.Get()));},(bn.formaDoc((function(eW){return eU(eW[0],eW[1]);}(eG))(eV)))[1]);},eJ);return(eN=(eO=(eP=(eQ=(eR=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eV,eW){return eV?eW:"";},eB.get_View(),eA.get_View())}).WithHole({$:2,$0:"changed",$1:p.Map2(function(eV,eW){return J.Equals(eV.contactos,eW)?"":"mui-btn--primary";},ez,eC.get_View())}).WithHole({$:0,$0:"telefonos",$1:eK}).WithHole({$:0,$0:"correos",$1:eL}).WithHole({$:0,$0:"direcciones",$1:eM}),eR.WithHole(V.EventQ2(eR.k,"mastelefono",function(){return eR.i;},function(){eC.Set(eC.Get().concat([{$:2,$0:M.telVacio()}]));}))),eQ.WithHole(V.EventQ2(eQ.k,"mascorreo",function(){return eQ.i;},function(){eC.Set(eC.Get().concat([{$:1,$0:M.correoVacio()}]));}))),eP.WithHole(V.EventQ2(eP.k,"masdireccion",function(){return eP.i;},function(){eC.Set(eC.Get().concat([{$:0,$0:M.dirVacio()}]));}))),eO.WithHole(V.EventQ2(eO.k,"salvar",function(){return eO.i;},function(){var eV,eW,eX,eY;eB.Set(true);eV=eA.Get();bi.Trim(eV)!==""?a.alert(eV):(eW=p.TryGet(ez),eW!=null&&eW.$==1?(eX=eW.$0,_0.iterA((eY=bo.asyncResult(),eY.Run(eY.Delay(function(){return eY.Bind$1(_0.ejecutarDataEventoNuevo({$:5,$0:[eX.id,eC.Get()]}),function(eZ){bq.refrescarData(true);a.alert((function(e0){return function(e1){return e0(X.p$15(e1));};}(a.id))(eZ));return eY.Zero();});}))))):a.alert("Error not caught FormaDatos"));}))),(eS=V.CompleteHoles(eN.k,eN.h,[]),(eT=new S.New(eS[1],W.formacontactos(eS[0])),(eN.i=eT,eT)))).get_Doc();};x.formaDoc=function(){return m.aliadoIdDoc(x.formaFormasPago);};x.formaFormasPago=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN;function eO(eT,eU){return function(eV){return new cP.New(p.Map(function(eW){var eX;eX=bb.tryItem(eV,eW);return eX==null?null:eT(eX.$0);},eC.get_View()),function(eW){var eX;if(eW!=null&&eW.$==1){eX=eW.$0;eC.Set(cK.replace(eV,(eU(T.get(eC.Get(),eV)))(bt.fst3(eX[0],eX[1],eX[2])),eC.Get()));}});};}function eP(eT){var eU;_0.iterA((eU=bo.asyncResult(),eU.Run(eU.Delay(function(){return eU.Bind(eT.authorizeIdR,function(eV){return eU.Bind$1(_0.validarFormaPago(eV),function(eW){a.alert(eW);return eU.Zero();});});}))));}function eQ(eT,eU){return bt.removeButton(function(){eC.Set(cK.remove(eT,eC.Get()));},Z.Concat(by.ofSeq(bb.delay(function(){return bb.append([Z.Button("AUTORIZAR DEBITO",[cR.Create("class","mui-btn mui-btn--raised mui-btn--primary"),cR.Create("title","Autorizar pago recurrente"),cU.Dynamic("style",p.Map(function(eV){return T.get(eV,eT).authorizeIdR.$==0?"":"display:None";},eC.get_View()))],function(){var eV,eW,eX,eY,eZ;eW=T.get(eC.Get(),eT).authorizeIdR;eX=T.get(eC.Get(),eT).cuentaPago;switch(eW.$==0?eX.$==0?(eV=[eW.$0,eX.$0.titular],1):eX.$==1?(eV=[eW.$0,eX.$0.titular],1):2:(eV=eW.$0,0)){case 0:a.alert("Pago no está verificado en Authorize: "+eV);break;case 1:eY={$:1,$0:T.get(eC.Get(),eT).cuentaPago};B.cuentaPagoO().Set(eY);eZ=eU();B.cuentaAutorizar().Set(eZ);B.titular().Set(eV[1]);B.set_pid(eV[0]);m.endPointV().Set({$:3,$0:"ProzperLyt.cntAutorizacion"});break;case 2:a.alert("Autorizacion no esta implementada");break;}})],bb.delay(function(){return bb.append([Z.Element("br",[],[])],bb.delay(function(){return bb.append([Z.Element("br",[],[])],bb.delay(function(){return bb.append([eU()],bb.delay(function(){return bb.append([Z.BindView(a.id,p.Map(function(eV){var eW;eW=T.get(eV,eT).subscripcion;return eW!=null&&eW.$==1?Z.Element("div",[],[Z.TextNode((function(eX){return function(eY){return eX("Subscripcion: "+bC.toSafe(eY));};}(a.id))(eW.$0.get_Short()))]):Z.get_Empty();},eC.get_View()))],bb.delay(function(){return[Z.Button("validar",[cR.Create("title","validar forma de pago"),cU.Dynamic("style",p.Map(function(eV){return T.get(eV,eT).authorizeIdR.$==0?"":"display:None";},eC.get_View()))],function(){eP(T.get(eC.Get(),eT));})];}));}));}));}));}));}))));}function eR(eT){return bD.New("",bc.Error$1(""),eT,null);}function eS(eT){return new bg.New(bb.choose(function(eU){var eV;eV=eU.authorizeIdR;return eV.$==0?{$:1,$0:eV.$0}:null;},eT));}eA=i.Create$1("");eB=i.Create$1(false);eC=i.Create$1([]);p.Sink(function(eT){eC.Set(eT);},m.formasPagoAliadoV().get_View());x.refrescarFormasPago();eD=p.Map(bb.indexed,eC.get_View());eE=p.Map(function(eT){function eU(eV,eW){return(x.ftar())[0](eW)==null?null:{$:1,$0:eV};}return bb.choose(function(eV){return eU(eV[0],eV[1]);},eT);},eD);eF=p.Map(function(eT){function eU(eV,eW){return(x.fcta())[0](eW)==null?null:{$:1,$0:eV};}return bb.choose(function(eV){return eU(eV[0],eV[1]);},eT);},eD);eG=Z.ConvertBy(a.id,function(eT){var eU;return eQ(eT,(eU=(function(eV){return eO(eV[0],eV[1]);}(x.ftar()))(eT),function(){return(cN.formaDocO(eU))[1];}));},eE);eH=Z.ConvertBy(a.id,function(eT){var eU;return eQ(eT,(eU=(function(eV){return eO(eV[0],eV[1]);}(x.fcta()))(eT),function(){return(cM.formaDocO(eU))[1];}));},eF);return(eI=(eJ=(eK=(eL=U.Make().WithHole({$:2,$0:"mensajes",$1:p.Map2(function(eT,eU){return eT?eU:"";},eB.get_View(),eA.get_View())}).WithHole({$:0,$0:"tarjetas",$1:eG}).WithHole({$:0,$0:"cuentas",$1:eH}),eL.WithHole(V.EventQ2(eL.k,"mastarjeta",function(){return eL.i;},function(){eC.Set(eC.Get().concat([eR(new bN({$:1,$0:M.tarVacio()}))]));}))),eK.WithHole(V.EventQ2(eK.k,"mascuenta",function(){return eK.i;},function(){eC.Set(eC.Get().concat([eR(new bN({$:0,$0:M.ctaVacio()}))]));}))).WithHole({$:2,$0:"changed",$1:p.Map2(function(eT,eU){return J.Equals(eT,eU)?"":"mui-btn--primary";},m.formasPagoAliadoV().get_View(),eC.get_View())}),eJ.WithHole(V.EventQ2(eJ.k,"salvar",function(){return eJ.i;},function(){var eT,eU,eV;eB.Set(true);eT=eA.Get();bi.Trim(eT)!==""?a.alert(eT):(eU=p.TryGet(ez),eU!=null&&eU.$==1?_0.iterA((eV=bo.asyncResult(),eV.Run(eV.Delay(function(){return eV.Combine$1(eV.For(bg.op_Subtraction(eS(m.formasPagoAliadoV().Get()),eS(eC.Get())),function(eW){return eV.Bind$1(_0.borrarFormaPago(eW),function(){return eV.Zero();});}),eV.Delay(function(){return eV.Combine$1(eV.For(eC.Get(),function(eW){var eX,eY,eZ,e0;eX=(eY=eW.cuentaPago,eY.$==1&&(!(eY.$0.numero.get_Id().indexOf("X")!=-1)&&(eZ=eY.$0,true))?{$:1,$0:_0.registrarTarjeta(eZ)}:eY.$==0&&(!(eY.$0.numero.get_Id().indexOf("X")!=-1)&&(e0=eY.$0,true))?{$:1,$0:_0.registrarCuenta(e0)}:null);return eX!=null&&eX.$==1?eV.Bind$1(eX.$0,function(){return eV.Zero();}):eV.Zero();}),eV.Delay(function(){x.refrescarFormasPago();bq.refrescarData(true);return eV.Zero();}));}));})))):a.alert("Error not caught FormaDatos"));}))),(eM=V.CompleteHoles(eI.k,eI.h,[]),(eN=new S.New(eM[1],W.formacuentas(eM[0])),(eI.i=eN,eN)))).get_Doc();};x.msg=function(ez){var eA;eA=ez.authorizeIdR;return eA.$==0?(function(eB){return function(eC){return eB("Cuenta verificada: "+X.p$16(eC));};}(a.id))(eA.$0):eA.$0===""?"La cuenta aun no ha sido verificada":eA.$0;};x.refrescarFormasPago=function(){_0.iterA(cI.map(function(ez){m.formasPagoAliadoV().Set(ez);},_0.obtenerFormasDePago()));};x.fcta=function(){_5.$cctor();return _5.fcta;};x.ftar=function(){_5.$cctor();return _5.ftar;};y.consolidado=function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY;function eZ(e9){function e_(e$,fa,fb){return fb(e9);}return T.map(function(e$){return e_(e$[0],e$[1],e$[2]);},y.definicion());}function e0(e9,e_,e$){return function(fa){var fb;fb=fa[0];return[fb===e9?1:fb<e9?fb+1:fb,e9===fb&&e9===1?!fa[1]:fa[1],fa[2]];};}function e1(e9){var e_;eA.Set((e_=eA.Get(),T.map(e0.apply(null,e9),e_)));}function e2(e9,e_){return ez.Set(T.map(function(e$){return J.Equals(e$.id,e9)?e_(e$):e$;},ez.Get()));}function e3(e9,e_){return e2(e9,function(e$){return N.New(e$.id,e$.idPadreO,e$.idForAuthorize,e$.influyente,e$.datosPersonales,e$.contactos,e$.identificacion,e$.isInternal,bx.tryParse(e_),e$.diaPago,e$.tipo,e$.fechaRegistro,e$.fechaStatus,e$.nReferidos,e$.nRefActivos,e$.nDescendientes,e$.nDescActivos,e$.comision,e$.nivel,e$.documentos,e$.docPendientes);});}function e4(e9,e_){return e2(e9,function(e$){return N.New(e$.id,e$.idPadreO,e$.idForAuthorize,bi.Trim(e_)===""?null:{$:1,$0:bi.Trim(e_)},e$.datosPersonales,e$.contactos,e$.identificacion,e$.isInternal,e$.status,e$.diaPago,e$.tipo,e$.fechaRegistro,e$.fechaStatus,e$.nReferidos,e$.nRefActivos,e$.nDescendientes,e$.nDescActivos,e$.comision,e$.nivel,e$.documentos,e$.docPendientes);});}function e5(e9,e_){var e$;e$=e_===""?null:{$:1,$0:new _1({$:0,$0:e_})};return e2(e9,function(fa){return N.New(fa.id,e$,fa.idForAuthorize,fa.influyente,fa.datosPersonales,fa.contactos,fa.identificacion,fa.isInternal,fa.status,fa.diaPago,fa.tipo,fa.fechaRegistro,fa.fechaStatus,fa.nReferidos,fa.nRefActivos,fa.nDescendientes,fa.nDescActivos,fa.comision,fa.nivel,fa.documentos,fa.docPendientes);});}function e6(e9){return bb.tryFind(function(e_){return J.Equals(e_.id,e9);},m.modeloV().Get().aliados);}function e7(){var e9;_0.iterA((e9=bo.asyncResult(),e9.Run(e9.Delay(function(){return e9.Combine$1(e9.For(ez.Get(),function(e_){var e$,fa;e$=e6(e_.id);return e$!=null&&e$.$==1?(fa=e$.$0,!J.Equals(e_.status,fa.status)||!J.Equals(e_.idPadreO,fa.idPadreO)||!J.Equals(e_.influyente,fa.influyente)?e9.Bind$1(_0.ejecutarDataEventoNuevo({$:8,$0:[e_.id,e_.status,e_.idPadreO,e_.influyente]}),function(){return e9.Zero();}):e9.Zero()):e9.Zero();}),e9.Delay(function(){bq.refrescarData(true);return e9.Zero();}));}))));}function e8(e9,e_){var e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk;return(e$=(fa=(fb=Z.BindView(a.id,p.Map(function(fl){return J.Equals(fl,{$:1,$0:new _1({$:0,$0:e9})})?eF.f():Z.get_Empty();},A.expandedOV().get_View())),(fc=Z.BindView(bt.crearOptions,bt.statuses().get_View()),(fd=new cP.New(p.Map(function(fl){return T.get(fl,y.i_influyente());},e_),(fe=new _1({$:0,$0:e9}),function(fl){return e4(fe,fl);})),(ff=new cP.New(p.Map(function(fl){return T.get(fl,y.i_status());},e_),(fg=new _1({$:0,$0:e9}),function(fl){return e3(fg,fl);})),(fh=new cP.New(p.Map(function(fl){return T.get(fl,y.i_referido());},e_),(fi=new _1({$:0,$0:e9}),function(fl){return e5(fi,fl);})),U.Make().WithHole({$:2,$0:"nombre",$1:p.Map(function(fl){return T.get(fl,y.i_nombre());},e_)}).WithHole({$:2,$0:"correo",$1:p.Map(function(fl){return T.get(fl,y.i_correo());},e_)}).WithHole({$:2,$0:"tipo",$1:p.Map(function(fl){return T.get(fl,y.i_tipo());},e_)}).WithHole({$:8,$0:"referido",$1:fh})).WithHole({$:8,$0:"status",$1:ff})).WithHole({$:8,$0:"influyente",$1:fd})).WithHole({$:0,$0:"statuses",$1:fc})).WithHole({$:2,$0:"nivel",$1:p.Map(function(fl){return T.get(fl,y.i_nivel());},e_)}).WithHole({$:2,$0:"referidos",$1:p.Map(function(fl){return T.get(fl,y.i_referidos());},e_)}).WithHole({$:2,$0:"descendientes",$1:p.Map(function(fl){return T.get(fl,y.i_descendientes());},e_)}).WithHole({$:2,$0:"comision",$1:p.Map(function(fl){return T.get(fl,y.i_comision());},e_)}).WithHole({$:2,$0:"diapago",$1:p.Map(function(fl){return T.get(fl,y.i_diaPago());},e_)}).WithHole({$:2,$0:"desde",$1:p.Map(function(fl){return T.get(fl,y.i_desde());},e_)}).WithHole({$:2,$0:"id",$1:p.Map(function(fl){return T.get(fl,y.i_Id());},e_)}).WithHole({$:0,$0:"detalles",$1:fb})),fa.WithHole(V.EventQ2(fa.k,"expandfiles",function(){return fa.i;},function(){var fl;cQ.Start((fl=null,cQ.Delay(function(){return cQ.Bind((_0.addLlamadas())(1),function(){var fm;fm=J.Equals(A.expandedOV().Get(),{$:1,$0:new _1({$:0,$0:e9})})?null:{$:1,$0:new _1({$:0,$0:e9})};A.expandedOV().Set(fm);return cQ.Bind((_0.addLlamadas())(-1),function(){return cQ.Return(null);});});})),null);}))).WithHole({$:2,$0:"expanded",$1:p.Map(function(fl){return T.get(fl,y.i_archivos());},e_)}),(fj=V.CompleteHoles(e$.k,e$.h,[["status",0],["influyente",0],["referido",0]]),(fk=new S.New(fj[1],W.filaconsolidado(fj[0])),(e$.i=fk,fk)))).get_Doc();}ez=i.Create$1([]);p.Sink(function(e9){ez.Set(e9);},p.Map(function(e9){return e9.aliados;},m.modeloV().get_View()));eA=i.Create$1(T.mapi(function(e9,e_){return[e_[0],e_[1],function(e$){return T.get(e$,e9).toUpperCase();}];},y.definicion()));eB=i.Create$1("");eC=Z.BindView(function(e9){return bt.crearOptions2(bb.map(function(e_){return[O.nombre2(e_.datosPersonales),e_.id.get_Id()];},e9.aliados));},m.modeloV().get_View());eD=Z.BindView(a.id,(eE=p.get_Do(),p.Bind(function(e9){var e_;return e9!=null&&e9.$==1?(e_=e9.$0,p.Bind(function(e$){var fa;fa=bb.tryFind(function(fb){return J.Equals(fb.id,e_);},e$);return fa!=null&&fa.$==1?p.Const(E.pendientes(p.Const(fa.$0))):p.Const(Z.get_Empty());},ez.get_View())):p.Const(Z.get_Empty());},A.expandedOV().get_View())));eF=r.Create(function(){return Z.Element("tr",[cR.Create("bgcolor","beige")],[Z.Element("td",[cR.Create("colspan","12")],[eD,A.listaDocs()])]);});return(eG=(eH=Z.ConvertSeqBy(function(e9){return T.get(e9,y.i_Id());},function(e9){return function(e_){return e8(e9,e_);};},p.Map3(function(e9,e_,e$){var fa,fb,fc;function fd(fg,fh,fi){return fi;}function fe(fg,fh,fi,fj){return bd.op_AmpGreater(function(fk,fl){return(fg(fk))(fl);},function(fk,fl){return(fh(fk))(fl);},fi,fj);}function ff(fg,fh,fi){return(fh?er.Curried3(bd.asc):er.Curried3(bd.desc))(fi);}fa=bi.Trim(e$).toUpperCase();fb=T.map(function(fg){return fd(fg[0],fg[1],fg[2]);},a.id(e_));fc=T.reduce(function(fg,fh){return er.Curried(fe,2,[fg,fh]);},T.map(function(fg){return ff(fg[0],fg[1],fg[2]);},T.sortBy(function(fg){return a.id(fg[0],fg[1],fg[2]);},a.id(e_))));return bb.sortWith(function(fg,fh){return(fc(fg))(fh);},bb.filter(function(fg){return fa===""||bb.exists(function(fh){return fh(fg).indexOf(fa)!=-1;},fb);},bb.map(eZ,e9)));},p.Map(function(e9){return e9.aliados;},m.modeloV().get_View()),eA.get_View(),eB.get_View())),(eI=(eJ=(eK=(eL=(eM=(eN=(eO=(eP=(eQ=(eR=(eS=(eT=(eU=(eV=(eW=U.Make(),eW.WithHole(V.EventQ2(eW.k,"salvar",function(){return eW.i;},function(){e7();}))),eV.WithHole(V.EventQ2(eV.k,"cancelar",function(){return eV.i;},function(){ez.Set(m.modeloV().Get().aliados);}))).WithHole({$:2,$0:"changed",$1:p.Map2(function(e9,e_){return J.Equals(e9.aliados,e_)?"":"mui-btn--primary";},m.modeloV().get_View(),ez.get_View())}).WithHole({$:8,$0:"filtro",$1:eB}).WithHole({$:0,$0:"referidores",$1:eC}),eU.WithHole(V.EventQ2(eU.k,"sort_archivos",function(){return eU.i;},function(){e1(T.get(eA.Get(),y.i_archivos()));}))),eT.WithHole(V.EventQ2(eT.k,"sort_nombre",function(){return eT.i;},function(){e1(T.get(eA.Get(),y.i_nombre()));}))),eS.WithHole(V.EventQ2(eS.k,"sort_correo",function(){return eS.i;},function(){e1(T.get(eA.Get(),y.i_correo()));}))),eR.WithHole(V.EventQ2(eR.k,"sort_status",function(){return eR.i;},function(){e1(T.get(eA.Get(),y.i_status()));}))),eQ.WithHole(V.EventQ2(eQ.k,"sort_influyente",function(){return eQ.i;},function(){e1(T.get(eA.Get(),y.i_influyente()));}))),eP.WithHole(V.EventQ2(eP.k,"sort_tipo",function(){return eP.i;},function(){e1(T.get(eA.Get(),y.i_tipo()));}))),eO.WithHole(V.EventQ2(eO.k,"sort_referido",function(){return eO.i;},function(){e1(T.get(eA.Get(),y.i_referido()));}))),eN.WithHole(V.EventQ2(eN.k,"sort_nivel",function(){return eN.i;},function(){e1(T.get(eA.Get(),y.i_nivel()));}))),eM.WithHole(V.EventQ2(eM.k,"sort_referidos",function(){return eM.i;},function(){e1(T.get(eA.Get(),y.i_referidos()));}))),eL.WithHole(V.EventQ2(eL.k,"sort_descendientes",function(){return eL.i;},function(){e1(T.get(eA.Get(),y.i_descendientes()));}))),eK.WithHole(V.EventQ2(eK.k,"sort_comision",function(){return eK.i;},function(){e1(T.get(eA.Get(),y.i_comision()));}))),eJ.WithHole(V.EventQ2(eJ.k,"sort_diapago",function(){return eJ.i;},function(){e1(T.get(eA.Get(),y.i_diaPago()));}))),eI.WithHole(V.EventQ2(eI.k,"sort_desde",function(){return eI.i;},function(){e1(T.get(eA.Get(),y.i_desde()));}))).WithHole({$:2,$0:"flecha_archivos",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_archivos());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_nombre",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_nombre());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_correo",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_correo());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_status",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_status());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_influyente",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_influyente());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_tipo",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_tipo());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_referido",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_referido());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_nivel",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_nivel());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_referidos",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_referidos());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_descendientes",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_descendientes());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_comision",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_comision());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_diapago",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_diaPago());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:2,$0:"flecha_desde",$1:p.Map(function(e9){var e_;e_=T.get(e9,y.i_desde());return y.flecha(e_[0],e_[1],e_[2]);},eA.get_View())}).WithHole({$:0,$0:"tbody",$1:eH})),(eX=V.CompleteHoles(eG.k,eG.h,[["filtro",0]]),(eY=new S.New(eX[1],W.consolidado(eX[0])),(eG.i=eY,eY)))).get_Doc();};y.definicion=function(){_5.$cctor();return _5.definicion;};y.i_desde=function(){_5.$cctor();return _5.i_desde;};y.flecha=function(ez,eA,eB){return ez===1?eA?"\u2191":"\u2193":"";};y.i_diaPago=function(){_5.$cctor();return _5.i_diaPago;};y.i_comision=function(){_5.$cctor();return _5.i_comision;};y.i_descendientes=function(){_5.$cctor();return _5.i_descendientes;};y.i_referidos=function(){_5.$cctor();return _5.i_referidos;};y.i_nivel=function(){_5.$cctor();return _5.i_nivel;};y.i_referido=function(){_5.$cctor();return _5.i_referido;};y.i_tipo=function(){_5.$cctor();return _5.i_tipo;};y.i_influyente=function(){_5.$cctor();return _5.i_influyente;};y.i_status=function(){_5.$cctor();return _5.i_status;};y.i_correo=function(){_5.$cctor();return _5.i_correo;};y.i_nombre=function(){_5.$cctor();return _5.i_nombre;};y.i_archivos=function(){_5.$cctor();return _5.i_archivos;};y.i_Id=function(){_5.$cctor();return _5.i_Id;};y.agregarCampo=function(ez,eA,eB){y.set_definicion(y.definicion().concat([[ez,eA,eB]]));return T.length(y.definicion())-1;};y.nombreReferidor=function(ez){var eA,eB,eC;eA=(eB=ez==null?null:(eC=ez.$0,bb.tryFind(function(eD){return J.Equals(eD.id,eC);},m.modeloV().Get().aliados)),eB==null?null:{$:1,$0:O.nombre(eB.$0.datosPersonales)});return eA==null?"-":eA.$0;};y.referidos=function(ez){return ez.nReferidos===0?"-":(((er.Curried3(function(eA,eB,eC){return eA(a.String(eB)+"/"+a.String(eC));}))(a.id))(ez.nRefActivos))(ez.nReferidos);};y.descendientes=function(ez){return ez.nDescendientes===0?"-":(((er.Curried3(function(eA,eB,eC){return eA(a.String(eB)+"/"+a.String(eC));}))(a.id))(ez.nDescActivos))(ez.nDescendientes);};y.comision=function(ez){return ez===0?"-":m.money(ez);};y.set_definicion=function(ez){_5.$cctor();_5.definicion=ez;};z.comisiones=function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK;function eL(eP,eQ){return eQ===""?eP:eQ;}function eM(){var eP;cQ.Start((eP=null,cQ.Delay(function(){return cQ.Bind(p.GetAsync(ez),function(eQ){a.saveAs(new bM([bi.concat("\r\n",bb.map(function(eR){var eS,eT;eS=eR[0];eT=eR[1];return(((((((er.Curried(function(eU,eV,eW,eX,eY,eZ,e0){return eU(bC.toSafe(eV)+","+bC.toSafe(eW)+","+bC.toSafe(eX)+","+bC.toSafe(eY)+","+bC.prettyPrint(eZ)+","+bC.prettyPrint(e0));},7))(a.id))("22"))(eL("----------",eT.numero.get_Id())))(eL("----------",eT.routing.get_Id())))((function(eU){return function(eV){return eU(a.String(eV)+".00");};}(a.id))(eS.comision)))("----------"))(eT.titular===""?O.nombre2(eS.datosPersonales):eT.titular);},eQ))],{type:"text/plain;charset=utf-8"}),"pagos.csv");return cQ.Zero();});})),null);}function eN(eP,eQ){return eP.id;}function eO(eP,eQ){var eR,eS,eT,eU,eV;eR=p.Map(function(eW){return eW[0];},eQ);eS=p.Map(function(eW){return eW[1];},eQ);return(eT=U.Make().WithHole({$:1,$0:"codigo",$1:"22"}).WithHole({$:2,$0:"cuenta",$1:p.Map(function(eW){return eL("----------",eW.numero.get_Id());},eS)}).WithHole({$:2,$0:"aba",$1:p.Map(function(eW){return eL("----------",eW.routing.get_Id());},eS)}).WithHole({$:2,$0:"monto",$1:p.Map(function(eW){return(function(eX){return function(eY){return eX(a.String(eY)+".00");};}(a.id))(eW.comision);},eR)}).WithHole({$:1,$0:"identificacion",$1:"---------"}).WithHole({$:2,$0:"nombre",$1:p.Map2(function(eW,eX){return eL(O.nombre2(eW.datosPersonales),eX.titular);},eR,eS)}),(eU=V.CompleteHoles(eT.k,eT.h,[]),(eV=new S.New(eU[1],W.filapago(eU[0])),(eT.i=eV,eV)))).get_Doc();}ez=p.MapAsync(function(eP){var eQ,eR,eS;function eT(eU){return cQ.Return(eU);}return cQ.Bind((eQ=bo.asyncResult(),eQ.Run(eQ.Delay(function(){var eU;eU=bb.filter(function(eV){return eV.comision>0;},eP);return eQ.Bind$1(_0.obtenerFormasDePagoPara(T.ofSeq(bb.map(function(eV){return eV.id;},eU))),function(eV){function eW(eY,eZ){return J.Equals(eY.id,eZ[0])?{$:1,$0:[eY,eZ[1]]}:null;}function eX(eY,eZ){var e0,e1;return[eY,(e0=bb.tryPick(function(e2){var e3;e3=e2.cuentaPago;return e3.$==0?{$:1,$0:e3.$0}:null;},eZ),(e1=M.ctaVacio(),e0==null?e1:e0.$0))];}return eQ.Return(bb.choose(function(eY){return eW(eY[0],eY[1]);},bb.zip(eU,bb.map(function(eY){return eX(eY[0],eY[1]);},eV))));});}))),(eR=(eS=[],function(eU){return bE.defaultValue(eS,eU);}),function(eU){return eT(eR(eU));}));},p.Map(function(eP){return eP.aliados;},m.modeloV().get_View()));return(eA=(eB=by.ofArray([(eC=U.Make().WithHole({$:2,$0:"codigo",$1:p.Map(function(eP){return(function(eQ){return function(eR){return eQ(a.String(eR));};}(a.id))(bb.length(eP));},ez)}).WithHole({$:1,$0:"cuenta",$1:""}).WithHole({$:1,$0:"aba",$1:""}).WithHole({$:2,$0:"monto",$1:p.Map(function(eP){function eQ(eR,eS){return eR.comision;}return(function(eR){return function(eS){return eR(a.String(eS)+".00");};}(a.id))(bb.sumBy(function(eR){return eQ(eR[0],eR[1]);},eP));},ez)}).WithHole({$:1,$0:"identificacion",$1:""}).WithHole({$:1,$0:"nombre",$1:""}),(eD=V.CompleteHoles(eC.k,eC.h,[]),(eE=new S.New(eD[1],W.filapago(eD[0])),(eC.i=eE,eE)))).get_Doc(),(eF=U.Make().WithHole({$:1,$0:"codigo",$1:""}).WithHole({$:1,$0:"cuenta",$1:""}).WithHole({$:1,$0:"aba",$1:""}).WithHole({$:1,$0:"monto",$1:"--------------------"}).WithHole({$:1,$0:"identificacion",$1:""}).WithHole({$:1,$0:"nombre",$1:""}),(eG=V.CompleteHoles(eF.k,eF.h,[]),(eH=new S.New(eG[1],W.filapago(eG[0])),(eF.i=eH,eH)))).get_Doc(),Z.ConvertSeqBy(function(eP){return eN(eP[0],eP[1]);},function(eP){return function(eQ){return eO(eP,eQ);};},ez)]),(eI=U.Make(),eI.WithHole(V.EventQ2(eI.k,"exportar",function(){return eI.i;},function(){eM();}))).WithHole({$:0,$0:"tbody",$1:Z.Concat(eB)})),(eJ=V.CompleteHoles(eA.k,eA.h,[]),(eK=new S.New(eJ[1],W.tablapagos(eJ[0])),(eA.i=eK,eK)))).get_Doc();};A.listaDocs=function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH;function eI(){var eL;_0.iterA((eL=bo.asyncResult(),eL.Run(eL.Delay(function(){eA.Set([]);ez.Set([]);return bG["AsyncResultBuilder.Bind"](eL,p.GetAsync(A.aliadoIdW()),function(eM){return eL.Bind$1(_0.obtenerListaDocs(eM),function(eN){eA.Set(eN);ez.Set(eN);return eL.Zero();});});}))));}function eJ(eL){return function(eM,eN){var eO;return _0.iterA((eO=bo.asyncResult(),eO.Run(eO.Delay(function(){eI();return eO.Bind$1(_0.ejecutarDataEventoNuevo({$:9,$0:[new _1({$:0,$0:eL}),T.ofSeq(ez["var"].Get())]}),function(){bq.refrescarData(true);a.alert(eN);return eO.Zero();});}))));};}function eK(eL,eM){var eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW;eL.preventDefault();eR=a.jQuery("#SubirDocumentos");eS=new a.FormData();eT=eR.serializeArray();for(eU=0,eV=eT.length-1;eU<=eV;eU++){eW=T.get(eT,eU);eS.append(eW.name,eW.value);}eO=eR.children("input[type=file]").first().get(0).files.item(0);eP=eO.name;eS.append("file",eO);et.ajax((eQ={},eQ.type="POST",eQ.url="/api/subir/"+eM+"/"+eP,eQ.data=eS,eQ.contentType=false,eQ.processData=false,eQ.success=eJ(eM),eQ));}ez=_6.Create(function(eL){return eL.nombre;},[]);eA=_6.Create(function(eL){return eL.nombre;},[]);p.Sink(function(eL){if(!J.Equals(eL,new _1({$:0,$0:""})))eI();},A.aliadoIdW());return(eB=(eC=(eD=Z.EmbedView(p.Map(bt.crearOptions,bt.tiposAr().get_View())),(eE=(eF=bH.docLensMapView(a.id,function(eL,eM){var eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3;eN=p.Map(function(e4){return J.Equals(e4.idAliado,n.get_LoggedId());},eM.get_View());eO=(eP=(eQ=p.Map(function(e4){return e4.get_Id();},A.aliadoIdW()),U.Make().WithHole({$:2,$0:"idaliado",$1:eQ})).WithHole({$:2,$0:"archivo",$1:p.Map(function(e4){return e4.nombre;},eM.get_View())}).WithHole({$:2,$0:"nombre",$1:p.Map(function(e4){return e4.nombre;},eM.get_View())}),(eR=V.CompleteHoles(eP.k,eP.h,[]),(eS=new S.New(eR[1],W.enlacedocumento(eR[0])),(eP.i=eS,eS)))).get_Doc();return(eT=(eU=cU.DynamicPred("disabled",eN,p.Const("")),(eV=Z.EmbedView(p.Map(bt.crearOptions,bt.statusAr().get_View())),(eW=new cP.New(p.Map(function(e4){return a.String(e4.status);},eM.get_View()),(eX=(eY=i.Lens(eM,function(e4){return e4.status;},function(e4,e5){return bF.New(e4.idAliado,e4.tipo,e4.nombre,e4.modificado,e4.tamano,e5,e4.comentario);}),function(e4){eY.Set(e4);}),function(e4){return eX(bL.Parse(e4));})),(eZ=new cP.New(p.Map(function(e4){return a.String(e4.tipo);},eM.get_View()),(e0=(e1=i.Lens(eM,function(e4){return e4.tipo;},function(e4,e5){return bF.New(e4.idAliado,e5,e4.nombre,e4.modificado,e4.tamano,e4.status,e4.comentario);}),function(e4){e1.Set(e4);}),function(e4){return e0(bK.Parse(e4));})),U.Make().WithHole({$:0,$0:"enlace",$1:eO}).WithHole({$:8,$0:"tipo",$1:eZ})).WithHole({$:8,$0:"status",$1:eW})).WithHole({$:2,$0:"tamano",$1:p.Map(function(e4){return bJ.thousands(e4.tamano);},eM.get_View())}).WithHole({$:2,$0:"modificado",$1:p.Map(function(e4){return bI.toYYYYMMDDHHMM("-",e4.modificado);},eM.get_View())}).WithHole({$:0,$0:"statuses",$1:eV})).WithHole({$:3,$0:"disabled",$1:eU})),(e2=V.CompleteHoles(eT.k,eT.h,[["tipo",0],["status",0]]),(e3=new S.New(e2[1],W.filadocs(e2[0])),(eT.i=e3,e3)))).get_Doc();},ez),U.Make().WithHole({$:0,$0:"tbody",$1:eF})),eE.WithHole(V.EventQ2(eE.k,"subir",function(){return eE.i;},function(eL){var eM;p.Get((eM=eL.Event,function(eN){return eK(eM,eN);}),p.Map(function(eN){return eN.get_Id();},A.aliadoIdW()));}))).WithHole({$:0,$0:"tiposarchivo",$1:eD})).WithHole({$:2,$0:"changed",$1:p.Map2(function(eL,eM){return J.Equals(eL,eM)?"":"mui-btn--primary";},eA.v,ez.v)}),eC.WithHole(V.EventQ2(eC.k,"salvar",function(){return eC.i;},function(){var eL;_0.iterA((eL=bo.asyncResult(),eL.Run(eL.Delay(function(){var eM;eM=T.ofSeq(bb.filter(function(eN){return!J.Equals(bb.tryFind(function(eO){return eO.nombre===eN.nombre;},eA["var"].Get()),{$:1,$0:eN});},ez["var"].Get()));return!bb.isEmpty(eM)?bG["AsyncResultBuilder.Bind"](eL,p.GetAsync(A.aliadoIdW()),function(eN){return eL.Bind$1(_0.ejecutarDataEventoNuevo({$:9,$0:[eN,eM]}),function(eO){eI();bq.refrescarData(true);a.alert((function(eP){return function(eQ){return eP(X.p$15(eQ));};}(a.id))(eO));return eL.Zero();});}):eL.Zero();}))));}))),(eG=V.CompleteHoles(eB.k,eB.h,[]),(eH=new S.New(eG[1],W.subirdocumentos(eG[0])),(eB.i=eH,eH)))).get_Doc();};A.expandedOV=function(){_5.$cctor();return _5.expandedOV;};A.aliadoIdW=function(){_5.$cctor();return _5.aliadoIdW;};B.formaAutorizacion=function(){var ez,eA,eB,eC,eD,eE,eF,eG;ez=(eA=(eB=Z.EmbedView(B.cuentaAutorizar().get_View()),U.Make().WithHole({$:2,$0:"titular",$1:B.titular().get_View()}).WithHole({$:2,$0:"montoafiliacion",$1:p.Map(function(eH){return(function(eI){return function(eJ){return eI("$"+a.String(eJ)+".00");};}(a.id))(eH.premisas.montoAfiliacion);},m.modeloV().get_View())}).WithHole({$:2,$0:"dia",$1:p.Map(function(eH){return a.String(O.dia(eH.diaPago));},m.aliadoW())}).WithHole({$:0,$0:"cuentadebitar",$1:eB})),(eC=V.CompleteHoles(eA.k,eA.h,[]),(eD=new S.New(eC[1],W.autorizacionpago(eC[0])),(eA.i=eD,eD)))).get_Doc();eE=(eF=(eG=B.cuentaPagoO().Get(),eG==null?null:{$:1,$0:eG.$0.get_AutorizacionPre()}),eF==null?"Autorizacion -- ------":eF.$0);return bO.formaFirma(B.titular().get_View(),ez,bK.Autorizacion,B.actualizarSubscripcion,eE);};B.cuentaPagoO=function(){_5.$cctor();return _5.cuentaPagoO;};B.actualizarSubscripcion=function(){var ez;ez=_0.actualizarSubscripcion(B.pid());return cI.map(function(eA){return function(eB){return eA("Subscripción #"+bC.toSafe(eB)+" creada.");};}(a.id),ez);};B.titular=function(){_5.$cctor();return _5.titular;};B.cuentaAutorizar=function(){_5.$cctor();return _5.cuentaAutorizar;};B.set_pid=function(ez){_5.$cctor();_5.pid=ez;};B.pid=function(){_5.$cctor();return _5.pid;};C.formaContrato=function(){var ez,eA,eB,eC;ez=p.Map(function(eD){return O.nombre2(eD.datosPersonales);},m.aliadoW());return bO.formaFirma(ez,(eA=U.Make().WithHole({$:2,$0:"aliado",$1:ez}),(eB=V.CompleteHoles(eA.k,eA.h,[]),(eC=new S.New(eB[1],W.contrato(eB[0])),(eA.i=eC,eC)))).get_Doc(),bK.Contrato,C.firmarContrato,"Contrato");};C.firmarContrato=function(){return cI.rtn("Contrato firmado!");};D.transacciones=function(){return m.selAliadoIdDoc(D.docTransacciones);};D.docTransacciones=function(ez){var eA,eB,eC,eD;function eE(eG,eH){var eI,eJ,eK;return(eI=U.Make().WithHole({$:2,$0:"fecha",$1:p.Map(function(eL){return bI.toYYYYMMDDHHMM("-",eL.fechaPago);},eH)}).WithHole({$:2,$0:"transid",$1:p.Map(function(eL){return eL.transaccion;},eH)}).WithHole({$:2,$0:"cuenta",$1:p.Map(function(eL){return a.String(eL.concepto);},eH)}).WithHole({$:2,$0:"status",$1:p.Map(function(eL){return eL.statusTran;},eH)}).WithHole({$:2,$0:"monto",$1:p.Map(function(eL){return(function(eM){return function(eN){return eM(eN.toFixed(2));};}(a.id))(eL.monto/100);},eH)}),(eJ=V.CompleteHoles(eI.k,eI.h,[]),(eK=new S.New(eJ[1],W.transaccion(eJ[0])),(eI.i=eK,eK)))).get_Doc();}function eF(eG,eH){return bb.sortBy(function(eI){return eI.fechaPago;},bb.filter(function(eI){return J.Equals(eI.idAliado,eH.id);},eG));}return(eA=(eB=Z.ConvertSeqBy(function(eG){return eG.transaccion;},function(eG){return function(eH){return eE(eG,eH);};},(((er.Curried3(p.Map2))(eF))(D.transaccionesW()))(ez)),U.Make().WithHole({$:0,$0:"tbody",$1:eB})),(eC=V.CompleteHoles(eA.k,eA.h,[]),(eD=new S.New(eC[1],W.transacciones(eC[0])),(eA.i=eD,eD)))).get_Doc();};D.transaccionesW=function(){_5.$cctor();return _5.transaccionesW;};E.pendientes=function(ez){return Z.BindView(a.id,p.MapAsync(function(eA){var eB;eB=null;return cQ.Delay(function(){return cQ.Bind(E.chequearStatusAliado(eA,_0.obtenerListaDocs(eA.id),_0.obtenerFormasDePagoId(eA.id)),function(eC){var eD,eE,eF,eG,eH;return eC.$==0&&bb.isEmpty(eC.$0)?cQ.Return(Z.get_Empty()):eC.$==1?cQ.Return(Z.TextNode(eC.$0)):cQ.Return((eE=(eF=Z.Concat(bb.map(E.pendiente,eC.$0)),U.Make().WithHole({$:0,$0:"pasos",$1:eF})),(eG=V.CompleteHoles(eE.k,eE.h,[]),(eH=new S.New(eG[1],W.pendientes(eG[0])),(eE.i=eH,eH)))).get_Doc());});});},ez));};E.chequearStatusAliado=function(ez,eA,eB){var eC;eC=bo.asyncResult();return eC.Run(eC.Delay(function(){return ez.status.$==0?eC.Bind$1(eA,function(eD){return eC.Bind$1(eB,function(eE){var eF;eF=bb.filter(function(eG){return eG.authorizeIdR.$==0;},eE);return eC.Return(by.ofSeq(bb.delay(function(){var eG;return bb.append(E.chequearArchivos((eG=bK.Contrato,function(eH){return E.esArchivoTipo(eG,eH);}),E.firmarContrato,eD),bb.delay(function(){return bb.append(E.chequearCuentas(function(){return true;},E.agregarCuenta,eE),bb.delay(function(){return bb.append(bb.length(eF)>0?E.chequearArchivos(function(eH){return E.esAutorizacion(eF,eH);},E.firmarAutorizacion,eD):[],bb.delay(function(){var eH;return bb.append(E.chequearArchivos((eH=bK.FormaW9,function(eI){return E.esArchivoTipo(eH,eI);}),function(){return E.subirArchivoTipo(bK.FormaW9);},eD),bb.delay(function(){var eI;return bb.append(E.chequearArchivos((eI=bK.FormaW8BEN,function(eJ){return E.esArchivoTipo(eI,eJ);}),function(){return E.subirArchivoTipo(bK.FormaW8BEN);},eD),bb.delay(function(){return E.chequearArchivos(E.esIdentificacion,E.subirIdentificacion,eD);}));}));}));}));}));})));});}):eC.Return(cH.Empty);}));};E.pendiente=function(ez){return Z.Element("li",[],ez);};E.chequearArchivos=function(ez,eA,eB){var eC,eD,eE;eC=E.filtroArchivo(ez,eB);return!J.Equals(eC,null)&&eC.length===0?[eA()]:(eD=bb.tryFind(function(eF){return eF.status.$===1;},eC),eD==null?(eE=bb.map(E.verificarArchivo,eC),bb.exists(function(eF){return eF.status.$!==2;},eC)?eE:bb.append(eE,[eA()])):[E.verificarArchivo(eD.$0)]);};E.firmarContrato=function(){return by.ofArray([Z.Element("i",[cR.Create("class","far fa-square")],[]),Z.TextNode(" Firmar "),E.enlace(dr.FormaContrato(),"Contrato")]);};E.esArchivoTipo=function(ez,eA){return J.Equals(eA.tipo,ez);};E.chequearCuentas=function(ez,eA,eB){var eC;eC=E.filtroCuenta(ez,eB);return!J.Equals(eC,null)&&eC.length===0?[eA()]:bb.map(E.verificarCuenta,eC);};E.agregarCuenta=function(){return by.ofArray([Z.Element("i",[cR.Create("class","far fa-square")],[]),Z.TextNode(" Agregar Forma de pago: "),E.enlace(dr.FormasPago(),"Tarjeta de Credito o Cuenta Bancaria")]);};E.firmarAutorizacion=function(){return by.ofArray([Z.Element("i",[cR.Create("class","far fa-square")],[]),Z.TextNode(" Firmar "),E.enlace(dr.FormasPago(),"Autorizacion (Haga click en: AUTORIZAR DEBITO)")]);};E.esAutorizacion=function(ez,eA){return eA.tipo.$===1&&bb.exists(function(eB){return eA.nombre.indexOf(eB.cuentaPago.get_MaskedCuenta())!=-1;},ez);};E.subirArchivoTipo=function(ez){var eA;eA=E.tarchivo2String(ez);return by.ofArray([Z.Element("i",[cR.Create("class","far fa-square")],[]),E.enlace(dr.Subir()," Subir "+eA[0][0]+"."),E.enlace(eA[1],"(Descargar aqui)")]);};E.esIdentificacion=function(ez){var eA;eA=ez.tipo;return eA.$==2||(eA.$==3||eA.$==4);};E.subirIdentificacion=function(){return by.ofArray([Z.Element("i",[cR.Create("class","far fa-square")],[]),E.enlace(dr.Subir()," Subir "),Z.TextNode("documento de identidad: "),E.enlace(dr.Subir(),"Cedula, Pasaporte, Licencia de Conducir")]);};E.filtroArchivo=function(ez,eA){return T.ofSeq(bb.filter(ez,bb.filter(function(eB){return eB.status.$!==3&&eB.status.$!==4;},eA)));};E.verificarArchivo=function(ez){var eA;eA=ez.status;return eA.$==1?by.ofArray([Z.Element("i",[cR.Create("class","fas fa-check-double")],[]),Z.TextNode(" "),E.enlaceArchivo(ez),Z.TextNode((function(eB){return function(eC){return eB(" Verificad"+bC.toSafe(eC));};}(a.id))(E.sufijo(ez)))]):eA.$==2?by.ofArray([Z.Element("i",[cR.Create("class","fas fa-times-circle")],[]),Z.TextNode(" "),E.enlaceArchivo(ez),Z.TextNode((function(eB){return function(eC){return eB(" Rechazad"+bC.toSafe(eC));};}(a.id))(E.sufijo(ez)))]):E.pendienteArchivo(ez);};E.enlace=function(ez,eA){return Z.Element("a",[cR.Create("href",ez)],[Z.TextNode(eA)]);};E.filtroCuenta=function(ez,eA){return T.ofSeq(bb.filter(ez,eA));};E.verificarCuenta=function(ez){var eA,eB,eC,eD;eA=(eB=(eC=ez.subscripcion,eC==null?null:{$:1,$0:"Subscripción: "+eC.$0.get_Short()}),eB==null?"":eB.$0);eD=ez.authorizeIdR;return eD.$==1?by.ofArray([Z.Element("i",[cR.Create("class","far fa-square")],[]),Z.TextNode(((((er.Curried(function(eE,eF,eG,eH){return eE(" "+bC.toSafe(eF)+" "+bC.toSafe(eG)+" NO REGISTRADA en Authorize ("+bC.toSafe(eH)+")");},4))(a.id))(ez.cuentaPago.get_TipoLargo()))(ez.cuentaPago.get_MaskedCuenta()))(eD.$0))]):by.ofArray([Z.Element("i",[cR.Create("class","far fa-check-square")],[]),Z.TextNode((((((er.Curried(function(eE,eF,eG,eH,eI){return eE(" "+bC.toSafe(eF)+" "+bC.toSafe(eG)+" Registrada. ("+bC.toSafe(eH)+") "+bC.toSafe(eI));},5))(a.id))(ez.cuentaPago.get_TipoLargo()))(ez.cuentaPago.get_MaskedCuenta()))(eD.$0.get_Id()))(eA))]);};E.tarchivo2String=function(ez){return ez.$==6?[["Formulario W-8BEN","o"],dr.FormaW8BEN()]:ez.$==1?[["Autorización de pago","a"],dr.FormasPago()]:ez.$==0?[["Contrato","o"],dr.FormaContrato()]:ez.$==3?[["Cedula","a"],dr.Subir()]:ez.$==4?[["Licencia de Conducir","a"],dr.Subir()]:ez.$==2?[["Pasaporte","o"],dr.Subir()]:ez.$==7?[[ez.$0,"o(a)"],dr.Subir()]:[["Formulario W-9","o"],dr.FormaW9()];};E.enlaceArchivo=function(ez){var eA,eB,eC,eD,eE;return(eA=(eB=(E.tarchivo2String(ez.tipo))[0][0],(eC=ez.idAliado.get_Id(),U.Make().WithHole({$:1,$0:"idaliado",$1:eC})).WithHole({$:1,$0:"archivo",$1:ez.nombre}).WithHole({$:1,$0:"title",$1:ez.nombre}).WithHole({$:1,$0:"nombre",$1:eB})),(eD=V.CompleteHoles(eA.k,eA.h,[]),(eE=new S.New(eD[1],W.enlacedocumento(eD[0])),(eA.i=eE,eE)))).get_Doc();};E.sufijo=function(ez){return(E.tarchivo2String(ez.tipo))[0][1];};E.pendienteArchivo=function(ez){return by.ofArray([Z.Element("i",[cR.Create("class","far fa-check-square")],[]),Z.TextNode(" "),E.enlaceArchivo(ez),Z.TextNode((function(eA){return function(eB){return eA(" subid"+bC.toSafe(eB)+". ");};}(a.id))(E.sufijo(ez))),Z.Element("i",[cR.Create("class","far fa-square")],[]),Z.TextNode(" Pendiente de Verificacion")]);};I.GetFields=function(ez){var eA,eB;eA=[];for(var eC in ez)eA.push([eC,ez[eC]]);return eA;};I.GetFieldValues=function(ez){var eA,eB;eA=[];for(var eC in ez)eA.push(ez[eC]);return eA;};J.Equals=function(ez,eA){var eB,eC,eD,eE;if(ez===eA)return true;else{eB=typeof ez;if(eB=="object"){if(ez===null||ez===void 0||eA===null||eA===void 0)return false;else if("Equals"in ez)return ez.Equals(eA);else if(ez instanceof a.Array&&eA instanceof a.Array)return J.arrayEquals(ez,eA);else if(ez instanceof a.Date&&eA instanceof a.Date)return J.dateEquals(ez,eA);else{eC=[true];for(var eF in ez)if(function(eG){eC[0]=!ez.hasOwnProperty(eG)||eA.hasOwnProperty(eG)&&J.Equals(ez[eG],eA[eG]);return!eC[0];}(eF))break;if(eC[0]){for(var eG in eA)if(function(eH){eC[0]=!eA.hasOwnProperty(eH)||ez.hasOwnProperty(eH);return!eC[0];}(eG))break;}return eC[0];}}else return eB=="function"&&("$Func"in ez?ez.$Func===eA.$Func&&ez.$Target===eA.$Target:"$Invokes"in ez&&"$Invokes"in eA&&J.arrayEquals(ez.$Invokes,eA.$Invokes));}};J.arrayEquals=function(ez,eA){var eB,eC;if(T.length(ez)===T.length(eA)){eB=true;eC=0;while(eB&&eC<T.length(ez)){!J.Equals(T.get(ez,eC),T.get(eA,eC))?eB=false:void 0;eC=eC+1;}return eB;}else return false;};J.dateEquals=function(ez,eA){return ez.getTime()===eA.getTime();};J.Compare=function(ez,eA){var eB,eC,eD,eE,eF,eG;if(ez===eA)return 0;else{eC=typeof ez;switch(eC=="function"?1:eC=="boolean"?2:eC=="number"?2:eC=="string"?2:eC=="object"?3:0){case 0:return typeof eA=="undefined"?0:-1;case 1:return o.FailWith("Cannot compare function values.");case 2:return ez<eA?-1:1;case 3:if(ez===null)eD=-1;else if(eA===null)eD=1;else if("CompareTo"in ez)eD=ez.CompareTo(eA);else if("CompareTo0"in ez)eD=ez.CompareTo0(eA);else if(ez instanceof a.Array&&eA instanceof a.Array)eD=J.compareArrays(ez,eA);else if(ez instanceof a.Date&&eA instanceof a.Date)eD=J.compareDates(ez,eA);else{eE=[0];for(var eH in ez)if(function(eI){return!ez.hasOwnProperty(eI)?false:!eA.hasOwnProperty(eI)?(eE[0]=1,true):(eE[0]=J.Compare(ez[eI],eA[eI]),eE[0]!==0);}(eH))break;if(eE[0]===0){for(var eI in eA)if(function(eJ){return!eA.hasOwnProperty(eJ)?false:!ez.hasOwnProperty(eJ)&&(eE[0]=-1,true);}(eI))break;}eD=eE[0];}return eD;}}};J.compareArrays=function(ez,eA){var eB,eC;if(T.length(ez)<T.length(eA))return -1;else if(T.length(ez)>T.length(eA))return 1;else{eB=0;eC=0;while(eB===0&&eC<T.length(ez)){eB=J.Compare(T.get(ez,eC),T.get(eA,eC));eC=eC+1;}return eB;}};J.compareDates=function(ez,eA){return J.Compare(ez.getTime(),eA.getTime());};J.Hash=function(ez){var eA;eA=typeof ez;return eA=="function"?0:eA=="boolean"?ez?1:0:eA=="number"?ez:eA=="string"?J.hashString(ez):eA=="object"?ez==null?0:ez instanceof a.Array?J.hashArray(ez):J.hashObject(ez):0;};J.hashString=function(ez){var eA,eB,eC;if(ez===null)return 0;else{eA=5381;for(eB=0,eC=ez.length-1;eB<=eC;eB++)eA=J.hashMix(eA,ez[eB].charCodeAt());return eA;}};J.hashArray=function(ez){var eA,eB,eC;eA=-34948909;for(eB=0,eC=T.length(ez)-1;eB<=eC;eB++)eA=J.hashMix(eA,J.Hash(T.get(ez,eB)));return eA;};J.hashObject=function(ez){var eA,eB;if("GetHashCode"in ez)return ez.GetHashCode();else{eA=[0];for(var eC in ez)if(function(eD){eA[0]=J.hashMix(J.hashMix(eA[0],J.hashString(eD)),J.Hash(ez[eD]));return false;}(eC))break;return eA[0];}};J.hashMix=function(ez,eA){return(ez<<5)+ez+eA;};K.newLyt=function(ez,eA){return bT.New(ez,i.Create$1(eA));};K.addLayout=function(ez){p.Sink(function(eA){var eB;eB=K.createEntries(ez.lytName,eA);k.addPlugIn(l.New(ez.lytName,T.ofSeq(bb.delay(function(){return bb.append([k.newVar("Layout",ez.lytDefinition)],bb.delay(function(){return K.getVarEntries(eB);}));})),[],T.ofSeq(bb.delay(function(){return bb.append(K.getDocEntries(eB),bb.delay(function(){var eC;return bb.append([k.newDocF("InputFile",{$:4,$0:(eC=ez.lytName,er.Curried(K.inputFile,4,[eC])),$1:"attrs",$2:"Label",$3:"Action",$4:"[Doc]"})],bb.delay(function(){var eD;return bb.append([k.newDocF("InputLabel",{$:3,$0:(eD=ez.lytName,er.Curried(K.inputLabel,3,[eD])),$1:"attrs",$2:"Label",$3:"Var"})],bb.delay(function(){var eE;return bb.append([k.newDocF("HtmlDoc",{$:1,$0:(eE=ez.lytName,function(eF){return K.htmlDoc(eE,eF);}),$1:"html"})],bb.delay(function(){return[k.newDocF("none",{$:1,$0:K.none,$1:"x"})];}));}));}));}));})),[],[]));k.mainDocV().Set(k.mainDocV().Get());},ez.lytDefinition.get_View());};K.createEntries=function(ez,eA){return K.processLines(function(eB){return K.createEntryO(ez,eB);},bJ.splitByChar("\n",eA));};K.getVarEntries=function(ez){function eA(eB){return eB[1];}return bb.map(function(eB){return bb.last(eA(eB));},bb.groupBy(function(eB){return eB.varName;},bb.choose(function(eB){return eB.$==0?{$:1,$0:eB.$0}:null;},ez)));};K.getDocEntries=function(ez){function eA(eB){return eB[1];}return bb.map(function(eB){return bb.last(eA(eB));},bb.groupBy(function(eB){return eB.docName;},bb.choose(function(eB){return eB.$==2?{$:1,$0:eB.$0}:null;},ez)));};K.inputFile=function(ez,eA,eB,eC,eD){var eE,eF,eG,eH;eE=(eF=(eG=((K.splitName())(ez))(eC),k.tryGetAct(eG[0],eG[1])),eF==null?null:{$:1,$0:(eH=eF.$0,Z.Element("div",K.getAttrs(ez,eA,true),[Z.Element("div",[cR.Create("class","input-group")],[Z.Element("span",[cR.Create("class","input-group-btn")],[Z.Element("label",[cR.Create("class","btn")],[K.getText(ez,eB,true),Z.Element("input",[cR.Create("class","form-control"),cR.Create("type","file"),cU.Style("display","none"),cR.HandlerImpl("click",function(eI){return function(){eI.value="";};}),cR.HandlerImpl("change",function(eI){return function(){return k.callFunction(eI,null,eH.actFunction);};})],[])])]),eD!==""?K.singleDoc(ez,by.ofArray([[eD,false]])):Z.get_Empty()])]))});return eE==null?K.errDoc((function(eI){return function(eJ){return eI("Action not found "+bC.toSafe(eJ));};}(a.id))(eC)):eE.$0;};K.inputLabel=function(ez,eA,eB,eC){var eD,eE,eF;eD=(eE=(eF=((K.splitName())(ez))(eC),k.tryGetVar(eF[0],eF[1])),eE==null?null:{$:1,$0:Z.Element("div",K.getAttrs(ez,eA,true),[Z.Element("div",[cR.Create("class","input-group")],[Z.Element("span",[cR.Create("class","input-group-addon")],[K.getText(ez,eB,true)]),Z.Input([cR.Create("class","form-control")],eE.$0.varVar)])])});return eD==null?K.errDoc((function(eG){return function(eH){return eG("Var not found "+bC.toSafe(eH));};}(a.id))(eC)):eD.$0;};K.htmlDoc=function(ez,eA){var eB;eB=K.getTextData(ez,eA);return eB.$==1?Z.BindView(Z.Verbatim,eB.$0):eB.$==2?K.errDoc((function(eC){return function(eD){return eC("HtmlDoc: unexpected action "+cV.p$1(eD));};}(a.id))(eB.$0)):Z.Verbatim(eB.$0);};K.none=function(ez){return Z.Element("span",[],[]);};K.turnToView=function(ez){return Z.EmbedView(p.Map(ez,k.mainDocV().get_View()));};K.splitName=function(){bU.$cctor();return bU.splitName;};K.getDocFinal=function(ez,eA){var eB;eB=K.getDocF(ez,eA);return eB[1].$==0?eB[0]:K.errDoc((((er.Curried3(function(eC,eD,eE){return eC("Too many parameters "+cV.p(eD)+" "+bC.printList(function(eF){return"("+bC.prettyPrint(eF[0])+", "+bC.prettyPrint(eF[1])+")";},eE));}))(a.id))(eA))(ez));};K.errDoc=function(ez){return Z.Element("div",[],[Z.TextNode(ez)]);};K.processLines=function(ez,eA){function eB(eC){var eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ;eD=bb.tryHead(eC);return eD!=null&&eD.$==1?(eE=eD.$0,(eF=K.splitTokens(eE),eF.$==1&&(eH=(eI=eF.$0,K.Identifier(eI[0],eI[1])),eH!=null&&eH.$==1&&(eF.$1.$==1&&((eJ=eF.$1.$0,K.Vertical(eJ[0],eJ[1])).$==2&&(eF.$1.$1.$==0&&(eG=eH.$0,true)))))?(eK=K.getExtraLines(function(eR){return bi.StartsWith(bi.Trim(eR),"|");},eC),eB((ds.createLayoutDefinitions(eG,ds.extractNodes(eK[0])))[1].concat(eK[1]))):eF.$==0?eB(ca.array(eC,{$:1,$0:1},null)):(eL=K.getExtraLines(function(eR){return bi.StartsWith(bi.Trim(eR),":");},eC),(eM=eL[1],(eN=eL[0],T.length(eN)>0?((function(eR){return function(eS){return eR("l = ;"+bC.toSafe(eS)+";");};}(function(eR){eu.log(eR);}))(eE),eO=K.createLines(bb.nth(0,bi.SplitChars(eE,[" "],1)),1,[],[],1,eN),eP=eO[0],eQ=eO[1],eB(T.ofSeq(bb.delay(function(){return bb.append([eE+" "+bi.concat(" ",eP)],bb.delay(function(){return bb.append(eQ,bb.delay(function(){return eM;}));}));})))):T.ofSeq(bb.delay(function(){var eR;return bb.append((eR=ez(eE),eR!=null&&eR.$==1?[eR.$0]:[]),bb.delay(function(){return eB(eM);}));}))))))):[];}return eB(eA);};K.createEntryO=function(ez,eA){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC;try{eB=K.splitTokens(eA);return eB.$==1&&(eD=(eE=eB.$0,K.Identifier(eE[0],eE[1])),eD!=null&&eD.$==1&&(eB.$1.$==1&&((eF=eB.$1.$0,K.Vertical(eF[0],eF[1])).$==0&&(eB.$1.$1.$==1&&(eG=(eH=eB.$1.$1.$0,K.Measures$1(eH[0],eH[1])),eG!=null&&eG.$==1&&(eC=[eB.$1.$1.$1,eG.$0,eD.$0],true))))))?(eI=eC[2],K.entryDoc(eI,(K.createSplitterM())([ez,eI,true,eC[1],eC[0]]))):eB.$==1&&(eK=(eL=eB.$0,K.Identifier(eL[0],eL[1])),eK!=null&&eK.$==1&&(eB.$1.$==1&&((eM=eB.$1.$0,K.Vertical(eM[0],eM[1])).$==1&&(eB.$1.$1.$==1&&(eN=(eO=eB.$1.$1.$0,K.Measures$1(eO[0],eO[1])),eN!=null&&eN.$==1&&(eJ=[eB.$1.$1.$1,eN.$0,eK.$0],true))))))?(eP=eJ[2],K.entryDoc(eP,(K.createSplitterM())([ez,eP,false,eJ[1],eJ[0]]))):eB.$==1&&(eR=(eS=eB.$0,K.Identifier(eS[0],eS[1])),eR!=null&&eR.$==1&&(eB.$1.$==1&&((eT=eB.$1.$0,K.Var(eT[0],eT[1])).$==2&&(eB.$1.$1.$==1&&(eU=(eV=eB.$1.$1.$0,K.Identifier(eV[0],eV[1])),eU!=null&&eU.$==1&&(eB.$1.$1.$1.$==1&&(eB.$1.$1.$1.$1.$==1&&(eB.$1.$1.$1.$1.$1.$==0&&(eQ=[eU.$0,eB.$1.$1.$1.$0,eR.$0,eB.$1.$1.$1.$1.$0],true)))))))))?(eW=eQ[2],K.entryDoc(eW,(K.createButtonM())([ez,eW,eQ[0],eQ[1],eQ[3]]))):eB.$==1&&(eY=(eZ=eB.$0,K.Identifier(eZ[0],eZ[1])),eY!=null&&eY.$==1&&(eB.$1.$==1&&((e0=eB.$1.$0,K.Var(e0[0],e0[1])).$==3&&(eB.$1.$1.$==1&&(e1=(e2=eB.$1.$1.$0,K.Identifier(e2[0],e2[1])),e1!=null&&e1.$==1&&(eB.$1.$1.$1.$==1&&(eB.$1.$1.$1.$1.$==0&&(eX=[eB.$1.$1.$1.$0,eY.$0,e1.$0],true))))))))?(e3=eX[1],K.entryDoc(e3,(K.createInputM())([ez,e3,eX[2],eX[0]]))):eB.$==1&&(e5=(e6=eB.$0,K.Identifier(e6[0],e6[1])),e5!=null&&e5.$==1&&(eB.$1.$==1&&((e7=eB.$1.$0,K.Var(e7[0],e7[1])).$==4&&(eB.$1.$1.$==1&&(e8=(e9=eB.$1.$1.$0,K.Identifier(e9[0],e9[1])),e8!=null&&e8.$==1&&(eB.$1.$1.$1.$==1&&(eB.$1.$1.$1.$1.$==0&&(e4=[eB.$1.$1.$1.$0,e5.$0,e8.$0],true))))))))?(e_=e4[1],K.entryDoc(e_,(K.createTextAreaM())([ez,e_,e4[2],e4[0]]))):eB.$==1&&(fa=(fb=eB.$0,K.Identifier(fb[0],fb[1])),fa!=null&&fa.$==1&&(eB.$1.$==1&&((fc=eB.$1.$0,K.Var(fc[0],fc[1])).$==0&&(eB.$1.$1.$==1&&(eB.$1.$1.$1.$==0&&(e$=[fa.$0,eB.$1.$1.$0],true))))))?(fd=e$[0],K.entryVar(fd,(K.createVarM())([ez,fd,e$[1][0]]))):eB.$==1&&(ff=(fg=eB.$0,K.Identifier(fg[0],fg[1])),ff!=null&&ff.$==1&&(eB.$1.$==1&&((fh=eB.$1.$0,K.Var(fh[0],fh[1])).$==1&&(eB.$1.$1.$==1&&(fe=[eB.$1.$1.$0,ff.$0,eB.$1.$1.$1],true)))))?(fi=fe[1],K.entryDoc(fi,(K.createDocM())([ez,fi,fe[0][0],fe[2]]))):eB.$==1&&(fk=(fl=eB.$0,K.Identifier(fl[0],fl[1])),fk!=null&&fk.$==1&&(eB.$1.$==1&&((fm=eB.$1.$0,K.Vertical(fm[0],fm[1])).$==4&&(eB.$1.$1.$==1&&(eB.$1.$1.$1.$==1&&(fj=[eB.$1.$1.$1.$0,eB.$1.$1.$1.$1,fk.$0,eB.$1.$1.$0],true))))))?(fn=fj[2],K.entryDoc(fn,(K.createTemplateM())([ez,fn,fj[3],fj[0],fj[1]]))):eB.$==1&&(fp=(fq=eB.$0,K.Identifier(fq[0],fq[1])),fp!=null&&fp.$==1&&(eB.$1.$==1&&((fr=eB.$1.$0,K.Concat(fr[0],fr[1])).$==0&&(fo=[eB.$1.$1,fp.$0],true))))?(fs=fo[1],K.entryDoc(fs,(K.createConcatM())([ez,fs,fo[0]]))):eB.$==1&&(fu=(fv=eB.$0,K.Identifier(fv[0],fv[1])),fu!=null&&fu.$==1&&(eB.$1.$==1&&((fw=eB.$1.$0,K.Vertical(fw[0],fw[1])).$==3&&(eB.$1.$1.$==1&&(eB.$1.$1.$1.$==1&&(eB.$1.$1.$1.$1.$==1&&(ft=[eB.$1.$1.$1.$1.$0,eB.$1.$1.$0,eB.$1.$1.$1.$1.$1,fu.$0,eB.$1.$1.$1.$0],true)))))))?null:eB.$==1&&(fy=(fz=eB.$0,K.Identifier(fz[0],fz[1])),fy!=null&&fy.$==1&&(eB.$1.$==1&&(fA=(fB=eB.$1.$0,K.Vertical(fB[0],fB[1])),fA.$==5&&(eB.$1.$1.$==1&&(fx=[eB.$1.$1.$0,eB.$1.$1.$1,fA.$0,fy.$0],true)))))?(fC=fx[3],K.entryDoc(fC,(K.createElementM())([ez,fC,fx[2],fx[0],fx[1]]))):null;}catch(fD){((function(fE){return function(fF){return fE(bC.prettyPrint(fF));};}(function(fE){eu.log(fE);}))(fD));return null;}};K.getAttrs=function(ez,eA,eB){var eC;eC=[eA,eB];return by.ofSeq(bb.delay(function(){return bb.append(bb.choose(function(eD){var eE,eF,eG,eH,eI,eJ;return!J.Equals(eD,null)&&eD.length===2&&(eF=T.get(eD,1),bi.Trim(T.get(eD,0))!==""&&bi.Trim(eF)!=="")?(eG=T.get(eD,1),(eH=T.get(eD,0),{$:1,$0:(eI=K.getTextData(ez,bi.Trim(eG)),eI.$==1?cU.Dynamic(bi.Trim(eH),eI.$0):eI.$==2?(eJ=eI.$0,cU.Handler(bi.Trim(eH),function(eK){return function(eL){return k.callFunction(eK,eL,eJ.actFunction);};})):cR.Create(bi.Trim(eH),bi.Trim(eI.$0)))})):null;},bb.map(function(eD){return bJ.splitByChar("=",eD);},bJ.splitByChar(";",eC[0]))),bb.delay(function(){return bb.choose(function(eD){var eE,eF,eG,eH,eI;return!J.Equals(eD,null)&&eD.length===2&&(eF=T.get(eD,1),bi.Trim(T.get(eD,0))!==""&&bi.Trim(eF)!=="")?(eG=T.get(eD,1),(eH=T.get(eD,0),{$:1,$0:(eI=K.getTextData(ez,bi.Trim(eG)),eI.$==1?cU.DynamicStyle(bi.Trim(eH),eI.$0):eI.$==2?cU.Style(bi.Trim(eH),(function(eJ){return function(eK){return eJ("${"+bC.toSafe(eK)+"}");};}(a.id))(eI.$0.actName)):cU.Style(bi.Trim(eH),bi.Trim(eI.$0)))})):null;},bb.map(function(eD){return bJ.splitByChar(":",eD);},bJ.splitByChar(";",eC[0])));}));}));};K.getText=function(ez,eA,eB){var eC,eD,eE,eF,eG,eH,eI,eJ,eK;eC=K.Identifier(eA,eB);return eC!=null&&eC.$==1?(eD=eC.$0,(eE=((K.splitName())(ez))(eD),(eF=eE[0],(eG=eE[1],(eH=(eI=k.tryGetViw(eF,eG),eI==null?null:{$:1,$0:Z.TextView(eI.$0.viwView)}),eH==null?(eJ=(eK=k.tryGetVar(eF,eG),eK==null?null:{$:1,$0:Z.TextView(eK.$0.varVar.get_View())}),eJ==null?Z.TextNode(eD):eJ.$0):eH.$0))))):Z.TextNode(eA);};K.singleDoc=function(ez,eA){return Z.EmbedView(p.Map(function(eB){var eC;return eB.$==1&&(eB.$1.$==0&&(eC=eB.$0,true))?eC:K.errDoc((function(eD){return function(eE){return eD("expected exactly 1 element "+bC.printList(function(eF){return"("+bC.prettyPrint(eF[0])+", "+bC.prettyPrint(eF[1])+")";},eE));};}(a.id))(eA));},p.Map(function(){return K.getDocs(ez,eA);},k.mainDocV().get_View())));};K.getTextData=function(ez,eA){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN;eB=(eC=bJ.delimitedO("@{","}",eA),eC==null?null:{$:1,$0:(eD=eC.$0,(eE=eD[0],(eF=eD[1],(eG=eD[2],(eH=((K.splitName())(ez))(eF),(eI=eH[0],(eJ=eH[1],(eK=(eL=k.tryGetWoW(eI,eJ),eL==null?null:{$:1,$0:function(eO){var eP,eQ;eQ=K.getTextData(ez,eG);switch(eE===""?eQ.$==1?(eP=eQ.$0,2):eQ.$==2?(eP=eQ.$0,3):eQ.$0===""?0:(eP=eQ.$0,1):eQ.$==1?(eP=eQ.$0,2):eQ.$==2?(eP=eQ.$0,3):(eP=eQ.$0,1)){case 0:return{$:1,$0:eO};case 1:return{$:1,$0:p.Map(function(eR){return eE+eR+eP;},eO)};case 2:return{$:1,$0:p.Map2(function(eR,eS){return eE+eR+eS;},eO,eP)};case 3:return{$:2,$0:eP};}}(eL.$0)}),eK==null?(eM=(eN=k.tryGetAct(eI,eJ),eN==null?null:{$:1,$0:{$:2,$0:eN.$0}}),eM==null?{$:0,$0:((((er.Curried(function(eO,eP,eQ,eR){return eO(bC.toSafe(eP)+" ${Missing "+bC.toSafe(eQ)+"}"+bC.toSafe(eR));},4))(a.id))(eE))(eF))(eG)}:eM.$0):eK.$0))))))))});return eB==null?{$:0,$0:eA}:eB.$0;};K.createSplitter=function(ez,eA,eB,eC,eD){var eE;eE=K.pairOfDocs(ez,eD);return eC.$==1?K.variableSplitter(eB,eC.$0,eC.$1,eC.$2,eE[0],eE[1]):K.fixedSplitter(eB,eC.$0,eC.$1,eE[0],eE[1]);};K.createButton=function(ez,eA,eB,eC,eD){return K.turnToView(function(){var eE,eF,eG,eH,eI;function eJ(eK,eL){return k.callFunction(null,null,eK.actFunction);}eE=(eF=(eG=(eH=((K.splitName())(ez))(eB),k.tryGetAct(eH[0],eH[1])),eG==null?null:{$:1,$0:(eI=eG.$0,function(eK){return eJ(eI,eK);})}),eF==null?a.ignore:eF.$0);return Z.Button(eD[0],K.getAttrs(ez,eC[0],eC[1]),eE);});};K.createInput=function(ez,eA,eB,eC){return K.turnToView(function(){var eD,eE,eF,eG,eH;eD=(eE=(eF=((K.splitName())(ez))(eB),k.tryGetVoV(eF[0],eF[1])),(eG=(eH=K.getAttrs(ez,eC[0],eC[1]),function(eI){return Z.Input(eH,eI);}),eE==null?null:{$:1,$0:eG(eE.$0)}));return eD==null?K.errDoc((function(eI){return function(eJ){return eI("Missing var: "+bC.toSafe(eJ));};}(a.id))(eB)):eD.$0;});};K.createTextArea=function(ez,eA,eB,eC){return K.turnToView(function(){var eD,eE,eF,eG,eH;eD=(eE=(eF=((K.splitName())(ez))(eB),k.tryGetVoV(eF[0],eF[1])),(eG=(eH=K.getAttrs(ez,eC[0],eC[1]),function(eI){return Z.InputArea(eH,eI);}),eE==null?null:{$:1,$0:eG(eE.$0)}));return eD==null?K.errDoc((function(eI){return function(eJ){return eI("Missing var: "+bC.toSafe(eJ));};}(a.id))(eB)):eD.$0;});};K.createElement=function(ez,eA,eB,eC,eD){var eE;eE=[K.turnToView(function(){return Z.Concat(K.getDocs(ez,eD));})];return Z.Element(eB,K.getAttrs(ez,eC[0],eC[1]),eE);};K.createDoc=function(ez,eA,eB,eC){return K.turnToView(function(){var eD,eE,eF;eD=(eE=(eF=((K.splitName())(ez))(eB),k.tryGetDoc(eF[0],eF[1])),eE==null?null:{$:1,$0:K.getDocFinal(eC,eE.$0)});return eD==null?K.errDoc((function(eG){return function(eH){return eG("Missing doc: "+bC.toSafe(eH));};}(a.id))(eB)):eD.$0;});};K.createTemplate=function(ez,eA,eB,eC,eD){return K.turnToView(function(){var eE,eF,eG,eH,eI,eJ;eG=K.getAttrs(ez,eC[0],eC[1]);c5.LoadLocalTemplates("local");function eK(eM,eN){var eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ;eO=K.Identifier(eN[0],eN[1]);return eO!=null&&eO.$==1?(eP=eO.$0,eQ=eM[0],eR=(eS=(eT=(eU=((K.splitName())(ez))(eP),k.tryGetDoc(eU[0],eU[1])),eT==null?null:{$:1,$0:{$:0,$0:eQ.toLowerCase(),$1:(K.getDocF(cH.Empty,eT.$0))[0]}}),eS==null?(eV=(eW=((K.splitName())(ez))(eP),k.tryGetVar(eW[0],eW[1])),eV==null?null:{$:1,$0:{$:8,$0:eQ.toLowerCase(),$1:eV.$0.varVar}}):eS),eR==null?{$:0,$0:eQ.toLowerCase(),$1:K.errDoc((function(e0){return function(e1){return e0("Missing element: "+bC.toSafe(e1));};}(a.id))(eP))}:eR.$0):(eX=eM[0],eY=K.getTextData(ez,eN[0]),eY.$==1?{$:2,$0:eX.toLowerCase(),$1:eY.$0}:eY.$==2?(eZ=eY.$0,{$:4,$0:eX.toLowerCase(),$1:function(e0){return function(e1){return k.callFunction(e0,e1,eZ.actFunction);};}}):{$:1,$0:eX.toLowerCase(),$1:eY.$0});}function eL(eM,eN){return eM%2===0;}try{eF={$:1,$0:(eH=(eI=bb.map(function(eM){return eK(eM[0],eM[1]);},bb.map(function(eM){return eM[1];},bb.filter(function(eM){return eL(eM[0],eM[1]);},bb.indexed(bb.pairwise(eD))))),(bb.isEmpty(eG)?a.id:(eJ=[{$:3,$0:"attrs",$1:cR.Concat(eG)}],function(eM){return bb.append(eJ,eM);}))(eI)),c5.NamedTemplate("local",{$:1,$0:eB[0].toLowerCase()},eH))};}catch(eM){eF=null;}return eF==null?K.errDoc((function(eN){return function(eO){return eN("Missing template: "+bC.toSafe(eO));};}(a.id))(eB[0])):eF.$0;});};K.createConcat=function(ez,eA,eB){return K.turnToView(function(){return Z.Concat(K.getDocs(ez,eB));});};K.createVar=function(ez,eA,eB){return i.Create$1(eB);};K.addNewLayout=function(ez,eA){var eB,eC;K.addLayout((eB=(eC=!J.Equals(eA,null)?eA:"\r\n            split horizontal 0-50-100 AppFramework.AppFwkClient Hello\r\n            Hello h1 \"color:blue; class=btn-primary\" \"How are you today?\" Ask\r\n            Ask Doc InputLabel \"placeholder=Type you answer here...\" \"Answer:\" AppFramework.mainDocV  \r\n            ",(bJ.unindentStr())(eC)),K.newLyt(!J.Equals(eA,null)?ez:"Lyt_"+bi.Replace(a.String(bs.NewGuid()),"-",""),eB)));};K.getDocF=function(ez,eA){var eB,eC;eC=eA.docDoc;switch(eC.$==1?ez.$==1?(eB=[eC.$0,ez.$0[0],ez.$1],1):6:eC.$==2?ez.$==1?ez.$1.$==1?(eB=[eC.$0,ez.$0[0],ez.$1.$0[0],ez.$1.$1],2):6:6:eC.$==3?ez.$==1?ez.$1.$==1?ez.$1.$1.$==1?(eB=[eC.$0,ez.$0[0],ez.$1.$0[0],ez.$1.$1.$0[0],ez.$1.$1.$1],3):6:6:6:eC.$==4?ez.$==1?ez.$1.$==1?ez.$1.$1.$==1?ez.$1.$1.$1.$==1?(eB=[eC.$0,ez.$0[0],ez.$1.$0[0],ez.$1.$1.$0[0],ez.$1.$1.$1.$0[0],ez.$1.$1.$1.$1],4):6:6:6:6:eC.$==5?ez.$==1?ez.$1.$==1?ez.$1.$1.$==1?ez.$1.$1.$1.$==1?ez.$1.$1.$1.$1.$==1?(eB=[eC.$0,ez.$0[0],ez.$1.$0[0],ez.$1.$1.$0[0],ez.$1.$1.$1.$0[0],ez.$1.$1.$1.$1.$0[0],ez.$1.$1.$1.$1.$1],5):6:6:6:6:6:(eB=[eC.$0,ez],0)){case 0:return[eB[0].f(),eB[1]];case 1:return[eB[0](eB[1]),eB[2]];case 2:return[(eB[0](eB[1]))(eB[2]),eB[3]];case 3:return[((eB[0](eB[1]))(eB[2]))(eB[3]),eB[4]];case 4:return[(((eB[0](eB[1]))(eB[2]))(eB[3]))(eB[4]),eB[5]];case 5:return[((((eB[0](eB[1]))(eB[2]))(eB[3]))(eB[4]))(eB[5]),eB[6]];case 6:return[Z.Element("div",[],[Z.TextNode((((er.Curried3(function(eD,eE,eF){return eD("Parameters do not coincide with definition "+cV.p(eE)+" - "+bC.printList(function(eG){return"("+bC.prettyPrint(eG[0])+", "+bC.prettyPrint(eG[1])+")";},eF));}))(a.id))(eA))(ez))]),cH.Empty];}};K.splitTokens=function(ez){return by.ofSeq(bb.collect(a.id,bb.mapi(function(eA,eB){var eC;return eA%2===1?[[eB,true]]:(eC=bi.Trim(eB),eC===""?[]:T.map(function(eD){return[eD,false];},bi.SplitChars(eC,[" "],1)));},bJ.splitByChar("\"",ez))));};K.Identifier=function(ez,eA){var eB,eC,eD;return(eC=j.REGEX$1("^[$a-zA-Z_][0-9a-zA-Z_\\.\\-$]*$","",ez),eC!=null&&eC.$==1&&((eD=eC.$0,!J.Equals(eD,null)&&eD.length===1)&&(eA?false:(eB=T.get(eC.$0,0),true))))?{$:1,$0:eB}:null;};K.Vertical=function(ez,eA){var eB,eC,eD,eE,eF,eG;return(eA?false:ez==="vertical")?{$:0,$0:null}:(eA?false:ez==="horizontal")?{$:1,$0:null}:(eA?false:ez==="layout")?{$:2,$0:null}:(eA?false:ez==="grid")?{$:3,$0:null}:(eA?false:ez==="template")?{$:4,$0:null}:(eG=K.Identifier(ez,eA),eG!=null&&eG.$==1?{$:5,$0:eG.$0}:{$:6,$0:null});};K.getExtraLines=function(ez,eA){var eB,eC,eD,eE;eB=(eC=(eD=bb.tryFindIndex(function(eF){return bi.Trim(eF)!==""&&!ez(eF);},bb.skip(1,eA)),eD==null?null:{$:1,$0:1+eD.$0}),(eE=T.length(eA),eC==null?eE:eC.$0));return[ca.array(eA,{$:1,$0:1},{$:1,$0:eB-1}),ca.array(eA,{$:1,$0:eB},null)];};K.createLines=function(ez,eA,eB,eC,eD,eE){var eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO;eF=bi.replicate(eA,":");eG=":"+eF;eH=bb.tryHead(eE);return eH!=null&&eH.$==1?(eI=bJ.StartsWith(eF,bi.Trim(eH.$0)),eI!=null&&eI.$==1?(eJ=eI.$0,(eK=K.getExtraLines(function(eP){return bi.StartsWith(bi.Trim(eP),eG);},eE),(eL=(((er.Curried3(function(eP,eQ,eR){return eP(bC.toSafe(eQ)+"_"+a.String(eR));}))(a.id))(ez))(eD),(eM=K.createLines(eL,eA+1,[],[],1,eK[0]),(eN=eM[1],(eO=eM[0],K.createLines(ez,eA,T.ofSeq(bb.delay(function(){return bb.append(eB,bb.delay(function(){return[eL];}));})),T.ofSeq(bb.delay(function(){return bb.append(eC,bb.delay(function(){return bb.append([eL+" "+eJ+" "+bi.concat(" ",eO)],bb.delay(function(){return eN;}));}));})),eD+1,eK[1]))))))):[eB,eC]):[eB,eC];};K.Measures$1=function(ez,eA){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK;eB=[ez,eA];return eB[1]?null:(eC=bJ.splitByChar("-",eB[0]),!J.Equals(eC,null)&&eC.length===1&&(eE=(cb.Double())(T.get(eC,0)),eE!=null&&eE.$==1&&(eD=eE.$0,true))?{$:1,$0:new dJ({$:0,$0:eD,$1:true})}:!J.Equals(eC,null)&&eC.length===2&&(T.get(eC,0)===""&&(eG=(cb.Double())(T.get(eC,1)),eG!=null&&eG.$==1&&(eF=eG.$0,true)))?{$:1,$0:new dJ({$:0,$0:eF,$1:false})}:!J.Equals(eC,null)&&eC.length===3&&(eI=(cb.Double())(T.get(eC,0)),eI!=null&&eI.$==1&&(eJ=(cb.Double())(T.get(eC,1)),eJ!=null&&eJ.$==1&&(eK=(cb.Double())(T.get(eC,2)),eK!=null&&eK.$==1&&(eH=[eK.$0,eI.$0,eJ.$0],true))))?{$:1,$0:new dJ({$:1,$0:eH[1],$1:eH[2],$2:eH[0]})}:null);};K.entryDoc=function(ez,eA){return{$:1,$0:{$:2,$0:k.newDoc(ez,r.Create(function(){return eA;}))}};};K.createSplitterM=function(){bU.$cctor();return bU.createSplitterM;};K.Var=function(ez,eA){var eB,eC,eD,eE,eF,eG;return(eA?false:ez==="Var")?{$:0,$0:null}:(eA?false:ez==="Doc")?{$:1,$0:null}:(eA?false:ez==="button")?{$:2,$0:null}:(eA?false:ez==="input")?{$:3,$0:null}:(eA?false:ez==="textarea")?{$:4,$0:null}:(eA?false:ez==="select")?{$:5,$0:null}:{$:6,$0:null};};K.createButtonM=function(){bU.$cctor();return bU.createButtonM;};K.createInputM=function(){bU.$cctor();return bU.createInputM;};K.createTextAreaM=function(){bU.$cctor();return bU.createTextAreaM;};K.entryVar=function(ez,eA){return{$:1,$0:{$:0,$0:k.newVar(ez,eA)}};};K.createVarM=function(){bU.$cctor();return bU.createVarM;};K.createDocM=function(){bU.$cctor();return bU.createDocM;};K.createTemplateM=function(){bU.$cctor();return bU.createTemplateM;};K.Concat=function(ez,eA){var eB;return(eA?false:ez==="concat")?{$:0,$0:null}:{$:1,$0:null};};K.createConcatM=function(){bU.$cctor();return bU.createConcatM;};K.createElementM=function(){bU.$cctor();return bU.createElementM;};K.getDocs=function(ez,eA){var eB;return eA.$==0?cH.Empty:(eB=K.getOneDoc(ez,eA),new cH({$:1,$0:eB[0],$1:K.getDocs(ez,eB[1])}));};K.pairOfDocs=function(ez,eA){var eB;eB=p.Map(function(eC){var eD;return eC.$==1&&(eC.$1.$==1&&(eC.$1.$1.$==0&&(eD=[eC.$0,eC.$1.$0],true)))?[eD[0],eD[1]]:[K.errDoc((function(eE){return function(eF){return eE("splitter expects exactly 2 elements "+bC.printList(function(eG){return"("+bC.prettyPrint(eG[0])+", "+bC.prettyPrint(eG[1])+")";},eF));};}(a.id))(eA)),K.errDoc("part 2")];},p.Map(function(){return K.getDocs(ez,eA);},k.mainDocV().get_View()));return[Z.EmbedView(p.Map(function(eC){return eC[0];},eB)),Z.EmbedView(p.Map(function(eC){return eC[1];},eB))];};K.variableSplitter=function(ez,eA,eB,eC,eD,eE){return Z.Element("wcomp-splitter",by.ofSeq(bb.delay(function(){return bb.append(ez?[cR.Create("vertical","")]:[],bb.delay(function(){return bb.append([cR.Create("min",a.String(eA))],bb.delay(function(){return bb.append([cR.Create("value",a.String(eB))],bb.delay(function(){return[cR.Create("max",a.String(eC))];}));}));}));})),by.ofArray([eD,eE]));};K.fixedSplitter=function(ez,eA,eB,eC,eD){var eE,eF,eG,eH,eI,eJ,eK;eE=(((eB?er.Curried3(function(eL,eM,eN){return eL(eM.toFixed(6)+"px calc(100% - "+eN.toFixed(6)+"px)");}):er.Curried3(function(eL,eM,eN){return eL("calc(100% - "+eM.toFixed(6)+"px) "+eN.toFixed(6)+"px");}))(a.id))(eA))(eA);return ez?(eF=U.Make().WithHole({$:1,$0:"partsizes",$1:eE}).WithHole({$:0,$0:"first",$1:eC}).WithHole({$:0,$0:"second",$1:eD}),(eG=V.CompleteHoles(eF.k,eF.h,[]),(eH=new S.New(eG[1],cW.fixedsplitterver(eG[0])),(eF.i=eH,eH)))).get_Doc():(eI=U.Make().WithHole({$:1,$0:"partsizes",$1:eE}).WithHole({$:0,$0:"first",$1:eC}).WithHole({$:0,$0:"second",$1:eD}),(eJ=V.CompleteHoles(eI.k,eI.h,[]),(eK=new S.New(eJ[1],cW.fixedsplitterhor(eJ[0])),(eI.i=eK,eK)))).get_Doc();};K.getOneDoc=function(ez,eA){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;return eA.$==1&&(eC=(eD=eA.$0,K.Identifier(eD[0],eD[1])),eC!=null&&eC.$==1&&(eB=[eC.$0,eA.$1],true))?(eE=eB[0],(eF=eB[1],(eG=((K.splitName())(ez))(eE),(eH=eG[0],(eI=eG[1],(eJ=(eK=k.tryGetDoc(eH,eI),eK==null?null:{$:1,$0:K.getDocF(eF,eK.$0)}),eJ==null?(eL=(eM=k.tryGetWoW(eH,eI),eM==null?null:{$:1,$0:[Z.TextView(eM.$0),eF]}),eL==null?[K.errDoc((eN=(function(eQ){return function(eR){return eQ("Missing doc: "+bC.toSafe(eR));};}(a.id))(eE),(bc.print(eN),eN))),eF]:eL.$0):eJ.$0)))))):eA.$==0?[Z.get_Empty(),cH.Empty]:(eO=eA.$1,(eP=K.getTextData(ez,eA.$0[0]),eP.$==1?[Z.TextView(eP.$0),eO]:eP.$==2?[K.errDoc((function(eQ){return function(eR){return eQ("Unexpected action: "+bC.toSafe(eR));};}(a.id))(eP.$0.actName)),eO]:[Z.TextNode(eP.$0),eO]));};L.ofObj=function(ez){return ez==null?null:{$:1,$0:ez};};N.New=function(ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT){return{id:ez,idPadreO:eA,idForAuthorize:eB,influyente:eC,datosPersonales:eD,contactos:eE,identificacion:eF,isInternal:eG,status:eH,diaPago:eI,tipo:eJ,fechaRegistro:eK,fechaStatus:eL,nReferidos:eM,nRefActivos:eN,nDescendientes:eO,nDescActivos:eP,comision:eQ,nivel:eR,documentos:eS,docPendientes:eT};};O.empty=function(){_5.$cctor();return _5.empty;};O.nombre2=function(ez){var eA,eB;return(eA=(eB=ez.titulo,eB==null?null:{$:1,$0:" "+eB.$0}),eA==null?"":eA.$0)+bi.Trim(ez.nombre1+" "+ez.nombre2)+" "+bi.Trim(ez.apellido1+" "+ez.apellido2);};O.nombre=function(ez){var eA,eB;return(eA=(eB=ez.titulo,eB==null?null:{$:1,$0:" "+eB.$0}),eA==null?"":eA.$0)+(ez.apellido1===""?"":bi.Trim(ez.apellido1+" "+ez.apellido2)+", ")+ez.nombre1+" "+ez.nombre2;};O.busqueda=function(ez){var eA,eB;function eC(eI,eJ){return[eI,T.ofSeq(bb.map(function(eK){return eK[1];},eJ))];}function eD(eI){var eJ,eK;eJ=(eK=null,[eB.TryGetValue(eI,{get:function(){return eK;},set:function(eL){eK=eL;}}),eK]);return eJ[0]?{$:1,$0:eJ[1]}:null;}function eE(eI){var eJ,eK;eJ=(eK=null,[eA.TryGetValue({$:1,$0:eI},{get:function(){return eK;},set:function(eL){eK=eL;}}),eK]);return eJ[0]?eJ[1]:[];}function eF(eI){var eJ,eK;eJ=(eK=eI==null?null:eD(eI.$0),eK==null?null:{$:1,$0:1+eF(eK.$0.idPadreO)});return eJ==null?0:eJ.$0;}function eG(eI){return T.choose(eD,eE(eI.id));}function eH(eI){return T.ofSeq(bb.delay(function(){return bb.collect(function(eJ){return bb.append([eJ],bb.delay(function(){return eH(eJ);}));},eG(eI));}));}eA=new cD.New(bb.map(function(eI){return eC(eI[0],eI[1]);},bb.groupBy(function(eI){return eI[0];},bb.map(function(eI){return[eI.idPadreO,eI.id];},ez))));eB=new cD.New(bb.map(function(eI){return[eI.id,eI];},ez));return be.New(eE,eF,function(eI){try{return eB.get_Item(eI);}catch(eJ){return(function(eK){return function(eL){return eK("buscarAliado failed: "+X.p$13(eL));};}(o.FailWith))(eI);}},eD,eG,eH);};O.comision=function(ez,eA){var eB;eB=O.premisas(ez,eA);return[eA.nRefActivos*eB[0],eA.nDescActivos*eB[1]];};O.premisas=function(ez,eA){var eB;eB=eA.tipo.$==0?[ez.comisionReferidosMaster,ez.comisionDescendientesMaster]:[ez.comisionReferidosRegular,ez.comisionDescendientesRegular];return eA.status.$==1?[eB[0],eB[1]]:[0,0];};O.dia=function(ez){return ez.$==1?5:ez.$==2?10:ez.$==3?15:ez.$==4?20:ez.$==5?25:1;};O.correo=function(ez){var eA;eA=bb.tryHead(bb.choose(function(eB){return eB.$==1?{$:1,$0:eB.$0.email}:null;},ez.contactos));return eA==null?"":eA.$0;};S=R.TemplateInstance=er.Class({get_Doc:function(){return this.doc;},Hole:function(ez){return this.allVars.get_Item(ez);}},g,S);S.New=er.Ctor(function(ez,eA){g.New.call(this);this.doc=eA;this.allVars=ez.$==0?ez.$0:o.FailWith("Should not happen");},S);T.get=function(ez,eA){T.checkBounds(ez,eA);return ez[eA];};T.checkBounds=function(ez,eA){if(eA<0||eA>=ez.length)o.FailWith("Index was outside the bounds of the array.");};T.length=function(ez){return ez.dims===2?ez.length*ez.length:ez.length;};T.set=function(ez,eA,eB){T.checkBounds(ez,eA);ez[eA]=eB;};U=R.ProviderBuilder=er.Class({WithHole:function(ez){this.h.push(ez);return this;}},null,U);U.Make=function(){var ez;return U.New(null,(ez=bs.NewGuid(),a.String(ez)),[]);};U.New=function(ez,eA,eB){return new U({i:ez,k:eA,h:eB});};V.CompleteHoles=function(ez,eA,eB){var eD,eE,eF,eG,eH,eI;function eC(eJ,eK){var eL,eM,eN,eO;return eE.Contains(eJ)?null:(eL=eK===0?(eM=i.Create$1(""),[{$:8,$0:eJ,$1:eM},eM]):eK===1?(eN=i.Create$1(0),[{$:13,$0:eJ,$1:eN},eN]):eK===2?(eO=i.Create$1(false),[{$:9,$0:eJ,$1:eO},eO]):o.FailWith("Invalid value type"),(eD.set_Item(eJ,eL[1]),{$:1,$0:eL[0]}));}eD=new b1.New$5();eE=new b2.New$3();eF=cE.Get(eA);try{while(eF.MoveNext()){eG=eF.Current();(eG.$==8?(eH=[eG.$0,b3.Box(eG.$1)],true):eG.$==11?(eH=[eG.$0,b3.Box(eG.$1)],true):eG.$==10?(eH=[eG.$0,b3.Box(eG.$1)],true):eG.$==13?(eH=[eG.$0,b3.Box(eG.$1)],true):eG.$==12?(eH=[eG.$0,b3.Box(eG.$1)],true):eG.$==9&&(eH=[eG.$0,b3.Box(eG.$1)],true))?(eI=eH[0],eE.Add(eI),eD.set_Item(eI,eH[1])):void 0;}}finally{if(typeof eF=="object"&&"Dispose"in eF)eF.Dispose();}return[bb.append(eA,T.choose(function(eJ){return eC(eJ[0],eJ[1]);},eB)),{$:0,$0:eD}];};V.EventQ2=function(ez,eA,eB,eC){return{$:5,$0:eA,$1:true,$2:function(eD){return function(eE){return eC({Vars:eB(),Target:eD,Event:eE});};}};};W.opcionesadministrador=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"opcionesadministrador"},ez):void 0;};X.p$1=function(ez){return ez.$==1?"Regular":"Master";};X.p=function(ez){return ez.$==3?"Cancelado":ez.$==2?"Inactivo":ez.$==1?"Activo":"CuentaCreada";};W.filaaliado=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"filaaliado"},ez):void 0;};W.tablaaliados=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"tablaaliados"},ez):void 0;};W.aliado=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"aliado"},ez):void 0;};W.calculo=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"calculo"},ez):void 0;};X.p$15=function(ez){return ez.$==2?"Mensaje "+bC.prettyPrint(ez.$0):ez.$==1?"NuevoRegistro "+bC.prettyPrint(ez.$0):"ROk";};W.formaregistro=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"formaregistro"},ez):void 0;};W.filaconsolidado=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"filaconsolidado"},ez):void 0;};W.consolidado=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"consolidado"},ez):void 0;};W.filapago=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"filapago"},ez):void 0;};W.tablapagos=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"tablapagos"},ez):void 0;};W.filadocs=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"filadocs"},ez):void 0;};W.enlacedocumento=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"enlacedocumento"},ez):void 0;};W.subirdocumentos=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"subirdocumentos"},ez):void 0;};W.autorizacionpago=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"autorizacionpago"},ez):void 0;};W.contrato=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"contrato"},ez):void 0;};W.pendientes=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"pendientes"},ez):void 0;};Y.r=function(){return db.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["NoUser"]]],[]],[null,[[null,["PreRegister"]]],[]],[null,[[null,["Content"]]],[db.rString()]],[null,[[null,["Pdf"]]],[db.rWildcard()]],[null,[[null,["Video"]]],[db.rWildcard()]]]);};X.p$2=function(ez){return ez.$==5?"Dia25":ez.$==4?"Dia20":ez.$==3?"Dia15":ez.$==2?"Dia10":ez.$==1?"Dia05":"Dia01";};X.p$13=function(ez){return"IdAliado "+bC.prettyPrint(ez.$0);};W.datospersonales=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"datospersonales"},ez):void 0;};X.p$14=function(ez){return ez.$==2?"Empresa":ez.$==1?"Femenino":"Masculino";};W.correo=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"correo"},ez):void 0;};W.telefono=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"telefono"},ez):void 0;};W.direccion=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"direccion"},ez):void 0;};W.formadatospersonales=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"formadatospersonales"},ez):void 0;};W.formacontactos=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"formacontactos"},ez):void 0;};W.formacuentas=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"formacuentas"},ez):void 0;};W.formafirma=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"formafirma"},ez):void 0;};W.transaccion=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"transaccion"},ez):void 0;};W.transacciones=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"transacciones"},ez):void 0;};X.p$16=function(ez){return"IdPayment "+bC.prettyPrint(ez.$0);};X.p$5=function(ez){return ez.$==2?"OtroS "+bC.prettyPrint(ez.$0):ez.$==1?"Florida":"Texas";};X.p$4=function(ez){return ez.$==3?"OtroP "+bC.prettyPrint(ez.$0):ez.$==2?"Argentina":ez.$==1?"Venezuela":"USA";};X.p$9=function(ez){return ez.$==2?"Otra "+bC.prettyPrint(ez.$0):ez.$==1?"Corriente":"Ahorro";};X.p$6=function(ez){return ez.$==7?"Otro "+bC.prettyPrint(ez.$0):ez.$==6?"FormaW8BEN":ez.$==5?"FormaW9":ez.$==4?"LicenciaConducir":ez.$==3?"Cedula":ez.$==2?"Pasaporte":ez.$==1?"Autorizacion":"Contrato";};X.p$7=function(ez){return ez.$==5?"Cambiado":ez.$==4?"Cancelado":ez.$==3?"Expirado":ez.$==2?"Rechazado":ez.$==1?"Verificado":"Subido";};W.cuentabancaria=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"cuentabancaria"},ez):void 0;};W.tarjetacredito=function(ez){c5.LoadLocalTemplates("indexdes");return ez?c5.NamedTemplate("indexdes",{$:1,$0:"tarjetacredito"},ez):void 0;};X.p$3=function(ez){return ez.$==3?"ResetPassword":ez.$==2?"EditProfile":ez.$==1?"SignUp":"SignIn";};X.p$12=function(ez){return ez.$==3?"Voip":ez.$==2?"Habitacion":ez.$==1?"Oficina":"Movil";};X.p$11=function(ez){return ez.$==3?"Otro "+bC.prettyPrint(ez.$0):ez.$==2?"ServicioPostal":ez.$==1?"Oficina":"Habitacion";};X.p$8=function(ez){return ez.$==3?"Otra "+bC.prettyPrint(ez.$0):ez.$==2?"Amex":ez.$==1?"MasterCard":"Visa";};X.p$10=function(ez){return ez.$==2?"Otro "+bC.prettyPrint(ez.$0):ez.$==1?"PagoComision":"PagoAfiliacion";};Z=h.Doc=er.Class({},g,Z);Z.get_Empty=function(){return Z.Mk(null,p.Const());};Z.Concat=function(ez){var eA;eA=cS.ofSeqNonCopying(ez);return cS.TreeReduce(Z.get_Empty(),Z.Append,eA);};Z.BindView=function(ez,eA){return Z.EmbedView(p.Map(ez,eA));};Z.Mk=function(ez,eA){return new Z.New(ez,eA);};Z.ConvertSeqBy=function(ez,eA,eB){return Z.Flatten(p.MapSeqCachedViewBy(ez,function(eC,eD){return(eA(eC))(eD);},eB));};Z.EmbedView=function(ez){var eA;eA=di.CreateEmbedNode();return Z.Mk({$:2,$0:eA},p.Map(a.ignore,p.Bind(function(eB){di.UpdateEmbedNode(eA,eB.docNode);return eB.updates;},ez)));};Z.Append=function(ez,eA){return Z.Mk({$:0,$0:ez.docNode,$1:eA.docNode},p.Map2Unit(ez.updates,eA.updates));};Z.TextNode=function(ez){return Z.Mk({$:5,$0:dm.CreateText(ez)},p.Const());};Z.Verbatim=function(ez){var eA;return Z.Mk(cS.MapTreeReduce(function(eB){return J.Equals(eB.nodeType,G.TEXT_NODE)?{$:5,$0:eB}:{$:1,$0:di.CreateElemNode(eB,dl.EmptyAttr(),null)};},null,function(eB,eC){return{$:0,$0:eB,$1:eC};},(eA=et.parseHTML(ez),J.Equals(eA,null)?[]:eA)),p.Const());};Z.Flatten=function(ez){return Z.EmbedView(p.Map(Z.Concat,ez));};Z.ConvertBy=function(ez,eA,eB){return Z.Flatten(p.MapSeqCachedBy(ez,eA,eB));};Z.Button=function(ez,eA,eB){var eC;eC=cR.Concat(eA);return dQ.New(Z.Clickable("button",eB),eC,Z.TextNode(ez));};Z.Element=function(ez,eA,eB){var eC,eD;eC=cR.Concat(eA);eD=Z.Concat(eB);return dQ.New(dm.CreateElement(ez),eC,eD);};Z.Input=function(ez,eA){return Z.InputInternal("input",function(){return bb.append(ez,[cU.Value(eA)]);});};Z.RunInPlace=function(ez,eA,eB){var eC;eC=di.CreateRunState(eA,eB.docNode);p.Sink(dU.get_UseAnimations()||dV.BatchUpdatesEnabled()?dW.StartProcessor(di.PerformAnimatedUpdate(ez,eC,eB.docNode)):function(){di.PerformSyncUpdate(ez,eC,eB.docNode);},eB.updates);};Z.Clickable=function(ez,eA){var eB;eB=dm.CreateElement(ez);eB.addEventListener("click",function(eC){eC.preventDefault();return eA();},false);return eB;};Z.TextView=function(ez){var eA;eA=di.CreateTextNode();return Z.Mk({$:4,$0:eA},p.Map(function(eB){di.UpdateTextNode(eA,eB);},ez));};Z.InputInternal=function(ez,eA){var eB;eB=dm.CreateElement(ez);return dQ.New(eB,cR.Concat(eA(eB)),Z.get_Empty());};Z.Run=function(ez,eA){di.LinkElement(ez,eA.docNode);Z.RunInPlace(false,ez,eA);};Z.InputArea=function(ez,eA){return Z.InputInternal("textarea",function(){return bb.append(ez,[cU.Value(eA)]);});};Z.New=er.Ctor(function(ez,eA){g.New.call(this);this.docNode=ez;this.updates=eA;},Z);_0.llamadas=function(){_5.$cctor();return _5.llamadas;};_0.ejecutarDataEventoNuevo=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.ejecutarDataEventoNuevo:181407377",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.iterA=function(ez){cI.iterA(function(eA){a.alert(eA);},a.ignore,ez);};_0.addLlamadas=function(){_5.$cctor();return _5.addLlamadas;};_0.obtenerFormasDePagoPara=function(ez){var eA;function eB(eC,eD){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerFormasDePagoPara:-1929458241",[eC,eD]);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerListaDocs=function(ez){var eA;function eB(eC,eD){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerListaDocs:-881142106",[eC,eD]);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerFormasDePagoId=function(ez){var eA;function eB(eC,eD){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerFormasDePagoId:2063455187",[eC,eD]);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.enviarCorreosInvitacion=function(ez,eA){var eB,eC;function eD(eE,eF){return(function(eG){var eH;eH=n.get_LoggedId();return function(eI){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.enviarCorreosInvitacion:1622714317",[eG,eH,eI[0],eI[1]]);};}(eE))(eF);}eB=[ez,eA];eC=bo.asyncResult();return eC.Run(eC.Delay(function(){return eC.TryFinally(eC.Delay(function(){return bG["AsyncResultBuilder.Bind"](eC,(_0.addLlamadas())(1),function(){function eE(eF){return cQ.Return(eF);}return eC.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eF){return eE(bE.rtn(eF));})),function(eF){return eC.ReturnFrom$1(eD(eF,eB));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerIdInfluyente=function(ez){var eA;function eB(eC){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerIdInfluyente:231616815",[eC]);}eA=null;return cQ.Delay(function(){return cQ.TryFinally(cQ.Delay(function(){return cQ.Bind((_0.addLlamadas())(1),function(){return eB(ez);});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});});};_0.obtenerUnions=function(){var ez;function eA(){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerUnions:-1742744641",[]);}ez=null;return cQ.Delay(function(){return cQ.TryFinally(cQ.Delay(function(){return cQ.Bind((_0.addLlamadas())(1),function(){return eA(void 0);});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});});};_0.obtenerTransaccionesPara=function(ez){var eA,eB;function eC(eD,eE){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerTransaccionesPara:-1914339047",[eD,eE]);}eA=n.get_LoggedId();eB=bo.asyncResult();return eB.Run(eB.Delay(function(){return eB.TryFinally(eB.Delay(function(){return bG["AsyncResultBuilder.Bind"](eB,(_0.addLlamadas())(1),function(){function eD(eE){return cQ.Return(eE);}return eB.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eE){return eD(bE.rtn(eE));})),function(eE){return eB.ReturnFrom$1(eC(eE,eA));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.agregarUsuarioSiEsNuevo=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.agregarUsuarioSiEsNuevo:1579629588",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerEstadoParaUsuario=function(ez){var eA,eB;function eC(eD,eE){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerEstadoParaUsuario:-1561662925",[eD,eE]);}eA=n.get_LoggedId();eB=bo.asyncResult();return eB.Run(eB.Delay(function(){return eB.TryFinally(eB.Delay(function(){return bG["AsyncResultBuilder.Bind"](eB,(_0.addLlamadas())(1),function(){function eD(eE){return cQ.Return(eE);}return eB.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eE){return eD(bE.rtn(eE));})),function(eE){return eB.ReturnFrom$1(eC(eE,eA));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.borrarFormaPago=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.borrarFormaPago:-384331266",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.registrarTarjeta=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.registrarTarjeta:-1859341136",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.registrarCuenta=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.registrarCuenta:244739382",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.validarFormaPago=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.validarFormaPago:-384331266",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.actualizarSubscripcion=function(ez){var eA;function eB(eC,eD){return(function(eE){var eF;eF=n.get_LoggedId();return function(eG){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.actualizarSubscripcion:-384331266",[eE,eF,eG]);};}(eC))(eD);}eA=bo.asyncResult();return eA.Run(eA.Delay(function(){return eA.TryFinally(eA.Delay(function(){return bG["AsyncResultBuilder.Bind"](eA,(_0.addLlamadas())(1),function(){function eC(eD){return cQ.Return(eD);}return eA.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eD){return eC(bE.rtn(eD));})),function(eD){return eA.ReturnFrom$1(eB(eD,ez));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_0.obtenerFormasDePago=function(){var ez;function eA(eB,eC){return(new cJ.New()).Async("ProzperServer:FsRoot.ProzperServer+Rpc0.obtenerFormasDePagoId:2063455187",[eB,n.get_LoggedId()]);}ez=bo.asyncResult();return ez.Run(ez.Delay(function(){return ez.TryFinally(ez.Delay(function(){return bG["AsyncResultBuilder.Bind"](ez,(_0.addLlamadas())(1),function(){function eB(eC){return cQ.Return(eC);}return ez.Bind$1(cI.absorbO(function(){self.location.href="/Login";return"User not logged in";},cQ.Bind((bR.getTokenO())(),function(eC){return eB(bE.rtn(eC));})),function(eC){return ez.ReturnFrom$1(eA(eC,void 0));});});}),function(){cQ.Start((_0.addLlamadas())(-1),null);});}));};_1=M.IdAliado=er.Class({get_Id:function(){return this.$0;}},null,_1);_2.New=function(ez,eA,eB,eC,eD,eE){return{idAliado:ez,aliados:eA,anoActual:eB,periodoActual:eC,premisas:eD,nevento:eE};};_3=h.ConcreteVar=er.Class({get_View:function(){return this.view;},Set:function(ez){if(this.isConst)(function(eA){return eA("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(eA){eu.log(eA);}));else{_4.Obsolete(this.snap);this.current=ez;this.snap=_4.New({$:2,$0:ez,$1:[]});}},Get:function(){return this.current;},Update:function(ez){this.Set(ez(this.Get()));},UpdateMaybe:function(ez){var eA;eA=ez(this.Get());eA!=null&&eA.$==1?this.Set(eA.$0):void 0;}},q,_3);_3.New=er.Ctor(function(ez,eA,eB){var eC;eC=this;q.New.call(this);this.isConst=ez;this.current=eB;this.snap=eA;this.view=function(){return eC.snap;};this.id=b6.Int();},_3);_4.Map=function(ez,eA){var eB,eC;eB=eA.s;return eB!=null&&eB.$==0?_4.New({$:0,$0:ez(eB.$0)}):(eC=_4.New({$:3,$0:[],$1:[]}),(_4.When(eA,function(eD){_4.MarkDone(eC,eA,ez(eD));},eC),eC));};_4.WhenRun=function(ez,eA,eB){var eC;eC=ez.s;eC==null?eB():eC!=null&&eC.$==2?(eC.$1.push(eB),eA(eC.$0)):eC!=null&&eC.$==3?(eC.$0.push(eA),eC.$1.push(eB)):eA(eC.$0);};_4.WhenObsoleteRun=function(ez,eA){var eB;eB=ez.s;eB==null?eA():eB!=null&&eB.$==2?eB.$1.push(eA):eB!=null&&eB.$==3?eB.$1.push(eA):void 0;};_4.When=function(ez,eA,eB){var eC;eC=ez.s;eC==null?_4.Obsolete(eB):eC!=null&&eC.$==2?(_4.EnqueueSafe(eC.$1,eB),eA(eC.$0)):eC!=null&&eC.$==3?(eC.$0.push(eA),_4.EnqueueSafe(eC.$1,eB)):eA(eC.$0);};_4.MarkDone=function(ez,eA,eB){var eC;if(eC=eA.s,eC!=null&&eC.$==0)_4.MarkForever(ez,eB);else _4.MarkReady(ez,eB);};_4.Map2=function(ez,eA,eB){var eC,eD,eE;function eF(eG){var eH,eI,eJ;if(!(eH=eE.s,eH!=null&&eH.$==0||eH!=null&&eH.$==2)){eI=_4.ValueAndForever(eA);eJ=_4.ValueAndForever(eB);eI!=null&&eI.$==1?eJ!=null&&eJ.$==1?eI.$0[1]&&eJ.$0[1]?_4.MarkForever(eE,ez(eI.$0[0],eJ.$0[0])):_4.MarkReady(eE,ez(eI.$0[0],eJ.$0[0])):void 0:void 0;}}eC=eA.s;eD=eB.s;return eC!=null&&eC.$==0?eD!=null&&eD.$==0?_4.New({$:0,$0:ez(eC.$0,eD.$0)}):_4.Map2Opt1(ez,eC.$0,eB):eD!=null&&eD.$==0?_4.Map2Opt2(ez,eD.$0,eA):(eE=_4.New({$:3,$0:[],$1:[]}),(_4.When(eA,eF,eE),_4.When(eB,eF,eE),eE));};_4.Map3=function(ez,eA,eB,eC){var eD,eE,eF,eG;function eH(eI){var eJ,eK,eL,eM;if(!(eJ=eG.s,eJ!=null&&eJ.$==0||eJ!=null&&eJ.$==2)){eK=_4.ValueAndForever(eA);eL=_4.ValueAndForever(eB);eM=_4.ValueAndForever(eC);eK!=null&&eK.$==1?eL!=null&&eL.$==1?eM!=null&&eM.$==1?eK.$0[1]&&eL.$0[1]&&eM.$0[1]?_4.MarkForever(eG,ez(eK.$0[0],eL.$0[0],eM.$0[0])):_4.MarkReady(eG,ez(eK.$0[0],eL.$0[0],eM.$0[0])):void 0:void 0:void 0;}}eD=eA.s;eE=eB.s;eF=eC.s;return eD!=null&&eD.$==0?eE!=null&&eE.$==0?eF!=null&&eF.$==0?_4.New({$:0,$0:ez(eD.$0,eE.$0,eF.$0)}):_4.Map3Opt1(ez,eD.$0,eE.$0,eC):eF!=null&&eF.$==0?_4.Map3Opt2(ez,eD.$0,eF.$0,eB):_4.Map3Opt3(ez,eD.$0,eB,eC):eE!=null&&eE.$==0?eF!=null&&eF.$==0?_4.Map3Opt4(ez,eE.$0,eF.$0,eA):_4.Map3Opt5(ez,eE.$0,eA,eC):eF!=null&&eF.$==0?_4.Map3Opt6(ez,eF.$0,eA,eB):(eG=_4.New({$:3,$0:[],$1:[]}),(_4.When(eA,eH,eG),_4.When(eB,eH,eG),_4.When(eC,eH,eG),eG));};_4.MapAsync=function(ez,eA){var eB;eB=_4.New({$:3,$0:[],$1:[]});_4.When(eA,function(eC){b5.StartTo(ez(eC),function(eD){_4.MarkDone(eB,eA,eD);});},eB);return eB;};_4.EnqueueSafe=function(ez,eA){var eB,eC,eD,eE;ez.push(eA);if(ez.length%20===0){eB=ez.slice(0);d4.Clear(ez);for(eC=0,eD=T.length(eB)-1;eC<=eD;eC++){eE=T.get(eB,eC);typeof eE=="object"?function(eF){if(eF.s)ez.push(eF);}(eE):function(eF){ez.push(eF);}(eE);}}else void 0;};_4.MarkForever=function(ez,eA){var eB,eC,eD,eE;eB=ez.s;if(eB!=null&&eB.$==3){ez.s={$:0,$0:eA};eC=eB.$0;for(eD=0,eE=T.length(eC)-1;eD<=eE;eD++)(T.get(eC,eD))(eA);}else void 0;};_4.MarkReady=function(ez,eA){var eB,eC,eD,eE;eB=ez.s;if(eB!=null&&eB.$==3){ez.s={$:2,$0:eA,$1:eB.$1};eC=eB.$0;for(eD=0,eE=T.length(eC)-1;eD<=eE;eD++)(T.get(eC,eD))(eA);}else void 0;};_4.Map2Opt1=function(ez,eA,eB){return _4.Map(function(eC){return ez(eA,eC);},eB);};_4.Map2Opt2=function(ez,eA,eB){return _4.Map(function(eC){return ez(eC,eA);},eB);};_4.ValueAndForever=function(ez){var eA;eA=ez.s;return eA!=null&&eA.$==0?{$:1,$0:[eA.$0,true]}:eA!=null&&eA.$==2?{$:1,$0:[eA.$0,false]}:null;};_4.TryGet=function(ez){var eA,eB;eA=ez.s;return(eA!=null&&eA.$==0?(eB=eA.$0,true):eA!=null&&eA.$==2&&(eB=eA.$0,true))?{$:1,$0:eB}:null;};_4.Map3Opt1=function(ez,eA,eB,eC){return _4.Map(function(eD){return ez(eA,eB,eD);},eC);};_4.Map3Opt2=function(ez,eA,eB,eC){return _4.Map(function(eD){return ez(eA,eD,eB);},eC);};_4.Map3Opt3=function(ez,eA,eB,eC){return _4.Map2(function(eD,eE){return ez(eA,eD,eE);},eB,eC);};_4.Map3Opt4=function(ez,eA,eB,eC){return _4.Map(function(eD){return ez(eD,eA,eB);},eC);};_4.Map3Opt5=function(ez,eA,eB,eC){return _4.Map2(function(eD,eE){return ez(eD,eA,eE);},eB,eC);};_4.Map3Opt6=function(ez,eA,eB,eC){return _4.Map2(function(eD,eE){return ez(eD,eE,eA);},eB,eC);};_4.Join=function(ez){var eA;eA=_4.New({$:3,$0:[],$1:[]});_4.When(ez,function(eB){var eC;eC=eB();_4.When(eC,function(eD){var eE,eF;if((eE=eC.s,eE!=null&&eE.$==0)&&(eF=ez.s,eF!=null&&eF.$==0))_4.MarkForever(eA,eD);else _4.MarkReady(eA,eD);},eA);},eA);return eA;};_4.Map2Unit=function(ez,eA){var eB,eC,eD;function eE(){var eF,eG,eH;if(!(eF=eD.s,eF!=null&&eF.$==0||eF!=null&&eF.$==2)){eG=_4.ValueAndForever(ez);eH=_4.ValueAndForever(eA);eG!=null&&eG.$==1?eH!=null&&eH.$==1?eG.$0[1]&&eH.$0[1]?_4.MarkForever(eD,null):_4.MarkReady(eD,null):void 0:void 0;}}eB=ez.s;eC=eA.s;return eB!=null&&eB.$==0?eC!=null&&eC.$==0?_4.New({$:0,$0:null}):eA:eC!=null&&eC.$==0?ez:(eD=_4.New({$:3,$0:[],$1:[]}),(_4.When(ez,eE,eD),_4.When(eA,eE,eD),eD));};_4.Sequence=function(ez){var eA,eB,eC;function eD(eE){var eF;if(eC[0]===0){eF=T.map(function(eG){var eH;eH=eG.s;return eH!=null&&eH.$==0?eH.$0:eH!=null&&eH.$==2?eH.$0:o.FailWith("value not found by View.Sequence");},eA);T.forall(function(eG){var eH;eH=eG.s;return eH!=null&&eH.$==0;},eA)?_4.MarkForever(eB,eF):_4.MarkReady(eB,eF);}else eC[0]--;}eA=T.ofSeq(ez);return eA.length==0?_4.New({$:0,$0:[]}):(eB=_4.New({$:3,$0:[],$1:[]}),(eC=[T.length(eA)-1],(T.iter(function(eE){_4.When(eE,eD,eB);},eA),eB)));};_4.Copy=function(ez){var eA,eB,eC;eA=ez.s;return eA==null?ez:eA!=null&&eA.$==2?(eB=_4.New({$:2,$0:eA.$0,$1:[]}),(_4.WhenObsolete(ez,eB),eB)):eA!=null&&eA.$==3?(eC=_4.New({$:3,$0:[],$1:[]}),(_4.When(ez,function(eD){_4.MarkDone(eC,ez,eD);},eC),eC)):ez;};_4.WhenObsolete=function(ez,eA){var eB;eB=ez.s;eB==null?_4.Obsolete(eA):eB!=null&&eB.$==2?_4.EnqueueSafe(eB.$1,eA):eB!=null&&eB.$==3?_4.EnqueueSafe(eB.$1,eA):void 0;};_5.$cctor=function(){var eA,eE,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eV,eW,eX,eY,eZ,e0;_5.$cctor=a.ignore;_5.rtn=function(e1){return[e1];};_5.result=new b7.New();_5.result$1=bE.result();_5.resultP=new b8.New();_5.eff=new b_.New();_5.asyncResult=new bp.New();_5.asyncResultP=new b$.New();function ez(e1){return bi.concat("\n",e1);}_5.unindentStr=function(e1){return ez(bJ.unindent$1(e1));};function eB(e1){return bJ.splitByChar$1("\n",e1);}function eC(e1){var e2,e3;return ca.array(e1,{$:1,$0:0},{$:1,$0:(e2=0,(e3=T.length(e1)-2,J.Compare(e2,e3)===1?e2:e3))});}function eD(e1){return bi.concat("\n",e1);}_5.skipLastLine=(eA=function(e1){return eC(eB(e1));},function(e1){return eD(eA(e1));});function eF(e1){return e1+"T00:00:00";}_5.parseDateO2=(eE=cb.tryParseWith$1(function(e1){var e2,e3;e2=0;return[(e3=c6.TryParse(e1),e3!=null&&e3.$==1&&(e2=e3.$0,true)),e2];}),function(e1){return eE(eF(e1));});_5.parseDateO=cb.tryParseWith$1(function(e1){var e2,e3;e2=0;return[(e3=c6.TryParse(e1),e3!=null&&e3.$==1&&(e2=e3.$0,true)),e2];});_5.parseIntO=cb.tryParseWith$1(function(e1){var e2;e2=0;return[bZ.TryParseInt32(e1,{get:function(){return e2;},set:function(e3){e2=e3;}}),e2];});_5.parseInt64O=cb.tryParseWith$1(function(e1){var e2;e2=0;return[bZ.TryParseInt64(e1,{get:function(){return e2;},set:function(e3){e2=e3;}}),e2];});_5.parseSingleO=cb.tryParseWith$1(function(e1){var e2,e3;e2=0;return[(e3=a.Number(e1),a.isNaN(e3)?false:(e2=e3,true)),e2];});_5.parseDoubleO=cb.tryParseWith$1(function(e1){var e2,e3;e2=0;return[(e3=a.Number(e1),a.isNaN(e3)?false:(e2=e3,true)),e2];});_5.parseGuidO=cb.tryParseWith$1(function(e1){var e2;e2=null;return[bs.TryParse(e1,{get:function(){return e2;},set:function(e3){e2=e3;}}),e2];});_5["|Date|_|"]=cb.parseDateO$1();_5["|Int|_|"]=cb.parseIntO$1();_5["|Int64|_|"]=cb.parseInt64O$1();_5["|Single|_|"]=cb.parseSingleO$1();_5["|Double|_|"]=cb.parseDoubleO$1();_5["|Guid|_|"]=cb.parseGuidO$1();_5.serString=[cc.toJsonString,function(e1){return e1.tryString();}];_5.serFloat=[function(e1){return(function(e2){return function(e3){return e2(bC.prettyPrint(e3));};}(a.id))(e1);},function(e1){return e1.tryFloat();}];_5.serInt=[function(e1){return(function(e2){return function(e3){return e2(bC.prettyPrint(e3));};}(a.id))(e1);},function(e1){var e2;e2=e1.tryInt();return e2==null?null:{$:1,$0:o.toInt(e2.$0)};}];_5.serInt64=[function(e1){return function(e2){return e1(a.String(e2));};}(a.id),function(e1){return e1.tryInt();}];_5.serBool=[function(e1){return(function(e2){return function(e3){return e2(bC.prettyPrint(e3));};}(a.id))(e1);},function(e1){return e1.tryBool();}];function eG(e1){return(function(e2){return function(e3){return e2(bC.prettyPrint(e3));};}(a.id))(e1);}_5.serDate=[function(e1){return eG(a.id(e1));},function(e1){var e2;e2=e1.tryInt();return e2==null?null:{$:1,$0:e2.$0};}];_5.counter=1;_5.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";_5.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";_5.policies=by.ofArray([ce.SignIn,ce.SignUp,ce.EditProfile,ce.ResetPassword]);_5.premisasCalculo=bP.New(15,25,25,0,75,31,26,28);_5.telVacio=cf.New(cg.Movil,"","","","",false);_5.dirVacio=ch.New(bc.Error$1(""),ci.Habitacion,"","","",new cj({$:2,$0:""}),new ck({$:3,$0:""}),new cl({$:0,$0:""}));_5.tarVacio=cm.New("",cp.Visa,new co({$:0,$0:""}),cn.New(2000,1));_5.ctaVacio=bz.New("","",cq.Ahorro,new bB({$:0,$0:""}),new bA({$:0,$0:""}));_5.modeloVacio=_2.New(new _1({$:0,$0:""}),[],(eH=ev.now(),(new ev(eH)).getFullYear()),(eI=ev.now(),(new ev(eI)).getMonth()+1),M.premisasCalculo(),0);_5.correoVacio=bj.New("",null,null);_5.empty=(eJ=bW.New(null,"","","","",ck.USA,cr.Masculino,(new ev(2000,1-1,1)).getTime()),N.New(new _1({$:0,$0:""}),null,null,null,eJ,[],[],false,bx.Inactivo,bX.Dia01,bY.Regular,(new ev(2000,1-1,1)).getTime(),(new ev(2000,1-1,1)).getTime(),0,0,0,0,0,0,0,0));_5.serverEndPoint=r.Create(function(){return self.location.protocol==="http:"?"http://localhost:7071/api/":(function(e1){return function(e2){return e1("https://"+bC.toSafe(e2)+"/api/");};}(a.id))(self.location.host);});_5.originalProvider=cs.AjaxProvider();_5.getTokenOA=function(){var e1;e1=null;return cQ.Delay(function(){return cQ.Return(null);});};_5.rootdir="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\ProzperServer\\website";_5.TemplatesFileName="D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\ProzperServer\\website"+"\\indexDes.html";((function(e1){return function(e2){return e1(bC.toSafe(e2));};}(function(e1){eu.log(e1);}))("D:\\Abe\\CIPHERWorkspace\\FSharpStation\\projects\\ProzperServer\\website\\indexDes.html"));_5.appId=bi.StartsWith(self.location.host,"prozper0")?"76703639-1d21-4bc3-bd46-c764f5ea78ee":"70ad4f9b-9a2b-409e-9c1e-d04dbb2e7cf2";_5.applicationId=bR.storeValue("applicationId",bR.appId());_5.tenantName=bR.storeValue("tenantName","prozper");_5.ref=bR.storeValue("ref","");_5.extraQueryParms=bR.storeValue("extraQueryParms","mkt=es-us");_5.refreshBefore=bR.storeValue("refreshBefore","0");_5.createOnStart=bR.storeValue("createOnStart","1");_5.forceLogin=bR.storeValue("forceLogin","1");_5.signInPolicy=bR.storeValue("signInPolicy","B2C_1_SignIn");_5.signUpPolicy=bR.storeValue("signUpPolicy","B2C_1_Registrarse");_5.editProfilePolicy=bR.storeValue("editProfilePolicy","B2C_1_EditarPerfil");_5.resetPasswordPolicy=bR.storeValue("resetPasswordPolicy","B2C_1_PasswordReset");_5.policyType=bR.storeValue("policyType","SignIn");eK=bR.storageGetItem("preambleState");eK==="InPreamble"||(eK===""||eK===null)?bR.storeValue("preambleState","GoToSignIn"):void 0;_5.authority=bR.getAuthority(bR.tenantName(),bR.signInPolicy());_5.userO=i.Create$1(null);_5.agent=r.Create(function(){var e1,e2;e1=(e2=ct.New$1({$:1,$0:cu.New$1(bR.applicationId(),{$:1,$0:bR.authority()},{$:1,$0:false},null,null,null)},null,null,null),new self.Msal.UserAgentApplication(e2));e1.handleRedirectCallback(function(e3,e4){bR.redirectCallback(e3,e4);});return e1;});_5.getTokenO=(eM=cx.callA(function(e1){bc.print$1(e1);},bR.getTokenO0),function(){return eM.PostAndAsyncReply(function(e1){return[e1,null];},null);});_5.modeloV=i.Create$1(_2.New(new _1({$:0,$0:":"}),[],(eN=ev.now(),(new ev(eN)).getFullYear()),(eO=ev.now(),(new ev(eO)).getMonth()+1),M.premisasCalculo(),-2));_5.formasPagoAliadoV=i.Create$1([]);_5.invitacionesV=i.Create$1("");function eR(e1){var e2;e2=j.REGEX$2(j.rexEmail$1(),"gi",e1);return e2!=null&&e2.$==1?e2.$0:[];}function eS(e1){return bi.concat("\n",e1);}_5.emailsInvitarW=p.Map((eP=(eQ=function(e1){return bb.distinct(eR(e1));},function(e1){return bb.sort(eQ(e1));}),function(e1){return eS(eP(e1));}),m.invitacionesV().get_View());_5.invitacionesDisabledW=p.Map(function(e1){return e1===""?"disabled":"";},m.emailsInvitarW());_5.selAliadoIdOV=i.Create$1(null);_5.refAliadoIdOV=i.Create$1(null);_5.endPointV=cz.InstallHash(cy.DefaultEP,Y.r());p.Sink(function(e1){if(e1.$==1);else if(e1.$==2);else if(e1.$==4)a.showPDF(e1.$0);else if(e1.$==5)a.playVideo();else bR.checkUser();},m.endPointV().get_View());function eT(e1){return e1==="ProzperLyt.mainContent"?cy.DefaultEP:{$:3,$0:e1};}function eU(e1){if(!J.Equals(m.endPointV().Get(),e1))m.endPointV().Set(e1);}_5.contentVar=new cP.New(p.Map2(function(e1,e2){var e3,e4;return e2.$==0&&!J.Equals(bR.userO().Get(),null)?"ProzperLyt.mainContent":e2.$==3&&(!J.Equals(bR.userO().Get(),null)&&(e4=e2.$0,true))?e4:e2.$==2?"ProzperLyt.cntPreRegister":e2.$==4?"ProzperLyt.cntPDF":e2.$==5?"ProzperLyt.cntVideo":"ProzperLyt.cntFormaNoUser";},bR.userO().get_View(),m.endPointV().get_View()),function(e1){return eU(eT(e1));});_5.aliadoW=(eV=p.get_Do(),p.Bind(function(e1){var e2,e3;e2=e1.idAliado;e3=bb.tryFind(function(e4){return J.Equals(e4.id,e2);},e1.aliados);return p.Const(e3!=null&&e3.$==1?e3.$0:O.empty());},m.modeloV().get_View()));eX=(eW=i.Create$1(0),[eW.get_View(),function(e1){var e2;e2=null;return cQ.Delay(function(){eW.Set(eW.Get()+e1);return cQ.Bind(cQ.Sleep(50),function(){return cQ.Return(null);});});}]);_5.llamadas=eX[0];_5.addLlamadas=eX[1];cs.set_EndPoint(cA.serverEndPoint().f()+"rpc/rpc");_5.shouldRefresh=true;p.Sink(function(){bq.refrescarData(true);},bR.userO().get_View());cQ.Start((eY=null,cQ.Delay(function(){return cQ.While(function(){return true;},cQ.Delay(function(){return cQ.Bind(cQ.Sleep(5*60*1000),function(){return cQ.Return(null);});}));})),null);try{self.document.addEventListener("visibilityChange",function(){return null;},false);}catch(e1){null;}_5.paises=i.Create$1([]);_5.estados=i.Create$1([]);_5.tiposDir=i.Create$1([]);_5.tiposTel=i.Create$1([]);_5.generos=i.Create$1([]);_5.tiposCta=i.Create$1([]);_5.tiposTar=i.Create$1([]);_5.statuses=i.Create$1([]);_5.aniosV=i.Create$1([]);_5.mesesV=i.Create$1([]);_5.tiposAr=i.Create$1([]);_5.statusAr=i.Create$1([]);_0.iterA((eZ=bo.asyncResult(),eZ.Run(eZ.Delay(function(){return eZ.Bind$1(_0.obtenerUnions(),function(e2){bt.paises().Set(e2[0]);bt.estados().Set(e2[1]);bt.tiposDir().Set(e2[2]);bt.tiposTel().Set(e2[3]);bt.generos().Set(e2[4]);bt.tiposCta().Set(e2[5]);bt.tiposTar().Set(e2[6]);bt.statuses().Set(e2[7]);bt.aniosV().Set(e2[9]);bt.mesesV().Set(e2[8]);bt.tiposAr().Set(e2[10]);bt.statusAr().Set(e2[11]);return eZ.Zero();});}))));_5.ftel=[function(e2){return e2.$==2?{$:1,$0:e2.$0}:null;},function(e2){return{$:2,$0:e2};}];_5.fcor=[function(e2){return e2.$==1?{$:1,$0:e2.$0}:null;},function(e2){return{$:1,$0:e2};}];_5.fdir=[function(e2){return e2.$==0?{$:1,$0:e2.$0}:null;},function(e2){return{$:0,$0:e2};}];_5.mensajes=i.Create$1("");_5.firmanteV=i.Create$1("");_5.fechaHoraV=i.Create$1("");_5.locationV=i.Create$1({});_5.firmadoV=i.Create$1(false);cQ.Start((e0=null,cQ.Delay(function(){return cQ.While(function(){return true;},cQ.Delay(function(){return cQ.Bind(cQ.Sleep(1000),function(){var e2;e2=bc["String.Left$1"](function(e3){return e3.getFullYear()+"-"+("0"+(e3.getMonth()+1)).slice(-2)+"-"+("0"+e3.getDate()).slice(-2)+" "+("0"+e3.getHours()).slice(-2)+":"+("0"+e3.getMinutes()).slice(-2)+":"+("0"+e3.getSeconds()).slice(-2)+":"+("00"+e3.getMilliseconds()).slice(-3);}(new ev(ev.now())),19);bO.fechaHoraV().Set(e2);return cQ.Zero();});}));})),null);_5.uploaded=function(e2,e3){return bc.print$1(e3);};_5.cuentaPagoO=i.Create$1(null);_5.cuentaAutorizar=i.Create$1(Z.TextNode("No hay cuenta seleccionada"));_5.titular=i.Create$1("");_5.pid=new cB({$:0,$0:""});_5.ftar=[function(e2){var e3;e3=e2.cuentaPago;return e3.$==1?{$:1,$0:[e3.$0,x.msg(e2),e2.authorizeIdR.$==0]}:null;},function(e2){return function(e3){var e4;e4=new bN({$:1,$0:e3});return bD.New(e2.nombre,bc.Error$1(""),e4,e2.subscripcion);};}];_5.fcta=[function(e2){var e3;e3=e2.cuentaPago;return e3.$==0?{$:1,$0:[e3.$0,x.msg(e2),e2.authorizeIdR.$==0]}:null;},function(e2){return function(e3){var e4;e4=new bN({$:0,$0:e3});return bD.New(e2.nombre,bc.Error$1(""),e4,e2.subscripcion);};}];_5.transaccionesW=p.MapAsync(function(){var e2,e3;function e4(e5){return cQ.Return(e5);}return cQ.Bind(_0.obtenerTransaccionesPara(n.get_LoggedId()),(e2=(e3=[],function(e5){return bE.defaultValue(e3,e5);}),function(e5){return e4(e2(e5));}));},m.modeloV().get_View());_5.expandedOV=i.Create$1(null);_5.aliadoIdW=p.Map2(function(e2,e3){return e2==null?e3.id:e2.$0;},A.expandedOV().get_View(),m.aliadoW());_5.FormaW9="/#/Pdf/blob/Inscripcion/07 Form W-9.pdf";_5.FormaW8BEN="/#/Pdf/blob/Inscripcion/05 Form W-8BEN.pdf";_5.FormasPago="/#/Content/ProzperLyt.cntFormaFormasPago";_5.FormaContrato="/#/Content/ProzperLyt.cntFormaContrato";_5.Subir="/#/Content/ProzperLyt.cntSubirDocumentos";_5.definicion=[];_5.i_archivos=y.agregarCampo(1,false,function(e2){return e2.docPendientes===0?(function(e3){return function(e4){return e3(bi.PadLeft(a.String(e4),2));};}(a.id))(e2.documentos):(((er.Curried3(function(e3,e4,e5){return e3("("+bi.PadLeft(a.String(e4),2)+")"+bi.PadLeft(a.String(e5),2));}))(a.id))(e2.docPendientes))(e2.documentos);});_5.i_nombre=y.agregarCampo(14,true,function(e2){return O.nombre(e2.datosPersonales);});_5.i_correo=y.agregarCampo(13,true,O.correo);_5.i_status=y.agregarCampo(3,true,function(e2){return(function(e3){return function(e4){return e3(X.p(e4));};}(a.id))(e2.status);});_5.i_influyente=y.agregarCampo(4,false,function(e2){var e3;e3=e2.influyente;return e3==null?"":e3.$0;});_5.i_tipo=y.agregarCampo(5,true,function(e2){return(function(e3){return function(e4){return e3(X.p$1(e4));};}(a.id))(e2.tipo);});_5.i_referido=y.agregarCampo(6,true,function(e2){return y.nombreReferidor(e2.idPadreO);});_5.i_nivel=y.agregarCampo(7,true,function(e2){return(function(e3){return function(e4){return e3(bi.PadLeft(a.String(e4),9));};}(a.id))(e2.nivel);});_5.i_referidos=y.agregarCampo(8,true,function(e2){return(function(e3){return function(e4){return e3(bi.PadLeft(bC.toSafe(e4),9));};}(a.id))(y.referidos(e2));});_5.i_descendientes=y.agregarCampo(2,false,function(e2){return(function(e3){return function(e4){return e3(bi.PadLeft(bC.toSafe(e4),9));};}(a.id))(y.descendientes(e2));});_5.i_comision=y.agregarCampo(9,true,function(e2){return(function(e3){return function(e4){return e3(bi.PadLeft(bC.toSafe(e4),9));};}(a.id))(y.comision(e2.comision));});_5.i_diaPago=y.agregarCampo(10,true,function(e2){return bc["String.Right$1"]((function(e3){return function(e4){return e3(X.p$2(e4));};}(a.id))(e2.diaPago),2);});_5.i_desde=y.agregarCampo(11,true,function(e2){return bI.toYYYYMMDD("-",e2.fechaRegistro);});_5.i_Id=y.agregarCampo(12,true,function(e2){return(function(e3){return function(e4){return e3(bC.toSafe(e4));};}(a.id))(e2.id.get_Id());});_5.layoutName="ProzperLyt";_5.appName="Prozper";_5.influencerV=i.Create$1("");_5.influencerClassW=p.MapAsync(function(e2){var e3;e3=null;return cQ.Delay(function(){return cQ.Bind(_0.obtenerIdInfluyente(e2),function(e4){return e4.$==0?cQ.Return("mui-btn--primary"):cQ.Return("");});});},e.influencerV().get_View());};_6=h.ListModel=er.Class({Set:function(ez){this["var"].Set(this.storage.SSet(ez));this.ObsoleteAll();},Append:function(ez){var eA,eB,eC,eD;eA=this;eB=this["var"].Get();eC=this.key(ez);eD=T.tryFindIndex(function(eE){return J.Equals(eA.key(eE),eC);},eB);eD!=null&&eD.$==1?this["var"].Set(this.storage.SSetAt(eD.$0,ez,eB)):this["var"].Set(this.storage.SAppend(ez,eB));this.ObsoleteKey(eC);},ObsoleteAll:function(){bb.iter(function(ez){_4.Obsolete(ez.V);},this.it);this.it.Clear();},TryFindByKey:function(ez){var eA;eA=this;return T.tryFind(function(eB){return J.Equals(eA.key(eB),ez);},this["var"].Get());},ObsoleteKey:function(ez){var eA,eB;eA=(eB=null,[this.it.TryGetValue(ez,{get:function(){return eB;},set:function(eC){eB=eC;}}),eB]);eA[0]?(_4.Obsolete(eA[1]),this.it.Remove(ez)):void 0;},FindByKey:function(ez){var eA;eA=this;return T.find(function(eB){return J.Equals(eA.key(eB),ez);},this["var"].Get());},UpdateBy:function(ez,eA){var eB,eC,eD,eE,eF;eB=this;eC=this["var"].Get();eD=T.tryFindIndex(function(eG){return J.Equals(eB.key(eG),eA);},eC);eD!=null&&eD.$==1?(eE=eD.$0,eF=ez(T.get(eC,eE)),eF!=null&&eF.$==1?(this["var"].Set(this.storage.SSetAt(eE,eF.$0,eC)),this.ObsoleteKey(eA)):void 0):void 0;},MapLens:function(ez){var eA;eA=this;return p.MapSeqCachedViewBy(eA.key,function(eB,eC){return ez(eB,eA["LensInto'"](a.id,function(eD,eE){return eE;},eB,eC));},this["var"].get_View());},"LensInto'":function(ez,eA,eB,eC){var eD,eE,eF;eD=this;eE=b6.Id();eF=new q({Get:function(){return ez(eD.FindByKey(eB));},Set:function(eG){return eD.UpdateBy(function(eH){return{$:1,$0:eA(eH,eG)};},eB);},SetFinal:function(eG){return this.Set(eG);},Update:function(eG){return eD.UpdateBy(function(eH){return{$:1,$0:eA(eH,eG(ez(eH)))};},eB);},UpdateMaybe:function(eG){return eD.UpdateBy(function(eH){var eI;eI=eG(ez(eH));return eI==null?null:{$:1,$0:eA(eH,eI.$0)};},eB);},get_View:function(){return eC;},get_Id:function(){return eE;}});q.New.call(eF);return eF;},GetEnumerator:function(){return cE.Get(this["var"].Get());},GetEnumerator0:function(){return cE.Get0(this["var"].Get());}},g,_6);_6.New$1=er.Ctor(function(ez){_6.New$2.call(this,ez,[]);},_6);_6.New=er.Ctor(function(ez,eA){_6.New$3.call(this,ez,i.Create$1(T.ofSeq(bb.distinctBy(ez,eA.SInit()))),eA);},_6);_6.New$2=er.Ctor(function(ez,eA){var eB;eB=T.ofSeq(eA);_6.New$3.call(this,ez,i.Create$1(eB),cT.InMemory(eB));},_6);_6.New$3=er.Ctor(function(ez,eA,eB){g.New.call(this);this.key=ez;this["var"]=eA;this.storage=eB;this.v=p.Map(function(eC){return eC.slice();},this["var"].get_View());this.it=new b1.New$5();},_6);_7.New=function(ez,eA){return{varName:ez,varVar:eA};};_8.New=function(ez,eA){return{viwName:ez,viwView:eA};};_9.New=function(ez,eA){return{docName:ez,docDoc:eA};};_.NewFromSeq=function(ez){var eA,eB,eC;eA={};eB=cE.Get(ez);try{while(eB.MoveNext()){eC=eB.Current();eA[eC[0]]=eC[1];}}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}return eA;};ba.New=function(ez,eA,eB){return{c:ez,v:eA,f:eB};};bb.sortWith=function(ez,eA){return bb.delay(function(){var eB;eB=T.ofSeq(eA);T.sortInPlaceWith(ez,eB);return eB;});};bb.filter=function(ez,eA){return{GetEnumerator:function(){var eB;eB=cE.Get(eA);return new cF.New(null,null,function(eC){var eD,eE,eF;eD=eB.MoveNext();eE=eB.Current();eF=false;while(eD)if(ez(eE)){eC.c=eE;eF=true;eD=false;}else if(eB.MoveNext())eE=eB.Current();else eD=false;return eF;},function(){eB.Dispose();});}};};bb.isEmpty=function(ez){var eA;eA=cE.Get(ez);try{return!eA.MoveNext();}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}};bb.map=function(ez,eA){return{GetEnumerator:function(){var eB;eB=cE.Get(eA);return new cF.New(null,null,function(eC){return eB.MoveNext()&&(eC.c=ez(eB.Current()),true);},function(){eB.Dispose();});}};};bb.delay=function(ez){return{GetEnumerator:function(){return cE.Get(ez());}};};bb.append=function(ez,eA){return{GetEnumerator:function(){var eB,eC;eB=cE.Get(ez);eC=[true];return new cF.New(eB,null,function(eD){var eE;return eD.s.MoveNext()?(eD.c=eD.s.Current(),true):(eE=eD.s,!J.Equals(eE,null)?eE.Dispose():void 0,eD.s=null,eC[0]&&(eC[0]=false,eD.s=cE.Get(eA),eD.s.MoveNext()?(eD.c=eD.s.Current(),true):(eD.s.Dispose(),eD.s=null,false)));},function(eD){var eE;eE=eD.s;!J.Equals(eE,null)?eE.Dispose():void 0;});}};};bb.collect=function(ez,eA){return bb.concat(bb.map(ez,eA));};bb.min=function(ez){var eA,eB,eC;eA=cE.Get(ez);try{if(!eA.MoveNext())bb.seqEmpty();eB=eA.Current();while(eA.MoveNext()){eC=eA.Current();J.Compare(eC,eB)===-1?eB=eC:void 0;}return eB;}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}};bb.tryPick=function(ez,eA){var eB,eC;eB=cE.Get(eA);try{eC=null;while(J.Equals(eC,null)&&eB.MoveNext())eC=ez(eB.Current());return eC;}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}};bb.tryFind=function(ez,eA){var eB,eC,eD;eB=cE.Get(eA);try{eC=null;while(eC==null&&eB.MoveNext()){eD=eB.Current();ez(eD)?eC={$:1,$0:eD}:void 0;}return eC;}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}};bb.exists=function(ez,eA){var eB,eC;eB=cE.Get(eA);try{eC=false;while(!eC&&eB.MoveNext())eC=ez(eB.Current());return eC;}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}};bb.sumBy=function(ez,eA){return bb.fold(function(eB,eC){return eB+ez(eC);},0,eA);};bb.length=function(ez){var eA,eB;eA=0;eB=cE.Get(ez);try{while(eB.MoveNext())eA=eA+1;return eA;}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}};bb.zip=function(ez,eA){return bb.map2(function(eB,eC){return[eB,eC];},ez,eA);};bb.choose=function(ez,eA){return bb.collect(function(eB){var eC;eC=ez(eB);return eC==null?cH.Empty:by.ofArray([eC.$0]);},eA);};bb.distinct=function(ez){return bb.distinctBy(a.id,ez);};bb.sort=function(ez){return bb.sortBy(a.id,ez);};bb.groupBy=function(ez,eA){return bb.delay(function(){return T.groupBy(ez,T.ofSeq(eA));});};bb.concat=function(ez){return{GetEnumerator:function(){var eA;eA=cE.Get(ez);return new cF.New(null,null,function(eB){var eC;while(true){eC=eB.s;if(J.Equals(eC,null)){if(eA.MoveNext()){eB.s=cE.Get(eA.Current());eB=eB;}else{eA.Dispose();return false;}}else if(eC.MoveNext()){eB.c=eC.Current();return true;}else{eB.Dispose();eB.s=null;eB=eB;}}},function(eB){var eC;eC=eB.s;!J.Equals(eC,null)?eC.Dispose():void 0;!J.Equals(eA,null)?eA.Dispose():void 0;});}};};bb.seqEmpty=function(){return o.FailWith("The input sequence was empty.");};bb.indexed=function(ez){return bb.mapi(function(eA,eB){return[eA,eB];},ez);};bb.fold=function(ez,eA,eB){var eC,eD;eC=eA;eD=cE.Get(eB);try{while(eD.MoveNext())eC=ez(eC,eD.Current());return eC;}finally{if(typeof eD=="object"&&"Dispose"in eD)eD.Dispose();}};bb.map2=function(ez,eA,eB){return{GetEnumerator:function(){var eC,eD;eC=cE.Get(eA);eD=cE.Get(eB);return new cF.New(null,null,function(eE){return eC.MoveNext()&&eD.MoveNext()&&(eE.c=ez(eC.Current(),eD.Current()),true);},function(){eC.Dispose();eD.Dispose();});}};};bb.sortBy=function(ez,eA){return bb.delay(function(){var eB;eB=T.ofSeq(eA);T.sortInPlaceBy(ez,eB);return eB;});};bb.tryFindIndex=function(ez,eA){var eB,eC,eD;eB=cE.Get(eA);try{eC=true;eD=0;while(eC&&eB.MoveNext())if(ez(eB.Current()))eC=false;else eD=eD+1;return eC?null:{$:1,$0:eD};}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}};bb.distinctBy=function(ez,eA){return{GetEnumerator:function(){var eB,eC;eB=cE.Get(eA);eC=new b2.New$3();return new cF.New(null,null,function(eD){var eE,eF;if(eB.MoveNext()){eE=eB.Current();eF=eC.Add(ez(eE));while(!eF&&eB.MoveNext()){eE=eB.Current();eF=eC.Add(ez(eE));}return eF&&(eD.c=eE,true);}else return false;},function(){eB.Dispose();});}};};bb.mapi=function(ez,eA){return bb.map2(ez,bb.initInfinite(a.id),eA);};bb.iter=function(ez,eA){var eB;eB=cE.Get(eA);try{while(eB.MoveNext())ez(eB.Current());}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}};bb.init=function(ez,eA){return bb.take(ez,bb.initInfinite(eA));};bb.pairwise=function(ez){return bb.map(function(eA){return[T.get(eA,0),T.get(eA,1)];},bb.windowed(2,ez));};bb.forall2=function(ez,eA,eB){return!bb.exists2(function(eC,eD){return!ez(eC,eD);},eA,eB);};bb.iteri=function(ez,eA){var eB,eC;eB=0;eC=cE.Get(eA);try{while(eC.MoveNext()){ez(eB,eC.Current());eB=eB+1;}}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bb.initInfinite=function(ez){return{GetEnumerator:function(){return new cF.New(0,null,function(eA){eA.c=ez(eA.s);eA.s=eA.s+1;return true;},void 0);}};};bb.take=function(ez,eA){ez<0?bb.nonNegative():void 0;return{GetEnumerator:function(){var eB;eB=[cE.Get(eA)];return new cF.New(0,null,function(eC){var eD;eC.s=eC.s+1;return eC.s>ez?false:(eD=eB[0],J.Equals(eD,null)?bb.insufficient():eD.MoveNext()?(eC.c=eD.Current(),eC.s===ez?(eD.Dispose(),eB[0]=null):void 0,true):(eD.Dispose(),eB[0]=null,bb.insufficient()));},function(){var eC;eC=eB[0];!J.Equals(eC,null)?eC.Dispose():void 0;});}};};bb.skip=function(ez,eA){return{GetEnumerator:function(){var eB;eB=cE.Get(eA);return new cF.New(true,null,function(eC){var eD,eE;if(eC.s){for(eD=1,eE=ez;eD<=eE;eD++)if(!eB.MoveNext())bb.insufficient();eC.s=false;}else null;return eB.MoveNext()&&(eC.c=eB.Current(),true);},function(){eB.Dispose();});}};};bb.nth=function(ez,eA){var eB,eC;if(ez<0)o.FailWith("negative index requested");eB=-1;eC=cE.Get(eA);try{while(eB<ez){!eC.MoveNext()?bb.insufficient():void 0;eB=eB+1;}return eC.Current();}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bb.windowed=function(ez,eA){ez<=0?o.FailWith("The input must be positive."):void 0;return bb.delay(function(){return bb.enumUsing(cE.Get(eA),function(eB){var eC;eC=[];return bb.append(bb.enumWhile(function(){return eC.length<ez&&eB.MoveNext();},bb.delay(function(){eC.push(eB.Current());return[];})),bb.delay(function(){return eC.length===ez?bb.append([eC.slice(0)],bb.delay(function(){return bb.enumWhile(function(){return eB.MoveNext();},bb.delay(function(){eC.shift();eC.push(eB.Current());return[eC.slice(0)];}));})):[];}));});});};bb.head=function(ez){var eA;eA=cE.Get(ez);try{return eA.MoveNext()?eA.Current():bb.insufficient();}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}};bb.exists2=function(ez,eA,eB){var eC,eD,eE,eF;eC=cE.Get(eA);try{eE=cE.Get(eB);try{eF=false;while(!eF&&eC.MoveNext()&&eE.MoveNext())eF=ez(eC.Current(),eE.Current());eD=eF;}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}return eD;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bb.compareWith=function(ez,eA,eB){var eC,eD,eE,eF,eG;eC=cE.Get(eA);try{eE=cE.Get(eB);try{eF=0;eG=true;while(eG&&eF===0)if(eC.MoveNext())eF=eE.MoveNext()?ez(eC.Current(),eE.Current()):1;else if(eE.MoveNext())eF=-1;else eG=false;eD=eF;}finally{if(typeof eE=="object"&&"Dispose"in eE)eE.Dispose();}return eD;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}};bb.unfold=function(ez,eA){return{GetEnumerator:function(){return new cF.New(eA,null,function(eB){var eC;eC=ez(eB.s);return eC==null?false:(eB.c=eC.$0[0],eB.s=eC.$0[1],true);},void 0);}};};bb.max=function(ez){var eA,eB,eC;eA=cE.Get(ez);try{if(!eA.MoveNext())bb.seqEmpty();eB=eA.Current();while(eA.MoveNext()){eC=eA.Current();J.Compare(eC,eB)===1?eB=eC:void 0;}return eB;}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}};bb.forall=function(ez,eA){return!bb.exists(function(eB){return!ez(eB);},eA);};bd.op_AmpGreater=function(ez,eA,eB,eC){var eD;eD=ez(eB,eC);return eD===0?eA(eB,eC):eD;};bd.asc=function(ez,eA,eB){return J.Compare(ez(eA),ez(eB));};bd.desc=function(ez,eA,eB){return J.Compare(ez(eB),ez(eA));};be.New=function(ez,eA,eB,eC,eD,eE){return{hijosDe:ez,nivelDe:eA,aliado:eB,aliadoO:eC,hijos:eD,descendientes:eE};};bg=bf.FSharpSet=er.Class({Contains:function(ez){return cG.Contains(ez,this.tree);},Remove:function(ez){return new bg.New$1(cG.Remove(ez,this.tree));},Add:function(ez){return new bg.New$1(cG.Add(ez,this.tree));},Equals:function(ez){return this.get_Count()===ez.get_Count()&&bb.forall2(J.Equals,this,ez);},GetEnumerator$1:function(){return cE.Get(cG.Enumerate(false,this.tree));},get_Count:function(){var ez;ez=this.tree;return ez==null?0:ez.Count;},GetHashCode:function(){return -1741749453+J.Hash(T.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(ez){return bb.compareWith(J.Compare,this,ez);},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,bg);bg.op_Subtraction=function(ez,eA){return bh.Filter(function(eB){return!eA.Contains(eB);},ez);};bg.New=er.Ctor(function(ez){bg.New$1.call(this,cG.OfSeq(ez));},bg);bg.New$1=er.Ctor(function(ez){g.New.call(this);this.tree=ez;},bg);bh.Filter=function(ez,eA){var eB;return new bg.New$1((eB=T.ofSeq(bb.filter(ez,eA)),cG.Build(eB,0,eB.length-1)));};bi.PadLeft=function(ez,eA){return bi.PadLeftWith(ez,eA," ");};bi.concat=function(ez,eA){return T.ofSeq(eA).join(ez);};bi.PadLeftWith=function(ez,eA,eB){return eA>ez.length?a.Array(eA-ez.length+1).join(eB)+ez:ez;};bi.Trim=function(ez){return ez.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bi.Substring=function(ez,eA,eB){return ez.substr(eA,eB);};bi.Replace=function(ez,eA,eB){function eC(eD){var eE,eF,eG;eE=eD.indexOf(eA);return eE!==-1?(eF=bi.ReplaceOnce(eD,eA,eB),(eG=eE+eB.length,bi.Substring(eF,0,eE+eB.length)+eC(eF.substring(eG)))):eD;}return eC(ez);};bi.SplitChars=function(ez,eA,eB){return bi.Split(ez,new a.RegExp("["+bi.RegexEscape(eA.join(""))+"]"),eB);};bi.StartsWith=function(ez,eA){return ez.substring(0,eA.length)==eA;};bi.ReplaceOnce=function(ez,eA,eB){return ez.replace(eA,eB);};bi.Split=function(ez,eA,eB){return eB===1?T.filter(function(eC){return eC!=="";},bi.SplitWith(ez,eA)):bi.SplitWith(ez,eA);};bi.RegexEscape=function(ez){return ez.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bi.IsNullOrEmpty=function(ez){return ez==null||ez=="";};bi.SplitWith=function(ez,eA){return ez.split(eA);};bi.replicate=function(ez,eA){return T.create(ez,eA).join("");};bi.ReplaceChar=function(ez,eA,eB){return bi.Replace(ez,eA,eB);};bi.SplitStrings=function(ez,eA,eB){return bi.Split(ez,new a.RegExp(bi.concat("|",T.map(bi.RegexEscape,eA))),eB);};bi.forall=function(ez,eA){return bb.forall(ez,bi.protect(eA));};bi.protect=function(ez){return ez===null?"":ez;};bi.Join=function(ez,eA){return eA.join(ez);};bj=M.CorreoElectronico=er.Class({toString:function(){return this.email;}},null,bj);bj.New=function(ez,eA,eB){return new bj({email:ez,enviado:eA,recibido:eB});};bk.formaDoc=function(ez){var eA,eB,eC,eD,eE,eF;eA=(eB=(eC=Z.EmbedView(p.Map(bt.crearOptions,bt.generos().get_View())),U.Make().WithHole({$:0,$0:"generos",$1:eC})),(eD=V.CompleteHoles(eB.k,eB.h,[["nombres",0],["apellidos",0],["fechanacimiento",0],["genero",0]]),(eE=new S.New(eD[1],W.datospersonales(eD[0])),(eB.i=eE,eE))));p.Sink(function(eG){var eH;if(eG!=null&&eG.$==1){eH=eG.$0;eA.Hole("nombres").Set(bi.Trim(eH.nombre1+" "+eH.nombre2));eA.Hole("apellidos").Set(bi.Trim(eH.apellido1+" "+eH.apellido2));eA.Hole("fechanacimiento").Set(bI.toYYYYMMDD("-",eH.fechaNacimiento));eA.Hole("genero").Set((function(eI){return function(eJ){return eI(X.p$14(eJ));};}(a.id))(eH.genero));}},ez.get_View());eF=p.Apply(p.Apply(p.Map2(function(eG,eH){return function(eI){return function(eJ){return bb.map(function(eK){return eK[1];},bb.filter(function(eK){return eK[0];},by.ofArray([[bi.Trim(eG)==="","Nombres"],[bi.Trim(eH)==="","Apellidos"],[bi.Trim(eI)==="","Fecha de Nacimiento"],[bi.Trim(eJ)==="","Genero"]])));};};},eA.Hole("nombres").get_View(),eA.Hole("apellidos").get_View()),eA.Hole("fechanacimiento").get_View()),eA.Hole("genero").get_View());p.Sink(function(eG){if(!J.Equals(ez.Get(),eG))ez.Set(eG);},p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eG,eH){return er.Curried(function(eI,eJ,eK,eL,eM){return!bb.isEmpty(eG)?null:bt.alertIfNone("Genero",cr.tryParse(eH),function(eN){return bt.alertIfNone("Fecha incorrecta",(cb.parseDateO2$1())(eI),function(eO){return{$:1,$0:bW.New(null,T.get(bi.SplitChars(bi.Trim(eJ),[" "],0),0),bi.concat(" ",ca.array(bi.SplitChars(bi.Trim(eK),[" "],0),{$:1,$0:1},null)),T.get(bi.SplitChars(bi.Trim(eL),[" "],0),0),bi.concat(" ",ca.array(bi.SplitChars(bi.Trim(eM),[" "],0),{$:1,$0:1},null)),new ck({$:3,$0:""}),eN,eO)};});});},5);},eF,eA.Hole("genero").get_View()),eA.Hole("fechanacimiento").get_View()),eA.Hole("nombres").get_View()),eA.Hole("nombres").get_View()),eA.Hole("apellidos").get_View()),eA.Hole("apellidos").get_View()));return[eF,eA.get_Doc()];};bl.formaDoc=function(ez){var eA,eB,eC,eD,eE,eF,eG;eA=i.Create$1("");eB=(eC=U.Make().WithHole({$:2,$0:"mensaje",$1:eA.get_View()}),(eD=V.CompleteHoles(eC.k,eC.h,[["correo",0],["confirmarcorreo",0]]),(eE=new S.New(eD[1],W.correo(eD[0])),(eC.i=eE,eE))));eF=ez.Get();eF!=null&&eF.$==1?eB.Hole("confirmarcorreo").Set(a.String(eF.$0)):void 0;p.Sink(function(eH){eA.Set(eH);},p.Apply(p.Apply(p.Map2(function(eH,eI){return function(eJ){return function(eK){return bi.Trim(eH)===""||bi.Trim(eI)===""||bi.Trim(eJ)===bi.Trim(eK)?"":"Correos no son iguales";};};},eB.Hole("correo").get_View(),eB.Hole("confirmarcorreo").get_View()),eB.Hole("correo").get_View()),eB.Hole("confirmarcorreo").get_View()));p.Sink(function(eH){if(eH!=null&&eH.$==1)eB.Hole("correo").Set(eH.$0.email);},ez.get_View());eG=p.Apply(p.Apply(p.Map2(function(eH,eI){return function(eJ){return function(eK){return bb.map(function(eL){return eL[1];},bb.filter(function(eL){return eL[0];},by.ofArray([[bi.Trim(eH)==="","Correo"],[bi.Trim(eI)==="","ConfirmarCorreo"],[eJ!=="",eK]])));};};},eB.Hole("correo").get_View(),eB.Hole("confirmarcorreo").get_View()),eA.get_View()),eA.get_View());p.Sink(function(eH){if(!J.Equals(ez.Get(),eH))ez.Set(eH);},p.Map2(function(eH,eI){var eJ,eK,eL,eM;return!bb.isEmpty(eH)?null:(eJ=(eK=ez.Get(),(eL={$:1,$0:M.correoVacio()},eK==null?eL:eK)),eJ==null?null:{$:1,$0:(eM=eJ.$0,bj.New(eI,eM.enviado,eM.recibido))});},eG,eB.Hole("correo").get_View()));return[eG,eB.get_Doc()];};bm.formaDoc=function(ez){var eA,eB,eC,eD,eE,eF;eA=(eB=(eC=Z.EmbedView(p.Map(bt.crearOptions,bt.tiposTel().get_View())),U.Make().WithHole({$:0,$0:"tipos",$1:eC})),(eD=V.CompleteHoles(eB.k,eB.h,[["tipotelefono",0],["codigopais",0],["codigoarea",0],["telefono",0],["extension",0]]),(eE=new S.New(eD[1],W.telefono(eD[0])),(eB.i=eE,eE))));p.Sink(function(eG){var eH;if(eG!=null&&eG.$==1){eH=eG.$0;eA.Hole("codigoarea").Set(eH.codigoArea);eA.Hole("codigopais").Set(eH.codigoPais);eA.Hole("telefono").Set(eH.numero);eA.Hole("extension").Set(eH.extension);eA.Hole("tipotelefono").Set((function(eI){return function(eJ){return eI(a.String(eJ));};}(a.id))(eH.tipoTelefono));}},ez.get_View());eF=p.Apply(p.Map2(function(eG,eH){return function(eI){return bb.map(function(eJ){return eJ[1];},bb.filter(function(eJ){return eJ[0];},by.ofArray([[bi.Trim(eG)==="","CodigoPais"],[bi.Trim(eH)==="","Telefono"],[bi.Trim(eI)==="","TipoTelefono"]])));};},eA.Hole("codigopais").get_View(),eA.Hole("telefono").get_View()),eA.Hole("tipotelefono").get_View());p.Sink(function(eG){if(!J.Equals(ez.Get(),eG))ez.Set(eG);},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eG,eH){return er.Curried(function(eI,eJ,eK,eL){return!bb.isEmpty(eG)?null:bt.alertIfNone("TipoTelefono",(cg.get_tryParse())(bi.Trim(eH)),function(eM){var eN;return{$:1,$0:(eN=bi.Trim(eI),cf.New(eM,bi.Trim(eJ),eN,bi.Trim(eK),bi.Trim(eL),false))};});},4);},eF,eA.Hole("tipotelefono").get_View()),eA.Hole("codigoarea").get_View()),eA.Hole("codigopais").get_View()),eA.Hole("telefono").get_View()),eA.Hole("extension").get_View()));return[eF,eA.get_Doc()];};bn.formaDoc=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH;eA=(eB=(eC=Z.EmbedView(p.Map(bt.crearOptions,bt.tiposDir().get_View())),(eD=Z.EmbedView(p.Map(bt.crearOptions,bt.estados().get_View())),(eE=Z.EmbedView(p.Map(bt.crearOptions,bt.paises().get_View())),U.Make().WithHole({$:0,$0:"paises",$1:eE})).WithHole({$:0,$0:"estados",$1:eD})).WithHole({$:0,$0:"tipos",$1:eC})),(eF=V.CompleteHoles(eB.k,eB.h,[["tipodireccion",0],["direccion1",0],["direccion2",0],["ciudad",0],["estado",0],["codigopostal",0],["pais",0]]),(eG=new S.New(eF[1],W.direccion(eF[0])),(eB.i=eG,eG))));p.Sink(function(eI){var eJ;if(eI!=null&&eI.$==1){eJ=eI.$0;eA.Hole("direccion1").Set(eJ.linea1);eA.Hole("direccion2").Set(eJ.linea2);eA.Hole("ciudad").Set(eJ.ciudad);eA.Hole("estado").Set((function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.estado));eA.Hole("pais").Set((function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.pais));eA.Hole("codigopostal").Set((function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.zonaPostal));eA.Hole("tipodireccion").Set((function(eK){return function(eL){return eK(a.String(eL));};}(a.id))(eJ.tipoDireccion));}},ez.get_View());eH=p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eI,eJ){return er.Curried(function(eK,eL,eM,eN){return bb.map(function(eO){return eO[1];},bb.filter(function(eO){return eO[0];},by.ofArray([[bi.Trim(eI)==="","Direccion1"],[bi.Trim(eJ)==="","Ciudad"],[bi.Trim(eK)==="","Estado"],[bi.Trim(eL)==="","Pais"],[bi.Trim(eM)==="","CodigoPostal"],[bi.Trim(eN)==="","TipoDireccion"]])));},4);},eA.Hole("direccion1").get_View(),eA.Hole("ciudad").get_View()),eA.Hole("estado").get_View()),eA.Hole("pais").get_View()),eA.Hole("codigopostal").get_View()),eA.Hole("tipodireccion").get_View());p.Sink(function(eI){if(!J.Equals(ez.Get(),eI))ez.Set(eI);},p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eI,eJ){return er.Curried(function(eK,eL,eM,eN,eO,eP,eQ){return!bb.isEmpty(eI)?null:bt.alertIfNone("TipoDireccion",ci.tryParse(bi.Trim(eJ)),function(eR){return bt.alertIfNone("Estado",cj.tryParse(bi.Trim(eK)),function(eS){return bt.alertIfNone("Pais",ck.tryParse(bi.Trim(eL)),function(eT){return bt.alertIfNone("CodigoPostal",cl.tryParse(bi.Trim(eM)),function(eU){var eV;return{$:1,$0:ch.New((eV=eQ==null?null:{$:1,$0:eQ.$0.authorizeIdR},eV==null?bc.Error$1(""):eV.$0),eR,bi.Trim(eN),bi.Trim(eO),bi.Trim(eP),eS,eT,eU)};});});});});},7);},eH,eA.Hole("tipodireccion").get_View()),eA.Hole("estado").get_View()),eA.Hole("pais").get_View()),eA.Hole("codigopostal").get_View()),eA.Hole("direccion1").get_View()),eA.Hole("direccion2").get_View()),eA.Hole("ciudad").get_View()),ez.get_View()));return[eH,eA.get_Doc()];};bo.asyncResult=function(){_5.$cctor();return _5.asyncResult;};bp=bo.AsyncResultBuilder=er.Class({Run:function(ez){return cI.bind(ez,cI.rtn());},Delay:a.id,Bind$1:function(ez,eA){return cI.bind(eA,ez);},Zero:function(){return cI.rtn();},Combine$1:function(ez,eA){return cI.bind(eA,ez);},For:function(ez,eA){var eB;eB=this;return this.Using(cE.Get(ez),function(eC){return eB.While(function(){return eC.MoveNext();},eB.Delay(function(){return eA(eC.Current());}));});},Return:function(ez){return cI.rtn(ez);},Bind:function(ez,eA){return cI.bind(eA,cI.rtnR(ez));},Using:function(ez,eA){return cQ.Using(ez,eA);},While:function(ez,eA){return cI.whileLoop(ez,eA);},TryFinally:function(ez,eA){var eB;eB=null;return cQ.Delay(function(){return cQ.TryFinally(cQ.Delay(function(){return ez();}),function(){eA();});});},ReturnFrom$1:a.id},g,bp);bp.New=er.Ctor(function(){g.New.call(this);},bp);bq.refrescarData=function(ez){var eA,eB,eC;ez?bq.set_shouldRefresh(true):void 0;eA=bR.userO().Get();eA!=null&&eA.$==1?(eB=eA.$0,_0.iterA((eC=bo.asyncResult(),eC.Run(eC.Delay(function(){return eC.Combine$1(bR.referidoPor()!==""?eC.Bind$1(_0.agregarUsuarioSiEsNuevo(bR.claims(eB)),function(){return eC.Return();}):eC.Zero(),eC.Delay(function(){return!self.document.hidden?bq.shouldRefresh()?eC.Bind$1(_0.obtenerEstadoParaUsuario(),function(eD){bq.set_shouldRefresh(false);m.modeloV().Set(eD);return eC.Zero();}):eC.Zero():eC.Zero();}));}))))):m.modeloV().Set(M.modeloVacio());};bq.set_shouldRefresh=function(ez){_5.$cctor();_5.shouldRefresh=ez;};bq.shouldRefresh=function(){_5.$cctor();return _5.shouldRefresh;};bs.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(ez){var eA,eB;eA=es.random()*16|0;eB=ez=="x"?eA:eA&3|8;return eB.toString(16);});};bs.TryParse=function(ez,eA){try{eA.set(bs.Parse(ez));return true;}catch(eB){return false;}};bs.Parse=function(ez){var eA,eB,eC;try{return bs.ParseExact(ez,"D");}catch(eD){try{eA=bs.ParseExact(ez,"B");}catch(eE){try{eB=bs.ParseExact(ez,"P");}catch(eF){try{eC=bs.ParseExact(ez,"N");}catch(eG){eC=bs.ParseExact(ez,"X");}eB=eC;}eA=eB;}return eA;}};bs.ParseExact=function(ez,eA){var eB,eC,eD,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO;function eE(eP){var eQ,eR,eS,eT;for(eQ=0,eR=35;eQ<=eR;eQ++){eQ===8||(eQ===13||(eQ===18||eQ===23))?eP[eQ]!=="-"?bs.ShapeError():void 0:(eT=eP[eQ],!("0"<=eT&&eT<="9"||"a"<=eT&&eT<="f")?bs.ShapeError():void 0);}return eP;}eF=eA.toUpperCase();if(eF==="N"){eG=bi.Trim(ez).toLowerCase();if(eG.length!==32)bs.ShapeError();for(eH=0,eI=31;eH<=eI;eH++){eJ=eG[eH];!("0"<=eJ&&eJ<="9"||"a"<=eJ&&eJ<="f")?bs.ShapeError():void 0;}return bi.Substring(eG,0,8)+"-"+bi.Substring(eG,8,4)+"-"+bi.Substring(eG,12,4)+"-"+bi.Substring(eG,16,4)+"-"+eG.substring(20);}else if(eF==="D"){eB=bi.Trim(ez).toLowerCase();eB.length!==36?bs.ShapeError():void 0;return eE(eB);}else if(eF==="B"){eC=bi.Trim(ez).toLowerCase();eC.length!==38||eC[0]!=="{"||eC[17]!=="}"?bs.ShapeError():void 0;return eE(bi.Substring(eC,1,36));}else if(eF==="P"){eD=bi.Trim(ez).toLowerCase();eD.length!==38||eD[0]!=="("||eD[17]!==")"?bs.ShapeError():void 0;return eE(bi.Substring(eD,1,36));}else if(eF==="X"){eK=bi.Trim(ez).toLowerCase();if(eK.length!==68)bs.ShapeError();for(eL=0,eM=67;eL<=eM;eL++){switch(eL){case 26:case 0:if(eK[eL]!=="{")bs.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(eK[eL]!=="0")bs.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(eK[eL]!=="x")bs.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(eK[eL]!==",")bs.ShapeError();break;case 67:case 66:if(eK[eL]!=="{")bs.ShapeError();break;default:eO=eK[eL];!("0"<=eO&&eO<="9"||"a"<=eO&&eO<="f")?bs.ShapeError():void 0;break;}}return bi.Substring(eK,3,8)+"-"+bi.Substring(eK,14,4)+"-"+bi.Substring(eK,21,4)+"-"+bi.Substring(eK,29,2)+bi.Substring(eK,34,2)+"-"+bi.Substring(eK,39,2)+bi.Substring(eK,44,2)+bi.Substring(eK,49,2)+bi.Substring(eK,54,2)+bi.Substring(eK,59,2)+bi.Substring(eK,64,2);}else return bs.FormatError();};bs.ShapeError=function(){throw new ef.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bs.FormatError=function(){throw new ef.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};T.mapi=function(ez,eA){var eB,eC,eD;eB=new a.Array(eA.length);for(eC=0,eD=eA.length-1;eC<=eD;eC++)eB[eC]=ez(eC,eA[eC]);return eB;};T.map=function(ez,eA){var eB,eC,eD;eB=new a.Array(eA.length);for(eC=0,eD=eA.length-1;eC<=eD;eC++)eB[eC]=ez(eA[eC]);return eB;};T.sortBy=function(ez,eA){return T.map(function(eB){return eB[0];},T.mapi(function(eB,eC){return[eC,[ez(eC),eB]];},eA).sort(function(eB,eC){return J.Compare(eB[1],eC[1]);}));};T.reduce=function(ez,eA){var eB,eC,eD;T.nonEmpty(eA);eB=eA[0];for(eC=1,eD=eA.length-1;eC<=eD;eC++)eB=ez(eB,eA[eC]);return eB;};T.filter=function(ez,eA){var eB,eC,eD;eB=[];for(eC=0,eD=eA.length-1;eC<=eD;eC++)if(ez(eA[eC]))eB.push(eA[eC]);return eB;};T.choose=function(ez,eA){var eB,eC,eD,eE;eB=[];for(eC=0,eD=eA.length-1;eC<=eD;eC++){eE=ez(eA[eC]);eE==null?void 0:eB.push(eE.$0);}return eB;};T.ofSeq=function(ez){var eA,eB;if(ez instanceof a.Array)return ez.slice();else if(ez instanceof cH)return T.ofList(ez);else{eA=[];eB=cE.Get(ez);try{while(eB.MoveNext())eA.push(eB.Current());return eA;}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}}};T.sortInPlaceWith=function(ez,eA){eA.sort(ez);};T.nonEmpty=function(ez){if(ez.length===0)o.FailWith("The input array was empty.");};T.tryFindIndex=function(ez,eA){var eB,eC;eB=null;eC=0;while(eC<eA.length&&eB==null){ez(eA[eC])?eB={$:1,$0:eC}:void 0;eC=eC+1;}return eB;};T.ofList=function(ez){var eA,eB;eB=[];eA=ez;while(!(eA.$==0)){eB.push(by.head(eA));eA=by.tail(eA);}return eB;};T.sortInPlace=function(ez){T.mapInPlace(function(eA){return eA[0];},T.mapiInPlace(function(eA,eB){return[eB,eA];},ez).sort(J.Compare));};T.tryFind=function(ez,eA){var eB,eC;eB=null;eC=0;while(eC<eA.length&&eB==null){ez(eA[eC])?eB={$:1,$0:eA[eC]}:void 0;eC=eC+1;}return eB;};T.sortInPlaceBy=function(ez,eA){T.mapInPlace(function(eB){return eB[0];},T.mapiInPlace(function(eB,eC){return[eC,[ez(eC),eB]];},eA).sort(function(eB,eC){return J.Compare(eB[1],eC[1]);}));};T.map2=function(ez,eA,eB){var eC,eD,eE;T.checkLength(eA,eB);eC=new a.Array(eB.length);for(eD=0,eE=eB.length-1;eD<=eE;eD++)eC[eD]=ez(eA[eD],eB[eD]);return eC;};T.forall=function(ez,eA){var eB,eC,eD,eE;eB=true;eC=0;eE=T.length(eA);while(eB&&eC<eE)if(ez(eA[eC]))eC=eC+1;else eB=false;return eB;};T.init=function(ez,eA){var eB,eC,eD;ez<0?o.FailWith("Negative size given."):null;eB=new a.Array(ez);for(eC=0,eD=ez-1;eC<=eD;eC++)eB[eC]=eA(eC);return eB;};T.find=function(ez,eA){var eB;eB=T.tryFind(ez,eA);return eB==null?o.FailWith("KeyNotFoundException"):eB.$0;};T.tryPick=function(ez,eA){var eB,eC,eD;eB=null;eC=0;while(eC<eA.length&&eB==null){eD=ez(eA[eC]);eD!=null&&eD.$==1?eB=eD:void 0;eC=eC+1;}return eB;};T.concat=function(ez){return a.Array.prototype.concat.apply([],T.ofSeq(ez));};T.checkLength=function(ez,eA){if(ez.length!==eA.length)o.FailWith("The arrays have different lengths.");};T.exists=function(ez,eA){var eB,eC,eD,eE;eB=false;eC=0;eE=T.length(eA);while(!eB&&eC<eE)if(ez(eA[eC]))eB=true;else eC=eC+1;return eB;};T.pick=function(ez,eA){var eB;eB=T.tryPick(ez,eA);return eB==null?o.FailWith("KeyNotFoundException"):eB.$0;};T.create=function(ez,eA){var eB,eC,eD;eB=new a.Array(ez);for(eC=0,eD=ez-1;eC<=eD;eC++)eB[eC]=eA;return eB;};T.foldBack=function(ez,eA,eB){var eC,eD,eE,eF,eG;eC=eB;eE=eA.length;for(eF=1,eG=eE;eF<=eG;eF++)eC=ez(eA[eE-eF],eC);return eC;};T.iter=function(ez,eA){var eB,eC;for(eB=0,eC=eA.length-1;eB<=eC;eB++)ez(eA[eB]);};bt.statuses=function(){_5.$cctor();return _5.statuses;};bt.crearOptions=function(ez){return Z.Concat(bb.map(bt.crearOption,ez));};bt.crearOptions2=function(ez){return Z.Concat(bb.map(function(eA){return bt.crearOption2(eA[0],eA[1]);},ez));};bt.statusAr=function(){_5.$cctor();return _5.statusAr;};bt.tiposAr=function(){_5.$cctor();return _5.tiposAr;};bt.paises=function(){_5.$cctor();return _5.paises;};bt.estados=function(){_5.$cctor();return _5.estados;};bt.tiposDir=function(){_5.$cctor();return _5.tiposDir;};bt.tiposTel=function(){_5.$cctor();return _5.tiposTel;};bt.generos=function(){_5.$cctor();return _5.generos;};bt.tiposCta=function(){_5.$cctor();return _5.tiposCta;};bt.tiposTar=function(){_5.$cctor();return _5.tiposTar;};bt.aniosV=function(){_5.$cctor();return _5.aniosV;};bt.mesesV=function(){_5.$cctor();return _5.mesesV;};bt.alertIfNone=function(ez,eA,eB){return eA!=null&&eA.$==1?eB(eA.$0):(a.alert("Error not caught: "+ez),null);};bt.removeButton=function(ez,eA){return Z.Element("form",[cR.Create("class","mui-panel")],[eA,Z.Button("borrar",[cR.Create("title","borrar")],ez)]);};bt.fst3=a.id;bt.crearOption=function(ez){return Z.Element("option",[],[Z.TextNode(ez)]);};bt.crearOption2=function(ez,eA){return Z.Element("option",[cR.Create("value",eA)],[Z.TextNode(ez)]);};bt.thr3=function(ez,eA,eB){return eB;};bt.snd3=function(ez,eA,eB){return eA;};bv=bu.attr=er.Class({},g,bv);bw.B={$:0};bx=M.StatusAliado=er.Class({toString:function(){return(function(ez){return function(eA){return ez(X.p(eA));};}(a.id))(this);}},null,bx);bx.tryParse=function(ez){var eA;eA=bi.Trim(ez).toUpperCase();return eA==="CUENTACREADA"?bx.CuentaCreada:eA==="ACTIVO"?bx.Activo:eA==="CANCELADO"?bx.Cancelado:bx.Inactivo;};bx.Inactivo=new bx({$:2});bx.CuentaCreada=new bx({$:0});bx.Activo=new bx({$:1});bx.Cancelado=new bx({$:3});by.ofArray=function(ez){var eA,eB,eC;eA=cH.Empty;for(eB=T.length(ez)-1,eC=0;eB>=eC;eB--)eA=new cH({$:1,$0:T.get(ez,eB),$1:eA});return eA;};by.ofSeq=function(ez){var eA,eB,eC,eD,eE,eF;if(ez instanceof cH)return ez;else if(ez instanceof a.Array)return by.ofArray(ez);else{eA=cE.Get(ez);try{eC=eA.MoveNext();if(!eC)eB=cH.Empty;else{eE=new cH({$:1});eD=eE;while(eC){eD.$0=eA.Current();eA.MoveNext()?eD=(eF=new cH({$:1}),eD.$1=eF,eF):eC=false;}eD.$1=cH.Empty;eB=eE;}return eB;}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}}};by.rev=function(ez){var eA,eB;eA=cH.Empty;eB=ez;while(eB.$==1){eA=new cH({$:1,$0:eB.$0,$1:eA});eB=eB.$1;}return eA;};by.head=function(ez){return ez.$==1?ez.$0:by.listEmpty();};by.tail=function(ez){return ez.$==1?ez.$1:by.listEmpty();};by.listEmpty=function(){return o.FailWith("The input list was empty.");};by.iter=function(ez,eA){var eB;eB=eA;while(eB.$==1){ez(by.head(eB));eB=by.tail(eB);}};bz.New=function(ez,eA,eB,eC,eD){return{titular:ez,banco:eA,tipo:eB,numero:eC,routing:eD};};bA=M.RoutingNumber=er.Class({get_Id:function(){return this.$0;}},null,bA);bB=M.NumeroCuenta=er.Class({get_Id:function(){return this.$0;}},null,bB);bC.toSafe=function(ez){return ez==null?"":ez;};bC.prettyPrint=function(ez){var eA,eB;function eC(eD,eE){return eD+" = "+bC.prettyPrint(eE);}return ez===null?"null":(eA=typeof ez,eA=="string"?"\""+ez+"\"":eA=="object"?ez instanceof a.Array?"[|"+bi.concat("; ",T.map(bC.prettyPrint,ez))+"|]":(eB=a.String(ez),eB==="[object Object]"?"{"+bi.concat("; ",T.map(function(eD){return eC(eD[0],eD[1]);},I.GetFields(ez)))+"}":eB):a.String(ez));};bC.padNumLeft=function(ez,eA){var eB;eB=T.get(ez,0);return eB===" "||eB==="+"||eB==="-"?eB+bi.PadLeftWith(ez.substr(1),eA-1,"0"):bi.PadLeftWith(ez,eA,"0");};bC.printList=function(ez,eA){return"["+bi.concat("; ",bb.map(ez,eA))+"]";};bD.New=function(ez,eA,eB,eC){return{nombre:ez,authorizeIdR:eA,cuentaPago:eB,subscripcion:eC};};M.ctaVacio=function(){_5.$cctor();return _5.ctaVacio;};M.premisasCalculo=function(){_5.$cctor();return _5.premisasCalculo;};M.correoVacio=function(){_5.$cctor();return _5.correoVacio;};M.modeloVacio=function(){_5.$cctor();return _5.modeloVacio;};M.telVacio=function(){_5.$cctor();return _5.telVacio;};M.dirVacio=function(){_5.$cctor();return _5.dirVacio;};M.tarVacio=function(){_5.$cctor();return _5.tarVacio;};bE.defaultValue=function(ez,eA){return eA.$==1?ez:eA.$0;};bE.result=function(){_5.$cctor();return _5.result;};bE.rtn=function(ez){return{$:0,$0:ez};};bE.iter=function(ez,eA,eB){bE.defaultWith(ez,dF.Map(eA,eB));};bE.absorbO=function(ez,eA){return dF.Bind(function(eB){return bE.ofOption(ez,eB);},eA);};bE.defaultWith=function(ez,eA){return eA.$==1?ez(eA.$0):eA.$0;};bE.ofOption=function(ez,eA){var eB;eB=eA==null?null:{$:1,$0:{$:0,$0:eA.$0}};return eB==null?function(eC){return bc.Error$1(ez(eC));}():eB.$0;};_6.Create=function(ez,eA){return _6.CreateWithStorage(ez,cT.InMemory(T.ofSeq(eA)));};_6.CreateWithStorage=function(ez,eA){return new _6.New(ez,eA);};bF.New=function(ez,eA,eB,eC,eD,eE,eF){return{idAliado:ez,tipo:eA,nombre:eB,modificado:eC,tamano:eD,status:eE,comentario:eF};};bG["AsyncResultBuilder.Bind"]=function(ez,eA,eB){function eC(eE){return{$:0,$0:eE};}function eD(eE){return cQ.Return(eE);}return cI.bind(eB,cQ.Bind(eA,function(eE){return eD(eC(eE));}));};bH.docLensMapView=function(ez,eA,eB){function eC(eD,eE){return eA(eD,bH["lensInto'"](eB,a.id,function(){return a.id;},eD,eE));}return Z.ConvertSeqBy(eB.key,function(eD){return function(eE){return eC(eD,eE);};},p.Map(ez,eB.v));};bH["lensInto'"]=function(ez,eA,eB,eC,eD){var eE,eF;eE=dp.freshId();eF=new q({Get:function(){return eA(ez.FindByKey(eC));},Set:function(eG){return ez.UpdateBy(function(eH){return{$:1,$0:(eB(eH))(eG)};},eC);},Update:function(eG){return ez.UpdateBy(function(eH){var eI;return{$:1,$0:(eI=eG(eA(eH)),(eB(eH))(eI))};},eC);},UpdateMaybe:function(eG){return ez.UpdateBy(function(eH){var eI,eJ;eI=eG(eA(eH));eJ=eB(eH);return eI==null?null:{$:1,$0:eJ(eI.$0)};},eC);},SetFinal:function(eG){return this.Set(eG);},get_View:function(){return eD;},get_Id:function(){return eE;}});q.New.call(eF);return eF;};bI.toYYYYMMDDHHMM=function(ez,eA){return(((er.Curried3(function(eB,eC,eD){return eB(bC.toSafe(eC)+" "+bC.toSafe(eD));}))(a.id))(bI.toYYYYMMDD(ez,eA)))(bI.toHHMM(eA));};bI.toYYYYMMDD=function(ez,eA){return((((((er.Curried(function(eB,eC,eD,eE,eF,eG){return eB(a.String(eC)+bC.toSafe(eD)+bC.padNumLeft(a.String(eE),2)+bC.toSafe(eF)+bC.padNumLeft(a.String(eG),2));},6))(a.id))((new ev(eA)).getFullYear()))(ez))((new ev(eA)).getMonth()+1))(ez))((new ev(eA)).getDate());};bI.toHHMM=function(ez){return(((er.Curried3(function(eA,eB,eC){return eA(bC.padNumLeft(a.String(eB),2)+":"+bC.padNumLeft(a.String(eC),2));}))(a.id))((new ev(ez)).getHours()))((new ev(ez)).getMinutes());};bJ.thousands=function(ez){var eA,eB,eC;eA=a.String(ez);eB=eA.length%3;eC=eB===0?3:eB;return bi.concat(",",by.ofSeq(bb.delay(function(){return bb.append([ca.string(eA,{$:1,$0:0},{$:1,$0:eC-1})],bb.delay(function(){return bb.map(function(eD){return ca.string(eA,{$:1,$0:eD*3+eC},{$:1,$0:eD*3+eC+2});},o.range(0,((eA.length-eC)/3>>0)-1));}));})));};bJ.unindent$1=function(ez){var eA,eB,eC,eD;eA=bi.SplitChars(ez,["\n"],0);eB=(eC=bb.tryFindIndex(function(eE){return" "!==eE;},(eD=bb.tryFind(function(eE){return bi.Trim(eE)!=="";},eA),eD==null?"":eD.$0)),eC==null?0:eC.$0);return bb.filter(function(eE){return!bi.StartsWith(eE,"# 1 ");},bb.map(function(eE){return eE.length<=eB?"":eE.substring(eB);},eA));};bJ.splitByChar$1=function(ez,eA){return bi.SplitChars(eA,[ez],0);};bJ.StartsWith$1=function(ez,eA){return bi.StartsWith(eA,ez)?{$:1,$0:ca.string(eA,{$:1,$0:ez.length},null)}:null;};bK=M.TipoArchivo=er.Class({toString:function(){return this.$==7?this.$0:(function(ez){return function(eA){return ez(X.p$6(eA));};}(a.id))(this);}},null,bK);bK.Parse=function(ez){var eA;eA=bJ.StartsWith$1("Otro ",ez);return eA!=null&&eA.$==1?new bK({$:7,$0:eA.$0}):ez==="Contrato"?bK.Contrato:ez==="FormaW9"?bK.FormaW9:ez==="FormaW8BEN"?bK.FormaW8BEN:ez==="Autorizacion"?bK.Autorizacion:ez==="Pasaporte"?bK.Pasaporte:ez==="Cedula"?bK.Cedula:ez==="LicenciaConducir"?bK.LicenciaConducir:new bK({$:7,$0:bi.Trim(ez)});};bK.Autorizacion=new bK({$:1});bK.Contrato=new bK({$:0});bK.FormaW9=new bK({$:5});bK.FormaW8BEN=new bK({$:6});bK.Pasaporte=new bK({$:2});bK.Cedula=new bK({$:3});bK.LicenciaConducir=new bK({$:4});bL=M.StatusArchivo=er.Class({toString:function(){return(function(ez){return function(eA){return ez(X.p$7(eA));};}(a.id))(this);}},null,bL);bL.Parse=function(ez){return ez==="Cambiado"?bL.Cambiado:ez==="Expirado"?bL.Expirado:ez==="Cancelado"?bL.Cancelado:ez==="Verificado"?bL.Verificado:ez==="Rechazado"?bL.Rechazado:bL.Subido;};bL.Cambiado=new bL({$:5});bL.Expirado=new bL({$:3});bL.Cancelado=new bL({$:4});bL.Verificado=new bL({$:1});bL.Rechazado=new bL({$:2});bL.Subido=new bL({$:0});p=h.View=er.Class({get_V:function(){return o.FailWith("View<'T>.V can only be called in an argument to a V-enabled function or if 'T = Doc.");}},null,p);bN=M.CuentaPago=er.Class({get_AutorizacionPre:function(){return(((er.Curried3(function(ez,eA,eB){return ez("Autorizacion "+bC.toSafe(eA)+" "+bC.toSafe(eB));}))(a.id))(this.get_TipoCorto()))(this.get_MaskedCuenta());},get_TipoCorto:function(){return this.$==0?"CB":this.$==2?"TE":"TC";},get_MaskedCuenta:function(){return this.$==0?this.$0.numero.get_Id():this.$==2?this.$0:this.$0.numero.get_Id();},get_TipoLargo:function(){return this.$==0?"Cuenta Bancaria":this.$==2?"Transferencia Electronica":"Tarjeta de Credito";}},null,bN);bO.formaFirma=function(ez,eA,eB,eC,eD){var eE,eF,eG,eH,eI,eJ,eK;function eL(){var eM;_0.iterA((eM=bo.asyncResult(),eM.Run(eM.Delay(function(){return bO.mensajes().Get()!==""?(a.alert(bO.mensajes().Get()),eM.Zero()):eM.Bind$1(bO.subirScreenShot(eB,eD),function(){return eM.Bind$1(cI.map(function(eN){a.alert(eN);},eC()),function(){m.endPointV().Set(cy.DefaultEP);return eM.Zero();});});}))));}eE=i.Create$1(false);eF=(eG=(eH=n.get_LoggedId().get_Id(),(eI=U.Make().WithHole({$:2,$0:"firmarclass",$1:p.Map(function(eM){return eM===""?"mui-btn--primary":"";},bO.mensajes().get_View())}).WithHole({$:2,$0:"mensaje",$1:bO.mensajes().get_View()}).WithHole({$:0,$0:"contenido",$1:eA}).WithHole({$:9,$0:"acepto",$1:i.Lens(eE,a.id,function(eM,eN){return eN;})}),eI.WithHole(V.EventQ2(eI.k,"firmar",function(){return eI.i;},function(){eL();}))).WithHole({$:2,$0:"datetime",$1:bO.fechaHoraV().get_View()}).WithHole({$:1,$0:"idloggedin",$1:eH})).WithHole({$:2,$0:"location",$1:p.Map(function(eM){return(function(eN){return function(eO){return eN(bC.prettyPrint(eO));};}(a.id))(eM);},bO.locationV().get_View())}).WithHole({$:2,$0:"textobotonfirmar",$1:p.Map(function(eM){return eM?"FIRMADO!":"Firmar y Procesar";},bO.firmadoV().get_View())}),(eJ=V.CompleteHoles(eG.k,eG.h,[["firmante",0],["fecha",0],["acepto",2]]),(eK=new S.New(eJ[1],W.formafirma(eJ[0])),(eG.i=eK,eK))));p.Sink(function(eM){bO.mensajes().Set(eM);},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eM,eN){return er.Curried(function(eO,eP,eQ,eR){return bi.concat(", ",bb.map(function(eS){return eS[1];},bb.filter(function(eS){return eS[0];},by.ofArray([[bi.Trim(eM)!==eN.toUpperCase(),"Nombre en MAYUSCULAS debe coincidir"],[eO!==bc["String.Left$1"](eP,10),"Introduzca fecha de hoy (YYYY-MM-DD)"],[!J.Equals(eQ,true),"Acepte los terminos indicados"],[!J.Equals(n.get_LoggedId(),eR.id),"El documento solo debe ser firmado por el titular de la cuenta"]]))));},4);},eF.Hole("firmante").get_View(),ez),eF.Hole("fecha").get_View()),bO.fechaHoraV().get_View()),eF.Hole("acepto").get_View()),m.aliadoW()));return eF.get_Doc();};bO.fechaHoraV=function(){_5.$cctor();return _5.fechaHoraV;};bO.firmadoV=function(){_5.$cctor();return _5.firmadoV;};bO.locationV=function(){_5.$cctor();return _5.locationV;};bO.mensajes=function(){_5.$cctor();return _5.mensajes;};bO.subirScreenShot=function(ez,eA){var eB;eB=null;return cQ.Delay(function(){return cQ.TryFinally(cQ.Delay(function(){bO.firmadoV().Set(true);return cQ.Bind(cQ.FromContinuations(function(eC){et.getJSON("https://ipapi.co/json/",function(eD){eC(eD);});}),function(eC){bb.iter(function(eD){eC[eD]=self.navigator[eD];},by.ofArray(["appVersion","platform","product","productSub","vendor","languages"]));bO.locationV().Set(eC);return cQ.Bind(cQ.Sleep(100),function(){return cQ.Bind(c$.AsAsync(a.html2canvas(self.document.querySelector("#FormaFirma"))),function(eD){var eE;self.document.body.appendChild(eD);eE=(((er.Curried3(function(eF,eG,eH){return eF(bC.toSafe(eG)+" "+bC.toSafe(eH)+".png");}))(a.id))(eA))(bi.Replace(bO.fechaHoraV().Get(),":","."));bO.toBlob(eD,function(eF){var eG,eH;eG=new a.FormData();eG.append("fname",eE);eG.append("data",eF);et.ajax((eH={},eH.type="POST",eH.url="/api/subir/"+m.modeloV().Get().idAliado.get_Id()+"/"+eE,eH.data=eG,eH.contentType=false,eH.processData=false,eH.success=bO.uploaded(),eH));});self.document.body.removeChild(eD);return _0.ejecutarDataEventoNuevo({$:9,$0:[n.get_LoggedId(),[bF.New(m.modeloV().Get().idAliado,ez,eE,ev.now(),0,bL.Subido,"Firma Electronica")]]});});});});}),function(){bq.refrescarData(true);bO.firmadoV().Set(false);});});};bO.toBlob=function(ez,eA){if(!(!ez.toBlob))ez.toBlob(eA);else if(!(!ez.msToBlob))eA(ez.msToBlob());else a.alert("Browser no es compatible: toBlob");};bO.uploaded=function(){_5.$cctor();return _5.uploaded;};bP.New=function(ez,eA,eB,eC,eD,eE,eF,eG){return{comisionReferidosRegular:ez,comisionReferidosMaster:eA,comisionDescendientesMaster:eB,comisionDescendientesRegular:eC,montoAfiliacion:eD,numeroReferidosMaster:eE,diaCorte1:eF,diaCorte2:eG};};bQ.New=function(ez,eA,eB){return{actName:ez,actFunction:eA,actEnabled:eB};};bR.logout=function(){bR.executePolicy(true,ce.SignIn);};bR.userO=function(){_5.$cctor();return _5.userO;};bR.storeValue=function(ez,eA){self.localStorage.setItem(ez,eA);return eA;};bR.appId=function(){_5.$cctor();return _5.appId;};bR.storageGetItem=function(ez){return self.localStorage.getItem(ez);};bR.getAuthority=function(ez,eA){return((((er.Curried(function(eB,eC,eD,eE){return eB("https://"+bC.toSafe(eC)+".b2clogin.com/tfp/"+bC.toSafe(eD)+".onmicrosoft.com/"+bC.toSafe(eE));},4))(a.id))(ez))(ez))(eA);};bR.tenantName=function(){_5.$cctor();return _5.tenantName;};bR.signInPolicy=function(){_5.$cctor();return _5.signInPolicy;};bR.applicationId=function(){_5.$cctor();return _5.applicationId;};bR.authority=function(){_5.$cctor();return _5.authority;};bR.redirectCallback=function(ez,eA){try{!J.Equals(ez,null)?eu.log(["redirectCallback ERROR: ",ez]):void 0;!J.Equals(eA,null)?eu.log(["redirectCallback: ",eA]):null;}catch(eB){(((er.Curried3(function(eC,eD,eE){return eC(bC.prettyPrint(eD)+" "+bC.toSafe(eE));}))(function(eC){eu.log(eC);}))(eB))(eB.stack);}};bR.getTokenO0=function(){var ez;ez=null;return cQ.Delay(function(){function eA(eB,eC){return J.Equals(eC,null)?(eu.log(eB+" token is null!!"),null):{$:1,$0:eC};}return bR.userO().Get()==null?(eu.log("getTokenO0 (4): No user connected!"),cQ.Return(null)):cQ.TryWith(cQ.Delay(function(){return cQ.Bind(c$.AsAsync(bR.agent().f().acquireTokenSilent(bR.authParms())),function(eB){return cQ.Return(eA("getTokenO0 (0): ",eB.accessToken));});}),function(eB){eu.log(["getTokenO0 (1): ",eB.message]);return cQ.TryWith(cQ.Delay(function(){return cQ.Bind(cQ.FromContinuations(function(eC,eD){bR.agent().f().handleRedirectCallback(function(eE,eF){try{!J.Equals(eE,null)?(eu.log(["redirectCallback ERROR: ",eE]),eD(new c9(eE.errorMessage))):!J.Equals(eF,null)?(eu.log(["redirectCallback: ",eF]),eC(eF)):null;}catch(eG){(((er.Curried3(function(eH,eI,eJ){return eH(bC.prettyPrint(eI)+" "+bC.toSafe(eJ));}))(function(eH){eu.log(eH);}))(eG))(eG.stack);}});return bR.agent().f().acquireTokenRedirect(bR.authParms());}),function(eC){return cQ.Return(eA("getTokenO0 (2): ",eC.accessToken));});}),function(eC){eu.log(["getTokenO0 (3): ",eC.message]);return cQ.Return(null);});});});};bR.checkUser=function(){var ez;cQ.Start((ez=null,cQ.Delay(function(){return cQ.Bind(cQ.Sleep(100),function(){return cQ.While(function(){return true;},cQ.Delay(function(){var eA,eB;eA=(eB=bR.agent().f().getAccount(),J.Equals(eB,null)?null:{$:1,$0:eB});return cQ.Combine(bR.getId(eA)!==bR.getId(bR.userO().Get())?(bR.userO().Set(eA),cQ.Zero()):cQ.Zero(),cQ.Delay(function(){return cQ.Combine(J.Equals(bR.userO().Get(),null)?(bR.executePolicy(false,ce.SignIn),cQ.Zero()):cQ.Zero(),cQ.Delay(function(){return cQ.Bind(cQ.Sleep(9000),function(){return cQ.Return(null);});}));}));}));});})),null);};bR.referidoPor=function(){return bR.storageGetItem("referidoPor");};bR.claims=function(ez){var eA;eA=[["oid",ez.idToken.oid],["city",ez.idToken.city],["country",ez.idToken.country],["extension_DateOfBirth",ez.idToken.extension_DateOfBirth],["given_name",ez.idToken.given_name],["postalCode",ez.idToken.postalCode],["state",ez.idToken.state],["streetAddress",ez.idToken.streetAddress],["family_name",ez.idToken.family_name],["emails",T.get(ez.idToken.emails,0)],["referidoPor",bR.referidoPor()]];bR.storageSetItem("referidoPor","");return eA;};bR.executePolicy=function(ez,eA){bR.storeValue("forceLogin",ez?"1":"0");bR.storeValue("goInsideLink",self.location.href);bR.storeValue("policyType",a.String(eA));self.location.replace("blob/Msal.html");};bR.authParms=function(){return dA.New$1(null,null,null,null,null,null,null,null,{$:1,$0:[(((er.Curried3(function(ez,eA,eB){return ez("https://"+bC.toSafe(eA)+".onmicrosoft.com/"+bC.toSafe(eB)+"/user_impersonation");}))(a.id))(bR.tenantName()))(bR.appId()),(((er.Curried3(function(ez,eA,eB){return ez("https://"+bC.toSafe(eA)+".onmicrosoft.com/"+bC.toSafe(eB)+"/Prozper.Admin");}))(a.id))(bR.tenantName()))(bR.appId())]},null,null);};bR.agent=function(){_5.$cctor();return _5.agent;};bR.getId=function(ez){var eA;eA=ez==null?null:{$:1,$0:ez.$0.idToken.oid};return eA==null?"":eA.$0;};bR.getTokenO=function(){_5.$cctor();return _5.getTokenO;};bR.storageSetItem=function(ez,eA){self.localStorage.setItem(ez,eA);};bT.New=function(ez,eA){return{lytName:ez,lytDefinition:eA};};bU.$cctor=function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4;bU.$cctor=a.ignore;function e5(fA){return bi.concat("\n",fA);}function e6(fA){return bJ.splitByChar("\n",fA);}function e7(fA){var fB,fC;return ca.array(fA,{$:1,$0:0},{$:1,$0:(fB=0,(fC=T.length(fA)-2,J.Compare(fB,fC)===1?fB:fC))});}function e8(fA){return bi.concat("\n",fA);}function e9(fA){return fA+"T00:00:00";}function e_(fA){var fB;function fC(fE){return k.plugIns().TryFindByKey(fE);}function fD(fE){var fF;fF=k.defaultPlugIn();return fE==null?fF:fE.$0;}fB=function(fE){return fE==null?null:fC(fE.$0);};return function(fE){return fD(fB(fE));};}function e$(fA){var fB;fB=null;return eD.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fa(fA,fB){eD.set_Item(fA,fB);return fB;}function fb(fA,fB){var fC;fC=e$(fA);return fC==null?fa(fA,fB(fA)):fC.$0;}function fc(fA){var fB;fB=null;return eG.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fd(fA,fB){eG.set_Item(fA,fB);return fB;}function fe(fA,fB){var fC;fC=fc(fA);return fC==null?fd(fA,fB(fA)):fC.$0;}function ff(fA){var fB;fB=null;return eJ.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fg(fA,fB){eJ.set_Item(fA,fB);return fB;}function fh(fA,fB){var fC;fC=ff(fA);return fC==null?fg(fA,fB(fA)):fC.$0;}function fi(fA){var fB;fB=null;return eM.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fj(fA,fB){eM.set_Item(fA,fB);return fB;}function fk(fA,fB){var fC;fC=fi(fA);return fC==null?fj(fA,fB(fA)):fC.$0;}function fl(fA){var fB;fB=null;return eP.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fm(fA,fB){eP.set_Item(fA,fB);return fB;}function fn(fA,fB){var fC;fC=fl(fA);return fC==null?fm(fA,fB(fA)):fC.$0;}function fo(fA){var fB;fB=null;return eS.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fp(fA,fB){eS.set_Item(fA,fB);return fB;}function fq(fA,fB){var fC;fC=fo(fA);return fC==null?fp(fA,fB(fA)):fC.$0;}function fr(fA){var fB;fB=null;return eV.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fs(fA,fB){eV.set_Item(fA,fB);return fB;}function ft(fA,fB){var fC;fC=fr(fA);return fC==null?fs(fA,fB(fA)):fC.$0;}function fu(fA){var fB;fB=null;return eY.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fv(fA,fB){eY.set_Item(fA,fB);return fB;}function fw(fA,fB){var fC;fC=fu(fA);return fC==null?fv(fA,fB(fA)):fC.$0;}function fx(fA){var fB;fB=null;return e1.TryGetValue(fA,{get:function(){return fB;},set:function(fC){fB=fC;}})?{$:1,$0:fB}:null;}function fy(fA,fB){e1.set_Item(fA,fB);return fB;}function fz(fA,fB){var fC;fC=fx(fA);return fC==null?fy(fA,fB(fA)):fC.$0;}bU.unindentStr=function(fA){return e5(bJ.unindent(fA));};bU.skipLastLine=(ez=function(fA){return e7(e6(fA));},function(fA){return e8(ez(fA));});bU.parseDateO2=(eA=cb.tryParseWith(function(fA){var fB,fC;fB=0;return[(fC=c6.TryParse(fA),fC!=null&&fC.$==1&&(fB=fC.$0,true)),fB];}),function(fA){return eA(e9(fA));});bU.parseDateO=cb.tryParseWith(function(fA){var fB,fC;fB=0;return[(fC=c6.TryParse(fA),fC!=null&&fC.$==1&&(fB=fC.$0,true)),fB];});bU.parseIntO=cb.tryParseWith(function(fA){var fB;fB=0;return[bZ.TryParseInt32(fA,{get:function(){return fB;},set:function(fC){fB=fC;}}),fB];});bU.parseInt64O=cb.tryParseWith(function(fA){var fB;fB=0;return[bZ.TryParseInt64(fA,{get:function(){return fB;},set:function(fC){fB=fC;}}),fB];});bU.parseSingleO=cb.tryParseWith(function(fA){var fB,fC;fB=0;return[(fC=a.Number(fA),a.isNaN(fC)?false:(fB=fC,true)),fB];});bU.parseDoubleO=cb.tryParseWith(function(fA){var fB,fC;fB=0;return[(fC=a.Number(fA),a.isNaN(fC)?false:(fB=fC,true)),fB];});bU.parseGuidO=cb.tryParseWith(function(fA){var fB;fB=null;return[bs.TryParse(fA,{get:function(){return fB;},set:function(fC){fB=fC;}}),fB];});bU["|Date|_|"]=cb.parseDateO();bU["|Int|_|"]=cb.parseIntO();bU["|Int64|_|"]=cb.parseInt64O();bU["|Single|_|"]=cb.parseSingleO();bU["|Double|_|"]=cb.parseDoubleO();bU["|Guid|_|"]=cb.parseGuidO();bU.rexGuid="([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})";bU.rexEmail="(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@[*[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+]*";bU.observers=cH.Empty;bU.css="\r\n                .tab-panel {\r\n                 overflow  : hidden   ;\r\n                 display   : flex     ;\r\n                 flex-flow : column   ;\r\n                 background: lightgray;\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                }\r\n                .tab-content {\r\n                 flex      : 1 1     ;\r\n                 overflow  : auto    ;\r\n                 position  : relative;\r\n                }\r\n                .tab-children {\r\n                 height    : 100%    ;\r\n                 width     : 100%    ;\r\n                 position  : absolute;\r\n                 display   : grid    ;\r\n                }\r\n                .tab-strip {\r\n                 padding   : 0pt     ;\r\n                 flex      : 0 0     ;\r\n                }\r\n                .tab {\r\n                 border     : 0.2pt solid transparent;\r\n                 padding    : 0pt 4pt;\r\n                 display    : inline-block;\r\n                 font-family: sans-serif;\r\n                 font-weight: 200;\r\n                 font-size  : small;\r\n                 color      : #666;\r\n                 cursor     : pointer;\r\n                }\r\n                .top>.tab {\r\n                 border-radius: 2pt 2pt 0pt 0pt;\r\n                 border-bottom-width: 0pt;\r\n                 vertical-align: bottom;\r\n                }\r\n                .bottom>.tab {\r\n                 border-top-width: 0pt;\r\n                 border-radius: 0pt 0pt 2pt 2pt;\r\n                 vertical-align: top;\r\n                }\r\n                .horizontal>.tab:not(:first-child) {\r\n                 border-left-width: 0pt;\r\n                }\r\n                .tab.hovering {\r\n                 background: red;\r\n                }\r\n                .tab.selected {\r\n                 background: white;\r\n                 border-left-width: 0.2pt;\r\n                 color: black;\r\n                 font-weight: 500;\r\n                 border-color: black;\r\n                }\r\n                .horizontal>.tab.selected {\r\n                 border-left-width: 0.2pt;\r\n                }\r\n                ::slotted(*              ) { \r\n                 width : 100%;\r\n                 height: 100%;\r\n                }\r\n                        ";bU.init=r.Create(function(){var fA;fA=new c0.New();cY.defineWebComponent("wcomp-tabstrip",c0.Constructor,self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New);});bU.layoutHorizontal=er.Curried(function(fA,fB,fC,fD,fE){return Z.get_Empty();},5);bU.layoutVertical=er.Curried(function(fA,fB,fC,fD,fE){return Z.get_Empty();},5);bU.plugIns=new _6.New$1(function(fA){return fA.plgName;});bU.mainDocV=i.Create$1("AppFramework.AppFwkClient");bU.TemplateFileName="..\\website\\AppFramework.html";bU.defaultPlugIn=l.New("",[],[],[],[],[]);bU.selectionPlugInO=i.Create$1({$:1,$0:"AppFramework"});bU.currentPlugInW=(eB=k.selectionPlugInO().get_View(),p.Map2(function(fA,fB){return(e_(fA))(fB);},k.plugIns().v,eB));bU.currentPlugInV=new cP.New(k.currentPlugInW(),function(fA){k.plugIns().Append(fA);});bU.AppFwkClient=r.Create(function(){var fA,fB,fC,fD,fE,fF,fG,fH,fI;return(fA=(fB=k.renderQueries(),(fC=k.renderActions(),(fD=k.renderDocs(),(fE=k.renderViews(),(fF=k.renderVars(),(fG=k.renderPlugIns(),U.Make().WithHole({$:0,$0:"plugins",$1:fG})).WithHole({$:2,$0:"pluginname",$1:p.Map(function(fJ){return fJ.plgName;},k.currentPlugInW())}).WithHole({$:0,$0:"vars",$1:fF})).WithHole({$:0,$0:"views",$1:fE})).WithHole({$:0,$0:"docs",$1:fD})).WithHole({$:0,$0:"actions",$1:fC})).WithHole({$:0,$0:"queries",$1:fB})),(fH=V.CompleteHoles(fA.k,fA.h,[]),(fI=new S.New(fH[1],cW.appfwkclient(fH[0])),(fA.i=fI,fI)))).get_Doc();});bU.actHello=k.newAct("Hello",function(){self.alert("Hello!");});bU.qryDocs=k.newQry("getDocNames",function(){return T.ofSeq(bb.collect(function(fA){return bb.map(function(fB){return fA.plgName+"."+fB.docName;},fA.plgDocs);},(k.plugIns())["var"].Get()));});k.plugIns().Append(l.New("AppFramework",[k.newVar("mainDocV",k.mainDocV())],[],[k.newDoc("AppFwkClient",k.AppFwkClient())],[k.actHello()],[k.qryDocs()]));bU.getMainDoc=r.Create(function(){c1.init(er.Curried(k.horizontal,5),er.Curried(k.vertical,5));cZ.init().f();return k.mainDoc();});bU.splitName=k.splitName;bU.createSplitterM=(eC=(eD=new b1.New$5(),[[e$,function(fA){return function(fB){return fb(fA,fB);};}],function(){eD.Clear();}]),(eE=eC[0][1],[function(fA){return(eE(fA))(function(fB){return K.createSplitter(fB[0],fB[1],fB[2],fB[3],fB[4]);});},eC[1]]))[0];bU.createButtonM=(eF=(eG=new b1.New$5(),[[fc,function(fA){return function(fB){return fe(fA,fB);};}],function(){eG.Clear();}]),(eH=eF[0][1],[function(fA){return(eH(fA))(function(fB){return K.createButton(fB[0],fB[1],fB[2],fB[3],fB[4]);});},eF[1]]))[0];bU.createInputM=(eI=(eJ=new b1.New$5(),[[ff,function(fA){return function(fB){return fh(fA,fB);};}],function(){eJ.Clear();}]),(eK=eI[0][1],[function(fA){return(eK(fA))(function(fB){return K.createInput(fB[0],fB[1],fB[2],fB[3]);});},eI[1]]))[0];bU.createTextAreaM=(eL=(eM=new b1.New$5(),[[fi,function(fA){return function(fB){return fk(fA,fB);};}],function(){eM.Clear();}]),(eN=eL[0][1],[function(fA){return(eN(fA))(function(fB){return K.createTextArea(fB[0],fB[1],fB[2],fB[3]);});},eL[1]]))[0];bU.createElementM=(eO=(eP=new b1.New$5(),[[fl,function(fA){return function(fB){return fn(fA,fB);};}],function(){eP.Clear();}]),(eQ=eO[0][1],[function(fA){return(eQ(fA))(function(fB){return K.createElement(fB[0],fB[1],fB[2],fB[3],fB[4]);});},eO[1]]))[0];bU.createDocM=(eR=(eS=new b1.New$5(),[[fo,function(fA){return function(fB){return fq(fA,fB);};}],function(){eS.Clear();}]),(eT=eR[0][1],[function(fA){return(eT(fA))(function(fB){return K.createDoc(fB[0],fB[1],fB[2],fB[3]);});},eR[1]]))[0];bU.createTemplateM=(eU=(eV=new b1.New$5(),[[fr,function(fA){return function(fB){return ft(fA,fB);};}],function(){eV.Clear();}]),(eW=eU[0][1],[function(fA){return(eW(fA))(function(fB){return K.createTemplate(fB[0],fB[1],fB[2],fB[3],fB[4]);});},eU[1]]))[0];bU.createConcatM=(eX=(eY=new b1.New$5(),[[fu,function(fA){return function(fB){return fw(fA,fB);};}],function(){eY.Clear();}]),(eZ=eX[0][1],[function(fA){return(eZ(fA))(function(fB){return K.createConcat(fB[0],fB[1],fB[2]);});},eX[1]]))[0];bU.createVarM=(e0=(e1=new b1.New$5(),[[fx,function(fA){return function(fB){return fz(fA,fB);};}],function(){e1.Clear();}]),(e2=e0[0][1],[function(fA){return(e2(fA))(function(fB){return K.createVar(fB[0],fB[1],fB[2]);});},e0[1]]))[0];e3=k.tryGetPlugIn("AppFramework");e3==null?void 0:(e4=e3.$0,k.addPlugIn(l.New(e4.plgName,e4.plgVars,e4.plgViews,e4.plgDocs,e4.plgActions.concat([k.newActF("AddLayout",{$:2,$0:function(fA){return function(fB){return K.addNewLayout(fA,fB);};},$1:"[Name]",$2:"[Layout]"})]),e4.plgQueries)));};bV=M.IdForAuthorize=er.Class({},null,bV);bW.New=function(ez,eA,eB,eC,eD,eE,eF,eG){return{titulo:ez,nombre1:eA,nombre2:eB,apellido1:eC,apellido2:eD,nacionalidad:eE,genero:eF,fechaNacimiento:eG};};bX.Dia01={$:0};bY=M.TipoAliado=er.Class({toString:function(){return(function(ez){return function(eA){return ez(X.p$1(eA));};}(a.id))(this);}},null,bY);bY.Regular=new bY({$:1});bZ.TryParseInt32=function(ez,eA){return bZ.TryParse(ez,-2147483648,2147483647,eA);};b0=bf.List=er.Class({GetEnumerator:function(){return cE.Get(this);},GetEnumerator0:function(){return cE.Get0(this);}},null,b0);b1=bf.Dictionary=er.Class({set_Item:function(ez,eA){this.set(ez,eA);},set:function(ez,eA){var eB,eC,eD,eE;eB=this;eC=this.hash(ez);eD=this.data[eC];eD==null?(this.count=this.count+1,this.data[eC]=new a.Array({K:ez,V:eA})):(eE=T.tryFindIndex(function(eF){return eB.equals.apply(null,[(o.KeyValue(eF))[0],ez]);},eD),eE==null?(this.count=this.count+1,eD.push({K:ez,V:eA})):eD[eE.$0]={K:ez,V:eA});},get_Item:function(ez){return this.get(ez);},Clear:function(){this.data=[];this.count=0;},TryGetValue:function(ez,eA){var eB,eC,eD;eB=this;eC=this.data[this.hash(ez)];return eC==null?false:(eD=T.tryPick(function(eE){var eF;eF=o.KeyValue(eE);return eB.equals.apply(null,[eF[0],ez])?{$:1,$0:eF[1]}:null;},eC),eD!=null&&eD.$==1&&(eA.set(eD.$0),true));},Remove:function(ez){return this.remove(ez);},ContainsKey:function(ez){var eA,eB;eA=this;eB=this.data[this.hash(ez)];return eB==null?false:T.exists(function(eC){return eA.equals.apply(null,[(o.KeyValue(eC))[0],ez]);},eB);},Add:function(ez,eA){this.add(ez,eA);},get:function(ez){var eA,eB;eA=this;eB=this.data[this.hash(ez)];return eB==null?c2.notPresent():T.pick(function(eC){var eD;eD=o.KeyValue(eC);return eA.equals.apply(null,[eD[0],ez])?{$:1,$0:eD[1]}:null;},eB);},get_Keys:function(){return new d8.New(this);},remove:function(ez){var eA,eB,eC,eD;eA=this;eB=this.hash(ez);eC=this.data[eB];return eC==null?false:(eD=T.filter(function(eE){return!eA.equals.apply(null,[(o.KeyValue(eE))[0],ez]);},eC),T.length(eD)<eC.length&&(this.count=this.count-1,this.data[eB]=eD,true));},add:function(ez,eA){var eB,eC,eD;eB=this;eC=this.hash(ez);eD=this.data[eC];eD==null?(this.count=this.count+1,this.data[eC]=new a.Array({K:ez,V:eA})):(T.exists(function(eE){return eB.equals.apply(null,[(o.KeyValue(eE))[0],ez]);},eD)?c2.alreadyAdded():void 0,this.count=this.count+1,eD.push({K:ez,V:eA}));},GetEnumerator:function(){return cE.Get0(this);},GetEnumerator0:function(){return cE.Get0(T.concat(I.GetFieldValues(this.data)));}},g,b1);b1.New$5=er.Ctor(function(){b1.New$6.call(this,[],J.Equals,J.Hash);},b1);b1.New$6=er.Ctor(function(ez,eA,eB){var eC,eD;g.New.call(this);this.equals=eA;this.hash=eB;this.count=0;this.data=[];eC=cE.Get(ez);try{while(eC.MoveNext()){eD=eC.Current();this.set(eD.K,eD.V);}}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}},b1);b2=bf.HashSet=er.Class({Add:function(ez){return this.add(ez);},Contains:function(ez){var eA;eA=this.data[this.hash(ez)];return eA==null?false:this.arrContains(ez,eA);},add:function(ez){var eA,eB;eA=this.hash(ez);eB=this.data[eA];return eB==null?(this.data[eA]=[ez],this.count=this.count+1,true):this.arrContains(ez,eB)?false:(eB.push(ez),this.count=this.count+1,true);},arrContains:function(ez,eA){var eB,eC,eD,eE;eB=true;eC=0;eE=eA.length;while(eB&&eC<eE)if(this.equals.apply(null,[eA[eC],ez]))eB=false;else eC=eC+1;return!eB;},ExceptWith:function(ez){var eA;eA=cE.Get(ez);try{while(eA.MoveNext())this.Remove(eA.Current());}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(ez){var eA,eB,eC,eD;eA=0;eB=dX.concat(this.data);for(eC=0,eD=eB.length-1;eC<=eD;eC++)T.set(ez,eC,eB[eC]);},IntersectWith:function(ez){var eA,eB,eC,eD,eE;eA=new b2.New$4(ez,this.equals,this.hash);eB=dX.concat(this.data);for(eC=0,eD=eB.length-1;eC<=eD;eC++){eE=eB[eC];!eA.Contains(eE)?this.Remove(eE):void 0;}},Remove:function(ez){var eA;eA=this.data[this.hash(ez)];return eA==null?false:this.arrRemove(ez,eA)&&(this.count=this.count-1,true);},arrRemove:function(ez,eA){var eB,eC,eD,eE;eB=true;eC=0;eE=eA.length;while(eB&&eC<eE)if(this.equals.apply(null,[eA[eC],ez])){eA.splice.apply(eA,[eC,1]);eB=false;}else eC=eC+1;return!eB;},GetEnumerator:function(){return cE.Get(dX.concat(this.data));},GetEnumerator0:function(){return cE.Get(dX.concat(this.data));}},g,b2);b2.New$3=er.Ctor(function(){b2.New$4.call(this,[],J.Equals,J.Hash);},b2);b2.New$4=er.Ctor(function(ez,eA,eB){var eC;g.New.call(this);this.equals=eA;this.hash=eB;this.data=[];this.count=0;eC=cE.Get(ez);try{while(eC.MoveNext())this.add(eC.Current());}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}},b2);b2.New$2=er.Ctor(function(ez){b2.New$4.call(this,ez,J.Equals,J.Hash);},b2);b3.Box=a.id;b5.StartTo=function(ez,eA){cQ.StartWithContinuations(ez,eA,function(eB){b5.OnError(eB);},a.ignore,null);};b5.OnError=function(ez){return eu.log("WebSharper UI: Uncaught asynchronous exception",ez);};bZ.TryParseInt64=function(ez,eA){return bZ.TryParse(ez,-9223372036854775808,9223372036854775807,eA);};b6.Int=function(){b6.set_counter(b6.counter()+1);return b6.counter();};b6.Id=function(){b6.set_counter(b6.counter()+1);return"uid"+a.String(b6.counter());};b6.set_counter=function(ez){dw.$cctor();dw.counter=ez;};b6.counter=function(){dw.$cctor();return dw.counter;};b7=bE.Builder=er.Class({},g,b7);b7.New=er.Ctor(function(){g.New.call(this);},b7);b8=bE.BuilderP=er.Class({},g,b8);b8.New=er.Ctor(function(){g.New.call(this);},b8);b_=b9.EffBuilder=er.Class({},g,b_);b_.New=er.Ctor(function(){g.New.call(this);},b_);b$=bo.AsyncResultBuilderP=er.Class({},g,b$);b$.New=er.Ctor(function(){g.New.call(this);},b$);ca.array=function(ez,eA,eB){return eA==null?eB!=null&&eB.$==1?ez.slice(0,eB.$0+1):[]:eB==null?ez.slice(eA.$0):ez.slice(eA.$0,eB.$0+1);};ca.string=function(ez,eA,eB){return eA==null?eB!=null&&eB.$==1?ez.slice(0,eB.$0+1):"":eB==null?ez.slice(eA.$0):ez.slice(eA.$0,eB.$0+1);};cb.tryParseWith$1=function(ez){function eA(eB,eC){return eB?{$:1,$0:eC}:null;}return function(eB){return eA.apply(null,ez(eB));};};cb.parseDateO$1=function(){_5.$cctor();return _5.parseDateO;};cb.parseIntO$1=function(){_5.$cctor();return _5.parseIntO;};cb.parseInt64O$1=function(){_5.$cctor();return _5.parseInt64O;};cb.parseSingleO$1=function(){_5.$cctor();return _5.parseSingleO;};cb.parseDoubleO$1=function(){_5.$cctor();return _5.parseDoubleO;};cb.parseGuidO$1=function(){_5.$cctor();return _5.parseGuidO;};cb.parseDateO2$1=function(){_5.$cctor();return _5.parseDateO2;};cc.toJsonString=function(ez){return T.ofSeq(bb.delay(function(){return bb.append(["\""],bb.delay(function(){return bb.append(!bi.IsNullOrEmpty(ez)?bb.collect(function(eA){var eB,eC;eB=ez[eA];eC=eB.charCodeAt();return eC>=0&&eC<=7||eC===11||eC>=14&&eC<=31?(function(eD){return function(eE){return eD("\\u"+bC.padNumLeft(eE.toString(16),4));};}(a.id))(eC):eB==="\u0008"?"\\b":eB==="\u0009"?"\\t":eB==="\n"?"\\n":eB==="\u000c"?"\\f":eB==="\r"?"\\r":eB==="\""?"\\\"":eB==="\\"?"\\\\":[eB];},o.range(0,ez.length-1)):[],bb.delay(function(){return["\""];}));}));})).join("");};bc.Error$1=function(ez){return{$:1,$0:ez};};bc.print$1=function(ez){if(typeof ez=="string")((function(eA){return function(eB){return eA(bC.toSafe(eB));};}(function(eA){eu.log(eA);}))(ez));else((function(eA){return function(eB){return eA(bC.prettyPrint(eB));};}(function(eA){eu.log(eA);}))(ez));};bc["String.Left$1"]=function(ez,eA){return eA<0?bc["String.Substring2$1"](ez,0,ez.length+eA):bc["String.Substring2$1"](ez,0,eA);};bc["String.Right$1"]=function(ez,eA){var eB,eC;return bc["String.Substring2$1"](ez,(eB=0,(eC=ez.length-eA,J.Compare(eB,eC)===1?eB:eC)),ez.length);};bc["String.Substring2$1"]=function(ez,eA,eB){var eC,eD;while(true){if(eB<=0)return"";else if(eA<0){eC=eA;eA=0;eB=eB+eC;}else return eA>=ez.length?"":bi.Substring(ez,eA,(eD=ez.length-eA,J.Compare(eB,eD)===-1?eB:eD));}};bc["String.get_toUnderscore$1"]=function(ez,eA){return T.ofSeq(bb.collect(a.id,bb.mapi(function(eB,eC){return eB>0&&ed.IsUpper(eC)?by.ofArray(["_",eC]):by.ofArray([eC]);},ez))).join("");};ce=cd.Policy=er.Class({toString:function(){return bi.ReplaceChar(bc["String.get_toUnderscore$1"]((function(ez){return function(eA){return ez(X.p$3(eA));};}(a.id))(this)),"_"," ");}},null,ce);ce.SignIn=new ce({$:0});ce.SignUp=new ce({$:1});ce.EditProfile=new ce({$:2});ce.ResetPassword=new ce({$:3});cf.New=function(ez,eA,eB,eC,eD,eE){return{tipoTelefono:ez,codigoPais:eA,codigoArea:eB,numero:eC,extension:eD,mensajes:eE};};cg=M.TipoTelefono=er.Class({toString:function(){return(function(ez){return function(eA){return ez(X.p$12(eA));};}(a.id))(this);}},null,cg);cg.Movil=new cg({$:0});cg.get_tryParse=function(){return function(ez){return ez==="Movil"?{$:1,$0:cg.Movil}:ez==="Oficina"?{$:1,$0:cg.Oficina}:ez==="Habitacion"?{$:1,$0:cg.Habitacion}:null;};};cg.Oficina=new cg({$:1});cg.Habitacion=new cg({$:2});ch.New=function(ez,eA,eB,eC,eD,eE,eF,eG){return{authorizeIdR:ez,tipoDireccion:eA,linea1:eB,linea2:eC,ciudad:eD,estado:eE,pais:eF,zonaPostal:eG};};ci=M.TipoDireccion=er.Class({toString:function(){return this.$==3?this.$0:(function(ez){return function(eA){return ez(X.p$11(eA));};}(a.id))(this);}},null,ci);ci.Habitacion=new ci({$:0});ci.tryParse=function(ez){var eA;eA=bi.Trim(ez);return eA===""?null:eA==="Habitacion"?{$:1,$0:ci.Habitacion}:eA==="Oficina"?{$:1,$0:ci.Oficina}:eA==="ServicioPostal"?{$:1,$0:ci.ServicioPostal}:{$:1,$0:new ci({$:3,$0:eA})};};ci.Oficina=new ci({$:1});ci.ServicioPostal=new ci({$:2});cj=M.Estado=er.Class({toString:function(){return this.$==2?this.$0:(function(ez){return function(eA){return ez(X.p$5(eA));};}(a.id))(this);}},null,cj);cj.tryParse=function(ez){var eA,eB;eB=bi.Trim(ez).toUpperCase();switch(eB){case"":return null;case"TEXAS":case"TX":return{$:1,$0:cj.Texas};case"FLORIDA":case"FL":return{$:1,$0:cj.Florida};default:return{$:1,$0:new cj({$:2,$0:bi.Trim(ez)})};}};cj.Texas=new cj({$:0});cj.Florida=new cj({$:1});ck=M.Pais=er.Class({toString:function(){return this.$==3?this.$0:(function(ez){return function(eA){return ez(X.p$4(eA));};}(a.id))(this);}},null,ck);ck.USA=new ck({$:0});ck.tryParse=function(ez){var eA,eB;eB=bi.Trim(ez).toUpperCase();switch(eB){case"":return null;case"USA":case"AMERICA":case"E.E.U.U.":case"US":case"UNITED STATES OF AMERICA":case"UNITED STATES":case"EEUU":return{$:1,$0:ck.USA};case"VENEZUELA":return{$:1,$0:ck.Venezuela};case"ARGENTINA":return{$:1,$0:ck.Argentina};default:return{$:1,$0:new ck({$:3,$0:bi.Trim(ez)})};}};ck.Venezuela=new ck({$:1});ck.Argentina=new ck({$:2});cl=M.ZonaPostal=er.Class({toString:function(){return this.$0;}},null,cl);cl.tryParse=function(ez){return bi.Trim(ez)!==""?{$:1,$0:new cl({$:0,$0:bi.Trim(ez)})}:null;};cm.New=function(ez,eA,eB,eC){return{titular:ez,tipoTarjeta:eA,numero:eB,expiracion:eC};};cn=M.Expiracion=er.Class({},null,cn);cn.New=function(ez,eA){return new cn({anio:ez,mes:eA});};co=M.NumeroTarjeta=er.Class({get_Id:function(){return this.$0;}},null,co);cp=M.TipoTarjeta=er.Class({toString:function(){return this.$==3?this.$0:(function(ez){return function(eA){return ez(X.p$8(eA));};}(a.id))(this);}},null,cp);cp.Visa=new cp({$:0});cp.tryParse=function(ez){var eA,eB;eB=bi.Trim(ez).toUpperCase();switch(eB){case"":return null;case"VISA":return{$:1,$0:cp.Visa};case"MASTERCARD":return{$:1,$0:cp.MasterCard};case"AMERICAN EXPRESS":case"AMEX":return{$:1,$0:cp.Amex};default:return{$:1,$0:new cp({$:3,$0:bi.Trim(ez)})};}};cp.MasterCard=new cp({$:1});cp.Amex=new cp({$:2});cq=M.TipoCuenta=er.Class({toString:function(){return this.$==2?this.$0:(function(ez){return function(eA){return ez(X.p$9(eA));};}(a.id))(this);}},null,cq);cq.Ahorro=new cq({$:0});cq.tryParse=function(ez){var eA,eB;eB=bi.Trim(ez).toUpperCase();switch(eB){case"":return null;case"AHORRO":case"SAVINGS":return{$:1,$0:cq.Ahorro};case"CORRIENTE":case"CHECKING":return{$:1,$0:cq.Corriente};default:return{$:1,$0:new cq({$:2,$0:bi.Trim(ez)})};}};cq.Corriente=new cq({$:1});cr.Masculino={$:0};cr.tryParse=function(ez){var eA;eA=bi.Trim(ez);return eA==="Masculino"?{$:1,$0:cr.Masculino}:eA==="Femenino"?{$:1,$0:cr.Femenino}:eA==="Empresa"?{$:1,$0:cr.Empresa}:null;};cr.Femenino={$:1};cr.Empresa={$:2};cs.AjaxProvider=function(){c7.$cctor();return c7.AjaxProvider;};cs.set_EndPoint=function(ez){c7.$cctor();c7.EndPoint=ez;};cs.makePayload=function(ez){return ew.stringify(ez);};cs.makeHeaders=function(ez){return{"content-type":"application/json","x-websharper-rpc":ez};};cs.EndPoint=function(){c7.$cctor();return c7.EndPoint;};cs.ajax=function(ez,eA,eB,eC,eD,eE,eF){var eG,eH,eI;eG=new a.XMLHttpRequest();eH=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");eG.open("POST",eA,ez);if(ez==true)eG.withCredentials=true;for(var eK in eB)eG.setRequestHeader(eK,eB[eK]);if(eH)eG.setRequestHeader("x-csrftoken",eH);function eJ(){var eL;if(eG.status==200)eD(eG.responseText);else if(eF&&eG.status==403&&eG.responseText=="CSRF")eF();else{eL="Response status is not 200: ";eE(new c9(eL+eG.status));}}if("onload"in eG)eG.onload=eG.onerror=eG.onabort=eJ;else eG.onreadystatechange=function(){if(eG.readyState==4)eJ();};eG.send(eC);};ct.New$1=function(ez,eA,eB,eC){return c8.newPojoOpt([cd.op_EqualsEqualsGreater("auth",ez),cd.op_EqualsEqualsGreater("cache",eA),cd.op_EqualsEqualsGreater("system",eB),cd.op_EqualsEqualsGreater("framework",eC)]);};cu.New$1=function(ez,eA,eB,eC,eD,eE){return c8.newPojoOpt([cd.op_MinusMinusGreater("clientId",ez),cd.op_EqualsEqualsGreater("authority",eA),cd.op_EqualsEqualsGreater("validateAuthority",eB),cd.op_EqualsEqualsGreater("redirectUri",eC),cd.op_EqualsEqualsGreater("postLogoutRedirectUri",eD),cd.op_EqualsEqualsGreater("navigateToLoginRequestUrl",eE)]);};cw=cv.MailboxProcessor=er.Class({PostAndAsyncReply:function(ez,eA){var eB,eC;eB=this;eC=null;return cQ.Delay(function(){return cQ.Bind(eB.PostAndTryAsyncReply(ez,eA),function(eD){var eE,eF;if(eD!=null&&eD.$==1)eF=eD.$0;else throw new c_.New();return cQ.Return(eF);});});},PostAndTryAsyncReply:function(ez,eA){var eB,eC,eD;function eE(eF){var eH;function eG(eI){return{$:1,$0:eI};}if(eC<0){eB.mailbox.AddLast(ez(function(eI){return eF(eG(eI));}));eB.resume();}else{eH=[true];eB.mailbox.AddLast(ez(function(eI){if(eH[0]){eH[0]=false;eF({$:1,$0:eI});}}));eB.resume();a.setTimeout(function(){if(eH[0]){eH[0]=false;eF(null);}},eC);}}eB=this;eC=(eD=this.get_DefaultTimeout(),eA==null?eD:eA.$0);return cQ.FromContinuations(function(eF,eG,eH){return eE.apply(null,[eF,eG,eH]);});},get_DefaultTimeout:function(){return this.DefaultTimeout;},Receive:function(ez){var eA,eB;eA=this;eB=null;return cQ.Delay(function(){return cQ.Bind(eA.TryReceive(ez),function(eC){var eD,eE;if(eC!=null&&eC.$==1)eE=eC.$0;else throw new c_.New();return cQ.Return(eE);});});},resume:function(){var ez;ez=this.savedCont;ez!=null&&ez.$==1?(this.savedCont=null,this.startAsync(ez.$0)):void 0;},Start:function(){var ez,eA;ez=this;this.started?o.FailWith("The MailboxProcessor has already been started."):(this.started=true,ez.startAsync((eA=null,cQ.Delay(function(){return cQ.TryWith(cQ.Delay(function(){return cQ.Bind(ez.initial(ez),function(){return cQ.Return(null);});}),function(eB){ez.errorEvent.event.Trigger(eB);return cQ.Zero();});}))));},TryReceive:function(ez){var eA,eB,eC;function eD(eE){var eF,eG,eH,eI;if(J.Equals(eA.mailbox.n,null)){if(eB<0){eA.savedCont={$:1,$0:(eF=null,cQ.Delay(function(){eE({$:1,$0:eA.dequeue()});return cQ.Zero();}))};}else{eG=[true];eH=a.setTimeout(function(){if(eG[0]){eG[0]=false;eA.savedCont=null;eE(null);}},eB);eA.savedCont={$:1,$0:(eI=null,cQ.Delay(function(){return eG[0]?(eG[0]=false,a.clearTimeout(eH),eE({$:1,$0:eA.dequeue()}),cQ.Zero()):cQ.Zero();}))};}}else eE({$:1,$0:eA.dequeue()});}eA=this;eB=(eC=this.get_DefaultTimeout(),ez==null?eC:ez.$0);return cQ.FromContinuations(function(eE,eF,eG){return eD.apply(null,[eE,eF,eG]);});},startAsync:function(ez){cQ.Start(ez,this.token);},dequeue:function(){var ez;ez=this.mailbox.n.v;this.mailbox.RemoveFirst();return ez;}},g,cw);cw.Start=function(ez,eA){var eB;eB=new cw.New(ez,eA);eB.Start();return eB;};cw.New=er.Ctor(function(ez,eA){var eB,eC;function eD(eE){return eB.resume();}eB=this;g.New.call(this);this.initial=ez;this.token=eA;this.started=false;this.errorEvent=new dy.New();this.mailbox=new dz.New();this.savedCont=null;eC=this.token;eC==null?void 0:cQ.Register(eC.$0,function(){eD();});this.DefaultTimeout=-1;},cw);cx.callA=function(ez,eA){return cx.iterA(ez,function(eB){var eC,eD,eE;eC=eB[0];eD=eB[1];eE=null;return cQ.Delay(function(){return cQ.Bind(eA(eD),function(eF){eC(eF);return cQ.Zero();});});});};cx.iterA=function(ez,eA){return cw.Start(function(eB){var eC;eC=null;return cQ.Delay(function(){return cQ.While(function(){return true;},cQ.Delay(function(){return cQ.TryWith(cQ.Delay(function(){return cQ.Bind(eB.Receive(null),function(eD){return cQ.Bind(eA(eD),function(){return cQ.Return(null);});});}),function(eD){ez(eD);return cQ.Zero();});}));});},null);};j.REGEX$2=function(ez,eA,eB){var eC;return eB===null?null:(eC=(new a.String(eB)).match(new a.RegExp(ez,eA)),J.Equals(eC,null)?null:!J.Equals(eC,null)&&eC.length===0?null:{$:1,$0:eC});};j.rexEmail$1=function(){_5.$cctor();return _5.rexEmail;};cy.DefaultEP={$:0};cz.InstallHash=function(ez,eA){var eB;eB=i.Create$1(cz.getCurrentHash(function(eC){return dc.Parse(eA,dd.FromHash(eC,{$:1,$0:true}));},ez));cz.InstallHashInto(eB,ez,eA);return eB;};cz.InstallHashInto=function(ez,eA,eB){function eC(eF){return dc.Parse(eB,dd.FromHash(eF,{$:1,$0:true}));}function eD(){return cz.getCurrentHash(eC,eA);}function eE(eF){if(!J.Equals(ez.Get(),eF))ez.Set(eF);}self.addEventListener("popstate",function(){return eE(eD());},false);self.addEventListener("hashchange",function(){return eE(eD());},false);self.document.body.addEventListener("click",function(eF){var eG,eH,eI;eG=(eH=cz.findLinkHref(eF.target),eH==null?null:(eI=eH.$0,bi.StartsWith(eI,"#")?eC(eI):null));return eG==null?null:(eE(eG.$0),eF.preventDefault());},false);p.Sink(function(eF){var eG;if(!J.Equals(eF,eD())){eG=dc.HashLink(eB,eF);self.history.pushState(null,null,eG);}},ez.get_View());};cz.getCurrentHash=function(ez,eA){var eB,eC;eB=self.location.hash;eC=ez(eB);return eC==null?((function(eD){return function(eE){return eD("Failed to parse route: "+bC.toSafe(eE));};}(function(eD){eu.log(eD);}))(eB),eA):eC.$0;};cz.findLinkHref=function(ez){while(true)if(ez.tagName==="A")return L.ofObj(ez.getAttribute("href"));else if(ez===self.document.body)return null;else ez=ez.parentNode;};cA.serverEndPoint=function(){_5.$cctor();return _5.serverEndPoint;};cB=M.IdPayment=er.Class({get_Id:function(){return this.$0;}},null,cB);cC.New=function(ez,eA){return{qryName:ez,qryFunction:eA};};_4.Obsolete=function(ez){var eA,eB,eC,eD,eE;eB=ez.s;if(eB==null||(eB!=null&&eB.$==2?(eA=eB.$1,false):eB!=null&&eB.$==3?(eA=eB.$1,false):true))void 0;else{ez.s=null;for(eC=0,eD=T.length(eA)-1;eC<=eD;eC++){eE=T.get(eA,eC);typeof eE=="object"?function(eF){_4.Obsolete(eF);}(eE):eE();}}};_4.New=function(ez){return{s:ez};};cD=bf.FSharpMap=er.Class({TryGetValue:function(ez,eA){var eB;eB=this.TryFind(ez);return eB!=null&&eB.$==1&&(eA.set(eB.$0),true);},get_Item:function(ez){var eA;eA=this.TryFind(ez);return eA==null?o.FailWith("The given key was not present in the dictionary."):eA.$0;},TryFind:function(ez){var eA;eA=cG.TryFind(dE.New(ez,void 0),this.tree);return eA==null?null:{$:1,$0:eA.$0.Value};},Equals:function(ez){return this.get_Count()===ez.get_Count()&&bb.forall2(J.Equals,this,ez);},GetEnumerator$1:function(){return cE.Get(bb.map(function(ez){return{K:ez.Key,V:ez.Value};},cG.Enumerate(false,this.tree)));},get_Count:function(){var ez;ez=this.tree;return ez==null?0:ez.Count;},GetHashCode:function(){return J.Hash(T.ofSeq(this));},Add:function(ez,eA){return new cD.New$1(cG.Add(dE.New(ez,eA),this.tree));},get_IsEmpty:function(){return this.tree==null;},get_Tree:function(){return this.tree;},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(ez){return bb.compareWith(J.Compare,this,ez);},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,cD);cD.New=er.Ctor(function(ez){cD.New$1.call(this,de.fromSeq(ez));},cD);cD.New$1=er.Ctor(function(ez){g.New.call(this);this.tree=ez;},cD);cE.Get=function(ez){return ez instanceof a.Array?cE.ArrayEnumerator(ez):J.Equals(typeof ez,"string")?cE.StringEnumerator(ez):ez.GetEnumerator();};cE.ArrayEnumerator=function(ez){return new cF.New(0,null,function(eA){var eB;eB=eA.s;return eB<T.length(ez)&&(eA.c=T.get(ez,eB),eA.s=eB+1,true);},void 0);};cE.StringEnumerator=function(ez){return new cF.New(0,null,function(eA){var eB;eB=eA.s;return eB<ez.length&&(eA.c=ez[eB],eA.s=eB+1,true);},void 0);};cE.Get0=function(ez){return ez instanceof a.Array?cE.ArrayEnumerator(ez):J.Equals(typeof ez,"string")?cE.StringEnumerator(ez):"GetEnumerator0"in ez?ez.GetEnumerator0():ez.GetEnumerator();};cF=cE.T=er.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,cF);cF.New=er.Ctor(function(ez,eA,eB,eC){g.New.call(this);this.s=ez;this.c=eA;this.n=eB;this.d=eC;},cF);cG.OfSeq=function(ez){var eA;eA=T.ofSeq(bb.distinct(ez));T.sortInPlace(eA);return cG.Build(eA,0,eA.length-1);};cG.Contains=function(ez,eA){return!((cG.Lookup(ez,eA))[0]==null);};cG.Remove=function(ez,eA){var eB,eC,eD,eE;eB=cG.Lookup(ez,eA);eC=eB[0];eD=eB[1];return eC==null?eA:eC.Right==null?cG.Rebuild(eD,eC.Left):eC.Left==null?cG.Rebuild(eD,eC.Right):cG.Rebuild(eD,(eE=T.ofSeq(bb.append(cG.Enumerate(false,eC.Left),cG.Enumerate(false,eC.Right))),cG.Build(eE,0,eE.length-1)));};cG.Add=function(ez,eA){return cG.Put(function(eB,eC){return eC;},ez,eA);};cG.TryFind=function(ez,eA){var eB;eB=(cG.Lookup(ez,eA))[0];return eB==null?null:{$:1,$0:eB.Node};};cG.Build=function(ez,eA,eB){var eC,eD,eE;return eB-eA+1<=0?null:(eC=(eA+eB)/2>>0,(eD=cG.Build(ez,eA,eC-1),(eE=cG.Build(ez,eC+1,eB),cG.Branch(T.get(ez,eC),eD,eE))));};cG.Lookup=function(ez,eA){var eB,eC,eD,eE;eB=[];eC=eA;eD=true;while(eD)if(eC==null)eD=false;else{eE=J.Compare(ez,eC.Node);eE===0?eD=false:eE===1?(eB.unshift([true,eC.Node,eC.Left]),eC=eC.Right):(eB.unshift([false,eC.Node,eC.Right]),eC=eC.Left);}return[eC,eB];};cG.Rebuild=function(ez,eA){var eB,eD,eE,eF,eG,eH,eI,eJ,eK,eL;function eC(eM){return eM==null?0:eM.Height;}eB=eA;for(eD=0,eE=T.length(ez)-1;eD<=eE;eD++){eB=(eF=T.get(ez,eD),eF[0]?(eG=eF[1],(eH=eF[2],eC(eB)>eC(eH)+1?eC(eB.Left)===eC(eB.Right)+1?(eI=eB.Left,cG.Branch(eI.Node,cG.Branch(eG,eH,eI.Left),cG.Branch(eB.Node,eI.Right,eB.Right))):cG.Branch(eB.Node,cG.Branch(eG,eH,eB.Left),eB.Right):cG.Branch(eG,eH,eB))):(eJ=eF[1],(eK=eF[2],eC(eB)>eC(eK)+1?eC(eB.Right)===eC(eB.Left)+1?(eL=eB.Right,cG.Branch(eL.Node,cG.Branch(eB.Node,eB.Left,eL.Left),cG.Branch(eJ,eL.Right,eK))):cG.Branch(eB.Node,eB.Left,cG.Branch(eJ,eB.Right,eK)):cG.Branch(eJ,eB,eK))));}return eB;};cG.Put=function(ez,eA,eB){var eC,eD;eC=cG.Lookup(eA,eB);eD=eC[0];return eD==null?cG.Rebuild(eC[1],cG.Branch(eA,null,null)):cG.Rebuild(eC[1],cG.Branch(ez(eD.Node,eA),eD.Left,eD.Right));};cG.Branch=function(ez,eA,eB){var eC,eD;return df.New(ez,eA,eB,1+(eC=eA==null?0:eA.Height,(eD=eB==null?0:eB.Height,J.Compare(eC,eD)===1?eC:eD)),1+(eA==null?0:eA.Count)+(eB==null?0:eB.Count));};cG.Enumerate=function(ez,eA){function eB(eC,eD){var eE;while(true)if(eC==null)return eD.$==1?{$:1,$0:[eD.$0[0],[eD.$0[1],eD.$1]]}:null;else if(ez){eE=eC;eC=eE.Right;eD=new cH({$:1,$0:[eE.Node,eE.Left],$1:eD});}else{eE=eC;eC=eE.Left;eD=new cH({$:1,$0:[eE.Node,eE.Right],$1:eD});}}return bb.unfold(function(eC){return eB(eC[0],eC[1]);},[eA,cH.Empty]);};bb.tryHead=function(ez){var eA;eA=cE.Get(ez);try{return eA.MoveNext()?{$:1,$0:eA.Current()}:null;}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}};T.groupBy=function(ez,eA){var eB,eC,eD,eE,eF,eG;eB=new b1.New$5();eC=[];for(eD=0,eE=T.length(eA)-1;eD<=eE;eD++){eF=eA[eD];eG=ez(eF);eB.ContainsKey(eG)?eB.get_Item(eG).push(eF):(eC.push(eG),eB.Add(eG,[eF]));}T.mapInPlace(function(eH){return[eH,eB.get_Item(eH)];},eC);return eC;};bb.tryItem=function(ez,eA){var eB,eC,eD;if(ez<0)return null;else{eB=0;eC=cE.Get(eA);try{eD=true;while(eD&&eB<=ez)if(eC.MoveNext())eB=eB+1;else eD=false;return eD?{$:1,$0:eC.Current()}:null;}finally{if(typeof eC=="object"&&"Dispose"in eC)eC.Dispose();}}};bb.last=function(ez){var eA,eB;eA=cE.Get(ez);try{if(!eA.MoveNext())eB=bb.insufficient();else{while(eA.MoveNext());eB=eA.Current();}return eB;}finally{if(typeof eA=="object"&&"Dispose"in eA)eA.Dispose();}};T.mapInPlace=function(ez,eA){var eB,eC;for(eB=0,eC=eA.length-1;eB<=eC;eB++)eA[eB]=ez(eA[eB]);};T.mapiInPlace=function(ez,eA){var eB,eC;for(eB=0,eC=eA.length-1;eB<=eC;eB++)eA[eB]=ez(eB,eA[eB]);return eA;};bb.insufficient=function(){return o.FailWith("The input sequence has an insufficient number of elements.");};bb.nonNegative=function(){return o.FailWith("The input must be non-negative.");};cH=by.T=er.Class({GetEnumerator:function(){return new cF.New(this,null,function(ez){var eA;eA=ez.s;return eA.$==0?false:(ez.c=eA.$0,ez.s=eA.$1,true);},void 0);},GetEnumerator0:function(){return cE.Get(this);}},null,cH);cH.Empty=new cH({$:0});cI.rtn=function(ez){return cQ.Return({$:0,$0:ez});};cI.bind=function(ez,eA){var eB;eB=null;return cQ.Delay(function(){return cQ.Bind(eA,function(eC){return eC.$==1?cQ.Return(bc.Error$1(eC.$0)):ez(eC.$0);});});};cI.iterA=function(ez,eA,eB){function eC(eE){bE.iter(ez,eA,eE);}function eD(eE){return cQ.Return(eE);}cQ.Start(cQ.Bind(eB,function(eE){return eD(eC(eE));}),null);};cI.map=function(ez,eA){return cI.bind(function(eB){return cI.rtn(ez(eB));},eA);};cI.absorbO=function(ez,eA){function eB(eD){return bE.absorbO(ez,eD);}function eC(eD){return cQ.Return(eD);}return cQ.Bind(eA,function(eD){return eC(eB(eD));});};cI.rtnR=function(ez){return cQ.Return(ez);};cI.whileLoop=function(ez,eA){return ez()?cI.bind(function(){return cI.whileLoop(ez,eA);},eA()):cI.rtn();};cJ=cs.AjaxRemotingProvider=er.Class({AsyncBase:function(ez,eA){var eB,eC;eB=this;eC=null;return cQ.Delay(function(){var eD,eE;eD=cs.makeHeaders(ez);eE=cs.makePayload(eA);return cQ.Bind(cQ.GetCT(),function(eF){return cQ.FromContinuations(function(eG,eH,eI){var eJ,eK,eL;function eM(eN){return eJ[0]?(eJ[0]=false,eI(new d3.New(eF))):null;}eJ=[true];eK=cQ.Register(eF,function(){eM();});eL=eB.get_EndPoint();return cs.AjaxProvider().Async(eL,eD,eE,function(eN){if(eJ[0]){eJ[0]=false;eK.Dispose();eG(ee.Activate(ew.parse(eN)));}},function(eN){if(eJ[0]){eJ[0]=false;eK.Dispose();eH(eN);}});});});});},get_EndPoint:function(){return cs.EndPoint();},Async:function(ez,eA){return this.AsyncBase(ez,eA);}},g,cJ);cJ.New=er.Ctor(function(){g.New.call(this);},cJ);cK.replace=function(ez,eA,eB){return T.ofSeq(bb.delay(function(){return bb.append(ez>0?ca.array(eB,null,{$:1,$0:ez-1}):[],bb.delay(function(){return bb.append([eA],bb.delay(function(){return ez<T.length(eB)?ca.array(eB,{$:1,$0:ez+1},null):[];}));}));}));};cK.remove=function(ez,eA){return T.ofSeq(bb.delay(function(){return bb.append(ez>0?ca.array(eA,null,{$:1,$0:ez-1}):[],bb.delay(function(){return ez<T.length(eA)?ca.array(eA,{$:1,$0:ez+1},null):[];}));}));};cL=M.Subscripcion=er.Class({get_Short:function(){return((((((er.Curried(function(ez,eA,eB,eC,eD,eE){return ez(bC.toSafe(eA)+" "+bC.toSafe(eB)+" $"+a.String(eC)+".00 "+bC.toSafe(eD)+" "+a.String(eE));},6))(a.id))(this.idSubscripcion.get_Id()))(bI.toYYYYMMDD("-",this.inicio)))(this.monto))(this.descripcion))(this.status);}},null,cL);cM.formaDocO=function(ez){var eA;return cM.formaDoc(i.Lens(ez,(eA=[M.ctaVacio(),"",false],function(eB){return eB==null?eA:eB.$0;}),function(eB,eC){return{$:1,$0:eC};}));};cM.formaDoc=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL;function eM(eN,eO,eP){eB.Hole("titular").Set(eN.titular);eB.Hole("banco").Set(eN.banco);eB.Hole("tipocuenta").Set((function(eQ){return function(eR){return eQ(a.String(eR));};}(a.id))(eN.tipo));eB.Hole("numero").Set(eN.numero.$0);eB.Hole("routing").Set(eN.routing.$0);}eA=p.Map(function(eN){return bt.thr3(eN[0],eN[1],eN[2]);},ez.get_View());eB=(eC=(eD=cU.DynamicPred("disabled",eA,p.Const("")),(eE=cU.DynamicPred("disabled",eA,p.Const("")),(eF=cU.DynamicPred("disabled",eA,p.Const("")),(eG=cU.DynamicPred("disabled",eA,p.Const("")),(eH=cU.DynamicPred("disabled",eA,p.Const("")),(eI=Z.EmbedView(p.Map(bt.crearOptions,bt.tiposCta().get_View())),U.Make().WithHole({$:0,$0:"tiposcuenta",$1:eI})).WithHole({$:2,$0:"mensaje",$1:p.Map(function(eN){return bt.snd3(eN[0],eN[1],eN[2]);},ez.get_View())}).WithHole({$:3,$0:"disabled1",$1:eH})).WithHole({$:3,$0:"disabled2",$1:eG})).WithHole({$:3,$0:"disabled3",$1:eF})).WithHole({$:3,$0:"disabled4",$1:eE})).WithHole({$:3,$0:"disabled5",$1:eD})),(eJ=V.CompleteHoles(eC.k,eC.h,[["tipocuenta",0],["titular",0],["numero",0],["banco",0],["routing",0]]),(eK=new S.New(eJ[1],W.cuentabancaria(eJ[0])),(eC.i=eK,eK))));p.Sink(function(eN){return eM(eN[0],eN[1],eN[2]);},ez.get_View());eL=p.Apply(p.Apply(p.Map2(function(eN,eO){return function(eP){return function(eQ){return bb.map(function(eR){return eR[1];},bb.filter(function(eR){return eR[0];},by.ofArray([[bi.Trim(eN)==="","Titular"],[bi.Trim(eO)==="","Banco"],[bi.Trim(eP)==="","Numero de Cuenta"],[bi.Trim(eQ)==="","ABA/Routing Number"]])));};};},eB.Hole("titular").get_View(),eB.Hole("banco").get_View()),eB.Hole("numero").get_View()),eB.Hole("routing").get_View());p.Sink(function(eN){var eO,eP;if(eN!=null&&eN.$==1){eO=eN.$0;!J.Equals((eP=ez.Get(),bt.fst3(eP[0],eP[1],eP[2])),eO)?ez.Set([eO,"",false]):void 0;}},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eN,eO){return er.Curried(function(eP,eQ,eR,eS){return!bb.isEmpty(eN)?null:bt.alertIfNone("TipoCuenta",cq.tryParse(bi.Trim(eO)),function(eT){var eU;return{$:1,$0:(eU=bi.Trim(eP),bz.New(bi.Trim(eQ),eU,eT,new bB({$:0,$0:bi.Trim(eR)}),new bA({$:0,$0:bi.Trim(eS)})))};});},4);},eL,eB.Hole("tipocuenta").get_View()),eB.Hole("banco").get_View()),eB.Hole("titular").get_View()),eB.Hole("numero").get_View()),eB.Hole("routing").get_View()));return[eL,eB.get_Doc()];};cN.formaDocO=function(ez){var eA;return cN.formaDoc(i.Lens(ez,(eA=[M.tarVacio(),"",false],function(eB){return eB==null?eA:eB.$0;}),function(eB,eC){return{$:1,$0:eC};}));};cN.formaDoc=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO;function eP(eQ,eR,eS){var eT;eB.Hole("titular").Set(eQ.titular);eB.Hole("tipotarjeta").Set((function(eU){return function(eV){return eU(a.String(eV));};}(a.id))(eQ.tipoTarjeta));eB.Hole("numero").Set(eQ.numero.$0);eB.Hole("aniovenc").Set((function(eU){return function(eV){return eU(bC.padNumLeft(a.String(eV),4));};}(a.id))(eQ.expiracion.anio));eB.Hole("mesvenc").Set((eT=eQ.expiracion.mes,eT===1?"Enero":eT===2?"Febrero":eT===3?"Marzo":eT===4?"Abril":eT===5?"Mayo":eT===6?"Junio":eT===7?"Julio":eT===8?"Agosto":eT===9?"Septiembre":eT===10?"Octubre":eT===11?"Noviembre":eT===12?"Diciembre":"XX"));}eA=p.Map(function(eQ){return bt.thr3(eQ[0],eQ[1],eQ[2]);},ez.get_View());eB=(eC=(eD=cU.Dynamic("style",p.Map(function(eQ){return eQ?"display:None":"";},eA)),(eE=cU.DynamicPred("disabled",eA,p.Const("")),(eF=cU.DynamicPred("disabled",eA,p.Const("")),(eG=cU.DynamicPred("disabled",eA,p.Const("")),(eH=cU.DynamicPred("disabled",eA,p.Const("")),(eI=cU.DynamicPred("disabled",eA,p.Const("")),(eJ=Z.EmbedView(p.Map(function(eQ){return bt.crearOptions(bb.map(a.String,eQ));},bt.mesesV().get_View())),(eK=Z.EmbedView(p.Map(function(eQ){return bt.crearOptions(bb.map(a.String,eQ));},bt.aniosV().get_View())),(eL=Z.EmbedView(p.Map(bt.crearOptions,bt.tiposTar().get_View())),U.Make().WithHole({$:0,$0:"tipostarjeta",$1:eL})).WithHole({$:2,$0:"mensaje",$1:p.Map(function(eQ){return bt.snd3(eQ[0],eQ[1],eQ[2]);},ez.get_View())}).WithHole({$:0,$0:"anios",$1:eK})).WithHole({$:0,$0:"meses",$1:eJ})).WithHole({$:3,$0:"disabled1",$1:eI})).WithHole({$:3,$0:"disabled2",$1:eH})).WithHole({$:3,$0:"disabled3",$1:eG})).WithHole({$:3,$0:"disabled4",$1:eF})).WithHole({$:3,$0:"disabled5",$1:eE})).WithHole({$:3,$0:"visible",$1:eD})),(eM=V.CompleteHoles(eC.k,eC.h,[["tipotarjeta",0],["titular",0],["numero",0],["aniovenc",0],["mesvenc",0]]),(eN=new S.New(eM[1],W.tarjetacredito(eM[0])),(eC.i=eN,eN))));p.Sink(function(eQ){return eP(eQ[0],eQ[1],eQ[2]);},ez.get_View());eO=p.Apply(p.Apply(p.Apply(p.Map2(function(eQ,eR){return er.Curried3(function(eS,eT,eU){return bb.map(function(eV){return eV[1];},bb.filter(function(eV){return eV[0];},by.ofArray([[bi.Trim(eQ)==="","Titular"],[bi.Trim(eR)==="","TipoTarjeta"],[bi.Trim(eS)==="","Numero"],[bi.Trim(eT)==="","Ano de Vencimiento"],[bi.Trim(eU)==="","Mes de Vencimiento"]])));});},eB.Hole("titular").get_View(),eB.Hole("tipotarjeta").get_View()),eB.Hole("numero").get_View()),eB.Hole("aniovenc").get_View()),eB.Hole("mesvenc").get_View());p.Sink(function(eQ){var eR,eS;if(eQ!=null&&eQ.$==1){eR=eQ.$0;!J.Equals((eS=ez.Get(),bt.fst3(eS[0],eS[1],eS[2])),eR)?ez.Set([eR,"",false]):void 0;}},p.Apply(p.Apply(p.Apply(p.Apply(p.Map2(function(eQ,eR){return er.Curried(function(eS,eT,eU,eV){return!bb.isEmpty(eQ)?null:bt.alertIfNone("Tipo Tarjeta",cp.tryParse(bi.Trim(eR)),function(eW){var eX,eY,eZ;return{$:1,$0:cm.New(bi.Trim(eS),eW,new co({$:0,$0:bi.Trim(eT)}),cn.New((eX=(eY=bi.Trim(eU),(cb.parseIntO$1())(eY)),eX==null?0:eX.$0),(eZ=bi.Trim(eV),eZ==="Febrero"?2:eZ==="Marzo"?3:eZ==="Abril"?4:eZ==="Mayo"?5:eZ==="Junio"?6:eZ==="Julio"?7:eZ==="Agosto"?8:eZ==="Septiembre"?9:eZ==="Octubre"?10:eZ==="Noviembre"?11:eZ==="Diciembre"?12:1)))};});},4);},eO,eB.Hole("tipotarjeta").get_View()),eB.Hole("titular").get_View()),eB.Hole("numero").get_View()),eB.Hole("aniovenc").get_View()),eB.Hole("mesvenc").get_View()));return[eO,eB.get_Doc()];};cP=h.FromView=er.Class({get_View:function(){return this.view;},Set:function(ez){this.set(ez);},Get:function(){return this.current;},Update:function(ez){var eA;p.Get((eA=this.set,function(eB){return eA(ez(eB));}),this.view);},UpdateMaybe:function(ez){var eA;eA=this;p.Get(function(eB){var eC;eC=ez(eB);eC!=null&&eC.$==1?eA.set(eC.$0):void 0;},this.view);}},q,cP);cP.New=er.Ctor(function(ez,eA){var eB,eC;eB=this;q.New.call(this);this.set=eA;this.id=b6.Int();this.current=(eC=p.TryGet(ez),eC==null?null:eC.$0);this.view=p.Map(function(eD){eB.current=eD;return eD;},ez);},cP);cQ.Delay=function(ez){return function(eA){try{(ez(null))(eA);}catch(eB){eA.k({$:1,$0:eB});}};};cQ.Bind=function(ez,eA){return cQ.checkCancel(function(eB){ez(dj.New(function(eC){var eD;if(eC.$==0){eD=eC.$0;cQ.scheduler().Fork(function(){try{(eA(eD))(eB);}catch(eE){eB.k({$:1,$0:eE});}});}else cQ.scheduler().Fork(function(){eB.k(eC);});},eB.ct));});};cQ.Return=function(ez){return function(eA){eA.k({$:0,$0:ez});};};cQ.Start=function(ez,eA){var eB,eC;eB=(eC=(cQ.defCTS())[0],eA==null?eC:eA.$0);cQ.scheduler().Fork(function(){if(!eB.c)ez(dj.New(function(eD){if(eD.$==1)cQ.UncaughtAsyncError(eD.$0);},eB));});};cQ.Zero=function(){dn.$cctor();return dn.Zero;};cQ.Sleep=function(ez){return function(eA){var eB,eC;eB=void 0;eC=void 0;eB=a.setTimeout(function(){eC.Dispose();cQ.scheduler().Fork(function(){eA.k({$:0,$0:null});});},ez);eC=cQ.Register(eA.ct,function(){a.clearTimeout(eB);cQ.scheduler().Fork(function(){cQ.cancel(eA);});});};};cQ.While=function(ez,eA){return ez()?cQ.Bind(eA,function(){return cQ.While(ez,eA);}):cQ.Return();};cQ.checkCancel=function(ez){return function(eA){if(eA.ct.c)cQ.cancel(eA);else ez(eA);};};cQ.defCTS=function(){dn.$cctor();return dn.defCTS;};cQ.UncaughtAsyncError=function(ez){eu.log("WebSharper: Uncaught asynchronous exception",ez);};cQ.FromContinuations=function(ez){return function(eA){var eB;function eC(eD){if(eB[0])o.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{eB[0]=true;cQ.scheduler().Fork(eD);}}eB=[false];ez(function(eD){eC(function(){eA.k({$:0,$0:eD});});},function(eD){eC(function(){eA.k({$:1,$0:eD});});},function(eD){eC(function(){eA.k({$:2,$0:eD});});});};};cQ.TryWith=function(ez,eA){return function(eB){ez(dj.New(function(eC){if(eC.$==0)eB.k({$:0,$0:eC.$0});else if(eC.$==1)try{(eA(eC.$0))(eB);}catch(eD){eB.k(eC);}else eB.k(eC);},eB.ct));};};cQ.Combine=function(ez,eA){return cQ.Bind(ez,function(){return eA;});};cQ.Register=function(ez,eA){var eB;return ez===cQ.noneCT()?{Dispose:function(){return null;}}:(eB=ez.r.push(eA)-1,{Dispose:function(){return T.set(ez.r,eB,a.ignore);}});};cQ.cancel=function(ez){ez.k({$:2,$0:new d3.New(ez.ct)});};cQ.scheduler=function(){dn.$cctor();return dn.scheduler;};cQ.Using=function(ez,eA){return cQ.TryFinally(eA(ez),function(){ez.Dispose();});};cQ.TryFinally=function(ez,eA){return function(eB){ez(dj.New(function(eC){try{eA();eB.k(eC);}catch(eD){eB.k({$:1,$0:eD});}},eB.ct));};};cQ.noneCT=function(){dn.$cctor();return dn.noneCT;};cQ.StartWithContinuations=function(ez,eA,eB,eC,eD){var eE,eF;eE=(eF=(cQ.defCTS())[0],eD==null?eF:eD.$0);!eE.c?ez(dj.New(function(eG){if(eG.$==1)eB(eG.$0);else if(eG.$==2)eC(eG.$0);else eA(eG.$0);},eE)):void 0;};cQ.GetCT=function(){dn.$cctor();return dn.GetCT;};cR=h.AttrProxy=er.Class({},null,cR);cR.Create=function(ez,eA){return dl.Static(function(eB){dm.SetAttr(eB,ez,eA);});};cR.HandlerImpl=function(ez,eA){return dl.Static(function(eB){eB.addEventListener(ez,function(eC){return(eA(eB))(eC);},false);});};cR.Concat=function(ez){var eA;eA=cS.ofSeqNonCopying(ez);return cS.TreeReduce(dl.EmptyAttr(),cR.Append,eA);};cR.Append=function(ez,eA){return dl.AppendTree(ez,eA);};cR.Handler=function(ez,eA){return cR.HandlerImpl(ez,eA);};cS.ofSeqNonCopying=function(ez){var eA,eB;if(ez instanceof a.Array)return ez;else if(ez instanceof cH)return T.ofList(ez);else if(ez===null)return[];else{eA=[];eB=cE.Get(ez);try{while(eB.MoveNext())eA.push(eB.Current());return eA;}finally{if(typeof eB=="object"&&"Dispose"in eB)eB.Dispose();}}};cS.TreeReduce=function(ez,eA,eB){var eC;function eD(eE,eF){var eG,eH;return eF<=0?ez:eF===1&&(eE>=0&&eE<eC)?T.get(eB,eE):(eH=eF/2>>0,eA(eD(eE,eH),eD(eE+eH,eF-eH)));}eC=T.length(eB);return eD(0,eC);};cS.MapTreeReduce=function(ez,eA,eB,eC){var eD;function eE(eF,eG){var eH,eI;return eG<=0?eA:eG===1&&(eF>=0&&eF<eD)?ez(T.get(eC,eF)):(eI=eG/2>>0,eB(eE(eF,eI),eE(eF+eI,eG-eI)));}eD=T.length(eC);return eE(0,eD);};cS.mapInPlace=function(ez,eA){var eB,eC;for(eB=0,eC=eA.length-1;eB<=eC;eB++)eA[eB]=ez(eA[eB]);return eA;};cT.InMemory=function(ez){return new _do.New(ez);};cU.DynamicPred=function(ez,eA,eB){function eC(eD,eE){return eE[0]?dm.SetAttr(eD,ez,eE[1]):dm.RemoveAttr(eD,ez);}return dl.Dynamic(p.Map2(function(eD,eE){return[eD,eE];},eA,eB),function(eD){return function(eE){return eC(eD,eE);};});};cU.Style=function(ez,eA){return dl.Static(function(eB){dm.SetStyle(eB,ez,eA);});};cU.Dynamic=function(ez,eA){return dl.Dynamic(eA,function(eB){return function(eC){return dm.SetAttr(eB,ez,eC);};});};cU.Handler=function(ez,eA){return dl.Static(function(eB){eB.addEventListener(ez,function(eC){return(eA(eB))(eC);},false);});};cU.DynamicStyle=function(ez,eA){return dl.Dynamic(eA,function(eB){return function(eC){return dm.SetStyle(eB,ez,eC);};});};cU.Value=function(ez){function eA(eB){return{$:1,$0:eB};}return cU.CustomValue(ez,a.id,function(eB){return eA(a.id(eB));});};cU.CustomValue=function(ez,eA,eB){return cU.CustomVar(ez,function(eC,eD){eC.value=eA(eD);},function(eC){return eB(eC.value);});};cU.OnAfterRender=function(ez){return new cR({$:4,$0:ez});};cU.Checked=function(ez){function eA(eB,eC){return!J.Equals(ez.Get(),eB.checked)?ez.Set(eB.checked):null;}return cR.Concat([cU.DynamicProp("checked",ez.get_View()),cU.Handler("change",function(eB){return function(eC){return eA(eB,eC);};})]);};cU.IntValue=function(ez){return cU.CustomVar(ez,function(eA,eB){var eC;eC=eB.get_Input();return eA.value!==eC?void(eA.value=eC):null;},function(eA){var eB,eC,eD;eB=eA.value;return{$:1,$0:eh.isBlank(eB)?(eA.checkValidity?eA.checkValidity():true)?new c3({$:2,$0:eB}):new c3({$:1,$0:eB}):(eC=(eD=0,[bZ.TryParseInt32(eB,{get:function(){return eD;},set:function(eE){eD=eE;}}),eD]),eC[0]?new c3({$:0,$0:eC[1],$1:eB}):new c3({$:1,$0:eB}))};});};cU.IntValueUnchecked=function(ez){return cU.CustomValue(ez,a.String,function(eA){var eB;return eh.isBlank(eA)?{$:1,$0:0}:(eB=+eA,eB!==eB>>0?null:{$:1,$0:eB});});};cU.FloatValue=function(ez){return cU.CustomVar(ez,function(eA,eB){var eC;eC=eB.get_Input();return eA.value!==eC?void(eA.value=eC):null;},function(eA){var eB,eC;eB=eA.value;return{$:1,$0:eh.isBlank(eB)?(eA.checkValidity?eA.checkValidity():true)?new c3({$:2,$0:eB}):new c3({$:1,$0:eB}):(eC=+eB,a.isNaN(eC)?new c3({$:1,$0:eB}):new c3({$:0,$0:eC,$1:eB}))};});};cU.FloatValueUnchecked=function(ez){return cU.CustomValue(ez,a.String,function(eA){var eB;return eh.isBlank(eA)?{$:1,$0:0}:(eB=+eA,a.isNaN(eB)?null:{$:1,$0:eB});});};cU.CustomVar=function(ez,eA,eB){function eC(eE,eF){return ez.UpdateMaybe(function(eG){var eH,eI;eH=eB(eE);return eH!=null&&eH.$==1&&(!J.Equals(eH.$0,eG)&&(eI=[eH,eH.$0],true))?eI[0]:null;});}function eD(eE,eF){var eG,eH;eG=eB(eE);return eG!=null&&eG.$==1&&(J.Equals(eG.$0,eF)&&(eH=eG.$0,true))?null:eA(eE,eF);}return cR.Concat([cU.Handler("change",function(eE){return function(eF){return eC(eE,eF);};}),cU.Handler("input",function(eE){return function(eF){return eC(eE,eF);};}),cU.Handler("keypress",function(eE){return function(eF){return eC(eE,eF);};}),cU.DynamicCustom(function(eE){return function(eF){return eD(eE,eF);};},ez.get_View())]);};cU.DynamicProp=function(ez,eA){return dl.Dynamic(eA,function(eB){return function(eC){eB[ez]=eC;};});};cU.DynamicCustom=function(ez,eA){return dl.Dynamic(eA,ez);};bJ.splitByChar=function(ez,eA){return bi.SplitChars(eA,[ez],0);};bJ.unindent=function(ez){var eA,eB,eC,eD;eA=bi.SplitChars(ez,["\n"],0);eB=(eC=bb.tryFindIndex(function(eE){return" "!==eE;},(eD=bb.tryFind(function(eE){return bi.Trim(eE)!=="";},eA),eD==null?"":eD.$0)),eC==null?0:eC.$0);return bb.filter(function(eE){return!bi.StartsWith(eE,"# 1 ");},bb.map(function(eE){return eE.length<=eB?"":eE.substring(eB);},eA));};bJ.delimitedO=function(ez,eA,eB){var eC,eD,eE,eF,eG;eC=bJ.splitInTwoO(ez,eB);return eC==null?null:(eD=eC.$0,(eE=eD[0],(eF=bJ.splitInTwoO(eA,eD[1]),eF==null?null:{$:1,$0:(eG=eF.$0,[eE,eG[0],eG[1]])})));};bJ.unindentStr=function(){bU.$cctor();return bU.unindentStr;};bJ.StartsWith=function(ez,eA){return bi.StartsWith(eA,ez)?{$:1,$0:ca.string(eA,{$:1,$0:ez.length},null)}:null;};bJ.splitInTwoO=function(ez,eA){var eB;eB=eA.indexOf(ez);return eB===-1?null:{$:1,$0:[bc["String.Left"](eA,eB),eA.substring(eB+ez.length)]};};cV.p$1=function(ez){return"{"+("actName = "+bC.prettyPrint(ez.actName))+"; "+("actFunction = "+cX.p$1(ez.actFunction))+"; "+("actEnabled = "+cX.p$2(ez.actEnabled))+"}";};cW.appfwkclient=function(ez){cW.fixedsplitterhor();cW.fixedsplitterver();c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"appfwkclient"},ez):void 0;};cV.p=function(ez){return"{"+("docName = "+bC.prettyPrint(ez.docName))+"; "+("docDoc = "+cX.p(ez.docDoc))+"}";};cX.p$1=function(ez){return ez.$==2?"FunAct2 (<fun>, "+bC.prettyPrint(ez.$1)+", "+bC.prettyPrint(ez.$2)+")":ez.$==1?"FunAct1 (<fun>, "+bC.prettyPrint(ez.$1)+")":"FunAct0 <fun>";};cX.p$2=function(ez){return"View <fun>";};cW.tile=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"tile"},ez):void 0;};cW.namevalueinput=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"namevalueinput"},ez):void 0;};cW.namevalue=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"namevalue"},ez):void 0;};cW.action=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"action"},ez):void 0;};cW.actiondisabled=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"actiondisabled"},ez):void 0;};cW.fixedsplitterhor=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"fixedsplitterhor"},ez):void 0;};cW.fixedsplitterver=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"fixedsplitterver"},ez):void 0;};cW.wcompsplitterhor=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"wcompsplitterhor"},ez):void 0;};cW.wcompsplitterver=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"wcompsplitterver"},ez):void 0;};cW.appframework=function(ez){c5.LoadLocalTemplates("appframework");return ez?c5.NamedTemplate("appframework",{$:1,$0:"appframework"},ez):void 0;};cX.p=function(ez){return ez.$==5?"FunDoc5 (<fun>, "+bC.prettyPrint(ez.$1)+", "+bC.prettyPrint(ez.$2)+", "+bC.prettyPrint(ez.$3)+", "+bC.prettyPrint(ez.$4)+", "+bC.prettyPrint(ez.$5)+")":ez.$==4?"FunDoc4 (<fun>, "+bC.prettyPrint(ez.$1)+", "+bC.prettyPrint(ez.$2)+", "+bC.prettyPrint(ez.$3)+", "+bC.prettyPrint(ez.$4)+")":ez.$==3?"FunDoc3 (<fun>, "+bC.prettyPrint(ez.$1)+", "+bC.prettyPrint(ez.$2)+", "+bC.prettyPrint(ez.$3)+")":ez.$==2?"FunDoc2 (<fun>, "+bC.prettyPrint(ez.$1)+", "+bC.prettyPrint(ez.$2)+")":ez.$==1?"FunDoc1 (<fun>, "+bC.prettyPrint(ez.$1)+")":"LazyDoc "+bC.prettyPrint(ez.$0);};cb.tryParseWith=function(ez){function eA(eB,eC){return eB?{$:1,$0:eC}:null;}return function(eB){return eA.apply(null,ez(eB));};};cb.parseDateO=function(){bU.$cctor();return bU.parseDateO;};cb.parseIntO=function(){bU.$cctor();return bU.parseIntO;};cb.parseInt64O=function(){bU.$cctor();return bU.parseInt64O;};cb.parseSingleO=function(){bU.$cctor();return bU.parseSingleO;};cb.parseDoubleO=function(){bU.$cctor();return bU.parseDoubleO;};cb.parseGuidO=function(){bU.$cctor();return bU.parseGuidO;};cb.Double=function(){bU.$cctor();return bU["|Double|_|"];};cb.Int=function(){bU.$cctor();return bU["|Int|_|"];};c0=cZ.WcTabStripT=er.Class({connectedCallback:function(){var ez,eA,eB,eC;function eD(){var eE,eF,eG;eF=!eA.hasAttribute("bottom");eG=by.ofSeq(bb.delay(function(){return bb.collect(function(eH){var eI;eI=eA.childNodes[eH-1];return J.Equals(eI.nodeType,G.ELEMENT_NODE)?[[eI.hasAttribute("tabname")?eI.getAttribute("tabname"):(function(eJ){return function(eK){return eJ("Tab "+a.String(eK));};}(a.id))(eH),eI]]:[];},o.range(1,eA.childNodes.length));}));while(eC.childNodes.length>0)eC.removeChild(eC.lastChild);eE=cZ.tabStrip(ez.selected,eF,true,eG,Z.Element("slot",cH.Empty,cH.Empty));c5.LoadLocalTemplates("");Z.Run(eC,eE);}ez=this;!this.added?(eA=this,eB=eA.attachShadow({mode:"open"}),eC=self.document.createElement("div"),eB.appendChild(eC),eD(),eA.addEventListener("DOMSubtreeModified",bc.delayed(50,eD)),this.added=true):void 0;}},g,c0);c0.Constructor=function(){var ez,eA;ez=(eA=ex.construct(self.HTMLElement,[],this.__proto__.constructor),eA);self.FsRoot.LibraryJS.WebComponent.WcTabStrip.WcTabStripT.New.call(ez);return ez;};c0.New=er.Ctor(function(){g.New.call(this);this.added=false;this.selected=i.Create$1(1);(function(ez){return ez("WcTabStripT initializer");}(function(ez){eu.log(ez);}));},c0);cY.defineWebComponent=function(ez,eA,eB){try{eu.log("defineWebComponent: "+ez);cO.setPrototypeOf(eB.prototype,self.HTMLElement.prototype);cO.setPrototypeOf(eB,self.HTMLElement);cO.setPrototypeOf(eA.prototype,eB.prototype);self.customElements.define(ez,eA);}catch(eC){(function(eD){return eD("Failed to define WebComponent. Not supported.");}(function(eD){eu.log(eD);}));}};c1.init=function(ez,eA){var eB;eB=new dt.New();c1.set_layoutHorizontal(ez);c1.set_layoutVertical(eA);cY.defineWebComponent("wcomp-splitter",dt.Constructor,self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New);};c1.set_layoutHorizontal=function(ez){bU.$cctor();bU.layoutHorizontal=ez;};c1.set_layoutVertical=function(ez){bU.$cctor();bU.layoutVertical=ez;};c1.layoutVertical=function(){bU.$cctor();return bU.layoutVertical;};c1.layoutHorizontal=function(){bU.$cctor();return bU.layoutHorizontal;};cZ.init=function(){bU.$cctor();return bU.init;};cZ.tabStrip=function(ez,eA,eB,eC,eD){var eE;eE=Z.Element("div",[cR.Create("class",(((er.Curried3(function(eF,eG,eH){return eF("tab-strip "+bC.toSafe(eG)+" "+bC.toSafe(eH));}))(a.id))(eA?"top":"bottom"))(eB?"horizontal":"vertical"))],by.ofSeq(bb.delay(function(){return bb.collect(function(eF){var eG;eG=eF[0];return[dL.New$1().Content(Z.Element("div",[cU.Dynamic("class",p.Map(function(eH){return"tab"+(eH===eG+1?" selected":"");},ez.get_View())),cR.Create("draggable","true"),cR.HandlerImpl("click",function(){return function(){return ez.Set(eG+1);};})],[Z.TextNode(eF[1][0])]))];},bb.indexed(eC));})));return Z.Element("div",[cR.Create("class","tab-panel")],by.ofSeq(bb.delay(function(){return bb.append(eA?[eE]:[],bb.delay(function(){return bb.append([Z.Element("div",[cR.Create("class","tab-content")],[eD])],bb.delay(function(){return bb.append(!eA?[eE]:[],bb.delay(function(){return bb.append([Z.Element("style",cH.Empty,by.ofArray([Z.TextNode(cZ.css())]))],bb.delay(function(){return[Z.Element("style",cH.Empty,by.ofArray([Z.TextView(p.Map(function(eF){return function(eG){return eF("\r\n                                              ::slotted(*              ) { display: none }\r\n                                              ::slotted(*:nth-child("+a.String(eG)+")) { display: grid }\r\n                                           ");};}(a.id),ez.get_View()))]))];}));}));}));}));})));};cZ.css=function(){bU.$cctor();return bU.css;};c2.notPresent=function(){return o.FailWith("The given key was not present in the dictionary.");};c2.alreadyAdded=function(){return o.FailWith("An item with the same key has already been added.");};c3=h.CheckedInput=er.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,c3);c5.LoadLocalTemplates=function(ez){!c5.LocalTemplatesLoaded()?(c5.set_LocalTemplatesLoaded(true),c5.LoadNestedTemplates(self.document.body,"")):void 0;c5.LoadedTemplates().set_Item(ez,c5.LoadedTemplateFile(""));};c5.NamedTemplate=function(ez,eA,eB){var eC,eD;eC=(eD=null,[c5.LoadedTemplateFile(ez).TryGetValue(eA==null?"":eA.$0,{get:function(){return eD;},set:function(eE){eD=eE;}}),eD]);return eC[0]?c5.ChildrenTemplate(eC[1].cloneNode(true),eB):(eu.warn("Local template doesn't exist",eA),Z.get_Empty());};c5.RunFullDocTemplate=function(ez){var eA,eB;c5.LoadLocalTemplates("");c5.PrepareTemplateStrict("",null,dm.ChildrenArray(self.document.body),{$:1,$0:self.document.body},null);eA=c5.ChildrenTemplate(self.document.body,ez);eB=self.document.body;(function(eC){Z.RunInPlace(true,eB,eC);}(eA));return eA;};c5.LocalTemplatesLoaded=function(){dP.$cctor();return dP.LocalTemplatesLoaded;};c5.set_LocalTemplatesLoaded=function(ez){dP.$cctor();dP.LocalTemplatesLoaded=ez;};c5.LoadNestedTemplates=function(ez,eA){var eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP;function eB(eQ){var eR,eS;if(!eC.ContainsKey(eQ)){eR=(eS=null,[eD.TryGetValue(eQ,{get:function(){return eS;},set:function(eT){eS=eT;}}),eS]);eR[0]?(eP.Add(eQ),eD.Remove(eQ),c5.PrepareTemplateStrict(eA,{$:1,$0:eQ},eR[1][0],{$:1,$0:eR[1][1]},{$:1,$0:eB})):eu.warn(eP.Contains(eQ)?"Encountered loop when instantiating "+eQ:"Local template does not exist: "+eQ);}}eC=c5.LoadedTemplateFile(eA);eD=new b1.New$5();eE=ez.querySelectorAll("[ws-template]");for(eF=0,eG=eE.length-1;eF<=eG;eF++){eH=eE[eF];eI=eH.getAttribute("ws-template").toLowerCase();eH.removeAttribute("ws-template");eD.set_Item(eI,[[eH],c5.FakeRootSingle(eH)]);}eJ=ez.querySelectorAll("[ws-children-template]");for(eK=0,eL=eJ.length-1;eK<=eL;eK++){eM=eJ[eK];eN=eM.getAttribute("ws-children-template").toLowerCase();eM.removeAttribute("ws-children-template");eD.set_Item(eN,(eO=dm.ChildrenArray(eM),[eO,c5.FakeRoot(eO)]));}eP=new b2.New$3();while(eD.count>0)eB(bb.head(eD.get_Keys()));};c5.LoadedTemplates=function(){dP.$cctor();return dP.LoadedTemplates;};c5.LoadedTemplateFile=function(ez){var eA,eB,eC;eA=(eB=null,[c5.LoadedTemplates().TryGetValue(ez,{get:function(){return eB;},set:function(eD){eB=eD;}}),eB]);return eA[0]?eA[1]:(eC=new b1.New$5(),(c5.LoadedTemplates().set_Item(ez,eC),eC));};c5.ChildrenTemplate=function(ez,eA){var eB,eC,eD,eE,eF;eB=c5.InlineTemplate(ez,eA);eC=eB[1];eD=eB[0];eE=eD.Els;return!J.Equals(eE,null)&&eE.length===1&&(T.get(eE,0)instanceof G&&(J.Equals(T.get(eE,0).nodeType,G.ELEMENT_NODE)&&(eF=T.get(eE,0),true)))?dQ.TreeNode(eD,eC):Z.Mk({$:6,$0:eD},eC);};c5.PrepareTemplateStrict=function(ez,eA,eB,eC,eD){var eE,eF;function eG(eL,eM){var eN,eO,eP,eQ,eR,eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,e_,e$,fa,fb;function eS(fc){}while(true)switch(eL){case 0:if(eM!==null){eN=eM.nextSibling;if(J.Equals(eM.nodeType,G.TEXT_NODE))dT.convertTextNode(eM);else if(J.Equals(eM.nodeType,G.ELEMENT_NODE))eI(eM);eM=eN;}else return null;break;case 1:eT=ca.string(eM.nodeName,{$:1,$0:3},null).toLowerCase();eU=(eO=eT.indexOf("."),eO===-1?[ez,eT]:[ca.string(eT,null,{$:1,$0:eO-1}),ca.string(eT,{$:1,$0:eO+1},null)]);eV=eU[1];eW=eU[0];if(eW!==""&&!c5.LoadedTemplates().ContainsKey(eW))return dT.failNotLoaded(eV);else{if(eW===""&&eD!=null)eD.$0(eV);eX=c5.LoadedTemplates().get_Item(eW);if(!eX.ContainsKey(eV))return dT.failNotLoaded(eV);else{eY=eX.get_Item(eV);eZ=eY.cloneNode(true);e0=new b2.New$3();e1=new b1.New$5();e2=eM.attributes;for(e3=0,e4=e2.length-1;e3<=e4;e3++){e5=e2.item(e3).name.toLowerCase();e1.set_Item(e5,(e6=e2.item(e3).nodeValue,e6===""?e5:e6.toLowerCase()));!e0.Add(e5)?eu.warn("Hole mapped twice",e5):void 0;}for(e7=0,e8=eM.childNodes.length-1;e7<=e8;e7++){e9=eM.childNodes[e7];J.Equals(e9.nodeType,G.ELEMENT_NODE)?!e0.Add(e9.nodeName.toLowerCase())?eu.warn("Hole filled twice",eV):void 0:void 0;}e_=eM.childNodes.length===1&&J.Equals(eM.firstChild.nodeType,G.TEXT_NODE);if(e_){eQ=dT.fillTextHole(eZ,eM.firstChild.textContent,eV);((function(fc){return function(fd){if(fd!=null)fc(fd.$0);};}((eR=function(fc){return function(fd){return fc.Add(fd);};}(e0),function(fc){return eS(eR(fc));})))(eQ));}dT.removeHolesExcept(eZ,e0);if(!e_){for(e$=0,fa=eM.childNodes.length-1;e$<=fa;e$++){fb=eM.childNodes[e$];J.Equals(fb.nodeType,G.ELEMENT_NODE)?fb.hasAttributes()?dT.fillInstanceAttrs(eZ,fb):eH(eZ,fb):void 0;}}dT.mapHoles(eZ,e1);dT.fill(eZ,eM.parentNode,eM);eM.parentNode.removeChild(eM);return;}}break;}}function eH(eL,eM){var eN,eP,eQ;function eO(eR,eS){var eT,eU,eV;if(eP==="title"&&eM.hasChildNodes()){eT=et.parseHTML(eM.textContent);eM.removeChild(eM.firstChild);for(eU=0,eV=eT.length-1;eU<=eV;eU++)eM.appendChild(T.get(eT,eU));}else null;eI(eM);return dT.fill(eM,eR,eS);}eP=eM.nodeName.toLowerCase();dm.IterSelector(eL,"[ws-attr-holes]",function(eR){var eS,eT,eU,eV,eW;eS=bi.SplitChars(eR.getAttribute("ws-attr-holes"),[" "],1);for(eT=0,eU=eS.length-1;eT<=eU;eT++){eV=T.get(eS,eT);eR.setAttribute(eV,(eW=new a.RegExp("\\${"+eP+"}","ig"),eR.getAttribute(eV).replace(eW,eM.textContent)));}});eQ=eL.querySelector("[ws-hole="+eP+"]");if(J.Equals(eQ,null)){eN=eL.querySelector("[ws-replace="+eP+"]");return J.Equals(eN,null)?null:(eO(eN.parentNode,eN),void eN.parentNode.removeChild(eN));}else{while(eQ.hasChildNodes())eQ.removeChild(eQ.lastChild);eQ.removeAttribute("ws-hole");return eO(eQ,null);}}function eI(eL){if(bi.StartsWith(eL.nodeName.toLowerCase(),"ws-"))eK(eL);else{dT.convertAttrs(eL);eJ(eL.firstChild);}}function eJ(eL){return eG(0,eL);}function eK(eL){return eG(1,eL);}eE=eC==null?c5.FakeRoot(eB):eC.$0;eF=(eA==null?"":eA.$0).toLowerCase();c5.LoadedTemplateFile(ez).set_Item(eF,eE);T.length(eB)>0?(function(eL){var eM,eN,eO,eP;while(true){eM=eL.querySelector("[ws-template]");if(J.Equals(eM,null)){eN=eL.querySelector("[ws-children-template]");if(J.Equals(eN,null))return null;else{eO=eN.getAttribute("ws-children-template");eN.removeAttribute("ws-children-template");c5.PrepareTemplateStrict(ez,{$:1,$0:eO},dm.ChildrenArray(eN),null,null);eL=eL;}}else{eP=eM.getAttribute("ws-template");(c5.PrepareSingleTemplate(ez,{$:1,$0:eP},eM))(null);eL=eL;}}}(eE),eJ(T.get(eB,0))):void 0;};c5.FakeRootSingle=function(ez){var eA,eB,eC;ez.removeAttribute("ws-template");eA=ez.getAttribute("ws-replace");eA===null?void 0:(ez.removeAttribute("ws-replace"),eB=ez.parentNode,J.Equals(eB,null)?void 0:(eC=self.document.createElement(ez.tagName),eC.setAttribute("ws-replace",eA),eB.replaceChild(eC,ez)));return c5.FakeRoot([ez]);};c5.FakeRoot=function(ez){var eA,eB,eC;eA=self.document.createElement("div");for(eB=0,eC=ez.length-1;eB<=eC;eB++)eA.appendChild(T.get(ez,eB));return eA;};c5.InlineTemplate=function(ez,eA){var eB,eC,eD,eE,eH,eI,eJ,eK,eL,eM,eN;function eF(eO,eP){var eQ,eR,eS;eQ=dl.Insert(eO,eP);eI.push(dl.Updates(eQ));eJ.push([eO,eQ]);eR=er.GetOptional(eQ.OnAfterRender);return eR==null?null:(eS=eR.$0,void eK.push(function(){eS(eO);}));}function eG(eO){var eP,eQ;eP=(eQ=null,[eL.TryGetValue(eO,{get:function(){return eQ;},set:function(eR){eQ=eR;}}),eQ]);return eP[0]?eP[1].$==0?{$:1,$0:eP[1].$1}:eP[1].$==1?{$:1,$0:Z.TextNode(eP[1].$1)}:eP[1].$==2?{$:1,$0:Z.TextView(eP[1].$1)}:eP[1].$==8?{$:1,$0:Z.TextView(eP[1].$1.get_View())}:eP[1].$==9?{$:1,$0:Z.TextView(p.Map(a.String,eP[1].$1.get_View()))}:eP[1].$==10?{$:1,$0:Z.TextView(p.Map(function(eR){return eR.get_Input();},eP[1].$1.get_View()))}:eP[1].$==11?{$:1,$0:Z.TextView(p.Map(a.String,eP[1].$1.get_View()))}:eP[1].$==12?{$:1,$0:Z.TextView(p.Map(function(eR){return eR.get_Input();},eP[1].$1.get_View()))}:eP[1].$==13?{$:1,$0:Z.TextView(p.Map(a.String,eP[1].$1.get_View()))}:(eu.warn("Content hole filled with attribute data",eO),null):null;}eH=[];eI=[];eJ=[];eK=[];eL=new b1.New$5();eM=cE.Get(eA);try{while(eM.MoveNext()){eN=eM.Current();eL.set_Item(eN.$0,eN);}}finally{if(typeof eM=="object"&&"Dispose"in eM)eM.Dispose();}eB=dm.ChildrenArray(ez);dm.IterSelector(ez,"[ws-hole]",function(eO){var eP,eQ,eR;eR=eO.getAttribute("ws-hole");eO.removeAttribute("ws-hole");while(eO.hasChildNodes())eO.removeChild(eO.lastChild);eP=eG(eR);eP!=null&&eP.$==1?(eQ=eP.$0,di.LinkElement(eO,eQ.docNode),eH.push(du.New(dl.Empty(eO),eQ.docNode,null,eO,b6.Int(),null)),eI.push(eQ.updates)):void 0;});dm.IterSelector(ez,"[ws-replace]",function(eO){var eP,eQ,eR,eS,eT,eU;eP=eG(eO.getAttribute("ws-replace"));eP!=null&&eP.$==1?(eQ=eP.$0,eR=eO.parentNode,eS=self.document.createTextNode(""),eR.replaceChild(eS,eO),eT=di.InsertBeforeDelim(eS,eQ.docNode),eU=T.tryFindIndex(function(eV){return eO===eV;},eB),eU==null?void 0:T.set(eB,eU.$0,eQ.docNode),eH.push(du.New(dl.Empty(eR),eQ.docNode,{$:1,$0:[eT,eS]},eR,b6.Int(),null)),eI.push(eQ.updates)):void 0;});dm.IterSelector(ez,"[ws-attr]",function(eO){var eP,eQ,eR;eP=eO.getAttribute("ws-attr");eO.removeAttribute("ws-attr");eQ=(eR=null,[eL.TryGetValue(eP,{get:function(){return eR;},set:function(eS){eR=eS;}}),eR]);eQ[0]?eQ[1].$==3?eF(eO,eQ[1].$1):eu.warn("Attribute hole filled with non-attribute data",eP):void 0;});dm.IterSelector(ez,"[ws-on]",function(eO){eF(eO,cR.Concat(T.choose(function(eP){var eQ,eR,eS;eQ=bi.SplitChars(eP,[":"],1);eR=(eS=null,[eL.TryGetValue(T.get(eQ,1),{get:function(){return eS;},set:function(eT){eS=eT;}}),eS]);return eR[0]?eR[1].$==4?{$:1,$0:cU.Handler(T.get(eQ,0),eR[1].$1)}:eR[1].$==5?{$:1,$0:cR.Handler(T.get(eQ,0),eR[1].$2)}:(eu.warn("Event hole on"+T.get(eQ,0)+" filled with non-event data",T.get(eQ,1)),null):null;},bi.SplitChars(eO.getAttribute("ws-on"),[" "],1))));eO.removeAttribute("ws-on");});dm.IterSelector(ez,"[ws-onafterrender]",function(eO){var eP,eQ,eR;eP=eO.getAttribute("ws-onafterrender");eQ=(eR=null,[eL.TryGetValue(eP,{get:function(){return eR;},set:function(eS){eR=eS;}}),eR]);eQ[0]?eQ[1].$==6?(eO.removeAttribute("ws-onafterrender"),eF(eO,cU.OnAfterRender(eQ[1].$1))):eQ[1].$==7?(eO.removeAttribute("ws-onafterrender"),eF(eO,cU.OnAfterRender(eQ[1].$1))):eu.warn("onafterrender hole filled with non-onafterrender data",eP):void 0;});dm.IterSelector(ez,"[ws-var]",function(eO){var eP,eQ,eR;eP=eO.getAttribute("ws-var");eO.removeAttribute("ws-var");eQ=(eR=null,[eL.TryGetValue(eP,{get:function(){return eR;},set:function(eS){eR=eS;}}),eR]);eQ[0]?eQ[1].$==8?eF(eO,cU.Value(eQ[1].$1)):eQ[1].$==9?eF(eO,cU.Checked(eQ[1].$1)):eQ[1].$==10?eF(eO,cU.IntValue(eQ[1].$1)):eQ[1].$==11?eF(eO,cU.IntValueUnchecked(eQ[1].$1)):eQ[1].$==12?eF(eO,cU.FloatValue(eQ[1].$1)):eQ[1].$==13?eF(eO,cU.FloatValueUnchecked(eQ[1].$1)):eu.warn("Var hole filled with non-Var data",eP):void 0;});dm.IterSelector(ez,"[ws-attr-holes]",function(eO){var eP,eQ,eR,eS;eP=new a.RegExp(c5.TextHoleRE(),"g");eQ=bi.SplitChars(eO.getAttribute("ws-attr-holes"),[" "],1);eO.removeAttribute("ws-attr-holes");for(eR=0,eS=eQ.length-1;eR<=eS;eR++)(function(){var eT,eU,eV,eW,eX,eY,eZ,e0,e1,e2,e3,e4,e5;e2=T.get(eQ,eR);e3=eO.getAttribute(e2);eT=null;eU=0;e4=[];while(eT=eP.exec(e3),eT!==null){e5=ca.string(e3,{$:1,$0:eU},{$:1,$0:eP.lastIndex-T.get(eT,0).length-1});eU=eP.lastIndex;e4.push([e5,T.get(eT,1)]);}eW=ca.string(e3,{$:1,$0:eU},null);eP.lastIndex=0;eX=T.foldBack(function(e6,e7){return(function(e8){var e9,e_;e9=e8[0];e_=e8[1];return function(e$){var fa,fb,fc,fd,fe;fa=e$[0];fb=e$[1];fc=(fd=(fe=null,[eL.TryGetValue(e_,{get:function(){return fe;},set:function(ff){fe=ff;}}),fe]),fd[0]?fd[1].$==1?{$:0,$0:fd[1].$1}:fd[1].$==2?{$:1,$0:fd[1].$1}:fd[1].$==8?{$:1,$0:fd[1].$1.get_View()}:fd[1].$==9?{$:1,$0:p.Map(a.String,fd[1].$1.get_View())}:fd[1].$==10?{$:1,$0:p.Map(function(ff){return ff.get_Input();},fd[1].$1.get_View())}:fd[1].$==11?{$:1,$0:p.Map(a.String,fd[1].$1.get_View())}:fd[1].$==12?{$:1,$0:p.Map(function(ff){return ff.get_Input();},fd[1].$1.get_View())}:fd[1].$==13?{$:1,$0:p.Map(a.String,fd[1].$1.get_View())}:(eu.warn("Attribute value hole filled with non-text data",e_),{$:0,$0:""}):{$:0,$0:""});return fc.$==1?[e9,new cH({$:1,$0:fa===""?fc.$0:p.Map(function(ff){return ff+fa;},fc.$0),$1:fb})]:[e9+fc.$0+fa,fb];};}(e6))(e7);},e4,[eW,cH.Empty]);return eF(eO,eX[1].$==1?eX[1].$1.$==1?eX[1].$1.$1.$==1?eX[1].$1.$1.$1.$==0?(eY=eX[0],cU.Dynamic(e2,p.Map3(function(e6,e7,e8){return eY+e6+e7+e8;},eX[1].$0,eX[1].$1.$0,eX[1].$1.$1.$0))):(eZ=eX[0],cU.Dynamic(e2,p.Map(function(e6){return eZ+bi.concat("",e6);},p.Sequence(eX[1])))):(e0=eX[0],cU.Dynamic(e2,p.Map2(function(e6,e7){return e0+e6+e7;},eX[1].$0,eX[1].$1.$0))):eX[0]===""?cU.Dynamic(e2,eX[1].$0):(e1=eX[0],cU.Dynamic(e2,p.Map(function(e6){return e1+e6;},eX[1].$0))):cR.Create(e2,eX[0]));}());});return[er.DeleteEmptyFields({Els:eB,Dirty:true,Holes:eH,Attrs:eJ,Render:(eC=eK.length==0?null:{$:1,$0:function(eO){T.iter(function(eP){eP(eO);},eK);}},eC?eC.$0:void 0),El:(eD=!J.Equals(eB,null)&&eB.length===1&&(T.get(eB,0)instanceof G&&(T.get(eB,0)instanceof a.Element&&(eE=T.get(eB,0),true)))?{$:1,$0:eE}:null,eD?eD.$0:void 0)},["Render","El"]),cS.TreeReduce(p.Const(),p.Map2Unit,eI)];};c5.PrepareSingleTemplate=function(ez,eA,eB){var eC,eD,eE;eC=c5.FakeRootSingle(eB);eD=[eB];eE={$:1,$0:eC};return function(eF){c5.PrepareTemplateStrict(ez,eA,eD,eE,eF);};};c5.TextHoleRE=function(){dP.$cctor();return dP.TextHoleRE;};c6.TryParse=function(ez){var eA;eA=ev.parse(ez);return a.isNaN(eA)?null:{$:1,$0:eA};};bZ.TryParse=function(ez,eA,eB,eC){var eD,eE;eD=+ez;eE=eD===eD-eD%1&&eD>=eA&&eD<=eB;eE?eC.set(eD):void 0;return eE;};bZ.TryParseBool=function(ez,eA){var eB;eB=ez.toLowerCase();return eB==="true"?(eA.set(true),true):eB==="false"&&(eA.set(false),true);};c7.$cctor=function(){c7.$cctor=a.ignore;c7.EndPoint="?";c7.AjaxProvider=new dx.New();};c8.newPojoOpt=function(ez){function eA(eB,eC){return eC==null?null:{$:1,$0:[eB,eC.$0]};}return c8.newPojo(bb.choose(function(eB){return eA(eB[0],eB[1]);},ez));};c8.newPojo=function(ez){var eA,eB;function eC(eE,eF){return function(eG){return c8.addProp(eE,eF,eG);};}function eD(eE){}eA={};bb.iter((eB=function(eE){return(function(eF){return eC(eF[0],eF[1]);}(eE))(eA);},function(eE){return eD(eB(eE));}),ez);return eA;};c8.addProp=function(ez,eA,eB){eB[ez]=eA;return eB;};cd.op_EqualsEqualsGreater=function(ez,eA){return[ez,eA==null?null:{$:1,$0:eA.$0}];};cd.op_MinusMinusGreater=function(ez,eA){return[ez,{$:1,$0:eA}];};c_=f.TimeoutException=er.Class({},c9,c_);c_.New=er.Ctor(function(){c_.New$1.call(this,"The operation has timed out.");},c_);c_.New$1=er.Ctor(function(ez){this.message=ez;cO.setPrototypeOf(this,c_.prototype);},c_);c$.AsAsync=function(ez){return cQ.FromContinuations(function(eA,eB){ez.then(eA,function(eC){return eB(c$.unwrapExn(eC));});});};c$.unwrapExn=function(ez){return ez instanceof c9?ez:new d0.New(ez);};db.JSUnion=function(ez,eA){var eB;function eC(eG){var eH;function eI(eJ){return eJ!=null&&eJ.$==1&&J.Equals(eG,eJ.$0);}eH=bb.tryFindIndex(function(eJ){return eI(eJ[0]);},eA);return eH!=null&&eH.$==1?eH.$0:eG.$;}function eD(eG,eH){return T.init(T.length((T.get(eA,eG))[2]),function(eI){return eH["$"+a.String(eI)];});}function eE(eG,eH){var eI,eJ,eK;eI=ez==null?{}:new ez();eJ=T.get(eA,eG);return(eK=eJ[0],eK!=null&&eK.$==1)?eJ[0].$0:(eI.$=eG,bb.iteri(function(eL,eM){eI["$"+a.String(eL)]=eM;},eH),eI);}function eF(eG,eH){var eI;function eJ(eK,eL){return[eG,eK,eL,eI];}eI=eH[2];return bb.map(function(eK){return eJ(eK[0],eK[1]);},eH[1]);}eB=bb.collect(function(eG){return eF(eG[0],eG[1]);},bb.indexed(eA));return dC.New$1(function(eG){function eH(eI,eJ,eK,eL){var eM,eN,eO;function eP(eQ,eR,eS){var eT;function eU(eV,eW){return eP(eT,eV,new cH({$:1,$0:eW,$1:eS}));}return eQ.$==1?(eT=eQ.$1,bb.collect(function(eV){return eU(eV[0],eV[1]);},eQ.$0.Parse(eR))):[[eR,eE(eI,T.ofList(by.rev(eS)))]];}return db.isCorrectMethod(eJ,eG.Method)?(eM=dD.startsWith(by.ofArray(eK),eG.Segments),eM==null?[]:(eN=eM.$0,(eO=by.ofArray(eL),eO.$==0?[[dd.New(eN,eG.QueryArgs,eG.FormData,eG.Method,eG.Body),eE(eI,[])]]:eP(eO,dd.New(eN,eG.QueryArgs,eG.FormData,eG.Method,eG.Body),cH.Empty)))):[];}return bb.collect(function(eI){return eH(eI[0],eI[1],eI[2],eI[3]);},eB);},function(eG){var eH,eI,eJ,eK,eL,eM;function eN(eO,eP){return eP.Write(eO);}eH=eC(eG);eI=T.get(eA,eH);eJ=eI[2];eK=T.get(eI[1],0);eL=[dd.Segment(by.ofArray(eK[1]),eK[0])];return!J.Equals(eJ,null)&&eJ.length===0?{$:1,$0:eL}:(eM=(((er.Curried3(T.map2))(eN))(eD(eH,eG)))(eJ),T.forall(function(eO){return eO!=null;},eM)?{$:1,$0:bb.append(eL,bb.collect(function(eO){return eO.$0;},eM))}:null);});};db.isCorrectMethod=function(ez,eA){return eA!=null&&eA.$==1?ez!=null&&ez.$==1?J.Equals(eA.$0,ez.$0):true:!(ez!=null&&ez.$==1);};db.rString=function(){d1.$cctor();return d1.rString;};db.rWildcard=function(){d1.$cctor();return d1.rWildcard;};dc.Parse=function(ez,eA){function eB(eC,eD){return eC.Segments.$==0?{$:1,$0:eD}:null;}return bb.tryPick(function(eC){return eB(eC[0],eC[1]);},ez.Parse(eA));};dc.HashLink=function(ez,eA){return"#"+dc.Link(ez,eA);};dc.Link=function(ez,eA){var eB;eB=dc.Write(ez,eA);return eB==null?"":eB.$0.ToLink();};dc.Write=function(ez,eA){var eB;eB=ez.Write(eA);return eB==null?null:{$:1,$0:dd.Combine(eB.$0)};};dd=da.Route=er.Class({ToLink:function(){return el.WriteLink(this.Segments,this.QueryArgs);}},null,dd);dd.FromHash=function(ez,eA){var eB,eC;eB=ez.indexOf("#");return eB===-1?dd.get_Empty():(eC=ez.substring(eB+1),eA!=null&&eA.$0?eC===""||eC==="/"?dd.get_Empty():bi.StartsWith(eC,"/")?dd.FromUrl(eC.substring(1),{$:1,$0:true}):dd.Segment$2(eC):dd.FromUrl(ez.substring(eB),{$:1,$0:false}));};dd.Segment=function(ez,eA){var eB;eB=dd.get_Empty();return dd.New(ez,eB.QueryArgs,eB.FormData,eA,eB.Body);};dd.get_Empty=function(){return dd.New(cH.Empty,new cD.New([]),new cD.New([]),null,r.CreateFromValue(null));};dd.FromUrl=function(ez,eA){var eB,eC,eD;eB=(eC=ez.indexOf("?"),eC===-1?[ez,new cD.New([])]:[bi.Substring(ez,0,eC),dd.ParseQuery(ez.substring(eC+1))]);eD=dd.get_Empty();return dd.New(by.ofArray(bi.SplitChars(eB[0],["/"],eA!=null&&eA.$0?0:1)),eB[1],eD.FormData,eD.Method,eD.Body);};dd.Segment$2=function(ez){var eA;eA=dd.get_Empty();return dd.New(by.ofArray([ez]),eA.QueryArgs,eA.FormData,eA.Method,eA.Body);};dd.ParseQuery=function(ez){return d2.OfArray(T.ofSeq(T.choose(function(eA){var eB,eC;eB=bi.SplitChars(eA,["="],0);return!J.Equals(eB,null)&&eB.length===2?(eC=T.get(eB,1),{$:1,$0:[T.get(eB,0),eC]}):((function(eD){return function(eE){return eD("wrong format for query argument: "+bC.toSafe(eE));};}(function(eD){eu.log(eD);}))(eA),null);},bi.SplitChars(ez,["&"],0))));};dd.Combine=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ;eG=T.ofSeq(ez);eH=T.length(eG);if(eH===0)return dd.get_Empty();else if(eH===1)return T.get(eG,0);else{eA=null;eB=null;eI=[];eC=new cD.New([]);eD=new cD.New([]);eE=0;eJ=T.length(eG);while(eE<eJ)(function(){var eK,eL,eM;eK=T.get(eG,eE);eL=eK.Method;eL!=null&&eL.$==1?eA=eL:void 0;eM=eK.Body.f();eM===null?void 0:eB=eM;eC=d2.FoldBack(function(eN,eO,eP){return eP.Add(eN,eO);},eC,eK.QueryArgs);eD=d2.FoldBack(function(eN,eO,eP){return eP.Add(eN,eO);},eD,eK.FormData);by.iter(function(eN){eI.push(eN);},eK.Segments);eE=eE+1;}());return dd.New(by.ofSeq(eI),eC,eD,eA,r.CreateFromValue(eB));}};dd.New=function(ez,eA,eB,eC,eD){return new dd({Segments:ez,QueryArgs:eA,FormData:eB,Method:eC,Body:eD});};de.fromSeq=function(ez){var eA;eA=T.ofSeq(bb.delay(function(){return bb.collect(function(eB){return[dE.New(eB[0],eB[1])];},bb.distinctBy(function(eB){return eB[0];},ez));}));T.sortInPlace(eA);return cG.Build(eA,0,eA.length-1);};df.New=function(ez,eA,eB,eC,eD){return{Node:ez,Left:eA,Right:eB,Height:eC,Count:eD};};dg=M.IdAddress=er.Class({},null,dg);dh=M.IdSubscription=er.Class({get_Id:function(){return this.$0;}},null,dh);di.CreateEmbedNode=function(){return{Current:null,Dirty:false};};di.UpdateEmbedNode=function(ez,eA){ez.Current=eA;ez.Dirty=true;};di.CreateElemNode=function(ez,eA,eB){var eC;di.LinkElement(ez,eB);eC=dl.Insert(ez,eA);return du.New(eC,eB,null,ez,b6.Int(),er.GetOptional(eC.OnAfterRender));};di.LinkElement=function(ez,eA){di.InsertDoc(ez,eA,null);};di.CreateRunState=function(ez,eA){return d$.New(ea.get_Empty(),di.CreateElemNode(ez,dl.EmptyAttr(),eA));};di.PerformAnimatedUpdate=function(ez,eA,eB){var eC;return dU.get_UseAnimations()?(eC=null,cQ.Delay(function(){var eD,eE,eF;eD=ea.FindAll(eB);eE=di.ComputeChangeAnim(eA,eD);eF=di.ComputeEnterAnim(eA,eD);return cQ.Bind(dU.Play(dU.Append(eE,di.ComputeExitAnim(eA,eD))),function(){return cQ.Bind(di.SyncElemNodesNextFrame(ez,eA),function(){return cQ.Bind(dU.Play(eF),function(){eA.PreviousNodes=eD;return cQ.Return(null);});});});})):di.SyncElemNodesNextFrame(ez,eA);};di.PerformSyncUpdate=function(ez,eA,eB){var eC;eC=ea.FindAll(eB);di.SyncElemNode(ez,eA.Top);eA.PreviousNodes=eC;};di.CreateTextNode=function(){return{Text:dm.CreateText(""),Dirty:false,Value:""};};di.UpdateTextNode=function(ez,eA){ez.Value=eA;ez.Dirty=true;};di.InsertDoc=function(ez,eA,eB){var eC;return eA!=null&&eA.$==1?di.InsertNode(ez,eA.$0.El,eB):eA!=null&&eA.$==2?(eC=eA.$0,(eC.Dirty=false,di.InsertDoc(ez,eC.Current,eB))):eA==null?eB:eA!=null&&eA.$==4?di.InsertNode(ez,eA.$0.Text,eB):eA!=null&&eA.$==5?di.InsertNode(ez,eA.$0,eB):eA!=null&&eA.$==6?T.foldBack(function(eD,eE){return eD==null||eD.constructor===cO?di.InsertDoc(ez,eD,eE):di.InsertNode(ez,eD,eE);},eA.$0.Els,eB):di.InsertDoc(ez,eA.$0,di.InsertDoc(ez,eA.$1,eB));};di.InsertBeforeDelim=function(ez,eA){var eB,eC;eB=ez.parentNode;eC=self.document.createTextNode("");eB.insertBefore(eC,ez);di.LinkPrevElement(ez,eA);return eC;};di.SyncElemNodesNextFrame=function(ez,eA){function eB(eC){a.requestAnimationFrame(function(){di.SyncElemNode(ez,eA.Top);eC();});}return dV.BatchUpdatesEnabled()?cQ.FromContinuations(function(eC,eD,eE){return eB.apply(null,[eC,eD,eE]);}):(di.SyncElemNode(ez,eA.Top),cQ.Return(null));};di.ComputeExitAnim=function(ez,eA){return dU.Concat(T.map(function(eB){return dl.GetExitAnim(eB.Attr);},ea.ToArray(ea.Except(eA,ea.Filter(function(eB){return dl.HasExitAnim(eB.Attr);},ez.PreviousNodes)))));};di.ComputeEnterAnim=function(ez,eA){return dU.Concat(T.map(function(eB){return dl.GetEnterAnim(eB.Attr);},ea.ToArray(ea.Except(ez.PreviousNodes,ea.Filter(function(eB){return dl.HasEnterAnim(eB.Attr);},eA)))));};di.ComputeChangeAnim=function(ez,eA){var eB;function eC(eD){return dl.HasChangeAnim(eD.Attr);}eB=function(eD){return ea.Filter(eC,eD);};return dU.Concat(T.map(function(eD){return dl.GetChangeAnim(eD.Attr);},ea.ToArray(ea.Intersect(eB(ez.PreviousNodes),eB(eA)))));};di.SyncElemNode=function(ez,eA){!ez?di.SyncElement(eA):void 0;di.Sync(eA.Children);di.AfterRender(eA);};di.InsertNode=function(ez,eA,eB){dm.InsertAt(ez,eB,eA);return eA;};di.LinkPrevElement=function(ez,eA){di.InsertDoc(ez.parentNode,eA,ez);};di.SyncElement=function(ez){function eA(eB){function eC(eD){var eE,eF;return eD!=null&&eD.$==0?eC(eD.$0)||eC(eD.$1):eD!=null&&eD.$==2?(eE=eD.$0,eE.Dirty||eC(eE.Current)):eD!=null&&eD.$==6&&(eF=eD.$0,eF.Dirty||T.exists(eA,eF.Holes));}return eC(eB.Children);}dl.Sync(ez.El,ez.Attr);eA(ez)?di.DoSyncElement(ez):void 0;};di.Sync=function(ez){var eA,eB;if(ez!=null&&ez.$==1)di.SyncElemNode(false,ez.$0);else if(ez!=null&&ez.$==2)di.Sync(ez.$0.Current);else if(ez==null);else if(ez!=null&&ez.$==5);else if(ez!=null&&ez.$==4){eA=ez.$0;eA.Dirty?(eA.Text.nodeValue=eA.Value,eA.Dirty=false):void 0;}else if(ez!=null&&ez.$==6){eB=ez.$0;T.iter(function(eC){di.SyncElemNode(false,eC);},eB.Holes);T.iter(function(eC){dl.Sync(eC[0],eC[1]);},eB.Attrs);di.AfterRender(eB);}else{di.Sync(ez.$0);di.Sync(ez.$1);}};di.AfterRender=function(ez){var eA;eA=er.GetOptional(ez.Render);eA!=null&&eA.$==1?(eA.$0(ez.El),er.SetOptional(ez,"Render",null)):void 0;};di.DoSyncElement=function(ez){var eA,eB,eC;function eD(eE,eF){var eG,eH;return eE!=null&&eE.$==1?eE.$0.El:eE!=null&&eE.$==2?(eG=eE.$0,eG.Dirty?(eG.Dirty=false,di.InsertDoc(eA,eG.Current,eF)):eD(eG.Current,eF)):eE==null?eF:eE!=null&&eE.$==4?eE.$0.Text:eE!=null&&eE.$==5?eE.$0:eE!=null&&eE.$==6?(eH=eE.$0,(eH.Dirty?eH.Dirty=false:void 0,T.foldBack(function(eI,eJ){return eI==null||eI.constructor===cO?eD(eI,eJ):eI;},eH.Els,eF))):eD(eE.$0,eD(eE.$1,eF));}eA=ez.El;eo.Iter((eB=ez.El,function(eE){dm.RemoveNode(eB,eE);}),eo.Except(eo.DocChildren(ez),eo.Children(ez.El,er.GetOptional(ez.Delimiters))));eD(ez.Children,(eC=er.GetOptional(ez.Delimiters),eC!=null&&eC.$==1?eC.$0[1]:null));};dj.New=function(ez,eA){return{k:ez,ct:eA};};dk.New=function(ez,eA){return{c:ez,r:eA};};dl.Static=function(ez){return new cR({$:3,$0:ez});};dl.Dynamic=function(ez,eA){return new cR({$:1,$0:new dI.New(ez,eA)});};dl.Insert=function(ez,eA){var eB,eC,eD;function eE(eF){if(!(eF===null))if(eF!=null&&eF.$==1)eB.push(eF.$0);else if(eF!=null&&eF.$==2){eE(eF.$0);eE(eF.$1);}else if(eF!=null&&eF.$==3)eF.$0(ez);else if(eF!=null&&eF.$==4)eC.push(eF.$0);}eB=[];eC=[];eE(eA);eD=eB.slice(0);return dS.New(ez,dl.Flags(eA),eD,eC.length===0?null:{$:1,$0:function(eF){bb.iter(function(eG){eG(eF);},eC);}});};dl.EmptyAttr=function(){d6.$cctor();return d6.EmptyAttr;};dl.Flags=function(ez){return ez!==null&&ez.hasOwnProperty("flags")?ez.flags:0;};dl.AppendTree=function(ez,eA){var eB;return ez===null?eA:eA===null?ez:(eB=new cR({$:2,$0:ez,$1:eA}),(dl.SetFlags(eB,dl.Flags(ez)|dl.Flags(eA)),eB));};dl.Updates=function(ez){return cS.MapTreeReduce(function(eA){return eA.NChanged();},p.Const(),p.Map2Unit,ez.DynNodes);};dl.Empty=function(ez){return dS.New(ez,0,[],null);};dl.SetFlags=function(ez,eA){ez.flags=eA;};dl.HasExitAnim=function(ez){var eA;eA=2;return(ez.DynFlags&eA)===eA;};dl.GetExitAnim=function(ez){return dl.GetAnim(ez,function(eA,eB){return eA.NGetExitAnim(eB);});};dl.HasEnterAnim=function(ez){var eA;eA=1;return(ez.DynFlags&eA)===eA;};dl.GetEnterAnim=function(ez){return dl.GetAnim(ez,function(eA,eB){return eA.NGetEnterAnim(eB);});};dl.HasChangeAnim=function(ez){var eA;eA=4;return(ez.DynFlags&eA)===eA;};dl.GetChangeAnim=function(ez){return dl.GetAnim(ez,function(eA,eB){return eA.NGetChangeAnim(eB);});};dl.GetAnim=function(ez,eA){return dU.Concat(T.map(function(eB){return eA(eB,ez.DynElem);},ez.DynNodes));};dl.Sync=function(ez,eA){T.iter(function(eB){eB.NSync(ez);},eA.DynNodes);};dm.SetAttr=function(ez,eA,eB){ez.setAttribute(eA,eB);};dm.RemoveAttr=function(ez,eA){ez.removeAttribute(eA);};dm.CreateText=function(ez){return dm.Doc().createTextNode(ez);};dm.SetStyle=function(ez,eA,eB){dm.SetProperty(ez.style,eA,eB);};dm.ChildrenArray=function(ez){var eA,eB,eC;eA=[];for(eB=0,eC=ez.childNodes.length-1;eB<=eC;eB++)eA.push(ez.childNodes[eB]);return eA;};dm.CreateElement=function(ez){return dm.Doc().createElement(ez);};dm.Doc=function(){d5.$cctor();return d5.Doc;};dm.SetProperty=function(ez,eA,eB){return ez.setProperty(eA,eB);};dm.IterSelector=function(ez,eA,eB){var eC,eD,eE;eC=ez.querySelectorAll(eA);for(eD=0,eE=eC.length-1;eD<=eE;eD++)eB(eC[eD]);};dm.InsertAt=function(ez,eA,eB){var eC;if(!(eB.parentNode===ez&&eA===(eC=eB.nextSibling,J.Equals(eC,null)?null:eC)))ez.insertBefore(eB,eA);};dm.RemoveClass=function(ez,eA){var eB;dm.setClass(ez,(eB=dm.clsRE(eA),dm.getClass(ez).replace(eB,function(eC,eD,eE){return eD===""||eE===""?"":" ";})));};dm.AddClass=function(ez,eA){var eB;eB=dm.getClass(ez);eB===""?dm.setClass(ez,eA):!dm.clsRE(eA).test(eB)?dm.setClass(ez,eB+" "+eA):void 0;};dm.setClass=function(ez,eA){if(ez instanceof a.SVGElement)ez.setAttribute("class",eA);else ez.className=eA;};dm.getClass=function(ez){return ez instanceof a.SVGElement?ez.getAttribute("class"):ez.className;};dm.clsRE=function(ez){return new a.RegExp("(\\s+|^)"+ez+"(?:\\s+"+ez+")*(\\s+|$)","g");};dm.RemoveNode=function(ez,eA){if(eA.parentNode===ez)ez.removeChild(eA);};dn.$cctor=function(){dn.$cctor=a.ignore;dn.noneCT=dk.New(false,[]);dn.scheduler=new dG.New();dn.defCTS=[new dH.New()];dn.Zero=cQ.Return();dn.GetCT=function(ez){ez.k({$:0,$0:ez.ct});};};_do=cT.ArrayStorage=er.Class({SSet:function(ez){return T.ofSeq(ez);},SSetAt:function(ez,eA,eB){T.set(eB,ez,eA);return eB;},SAppend:function(ez,eA){eA.push(ez);return eA;},SInit:function(){return this.init;}},g,_do);_do.New=er.Ctor(function(ez){g.New.call(this);this.init=ez;},_do);dp.freshId=function(){dp.set_counter(dp.counter()+1);return"varuid"+a.String(dp.counter());};dp.set_counter=function(ez){_5.$cctor();_5.counter=ez;};dp.counter=function(){_5.$cctor();return _5.counter;};dq=M.ConceptoPago=er.Class({toString:function(){return this.$==2?this.$0:(function(ez){return function(eA){return ez(X.p$10(eA));};}(a.id))(this);}},null,dq);dr.FormaContrato=function(){_5.$cctor();return _5.FormaContrato;};dr.FormasPago=function(){_5.$cctor();return _5.FormasPago;};dr.Subir=function(){_5.$cctor();return _5.Subir;};dr.FormaW8BEN=function(){_5.$cctor();return _5.FormaW8BEN;};dr.FormaW9=function(){_5.$cctor();return _5.FormaW9;};ds.extractNodes=function(ez){var eA,eB;function eC(eD,eE,eF,eG){var eH,eI,eJ,eK,eL,eM;eH=ds.extractNodes(eF);eI=ds.extractNodes(eG);return(eH.$==0?(eK=eH.$0,!J.Equals(eK,null)&&eK.length===0)?(eJ=eI,true):eI.$==0?(eL=eI.$0,!J.Equals(eL,null)&&eL.length===0)?(eJ=eH,true):(eJ=[eH,eI],false):(eJ=[eH,eI],false):eI.$==0?(eM=eI.$0,!J.Equals(eM,null)&&eM.length===0)?(eJ=eH,true):(eJ=[eH,eI],false):(eJ=[eH,eI],false))?eJ:{$:1,$0:{$:0,$0:eD,$1:eE,$2:eJ[0],$3:eJ[1]}};}eA=ds.horizontalSplit(ez);return eA!=null&&eA.$==1?eC(false,eA.$0[2],eA.$0[0],eA.$0[1]):(eB=ds.verticalSplit(ez),eB!=null&&eB.$==1?eC(true,eB.$0[2],eB.$0[0],eB.$0[1]):{$:0,$0:ds.cleanSpaces(ez)});};ds.createLayoutDefinitions=function(ez,eA){var eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK;return eA.$==1?(eB=eA.$0.$0,(eC=eA.$0.$1,(eD=ds.createLayoutDefinitions(ez+"_1",eA.$0.$2),(eE=eD[0],(eF=eD[1],(eG=ds.createLayoutDefinitions(ez+"_2",eA.$0.$3),(eH=eG[0],(eI=eG[1],[ez,T.ofSeq(bb.delay(function(){return bb.append([bi.concat(" ",by.ofArray([ez,eB?"vertical":"horizontal",a.String(eC),eE,eH]))],bb.delay(function(){return bb.append(eF,bb.delay(function(){return eI;}));}));}))])))))))):(eJ=eA.$0,!J.Equals(eJ,null)&&eJ.length===0)?["___",[]]:(eK=eA.$0,!J.Equals(eK,null)&&eK.length===1)?[T.get(eA.$0,0),[]]:[ez,[ez+" div \"\" "+bi.concat(" ",eA.$0)]];};ds.horizontalSplit=function(ez){var eA,eB,eC,eD,eE;function eF(eG,eH){var eI,eJ,eK,eL;eI=j.REGEX$1("^ *--+([ ^v0-9]*)-* *$","",eH);return eI!=null&&eI.$==1?{$:1,$0:[[eG,(eJ=(eK=bb.tryItem(1,eI.$0),eK==null?null:ds.extractMeasuresO(bi.Replace(bi.Replace(eK.$0,"^",""),"v","-"))),(eL=new dJ({$:1,$0:5,$1:50,$2:95}),eJ==null?eL:eJ.$0))],eH.indexOf("-")]}:null;}eA=(eB=bb.tryHead(bb.sortBy(function(eG){return eG[1];},bb.choose(function(eG){return eF(eG[0],eG[1]);},bb.indexed(ez)))),eB==null?null:{$:1,$0:eB.$0[0]});return eA==null?null:{$:1,$0:(eC=eA.$0,(eD=eC[0],(eE=eC[1],[ca.array(ez,null,{$:1,$0:eD-1}),ca.array(ez,{$:1,$0:eD+1},null),eE])))};};ds.verticalSplit=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ;function eK(eN,eO){var eP,eQ,eR;return(eQ=j.REGEX$1("^ *\\|+ *$","",eO),eQ!=null&&eQ.$==1&&(eR=eQ.$0,!J.Equals(eR,null)&&eR.length===1))?{$:1,$0:[eN,eO.indexOf("|")]}:null;}function eL(eN){return J.Equals(null,eN);}function eM(eN){return J.Equals(null,eN);}eA=ds.transpose(ez);eB=(eC=(eD=bb.tryHead(bb.sortBy(function(eN){return eN[1];},bb.choose(function(eN){return eK(eN[0],eN[1]);},bb.indexed(eA)))),eD==null?null:{$:1,$0:eD.$0[0]}),eC==null?null:{$:1,$0:(eE=eC.$0,[ds.transpose(ca.array(eA,null,{$:1,$0:eE-1})),ds.transpose(ca.array(eA,{$:1,$0:eE+1},null))])});return eB==null?null:{$:1,$0:(eF=eB.$0,(eG=eF[0],(eH=eF[1],[T.filter(function(eN){return eL(ds.extractMeasuresO(eN));},eG),T.filter(function(eN){return eM(ds.extractMeasuresO(eN));},eH),(eI=bb.tryHead(bb.delay(function(){return bb.append(bb.choose(ds.extractMeasuresO,eG),bb.delay(function(){return bb.map(function(eN){return eN.$==0?eN.$1?new dJ({$:0,$0:eN.$0,$1:false}):eN:eN;},bb.choose(ds.extractMeasuresO,eH));}));})),(eJ=new dJ({$:1,$0:5,$1:50,$2:95}),eI==null?eJ:eI.$0))])))};};ds.cleanSpaces=function(ez){return T.filter(function(eA){var eB;return!(eB=(cb.Int())(eA),eB!=null&&eB.$==1);},bi.SplitStrings(bi.concat(" ",ez),[" "],1));};ds.extractMeasuresO=function(ez){var eA,eB,eC,eD,eE,eF,eG;eA=bi.SplitChars(ez,[" "],1);return!J.Equals(eA,null)&&eA.length===1&&(eC=(cb.Int())(T.get(eA,0)),eC!=null&&eC.$==1&&(eB=eC.$0,true))?{$:1,$0:new dJ({$:0,$0:es.abs(eB),$1:eB>=0})}:!J.Equals(eA,null)&&eA.length===3&&(eE=(cb.Int())(T.get(eA,0)),eE!=null&&eE.$==1&&(eF=(cb.Int())(T.get(eA,1)),eF!=null&&eF.$==1&&(eG=(cb.Int())(T.get(eA,2)),eG!=null&&eG.$==1&&(eD=[eG.$0,eE.$0,eF.$0],true))))?{$:1,$0:new dJ({$:1,$0:eD[1],$1:eD[2],$2:eD[0]})}:null;};ds.transpose=function(ez){var eA;eA=bb.max(bb.map(function(eB){return eB.length;},ez));return T.ofSeq(bb.delay(function(){return bb.map(function(eB){return T.ofSeq(bb.delay(function(){return bb.map(function(eC){return eC.length>eB?eC[eB]:" ";},ez);})).join("");},o.range(0,eA-1));}));};bc.delayed=function(ez,eA){var eB;eB=[null];return function(eC){var eD,eE;eD=eB[0];eD==null?void 0:eD.$0.Cancel$1();eB[0]={$:1,$0:new dH.New()};cQ.Start((eE=null,cQ.Delay(function(){return cQ.Bind(cQ.Sleep(ez),function(){eA(eC);return cQ.Zero();});})),{$:1,$0:eB[0].$0});};};bc.print=function(ez){if(typeof ez=="string")((function(eA){return function(eB){return eA(bC.toSafe(eB));};}(function(eA){eu.log(eA);}))(ez));else((function(eA){return function(eB){return eA(bC.prettyPrint(eB));};}(function(eA){eu.log(eA);}))(ez));};bc["String.Left"]=function(ez,eA){return eA<0?bc["String.Substring2"](ez,0,ez.length+eA):bc["String.Substring2"](ez,0,eA);};bc["String.Substring2"]=function(ez,eA,eB){var eC,eD;while(true){if(eB<=0)return"";else if(eA<0){eC=eA;eA=0;eB=eB+eC;}else return eA>=ez.length?"":bi.Substring(ez,eA,(eD=ez.length-eA,J.Compare(eB,eD)===-1?eB:eD));}};dt=c1.WcSplitterT=er.Class({connectedCallback:function(){var ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO;function eP(eX){var eY,eZ,e0,e1;eY=eG?["padding-left","padding-right","grid-column-gap"]:["padding-top","padding-bottom","grid-row-gap"];eZ=a.parseFloat("0"+et(eX.parentElement.parentElement).css(eY[0]));e0=a.parseFloat("0"+et(eX.parentElement.parentElement).css(eY[1]));eJ.Set(a.parseFloat("0"+et(eX.parentElement.parentElement).css(eY[2])));eI[0]=eZ+e0;e1=ez.getBoundingClientRect();return eG?eF?[e1.width,e1.height]:[-e1.width,e1.height]:eF?[e1.height,e1.width]:[-e1.height,e1.width];}function eQ(eX){return eG?eX.clientX:eX.clientY;}function eR(eX){var eY,eZ;eY=(eQ(eX)-eM[0])*100/eH[0][0]+eL[0];eE.Set((eZ=J.Compare(eC,eY)===1?eC:eY,J.Compare(eD,eZ)===-1?eD:eZ));}function eS(){if(eK[0]){eK[0]=false;self.removeEventListener("mousemove",eR,false);self.removeEventListener("mouseup",eS,false);}}function eT(eX){var eY,eZ;if(!eK[0]){eK[0]=true;eL[0]=eE.Get();eM[0]=eQ(eX);eH[0]=(eY=(eZ=eN[0],eZ==null?null:{$:1,$0:eP(eZ.$0)}),eY==null?[100,500]:eY.$0);self.addEventListener("mousemove",eR,false);self.addEventListener("mouseup",eS,false);eX.preventDefault();}}function eU(eX,eY,eZ,e0){return[(eX-eY-eZ)*e0/100,(eX-eY-eZ)*(100-e0)/100];}function eV(eX,eY){return(((((er.Curried(function(eZ,e0,e1,e2,e3){return eZ(" "+e0.toFixed(2)+"px "+e1.toFixed(2)+"px ; "+bC.toSafe(e2)+" : "+e3.toFixed(2)+"px; ");},5))(a.id))(eX))(eY))(eG?"height":"width"))(eH[0][1]);}function eW(){var eX;eX=eN[0];eX==null?void 0:eH[0]=eP(eX.$0);eE.Set(eE.Get());}if(!this.added){ez=this;eA=ez.attachShadow({mode:"open"});eB=self.document.createElement("div");eC=ez.hasAttribute("min")?a.parseFloat(ez.getAttribute("min")):4;eD=ez.hasAttribute("max")?a.parseFloat(ez.getAttribute("max")):96;eE=i.Create$1(ez.hasAttribute("value")?a.parseFloat(ez.getAttribute("value")):50);eF=!ez.hasAttribute("second");eG=ez.hasAttribute("vertical");eH=[[0,0]];eI=[0];eJ=i.Create$1(0);eK=[false];eL=[0];eM=[0];eN=[null];eO=(((((eG?c1.layoutVertical():c1.layoutHorizontal())(p.Map(function(eX){var eY;eY=eU(eH[0][0],eJ.Get(),eI[0],eX);return eV.apply(null,eY);},eE.get_View())))(function(){dO.addResizeObserver(eW,ez);eW();}))(function(eX){eN[0]={$:1,$0:eX};eW();}))(function(eX){eT(eX);}))(p.Map(function(eX){return function(eY){return eX(bC.prettyPrint(eY)+"px");};}(a.id),eJ.get_View()));c5.LoadLocalTemplates("");Z.Run(eB,eO);eA.appendChild(eB.firstChild);this.added=true;}}},g,dt);dt.Constructor=function(){var ez,eA;ez=(eA=ex.construct(self.HTMLElement,[],this.__proto__.constructor),eA);self.FsRoot.LibraryJS.WebComponent.WcSplitter.WcSplitterT.New.call(ez);return ez;};dt.New=er.Ctor(function(){g.New.call(this);this.added=false;(function(ez){return ez("WcSplitterT initializer");}(function(ez){eu.log(ez);}));},dt);du=h.DocElemNode=er.Class({Equals:function(ez){return this.ElKey===ez.ElKey;},GetHashCode:function(){return this.ElKey;}},null,du);du.New=function(ez,eA,eB,eC,eD,eE){var eF;return new du((eF={Attr:ez,Children:eA,El:eC,ElKey:eD},(er.SetOptional(eF,"Delimiters",eB),er.SetOptional(eF,"Render",eE),eF)));};dw.$cctor=function(){dw.$cctor=a.ignore;dw.counter=0;};dx=cs.XhrProvider=er.Class({Async:function(ez,eA,eB,eC,eD){cs.ajax(true,ez,eA,eB,eC,eD,function(){cs.ajax(true,ez,eA,eB,eC,eD,void 0);});}},g,dx);dx.New=er.Ctor(function(){g.New.call(this);},dx);dy=cv.FSharpEvent=er.Class({},g,dy);dy.New=er.Ctor(function(){g.New.call(this);this.event=dZ.New([]);},dy);dz=bf.LinkedList=er.Class({AddLast:function(ez){var eA;return this.c===0?(eA={p:null,n:null,v:ez},(this.n=eA,this.p=this.n,this.c=1,eA)):this.AddAfter(this.p,ez);},GetEnumerator$1:function(){return new ek.New(this);},AddAfter:function(ez,eA){var eB,eC;eB=ez.n;eC={p:ez,n:eB,v:eA};J.Equals(ez.n,null)?this.p=eC:void 0;ez.n=eC;!J.Equals(eB,null)?eB.p=eC:void 0;this.c=this.c+1;return eC;},RemoveFirst:function(){this.Remove$1(this.n);},Remove$1:function(ez){var eA,eB;eA=ez.p;eB=ez.n;J.Equals(eA,null)?this.n=eB:eA.n=eB;J.Equals(eB,null)?this.p=eA:eB.p=eA;this.c=this.c-1;},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,dz);dz.New=er.Ctor(function(){dz.New$1.call(this,[]);},dz);dz.New$1=er.Ctor(function(ez){var eA,eB;g.New.call(this);this.c=0;this.n=null;this.p=null;eA=cE.Get(ez);eA.MoveNext()?(this.n={p:null,n:null,v:eA.Current()},this.p=this.n,this.c=1):void 0;while(eA.MoveNext()){eB={p:this.p,n:null,v:eA.Current()};this.p.n=eB;this.p=eB;this.c=this.c+1;}},dz);dA.New$1=function(ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ){return c8.newPojoOpt([cd.op_EqualsEqualsGreater("account",ez),cd.op_EqualsEqualsGreater("authority",eA),cd.op_EqualsEqualsGreater("claimsRequest",eB),cd.op_EqualsEqualsGreater("correlationId",eC),cd.op_EqualsEqualsGreater("extraQueryParameters",eD),cd.op_EqualsEqualsGreater("extraScopesToConsent",eE),cd.op_EqualsEqualsGreater("loginHint",eF),cd.op_EqualsEqualsGreater("prompt",eG),cd.op_EqualsEqualsGreater("scopes",eH),cd.op_EqualsEqualsGreater("sid",eI),cd.op_EqualsEqualsGreater("state",eJ)]);};dB=cd.Account=er.Class({},g,dB);dC.New$1=function(ez,eA){return{Parse:ez,Write:eA};};dD.startsWith=function(ez,eA){var eB;switch(ez.$==1?eA.$==1?J.Equals(ez.$0,eA.$0)?(eB=[eA.$0,eA.$1,ez.$0,ez.$1],1):2:2:0){case 0:return{$:1,$0:eA};case 1:return dD.startsWith(eB[3],eB[1]);case 2:return null;}};dE=bf.Pair=er.Class({Equals:function(ez){return J.Equals(this.Key,ez.Key);},GetHashCode:function(){return J.Hash(this.Key);},CompareTo0:function(ez){return J.Compare(this.Key,ez.Key);}},null,dE);dE.New=function(ez,eA){return new dE({Key:ez,Value:eA});};dF.Map=function(ez,eA){return eA.$==1?{$:1,$0:eA.$0}:{$:0,$0:ez(eA.$0)};};dF.Bind=function(ez,eA){return eA.$==1?{$:1,$0:eA.$0}:ez(eA.$0);};dG=cQ.Scheduler=er.Class({Fork:function(ez){var eA;eA=this;this.robin.push(ez);this.idle?(this.idle=false,a.setTimeout(function(){eA.tick();},0)):void 0;},tick:function(){var ez,eA,eB;eA=this;eB=ev.now();ez=true;while(ez)if(this.robin.length===0){this.idle=true;ez=false;}else{(this.robin.shift())();ev.now()-eB>40?(a.setTimeout(function(){eA.tick();},0),ez=false):void 0;}}},g,dG);dG.New=er.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},dG);dH=f.CancellationTokenSource=er.Class({Cancel$1:function(){var ez;if(!this.c){this.c=true;ez=T.choose(function(eA){try{eA();return null;}catch(eB){return{$:1,$0:eB};}},this.r);if(T.length(ez)>0)throw new d7.New$3(ez);else void 0;}}},g,dH);dH.New=er.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},dH);dI=h.DynamicAttrNode=er.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(ez){return dU.get_Empty();},NGetEnterAnim:function(ez){return dU.get_Empty();},NGetChangeAnim:function(ez){return dU.get_Empty();},NSync:function(ez){if(this.dirty){(this.push(ez))(this.value);this.dirty=false;}}},g,dI);dI.New=er.Ctor(function(ez,eA){var eB;eB=this;g.New.call(this);this.push=eA;this.value=void 0;this.dirty=false;this.updates=p.Map(function(eC){eB.value=eC;eB.dirty=true;},ez);},dI);j.REGEX$1=function(ez,eA,eB){var eC;return eB===null?null:(eC=(new a.String(eB)).match(new a.RegExp(ez,eA)),J.Equals(eC,null)?null:!J.Equals(eC,null)&&eC.length===0?null:{$:1,$0:eC});};dJ=K.Measures=er.Class({toString:function(){return this.$==1?((((er.Curried(function(ez,eA,eB,eC){return ez(a.String(eA)+"-"+a.String(eB)+"-"+a.String(eC));},4))(a.id))(o.toInt(this.$0)))(o.toInt(this.$1)))(o.toInt(this.$2)):a.String(o.toInt(this.$1?this.$0:-this.$0));}},null,dJ);dL=dK.Hoverable=er.Class({Content:function(ez){return ez.on("mouseenter",function(){return dm.AddClass(ez.elt,"hovering");}).on("mouseleave",function(){return dm.RemoveClass(ez.elt,"hovering");});}},null,dL);dL.New$1=function(){return dL.New(i.Create$1(false));};dL.New=function(ez){return new dL({hover:ez});};dO.addResizeObserver=function(ez,eA){var eB,eC,eD,eE;try{eB=!(!a.ResizeObserver);}catch(eF){eB=false;}if(eB){eC=new a.ResizeObserver(ez);dO.set_observers(new cH({$:1,$0:eC,$1:dO.observers()}));eC.observe(eA);}else{eD=dO.dimsChanged(eA);cQ.Start((eE=null,cQ.Delay(function(){return cQ.While(function(){return eA.isConnected;},cQ.Delay(function(){return cQ.Bind(cQ.Sleep(110),function(){return eD()?(ez(),cQ.Zero()):cQ.Zero();});}));})),null);}};dO.set_observers=function(ez){bU.$cctor();bU.observers=ez;};dO.observers=function(){bU.$cctor();return bU.observers;};dO.dimsChanged=function(ez){var eA;eA=[ez.getBoundingClientRect()];return function(){var eB;eB=ez.getBoundingClientRect();return J.Equals(dO.domRect2Tuple(eA[0]),dO.domRect2Tuple(eB))?false:(eA[0]=eB,true);};};dO.domRect2Tuple=function(ez){return[ez.top,ez.left,ez.width,ez.height];};dP.$cctor=function(){dP.$cctor=a.ignore;dP.LoadedTemplates=new b1.New$5();dP.LocalTemplatesLoaded=false;dP.TextHoleRE="\\${([^}]+)}";};dQ=h.Elt=er.Class({on:function(ez,eA){var eB;eB=this;this.elt.addEventListener(ez,function(eC){return eA(eB.elt,eC);},false);return this;}},Z,dQ);dQ.TreeNode=function(ez,eA){var eB,eC;function eD(eE){return eE[1];}eB=d9.Create(eA);return new dQ.New$1({$:6,$0:ez},p.Map2Unit((eC=T.map(function(eE){return dl.Updates(eD(eE));},ez.Attrs),cS.TreeReduce(p.Const(),p.Map2Unit,eC)),eB.v),T.get(ez.Els,0),eB);};dQ.New=function(ez,eA,eB){var eC,eD;eC=di.CreateElemNode(ez,eA,eB.docNode);eD=d9.Create(eB.updates);return new dQ.New$1({$:1,$0:eC},p.Map2Unit(dl.Updates(eC.Attr),eD.v),ez,eD);};dQ.New$1=er.Ctor(function(ez,eA,eB,eC){Z.New.call(this,ez,eA);this.docNode$1=ez;this.updates$1=eA;this.elt=eB;this.rvUpdates=eC;},dQ);dS.New=function(ez,eA,eB,eC){var eD;eD={DynElem:ez,DynFlags:eA,DynNodes:eB};er.SetOptional(eD,"OnAfterRender",eC);return eD;};dT.convertTextNode=function(ez){var eA,eB,eC,eD,eE,eF;eA=null;eB=0;eD=ez.textContent;eE=new a.RegExp(c5.TextHoleRE(),"g");while(eA=eE.exec(eD),eA!==null){ez.parentNode.insertBefore(self.document.createTextNode(ca.string(eD,{$:1,$0:eB},{$:1,$0:eE.lastIndex-T.get(eA,0).length-1})),ez);eB=eE.lastIndex;eF=self.document.createElement("span");eF.setAttribute("ws-replace",T.get(eA,1).toLowerCase());ez.parentNode.insertBefore(eF,ez);}eE.lastIndex=0;ez.textContent=ca.string(eD,{$:1,$0:eB},null);};dT.failNotLoaded=function(ez){eu.warn("Instantiating non-loaded template",ez);};dT.fillTextHole=function(ez,eA,eB){var eC;eC=ez.querySelector("[ws-replace]");return J.Equals(eC,null)?(eu.warn("Filling non-existent text hole",eB),null):(eC.parentNode.replaceChild(new a.Text(eA),eC),{$:1,$0:eC.getAttribute("ws-replace")});};dT.removeHolesExcept=function(ez,eA){function eB(eC){dm.IterSelector(ez,"["+eC+"]",function(eD){if(!eA.Contains(eD.getAttribute(eC)))eD.removeAttribute(eC);});}eB("ws-attr");eB("ws-onafterrender");eB("ws-var");dm.IterSelector(ez,"[ws-hole]",function(eC){if(!eA.Contains(eC.getAttribute("ws-hole"))){eC.removeAttribute("ws-hole");while(eC.hasChildNodes())eC.removeChild(eC.lastChild);}});dm.IterSelector(ez,"[ws-replace]",function(eC){if(!eA.Contains(eC.getAttribute("ws-replace")))eC.parentNode.removeChild(eC);});dm.IterSelector(ez,"[ws-on]",function(eC){eC.setAttribute("ws-on",bi.concat(" ",T.filter(function(eD){return eA.Contains(T.get(bi.SplitChars(eD,[":"],1),1));},bi.SplitChars(eC.getAttribute("ws-on"),[" "],1))));});dm.IterSelector(ez,"[ws-attr-holes]",function(eC){var eD,eE,eF,eG,eH;eD=bi.SplitChars(eC.getAttribute("ws-attr-holes"),[" "],1);for(eE=0,eF=eD.length-1;eE<=eF;eE++){eG=T.get(eD,eE);eC.setAttribute(eG,(eH=new a.RegExp(c5.TextHoleRE(),"g"),eC.getAttribute(eG).replace(eH,function(eI,eJ){return eA.Contains(eJ)?eI:"";})));}});};dT.fillInstanceAttrs=function(ez,eA){var eB,eC,eD,eE,eF;dT.convertAttrs(eA);eB=eA.nodeName.toLowerCase();eC=ez.querySelector("[ws-attr="+eB+"]");if(J.Equals(eC,null))eu.warn("Filling non-existent attr hole",eB);else{eC.removeAttribute("ws-attr");for(eD=0,eE=eA.attributes.length-1;eD<=eE;eD++){eF=eA.attributes.item(eD);eF.name==="class"&&eC.hasAttribute("class")?eC.setAttribute("class",eC.getAttribute("class")+" "+eF.nodeValue):eC.setAttribute(eF.name,eF.nodeValue);}}};dT.mapHoles=function(ez,eA){function eB(eC){dm.IterSelector(ez,"["+eC+"]",function(eD){var eE,eF;eE=(eF=null,[eA.TryGetValue(eD.getAttribute(eC).toLowerCase(),{get:function(){return eF;},set:function(eG){eF=eG;}}),eF]);eE[0]?eD.setAttribute(eC,eE[1]):void 0;});}eB("ws-hole");eB("ws-replace");eB("ws-attr");eB("ws-onafterrender");eB("ws-var");dm.IterSelector(ez,"[ws-on]",function(eC){eC.setAttribute("ws-on",bi.concat(" ",T.map(function(eD){var eE,eF,eG;eE=bi.SplitChars(eD,[":"],1);eF=(eG=null,[eA.TryGetValue(T.get(eE,1),{get:function(){return eG;},set:function(eH){eG=eH;}}),eG]);return eF[0]?T.get(eE,0)+":"+eF[1]:eD;},bi.SplitChars(eC.getAttribute("ws-on"),[" "],1))));});dm.IterSelector(ez,"[ws-attr-holes]",function(eC){var eD,eE,eF;eD=bi.SplitChars(eC.getAttribute("ws-attr-holes"),[" "],1);for(eE=0,eF=eD.length-1;eE<=eF;eE++)(function(){var eG;function eH(eI,eJ){var eK;eK=o.KeyValue(eJ);return eI.replace(new a.RegExp("\\${"+eK[0]+"}","ig"),"${"+eK[1]+"}");}eG=T.get(eD,eE);return eC.setAttribute(eG,(((er.Curried3(bb.fold))(eH))(eC.getAttribute(eG)))(eA));}());});};dT.fill=function(ez,eA,eB){while(true)if(ez.hasChildNodes())eB=eA.insertBefore(ez.lastChild,eB);else return null;};dT.convertAttrs=function(ez){var eB,eC,eD,eE,eF,eG,eH,eI;function eA(eJ){var eK;eK=ez.getAttribute(eJ);eK===null?void 0:ez.setAttribute(eJ,eK.toLowerCase());}eB=ez.attributes;eC=[];eD=[];eE=[];for(eF=0,eG=eB.length-1;eF<=eG;eF++){eH=eB.item(eF);bi.StartsWith(eH.nodeName,"ws-on")&&eH.nodeName!=="ws-onafterrender"&&eH.nodeName!=="ws-on"?(eC.push(eH.nodeName),eD.push(ca.string(eH.nodeName,{$:1,$0:"ws-on".length},null)+":"+eH.nodeValue.toLowerCase())):!bi.StartsWith(eH.nodeName,"ws-")&&(new a.RegExp(c5.TextHoleRE())).test(eH.nodeValue)?(eH.nodeValue=(eI=new a.RegExp(c5.TextHoleRE(),"g"),eH.nodeValue.replace(eI,function(eJ,eK){return"${"+eK.toLowerCase()+"}";})),eE.push(eH.nodeName)):void 0;}!(eD.length==0)?ez.setAttribute("ws-on",bi.concat(" ",eD)):void 0;!(eE.length==0)?ez.setAttribute("ws-attr-holes",bi.concat(" ",eE)):void 0;eA("ws-hole");eA("ws-replace");eA("ws-attr");eA("ws-onafterrender");eA("ws-var");T.iter(function(eJ){ez.removeAttribute(eJ);},eC);};dU.get_UseAnimations=function(){return eb.UseAnimations();};dU.Play=function(ez){var eA;eA=null;return cQ.Delay(function(){return cQ.Bind(dU.Run(a.ignore,eb.Actions(ez)),function(){eb.Finalize(ez);return cQ.Return(null);});});};dU.Append=function(ez,eA){return{$:0,$0:ej.Append(ez.$0,eA.$0)};};dU.Run=function(ez,eA){var eB;function eC(eD){function eE(eF,eG){var eH;eH=eG-eF;eA.Compute(eH);ez();return eH<=eB?void a.requestAnimationFrame(function(eI){eE(eF,eI);}):eD();}a.requestAnimationFrame(function(eF){eE(eF,eF);});}eB=eA.Duration;return eB===0?cQ.Zero():cQ.FromContinuations(function(eD,eE,eF){return eC.apply(null,[eD,eE,eF]);});};dU.Concat=function(ez){return{$:0,$0:ej.Concat(bb.map(eb.List,ez))};};dU.get_Empty=function(){return{$:0,$0:ej.Empty()};};dV.BatchUpdatesEnabled=function(){ec.$cctor();return ec.BatchUpdatesEnabled;};dW.StartProcessor=function(ez){var eA;function eB(){var eC;eC=null;return cQ.Delay(function(){return cQ.Bind(ez,function(){var eD;eD=eA[0];return eD===1?(eA[0]=0,cQ.Zero()):eD===2?(eA[0]=1,eB()):cQ.Zero();});});}eA=[0];return function(){var eC;eC=eA[0];eC===0?(eA[0]=1,cQ.Start(eB(),null)):eC===1?eA[0]=2:void 0;};};dX.concat=function(ez){var eA,eB;eA=[];for(var eC in ez)eA.push.apply(eA,ez[eC]);return eA;};dZ=dY.Event=er.Class({Trigger:function(ez){var eA,eB,eC;eA=this.Handlers.slice();for(eB=0,eC=eA.length-1;eB<=eC;eB++)(T.get(eA,eB))(null,ez);},Dispose:a.ignore},null,dZ);dZ.New=function(ez){return new dZ({Handlers:ez});};d0=H.NonStandardPromiseRejectionException=er.Class({},c9,d0);d0.New=er.Ctor(function(ez){this.message="Promise rejected";cO.setPrototypeOf(this,d0.prototype);this.reason=ez;},d0);d1.$cctor=function(){d1.$cctor=a.ignore;function ez(eA){var eB,eC;eB=(eC=0,[bZ.TryParseInt32(eA,{get:function(){return eC;},set:function(eD){eC=eD;}}),eC]);return eB[0]?{$:1,$0:eB[1]}:null;}d1.Empty=dC.New$1(function(){return[];},function(){return null;});d1.rRoot=dC.New(function(eA){return[eA];},[]);d1.rString=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=eg.read(eB.$0),eC!=null&&eC.$==1?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC.$0]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(eA==null?"null":eg.write(eA))]};});d1.rChar=dC.New$1(function(eA){var eB,eC,eD;eB=eA.Segments;return eB.$==1?(eC=eg.read(eB.$0),eC!=null&&eC.$==1&&(eC.$0.length===1&&(eD=eC.$0,true))?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),ed.Parse(eD)]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(eA)]};});d1.rGuid=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=null,bs.TryParse(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rInt=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseInt32(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rDouble=dC.New$1(function(eA){var eB,eC,eD;eB=eA.Segments;return eB.$==1?(eC=0,(eD=a.Number(eB.$0),a.isNaN(eD)?false:(eC=eD,true))?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rSByte=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseSByte(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rByte=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseByte(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rInt16=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseInt16(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rUInt16=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseUInt16(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rUInt=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseUInt32(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rInt64=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseInt64(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rUInt64=dC.New$1(function(eA){var eB,eC;eB=eA.Segments;return eB.$==1?(eC=0,bZ.TryParseUInt64(eB.$0,{get:function(){return eC;},set:function(eD){eC=eD;}})?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rSingle=dC.New$1(function(eA){var eB,eC,eD;eB=eA.Segments;return eB.$==1?(eC=0,(eD=a.Number(eB.$0),a.isNaN(eD)?false:(eC=eD,true))?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(a.String(eA))]};});d1.rBool=dC.New$1(function(eA){var eB,eC,eD;eB=eA.Segments;return eB.$==1?(eC=(eD=null,[bZ.TryParseBool(eB.$0,{get:function(){return eD;},set:function(eE){eD=eE;}}),eD]),eC[0]?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),eC[1]]]:[]):[];},function(eA){return{$:1,$0:[dd.Segment$2(eA?"True":"False")]};});d1.rWildcard=dC.New$1(function(eA){return[[dd.New(cH.Empty,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),bi.concat("/",eA.Segments)]];},function(eA){return{$:1,$0:[dd.Segment$2(eA)]};});d1.rDateTime=dC.New$1(function(eA){var eB,eC,eD,eE,eF,eG,eH,eI,eJ;eB=eA.Segments;return eB.$==1?(eC=eB.$0,eC.length===19&&eC[4]==="-"&&eC[7]==="-"&&eC[10]==="-"&&eC[13]==="."&&eC[16]==="."?(eD=ez(ca.string(eC,{$:1,$0:0},{$:1,$0:3})),(eE=ez(ca.string(eC,{$:1,$0:5},{$:1,$0:6})),(eF=ez(ca.string(eC,{$:1,$0:8},{$:1,$0:9})),(eG=ez(ca.string(eC,{$:1,$0:11},{$:1,$0:12})),(eH=ez(ca.string(eC,{$:1,$0:14},{$:1,$0:15})),(eI=ez(ca.string(eC,{$:1,$0:17},{$:1,$0:18})),eD!=null&&eD.$==1&&(eE!=null&&eE.$==1&&(eF!=null&&eF.$==1&&(eG!=null&&eG.$==1&&(eH!=null&&eH.$==1&&(eI!=null&&eI.$==1&&(eJ=[eF.$0,eG.$0,eE.$0,eH.$0,eI.$0,eD.$0],true))))))?[[dd.New(eB.$1,eA.QueryArgs,eA.FormData,eA.Method,eA.Body),(new ev(eJ[5],eJ[2]-1,eJ[0],eJ[1],eJ[3],eJ[4])).getTime()]]:[])))))):[]):[];},function(eA){var eB,eC;function eD(eE){var eF;eF=a.String(eE);return eF.length===1?"0"+eF:eF;}return{$:1,$0:[dd.Segment$2((eB=a.String((new ev(eA)).getFullYear()),(eC=eB.length,eC===1?"000"+eB:eC===2?"00"+eB:eC===3?"0"+eB:eB))+"-"+eD((new ev(eA)).getMonth()+1)+"-"+eD((new ev(eA)).getDate())+"-"+eD((new ev(eA)).getHours())+"."+eD((new ev(eA)).getMinutes())+"."+eD((new ev(eA)).getSeconds()))]};});};d2.OfArray=function(ez){return new cD.New$1(cG.OfSeq(bb.map(function(eA){return dE.New(eA[0],eA[1]);},ez)));};d2.FoldBack=function(ez,eA,eB){return bb.fold(function(eC,eD){return ez(eD.Key,eD.Value,eC);},eB,cG.Enumerate(true,eA.get_Tree()));};d2.ToSeq=function(ez){return bb.map(function(eA){return[eA.Key,eA.Value];},cG.Enumerate(false,ez.get_Tree()));};d3=f.OperationCanceledException=er.Class({},c9,d3);d3.New=er.Ctor(function(ez){d3.New$1.call(this,"The operation was canceled.",null,ez);},d3);d3.New$1=er.Ctor(function(ez,eA,eB){this.message=ez;this.inner=eA;cO.setPrototypeOf(this,d3.prototype);this.ct=eB;},d3);d4.Clear=function(ez){ez.splice(0,T.length(ez));};d5.$cctor=function(){d5.$cctor=a.ignore;d5.Doc=self.document;};d6.$cctor=function(){d6.$cctor=a.ignore;d6.EmptyAttr=null;};d7=f.AggregateException=er.Class({},c9,d7);d7.New$3=er.Ctor(function(ez){d7.New$4.call(this,"One or more errors occurred.",ez);},d7);d7.New$4=er.Ctor(function(ez,eA){this.message=ez;cO.setPrototypeOf(this,d7.prototype);this.innerExceptions=eA;},d7);bb.enumUsing=function(ez,eA){return{GetEnumerator:function(){var eB;try{eB=cE.Get(eA(ez));}catch(eC){ez.Dispose();throw eC;}return new cF.New(null,null,function(eD){return eB.MoveNext()&&(eD.c=eB.Current(),true);},function(){eB.Dispose();ez.Dispose();});}};};bb.enumWhile=function(ez,eA){return{GetEnumerator:function(){return new cF.New(null,null,function(eB){var eC;while(true){eC=eB.s;if(J.Equals(eC,null)){if(ez()){eB.s=cE.Get(eA);eB=eB;}else return false;}else if(eC.MoveNext()){eB.c=eC.Current();return true;}else{eC.Dispose();eB.s=null;eB=eB;}}},function(eB){var eC;eC=eB.s;!J.Equals(eC,null)?eC.Dispose():void 0;});}};};d8=bf.KeyCollection=er.Class({GetEnumerator$1:function(){return cE.Get(bb.map(function(ez){return ez.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,d8);d8.New=er.Ctor(function(ez){g.New.call(this);this.d=ez;},d8);d9=h.Updates=er.Class({},null,d9);d9.Create=function(ez){var eA;eA=null;eA=d9.New(ez,null,function(){var eB;eB=eA.s;return eB===null?(eB=_4.Copy(eA.c()),eA.s=eB,_4.WhenObsoleteRun(eB,function(){eA.s=null;}),eB):eB;});return eA;};d9.New=function(ez,eA,eB){return new d9({c:ez,s:eA,v:eB});};d$.New=function(ez,eA){return{PreviousNodes:ez,Top:eA};};ea.get_Empty=function(){return{$:0,$0:new b2.New$3()};};ea.FindAll=function(ez){var eA;function eB(eD){if(eD!=null&&eD.$==0){eB(eD.$0);eB(eD.$1);}else if(eD!=null&&eD.$==1)eC(eD.$0);else if(eD!=null&&eD.$==2)eB(eD.$0.Current);else if(eD!=null&&eD.$==6)T.iter(eC,eD.$0.Holes);}function eC(eD){eA.push(eD);eB(eD.Children);}eA=[];eB(ez);return{$:0,$0:new b2.New$2(eA)};};ea.Filter=function(ez,eA){return{$:0,$0:en.Filter(ez,eA.$0)};};ea.Except=function(ez,eA){return{$:0,$0:en.Except(ez.$0,eA.$0)};};ea.ToArray=function(ez){return en.ToArray(ez.$0);};ea.Intersect=function(ez,eA){return{$:0,$0:en.Intersect(ez.$0,eA.$0)};};eb.UseAnimations=function(){ei.$cctor();return ei.UseAnimations;};eb.Actions=function(ez){return eb.ConcatActions(T.choose(function(eA){return eA.$==1?{$:1,$0:eA.$0}:null;},ej.ToArray(ez.$0)));};eb.Finalize=function(ez){T.iter(function(eA){if(eA.$==0)eA.$0();},ej.ToArray(ez.$0));};eb.ConcatActions=function(ez){var eA,eB,eC,eD;eA=cS.ofSeqNonCopying(ez);eB=T.length(eA);return eB===0?eb.Const():eB===1?T.get(eA,0):(eC=bb.max(bb.map(function(eE){return eE.Duration;},eA)),(eD=T.map(function(eE){return eb.Prolong(eC,eE);},eA),eb.Def(eC,function(eE){T.iter(function(eF){eF.Compute(eE);},eD);})));};eb.List=function(ez){return ez.$0;};eb.Const=function(ez){return eb.Def(0,function(){return ez;});};eb.Def=function(ez,eA){return{Compute:eA,Duration:ez};};eb.Prolong=function(ez,eA){var eB,eC,eD;eB=eA.Compute;eC=eA.Duration;eD=r.Create(function(){return eA.Compute(eA.Duration);});return{Compute:function(eE){return eE>=eC?eD.f():eB(eE);},Duration:ez};};ec.$cctor=function(){ec.$cctor=a.ignore;ec.BatchUpdatesEnabled=true;};ed.IsUpper=function(ez){return ez>="A"&&ez<="Z";};ed.Parse=function(ez){return ez.length===1?ez:o.FailWith("String must be exactly one character long.");};ed.IsWhiteSpace=function(ez){return ez.match(new a.RegExp("\\s"))!==null;};ee.Activate=function(ez){var eA,eC,eD,eE,eF,eG,eH;function eB(eI){var eJ,eK,eL,eM,eN;if(J.Equals(eI,null))return eI;else if(typeof eI=="object"){if(eI instanceof a.Array)return ee.shallowMap(eB,eI);else{eJ=ee.shallowMap(eB,eI.$V);eK=eI.$T;if(eK===void 0)return eJ;else{eL=T.get(eC,eK);if(eL===1)return by.ofArray(eJ);else if(eL===2)return self.WebSharper.Decimal.CreateDecimalBits(eJ);else{eM=new(T.get(eC,eK))();for(var eO in eJ)if(function(eP){eM[eP]=eJ[eP];return false;}(eO))break;return eM;}}}}else return eI;}eC=ez?ez.$TYPES:void 0;if(eC===void 0)eA=ez;else{for(eD=0,eE=T.length(eC)-1;eD<=eE;eD++){eH=T.get(eC,eD);switch(!J.Equals(eH,null)&&eH.length===3?T.get(eH,0)==="WebSharper"?T.get(eH,1)==="List"?T.get(eH,2)==="T"?0:(eG=eH,2):(eG=eH,2):(eG=eH,2):!J.Equals(eH,null)&&eH.length===2?T.get(eH,0)==="WebSharper"?T.get(eH,1)==="Decimal"?1:(eG=eH,2):(eG=eH,2):(eG=eH,2)){case 0:eF=1;break;case 1:eF=2;break;case 2:eF=ee.lookup(eG);break;}T.set(eC,eD,eF);}eA=ez.$DATA;}return eB(eA);};ee.shallowMap=function(ez,eA){var eB,eC;if(eA instanceof a.Array)return T.map(ez,eA);else if(typeof eA=="object"){eB={};for(var eD in eA)if(function(eE){eB[eE]=ez(eA[eE]);return false;}(eD))break;return eB;}else return eA;};ee.lookup=function(ez){var eA,eB,eC,eD,eE;eC=T.length(ez);eA=self;eB=0;while(eB<eC){eD=T.get(ez,eB);eE=eA[eD];!J.Equals(typeof eE,void 0)?(eA=eE,eB=eB+1):o.FailWith("Invalid server reply. Failed to find type: "+eD);}return eA;};ef=f.FormatException=er.Class({},c9,ef);ef.New$1=er.Ctor(function(ez){this.message=ez;cO.setPrototypeOf(this,ef.prototype);},ef);dC.New=function(ez,eA){return{Parse:ez,Segment:eA};};eg.read=function(ez){var eA;eA=[];return function(eB){var eC;while(true){eC=eg.readEscapedFromChars(eB);if(eC[0]===-2)return null;else if(eC[0]===-1)return{$:1,$0:(function(eD){return function(eE){return bi.concat(eD,eE);};}(""))(eA)};else{eA.push(ey.fromCharCode(eC[0]));eB=eC[1];}}}(by.ofSeq(bb.map(function(eB){return eB.charCodeAt();},ez)));};eg.write=function(ez){return bi.concat("",bb.mapi(function(eA,eB){return eg.writeEscapedAsString(eA+1===ez.length,eB);},ez));};eg.readEscapedFromChars=function(ez){var eA,eB,eC,eD,eE,eF,eG,eH;function eI(){var eK,eL;return eA.$==1?(eK=eA.$1,(eL=eA.$0,(eA=eK,eL))):-1;}function eJ(eK){return eK>="0".charCodeAt()&&eK<="9".charCodeAt()?eK-"0".charCodeAt():eK>="a".charCodeAt()&&eK<="f".charCodeAt()?eK-"a".charCodeAt()+10:eK>="A".charCodeAt()&&eK<="F".charCodeAt()?eK-"A".charCodeAt()+10:-2;}eA=ez;return[(eB=eI(),eB==="~".charCodeAt()?(eC=eI(),eC==="u".charCodeAt()?(eD=eI(),(eE=eI(),(eF=eI(),(eG=eI(),eD>=0&&eE>=0&&eF>=0&&eG>=0?eg.op_PlusPlus(eg.op_PlusPlus(eg.op_PlusPlus(eJ(eD),eJ(eE)),eJ(eF)),eJ(eG)):-2)))):(eH=eI(),eC>=0&&eH>=0?eg.op_PlusPlus(eJ(eC),eJ(eH)):-2)):eB),eA];};eg.writeEscapedAsString=function(ez,eA){var eB;eB=eA.charCodeAt();return eg.isUnreserved(ez,eA)?eA:eB<256?"~"+bi.PadLeftWith(eB.toString(16),2,"0"):"~u"+bi.PadLeftWith(eB.toString(16),4,"0");};eg.op_PlusPlus=function(ez,eA){return(ez<<4)+eA;};eg.isUnreserved=function(ez,eA){return eA==="-"||(eA==="."?!ez:eA==="_"||(eA>="A"&&eA<="Z"||(eA>="a"&&eA<="z"||eA>="0"&&eA<="9")));};bZ.TryParseSByte=function(ez,eA){return bZ.TryParse(ez,-128,127,eA);};bZ.TryParseByte=function(ez,eA){return bZ.TryParse(ez,0,255,eA);};bZ.TryParseInt16=function(ez,eA){return bZ.TryParse(ez,-32768,32767,eA);};bZ.TryParseUInt16=function(ez,eA){return bZ.TryParse(ez,0,65535,eA);};bZ.TryParseUInt32=function(ez,eA){return bZ.TryParse(ez,0,4294967295,eA);};bZ.TryParseUInt64=function(ez,eA){return bZ.TryParse(ez,0,18446744073709551615,eA);};eh.isBlank=function(ez){return bi.forall(ed.IsWhiteSpace,ez);};ei.$cctor=function(){ei.$cctor=a.ignore;ei.CubicInOut=em.Custom(function(ez){var eA;eA=ez*ez;return 3*eA-2*(eA*ez);});ei.UseAnimations=true;};ej.Append=function(ez,eA){return ez.$==0?eA:eA.$==0?ez:{$:2,$0:ez,$1:eA};};ej.ToArray=function(ez){var eA;function eB(eC){if(eC.$==1)eA.push(eC.$0);else if(eC.$==2){eB(eC.$0);eB(eC.$1);}else if(eC.$==3)T.iter(function(eD){eA.push(eD);},eC.$0);}eA=[];eB(ez);return eA.slice(0);};ej.Concat=function(ez){var eA;eA=cS.ofSeqNonCopying(ez);return cS.TreeReduce(ej.Empty(),ej.Append,eA);};ej.Empty=function(){ep.$cctor();return ep.Empty;};ek=bf.LinkedListEnumerator=er.Class({MoveNext:function(){this.c=this.c.n;return!J.Equals(this.c,null);},Current:function(){return this.c.v;},Dispose:a.ignore},g,ek);ek.New=er.Ctor(function(ez){g.New.call(this);this.c=ez;},ek);el.WriteLink=function(ez,eA){var eB;eB=eA.get_IsEmpty()?"":"?"+el.WriteQuery(eA);return"/"+el.Concat(ez)+eB;};el.Concat=function(ez){var eA,eB;eA=[];eB=true;by.iter(function(eC){if(!bi.IsNullOrEmpty(eC)){eB?eB=false:eA.push("/");eA.push(eC);}},ez);return bi.Join("",T.ofSeq(eA));};el.WriteQuery=function(ez){function eA(eB,eC){return eB+"="+eC;}return bi.concat("&",bb.map(function(eB){return eA(eB[0],eB[1]);},d2.ToSeq(ez)));};em=h.Easing=er.Class({},g,em);em.Custom=function(ez){return new em.New(ez);};em.New=er.Ctor(function(ez){g.New.call(this);this.transformTime=ez;},em);en.Filter=function(ez,eA){return new b2.New$2(T.filter(ez,en.ToArray(eA)));};en.Except=function(ez,eA){var eB;eB=new b2.New$2(en.ToArray(eA));eB.ExceptWith(en.ToArray(ez));return eB;};en.ToArray=function(ez){var eA;eA=T.create(ez.get_Count(),void 0);ez.CopyTo(eA);return eA;};en.Intersect=function(ez,eA){var eB;eB=new b2.New$2(en.ToArray(ez));eB.IntersectWith(en.ToArray(eA));return eB;};eo.Children=function(ez,eA){var eB,eC,eD;if(eA!=null&&eA.$==1){eD=[];eB=eA.$0[0].nextSibling;while(eB!==eA.$0[1]){eD.push(eB);eB=eB.nextSibling;}return{$:0,$0:eD};}else return{$:0,$0:T.init(ez.childNodes.length,(eC=ez.childNodes,function(eE){return eC[eE];}))};};eo.Except=function(ez,eA){var eB;eB=ez.$0;return{$:0,$0:T.filter(function(eC){return T.forall(function(eD){return!(eC===eD);},eB);},eA.$0)};};eo.Iter=function(ez,eA){T.iter(ez,eA.$0);};eo.DocChildren=function(ez){var eA;function eB(eC){if(eC!=null&&eC.$==2)eB(eC.$0.Current);else if(eC!=null&&eC.$==1)eA.push(eC.$0.El);else if(eC==null);else if(eC!=null&&eC.$==5)eA.push(eC.$0);else if(eC!=null&&eC.$==4)eA.push(eC.$0.Text);else if(eC!=null&&eC.$==6)T.iter(function(eD){if(eD==null||eD.constructor===cO)eB(eD);else eA.push(eD);},eC.$0.Els);else{eB(eC.$0);eB(eC.$1);}}eA=[];eB(ez.Children);return{$:0,$0:cS.ofSeqNonCopying(eA)};};ep.$cctor=function(){ep.$cctor=a.ignore;ep.Empty={$:0};};er.OnLoad(function(){e.mainProgram();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=ProzperServer.min.map

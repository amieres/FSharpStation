(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.ResultMessage=c.ResultMessage||{};e=c.ResultMessageHelpers=c.ResultMessageHelpers||{};f=c.Monads=c.Monads||{};g=f.Seq=f.Seq||{};h=f.Async=f.Async||{};i=a.WebSharper;j=i&&i.Obj;k=f.Result=f.Result||{};l=k.Builder=k.Builder||{};m=k.Operators=k.Operators||{};n=f.Eff=f.Eff||{};o=n.Eff=n.Eff||{};p=n.Done=n.Done||{};q=o.LambdaT=o.LambdaT||{};r=n.Operators=n.Operators||{};s=n.EffBuilder=n.EffBuilder||{};t=n.State=n.State||{};u=t.Put=t.Put||{};v=t.Get=t.Get||{};w=n.Log=n.Log||{};x=w.LogEntry=w.LogEntry||{};y=n.Rsl=n.Rsl||{};z=y.Fail=y.Fail||{};A=f.ResultM=f.ResultM||{};B=A.Builder=A.Builder||{};C=A.Operators=A.Operators||{};D=f.ResultMAutoOpen=f.ResultMAutoOpen||{};E=f.AsyncResultM=f.AsyncResultM||{};F=E.AsyncResultMBuilder=E.AsyncResultMBuilder||{};G=f.AsyncResultMAutoOpen=f.AsyncResultMAutoOpen||{};H=c.String=c.String||{};I=c.SortWith=c.SortWith||{};J=b.StackOverflow=b.StackOverflow||{};K=J.Templating=J.Templating||{};L=J.TipoAliado=J.TipoAliado||{};M=J.Pais=J.Pais||{};N=J.State=J.State||{};O=J.Identificacion=J.Identificacion||{};P=J.TipoCuenta=J.TipoCuenta||{};Q=J.CuentaBancaria=J.CuentaBancaria||{};R=J.StatusAliado=J.StatusAliado||{};S=J.ConceptoPago=J.ConceptoPago||{};T=J.Transaccion=J.Transaccion||{};U=J.TipoDireccion=J.TipoDireccion||{};V=J.Direccion=J.Direccion||{};W=J.TipoTelefono=J.TipoTelefono||{};X=J.Telefono=J.Telefono||{};Y=J.Genero=J.Genero||{};Z=J.DatosPersonales=J.DatosPersonales||{};_0=J.TipoMensaje=J.TipoMensaje||{};_1=J.Remitente=J.Remitente||{};_2=J.Mensaje=J.Mensaje||{};_3=J.Aliado=J.Aliado||{};_4=J.PremisasCalculo=J.PremisasCalculo||{};_5=J.Modelo=J.Modelo||{};_6=J.AliadoModule=J.AliadoModule||{};_7=_6.Buscar=_6.Buscar||{};_8=J.Rpc=J.Rpc||{};_9=J.ModeloUI=J.ModeloUI||{};_=J.RenderAliados=J.RenderAliados||{};$=J.RenderAliado=J.RenderAliado||{};ba=J.MainProgram=J.MainProgram||{};bb=J.Server=J.Server||{};bc=a.StartupCode$StackOverflow$StackOverflow=a.StartupCode$StackOverflow$StackOverflow||{};bd=a.StackOverflow_GeneratedPrintf=a.StackOverflow_GeneratedPrintf||{};be=a.StackOverflow_Templates=a.StackOverflow_Templates||{};bf=a.IntelliFactory;bg=bf&&bf.Runtime;bh=i&&i.Utils;bi=i&&i.Strings;bj=i&&i.Seq;bk=i&&i.List;bl=i&&i.Arrays;bm=i&&i.Concurrency;bn=i&&i.Enumerator;bo=i&&i.Result;bp=i&&i.Operators;bq=i&&i.Unchecked;br=a.console;bs=i&&i.Slice;bt=a.Date;bu=i&&i.Collections;bv=bu&&bu.Dictionary;bw=bu&&bu.FSharpMap;bx=i&&i.UI;by=bx&&bx.View;bz=bu&&bu.FSharpSet;bA=bx&&bx.Templating;bB=bA&&bA.Runtime;bC=bB&&bB.Server;bD=bC&&bC.ProviderBuilder;bE=bC&&bC.Handler;bF=bC&&bC.TemplateInstance;bG=bx&&bx.Var$1;bH=bx&&bx.Doc;bI=b&&b.LibraryJS;bJ=bI&&bI.AppFramework;bK=bJ&&bJ.PlugIn;bL=i&&i.Lazy;bM=bI&&bI.LayoutEngineModule;bN=i&&i.Remoting;bO=bN&&bN.AjaxRemotingProvider;bP=bx&&bx.Client;bQ=bP&&bP.Templates;d=c.ResultMessage=bg.Class({toString:function(){return this.$==1?(function(bR){return function(bS){return bR("Error    : "+bh.toSafe(bS));};}(a.id))(this.$0):this.$==2?(function(bR){return function(bS){return bR("Warning  : "+bh.toSafe(bS));};}(a.id))(this.$0):this.$==3?this.$0:this.$==4?(function(bR){return function(bS){return bR(a.String(bS));};}(a.id))(this.$0):this.$==5?(((bg.Curried3(function(bR,bS,bT){return bR("Exception: "+bh.toSafe(bS)+", "+bh.toSafe(bT));}))(a.id))(this.$0))(this.$1):this.$==6?bi.concat("\n",bj.map(a.String,bj.filter(function(bR){return bR.$!=0;},this.$0))):"";}},null,d);d.NoMsg=new d({$:0});e.infof=function(bR){return bR(function(bS){return new d({$:3,$0:bS});});};e.warningf=function(bR){return bR(function(bS){return new d({$:2,$0:bS});});};e.errorMsgf=function(bR){return bR(function(bS){return new d({$:1,$0:bS});});};d.summarizedI=function(bR){return d.summarizedF(function(){return[0,0,1];},bR);};d.summarizedW=function(bR){return d.summarizedF(function(){return[0,1,0];},bR);};d.summarized=function(bR){return d.summarizedF(function(){return[1,0,0];},bR);};d.summarizedF=function(bR,bS){return bi.concat("\n",bj.filter(function(bT){return""!==bT;},bk.ofArray([a.String(bS),d.summaryF(bR,bS)])));};d.summaryF=function(bR,bS){var bT,bU;bU=d.countF(bR,bS);switch(bU[0]===0?bU[1]===0?0:bU[1]===1?bU[2]===0?0:(bT=bU[1],2):(bT=bU[1],2):bU[0]===1?bU[1]===0?bU[2]===0?0:(bT=bU[0],1):(bT=[bU[0],bU[1]],3):bU[1]===0?(bT=bU[0],1):(bT=[bU[0],bU[1]],3)){case 0:return"";case 1:return(function(bV){return function(bW){return bV("Errors   : "+a.String(bW)+"\n");};}(a.id))(bT);case 2:return(function(bV){return function(bW){return bV("Warnings : "+a.String(bW)+"\n");};}(a.id))(bT);case 3:return(((bg.Curried3(function(bV,bW,bX){return bV("Errors   : "+a.String(bW)+", Warnings: "+a.String(bX)+"\n");}))(a.id))(bT[0]))(bT[1]);}};d.reduceMsgs=function(bR){return bj.fold(d.addMsg,d.NoMsg,bR);};d.addMsg=function(bR,bS){return bR.$==0?bS:bR.$==6?bS.$==0?bR:bS.$==6?new d({$:6,$0:bR.$0.concat(bS.$0)}):new d({$:6,$0:bR.$0.concat([bS])}):bS.$==0?bR:bS.$==6?new d({$:6,$0:[bR].concat(bS.$0)}):new d({$:6,$0:[bR,bS]});};d.countI=function(bR){return d.countF(function(){return[0,0,1];},bR);};d.countW=function(bR){return d.countF(function(){return[0,1,0];},bR);};d.count=function(bR){return d.countF(function(){return[1,0,0];},bR);};d.countF=function(bR,bS){function bT(bU,bV,bW){return function(bX){return[bU+bX[0],bV+bX[1],bW+bX[2]];};}return bS.$==0?[0,0,0]:bS.$==3?[0,0,1]:bS.$==2?[0,1,0]:bS.$==4?bR(bS.$0):bS.$==6?bj.fold(function(bU,bV){return(function(bW){return bT(bW[0],bW[1],bW[2]);}(bU))(bV);},[0,0,0],bj.map(function(bU){return d.countF(bR,bU);},d.exclnoMsg(bS.$0))):[1,0,0];};d.isFatalW=function(bR){return d.isFatalF(function(){return false;},bR);};d.isFatal=function(bR){return d.isFatalF(function(){return true;},bR);};d.isFatalF=function(bR,bS){return bS.$==0?false:bS.$==3?false:bS.$==2?false:bS.$==4?bR(bS.$0):bS.$==6?bj.exists(function(bT){return d.isFatalF(bR,bT);},bS.$0):true;};d.isWarningOrInfoW=function(bR){return d.isWarningOrInfoF(function(){return true;},bR);};d.isWarningOrInfo=function(bR){return d.isWarningOrInfoF(function(){return false;},bR);};d.isWarningOrInfoF=function(bR,bS){return bS.$==2||(bS.$==4?bR(bS.$0):bS.$==6&&bj.forall(function(bT){return d.isWarningOrInfoF(bR,bT)||d.isInfoF(bR,bT);},d.exclnoMsg(bS.$0)));};d.isInfoI=function(bR){return d.isInfoF(function(){return true;},bR);};d.isInfo=function(bR){return d.isInfoF(function(){return false;},bR);};d.isInfoF=function(bR,bS){return bS.$==3||(bS.$==4?bR(bS.$0):bS.$==6&&bj.forall(function(bT){return d.isInfoF(bR,bT);},d.exclnoMsg(bS.$0)));};d.freeMessageI=function(bR){var bS;function bT(bU){return new d({$:3,$0:bU});}return d.freeMessageF((bS=function(bU){return function(bV){return bU(a.String(bV));};}(a.id),function(bU){return bT(bS(bU));}),bR);};d.freeMessageW=function(bR){var bS;function bT(bU){return new d({$:2,$0:bU});}return d.freeMessageF((bS=function(bU){return function(bV){return bU(a.String(bV));};}(a.id),function(bU){return bT(bS(bU));}),bR);};d.freeMessage=function(bR){var bS;function bT(bU){return new d({$:1,$0:bU});}return d.freeMessageF((bS=function(bU){return function(bV){return bU(a.String(bV));};}(a.id),function(bU){return bT(bS(bU));}),bR);};d.freeMessageF=function(bR,bS){return d.bindMessage(bR,bS);};d.bindMessage=function(bR,bS){return bS.$==4?bR(bS.$0):bS.$==1?new d({$:1,$0:bS.$0}):bS.$==3?new d({$:3,$0:bS.$0}):bS.$==2?new d({$:2,$0:bS.$0}):bS.$==5?new d({$:5,$0:bS.$0,$1:bS.$1}):bS.$==6?new d({$:6,$0:bl.map(function(bT){return d.bindMessage(bR,bT);},bS.$0)}):d.NoMsg;};d.exclnoMsg=function(bR){function bS(bT){return!bT;}return bj.filter(function(bT){return bS(d.noMsg(bT));},bR);};d.noMsg=function(bR){return bR.$==0;};g.absorbR=function(bR){return bj.choose(function(bS){return bS.$==0?{$:1,$0:bS.$0}:null;},bR);};g.absorbO=function(bR){return bj.choose(a.id,bR);};g.insertR=function(bR){return bR.$==0?bj.map(function(bS){return{$:0,$0:bS};},bR.$0):(g.rtn())(c.Error$1(bR.$0));};g.insertO=function(bR){var bS;bS=bR==null?null:{$:1,$0:bj.map(function(bT){return{$:1,$0:bT};},bR.$0)};return bS==null?(g.rtn())(null):bS.$0;};g.rtn=function(){bc.$cctor();return bc.rtn;};h.insertR=function(bR){function bS(bU){return{$:0,$0:bU};}function bT(bU){return bm.Return(bU);}return bR.$==0?bm.Bind(bR.$0,function(bU){return bT(bS(bU));}):bm.Return(c.Error$1(bR.$0));};h.insertO=function(bR){var bS;function bT(bV){return{$:1,$0:bV};}function bU(bV){return bm.Return(bV);}bS=bR==null?null:{$:1,$0:bm.Bind(bR.$0,function(bV){return bU(bT(bV));})};return bS==null?bm.Return(null):bS.$0;};h.sequenceSeq=function(bR){return h.traverseSeq(a.id,bR);};h.traverseSeq=function(bR,bS){function bT(bU){return bm.Return(bU);}return bm.Bind(bl.foldBack(function(bU,bV){return h.op_GreaterGreaterEquals(bR(bU),function(bW){return h.op_GreaterGreaterEquals(bV,function(bX){return bm.Return(new bk.T({$:1,$0:bW,$1:bX}));});});},bl.ofSeq(bS),bm.Return(bk.T.Empty)),function(bU){return bT(a.id(bU));});};h.op_GreaterGreaterEquals=function(bR,bS){return bm.Bind(bR,bS);};h.sleepThen=function(bR,bS){var bT;bT=null;return bm.Delay(function(){return bm.Bind(bm.Sleep(bS),function(){return bm.Return(bR());});});};h.apply=function(bR,bS){var bT;bT=null;return bm.Delay(function(){return bm.Bind(bm.StartChild(bR,null),function(bU){return bm.Bind(bm.StartChild(bS,null),function(bV){return bm.Bind(bU,function(bW){return bm.Bind(bV,function(bX){return bm.Return(bW(bX));});});});});});};l=k.Builder=bg.Class({For:function(bR,bS){var bT;bT=this;return this.Using(bn.Get(bR),function(bU){return bT.While(function(){return bU.MoveNext();},bT.Delay(function(){return bS(bU.Current());}));});},While:function(bR,bS){function bT(bU,bV){return bU()?bo.Bind(function(){return bT(bU,bV);},bV()):k.rtn();}return bT(bR,bS);},Using:function(bR,bS){try{return bS(bR);}finally{bR.Dispose();}},TryFinally:function(bR,bS){try{return bR();}finally{bS();}},TryWith:function(bR,bS){try{return bR();}catch(bT){return bS(bT);}},Run:function(bR){return k.bindP(bR,{$:0,$0:null});},Combine:function(bR,bS){return bo.Bind(bS,bR);},Delay:a.id,Zero:function(){return k.rtn();},Bind:function(bR,bS){return bo.Bind(bS,bR);},ReturnFrom:a.id,Return:function(bR){return k.rtn(bR);}},j,l);l.New=bg.Ctor(function(){j.New.call(this);},l);m.result=function(){bc.$cctor();return bc.result$1;};m.rtn=function(bR){return k.rtn(bR);};m.op_GreaterEqualsGreater=function(bR,bS,bT){return m.op_GreaterGreaterEquals(bR(bT),bS);};m.op_RightShift=function(bR,bS,bT){return m.op_BarGreaterGreater(bR(bT),bS);};m.op_GreaterGreaterEquals=function(bR,bS){return k.bindP(bS,bR);};m.op_BarGreaterGreater=function(bR,bS){return k.mapP(bS,bR);};k.result=function(){bc.$cctor();return bc.result;};k.sequenceSeq=function(bR){return k.traverseSeq(a.id,bR);};k.traverseSeq=function(bR,bS){return bo.Map(a.id,bl.foldBack(function(bT,bU){return k.op_GreaterGreaterEquals(bR(bT),function(bV){return k.op_GreaterGreaterEquals(bU,function(bW){return k.rtn(new bk.T({$:1,$0:bV,$1:bW}));});});},bl.ofSeq(bS),k.rtn(bk.T.Empty)));};k.op_GreaterGreaterEquals=function(bR,bS){return bo.Bind(bS,bR);};k.absorbO=function(bR,bS){return k.bindP(function(bT){return k.ofOption(bR,bT);},bS);};k.insertO=function(bR){var bS;bS=bR==null?null:{$:1,$0:bo.Map(function(bT){return{$:1,$0:bT};},bR.$0)};return bS==null?{$:0,$0:null}:bS.$0;};k.ofOption=function(bR,bS){var bT;bT=bS==null?null:{$:1,$0:{$:0,$0:bS.$0}};return bT==null?function(bU){return c.Error$1(bR(bU));}():bT.$0;};k.get=function(bR){return k.defaultWith(function(bS){return bp.FailWith(a.String(bS));},bR);};k.iter=function(bR,bS,bT){k.defaultWith(bR,k.mapP(bS,bT));};k.mapP=function(bR,bS){return k.bindP(function(bT){return k.rtn(bR(bT));},bS);};k.bindP=function(bR,bS){if(bS.$==1)return c.Error$1(bS.$0);else try{return bR(bS.$0);}catch(bT){return c.Error$1(new d({$:5,$0:bT.message,$1:bT.stack}));}};k.failIfFalse=function(bR,bS){return!bS?c.Error$1(bR):{$:0,$0:null};};k.failIfTrue=function(bR,bS){return bS?c.Error$1(bR):{$:0,$0:null};};k.defaultValue=function(bR,bS){return bS.$==1?bR:bS.$0;};k.defaultWith=function(bR,bS){return bS.$==1?bR(bS.$0):bS.$0;};k.toOption=function(bR){return bR.$==0?{$:1,$0:bR.$0}:null;};k.rtn=function(bR){return{$:0,$0:bR};};k.freeMessage=function(bR){return bR.$==1?c.Error$1(d.freeMessage(bR.$0)):{$:0,$0:bR.$0};};o=n.Eff=bg.Class({get_Cont:function(){return this.$0;}},null,o);p=n.Done=bg.Class({get_Value:function(){return this.v;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(bR){return this;}},j,p);p.New=bg.Ctor(function(bR){j.New.call(this);this.v=bR;},p);q=o.LambdaT=bg.Class({FsRoot_Library_Monads_Eff_Lambda$Invoke:function(bR){var bS;bS=this.loop;return function(bT){return bS(bR(bT));};}},j,q);q.New=bg.Ctor(function(bR){j.New.call(this);this.loop=bR;},q);o.runResult=function(bR){var bS;try{bS=(bR.get_Cont())(o["done'"]);return bS instanceof p?{$:0,$0:bS.get_Value()}:c.Error$1((e.errorMsgf(function(bT){return function(bU){return bT("Unhandled effect "+bh.prettyPrint(bU)+" expecting");};}))(bS));}catch(bT){return c.Error$1(new d({$:5,$0:bT.message,$1:bT.stack}));}};o.run=function(bR){var bS;bS=(bR.get_Cont())(o["done'"]);return bS instanceof p?bS.get_Value():(function(bT){return function(bU){return bT("Unhandled effect "+bh.prettyPrint(bU));};}(bp.FailWith))(bS);};o["return'"]=function(bR){return new o({$:0,$0:function(){return o["done'"](bR);}});};o["done'"]=function(bR){return new p.New(bR);};o.unpack=function(bR,bS){return bS.FsRoot_Library_Monads_Eff_Effect$UnPack(new q.New(bR));};r.rtn=function(bR){return n.rtn(bR);};r.op_GreaterEqualsGreater=function(bR,bS,bT){return r.op_GreaterGreaterEquals(bR(bT),bS);};r.op_RightShift=function(bR,bS,bT){return r.op_BarGreaterGreater(bR(bT),bS);};r.op_GreaterGreaterEquals=function(bR,bS){return n.bind(bS,bR);};r.op_BarGreaterGreater=function(bR,bS){return n.map(bS,bR);};r.op_LessMultiplyGreater=function(bR,bS){return n.apply(bR,bS);};s=n.EffBuilder=bg.Class({For:function(bR,bS){var bT;bT=this;return this.Using(bn.Get(bR),function(bU){return bT.While(function(){return bU.MoveNext();},function(){return bT.Delay(function(){return bS(bU.Current());});});});},Using:function(bR,bS){return this.TryFinally(function(){return bS(bR);},function(){if(!bq.Equals(bR,null))bR.Dispose();});},TryFinally:function(bR,bS){return new o({$:0,$0:function(bT){try{return bR().$0(bT);}finally{bS();}}});},TryWith:function(bR,bS){return new o({$:0,$0:function(bT){try{return bR().$0(bT);}catch(bU){return bS(bU).$0(bT);}}});},While:function(bR,bS){function bT(bU,bV){return bU()?n.bind(function(){return bT(bU,bV);},bV()):r.rtn();}return bT(bR,bS);},Delay:function(bR){return new o({$:0,$0:function(bS){return bR().$0(bS);}});},Combine:function(bR,bS){return this.Bind(bR,function(){return bS;});},Bind:function(bR,bS){return n.bind(bS,bR);},ReturnFrom:a.id,Return:function(bR){return r.rtn(bR);},Zero:function(){return r.rtn();}},j,s);s.New=bg.Ctor(function(){j.New.call(this);},s);u=t.Put=bg.Class({get_K:function(){return this.k;},get_Value:function(){return this.v;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(bR){return new u.New(this.v,bR.FsRoot_Library_Monads_Eff_Lambda$Invoke(this.k));}},j,u);u.New=bg.Ctor(function(bR,bS){j.New.call(this);this.v=bR;this.k=bS;},u);v=t.Get=bg.Class({get_K:function(){return this.k;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(bR){return new v.New(bR.FsRoot_Library_Monads_Eff_Lambda$Invoke(this.k));}},j,v);v.New=bg.Ctor(function(bR){j.New.call(this);this.k=bR;},v);t.refHandler=function(bR,bS){var bT;function bU(bV){return bV instanceof u?(bT[0]=bV.get_Value(),bU((bV.get_K())())):bV instanceof v?bU((bV.get_K())(bT[0])):o.unpack(bU,bV);}bT=[bR];return new o({$:0,$0:function(){return bU((bS.get_Cont())(o["done'"]));}});};t.stateHandler=function(bR,bS){function bT(bU,bV,bW){var bX;return bW instanceof p?bU([bV,bW.get_Value()]):bW instanceof u?(bX=(bW.get_K())(),bT(bU,bW.get_Value(),bX)):bW instanceof v?bT(bU,bV,(bW.get_K())(bV)):o.unpack(function(bY){return bT(bU,bV,bY);},bW);}return new o({$:0,$0:function(bU){return bT(bU,bR,(bS.get_Cont())(o["done'"]));}});};t.put=function(bR){return new o({$:0,$0:function(bS){return new u.New(bR,bS);}});};t.get=function(){return new o({$:0,$0:function(bR){return new v.New(bR);}});};x=w.LogEntry=bg.Class({get_K:function(){return this.k;},get_Value:function(){return this.v;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(bR){return new x.New(this.v,bR.FsRoot_Library_Monads_Eff_Lambda$Invoke(this.k));}},j,x);x.New=bg.Ctor(function(bR,bS){j.New.call(this);this.v=bR;this.k=bS;},x);w.ignoreLogHandler=function(bR){function bS(bT){return bT instanceof x?bS((bT.get_K())()):o.unpack(bS,bT);}return new o({$:0,$0:function(){return bS((bR.get_Cont())(o["done'"]));}});};w.consoleLogHandler=function(bR){function bS(bT){return bT instanceof x?((function(bU){return function(bV){return bU("Log: "+bh.prettyPrint(bV));};}(function(bU){br.log(bU);}))(bT.get_Value()),bS((bT.get_K())())):o.unpack(bS,bT);}return new o({$:0,$0:function(){return bS((bR.get_Cont())(o["done'"]));}});};w.pureLogHandler=function(bR){function bS(bT,bU,bV){var bW;return bV instanceof p?bU([bV.get_Value(),bT]):bV instanceof x?(bW=(bV.get_K())(),bS(new bk.T({$:1,$0:bV.get_Value(),$1:bT}),bU,bW)):o.unpack(function(bX){return bS(bT,bU,bX);},bV);}return new o({$:0,$0:function(bT){return bS(bk.T.Empty,bT,(bR.get_Cont())(o["done'"]));}});};w.logf=function(bR){return bR(w.log);};w.log=function(bR){return new o({$:0,$0:function(bS){return new x.New(bR,bS);}});};z=y.Fail=bg.Class({get_K:function(){return this.k;},get_Value:function(){return this.v;},FsRoot_Library_Monads_Eff_Effect$UnPack:function(bR){return new z.New(this.v,bR.FsRoot_Library_Monads_Eff_Lambda$Invoke(this.k));}},j,z);z.New=bg.Ctor(function(bR,bS){j.New.call(this);this.v=bR;this.k=bS;},z);y.absorbO=function(bR,bS){return y.absorbR(n.map(function(bT){return k.ofOption(bR,bT);},bS));};y.absorbR=function(bR){return n.bind(y.ofResult,bR);};y.RslHandler=function(bR){function bS(bT,bU){return bU instanceof p?bT({$:0,$0:bU.get_Value()}):bU instanceof z?bT(c.Error$1(bU.get_Value())):o.unpack(function(bV){return bS(bT,bV);},bU);}return new o({$:0,$0:function(bT){return bS(bT,(bR.get_Cont())(o["done'"]));}});};y.ofResult=function(bR){var bS;bS=n.eff();return bS.Delay(function(){return bR.$==1?bS.Bind(y.fail(bR.$0),function(){return bS.Return(null);}):bS.Return(bR.$0);});};y.fail=function(bR){return new o({$:0,$0:function(bS){return new z.New(bR,bS);}});};n.eff=function(){bc.$cctor();return bc.eff;};n.insertSnd=function(bR,bS){return n.map(function(bT){return[bT,bS];},bR);};n.insertFst=function(bR,bS){return n.map(function(bT){return[bR,bT];},bS);};n.insertR=function(bR){return bR.$==0?n.map(function(bS){return{$:0,$0:bS};},bR.$0):r.rtn(c.Error$1(bR.$0));};n.insertO=function(bR){var bS;bS=bR==null?null:{$:1,$0:n.map(function(bT){return{$:1,$0:bT};},bR.$0)};return bS==null?r.rtn(null):bS.$0;};n.sequenceSeq=function(bR){return n.traverseSeq(a.id,bR);};n.traverseSeq=function(bR,bS){return n.map(a.id,bl.foldBack(function(bT,bU){return r.op_GreaterGreaterEquals(bR(bT),function(bV){return r.op_GreaterGreaterEquals(bU,function(bW){return r.rtn(new bk.T({$:1,$0:bV,$1:bW}));});});},bl.ofSeq(bS),r.rtn(bk.T.Empty)));};n.apply=function(bR,bS){return n.bind(function(bT){return n.map(bT,bS);},bR);};n.map=function(bR,bS){return n.bind(function(bT){return n.rtn(bR(bT));},bS);};n.bind=function(bR,bS){return new o({$:0,$0:function(bT){return bS.$0(function(bU){return bR(bU).$0(bT);});}});};n.rtn=function(bR){return new o({$:0,$0:function(bS){return bS(bR);}});};B=A.Builder=bg.Class({For:function(bR,bS){var bT;bT=this;return this.Using(bn.Get(bR),function(bU){return bT.While(function(){return bU.MoveNext();},bT.Delay(function(){return bS(bU.Current());}));});},While:function(bR,bS){function bT(bU,bV){return bU()?A.bind(function(){return bT(bU,bV);},bV()):A.rtn();}return bT(bR,bS);},Using:function(bR,bS){try{return bS(bR);}finally{bR.Dispose();}},TryFinally:function(bR,bS){try{return bR();}finally{bS();}},TryWith:function(bR,bS){try{return bR();}catch(bT){return bS(bT);}},Run:function(bR){return A.bindP(bR,f.OkM$1());},Combine:function(bR,bS){return A.bind(bS,bR);},Delay:a.id,Zero:function(){return A.rtn();},Bind:function(bR,bS){return A.bindM(bS,bR);},Bind$1:function(bR,bS){return A.bindP(bS,bR);},ReturnFrom:function(bR){return A.rtnM(bR);},ReturnFrom$1:a.id,Return:function(bR){return A.rtn(bR);}},j,B);B.New=bg.Ctor(function(){j.New.call(this);},B);C.rtn=function(bR){return A.rtn(bR);};C.op_GreaterEqualsGreater=function(bR,bS,bT){return C.op_GreaterGreaterEquals(bR(bT),bS);};C.op_RightShift=function(bR,bS,bT){return C.op_BarGreaterGreater(bR(bT),bS);};C.op_GreaterGreaterEquals=function(bR,bS){return A.bindP(bS,bR);};C.op_BarGreaterGreater=function(bR,bS){return A.mapP(bS,bR);};A.sequenceSeq=function(bR){return A.traverseSeq(a.id,bR);};A.traverseSeq=function(bR,bS){return A.map(a.id,bl.foldBack(function(bT,bU){return A.op_GreaterGreaterEquals(bR(bT),function(bV){return A.op_GreaterGreaterEquals(bU,function(bW){return A.rtn(new bk.T({$:1,$0:bV,$1:bW}));});});},bl.ofSeq(bS),A.rtn(bk.T.Empty)));};A.op_GreaterGreaterEquals=function(bR,bS){return A.bind(bS,bR);};A.failIfFatalMsgW=function(bR){var bS;bS=f.OkM(bR);return bS.$==0?d.isFatalW(bS.$0[1])?f.ErrorM(bS.$0[1]):bR:bR;};A.failIfFatalMsg=function(bR){var bS;bS=f.OkM(bR);return bS.$==0?d.isFatal(bS.$0[1])?f.ErrorM(bS.$0[1]):bR:bR;};A.failIfFatalMsgF=function(bR,bS){var bT;bT=f.OkM(bS);return bT.$==0?d.isFatalF(bR,bT.$0[1])?f.ErrorM(bT.$0[1]):bS:bS;};A.addMsg=function(bR,bS){return A.mapMessage(function(bT){return d.addMsg(bR,bT);},bS);};A.absorbO=function(bR,bS){return A.bindP(function(bT){return A.ofOption(bR,bT);},bS);};A.insertO=function(bR){var bS;bS=bR==null?null:{$:1,$0:A.map(function(bT){return{$:1,$0:bT};},bR.$0)};return bS==null?f.OkM$1(null):bS.$0;};A.ofResult=function(bR){return A.rtnr(bR);};A.ofOption=function(bR,bS){var bT;bT=bS==null?null:{$:1,$0:f.OkM$1(bS.$0)};return bT==null?function(bU){return f.ErrorM(bR(bU));}():bT.$0;};A.get=function(bR){return A.defaultWith(function(bS){return bp.FailWith(a.String(bS));},bR);};A.iter=function(bR,bS,bT){var bU;bU=A.mapP(bS,bT);bU.$0==null?bR(bU.$1):void 0;};A.mapP=function(bR,bS){return A.bindP(function(bT){return A.rtn(bR(bT));},bS);};A.check=function(bR,bS){var bT;return(bT=bS.$0,bT!=null&&bT.$==1)?d.isFatalF(bR.$0,bS.$1)?f.ErrorM(bS.$1):bS:bS;};A.bindM=function(bR,bS){return A.bindP(bR,A.rtnM(bS));};A.bindP=function(bR,bS){var bT;if(bS.$0==null)return{$:0,$0:null,$1:bS.$1};else{bT=bS.$1;try{return A.mapMessage(function(bU){return d.addMsg(bT,bU);},bR(bS.$0.$0));}catch(bU){return f.ErrorM(new d({$:5,$0:bU.message,$1:bU.stack}));}}};A.bind=function(bR,bS){var bT;return bS.$0==null?{$:0,$0:null,$1:bS.$1}:(bT=bS.$1,A.mapMessage(function(bU){return d.addMsg(bT,bU);},bR(bS.$0.$0)));};A.mapMessage=function(bR,bS){return{$:0,$0:bS.$0,$1:bR(bS.$1)};};A.map=function(bR,bS){var bT;return{$:0,$0:(bT=bS.$0,bT==null?null:{$:1,$0:bR(bT.$0)}),$1:bS.$1};};A.defaultValue=function(bR,bS){return k.defaultValue(bR,A.toResult(bS));};A.defaultWith=function(bR,bS){return k.defaultWith(bR,A.toResult(bS));};A.toOption=function(bR){return bR.$0;};A.toResultD=function(bR){return bR.$0==null?c.Error$1(bR.$1):{$:0,$0:[bR.$0.$0,bR.$1]};};A.toResult=function(bR){return bR.$0==null?c.Error$1(bR.$1):{$:0,$0:bR.$0.$0};};A.freeMessage=function(bR){return bR.$==1?c.Error$1(d.freeMessage(bR.$0)):{$:0,$0:bR.$0};};A.rtnr=function(bR){return k.defaultWith(f.ErrorM,bo.Map(f.OkM$1,bR));};A.rtnM=function(bR){return f.OkMWithMsg(null,bR);};A.rtn=function(bR){return f.OkM$1(bR);};A.checkErrorW=function(){return{$:0,$0:function(){return false;}};};A.checkError=function(){return{$:0,$0:function(){return true;}};};D.resultM=function(){bc.$cctor();return bc.resultM;};F=E.AsyncResultMBuilder=bg.Class({For:function(bR,bS){var bT;bT=this;return this.Using(bn.Get(bR),function(bU){return bT.While(function(){return bU.MoveNext();},bT.Delay(function(){return bS(bU.Current());}));});},While:function(bR,bS){return E.whileLoop(bR,bS);},Using:function(bR,bS){return bm.Using(bR,bS);},TryFinally:function(bR,bS){var bT;bT=null;return bm.Delay(function(){return bm.TryFinally(bm.Delay(function(){return bR();}),function(){bS();});});},TryWith:function(bR,bS){var bT;bT=null;return bm.Delay(function(){return bm.TryWith(bm.Delay(function(){return bR();}),function(bU){return bS(bU);});});},Run:function(bR){return E.bind(bR,E.rtn());},Delay:a.id,Combine:function(bR,bS){return E.bind(bS,E.rtnR(bR));},Combine$1:function(bR,bS){return E.bind(bS,bR);},Bind:function(bR,bS){return E.bindrA(bS,bR);},Bind$1:function(bR,bS){return E.bindR(bS,bR);},Bind$2:function(bR,bS){return E.bindM(bS,bR);},Bind$3:function(bR,bS){return E.bindr(bS,bR);},Bind$4:function(bR,bS){return E.bind(bS,bR);},Zero:function(){return E.rtn();},Return:function(bR){return E.rtn(bR);},ReturnFrom:function(bR){return E.rtnrA(bR);},ReturnFrom$1:function(bR){return E.rtnR(bR);},ReturnFrom$2:function(bR){return E.rtnM(bR);},ReturnFrom$3:function(bR){return E.rtnr(bR);},ReturnFrom$4:a.id},j,F);F.New=bg.Ctor(function(){j.New.call(this);},F);E.absorbO=function(bR,bS){function bT(bV){return k.absorbO(bR,bV);}function bU(bV){return bm.Return(bV);}return bm.Bind(bS,function(bV){return bU(bT(bV));});};E.absorbR=function(bR){var bS;function bT(bU){return bm.Return(bU);}return bm.Bind(bR,(bS=function(bU){return k.bindP(a.id,bU);},function(bU){return bT(bS(bU));}));};E.insertR=function(bR){return bR.$==0?E.map(function(bS){return{$:0,$0:bS};},bR.$0):E.rtn(c.Error$1(bR.$0));};E.insertO=function(bR){var bS;bS=bR==null?null:{$:1,$0:E.map(function(bT){return{$:1,$0:bT};},bR.$0)};return bS==null?E.rtn(null):bS.$0;};E.sequenceSeq=function(bR){return E.traverseSeq(a.id,bR);};E.traverseSeq=function(bR,bS){return E.map(a.id,bl.foldBack(function(bT,bU){return E.op_GreaterGreaterEquals(bR(bT),function(bV){return E.op_GreaterGreaterEquals(bU,function(bW){return E.rtn(new bk.T({$:1,$0:bV,$1:bW}));});});},bl.ofSeq(bS),E.rtn(bk.T.Empty)));};E.op_GreaterGreaterEquals=function(bR,bS){return E.bind(bS,bR);};E.whileLoop=function(bR,bS){return bR()?E.bind(function(){return E.whileLoop(bR,bS);},bS()):E.rtn();};E.map=function(bR,bS){return E.bind(function(bT){return E.rtn(bR(bT));},bS);};E.bindR=function(bR,bS){return E.bind(bR,E.rtnR(bS));};E.bindrA=function(bR,bS){return E.bind(bR,E.rtnrA(bS));};E.bindM=function(bR,bS){return E.bind(bR,E.rtnM(bS));};E.bindr=function(bR,bS){return E.bind(bR,E.rtnr(bS));};E.bind=function(bR,bS){var bT;bT=null;return bm.Delay(function(){return bm.TryWith(bm.Delay(function(){return bm.Bind(bS,function(bU){var bV,bW;function bX(bZ){return A.addMsg(bW,bZ);}function bY(bZ){return bm.Return(bZ);}bV=f.OkM(bU);return bV.$==1?bm.Return(f.ErrorM(bV.$0)):(bW=bV.$0[1],bm.Bind(bR(bV.$0[0]),function(bZ){return bY(bX(bZ));}));});}),function(bU){return bm.Return(f.ErrorM(new d({$:5,$0:bU.message,$1:bU.stack})));});});};E.iterpA=function(bR,bS){function bT(bU){c.print$1(bU);}E.iterA(function(bU){return bT(d.summarized(bU));},bR,bS);};E.iterpS=function(bR,bS){function bT(bU){c.print$1(bU);}E.iterS(function(bU){return bT(d.summarized(bU));},bR,bS);};E.iterA=function(bR,bS,bT){function bU(bW){A.iter(bR,bS,bW);}function bV(bW){return bm.Return(bW);}bm.Start(bm.Bind(bT,function(bW){return bV(bU(bW));}),null);};E.iterS=function(bR,bS,bT){throw"iterS cannot be used in JavaScript!";};E.rtnrA=function(bR){function bS(bT){return bm.Return(bT);}return bm.Bind(bR,function(bT){return bS(A.ofResult(bT));});};E.rtnM=function(bR){return bm.Return(A.rtnM(bR));};E.rtnR=function(bR){return bm.Return(bR);};E.rtnr=function(bR){return bm.Return(A.rtnr(bR));};E.rtn=function(bR){return bm.Return(f.OkM$1(bR));};E.freeMessage=function(bR){function bS(bT){return bm.Return(bT);}return bm.Bind(bR,function(bT){return bS(A.freeMessage(bT));});};E.mapError=function(bR,bS){function bT(bV){return A.mapMessage(bR,bV);}function bU(bV){return bm.Return(bV);}return bm.Bind(bS,function(bV){return bU(bT(bV));});};G["AsyncResultMBuilder.Combine"]=function(bR,bS,bT){function bU(bV){return bm.Return(bV);}return E.bind(bT,bm.Bind(bS,function(bV){return bU(f.OkM$1(bV));}));};G["AsyncResultMBuilder.Bind"]=function(bR,bS,bT){function bU(bV){return bm.Return(bV);}return E.bind(bT,bm.Bind(bS,function(bV){return bU(f.OkM$1(bV));}));};G["AsyncResultMBuilder.ReturnFrom"]=function(bR,bS){function bT(bU){return bm.Return(bU);}return bm.Bind(bS,function(bU){return bT(f.OkM$1(bU));});};G.asyncResultM=function(){bc.$cctor();return bc.asyncResultM;};f.OkM=function(bR){return bR.$0==null?{$:1,$0:bR.$1}:{$:0,$0:[bR.$0.$0,bR.$1]};};f.ErrorM=function(bR){return{$:0,$0:null,$1:bR};};f.OkMWithMsg=function(bR,bS){return{$:0,$0:{$:1,$0:bR},$1:bS};};f.OkM$1=function(bR){return{$:0,$0:{$:1,$0:bR},$1:d.NoMsg};};H.EndsWith$1=function(bR,bS){return bi.EndsWith(bS,bR)?{$:1,$0:bs.string(bS,{$:1,$0:0},{$:1,$0:bS.length-bR.length-1})}:null;};H.StartsWith$1=function(bR,bS){return bi.StartsWith(bS,bR)?{$:1,$0:bs.string(bS,{$:1,$0:bR.length},null)}:null;};H.skipLastLine$1=function(){bc.$cctor();return bc.skipLastLine;};H.indentStr$1=function(bR){function bS(bU){return H.indent$1(bR,bU);}function bT(bU){return bi.concat("\n",bU);}return function(bU){return bT(bS(bU));};};H.unindentStr$1=function(){bc.$cctor();return bc.unindentStr;};H.indent$1=function(bR,bS){var bT,bU;bT=bi.SplitChars(bS,["\n"],0);return bj.map((bU=bi.replicate(bR," "),function(bV){return bU+bV;}),bT);};H.unindent$1=function(bR){var bS,bT,bU,bV;bS=bi.SplitChars(bR,["\n"],0);bT=(bU=bj.tryFindIndex(function(bW){return" "!==bW;},(bV=bj.tryFind(function(bW){return bi.Trim(bW)!=="";},bS),bV==null?"":bV.$0)),bU==null?0:bU.$0);return bj.filter(function(bW){return!bi.StartsWith(bW,"# 1 ");},bj.map(function(bW){return bW.length<=bT?"":bW.substring(bT);},bS));};H.skipFirstLine$1=function(bR){var bS;bS=bR.indexOf("\n");return bS<0?"":bs.string(bR,{$:1,$0:bS+1},null);};H.append$1=function(bR,bS){return bR+bS;};H.trim$1=function(bR){return bi.Trim(bR);};H.contains$1=function(bR,bS){return bS.indexOf(bR)!=-1;};H.delimitedO$1=function(bR,bS,bT){var bU,bV,bW,bX,bY;bU=H.splitInTwoO$1(bR,bT);return bU==null?null:(bV=bU.$0,(bW=bV[0],(bX=H.splitInTwoO$1(bS,bV[1]),bX==null?null:{$:1,$0:(bY=bX.$0,[bW,bY[0],bY[1]])})));};H.splitInTwoO$1=function(bR,bS){var bT;bT=bS.indexOf(bR);return bT===-1?null:{$:1,$0:[c["String.Left$1"](bS,bT),bS.substring(bT+bR.length)]};};H.splitByChar$1=function(bR,bS){return bi.SplitChars(bS,[bR],0);};I.op_AmpGreater=function(bR,bS,bT,bU){var bV;bV=bR(bT,bU);return bV===0?bS(bT,bU):bV;};I.desc=function(bR,bS,bT){return bq.Compare(bR(bT),bR(bS));};I.asc=function(bR,bS,bT){return bq.Compare(bR(bS),bR(bT));};c["String.Right$1"]=function(bR,bS){var bT,bU;return c["String.Substring2$1"](bR,(bT=0,(bU=bR.length-bS,bq.Compare(bT,bU)===1?bT:bU)),bR.length);};c["String.Left$1"]=function(bR,bS){return bS<0?c["String.Substring2$1"](bR,0,bR.length+bS):c["String.Substring2$1"](bR,0,bS);};c["String.Substring2$1"]=function(bR,bS,bT){var bU,bV;while(true){if(bT<=0)return"";else if(bS<0){bU=bS;bS=0;bT=bT+bU;}else return bS>=bR.length?"":bi.Substring(bR,bS,(bV=bR.length-bS,bq.Compare(bT,bV)===-1?bT:bV));}};c.print$1=function(bR){if(typeof bR=="string")((function(bS){return function(bT){return bS(bh.toSafe(bT));};}(function(bS){br.log(bS);}))(bR));else((function(bS){return function(bT){return bS(bh.prettyPrint(bT));};}(function(bS){br.log(bS);}))(bR));};c.Error$1=function(bR){return{$:1,$0:bR};};K.LoginFileName=function(){bc.$cctor();return bc.LoginFileName;};K.TemplatesFileName=function(){bc.$cctor();return bc.TemplatesFileName;};K.rootdir=function(){bc.$cctor();return bc.rootdir;};L.Regular={$:1};L.Master={$:0};M.Argentina={$:2};M.Venezuela={$:1};M.USA={$:0};N.Florida={$:1};N.Texas={$:0};O.New=function(bR,bS,bT,bU){return{emisor:bR,documento:bS,emision:bT,vence:bU};};P.Corriente={$:1};P.Ahorro={$:0};Q.New=function(bR,bS,bT,bU){return{banco:bR,tipo:bS,numero:bT,routing:bU};};R.Inactivo={$:1};R.Activo={$:0};S.PagoComision={$:1};S.PagoAfiliacion={$:0};T.New=function(bR,bS,bT,bU,bV,bW,bX){return{fechaPago:bR,ano:bS,periodo:bT,monto:bU,idAliado:bV,concepto:bW,transaccion:bX};};U.ServicioPostal={$:2};U.Oficina={$:1};U.Habitacion={$:0};V.New=function(bR,bS,bT,bU,bV,bW){return{tipoDireccion:bR,linea1:bS,linea2:bT,ciudad:bU,pais:bV,zonaPostal:bW};};W.Voip={$:3};W.Habitacion={$:2};W.Oficina={$:1};W.Movil={$:0};X.New=function(bR,bS,bT,bU,bV){return{tipoTelefono:bR,codigoPais:bS,codigoArea:bT,numero:bU,mensajes:bV};};Y.Empresa={$:2};Y.Femenino={$:1};Y.Masculino={$:0};Z.New=function(bR,bS,bT,bU,bV,bW,bX,bY,bZ){return{titulo:bR,nombre1:bS,nombre2:bT,apellido1:bU,apellido2:bV,nacionalidad:bW,genero:bX,fechaNacimiento:bY,contactos:bZ};};_0.Saludo={$:2};_0.Informacion={$:1};_0.Alerta={$:0};_1.Prozper={$:0};_2.New=function(bR,bS,bT,bU,bV){return{tipo:bR,leido:bS,fecha:bT,texto:bU,remitente:bV};};_3.New=function(bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8){return{id:bR,idPadreO:bS,identificacion:bT,datosPersonales:bU,formasPago:bV,transacciones:bW,mensajes:bX,isInternal:bY,status:bZ,tipo:b0,fechaRegistro:b1,fechaStatus:b2,nReferidos:b3,nRefActivos:b4,nDescendientes:b5,nDescActivos:b6,comision:b7,nivel:b8};};_4.New=function(bR,bS,bT,bU,bV,bW,bX,bY){return{comisionReferidosRegular:bR,comisionReferidosMaster:bS,comisionDescendientesMaster:bT,comisionDescendientesRegular:bU,montoAliliacion:bV,numeroReferidosMaster:bW,diaCorte1:bX,diaCorte2:bY};};_5.New=function(bR,bS,bT,bU,bV){return{idAliado:bR,aliados:bS,anoActual:bT,periodoActual:bU,premisas:bV};};_7.New=function(bR,bS,bT,bU,bV,bW){return{hijosDe:bR,nivelDe:bS,aliado:bT,aliadoO:bU,hijos:bV,descendientes:bW};};_6.actualizarAliados=function(bR){var bS,bT,bU,bV,b0,b1;function bW(b2){var b3,b4,b5,b6,b7,b8,b9,b_,b$;b3=b0.aliado(b2);b4=bj.cache(bj.map(bS,b0.hijosDe(b3.id)));b5=bj.length(b4);b6=bj.length(bj.filter(function(ca){return ca.status.$===0&&ca.tipo.$===1;},b4));b7=bj.sumBy(function(ca){return ca.nDescendientes+ca.nReferidos;},b4);b8=bj.sumBy(function(ca){return ca.nDescActivos+ca.nRefActivos;},b4);b9=1+b0.nivelDe(b3.idPadreO);b_=_3.New(b3.id,b3.idPadreO,b3.identificacion,b3.datosPersonales,b3.formasPago,b3.transacciones,b3.mensajes,b3.isInternal,b3.status,b6>=b1.numeroReferidosMaster?L.Master:L.Regular,b3.fechaRegistro,bt.now(),b5,b6,b7,b8,b3.comision,b9);b$=_6.comision(b1,b_);return _3.New(b_.id,b_.idPadreO,b_.identificacion,b_.datosPersonales,b_.formasPago,b_.transacciones,b_.mensajes,b_.isInternal,b_.status,b_.tipo,b_.fechaRegistro,b_.fechaStatus,b_.nReferidos,b_.nRefActivos,b_.nDescendientes,b_.nDescActivos,b$[0]+b$[1],b_.nivel);}function bX(b2){var b3;b3=null;return bU.TryGetValue(b2,{get:function(){return b3;},set:function(b4){b3=b4;}})?{$:1,$0:b3}:null;}function bY(b2,b3){bU.set_Item(b2,b3);return b3;}function bZ(b2,b3){var b4;b4=bX(b2);return b4==null?bY(b2,b3(b2)):b4.$0;}b0=_6.busqueda(bR.aliados);b1=bR.premisas;bS=(bT=(bU=new bv.New$5(),[[bX,function(b2){return function(b3){return bZ(b2,b3);};}],function(){bU.Clear();}]),(bV=bT[0][1],[function(b2){return(bV(b2))(bW);},bT[1]]))[0];return bl.ofSeq(bj.map(bS,bj.map(function(b2){return b2.id;},bR.aliados)));};_6.busqueda=function(bR){var bS,bT;function bU(b0,b1){return[b0,bl.ofSeq(bj.map(function(b2){return b2[1];},b1))];}function bV(b0){var b1,b2;b1=(b2=null,[bT.TryGetValue(b0,{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);return b1[0]?{$:1,$0:b1[1]}:null;}function bW(b0){var b1,b2;b1=(b2=null,[bS.TryGetValue({$:1,$0:b0},{get:function(){return b2;},set:function(b3){b2=b3;}}),b2]);return b1[0]?b1[1]:[];}function bX(b0){var b1,b2;b1=(b2=b0==null?null:bV(b0.$0),b2==null?null:{$:1,$0:1+bX(b2.$0.idPadreO)});return b1==null?0:b1.$0;}function bY(b0){return bl.choose(bV,bW(b0.id));}function bZ(b0){return bl.ofSeq(bj.delay(function(){return bj.collect(function(b1){return bj.append([b1],bj.delay(function(){return bZ(b1);}));},bY(b0));}));}bS=new bw.New(bj.map(function(b0){return bU(b0[0],b0[1]);},bj.groupBy(function(b0){return b0[0];},bj.map(function(b0){return[b0.idPadreO,b0.id];},bR))));bT=new bw.New(bj.map(function(b0){return[b0.id,b0];},bR));return _7.New(bW,bX,function(b0){try{return bT.get_Item(b0);}catch(b1){return(function(b2){return function(b3){return b2("buscarAliado failed: "+bd.p(b3));};}(bp.FailWith))(b0);}},bV,bY,bZ);};_6.comision=function(bR,bS){var bT;bT=_6.premisas(bR,bS);return[bS.nRefActivos*bT[0],bS.nDescActivos*bT[1]];};_6.premisas=function(bR,bS){var bT;bT=bS.tipo.$==0?[bR.comisionReferidosMaster,bR.comisionDescendientesMaster]:[bR.comisionReferidosRegular,bR.comisionDescendientesRegular];return bS.status.$==0?[bT[0],bT[1]]:[0,0];};_6.statusActual=function(bR,bS,bT){var bU;bU=bl.tryFind(function(bV){return bq.Equals(bV.idAliado,bT.id)&&bV.ano===bR&&bV.periodo===bS&&bV.concepto.$===0;},bT.transacciones)==null?null:{$:1,$0:R.Activo};return bU==null?R.Inactivo:bU.$0;};_6.aliadoEf=function(){return r.op_GreaterGreaterEquals(t.get(),function(bR){return y.ofResult(k.ofOption(function(){return(function(bS){return function(bT){return bS("Cannot find aliado "+bd.p(bT));};}(a.id))(bR.idAliado);},bl.tryFind(function(bS){return bq.Equals(bS.id,bR.idAliado);},bR.aliados)));});};_6.periodoActualEf=function(){return r.op_BarGreaterGreater(t.get(),function(bR){return[bR.anoActual,bR.periodoActual];});};_8.iterA=function(bR){function bS(bT){a.alert(bT);}E.iterA(function(bT){return bS(d.summarized(bT));},a.ignore,bR);};_9.money=function(bR){return"$"+_9.separate(a.String(bR),bk.T.Empty);};_9.separate=function(bR,bS){var bT;while(true)if(bR==="")return(function(bU){return function(bV){return bi.concat(bU,bV);};}(","))(bS);else{bT=bR;bR=c["String.Left$1"](bT,-3);bS=new bk.T({$:1,$0:c["String.Right$1"](bT,3),$1:bS});}};_9.modeloV=function(){bc.$cctor();return bc.modeloV;};_.aliados$4076$45=function(bR,bS){return function(){bR(bS);};};_.aliados$4074$45=function(bR,bS){return function(){bR(bS);};};_.aliados=function(){var bR,bS,bT,bU,bV,bW,bX;function bY(b8){var b9,b_;b9=(b_=bS.Get(),b_==null?null:{$:1,$0:b_.$0(b8)});return b9==null?[]:b9.$0;}function bZ(b8){var b9,b_;return(b9=(b_=b8.titulo,b_==null?null:{$:1,$0:" "+b_.$0}),b9==null?"":b9.$0)+(b8.apellido1===""?"":b8.apellido1+", ")+b8.nombre1;}function b0(b8){return b8.nReferidos===0?"-":(((bg.Curried3(function(b9,b_,b$){return b9(a.String(b_)+"/"+a.String(b$));}))(a.id))(b8.nRefActivos))(b8.nReferidos);}function b1(b8){return b8.nDescendientes===0?"-":(((bg.Curried3(function(b9,b_,b$){return b9(a.String(b_)+"/"+a.String(b$));}))(a.id))(b8.nDescActivos))(b8.nDescendientes);}function b2(b8){return b8===0?"-":_9.money(b8);}function b3(b8){return by.Map(function(b9){return bj.isEmpty(bY(b8))?"":bq.Equals(b9==null?null:{$:1,$0:b9.$0.Contains(b8)},{$:1,$0:true})?"Expandido":"Colapsado";},bR.get_View());}function b4(b8){var b9,b_,b$;bR.Set({$:1,$0:((bq.Equals((b9=bR.Get(),b9==null?null:{$:1,$0:b9.$0.Contains(b8)}),{$:1,$0:true})?function(ca){return function(cb){return cb.Remove(ca);};}:function(ca){return function(cb){return cb.Add(ca);};})(b8))((b_=bR.Get(),(b$=new bz.New$1(null),b_==null?b$:b_.$0)))});}function b5(b8){var b9,b_;b9=(b_=_9.modeloV().Get(),_5.New(b8,b_.aliados,b_.anoActual,b_.periodoActual,b_.premisas));_9.modeloV().Set(b9);}function b6(b8){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,cq,cr;function ck(cs){return cs.comision;}function cl(cs){return cs.status;}function cm(cs){return[cs.nRefActivos,cs.nReferidos];}function cn(cs){return[cs.nDescActivos,cs.nDescendientes];}function co(cs){return bZ(cs.datosPersonales);}function cp(cs){return bj.delay(function(){return bj.append([cs],bj.delay(function(){var ct,cu;return(ct=(cu=bR.Get(),cu==null?null:{$:1,$0:cu.$0.Contains(cs.id)}),ct==null?false:ct.$0)?bj.collect(cp,cr.hijos(cs)):[];}));});}cq=(b9=(b_=(b$=(ca=(cb=(bg.Curried3(I.desc))(ck),cc=(bg.Curried3(I.asc))(cl),bg.Curried(I.op_AmpGreater,2,[function(cs,ct){return(cb(cs))(ct);},function(cs,ct){return(cc(cs))(ct);}])),cd=(bg.Curried3(I.desc))(cm),bg.Curried(I.op_AmpGreater,2,[function(cs,ct){return(ca(cs))(ct);},function(cs,ct){return(cd(cs))(ct);}])),ce=(bg.Curried3(I.desc))(cn),bg.Curried(I.op_AmpGreater,2,[function(cs,ct){return(b$(cs))(ct);},function(cs,ct){return(ce(cs))(ct);}])),cf=(bg.Curried3(I.asc))(co),bg.Curried(I.op_AmpGreater,2,[function(cs,ct){return(b_(cs))(ct);},function(cs,ct){return(cf(cs))(ct);}])),bj.sortWith(function(cs,ct){return(b9(cs))(ct);},b8));cr=_6.busqueda(cq);bS.Set({$:1,$0:cr.hijosDe});try{ch=bj.min(bj.map(function(cs){return cs.nivel;},cq));}catch(cs){ch=1;}ci=bj.filter(function(ct){return ct.nivel===ch;},cq);bj.isEmpty(ci)?bR.Set(null):bR.Get()==null?(bR.Set({$:1,$0:new bz.New(bj.map(function(ct){return ct.id;},ci))}),cj=bj.tryHead(bj.map(function(ct){return ct.id;},ci)),cj==null?void 0:b5(cj.$0)):void 0;return bj.delay(function(){return bj.collect(cp,ci);});}function b7(b8,b9){var b_,b$,ca,cb,cc,cd;return(b_=(b$=(ca=(cb=b3(b8),bD.Make().WithHole({$:2,$0:"nombre",$1:by.Map(function(ce){return bZ(ce.datosPersonales);},b9)}).WithHole({$:2,$0:"status",$1:by.Map(function(ce){return(function(cf){return function(cg){return cf(bd.p$2(cg));};}(a.id))(ce.status);},b9)}).WithHole({$:2,$0:"tipo",$1:by.Map(function(ce){return(function(cf){return function(cg){return cf(bd.p$1(cg));};}(a.id))(ce.tipo);},b9)}).WithHole({$:2,$0:"nivel",$1:by.Map(function(ce){return a.String(ce.nivel);},b9)}).WithHole({$:2,$0:"referidos",$1:by.Map(b0,b9)}).WithHole({$:2,$0:"descendientes",$1:by.Map(b1,b9)}).WithHole({$:2,$0:"comision",$1:by.Map(function(ce){return b2(ce.comision);},b9)}).WithHole({$:2,$0:"expandido",$1:cb})),ca.WithHole(bE.EventQ2(ca.k,"expandir",function(){return ca.i;},function(){b4(b8);}))).WithHole({$:2,$0:"seleccionado",$1:by.Map(function(ce){return bq.Equals(b8,ce.idAliado)?"seleccionado":"";},_9.modeloV().get_View())}),b$.WithHole(bE.EventQ2(b$.k,"seleccionar",function(){return b$.i;},function(){b5(b8);}))),(cc=bE.CompleteHoles(b_.k,b_.h,[]),(cd=new bF.New(cc[1],be.filaaliado(cc[0])),(b_.i=cd,cd)))).get_Doc();}bR=bG.Create$1(null);bS=bG.Create$1(null);return(bT=(bU=bH.ConvertSeqBy(function(b8){return b8.id;},function(b8){return function(b9){return b7(b8,b9);};},(bV=by.Map(function(b8){return b8.aliados;},_9.modeloV().get_View()),by.Map2(function(b8,b9){return b6(b9);},bR.get_View(),bV))),bD.Make().WithHole({$:0,$0:"tbody",$1:bU})),(bW=bE.CompleteHoles(bT.k,bT.h,[]),(bX=new bF.New(bW[1],be.tablaaliados(bW[0])),(bT.i=bX,bX)))).get_Doc();};$.aliado=function(){function bR(bT){var bU,bV;return(bU=(bV=bT.titulo,bV==null?null:{$:1,$0:" "+bV.$0}),bU==null?"":bU.$0)+bT.nombre1+" "+bT.apellido1;}function bS(bT){var bU,bV,bW,bX;return(bU=(bV=$.calculo(),bD.Make().WithHole({$:2,$0:"nombre",$1:by.Map(function(bY){return bR(bY.datosPersonales);},bT)}).WithHole({$:2,$0:"status",$1:by.Map(function(bY){return(function(bZ){return function(b0){return bZ(bd.p$2(b0));};}(a.id))(bY.status);},bT)}).WithHole({$:2,$0:"tipo",$1:by.Map(function(bY){return(function(bZ){return function(b0){return bZ(bd.p$1(b0));};}(a.id))(bY.tipo);},bT)}).WithHole({$:2,$0:"contacto",$1:by.Map(function(bY){return(function(bZ){return function(b0){return bZ(bh.toSafe(b0)+"@hotmail.com");};}(a.id))(bY.datosPersonales.apellido1);},bT)}).WithHole({$:0,$0:"calculo",$1:bV})),(bW=bE.CompleteHoles(bU.k,bU.h,[]),(bX=new bF.New(bW[1],be.aliado(bW[0])),(bU.i=bX,bX)))).get_Doc();}return bH.BindView(a.id,by.Map(function(bT){return bT==null?bH.get_Empty():bS(by.Map(function(bU){return bU.$0;},$.alvO()));},$.alvO()));};$.calculo=function(){var bR,bS,bT;function bU(bV){var bW,bX,bY,bZ,b0;bW=by.Map2(_6.comision,bR,bV);bX=by.Map2(_6.premisas,bR,bV);return(bY=bD.Make().WithHole({$:2,$0:"referidos",$1:by.Map(function(b1){return(function(b2){return function(b3){return b2(a.String(b3));};}(a.id))(b1.nReferidos);},bV)}).WithHole({$:2,$0:"refactivos",$1:by.Map(function(b1){return(function(b2){return function(b3){return b2(a.String(b3));};}(a.id))(b1.nRefActivos);},bV)}).WithHole({$:2,$0:"comreferido",$1:by.Map(function(b1){return(function(b2){return function(b3){return b2(a.String(b3));};}(a.id))(b1.nRefActivos);},bV)}).WithHole({$:2,$0:"descendientes",$1:by.Map(function(b1){return(function(b2){return function(b3){return b2(a.String(b3));};}(a.id))(b1.nDescendientes);},bV)}).WithHole({$:2,$0:"desactivos",$1:by.Map(function(b1){return(function(b2){return function(b3){return b2(a.String(b3));};}(a.id))(b1.nDescActivos);},bV)}).WithHole({$:2,$0:"comision",$1:by.Map(function(b1){return _9.money(b1[0]+b1[1]);},bW)}).WithHole({$:2,$0:"comreferido",$1:by.Map(function(b1){return _9.money(b1[0]);},bW)}).WithHole({$:2,$0:"comdescendiente",$1:by.Map(function(b1){return _9.money(b1[1]);},bW)}).WithHole({$:2,$0:"porreferido",$1:by.Map(function(b1){return _9.money(b1[0]);},bX)}).WithHole({$:2,$0:"pordescendiente",$1:by.Map(function(b1){return _9.money(b1[1]);},bX)}),(bZ=bE.CompleteHoles(bY.k,bY.h,[]),(b0=new bF.New(bZ[1],be.calculo(bZ[0])),(bY.i=b0,b0)))).get_Doc();}bR=by.Map(function(bV){return bV.premisas;},_9.modeloV().get_View());bS=(bT=by.Map(function(bV){return bV.aliados;},_9.modeloV().get_View()),by.Map2(function(bV,bW){return bj.tryFind(function(bX){return bq.Equals(bX.id,bV);},bW);},by.Map(function(bV){return bV.idAliado;},_9.modeloV().get_View()),bT));return bH.BindView(a.id,by.Map(function(bV){return bV==null?bH.get_Empty():bU(by.Map(function(bW){return bW.$0;},bS));},bS));};$.alvO=function(){bc.$cctor();return bc.alvO;};ba.mainProgram=function(){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0;bR=bG.Create$1("Prozper");bJ.addPlugIn(bK.New("Prozper",[bJ.newVar("title",bR)],[bJ.newViw("mesActual",by.Map(function(b1){return ba.mesToString(b1.periodoActual);},_9.modeloV().get_View())),bJ.newViw("anoActual",by.Map(function(b1){return a.String(b1.anoActual);},_9.modeloV().get_View()))],[bJ.newDoc("Aliados",bL.Create(_.aliados)),bJ.newDoc("Aliado",bL.Create($.aliado)),bJ.newDoc("Calculo",bL.Create($.calculo))],[bJ.newAct("Logout",function(){ba.logout();})],[]));bM.addLayout((bS=(bT=self.document.getElementById("GlobalLayout"),bq.Equals(bT,null)?"\r\n                    menuEditor       horizontal  65       menuLogo                  editorMessages\r\n                    double           horizontal  0-50-100 AppFramework.AppFwkClient menuEditor\r\n                    menuLogo         vertical    350      logo                      menu\r\n                    logo             span       \"margin:0; color:gray; font-size: 55px; font-weight:530\" \"F# Station\"\r\n                    editorMessages   horizontal 10-83-100 editorButtons             messages\r\n                    messages         vertical   0-50-100  messagesLeft              messagesRight\r\n                    editorButtons    vertical -200 snippetsSnippet buttons\r\n                    buttons div      \"overflow: hidden; display: grid; grid-template-columns: 100%; grid-template-rows: repeat(15, calc(100% / 15)); bxackground-color: #eee; box-sizing: border-box; padding : 5px; grid-gap: 5px; margin-right: 21px\" btnSaveAs none x btnAddSnippet btnDeleteSnippet btnIndentIn btnIndentOut none x btnRunFS none x btnAbortFsi\r\n                    snippetsSnippet  vertical   0-20-100  snippets                  editorProperties\r\n                    snippets         horizontal 20        \"${FSharpStation.CurrentPath}\" FSharpStation.Snippets\r\n                    editorProperties vertical   0-100-100 snippet                   properties\r\n                    properties       div        \"\"        FSharpStation.Properties\r\n                    snippet          horizontal 35        Name                      FSharpStation.editor\r\n                    menu             span  \"\" btnLoad btnImport\r\n        \r\n                    btnSaveAs        button FSharpStation.SaveAs         \"class=btn ${FSharpStation.SaveNeeded}\" \"Save as...    \"\r\n                    btnAddDimension  button RuleEditor.AddDimension      \"\"                  \"Add Dimension \"\r\n                    btnDeleteSnippet button FSharpStation.RemoveSnippet  \"\"                  \"Delete Snippet\"\r\n                    btnIndentIn      button FSharpStation.IndentIn       \"\"                  \"Indent In  >> \"\r\n                    btnIndentOut     button FSharpStation.IndentOut      \"\"                  \"Indent Out << \"\r\n                    btnRunFS         button FSharpStation.RunFS          \"\"                  \"Run F#        \"\r\n                    btnAbortFsi      button FSharpStation.AbortFsi       \"\"                  \"Abort Fsi     \"\r\n        \r\n                    messagesLeft     wcomp-tabstrip                      \"\"                  Output FsCode\r\n                    messagesRight    wcomp-tabstrip                      \"\"                  Parser\r\n        \r\n                    Output           textarea  FSharpStation.Output      \"tabname=Output ; placeholder=Output messages ; spellcheck=false\" \r\n                    FsCode           textarea  FSharpStation.FsCode      \"tabname=F# Code; placeholder=F# Code         ; spellcheck=false\" \r\n                    Parser           textarea  FSharpStation.Parser      \"tabname=Parser ; placeholder=Parser messages; dblclick=${FSharpStation.JumpTo} ; spellcheck=false\" \r\n                    Name             Doc       InputLabel                \"\"     \"Name:\"        FSharpStation.SnippetName\r\n                    btnLoad          Doc       InputFile                 \"\"     \"Load File...\" FSharpStation.LoadFile  FileName\r\n                    btnImport        Doc       InputFile                 \"\"     \"Import...\"    FSharpStation.Import    \"\"\r\n                    FileName         div                                 \"class=form-control\"  FSharpStation.fileName\r\n                   ":bT.textContent),bM.newLyt(ba.layoutName(),bS)));bU=(bV=null,(bW=ba.layoutName(),bV==null?bW:bV.$0));bJ.mainDocV().Set(bU);_8.iterA((bX=G.asyncResultM(),bX.Run(bX.Delay(function(){return bX.Bind$4((new bO.New()).Async("StackOverflow:FsRoot.StackOverflow+Rpc.leerDataModelo:1546275073",[]),function(b1){_9.modeloV().Set(b1);return bX.Zero();});}))));bY=(bZ=bJ.getMainDoc().f(),bD.Make().WithHole({$:0,$0:"maincontent",$1:bZ}));b0=bE.CompleteHoles(bY.k,bY.h,[]);bY.i=new bF.New(b0[1],bQ.RunFullDocTemplate(b0[0]));by.Sink(function(b1){self.document.title=b1;},bR.get_View());};ba.logout=function(){var bR;_8.iterA((bR=G.asyncResultM(),bR.Run(bR.Delay(function(){return bR.Bind$4((new bO.New()).Async("StackOverflow:FsRoot.StackOverflow+Rpc.logoutUser:933851348",[]),function(){self.location.reload();return bR.Zero();});}))));};ba.mesToString=function(bR){return bR===1?"Ene":bR===2?"Feb":bR===3?"Mar":bR===4?"Abr":bR===5?"May":bR===6?"Jun":bR===7?"Jul":bR===8?"Ago":bR===9?"Sep":bR===10?"Oct":bR===11?"Nov":bR===12?"Dic":"---";};ba.scrollToBottom=function(bR,bS){var bT;bm.Start((bT=null,bm.Delay(function(){return bm.Bind(bm.Sleep(100),function(){bR.scrollTop=bR.scrollHeight;return bm.Zero();});})),null);};ba.layoutName=function(){bc.$cctor();return bc.layoutName;};bb.content$4342$35=function(){return function(bR){var bS;if(bR.Vars.Hole("username").Get()!==""&&bR.Vars.Hole("password").Get()!==""){_8.iterA((bS=G.asyncResultM(),bS.Run(bS.Delay(function(){return bS.Bind$4((new bO.New()).Async("StackOverflow:FsRoot.StackOverflow+Rpc.loginUser:-1419667674",[bR.Vars.Hole("username").Get(),bR.Vars.Hole("password").Get()]),function(){self.location.reload();return bS.Zero();});}))));}};};bb.content$4332$58=function(){ba.mainProgram();return bH.TextNode("Initialized");};J.premisasCalculo=function(){bc.$cctor();return bc.premisasCalculo;};bc.$cctor=function(){var bR,bS,bT,bU;bc.$cctor=a.ignore;function bV(bZ){return bi.concat("\n",bZ);}function bW(bZ){return H.splitByChar$1("\n",bZ);}function bX(bZ){var b0,b1;return bs.array(bZ,{$:1,$0:0},{$:1,$0:(b0=0,(b1=bl.length(bZ)-2,bq.Compare(b0,b1)===1?b0:b1))});}function bY(bZ){return bi.concat("\n",bZ);}bc.rtn=function(bZ){return[bZ];};bc.result=new l.New();bc.result$1=k.result();bc.eff=new s.New();bc.resultM=new B.New();bc.asyncResultM=new F.New();bc.unindentStr=function(bZ){return bV(H.unindent$1(bZ));};bc.skipLastLine=(bR=function(bZ){return bX(bW(bZ));},function(bZ){return bY(bR(bZ));});bc.rootdir="..\\website";bc.TemplatesFileName="..\\website"+"\\Templates.html";bc.LoginFileName="..\\website"+"\\Login.html";((function(bZ){return function(b0){return bZ(bh.toSafe(b0));};}(function(bZ){br.log(bZ);}))("..\\website\\Templates.html"));bc.premisasCalculo=_4.New(15,25,25,0,75,31,15,22);bc.modeloV=bG.Create$1(_5.New({$:0,$0:":"},[],(bS=bt.now(),(new bt(bS)).getFullYear()),(bT=bt.now(),(new bt(bT)).getMonth()+1),J.premisasCalculo()));bc.alvO=(bU=by.get_Do(),by.Bind(function(bZ){return by.Const(bj.tryFind(function(b0){return bq.Equals(b0.id,bZ.idAliado);},bZ.aliados));},_9.modeloV().get_View()));bc.layoutName="ProzperLyt";};bd.p=function(bR){return"IdAliado "+bh.prettyPrint(bR.$0);};be.tablaaliados=function(bR){bQ.LoadLocalTemplates("templates");return bR?bQ.NamedTemplate("templates",{$:1,$0:"tablaaliados"},bR):void 0;};be.filaaliado=function(bR){bQ.LoadLocalTemplates("templates");return bR?bQ.NamedTemplate("templates",{$:1,$0:"filaaliado"},bR):void 0;};bd.p$2=function(bR){return bR.$==1?"Inactivo":"Activo";};bd.p$1=function(bR){return bR.$==1?"Regular":"Master";};be.aliado=function(bR){bQ.LoadLocalTemplates("templates");return bR?bQ.NamedTemplate("templates",{$:1,$0:"aliado"},bR):void 0;};be.calculo=function(bR){bQ.LoadLocalTemplates("templates");return bR?bQ.NamedTemplate("templates",{$:1,$0:"calculo"},bR):void 0;};}());

//# sourceMappingURL=StackOverflow.min.map